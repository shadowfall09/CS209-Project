{"items":[{"tags":["java","spring","xml-parsing","wsdl","isodate"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":2,"creation_date":1677055172,"post_id":75530048,"comment_id":133259776,"body_markdown":"share your code","body":"share your code"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":4,"creation_date":1677055282,"post_id":75530048,"comment_id":133259805,"body_markdown":"These are different formats. One is a `ZonedDateTime`, the other is a `LocalDateTime`. You need to parse them using different formats.","body":"These are different formats. One is a <code>ZonedDateTime</code>, the other is a <code>LocalDateTime</code>. You need to parse them using different formats."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677082279,"post_id":75530048,"comment_id":133268192,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677180929,"post_id":75530048,"comment_id":133292352,"body_markdown":"You should hardly want to process any of those as `LocalDateTime`. If you know from which 2 areas they come, then the `ZonedDateTime` class that @f1sh refers to is probably right, but will require a (different) conversion for each. So for starters, from which two areas do they come?","body":"You should hardly want to process any of those as <code>LocalDateTime</code>. If you know from which 2 areas they come, then the <code>ZonedDateTime</code> class that @f1sh refers to is probably right, but will require a (different) conversion for each. So for starters, from which two areas do they come?"},{"owner":{"account_id":23236312,"reputation":21,"user_id":17326282,"display_name":"hsynuls"},"score":1,"creation_date":1677236568,"post_id":75530048,"comment_id":133302389,"body_markdown":"yes, I tried different conversion for each areas and the problem is solved thank you  @f1sh","body":"yes, I tried different conversion for each areas and the problem is solved thank you  @f1sh"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677080343,"creation_date":1677055699,"answer_id":75530144,"question_id":75530048,"body_markdown":"# `OffsetDateTime`\r\n\r\nYour first input has an offset of three hours ahead of UTC. So parse as an `OffsetDateTime`. \r\n\r\n    OffsetDateTime odt = OffsetDateTime.parse( &quot;2023-02-22T09:47:00.5371934+03:00&quot; ) ;\r\n\r\n# `LocalDateTime`\r\n\r\nThis other input has no offset, and no time zone. So parse as a `LocalDateTime`. \r\n\r\n    LocalDateTime ldt = LocalDateTime.parse( &quot;2023-02-22T09:47:00.537&quot; ) ;\r\n    ","title":"Local DateTime Parsing 2023-02-22T09:47:00.5371934+03:00 and 2023-02-22T09:47:00.537","body":"<h1><code>OffsetDateTime</code></h1>\n<p>Your first input has an offset of three hours ahead of UTC. So parse as an <code>OffsetDateTime</code>.</p>\n<pre><code>OffsetDateTime odt = OffsetDateTime.parse( &quot;2023-02-22T09:47:00.5371934+03:00&quot; ) ;\n</code></pre>\n<h1><code>LocalDateTime</code></h1>\n<p>This other input has no offset, and no time zone. So parse as a <code>LocalDateTime</code>.</p>\n<pre><code>LocalDateTime ldt = LocalDateTime.parse( &quot;2023-02-22T09:47:00.537&quot; ) ;\n</code></pre>\n"}],"owner":{"account_id":23236312,"reputation":21,"user_id":17326282,"display_name":"hsynuls"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1677241628,"accepted_answer_id":75530144,"answer_count":1,"score":-1,"last_activity_date":1677080343,"creation_date":1677055119,"question_id":75530048,"body_markdown":"How can I parse this code to localDateTime?\r\n\r\nI have 2 area that give me localDateTime, One of them is 2023-02-22T09:47:00.5371934+03:00 the other one is 2023-02-22T09:47:00.537 and response like this:\r\n\r\njava.time.format.DateTimeParseException: Text &#39;2023-02-22T09:47:00.537&#39; could not be parsed at index 23 \\n\\tat org.apache.cxf.jaxws.JaxWsClientProxy.mapException(JaxWsClientProxy.java:195)\r\n\r\nI have tried DateTimeFormatter.ISO_ZONED_DATE_TIME, it didn&#39;t work.\r\n\r\nDo u you have any suggestions?","title":"Local DateTime Parsing 2023-02-22T09:47:00.5371934+03:00 and 2023-02-22T09:47:00.537","body":"<p>How can I parse this code to localDateTime?</p>\n<p>I have 2 area that give me localDateTime, One of them is 2023-02-22T09:47:00.5371934+03:00 the other one is 2023-02-22T09:47:00.537 and response like this:</p>\n<p>java.time.format.DateTimeParseException: Text '2023-02-22T09:47:00.537' could not be parsed at index 23 \\n\\tat org.apache.cxf.jaxws.JaxWsClientProxy.mapException(JaxWsClientProxy.java:195)</p>\n<p>I have tried DateTimeFormatter.ISO_ZONED_DATE_TIME, it didn't work.</p>\n<p>Do u you have any suggestions?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12646737,"reputation":1077,"user_id":9192223,"display_name":"hiren"},"score":1,"creation_date":1672215404,"post_id":74937809,"comment_id":132242761,"body_markdown":"Try just JANUARY","body":"Try just JANUARY"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1672215386,"creation_date":1672215386,"answer_id":74937828,"question_id":74937809,"body_markdown":"Note the *unqualified* part in the error message. It&#39;s not saying you can&#39;t use enum values as case labels - it&#39;s saying that you can&#39;t include the enum name. The code should be:\r\n\r\n```java\r\nswitch (currentMonth) {\r\n    case JANUARY:\r\n        frequencyEntity = FrequencyEntity.builder().january(frequency).build();\r\n        break;\r\n}\r\n```","title":"An enum switch case label","body":"<p>Note the <em>unqualified</em> part in the error message. It's not saying you can't use enum values as case labels - it's saying that you can't include the enum name. The code should be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>switch (currentMonth) {\n    case JANUARY:\n        frequencyEntity = FrequencyEntity.builder().january(frequency).build();\n        break;\n}\n</code></pre>\n"}],"owner":{"account_id":1859171,"reputation":3557,"user_id":1684123,"accept_rate":48,"display_name":"Kifsif"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74937828,"answer_count":1,"score":0,"last_activity_date":1677080129,"creation_date":1672215228,"question_id":74937809,"body_markdown":"                LocalDate currentdate = LocalDate.now();\r\n                Month currentMonth = currentdate.getMonth();\r\n                FrequencyEntity frequencyEntity = null;\r\n                switch (currentMonth) {\r\n                    case Month.JANUARY: // Here.\r\n                        frequencyEntity = FrequencyEntity.builder().january(frequency).build();\r\n                        \r\n                }\r\nThe line I have commented as &quot;Here&quot; causes my IDE to show this: &quot;An enum switch case label must be the unqualified name of an enumeration constant.&quot;.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe only possible solution I can envisage is convert the month to String. But this may be not a correct solution.\r\n\r\nIs there a more elegant way? \r\n\r\n  [1]: https://i.stack.imgur.com/zIHab.png","title":"An enum switch case label","body":"<pre><code>            LocalDate currentdate = LocalDate.now();\n            Month currentMonth = currentdate.getMonth();\n            FrequencyEntity frequencyEntity = null;\n            switch (currentMonth) {\n                case Month.JANUARY: // Here.\n                    frequencyEntity = FrequencyEntity.builder().january(frequency).build();\n                    \n            }\n</code></pre>\n<p>The line I have commented as &quot;Here&quot; causes my IDE to show this: &quot;An enum switch case label must be the unqualified name of an enumeration constant.&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/zIHab.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zIHab.png\" alt=\"enter image description here\" /></a></p>\n<p>The only possible solution I can envisage is convert the month to String. But this may be not a correct solution.</p>\n<p>Is there a more elegant way?</p>\n"},{"tags":["java","spring","spring-boot","rest","java-ee-8"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677082435,"post_id":75534907,"comment_id":133268246,"body_markdown":"You get XML not an integer. Create a wrapper object, then extract the int from the wrapper object.","body":"You get XML not an integer. Create a wrapper object, then extract the int from the wrapper object."},{"owner":{"account_id":12861581,"reputation":337,"user_id":9303161,"display_name":"Thilina Sandaruwan"},"score":0,"creation_date":1677082879,"post_id":75534907,"comment_id":133268388,"body_markdown":"Could you please give me an example? How do I write a wrapper object for this?","body":"Could you please give me an example? How do I write a wrapper object for this?"}],"owner":{"account_id":12861581,"reputation":337,"user_id":9303161,"display_name":"Thilina Sandaruwan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677079874,"creation_date":1677079874,"question_id":75534907,"body_markdown":"I&#39;m consuming a http endpoint which is returns a text/xml content as the response. It should return a number as the response within xml document. How do I parse it. \r\n\r\nHere is the response when I consume the endpoint using postman.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;int xmlns=&quot;http://tempuri.org/&quot;&gt;2&lt;/int&gt;\r\n```\r\n\r\nWhen I try as below, it gives me an error.\r\n\r\n```\r\nInteger originalResponse = REST_TEMPLATE.exchange(new URI(PropertyConfig.endPointUrl), HttpMethod.POST, httpEntity, Integer.class).getBody();\r\n```\r\n\r\nbut if I set the return type as String, It gives me the xml as a plain text. I need get the number which is within the &lt;int&gt; tags as the result.\r\n\r\nIs there a way to do this?\r\n\r\n\r\n","title":"Parse text/xml response in spring resttemplate exchange method","body":"<p>I'm consuming a http endpoint which is returns a text/xml content as the response. It should return a number as the response within xml document. How do I parse it.</p>\n<p>Here is the response when I consume the endpoint using postman.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;int xmlns=&quot;http://tempuri.org/&quot;&gt;2&lt;/int&gt;\n</code></pre>\n<p>When I try as below, it gives me an error.</p>\n<pre><code>Integer originalResponse = REST_TEMPLATE.exchange(new URI(PropertyConfig.endPointUrl), HttpMethod.POST, httpEntity, Integer.class).getBody();\n</code></pre>\n<p>but if I set the return type as String, It gives me the xml as a plain text. I need get the number which is within the  tags as the result.</p>\n<p>Is there a way to do this?</p>\n"},{"tags":["java","multithreading","synchronization","locking","synchronized"],"comments":[{"owner":{"account_id":26789322,"reputation":71,"user_id":20382988,"display_name":"Ahmet M"},"score":0,"creation_date":1676619441,"post_id":75481157,"comment_id":133177283,"body_markdown":"I think the paragraph talks about the fact that methods of Lock interface could be called anytime and anywhere as long as you have a reference to an instance of that interface but synchronized(lock){} acquires the lock before entry and releases the lock after action in {}  performed. You could use lock interface to release the lock in the middle of {}. [in the middle of some action].","body":"I think the paragraph talks about the fact that methods of Lock interface could be called anytime and anywhere as long as you have a reference to an instance of that interface but synchronized(lock){} acquires the lock before entry and releases the lock after action in {}  performed. You could use lock interface to release the lock in the middle of {}. [in the middle of some action]."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1676619648,"post_id":75481157,"comment_id":133177320,"body_markdown":"Well, technically, you *can* just slap `synchronized` all over the place and be thread-safe that way, but you don&#39;t get much fine-grained control like that, do you? What if you want more fine-grained locking, so that the code can run in parallel as much as possible?","body":"Well, technically, you <i>can</i> just slap <code>synchronized</code> all over the place and be thread-safe that way, but you don&#39;t get much fine-grained control like that, do you? What if you want more fine-grained locking, so that the code can run in parallel as much as possible?"},{"owner":{"account_id":26789322,"reputation":71,"user_id":20382988,"display_name":"Ahmet M"},"score":0,"creation_date":1676619706,"post_id":75481157,"comment_id":133177338,"body_markdown":"Probably, database transactions works that way. [When deadlock occurs and database systems detect that. The database should cancel some transactions so that the deadlock is fixed. (The cancelled transactions tried again). In this case, some in the middle of an action release of a lock would be required.] A transaction might acquire multiple locks. [a lock is used for whole table or a row of a table]","body":"Probably, database transactions works that way. [When deadlock occurs and database systems detect that. The database should cancel some transactions so that the deadlock is fixed. (The cancelled transactions tried again). In this case, some in the middle of an action release of a lock would be required.] A transaction might acquire multiple locks. [a lock is used for whole table or a row of a table]"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1676619708,"post_id":75481157,"comment_id":133177339,"body_markdown":"The docs already mentioned &quot;hand-over-hand&quot; locking, so how about looking that up first? :)","body":"The docs already mentioned &quot;hand-over-hand&quot; locking, so how about looking that up first? :)"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1676645281,"post_id":75481157,"comment_id":133184609,"body_markdown":"What is unclear about the description of _&quot;&quot;hand-over-hand&quot; or &quot;chain locking&quot;&quot;_? That is something like _lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock_. You can&#39;t do that with synchronized. Or are you specifically looking for a code sample that does that because you can imagine why or how that would work?","body":"What is unclear about the description of <i>&quot;&quot;hand-over-hand&quot; or &quot;chain locking&quot;&quot;</i>? That is something like <i>lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock</i>. You can&#39;t do that with synchronized. Or are you specifically looking for a code sample that does that because you can imagine why or how that would work?"},{"owner":{"account_id":6331034,"reputation":1165,"user_id":5224844,"accept_rate":56,"display_name":"Deca"},"score":0,"creation_date":1676690057,"post_id":75481157,"comment_id":133193736,"body_markdown":"@MarkRotteveel - Do you have a sample snippet for that(lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock)? I will try to achieve that using just synchronized and won&#39;t use lock.","body":"@MarkRotteveel - Do you have a sample snippet for that(lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock)? I will try to achieve that using just synchronized and won&#39;t use lock."},{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1676754941,"post_id":75481157,"comment_id":133202412,"body_markdown":"@Deca the problem of synchronized is that it has its own scope, so if you need sequential locking, the only way is to use inner synchronized block. For example synchronized (a) { synchronized (b) {}}. Inner blocks have only one single order of monitor locking {a, b} and, obviously, only one single order of unlocking {b, a}, never {a, b}. I&#39;ve updated my answer with this","body":"@Deca the problem of synchronized is that it has its own scope, so if you need sequential locking, the only way is to use inner synchronized block. For example synchronized (a) { synchronized (b) {}}. Inner blocks have only one single order of monitor locking {a, b} and, obviously, only one single order of unlocking {b, a}, never {a, b}. I&#39;ve updated my answer with this"}],"answers":[{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676638590,"creation_date":1676638590,"answer_id":75484618,"question_id":75481157,"body_markdown":"Recently I had the case that a simple `synchronize` was no longer sufficient. It should be ensured that a long running job like a data import should not run in parallel. But if, for some reason, a second job would be started this second job should be blocked until the first job ends. Really simple. But because such a case would be an error situation in our system, there should be a log message in case of blocking. For this use case we need more than a simple `synchronize`.\r\n\r\nWe used the `ReentrantLock`&#39;s `tryLock()` method to implement this.\r\n\r\nHere a simplified version of our implementation:\r\n\r\nThe job has to implement the interface `ProtectedExecutable` with the critical section in method `execute()` and blocking handler in `onBlocking()`.\r\n\r\n    interface ProtectedExecutable {\r\n      /**\r\n       * The code to be executed as a critical section\r\n       * @return Result value\r\n       */\r\n      int execute();\r\n\r\n      /**\r\n       * Is called only if the execution was blocked.\r\n       * @param reason Text with the blocking reason, which can be logged. Contains the description of the blocking ProtectedExecutable if\r\n       *               possible\r\n       */\r\n      void onBlocking(String reason);\r\n    }\r\n\r\nIn ProtectedExecutor `tryLock()` is first used to enter the critical section or to return `false` if it is blocked. So there is a chance to do some action before calling the blocking version `lock()` and wait.\r\n\r\n    class ProtectedExecutor {\r\n      private final Lock lock = new ReentrantLock();\r\n\r\n      public int execute(ProtectedExecutable executable) {\r\n        if(lock.tryLock()) {\r\n          try{\r\n            return executable.execute();\r\n          } finally {\r\n            lock.unlock();\r\n          }\r\n        } else {\r\n          executable.onBlocking(&quot;Execution blocked by another ProtectedExecutor!&quot;);\r\n          lock.lock();\r\n          try {\r\n            return executable.execute();\r\n          } finally {\r\n            lock.unlock();\r\n          }\r\n        }\r\n      }\r\n    }\r\n ","title":"Example where Java lock works but synchronisation doesn&#39;t","body":"<p>Recently I had the case that a simple <code>synchronize</code> was no longer sufficient. It should be ensured that a long running job like a data import should not run in parallel. But if, for some reason, a second job would be started this second job should be blocked until the first job ends. Really simple. But because such a case would be an error situation in our system, there should be a log message in case of blocking. For this use case we need more than a simple <code>synchronize</code>.</p>\n<p>We used the <code>ReentrantLock</code>'s <code>tryLock()</code> method to implement this.</p>\n<p>Here a simplified version of our implementation:</p>\n<p>The job has to implement the interface <code>ProtectedExecutable</code> with the critical section in method <code>execute()</code> and blocking handler in <code>onBlocking()</code>.</p>\n<pre><code>interface ProtectedExecutable {\n  /**\n   * The code to be executed as a critical section\n   * @return Result value\n   */\n  int execute();\n\n  /**\n   * Is called only if the execution was blocked.\n   * @param reason Text with the blocking reason, which can be logged. Contains the description of the blocking ProtectedExecutable if\n   *               possible\n   */\n  void onBlocking(String reason);\n}\n</code></pre>\n<p>In ProtectedExecutor <code>tryLock()</code> is first used to enter the critical section or to return <code>false</code> if it is blocked. So there is a chance to do some action before calling the blocking version <code>lock()</code> and wait.</p>\n<pre><code>class ProtectedExecutor {\n  private final Lock lock = new ReentrantLock();\n\n  public int execute(ProtectedExecutable executable) {\n    if(lock.tryLock()) {\n      try{\n        return executable.execute();\n      } finally {\n        lock.unlock();\n      }\n    } else {\n      executable.onBlocking(&quot;Execution blocked by another ProtectedExecutor!&quot;);\n      lock.lock();\n      try {\n        return executable.execute();\n      } finally {\n        lock.unlock();\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677079689,"creation_date":1676678837,"answer_id":75490295,"question_id":75481157,"body_markdown":"Can `ReentrantLock` be naive/directly replaced by `synchronized` in all cases? -No. Just because the locking with `ReentrantLock` can cross method/block scope, and locking with `synchronized` cannot, it sets its own scope (at least you have to re-invent the lock with wait/notify(All) to have the same feature). What does it mean? For two locks `a` and `b` the `ReentrantLock` allows you to have any order of locking and any order of unlocking. For example, `lock {a, b}`, `unlock {a, b}` or `unlock {b, a}`. The `synchronized` block allows the order of unlocking to be only reverse order of locking (`synchronized (a) { synchronized (b) {}}` - `lock {a, b}`, `unlock {b, a}`, *never* `unlock {a, b}`)  \r\n\r\nBut, all practical problems can be resolved without `ReentrantLock`. And here I&#39;d like to share some thoughts...\r\n\r\nMost samples/comments will show how to use `ReentrantLock` to solve a problem, but in most cases there is another solution, and it may be even simpler, more clear, more natural. For example, &quot;chain locking&quot; tries to solve the problem of specific sequence of execution. This particular problem can be resolved with appropriate `ExecutorService` (for example with a single threaded executor for sequential execution) and a set of Tasks we put in specific order to be executed. More complex cases can be addressed with something like `java.util.concurrent.Phaser` etc. Or, there is another trick: to schedule next task(s) to be executed in the end of the current one (https://stackoverflow.com/questions/67421884/how-to-execute-threads-with-executorservice-in-concrete-order/67441030#67441030). Threads and queues (mostly blocking) are very-very power, natural and canonical way to orchestrate multithreading work, and that way is significantly more safe, than locking.\r\n\r\nFor example, &quot;chain locking&quot; is deadlock-prone if different chains may have different order. Compare &quot;*lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock*&quot; and &quot;*lock2.lock, do something, lock1.lock, lock2.unlock, do something, lock1.unlock*&quot;. So, I would recommend to avoid &quot;chain locking&quot; in real design, if possible. The same for classic nested `synchronized` blocks.\r\n\r\nAnother example when a task &quot;should not run in parallel&quot; (`ProtectedExecutable` below) also perfectly can be resolved (by design) with a single threaded executor, and so on.\r\n\r\nThen why we may prefer `ReentrantLock` over `synchronized` in our day-to-day practice?...\r\n\r\nThere is a known small difference in terms of performance between synchronized and `ReentrantLock` in cases of high contention, but not sure that&#39;s really important somewhere out of synthetic tests on specific JDK (Java 15 have disabled biased locking (JEP 374) in the Java virtual machine and this can affect test results).\r\n\r\nI&#39;d say that the only thing I&#39;ve found useful in my personal practice is design-related, and it bases on the fact that *with a lock we can cross method scope*. This is not about a problem which can be resolved with `ReentrantLock` only, but about a case when it may be convenient to use it. When you need a thread safe structure/class with a more or less complex behavior, there are 2 main patterns:\r\n\r\n    // each thread-safe business method is atomic\r\n    // and synchronized\r\n    class A {\r\n      // a lot of fields here\r\n    \r\n      private void doX() {\r\n        // a portion of manipulations with the fields\r\n      }\r\n      private void doY() {\r\n        // another portion of manipulations with the fields\r\n      }\r\n    \r\n      public synchronized void threadSafeOperation() {\r\n         doX();\r\n         doY();\r\n      }\r\n    }\r\n\r\n    A a = new A();\r\n    a.threadSafeOperation();\r\n\r\n\r\n    // each thread-safe business method is atomic\r\n    // and synchronized\r\n    class A {\r\n      private final ReenterantLock lock = new ReenterantLock();\r\n      // a lot of fields here\r\n \r\n      public void lock() {\r\n        lock.lock();\r\n      }\r\n\r\n      public void unlock() {\r\n        lock.unlock();\r\n      }\r\n\r\n      public void doX() {\r\n        // a portion of manipulations with the fields\r\n      }\r\n      public void doY() {\r\n        // another portion of manipulations with the fields\r\n      }\r\n    }\r\n\r\n    A a = new A();\r\n    a.lock();\r\n    try {\r\n      a.doX();\r\n      a.doY();\r\n    } finally {\r\n      a.unlock();\r\n    }\r\n\r\n\r\nThe first pattern requires each thread-safe operation/usage to be defined as one single synchronized method. The second pattern allows you to use different combinations in different use cases. Each one may be reasonable/preferable in specific case.\r\n\r\nIn the second case we also may say &quot;use synchronized instead of lock&quot;, but specifically and explicitly defined lock/unlock operations say more about our intentions and rules of usage than:\r\n\r\n    A a = new A();\r\n    synchronized(a) {\r\n      a.doX();\r\n      a.doY();\r\n    }\r\n\r\nJava object monitor&#39;s based synchronization (`synchronized` + `wait` + `notify(All)`) helped to resolve all practical problems for years, but one day Doug Lea and Co had decided to develop a rich, object-oriented library of concurrent primitives. So, now we have a number of more or less useful locks, things like `java.util.concurrent.locks.Condition` (instead of `wait` + `notify(All)`), effective concurrent collections and some other stuff. Now we can choose more expressive, effective way/tool to solve our day-to-day problems in concurrency.","title":"Example where Java lock works but synchronisation doesn&#39;t","body":"<p>Can <code>ReentrantLock</code> be naive/directly replaced by <code>synchronized</code> in all cases? -No. Just because the locking with <code>ReentrantLock</code> can cross method/block scope, and locking with <code>synchronized</code> cannot, it sets its own scope (at least you have to re-invent the lock with wait/notify(All) to have the same feature). What does it mean? For two locks <code>a</code> and <code>b</code> the <code>ReentrantLock</code> allows you to have any order of locking and any order of unlocking. For example, <code>lock {a, b}</code>, <code>unlock {a, b}</code> or <code>unlock {b, a}</code>. The <code>synchronized</code> block allows the order of unlocking to be only reverse order of locking (<code>synchronized (a) { synchronized (b) {}}</code> - <code>lock {a, b}</code>, <code>unlock {b, a}</code>, <em>never</em> <code>unlock {a, b}</code>)</p>\n<p>But, all practical problems can be resolved without <code>ReentrantLock</code>. And here I'd like to share some thoughts...</p>\n<p>Most samples/comments will show how to use <code>ReentrantLock</code> to solve a problem, but in most cases there is another solution, and it may be even simpler, more clear, more natural. For example, &quot;chain locking&quot; tries to solve the problem of specific sequence of execution. This particular problem can be resolved with appropriate <code>ExecutorService</code> (for example with a single threaded executor for sequential execution) and a set of Tasks we put in specific order to be executed. More complex cases can be addressed with something like <code>java.util.concurrent.Phaser</code> etc. Or, there is another trick: to schedule next task(s) to be executed in the end of the current one (<a href=\"https://stackoverflow.com/questions/67421884/how-to-execute-threads-with-executorservice-in-concrete-order/67441030#67441030\">How to execute threads with ExecutorService in concrete order?</a>). Threads and queues (mostly blocking) are very-very power, natural and canonical way to orchestrate multithreading work, and that way is significantly more safe, than locking.</p>\n<p>For example, &quot;chain locking&quot; is deadlock-prone if different chains may have different order. Compare &quot;<em>lock1.lock, do something, lock2.lock, lock1.unlock, do something, lock2.unlock</em>&quot; and &quot;<em>lock2.lock, do something, lock1.lock, lock2.unlock, do something, lock1.unlock</em>&quot;. So, I would recommend to avoid &quot;chain locking&quot; in real design, if possible. The same for classic nested <code>synchronized</code> blocks.</p>\n<p>Another example when a task &quot;should not run in parallel&quot; (<code>ProtectedExecutable</code> below) also perfectly can be resolved (by design) with a single threaded executor, and so on.</p>\n<p>Then why we may prefer <code>ReentrantLock</code> over <code>synchronized</code> in our day-to-day practice?...</p>\n<p>There is a known small difference in terms of performance between synchronized and <code>ReentrantLock</code> in cases of high contention, but not sure that's really important somewhere out of synthetic tests on specific JDK (Java 15 have disabled biased locking (JEP 374) in the Java virtual machine and this can affect test results).</p>\n<p>I'd say that the only thing I've found useful in my personal practice is design-related, and it bases on the fact that <em>with a lock we can cross method scope</em>. This is not about a problem which can be resolved with <code>ReentrantLock</code> only, but about a case when it may be convenient to use it. When you need a thread safe structure/class with a more or less complex behavior, there are 2 main patterns:</p>\n<pre><code>// each thread-safe business method is atomic\n// and synchronized\nclass A {\n  // a lot of fields here\n\n  private void doX() {\n    // a portion of manipulations with the fields\n  }\n  private void doY() {\n    // another portion of manipulations with the fields\n  }\n\n  public synchronized void threadSafeOperation() {\n     doX();\n     doY();\n  }\n}\n\nA a = new A();\na.threadSafeOperation();\n\n\n// each thread-safe business method is atomic\n// and synchronized\nclass A {\n  private final ReenterantLock lock = new ReenterantLock();\n  // a lot of fields here\n\n  public void lock() {\n    lock.lock();\n  }\n\n  public void unlock() {\n    lock.unlock();\n  }\n\n  public void doX() {\n    // a portion of manipulations with the fields\n  }\n  public void doY() {\n    // another portion of manipulations with the fields\n  }\n}\n\nA a = new A();\na.lock();\ntry {\n  a.doX();\n  a.doY();\n} finally {\n  a.unlock();\n}\n</code></pre>\n<p>The first pattern requires each thread-safe operation/usage to be defined as one single synchronized method. The second pattern allows you to use different combinations in different use cases. Each one may be reasonable/preferable in specific case.</p>\n<p>In the second case we also may say &quot;use synchronized instead of lock&quot;, but specifically and explicitly defined lock/unlock operations say more about our intentions and rules of usage than:</p>\n<pre><code>A a = new A();\nsynchronized(a) {\n  a.doX();\n  a.doY();\n}\n</code></pre>\n<p>Java object monitor's based synchronization (<code>synchronized</code> + <code>wait</code> + <code>notify(All)</code>) helped to resolve all practical problems for years, but one day Doug Lea and Co had decided to develop a rich, object-oriented library of concurrent primitives. So, now we have a number of more or less useful locks, things like <code>java.util.concurrent.locks.Condition</code> (instead of <code>wait</code> + <code>notify(All)</code>), effective concurrent collections and some other stuff. Now we can choose more expressive, effective way/tool to solve our day-to-day problems in concurrency.</p>\n"}],"owner":{"account_id":6331034,"reputation":1165,"user_id":5224844,"accept_rate":56,"display_name":"Deca"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677079689,"creation_date":1676617855,"question_id":75481157,"body_markdown":"I have been looking into scenarios where using Lock, ReentrantLock fits perfectly fine, but that scenario would be unachievable by using usual synchronisation. The official javadocs says:\r\n\r\n&gt; There are occasions where you need to work with locks in a more\r\n&gt; flexible way. For example, some algorithms for traversing concurrently\r\n&gt; accessed data structures require the use of &quot;hand-over-hand&quot; or &quot;chain\r\n&gt; locking&quot;: you acquire the lock of node A, then node B, then release A\r\n&gt; and acquire C, then release B and acquire D and so on. Implementations\r\n&gt; of the Lock interface enable the use of such techniques by allowing a\r\n&gt; lock to be acquired and released in different scopes, and allowing\r\n&gt; multiple locks to be acquired and released in any order.\r\n\r\nI failed to find any such example code snippet where only ReentrantLock solved the problem, but not the usual synchronization. I am aware of all the other advantages that Lock interfaces provide such as fairness, etc., but I am not looking for the theories. ","title":"Example where Java lock works but synchronisation doesn&#39;t","body":"<p>I have been looking into scenarios where using Lock, ReentrantLock fits perfectly fine, but that scenario would be unachievable by using usual synchronisation. The official javadocs says:</p>\n<blockquote>\n<p>There are occasions where you need to work with locks in a more\nflexible way. For example, some algorithms for traversing concurrently\naccessed data structures require the use of &quot;hand-over-hand&quot; or &quot;chain\nlocking&quot;: you acquire the lock of node A, then node B, then release A\nand acquire C, then release B and acquire D and so on. Implementations\nof the Lock interface enable the use of such techniques by allowing a\nlock to be acquired and released in different scopes, and allowing\nmultiple locks to be acquired and released in any order.</p>\n</blockquote>\n<p>I failed to find any such example code snippet where only ReentrantLock solved the problem, but not the usual synchronization. I am aware of all the other advantages that Lock interfaces provide such as fairness, etc., but I am not looking for the theories.</p>\n"},{"tags":["java","spring-webflux","reactive-programming","project-reactor"],"comments":[{"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"score":0,"creation_date":1677062166,"post_id":75529582,"comment_id":133261687,"body_markdown":"I feel like someone didn&#39;t think this through properly. Every request has a response. Ofc, there are async methodologies, so you can create a response with an &#39;Accept&#39; status immediately after every request. So, I wouldn&#39;t use a pending element in the code like zip. I would save the 1-2-3 requests into the cache. When you get the 4th request, you will have to handle cached data, and you can make a response with 200. Ofc, you should be prepared for what happens if there is no 2nd, 3rd or 4th request. So need a timeout on cached data.","body":"I feel like someone didn&#39;t think this through properly. Every request has a response. Ofc, there are async methodologies, so you can create a response with an &#39;Accept&#39; status immediately after every request. So, I wouldn&#39;t use a pending element in the code like zip. I would save the 1-2-3 requests into the cache. When you get the 4th request, you will have to handle cached data, and you can make a response with 200. Ofc, you should be prepared for what happens if there is no 2nd, 3rd or 4th request. So need a timeout on cached data."},{"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"score":0,"creation_date":1677067151,"post_id":75529582,"comment_id":133263101,"body_markdown":"Actually this was a feature there was already. My intention is just to integrate the 4th request based on earlier response. (new code is from `.flatMapIterable(list -&gt; list) // 6. Flux&lt;ParcelInfo&gt;` in the stream). Is there a workaround without introducing a cache?","body":"Actually this was a feature there was already. My intention is just to integrate the 4th request based on earlier response. (new code is from <code>.flatMapIterable(list -&gt; list) &#47;&#47; 6. Flux&lt;ParcelInfo&gt;</code> in the stream). Is there a workaround without introducing a cache?"},{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1677106456,"post_id":75529582,"comment_id":133274800,"body_markdown":"`flatMap` is a way to go in such scenarios. In general flow looks good but I would review error handling or adding retries at some points. No special handling needed at 4th step. Currently any error at any step (1,2,3,4) would cancel the flow and return error signal downstream.","body":"<code>flatMap</code> is a way to go in such scenarios. In general flow looks good but I would review error handling or adding retries at some points. No special handling needed at 4th step. Currently any error at any step (1,2,3,4) would cancel the flow and return error signal downstream."},{"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"score":0,"creation_date":1677110392,"post_id":75529582,"comment_id":133275487,"body_markdown":"@Alex thanks for the response. I was under the impression that i might need to use `zipWhen` operator. And im interested to know whether there is any possibility of blocking the stream with this current implementation?","body":"@Alex thanks for the response. I was under the impression that i might need to use <code>zipWhen</code> operator. And im interested to know whether there is any possibility of blocking the stream with this current implementation?"},{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1677115681,"post_id":75529582,"comment_id":133276266,"body_markdown":"not sure why you would need `zipWhen` here. If you need sequential processing and use results of the previous step `flatMap` is a good way in most cases. Assuming all async calls (`connector4.getTrackingForParcel`, `connector2.getParcelBy`, ..) are non-blocking - you should be good","body":"not sure why you would need <code>zipWhen</code> here. If you need sequential processing and use results of the previous step <code>flatMap</code> is a good way in most cases. Assuming all async calls (<code>connector4.getTrackingForParcel</code>, <code>connector2.getParcelBy</code>, ..) are non-blocking - you should be good"}],"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677079472,"creation_date":1677052086,"question_id":75529582,"body_markdown":"I have a reactive stream that calls to multiple other REST APIs and then process data and returns a List of Mono as below:\r\n\r\n    public Mono&lt;List&lt;ParcelInfo&gt;&gt; parcelEventsForReference(String parcelId, Postcode postcode) {\r\n        return connector1.getParcelReference(parcelId) // 1. Mono&lt;ResolvedParcelIds&gt; (Web request 1)\r\n            .flatMapIterable(ResolvedParcelIds::getParcelIds) // 2. Flux&lt;ResolvedParcelId&gt;\r\n            .flatMap(id -&gt; parcelEventsFor(id) // 3. Mono&lt;ParcelInfo&gt; \r\n                .map(parcel -&gt; redactIfNecessary(parcel, id, postcode))) // 4. Flux&lt;ParcelInfo&gt;\r\n            .collectList() // 5. Mono&lt;List&lt;ParcelInfo&gt;&gt;\r\n                        .flatMapIterable(list -&gt; list) // 6. Flux&lt;ParcelInfo&gt;\r\n            .flatMap(this::getTrackingEvents)\r\n            .collectList()\r\n            .doOnError(throwable -&gt; log.error(EXTERNAL_SERVICE_ERROR, throwable.getMessage()));\r\n     }\r\n\r\n\tprivate Mono&lt;ParcelInfo&gt; parcelEventsFor(ResolvedParcelId id) {\r\n        return connector2.getParcelBy(id).zipWith(connector3.getAdditionalInstructions(uid)) // (Web request 2,3)\r\n                .map(tuple -&gt; combineParcelEvents(tuple.getT1(), tuple.getT2()));\r\n     }\r\n\r\n    private Mono&lt;ParcelInfo&gt; getTrackingEvents(ParcelInfo parcel) {\r\n        TrackingRequest request = mapToRequest(parcel);\r\n        return connector4.getTrackingForParcel(request) // (Web request 4)\r\n            .map(trackingResponse -&gt; addTracking(parcel, trackingResponse));\r\n    }\r\n\r\n    private ParcelInfo addTracking(ParcelInfo parcel, TrackingResponse trackingResponse) {\r\n        parcelProgress.setTracking(trackingResponse);\r\n        return parcel;\r\n     }\r\n\r\n    public class ParcelInfo { \r\n        private List&lt;ParcelBase&gt; parcel;\r\n\t    private TrackingResponse trackingResponse;\r\n\t    private String additionalInstructions;\r\n    }\r\n\r\n    public class ResolvedParcelIds {\r\n        private List&lt;ResolvedParcelId&gt; parcelIds;\r\n    }\r\n\r\nMy requirement is to execute the 4th web request using the 1,2,3 web request&#39;s processed response. \r\nIn this implementation I am able to get the desired output for success scenarion (if 1,2,3 requests return expected response), but I&#39;m not sure whether this is the optimum solution.\r\n\r\nMy doubts are :\r\n\r\n1. Should I use `zipWhen` operator to make sure 4th request only happens after 1,2,3 happens, if so how?\r\n2. How to stop 4th request being executed if 1,2,3 requests are not success with http 200? (in connector level I have handled the error scenarios using `doOnError`)\r\n","title":"How to make multiple sequential web requests that has dependencies to each other in Spring Webflux","body":"<p>I have a reactive stream that calls to multiple other REST APIs and then process data and returns a List of Mono as below:</p>\n<pre><code>public Mono&lt;List&lt;ParcelInfo&gt;&gt; parcelEventsForReference(String parcelId, Postcode postcode) {\n    return connector1.getParcelReference(parcelId) // 1. Mono&lt;ResolvedParcelIds&gt; (Web request 1)\n        .flatMapIterable(ResolvedParcelIds::getParcelIds) // 2. Flux&lt;ResolvedParcelId&gt;\n        .flatMap(id -&gt; parcelEventsFor(id) // 3. Mono&lt;ParcelInfo&gt; \n            .map(parcel -&gt; redactIfNecessary(parcel, id, postcode))) // 4. Flux&lt;ParcelInfo&gt;\n        .collectList() // 5. Mono&lt;List&lt;ParcelInfo&gt;&gt;\n                    .flatMapIterable(list -&gt; list) // 6. Flux&lt;ParcelInfo&gt;\n        .flatMap(this::getTrackingEvents)\n        .collectList()\n        .doOnError(throwable -&gt; log.error(EXTERNAL_SERVICE_ERROR, throwable.getMessage()));\n }\n\nprivate Mono&lt;ParcelInfo&gt; parcelEventsFor(ResolvedParcelId id) {\n    return connector2.getParcelBy(id).zipWith(connector3.getAdditionalInstructions(uid)) // (Web request 2,3)\n            .map(tuple -&gt; combineParcelEvents(tuple.getT1(), tuple.getT2()));\n }\n\nprivate Mono&lt;ParcelInfo&gt; getTrackingEvents(ParcelInfo parcel) {\n    TrackingRequest request = mapToRequest(parcel);\n    return connector4.getTrackingForParcel(request) // (Web request 4)\n        .map(trackingResponse -&gt; addTracking(parcel, trackingResponse));\n}\n\nprivate ParcelInfo addTracking(ParcelInfo parcel, TrackingResponse trackingResponse) {\n    parcelProgress.setTracking(trackingResponse);\n    return parcel;\n }\n\npublic class ParcelInfo { \n    private List&lt;ParcelBase&gt; parcel;\n    private TrackingResponse trackingResponse;\n    private String additionalInstructions;\n}\n\npublic class ResolvedParcelIds {\n    private List&lt;ResolvedParcelId&gt; parcelIds;\n}\n</code></pre>\n<p>My requirement is to execute the 4th web request using the 1,2,3 web request's processed response.\nIn this implementation I am able to get the desired output for success scenarion (if 1,2,3 requests return expected response), but I'm not sure whether this is the optimum solution.</p>\n<p>My doubts are :</p>\n<ol>\n<li>Should I use <code>zipWhen</code> operator to make sure 4th request only happens after 1,2,3 happens, if so how?</li>\n<li>How to stop 4th request being executed if 1,2,3 requests are not success with http 200? (in connector level I have handled the error scenarios using <code>doOnError</code>)</li>\n</ol>\n"},{"tags":["java","postgresql","spring-boot","jpa","stored-procedures"],"answers":[{"tags":[],"owner":{"account_id":1074837,"reputation":183,"user_id":1073214,"display_name":"user1073214"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677055787,"creation_date":1677055787,"answer_id":75530161,"question_id":75529603,"body_markdown":"Well I figured out solution\r\n\r\nIf SP performs a DML operation like (Insert,Update) add following annotations along with @Query;\r\n\r\n    @Transactional \r\n    @Modifying(clearAutomatically = true)\r\n    @Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\r\n    void priceActivator();","title":"Error while calling stored procedure in Postgres using Spring boot JPA","body":"<p>Well I figured out solution</p>\n<p>If SP performs a DML operation like (Insert,Update) add following annotations along with @Query;</p>\n<pre><code>@Transactional \n@Modifying(clearAutomatically = true)\n@Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\nvoid priceActivator();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27811565,"reputation":11,"user_id":21233858,"display_name":"bardia dorry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677056723,"creation_date":1677056723,"answer_id":75530346,"question_id":75529603,"body_markdown":"you need to add  `@Transactional`\r\n    `@Modifying` tags above of the `@Query` because without them spring thinks you return resultset within your query.\r\n\r\n&gt;     @Transactional\r\n&gt;     @Modifying\r\n&gt;     @Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\r\n&gt;     void priceActivator();","title":"Error while calling stored procedure in Postgres using Spring boot JPA","body":"<p>you need to add  <code>@Transactional</code>\n<code>@Modifying</code> tags above of the <code>@Query</code> because without them spring thinks you return resultset within your query.</p>\n<blockquote>\n<pre><code>@Transactional\n@Modifying\n@Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\nvoid priceActivator();\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":1074837,"reputation":183,"user_id":1073214,"display_name":"user1073214"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75530161,"answer_count":2,"score":1,"last_activity_date":1677079439,"creation_date":1677052187,"question_id":75529603,"body_markdown":"I have created a stored procedure in Postgres\r\n\r\n``` \r\n\r\n    CREATE OR REPLACE PROCEDURE reset_disabled()  \r\n    LANGUAGE plpgsql  \r\n    AS $$\r\n    DECLARE\r\n    BEGIN  \r\n    UPDATE regional_price_info\r\n           SET disabled = NULL;\r\n    END;  \r\n    $$; \r\n\r\n ```\r\n\r\nI tried to call procedure from the repository class in two ways however both not worked\r\n\r\n1. Use @Query annotation \r\n\r\n    ```\r\n    @Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\r\n    void priceActivator();\r\n    ```\r\n    \r\n    I got error \r\n    \r\n    &gt; org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n\r\n2. I tried with @Procedure annotation\r\n\r\n    ```\r\n    @Procedure(value = &quot;reset_disabled&quot;)\r\n    void priceActivator2();\r\n    ```\r\n    I got error \r\n    \r\n    &gt; 2023-02-22T07:43:00,013 [scheduling-1] [INFO ] com.zageno.pricing.activator.PriceActivator priceActivatorByValidity [28] - Triggering price activator procedure\r\n    Hibernate: **{call reset_disabled()}**\r\n    2023-02-22T07:43:00,016 [scheduling-1] [WARN ] org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions [137] - SQL Error: 0, SQLState: 42809\r\n    2023-02-22T07:43:00,017 [scheduling-1] [ERROR] org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions [142] - ERROR: reset_disabled() is a procedure\r\n      **Hint: To call a procedure, use CALL.**\r\n      Position: 15\r\n    \r\n    In above error log  (highlighted in bold) , Hibernate query using &quot;CALL&quot; and error is suggesting use &quot;CALL&quot; this seems contradictory.\r\n\r\n\r\n","title":"Error while calling stored procedure in Postgres using Spring boot JPA","body":"<p>I have created a stored procedure in Postgres</p>\n<pre><code>\n    CREATE OR REPLACE PROCEDURE reset_disabled()  \n    LANGUAGE plpgsql  \n    AS $$\n    DECLARE\n    BEGIN  \n    UPDATE regional_price_info\n           SET disabled = NULL;\n    END;  \n    $$; \n\n</code></pre>\n<p>I tried to call procedure from the repository class in two ways however both not worked</p>\n<ol>\n<li><p>Use @Query annotation</p>\n<pre><code>@Query(value = &quot;CALL reset_disabled();&quot;, nativeQuery = true)\nvoid priceActivator();\n</code></pre>\n<p>I got error</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet</p>\n</blockquote>\n</li>\n<li><p>I tried with @Procedure annotation</p>\n<pre><code>@Procedure(value = &quot;reset_disabled&quot;)\nvoid priceActivator2();\n</code></pre>\n<p>I got error</p>\n<blockquote>\n<p>2023-02-22T07:43:00,013 [scheduling-1] [INFO ] com.zageno.pricing.activator.PriceActivator priceActivatorByValidity [28] - Triggering price activator procedure\nHibernate: <strong>{call reset_disabled()}</strong>\n2023-02-22T07:43:00,016 [scheduling-1] [WARN ] org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions [137] - SQL Error: 0, SQLState: 42809\n2023-02-22T07:43:00,017 [scheduling-1] [ERROR] org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions [142] - ERROR: reset_disabled() is a procedure\n<strong>Hint: To call a procedure, use CALL.</strong>\nPosition: 15</p>\n</blockquote>\n<p>In above error log  (highlighted in bold) , Hibernate query using &quot;CALL&quot; and error is suggesting use &quot;CALL&quot; this seems contradictory.</p>\n</li>\n</ol>\n"},{"tags":["java","javafx","javafx-8"],"comments":[{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":2,"creation_date":1479989777,"post_id":40785827,"comment_id":68794845,"body_markdown":"Why do you want to access the `ComboBox`. There is probably a better way of doing this...","body":"Why do you want to access the <code>ComboBox</code>. There is probably a better way of doing this..."},{"owner":{"account_id":8740114,"reputation":179,"user_id":6537435,"accept_rate":88,"display_name":"YellowSub"},"score":0,"creation_date":1479991017,"post_id":40785827,"comment_id":68795683,"body_markdown":"updated the description","body":"updated the description"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1677080299,"post_id":40785827,"comment_id":133267499,"body_markdown":"an implementation-dependent (don&#39;t - the risk is that it stops working as the implementation can change without notice!) way to access the combo the fact that the combo is set as graphic of the cell. The brittle approach is to listen to the graphic property of the cell until it changes from null to the combo, remove that listener, grab the new value (== combo) and do with it whatever you want. The clean way is to write your own comboBoxXXCell, c&amp;p and modify (it&#39;s open source)","body":"an implementation-dependent (don&#39;t - the risk is that it stops working as the implementation can change without notice!) way to access the combo the fact that the combo is set as graphic of the cell. The brittle approach is to listen to the graphic property of the cell until it changes from null to the combo, remove that listener, grab the new value (== combo) and do with it whatever you want. The clean way is to write your own comboBoxXXCell, c&amp;p and modify (it&#39;s open source)"}],"answers":[{"tags":[],"owner":{"account_id":2835528,"reputation":1834,"user_id":2436221,"accept_rate":81,"display_name":"Jonatan Stenbacka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1480065917,"creation_date":1480064912,"answer_id":40801222,"question_id":40785827,"body_markdown":"To my knowledge there&#39;s no way to get the reference to the `ComboBox` of the `ComboBoxTableCell`. If that&#39;s true, it&#39;s not possible to add a listener to it.\r\n\r\nAn alternate approach would be to create your own custom cell containing a `ComboBox`. With this approach, you can manipulate the `ComboBox` in any way you&#39;d like.\r\n\r\n    import java.util.function.BiConsumer;\r\n    import java.util.function.Function;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.value.ObservableValue;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ComboBox;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class ComboBoxTable extends Application {\r\n    \t@Override\r\n    \tpublic void start(Stage stage) {\r\n    \t\tint numOfCols = 2;\r\n    \r\n    \t\tObservableList&lt;ObservableList&lt;String&gt;&gt; tableData = FXCollections.observableArrayList();\r\n    \r\n    \t\t// Generate dummy data.\r\n    \t\tfor (int i = 0; i &lt; 10; i++) {\r\n    \t\t\tObservableList&lt;String&gt; row = FXCollections.observableArrayList();\r\n    \r\n    \t\t\tfor (int j = 0; j &lt; numOfCols; j++)\r\n    \t\t\t\trow.add(&quot;Row&quot; + i + &quot;Col&quot; + j);\r\n    \r\n    \t\t\ttableData.add(row);\r\n    \t\t}\r\n    \r\n    \t\tTableView&lt;ObservableList&lt;String&gt;&gt; table = new TableView&lt;ObservableList&lt;String&gt;&gt;();\r\n    \r\n    \t\t// Add columns to the table.\r\n    \t\tfor (int i = 0; i &lt; numOfCols; i++) {\r\n    \t\t\tfinal int j = i;\r\n    \t\t\t// The fourth argument in the method, the BiConsumer, might require\r\n    \t\t\t// an explanation. Basically we are saying that when the BiConsumer\r\n    \t\t\t// are given an ObservableList&lt;String&gt; and a String, we set the\r\n    \t\t\t// value of the String as the value of the element at position &quot;j&quot;\r\n    \t\t\t// of the row, where &quot;j&quot; will be the column index.\r\n    \t\t\ttable.getColumns().add(addComboBoxColumn(i, &quot;Column &quot; + i, row -&gt; new SimpleStringProperty(row.get(j)),\r\n    \t\t\t\t\t(row, newText) -&gt; row.set(j, newText)));\r\n    \t\t}\r\n    \r\n    \t\ttable.getItems().addAll(tableData);\r\n    \r\n    \t\tScene scene = new Scene(table);\r\n    \r\n    \t\tstage.setScene(scene);\r\n    \t\tstage.show();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Returns a TableColumn with ComboBoxCells.\r\n    \t */\r\n    \tprivate TableColumn&lt;ObservableList&lt;String&gt;, String&gt; addComboBoxColumn(int index, String name,\r\n    \t\t\tFunction&lt;ObservableList&lt;String&gt;, ObservableValue&lt;String&gt;&gt; property,\r\n    \t\t\tBiConsumer&lt;ObservableList&lt;String&gt;, String&gt; updater) {\r\n    \r\n    \t\tTableColumn&lt;ObservableList&lt;String&gt;, String&gt; col = new TableColumn&lt;ObservableList&lt;String&gt;, String&gt;(name);\r\n    \r\n    \t\tcol.setCellValueFactory(cellData -&gt; property.apply(cellData.getValue()));\r\n    \r\n    \t\tcol.setCellFactory(e -&gt; new ComboBoxCell(updater, index));\r\n    \r\n    \t\treturn col;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * A TableCell with a ComboBox in it.\r\n    \t */\r\n    \tpublic class ComboBoxCell extends TableCell&lt;ObservableList&lt;String&gt;, String&gt; {\r\n    \t\tprivate ComboBox&lt;String&gt; comboBox = new ComboBox&lt;String&gt;();\r\n    \r\n    \t\t/**\r\n    \t\t * @param updater\r\n    \t\t *            The updater makes sure that the cell value corresponds\r\n    \t\t *            with the value in the ComboBox.\r\n    \t\t * @param colIndex\r\n    \t\t *            The index of this column.\r\n    \t\t */\r\n    \t\tpublic ComboBoxCell(BiConsumer&lt;ObservableList&lt;String&gt;, String&gt; updater, int colIndex) {\r\n    \t\t\tcomboBox.setEditable(true);\r\n    \r\n    \t\t\tcomboBox.getEditor().textProperty().addListener((old, oldValue, newValue) -&gt; {\r\n    \t\t\t\tif (getIndex() &gt;= 0) {\r\n    \t\t\t\t\t// We provide the BiConsumer.accept() with an\r\n    \t\t\t\t\t// ObservableList&lt;String&gt; and a String. The BiConsumer will\r\n    \t\t\t\t\t// do the operation specified in the definition we provided\r\n    \t\t\t\t\t// in addColumn() using these two objects.\r\n    \t\t\t\t\tupdater.accept(getTableView().getItems().get(getIndex()), (String) newValue);\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void updateItem(String item, boolean empty) {\r\n    \t\t\tsuper.updateItem(item, empty);\r\n    \t\t\tif (empty) {\r\n    \t\t\t\tsetGraphic(null);\r\n    \t\t\t} else {\r\n    \t\t\t\t// If we don&#39;t check if this value is the same as the old one,\r\n    \t\t\t\t// the cursor is moved to the beginning of the editor every time\r\n    \t\t\t\t// anything is typed.\r\n    \t\t\t\tif (!item.equals(comboBox.getEditor().getText())) {\r\n    \t\t\t\t\tcomboBox.getEditor().setText(item);\r\n    \t\t\t\t}\r\n    \t\t\t\tsetGraphic(comboBox);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch();\r\n    \t}\r\n    }\r\n\r\n","title":"JavaFX: get ComboBox of ComboBoxTableCell","body":"<p>To my knowledge there's no way to get the reference to the <code>ComboBox</code> of the <code>ComboBoxTableCell</code>. If that's true, it's not possible to add a listener to it.</p>\n\n<p>An alternate approach would be to create your own custom cell containing a <code>ComboBox</code>. With this approach, you can manipulate the <code>ComboBox</code> in any way you'd like.</p>\n\n<pre><code>import java.util.function.BiConsumer;\nimport java.util.function.Function;\n\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.value.ObservableValue;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.stage.Stage;\n\npublic class ComboBoxTable extends Application {\n    @Override\n    public void start(Stage stage) {\n        int numOfCols = 2;\n\n        ObservableList&lt;ObservableList&lt;String&gt;&gt; tableData = FXCollections.observableArrayList();\n\n        // Generate dummy data.\n        for (int i = 0; i &lt; 10; i++) {\n            ObservableList&lt;String&gt; row = FXCollections.observableArrayList();\n\n            for (int j = 0; j &lt; numOfCols; j++)\n                row.add(\"Row\" + i + \"Col\" + j);\n\n            tableData.add(row);\n        }\n\n        TableView&lt;ObservableList&lt;String&gt;&gt; table = new TableView&lt;ObservableList&lt;String&gt;&gt;();\n\n        // Add columns to the table.\n        for (int i = 0; i &lt; numOfCols; i++) {\n            final int j = i;\n            // The fourth argument in the method, the BiConsumer, might require\n            // an explanation. Basically we are saying that when the BiConsumer\n            // are given an ObservableList&lt;String&gt; and a String, we set the\n            // value of the String as the value of the element at position \"j\"\n            // of the row, where \"j\" will be the column index.\n            table.getColumns().add(addComboBoxColumn(i, \"Column \" + i, row -&gt; new SimpleStringProperty(row.get(j)),\n                    (row, newText) -&gt; row.set(j, newText)));\n        }\n\n        table.getItems().addAll(tableData);\n\n        Scene scene = new Scene(table);\n\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    /**\n     * Returns a TableColumn with ComboBoxCells.\n     */\n    private TableColumn&lt;ObservableList&lt;String&gt;, String&gt; addComboBoxColumn(int index, String name,\n            Function&lt;ObservableList&lt;String&gt;, ObservableValue&lt;String&gt;&gt; property,\n            BiConsumer&lt;ObservableList&lt;String&gt;, String&gt; updater) {\n\n        TableColumn&lt;ObservableList&lt;String&gt;, String&gt; col = new TableColumn&lt;ObservableList&lt;String&gt;, String&gt;(name);\n\n        col.setCellValueFactory(cellData -&gt; property.apply(cellData.getValue()));\n\n        col.setCellFactory(e -&gt; new ComboBoxCell(updater, index));\n\n        return col;\n    }\n\n    /**\n     * A TableCell with a ComboBox in it.\n     */\n    public class ComboBoxCell extends TableCell&lt;ObservableList&lt;String&gt;, String&gt; {\n        private ComboBox&lt;String&gt; comboBox = new ComboBox&lt;String&gt;();\n\n        /**\n         * @param updater\n         *            The updater makes sure that the cell value corresponds\n         *            with the value in the ComboBox.\n         * @param colIndex\n         *            The index of this column.\n         */\n        public ComboBoxCell(BiConsumer&lt;ObservableList&lt;String&gt;, String&gt; updater, int colIndex) {\n            comboBox.setEditable(true);\n\n            comboBox.getEditor().textProperty().addListener((old, oldValue, newValue) -&gt; {\n                if (getIndex() &gt;= 0) {\n                    // We provide the BiConsumer.accept() with an\n                    // ObservableList&lt;String&gt; and a String. The BiConsumer will\n                    // do the operation specified in the definition we provided\n                    // in addColumn() using these two objects.\n                    updater.accept(getTableView().getItems().get(getIndex()), (String) newValue);\n                }\n            });\n        }\n\n        @Override\n        protected void updateItem(String item, boolean empty) {\n            super.updateItem(item, empty);\n            if (empty) {\n                setGraphic(null);\n            } else {\n                // If we don't check if this value is the same as the old one,\n                // the cursor is moved to the beginning of the editor every time\n                // anything is typed.\n                if (!item.equals(comboBox.getEditor().getText())) {\n                    comboBox.getEditor().setText(item);\n                }\n                setGraphic(comboBox);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22704898,"reputation":1,"user_id":16871777,"display_name":"Raem92"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677078975,"creation_date":1677078975,"answer_id":75534731,"question_id":40785827,"body_markdown":"an other possible solution is to add a StringConverter&lt;&gt;() to your ComboBoxTableCell&lt;R, T&gt;() for correct String display of an object and add a changeListener to your ObjectProperty&lt;Item&gt;\r\n\r\n    TableView&lt;ParentObject&gt; table = new TableView&lt;&gt;();\r\n\r\n    table.setEditable(true);\r\n\r\n    TableColumn&lt;ParentObject, Item&gt; col = new TableColumn&lt;&gt;(&quot;name&quot;);\r\n           \r\n    col.setEditable(true);\r\n\r\n    col.setCellValueFactory(cellData -&gt; {\r\n\r\n        ObjectProperty prop = new SimpleObjectProperty&lt;Item&gt;(cellData.getValue().getItem());\r\n\r\n        prop.addListener((observable, oldVal, newVal) -&gt; {\r\n            //do something for example set the Object in getValue()\r\n            cellData.getValue().setItem(newVal);\r\n        });\r\n\r\n        return prop;\r\n\r\n    });\r\n    final StringConverter&lt;Item&gt; converter = new StringConverter&lt;&gt;() {\r\n\r\n        @Override\r\n        public Item fromString(final String string) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public String toString(final Item object) {\r\n            return object.getLabel();\r\n        }\r\n    };\r\n\r\n    // get your list of possible Objects to swap\r\n    List&lt;Item&gt; itemList = Database.getAllItems();\r\n \r\n    col.setCellFactory(c -&gt; new ComboBoxTableCell(converter, FXCollections.observableArrayList(itemList)));\r\n\r\n    table.getColumns().add(col);\r\n\r\nThe Object SimpleObjectProperty&lt;&gt; can be replaced with other javafx.beans.properties for Example StringProperty, IntegerProperty, BooleanProperty or ListProperty\r\n\r\nI&#39;m aware that this isn&#39;t the 100% matching answer to the question but this helped me in my issue searching for the right answer to the problem","title":"JavaFX: get ComboBox of ComboBoxTableCell","body":"<p>an other possible solution is to add a StringConverter&lt;&gt;() to your ComboBoxTableCell&lt;R, T&gt;() for correct String display of an object and add a changeListener to your ObjectProperty</p>\n<pre><code>TableView&lt;ParentObject&gt; table = new TableView&lt;&gt;();\n\ntable.setEditable(true);\n\nTableColumn&lt;ParentObject, Item&gt; col = new TableColumn&lt;&gt;(&quot;name&quot;);\n       \ncol.setEditable(true);\n\ncol.setCellValueFactory(cellData -&gt; {\n\n    ObjectProperty prop = new SimpleObjectProperty&lt;Item&gt;(cellData.getValue().getItem());\n\n    prop.addListener((observable, oldVal, newVal) -&gt; {\n        //do something for example set the Object in getValue()\n        cellData.getValue().setItem(newVal);\n    });\n\n    return prop;\n\n});\nfinal StringConverter&lt;Item&gt; converter = new StringConverter&lt;&gt;() {\n\n    @Override\n    public Item fromString(final String string) {\n        return null;\n    }\n\n    @Override\n    public String toString(final Item object) {\n        return object.getLabel();\n    }\n};\n\n// get your list of possible Objects to swap\nList&lt;Item&gt; itemList = Database.getAllItems();\n\ncol.setCellFactory(c -&gt; new ComboBoxTableCell(converter, FXCollections.observableArrayList(itemList)));\n\ntable.getColumns().add(col);\n</code></pre>\n<p>The Object SimpleObjectProperty&lt;&gt; can be replaced with other javafx.beans.properties for Example StringProperty, IntegerProperty, BooleanProperty or ListProperty</p>\n<p>I'm aware that this isn't the 100% matching answer to the question but this helped me in my issue searching for the right answer to the problem</p>\n"}],"owner":{"account_id":8740114,"reputation":179,"user_id":6537435,"accept_rate":88,"display_name":"YellowSub"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":864,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677078975,"creation_date":1479988672,"question_id":40785827,"body_markdown":"I would like to add a handler to the `ComboBox` inside a `ComboBoxTableCell` in a `TableView` in JavaFX8. I can see that there is a private `ComboBox` value in the `ComboBoxTableCell` class, yet I have no idea how to access it. I tell the column to use a `ComboBoxTableCell` via the `setCellFactory` method. Is there any way to get the `ComboBox`?\r\n\r\nEDIT: I want to add a listener to the `ComboBox` which enables choosing items by entering keys. I already have one for a normal `ComboBox`and I would like to reuse the same for the `ComboBox` in the `TableCell`.   ","title":"JavaFX: get ComboBox of ComboBoxTableCell","body":"<p>I would like to add a handler to the <code>ComboBox</code> inside a <code>ComboBoxTableCell</code> in a <code>TableView</code> in JavaFX8. I can see that there is a private <code>ComboBox</code> value in the <code>ComboBoxTableCell</code> class, yet I have no idea how to access it. I tell the column to use a <code>ComboBoxTableCell</code> via the <code>setCellFactory</code> method. Is there any way to get the <code>ComboBox</code>?</p>\n\n<p>EDIT: I want to add a listener to the <code>ComboBox</code> which enables choosing items by entering keys. I already have one for a normal <code>ComboBox</code>and I would like to reuse the same for the <code>ComboBox</code> in the <code>TableCell</code>.   </p>\n"},{"tags":["java","excel","eclipse","gradle","try-catch"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1677075370,"post_id":75533924,"comment_id":133265703,"body_markdown":"Something that you use seems to require Apache Commons IO and it&#39;s not on your classpath. Usually the best way to handle dependencies like this is to use a build system that handles (downloads, ...) dependencies for you, such as Gradle or Maven.","body":"Something that you use seems to require Apache Commons IO and it&#39;s not on your classpath. Usually the best way to handle dependencies like this is to use a build system that handles (downloads, ...) dependencies for you, such as Gradle or Maven."},{"owner":{"account_id":27851426,"reputation":1,"user_id":21265860,"display_name":"StackStark"},"score":0,"creation_date":1677075559,"post_id":75533924,"comment_id":133265776,"body_markdown":"Hi Joachim Sauer, thank you for your quick response!\nwhen ever i add something like:\nimport org.apache.common.*\nit will just remove it (autoformatting i think) (Eclipse)","body":"Hi Joachim Sauer, thank you for your quick response! when ever i add something like: import org.apache.common.* it will just remove it (autoformatting i think) (Eclipse)"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677076702,"post_id":75533924,"comment_id":133266200,"body_markdown":"The problem is not lack of `import` statements in your Java source (you only need those when you *directly* reference a class in your source code). The problem is that a library (a .jar file) is missing on your classpath. The video seems to pick a couple of relevant libraries wihout explaining why those ones specifically and you are using a different POI version. The missing jar file is probably somewhere in the `lib/` folder of the POI distribution you downloaded. Just add that as a dependency just like the others (and think about starting to use something like Gradle in the long run).","body":"The problem is not lack of <code>import</code> statements in your Java source (you only need those when you <i>directly</i> reference a class in your source code). The problem is that a library (a .jar file) is missing on your classpath. The video seems to pick a couple of relevant libraries wihout explaining why those ones specifically and you are using a different POI version. The missing jar file is probably somewhere in the <code>lib&#47;</code> folder of the POI distribution you downloaded. Just add that as a dependency just like the others (and think about starting to use something like Gradle in the long run)."}],"owner":{"account_id":27851426,"reputation":1,"user_id":21265860,"display_name":"StackStark"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":333,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677078726,"creation_date":1677075155,"question_id":75533924,"body_markdown":"This is the program i tried to write and execute myself with the help of this youtube video:\r\nhttps://www.youtube.com/watch?v=Mrtw7NvMQvw&amp;ab_channel=fun2learn\r\n\r\nEclipse; jdk-19; Referenced Libraries:\r\n\r\ncommons-collection4-4.4.jar\r\ncommons-collections4-4.4-javadoc.jar\r\ncommons-collections4-4.4-sources.jar\r\ncommons-compress-1.22.jar\r\npoi-5.2.3.jar\r\npoi-ooxml-5.2.3.jar\r\npoi-ooxml-full-5.2.3.jar\r\nxmlbeans-5.1.1.jar\r\n\r\nalso tried the poi 5.2.2 (because i read about that some of it didnt work in 5.2.3 connected with Excel)\r\n\r\n\r\nCODE:\r\n\r\n```\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\n\r\nimport javax.print.DocFlavor.READER;\r\nimport javax.swing.JFileChooser;\r\nimport javax.swing.filechooser.FileFilter;\r\nimport javax.swing.filechooser.FileNameExtensionFilter;\r\n\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class MainExcel {\r\n\r\n\t\r\n\r\n    public static void main(String[] args) {\r\n    \r\n\t    \t\r\n\r\n// Variable to store data from excel file\r\n\t    \tArrayList&lt;Integer&gt; serial = new ArrayList&lt;&gt;();\r\n\t    \tArrayList&lt;String&gt; name = new ArrayList&lt;&gt;();\r\n\t    \tArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n\t    \tArrayList&lt;String&gt; headers = new ArrayList&lt;&gt;();\r\n    \r\n\t    \t// Opening the excel file using pop-up window\r\n\t    \tJFileChooser openFilechooser = new JFileChooser();\r\n\t    \topenFilechooser.setDialogTitle(&quot;Open File&quot;);\r\n\t    \topenFilechooser.removeChoosableFileFilter(openFilechooser.getFileFilter());\r\n\t    \tFileFilter filter = new FileNameExtensionFilter(&quot;Excel File (.xlsx)&quot;, &quot;xlsx&quot;);\r\n\t    \topenFilechooser.setFileFilter(filter);\r\n    \r\n\t    \tif (openFilechooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {\r\n    \r\n\t    \t\tFile inputFile = openFilechooser.getSelectedFile();\r\n\t    \t\ttry (FileInputStream in = new FileInputStream(inputFile)) {\r\n    \r\n\r\n\r\n    /* i think this is the row with my problem, yet i dont know how to fix it */\t\t\t\t    XSSFWorkbook importedfile = new XSSFWorkbook(in);\r\n\t    \t\t\tXSSFSheet sheet1 = importedfile.getSheetAt(0);\r\n    \r\n\t    \t\t\tIterator&lt;Row&gt; rowIterator = sheet1.iterator();\r\n\t    \t\t\twhile (rowIterator.hasNext()) {\r\n    \r\n\t    \t\t\t\tRow row = rowIterator.next();\r\n\t    \t\t\t\tIterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n\t    \t\t\t\twhile (cellIterator.hasNext()) {\r\n    \r\n\t    \t\t\t\t\tCell cell = cellIterator.next();\r\n\t    \t\t\t\t\tif (row.getRowNum() == 0) {\r\n    \r\n\t    \t\t\t\t\t\theaders.add(cell.getStringCellValue());\r\n\t    \t\t\t\t\t} else {\r\n    \r\n\t    \t\t\t\t\t\tif (cell.getColumnIndex() == 0) {\r\n    \r\n    \t\t\t\t\t\t\t\tserial.add((int) cell.getNumericCellValue());\r\n\t    \t\t\t\t\t\t} else if (cell.getColumnIndex() == 1) {\r\n    \r\n\t    \t\t\t\t\t\t\tname.add(cell.getStringCellValue());\r\n\t    \t\t\t\t\t\t} else if (cell.getColumnIndex() == 2) {\r\n    \r\n    \t\t\t\t\t\t\t\tresult.add(cell.getStringCellValue());\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\timportedfile.close();\r\n    \t\t\t\t\tin.close();\r\n    \t\t\t\t\tSystem.out.println(&quot;Excel File is read succesffully!&quot;);\r\n    \t\t\t\t\tSystem.out.println(&quot;\\n\\n&quot;);\r\n    \t\t\t\t\tSystem.out.println(&quot;List of serial no. is: &quot; + serial);\r\n    \t\t\t\t\tSystem.out.println();\r\n    \t\t\t\t\tSystem.out.println(&quot;List fo students name is: &quot; + name);\r\n    \t\t\t\t\tSystem.out.println();\r\n    \t\t\t\t\tSystem.out.println(&quot;List of students results is: &quot; + result);\r\n    \t\t\t\t\tSystem.out.println();\r\n    \t\t\t\t}\r\n    \t\t\t} catch (IOException ex) {\r\n\t\t\t\tLogger.getLogger(READER.class.getName()).log(Level.SEVERE, null, ex);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n```\r\n\r\n\r\nConsole output:\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/io/output/UnsynchronizedByteArrayOutputStream\r\n\tat MainExcel.main(MainExcel.java:52)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\t... 1 more\r\n\r\n```\r\n\r\nBascially this program is there to simply test reading a Excel\r\n\r\n    XSSFWorkbook importedfile = new XSSFWorkbook(in);\r\n\r\nim not sure what this row requires of me, it wanted catch etc and i tried many different variations to put a catch etc. yet sadly none of those worked :(\r\n\r\n\r\nchanges:\r\nadded Gradle (still no idea how that works)\r\nLogger.getLogger(ReadExcel.class.getName()).log(Level.SEVERE, null, ex); -&gt; Logger.getLogger(READER.class.getName()).log(Level.SEVERE, null, ex);\r\nits suppose to be &quot;ReadExcel&quot; but that way i cant make the program run at all!","title":"Reading Excel sheet with Java in Eclipse","body":"<p>This is the program i tried to write and execute myself with the help of this youtube video:\n<a href=\"https://www.youtube.com/watch?v=Mrtw7NvMQvw&amp;ab_channel=fun2learn\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=Mrtw7NvMQvw&amp;ab_channel=fun2learn</a></p>\n<p>Eclipse; jdk-19; Referenced Libraries:</p>\n<p>commons-collection4-4.4.jar\ncommons-collections4-4.4-javadoc.jar\ncommons-collections4-4.4-sources.jar\ncommons-compress-1.22.jar\npoi-5.2.3.jar\npoi-ooxml-5.2.3.jar\npoi-ooxml-full-5.2.3.jar\nxmlbeans-5.1.1.jar</p>\n<p>also tried the poi 5.2.2 (because i read about that some of it didnt work in 5.2.3 connected with Excel)</p>\n<p>CODE:</p>\n<pre><code>\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport javax.print.DocFlavor.READER;\nimport javax.swing.JFileChooser;\nimport javax.swing.filechooser.FileFilter;\nimport javax.swing.filechooser.FileNameExtensionFilter;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class MainExcel {\n\n    \n\n    public static void main(String[] args) {\n    \n            \n\n// Variable to store data from excel file\n            ArrayList&lt;Integer&gt; serial = new ArrayList&lt;&gt;();\n            ArrayList&lt;String&gt; name = new ArrayList&lt;&gt;();\n            ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\n            ArrayList&lt;String&gt; headers = new ArrayList&lt;&gt;();\n    \n            // Opening the excel file using pop-up window\n            JFileChooser openFilechooser = new JFileChooser();\n            openFilechooser.setDialogTitle(&quot;Open File&quot;);\n            openFilechooser.removeChoosableFileFilter(openFilechooser.getFileFilter());\n            FileFilter filter = new FileNameExtensionFilter(&quot;Excel File (.xlsx)&quot;, &quot;xlsx&quot;);\n            openFilechooser.setFileFilter(filter);\n    \n            if (openFilechooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {\n    \n                File inputFile = openFilechooser.getSelectedFile();\n                try (FileInputStream in = new FileInputStream(inputFile)) {\n    \n\n\n    /* i think this is the row with my problem, yet i dont know how to fix it */                    XSSFWorkbook importedfile = new XSSFWorkbook(in);\n                    XSSFSheet sheet1 = importedfile.getSheetAt(0);\n    \n                    Iterator&lt;Row&gt; rowIterator = sheet1.iterator();\n                    while (rowIterator.hasNext()) {\n    \n                        Row row = rowIterator.next();\n                        Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n                        while (cellIterator.hasNext()) {\n    \n                            Cell cell = cellIterator.next();\n                            if (row.getRowNum() == 0) {\n    \n                                headers.add(cell.getStringCellValue());\n                            } else {\n    \n                                if (cell.getColumnIndex() == 0) {\n    \n                                    serial.add((int) cell.getNumericCellValue());\n                                } else if (cell.getColumnIndex() == 1) {\n    \n                                    name.add(cell.getStringCellValue());\n                                } else if (cell.getColumnIndex() == 2) {\n    \n                                    result.add(cell.getStringCellValue());\n                                }\n                            }\n                        }\n                        importedfile.close();\n                        in.close();\n                        System.out.println(&quot;Excel File is read succesffully!&quot;);\n                        System.out.println(&quot;\\n\\n&quot;);\n                        System.out.println(&quot;List of serial no. is: &quot; + serial);\n                        System.out.println();\n                        System.out.println(&quot;List fo students name is: &quot; + name);\n                        System.out.println();\n                        System.out.println(&quot;List of students results is: &quot; + result);\n                        System.out.println();\n                    }\n                } catch (IOException ex) {\n                Logger.getLogger(READER.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n    }\n\n\n</code></pre>\n<p>Console output:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/io/output/UnsynchronizedByteArrayOutputStream\n    at MainExcel.main(MainExcel.java:52)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 1 more\n\n</code></pre>\n<p>Bascially this program is there to simply test reading a Excel</p>\n<pre><code>XSSFWorkbook importedfile = new XSSFWorkbook(in);\n</code></pre>\n<p>im not sure what this row requires of me, it wanted catch etc and i tried many different variations to put a catch etc. yet sadly none of those worked :(</p>\n<p>changes:\nadded Gradle (still no idea how that works)\nLogger.getLogger(ReadExcel.class.getName()).log(Level.SEVERE, null, ex); -&gt; Logger.getLogger(READER.class.getName()).log(Level.SEVERE, null, ex);\nits suppose to be &quot;ReadExcel&quot; but that way i cant make the program run at all!</p>\n"},{"tags":["java","junit","annotations","automated-tests","testng"],"answers":[{"tags":[],"owner":{"account_id":3714692,"reputation":2288,"user_id":3091196,"display_name":"debugger89"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676856196,"creation_date":1676856196,"answer_id":75504511,"question_id":75488585,"body_markdown":"Yes there is. You can use the @BeforeTest or the top level @BeforeSuite annotations to use as a &quot;BeforeAll&quot; alternative. Both of the will run before the test class constructors. \r\nFollowing is the TestNG annotation execution order so you get the idea. \r\n\r\n[![TestNG hierarchy][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sslbq.png","title":"Is there a TestNG annotation that start running before the class constructor just like JUnit @BeforeAll does?","body":"<p>Yes there is. You can use the @BeforeTest or the top level @BeforeSuite annotations to use as a &quot;BeforeAll&quot; alternative. Both of the will run before the test class constructors.\nFollowing is the TestNG annotation execution order so you get the idea.</p>\n<p><a href=\"https://i.stack.imgur.com/sslbq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sslbq.png\" alt=\"TestNG hierarchy\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6276927,"reputation":441,"user_id":4879343,"display_name":"Luiz Gustavo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677078485,"creation_date":1677077178,"answer_id":75534354,"question_id":75488585,"body_markdown":"Since I couldn&#39;t find a The TestNG annotation (@BeforeClass won&#39;t work) that works just like JUnit @BeforeAll (that executes even before the class constructor).\r\n\r\nThe best workaround I could find is to setup my code inside the class constructor itself, that&#39;s it.\r\n\r\nPS: Maybe this is happening because TestNG tests can&#39;t be static while JUnit can.","title":"Is there a TestNG annotation that start running before the class constructor just like JUnit @BeforeAll does?","body":"<p>Since I couldn't find a The TestNG annotation (@BeforeClass won't work) that works just like JUnit @BeforeAll (that executes even before the class constructor).</p>\n<p>The best workaround I could find is to setup my code inside the class constructor itself, that's it.</p>\n<p>PS: Maybe this is happening because TestNG tests can't be static while JUnit can.</p>\n"}],"owner":{"account_id":6276927,"reputation":441,"user_id":4879343,"display_name":"Luiz Gustavo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677078485,"creation_date":1676662621,"question_id":75488585,"body_markdown":"The JUnit @BeforeAll tests are executed before the constructor and the declared class variables (as they should).\r\n\r\nThe TestNG @BeforeClass calls first the class constructor and classes variables before it runs itself.\r\n\r\nIs there a TestNG annotation that starts to run BEFORE the class constructor is called,\r\njust like JUnit @BeforeAll does?\r\n\r\n\r\nI run a test with both TestNG @BeforeClass and JUnit @BeforeAll and they both give different responses.\r\n\r\nJUnit example:\r\n```\r\npackage Junit;\r\n\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.Test;\r\nimport pages.MyClass;\r\n\r\npublic class TestJunit {\r\n\r\n    @BeforeAll\r\n    public static void setUp(){\r\n        System.out.println(&quot;1 - @BeforeAll Junit&quot;);\r\n    }\r\n\r\n    private MyClass str = new MyClass();\r\n\r\n    public TestJunit() {\r\n        System.out.println(&quot;3 - Junit Class Constructor&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void test1(){\r\n        System.out.println(&quot;4 - Starting Junit Tests&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n- TestJunit - Junit Response:\r\n1. @BeforeAll Junit\r\n2. My Custom Class Constructor\r\n3. Junit Class Constructor\r\n4. Starting Junit Tests\r\n\r\n\r\nTestNG example:\r\n```\r\npackage TestNG;\r\n\r\nimport org.testng.annotations.BeforeClass;\r\nimport org.testng.annotations.Test;\r\nimport pages.MyClass;\r\n\r\npublic class TestTestNG {\r\n\r\n    @BeforeClass(alwaysRun = true)\r\n    public void setUp(){\r\n        System.out.println(&quot;1 - BeforeAll TestNG&quot;);\r\n    }\r\n\r\n    private MyClass str = new MyClass();\r\n\r\n    public TestTestNG() {\r\n        System.out.println(&quot;3 - TestNG Class Constructor&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void test1(){\r\n        System.out.println(&quot;4 - Starting TestNG Tests&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n- TestTestNG - TestNG Response:\r\n2. My Custom Class Constructor\r\n3. TestNG Class Constructor\r\n1. BeforeAll TestNG\r\n4. Starting TestNG Tests\r\n\r\n\r\nMy Custom Class:\r\n```\r\npackage pages;\r\n\r\npublic class MyClass {\r\n\r\n    public MyClass() {\r\n        System.out.println(&quot;2 - My Custom Class Constructor&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nI want a TestNG solution (because @BeforeClass is not working) that will give the same response as the JUnit (@BeforeAll) solution.\r\n\r\nIs there a TestNG annotation that starts to run BEFORE the class constructor is called,\r\njust like JUnit @BeforeAll does?\r\n\r\n","title":"Is there a TestNG annotation that start running before the class constructor just like JUnit @BeforeAll does?","body":"<p>The JUnit @BeforeAll tests are executed before the constructor and the declared class variables (as they should).</p>\n<p>The TestNG @BeforeClass calls first the class constructor and classes variables before it runs itself.</p>\n<p>Is there a TestNG annotation that starts to run BEFORE the class constructor is called,\njust like JUnit @BeforeAll does?</p>\n<p>I run a test with both TestNG @BeforeClass and JUnit @BeforeAll and they both give different responses.</p>\n<p>JUnit example:</p>\n<pre><code>package Junit;\n\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Test;\nimport pages.MyClass;\n\npublic class TestJunit {\n\n    @BeforeAll\n    public static void setUp(){\n        System.out.println(&quot;1 - @BeforeAll Junit&quot;);\n    }\n\n    private MyClass str = new MyClass();\n\n    public TestJunit() {\n        System.out.println(&quot;3 - Junit Class Constructor&quot;);\n    }\n\n    @Test\n    public void test1(){\n        System.out.println(&quot;4 - Starting Junit Tests&quot;);\n    }\n\n}\n\n</code></pre>\n<ul>\n<li>TestJunit - Junit Response:</li>\n</ul>\n<ol>\n<li>@BeforeAll Junit</li>\n<li>My Custom Class Constructor</li>\n<li>Junit Class Constructor</li>\n<li>Starting Junit Tests</li>\n</ol>\n<p>TestNG example:</p>\n<pre><code>package TestNG;\n\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.Test;\nimport pages.MyClass;\n\npublic class TestTestNG {\n\n    @BeforeClass(alwaysRun = true)\n    public void setUp(){\n        System.out.println(&quot;1 - BeforeAll TestNG&quot;);\n    }\n\n    private MyClass str = new MyClass();\n\n    public TestTestNG() {\n        System.out.println(&quot;3 - TestNG Class Constructor&quot;);\n    }\n\n    @Test\n    public void test1(){\n        System.out.println(&quot;4 - Starting TestNG Tests&quot;);\n    }\n\n}\n\n</code></pre>\n<ul>\n<li>TestTestNG - TestNG Response:</li>\n</ul>\n<ol start=\"2\">\n<li>My Custom Class Constructor</li>\n<li>TestNG Class Constructor</li>\n<li>BeforeAll TestNG</li>\n<li>Starting TestNG Tests</li>\n</ol>\n<p>My Custom Class:</p>\n<pre><code>package pages;\n\npublic class MyClass {\n\n    public MyClass() {\n        System.out.println(&quot;2 - My Custom Class Constructor&quot;);\n    }\n}\n\n</code></pre>\n<p>I want a TestNG solution (because @BeforeClass is not working) that will give the same response as the JUnit (@BeforeAll) solution.</p>\n<p>Is there a TestNG annotation that starts to run BEFORE the class constructor is called,\njust like JUnit @BeforeAll does?</p>\n"},{"tags":["java","tree","binary-tree","dna-sequence","tree-search"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677082382,"post_id":75534595,"comment_id":133268227,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":23757737,"reputation":1,"user_id":17773617,"display_name":"KingT Channel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677078309,"creation_date":1677078309,"question_id":75534595,"body_markdown":"###  **I try to insert AA. And then search AA$ to find exactly node &quot;AA&quot;. But the result, I receive is &quot;No sequence found&quot;. I need your support to help me find the solution for that problem. Thank you very much.**","title":"Search function in DNATree","body":"<h3><strong>I try to insert AA. And then search AA$ to find exactly node &quot;AA&quot;. But the result, I receive is &quot;No sequence found&quot;. I need your support to help me find the solution for that problem. Thank you very much.</strong></h3>\n"},{"tags":["java","windows","automation","winappdriver"],"owner":{"account_id":2369991,"reputation":520,"user_id":2074804,"accept_rate":46,"display_name":"SKN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677078201,"creation_date":1677078201,"question_id":75534570,"body_markdown":"I have a Windows desktop app that I need to launch as different user during which a username and password fields are displayed on UI and I need to enter user credentials.\r\n\r\nI tried following:\r\n\r\n    DesiredCapabilities appCapabilities = new DesiredCapabilities();\r\n    appCapabilities.SetCapability(&quot;app&quot;, &quot;C:\\\\App.exe&quot;);\r\n    appCapabilities.SetCapability(&quot;appArguments&quot;, &quot;/username:&lt;username&gt; /password:&lt;password&gt;&quot;);\r\n    WindowsDriver&lt;WindowsElement&gt; windowsDriver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), appCapabilities);\r\n\r\nBut no luck. The arguments specified in &quot;appArguments&quot; key is not passed to the application\r\nCan anyone suggest how do we achieve this in WinAppDriver? ","title":"How to &quot;run as different user&quot; in Winappdriver to lauch a desktop app?","body":"<p>I have a Windows desktop app that I need to launch as different user during which a username and password fields are displayed on UI and I need to enter user credentials.</p>\n<p>I tried following:</p>\n<pre><code>DesiredCapabilities appCapabilities = new DesiredCapabilities();\nappCapabilities.SetCapability(&quot;app&quot;, &quot;C:\\\\App.exe&quot;);\nappCapabilities.SetCapability(&quot;appArguments&quot;, &quot;/username:&lt;username&gt; /password:&lt;password&gt;&quot;);\nWindowsDriver&lt;WindowsElement&gt; windowsDriver = new WindowsDriver&lt;WindowsElement&gt;(new Uri(&quot;http://127.0.0.1:4723&quot;), appCapabilities);\n</code></pre>\n<p>But no luck. The arguments specified in &quot;appArguments&quot; key is not passed to the application\nCan anyone suggest how do we achieve this in WinAppDriver?</p>\n"},{"tags":["java","linux","java-8","linux-mint","wsl-2"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1677028551,"post_id":75527314,"comment_id":133255550,"body_markdown":"It is recommended that you use SDKMAN to install JDK, Maven, Gradle on WSL2. REF Java development environment on Windows (WSL2 + SDKMAN + IntelliJ)(https://marcinjakuszko.medium.com/java-development-environment-on-windows-10-wsl2-sdkman-intellij-584686fdea85)","body":"It is recommended that you use SDKMAN to install JDK, Maven, Gradle on WSL2. REF Java development environment on Windows (WSL2 + SDKMAN + IntelliJ)(<a href=\"https://marcinjakuszko.medium.com/java-development-environment-on-windows-10-wsl2-sdkman-intellij-584686fdea85\" rel=\"nofollow noreferrer\">marcinjakuszko.medium.com/&hellip;</a>)"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1677028966,"post_id":75527314,"comment_id":133255602,"body_markdown":"You can add parameters under compilation to tell Javac that it must be compiled into JDK 8 format. `javac Main.java -source 8 -target 8`","body":"You can add parameters under compilation to tell Javac that it must be compiled into JDK 8 format. <code>javac Main.java -source 8 -target 8</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1677057020,"post_id":75527314,"comment_id":133260245,"body_markdown":"@life888888 better is `javac --release 8 Main.java` which does not only imply `-source 8` and `-target 8` but also ensures that you don’t access newer API.","body":"@life888888 better is <code>javac --release 8 Main.java</code> which does not only imply <code>-source 8</code> and <code>-target 8</code> but also ensures that you don’t access newer API."}],"answers":[{"tags":[],"owner":{"account_id":8890555,"reputation":35,"user_id":6637286,"display_name":"Joe McCay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677077930,"creation_date":1677077930,"answer_id":75534501,"question_id":75527314,"body_markdown":"Thank you for the comments.  I ended up finding the answer myself by Googling multiple results.  I uninstalled the openjdk-8 packages and installed the deb package for Zulu.  I then called update-alternatives to add the java directory that is not the JRE.  I probably didn&#39;t need to uninstall the openjdk-8 package, but I needed something in the Zulu java version.","title":"WSL2 Linux Mint OpenJDK 8","body":"<p>Thank you for the comments.  I ended up finding the answer myself by Googling multiple results.  I uninstalled the openjdk-8 packages and installed the deb package for Zulu.  I then called update-alternatives to add the java directory that is not the JRE.  I probably didn't need to uninstall the openjdk-8 package, but I needed something in the Zulu java version.</p>\n"}],"owner":{"account_id":8890555,"reputation":35,"user_id":6637286,"display_name":"Joe McCay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75534501,"answer_count":1,"score":0,"last_activity_date":1677077930,"creation_date":1677027074,"question_id":75527314,"body_markdown":"I am running Linux Mint on WSL 2.  I installed OpenJDK 8 from using sudo apt a while back.\r\nRunning update-alternatives returns the following results.\r\n```\r\n sudo update-alternatives --display java\r\n\r\njava - auto mode\r\n  link best version is /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n  link currently points to /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n  link java is /usr/bin/java\r\n  slave java.1.gz is /usr/share/man/man1/java.1.gz\r\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java - priority 1111\r\n  slave java.1.gz: /usr/lib/jvm/java-11-openjdk-amd64/man/man1/java.1.gz\r\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java - priority 1081\r\n  slave java.1.gz: /usr/lib/jvm/java-8-openjdk-amd64/jre/man/man1/java.1.gz\r\n```\r\nJava 8 is point to the jre, but the entire SDK is installed.  When I switch to java-8-openjdk-amd64, the java versions is 8, but the javac is java 11.  If I perform an ls on /usr/lib/jvm/java-8-openjdk-amd64/bin directory, everything is there.  Some of the entries are links to the jre which is fine.  How do I switch it so update-alternatives points to the /usr/lib/jvm/java-8-openjdk-amd64/ directory not the /usr/lib/jvm/java-8-openjdk-amd64/jre directory.","title":"WSL2 Linux Mint OpenJDK 8","body":"<p>I am running Linux Mint on WSL 2.  I installed OpenJDK 8 from using sudo apt a while back.\nRunning update-alternatives returns the following results.</p>\n<pre><code> sudo update-alternatives --display java\n\njava - auto mode\n  link best version is /usr/lib/jvm/java-11-openjdk-amd64/bin/java\n  link currently points to /usr/lib/jvm/java-11-openjdk-amd64/bin/java\n  link java is /usr/bin/java\n  slave java.1.gz is /usr/share/man/man1/java.1.gz\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java - priority 1111\n  slave java.1.gz: /usr/lib/jvm/java-11-openjdk-amd64/man/man1/java.1.gz\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java - priority 1081\n  slave java.1.gz: /usr/lib/jvm/java-8-openjdk-amd64/jre/man/man1/java.1.gz\n</code></pre>\n<p>Java 8 is point to the jre, but the entire SDK is installed.  When I switch to java-8-openjdk-amd64, the java versions is 8, but the javac is java 11.  If I perform an ls on /usr/lib/jvm/java-8-openjdk-amd64/bin directory, everything is there.  Some of the entries are links to the jre which is fine.  How do I switch it so update-alternatives points to the /usr/lib/jvm/java-8-openjdk-amd64/ directory not the /usr/lib/jvm/java-8-openjdk-amd64/jre directory.</p>\n"},{"tags":["java","regex","apache-spark","apache-spark-sql"],"answers":[{"tags":[],"owner":{"account_id":11355792,"reputation":436,"user_id":8325428,"display_name":"ozlemg"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1677052371,"creation_date":1677052371,"answer_id":75529635,"question_id":75528417,"body_markdown":"   I have tried it in pyspark but following expression seems to get the expected result.\r\n\r\n     data = [{&quot;Mail&quot;: &#39;adHODFSOIHC9ds&#39;},\r\n                {&quot;Mail&quot;: &#39;kcbc@dec.com&#39;},\r\n                {&quot;Mail&quot;: &#39;abc@dec.com&#39;},\r\n                {&quot;Mail&quot;: &#39;nnmp@let.net&#39;}\r\n                ]\r\n        df = spark.createDataFrame(data)\r\n        \r\n        expr = &quot;[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.+-]+\\.com$&quot;\r\n        df = df.filter(df[&quot;Mail&quot;].rlike(expr))\r\n        \r\n        df.show()\r\n\r\nHope it helps.","title":"regex for email in spark dataframe column in java","body":"<p>I have tried it in pyspark but following expression seems to get the expected result.</p>\n<pre><code> data = [{&quot;Mail&quot;: 'adHODFSOIHC9ds'},\n            {&quot;Mail&quot;: 'kcbc@dec.com'},\n            {&quot;Mail&quot;: 'abc@dec.com'},\n            {&quot;Mail&quot;: 'nnmp@let.net'}\n            ]\n    df = spark.createDataFrame(data)\n    \n    expr = &quot;[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.+-]+\\.com$&quot;\n    df = df.filter(df[&quot;Mail&quot;].rlike(expr))\n    \n    df.show()\n</code></pre>\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":11229395,"reputation":2092,"user_id":8237992,"display_name":"Monu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677077821,"creation_date":1677077821,"answer_id":75534477,"question_id":75528417,"body_markdown":"use below query query strings to make it work. \r\n```\r\nString query = &quot;email  REGEXP (\\&quot;[a-zA-Z0-9._%+-]+@[a-zA-Z_]+?\\\\.com\\&quot;)&quot;;\r\n```","title":"regex for email in spark dataframe column in java","body":"<p>use below query query strings to make it work.</p>\n<pre><code>String query = &quot;email  REGEXP (\\&quot;[a-zA-Z0-9._%+-]+@[a-zA-Z_]+?\\\\.com\\&quot;)&quot;;\n</code></pre>\n"}],"owner":{"account_id":11229395,"reputation":2092,"user_id":8237992,"display_name":"Monu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677077821,"creation_date":1677041770,"question_id":75528417,"body_markdown":"I am trying to test regexp for spark. I am confused as it works for some regex and fails for others.\r\n\r\nIn the below code, I am trying to find a match using regexp.\r\nHowever, it does not return anything. what am I missing?\r\n\r\nI have validated the regex there is no issue with it.\r\n```\r\npackage com.hsec.correlation;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.RowFactory;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.types.DataTypes;\r\nimport org.apache.spark.sql.types.StructType;\r\nimport org.json.simple.parser.ParseException;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class test {\r\n    public static SparkSession spark;\r\n\r\n    public static void main(String[] args) throws IOException, ParseException {\r\n        spark = SparkSession.builder()\r\n                .appName(&quot;SparkStructuredStreamingTest&quot;)\r\n                .master(&quot;local[2]&quot;)\r\n                .getOrCreate();\r\n        // code\r\n        StructType structType = new StructType();\r\n        structType = structType.add(&quot;id&quot;, DataTypes.StringType, false);\r\n        structType = structType.add(&quot;email&quot;, DataTypes.StringType, false);\r\n\r\n        List&lt;Row&gt; nums = new ArrayList&lt;Row&gt;();\r\n        nums.add(RowFactory.create(&quot;1&quot;, &quot;abc@dec.com&quot;));\r\n        nums.add(RowFactory.create(&quot;2&quot;, &quot;adHODFSOIHC9ds&quot;));\r\n        nums.add(RowFactory.create(&quot;3&quot;, &quot;kcbc@dec.com&quot;));\r\n        nums.add(RowFactory.create(&quot;4&quot;, &quot;nnmp@let.net&quot;));\r\n\r\n        Dataset&lt;Row&gt; df = spark.createDataFrame(nums, structType);\r\n        String query=&quot;(email REGEXP &#39;(\\\\w+@[a-zA-Z_]+?\\\\.com)&#39;)&quot;;\r\n        df=df.filter(query);\r\n        df.show();\r\n    }\r\n\r\n}\r\n\r\n```\r\nOutput:\r\n```\r\n+---+-----+\r\n| id|email|\r\n+---+-----+\r\n+---+-----+\r\n```\r\nExpected:\r\n```\r\n+---+--------------+\r\n| id|         email|\r\n+---+--------------+\r\n|  1|   abc@dec.com|\r\n|  3|  kcbc@dec.com|\r\n+---+--------------+\r\n```","title":"regex for email in spark dataframe column in java","body":"<p>I am trying to test regexp for spark. I am confused as it works for some regex and fails for others.</p>\n<p>In the below code, I am trying to find a match using regexp.\nHowever, it does not return anything. what am I missing?</p>\n<p>I have validated the regex there is no issue with it.</p>\n<pre><code>package com.hsec.correlation;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.RowFactory;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.types.DataTypes;\nimport org.apache.spark.sql.types.StructType;\nimport org.json.simple.parser.ParseException;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class test {\n    public static SparkSession spark;\n\n    public static void main(String[] args) throws IOException, ParseException {\n        spark = SparkSession.builder()\n                .appName(&quot;SparkStructuredStreamingTest&quot;)\n                .master(&quot;local[2]&quot;)\n                .getOrCreate();\n        // code\n        StructType structType = new StructType();\n        structType = structType.add(&quot;id&quot;, DataTypes.StringType, false);\n        structType = structType.add(&quot;email&quot;, DataTypes.StringType, false);\n\n        List&lt;Row&gt; nums = new ArrayList&lt;Row&gt;();\n        nums.add(RowFactory.create(&quot;1&quot;, &quot;abc@dec.com&quot;));\n        nums.add(RowFactory.create(&quot;2&quot;, &quot;adHODFSOIHC9ds&quot;));\n        nums.add(RowFactory.create(&quot;3&quot;, &quot;kcbc@dec.com&quot;));\n        nums.add(RowFactory.create(&quot;4&quot;, &quot;nnmp@let.net&quot;));\n\n        Dataset&lt;Row&gt; df = spark.createDataFrame(nums, structType);\n        String query=&quot;(email REGEXP '(\\\\w+@[a-zA-Z_]+?\\\\.com)')&quot;;\n        df=df.filter(query);\n        df.show();\n    }\n\n}\n\n</code></pre>\n<p>Output:</p>\n<pre><code>+---+-----+\n| id|email|\n+---+-----+\n+---+-----+\n</code></pre>\n<p>Expected:</p>\n<pre><code>+---+--------------+\n| id|         email|\n+---+--------------+\n|  1|   abc@dec.com|\n|  3|  kcbc@dec.com|\n+---+--------------+\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":6201989,"reputation":3525,"user_id":4831427,"accept_rate":62,"display_name":"Steve Tomlin"},"score":0,"creation_date":1677074276,"post_id":75533717,"comment_id":133265374,"body_markdown":"What if the variable has an _ at the end?","body":"What if the variable has an _ at the end?"},{"owner":{"account_id":19958357,"reputation":57,"user_id":14626551,"display_name":"Maria"},"score":0,"creation_date":1677074470,"post_id":75533717,"comment_id":133265437,"body_markdown":"It should not pass, the second part after ${variabile} is optional","body":"It should not pass, the second part after ${variabile} is optional"},{"owner":{"account_id":6201989,"reputation":3525,"user_id":4831427,"accept_rate":62,"display_name":"Steve Tomlin"},"score":0,"creation_date":1677074588,"post_id":75533717,"comment_id":133265470,"body_markdown":"I&#39;m a bit confused because the variable would be interpolated but your regex looks like it is testing its part of the string?","body":"I&#39;m a bit confused because the variable would be interpolated but your regex looks like it is testing its part of the string?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1677074600,"post_id":75533717,"comment_id":133265477,"body_markdown":"Can you show the actual declaration of the String and the test code you&#39;re using?","body":"Can you show the actual declaration of the String and the test code you&#39;re using?"},{"owner":{"account_id":19958357,"reputation":57,"user_id":14626551,"display_name":"Maria"},"score":0,"creation_date":1677074867,"post_id":75533717,"comment_id":133265556,"body_markdown":"`String test = &quot;\\&quot;TEST_PROCESS_\\&quot;+${variable}+\\&quot;_PRODUCT\\&quot;&quot;;\nif (Pattern.matches(&quot;\\&quot;(?:[A-Z]+_{1})+\\&quot;\\\\+\\\\$\\\\{[a-z]+}(\\\\+\\&quot;_{1}[A-Z_]+\\&quot;)?&quot;, test)) {\n      System.out.println(&quot;valid format&quot;);`","body":"<code>String test = &quot;\\&quot;TEST_PROCESS_\\&quot;+${variable}+\\&quot;_PRODUCT\\&quot;&quot;; if (Pattern.matches(&quot;\\&quot;(?:[A-Z]+_{1})+\\&quot;\\\\+\\\\$\\\\{[a-z]+}(\\\\+\\&quot;_&zwnj;&#8203;{1}[A-Z_]+\\&quot;)?&quot;, test)) {       System.out.println(&quot;valid format&quot;);</code>"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1677074945,"post_id":75533717,"comment_id":133265575,"body_markdown":"please add clarifications to the question (vs. posting comments)","body":"please add clarifications to the question (vs. posting comments)"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1677075124,"post_id":75533717,"comment_id":133265626,"body_markdown":"The `[A-Z_]+` is always going to be a problem. What about using the first term test except have a 0 or more clause instead of 1 or more. Then have a word at the end `(?:[A-Z]+_{1})*[A-Z]+`","body":"The <code>[A-Z_]+</code> is always going to be a problem. What about using the first term test except have a 0 or more clause instead of 1 or more. Then have a word at the end <code>(?:[A-Z]+_{1})*[A-Z]+</code>"}],"answers":[{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677076426,"creation_date":1677075994,"answer_id":75534097,"question_id":75533717,"body_markdown":"You have to restrict that after every underscore, there must be at least one character.\r\n\r\n```regex\r\n^[A-Z](_[A-Z]|[A-Z])*$\r\n``` \r\n\r\nAnd if you want the group for the or not to be capturing, you can use this one\r\n\r\n```\r\n^[A-Z](?:_[A-Z]|[A-Z])*$\r\n```\r\n\r\nAnd with the whole String-literal wrapping and concatenation it will become\r\n\r\n``` java\r\nfinal private static String PATTERN = &quot;&quot;&quot;\r\n^&quot;[A-Z](?:_[A-Z]|[A-Z])*_&quot;\\+\\$\\{[a-z]+\\}\\+&quot;(?:_[A-Z]|[A-Z])*&quot;$\r\n&quot;&quot;&quot;;\r\n```\r\n\r\nSince Java 15 you can use text blocks, which helps with unnecessary quote escaping.","title":"Regex pattern check","body":"<p>You have to restrict that after every underscore, there must be at least one character.</p>\n<pre><code>^[A-Z](_[A-Z]|[A-Z])*$\n</code></pre>\n<p>And if you want the group for the or not to be capturing, you can use this one</p>\n<pre><code>^[A-Z](?:_[A-Z]|[A-Z])*$\n</code></pre>\n<p>And with the whole String-literal wrapping and concatenation it will become</p>\n<pre class=\"lang-java prettyprint-override\"><code>final private static String PATTERN = &quot;&quot;&quot;\n^&quot;[A-Z](?:_[A-Z]|[A-Z])*_&quot;\\+\\$\\{[a-z]+\\}\\+&quot;(?:_[A-Z]|[A-Z])*&quot;$\n&quot;&quot;&quot;;\n</code></pre>\n<p>Since Java 15 you can use text blocks, which helps with unnecessary quote escaping.</p>\n"},{"tags":[],"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677077581,"creation_date":1677076031,"answer_id":75534111,"question_id":75533717,"body_markdown":"For the part after the `${variable}` you can use the same technique, which you used for the part before it. And you need to anchor your regex at the start and the end of the line:\r\n```\r\n^\\&quot;(?:[A-Z]+_)+\\&quot;\\+\\$\\{[a-z]+\\}(?:\\+\\&quot;(?:_[A-Z]+)+\\&quot;)?$\r\n```\r\nDemo [here][1].\r\n\r\n\r\n  [1]: https://regex101.com/r/KnvfDl/1","title":"Regex pattern check","body":"<p>For the part after the <code>${variable}</code> you can use the same technique, which you used for the part before it. And you need to anchor your regex at the start and the end of the line:</p>\n<pre><code>^\\&quot;(?:[A-Z]+_)+\\&quot;\\+\\$\\{[a-z]+\\}(?:\\+\\&quot;(?:_[A-Z]+)+\\&quot;)?$\n</code></pre>\n<p>Demo <a href=\"https://regex101.com/r/KnvfDl/1\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":19958357,"reputation":57,"user_id":14626551,"display_name":"Maria"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75534111,"answer_count":2,"score":0,"last_activity_date":1677077581,"creation_date":1677074128,"question_id":75533717,"body_markdown":"I have to create a regex check for strings of this type:\r\n```text\r\n&quot;TEST_PROCESS_&quot;+${variable}\r\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT&quot;\r\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT_NEW&quot;\r\n```\r\n\r\nthis is my regex check:\r\n```\r\n\\&quot;(?:[A-Z]+_{1})+\\&quot;\\+\\$\\{[a-z]+}(\\+\\&quot;_{1}[A-Z_]+\\&quot;)?\r\n```\r\nthis is my code:\r\n\r\n   \r\n\r\n    String test = &quot;\\&quot;TEST_PROCESS_\\&quot;+${variable}+\\&quot;_PRODUCT\\&quot;&quot;; \r\n    if (Pattern.matches(&quot;\\&quot;(?:[A-Z]+_{1})+\\&quot;\\\\+\\\\$\\\\{[a-z]+}(\\\\+\\&quot;_{1}[A-Z_]+\\&quot;)?&quot;, test))        \r\n    System.out.println(&quot;valid format&quot;);\r\n\r\nThe issue I have is that strings of the following types are matched when they should not:\r\n```\r\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT_&quot;         the last _ is not ok\r\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;__PRODUCT&quot;        __ should not pass\r\n```\r\n\r\nThank you!\r\n\r\n\r\n","title":"Regex pattern check","body":"<p>I have to create a regex check for strings of this type:</p>\n<pre><code>&quot;TEST_PROCESS_&quot;+${variable}\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT&quot;\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT_NEW&quot;\n</code></pre>\n<p>this is my regex check:</p>\n<pre><code>\\&quot;(?:[A-Z]+_{1})+\\&quot;\\+\\$\\{[a-z]+}(\\+\\&quot;_{1}[A-Z_]+\\&quot;)?\n</code></pre>\n<p>this is my code:</p>\n<pre><code>String test = &quot;\\&quot;TEST_PROCESS_\\&quot;+${variable}+\\&quot;_PRODUCT\\&quot;&quot;; \nif (Pattern.matches(&quot;\\&quot;(?:[A-Z]+_{1})+\\&quot;\\\\+\\\\$\\\\{[a-z]+}(\\\\+\\&quot;_{1}[A-Z_]+\\&quot;)?&quot;, test))        \nSystem.out.println(&quot;valid format&quot;);\n</code></pre>\n<p>The issue I have is that strings of the following types are matched when they should not:</p>\n<pre><code>&quot;TEST_PROCESS_&quot;+${variable}+&quot;_PRODUCT_&quot;         the last _ is not ok\n&quot;TEST_PROCESS_&quot;+${variable}+&quot;__PRODUCT&quot;        __ should not pass\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":17489811,"reputation":59,"user_id":12682195,"display_name":"Younis Abbasi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677077576,"creation_date":1677077243,"answer_id":75534369,"question_id":75534232,"body_markdown":"Your resource files are missing i.e. html and other stuff I think. If not then please check that you added home.html file inside src/main/resources/templates folder? if no then create home.html and put inside src/main/resources/templates if yes and still not working then add below line in src/main/resources/application.properties \r\n**spring..resources.web.staticLocations=classpath:/static/**\r\nadd home.html like I had done\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/clsIE.png","title":"How to fix &quot;Whitelabel Error Page&quot; in Spring Boot?","body":"<p>Your resource files are missing i.e. html and other stuff I think. If not then please check that you added home.html file inside src/main/resources/templates folder? if no then create home.html and put inside src/main/resources/templates if yes and still not working then add below line in src/main/resources/application.properties\n<strong>spring..resources.web.staticLocations=classpath:/static/</strong>\nadd home.html like I had done\n<a href=\"https://i.stack.imgur.com/clsIE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/clsIE.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16931282,"reputation":13,"user_id":12245478,"display_name":"Ho&#224;ng Thi&#234;n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2643,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75534369,"answer_count":1,"score":0,"last_activity_date":1677077576,"creation_date":1677076579,"question_id":75534232,"body_markdown":"- I have **HomeController.java** like this:\r\n\r\n```\r\npackage controllers;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class HomeController {\r\n\r\n\t@RequestMapping(&quot;/home&quot;)\r\n\tpublic String home() {\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n}\r\n```\r\n- I also put my html file resources/templates/home.html but when I run, I get this error on web:\r\n\r\n\r\n&gt; Whitelabel Error Page\r\n&gt; This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n&gt; \r\n&gt; Wed Feb 22 21:22:21 ICT 2023\r\n&gt; There was an unexpected error (type=Not Found, status=404).\r\n&gt; No message available\r\n\r\n\r\nMy pom.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.baothien&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;todos&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;todoapp&lt;/name&gt;\r\n\t&lt;description&gt;TodoApp Spring Web&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n- I don&#39;t know how to fix it, I&#39;m a newbie learn Spring. \r\n- Help me, pls. Thank you.","title":"How to fix &quot;Whitelabel Error Page&quot; in Spring Boot?","body":"<ul>\n<li>I have <strong>HomeController.java</strong> like this:</li>\n</ul>\n<pre><code>package controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class HomeController {\n\n    @RequestMapping(&quot;/home&quot;)\n    public String home() {\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<ul>\n<li>I also put my html file resources/templates/home.html but when I run, I get this error on web:</li>\n</ul>\n<blockquote>\n<p>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.</p>\n<p>Wed Feb 22 21:22:21 ICT 2023\nThere was an unexpected error (type=Not Found, status=404).\nNo message available</p>\n</blockquote>\n<p>My pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.baothien&lt;/groupId&gt;\n    &lt;artifactId&gt;todos&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;todoapp&lt;/name&gt;\n    &lt;description&gt;TodoApp Spring Web&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<ul>\n<li>I don't know how to fix it, I'm a newbie learn Spring.</li>\n<li>Help me, pls. Thank you.</li>\n</ul>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1673514301,"post_id":75093738,"comment_id":132517673,"body_markdown":"Don’t use `Date`. That class is long outdated and was always poorly designed. For a date use `LocalDate`.","body":"Don’t use <code>Date</code>. That class is long outdated and was always poorly designed. For a date use <code>LocalDate</code>."},{"owner":{"account_id":12480444,"reputation":54,"user_id":9085392,"display_name":"David Gonz&#225;lez Arias"},"score":0,"creation_date":1673514475,"post_id":75093738,"comment_id":132517737,"body_markdown":"@OleV.V. Okay I will check that, didn&#39;t know it existed. For this i think it would work either ways but ill change my stuff to LocalDate once I read a bit about it. Thanks!","body":"@OleV.V. Okay I will check that, didn&#39;t know it existed. For this i think it would work either ways but ill change my stuff to LocalDate once I read a bit about it. Thanks!"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1673514702,"post_id":75093738,"comment_id":132517801,"body_markdown":"https://docs.oracle.com/javase/tutorial/datetime/index.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/datetime/index.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":18177897,"reputation":1,"user_id":13226272,"display_name":"PRRASANTHI VS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673515818,"creation_date":1673515818,"answer_id":75094115,"question_id":75093738,"body_markdown":"Yes, spring JPA has the method **findAllByPublicationTimeBetween()** which retrieves articles published between two given hours.\r\n\r\nRefer: [https://www.baeldung.com/spring-data-jpa-query-by-date]","title":"find and Between two dates with query by Example&lt;S&gt; JPA","body":"<p>Yes, spring JPA has the method <strong>findAllByPublicationTimeBetween()</strong> which retrieves articles published between two given hours.</p>\n<p>Refer: [https://www.baeldung.com/spring-data-jpa-query-by-date]</p>\n"}],"owner":{"account_id":12480444,"reputation":54,"user_id":9085392,"display_name":"David Gonz&#225;lez Arias"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677077364,"creation_date":1673513899,"question_id":75093738,"body_markdown":"Im doing this right now on my JPARepository and it I love how it works and how easy it is to replicate with other Entitys\r\n\r\n\t&lt;S extends MyObject&gt; Page&lt;S&gt; findAll(Example&lt;S&gt; example, Pageable pageRequest);\r\n\r\nNow I want the same format with Example but being able to find Between 2 dates, is it possible without an @Query?\r\n\r\n\t&lt;S extends MyObject&gt; Page&lt;S&gt; findByDateBetween(Date startDate, Date endDate, Example&lt;S&gt; example, Pageable pageRequest);\r\n\r\n\r\n\r\nhttps://docs.spring.io/spring-data/jpa/docs/current/reference/html/#query-by-example\r\n//Currently, only SingularAttribute properties can be used for property matching\r\n\r\nEDIT:\r\n*After some research\r\nI think the only way is doing a custom query, i dont like that approach because the `Example&lt;S&gt; example` class has a lot of propperties.*\r\n\r\nEDIT2: \r\nhttps://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/query/FluentQuery.FetchableFluentQuery.html\r\nFluentJPA seems a good way to archive this I dont see the way to implement this type of Functions","title":"find and Between two dates with query by Example&lt;S&gt; JPA","body":"<p>Im doing this right now on my JPARepository and it I love how it works and how easy it is to replicate with other Entitys</p>\n<pre><code>&lt;S extends MyObject&gt; Page&lt;S&gt; findAll(Example&lt;S&gt; example, Pageable pageRequest);\n</code></pre>\n<p>Now I want the same format with Example but being able to find Between 2 dates, is it possible without an @Query?</p>\n<pre><code>&lt;S extends MyObject&gt; Page&lt;S&gt; findByDateBetween(Date startDate, Date endDate, Example&lt;S&gt; example, Pageable pageRequest);\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#query-by-example\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#query-by-example</a>\n//Currently, only SingularAttribute properties can be used for property matching</p>\n<p>EDIT:\n<em>After some research\nI think the only way is doing a custom query, i dont like that approach because the <code>Example&lt;S&gt; example</code> class has a lot of propperties.</em></p>\n<p>EDIT2:\n<a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/query/FluentQuery.FetchableFluentQuery.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/query/FluentQuery.FetchableFluentQuery.html</a>\nFluentJPA seems a good way to archive this I dont see the way to implement this type of Functions</p>\n"},{"tags":["java","spring","testng"],"owner":{"account_id":7527198,"reputation":1099,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677077299,"creation_date":1677077299,"question_id":75534387,"body_markdown":"I have my configuration file:\r\n\r\n    @ComponentScan\r\n    @Configuration\r\n    @PropertySource({&quot;classpath:custom-${env:dev}.properties&quot;,&quot;classpath:application-${env:dev}.properties&quot;})\r\n    public class CoreConfig {\r\n    \r\n        @Bean\r\n        BeanUtil beanUtil() {\r\n            return new BeanUtil();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        BaseDataCollector serviceCollector(){\r\n            return new ServiceDataCollector();\r\n        }\r\n    \r\n        @Bean\r\n        MailService mailService(@Value(&quot;${mail.smtp.host}&quot;) String smtpHost,\r\n                                @Value(&quot;${mail.smtp.port}&quot;) String smtpPort,\r\n                                @Value(&quot;${mail.smtp.from}&quot;) String smtpFrom,\r\n                                @Value(&quot;${mail.smtp.to:#{systemProperties[&#39;mail.smtp.to&#39;]}}&quot;) String smtpTo,\r\n                                @Value(&quot;${mail.service:#{systemProperties[&#39;mail.service&#39;]}}&quot;) String emailSrv) {\r\n            return new MailService(smtpHost, smtpPort, smtpFrom, smtpTo, emailSrv);\r\n        }\r\n    }\r\n\r\nNow i am using TestNg to perform tests, i have my class that extends `AbstractTestNGSpringContextTests` :\r\n\r\n    @ContextConfiguration(classes = CoreConfig.class)\r\n    @Listeners(CustomResultGeneratingListener.class)\r\n    public class CustomTestNGTests extends AbstractTestNGSpringContextTests {\r\n            ...\r\n    }\r\n\r\nThe problem is , `CustomResultGeneratingListener` class internally attempts to retrieve spring bean. However at this point, when constructor or even `onStart` method of TestNg&#39;s `ITestListener` is called, the spring context is STILL NOT loaded. Why is that? Why is spring context loading AFTER listener is being initialized and its method are called? \r\n\r\nI am using  my `CustomTestNGTests` in tests such as :\r\n\r\n    public class TemplateTest extends CustomTestNGTests{\r\n      @Test\r\n      ....\r\n    }","title":"Spring context is not loaded before testNg is initialized or its methods called","body":"<p>I have my configuration file:</p>\n<pre><code>@ComponentScan\n@Configuration\n@PropertySource({&quot;classpath:custom-${env:dev}.properties&quot;,&quot;classpath:application-${env:dev}.properties&quot;})\npublic class CoreConfig {\n\n    @Bean\n    BeanUtil beanUtil() {\n        return new BeanUtil();\n    }\n\n\n    @Bean\n    BaseDataCollector serviceCollector(){\n        return new ServiceDataCollector();\n    }\n\n    @Bean\n    MailService mailService(@Value(&quot;${mail.smtp.host}&quot;) String smtpHost,\n                            @Value(&quot;${mail.smtp.port}&quot;) String smtpPort,\n                            @Value(&quot;${mail.smtp.from}&quot;) String smtpFrom,\n                            @Value(&quot;${mail.smtp.to:#{systemProperties['mail.smtp.to']}}&quot;) String smtpTo,\n                            @Value(&quot;${mail.service:#{systemProperties['mail.service']}}&quot;) String emailSrv) {\n        return new MailService(smtpHost, smtpPort, smtpFrom, smtpTo, emailSrv);\n    }\n}\n</code></pre>\n<p>Now i am using TestNg to perform tests, i have my class that extends <code>AbstractTestNGSpringContextTests</code> :</p>\n<pre><code>@ContextConfiguration(classes = CoreConfig.class)\n@Listeners(CustomResultGeneratingListener.class)\npublic class CustomTestNGTests extends AbstractTestNGSpringContextTests {\n        ...\n}\n</code></pre>\n<p>The problem is , <code>CustomResultGeneratingListener</code> class internally attempts to retrieve spring bean. However at this point, when constructor or even <code>onStart</code> method of TestNg's <code>ITestListener</code> is called, the spring context is STILL NOT loaded. Why is that? Why is spring context loading AFTER listener is being initialized and its method are called?</p>\n<p>I am using  my <code>CustomTestNGTests</code> in tests such as :</p>\n<pre><code>public class TemplateTest extends CustomTestNGTests{\n  @Test\n  ....\n}\n</code></pre>\n"},{"tags":["java","itext","itext7"],"answers":[{"tags":[],"owner":{"account_id":13734,"reputation":1450,"user_id":27760,"display_name":"Glenner003"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677076821,"creation_date":1677076821,"answer_id":75534276,"question_id":75433941,"body_markdown":"The equivalent is either BaseFont.getWidthPoint(String text, float fontSize) or PdfFont.getWidth(String text, float fontSize).\r\n\r\nSo you need an instance of a font to start with. It will be easier to use one or the other depending on your context.\r\n\r\n","title":"What is the equivalent of getWidthPoint() in itextpdf7?","body":"<p>The equivalent is either BaseFont.getWidthPoint(String text, float fontSize) or PdfFont.getWidth(String text, float fontSize).</p>\n<p>So you need an instance of a font to start with. It will be easier to use one or the other depending on your context.</p>\n"}],"owner":{"account_id":24365143,"reputation":5,"user_id":18298993,"display_name":"komplRX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677076821,"creation_date":1676279832,"question_id":75433941,"body_markdown":"Upgraded to itextpdf7 and I am using:\r\n\r\n    new Text(&quot; TEST &quot;).setFont(testFont).setFontSize(FONT).setBold().getStrokeWidth();\r\nbut it always returns null.\r\n\r\nWith the previous version of itext I was using: \r\n\r\n    new Chunk(&quot; TEST &quot;, FONT_BOLD).getWidthPoint();\r\n\r\nIs there another way in ItextPdf7 to get the width of a text?","title":"What is the equivalent of getWidthPoint() in itextpdf7?","body":"<p>Upgraded to itextpdf7 and I am using:</p>\n<pre><code>new Text(&quot; TEST &quot;).setFont(testFont).setFontSize(FONT).setBold().getStrokeWidth();\n</code></pre>\n<p>but it always returns null.</p>\n<p>With the previous version of itext I was using:</p>\n<pre><code>new Chunk(&quot; TEST &quot;, FONT_BOLD).getWidthPoint();\n</code></pre>\n<p>Is there another way in ItextPdf7 to get the width of a text?</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677076762,"creation_date":1677075218,"answer_id":75533935,"question_id":75533772,"body_markdown":"A `Service&lt;?&gt;` instance&#39;s `process` method accepts an instance of a specific _but unknown_ class.\r\n\r\nYou can&#39;t directly create a `Service&lt;?&gt;`: you have to create an instance of with a concrete value of the type variable. All of the following are subtypes of `Service&lt;?&gt;`: `Service&lt;Object&gt;`, `Service&lt;Integer&gt;`, `Service&lt;Map&lt;String, List&lt;Object&gt;&gt;&gt;` etc. The `process` method of these example types expect an `Object`, `Integer` and `Map&lt;String, List&lt;Object&gt;&gt;` respectively.\r\n\r\nBut the compiler doesn&#39;t know which of these it is, so it doesn&#39;t allow you to invoke the `process` method with a non-null value, because it might be the wrong kind of non-null value.\r\n\r\nYou can only invoke this with a literal `null`, which is the only thing that can be cast to any type.\r\n\r\n```\r\ns.process(null);\r\n```\r\n\r\nIf you want to be able to pass `Object` into the `process` method, you have to make `determine` return a `Service&lt;Object&gt;`; or remove the type variable from the `Service` interface, and make `process` just accept `Object`.","title":"How to pass object to question mark method","body":"<p>A <code>Service&lt;?&gt;</code> instance's <code>process</code> method accepts an instance of a specific <em>but unknown</em> class.</p>\n<p>You can't directly create a <code>Service&lt;?&gt;</code>: you have to create an instance of with a concrete value of the type variable. All of the following are subtypes of <code>Service&lt;?&gt;</code>: <code>Service&lt;Object&gt;</code>, <code>Service&lt;Integer&gt;</code>, <code>Service&lt;Map&lt;String, List&lt;Object&gt;&gt;&gt;</code> etc. The <code>process</code> method of these example types expect an <code>Object</code>, <code>Integer</code> and <code>Map&lt;String, List&lt;Object&gt;&gt;</code> respectively.</p>\n<p>But the compiler doesn't know which of these it is, so it doesn't allow you to invoke the <code>process</code> method with a non-null value, because it might be the wrong kind of non-null value.</p>\n<p>You can only invoke this with a literal <code>null</code>, which is the only thing that can be cast to any type.</p>\n<pre><code>s.process(null);\n</code></pre>\n<p>If you want to be able to pass <code>Object</code> into the <code>process</code> method, you have to make <code>determine</code> return a <code>Service&lt;Object&gt;</code>; or remove the type variable from the <code>Service</code> interface, and make <code>process</code> just accept <code>Object</code>.</p>\n"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677076492,"accepted_answer_id":75533935,"answer_count":1,"score":-1,"last_activity_date":1677076762,"creation_date":1677074337,"question_id":75533772,"body_markdown":"    public static void main(String ...args) {\r\n      Service&lt;?&gt; s = determine(args[0]);\r\n\r\n      //getting error here: cannot pass Object to ?\r\n      s.process(new Object());\r\n    }\r\n\r\n    static Service&lt;?&gt; determine(String name){\r\n       //return a service\r\n    }\r\n\r\n    interface Service&lt;I&gt; {\r\n      void process(I in);\r\n    }\r\nI&#39;m not able to pass my Object to service method. Why and how to resolve it? Thanks","title":"How to pass object to question mark method","body":"<pre><code>public static void main(String ...args) {\n  Service&lt;?&gt; s = determine(args[0]);\n\n  //getting error here: cannot pass Object to ?\n  s.process(new Object());\n}\n\nstatic Service&lt;?&gt; determine(String name){\n   //return a service\n}\n\ninterface Service&lt;I&gt; {\n  void process(I in);\n}\n</code></pre>\n<p>I'm not able to pass my Object to service method. Why and how to resolve it? Thanks</p>\n"},{"tags":["java","maven","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1677076452,"post_id":75534135,"comment_id":133266109,"body_markdown":"Create and post a [mre].","body":"Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1677076472,"post_id":75534135,"comment_id":133266120,"body_markdown":"[mcve] please .. that said: you __must not__ change the state of the sender in a listener to that state (or related properties). Most of the time, we get away with it, though ;)","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .. that said: you <b>must not</b> change the state of the sender in a listener to that state (or related properties). Most of the time, we get away with it, though ;)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1677077571,"post_id":75534135,"comment_id":133266518,"body_markdown":"Also note that a `ChoiceBox` is for choosing/selecting something, not for carrying out actions, which is what you appear to be doing here (though it&#39;s honestly hard to tell from this code snippet). If you want drop downs where you are executing actions, you need some kind of menu (e.g. a `MenuButton`).","body":"Also note that a <code>ChoiceBox</code> is for choosing/selecting something, not for carrying out actions, which is what you appear to be doing here (though it&#39;s honestly hard to tell from this code snippet). If you want drop downs where you are executing actions, you need some kind of menu (e.g. a <code>MenuButton</code>)."},{"owner":{"account_id":27851818,"reputation":1,"user_id":21266178,"display_name":"Internal Error"},"score":1,"creation_date":1677078687,"post_id":75534135,"comment_id":133266916,"body_markdown":"James_D that worked fine :D","body":"James_D that worked fine :D"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677134724,"post_id":75534135,"comment_id":133278690,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":27851818,"reputation":1,"user_id":21266178,"display_name":"Internal Error"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677076388,"creation_date":1677076114,"question_id":75534135,"body_markdown":"Im out of ideas. Im trying to create a list with strings. Those strings have a button to remove them from the list. Below the list is a choicebox with the available values. \r\nSo when selecting a value from the choicebox, i create a new listitem and remove the value from the dropdown. \r\nI discovered that modifying the children of the choicebox causes a short delay. Not very long but very annoying.\r\n\r\nMaybe you know a better way of implementing this or have a fix for the problem. So here&#39;s my code\r\n\r\n    default VBox newMultiSelectStringEditor(ListProperty&lt;String&gt; property, String caption, ObservableList&lt;String&gt; values) {\r\n\t\tVBox vBox = new VBox();\r\n\t\tLabel label = new Label(caption);\r\n\r\n\t\tChoiceBox&lt;String&gt; choiceBox = new ChoiceBox&lt;&gt;();\r\n\r\n\t\tVBox innerVBox = new VBox();\r\n\t\tinnerVBox.setSpacing(5.0);\r\n\t\tinnerVBox.setPadding(new Insets(5));\r\n\r\n\r\n\t\tfor (String string : property.getValue()) {\r\n\t\t\tMultiSelectStringOption option = new MultiSelectStringOption(string);\r\n\t\t\toption.setOnAction(actionEvent -&gt; {\r\n\t\t\t\tinnerVBox.getChildren().remove(option);\r\n\t\t\t\tproperty.get().remove(string);\r\n\t\t\t});\r\n\t\t\tinnerVBox.getChildren().add(option);\r\n\t\t}\r\n\r\n\t\tchoiceBox.setItems(values);\r\n\r\n\t\tchoiceBox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;String&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void changed(ObservableValue&lt;? extends String&gt; observableValue, String s, String string) {\r\n\t\t\t\tif(string != null &amp;&amp; !string.equals(&quot;&quot;)) {\r\n\t\t\t\t\tchoiceBox.getSelectionModel().clearSelection();\r\n\t\t\t\t\tMultiSelectStringOption option = new MultiSelectStringOption(string);\r\n\t\t\t\t\toption.setOnAction(actionEvent -&gt; {\r\n\t\t\t\t\t\tinnerVBox.getChildren().remove(option);\r\n\t\t\t\t\t\tproperty.get().remove(string);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tproperty.get().add(string);\r\n\t\t\t\t\tchoiceBox.getItems().remove(string);\r\n\t\t\t\t\tinnerVBox.getChildren().add(option);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\tchoiceBox.setMinWidth(680.0);\r\n\t\tchoiceBox.setPrefWidth(680.0);\r\n\r\n\r\n\t\tvBox.getChildren().addAll(label, innerVBox, choiceBox);\r\n\t\treturn vBox;\r\n\t}\r\n\r\nI tried running the remove action on a separate thread. But then i got a concurrent modification exception...","title":"JavaFX 11 ChoiceBox causes lag","body":"<p>Im out of ideas. Im trying to create a list with strings. Those strings have a button to remove them from the list. Below the list is a choicebox with the available values.\nSo when selecting a value from the choicebox, i create a new listitem and remove the value from the dropdown.\nI discovered that modifying the children of the choicebox causes a short delay. Not very long but very annoying.</p>\n<p>Maybe you know a better way of implementing this or have a fix for the problem. So here's my code</p>\n<pre><code>default VBox newMultiSelectStringEditor(ListProperty&lt;String&gt; property, String caption, ObservableList&lt;String&gt; values) {\n    VBox vBox = new VBox();\n    Label label = new Label(caption);\n\n    ChoiceBox&lt;String&gt; choiceBox = new ChoiceBox&lt;&gt;();\n\n    VBox innerVBox = new VBox();\n    innerVBox.setSpacing(5.0);\n    innerVBox.setPadding(new Insets(5));\n\n\n    for (String string : property.getValue()) {\n        MultiSelectStringOption option = new MultiSelectStringOption(string);\n        option.setOnAction(actionEvent -&gt; {\n            innerVBox.getChildren().remove(option);\n            property.get().remove(string);\n        });\n        innerVBox.getChildren().add(option);\n    }\n\n    choiceBox.setItems(values);\n\n    choiceBox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;String&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends String&gt; observableValue, String s, String string) {\n            if(string != null &amp;&amp; !string.equals(&quot;&quot;)) {\n                choiceBox.getSelectionModel().clearSelection();\n                MultiSelectStringOption option = new MultiSelectStringOption(string);\n                option.setOnAction(actionEvent -&gt; {\n                    innerVBox.getChildren().remove(option);\n                    property.get().remove(string);\n                });\n                property.get().add(string);\n                choiceBox.getItems().remove(string);\n                innerVBox.getChildren().add(option);\n            }\n        }\n    });\n\n\n\n    choiceBox.setMinWidth(680.0);\n    choiceBox.setPrefWidth(680.0);\n\n\n    vBox.getChildren().addAll(label, innerVBox, choiceBox);\n    return vBox;\n}\n</code></pre>\n<p>I tried running the remove action on a separate thread. But then i got a concurrent modification exception...</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-config"],"owner":{"account_id":8411933,"reputation":2522,"user_id":6313539,"display_name":"Sweta Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677076162,"creation_date":1677076162,"question_id":75534143,"body_markdown":"We are planning to utilize Spring Cloud Config for our service. We would like to avoid a single point of failure of the config server. The spring cloud config server is on premise.\r\n\r\nCan someone help me how can I register multiple config servers on the application side?\r\nIs it a good idea to have a single config server for all the environments vs having one config server for each environment?\r\n\r\n","title":"How can I register multiple spring cloud config server on the application side","body":"<p>We are planning to utilize Spring Cloud Config for our service. We would like to avoid a single point of failure of the config server. The spring cloud config server is on premise.</p>\n<p>Can someone help me how can I register multiple config servers on the application side?\nIs it a good idea to have a single config server for all the environments vs having one config server for each environment?</p>\n"},{"tags":["java","spring","spring-boot","sonarqube"],"owner":{"account_id":22528468,"reputation":3,"user_id":16720897,"display_name":"himanshu chugh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677076272,"answer_count":0,"score":0,"last_activity_date":1677075996,"creation_date":1677075861,"question_id":75534064,"body_markdown":"I am using the below code in my spring boot application in prod environment for logging,\r\n\r\n    try {\r\n\t\t// something\r\n\t} catch (Throwable t) {\r\n\t\tt.printStackTrace();\r\n\t}\r\n   \r\n\r\n\r\nhowever for &quot; t.printStackTrace();&quot; sonarqube says\r\n\r\n`Make sure this debug feature is deactivated before delivering the code in production.`\r\n\r\nCan you please help me understand what am I doing wrong here? and how can i correct it?\r\n\r\na solution which tells me what code i should correct in order to correct the error","title":"Error t.printStackTrace() in sonarqube : Make sure this debug feature is deactivated before delivering the code in production","body":"<p>I am using the below code in my spring boot application in prod environment for logging,</p>\n<pre><code>try {\n    // something\n} catch (Throwable t) {\n    t.printStackTrace();\n}\n</code></pre>\n<p>however for &quot; t.printStackTrace();&quot; sonarqube says</p>\n<p><code>Make sure this debug feature is deactivated before delivering the code in production.</code></p>\n<p>Can you please help me understand what am I doing wrong here? and how can i correct it?</p>\n<p>a solution which tells me what code i should correct in order to correct the error</p>\n"},{"tags":["java","jsp","servlets","jstl"],"comments":[{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1677076730,"post_id":75534074,"comment_id":133266207,"body_markdown":"FYI: please catch up your learning resources and make sure that they are not written by amateurs with the sole purpose to earn advertising incomes by copy pasting dubious code snippets. Using `&lt;sql:xxx&gt;` tags and using `&lt;% scriptlets %&gt;` is namely officially discouraged since introduction of JSP version 2.0 in 2003 and considered a bad practice since. That&#39;s **twenty** years ago already!","body":"FYI: please catch up your learning resources and make sure that they are not written by amateurs with the sole purpose to earn advertising incomes by copy pasting dubious code snippets. Using <code>&lt;sql:xxx&gt;</code> tags and using <code>&lt;% scriptlets %&gt;</code> is namely officially discouraged since introduction of JSP version 2.0 in 2003 and considered a bad practice since. That&#39;s <b>twenty</b> years ago already!"}],"owner":{"account_id":27356048,"reputation":13,"user_id":20864421,"display_name":"Sarwvidya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677076563,"answer_count":0,"score":0,"last_activity_date":1677075896,"creation_date":1677075896,"question_id":75534074,"body_markdown":"I have created a maven project which runs fine. My project run successfully and all fields are correctly updated to database once I run. But I want to display those fields in my project, so I created one jsp file called history.jsp. I used JSTL here to display my fields. But once I click the button &quot;Transaction history&quot; (which is linked to my history.jsp file) I receive error &quot;HTTP Status 500 – Internal Server Error&quot;. I have added the &quot;jstl-1.2&quot; maven dependency to my pom.xml file.\r\n\r\nHere is code of my profile.jsp file :\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    \r\n&lt;%@ taglib prefix = &quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n&lt;%@ taglib prefix = &quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&gt;\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot; integrity=&quot;sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n&lt;title&gt;Transaction History&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body style=&quot;background-image: url(&#39;https://media.istockphoto.com/vectors/empty-blank-pastel-faded-pale-very-light-sky-blue-and-white-coloured-vector-id1355217474?b=1&amp;k=20&amp;m=1355217474&amp;s=170667a&amp;w=0&amp;h=iFvjFzoWYJSEL36G41H0uPJbxOQfJJC6_LmMYiM5wVs=&#39;); background-size: 100%;&quot;&gt;\r\n\t&lt;div style=&quot;padding: 80px;&quot;&gt;\r\n\t&lt;h1 style=&quot;color:blue;&quot;&gt;Transaction History&lt;/h1&gt;\r\n\t&lt;sql:setDataSource var=&quot;table&quot; driver=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://localhost:3306/transaction&quot; user=&quot;root&quot; password=&quot;root&quot; /&gt;\r\n\t&lt;sql:query var=&quot;rs&quot; dataSource=&quot;${table}&quot;&gt; select * from deposite_withdraw where user_email = &quot;${ user.getEmail()}&quot;&lt;/sql:query&gt;\r\n\t&lt;table class=&quot;table table-striped&quot;&gt;\r\n  &lt;thead&gt;\r\n    &lt;tr&gt;\r\n      &lt;th scope=&quot;col&quot;&gt;Date&lt;/th&gt;\r\n      &lt;th scope=&quot;col&quot;&gt;Amount&lt;/th&gt;\r\n    &lt;/tr&gt;\r\n  &lt;/thead&gt;\r\n  &lt;tbody&gt;\r\n    &lt;c:forEach items=&quot;${rs.rows }&quot; var=&quot;trs&quot;&gt;\r\n\t\t&lt;tr&gt; \r\n\t\t&lt;td&gt; &lt;c:out value=&quot;${trs.transaction_date}&quot; /&gt; &lt;/td&gt;\r\n\t\t&lt;td&gt; &lt;c:out value=&quot;${trs.amount }&quot; /&gt; &lt;/td&gt;\r\n\t\t&lt;/tr&gt;\r\n\t&lt;/c:forEach&gt;\r\n  &lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nHere is my dashboard.jsp file from where I&#39;m calling this history.jsp\r\n\r\n```\r\n&lt;%@page import=&quot;java.util.jar.Attributes.Name&quot;%&gt;\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n\r\n&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\r\n\r\n    &lt;!-- Bootstrap CSS --&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot;\r\n        integrity=&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.2.0/css/all.css&quot;\r\n        integrity=&quot;sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n\r\n&lt;title&gt;Insert title here&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n     &lt;% \r\n     \r\n     response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\r\n     \r\n     if(session.getAttribute(&quot;user&quot;)==null){\r\n    \t response.sendRedirect(&quot;login.jsp&quot;);\r\n     }\r\n    \t \r\n    %&gt;\r\n\r\n    &lt;nav class=&quot;navbar navbar-expand-sm navbar-dark bg-dark&quot;&gt;\r\n        &lt;div class=&quot;container&quot;&gt;\r\n\r\n            &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;mobile-nav&quot;&gt;\r\n                &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;\r\n                    &lt;li class=&quot;nav-item&quot;&gt;\r\n                        &lt;a class=&quot;nav-link&quot; href=&quot;dashboard.jsp&quot;&gt;\r\n                            Dashboard\r\n                        &lt;/a&gt;\r\n                    &lt;/li&gt;\r\n                &lt;/ul&gt;\r\n                \r\n                &lt;form action=&quot;/logout&quot;&gt;\r\n\r\n                &lt;ul class=&quot;navbar-nav ml-auto&quot;&gt;\r\n                   \r\n                    &lt;li class=&quot;nav-item&quot;&gt;\r\n                        &lt;a class=&quot;nav-link&quot; href=&quot;login.jsp&quot;&gt;\r\n                            Logout\r\n                        &lt;/a&gt;\r\n                    &lt;/li&gt;\r\n                &lt;/ul&gt;\r\n                \r\n                &lt;/form&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/nav&gt;\r\n    \r\n\r\n    &lt;div class=&quot;projects&quot;&gt;\r\n        &lt;div class=&quot;container&quot;&gt;\r\n            &lt;div class=&quot;row&quot;&gt;\r\n                &lt;div class=&quot;col-md-12&quot;&gt;\r\n                    &lt;h1 class=&quot;display-4 text-center&quot;&gt;Personal Bank&lt;/h1&gt;\r\n                    \r\n                    &lt;div class=&quot;card text-center&quot;&gt;\r\n                        &lt;div class=&quot;card-header bg-warning text-white&quot;&gt;\r\n                            &lt;h4&gt;Welcome to your personal bank&lt;/h4&gt;\r\n                            &lt;h1&gt;Sarwvidya&lt;/h1&gt;\r\n                        &lt;/div&gt;\r\n                    &lt;/div&gt;\r\n                    \r\n\r\n                    &lt;!-- Project Item Component --&gt;\r\n                    &lt;div class=&quot;container&quot;&gt;\r\n                        &lt;div class=&quot;card card-body bg-light mb-3&quot;&gt;\r\n                            &lt;div class=&quot;row&quot;&gt;\r\n                                \r\n                                &lt;div class=&quot;col-lg-4 col-md-3 col-6 text-center&quot;&gt;\r\n                                    &lt;h3&gt;Current Balance&lt;/h3&gt;\r\n                                    &lt;h1&gt;Rs. 27000&lt;/h1&gt;\r\n                                &lt;/div&gt;\r\n                                &lt;div class=&quot;col-md-4 col-12 d-lg-block&quot;&gt;\r\n                                    &lt;ul class=&quot;list-group&quot;&gt;\r\n                                        &lt;a href=&quot;credit.jsp&quot;&gt;\r\n                                            &lt;li class=&quot;list-group-item board text-success&quot;&gt;\r\n                                                &lt;i class=&quot;fa fa-flag-checkered pr-1&quot;&gt; Credit &lt;/i&gt;\r\n                                            &lt;/li&gt;\r\n                                        &lt;/a&gt;\r\n                                        &lt;a href=&quot;debit.jsp&quot;&gt;\r\n                                            &lt;li class=&quot;list-group-item update text-info&quot;&gt;\r\n                                                &lt;i class=&quot;fa fa-edit pr-1&quot;&gt; Debit &lt;/i&gt;\r\n                                            &lt;/li&gt;\r\n                                        &lt;/a&gt;\r\n                                        \r\n                                    &lt;/ul&gt;\r\n                                &lt;/div&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/div&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div&gt;\r\n                    &lt;button class=&quot;btn btn-info&quot;&gt;&lt;a href=&quot;history.jsp&quot; style=&quot;color:white ;&quot;&gt; Transaction History &lt;/a&gt;&lt;/button&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;!-- End of Project Item Component --&gt;\r\n\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    \r\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\r\n        integrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js&quot;\r\n        integrity=&quot;sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js&quot;\r\n        integrity=&quot;sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nMy database name : transaction\r\n\r\nTable name: deposite_withdraw\r\n\r\nFields : user_email (varchar), amount (varchar), date (varchar)\r\n\r\nI&#39;m getting this error. Pls help me to resolve this.[![enter image description here](https://i.stack.imgur.com/fE7uS.png)](https://i.stack.imgur.com/fE7uS.png)","title":"&quot;No suitable driver found&quot; Error in my Localhost Server for my jsp file having JSTL","body":"<p>I have created a maven project which runs fine. My project run successfully and all fields are correctly updated to database once I run. But I want to display those fields in my project, so I created one jsp file called history.jsp. I used JSTL here to display my fields. But once I click the button &quot;Transaction history&quot; (which is linked to my history.jsp file) I receive error &quot;HTTP Status 500 – Internal Server Error&quot;. I have added the &quot;jstl-1.2&quot; maven dependency to my pom.xml file.</p>\n<p>Here is code of my profile.jsp file :</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n    \n&lt;%@ taglib prefix = &quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;%@ taglib prefix = &quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot; integrity=&quot;sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm&quot; crossorigin=&quot;anonymous&quot;&gt;\n&lt;title&gt;Transaction History&lt;/title&gt;\n&lt;/head&gt;\n&lt;body style=&quot;background-image: url('https://media.istockphoto.com/vectors/empty-blank-pastel-faded-pale-very-light-sky-blue-and-white-coloured-vector-id1355217474?b=1&amp;k=20&amp;m=1355217474&amp;s=170667a&amp;w=0&amp;h=iFvjFzoWYJSEL36G41H0uPJbxOQfJJC6_LmMYiM5wVs='); background-size: 100%;&quot;&gt;\n    &lt;div style=&quot;padding: 80px;&quot;&gt;\n    &lt;h1 style=&quot;color:blue;&quot;&gt;Transaction History&lt;/h1&gt;\n    &lt;sql:setDataSource var=&quot;table&quot; driver=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://localhost:3306/transaction&quot; user=&quot;root&quot; password=&quot;root&quot; /&gt;\n    &lt;sql:query var=&quot;rs&quot; dataSource=&quot;${table}&quot;&gt; select * from deposite_withdraw where user_email = &quot;${ user.getEmail()}&quot;&lt;/sql:query&gt;\n    &lt;table class=&quot;table table-striped&quot;&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th scope=&quot;col&quot;&gt;Date&lt;/th&gt;\n      &lt;th scope=&quot;col&quot;&gt;Amount&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;c:forEach items=&quot;${rs.rows }&quot; var=&quot;trs&quot;&gt;\n        &lt;tr&gt; \n        &lt;td&gt; &lt;c:out value=&quot;${trs.transaction_date}&quot; /&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;c:out value=&quot;${trs.amount }&quot; /&gt; &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/c:forEach&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Here is my dashboard.jsp file from where I'm calling this history.jsp</p>\n<pre><code>&lt;%@page import=&quot;java.util.jar.Attributes.Name&quot;%&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n\n&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot;\n        integrity=&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot; crossorigin=&quot;anonymous&quot;&gt;\n\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.2.0/css/all.css&quot;\n        integrity=&quot;sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ&quot; crossorigin=&quot;anonymous&quot;&gt;\n\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n     &lt;% \n     \n     response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\n     \n     if(session.getAttribute(&quot;user&quot;)==null){\n         response.sendRedirect(&quot;login.jsp&quot;);\n     }\n         \n    %&gt;\n\n    &lt;nav class=&quot;navbar navbar-expand-sm navbar-dark bg-dark&quot;&gt;\n        &lt;div class=&quot;container&quot;&gt;\n\n            &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;mobile-nav&quot;&gt;\n                &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;\n                    &lt;li class=&quot;nav-item&quot;&gt;\n                        &lt;a class=&quot;nav-link&quot; href=&quot;dashboard.jsp&quot;&gt;\n                            Dashboard\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n                \n                &lt;form action=&quot;/logout&quot;&gt;\n\n                &lt;ul class=&quot;navbar-nav ml-auto&quot;&gt;\n                   \n                    &lt;li class=&quot;nav-item&quot;&gt;\n                        &lt;a class=&quot;nav-link&quot; href=&quot;login.jsp&quot;&gt;\n                            Logout\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n                \n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n    \n\n    &lt;div class=&quot;projects&quot;&gt;\n        &lt;div class=&quot;container&quot;&gt;\n            &lt;div class=&quot;row&quot;&gt;\n                &lt;div class=&quot;col-md-12&quot;&gt;\n                    &lt;h1 class=&quot;display-4 text-center&quot;&gt;Personal Bank&lt;/h1&gt;\n                    \n                    &lt;div class=&quot;card text-center&quot;&gt;\n                        &lt;div class=&quot;card-header bg-warning text-white&quot;&gt;\n                            &lt;h4&gt;Welcome to your personal bank&lt;/h4&gt;\n                            &lt;h1&gt;Sarwvidya&lt;/h1&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n\n                    &lt;!-- Project Item Component --&gt;\n                    &lt;div class=&quot;container&quot;&gt;\n                        &lt;div class=&quot;card card-body bg-light mb-3&quot;&gt;\n                            &lt;div class=&quot;row&quot;&gt;\n                                \n                                &lt;div class=&quot;col-lg-4 col-md-3 col-6 text-center&quot;&gt;\n                                    &lt;h3&gt;Current Balance&lt;/h3&gt;\n                                    &lt;h1&gt;Rs. 27000&lt;/h1&gt;\n                                &lt;/div&gt;\n                                &lt;div class=&quot;col-md-4 col-12 d-lg-block&quot;&gt;\n                                    &lt;ul class=&quot;list-group&quot;&gt;\n                                        &lt;a href=&quot;credit.jsp&quot;&gt;\n                                            &lt;li class=&quot;list-group-item board text-success&quot;&gt;\n                                                &lt;i class=&quot;fa fa-flag-checkered pr-1&quot;&gt; Credit &lt;/i&gt;\n                                            &lt;/li&gt;\n                                        &lt;/a&gt;\n                                        &lt;a href=&quot;debit.jsp&quot;&gt;\n                                            &lt;li class=&quot;list-group-item update text-info&quot;&gt;\n                                                &lt;i class=&quot;fa fa-edit pr-1&quot;&gt; Debit &lt;/i&gt;\n                                            &lt;/li&gt;\n                                        &lt;/a&gt;\n                                        \n                                    &lt;/ul&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div&gt;\n                    &lt;button class=&quot;btn btn-info&quot;&gt;&lt;a href=&quot;history.jsp&quot; style=&quot;color:white ;&quot;&gt; Transaction History &lt;/a&gt;&lt;/button&gt;\n                    &lt;/div&gt;\n                    &lt;!-- End of Project Item Component --&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\n        integrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js&quot;\n        integrity=&quot;sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js&quot;\n        integrity=&quot;sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>My database name : transaction</p>\n<p>Table name: deposite_withdraw</p>\n<p>Fields : user_email (varchar), amount (varchar), date (varchar)</p>\n<p>I'm getting this error. Pls help me to resolve this.<a href=\"https://i.stack.imgur.com/fE7uS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fE7uS.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","git","groovy","bitbucket","hook"],"owner":{"account_id":26960629,"reputation":31,"user_id":20528357,"display_name":"Vince"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677075575,"creation_date":1677075575,"question_id":75534016,"body_markdown":"I am working on a pre-receive hook using Scriptrunner for Bitbucket Server that checks the content of a repository whenever you create a Tag on Bitbucket. The script checks if there is a file named &quot;conanfile.py&quot; if there is none, the tag is created and if there is one, it checks the inside of the file, compare the inside with a regex and if there is some lines not matching the regex, block the tag creation. Here is the code : \r\n\r\n```java\r\n    log.warn(&#39;Starting pre-receive hook&#39;)\r\n    if (refChanges.any { it.ref.id.startsWith(&quot;refs/tags/&quot;) &amp;&amp; it.type == RefChangeType.ADD &amp;&amp; it.fromHash == &quot;0000000000000000000000000000000000000000&quot;}) {\r\n\r\n    log.warn(&#39;Ref change detected&#39;)\r\n\r\n    @ShortTextInput(label = &#39;regex&#39;, description = &#39;Regex expression used to verify file content&#39;)\r\n    String regexValue\r\n    def pattern = Pattern.compile(&quot;.*requires\\\\(\\&quot;[^\\\\d_\\\\-](\\\\S)+/(\\\\[\\\\d{1,3}(\\\\.\\\\d{1,3})*\\\\]|\\\\d(\\\\.\\\\d)*)@(eca|exail)&quot;)\r\n    def commitService = ComponentLocator.getComponent(CommitService)\r\n    def contentService = ComponentLocator.getComponent(ContentService)\r\n    def commits = refChanges.getCommits(repository) as List&lt;Commit&gt;\r\n\r\n    log.warn(&quot;Number of commits: ${commits.size()}&quot;)\r\n\r\n    def filePaths = [:] as Map&lt;String, String&gt;\r\n    commits.reverseEach { commit -&gt;\r\n        def changesRequest = new ChangesRequest.Builder(repository, commit.id).build()\r\n        commitService.streamChanges(changesRequest) { Change change -&gt;\r\n            if (change.path.toString().endsWith(&quot;conanfile.py&quot;)) {\r\n                filePaths[change.path.toString()] = commit.id\r\n            }\r\n            true\r\n        }\r\n    }\r\n\r\n    log.warn(&quot;Number of files: ${filePaths.size()}&quot;)\r\n\r\n    def result = true\r\n    def lineCount = 0\r\n    def matchCount = 0\r\n\r\n    filePaths.keySet().each { filePath -&gt;\r\n        def fileStream = new ByteArrayOutputStream()\r\n        contentService.streamFile(repository, filePaths[filePath], filePath) {\r\n            fileStream\r\n        }\r\n        fileStream.toString().split(&quot;\\n&quot;).each { line -&gt;\r\n            if (line.startsWith(&quot;        self.requires&quot;)) {\r\n                lineCount++\r\n                log.warn(&quot;Line count: ${lineCount}&quot;)\r\n                def match = pattern.matcher(line)\r\n                if (match.find()) {\r\n                    matchCount++\r\n                    log.warn(&quot;Match count: ${matchCount}&quot;)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (lineCount != matchCount) {\r\n        result = false\r\n    } else {\r\n        result = true\r\n    }\r\n\r\n    if (result) {\r\n        log.warn(&#39;Pre-receive hook succeeded&#39;)\r\n        return RepositoryHookResult.accepted()\r\n    } else {\r\n        log.warn(&#39;Pre-receive hook failed&#39;)\r\n        return RepositoryHookResult.rejected(&#39;Tag non cr&#233;e &#39;, &#39;Vous devez figer vos versions de dependance que vous utilisez quand vous cr&#233;ez un tag&#39;)\r\n    }\r\n\r\n} else {\r\n    log.warn(&#39;No relevant ref change detected&#39;)\r\n    return RepositoryHookResult.accepted()\r\n}\r\n```\r\n\r\nMy problem is , I can&#39;t seem to make the hook understand the commit and it&#39;s always empty making the checking not working : \r\n\r\n2023-02-22 13:19:29,551 WARN [c.o.s.r.ScriptBindingsManager]: Starting pre-receive hook\r\n\r\n2023-02-22 13:19:29,559 WARN [c.o.s.r.ScriptBindingsManager]: Ref change detected\r\n\r\n2023-02-22 13:19:29,608 WARN [c.o.s.r.ScriptBindingsManager]: Number of commits: 0\r\n\r\n2023-02-22 13:19:29,609 WARN [c.o.s.r.ScriptBindingsManager]: Number of files: 0\r\n\r\n2023-02-22 13:19:29,610 WARN [c.o.s.r.ScriptBindingsManager]: Pre-receive hook succeeded\r\n\r\nWhat is wrong with this code ? ","title":"Can&#39;t recuperate content of commit on tag creation","body":"<p>I am working on a pre-receive hook using Scriptrunner for Bitbucket Server that checks the content of a repository whenever you create a Tag on Bitbucket. The script checks if there is a file named &quot;conanfile.py&quot; if there is none, the tag is created and if there is one, it checks the inside of the file, compare the inside with a regex and if there is some lines not matching the regex, block the tag creation. Here is the code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    log.warn('Starting pre-receive hook')\n    if (refChanges.any { it.ref.id.startsWith(&quot;refs/tags/&quot;) &amp;&amp; it.type == RefChangeType.ADD &amp;&amp; it.fromHash == &quot;0000000000000000000000000000000000000000&quot;}) {\n\n    log.warn('Ref change detected')\n\n    @ShortTextInput(label = 'regex', description = 'Regex expression used to verify file content')\n    String regexValue\n    def pattern = Pattern.compile(&quot;.*requires\\\\(\\&quot;[^\\\\d_\\\\-](\\\\S)+/(\\\\[\\\\d{1,3}(\\\\.\\\\d{1,3})*\\\\]|\\\\d(\\\\.\\\\d)*)@(eca|exail)&quot;)\n    def commitService = ComponentLocator.getComponent(CommitService)\n    def contentService = ComponentLocator.getComponent(ContentService)\n    def commits = refChanges.getCommits(repository) as List&lt;Commit&gt;\n\n    log.warn(&quot;Number of commits: ${commits.size()}&quot;)\n\n    def filePaths = [:] as Map&lt;String, String&gt;\n    commits.reverseEach { commit -&gt;\n        def changesRequest = new ChangesRequest.Builder(repository, commit.id).build()\n        commitService.streamChanges(changesRequest) { Change change -&gt;\n            if (change.path.toString().endsWith(&quot;conanfile.py&quot;)) {\n                filePaths[change.path.toString()] = commit.id\n            }\n            true\n        }\n    }\n\n    log.warn(&quot;Number of files: ${filePaths.size()}&quot;)\n\n    def result = true\n    def lineCount = 0\n    def matchCount = 0\n\n    filePaths.keySet().each { filePath -&gt;\n        def fileStream = new ByteArrayOutputStream()\n        contentService.streamFile(repository, filePaths[filePath], filePath) {\n            fileStream\n        }\n        fileStream.toString().split(&quot;\\n&quot;).each { line -&gt;\n            if (line.startsWith(&quot;        self.requires&quot;)) {\n                lineCount++\n                log.warn(&quot;Line count: ${lineCount}&quot;)\n                def match = pattern.matcher(line)\n                if (match.find()) {\n                    matchCount++\n                    log.warn(&quot;Match count: ${matchCount}&quot;)\n                }\n            }\n        }\n    }\n\n    if (lineCount != matchCount) {\n        result = false\n    } else {\n        result = true\n    }\n\n    if (result) {\n        log.warn('Pre-receive hook succeeded')\n        return RepositoryHookResult.accepted()\n    } else {\n        log.warn('Pre-receive hook failed')\n        return RepositoryHookResult.rejected('Tag non crée ', 'Vous devez figer vos versions de dependance que vous utilisez quand vous créez un tag')\n    }\n\n} else {\n    log.warn('No relevant ref change detected')\n    return RepositoryHookResult.accepted()\n}\n</code></pre>\n<p>My problem is , I can't seem to make the hook understand the commit and it's always empty making the checking not working :</p>\n<p>2023-02-22 13:19:29,551 WARN [c.o.s.r.ScriptBindingsManager]: Starting pre-receive hook</p>\n<p>2023-02-22 13:19:29,559 WARN [c.o.s.r.ScriptBindingsManager]: Ref change detected</p>\n<p>2023-02-22 13:19:29,608 WARN [c.o.s.r.ScriptBindingsManager]: Number of commits: 0</p>\n<p>2023-02-22 13:19:29,609 WARN [c.o.s.r.ScriptBindingsManager]: Number of files: 0</p>\n<p>2023-02-22 13:19:29,610 WARN [c.o.s.r.ScriptBindingsManager]: Pre-receive hook succeeded</p>\n<p>What is wrong with this code ?</p>\n"},{"tags":["java","azure","sdk","endpoint","azure-cli"],"answers":[{"tags":[],"owner":{"account_id":26331226,"reputation":3286,"user_id":19991670,"display_name":"Pravallika KV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677075488,"creation_date":1677075488,"answer_id":75533994,"question_id":75470412,"body_markdown":"I was facing the same issue as you mentioned in the question.\r\n\r\nAfter reproducing from my end with below code, I am able to create private end point: \r\n```java\r\n@RestController\r\npublic class AzureSdkController {\r\n\tstatic AzureProfile profile = new AzureProfile(AzureEnvironment.AZURE);\r\n\tstatic TokenCredential credential = new EnvironmentCredentialBuilder()\r\n\t\t\t.authorityHost(profile.getEnvironment().getActiveDirectoryEndpoint()).build();\r\n\tstatic AzureResourceManager azure = AzureResourceManager.configure().authenticate(credential, profile)\r\n\t\t\t.withSubscription(&quot;&lt;subscription_id&gt;&quot;);\r\n\r\n\t@GetMapping(&quot;/create&quot;)\r\n\tpublic void createPrivateEndpoint() {\r\n\t\tazure.networks().manager().serviceClient().getPrivateEndpoints().createOrUpdate(&quot;rg1&quot;, &quot;mypv1&quot;,\r\n\t\t\t\tnew PrivateEndpointInner().withLocation(&quot;eastus&quot;).withSubnet(new SubnetInner().withId(\r\n\t\t\t\t\t\t&quot;/subscriptions/&lt;subscription_id&gt;/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworks/myVnet/subnets/mySubnet&quot;))\r\n\t\t\t\t\t\t.withPrivateLinkServiceConnections(Arrays.asList(new PrivateLinkServiceConnection()\r\n\t\t\t\t\t\t\t\t.withName(&quot;testPls&quot;)\r\n\t\t\t\t\t\t\t\t.withPrivateLinkServiceId(\r\n\t\t\t\t\t\t\t\t\t\t&quot;/subscriptions/&lt;subscription_id&gt;/resourceGroups/rg1/providers/Microsoft.Network/privateLinkServices/testPls&quot;)\r\n\t\t\t\t\t\t\t\t.withGroupIds(Arrays.asList()).withRequestMessage(&quot;Please approve my connection&quot;))));\r\n\t}\r\n\r\n}\r\n```\r\n**Output:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/bosxx.png)","title":"Unable to create Private Endpoint using the Azure SDK","body":"<p>I was facing the same issue as you mentioned in the question.</p>\n<p>After reproducing from my end with below code, I am able to create private end point:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class AzureSdkController {\n    static AzureProfile profile = new AzureProfile(AzureEnvironment.AZURE);\n    static TokenCredential credential = new EnvironmentCredentialBuilder()\n            .authorityHost(profile.getEnvironment().getActiveDirectoryEndpoint()).build();\n    static AzureResourceManager azure = AzureResourceManager.configure().authenticate(credential, profile)\n            .withSubscription(&quot;&lt;subscription_id&gt;&quot;);\n\n    @GetMapping(&quot;/create&quot;)\n    public void createPrivateEndpoint() {\n        azure.networks().manager().serviceClient().getPrivateEndpoints().createOrUpdate(&quot;rg1&quot;, &quot;mypv1&quot;,\n                new PrivateEndpointInner().withLocation(&quot;eastus&quot;).withSubnet(new SubnetInner().withId(\n                        &quot;/subscriptions/&lt;subscription_id&gt;/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworks/myVnet/subnets/mySubnet&quot;))\n                        .withPrivateLinkServiceConnections(Arrays.asList(new PrivateLinkServiceConnection()\n                                .withName(&quot;testPls&quot;)\n                                .withPrivateLinkServiceId(\n                                        &quot;/subscriptions/&lt;subscription_id&gt;/resourceGroups/rg1/providers/Microsoft.Network/privateLinkServices/testPls&quot;)\n                                .withGroupIds(Arrays.asList()).withRequestMessage(&quot;Please approve my connection&quot;))));\n    }\n\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/bosxx.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":27801329,"reputation":1,"user_id":21225733,"display_name":"ADITHYA AR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677075488,"creation_date":1676540647,"question_id":75470412,"body_markdown":"Setup:\r\n```\r\nOS: MacOS with Apple chip\r\nIDE: IntelliJ 2022.3.2\r\nLibraries:\r\nimplementation group: &#39;com.azure&#39;, name: &#39;azure-core&#39;, version: &#39;1.28.0&#39;\r\nimplementation group: &#39;com.azure&#39;, name: &#39;azure-identity&#39;, version: &#39;1.5.1&#39;\r\nimplementation group: &#39;com.azure&#39;, name: &#39;azure-core-management&#39;, version: &#39;1.10.1&#39;\r\nimplementation group: &#39;com.azure&#39;, name: &#39;azure-resourcemanager&#39;, version: &#39;2.23.0&#39;\r\n```\r\nGetting the following exception when attempting to create a private link service.\r\n\r\n```\r\nException in thread &quot;main&quot; com.azure.resourcemanager.network.models.ErrorException: Status code 400, &quot;{\r\n  &quot;error&quot;: {\r\n    &quot;code&quot;: &quot;InvalidRequestFormat&quot;,\r\n    &quot;message&quot;: &quot;Cannot parse the request.&quot;,\r\n    &quot;details&quot;: []\r\n  }\r\n}&quot;: Cannot parse the request.\r\n\tat java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:710)\r\n\tat com.azure.core.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\r\n\tat com.azure.core.http.rest.RestProxy.instantiateUnexpectedException(RestProxy.java:439)\r\n\tat com.azure.core.http.rest.RestProxy.lambda$ensureExpectedStatus$2(RestProxy.java:393)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.fastPath(FluxIterable.java:362)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:227)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribeInner(MonoFlatMapMany.java:150)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onSubscribe(MonoFlatMapMany.java:245)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\r\n\tat reactor.core.publisher.Flux.subscribe(Flux.java:8466)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:195)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.fastPath(FluxIterable.java:362)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:227)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribeInner(MonoFlatMapMany.java:150)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onSubscribe(MonoFlatMapMany.java:245)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\r\n\tat reactor.core.publisher.Flux.subscribe(Flux.java:8466)\r\n\tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:195)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337)\r\n\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCollectList$MonoCollectListSubscriber.onComplete(MonoCollectList.java:129)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\tat reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\r\n\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\tat reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\r\n\tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\r\n\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\r\n\tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:702)\r\n\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373)\r\n\tat io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible(SslHandler.java:1247)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1287)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\tSuppressed: java.lang.Exception: #block terminated with an error\r\n\t\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\r\n\t\tat reactor.core.publisher.Mono.block(Mono.java:1707)\r\n```\r\nCode used to create the private endpoint is:\r\n\r\n```\r\npublic static void createPrivateEndpoint(com.azure.resourcemanager.AzureResourceManager azure) {\r\n   PrivateEndpointInner privateEndpointInner = new PrivateEndpointInner()\r\n       .withLocation(&quot;eastus&quot;)\r\n       .withSubnet(\r\n           new SubnetInner()\r\n               .withId(\r\n                   &quot;/subscriptions/valid_subscription_ID/resourceGroups/valid_resource_group/providers/Microsoft.Network/virtualNetworks/valid_vnet/subnets/valid_subnet&quot;))\r\n       .withPrivateLinkServiceConnections(\r\n           Arrays\r\n               .asList(\r\n                   new PrivateLinkServiceConnection()\r\n                       .withPrivateLinkServiceId(\r\n                           &quot;/subscriptions/valid_subscription_ID/resourceGroups/valid_resource_group/providers/Microsoft.Network/privateLinkServices/valid_private_link_service&quot;)\r\n                    ));\r\n   azure.networks().manager().serviceClient().getPrivateEndpoints().createOrUpdate(\r\n       &quot;valid_resource_group_name&quot;,\r\n       &quot;valid_private_endpoint_name&quot;,\r\n       privateEndpointInner,\r\n       Context.NONE);\r\n }\r\n```\r\nI was able to create private endpoint using azure portal and azure cli. Even when I try to list the endpoints, it is working with SDK. Only create API is not working. Am I missing something?\r\n\r\nFacing issue with the Azure SDK.","title":"Unable to create Private Endpoint using the Azure SDK","body":"<p>Setup:</p>\n<pre><code>OS: MacOS with Apple chip\nIDE: IntelliJ 2022.3.2\nLibraries:\nimplementation group: 'com.azure', name: 'azure-core', version: '1.28.0'\nimplementation group: 'com.azure', name: 'azure-identity', version: '1.5.1'\nimplementation group: 'com.azure', name: 'azure-core-management', version: '1.10.1'\nimplementation group: 'com.azure', name: 'azure-resourcemanager', version: '2.23.0'\n</code></pre>\n<p>Getting the following exception when attempting to create a private link service.</p>\n<pre><code>Exception in thread &quot;main&quot; com.azure.resourcemanager.network.models.ErrorException: Status code 400, &quot;{\n  &quot;error&quot;: {\n    &quot;code&quot;: &quot;InvalidRequestFormat&quot;,\n    &quot;message&quot;: &quot;Cannot parse the request.&quot;,\n    &quot;details&quot;: []\n  }\n}&quot;: Cannot parse the request.\n    at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:710)\n    at com.azure.core.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\n    at com.azure.core.http.rest.RestProxy.instantiateUnexpectedException(RestProxy.java:439)\n    at com.azure.core.http.rest.RestProxy.lambda$ensureExpectedStatus$2(RestProxy.java:393)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\n    at reactor.core.publisher.FluxIterable$IterableSubscription.fastPath(FluxIterable.java:362)\n    at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:227)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribeInner(MonoFlatMapMany.java:150)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onSubscribe(MonoFlatMapMany.java:245)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\n    at reactor.core.publisher.Flux.subscribe(Flux.java:8466)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:195)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\n    at reactor.core.publisher.FluxIterable$IterableSubscription.fastPath(FluxIterable.java:362)\n    at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:227)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribeInner(MonoFlatMapMany.java:150)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onSubscribe(MonoFlatMapMany.java:245)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\n    at reactor.core.publisher.Flux.subscribe(Flux.java:8466)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:195)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337)\n    at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoCollectList$MonoCollectListSubscriber.onComplete(MonoCollectList.java:129)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\n    at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\n    at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\n    at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:702)\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373)\n    at io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible(SslHandler.java:1247)\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1287)\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n    Suppressed: java.lang.Exception: #block terminated with an error\n        at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\n        at reactor.core.publisher.Mono.block(Mono.java:1707)\n</code></pre>\n<p>Code used to create the private endpoint is:</p>\n<pre><code>public static void createPrivateEndpoint(com.azure.resourcemanager.AzureResourceManager azure) {\n   PrivateEndpointInner privateEndpointInner = new PrivateEndpointInner()\n       .withLocation(&quot;eastus&quot;)\n       .withSubnet(\n           new SubnetInner()\n               .withId(\n                   &quot;/subscriptions/valid_subscription_ID/resourceGroups/valid_resource_group/providers/Microsoft.Network/virtualNetworks/valid_vnet/subnets/valid_subnet&quot;))\n       .withPrivateLinkServiceConnections(\n           Arrays\n               .asList(\n                   new PrivateLinkServiceConnection()\n                       .withPrivateLinkServiceId(\n                           &quot;/subscriptions/valid_subscription_ID/resourceGroups/valid_resource_group/providers/Microsoft.Network/privateLinkServices/valid_private_link_service&quot;)\n                    ));\n   azure.networks().manager().serviceClient().getPrivateEndpoints().createOrUpdate(\n       &quot;valid_resource_group_name&quot;,\n       &quot;valid_private_endpoint_name&quot;,\n       privateEndpointInner,\n       Context.NONE);\n }\n</code></pre>\n<p>I was able to create private endpoint using azure portal and azure cli. Even when I try to list the endpoints, it is working with SDK. Only create API is not working. Am I missing something?</p>\n<p>Facing issue with the Azure SDK.</p>\n"},{"tags":["java","servlets","compiler-errors","javac"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":102,"is_accepted":true,"score":102,"last_activity_date":1638446351,"creation_date":1328703999,"answer_id":9193282,"question_id":9193228,"body_markdown":"You need to add the path to Tomcat&#39;s `/lib/servlet-api.jar` file to the compile time classpath.\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    javac -cp .;/path/to/Tomcat/lib/servlet-api.jar com/example/MyServletClass.java\r\n\r\nThe classpath is where Java needs to look for imported dependencies. It will otherwise default to the current folder which is included as `.` in the above example. The `;` is the path separator for Windows; if you&#39;re using an Unix based OS, then you need to use `:` instead.\r\n\r\nIf you&#39;re still facing the same complation error, and you&#39;re *actually* using Tomcat 10 or newer, then you should be migrating the imports in your source code from `javax.*` to `jakarta.*`.\r\n\r\n```java\r\nimport jakarta.servlet.*;\r\nimport jakarta.servlet.http.*;\r\n```\r\n\r\nIn case you want to keep using `javax.*` for whatever reason, then you should be downgrading to Tomcat 9 or older as that was the latest version still using the old `javax.*` namespace.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/65872072/jakarta-servlet-servletexception-class-com-practice-myservlet-is-not-a-servle/65872866#65872866\r\n- https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-jakarta-servlet-api-in-my-eclipse-project/4076706\r\n- https://stackoverflow.com/questions/7295096/what-exactly-is-java-ee","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>You need to add the path to Tomcat's <code>/lib/servlet-api.jar</code> file to the compile time classpath.</p>\n<pre class=\"lang-none prettyprint-override\"><code>javac -cp .;/path/to/Tomcat/lib/servlet-api.jar com/example/MyServletClass.java\n</code></pre>\n<p>The classpath is where Java needs to look for imported dependencies. It will otherwise default to the current folder which is included as <code>.</code> in the above example. The <code>;</code> is the path separator for Windows; if you're using an Unix based OS, then you need to use <code>:</code> instead.</p>\n<p>If you're still facing the same complation error, and you're <em>actually</em> using Tomcat 10 or newer, then you should be migrating the imports in your source code from <code>javax.*</code> to <code>jakarta.*</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.servlet.*;\nimport jakarta.servlet.http.*;\n</code></pre>\n<p>In case you want to keep using <code>javax.*</code> for whatever reason, then you should be downgrading to Tomcat 9 or older as that was the latest version still using the old <code>javax.*</code> namespace.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/65872072/jakarta-servlet-servletexception-class-com-practice-myservlet-is-not-a-servle/65872866#65872866\">jakarta.servlet.ServletException: Class [com.practice.MyServlet] is not a Servlet</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-jakarta-servlet-api-in-my-eclipse-project/4076706\">How do I import the javax.servlet / jakarta.servlet API in my Eclipse project?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7295096/what-exactly-is-java-ee\">What exactly is Java EE?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1069190,"reputation":40445,"user_id":1068879,"accept_rate":71,"display_name":"Frankline"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1443168744,"creation_date":1328704141,"answer_id":9193325,"question_id":9193228,"body_markdown":"Is it a JSP or Servlet?\r\n\r\nWell, these two packages aren’t actually built into Java like java.io is. Instead, they come with the Servlet-capable Web server (e.g. Tomcat). So before the Java compiler will be able to compile our Servlet, we need to let it know where to find the classes in these two packages.\r\n\r\n\r\nThe classes required are normally stored in a file called servlet.jar. The exact location of this file will depend on the particular Web server software you use, but in the case of Tomcat you can find it in the lib subdirectory of the main Tomcat installation directory (e.g. d:\\Program Files\\Apache Group\\jakarta-tomcat-3.2.3\\lib\\servlet.jar). For the Java compiler to be able to compile Servlets, you need to add this file to your Java class path. By default, Java looks for classes in the current directory (&quot;.&quot;) only. Thus, &quot;.&quot; is the default class path. If you change the class path to include the servlet.jar file (&quot;.;d:\\...\\lib\\servlet.jar&quot; under Windows, &quot;.:/usr/.../lib/servlet.jar&quot; in Unix), then the Servlet should compile just fine.\r\n\r\nYou can specify a class path to use when you run javac.exe as follows:\r\n\r\n&lt;code&gt;d:\\javadev&gt; javac -classpath &quot;.;d:\\Program Files\\Apache Group\\ jakarta-tomcat-3.2.3\\lib\\servlet.jar&quot; MyServlet.java&lt;/code&gt;\r\n\r\nOr in Linux javac uses : instead of ;\r\n\r\n&lt;code&gt;server1&gt; javac -classpath &quot;.:./servlet/servlet.jar&quot; MyServlet.java&lt;/code&gt;\r\n","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>Is it a JSP or Servlet?</p>\n\n<p>Well, these two packages aren’t actually built into Java like java.io is. Instead, they come with the Servlet-capable Web server (e.g. Tomcat). So before the Java compiler will be able to compile our Servlet, we need to let it know where to find the classes in these two packages.</p>\n\n<p>The classes required are normally stored in a file called servlet.jar. The exact location of this file will depend on the particular Web server software you use, but in the case of Tomcat you can find it in the lib subdirectory of the main Tomcat installation directory (e.g. d:\\Program Files\\Apache Group\\jakarta-tomcat-3.2.3\\lib\\servlet.jar). For the Java compiler to be able to compile Servlets, you need to add this file to your Java class path. By default, Java looks for classes in the current directory (\".\") only. Thus, \".\" is the default class path. If you change the class path to include the servlet.jar file (\".;d:...\\lib\\servlet.jar\" under Windows, \".:/usr/.../lib/servlet.jar\" in Unix), then the Servlet should compile just fine.</p>\n\n<p>You can specify a class path to use when you run javac.exe as follows:</p>\n\n<p><code>d:\\javadev> javac -classpath \".;d:\\Program Files\\Apache Group\\ jakarta-tomcat-3.2.3\\lib\\servlet.jar\" MyServlet.java</code></p>\n\n<p>Or in Linux javac uses : instead of ;</p>\n\n<p><code>server1> javac -classpath \".:./servlet/servlet.jar\" MyServlet.java</code></p>\n"},{"tags":[],"owner":{"account_id":986655,"reputation":1959,"user_id":1004981,"accept_rate":43,"display_name":"Abhendra Singh"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1328704693,"creation_date":1328704693,"answer_id":9193444,"question_id":9193228,"body_markdown":"Add servlet-api.jar into your classpath. It will be available into Tomcat&#39;s lib folder.","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>Add servlet-api.jar into your classpath. It will be available into Tomcat's lib folder.</p>\n"},{"tags":[],"owner":{"account_id":1939526,"reputation":131,"user_id":1746032,"accept_rate":80,"display_name":"Ravi Chandran"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1492627164,"creation_date":1364969298,"answer_id":15780027,"question_id":9193228,"body_markdown":"JSP and Servlet are Server side Programming. As it comes as an built in package inside a Server like Tomcat. \r\nThe path may be like wise  \r\n\r\n    C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\jsp-api.jar\r\n    C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\servlet-api.jar\r\n\r\nJust you want to Do is Add this in the following way \r\n\r\n    Right Click&gt; My Computer&gt;Advanced&gt;Environment Variables&gt;System variables\r\n    \r\n    Do&gt; New..&gt; Variable name:CLASSPATH\r\n               Variable value:CLASSPATH=.;C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\servlet-api.jar;\r\n\r\n\r\n ","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>JSP and Servlet are Server side Programming. As it comes as an built in package inside a Server like Tomcat. \nThe path may be like wise  </p>\n\n<pre><code>C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\jsp-api.jar\nC:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\servlet-api.jar\n</code></pre>\n\n<p>Just you want to Do is Add this in the following way </p>\n\n<pre><code>Right Click&gt; My Computer&gt;Advanced&gt;Environment Variables&gt;System variables\n\nDo&gt; New..&gt; Variable name:CLASSPATH\n           Variable value:CLASSPATH=.;C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\lib\\servlet-api.jar;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":366651,"reputation":415,"user_id":712316,"display_name":"Chezzwizz"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1369677188,"creation_date":1369677188,"answer_id":16778259,"question_id":9193228,"body_markdown":"In a linux environment the soft link apparently does not work. you must use the physical path. for instance on my machine I have a softlink at `/usr/share/tomacat7/lib/servlet-api.jar` and using this as my classpath argument led to a failed compile with the same error. instead I had to use `/usr/share/java/tomcat-servlet-api-3.0.jar` which is the file that the soft link pointed to.","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>In a linux environment the soft link apparently does not work. you must use the physical path. for instance on my machine I have a softlink at <code>/usr/share/tomacat7/lib/servlet-api.jar</code> and using this as my classpath argument led to a failed compile with the same error. instead I had to use <code>/usr/share/java/tomcat-servlet-api-3.0.jar</code> which is the file that the soft link pointed to.</p>\n"},{"tags":[],"owner":{"account_id":4059607,"reputation":992,"user_id":3336489,"display_name":"Swalih"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1447045900,"creation_date":1447045900,"answer_id":33602892,"question_id":9193228,"body_markdown":"If you are working with maven project, then add following dependency to your pom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>If you are working with maven project, then add following dependency to your pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622595830,"creation_date":1469802444,"answer_id":38661305,"question_id":9193228,"body_markdown":"This is what I found. Adding /usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar in my environment variable as CLASSPATH on  Mac.\r\n\r\nif using bash: ~/.bash_profile `$CLASSPATH=/usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar`\r\n\r\nif using zsh: ~/.zshrc export `CLASSPATH=&quot;usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar&quot;`\r\n\r\nForce it work right now, run `source .bash_profile` (or .zshrc)\r\nor one can restart computer and it works for the current user.","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>This is what I found. Adding /usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar in my environment variable as CLASSPATH on  Mac.</p>\n<p>if using bash: ~/.bash_profile <code>$CLASSPATH=/usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar</code></p>\n<p>if using zsh: ~/.zshrc export <code>CLASSPATH=&quot;usr/local/apache-tomcat-7.0.64/lib/servlet-api.jar&quot;</code></p>\n<p>Force it work right now, run <code>source .bash_profile</code> (or .zshrc)\nor one can restart computer and it works for the current user.</p>\n"},{"tags":[],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1470416569,"creation_date":1470416569,"answer_id":38794433,"question_id":9193228,"body_markdown":"This is what solved the problem for me:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>This is what solved the problem for me:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n    &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8831442,"reputation":309,"user_id":6597659,"display_name":"Md Rehan"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1523794506,"creation_date":1523794506,"answer_id":49841788,"question_id":9193228,"body_markdown":"Copy the file &quot;**servlet-api.jar**&quot; from location **YOUR_INSTILLATION_PATH\\tomcat\\lib\\servlet-api.jar** and Paste the file into your Java Directory **YOUR_INSTILLATION_PATH\\Java\\jdk1.8.0_121\\jre\\lib\\ext**\r\n\r\nthis will work (tested).","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>Copy the file \"<strong>servlet-api.jar</strong>\" from location <strong>YOUR_INSTILLATION_PATH\\tomcat\\lib\\servlet-api.jar</strong> and Paste the file into your Java Directory <strong>YOUR_INSTILLATION_PATH\\Java\\jdk1.8.0_121\\jre\\lib\\ext</strong></p>\n\n<p>this will work (tested).</p>\n"},{"tags":[],"owner":{"account_id":2384872,"reputation":401,"user_id":3507913,"display_name":"Pankaj"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1552963857,"creation_date":1552963857,"answer_id":55232937,"question_id":9193228,"body_markdown":"Even after trying suggested solution, it was not solving my problem because there where many instance of java path were entered by me.\r\n\r\n1. I removed all java related path (different version java) from  &quot;Path, JAVA_HOME, JRE_HOME&quot; and created from fresh.\r\n\r\n2. i have set (path may changes as per different installation)   \r\na. JAVA_HOME as C:\\Program Files\\Java\\jdk1.8.0_191   \r\nb. JRE_HOME as C:\\Program Files\\Java\\jdk1.8.0_191\\jre\\lib   \r\nc. add binary file path in path: C:\\Program Files\\Java\\jdk1.8.0_191\\bin   \r\nd. CLASSPATH as C:\\apache-tomcat-7.0.93\\lib\r\n\r\n3. never try in the same command prompt if its already open while doing changes/creting system/user variables. close it and open new one. \r\n\r\nReference Image: \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lHPpp.jpg","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>Even after trying suggested solution, it was not solving my problem because there where many instance of java path were entered by me.</p>\n\n<ol>\n<li><p>I removed all java related path (different version java) from  \"Path, JAVA_HOME, JRE_HOME\" and created from fresh.</p></li>\n<li><p>i have set (path may changes as per different installation)<br>\na. JAVA_HOME as C:\\Program Files\\Java\\jdk1.8.0_191<br>\nb. JRE_HOME as C:\\Program Files\\Java\\jdk1.8.0_191\\jre\\lib<br>\nc. add binary file path in path: C:\\Program Files\\Java\\jdk1.8.0_191\\bin<br>\nd. CLASSPATH as C:\\apache-tomcat-7.0.93\\lib</p></li>\n<li><p>never try in the same command prompt if its already open while doing changes/creting system/user variables. close it and open new one. </p></li>\n</ol>\n\n<p>Reference Image: \n<a href=\"https://i.stack.imgur.com/lHPpp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lHPpp.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":15695673,"reputation":1,"user_id":11325324,"display_name":"sadhana"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1554657417,"creation_date":1554655244,"answer_id":55561342,"question_id":9193228,"body_markdown":"The possible solution (Tested on **ubuntu**)\r\n\r\n1. Open Terminal type `geany .bashrc`\r\n2. Go to the top  and paste this  \r\n    `export CLASSPATH=$CLASSPATH:/web/apache-tomcat-8.5.39/lib/servlet-api.jar`\r\n3. Now save and close\r\n4. Try running the program now.","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>The possible solution (Tested on <strong>ubuntu</strong>)</p>\n\n<ol>\n<li>Open Terminal type <code>geany .bashrc</code></li>\n<li>Go to the top  and paste this<br>\n<code>export CLASSPATH=$CLASSPATH:/web/apache-tomcat-8.5.39/lib/servlet-api.jar</code></li>\n<li>Now save and close</li>\n<li>Try running the program now.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18890925,"reputation":23,"user_id":13781243,"display_name":"Prasad Kadu"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1593452031,"creation_date":1593452031,"answer_id":62643671,"question_id":9193228,"body_markdown":"**This happens because java does not provide with Servlet-api.jar to import directly, so you need to import it externally like from Tomcat , for this we need to provide the classpath of lib folder from which we will be importing the Servlet and it&#39;s related Classes.**\r\n\r\n\r\nFor Windows you can apply this method:\r\n  1. open command prompt\r\n  2. type \r\n```\r\n javac -classpath &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\*;&quot; YourFileName.java \r\n     \r\n```\r\n  3. It will take all jar files which needed for importing Servlet, HttpServlet ,etc \r\n    and compile your java file.\r\n\r\n  4. You can add multiple classpaths Eg.\r\n```\r\njavac -classpath &quot;C:\\Users\\Project1\\WEB-INF\\lib\\*; C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\*;&quot; YourFileName.java\r\n```\r\n","title":"javac command line compile error: package javax.servlet does not exist","body":"<p><strong>This happens because java does not provide with Servlet-api.jar to import directly, so you need to import it externally like from Tomcat , for this we need to provide the classpath of lib folder from which we will be importing the Servlet and it's related Classes.</strong></p>\n<p>For Windows you can apply this method:</p>\n<ol>\n<li>open command prompt</li>\n<li>type</li>\n</ol>\n<pre><code> javac -classpath &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\*;&quot; YourFileName.java \n     \n</code></pre>\n<ol start=\"3\">\n<li><p>It will take all jar files which needed for importing Servlet, HttpServlet ,etc\nand compile your java file.</p>\n</li>\n<li><p>You can add multiple classpaths Eg.</p>\n</li>\n</ol>\n<pre><code>javac -classpath &quot;C:\\Users\\Project1\\WEB-INF\\lib\\*; C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\*;&quot; YourFileName.java\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user15049586"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1617946109,"creation_date":1617946109,"answer_id":67015534,"question_id":9193228,"body_markdown":"http://www.java2s.com/Code/JarDownload/javax.servlet/javax.servlet.jar.zip\r\n\r\nDownload zip file from the location and place it into following path after unziping files\r\n\r\n%JAVA_HOME%/jre/lib/ext/&lt;place&gt;\r\n\r\nplace files in the &lt;place&gt; without any directory","title":"javac command line compile error: package javax.servlet does not exist","body":"<p><a href=\"http://www.java2s.com/Code/JarDownload/javax.servlet/javax.servlet.jar.zip\" rel=\"nofollow noreferrer\">http://www.java2s.com/Code/JarDownload/javax.servlet/javax.servlet.jar.zip</a></p>\n<p>Download zip file from the location and place it into following path after unziping files</p>\n<p>%JAVA_HOME%/jre/lib/ext/</p>\n<p>place files in the  without any directory</p>\n"},{"tags":[],"owner":{"account_id":2042955,"reputation":1341,"user_id":1823710,"accept_rate":59,"display_name":"qualebs"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677005189,"creation_date":1677005189,"answer_id":75524695,"question_id":9193228,"body_markdown":"Now that we are transitioning to from javax to jakarta namespace.\r\nI added a maven dependency \r\n\r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\nand then edited the file \r\n\r\n`nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/ServletListener.java`\r\n\r\nby changing the import\r\n\r\n`import javax.servlet.annotation.WebListener;` \r\n\r\nto \r\n\r\n`import jakarta.servlet.annotation.WebListener;\r\n`\r\nnow all my listener classes are created pre-jakartified.\r\n\r\nI hope that helps cheers!","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>Now that we are transitioning to from javax to jakarta namespace.\nI added a maven dependency</p>\n<pre><code>        &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and then edited the file</p>\n<p><code>nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/ServletListener.java</code></p>\n<p>by changing the import</p>\n<p><code>import javax.servlet.annotation.WebListener;</code></p>\n<p>to</p>\n<p><code>import jakarta.servlet.annotation.WebListener; </code>\nnow all my listener classes are created pre-jakartified.</p>\n<p>I hope that helps cheers!</p>\n"}],"owner":{"account_id":1232935,"reputation":1595,"user_id":1197136,"accept_rate":54,"display_name":"Karadous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270494,"favorite_count":0,"down_vote_count":1,"up_vote_count":79,"accepted_answer_id":9193282,"answer_count":14,"score":78,"last_activity_date":1677075233,"creation_date":1328703767,"question_id":9193228,"body_markdown":"I have a Servlet class in which I import `javax.servlet.*` and `javax.servlet.http.*`.\r\nWhen I try to compile it in command prompt I get the error\r\n\r\n&gt; package javax.servlet does not exist\r\n\r\nI use JDK 1.7.0 and Tomcat 6.0. I compile using `javac`. I am not using a build tool like Maven.","title":"javac command line compile error: package javax.servlet does not exist","body":"<p>I have a Servlet class in which I import <code>javax.servlet.*</code> and <code>javax.servlet.http.*</code>.\nWhen I try to compile it in command prompt I get the error</p>\n<blockquote>\n<p>package javax.servlet does not exist</p>\n</blockquote>\n<p>I use JDK 1.7.0 and Tomcat 6.0. I compile using <code>javac</code>. I am not using a build tool like Maven.</p>\n"},{"tags":["java","spring-boot","docker","testcontainers"],"comments":[{"owner":{"account_id":5393216,"reputation":571,"user_id":4295123,"accept_rate":69,"display_name":"Ardit Meti"},"score":0,"creation_date":1677054851,"post_id":75529947,"comment_id":133259687,"body_markdown":"Not very familiar with Testcontainers but how does the postgres container run? Are ports binded to host? Like docker run -p 52801:$port ..or you have postgres installed on host?","body":"Not very familiar with Testcontainers but how does the postgres container run? Are ports binded to host? Like docker run -p 52801:$port ..or you have postgres installed on host?"},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1677055153,"post_id":75529947,"comment_id":133259769,"body_markdown":"Are you trying to connect two containers to each other and it does not work? In this case you should use [`networks`](https://www.testcontainers.org/features/networking/#advanced-networking).","body":"Are you trying to connect two containers to each other and it does not work? In this case you should use <a href=\"https://www.testcontainers.org/features/networking/#advanced-networking\" rel=\"nofollow noreferrer\"><code>networks</code></a>."},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1677055204,"post_id":75529947,"comment_id":133259785,"body_markdown":"Also you are refering yo account service and storage service. Are those services the same or it is just copy paste error?","body":"Also you are refering yo account service and storage service. Are those services the same or it is just copy paste error?"},{"owner":{"account_id":10891141,"reputation":1976,"user_id":8006882,"accept_rate":79,"display_name":"Anna Klein"},"score":0,"creation_date":1677057649,"post_id":75529947,"comment_id":133260452,"body_markdown":"copy paste error, yes. Ok I&#39;ll have a look to your network suggestion.","body":"copy paste error, yes. Ok I&#39;ll have a look to your network suggestion."},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1677064034,"post_id":75529947,"comment_id":133262234,"body_markdown":"Can you use an in-memory database like H2, or a mock implementation of the intermediate service, instead of Testcontainers here?  That setup almost looks like you&#39;re trying to use Testcontainers to start up your entire application stack, and you might be better off actually starting the application normally using Docker Compose or similar, and then running a separate integration test.","body":"Can you use an in-memory database like H2, or a mock implementation of the intermediate service, instead of Testcontainers here?  That setup almost looks like you&#39;re trying to use Testcontainers to start up your entire application stack, and you might be better off actually starting the application normally using Docker Compose or similar, and then running a separate integration test."},{"owner":{"account_id":10891141,"reputation":1976,"user_id":8006882,"accept_rate":79,"display_name":"Anna Klein"},"score":0,"creation_date":1677064193,"post_id":75529947,"comment_id":133262276,"body_markdown":"@MichałKrzywański I&#39;ve added a network to both containers. Unfortunatly I get the same error","body":"@MichałKrzywański I&#39;ve added a network to both containers. Unfortunatly I get the same error"},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1677065918,"post_id":75529947,"comment_id":133262752,"body_markdown":"Have you also changed db host in your service to be the `alias` of the db container over this network?","body":"Have you also changed db host in your service to be the <code>alias</code> of the db container over this network?"}],"answers":[{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677074964,"creation_date":1677074964,"answer_id":75533884,"question_id":75529947,"body_markdown":"There are several things wrong in your code :\r\n- you need to connect both containers to the network\r\n- containers can be accessed over this network by the network alias which are DNS names over this network so you should use postgres container alias as host when connecting from service to this db\r\n- you should access postgres db over 5432 port and not the mapped port on the host because they communicate over the network. \r\n\r\nYou would use mapped port if you want to connect from `localhost`\r\nCheck below code with comments that should point you to right direction :\r\n````\r\n@Testcontainers\r\n@SpringBootTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\n@AutoConfigureWebTestClient\r\n@EnableAutoConfiguration\r\nclass MyServiceIntegrationTest {\r\n\r\n    private static final String ACCOUNT_SERVICE = &quot;account-service:0.0.1&quot;;\r\n    private static final int ACCOUNT_SERVICE_INTERNAL_PORT = 8099;\r\n    private static final String ACCOUNT_SERVICE_DATABASE_NAME = &quot;account-db&quot;;\r\n    private static final String DATABASE_USERNAME = &quot;admin&quot;;\r\n    private static final String DATABASE_PASSWORD = &quot;password&quot;;\r\n    //create network\r\n    private static final Network network = Network.newNetwork();\r\n\r\n    private static final String ACCOUNT_SERVICE_DB = &quot;account-service-db&quot;;\r\n    \r\n    @Container\r\n    public static PostgreSQLContainer&lt;?&gt; accountServiceDb = new PostgreSQLContainer&lt;&gt;(&quot;postgres:latest&quot;)\r\n            .withDatabaseName(ACCOUNT_SERVICE_DATABASE_NAME)\r\n            .withUsername(DATABASE_USERNAME)\r\n            .withPassword(DATABASE_PASSWORD)\r\n            //connect postgres db to network\r\n            .withNetwork(network)\r\n            //give the postgres DNS name\r\n            .withNetworkAliases(ACCOUNT_SERVICE_DB);\r\n    static GenericContainer&lt;?&gt; accountServiceContainer;\r\n\r\n    @BeforeAll\r\n    static void setup() {\r\n        final Network network = Network.newNetwork();\r\n        final var accountServiceEnv = Map.of(\r\n                &quot;R2DBC_URL&quot;, &quot;r2dbc:postgresql://&quot;\r\n                        //use db container DNS alias as host over common network\r\n                        + ACCOUNT_SERVICE_DB + &quot;:&quot;\r\n                        //here we use default postgres exposed port and not host port\r\n                        + &quot;5432&quot;\r\n                        + &quot;/&quot;\r\n                        + accountServiceDb.getDatabaseName(),\r\n                &quot;DB_USERNAME&quot;, DATABASE_USERNAME,\r\n                &quot;DB_PASSWORD&quot;, DATABASE_PASSWORD\r\n        );\r\n\r\n        accountServiceContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(ACCOUNT_SERVICE))\r\n                .withNetwork(network)\r\n                .withNetworkAliases(ACCOUNT_SERVICE)\r\n                .withEnv(accountServiceEnv)\r\n                .withExposedPorts(ACCOUNT_SERVICE_INTERNAL_PORT);\r\n\r\n        accountServiceDb.withNetwork(network);\r\n        accountServiceContainer.start();\r\n    }\r\n\r\n    @Test\r\n    void intTest() {\r\n        // todo\r\n    }\r\n\r\n````","title":"Connect a Spring-Boot Application within a Testcontainer to a Postgres DB","body":"<p>There are several things wrong in your code :</p>\n<ul>\n<li>you need to connect both containers to the network</li>\n<li>containers can be accessed over this network by the network alias which are DNS names over this network so you should use postgres container alias as host when connecting from service to this db</li>\n<li>you should access postgres db over 5432 port and not the mapped port on the host because they communicate over the network.</li>\n</ul>\n<p>You would use mapped port if you want to connect from <code>localhost</code>\nCheck below code with comments that should point you to right direction :</p>\n<pre><code>@Testcontainers\n@SpringBootTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@AutoConfigureWebTestClient\n@EnableAutoConfiguration\nclass MyServiceIntegrationTest {\n\n    private static final String ACCOUNT_SERVICE = &quot;account-service:0.0.1&quot;;\n    private static final int ACCOUNT_SERVICE_INTERNAL_PORT = 8099;\n    private static final String ACCOUNT_SERVICE_DATABASE_NAME = &quot;account-db&quot;;\n    private static final String DATABASE_USERNAME = &quot;admin&quot;;\n    private static final String DATABASE_PASSWORD = &quot;password&quot;;\n    //create network\n    private static final Network network = Network.newNetwork();\n\n    private static final String ACCOUNT_SERVICE_DB = &quot;account-service-db&quot;;\n    \n    @Container\n    public static PostgreSQLContainer&lt;?&gt; accountServiceDb = new PostgreSQLContainer&lt;&gt;(&quot;postgres:latest&quot;)\n            .withDatabaseName(ACCOUNT_SERVICE_DATABASE_NAME)\n            .withUsername(DATABASE_USERNAME)\n            .withPassword(DATABASE_PASSWORD)\n            //connect postgres db to network\n            .withNetwork(network)\n            //give the postgres DNS name\n            .withNetworkAliases(ACCOUNT_SERVICE_DB);\n    static GenericContainer&lt;?&gt; accountServiceContainer;\n\n    @BeforeAll\n    static void setup() {\n        final Network network = Network.newNetwork();\n        final var accountServiceEnv = Map.of(\n                &quot;R2DBC_URL&quot;, &quot;r2dbc:postgresql://&quot;\n                        //use db container DNS alias as host over common network\n                        + ACCOUNT_SERVICE_DB + &quot;:&quot;\n                        //here we use default postgres exposed port and not host port\n                        + &quot;5432&quot;\n                        + &quot;/&quot;\n                        + accountServiceDb.getDatabaseName(),\n                &quot;DB_USERNAME&quot;, DATABASE_USERNAME,\n                &quot;DB_PASSWORD&quot;, DATABASE_PASSWORD\n        );\n\n        accountServiceContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(ACCOUNT_SERVICE))\n                .withNetwork(network)\n                .withNetworkAliases(ACCOUNT_SERVICE)\n                .withEnv(accountServiceEnv)\n                .withExposedPorts(ACCOUNT_SERVICE_INTERNAL_PORT);\n\n        accountServiceDb.withNetwork(network);\n        accountServiceContainer.start();\n    }\n\n    @Test\n    void intTest() {\n        // todo\n    }\n\n</code></pre>\n"}],"owner":{"account_id":10891141,"reputation":1976,"user_id":8006882,"accept_rate":79,"display_name":"Anna Klein"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":887,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75533884,"answer_count":1,"score":1,"last_activity_date":1677074964,"creation_date":1677054485,"question_id":75529947,"body_markdown":"currently I am testing ```MyService``` that has a dependency to the ```AccountService```. For that I use ```@Testcontainers```\r\n\r\n\r\n[![setup][1]][1]\r\n\r\nI face the problem that the ```AccountService``` can&#39;t connect to the database on my mac and I cant figure out why since the db is available and I can connect to it manually. I tried to connect MyService (not in a container, from IntelliJ) to the DB and it works fine. \r\n\r\nI assume a configuration issue on the docker container for the AccountService due to this error: (see stacktrace below) \r\n\r\n```Connection refused: localhost/127.0.0.1:52801```\r\n \r\nwhere you hopefully can help me to solve this.\r\n\r\n**My test code**\r\n\r\n        @Testcontainers\r\n        @SpringBootTest\r\n        @AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\n        @AutoConfigureWebTestClient\r\n        @EnableAutoConfiguration\r\n        class MyServiceIntegrationTest {\r\n        \r\n            private static final String ACCOUNT_SERVICE = &quot;account-service:0.0.1&quot;;\r\n            private static final int ACCOUNT_SERVICE_INTERNAL_PORT = 8099;\r\n            private static final String ACCOUNT_SERVICE_DATABASE_NAME = &quot;account-db&quot;;\r\n            private static final String DATABASE_USERNAME = &quot;admin&quot;;\r\n            private static final String DATABASE_PASSWORD = &quot;password&quot;;\r\n        \r\n            @Container\r\n            public static PostgreSQLContainer&lt;?&gt; accountServiceDb = new PostgreSQLContainer&lt;&gt;(&quot;postgres:latest&quot;)\r\n                    .withDatabaseName(ACCOUNT_SERVICE_DATABASE_NAME)\r\n                    .withUsername(DATABASE_USERNAME)\r\n                    .withPassword(DATABASE_PASSWORD);\r\n            static GenericContainer&lt;?&gt; accountServiceContainer;\r\n      \r\n            @BeforeAll\r\n            static void setup() {\r\n            try (final Network network = Network.newNetwork()) {\r\n                final var accountServiceEnv = Map.of(\r\n                        &quot;R2DBC_URL&quot;, &quot;r2dbc:postgresql://&quot;\r\n                                + accountServiceDb.getHost() + &quot;:&quot;\r\n                                + accountServiceDb.getFirstMappedPort()\r\n                                + &quot;/&quot;\r\n                                + accountServiceDb.getDatabaseName(),\r\n                        &quot;DB_USERNAME&quot;, DATABASE_USERNAME,\r\n                        &quot;DB_PASSWORD&quot;, DATABASE_PASSWORD\r\n                );\r\n        \r\n                accountServiceContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(ACCOUNT_SERVICE))\r\n                        .withNetwork(network)\r\n                        .withNetworkAliases(ACCOUNT_SERVICE)\r\n                        .withEnv(accountServiceEnv)\r\n                        .withExposedPorts(ACCOUNT_SERVICE_INTERNAL_PORT);\r\n                   \r\n                accountServiceDb.withNetwork(network);\r\n                accountServiceContainer.start();\r\n            }\r\n        }\r\n            \r\n            @Test\r\n            void intTest(){\r\n                // todo\r\n            }\r\n        }\r\n\r\n**Stacktrace from the AccountService**\r\n\r\n    2023-02-22 09:16:27 2023-02-22 09:16:27.503  INFO 1 --- [           main] c.c.b.Account.AccountServiceApplication  : Starting AccountServiceApplication using Java 17.0.5 on 358da35fc9e0 with PID 1 (/service.jar started by root in /)\r\n    2023-02-22 09:16:27 2023-02-22 09:16:27.517  INFO 1 --- [           main] c.c.b.Account.AccountServiceApplication  : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-02-22 09:16:30 2023-02-22 09:16:30.833  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.\r\n    2023-02-22 09:16:30 2023-02-22 09:16:30.885  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 0 R2DBC repository interfaces.\r\n    2023-02-22 09:16:31 2023-02-22 09:16:31.567  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.\r\n    2023-02-22 09:16:32 2023-02-22 09:16:32.436  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 868 ms. Found 2 R2DBC repository interfaces.\r\n    2023-02-22 09:16:38 2023-02-22 09:16:38.398 ERROR 1 --- [tor-tcp-epoll-1] c.c.b.s.services.AccountBackendService   : Error by DB creation\r\n    2023-02-22 09:16:38 \r\n    2023-02-22 09:16:38 io.r2dbc.postgresql.PostgresqlConnectionFactory$PostgresConnectionException: Cannot connect to localhost/&lt;unresolved&gt;:52801\r\n    2023-02-22 09:16:38     at io.r2dbc.postgresql.PostgresqlConnectionFactory.cannotConnect(PostgresqlConnectionFactory.java:218) ~[r2dbc-postgresql-0.8.13.RELEASE.jar!/:0.8.13.RELEASE]\r\n    2023-02-22 09:16:38     at reactor.core.publisher.Mono.lambda$onErrorMap$31(Mono.java:3811) ~[reactor-core-3.4.26.jar!/:3.4.26]\r\n    2023-02-22 09:16:38     at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.4.26.jar!/:3.4.26]\r\n    2023-02-22 09:16:38     at \r\n    SHORTENED\r\n    io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    2023-02-22 09:16:38 Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: localhost/127.0.0.1:52801\r\n    2023-02-22 09:16:38 Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused\r\n    2023-02-22 09:16:38     at io.netty.channel.unix.Errors.newConnectException0(Errors.java:155) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:128) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\r\n    2023-02-22 09:16:38     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    2023-02-22 09:16:38 \r\n    2023-02-22 09:16:38 2023-02-22 09:16:38.416 ERROR 1 --- [tor-tcp-epoll-1] reactor.core.publisher.Operators         : Operator called default onErrorDropped\r\n\r\n\r\n**Dockerfile of the AccountService**\r\n\r\n    FROM secret/copenjdk17:17\r\n    \r\n    EXPOSE 8080\r\n    EXPOSE 9090\r\n    # JMX port:\r\n    EXPOSE 9998\r\n    # Java Debug port:\r\n    EXPOSE 5004\r\n    \r\n    COPY /build/libs/account-service-0.0.1.jar service.jar\r\n    \r\n    STOPSIGNAL SIGINT\r\n\r\nThanks a lot in advance!\r\n\r\n  [1]: https://i.stack.imgur.com/PweXV.png\r\n\r\n","title":"Connect a Spring-Boot Application within a Testcontainer to a Postgres DB","body":"<p>currently I am testing <code>MyService</code> that has a dependency to the <code>AccountService</code>. For that I use <code>@Testcontainers</code></p>\n<p><a href=\"https://i.stack.imgur.com/PweXV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PweXV.png\" alt=\"setup\" /></a></p>\n<p>I face the problem that the <code>AccountService</code> can't connect to the database on my mac and I cant figure out why since the db is available and I can connect to it manually. I tried to connect MyService (not in a container, from IntelliJ) to the DB and it works fine.</p>\n<p>I assume a configuration issue on the docker container for the AccountService due to this error: (see stacktrace below)</p>\n<p><code>Connection refused: localhost/127.0.0.1:52801</code></p>\n<p>where you hopefully can help me to solve this.</p>\n<p><strong>My test code</strong></p>\n<pre><code>    @Testcontainers\n    @SpringBootTest\n    @AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n    @AutoConfigureWebTestClient\n    @EnableAutoConfiguration\n    class MyServiceIntegrationTest {\n    \n        private static final String ACCOUNT_SERVICE = &quot;account-service:0.0.1&quot;;\n        private static final int ACCOUNT_SERVICE_INTERNAL_PORT = 8099;\n        private static final String ACCOUNT_SERVICE_DATABASE_NAME = &quot;account-db&quot;;\n        private static final String DATABASE_USERNAME = &quot;admin&quot;;\n        private static final String DATABASE_PASSWORD = &quot;password&quot;;\n    \n        @Container\n        public static PostgreSQLContainer&lt;?&gt; accountServiceDb = new PostgreSQLContainer&lt;&gt;(&quot;postgres:latest&quot;)\n                .withDatabaseName(ACCOUNT_SERVICE_DATABASE_NAME)\n                .withUsername(DATABASE_USERNAME)\n                .withPassword(DATABASE_PASSWORD);\n        static GenericContainer&lt;?&gt; accountServiceContainer;\n  \n        @BeforeAll\n        static void setup() {\n        try (final Network network = Network.newNetwork()) {\n            final var accountServiceEnv = Map.of(\n                    &quot;R2DBC_URL&quot;, &quot;r2dbc:postgresql://&quot;\n                            + accountServiceDb.getHost() + &quot;:&quot;\n                            + accountServiceDb.getFirstMappedPort()\n                            + &quot;/&quot;\n                            + accountServiceDb.getDatabaseName(),\n                    &quot;DB_USERNAME&quot;, DATABASE_USERNAME,\n                    &quot;DB_PASSWORD&quot;, DATABASE_PASSWORD\n            );\n    \n            accountServiceContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(ACCOUNT_SERVICE))\n                    .withNetwork(network)\n                    .withNetworkAliases(ACCOUNT_SERVICE)\n                    .withEnv(accountServiceEnv)\n                    .withExposedPorts(ACCOUNT_SERVICE_INTERNAL_PORT);\n               \n            accountServiceDb.withNetwork(network);\n            accountServiceContainer.start();\n        }\n    }\n        \n        @Test\n        void intTest(){\n            // todo\n        }\n    }\n</code></pre>\n<p><strong>Stacktrace from the AccountService</strong></p>\n<pre><code>2023-02-22 09:16:27 2023-02-22 09:16:27.503  INFO 1 --- [           main] c.c.b.Account.AccountServiceApplication  : Starting AccountServiceApplication using Java 17.0.5 on 358da35fc9e0 with PID 1 (/service.jar started by root in /)\n2023-02-22 09:16:27 2023-02-22 09:16:27.517  INFO 1 --- [           main] c.c.b.Account.AccountServiceApplication  : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-22 09:16:30 2023-02-22 09:16:30.833  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.\n2023-02-22 09:16:30 2023-02-22 09:16:30.885  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 0 R2DBC repository interfaces.\n2023-02-22 09:16:31 2023-02-22 09:16:31.567  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.\n2023-02-22 09:16:32 2023-02-22 09:16:32.436  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 868 ms. Found 2 R2DBC repository interfaces.\n2023-02-22 09:16:38 2023-02-22 09:16:38.398 ERROR 1 --- [tor-tcp-epoll-1] c.c.b.s.services.AccountBackendService   : Error by DB creation\n2023-02-22 09:16:38 \n2023-02-22 09:16:38 io.r2dbc.postgresql.PostgresqlConnectionFactory$PostgresConnectionException: Cannot connect to localhost/&lt;unresolved&gt;:52801\n2023-02-22 09:16:38     at io.r2dbc.postgresql.PostgresqlConnectionFactory.cannotConnect(PostgresqlConnectionFactory.java:218) ~[r2dbc-postgresql-0.8.13.RELEASE.jar!/:0.8.13.RELEASE]\n2023-02-22 09:16:38     at reactor.core.publisher.Mono.lambda$onErrorMap$31(Mono.java:3811) ~[reactor-core-3.4.26.jar!/:3.4.26]\n2023-02-22 09:16:38     at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.4.26.jar!/:3.4.26]\n2023-02-22 09:16:38     at \nSHORTENED\nio.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-02-22 09:16:38 Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: localhost/127.0.0.1:52801\n2023-02-22 09:16:38 Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused\n2023-02-22 09:16:38     at io.netty.channel.unix.Errors.newConnectException0(Errors.java:155) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:128) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.unix.Socket.finishConnect(Socket.java:359) ~[netty-transport-native-unix-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:489) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397) ~[netty-transport-classes-epoll-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar!/:4.1.87.Final]\n2023-02-22 09:16:38     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-02-22 09:16:38 \n2023-02-22 09:16:38 2023-02-22 09:16:38.416 ERROR 1 --- [tor-tcp-epoll-1] reactor.core.publisher.Operators         : Operator called default onErrorDropped\n</code></pre>\n<p><strong>Dockerfile of the AccountService</strong></p>\n<pre><code>FROM secret/copenjdk17:17\n\nEXPOSE 8080\nEXPOSE 9090\n# JMX port:\nEXPOSE 9998\n# Java Debug port:\nEXPOSE 5004\n\nCOPY /build/libs/account-service-0.0.1.jar service.jar\n\nSTOPSIGNAL SIGINT\n</code></pre>\n<p>Thanks a lot in advance!</p>\n"},{"tags":["java","maven","exe","launch4j"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1677077232,"post_id":75533859,"comment_id":133266389,"body_markdown":"Sorry but there is no such thing as a machine independent `.exe` file.","body":"Sorry but there is no such thing as a machine independent <code>.exe</code> file."},{"owner":{"account_id":17518664,"reputation":67,"user_id":12705184,"display_name":"Sepi"},"score":1,"creation_date":1677078880,"post_id":75533859,"comment_id":133267003,"body_markdown":"@StephenC I mean, that you can run Sample.exe on machine without java","body":"@StephenC I mean, that you can run Sample.exe on machine without java"}],"owner":{"account_id":17518664,"reputation":67,"user_id":12705184,"display_name":"Sepi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677074837,"creation_date":1677074837,"question_id":75533859,"body_markdown":"I am trying create independent on machine java version .exe from .jar using maven.\r\nFor packaging .jar using maven-assembly-plugin\r\n\r\n            &lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.4.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;descriptorRefs&gt;\r\n\t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n\t\t\t\t\t&lt;/descriptorRefs&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;target\\jar-with-dependencies&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.ge.Sample&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;make-assembly&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nThen for creating java image I using exec-maven-plugin\r\n\r\n            &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;jlink&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;exec&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;executable&gt;jlink&lt;/executable&gt;\r\n\t\t\t\t\t\t\t&lt;workingDirectory&gt;${project.build.directory}/jre-image&lt;/workingDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--no-header-files&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--strip-debug&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--no-man-pages&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--compress=2&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--add-modules&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;java.base,java.compiler,java.datatransfer,java.desktop,java.logging,java.management,java.naming,java.rmi,java.security.sasl,java.sql,java.xml&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;--output&lt;/argument&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;${project.build.directory}/jre&lt;/argument&gt;\r\n\t\t\t\t\t\t\t&lt;/arguments&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nAnd on the end, for creating .exe using launch4j plugin\r\n\r\n            &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.akathist.maven.plugins.launch4j&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;launch4j-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;l4j-clui&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;launch4j&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;headerType&gt;console&lt;/headerType&gt;\r\n\t\t\t\t\t\t\t&lt;outfile&gt;target\\application\\Sample.exe&lt;/outfile&gt;\r\n\t\t\t\t\t\t\t&lt;jar&gt;target\\jar-with-dependencies\\Sample-jar-with-dependencies.jar&lt;/jar&gt;\r\n\t\t\t\t\t\t\t&lt;errTitle&gt;encc&lt;/errTitle&gt;\r\n\t\t\t\t\t\t\t&lt;classPath&gt;\r\n\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.ge.Sample&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;preCp&gt;target\\jre\\lib\\*&lt;/preCp&gt;\r\n\t\t\t\t\t\t\t&lt;/classPath&gt;\r\n\t\t\t\t\t\t\t&lt;jre&gt;\r\n\t\t\t\t\t\t\t\t&lt;path&gt;target\\jre&lt;/path&gt;\r\n\t\t\t\t\t\t\t\t&lt;minVersion&gt;17.0.6&lt;/minVersion&gt;\r\n\t\t\t\t\t\t\t\t&lt;requiresJdk&gt;true&lt;/requiresJdk&gt;\r\n\t\t\t\t\t\t\t\t&lt;initialHeapSize&gt;256&lt;/initialHeapSize&gt;\r\n\t\t\t\t\t\t\t\t&lt;maxHeapSize&gt;1024&lt;/maxHeapSize&gt;\r\n\t\t\t\t\t\t\t&lt;/jre&gt;\r\n\t\t\t\t\t\t\t&lt;versionInfo&gt;\r\n\t\t\t\t\t\t\t\t&lt;fileVersion&gt;0.0.0.1&lt;/fileVersion&gt;\r\n\t\t\t\t\t\t\t\t&lt;fileDescription&gt;a description&lt;/fileDescription&gt;\r\n\t\t\t\t\t\t\t\t&lt;copyright&gt;Company&lt;/copyright&gt;\r\n\t\t\t\t\t\t\t\t&lt;productVersion&gt;0.0.0.1&lt;/productVersion&gt;\r\n\t\t\t\t\t\t\t\t&lt;productName&gt;E-N-C-C&lt;/productName&gt;\r\n\t\t\t\t\t\t\t\t&lt;internalName&gt;ccne&lt;/internalName&gt;\r\n\t\t\t\t\t\t\t\t&lt;originalFilename&gt;original.exe&lt;/originalFilename&gt;\r\n\t\t\t\t\t\t\t&lt;/versionInfo&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nWith this configuration, I can create .exe but it is still dependent on java in machine. \r\nCan you give me a advice for creating .exe dependent only on jLink created java image? ","title":"Creating .exe using Lauch4j and jLink from .jar","body":"<p>I am trying create independent on machine java version .exe from .jar using maven.\nFor packaging .jar using maven-assembly-plugin</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n                &lt;outputDirectory&gt;target\\jar-with-dependencies&lt;/outputDirectory&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.ge.Sample&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>Then for creating java image I using exec-maven-plugin</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;jlink&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;exec&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;executable&gt;jlink&lt;/executable&gt;\n                        &lt;workingDirectory&gt;${project.build.directory}/jre-image&lt;/workingDirectory&gt;\n                        &lt;arguments&gt;\n                            &lt;argument&gt;--no-header-files&lt;/argument&gt;\n                            &lt;argument&gt;--strip-debug&lt;/argument&gt;\n                            &lt;argument&gt;--no-man-pages&lt;/argument&gt;\n                            &lt;argument&gt;--compress=2&lt;/argument&gt;\n                            &lt;argument&gt;--add-modules&lt;/argument&gt;\n                            &lt;argument&gt;java.base,java.compiler,java.datatransfer,java.desktop,java.logging,java.management,java.naming,java.rmi,java.security.sasl,java.sql,java.xml&lt;/argument&gt;\n                            &lt;argument&gt;--output&lt;/argument&gt;\n                            &lt;argument&gt;${project.build.directory}/jre&lt;/argument&gt;\n                        &lt;/arguments&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>And on the end, for creating .exe using launch4j plugin</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;com.akathist.maven.plugins.launch4j&lt;/groupId&gt;\n            &lt;artifactId&gt;launch4j-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;l4j-clui&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;launch4j&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;headerType&gt;console&lt;/headerType&gt;\n                        &lt;outfile&gt;target\\application\\Sample.exe&lt;/outfile&gt;\n                        &lt;jar&gt;target\\jar-with-dependencies\\Sample-jar-with-dependencies.jar&lt;/jar&gt;\n                        &lt;errTitle&gt;encc&lt;/errTitle&gt;\n                        &lt;classPath&gt;\n                            &lt;mainClass&gt;com.ge.Sample&lt;/mainClass&gt;\n                            &lt;preCp&gt;target\\jre\\lib\\*&lt;/preCp&gt;\n                        &lt;/classPath&gt;\n                        &lt;jre&gt;\n                            &lt;path&gt;target\\jre&lt;/path&gt;\n                            &lt;minVersion&gt;17.0.6&lt;/minVersion&gt;\n                            &lt;requiresJdk&gt;true&lt;/requiresJdk&gt;\n                            &lt;initialHeapSize&gt;256&lt;/initialHeapSize&gt;\n                            &lt;maxHeapSize&gt;1024&lt;/maxHeapSize&gt;\n                        &lt;/jre&gt;\n                        &lt;versionInfo&gt;\n                            &lt;fileVersion&gt;0.0.0.1&lt;/fileVersion&gt;\n                            &lt;fileDescription&gt;a description&lt;/fileDescription&gt;\n                            &lt;copyright&gt;Company&lt;/copyright&gt;\n                            &lt;productVersion&gt;0.0.0.1&lt;/productVersion&gt;\n                            &lt;productName&gt;E-N-C-C&lt;/productName&gt;\n                            &lt;internalName&gt;ccne&lt;/internalName&gt;\n                            &lt;originalFilename&gt;original.exe&lt;/originalFilename&gt;\n                        &lt;/versionInfo&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>With this configuration, I can create .exe but it is still dependent on java in machine.\nCan you give me a advice for creating .exe dependent only on jLink created java image?</p>\n"},{"tags":["java","caching","infinispan","spring-cache"],"comments":[{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":0,"creation_date":1676972433,"post_id":75511129,"comment_id":133239895,"body_markdown":"What exception are you getting? The Infinispan cache extends the `Map` interface and `entrySet()` returns a set of `Map.Entry` which have access to `getKey()` and `getValue()`. Also, I tried `cache.getNativeCache().forEach((key, value) -&gt; System.out.printf(&quot;%s = %s\\n&quot;, key, value));` and it works fine for me","body":"What exception are you getting? The Infinispan cache extends the <code>Map</code> interface and <code>entrySet()</code> returns a set of <code>Map.Entry</code> which have access to <code>getKey()</code> and <code>getValue()</code>. Also, I tried <code>cache.getNativeCache().forEach((key, value) -&gt; System.out.printf(&quot;%s = %s\\n&quot;, key, value));</code> and it works fine for me"},{"owner":{"account_id":8363529,"reputation":215,"user_id":6281005,"accept_rate":0,"display_name":"Faheem Sultan"},"score":0,"creation_date":1676981630,"post_id":75511129,"comment_id":133242640,"body_markdown":"@pruivo `cache.getNativeCache().forEach(key, value)` worked for me. can you explain which interface has this method `(key,value)` that you provided anonymous implementation for. also please put your comment as an answer so i can accept it","body":"@pruivo <code>cache.getNativeCache().forEach(key, value)</code> worked for me. can you explain which interface has this method <code>(key,value)</code> that you provided anonymous implementation for. also please put your comment as an answer so i can accept it"}],"answers":[{"tags":[],"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677074754,"creation_date":1677074754,"answer_id":75533850,"question_id":75511129,"body_markdown":"The Infinispan Cache interface extends Java&#39;s [Map][1] interface. You can use any of the methods available to iterate over the Cache content.\r\n\r\nThe `forEach()` method accepts a `BiConsumer`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#forEach(java.util.function.BiConsumer)","title":"How to Loop through InfiniSpan Cache entries","body":"<p>The Infinispan Cache interface extends Java's <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#forEach(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\">Map</a> interface. You can use any of the methods available to iterate over the Cache content.</p>\n<p>The <code>forEach()</code> method accepts a <code>BiConsumer</code>.</p>\n"}],"owner":{"account_id":8363529,"reputation":215,"user_id":6281005,"accept_rate":0,"display_name":"Faheem Sultan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75533850,"answer_count":1,"score":0,"last_activity_date":1677074754,"creation_date":1676906566,"question_id":75511129,"body_markdown":"i am using infinispan cache and have to loop through all the entries in a cache and find out cache keys and values. i&#39;ve found that it can be done through entrySet using below approach \r\n\r\n    cache.entrySet().forEach(entry -&gt; System.out.printf(&quot;%s = %s\\n&quot;, entry.getKey(), entry.getValue()));\r\n\r\nbut it looks like the class implementing cache functionality doesn&#39;t support `entry.getKey()` and `entry.getValue()` methods\r\n\r\nbelow is the screenshot of the code in debug mode, it looks like the instance `nativeCache` is of class `org.infinispan.cache.impl.EncoderCache` which has a private inner class `EntryWrapper` which has methods to `getKey` and `getValue` , but since it&#39;s a private class, i can&#39;t access it. \r\n\r\n \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TBkye.png\r\n  [2]: https://i.stack.imgur.com/28EF1.png\r\n\r\nis there a way for me to getKeys and Values of all the entries in a cache?","title":"How to Loop through InfiniSpan Cache entries","body":"<p>i am using infinispan cache and have to loop through all the entries in a cache and find out cache keys and values. i've found that it can be done through entrySet using below approach</p>\n<pre><code>cache.entrySet().forEach(entry -&gt; System.out.printf(&quot;%s = %s\\n&quot;, entry.getKey(), entry.getValue()));\n</code></pre>\n<p>but it looks like the class implementing cache functionality doesn't support <code>entry.getKey()</code> and <code>entry.getValue()</code> methods</p>\n<p>below is the screenshot of the code in debug mode, it looks like the instance <code>nativeCache</code> is of class <code>org.infinispan.cache.impl.EncoderCache</code> which has a private inner class <code>EntryWrapper</code> which has methods to <code>getKey</code> and <code>getValue</code> , but since it's a private class, i can't access it.</p>\n<p><a href=\"https://i.stack.imgur.com/TBkye.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TBkye.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/28EF1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/28EF1.png\" alt=\"enter image description here\" /></a></p>\n<p>is there a way for me to getKeys and Values of all the entries in a cache?</p>\n"},{"tags":["java","spring","file"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1677074783,"post_id":75533780,"comment_id":133265528,"body_markdown":"Don&#39;t. If the file is a resource on the classpath, it should be unchanging (and treated as such). If the file is supposed to be changed, it shouldn&#39;t be on the classpath. You might get away with it with some ugly hacks, but fundamentally you&#39;re fighting the system. Just place the file *anywhere else* and reload it as required.","body":"Don&#39;t. If the file is a resource on the classpath, it should be unchanging (and treated as such). If the file is supposed to be changed, it shouldn&#39;t be on the classpath. You might get away with it with some ugly hacks, but fundamentally you&#39;re fighting the system. Just place the file <i>anywhere else</i> and reload it as required."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1677077258,"post_id":75533780,"comment_id":133266400,"body_markdown":"Use the resource on the class path as Initial template for a real file, with `Files.copy`.","body":"Use the resource on the class path as Initial template for a real file, with <code>Files.copy</code>."},{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":0,"creation_date":1677083071,"post_id":75533780,"comment_id":133268456,"body_markdown":"What about putting the file in the application&#39;s &quot;app data&quot; folder? Here&#39;s where IntelliJ stores its files on [macOS, Windows, and Linux](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs)","body":"What about putting the file in the application&#39;s &quot;app data&quot; folder? Here&#39;s where IntelliJ stores its files on <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs\" rel=\"nofollow noreferrer\">macOS, Windows, and Linux</a>"}],"owner":{"account_id":23317104,"reputation":1,"user_id":17395567,"display_name":"Dmitry-Dsafgi-Bachinin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677074374,"creation_date":1677074374,"question_id":75533780,"body_markdown":"I have a txt file, that is located on classpath directory. This txt is converted into List in program during app starts. At some time I have to make some changes in this file and this changes must be appear in my List in the program. I try to load new data from file but all time i receive old values when I receive a message from Listener what file was modified. Is it impossible to read modified data from that file in runtime? I can&#39;t find any solution\r\n\r\n\r\n\r\n\r\nI tried Files.readAllLines and resourceLoader.getResource but both of them have the same problem\r\n```\r\n@Log4j2\r\n@Service\r\npublic class AicService implements FileChangeListener {\r\n    @Value(&quot;${.delay}&quot;)\r\n    private Duration delay;\r\n    @Value(&quot;${filePath}&quot;)\r\n    private Resource filePath;\r\n    private List&lt;ClientValue&gt; clients;\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @PostConstruct\r\n    public void init() throws IOException {\r\n        readFile();\r\n    }\r\n\r\n    @Override\r\n    public void onChange(Set&lt;ChangedFiles&gt; changeSet) {\r\n        for(ChangedFiles cfiles : changeSet) {\r\n            for(ChangedFile cfile: cfiles.getFiles()) {\r\n                if(!isLocked(cfile.getFile().toPath())) {\r\n                    try {\r\n                        readFile();\r\n                    } catch (IOException e) {\r\n                        log.error(e);\r\n                    }\r\n                    log.debug(&quot;Operation: &#39;{}&#39; on file: &#39;{}&#39; is done&quot;, cfile.getType(),                 cfile.getFile().getName());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private boolean isLocked(Path path) {\r\n        try (FileChannel ch = FileChannel.open(path, StandardOpenOption.WRITE); FileLock lock =  ch.tryLock()) {\r\n            return lock == null;\r\n        } catch (IOException e) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public void readFile() throws IOException {\r\n        try {\r\n            List&lt;ClientValue&gt; clients = new ArrayList&lt;&gt;();\r\n            Files.readAllLines(Paths.get(filePath.getURI())).stream()\r\n                    .skip(1)\r\n                    .map(line -&gt; line.split(&quot;;&quot;))\r\n                    .map(this::createClientValue)\r\n                    .forEach(clients::add);\r\n\r\n            this.clients = clients;\r\n            log.debug(&quot;Client values: {}&quot;, this.clients);\r\n        } catch (IOException e) {\r\n            log.error(&quot;It was not possible to get the list of client values: clients.txt&quot;, e);\r\n            throw new IllegalStateException();\r\n        }\r\n    }\r\n\r\n    private ClientValue createClientValue(String[] columns) {\r\n        int i = 0;\r\n        return ClientValue.builder()\r\n                .name(columns[i++])\r\n                .surname(columns[i++])\r\n                .adddress(columns[i])\r\n                .build();\r\n    }`\r\n```\r\n","title":"Read .txt file that was modified oustide app in runtime","body":"<p>I have a txt file, that is located on classpath directory. This txt is converted into List in program during app starts. At some time I have to make some changes in this file and this changes must be appear in my List in the program. I try to load new data from file but all time i receive old values when I receive a message from Listener what file was modified. Is it impossible to read modified data from that file in runtime? I can't find any solution</p>\n<p>I tried Files.readAllLines and resourceLoader.getResource but both of them have the same problem</p>\n<pre><code>@Log4j2\n@Service\npublic class AicService implements FileChangeListener {\n    @Value(&quot;${.delay}&quot;)\n    private Duration delay;\n    @Value(&quot;${filePath}&quot;)\n    private Resource filePath;\n    private List&lt;ClientValue&gt; clients;\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @PostConstruct\n    public void init() throws IOException {\n        readFile();\n    }\n\n    @Override\n    public void onChange(Set&lt;ChangedFiles&gt; changeSet) {\n        for(ChangedFiles cfiles : changeSet) {\n            for(ChangedFile cfile: cfiles.getFiles()) {\n                if(!isLocked(cfile.getFile().toPath())) {\n                    try {\n                        readFile();\n                    } catch (IOException e) {\n                        log.error(e);\n                    }\n                    log.debug(&quot;Operation: '{}' on file: '{}' is done&quot;, cfile.getType(),                 cfile.getFile().getName());\n                }\n            }\n        }\n    }\n\n    private boolean isLocked(Path path) {\n        try (FileChannel ch = FileChannel.open(path, StandardOpenOption.WRITE); FileLock lock =  ch.tryLock()) {\n            return lock == null;\n        } catch (IOException e) {\n            return true;\n        }\n    }\n\n    public void readFile() throws IOException {\n        try {\n            List&lt;ClientValue&gt; clients = new ArrayList&lt;&gt;();\n            Files.readAllLines(Paths.get(filePath.getURI())).stream()\n                    .skip(1)\n                    .map(line -&gt; line.split(&quot;;&quot;))\n                    .map(this::createClientValue)\n                    .forEach(clients::add);\n\n            this.clients = clients;\n            log.debug(&quot;Client values: {}&quot;, this.clients);\n        } catch (IOException e) {\n            log.error(&quot;It was not possible to get the list of client values: clients.txt&quot;, e);\n            throw new IllegalStateException();\n        }\n    }\n\n    private ClientValue createClientValue(String[] columns) {\n        int i = 0;\n        return ClientValue.builder()\n                .name(columns[i++])\n                .surname(columns[i++])\n                .adddress(columns[i])\n                .build();\n    }`\n</code></pre>\n"},{"tags":["java","go","rust","file-upload","checksum"],"comments":[{"owner":{"account_id":3599873,"reputation":9274,"user_id":3003401,"display_name":"Cerberus"},"score":0,"creation_date":1676945704,"post_id":75515595,"comment_id":133235004,"body_markdown":"This question is currently too broad, I&#39;m afraid. At the very least, what are the methods for hashing/uploading you&#39;re using? Depending on what their API requires, this might either be possible (with the bytes manually pulled from the stream and copied into a couple of sinks) or not.","body":"This question is currently too broad, I&#39;m afraid. At the very least, what are the methods for hashing/uploading you&#39;re using? Depending on what their API requires, this might either be possible (with the bytes manually pulled from the stream and copied into a couple of sinks) or not."},{"owner":{"account_id":7198509,"reputation":10324,"user_id":5496433,"accept_rate":87,"display_name":"BallpointBen"},"score":0,"creation_date":1676946627,"post_id":75515595,"comment_id":133235147,"body_markdown":"So the goal is to read a stream progressively, say 1KB at a time, and pipe that 1KB into three other readers that will produce the hashes?","body":"So the goal is to read a stream progressively, say 1KB at a time, and pipe that 1KB into three other readers that will produce the hashes?"},{"owner":{"account_id":9665595,"reputation":545,"user_id":7172191,"display_name":"Reed Chan"},"score":0,"creation_date":1676949201,"post_id":75515595,"comment_id":133235420,"body_markdown":"@BallpointBen Yes, the goal can be understood as having two main points: first, to avoid reading or caching the file in memory, which would result in an OOM error; and second, to reuse the stream, as it will be used multiple times to calculate.","body":"@BallpointBen Yes, the goal can be understood as having two main points: first, to avoid reading or caching the file in memory, which would result in an OOM error; and second, to reuse the stream, as it will be used multiple times to calculate."},{"owner":{"account_id":9665595,"reputation":545,"user_id":7172191,"display_name":"Reed Chan"},"score":0,"creation_date":1676949301,"post_id":75515595,"comment_id":133235436,"body_markdown":"@Cerberus I have slightly modified the description, defining the upload method as using `curl -T 5G.txt` to upload the file, and the server side is an HTTP Server implemented in Rust, which could be actix-web or hyper.","body":"@Cerberus I have slightly modified the description, defining the upload method as using <code>curl -T 5G.txt</code> to upload the file, and the server side is an HTTP Server implemented in Rust, which could be actix-web or hyper."}],"answers":[{"tags":[],"owner":{"account_id":5849718,"reputation":8030,"user_id":6274355,"display_name":"drewtato"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676950384,"creation_date":1676950384,"answer_id":75516061,"question_id":75515595,"body_markdown":"There&#39;s no such thing as doing calculations without putting the file in memory, at least on standard hardware. The solution is reading it in chunks with an implementer of [`BufRead`][1], such as [`BufReader`][2].\r\n\r\nThis is fully possible in synchronous rust, but since you specified tokio, I made this async, using tokio&#39;s IO types and traits. You can make the same thing synchronously with the standard library&#39;s IO types and traits, which are named similarly.\r\n\r\nFirst, a function that takes a reader, updates a slice of hash functions, and then writes those bytes to a writer. This is essentially [`tokio::io::copy_buf`][3] but with hash functions in the middle.\r\n\r\n```rs\r\npub async fn calculate_hashes&lt;R, W&gt;(\r\n    mut reader: R,\r\n    hashers: &amp;mut [&amp;mut dyn Update],\r\n    mut writer: W,\r\n) -&gt; Result&lt;(), std::io::Error&gt;\r\nwhere\r\n    R: AsyncBufRead + Unpin,\r\n    W: AsyncWrite + Unpin,\r\n{\r\n    loop {\r\n        let part = reader.fill_buf().await?;\r\n        if part.is_empty() {\r\n            break;\r\n        }\r\n\r\n        for hasher in hashers.iter_mut() {\r\n            hasher.update(part);\r\n        }\r\n\r\n        writer.write_all(part).await?;\r\n\r\n        let part_len = part.len();\r\n        reader.consume(part_len);\r\n    }\r\n\r\n    Ok(())\r\n}\r\n```\r\n\r\nThis uses a trait from the [digest][4] crate: [`Update`][5]. Luckily, there&#39;s already implementations of your specific hash functions that use digest: [md-5][6], [sha1][7], and [sha2][8] (make sure you use versions that depend on the same version of digest, which conveniently are all 0.10.5 at the moment).\r\n\r\nHere&#39;s that function in use:\r\n\r\n```rs\r\npub async fn md5_sha1_sha256&lt;R, W&gt;(\r\n    reader: R,\r\n    writer: W,\r\n) -&gt; Result&lt;(Md5, Sha1, Sha256), std::io::Error&gt;\r\nwhere\r\n    R: AsyncBufRead + Unpin,\r\n    W: AsyncWrite + Unpin,\r\n{\r\n    let mut md5_hasher = Md5::new();\r\n    let mut sha1_hasher = Sha1::new();\r\n    let mut sha256_hasher = Sha256::new();\r\n\r\n    calculate_hashes(\r\n        reader,\r\n        &amp;mut [&amp;mut md5_hasher, &amp;mut sha1_hasher, &amp;mut sha256_hasher],\r\n        writer,\r\n    )\r\n    .await?;\r\n\r\n    Ok((md5_hasher, sha1_hasher, sha256_hasher))\r\n}\r\n```\r\n\r\nIf you want to go further, you could make a wrapper type that implements `AsyncWrite` for all `Update` types, and then you wouldn&#39;t even need to separate `hashers` and `writer`. You could also go the other way and split `hashers` into your specific hash function types or a specific number of generic arguments, which avoids `dyn`. I used a `dyn` slice here so that it is helpful to others in less specific situations.\r\n\r\n[Here&#39;s a link to the whole thing on playground.][9] It doesn&#39;t compile because of missing dependencies, though.\r\n\r\n\r\n  [1]: https://doc.rust-lang.org/std/io/trait.BufRead.html\r\n  [2]: https://doc.rust-lang.org/std/io/struct.BufReader.html\r\n  [3]: https://docs.rs/tokio/1.25.0/tokio/io/fn.copy_buf.html\r\n  [4]: https://docs.rs/digest/0.10.5/digest/index.html\r\n  [5]: https://docs.rs/digest/0.10.5/digest/trait.Update.html\r\n  [6]: https://docs.rs/md-5/0.10.5/md5/index.html\r\n  [7]: https://docs.rs/sha1/0.10.5/sha1/index.html\r\n  [8]: https://docs.rs/sha2/0.10.5/sha2/index.html\r\n  [9]: https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=d05693b933ef05eb923d354a00f3a0a3","title":"Is it possible to reuse an HTTP Request Body multiple times without reading it into memory?","body":"<p>There's no such thing as doing calculations without putting the file in memory, at least on standard hardware. The solution is reading it in chunks with an implementer of <a href=\"https://doc.rust-lang.org/std/io/trait.BufRead.html\" rel=\"nofollow noreferrer\"><code>BufRead</code></a>, such as <a href=\"https://doc.rust-lang.org/std/io/struct.BufReader.html\" rel=\"nofollow noreferrer\"><code>BufReader</code></a>.</p>\n<p>This is fully possible in synchronous rust, but since you specified tokio, I made this async, using tokio's IO types and traits. You can make the same thing synchronously with the standard library's IO types and traits, which are named similarly.</p>\n<p>First, a function that takes a reader, updates a slice of hash functions, and then writes those bytes to a writer. This is essentially <a href=\"https://docs.rs/tokio/1.25.0/tokio/io/fn.copy_buf.html\" rel=\"nofollow noreferrer\"><code>tokio::io::copy_buf</code></a> but with hash functions in the middle.</p>\n<pre class=\"lang-rs prettyprint-override\"><code>pub async fn calculate_hashes&lt;R, W&gt;(\n    mut reader: R,\n    hashers: &amp;mut [&amp;mut dyn Update],\n    mut writer: W,\n) -&gt; Result&lt;(), std::io::Error&gt;\nwhere\n    R: AsyncBufRead + Unpin,\n    W: AsyncWrite + Unpin,\n{\n    loop {\n        let part = reader.fill_buf().await?;\n        if part.is_empty() {\n            break;\n        }\n\n        for hasher in hashers.iter_mut() {\n            hasher.update(part);\n        }\n\n        writer.write_all(part).await?;\n\n        let part_len = part.len();\n        reader.consume(part_len);\n    }\n\n    Ok(())\n}\n</code></pre>\n<p>This uses a trait from the <a href=\"https://docs.rs/digest/0.10.5/digest/index.html\" rel=\"nofollow noreferrer\">digest</a> crate: <a href=\"https://docs.rs/digest/0.10.5/digest/trait.Update.html\" rel=\"nofollow noreferrer\"><code>Update</code></a>. Luckily, there's already implementations of your specific hash functions that use digest: <a href=\"https://docs.rs/md-5/0.10.5/md5/index.html\" rel=\"nofollow noreferrer\">md-5</a>, <a href=\"https://docs.rs/sha1/0.10.5/sha1/index.html\" rel=\"nofollow noreferrer\">sha1</a>, and <a href=\"https://docs.rs/sha2/0.10.5/sha2/index.html\" rel=\"nofollow noreferrer\">sha2</a> (make sure you use versions that depend on the same version of digest, which conveniently are all 0.10.5 at the moment).</p>\n<p>Here's that function in use:</p>\n<pre class=\"lang-rs prettyprint-override\"><code>pub async fn md5_sha1_sha256&lt;R, W&gt;(\n    reader: R,\n    writer: W,\n) -&gt; Result&lt;(Md5, Sha1, Sha256), std::io::Error&gt;\nwhere\n    R: AsyncBufRead + Unpin,\n    W: AsyncWrite + Unpin,\n{\n    let mut md5_hasher = Md5::new();\n    let mut sha1_hasher = Sha1::new();\n    let mut sha256_hasher = Sha256::new();\n\n    calculate_hashes(\n        reader,\n        &amp;mut [&amp;mut md5_hasher, &amp;mut sha1_hasher, &amp;mut sha256_hasher],\n        writer,\n    )\n    .await?;\n\n    Ok((md5_hasher, sha1_hasher, sha256_hasher))\n}\n</code></pre>\n<p>If you want to go further, you could make a wrapper type that implements <code>AsyncWrite</code> for all <code>Update</code> types, and then you wouldn't even need to separate <code>hashers</code> and <code>writer</code>. You could also go the other way and split <code>hashers</code> into your specific hash function types or a specific number of generic arguments, which avoids <code>dyn</code>. I used a <code>dyn</code> slice here so that it is helpful to others in less specific situations.</p>\n<p><a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=d05693b933ef05eb923d354a00f3a0a3\" rel=\"nofollow noreferrer\">Here's a link to the whole thing on playground.</a> It doesn't compile because of missing dependencies, though.</p>\n"},{"tags":[],"owner":{"account_id":9665595,"reputation":545,"user_id":7172191,"display_name":"Reed Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677074341,"creation_date":1677074341,"answer_id":75533774,"question_id":75515595,"body_markdown":"Here is one implementation idea in Go: Calculate the Checksum of the Request Body while writing it to the S3 storage.\r\n\r\n```go\r\n// ...\r\n\r\nmd5Hasher := md5.New()\r\nsha1Hasher := sha1.New()\r\nsha256Hasher := sha256.New()\r\n\r\ntype Checksum struct {\r\n\tMd5    string `json:&quot;md5&quot;`\r\n\tSha1   string `json:&quot;sha1&quot;`\r\n\tSha256 string `json:&quot;sha256&quot;`\r\n}\r\n\r\nhasher := io.MultiWriter(md5Hasher, sha1Hasher, sha256Hasher)\r\ntr := io.TeeReader(r.Body, hasher)\r\n\r\n// Upload the file to S3.\r\n_, err := uploader.Upload(&amp;s3manager.UploadInput{\r\n    Bucket: aws.String(&quot;bucket&quot;),\r\n    Key:    aws.String(&quot;key&quot;),\r\n    Body:   tr,\r\n})\r\nif err != nil {\r\n    log.Printf(&quot;failed to upload file, %v&quot;, err)\r\n    w.WriteHeader(http.StatusInternalServerError)\r\n    return\r\n}\r\n\r\nchecksum := Checksum{\r\n\tMd5:    fmt.Sprintf(&quot;%x&quot;, md5Hasher.Sum(nil)),\r\n\tSha1:   fmt.Sprintf(&quot;%x&quot;, sha1Hasher.Sum(nil)),\r\n\tSha256: fmt.Sprintf(&quot;%x&quot;, sha256Hasher.Sum(nil)),\r\n}\r\n\r\nrespBody, _ := json.MarshalIndent(checksum, &quot;&quot;, &quot;  &quot;)\r\nfmt.Printf(&quot;%s\\n&quot;, respBody)\r\n\r\nw.Write(respBody)\r\n```\r\n\r\nBut now I am thinking, can I calculate the Checksum first through `io.MultiWriter` and then decide whether to upload the Request Body. But at this point, it seems there is no good way to use a Request Body that has already been read as an upload logic without reading it into memory or writing it to a temporary file.","title":"Is it possible to reuse an HTTP Request Body multiple times without reading it into memory?","body":"<p>Here is one implementation idea in Go: Calculate the Checksum of the Request Body while writing it to the S3 storage.</p>\n<pre class=\"lang-golang prettyprint-override\"><code>// ...\n\nmd5Hasher := md5.New()\nsha1Hasher := sha1.New()\nsha256Hasher := sha256.New()\n\ntype Checksum struct {\n    Md5    string `json:&quot;md5&quot;`\n    Sha1   string `json:&quot;sha1&quot;`\n    Sha256 string `json:&quot;sha256&quot;`\n}\n\nhasher := io.MultiWriter(md5Hasher, sha1Hasher, sha256Hasher)\ntr := io.TeeReader(r.Body, hasher)\n\n// Upload the file to S3.\n_, err := uploader.Upload(&amp;s3manager.UploadInput{\n    Bucket: aws.String(&quot;bucket&quot;),\n    Key:    aws.String(&quot;key&quot;),\n    Body:   tr,\n})\nif err != nil {\n    log.Printf(&quot;failed to upload file, %v&quot;, err)\n    w.WriteHeader(http.StatusInternalServerError)\n    return\n}\n\nchecksum := Checksum{\n    Md5:    fmt.Sprintf(&quot;%x&quot;, md5Hasher.Sum(nil)),\n    Sha1:   fmt.Sprintf(&quot;%x&quot;, sha1Hasher.Sum(nil)),\n    Sha256: fmt.Sprintf(&quot;%x&quot;, sha256Hasher.Sum(nil)),\n}\n\nrespBody, _ := json.MarshalIndent(checksum, &quot;&quot;, &quot;  &quot;)\nfmt.Printf(&quot;%s\\n&quot;, respBody)\n\nw.Write(respBody)\n</code></pre>\n<p>But now I am thinking, can I calculate the Checksum first through <code>io.MultiWriter</code> and then decide whether to upload the Request Body. But at this point, it seems there is no good way to use a Request Body that has already been read as an upload logic without reading it into memory or writing it to a temporary file.</p>\n"}],"owner":{"account_id":9665595,"reputation":545,"user_id":7172191,"display_name":"Reed Chan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677074341,"creation_date":1676943332,"question_id":75515595,"body_markdown":"My requirement is a large file upload, using `curl -T &lt;file&gt;`, the server side is an HTTP Server in Rust, the implementation can be `actix-web` (or `hyper` if other implementations are more suitable), using `HTTP/1.1`. In `HTTP/1.1`, the server can only read the file upload data stream once, and I want to calculate the file&#39;s `MD5`, `SHA-1` and `SHA-256` (or `BLAKE3`) without reading the file data stream into memory, and then upload it to S3. If there is a solution for parallel calculation, it will be better, but it may be more complex, the key is still to reuse the stream.\r\n\r\nIt is best not to use a `channel` to implement it, as the stream will flow through multiple `channel` to calculate the Checksum, which may have a lower performance than reusing the stream to calculate at the same time.\r\n\r\nThis needs to be based on the Rust 2021 Edition, `actix-web` 4.x version (the latest is 4.3.0), and if `tokio` is used, it must be at least 1.0.0+ (I am currently 1.25.0). This is because the compatibility of library versions in Rust is too poor, and there may be API incompatibilities between each minor version.\r\n\r\nMay I ask if my requirement can be implemented using Rust? In Go, it seems that there is no better solution besides `io.Pipe`, but the performance of `io.Pipe` does not look good.\r\n\r\nThank you very much for your advice and patience!\r\n\r\n\r\n----------\r\n\r\nUpdate: You can use either Go or Java for this requirement.","title":"Is it possible to reuse an HTTP Request Body multiple times without reading it into memory?","body":"<p>My requirement is a large file upload, using <code>curl -T &lt;file&gt;</code>, the server side is an HTTP Server in Rust, the implementation can be <code>actix-web</code> (or <code>hyper</code> if other implementations are more suitable), using <code>HTTP/1.1</code>. In <code>HTTP/1.1</code>, the server can only read the file upload data stream once, and I want to calculate the file's <code>MD5</code>, <code>SHA-1</code> and <code>SHA-256</code> (or <code>BLAKE3</code>) without reading the file data stream into memory, and then upload it to S3. If there is a solution for parallel calculation, it will be better, but it may be more complex, the key is still to reuse the stream.</p>\n<p>It is best not to use a <code>channel</code> to implement it, as the stream will flow through multiple <code>channel</code> to calculate the Checksum, which may have a lower performance than reusing the stream to calculate at the same time.</p>\n<p>This needs to be based on the Rust 2021 Edition, <code>actix-web</code> 4.x version (the latest is 4.3.0), and if <code>tokio</code> is used, it must be at least 1.0.0+ (I am currently 1.25.0). This is because the compatibility of library versions in Rust is too poor, and there may be API incompatibilities between each minor version.</p>\n<p>May I ask if my requirement can be implemented using Rust? In Go, it seems that there is no better solution besides <code>io.Pipe</code>, but the performance of <code>io.Pipe</code> does not look good.</p>\n<p>Thank you very much for your advice and patience!</p>\n<hr />\n<p>Update: You can use either Go or Java for this requirement.</p>\n"},{"tags":["java","redis"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1677074070,"post_id":75533572,"comment_id":133265293,"body_markdown":"The short answer is, &quot;no.&quot; Redis is a key/value store with lots of advantages for specific situations, but value querying is not one of them.","body":"The short answer is, &quot;no.&quot; Redis is a key/value store with lots of advantages for specific situations, but value querying is not one of them."},{"owner":{"account_id":7027398,"reputation":21375,"user_id":5384363,"accept_rate":64,"display_name":"for_stack"},"score":0,"creation_date":1677128189,"post_id":75533572,"comment_id":133277712,"body_markdown":"You&#39;ve already posted a similar question. Check the comment I made, and use a sorted set.","body":"You&#39;ve already posted a similar question. Check the comment I made, and use a sorted set."}],"owner":{"account_id":1410257,"reputation":2118,"user_id":1337007,"accept_rate":72,"display_name":"ghostrider"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677074017,"answer_count":0,"score":0,"last_activity_date":1677074113,"creation_date":1677073421,"question_id":75533572,"body_markdown":"I am using `Elastic cache` and `redis` in my project. I have the cache where `key` is `String` and `Employee` object as `value`. `Employee` class is as below. Is there any way to `query redis` such that it returns `employee` whose `startrange` and `endrange` fulfill the criteria : `startrange&lt;input&lt;endrange.` Where `input` will be passed to the query. \r\n\r\n\r\n**Employee**\r\n\r\n    int startRange;\r\n    int endRange;\r\n\r\n\r\n**Redis Entries**\r\n\r\n    1   Employee{startRange=12300 ,endRange=12399 }\r\n    2   Employee{startRange=45600 ,endRange=45699 }\r\n    3   Employee{startRange=78900 ,endRange=78999 }\r\n\r\n**Input**: 12345\r\n\r\n**Output** \r\n\r\n    1   Employee{startRange=12300 ,endRange=12399 }\r\n\r\n","title":"Apply range on the values of redis cache","body":"<p>I am using <code>Elastic cache</code> and <code>redis</code> in my project. I have the cache where <code>key</code> is <code>String</code> and <code>Employee</code> object as <code>value</code>. <code>Employee</code> class is as below. Is there any way to <code>query redis</code> such that it returns <code>employee</code> whose <code>startrange</code> and <code>endrange</code> fulfill the criteria : <code>startrange&lt;input&lt;endrange.</code> Where <code>input</code> will be passed to the query.</p>\n<p><strong>Employee</strong></p>\n<pre><code>int startRange;\nint endRange;\n</code></pre>\n<p><strong>Redis Entries</strong></p>\n<pre><code>1   Employee{startRange=12300 ,endRange=12399 }\n2   Employee{startRange=45600 ,endRange=45699 }\n3   Employee{startRange=78900 ,endRange=78999 }\n</code></pre>\n<p><strong>Input</strong>: 12345</p>\n<p><strong>Output</strong></p>\n<pre><code>1   Employee{startRange=12300 ,endRange=12399 }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","mockito"],"comments":[{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":1,"creation_date":1677064665,"post_id":75531901,"comment_id":133262426,"body_markdown":"Mockito is telling you it is expecting a specific `Role` instance while it&#39;s getting a different one. In your test, Mockito is expecting `roleRepository#save` to be called with `testingRole` as parameter, but the real object passed is `RoleDto.fromModel(testingRole)` which is a different one. Instead of using `testingRole` in the `when` clause, you could enter `Mockito.any(Role.class)`, or `RoleDto.fromModel(testingRole)` and it should work","body":"Mockito is telling you it is expecting a specific <code>Role</code> instance while it&#39;s getting a different one. In your test, Mockito is expecting <code>roleRepository#save</code> to be called with <code>testingRole</code> as parameter, but the real object passed is <code>RoleDto.fromModel(testingRole)</code> which is a different one. Instead of using <code>testingRole</code> in the <code>when</code> clause, you could enter <code>Mockito.any(Role.class)</code>, or <code>RoleDto.fromModel(testingRole)</code> and it should work"},{"owner":{"account_id":20519214,"reputation":69,"user_id":15059204,"display_name":"Eduardo Lopes"},"score":1,"creation_date":1677069019,"post_id":75531901,"comment_id":133263657,"body_markdown":"This solved my friend. Gracias","body":"This solved my friend. Gracias"},{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":0,"creation_date":1677074051,"post_id":75531901,"comment_id":133265287,"body_markdown":"I&#39;ve added the answer...","body":"I&#39;ve added the answer..."}],"answers":[{"tags":[],"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677074032,"creation_date":1677074032,"answer_id":75533701,"question_id":75531901,"body_markdown":"\r\nMockito is telling you it is expecting a specific `Role` instance while it&#39;s getting a different one. In your test, Mockito is expecting `roleRepository#save` to be called with `testingRole` as parameter, but the real object passed is `RoleDto.fromModel(testingRole)`, which is a different one. Instead of using `testingRole` in the `when` clause, you could enter `Mockito.any(Role.class)`, or `RoleDto.fromModel(testingRole)` and it should work","title":"Error with Mockito at Java unit test: Strict stubbing argument mismatch. Please check","body":"<p>Mockito is telling you it is expecting a specific <code>Role</code> instance while it's getting a different one. In your test, Mockito is expecting <code>roleRepository#save</code> to be called with <code>testingRole</code> as parameter, but the real object passed is <code>RoleDto.fromModel(testingRole)</code>, which is a different one. Instead of using <code>testingRole</code> in the <code>when</code> clause, you could enter <code>Mockito.any(Role.class)</code>, or <code>RoleDto.fromModel(testingRole)</code> and it should work</p>\n"}],"owner":{"account_id":20519214,"reputation":69,"user_id":15059204,"display_name":"Eduardo Lopes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75533701,"answer_count":1,"score":1,"last_activity_date":1677074032,"creation_date":1677064262,"question_id":75531901,"body_markdown":"I&#39;m developing a unit test for my membership service class.\r\nAs usual, I mocked the respective repository and I&#39;m trying to mock its method responses that are being used in my service\r\n\r\nWhen I try to mock save or saveAndFlush methods from JPARepository, I&#39;m getting the following error from Mockito:\r\n[![enter image description here][1]][1]\r\n\r\nHere&#39;s the method that I&#39;m testing which belongs to RoleService\r\n[![enter image description here][2]][2]\r\n\r\nHere&#39;s my test routine:\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Eteun.png\r\n  [2]: https://i.stack.imgur.com/14YWS.png\r\n  [3]: https://i.stack.imgur.com/AwEZa.png\r\n\r\nAny help would be awesome! Thanks in advance.","title":"Error with Mockito at Java unit test: Strict stubbing argument mismatch. Please check","body":"<p>I'm developing a unit test for my membership service class.\nAs usual, I mocked the respective repository and I'm trying to mock its method responses that are being used in my service</p>\n<p>When I try to mock save or saveAndFlush methods from JPARepository, I'm getting the following error from Mockito:\n<a href=\"https://i.stack.imgur.com/Eteun.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eteun.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's the method that I'm testing which belongs to RoleService\n<a href=\"https://i.stack.imgur.com/14YWS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/14YWS.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my test routine:\n<a href=\"https://i.stack.imgur.com/AwEZa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AwEZa.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help would be awesome! Thanks in advance.</p>\n"},{"tags":["java","android"],"owner":{"account_id":27805595,"reputation":23,"user_id":21236434,"display_name":"PewPew01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677073922,"creation_date":1677073352,"question_id":75533557,"body_markdown":"I&#39;m using Grid Layout to place buttons inside. \r\n\r\nIf i change size of text inside of button - it shifts up\r\n\r\nUsing this code :\r\n\r\n```\r\nDrawable top = getDrawable(R.drawable.orb);\r\nmyButton.setCompoundDrawablesWithIntrinsicBounds(null, top , null, null);\r\n```\r\nIs also result that Button shifts up for like 1/2 of it size.\r\n\r\nIf i try to set the text on the bottom of button with next code:\r\n```\r\nmyButton.setText(&quot;test&quot;);\r\nmyButton.setTextColor(Color.parseColor(&quot;#FFFFFF&quot;));\r\nmyButton.setGravity(Gravity.BOTTOM);\r\n```\r\nIt also shifts up on 1/2 of its size.\r\n\r\nChanging `textSize` is also have same result. \r\n\r\nWhat i do wrong? How to fix that? \r\n![example](https://www.hiveworkshop.com/attachments/111-png.426113/)\r\n","title":"Grid Layout, changing button properties result in shifting positions (which is wrong)","body":"<p>I'm using Grid Layout to place buttons inside.</p>\n<p>If i change size of text inside of button - it shifts up</p>\n<p>Using this code :</p>\n<pre><code>Drawable top = getDrawable(R.drawable.orb);\nmyButton.setCompoundDrawablesWithIntrinsicBounds(null, top , null, null);\n</code></pre>\n<p>Is also result that Button shifts up for like 1/2 of it size.</p>\n<p>If i try to set the text on the bottom of button with next code:</p>\n<pre><code>myButton.setText(&quot;test&quot;);\nmyButton.setTextColor(Color.parseColor(&quot;#FFFFFF&quot;));\nmyButton.setGravity(Gravity.BOTTOM);\n</code></pre>\n<p>It also shifts up on 1/2 of its size.</p>\n<p>Changing <code>textSize</code> is also have same result.</p>\n<p>What i do wrong? How to fix that?\n<img src=\"https://www.hiveworkshop.com/attachments/111-png.426113/\" alt=\"example\" /></p>\n"},{"tags":["java","spring","spring-data","connection-pooling"],"owner":{"account_id":6964328,"reputation":1,"user_id":5342854,"display_name":"garberfc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677073919,"creation_date":1676580531,"question_id":75477775,"body_markdown":"There seems to be plenty of examples like [Configuring a Tomcat Connection Pool in Spring Boot](https://www.baeldung.com/spring-boot-tomcat-connection-pool) that show how to create and initialize a connection pool.\r\n\r\nI have a problem though. **I can&#39;t seem to properly associate my connection pool properties to the actual connection pool!**\r\n\r\nSome specifics about versions I&#39;m using:\r\n\r\npom.xml values:\r\n\r\n```\r\n        &lt;parent&gt;\r\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n           &lt;version&gt;2.7.6&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;9.0.69&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\napplication.properties entries (*the following are test values to prove a point*):\r\n\r\n```\r\nspring.datasource.tomcat.initial-size=1\r\nspring.datasource.tomcat.max-wait=30000\r\nspring.datasource.tomcat.max-active=1\r\nspring.datasource.tomcat.max-idle=1\r\nspring.datasource.tomcat.min-idle=1\r\nspring.datasource.tomcat.default-auto-commit=false\r\n```\r\n\r\nI create my DataSource as follows:\r\n```\r\n    @Primary\r\n    @Bean\r\n    public DataSource fcstmgrdbDateSource() throws Exception {\r\n\r\n        DataSource ss =  DataSourceBuilder\r\n            .create()\r\n            .type(org.apache.tomcat.jdbc.pool.DataSource.class)\r\n            .username(username)\r\n            .password(password)\r\n            .url(&quot;jdbc:sqlserver://&quot; + dbServername + &quot;:&quot; + dbPortNumber + &quot;;databaseName=&quot; + dbDatabasename + &quot;;encrypt=true;authentication=ActiveDirectoryPassword&quot;)\r\n            .driverClassName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;)\r\n            .build();\r\n\r\n        return ss;\r\n    }\r\n```\r\nWhen I run the code in the debugger, and inspect the &quot;ss&quot; object, I don&#39;t see the connectionpool properties I&#39;ve set in my properties file.\r\n[Inspector Window](https://i.stack.imgur.com/xG6kc.png)\r\n\r\nI have some Java driver code that quickly asks for a hundred connections and they&#39;re delivered in record time. This driver is simply testing whether I&#39;m using the application.property settings or not.\r\n\r\n            \r\n\r\n\r\nI expected the driver code to shudder along granting one connection at a time. I also expected to see my testing property values in the Inspector window. What I saw was what looked like default values for the connection pool.\r\n\r\nHere&#39;s a workaround that I found that works...\r\n```\r\n\tif (ss instanceof DataSourceProxy) {\r\n\t\tDataSourceProxy dsp = (DataSourceProxy) ss;\r\n\t\tdsp.setInitialSize(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.initial-size&quot;)));\r\n\t\tdsp.setMaxWait(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-wait&quot;)));\r\n\t\tdsp.setMaxActive(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-active&quot;)));\r\n\t\tdsp.setMaxIdle(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-idle&quot;)));\r\n\t\tdsp.setMinIdle(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.min-idle&quot;)));\r\n\t\tdsp.setValidationQuery(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.validationQuery&quot;));\r\n\t\tdsp.setValidationQueryTimeout(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.validationQueryTimeout&quot;)));\r\n\t}\r\n```","title":"Spring Framework Connection Pool Properties","body":"<p>There seems to be plenty of examples like <a href=\"https://www.baeldung.com/spring-boot-tomcat-connection-pool\" rel=\"nofollow noreferrer\">Configuring a Tomcat Connection Pool in Spring Boot</a> that show how to create and initialize a connection pool.</p>\n<p>I have a problem though. <strong>I can't seem to properly associate my connection pool properties to the actual connection pool!</strong></p>\n<p>Some specifics about versions I'm using:</p>\n<p>pom.xml values:</p>\n<pre><code>        &lt;parent&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n           &lt;version&gt;2.7.6&lt;/version&gt;\n        &lt;/parent&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;9.0.69&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>application.properties entries (<em>the following are test values to prove a point</em>):</p>\n<pre><code>spring.datasource.tomcat.initial-size=1\nspring.datasource.tomcat.max-wait=30000\nspring.datasource.tomcat.max-active=1\nspring.datasource.tomcat.max-idle=1\nspring.datasource.tomcat.min-idle=1\nspring.datasource.tomcat.default-auto-commit=false\n</code></pre>\n<p>I create my DataSource as follows:</p>\n<pre><code>    @Primary\n    @Bean\n    public DataSource fcstmgrdbDateSource() throws Exception {\n\n        DataSource ss =  DataSourceBuilder\n            .create()\n            .type(org.apache.tomcat.jdbc.pool.DataSource.class)\n            .username(username)\n            .password(password)\n            .url(&quot;jdbc:sqlserver://&quot; + dbServername + &quot;:&quot; + dbPortNumber + &quot;;databaseName=&quot; + dbDatabasename + &quot;;encrypt=true;authentication=ActiveDirectoryPassword&quot;)\n            .driverClassName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;)\n            .build();\n\n        return ss;\n    }\n</code></pre>\n<p>When I run the code in the debugger, and inspect the &quot;ss&quot; object, I don't see the connectionpool properties I've set in my properties file.\n<a href=\"https://i.stack.imgur.com/xG6kc.png\" rel=\"nofollow noreferrer\">Inspector Window</a></p>\n<p>I have some Java driver code that quickly asks for a hundred connections and they're delivered in record time. This driver is simply testing whether I'm using the application.property settings or not.</p>\n<p>I expected the driver code to shudder along granting one connection at a time. I also expected to see my testing property values in the Inspector window. What I saw was what looked like default values for the connection pool.</p>\n<p>Here's a workaround that I found that works...</p>\n<pre><code>    if (ss instanceof DataSourceProxy) {\n        DataSourceProxy dsp = (DataSourceProxy) ss;\n        dsp.setInitialSize(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.initial-size&quot;)));\n        dsp.setMaxWait(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-wait&quot;)));\n        dsp.setMaxActive(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-active&quot;)));\n        dsp.setMaxIdle(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.max-idle&quot;)));\n        dsp.setMinIdle(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.min-idle&quot;)));\n        dsp.setValidationQuery(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.validationQuery&quot;));\n        dsp.setValidationQueryTimeout(Integer.parseInt(environment.getProperty(&quot;fcstmgrdb.datasource.tomcat.validationQueryTimeout&quot;)));\n    }\n</code></pre>\n"},{"tags":["python","java","flutter","algorithm","google-maps"],"answers":[{"tags":[],"owner":{"account_id":27752051,"reputation":1,"user_id":21186296,"display_name":"neutroin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676932384,"creation_date":1676932384,"answer_id":75514784,"question_id":75513985,"body_markdown":"**Try This One**\r\n\r\n    class CirclePolygon extends StatefulWidget {\r\n      @override\r\n      _CirclePolygonState createState() =&gt; _CirclePolygonState();\r\n    }\r\n    \r\n    class _CirclePolygonState extends State&lt;CirclePolygon&gt; {\r\n      LatLng _center = LatLng(37.4219999, -122.0840575); // initial center of the circle\r\n      int _points = 50; // number of points to create the polygon\r\n      double _radius = 1000.0; // radius of the circle in meters\r\n    \r\n      List&lt;LatLng&gt; _polygonPoints = &lt;LatLng&gt;[];\r\n    \r\n      @override\r\n      void initState() {\r\n        super.initState();\r\n        _calculatePoints();\r\n      }\r\n    \r\n      void _calculatePoints() {\r\n        // clear existing polygon points\r\n        _polygonPoints.clear();\r\n    \r\n        // calculate the angle between each point\r\n        final double deltaAngle = 360.0 / _points;\r\n    \r\n        // add points to the polygon\r\n        for (int i = 0; i &lt; _points; i++) {\r\n          double angle = deltaAngle * i;\r\n          double lat = _center.latitude + (_radius / 111000) * math.cos(angle * math.pi / 180.0);\r\n          double lng = _center.longitude + (_radius / (111000 * math.cos(_center.latitude * math.pi / 180.0))) * math.sin(angle * math.pi / 180.0);\r\n          _polygonPoints.add(LatLng(lat, lng));\r\n        }\r\n      }\r\n    \r\n      @override\r\n      Widget build(BuildContext context) {\r\n        return GoogleMap(\r\n          initialCameraPosition: CameraPosition(\r\n            target: _center,\r\n            zoom: 13.0,\r\n          ),\r\n          polygons: &lt;Polygon&gt;[\r\n            Polygon(\r\n              polygonId: PolygonId(&#39;circle&#39;),\r\n              points: _polygonPoints,\r\n              strokeWidth: 2,\r\n              strokeColor: Colors.red,\r\n              fillColor: Colors.red.withOpacity(0.15),\r\n            ),\r\n          ],\r\n        );\r\n      }\r\n    }\r\n\r\n","title":"connected Polygon area from 2 circles in google maps using flutter (true for any programming language)","body":"<p><strong>Try This One</strong></p>\n<pre><code>class CirclePolygon extends StatefulWidget {\n  @override\n  _CirclePolygonState createState() =&gt; _CirclePolygonState();\n}\n\nclass _CirclePolygonState extends State&lt;CirclePolygon&gt; {\n  LatLng _center = LatLng(37.4219999, -122.0840575); // initial center of the circle\n  int _points = 50; // number of points to create the polygon\n  double _radius = 1000.0; // radius of the circle in meters\n\n  List&lt;LatLng&gt; _polygonPoints = &lt;LatLng&gt;[];\n\n  @override\n  void initState() {\n    super.initState();\n    _calculatePoints();\n  }\n\n  void _calculatePoints() {\n    // clear existing polygon points\n    _polygonPoints.clear();\n\n    // calculate the angle between each point\n    final double deltaAngle = 360.0 / _points;\n\n    // add points to the polygon\n    for (int i = 0; i &lt; _points; i++) {\n      double angle = deltaAngle * i;\n      double lat = _center.latitude + (_radius / 111000) * math.cos(angle * math.pi / 180.0);\n      double lng = _center.longitude + (_radius / (111000 * math.cos(_center.latitude * math.pi / 180.0))) * math.sin(angle * math.pi / 180.0);\n      _polygonPoints.add(LatLng(lat, lng));\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return GoogleMap(\n      initialCameraPosition: CameraPosition(\n        target: _center,\n        zoom: 13.0,\n      ),\n      polygons: &lt;Polygon&gt;[\n        Polygon(\n          polygonId: PolygonId('circle'),\n          points: _polygonPoints,\n          strokeWidth: 2,\n          strokeColor: Colors.red,\n          fillColor: Colors.red.withOpacity(0.15),\n        ),\n      ],\n    );\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27752051,"reputation":1,"user_id":21186296,"display_name":"neutroin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677073862,"creation_date":1677073862,"answer_id":75533660,"question_id":75513985,"body_markdown":"    \r\n\r\n    class MyMap extends StatefulWidget {\r\n          @override\r\n          _MyMapState createState() =&gt; _MyMapState();\r\n        }\r\n        class _MyMapState extends State&lt;MyMap&gt; {\r\n          GoogleMapController _controller;\r\n        \r\n          static const LatLng _center1 = const LatLng(37.422, -122.084);\r\n          static const LatLng _center2 = const LatLng(37.45, -122.1);\r\n        \r\n          Set&lt;Polygon&gt; _polygons = {};\r\n        \r\n          void _onMapCreated(GoogleMapController controller) {\r\n            _controller = controller;\r\n        \r\n            // Define the two sets of points for the circles\r\n            List&lt;LatLng&gt; circle1Points = &lt;LatLng&gt;[];\r\n            List&lt;LatLng&gt; circle2Points = &lt;LatLng&gt;[];\r\n        \r\n            double radius = 1000; // in meters\r\n            int numberOfPoints = 50;\r\n        \r\n            for (int i = 0; i &lt; numberOfPoints; i++) {\r\n              double angle = (i * 360 / numberOfPoints) * (math.pi / 180);\r\n              double lat1 = _center1.latitude + radius * math.sin(angle);\r\n              double lng1 = _center1.longitude + radius * math.cos(angle);\r\n              double lat2 = _center2.latitude + radius * math.sin(angle);\r\n              double lng2 = _center2.longitude + radius * math.cos(angle);\r\n              circle1Points.add(LatLng(lat1, lng1));\r\n              circle2Points.add(LatLng(lat2, lng2));\r\n            }\r\n        \r\n            // Create the two polygons for the circles\r\n            Polygon circle1 = Polygon(\r\n              polygonId: PolygonId(&#39;circle1&#39;),\r\n              points: circle1Points,\r\n              strokeWidth: 2,\r\n              strokeColor: Colors.red,\r\n              fillColor: Colors.red.withOpacity(0.2),\r\n            );\r\n            Polygon circle2 = Polygon(\r\n              polygonId: PolygonId(&#39;circle2&#39;),\r\n              points: circle2Points,\r\n              strokeWidth: 2,\r\n              strokeColor: Colors.blue,\r\n              fillColor: Colors.blue.withOpacity(0.2),\r\n            );\r\n        \r\n            // Add the polygons to the set\r\n            setState(() {\r\n              _polygons.add(circle1);\r\n              _polygons.add(circle2);\r\n            });\r\n          }\r\n        \r\n          @override\r\n          Widget build(BuildContext context) {\r\n            return GoogleMap(\r\n              onMapCreated: _onMapCreated,\r\n              initialCameraPosition: CameraPosition(\r\n                target: _center1,\r\n                zoom: 13.0,\r\n              ),\r\n              polygons: _polygons,\r\n            );\r\n          }\r\n        }\r\n\r\n","title":"connected Polygon area from 2 circles in google maps using flutter (true for any programming language)","body":"<pre><code>class MyMap extends StatefulWidget {\n      @override\n      _MyMapState createState() =&gt; _MyMapState();\n    }\n    class _MyMapState extends State&lt;MyMap&gt; {\n      GoogleMapController _controller;\n    \n      static const LatLng _center1 = const LatLng(37.422, -122.084);\n      static const LatLng _center2 = const LatLng(37.45, -122.1);\n    \n      Set&lt;Polygon&gt; _polygons = {};\n    \n      void _onMapCreated(GoogleMapController controller) {\n        _controller = controller;\n    \n        // Define the two sets of points for the circles\n        List&lt;LatLng&gt; circle1Points = &lt;LatLng&gt;[];\n        List&lt;LatLng&gt; circle2Points = &lt;LatLng&gt;[];\n    \n        double radius = 1000; // in meters\n        int numberOfPoints = 50;\n    \n        for (int i = 0; i &lt; numberOfPoints; i++) {\n          double angle = (i * 360 / numberOfPoints) * (math.pi / 180);\n          double lat1 = _center1.latitude + radius * math.sin(angle);\n          double lng1 = _center1.longitude + radius * math.cos(angle);\n          double lat2 = _center2.latitude + radius * math.sin(angle);\n          double lng2 = _center2.longitude + radius * math.cos(angle);\n          circle1Points.add(LatLng(lat1, lng1));\n          circle2Points.add(LatLng(lat2, lng2));\n        }\n    \n        // Create the two polygons for the circles\n        Polygon circle1 = Polygon(\n          polygonId: PolygonId('circle1'),\n          points: circle1Points,\n          strokeWidth: 2,\n          strokeColor: Colors.red,\n          fillColor: Colors.red.withOpacity(0.2),\n        );\n        Polygon circle2 = Polygon(\n          polygonId: PolygonId('circle2'),\n          points: circle2Points,\n          strokeWidth: 2,\n          strokeColor: Colors.blue,\n          fillColor: Colors.blue.withOpacity(0.2),\n        );\n    \n        // Add the polygons to the set\n        setState(() {\n          _polygons.add(circle1);\n          _polygons.add(circle2);\n        });\n      }\n    \n      @override\n      Widget build(BuildContext context) {\n        return GoogleMap(\n          onMapCreated: _onMapCreated,\n          initialCameraPosition: CameraPosition(\n            target: _center1,\n            zoom: 13.0,\n          ),\n          polygons: _polygons,\n        );\n      }\n    }\n</code></pre>\n"}],"owner":{"account_id":14492800,"reputation":31,"user_id":10468451,"display_name":"megoan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677073862,"creation_date":1676925963,"question_id":75513985,"body_markdown":"in the google maps plugin for flutter it is posable to draw a polygon shape using a list of points.\r\nhere is an example of creating a polygon in the shape of a circle around a given center with a radius of 1000 meters using 50 points:\r\n\r\n\r\n```\r\n  @override\r\n  Widget build(BuildContext context) {\r\nfinal List&lt;LatLng&gt; polygonCoordinates1 = &lt;LatLng&gt;[];\r\nfinal int points = 50;\r\ndouble degreesPerPoint = 360 / points;\r\nfinal double radius = 1000;\r\nfinal LatLng center1 = LatLng(37.422, -122.084);\r\n\r\n  for (int i = 0; i &lt; points; i++) {\r\n      double radians = degreesPerPoint * i * Math.pi / 180;\r\n      double lat1 = center1.latitude + radius / 111000 * Math.cos(radians);\r\n      double lng1 = center1.longitude + radius / (111000 * Math.cos(center1.latitude * Math.pi / 180)) * Math.sin(radians);\r\n      polygonCoordinates1.add(LatLng(lat1, lng1));\r\n    }\r\n Polygon circle1 = Polygon(\r\n      polygonId: PolygonId(&#39;myCircle1&#39;),\r\n      points: polygonCoordinates1,\r\n      strokeColor: Colors.red,\r\n      strokeWidth: 2,\r\n      fillColor: Colors.blue.withOpacity(0.5),\r\n    );\r\n\r\n   return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text(widget.title),\r\n      ),\r\n      body: Center(\r\n        child: GoogleMap(\r\n          polygons: &lt;Polygon&gt;{ circle1},\r\n          initialCameraPosition: const CameraPosition(\r\n            target: LatLng(37.422, -122.084),\r\n            zoom: 15,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n}\r\n  \r\n```\r\n\r\nmy problem is when trying to create a single polygon using 2 or more centers. in other words as if trying to show an area a user covered while walking.\r\n\r\n\r\ncombining all points of both circles isn&#39;t working. it is also drawing the overlapping points. how do I get a list of points in the right order that aren&#39;t overlapping? ","title":"connected Polygon area from 2 circles in google maps using flutter (true for any programming language)","body":"<p>in the google maps plugin for flutter it is posable to draw a polygon shape using a list of points.\nhere is an example of creating a polygon in the shape of a circle around a given center with a radius of 1000 meters using 50 points:</p>\n<pre><code>  @override\n  Widget build(BuildContext context) {\nfinal List&lt;LatLng&gt; polygonCoordinates1 = &lt;LatLng&gt;[];\nfinal int points = 50;\ndouble degreesPerPoint = 360 / points;\nfinal double radius = 1000;\nfinal LatLng center1 = LatLng(37.422, -122.084);\n\n  for (int i = 0; i &lt; points; i++) {\n      double radians = degreesPerPoint * i * Math.pi / 180;\n      double lat1 = center1.latitude + radius / 111000 * Math.cos(radians);\n      double lng1 = center1.longitude + radius / (111000 * Math.cos(center1.latitude * Math.pi / 180)) * Math.sin(radians);\n      polygonCoordinates1.add(LatLng(lat1, lng1));\n    }\n Polygon circle1 = Polygon(\n      polygonId: PolygonId('myCircle1'),\n      points: polygonCoordinates1,\n      strokeColor: Colors.red,\n      strokeWidth: 2,\n      fillColor: Colors.blue.withOpacity(0.5),\n    );\n\n   return Scaffold(\n      appBar: AppBar(\n        title: Text(widget.title),\n      ),\n      body: Center(\n        child: GoogleMap(\n          polygons: &lt;Polygon&gt;{ circle1},\n          initialCameraPosition: const CameraPosition(\n            target: LatLng(37.422, -122.084),\n            zoom: 15,\n          ),\n        ),\n      ),\n    );\n}\n  \n</code></pre>\n<p>my problem is when trying to create a single polygon using 2 or more centers. in other words as if trying to show an area a user covered while walking.</p>\n<p>combining all points of both circles isn't working. it is also drawing the overlapping points. how do I get a list of points in the right order that aren't overlapping?</p>\n"},{"tags":["java","android","garbage-collection","android-volley","mmap"],"owner":{"account_id":22448250,"reputation":1,"user_id":16651867,"display_name":"Raz Gavrieli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677073641,"creation_date":1677073641,"question_id":75533606,"body_markdown":"Thanks for reading. \r\n\r\nI am getting a weird mmap failure after a while. While running, the following function is being repeated 4 times a second:\r\n\r\n```\r\n   public void sendLocationData(int id, double latitude, double longitude, float speed, double gForceValues) {\r\n        // Create a JSON object with the location and g-force data\r\n        JSONObject locationData = new JSONObject();\r\n        try {\r\n            locationData.put(&quot;id&quot;, id);\r\n            locationData.put(&quot;latitude&quot;, latitude);\r\n            locationData.put(&quot;longitude&quot;, longitude);\r\n            locationData.put(&quot;speed&quot;, speed);\r\n\r\n            locationData.put(&quot;gForce&quot;, gforceValue);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n            return;\r\n        }\r\n\r\n        // Send an HTTP POST request with the location and g-force data in the request body\r\n        gforceValue = -1;\r\n        RequestQueue queue = Volley.newRequestQueue(context.getApplicationContext());\r\n        JsonObjectRequest request = new JsonObjectRequest(Request.Method.POST, this.url, locationData,\r\n                response -&gt; {\r\n                    Log.d(&quot;HTTP success&quot;, response.toString());\r\n                },\r\n                error -&gt; {\r\n                    // Request failed, show an error message or take some other action\r\n                    Log.e(&quot;HTTP Error&quot;, error.toString());\r\n                }\r\n        );\r\n        queue.add(request);\r\n        request.markDelivered();\r\n    }\r\n```\r\n\r\n\r\nAfter a few minutes I get mmap failure:\r\n```\r\nD/GPSLocationSender: 20230222_153810Sending location and g-force data to server: 37.421998333333335, -122.084, 0.0, 1.000342965917872\r\nW/.app: type=1400 audit(0.0:46): avc: denied { mmap_zero } for scontext=u:r:untrusted_app:s0:c159,c256,c512,c768 tcontext=u:r:untrusted_app:s0:c159,c256,c512,c768 tclass=memprotect permissive=0 app=com.app\r\nD/HTTP&#160;success: {&quot;failed&quot;:false}\r\nI/scudo: Scudo ERROR: internal map or unmap failure\r\nI/scudo: --------- beginning of crash\r\nA/libc: Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 7838 (RenderThread), pid 7816 (.app)\r\n```\r\n\r\nI come from C language, and I am really frustrated because its not like I used mmap or malloc without making sure that there are no leaks. What can I do? Isn&#39;t the garbage collector should free the space at the end of the function? \r\n\r\n\r\n\r\n\r\n\r\nI have no clue what to do, thanks in advance.. ","title":"Android Java Studio - mmap failure (volley http posts)","body":"<p>Thanks for reading.</p>\n<p>I am getting a weird mmap failure after a while. While running, the following function is being repeated 4 times a second:</p>\n<pre><code>   public void sendLocationData(int id, double latitude, double longitude, float speed, double gForceValues) {\n        // Create a JSON object with the location and g-force data\n        JSONObject locationData = new JSONObject();\n        try {\n            locationData.put(&quot;id&quot;, id);\n            locationData.put(&quot;latitude&quot;, latitude);\n            locationData.put(&quot;longitude&quot;, longitude);\n            locationData.put(&quot;speed&quot;, speed);\n\n            locationData.put(&quot;gForce&quot;, gforceValue);\n        } catch (JSONException e) {\n            e.printStackTrace();\n            return;\n        }\n\n        // Send an HTTP POST request with the location and g-force data in the request body\n        gforceValue = -1;\n        RequestQueue queue = Volley.newRequestQueue(context.getApplicationContext());\n        JsonObjectRequest request = new JsonObjectRequest(Request.Method.POST, this.url, locationData,\n                response -&gt; {\n                    Log.d(&quot;HTTP success&quot;, response.toString());\n                },\n                error -&gt; {\n                    // Request failed, show an error message or take some other action\n                    Log.e(&quot;HTTP Error&quot;, error.toString());\n                }\n        );\n        queue.add(request);\n        request.markDelivered();\n    }\n</code></pre>\n<p>After a few minutes I get mmap failure:</p>\n<pre><code>D/GPSLocationSender: 20230222_153810Sending location and g-force data to server: 37.421998333333335, -122.084, 0.0, 1.000342965917872\nW/.app: type=1400 audit(0.0:46): avc: denied { mmap_zero } for scontext=u:r:untrusted_app:s0:c159,c256,c512,c768 tcontext=u:r:untrusted_app:s0:c159,c256,c512,c768 tclass=memprotect permissive=0 app=com.app\nD/HTTP success: {&quot;failed&quot;:false}\nI/scudo: Scudo ERROR: internal map or unmap failure\nI/scudo: --------- beginning of crash\nA/libc: Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 7838 (RenderThread), pid 7816 (.app)\n</code></pre>\n<p>I come from C language, and I am really frustrated because its not like I used mmap or malloc without making sure that there are no leaks. What can I do? Isn't the garbage collector should free the space at the end of the function?</p>\n<p>I have no clue what to do, thanks in advance..</p>\n"},{"tags":["java","pdf","pdf-generation","pdfbox","ghost4j"],"answers":[{"tags":[],"owner":{"account_id":2655139,"reputation":90,"user_id":2295999,"display_name":"Xondio"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1376318575,"creation_date":1376318575,"answer_id":18189965,"question_id":18189314,"body_markdown":"The way over PDFBox is a good way to avoid native bindings.\r\nTry to use the PDFImageWriter from the PDFBox, i did the same with it in a few lines and it worked perfectly.\r\nYou have to extract the PDFDocument and use the writer with it.\r\n\r\n    PDFImageWriter.write(doc, &quot;png&quot;, null, , Integer.MAX_VALUE, &quot;picture&quot;);\r\nFor all pages.\r\n\r\n    PDFImageWriter.write(doc, &quot;png&quot;, null, 0, 0, &quot;picture&quot;);\r\n\r\n \r\nSee:\r\n[PDFImageWriter Javadoc][1]\r\n\r\n\r\n  [1]: http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFImageWriter.html &quot;PDFImageWriter Javadoc&quot;","title":"Convert a PDF file to image","body":"<p>The way over PDFBox is a good way to avoid native bindings.\nTry to use the PDFImageWriter from the PDFBox, i did the same with it in a few lines and it worked perfectly.\nYou have to extract the PDFDocument and use the writer with it.</p>\n\n<pre><code>PDFImageWriter.write(doc, \"png\", null, , Integer.MAX_VALUE, \"picture\");\n</code></pre>\n\n<p>For all pages.</p>\n\n<pre><code>PDFImageWriter.write(doc, \"png\", null, 0, 0, \"picture\");\n</code></pre>\n\n<p>See:\n<a href=\"http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFImageWriter.html\" rel=\"nofollow\" title=\"PDFImageWriter Javadoc\">PDFImageWriter Javadoc</a></p>\n"},{"tags":[],"owner":{"account_id":2927949,"reputation":439,"user_id":2508903,"display_name":"Malhotra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1376365037,"creation_date":1376365037,"answer_id":18200260,"question_id":18189314,"body_markdown":"Probably you have try to convert corrupted PDF file. I&#39;ve the same errors when the PDF file contains JPXEncoded streams.","title":"Convert a PDF file to image","body":"<p>Probably you have try to convert corrupted PDF file. I've the same errors when the PDF file contains JPXEncoded streams.</p>\n"},{"tags":[],"owner":{"account_id":2872352,"reputation":266,"user_id":2465387,"display_name":"stanlyF"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1677073432,"creation_date":1376366181,"answer_id":18200396,"question_id":18189314,"body_markdown":"You can try to use **NonSequentialParser** to avoid errors with some PDF files (with incremental updates):\r\n```java\r\nPDDocument doc = PDDocument.loadNonSeq(new File(&quot;/document.pdf&quot;));\r\n```","title":"Convert a PDF file to image","body":"<p>You can try to use <strong>NonSequentialParser</strong> to avoid errors with some PDF files (with incremental updates):</p>\n<pre class=\"lang-java prettyprint-override\"><code>PDDocument doc = PDDocument.loadNonSeq(new File(&quot;/document.pdf&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1781396,"reputation":6599,"user_id":1624035,"accept_rate":65,"display_name":"UdayKiran Pulipati"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1571581716,"creation_date":1389505836,"answer_id":21071761,"question_id":18189314,"body_markdown":"You can easily convert [04-Request-Headers.pdf][1] file pages into image format.\r\n\r\nConvert all pdf pages into image format in Java using PDF Box. \r\n\r\n**Solution for Apache PDFBox 1.8.* version:**\r\n\r\nJar required [pdfbox-1.8.3.jar][2]\r\n\r\nor the maven dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n        &lt;version&gt;1.8.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Here is the solution:** \r\n\r\n    package com.pdf.pdfbox.examples;\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.util.List;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    \r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDPage;\r\n    \r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public class ConvertPDFPagesToImages {\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\tString sourceDir = &quot;C:/Documents/04-Request-Headers.pdf&quot;; // Pdf files are read from this folder\r\n    \t\tString destinationDir = &quot;C:/Documents/Converted_PdfFiles_to_Image/&quot;; // converted images from pdf document are saved here\r\n\t\t\t\r\n\t\t\tFile sourceFile = new File(sourceDir);\r\n\t\t\tFile destinationFile = new File(destinationDir);\r\n\t\t\tif (!destinationFile.exists()) {\r\n\t\t\t\tdestinationFile.mkdir();\r\n\t\t\t\tSystem.out.println(&quot;Folder Created -&gt; &quot;+ destinationFile.getAbsolutePath());\r\n\t\t\t}\r\n\t\t\tif (sourceFile.exists()) {\r\n\t\t\t\tSystem.out.println(&quot;Images copied to Folder: &quot;+ destinationFile.getName());\t\t\t\t\r\n\t\t\t\tPDDocument document = PDDocument.load(sourceDir);\r\n\t\t\t\tList&lt;PDPage&gt; list = document.getDocumentCatalog().getAllPages();\r\n\t\t\t\tSystem.out.println(&quot;Total files to be converted -&gt; &quot;+ list.size());\r\n\t\t\t\t\r\n\t\t\t\tString fileName = sourceFile.getName().replace(&quot;.pdf&quot;, &quot;&quot;);\t\t\t\t\r\n\t\t\t\tint pageNumber = 1;\r\n\t\t\t\tfor (PDPage page : list) {\r\n\t\t\t\t\tBufferedImage image = page.convertToImage();\r\n\t\t\t\t\tFile outputfile = new File(destinationDir + fileName +&quot;_&quot;+ pageNumber +&quot;.png&quot;);\r\n\t\t\t\t\tSystem.out.println(&quot;Image Created -&gt; &quot;+ outputfile.getName());\r\n\t\t\t\t\tImageIO.write(image, &quot;png&quot;, outputfile);\r\n\t\t\t\t    pageNumber++;\r\n\t\t\t\t}\r\n\t\t\t\tdocument.close();\r\n\t\t\t\tSystem.out.println(&quot;Converted Images are saved at -&gt; &quot;+ destinationFile.getAbsolutePath());\r\n\t\t\t} else {\r\n\t\t\t\tSystem.err.println(sourceFile.getName() +&quot; File not exists&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n    }\r\n\r\n\r\nPossible conversions of image into `jpg, jpeg, png, bmp, gif` format.\r\n\r\n**Note:** I mentioned the mainly used image formats.\r\n\r\n    ImageIO.write(image , &quot;jpg&quot;, new File( destinationDir +fileName+&quot;_&quot;+pageNumber+&quot;.jpg&quot; ));\r\n\tImageIO.write(image , &quot;jpeg&quot;, new File( destinationDir +fileName+&quot;_&quot;+pageNumber+&quot;.jpeg&quot; ));\r\n\tImageIO.write(image , &quot;png&quot;, new File( destinationDir +fileName+&quot;_&quot;+pageNumber+&quot;.png&quot; ));\r\n\tImageIO.write(image , &quot;bmp&quot;, new File( destinationDir +fileName+&quot;_&quot;+pageNumber+&quot;.bmp&quot; ));\r\n\tImageIO.write(image , &quot;gif&quot;, new File( destinationDir +fileName+&quot;_&quot;+pageNumber+&quot;.gif&quot; ));\r\n\r\n**Console Output:**\r\n\r\n    Images copied to Folder: Converted_PdfFiles_to_Image\r\n    Total files to be converted -&gt; 13\r\n    Aug 06, 2014 1:35:49 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_1.png\r\n    Aug 06, 2014 1:35:50 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_2.png\r\n    Aug 06, 2014 1:35:51 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_3.png\r\n    Aug 06, 2014 1:35:51 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_4.png\r\n    Aug 06, 2014 1:35:52 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_5.png\r\n    Aug 06, 2014 1:35:52 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_6.png\r\n    Aug 06, 2014 1:35:53 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_7.png\r\n    Aug 06, 2014 1:35:53 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_8.png\r\n    Aug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_9.png\r\n    Aug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_10.png\r\n    Aug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_11.png\r\n    Aug 06, 2014 1:35:55 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_12.png\r\n    Aug 06, 2014 1:35:55 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: i\r\n    Image Created -&gt; 04-Request-Headers_13.png\r\n    Converted Images are saved at -&gt; C:\\Documents\\Converted_PdfFiles_to_Image\r\n\r\n**Solution for Apache PDFBox 2.0.* version:**\r\n\r\nRequired Jars [pdfbox-2.0.16.jar][3], [fontbox-2.0.16.jar][4], [commons-logging-1.2.jar][5]\r\n\r\nor from the pom.xml dependencies\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.16&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/fontbox --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;fontbox&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.16&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/commons-logging/commons-logging --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Solution for 2.0.16 version:**\r\n\r\n    package com.pdf.pdfbox.examples;\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    \r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.rendering.ImageType;\r\n    import org.apache.pdfbox.rendering.PDFRenderer;\r\n    \r\n    /**\r\n     * \r\n     * @author venkataudaykiranp\r\n     * \r\n     * @version 2.0.16(Apache PDFBox version support)\r\n     *\r\n     */\r\n    public class ConvertPDFPagesToImages {\r\n        public static void main(String[] args) {\r\n        \ttry {\r\n        \t\tString sourceDir = &quot;C:\\\\Users\\\\venkataudaykiranp\\\\Downloads\\\\04-Request-Headers.pdf&quot;; // Pdf files are read from this folder\r\n                String destinationDir = &quot;C:\\\\Users\\\\venkataudaykiranp\\\\Downloads\\\\Converted_PdfFiles_to_Image/&quot;; // converted images from pdf document are saved here\r\n    \r\n                File sourceFile = new File(sourceDir);\r\n                File destinationFile = new File(destinationDir);\r\n                if (!destinationFile.exists()) {\r\n                    destinationFile.mkdir();\r\n                    System.out.println(&quot;Folder Created -&gt; &quot;+ destinationFile.getAbsolutePath());\r\n                }\r\n                if (sourceFile.exists()) {\r\n                    System.out.println(&quot;Images copied to Folder Location: &quot;+ destinationFile.getAbsolutePath());             \r\n                    PDDocument document = PDDocument.load(sourceFile);\r\n                    PDFRenderer pdfRenderer = new PDFRenderer(document);\r\n                    \r\n                    int numberOfPages = document.getNumberOfPages();\r\n                    System.out.println(&quot;Total files to be converting -&gt; &quot;+ numberOfPages);\r\n    \r\n                    String fileName = sourceFile.getName().replace(&quot;.pdf&quot;, &quot;&quot;);             \r\n                    String fileExtension= &quot;png&quot;;\r\n                    /*\r\n                     * 600 dpi give good image clarity but size of each image is 2x times of 300 dpi.\r\n                     * Ex:\t1. For 300dpi 04-Request-Headers_2.png expected size is 797 KB\r\n                     * \t\t2. For 600dpi 04-Request-Headers_2.png expected size is 2.42 MB\r\n                     */\r\n                    int dpi = 300;// use less dpi for to save more space in harddisk. For professional usage you can use more than 300dpi \r\n                    \r\n                    for (int i = 0; i &lt; numberOfPages; ++i) {\r\n                    \tFile outPutFile = new File(destinationDir + fileName +&quot;_&quot;+ (i+1) +&quot;.&quot;+ fileExtension);\r\n                    \tBufferedImage bImage = pdfRenderer.renderImageWithDPI(i, dpi, ImageType.RGB);\r\n                    \tImageIO.write(bImage, fileExtension, outPutFile);\r\n                    }\r\n                    \r\n                    document.close();\r\n                    System.out.println(&quot;Converted Images are saved at -&gt; &quot;+ destinationFile.getAbsolutePath());\r\n                } else {\r\n                    System.err.println(sourceFile.getName() +&quot; File not exists&quot;);\r\n                }\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n        }\r\n    }\r\n\r\n  [1]: https://app.box.com/s/gyaysqdwuvkdeckkwdbm\r\n  [2]: https://app.box.com/s/ou532ek91dy9vfp80aa4\r\n  [3]: https://app.box.com/s/tyxf04ogsc7z2s1qbkxbrosbmtdqdaze\r\n  [4]: https://app.box.com/s/9pn03f36r8r7kl1svo9hdz4gp5mpgage\r\n  [5]: https://app.box.com/s/mltd3l5t6asdl985ja58sa85bi2ulj5e\r\n","title":"Convert a PDF file to image","body":"<p>You can easily convert <a href=\"https://app.box.com/s/gyaysqdwuvkdeckkwdbm\" rel=\"noreferrer\">04-Request-Headers.pdf</a> file pages into image format.</p>\n\n<p>Convert all pdf pages into image format in Java using PDF Box. </p>\n\n<p><strong>Solution for Apache PDFBox 1.8.* version:</strong></p>\n\n<p>Jar required <a href=\"https://app.box.com/s/ou532ek91dy9vfp80aa4\" rel=\"noreferrer\">pdfbox-1.8.3.jar</a></p>\n\n<p>or the maven dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n    &lt;version&gt;1.8.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Here is the solution:</strong> </p>\n\n<pre><code>package com.pdf.pdfbox.examples;\n\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.util.List;\n\nimport javax.imageio.ImageIO;\n\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\n\n@SuppressWarnings(\"unchecked\")\npublic class ConvertPDFPagesToImages {\n    public static void main(String[] args) {\n        try {\n        String sourceDir = \"C:/Documents/04-Request-Headers.pdf\"; // Pdf files are read from this folder\n        String destinationDir = \"C:/Documents/Converted_PdfFiles_to_Image/\"; // converted images from pdf document are saved here\n\n        File sourceFile = new File(sourceDir);\n        File destinationFile = new File(destinationDir);\n        if (!destinationFile.exists()) {\n            destinationFile.mkdir();\n            System.out.println(\"Folder Created -&gt; \"+ destinationFile.getAbsolutePath());\n        }\n        if (sourceFile.exists()) {\n            System.out.println(\"Images copied to Folder: \"+ destinationFile.getName());             \n            PDDocument document = PDDocument.load(sourceDir);\n            List&lt;PDPage&gt; list = document.getDocumentCatalog().getAllPages();\n            System.out.println(\"Total files to be converted -&gt; \"+ list.size());\n\n            String fileName = sourceFile.getName().replace(\".pdf\", \"\");             \n            int pageNumber = 1;\n            for (PDPage page : list) {\n                BufferedImage image = page.convertToImage();\n                File outputfile = new File(destinationDir + fileName +\"_\"+ pageNumber +\".png\");\n                System.out.println(\"Image Created -&gt; \"+ outputfile.getName());\n                ImageIO.write(image, \"png\", outputfile);\n                pageNumber++;\n            }\n            document.close();\n            System.out.println(\"Converted Images are saved at -&gt; \"+ destinationFile.getAbsolutePath());\n        } else {\n            System.err.println(sourceFile.getName() +\" File not exists\");\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n\n<p>Possible conversions of image into <code>jpg, jpeg, png, bmp, gif</code> format.</p>\n\n<p><strong>Note:</strong> I mentioned the mainly used image formats.</p>\n\n<pre><code>ImageIO.write(image , \"jpg\", new File( destinationDir +fileName+\"_\"+pageNumber+\".jpg\" ));\nImageIO.write(image , \"jpeg\", new File( destinationDir +fileName+\"_\"+pageNumber+\".jpeg\" ));\nImageIO.write(image , \"png\", new File( destinationDir +fileName+\"_\"+pageNumber+\".png\" ));\nImageIO.write(image , \"bmp\", new File( destinationDir +fileName+\"_\"+pageNumber+\".bmp\" ));\nImageIO.write(image , \"gif\", new File( destinationDir +fileName+\"_\"+pageNumber+\".gif\" ));\n</code></pre>\n\n<p><strong>Console Output:</strong></p>\n\n<pre><code>Images copied to Folder: Converted_PdfFiles_to_Image\nTotal files to be converted -&gt; 13\nAug 06, 2014 1:35:49 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_1.png\nAug 06, 2014 1:35:50 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_2.png\nAug 06, 2014 1:35:51 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_3.png\nAug 06, 2014 1:35:51 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_4.png\nAug 06, 2014 1:35:52 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_5.png\nAug 06, 2014 1:35:52 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_6.png\nAug 06, 2014 1:35:53 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_7.png\nAug 06, 2014 1:35:53 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_8.png\nAug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_9.png\nAug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_10.png\nAug 06, 2014 1:35:54 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_11.png\nAug 06, 2014 1:35:55 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_12.png\nAug 06, 2014 1:35:55 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: i\nImage Created -&gt; 04-Request-Headers_13.png\nConverted Images are saved at -&gt; C:\\Documents\\Converted_PdfFiles_to_Image\n</code></pre>\n\n<p><strong>Solution for Apache PDFBox 2.0.* version:</strong></p>\n\n<p>Required Jars <a href=\"https://app.box.com/s/tyxf04ogsc7z2s1qbkxbrosbmtdqdaze\" rel=\"noreferrer\">pdfbox-2.0.16.jar</a>, <a href=\"https://app.box.com/s/9pn03f36r8r7kl1svo9hdz4gp5mpgage\" rel=\"noreferrer\">fontbox-2.0.16.jar</a>, <a href=\"https://app.box.com/s/mltd3l5t6asdl985ja58sa85bi2ulj5e\" rel=\"noreferrer\">commons-logging-1.2.jar</a></p>\n\n<p>or from the pom.xml dependencies</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n    &lt;version&gt;2.0.16&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/fontbox --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n    &lt;artifactId&gt;fontbox&lt;/artifactId&gt;\n    &lt;version&gt;2.0.16&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/commons-logging/commons-logging --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Solution for 2.0.16 version:</strong></p>\n\n<pre><code>package com.pdf.pdfbox.examples;\n\nimport java.awt.image.BufferedImage;\nimport java.io.File;\n\nimport javax.imageio.ImageIO;\n\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.rendering.ImageType;\nimport org.apache.pdfbox.rendering.PDFRenderer;\n\n/**\n * \n * @author venkataudaykiranp\n * \n * @version 2.0.16(Apache PDFBox version support)\n *\n */\npublic class ConvertPDFPagesToImages {\n    public static void main(String[] args) {\n        try {\n            String sourceDir = \"C:\\\\Users\\\\venkataudaykiranp\\\\Downloads\\\\04-Request-Headers.pdf\"; // Pdf files are read from this folder\n            String destinationDir = \"C:\\\\Users\\\\venkataudaykiranp\\\\Downloads\\\\Converted_PdfFiles_to_Image/\"; // converted images from pdf document are saved here\n\n            File sourceFile = new File(sourceDir);\n            File destinationFile = new File(destinationDir);\n            if (!destinationFile.exists()) {\n                destinationFile.mkdir();\n                System.out.println(\"Folder Created -&gt; \"+ destinationFile.getAbsolutePath());\n            }\n            if (sourceFile.exists()) {\n                System.out.println(\"Images copied to Folder Location: \"+ destinationFile.getAbsolutePath());             \n                PDDocument document = PDDocument.load(sourceFile);\n                PDFRenderer pdfRenderer = new PDFRenderer(document);\n\n                int numberOfPages = document.getNumberOfPages();\n                System.out.println(\"Total files to be converting -&gt; \"+ numberOfPages);\n\n                String fileName = sourceFile.getName().replace(\".pdf\", \"\");             \n                String fileExtension= \"png\";\n                /*\n                 * 600 dpi give good image clarity but size of each image is 2x times of 300 dpi.\n                 * Ex:  1. For 300dpi 04-Request-Headers_2.png expected size is 797 KB\n                 *      2. For 600dpi 04-Request-Headers_2.png expected size is 2.42 MB\n                 */\n                int dpi = 300;// use less dpi for to save more space in harddisk. For professional usage you can use more than 300dpi \n\n                for (int i = 0; i &lt; numberOfPages; ++i) {\n                    File outPutFile = new File(destinationDir + fileName +\"_\"+ (i+1) +\".\"+ fileExtension);\n                    BufferedImage bImage = pdfRenderer.renderImageWithDPI(i, dpi, ImageType.RGB);\n                    ImageIO.write(bImage, fileExtension, outPutFile);\n                }\n\n                document.close();\n                System.out.println(\"Converted Images are saved at -&gt; \"+ destinationFile.getAbsolutePath());\n            } else {\n                System.err.println(sourceFile.getName() +\" File not exists\");\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3557056,"reputation":1946,"user_id":2970553,"display_name":"Vahap Gencdal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389733439,"creation_date":1389733439,"answer_id":21123998,"question_id":18189314,"body_markdown":"     try {           \r\n                    PDDocument document = PDDocument.load(PdfInfo.getPDFWAY());\r\n                    if (document.isEncrypted()) {\r\n                        document.decrypt(PdfInfo.getPASSWORD());\r\n                    }\r\n                    if (&quot;bilevel&quot;.equalsIgnoreCase(PdfInfo.getCOLOR())) {\r\n                        PdfInfo.setIMAGETYPE( BufferedImage.TYPE_BYTE_BINARY);\r\n                    } else if (&quot;indexed&quot;.equalsIgnoreCase(PdfInfo.getCOLOR())) {\r\n                        PdfInfo.setIMAGETYPE(BufferedImage.TYPE_BYTE_INDEXED);\r\n                    } else if (&quot;gray&quot;.equalsIgnoreCase(PdfInfo.getCOLOR())) {\r\n                        PdfInfo.setIMAGETYPE(BufferedImage.TYPE_BYTE_GRAY);\r\n                    } else if (&quot;rgb&quot;.equalsIgnoreCase(PdfInfo.getCOLOR())) {\r\n                        PdfInfo.setIMAGETYPE(BufferedImage.TYPE_INT_RGB);\r\n                    } else if (&quot;rgba&quot;.equalsIgnoreCase(PdfInfo.getCOLOR())) {\r\n                        PdfInfo.setIMAGETYPE(BufferedImage.TYPE_INT_ARGB);\r\n                    } else {\r\n                        System.exit(2);\r\n                    }\r\n                    PDFImageWriter imageWriter = new PDFImageWriter();\r\n                    boolean success = imageWriter.writeImage(document, PdfInfo.getIMAGE_FORMAT(),PdfInfo.getPASSWORD(),\r\n                            PdfInfo.getSTART_PAGE(),PdfInfo.getEND_PAGE(),PdfInfo.getOUTPUT_PREFIX(),PdfInfo.getIMAGETYPE(),PdfInfo.getRESOLUTION());\r\n                    if (!success) {\r\n                        System.exit(1);\r\n                    }\r\n                    document.close();\r\n                \r\n            } catch (IOException | CryptographyException | InvalidPasswordException ex) {\r\n                Logger.getLogger(PdfToImae.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n    public class PdfInfo {\r\n        private static String PDFWAY;    \r\n        private static String OUTPUT_PREFIX;\r\n        private static String PASSWORD;\r\n        private static int START_PAGE=1;\r\n        private static int END_PAGE=Integer.MAX_VALUE;\r\n        private static String IMAGE_FORMAT=&quot;jpg&quot;;\r\n        private static String COLOR=&quot;rgb&quot;;\r\n        private static int RESOLUTION=256;\r\n        private static int IMAGETYPE=24;\r\n        private static String filename;\r\n        private static String filePath=&quot;&quot;;\r\n    }","title":"Convert a PDF file to image","body":"<pre><code> try {           \n                PDDocument document = PDDocument.load(PdfInfo.getPDFWAY());\n                if (document.isEncrypted()) {\n                    document.decrypt(PdfInfo.getPASSWORD());\n                }\n                if (\"bilevel\".equalsIgnoreCase(PdfInfo.getCOLOR())) {\n                    PdfInfo.setIMAGETYPE( BufferedImage.TYPE_BYTE_BINARY);\n                } else if (\"indexed\".equalsIgnoreCase(PdfInfo.getCOLOR())) {\n                    PdfInfo.setIMAGETYPE(BufferedImage.TYPE_BYTE_INDEXED);\n                } else if (\"gray\".equalsIgnoreCase(PdfInfo.getCOLOR())) {\n                    PdfInfo.setIMAGETYPE(BufferedImage.TYPE_BYTE_GRAY);\n                } else if (\"rgb\".equalsIgnoreCase(PdfInfo.getCOLOR())) {\n                    PdfInfo.setIMAGETYPE(BufferedImage.TYPE_INT_RGB);\n                } else if (\"rgba\".equalsIgnoreCase(PdfInfo.getCOLOR())) {\n                    PdfInfo.setIMAGETYPE(BufferedImage.TYPE_INT_ARGB);\n                } else {\n                    System.exit(2);\n                }\n                PDFImageWriter imageWriter = new PDFImageWriter();\n                boolean success = imageWriter.writeImage(document, PdfInfo.getIMAGE_FORMAT(),PdfInfo.getPASSWORD(),\n                        PdfInfo.getSTART_PAGE(),PdfInfo.getEND_PAGE(),PdfInfo.getOUTPUT_PREFIX(),PdfInfo.getIMAGETYPE(),PdfInfo.getRESOLUTION());\n                if (!success) {\n                    System.exit(1);\n                }\n                document.close();\n\n        } catch (IOException | CryptographyException | InvalidPasswordException ex) {\n            Logger.getLogger(PdfToImae.class.getName()).log(Level.SEVERE, null, ex);\n        }\npublic class PdfInfo {\n    private static String PDFWAY;    \n    private static String OUTPUT_PREFIX;\n    private static String PASSWORD;\n    private static int START_PAGE=1;\n    private static int END_PAGE=Integer.MAX_VALUE;\n    private static String IMAGE_FORMAT=\"jpg\";\n    private static String COLOR=\"rgb\";\n    private static int RESOLUTION=256;\n    private static int IMAGETYPE=24;\n    private static String filename;\n    private static String filePath=\"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3076744,"reputation":1,"user_id":2605874,"display_name":"user2605874"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519514382,"creation_date":1519513313,"answer_id":48968537,"question_id":18189314,"body_markdown":"For the error:\r\n\r\n&gt;org.apache.pdfbox.util.PDFStreamEngine processOperator INFO: unsupported/disabled operation\r\n\r\nYou need to include fontbox-1.7.1 jar in the class path apart from Apache pdfbox jar which will fix your issue as PDFBox internally uses fontbox-1.7.1","title":"Convert a PDF file to image","body":"<p>For the error:</p>\n\n<blockquote>\n  <p>org.apache.pdfbox.util.PDFStreamEngine processOperator INFO: unsupported/disabled operation</p>\n</blockquote>\n\n<p>You need to include fontbox-1.7.1 jar in the class path apart from Apache pdfbox jar which will fix your issue as PDFBox internally uses fontbox-1.7.1</p>\n"},{"tags":[],"owner":{"account_id":12688227,"reputation":65,"user_id":9219273,"display_name":"Bittu Choudhary"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1525329870,"creation_date":1525329870,"answer_id":50148523,"question_id":18189314,"body_markdown":"You can easily convert PDF into image using **PDFBox**. **renderImageWithDPI** method of **PDFRenderer** class of **PDFBox** is used to convert pdf to image.\r\n\r\n    PDDocument doc=PDDocument.load(new File(&quot;filepath/sample.pdf&quot;));\r\n    PDFRenderer pdfRenderer = new PDFRenderer(doc);\r\n    BufferedImage bffim = pdfRenderer.renderImageWithDPI(pageNo, 300, ImageType.RGB);\r\n            String fileName = &quot;image-&quot; + page + &quot;.png&quot;;\r\n            ImageIOUtil.writeImage(bim, fileName, 300);","title":"Convert a PDF file to image","body":"<p>You can easily convert PDF into image using <strong>PDFBox</strong>. <strong>renderImageWithDPI</strong> method of <strong>PDFRenderer</strong> class of <strong>PDFBox</strong> is used to convert pdf to image.</p>\n\n<pre><code>PDDocument doc=PDDocument.load(new File(\"filepath/sample.pdf\"));\nPDFRenderer pdfRenderer = new PDFRenderer(doc);\nBufferedImage bffim = pdfRenderer.renderImageWithDPI(pageNo, 300, ImageType.RGB);\n        String fileName = \"image-\" + page + \".png\";\n        ImageIOUtil.writeImage(bim, fileName, 300);\n</code></pre>\n"}],"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84631,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":21071761,"answer_count":7,"score":24,"last_activity_date":1677073432,"creation_date":1376316999,"question_id":18189314,"body_markdown":"I wanted to convert PDF document into image. I was using Ghost4j.\r\n\r\n**Problem:**  Ghost4J needs gsdll32.dll file at runtime, and I do **not** want to use the dll file.\r\n\r\n\r\n**Question 1:** is there any way, in ghost4j to convert image without the dll?\r\n\r\n**Question 2:** I found the solution in PDFBox API. `org.apache.pdfbox.pdmodel.PDPagep \r\nhave method `convertToImage()` which converts PDF page to Image format.\r\n\r\n    PDDocument doc = PDDocument.load(new File(&quot;/document.pdf&quot;));\r\n    List&lt;PDPage&gt;pages =  doc.getDocumentCatalog().getAllPages();\r\n    PDPage page = pages.get(0);\r\n    BufferedImage image =page.convertToImage();\r\n    File outputfile = new File(&quot;/image.png&quot;);\r\n    ImageIO.write(image, &quot;png&quot;, outputfile);\r\n    doc.close();\r\n\r\nI have only text on the PDF document. and I have that Exception when I run this code:\r\n\r\n\r\n    Aug 12, 2013 6:00:24 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\r\n    INFO: unsupported/disabled operation: BDC\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    \tat org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getawtFont(PDTrueTypeFont.java:481)\r\n    \tat org.apache.pdfbox.pdmodel.font.PDSimpleFont.drawString(PDSimpleFont.java:109)\r\n    \tat org.apache.pdfbox.pdfviewer.PageDrawer.processTextPosition(PageDrawer.java:235)\r\n    \tat org.apache.pdfbox.util.PDFStreamEngine.processEncodedText(PDFStreamEngine.java:496)\r\n    \tat org.apache.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:62)\r\n    \tat org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:554)\r\n    \tat org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:268)\r\n    \tat org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:235)\r\n    \tat org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:215)\r\n    \tat org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:125)\r\n    \tat org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:781)\r\n    \tat org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:712)\r\n    \tat ge.eid.esignature.adessa.pades.sign.PDFtoImage.main(PDFtoImage.java:25)\r\n    Caused by: java.lang.IllegalArgumentException\r\n    \tat java.nio.Buffer.position(Buffer.java:216)\r\n    \tat sun.font.TrueTypeFont.lookupName(TrueTypeFont.java:1153)\r\n    \tat sun.font.TrueTypeFont.getPostscriptName(TrueTypeFont.java:1205)\r\n    \tat java.awt.Font.getPSName(Font.java:1156)\r\n    \tat org.apache.pdfbox.pdmodel.font.FontManager.loadFonts(FontManager.java:101)\r\n    \tat org.apache.pdfbox.pdmodel.font.FontManager.&lt;clinit&gt;(FontManager.java:53)\r\n    \t... 13 more\r\n","title":"Convert a PDF file to image","body":"<p>I wanted to convert PDF document into image. I was using Ghost4j.</p>\n\n<p><strong>Problem:</strong>  Ghost4J needs gsdll32.dll file at runtime, and I do <strong>not</strong> want to use the dll file.</p>\n\n<p><strong>Question 1:</strong> is there any way, in ghost4j to convert image without the dll?</p>\n\n<p><strong>Question 2:</strong> I found the solution in PDFBox API. <code>org.apache.pdfbox.pdmodel.PDPagep \nhave method</code>convertToImage()` which converts PDF page to Image format.</p>\n\n<pre><code>PDDocument doc = PDDocument.load(new File(\"/document.pdf\"));\nList&lt;PDPage&gt;pages =  doc.getDocumentCatalog().getAllPages();\nPDPage page = pages.get(0);\nBufferedImage image =page.convertToImage();\nFile outputfile = new File(\"/image.png\");\nImageIO.write(image, \"png\", outputfile);\ndoc.close();\n</code></pre>\n\n<p>I have only text on the PDF document. and I have that Exception when I run this code:</p>\n\n<pre><code>Aug 12, 2013 6:00:24 PM org.apache.pdfbox.util.PDFStreamEngine processOperator\nINFO: unsupported/disabled operation: BDC\nException in thread \"main\" java.lang.ExceptionInInitializerError\n    at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getawtFont(PDTrueTypeFont.java:481)\n    at org.apache.pdfbox.pdmodel.font.PDSimpleFont.drawString(PDSimpleFont.java:109)\n    at org.apache.pdfbox.pdfviewer.PageDrawer.processTextPosition(PageDrawer.java:235)\n    at org.apache.pdfbox.util.PDFStreamEngine.processEncodedText(PDFStreamEngine.java:496)\n    at org.apache.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:62)\n    at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:554)\n    at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:268)\n    at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:235)\n    at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:215)\n    at org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:125)\n    at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:781)\n    at org.apache.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:712)\n    at ge.eid.esignature.adessa.pades.sign.PDFtoImage.main(PDFtoImage.java:25)\nCaused by: java.lang.IllegalArgumentException\n    at java.nio.Buffer.position(Buffer.java:216)\n    at sun.font.TrueTypeFont.lookupName(TrueTypeFont.java:1153)\n    at sun.font.TrueTypeFont.getPostscriptName(TrueTypeFont.java:1205)\n    at java.awt.Font.getPSName(Font.java:1156)\n    at org.apache.pdfbox.pdmodel.font.FontManager.loadFonts(FontManager.java:101)\n    at org.apache.pdfbox.pdmodel.font.FontManager.&lt;clinit&gt;(FontManager.java:53)\n    ... 13 more\n</code></pre>\n"},{"tags":["java","queue"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1611202103,"creation_date":1611202103,"answer_id":65821061,"question_id":65821024,"body_markdown":"&gt; How to enqueue without using add\r\n\r\nBy using `.offer()`.\r\n\r\n&gt; How to dequeue without using remove\r\n\r\nBy using `.poll()`.\r\n\r\nIn other words, you&#39;re doing it.\r\n\r\n&gt; I dequeue already the &quot;ball&quot; but it pops when I call the element in the queue not &quot;shoes&quot;\r\n\r\nOf course. You put your shoes in the drawer. Then, you put the ball in the drawer, which moves the shoes to the back of the cupboard. Then, you open the drawer and take the first thing your hands can touch back out, which is the ball.\r\n\r\nThe drawer now contains just the shoes.\r\n","title":"How to enqueue and dequeue without using add() and remove()?","body":"<blockquote>\n<p>How to enqueue without using add</p>\n</blockquote>\n<p>By using <code>.offer()</code>.</p>\n<blockquote>\n<p>How to dequeue without using remove</p>\n</blockquote>\n<p>By using <code>.poll()</code>.</p>\n<p>In other words, you're doing it.</p>\n<blockquote>\n<p>I dequeue already the &quot;ball&quot; but it pops when I call the element in the queue not &quot;shoes&quot;</p>\n</blockquote>\n<p>Of course. You put your shoes in the drawer. Then, you put the ball in the drawer, which moves the shoes to the back of the cupboard. Then, you open the drawer and take the first thing your hands can touch back out, which is the ball.</p>\n<p>The drawer now contains just the shoes.</p>\n"},{"tags":[],"owner":{"account_id":18674934,"reputation":41,"user_id":13612813,"display_name":"Rahul Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611202766,"creation_date":1611202766,"answer_id":65821143,"question_id":65821024,"body_markdown":"For enqueue, use offer(), and for dequeue, use poll().\r\n\r\nYou are doing it right.\r\n\r\nBut Queue follows FIFO (First In First Out).\r\n\r\n        beverages.offer(&quot;shoes&quot;);\r\n\r\n[&quot;shoes&quot;]\r\n\r\n        beverages.offer(&quot;ball&quot;); \r\n\r\n[&quot;shoes&quot;,&quot;ball&quot;]\r\n\r\n        beverages.peek();\r\n\r\ngive you &quot;shoes&quot; as it is at first.\r\n\r\n        beverages.poll();\r\n\r\nthis will remove first element i.e., &quot;shoes&quot;.\r\n\r\nNow, beverages = [&quot;ball&quot;].\r\n\r\n\r\n\r\n","title":"How to enqueue and dequeue without using add() and remove()?","body":"<p>For enqueue, use offer(), and for dequeue, use poll().</p>\n<p>You are doing it right.</p>\n<p>But Queue follows FIFO (First In First Out).</p>\n<pre><code>    beverages.offer(&quot;shoes&quot;);\n</code></pre>\n<p>[&quot;shoes&quot;]</p>\n<pre><code>    beverages.offer(&quot;ball&quot;); \n</code></pre>\n<p>[&quot;shoes&quot;,&quot;ball&quot;]</p>\n<pre><code>    beverages.peek();\n</code></pre>\n<p>give you &quot;shoes&quot; as it is at first.</p>\n<pre><code>    beverages.poll();\n</code></pre>\n<p>this will remove first element i.e., &quot;shoes&quot;.</p>\n<p>Now, beverages = [&quot;ball&quot;].</p>\n"}],"owner":{"account_id":19636834,"reputation":15,"user_id":14373959,"display_name":"codexnewbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65821061,"answer_count":2,"score":1,"last_activity_date":1677073396,"creation_date":1611201789,"question_id":65821024,"body_markdown":"****My attempt so far****\r\n\r\n    import java.util.Queue;\r\n    import java.util.LinkedList;\r\n    public class QueueQuiz {\r\n        public static void main (String [] args){\r\n            Queue beverages = new LinkedList();\r\n            beverages.offer(&quot;shoes&quot;);\r\n            beverages.offer(&quot;ball&quot;); //enqueue ball without using add()\r\n            System.out.println(beverages.peek() + &quot; is queued first.&quot;);\r\n            beverages.poll(); //dequeue ball without using remove()\r\n            System.out.println(&quot;Element(s) in the queue: &quot; + beverages);\r\n        }\r\n    }\r\n\r\n\r\nI already dequeue the &quot;ball&quot;, but it pops when I call the element in the queue not &quot;shoes&quot;. How could I fix it?","title":"How to enqueue and dequeue without using add() and remove()?","body":"<p><strong><strong>My attempt so far</strong></strong></p>\n<pre><code>import java.util.Queue;\nimport java.util.LinkedList;\npublic class QueueQuiz {\n    public static void main (String [] args){\n        Queue beverages = new LinkedList();\n        beverages.offer(&quot;shoes&quot;);\n        beverages.offer(&quot;ball&quot;); //enqueue ball without using add()\n        System.out.println(beverages.peek() + &quot; is queued first.&quot;);\n        beverages.poll(); //dequeue ball without using remove()\n        System.out.println(&quot;Element(s) in the queue: &quot; + beverages);\n    }\n}\n</code></pre>\n<p>I already dequeue the &quot;ball&quot;, but it pops when I call the element in the queue not &quot;shoes&quot;. How could I fix it?</p>\n"},{"tags":["java","maven","liquibase","liquibase-hibernate","liquibase-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":121626,"reputation":8142,"user_id":314862,"accept_rate":76,"display_name":"Dimitri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677073195,"creation_date":1677073195,"answer_id":75533519,"question_id":75522578,"body_markdown":"I finally found the cause of why `generateChangeLog` was producing an empty file and it has nothing to do with the liquibase maven plugin configuration. \r\n\r\nThe problem was the table in the schema was defined as synonyms, and they reference the real tables defined in another schema. \r\n\r\nIt seems that liquibase cannot generate changelogs based on synonyms. \r\n\r\nHope this help someone in the future","title":"Liquibase generateChangeLog generates no data at all","body":"<p>I finally found the cause of why <code>generateChangeLog</code> was producing an empty file and it has nothing to do with the liquibase maven plugin configuration.</p>\n<p>The problem was the table in the schema was defined as synonyms, and they reference the real tables defined in another schema.</p>\n<p>It seems that liquibase cannot generate changelogs based on synonyms.</p>\n<p>Hope this help someone in the future</p>\n"}],"owner":{"account_id":121626,"reputation":8142,"user_id":314862,"accept_rate":76,"display_name":"Dimitri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677073195,"creation_date":1676993378,"question_id":75522578,"body_markdown":"I want to dump some data with liquibase maven plugin from a legacy database. So I ran this command : \r\n\r\n`mvn liquibase:generateChangeLog -Poracle`. The build ran successfully with no errors, but the output file (`01-initial-data-dump`) is empty.  \r\n\r\nIt also displayed this message : \r\n\r\n\r\n    BEST PRACTICE: The changelog generated by diffChangeLog/generateChangeLog should be inspected for correctness and completeness before being deployed.\r\n    [INFO] changeSets count: 0\r\n    [INFO] No changesets to add.\r\n    Generated changelog written to /Volumes/WORKSPACE/shipping/shipping-infra/src/main/resources/db/changelogs/01-initial-data-dump.xml\r\n\r\n\r\nHere is the configuration of my pom.xml :\r\n\r\n    &lt;profile&gt;\r\n            &lt;id&gt;oracle&lt;/id&gt;\r\n            &lt;activation&gt;\r\n                &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\r\n            &lt;/activation&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;4.5.0&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;promptOnNonLocalDatabase&gt;false&lt;/promptOnNonLocalDatabase&gt;\r\n                            &lt;changeLogFile&gt;${project.basedir}/src/main/resources/db/changelog.xml&lt;/changeLogFile&gt;\r\n                            &lt;outputChangeLogFile&gt;${project.basedir}/src/main/resources/db/changelogs/01-initial-data-dump.xml&lt;/outputChangeLogFile&gt;\r\n                            &lt;diffChangeLogFile&gt;${project.basedir}/src/main/resources/db/changelogs/${maven.build.timestamp}_changelog.xml&lt;/diffChangeLogFile&gt;\r\n                            &lt;driver&gt;oracle.jdbc.OracleDriver&lt;/driver&gt;\r\n                            &lt;url&gt;&lt;/url&gt;\r\n                            &lt;username&gt;&lt;/username&gt;\r\n                            &lt;password&gt;&lt;/password&gt;\r\n                            &lt;referenceUrl&gt;hibernate:spring:com.myapp.myentities?dialect=org.hibernate.dialect.Oracle12cDialect&amp;amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;amp;hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy&lt;/referenceUrl&gt;\r\n                            &lt;verbose&gt;true&lt;/verbose&gt;\r\n                            &lt;logging&gt;debug&lt;/logging&gt;\r\n                            &lt;diffTypes&gt;data&lt;/diffTypes&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;dependencies&gt;\r\n                            &lt;dependency&gt;\r\n                                &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n                                &lt;version&gt;4.5.0&lt;/version&gt;\r\n                            &lt;/dependency&gt;\r\n                            &lt;dependency&gt;\r\n                                &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\r\n                                &lt;version&gt;4.5.0&lt;/version&gt;\r\n                            &lt;/dependency&gt;\r\n                             &lt;!-- more dependencies --&gt;\r\n                            &lt;/dependency&gt;\r\n                        &lt;/dependencies&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n\r\n\r\nI am sure that there are datas in my database but I don&#39;t know why the file is still empty. \r\n\r\nAm I missing something ? \r\n\r\n","title":"Liquibase generateChangeLog generates no data at all","body":"<p>I want to dump some data with liquibase maven plugin from a legacy database. So I ran this command :</p>\n<p><code>mvn liquibase:generateChangeLog -Poracle</code>. The build ran successfully with no errors, but the output file (<code>01-initial-data-dump</code>) is empty.</p>\n<p>It also displayed this message :</p>\n<pre><code>BEST PRACTICE: The changelog generated by diffChangeLog/generateChangeLog should be inspected for correctness and completeness before being deployed.\n[INFO] changeSets count: 0\n[INFO] No changesets to add.\nGenerated changelog written to /Volumes/WORKSPACE/shipping/shipping-infra/src/main/resources/db/changelogs/01-initial-data-dump.xml\n</code></pre>\n<p>Here is the configuration of my pom.xml :</p>\n<pre><code>&lt;profile&gt;\n        &lt;id&gt;oracle&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\n        &lt;/activation&gt;\n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n                    &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;4.5.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;promptOnNonLocalDatabase&gt;false&lt;/promptOnNonLocalDatabase&gt;\n                        &lt;changeLogFile&gt;${project.basedir}/src/main/resources/db/changelog.xml&lt;/changeLogFile&gt;\n                        &lt;outputChangeLogFile&gt;${project.basedir}/src/main/resources/db/changelogs/01-initial-data-dump.xml&lt;/outputChangeLogFile&gt;\n                        &lt;diffChangeLogFile&gt;${project.basedir}/src/main/resources/db/changelogs/${maven.build.timestamp}_changelog.xml&lt;/diffChangeLogFile&gt;\n                        &lt;driver&gt;oracle.jdbc.OracleDriver&lt;/driver&gt;\n                        &lt;url&gt;&lt;/url&gt;\n                        &lt;username&gt;&lt;/username&gt;\n                        &lt;password&gt;&lt;/password&gt;\n                        &lt;referenceUrl&gt;hibernate:spring:com.myapp.myentities?dialect=org.hibernate.dialect.Oracle12cDialect&amp;amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;amp;hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy&lt;/referenceUrl&gt;\n                        &lt;verbose&gt;true&lt;/verbose&gt;\n                        &lt;logging&gt;debug&lt;/logging&gt;\n                        &lt;diffTypes&gt;data&lt;/diffTypes&gt;\n                    &lt;/configuration&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n                            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n                            &lt;version&gt;4.5.0&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\n                            &lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\n                            &lt;version&gt;4.5.0&lt;/version&gt;\n                        &lt;/dependency&gt;\n                         &lt;!-- more dependencies --&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n</code></pre>\n<p>I am sure that there are datas in my database but I don't know why the file is still empty.</p>\n<p>Am I missing something ?</p>\n"},{"tags":["java","spring-webflux","reactive-programming"],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677073097,"creation_date":1677073097,"answer_id":75533497,"question_id":75533207,"body_markdown":"What you want to achieve is some background operation that you want to execute on another thread. So, it is possible with `subscribeOn()` and calling `subscribe()` at your background operation (which is supposed to be any `Publisher`). \r\n\r\nThen your background operation will be executed on a thread from `Scheduler` you provided to `suscribeOn()` and you will return immediately after calling `subscribe()` on that publisher.\r\n\r\n    private Mono&lt;ProcessRequest&gt; initializeProcess(List&lt;String&gt; params) {\r\n        return Mono.just(new ProcessRequest(params))\r\n                .doOnNext(processRequest -&gt;\r\n                        backgroundOperation() // Publisher - Mono or Flux\r\n                                .subscribeOn(Schedulers.boundedElastic())\r\n                                .subscribe()\r\n                );\r\n    }","title":"Performing operations after returning response Reactive Spring","body":"<p>What you want to achieve is some background operation that you want to execute on another thread. So, it is possible with <code>subscribeOn()</code> and calling <code>subscribe()</code> at your background operation (which is supposed to be any <code>Publisher</code>).</p>\n<p>Then your background operation will be executed on a thread from <code>Scheduler</code> you provided to <code>suscribeOn()</code> and you will return immediately after calling <code>subscribe()</code> on that publisher.</p>\n<pre><code>private Mono&lt;ProcessRequest&gt; initializeProcess(List&lt;String&gt; params) {\n    return Mono.just(new ProcessRequest(params))\n            .doOnNext(processRequest -&gt;\n                    backgroundOperation() // Publisher - Mono or Flux\n                            .subscribeOn(Schedulers.boundedElastic())\n                            .subscribe()\n            );\n}\n</code></pre>\n"}],"owner":{"account_id":21181428,"reputation":177,"user_id":15575750,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75533497,"answer_count":1,"score":0,"last_activity_date":1677073097,"creation_date":1677071689,"question_id":75533207,"body_markdown":"I&#39;m initializing a long process on a request on the controller. I want to create a request object with Id, Status and other data and send it as a response to the client, so client doesn&#39;t wait for the whole process. It is like\r\n\r\n    private Mono&lt;ProcessRequest&gt; initializeProcess(List&lt;String&gt; params) {\r\n        return Mono.just(new ProcessRequest(params)) // this is what I want to return\r\n            .flapMap(request -&gt; {\r\n                // this is what I want to do after returning mono of request to the client\r\n            }) \r\n    }\r\n\r\nIs it possible to do it like this way or the only option is to use some messaging like Kafka to perform computations after returning the response to the client? ","title":"Performing operations after returning response Reactive Spring","body":"<p>I'm initializing a long process on a request on the controller. I want to create a request object with Id, Status and other data and send it as a response to the client, so client doesn't wait for the whole process. It is like</p>\n<pre><code>private Mono&lt;ProcessRequest&gt; initializeProcess(List&lt;String&gt; params) {\n    return Mono.just(new ProcessRequest(params)) // this is what I want to return\n        .flapMap(request -&gt; {\n            // this is what I want to do after returning mono of request to the client\n        }) \n}\n</code></pre>\n<p>Is it possible to do it like this way or the only option is to use some messaging like Kafka to perform computations after returning the response to the client?</p>\n"},{"tags":["java","spring","model-view-controller","wildfly","overwrite"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677059887,"post_id":75530646,"comment_id":133261054,"body_markdown":"You expect us to help you find a solution for which we have no code, no configuration nor tests? That is not going to happen as we don&#39;t know what is going on. Please provide the necessary information.","body":"You expect us to help you find a solution for which we have no code, no configuration nor tests? That is not going to happen as we don&#39;t know what is going on. Please provide the necessary information."}],"answers":[{"tags":[],"owner":{"account_id":27851274,"reputation":9,"user_id":21265734,"display_name":"Hassan Darwish"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1677072651,"creation_date":1677072651,"answer_id":75533408,"question_id":75530646,"body_markdown":"thank you \r\nthis issue was happened with me\r\n\r\nif you are using web farm then do not use &quot;in proc&quot; session instead use state server\r\n\r\nyou can find it [here][1]\r\n\r\n\r\n  [1]: https://social.msdn.microsoft.com/Forums/en-US/f958cb48-1553-467b-a190-ec09b309b089/session-values-getting-overwritten-when-two-users-accessing-the-same-page-from-differnt-computer?forum=aspstatemanagement","title":"Spring application overwrite data sometimes when have many session in small amount of time","body":"<p>thank you\nthis issue was happened with me</p>\n<p>if you are using web farm then do not use &quot;in proc&quot; session instead use state server</p>\n<p>you can find it <a href=\"https://social.msdn.microsoft.com/Forums/en-US/f958cb48-1553-467b-a190-ec09b309b089/session-values-getting-overwritten-when-two-users-accessing-the-same-page-from-differnt-computer?forum=aspstatemanagement\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":4028793,"reputation":27,"user_id":3315830,"display_name":"Hassan Ali Hassan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1677072651,"creation_date":1677058221,"question_id":75530646,"body_markdown":"I have  application build by spring MVC on Wildfly \r\nthis App works find most of time - it is reservation App\r\nin race condition for 5 min \r\nI found replacement of data what does that mean \r\nit means client choose product A and he has print out from his screen \r\nbut when Administrator check it find it product B \r\n- I have made stress test on my develop  machine (JDK 8) nothing happened.  -- MY production machine (JDK 11)  \r\n- what could be the issue? any body can help ","title":"Spring application overwrite data sometimes when have many session in small amount of time","body":"<p>I have  application build by spring MVC on Wildfly\nthis App works find most of time - it is reservation App\nin race condition for 5 min\nI found replacement of data what does that mean\nit means client choose product A and he has print out from his screen\nbut when Administrator check it find it product B</p>\n<ul>\n<li>I have made stress test on my develop  machine (JDK 8) nothing happened.  -- MY production machine (JDK 11)</li>\n<li>what could be the issue? any body can help</li>\n</ul>\n"},{"tags":["java","inheritance","annotations","java-8"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1420736130,"creation_date":1420736130,"answer_id":27845452,"question_id":27841765,"body_markdown":"Please recall the documentation of [`@Inherited`](http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Inherited.html):\r\n\r\n&gt; If an Inherited meta-annotation is present on an annotation type declaration, and the user queries the annotation type on a class declaration, **and the class declaration has no annotation for this type**, then the class&#39;s superclass will automatically be queried for the annotation type.\r\n\r\nIn other words, `@Inherited` never was intended to be a feature for collecting multiple annotations on a type hierarchy. Instead, you will get the annotation of the most specific type which has an explicit annotation.\r\n\r\nIn other words, if you change your declaration to\r\n\r\n    @RepeatableAnnotation(&quot;FOO&quot;) @RepeatableAnnotation(&quot;BAR&quot;) class Base {}\r\n\r\n    @RepeatableAnnotation(&quot;C&quot;) @RepeatableAnnotation(&quot;D&quot;)\r\n    public class TestClass extends Base implements IntefaceA, IntefaceB {\r\n\r\nit won’t change the result; `FOO` and `BAR` of `Base` are not inherited by `TestClass` as it has the explicit annotation values `C` and `D`.\r\n\r\nExpanding this to the `interface` hierarchy would be awkward due to the multiple inheritance and the fact that a super-interface may turn out to be a sub-interface of another super-interface so finding the most specific one is not trivial. This differs heavily from the linear search of the superclass hierarchy.\r\n\r\nYou may encounter the situation where multiple unrelated annotated `interface`s exist but it’s not clear why this ambiguity should be resolved by joining them into one repeated annotation. This would not harmonize with the behavior in all other scenarios.\r\n\r\n---\r\nNote that the [answer you have linked](https://stackoverflow.com/a/4745820/2711488) is a bit odd as it shows code using a method annotation but method annotations are never inherited, regardless of whether you specified `@Inherited` or not (an audit tool should generate a warning when you combine `@Target(ElementType.METHOD)` with `@Inherited`, imho). `@Inherited` is relevant for type annotations only.","title":"Why can @Repeatable Annotations not be inherited from interfaces","body":"<p>Please recall the documentation of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Inherited.html\" rel=\"nofollow noreferrer\"><code>@Inherited</code></a>:</p>\n\n<blockquote>\n  <p>If an Inherited meta-annotation is present on an annotation type declaration, and the user queries the annotation type on a class declaration, <strong>and the class declaration has no annotation for this type</strong>, then the class's superclass will automatically be queried for the annotation type.</p>\n</blockquote>\n\n<p>In other words, <code>@Inherited</code> never was intended to be a feature for collecting multiple annotations on a type hierarchy. Instead, you will get the annotation of the most specific type which has an explicit annotation.</p>\n\n<p>In other words, if you change your declaration to</p>\n\n<pre><code>@RepeatableAnnotation(\"FOO\") @RepeatableAnnotation(\"BAR\") class Base {}\n\n@RepeatableAnnotation(\"C\") @RepeatableAnnotation(\"D\")\npublic class TestClass extends Base implements IntefaceA, IntefaceB {\n</code></pre>\n\n<p>it won’t change the result; <code>FOO</code> and <code>BAR</code> of <code>Base</code> are not inherited by <code>TestClass</code> as it has the explicit annotation values <code>C</code> and <code>D</code>.</p>\n\n<p>Expanding this to the <code>interface</code> hierarchy would be awkward due to the multiple inheritance and the fact that a super-interface may turn out to be a sub-interface of another super-interface so finding the most specific one is not trivial. This differs heavily from the linear search of the superclass hierarchy.</p>\n\n<p>You may encounter the situation where multiple unrelated annotated <code>interface</code>s exist but it’s not clear why this ambiguity should be resolved by joining them into one repeated annotation. This would not harmonize with the behavior in all other scenarios.</p>\n\n<hr>\n\n<p>Note that the <a href=\"https://stackoverflow.com/a/4745820/2711488\">answer you have linked</a> is a bit odd as it shows code using a method annotation but method annotations are never inherited, regardless of whether you specified <code>@Inherited</code> or not (an audit tool should generate a warning when you combine <code>@Target(ElementType.METHOD)</code> with <code>@Inherited</code>, imho). <code>@Inherited</code> is relevant for type annotations only.</p>\n"},{"tags":[],"owner":{"account_id":3145019,"reputation":11,"user_id":2659654,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677072292,"creation_date":1677072292,"answer_id":75533332,"question_id":27841765,"body_markdown":"but I found this thread searching for a similar solution. In the end I wrote this helper method:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    public @interface Labels\r\n    {\r\n        Label[] value();\r\n    }\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    @Repeatable(Labels.class)\r\n    public @interface Label\r\n    {\r\n        String value();\r\n    }\r\n\r\n    @Label(&quot;A&quot;)\r\n    class A\r\n    {\r\n    }\r\n\r\n    @Label(&quot;B&quot;)\r\n    class B extends A\r\n    {\r\n    }\r\n\r\n    @Test\r\n    void LabelStackTest()\r\n    {\r\n\r\n        var labels = ClassUtils.getAnnotatedLabels(B.class);\r\n        assertThat(labels).contains(&quot;A&quot;);\r\n        assertThat(labels).contains(&quot;B&quot;);\r\n    }\r\n\r\n    public static List&lt;String&gt; getAnnotatedLabels(Class&lt;?&gt; labeledClass)\r\n    {\r\n        var labels = new ArrayList&lt;String&gt;();\r\n\r\n        do\r\n        {\r\n            labels.addAll(Arrays.asList(labeledClass.getAnnotationsByType(Label.class))\r\n                .stream()\r\n                .map(labelAnnotations -&gt; labelAnnotations.value())\r\n                .toList());\r\n\r\n            labeledClass = labeledClass.getSuperclass();\r\n        } while (labeledClass != Object.class);\r\n\r\n        return labels;\r\n    }\r\n","title":"Why can @Repeatable Annotations not be inherited from interfaces","body":"<p>but I found this thread searching for a similar solution. In the end I wrote this helper method:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface Labels\n{\n    Label[] value();\n}\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Repeatable(Labels.class)\npublic @interface Label\n{\n    String value();\n}\n\n@Label(&quot;A&quot;)\nclass A\n{\n}\n\n@Label(&quot;B&quot;)\nclass B extends A\n{\n}\n\n@Test\nvoid LabelStackTest()\n{\n\n    var labels = ClassUtils.getAnnotatedLabels(B.class);\n    assertThat(labels).contains(&quot;A&quot;);\n    assertThat(labels).contains(&quot;B&quot;);\n}\n\npublic static List&lt;String&gt; getAnnotatedLabels(Class&lt;?&gt; labeledClass)\n{\n    var labels = new ArrayList&lt;String&gt;();\n\n    do\n    {\n        labels.addAll(Arrays.asList(labeledClass.getAnnotationsByType(Label.class))\n            .stream()\n            .map(labelAnnotations -&gt; labelAnnotations.value())\n            .toList());\n\n        labeledClass = labeledClass.getSuperclass();\n    } while (labeledClass != Object.class);\n\n    return labels;\n}\n</code></pre>\n"}],"owner":{"account_id":3964157,"reputation":8643,"user_id":3270595,"accept_rate":75,"display_name":"Balder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2212,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":27845452,"answer_count":2,"score":3,"last_activity_date":1677072292,"creation_date":1420725255,"question_id":27841765,"body_markdown":"In Java annotations marked as [`@Inherited`][1] will only work when annotating classes:\r\n\r\n&gt; Note that this meta-annotation type has no effect if the annotated\r\n&gt; type is used to annotate anything other than a class. Note also that\r\n&gt; this meta-annotation only causes annotations to be inherited from\r\n&gt; superclasses; annotations on implemented interfaces have no effect.\r\n\r\nSo interfaces or methods annotated with an `@Inherited` annotation will not result in implementing classes/methods to also be annotated with the annotation. The reason for this is most likely, that the compiler would&#39;n know which of the annotations to choose, if there are multiple annotations in the class hierarchy as described [here][2].\r\n\r\nNow Java 8 introduced the new annotation [`@Repeatable`][3]. I think it would have been natural to remove the above restrictions for annotations that are both marked as `@Inherited` and `@Repeatable`, because the compiler should then be able to add the conflicting annotations to the `@Repeatable` annotation.\r\n\r\nGiven the following example:\r\n\r\n    import java.lang.annotation.Inherited;\r\n    import java.lang.annotation.Repeatable;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    @Inherited\r\n    @interface RepeatableAnnotations {\r\n    \tRepeatableAnnotation[] value(); \r\n    }\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    @Inherited\r\n    @Repeatable(RepeatableAnnotations.class)\r\n    @interface RepeatableAnnotation {\r\n    \tString value();\r\n    }\r\n    \r\n    @RepeatableAnnotation(&quot;A&quot;)\r\n    interface IntefaceA {}\r\n    \r\n    @RepeatableAnnotation(&quot;B&quot;)\r\n    interface IntefaceB {}\r\n    \r\n    @RepeatableAnnotation(&quot;C&quot;)\r\n    @RepeatableAnnotation(&quot;D&quot;)\r\n    public class TestClass implements IntefaceA, IntefaceB {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tfor (RepeatableAnnotation a : TestClass.class.getAnnotation(RepeatableAnnotations.class).value()) {\r\n    \t\t\tSystem.out.print(a.value());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI would have *hoped* the output to be `ABCD` but it is &quot;just&quot; `CD` (i.e. `@Inherited` is working exactly like pre Java 8).\r\n\r\nDoes anyone know if there was good reason for not removing the `@Inherited` restrictions regarding interfaces and methods in the case of `@Repeatable` annotations for Java 8?\r\n\r\nIs there any workaround to achieve the `ABCD` output for the above type hierarchy? (other than using reflection to scan the super interfaces for annotations...)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html\r\n  [2]: https://stackoverflow.com/a/4745820/3270595\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html","title":"Why can @Repeatable Annotations not be inherited from interfaces","body":"<p>In Java annotations marked as <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html\" rel=\"nofollow noreferrer\"><code>@Inherited</code></a> will only work when annotating classes:</p>\n\n<blockquote>\n  <p>Note that this meta-annotation type has no effect if the annotated\n  type is used to annotate anything other than a class. Note also that\n  this meta-annotation only causes annotations to be inherited from\n  superclasses; annotations on implemented interfaces have no effect.</p>\n</blockquote>\n\n<p>So interfaces or methods annotated with an <code>@Inherited</code> annotation will not result in implementing classes/methods to also be annotated with the annotation. The reason for this is most likely, that the compiler would'n know which of the annotations to choose, if there are multiple annotations in the class hierarchy as described <a href=\"https://stackoverflow.com/a/4745820/3270595\">here</a>.</p>\n\n<p>Now Java 8 introduced the new annotation <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html\" rel=\"nofollow noreferrer\"><code>@Repeatable</code></a>. I think it would have been natural to remove the above restrictions for annotations that are both marked as <code>@Inherited</code> and <code>@Repeatable</code>, because the compiler should then be able to add the conflicting annotations to the <code>@Repeatable</code> annotation.</p>\n\n<p>Given the following example:</p>\n\n<pre><code>import java.lang.annotation.Inherited;\nimport java.lang.annotation.Repeatable;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Inherited\n@interface RepeatableAnnotations {\n    RepeatableAnnotation[] value(); \n}\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Inherited\n@Repeatable(RepeatableAnnotations.class)\n@interface RepeatableAnnotation {\n    String value();\n}\n\n@RepeatableAnnotation(\"A\")\ninterface IntefaceA {}\n\n@RepeatableAnnotation(\"B\")\ninterface IntefaceB {}\n\n@RepeatableAnnotation(\"C\")\n@RepeatableAnnotation(\"D\")\npublic class TestClass implements IntefaceA, IntefaceB {\n    public static void main(String[] args) {\n        for (RepeatableAnnotation a : TestClass.class.getAnnotation(RepeatableAnnotations.class).value()) {\n            System.out.print(a.value());\n        }\n    }\n}\n</code></pre>\n\n<p>I would have <em>hoped</em> the output to be <code>ABCD</code> but it is \"just\" <code>CD</code> (i.e. <code>@Inherited</code> is working exactly like pre Java 8).</p>\n\n<p>Does anyone know if there was good reason for not removing the <code>@Inherited</code> restrictions regarding interfaces and methods in the case of <code>@Repeatable</code> annotations for Java 8?</p>\n\n<p>Is there any workaround to achieve the <code>ABCD</code> output for the above type hierarchy? (other than using reflection to scan the super interfaces for annotations...)</p>\n"},{"tags":["java","docker","maven","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":15096905,"reputation":11,"user_id":10895111,"display_name":"Developer530"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677072237,"creation_date":1677072237,"answer_id":75533317,"question_id":75486532,"body_markdown":"Fixed it with removing all my selenium dependencies except the following: \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    ","title":"NoSuchMethodError: void org.openqa.selenium.chrome.ChromeOptions.mergeInOptionsFromCaps","body":"<p>Fixed it with removing all my selenium dependencies except the following:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":27813057,"reputation":1,"user_id":21235071,"display_name":"Abhinav Bhatta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677072237,"creation_date":1676649335,"question_id":75486532,"body_markdown":"I&#39;ve been having some issues with setting up selenium tests lately. I had to upgrade my project&#39;s Java version from 11 to 17 to support Spring Boot V3, and my functional tests seem to fail with this error:\r\n```\r\njava.lang.NoSuchMethodError: &#39;void org.openqa.selenium.chrome.ChromeOptions.mergeInOptionsFromCaps(java.lang.String, org.openqa.selenium.Capabilities)&#39;\r\n\tat org.openqa.selenium.chrome.ChromeOptions.merge(ChromeOptions.java:78)\r\n\tat org.openqa.selenium.chrome.ChromeOptions.merge(ChromeOptions.java:48)\r\n\tat com.codeborne.selenide.webdriver.AbstractDriverFactory.merge(AbstractDriverFactory.java:90)\r\n\tat com.codeborne.selenide.webdriver.AbstractDriverFactory.createCommonCapabilities(AbstractDriverFactory.java:82)\r\n\tat com.codeborne.selenide.webdriver.ChromeDriverFactory.createCapabilities(ChromeDriverFactory.java:56)\r\n\tat com.codeborne.selenide.webdriver.ChromeDriverFactory.createCapabilities(ChromeDriverFactory.java:25)\r\n\tat com.codeborne.selenide.webdriver.WebDriverFactory.createWebDriverInstance(WebDriverFactory.java:111)\r\n\tat com.codeborne.selenide.webdriver.WebDriverFactory.createWebDriver(WebDriverFactory.java:67)\r\n\tat com.codeborne.selenide.drivercommands.CreateDriverCommand.lambda$createDriver$0(CreateDriverCommand.java:76)\r\n\tat com.codeborne.selenide.logevents.SelenideLogger.get(SelenideLogger.java:118)\r\n\tat com.codeborne.selenide.drivercommands.CreateDriverCommand.createDriver(CreateDriverCommand.java:52)\r\n\tat com.codeborne.selenide.impl.WebDriverThreadLocalContainer.createDriver(WebDriverThreadLocalContainer.java:180)\r\n\tat com.codeborne.selenide.impl.WebDriverThreadLocalContainer.getAndCheckWebDriver(WebDriverThreadLocalContainer.java:149)\r\n\tat com.codeborne.selenide.WebDriverRunner.getAndCheckWebDriver(WebDriverRunner.java:130)\r\n\tat com.codeborne.selenide.impl.StaticDriver.getAndCheckWebDriver(StaticDriver.java:65)\r\n\tat com.codeborne.selenide.SelenideDriver.getAndCheckWebDriver(SelenideDriver.java:220)\r\n\tat com.codeborne.selenide.drivercommands.Navigator.lambda$navigateTo$0(Navigator.java:72)\r\n\tat com.codeborne.selenide.logevents.SelenideLogger.run(SelenideLogger.java:105)\r\n\tat com.codeborne.selenide.drivercommands.Navigator.navigateTo(Navigator.java:70)\r\n\tat com.codeborne.selenide.drivercommands.Navigator.open(Navigator.java:32)\r\n\tat com.codeborne.selenide.SelenideDriver.open(SelenideDriver.java:101)\r\n\tat com.codeborne.selenide.Selenide.open(Selenide.java:52)\r\n\tat com.sonatype.sab.SabFunctionalTest.testIndexHtml(SabFunctionalTest.java:19)\r\n```\r\n\r\nI have a feeling it is due to mismatched dependencies, but not entirely sure. This is the relevant part of the pom.xml:\r\n\r\n```\r\n&lt;properties&gt;\r\n    &lt;selenium.version&gt;4.8.0&lt;/selenium.version&gt;\r\n    &lt;docker.image.registry&gt;&lt;/docker.image.registry&gt;\r\n    &lt;docker.image.version&gt;4.8&lt;/docker.image.version&gt;\r\n    &lt;docker.image&gt;standalone-chrome:${docker.image.version}&lt;/docker.image&gt;\r\n    &lt;webdriver.chrome.driver&gt;${project.build.directory}/chromedriver&lt;/webdriver.chrome.driver&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n      &lt;artifactId&gt;${unified.artifactId}&lt;/artifactId&gt;\r\n      &lt;version&gt;${project.version}&lt;/version&gt;\r\n      &lt;!-- NOTE: this is not the executable jar since that one wont work with @SpringBootTest --&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-test&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.codeborne&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenide&lt;/artifactId&gt;\r\n      &lt;version&gt;6.11.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\r\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n      &lt;version&gt;5.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n```\r\n\r\n\r\nOriginally, I was running selenium V4.1.1, and with that I was getting this error:\r\n\r\n`java.lang.NoClassDefFoundError: io/opentelemetry/sdk/metrics/exemplar/ExemplarFilter`\r\n\r\nI thought updating selenium to 4.8 would fix it (which it did) but now I&#39;m running into other problems.","title":"NoSuchMethodError: void org.openqa.selenium.chrome.ChromeOptions.mergeInOptionsFromCaps","body":"<p>I've been having some issues with setting up selenium tests lately. I had to upgrade my project's Java version from 11 to 17 to support Spring Boot V3, and my functional tests seem to fail with this error:</p>\n<pre><code>java.lang.NoSuchMethodError: 'void org.openqa.selenium.chrome.ChromeOptions.mergeInOptionsFromCaps(java.lang.String, org.openqa.selenium.Capabilities)'\n    at org.openqa.selenium.chrome.ChromeOptions.merge(ChromeOptions.java:78)\n    at org.openqa.selenium.chrome.ChromeOptions.merge(ChromeOptions.java:48)\n    at com.codeborne.selenide.webdriver.AbstractDriverFactory.merge(AbstractDriverFactory.java:90)\n    at com.codeborne.selenide.webdriver.AbstractDriverFactory.createCommonCapabilities(AbstractDriverFactory.java:82)\n    at com.codeborne.selenide.webdriver.ChromeDriverFactory.createCapabilities(ChromeDriverFactory.java:56)\n    at com.codeborne.selenide.webdriver.ChromeDriverFactory.createCapabilities(ChromeDriverFactory.java:25)\n    at com.codeborne.selenide.webdriver.WebDriverFactory.createWebDriverInstance(WebDriverFactory.java:111)\n    at com.codeborne.selenide.webdriver.WebDriverFactory.createWebDriver(WebDriverFactory.java:67)\n    at com.codeborne.selenide.drivercommands.CreateDriverCommand.lambda$createDriver$0(CreateDriverCommand.java:76)\n    at com.codeborne.selenide.logevents.SelenideLogger.get(SelenideLogger.java:118)\n    at com.codeborne.selenide.drivercommands.CreateDriverCommand.createDriver(CreateDriverCommand.java:52)\n    at com.codeborne.selenide.impl.WebDriverThreadLocalContainer.createDriver(WebDriverThreadLocalContainer.java:180)\n    at com.codeborne.selenide.impl.WebDriverThreadLocalContainer.getAndCheckWebDriver(WebDriverThreadLocalContainer.java:149)\n    at com.codeborne.selenide.WebDriverRunner.getAndCheckWebDriver(WebDriverRunner.java:130)\n    at com.codeborne.selenide.impl.StaticDriver.getAndCheckWebDriver(StaticDriver.java:65)\n    at com.codeborne.selenide.SelenideDriver.getAndCheckWebDriver(SelenideDriver.java:220)\n    at com.codeborne.selenide.drivercommands.Navigator.lambda$navigateTo$0(Navigator.java:72)\n    at com.codeborne.selenide.logevents.SelenideLogger.run(SelenideLogger.java:105)\n    at com.codeborne.selenide.drivercommands.Navigator.navigateTo(Navigator.java:70)\n    at com.codeborne.selenide.drivercommands.Navigator.open(Navigator.java:32)\n    at com.codeborne.selenide.SelenideDriver.open(SelenideDriver.java:101)\n    at com.codeborne.selenide.Selenide.open(Selenide.java:52)\n    at com.sonatype.sab.SabFunctionalTest.testIndexHtml(SabFunctionalTest.java:19)\n</code></pre>\n<p>I have a feeling it is due to mismatched dependencies, but not entirely sure. This is the relevant part of the pom.xml:</p>\n<pre><code>&lt;properties&gt;\n    &lt;selenium.version&gt;4.8.0&lt;/selenium.version&gt;\n    &lt;docker.image.registry&gt;&lt;/docker.image.registry&gt;\n    &lt;docker.image.version&gt;4.8&lt;/docker.image.version&gt;\n    &lt;docker.image&gt;standalone-chrome:${docker.image.version}&lt;/docker.image&gt;\n    &lt;webdriver.chrome.driver&gt;${project.build.directory}/chromedriver&lt;/webdriver.chrome.driver&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n      &lt;artifactId&gt;${unified.artifactId}&lt;/artifactId&gt;\n      &lt;version&gt;${project.version}&lt;/version&gt;\n      &lt;!-- NOTE: this is not the executable jar since that one wont work with @SpringBootTest --&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-test&lt;/artifactId&gt;\n      &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.codeborne&lt;/groupId&gt;\n      &lt;artifactId&gt;selenide&lt;/artifactId&gt;\n      &lt;version&gt;6.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n      &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n      &lt;version&gt;5.9.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n      &lt;version&gt;6.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n<p>Originally, I was running selenium V4.1.1, and with that I was getting this error:</p>\n<p><code>java.lang.NoClassDefFoundError: io/opentelemetry/sdk/metrics/exemplar/ExemplarFilter</code></p>\n<p>I thought updating selenium to 4.8 would fix it (which it did) but now I'm running into other problems.</p>\n"},{"tags":["java","jakarta-mail","html-email"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1661159116,"post_id":73441488,"comment_id":129696709,"body_markdown":"Please provide a [mre], including a *small* sample email, expected and actual result for that sample email.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including a <i>small</i> sample email, expected and actual result for that sample email."},{"owner":{"account_id":22588275,"reputation":7,"user_id":16771823,"display_name":"Mohd Salman"},"score":0,"creation_date":1661169516,"post_id":73441488,"comment_id":129700169,"body_markdown":"Hi Please visit to this url here I have uoloaded actual image of Email and output chich I am getting by this code                 ** https://sakhan141-my.sharepoint.com/:f:/g/personal/iqratechnology_sakhan141_onmicrosoft_com/Ep0hAsJ-k85JqzybR8kPgToBF_odZCPm4MgWJV7MERYEcg?e=K6mxdr**","body":"Hi Please visit to this url here I have uoloaded actual image of Email and output chich I am getting by this code                 ** <a href=\"https://sakhan141-my.sharepoint.com/:f:/g/personal/iqratechnology_sakhan141_onmicrosoft_com/Ep0hAsJ-k85JqzybR8kPgToBF_odZCPm4MgWJV7MERYEcg?e=K6mxdr\" rel=\"nofollow noreferrer\">sakhan141-my.sharepoint.com/:f:/g/personal/&hellip;</a>**"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1661171742,"post_id":73441488,"comment_id":129700997,"body_markdown":"I&#39;m not asking how the email looks, I&#39;m asking for the actual source of the email message (e.g. as written out by `MimeMessage.writeTo(OutputStream)`). And please don&#39;t use screenshots of textual output, post that text as code formatted text in the question itself.","body":"I&#39;m not asking how the email looks, I&#39;m asking for the actual source of the email message (e.g. as written out by <code>MimeMessage.writeTo(OutputStream)</code>). And please don&#39;t use screenshots of textual output, post that text as code formatted text in the question itself."},{"owner":{"account_id":22588275,"reputation":7,"user_id":16771823,"display_name":"Mohd Salman"},"score":0,"creation_date":1661177351,"post_id":73441488,"comment_id":129703431,"body_markdown":"I can not send all the data on comment due to fixed size","body":"I can not send all the data on comment due to fixed size"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1661177528,"post_id":73441488,"comment_id":129703503,"body_markdown":"You should [edit] your questions with additions, not put them in comments. However, to be clear, the source of the email is far more important for this question than the output (and without the source of the email, that output is largely meaningless).","body":"You should <a href=\"https://stackoverflow.com/posts/73441488/edit\">edit</a> your questions with additions, not put them in comments. However, to be clear, the source of the email is far more important for this question than the output (and without the source of the email, that output is largely meaningless)."}],"answers":[{"tags":[],"owner":{"account_id":89018,"reputation":5520,"user_id":245858,"accept_rate":55,"display_name":"Pradyut Bhattacharya"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1677072130,"creation_date":1668451589,"answer_id":74436438,"question_id":73441488,"body_markdown":"the **break** is culprit for you. \r\nI saw the comment that result gets repeated and got the hint.\r\n\r\nthis will work for you - \r\n\r\n    \r\n    public String getTextFromMimeMultipart(\r\n        MimeMultipart mimeMultipart)  throws MessagingException, IOException{\r\n    String result = &quot;&quot;;\r\n    int count = mimeMultipart.getCount();\r\n    for (int i = 0; i &lt; count; i++) {\r\n        result+=&quot;\\n\\n&quot;;\r\n        BodyPart bodyPart = mimeMultipart.getBodyPart(i);\r\n        if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\r\n            /*\r\n            result = result + &quot;\\n&quot; + bodyPart.getContent();\r\n            break; \r\n            */ \r\n             // without break same text appears twice in my tests\r\n        } else if (bodyPart.isMimeType(&quot;text/html&quot;)) {\r\n            String html = (String) bodyPart.getContent();\r\n            //html has all the html tags for you\r\n            result = result + &quot;\\n&quot; + org.jsoup.Jsoup.parse(html).text();\r\n        } else if (bodyPart.getContent() instanceof MimeMultipart){\r\n            result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());\r\n            \r\n        }\r\n      }\r\n      return result;\r\n    }\r\n","title":"How to read email content of a multi part in HTML instead of text in Java","body":"<p>the <strong>break</strong> is culprit for you.\nI saw the comment that result gets repeated and got the hint.</p>\n<p>this will work for you -</p>\n<pre><code>public String getTextFromMimeMultipart(\n    MimeMultipart mimeMultipart)  throws MessagingException, IOException{\nString result = &quot;&quot;;\nint count = mimeMultipart.getCount();\nfor (int i = 0; i &lt; count; i++) {\n    result+=&quot;\\n\\n&quot;;\n    BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n    if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\n        /*\n        result = result + &quot;\\n&quot; + bodyPart.getContent();\n        break; \n        */ \n         // without break same text appears twice in my tests\n    } else if (bodyPart.isMimeType(&quot;text/html&quot;)) {\n        String html = (String) bodyPart.getContent();\n        //html has all the html tags for you\n        result = result + &quot;\\n&quot; + org.jsoup.Jsoup.parse(html).text();\n    } else if (bodyPart.getContent() instanceof MimeMultipart){\n        result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());\n        \n    }\n  }\n  return result;\n}\n</code></pre>\n"}],"owner":{"account_id":22588275,"reputation":7,"user_id":16771823,"display_name":"Mohd Salman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":623,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1677072130,"creation_date":1661153011,"question_id":73441488,"body_markdown":"I have a requirement in which I have to read the email content in HTML format, but I am getting in simple text. How can I get the content in HTML?\r\n\r\nI have used this code:\r\n\r\n    public String getTextFromMessage(Message message) throws MessagingException, IOException {\r\n        String result = &quot;&quot;;\r\n        if (message.isMimeType(&quot;text/plain&quot;)) {\r\n            result = message.getContent().toString();\r\n        } else if (message.isMimeType(&quot;multipart/*&quot;)) {\r\n            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\r\n            result = getTextFromMimeMultipart(mimeMultipart);\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    public String getTextFromMimeMultipart(\r\n            MimeMultipart mimeMultipart)  throws MessagingException, IOException{\r\n        String result = &quot;&quot;;\r\n        int count = mimeMultipart.getCount();\r\n        for (int i = 0; i &lt; count; i++) {\r\n            result+=&quot;\\n\\n&quot;;\r\n            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\r\n            if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\r\n                result = result + &quot;\\n&quot; + bodyPart.getContent();\r\n                break; // without break same text appears twice in my tests\r\n            } else if (bodyPart.isMimeType(&quot;text/html&quot;)) {\r\n                String html = (String) bodyPart.getContent();\r\n                result = result + &quot;\\n&quot; + org.jsoup.Jsoup.parse(html).text();\r\n            } else if (bodyPart.getContent() instanceof MimeMultipart){\r\n                result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());\r\n                \r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n\r\n\r\n**The output of the code is on Debug**\r\n\r\n\r\n    _ ____ ____From: Mohammad Rahmat Ullah &lt;mohammedrahmathullah@iqratechnology.com&gt; __Sent: Tuesday, August 9, 2022 3:14 PM__To: sidraansari@iqratechnologygulf.com__Cc: sabashaikh@iqratechnology.com; mohdsalmankhan@iqratechnology.com; noorullahkhan@iqratechnologygulf.com__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____Dear Sidra,____ ____Please do the same and send me.. Visit 2013 sharepoint for older records.____ ____Portal.abaninvestment.com – 2013 Sharepoint____ ____ ____Best Regards,____Mohammed Rahmath____SharePoint Consultant________Plot No. T-17, Software Technology Park, Beside____Wockhardt Pharma, Opp. Garware Stadium, MIDC____Chikalthana, Aurangabad 431007, Maharashtra, India____ &lt;http://www.iqratechnology.com/&gt; www.iqratechnology.com____ ____ ____ ____From: Tariq Afzal Ehtesham [mailto:Tariq.Afzal@abaninvestment.com] __Sent: 09 August 2022 12:26 PM__To: Mohammad Rahmat Ullah &lt;mohammedrahmathullah@iqratechnology.com &lt;mailto:mohammedrahmathullah@iqratechnology.com&gt; &gt;; sabashaikh@iqratechnology.com &lt;mailto:sabashaikh@iqratechnology.com&gt; ; IT Service Desk &lt;it.servicedesk@abaninvestment.com &lt;mailto:it.servicedesk@abaninvestment.com&gt; &gt;__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Rahmath,____ ____Kindly provide the report for GCGOi as requested below in yellow highlight.____ ____Regards,____ ____ ____ ______ &lt;http://www.abaninvestment.com&gt; __ABAN INVESTMENT__Ghobash Group Operating Companies________ &lt;https://www.linkedin.com/company/aban-investment&gt; ____                    ____WWW.ABANINVESTMENT.COM &lt;http://WWW.ABANINVESTMENT.COM&gt; ______ ____TARIQ AFZAL EHTESHAM__Manager - Business Solutions__M:+971 55 4722597 | T: +971 4 5961800 | Ext: 5207__PO Box:125848, Makeen Building, Airport Road, Dubai, UAE______ &lt;http://www.abaninvestment.com&gt; ____ ______This e-mail is private and confidential. If received in error, please delete immediately. Sender does not accept any legal responsibility for the contents of this e-mail and/or its attachments.____From: Jerilyn Dente __Sent: Tuesday, August 9, 2022 10:48 AM__To: Tariq Afzal Ehtesham &lt;Tariq.Afzal@abaninvestment.com &lt;mailto:Tariq.Afzal@abaninvestment.com&gt; &gt;__Cc: Banan T. Alkilani &lt;Banan.Alkilani@gcg.ae &lt;mailto:Banan.Alkilani@gcg.ae&gt; &gt;; Kasinathan Kathiresan &lt;Kasinathan.Kathiresan@gcg.ae &lt;mailto:Kasinathan.Kathiresan@gcg.ae&gt; &gt;; Digi Ana Caguindagan &lt;Digi.Caguindagan@gcg.ae &lt;mailto:Digi.Caguindagan@gcg.ae&gt; &gt;__Subject: RE: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Tariq, ____We need you kind assistance. ____We have upcoming ISO audit and we need below reports to be presented first to GM.____*    How many new CAF in 2020/2021 __*    How many total new customer in 2020/2021____ ____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____JERILYN DENTE__Sales Coordinator__M:+971 55 5027498 | T: +971 2 2014999 | Ext: 7400__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Kasinathan Kathiresan __Sent: Monday, August 8, 2022 4:58 PM__To: Jerilyn Dente__Cc: Digi Ana Caguindagan__Subject: RE: Screenshot 2022-08-08 at 16.33.02____ ____ ____This has to be collected from IT ____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____KASINATHAN KATHIRESAN__Credit Control Supervisor__M:+971 50 7363878 | T: +971 4 5281000 | Ext: 5435__PO Box:25940, Makeen Building, Airport Road, Dubai, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Jerilyn Dente __Sent: Monday, August 8, 2022 4:52 PM__To: Kasinathan Kathiresan__Cc: Digi Ana Caguindagan__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Sir, ____Please share the number of new customers for year 2020 &amp; 2021____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____JERILYN DENTE__Sales Coordinator__M:+971 55 5027498 | T: +971 2 2014999 | Ext: 7400__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Banan T. Alkilani __Sent: Monday, August 8, 2022 4:34 PM__To: Jerilyn Dente; Digi Ana Caguindagan__Subject: Screenshot 2022-08-08 at 16.33.02____ ____ ____Hi Jeri &amp;Digi,____ ____Can you please help getting me the info for 2020 and 2021 for new customers achieved to target. Also the number of new machines sold in 2020 and 2021. This is for the iso audit this week. Thanks ________ ______ &lt;https://www.gcg.ae&gt; __A`enter code here` Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt;`enter code here` ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; `enter code here`____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____BANAN T. ALKILANI__Enterprise Division Sales Manager – UAE__M:+971 50 2077878 | T: +971 2 2014999 | Ext: 7402__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____","title":"How to read email content of a multi part in HTML instead of text in Java","body":"<p>I have a requirement in which I have to read the email content in HTML format, but I am getting in simple text. How can I get the content in HTML?</p>\n<p>I have used this code:</p>\n<pre><code>public String getTextFromMessage(Message message) throws MessagingException, IOException {\n    String result = &quot;&quot;;\n    if (message.isMimeType(&quot;text/plain&quot;)) {\n        result = message.getContent().toString();\n    } else if (message.isMimeType(&quot;multipart/*&quot;)) {\n        MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n        result = getTextFromMimeMultipart(mimeMultipart);\n    }\n    return result;\n}\n\npublic String getTextFromMimeMultipart(\n        MimeMultipart mimeMultipart)  throws MessagingException, IOException{\n    String result = &quot;&quot;;\n    int count = mimeMultipart.getCount();\n    for (int i = 0; i &lt; count; i++) {\n        result+=&quot;\\n\\n&quot;;\n        BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n        if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\n            result = result + &quot;\\n&quot; + bodyPart.getContent();\n            break; // without break same text appears twice in my tests\n        } else if (bodyPart.isMimeType(&quot;text/html&quot;)) {\n            String html = (String) bodyPart.getContent();\n            result = result + &quot;\\n&quot; + org.jsoup.Jsoup.parse(html).text();\n        } else if (bodyPart.getContent() instanceof MimeMultipart){\n            result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());\n            \n        }\n    }\n    return result;\n}\n</code></pre>\n<p><strong>The output of the code is on Debug</strong></p>\n<pre><code>_ ____ ____From: Mohammad Rahmat Ullah &lt;mohammedrahmathullah@iqratechnology.com&gt; __Sent: Tuesday, August 9, 2022 3:14 PM__To: sidraansari@iqratechnologygulf.com__Cc: sabashaikh@iqratechnology.com; mohdsalmankhan@iqratechnology.com; noorullahkhan@iqratechnologygulf.com__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____Dear Sidra,____ ____Please do the same and send me.. Visit 2013 sharepoint for older records.____ ____Portal.abaninvestment.com – 2013 Sharepoint____ ____ ____Best Regards,____Mohammed Rahmath____SharePoint Consultant________Plot No. T-17, Software Technology Park, Beside____Wockhardt Pharma, Opp. Garware Stadium, MIDC____Chikalthana, Aurangabad 431007, Maharashtra, India____ &lt;http://www.iqratechnology.com/&gt; www.iqratechnology.com____ ____ ____ ____From: Tariq Afzal Ehtesham [mailto:Tariq.Afzal@abaninvestment.com] __Sent: 09 August 2022 12:26 PM__To: Mohammad Rahmat Ullah &lt;mohammedrahmathullah@iqratechnology.com &lt;mailto:mohammedrahmathullah@iqratechnology.com&gt; &gt;; sabashaikh@iqratechnology.com &lt;mailto:sabashaikh@iqratechnology.com&gt; ; IT Service Desk &lt;it.servicedesk@abaninvestment.com &lt;mailto:it.servicedesk@abaninvestment.com&gt; &gt;__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Rahmath,____ ____Kindly provide the report for GCGOi as requested below in yellow highlight.____ ____Regards,____ ____ ____ ______ &lt;http://www.abaninvestment.com&gt; __ABAN INVESTMENT__Ghobash Group Operating Companies________ &lt;https://www.linkedin.com/company/aban-investment&gt; ____                    ____WWW.ABANINVESTMENT.COM &lt;http://WWW.ABANINVESTMENT.COM&gt; ______ ____TARIQ AFZAL EHTESHAM__Manager - Business Solutions__M:+971 55 4722597 | T: +971 4 5961800 | Ext: 5207__PO Box:125848, Makeen Building, Airport Road, Dubai, UAE______ &lt;http://www.abaninvestment.com&gt; ____ ______This e-mail is private and confidential. If received in error, please delete immediately. Sender does not accept any legal responsibility for the contents of this e-mail and/or its attachments.____From: Jerilyn Dente __Sent: Tuesday, August 9, 2022 10:48 AM__To: Tariq Afzal Ehtesham &lt;Tariq.Afzal@abaninvestment.com &lt;mailto:Tariq.Afzal@abaninvestment.com&gt; &gt;__Cc: Banan T. Alkilani &lt;Banan.Alkilani@gcg.ae &lt;mailto:Banan.Alkilani@gcg.ae&gt; &gt;; Kasinathan Kathiresan &lt;Kasinathan.Kathiresan@gcg.ae &lt;mailto:Kasinathan.Kathiresan@gcg.ae&gt; &gt;; Digi Ana Caguindagan &lt;Digi.Caguindagan@gcg.ae &lt;mailto:Digi.Caguindagan@gcg.ae&gt; &gt;__Subject: RE: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Tariq, ____We need you kind assistance. ____We have upcoming ISO audit and we need below reports to be presented first to GM.____*    How many new CAF in 2020/2021 __*    How many total new customer in 2020/2021____ ____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____JERILYN DENTE__Sales Coordinator__M:+971 55 5027498 | T: +971 2 2014999 | Ext: 7400__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Kasinathan Kathiresan __Sent: Monday, August 8, 2022 4:58 PM__To: Jerilyn Dente__Cc: Digi Ana Caguindagan__Subject: RE: Screenshot 2022-08-08 at 16.33.02____ ____ ____This has to be collected from IT ____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____KASINATHAN KATHIRESAN__Credit Control Supervisor__M:+971 50 7363878 | T: +971 4 5281000 | Ext: 5435__PO Box:25940, Makeen Building, Airport Road, Dubai, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Jerilyn Dente __Sent: Monday, August 8, 2022 4:52 PM__To: Kasinathan Kathiresan__Cc: Digi Ana Caguindagan__Subject: FW: Screenshot 2022-08-08 at 16.33.02____ ____ ____Dear Sir, ____Please share the number of new customers for year 2020 &amp; 2021____ ____ ____ ______ &lt;https://www.gcg.ae&gt; __A Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt; ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; ____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____JERILYN DENTE__Sales Coordinator__M:+971 55 5027498 | T: +971 2 2014999 | Ext: 7400__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____From: Banan T. Alkilani __Sent: Monday, August 8, 2022 4:34 PM__To: Jerilyn Dente; Digi Ana Caguindagan__Subject: Screenshot 2022-08-08 at 16.33.02____ ____ ____Hi Jeri &amp;Digi,____ ____Can you please help getting me the info for 2020 and 2021 for new customers achieved to target. Also the number of new machines sold in 2020 and 2021. This is for the iso audit this week. Thanks ________ ______ &lt;https://www.gcg.ae&gt; __A`enter code here` Ghobash Group Company______ &lt;http://www.mps-uae.com/&gt; ________ &lt;https://www.linkedin.com/company/gulf-commercial-group_2&gt; ____ &lt;https://www.facebook.com/GCG.ES&gt; ____ &lt;https://twitter.com/GCG_ES&gt;`enter code here` ____ &lt;https://www.youtube.com/channel/UChwPaZduB6una81a9YosfJQ&gt; `enter code here`____        ____WWW.MPS-UAE.COM &lt;http://WWW.MPS-UAE.COM&gt; ____WWW.GCG.AE &lt;http://WWW.GCG.AE&gt; ____ ______ ____BANAN T. ALKILANI__Enterprise Division Sales Manager – UAE__M:+971 50 2077878 | T: +971 2 2014999 | Ext: 7402__PO Box:47257, Madinat Zayed Tower, 12th Floor, Sultan Bin Zayed the First Street, Abu Dhabi, UAE______ &lt;https://www.gcg.ae/uaepass/digitalsignature&gt; ____ ____\n</code></pre>\n"},{"tags":["java","spring-boot","maven-plugin"],"comments":[{"owner":{"account_id":17066586,"reputation":4526,"user_id":12348584,"display_name":"H3AR7B3A7"},"score":0,"creation_date":1677006476,"post_id":75524589,"comment_id":133250838,"body_markdown":"Needs code instead of images in the question.","body":"Needs code instead of images in the question."},{"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"score":0,"creation_date":1677006993,"post_id":75524589,"comment_id":133250982,"body_markdown":"i was trying to edit  my post somehow its locked and restricting edits","body":"i was trying to edit  my post somehow its locked and restricting edits"},{"owner":{"account_id":17066586,"reputation":4526,"user_id":12348584,"display_name":"H3AR7B3A7"},"score":0,"creation_date":1677007254,"post_id":75524589,"comment_id":133251036,"body_markdown":"I can edit it just fine, you should be able to as well. I unflagged it just in case.","body":"I can edit it just fine, you should be able to as well. I unflagged it just in case."},{"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"score":0,"creation_date":1677007485,"post_id":75524589,"comment_id":133251100,"body_markdown":"tried 5 times, giving error &quot;there are too many pending edits on stackoverflow.Please try again&quot;","body":"tried 5 times, giving error &quot;there are too many pending edits on stackoverflow.Please try again&quot;"},{"owner":{"account_id":17066586,"reputation":4526,"user_id":12348584,"display_name":"H3AR7B3A7"},"score":0,"creation_date":1677009801,"post_id":75524589,"comment_id":133251789,"body_markdown":"Then accept or decline the pending changes.","body":"Then accept or decline the pending changes."},{"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"score":0,"creation_date":1677010950,"post_id":75524589,"comment_id":133252103,"body_markdown":"When you receive the message &quot;There are too many pending edits&quot;, it means that there are already a lot of suggested edits waiting for review and your edit has been added to the queue. You will need to wait until some of the suggested edits have been reviewed and approved before you can submit another edit.","body":"When you receive the message &quot;There are too many pending edits&quot;, it means that there are already a lot of suggested edits waiting for review and your edit has been added to the queue. You will need to wait until some of the suggested edits have been reviewed and approved before you can submit another edit."},{"owner":{"account_id":17066586,"reputation":4526,"user_id":12348584,"display_name":"H3AR7B3A7"},"score":0,"creation_date":1677011082,"post_id":75524589,"comment_id":133252133,"body_markdown":"https://meta.stackoverflow.com/questions/346511/how-can-i-see-all-my-pending-reviews","body":"<a href=\"https://meta.stackoverflow.com/questions/346511/how-can-i-see-all-my-pending-reviews\" title=\"how can i see all my pending reviews\">meta.stackoverflow.com/questions/346511/&hellip;</a>"},{"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"score":0,"creation_date":1677071363,"post_id":75524589,"comment_id":133264419,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/252047/discussion-between-pradnya-kulkarni-and-h3ar7b3a7).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/252047/discussion-between-pradnya-kulkarni-and-h3ar7b3a7\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677071719,"creation_date":1677071719,"answer_id":75533213,"question_id":75524589,"body_markdown":"I have invalidated cache from intelijj and it started working.The warning it was throwing through default method written in implemented interface.\r\nIf anyone come across such issue below are check points:\r\n1.Import module properly in pom.xml \r\n2.Download maven dependencies after adding new module.\r\n3.Name and parameter written in interface should be same to override method in controller.","title":"ObjectMapper or HttpServletRequest not configured in default AuthApi interface","body":"<p>I have invalidated cache from intelijj and it started working.The warning it was throwing through default method written in implemented interface.\nIf anyone come across such issue below are check points:\n1.Import module properly in pom.xml\n2.Download maven dependencies after adding new module.\n3.Name and parameter written in interface should be same to override method in controller.</p>\n"}],"owner":{"account_id":17769050,"reputation":114,"user_id":12903165,"display_name":"Pradnya Kulkarni"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677071719,"creation_date":1677004606,"question_id":75524589,"body_markdown":"I have created application https://github.com/kulkarnipradnyas/cultfit/tree/main/auth-service where payload and interfaces i have created through open api maven plugin\r\n\r\n```xml\r\n&lt;groupId&gt;io.swagger.codegen.v3&lt;/groupId&gt;\r\n&lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\r\n&lt;version&gt;${swagger.codegen.maven.plugin.version}&lt;/version&gt;\r\n```\r\n\r\nhttps://github.com/kulkarnipradnyas/cultfit/tree/main/swagger\r\nwhen i try to hit my /auth/signup endpoint on postman, it is giving warning &quot;ObjectMapper or HttpServletRequest not configured in default AuthApi interface.&quot; It is not letting my endpoint work.Can someone help me with all possible problems and if it is known problem what is the solution.(I am new to springboot) attaching generated interface and my controller\r\n```\r\n\r\n@RestController\r\n@Validated\r\n@CrossOrigin(&quot;*&quot;)\r\npublic class AuthController implements AuthApi {\r\n\r\n    @Autowired\r\n    private AuthService authService;\r\n\r\n    public AuthController() {\r\n    }\r\n\r\n    @Override\r\n    @PostMapping(&quot;/auth/signIn&quot;)\r\n     public   ResponseEntity&lt;Void&gt; signIn(String xCorrelationID,String xRequestID){\r\n        return new ResponseEntity(HttpStatus.NOT_IMPLEMENTED);\r\n    }\r\n    @Override\r\n    @PostMapping(&quot;/auth/signup&quot;)\r\n    public ResponseEntity&lt;Void&gt; signupUser(@RequestBody User user){\r\n           String token = authService.register(user);\r\n            return new ResponseEntity(token,HttpStatus.OK);\r\n    }\r\n}\r\n```\r\ngenerated AuthAPI has below method:\r\n```\r\n  @RequestMapping(\r\n        value = {&quot;/auth/signup&quot;},\r\n        produces = {&quot;application/json&quot;},\r\n        consumes = {&quot;application/json&quot;},\r\n        method = {RequestMethod.POST}\r\n    )\r\n    default ResponseEntity&lt;Void&gt; signupUser(@Parameter(in = ParameterIn.DEFAULT,description = &quot;Create User&quot;,required = true,schema = @Schema) @RequestBody @Valid User body) {\r\n        if (!this.getObjectMapper().isPresent() || !this.getAcceptHeader().isPresent()) {\r\n            log.warn(&quot;ObjectMapper or HttpServletRequest not configured in default AuthApi interface so no example is generated&quot;);\r\n        }\r\n\r\n        return new ResponseEntity(HttpStatus.NOT_IMPLEMENTED);\r\n    }\r\n}\r\nServiceConfig:\r\n```\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends  \r\n       WebSecurityConfigurerAdapter {  \r\n     it has below method\r\n    @Override\r\n     protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeHttpRequests((authorize) -&gt;\r\n                        //authorize.anyRequest().authenticated()\r\n                        authorize\r\n                                .antMatchers(HttpMethod.POST, \r\n            &quot;/auth/signup&quot;).permitAll()\r\n                                 .antMatchers(HttpMethod.POST, \r\n          &quot;/auth/signIn&quot;).permitAll()\r\n                                .anyRequest().authenticated()\r\n\r\n                ) .exceptionHandling(exception -&gt; \r\n      exception.authenticationEntryPoint(authenticationEntryPoint))\r\n                .sessionManagement(session -&gt; \r\n      session.sessionCreationPolicy \r\n          (SessionCreationPolicy.STATELESS));\r\n \r\n    }\r\n```","title":"ObjectMapper or HttpServletRequest not configured in default AuthApi interface","body":"<p>I have created application <a href=\"https://github.com/kulkarnipradnyas/cultfit/tree/main/auth-service\" rel=\"nofollow noreferrer\">https://github.com/kulkarnipradnyas/cultfit/tree/main/auth-service</a> where payload and interfaces i have created through open api maven plugin</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;io.swagger.codegen.v3&lt;/groupId&gt;\n&lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;${swagger.codegen.maven.plugin.version}&lt;/version&gt;\n</code></pre>\n<p><a href=\"https://github.com/kulkarnipradnyas/cultfit/tree/main/swagger\" rel=\"nofollow noreferrer\">https://github.com/kulkarnipradnyas/cultfit/tree/main/swagger</a>\nwhen i try to hit my /auth/signup endpoint on postman, it is giving warning &quot;ObjectMapper or HttpServletRequest not configured in default AuthApi interface.&quot; It is not letting my endpoint work.Can someone help me with all possible problems and if it is known problem what is the solution.(I am new to springboot) attaching generated interface and my controller</p>\n<pre><code>\n@RestController\n@Validated\n@CrossOrigin(&quot;*&quot;)\npublic class AuthController implements AuthApi {\n\n    @Autowired\n    private AuthService authService;\n\n    public AuthController() {\n    }\n\n    @Override\n    @PostMapping(&quot;/auth/signIn&quot;)\n     public   ResponseEntity&lt;Void&gt; signIn(String xCorrelationID,String xRequestID){\n        return new ResponseEntity(HttpStatus.NOT_IMPLEMENTED);\n    }\n    @Override\n    @PostMapping(&quot;/auth/signup&quot;)\n    public ResponseEntity&lt;Void&gt; signupUser(@RequestBody User user){\n           String token = authService.register(user);\n            return new ResponseEntity(token,HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>generated AuthAPI has below method:</p>\n<pre><code>  @RequestMapping(\n        value = {&quot;/auth/signup&quot;},\n        produces = {&quot;application/json&quot;},\n        consumes = {&quot;application/json&quot;},\n        method = {RequestMethod.POST}\n    )\n    default ResponseEntity&lt;Void&gt; signupUser(@Parameter(in = ParameterIn.DEFAULT,description = &quot;Create User&quot;,required = true,schema = @Schema) @RequestBody @Valid User body) {\n        if (!this.getObjectMapper().isPresent() || !this.getAcceptHeader().isPresent()) {\n            log.warn(&quot;ObjectMapper or HttpServletRequest not configured in default AuthApi interface so no example is generated&quot;);\n        }\n\n        return new ResponseEntity(HttpStatus.NOT_IMPLEMENTED);\n    }\n}\nServiceConfig:\n</code></pre>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends  \n   WebSecurityConfigurerAdapter {  \n it has below method\n@Override\n protected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n            .authorizeHttpRequests((authorize) -&gt;\n                    //authorize.anyRequest().authenticated()\n                    authorize\n                            .antMatchers(HttpMethod.POST, \n        &quot;/auth/signup&quot;).permitAll()\n                             .antMatchers(HttpMethod.POST, \n      &quot;/auth/signIn&quot;).permitAll()\n                            .anyRequest().authenticated()\n\n            ) .exceptionHandling(exception -&gt; \n  exception.authenticationEntryPoint(authenticationEntryPoint))\n            .sessionManagement(session -&gt; \n  session.sessionCreationPolicy \n      (SessionCreationPolicy.STATELESS));\n\n}\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","intellij-idea","jvm","testng"],"answers":[{"tags":[],"owner":{"account_id":244340,"reputation":8860,"user_id":517073,"accept_rate":87,"display_name":"Stepan Yakovenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677071115,"creation_date":1677071115,"answer_id":75533098,"question_id":75532941,"body_markdown":"The overriding value was coming from pom.xml:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CydJ2.png","title":"How do I set JVM heap size for TestNG in Intellij IDEA?","body":"<p>The overriding value was coming from pom.xml:</p>\n<p><a href=\"https://i.stack.imgur.com/CydJ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CydJ2.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":244340,"reputation":8860,"user_id":517073,"accept_rate":87,"display_name":"Stepan Yakovenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75533098,"answer_count":1,"score":0,"last_activity_date":1677071115,"creation_date":1677070334,"question_id":75532941,"body_markdown":"I am trying to give more memory to a TestNG test with VM parameter:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut when test starts, it overrides my parameter with another one:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHow do I fix it?\r\n\r\n  [1]: https://i.stack.imgur.com/7SybJ.png\r\n  [2]: https://i.stack.imgur.com/tvdKQ.png","title":"How do I set JVM heap size for TestNG in Intellij IDEA?","body":"<p>I am trying to give more memory to a TestNG test with VM parameter:</p>\n<p><a href=\"https://i.stack.imgur.com/7SybJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7SybJ.png\" alt=\"enter image description here\" /></a></p>\n<p>But when test starts, it overrides my parameter with another one:</p>\n<p><a href=\"https://i.stack.imgur.com/tvdKQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tvdKQ.png\" alt=\"enter image description here\" /></a></p>\n<p>How do I fix it?</p>\n"},{"tags":["java","spring","spring-boot","prometheus","spring-boot-actuator"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1665216682,"post_id":73994265,"comment_id":130651669,"body_markdown":"The relationship between your `MeterRegistryCustomizer` and your `RestTemplate` bean isn&#39;t clear to me. Can you explain that a bit more? All `MeterRegistryCustomizer` beans are called during the creation of the `MeterRegistry` so a customizer shouldn&#39;t `@DependOn` the registry as that will create a cycle. You may want to try implementing `MeterBinder` rather than `MeterRegistryCustomizer`. I am not sure that it will solve your problem, but it is a better callback to use for binding gauges (and any other type of meter) to a registry.","body":"The relationship between your <code>MeterRegistryCustomizer</code> and your <code>RestTemplate</code> bean isn&#39;t clear to me. Can you explain that a bit more? All <code>MeterRegistryCustomizer</code> beans are called during the creation of the <code>MeterRegistry</code> so a customizer shouldn&#39;t <code>@DependOn</code> the registry as that will create a cycle. You may want to try implementing <code>MeterBinder</code> rather than <code>MeterRegistryCustomizer</code>. I am not sure that it will solve your problem, but it is a better callback to use for binding gauges (and any other type of meter) to a registry."},{"owner":{"account_id":20454473,"reputation":11,"user_id":15008461,"display_name":"Jays"},"score":0,"creation_date":1665285632,"post_id":73994265,"comment_id":130662796,"body_markdown":"If you look at the MeterRegistryCustomizer bean in my code, it has implementation to call custom healthIndicator which in turn calls rest apis ping. The ping call uses resttemplate. They are not directly related. I got multiple custom Health Indicator implementations in my app to check the health of all downstream apis. The intention behind MeterRegistryCustomizer is to register each HealthIndicator and gauge the health to capture the status separately in the response.","body":"If you look at the MeterRegistryCustomizer bean in my code, it has implementation to call custom healthIndicator which in turn calls rest apis ping. The ping call uses resttemplate. They are not directly related. I got multiple custom Health Indicator implementations in my app to check the health of all downstream apis. The intention behind MeterRegistryCustomizer is to register each HealthIndicator and gauge the health to capture the status separately in the response."},{"owner":{"account_id":20454473,"reputation":11,"user_id":15008461,"display_name":"Jays"},"score":0,"creation_date":1665366816,"post_id":73994265,"comment_id":130676183,"body_markdown":"Here is the reference code for above comment.","body":"Here is the reference code for above comment."},{"owner":{"account_id":20454473,"reputation":11,"user_id":15008461,"display_name":"Jays"},"score":0,"creation_date":1665367543,"post_id":73994265,"comment_id":130676259,"body_markdown":"Below is the supporting code for the above comment.\n\n\n`@Component\npublic class MyHealthIndicator implements HealthIndicator {\n\t\n\t@Autowired\n\tMyRepo myrepo;\n\t\n\t@Override\n\tpublic Health health() {\n\t\treturn myrepo.ping() == &quot;SUCCESS&quot; ? Health.UP.build(): Health.DOWN.build(); //this will return the \n\t}\n}\n\n@Repository\npublic class MyRepo {\n\t\n\t@Autowired\n\tRestTemplate restTemplate;\n\t\n\tpublic String ping() {\n\t\t\treturn restTemplate.exchange(&quot;url&quot;, GET, new HttpEntity(requestBody, headers), String.class);\n\t}\n}`","body":"Below is the supporting code for the above comment.   <code>@Component public class MyHealthIndicator implements HealthIndicator { \t \t@Autowired \tMyRepo myrepo; \t \t@Override \tpublic Health health() { \t\treturn myrepo.ping() == &quot;SUCCESS&quot; ? Health.UP.build(): Health.DOWN.build(); &#47;&#47;this will return the  \t} }  @Repository public class MyRepo { \t \t@Autowired \tRestTemplate restTemplate; \t \tpublic String ping() { \t\t\treturn restTemplate.exchange(&quot;url&quot;, GET, new HttpEntity(requestBody, headers), String.class); \t} }</code>"},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1665387539,"post_id":73994265,"comment_id":130679608,"body_markdown":"Please edit your question to add that code and everything else needed to provide a complete picture. You may want to read https://stackoverflow.com/help/minimal-reproducible-example as well.","body":"Please edit your question to add that code and everything else needed to provide a complete picture. You may want to read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> as well."},{"owner":{"account_id":20454473,"reputation":11,"user_id":15008461,"display_name":"Jays"},"score":0,"creation_date":1665418656,"post_id":73994265,"comment_id":130690498,"body_markdown":"Updated the question with code.","body":"Updated the question with code."}],"answers":[{"tags":[],"owner":{"account_id":5865743,"reputation":2651,"user_id":4619784,"display_name":"Hany Sakr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677071014,"creation_date":1677071014,"answer_id":75533083,"question_id":73994265,"body_markdown":"I&#39;m sharing my experience as it took more time checking the root cause of that circular reference.\r\nI faced the same issue with prometheusMeterRegistry after upgrading to sprintboot 2.6.x and 2.7.x As I had dependency on micrometer-registry-prometheus in my POM file.\r\n\r\nThe code was setting the metricRegistry of prometheus manually to HikariDataSource, however in the new version springboot, it happens automatically with each Hikari datasource, so simply I removed that code from my method then it worked fine.\r\n\r\n    @Bean(name = &quot;myDataSource&quot;)\r\n    public DataSource dataSource(/* final MeterRegistry metricRegistry */) {\r\n        final var dataSource = DataSourceBuilder.create().build();\r\n       /* if (dataSource instanceof HikariDataSource) {\r\n            final var hikariDs = (HikariDataSource) dataSource;\r\n            hikariDs.setMetricRegistry(metricRegistry);\r\n        } */\r\n\r\n        return dataSource;\r\n    }\r\n\r\nNote: Setting the `spring.main.allow-circular-references=true` didn&#39;t work with my multiple datasources project.\r\n\r\nHope it could help.","title":"Getting circular reference error for bean name &#39;prometheusMeterRegistry&#39; using springboot actuator with Prometheus and RestTemplate","body":"<p>I'm sharing my experience as it took more time checking the root cause of that circular reference.\nI faced the same issue with prometheusMeterRegistry after upgrading to sprintboot 2.6.x and 2.7.x As I had dependency on micrometer-registry-prometheus in my POM file.</p>\n<p>The code was setting the metricRegistry of prometheus manually to HikariDataSource, however in the new version springboot, it happens automatically with each Hikari datasource, so simply I removed that code from my method then it worked fine.</p>\n<pre><code>@Bean(name = &quot;myDataSource&quot;)\npublic DataSource dataSource(/* final MeterRegistry metricRegistry */) {\n    final var dataSource = DataSourceBuilder.create().build();\n   /* if (dataSource instanceof HikariDataSource) {\n        final var hikariDs = (HikariDataSource) dataSource;\n        hikariDs.setMetricRegistry(metricRegistry);\n    } */\n\n    return dataSource;\n}\n</code></pre>\n<p>Note: Setting the <code>spring.main.allow-circular-references=true</code> didn't work with my multiple datasources project.</p>\n<p>Hope it could help.</p>\n"}],"owner":{"account_id":20454473,"reputation":11,"user_id":15008461,"display_name":"Jays"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":777,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677071014,"creation_date":1665201518,"question_id":73994265,"body_markdown":"I am getting &#39;prometheusMeterRegistry&#39; bean is currently in creation error (see exact stacktrace below) when using Prometheus with springboot actuator along with RestTemplate. This seems to be due to circular reference of prometheusMeterRegistry when using along with RestTemplate/Builder that are autowired in my application and springboot dependency libraries.\r\nI have spent all three days to analyze and fix the issue and referred solutions provided in several forums with No luck. I am getting this error at the time of server startup but surprisingly the /actuator/promethus url is coming up fine in my local but ofcourse without the rest api details as restTemplate has some dependency injection issue due to PrometheusMeterRegistry. When I deploy the same code on server (I attempted to deploy on server since it was working in local besides there are startup errors), due to error at startup the application is not getting deployed successfully on built-in tomcat server.\r\nPlease share your thoughts on how this can be addressed.\r\n\r\n**Error stacktrace:**\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;metricsRestTemplateCustomizer&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/client/RestTemplateMetricsConfiguration.class]: Unsatisfied dependency expressed through method &#39;metricsRestTemplateCustomizer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;prometheusMeterRegistry&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1616)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1417)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2119)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2113)\r\n\tat org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration.restTemplateBuilderConfigurer(RestTemplateAutoConfiguration.java:61)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 140 more\r\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;prometheusMeterRegistry&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n```\r\n\r\nAs recommended in some of the forums I have also configured the below property to break the circular reference and it worked fine to break the cirular ref as it is intended but I got different error again at startup time. Below is the error.\r\n\r\nproperty entry: \r\n\r\n    spring.main.allow-circular-references=true\r\n\r\n**Error stacktrace:**\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;healthRegistryCustomizer&#39; defined in class path resource [org/sample/monitor/MeterConfig.class]: Unsatisfied dependency expressed through method &#39;healthRegistryCustomizer&#39; parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthContributorRegistry&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat app//org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1616)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1417)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2119)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2113)\r\n\tat app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.asOrderedList(MeterRegistryConfigurer.java:90)\r\n\tat app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.customize(MeterRegistryConfigurer.java:77)\r\n\tat app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.configure(MeterRegistryConfigurer.java:63)\r\n\tat app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryPostProcessor.postProcessAfterInitialization(MeterRegistryPostProcessor.java:64)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:455)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n\t... 111 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthContributorRegistry&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n```\r\n\t\r\nBelow is my implementation of RestTemplate and MeterRegistryCustomizer Bean\r\n\r\n```java\r\n    @Configuration\r\n    public class MeterConfig {\r\n    \t@Bean\r\n        public MeterRegistryCustomizer&lt;MeterRegistry&gt; healthRegistryCustomizer(@Autowired HealthContributorRegistry healthRegistry) {\r\n    \r\n            return  registry -&gt; healthRegistry.stream()\r\n                    .forEach(namedContributor -&gt; registry.gauge(&quot;health&quot;,\r\n                            details(namedContributor),\r\n                            healthRegistry, health -&gt; {\r\n                                Status status = ((HealthIndicator) health\r\n                                        .getContributor(namedContributor.getName()))\r\n                                        .getHealth(true)\r\n                                        .getStatus();\r\n                                return healthToCode(status);\r\n                            }));\r\n        }\r\n\r\n      private static  Iterable&lt;Tag&gt; details(NamedContributor&lt;HealthContributor&gt; contributor) {\r\n        HealthContributor contrib = contributor.getContributor();\r\n        HealthIndicator healthContributor = (HealthIndicator) contrib;\r\n        String name = contributor.getName();\r\n        List&lt;Tag&gt; tagList = new ArrayList&lt;&gt;();\r\n        tagList.add(Tag.of(&quot;name&quot;, name));\r\n        String details = healthContributor.getHealth(true).getDetails().toString();\r\n        tagList.add(Tag.of(&quot;details&quot;, details));\r\n        return tagList;\r\n    }\r\n\r\n    public static int healthToCode(Status status) {\r\n        return status.equals(Status.UP) ? 1 : 0;\r\n    }\r\n}\r\n    \r\n    @Configuration\r\n    @EnableScheduling\r\n    public class AppConfig {\r\n    \t@Bean\r\n    \t@ConditionalOnMissingBean\r\n    \tpublic RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\r\n    \t\treturn restTemplateBuilder.build();\r\n    \t}\r\n    }\r\n\r\n    @Component\r\n    public class MyHealthIndicator implements HealthIndicator {\r\n    \t\r\n    \t@Autowired\r\n    \tMyRepo myrepo;\r\n    \t\r\n    \t@Override\r\n    \tpublic Health health() {\r\n    \t\treturn myrepo.ping() == &quot;SUCCESS&quot; ? Health.UP.build(): Health.DOWN.build(); //this will return the \r\n    \t}\r\n    }\r\n\r\n    @Repository\r\n    public class MyRepo {\r\n    \t\r\n    \t@Autowired\r\n    \tRestTemplate restTemplate;\r\n    \t\r\n    \tpublic String ping() {\r\n    \t\t\treturn restTemplate.exchange(&quot;url&quot;, GET, new HttpEntity(requestBody, headers), String.class);\r\n    \t}\r\n    }\r\n```\r\n\r\nIf you observe in my code, I have tried @Lazy initialization and @DependsOn as well to delay the bean initilization assuming that PrometheusMeterRegistry MeterRegistry bean creation is dependent on restTemplate/PrometheusMeterRegistry.\r\n\r\nI might be doing something wrong here with respect to injecting beans. Please share your thoughts of how to fix this.\r\nI am using Springboot 2.7.2 and dependency management to control dependency versions and also added dependency for io.micrometer registry for prometheus.\r\n","title":"Getting circular reference error for bean name &#39;prometheusMeterRegistry&#39; using springboot actuator with Prometheus and RestTemplate","body":"<p>I am getting 'prometheusMeterRegistry' bean is currently in creation error (see exact stacktrace below) when using Prometheus with springboot actuator along with RestTemplate. This seems to be due to circular reference of prometheusMeterRegistry when using along with RestTemplate/Builder that are autowired in my application and springboot dependency libraries.\nI have spent all three days to analyze and fix the issue and referred solutions provided in several forums with No luck. I am getting this error at the time of server startup but surprisingly the /actuator/promethus url is coming up fine in my local but ofcourse without the rest api details as restTemplate has some dependency injection issue due to PrometheusMeterRegistry. When I deploy the same code on server (I attempted to deploy on server since it was working in local besides there are startup errors), due to error at startup the application is not getting deployed successfully on built-in tomcat server.\nPlease share your thoughts on how this can be addressed.</p>\n<p><strong>Error stacktrace:</strong></p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'metricsRestTemplateCustomizer' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/client/RestTemplateMetricsConfiguration.class]: Unsatisfied dependency expressed through method 'metricsRestTemplateCustomizer' parameter 0; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'prometheusMeterRegistry': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1616)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1417)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2119)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2113)\n    at org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration.restTemplateBuilderConfigurer(RestTemplateAutoConfiguration.java:61)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 140 more\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'prometheusMeterRegistry': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n</code></pre>\n<p>As recommended in some of the forums I have also configured the below property to break the circular reference and it worked fine to break the cirular ref as it is intended but I got different error again at startup time. Below is the error.</p>\n<p>property entry:</p>\n<pre><code>spring.main.allow-circular-references=true\n</code></pre>\n<p><strong>Error stacktrace:</strong></p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'healthRegistryCustomizer' defined in class path resource [org/sample/monitor/MeterConfig.class]: Unsatisfied dependency expressed through method 'healthRegistryCustomizer' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.boot.actuate.health.HealthContributorRegistry' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at app//org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1616)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1417)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2119)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2113)\n    at app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.asOrderedList(MeterRegistryConfigurer.java:90)\n    at app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.customize(MeterRegistryConfigurer.java:77)\n    at app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.configure(MeterRegistryConfigurer.java:63)\n    at app//org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryPostProcessor.postProcessAfterInitialization(MeterRegistryPostProcessor.java:64)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:455)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n    ... 111 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.boot.actuate.health.HealthContributorRegistry' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n</code></pre>\n<p>Below is my implementation of RestTemplate and MeterRegistryCustomizer Bean</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration\n    public class MeterConfig {\n        @Bean\n        public MeterRegistryCustomizer&lt;MeterRegistry&gt; healthRegistryCustomizer(@Autowired HealthContributorRegistry healthRegistry) {\n    \n            return  registry -&gt; healthRegistry.stream()\n                    .forEach(namedContributor -&gt; registry.gauge(&quot;health&quot;,\n                            details(namedContributor),\n                            healthRegistry, health -&gt; {\n                                Status status = ((HealthIndicator) health\n                                        .getContributor(namedContributor.getName()))\n                                        .getHealth(true)\n                                        .getStatus();\n                                return healthToCode(status);\n                            }));\n        }\n\n      private static  Iterable&lt;Tag&gt; details(NamedContributor&lt;HealthContributor&gt; contributor) {\n        HealthContributor contrib = contributor.getContributor();\n        HealthIndicator healthContributor = (HealthIndicator) contrib;\n        String name = contributor.getName();\n        List&lt;Tag&gt; tagList = new ArrayList&lt;&gt;();\n        tagList.add(Tag.of(&quot;name&quot;, name));\n        String details = healthContributor.getHealth(true).getDetails().toString();\n        tagList.add(Tag.of(&quot;details&quot;, details));\n        return tagList;\n    }\n\n    public static int healthToCode(Status status) {\n        return status.equals(Status.UP) ? 1 : 0;\n    }\n}\n    \n    @Configuration\n    @EnableScheduling\n    public class AppConfig {\n        @Bean\n        @ConditionalOnMissingBean\n        public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\n            return restTemplateBuilder.build();\n        }\n    }\n\n    @Component\n    public class MyHealthIndicator implements HealthIndicator {\n        \n        @Autowired\n        MyRepo myrepo;\n        \n        @Override\n        public Health health() {\n            return myrepo.ping() == &quot;SUCCESS&quot; ? Health.UP.build(): Health.DOWN.build(); //this will return the \n        }\n    }\n\n    @Repository\n    public class MyRepo {\n        \n        @Autowired\n        RestTemplate restTemplate;\n        \n        public String ping() {\n                return restTemplate.exchange(&quot;url&quot;, GET, new HttpEntity(requestBody, headers), String.class);\n        }\n    }\n</code></pre>\n<p>If you observe in my code, I have tried @Lazy initialization and @DependsOn as well to delay the bean initilization assuming that PrometheusMeterRegistry MeterRegistry bean creation is dependent on restTemplate/PrometheusMeterRegistry.</p>\n<p>I might be doing something wrong here with respect to injecting beans. Please share your thoughts of how to fix this.\nI am using Springboot 2.7.2 and dependency management to control dependency versions and also added dependency for io.micrometer registry for prometheus.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":8,"creation_date":1677070540,"post_id":75532961,"comment_id":133264139,"body_markdown":"Pro-tip: when you ask &quot;is this a bug in Java&quot; then 99 times out of 100 it&#39;s not.","body":"Pro-tip: when you ask &quot;is this a bug in Java&quot; then 99 times out of 100 it&#39;s not."},{"owner":{"account_id":20013102,"reputation":641,"user_id":14669745,"display_name":"Pawan.Java"},"score":2,"creation_date":1677070688,"post_id":75532961,"comment_id":133264191,"body_markdown":"It&#39;s not a bug, it&#39;s a feature","body":"It&#39;s not a bug, it&#39;s a feature"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1677070689,"post_id":75532961,"comment_id":133264192,"body_markdown":"And just for the record: remind yourself about [mcve]. Include actual vs expected output. (I would expect here that the type is always string, and that the compiler turns the 2000 in &quot;2000&quot; ... but yeah, that is just guessing for now). So: if you tested that with say input 0 and input -1, then include the output in your question please.","body":"And just for the record: remind yourself about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Include actual vs expected output. (I would expect here that the type is always string, and that the compiler turns the 2000 in &quot;2000&quot; ... but yeah, that is just guessing for now). So: if you tested that with say input 0 and input -1, then include the output in your question please."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1677070745,"post_id":75532961,"comment_id":133264213,"body_markdown":"Do you expect this to compile: `var output = someBoolean ? &quot;Sunday&quot; : 2000;`?","body":"Do you expect this to compile: <code>var output = someBoolean ? &quot;Sunday&quot; : 2000;</code>?"},{"owner":{"account_id":452919,"reputation":3460,"user_id":849632,"accept_rate":85,"display_name":"Arun"},"score":1,"creation_date":1677070757,"post_id":75532961,"comment_id":133264223,"body_markdown":"the type becomes `Integer` in one case and `String` in another case","body":"the type becomes <code>Integer</code> in one case and <code>String</code> in another case"},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1677070785,"post_id":75532961,"comment_id":133264230,"body_markdown":"`Object` is also a valid type","body":"<code>Object</code> is also a valid type"},{"owner":{"account_id":3524496,"reputation":168,"user_id":2945996,"display_name":"rimesc"},"score":1,"creation_date":1677070914,"post_id":75532961,"comment_id":133264275,"body_markdown":"Actually, the inferred type (at least according to my IDE) is `Serializable &amp; Comparable&lt;? extends Serializable &amp; Comparable&lt;?&gt;&gt;`, but the point is it the inferred type doesn’t have to be one of the specific types.","body":"Actually, the inferred type (at least according to my IDE) is <code>Serializable &amp; Comparable&lt;? extends Serializable &amp; Comparable&lt;?&gt;&gt;</code>, but the point is it the inferred type doesn’t have to be one of the specific types."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1677070704,"creation_date":1677070704,"answer_id":75533014,"question_id":75532961,"body_markdown":"In this case `var dayOfTheWeek` will be roughly equivalent to `Object dayOfTheWeek`. &lt;sup&gt;*&lt;/sup&gt;\r\n\r\nSo the (static) type of the variable will always be the same: one that can take both an `Integer` and a `String` value, as necessary.\r\n\r\nThe value it actually *references* during runtime will be *either* a `String` or an `Integer`, depending on the `day` value passed in.\r\n\r\n&lt;sup&gt;* Since `String` and `Integer` also share the interfaces `Serializable` and `Comparable` it&#39;ll likely be something *like* `Serializable &amp; Comparable&lt;?&gt;` which can&#39;t be written as a proper type but `var` doesn&#39;t care: it can handle types that you can&#39;t write directly in Java. IntelliJ IDEA describes the type as `java.io.Serializable &amp; Comparable&lt;? extends java.io.Serializable &amp; Comparable&lt;?&gt; &amp; java.lang.constant.Constable &amp; java.lang.constant.ConstantDesc&gt; &amp; java.lang.constant.Constable &amp; java.lang.constant.ConstantDesc`, which is quite a mouthful, to be honest.&lt;/sup&gt;","title":"Dynamic type assignment in Java - Is this a bug in Java?","body":"<p>In this case <code>var dayOfTheWeek</code> will be roughly equivalent to <code>Object dayOfTheWeek</code>. <sup>*</sup></p>\n<p>So the (static) type of the variable will always be the same: one that can take both an <code>Integer</code> and a <code>String</code> value, as necessary.</p>\n<p>The value it actually <em>references</em> during runtime will be <em>either</em> a <code>String</code> or an <code>Integer</code>, depending on the <code>day</code> value passed in.</p>\n<p><sup>* Since <code>String</code> and <code>Integer</code> also share the interfaces <code>Serializable</code> and <code>Comparable</code> it'll likely be something <em>like</em> <code>Serializable &amp; Comparable&lt;?&gt;</code> which can't be written as a proper type but <code>var</code> doesn't care: it can handle types that you can't write directly in Java. IntelliJ IDEA describes the type as <code>java.io.Serializable &amp; Comparable&lt;? extends java.io.Serializable &amp; Comparable&lt;?&gt; &amp; java.lang.constant.Constable &amp; java.lang.constant.ConstantDesc&gt; &amp; java.lang.constant.Constable &amp; java.lang.constant.ConstantDesc</code>, which is quite a mouthful, to be honest.</sup></p>\n"}],"owner":{"account_id":452919,"reputation":3460,"user_id":849632,"accept_rate":85,"display_name":"Arun"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":75533014,"answer_count":1,"score":-1,"last_activity_date":1677070704,"creation_date":1677070421,"question_id":75532961,"body_markdown":"I was all under the impression that compiler will ensure the type when a `var` keyword in Java is declared and I cannot assign type dynamically based on a condition. But I am not sure if my understanding is wrong or is this a bug in Java. See my below code\r\n\r\n```java\r\npublic static void printDayOfWeek_new_style(int day) {\r\n        var dayOfTheWeek = switch (day) {\r\n            case 0 -&gt; &quot;Sunday&quot;;\r\n            case 1 -&gt; &quot;Monday&quot;;\r\n            case 2 -&gt; &quot;Tuesday&quot;;\r\n\r\n            case 3 -&gt; &quot;Wednesday&quot;;\r\n            case 4 -&gt; &quot;Thursday&quot;;\r\n            case 5 -&gt; &quot;Friday&quot;;\r\n             \r\n            case 6 -&gt; &quot;Saturday&quot;;\r\n\r\n            default -&gt; 2000;\r\n               \r\n        };\r\n        System.out.println(&quot;New &gt;&gt; &quot;+dayOfTheWeek);\r\n\r\n        if (dayOfTheWeek instanceof String) {\r\n            System.out.println(&quot;yes it is a string&quot;);\r\n        }else if (dayOfTheWeek instanceof Integer) {\r\n            System.out.println(&quot;yes it is an integer&quot;);\r\n        }\r\n                           \r\n   }\r\n```\r\n\r\nthe `dayOfTheWeek` variable becomes an `Integer` if the switch falls to the `default` statement, whereas the same variable becomes a `String` when it falls in to one the valid `case`s\r\n\r\nIs this not something that compiler should catch and why it is even allowed in the first place ? is there a genuine usecase for this ?","title":"Dynamic type assignment in Java - Is this a bug in Java?","body":"<p>I was all under the impression that compiler will ensure the type when a <code>var</code> keyword in Java is declared and I cannot assign type dynamically based on a condition. But I am not sure if my understanding is wrong or is this a bug in Java. See my below code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void printDayOfWeek_new_style(int day) {\n        var dayOfTheWeek = switch (day) {\n            case 0 -&gt; &quot;Sunday&quot;;\n            case 1 -&gt; &quot;Monday&quot;;\n            case 2 -&gt; &quot;Tuesday&quot;;\n\n            case 3 -&gt; &quot;Wednesday&quot;;\n            case 4 -&gt; &quot;Thursday&quot;;\n            case 5 -&gt; &quot;Friday&quot;;\n             \n            case 6 -&gt; &quot;Saturday&quot;;\n\n            default -&gt; 2000;\n               \n        };\n        System.out.println(&quot;New &gt;&gt; &quot;+dayOfTheWeek);\n\n        if (dayOfTheWeek instanceof String) {\n            System.out.println(&quot;yes it is a string&quot;);\n        }else if (dayOfTheWeek instanceof Integer) {\n            System.out.println(&quot;yes it is an integer&quot;);\n        }\n                           \n   }\n</code></pre>\n<p>the <code>dayOfTheWeek</code> variable becomes an <code>Integer</code> if the switch falls to the <code>default</code> statement, whereas the same variable becomes a <code>String</code> when it falls in to one the valid <code>case</code>s</p>\n<p>Is this not something that compiler should catch and why it is even allowed in the first place ? is there a genuine usecase for this ?</p>\n"},{"tags":["java","android","camera"],"owner":{"account_id":17236515,"reputation":1,"user_id":12479874,"display_name":"Faraz Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677070226,"creation_date":1677070226,"question_id":75532921,"body_markdown":"recelty i have reported issues from client that some users are spoofing camera to upload image from gallery instead of captured. so is there any solution to restrict to users to stop this excercise like spoofing location(fake location). And Third party app GalleryCam(https://m.apkpure.com/gallerycam/com.github.fkloft.gallerycam) is works on mostly samsung devices.\r\n\r\nHere is my camera code\r\n```\r\nIntent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);\r\n        if (takePictureIntent.resolveActivity(this.getPackageManager()) != null) {\r\n            startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\r\n        }\r\n```\r\n\r\n\r\nI have tryed multiple things on internet but didn&#39;t get any solution.","title":"GalleryCam is spoofing camera to capture image into both option pick from gallery and capute image","body":"<p>recelty i have reported issues from client that some users are spoofing camera to upload image from gallery instead of captured. so is there any solution to restrict to users to stop this excercise like spoofing location(fake location). And Third party app GalleryCam(<a href=\"https://m.apkpure.com/gallerycam/com.github.fkloft.gallerycam\" rel=\"nofollow noreferrer\">https://m.apkpure.com/gallerycam/com.github.fkloft.gallerycam</a>) is works on mostly samsung devices.</p>\n<p>Here is my camera code</p>\n<pre><code>Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);\n        if (takePictureIntent.resolveActivity(this.getPackageManager()) != null) {\n            startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\n        }\n</code></pre>\n<p>I have tryed multiple things on internet but didn't get any solution.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1677069589,"post_id":75532673,"comment_id":133263842,"body_markdown":"@Pushpak consider using profiles as `@Profile` supports negation.","body":"@Pushpak consider using profiles as <code>@Profile</code> supports negation."}],"answers":[{"tags":[],"owner":{"account_id":4244064,"reputation":84,"user_id":3473236,"accept_rate":40,"display_name":"bugrahan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677070074,"creation_date":1677070074,"answer_id":75532890,"question_id":75532673,"body_markdown":"You can use:\r\n\r\n&gt; @ConditionalOnExpression(&quot;&#39;${region}&#39; != &#39;local&#39;&quot;)\r\n\r\n","title":"Can we use @Configuration annotation which can only load based on application.properties attributes?","body":"<p>You can use:</p>\n<blockquote>\n<p>@ConditionalOnExpression(&quot;'${region}' != 'local'&quot;)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677070177,"creation_date":1677070177,"answer_id":75532907,"question_id":75532673,"body_markdown":"There is a `@ConditionalOnProperty` annotation, but this annotation only allows you to load the configuration if the property matches. So this can&#39;t be used if you want to load the configuration if the property does not match.\r\n\r\nThe easiest solution would be to work with Spring profiles. This can be achieved by using the `spring.profiles.active` property:\r\n\r\n```properties\r\nspring.profiles.active=local\r\n```\r\n\r\nAnd then you can use the `@Profile` annotation to only load your configuration if the profile isn&#39;t local:\r\n\r\n```java\r\n@Profile(&quot;!local&quot;) // Add this\r\n@Configuration\r\npublic class NotLocalConfiguration {\r\n    // Only loaded when profile is not local\r\n}\r\n```\r\n\r\n---\r\n\r\nIf you really want to work with the `region` property, you can implement your own conditional. This can be achieved by writing a class that implements `Condition`:\r\n\r\n```java\r\npublic class NotLocalCondition implements Condition {\r\n    @Override\r\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n        return !&quot;local&quot;.equals(context.getEnvironment().getProperty(&quot;region&quot;));\r\n    }\r\n}\r\n```\r\n\r\nAnd then you can apply it by using the following anotation:\r\n\r\n```java\r\n@Conditional(NotLocalCondition.class) // Add this\r\n@Configuration\r\npublic class NotLocalConfiguration {\r\n    // Only loaded when profile is not local\r\n}\r\n```\r\n\r\n","title":"Can we use @Configuration annotation which can only load based on application.properties attributes?","body":"<p>There is a <code>@ConditionalOnProperty</code> annotation, but this annotation only allows you to load the configuration if the property matches. So this can't be used if you want to load the configuration if the property does not match.</p>\n<p>The easiest solution would be to work with Spring profiles. This can be achieved by using the <code>spring.profiles.active</code> property:</p>\n<pre><code>spring.profiles.active=local\n</code></pre>\n<p>And then you can use the <code>@Profile</code> annotation to only load your configuration if the profile isn't local:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Profile(&quot;!local&quot;) // Add this\n@Configuration\npublic class NotLocalConfiguration {\n    // Only loaded when profile is not local\n}\n</code></pre>\n<hr />\n<p>If you really want to work with the <code>region</code> property, you can implement your own conditional. This can be achieved by writing a class that implements <code>Condition</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class NotLocalCondition implements Condition {\n    @Override\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n        return !&quot;local&quot;.equals(context.getEnvironment().getProperty(&quot;region&quot;));\n    }\n}\n</code></pre>\n<p>And then you can apply it by using the following anotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Conditional(NotLocalCondition.class) // Add this\n@Configuration\npublic class NotLocalConfiguration {\n    // Only loaded when profile is not local\n}\n</code></pre>\n"}],"owner":{"account_id":15549353,"reputation":147,"user_id":15204797,"display_name":"Pushpak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75532890,"answer_count":2,"score":0,"last_activity_date":1677070177,"creation_date":1677068847,"question_id":75532673,"body_markdown":"I have a property in my application.properties file that says as below.\r\n```\r\nregion = local;\r\n```\r\nI have a class LoadConfiguration.java like below.\r\n```\r\n@Configuration\r\npublic class LoadConfiguration {\r\n @Bean\r\n public ....\r\n .....\r\n}\r\n```\r\n\r\nI want spring to load the configuration only if the region is not local. How can I achieve such functionality?","title":"Can we use @Configuration annotation which can only load based on application.properties attributes?","body":"<p>I have a property in my application.properties file that says as below.</p>\n<pre><code>region = local;\n</code></pre>\n<p>I have a class LoadConfiguration.java like below.</p>\n<pre><code>@Configuration\npublic class LoadConfiguration {\n @Bean\n public ....\n .....\n}\n</code></pre>\n<p>I want spring to load the configuration only if the region is not local. How can I achieve such functionality?</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1677061446,"post_id":75530866,"comment_id":133261469,"body_markdown":"Your example JSON doesn&#39;t contain a `&quot;ModelUrl&quot;`, so obviously, it cannot be retrieved.","body":"Your example JSON doesn&#39;t contain a <code>&quot;ModelUrl&quot;</code>, so obviously, it cannot be retrieved."},{"owner":{"account_id":20711523,"reputation":11,"user_id":15208046,"display_name":"Se&#231;kin Kurtalan"},"score":0,"creation_date":1677068556,"post_id":75530866,"comment_id":133263518,"body_markdown":"I put the data as an example, I know it doesn&#39;t has ModelUrl in it :).","body":"I put the data as an example, I know it doesn&#39;t has ModelUrl in it :)."},{"owner":{"account_id":20711523,"reputation":11,"user_id":15208046,"display_name":"Se&#231;kin Kurtalan"},"score":0,"creation_date":1677069105,"post_id":75530866,"comment_id":133263686,"body_markdown":"The file that I want to search in is big to post, there was a misunderstanding about the example it seems. I just put the example JSON to show what is the data I am trying to search look like.","body":"The file that I want to search in is big to post, there was a misunderstanding about the example it seems. I just put the example JSON to show what is the data I am trying to search look like."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1677069270,"post_id":75530866,"comment_id":133263734,"body_markdown":"It is important that example data you give matches the problem you&#39;re trying to solve.","body":"It is important that example data you give matches the problem you&#39;re trying to solve."},{"owner":{"account_id":20711523,"reputation":11,"user_id":15208046,"display_name":"Se&#231;kin Kurtalan"},"score":0,"creation_date":1677069381,"post_id":75530866,"comment_id":133263768,"body_markdown":"Well I should put a link then, at least showing the file might help people to understand the question better.","body":"Well I should put a link then, at least showing the file might help people to understand the question better."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1677069494,"post_id":75530866,"comment_id":133263804,"body_markdown":"You don&#39;t have to put the entire file, you just need to provide a representative sample that matches your problem description. You say you can&#39;t get `&quot;ModelUrl&quot;`, and given your example data, that is not surprising, because it isn&#39;t there. If it had contained `&quot;ModelUrl&quot;`, but for example, nested in a nested object, it would result in a different answer, etc.","body":"You don&#39;t have to put the entire file, you just need to provide a representative sample that matches your problem description. You say you can&#39;t get <code>&quot;ModelUrl&quot;</code>, and given your example data, that is not surprising, because it isn&#39;t there. If it had contained <code>&quot;ModelUrl&quot;</code>, but for example, nested in a nested object, it would result in a different answer, etc."},{"owner":{"account_id":20711523,"reputation":11,"user_id":15208046,"display_name":"Se&#231;kin Kurtalan"},"score":0,"creation_date":1677069810,"post_id":75530866,"comment_id":133263903,"body_markdown":"Well you are right, but with the example I wanted to show nested datas, not the &quot;ModelUrl&quot; variable. But putting the example of &quot;ModelUrl&quot; data is a much better way to ask.","body":"Well you are right, but with the example I wanted to show nested datas, not the &quot;ModelUrl&quot; variable. But putting the example of &quot;ModelUrl&quot; data is a much better way to ask."}],"answers":[{"tags":[],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677069212,"creation_date":1677064716,"answer_id":75531980,"question_id":75530866,"body_markdown":"Not sure about your JSON data, but based on the problem which you stated giving a general solution:  \r\n\r\n```\r\n//Assuming JSON data is stored in a String with the name jsonData\r\n//Parse JSON\r\n\r\nJsonObject jsonObject = new Gson().fromJson(jsonData, JsonObject.class);\r\n\r\n//Assuming it&#39;s inside MenuItemList\r\n\r\nJsonArray menuItemList = jsonObject.getAsJsonObject(&quot;Menu&quot;).getAsJsonArray(&quot;MenuItemList&quot;);\r\n\r\n// Iterate array\r\n\r\nfor (JsonElement element : menuItemList) {\r\n    JsonObject menuItem = element.getAsJsonObject();\r\n    String modelUrl = menuItem.get(&quot;ModelUrl&quot;).getAsString();\r\n    System.out.println(modelUrl);\r\n}\r\n```\r\n\r\nIt&#39;s not a solution to your problem, but it may help you to understand.","title":"How to retrieve data from a JSON file using Gson library","body":"<p>Not sure about your JSON data, but based on the problem which you stated giving a general solution:</p>\n<pre><code>//Assuming JSON data is stored in a String with the name jsonData\n//Parse JSON\n\nJsonObject jsonObject = new Gson().fromJson(jsonData, JsonObject.class);\n\n//Assuming it's inside MenuItemList\n\nJsonArray menuItemList = jsonObject.getAsJsonObject(&quot;Menu&quot;).getAsJsonArray(&quot;MenuItemList&quot;);\n\n// Iterate array\n\nfor (JsonElement element : menuItemList) {\n    JsonObject menuItem = element.getAsJsonObject();\n    String modelUrl = menuItem.get(&quot;ModelUrl&quot;).getAsString();\n    System.out.println(modelUrl);\n}\n</code></pre>\n<p>It's not a solution to your problem, but it may help you to understand.</p>\n"}],"owner":{"account_id":20711523,"reputation":11,"user_id":15208046,"display_name":"Se&#231;kin Kurtalan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75531980,"answer_count":1,"score":0,"last_activity_date":1677069975,"creation_date":1677059236,"question_id":75530866,"body_markdown":"I have a JSON file that I parsed using Gson and I want to retrieve a variable named &quot;ModelUrl&quot; inside of it. As it seems, the data is a subdata of another node or data whatever you call and because of it I can not get the values that I want from the variable. I tried using such a function like: System.out.println(jsonObject.get(&quot;ModelUrl&quot;)), but it only returns null. How can I iterate in all the variables inside and get the variable that I specifically want?\r\n\r\nData is kinda big to put here, but I am gonna put a example to show what I mean by saying &quot;subdata&quot;.\r\n\r\nhttps://drive.google.com/file/d/11Ukmu9QjFPN3GCnr0Rp3QzHmoxm8XmUs/view?usp=sharing\r\n\r\nHere is the data if you want to look.\r\n\r\n\r\n```json\r\n&quot;CatalogList&quot;:{&quot;Items&quot;:[{&quot;HasCampaignBanners&quot;:false,&quot;ModelId&quot;:6280454,&quot;ModelUrl&quot;:&quot;/tr-TR/TR/urun/LC-WAIKIKI/kadin/Tunik/6280454/2747034&quot;,&quot;DefaultOptionImageUrl&quot;:&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a.jpg&quot;,&quot;OptionImageUrlList&quot;:[&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a.jpg&quot;,&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a1.jpg&quot;,&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a2.jpg&quot;]}\r\n\r\n//Something like this. \r\n```\r\n\r\nAnd here is the basic script that I wrote for retrieving data.\r\n\r\n```java\r\nJsonElement jsonElement = JsonParser.parseString(data);\r\nJsonObject jsonObject = jsonElement.getAsJsonObject();\r\nSystem.out.println(jsonObject.get(&quot;ModelUrl&quot;));\r\n\r\n\r\n```\r\n\r\n\r\n","title":"How to retrieve data from a JSON file using Gson library","body":"<p>I have a JSON file that I parsed using Gson and I want to retrieve a variable named &quot;ModelUrl&quot; inside of it. As it seems, the data is a subdata of another node or data whatever you call and because of it I can not get the values that I want from the variable. I tried using such a function like: System.out.println(jsonObject.get(&quot;ModelUrl&quot;)), but it only returns null. How can I iterate in all the variables inside and get the variable that I specifically want?</p>\n<p>Data is kinda big to put here, but I am gonna put a example to show what I mean by saying &quot;subdata&quot;.</p>\n<p><a href=\"https://drive.google.com/file/d/11Ukmu9QjFPN3GCnr0Rp3QzHmoxm8XmUs/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/11Ukmu9QjFPN3GCnr0Rp3QzHmoxm8XmUs/view?usp=sharing</a></p>\n<p>Here is the data if you want to look.</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;CatalogList&quot;:{&quot;Items&quot;:[{&quot;HasCampaignBanners&quot;:false,&quot;ModelId&quot;:6280454,&quot;ModelUrl&quot;:&quot;/tr-TR/TR/urun/LC-WAIKIKI/kadin/Tunik/6280454/2747034&quot;,&quot;DefaultOptionImageUrl&quot;:&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a.jpg&quot;,&quot;OptionImageUrlList&quot;:[&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a.jpg&quot;,&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a1.jpg&quot;,&quot;https://img-lcwaikiki.mncdn.com/mnresize/600/-/pim/productimages/20222/6280454/v1/l_20222-w2ic27z8-r3e-78-61-93-174_a2.jpg&quot;]}\n\n//Something like this. \n</code></pre>\n<p>And here is the basic script that I wrote for retrieving data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonElement jsonElement = JsonParser.parseString(data);\nJsonObject jsonObject = jsonElement.getAsJsonObject();\nSystem.out.println(jsonObject.get(&quot;ModelUrl&quot;));\n\n\n</code></pre>\n"},{"tags":["java","scala","intellij-idea","sbt"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677064100,"post_id":75531849,"comment_id":133262254,"body_markdown":"How did you install Scala and sbt?","body":"How did you install Scala and sbt?"},{"owner":{"account_id":1695045,"reputation":1304,"user_id":2604247,"accept_rate":63,"display_name":"Della"},"score":0,"creation_date":1677064461,"post_id":75531849,"comment_id":133262366,"body_markdown":"I do not remember the exact step, but the version 3.* involved Coursier in some form. Also, before that I installed somehow else, but that was 2.* which I purged. Now, coursier lists the following applications. amm\ncoursier\ncs\nsbt\nsbtn\nscala\nscala-cli\nscalac\nscalafmt","body":"I do not remember the exact step, but the version 3.* involved Coursier in some form. Also, before that I installed somehow else, but that was 2.* which I purged. Now, coursier lists the following applications. amm coursier cs sbt sbtn scala scala-cli scalac scalafmt"},{"owner":{"account_id":1695045,"reputation":1304,"user_id":2604247,"accept_rate":63,"display_name":"Della"},"score":0,"creation_date":1677064529,"post_id":75531849,"comment_id":133262388,"body_markdown":"Also, does intellij install its own scala as well somehow to complicate things, or does it use the coursier scala? I remember in intellij, in some places it shows 2.*.","body":"Also, does intellij install its own scala as well somehow to complicate things, or does it use the coursier scala? I remember in intellij, in some places it shows 2.*."},{"owner":{"account_id":31493,"reputation":30113,"user_id":86485,"accept_rate":93,"display_name":"Seth Tisue"},"score":1,"creation_date":1677123474,"post_id":75531849,"comment_id":133277174,"body_markdown":"https://docs.scala-lang.org/tutorials/FAQ/index.html#i-want-scala-213-or-some-other-version-why-does-sbt-say-its-using-scala-212","body":"<a href=\"https://docs.scala-lang.org/tutorials/FAQ/index.html#i-want-scala-213-or-some-other-version-why-does-sbt-say-its-using-scala-212\" rel=\"nofollow noreferrer\">docs.scala-lang.org/tutorials/FAQ/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1677069661,"creation_date":1677067380,"answer_id":75532443,"question_id":75531849,"body_markdown":"Normally, version of Scala installed in the system is irrelevant. There can be no Scala installed at all and you still will be able to run Scala with sbt if just Java and sbt are installed.\r\n\r\nWhen you start repl (command `scala`), you run the Scala installed in the system. Regarding IntelliJ, you can look at File -&gt; Project Structure.\r\n\r\nIn sbt you specify Scala version (`scalaVersion := ...`) in the build file (`build.sbt`). This is the version of Scala to be used for building the project. If sbt needs it will download necessary version of Scala.\r\n\r\nDifferent subprojects of your project can be built/cross-built with different versions of Scala.\r\n\r\n&gt;     sbt:sbt-testing&gt; scalaVersion\r\n&gt;     [info] 2.12.17\r\n\r\nIf you don&#39;t specify Scala version in `build.sbt`, by default sbt uses Scala version it&#39;s built with. It&#39;s some 2.12.x Scala.\r\n\r\n&gt; Also, how to remove all traces of scala 2 from my system\r\n\r\nOnly you can know how to rollback completely those steps you did to install it. You can try to run `which scala`, `which scalac` to look where it&#39;s located. You can delete the directory. Also you can look at `PATH` and `SCALA_HOME` variables (`echo $PATH`, `echo $SCALA_HOME`) and remove Scala parts.\r\n\r\n&gt; force sbt to use the system scala version?\r\n\r\nYou shouldn&#39;t do this. You can specify any Scala version you need in the build file. Also when you clonning/downloading somebody else&#39;s project it should be run with Scala version specified there.\r\n\r\nIn principle you can do this\r\n\r\nhttps://www.scala-sbt.org/1.x/docs/Local-Scala.html\r\n\r\nhttps://www.scala-sbt.org/1.x/docs/Configuring-Scala.html\r\n\r\nhttps://www.scala-sbt.org/1.x/docs/Howto-Scala.html\r\n\r\n&gt;  I read somewhere that scala 2 and 3 are not compatible\r\n\r\nYeah, Scala 2 and Scala 3 are different. For example `type T = List[Option[A]] forSome {type A}` compiles in Scala 2 but not Scala 3, `type T = [A] =&gt;&gt; [B] =&gt;&gt; (A, B)` compiles in Scala 3 but not Scala 2.\r\n\r\nhttp://dotty.epfl.ch/docs/reference/other-new-features/index.html\r\n\r\nhttp://dotty.epfl.ch/docs/reference/changed-features/index.html\r\n\r\nhttp://dotty.epfl.ch/docs/reference/dropped-features/index.html\r\n\r\nBut there is also Scala 2.13 - Scala 3 interop \r\n\r\nhttps://docs.scala-lang.org/scala3/guides/migration/compatibility-intro.html\r\n\r\nYou can see example of a project using both Scala 2.13 and Scala 3 in https://stackoverflow.com/questions/73836319/scala-spark-encoders-productx-where-x-is-a-case-class-keeps-giving-me-no-ty\r\n\r\n---\r\n\r\nhttps://stackoverflow.com/questions/64165617/which-version-of-sbt-scala2-13-3\r\n\r\nAbout sbt and how it runs: https://stackoverflow.com/questions/74440324/sbt-gives-java-lang-nullpointerexception-when-trying-to-run-spark\r\n\r\nhttps://stackoverflow.com/questions/8461013/how-can-i-check-the-sbt-version","title":"Why does SBT Show a Different ScalaVersion than My System?","body":"<p>Normally, version of Scala installed in the system is irrelevant. There can be no Scala installed at all and you still will be able to run Scala with sbt if just Java and sbt are installed.</p>\n<p>When you start repl (command <code>scala</code>), you run the Scala installed in the system. Regarding IntelliJ, you can look at File -&gt; Project Structure.</p>\n<p>In sbt you specify Scala version (<code>scalaVersion := ...</code>) in the build file (<code>build.sbt</code>). This is the version of Scala to be used for building the project. If sbt needs it will download necessary version of Scala.</p>\n<p>Different subprojects of your project can be built/cross-built with different versions of Scala.</p>\n<blockquote>\n<pre><code>sbt:sbt-testing&gt; scalaVersion\n[info] 2.12.17\n</code></pre>\n</blockquote>\n<p>If you don't specify Scala version in <code>build.sbt</code>, by default sbt uses Scala version it's built with. It's some 2.12.x Scala.</p>\n<blockquote>\n<p>Also, how to remove all traces of scala 2 from my system</p>\n</blockquote>\n<p>Only you can know how to rollback completely those steps you did to install it. You can try to run <code>which scala</code>, <code>which scalac</code> to look where it's located. You can delete the directory. Also you can look at <code>PATH</code> and <code>SCALA_HOME</code> variables (<code>echo $PATH</code>, <code>echo $SCALA_HOME</code>) and remove Scala parts.</p>\n<blockquote>\n<p>force sbt to use the system scala version?</p>\n</blockquote>\n<p>You shouldn't do this. You can specify any Scala version you need in the build file. Also when you clonning/downloading somebody else's project it should be run with Scala version specified there.</p>\n<p>In principle you can do this</p>\n<p><a href=\"https://www.scala-sbt.org/1.x/docs/Local-Scala.html\" rel=\"nofollow noreferrer\">https://www.scala-sbt.org/1.x/docs/Local-Scala.html</a></p>\n<p><a href=\"https://www.scala-sbt.org/1.x/docs/Configuring-Scala.html\" rel=\"nofollow noreferrer\">https://www.scala-sbt.org/1.x/docs/Configuring-Scala.html</a></p>\n<p><a href=\"https://www.scala-sbt.org/1.x/docs/Howto-Scala.html\" rel=\"nofollow noreferrer\">https://www.scala-sbt.org/1.x/docs/Howto-Scala.html</a></p>\n<blockquote>\n<p>I read somewhere that scala 2 and 3 are not compatible</p>\n</blockquote>\n<p>Yeah, Scala 2 and Scala 3 are different. For example <code>type T = List[Option[A]] forSome {type A}</code> compiles in Scala 2 but not Scala 3, <code>type T = [A] =&gt;&gt; [B] =&gt;&gt; (A, B)</code> compiles in Scala 3 but not Scala 2.</p>\n<p><a href=\"http://dotty.epfl.ch/docs/reference/other-new-features/index.html\" rel=\"nofollow noreferrer\">http://dotty.epfl.ch/docs/reference/other-new-features/index.html</a></p>\n<p><a href=\"http://dotty.epfl.ch/docs/reference/changed-features/index.html\" rel=\"nofollow noreferrer\">http://dotty.epfl.ch/docs/reference/changed-features/index.html</a></p>\n<p><a href=\"http://dotty.epfl.ch/docs/reference/dropped-features/index.html\" rel=\"nofollow noreferrer\">http://dotty.epfl.ch/docs/reference/dropped-features/index.html</a></p>\n<p>But there is also Scala 2.13 - Scala 3 interop</p>\n<p><a href=\"https://docs.scala-lang.org/scala3/guides/migration/compatibility-intro.html\" rel=\"nofollow noreferrer\">https://docs.scala-lang.org/scala3/guides/migration/compatibility-intro.html</a></p>\n<p>You can see example of a project using both Scala 2.13 and Scala 3 in <a href=\"https://stackoverflow.com/questions/73836319/scala-spark-encoders-productx-where-x-is-a-case-class-keeps-giving-me-no-ty\">Scala Spark Encoders.product[X] (where X is a case class) keeps giving me &quot;No TypeTag available for X&quot; error</a></p>\n<hr />\n<p><a href=\"https://stackoverflow.com/questions/64165617/which-version-of-sbt-scala2-13-3\">Which version of SBT ? scala2.13.3</a></p>\n<p>About sbt and how it runs: <a href=\"https://stackoverflow.com/questions/74440324/sbt-gives-java-lang-nullpointerexception-when-trying-to-run-spark\">SBT gives java.lang.NullPointerException when trying to run spark</a></p>\n<p><a href=\"https://stackoverflow.com/questions/8461013/how-can-i-check-the-sbt-version\">How can I check the SBT version?</a></p>\n"}],"owner":{"account_id":1695045,"reputation":1304,"user_id":2604247,"accept_rate":63,"display_name":"Della"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75532443,"answer_count":1,"score":0,"last_activity_date":1677069661,"creation_date":1677063947,"question_id":75531849,"body_markdown":"Self-teaching Scala and SBT from some online resources. One of the difficulties is decoupling different concepts of the toolchain, IDE (trying intellij) and the learning the language. Why is SBT showing a different scalaVersion from whatever version the system says I have? And is it a concern in how my code is compiled? Here is the console output. \r\n\r\n```none\r\ndella@dell-xps ~/s/l/sbt-testing&gt; scala --version\r\nScala code runner version 3.2.2 -- Copyright 2002-2023, LAMP/EPFL\r\ndella@dell-xps ~/s/l/sbt-testing&gt; scalac --version\r\nScala compiler version 3.2.2 -- Copyright 2002-2023, LAMP/EPFL\r\ndella@dell-xps ~/s/l/sbt-testing&gt; sbt\r\n[info] welcome to sbt 1.8.2 (Ubuntu Java 11.0.17)\r\n[info] loading project definition from /home/della/supply-chain-dev/learning_projects/sbt-testing/project\r\n[info] set current project to sbt-testing (in build file:/home/della/supply-chain-dev/learning_projects/sbt-testing/)\r\n[info] sbt server started at local:///home/della/.sbt/1.0/server/0b33882a8fc31214bc13/sock\r\n[info] started sbt server\r\nsbt:sbt-testing&gt; scalaVersion\r\n[info] 2.12.17\r\nsbt:sbt-testing&gt; ^D\r\ndella@dell-xps ~/s/l/sbt-testing&gt; sbt --version\r\nsbt version in this project: 1.8.2\r\nsbt script version: 1.8.2\r\n```\r\nHow to handle this? I read somewhere that scala 2 and 3 are not compatible, so how does it impact my code which is compatible with scala 3 but not with 2? \r\nAlso, how to remove all traces of scala 2 from my system and force sbt to use the system scala version? \r\n\r\nIf important, the OS is Ubuntu 22.04. ","title":"Why does SBT Show a Different ScalaVersion than My System?","body":"<p>Self-teaching Scala and SBT from some online resources. One of the difficulties is decoupling different concepts of the toolchain, IDE (trying intellij) and the learning the language. Why is SBT showing a different scalaVersion from whatever version the system says I have? And is it a concern in how my code is compiled? Here is the console output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>della@dell-xps ~/s/l/sbt-testing&gt; scala --version\nScala code runner version 3.2.2 -- Copyright 2002-2023, LAMP/EPFL\ndella@dell-xps ~/s/l/sbt-testing&gt; scalac --version\nScala compiler version 3.2.2 -- Copyright 2002-2023, LAMP/EPFL\ndella@dell-xps ~/s/l/sbt-testing&gt; sbt\n[info] welcome to sbt 1.8.2 (Ubuntu Java 11.0.17)\n[info] loading project definition from /home/della/supply-chain-dev/learning_projects/sbt-testing/project\n[info] set current project to sbt-testing (in build file:/home/della/supply-chain-dev/learning_projects/sbt-testing/)\n[info] sbt server started at local:///home/della/.sbt/1.0/server/0b33882a8fc31214bc13/sock\n[info] started sbt server\nsbt:sbt-testing&gt; scalaVersion\n[info] 2.12.17\nsbt:sbt-testing&gt; ^D\ndella@dell-xps ~/s/l/sbt-testing&gt; sbt --version\nsbt version in this project: 1.8.2\nsbt script version: 1.8.2\n</code></pre>\n<p>How to handle this? I read somewhere that scala 2 and 3 are not compatible, so how does it impact my code which is compatible with scala 3 but not with 2?\nAlso, how to remove all traces of scala 2 from my system and force sbt to use the system scala version?</p>\n<p>If important, the OS is Ubuntu 22.04.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1677067071,"post_id":75532235,"comment_id":133263070,"body_markdown":"It&#39;s a compilation errors. Exceptions are a runtime thing. You cannot &quot;catch&quot; compilation _errors_.","body":"It&#39;s a compilation errors. Exceptions are a runtime thing. You cannot &quot;catch&quot; compilation <i>errors</i>."},{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1677067107,"post_id":75532235,"comment_id":133263080,"body_markdown":"The return type of a method is determined at compile time, so this code does not make much sense. You should explain in more detail what you are really trying to accomplish","body":"The return type of a method is determined at compile time, so this code does not make much sense. You should explain in more detail what you are really trying to accomplish"},{"owner":{"account_id":20175743,"reputation":1,"user_id":14797452,"display_name":"GGH"},"score":0,"creation_date":1677071232,"post_id":75532235,"comment_id":133264381,"body_markdown":"I want to be able to insert the static f() function as the &quot;student code&quot; and print it whatever type he his writting in his code","body":"I want to be able to insert the static f() function as the &quot;student code&quot; and print it whatever type he his writting in his code"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677069528,"creation_date":1677069528,"answer_id":75532792,"question_id":75532235,"body_markdown":"Your error is a _compile time error_ - your code doesn&#39;t make sense. There is a fundamental difference between compile time errors, which occur even before you run anything (in fact, you can&#39;t run anything - you don&#39;t get class files), and runtime errors, which result when your code is compiled, you run it, and then something occurs at runtime that makes the code throw an exception.\r\n\r\nexceptions (and therefore, `try`/`catch`) apply to runtime errors __only__.\r\n\r\nYou seem to misunderstand what &quot;converted&quot; means in the error:\r\n\r\n&gt; error: incompatible types: String cannot be converted to Object[]\r\n\r\nAs is somewhat obvious from the code, the line `Object[] res_string = f();` __would not actually be executed__ if you tried to run this code somehow (you can&#39;t, as it won&#39;t compile, but let&#39;s say hypothetically this code would compile). After all, the `isArray` boolean value is `false`, so the `else` block won&#39;t trigger.\r\n\r\nNevertheless, you get this error, because that line of code doesn&#39;t make sense. And not for the reason you think!\r\n\r\nIf you replace your `f` method with:\r\n\r\n```\r\nstatic Object f() {\r\n  return new Object[10];\r\n}\r\n```\r\n\r\nIt __still__ will not compile, even though now clearly what `f()`  returns can easily be &#39;converted&#39; to an object array - it already _is_ an object array.\r\n\r\nThe problem isn&#39;t with the runtime at all. It&#39;s a simple type mismatch: The compiler notes that the specification of the `f()` method declares that it is allowed to return any value whose type is `Object` (every object fulfills that requirement, as does `null`).\r\n\r\nSure, __right now__, it always returns an object array, but those signatures are in part also about: Yeah okay but maybe later I&#39;ll change just the code within the `f()` method and I don&#39;t want any other code to then all of a sudden start breaking.\r\n\r\nYour code makes no sense in general, but the one-liner fix is that you want to inject an operation: &quot;Hey, compiler, please generate code that CHECKS that the value returned by `f()` is an `Object[]` array. If it is, great, do nothing and let the code continue, if it is not, throw a `ClassCastException`. With that injected, the _compiler_ is now fine with it (hey, if it isn&#39;t, at runtime, you get an exception, that&#39;s fine). You do this with a cast: `Object[] o = (Object[]) f();`.\r\n\r\nWhich still won&#39;t compile, because the compiler knows there is no point trying to cast an expression of type `String` to `Object[]`, as it __can never__ be true. Why would the compiler compile code it knows cannot possibly execute, ever? Instead it&#39;ll tell you that you&#39;re confused.","title":"Java &quot;try-catch&quot; an Object / Object Array types","body":"<p>Your error is a <em>compile time error</em> - your code doesn't make sense. There is a fundamental difference between compile time errors, which occur even before you run anything (in fact, you can't run anything - you don't get class files), and runtime errors, which result when your code is compiled, you run it, and then something occurs at runtime that makes the code throw an exception.</p>\n<p>exceptions (and therefore, <code>try</code>/<code>catch</code>) apply to runtime errors <strong>only</strong>.</p>\n<p>You seem to misunderstand what &quot;converted&quot; means in the error:</p>\n<blockquote>\n<p>error: incompatible types: String cannot be converted to Object[]</p>\n</blockquote>\n<p>As is somewhat obvious from the code, the line <code>Object[] res_string = f();</code> <strong>would not actually be executed</strong> if you tried to run this code somehow (you can't, as it won't compile, but let's say hypothetically this code would compile). After all, the <code>isArray</code> boolean value is <code>false</code>, so the <code>else</code> block won't trigger.</p>\n<p>Nevertheless, you get this error, because that line of code doesn't make sense. And not for the reason you think!</p>\n<p>If you replace your <code>f</code> method with:</p>\n<pre><code>static Object f() {\n  return new Object[10];\n}\n</code></pre>\n<p>It <strong>still</strong> will not compile, even though now clearly what <code>f()</code>  returns can easily be 'converted' to an object array - it already <em>is</em> an object array.</p>\n<p>The problem isn't with the runtime at all. It's a simple type mismatch: The compiler notes that the specification of the <code>f()</code> method declares that it is allowed to return any value whose type is <code>Object</code> (every object fulfills that requirement, as does <code>null</code>).</p>\n<p>Sure, <strong>right now</strong>, it always returns an object array, but those signatures are in part also about: Yeah okay but maybe later I'll change just the code within the <code>f()</code> method and I don't want any other code to then all of a sudden start breaking.</p>\n<p>Your code makes no sense in general, but the one-liner fix is that you want to inject an operation: &quot;Hey, compiler, please generate code that CHECKS that the value returned by <code>f()</code> is an <code>Object[]</code> array. If it is, great, do nothing and let the code continue, if it is not, throw a <code>ClassCastException</code>. With that injected, the <em>compiler</em> is now fine with it (hey, if it isn't, at runtime, you get an exception, that's fine). You do this with a cast: <code>Object[] o = (Object[]) f();</code>.</p>\n<p>Which still won't compile, because the compiler knows there is no point trying to cast an expression of type <code>String</code> to <code>Object[]</code>, as it <strong>can never</strong> be true. Why would the compiler compile code it knows cannot possibly execute, ever? Instead it'll tell you that you're confused.</p>\n"}],"owner":{"account_id":20175743,"reputation":1,"user_id":14797452,"display_name":"GGH"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677069528,"creation_date":1677066124,"question_id":75532235,"body_markdown":"Hello i&#39;m trying to do a &quot;cheap&quot; learnOcaml model for Java and I&#39;m trying to catch any type the function f() could catch but I have a problem with Object type when he is declared as &quot;Not array type&quot; I&#39;m getting that error while compiling:\r\n\r\n```\r\nTester.java:45: error: incompatible types: String cannot be converted to Object[]\r\n                                        Object[] res_string = f();\r\n                                                               ^\r\nTester.java:54: error: incompatible types: String cannot be converted to Object[]\r\n                                        Object[] res_char = f();\r\n                                                             ^\r\n2 errors\r\n```\r\nI&#39;m sure it&#39;s because Object type cannot be converted that way into Object[] type so I tried to try catch to handle that error but it&#39;s wrong so can someone helps me with that problem here is my code.\r\n\r\n```\r\nstatic String f() \r\n{\r\n     String res = &quot;2&quot;;\r\n     return res;\r\n}\r\n\r\npublic static void main (String args [])\r\n        {\r\n                Boolean isArray = f().getClass().isArray();\r\n                if(!isArray)\r\n                {\r\n                        System.out.println(f());\r\n                }\r\n                else\r\n                {\r\n                      Object[] res_string = f();\r\n                      for(int i=0; i&lt;res_string.length; i++)\r\n                      {\r\n                             System.out.print(res_string[i]);\r\n                      } \r\n                }\r\n        }\r\n```\r\n","title":"Java &quot;try-catch&quot; an Object / Object Array types","body":"<p>Hello i'm trying to do a &quot;cheap&quot; learnOcaml model for Java and I'm trying to catch any type the function f() could catch but I have a problem with Object type when he is declared as &quot;Not array type&quot; I'm getting that error while compiling:</p>\n<pre><code>Tester.java:45: error: incompatible types: String cannot be converted to Object[]\n                                        Object[] res_string = f();\n                                                               ^\nTester.java:54: error: incompatible types: String cannot be converted to Object[]\n                                        Object[] res_char = f();\n                                                             ^\n2 errors\n</code></pre>\n<p>I'm sure it's because Object type cannot be converted that way into Object[] type so I tried to try catch to handle that error but it's wrong so can someone helps me with that problem here is my code.</p>\n<pre><code>static String f() \n{\n     String res = &quot;2&quot;;\n     return res;\n}\n\npublic static void main (String args [])\n        {\n                Boolean isArray = f().getClass().isArray();\n                if(!isArray)\n                {\n                        System.out.println(f());\n                }\n                else\n                {\n                      Object[] res_string = f();\n                      for(int i=0; i&lt;res_string.length; i++)\n                      {\n                             System.out.print(res_string[i]);\n                      } \n                }\n        }\n</code></pre>\n"},{"tags":["java","machine-learning","deep-learning","recurrent-neural-network","text-generation"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677004217,"post_id":75517077,"comment_id":133250115,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":11009644,"reputation":1,"user_id":8087508,"display_name":"bstrdn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677069474,"creation_date":1676962091,"question_id":75517077,"body_markdown":"I&#39;m trying to generate new sentences based on a set of existing sentences using deeplearning4j. What would be the best way to approach this using deeplearning4j?\r\n\r\nCould anyone provide an example of how to create a simple sentence generation model using deeplearning4j, or direct me to any relevant resources? I would greatly appreciate any help or guidance!","title":"How to generate sentences using deeplearning4j?","body":"<p>I'm trying to generate new sentences based on a set of existing sentences using deeplearning4j. What would be the best way to approach this using deeplearning4j?</p>\n<p>Could anyone provide an example of how to create a simple sentence generation model using deeplearning4j, or direct me to any relevant resources? I would greatly appreciate any help or guidance!</p>\n"},{"tags":["java","google-cloud-platform","kubernetes","logback","stackdriver"],"answers":[{"tags":[],"owner":{"account_id":431745,"reputation":5025,"user_id":816017,"accept_rate":100,"display_name":"Erik Živković"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1495789660,"creation_date":1495659664,"answer_id":44168383,"question_id":44164730,"body_markdown":"This answer contained most of the information I needed: https://stackoverflow.com/a/39779646\r\n\r\nI have adapted the answer to fit my exact question, and to fix some weird imports and code that seems to have been deprecated.\r\n\r\nlogback.xml:\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\r\n                &lt;layout class=&quot;my.package.logging.GCPCloudLoggingJSONLayout&quot;&gt;\r\n                    &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg&lt;/pattern&gt;\r\n                &lt;/layout&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;root level=&quot;INFO&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\nGCPCloudLoggingJSONLayout:\r\n\r\n    import ch.qos.logback.classic.Level;\r\n    import ch.qos.logback.classic.PatternLayout;\r\n    import ch.qos.logback.classic.spi.ILoggingEvent;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    import java.util.Map;\r\n    \r\n    import static ch.qos.logback.classic.Level.DEBUG_INT;\r\n    import static ch.qos.logback.classic.Level.ERROR_INT;\r\n    import static ch.qos.logback.classic.Level.INFO_INT;\r\n    import static ch.qos.logback.classic.Level.TRACE_INT;\r\n    import static ch.qos.logback.classic.Level.WARN_INT;\r\n    \r\n    /**\r\n     * GKE fluentd ingestion detective work:\r\n     * https://cloud.google.com/error-reporting/docs/formatting-error-messages#json_representation\r\n     * http://google-cloud-python.readthedocs.io/en/latest/logging-handlers-container-engine.html\r\n     * http://google-cloud-python.readthedocs.io/en/latest/_modules/google/cloud/logging/handlers/container_engine.html#ContainerEngineHandler.format\r\n     * https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/logging/google/cloud/logging/handlers/_helpers.py\r\n     * https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry\r\n     */\r\n    public class GCPCloudLoggingJSONLayout extends PatternLayout {\r\n    \r\n        private static final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String doLayout(ILoggingEvent event) {\r\n            String formattedMessage = super.doLayout(event);\r\n            return doLayoutInternal(formattedMessage, event);\r\n        }\r\n    \r\n        /**\r\n         * For testing without having to deal wth the complexity of super.doLayout()\r\n         * Uses formattedMessage instead of event.getMessage()\r\n         */\r\n        private String doLayoutInternal(String formattedMessage, ILoggingEvent event) {\r\n            GCPCloudLoggingEvent gcpLogEvent =\r\n                new GCPCloudLoggingEvent(formattedMessage, convertTimestampToGCPLogTimestamp(event.getTimeStamp()),\r\n                    mapLevelToGCPLevel(event.getLevel()), event.getThreadName());\r\n    \r\n            try {\r\n                // Add a newline so that each JSON log entry is on its own line.\r\n                // Note that it is also important that the JSON log entry does not span multiple lines.\r\n                return objectMapper.writeValueAsString(gcpLogEvent) + &quot;\\n&quot;;\r\n            } catch (JsonProcessingException e) {\r\n                return &quot;&quot;;\r\n            }\r\n        }\r\n    \r\n        private static GCPCloudLoggingEvent.GCPCloudLoggingTimestamp convertTimestampToGCPLogTimestamp(\r\n            long millisSinceEpoch) {\r\n            int nanos =\r\n                ((int) (millisSinceEpoch % 1000)) * 1_000_000; // strip out just the milliseconds and convert to nanoseconds\r\n            long seconds = millisSinceEpoch / 1000L; // remove the milliseconds\r\n            return new GCPCloudLoggingEvent.GCPCloudLoggingTimestamp(seconds, nanos);\r\n        }\r\n    \r\n        private static String mapLevelToGCPLevel(Level level) {\r\n            switch (level.toInt()) {\r\n                case TRACE_INT:\r\n                    return &quot;TRACE&quot;;\r\n                case DEBUG_INT:\r\n                    return &quot;DEBUG&quot;;\r\n                case INFO_INT:\r\n                    return &quot;INFO&quot;;\r\n                case WARN_INT:\r\n                    return &quot;WARN&quot;;\r\n                case ERROR_INT:\r\n                    return &quot;ERROR&quot;;\r\n                default:\r\n                    return null; /* This should map to no level in GCP Cloud Logging */\r\n            }\r\n        }\r\n    \r\n        /* Must be public for Jackson JSON conversion */\r\n        public static class GCPCloudLoggingEvent {\r\n            private String message;\r\n            private GCPCloudLoggingTimestamp timestamp;\r\n            private String thread;\r\n            private String severity;\r\n    \r\n            public GCPCloudLoggingEvent(String message, GCPCloudLoggingTimestamp timestamp, String severity,\r\n                String thread) {\r\n                super();\r\n                this.message = message;\r\n                this.timestamp = timestamp;\r\n                this.thread = thread;\r\n                this.severity = severity;\r\n            }\r\n    \r\n            public String getMessage() {\r\n                return message;\r\n            }\r\n    \r\n            public void setMessage(String message) {\r\n                this.message = message;\r\n            }\r\n    \r\n            public GCPCloudLoggingTimestamp getTimestamp() {\r\n                return timestamp;\r\n            }\r\n    \r\n            public void setTimestamp(GCPCloudLoggingTimestamp timestamp) {\r\n                this.timestamp = timestamp;\r\n            }\r\n    \r\n            public String getThread() {\r\n                return thread;\r\n            }\r\n    \r\n            public void setThread(String thread) {\r\n                this.thread = thread;\r\n            }\r\n    \r\n            public String getSeverity() {\r\n                return severity;\r\n            }\r\n    \r\n            public void setSeverity(String severity) {\r\n                this.severity = severity;\r\n            }\r\n    \r\n            /* Must be public for JSON marshalling logic */\r\n            public static class GCPCloudLoggingTimestamp {\r\n                private long seconds;\r\n                private int nanos;\r\n    \r\n                public GCPCloudLoggingTimestamp(long seconds, int nanos) {\r\n                    super();\r\n                    this.seconds = seconds;\r\n                    this.nanos = nanos;\r\n                }\r\n    \r\n                public long getSeconds() {\r\n                    return seconds;\r\n                }\r\n    \r\n                public void setSeconds(long seconds) {\r\n                    this.seconds = seconds;\r\n                }\r\n    \r\n                public int getNanos() {\r\n                    return nanos;\r\n                }\r\n    \r\n                public void setNanos(int nanos) {\r\n                    this.nanos = nanos;\r\n                }\r\n    \r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, String&gt; getDefaultConverterMap() {\r\n            return PatternLayout.defaultConverterMap;\r\n        }\r\n    }\r\n\r\nAs I said earlier, the code was originally from another answer, I have just cleaned up the code slightly to fit my use-case better.\r\n","title":"GKE &amp; Stackdriver: Java logback logging format?","body":"<p>This answer contained most of the information I needed: <a href=\"https://stackoverflow.com/a/39779646\">https://stackoverflow.com/a/39779646</a></p>\n\n<p>I have adapted the answer to fit my exact question, and to fix some weird imports and code that seems to have been deprecated.</p>\n\n<p>logback.xml:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder class=\"ch.qos.logback.core.encoder.LayoutWrappingEncoder\"&gt;\n            &lt;layout class=\"my.package.logging.GCPCloudLoggingJSONLayout\"&gt;\n                &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg&lt;/pattern&gt;\n            &lt;/layout&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"STDOUT\"/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>GCPCloudLoggingJSONLayout:</p>\n\n<pre><code>import ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.PatternLayout;\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.util.Map;\n\nimport static ch.qos.logback.classic.Level.DEBUG_INT;\nimport static ch.qos.logback.classic.Level.ERROR_INT;\nimport static ch.qos.logback.classic.Level.INFO_INT;\nimport static ch.qos.logback.classic.Level.TRACE_INT;\nimport static ch.qos.logback.classic.Level.WARN_INT;\n\n/**\n * GKE fluentd ingestion detective work:\n * https://cloud.google.com/error-reporting/docs/formatting-error-messages#json_representation\n * http://google-cloud-python.readthedocs.io/en/latest/logging-handlers-container-engine.html\n * http://google-cloud-python.readthedocs.io/en/latest/_modules/google/cloud/logging/handlers/container_engine.html#ContainerEngineHandler.format\n * https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/logging/google/cloud/logging/handlers/_helpers.py\n * https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry\n */\npublic class GCPCloudLoggingJSONLayout extends PatternLayout {\n\n    private static final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String doLayout(ILoggingEvent event) {\n        String formattedMessage = super.doLayout(event);\n        return doLayoutInternal(formattedMessage, event);\n    }\n\n    /**\n     * For testing without having to deal wth the complexity of super.doLayout()\n     * Uses formattedMessage instead of event.getMessage()\n     */\n    private String doLayoutInternal(String formattedMessage, ILoggingEvent event) {\n        GCPCloudLoggingEvent gcpLogEvent =\n            new GCPCloudLoggingEvent(formattedMessage, convertTimestampToGCPLogTimestamp(event.getTimeStamp()),\n                mapLevelToGCPLevel(event.getLevel()), event.getThreadName());\n\n        try {\n            // Add a newline so that each JSON log entry is on its own line.\n            // Note that it is also important that the JSON log entry does not span multiple lines.\n            return objectMapper.writeValueAsString(gcpLogEvent) + \"\\n\";\n        } catch (JsonProcessingException e) {\n            return \"\";\n        }\n    }\n\n    private static GCPCloudLoggingEvent.GCPCloudLoggingTimestamp convertTimestampToGCPLogTimestamp(\n        long millisSinceEpoch) {\n        int nanos =\n            ((int) (millisSinceEpoch % 1000)) * 1_000_000; // strip out just the milliseconds and convert to nanoseconds\n        long seconds = millisSinceEpoch / 1000L; // remove the milliseconds\n        return new GCPCloudLoggingEvent.GCPCloudLoggingTimestamp(seconds, nanos);\n    }\n\n    private static String mapLevelToGCPLevel(Level level) {\n        switch (level.toInt()) {\n            case TRACE_INT:\n                return \"TRACE\";\n            case DEBUG_INT:\n                return \"DEBUG\";\n            case INFO_INT:\n                return \"INFO\";\n            case WARN_INT:\n                return \"WARN\";\n            case ERROR_INT:\n                return \"ERROR\";\n            default:\n                return null; /* This should map to no level in GCP Cloud Logging */\n        }\n    }\n\n    /* Must be public for Jackson JSON conversion */\n    public static class GCPCloudLoggingEvent {\n        private String message;\n        private GCPCloudLoggingTimestamp timestamp;\n        private String thread;\n        private String severity;\n\n        public GCPCloudLoggingEvent(String message, GCPCloudLoggingTimestamp timestamp, String severity,\n            String thread) {\n            super();\n            this.message = message;\n            this.timestamp = timestamp;\n            this.thread = thread;\n            this.severity = severity;\n        }\n\n        public String getMessage() {\n            return message;\n        }\n\n        public void setMessage(String message) {\n            this.message = message;\n        }\n\n        public GCPCloudLoggingTimestamp getTimestamp() {\n            return timestamp;\n        }\n\n        public void setTimestamp(GCPCloudLoggingTimestamp timestamp) {\n            this.timestamp = timestamp;\n        }\n\n        public String getThread() {\n            return thread;\n        }\n\n        public void setThread(String thread) {\n            this.thread = thread;\n        }\n\n        public String getSeverity() {\n            return severity;\n        }\n\n        public void setSeverity(String severity) {\n            this.severity = severity;\n        }\n\n        /* Must be public for JSON marshalling logic */\n        public static class GCPCloudLoggingTimestamp {\n            private long seconds;\n            private int nanos;\n\n            public GCPCloudLoggingTimestamp(long seconds, int nanos) {\n                super();\n                this.seconds = seconds;\n                this.nanos = nanos;\n            }\n\n            public long getSeconds() {\n                return seconds;\n            }\n\n            public void setSeconds(long seconds) {\n                this.seconds = seconds;\n            }\n\n            public int getNanos() {\n                return nanos;\n            }\n\n            public void setNanos(int nanos) {\n                this.nanos = nanos;\n            }\n\n        }\n    }\n\n    @Override\n    public Map&lt;String, String&gt; getDefaultConverterMap() {\n        return PatternLayout.defaultConverterMap;\n    }\n}\n</code></pre>\n\n<p>As I said earlier, the code was originally from another answer, I have just cleaned up the code slightly to fit my use-case better.</p>\n"},{"tags":[],"owner":{"account_id":4914105,"reputation":512,"user_id":3958517,"display_name":"Jimmy Wong"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1629306823,"creation_date":1577861425,"answer_id":59550537,"question_id":44164730,"body_markdown":"Google has provided a logback appender for Stackdriver, I have enhanced it abit to include the thread name in the logging label, so that it can be searched more easily. \r\n\r\n\r\n*pom.xml*\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;google-cloud-logging-logback&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.116.0-alpha&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n*logback-spring.xml*\r\n\r\n    &lt;springProfile name=&quot;prod-gae&quot;&gt;\r\n\t\t&lt;appender name=&quot;CLOUD&quot;\r\n\t\t\tclass=&quot;com.google.cloud.logging.logback.LoggingAppender&quot;&gt;\r\n\t\t\t&lt;log&gt;clicktrade.log&lt;/log&gt;\r\n\t\t\t&lt;loggingEventEnhancer&gt;com.jimmy.clicktrade.arch.CommonEnhancer&lt;/loggingEventEnhancer&gt;\r\n\t\t\t&lt;flushLevel&gt;WARN&lt;/flushLevel&gt;\r\n\t\t&lt;/appender&gt;\r\n\t\t&lt;root level=&quot;info&quot;&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;CLOUD&quot; /&gt;\r\n\t\t&lt;/root&gt;\r\n\t&lt;/springProfile&gt;\r\n\r\n*CommonEnhancer.java*\r\n\r\n    public class CommonEnhancer implements LoggingEventEnhancer {\r\n    \r\n    \t@Override\r\n    \tpublic void enhanceLogEntry(Builder builder, ILoggingEvent e) {\r\n    \t\tbuilder.addLabel(&quot;thread&quot;, e.getThreadName());\r\n    \t}\r\n    \r\n    }\r\n\r\nSurprisingly, the logback appender in MVN repository doesn&#39;t align with the github repo source code. I need to dig into the JAR source code for that. The latest version is 0.116.0-alpha, it seems it has version 0.120 in Github\r\n\r\nhttps://github.com/googleapis/google-cloud-java/tree/master/google-cloud-clients/google-cloud-contrib/google-cloud-logging-logback\r\n\r\n","title":"GKE &amp; Stackdriver: Java logback logging format?","body":"<p>Google has provided a logback appender for Stackdriver, I have enhanced it abit to include the thread name in the logging label, so that it can be searched more easily.</p>\n<p><em>pom.xml</em></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-logging-logback&lt;/artifactId&gt;\n    &lt;version&gt;0.116.0-alpha&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><em>logback-spring.xml</em></p>\n<pre><code>&lt;springProfile name=&quot;prod-gae&quot;&gt;\n    &lt;appender name=&quot;CLOUD&quot;\n        class=&quot;com.google.cloud.logging.logback.LoggingAppender&quot;&gt;\n        &lt;log&gt;clicktrade.log&lt;/log&gt;\n        &lt;loggingEventEnhancer&gt;com.jimmy.clicktrade.arch.CommonEnhancer&lt;/loggingEventEnhancer&gt;\n        &lt;flushLevel&gt;WARN&lt;/flushLevel&gt;\n    &lt;/appender&gt;\n    &lt;root level=&quot;info&quot;&gt;\n        &lt;appender-ref ref=&quot;CLOUD&quot; /&gt;\n    &lt;/root&gt;\n&lt;/springProfile&gt;\n</code></pre>\n<p><em>CommonEnhancer.java</em></p>\n<pre><code>public class CommonEnhancer implements LoggingEventEnhancer {\n\n    @Override\n    public void enhanceLogEntry(Builder builder, ILoggingEvent e) {\n        builder.addLabel(&quot;thread&quot;, e.getThreadName());\n    }\n\n}\n</code></pre>\n<p>Surprisingly, the logback appender in MVN repository doesn't align with the github repo source code. I need to dig into the JAR source code for that. The latest version is 0.116.0-alpha, it seems it has version 0.120 in Github</p>\n<p><a href=\"https://github.com/googleapis/google-cloud-java/tree/master/google-cloud-clients/google-cloud-contrib/google-cloud-logging-logback\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-cloud-java/tree/master/google-cloud-clients/google-cloud-contrib/google-cloud-logging-logback</a></p>\n"},{"tags":[],"owner":{"account_id":6589671,"reputation":10127,"user_id":5091346,"accept_rate":72,"display_name":"Andrii Abramov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677069468,"creation_date":1677069468,"answer_id":75532786,"question_id":44164730,"body_markdown":"You can use the [glogging library](https://github.com/aaabramov/glogging).\r\n\r\nSimply add it as a dependency and use provided layout in logback.xml:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\r\n            &lt;layout class=&quot;io.github.aaabramov.glogging.GoogleLayout&quot;&gt;\r\n\r\n                &lt;!-- You have a choice which JSON encoder to use. Or create your own via implementing JsonEncoder interface --&gt;\r\n                &lt;json&gt;io.github.aaabramov.glogging.JacksonEncoder&lt;/json&gt;\r\n\r\n                &lt;!-- OR --&gt;\r\n                &lt;!-- &lt;json&gt;io.github.aaabramov.glogging.GsonEncoder&lt;/json&gt; --&gt;\r\n\r\n                &lt;!-- Optionally append &quot;${prefix}/loggerName&quot; labels --&gt;\r\n                &lt;appendLoggerName&gt;true&lt;/appendLoggerName&gt;\r\n\r\n                &lt;!-- Optionally configure prefix for labels --&gt;\r\n                &lt;prefix&gt;com.yourcompany&lt;/prefix&gt;\r\n\r\n                &lt;!-- Provide message pattern you like. --&gt;\r\n                &lt;!-- Note: there is no need anymore to log timestamps &amp; levels to the message. Google will pick them up from specific fields. --&gt;\r\n                &lt;pattern&gt;%message %xException{10}&lt;/pattern&gt;\r\n            &lt;/layout&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;appender name=&quot;ASYNCSTDOUT&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;!--  Configure logging levels  --&gt;\r\n    &lt;logger name=&quot;com.github&quot; level=&quot;DEBUG&quot;/&gt;\r\n\r\n    &lt;root level=&quot;DEBUG&quot;&gt;\r\n        &lt;appender-ref ref=&quot;ASYNCSTDOUT&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nIt will produce messages in the format that GSL will gladly accept:\r\n\r\n```json\r\n{&quot;timestamp&quot;:{&quot;seconds&quot;:1629642099,&quot;nanos&quot;:659000000},&quot;severity&quot;:&quot;DEBUG&quot;,&quot;message&quot;:&quot;debug&quot;,&quot;labels&quot;:{&quot;io.github.aaabramov/name&quot;:&quot;Andrii&quot;,&quot;io.github.aaabramov/loggerName&quot;:&quot;io.github.aaabramov.glogging.App&quot;}}\r\n```\r\n\r\n*Disclaimer: I am the author of this library.*\r\n\r\nCredits: https://stackoverflow.com/a/44168383/5091346","title":"GKE &amp; Stackdriver: Java logback logging format?","body":"<p>You can use the <a href=\"https://github.com/aaabramov/glogging\" rel=\"nofollow noreferrer\">glogging library</a>.</p>\n<p>Simply add it as a dependency and use provided layout in logback.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\n            &lt;layout class=&quot;io.github.aaabramov.glogging.GoogleLayout&quot;&gt;\n\n                &lt;!-- You have a choice which JSON encoder to use. Or create your own via implementing JsonEncoder interface --&gt;\n                &lt;json&gt;io.github.aaabramov.glogging.JacksonEncoder&lt;/json&gt;\n\n                &lt;!-- OR --&gt;\n                &lt;!-- &lt;json&gt;io.github.aaabramov.glogging.GsonEncoder&lt;/json&gt; --&gt;\n\n                &lt;!-- Optionally append &quot;${prefix}/loggerName&quot; labels --&gt;\n                &lt;appendLoggerName&gt;true&lt;/appendLoggerName&gt;\n\n                &lt;!-- Optionally configure prefix for labels --&gt;\n                &lt;prefix&gt;com.yourcompany&lt;/prefix&gt;\n\n                &lt;!-- Provide message pattern you like. --&gt;\n                &lt;!-- Note: there is no need anymore to log timestamps &amp; levels to the message. Google will pick them up from specific fields. --&gt;\n                &lt;pattern&gt;%message %xException{10}&lt;/pattern&gt;\n            &lt;/layout&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;ASYNCSTDOUT&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n    &lt;/appender&gt;\n\n    &lt;!--  Configure logging levels  --&gt;\n    &lt;logger name=&quot;com.github&quot; level=&quot;DEBUG&quot;/&gt;\n\n    &lt;root level=&quot;DEBUG&quot;&gt;\n        &lt;appender-ref ref=&quot;ASYNCSTDOUT&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>It will produce messages in the format that GSL will gladly accept:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;timestamp&quot;:{&quot;seconds&quot;:1629642099,&quot;nanos&quot;:659000000},&quot;severity&quot;:&quot;DEBUG&quot;,&quot;message&quot;:&quot;debug&quot;,&quot;labels&quot;:{&quot;io.github.aaabramov/name&quot;:&quot;Andrii&quot;,&quot;io.github.aaabramov/loggerName&quot;:&quot;io.github.aaabramov.glogging.App&quot;}}\n</code></pre>\n<p><em>Disclaimer: I am the author of this library.</em></p>\n<p>Credits: <a href=\"https://stackoverflow.com/a/44168383/5091346\">https://stackoverflow.com/a/44168383/5091346</a></p>\n"}],"owner":{"account_id":431745,"reputation":5025,"user_id":816017,"accept_rate":100,"display_name":"Erik Živković"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8258,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":44168383,"answer_count":3,"score":15,"last_activity_date":1677069468,"creation_date":1495645778,"question_id":44164730,"body_markdown":"I have a project running Java in a docker image on Kubernetes. Logs are automatically ingested by the fluentd agent and end up in Stackdriver.\r\n\r\nHowever, the format of the logs is wrong: Multiline logs get put into separate log lines in Stackdriver, and all logs have &quot;INFO&quot; log level, even though they are really warning, or error.\r\n\r\nI have been searching for information on how to configure logback to output the correct format for this to work properly, but I can find no such guide in the google Stackdriver or GKE documentation.\r\n\r\nMy guess is that I should be outputting JSON of some form, but where do I find information on the format, or even a guide on how to properly set up this pipeline.\r\n\r\nThanks!","title":"GKE &amp; Stackdriver: Java logback logging format?","body":"<p>I have a project running Java in a docker image on Kubernetes. Logs are automatically ingested by the fluentd agent and end up in Stackdriver.</p>\n\n<p>However, the format of the logs is wrong: Multiline logs get put into separate log lines in Stackdriver, and all logs have \"INFO\" log level, even though they are really warning, or error.</p>\n\n<p>I have been searching for information on how to configure logback to output the correct format for this to work properly, but I can find no such guide in the google Stackdriver or GKE documentation.</p>\n\n<p>My guess is that I should be outputting JSON of some form, but where do I find information on the format, or even a guide on how to properly set up this pipeline.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","arraylist"],"answers":[{"tags":[],"owner":{"account_id":8267551,"reputation":208,"user_id":6216498,"display_name":"Farshad Asgharzadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677069154,"creation_date":1677069154,"answer_id":75532728,"question_id":75530832,"body_markdown":"use this line in your activity\r\n\r\n    OrderAdapter orderAdapter = new OrderAdapter(list_barang, Context);\r\n    btnUpdateTotal.setOnClickListener(view -&gt; {\r\n            ArrayList&lt;Cart&gt; myCart = orderAdapter.getArrayList();\r\n            int total =  myCart.size();\r\n            tvTotalCart.setText(&quot;Total in cart : &quot;+String.valueOf(total));\r\n        });","title":"my custom method to get Arraylist from adapter in activity does not return Arraylist like expcted","body":"<p>use this line in your activity</p>\n<pre><code>OrderAdapter orderAdapter = new OrderAdapter(list_barang, Context);\nbtnUpdateTotal.setOnClickListener(view -&gt; {\n        ArrayList&lt;Cart&gt; myCart = orderAdapter.getArrayList();\n        int total =  myCart.size();\n        tvTotalCart.setText(&quot;Total in cart : &quot;+String.valueOf(total));\n    });\n</code></pre>\n"}],"owner":{"account_id":25646873,"reputation":27,"user_id":19414831,"display_name":"Caelles Kharida"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677069154,"creation_date":1677059049,"question_id":75530832,"body_markdown":"I have Arraylist (`list_cart`) that is created inside Adapter (`OrderAdapter.java`) which I want to access from its Parent activity.\r\n\r\nI read that I need to create a custom method to get it.\r\n\r\nHere is the method : `public ArrayList&lt;Cart&gt; getArrayList(){\r\nreturn list_cart; }`\r\n\r\nAnd to access it I write these codes in my Activity :\r\n\r\n    btnUpdateTotal.setOnClickListener(view -&gt; {\r\n                OrderAdapter orderAdapter = new OrderAdapter();\r\n                ArrayList&lt;Cart&gt; myCart = orderAdapter.getArrayList();\r\n                int total =  myCart.size();\r\n                tvTotalCart.setText(&quot;Total in cart : &quot;+String.valueOf(total));\r\n            });\r\n\r\nhowever the `int total` returns 0 instead of the size of the Arrays. There is no error, just the result from debugging says `size = 0`\r\n\r\nHere is the Debug result : \r\n\r\n    orderAdapter : OrderAdpater@12429\r\n    context = null\r\n    list_cart = null\r\n    list_barang = {ArrayList @12448} size = 0\r\n\r\nI&#39;m still new to Passing Array from adapter to activity, so please help me.\r\n\r\nTo make sure if my `list_cart` is not empty, I checked the size from **inside the adapter** and it does return the number corresponding to the array size\r\n\r\n**Here is my OrderAdapter class**\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.N)\r\n    public class OrderAdapter extends RecyclerView.Adapter&lt;OrderAdapter.ViewHolder&gt; {\r\n        private ArrayList&lt;Barang&gt; list_barang;\r\n        public ArrayList&lt;Cart&gt; list_cart = new ArrayList&lt;Cart&gt;();// this is what I need to access from activity\r\n        private Context context;\r\n\r\n    public OrderAdapter(ArrayList&lt;Barang&gt; list_barang, Context context){\r\n        this.list_barang = list_barang;\r\n        this.context = context;\r\n    }\r\n\r\n    public OrderAdapter() {\r\n\r\n    }\r\n\r\n    public ArrayList&lt;Cart&gt; getArrayList(){return list_cart;}\r\n\r\n    @NonNull\r\n    @Override\r\n    public OrderAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        context = parent.getContext();\r\n\r\n        LayoutInflater layoutInflater = LayoutInflater.from(context);\r\n        View view = layoutInflater.inflate(R.layout.item_add_penjualan2, parent, false);\r\n\r\n        return new OrderAdapter.ViewHolder(view);\r\n    }\r\n\r\n    @SuppressLint({&quot;DefaultLocale&quot;, &quot;SetTextI18n&quot;})\r\n    @Override\r\n    public void onBindViewHolder(@NonNull OrderAdapter.ViewHolder holder, int position){\r\n       ... the ViewHolder codes..\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() { return list_barang.size(); }\r\n\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder{\r\n\r\n        ... the variables declaration ...\r\n\r\n        public ViewHolder(@NonNull View itemView){\r\n            super(itemView);\r\n            ... the initialize ...\r\n        }\r\n\r\n        public void actionItem(int position){\r\n           btnTambah.setOnClickListener(view -&gt; {\r\n               Cart cart = new Cart();\r\n               Barang myBarang = list_barang.get(position);\r\n\r\n               String productId = myBarang.getID();\r\n               String productName = myBarang.getTitle();\r\n               double productHarga = myBarang.getHarga();\r\n               int qty = Integer.parseInt(etQtyBarang.getText().toString());\r\n\r\n               cart.setProductID(productId);\r\n               cart.setProductName(productName);\r\n               cart.setHarga(productHarga);\r\n               cart.setQty(qty);\r\n               list_cart.add(cart);// This is the ArrayList that I want to access from Parent Activity\r\n           });\r\n            \r\n        }\r\n    }\r\n\r\n","title":"my custom method to get Arraylist from adapter in activity does not return Arraylist like expcted","body":"<p>I have Arraylist (<code>list_cart</code>) that is created inside Adapter (<code>OrderAdapter.java</code>) which I want to access from its Parent activity.</p>\n<p>I read that I need to create a custom method to get it.</p>\n<p>Here is the method : <code>public ArrayList&lt;Cart&gt; getArrayList(){ return list_cart; }</code></p>\n<p>And to access it I write these codes in my Activity :</p>\n<pre><code>btnUpdateTotal.setOnClickListener(view -&gt; {\n            OrderAdapter orderAdapter = new OrderAdapter();\n            ArrayList&lt;Cart&gt; myCart = orderAdapter.getArrayList();\n            int total =  myCart.size();\n            tvTotalCart.setText(&quot;Total in cart : &quot;+String.valueOf(total));\n        });\n</code></pre>\n<p>however the <code>int total</code> returns 0 instead of the size of the Arrays. There is no error, just the result from debugging says <code>size = 0</code></p>\n<p>Here is the Debug result :</p>\n<pre><code>orderAdapter : OrderAdpater@12429\ncontext = null\nlist_cart = null\nlist_barang = {ArrayList @12448} size = 0\n</code></pre>\n<p>I'm still new to Passing Array from adapter to activity, so please help me.</p>\n<p>To make sure if my <code>list_cart</code> is not empty, I checked the size from <strong>inside the adapter</strong> and it does return the number corresponding to the array size</p>\n<p><strong>Here is my OrderAdapter class</strong></p>\n<pre><code>@RequiresApi(api = Build.VERSION_CODES.N)\npublic class OrderAdapter extends RecyclerView.Adapter&lt;OrderAdapter.ViewHolder&gt; {\n    private ArrayList&lt;Barang&gt; list_barang;\n    public ArrayList&lt;Cart&gt; list_cart = new ArrayList&lt;Cart&gt;();// this is what I need to access from activity\n    private Context context;\n\npublic OrderAdapter(ArrayList&lt;Barang&gt; list_barang, Context context){\n    this.list_barang = list_barang;\n    this.context = context;\n}\n\npublic OrderAdapter() {\n\n}\n\npublic ArrayList&lt;Cart&gt; getArrayList(){return list_cart;}\n\n@NonNull\n@Override\npublic OrderAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    context = parent.getContext();\n\n    LayoutInflater layoutInflater = LayoutInflater.from(context);\n    View view = layoutInflater.inflate(R.layout.item_add_penjualan2, parent, false);\n\n    return new OrderAdapter.ViewHolder(view);\n}\n\n@SuppressLint({&quot;DefaultLocale&quot;, &quot;SetTextI18n&quot;})\n@Override\npublic void onBindViewHolder(@NonNull OrderAdapter.ViewHolder holder, int position){\n   ... the ViewHolder codes..\n}\n\n@Override\npublic int getItemCount() { return list_barang.size(); }\n\n\npublic class ViewHolder extends RecyclerView.ViewHolder{\n\n    ... the variables declaration ...\n\n    public ViewHolder(@NonNull View itemView){\n        super(itemView);\n        ... the initialize ...\n    }\n\n    public void actionItem(int position){\n       btnTambah.setOnClickListener(view -&gt; {\n           Cart cart = new Cart();\n           Barang myBarang = list_barang.get(position);\n\n           String productId = myBarang.getID();\n           String productName = myBarang.getTitle();\n           double productHarga = myBarang.getHarga();\n           int qty = Integer.parseInt(etQtyBarang.getText().toString());\n\n           cart.setProductID(productId);\n           cart.setProductName(productName);\n           cart.setHarga(productHarga);\n           cart.setQty(qty);\n           list_cart.add(cart);// This is the ArrayList that I want to access from Parent Activity\n       });\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","android","biometrics"],"owner":{"account_id":25944501,"reputation":31,"user_id":19663406,"display_name":"Saurabh Jadhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677068777,"creation_date":1677068777,"question_id":75532664,"body_markdown":"This is my code , What I want is to have successful authentication in my app.\r\n```\r\n``   sharedPref = new SharedPref();\r\n        Executor executor = ContextCompat.getMainExecutor(this);\r\n        biometricPrompt = new BiometricPrompt(this, executor, new BiometricPrompt.AuthenticationCallback() {\r\n            @Override\r\n            public void onAuthenticationError(int errorCode, @NonNull CharSequence errString) {\r\n                super.onAuthenticationError(errorCode, errString);\r\n                Log.d(TAG, &quot;onAuthenticationError() called with: errorCode = [&quot; + errorCode + &quot;], errString = [&quot; + errString + &quot;]&quot;);\r\n\r\n                if (errorCode == BiometricPrompt.ERROR_CANCELED) {\r\n                    biometricPrompt.cancelAuthentication();\r\n                    biometricPrompt.authenticate(promptInfo);\r\n\r\n                    //todo delete later\r\n//                    bottomSheetDialog = null;\r\n//                    showBottomSheetDialog();\r\n                    return;\r\n                }\r\n                if (errorCode == BiometricPrompt.ERROR_NEGATIVE_BUTTON || errorCode == BiometricPrompt.ERROR_LOCKOUT_PERMANENT || errorCode == BiometricPrompt.ERROR_LOCKOUT) {\r\n//                    bottomSheetDialog = null;\r\n//                    showBottomSheetDialog();\r\n                    return;\r\n                }\r\n                failCounter = failCounter + 1;\r\n\r\n                if (failCounter &gt;= failCounterMax) {\r\n                    biometricPrompt.cancelAuthentication();\r\n                    Log.e(TAG, &quot;onAuthenticationError: showBottomSheetDialog&quot;);\r\n//                    bottomSheetDialog = null;\r\n//                    showBottomSheetDialog();\r\n                } else {\r\n                    //TODO show biometric prompt again here you fool chatgpt\r\n                    biometricPrompt.cancelAuthentication();\r\n                    biometricPrompt.authenticate(promptInfo);\r\n                }\r\n\r\n\r\n            }\r\n\r\n            // THIS METHOD IS CALLED WHEN AUTHENTICATION IS SUCCESS\r\n            @Override\r\n            public void onAuthenticationSucceeded(@NonNull BiometricPrompt.AuthenticationResult result) {\r\n                super.onAuthenticationSucceeded(result);\r\n                Log.e(TAG, &quot;onAuthenticationSucceeded: success&quot;);\r\n                isAuthDone = true;\r\n                OpenContainerActivity();\r\n            }\r\n\r\n            @Override\r\n            public void onAuthenticationFailed() {\r\n                super.onAuthenticationFailed();\r\n                Log.d(TAG, &quot;onAuthenticationFailed() called&quot;);\r\n                failCounter = failCounter + 1;\r\n                if (failCounter &gt;= failCounterMax) {\r\n                    biometricPrompt.cancelAuthentication();\r\n                    Log.e(TAG, &quot;onAuthenticationFailed: showBottomSheetDialog&quot;);\r\n                    bottomSheetDialog = null;\r\n//                    showBottomSheetDialog();\r\n\r\n                } else {\r\n                    //TODO show biometric prompt again here you fool chatgpt\r\n                    Log.d(TAG, &quot;onAuthenticationFailed() called ELSE &quot;);\r\n                    biometricPrompt.cancelAuthentication();\r\n                    biometricPrompt.authenticate(promptInfo);\r\n\r\n                }\r\n            }\r\n        });`\r\n`\r\n```\r\n\r\nThis are my logs:\r\n```\r\n17:50:06.325  D  onAuthenticationFailed() called\r\n17:50:06.326  D  onAuthenticationFailed() called ELSE \r\n17:50:06.326  D  Cancel BP authentication requested for: 10\r\n17:50:06.364  D  onAuthenticationError() called with: errorCode = [5], errString = [Fingerprint operation cancelled.]\r\n17:50:09.975  D  onFocusEvent true\r\n```\r\n\r\n\r\n\r\nThe case where onFocusEvent is true, thast where biometric athentication was successful, so first time user use wrong finger and secomd time uses right finger.\r\n\r\n\r\n\r\nI tried , adding logs but always onfocusevent log is coming but i expect on authentication success.","title":"onAuthenticationSucceeded Not called second Time , Android Biometric","body":"<p>This is my code , What I want is to have successful authentication in my app.</p>\n<pre><code>``   sharedPref = new SharedPref();\n        Executor executor = ContextCompat.getMainExecutor(this);\n        biometricPrompt = new BiometricPrompt(this, executor, new BiometricPrompt.AuthenticationCallback() {\n            @Override\n            public void onAuthenticationError(int errorCode, @NonNull CharSequence errString) {\n                super.onAuthenticationError(errorCode, errString);\n                Log.d(TAG, &quot;onAuthenticationError() called with: errorCode = [&quot; + errorCode + &quot;], errString = [&quot; + errString + &quot;]&quot;);\n\n                if (errorCode == BiometricPrompt.ERROR_CANCELED) {\n                    biometricPrompt.cancelAuthentication();\n                    biometricPrompt.authenticate(promptInfo);\n\n                    //todo delete later\n//                    bottomSheetDialog = null;\n//                    showBottomSheetDialog();\n                    return;\n                }\n                if (errorCode == BiometricPrompt.ERROR_NEGATIVE_BUTTON || errorCode == BiometricPrompt.ERROR_LOCKOUT_PERMANENT || errorCode == BiometricPrompt.ERROR_LOCKOUT) {\n//                    bottomSheetDialog = null;\n//                    showBottomSheetDialog();\n                    return;\n                }\n                failCounter = failCounter + 1;\n\n                if (failCounter &gt;= failCounterMax) {\n                    biometricPrompt.cancelAuthentication();\n                    Log.e(TAG, &quot;onAuthenticationError: showBottomSheetDialog&quot;);\n//                    bottomSheetDialog = null;\n//                    showBottomSheetDialog();\n                } else {\n                    //TODO show biometric prompt again here you fool chatgpt\n                    biometricPrompt.cancelAuthentication();\n                    biometricPrompt.authenticate(promptInfo);\n                }\n\n\n            }\n\n            // THIS METHOD IS CALLED WHEN AUTHENTICATION IS SUCCESS\n            @Override\n            public void onAuthenticationSucceeded(@NonNull BiometricPrompt.AuthenticationResult result) {\n                super.onAuthenticationSucceeded(result);\n                Log.e(TAG, &quot;onAuthenticationSucceeded: success&quot;);\n                isAuthDone = true;\n                OpenContainerActivity();\n            }\n\n            @Override\n            public void onAuthenticationFailed() {\n                super.onAuthenticationFailed();\n                Log.d(TAG, &quot;onAuthenticationFailed() called&quot;);\n                failCounter = failCounter + 1;\n                if (failCounter &gt;= failCounterMax) {\n                    biometricPrompt.cancelAuthentication();\n                    Log.e(TAG, &quot;onAuthenticationFailed: showBottomSheetDialog&quot;);\n                    bottomSheetDialog = null;\n//                    showBottomSheetDialog();\n\n                } else {\n                    //TODO show biometric prompt again here you fool chatgpt\n                    Log.d(TAG, &quot;onAuthenticationFailed() called ELSE &quot;);\n                    biometricPrompt.cancelAuthentication();\n                    biometricPrompt.authenticate(promptInfo);\n\n                }\n            }\n        });`\n`\n</code></pre>\n<p>This are my logs:</p>\n<pre><code>17:50:06.325  D  onAuthenticationFailed() called\n17:50:06.326  D  onAuthenticationFailed() called ELSE \n17:50:06.326  D  Cancel BP authentication requested for: 10\n17:50:06.364  D  onAuthenticationError() called with: errorCode = [5], errString = [Fingerprint operation cancelled.]\n17:50:09.975  D  onFocusEvent true\n</code></pre>\n<p>The case where onFocusEvent is true, thast where biometric athentication was successful, so first time user use wrong finger and secomd time uses right finger.</p>\n<p>I tried , adding logs but always onfocusevent log is coming but i expect on authentication success.</p>\n"},{"tags":["java","elasticsearch","logstash","jpos"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1657537191,"post_id":72937073,"comment_id":128825576,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1657539624,"post_id":72937073,"comment_id":128826427,"body_markdown":"If you mean with &quot;ISO 8583&quot; what I think that you mean, then this should not be written to a &quot;log&quot;. Although I confess that using (or abusing) the infrastructure that was created for logging analysis also for the analysis of audit trails makes sense.","body":"If you mean with &quot;ISO 8583&quot; what I think that you mean, then this should not be written to a &quot;log&quot;. Although I confess that using (or abusing) the infrastructure that was created for logging analysis also for the analysis of audit trails makes sense."}],"answers":[{"tags":[],"owner":{"account_id":27850765,"reputation":1,"user_id":21265316,"display_name":"netpb cl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677068389,"creation_date":1677068283,"answer_id":75532599,"question_id":72937073,"body_markdown":"Yes, if possible, you need to parse the message before inserting to logtash. I have solved it like this for splunk, elk and opensearch. this is the opening of your message.\r\n\r\n\r\n\r\n\r\n","title":"Parse ISO 8583 and put it in elasticsearch","body":"<p>Yes, if possible, you need to parse the message before inserting to logtash. I have solved it like this for splunk, elk and opensearch. this is the opening of your message.</p>\n"}],"owner":{"account_id":25341399,"reputation":1,"user_id":19159745,"display_name":"Zeezum Pum"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677068389,"creation_date":1657535025,"question_id":72937073,"body_markdown":"Hi I&#39;m in the process of monitoring the application log containing ISO 8583. And I want the ISO message to be parsed and display it in elasticsearch. I&#39;ve tried using grok, but that&#39;s not possible because there are several different counts in each log, so it requires parsing using another application.\r\n\r\nMy question now is, is it possible to parse using an application outside of logstash and put it back into logstash and send it to elasticsearch? How? Here I try to use a Java application using the JPOS library.\r\n\r\n\r\n[This is the result of combining ISO 5853 from raw logs. ][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/awATd.png\r\n\r\n","title":"Parse ISO 8583 and put it in elasticsearch","body":"<p>Hi I'm in the process of monitoring the application log containing ISO 8583. And I want the ISO message to be parsed and display it in elasticsearch. I've tried using grok, but that's not possible because there are several different counts in each log, so it requires parsing using another application.</p>\n<p>My question now is, is it possible to parse using an application outside of logstash and put it back into logstash and send it to elasticsearch? How? Here I try to use a Java application using the JPOS library.</p>\n<p><a href=\"https://i.stack.imgur.com/awATd.png\" rel=\"nofollow noreferrer\">This is the result of combining ISO 5853 from raw logs. </a></p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":14801196,"reputation":199,"user_id":11149943,"display_name":"Diego Ruiz"},"score":2,"creation_date":1616760795,"post_id":66816700,"comment_id":118110391,"body_markdown":"Maybe with \\ or \\\\ ?","body":"Maybe with \\ or \\\\ ?"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1616760830,"post_id":66816700,"comment_id":118110404,"body_markdown":"@DiegoRuiz Thanks, but I don&#39;t think Java programs work based on maybes :) That&#39;s why I am asking (since I don&#39;t find it in the docs). It&#39;s in an XML attribute which describes a regular expression so it&#39;s tricky, could be anything.","body":"@DiegoRuiz Thanks, but I don&#39;t think Java programs work based on maybes :) That&#39;s why I am asking (since I don&#39;t find it in the docs). It&#39;s in an XML attribute which describes a regular expression so it&#39;s tricky, could be anything."},{"owner":{"account_id":7414275,"reputation":14648,"user_id":5640649,"accept_rate":91,"display_name":"lealceldeiro"},"score":2,"creation_date":1616761200,"post_id":66816700,"comment_id":118110590,"body_markdown":"@DiegoRuiz actually it should be either \\\\ or \\\\\\\\, depending on whether the string-like regex is passed directly to the java regex engine or it&#39;s pre-processed -- I&#39;m not familiar with `RegexFilter`","body":"@DiegoRuiz actually it should be either \\\\ or \\\\\\\\, depending on whether the string-like regex is passed directly to the java regex engine or it&#39;s pre-processed -- I&#39;m not familiar with <code>RegexFilter</code>"},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":0,"creation_date":1616761414,"post_id":66816700,"comment_id":118110687,"body_markdown":"A single backslash escapes regex special characters. Since a backslash itself has to be escaped in a Java-String-Literal, you&#39;ll have to write `\\\\.` (as long as it&#39;s inside a string literal). If you decide to configure the regex outside a java literal (for example in a configuration file), you&#39;ll have to use a single backslash only (`\\.` )","body":"A single backslash escapes regex special characters. Since a backslash itself has to be escaped in a Java-String-Literal, you&#39;ll have to write <code>\\\\.</code> (as long as it&#39;s inside a string literal). If you decide to configure the regex outside a java literal (for example in a configuration file), you&#39;ll have to use a single backslash only (<code>\\.</code> )"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1616761453,"post_id":66816700,"comment_id":118110706,"body_markdown":"@codeflush.dev It&#39;s in a log4j.xml config file. See the XML fragment I posted. We are not talking Java literals here. I know how to escape in Java literals but this is log4j 2 XML config file.","body":"@codeflush.dev It&#39;s in a log4j.xml config file. See the XML fragment I posted. We are not talking Java literals here. I know how to escape in Java literals but this is log4j 2 XML config file."},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":0,"creation_date":1616761590,"post_id":66816700,"comment_id":118110783,"body_markdown":"@peter.petrov AFAIK, bashslashes don&#39;t have to be escaped in XML. That would make your XML configuration: `&lt;RegexFilter regex=&quot;.*abc\\.def.*&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;ACCEPT&quot; /&gt;`","body":"@peter.petrov AFAIK, bashslashes don&#39;t have to be escaped in XML. That would make your XML configuration: <code>&lt;RegexFilter regex=&quot;.*abc\\.def.*&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;ACCEPT&quot; &#47;&gt;</code>"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1616761660,"post_id":66816700,"comment_id":118110817,"body_markdown":"@codeflush.dev OK... So a single backslash is what you think I would need here?","body":"@codeflush.dev OK... So a single backslash is what you think I would need here?"},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":0,"creation_date":1616761812,"post_id":66816700,"comment_id":118110886,"body_markdown":"@peter.petrov yes. That said, using `[.]` as @CKey said works too.","body":"@peter.petrov yes. That said, using <code>[.]</code> as @CKey said works too."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1616762151,"post_id":66816700,"comment_id":118111046,"body_markdown":"@codeflush.dev OK, thanks. Seems I have another issue - SMTP appender does not support RegexFilter at all. Great! Thanks anyway.","body":"@codeflush.dev OK, thanks. Seems I have another issue - SMTP appender does not support RegexFilter at all. Great! Thanks anyway."}],"answers":[{"tags":[],"owner":{"account_id":12975935,"reputation":88,"user_id":9934732,"display_name":"CKey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616761249,"creation_date":1616761249,"answer_id":66816850,"question_id":66816700,"body_markdown":"by `[.]`, thus use \r\n\r\n    .*abc[.]def.*\r\n","title":"RegexFilter - how to escape dot ( . ) and filter out certain messages?","body":"<p>by <code>[.]</code>, thus use</p>\n<pre><code>.*abc[.]def.*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13393376,"reputation":1,"user_id":9669498,"display_name":"Loren Ruiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677068302,"creation_date":1677068147,"answer_id":75532586,"question_id":66816700,"body_markdown":"You can use the following:\r\n```\r\n.*abc[.]def.*\r\n```","title":"RegexFilter - how to escape dot ( . ) and filter out certain messages?","body":"<p>You can use the following:</p>\n<pre><code>.*abc[.]def.*\n</code></pre>\n"}],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677068302,"creation_date":1616760677,"question_id":66816700,"body_markdown":"I want to use RegexFilter with log4j2 and I want my filter to **filter out** all messages which contain this string `abc.def`    \r\n\r\nBut this dot I want to be interpreted literally, not as a regexp symbol.    \r\nI don&#39;t find this documented.   \r\n\r\nSo how do I do this?  \r\nA complete example would be more helpful because I am having troubles with the syntax.\r\n\r\n\r\nOn a side note: which symbols do I need to escape and which not?   \r\n\r\nI doubt this is the right way (syntactically):   \r\n\r\n`&lt;RegexFilter regex=&quot;.*abc.def.*&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;ACCEPT&quot; /&gt;`  \r\n\r\nAlso, is it case sensitive or insensitive?   \r\nI don&#39;t find this documented too.    \r\n\r\n\r\n","title":"RegexFilter - how to escape dot ( . ) and filter out certain messages?","body":"<p>I want to use RegexFilter with log4j2 and I want my filter to <strong>filter out</strong> all messages which contain this string <code>abc.def</code></p>\n<p>But this dot I want to be interpreted literally, not as a regexp symbol.<br />\nI don't find this documented.</p>\n<p>So how do I do this?<br />\nA complete example would be more helpful because I am having troubles with the syntax.</p>\n<p>On a side note: which symbols do I need to escape and which not?</p>\n<p>I doubt this is the right way (syntactically):</p>\n<p><code>&lt;RegexFilter regex=&quot;.*abc.def.*&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;ACCEPT&quot; /&gt;</code></p>\n<p>Also, is it case sensitive or insensitive?<br />\nI don't find this documented too.</p>\n"},{"tags":["java","android","permissions","accessibility"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1677095827,"post_id":75532482,"comment_id":133272157,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27684109,"reputation":1,"user_id":21132217,"display_name":"Jorge Agullo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677067594,"creation_date":1677067594,"question_id":75532482,"body_markdown":"I have a problem in an Android project with Java, I have integrated an accessibility service to review urls that the user visits, of course with your consent and all within the legal. the problem is that only on some devices! The problem is that only in some devices the service I have implemented appears as activated by the user, but the app asks to activate the permission, the user deactivates and activates it again and it works again. What could be the reason? I have not found any trace of this, except that some apps already report this problem to the user and ask him to perform the action of deactivating and activating the permission. The app is working for APIs higher than 21 to 31. Thank you very much.\r\n\r\nTranslated with www.DeepL.com/Translator (free version)\r\n\r\nThe permissions are requested correctly, and in fact on most devices they work correctly.","title":"In Android App with Java, the accessibility service appears enabled but my app does not detect it","body":"<p>I have a problem in an Android project with Java, I have integrated an accessibility service to review urls that the user visits, of course with your consent and all within the legal. the problem is that only on some devices! The problem is that only in some devices the service I have implemented appears as activated by the user, but the app asks to activate the permission, the user deactivates and activates it again and it works again. What could be the reason? I have not found any trace of this, except that some apps already report this problem to the user and ask him to perform the action of deactivating and activating the permission. The app is working for APIs higher than 21 to 31. Thank you very much.</p>\n<p>Translated with <a href=\"http://www.DeepL.com/Translator\" rel=\"nofollow noreferrer\">www.DeepL.com/Translator</a> (free version)</p>\n<p>The permissions are requested correctly, and in fact on most devices they work correctly.</p>\n"},{"tags":["java","arrays","syntax"],"comments":[{"owner":{"account_id":262258,"reputation":64223,"user_id":546999,"accept_rate":97,"display_name":"Nanne"},"score":10,"creation_date":1295091338,"post_id":4699309,"comment_id":5185574,"body_markdown":"woah, that&#39;s.. strange... ;D","body":"woah, that&#39;s.. strange... ;D"},{"owner":{"account_id":75323,"reputation":15516,"user_id":216111,"accept_rate":100,"display_name":"josefx"},"score":6,"creation_date":1295093080,"post_id":4699309,"comment_id":5185734,"body_markdown":"see comments of this http://stackoverflow.com/questions/1995113/strangest-language-feature/1998146#1998146","body":"see comments of this <a href=\"http://stackoverflow.com/questions/1995113/strangest-language-feature/1998146#1998146\" title=\"strangest language feature\">stackoverflow.com/questions/1995113/strangest-language-featu&zwnj;&#8203;re/&hellip;</a>"},{"owner":{"account_id":14684,"reputation":62911,"user_id":30453,"accept_rate":82,"display_name":"IAdapter"},"score":2,"creation_date":1295096187,"post_id":4699309,"comment_id":5186065,"body_markdown":"The Craziest ... Thing I&#39;ve Ever Seen. They say ruby has a lot of magic, eat that ruby!","body":"The Craziest ... Thing I&#39;ve Ever Seen. They say ruby has a lot of magic, eat that ruby!"},{"owner":{"account_id":171717,"reputation":70899,"user_id":399317,"accept_rate":77,"display_name":"Kos"},"score":16,"creation_date":1295098427,"post_id":4699309,"comment_id":5186282,"body_markdown":"Doesn&#39;t even look remotely strange compared to a signature of a function which returns a pointer to array of pointers to functions in C. :)","body":"Doesn&#39;t even look remotely strange compared to a signature of a function which returns a pointer to array of pointers to functions in C. :)"}],"answers":[{"tags":[],"owner":{"account_id":238298,"reputation":13730,"user_id":507099,"display_name":"Costis Aivalis"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1295094541,"creation_date":1295091186,"answer_id":4699328,"question_id":4699309,"body_markdown":"That&#39;s a funny Question. \r\nIn java you can say `int[] a;`, as well as `int a[];`.&lt;br&gt;\r\nFrom this perspective, in order to get the same result just need to move the `[]` &lt;br&gt;and write `public int[] get() {`. &lt;br&gt;Still looks like the code came from an obfuscator... ","title":"Weird &quot;[]&quot; after Java method signature","body":"<p>That's a funny Question. \nIn java you can say <code>int[] a;</code>, as well as <code>int a[];</code>.<br>\nFrom this perspective, in order to get the same result just need to move the <code>[]</code> <br>and write <code>public int[] get() {</code>. <br>Still looks like the code came from an obfuscator... </p>\n"},{"tags":[],"owner":{"account_id":201685,"reputation":45043,"user_id":448296,"accept_rate":100,"display_name":"davin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1295091272,"creation_date":1295091272,"answer_id":4699340,"question_id":4699309,"body_markdown":"java&#39;s syntax allows for the following:\r\n\r\n    int[] intArr = new int[0];\r\n\r\nand also\r\n\r\n    int intArr[] = new int[0];\r\n\r\nwhich looks more fmiliar coming from the c-style syntax.\r\n\r\nso too, with a function, the name can come before or after the [], and the type is still int[]","title":"Weird &quot;[]&quot; after Java method signature","body":"<p>java's syntax allows for the following:</p>\n\n<pre><code>int[] intArr = new int[0];\n</code></pre>\n\n<p>and also</p>\n\n<pre><code>int intArr[] = new int[0];\n</code></pre>\n\n<p>which looks more fmiliar coming from the c-style syntax.</p>\n\n<p>so too, with a function, the name can come before or after the [], and the type is still int[]</p>\n"},{"tags":[],"owner":{"account_id":15778,"reputation":416386,"user_id":33708,"accept_rate":83,"display_name":"Mehrdad Afshari"},"down_vote_count":0,"up_vote_count":114,"is_accepted":true,"score":114,"last_activity_date":1677067542,"creation_date":1295091315,"answer_id":4699346,"question_id":4699309,"body_markdown":"It&#39;s a method that returns an `int[]`.\r\n\r\n### [Java Language Specification][1] (8.4 Method Declarations)\r\n\r\n&gt; The declaration of a method that returns an array is allowed to place some or all of the bracket pairs that denote the array type after the formal parameter list. This syntax is supported for compatibility with early versions of the Java programming language. It is very strongly recommended that this syntax is not used in new code.\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4","title":"Weird &quot;[]&quot; after Java method signature","body":"<p>It's a method that returns an <code>int[]</code>.</p>\n<h3><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4\" rel=\"nofollow noreferrer\">Java Language Specification</a> (8.4 Method Declarations)</h3>\n<blockquote>\n<p>The declaration of a method that returns an array is allowed to place some or all of the bracket pairs that denote the array type after the formal parameter list. This syntax is supported for compatibility with early versions of the Java programming language. It is very strongly recommended that this syntax is not used in new code.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":46131,"reputation":51569,"user_id":136208,"accept_rate":50,"display_name":"AProgrammer"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1474225613,"creation_date":1295091525,"answer_id":4699364,"question_id":4699309,"body_markdown":"As there is a C tag, I&#39;ll point out that a similar (but not identical) notation is possible in C and C++:\r\n\r\nHere the function `f` returns a pointer to an array of 10 ints.\r\n\r\n    int tab[10];\r\n\r\n    int (*f())[10]\r\n    {\r\n        return &amp;tab;\r\n    }\r\n\r\nJava simply doesn&#39;t need the star and parenthesis.","title":"Weird &quot;[]&quot; after Java method signature","body":"<p>As there is a C tag, I'll point out that a similar (but not identical) notation is possible in C and C++:</p>\n\n<p>Here the function <code>f</code> returns a pointer to an array of 10 ints.</p>\n\n<pre><code>int tab[10];\n\nint (*f())[10]\n{\n    return &amp;tab;\n}\n</code></pre>\n\n<p>Java simply doesn't need the star and parenthesis.</p>\n"}],"owner":{"account_id":16029,"reputation":498815,"user_id":34509,"accept_rate":62,"display_name":"Johannes Schaub - litb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7895,"favorite_count":0,"down_vote_count":2,"up_vote_count":127,"accepted_answer_id":4699346,"answer_count":4,"score":125,"last_activity_date":1677067542,"creation_date":1295090987,"question_id":4699309,"body_markdown":"I looked at some Java code today, and I found some weird syntax:\r\n\r\n    public class Sample {\r\n      public int get()[] {\r\n        return new int[]{1, 2, 3};\r\n      }\r\n    }\r\n\r\nI thought that can&#39;t compile and wanted to fix what I thought was a typo, but then I remembered the Java compiler did actually accept it!\r\n\r\nCan someone please help me understand what it means? Is it an array of functions?\r\n","title":"Weird &quot;[]&quot; after Java method signature","body":"<p>I looked at some Java code today, and I found some weird syntax:</p>\n\n<pre><code>public class Sample {\n  public int get()[] {\n    return new int[]{1, 2, 3};\n  }\n}\n</code></pre>\n\n<p>I thought that can't compile and wanted to fix what I thought was a typo, but then I remembered the Java compiler did actually accept it!</p>\n\n<p>Can someone please help me understand what it means? Is it an array of functions?</p>\n"},{"tags":["java","string","date"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1677057630,"post_id":75530489,"comment_id":133260446,"body_markdown":"If this is for SQL, you shouldn&#39;t be replacing strings, you should be working with a prepared statement.","body":"If this is for SQL, you shouldn&#39;t be replacing strings, you should be working with a prepared statement."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1677057936,"post_id":75530489,"comment_id":133260548,"body_markdown":"I&#39;d say that almost any query language supports placeholders and a way of setting parameter values with automatic conversion of standard types like dates (and I hope we&#39;re talking java.time here). SQL prepared statements would be like `&quot;... validityDate &lt;= ? ...&quot;` and the placeholder is referenced by position which would be 3 in your example, JPA&#39;s JPQL would make this `&quot;... validityDate &lt;= :eventDate ...`&quot; and then you set the parameter by its name `&quot;eventDate&quot;`.","body":"I&#39;d say that almost any query language supports placeholders and a way of setting parameter values with automatic conversion of standard types like dates (and I hope we&#39;re talking java.time here). SQL prepared statements would be like <code>&quot;... validityDate &lt;= ? ...&quot;</code> and the placeholder is referenced by position which would be 3 in your example, JPA&#39;s JPQL would make this <code>&quot;... validityDate &lt;= :eventDate ...</code>&quot; and then you set the parameter by its name <code>&quot;eventDate&quot;</code>."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677058269,"creation_date":1677057934,"answer_id":75530581,"question_id":75530489,"body_markdown":"Is this a sql/jdbc query?\r\n\r\nIf so you shouldn&#39;t be doing string replacements because this could open your app to [sql injection](https://en.wikipedia.org/wiki/SQL_injection) attacks.\r\n\r\nInstead you should do something like \r\n\r\n```java\r\ntry (Connection con = connectionSource.getConnection()) {\r\n   PreparedStatement ps = con.prepareStatement(&quot;select * from foo where formId = ? and rateId = ? and validityDate &lt;= ? and creationDate &gt;= ?&quot;);\r\n   ps.setLong(1, formId);\r\n   ps.setLong(2, rateId);\r\n   ps.setTimestamp(3, eventDate);\r\n   ps.setTimestamp(4, eventDate);\r\n   ResultSet rs = ps.executeQuery();\r\n   while (rs.next()) {\r\n      ...\r\n   }\r\n}\r\n```\r\n\r\nPlease see XKCD&#39;s comic related to SQL injection attacks https://xkcd.com/327/\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/gwYNI.png","title":"Using String replace to create a query with date problem","body":"<p>Is this a sql/jdbc query?</p>\n<p>If so you shouldn't be doing string replacements because this could open your app to <a href=\"https://en.wikipedia.org/wiki/SQL_injection\" rel=\"nofollow noreferrer\">sql injection</a> attacks.</p>\n<p>Instead you should do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (Connection con = connectionSource.getConnection()) {\n   PreparedStatement ps = con.prepareStatement(&quot;select * from foo where formId = ? and rateId = ? and validityDate &lt;= ? and creationDate &gt;= ?&quot;);\n   ps.setLong(1, formId);\n   ps.setLong(2, rateId);\n   ps.setTimestamp(3, eventDate);\n   ps.setTimestamp(4, eventDate);\n   ResultSet rs = ps.executeQuery();\n   while (rs.next()) {\n      ...\n   }\n}\n</code></pre>\n<p>Please see XKCD's comic related to SQL injection attacks <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">https://xkcd.com/327/</a></p>\n<p><a href=\"https://i.stack.imgur.com/gwYNI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gwYNI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677067334,"creation_date":1677067030,"answer_id":75532386,"question_id":75530489,"body_markdown":"Adding another answer for the follow up question\r\n\r\n&gt; I have a question tho. lets say I have to run this over a loop and create a long string query, should I still use preparedStatement?\r\n\r\nWhen you have complex where clauses, I tend to do something like\r\n\r\n```java\r\npublic interface ParameterSetter {\r\n   void apply(PreparedStatement ps, int index) throws SQLException;\r\n}\r\n```\r\n\r\n```\r\npublic List&lt;Person&gt; findPeopleByFilter(PersonFilter filter) {\r\n   List&lt;String&gt; whereClauses = new ArrayList&lt;&gt;();\r\n   List&lt;ParameterSetter&gt; paramSetters = new ArrayList&lt;&gt;();\r\n   if (filter.getAge() != null) {\r\n      whereClauses.add(&quot;age = ?&quot;);\r\n      paramSetters.add((ps, i) -&gt; ps.setInt(i, filter.getAge());\r\n   }\r\n   if (filter.getName() != null) {\r\n      whereClauses.add(&quot;name = ?&quot;);\r\n      paramSetters.add((ps, i) -&gt; ps.setString(i, filter.getName());\r\n   }\r\n\r\n   // any number of extra where clauses (and their ParameterSetters) are determined here\r\n\r\n   String sql = &quot;SELECT * FROM PERSON&quot;;\r\n   if (!whereClauses.isEmpty()) {\r\n      sql += &quot; WHERE &quot; + whereClauses.stream().collect(Collectors.joining(&quot; AND &quot;));\r\n   }\r\n\r\n   try (Connection con = getConnection()) {\r\n      PreparedStatement ps = con.prepareStatement(sql);\r\n      int index = 1;\r\n      for (ParameterSetter paramSetter : paramSetters) {\r\n         paramSetter.apply(ps, index++);\r\n      }\r\n      ResultSet rs = ps.executeQuery();\r\n      List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n      while (rs.next()) {\r\n         ...\r\n      }\r\n      return people;\r\n   }\r\n}\r\n\r\n\r\n\r\n```","title":"Using String replace to create a query with date problem","body":"<p>Adding another answer for the follow up question</p>\n<blockquote>\n<p>I have a question tho. lets say I have to run this over a loop and create a long string query, should I still use preparedStatement?</p>\n</blockquote>\n<p>When you have complex where clauses, I tend to do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface ParameterSetter {\n   void apply(PreparedStatement ps, int index) throws SQLException;\n}\n</code></pre>\n<pre><code>public List&lt;Person&gt; findPeopleByFilter(PersonFilter filter) {\n   List&lt;String&gt; whereClauses = new ArrayList&lt;&gt;();\n   List&lt;ParameterSetter&gt; paramSetters = new ArrayList&lt;&gt;();\n   if (filter.getAge() != null) {\n      whereClauses.add(&quot;age = ?&quot;);\n      paramSetters.add((ps, i) -&gt; ps.setInt(i, filter.getAge());\n   }\n   if (filter.getName() != null) {\n      whereClauses.add(&quot;name = ?&quot;);\n      paramSetters.add((ps, i) -&gt; ps.setString(i, filter.getName());\n   }\n\n   // any number of extra where clauses (and their ParameterSetters) are determined here\n\n   String sql = &quot;SELECT * FROM PERSON&quot;;\n   if (!whereClauses.isEmpty()) {\n      sql += &quot; WHERE &quot; + whereClauses.stream().collect(Collectors.joining(&quot; AND &quot;));\n   }\n\n   try (Connection con = getConnection()) {\n      PreparedStatement ps = con.prepareStatement(sql);\n      int index = 1;\n      for (ParameterSetter paramSetter : paramSetters) {\n         paramSetter.apply(ps, index++);\n      }\n      ResultSet rs = ps.executeQuery();\n      List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n      while (rs.next()) {\n         ...\n      }\n      return people;\n   }\n}\n\n\n\n</code></pre>\n"}],"owner":{"account_id":27802627,"reputation":11,"user_id":21226791,"display_name":"Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677067334,"creation_date":1677057430,"question_id":75530489,"body_markdown":"I am trying to create a string query in Java in a dynamic way since parameters change. I am using the replace() method in order to attach parameters, however, I am having trouble when it comes to Java dates.\r\n\r\nWhen using &quot;replace&quot; it expects a string, since date is not a string I am converting it to a string.\r\n\r\nI have tried this:\r\n\r\nQuery example:\r\n\r\nString query = \r\n```\r\n(formId = formId and rate = rateId and validityDate &lt;= eventDate and creationDate &gt;= eventDate)\r\n```\r\n\r\n```\r\nquery = query.replace(&quot;formId&quot;, input.getFormId.toString());\r\nquery = query.replace(&quot;rateId &quot;, input.getrateId.toString());\r\nquery = query.replace(&quot;eventDate&quot;, input.geteventDate.toString());\r\n```\r\nThis seems to work find apart from the date which SQL does not except this way.\r\n\r\nI also have tried converting date to SQL date and using SimpleDateFormat, but I have the same problem.\r\n\r\nWhat is the best way to pass a date from an object into a string query?\r\n","title":"Using String replace to create a query with date problem","body":"<p>I am trying to create a string query in Java in a dynamic way since parameters change. I am using the replace() method in order to attach parameters, however, I am having trouble when it comes to Java dates.</p>\n<p>When using &quot;replace&quot; it expects a string, since date is not a string I am converting it to a string.</p>\n<p>I have tried this:</p>\n<p>Query example:</p>\n<p>String query =</p>\n<pre><code>(formId = formId and rate = rateId and validityDate &lt;= eventDate and creationDate &gt;= eventDate)\n</code></pre>\n<pre><code>query = query.replace(&quot;formId&quot;, input.getFormId.toString());\nquery = query.replace(&quot;rateId &quot;, input.getrateId.toString());\nquery = query.replace(&quot;eventDate&quot;, input.geteventDate.toString());\n</code></pre>\n<p>This seems to work find apart from the date which SQL does not except this way.</p>\n<p>I also have tried converting date to SQL date and using SimpleDateFormat, but I have the same problem.</p>\n<p>What is the best way to pass a date from an object into a string query?</p>\n"},{"tags":["java","google-chat"],"comments":[{"owner":{"account_id":25125122,"reputation":468,"user_id":18973005,"display_name":"Randommm"},"score":0,"creation_date":1677054159,"post_id":75529694,"comment_id":133259532,"body_markdown":"That&#39;s cause it is the latest in mvnrepos https://mvnrepository.com/artifact/com.google.apis/google-api-services-chat","body":"That&#39;s cause it is the latest in mvnrepos <a href=\"https://mvnrepository.com/artifact/com.google.apis/google-api-services-chat\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.google.apis/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3160102,"reputation":7223,"user_id":2671470,"accept_rate":65,"display_name":"Muhammad Dyas Yaskur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677066197,"creation_date":1677066197,"answer_id":75532253,"question_id":75529694,"body_markdown":"&gt; is it a different repo then?\r\n\r\nYes, Maven Central and Maven Repository (mvnrepository.com) are different thing.\r\n\r\nMaven Central is the official repository for Apache Maven and is managed by the Apache Software Foundation. Maven Central is the default repository that Maven uses to download dependencies.\r\n\r\nmvnrepository.com are indexes the contents of Maven Central and other repositories, and provides additional features such as dependency management tools and user reviews.\r\n\r\n\r\nYou can check the latest version of maven central repository here:\r\nhttps://search.maven.org/artifact/com.google.apis/google-api-services-chat","title":"mvnrepository doesn&#39;t show google-api-services-chat library","body":"<blockquote>\n<p>is it a different repo then?</p>\n</blockquote>\n<p>Yes, Maven Central and Maven Repository (mvnrepository.com) are different thing.</p>\n<p>Maven Central is the official repository for Apache Maven and is managed by the Apache Software Foundation. Maven Central is the default repository that Maven uses to download dependencies.</p>\n<p>mvnrepository.com are indexes the contents of Maven Central and other repositories, and provides additional features such as dependency management tools and user reviews.</p>\n<p>You can check the latest version of maven central repository here:\n<a href=\"https://search.maven.org/artifact/com.google.apis/google-api-services-chat\" rel=\"nofollow noreferrer\">https://search.maven.org/artifact/com.google.apis/google-api-services-chat</a></p>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75532253,"answer_count":1,"score":1,"last_activity_date":1677066197,"creation_date":1677052767,"question_id":75529694,"body_markdown":"mvnrepository doesn&#39;t show google-api-services-chat library\r\n\r\nthe documentation refers to https://developers.google.com/chat/api/guides/libraries#java\r\n\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        compile &#39;com.google.apis:google-api-services-chat:v1-rev20211125-1.32.1&#39;\r\n    }\r\n\r\nbut the maven repo shows only an older version, is it a different repo then?\r\n\r\n    https://mvnrepository.com/artifact/com.google.apis/google-api-services-chat\r\n    https://mvnrepository.com/artifact/com.google.apis/google-api-services-chat/v1-rev135-1.25.0","title":"mvnrepository doesn&#39;t show google-api-services-chat library","body":"<p>mvnrepository doesn't show google-api-services-chat library</p>\n<p>the documentation refers to <a href=\"https://developers.google.com/chat/api/guides/libraries#java\" rel=\"nofollow noreferrer\">https://developers.google.com/chat/api/guides/libraries#java</a></p>\n<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'com.google.apis:google-api-services-chat:v1-rev20211125-1.32.1'\n}\n</code></pre>\n<p>but the maven repo shows only an older version, is it a different repo then?</p>\n<pre><code>https://mvnrepository.com/artifact/com.google.apis/google-api-services-chat\nhttps://mvnrepository.com/artifact/com.google.apis/google-api-services-chat/v1-rev135-1.25.0\n</code></pre>\n"},{"tags":["java","project-reactor"],"owner":{"account_id":13546853,"reputation":351,"user_id":9999594,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677066187,"creation_date":1677066187,"question_id":75532252,"body_markdown":"We are currently rewriting a service to Spring Webflux, and some of our business logic will take some time to rewrite. In order to release a working service faster, we&#39;re leaving some of the more complex logic as sequential methods. My question is; how long does a method have to take before we should consider moving the work from the parallel scheduler to the bounded elastic scheduler? The code doesn&#39;t contain any blocking calls, but it does a lot of transformations and work that _can_ be done using Monos and Fluxes. We just won&#39;t have the time to rewrite them anytime soon.\r\n\r\nExample:\r\n```\r\nMono.just(&quot;someString&quot;)\r\n        .map(SequentialMapper::sequentialMethod); // should I ever run this on a different scheduler?\r\n```","title":"Scheduler for long sequential methods","body":"<p>We are currently rewriting a service to Spring Webflux, and some of our business logic will take some time to rewrite. In order to release a working service faster, we're leaving some of the more complex logic as sequential methods. My question is; how long does a method have to take before we should consider moving the work from the parallel scheduler to the bounded elastic scheduler? The code doesn't contain any blocking calls, but it does a lot of transformations and work that <em>can</em> be done using Monos and Fluxes. We just won't have the time to rewrite them anytime soon.</p>\n<p>Example:</p>\n<pre><code>Mono.just(&quot;someString&quot;)\n        .map(SequentialMapper::sequentialMethod); // should I ever run this on a different scheduler?\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-webflux","spring-webclient"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1676389875,"post_id":75449380,"comment_id":133125163,"body_markdown":"`Authentication is done in first service properly.` this is fine  `And when I try to access a URL which connects to second service` is this done through the other service, or just manually from postman to the second service? super unclear. `from the First Service, it always responds with Unauthorized.` so this mean it must go to the first service and then is proxied to the second service. so where is that code? thats the relevant code, why havnt you posted that bit?","body":"<code>Authentication is done in first service properly.</code> this is fine  <code>And when I try to access a URL which connects to second service</code> is this done through the other service, or just manually from postman to the second service? super unclear. <code>from the First Service, it always responds with Unauthorized.</code> so this mean it must go to the first service and then is proxied to the second service. so where is that code? thats the relevant code, why havnt you posted that bit?"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1676438540,"post_id":75449380,"comment_id":133134844,"body_markdown":"@Toerktumlare I have added customer client and controller where it is using.","body":"@Toerktumlare I have added customer client and controller where it is using."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1676438613,"post_id":75449380,"comment_id":133134849,"body_markdown":"Second service I tried through postman and it worked fine. From first service, call is reaching second service and it works fine as an entry is saved in DB and responding with 201. I have added the client code now in update","body":"Second service I tried through postman and it worked fine. From first service, call is reaching second service and it works fine as an entry is saved in DB and responding with 201. I have added the client code now in update"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1676889048,"post_id":75449380,"comment_id":133221686,"body_markdown":"You aren&#39;t passing any authentication header, so how should the second service know who you are? Authentication information isn&#39;t passed automatically, you will need to pass the token yourself in the request being made with the `WebClient`.","body":"You aren&#39;t passing any authentication header, so how should the second service know who you are? Authentication information isn&#39;t passed automatically, you will need to pass the token yourself in the request being made with the <code>WebClient</code>."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1676889492,"post_id":75449380,"comment_id":133221837,"body_markdown":"@M.Deinum Authentication is not required in my second service for now. Thats a different case. For now I&#39;m trying to run it without the security. And through postman it worked without any authentication.  And from the logs of first service, the webclient call returned 201. Issue is with first service as I interpret.","body":"@M.Deinum Authentication is not required in my second service for now. Thats a different case. For now I&#39;m trying to run it without the security. And through postman it worked without any authentication.  And from the logs of first service, the webclient call returned 201. Issue is with first service as I interpret."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1676891123,"post_id":75449380,"comment_id":133222276,"body_markdown":"Please add the **full stacktrace** as well as your `CustomerClient` code.","body":"Please add the <b>full stacktrace</b> as well as your <code>CustomerClient</code> code."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1676892316,"post_id":75449380,"comment_id":133222583,"body_markdown":"I have added the exception stacktrace and also added CustomerClient interface","body":"I have added the exception stacktrace and also added CustomerClient interface"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1676944392,"post_id":75449380,"comment_id":133234857,"body_markdown":"could you please remove `.authenticationEntryPoint(unauthorizedHandler)` I dont really understand your purpose of setting this? please explain why you have this defined, because your implementation of it doesn&#39;t really makes sense","body":"could you please remove <code>.authenticationEntryPoint(unauthorizedHandler)</code> I dont really understand your purpose of setting this? please explain why you have this defined, because your implementation of it doesn&#39;t really makes sense"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1676944999,"post_id":75449380,"comment_id":133234913,"body_markdown":"second, a lot is missing from your question you are saying `Authentication is done in first service properly` but you have not shown us what your request looks like, and where is the code for this endpoint this request is done to? where is this code?","body":"second, a lot is missing from your question you are saying <code>Authentication is done in first service properly</code> but you have not shown us what your request looks like, and where is the code for this endpoint this request is done to? where is this code?"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1676982396,"post_id":75449380,"comment_id":133242882,"body_markdown":"@Toerktumlare I thought more code was not necessary. This is bearer token authentication. I was referring to this link - https://www.bezkoder.com/spring-boot-jwt-authentication. Obviously changed to Spring Boot 3 and also added few more security apis. \n`AuthenticationEntry` point is added to return 401 with custom response data while `AccessDeneiedHandler` is added to return 403 with custom response data as for few apis I&#39;m checking the role as well. If I remove this, for 401 also it is returning with 403 which I certainly don&#39;t want.","body":"@Toerktumlare I thought more code was not necessary. This is bearer token authentication. I was referring to this link - <a href=\"https://www.bezkoder.com/spring-boot-jwt-authentication\" rel=\"nofollow noreferrer\">bezkoder.com/spring-boot-jwt-authentication</a>. Obviously changed to Spring Boot 3 and also added few more security apis.  <code>AuthenticationEntry</code> point is added to return 401 with custom response data while <code>AccessDeneiedHandler</code> is added to return 403 with custom response data as for few apis I&#39;m checking the role as well. If I remove this, for 401 also it is returning with 403 which I certainly don&#39;t want."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1676990305,"post_id":75449380,"comment_id":133245599,"body_markdown":"you are saying that the call to the first service is failing, because you are getting a 401 UNAUTHORIZED back. Then its suitable that you post THAT code that handles that request, and you post what your request looks like. Also posting a link to a blog post doesn&#39;t help anyone. We are trying to help you and YOUR code, not some code in a blog post. That blogpost is also following bad practices as it is implementing a custom filter for handling JWTs. Spring has had built in hadling of JWTs built into the framework since 2017. So the person that wrote that blogpost apparently doesnt read docs.","body":"you are saying that the call to the first service is failing, because you are getting a 401 UNAUTHORIZED back. Then its suitable that you post THAT code that handles that request, and you post what your request looks like. Also posting a link to a blog post doesn&#39;t help anyone. We are trying to help you and YOUR code, not some code in a blog post. That blogpost is also following bad practices as it is implementing a custom filter for handling JWTs. Spring has had built in hadling of JWTs built into the framework since 2017. So the person that wrote that blogpost apparently doesnt read docs."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1676990512,"post_id":75449380,"comment_id":133245674,"body_markdown":"HTTP standards declare that certain status codes are to bo returned during specific events. Thats why there are standards and you should not change these standards if you want your service to be interoperable with other services and libraries. 401s are returned, when you are encouraging the client to authenticate themselfes, while 403 is when the client is doing something not allowed. By returning 401 hen there should be a 401 you will confuse client, encouraging them to authenticate themselfes, when they are actually doing something forbidden. Which is semantically incorrect.","body":"HTTP standards declare that certain status codes are to bo returned during specific events. Thats why there are standards and you should not change these standards if you want your service to be interoperable with other services and libraries. 401s are returned, when you are encouraging the client to authenticate themselfes, while 403 is when the client is doing something not allowed. By returning 401 hen there should be a 401 you will confuse client, encouraging them to authenticate themselfes, when they are actually doing something forbidden. Which is semantically incorrect."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1677066256,"post_id":75449380,"comment_id":133262826,"body_markdown":"@Toerktumlare I&#39;m sorry if my question was not clear. I have updated it with more cdetails and error flow.","body":"@Toerktumlare I&#39;m sorry if my question was not clear. I have updated it with more cdetails and error flow."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1677066363,"post_id":75449380,"comment_id":133262853,"body_markdown":"I added those handler to return the same http status only, but with custom fields in response if you see. If authentication fails, I&#39;m returning 401 and if user is not allowed for some operation it is returning 403. But in those cases I&#39;m returning some custom fields also. Thats why I have added those handlers in Web Security","body":"I added those handler to return the same http status only, but with custom fields in response if you see. If authentication fails, I&#39;m returning 401 and if user is not allowed for some operation it is returning 403. But in those cases I&#39;m returning some custom fields also. Thats why I have added those handlers in Web Security"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1677066510,"post_id":75449380,"comment_id":133262889,"body_markdown":"Call reaches the controller in first service after authentication and authorization. And the controller is calling the second service to create a customer entry in DB. Then the second service returns with 201. Reaches the call back in first service. And instead of returning the same response I received from second service as per the controller, it is returning 401.","body":"Call reaches the controller in first service after authentication and authorization. And the controller is calling the second service to create a customer entry in DB. Then the second service returns with 201. Reaches the call back in first service. And instead of returning the same response I received from second service as per the controller, it is returning 401."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1677069239,"post_id":75449380,"comment_id":133263723,"body_markdown":"well your logs state different, and its impossible to know the cause unless you post your FULL debug logs of the first service","body":"well your logs state different, and its impossible to know the cause unless you post your FULL debug logs of the first service"},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1677071521,"post_id":75449380,"comment_id":133264474,"body_markdown":"That&#39;s what even I don&#39;t understand why Authentication Entry point is getting executed after the controller is executed. That all the logs I have as well.","body":"That&#39;s what even I don&#39;t understand why Authentication Entry point is getting executed after the controller is executed. That all the logs I have as well."},{"owner":{"display_name":"user2094311"},"score":0,"creation_date":1677071554,"post_id":75449380,"comment_id":133264489,"body_markdown":"And If I use mono.block() based on the suggested answer I&#39;m getting the response properly.","body":"And If I use mono.block() based on the suggested answer I&#39;m getting the response properly."}],"answers":[{"tags":[],"owner":{"account_id":2729259,"reputation":6968,"user_id":2353403,"accept_rate":82,"display_name":"Coder"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1676888527,"creation_date":1676888527,"answer_id":75508004,"question_id":75449380,"body_markdown":"I was facing a similar issue. I was using WebFlux for using WebClient only and not the complete reactive feature.\r\nI did not add the *`WebClient`* filter method. Error responses were handled by `@RestControllerAdvice`. \r\n\r\nChange your controller to return the body instead of Mono/Flux\r\n\r\n \r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Customer&gt; create(@RequestBody @Valid CustomerDTO customerDTO) {\r\n    \tlog.info(&quot;Creating....&quot;);\r\n    \treturn customerClient.create(customerDTO).block();\r\n    }\r\n\r\n\r\nAnd for handling errors, the WebClient throws *WebClientResponseException* and you can handle it in @RestControllerAdvice something like below. \r\n\r\n    @ExceptionHandler(WebClientResponseException.class)\r\n    public ProblemDetail handleWebClientException(WebClientResponseException e) {\r\n    \tHttpStatusCode statusCode = e.getStatusCode();\r\n    \tvar responseBody = e.getResponseBodyAs(&lt;ExpctedResponseClass&gt;.class);\r\n    \tString message = &quot;Details based on response&quot;;\r\n    \treturn ProblemDetail.forStatusAndDetail(statusCode, message);\r\n    }","title":"Using Spring Security with Spring Starter Web and WebClient","body":"<p>I was facing a similar issue. I was using WebFlux for using WebClient only and not the complete reactive feature.\nI did not add the <em><code>WebClient</code></em> filter method. Error responses were handled by <code>@RestControllerAdvice</code>.</p>\n<p>Change your controller to return the body instead of Mono/Flux</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;Customer&gt; create(@RequestBody @Valid CustomerDTO customerDTO) {\n    log.info(&quot;Creating....&quot;);\n    return customerClient.create(customerDTO).block();\n}\n</code></pre>\n<p>And for handling errors, the WebClient throws <em>WebClientResponseException</em> and you can handle it in @RestControllerAdvice something like below.</p>\n<pre><code>@ExceptionHandler(WebClientResponseException.class)\npublic ProblemDetail handleWebClientException(WebClientResponseException e) {\n    HttpStatusCode statusCode = e.getStatusCode();\n    var responseBody = e.getResponseBodyAs(&lt;ExpctedResponseClass&gt;.class);\n    String message = &quot;Details based on response&quot;;\n    return ProblemDetail.forStatusAndDetail(statusCode, message);\n}\n</code></pre>\n"}],"owner":{"display_name":"user2094311"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":899,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75508004,"answer_count":1,"score":0,"last_activity_date":1677066160,"creation_date":1676385472,"question_id":75449380,"body_markdown":"I&#39;m using Spring Boot 3 and configured spring-boot-starter-web and spring-boot-starter-webflux. I added *`Webflux`* to use the *`WebClient`* with `HttpExchange`. I have also created another spring boot project with some rest endpoints to use the WebClient. Second service creates entry in DB. \r\n\r\nI have also configured Spring Security in first service and doing JWT based authentication and also configured `@RestControllerAdvice` for error responses in the gateway service. \r\n\r\n&gt; Updated question with more details to have more clarity based on\r\n&gt; comments\r\n\r\n***The application flow**: So my first service acts as a gateway which does authentication and authorization by directly communicating with DB for user releated tables (This would get changed as the application grows - Could be SSO OAuth2 auth). And the gatwat service also communicates with second service which connects to DB and provide other services like adding customer.*\r\n\r\n***Error Flow**: The API to create a  cusomter reached the gateway service controller (it has passed authentication and authorization). The call reached the second service and service respnded succesfully with 201. But the gateway service then responds with 401 instead of the same\r\n201.*\r\n\r\nBelow is my WebSecurity Configuration class\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n    \t@Bean\r\n    \tAuthTokenFilter authenticationJwtTokenFilter() {\r\n    \t\treturn new AuthTokenFilter();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tAuthenticationProvider authenticationProvider(UserDetailsServiceImpl userDetailsService) {\r\n    \t\tDaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n    \t\tauthProvider.setUserDetailsService(userDetailsService);\r\n    \t\tauthProvider.setPasswordEncoder(passwordEncoder());\r\n    \t\treturn authProvider;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tAuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n    \t\treturn authConfig.getAuthenticationManager();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tPasswordEncoder passwordEncoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tSecurityFilterChain filterChain(HttpSecurity http, AuthEntryPoint unauthorizedHandler,\r\n    \t\t\tAppAccessDeniedHandler accessDeniedHandler, UserDetailsServiceImpl userDetailsService) throws Exception {\r\n    \t\thttp.cors().and().csrf().disable().exceptionHandling().accessDeniedHandler(accessDeniedHandler)\r\n    \t\t\t\t.authenticationEntryPoint(unauthorizedHandler).and().sessionManagement()\r\n    \t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests()\r\n    \t\t\t\t.requestMatchers(&quot;/auth/**&quot;).permitAll().requestMatchers(&quot;/test/**&quot;).permitAll()\r\n    \t\t\t\t.requestMatchers(&quot;/v3/api-docs&quot;, &quot;/api-docs/**&quot;, &quot;/configuration/ui&quot;, &quot;/swagger-resources&quot;,\r\n    \t\t\t\t\t\t&quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/webjars/**&quot;,\r\n    \t\t\t\t\t\t&quot;/swagger-resources/configuration/ui&quot;, &quot;/swagger-ui.html&quot;, &quot;/actuator/**&quot;)\r\n    \t\t\t\t.permitAll().requestMatchers(&quot;/user/{id}/**&quot;).access(new AppAuthorizationManager()).anyRequest()\r\n    \t\t\t\t.authenticated();\r\n    \t\thttp.authenticationProvider(authenticationProvider(userDetailsService));\r\n    \t\thttp.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \t\treturn http.build();\r\n    \t}\r\n    }\r\n\r\n\r\n**AuthenticationEntryPoint**\r\n\r\n    @Component\r\n    @Slf4j\r\n    public class AuthEntryPoint implements AuthenticationEntryPoint {\r\n    \r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;\r\n    \r\n    \t@Override\r\n    \tpublic void commence(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tAuthenticationException authException) throws IOException, ServletException {\r\n    \t\tlog.error(&quot;Authentication error: {}&quot;, authException);\r\n    \t\tHttpStatus httpStatus = HttpStatus.UNAUTHORIZED;\r\n    \t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\tresponse.setStatus(httpStatus.value());\r\n    \t\tvar body = AccessResponseUtls.getResponseBody(request, httpStatus);\r\n    \t\tobjectMapper.writeValue(response.getOutputStream(), body);\r\n    \t}\r\n    \r\n    }\r\n\r\n**AccessDeniedHandler**\r\n\r\n    @Component\r\n    @Slf4j\r\n    public class AppAccessDeniedHandler implements AccessDeniedHandler {\r\n    \r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;\r\n    \r\n    \t@Override\r\n    \tpublic void handle(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tAccessDeniedException accessDeniedException) throws IOException, ServletException \r\n      {    \t\t\r\n                log.error(&quot;Forbidden error: {}&quot;, accessDeniedException);\r\n        \t\tHttpStatus httpStatus = HttpStatus.FORBIDDEN;\r\n        \t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n        \t\tresponse.setStatus(httpStatus.value());\r\n        \t\tvar body = AccessResponseUtls.getResponseBody(request, httpStatus);\r\n        \t\tobjectMapper.writeValue(response.getOutputStream(), body);\r\n        \t}\r\n        }\r\n\r\nI have configured Client via [@HttpExchange][1] and using WebClient in the configuration. \r\n    \r\n    @Configuration\r\n    @Slf4j\r\n    public class AppConfig {\r\n    \r\n    \tWebClient webClient(String url) {\r\n    \t\treturn WebClient.builder().baseUrl(url)\r\n    \t\t\t\t//.filter(errorHandler())\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \t\r\n    \tpublic static ExchangeFilterFunction errorHandler() {\r\n            return ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; {\r\n          log.info(&quot;Client Response =&gt; {}&quot;, clientResponse.bodyToMono(Customer.class));\r\n                log.info(&quot;Status Code = {}&quot;, clientResponse.statusCode());\r\n                if (clientResponse.statusCode().is5xxServerError()) {\r\n                    log.error(&quot;Got 5xx Error&quot;);\r\n                    return clientResponse.bodyToMono(String.class)\r\n                            .flatMap(errorBody -&gt; Mono.error(new RuntimeException(errorBody)));\r\n                } else if (clientResponse.statusCode().is4xxClientError()) {\r\n                    log.error(&quot;Got 4xx Error&quot;);\r\n                    return clientResponse.bodyToMono(String.class)\r\n                            .flatMap(errorBody -&gt; Mono.error(new InvalidParametersException(errorBody)));\r\n                } else {\r\n                    return Mono.just(clientResponse);\r\n                }\r\n            });\r\n        }\r\n    \r\n    \t@Bean\r\n    \tCustomerClient customerClient() {\r\n    \t\tHttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\r\n    \t\t\t\t.builder(WebClientAdapter.forClient(webClient(&quot;http://localhost:8081/api/v1/&quot;))).build();\r\n    \t\treturn httpServiceProxyFactory.createClient(CustomerClient.class);\r\n    \r\n    \t}\r\n    }\r\n\r\n**CustomerClient - Client Interface**\r\n    \r\n        @HttpExchange(&quot;/customer&quot;)\r\n        public interface CustomerClient {\r\n        \t@PostExchange\r\n        \tMono&lt;ResponseEntity&lt;Customer&gt;&gt; create(@RequestBody CustomerDTO customerDTO);\r\n        }\r\n\r\nI wrote a test controller which returns some strings to test authentication in the gateway service. Signup, login, testing which are in gateway service works properly. If jwt token is not passed or an invalid token is passed for test controller APIs, the AuthenticationEntryPoint is getting executed returns with 401 and extra custom fields in response. And for some method I have added *hasRole* and for that AccessDeniedHandler is getting executed if the user doesn&#39;t have that role and it returns with 403 with custom fields in response. These apis work as expected. \r\n\r\nIn my gateway service, I have added a controller, for adding customer. Inside that I&#39;m calling the second service using the Client interface (HttpExchange) which is configured to use WebClient. \r\n\r\n\r\n**Controller Class**\r\n\r\n    @CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n    @RestController\r\n    @RequestMapping(&quot;/customer&quot;)\r\n    @Slf4j\r\n    public class CustomerController {\r\n    \r\n    \t@Autowired\r\n    \tprivate CustomerClient customerClient;\r\n    \r\n    \t@PostMapping\r\n    \tpublic Mono&lt;ResponseEntity&lt;Customer&gt;&gt; create(@RequestBody @Valid CustomerDTO customerDTO) {\r\n    \t\tlog.info(&quot;Creating....&quot;);\r\n    \t\treturn customerClient.create(customerDTO);\r\n    \t}\r\n    }\r\n\r\n\r\nThe second service is not having any security configured at the moment. It&#39;s plain rest service. When I test the service alone through postman, it is working and returns with 201. \r\n\r\nNow through gatway service, I tried to call the same API. The authentication and authorization has passed and the call has reached in CustomerController in gatway service. It can be verfied using the logs. And the from there, the call has reached second service as well (verified through logs). \r\n\r\nI tried to enable error handler in WebClient (Commented code - `filter(errorHandler())`). So when the call is returned from secon service, that status is printed as 201 which is expcted. But from the controller in gateway, the response is not getting returned. Instead the response is 401 with the response having custom fields I have set in `AuthenticationEntryPoint`. \r\n\r\nOnce the call is returned from second service, why the AuthenticationEntryPoint is getting executed instead of returning the service? How to get the proper response and send back? And if error response is coming from second service, how to handle it in @RestControllerAdvice? or do we need to handle through WebClient filter only? If so how? \r\n\r\n**Log from Error handler**\r\n\r\n    Client Response =&gt; checkpoint(&quot;Body from POST http://localhost:8081/api/v1/course [DefaultClientResponse]&quot;)\r\n    Status Code = 201 CREATED\r\n\r\n**Exception Stacktrace**\r\n\r\n    org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\r\n    at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:199) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\r\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:612) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:582) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:588) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:354) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:174) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:247) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\n----------\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/6.0.0-RC3/javadoc-api/org/springframework/web/service/annotation/HttpExchange.html\r\n\r\n","title":"Using Spring Security with Spring Starter Web and WebClient","body":"<p>I'm using Spring Boot 3 and configured spring-boot-starter-web and spring-boot-starter-webflux. I added <em><code>Webflux</code></em> to use the <em><code>WebClient</code></em> with <code>HttpExchange</code>. I have also created another spring boot project with some rest endpoints to use the WebClient. Second service creates entry in DB.</p>\n<p>I have also configured Spring Security in first service and doing JWT based authentication and also configured <code>@RestControllerAdvice</code> for error responses in the gateway service.</p>\n<blockquote>\n<p>Updated question with more details to have more clarity based on\ncomments</p>\n</blockquote>\n<p><em><strong>The application flow</strong>: So my first service acts as a gateway which does authentication and authorization by directly communicating with DB for user releated tables (This would get changed as the application grows - Could be SSO OAuth2 auth). And the gatwat service also communicates with second service which connects to DB and provide other services like adding customer.</em></p>\n<p><em><strong>Error Flow</strong>: The API to create a  cusomter reached the gateway service controller (it has passed authentication and authorization). The call reached the second service and service respnded succesfully with 201. But the gateway service then responds with 401 instead of the same\n201.</em></p>\n<p>Below is my WebSecurity Configuration class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    @Bean\n    AuthenticationProvider authenticationProvider(UserDetailsServiceImpl userDetailsService) {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n        return authConfig.getAuthenticationManager();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http, AuthEntryPoint unauthorizedHandler,\n            AppAccessDeniedHandler accessDeniedHandler, UserDetailsServiceImpl userDetailsService) throws Exception {\n        http.cors().and().csrf().disable().exceptionHandling().accessDeniedHandler(accessDeniedHandler)\n                .authenticationEntryPoint(unauthorizedHandler).and().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests()\n                .requestMatchers(&quot;/auth/**&quot;).permitAll().requestMatchers(&quot;/test/**&quot;).permitAll()\n                .requestMatchers(&quot;/v3/api-docs&quot;, &quot;/api-docs/**&quot;, &quot;/configuration/ui&quot;, &quot;/swagger-resources&quot;,\n                        &quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/webjars/**&quot;,\n                        &quot;/swagger-resources/configuration/ui&quot;, &quot;/swagger-ui.html&quot;, &quot;/actuator/**&quot;)\n                .permitAll().requestMatchers(&quot;/user/{id}/**&quot;).access(new AppAuthorizationManager()).anyRequest()\n                .authenticated();\n        http.authenticationProvider(authenticationProvider(userDetailsService));\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n}\n</code></pre>\n<p><strong>AuthenticationEntryPoint</strong></p>\n<pre><code>@Component\n@Slf4j\npublic class AuthEntryPoint implements AuthenticationEntryPoint {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n        log.error(&quot;Authentication error: {}&quot;, authException);\n        HttpStatus httpStatus = HttpStatus.UNAUTHORIZED;\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(httpStatus.value());\n        var body = AccessResponseUtls.getResponseBody(request, httpStatus);\n        objectMapper.writeValue(response.getOutputStream(), body);\n    }\n\n}\n</code></pre>\n<p><strong>AccessDeniedHandler</strong></p>\n<pre><code>@Component\n@Slf4j\npublic class AppAccessDeniedHandler implements AccessDeniedHandler {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Override\n    public void handle(HttpServletRequest request, HttpServletResponse response,\n            AccessDeniedException accessDeniedException) throws IOException, ServletException \n  {         \n            log.error(&quot;Forbidden error: {}&quot;, accessDeniedException);\n            HttpStatus httpStatus = HttpStatus.FORBIDDEN;\n            response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n            response.setStatus(httpStatus.value());\n            var body = AccessResponseUtls.getResponseBody(request, httpStatus);\n            objectMapper.writeValue(response.getOutputStream(), body);\n        }\n    }\n</code></pre>\n<p>I have configured Client via <a href=\"https://docs.spring.io/spring-framework/docs/6.0.0-RC3/javadoc-api/org/springframework/web/service/annotation/HttpExchange.html\" rel=\"nofollow noreferrer\">@HttpExchange</a> and using WebClient in the configuration.</p>\n<pre><code>@Configuration\n@Slf4j\npublic class AppConfig {\n\n    WebClient webClient(String url) {\n        return WebClient.builder().baseUrl(url)\n                //.filter(errorHandler())\n                .build();\n    }\n    \n    public static ExchangeFilterFunction errorHandler() {\n        return ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; {\n      log.info(&quot;Client Response =&gt; {}&quot;, clientResponse.bodyToMono(Customer.class));\n            log.info(&quot;Status Code = {}&quot;, clientResponse.statusCode());\n            if (clientResponse.statusCode().is5xxServerError()) {\n                log.error(&quot;Got 5xx Error&quot;);\n                return clientResponse.bodyToMono(String.class)\n                        .flatMap(errorBody -&gt; Mono.error(new RuntimeException(errorBody)));\n            } else if (clientResponse.statusCode().is4xxClientError()) {\n                log.error(&quot;Got 4xx Error&quot;);\n                return clientResponse.bodyToMono(String.class)\n                        .flatMap(errorBody -&gt; Mono.error(new InvalidParametersException(errorBody)));\n            } else {\n                return Mono.just(clientResponse);\n            }\n        });\n    }\n\n    @Bean\n    CustomerClient customerClient() {\n        HttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\n                .builder(WebClientAdapter.forClient(webClient(&quot;http://localhost:8081/api/v1/&quot;))).build();\n        return httpServiceProxyFactory.createClient(CustomerClient.class);\n\n    }\n}\n</code></pre>\n<p><strong>CustomerClient - Client Interface</strong></p>\n<pre><code>    @HttpExchange(&quot;/customer&quot;)\n    public interface CustomerClient {\n        @PostExchange\n        Mono&lt;ResponseEntity&lt;Customer&gt;&gt; create(@RequestBody CustomerDTO customerDTO);\n    }\n</code></pre>\n<p>I wrote a test controller which returns some strings to test authentication in the gateway service. Signup, login, testing which are in gateway service works properly. If jwt token is not passed or an invalid token is passed for test controller APIs, the AuthenticationEntryPoint is getting executed returns with 401 and extra custom fields in response. And for some method I have added <em>hasRole</em> and for that AccessDeniedHandler is getting executed if the user doesn't have that role and it returns with 403 with custom fields in response. These apis work as expected.</p>\n<p>In my gateway service, I have added a controller, for adding customer. Inside that I'm calling the second service using the Client interface (HttpExchange) which is configured to use WebClient.</p>\n<p><strong>Controller Class</strong></p>\n<pre><code>@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RestController\n@RequestMapping(&quot;/customer&quot;)\n@Slf4j\npublic class CustomerController {\n\n    @Autowired\n    private CustomerClient customerClient;\n\n    @PostMapping\n    public Mono&lt;ResponseEntity&lt;Customer&gt;&gt; create(@RequestBody @Valid CustomerDTO customerDTO) {\n        log.info(&quot;Creating....&quot;);\n        return customerClient.create(customerDTO);\n    }\n}\n</code></pre>\n<p>The second service is not having any security configured at the moment. It's plain rest service. When I test the service alone through postman, it is working and returns with 201.</p>\n<p>Now through gatway service, I tried to call the same API. The authentication and authorization has passed and the call has reached in CustomerController in gatway service. It can be verfied using the logs. And the from there, the call has reached second service as well (verified through logs).</p>\n<p>I tried to enable error handler in WebClient (Commented code - <code>filter(errorHandler())</code>). So when the call is returned from secon service, that status is printed as 201 which is expcted. But from the controller in gateway, the response is not getting returned. Instead the response is 401 with the response having custom fields I have set in <code>AuthenticationEntryPoint</code>.</p>\n<p>Once the call is returned from second service, why the AuthenticationEntryPoint is getting executed instead of returning the service? How to get the proper response and send back? And if error response is coming from second service, how to handle it in @RestControllerAdvice? or do we need to handle through WebClient filter only? If so how?</p>\n<p><strong>Log from Error handler</strong></p>\n<pre><code>Client Response =&gt; checkpoint(&quot;Body from POST http://localhost:8081/api/v1/course [DefaultClientResponse]&quot;)\nStatus Code = 201 CREATED\n</code></pre>\n<p><strong>Exception Stacktrace</strong></p>\n<pre><code>org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\nat org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:199) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.4.jar:6.0.4]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.4.jar:6.0.4]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:612) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:582) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:588) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:354) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:174) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:247) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<hr />\n"},{"tags":["java","android","gridview","slider"],"owner":{"account_id":19093035,"reputation":3,"user_id":13942954,"display_name":"Dhakshna moorthy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677066156,"creation_date":1677066156,"question_id":75532244,"body_markdown":"Initially I created a grid view inside my activity_main.xml and the contents inside the grid view are placed inside card_item.xml (it has only one text view courseTV) and for that I&#39;ve used \r\n1. CourseModel.java for getters and setters\r\n2. CourseGVAdapter.java (ArrayAdapter&lt;CourseModel&gt;) \r\n\r\nbelow is the code of CourseAdapter.java\r\n```\r\n@NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n\r\n        View listitemView = convertView;\r\n        if (listitemView == null) {\r\n            // Layout Inflater inflates each item to be displayed in GridView.\r\n            listitemView = LayoutInflater.from(getContext()).inflate(R.layout.card_item, parent, false);\r\n        }\r\n\r\n        CourseModel courseModel = getItem(position);\r\n        TextView courseTV = listitemView.findViewById(R.id.idTVCourse);\r\n\r\n        courseTV.setText(courseModel.getCourse_name());\r\n        return listitemView;\r\n    }\r\n```\r\n\r\nbelow is the code of MainActivity.java\r\n\r\n```\r\nGridView coursesGV = findViewById(R.id.idGVseat);\r\n\r\nArrayList&lt;CourseModel&gt; courseModelArrayList = new ArrayList&lt;CourseModel&gt;();\r\n\r\ncourseModelArrayList.add(new CourseModel(&quot;DSA&quot;));\r\ncourseModelArrayList.add(new CourseModel(&quot;JAVA&quot;));\r\ncourseModelArrayList.add(new CourseModel(&quot;C++&quot;));\r\ncourseModelArrayList.add(new CourseModel(&quot;Python&quot;));\r\ncourseModelArrayList.add(new CourseModel(&quot;Javascript&quot;));       \r\ncourseModelArrayList.add(new CourseModel(&quot;DSA&quot;));\r\n\r\nCourseGVAdapter adapter = new CourseGVAdapter(this, courseModelArrayList);\r\ncoursesGV.setAdapter(adapter);\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nNow I wish to add Slider so my concept is that there will be 4 sliders and in each slider the grid view is present but the courses are different.\r\n\r\nSo how do that so ..\r\n","title":"How to add grid view inside android slider","body":"<p>Initially I created a grid view inside my activity_main.xml and the contents inside the grid view are placed inside card_item.xml (it has only one text view courseTV) and for that I've used</p>\n<ol>\n<li>CourseModel.java for getters and setters</li>\n<li>CourseGVAdapter.java (ArrayAdapter)</li>\n</ol>\n<p>below is the code of CourseAdapter.java</p>\n<pre><code>@NonNull\n    @Override\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n\n        View listitemView = convertView;\n        if (listitemView == null) {\n            // Layout Inflater inflates each item to be displayed in GridView.\n            listitemView = LayoutInflater.from(getContext()).inflate(R.layout.card_item, parent, false);\n        }\n\n        CourseModel courseModel = getItem(position);\n        TextView courseTV = listitemView.findViewById(R.id.idTVCourse);\n\n        courseTV.setText(courseModel.getCourse_name());\n        return listitemView;\n    }\n</code></pre>\n<p>below is the code of MainActivity.java</p>\n<pre><code>GridView coursesGV = findViewById(R.id.idGVseat);\n\nArrayList&lt;CourseModel&gt; courseModelArrayList = new ArrayList&lt;CourseModel&gt;();\n\ncourseModelArrayList.add(new CourseModel(&quot;DSA&quot;));\ncourseModelArrayList.add(new CourseModel(&quot;JAVA&quot;));\ncourseModelArrayList.add(new CourseModel(&quot;C++&quot;));\ncourseModelArrayList.add(new CourseModel(&quot;Python&quot;));\ncourseModelArrayList.add(new CourseModel(&quot;Javascript&quot;));       \ncourseModelArrayList.add(new CourseModel(&quot;DSA&quot;));\n\nCourseGVAdapter adapter = new CourseGVAdapter(this, courseModelArrayList);\ncoursesGV.setAdapter(adapter);\n\n</code></pre>\n<p>Now I wish to add Slider so my concept is that there will be 4 sliders and in each slider the grid view is present but the courses are different.</p>\n<p>So how do that so ..</p>\n"},{"tags":["java","android","splash-screen","android-12"],"comments":[{"owner":{"account_id":10698530,"reputation":582,"user_id":7874746,"display_name":"Abdullah Javed"},"score":0,"creation_date":1676990971,"post_id":75521070,"comment_id":133245854,"body_markdown":"https://developer.android.com/develop/ui/views/launch/splash-screen/migrate#prevent_the_custom_activity_from_displaying","body":"<a href=\"https://developer.android.com/develop/ui/views/launch/splash-screen/migrate#prevent_the_custom_activity_from_displaying\" rel=\"nofollow noreferrer\">developer.android.com/develop/ui/views/launch/splash-screen/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":27741579,"reputation":1,"user_id":21177944,"display_name":"Ranjan Suman"},"score":0,"creation_date":1677044136,"post_id":75521070,"comment_id":133257518,"body_markdown":"i used splashScreenSetonScreenCondition but it is not working app get crash as soon as i run it","body":"i used splashScreenSetonScreenCondition but it is not working app get crash as soon as i run it"}],"answers":[{"tags":[],"owner":{"account_id":21566602,"reputation":11,"user_id":15900260,"display_name":"M. AsadUllah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676991112,"creation_date":1676991112,"answer_id":75522150,"question_id":75521070,"body_markdown":"Splash activity\r\n```\r\nIntent activityIntent;\r\n        if (UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\r\n            activityIntent = new Intent(getApplicationContext(), LoginActivity.class);\r\n        } else {\r\n            activityIntent = new Intent(getApplicationContext(), HomeActivity.class);\r\n        }\r\n        \r\n        startActivity(activityIntent);\r\n        finish();\r\n```\r\n\r\n&gt; UserInformation.getID() return value empty, so thats why intent to LoginActivity.class","title":"Android 12 splash screen , Navigate to various activity after splash screen as per the condition","body":"<p>Splash activity</p>\n<pre><code>Intent activityIntent;\n        if (UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\n            activityIntent = new Intent(getApplicationContext(), LoginActivity.class);\n        } else {\n            activityIntent = new Intent(getApplicationContext(), HomeActivity.class);\n        }\n        \n        startActivity(activityIntent);\n        finish();\n</code></pre>\n<blockquote>\n<p>UserInformation.getID() return value empty, so thats why intent to LoginActivity.class</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":21566602,"reputation":11,"user_id":15900260,"display_name":"M. AsadUllah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677066090,"creation_date":1677066090,"answer_id":75532226,"question_id":75521070,"body_markdown":"\r\n      public class LoginActivity extends Activity {\r\n\r\n          @Override\r\n          protected void onCreate(Bundle savedInstanceState) {\r\n          // Handle the splash screen transition.\r\n          SplashScreen splashScreen = SplashScreen.installSplashScreen(this);\r\n\r\n          super.onCreate(savedInstanceState);\r\n          setContentView(R.layout.login_activity);\r\n\r\n          // Keep the splash screen visible for this Activity\r\n          splashScreen.setKeepOnScreenCondition(() -&gt; false );\r\n\r\n          if (!UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\r\n            startActivity(new Intent(this, HomeActivity.class));\r\n            finish();\r\n          }","title":"Android 12 splash screen , Navigate to various activity after splash screen as per the condition","body":"<pre><code>  public class LoginActivity extends Activity {\n\n      @Override\n      protected void onCreate(Bundle savedInstanceState) {\n      // Handle the splash screen transition.\n      SplashScreen splashScreen = SplashScreen.installSplashScreen(this);\n\n      super.onCreate(savedInstanceState);\n      setContentView(R.layout.login_activity);\n\n      // Keep the splash screen visible for this Activity\n      splashScreen.setKeepOnScreenCondition(() -&gt; false );\n\n      if (!UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\n        startActivity(new Intent(this, HomeActivity.class));\n        finish();\n      }\n</code></pre>\n"}],"owner":{"account_id":27741579,"reputation":1,"user_id":21177944,"display_name":"Ranjan Suman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677066090,"creation_date":1676985618,"question_id":75521070,"body_markdown":"In my app i&#39;m trying to implement android 12 splash screen in which after used authentication they will be navigated to the Home activity instead of login activity after splash screen but it&#39;s not working. I have already specified in android manifest as well as dependencies as specified in official document.  I&#39;m confused where to apply these conditions.\r\nExample will be good  \r\n\r\nMy splash theme\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;resources&gt;\r\n    &lt;style name=&quot;theme.app.start&quot; parent=&quot;Theme.SplashScreen&quot;&gt;\r\n        &lt;item name=&quot;windowSplashScreenBackground&quot;&gt;#ffffff&lt;/item&gt;\r\n        &lt;item name=&quot;windowSplashScreenAnimatedIcon&quot;&gt;@drawable/logo&lt;/item&gt;\r\n        &lt;item name=&quot;postSplashScreenTheme&quot;&gt;@style/AppTheme.NoActionBar&lt;/item&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\nMy previous splash activity\r\n```\r\nif (UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\r\n                activityIntent = new Intent(getApplicationContext(), LoginActivity.class);\r\n            } else {\r\n                activityIntent = new Intent(getApplicationContext(), HomeActivity.class);\r\n            }\r\n            finish();\r\n            startActivity(activityIntent);\r\n\r\n        }, SPLASH_DISPLAY_LENGTH);\r\n```\r\n\r\n\r\n\r\n","title":"Android 12 splash screen , Navigate to various activity after splash screen as per the condition","body":"<p>In my app i'm trying to implement android 12 splash screen in which after used authentication they will be navigated to the Home activity instead of login activity after splash screen but it's not working. I have already specified in android manifest as well as dependencies as specified in official document.  I'm confused where to apply these conditions.\nExample will be good</p>\n<p>My splash theme</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;style name=&quot;theme.app.start&quot; parent=&quot;Theme.SplashScreen&quot;&gt;\n        &lt;item name=&quot;windowSplashScreenBackground&quot;&gt;#ffffff&lt;/item&gt;\n        &lt;item name=&quot;windowSplashScreenAnimatedIcon&quot;&gt;@drawable/logo&lt;/item&gt;\n        &lt;item name=&quot;postSplashScreenTheme&quot;&gt;@style/AppTheme.NoActionBar&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>My previous splash activity</p>\n<pre><code>if (UserInformation.getID(this).equalsIgnoreCase(&quot;&quot;)) {\n                activityIntent = new Intent(getApplicationContext(), LoginActivity.class);\n            } else {\n                activityIntent = new Intent(getApplicationContext(), HomeActivity.class);\n            }\n            finish();\n            startActivity(activityIntent);\n\n        }, SPLASH_DISPLAY_LENGTH);\n</code></pre>\n"},{"tags":["java","hibernate","maven","spring-boot","primary-key"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1574087012,"post_id":58916555,"comment_id":104094882,"body_markdown":"Which method do you use for persisting?","body":"Which method do you use for persisting?"}],"answers":[{"tags":[],"owner":{"account_id":8358777,"reputation":1554,"user_id":6277983,"accept_rate":67,"display_name":"Suraj Gautam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1574093952,"creation_date":1574093952,"answer_id":58918843,"question_id":58916555,"body_markdown":"If you are using `save` method from `CrudRepository` then you need to understand that if the entity with id (primary-key) null is saved, then it will generate a new id (auto increment depending on the implementation) and save the record. However, if the entity with id that is already in the database is passed in `save` method then it will update the entity.\r\nI hope you got my point. \r\nPlease have a look at this [article][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-crud-repository-save","title":"Primary key values are getting updated in Spring boot","body":"<p>If you are using <code>save</code> method from <code>CrudRepository</code> then you need to understand that if the entity with id (primary-key) null is saved, then it will generate a new id (auto increment depending on the implementation) and save the record. However, if the entity with id that is already in the database is passed in <code>save</code> method then it will update the entity.\nI hope you got my point. \nPlease have a look at this <a href=\"https://www.baeldung.com/spring-data-crud-repository-save\" rel=\"nofollow noreferrer\">article</a>.</p>\n"},{"tags":[],"owner":{"account_id":9054438,"reputation":560,"user_id":6743289,"display_name":"striker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654855397,"creation_date":1654855397,"answer_id":72572443,"question_id":58916555,"body_markdown":"Simply use .insert() function instead of .save() function","title":"Primary key values are getting updated in Spring boot","body":"<p>Simply use .insert() function instead of .save() function</p>\n"},{"tags":[],"owner":{"account_id":12315202,"reputation":198,"user_id":8985718,"display_name":"Sayed Hussainullah Sadat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677066030,"creation_date":1677066030,"answer_id":75532220,"question_id":58916555,"body_markdown":"The question is already having an accepted answer, but there is another method that can handle this problem.\r\n\r\nCheck if the record already exists or not, then proceed further.\r\n\r\n      if(repository.existsById(dto.getId())){\r\n            //throw exception\r\n        }else{\r\n            //perform save operation\r\n        }\r\n\r\n\r\n\r\n","title":"Primary key values are getting updated in Spring boot","body":"<p>The question is already having an accepted answer, but there is another method that can handle this problem.</p>\n<p>Check if the record already exists or not, then proceed further.</p>\n<pre><code>  if(repository.existsById(dto.getId())){\n        //throw exception\n    }else{\n        //perform save operation\n    }\n</code></pre>\n"}],"owner":{"account_id":11931971,"reputation":13,"user_id":8731616,"display_name":"Pradeep Kr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1492,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58918843,"answer_count":3,"score":1,"last_activity_date":1677066030,"creation_date":1574086497,"question_id":58916555,"body_markdown":"I have created a maven project using Spring Boot with MySQL database.\r\n\r\nI have two entity classes that have a primary key in one entity class and another one has a composite primary key.\r\n\r\nCustomer.java(Has a primary key)\r\n\r\n    @Entity\r\n    public class Customer {\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \t\r\n    \tprivate String name;\r\n    \tprivate String address;\r\n    \tprivate String gstin;\r\n    \tprivate String phoneNumber;\r\n    \t\r\n    \t@CreatedDate\r\n    \tprivate Date createdDate;\r\n    \t\r\n    \t@LastModifiedDate\r\n    \tprivate Date updatedDate;\r\n    \r\n    //Getters and setters\r\n    }\r\n\r\nItemId.java (Idclass for Item.java)\r\n\r\n    public class ItemId implements Serializable{\r\n    \t\r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tprivate Long id;\r\n    \t\r\n    \tprivate Long billNo;\r\n    //Getters and Setters\r\n    }\r\n\r\nItem.java (Has a composite primary key)\r\n\r\n    @Entity\r\n    @IdClass(ItemId.class)\r\n    public class Item {\r\n    \t@Id\r\n    \tprivate Long id;\r\n    \t\r\n    \t@Id\r\n    \tprivate Long billNo;\r\n    \r\n    \tprivate String particular;\r\n    \t\r\n    \tprivate String hsnCode;\r\n    \t\r\n    \tprivate Double quantity;\r\n    \t\r\n    \tprivate String quantityUnit;\r\n    \t\r\n    \tprivate Double rate;\r\n    \t\r\n    \tprivate String rateUnit;\r\n    \t\r\n    \tprivate Double price;\r\n    \t\r\n    \t@CreatedDate\r\n    \tprivate Date createdDate;\r\n    \t\r\n    \t@LastModifiedDate\r\n    \tprivate Date updatedDate;\r\n    //Getters and setters\r\n    }\r\n\r\n\r\nhere the problem is when an entity object is persisted through repository object with the id which is already there in the table, the Spring boot JPA is not throwing the error that primary key id already present or something like that. Instead the details of the object that is trying to persist are updated to the already available primary key data. The same is happening to the Composite primary key entity.\r\n\r\nIs there something wrong on my side or should I do furthermore configurations?\r\n\r\nThanks in advance.","title":"Primary key values are getting updated in Spring boot","body":"<p>I have created a maven project using Spring Boot with MySQL database.</p>\n\n<p>I have two entity classes that have a primary key in one entity class and another one has a composite primary key.</p>\n\n<p>Customer.java(Has a primary key)</p>\n\n<pre><code>@Entity\npublic class Customer {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    private String address;\n    private String gstin;\n    private String phoneNumber;\n\n    @CreatedDate\n    private Date createdDate;\n\n    @LastModifiedDate\n    private Date updatedDate;\n\n//Getters and setters\n}\n</code></pre>\n\n<p>ItemId.java (Idclass for Item.java)</p>\n\n<pre><code>public class ItemId implements Serializable{\n\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n\n    private Long id;\n\n    private Long billNo;\n//Getters and Setters\n}\n</code></pre>\n\n<p>Item.java (Has a composite primary key)</p>\n\n<pre><code>@Entity\n@IdClass(ItemId.class)\npublic class Item {\n    @Id\n    private Long id;\n\n    @Id\n    private Long billNo;\n\n    private String particular;\n\n    private String hsnCode;\n\n    private Double quantity;\n\n    private String quantityUnit;\n\n    private Double rate;\n\n    private String rateUnit;\n\n    private Double price;\n\n    @CreatedDate\n    private Date createdDate;\n\n    @LastModifiedDate\n    private Date updatedDate;\n//Getters and setters\n}\n</code></pre>\n\n<p>here the problem is when an entity object is persisted through repository object with the id which is already there in the table, the Spring boot JPA is not throwing the error that primary key id already present or something like that. Instead the details of the object that is trying to persist are updated to the already available primary key data. The same is happening to the Composite primary key entity.</p>\n\n<p>Is there something wrong on my side or should I do furthermore configurations?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","weblogic","weblogic12c","spring-jms"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495821364,"creation_date":1495821364,"answer_id":44207576,"question_id":44198498,"body_markdown":"Since you are using JNDI, you need to configure it in the JNDI provider.","title":"How to configure weblogic reconnect policy in Spring JMS connection factory","body":"<p>Since you are using JNDI, you need to configure it in the JNDI provider.</p>\n"}],"owner":{"account_id":5218937,"reputation":11,"user_id":4172967,"display_name":"vijayakumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677065978,"creation_date":1495792180,"question_id":44198498,"body_markdown":"We lost JMS client connection when weblogic JMS server goes down. It leads re-starting our client managed server to re connect JMS server. \r\nHow to configure weblogic reconnect policy? Below are the application context configuration for connectionFactory and Message listener container.\r\n\r\n    &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;\r\n    \t&lt;property name=&quot;jndiTemplate&quot; ref=&quot;jndiTemplate&quot; /&gt;\r\n    \t&lt;property name=&quot;jndiName&quot; value=&quot;jndiName&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&gt;\r\n    \t&lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&gt;\r\n    \t&lt;property name=&quot;destination&quot; ref=&quot;destination0&quot;/&gt;\r\n    \t&lt;property name=&quot;messageListener&quot; ref=&quot;messageListener&quot;/&gt;\r\n    \t&lt;property name=&quot;taskExecutor&quot; ref=&quot;taskExecutor&quot;/&gt;\r\n    \t&lt;property name=&quot;autoStartup&quot; value=&quot;true&quot; /&gt;\r\n    \t&lt;property name=&quot;messageSelector&quot; value=&quot;RECIPIENT = &#39;XYZ&#39;&quot;/&gt;\r\n    \t&lt;property name=&quot;concurrentConsumers&quot; value=&quot;10&quot;/&gt;\r\n    \t&lt;property name=&quot;maxConcurrentConsumers&quot; value=&quot;50&quot;/&gt;\r\n    \t&lt;property name=&quot;idleTaskExecutionLimit&quot; value=&quot;10&quot;/&gt;\r\n    \t&lt;property name=&quot;idleConsumerLimit&quot; value=&quot;10&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nweblogic 12c\r\nspring 3\r\n\r\n","title":"How to configure weblogic reconnect policy in Spring JMS connection factory","body":"<p>We lost JMS client connection when weblogic JMS server goes down. It leads re-starting our client managed server to re connect JMS server. \nHow to configure weblogic reconnect policy? Below are the application context configuration for connectionFactory and Message listener container.</p>\n\n<pre><code>&lt;bean id=\"connectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiTemplate\" ref=\"jndiTemplate\" /&gt;\n    &lt;property name=\"jndiName\" value=\"jndiName\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"connectionFactory\"/&gt;\n    &lt;property name=\"destination\" ref=\"destination0\"/&gt;\n    &lt;property name=\"messageListener\" ref=\"messageListener\"/&gt;\n    &lt;property name=\"taskExecutor\" ref=\"taskExecutor\"/&gt;\n    &lt;property name=\"autoStartup\" value=\"true\" /&gt;\n    &lt;property name=\"messageSelector\" value=\"RECIPIENT = 'XYZ'\"/&gt;\n    &lt;property name=\"concurrentConsumers\" value=\"10\"/&gt;\n    &lt;property name=\"maxConcurrentConsumers\" value=\"50\"/&gt;\n    &lt;property name=\"idleTaskExecutionLimit\" value=\"10\"/&gt;\n    &lt;property name=\"idleConsumerLimit\" value=\"10\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>weblogic 12c\nspring 3</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":7532544,"reputation":914,"user_id":5720118,"accept_rate":92,"display_name":"Binyamin Regev"},"score":0,"creation_date":1677068662,"post_id":75532182,"comment_id":133263547,"body_markdown":"I&#39;m sorry, but I don&#39;t understand your question, maybe my English is not good enough? What exactly are you asking? \nDo you have an SQL query that you want to turn/convert/translate into JPA Criteria API and you need assistance? That&#39;s pretty straightforward to do, just follow a tutorial, e.g., Baeldong - JPA Criteria Queries -- https://www.baeldung.com/hibernate-criteria-queries \nMaybe I don&#39;t understand your question?","body":"I&#39;m sorry, but I don&#39;t understand your question, maybe my English is not good enough? What exactly are you asking?  Do you have an SQL query that you want to turn/convert/translate into JPA Criteria API and you need assistance? That&#39;s pretty straightforward to do, just follow a tutorial, e.g., Baeldong - JPA Criteria Queries -- <a href=\"https://www.baeldung.com/hibernate-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-criteria-queries</a>  Maybe I don&#39;t understand your question?"}],"owner":{"account_id":14950638,"reputation":13,"user_id":10794438,"display_name":"Denniel Luis Sadian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677065768,"creation_date":1677065768,"question_id":75532182,"body_markdown":"I have an entity `User` and `ComplianceRecord`, and also `RemittanceTransaction` entity. The `User` entity is not linked directly to the `RemittanceTransaction`. The `RemittanceTransaction` has field `phoneNumber`, and `User` has a field `username`, and we use these fields to know the what remittances belong to a user. On the other hand, we have a `ComplianceRecord` entity that only has a basic Long field `userId` that describe the user owner of the record, it has no foreign key.\r\n\r\nI want to sort the `ComplianceRecord` based from the sum `amount` of the RemittanceTransaction. This is the sql query I currently have, and I want to turn it into JPA Criteria API.\r\n```\r\nselect\r\n    user_id,\r\n    first_name,\r\n    last_name,\r\n    (select COALESCE(sum(rt.amount), 0) from remittance_transactions rt where rt.transaction_status_id in (4,9,7,5) and rt.phone_number=((select username from users u where u.id=ru.user_id))) as total\r\nfrom compliance_records ru\r\norder by\r\n    total desc;\r\n\r\n```\r\n\r\nThank you and I hope someone helps me with this &#129401;\r\n\r\nCurrently, I only have this sql query:\r\n```\r\nselect\r\n    user_id,\r\n    first_name,\r\n    last_name,\r\n    (select COALESCE(sum(rt.amount), 0) from remittance_transactions rt where rt.transaction_status_id in (4,9,7,5) and rt.phone_number=((select username from users u where u.id=ru.user_id))) as total\r\nfrom compliance_records ru\r\norder by\r\n    total desc;\r\n\r\n```","title":"Spring Boot JPA Criteria API, how can I sort an entity list based from an aggregated fields from a different entity","body":"<p>I have an entity <code>User</code> and <code>ComplianceRecord</code>, and also <code>RemittanceTransaction</code> entity. The <code>User</code> entity is not linked directly to the <code>RemittanceTransaction</code>. The <code>RemittanceTransaction</code> has field <code>phoneNumber</code>, and <code>User</code> has a field <code>username</code>, and we use these fields to know the what remittances belong to a user. On the other hand, we have a <code>ComplianceRecord</code> entity that only has a basic Long field <code>userId</code> that describe the user owner of the record, it has no foreign key.</p>\n<p>I want to sort the <code>ComplianceRecord</code> based from the sum <code>amount</code> of the RemittanceTransaction. This is the sql query I currently have, and I want to turn it into JPA Criteria API.</p>\n<pre><code>select\n    user_id,\n    first_name,\n    last_name,\n    (select COALESCE(sum(rt.amount), 0) from remittance_transactions rt where rt.transaction_status_id in (4,9,7,5) and rt.phone_number=((select username from users u where u.id=ru.user_id))) as total\nfrom compliance_records ru\norder by\n    total desc;\n\n</code></pre>\n<p>Thank you and I hope someone helps me with this 🥹</p>\n<p>Currently, I only have this sql query:</p>\n<pre><code>select\n    user_id,\n    first_name,\n    last_name,\n    (select COALESCE(sum(rt.amount), 0) from remittance_transactions rt where rt.transaction_status_id in (4,9,7,5) and rt.phone_number=((select username from users u where u.id=ru.user_id))) as total\nfrom compliance_records ru\norder by\n    total desc;\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":1,"creation_date":1677066295,"post_id":75532147,"comment_id":133262835,"body_markdown":"This is quite unclear. Please update question with some detailed information. Are you sure that png exists under the project on the given path? How did you try it? On command line or in an IDE? If you tried it in an IDE, are you sure the project settings are correct? I would bet it&#39;s not a classloading issue neither Java 19 issue.","body":"This is quite unclear. Please update question with some detailed information. Are you sure that png exists under the project on the given path? How did you try it? On command line or in an IDE? If you tried it in an IDE, are you sure the project settings are correct? I would bet it&#39;s not a classloading issue neither Java 19 issue."},{"owner":{"account_id":26731173,"reputation":44,"user_id":20333478,"display_name":"JavaUser007"},"score":0,"creation_date":1677077383,"post_id":75532147,"comment_id":133266452,"body_markdown":"@zforgo the PNG does exist as `resources/icons/a.png`. As I stated above, the code works perfectly in Java 13. I&#39;m trying this on NetBeans 16, and project is loaded using default settings, except Javafx-version (19 vs 13) and javafx-maven-plugin-version (0.0.8 vs 0.0.4) respectively.","body":"@zforgo the PNG does exist as <code>resources&#47;icons&#47;a.png</code>. As I stated above, the code works perfectly in Java 13. I&#39;m trying this on NetBeans 16, and project is loaded using default settings, except Javafx-version (19 vs 13) and javafx-maven-plugin-version (0.0.8 vs 0.0.4) respectively."},{"owner":{"account_id":17114597,"reputation":158,"user_id":12384459,"display_name":"PhiAgent"},"score":0,"creation_date":1697657074,"post_id":75532147,"comment_id":136308875,"body_markdown":"i&#39;m running into the same issue with amazon-corretto-17.jdk even though class path is accurate: `Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.net.URL.toURI()&quot; because the return value of &quot;java.lang.ClassLoader.getResource(String)&quot; is null`","body":"i&#39;m running into the same issue with amazon-corretto-17.jdk even though class path is accurate: <code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.net.URL.toURI()&quot; because the return value of &quot;java.lang.ClassLoader.getResource(String)&quot; is null</code>"},{"owner":{"account_id":26731173,"reputation":44,"user_id":20333478,"display_name":"JavaUser007"},"score":0,"creation_date":1697798729,"post_id":75532147,"comment_id":136328070,"body_markdown":"@PhiAgent the only workaround I&#39;ve found thus far is to use `getClass().getResource(&quot;icons/a.png&quot;).toString()));` and create directories as `/src/main/resources/com/example/icons/a.png` where `com` and `example` are your GroupId and ProjectName, respectively.","body":"@PhiAgent the only workaround I&#39;ve found thus far is to use <code>getClass().getResource(&quot;icons&#47;a.png&quot;).toString()));</code> and create directories as <code>&#47;src&#47;main&#47;resources&#47;com&#47;example&#47;icons&#47;a.png</code> where <code>com</code> and <code>example</code> are your GroupId and ProjectName, respectively."},{"owner":{"account_id":17114597,"reputation":158,"user_id":12384459,"display_name":"PhiAgent"},"score":0,"creation_date":1697990507,"post_id":75532147,"comment_id":136345743,"body_markdown":"@JavaUser007, i figured out what the problem was: my file path was setup incorrectly","body":"@JavaUser007, i figured out what the problem was: my file path was setup incorrectly"}],"owner":{"account_id":26731173,"reputation":44,"user_id":20333478,"display_name":"JavaUser007"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":664,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677065532,"creation_date":1677065532,"question_id":75532147,"body_markdown":"Try \r\n```java\r\n@FXML\r\nprivate ImageView img;\r\npublic void initialize(URL url, ResourceBundle rb){\r\ntry{\r\n    img.setImage(new Image(getClass().getClassLoader().getResource(&quot;icons/a.png&quot;).toURI().toString()));\r\n}catch(Exception ex){\r\n    System.out.println(ex);\r\n}\r\n```\r\non Java 19 will return error that `Cannot invoke java.net.URL.toURI() because the return value of java.lang.ClassLoader.getResource(String) is null`\r\n\r\nWhereas on Java 13 it works as intended.","title":"Java 19 Using ClassLoader.getResource() returns null","body":"<p>Try</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FXML\nprivate ImageView img;\npublic void initialize(URL url, ResourceBundle rb){\ntry{\n    img.setImage(new Image(getClass().getClassLoader().getResource(&quot;icons/a.png&quot;).toURI().toString()));\n}catch(Exception ex){\n    System.out.println(ex);\n}\n</code></pre>\n<p>on Java 19 will return error that <code>Cannot invoke java.net.URL.toURI() because the return value of java.lang.ClassLoader.getResource(String) is null</code></p>\n<p>Whereas on Java 13 it works as intended.</p>\n"},{"tags":["java","spring","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1677070354,"post_id":75532005,"comment_id":133264081,"body_markdown":"You already do that with a chunk size of 1. To make it concurrent inject a task executor into the step.","body":"You already do that with a chunk size of 1. To make it concurrent inject a task executor into the step."}],"owner":{"account_id":19237408,"reputation":11,"user_id":14058086,"display_name":"SMalik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677064807,"creation_date":1677064807,"question_id":75532005,"body_markdown":"I&#39;m new to Spring Batch and was trying to go through some Multi threading approaches, but unable to determine which one will suit my need.\r\n\r\nThe flow I have:\r\n1. **Reader** will pick up all documents from elastic search matching a doc_status (e.g. &#39;pending&#39;).(can be &gt;=40 docs)\r\n2. All these &#39;pending&#39; docs are sent to **processor** - where we iterate each document and lot of heavy data processing happens for each(10s of sql queries executed, result Sets with 1M rows iterated - The queries here cannot be executed asynchronously as input to subsequent queries is dependent on results of previous.)\r\n3. All the processed documents are then sent to **writer** where we update doc_status in elastic to &#39;completed&#39;.\r\n\r\nI want to Process and Write each doc independently.\r\nIs there a way that after I fetch all the documents in Reader, I should be able to process and write each document using a separate thread?\r\n\r\nAppreciate the help!\r\n\r\n\r\nJobConfig:\r\n\r\n```lang-java\r\nJob job1(){\r\nreturn jobFactory.get(&quot;Job1&quot;)\r\n             .listener(myListener())\r\n             .start(step1())\r\n             .build();\r\n}\r\n\r\nStep step1(){\r\nreturn stepFactory.get(&quot;step1&quot;)\r\n\t\t.&lt;List&lt;Map&lt;String, String&gt;&gt;, Map&lt;String, Object&gt;&gt;\r\n// Keeping the chunk size 1 as I want to process and write one doc at a time.\r\n        chunk(1) \r\n       .reader(reader)\r\n       .processor(processor)\r\n       .writer(writer)\r\n       .build();\r\n}\r\n```\r\n","title":"Spring Batch Job to Process and Write each item Asynchronously","body":"<p>I'm new to Spring Batch and was trying to go through some Multi threading approaches, but unable to determine which one will suit my need.</p>\n<p>The flow I have:</p>\n<ol>\n<li><strong>Reader</strong> will pick up all documents from elastic search matching a doc_status (e.g. 'pending').(can be &gt;=40 docs)</li>\n<li>All these 'pending' docs are sent to <strong>processor</strong> - where we iterate each document and lot of heavy data processing happens for each(10s of sql queries executed, result Sets with 1M rows iterated - The queries here cannot be executed asynchronously as input to subsequent queries is dependent on results of previous.)</li>\n<li>All the processed documents are then sent to <strong>writer</strong> where we update doc_status in elastic to 'completed'.</li>\n</ol>\n<p>I want to Process and Write each doc independently.\nIs there a way that after I fetch all the documents in Reader, I should be able to process and write each document using a separate thread?</p>\n<p>Appreciate the help!</p>\n<p>JobConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Job job1(){\nreturn jobFactory.get(&quot;Job1&quot;)\n             .listener(myListener())\n             .start(step1())\n             .build();\n}\n\nStep step1(){\nreturn stepFactory.get(&quot;step1&quot;)\n        .&lt;List&lt;Map&lt;String, String&gt;&gt;, Map&lt;String, Object&gt;&gt;\n// Keeping the chunk size 1 as I want to process and write one doc at a time.\n        chunk(1) \n       .reader(reader)\n       .processor(processor)\n       .writer(writer)\n       .build();\n}\n</code></pre>\n"},{"tags":["java","android-studio","android-activity","nfc"],"owner":{"account_id":27568466,"reputation":11,"user_id":21040137,"display_name":"Liem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677064798,"creation_date":1677064798,"question_id":75532004,"body_markdown":"I&#39;m trying to create an application that, when nfc tag is discovered, launches another activity, but it&#39;s still not working. \r\n\r\nPlease let me know what I am doing wrong and how to fix it.\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private NfcAdapter nfcAdapter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n        if (nfcAdapter == null) {\r\n            // NFC is not supported on this device\r\n            return;\r\n        }\r\n\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,\r\n                new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\r\n        IntentFilter[] filters = new IntentFilter[] {\r\n                new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED),\r\n        };\r\n        String[][] techList = new String[][] {\r\n                new String[] { NfcF.class.getName() }\r\n        };\r\n        nfcAdapter.enableForegroundDispatch(this, pendingIntent, filters, techList);\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        nfcAdapter.disableForegroundDispatch(this);\r\n    }\r\n\r\n    @Override\r\n    protected void onNewIntent(Intent intent) {\r\n        super.onNewIntent(intent);\r\n        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {\r\n            Intent nfcIntent = new Intent(this, MainActivity2.class);\r\n            nfcIntent.putExtra(&quot;nfcTag&quot;, intent.getParcelableExtra(NfcAdapter.EXTRA_TAG));\r\n            startActivity(nfcIntent);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n","title":"Open another activity when nfc discovered","body":"<p>I'm trying to create an application that, when nfc tag is discovered, launches another activity, but it's still not working.</p>\n<p>Please let me know what I am doing wrong and how to fix it.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private NfcAdapter nfcAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n        if (nfcAdapter == null) {\n            // NFC is not supported on this device\n            return;\n        }\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,\n                new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\n        IntentFilter[] filters = new IntentFilter[] {\n                new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED),\n        };\n        String[][] techList = new String[][] {\n                new String[] { NfcF.class.getName() }\n        };\n        nfcAdapter.enableForegroundDispatch(this, pendingIntent, filters, techList);\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        nfcAdapter.disableForegroundDispatch(this);\n    }\n\n    @Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {\n            Intent nfcIntent = new Intent(this, MainActivity2.class);\n            nfcIntent.putExtra(&quot;nfcTag&quot;, intent.getParcelableExtra(NfcAdapter.EXTRA_TAG));\n            startActivity(nfcIntent);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","api","karate","spring-boot-test"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1677034122,"post_id":75527722,"comment_id":133256250,"body_markdown":"my personal opinion is sorry, follow this process else no one can help: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"my personal opinion is sorry, follow this process else no one can help: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"},{"owner":{"account_id":8616365,"reputation":59,"user_id":6453044,"display_name":"Kishore Jetty"},"score":0,"creation_date":1677034618,"post_id":75527722,"comment_id":133256306,"body_markdown":"Thank you Peter, I tried all the online help but no luck.","body":"Thank you Peter, I tried all the online help but no luck."},{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1677034813,"post_id":75527722,"comment_id":133256342,"body_markdown":"you are mixing old and wrong versions of karate, I have reasons for asking you to do the above process, at least locally. all the best","body":"you are mixing old and wrong versions of karate, I have reasons for asking you to do the above process, at least locally. all the best"},{"owner":{"account_id":23081176,"reputation":131,"user_id":17193441,"display_name":"Srinivasu Kaki"},"score":0,"creation_date":1677035806,"post_id":75527722,"comment_id":133256457,"body_markdown":"@KishoreJetty Are the TestRunner &amp; Feature files in the same package? If Yes, Test Runner should pick the feature files by default. Otherwise, you need to pass the feature files locations using @KarateOptions(features = location of feature files) (which is deprecated).","body":"@KishoreJetty Are the TestRunner &amp; Feature files in the same package? If Yes, Test Runner should pick the feature files by default. Otherwise, you need to pass the feature files locations using @KarateOptions(features = location of feature files) (which is deprecated)."},{"owner":{"account_id":8616365,"reputation":59,"user_id":6453044,"display_name":"Kishore Jetty"},"score":1,"creation_date":1677044472,"post_id":75527722,"comment_id":133257559,"body_markdown":"Thank you @PeterThomas . Yes you are right . I am using Junit5 and my local tests are working fine now. Thank you very much for this page again","body":"Thank you @PeterThomas . Yes you are right . I am using Junit5 and my local tests are working fine now. Thank you very much for this page again"},{"owner":{"account_id":8616365,"reputation":59,"user_id":6453044,"display_name":"Kishore Jetty"},"score":0,"creation_date":1677044542,"post_id":75527722,"comment_id":133257566,"body_markdown":"Yes Srini, I am having all features in same package","body":"Yes Srini, I am having all features in same package"}],"answers":[{"tags":[],"owner":{"account_id":6644282,"reputation":3,"user_id":5129024,"display_name":"Abdelmalek HAMZA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677064735,"creation_date":1677064498,"answer_id":75531945,"question_id":75527722,"body_markdown":"Make sure that TestRunner.java and yourfile.feature are in the same package src/test/java/yourPackage/\r\n\r\nalso add this to your pom.xml:\r\n\r\n    &lt;build&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;src/test/java&lt;/directory&gt;\r\n                &lt;excludes&gt;\r\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\r\n                &lt;/excludes&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n    &lt;/build&gt;\r\n","title":"unable to run the karate scripts for API intigration test when I run TestRunner.java","body":"<p>Make sure that TestRunner.java and yourfile.feature are in the same package src/test/java/yourPackage/</p>\n<p>also add this to your pom.xml:</p>\n<pre><code>&lt;build&gt;\n    &lt;testResources&gt;\n        &lt;testResource&gt;\n            &lt;directory&gt;src/test/java&lt;/directory&gt;\n            &lt;excludes&gt;\n                &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n            &lt;/excludes&gt;\n        &lt;/testResource&gt;\n    &lt;/testResources&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":8616365,"reputation":59,"user_id":6453044,"display_name":"Kishore Jetty"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677064735,"creation_date":1677032903,"question_id":75527722,"body_markdown":"I am trying to execute all my feature files to test the APIs end to end, but when I run the TestRunner.java file as JUnit, nothing happens in my eclipse.\r\n\r\n    import org.junit.runner.RunWith;\r\n    import com.intuit.karate.junit4.Karate;\r\n    @RunWith(Karate.class)\r\n     public class TestRunner {}\r\n\r\nand Here is my feature file \r\n\r\n    Feature: fetching User Details\r\n     Scenario: testing the get call for Employee Details\r\n     Given url &#39;http://localhost:9091/getAllEmployees&#39;\r\n     When method GET\r\n     Then status 200\r\n\r\nI have below dependency in my pom\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;karate-core&lt;/artifactId&gt;\r\n   \t\t\t&lt;version&gt;1.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n                  &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;karate-apache&lt;/artifactId&gt;\r\n                  &lt;version&gt;0.9.6&lt;/version&gt;\r\n                  &lt;scope&gt;test&lt;/scope&gt;\r\n           &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;karate-junit4&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.3.1&lt;/version&gt;\r\n\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\nand created my own profile to just run only end to end script \r\n\r\n\t&lt;profiles&gt;\r\n    \t&lt;profile&gt;\r\n    \t    &lt;id&gt;e2e&lt;/id&gt;\r\n\t\t     &lt;build&gt;\r\n\t\t        &lt;plugins&gt;\r\n\t\t            &lt;plugin&gt;\r\n\t\t            \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n\t\t                &lt;version&gt;2.22.0&lt;/version&gt;\r\n\t\t                &lt;configuration&gt;\r\n\t\t                    &lt;includes&gt;\r\n\t\t                        &lt;include&gt;TestRunner.java&lt;/include&gt;\r\n\t\t                    &lt;/includes&gt;\r\n\t\t                    &lt;groups&gt;com.inmemory.h2.employee.karate&lt;/groups&gt;\r\n\t\t                &lt;/configuration&gt;\r\n\t\t                &lt;executions&gt;\r\n\t\t                    &lt;execution&gt;\r\n\t\t                        &lt;goals&gt;\r\n\t\t                            &lt;goal&gt;integration-test&lt;/goal&gt;\r\n\t\t                            &lt;goal&gt;verify&lt;/goal&gt;\r\n\t\t                        &lt;/goals&gt;\r\n\t\t                    &lt;/execution&gt;\r\n\t\t                &lt;/executions&gt;\r\n\t\t            &lt;/plugin&gt;\r\n\t\t        &lt;/plugins&gt;\r\n\t\t    &lt;/build&gt;\r\n    \t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\nwhen I run mvn verify -Pe2e , Nothing happens, It is not generating any report . also If I run TestRunner.java nothing happens\r\n\r\n[![enter image description here][1]][1]\r\n \r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GqWXy.png\r\n  [2]: https://i.stack.imgur.com/32UAI.png\r\n\r\nKindly suggest what I am doing wrong here","title":"unable to run the karate scripts for API intigration test when I run TestRunner.java","body":"<p>I am trying to execute all my feature files to test the APIs end to end, but when I run the TestRunner.java file as JUnit, nothing happens in my eclipse.</p>\n<pre><code>import org.junit.runner.RunWith;\nimport com.intuit.karate.junit4.Karate;\n@RunWith(Karate.class)\n public class TestRunner {}\n</code></pre>\n<p>and Here is my feature file</p>\n<pre><code>Feature: fetching User Details\n Scenario: testing the get call for Employee Details\n Given url 'http://localhost:9091/getAllEmployees'\n When method GET\n Then status 200\n</code></pre>\n<p>I have below dependency in my pom</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n        &lt;artifactId&gt;karate-core&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n      &lt;dependency&gt;\n              &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n              &lt;artifactId&gt;karate-apache&lt;/artifactId&gt;\n              &lt;version&gt;0.9.6&lt;/version&gt;\n              &lt;scope&gt;test&lt;/scope&gt;\n       &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n        &lt;artifactId&gt;karate-junit4&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and created my own profile to just run only end to end script</p>\n<pre><code>&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;e2e&lt;/id&gt;\n         &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.22.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;TestRunner.java&lt;/include&gt;\n                        &lt;/includes&gt;\n                        &lt;groups&gt;com.inmemory.h2.employee.karate&lt;/groups&gt;\n                    &lt;/configuration&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;integration-test&lt;/goal&gt;\n                                &lt;goal&gt;verify&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>when I run mvn verify -Pe2e , Nothing happens, It is not generating any report . also If I run TestRunner.java nothing happens</p>\n<p><a href=\"https://i.stack.imgur.com/GqWXy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GqWXy.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/32UAI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/32UAI.png\" alt=\"enter image description here\" /></a></p>\n<p>Kindly suggest what I am doing wrong here</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":27811565,"reputation":11,"user_id":21233858,"display_name":"bardia dorry"},"score":0,"creation_date":1677065967,"post_id":75531979,"comment_id":133262768,"body_markdown":"you can see this : https://stackoverflow.com/questions/1301399/jpa-using-multiple-database-schemas","body":"you can see this : <a href=\"https://stackoverflow.com/questions/1301399/jpa-using-multiple-database-schemas\" title=\"jpa using multiple database schemas\">stackoverflow.com/questions/1301399/&hellip;</a>"},{"owner":{"account_id":13160781,"reputation":1,"user_id":9506350,"display_name":"Ketan Atri"},"score":0,"creation_date":1677068548,"post_id":75531979,"comment_id":133263516,"body_markdown":"Thanks @bardiadorry for the reference, however the solution on the link addresses a different problem and is not applicable in this case.","body":"Thanks @bardiadorry for the reference, however the solution on the link addresses a different problem and is not applicable in this case."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677082334,"post_id":75531979,"comment_id":133268213,"body_markdown":"You have to create a new, separate persistence unit that has the default schema property set differently. There should be no problem with it using the same datasource as the first, though it is difficult to manage entities of the same class being used in multiple persistence units (reading from one then pushing to another can cause issues with change tracking, lazy loading etc). Persistence.xml is the easiest to define multiple named persistence units - dynamically in Spring is a bit more of a challenge - possible but not as straight forward.","body":"You have to create a new, separate persistence unit that has the default schema property set differently. There should be no problem with it using the same datasource as the first, though it is difficult to manage entities of the same class being used in multiple persistence units (reading from one then pushing to another can cause issues with change tracking, lazy loading etc). Persistence.xml is the easiest to define multiple named persistence units - dynamically in Spring is a bit more of a challenge - possible but not as straight forward."},{"owner":{"account_id":13160781,"reputation":1,"user_id":9506350,"display_name":"Ketan Atri"},"score":0,"creation_date":1677128621,"post_id":75531979,"comment_id":133277765,"body_markdown":"I was considering this possibility, wanted to know if there is a simpler way to go about it, much like the @Table annotation, doesn&#39;t seem like there is one. Will probably go with an alternate design approach, thanks again.","body":"I was considering this possibility, wanted to know if there is a simpler way to go about it, much like the @Table annotation, doesn&#39;t seem like there is one. Will probably go with an alternate design approach, thanks again."}],"owner":{"account_id":13160781,"reputation":1,"user_id":9506350,"display_name":"Ketan Atri"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":610,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677064705,"creation_date":1677064705,"question_id":75531979,"body_markdown":"For JPA entity, we can specify the schema to be used for table creation via the @Table annotation as follows:  \r\n`@Table(name = &quot;...&quot;, schema = &quot;...&quot;)`\r\n\r\nConsider a scenario where we create two tables with the same name but different schemas:  \r\n`@Table(name = &quot;Table1&quot;, schema = &quot;Schema1&quot;)` and\r\n`@Table(name = &quot;Table1&quot;, schema = &quot;Schema2&quot;)`\r\n\r\nAlong with this we have defined the default schema for hibernate as `Schema1`\r\n\r\nNow when we create a JPA repository and try to fetch the contents of the tables, only the contents of **Table1** in **Schema1** will be fetched as that is the schema defined as default.\r\n\r\nMy questions is: Is there a way to create two JPA Repositories for the two tables, so that one fetches data from `Schema1` while the other fetches from `Schema2`? If yes, how?\r\n\r\nNote that both the schemas come from the same data source.\r\n\r\nI haven&#39;t found a lot of resources which talk about this scenario; mainly the sources talk about defining schema for the table, or they talk about how to handle multiple datasources. Neither of which solve the problem at hand.","title":"How to specify schema for a particular JPA Repository?","body":"<p>For JPA entity, we can specify the schema to be used for table creation via the @Table annotation as follows:<br />\n<code>@Table(name = &quot;...&quot;, schema = &quot;...&quot;)</code></p>\n<p>Consider a scenario where we create two tables with the same name but different schemas:<br />\n<code>@Table(name = &quot;Table1&quot;, schema = &quot;Schema1&quot;)</code> and\n<code>@Table(name = &quot;Table1&quot;, schema = &quot;Schema2&quot;)</code></p>\n<p>Along with this we have defined the default schema for hibernate as <code>Schema1</code></p>\n<p>Now when we create a JPA repository and try to fetch the contents of the tables, only the contents of <strong>Table1</strong> in <strong>Schema1</strong> will be fetched as that is the schema defined as default.</p>\n<p>My questions is: Is there a way to create two JPA Repositories for the two tables, so that one fetches data from <code>Schema1</code> while the other fetches from <code>Schema2</code>? If yes, how?</p>\n<p>Note that both the schemas come from the same data source.</p>\n<p>I haven't found a lot of resources which talk about this scenario; mainly the sources talk about defining schema for the table, or they talk about how to handle multiple datasources. Neither of which solve the problem at hand.</p>\n"},{"tags":["java","sql","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1485784169,"creation_date":1485784169,"answer_id":41937508,"question_id":41925057,"body_markdown":"In jOOQ 3.9, the standard way to go forward here is to [use the plain SQL API][1]\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    selectOne()\r\n      .from(TABLE)\r\n      .where(TABLE.COL_A.eq(&quot;Hello&quot;))\r\n      .and(&quot;{0} &amp;&amp; {1}&quot;, TABLE.COL_B, val(array_of_values))\r\n      .fetch();\r\n\r\nThis is using the [`SelectConditionStep.and(String, QueryPart...)`][2] method for convenience, but there are other ways, including using [`DSL.condition()`][3]\r\n\r\nYour idea is a very good one. I&#39;ve registered a [feature request for jOOQ 3.10][4].\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\r\n  [2]: https://www.jooq.org/javadoc/latest/org/jooq/SelectConditionStep.html#and-java.lang.String-org.jooq.QueryPart...-\r\n  [3]: https://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#condition-java.lang.String-org.jooq.QueryPart...-\r\n  [4]: https://github.com/jOOQ/jOOQ/issues/5815","title":"jOOQ how to execute Postgresql functions and operators","body":"<p>In jOOQ 3.9, the standard way to go forward here is to <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\" rel=\"noreferrer\">use the plain SQL API</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>selectOne()\n  .from(TABLE)\n  .where(TABLE.COL_A.eq(\"Hello\"))\n  .and(\"{0} &amp;&amp; {1}\", TABLE.COL_B, val(array_of_values))\n  .fetch();\n</code></pre>\n\n<p>This is using the <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/SelectConditionStep.html#and-java.lang.String-org.jooq.QueryPart...-\" rel=\"noreferrer\"><code>SelectConditionStep.and(String, QueryPart...)</code></a> method for convenience, but there are other ways, including using <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#condition-java.lang.String-org.jooq.QueryPart...-\" rel=\"noreferrer\"><code>DSL.condition()</code></a></p>\n\n<p>Your idea is a very good one. I've registered a <a href=\"https://github.com/jOOQ/jOOQ/issues/5815\" rel=\"noreferrer\">feature request for jOOQ 3.10</a>.</p>\n"},{"tags":[],"owner":{"account_id":28084,"reputation":8394,"user_id":74651,"accept_rate":61,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677064309,"creation_date":1677064309,"answer_id":75531907,"question_id":41925057,"body_markdown":"There currently is a `arrayOverlap()` function for the operator in Postgres.\r\nhttps://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/postgres/PostgresDSL.html#arrayOverlap(org.jooq.Field,org.jooq.Field)","title":"jOOQ how to execute Postgresql functions and operators","body":"<p>There currently is a <code>arrayOverlap()</code> function for the operator in Postgres.\n<a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/postgres/PostgresDSL.html#arrayOverlap(org.jooq.Field,org.jooq.Field)\" rel=\"nofollow noreferrer\">https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/postgres/PostgresDSL.html#arrayOverlap(org.jooq.Field,org.jooq.Field)</a></p>\n"}],"owner":{"account_id":2251953,"reputation":13178,"user_id":1983997,"accept_rate":78,"display_name":"mat_boy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1826,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":41937508,"answer_count":2,"score":4,"last_activity_date":1677064309,"creation_date":1485718342,"question_id":41925057,"body_markdown":"I&#39;m using jooq 3.9.1. I would like to write queries by adding conditions based on PostgreSQL operators and functions.\r\n\r\nE.g., for arrays there are a lot of operators, like `&amp;&amp;` or functions like `array_prepend` that I would like to use.\r\n\r\nWhat is the best way to achieve this?\r\n\r\nI believe there should be something like\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int[] array_of_values = {1,2,3};\r\n\r\n    selectOne()\r\n      .from(TABLE)\r\n      .where(TABLE.COL_A.eq(&quot;Hello&quot;))\r\n      .and(TABLE.COL_B.operator(&quot;&amp;&amp;&quot;).of(array_of_values))\r\n      .fetch();","title":"jOOQ how to execute Postgresql functions and operators","body":"<p>I'm using jooq 3.9.1. I would like to write queries by adding conditions based on PostgreSQL operators and functions.</p>\n\n<p>E.g., for arrays there are a lot of operators, like <code>&amp;&amp;</code> or functions like <code>array_prepend</code> that I would like to use.</p>\n\n<p>What is the best way to achieve this?</p>\n\n<p>I believe there should be something like</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>int[] array_of_values = {1,2,3};\n\nselectOne()\n  .from(TABLE)\n  .where(TABLE.COL_A.eq(\"Hello\"))\n  .and(TABLE.COL_B.operator(\"&amp;&amp;\").of(array_of_values))\n  .fetch();\n</code></pre>\n"},{"tags":["java","pagination","paging"],"answers":[{"tags":[],"owner":{"account_id":22158564,"reputation":96,"user_id":16405920,"display_name":"syn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677059746,"creation_date":1677058935,"answer_id":75530805,"question_id":75529776,"body_markdown":"Usually when using pagination you receive the parameters from the client (e.g. page size, pages to retrieve). Which means you would need to receive and handle those data via the controller. In order to get only the requested data you forward this data to the service layer that translates the data into appropriate queries for your database. So the answer would be you will need to have the information on both layers, but &quot;handle&quot; the data (e.g. if you need formation) in the controller.","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>Usually when using pagination you receive the parameters from the client (e.g. page size, pages to retrieve). Which means you would need to receive and handle those data via the controller. In order to get only the requested data you forward this data to the service layer that translates the data into appropriate queries for your database. So the answer would be you will need to have the information on both layers, but &quot;handle&quot; the data (e.g. if you need formation) in the controller.</p>\n"},{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677064112,"creation_date":1677064112,"answer_id":75531881,"question_id":75529776,"body_markdown":"IMHO paging should be managed at the service level for the following reasons:\r\n\r\n1. A same data service could potentially be called by N different controllers:\r\nputting the paging logic on every controller would obviously lead to some code repetition (that you should avoid)\r\n\r\n2. There exist some other kinds of service clients than view/controllers:\r\nThink for instance about a background scheduled task needing to browse a potentially large quantity of records.\r\nIt would be very handy for this batch to get the paging info directly from the service layer.\r\n\r\n\r\nIn Spring Data, the data services (eg the &quot;repository&quot; layer) are returning **[page][1]** rather than **list**.\r\nAny client of these data services can so benefit from the meta-information with the paging info.\r\n\r\nNice simple example:\r\n\r\nhttps://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>IMHO paging should be managed at the service level for the following reasons:</p>\n<ol>\n<li><p>A same data service could potentially be called by N different controllers:\nputting the paging logic on every controller would obviously lead to some code repetition (that you should avoid)</p>\n</li>\n<li><p>There exist some other kinds of service clients than view/controllers:\nThink for instance about a background scheduled task needing to browse a potentially large quantity of records.\nIt would be very handy for this batch to get the paging info directly from the service layer.</p>\n</li>\n</ol>\n<p>In Spring Data, the data services (eg the &quot;repository&quot; layer) are returning <strong><a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html\" rel=\"nofollow noreferrer\">page</a></strong> rather than <strong>list</strong>.\nAny client of these data services can so benefit from the meta-information with the paging info.</p>\n<p>Nice simple example:</p>\n<p><a href=\"https://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4\" rel=\"nofollow noreferrer\">https://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4</a></p>\n"}],"owner":{"account_id":21169347,"reputation":171,"user_id":15566000,"display_name":"changuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75530805,"answer_count":2,"score":0,"last_activity_date":1677064112,"creation_date":1677053228,"question_id":75529776,"body_markdown":"What I&#39;m curious about is whether the paging processing logic should be written in the service layer or the controller layer.\r\n\r\nHere, the paging process logic is the task of getting the totalCount from the database and getting the total number of pages through pageSize(offset).\r\n\r\nI think the paging process is related to the view, I thought it could be handled in the controller.","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>What I'm curious about is whether the paging processing logic should be written in the service layer or the controller layer.</p>\n<p>Here, the paging process logic is the task of getting the totalCount from the database and getting the total number of pages through pageSize(offset).</p>\n<p>I think the paging process is related to the view, I thought it could be handled in the controller.</p>\n"},{"tags":["java","maven","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063937,"creation_date":1677063937,"answer_id":75531848,"question_id":75531575,"body_markdown":"It looks like your DB2 instance requires some form of client certificates so you need to create [keystore and truststore][1], put your client certificates there and configure JMeter to use these keystore and truststore via *system.properties* file (lives in &quot;bin&quot; folder of your JMeter installation)\r\n\r\n\r\nMore information:\r\n\r\n - [Java Secure Socket Extension (JSSE) Reference Guide][2] \r\n - [Setting up SSL enabled JCC driver connection from Data Studio to DB2 server][3]\r\n - [Apache JMeter Properties Customization Guide][4]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-keystore-truststore-difference\r\n  [2]: https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization\r\n  [3]: https://www.ibm.com/support/pages/setting-ssl-enabled-jcc-driver-connection-data-studio-db2-server\r\n  [4]: https://www.blazemeter.com/blog/jmeter-properties-customization","title":"java.sql.SQLException: Cannot create PoolableConnectionFactory Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server","body":"<p>It looks like your DB2 instance requires some form of client certificates so you need to create <a href=\"https://www.baeldung.com/java-keystore-truststore-difference\" rel=\"nofollow noreferrer\">keystore and truststore</a>, put your client certificates there and configure JMeter to use these keystore and truststore via <em>system.properties</em> file (lives in &quot;bin&quot; folder of your JMeter installation)</p>\n<p>More information:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization\" rel=\"nofollow noreferrer\">Java Secure Socket Extension (JSSE) Reference Guide</a></li>\n<li><a href=\"https://www.ibm.com/support/pages/setting-ssl-enabled-jcc-driver-connection-data-studio-db2-server\" rel=\"nofollow noreferrer\">Setting up SSL enabled JCC driver connection from Data Studio to DB2 server</a></li>\n<li><a href=\"https://www.blazemeter.com/blog/jmeter-properties-customization\" rel=\"nofollow noreferrer\">Apache JMeter Properties Customization Guide</a></li>\n</ul>\n"}],"owner":{"account_id":27844008,"reputation":3,"user_id":21259893,"display_name":"user21259893"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677063937,"creation_date":1677062613,"question_id":75531575,"body_markdown":"I am trying to execute JMeter test scripts in JMX file using Java code, I am getting below exception in result file after execution. My JMX file contains some JDC requests and JDBC connection configuration\r\n\r\njava.sql.SQLException: Cannot create PoolableConnectionFactory ([jcc][t4][2043][11550][3.68.61] Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server xxxxxx/xxxxx on port 50,005 with message: [jcc][t4][20133][12451][3.68.61] Caught NoSuchAlgorithmException while doing SSL Connection.  See attached Throwable for details. ERRORCODE=-4499, SQLSTATE=null. ERRORCODE=-4499, SQLSTATE=08001\r\n\r\nJDBC Connections is SSL based in configuration in JMX. I am just rying to executed it from Java code in Non-GUI mode.\r\n\r\nI checked JDK version everywhere, we are using eclipse so made changes in there too. Its integrated with maven project. I am expecting it to run in non-GUI mode and give results in XML\r\n\r\nJDK version -1.8.0_261\r\nMaven version - 3.6.2\r\nJmeter version - 5.1\t","title":"java.sql.SQLException: Cannot create PoolableConnectionFactory Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server","body":"<p>I am trying to execute JMeter test scripts in JMX file using Java code, I am getting below exception in result file after execution. My JMX file contains some JDC requests and JDBC connection configuration</p>\n<p>java.sql.SQLException: Cannot create PoolableConnectionFactory ([jcc][t4][2043][11550][3.68.61] Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server xxxxxx/xxxxx on port 50,005 with message: [jcc][t4][20133][12451][3.68.61] Caught NoSuchAlgorithmException while doing SSL Connection.  See attached Throwable for details. ERRORCODE=-4499, SQLSTATE=null. ERRORCODE=-4499, SQLSTATE=08001</p>\n<p>JDBC Connections is SSL based in configuration in JMX. I am just rying to executed it from Java code in Non-GUI mode.</p>\n<p>I checked JDK version everywhere, we are using eclipse so made changes in there too. Its integrated with maven project. I am expecting it to run in non-GUI mode and give results in XML</p>\n<p>JDK version -1.8.0_261\nMaven version - 3.6.2\nJmeter version - 5.1</p>\n"},{"tags":["java","gradle","grpc","grpc-java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677064037,"post_id":75528279,"comment_id":133262235,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"owner":{"account_id":4809151,"reputation":557,"user_id":3883118,"display_name":"Ashutosh Shukla"},"score":0,"creation_date":1685108853,"post_id":75528279,"comment_id":134619691,"body_markdown":"Any answer to this issue is highly appreciated.","body":"Any answer to this issue is highly appreciated."}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":264,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677063890,"creation_date":1677040126,"question_id":75528279,"body_markdown":"\r\n[![enter image description here][1]][1]\r\nLog\r\n\r\n```java\r\nMicrosoft Windows [Version 10.0.19045.2604]\r\n(c) Microsoft Corporation. All rights reserved.\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle installDist\r\n\r\nBUILD SUCCESSFUL in 25s\r\n22 actionable tasks: 22 executed\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;dir\r\n Volume in drive C is OS\r\n Volume Serial Number is E2F9-6397\r\n\r\n Directory of C:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples\r\n\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          .\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          ..\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          .gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          android\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          build\r\n09/02/2023  05:49 SA             3.911 BUILD.bazel\r\n09/02/2023  05:49 SA             6.619 build.gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-alts\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-gauth\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-hostname\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-jwt-auth\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-orca\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-servlet\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-tls\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-xds\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          gradle\r\n09/02/2023  05:49 SA             8.070 gradlew\r\n09/02/2023  05:49 SA             2.763 gradlew.bat\r\n09/02/2023  05:49 SA             4.254 pom.xml\r\n09/02/2023  05:49 SA             9.175 README.md\r\n09/02/2023  05:49 SA               267 settings.gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          src\r\n09/02/2023  05:49 SA             1.686 WORKSPACE\r\n               8 File(s)         36.745 bytes\r\n              15 Dir(s)  91.353.567.232 bytes free\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;build\\install\\examples\\bin\\hello-world-client\r\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\r\nINFO: Will try to greet world ...\r\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\r\nWARNING: RPC failed: Status{code=UNAVAILABLE, description=io exception, cause=io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051\r\nCaused by: java.net.ConnectException: Connection refused: no further information\r\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\r\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)\r\n        at io.grpc.netty.shaded.io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\n        at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n        at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:1589)\r\n}\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;java -version\r\njava version &quot;19.0.2&quot; 2023-01-17\r\nJava(TM) SE Runtime Environment (build 19.0.2+7-44)\r\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;javac -version\r\njavac 19.0.2\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle -version\r\n\r\n------------------------------------------------------------\r\nGradle 8.0.1\r\n------------------------------------------------------------\r\n\r\nBuild time:   2023-02-17 20:09:48 UTC\r\nRevision:     68959bf76cef4d28c678f2e2085ee84e8647b77a\r\n\r\nKotlin:       1.8.10\r\nGroovy:       3.0.13\r\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7-44)\r\nOS:           Windows 10 10.0 amd64\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;date\r\nThe current date is: 22/02/2023\r\nEnter the new date: (dd-mm-yy)\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d4Nrt.png","title":"Run grpc Java example: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051","body":"<p><a href=\"https://i.stack.imgur.com/d4Nrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d4Nrt.png\" alt=\"enter image description here\" /></a>\nLog</p>\n<pre class=\"lang-java prettyprint-override\"><code>Microsoft Windows [Version 10.0.19045.2604]\n(c) Microsoft Corporation. All rights reserved.\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle installDist\n\nBUILD SUCCESSFUL in 25s\n22 actionable tasks: 22 executed\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;dir\n Volume in drive C is OS\n Volume Serial Number is E2F9-6397\n\n Directory of C:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples\n\n22/02/2023  11:18 SA    &lt;DIR&gt;          .\n22/02/2023  11:18 SA    &lt;DIR&gt;          ..\n22/02/2023  11:18 SA    &lt;DIR&gt;          .gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          android\n22/02/2023  11:18 SA    &lt;DIR&gt;          build\n09/02/2023  05:49 SA             3.911 BUILD.bazel\n09/02/2023  05:49 SA             6.619 build.gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-alts\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-gauth\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-hostname\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-jwt-auth\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-orca\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-servlet\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-tls\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-xds\n09/02/2023  05:49 SA    &lt;DIR&gt;          gradle\n09/02/2023  05:49 SA             8.070 gradlew\n09/02/2023  05:49 SA             2.763 gradlew.bat\n09/02/2023  05:49 SA             4.254 pom.xml\n09/02/2023  05:49 SA             9.175 README.md\n09/02/2023  05:49 SA               267 settings.gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          src\n09/02/2023  05:49 SA             1.686 WORKSPACE\n               8 File(s)         36.745 bytes\n              15 Dir(s)  91.353.567.232 bytes free\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;build\\install\\examples\\bin\\hello-world-client\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\nINFO: Will try to greet world ...\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\nWARNING: RPC failed: Status{code=UNAVAILABLE, description=io exception, cause=io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051\nCaused by: java.net.ConnectException: Connection refused: no further information\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)\n        at io.grpc.netty.shaded.io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\n        at io.grpc.netty.shaded.io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\n        at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n        at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n}\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;java -version\njava version &quot;19.0.2&quot; 2023-01-17\nJava(TM) SE Runtime Environment (build 19.0.2+7-44)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;javac -version\njavac 19.0.2\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle -version\n\n------------------------------------------------------------\nGradle 8.0.1\n------------------------------------------------------------\n\nBuild time:   2023-02-17 20:09:48 UTC\nRevision:     68959bf76cef4d28c678f2e2085ee84e8647b77a\n\nKotlin:       1.8.10\nGroovy:       3.0.13\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7-44)\nOS:           Windows 10 10.0 amd64\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;date\nThe current date is: 22/02/2023\nEnter the new date: (dd-mm-yy)\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;\n</code></pre>\n"},{"tags":["java","gradle","groovy","jar","gradle-plugin"],"owner":{"account_id":20224439,"reputation":5,"user_id":14832809,"display_name":"NoelUzunbeycan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677063889,"creation_date":1677063889,"question_id":75531840,"body_markdown":"I want to outsource my creation of the Jar into a convention plugin, as I have to do this in a large amount of Projects and I do not want to have this much redundant code.My &quot;old&quot; way of doing it inside of the build.gradle file was like that:\r\n\r\n```\r\n.\r\n.\r\n.\r\njar {\r\n\tString classPath = createCP()\r\n\tmanifest {\r\n\t\tattributes (\r\n\t\t\t&quot;Main-Class&quot;: &quot;${mainClass}&quot;,\r\n\t\t\t&quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\r\n\t\t\t&quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\r\n\t\t\t&quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\r\n\t\t\t&quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\r\n\t\t\t&quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\r\n\t\t\t&quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\r\n\t\t\t&quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\r\n\t\t\t&quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\r\n\t\t\t&quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\r\n\t\t\t&#39;Class-Path&#39;: classPath\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nString getJarName () {\r\n\t// create the JarName out of a couple given params\r\n}\r\n\r\nString createCP() {\r\n\t//creation of the classPath for the Manifest\r\n}\r\n\r\n.\r\n.\r\n.\r\n```\r\n\r\nWhat I want to achieve is a plugin that exposes tasks, which take input (variable values for the manifest attributes and jar naming). As of now I developed a Plugin, that contains multiple tasks, for this question the only interesting tasks are:\r\n\r\n- CPTask\r\n\r\n- JarNameTask\r\n\r\n- JarCreationTask\r\n\r\nThe CPTask produces a String containing the classpath, the JarNameTask produces the Jar&#39;s Name and the JarCreationTask creates the jar, using the classpath and the jarName, thus depending on the other two tasks.  \r\nPrinting the values the tasks producing the Strings work perfectly fine, but when creating the jar, I still end up with an empty Jar, that is named wrong.\r\n\r\nThis is the implementation of the CreationTask:\r\n\r\n```\r\n@TaskAction\r\nvoid createJar() {\r\n\r\n    CPTask createCPTask = project.tasks.create(&quot;createCP&quot;, CPTask)\r\n    JarNameTask getJarNameTask = project.tasks.create(&quot;getJarName&quot;, JarNameTask)\r\n    \r\n    classPath = project.ext.classPathVar\r\n    jarName = project.ext.jarNameVar\r\n    println &quot;jarName in createJar: ${jarName}&quot;\r\n    println &quot;classPath in createJar: ${classPath}&quot;\r\n    \r\n    println &quot;creating Jar..... ${artifactId}&quot;\r\n\r\n    Jar jar = project.tasks.create(&quot;myJar&quot;, Jar)\r\n\r\n    jar.dependsOn(project.tasks.getByName(&quot;compileJava&quot;))\r\n    jar.from(project.sourceSets.main.output)\r\n    jar.archiveFileName.set(jarName)\r\n\r\n    println &quot;jarName in createJar: ${jarName}&quot;\r\n    println &quot;classPath in createJar: ${classPath}&quot;\r\n\r\n    jar.manifest.attributes (\r\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\r\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\r\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\r\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\r\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\r\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\r\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\r\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\r\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\r\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\r\n            &#39;Class-Path&#39;: classPath\r\n    )\r\n    println jar.archiveFile.get().asFile.getAbsolutePath() \r\n}\r\n```\r\n\r\nEven though the last println yields the correctly named Jars Path. When I go to that path, the Jar has no &quot;jarName&quot;.jar as its name but &quot;baseName&quot;-&quot;version&quot;.jar. Also it only contains an Manifest, that itself only contains Manifest-Version = 1.0 instead of my customized Manifest.","title":"Create Jar via custom Gradle Task in convention Plugin","body":"<p>I want to outsource my creation of the Jar into a convention plugin, as I have to do this in a large amount of Projects and I do not want to have this much redundant code.My &quot;old&quot; way of doing it inside of the build.gradle file was like that:</p>\n<pre><code>.\n.\n.\njar {\n    String classPath = createCP()\n    manifest {\n        attributes (\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\n            'Class-Path': classPath\n        )\n    }\n}\n\n\nString getJarName () {\n    // create the JarName out of a couple given params\n}\n\nString createCP() {\n    //creation of the classPath for the Manifest\n}\n\n.\n.\n.\n</code></pre>\n<p>What I want to achieve is a plugin that exposes tasks, which take input (variable values for the manifest attributes and jar naming). As of now I developed a Plugin, that contains multiple tasks, for this question the only interesting tasks are:</p>\n<ul>\n<li><p>CPTask</p>\n</li>\n<li><p>JarNameTask</p>\n</li>\n<li><p>JarCreationTask</p>\n</li>\n</ul>\n<p>The CPTask produces a String containing the classpath, the JarNameTask produces the Jar's Name and the JarCreationTask creates the jar, using the classpath and the jarName, thus depending on the other two tasks.<br />\nPrinting the values the tasks producing the Strings work perfectly fine, but when creating the jar, I still end up with an empty Jar, that is named wrong.</p>\n<p>This is the implementation of the CreationTask:</p>\n<pre><code>@TaskAction\nvoid createJar() {\n\n    CPTask createCPTask = project.tasks.create(&quot;createCP&quot;, CPTask)\n    JarNameTask getJarNameTask = project.tasks.create(&quot;getJarName&quot;, JarNameTask)\n    \n    classPath = project.ext.classPathVar\n    jarName = project.ext.jarNameVar\n    println &quot;jarName in createJar: ${jarName}&quot;\n    println &quot;classPath in createJar: ${classPath}&quot;\n    \n    println &quot;creating Jar..... ${artifactId}&quot;\n\n    Jar jar = project.tasks.create(&quot;myJar&quot;, Jar)\n\n    jar.dependsOn(project.tasks.getByName(&quot;compileJava&quot;))\n    jar.from(project.sourceSets.main.output)\n    jar.archiveFileName.set(jarName)\n\n    println &quot;jarName in createJar: ${jarName}&quot;\n    println &quot;classPath in createJar: ${classPath}&quot;\n\n    jar.manifest.attributes (\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\n            'Class-Path': classPath\n    )\n    println jar.archiveFile.get().asFile.getAbsolutePath() \n}\n</code></pre>\n<p>Even though the last println yields the correctly named Jars Path. When I go to that path, the Jar has no &quot;jarName&quot;.jar as its name but &quot;baseName&quot;-&quot;version&quot;.jar. Also it only contains an Manifest, that itself only contains Manifest-Version = 1.0 instead of my customized Manifest.</p>\n"},{"tags":["java","spring","spring-boot","rest","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677064607,"post_id":75531838,"comment_id":133262410,"body_markdown":"Please don&#39;t ask [the same question](https://stackoverflow.com/questions/75518100/injection-in-custom-validator-return-null) again. Instead modify your original question if you have additional information.","body":"Please don&#39;t ask <a href=\"https://stackoverflow.com/questions/75518100/injection-in-custom-validator-return-null\">the same question</a> again. Instead modify your original question if you have additional information."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1677065201,"post_id":75531838,"comment_id":133262551,"body_markdown":"It&#39;s not the final solution but can give some tips... what happens if you add @Primary on top of the bean &quot;LocalValidatorFactoryBean validator()&quot;?","body":"It&#39;s not the final solution but can give some tips... what happens if you add @Primary on top of the bean &quot;LocalValidatorFactoryBean validator()&quot;?"},{"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"score":0,"creation_date":1677066952,"post_id":75531838,"comment_id":133263030,"body_markdown":"If various beans are created, the bean which will &quot;win&quot; and give his value is bean which is annotated &quot;@Primary&quot;. Is it?\n\nThanks to your help, now I think I have to mark &quot;@Primary&quot; some bean but I don&#39;t know which. I tried with LocalValidatorFactoryBean (but nothing), I also tried to put my repository as a parameter in this bean as I saw in internet but nothing.\nAm I in a good way? I like tips, if you want to give me more..\nThank you Matteo","body":"If various beans are created, the bean which will &quot;win&quot; and give his value is bean which is annotated &quot;@Primary&quot;. Is it?  Thanks to your help, now I think I have to mark &quot;@Primary&quot; some bean but I don&#39;t know which. I tried with LocalValidatorFactoryBean (but nothing), I also tried to put my repository as a parameter in this bean as I saw in internet but nothing. Am I in a good way? I like tips, if you want to give me more.. Thank you Matteo"},{"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"score":0,"creation_date":1677068001,"post_id":75531838,"comment_id":133263370,"body_markdown":"following Spring doc, I added in my config\n\n`@Bean\n    public MethodValidationPostProcessor validationPostProcessor() {\n        return new MethodValidationPostProcessor();\n    }`\n\nunfortunately still nothing","body":"following Spring doc, I added in my config  <code>@Bean     public MethodValidationPostProcessor validationPostProcessor() {         return new MethodValidationPostProcessor();     }</code>  unfortunately still nothing"}],"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1677063877,"creation_date":1677063877,"question_id":75531838,"body_markdown":"I&#39;m using Spring Data Rest dependency which makes endpoints for me, I think something is wrong from there but cannot know how to manage this.\r\n\r\n**ProgrammeNomUnique:**\r\n\r\n```\r\n@Constraint(validatedBy = NomUniqueValidator.class)\r\n@Target({ElementType.METHOD, ElementType.FIELD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Component\r\npublic @interface ProgrammeNomUnique {\r\n\r\n        // define default error message\r\n        String message() default &quot;Un programme porte d&#233;j&#224; le m&#234;me nom&quot;;\r\n\r\n        // define default groups\r\n        public Class&lt;?&gt;[] groups() default {};\r\n\r\n        // define default payloads\r\n        public Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\n**NomUniqueValidator:**\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class NomUniqueValidator implements ConstraintValidator&lt;ProgrammeNomUnique, String&gt; {\r\n\r\n\r\n        @Autowired\r\n        private  ProgrammeRepository programmeRepository;\r\n\r\n    @Override\r\n    public void initialize(ProgrammeNomUnique constraintAnnotation) {\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String nouveauNom, ConstraintValidatorContext constraintValidatorContext) {\r\n        return !programmeRepository.existsByNom(nouveauNom);\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\n**ProgrammeRepository**\r\n\r\n```\r\n@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\r\n@RepositoryRestResource(path = &quot;programmes&quot;)\r\npublic interface ProgrammeRepository extends JpaRepository&lt;Programme, Integer&gt; {\r\n\r\n    boolean existsByNom(String nom);\r\n}\r\n```\r\n\r\n**Programme**\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@Entity\r\n@Table(name = &quot;programme&quot;)\r\npublic class Programme {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id_programme&quot;)\r\n    private int id;\r\n\r\n    @NotEmpty(message = &quot;Le programme doit avoir un nom&quot;)\r\n    @Column\r\n    @ProgrammeNomUnique //&lt;--- HERE\r\n    private String nom;\r\n\r\n    @NotNull(message = &quot;Le programme doit avoir un prix&quot;)\r\n    @Column\r\n    private double prix;\r\n\r\n    @NotNull(message = &quot;Le programme doit avoir une dur&#233;e&quot;)\r\n    @Column(name = &quot;duree_semaine&quot;)\r\n    private String dureeSemaine;\r\n\r\n    @NotEmpty(message = &quot;Le programme doit avoir une description&quot;)\r\n    @Column\r\n    private String description;\r\n\r\n    @Column(name = &quot;is_a_la_une&quot;)\r\n    private int isALaUne;\r\n\r\n    @Column(name = &quot;services_associes&quot;)\r\n    private String servicesAssocies;\r\n\r\n    @Column(name = &quot;id_image&quot;)\r\n    private int idImage;\r\n\r\n    @OneToMany(cascade = {CascadeType.DETACH, CascadeType.MERGE,\r\n            CascadeType.REFRESH, CascadeType.PERSIST}, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;id_programme&quot;)\r\n    private List&lt;Section&gt; sections;\r\n\r\n    //////\r\n\r\n}\r\n```\r\n\r\nI tried this but seems to be useless\r\n\r\n```\r\n@Configuration\r\npublic class ValidatorConfig {\r\n\r\n    @Bean\r\n    public LocalValidatorFactoryBean validator() {\r\n        return new LocalValidatorFactoryBean();\r\n    }\r\n}\r\n```\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;dependencies&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;!-- https://stackoverflow.com/a/71416675/19092469 --&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;!-- R&#233;duire code r&#233;p&#233;titif et source d&#39;erreur (reduce boilerplate) --&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;!-- R&#233;duire code r&#233;p&#233;titif et source d&#39;erreur (reduce boilerplate) --&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n   &lt;/dependency&gt;\r\n\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nhow to resolve it ?\r\n\r\nUsing Spring boot 3, nothing special in properties.\r\n\r\nThanks","title":"Injection from validator is null with message &quot;Cannot invoke because is null&quot;","body":"<p>I'm using Spring Data Rest dependency which makes endpoints for me, I think something is wrong from there but cannot know how to manage this.</p>\n<p><strong>ProgrammeNomUnique:</strong></p>\n<pre><code>@Constraint(validatedBy = NomUniqueValidator.class)\n@Target({ElementType.METHOD, ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n@Component\npublic @interface ProgrammeNomUnique {\n\n        // define default error message\n        String message() default &quot;Un programme porte déjà le même nom&quot;;\n\n        // define default groups\n        public Class&lt;?&gt;[] groups() default {};\n\n        // define default payloads\n        public Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p><strong>NomUniqueValidator:</strong></p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class NomUniqueValidator implements ConstraintValidator&lt;ProgrammeNomUnique, String&gt; {\n\n\n        @Autowired\n        private  ProgrammeRepository programmeRepository;\n\n    @Override\n    public void initialize(ProgrammeNomUnique constraintAnnotation) {\n    }\n\n    @Override\n    public boolean isValid(String nouveauNom, ConstraintValidatorContext constraintValidatorContext) {\n        return !programmeRepository.existsByNom(nouveauNom);\n\n\n    }\n}\n</code></pre>\n<p><strong>ProgrammeRepository</strong></p>\n<pre><code>@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\n@RepositoryRestResource(path = &quot;programmes&quot;)\npublic interface ProgrammeRepository extends JpaRepository&lt;Programme, Integer&gt; {\n\n    boolean existsByNom(String nom);\n}\n</code></pre>\n<p><strong>Programme</strong></p>\n<pre><code>@Getter\n@Setter\n@RequiredArgsConstructor\n@Entity\n@Table(name = &quot;programme&quot;)\npublic class Programme {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_programme&quot;)\n    private int id;\n\n    @NotEmpty(message = &quot;Le programme doit avoir un nom&quot;)\n    @Column\n    @ProgrammeNomUnique //&lt;--- HERE\n    private String nom;\n\n    @NotNull(message = &quot;Le programme doit avoir un prix&quot;)\n    @Column\n    private double prix;\n\n    @NotNull(message = &quot;Le programme doit avoir une durée&quot;)\n    @Column(name = &quot;duree_semaine&quot;)\n    private String dureeSemaine;\n\n    @NotEmpty(message = &quot;Le programme doit avoir une description&quot;)\n    @Column\n    private String description;\n\n    @Column(name = &quot;is_a_la_une&quot;)\n    private int isALaUne;\n\n    @Column(name = &quot;services_associes&quot;)\n    private String servicesAssocies;\n\n    @Column(name = &quot;id_image&quot;)\n    private int idImage;\n\n    @OneToMany(cascade = {CascadeType.DETACH, CascadeType.MERGE,\n            CascadeType.REFRESH, CascadeType.PERSIST}, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_programme&quot;)\n    private List&lt;Section&gt; sections;\n\n    //////\n\n}\n</code></pre>\n<p>I tried this but seems to be useless</p>\n<pre><code>@Configuration\npublic class ValidatorConfig {\n\n    @Bean\n    public LocalValidatorFactoryBean validator() {\n        return new LocalValidatorFactoryBean();\n    }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n   &lt;/dependency&gt;\n\n   &lt;!-- https://stackoverflow.com/a/71416675/19092469 --&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n      &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;!-- Réduire code répétitif et source d'erreur (reduce boilerplate) --&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n   &lt;/dependency&gt;\n   &lt;!-- Réduire code répétitif et source d'erreur (reduce boilerplate) --&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n   &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<p>how to resolve it ?</p>\n<p>Using Spring boot 3, nothing special in properties.</p>\n<p>Thanks</p>\n"},{"tags":["java","rabbitmq","keycloak"],"owner":{"account_id":22684491,"reputation":3,"user_id":16854381,"display_name":"Артём Смирнов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677063748,"creation_date":1677063728,"question_id":75531815,"body_markdown":"So I have to write the code to consume messages from RabbtiMQ&#39;s queue, that contain information about a user which I have to save as a user obviously in &quot;userLocalStorage&quot; in KeyCloak. The problem is that when I&#39;m trying to reach the &quot;userLocalStorage&quot; aka database in callback functional object the IllegalStateException is thrown, which says that the Session/EntityManager is closed. In any other block of code but this one the user is being saved properly. The problem occurs only when this action is in callback object. \r\n\r\n``` \r\nDeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\r\n                String message = new String(delivery.getBody(), StandardCharsets.UTF_8);\r\n                User user = User.convertFromString(message);\r\n                session.userLocalStorage().addUser(... , ...);\r\n            };\r\n```","title":"Keycloak consuming the RabbitMQ&#39;s queue","body":"<p>So I have to write the code to consume messages from RabbtiMQ's queue, that contain information about a user which I have to save as a user obviously in &quot;userLocalStorage&quot; in KeyCloak. The problem is that when I'm trying to reach the &quot;userLocalStorage&quot; aka database in callback functional object the IllegalStateException is thrown, which says that the Session/EntityManager is closed. In any other block of code but this one the user is being saved properly. The problem occurs only when this action is in callback object.</p>\n<pre><code>DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\n                String message = new String(delivery.getBody(), StandardCharsets.UTF_8);\n                User user = User.convertFromString(message);\n                session.userLocalStorage().addUser(... , ...);\n            };\n</code></pre>\n"},{"tags":["java","spring","hibernate","gradle","spring-data-jpa"],"comments":[{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1620728938,"post_id":67483619,"comment_id":119280449,"body_markdown":"Could you please show DDL of your `single_questions` table.","body":"Could you please show DDL of your <code>single_questions</code> table."}],"answers":[{"tags":[],"owner":{"account_id":10132205,"reputation":413,"user_id":7485135,"display_name":"Tamil.S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620726507,"creation_date":1620726507,"answer_id":67484329,"question_id":67483619,"body_markdown":"Try to Annotate your String[] field with simply `@ElementCollection`.\r\n\r\n    @ElementCollection(targetClass=String.class)\r\n    @Column(name = &quot;field_type_values&quot;)\r\n    private String[] fieldTypeValues;\r\n\r\n\r\n","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>Try to Annotate your String[] field with simply <code>@ElementCollection</code>.</p>\n<pre><code>@ElementCollection(targetClass=String.class)\n@Column(name = &quot;field_type_values&quot;)\nprivate String[] fieldTypeValues;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3956809,"reputation":51,"user_id":3265006,"display_name":"Mordrekai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063670,"creation_date":1677063670,"answer_id":75531803,"question_id":67483619,"body_markdown":"I don&#39;t know if you need to allow repeated values, but if that&#39;s not the case, using java.util.Set type as the collection type, along with the @ElementCollection, worked for me.\r\n```\r\n    @Entity\r\n    @Table(name = &quot;single_questions&quot;)\r\n    public class SingleQuestions {\r\n        @Id\r\n        private Integer id;\r\n\r\n        @ElementCollection(targetClass=String.class)\r\n        @Column(name = &quot;FIELD_TYPE_VALUES&quot;)\r\n        private List&lt;String&gt; fieldtypevalues;\r\n```","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>I don't know if you need to allow repeated values, but if that's not the case, using java.util.Set type as the collection type, along with the @ElementCollection, worked for me.</p>\n<pre><code>    @Entity\n    @Table(name = &quot;single_questions&quot;)\n    public class SingleQuestions {\n        @Id\n        private Integer id;\n\n        @ElementCollection(targetClass=String.class)\n        @Column(name = &quot;FIELD_TYPE_VALUES&quot;)\n        private List&lt;String&gt; fieldtypevalues;\n</code></pre>\n"}],"owner":{"account_id":12232531,"reputation":1276,"user_id":8928037,"display_name":"Kaumadie Kariyawasam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1430,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677063670,"creation_date":1620723610,"question_id":67483619,"body_markdown":"I want to create mysql string array type data field.\r\nHence I create model class in my spring-boot gradle project as following.\r\n\r\n``` java\r\n    @Entity\r\n    @Table(name = &quot;single_questions&quot;)\r\n    public class SingleQuestions {\r\n        @Id\r\n        private Integer id;\r\n        private String[] fieldtypevalues;\r\n    \r\n        public SingleQuestions() {\r\n        }\r\n    \r\n        public SingleQuestions(Integer id, String category, String field, String field_type, String[] fieldtypevalues) {\r\n            this.id = id;\r\n            this.fieldtypevalues = fieldtypevalues;\r\n        }\r\n    \r\n        public Integer getId() {\r\n            return this.id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n    \r\n        public String[] getFieldtypevalues() {\r\n            return this.fieldtypevalues;\r\n        }\r\n    \r\n        public void setFieldtypevalues(String[] fieldtypevalues) {\r\n            this.fieldtypevalues = fieldtypevalues;\r\n        }\r\n    \r\n    }\r\n```\r\n\r\nThis is my Repository it extends by `JpaRepository`\r\n\r\n``` java\r\n    public interface SingleQuestionRepository extends JpaRepository&lt;SingleQuestions,Integer&gt;{\r\n        \r\n    }\r\n```\r\nThis is controller class\r\n\r\n``` java\r\n    @RestController\r\n    @RequestMapping(&quot;/singleques&quot;)\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    public class SingleQuestionController {\r\n        private SingleQuestionRepository singleQuestionRepository;\r\n    \r\n        public SingleQuestionController(SingleQuestionRepository singleQuestionRepository) {\r\n            this.singleQuestionRepository = singleQuestionRepository;\r\n        }\r\n    \r\n        @GetMapping(&quot;/getall&quot;)\r\n        Collection&lt;SingleQuestions&gt; getquestions() {\r\n            return singleQuestionRepository.findAll();\r\n        }\r\n    }\r\n```\r\n\r\nBut when I run `getquestions()` function in controller class, it gives following error.\r\n\r\n```\r\nnested exception is org.hibernate.type.SerializationException: could not deserialize\r\n    org.springframework.orm.jpa.JpaSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:353)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\r\n```\r\n\r\n","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>I want to create mysql string array type data field.\nHence I create model class in my spring-boot gradle project as following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Entity\n    @Table(name = &quot;single_questions&quot;)\n    public class SingleQuestions {\n        @Id\n        private Integer id;\n        private String[] fieldtypevalues;\n    \n        public SingleQuestions() {\n        }\n    \n        public SingleQuestions(Integer id, String category, String field, String field_type, String[] fieldtypevalues) {\n            this.id = id;\n            this.fieldtypevalues = fieldtypevalues;\n        }\n    \n        public Integer getId() {\n            return this.id;\n        }\n    \n        public void setId(Integer id) {\n            this.id = id;\n        }\n    \n    \n        public String[] getFieldtypevalues() {\n            return this.fieldtypevalues;\n        }\n    \n        public void setFieldtypevalues(String[] fieldtypevalues) {\n            this.fieldtypevalues = fieldtypevalues;\n        }\n    \n    }\n</code></pre>\n<p>This is my Repository it extends by <code>JpaRepository</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public interface SingleQuestionRepository extends JpaRepository&lt;SingleQuestions,Integer&gt;{\n        \n    }\n</code></pre>\n<p>This is controller class</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @RestController\n    @RequestMapping(&quot;/singleques&quot;)\n    @CrossOrigin(origins = &quot;*&quot;)\n    public class SingleQuestionController {\n        private SingleQuestionRepository singleQuestionRepository;\n    \n        public SingleQuestionController(SingleQuestionRepository singleQuestionRepository) {\n            this.singleQuestionRepository = singleQuestionRepository;\n        }\n    \n        @GetMapping(&quot;/getall&quot;)\n        Collection&lt;SingleQuestions&gt; getquestions() {\n            return singleQuestionRepository.findAll();\n        }\n    }\n</code></pre>\n<p>But when I run <code>getquestions()</code> function in controller class, it gives following error.</p>\n<pre><code>nested exception is org.hibernate.type.SerializationException: could not deserialize\n    org.springframework.orm.jpa.JpaSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize\n        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:353)\n        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\n</code></pre>\n"},{"tags":["java","android","x509certificate","keychain"],"answers":[{"tags":[],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677059028,"creation_date":1677057569,"answer_id":75530519,"question_id":75482765,"body_markdown":"I figured it out, the code needs to become slightly different, but this wasn&#39;t documented anywhere I could find: I had to literally face roll the keyboard to get it done\r\n\r\nso. the OP example was me using the pfx file in the assets folder.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nIn order to ***not*** use a from an asset file in the build environment (aka `KeyStore`), in order to load the cert direcly from a part of android OS at run time and get at it in code (aka `KeyChain`)(i.e. in order to load the cert you can see in the screen below on the device) ....\r\n\r\n\r\n**THIS IS AN illustration of where it is in android, BUT NOT MY SCREEN SHOT** [![enter image description here][2]][2]\r\n\r\n...use this code\r\n\r\n    final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\r\n    TrustManager[] trustManager;\r\n    SSLSocketFactory sslSocketFactory;\r\n    KeyStore keyStore;\r\n    \r\n    X509Certificate[] keychain;  \r\n    PrivateKey privateKey;   \r\n    keychain = KeyChain.getCertificateChain(context, &quot;xkeyx-xaliasxx&quot;);\r\n    privateKey = KeyChain.getPrivateKey(context, &quot;xkeyx-xaliasxx&quot;); \r\n    keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    keyStore.load(null, null);\r\n    keyStore.setKeyEntry(&quot;xkeyx-xaliasxx&quot;, privateKey, PASSWORD, keychain);  \r\n    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\r\n    trustManagerFactory.init(keyStore);\r\n    TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\r\n    if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\r\n      {\r\n        throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\r\n          + Arrays.toString(trustManagers));\r\n      }\r\n    trustManager = trustManagers;\r\n    \r\n    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\r\n    keyManagerFactory.init(keyStore,PASSWORD);\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\r\n    sslSocketFactory = sslContext.getSocketFactory();\r\n    \r\n    \r\n    OkHttpClient.Builder builder = new OkHttpClient.Builder()\r\n        .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\r\n        .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\r\n    builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\r\n    \r\n    OkHttpClient okHttpClient = builder.build();\r\n\r\n**NOTE this will only work AFTER the user in app has confirmed the certificate: so this code needs to have been run at least ONCE**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n    KeyChain.choosePrivateKeyAlias(RN.getReactActivity(), (KeyChainAliasCallback) alias -&gt; {\r\n    Log.d(&quot;cert&quot;, String.format(&quot;User has selected client certificate alias: %s should be xkeyx-xaliasxx&quot;, alias));\r\n     X509Certificate[] truechain;\r\n     try {\r\n        truechain = KeyChain.getCertificateChain(Context, alias);\r\n        if (truechain != null) {\r\n            Log.d(&quot;cert&quot;, &quot;truechain count&quot; + truechain.length);\r\n        }\r\n        else{\r\n            Log.d(&quot;cert&quot;, &quot;truechain count is null&quot;);\r\n        }\r\n     } catch (InterruptedException e) {\r\n         Log.e(&quot;cert&quot;, &quot;InterruptedException&quot;, e);\r\n     } catch (KeyChainException e) {\r\n         Log.e(&quot;cert&quot;, &quot;KeyChainException&quot;, e);\r\n     }\r\n    }, null, null, null, -1, null);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GtBfQ.png\r\n  [2]: https://i.stack.imgur.com/nK0nC.png\r\n  [3]: https://i.stack.imgur.com/Ood2y.png","title":"using X509Certificate from KeyChain in OKHttpClient sslSocketFactory","body":"<p>I figured it out, the code needs to become slightly different, but this wasn't documented anywhere I could find: I had to literally face roll the keyboard to get it done</p>\n<p>so. the OP example was me using the pfx file in the assets folder.</p>\n<p><a href=\"https://i.stack.imgur.com/GtBfQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GtBfQ.png\" alt=\"enter image description here\" /></a></p>\n<p>In order to <em><strong>not</strong></em> use a from an asset file in the build environment (aka <code>KeyStore</code>), in order to load the cert direcly from a part of android OS at run time and get at it in code (aka <code>KeyChain</code>)(i.e. in order to load the cert you can see in the screen below on the device) ....</p>\n<p><strong>THIS IS AN illustration of where it is in android, BUT NOT MY SCREEN SHOT</strong> <a href=\"https://i.stack.imgur.com/nK0nC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nK0nC.png\" alt=\"enter image description here\" /></a></p>\n<p>...use this code</p>\n<pre><code>final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\nTrustManager[] trustManager;\nSSLSocketFactory sslSocketFactory;\nKeyStore keyStore;\n\nX509Certificate[] keychain;  \nPrivateKey privateKey;   \nkeychain = KeyChain.getCertificateChain(context, &quot;xkeyx-xaliasxx&quot;);\nprivateKey = KeyChain.getPrivateKey(context, &quot;xkeyx-xaliasxx&quot;); \nkeyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\nkeyStore.load(null, null);\nkeyStore.setKeyEntry(&quot;xkeyx-xaliasxx&quot;, privateKey, PASSWORD, keychain);  \nTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\ntrustManagerFactory.init(keyStore);\nTrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\nif (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\ntrustManager = trustManagers;\n\nKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\nkeyManagerFactory.init(keyStore,PASSWORD);\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\nsslContext.init(keyManagerFactory.getKeyManagers(),null,null);\nsslSocketFactory = sslContext.getSocketFactory();\n\n\nOkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\nbuilder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\nOkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p><strong>NOTE this will only work AFTER the user in app has confirmed the certificate: so this code needs to have been run at least ONCE</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Ood2y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ood2y.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>KeyChain.choosePrivateKeyAlias(RN.getReactActivity(), (KeyChainAliasCallback) alias -&gt; {\nLog.d(&quot;cert&quot;, String.format(&quot;User has selected client certificate alias: %s should be xkeyx-xaliasxx&quot;, alias));\n X509Certificate[] truechain;\n try {\n    truechain = KeyChain.getCertificateChain(Context, alias);\n    if (truechain != null) {\n        Log.d(&quot;cert&quot;, &quot;truechain count&quot; + truechain.length);\n    }\n    else{\n        Log.d(&quot;cert&quot;, &quot;truechain count is null&quot;);\n    }\n } catch (InterruptedException e) {\n     Log.e(&quot;cert&quot;, &quot;InterruptedException&quot;, e);\n } catch (KeyChainException e) {\n     Log.e(&quot;cert&quot;, &quot;KeyChainException&quot;, e);\n }\n}, null, null, null, -1, null);\n</code></pre>\n"}],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75530519,"answer_count":1,"score":2,"last_activity_date":1677063546,"creation_date":1676628259,"question_id":75482765,"body_markdown":"I&#39;m an Android Developer who has to use `KeyChain` not `KeyStore`. The KeyStore variant of our code works. I need to add `KeyChain` equivalent.\r\n\r\nthis works\r\n\r\n      final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\r\n      TrustManager[] trustManager;\r\n      SSLSocketFactory sslSocketFactory;\r\n      KeyStore keyStore;\r\n\r\n      InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);\r\n      keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n      keyStore.load(inputStream,PASSWORD);\r\n      TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\r\n      trustManagerFactory.init(keyStore);\r\n      TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\r\n      if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\r\n      {\r\n        throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\r\n          + Arrays.toString(trustManagers));\r\n      }\r\n      trustManager = trustManagers;\r\n\r\n      KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\r\n      keyManagerFactory.init(keyStore,PASSWORD);\r\n      SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n      sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\r\n      sslSocketFactory = sslContext.getSocketFactory();\r\n\r\n\r\n      OkHttpClient.Builder builder = new OkHttpClient.Builder()\r\n        .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\r\n        .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\r\n      builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\r\n\r\n      OkHttpClient okHttpClient = builder.build();\r\n\r\nThe problem is this line `InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);` we&#39;re not allowed to use the assets folder (for reasons outside the scope of this conversation) but we are allowed to put the self same file in the `KeyChain` so I did, and I can retrieve it using the following. `X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); `\r\n\r\nso since \r\n\r\n       X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); //this gets the correct X509Certificate\r\n\r\nGets the certificate via `KeyChain` my instinct was to swap it out with this:\r\n      \r\n      \r\n       X509TrustManager customTm = new X509TrustManager() {\r\n        @Override\r\n        public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\r\n\r\n        }\r\n\r\n        @Override\r\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n          try {\r\n            return X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;);\r\n          } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n          } catch (KeyChainException e) {\r\n            e.printStackTrace();\r\n          }\r\n          return null;\r\n        }\r\n      };\r\n      TrustManager[] trustManager = new TrustManager[] { customTm };\r\n      sslContext.init(null, trustManager, null);\r\n     \r\nbut it doesn&#39;t work, so my question is: **How do I use the X509Certificate I have from the `KeyChain` as a drop in replacement to the asset I pulled into the `KeyStore`?**            ","title":"using X509Certificate from KeyChain in OKHttpClient sslSocketFactory","body":"<p>I'm an Android Developer who has to use <code>KeyChain</code> not <code>KeyStore</code>. The KeyStore variant of our code works. I need to add <code>KeyChain</code> equivalent.</p>\n<p>this works</p>\n<pre><code>  final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\n  TrustManager[] trustManager;\n  SSLSocketFactory sslSocketFactory;\n  KeyStore keyStore;\n\n  InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);\n  keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n  keyStore.load(inputStream,PASSWORD);\n  TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\n  trustManagerFactory.init(keyStore);\n  TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\n  if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\n  trustManager = trustManagers;\n\n  KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\n  keyManagerFactory.init(keyStore,PASSWORD);\n  SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n  sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\n  sslSocketFactory = sslContext.getSocketFactory();\n\n\n  OkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\n  builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\n  OkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p>The problem is this line <code>InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);</code> we're not allowed to use the assets folder (for reasons outside the scope of this conversation) but we are allowed to put the self same file in the <code>KeyChain</code> so I did, and I can retrieve it using the following. <code>X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); </code></p>\n<p>so since</p>\n<pre><code>   X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); //this gets the correct X509Certificate\n</code></pre>\n<p>Gets the certificate via <code>KeyChain</code> my instinct was to swap it out with this:</p>\n<pre><code>   X509TrustManager customTm = new X509TrustManager() {\n    @Override\n    public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n      try {\n        return X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;);\n      } catch (InterruptedException e) {\n        e.printStackTrace();\n      } catch (KeyChainException e) {\n        e.printStackTrace();\n      }\n      return null;\n    }\n  };\n  TrustManager[] trustManager = new TrustManager[] { customTm };\n  sslContext.init(null, trustManager, null);\n \n</code></pre>\n<p>but it doesn't work, so my question is: <strong>How do I use the X509Certificate I have from the <code>KeyChain</code> as a drop in replacement to the asset I pulled into the <code>KeyStore</code>?</strong></p>\n"},{"tags":["java","android","notifications","broadcastreceiver","alarmmanager"],"comments":[{"owner":{"account_id":7143350,"reputation":3880,"user_id":5460066,"display_name":"phatnhse"},"score":0,"creation_date":1529659127,"post_id":50983560,"comment_id":88964111,"body_markdown":"1. Log anything in `onReceive()` to make sure the cause isn&#39;t notification.\n2. If it doesn&#39;t show anything, make sure if your app installed on internal storage, not external storage","body":"1. Log anything in <code>onReceive()</code> to make sure the cause isn&#39;t notification. 2. If it doesn&#39;t show anything, make sure if your app installed on internal storage, not external storage"},{"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"score":0,"creation_date":1529663519,"post_id":50983560,"comment_id":88966688,"body_markdown":"@Ph&#225;t Ph&#225;t, I&#39;ve already tried to send notification if intent.getAction() != null, but it always null, even if I don&#39;t reboot device..","body":"@Ph&#225;t Ph&#225;t, I&#39;ve already tried to send notification if intent.getAction() != null, but it always null, even if I don&#39;t reboot device.."}],"answers":[{"tags":[],"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1529820795,"creation_date":1529820795,"answer_id":51007408,"question_id":50983560,"body_markdown":"I just found the solution! \r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;receiver\r\n            android:name=&quot;com.example.a52780.nontifications.AlarmReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:permission=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.example.a52780.nontifications.BootService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;/&gt;\r\n\r\n\r\nAlso I added **BootService.java**\r\n&lt;!-- language: java --&gt;\r\n\r\n    private void setAlarm(Intent intent) {\r\n        int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n        String text = intent.getStringExtra(&quot;text&quot;);\r\n        Intent mainIntent = new Intent(this, MainActivity.class);\r\n        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, mainIntent, 0);\r\n        NotificationManager myNotificationManager =\r\n                (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        Notification.Builder builder = new Notification.Builder(this);\r\n        builder.setSmallIcon(android.R.drawable.ic_dialog_info)\r\n                .setContentTitle(&quot;Wake up!&quot;)\r\n                .setContentText(text)\r\n                .setWhen(System.currentTimeMillis())\r\n                .setContentIntent(contentIntent);\r\n        myNotificationManager.notify(notificationId, builder.build());\r\n    }\r\n    \r\n    @Override\r\n    protected void onHandleIntent(@Nullable Intent intent) {\r\n        setAlarm(intent);\r\n        Intent service = new Intent(this, BootService.class);\r\n        stopService(service);\r\n    }\r\n\r\n**AlarmReceiver.java**\r\n&lt;!-- language: java --&gt;\r\n\r\n    private static final String BOOT_COMPLETED =\r\n            &quot;android.intent.action.BOOT_COMPLETED&quot;;\r\n    private static final String QUICKBOOT_POWERON =\r\n            &quot;android.intent.action.QUICKBOOT_POWERON&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        // Get id &amp; message from Intent\r\n        int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n        String message = intent.getStringExtra(&quot;text&quot;);\r\n        \r\n        String action = intent.getAction();\r\n        if (BOOT_COMPLETED.equals(action) ||\r\n                QUICKBOOT_POWERON.equals(action)) {\r\n\r\n            Intent service = new Intent(context, BootService.class);\r\n\r\n            intent.putExtra(&quot;notificationId&quot;, notificationId);\r\n            intent.putExtra(&quot;text&quot;, message);\r\n\r\n            context.startService(service);\r\n        }\r\n        }\r\n\r\nI changed code in **MainActivity** that calls intent as well.\r\nOld:\r\n\r\n    Intent intent = new Intent(MainActivity.this, AlarmReceiver.class);\r\n                intent.putExtra(&quot;notificationId&quot;, notificationId);\r\n                intent.putExtra(&quot;text&quot;, text);\r\n                intent.putExtra(&quot;alarmStartTime&quot;, alarmStartTime);               \r\n                PendingIntent alarmIntent = PendingIntent.getBroadcast(MainActivity.this, notificationId, intent, PendingIntent.FLAG_CANCEL_CURRENT);\r\n                AlarmManager alarm = (AlarmManager) getSystemService(ALARM_SERVICE);\r\n\r\nIdk why, but it works after adding\r\n\r\n    intent.setAction(&quot;android.intent.action.BOOT_COMPLETED&quot;);\r\n    intent.setAction(&quot;android.intent.action.QUICKBOOT_POWERON&quot;);\r\n\r\n","title":"BroadcastReceiver is not working after reboot","body":"<p>I just found the solution! </p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;receiver\n        android:name=\"com.example.a52780.nontifications.AlarmReceiver\"\n        android:enabled=\"true\"\n        android:exported=\"false\"\n        android:permission=\"android.permission.RECEIVE_BOOT_COMPLETED\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n            &lt;action android:name=\"android.intent.action.QUICKBOOT_POWERON\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;service\n        android:name=\"com.example.a52780.nontifications.BootService\"\n        android:enabled=\"true\"\n        android:exported=\"false\"/&gt;\n</code></pre>\n\n<p>Also I added <strong>BootService.java</strong>\n</p>\n\n<pre><code>private void setAlarm(Intent intent) {\n    int notificationId = intent.getIntExtra(\"notificationId\", 0);\n    String text = intent.getStringExtra(\"text\");\n    Intent mainIntent = new Intent(this, MainActivity.class);\n    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, mainIntent, 0);\n    NotificationManager myNotificationManager =\n            (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);\n    Notification.Builder builder = new Notification.Builder(this);\n    builder.setSmallIcon(android.R.drawable.ic_dialog_info)\n            .setContentTitle(\"Wake up!\")\n            .setContentText(text)\n            .setWhen(System.currentTimeMillis())\n            .setContentIntent(contentIntent);\n    myNotificationManager.notify(notificationId, builder.build());\n}\n\n@Override\nprotected void onHandleIntent(@Nullable Intent intent) {\n    setAlarm(intent);\n    Intent service = new Intent(this, BootService.class);\n    stopService(service);\n}\n</code></pre>\n\n<p><strong>AlarmReceiver.java</strong>\n</p>\n\n<pre><code>private static final String BOOT_COMPLETED =\n        \"android.intent.action.BOOT_COMPLETED\";\nprivate static final String QUICKBOOT_POWERON =\n        \"android.intent.action.QUICKBOOT_POWERON\";\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n\n    // Get id &amp; message from Intent\n    int notificationId = intent.getIntExtra(\"notificationId\", 0);\n    String message = intent.getStringExtra(\"text\");\n\n    String action = intent.getAction();\n    if (BOOT_COMPLETED.equals(action) ||\n            QUICKBOOT_POWERON.equals(action)) {\n\n        Intent service = new Intent(context, BootService.class);\n\n        intent.putExtra(\"notificationId\", notificationId);\n        intent.putExtra(\"text\", message);\n\n        context.startService(service);\n    }\n    }\n</code></pre>\n\n<p>I changed code in <strong>MainActivity</strong> that calls intent as well.\nOld:</p>\n\n<pre><code>Intent intent = new Intent(MainActivity.this, AlarmReceiver.class);\n            intent.putExtra(\"notificationId\", notificationId);\n            intent.putExtra(\"text\", text);\n            intent.putExtra(\"alarmStartTime\", alarmStartTime);               \n            PendingIntent alarmIntent = PendingIntent.getBroadcast(MainActivity.this, notificationId, intent, PendingIntent.FLAG_CANCEL_CURRENT);\n            AlarmManager alarm = (AlarmManager) getSystemService(ALARM_SERVICE);\n</code></pre>\n\n<p>Idk why, but it works after adding</p>\n\n<pre><code>intent.setAction(\"android.intent.action.BOOT_COMPLETED\");\nintent.setAction(\"android.intent.action.QUICKBOOT_POWERON\");\n</code></pre>\n"}],"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1883,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51007408,"answer_count":1,"score":4,"last_activity_date":1677063501,"creation_date":1529655215,"question_id":50983560,"body_markdown":"My BroadcastReceiver works fine, but when I reboot my phone, all notifications stop working. \r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.a52780.nontifications&quot;\r\n        android:installLocation=&quot;internalOnly&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.SET_ALARM&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED &quot;/&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;&gt;\r\n            &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n            &lt;receiver\r\n                android:name=&quot;.AlarmReceiver&quot;\r\n                android:priority=&quot;999&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n    \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\n\r\n**AlarmReceiver.java**\r\n\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AlarmReceiver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n    \r\n                // Get id &amp; message from Intent\r\n    \r\n                int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n                String message = intent.getStringExtra(&quot;text&quot;);\r\n    \r\n                // when notif. is tapped, call MainActivity\r\n    \r\n                Intent mainIntent = new Intent(context, MainActivity.class);\r\n                PendingIntent contentIntent = PendingIntent.getActivity(context, 0, mainIntent, 0);\r\n    \r\n                NotificationManager myNotificationManager =\r\n                        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n    \r\n                // PREPARE NOTIF\r\n    \r\n                Notification.Builder builder = new Notification.Builder(context);\r\n                builder.setSmallIcon(android.R.drawable.ic_dialog_info)\r\n                        .setContentTitle(&quot;Wake up!&quot;)\r\n                        .setContentText(message)\r\n                        .setWhen(System.currentTimeMillis())\r\n                        .setContentIntent(contentIntent);\r\n    \r\n                myNotificationManager.notify(notificationId, builder.build());\r\n            }\r\n    }\r\n\r\nAlso I tried to put android:enabled=&quot;true&quot; and android:exported=&quot;false&quot; in receiver. But it didn&#39;t work. Application installs in phone memory not on the SD card. BroadcastReceiver should works, anyway it doesn&#39;t work after reboot\r\n\r\n\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"BroadcastReceiver is not working after reboot","body":"<p>My BroadcastReceiver works fine, but when I reboot my phone, all notifications stop working. </p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.a52780.nontifications\"\n    android:installLocation=\"internalOnly\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.SET_ALARM\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED \"/&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=\".AlarmReceiver\"\n            android:priority=\"999\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n                &lt;action android:name=\"android.intent.action.QUICKBOOT_POWERON\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p><strong>AlarmReceiver.java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class AlarmReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n            // Get id &amp; message from Intent\n\n            int notificationId = intent.getIntExtra(\"notificationId\", 0);\n            String message = intent.getStringExtra(\"text\");\n\n            // when notif. is tapped, call MainActivity\n\n            Intent mainIntent = new Intent(context, MainActivity.class);\n            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, mainIntent, 0);\n\n            NotificationManager myNotificationManager =\n                    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n\n            // PREPARE NOTIF\n\n            Notification.Builder builder = new Notification.Builder(context);\n            builder.setSmallIcon(android.R.drawable.ic_dialog_info)\n                    .setContentTitle(\"Wake up!\")\n                    .setContentText(message)\n                    .setWhen(System.currentTimeMillis())\n                    .setContentIntent(contentIntent);\n\n            myNotificationManager.notify(notificationId, builder.build());\n        }\n}\n</code></pre>\n\n<p>Also I tried to put android:enabled=\"true\" and android:exported=\"false\" in receiver. But it didn't work. Application installs in phone memory not on the SD card. BroadcastReceiver should works, anyway it doesn't work after reboot</p>\n"},{"tags":["java","spring-boot","singleton","postconstruct","application-scope"],"answers":[{"tags":[],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063458,"creation_date":1677063458,"answer_id":75531758,"question_id":75518586,"body_markdown":"I&#39;ve solved my problem by using `Bean.refresh()`, The solution I was seeking, was I wanted a `/refresh` end-point which will refresh my bean to do that I followed the following steps - \r\n 1. I Autowired the `ConfigurableApplicationContext `  \r\n    `@Autowired`  \r\n\t`private ConfigurableApplicationContext context;`\r\n\r\n 2. In the endpoint I initialized the bean -   \r\n`ReferenceClass bean = context.getBean(ReferenceClass.class);`\r\n\r\n 3. Refreshed is using `.refresh()`  \r\n`bean.refresh();`\r\n\r\nThat&#39;s it, it solved my issue, once the user hits the `/refresh`  endpoint it refreshes my bean. ","title":"How to add Refresh trigger to a class which is annotated with @ApplicationScope","body":"<p>I've solved my problem by using <code>Bean.refresh()</code>, The solution I was seeking, was I wanted a <code>/refresh</code> end-point which will refresh my bean to do that I followed the following steps -</p>\n<ol>\n<li><p>I Autowired the <code>ConfigurableApplicationContext </code><br />\n<code>@Autowired</code><br />\n<code>private ConfigurableApplicationContext context;</code></p>\n</li>\n<li><p>In the endpoint I initialized the bean -<br />\n<code>ReferenceClass bean = context.getBean(ReferenceClass.class);</code></p>\n</li>\n<li><p>Refreshed is using <code>.refresh()</code><br />\n<code>bean.refresh();</code></p>\n</li>\n</ol>\n<p>That's it, it solved my issue, once the user hits the <code>/refresh</code>  endpoint it refreshes my bean.</p>\n"}],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677063458,"creation_date":1676972026,"question_id":75518586,"body_markdown":"Right now I have an `InitialReferenceLoaderImpl` which is annotated by `@ApplicationScope` and the function is annotated by `@PostConstruct`, in this class I&#39;m loading my `Application Properties` from the SQL table, but the problem is, If users change something on `Application Properties` table, it does not get reflected directly, User needs to restart the server, which I don&#39;t want.\r\n\r\nI want the user to hit the `/refresh` URL so that `Application Properties` can be reloaded.\r\n\r\nSorry for the confusing explanation.","title":"How to add Refresh trigger to a class which is annotated with @ApplicationScope","body":"<p>Right now I have an <code>InitialReferenceLoaderImpl</code> which is annotated by <code>@ApplicationScope</code> and the function is annotated by <code>@PostConstruct</code>, in this class I'm loading my <code>Application Properties</code> from the SQL table, but the problem is, If users change something on <code>Application Properties</code> table, it does not get reflected directly, User needs to restart the server, which I don't want.</p>\n<p>I want the user to hit the <code>/refresh</code> URL so that <code>Application Properties</code> can be reloaded.</p>\n<p>Sorry for the confusing explanation.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":18868507,"reputation":980,"user_id":13763713,"display_name":"oliver_t"},"score":1,"creation_date":1677063396,"post_id":75531657,"comment_id":133262041,"body_markdown":"At which time do you want to define the URL? During build time, during server startup or dynamically (then it&#39;s not static)? Maybe look at Maven variable replacement:\nhttps://stackoverflow.com/questions/68908150/maven-filtering-replacement-of-variables","body":"At which time do you want to define the URL? During build time, during server startup or dynamically (then it&#39;s not static)? Maybe look at Maven variable replacement: <a href=\"https://stackoverflow.com/questions/68908150/maven-filtering-replacement-of-variables\" title=\"maven filtering replacement of variables\">stackoverflow.com/questions/68908150/&hellip;</a>"},{"owner":{"account_id":17976055,"reputation":1,"user_id":13066146,"display_name":"hoiskipoiski"},"score":0,"creation_date":1677150291,"post_id":75531657,"comment_id":133282680,"body_markdown":"I needed it in build time, but i have resolved it myself. I had an OpenAPI.yaml spec file which i wanted to use to generate the swagger ui and i thought i had to insert the server url into the yaml file, but now im using redoc and just serve a static html file which uses redoc to create an openapi documentation.","body":"I needed it in build time, but i have resolved it myself. I had an OpenAPI.yaml spec file which i wanted to use to generate the swagger ui and i thought i had to insert the server url into the yaml file, but now im using redoc and just serve a static html file which uses redoc to create an openapi documentation."}],"owner":{"account_id":17976055,"reputation":1,"user_id":13066146,"display_name":"hoiskipoiski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677062975,"creation_date":1677062975,"question_id":75531657,"body_markdown":"I would like to know if there is a way I can insert the url of a spring boot server into a static file?\r\n\r\nSo for example i have a file in my resources folder which i would like to write the server url into.","title":"Insert Spring Boot Server URL into static file","body":"<p>I would like to know if there is a way I can insert the url of a spring boot server into a static file?</p>\n<p>So for example i have a file in my resources folder which i would like to write the server url into.</p>\n"},{"tags":["java","reference"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677062675,"post_id":75531324,"comment_id":133261821,"body_markdown":"Variables and fields in Java hold references, not objects. `TreeNode curr = nodes.poll()` doesn&#39;t &quot;create a new object&quot;, it&#39;ll just assign a reference to an existing one to `curr`.","body":"Variables and fields in Java hold references, not objects. <code>TreeNode curr = nodes.poll()</code> doesn&#39;t &quot;create a new object&quot;, it&#39;ll just assign a reference to an existing one to <code>curr</code>."}],"owner":{"account_id":27849866,"reputation":19,"user_id":21264583,"display_name":"Cam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677062762,"answer_count":0,"score":0,"last_activity_date":1677062693,"creation_date":1677061460,"question_id":75531324,"body_markdown":"I create a new object, curr, and set it equal to root (by polling a Queue). When I change the attributes of curr, root *also* changes. \r\n\r\nHowever, the same does not happen when I create a new object temp and set it to curr.left. When I change the value of curr.left, temp *doesn&#39;t* change. Can someone explain this to me? Why is curr being treated like the same object as root, but temp is being treated like a copy of curr.left?\r\n\r\n```\r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        \r\n        if( root == null )\r\n        {\r\n            return root;\r\n        }\r\n\r\n        Queue&lt;TreeNode&gt; nodes = new LinkedList&lt;TreeNode&gt;();\r\n\r\n        nodes.add( root );\r\n\r\n        while( !nodes.isEmpty() )\r\n        {\r\n            TreeNode curr = nodes.poll();\r\n\r\n            TreeNode temp = curr.left;\r\n            curr.left = curr.right;\r\n            curr.right = temp;\r\n\r\n            if( curr.right != null )\r\n            {\r\n                nodes.add( curr.right );\r\n            }\r\n\r\n            if( curr.left != null )\r\n            {\r\n                nodes.add( curr.left );\r\n            }\r\n            \r\n\r\n\r\n        }\r\n\r\n        return root;\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried to make a temporary value, temp to store the value at curr.left so I could swap curr.left with curr.right. This worked fine. However, it confused me because when copying over the object root, I was able to modify the object root with the object curr.","title":"Can someone explain why &quot;root&quot; changes when &quot;curr&quot; changes, but &quot;temp&quot; does not change when &quot;curr.left&quot; changes?","body":"<p>I create a new object, curr, and set it equal to root (by polling a Queue). When I change the attributes of curr, root <em>also</em> changes.</p>\n<p>However, the same does not happen when I create a new object temp and set it to curr.left. When I change the value of curr.left, temp <em>doesn't</em> change. Can someone explain this to me? Why is curr being treated like the same object as root, but temp is being treated like a copy of curr.left?</p>\n<pre><code>class Solution {\n    public TreeNode invertTree(TreeNode root) {\n        \n        if( root == null )\n        {\n            return root;\n        }\n\n        Queue&lt;TreeNode&gt; nodes = new LinkedList&lt;TreeNode&gt;();\n\n        nodes.add( root );\n\n        while( !nodes.isEmpty() )\n        {\n            TreeNode curr = nodes.poll();\n\n            TreeNode temp = curr.left;\n            curr.left = curr.right;\n            curr.right = temp;\n\n            if( curr.right != null )\n            {\n                nodes.add( curr.right );\n            }\n\n            if( curr.left != null )\n            {\n                nodes.add( curr.left );\n            }\n            \n\n\n        }\n\n        return root;\n\n\n\n    }\n}\n</code></pre>\n<p>I tried to make a temporary value, temp to store the value at curr.left so I could swap curr.left with curr.right. This worked fine. However, it confused me because when copying over the object root, I was able to modify the object root with the object curr.</p>\n"},{"tags":["java","android","xml","manifest"],"answers":[{"tags":[],"owner":{"account_id":20801799,"reputation":33,"user_id":15277661,"display_name":"Mohammed Amine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676653550,"creation_date":1676653550,"answer_id":75487262,"question_id":75487063,"body_markdown":"In API 30 and plus , it uses the java code more than manifest file and xml files \r\nuse onStart and onStop method and add intent inside and use this.register(obj claa of reciever) and unregister on stop method","title":"service and manifest files","body":"<p>In API 30 and plus , it uses the java code more than manifest file and xml files\nuse onStart and onStop method and add intent inside and use this.register(obj claa of reciever) and unregister on stop method</p>\n"},{"tags":[],"owner":{"account_id":7246559,"reputation":529,"user_id":5528269,"display_name":"Sina Rezaei"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677062622,"creation_date":1677062622,"answer_id":75531577,"question_id":75487063,"body_markdown":"From the official android docs :\r\n\r\nhttps://developer.android.com/guide/components/broadcast-exceptions\r\n&gt; As part of the Android 8.0 (API level 26) Background Execution Limits,\r\n&gt; apps that target the API level 26 or higher can no longer register\r\n&gt; broadcast receivers for implicit broadcasts in their manifest.\r\n&gt; However, several broadcasts are currently exempted from these\r\n&gt; limitations. Apps can continue to register listeners for the following\r\n&gt; broadcasts, no matter what API level the apps target.\r\n\r\n\r\nSo **&quot;android.intent.action.AIRPLANE_MODE&quot;** is no longer in the list of exempted broadcasts. You cannot receive the broadcast from a broadcast receiver. So you must register your broadcast receiver in activity rather than in AndroidManifest.","title":"service and manifest files","body":"<p>From the official android docs :</p>\n<p><a href=\"https://developer.android.com/guide/components/broadcast-exceptions\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/components/broadcast-exceptions</a></p>\n<blockquote>\n<p>As part of the Android 8.0 (API level 26) Background Execution Limits,\napps that target the API level 26 or higher can no longer register\nbroadcast receivers for implicit broadcasts in their manifest.\nHowever, several broadcasts are currently exempted from these\nlimitations. Apps can continue to register listeners for the following\nbroadcasts, no matter what API level the apps target.</p>\n</blockquote>\n<p>So <strong>&quot;android.intent.action.AIRPLANE_MODE&quot;</strong> is no longer in the list of exempted broadcasts. You cannot receive the broadcast from a broadcast receiver. So you must register your broadcast receiver in activity rather than in AndroidManifest.</p>\n"}],"owner":{"account_id":20801799,"reputation":33,"user_id":15277661,"display_name":"Mohammed Amine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677062622,"creation_date":1676652407,"question_id":75487063,"body_markdown":"i wrote this code in android studio , it wont show me the toast message :\r\nhere is the manifest file :\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyApplication&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;receiver android:name=&quot;.BoradCastReciever&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.AIRPLANE_MODE&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\nand here is the java code class reciever :\r\n```\r\npackage com.mohapp.myapplication;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.widget.Toast;\r\npublic class BoradCastReciever extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        boolean is_on = intent.getBooleanExtra(&quot;air&quot;, false);\r\n        if (is_on == true) {\r\n            Toast.makeText(context, &quot;Air Plane mode is on&quot;, Toast.LENGTH_LONG).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Air Plane mode is false&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n}\r\n```\r\ni am using API 33 with Gradle version 7.5 and Embedd JDK(jdk 11)","title":"service and manifest files","body":"<p>i wrote this code in android studio , it wont show me the toast message :\nhere is the manifest file :</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver android:name=&quot;.BoradCastReciever&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.AIRPLANE_MODE&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>and here is the java code class reciever :</p>\n<pre><code>package com.mohapp.myapplication;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.widget.Toast;\npublic class BoradCastReciever extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        boolean is_on = intent.getBooleanExtra(&quot;air&quot;, false);\n        if (is_on == true) {\n            Toast.makeText(context, &quot;Air Plane mode is on&quot;, Toast.LENGTH_LONG).show();\n        }else{\n            Toast.makeText(context, &quot;Air Plane mode is false&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n}\n</code></pre>\n<p>i am using API 33 with Gradle version 7.5 and Embedd JDK(jdk 11)</p>\n"},{"tags":["java","spring","opencv","video-streaming"],"comments":[{"owner":{"account_id":8689433,"reputation":371,"user_id":6502726,"accept_rate":20,"display_name":"Vishnu Moorthy Kanagaraj"},"score":0,"creation_date":1578905706,"post_id":54055728,"comment_id":105577542,"body_markdown":"I also have the same issue. Kindly share if did you get any idea regarding this. Thanks.","body":"I also have the same issue. Kindly share if did you get any idea regarding this. Thanks."}],"owner":{"account_id":3087042,"reputation":131,"user_id":2613986,"accept_rate":64,"display_name":"0xDEADBEEF"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":931,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677062555,"creation_date":1546718226,"question_id":54055728,"body_markdown":"I have an IP camera with video stream in H.264 via rtsp. I want to frame this video stream and analyze the image using OpenCV in the spring-boot application (which will be launched in the docker container), and then relay this video stream to the browser, for example, through WebRTC.\r\n\r\n                                  +-------------------------------+\r\n                                  |                               |\r\n    +----------------+            | Spring-boot application       |\r\n    |                |            |         (java)                |\r\n    |   IP-CAM       |            |                               |\r\n    |   in H.264     | +-------&gt;  +----------+---------+----------+\r\n    |   on rtsp://   |            |          |         |          |\r\n    |                |            |  H.264   |OpenCV   |  WebRTC  |\r\n    +----------------+            | decoder  |analysis |          |\r\n                                  +--------------------+----------+\r\n\r\n\r\nI ask for hints with the software stack of my application. I do not want to separate the decoding and analysis logic into different software components (for example, decode using ffmpeg) and I want to have maximum freedom from the system environment (ideally, the entire application should be in the same docker container). I&#39;m just starting to work with video streams in java, for this I ask for help in choosing libraries and ready-made solutions.\r\n","title":"Decode &amp; analyze video stream in spring-boot application","body":"<p>I have an IP camera with video stream in H.264 via rtsp. I want to frame this video stream and analyze the image using OpenCV in the spring-boot application (which will be launched in the docker container), and then relay this video stream to the browser, for example, through WebRTC.</p>\n\n<pre><code>                              +-------------------------------+\n                              |                               |\n+----------------+            | Spring-boot application       |\n|                |            |         (java)                |\n|   IP-CAM       |            |                               |\n|   in H.264     | +-------&gt;  +----------+---------+----------+\n|   on rtsp://   |            |          |         |          |\n|                |            |  H.264   |OpenCV   |  WebRTC  |\n+----------------+            | decoder  |analysis |          |\n                              +--------------------+----------+\n</code></pre>\n\n<p>I ask for hints with the software stack of my application. I do not want to separate the decoding and analysis logic into different software components (for example, decode using ffmpeg) and I want to have maximum freedom from the system environment (ideally, the entire application should be in the same docker container). I'm just starting to work with video streams in java, for this I ask for help in choosing libraries and ready-made solutions.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":1,"creation_date":1663605542,"post_id":73774321,"comment_id":130274275,"body_markdown":"I think your bug might have to do with the ``compress`` method you use. From the docs: ``This method may take several seconds to complete, so it should only be called from a worker thread.`` &quot;I can see decoded Image inside debugger&quot; -&gt; What do you see in the debugger?","body":"I think your bug might have to do with the <code>compress</code> method you use. From the docs: <code>This method may take several seconds to complete, so it should only be called from a worker thread.</code> &quot;I can see decoded Image inside debugger&quot; -&gt; What do you see in the debugger?"},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1663614461,"post_id":73774321,"comment_id":130277058,"body_markdown":"@JornRigter I&#39;ve updated my question with screenshot of debug situation.","body":"@JornRigter I&#39;ve updated my question with screenshot of debug situation."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":1,"creation_date":1664955616,"post_id":73774321,"comment_id":130584483,"body_markdown":"Why not do an extra check on the compressed bitmap to check either it&#39;s null or not. Seems like the culprit is somewhere there. What happen if you set a small bitmap without the need to compress?","body":"Why not do an extra check on the compressed bitmap to check either it&#39;s null or not. Seems like the culprit is somewhere there. What happen if you set a small bitmap without the need to compress?"},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1665038011,"post_id":73774321,"comment_id":130606208,"body_markdown":"@Darkman I&#39;ve updated my question, have checked the image, it is ok! Honestly, I do not know what to do anymore ...","body":"@Darkman I&#39;ve updated my question, have checked the image, it is ok! Honestly, I do not know what to do anymore ..."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1665039751,"post_id":73774321,"comment_id":130606697,"body_markdown":"My last suggestions would be 1) Check how many times `updatePlantPhoto()` is called? 2) `onResume()` might be called multiple times. 3) If with a small image let say 32x32 without compression still giving you the problem, rather relies on debugger, relies on your own code instead. 4) If all fails, `imgBtnPhoto` is certainly gets refresh somewhere maybe during a transition between the activity and fragment.","body":"My last suggestions would be 1) Check how many times <code>updatePlantPhoto()</code> is called? 2) <code>onResume()</code> might be called multiple times. 3) If with a small image let say 32x32 without compression still giving you the problem, rather relies on debugger, relies on your own code instead. 4) If all fails, <code>imgBtnPhoto</code> is certainly gets refresh somewhere maybe during a transition between the activity and fragment."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1665044576,"post_id":73774321,"comment_id":130608213,"body_markdown":"Eurika!. I think I know the problem is. It is `setImageBitmap()`. To use it, you must use `android:src` in the xmls e.g. `android:src=&quot;@drawable/android&quot;` and use `setBackground()` if you&#39;re using `android:background`  e.g. `android:background=&quot;@drawable/android&quot;`. `android:src` for foreground images and `android:background` for background images. So use `setBackground()` if you want to modify `android:backround`.","body":"Eurika!. I think I know the problem is. It is <code>setImageBitmap()</code>. To use it, you must use <code>android:src</code> in the xmls e.g. <code>android:src=&quot;@drawable&#47;android&quot;</code> and use <code>setBackground()</code> if you&#39;re using <code>android:background</code>  e.g. <code>android:background=&quot;@drawable&#47;android&quot;</code>. <code>android:src</code> for foreground images and <code>android:background</code> for background images. So use <code>setBackground()</code> if you want to modify <code>android:backround</code>."},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1665127043,"post_id":73774321,"comment_id":130630925,"body_markdown":"@Darkman, I&#39;ve tried you previous ideas, updated question, however for me, nothing works! I am getting desperate ...","body":"@Darkman, I&#39;ve tried you previous ideas, updated question, however for me, nothing works! I am getting desperate ..."}],"answers":[{"tags":[],"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677062508,"creation_date":1677062508,"answer_id":75531546,"question_id":73774321,"body_markdown":"There was a problem with `Fragment`s transitions, I&#39;ve rewritten transition code using [Navigation Component][1].\r\n\r\n\r\n  [1]: https://developer.android.com/guide/navigation/navigation-getting-started","title":"ImageButton image not shown/updated at runtime after fragment transition","body":"<p>There was a problem with <code>Fragment</code>s transitions, I've rewritten transition code using <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started\" rel=\"nofollow noreferrer\">Navigation Component</a>.</p>\n"}],"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75531546,"answer_count":1,"score":1,"last_activity_date":1677062508,"creation_date":1663594804,"question_id":73774321,"body_markdown":"I am working on some [Android app][1] with single [Activity][2], named `MainActivity` and several [Fragments][3]. Now, through application usage at some point the application fetches images from target device local storage and shows them for selection in `PhotoPickerFragment`, like shown in following screenshot:\r\n[![Image selection fragment][4]][4]\r\n  `PhotoPickerFragment` also has its `PhotoPickerAdapter` for showing contents in [GridView][5]. To transfer selected image between `Fragments` I have written following chunk of code inside [`PhotoPickerAdapter`&#39;s ArrayAdapter getView() method][6] :\r\n\r\n    public View getView(int position,\r\n        @Nullable View convertView,\r\n        @NonNull ViewGroup parent)\r\n    {\r\n        PhotoPickerRecord photoPickerRecord=getItem(position);\r\n    \r\n        if(convertView==null)\r\n        {\r\n            LayoutInflater inflater=(LayoutInflater)parent.getContext().\r\n                getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \r\n            convertView=inflater.inflate(R.layout.layout_photo_picker_delegate,\r\n                parent,\r\n                false);\r\n        }\r\n    \r\n        ImageView ivPhotoPickerDelegate=convertView.findViewById(R.id.ivPhotoPickerDelegate);\r\n    \r\n        ivPhotoPickerDelegate.setImageBitmap(photoPickerRecord.scaledPhoto);\r\n        ivPhotoPickerDelegate.setOnClickListener(v-&gt;\r\n        {\r\n            MainActivity mainActivity=(MainActivity)getContext();\r\n            NewPlantFragment newPlantFragment=(NewPlantFragment)mainActivity.getNewPlantFragment();\r\n            Bundle selectedRecordBundle=new Bundle();\r\n            ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\r\n            String encodedSelectedPhoto=new String();\r\n    \r\n            selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_URI_KEY,\r\n                photoPickerRecord.uri.toString());\r\n    \r\n            photoPickerRecord.scaledPhoto.compress(Bitmap.CompressFormat.PNG,\r\n                100,\r\n                selectedPhotoStream);\r\n            encodedSelectedPhoto=Base64.encodeToString(selectedPhotoStream.toByteArray(),\r\n                Base64.DEFAULT);\r\n    \r\n            selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY,\r\n                encodedSelectedPhoto);\r\n            newPlantFragment.setArguments(selectedRecordBundle);\r\n            mainActivity.switchToScreen(newPlantFragment);\r\n        });\r\n    \r\n        return convertView;\r\n    }\r\n\r\nSelected image is, as you can see, packed into [Bundle][7] and then `Fragment` switch (from `PhotoPickerFragment` to `NewPlantFragment`) occurs. Target `NewPlantFragment` has declared target [ImageButton][8] in it (red background is for test purposes only, will be removed):\r\n\r\n&lt;ImageButton\r\n    android:id=&quot;@+id/ibPhoto&quot;\r\n    android:layout_width=&quot;256dp&quot;\r\n    android:layout_height=&quot;256dp&quot;\r\n    android:background=&quot;@color/red&quot;\r\n    android:contentDescription=&quot;@string/plant_photo&quot;\r\n    android:scaleType=&quot;fitCenter&quot;\r\n    android:visibility=&quot;visible&quot;\r\n    tools:src=&quot;@tools:sample/backgrounds/scenic[11]&quot; /&gt;\r\n\r\nas you can also see from screenshot:\r\n[![Android Studio `ImageButton` declaration screenshot][9]][9]\r\n  Now, after fragment switcing, [NewPlantFragment.OnResume() is called][3]:\r\n\r\n    @Override\r\n    public void onResume()\r\n    {\r\n        super.onResume();\r\n    \r\n        this.updatePlantPhoto(this.getArguments());\r\n    }\r\n\r\nand them we apply transfered image to `ibPhoto` `ImageButton` in `updatePlantPhoto` method:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle)\r\n    {\r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_URI_KEY)&amp;&amp;\r\n                    (plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)))\r\n            {\r\n                byte[] selectedPlantPhotoByteArray=Base64.decode(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY),\r\n                        Base64.DEFAULT);\r\n                Bitmap reconstructedSelectedPlantPhoto=BitmapFactory.decodeByteArray(selectedPlantPhotoByteArray,\r\n                        0,\r\n                        selectedPlantPhotoByteArray.length);\r\n    \r\n                this.imgBtnPhoto.setImageBitmap(reconstructedSelectedPlantPhoto);\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }\r\nHowever, the `ibPhoto` `ImageButton` is not updated, there is still red rectangle with no image visible as you can se from screenshot:\r\n[![Image not updated screenshot][10]][10]\r\nNow, I&#39;ve been trying to debug this problem and in debug process, I can see the selected image is decoded correctly with help of `Android Studio`, I can see decoded Image inside debugger. Why the `ImageButton`&#39;s image is not updated?\r\n\r\n**UPDATE 1**\r\n\r\nOn request on @JornRigter, I am sending screenshot of debug situation with breakpoint:\r\n[![Debug situation][11]][11]\r\nAs you can see, selected image is decoded.\r\n\r\n**UPDATE 2**\r\n\r\nI have moved all image processing and images loading to [AsyncTask][12]&#39;s and therefore introduced `PhotoDecoder` and `PhotoEncoder`:\r\n\r\n    package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\r\n    \r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.os.AsyncTask;\r\n    import android.util.Base64;\r\n    \r\n    public class PhotoDecoder extends AsyncTask&lt;String, Void, Bitmap&gt;\r\n    {\r\n        private static final String TAG=PhotoDecoder.class.getSimpleName();\r\n    \r\n        public PhotoDecoder()\r\n        {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        protected Bitmap doInBackground(String... selectedImages)\r\n        {\r\n            byte[] selectedImageByteArray=Base64.decode(selectedImages[0],\r\n                Base64.DEFAULT);\r\n            Bitmap reconstructedImage=BitmapFactory.decodeByteArray(selectedImageByteArray,\r\n                0,\r\n                selectedImageByteArray.length);\r\n    \r\n            return reconstructedImage;\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute(Bitmap reconstructedImage)\r\n        {\r\n            super.onPostExecute(reconstructedImage);\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\r\n    \r\n    import android.graphics.Bitmap;\r\n    import android.os.AsyncTask;\r\n    import android.util.Base64;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    \r\n    public class PhotoEncoder extends AsyncTask&lt;PhotoPickerRecord, Void, String&gt;\r\n    {\r\n        private static final String TAG=PhotoEncoder.class.getSimpleName();\r\n    \r\n        public PhotoEncoder()\r\n        {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        protected String doInBackground(PhotoPickerRecord... photoPickerRecords)\r\n        {\r\n            ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\r\n    \r\n            photoPickerRecords[0].scaledPhoto.compress(Bitmap.CompressFormat.PNG,\r\n                100,\r\n                selectedPhotoStream);\r\n    \r\n            return Base64.encodeToString(selectedPhotoStream.toByteArray(),\r\n                Base64.DEFAULT);\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute(String finalImage)\r\n        {\r\n            super.onPostExecute(finalImage);\r\n        }\r\n    }\r\nand I&#39;ve triple checked with debugger, they both work fine. I&#39;ve also moved images loading into `PhotoPickerAdapter` into `AsyncTask`, so GUI is not blocked anymore and I can show `ProgressFragment`, but this is not the topic right now:\r\n\r\n    public void populateAdapter()\r\n    {\r\n        PhotosLoadingFragment photosLoadingFragment=PhotosLoadingFragment.newInstance();\r\n    \r\n        class PhotoLoader extends AsyncTask&lt;Void, Void, ArrayList&lt;PhotoPickerRecord&gt;&gt;\r\n        {\r\n            private final String TAG=PhotoLoader.class.getSimpleName();\r\n    \r\n            private final String CAMERA_IMAGE_BUCKET_NAME=Environment.\r\n                getExternalStorageDirectory().\r\n                getPath()+\r\n                &quot;/DCIM/Camera&quot;;\r\n            private final String CAMERA_IMAGE_BUCKET_ID=\r\n                getBucketId(CAMERA_IMAGE_BUCKET_NAME);\r\n    \r\n            @Override\r\n            protected ArrayList&lt;PhotoPickerRecord&gt; doInBackground(Void... voids)\r\n            {\r\n                ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource=new ArrayList&lt;&gt;();\r\n                final String[] projection=\r\n                    {\r\n                        MediaStore.Images.Media.DATA\r\n                    };\r\n                final String selection=MediaStore.Images.Media.BUCKET_ID+&quot;=?&quot;;\r\n                final String[] selectionArgs=\r\n                    {\r\n                        CAMERA_IMAGE_BUCKET_ID\r\n                    };\r\n                final Cursor cursor=getContext().\r\n                    getContentResolver().\r\n                    query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\r\n                    projection,\r\n                    selection,\r\n                    selectionArgs,\r\n                    null);\r\n    \r\n                if(cursor.moveToFirst())\r\n                {\r\n                    final int dataColumn=cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\r\n    \r\n                    do\r\n                    {\r\n                        final String data=cursor.getString(dataColumn);\r\n                        PhotoPickerRecord photoPickerRecord=new PhotoPickerRecord();\r\n    \r\n                        photoPickerRecord.uri=Uri.parse(data);\r\n                        photoPickerRecord.scaledPhoto=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(photoPickerRecord.uri.getPath()),\r\n                            256,\r\n                            256);\r\n    \r\n                        imagesDataSource.add(photoPickerRecord);\r\n                    } while(cursor.moveToNext());\r\n                }\r\n    \r\n                cursor.close();\r\n    \r\n                return imagesDataSource;\r\n            }\r\n    \r\n            @Override\r\n            protected void onPreExecute()\r\n            {\r\n                photosLoadingFragment.show(parentFragmentManager,\r\n                    null);\r\n            }\r\n    \r\n            @Override\r\n            protected void onPostExecute(ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource)\r\n            {\r\n                clear();\r\n                addAll(imagesDataSource);\r\n                photosLoadingFragment.dismiss();\r\n            }\r\n    \r\n            @NonNull\r\n            private String getBucketId(@NonNull final String path)\r\n            {\r\n                return String.valueOf(path.toLowerCase().hashCode());\r\n            }\r\n        }\r\n    \r\n        new PhotoLoader().execute();\r\n    }\r\nNow, after `Fragment` transition in target&#39;s fragment [onResume][13], the target [ImageButton][8]&#39;s image is changed with method `updatePlantPhoto()`:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\r\n    {\r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n            {\r\n                this.imgBtnPhoto.setImageBitmap(new PhotoDecoder().\r\n                    execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)).\r\n                    get());\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }\r\nI&#39;ve also triple checked `Fragment`&#39;s arguments and the image indeed is contained in [Fragment&#39;s Bundle][7]. Here is also target&#39;s `Fragment` `onResume()` method:\r\n\r\n    @Override\r\n    public void onResume()\r\n    {\r\n        super.onResume();\r\n    \r\n        try\r\n        {\r\n            this.updatePlantPhoto(this.getArguments());\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\nand `ImageButton`&#39;s is still not changed. WHY?!?!?!?!\r\n  \r\n**UPDATE 3**\r\n\r\nAccording to @Darkman hint, I&#39;ve checked the selected image - it is ok. After all background tasks, the selected image arrives into target `Fragment` via [Bundle][7] and is seen and ok in debugger, as you can see from screenshot:\r\n[![Debugger breakpoint of checking the selected image][14]][14]\r\n  \r\n**UPDATE 4**  \r\nI have also checked selecting following image types:\r\n\r\n - [BMP][15]\r\n - [JPG][16]\r\n - [GIF][17]\r\n - [HEIC][18]  \r\n\r\nNone of them works, selected image still not shown.  \r\n\r\n**UPDATE 5**  \r\nAccording to @Darkman hint, here are conclusions:\r\n\r\n - `updatePlantPhoto()` gets called 2 times\r\n - `onResume()` gets called 2 times also  \r\n\r\nwhich is ok. I&#39;ve uploaded some small `32x32` and `64x64` icons to phone and when I select each of them, the selected image is still not shown. How to check refresh?  \r\n**UPDATE 6**  \r\nOnce again according to user @Darkman&#39;s hint, I&#39;ve tried:\r\n\r\n - [SetBackground()][19]\r\n - [SetForeground()][20]  \r\n\r\nwith following code:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\r\n    {\r\n        Bitmap selectedPhoto=null;\r\n        BitmapDrawable selectedPhotoDrawable=null;\r\n    \r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n            {\r\n                try\r\n                {\r\n                    selectedPhoto=new PhotoDecoder().execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n                        .get();\r\n                    selectedPhotoDrawable=new BitmapDrawable(getResources(),\r\n                        selectedPhoto);\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n                this.ibPhotoSelector.setForeground(selectedPhotoDrawable);\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }  \r\nAgain, in the debugger everyhing is ok. Nothing works!\r\n\r\n\r\n  [1]: https://developer.android.com/about\r\n  [2]: https://developer.android.com/reference/android/app/Activity\r\n  [3]: https://developer.android.com/reference/android/app/Fragment\r\n  [4]: https://i.stack.imgur.com/QlSOb.jpg\r\n  [5]: https://developer.android.com/reference/android/widget/GridView\r\n  [6]: https://developer.android.com/reference/android/widget/ArrayAdapter?hl=en#getView(int,%20android.view.View,%20android.view.ViewGroup)\r\n  [7]: https://developer.android.com/reference/android/os/Bundle\r\n  [8]: https://developer.android.com/reference/android/widget/ImageButton\r\n  [9]: https://i.stack.imgur.com/W9qhn.png\r\n  [10]: https://i.stack.imgur.com/clW04.jpg\r\n  [11]: https://i.stack.imgur.com/RkhJU.png\r\n  [12]: https://developer.android.com/reference/android/os/AsyncTask\r\n  [13]: https://developer.android.com/reference/android/app/Fragment#onResume()\r\n  [14]: https://i.stack.imgur.com/Ya6gA.png\r\n  [15]: https://en.wikipedia.org/wiki/BMP_file_format\r\n  [16]: https://en.wikipedia.org/wiki/JPEG\r\n  [17]: https://en.wikipedia.org/wiki/GIF\r\n  [18]: https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format#HEIC:_HEVC_in_HEIF\r\n  [19]: https://developer.android.com/reference/android/view/View#setBackground(android.graphics.drawable.Drawable)\r\n  [20]: https://developer.android.com/reference/android/view/View#setForeground(android.graphics.drawable.Drawable)","title":"ImageButton image not shown/updated at runtime after fragment transition","body":"<p>I am working on some <a href=\"https://developer.android.com/about\" rel=\"nofollow noreferrer\">Android app</a> with single <a href=\"https://developer.android.com/reference/android/app/Activity\" rel=\"nofollow noreferrer\">Activity</a>, named <code>MainActivity</code> and several <a href=\"https://developer.android.com/reference/android/app/Fragment\" rel=\"nofollow noreferrer\">Fragments</a>. Now, through application usage at some point the application fetches images from target device local storage and shows them for selection in <code>PhotoPickerFragment</code>, like shown in following screenshot:\n<a href=\"https://i.stack.imgur.com/QlSOb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QlSOb.jpg\" alt=\"Image selection fragment\" /></a>\n<code>PhotoPickerFragment</code> also has its <code>PhotoPickerAdapter</code> for showing contents in <a href=\"https://developer.android.com/reference/android/widget/GridView\" rel=\"nofollow noreferrer\">GridView</a>. To transfer selected image between <code>Fragments</code> I have written following chunk of code inside <a href=\"https://developer.android.com/reference/android/widget/ArrayAdapter?hl=en#getView(int,%20android.view.View,%20android.view.ViewGroup)\" rel=\"nofollow noreferrer\"><code>PhotoPickerAdapter</code>'s ArrayAdapter getView() method</a> :</p>\n<pre><code>public View getView(int position,\n    @Nullable View convertView,\n    @NonNull ViewGroup parent)\n{\n    PhotoPickerRecord photoPickerRecord=getItem(position);\n\n    if(convertView==null)\n    {\n        LayoutInflater inflater=(LayoutInflater)parent.getContext().\n            getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n        convertView=inflater.inflate(R.layout.layout_photo_picker_delegate,\n            parent,\n            false);\n    }\n\n    ImageView ivPhotoPickerDelegate=convertView.findViewById(R.id.ivPhotoPickerDelegate);\n\n    ivPhotoPickerDelegate.setImageBitmap(photoPickerRecord.scaledPhoto);\n    ivPhotoPickerDelegate.setOnClickListener(v-&gt;\n    {\n        MainActivity mainActivity=(MainActivity)getContext();\n        NewPlantFragment newPlantFragment=(NewPlantFragment)mainActivity.getNewPlantFragment();\n        Bundle selectedRecordBundle=new Bundle();\n        ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\n        String encodedSelectedPhoto=new String();\n\n        selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_URI_KEY,\n            photoPickerRecord.uri.toString());\n\n        photoPickerRecord.scaledPhoto.compress(Bitmap.CompressFormat.PNG,\n            100,\n            selectedPhotoStream);\n        encodedSelectedPhoto=Base64.encodeToString(selectedPhotoStream.toByteArray(),\n            Base64.DEFAULT);\n\n        selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY,\n            encodedSelectedPhoto);\n        newPlantFragment.setArguments(selectedRecordBundle);\n        mainActivity.switchToScreen(newPlantFragment);\n    });\n\n    return convertView;\n}\n</code></pre>\n<p>Selected image is, as you can see, packed into <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Bundle</a> and then <code>Fragment</code> switch (from <code>PhotoPickerFragment</code> to <code>NewPlantFragment</code>) occurs. Target <code>NewPlantFragment</code> has declared target <a href=\"https://developer.android.com/reference/android/widget/ImageButton\" rel=\"nofollow noreferrer\">ImageButton</a> in it (red background is for test purposes only, will be removed):</p>\n<p></p>\n<p>as you can also see from screenshot:\n<a href=\"https://i.stack.imgur.com/W9qhn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W9qhn.png\" alt=\"Android Studio ImageButton declaration screenshot\" /></a>\nNow, after fragment switcing, <a href=\"https://developer.android.com/reference/android/app/Fragment\" rel=\"nofollow noreferrer\">NewPlantFragment.OnResume() is called</a>:</p>\n<pre><code>@Override\npublic void onResume()\n{\n    super.onResume();\n\n    this.updatePlantPhoto(this.getArguments());\n}\n</code></pre>\n<p>and them we apply transfered image to <code>ibPhoto</code> <code>ImageButton</code> in <code>updatePlantPhoto</code> method:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle)\n{\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_URI_KEY)&amp;&amp;\n                (plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)))\n        {\n            byte[] selectedPlantPhotoByteArray=Base64.decode(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY),\n                    Base64.DEFAULT);\n            Bitmap reconstructedSelectedPlantPhoto=BitmapFactory.decodeByteArray(selectedPlantPhotoByteArray,\n                    0,\n                    selectedPlantPhotoByteArray.length);\n\n            this.imgBtnPhoto.setImageBitmap(reconstructedSelectedPlantPhoto);\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}\n</code></pre>\n<p>However, the <code>ibPhoto</code> <code>ImageButton</code> is not updated, there is still red rectangle with no image visible as you can se from screenshot:\n<a href=\"https://i.stack.imgur.com/clW04.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/clW04.jpg\" alt=\"Image not updated screenshot\" /></a>\nNow, I've been trying to debug this problem and in debug process, I can see the selected image is decoded correctly with help of <code>Android Studio</code>, I can see decoded Image inside debugger. Why the <code>ImageButton</code>'s image is not updated?</p>\n<p><strong>UPDATE 1</strong></p>\n<p>On request on @JornRigter, I am sending screenshot of debug situation with breakpoint:\n<a href=\"https://i.stack.imgur.com/RkhJU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RkhJU.png\" alt=\"Debug situation\" /></a>\nAs you can see, selected image is decoded.</p>\n<p><strong>UPDATE 2</strong></p>\n<p>I have moved all image processing and images loading to <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">AsyncTask</a>'s and therefore introduced <code>PhotoDecoder</code> and <code>PhotoEncoder</code>:</p>\n<pre><code>package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\n\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.os.AsyncTask;\nimport android.util.Base64;\n\npublic class PhotoDecoder extends AsyncTask&lt;String, Void, Bitmap&gt;\n{\n    private static final String TAG=PhotoDecoder.class.getSimpleName();\n\n    public PhotoDecoder()\n    {\n        super();\n    }\n\n    @Override\n    protected Bitmap doInBackground(String... selectedImages)\n    {\n        byte[] selectedImageByteArray=Base64.decode(selectedImages[0],\n            Base64.DEFAULT);\n        Bitmap reconstructedImage=BitmapFactory.decodeByteArray(selectedImageByteArray,\n            0,\n            selectedImageByteArray.length);\n\n        return reconstructedImage;\n    }\n\n    @Override\n    protected void onPostExecute(Bitmap reconstructedImage)\n    {\n        super.onPostExecute(reconstructedImage);\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\n\nimport android.graphics.Bitmap;\nimport android.os.AsyncTask;\nimport android.util.Base64;\n\nimport java.io.ByteArrayOutputStream;\n\npublic class PhotoEncoder extends AsyncTask&lt;PhotoPickerRecord, Void, String&gt;\n{\n    private static final String TAG=PhotoEncoder.class.getSimpleName();\n\n    public PhotoEncoder()\n    {\n        super();\n    }\n\n    @Override\n    protected String doInBackground(PhotoPickerRecord... photoPickerRecords)\n    {\n        ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\n\n        photoPickerRecords[0].scaledPhoto.compress(Bitmap.CompressFormat.PNG,\n            100,\n            selectedPhotoStream);\n\n        return Base64.encodeToString(selectedPhotoStream.toByteArray(),\n            Base64.DEFAULT);\n    }\n\n    @Override\n    protected void onPostExecute(String finalImage)\n    {\n        super.onPostExecute(finalImage);\n    }\n}\n</code></pre>\n<p>and I've triple checked with debugger, they both work fine. I've also moved images loading into <code>PhotoPickerAdapter</code> into <code>AsyncTask</code>, so GUI is not blocked anymore and I can show <code>ProgressFragment</code>, but this is not the topic right now:</p>\n<pre><code>public void populateAdapter()\n{\n    PhotosLoadingFragment photosLoadingFragment=PhotosLoadingFragment.newInstance();\n\n    class PhotoLoader extends AsyncTask&lt;Void, Void, ArrayList&lt;PhotoPickerRecord&gt;&gt;\n    {\n        private final String TAG=PhotoLoader.class.getSimpleName();\n\n        private final String CAMERA_IMAGE_BUCKET_NAME=Environment.\n            getExternalStorageDirectory().\n            getPath()+\n            &quot;/DCIM/Camera&quot;;\n        private final String CAMERA_IMAGE_BUCKET_ID=\n            getBucketId(CAMERA_IMAGE_BUCKET_NAME);\n\n        @Override\n        protected ArrayList&lt;PhotoPickerRecord&gt; doInBackground(Void... voids)\n        {\n            ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource=new ArrayList&lt;&gt;();\n            final String[] projection=\n                {\n                    MediaStore.Images.Media.DATA\n                };\n            final String selection=MediaStore.Images.Media.BUCKET_ID+&quot;=?&quot;;\n            final String[] selectionArgs=\n                {\n                    CAMERA_IMAGE_BUCKET_ID\n                };\n            final Cursor cursor=getContext().\n                getContentResolver().\n                query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                projection,\n                selection,\n                selectionArgs,\n                null);\n\n            if(cursor.moveToFirst())\n            {\n                final int dataColumn=cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\n\n                do\n                {\n                    final String data=cursor.getString(dataColumn);\n                    PhotoPickerRecord photoPickerRecord=new PhotoPickerRecord();\n\n                    photoPickerRecord.uri=Uri.parse(data);\n                    photoPickerRecord.scaledPhoto=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(photoPickerRecord.uri.getPath()),\n                        256,\n                        256);\n\n                    imagesDataSource.add(photoPickerRecord);\n                } while(cursor.moveToNext());\n            }\n\n            cursor.close();\n\n            return imagesDataSource;\n        }\n\n        @Override\n        protected void onPreExecute()\n        {\n            photosLoadingFragment.show(parentFragmentManager,\n                null);\n        }\n\n        @Override\n        protected void onPostExecute(ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource)\n        {\n            clear();\n            addAll(imagesDataSource);\n            photosLoadingFragment.dismiss();\n        }\n\n        @NonNull\n        private String getBucketId(@NonNull final String path)\n        {\n            return String.valueOf(path.toLowerCase().hashCode());\n        }\n    }\n\n    new PhotoLoader().execute();\n}\n</code></pre>\n<p>Now, after <code>Fragment</code> transition in target's fragment <a href=\"https://developer.android.com/reference/android/app/Fragment#onResume()\" rel=\"nofollow noreferrer\">onResume</a>, the target <a href=\"https://developer.android.com/reference/android/widget/ImageButton\" rel=\"nofollow noreferrer\">ImageButton</a>'s image is changed with method <code>updatePlantPhoto()</code>:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\n{\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n        {\n            this.imgBtnPhoto.setImageBitmap(new PhotoDecoder().\n                execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)).\n                get());\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}\n</code></pre>\n<p>I've also triple checked <code>Fragment</code>'s arguments and the image indeed is contained in <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Fragment's Bundle</a>. Here is also target's <code>Fragment</code> <code>onResume()</code> method:</p>\n<pre><code>@Override\npublic void onResume()\n{\n    super.onResume();\n\n    try\n    {\n        this.updatePlantPhoto(this.getArguments());\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>and <code>ImageButton</code>'s is still not changed. WHY?!?!?!?!</p>\n<p><strong>UPDATE 3</strong></p>\n<p>According to @Darkman hint, I've checked the selected image - it is ok. After all background tasks, the selected image arrives into target <code>Fragment</code> via <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Bundle</a> and is seen and ok in debugger, as you can see from screenshot:\n<a href=\"https://i.stack.imgur.com/Ya6gA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ya6gA.png\" alt=\"Debugger breakpoint of checking the selected image\" /></a></p>\n<p><strong>UPDATE 4</strong><br />\nI have also checked selecting following image types:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/BMP_file_format\" rel=\"nofollow noreferrer\">BMP</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JPEG\" rel=\"nofollow noreferrer\">JPG</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/GIF\" rel=\"nofollow noreferrer\">GIF</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format#HEIC:_HEVC_in_HEIF\" rel=\"nofollow noreferrer\">HEIC</a></li>\n</ul>\n<p>None of them works, selected image still not shown.</p>\n<p><strong>UPDATE 5</strong><br />\nAccording to @Darkman hint, here are conclusions:</p>\n<ul>\n<li><code>updatePlantPhoto()</code> gets called 2 times</li>\n<li><code>onResume()</code> gets called 2 times also</li>\n</ul>\n<p>which is ok. I've uploaded some small <code>32x32</code> and <code>64x64</code> icons to phone and when I select each of them, the selected image is still not shown. How to check refresh?<br />\n<strong>UPDATE 6</strong><br />\nOnce again according to user @Darkman's hint, I've tried:</p>\n<ul>\n<li><a href=\"https://developer.android.com/reference/android/view/View#setBackground(android.graphics.drawable.Drawable)\" rel=\"nofollow noreferrer\">SetBackground()</a></li>\n<li><a href=\"https://developer.android.com/reference/android/view/View#setForeground(android.graphics.drawable.Drawable)\" rel=\"nofollow noreferrer\">SetForeground()</a></li>\n</ul>\n<p>with following code:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\n{\n    Bitmap selectedPhoto=null;\n    BitmapDrawable selectedPhotoDrawable=null;\n\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n        {\n            try\n            {\n                selectedPhoto=new PhotoDecoder().execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n                    .get();\n                selectedPhotoDrawable=new BitmapDrawable(getResources(),\n                    selectedPhoto);\n            }\n            catch(Exception e)\n            {\n                e.printStackTrace();\n            }\n\n            this.ibPhotoSelector.setForeground(selectedPhotoDrawable);\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}  \n</code></pre>\n<p>Again, in the debugger everyhing is ok. Nothing works!</p>\n"},{"tags":["java","database","postgresql","eclipselink","java-websocket"],"comments":[{"owner":{"account_id":14008771,"reputation":243,"user_id":11947055,"display_name":"Rabban Keyak"},"score":0,"creation_date":1677051048,"post_id":75529152,"comment_id":133258743,"body_markdown":"Since you are decided to use capital letters in your table and/or column names, you should not forget to do quoting such tables/columns in your queries, and to write them in a query exactly like you named it (any letter in the name of table/column must be in same case as it was when you created the table/column).","body":"Since you are decided to use capital letters in your table and/or column names, you should not forget to do quoting such tables/columns in your queries, and to write them in a query exactly like you named it (any letter in the name of table/column must be in same case as it was when you created the table/column)."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677052699,"post_id":75529152,"comment_id":133259158,"body_markdown":"How should I quote the query?\nLike this: `String queryString = &quot;SELECT t FROM &#39;Translation&#39; t&quot;;`,\nthen this error comes up: **An exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT t FROM &#39;Translation&#39; t]. \n[14, 27] The abstract schema type &#39;&#39;Translation&#39;&#39; is unknown.**","body":"How should I quote the query? Like this: <code>String queryString = &quot;SELECT t FROM &#39;Translation&#39; t&quot;;</code>, then this error comes up: <b>An exception occurred while creating a query in EntityManager:  Exception Description: Problem compiling [SELECT t FROM &#39;Translation&#39; t].  [14, 27] The abstract schema type &#39;&#39;Translation&#39;&#39; is unknown.</b>"},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677052705,"post_id":75529152,"comment_id":133259160,"body_markdown":"Like this: `String queryString = &quot;SELECT t FROM \\&quot;Translation\\&quot; t&quot;;`,\nthen this error comes up: **An exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT t FROM &quot;Translation&quot; t]. \n[14, 27] The abstract schema type &#39;&quot;Translation&quot;&#39; is unknown.**","body":"Like this: <code>String queryString = &quot;SELECT t FROM \\&quot;Translation\\&quot; t&quot;;</code>, then this error comes up: <b>An exception occurred while creating a query in EntityManager:  Exception Description: Problem compiling [SELECT t FROM &quot;Translation&quot; t].  [14, 27] The abstract schema type &#39;&quot;Translation&quot;&#39; is unknown.</b>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677081616,"post_id":75529152,"comment_id":133267972,"body_markdown":"You seem to be attempting an SQL query that is incomplete using api meant for JPQL (which is based on your entity object definitions, not the database table/columns). It should just be &quot;Select t from Translation t&quot; since you seem to have the query expecting fully formed Translation instances as the result. Use the Translation java entity property names in JPQL.","body":"You seem to be attempting an SQL query that is incomplete using api meant for JPQL (which is based on your entity object definitions, not the database table/columns). It should just be &quot;Select t from Translation t&quot; since you seem to have the query expecting fully formed Translation instances as the result. Use the Translation java entity property names in JPQL."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":1,"creation_date":1677593103,"post_id":75529152,"comment_id":133365656,"body_markdown":"@Chris PostgreSQL has a naming convention. Therefor it couldn&#39;t find the &quot;Translation&quot; table, because it should be &quot;translation&quot;.\n-&gt; https://stackoverflow.com/questions/2878248/postgresql-naming-conventions","body":"@Chris PostgreSQL has a naming convention. Therefor it couldn&#39;t find the &quot;Translation&quot; table, because it should be &quot;translation&quot;. -&gt; <a href=\"https://stackoverflow.com/questions/2878248/postgresql-naming-conventions\" title=\"postgresql naming conventions\">stackoverflow.com/questions/2878248/&hellip;</a>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677597836,"post_id":75529152,"comment_id":133367295,"body_markdown":"Database are usually case insensitive by default, and so if your table is translation in Postgres, you can query using Translation or TRANSLATION without issues. The issue in your question above is that you were using &quot;SELECT ID FROM Translation t&quot; and passing that string to EntityManager.createQuery. CreateQuery accepts JPQL, which if you just wanted an ID value returned, would need to have been &quot;Select t.id from Translation t&quot;. You use table and column names in SQL, Java entity and property names in JPQL. You can use createNativeQuery(&quot;select ID from Translation&quot;) to execute SQL.","body":"Database are usually case insensitive by default, and so if your table is translation in Postgres, you can query using Translation or TRANSLATION without issues. The issue in your question above is that you were using &quot;SELECT ID FROM Translation t&quot; and passing that string to EntityManager.createQuery. CreateQuery accepts JPQL, which if you just wanted an ID value returned, would need to have been &quot;Select t.id from Translation t&quot;. You use table and column names in SQL, Java entity and property names in JPQL. You can use createNativeQuery(&quot;select ID from Translation&quot;) to execute SQL."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677598051,"post_id":75529152,"comment_id":133367368,"body_markdown":"Otherwise, if you wanted translation instances back, you should be using em.createQuery(&quot;select t from Translation t&quot;).getResultList() as I suggested initially, or sql: em.createNativeQuery(&quot;select * from translation&quot;, Translation.class).getResultList() . JPQL is generally used as it matches the model you are getting back and allows the db to change underneath.","body":"Otherwise, if you wanted translation instances back, you should be using em.createQuery(&quot;select t from Translation t&quot;).getResultList() as I suggested initially, or sql: em.createNativeQuery(&quot;select * from translation&quot;, Translation.class).getResultList() . JPQL is generally used as it matches the model you are getting back and allows the db to change underneath."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677679492,"post_id":75529152,"comment_id":133385313,"body_markdown":"Yes the &quot;SELECT ID FROM Translation t&quot; query was was one big issue which I fixed immediatly after I realised what I wrote.","body":"Yes the &quot;SELECT ID FROM Translation t&quot; query was was one big issue which I fixed immediatly after I realised what I wrote."}],"answers":[{"tags":[],"owner":{"account_id":20688051,"reputation":18,"user_id":15190044,"display_name":"Mulmus Maximus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677062258,"creation_date":1677062258,"answer_id":75531498,"question_id":75529152,"body_markdown":"First you have to map each variable to the specific column it refers to. So that EclipseLink knows where to put the data. The mapping describes your table composition. For example what‘s the ID (PK), what‘s a column, …\r\n\r\nAnd you can try to use the Query object.\r\nWith that you can use native queries.\r\nIn your case it is the jakarta.persitence.Query import.","title":"EclipseLink can&#39;t get the data from PostgreSQL","body":"<p>First you have to map each variable to the specific column it refers to. So that EclipseLink knows where to put the data. The mapping describes your table composition. For example what‘s the ID (PK), what‘s a column, …</p>\n<p>And you can try to use the Query object.\nWith that you can use native queries.\nIn your case it is the jakarta.persitence.Query import.</p>\n"}],"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75531498,"answer_count":1,"score":0,"last_activity_date":1677062258,"creation_date":1677048810,"question_id":75529152,"body_markdown":"this is my first stackoverflow question.\r\n\r\nI can&#39;t read out the data from my PostgreSQL table and I have tried different methods, but I couldn&#39;t get it to work. All my services are on the newest version available.\r\n\r\n\r\nMaybe you can find my problem:)\r\n\r\npersistence.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;3.0&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n    &lt;persistence-unit name=&quot;uebersetzungstool_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        \r\n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\r\n        &lt;class&gt;com.mycompany.uebersetzungstool.entity.Translation&lt;/class&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/mydatabase&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;myuser&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;pwd&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.target-database&quot; value=&quot;PostgreSQL&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nTranslation.java file:\r\n\r\n```\r\npackage com.mycompany.uebersetzungstool.entity;\r\n\r\nimport java.io.Serializable;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;Translation&quot;)\r\npublic class Translation implements Serializable {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    private String key;\r\n    private String value;\r\n    private String language;\r\n    private String project;\r\n    private String version;\r\n    private String comment;\r\n    private boolean translated;\r\n    private String create_ts;\r\n    private String create_user;\r\n    private String update_ts;\r\n    private String update_user;\r\n\r\n    \r\n    public Translation() {\r\n    }\r\n\r\n    public Translation(int id, String key, String value, String language, String project, String version, String comment, boolean translated, String create_ts, String create_user, String update_ts, String update_user) {\r\n        this.id = id;\r\n        this.key = key;\r\n        this.value = value;\r\n        this.language = language;\r\n        this.project = project;\r\n        this.version = version;\r\n        this.comment = comment;\r\n        this.translated = translated;\r\n        this.create_ts = create_ts;\r\n        this.create_user = create_user;\r\n        this.update_ts = update_ts;\r\n        this.update_user = update_user;\r\n    }\r\n    \r\n    \r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    \r\n    public String getKey() {\r\n        return key;\r\n    }\r\n\r\n    public void setKey(String key) {\r\n        this.key = key;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(String value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public String getLanguage() {\r\n        return language;\r\n    }\r\n\r\n    public void setLanguage(String language) {\r\n        this.language = language;\r\n    }\r\n\r\n    public String getProject() {\r\n        return project;\r\n    }\r\n\r\n    public void setProject(String project) {\r\n        this.project = project;\r\n    }\r\n\r\n    public String getVersion() {\r\n        return version;\r\n    }\r\n\r\n    public void setVersion(String version) {\r\n        this.version = version;\r\n    }\r\n\r\n    public String getComment() {\r\n        return comment;\r\n    }\r\n\r\n    public void setComment(String comment) {\r\n        this.comment = comment;\r\n    }\r\n\r\n    public boolean isTranslated() {\r\n        return translated;\r\n    }\r\n\r\n    public void setTranslated(boolean translated) {\r\n        this.translated = translated;\r\n    }\r\n\r\n    public String getCreate_ts() {\r\n        return create_ts;\r\n    }\r\n\r\n    public void setCreate_ts(String create_ts) {\r\n        this.create_ts = create_ts;\r\n    }\r\n\r\n    public String getCreate_user() {\r\n        return create_user;\r\n    }\r\n\r\n    public void setCreate_user(String create_user) {\r\n        this.create_user = create_user;\r\n    }\r\n\r\n    public String getUpdate_ts() {\r\n        return update_ts;\r\n    }\r\n\r\n    public void setUpdate_ts(String update_ts) {\r\n        this.update_ts = update_ts;\r\n    }\r\n\r\n    public String getUpdate_user() {\r\n        return update_user;\r\n    }\r\n\r\n    public void setUpdate_user(String update_user) {\r\n        this.update_user = update_user;\r\n    }\r\n            \r\n    \r\n}\r\n```\r\n\r\n&quot;test&quot; file:\r\n\r\n```\r\nimport com.mycompany.uebersetzungstool.entity.Translation;\r\nimport org.junit.jupiter.api.Test;\r\nimport jakarta.persistence.EntityManager;\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport jakarta.persistence.Persistence;\r\nimport java.util.List;\r\n\r\npublic class DatabaseConnectionTest {\r\n\r\n    @Test\r\n    public void connectionTest() {\r\n        try {\r\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;uebersetzungstool_PU&quot;);\r\n            EntityManager em = emf.createEntityManager();\r\n\r\n            List&lt;Translation&gt; translations = em.createQuery(&quot;SELECT ID FROM Translation t&quot;, Translation.class).getResultList();\r\n\r\n            for (Translation translation : translations) {\r\n                System.out.println(translation.getProject() + &quot; &quot; + translation.getVersion());\r\n\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResult of the JUnit test:\r\n\r\n```\r\nRunning DatabaseConnectionTest\r\n[EL Info]: 2023-02-21 15:16:33.412--ServerSession(1746570062)--EclipseLink, version: Eclipse Persistence Services - 4.0.0.v202210051929\r\nAn exception occurred while creating a query in EntityManager: \r\nException Description: Problem compiling [SELECT ID FROM Translation t]. \r\n[7, 9] The identification variable &#39;ID&#39; is not defined in the FROM clause.\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.157 s - in DatabaseConnectionTest\r\n\r\nResults:\r\n\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0\r\n\r\n------------------------------------------------------------------------\r\nBUILD SUCCESS\r\n------------------------------------------------------------------------\r\nTotal time:  8.294 s\r\nFinished at: 2023-02-21T15:16:34+01:00\r\n------------------------------------------------------------------------\r\n```\r\n\r\n\r\n\r\nI would like to be able to get the data from my database, maybe with a query call. It has the same variabales as in the Translation.java file.","title":"EclipseLink can&#39;t get the data from PostgreSQL","body":"<p>this is my first stackoverflow question.</p>\n<p>I can't read out the data from my PostgreSQL table and I have tried different methods, but I couldn't get it to work. All my services are on the newest version available.</p>\n<p>Maybe you can find my problem:)</p>\n<p>persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;3.0&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;uebersetzungstool_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        \n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n        &lt;class&gt;com.mycompany.uebersetzungstool.entity.Translation&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/mydatabase&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;myuser&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;pwd&quot;/&gt;\n            &lt;property name=&quot;eclipselink.target-database&quot; value=&quot;PostgreSQL&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>Translation.java file:</p>\n<pre><code>package com.mycompany.uebersetzungstool.entity;\n\nimport java.io.Serializable;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name=&quot;Translation&quot;)\npublic class Translation implements Serializable {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String key;\n    private String value;\n    private String language;\n    private String project;\n    private String version;\n    private String comment;\n    private boolean translated;\n    private String create_ts;\n    private String create_user;\n    private String update_ts;\n    private String update_user;\n\n    \n    public Translation() {\n    }\n\n    public Translation(int id, String key, String value, String language, String project, String version, String comment, boolean translated, String create_ts, String create_user, String update_ts, String update_user) {\n        this.id = id;\n        this.key = key;\n        this.value = value;\n        this.language = language;\n        this.project = project;\n        this.version = version;\n        this.comment = comment;\n        this.translated = translated;\n        this.create_ts = create_ts;\n        this.create_user = create_user;\n        this.update_ts = update_ts;\n        this.update_user = update_user;\n    }\n    \n    \n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n    \n    public String getKey() {\n        return key;\n    }\n\n    public void setKey(String key) {\n        this.key = key;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    public String getLanguage() {\n        return language;\n    }\n\n    public void setLanguage(String language) {\n        this.language = language;\n    }\n\n    public String getProject() {\n        return project;\n    }\n\n    public void setProject(String project) {\n        this.project = project;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    public void setVersion(String version) {\n        this.version = version;\n    }\n\n    public String getComment() {\n        return comment;\n    }\n\n    public void setComment(String comment) {\n        this.comment = comment;\n    }\n\n    public boolean isTranslated() {\n        return translated;\n    }\n\n    public void setTranslated(boolean translated) {\n        this.translated = translated;\n    }\n\n    public String getCreate_ts() {\n        return create_ts;\n    }\n\n    public void setCreate_ts(String create_ts) {\n        this.create_ts = create_ts;\n    }\n\n    public String getCreate_user() {\n        return create_user;\n    }\n\n    public void setCreate_user(String create_user) {\n        this.create_user = create_user;\n    }\n\n    public String getUpdate_ts() {\n        return update_ts;\n    }\n\n    public void setUpdate_ts(String update_ts) {\n        this.update_ts = update_ts;\n    }\n\n    public String getUpdate_user() {\n        return update_user;\n    }\n\n    public void setUpdate_user(String update_user) {\n        this.update_user = update_user;\n    }\n            \n    \n}\n</code></pre>\n<p>&quot;test&quot; file:</p>\n<pre><code>import com.mycompany.uebersetzungstool.entity.Translation;\nimport org.junit.jupiter.api.Test;\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.Persistence;\nimport java.util.List;\n\npublic class DatabaseConnectionTest {\n\n    @Test\n    public void connectionTest() {\n        try {\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;uebersetzungstool_PU&quot;);\n            EntityManager em = emf.createEntityManager();\n\n            List&lt;Translation&gt; translations = em.createQuery(&quot;SELECT ID FROM Translation t&quot;, Translation.class).getResultList();\n\n            for (Translation translation : translations) {\n                System.out.println(translation.getProject() + &quot; &quot; + translation.getVersion());\n\n            }\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Result of the JUnit test:</p>\n<pre><code>Running DatabaseConnectionTest\n[EL Info]: 2023-02-21 15:16:33.412--ServerSession(1746570062)--EclipseLink, version: Eclipse Persistence Services - 4.0.0.v202210051929\nAn exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT ID FROM Translation t]. \n[7, 9] The identification variable 'ID' is not defined in the FROM clause.\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.157 s - in DatabaseConnectionTest\n\nResults:\n\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0\n\n------------------------------------------------------------------------\nBUILD SUCCESS\n------------------------------------------------------------------------\nTotal time:  8.294 s\nFinished at: 2023-02-21T15:16:34+01:00\n------------------------------------------------------------------------\n</code></pre>\n<p>I would like to be able to get the data from my database, maybe with a query call. It has the same variabales as in the Translation.java file.</p>\n"},{"tags":["python","java"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677062134,"creation_date":1677062134,"answer_id":75531463,"question_id":75529881,"body_markdown":"There&#39;s two issues with your code.\r\n\r\n**First:** you don&#39;t close the `ZipOutputStream` before taking its result via the `ByteArrayOutputStream`. That means that `ZipOutputStream` can&#39;t write the necessary end-of-file content. To fix this use nested try-with-resource like this:\r\n\r\n    String base64Str;\r\n    byte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\r\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\r\n      try (ZipOutputStream zipOutputStream = new ZipOutputStream(out)) {\r\n        zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\r\n        zipOutputStream.write(inBytes);\r\n        zipOutputStream.closeEntry();\r\n      }\r\n      base64Str = Base64.getEncoder().encodeToString(out.toByteArray());\r\n      System.out.println(base64Str);\r\n    } catch (Exception e) {\r\n      return;\r\n    }\r\n\r\nNote that Java can apparently tolerate the lack of the end-of-file header (especially when used like you did), while Python considers it a fatal error.\r\n\r\nGenerally speaking, if your goal is to just compress a single stream of data, then ZIP isn&#39;t quite the right format for that: it&#39;s meant as an archive containing files (with file names, metadata, an index, ...).\r\n\r\nOther formats such as GZIP are simpler and also widely supported. Java has [`GZIPInputStream`][1] and [`GZIPOutputStream`][2] for that.\r\n\r\n**Second:** you use `buffer` for your output at the end, when you should be using `out.toByteArray()`:\r\n\r\n\r\n    System.out.println(new String(out.toByteArray(), StandardCharsets.UTF_8));\r\n\r\nThis will guarantee that the whole file content will be printed and it won&#39;t contain spurious nul-bytes.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPInputStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPOutputStream.html","title":"How can Python decompress data from Java compress with zip","body":"<p>There's two issues with your code.</p>\n<p><strong>First:</strong> you don't close the <code>ZipOutputStream</code> before taking its result via the <code>ByteArrayOutputStream</code>. That means that <code>ZipOutputStream</code> can't write the necessary end-of-file content. To fix this use nested try-with-resource like this:</p>\n<pre><code>String base64Str;\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\ntry (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\n  try (ZipOutputStream zipOutputStream = new ZipOutputStream(out)) {\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\n    zipOutputStream.write(inBytes);\n    zipOutputStream.closeEntry();\n  }\n  base64Str = Base64.getEncoder().encodeToString(out.toByteArray());\n  System.out.println(base64Str);\n} catch (Exception e) {\n  return;\n}\n</code></pre>\n<p>Note that Java can apparently tolerate the lack of the end-of-file header (especially when used like you did), while Python considers it a fatal error.</p>\n<p>Generally speaking, if your goal is to just compress a single stream of data, then ZIP isn't quite the right format for that: it's meant as an archive containing files (with file names, metadata, an index, ...).</p>\n<p>Other formats such as GZIP are simpler and also widely supported. Java has <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPInputStream.html\" rel=\"nofollow noreferrer\"><code>GZIPInputStream</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPOutputStream.html\" rel=\"nofollow noreferrer\"><code>GZIPOutputStream</code></a> for that.</p>\n<p><strong>Second:</strong> you use <code>buffer</code> for your output at the end, when you should be using <code>out.toByteArray()</code>:</p>\n<pre><code>System.out.println(new String(out.toByteArray(), StandardCharsets.UTF_8));\n</code></pre>\n<p>This will guarantee that the whole file content will be printed and it won't contain spurious nul-bytes.</p>\n"}],"owner":{"account_id":27847862,"reputation":1,"user_id":21262940,"display_name":"june"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677062134,"creation_date":1677054010,"question_id":75529881,"body_markdown":"I wrote a demo with Java and Python to show my problem. My situation is Java to compress and Python to decompress. The Java code is\r\n```java\r\nString base64Str;\r\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\r\ntry (\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        ZipOutputStream zipOutputStream = new ZipOutputStream(out);\r\n){\r\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\r\n    zipOutputStream.write(inBytes);\r\n    zipOutputStream.closeEntry();\r\n    base64Str = Base64Encoder.encode(out.toByteArray());\r\n    System.out.println(base64Str);\r\n}catch (Exception e){\r\n    return;\r\n}\r\n\r\nbyte[] bytes = Base64Decoder.decode(base64Str);\r\ntry(\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        ByteArrayInputStream in = new ByteArrayInputStream(bytes);\r\n        ZipInputStream zin = new ZipInputStream(in);){\r\n    zin.getNextEntry();\r\n    byte[] buffer =  new byte[1024];\r\n    int offset = -1;\r\n    while ((offset = zin.read(buffer))!=-1){\r\n        out.write(buffer,0,offset);\r\n    }\r\n    System.out.println(new String(buffer,StandardCharsets.UTF_8));\r\n\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\nthe python code is\r\n```python\r\ns = &#39;UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA==&#39;\r\nbytes = base64.b64decode(s)\r\nzipfile.ZipFile(io.BytesIO(bytes))\r\n```\r\nThe variable `s` in the Python code is Java&#39;s `System.out.println(new String(buffer,StandardCharsets.UTF_8))` output, and Python gives me a wrong information \r\n```none\r\n---------------------------------------------------------------------------\r\nBadZipFile                                Traceback (most recent call last)\r\nCell In[101], line 3\r\n      1 s = &#39;UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA==&#39;\r\n      2 bytes = base64.b64decode(s)\r\n----&gt; 3 zipfile.ZipFile(io.BytesIO(bytes))\r\n\r\nFile d:\\python38\\lib\\zipfile.py:1269, in ZipFile.__init__(self, file, mode, compression, allowZip64, compresslevel, strict_timestamps)\r\n   1267 try:\r\n   1268     if mode == &#39;r&#39;:\r\n-&gt; 1269         self._RealGetContents()\r\n   1270     elif mode in (&#39;w&#39;, &#39;x&#39;):\r\n   1271         # set the modified flag so central directory gets written\r\n   1272         # even if no files are added to the archive\r\n   1273         self._didModify = True\r\n\r\nFile d:\\python38\\lib\\zipfile.py:1336, in ZipFile._RealGetContents(self)\r\n   1334     raise BadZipFile(&quot;File is not a zip file&quot;)\r\n   1335 if not endrec:\r\n-&gt; 1336     raise BadZipFile(&quot;File is not a zip file&quot;)\r\n   1337 if self.debug &gt; 1:\r\n   1338     print(endrec)\r\n\r\nBadZipFile: File is not a zip file\r\n```","title":"How can Python decompress data from Java compress with zip","body":"<p>I wrote a demo with Java and Python to show my problem. My situation is Java to compress and Python to decompress. The Java code is</p>\n<pre class=\"lang-java prettyprint-override\"><code>String base64Str;\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\ntry (\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        ZipOutputStream zipOutputStream = new ZipOutputStream(out);\n){\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\n    zipOutputStream.write(inBytes);\n    zipOutputStream.closeEntry();\n    base64Str = Base64Encoder.encode(out.toByteArray());\n    System.out.println(base64Str);\n}catch (Exception e){\n    return;\n}\n\nbyte[] bytes = Base64Decoder.decode(base64Str);\ntry(\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        ByteArrayInputStream in = new ByteArrayInputStream(bytes);\n        ZipInputStream zin = new ZipInputStream(in);){\n    zin.getNextEntry();\n    byte[] buffer =  new byte[1024];\n    int offset = -1;\n    while ((offset = zin.read(buffer))!=-1){\n        out.write(buffer,0,offset);\n    }\n    System.out.println(new String(buffer,StandardCharsets.UTF_8));\n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>the python code is</p>\n<pre class=\"lang-py prettyprint-override\"><code>s = 'UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA=='\nbytes = base64.b64decode(s)\nzipfile.ZipFile(io.BytesIO(bytes))\n</code></pre>\n<p>The variable <code>s</code> in the Python code is Java's <code>System.out.println(new String(buffer,StandardCharsets.UTF_8))</code> output, and Python gives me a wrong information</p>\n<pre class=\"lang-none prettyprint-override\"><code>---------------------------------------------------------------------------\nBadZipFile                                Traceback (most recent call last)\nCell In[101], line 3\n      1 s = 'UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA=='\n      2 bytes = base64.b64decode(s)\n----&gt; 3 zipfile.ZipFile(io.BytesIO(bytes))\n\nFile d:\\python38\\lib\\zipfile.py:1269, in ZipFile.__init__(self, file, mode, compression, allowZip64, compresslevel, strict_timestamps)\n   1267 try:\n   1268     if mode == 'r':\n-&gt; 1269         self._RealGetContents()\n   1270     elif mode in ('w', 'x'):\n   1271         # set the modified flag so central directory gets written\n   1272         # even if no files are added to the archive\n   1273         self._didModify = True\n\nFile d:\\python38\\lib\\zipfile.py:1336, in ZipFile._RealGetContents(self)\n   1334     raise BadZipFile(&quot;File is not a zip file&quot;)\n   1335 if not endrec:\n-&gt; 1336     raise BadZipFile(&quot;File is not a zip file&quot;)\n   1337 if self.debug &gt; 1:\n   1338     print(endrec)\n\nBadZipFile: File is not a zip file\n</code></pre>\n"},{"tags":["java","node.js","encryption","node-crypto"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1677073189,"post_id":75531462,"comment_id":133265026,"body_markdown":"*...Is that correct?...* Have you compared the results of the two codes? Depending on the mode, `final()` takes padding into account or generates/checks an authentication tag. Although both are irrelevant for CFB (and `final()` returns nothing), it&#39;s more robust to concatenate the results of the `update()` and `final()` calls (e.g. with respect to a change of the mode).","body":"<i>...Is that correct?...</i> Have you compared the results of the two codes? Depending on the mode, <code>final()</code> takes padding into account or generates/checks an authentication tag. Although both are irrelevant for CFB (and <code>final()</code> returns nothing), it&#39;s more robust to concatenate the results of the <code>update()</code> and <code>final()</code> calls (e.g. with respect to a change of the mode)."},{"owner":{"account_id":17348142,"reputation":345,"user_id":12567231,"display_name":"Madhav mishra"},"score":0,"creation_date":1677156443,"post_id":75531462,"comment_id":133284396,"body_markdown":"Could you add some resources to go deeper into this? Thanks","body":"Could you add some resources to go deeper into this? Thanks"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1677170177,"post_id":75531462,"comment_id":133289205,"body_markdown":"See the *crypto* documentation. For more details see the [source code](https://github.com/nodejs/node/blob/main/src/crypto/crypto_cipher.cc#L889). Note that *crypto* is just an OpenSSL wrapper, `final()` essentially calls the OpenSSL functions `EVP_CipherFinal_ex()` and `EVP_CIPHER_CTX_ctrl()`. See their OpenSSL documentation for more details.","body":"See the <i>crypto</i> documentation. For more details see the <a href=\"https://github.com/nodejs/node/blob/main/src/crypto/crypto_cipher.cc#L889\" rel=\"nofollow noreferrer\">source code</a>. Note that <i>crypto</i> is just an OpenSSL wrapper, <code>final()</code> essentially calls the OpenSSL functions <code>EVP_CipherFinal_ex()</code> and <code>EVP_CIPHER_CTX_ctrl()</code>. See their OpenSSL documentation for more details."}],"owner":{"account_id":17348142,"reputation":345,"user_id":12567231,"display_name":"Madhav mishra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677062131,"creation_date":1677062131,"question_id":75531462,"body_markdown":"I have a encryption/decryption functionality in java code and wanted to write the same logic using the **crypto** node-js library. \r\nWhat&#39;s the equivalent of these Java codes ?\r\n&lt;br&gt;&lt;br&gt;\r\nJava code : \r\n```\r\n\r\n String iv = &quot;Some random string&quot;;\r\n AlgorithmParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\r\n```\r\nWhat I tried : \r\n```\r\nconst iv = &quot;Some random string&quot;\r\nvar ivSpec = new Buffer.from(iv);\r\n```\r\n&lt;br&gt;\r\nJava code : \r\n\r\n```\r\nString key = &quot;Some random key&quot;;\r\nSecretKeySpec newKey = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\r\n\r\n```\r\nWhat I tried : \r\n```\r\nconst key = &quot;Some random key&quot;\r\nvar newKey = new Buffer.from(key);\r\n\r\n```\r\nJava code :\r\n```\r\nString message = &quot;Some message&quot;\r\nCipher cipher = Cipher.getInstance(&quot;AES/CFB/NoPadding&quot;);\r\ncipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);\r\nbyte[] bytes = cipher.doFinal(textBytes.getBytes());\r\n```\r\nIn java code it is using **&quot;AES/CFB/NoPadding&quot;** and I found equivalent in node js crypto i.e **&quot;aes-256-cfb&quot;** so I used it.\r\n```\r\nvar crypto = require(&#39;crypto&#39;);\r\n\r\nvar cipher = crypto.createCipheriv(&#39;aes-256-cfb&#39;, newKey, ivSpec);\r\ncipher.update(message, &#39;utf8&#39;);\r\ncipher.final();\r\n```\r\nIs that correct ? Where I am doin it wrong cause there is no output of cipher.final().\r\nThanks in advance.","title":"Converting java cipher crypto code to node js crypto","body":"<p>I have a encryption/decryption functionality in java code and wanted to write the same logic using the <strong>crypto</strong> node-js library.\nWhat's the equivalent of these Java codes ?\n<br><br>\nJava code :</p>\n<pre><code>\n String iv = &quot;Some random string&quot;;\n AlgorithmParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\n</code></pre>\n<p>What I tried :</p>\n<pre><code>const iv = &quot;Some random string&quot;\nvar ivSpec = new Buffer.from(iv);\n</code></pre>\n<br>\nJava code : \n<pre><code>String key = &quot;Some random key&quot;;\nSecretKeySpec newKey = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\n\n</code></pre>\n<p>What I tried :</p>\n<pre><code>const key = &quot;Some random key&quot;\nvar newKey = new Buffer.from(key);\n\n</code></pre>\n<p>Java code :</p>\n<pre><code>String message = &quot;Some message&quot;\nCipher cipher = Cipher.getInstance(&quot;AES/CFB/NoPadding&quot;);\ncipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);\nbyte[] bytes = cipher.doFinal(textBytes.getBytes());\n</code></pre>\n<p>In java code it is using <strong>&quot;AES/CFB/NoPadding&quot;</strong> and I found equivalent in node js crypto i.e <strong>&quot;aes-256-cfb&quot;</strong> so I used it.</p>\n<pre><code>var crypto = require('crypto');\n\nvar cipher = crypto.createCipheriv('aes-256-cfb', newKey, ivSpec);\ncipher.update(message, 'utf8');\ncipher.final();\n</code></pre>\n<p>Is that correct ? Where I am doin it wrong cause there is no output of cipher.final().\nThanks in advance.</p>\n"},{"tags":["java","json","spring","jackson"],"answers":[{"tags":[],"owner":{"account_id":1416996,"reputation":2508,"user_id":1342427,"display_name":"ragnor"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1494602659,"creation_date":1381211089,"answer_id":19239964,"question_id":19239413,"body_markdown":"Try to register subtype using `ObjectMapper.registerSubtypes` instead of using annotations","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Try to register subtype using <code>ObjectMapper.registerSubtypes</code> instead of using annotations</p>\n"},{"tags":[],"owner":{"account_id":5455641,"reputation":201,"user_id":4339159,"display_name":"Rashmin H Gadhavi"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1488289184,"creation_date":1418076557,"answer_id":27367924,"question_id":19239413,"body_markdown":"The method `registerSubtypes()` works!\r\n    \r\n   \r\n\r\n    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;type&quot;)\r\n    public interface Geometry {\r\n      //...\r\n    }\r\n       \r\n    public class Point implements Geometry{\r\n      //...\r\n    }\r\n    public class Polygon implements Geometry{\r\n      //...\r\n    }\r\n    public class LineString implements Geometry{\r\n      //...\r\n    }\r\n            \r\n    GeoJson geojson= null;\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);\r\n    mapper.registerSubtypes(Polygon.class,LineString.class,Point.class);\r\n    \r\n    try {\r\n        geojson=mapper.readValue(source, GeoJson.class);\t\t\t\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\nNote1: We use the Interface and the implementing classes. I fyou want jackson to de-serialize the classes as per their implementing classes, you have to register all of them using ObjectMapper&#39;s &quot;registerSubtypes&quot; method.\r\n\r\nNote2: In addition you use, &quot;    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;type&quot;)&quot; as annotation with your Interface.\r\n\r\nYou can also define the order of properties when mapper writes a value of your POJO as a json.\r\n\r\nThis you can do using below annotation.\r\n\r\n    @JsonPropertyOrder({&quot;type&quot;,&quot;crs&quot;,&quot;version&quot;,&quot;features&quot;})\r\n    public class GeoJson {\r\n\t\r\n\t    private String type=&quot;FeatureCollection&quot;;\r\n  \t    private List&lt;Feature&gt; features;\r\n\t    private String version=&quot;1.0.0&quot;;\r\n\t\tprivate CRS crs = new CRS();\r\n        ........\r\n\t}\r\n\r\nHope this helps!\r\n\r\n     ","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>The method <code>registerSubtypes()</code> works!</p>\n\n<pre><code>@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=\"type\")\npublic interface Geometry {\n  //...\n}\n\npublic class Point implements Geometry{\n  //...\n}\npublic class Polygon implements Geometry{\n  //...\n}\npublic class LineString implements Geometry{\n  //...\n}\n\nGeoJson geojson= null;\nObjectMapper mapper = new ObjectMapper();\nmapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);\nmapper.registerSubtypes(Polygon.class,LineString.class,Point.class);\n\ntry {\n    geojson=mapper.readValue(source, GeoJson.class);            \n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>Note1: We use the Interface and the implementing classes. I fyou want jackson to de-serialize the classes as per their implementing classes, you have to register all of them using ObjectMapper's \"registerSubtypes\" method.</p>\n\n<p>Note2: In addition you use, \"    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=\"type\")\" as annotation with your Interface.</p>\n\n<p>You can also define the order of properties when mapper writes a value of your POJO as a json.</p>\n\n<p>This you can do using below annotation.</p>\n\n<pre><code>@JsonPropertyOrder({\"type\",\"crs\",\"version\",\"features\"})\npublic class GeoJson {\n\n    private String type=\"FeatureCollection\";\n    private List&lt;Feature&gt; features;\n    private String version=\"1.0.0\";\n    private CRS crs = new CRS();\n    ........\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":1150252,"reputation":2707,"user_id":1625820,"accept_rate":59,"display_name":"herrtim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461688782,"creation_date":1461688782,"answer_id":36870868,"question_id":19239413,"body_markdown":"Rashmin&#39;s answer worked, and I found an alternative way to avoid the `com.fasterxml.jackson.databind.JsonMappingException: Could not resolve type id into a subtype of Blah` issue without needing to use `registerSubtypes`. What you can do is add the following annotation to the parent class: \r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;)\r\n\r\nNote that the difference is `JsonTypeInfo.Id.CLASS` instead of `JsonTypeInfo.Id.NAME`. The downside is that the created JSON will contain the entire class name including the full namespace. The upside is that you don&#39;t have to worry about registering subtypes.","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Rashmin's answer worked, and I found an alternative way to avoid the <code>com.fasterxml.jackson.databind.JsonMappingException: Could not resolve type id into a subtype of Blah</code> issue without needing to use <code>registerSubtypes</code>. What you can do is add the following annotation to the parent class: </p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n</code></pre>\n\n<p>Note that the difference is <code>JsonTypeInfo.Id.CLASS</code> instead of <code>JsonTypeInfo.Id.NAME</code>. The downside is that the created JSON will contain the entire class name including the full namespace. The upside is that you don't have to worry about registering subtypes.</p>\n"},{"tags":[],"owner":{"account_id":2456831,"reputation":1967,"user_id":2243516,"display_name":"Aaron Cooley"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1473805335,"creation_date":1473805335,"answer_id":39479844,"question_id":19239413,"body_markdown":"I had a similar issue while working on a dropwizard based service.  I don&#39;t fully understand why things didn&#39;t work for me in the same way that the dropwizard code works, but I know why the code in the original post doesn&#39;t work. `@JsonSubTypes` wants an array of sub types, not a single value.  So if you replace the line...\r\n\r\n    @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)\r\n\r\nwith...\r\n\r\n    @JsonSubTypes({ @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class) })\r\n\r\nI believe your code will work.\r\n\r\nFor those that are having this same error message pop up, you may be having an issue with the subtypes being discovered.  Try adding a line like the one above or looking for issue with the discovery of the classes that have the `@JsonTypeName` tag in them.","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>I had a similar issue while working on a dropwizard based service.  I don't fully understand why things didn't work for me in the same way that the dropwizard code works, but I know why the code in the original post doesn't work. <code>@JsonSubTypes</code> wants an array of sub types, not a single value.  So if you replace the line...</p>\n\n<pre><code>@JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class)\n</code></pre>\n\n<p>with...</p>\n\n<pre><code>@JsonSubTypes({ @JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class) })\n</code></pre>\n\n<p>I believe your code will work.</p>\n\n<p>For those that are having this same error message pop up, you may be having an issue with the subtypes being discovered.  Try adding a line like the one above or looking for issue with the discovery of the classes that have the <code>@JsonTypeName</code> tag in them.</p>\n"},{"tags":[],"owner":{"account_id":3186371,"reputation":41,"user_id":2691890,"display_name":"dibs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528123732,"creation_date":1499983588,"answer_id":45091683,"question_id":19239413,"body_markdown":"Encountered the same error and used the equivalent of the below JSON (instead of `CreditCardPayment` used my class name) as the input for deserializer and it worked:\r\n\r\n    {\r\n\t    &quot;type&quot;: &quot;CreditCardPayment&quot;, \r\n        ...\r\n    }","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Encountered the same error and used the equivalent of the below JSON (instead of <code>CreditCardPayment</code> used my class name) as the input for deserializer and it worked:</p>\n\n<pre><code>{\n    \"type\": \"CreditCardPayment\", \n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504275213,"creation_date":1504275213,"answer_id":46002160,"question_id":19239413,"body_markdown":"In my case I had added `defaultImpl = SomeClass.class` to @JsonTypeInfo and was trying to convert it SomeClass2.class","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>In my case I had added <code>defaultImpl = SomeClass.class</code> to @JsonTypeInfo and was trying to convert it SomeClass2.class</p>\n"},{"tags":[],"owner":{"account_id":321894,"reputation":2481,"user_id":640994,"accept_rate":78,"display_name":"DeejonZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677062072,"creation_date":1677062072,"answer_id":75531446,"question_id":19239413,"body_markdown":"In my case it was an old version of jackson-databind. I solved with version 2.11.0","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>In my case it was an old version of jackson-databind. I solved with version 2.11.0</p>\n"}],"owner":{"account_id":3406005,"reputation":1419,"user_id":2857022,"accept_rate":20,"display_name":"grigori"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75308,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":19239964,"answer_count":7,"score":36,"last_activity_date":1677062072,"creation_date":1381208275,"question_id":19239413,"body_markdown":"I have the following object model in my Spring MVC (v3.2.0.RELEASE) web application:\r\n\r\n\r\n    public class Order {\r\n      private Payment payment;\r\n    }\r\n    \r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.WRAPPER_OBJECT)\r\n    @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)\r\n    public interface Payment {}\r\n\r\n\r\n    @JsonTypeName(&quot;creditCardPayment&quot;)\r\n    public class CreditCardPayment implements Payment {}\r\n\r\nWhen I serialise the Order class to JSON, I get the following result (which is exactly what I want):\r\n\r\n    {\r\n      &quot;payment&quot; : {\r\n        &quot;creditCardPayment&quot;: {\r\n          ...\r\n        } \r\n    }\r\n\r\nUnfortunately, if I take the above JSON and try to de-serialise it back into my object model, I get the following exception:\r\n\r\n    \r\n\r\n&gt; Could not read JSON: Could not resolve type id &#39;creditCardPayment&#39;\r\n&gt; into a subtype of [simple type, class Payment] at [Source:\r\n&gt; org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\r\n&gt; column: 58] (through reference chain: Order[&quot;payment&quot;]); nested\r\n&gt; exception is com.fasterxml.jackson.databind.JsonMappingException:\r\n&gt; Could not resolve type id &#39;creditCardPayment&#39; into a subtype of\r\n&gt; [simple type, class Payment] at [Source:\r\n&gt; org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\r\n&gt; column: 58] (through reference chain: Order[&quot;payment&quot;])\r\n\r\nMy application is configured via Spring JavaConf, as follows:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class AppWebConf extends WebMvcConfigurerAdapter {\r\n    \r\n        @Bean\r\n        public ObjectMapper objectMapper() {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.setSerializationInclusion(Include.NON_NULL);\r\n            objectMapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\r\n            return objectMapper;\r\n        }\r\n    \r\n        @Bean\r\n        public MappingJackson2HttpMessageConverter mappingJacksonMessageConverter() {\r\n            MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n            converter.setObjectMapper(objectMapper());\r\n            return converter;\r\n        }\r\n    \r\n        @Bean\r\n        public Jaxb2RootElementHttpMessageConverter jaxbMessageConverter() {\r\n            return new Jaxb2RootElementHttpMessageConverter();\r\n        }\r\n    \r\n        @Override\r\n        public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n            converters.add(jaxbMessageConverter());\r\n            converters.add(mappingJacksonMessageConverter());\r\n        }\r\n    }\r\n\r\nFor testing, I have a controller with 2 methods, one returns an Order for HTTP GET request (this one works) and one that accepts an Order via a HTTP POST (this one fails), e.g.\r\n\r\n    @Controller\r\n    public class TestController {\r\n    \r\n        @ResponseBody\r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET)\r\n        public Order getTest() {}\r\n    \r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST)\r\n        public void postTest(@RequestBody order) {}\r\n\r\n    }\r\n\r\nI have tried all suggestions from the various discussions on SO but so far had no luck. Can anyone spot what I&#39;m doing wrong?","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>I have the following object model in my Spring MVC (v3.2.0.RELEASE) web application:</p>\n\n<pre><code>public class Order {\n  private Payment payment;\n}\n\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.WRAPPER_OBJECT)\n@JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class)\npublic interface Payment {}\n\n\n@JsonTypeName(\"creditCardPayment\")\npublic class CreditCardPayment implements Payment {}\n</code></pre>\n\n<p>When I serialise the Order class to JSON, I get the following result (which is exactly what I want):</p>\n\n<pre><code>{\n  \"payment\" : {\n    \"creditCardPayment\": {\n      ...\n    } \n}\n</code></pre>\n\n<p>Unfortunately, if I take the above JSON and try to de-serialise it back into my object model, I get the following exception:</p>\n\n<blockquote>\n  <p>Could not read JSON: Could not resolve type id 'creditCardPayment'\n  into a subtype of [simple type, class Payment] at [Source:\n  org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\n  column: 58] (through reference chain: Order[\"payment\"]); nested\n  exception is com.fasterxml.jackson.databind.JsonMappingException:\n  Could not resolve type id 'creditCardPayment' into a subtype of\n  [simple type, class Payment] at [Source:\n  org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\n  column: 58] (through reference chain: Order[\"payment\"])</p>\n</blockquote>\n\n<p>My application is configured via Spring JavaConf, as follows:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class AppWebConf extends WebMvcConfigurerAdapter {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setSerializationInclusion(Include.NON_NULL);\n        objectMapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n        return objectMapper;\n    }\n\n    @Bean\n    public MappingJackson2HttpMessageConverter mappingJacksonMessageConverter() {\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n        converter.setObjectMapper(objectMapper());\n        return converter;\n    }\n\n    @Bean\n    public Jaxb2RootElementHttpMessageConverter jaxbMessageConverter() {\n        return new Jaxb2RootElementHttpMessageConverter();\n    }\n\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(jaxbMessageConverter());\n        converters.add(mappingJacksonMessageConverter());\n    }\n}\n</code></pre>\n\n<p>For testing, I have a controller with 2 methods, one returns an Order for HTTP GET request (this one works) and one that accepts an Order via a HTTP POST (this one fails), e.g.</p>\n\n<pre><code>@Controller\npublic class TestController {\n\n    @ResponseBody\n    @RequestMapping(value = \"/test\", method = RequestMethod.GET)\n    public Order getTest() {}\n\n    @RequestMapping(value = \"/test\", method = RequestMethod.POST)\n    public void postTest(@RequestBody order) {}\n\n}\n</code></pre>\n\n<p>I have tried all suggestions from the various discussions on SO but so far had no luck. Can anyone spot what I'm doing wrong?</p>\n"},{"tags":["java","scala","jar","scripting","jsr"],"answers":[{"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677061771,"creation_date":1676398775,"answer_id":75451783,"question_id":75437009,"body_markdown":"Could you try to replace\r\n\r\n```java\r\nScriptEngineManager manager=new ScriptEngineManager();\r\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\r\nengine.compile(sourceCode);\r\n```\r\nwith\r\n```java\r\nimport scala.reflect.api.JavaUniverse;\r\nimport scala.tools.reflect.ToolBox;\r\n\r\n// ...\r\n\r\nscala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\r\nJavaUniverse universe = runtime.universe();\r\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(this.getClass().getClassLoader());\r\nscala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\r\nToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\nint res = (int) toolBox.eval(toolBox.parse(&quot;1 + 1&quot;)); // 2\r\n```\r\n?\r\n\r\nDoes this change anything for you?\r\n\r\nhttps://stackoverflow.com/questions/25078538/using-scala-macro-from-java\r\n\r\nhttps://stackoverflow.com/questions/73911801/how-can-i-run-generated-code-during-script-runtime\r\n\r\nhttps://stackoverflow.com/questions/70945320/how-to-compile-and-execute-scala-code-at-run-time-in-scala3\r\n\r\nhttps://stackoverflow.com/questions/1183645/eval-in-scala\r\n\r\n---\r\n\r\nRegarding your original code with JSR232 scripting. Could you check whether anything changes if you add `fork := true` (sbt syntax) to the build file? I guess in Maven this should be `&lt;fork&gt;true&lt;/fork&gt;`. \r\n\r\nRegarding your question with classloading. One option is to use protected method `addURL`\r\n\r\n```java\r\nClassLoader classLoader = this.getClass().getClassLoader();\r\nURLClassLoader urlClassLoader = (URLClassLoader) classLoader;\r\nMethod addUrlMethod = URLClassLoader.class.getDeclaredMethod(&quot;addURL&quot;, URL.class);\r\naddUrlMethod.setAccessible(true);\r\nString url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\r\naddUrlMethod.invoke(urlClassLoader, new URL(url));\r\nObject res = toolBox.eval(toolBox.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\r\n// 1 :: a :: HNil\r\n```\r\n\r\nAnother is to create a child class loader, new runtime mirror and toolbox\r\n\r\n```java\r\nClassLoader classLoader1 = new URLClassLoader(new URL[]{new URL(url)}, classLoader);\r\nJavaUniverse.JavaMirror mirror1 = universe.runtimeMirror(classLoader1);\r\nToolBox&lt;?&gt; toolBox1 = toolsReflect.ToolBox(mirror1).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\nObject res = toolBox1.eval(toolBox1.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\r\n// 1 :: a :: HNil\r\n```\r\n\r\n---\r\n\r\nEvery toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror `toolbox.mirror`, where new definitions live (the class loader is `mirror.classloader`).\r\n\r\nSee the following example, where I create a new class, instantiate it, add new JAR, and use previous definition\r\n\r\n```\r\nimport scala.reflect.api.JavaUniverse;\r\nimport scala.reflect.api.Symbols;\r\nimport scala.reflect.api.Trees;\r\nimport scala.tools.reflect.ToolBox;\r\nimport java.net.URL;\r\nimport java.net.URLClassLoader;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        new App().run();\r\n    }\r\n\r\n    private static scala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\r\n    private static JavaUniverse universe = runtime.universe();\r\n    private static ClassLoader classLoader = App.class.getClassLoader();\r\n    private static JavaUniverse.JavaMirror mirror = universe.runtimeMirror(classLoader);\r\n    private static scala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\r\n    private static ToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\n    public static Symbols.SymbolApi symbol = toolBox.define((Trees.ClassDefApi) toolBox.parse(&quot;case class A(i: Int, s: String)&quot;));\r\n\r\n    public static Object a = toolBox.eval(toolBox.parse(\r\n            &quot;import scala.reflect.runtime.universe._;&quot; +\r\n            &quot; q\\&quot;\\&quot;\\&quot;new ${App.symbol.asInstanceOf[Symbol]}(1, \\&quot;a\\&quot;)\\&quot;\\&quot;\\&quot; &quot;\r\n    ));\r\n\r\n    public void run() throws Exception {\r\n        JavaUniverse.JavaMirror mirror1 = (JavaUniverse.JavaMirror) toolBox.mirror();\r\n        ClassLoader classLoader1 = mirror1.classLoader();\r\n\r\n        String url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\r\n        ClassLoader classLoader2 = new URLClassLoader(new URL[]{new URL(url)}, classLoader1);\r\n        JavaUniverse.JavaMirror mirror2 = universe.runtimeMirror(classLoader2);\r\n        ToolBox&lt;?&gt; toolBox2 = toolsReflect.ToolBox(mirror2).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\n        Object res = toolBox2.eval(toolBox2.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: App.a :: HNil&quot;));\r\n        System.out.println(res); // 1 :: a :: A(1,a) :: HNil\r\n    }\r\n}\r\n```","title":"Scala script engine not initialized when starting java -jar file. javax.script.ScriptException: Failed to compile ctx","body":"<p>Could you try to replace</p>\n<pre class=\"lang-java prettyprint-override\"><code>ScriptEngineManager manager=new ScriptEngineManager();\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\nengine.compile(sourceCode);\n</code></pre>\n<p>with</p>\n<pre class=\"lang-java prettyprint-override\"><code>import scala.reflect.api.JavaUniverse;\nimport scala.tools.reflect.ToolBox;\n\n// ...\n\nscala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\nJavaUniverse universe = runtime.universe();\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(this.getClass().getClassLoader());\nscala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\nToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\nint res = (int) toolBox.eval(toolBox.parse(&quot;1 + 1&quot;)); // 2\n</code></pre>\n<p>?</p>\n<p>Does this change anything for you?</p>\n<p><a href=\"https://stackoverflow.com/questions/25078538/using-scala-macro-from-java\">Using scala macro from java</a></p>\n<p><a href=\"https://stackoverflow.com/questions/73911801/how-can-i-run-generated-code-during-script-runtime\">How can I run generated code during script runtime?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/70945320/how-to-compile-and-execute-scala-code-at-run-time-in-scala3\">How to compile and execute scala code at run-time in Scala3?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/1183645/eval-in-scala\">&quot;eval&quot; in Scala</a></p>\n<hr />\n<p>Regarding your original code with JSR232 scripting. Could you check whether anything changes if you add <code>fork := true</code> (sbt syntax) to the build file? I guess in Maven this should be <code>&lt;fork&gt;true&lt;/fork&gt;</code>.</p>\n<p>Regarding your question with classloading. One option is to use protected method <code>addURL</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>ClassLoader classLoader = this.getClass().getClassLoader();\nURLClassLoader urlClassLoader = (URLClassLoader) classLoader;\nMethod addUrlMethod = URLClassLoader.class.getDeclaredMethod(&quot;addURL&quot;, URL.class);\naddUrlMethod.setAccessible(true);\nString url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\naddUrlMethod.invoke(urlClassLoader, new URL(url));\nObject res = toolBox.eval(toolBox.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\n// 1 :: a :: HNil\n</code></pre>\n<p>Another is to create a child class loader, new runtime mirror and toolbox</p>\n<pre class=\"lang-java prettyprint-override\"><code>ClassLoader classLoader1 = new URLClassLoader(new URL[]{new URL(url)}, classLoader);\nJavaUniverse.JavaMirror mirror1 = universe.runtimeMirror(classLoader1);\nToolBox&lt;?&gt; toolBox1 = toolsReflect.ToolBox(mirror1).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\nObject res = toolBox1.eval(toolBox1.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\n// 1 :: a :: HNil\n</code></pre>\n<hr />\n<p>Every toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror <code>toolbox.mirror</code>, where new definitions live (the class loader is <code>mirror.classloader</code>).</p>\n<p>See the following example, where I create a new class, instantiate it, add new JAR, and use previous definition</p>\n<pre><code>import scala.reflect.api.JavaUniverse;\nimport scala.reflect.api.Symbols;\nimport scala.reflect.api.Trees;\nimport scala.tools.reflect.ToolBox;\nimport java.net.URL;\nimport java.net.URLClassLoader;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n        new App().run();\n    }\n\n    private static scala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\n    private static JavaUniverse universe = runtime.universe();\n    private static ClassLoader classLoader = App.class.getClassLoader();\n    private static JavaUniverse.JavaMirror mirror = universe.runtimeMirror(classLoader);\n    private static scala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\n    private static ToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\n    public static Symbols.SymbolApi symbol = toolBox.define((Trees.ClassDefApi) toolBox.parse(&quot;case class A(i: Int, s: String)&quot;));\n\n    public static Object a = toolBox.eval(toolBox.parse(\n            &quot;import scala.reflect.runtime.universe._;&quot; +\n            &quot; q\\&quot;\\&quot;\\&quot;new ${App.symbol.asInstanceOf[Symbol]}(1, \\&quot;a\\&quot;)\\&quot;\\&quot;\\&quot; &quot;\n    ));\n\n    public void run() throws Exception {\n        JavaUniverse.JavaMirror mirror1 = (JavaUniverse.JavaMirror) toolBox.mirror();\n        ClassLoader classLoader1 = mirror1.classLoader();\n\n        String url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\n        ClassLoader classLoader2 = new URLClassLoader(new URL[]{new URL(url)}, classLoader1);\n        JavaUniverse.JavaMirror mirror2 = universe.runtimeMirror(classLoader2);\n        ToolBox&lt;?&gt; toolBox2 = toolsReflect.ToolBox(mirror2).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\n        Object res = toolBox2.eval(toolBox2.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: App.a :: HNil&quot;));\n        System.out.println(res); // 1 :: a :: A(1,a) :: HNil\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17597753,"reputation":104,"user_id":12768362,"display_name":"evgrot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677061771,"creation_date":1676297576,"question_id":75437009,"body_markdown":"i am trying to compile scala code in runtime in java programm.\r\nI am using jsr232 api and my code looks **like**:\r\n\r\n```\r\nScriptEngineManager manager=new ScriptEngineManager();\r\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\r\nengine.compile(sourceCode);\r\n```\r\nMy pom looks **like**:\r\n\r\n```\r\n&lt;properties&gt;\r\n   &lt;scala.version&gt;2.13.10&lt;/scala.version&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-compiler&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-reflect&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\nWhen i am running such code in IDE all is ok and i have no problems (all dependencies jars are in -classpath option)\r\nBut after i try to package to jar with copy dependencies (so i have small jar with fat manifest and put all dependencies to lib folder).\r\n```\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                    &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n                    &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n                    &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n                &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                            &lt;mainClass&gt;$$$MYCLASS$$$&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                        &lt;manifestEntries&gt;\r\n                            &lt;Class-Path&gt;.&lt;/Class-Path&gt;\r\n                        &lt;/manifestEntries&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n and run my application i got null on `(Scripted) manager.getEngineByName(&quot;scala&quot;);`\r\n\r\nAfter some research i found that `javax.script.ScriptEngineManager` contains scala engine factory;\r\nBut &#39;javax.script.ScriptEngineManager#getEngineByName(String)&#39; returns null if something go wrong during method execution(without printstacktrace).\r\nAnd my problem is on `ScriptEngine engine = spi.getScriptEngine();`\r\n\r\nI manually try to create Scala script engine the same way as manager and Scala.Factory(Engine factory) do this with some debug settings:\r\n\r\n```\r\nif(engine==null) {\r\n\tlog.warn(&quot;No scala script engine exists. Try load again&quot;);\r\n\ttry {\r\n\t\tSettings settings = new Settings();\r\n\t\tsettings.usejavacp().value_$eq(true);//same as scala code \r\n\t\tsettings.usemanifestcp().value_$eq(true); //same as scala code\r\n                settings.Yreplclassbased().value_$eq(true); //same as scala code\r\n                settings.verbose().value_$eq(true); //for more logs\r\n                settings.debug().value_$eq(true); //for more logs\r\n\t\tScripted.Factory fact = new Scripted.Factory();\r\n\t\tengine= Scripted.apply(fact,settings, ReplReporterImpl.defaultOut());\r\n\t}catch (Exception e){\r\n\t\tlog.error(&quot;Scala compiler wasn&#39;t initialized&quot;,e);\r\n\t\treturn;\r\n\t}\r\n}\r\n```\r\nI got next errors.\r\nTop level error is:\r\n\r\n```\r\njavax.script.ScriptException: Failed to compile ctx\r\n        at scala.tools.nsc.interpreter.shell.Scripted.&lt;init&gt;(Scripted.scala:89) ~[scala-compiler-2.13.10.jar:?]\r\n        at scala.tools.nsc.interpreter.shell.Scripted$.apply(Scripted.scala:278) ~[scala-compiler-2.13.10.jar:?]\r\n        at scala.tools.nsc.interpreter.shell.Scripted.apply(Scripted.scala) ~[scala-compiler-2.13.10.jar:?]\r\n```\r\nand some other errors from compiler:\r\n\r\n```\r\njava.lang.NullPointerException\r\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\r\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\r\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\r\n......\r\njava.io.IOException: class file &#39;file:..../target/lib/scala-library-2.13.10.jar(scala/Predef.class)&#39; is broken\r\n(class java.lang.NullPointerException/null)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\r\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\r\n......\r\njava.lang.NullPointerException\r\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\r\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\r\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.$anonfun$parse$2(ClassfileParser.scala:161)\r\n......\r\njava.io.IOException: class file &#39;file:..../target/lib/scala-library-2.13.10.jar(scala/Unit.class)&#39; is broken\r\n(class java.lang.NullPointerException/null)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\r\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.parse(ClassfileParser.scala:144)\r\n```\r\n\r\nIt looks like scala compiler for some reason can not read jar source files.\r\n\r\nJava version: \r\nopenjdk version &quot;11&quot; 2018-09-25\r\nOpenJDK Runtime Environment 18.9 (build 11+28)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\n&gt; Updated after [Dmytro answer][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/75451783?noredirect=1\r\n\r\nIt helps. Thanks alot.\r\n\r\nBut still got 1 issue with runtime classloading. I want user be able to add new dependency jar runtime.\r\n\r\nOn first version i do it like: `engine.intp().addUrlsToClassPath(new ArraySeq.ofRef&lt;&gt;(url))`. And it works well(i mean well when run inside IDEA)\r\n\r\nNow i try do it like:\r\n```\r\nprivate final ScalaCompilerClassLoader urlClassLoader = new ScalaCompilerClassLoader(new URL[]{},ClassLoader.getSystemClassLoader());\r\n\r\nprivate static class ScalaCompilerClassLoader extends URLClassLoader {\r\n\tpublic ScalaCompilerClassLoader(URL[] urls, ClassLoader parent) {\r\n           super(urls, parent);\r\n\t}\r\n\r\n    public void add(URL url){\r\n        super.addURL(url);\r\n    }\r\n}\r\n```\r\nand i use your code with my classLoader.\r\n```\r\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(urlClassLoader);\r\n```\r\n\r\nThe issue is that i can add new jar to my urlClassLoader before first call to `toolBox.eval(toolBox.parse(sourceCode))`.\r\nAfter first `toolBox.eval` call newly injected dependencies are not recognized by compiler.\r\n\r\nAnd now i have to create new toolBox after each new jar dependency injecting.","title":"Scala script engine not initialized when starting java -jar file. javax.script.ScriptException: Failed to compile ctx","body":"<p>i am trying to compile scala code in runtime in java programm.\nI am using jsr232 api and my code looks <strong>like</strong>:</p>\n<pre><code>ScriptEngineManager manager=new ScriptEngineManager();\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\nengine.compile(sourceCode);\n</code></pre>\n<p>My pom looks <strong>like</strong>:</p>\n<pre><code>&lt;properties&gt;\n   &lt;scala.version&gt;2.13.10&lt;/scala.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-compiler&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-reflect&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n       &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>When i am running such code in IDE all is ok and i have no problems (all dependencies jars are in -classpath option)\nBut after i try to package to jar with copy dependencies (so i have small jar with fat manifest and put all dependencies to lib folder).</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                    &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                    &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                    &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;$$$MYCLASS$$$&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Class-Path&gt;.&lt;/Class-Path&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>and run my application i got null on <code>(Scripted) manager.getEngineByName(&quot;scala&quot;);</code></p>\n<p>After some research i found that <code>javax.script.ScriptEngineManager</code> contains scala engine factory;\nBut 'javax.script.ScriptEngineManager#getEngineByName(String)' returns null if something go wrong during method execution(without printstacktrace).\nAnd my problem is on <code>ScriptEngine engine = spi.getScriptEngine();</code></p>\n<p>I manually try to create Scala script engine the same way as manager and Scala.Factory(Engine factory) do this with some debug settings:</p>\n<pre><code>if(engine==null) {\n    log.warn(&quot;No scala script engine exists. Try load again&quot;);\n    try {\n        Settings settings = new Settings();\n        settings.usejavacp().value_$eq(true);//same as scala code \n        settings.usemanifestcp().value_$eq(true); //same as scala code\n                settings.Yreplclassbased().value_$eq(true); //same as scala code\n                settings.verbose().value_$eq(true); //for more logs\n                settings.debug().value_$eq(true); //for more logs\n        Scripted.Factory fact = new Scripted.Factory();\n        engine= Scripted.apply(fact,settings, ReplReporterImpl.defaultOut());\n    }catch (Exception e){\n        log.error(&quot;Scala compiler wasn't initialized&quot;,e);\n        return;\n    }\n}\n</code></pre>\n<p>I got next errors.\nTop level error is:</p>\n<pre><code>javax.script.ScriptException: Failed to compile ctx\n        at scala.tools.nsc.interpreter.shell.Scripted.&lt;init&gt;(Scripted.scala:89) ~[scala-compiler-2.13.10.jar:?]\n        at scala.tools.nsc.interpreter.shell.Scripted$.apply(Scripted.scala:278) ~[scala-compiler-2.13.10.jar:?]\n        at scala.tools.nsc.interpreter.shell.Scripted.apply(Scripted.scala) ~[scala-compiler-2.13.10.jar:?]\n</code></pre>\n<p>and some other errors from compiler:</p>\n<pre><code>java.lang.NullPointerException\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\n......\njava.io.IOException: class file 'file:..../target/lib/scala-library-2.13.10.jar(scala/Predef.class)' is broken\n(class java.lang.NullPointerException/null)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\n......\njava.lang.NullPointerException\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.$anonfun$parse$2(ClassfileParser.scala:161)\n......\njava.io.IOException: class file 'file:..../target/lib/scala-library-2.13.10.jar(scala/Unit.class)' is broken\n(class java.lang.NullPointerException/null)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.parse(ClassfileParser.scala:144)\n</code></pre>\n<p>It looks like scala compiler for some reason can not read jar source files.</p>\n<p>Java version:\nopenjdk version &quot;11&quot; 2018-09-25\nOpenJDK Runtime Environment 18.9 (build 11+28)\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n<blockquote>\n<p>Updated after <a href=\"https://stackoverflow.com/a/75451783?noredirect=1\">Dmytro answer</a></p>\n</blockquote>\n<p>It helps. Thanks alot.</p>\n<p>But still got 1 issue with runtime classloading. I want user be able to add new dependency jar runtime.</p>\n<p>On first version i do it like: <code>engine.intp().addUrlsToClassPath(new ArraySeq.ofRef&lt;&gt;(url))</code>. And it works well(i mean well when run inside IDEA)</p>\n<p>Now i try do it like:</p>\n<pre><code>private final ScalaCompilerClassLoader urlClassLoader = new ScalaCompilerClassLoader(new URL[]{},ClassLoader.getSystemClassLoader());\n\nprivate static class ScalaCompilerClassLoader extends URLClassLoader {\n    public ScalaCompilerClassLoader(URL[] urls, ClassLoader parent) {\n           super(urls, parent);\n    }\n\n    public void add(URL url){\n        super.addURL(url);\n    }\n}\n</code></pre>\n<p>and i use your code with my classLoader.</p>\n<pre><code>JavaUniverse.JavaMirror mirror = universe.runtimeMirror(urlClassLoader);\n</code></pre>\n<p>The issue is that i can add new jar to my urlClassLoader before first call to <code>toolBox.eval(toolBox.parse(sourceCode))</code>.\nAfter first <code>toolBox.eval</code> call newly injected dependencies are not recognized by compiler.</p>\n<p>And now i have to create new toolBox after each new jar dependency injecting.</p>\n"},{"tags":["java","amazon-web-services","redis","elastic-cache"],"comments":[{"owner":{"account_id":7027398,"reputation":21375,"user_id":5384363,"accept_rate":64,"display_name":"for_stack"},"score":0,"creation_date":1677118351,"post_id":75531341,"comment_id":133276590,"body_markdown":"[This](https://stackoverflow.com/questions/75515917) is a similar question. Check its answer. Instead of getting the range of an input range, you can get the first item larger than the input (i.e. `zrangebyscore ranges input inf limit 0 1`), and check if your input is in the returned range.","body":"<a href=\"https://stackoverflow.com/questions/75515917\">This</a> is a similar question. Check its answer. Instead of getting the range of an input range, you can get the first item larger than the input (i.e. <code>zrangebyscore ranges input inf limit 0 1</code>), and check if your input is in the returned range."}],"owner":{"account_id":1410257,"reputation":2118,"user_id":1337007,"accept_rate":72,"display_name":"ghostrider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677061522,"creation_date":1677061522,"question_id":75531341,"body_markdown":"I have a requirement to check if the `input` number is between 2 ranges `lowrange` and `highrange`. These range values can be defined as 2 separate columns like below(similar to RDBMS) or maybe any other `datastructure` that redis or any in memory cache supports. I know `redis` or any other cache for that matter stores key value pair but is there any datastructure that redis has, that can support below use case? I thought of having a string key that can store &quot;lowrange-highrange&quot;, but that means I have to iteratively read all the keys of cache, store them locally and then check if my int input is between them. \r\n\r\n**Input** = 12345\r\n\r\n**Entry in redis**\r\n\r\n**lowrange &amp;nbsp;&amp;nbsp; highrange   &amp;nbsp; value**\r\n\r\n12340 &amp;nbsp;  &amp;nbsp; &amp;nbsp;  &amp;nbsp;        12349&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;     &quot;I am inside this range&quot;","title":"Is it possible to check for betweenness in the key in redis cache","body":"<p>I have a requirement to check if the <code>input</code> number is between 2 ranges <code>lowrange</code> and <code>highrange</code>. These range values can be defined as 2 separate columns like below(similar to RDBMS) or maybe any other <code>datastructure</code> that redis or any in memory cache supports. I know <code>redis</code> or any other cache for that matter stores key value pair but is there any datastructure that redis has, that can support below use case? I thought of having a string key that can store &quot;lowrange-highrange&quot;, but that means I have to iteratively read all the keys of cache, store them locally and then check if my int input is between them.</p>\n<p><strong>Input</strong> = 12345</p>\n<p><strong>Entry in redis</strong></p>\n<p><strong>lowrange    highrange     value</strong></p>\n<p>12340                  12349            &quot;I am inside this range&quot;</p>\n"},{"tags":["java","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677082952,"post_id":75530334,"comment_id":133268414,"body_markdown":"I don&#39;t follow you, but maybe it is because of your naming. What is StoreBond and why does it exist? Store-&gt;User is a ManyToMany or a OneToMany (where user then has a ManyToOne-&gt;Store)? JPA does not force you to do anything, your use case is the one forcing you to have some container that can hold Store references. Why would there be a problem with a Store entity having references? It is a common practice, and while there are pitfalls with references, they have well documented solutions.","body":"I don&#39;t follow you, but maybe it is because of your naming. What is StoreBond and why does it exist? Store-&gt;User is a ManyToMany or a OneToMany (where user then has a ManyToOne-&gt;Store)? JPA does not force you to do anything, your use case is the one forcing you to have some container that can hold Store references. Why would there be a problem with a Store entity having references? It is a common practice, and while there are pitfalls with references, they have well documented solutions."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677083076,"post_id":75530334,"comment_id":133268459,"body_markdown":"Otherwise, you can easily have a StoreLight (for basic mappings) and Store entity with references (Both just need the Table annotation that tells JPA that they use the same table), or just use view objects or fetch graphs to only return the basic mappings on the Store entity. As for querying, if User has a reference to Store, you don&#39;t need a reference from Store to user to be able to query over that relationship.","body":"Otherwise, you can easily have a StoreLight (for basic mappings) and Store entity with references (Both just need the Table annotation that tells JPA that they use the same table), or just use view objects or fetch graphs to only return the basic mappings on the Store entity. As for querying, if User has a reference to Store, you don&#39;t need a reference from Store to user to be able to query over that relationship."},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677242574,"post_id":75530334,"comment_id":133304045,"body_markdown":"Hmm... what I want and have are Store things, defined as own entities, because I have not found it historically stable or maintainable enough to have one big store entity containing all the stuff related to it. \n\nRather, if I need to add something to Store, such as StoreCustomer, I create a new entity and thus a new table with that relationship alone. \n\nHowever, doing it this way, you no longer have a central Store entity, from which you can a) search, b) collect related data easily.","body":"Hmm... what I want and have are Store things, defined as own entities, because I have not found it historically stable or maintainable enough to have one big store entity containing all the stuff related to it.   Rather, if I need to add something to Store, such as StoreCustomer, I create a new entity and thus a new table with that relationship alone.   However, doing it this way, you no longer have a central Store entity, from which you can a) search, b) collect related data easily."},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677242773,"post_id":75530334,"comment_id":133304096,"body_markdown":"Now, there should be a way to create a Store entity that only exists in theory,  or as a mapper object which will allow you this, which we could call StoreBond. \n\nIt would be only a read entity, and for the purpose of querying and building say hibernate criteria queries. \n\nThe other relationships already exists, so it would be a question of how to map existing tables onto this readonly lesser &quot;entity&quot;. I do not need a table for it but that I can manage do myself.","body":"Now, there should be a way to create a Store entity that only exists in theory,  or as a mapper object which will allow you this, which we could call StoreBond.   It would be only a read entity, and for the purpose of querying and building say hibernate criteria queries.   The other relationships already exists, so it would be a question of how to map existing tables onto this readonly lesser &quot;entity&quot;. I do not need a table for it but that I can manage do myself."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677253255,"post_id":75530334,"comment_id":133307170,"body_markdown":"Not sure what you mean at all - Other than the need for a customers table (and possibly ManyToMany join table) what new or other table is involved? If you have a Store entity, adding a reference to a list of customers seems trivial. You can clear up what you mean by showing it in your question, but yes, you can map an entity to a table, any table, just to read from them. Caching that data becomes a pain - if you&#39;ve already loaded that same partial data as &#39;storeX&#39; querying and fetching &#39;StoreY&#39; can&#39;t use any of it and will have to fetch it again.","body":"Not sure what you mean at all - Other than the need for a customers table (and possibly ManyToMany join table) what new or other table is involved? If you have a Store entity, adding a reference to a list of customers seems trivial. You can clear up what you mean by showing it in your question, but yes, you can map an entity to a table, any table, just to read from them. Caching that data becomes a pain - if you&#39;ve already loaded that same partial data as &#39;storeX&#39; querying and fetching &#39;StoreY&#39; can&#39;t use any of it and will have to fetch it again."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677253367,"post_id":75530334,"comment_id":133307208,"body_markdown":"Why not just create the uber Store entity that models the database as it really is. If your issues are with passing around that instance, that is what DTOs and mappers are for - use your trimmed down view objects to convert Store instances into StoreCustomerDTO with only the data needed. Leave everything as lazily fetched and you won&#39;t see much difference (though fetch joins might help on some relationships if you know they&#39;ll be needed for some DTOs but not others). Projections (answered above) is common in Spring for the same thing, as is JPA constructor queries to build non-entities","body":"Why not just create the uber Store entity that models the database as it really is. If your issues are with passing around that instance, that is what DTOs and mappers are for - use your trimmed down view objects to convert Store instances into StoreCustomerDTO with only the data needed. Leave everything as lazily fetched and you won&#39;t see much difference (though fetch joins might help on some relationships if you know they&#39;ll be needed for some DTOs but not others). Projections (answered above) is common in Spring for the same thing, as is JPA constructor queries to build non-entities"},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677257937,"post_id":75530334,"comment_id":133308582,"body_markdown":"The uber entity is exactly what I am trying to avoid. JoinTable seems to have done the trick for now.","body":"The uber entity is exactly what I am trying to avoid. JoinTable seems to have done the trick for now."}],"answers":[{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677061488,"creation_date":1677061488,"answer_id":75531336,"question_id":75530334,"body_markdown":"To query without the need of an entity can be solved using `projections`. A very good answer provided by Vlad Mihalcea on [stackoverflow - 23719237][1].\r\n\r\nInstead of an entity to aggregate `store` data, you can a DTO to store the data fetched.\r\n\r\nIn your case, you would still have a class like `StoreBond`, but as a simple DTO instead of an entity.\r\n\r\nHowever your question is quite challenging in itself because I do no think it is possible to all the data at once or even with the help of a &quot;third&quot; table. \r\n\r\nThe &quot;third&quot; table would be looking like;\r\n\r\n    store id       user id      address id\r\n    1               1           null\r\n    1               2           null\r\n    1               null        1\r\n    1               null        2\r\n\r\nIf there is a native query to fetch all the data at once, it can easily be translated to JPQL and used with the JPA&#39;s `EntityManager`.\r\n\r\n  [1]: https://stackoverflow.com/a/45934668/6200354","title":"How to create a mapping entity to its association without creating a new table","body":"<p>To query without the need of an entity can be solved using <code>projections</code>. A very good answer provided by Vlad Mihalcea on <a href=\"https://stackoverflow.com/a/45934668/6200354\">stackoverflow - 23719237</a>.</p>\n<p>Instead of an entity to aggregate <code>store</code> data, you can a DTO to store the data fetched.</p>\n<p>In your case, you would still have a class like <code>StoreBond</code>, but as a simple DTO instead of an entity.</p>\n<p>However your question is quite challenging in itself because I do no think it is possible to all the data at once or even with the help of a &quot;third&quot; table.</p>\n<p>The &quot;third&quot; table would be looking like;</p>\n<pre><code>store id       user id      address id\n1               1           null\n1               2           null\n1               null        1\n1               null        2\n</code></pre>\n<p>If there is a native query to fetch all the data at once, it can easily be translated to JPQL and used with the JPA's <code>EntityManager</code>.</p>\n"}],"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677061488,"creation_date":1677056670,"question_id":75530334,"body_markdown":"This has always been an annoyance with Hibernate / JPA and now trying to see if there is a way around this limitation. \r\n\r\nBasically given a **Store** and **User** ... say a **Store** has **many** **users**. \r\n\r\nI prefer **Store** declared **manually** in a **Store** table, and users in a **User** table. The connection is in a **StoreUser** table. \r\n\r\nYou repeat this for a number of this, **StoreAddress**, **StoreEmployee** and so on and you have a bunch of things. \r\n\r\nHowever, for the common case of getting everything related to a **Store**, and getting the users, addresses and what not, JPA forces you to create a Store Entity that contains all these things.\r\n\r\n    StoreBond {\r\n           List&lt;Address&gt; address\r\n           List&lt;User&gt; users\r\n           ....\r\n    }\r\n\r\nMy intention is just to user this for query, never to insert so **I don&#39;t need a table for it**.  \r\n\r\nMy intention is to be able to build **Hibernate** **criteria** queries and map the associations to do so. Criteria queries can be quite powerful to filter on things. \r\n\r\nBut I do not want an empty table in my sql schema since it won&#39;t do anything anyway, I also don&#39;t want this class to have anything to do with the model other than mapping to it results from the database. \r\n\r\nIs there a way around this limitation. \r\n\r\nTo have a **connection/bond entity** merely for getting to the associations to be able to query them and binding the result to this object. \r\n\r\nThe alternative is that I have declared **StoreBond** { .. } class as the center of everything, which I find problematic over time. \r\n\r\nEmbeddable is problematic syntactically so I please do not entertain it for this purpose. \r\n\r\nNot, sure what happens if you map such a StoreBond entity currently and then immediately after schema generation drop it from the database. I think that might still work on the JPA level, but not sure. It might be required to have certain ids populated which would be the basis for reaching out to the other associations? \r\n\r\n\r\n","title":"How to create a mapping entity to its association without creating a new table","body":"<p>This has always been an annoyance with Hibernate / JPA and now trying to see if there is a way around this limitation.</p>\n<p>Basically given a <strong>Store</strong> and <strong>User</strong> ... say a <strong>Store</strong> has <strong>many</strong> <strong>users</strong>.</p>\n<p>I prefer <strong>Store</strong> declared <strong>manually</strong> in a <strong>Store</strong> table, and users in a <strong>User</strong> table. The connection is in a <strong>StoreUser</strong> table.</p>\n<p>You repeat this for a number of this, <strong>StoreAddress</strong>, <strong>StoreEmployee</strong> and so on and you have a bunch of things.</p>\n<p>However, for the common case of getting everything related to a <strong>Store</strong>, and getting the users, addresses and what not, JPA forces you to create a Store Entity that contains all these things.</p>\n<pre><code>StoreBond {\n       List&lt;Address&gt; address\n       List&lt;User&gt; users\n       ....\n}\n</code></pre>\n<p>My intention is just to user this for query, never to insert so <strong>I don't need a table for it</strong>.</p>\n<p>My intention is to be able to build <strong>Hibernate</strong> <strong>criteria</strong> queries and map the associations to do so. Criteria queries can be quite powerful to filter on things.</p>\n<p>But I do not want an empty table in my sql schema since it won't do anything anyway, I also don't want this class to have anything to do with the model other than mapping to it results from the database.</p>\n<p>Is there a way around this limitation.</p>\n<p>To have a <strong>connection/bond entity</strong> merely for getting to the associations to be able to query them and binding the result to this object.</p>\n<p>The alternative is that I have declared <strong>StoreBond</strong> { .. } class as the center of everything, which I find problematic over time.</p>\n<p>Embeddable is problematic syntactically so I please do not entertain it for this purpose.</p>\n<p>Not, sure what happens if you map such a StoreBond entity currently and then immediately after schema generation drop it from the database. I think that might still work on the JPA level, but not sure. It might be required to have certain ids populated which would be the basis for reaching out to the other associations?</p>\n"},{"tags":["java","selenium","webdriver","selenium-webdriver"],"comments":[{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":8,"creation_date":1413953548,"post_id":5868439,"comment_id":41633160,"body_markdown":"To me only [Paul&#39;s](http://stackoverflow.com/a/5876462/705773) answer look correct, most of the highly voted answer talks about waiting for a particular element.","body":"To me only <a href=\"http://stackoverflow.com/a/5876462/705773\">Paul&#39;s</a> answer look correct, most of the highly voted answer talks about waiting for a particular element."},{"owner":{"account_id":6781763,"reputation":3428,"user_id":5267751,"display_name":"user202729"},"score":0,"creation_date":1639039251,"post_id":5868439,"comment_id":124247874,"body_markdown":"See also: [load - Selenium wait until document is ready - Stack Overflow](https://stackoverflow.com/questions/15122864/selenium-wait-until-document-is-ready/15124562#15124562) and  [Python Selenium - Wait until next page has loaded after form submit - Stack Overflow](https://stackoverflow.com/questions/42069503/python-selenium-wait-until-next-page-has-loaded-after-form-submit)","body":"See also: <a href=\"https://stackoverflow.com/questions/15122864/selenium-wait-until-document-is-ready/15124562#15124562\">load - Selenium wait until document is ready - Stack Overflow</a> and  <a href=\"https://stackoverflow.com/questions/42069503/python-selenium-wait-until-next-page-has-loaded-after-form-submit\">Python Selenium - Wait until next page has loaded after form submit - Stack Overflow</a>"}],"answers":[{"tags":[],"owner":{"account_id":163414,"reputation":6088,"user_id":385544,"accept_rate":97,"display_name":"Paul Hadfield"},"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1444473830,"creation_date":1304461627,"answer_id":5876462,"question_id":5868439,"body_markdown":"In general, with Selenium 2.0 the web driver should only return control to the calling code once it has determined that the page has loaded. If it does not, you can call `waitforelemement`, which cycles round calling `findelement` until it is found or times out (time out can be set).\r\n","title":"Wait for page load in Selenium","body":"<p>In general, with Selenium 2.0 the web driver should only return control to the calling code once it has determined that the page has loaded. If it does not, you can call <code>waitforelemement</code>, which cycles round calling <code>findelement</code> until it is found or times out (time out can be set).</p>\n"},{"tags":[],"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1413953435,"creation_date":1306227438,"answer_id":6107997,"question_id":5868439,"body_markdown":"If you want to wait for a specific element to load, you can use the `isDisplayed()` method on a `RenderedWebElement` :\r\n\r\n    // Sleep until the div we want is visible or 5 seconds is over\r\n    long end = System.currentTimeMillis() + 5000;\r\n    while (System.currentTimeMillis() &lt; end) {\r\n        // Browsers which render content (such as Firefox and IE) return &quot;RenderedWebElements&quot;\r\n        RenderedWebElement resultsDiv = (RenderedWebElement) driver.findElement(By.className(&quot;gac_m&quot;));\r\n\r\n        // If results have been returned, the results are displayed in a drop down.\r\n        if (resultsDiv.isDisplayed()) {\r\n          break;\r\n        }\r\n    }\r\n\r\n(Example from [The 5 Minute Getting Started Guide][1])\r\n\r\n[1]:http://code.google.com/p/selenium/wiki/GettingStarted","title":"Wait for page load in Selenium","body":"<p>If you want to wait for a specific element to load, you can use the <code>isDisplayed()</code> method on a <code>RenderedWebElement</code> :</p>\n\n<pre><code>// Sleep until the div we want is visible or 5 seconds is over\nlong end = System.currentTimeMillis() + 5000;\nwhile (System.currentTimeMillis() &lt; end) {\n    // Browsers which render content (such as Firefox and IE) return \"RenderedWebElements\"\n    RenderedWebElement resultsDiv = (RenderedWebElement) driver.findElement(By.className(\"gac_m\"));\n\n    // If results have been returned, the results are displayed in a drop down.\n    if (resultsDiv.isDisplayed()) {\n      break;\n    }\n}\n</code></pre>\n\n<p>(Example from <a href=\"http://code.google.com/p/selenium/wiki/GettingStarted\" rel=\"nofollow\">The 5 Minute Getting Started Guide</a>)</p>\n"},{"tags":[],"owner":{"account_id":369852,"reputation":2411,"user_id":2212886,"display_name":"Artem"},"down_vote_count":5,"up_vote_count":106,"is_accepted":false,"score":101,"last_activity_date":1641244522,"creation_date":1318961805,"answer_id":7811812,"question_id":5868439,"body_markdown":"Use class [WebDriverWait][1]\r\n\r\nAlso see [here][2]\r\n\r\n\r\n  [1]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\r\n  [2]: http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits\r\n\r\nYou can expect to show some element. something like in C#:\r\n\r\n    WebDriver _driver = new WebDriver();\r\n    WebDriverWait _wait = new WebDriverWait(_driver, new TimeSpan(0, 1, 0));\r\n    \r\n    _wait.Until(d =&gt; d.FindElement(By.Id(&quot;Id_Your_UIElement&quot;)));","title":"Wait for page load in Selenium","body":"<p>Use class <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\" rel=\"nofollow noreferrer\">WebDriverWait</a></p>\n<p>Also see <a href=\"http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits\" rel=\"nofollow noreferrer\">here</a></p>\n<p>You can expect to show some element. something like in C#:</p>\n<pre><code>WebDriver _driver = new WebDriver();\nWebDriverWait _wait = new WebDriverWait(_driver, new TimeSpan(0, 1, 0));\n\n_wait.Until(d =&gt; d.FindElement(By.Id(&quot;Id_Your_UIElement&quot;)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":82308,"reputation":2437,"user_id":231513,"accept_rate":71,"display_name":"Sam"},"down_vote_count":5,"up_vote_count":48,"is_accepted":false,"score":43,"last_activity_date":1413955230,"creation_date":1322581830,"answer_id":8313663,"question_id":5868439,"body_markdown":"If you set the implicit wait of the driver, then call the `findElement` method on an element you expect to be on the loaded page, the WebDriver will poll for that element until it finds the element or reaches the time out value.\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\n\r\nsource: [implicit-waits][1]\r\n\r\n[1]:http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits","title":"Wait for page load in Selenium","body":"<p>If you set the implicit wait of the driver, then call the <code>findElement</code> method on an element you expect to be on the loaded page, the WebDriver will poll for that element until it finds the element or reaches the time out value.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n\n<p>source: <a href=\"http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits\" rel=\"noreferrer\">implicit-waits</a></p>\n"},{"tags":[],"owner":{"account_id":324759,"reputation":1607,"user_id":645536,"accept_rate":50,"display_name":"anirus"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1620720605,"creation_date":1327544240,"answer_id":9013241,"question_id":5868439,"body_markdown":"You can explicitly wait for an element to show up on the webpage before you can take any action (like `element.click()`):\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    driver.get(&quot;http://somedomain/url_that_delays_loading&quot;);\r\n    WebElement myDynamicElement = (new WebDriverWait(driver, 10))\r\n        .until(new ExpectedCondition&lt;WebElement&gt;() {\r\n        \t@Override\r\n        \tpublic WebElement apply(WebDriver d) {\r\n      \t\t    return d.findElement(By.id(&quot;myDynamicElement&quot;));\r\n\t        }\r\n        }\r\n    );\r\n\r\nThis is what I used for a similar scenario and it works fine.","title":"Wait for page load in Selenium","body":"<p>You can explicitly wait for an element to show up on the webpage before you can take any action (like <code>element.click()</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.get(&quot;http://somedomain/url_that_delays_loading&quot;);\nWebElement myDynamicElement = (new WebDriverWait(driver, 10))\n    .until(new ExpectedCondition&lt;WebElement&gt;() {\n        @Override\n        public WebElement apply(WebDriver d) {\n            return d.findElement(By.id(&quot;myDynamicElement&quot;));\n        }\n    }\n);\n</code></pre>\n<p>This is what I used for a similar scenario and it works fine.</p>\n"},{"tags":[],"owner":{"account_id":1275305,"reputation":621,"user_id":1230702,"display_name":"TedEd"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1330103187,"creation_date":1330084732,"answer_id":9430377,"question_id":5868439,"body_markdown":"You can also use the class: *`ExpectedConditions`* to explicitly wait for an element to show up on the webpage before you can take any action further actions\r\n\r\nYou can use the `ExpectedConditions` class to determine if an element is visible:\r\n\r\n    WebElement element = (new WebDriverWait(getDriver(), 10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;input#houseName&quot;)));\r\n    \r\nSee `ExpectedConditions class Javadoc` for list of all conditions you are able to check.","title":"Wait for page load in Selenium","body":"<p>You can also use the class: <em><code>ExpectedConditions</code></em> to explicitly wait for an element to show up on the webpage before you can take any action further actions</p>\n\n<p>You can use the <code>ExpectedConditions</code> class to determine if an element is visible:</p>\n\n<pre><code>WebElement element = (new WebDriverWait(getDriver(), 10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(\"input#houseName\")));\n</code></pre>\n\n<p>See <code>ExpectedConditions class Javadoc</code> for list of all conditions you are able to check.</p>\n"},{"tags":[],"owner":{"account_id":82797,"reputation":6290,"user_id":232542,"accept_rate":77,"display_name":"sibidiba"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1336750345,"creation_date":1336750345,"answer_id":10554400,"question_id":5868439,"body_markdown":"This seems to be a serious limitation of WebDriver. Obviously waiting for an element will not imply the page being loaded, in particular the DOM can be fully build (onready state) whereby JS is still executing and CSS and images are still loading.\r\n\r\nI believe the simplest solution is to set a JS variable upon the onload event after everything is initialized and check and wait for this JS variable in Selenium.","title":"Wait for page load in Selenium","body":"<p>This seems to be a serious limitation of WebDriver. Obviously waiting for an element will not imply the page being loaded, in particular the DOM can be fully build (onready state) whereby JS is still executing and CSS and images are still loading.</p>\n\n<p>I believe the simplest solution is to set a JS variable upon the onload event after everything is initialized and check and wait for this JS variable in Selenium.</p>\n"},{"tags":[],"owner":{"account_id":1631349,"reputation":1565,"user_id":1505801,"display_name":"Imran"},"down_vote_count":3,"up_vote_count":157,"is_accepted":false,"score":154,"last_activity_date":1341577401,"creation_date":1341551933,"answer_id":11356234,"question_id":5868439,"body_markdown":"You can also check pageloaded using following code\r\n\r\n    IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));\r\n    \r\n     wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(&quot;return document.readyState&quot;).Equals(&quot;complete&quot;));","title":"Wait for page load in Selenium","body":"<p>You can also check pageloaded using following code</p>\n\n<pre><code>IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));\n\n wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(\"return document.readyState\").Equals(\"complete\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1974593,"reputation":215,"user_id":1772675,"display_name":"tux23"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1444474081,"creation_date":1351124782,"answer_id":13059889,"question_id":5868439,"body_markdown":"**SeleniumWaiter**:\r\n\r\n    import com.google.common.base.Function;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n\r\n    public class SeleniumWaiter {\r\n\r\n          private WebDriver driver;\r\n\r\n          public SeleniumWaiter(WebDriver driver) {\r\n               this.driver = driver;\r\n          }\r\n\r\n          public WebElement waitForMe(By locatorname, int timeout){\r\n               WebDriverWait wait = new WebDriverWait(driver, timeout);\r\n               return wait.until(SeleniumWaiter.presenceOfElementLocated(locatorname));\r\n          }\r\n\r\n          public static Function&lt;WebDriver, WebElement&gt; presenceOfElementLocated(final By locator) {\r\n                // TODO Auto-generated method stub\r\n                return new Function&lt;WebDriver, WebElement&gt;() {\r\n                     @Override\r\n                     public WebElement apply(WebDriver driver) {\r\n                          return driver.findElement(locator);\r\n                     }\r\n                };\r\n          }\r\n     }\r\n\r\nAnd to you **use it**:\r\n\r\n    _waiter = new SeleniumWaiter(_driver);\r\n\r\n    try {\r\n       _waiter.waitForMe(By.xpath(&quot;//...&quot;), 10);\r\n    } \r\n    catch (Exception e) {\r\n       // Error\r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p><strong>SeleniumWaiter</strong>:</p>\n\n<pre><code>import com.google.common.base.Function;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class SeleniumWaiter {\n\n      private WebDriver driver;\n\n      public SeleniumWaiter(WebDriver driver) {\n           this.driver = driver;\n      }\n\n      public WebElement waitForMe(By locatorname, int timeout){\n           WebDriverWait wait = new WebDriverWait(driver, timeout);\n           return wait.until(SeleniumWaiter.presenceOfElementLocated(locatorname));\n      }\n\n      public static Function&lt;WebDriver, WebElement&gt; presenceOfElementLocated(final By locator) {\n            // TODO Auto-generated method stub\n            return new Function&lt;WebDriver, WebElement&gt;() {\n                 @Override\n                 public WebElement apply(WebDriver driver) {\n                      return driver.findElement(locator);\n                 }\n            };\n      }\n }\n</code></pre>\n\n<p>And to you <strong>use it</strong>:</p>\n\n<pre><code>_waiter = new SeleniumWaiter(_driver);\n\ntry {\n   _waiter.waitForMe(By.xpath(\"//...\"), 10);\n} \ncatch (Exception e) {\n   // Error\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":205475,"reputation":27350,"user_id":454252,"accept_rate":56,"display_name":"allenhwkim"},"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1444474136,"creation_date":1360954580,"answer_id":14901494,"question_id":5868439,"body_markdown":"Ruby implementation:\r\n\r\n    wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\r\n    wait.until {\r\n        @driver.execute_script(&quot;return document.readyState;&quot;) == &quot;complete&quot; \r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p>Ruby implementation:</p>\n\n<pre><code>wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\nwait.until {\n    @driver.execute_script(\"return document.readyState;\") == \"complete\" \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2850233,"reputation":3615,"user_id":2447599,"display_name":"Ran Adler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371732742,"creation_date":1371732742,"answer_id":17214138,"question_id":5868439,"body_markdown":"    driver.asserts().assertElementFound(&quot;Page was not loaded&quot;,\r\n    By.xpath(&quot;//div[@id=&#39;actionsContainer&#39;]&quot;),Constants.LOOKUP_TIMEOUT);","title":"Wait for page load in Selenium","body":"<pre><code>driver.asserts().assertElementFound(\"Page was not loaded\",\nBy.xpath(\"//div[@id='actionsContainer']\"),Constants.LOOKUP_TIMEOUT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":385160,"reputation":439,"user_id":742137,"display_name":"Marc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1380311154,"creation_date":1380311154,"answer_id":19058894,"question_id":5868439,"body_markdown":"\r\n\t/**\r\n\t * Call this method before an event that will change the page.\r\n\t */\r\n\tprivate void beforePageLoad() {\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\tjs.executeScript(&quot;document.mpPageReloaded=&#39;notYet&#39;;&quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Call this method after an event that will change the page.\r\n\t * \r\n\t * @see #beforePageLoad\r\n\t * \r\n\t *      Waits for the previous page to disappear.\r\n\t */\r\n\tprivate void afterPageLoad() throws Exception {\r\n\t\t(new WebDriverWait(driver, 10)).until(new Predicate&lt;WebDriver&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean apply(WebDriver driver) {\r\n\t\t\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\t\t\tObject obj = js.executeScript(&quot;return document.mpPageReloaded;&quot;);\r\n\t\t\t\tif (obj == null) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tString str = (String) obj;\r\n\t\t\t\tif (!str.equals(&quot;notYet&quot;)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\nYou can change from the document to an element, in the case of where only part of a document is being changed.\r\n\r\nThis technique was inspired by the answer from sincebasic.","title":"Wait for page load in Selenium","body":"<pre><code>/**\n * Call this method before an event that will change the page.\n */\nprivate void beforePageLoad() {\n    JavascriptExecutor js = (JavascriptExecutor) driver;\n    js.executeScript(\"document.mpPageReloaded='notYet';\");\n}\n\n/**\n * Call this method after an event that will change the page.\n * \n * @see #beforePageLoad\n * \n *      Waits for the previous page to disappear.\n */\nprivate void afterPageLoad() throws Exception {\n    (new WebDriverWait(driver, 10)).until(new Predicate&lt;WebDriver&gt;() {\n\n        @Override\n        public boolean apply(WebDriver driver) {\n            JavascriptExecutor js = (JavascriptExecutor) driver;\n            Object obj = js.executeScript(\"return document.mpPageReloaded;\");\n            if (obj == null) {\n                return true;\n            }\n            String str = (String) obj;\n            if (!str.equals(\"notYet\")) {\n                return true;\n            }\n            return false;\n        }\n    });\n}\n</code></pre>\n\n<p>You can change from the document to an element, in the case of where only part of a document is being changed.</p>\n\n<p>This technique was inspired by the answer from sincebasic.</p>\n"},{"tags":[],"owner":{"account_id":3818343,"reputation":141,"user_id":3167096,"display_name":"Jack Mason"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1444474654,"creation_date":1389047398,"answer_id":20960528,"question_id":5868439,"body_markdown":"I&#39;m surprised that predicates weren&#39;t the first choice as you typically know what element(s) you will next interact with on the page you&#39;re waiting to load. My approach has always been to build out predicates/functions like `waitForElementByID(String id)` and `waitForElemetVisibleByClass(String className)`, etc. and then use and reuse these wherever I need them, be it for a page load or page content change I&#39;m waiting on.\r\n\r\nFor example,\r\n\r\nIn my test class:\r\n\r\n    driverWait.until(textIsPresent(&quot;expectedText&quot;);\r\n\r\nIn my test class parent:\r\n\r\n    protected Predicate&lt;WebDriver&gt; textIsPresent(String text){\r\n        final String t = text;\r\n        return new Predicate&lt;WebDriver&gt;(){\r\n            public boolean apply(WebDriver driver){\r\n                return isTextPresent(t);\r\n            }\r\n        };\r\n    }\r\n\r\n    protected boolean isTextPresent(String text){\r\n        return driver.getPageSource().contains(text);\r\n    }\r\n\r\nThough this seems like a lot, it takes care of checking repeatedly for you\r\nand the interval for how often to check can be set along with the ultimate\r\nwait time before timing out. Also, you will reuse such methods.\r\n\r\nIn this example, the parent class defined and initiated the `WebDriver driver` and the `WebDriverWait driverWait`.\r\n\r\nI hope this helps.\r\n","title":"Wait for page load in Selenium","body":"<p>I'm surprised that predicates weren't the first choice as you typically know what element(s) you will next interact with on the page you're waiting to load. My approach has always been to build out predicates/functions like <code>waitForElementByID(String id)</code> and <code>waitForElemetVisibleByClass(String className)</code>, etc. and then use and reuse these wherever I need them, be it for a page load or page content change I'm waiting on.</p>\n\n<p>For example,</p>\n\n<p>In my test class:</p>\n\n<pre><code>driverWait.until(textIsPresent(\"expectedText\");\n</code></pre>\n\n<p>In my test class parent:</p>\n\n<pre><code>protected Predicate&lt;WebDriver&gt; textIsPresent(String text){\n    final String t = text;\n    return new Predicate&lt;WebDriver&gt;(){\n        public boolean apply(WebDriver driver){\n            return isTextPresent(t);\n        }\n    };\n}\n\nprotected boolean isTextPresent(String text){\n    return driver.getPageSource().contains(text);\n}\n</code></pre>\n\n<p>Though this seems like a lot, it takes care of checking repeatedly for you\nand the interval for how often to check can be set along with the ultimate\nwait time before timing out. Also, you will reuse such methods.</p>\n\n<p>In this example, the parent class defined and initiated the <code>WebDriver driver</code> and the <code>WebDriverWait driverWait</code>.</p>\n\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":4093658,"reputation":274,"user_id":3361047,"display_name":"QIKHAN"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1444474743,"creation_date":1396448881,"answer_id":22814618,"question_id":5868439,"body_markdown":"You may remove the `System.out` line. It is added for debug purposes.\r\n\r\n    WebDriver driver_;\r\n\r\n    public void waitForPageLoad() {\r\n\r\n        Wait&lt;WebDriver&gt; wait = new WebDriverWait(driver_, 30);\r\n        wait.until(new Function&lt;WebDriver, Boolean&gt;() {\r\n            public Boolean apply(WebDriver driver) {\r\n                System.out.println(&quot;Current Window State       : &quot;\r\n                    + String.valueOf(((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;)));\r\n                return String\r\n                    .valueOf(((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;))\r\n                    .equals(&quot;complete&quot;);\r\n            }\r\n        });\r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p>You may remove the <code>System.out</code> line. It is added for debug purposes.</p>\n\n<pre><code>WebDriver driver_;\n\npublic void waitForPageLoad() {\n\n    Wait&lt;WebDriver&gt; wait = new WebDriverWait(driver_, 30);\n    wait.until(new Function&lt;WebDriver, Boolean&gt;() {\n        public Boolean apply(WebDriver driver) {\n            System.out.println(\"Current Window State       : \"\n                + String.valueOf(((JavascriptExecutor) driver).executeScript(\"return document.readyState\")));\n            return String\n                .valueOf(((JavascriptExecutor) driver).executeScript(\"return document.readyState\"))\n                .equals(\"complete\");\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":152008,"reputation":15429,"user_id":366221,"accept_rate":46,"display_name":"hwjp"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1409768784,"creation_date":1409768784,"answer_id":25651197,"question_id":5868439,"body_markdown":"All of these solutions are OK for specific cases, but they suffer from at least one of a couple of possible problems:\r\n\r\n1. They are not generic enough -- they want you to know, ahead of time, that some specific condition will be true of the page you are going to (eg some element will be displayed)\r\n\r\n2. They are open to a race condition where you use an element that is actually present on the old page as well as the new page.\r\n\r\nHere&#39;s my attempt at a generic solution that avoids this problem (in Python):\r\n\r\nFirst, a generic &quot;wait&quot; function (use a WebDriverWait if you like, I find them ugly):\r\n\r\n\r\n    def wait_for(condition_function):\r\n        start_time = time.time()\r\n        while time.time() &lt; start_time + 3:\r\n            if condition_function():\r\n                return True\r\n            else:\r\n                time.sleep(0.1)\r\n        raise Exception(&#39;Timeout waiting for {}&#39;.format(condition_function.__name__))\r\n\r\n\r\nNext, the solution relies on the fact that selenium records an (internal) id-number for all elements on a page, including the top-level `&lt;html&gt;` element.  When a page refreshes or loads, it gets a new html element with a new ID.\r\n\r\nSo, assuming you want to click on a link with text &quot;my link&quot; for example:\r\n\r\n\r\n    old_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n\r\n    browser.find_element_by_link_text(&#39;my link&#39;).click()\r\n\r\n    def page_has_loaded():\r\n        new_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n        return new_page.id != old_page.id\r\n\r\n    wait_for(page_has_loaded)\r\n\r\nFor more Pythonic, reusable, generic helper, you can make a context manager:\r\n\r\n    from contextlib import contextmanager\r\n    \r\n    @contextmanager\r\n    def wait_for_page_load(browser):\r\n        old_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n    \r\n        yield\r\n    \r\n        def page_has_loaded():\r\n            new_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n            return new_page.id != old_page.id\r\n    \r\n        wait_for(page_has_loaded)\r\n\r\nAnd then you can use it on pretty much any selenium interaction:\r\n\r\n    with wait_for_page_load(browser):\r\n        browser.find_element_by_link_text(&#39;my link&#39;).click()\r\n\r\nI reckon that&#39;s bulletproof!  What do you think?  \r\n\r\nMore info in a [blog post about it here](http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html)","title":"Wait for page load in Selenium","body":"<p>All of these solutions are OK for specific cases, but they suffer from at least one of a couple of possible problems:</p>\n\n<ol>\n<li><p>They are not generic enough -- they want you to know, ahead of time, that some specific condition will be true of the page you are going to (eg some element will be displayed)</p></li>\n<li><p>They are open to a race condition where you use an element that is actually present on the old page as well as the new page.</p></li>\n</ol>\n\n<p>Here's my attempt at a generic solution that avoids this problem (in Python):</p>\n\n<p>First, a generic \"wait\" function (use a WebDriverWait if you like, I find them ugly):</p>\n\n<pre><code>def wait_for(condition_function):\n    start_time = time.time()\n    while time.time() &lt; start_time + 3:\n        if condition_function():\n            return True\n        else:\n            time.sleep(0.1)\n    raise Exception('Timeout waiting for {}'.format(condition_function.__name__))\n</code></pre>\n\n<p>Next, the solution relies on the fact that selenium records an (internal) id-number for all elements on a page, including the top-level <code>&lt;html&gt;</code> element.  When a page refreshes or loads, it gets a new html element with a new ID.</p>\n\n<p>So, assuming you want to click on a link with text \"my link\" for example:</p>\n\n<pre><code>old_page = browser.find_element_by_tag_name('html')\n\nbrowser.find_element_by_link_text('my link').click()\n\ndef page_has_loaded():\n    new_page = browser.find_element_by_tag_name('html')\n    return new_page.id != old_page.id\n\nwait_for(page_has_loaded)\n</code></pre>\n\n<p>For more Pythonic, reusable, generic helper, you can make a context manager:</p>\n\n<pre><code>from contextlib import contextmanager\n\n@contextmanager\ndef wait_for_page_load(browser):\n    old_page = browser.find_element_by_tag_name('html')\n\n    yield\n\n    def page_has_loaded():\n        new_page = browser.find_element_by_tag_name('html')\n        return new_page.id != old_page.id\n\n    wait_for(page_has_loaded)\n</code></pre>\n\n<p>And then you can use it on pretty much any selenium interaction:</p>\n\n<pre><code>with wait_for_page_load(browser):\n    browser.find_element_by_link_text('my link').click()\n</code></pre>\n\n<p>I reckon that's bulletproof!  What do you think?  </p>\n\n<p>More info in a <a href=\"http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\" rel=\"noreferrer\">blog post about it here</a></p>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1444474817,"creation_date":1416714108,"answer_id":27085357,"question_id":5868439,"body_markdown":"*[How to get Selenium to wait for page load after a click][1]* provides the following interesting approach:\r\n\r\n1. Store a reference to a `WebElement` from the old page.\r\n2. Click the link.\r\n3. Keep on invoking operations on the `WebElement` until `StaleElementReferenceException` is thrown.\r\n\r\nSample code:\r\n\r\n    WebElement link = ...;\r\n    link.click();\r\n    new WebDriverWait(webDriver, timeout).until((org.openqa.selenium.WebDriver input) -&gt;\r\n    {\r\n        try\r\n        {\r\n            link.isDisplayed();\r\n            return false;\r\n        }\r\n        catch (StaleElementReferenceException unused)\r\n        {\r\n            return true;\r\n        }\r\n    });\r\n\r\n  [1]: http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\r\n","title":"Wait for page load in Selenium","body":"<p><em><a href=\"http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\" rel=\"nofollow\">How to get Selenium to wait for page load after a click</a></em> provides the following interesting approach:</p>\n\n<ol>\n<li>Store a reference to a <code>WebElement</code> from the old page.</li>\n<li>Click the link.</li>\n<li>Keep on invoking operations on the <code>WebElement</code> until <code>StaleElementReferenceException</code> is thrown.</li>\n</ol>\n\n<p>Sample code:</p>\n\n<pre><code>WebElement link = ...;\nlink.click();\nnew WebDriverWait(webDriver, timeout).until((org.openqa.selenium.WebDriver input) -&gt;\n{\n    try\n    {\n        link.isDisplayed();\n        return false;\n    }\n    catch (StaleElementReferenceException unused)\n    {\n        return true;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3365850,"reputation":1,"user_id":4395325,"display_name":"vageeshwar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1444474898,"creation_date":1419617019,"answer_id":27660368,"question_id":5868439,"body_markdown":"Use:\r\n\r\n    driver.manage().timeOuts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\nWhich means any search for the elements on the web page could take time to load. The `implicitlyWait` is set before throwing an exception.\r\nThe `TimeUnit` displays whichever way you want to wait in (seconds, minutes, hours and days).\r\n","title":"Wait for page load in Selenium","body":"<p>Use:</p>\n\n<pre><code>driver.manage().timeOuts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n\n<p>Which means any search for the elements on the web page could take time to load. The <code>implicitlyWait</code> is set before throwing an exception.\nThe <code>TimeUnit</code> displays whichever way you want to wait in (seconds, minutes, hours and days).</p>\n"},{"tags":[],"owner":{"account_id":3551933,"reputation":3290,"user_id":2966603,"accept_rate":36,"display_name":"RichardK"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1429710213,"creation_date":1429710213,"answer_id":29799488,"question_id":5868439,"body_markdown":"My simple way:\r\n\r\n    long timeOut = 5000;\r\n    \tlong end = System.currentTimeMillis() + timeOut;\r\n    \t\t\r\n    \t\twhile (System.currentTimeMillis() &lt; end) {\r\n    \t\t\t\r\n    \t\t\tif (String.valueOf(\r\n    \t\t\t\t\t((JavascriptExecutor) driver)\r\n    \t\t\t\t\t\t\t.executeScript(&quot;return document.readyState&quot;))\r\n    \t\t\t\t\t.equals(&quot;complete&quot;)) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}","title":"Wait for page load in Selenium","body":"<p>My simple way:</p>\n\n<pre><code>long timeOut = 5000;\n    long end = System.currentTimeMillis() + timeOut;\n\n        while (System.currentTimeMillis() &lt; end) {\n\n            if (String.valueOf(\n                    ((JavascriptExecutor) driver)\n                            .executeScript(\"return document.readyState\"))\n                    .equals(\"complete\")) {\n                break;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2813820,"reputation":33,"user_id":2419458,"display_name":"anthonyjruffa"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1439248750,"creation_date":1439248750,"answer_id":31930713,"question_id":5868439,"body_markdown":"I don&#39;t think an implicit wait is what you want.  Try this:\r\n\r\n`driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);`\r\n\r\nMore information in the [documentation][1]\r\n\r\n\r\n  [1]: http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html","title":"Wait for page load in Selenium","body":"<p>I don't think an implicit wait is what you want.  Try this:</p>\n\n<p><code>driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);</code></p>\n\n<p>More information in the <a href=\"http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html\" rel=\"nofollow\">documentation</a></p>\n"},{"tags":[],"owner":{"account_id":6585346,"reputation":59,"user_id":5088233,"accept_rate":64,"display_name":"Michau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442324261,"creation_date":1441049555,"answer_id":32318619,"question_id":5868439,"body_markdown":"&lt;!-- language-all: java --&gt;\r\nThe easiest way is just wait for some element which will appear on loaded page.\r\n\r\nIf you would like to click on some button already after page is loaded you could use await and click:\r\n\r\n    await().until().at.most(20, TimeUnit.Seconds).some_element.isDisplayed(); // or another condition\r\n    getDriver().find(some_element).click;","title":"Wait for page load in Selenium","body":"<p>\nThe easiest way is just wait for some element which will appear on loaded page.</p>\n\n<p>If you would like to click on some button already after page is loaded you could use await and click:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>await().until().at.most(20, TimeUnit.Seconds).some_element.isDisplayed(); // or another condition\ngetDriver().find(some_element).click;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6835289,"reputation":183,"user_id":5257542,"display_name":"Fin"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1444474971,"creation_date":1441718761,"answer_id":32459075,"question_id":5868439,"body_markdown":"Imran&#39;s answer rehashed for Java 7:\r\n\r\n    \tWebDriverWait wait = new WebDriverWait(driver, 30);\r\n\t\t\r\n\t\twait.until(new ExpectedCondition&lt;Boolean&gt;() {\r\n\t\t\tpublic Boolean apply(WebDriver wdriver) {\r\n\t\t\t\treturn ((JavascriptExecutor) driver).executeScript(\r\n\t\t\t\t\t&quot;return document.readyState&quot;\r\n\t\t\t\t).equals(&quot;complete&quot;);\r\n\t\t\t}\r\n\t\t});\r\n","title":"Wait for page load in Selenium","body":"<p>Imran's answer rehashed for Java 7:</p>\n\n<pre><code>    WebDriverWait wait = new WebDriverWait(driver, 30);\n\n    wait.until(new ExpectedCondition&lt;Boolean&gt;() {\n        public Boolean apply(WebDriver wdriver) {\n            return ((JavascriptExecutor) driver).executeScript(\n                \"return document.readyState\"\n            ).equals(\"complete\");\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4951908,"reputation":2516,"user_id":3985556,"display_name":"Vaibhav"},"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1444475019,"creation_date":1443102608,"answer_id":32763129,"question_id":5868439,"body_markdown":"Implicit and explicit wait is better.\r\n\r\nBut if you are handling an exception in Java, then you can use this for waiting for a page to reload:\r\n\r\n    Thead.sleep(1000);\r\n","title":"Wait for page load in Selenium","body":"<p>Implicit and explicit wait is better.</p>\n\n<p>But if you are handling an exception in Java, then you can use this for waiting for a page to reload:</p>\n\n<pre><code>Thead.sleep(1000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2626657,"reputation":385,"user_id":2273520,"display_name":"Manavendher"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1446791555,"creation_date":1446790943,"answer_id":33560680,"question_id":5868439,"body_markdown":"Use this function\r\n\r\n    public void waitForPageLoad(ChromeDriver d){\r\n\t    \tString s=&quot;&quot;;\r\n\t    \twhile(!s.equals(&quot;complete&quot;)){\r\n\t    \ts=(String) d.executeScript(&quot;return document.readyState&quot;);\r\n\t    \ttry {\r\n\t    \t\tThread.sleep(1000);\r\n\t    \t} catch (InterruptedException e) {\r\n\t    \t\t// TODO Auto-generated catch block\r\n\t    \t\te.printStackTrace();\r\n\t    \t}\r\n\t    \t}\r\n\t    \t\r\n\t    }","title":"Wait for page load in Selenium","body":"<p>Use this function</p>\n\n<pre><code>public void waitForPageLoad(ChromeDriver d){\n        String s=\"\";\n        while(!s.equals(\"complete\")){\n        s=(String) d.executeScript(\"return document.readyState\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3731190,"reputation":961,"user_id":3103515,"display_name":"sonhu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452026669,"creation_date":1452026669,"answer_id":34620895,"question_id":5868439,"body_markdown":"The best way to wait for page loads when using the Java bindings for WebDriver is to use the Page Object design pattern with PageFactory. This allows you to utilize the `AjaxElementLocatorFactory` which to put it simply acts as a global wait for all of your elements. It has limitations on elements such as drop-boxes or complex javascript transitions but it will drastically reduce the amount of code needed and speed up test times. A good example can be found in this blogpost. Basic understanding of Core Java is assumed.\r\n\r\nhttp://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html","title":"Wait for page load in Selenium","body":"<p>The best way to wait for page loads when using the Java bindings for WebDriver is to use the Page Object design pattern with PageFactory. This allows you to utilize the <code>AjaxElementLocatorFactory</code> which to put it simply acts as a global wait for all of your elements. It has limitations on elements such as drop-boxes or complex javascript transitions but it will drastically reduce the amount of code needed and speed up test times. A good example can be found in this blogpost. Basic understanding of Core Java is assumed.</p>\n\n<p><a href=\"http://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html\" rel=\"nofollow\">http://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html</a></p>\n"},{"tags":[],"owner":{"account_id":7319434,"reputation":107,"user_id":5575897,"display_name":"Kuldeep Yadav"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1456293286,"creation_date":1456293286,"answer_id":35594329,"question_id":5868439,"body_markdown":"Use implicitly wait for wait of every element on page till given time.\r\n\r\n    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\r\nthis wait for every element on page for 30 sec.\r\n\r\nAnother wait is Explicitly wait or conditional wait in this wait until given condition.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 40);\r\n    WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;someid&quot;)));\r\n\r\n\r\nIn id give static element id which is diffidently display on the page, as soon as page is load.","title":"Wait for page load in Selenium","body":"<p>Use implicitly wait for wait of every element on page till given time.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n</code></pre>\n\n<p>this wait for every element on page for 30 sec.</p>\n\n<p>Another wait is Explicitly wait or conditional wait in this wait until given condition.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 40);\nWebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(\"someid\")));\n</code></pre>\n\n<p>In id give static element id which is diffidently display on the page, as soon as page is load.</p>\n"},{"tags":[],"owner":{"account_id":7398529,"reputation":121,"user_id":5629666,"display_name":"Vinod Kumar K V"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1463756370,"creation_date":1463755092,"answer_id":37349558,"question_id":5868439,"body_markdown":" 1. `WebDriver driver = new ff / chrome / anyDriverYouWish();\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);`\r\n    Waits maximum of 10 Seconds.\r\n\r\n 2. `WebDriverWait wait = new WebDriverWait(driver, 10);\r\n\twait.until(ExpectedConditions.visibilityOf(WebElement element));`\r\n    \r\n 3. `FluentWait&lt;Driver&gt; fluentWait;\r\n     fluentWait = new FluentWait&lt;&gt;(driver).withTimeout(30, TimeUnit.SECONDS)\r\n\t\t\t\t.pollingEvery(200, TimeUnit.MILLISECONDS)\r\n\t\t\t\t.ignoring(NoSuchElementException.class);`\r\n\r\nThe advantage of the last option is that you can include exception to be expected, so that your execution continues.","title":"Wait for page load in Selenium","body":"<ol>\n<li><p><code>WebDriver driver = new ff / chrome / anyDriverYouWish();\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);</code>\nWaits maximum of 10 Seconds.</p></li>\n<li><p><code>WebDriverWait wait = new WebDriverWait(driver, 10);\nwait.until(ExpectedConditions.visibilityOf(WebElement element));</code></p></li>\n<li><p><code>FluentWait&lt;Driver&gt; fluentWait;\n fluentWait = new FluentWait&lt;&gt;(driver).withTimeout(30, TimeUnit.SECONDS)\n            .pollingEvery(200, TimeUnit.MILLISECONDS)\n            .ignoring(NoSuchElementException.class);</code></p></li>\n</ol>\n\n<p>The advantage of the last option is that you can include exception to be expected, so that your execution continues.</p>\n"},{"tags":[],"owner":{"account_id":2898844,"reputation":39,"user_id":2486054,"display_name":"iam_muqshid"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1465758309,"creation_date":1465757402,"answer_id":37777902,"question_id":5868439,"body_markdown":"use a if condition and for any of the element present \r\n\r\n    try {\r\n        Thread.sleep(1000);\r\n    } catch (InterruptedException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }","title":"Wait for page load in Selenium","body":"<p>use a if condition and for any of the element present </p>\n\n<pre><code>try {\n    Thread.sleep(1000);\n} catch (InterruptedException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8071829,"reputation":59,"user_id":6084348,"accept_rate":20,"display_name":"Salman Arshad"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1540817227,"creation_date":1465933086,"answer_id":37820699,"question_id":5868439,"body_markdown":"For implicit wait you can use something like following:\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS)\r\n\r\nIn order for webpage to wait for a specific object to be visible or cerntain condition to be true. You can use wait feather of web driver.\r\n\r\n    //120 is maximum number of seconds to wait.\r\n    WebDriverWait wait = new WebDriverWait(driver,120);\t \r\n    wait.until(ExpectedConditions.elementToBeClickable(&quot;CONDITITON&quot;));\r\n\r\nIn **Java**, another option is to sleep the thread for specific time. \r\n\r\n    Thread.sleep(numberOfSeconds*1000); \r\n    //This line will cause thread to sleep for seconds as variable\r\n\r\nI created a method to simplify thread.sleep method\r\n\r\n    public static void wait_time(int seconds){\r\n        try {\r\n    \t    Thread.sleep(seconds*1000);\r\n    \t    }catch (InterruptedException e) {\r\n    \t    // TODO Auto-generated catch block\r\n    \t\t    e.printStackTrace();\r\n    \t    }\r\n    }\r\n\r\nUse the method as wait_time(10);  The thread will sleep for 10 seconds.\r\n","title":"Wait for page load in Selenium","body":"<p>For implicit wait you can use something like following:</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS)\n</code></pre>\n\n<p>In order for webpage to wait for a specific object to be visible or cerntain condition to be true. You can use wait feather of web driver.</p>\n\n<pre><code>//120 is maximum number of seconds to wait.\nWebDriverWait wait = new WebDriverWait(driver,120);  \nwait.until(ExpectedConditions.elementToBeClickable(\"CONDITITON\"));\n</code></pre>\n\n<p>In <strong>Java</strong>, another option is to sleep the thread for specific time. </p>\n\n<pre><code>Thread.sleep(numberOfSeconds*1000); \n//This line will cause thread to sleep for seconds as variable\n</code></pre>\n\n<p>I created a method to simplify thread.sleep method</p>\n\n<pre><code>public static void wait_time(int seconds){\n    try {\n        Thread.sleep(seconds*1000);\n        }catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n}\n</code></pre>\n\n<p>Use the method as wait_time(10);  The thread will sleep for 10 seconds.</p>\n"},{"tags":[],"owner":{"account_id":3849207,"reputation":1,"user_id":3189769,"display_name":"Gulraiz Aslam"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1468269691,"creation_date":1468269154,"answer_id":38315729,"question_id":5868439,"body_markdown":"There are 2 types of waits available in Webdriver/Selenium 2 software testing tool. One of them is Implicit wait and another one is explicit wait. Both (Implicit wait and explicit wait) are useful for waiting in WebDriver. Using waits, we are telling WebDriver to wait for a certain amount of time before going to next step.You can use implicit wait for page load waiting.\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);","title":"Wait for page load in Selenium","body":"<p>There are 2 types of waits available in Webdriver/Selenium 2 software testing tool. One of them is Implicit wait and another one is explicit wait. Both (Implicit wait and explicit wait) are useful for waiting in WebDriver. Using waits, we are telling WebDriver to wait for a certain amount of time before going to next step.You can use implicit wait for page load waiting.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9431015,"reputation":11,"user_id":7014573,"display_name":"ANarula"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476974423,"creation_date":1476974423,"answer_id":40157553,"question_id":5868439,"body_markdown":"You can try this code to let the page load completely until element is found.\r\n  \r\n\r\n\r\n\r\n\r\n\r\n    public void waitForBrowserToLoadCompletely() {\r\n\t\tString state = null;\r\n\t\tString oldstate = null;\r\n\t\ttry {\r\n\t\t\tSystem.out.print(&quot;Waiting for browser loading to complete&quot;);\r\n\t\t\t\r\n\t\t\tint i = 0;\r\n\t\t\twhile (i &lt; 5) {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tstate = ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState;&quot;).toString();\r\n\t\t\t\tSystem.out.print(&quot;.&quot; + Character.toUpperCase(state.charAt(0)) + &quot;.&quot;);\r\n\t\t\t\tif (state.equals(&quot;interactive&quot;) || state.equals(&quot;loading&quot;))\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t/*\r\n\t\t\t\t * If browser in &#39;complete&#39; state since last X seconds. Return.\r\n\t\t\t\t */\r\n\r\n\t\t\t\tif (i == 1 &amp;&amp; state.equals(&quot;complete&quot;)) {\r\n\t\t\t\t\tSystem.out.println();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\ti = 0;\r\n\t\t\toldstate = null;\r\n\t\t\tThread.sleep(2000);\r\n\r\n\t\t\t/*\r\n\t\t\t * Now wait for state to become complete\r\n\t\t\t */\r\n\t\t\twhile (true) {\r\n\t\t\t\tstate = ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState;&quot;).toString();\r\n\t\t\t\tSystem.out.print(&quot;.&quot; + state.charAt(0) + &quot;.&quot;);\r\n\t\t\t\tif (state.equals(&quot;complete&quot;))\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tif (state.equals(oldstate))\r\n\t\t\t\t\ti++;\r\n\t\t\t\telse\r\n\t\t\t\t\ti = 0;\r\n\t\t\t\t/*\r\n\t\t\t\t * If browser state is same (loading/interactive) since last 60\r\n\t\t\t\t * secs. Refresh the page.\r\n\t\t\t\t */\r\n\t\t\t\tif (i == 15 &amp;&amp; state.equals(&quot;loading&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;\\nBrowser in &quot; + state + &quot; state since last 60 secs. So refreshing browser.&quot;);\r\n\t\t\t\t\tdriver.navigate().refresh();\r\n\t\t\t\t\tSystem.out.print(&quot;Waiting for browser loading to complete&quot;);\r\n\t\t\t\t\ti = 0;\r\n\t\t\t\t} else if (i == 6 &amp;&amp; state.equals(&quot;interactive&quot;)) {\r\n\t\t\t\t\tSystem.out.println(\r\n\t\t\t\t\t\t\t&quot;\\nBrowser in &quot; + state + &quot; state since last 30 secs. So starting with execution.&quot;);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tThread.sleep(4000);\r\n\t\t\t\toldstate = state;\r\n\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\r\n\t\t} catch (InterruptedException ie) {\r\n\t\t\tie.printStackTrace();\r\n\t\t}\r\n\t}","title":"Wait for page load in Selenium","body":"<p>You can try this code to let the page load completely until element is found.</p>\n\n<pre><code>public void waitForBrowserToLoadCompletely() {\n    String state = null;\n    String oldstate = null;\n    try {\n        System.out.print(\"Waiting for browser loading to complete\");\n\n        int i = 0;\n        while (i &lt; 5) {\n            Thread.sleep(1000);\n            state = ((JavascriptExecutor) driver).executeScript(\"return document.readyState;\").toString();\n            System.out.print(\".\" + Character.toUpperCase(state.charAt(0)) + \".\");\n            if (state.equals(\"interactive\") || state.equals(\"loading\"))\n                break;\n            /*\n             * If browser in 'complete' state since last X seconds. Return.\n             */\n\n            if (i == 1 &amp;&amp; state.equals(\"complete\")) {\n                System.out.println();\n                return;\n            }\n            i++;\n        }\n        i = 0;\n        oldstate = null;\n        Thread.sleep(2000);\n\n        /*\n         * Now wait for state to become complete\n         */\n        while (true) {\n            state = ((JavascriptExecutor) driver).executeScript(\"return document.readyState;\").toString();\n            System.out.print(\".\" + state.charAt(0) + \".\");\n            if (state.equals(\"complete\"))\n                break;\n\n            if (state.equals(oldstate))\n                i++;\n            else\n                i = 0;\n            /*\n             * If browser state is same (loading/interactive) since last 60\n             * secs. Refresh the page.\n             */\n            if (i == 15 &amp;&amp; state.equals(\"loading\")) {\n                System.out.println(\"\\nBrowser in \" + state + \" state since last 60 secs. So refreshing browser.\");\n                driver.navigate().refresh();\n                System.out.print(\"Waiting for browser loading to complete\");\n                i = 0;\n            } else if (i == 6 &amp;&amp; state.equals(\"interactive\")) {\n                System.out.println(\n                        \"\\nBrowser in \" + state + \" state since last 30 secs. So starting with execution.\");\n                return;\n            }\n\n            Thread.sleep(4000);\n            oldstate = state;\n\n        }\n        System.out.println();\n\n    } catch (InterruptedException ie) {\n        ie.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1028612,"reputation":1675,"user_id":1037363,"accept_rate":20,"display_name":"Prasobh.Kollattu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540816863,"creation_date":1477196472,"answer_id":40199484,"question_id":5868439,"body_markdown":"    private static void checkPageIsReady(WebDriver driver) {\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\r\n\t\t// Initially bellow given if condition will check ready state of page.\r\n\t\tif (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Page Is loaded.&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// This loop will rotate for 25 times to check If page Is ready after\r\n\t\t// every 1 second.\r\n\t\t// You can replace your value with 25 If you wants to Increase or\r\n\t\t// decrease wait time.\r\n\t\tfor (int i = 0; i &lt; 25; i++) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t}\r\n\t\t\t// To check page ready state.\r\n\t\t\tif (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Wait for page load in Selenium","body":"<pre><code>private static void checkPageIsReady(WebDriver driver) {\n    JavascriptExecutor js = (JavascriptExecutor) driver;\n\n    // Initially bellow given if condition will check ready state of page.\n    if (js.executeScript(\"return document.readyState\").toString().equals(\"complete\")) {\n        System.out.println(\"Page Is loaded.\");\n        return;\n    }\n\n    // This loop will rotate for 25 times to check If page Is ready after\n    // every 1 second.\n    // You can replace your value with 25 If you wants to Increase or\n    // decrease wait time.\n    for (int i = 0; i &lt; 25; i++) {\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n        }\n        // To check page ready state.\n        if (js.executeScript(\"return document.readyState\").toString().equals(\"complete\")) {\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9223908,"reputation":1174,"user_id":6852301,"accept_rate":50,"display_name":"Mohsin Awan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478516606,"creation_date":1478515018,"answer_id":40463112,"question_id":5868439,"body_markdown":"You can use this snippet of code for the page to load:\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;    IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver,TimeSpan.FromSeconds(30.00));\r\n    wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(&quot;return document.readyState&quot;).Equals(&quot;complete&quot;));&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nOr you can use waiter for any element to be loaded and become visible/clickable on that page, most probably which is going to be load at the end of loading like:\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;    Wait.Until(ExpectedConditions.ElementToBeClickable(By.XPath(xpathOfElement));\r\n    var element = GlobalDriver.FindElement(By.XPath(xpathOfElement));\r\n    var isSucceededed = element != null;&lt;/code&gt;\r\n&lt;/pre&gt;\r\n","title":"Wait for page load in Selenium","body":"<p>You can use this snippet of code for the page to load:</p>\n\n<pre>\n<code>    IWait wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver,TimeSpan.FromSeconds(30.00));\n    wait.Until(driver1 => ((IJavaScriptExecutor)driver).ExecuteScript(\"return document.readyState\").Equals(\"complete\"));</code>\n</pre>\n\n<p>Or you can use waiter for any element to be loaded and become visible/clickable on that page, most probably which is going to be load at the end of loading like:</p>\n\n<pre>\n<code>    Wait.Until(ExpectedConditions.ElementToBeClickable(By.XPath(xpathOfElement));\n    var element = GlobalDriver.FindElement(By.XPath(xpathOfElement));\n    var isSucceededed = element != null;</code>\n</pre>\n"},{"tags":[],"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479916338,"creation_date":1479916338,"answer_id":40768832,"question_id":5868439,"body_markdown":"The best way I&#39;ve seen is to utilize the `stalenessOf` ExpectedCondition, to wait for the old page to become stale.\r\n\r\nExample:\r\n\r\n    WebDriver driver = new FirefoxDriver();\r\n    WebDriverWait wait = new WebDriverWait(driver, 10);\r\n    \r\n    WebElement oldHtml = driver.findElement(By.tagName(&quot;html&quot;));\r\n    wait.until(ExpectedConditions.stalenessOf(oldHtml));\r\n\r\nIt&#39;ll wait for ten seconds for the old HTML tag to become stale, and then throw an exception if it doesn&#39;t happen.","title":"Wait for page load in Selenium","body":"<p>The best way I've seen is to utilize the <code>stalenessOf</code> ExpectedCondition, to wait for the old page to become stale.</p>\n\n<p>Example:</p>\n\n<pre><code>WebDriver driver = new FirefoxDriver();\nWebDriverWait wait = new WebDriverWait(driver, 10);\n\nWebElement oldHtml = driver.findElement(By.tagName(\"html\"));\nwait.until(ExpectedConditions.stalenessOf(oldHtml));\n</code></pre>\n\n<p>It'll wait for ten seconds for the old HTML tag to become stale, and then throw an exception if it doesn't happen.</p>\n"},{"tags":[],"owner":{"account_id":1132494,"reputation":5119,"user_id":1118252,"accept_rate":86,"display_name":"sidanmor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620669624,"creation_date":1482614899,"answer_id":41316949,"question_id":5868439,"body_markdown":"**NodeJS Solution:**\r\n\r\nIn **Nodejs** you can get it via promises...\r\n\r\nIf you write this code, you can be sure that the page is fully loaded when you get to the then...\r\n\r\n&lt;!-- language-all: js --&gt;\r\n\r\n    driver.get(&#39;www.sidanmor.com&#39;).then(()=&gt; {\r\n        // here the page is fully loaded!!!\r\n        // do your stuff...\r\n    }).catch(console.log.bind(console));\r\n\r\nIf you write this code, you will navigate, and selenium will wait 3 seconds...\r\n\r\n    driver.get(&#39;www.sidanmor.com&#39;);\r\n    driver.sleep(3000);\r\n    // you can&#39;t be sure that the page is fully loaded!!!\r\n    // do your stuff... hope it will be OK...\r\n\r\nFrom [Selenium Documentation (Nodejs)][1]:\r\n\r\n&gt; ```\r\n&gt; this.get( url ) → Thenable&lt;undefined&gt;\r\n&gt; ```\r\n&gt; Schedules a command to navigate to the given URL.\r\n&gt;\r\n&gt; Returns a promise that will be resolved when the document has **finished loading**.\r\n\r\n\r\n  [1]: http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/chrome_exports_Driver.html#get","title":"Wait for page load in Selenium","body":"<p><strong>NodeJS Solution:</strong></p>\n<p>In <strong>Nodejs</strong> you can get it via promises...</p>\n<p>If you write this code, you can be sure that the page is fully loaded when you get to the then...</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>driver.get('www.sidanmor.com').then(()=&gt; {\n    // here the page is fully loaded!!!\n    // do your stuff...\n}).catch(console.log.bind(console));\n</code></pre>\n<p>If you write this code, you will navigate, and selenium will wait 3 seconds...</p>\n<pre class=\"lang-js prettyprint-override\"><code>driver.get('www.sidanmor.com');\ndriver.sleep(3000);\n// you can't be sure that the page is fully loaded!!!\n// do your stuff... hope it will be OK...\n</code></pre>\n<p>From <a href=\"http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/chrome_exports_Driver.html#get\" rel=\"nofollow noreferrer\">Selenium Documentation (Nodejs)</a>:</p>\n<blockquote>\n<pre class=\"lang-js prettyprint-override\"><code>this.get( url ) → Thenable&lt;undefined&gt;\n</code></pre>\n<p>Schedules a command to navigate to the given URL.</p>\n<p>Returns a promise that will be resolved when the document has <strong>finished loading</strong>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2609061,"reputation":13,"user_id":4893606,"accept_rate":40,"display_name":"Neel Gurbani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540816549,"creation_date":1482903344,"answer_id":41355948,"question_id":5868439,"body_markdown":"use following code it&#39;s very easy and simple for page load. \r\n\r\n    public void PageLoad(IWebDriver driver, By by)\r\n    {\r\n        try\r\n        {\r\n            Console.WriteLine(&quot;PageLoad&quot; + by);\r\n            WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));\r\n            wait.Until(ExpectedConditions.ElementIsVisible(by));\r\n            wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30)); // 30 seconds wait until element not found. \r\n            wait.Until(ExpectedConditions.ElementToBeClickable(by));\r\n            \r\n\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n  \r\n            Console.WriteLine(ex.Message);\r\n            Assert.Fail(&quot;Element not found!&quot;)\r\n        }\r\n    }\r\n\r\ni hope this helps you. ","title":"Wait for page load in Selenium","body":"<p>use following code it's very easy and simple for page load. </p>\n\n<pre><code>public void PageLoad(IWebDriver driver, By by)\n{\n    try\n    {\n        Console.WriteLine(\"PageLoad\" + by);\n        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));\n        wait.Until(ExpectedConditions.ElementIsVisible(by));\n        wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30)); // 30 seconds wait until element not found. \n        wait.Until(ExpectedConditions.ElementToBeClickable(by));\n\n\n    }\n    catch (Exception ex)\n    {\n\n        Console.WriteLine(ex.Message);\n        Assert.Fail(\"Element not found!\")\n    }\n}\n</code></pre>\n\n<p>i hope this helps you. </p>\n"},{"tags":[],"owner":{"account_id":9934922,"reputation":4769,"user_id":7353562,"accept_rate":75,"display_name":"Arpan Saini"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620670978,"creation_date":1484176414,"answer_id":41602488,"question_id":5868439,"body_markdown":"You can use the below existing method to set the `pageLoadTimeout`. In below example if the page is taking more than 20 seconds to load, then it will throw an exception of page reload:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    WebDriver driver = new FirefoxDriver();\r\n    driver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\r\n","title":"Wait for page load in Selenium","body":"<p>You can use the below existing method to set the <code>pageLoadTimeout</code>. In below example if the page is taking more than 20 seconds to load, then it will throw an exception of page reload:</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebDriver driver = new FirefoxDriver();\ndriver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2518914,"reputation":21,"user_id":2189655,"display_name":"Firas Al-Barghouthi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488811114,"creation_date":1488809982,"answer_id":42627937,"question_id":5868439,"body_markdown":"    public static int counter = 0;\r\n    \r\n    public void stepGeneralWait() {\r\n\r\n        boolean breakIt = true;\r\n\r\n        while (true) {\r\n            breakIt = true;\r\n            try {\r\n\r\n                do{\r\n                    // here put e.g. your spinner ID\r\n                    Controller.driver.findElement(By.xpath(&quot;//*[@id=&#39;static&#39;]/div[8]/img&quot;)).click();\r\n                    Thread.sleep(10000);\r\n\r\n                    counter++;\r\n\r\n                    if (counter &gt; 3){\r\n                        breakIt = false;\r\n\r\n                    }\r\n                }\r\n                while (breakIt);\r\n\r\n\r\n\r\n            } catch (Exception e) {\r\n                if (e.getMessage().contains(&quot;element is not attached&quot;)) {\r\n                    breakIt = false;\r\n                }\r\n            }\r\n            if (breakIt) {\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n        try {\r\n            Thread.sleep(12000);\r\n        } catch (InterruptedException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }","title":"Wait for page load in Selenium","body":"<pre><code>public static int counter = 0;\n\npublic void stepGeneralWait() {\n\n    boolean breakIt = true;\n\n    while (true) {\n        breakIt = true;\n        try {\n\n            do{\n                // here put e.g. your spinner ID\n                Controller.driver.findElement(By.xpath(\"//*[@id='static']/div[8]/img\")).click();\n                Thread.sleep(10000);\n\n                counter++;\n\n                if (counter &gt; 3){\n                    breakIt = false;\n\n                }\n            }\n            while (breakIt);\n\n\n\n        } catch (Exception e) {\n            if (e.getMessage().contains(\"element is not attached\")) {\n                breakIt = false;\n            }\n        }\n        if (breakIt) {\n            break;\n        }\n\n    }\n\n    try {\n        Thread.sleep(12000);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10502709,"reputation":1303,"user_id":7740956,"display_name":"Anuj Teotia"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1540817179,"creation_date":1490271779,"answer_id":42975937,"question_id":5868439,"body_markdown":" Explicitly wait or conditional wait in this wait until given this condition.  \r\n\r\n    WebDriverWait wait = new WebDriverWait(wb, 60);\r\n    wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;value&quot;)));\r\nThis will wait for every web element for 60 seconds.\r\n\r\nUse implicitly wait for wait of every element on page till that given time.\r\n\r\n    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\nThis will wait for every web element for 60 seconds.\r\n","title":"Wait for page load in Selenium","body":"<p>Explicitly wait or conditional wait in this wait until given this condition.  </p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(wb, 60);\nwait.until(ExpectedConditions.elementToBeClickable(By.name(\"value\")));\n</code></pre>\n\n<p>This will wait for every web element for 60 seconds.</p>\n\n<p>Use implicitly wait for wait of every element on page till that given time.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n</code></pre>\n\n<p>This will wait for every web element for 60 seconds.</p>\n"},{"tags":[],"owner":{"account_id":2285997,"reputation":1,"user_id":2009929,"display_name":"rahul yadav"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1490688305,"creation_date":1490686543,"answer_id":43063322,"question_id":5868439,"body_markdown":"This code will wait until all the elements on the page are loaded in the DOM.\r\n\r\n    WebDriver driver = new WebDriver();\r\n    WebDriverWait wait = new WebDriverWait(driver, timeout);\r\n    \r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*&quot;)));\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>This code will wait until all the elements on the page are loaded in the DOM.</p>\n\n<pre><code>WebDriver driver = new WebDriver();\nWebDriverWait wait = new WebDriverWait(driver, timeout);\n\nwait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(\"//*\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10428575,"reputation":1,"user_id":7689080,"display_name":"Ak8511"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1491828281,"creation_date":1491827113,"answer_id":43323104,"question_id":5868439,"body_markdown":"In python, you can simply use:\r\n\r\n    driver.implicitly_wait(30)","title":"Wait for page load in Selenium","body":"<p>In python, you can simply use:</p>\n\n<pre><code>driver.implicitly_wait(30)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9184546,"reputation":65,"user_id":6827290,"display_name":"yuwanlin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502762639,"creation_date":1502762639,"answer_id":45685515,"question_id":5868439,"body_markdown":"I use node + selenium-webdriver(which version is 3.5.0 now). what I do for this is:\r\n\r\n    var webdriver = require(&#39;selenium-webdriver&#39;),\r\n        driver = new webdriver.Builder().forBrowser(&#39;chrome&#39;).build();\r\n    ;\r\n    driver.wait(driver.executeScript(&quot;return document.readyState&quot;).then(state =&gt; {\r\n      return state === &#39;complete&#39;;\r\n    }))\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>I use node + selenium-webdriver(which version is 3.5.0 now). what I do for this is:</p>\n\n<pre><code>var webdriver = require('selenium-webdriver'),\n    driver = new webdriver.Builder().forBrowser('chrome').build();\n;\ndriver.wait(driver.executeScript(\"return document.readyState\").then(state =&gt; {\n  return state === 'complete';\n}))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1506415954,"creation_date":1506415954,"answer_id":46421876,"question_id":5868439,"body_markdown":"You can use wait. there are basically 2 types of wait in selenium\r\n\r\n- Implicit wait\r\n- Explicit wait\r\n\r\n**- Implicit wait**\r\n\r\nThis is very simple please see syntax below:\r\n\r\n    driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\r\n\r\n\r\n**- Explicit wait**\r\n\r\nExplicitly wait or conditional wait in this wait until given condition is occurred.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 40);\r\n    WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;someid&quot;)));\r\n\r\nYou can use other properties like `visblityOf()`, `visblityOfElement()`\r\n","title":"Wait for page load in Selenium","body":"<p>You can use wait. there are basically 2 types of wait in selenium</p>\n\n<ul>\n<li>Implicit wait</li>\n<li>Explicit wait</li>\n</ul>\n\n<p><strong>- Implicit wait</strong></p>\n\n<p>This is very simple please see syntax below:</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\n</code></pre>\n\n<p><strong>- Explicit wait</strong></p>\n\n<p>Explicitly wait or conditional wait in this wait until given condition is occurred.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 40);\nWebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(\"someid\")));\n</code></pre>\n\n<p>You can use other properties like <code>visblityOf()</code>, <code>visblityOfElement()</code></p>\n"},{"tags":[],"owner":{"account_id":3849926,"reputation":16794,"user_id":3190347,"accept_rate":68,"display_name":"Shubham Jain"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566809647,"creation_date":1517565601,"answer_id":48580155,"question_id":5868439,"body_markdown":"Call below Function in your script , this will wait till page is not loaded using javascript\r\n\r\n    public static boolean isloadComplete(WebDriver driver)\r\n    {\r\n        return ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;loaded&quot;)\r\n                || ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;complete&quot;);\r\n    }","title":"Wait for page load in Selenium","body":"<p>Call below Function in your script , this will wait till page is not loaded using javascript</p>\n\n<pre><code>public static boolean isloadComplete(WebDriver driver)\n{\n    return ((JavascriptExecutor) driver).executeScript(\"return document.readyState\").equals(\"loaded\")\n            || ((JavascriptExecutor) driver).executeScript(\"return document.readyState\").equals(\"complete\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5788395,"reputation":5166,"user_id":4566794,"accept_rate":86,"display_name":"IKo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1526684750,"creation_date":1526684750,"answer_id":50420275,"question_id":5868439,"body_markdown":"If someone uses selenide:\r\n\r\n    public static final Long SHORT_WAIT = 5000L; // 5 seconds\r\n    $(&quot;some_css_selector&quot;).waitUntil(Condition.appear, SHORT_WAIT);\r\n\r\nMore Conditions can be found here:\r\nhttp://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html","title":"Wait for page load in Selenium","body":"<p>If someone uses selenide:</p>\n\n<pre><code>public static final Long SHORT_WAIT = 5000L; // 5 seconds\n$(\"some_css_selector\").waitUntil(Condition.appear, SHORT_WAIT);\n</code></pre>\n\n<p>More Conditions can be found here:\n<a href=\"http://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html\" rel=\"nofollow noreferrer\">http://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html</a></p>\n"},{"tags":[],"owner":{"account_id":9978992,"reputation":41,"user_id":7382533,"display_name":"Praveen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540817307,"creation_date":1528367884,"answer_id":50739143,"question_id":5868439,"body_markdown":"In my case , I used the following to know the page load status. In our application loading gif(s) are present and, I listen to them as follows to eliminate unwanted wait time in the script.\r\n\r\n    public static void processing(){ \r\n        WebDriverWait wait = new WebDriverWait(driver, 30);\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@id=&#39;Msgpanel&#39;]/div/div/img&quot;)));\r\n\t\twait.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath(&quot;//div[@id=&#39;Msgpanel&#39;]/div/div/img&quot;)));\r\n    }\r\n\r\nWhere the xpath locates the gif in the HTML DOM. \r\nAfter this, You may also implement your action methods Click.\r\n\r\n    public static void click(WebElement elementToBeClicked){\r\n        WebDriverWait wait = new WebDriverWait(driver, 45);\r\n        wait.until(ExpectedConditions.visibilityOf(element));\r\n\t\twait.until(ExpectedConditions.elementToBeClickable(element)); \r\n        wait.ignoring(NoSuchElementException.class).ignoring(StaleElementReferenceException.class); elementToBeClicked.click(); \r\n     }","title":"Wait for page load in Selenium","body":"<p>In my case , I used the following to know the page load status. In our application loading gif(s) are present and, I listen to them as follows to eliminate unwanted wait time in the script.</p>\n\n<pre><code>public static void processing(){ \n    WebDriverWait wait = new WebDriverWait(driver, 30);\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(\"//div[@id='Msgpanel']/div/div/img\")));\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath(\"//div[@id='Msgpanel']/div/div/img\")));\n}\n</code></pre>\n\n<p>Where the xpath locates the gif in the HTML DOM. \nAfter this, You may also implement your action methods Click.</p>\n\n<pre><code>public static void click(WebElement elementToBeClicked){\n    WebDriverWait wait = new WebDriverWait(driver, 45);\n    wait.until(ExpectedConditions.visibilityOf(element));\n    wait.until(ExpectedConditions.elementToBeClickable(element)); \n    wait.ignoring(NoSuchElementException.class).ignoring(StaleElementReferenceException.class); elementToBeClicked.click(); \n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14124693,"reputation":445,"user_id":10512595,"display_name":"BelovedFool"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1639055187,"creation_date":1553683796,"answer_id":55375398,"question_id":5868439,"body_markdown":"Here is a Java 8 version of the currently [most upvoted answer][1]:\r\n\r\n    WebDriverWait wait = new WebDriverWait(myDriver, Duration.ofSeconds(15));\r\n\twait.until(webDriver -&gt; &quot;complete&quot;.equals(((JavascriptExecutor) webDriver)\r\n        .executeScript(&quot;return document.readyState&quot;)));\r\n\t\t\r\nWhere `myDriver` is a `WebDriver` object (declared earlier).\r\n\r\n**Note**: Be aware that this method (`document.readyState`) only checks the DOM.\r\n\r\n   [1]: https://stackoverflow.com/a/11356234/10512595","title":"Wait for page load in Selenium","body":"<p>Here is a Java 8 version of the currently <a href=\"https://stackoverflow.com/a/11356234/10512595\">most upvoted answer</a>:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(myDriver, Duration.ofSeconds(15));\nwait.until(webDriver -&gt; &quot;complete&quot;.equals(((JavascriptExecutor) webDriver)\n    .executeScript(&quot;return document.readyState&quot;)));\n    \n</code></pre>\n<p>Where <code>myDriver</code> is a <code>WebDriver</code> object (declared earlier).</p>\n<p><strong>Note</strong>: Be aware that this method (<code>document.readyState</code>) only checks the DOM.</p>\n"},{"tags":[],"owner":{"account_id":13288325,"reputation":334,"user_id":9593658,"display_name":"pAulseperformance"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1667588556,"creation_date":1573664596,"answer_id":58842113,"question_id":5868439,"body_markdown":"Man all these answers require too much code. This should be a simple thing as its pretty common.\r\n\r\nWhy not just inject some simple Javascript with the webdriver and check.\r\nThis is the method I use in my webscraper class. The Javascript is pretty basic even if you don&#39;t know it.\r\n\r\n&lt;!-- language: python --&gt;\r\n\r\n    def js_get_page_state(self):\r\n    &quot;&quot;&quot;\r\n    Javascript for getting document.readyState\r\n    :return: Pages state. See doc link below.\r\n    &quot;&quot;&quot;\r\n    ready_state = self.driver.execute_script(&#39;return document.readyState&#39;)\r\n    if ready_state == &#39;loading&#39;:\r\n        self.logger.info(&quot;Loading Page...&quot;)\r\n    elif ready_state == &#39;interactive&#39;:\r\n        self.logger.info(&quot;Page is interactive&quot;)\r\n    elif ready_state == &#39;complete&#39;:\r\n        self.logger.info(&quot;The page is fully loaded!&quot;)\r\n    return ready_state\r\n\r\n\r\nMore Info in &quot;Document.readyState&quot; of MDN Web Docs: &lt;https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState&gt;\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>Man all these answers require too much code. This should be a simple thing as its pretty common.</p>\n<p>Why not just inject some simple Javascript with the webdriver and check.\nThis is the method I use in my webscraper class. The Javascript is pretty basic even if you don't know it.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def js_get_page_state(self):\n&quot;&quot;&quot;\nJavascript for getting document.readyState\n:return: Pages state. See doc link below.\n&quot;&quot;&quot;\nready_state = self.driver.execute_script('return document.readyState')\nif ready_state == 'loading':\n    self.logger.info(&quot;Loading Page...&quot;)\nelif ready_state == 'interactive':\n    self.logger.info(&quot;Page is interactive&quot;)\nelif ready_state == 'complete':\n    self.logger.info(&quot;The page is fully loaded!&quot;)\nreturn ready_state\n</code></pre>\n<p>More Info in &quot;Document.readyState&quot; of MDN Web Docs: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState</a></p>\n"},{"tags":[],"owner":{"account_id":9924728,"reputation":61,"user_id":7346746,"display_name":"MTK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614673369,"creation_date":1614669945,"answer_id":66434979,"question_id":5868439,"body_markdown":"**For Programmers using java 8 onward can use below code to wait for page load using explicit wait.**\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor) driver;  \r\n    new WebDriverWait(driver, 10).until(webDriver -&gt;\r\n    (js).executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;));\r\n\r\n**Note: In my above code Lambda Expression is used, which is only available in java 8 onward version.**\r\n\r\n**For Programmers using lower version of Java i.e. below Java 8 can use:**\r\n\r\n    ExpectedCondition&lt;Boolean&gt; cond = new ExpectedCondition&lt;Boolean&gt;() {\r\n\t\t@Override\r\n\t\tpublic Boolean apply(WebDriver input) {\r\n\t\t\tJavascriptExecutor js = (JavascriptExecutor) driver; \r\n\t\t\treturn js.executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t \r\n\t\tnew WebDriverWait(driver, 100).until(cond);","title":"Wait for page load in Selenium","body":"<p><strong>For Programmers using java 8 onward can use below code to wait for page load using explicit wait.</strong></p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver;  \nnew WebDriverWait(driver, 10).until(webDriver -&gt;\n(js).executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;));\n</code></pre>\n<p><strong>Note: In my above code Lambda Expression is used, which is only available in java 8 onward version.</strong></p>\n<p><strong>For Programmers using lower version of Java i.e. below Java 8 can use:</strong></p>\n<pre><code>ExpectedCondition&lt;Boolean&gt; cond = new ExpectedCondition&lt;Boolean&gt;() {\n    @Override\n    public Boolean apply(WebDriver input) {\n        JavascriptExecutor js = (JavascriptExecutor) driver; \n        return js.executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;);\n            }\n        };\n         \n    new WebDriverWait(driver, 100).until(cond);\n</code></pre>\n"}],"owner":{"account_id":381376,"reputation":3021,"user_id":735987,"display_name":"karthick kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617854,"favorite_count":0,"down_vote_count":0,"up_vote_count":301,"answer_count":48,"score":301,"last_activity_date":1677061256,"creation_date":1304420355,"question_id":5868439,"body_markdown":"How do you make [Selenium][1] 2.0 wait for the page to load?\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Selenium_%28software%29\r\n","title":"Wait for page load in Selenium","body":"<p>How do you make <a href=\"http://en.wikipedia.org/wiki/Selenium_%28software%29\" rel=\"noreferrer\">Selenium</a> 2.0 wait for the page to load?</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9365,"page":627,"page_size":100}
