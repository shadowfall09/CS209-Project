{"items":[{"tags":["java","spring-jdbc","spring-retry"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1634647272,"post_id":69630964,"comment_id":123076771,"body_markdown":"As far as I can see, [`SQLRecoverableException`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLRecoverableException.html) is not a `RuntimeException` and should thus not be caught by the `catch`-block (if the `catch`-block only catches `RuntimeException`s). Please [edit] the post and add the relevant code.","body":"As far as I can see, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLRecoverableException.html\" rel=\"nofollow noreferrer\"><code>SQLRecoverableException</code></a> is not a <code>RuntimeException</code> and should thus not be caught by the <code>catch</code>-block (if the <code>catch</code>-block only catches <code>RuntimeException</code>s). Please <a href=\"https://stackoverflow.com/posts/69630964/edit\">edit</a> the post and add the relevant code."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1634649871,"post_id":69630964,"comment_id":123078041,"body_markdown":"Please post the code. If you catch the exception in the method itself then of course Spring cannot act on it. If you catch it in another method that calls the method in question it should work.","body":"Please post the code. If you catch the exception in the method itself then of course Spring cannot act on it. If you catch it in another method that calls the method in question it should work."}],"answers":[{"tags":[],"owner":{"account_id":12305345,"reputation":450,"user_id":8978587,"display_name":"ShaharT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635375942,"creation_date":1635375942,"answer_id":69746436,"question_id":69630964,"body_markdown":"With Retry can be handled not only via annotation, so maybe this can help:\r\n\r\n    try {\r\n        withRetry().execute(context -&gt; {\r\n            myMethodThatCatchException();\r\n            return null;\r\n        });\r\n    } catch (RuntimeException re) {\r\n        // ..\r\n    }\r\n\r\n    private RetryTemplate withRetry() {\r\n        RetryTemplate retryTemplate = new RetryTemplate();\r\n        BackOffPolicy backOffPolicy = new FixedBackOffPolicy();\r\n        retryTemplate.setBackOffPolicy(backOffPolicy);\r\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, Collections.singletonMap(SQLRecoverableException.class, true));\r\n        retryTemplate.setRetryPolicy(retryPolicy);\r\n        return retryTemplate;\r\n    }","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>With Retry can be handled not only via annotation, so maybe this can help:</p>\n<pre><code>try {\n    withRetry().execute(context -&gt; {\n        myMethodThatCatchException();\n        return null;\n    });\n} catch (RuntimeException re) {\n    // ..\n}\n\nprivate RetryTemplate withRetry() {\n    RetryTemplate retryTemplate = new RetryTemplate();\n    BackOffPolicy backOffPolicy = new FixedBackOffPolicy();\n    retryTemplate.setBackOffPolicy(backOffPolicy);\n    SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, Collections.singletonMap(SQLRecoverableException.class, true));\n    retryTemplate.setRetryPolicy(retryPolicy);\n    return retryTemplate;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635389357,"creation_date":1635389357,"answer_id":69747695,"question_id":69630964,"body_markdown":"You can catch and rethrow specific exceptions inside try-catch block\r\n\r\n```\r\n@Retryable(value={SQLRecoverableException.class})\r\nvoid someMethod() {\r\n   try {\r\n      ...\r\n   } catch (SQLRecoverableException retryable) { \r\n       // don&#39;t handle here, let it be handled by @Retryable-mechanism\r\n       throw retryable;\r\n   } catch (RuntimeException other) {\r\n       // handle other non-retryable exceptions\r\n   }\r\n}\r\n```","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>You can catch and rethrow specific exceptions inside try-catch block</p>\n<pre><code>@Retryable(value={SQLRecoverableException.class})\nvoid someMethod() {\n   try {\n      ...\n   } catch (SQLRecoverableException retryable) { \n       // don't handle here, let it be handled by @Retryable-mechanism\n       throw retryable;\n   } catch (RuntimeException other) {\n       // handle other non-retryable exceptions\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18392292,"reputation":21,"user_id":13397692,"display_name":"Py_Patience"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230607,"creation_date":1642744368,"answer_id":70796960,"question_id":69630964,"body_markdown":"\r\n    @Retryable(value={SQLRecoverableException.class},maxAttempts=3)\r\n    public boolean methodA(){\r\n    try{.....}\r\n    catch(RuntimeException ex){ // apart from given above one\r\n    \\\\handle catch exception\r\n    } \r\n    }\r\n    \r\n    @Recover\r\n    public boolean recoverMethodA(SQLRecoverableException a){\r\n     logger.info(a.getMessage());\r\n    return false;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nAfter some Observations i found - \r\n\r\n - Retryable will not work with handled exception that you passing in retryable value.\r\n - Retryable will not work if you are calling retryable method within another method in same class.\r\nex  - boolean methodA() --&gt; boolean retryableMethodB() \r\nin case you should to apply retryable on methodA.(if using controller)","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<pre><code>@Retryable(value={SQLRecoverableException.class},maxAttempts=3)\npublic boolean methodA(){\ntry{.....}\ncatch(RuntimeException ex){ // apart from given above one\n\\\\handle catch exception\n} \n}\n\n@Recover\npublic boolean recoverMethodA(SQLRecoverableException a){\n logger.info(a.getMessage());\nreturn false;\n}\n</code></pre>\n<p>After some Observations i found -</p>\n<ul>\n<li>Retryable will not work with handled exception that you passing in retryable value.</li>\n<li>Retryable will not work if you are calling retryable method within another method in same class.\nex  - boolean methodA() --&gt; boolean retryableMethodB()\nin case you should to apply retryable on methodA.(if using controller)</li>\n</ul>\n"}],"owner":{"account_id":15644818,"reputation":1,"user_id":11287227,"display_name":"L Mo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4450,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695230607,"creation_date":1634647074,"question_id":69630964,"body_markdown":"I have a method that I want to retry when SQLRecoverableException occurs. I annotated the method with `@Retryable(value={SQLRecoverableException.class})` and enabled Retry in my application. However, this specific method includes a try-catch block to handle RuntimeException. The Retry is now not working because any exception gets caught in the try-catch block. I want the method to be retried for 3 times before the error handling. Is this possible with Spring Retry out of the box, or would I have to go for a more custom solution?","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>I have a method that I want to retry when SQLRecoverableException occurs. I annotated the method with <code>@Retryable(value={SQLRecoverableException.class})</code> and enabled Retry in my application. However, this specific method includes a try-catch block to handle RuntimeException. The Retry is now not working because any exception gets caught in the try-catch block. I want the method to be retried for 3 times before the error handling. Is this possible with Spring Retry out of the box, or would I have to go for a more custom solution?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":13859796,"reputation":10065,"user_id":10005707,"display_name":"Jaswant Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561393618,"creation_date":1561393618,"answer_id":56740606,"question_id":56740454,"body_markdown":"To achieve this, you can use a \r\n\r\n    Hashmap&lt;String, ArrayList&lt;Model&gt;&gt; \r\n\r\nWhere the String is &#39;id&#39;\r\n\r\n(Model class has 2 variables, 1.Name, 2. msg)\r\nIf the id is already present in the hashmap, just Create a new model, assign values and append it in the arraylist correnponding to that id  else, insert a new id in the hashmap and create a new arraylist with a new model and add it to the hashmap. \r\n\r\nNow to get the last element corresponding to every id is simple, \r\njust iterate through the hashmap and take the last element for each array list, Simple right? \r\nIf you dont understand, let me know, i&#39;ll try to add some code.\r\n","title":"Compare arraylist item and get last index of each common object","body":"<p>To achieve this, you can use a </p>\n\n<pre><code>Hashmap&lt;String, ArrayList&lt;Model&gt;&gt; \n</code></pre>\n\n<p>Where the String is 'id'</p>\n\n<p>(Model class has 2 variables, 1.Name, 2. msg)\nIf the id is already present in the hashmap, just Create a new model, assign values and append it in the arraylist correnponding to that id  else, insert a new id in the hashmap and create a new arraylist with a new model and add it to the hashmap. </p>\n\n<p>Now to get the last element corresponding to every id is simple, \njust iterate through the hashmap and take the last element for each array list, Simple right? \nIf you dont understand, let me know, i'll try to add some code.</p>\n"},{"tags":[],"owner":{"account_id":183255,"reputation":1197,"user_id":3243275,"display_name":"Jason Grife"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561395633,"creation_date":1561395633,"answer_id":56741025,"question_id":56740454,"body_markdown":"In Kotlin you could use [`Array&lt;out T&gt;.takeLastWhile { id == &quot;id-1&quot; || id == &quot;id-2&quot; }`][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last-while.html","title":"Compare arraylist item and get last index of each common object","body":"<p>In Kotlin you could use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last-while.html\" rel=\"nofollow noreferrer\"><code>Array&lt;out T&gt;.takeLastWhile { id == \"id-1\" || id == \"id-2\" }</code></a></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230466,"creation_date":1686721066,"answer_id":76470398,"question_id":56740454,"body_markdown":"This can be achieved by combining the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method that was added in Java 21 with streams.  Assuming the objects in the list have a `getId()` method that return the ID:\r\n\r\n```lang-java\r\nObject last = list.reversed().stream()\r\n        .filter(o -&gt; o.getId() == 1)\r\n        .findFirst()\r\n        .orElseThrow();\r\n```","title":"Compare arraylist item and get last index of each common object","body":"<p>This can be achieved by combining the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method that was added in Java 21 with streams.  Assuming the objects in the list have a <code>getId()</code> method that return the ID:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object last = list.reversed().stream()\n        .filter(o -&gt; o.getId() == 1)\n        .findFirst()\n        .orElseThrow();\n</code></pre>\n"}],"owner":{"account_id":9280732,"reputation":59,"user_id":6891998,"accept_rate":14,"display_name":"sss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1695230466,"creation_date":1561392894,"question_id":56740454,"body_markdown":"I have json object type `ArrayList`, and i want to get last item of specific id from arraylist. Suppose `ArrayList` contains 3 object of id 1 and two object of id 2 ,so how can i get last object of id1 and last object of id 2.\r\n\r\nHere is `ArrayList` \r\n\r\n    id-1,name-one,msg-hello,\r\n    id-1,name-one,msg-how,\r\n    id-2,name-one,msg-hi,\r\n    id-1,name-one,msg-are,\r\n    id-2,name-one,msg-test\r\n    id-1,name-one,msg-you\r\n\r\nNow my requirement is to get below `ArrayList` ,that has last `jsonObject` of id 2 and id 1.\r\n\r\n    id-2,name-one,msg-test,\r\n    id-1,name-one,msg-you","title":"Compare arraylist item and get last index of each common object","body":"<p>I have json object type <code>ArrayList</code>, and i want to get last item of specific id from arraylist. Suppose <code>ArrayList</code> contains 3 object of id 1 and two object of id 2 ,so how can i get last object of id1 and last object of id 2.</p>\n\n<p>Here is <code>ArrayList</code> </p>\n\n<pre><code>id-1,name-one,msg-hello,\nid-1,name-one,msg-how,\nid-2,name-one,msg-hi,\nid-1,name-one,msg-are,\nid-2,name-one,msg-test\nid-1,name-one,msg-you\n</code></pre>\n\n<p>Now my requirement is to get below <code>ArrayList</code> ,that has last <code>jsonObject</code> of id 2 and id 1.</p>\n\n<pre><code>id-2,name-one,msg-test,\nid-1,name-one,msg-you\n</code></pre>\n"},{"tags":["java","hashmap","linkedhashmap","ordereddictionary"],"comments":[{"owner":{"account_id":10878617,"reputation":2606,"user_id":7998319,"display_name":"gati sahu"},"score":0,"creation_date":1497108484,"post_id":44474971,"comment_id":75945445,"body_markdown":"TreeHashMap will not work","body":"TreeHashMap will not work"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1497109297,"post_id":44474971,"comment_id":75945672,"body_markdown":"Wait. So how does LinkedHashMap not satisfy your requirements...?","body":"Wait. So how does LinkedHashMap not satisfy your requirements...?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1497109489,"post_id":44474971,"comment_id":75945727,"body_markdown":"As far as I can tell, a normal `LinkedHashMap` will give you what you want if you just remove a key before each time you put it. You may even consider a subclass where this behaviour is built into the put method.It doesn’t give you the reverse order, though, as far as I can see. A pity since a *doubly-linked*  list is maintained for the order, so it shouldn’t be expensive.","body":"As far as I can tell, a normal <code>LinkedHashMap</code> will give you what you want if you just remove a key before each time you put it. You may even consider a subclass where this behaviour is built into the put method.It doesn’t give you the reverse order, though, as far as I can see. A pity since a <i>doubly-linked</i>  list is maintained for the order, so it shouldn’t be expensive."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":0,"creation_date":1497121001,"post_id":44474971,"comment_id":75949218,"body_markdown":"@Michael: The LinkedHashMap only changes sorting on the first insertion of a key/value, but not if you update that key/value. You would always have to call Map.remove before every Map.put...","body":"@Michael: The LinkedHashMap only changes sorting on the first insertion of a key/value, but not if you update that key/value. You would always have to call Map.remove before every Map.put..."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":0,"creation_date":1497121426,"post_id":44474971,"comment_id":75949327,"body_markdown":"@OleV.V. : Thanks for the advice. I&#39;m aware that I could for example create an extension class which simply overrides the LinkedHashMap&#39;s put methods. Yet I thought someone might have already written a Java class that fulfills my requirements (reverse iterator, synchronized).","body":"@OleV.V. : Thanks for the advice. I&#39;m aware that I could for example create an extension class which simply overrides the LinkedHashMap&#39;s put methods. Yet I thought someone might have already written a Java class that fulfills my requirements (reverse iterator, synchronized)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1497122279,"post_id":44474971,"comment_id":75949550,"body_markdown":"I am not saying no one has. There are some collection collections out there (Guava, Eclipse collections and more), so I agree with you it’s worth asking. Sorry I don’t know of one.","body":"I am not saying no one has. There are some collection collections out there (Guava, Eclipse collections and more), so I agree with you it’s worth asking. Sorry I don’t know of one."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1497122361,"post_id":44474971,"comment_id":75949578,"body_markdown":"Sounds incredibly niche. There&#39;s nothing like that in `java.util`, Guava, or joda-collect. In my opinion, if you&#39;re relying too much on the iteration order of a non-sorted map, you&#39;re probably doing something wrong.","body":"Sounds incredibly niche. There&#39;s nothing like that in <code>java.util</code>, Guava, or joda-collect. In my opinion, if you&#39;re relying too much on the iteration order of a non-sorted map, you&#39;re probably doing something wrong."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":1,"creation_date":1497122690,"post_id":44474971,"comment_id":75949666,"body_markdown":"Thanks guys for your help. I&#39;ll keep searching and will come back here in case I find something that &quot;fulfills my needs&quot; :)","body":"Thanks guys for your help. I&#39;ll keep searching and will come back here in case I find something that &quot;fulfills my needs&quot; :)"}],"answers":[{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230356,"creation_date":1686798005,"answer_id":76478796,"question_id":44474971,"body_markdown":"Java 21 added functionality to `LinkedHashMap` that allows the addition of elements to the end of the map, as well as return a reversed view of the map.  Both of these methods are defined by the new [`SequencedMap`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html) interface that `LinkedHashMap` now implements.\r\n\r\n```lang-java\r\nSequencedMap&lt;String, Integer&gt; map = new LinkedHashMap&lt;&gt;();\r\nmap.putLast(&quot;A&quot;, 1);\r\nmap.putLast(&quot;B&quot;, 2);\r\nmap.putLast(&quot;A&quot;, 3);\r\nmap.putLast(&quot;C&quot;, 4);\r\n\r\nSystem.out.println(map); // {B=2, A=3, C=4}\r\nSystem.out.println(map.reversed()); // {C=4, A=3, B=2}\r\n```\r\n\r\nThe [`putLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#putLast(K,V)) method adds the element to the end of the map, moving it to the end if it&#39;s already present:\r\n\r\n&gt; Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map&#39;s encounter order.\r\n&gt;\r\n&gt; If this map already contains a mapping for this key, the mapping is relocated if necessary so that it is last in encounter order.\r\n\r\nNote that this does require using the `putLast` method, and not the `put` or `putAll` methods, so it doesn&#39;t quite meet your stated requirements.  But depending on how you&#39;re using the map, this might be sufficient.\r\n\r\nThe [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method returns a reversed view of the `LinkedHashMap`:\r\n\r\n&gt; Returns a reverse-ordered view of this map. The encounter order of mappings in the returned view is the inverse of the encounter order of mappings in this map. The reverse ordering affects all order-sensitive operations, including those on the view collections of the returned view. If the implementation permits modifications to this view, the modifications &quot;write through&quot; to the underlying map. Changes to the underlying map might or might not be visible in this reversed view, depending upon the implementation.\r\n&gt;\r\n&gt; Modifications to the reversed view and its map views are permitted and will be propagated to this map. In addition, modifications to this map will be visible in the reversed view and its map views.","title":"Is there a LinkedHashMap-like class where the entry that is PUT last is also the last in order?","body":"<p>Java 21 added functionality to <code>LinkedHashMap</code> that allows the addition of elements to the end of the map, as well as return a reversed view of the map.  Both of these methods are defined by the new <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a> interface that <code>LinkedHashMap</code> now implements.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedMap&lt;String, Integer&gt; map = new LinkedHashMap&lt;&gt;();\nmap.putLast(&quot;A&quot;, 1);\nmap.putLast(&quot;B&quot;, 2);\nmap.putLast(&quot;A&quot;, 3);\nmap.putLast(&quot;C&quot;, 4);\n\nSystem.out.println(map); // {B=2, A=3, C=4}\nSystem.out.println(map.reversed()); // {C=4, A=3, B=2}\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast</code></a> method adds the element to the end of the map, moving it to the end if it's already present:</p>\n<blockquote>\n<p>Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map's encounter order.</p>\n<p>If this map already contains a mapping for this key, the mapping is relocated if necessary so that it is last in encounter order.</p>\n</blockquote>\n<p>Note that this does require using the <code>putLast</code> method, and not the <code>put</code> or <code>putAll</code> methods, so it doesn't quite meet your stated requirements.  But depending on how you're using the map, this might be sufficient.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method returns a reversed view of the <code>LinkedHashMap</code>:</p>\n<blockquote>\n<p>Returns a reverse-ordered view of this map. The encounter order of mappings in the returned view is the inverse of the encounter order of mappings in this map. The reverse ordering affects all order-sensitive operations, including those on the view collections of the returned view. If the implementation permits modifications to this view, the modifications &quot;write through&quot; to the underlying map. Changes to the underlying map might or might not be visible in this reversed view, depending upon the implementation.</p>\n<p>Modifications to the reversed view and its map views are permitted and will be propagated to this map. In addition, modifications to this map will be visible in the reversed view and its map views.</p>\n</blockquote>\n"}],"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695230356,"creation_date":1497108246,"question_id":44474971,"body_markdown":"In a LinkedHashMap the entries are by default sorted by insertion order. The construction parameter &quot;accessOrder&quot; allows to change the sorting such that the last entry is the one that was ACCESSED last. \r\n\r\nHowever, I do need a map where the sorting only changes when entries are added or overwritten via **PUT** (put, putAll, ...). Furthermore, the given map should directly provide a **reverse iterator**, i.e. without having to create a reversed array of the map&#39;s keySet to iterate over.\r\n\r\n\r\nDoes anyone know an existing Java class that provides what I&#39;m searching for?\r\n\r\n\r\n----------\r\n\r\n\r\nPS: It would be great if the map would allow concurrent modifications, but that is not essential as I can also synchronize the access manually.","title":"Is there a LinkedHashMap-like class where the entry that is PUT last is also the last in order?","body":"<p>In a LinkedHashMap the entries are by default sorted by insertion order. The construction parameter \"accessOrder\" allows to change the sorting such that the last entry is the one that was ACCESSED last. </p>\n\n<p>However, I do need a map where the sorting only changes when entries are added or overwritten via <strong>PUT</strong> (put, putAll, ...). Furthermore, the given map should directly provide a <strong>reverse iterator</strong>, i.e. without having to create a reversed array of the map's keySet to iterate over.</p>\n\n<p>Does anyone know an existing Java class that provides what I'm searching for?</p>\n\n<hr>\n\n<p>PS: It would be great if the map would allow concurrent modifications, but that is not essential as I can also synchronize the access manually.</p>\n"},{"tags":["java","performance"],"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1421130549,"post_id":27916018,"comment_id":44230800,"body_markdown":"I do not think doubly linked list help the ordering , it just makes traversing the list easier","body":"I do not think doubly linked list help the ordering , it just makes traversing the list easier"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1421202718,"post_id":27916018,"comment_id":44267300,"body_markdown":"It doesn&#39;t make traversal easier.  It simply makes removal of map entries more efficient.","body":"It doesn&#39;t make traversal easier.  It simply makes removal of map entries more efficient."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1524907634,"post_id":27916018,"comment_id":87166191,"body_markdown":"So that you can go backwards.","body":"So that you can go backwards."}],"answers":[{"tags":[],"owner":{"account_id":3579096,"reputation":2566,"user_id":2987706,"accept_rate":90,"display_name":"Prashant"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1421130274,"creation_date":1421130274,"answer_id":27916077,"question_id":27916018,"body_markdown":"To maintain **Insertion Order** there is doubly LinkedList. AT any point of time you can move ahead node or backward Node. But if you are having single LinkedList  if your Pointer moved to last element you again need to start from initial point and you can not moved on previous node. ","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>To maintain <strong>Insertion Order</strong> there is doubly LinkedList. AT any point of time you can move ahead node or backward Node. But if you are having single LinkedList  if your Pointer moved to last element you again need to start from initial point and you can not moved on previous node. </p>\n"},{"tags":[],"owner":{"account_id":4689599,"reputation":197,"user_id":3796068,"display_name":"Puneet_Techie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1421131109,"creation_date":1421131109,"answer_id":27916243,"question_id":27916018,"body_markdown":"The LinkedHashMap basically maintains two pointers for each entry namely -:\r\n**Before , After** \r\n\r\nas the name suggest both the pointers are used for the ordering purpose and are used to adjust the pointers in case of insertions or deletions.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>The LinkedHashMap basically maintains two pointers for each entry namely -:\n<strong>Before , After</strong> </p>\n\n<p>as the name suggest both the pointers are used for the ordering purpose and are used to adjust the pointers in case of insertions or deletions.</p>\n"},{"tags":[],"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1421163492,"creation_date":1421132973,"answer_id":27916645,"question_id":27916018,"body_markdown":"You are right that you only need to maintain a singly linked list to keep track of insertion order. But in order to efficiently maintain a singly linked list, you actually need a doubly linked list.\r\n\r\nConsider three entries in order\r\n\r\n    A ---&gt; B ---&gt; C\r\n\r\nSuppose you remove `B`. Obviously `A` should now point to `C`. But unless you know the entry before `B` you cannot efficiently say which entry should now point to `C`. To fix this, you need entries to point in both directions.\r\n\r\n      ---&gt;   ---&gt; \r\n    A      B      C\r\n      &lt;---   &lt;---\r\n\r\nThis way, when you remove `B` you can just look at the entries before and after `B` (`A` and `C`) and update so that `A` and `C` point to each other.\r\n\r\nThe reason `LinkedHashMap` maintains insertion order while `HashMap` doesn&#39;t, despite the fact that all but 4 methods are inherited, is that it&#39;s very cleverly written. Most implementation-specific operations are members of `HashMap.Entry`, not `HashMap`. `LinkedHashMap` has a `private static` class `LinkedHashMap.Entry` which extends the `static` class `HashMap.Entry` of `HashMap`. When you call `put` or `remove`, for example, the code for `LinkedHashMap` can be the same as the code for `HashMap` because it is the *entries themselves* that keep track of before and after information. As an example, here is the code in full for `LinkedHashMap.Entry.remove()` that I was explaining above\r\n\r\n    private void remove() {\r\n        before.after = after;\r\n        after.before = before;\r\n    }","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>You are right that you only need to maintain a singly linked list to keep track of insertion order. But in order to efficiently maintain a singly linked list, you actually need a doubly linked list.</p>\n\n<p>Consider three entries in order</p>\n\n<pre><code>A ---&gt; B ---&gt; C\n</code></pre>\n\n<p>Suppose you remove <code>B</code>. Obviously <code>A</code> should now point to <code>C</code>. But unless you know the entry before <code>B</code> you cannot efficiently say which entry should now point to <code>C</code>. To fix this, you need entries to point in both directions.</p>\n\n<pre><code>  ---&gt;   ---&gt; \nA      B      C\n  &lt;---   &lt;---\n</code></pre>\n\n<p>This way, when you remove <code>B</code> you can just look at the entries before and after <code>B</code> (<code>A</code> and <code>C</code>) and update so that <code>A</code> and <code>C</code> point to each other.</p>\n\n<p>The reason <code>LinkedHashMap</code> maintains insertion order while <code>HashMap</code> doesn't, despite the fact that all but 4 methods are inherited, is that it's very cleverly written. Most implementation-specific operations are members of <code>HashMap.Entry</code>, not <code>HashMap</code>. <code>LinkedHashMap</code> has a <code>private static</code> class <code>LinkedHashMap.Entry</code> which extends the <code>static</code> class <code>HashMap.Entry</code> of <code>HashMap</code>. When you call <code>put</code> or <code>remove</code>, for example, the code for <code>LinkedHashMap</code> can be the same as the code for <code>HashMap</code> because it is the <em>entries themselves</em> that keep track of before and after information. As an example, here is the code in full for <code>LinkedHashMap.Entry.remove()</code> that I was explaining above</p>\n\n<pre><code>private void remove() {\n    before.after = after;\n    after.before = before;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1578439,"reputation":9,"user_id":1464350,"display_name":"user1464350"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1513623308,"creation_date":1513623308,"answer_id":47874726,"question_id":27916018,"body_markdown":"LinkedHashMap can be used for maintaining the insertion order and for maintaining the access order.\r\nLinkedHashMap inherited the same functionality of hashmap for maintain list in bucket,so used **next** reference.\r\n\r\nFor maintaining the insertion order they used doubly linked list(used **before** and **after** reference),but that can be done by using singly linked list. At the same time they have to achieve the access order functionality and in that they need frequent movement of the element to the end and that require frequent deletion for frequent deletion they used doubly linked list .","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>LinkedHashMap can be used for maintaining the insertion order and for maintaining the access order.\nLinkedHashMap inherited the same functionality of hashmap for maintain list in bucket,so used <strong>next</strong> reference.</p>\n\n<p>For maintaining the insertion order they used doubly linked list(used <strong>before</strong> and <strong>after</strong> reference),but that can be done by using singly linked list. At the same time they have to achieve the access order functionality and in that they need frequent movement of the element to the end and that require frequent deletion for frequent deletion they used doubly linked list .</p>\n"},{"tags":[],"owner":{"account_id":5421403,"reputation":943,"user_id":4314917,"accept_rate":80,"display_name":"Gurinder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524905998,"creation_date":1524893345,"answer_id":50073188,"question_id":27916018,"body_markdown":"One thing I would also like to add is that LinkedHashMap can also be used as an LRU Cache by setting it&#39;s accessOrder boolean to true via its constructor.\r\n\r\nNow LinkedHashMap maintains two pointers `head`(eldest of the LinkedHashMap) and `tails`(youngest of the LinkedHashMap). So keep in mind when you set accessOrder to true it stops maintaining the insertion-order and starts behaving like a proper LRU cache.\r\n\r\nNow when LRU cache exceeds its limit and we want to remove the eldest entry, as it maintains DoublyLinkedList internally the removal of eldest entry is comparatively fast, as it maintains two pointers(head and tails)  which can move in both directions or we can say if it was a Singly LinkedList for removing eldest entry we need to traverse all the nodes and then remove it. Thanks to pointers `head` and `tails` it can easily be done by just removing the last node(eldest one) by reaching there with help of `tails` pointer and taking that last node&#39;s previous pointer to make second last node `tail` of the DoublyLinkedList in LinkedHashMap.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>One thing I would also like to add is that LinkedHashMap can also be used as an LRU Cache by setting it's accessOrder boolean to true via its constructor.</p>\n\n<p>Now LinkedHashMap maintains two pointers <code>head</code>(eldest of the LinkedHashMap) and <code>tails</code>(youngest of the LinkedHashMap). So keep in mind when you set accessOrder to true it stops maintaining the insertion-order and starts behaving like a proper LRU cache.</p>\n\n<p>Now when LRU cache exceeds its limit and we want to remove the eldest entry, as it maintains DoublyLinkedList internally the removal of eldest entry is comparatively fast, as it maintains two pointers(head and tails)  which can move in both directions or we can say if it was a Singly LinkedList for removing eldest entry we need to traverse all the nodes and then remove it. Thanks to pointers <code>head</code> and <code>tails</code> it can easily be done by just removing the last node(eldest one) by reaching there with help of <code>tails</code> pointer and taking that last node's previous pointer to make second last node <code>tail</code> of the DoublyLinkedList in LinkedHashMap.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230205,"creation_date":1686799490,"answer_id":76478884,"question_id":27916018,"body_markdown":"The other answers cover why the doubly linked list is currently needed.  Java 21 has an additional reason: the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#reversed()) method on `LinkedHashMap` which provides a reversed view of the map.  The backwards links are needed to efficiently iterate through the list backwards to provide this view.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>The other answers cover why the doubly linked list is currently needed.  Java 21 has an additional reason: the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method on <code>LinkedHashMap</code> which provides a reversed view of the map.  The backwards links are needed to efficiently iterate through the list backwards to provide this view.</p>\n"}],"owner":{"account_id":5117147,"reputation":161,"user_id":4101896,"display_name":"Mohamed Rafic S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3904,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":6,"score":15,"last_activity_date":1695230205,"creation_date":1421129983,"question_id":27916018,"body_markdown":"As there is no internal and reasonable explanation in any thread.\r\nPlease give me exact reason.\r\n\r\n1. for the insertion order it is enough to maintain with singly linked list but why not?\r\n\r\n2. how doubly linked list increases performance in this scenario?\r\n\r\n3. all the methods are inherited from the hashmap xpt 4 methods then an iterator for hashmap not maintains the order whereas the linkedhashmap maintains the order?\r\n","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>As there is no internal and reasonable explanation in any thread.\nPlease give me exact reason.</p>\n\n<ol>\n<li><p>for the insertion order it is enough to maintain with singly linked list but why not?</p></li>\n<li><p>how doubly linked list increases performance in this scenario?</p></li>\n<li><p>all the methods are inherited from the hashmap xpt 4 methods then an iterator for hashmap not maintains the order whereas the linkedhashmap maintains the order?</p></li>\n</ol>\n"},{"tags":["java","spring-boot","spring-integration","messaging","spring-integration-dsl"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1695229840,"post_id":77144457,"comment_id":135997820,"body_markdown":"I think it fails because there is that `foo` remote directory on your SFTP server.","body":"I think it fails because there is that <code>foo</code> remote directory on your SFTP server."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695230151,"creation_date":1695230151,"answer_id":77144651,"question_id":77144457,"body_markdown":"It fails because there is just no that `foo` remote directory to upload file into.\r\n\r\nSee `autoCreateDirectory(true)` option:\r\n\r\n\t/**\r\n\t * A {@code boolean} flag to indicate automatically create the directory or not.\r\n\t * @param autoCreateDirectory true to automatically create the directory.\r\n\t * @return the current Spec\r\n\t */\r\n\tpublic S autoCreateDirectory(boolean autoCreateDirectory) {\r\n\r\nIt is `false` by default on the `RemoteFileTemplate`.\r\n\r\nTherefore your config must be like this:\r\n\r\n    Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;).autoCreateDirectory(true)","title":"Spring Integration error: Failure to write to &#39;foo/002.txt.writing&#39; while uploading the file","body":"<p>It fails because there is just no that <code>foo</code> remote directory to upload file into.</p>\n<p>See <code>autoCreateDirectory(true)</code> option:</p>\n<pre><code>/**\n * A {@code boolean} flag to indicate automatically create the directory or not.\n * @param autoCreateDirectory true to automatically create the directory.\n * @return the current Spec\n */\npublic S autoCreateDirectory(boolean autoCreateDirectory) {\n</code></pre>\n<p>It is <code>false</code> by default on the <code>RemoteFileTemplate</code>.</p>\n<p>Therefore your config must be like this:</p>\n<pre><code>Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;).autoCreateDirectory(true)\n</code></pre>\n"}],"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77144651,"answer_count":1,"score":0,"last_activity_date":1695230151,"creation_date":1695228272,"question_id":77144457,"body_markdown":"I&#39;m experimenting with the following sample setup from [SI samples][1] to understand its inner workings with a goal to then adapt it to similar set of tasks in upper environments.\r\n\r\n**DailyCashReportApplication.java**\r\n```\r\n@Slf4j\r\n@SpringBootApplication\r\n@PropertySource(value = &quot;classpath:feeds-config.yml&quot;, factory = com.pru.globalpayments.feeds.downstream.YamlPropertySourceFactory.class)\r\npublic class DailyCashReportApplication  implements CommandLineRunner  {\r\n\t\r\n//\t@Autowired\r\n//\t@Qualifier(&quot;syntheticRunner&quot;) //TODO: to be replaced by runners consuming from appropriate data sources\r\n//\tprivate AbstractRunner runner; \r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tlog.info(&quot;DailyCashReportApplication running...&quot;);\r\n\t\r\n\t\tnew SpringApplicationBuilder(DailyCashReportApplication.class).web(WebApplicationType.NONE).run(args);\r\n\t\t\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\t//runner.run(args);\r\n\t}\r\n```\r\n\r\n**DcrConfig.java**:\r\n```\r\n@Configuration\r\npublic class DcrConfig {\r\n\r\n\tprivate final static String EMAIL_SUCCESS_SUFFIX = &quot;emailSuccessSuffix&quot;;\r\n\t\r\n\t// sftp\r\n\r\n\t@Value(&quot;${sftp.in.host}&quot;)\r\n\t@Getter\r\n\tprivate String host;\r\n\r\n\t@Value(&quot;${sftp.in.port}&quot;)\r\n\tprivate int port;\r\n\r\n\t@Value(&quot;${sftp.in.user}&quot;)\r\n\tprivate String user;\r\n\r\n\t@Value(&quot;${sftp.in.privateKey}&quot;)\r\n\t@Getter\r\n\tprivate String privateKeyLocation;\r\n\r\n\t@Value(&quot;${sftp.in.remoteDir}&quot;)\r\n\t@Getter\r\n\tprivate String remoteDir;\r\n\r\n\r\n\r\n\t@Value(&quot;${sftp.in.localDir}&quot;)\r\n\t@Getter\r\n\tprivate String localDir;\r\n\r\n\t@Value(&quot;${sftp.in.chmod}&quot;)\r\n\tprivate String chmod;\r\n\r\n\t@Value(&quot;${sftp.in.maxFetchSize}&quot;)\r\n\t@Getter\r\n\tprivate int maxFetchSize;\r\n\r\n\t@Value(&quot;${sftp.in.file.filter}&quot;)\r\n\tprivate String fileFilter;\r\n\r\n\t@Autowired\r\n\tprivate ResourceLoader resourceLoader;\r\n\t\r\n\t@Bean(name = &quot;downloadSftpSessionFactory&quot;)\r\n\tpublic SessionFactory&lt;LsEntry&gt; sftpSessionFactory() throws IOException {\r\n\r\n\t\tResource keyFileResource = resourceLoader.getResource(privateKeyLocation);\r\n\r\n\t\tDefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n\t\tfactory.setHost(host);\r\n\t\tfactory.setPort(port);\r\n\t\tfactory.setUser(user);\r\n\t\tfactory.setPrivateKey(keyFileResource);\r\n\t\tfactory.setAllowUnknownKeys(true);\r\n\t\treturn new CachingSessionFactory&lt;LsEntry&gt;(factory);\r\n\t}\r\n\r\n\t\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow fromFile() {\r\n\t\treturn IntegrationFlows.from(Files.inboundAdapter(new File(remoteDir))\r\n\t\t\t\t\t\t\t\t\t\t.preventDuplicates(false)\r\n\t\t\t\t\t\t\t\t\t\t.patternFilter(&quot;*.txt&quot;), \r\n\t\t\t\te -&gt; e.poller(Pollers.fixedDelay(5000))\r\n\t\t\t\t\t\t\t\t\t\t.id(&quot;fileInboundChannelAdapter&quot;))\r\n\t\t\t\t.handle(Files.splitter(true, true))\r\n\t\t\t\t.&lt;Object, Class&lt;?&gt;&gt;route(Object::getClass, m-&gt;m\r\n\t\t\t\t\t\t.channelMapping(FileSplitter.FileMarker.class, &quot;markers.input&quot;)\r\n\t\t\t\t\t\t.channelMapping(String.class, &quot;lines.input&quot;))\r\n\t\t\t\t.get();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic FileWritingMessageHandlerSpec fileOut() {\r\n\t\treturn Files.outboundAdapter(&quot;&#39;&quot;+localDir+&quot;&#39;&quot;)\r\n\t\t\t\t.appendNewLine(true)\r\n\t\t\t\t.fileNameExpression(&quot;payload.substring(1,4) + &#39;.txt&#39;&quot;);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow lines(FileWritingMessageHandler fileOut) {\r\n\t\treturn f -&gt; f.handle(fileOut); \r\n\t}\r\n\t\r\n\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow markers() throws IOException{\r\n\t\treturn f -&gt; f.&lt;FileSplitter.FileMarker&gt;filter(m -&gt; m.getMark().equals(FileSplitter.FileMarker.Mark.END),\r\n\t\t\t\t\t\te -&gt; e.id(&quot;markerFilter&quot;))\r\n\t\t\t\t.publishSubscribeChannel(s -&gt; s\r\n\r\n\t\t\t\t\t\t// first trigger file flushes\r\n\t\t\t\t\t\t.subscribe(sf -&gt; sf.transform(&quot;&#39;tmp/out/.*\\\\.txt&#39;&quot;, e -&gt; e.id(&quot;toTriggerPattern&quot;))\r\n\t\t\t\t\t\t\t\t.trigger(&quot;fileOut&quot;, e -&gt; e.id(&quot;flusher&quot;)))\r\n\r\n\t\t\t\t\t\t// send the first file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;tmp/out/002.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;002.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp002&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// send the second file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/006.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;006.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp006&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// send the third file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/009.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;009.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp009&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t);\r\n\t}\r\n\t\r\n\r\n\t\r\n\t\r\n\r\n\t\r\n\r\n\t\r\n\t@Bean\r\n\tpublic SessionFactory&lt;LsEntry&gt; ftp() throws IOException {\r\n\r\n\t\tResource keyFileResource = resourceLoader.getResource(privateKeyLocation);\r\n\r\n\r\n\t\tDefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n\t\tfactory.setHost(host);\r\n\t\tfactory.setPort(port);\r\n\t\tfactory.setUser(user);\r\n\t\tfactory.setPrivateKey(keyFileResource);\r\n\t\tfactory.setAllowUnknownKeys(true);\r\n\t\treturn new CachingSessionFactory&lt;LsEntry&gt;(factory);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic MethodInterceptor afterMailAdvice() {\r\n\t\treturn invocation -&gt; {\r\n\t\t\tMessage&lt;?&gt; message = (Message&lt;?&gt;) invocation.getArguments()[0];\r\n\t\t\tMessageHeaders headers = message.getHeaders();\r\n\t\t\tFile originalFile = headers.get(FileHeaders.ORIGINAL_FILE, File.class);\r\n\t\t\ttry {\r\n\t\t\t\tinvocation.proceed();\r\n\t\t\t\toriginalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)));\r\n\t\t\t}\r\n\t\t\tcatch(Exception e) {\r\n\t\t\t\toriginalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)+&quot;email.failed&quot;));\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n**application-dev.yml**\r\n```\r\nspring:\r\n  application:\r\n    name: daily-cash-report-application\r\n\r\nsftp:\r\n  in:\r\n    host: eafdev\r\n    port: 22\r\n    user: eafdev\r\n    remoteDir: tmp/in \r\n    tmpDir: \r\n    localDir: tmp/out \r\n    maxFetchSize: 1    \r\n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\r\n    chmod: 664 \r\n    poller:\r\n      fixedDelay: 10000\r\n    file:\r\n      filter: A.B.*    #TODO: calibrate once spec is known\r\n  out:\r\n    host: eafdev\r\n    port: 22\r\n    user: eafdev\r\n    remoteDir: tmp/out  \r\n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\r\n    chmod: 664 \r\n\r\nfile: \r\n  out:   \r\n    targetDir: \r\n    tmpDir:\r\n```\r\n\r\n**DailyCashReportApplicationTest.java**:\r\n```\r\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\r\n@SpringIntegrationTest(noAutoStartup = &quot;fileInboundChannelAdapter&quot;)\r\n@SpringJUnitConfig(classes = { \r\n        DailyCashReportApplication.class,\r\n        DcrConfig.class,\r\n        })\r\n@EnableConfigurationProperties\r\n@PropertySource(value = &quot;application-dev.yml&quot;, factory = YamlPropertySourceFactory.class)\r\n@Slf4j\r\nclass DailyCashReportApplicationTest {\r\n\r\n    @Test\r\n    @SneakyThrows\r\n    void test()  {\r\n\r\n        File in = new File(&quot;tmp/in/&quot;, &quot;foo&quot;);\r\n        FileOutputStream fos = new FileOutputStream(in);\r\n        fos.write(&quot;*002,foo,bar\\n*006,baz,qux\\n*009,fiz,buz\\n&quot;.getBytes());\r\n        fos.close();\r\n        in.renameTo(new File(&quot;tmp/in/&quot;, &quot;foo.txt&quot;));\r\n\r\n        File out = new File(&quot;tmp/out/002.txt&quot;);\r\n        int n = 0;\r\n        while (n++ &lt; 100 &amp;&amp; (!out.exists() || out.length() &lt; 12)) {\r\n            Thread.sleep(100);\r\n        }\r\n        assertThat(out.exists()).isTrue();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nRegardless if run via *ApplicationTest.java, or via executing the above *Application.java file in the IDE and dropping the same foo.txt content in the pre-created `tmp/in` folder, I&#39;m seeing **partially** correct behavior in terms of `tmp\\in\\foo.txt` being picked up and 3 files being created in the `tmp/out` accompanied by the following error: \r\n\r\n```\r\n2023-09-20 11:40:21.384 [scheduling-1] ERROR o.s.i.handler.LoggingHandler - org.springframework.messaging.MessageDeliveryException: Error handling message for file [C:\\code\\STS\\daily-cash-report\\tmp\\out\\002.txt -&gt; 002.txt]; nested exception is org.springframework.messaging.MessagingException: Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:368)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.lambda$send$0(RemoteFileTemplate.java:314)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.execute(RemoteFileTemplate.java:452)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:314)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:302)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:294)\r\n\tat org.springframework.integration.file.remote.handler.FileTransferringMessageHandler.handleMessageInternal(FileTransferringMessageHandler.java:207)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.BroadcastingDispatcher.invokeHandler(BroadcastingDispatcher.java:222)\r\n\tat org.springframework.integration.dispatcher.BroadcastingDispatcher.dispatch(BroadcastingDispatcher.java:178)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.router.AbstractMessageRouter.doSend(AbstractMessageRouter.java:213)\r\n\tat org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:195)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.splitter.AbstractMessageSplitter.produceOutput(AbstractMessageSplitter.java:317)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage(SourcePollingChannelAdapter.java:196)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:347)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:340)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.springframework.messaging.MessagingException: Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:573)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:353)\r\n\t... 127 more\r\nCaused by: java.io.IOException: failed to write file\r\n\tat org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:175)\r\n\tat org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession.write(CachingSessionFactory.java:237)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:582)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:570)\r\n\t... 128 more\r\nCaused by: 2: No such file\r\n\tat com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2873)\r\n\tat com.jcraft.jsch.ChannelSftp._put(ChannelSftp.java:594)\r\n\tat com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:540)\r\n\tat com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:492)\r\n\tat org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:172)\r\n\t... 131 more\r\n```\r\n\r\nThe gist seems to be: ```Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]```\r\n\r\nIt is thrown on a brand-new file being dropped in the `tmp\\in` folder and then repeatedly on every  poller execution while the split into the 3 resulting files: `002.txt`, `006.txt` and `009.txt` happens correctly, as mentioned above.\r\n\r\nI&#39;m aware of the `.writing` extension (as per [docs][2]), however this doesn&#39;t seem like an expected behavior.  While playing with that SI sample, I&#39;d like to get to the bottom of why this error is happening so I can eliminate it migrating the app from this experimental environment into the real ones.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-integration-samples/blob/main/applications/file-split-ftp/src/main/java/org/springframework/integration/samples/filesplit/Application.java\r\n  [2]: https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-incomplete","title":"Spring Integration error: Failure to write to &#39;foo/002.txt.writing&#39; while uploading the file","body":"<p>I'm experimenting with the following sample setup from <a href=\"https://github.com/spring-projects/spring-integration-samples/blob/main/applications/file-split-ftp/src/main/java/org/springframework/integration/samples/filesplit/Application.java\" rel=\"nofollow noreferrer\">SI samples</a> to understand its inner workings with a goal to then adapt it to similar set of tasks in upper environments.</p>\n<p><strong>DailyCashReportApplication.java</strong></p>\n<pre><code>@Slf4j\n@SpringBootApplication\n@PropertySource(value = &quot;classpath:feeds-config.yml&quot;, factory = com.pru.globalpayments.feeds.downstream.YamlPropertySourceFactory.class)\npublic class DailyCashReportApplication  implements CommandLineRunner  {\n    \n//  @Autowired\n//  @Qualifier(&quot;syntheticRunner&quot;) //TODO: to be replaced by runners consuming from appropriate data sources\n//  private AbstractRunner runner; \n\n    public static void main(String[] args) {\n        log.info(&quot;DailyCashReportApplication running...&quot;);\n    \n        new SpringApplicationBuilder(DailyCashReportApplication.class).web(WebApplicationType.NONE).run(args);\n        \n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        //runner.run(args);\n    }\n</code></pre>\n<p><strong>DcrConfig.java</strong>:</p>\n<pre><code>@Configuration\npublic class DcrConfig {\n\n    private final static String EMAIL_SUCCESS_SUFFIX = &quot;emailSuccessSuffix&quot;;\n    \n    // sftp\n\n    @Value(&quot;${sftp.in.host}&quot;)\n    @Getter\n    private String host;\n\n    @Value(&quot;${sftp.in.port}&quot;)\n    private int port;\n\n    @Value(&quot;${sftp.in.user}&quot;)\n    private String user;\n\n    @Value(&quot;${sftp.in.privateKey}&quot;)\n    @Getter\n    private String privateKeyLocation;\n\n    @Value(&quot;${sftp.in.remoteDir}&quot;)\n    @Getter\n    private String remoteDir;\n\n\n\n    @Value(&quot;${sftp.in.localDir}&quot;)\n    @Getter\n    private String localDir;\n\n    @Value(&quot;${sftp.in.chmod}&quot;)\n    private String chmod;\n\n    @Value(&quot;${sftp.in.maxFetchSize}&quot;)\n    @Getter\n    private int maxFetchSize;\n\n    @Value(&quot;${sftp.in.file.filter}&quot;)\n    private String fileFilter;\n\n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    @Bean(name = &quot;downloadSftpSessionFactory&quot;)\n    public SessionFactory&lt;LsEntry&gt; sftpSessionFactory() throws IOException {\n\n        Resource keyFileResource = resourceLoader.getResource(privateKeyLocation);\n\n        DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\n        factory.setHost(host);\n        factory.setPort(port);\n        factory.setUser(user);\n        factory.setPrivateKey(keyFileResource);\n        factory.setAllowUnknownKeys(true);\n        return new CachingSessionFactory&lt;LsEntry&gt;(factory);\n    }\n\n    \n    \n    @Bean\n    public IntegrationFlow fromFile() {\n        return IntegrationFlows.from(Files.inboundAdapter(new File(remoteDir))\n                                        .preventDuplicates(false)\n                                        .patternFilter(&quot;*.txt&quot;), \n                e -&gt; e.poller(Pollers.fixedDelay(5000))\n                                        .id(&quot;fileInboundChannelAdapter&quot;))\n                .handle(Files.splitter(true, true))\n                .&lt;Object, Class&lt;?&gt;&gt;route(Object::getClass, m-&gt;m\n                        .channelMapping(FileSplitter.FileMarker.class, &quot;markers.input&quot;)\n                        .channelMapping(String.class, &quot;lines.input&quot;))\n                .get();\n    }\n    \n    @Bean\n    public FileWritingMessageHandlerSpec fileOut() {\n        return Files.outboundAdapter(&quot;'&quot;+localDir+&quot;'&quot;)\n                .appendNewLine(true)\n                .fileNameExpression(&quot;payload.substring(1,4) + '.txt'&quot;);\n    }\n    \n    @Bean\n    public IntegrationFlow lines(FileWritingMessageHandler fileOut) {\n        return f -&gt; f.handle(fileOut); \n    }\n    \n\n    \n    @Bean\n    public IntegrationFlow markers() throws IOException{\n        return f -&gt; f.&lt;FileSplitter.FileMarker&gt;filter(m -&gt; m.getMark().equals(FileSplitter.FileMarker.Mark.END),\n                        e -&gt; e.id(&quot;markerFilter&quot;))\n                .publishSubscribeChannel(s -&gt; s\n\n                        // first trigger file flushes\n                        .subscribe(sf -&gt; sf.transform(&quot;'tmp/out/.*\\\\.txt'&quot;, e -&gt; e.id(&quot;toTriggerPattern&quot;))\n                                .trigger(&quot;fileOut&quot;, e -&gt; e.id(&quot;flusher&quot;)))\n\n                        // send the first file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;tmp/out/002.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;002.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp002&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n                        // send the second file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/006.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;006.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp006&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n                        // send the third file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/009.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;009.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp009&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n\n                        );\n    }\n    \n\n    \n    \n\n    \n\n    \n    @Bean\n    public SessionFactory&lt;LsEntry&gt; ftp() throws IOException {\n\n        Resource keyFileResource = resourceLoader.getResource(privateKeyLocation);\n\n\n        DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\n        factory.setHost(host);\n        factory.setPort(port);\n        factory.setUser(user);\n        factory.setPrivateKey(keyFileResource);\n        factory.setAllowUnknownKeys(true);\n        return new CachingSessionFactory&lt;LsEntry&gt;(factory);\n    }\n    \n    @Bean\n    public MethodInterceptor afterMailAdvice() {\n        return invocation -&gt; {\n            Message&lt;?&gt; message = (Message&lt;?&gt;) invocation.getArguments()[0];\n            MessageHeaders headers = message.getHeaders();\n            File originalFile = headers.get(FileHeaders.ORIGINAL_FILE, File.class);\n            try {\n                invocation.proceed();\n                originalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)));\n            }\n            catch(Exception e) {\n                originalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)+&quot;email.failed&quot;));\n            }\n            return null;\n        };\n    }\n    \n}\n\n</code></pre>\n<p><strong>application-dev.yml</strong></p>\n<pre><code>spring:\n  application:\n    name: daily-cash-report-application\n\nsftp:\n  in:\n    host: eafdev\n    port: 22\n    user: eafdev\n    remoteDir: tmp/in \n    tmpDir: \n    localDir: tmp/out \n    maxFetchSize: 1    \n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\n    chmod: 664 \n    poller:\n      fixedDelay: 10000\n    file:\n      filter: A.B.*    #TODO: calibrate once spec is known\n  out:\n    host: eafdev\n    port: 22\n    user: eafdev\n    remoteDir: tmp/out  \n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\n    chmod: 664 \n\nfile: \n  out:   \n    targetDir: \n    tmpDir:\n</code></pre>\n<p><strong>DailyCashReportApplicationTest.java</strong>:</p>\n<pre><code>@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@SpringIntegrationTest(noAutoStartup = &quot;fileInboundChannelAdapter&quot;)\n@SpringJUnitConfig(classes = { \n        DailyCashReportApplication.class,\n        DcrConfig.class,\n        })\n@EnableConfigurationProperties\n@PropertySource(value = &quot;application-dev.yml&quot;, factory = YamlPropertySourceFactory.class)\n@Slf4j\nclass DailyCashReportApplicationTest {\n\n    @Test\n    @SneakyThrows\n    void test()  {\n\n        File in = new File(&quot;tmp/in/&quot;, &quot;foo&quot;);\n        FileOutputStream fos = new FileOutputStream(in);\n        fos.write(&quot;*002,foo,bar\\n*006,baz,qux\\n*009,fiz,buz\\n&quot;.getBytes());\n        fos.close();\n        in.renameTo(new File(&quot;tmp/in/&quot;, &quot;foo.txt&quot;));\n\n        File out = new File(&quot;tmp/out/002.txt&quot;);\n        int n = 0;\n        while (n++ &lt; 100 &amp;&amp; (!out.exists() || out.length() &lt; 12)) {\n            Thread.sleep(100);\n        }\n        assertThat(out.exists()).isTrue();\n\n    }\n\n}\n</code></pre>\n<p>Regardless if run via *ApplicationTest.java, or via executing the above *Application.java file in the IDE and dropping the same foo.txt content in the pre-created <code>tmp/in</code> folder, I'm seeing <strong>partially</strong> correct behavior in terms of <code>tmp\\in\\foo.txt</code> being picked up and 3 files being created in the <code>tmp/out</code> accompanied by the following error:</p>\n<pre><code>2023-09-20 11:40:21.384 [scheduling-1] ERROR o.s.i.handler.LoggingHandler - org.springframework.messaging.MessageDeliveryException: Error handling message for file [C:\\code\\STS\\daily-cash-report\\tmp\\out\\002.txt -&gt; 002.txt]; nested exception is org.springframework.messaging.MessagingException: Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:368)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.lambda$send$0(RemoteFileTemplate.java:314)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.execute(RemoteFileTemplate.java:452)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:314)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:302)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:294)\n    at org.springframework.integration.file.remote.handler.FileTransferringMessageHandler.handleMessageInternal(FileTransferringMessageHandler.java:207)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.BroadcastingDispatcher.invokeHandler(BroadcastingDispatcher.java:222)\n    at org.springframework.integration.dispatcher.BroadcastingDispatcher.dispatch(BroadcastingDispatcher.java:178)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.router.AbstractMessageRouter.doSend(AbstractMessageRouter.java:213)\n    at org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:195)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.splitter.AbstractMessageSplitter.produceOutput(AbstractMessageSplitter.java:317)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage(SourcePollingChannelAdapter.java:196)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:347)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:340)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.springframework.messaging.MessagingException: Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file\n    at org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:573)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:353)\n    ... 127 more\nCaused by: java.io.IOException: failed to write file\n    at org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:175)\n    at org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession.write(CachingSessionFactory.java:237)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:582)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:570)\n    ... 128 more\nCaused by: 2: No such file\n    at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2873)\n    at com.jcraft.jsch.ChannelSftp._put(ChannelSftp.java:594)\n    at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:540)\n    at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:492)\n    at org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:172)\n    ... 131 more\n</code></pre>\n<p>The gist seems to be: <code>Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]</code></p>\n<p>It is thrown on a brand-new file being dropped in the <code>tmp\\in</code> folder and then repeatedly on every  poller execution while the split into the 3 resulting files: <code>002.txt</code>, <code>006.txt</code> and <code>009.txt</code> happens correctly, as mentioned above.</p>\n<p>I'm aware of the <code>.writing</code> extension (as per <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-incomplete\" rel=\"nofollow noreferrer\">docs</a>), however this doesn't seem like an expected behavior.  While playing with that SI sample, I'd like to get to the bottom of why this error is happening so I can eliminate it migrating the app from this experimental environment into the real ones.</p>\n"},{"tags":["java","dictionary","hashmap"],"comments":[{"owner":{"account_id":33849,"reputation":3935,"user_id":95103,"accept_rate":50,"display_name":"Soundlink"},"score":2,"creation_date":1283094297,"post_id":3527216,"comment_id":3773456,"body_markdown":"Can you explain, why you want to do this? Maybe using a HashMap is not the best solution to your problem.","body":"Can you explain, why you want to do this? Maybe using a HashMap is not the best solution to your problem."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449679784,"post_id":3527216,"comment_id":56115027,"body_markdown":"See also http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry","body":"See also <a href=\"http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry\" title=\"java linkedhashmap get first or last entry\">stackoverflow.com/questions/1936462/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1472623854,"creation_date":1282405785,"answer_id":3538092,"question_id":3527216,"body_markdown":"HashMap doesn&#39;t have *&quot;the last position&quot;*, as it is not sorted.\r\n\r\nYou may use other `Map` which implements `java.util.SortedMap`, most popular one is `TreeMap`.\r\n","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>HashMap doesn't have <em>\"the last position\"</em>, as it is not sorted.</p>\n\n<p>You may use other <code>Map</code> which implements <code>java.util.SortedMap</code>, most popular one is <code>TreeMap</code>.</p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":168,"is_accepted":true,"score":168,"last_activity_date":1287875706,"creation_date":1282580654,"answer_id":3549555,"question_id":3527216,"body_markdown":"To answer your question in one sentence:\r\n\r\n**Per default, Maps don&#39;t have a last entry, it&#39;s not part of their contract.**\r\n\r\n----------\r\n\r\nAnd a side note: it&#39;s good practice to code against interfaces, not the implementation classes (see [Effective Java by Joshua Bloch][1], Chapter 8, Item 52: **Refer to objects by their interfaces**).\r\n\r\nSo your declaration should read:\r\n\r\n    Map&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\r\n\r\n(All maps share a common contract, so the client need not know what kind of map it is, unless he specifies a sub interface with an extended contract).\r\n\r\n----------\r\n\r\n##Possible Solutions##\r\n\r\n###Sorted Maps:###\r\nThere is a sub interface [SortedMap][2] that extends the map interface with order-based lookup methods and it has a sub interface [NavigableMap][3] that extends it even further. The standard implementation of this interface, [TreeMap][4], allows you to sort entries either by natural ordering (if they implement the [Comparable][5] interface) or by a supplied [Comparator][6].\r\n\r\nYou can access the last entry through the [lastEntry][7] method:\r\n\r\n    NavigableMap&lt;String,Integer&gt; map = new TreeMap&lt;String, Integer&gt;();\r\n    // add some entries\r\n    Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\r\n\r\n###Linked maps:###\r\nThere is also the special case of [LinkedHashMap][8], a HashMap implementation that stores the order in which keys are inserted. There is however no interface to back up this functionality, nor is there a  direct way to access the last key. You can only do it through tricks such as using a List in between:\r\n\r\n    Map&lt;String,String&gt; map = new LinkedHashMap&lt;String, Integer&gt;();\r\n    // add some entries\r\n    List&lt;Entry&lt;String,Integer&gt;&gt; entryList =\r\n        new ArrayList&lt;Map.Entry&lt;String, Integer&gt;&gt;(map.entrySet());\r\n    Entry&lt;String, Integer&gt; lastEntry =\r\n        entryList.get(entryList.size()-1);\r\n\r\n###Proper Solution:###\r\nSince you don&#39;t control the insertion order, you should go with the NavigableMap interface, i.e. you would write a comparator that positions the `Not-Specified` entry last.\r\n\r\nHere is an example:\r\n\r\n\tfinal NavigableMap&lt;String,Integer&gt; map = \r\n            new TreeMap&lt;String, Integer&gt;(new Comparator&lt;String&gt;() {\r\n\t\tpublic int compare(final String o1, final String o2) {\r\n\t\t\tint result;\r\n\t\t\tif(&quot;Not-Specified&quot;.equals(o1)) {\r\n\t\t\t\tresult=1;\r\n\t\t\t} else if(&quot;Not-Specified&quot;.equals(o2)) {\r\n\t\t\t\tresult=-1;\r\n\t\t\t} else {\r\n\t\t\t\tresult =o1.compareTo(o2);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t});\r\n\tmap.put(&quot;test&quot;, Integer.valueOf(2));\r\n\tmap.put(&quot;Not-Specified&quot;, Integer.valueOf(1));\r\n\tmap.put(&quot;testtest&quot;, Integer.valueOf(3));\r\n\tfinal Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\r\n\tSystem.out.println(&quot;Last key: &quot;+lastEntry.getKey()\r\n             + &quot;, last value: &quot;+lastEntry.getValue());\r\n\r\nOutput:\r\n\r\n&gt; Last key: Not-Specified, last value: 1\r\n\r\n###Solution using HashMap:###\r\n\r\nIf you must rely on HashMaps, there is still a solution, using a) a modified version of the above comparator, b) a [List][9] initialized with the Map&#39;s [entrySet][10] and c) the [Collections.sort()][11] helper method:\r\n\r\n        final Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n        map.put(&quot;test&quot;, Integer.valueOf(2));\r\n        map.put(&quot;Not-Specified&quot;, Integer.valueOf(1));\r\n        map.put(&quot;testtest&quot;, Integer.valueOf(3));\r\n\r\n        final List&lt;Entry&lt;String, Integer&gt;&gt; entries =\r\n            new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(map.entrySet());\r\n        Collections.sort(entries, new Comparator&lt;Entry&lt;String, Integer&gt;&gt;(){\r\n\r\n            public int compareKeys(final String o1, final String o2){\r\n                int result;\r\n                if(&quot;Not-Specified&quot;.equals(o1)){\r\n                    result = 1;\r\n                } else if(&quot;Not-Specified&quot;.equals(o2)){\r\n                    result = -1;\r\n                } else{\r\n                    result = o1.compareTo(o2);\r\n                }\r\n                return result;\r\n            }\r\n\r\n            @Override\r\n            public int compare(final Entry&lt;String, Integer&gt; o1,\r\n                final Entry&lt;String, Integer&gt; o2){\r\n                return this.compareKeys(o1.getKey(), o2.getKey());\r\n            }\r\n\r\n        });\r\n\r\n        final Entry&lt;String, Integer&gt; lastEntry =\r\n            entries.get(entries.size() - 1);\r\n        System.out.println(&quot;Last key: &quot; + lastEntry.getKey() + &quot;, last value: &quot;\r\n            + lastEntry.getValue());\r\n\r\n    }\r\n\r\nOutput:\r\n\r\n&gt; Last key: Not-Specified, last value: 1\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/effective/\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/util/NavigableMap.html\r\n  [4]: http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\r\n  [5]: http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\r\n  [6]: http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\r\n  [7]: http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html#lastEntry()\r\n  [8]: http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\r\n  [9]: http://download.oracle.com/javase/6/docs/api/java/util/List.html\r\n  [10]: http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()\r\n  [11]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>To answer your question in one sentence:</p>\n\n<p><strong>Per default, Maps don't have a last entry, it's not part of their contract.</strong></p>\n\n<hr>\n\n<p>And a side note: it's good practice to code against interfaces, not the implementation classes (see <a href=\"http://java.sun.com/docs/books/effective/\" rel=\"noreferrer\">Effective Java by Joshua Bloch</a>, Chapter 8, Item 52: <strong>Refer to objects by their interfaces</strong>).</p>\n\n<p>So your declaration should read:</p>\n\n<pre><code>Map&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\n</code></pre>\n\n<p>(All maps share a common contract, so the client need not know what kind of map it is, unless he specifies a sub interface with an extended contract).</p>\n\n<hr>\n\n<h2>Possible Solutions</h2>\n\n<h3>Sorted Maps:</h3>\n\n<p>There is a sub interface <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\" rel=\"noreferrer\">SortedMap</a> that extends the map interface with order-based lookup methods and it has a sub interface <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/NavigableMap.html\" rel=\"noreferrer\">NavigableMap</a> that extends it even further. The standard implementation of this interface, <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\" rel=\"noreferrer\">TreeMap</a>, allows you to sort entries either by natural ordering (if they implement the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\">Comparable</a> interface) or by a supplied <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\">Comparator</a>.</p>\n\n<p>You can access the last entry through the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html#lastEntry()\" rel=\"noreferrer\">lastEntry</a> method:</p>\n\n<pre><code>NavigableMap&lt;String,Integer&gt; map = new TreeMap&lt;String, Integer&gt;();\n// add some entries\nEntry&lt;String, Integer&gt; lastEntry = map.lastEntry();\n</code></pre>\n\n<h3>Linked maps:</h3>\n\n<p>There is also the special case of <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\">LinkedHashMap</a>, a HashMap implementation that stores the order in which keys are inserted. There is however no interface to back up this functionality, nor is there a  direct way to access the last key. You can only do it through tricks such as using a List in between:</p>\n\n<pre><code>Map&lt;String,String&gt; map = new LinkedHashMap&lt;String, Integer&gt;();\n// add some entries\nList&lt;Entry&lt;String,Integer&gt;&gt; entryList =\n    new ArrayList&lt;Map.Entry&lt;String, Integer&gt;&gt;(map.entrySet());\nEntry&lt;String, Integer&gt; lastEntry =\n    entryList.get(entryList.size()-1);\n</code></pre>\n\n<h3>Proper Solution:</h3>\n\n<p>Since you don't control the insertion order, you should go with the NavigableMap interface, i.e. you would write a comparator that positions the <code>Not-Specified</code> entry last.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>final NavigableMap&lt;String,Integer&gt; map = \n        new TreeMap&lt;String, Integer&gt;(new Comparator&lt;String&gt;() {\n    public int compare(final String o1, final String o2) {\n        int result;\n        if(\"Not-Specified\".equals(o1)) {\n            result=1;\n        } else if(\"Not-Specified\".equals(o2)) {\n            result=-1;\n        } else {\n            result =o1.compareTo(o2);\n        }\n        return result;\n    }\n\n});\nmap.put(\"test\", Integer.valueOf(2));\nmap.put(\"Not-Specified\", Integer.valueOf(1));\nmap.put(\"testtest\", Integer.valueOf(3));\nfinal Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\nSystem.out.println(\"Last key: \"+lastEntry.getKey()\n         + \", last value: \"+lastEntry.getValue());\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Last key: Not-Specified, last value: 1</p>\n</blockquote>\n\n<h3>Solution using HashMap:</h3>\n\n<p>If you must rely on HashMaps, there is still a solution, using a) a modified version of the above comparator, b) a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\">List</a> initialized with the Map's <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()\" rel=\"noreferrer\">entrySet</a> and c) the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29\" rel=\"noreferrer\">Collections.sort()</a> helper method:</p>\n\n<pre><code>    final Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n    map.put(\"test\", Integer.valueOf(2));\n    map.put(\"Not-Specified\", Integer.valueOf(1));\n    map.put(\"testtest\", Integer.valueOf(3));\n\n    final List&lt;Entry&lt;String, Integer&gt;&gt; entries =\n        new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(map.entrySet());\n    Collections.sort(entries, new Comparator&lt;Entry&lt;String, Integer&gt;&gt;(){\n\n        public int compareKeys(final String o1, final String o2){\n            int result;\n            if(\"Not-Specified\".equals(o1)){\n                result = 1;\n            } else if(\"Not-Specified\".equals(o2)){\n                result = -1;\n            } else{\n                result = o1.compareTo(o2);\n            }\n            return result;\n        }\n\n        @Override\n        public int compare(final Entry&lt;String, Integer&gt; o1,\n            final Entry&lt;String, Integer&gt; o2){\n            return this.compareKeys(o1.getKey(), o2.getKey());\n        }\n\n    });\n\n    final Entry&lt;String, Integer&gt; lastEntry =\n        entries.get(entries.size() - 1);\n    System.out.println(\"Last key: \" + lastEntry.getKey() + \", last value: \"\n        + lastEntry.getValue());\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Last key: Not-Specified, last value: 1</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1472623875,"creation_date":1282946123,"answer_id":3588391,"question_id":3527216,"body_markdown":"A `SortedMap` is the logical/best choice, however another option is to use a `LinkedHashMap` which maintains two order modes, most-recently-added goes last, and most-recently-accessed goes last. See the Javadocs for more details.","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>A <code>SortedMap</code> is the logical/best choice, however another option is to use a <code>LinkedHashMap</code> which maintains two order modes, most-recently-added goes last, and most-recently-accessed goes last. See the Javadocs for more details.</p>\n"},{"tags":[],"owner":{"account_id":192835,"reputation":26,"user_id":434202,"display_name":"anand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1283084052,"creation_date":1283084052,"answer_id":3594667,"question_id":3527216,"body_markdown":"move does not make sense for a hashmap since its a dictionary with a hashcode for bucketing based on key and then a linked list for colliding hashcodes resolved via equals.\r\nUse a TreeMap for sorted maps and then pass in a custom comparator.  ","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>move does not make sense for a hashmap since its a dictionary with a hashcode for bucketing based on key and then a linked list for colliding hashcodes resolved via equals.\nUse a TreeMap for sorted maps and then pass in a custom comparator.  </p>\n"},{"tags":[],"owner":{"account_id":7102719,"reputation":1304,"user_id":5473627,"accept_rate":91,"display_name":"Yoshua Nahar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1504761925,"creation_date":1486223100,"answer_id":42042255,"question_id":3527216,"body_markdown":"When using numbers as the key, I suppose you could also try this:\r\n    \r\n    \t\tMap&lt;Long, String&gt; map = new HashMap&lt;&gt;();\r\n    \t\tmap.put(4L, &quot;The First&quot;);\r\n    \t\tmap.put(6L, &quot;The Second&quot;);\r\n    \t\tmap.put(11L, &quot;The Last&quot;);\r\n    \r\n    \t\tlong lastKey = 0;\r\n            //you entered Map&lt;Long, String&gt; entry\r\n    \t\tfor (Map.Entry&lt;Long, String&gt; entry : map.entrySet()) {\r\n    \t\t\tlastKey = entry.getKey();\r\n    \t\t}\r\n    \t\tSystem.out.println(lastKey); // 11","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>When using numbers as the key, I suppose you could also try this:</p>\n\n<pre><code>        Map&lt;Long, String&gt; map = new HashMap&lt;&gt;();\n        map.put(4L, \"The First\");\n        map.put(6L, \"The Second\");\n        map.put(11L, \"The Last\");\n\n        long lastKey = 0;\n        //you entered Map&lt;Long, String&gt; entry\n        for (Map.Entry&lt;Long, String&gt; entry : map.entrySet()) {\n            lastKey = entry.getKey();\n        }\n        System.out.println(lastKey); // 11\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15429207,"reputation":52,"user_id":11131109,"display_name":"Mad Calm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551363063,"creation_date":1551363063,"answer_id":54927624,"question_id":3527216,"body_markdown":"In such scenario last used key is usually known so it can be used for accessing last value (inserted with the one):\r\n\r\n    class PostIndexData {\r\n        String _office_name;\r\n        Boolean _isGov;\r\n        public PostIndexData(String name, Boolean gov) {\r\n            _office_name = name;\r\n            _isGov = gov;\r\n        }\r\n    }\r\n    //-----------------------\r\n    class KgpData {\r\n        String _postIndex;\r\n        PostIndexData _postIndexData;\r\n        public KgpData(String postIndex, PostIndexData postIndexData) {\r\n            _postIndex = postIndex;\r\n            _postIndexData = postIndexData;;\r\n        }\r\n    }\r\n    \r\n    public class Office2ASMPro {\r\n        private HashMap&lt;String,PostIndexData&gt; _postIndexMap = new HashMap&lt;&gt;();\r\n        private HashMap&lt;String,KgpData&gt; _kgpMap = new HashMap&lt;&gt;();\r\n    ...\r\n    private void addOffice(String kgp, String postIndex, String officeName, Boolean gov) {\r\n                if (_postIndexMap.get(postIndex) == null) {\r\n                    _postIndexMap.put(postIndex, new PostIndexData(officeName, gov));\r\n                }\r\n                _kgpMap.put( kgp, new KgpData(postIndex, _postIndexMap.get(postIndex)) );\r\n            }","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>In such scenario last used key is usually known so it can be used for accessing last value (inserted with the one):</p>\n\n<pre><code>class PostIndexData {\n    String _office_name;\n    Boolean _isGov;\n    public PostIndexData(String name, Boolean gov) {\n        _office_name = name;\n        _isGov = gov;\n    }\n}\n//-----------------------\nclass KgpData {\n    String _postIndex;\n    PostIndexData _postIndexData;\n    public KgpData(String postIndex, PostIndexData postIndexData) {\n        _postIndex = postIndex;\n        _postIndexData = postIndexData;;\n    }\n}\n\npublic class Office2ASMPro {\n    private HashMap&lt;String,PostIndexData&gt; _postIndexMap = new HashMap&lt;&gt;();\n    private HashMap&lt;String,KgpData&gt; _kgpMap = new HashMap&lt;&gt;();\n...\nprivate void addOffice(String kgp, String postIndex, String officeName, Boolean gov) {\n            if (_postIndexMap.get(postIndex) == null) {\n                _postIndexMap.put(postIndex, new PostIndexData(officeName, gov));\n            }\n            _kgpMap.put( kgp, new KgpData(postIndex, _postIndexMap.get(postIndex)) );\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12654863,"reputation":97,"user_id":9197698,"display_name":"Muruganandam C"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1556689776,"creation_date":1556689776,"answer_id":55932145,"question_id":3527216,"body_markdown":"    Find missing all elements from array\r\n            int[] array = {3,5,7,8,2,1,32,5,7,9,30,5};\r\n    \t\tTreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\r\n    \t\tfor(int i=0;i&lt;array.length;i++) {\r\n    \t\t\tmap.put(array[i], 1);\r\n    \t\t}\r\n    \t\tint maxSize = map.lastKey();\r\n    \t\tfor(int j=0;j&lt;maxSize;j++) {\r\n    \t\t\tif(null == map.get(j))\r\n    \t\t\t\tSystem.out.println(&quot;Missing `enter code here`No:&quot;+j);\r\n    \t\t}","title":"How can I move a particular HashMap entry to the end of the map?","body":"<pre><code>Find missing all elements from array\n        int[] array = {3,5,7,8,2,1,32,5,7,9,30,5};\n        TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\n        for(int i=0;i&lt;array.length;i++) {\n            map.put(array[i], 1);\n        }\n        int maxSize = map.lastKey();\n        for(int j=0;j&lt;maxSize;j++) {\n            if(null == map.get(j))\n                System.out.println(\"Missing `enter code here`No:\"+j);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230131,"creation_date":1689743766,"answer_id":76718169,"question_id":3527216,"body_markdown":"`HashMap` explicitly does not define a key order.  Per the class [Javadocs](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html):\r\n\r\n&gt; This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.\r\n\r\nA number other map types do define a key order, including [`LinkedHashMap`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html) and maps which implement the [`SortedMap`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/SortedMap.html) interface.  Java 21 introduced the [`SequencedMap`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html) interface for maps such as these which have a a well-defined encounter order.\r\n\r\nPer [its Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html), a `SequencedMap` is:\r\n\r\n&gt; A `Map` that has a well-defined encounter order, that supports operations at both ends, and that is reversible.\r\n\r\nOne of the operations on `SequencedMap` is [`putLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)).  This optional operation, for `SequencedMap` types that support it, inserts an entry at the end of the map, or moves it to the end if the key is already present.  `LinkedHashMap` supports this method, but `SortedMap` does not.  Per [the method Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)):\r\n\r\n&gt; Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map&#39;s encounter order.\r\n\r\n# Scenario in question\r\n\r\nApplying the above to your scenario in question, we get:\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap&lt;String,Integer&gt;();\r\n\r\npopulateMap(map); // Populate the map as: {Not-Specified 1, test 2, testtest 3};\r\n\r\nmap.putLast(&quot;Not-Specified&quot;, map.get(&quot;Not-Specified&quot;));\r\n```","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p><code>HashMap</code> explicitly does not define a key order.  Per the class <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">Javadocs</a>:</p>\n<blockquote>\n<p>This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.</p>\n</blockquote>\n<p>A number other map types do define a key order, including <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\"><code>LinkedHashMap</code></a> and maps which implement the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/SortedMap.html\" rel=\"nofollow noreferrer\"><code>SortedMap</code></a> interface.  Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a> interface for maps such as these which have a a well-defined encounter order.</p>\n<p>Per <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\">its Javadocs</a>, a <code>SequencedMap</code> is:</p>\n<blockquote>\n<p>A <code>Map</code> that has a well-defined encounter order, that supports operations at both ends, and that is reversible.</p>\n</blockquote>\n<p>One of the operations on <code>SequencedMap</code> is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast</code></a>.  This optional operation, for <code>SequencedMap</code> types that support it, inserts an entry at the end of the map, or moves it to the end if the key is already present.  <code>LinkedHashMap</code> supports this method, but <code>SortedMap</code> does not.  Per <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\">the method Javadocs</a>:</p>\n<blockquote>\n<p>Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map's encounter order.</p>\n</blockquote>\n<h1>Scenario in question</h1>\n<p>Applying the above to your scenario in question, we get:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap&lt;String,Integer&gt;();\n\npopulateMap(map); // Populate the map as: {Not-Specified 1, test 2, testtest 3};\n\nmap.putLast(&quot;Not-Specified&quot;, map.get(&quot;Not-Specified&quot;));\n</code></pre>\n"}],"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147629,"favorite_count":0,"down_vote_count":2,"up_vote_count":70,"accepted_answer_id":3549555,"answer_count":8,"score":68,"last_activity_date":1695230131,"creation_date":1282262241,"question_id":3527216,"body_markdown":"How to move a particular `HashMap` entry to the last position?\r\n\r\nFor example, I have `HashMap` values like this:\r\n\r\n```lang-java\r\nHashMap&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\r\n\r\n// map = {Not-Specified 1, test 2, testtest 3};\r\n```\r\n\r\n&quot;Not-Specified&quot; may come in any position. it may come first or in the middle of the map. But I want to move the &quot;Not-Specified&quot; to the last position.\r\n\r\nHow can I do that?","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>How to move a particular <code>HashMap</code> entry to the last position?</p>\n<p>For example, I have <code>HashMap</code> values like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\n\n// map = {Not-Specified 1, test 2, testtest 3};\n</code></pre>\n<p>&quot;Not-Specified&quot; may come in any position. it may come first or in the middle of the map. But I want to move the &quot;Not-Specified&quot; to the last position.</p>\n<p>How can I do that?</p>\n"},{"tags":["java","reverse","foreach"],"comments":[{"owner":{"account_id":35463,"reputation":654,"user_id":100443,"accept_rate":100,"display_name":"muusbolla"},"score":8,"creation_date":1247060779,"post_id":1098117,"comment_id":912664,"body_markdown":"The point of the &quot;for-each&quot; loop is that you just need to perform an operation on each element, and order is not important. For-each could process the elements in completely random order, and it would still be doing what it was designed for. If you need to process the elements in a particular way, I would suggest doing it manually.","body":"The point of the &quot;for-each&quot; loop is that you just need to perform an operation on each element, and order is not important. For-each could process the elements in completely random order, and it would still be doing what it was designed for. If you need to process the elements in a particular way, I would suggest doing it manually."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1247061059,"post_id":1098117,"comment_id":912694,"body_markdown":"Java collections library. Not really anything to do with the language. Blame Josh Bloch.","body":"Java collections library. Not really anything to do with the language. Blame Josh Bloch."},{"owner":{"account_id":14881,"reputation":11621,"user_id":30945,"display_name":"Lee Kowalkowski"},"score":9,"creation_date":1300805777,"post_id":1098117,"comment_id":6098710,"body_markdown":"@muusbolla: But as a List is an _ordered_ collection, surely its order will be honoured, regardless?  Therefore for-each will not process the elements of a List in a random order.","body":"@muusbolla: But as a List is an <i>ordered</i> collection, surely its order will be honoured, regardless?  Therefore for-each will not process the elements of a List in a random order."},{"owner":{"account_id":177955,"reputation":4667,"user_id":409638,"accept_rate":78,"display_name":"robert"},"score":8,"creation_date":1407920285,"post_id":1098117,"comment_id":39397691,"body_markdown":"@muusbolla that is not true. Maybe in the case of `Set` derived collections. `foreach` guarantees iteration in the order of the iterator returned from the `iterator()` method of the collection. http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html","body":"@muusbolla that is not true. Maybe in the case of <code>Set</code> derived collections. <code>foreach</code> guarantees iteration in the order of the iterator returned from the <code>iterator()</code> method of the collection. <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":14062814,"reputation":1724,"user_id":10158398,"display_name":"Zhou Haibo"},"score":0,"creation_date":1616416187,"post_id":1098117,"comment_id":117986684,"body_markdown":"I want this build-in too, in Python we could write this `for row in rows[::-1]` to do reversing iteration. Why not in Java?","body":"I want this build-in too, in Python we could write this <code>for row in rows[::-1]</code> to do reversing iteration. Why not in Java?"}],"answers":[{"tags":[],"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1247061342,"creation_date":1247060261,"answer_id":1098129,"question_id":1098117,"body_markdown":"AFAIK there isn&#39;t a standard &quot;reverse_iterator&quot; sort of thing in the standard library that supports the for-each syntax which is already a syntactic sugar they brought late into the language. \r\n\r\nYou could do something like for(Item element: myList.clone().reverse()) and pay the associated price. \r\n\r\nThis also seems fairly consistent with the apparent phenomenon of not giving you convenient ways to do expensive operations - since a list, by definition, could have O(N) random access complexity (you could implement the interface with a single-link), reverse iteration could end up being O(N^2). Of course, if you have an ArrayList, you don&#39;t pay that price. ","title":"Can one do a for each loop in java in reverse order?","body":"<p>AFAIK there isn't a standard \"reverse_iterator\" sort of thing in the standard library that supports the for-each syntax which is already a syntactic sugar they brought late into the language. </p>\n\n<p>You could do something like for(Item element: myList.clone().reverse()) and pay the associated price. </p>\n\n<p>This also seems fairly consistent with the apparent phenomenon of not giving you convenient ways to do expensive operations - since a list, by definition, could have O(N) random access complexity (you could implement the interface with a single-link), reverse iteration could end up being O(N^2). Of course, if you have an ArrayList, you don't pay that price. </p>\n"},{"tags":[],"owner":{"account_id":21018,"reputation":73866,"user_id":50776,"accept_rate":84,"display_name":"casperOne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1247060277,"creation_date":1247060277,"answer_id":1098130,"question_id":1098117,"body_markdown":"Not without writing some custom code which will give you an enumerator which will reverse the elements for you.\r\n\r\nYou should be able to do it in Java by creating a custom implementation of Iterable which will return the elements in reverse order.\r\n\r\nThen, you would instantiate the wrapper (or call the method, what-have-you) which would return the Iterable implementation which reverses the element in the for each loop.","title":"Can one do a for each loop in java in reverse order?","body":"<p>Not without writing some custom code which will give you an enumerator which will reverse the elements for you.</p>\n\n<p>You should be able to do it in Java by creating a custom implementation of Iterable which will return the elements in reverse order.</p>\n\n<p>Then, you would instantiate the wrapper (or call the method, what-have-you) which would return the Iterable implementation which reverses the element in the for each loop.</p>\n"},{"tags":[],"owner":{"account_id":41034,"reputation":2889,"user_id":119179,"accept_rate":73,"display_name":"Allan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596632320,"creation_date":1247060318,"answer_id":1098133,"question_id":1098117,"body_markdown":"You can use the [Collections](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html) class to reverse the list then loop.","title":"Can one do a for each loop in java in reverse order?","body":"<p>You can use the <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html\" rel=\"nofollow noreferrer\">Collections</a> class to reverse the list then loop.</p>\n"},{"tags":[],"owner":{"account_id":1574,"reputation":22487,"user_id":2109,"accept_rate":100,"display_name":"Owen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1247060353,"creation_date":1247060353,"answer_id":1098135,"question_id":1098117,"body_markdown":"You&#39;d need to reverse your collection if you want to use the for each syntax out of the box and go in reverse order.","title":"Can one do a for each loop in java in reverse order?","body":"<p>You'd need to reverse your collection if you want to use the for each syntax out of the box and go in reverse order.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":102,"is_accepted":false,"score":101,"last_activity_date":1467187151,"creation_date":1247060366,"answer_id":1098137,"question_id":1098117,"body_markdown":"For a list, you could use the [Google Guava Library][1]:\r\n\r\n    for (String item : Lists.reverse(stringList))\r\n    {\r\n        // ...\r\n    }\r\n\r\nNote that [`Lists.reverse`][2] *doesn&#39;t* reverse the whole collection, or do anything like it - it just allows iteration and random access, in the reverse order. This is more efficient than reversing the collection first.\r\n\r\nTo reverse an arbitrary iterable, you&#39;d have to read it all and then &quot;replay&quot; it backwards.\r\n\r\n(If you&#39;re not already using it, I&#39;d *thoroughly* recommend you have a look at the [Guava][1]. It&#39;s great stuff.)\r\n\r\n\r\n  [1]: https://github.com/google/guava/\r\n  [2]: http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html#reverse(java.util.List)","title":"Can one do a for each loop in java in reverse order?","body":"<p>For a list, you could use the <a href=\"https://github.com/google/guava/\" rel=\"noreferrer\">Google Guava Library</a>:</p>\n\n<pre><code>for (String item : Lists.reverse(stringList))\n{\n    // ...\n}\n</code></pre>\n\n<p>Note that <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html#reverse(java.util.List)\" rel=\"noreferrer\"><code>Lists.reverse</code></a> <em>doesn't</em> reverse the whole collection, or do anything like it - it just allows iteration and random access, in the reverse order. This is more efficient than reversing the collection first.</p>\n\n<p>To reverse an arbitrary iterable, you'd have to read it all and then \"replay\" it backwards.</p>\n\n<p>(If you're not already using it, I'd <em>thoroughly</em> recommend you have a look at the <a href=\"https://github.com/google/guava/\" rel=\"noreferrer\">Guava</a>. It's great stuff.)</p>\n"},{"tags":[],"owner":{"account_id":876937,"reputation":9851,"user_id":99389,"display_name":"Nat"},"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1567103912,"creation_date":1247060491,"answer_id":1098153,"question_id":1098117,"body_markdown":"The Collections.reverse method actually returns a new list with the elements of the original list copied into it in reverse order, so this has O(n) performance with regards to the size of the original list.\r\n\r\nAs a more efficient solution, you could write a decorator that presents a reversed view of a List as an Iterable. The iterator returned by your decorator would use the ListIterator of the decorated list to walk over the elements in reverse order.\r\n\r\nFor example:\r\n\r\n    public class Reversed&lt;T&gt; implements Iterable&lt;T&gt; {\r\n        private final List&lt;T&gt; original;\r\n\r\n        public Reversed(List&lt;T&gt; original) {\r\n            this.original = original;\r\n        }\r\n\r\n        public Iterator&lt;T&gt; iterator() {\r\n            final ListIterator&lt;T&gt; i = original.listIterator(original.size());\r\n            \r\n            return new Iterator&lt;T&gt;() {\r\n                public boolean hasNext() { return i.hasPrevious(); }\r\n                public T next() { return i.previous(); }\r\n                public void remove() { i.remove(); }\r\n            };\r\n        }\r\n\r\n        public static &lt;T&gt; Reversed&lt;T&gt; reversed(List&lt;T&gt; original) {\r\n            return new Reversed&lt;T&gt;(original);\r\n        }\r\n    }\r\n\r\nAnd you would use it like:\r\n\r\n    import static Reversed.reversed;\r\n    \r\n    ...\r\n    \r\n    List&lt;String&gt; someStrings = getSomeStrings();\r\n    for (String s : reversed(someStrings)) {\r\n        doSomethingWith(s);\r\n    }\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>The Collections.reverse method actually returns a new list with the elements of the original list copied into it in reverse order, so this has O(n) performance with regards to the size of the original list.</p>\n\n<p>As a more efficient solution, you could write a decorator that presents a reversed view of a List as an Iterable. The iterator returned by your decorator would use the ListIterator of the decorated list to walk over the elements in reverse order.</p>\n\n<p>For example:</p>\n\n<pre><code>public class Reversed&lt;T&gt; implements Iterable&lt;T&gt; {\n    private final List&lt;T&gt; original;\n\n    public Reversed(List&lt;T&gt; original) {\n        this.original = original;\n    }\n\n    public Iterator&lt;T&gt; iterator() {\n        final ListIterator&lt;T&gt; i = original.listIterator(original.size());\n\n        return new Iterator&lt;T&gt;() {\n            public boolean hasNext() { return i.hasPrevious(); }\n            public T next() { return i.previous(); }\n            public void remove() { i.remove(); }\n        };\n    }\n\n    public static &lt;T&gt; Reversed&lt;T&gt; reversed(List&lt;T&gt; original) {\n        return new Reversed&lt;T&gt;(original);\n    }\n}\n</code></pre>\n\n<p>And you would use it like:</p>\n\n<pre><code>import static Reversed.reversed;\n\n...\n\nList&lt;String&gt; someStrings = getSomeStrings();\nfor (String s : reversed(someStrings)) {\n    doSomethingWith(s);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28780,"reputation":523,"user_id":77187,"accept_rate":40,"display_name":"Phillip Gibb"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1321894158,"creation_date":1247061047,"answer_id":1098204,"question_id":1098117,"body_markdown":"This will mess with the original list and also needs to be called outside of the loop.\r\nAlso you don&#39;t want to perform a reverse every time you loop - would that be true if one of the `Iterables.reverse ideas` was applied?\r\n\r\n    Collections.reverse(stringList);\r\n    \r\n    for(String string: stringList){\r\n    //...do something\r\n    }\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>This will mess with the original list and also needs to be called outside of the loop.\nAlso you don't want to perform a reverse every time you loop - would that be true if one of the <code>Iterables.reverse ideas</code> was applied?</p>\n\n<pre><code>Collections.reverse(stringList);\n\nfor(String string: stringList){\n//...do something\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":32212,"reputation":158,"user_id":89154,"display_name":"Krishna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1330606502,"creation_date":1295470679,"answer_id":4740681,"question_id":1098117,"body_markdown":"This may be an option. Hope there is a better way to start from last element than to while loop to the end.\r\n\r\n\tpublic static void main(String[] args) {\t\t\r\n\t\tList&lt;String&gt; a = new ArrayList&lt;String&gt;();\r\n\t\ta.add(&quot;1&quot;);a.add(&quot;2&quot;);a.add(&quot;3&quot;);a.add(&quot;4&quot;);a.add(&quot;5&quot;);\r\n\t\t\r\n\t\tListIterator&lt;String&gt; aIter=a.listIterator();\t\t\r\n\t\twhile(aIter.hasNext()) aIter.next();\r\n\t\t\r\n\t\tfor (;aIter.hasPrevious();)\r\n\t\t{\r\n\t\t\tString aVal = aIter.previous();\r\n\t\t\tSystem.out.println(aVal);\t\t\t\r\n\t\t}\r\n\t}\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>This may be an option. Hope there is a better way to start from last element than to while loop to the end.</p>\n\n<pre><code>public static void main(String[] args) {        \n    List&lt;String&gt; a = new ArrayList&lt;String&gt;();\n    a.add(\"1\");a.add(\"2\");a.add(\"3\");a.add(\"4\");a.add(\"5\");\n\n    ListIterator&lt;String&gt; aIter=a.listIterator();        \n    while(aIter.hasNext()) aIter.next();\n\n    for (;aIter.hasPrevious();)\n    {\n        String aVal = aIter.previous();\n        System.out.println(aVal);           \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":755146,"reputation":469,"user_id":763043,"display_name":"Gopi Reddy"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1305907313,"creation_date":1305907313,"answer_id":6074603,"question_id":1098117,"body_markdown":"The List (unlike the Set) is an ordered collection and iterating over it does preserve the order by contract. I would have expected a Stack to iterate in the reverse order but unfortunately it doesn&#39;t. So the simplest solution I can think of is this:\r\n\r\n\tfor (int i = stack.size() - 1; i &gt;= 0; i--) {\r\n\t\tSystem.out.println(stack.get(i));\r\n\t}\r\n\r\nI realize that this is not a &quot;for each&quot; loop solution. I&#39;d rather use the for loop than introducing a new library like the Google Collections.\r\n\r\nCollections.reverse() also does the job but it updates the list as opposed to returning a copy in reverse order.\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>The List (unlike the Set) is an ordered collection and iterating over it does preserve the order by contract. I would have expected a Stack to iterate in the reverse order but unfortunately it doesn't. So the simplest solution I can think of is this:</p>\n\n<pre><code>for (int i = stack.size() - 1; i &gt;= 0; i--) {\n    System.out.println(stack.get(i));\n}\n</code></pre>\n\n<p>I realize that this is not a \"for each\" loop solution. I'd rather use the for loop than introducing a new library like the Google Collections.</p>\n\n<p>Collections.reverse() also does the job but it updates the list as opposed to returning a copy in reverse order.</p>\n"},{"tags":[],"owner":{"account_id":1734438,"reputation":36245,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626418680,"creation_date":1453825284,"answer_id":35018637,"question_id":1098117,"body_markdown":"As of [the comment][1]: You should be able to use Apache Commons [`ReverseListIterator`][2]\r\n\r\n    Iterable&lt;String&gt; reverse \r\n        = new IteratorIterable(new ReverseListIterator(stringList));\r\n\r\n    for(String string: reverse ){\r\n        //...do something\r\n    }\r\n\r\nAs [@rogerdpack said][3], you need to wrap the `ReverseListIterator` as an `Iterable`.\r\n\r\nAs [recommended by Roland Nordborg-L&#248;vstad in the comments][4], you can simplify with Lambdas in current Java\r\n\r\n    Iterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment912727_1098137\r\n  [2]: https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/iterators/ReverseListIterator.html#ReverseListIterator(java.util.List)\r\n  [3]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment59368098_35018637\r\n  [4]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order/35018637?noredirect=1#comment120842077_35018637","title":"Can one do a for each loop in java in reverse order?","body":"<p>As of <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment912727_1098137\">the comment</a>: You should be able to use Apache Commons <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/iterators/ReverseListIterator.html#ReverseListIterator(java.util.List)\" rel=\"nofollow noreferrer\"><code>ReverseListIterator</code></a></p>\n<pre><code>Iterable&lt;String&gt; reverse \n    = new IteratorIterable(new ReverseListIterator(stringList));\n\nfor(String string: reverse ){\n    //...do something\n}\n</code></pre>\n<p>As <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment59368098_35018637\">@rogerdpack said</a>, you need to wrap the <code>ReverseListIterator</code> as an <code>Iterable</code>.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order/35018637?noredirect=1#comment120842077_35018637\">recommended by Roland Nordborg-Løvstad in the comments</a>, you can simplify with Lambdas in current Java</p>\n<pre><code>Iterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10288322,"reputation":11,"user_id":7590813,"display_name":"qiwen li"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489490134,"creation_date":1489490134,"answer_id":42784492,"question_id":1098117,"body_markdown":"All answers above only fulfill the requirement, either by wrapping another method or calling some foreign code outside;\r\n\r\nHere is the solution copied from the *Thinking in Java 4th edition*, chapter 11.13.1 *AdapterMethodIdiom*;\r\n\r\nHere is the code:\r\n\r\n  \r\n\r\n        \r\n    // The &quot;Adapter Method&quot; idiom allows you to use foreach\r\n    // with additional kinds of Iterables.\r\n    package holding;\r\n    import java.util.*;\r\n    \r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    class ReversibleArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n      public ReversibleArrayList(Collection&lt;T&gt; c) { super(c); }\r\n      public Iterable&lt;T&gt; reversed() {\r\n        return new Iterable&lt;T&gt;() {\r\n          public Iterator&lt;T&gt; iterator() {\r\n            return new Iterator&lt;T&gt;() {\r\n              int current = size() - 1; //why this.size() or super.size() wrong?\r\n              public boolean hasNext() { return current &gt; -1; }\r\n              public T next() { return get(current--); }\r\n              public void remove() { // Not implemented\r\n                throw new UnsupportedOperationException();\r\n              }\r\n            };\r\n          }\r\n        };\r\n      }\r\n    }\t\r\n    \r\n    public class AdapterMethodIdiom {\r\n      public static void main(String[] args) {\r\n        ReversibleArrayList&lt;String&gt; ral =\r\n          new ReversibleArrayList&lt;String&gt;(\r\n            Arrays.asList(&quot;To be or not to be&quot;.split(&quot; &quot;)));\r\n        // Grabs the ordinary iterator via iterator():\r\n        for(String s : ral)\r\n          System.out.print(s + &quot; &quot;);\r\n        System.out.println();\r\n        // Hand it the Iterable of your choice\r\n        for(String s : ral.reversed())\r\n          System.out.print(s + &quot; &quot;);\r\n      }\r\n    } /* Output:\r\n    To be or not to be\r\n    be to not or be To\r\n    *///:~\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>All answers above only fulfill the requirement, either by wrapping another method or calling some foreign code outside;</p>\n\n<p>Here is the solution copied from the <em>Thinking in Java 4th edition</em>, chapter 11.13.1 <em>AdapterMethodIdiom</em>;</p>\n\n<p>Here is the code:</p>\n\n<pre><code>// The \"Adapter Method\" idiom allows you to use foreach\n// with additional kinds of Iterables.\npackage holding;\nimport java.util.*;\n\n@SuppressWarnings(\"serial\")\nclass ReversibleArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\n  public ReversibleArrayList(Collection&lt;T&gt; c) { super(c); }\n  public Iterable&lt;T&gt; reversed() {\n    return new Iterable&lt;T&gt;() {\n      public Iterator&lt;T&gt; iterator() {\n        return new Iterator&lt;T&gt;() {\n          int current = size() - 1; //why this.size() or super.size() wrong?\n          public boolean hasNext() { return current &gt; -1; }\n          public T next() { return get(current--); }\n          public void remove() { // Not implemented\n            throw new UnsupportedOperationException();\n          }\n        };\n      }\n    };\n  }\n}   \n\npublic class AdapterMethodIdiom {\n  public static void main(String[] args) {\n    ReversibleArrayList&lt;String&gt; ral =\n      new ReversibleArrayList&lt;String&gt;(\n        Arrays.asList(\"To be or not to be\".split(\" \")));\n    // Grabs the ordinary iterator via iterator():\n    for(String s : ral)\n      System.out.print(s + \" \");\n    System.out.println();\n    // Hand it the Iterable of your choice\n    for(String s : ral.reversed())\n      System.out.print(s + \" \");\n  }\n} /* Output:\nTo be or not to be\nbe to not or be To\n*///:~\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2430820,"reputation":343,"user_id":2121765,"display_name":"ScottMichaud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535839695,"creation_date":1535839695,"answer_id":52132535,"question_id":1098117,"body_markdown":"Definitely a late answer to this question. One possibility is to use the ListIterator in a for loop. It&#39;s not as clean as colon-syntax, but it works.\r\n\r\n    List&lt;String&gt; exampleList = new ArrayList&lt;&gt;();\r\n    exampleList.add(&quot;One&quot;);\r\n    exampleList.add(&quot;Two&quot;);\r\n    exampleList.add(&quot;Three&quot;);\r\n    \r\n    //Forward iteration\r\n    for (String currentString : exampleList) {\r\n    \tSystem.out.println(currentString); \r\n    }\r\n    \r\n    //Reverse iteration\r\n    for (ListIterator&lt;String&gt; itr = exampleList.listIterator(exampleList.size()); itr.hasPrevious(); /*no-op*/ ) {\r\n      \tString currentString = itr.previous();\r\n    \tSystem.out.println(currentString); \r\n    }\r\n\r\nCredit for the ListIterator syntax goes to [&quot;Ways to iterate over a list in Java&quot;][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18410035/ways-to-iterate-over-a-list-in-java &quot;Ways to iterate over a list in Java&quot;","title":"Can one do a for each loop in java in reverse order?","body":"<p>Definitely a late answer to this question. One possibility is to use the ListIterator in a for loop. It's not as clean as colon-syntax, but it works.</p>\n\n<pre><code>List&lt;String&gt; exampleList = new ArrayList&lt;&gt;();\nexampleList.add(\"One\");\nexampleList.add(\"Two\");\nexampleList.add(\"Three\");\n\n//Forward iteration\nfor (String currentString : exampleList) {\n    System.out.println(currentString); \n}\n\n//Reverse iteration\nfor (ListIterator&lt;String&gt; itr = exampleList.listIterator(exampleList.size()); itr.hasPrevious(); /*no-op*/ ) {\n    String currentString = itr.previous();\n    System.out.println(currentString); \n}\n</code></pre>\n\n<p>Credit for the ListIterator syntax goes to <a href=\"https://stackoverflow.com/questions/18410035/ways-to-iterate-over-a-list-in-java\" title=\"Ways to iterate over a list in Java\">\"Ways to iterate over a list in Java\"</a></p>\n"},{"tags":[],"owner":{"account_id":4443197,"reputation":8014,"user_id":3617234,"accept_rate":89,"display_name":"EssaidiM"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568627328,"creation_date":1568627328,"answer_id":57954262,"question_id":1098117,"body_markdown":"A work Around : \r\n\r\n    Collections.reverse(stringList).forEach(str -&gt; ...);\r\n\r\nOr with [guava][1] : \r\n\r\n    Lists.reverse(stringList).forEach(str -&gt; ...);\r\n\r\n\r\n  [1]: https://github.com/google/guava/","title":"Can one do a for each loop in java in reverse order?","body":"<p>A work Around : </p>\n\n<pre><code>Collections.reverse(stringList).forEach(str -&gt; ...);\n</code></pre>\n\n<p>Or with <a href=\"https://github.com/google/guava/\" rel=\"nofollow noreferrer\">guava</a> : </p>\n\n<pre><code>Lists.reverse(stringList).forEach(str -&gt; ...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8238840,"reputation":637,"user_id":6197069,"display_name":"Hanamant Jadhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622298462,"creation_date":1622298462,"answer_id":67752501,"question_id":1098117,"body_markdown":"E.g.\r\n\r\n    Integer[][] a = {\r\n    \t\t\t\t{ 1, 2, 3 }, \r\n    \t\t\t\t{ 4, 5, 6 }, \r\n    \t\t\t\t{ 9, 8, 9 }, \r\n    \t\t\t\t};\r\n    \r\n    List&lt;List&lt;Integer&gt;&gt; arr = Arrays.stream(a)\r\n                    .map(Arrays::asList)\r\n                    .collect(Collectors.toList());\r\n\r\nReverse it now.\r\n\r\n    Collections.reverse(arr);\r\n\tSystem.out.println(&quot;Reverse Array&quot; + arr);\r\n\tfor (List&lt;Integer&gt; obj : arr) {\r\n\t\t// TODO\r\n\t}\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>E.g.</p>\n<pre><code>Integer[][] a = {\n                { 1, 2, 3 }, \n                { 4, 5, 6 }, \n                { 9, 8, 9 }, \n                };\n\nList&lt;List&lt;Integer&gt;&gt; arr = Arrays.stream(a)\n                .map(Arrays::asList)\n                .collect(Collectors.toList());\n</code></pre>\n<p>Reverse it now.</p>\n<pre><code>Collections.reverse(arr);\nSystem.out.println(&quot;Reverse Array&quot; + arr);\nfor (List&lt;Integer&gt; obj : arr) {\n    // TODO\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695230012,"creation_date":1689744279,"answer_id":76718202,"question_id":1098117,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method can be used to return a reversed view on the list, which can then be iterated over using an enhanced `for` statement:\r\n\r\n```lang-java\r\nfor (String string : stringList.reversed()) {\r\n    //...do something\r\n}\r\n```\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the list, which can then be iterated over using an enhanced <code>for</code> statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (String string : stringList.reversed()) {\n    //...do something\n}\n</code></pre>\n"}],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161294,"favorite_count":0,"down_vote_count":0,"up_vote_count":172,"accepted_answer_id":1098153,"answer_count":15,"score":172,"last_activity_date":1695230012,"creation_date":1247060047,"question_id":1098117,"body_markdown":"I need to run through a List in reverse order using Java. \r\n\r\nSo where this does it forwards:\r\n\r\n    for(String string: stringList){\r\n    //...do something\r\n    }\r\n\r\nIs there some way to iterate the stringList in reverse order using the *for each* syntax?\r\n\r\nFor clarity: I know how to iterate a list in reverse order but would like to know (for curiosity&#39;s sake ) how to do it in the *for each* style.","title":"Can one do a for each loop in java in reverse order?","body":"<p>I need to run through a List in reverse order using Java. </p>\n\n<p>So where this does it forwards:</p>\n\n<pre><code>for(String string: stringList){\n//...do something\n}\n</code></pre>\n\n<p>Is there some way to iterate the stringList in reverse order using the <em>for each</em> syntax?</p>\n\n<p>For clarity: I know how to iterate a list in reverse order but would like to know (for curiosity's sake ) how to do it in the <em>for each</em> style.</p>\n"},{"tags":["java","treeset","sortedset"],"comments":[{"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"score":0,"creation_date":1454296686,"post_id":35122490,"comment_id":57965596,"body_markdown":"Are you against placing the items from the set in another data structure? Additionally, are you required to have the items in the `SortedSet` in the specific order they&#39;re already in, or would you be okay with storing them in reverse order?","body":"Are you against placing the items from the set in another data structure? Additionally, are you required to have the items in the <code>SortedSet</code> in the specific order they&#39;re already in, or would you be okay with storing them in reverse order?"},{"owner":{"account_id":2415455,"reputation":187,"user_id":2109581,"accept_rate":0,"display_name":"user2109581"},"score":0,"creation_date":1454296909,"post_id":35122490,"comment_id":57965654,"body_markdown":"I just want to print the list. There is no requirement to SortedSet if there is a better way. It is ok if I can store items in reverse order.","body":"I just want to print the list. There is no requirement to SortedSet if there is a better way. It is ok if I can store items in reverse order."}],"answers":[{"tags":[],"owner":{"account_id":7230662,"reputation":8299,"user_id":5517633,"display_name":"Abdelhak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454297184,"creation_date":1454296800,"answer_id":35122546,"question_id":35122490,"body_markdown":"Try to use `NavigableSet`:\r\n      \r\n     public NavigableSet&lt;E&gt; descendingSet()\r\nLike this:\r\n       \r\n      SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\r\n      SortedSet&lt;Float&gt; treereverse = new TreeSet&lt;Float&gt;();\r\n      // creating reverse set\r\n      treereverse=(TreeSet)orderlist.descendingSet();\r\nFinally you have `treereverse` with the reverse order.","title":"How to reverse the order of SortedSet","body":"<p>Try to use <code>NavigableSet</code>:</p>\n\n<pre><code> public NavigableSet&lt;E&gt; descendingSet()\n</code></pre>\n\n<p>Like this:</p>\n\n<pre><code>  SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\n  SortedSet&lt;Float&gt; treereverse = new TreeSet&lt;Float&gt;();\n  // creating reverse set\n  treereverse=(TreeSet)orderlist.descendingSet();\n</code></pre>\n\n<p>Finally you have <code>treereverse</code> with the reverse order.</p>\n"},{"tags":[],"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1454297625,"creation_date":1454297149,"answer_id":35122576,"question_id":35122490,"body_markdown":"If you&#39;re willing to store the elements in the `SortedSet` in reverse order, the only change you need to make is to construct the `TreeSet` with [an appropriate constructor](https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator)) which takes a custom [`Comparator`](https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html):\r\n\r\n    Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\n    mylist.put(10.5, a);\r\n    mylist.put(12.3, b);\r\n    mylist.put(5.1, c);\r\n\r\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(Collections.reverseOrder());\r\n    orderList.addAll(mylist.keySet());\r\n\r\n    for (Float i : orderlist) {\r\n        System.out.println(i+&quot; &quot;+mylist.get(i));\r\n    }\r\n\r\nNote the neat method here is [`Collections.reverseOrder()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder()) which returns a `Comparator` which compares in the opposite of the natural ordering of elements.","title":"How to reverse the order of SortedSet","body":"<p>If you're willing to store the elements in the <code>SortedSet</code> in reverse order, the only change you need to make is to construct the <code>TreeSet</code> with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator)\" rel=\"noreferrer\">an appropriate constructor</a> which takes a custom <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html\" rel=\"noreferrer\"><code>Comparator</code></a>:</p>\n\n<pre><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(Collections.reverseOrder());\norderList.addAll(mylist.keySet());\n\nfor (Float i : orderlist) {\n    System.out.println(i+\" \"+mylist.get(i));\n}\n</code></pre>\n\n<p>Note the neat method here is <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder()\" rel=\"noreferrer\"><code>Collections.reverseOrder()</code></a> which returns a <code>Comparator</code> which compares in the opposite of the natural ordering of elements.</p>\n"},{"tags":[],"owner":{"account_id":7749818,"reputation":175,"user_id":5866097,"display_name":"Niks"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1454305975,"creation_date":1454305975,"answer_id":35123793,"question_id":35122490,"body_markdown":"You can also try this : \r\n\r\n\r\n        Map&lt;Float, String&gt; mylist = new HashMap&lt;Float, String&gt;();\r\n        mylist.put(10.5, a);\r\n        mylist.put(12.3, b);\r\n        mylist.put(5.1, c);\r\n\r\n        SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet()).descendingSet();\r\n\r\n        for (Float i : orderlist) {\r\n            System.out.println(i+&quot; &quot;+mylist.get(i));\r\n        }\r\n    ","title":"How to reverse the order of SortedSet","body":"<p>You can also try this : </p>\n\n<pre><code>    Map&lt;Float, String&gt; mylist = new HashMap&lt;Float, String&gt;();\n    mylist.put(10.5, a);\n    mylist.put(12.3, b);\n    mylist.put(5.1, c);\n\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet()).descendingSet();\n\n    for (Float i : orderlist) {\n        System.out.println(i+\" \"+mylist.get(i));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564965703,"creation_date":1564965703,"answer_id":57351123,"question_id":35122490,"body_markdown":"You can try this implementation ([source][1]):\r\n\r\n    public sealed class OrderedSet&lt;T&gt; : ICollection&lt;T&gt;\r\n    {\r\n    \tprivate readonly IDictionary&lt;T, LinkedListNode&lt;T&gt;&gt; _dictionary;\r\n    \tprivate readonly LinkedList&lt;T&gt; _linkedList;\r\n    \r\n    \tpublic OrderedSet()\r\n    \t\t: this(EqualityComparer&lt;T&gt;.Default)\r\n    \t{\r\n    \t}\r\n    \r\n    \tprivate OrderedSet(IEqualityComparer&lt;T&gt; comparer)\r\n    \t{\r\n    \t\t_dictionary = new Dictionary&lt;T, LinkedListNode&lt;T&gt;&gt;(comparer);\r\n    \t\t_linkedList = new LinkedList&lt;T&gt;();\r\n    \t}\r\n    \r\n    \tpublic int Count =&gt; _dictionary.Count;\r\n    \r\n    \tpublic bool IsReadOnly =&gt; _dictionary.IsReadOnly;\r\n    \r\n    \tvoid ICollection&lt;T&gt;.Add(T item)\r\n    \t{\r\n    \t\tAdd(item);\r\n    \t}\r\n    \r\n    \tpublic void Clear()\r\n    \t{\r\n    \t\t_linkedList.Clear();\r\n    \t\t_dictionary.Clear();\r\n    \t}\r\n    \r\n    \tpublic bool Remove(T item)\r\n    \t{\r\n    \t\tvar found = _dictionary.TryGetValue(item, out var node);\r\n    \t\tif (!found)\r\n    \t\t{\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t\t_dictionary.Remove(item);\r\n    \t\t_linkedList.Remove(node);\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tpublic IEnumerator&lt;T&gt; GetEnumerator()\r\n    \t{\r\n    \t\treturn _linkedList.GetEnumerator();\r\n    \t}\r\n    \r\n    \tIEnumerator IEnumerable.GetEnumerator()\r\n    \t{\r\n    \t\treturn GetEnumerator();\r\n    \t}\r\n    \r\n    \tpublic bool Contains(T item)\r\n    \t{\r\n    \t\treturn _dictionary.ContainsKey(item);\r\n    \t}\r\n    \r\n    \tpublic void CopyTo(T[] array, int arrayIndex)\r\n    \t{\r\n    \t\t_linkedList.CopyTo(array, arrayIndex);\r\n    \t}\r\n    \r\n    \tpublic void Add(T item)\r\n    \t{\r\n    \t\tif (_dictionary.ContainsKey(item))\r\n    \t\t{\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tvar node = _linkedList.AddLast(item);\r\n    \t\t_dictionary.Add(item, node);\r\n    \t}\r\n    \r\n    \tpublic void Reverse()\r\n    \t{\r\n    \t\tvar head = _linkedList.First;\r\n    \t\twhile (head.Next != null)\r\n    \t\t{\r\n    \t\t\tvar next = head.Next;\r\n    \t\t\t_linkedList.Remove(next);\r\n    \t\t\t_linkedList.AddFirst(next.Value);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nPlease note that this is an `OrderSet` which preserves the insertion order unlike [`SortedSet`][2] which keeps the set sorted according to some comparator (e.g. alphabetically).\r\n\r\nI added the `Reverse()` method from [here][3].\r\n\r\n  [1]: https://stackoverflow.com/a/17853085/3764804\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.sortedset-1?view=netframework-4.8\r\n  [3]: https://stackoverflow.com/a/25571033/3764804","title":"How to reverse the order of SortedSet","body":"<p>You can try this implementation (<a href=\"https://stackoverflow.com/a/17853085/3764804\">source</a>):</p>\n\n<pre><code>public sealed class OrderedSet&lt;T&gt; : ICollection&lt;T&gt;\n{\n    private readonly IDictionary&lt;T, LinkedListNode&lt;T&gt;&gt; _dictionary;\n    private readonly LinkedList&lt;T&gt; _linkedList;\n\n    public OrderedSet()\n        : this(EqualityComparer&lt;T&gt;.Default)\n    {\n    }\n\n    private OrderedSet(IEqualityComparer&lt;T&gt; comparer)\n    {\n        _dictionary = new Dictionary&lt;T, LinkedListNode&lt;T&gt;&gt;(comparer);\n        _linkedList = new LinkedList&lt;T&gt;();\n    }\n\n    public int Count =&gt; _dictionary.Count;\n\n    public bool IsReadOnly =&gt; _dictionary.IsReadOnly;\n\n    void ICollection&lt;T&gt;.Add(T item)\n    {\n        Add(item);\n    }\n\n    public void Clear()\n    {\n        _linkedList.Clear();\n        _dictionary.Clear();\n    }\n\n    public bool Remove(T item)\n    {\n        var found = _dictionary.TryGetValue(item, out var node);\n        if (!found)\n        {\n            return false;\n        }\n\n        _dictionary.Remove(item);\n        _linkedList.Remove(node);\n        return true;\n    }\n\n    public IEnumerator&lt;T&gt; GetEnumerator()\n    {\n        return _linkedList.GetEnumerator();\n    }\n\n    IEnumerator IEnumerable.GetEnumerator()\n    {\n        return GetEnumerator();\n    }\n\n    public bool Contains(T item)\n    {\n        return _dictionary.ContainsKey(item);\n    }\n\n    public void CopyTo(T[] array, int arrayIndex)\n    {\n        _linkedList.CopyTo(array, arrayIndex);\n    }\n\n    public void Add(T item)\n    {\n        if (_dictionary.ContainsKey(item))\n        {\n            return;\n        }\n\n        var node = _linkedList.AddLast(item);\n        _dictionary.Add(item, node);\n    }\n\n    public void Reverse()\n    {\n        var head = _linkedList.First;\n        while (head.Next != null)\n        {\n            var next = head.Next;\n            _linkedList.Remove(next);\n            _linkedList.AddFirst(next.Value);\n        }\n    }\n}\n</code></pre>\n\n<p>Please note that this is an <code>OrderSet</code> which preserves the insertion order unlike <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.sortedset-1?view=netframework-4.8\" rel=\"nofollow noreferrer\"><code>SortedSet</code></a> which keeps the set sorted according to some comparator (e.g. alphabetically).</p>\n\n<p>I added the <code>Reverse()</code> method from <a href=\"https://stackoverflow.com/a/25571033/3764804\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229935,"creation_date":1689745781,"answer_id":76718313,"question_id":35122490,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedSet.html#reversed()) method can be used to return a reversed view on the set, which can then be iterated over using an enhanced `for` statement:\r\n\r\n```lang-java\r\nfor (Float i : orderlist) {\r\n    System.out.println(i+&quot; &quot;+mylist.get(i));\r\n}\r\n```\r\n","title":"How to reverse the order of SortedSet","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the set, which can then be iterated over using an enhanced <code>for</code> statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Float i : orderlist) {\n    System.out.println(i+&quot; &quot;+mylist.get(i));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689746220,"creation_date":1689746220,"answer_id":76718346,"question_id":35122490,"body_markdown":"Rather than creating a `SortedSet` for just the keys and looking up the value for each key, you can use a `SortedMap` and iterate over the map&#39;s entries.  The map can be sorted in reversed order using the [`Comparator.reversed()`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#reversed()) comparator.\r\n\r\n```lang-java\r\nMap&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\nmylist.put(10.5, a);\r\nmylist.put(12.3, b);\r\nmylist.put(5.1, c);\r\n\r\nSortedMap&lt;Float, String&gt; orderlist = new TreeMap&lt;Float&gt;(Comparator.reversed());\r\norderlist.putAll(mylist);\r\n\r\nfor (Map.Entry&lt;Float, String&gt; e : orderlist.entrySet()) {\r\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\r\n}\r\n```\r\n\r\nIf you aren&#39;t using `mylist` as a `HashMap` separately from this iteration, the `SortedMap` can be used directly.\r\n\r\n```lang-java\r\nSortedMap&lt;Float, String&gt; mylist = new TreeMap&lt;&gt;(Comparator.reversed());\r\n\r\nmylist.put(10.5, a);\r\nmylist.put(12.3, b);\r\nmylist.put(5.1, c);\r\n\r\nfor (Map.Entry&lt;Float, String&gt; e : mylist.entrySet()) {\r\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\r\n}\r\n```","title":"How to reverse the order of SortedSet","body":"<p>Rather than creating a <code>SortedSet</code> for just the keys and looking up the value for each key, you can use a <code>SortedMap</code> and iterate over the map's entries.  The map can be sorted in reversed order using the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#reversed()\" rel=\"nofollow noreferrer\"><code>Comparator.reversed()</code></a> comparator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedMap&lt;Float, String&gt; orderlist = new TreeMap&lt;Float&gt;(Comparator.reversed());\norderlist.putAll(mylist);\n\nfor (Map.Entry&lt;Float, String&gt; e : orderlist.entrySet()) {\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\n}\n</code></pre>\n<p>If you aren't using <code>mylist</code> as a <code>HashMap</code> separately from this iteration, the <code>SortedMap</code> can be used directly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SortedMap&lt;Float, String&gt; mylist = new TreeMap&lt;&gt;(Comparator.reversed());\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nfor (Map.Entry&lt;Float, String&gt; e : mylist.entrySet()) {\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\n}\n</code></pre>\n"}],"owner":{"account_id":2415455,"reputation":187,"user_id":2109581,"accept_rate":0,"display_name":"user2109581"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10474,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":6,"score":10,"last_activity_date":1695229935,"creation_date":1454296344,"question_id":35122490,"body_markdown":"I want to print an ordered list in Map using the following:\r\n\r\n    Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\n    mylist.put(10.5, a);\r\n    mylist.put(12.3, b);\r\n    mylist.put(5.1, c);\r\n\r\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\r\n\r\n    for (Float i : orderlist) {\r\n\t    System.out.println(i+&quot; &quot;+mylist.get(i));\r\n\t}\r\n\r\nThe above code prints:\r\n\r\n    5.1 c\r\n    10.5 a\r\n    12.3 b    \r\n\r\nBut how do I the print the orderlist in reverse order like below:\r\n\r\n    12.3 b\r\n    10.5 a\r\n    5.1 c\r\n","title":"How to reverse the order of SortedSet","body":"<p>I want to print an ordered list in Map using the following:</p>\n\n<pre><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\n\nfor (Float i : orderlist) {\n    System.out.println(i+\" \"+mylist.get(i));\n}\n</code></pre>\n\n<p>The above code prints:</p>\n\n<pre><code>5.1 c\n10.5 a\n12.3 b    \n</code></pre>\n\n<p>But how do I the print the orderlist in reverse order like below:</p>\n\n<pre><code>12.3 b\n10.5 a\n5.1 c\n</code></pre>\n"},{"tags":["java","linkedhashmap"],"comments":[{"owner":{"account_id":426969,"reputation":61751,"user_id":808486,"accept_rate":100,"display_name":"Tudor"},"score":1,"creation_date":1331204794,"post_id":9616642,"comment_id":12202081,"body_markdown":"The last element in which order? Lexicographic?","body":"The last element in which order? Lexicographic?"},{"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"score":0,"creation_date":1331204835,"post_id":9616642,"comment_id":12202094,"body_markdown":"As you said, there is no ordering on sets (hence the name). How do you define *last* if you have no ordering? The one with the highest `hashCode()` value? Or, the one you put into the map? Or, the one which is in the *deepest* bin?","body":"As you said, there is no ordering on sets (hence the name). How do you define <i>last</i> if you have no ordering? The one with the highest <code>hashCode()</code> value? Or, the one you put into the map? Or, the one which is in the <i>deepest</i> bin?"},{"owner":{"account_id":1001687,"reputation":12271,"user_id":1016403,"accept_rate":56,"display_name":"user1016403"},"score":0,"creation_date":1331204920,"post_id":9616642,"comment_id":12202118,"body_markdown":"Hi rlegendi, Thanks for your reply. i need the one which is in the deepest bin.","body":"Hi rlegendi, Thanks for your reply. i need the one which is in the deepest bin."},{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1331204985,"post_id":9616642,"comment_id":12202139,"body_markdown":"@rlegendi: Although sets don&#39;t *generally* support ordering, several *implementations* do. `LinkedHashMap` maintains insertion order, so I&#39;d *expect* its key and value sets to do likewise.","body":"@rlegendi: Although sets don&#39;t <i>generally</i> support ordering, several <i>implementations</i> do. <code>LinkedHashMap</code> maintains insertion order, so I&#39;d <i>expect</i> its key and value sets to do likewise."},{"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"score":0,"creation_date":1331205923,"post_id":9616642,"comment_id":12202412,"body_markdown":"@JonSkeet Oh, true, sry, I forgot we are speaking of a `LinkedHashMap`. Surely, `SortedSet` implementations support ordering, but I saw not that was used. The ordering of a `LinkedHashMap` might also trick you if an existing element is put into it again (it will be not re-inserted).","body":"@JonSkeet Oh, true, sry, I forgot we are speaking of a <code>LinkedHashMap</code>. Surely, <code>SortedSet</code> implementations support ordering, but I saw not that was used. The ordering of a <code>LinkedHashMap</code> might also trick you if an existing element is put into it again (it will be not re-inserted)."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449645714,"post_id":9616642,"comment_id":56092599,"body_markdown":"see also http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry","body":"see also <a href=\"http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry\" title=\"java linkedhashmap get first or last entry\">stackoverflow.com/questions/1936462/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1460029623,"creation_date":1331205338,"answer_id":9616782,"question_id":9616642,"body_markdown":"`keySet()` being executed on `LinkedHashMap` returns `LinkedHashSet` that is indeed `Set` but &quot;remembers&quot; the order of elements. \r\n\r\nYou can get the last element as following: \r\n\r\n    Map&lt;TheType&gt; map = .....\r\n    .................\r\n    TheType theLastKey = new ArrayList&lt;&gt;(map.keySet()).get(map.size() - 1)\r\n\r\n","title":"Getting last key from a LinkedHashMap","body":"<p><code>keySet()</code> being executed on <code>LinkedHashMap</code> returns <code>LinkedHashSet</code> that is indeed <code>Set</code> but \"remembers\" the order of elements. </p>\n\n<p>You can get the last element as following: </p>\n\n<pre><code>Map&lt;TheType&gt; map = .....\n.................\nTheType theLastKey = new ArrayList&lt;&gt;(map.keySet()).get(map.size() - 1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3532342,"reputation":359,"user_id":2951479,"display_name":"DiTap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1402588674,"creation_date":1402586323,"answer_id":24188059,"question_id":9616642,"body_markdown":"Answer from a different post helped me with this answer. Pls refer\r\nhttps://stackoverflow.com/questions/3973512/java-hashmap-how-to-get-the-first-keys-value for the original post.\r\n\r\n    Object myKey = myHashMap.keySet().toArray()[0];\r\n\r\nwhere i have replaced the 0\r\n\r\n    toArray()[0]  - (where 0 represents the first item in the keyset)\r\nwith the size of the keyset\r\n\r\n    toArray()[(keyset().size)-1] \r\n\r\nNote : Without the -1 at the end, you would get a ArrayIndexOutOfBoundsException.\r\n","title":"Getting last key from a LinkedHashMap","body":"<p>Answer from a different post helped me with this answer. Pls refer\n<a href=\"https://stackoverflow.com/questions/3973512/java-hashmap-how-to-get-the-first-keys-value\">Java HashMap: How to get a key and value by index?</a> for the original post.</p>\n\n<pre><code>Object myKey = myHashMap.keySet().toArray()[0];\n</code></pre>\n\n<p>where i have replaced the 0</p>\n\n<pre><code>toArray()[0]  - (where 0 represents the first item in the keyset)\n</code></pre>\n\n<p>with the size of the keyset</p>\n\n<pre><code>toArray()[(keyset().size)-1] \n</code></pre>\n\n<p>Note : Without the -1 at the end, you would get a ArrayIndexOutOfBoundsException.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695229893,"creation_date":1691818910,"answer_id":76887909,"question_id":9616642,"body_markdown":"The last entry of a `LinkedHashMap` can be easily accessed using the [`lastEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()) method which was added in Java 21.  The last key can be retrieved from this `Entry`.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\r\n\r\nEntry&lt;String,String&gt; lastValue = map.lastEntry();\r\nString lastKey = lastEntry.getKey();\r\n```\r\n","title":"Getting last key from a LinkedHashMap","body":"<p>The last entry of a <code>LinkedHashMap</code> can be easily accessed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()\" rel=\"nofollow noreferrer\"><code>lastEntry()</code></a> method which was added in Java 21.  The last key can be retrieved from this <code>Entry</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\n\nEntry&lt;String,String&gt; lastValue = map.lastEntry();\nString lastKey = lastEntry.getKey();\n</code></pre>\n"}],"owner":{"account_id":1001687,"reputation":12271,"user_id":1016403,"accept_rate":56,"display_name":"user1016403"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9976,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9616782,"answer_count":3,"score":2,"last_activity_date":1695229893,"creation_date":1331204642,"question_id":9616642,"body_markdown":"I have `LinkedHashMap` returning from DB. From this map I need to get the last key. If I get all keys using `keySet` method it returns `Set` of keys but `Set` does not guarantee the order. I need to take exactly last key from the `LinkedHashMap` returned from DB. How can I do that ?\r\n\r\nBelow is the code how I get data from database.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\r\n```\r\n\r\nFrom this map I need to take last key.","title":"Getting last key from a LinkedHashMap","body":"<p>I have <code>LinkedHashMap</code> returning from DB. From this map I need to get the last key. If I get all keys using <code>keySet</code> method it returns <code>Set</code> of keys but <code>Set</code> does not guarantee the order. I need to take exactly last key from the <code>LinkedHashMap</code> returned from DB. How can I do that ?</p>\n<p>Below is the code how I get data from database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\n</code></pre>\n<p>From this map I need to take last key.</p>\n"},{"tags":["java","collections","linkedhashmap"],"comments":[{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":0,"creation_date":1544467102,"post_id":7679819,"comment_id":94277791,"body_markdown":"From the docs: &quot;Note that insertion order is not affected if a key is re-inserted into the map. (A key k is reinserted into a map m if m.put(k, v) is invoked when m.containsKey(k) would return true immediately prior to the invocation.)&quot;","body":"From the docs: &quot;Note that insertion order is not affected if a key is re-inserted into the map. (A key k is reinserted into a map m if m.put(k, v) is invoked when m.containsKey(k) would return true immediately prior to the invocation.)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1317932130,"creation_date":1317931643,"answer_id":7679873,"question_id":7679819,"body_markdown":"It&#39;s a `Map`, it doesn&#39;t have indexes.  It has buckets.  The way it works is when you do a \r\n\r\n`put(key, val)`\r\n\r\nIt hashes the key to find out which bucket to put the val in.\r\n\r\nThe `LinkedHashMap` maintains a doubly linked list so it can record the order in which entries are inserted (or accessed, depending on how you instantiate the map).  There is no method on the API on the Map to insert a key,val pair at a certain index of the linked list, because that is not the purpose it serves.","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>It's a <code>Map</code>, it doesn't have indexes.  It has buckets.  The way it works is when you do a </p>\n\n<p><code>put(key, val)</code></p>\n\n<p>It hashes the key to find out which bucket to put the val in.</p>\n\n<p>The <code>LinkedHashMap</code> maintains a doubly linked list so it can record the order in which entries are inserted (or accessed, depending on how you instantiate the map).  There is no method on the API on the Map to insert a key,val pair at a certain index of the linked list, because that is not the purpose it serves.</p>\n"},{"tags":[],"owner":{"account_id":940849,"reputation":9220,"user_id":968951,"display_name":"Tobias"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1477143432,"creation_date":1317931692,"answer_id":7679884,"question_id":7679819,"body_markdown":"You can not change the order. It is `insert-order` (by default) or `access-order` with this constructor:\r\n\r\n&gt; `public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)`\r\n&gt; \r\n&gt; * Constructs an empty LinkedHashMap instance with the specified initial capacity, load factor and ordering mode.\r\n&gt; \r\n&gt; * Parameters:\r\n&gt;         initialCapacity - the initial capacity\r\n&gt;         loadFactor - the load factor\r\n&gt;         accessOrder - the ordering mode - true for access-order, false for insertion-order\r\n&gt; \r\n&gt; * Throws:\r\n&gt;         IllegalArgumentException - if the initial capacity is negative or the load factor is nonpositive\r\n\r\nSee: [`LinkedHashMap`](http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29)","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>You can not change the order. It is <code>insert-order</code> (by default) or <code>access-order</code> with this constructor:</p>\n\n<blockquote>\n  <p><code>public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</code></p>\n  \n  <ul>\n  <li><p>Constructs an empty LinkedHashMap instance with the specified initial capacity, load factor and ordering mode.</p></li>\n  <li><p>Parameters:\n      initialCapacity - the initial capacity\n      loadFactor - the load factor\n      accessOrder - the ordering mode - true for access-order, false for insertion-order</p></li>\n  <li><p>Throws:\n      IllegalArgumentException - if the initial capacity is negative or the load factor is nonpositive</p></li>\n  </ul>\n</blockquote>\n\n<p>See: <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29\" rel=\"noreferrer\"><code>LinkedHashMap</code></a></p>\n"},{"tags":[],"owner":{"account_id":1706910,"reputation":463,"user_id":1565796,"accept_rate":62,"display_name":"rock_walker"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1351602009,"creation_date":1351602009,"answer_id":13139544,"question_id":7679819,"body_markdown":"Just divide you `LinkedHashMap` on 2 arrays. Make first array with size `index - 1` and put at the end new `Entry`. Then fill first array with entries from the second one","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>Just divide you <code>LinkedHashMap</code> on 2 arrays. Make first array with size <code>index - 1</code> and put at the end new <code>Entry</code>. Then fill first array with entries from the second one</p>\n"},{"tags":[],"owner":{"account_id":513732,"reputation":657,"user_id":1118562,"display_name":"tamalet"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1389640316,"creation_date":1389387460,"answer_id":21054277,"question_id":7679819,"body_markdown":"    public static &lt;K, V&gt; void add(LinkedHashMap&lt;K, V&gt; map, int index, K key, V value) {\r\n      assert (map != null);\r\n      assert !map.containsKey(key);\r\n      assert (index &gt;= 0) &amp;&amp; (index &lt; map.size());\r\n\r\n      int i = 0;\r\n      List&lt;Entry&lt;K, V&gt;&gt; rest = new ArrayList&lt;Entry&lt;K, V&gt;&gt;();\r\n      for (Entry&lt;K, V&gt; entry : map.entrySet()) {\r\n        if (i++ &gt;= index) {\r\n          rest.add(entry);\r\n        }\r\n      }\r\n      map.put(key, value);\r\n      for (int j = 0; j &lt; rest.size(); j++) {\r\n        Entry&lt;K, V&gt; entry = rest.get(j);\r\n        map.remove(entry.getKey());\r\n        map.put(entry.getKey(), entry.getValue());\r\n      }\r\n    }\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<pre><code>public static &lt;K, V&gt; void add(LinkedHashMap&lt;K, V&gt; map, int index, K key, V value) {\n  assert (map != null);\n  assert !map.containsKey(key);\n  assert (index &gt;= 0) &amp;&amp; (index &lt; map.size());\n\n  int i = 0;\n  List&lt;Entry&lt;K, V&gt;&gt; rest = new ArrayList&lt;Entry&lt;K, V&gt;&gt;();\n  for (Entry&lt;K, V&gt; entry : map.entrySet()) {\n    if (i++ &gt;= index) {\n      rest.add(entry);\n    }\n  }\n  map.put(key, value);\n  for (int j = 0; j &lt; rest.size(); j++) {\n    Entry&lt;K, V&gt; entry = rest.get(j);\n    map.remove(entry.getKey());\n    map.put(entry.getKey(), entry.getValue());\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4232920,"reputation":1116,"user_id":3464870,"accept_rate":100,"display_name":"gyurix"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1629354921,"creation_date":1417360938,"answer_id":27214791,"question_id":7679819,"body_markdown":"You could do this element adding to 1. or last place:\r\n\r\n\r\n**Adding to last place ►** You just need to remove the previous entry from the map like this:\r\n\r\n    map.remove(key);\r\n    map.put(key,value);\r\n\r\n**Adding to first place ►** It&#39;s a bit more complicated, you need to clone the map, clear it, put the 1. value to it, and put the new map to it, like this:\r\n\r\nI&#39;m using maps with String keys and Group (my custom class) values:\r\n\r\n    LinkedHashMap&lt;String, Group&gt; newMap=(LinkedHashMap&lt;String, Group&gt;) map.clone();\r\n    map.clear();\r\n    map.put(key, value);\r\n    map.putAll(newMap);\r\n\r\nAs you see, with these methods you can add unlimited amount of things to the begin and to the end of the map.","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>You could do this element adding to 1. or last place:</p>\n<p><strong>Adding to last place ►</strong> You just need to remove the previous entry from the map like this:</p>\n<pre><code>map.remove(key);\nmap.put(key,value);\n</code></pre>\n<p><strong>Adding to first place ►</strong> It's a bit more complicated, you need to clone the map, clear it, put the 1. value to it, and put the new map to it, like this:</p>\n<p>I'm using maps with String keys and Group (my custom class) values:</p>\n<pre><code>LinkedHashMap&lt;String, Group&gt; newMap=(LinkedHashMap&lt;String, Group&gt;) map.clone();\nmap.clear();\nmap.put(key, value);\nmap.putAll(newMap);\n</code></pre>\n<p>As you see, with these methods you can add unlimited amount of things to the begin and to the end of the map.</p>\n"},{"tags":[],"owner":{"account_id":2612960,"reputation":13092,"user_id":2378217,"accept_rate":43,"display_name":"Manish Kumar Sharma"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1497184626,"creation_date":1497184626,"answer_id":44483952,"question_id":7679819,"body_markdown":"Apache Commons solution : `ListOrderedMap`\r\n-----------------------\r\n\r\nSince the JDK&#39;s `LinkedHashMap` ensures only insertion order retrieval, in case you we want to insert at an index, we can use alternatively Apache Commons&#39; `ListOrderedMap`. It does it as it sounds - by having a list to maintain the order of insertion with the corresponding index and a normal map to insert as we generally do. Here is what the [docs][1] say:\r\n\r\n&gt;     public class ListOrderedMap&lt;K,V&gt;\r\n&gt;     extends AbstractMapDecorator&lt;K,V&gt;\r\n&gt;     implements OrderedMap&lt;K,V&gt;, Serializable\r\n&gt; \r\n&gt; Decorates a `Map` to ensure that the order of addition is retained\r\n&gt; using a List to maintain order.\r\n&gt; \r\n&gt; The order will be used via the iterators and `toArray` methods on the\r\n&gt; views. The order is also returned by the `MapIterator`. The\r\n&gt; `orderedMapIterator()` method accesses an iterator that can iterate\r\n&gt; both forwards and backwards through the map. In addition,\r\n&gt; non-interface methods are provided to access the map by index.\r\n&gt; \r\n&gt; If an object is added to the Map for a second time, it will remain in\r\n&gt; the original position in the iteration.\r\n&gt; \r\n&gt; Note that `ListOrderedMap` is not synchronized and is not thread-safe.\r\n&gt; If you wish to use this map from multiple threads concurrently, you\r\n&gt; must use appropriate synchronization. The simplest approach is to wrap\r\n&gt; this map using `Collections.synchronizedMap(Map)`. This class may\r\n&gt; throw exceptions when accessed by concurrent threads without\r\n&gt; synchronization.\r\n&gt; \r\n&gt; Note that `ListOrderedMap` doesn&#39;t work with `IdentityHashMap`,\r\n&gt; `CaseInsensitiveMap`, or similar maps that violate the general\r\n&gt; contract of `Map`. The `ListOrderedMap` (or, more precisely, the\r\n&gt; underlying `List`) is relying on `equals()`. This is fine, as long as\r\n&gt; the decorated `Map` is also based on `equals()`, and `hashCode()`,\r\n&gt; which `IdentityHashMap`, and `CaseInsensitiveMap` don&#39;t: The former\r\n&gt; uses `==`, and the latter uses `equals()` on a lower-cased key.\r\n\r\nHere is its implementation for adding to a position:\r\n\r\n            /**\r\n    428     * Puts a key-value mapping into the map at the specified index.\r\n    429     * &lt;p&gt;\r\n    430     * If the map already contains the key, then the original mapping\r\n    431     * is removed and the new mapping added at the specified index.\r\n    432     * The remove may change the effect of the index. The index is\r\n    433     * always calculated relative to the original state of the map.\r\n    434     * &lt;p&gt;\r\n    435     * Thus the steps are: (1) remove the existing key-value mapping,\r\n    436     * then (2) insert the new key-value mapping at the position it\r\n    437     * would have been inserted had the remove not occurred.\r\n    438     *\r\n    439     * @param index  the index at which the mapping should be inserted\r\n    440     * @param key  the key\r\n    441     * @param value  the value\r\n    442     * @return the value previously mapped to the key\r\n    443     * @throws IndexOutOfBoundsException if the index is out of range [0, size]\r\n    444     * @since 3.2\r\n    445     */\r\n    446    public V put(int index, final K key, final V value) {\r\n    447        if (index &lt; 0 || index &gt; insertOrder.size()) {\r\n    448            throw new IndexOutOfBoundsException(&quot;Index: &quot; + index + &quot;, Size: &quot; + insertOrder.size());\r\n    449        }\r\n    450\r\n    451        final Map&lt;K, V&gt; m = decorated();\r\n    452        if (m.containsKey(key)) {\r\n    453            final V result = m.remove(key);\r\n    454            final int pos = insertOrder.indexOf(key);\r\n    455            insertOrder.remove(pos);\r\n    456            if (pos &lt; index) {\r\n    457                index--;\r\n    458            }\r\n    459            insertOrder.add(index, key);\r\n    460            m.put(key, value);\r\n    461            return result;\r\n    462        }\r\n    463        insertOrder.add(index, key);\r\n    464        m.put(key, value);\r\n    465        return null;\r\n    466    }\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/ListOrderedMap.html#put(int,%20K,%20V)","title":"How to add element at specific index/position in LinkedHashMap?","body":"<h2>Apache Commons solution : <code>ListOrderedMap</code></h2>\n\n<p>Since the JDK's <code>LinkedHashMap</code> ensures only insertion order retrieval, in case you we want to insert at an index, we can use alternatively Apache Commons' <code>ListOrderedMap</code>. It does it as it sounds - by having a list to maintain the order of insertion with the corresponding index and a normal map to insert as we generally do. Here is what the <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/ListOrderedMap.html#put(int,%20K,%20V)\" rel=\"noreferrer\">docs</a> say:</p>\n\n<blockquote>\n<pre><code>public class ListOrderedMap&lt;K,V&gt;\nextends AbstractMapDecorator&lt;K,V&gt;\nimplements OrderedMap&lt;K,V&gt;, Serializable\n</code></pre>\n  \n  <p>Decorates a <code>Map</code> to ensure that the order of addition is retained\n  using a List to maintain order.</p>\n  \n  <p>The order will be used via the iterators and <code>toArray</code> methods on the\n  views. The order is also returned by the <code>MapIterator</code>. The\n  <code>orderedMapIterator()</code> method accesses an iterator that can iterate\n  both forwards and backwards through the map. In addition,\n  non-interface methods are provided to access the map by index.</p>\n  \n  <p>If an object is added to the Map for a second time, it will remain in\n  the original position in the iteration.</p>\n  \n  <p>Note that <code>ListOrderedMap</code> is not synchronized and is not thread-safe.\n  If you wish to use this map from multiple threads concurrently, you\n  must use appropriate synchronization. The simplest approach is to wrap\n  this map using <code>Collections.synchronizedMap(Map)</code>. This class may\n  throw exceptions when accessed by concurrent threads without\n  synchronization.</p>\n  \n  <p>Note that <code>ListOrderedMap</code> doesn't work with <code>IdentityHashMap</code>,\n  <code>CaseInsensitiveMap</code>, or similar maps that violate the general\n  contract of <code>Map</code>. The <code>ListOrderedMap</code> (or, more precisely, the\n  underlying <code>List</code>) is relying on <code>equals()</code>. This is fine, as long as\n  the decorated <code>Map</code> is also based on <code>equals()</code>, and <code>hashCode()</code>,\n  which <code>IdentityHashMap</code>, and <code>CaseInsensitiveMap</code> don't: The former\n  uses <code>==</code>, and the latter uses <code>equals()</code> on a lower-cased key.</p>\n</blockquote>\n\n<p>Here is its implementation for adding to a position:</p>\n\n<pre><code>        /**\n428     * Puts a key-value mapping into the map at the specified index.\n429     * &lt;p&gt;\n430     * If the map already contains the key, then the original mapping\n431     * is removed and the new mapping added at the specified index.\n432     * The remove may change the effect of the index. The index is\n433     * always calculated relative to the original state of the map.\n434     * &lt;p&gt;\n435     * Thus the steps are: (1) remove the existing key-value mapping,\n436     * then (2) insert the new key-value mapping at the position it\n437     * would have been inserted had the remove not occurred.\n438     *\n439     * @param index  the index at which the mapping should be inserted\n440     * @param key  the key\n441     * @param value  the value\n442     * @return the value previously mapped to the key\n443     * @throws IndexOutOfBoundsException if the index is out of range [0, size]\n444     * @since 3.2\n445     */\n446    public V put(int index, final K key, final V value) {\n447        if (index &lt; 0 || index &gt; insertOrder.size()) {\n448            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + insertOrder.size());\n449        }\n450\n451        final Map&lt;K, V&gt; m = decorated();\n452        if (m.containsKey(key)) {\n453            final V result = m.remove(key);\n454            final int pos = insertOrder.indexOf(key);\n455            insertOrder.remove(pos);\n456            if (pos &lt; index) {\n457                index--;\n458            }\n459            insertOrder.add(index, key);\n460            m.put(key, value);\n461            return result;\n462        }\n463        insertOrder.add(index, key);\n464        m.put(key, value);\n465        return null;\n466    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10753682,"reputation":13,"user_id":7912222,"display_name":"Nauman Aejaz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525208768,"creation_date":1525208768,"answer_id":50123835,"question_id":7679819,"body_markdown":"    ...\r\n\r\n    LinkedHashMap&lt;String, StringExtension&gt; map = new LinkedHashMap&lt;&gt;();\r\n\r\n    map.put(&quot;4&quot;, new StringExtension(&quot;4&quot;, &quot;a&quot;));\r\n    map.put(&quot;1&quot;, new StringExtension(&quot;1&quot;, &quot;b&quot;));\r\n    map.put(&quot;3&quot;, new StringExtension(&quot;3&quot;, &quot;c&quot;));\r\n    map.put(&quot;2&quot;, new StringExtension(&quot;2&quot;, &quot;d&quot;));\r\n    \r\n    for (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\r\n        Log.e(&quot;Test&quot;, &quot;&quot; + entry.getKey() + &quot; - &quot;+ entry.getValue().value);\r\n    }\r\n    \r\n    \r\n    Collection&lt;StringExtension&gt; temp = new ArrayList&lt;&gt;(map.values());\r\n    StringExtension value = map.remove(&quot;3&quot;);\r\n    map.clear();\r\n    map.put(value.key, value);\r\n    \r\n    for (StringExtension val : temp) {\r\n        map.put(val.key, val);\r\n    }\r\n    \r\n    Log.e(&quot;Test&quot;, &quot;---&quot;);\r\n    \r\n    for (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\r\n        Log.e(&quot;Test&quot;, &quot;&quot; + entry.getKey() + &quot; - &quot;+ entry.getValue().value);\r\n    }\r\n    \r\n    ...\r\n\r\n    private class StringExtension\r\n    {\r\n        String key;\r\n        String value;\r\n    \r\n        public StringExtension(String key, String value) {\r\n            this.key = key;\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<pre><code>...\n\nLinkedHashMap&lt;String, StringExtension&gt; map = new LinkedHashMap&lt;&gt;();\n\nmap.put(\"4\", new StringExtension(\"4\", \"a\"));\nmap.put(\"1\", new StringExtension(\"1\", \"b\"));\nmap.put(\"3\", new StringExtension(\"3\", \"c\"));\nmap.put(\"2\", new StringExtension(\"2\", \"d\"));\n\nfor (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\n    Log.e(\"Test\", \"\" + entry.getKey() + \" - \"+ entry.getValue().value);\n}\n\n\nCollection&lt;StringExtension&gt; temp = new ArrayList&lt;&gt;(map.values());\nStringExtension value = map.remove(\"3\");\nmap.clear();\nmap.put(value.key, value);\n\nfor (StringExtension val : temp) {\n    map.put(val.key, val);\n}\n\nLog.e(\"Test\", \"---\");\n\nfor (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\n    Log.e(\"Test\", \"\" + entry.getKey() + \" - \"+ entry.getValue().value);\n}\n\n...\n\nprivate class StringExtension\n{\n    String key;\n    String value;\n\n    public StringExtension(String key, String value) {\n        this.key = key;\n        this.value = value;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5984797,"reputation":14686,"user_id":5730321,"accept_rate":69,"display_name":"Leo DroidCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605987349,"creation_date":1605987349,"answer_id":64947263,"question_id":7679819,"body_markdown":"As suggested in other answers, it is certainly not recommended as by inserting a value you will go against the system.\r\n\r\n**Why?**  \r\nBecause LinkedHashMap is backed by a HashMap and a LinkedList.  \r\nThe last is used in order to preserve insertion order.  \r\nObviously, LinkedList is pretty good in insertion to the head and to the tale (doubly-linked). \r\nIt provides O(1) time complexity for this operation.   \r\nHowever, it is very slow in insertion to a certain position as in order to find this position you got to iterate all over the list, which in the worst case will take O(n) what is quite expensive especially for large datasets.\r\n\r\n\r\nI personally do not recommend it as it is quite inefficient, \r\nbut if you understand the cons and it is what you want,  \r\nyou may use this extension function in order to **insert a key-pair onto a certain position**.\r\n\r\n    fun &lt;K, V&gt; LinkedHashMap&lt;K, V&gt;.insertAtIndex(key: K, value: V, index: Int) {\r\n        if (index &lt; 0) {\r\n            throw IllegalArgumentException(&quot;Cannot insert into negative index&quot;)\r\n        }\r\n        if (index &gt; size) {\r\n            put(key, value)\r\n            return\r\n        }\r\n        val holderMap = LinkedHashMap&lt;K, V&gt;(size + 1)\r\n        entries.forEachIndexed { i, entry-&gt;\r\n            if (i == index) {\r\n                holderMap.put(key, value)\r\n            }\r\n            holderMap.put(entry.key, entry.value)\r\n        }\r\n        clear()\r\n        putAll(holderMap)\r\n    }\r\n\r\nIt will take O(n) time and  O(n) space.\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>As suggested in other answers, it is certainly not recommended as by inserting a value you will go against the system.</p>\n<p><strong>Why?</strong><br />\nBecause LinkedHashMap is backed by a HashMap and a LinkedList.<br />\nThe last is used in order to preserve insertion order.<br />\nObviously, LinkedList is pretty good in insertion to the head and to the tale (doubly-linked).\nIt provides O(1) time complexity for this operation.<br />\nHowever, it is very slow in insertion to a certain position as in order to find this position you got to iterate all over the list, which in the worst case will take O(n) what is quite expensive especially for large datasets.</p>\n<p>I personally do not recommend it as it is quite inefficient,\nbut if you understand the cons and it is what you want,<br />\nyou may use this extension function in order to <strong>insert a key-pair onto a certain position</strong>.</p>\n<pre><code>fun &lt;K, V&gt; LinkedHashMap&lt;K, V&gt;.insertAtIndex(key: K, value: V, index: Int) {\n    if (index &lt; 0) {\n        throw IllegalArgumentException(&quot;Cannot insert into negative index&quot;)\n    }\n    if (index &gt; size) {\n        put(key, value)\n        return\n    }\n    val holderMap = LinkedHashMap&lt;K, V&gt;(size + 1)\n    entries.forEachIndexed { i, entry-&gt;\n        if (i == index) {\n            holderMap.put(key, value)\n        }\n        holderMap.put(entry.key, entry.value)\n    }\n    clear()\n    putAll(holderMap)\n}\n</code></pre>\n<p>It will take O(n) time and  O(n) space.</p>\n"},{"tags":[],"owner":{"account_id":9878926,"reputation":119,"user_id":7315640,"display_name":"Moz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616769588,"creation_date":1616769588,"answer_id":66819012,"question_id":7679819,"body_markdown":"Let&#39;s assume the data being applied on the `Map` comes from a `List` (Collection), then you should create a reversed *loop* that starts reading from the end of that list till it gets to the first like this:\r\n`for (int key = collection.size()-1; key &gt; map.size(); key--) {\r\n    Data data = collection.get(key);\r\n    map.put(key, data);\r\n }`","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>Let's assume the data being applied on the <code>Map</code> comes from a <code>List</code> (Collection), then you should create a reversed <em>loop</em> that starts reading from the end of that list till it gets to the first like this:\n<code>for (int key = collection.size()-1; key &gt; map.size(); key--) { Data data = collection.get(key); map.put(key, data); }</code></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229845,"creation_date":1691820920,"answer_id":76888014,"question_id":7679819,"body_markdown":"An element can be added as the first or last element using the [`putFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putFirst(K,V)) and [`putLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)) methods which were added to `LinkedHashMap` in Java 21.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String, Integer&gt; linkedHashMap = // ...\r\n\r\nlinkedHashMap.put(&quot;A&quot;, 1);\r\nlinkedHashMap.putLast(&quot;B&quot;, 2);\r\nlinkedHashMap.putFirst(&quot;C&quot;, 3);\r\n\r\n// linkedHashMap is now [C=3, A=1, B=2]\r\n```\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>An element can be added as the first or last element using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putFirst(K,V)\" rel=\"nofollow noreferrer\"><code>putFirst()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast()</code></a> methods which were added to <code>LinkedHashMap</code> in Java 21.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String, Integer&gt; linkedHashMap = // ...\n\nlinkedHashMap.put(&quot;A&quot;, 1);\nlinkedHashMap.putLast(&quot;B&quot;, 2);\nlinkedHashMap.putFirst(&quot;C&quot;, 3);\n\n// linkedHashMap is now [C=3, A=1, B=2]\n</code></pre>\n"}],"owner":{"account_id":257029,"reputation":3131,"user_id":538160,"accept_rate":62,"display_name":"supernova"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114379,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":7679884,"answer_count":10,"score":64,"last_activity_date":1695229845,"creation_date":1317931317,"question_id":7679819,"body_markdown":"I have an ordered LinkedHashMap  and i want to add element at specific index , say at first place or last place in the map.\r\nHow can i add element in LinkedHashMap at an specific position?\r\n\r\nEven if I could add an element to FIRST or LAST position in LinkedHashMap would help! ","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>I have an ordered LinkedHashMap  and i want to add element at specific index , say at first place or last place in the map.\nHow can i add element in LinkedHashMap at an specific position?</p>\n\n<p>Even if I could add an element to FIRST or LAST position in LinkedHashMap would help! </p>\n"},{"tags":["java","linkedhashset"],"answers":[{"tags":[],"owner":{"account_id":197752,"reputation":2958,"user_id":815977,"accept_rate":100,"display_name":"Anil Vaitla"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1365461943,"creation_date":1365461381,"answer_id":15890401,"question_id":15890248,"body_markdown":"I think you may need to use an iterator to do the removal if you are using a LinkedHashSet. That is to say find the element, then keep removing until you get to the tail. This will be O(n), but even if you wrote your own LinkedHashSet (with a doubly linked list and hashset) you would have access to the raw linking structure so that you could cut the linked list in O(1), but you would still need to remove all elements that you just cut from the linked list from the HashSet which is where the O(n) cost would arise again.\r\n\r\nSo in summary, remove the element, then keep an iterator to that element and continue to walk down removing elements until you get to the end. I&#39;m not sure if LinkedHashSet exposes the required calls, but you can probably figure that out.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>I think you may need to use an iterator to do the removal if you are using a LinkedHashSet. That is to say find the element, then keep removing until you get to the tail. This will be O(n), but even if you wrote your own LinkedHashSet (with a doubly linked list and hashset) you would have access to the raw linking structure so that you could cut the linked list in O(1), but you would still need to remove all elements that you just cut from the linked list from the HashSet which is where the O(n) cost would arise again.</p>\n\n<p>So in summary, remove the element, then keep an iterator to that element and continue to walk down removing elements until you get to the end. I'm not sure if LinkedHashSet exposes the required calls, but you can probably figure that out.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365479906,"creation_date":1365462587,"answer_id":15890637,"question_id":15890248,"body_markdown":"The basic problem here is that you have to maintain two data structures, a &quot;map&quot; one representing the key / value mapping, and a &quot;list&quot; other representing the insertion order.\r\n\r\nThere are &quot;map&quot; and &quot;list&quot; organizations that offer fast removal of a elements after a given point; e.g. ordered trees of various kinds and both array and chain-based lists (modulo the cost of locating the point.)\r\n\r\nHowever, it seems impossible to remove N elements from the two data structures in better than `O(N)`.  You have to visit all of the elements being removed to remove them from the 2nd data structure.  (In fact, I suspect one could prove this mathematically ...)\r\n\r\nIn short, there is no data structure that has better complexity than what you are currently using.\r\n\r\nThe area where it is possible to improve performance (with a custom collection class!) is in avoiding an explicit use of an iterator.  Using an iterator and the standard iterator API, the cost is `O(N)` on the total number of elements in the data structure.  You could make this `O(N)` on the number of elements removed ... if the hash entry nodes also had next/prev links for the sequence.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>The basic problem here is that you have to maintain two data structures, a \"map\" one representing the key / value mapping, and a \"list\" other representing the insertion order.</p>\n\n<p>There are \"map\" and \"list\" organizations that offer fast removal of a elements after a given point; e.g. ordered trees of various kinds and both array and chain-based lists (modulo the cost of locating the point.)</p>\n\n<p>However, it seems impossible to remove N elements from the two data structures in better than <code>O(N)</code>.  You have to visit all of the elements being removed to remove them from the 2nd data structure.  (In fact, I suspect one could prove this mathematically ...)</p>\n\n<p>In short, there is no data structure that has better complexity than what you are currently using.</p>\n\n<p>The area where it is possible to improve performance (with a custom collection class!) is in avoiding an explicit use of an iterator.  Using an iterator and the standard iterator API, the cost is <code>O(N)</code> on the total number of elements in the data structure.  You could make this <code>O(N)</code> on the number of elements removed ... if the hash entry nodes also had next/prev links for the sequence.</p>\n"},{"tags":[],"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365464425,"creation_date":1365464425,"answer_id":15890921,"question_id":15890248,"body_markdown":"You could write your own version of an ArrayList that doesn&#39;t allow for duplicates, by overriding `add()` and `addAll()`.  To my knowledge, there is no &quot;common&quot; 3rd party version of such, which has always surprised me.  Anybody know of one?\r\n\r\nThen the remove code is pretty simple (no need to use an `ListIterator`)\r\n\r\n    int idx = this.indexOf(&quot;D&quot;);\r\n    if (idx &gt;= 0) {\r\n      for (int goInReverse = this.size()-1; goInReverse &gt; idx; goInReverse--)\r\n        this.remove(goInReverse);\r\n    }\r\n\r\nHowever, this is still O(N), cause you loop through every element of the List.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>You could write your own version of an ArrayList that doesn't allow for duplicates, by overriding <code>add()</code> and <code>addAll()</code>.  To my knowledge, there is no \"common\" 3rd party version of such, which has always surprised me.  Anybody know of one?</p>\n\n<p>Then the remove code is pretty simple (no need to use an <code>ListIterator</code>)</p>\n\n<pre><code>int idx = this.indexOf(\"D\");\nif (idx &gt;= 0) {\n  for (int goInReverse = this.size()-1; goInReverse &gt; idx; goInReverse--)\n    this.remove(goInReverse);\n}\n</code></pre>\n\n<p>However, this is still O(N), cause you loop through every element of the List.</p>\n"},{"tags":[],"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1374774368,"creation_date":1374774368,"answer_id":17865164,"question_id":15890248,"body_markdown":"So, after trying a couple of things mentioned above, I chose to implement a different Data structure. Since I did not have any issue with the O(n) for this problem (as my data is very small)\r\n\r\nI used Graphs, this library came in really handy: http://jgrapht.org/\r\n\r\nWhat I am doing is adding all elements as vertices to a `DirectedGraph` also creating edges between them (edges helped me solve another non-related problem as well). And when it&#39;s time to remove the elements I use a recursive function with the following pseudo code:\r\n\r\n    removeElements(element) {\r\n    \r\n    tempEdge = graph.getOutgoingEdgeFrom(element)\r\n    if(tempEdge !=null)\r\n       return;\r\n    tempVertex = graph.getTargetVertex(tempEdge)\r\n    removeElements(tempVertex)\r\n    graph.remove(tempVertex)\r\n\r\n    }\r\n\r\nI agree that graph DS is not good for these kind of problems, but under my conditions, this works perfectly... Cheers! ","title":"Java LinkedHashSet remove some elements from the end","body":"<p>So, after trying a couple of things mentioned above, I chose to implement a different Data structure. Since I did not have any issue with the O(n) for this problem (as my data is very small)</p>\n\n<p>I used Graphs, this library came in really handy: <a href=\"http://jgrapht.org/\" rel=\"nofollow\">http://jgrapht.org/</a></p>\n\n<p>What I am doing is adding all elements as vertices to a <code>DirectedGraph</code> also creating edges between them (edges helped me solve another non-related problem as well). And when it's time to remove the elements I use a recursive function with the following pseudo code:</p>\n\n<pre><code>removeElements(element) {\n\ntempEdge = graph.getOutgoingEdgeFrom(element)\nif(tempEdge !=null)\n   return;\ntempVertex = graph.getTargetVertex(tempEdge)\nremoveElements(tempVertex)\ngraph.remove(tempVertex)\n\n}\n</code></pre>\n\n<p>I agree that graph DS is not good for these kind of problems, but under my conditions, this works perfectly... Cheers! </p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229748,"creation_date":1691891925,"answer_id":76891684,"question_id":15890248,"body_markdown":"The last element can be retrieved or removed using the [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#getLast()) and [`removeLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()) methods that were added added to `LinkedHashSet` in Java 21.  This can be combined with a `while` loop to remove elements from the end of the set until the desired element is encountered.\r\n\r\n```lang-java\r\nif (hs.contains(&quot;D&quot;)) {\r\n    while (!&quot;D&quot;.equals(hs.getLast())) {\r\n        hs.removeLast();\r\n    }\r\n}\r\n```\r\n","title":"Java LinkedHashSet remove some elements from the end","body":"<p>The last element can be retrieved or removed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()\" rel=\"nofollow noreferrer\"><code>removeLast()</code></a> methods that were added added to <code>LinkedHashSet</code> in Java 21.  This can be combined with a <code>while</code> loop to remove elements from the end of the set until the desired element is encountered.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hs.contains(&quot;D&quot;)) {\n    while (!&quot;D&quot;.equals(hs.getLast())) {\n        hs.removeLast();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2416,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17865164,"answer_count":5,"score":2,"last_activity_date":1695229748,"creation_date":1365460564,"question_id":15890248,"body_markdown":"I am working on a problem where i&#39;m required to store elements with requirements of No Duplication and Maintaining order. I chose to go with `LinkedHashSet` Since it fulfilled both my requirements.\r\n \r\nLet&#39;s say I have this code: \r\n\r\n     LinkedHashSet hs = new LinkedHashSet();\r\n      hs.add(&quot;B&quot;);\r\n      hs.add(&quot;A&quot;);\r\n      hs.add(&quot;D&quot;);\r\n      hs.add(&quot;E&quot;);\r\n      hs.add(&quot;C&quot;);\r\n      hs.add(&quot;F&quot;);\r\n      if(hs.contains(&quot;D&quot;)){\r\n           //do something to remove elements added after&quot;D&quot; i-e remove &quot;E&quot;, &quot;C&quot; and &quot;F&quot;\r\n           //maybe hs.removeAll(Collection&lt;?&gt;c) ??\r\n       }\r\n\r\nCan anyone please guide me with the logic to remove these elements?\r\n\r\nAm I using the wrong datastructure? If so, then what would be a better alternative?","title":"Java LinkedHashSet remove some elements from the end","body":"<p>I am working on a problem where i'm required to store elements with requirements of No Duplication and Maintaining order. I chose to go with <code>LinkedHashSet</code> Since it fulfilled both my requirements.</p>\n\n<p>Let's say I have this code: </p>\n\n<pre><code> LinkedHashSet hs = new LinkedHashSet();\n  hs.add(\"B\");\n  hs.add(\"A\");\n  hs.add(\"D\");\n  hs.add(\"E\");\n  hs.add(\"C\");\n  hs.add(\"F\");\n  if(hs.contains(\"D\")){\n       //do something to remove elements added after\"D\" i-e remove \"E\", \"C\" and \"F\"\n       //maybe hs.removeAll(Collection&lt;?&gt;c) ??\n   }\n</code></pre>\n\n<p>Can anyone please guide me with the logic to remove these elements?</p>\n\n<p>Am I using the wrong datastructure? If so, then what would be a better alternative?</p>\n"},{"tags":["java","list","linkedhashset"],"comments":[{"owner":{"account_id":4873312,"reputation":2203,"user_id":3929133,"display_name":"ortis"},"score":0,"creation_date":1459764967,"post_id":36399845,"comment_id":60416386,"body_markdown":"What about an `ArrayList` and use of `contains` method before inserting ?","body":"What about an <code>ArrayList</code> and use of <code>contains</code> method before inserting ?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765030,"post_id":36399845,"comment_id":60416435,"body_markdown":"I suspect you&#39;re going to have to implement your own algorithm for this, likely backed by a `HashSet`.","body":"I suspect you&#39;re going to have to implement your own algorithm for this, likely backed by a <code>HashSet</code>."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765095,"post_id":36399845,"comment_id":60416485,"body_markdown":"@AvihooMamka `TreeSet` keeps elements sorted based on natural or given order, it doesn&#39;t per se retain insertion order.","body":"@AvihooMamka <code>TreeSet</code> keeps elements sorted based on natural or given order, it doesn&#39;t per se retain insertion order."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765164,"post_id":36399845,"comment_id":60416527,"body_markdown":"Note that `LinkedHashSet` is not `final`, but you won&#39;t have access by the backing map used to store/retrieve elements.","body":"Note that <code>LinkedHashSet</code> is not <code>final</code>, but you won&#39;t have access by the backing map used to store/retrieve elements."},{"owner":{"account_id":2937822,"reputation":136,"user_id":2516376,"accept_rate":80,"display_name":"dneranjan"},"score":0,"creation_date":1459765215,"post_id":36399845,"comment_id":60416568,"body_markdown":"You can use map . Each time the user enters a letter, you would update this map.","body":"You can use map . Each time the user enters a letter, you would update this map."},{"owner":{"account_id":119129,"reputation":3846,"user_id":310626,"accept_rate":53,"display_name":"duduamar"},"score":0,"creation_date":1459765317,"post_id":36399845,"comment_id":60416630,"body_markdown":"As others said, you need your own implementation. Should rely on LinkedHashSet, just remove element on add to get the behavior you want","body":"As others said, you need your own implementation. Should rely on LinkedHashSet, just remove element on add to get the behavior you want"},{"owner":{"account_id":4321138,"reputation":2844,"user_id":3529323,"accept_rate":50,"display_name":"bcsb1001"},"score":0,"creation_date":1459765429,"post_id":36399845,"comment_id":60416720,"body_markdown":"Misunderstood the question and thought it printed `one, three, two` and you wanted `one, two, three`. Fail.","body":"Misunderstood the question and thought it printed <code>one, three, two</code> and you wanted <code>one, two, three</code>. Fail."},{"owner":{"account_id":2122612,"reputation":4116,"user_id":1885562,"accept_rate":59,"display_name":"rafakob"},"score":0,"creation_date":1459765607,"post_id":36399845,"comment_id":60416836,"body_markdown":"Thanks, guys. Just as I thought there&#39;s no collection that provides this behavior.","body":"Thanks, guys. Just as I thought there&#39;s no collection that provides this behavior."},{"owner":{"account_id":2937822,"reputation":136,"user_id":2516376,"accept_rate":80,"display_name":"dneranjan"},"score":0,"creation_date":1459765723,"post_id":36399845,"comment_id":60416898,"body_markdown":"HashMap replace the old value.but in the case of HashSet the item is not inserted.","body":"HashMap replace the old value.but in the case of HashSet the item is not inserted."}],"answers":[{"tags":[],"owner":{"account_id":8173726,"reputation":394,"user_id":6153247,"display_name":"Toonijn"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1459765964,"creation_date":1459765964,"answer_id":36400245,"question_id":36399845,"body_markdown":"When initializing you&#39;re LinkedHashSet you could override the add method. \r\n\r\n    Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(){\r\n        @Override\r\n        public boolean add(String s) {\r\n            if(contains(s))\r\n                remove(s);\r\n            return super.add(s);\r\n        }\r\n    };\r\n\r\nNow it gives you:\r\n\r\n    set.add(&quot;1&quot;);\r\n    set.add(&quot;2&quot;);\r\n    set.add(&quot;3&quot;);\r\n    set.add(&quot;1&quot;);\r\n    set.addAll(Collections.singleton(&quot;2&quot;));\r\n    \r\n    // [3, 1 ,2]\r\n\r\neven the addAll method is working.\r\n\r\n\r\n","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>When initializing you're LinkedHashSet you could override the add method. </p>\n\n<pre><code>Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(){\n    @Override\n    public boolean add(String s) {\n        if(contains(s))\n            remove(s);\n        return super.add(s);\n    }\n};\n</code></pre>\n\n<p>Now it gives you:</p>\n\n<pre><code>set.add(\"1\");\nset.add(\"2\");\nset.add(\"3\");\nset.add(\"1\");\nset.addAll(Collections.singleton(\"2\"));\n\n// [3, 1 ,2]\n</code></pre>\n\n<p>even the addAll method is working.</p>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1467878041,"creation_date":1459766111,"answer_id":36400290,"question_id":36399845,"body_markdown":"Most of the [Java Collections][1] can be extended for tweaking. \r\n\r\nSubclass [`LinkedHashSet`][2], overriding the [`add`][3] method.\r\n\r\n    class TweakedHashSet&lt;T&gt; extends LinkedHashSet&lt;T&gt; {\r\n\r\n        @Override\r\n        public boolean add(T e) {\r\n            // Get rid of old one.\r\n            boolean wasThere = remove(e);\r\n            // Add it.\r\n            super.add(e);\r\n            // Contract is &quot;true if this set did not already contain the specified element&quot;\r\n            return !wasThere;\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_collections_framework\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>Most of the <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"noreferrer\">Java Collections</a> can be extended for tweaking. </p>\n\n<p>Subclass <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet</code></a>, overriding the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-\" rel=\"noreferrer\"><code>add</code></a> method.</p>\n\n<pre><code>class TweakedHashSet&lt;T&gt; extends LinkedHashSet&lt;T&gt; {\n\n    @Override\n    public boolean add(T e) {\n        // Get rid of old one.\n        boolean wasThere = remove(e);\n        // Add it.\n        super.add(e);\n        // Contract is \"true if this set did not already contain the specified element\"\n        return !wasThere;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1479622090,"creation_date":1459785892,"answer_id":36407571,"question_id":36399845,"body_markdown":"You can simply use a special feature of `LinkedHashMap`:\r\n\r\n    Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;&gt;(16, 0.75f, true));\r\n    set.add(&quot;one&quot;);\r\n    set.add(&quot;two&quot;);\r\n    set.add(&quot;three&quot;);\r\n    set.add(&quot;two&quot;);\r\n    System.out.println(set); // prints [one, three, two]\r\n\r\nIn Oracle’s JRE the `LinkedHashSet` is backed by a `LinkedHashMap` anyway, so there’s not much functional difference, but the special constructor used here configures the `LinkedHashMap` to change the order on every *access* not only on *insertion*. This might sound as being too much, but in fact affects the insertion of already contained keys (values in the sense of the `Set`) only. The other affected `Map` operations (namely `get`) are not used by the returned `Set`.\r\n\r\nIf you’re not using Java&#160;8, you have to help the compiler a bit due to the limited type inference:\r\n\r\n    Set&lt;String&gt; set\r\n        = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(16, 0.75f, true));\r\n\r\nbut the functionality is the same.\r\n","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>You can simply use a special feature of <code>LinkedHashMap</code>:</p>\n\n<pre><code>Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;&gt;(16, 0.75f, true));\nset.add(\"one\");\nset.add(\"two\");\nset.add(\"three\");\nset.add(\"two\");\nSystem.out.println(set); // prints [one, three, two]\n</code></pre>\n\n<p>In Oracle’s JRE the <code>LinkedHashSet</code> is backed by a <code>LinkedHashMap</code> anyway, so there’s not much functional difference, but the special constructor used here configures the <code>LinkedHashMap</code> to change the order on every <em>access</em> not only on <em>insertion</em>. This might sound as being too much, but in fact affects the insertion of already contained keys (values in the sense of the <code>Set</code>) only. The other affected <code>Map</code> operations (namely <code>get</code>) are not used by the returned <code>Set</code>.</p>\n\n<p>If you’re not using Java 8, you have to help the compiler a bit due to the limited type inference:</p>\n\n<pre><code>Set&lt;String&gt; set\n    = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(16, 0.75f, true));\n</code></pre>\n\n<p>but the functionality is the same.</p>\n"},{"tags":[],"owner":{"account_id":2374287,"reputation":4246,"user_id":2078093,"accept_rate":62,"display_name":"Naresh Joshi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479623593,"creation_date":1479623593,"answer_id":40701361,"question_id":36399845,"body_markdown":"All solution provided above are excellent but if we don&#39;t want to override already implemented collections. We can solve this problem simply by using an ArrayList with a little trick\r\n\r\nWe can create a method which you will use to insert data into your list\r\n\r\n    public static &lt;T&gt; void addToList(List&lt;T&gt; list, T element) {\r\n    \tlist.remove(element); // Will remove element from list, if list contains it\r\n    \tlist.add(element); // Will add element again to the list \r\n    }\r\n\r\n And we can call this method to add element to our list\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    addToList(list, &quot;one&quot;);\r\n    addToList(list, &quot;two&quot;);\r\n    addToList(list, &quot;three&quot;);\r\n    addToList(list, &quot;two&quot;);\r\n\r\nOnly disadvantage here is we need to call our custom `addToList()` method everytime instead of `list.add()`","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>All solution provided above are excellent but if we don't want to override already implemented collections. We can solve this problem simply by using an ArrayList with a little trick</p>\n\n<p>We can create a method which you will use to insert data into your list</p>\n\n<pre><code>public static &lt;T&gt; void addToList(List&lt;T&gt; list, T element) {\n    list.remove(element); // Will remove element from list, if list contains it\n    list.add(element); // Will add element again to the list \n}\n</code></pre>\n\n<p>And we can call this method to add element to our list</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\naddToList(list, \"one\");\naddToList(list, \"two\");\naddToList(list, \"three\");\naddToList(list, \"two\");\n</code></pre>\n\n<p>Only disadvantage here is we need to call our custom <code>addToList()</code> method everytime instead of <code>list.add()</code></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229690,"creation_date":1691892228,"answer_id":76891690,"question_id":36399845,"body_markdown":"Java 21 added the [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)) method to `LinkedHashSet`.\r\n\r\n&gt; Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.\r\n\r\nUsing this method instead of `add` achieves the desired goal of moving duplicate entries to the end of the set.\r\n\r\n```lang-java\r\nset.addLast(&quot;one&quot;);\r\nset.addLast(&quot;two&quot;);\r\nset.addLast(&quot;three&quot;);\r\nset.addLast(&quot;two&quot;);\r\n```","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a> method to <code>LinkedHashSet</code>.</p>\n<blockquote>\n<p>Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.</p>\n</blockquote>\n<p>Using this method instead of <code>add</code> achieves the desired goal of moving duplicate entries to the end of the set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>set.addLast(&quot;one&quot;);\nset.addLast(&quot;two&quot;);\nset.addLast(&quot;three&quot;);\nset.addLast(&quot;two&quot;);\n</code></pre>\n"}],"owner":{"account_id":2122612,"reputation":4116,"user_id":1885562,"accept_rate":59,"display_name":"rafakob"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14748,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":36400290,"answer_count":5,"score":35,"last_activity_date":1695229690,"creation_date":1459764651,"question_id":36399845,"body_markdown":"I need a collection that keeps insertion order and has unique values. LinkedHashSet looks like the way to go, but there&#39;s one problem - when two items are equal, it removes the newest one (which makes sense), here&#39;s an example:\r\n\r\n    set.add(&quot;one&quot;);\r\n    set.add(&quot;two&quot;);\r\n    set.add(&quot;three&quot;);\r\n    set.add(&quot;two&quot;);\r\n\r\nThe `LinkedHashSet` will print: \r\n\r\n&gt;`one`, `two`, `three` \r\n\r\nBut what I need is: \r\n\r\n&gt;**`one`, `three`, `two`**\r\n\r\nWhat would be the best solution here? Is there any collection/collections method that can do this or should I implement it manually?","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>I need a collection that keeps insertion order and has unique values. LinkedHashSet looks like the way to go, but there's one problem - when two items are equal, it removes the newest one (which makes sense), here's an example:</p>\n\n<pre><code>set.add(\"one\");\nset.add(\"two\");\nset.add(\"three\");\nset.add(\"two\");\n</code></pre>\n\n<p>The <code>LinkedHashSet</code> will print: </p>\n\n<blockquote>\n  <p><code>one</code>, <code>two</code>, <code>three</code> </p>\n</blockquote>\n\n<p>But what I need is: </p>\n\n<blockquote>\n  <p><strong><code>one</code>, <code>three</code>, <code>two</code></strong></p>\n</blockquote>\n\n<p>What would be the best solution here? Is there any collection/collections method that can do this or should I implement it manually?</p>\n"},{"tags":["java","collections","linkedhashmap","linkedhashset"],"answers":[{"tags":[],"owner":{"account_id":4688412,"reputation":8118,"user_id":3795219,"accept_rate":70,"display_name":"Austin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1454952804,"creation_date":1454952382,"answer_id":35275647,"question_id":35275493,"body_markdown":"It returns a `Set` as defined by the `Map` interface. A `Set` is simply collection that contains no duplicate elements. On the other hand, a `List` is an ordered collection (also known as a sequence). The `List` interface does not specify that elements be unique.\r\n\r\nStill, the `LinkedHashMap` implementation actually returns the underlying keySet which is a `LinkedKeySet`, and the `forEach()` method of the `LinkedKeySet` is order-preserving, i.e.:\r\n\r\n    //from the source code for the LinkedHashMap:\r\n    public Set&lt;K&gt; keySet() {\r\n        Set&lt;K&gt; ks;\r\n        return (ks = keySet) == null ? (keySet = new LinkedKeySet()) : ks;\r\n    }\r\n\r\nSo, in this case, the elements are both unique and ordered.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>It returns a <code>Set</code> as defined by the <code>Map</code> interface. A <code>Set</code> is simply collection that contains no duplicate elements. On the other hand, a <code>List</code> is an ordered collection (also known as a sequence). The <code>List</code> interface does not specify that elements be unique.</p>\n\n<p>Still, the <code>LinkedHashMap</code> implementation actually returns the underlying keySet which is a <code>LinkedKeySet</code>, and the <code>forEach()</code> method of the <code>LinkedKeySet</code> is order-preserving, i.e.:</p>\n\n<pre><code>//from the source code for the LinkedHashMap:\npublic Set&lt;K&gt; keySet() {\n    Set&lt;K&gt; ks;\n    return (ks = keySet) == null ? (keySet = new LinkedKeySet()) : ks;\n}\n</code></pre>\n\n<p>So, in this case, the elements are both unique and ordered.</p>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1454953499,"creation_date":1454953499,"answer_id":35275980,"question_id":35275493,"body_markdown":"*&quot;why doesn&#39;t the source code of `LinkedHashMap` return an `Object` of type `Set` that guarantees order like `LinkedHashSet`?&quot;*\r\n\r\nBecause `LinkedHashSet` is a concrete class with it&#39;s own implementation maintaining its own data, and the [`keyset()`][1] method must return a view of the `Map`, so it cannot just copy the key data to a `LinkedHashSet`. See javadoc:\r\n\r\n &gt; Returns a `Set` view of the keys contained in this map. The **set is backed by the map**, so changes to the map are reflected in the set, and vice-versa.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p><em>\"why doesn't the source code of <code>LinkedHashMap</code> return an <code>Object</code> of type <code>Set</code> that guarantees order like <code>LinkedHashSet</code>?\"</em></p>\n\n<p>Because <code>LinkedHashSet</code> is a concrete class with it's own implementation maintaining its own data, and the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29\" rel=\"noreferrer\"><code>keyset()</code></a> method must return a view of the <code>Map</code>, so it cannot just copy the key data to a <code>LinkedHashSet</code>. See javadoc:</p>\n\n<blockquote>\n  <p>Returns a <code>Set</code> view of the keys contained in this map. The <strong>set is backed by the map</strong>, so changes to the map are reflected in the set, and vice-versa.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454954497,"creation_date":1454954497,"answer_id":35276224,"question_id":35275493,"body_markdown":"&gt; if it guarantees order then why doesn&#39;t the source code of LinkedHashMap return an Object of type Set that guarantees order like LinkedHashSet?\r\n\r\nThe *declared* type of the key set is drawn from that declared by `Map.keySet()`.  `LinkedHashMap` was added to the standard library before covariant return types were added to the Java language.  At that time, there was no alternative to using type `Set`.\r\n\r\nIn any event, just because the key set must have the same order as the underlying map does not mean that it must be a `LinkedHashSet`, and in fact it cannot be, because it must not support element additions.  Its class is instead a private nested class of class `LinkedHashMap`.  There is no public type between that class and `Set` that would be any more useful than `Set` as a return type.\r\n\r\nIndeed, I don&#39;t think it would be easy to define one.  What would be the essential characteristics that distinguish it from any other set?  You cannot merely say &quot;iteration order&quot; without specifying *what* iteration order instances would have, and that order depends on the `LinkedHashMap` instance from which the set is obtained.  In other words, iteration order is an instance characteristic, not a class characteristic.  A declared type that expresses the nature of being the key set of a `LinkedHashMap` would therefore provide almost no information of any practical use beyond what `Set` provides.\r\n\r\nAnyway, I do not find the excerpt you quoted about returning a `List` vs a `Collection` to be very persuasive.  The fact is that ambiguity about an object&#39;s specific class is not inherently a problem.  In the `Collection` vs. `List` example, if type `Collection` captures the return-type requirements of the method well, such that there is no particular reason that the characteristic features of a `List` are required, then `Collection` is a good choice of return type.  It is especially good if the requirements could also be satisfied by a `Set`, because then the API is not making an essentially arbitrary choice between two equally good alternatives.\r\n\r\nThere is a school of thought that holds that methods should be as general as possible in the types of their arguments and as specific as possible in their return types.  I attribute a lot of merit to that idea, but it is rather more of a guideline than a rule, and there is quite a lot of room for interpretation as to how specific &quot;as specific as possible&quot; is.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<blockquote>\n  <p>if it guarantees order then why doesn't the source code of LinkedHashMap return an Object of type Set that guarantees order like LinkedHashSet?</p>\n</blockquote>\n\n<p>The <em>declared</em> type of the key set is drawn from that declared by <code>Map.keySet()</code>.  <code>LinkedHashMap</code> was added to the standard library before covariant return types were added to the Java language.  At that time, there was no alternative to using type <code>Set</code>.</p>\n\n<p>In any event, just because the key set must have the same order as the underlying map does not mean that it must be a <code>LinkedHashSet</code>, and in fact it cannot be, because it must not support element additions.  Its class is instead a private nested class of class <code>LinkedHashMap</code>.  There is no public type between that class and <code>Set</code> that would be any more useful than <code>Set</code> as a return type.</p>\n\n<p>Indeed, I don't think it would be easy to define one.  What would be the essential characteristics that distinguish it from any other set?  You cannot merely say \"iteration order\" without specifying <em>what</em> iteration order instances would have, and that order depends on the <code>LinkedHashMap</code> instance from which the set is obtained.  In other words, iteration order is an instance characteristic, not a class characteristic.  A declared type that expresses the nature of being the key set of a <code>LinkedHashMap</code> would therefore provide almost no information of any practical use beyond what <code>Set</code> provides.</p>\n\n<p>Anyway, I do not find the excerpt you quoted about returning a <code>List</code> vs a <code>Collection</code> to be very persuasive.  The fact is that ambiguity about an object's specific class is not inherently a problem.  In the <code>Collection</code> vs. <code>List</code> example, if type <code>Collection</code> captures the return-type requirements of the method well, such that there is no particular reason that the characteristic features of a <code>List</code> are required, then <code>Collection</code> is a good choice of return type.  It is especially good if the requirements could also be satisfied by a <code>Set</code>, because then the API is not making an essentially arbitrary choice between two equally good alternatives.</p>\n\n<p>There is a school of thought that holds that methods should be as general as possible in the types of their arguments and as specific as possible in their return types.  I attribute a lot of merit to that idea, but it is rather more of a guideline than a rule, and there is quite a lot of room for interpretation as to how specific \"as specific as possible\" is.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229621,"creation_date":1691896225,"answer_id":76891792,"question_id":35275493,"body_markdown":"Java 21 added the [`sequencedKeySet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#sequencedKeySet()) method to `LinkedHashMap`, which returns the key set as a [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) (i.e. a `Set` with a well-defined encounter order).  While the `keySet` method continues to be a `Set` to maintain backwards compatibility, the `sequencedKeySet` method returns the `SequencedKeySet` type that specifically guarantees a well-defined iteration order.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#sequencedKeySet()\" rel=\"nofollow noreferrer\"><code>sequencedKeySet</code></a> method to <code>LinkedHashMap</code>, which returns the key set as a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> (i.e. a <code>Set</code> with a well-defined encounter order).  While the <code>keySet</code> method continues to be a <code>Set</code> to maintain backwards compatibility, the <code>sequencedKeySet</code> method returns the <code>SequencedKeySet</code> type that specifically guarantees a well-defined iteration order.</p>\n"}],"owner":{"account_id":1571474,"reputation":3851,"user_id":1459075,"accept_rate":91,"display_name":"Brandon Ling"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2356,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35275980,"answer_count":4,"score":3,"last_activity_date":1695229621,"creation_date":1454951934,"question_id":35275493,"body_markdown":"I&#39;ve read in java documentation and also in this post that LinkedHashMaps&#39; `keyset()` maintains order.\r\n[https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o][1]\r\n\r\n\r\nMy question is, if it guarantees order then why doesn&#39;t the source code of `LinkedHashMap` return an Object of type `Set` that guarantees order like `LinkedHashSet`? \r\n\r\nOne reason I can maybe think of is that LinkedHashSet uses a map which would increase memory allocation (depending on how AbstractSet is implemented). Is it also because it future proofs implementation of keyset? \r\n\r\nLike this answer says in this post : [Is it better to use List or Collection?][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o\r\n  [2]: https://stackoverflow.com/questions/2917627/is-it-better-to-use-list-or-collection\r\n\r\n&gt; Returning a List is in line with programming to the Highest Suitable\r\n&gt; Interface.\r\n&gt; \r\n&gt; Returning a Collection would cause ambiguity to the user, as a\r\n&gt; returned collection could be either: Set, List or Queue.\r\n\r\nSo, without reading the documentation of the `keyset()` isn&#39;t this ambiguous?\r\n\r\n`keyset()` source code: \r\n\r\n    public Set&lt;K&gt; keySet() {\r\n        Set&lt;K&gt; ks = keySet;\r\n        return (ks != null ? ks : (keySet = new KeySet()));\r\n    }\r\n\r\n    private final class KeySet extends AbstractSet&lt;K&gt; {\r\n        public Iterator&lt;K&gt; iterator() {\r\n            return newKeyIterator();\r\n        }\r\n        public int size() {\r\n            return size;\r\n        }\r\n        public boolean contains(Object o) {\r\n            return containsKey(o);\r\n        }\r\n        public boolean remove(Object o) {\r\n            return HashMap.this.removeEntryForKey(o) != null;\r\n        }\r\n        public void clear() {\r\n            HashMap.this.clear();\r\n        }\r\n    }","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>I've read in java documentation and also in this post that LinkedHashMaps' <code>keyset()</code> maintains order.\n<a href=\"https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o\">Is the order guaranteed for the return of keys and values from a LinkedHashMap object?</a></p>\n\n<p>My question is, if it guarantees order then why doesn't the source code of <code>LinkedHashMap</code> return an Object of type <code>Set</code> that guarantees order like <code>LinkedHashSet</code>? </p>\n\n<p>One reason I can maybe think of is that LinkedHashSet uses a map which would increase memory allocation (depending on how AbstractSet is implemented). Is it also because it future proofs implementation of keyset? </p>\n\n<p>Like this answer says in this post : <a href=\"https://stackoverflow.com/questions/2917627/is-it-better-to-use-list-or-collection\">Is it better to use List or Collection?</a></p>\n\n<blockquote>\n  <p>Returning a List is in line with programming to the Highest Suitable\n  Interface.</p>\n  \n  <p>Returning a Collection would cause ambiguity to the user, as a\n  returned collection could be either: Set, List or Queue.</p>\n</blockquote>\n\n<p>So, without reading the documentation of the <code>keyset()</code> isn't this ambiguous?</p>\n\n<p><code>keyset()</code> source code: </p>\n\n<pre><code>public Set&lt;K&gt; keySet() {\n    Set&lt;K&gt; ks = keySet;\n    return (ks != null ? ks : (keySet = new KeySet()));\n}\n\nprivate final class KeySet extends AbstractSet&lt;K&gt; {\n    public Iterator&lt;K&gt; iterator() {\n        return newKeyIterator();\n    }\n    public int size() {\n        return size;\n    }\n    public boolean contains(Object o) {\n        return containsKey(o);\n    }\n    public boolean remove(Object o) {\n        return HashMap.this.removeEntryForKey(o) != null;\n    }\n    public void clear() {\n        HashMap.this.clear();\n    }\n}\n</code></pre>\n"},{"tags":["java","collections"],"answers":[{"tags":[],"owner":{"account_id":53772,"reputation":22307,"user_id":160811,"accept_rate":100,"display_name":"Jeremy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314163636,"creation_date":1314163636,"answer_id":7170827,"question_id":7170772,"body_markdown":"If you&#39;re willing to give up a little performance for no duplicates, you can always extend [`ArrayDeque`][1] and override all the methods that insert into the collection to see if the element already exists.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>If you're willing to give up a little performance for no duplicates, you can always extend <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow\"><code>ArrayDeque</code></a> and override all the methods that insert into the collection to see if the element already exists.</p>\n"},{"tags":[],"owner":{"account_id":330601,"reputation":24990,"user_id":654801,"display_name":"sbridges"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1314164450,"creation_date":1314164102,"answer_id":7170886,"question_id":7170772,"body_markdown":"LinkedHashSet will allow removal of the first element, just do \r\n\r\n\r\n    Iterator iter = linkedHashSet.iterator();\r\n    if(iter.next()) {\r\n       iter.remove();\r\n    }","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>LinkedHashSet will allow removal of the first element, just do </p>\n\n<pre><code>Iterator iter = linkedHashSet.iterator();\nif(iter.next()) {\n   iter.remove();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695229527,"creation_date":1691896569,"answer_id":76891801,"question_id":7170772,"body_markdown":"As of Java 21, `LinkedHashSet` meets the stated requirements.\r\n\r\n`LinkedHashSet` was updated to have [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)), [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)), [`removeFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeFirst()), and [`removeLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()) methods.  This, when combined with the previously existing capabilities of `LinkedHashSet`, meets the stated requirements.","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>As of Java 21, <code>LinkedHashSet</code> meets the stated requirements.</p>\n<p><code>LinkedHashSet</code> was updated to have <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeFirst()\" rel=\"nofollow noreferrer\"><code>removeFirst</code></a>, and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()\" rel=\"nofollow noreferrer\"><code>removeLast</code></a> methods.  This, when combined with the previously existing capabilities of <code>LinkedHashSet</code>, meets the stated requirements.</p>\n"}],"owner":{"account_id":808033,"reputation":240,"user_id":891370,"accept_rate":60,"display_name":"BobTurbo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2159,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7170886,"answer_count":3,"score":4,"last_activity_date":1695229527,"creation_date":1314163201,"question_id":7170772,"body_markdown":"Is there a Java data structure that:\r\n\r\n - does not allow duplicates\r\n - retains insertion order\r\n - allows removal and insertion at either the start or end of the collection\r\n\r\nThere is `LinkedHashSet`, but it only allows `remove(object)`, `add(object)` as per `Set`.","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>Is there a Java data structure that:</p>\n<ul>\n<li>does not allow duplicates</li>\n<li>retains insertion order</li>\n<li>allows removal and insertion at either the start or end of the collection</li>\n</ul>\n<p>There is <code>LinkedHashSet</code>, but it only allows <code>remove(object)</code>, <code>add(object)</code> as per <code>Set</code>.</p>\n"},{"tags":["java","performance","linkedhashset"],"comments":[{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":1,"creation_date":1432695498,"post_id":30472307,"comment_id":49024912,"body_markdown":"No its not worth to check, brings in check-then-act problems alongwith it","body":"No its not worth to check, brings in check-then-act problems alongwith it"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1432695553,"post_id":30472307,"comment_id":49024927,"body_markdown":"@NitinDandriyal it depends if the `Set` may be reused in several threads or not.","body":"@NitinDandriyal it depends if the <code>Set</code> may be reused in several threads or not."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":1,"creation_date":1432696007,"post_id":30472307,"comment_id":49025034,"body_markdown":"@LuiggiMendoza Changing comment to - No its not worth to check as its redundant, also brings in check-then-act problems along with it in case of when multiple threads access the set.","body":"@LuiggiMendoza Changing comment to - No its not worth to check as its redundant, also brings in check-then-act problems along with it in case of when multiple threads access the set."},{"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"score":0,"creation_date":1432696754,"post_id":30472307,"comment_id":49025252,"body_markdown":"For concurrency, you can always use `Collections.synchronizedSet(set);` to get a thread safe set from an existing one.","body":"For concurrency, you can always use <code>Collections.synchronizedSet(set);</code> to get a thread safe set from an existing one."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691900499,"post_id":30472307,"comment_id":135552376,"body_markdown":"@LuiggiMendoza It is never worthwhile to check, and, if there are multiple threads, checking will make it *worse,* by introducing timing-window errors. `Set.remove()` already has to check, obviously, and it even returns a `boolean` telling you whether it was there or not.","body":"@LuiggiMendoza It is never worthwhile to check, and, if there are multiple threads, checking will make it <i>worse,</i> by introducing timing-window errors. <code>Set.remove()</code> already has to check, obviously, and it even returns a <code>boolean</code> telling you whether it was there or not."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691909880,"post_id":30472307,"comment_id":135552912,"body_markdown":"I would *guess*  that: if `contains` is called, the element must be searched once; when then `remove` is called, the element must be searched a second time; and when `add` is called, it must be searched a third time. (sure the `Hash` part *helps* a bit - no full scan needed)","body":"I would <i>guess</i>  that: if <code>contains</code> is called, the element must be searched once; when then <code>remove</code> is called, the element must be searched a second time; and when <code>add</code> is called, it must be searched a third time. (sure the <code>Hash</code> part <i>helps</i> a bit - no full scan needed)"}],"answers":[{"tags":[],"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432696550,"creation_date":1432695602,"answer_id":30472404,"question_id":30472307,"body_markdown":"I would recommend against calling both contains and remove. Both calls have to search through the chains to find the element, and `contains` does this no faster than `remove`. So you are potentially doubling your required time for a call each time.\r\n\r\nYou can browse through the code for [`contains`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.contains%28java.lang.Object%29) and [`remove`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.remove%28java.lang.Object%29) yourself.\r\n\r\nYou&#39;ll find that both end up possibly iterating through the hash chains at some point (`remove` in HashMap&#39;s [`removeNode`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29) and `contains` in HashMap&#39;s [`getNode`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29)), which could be a performance hit if your set is under heavy load.\r\n\r\nIf your set isn&#39;t under heavy load, then it still probably isn&#39;t worth it, but doesn&#39;t matter so much since in a sparse hash chains set the expected lookup/remove is O(1) (i.e. will be just as fast regardless of whether you have 5 elements or 5000 in it).\r\n    ","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>I would recommend against calling both contains and remove. Both calls have to search through the chains to find the element, and <code>contains</code> does this no faster than <code>remove</code>. So you are potentially doubling your required time for a call each time.</p>\n\n<p>You can browse through the code for <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.contains%28java.lang.Object%29\" rel=\"nofollow\"><code>contains</code></a> and <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.remove%28java.lang.Object%29\" rel=\"nofollow\"><code>remove</code></a> yourself.</p>\n\n<p>You'll find that both end up possibly iterating through the hash chains at some point (<code>remove</code> in HashMap's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29\" rel=\"nofollow\"><code>removeNode</code></a> and <code>contains</code> in HashMap's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29\" rel=\"nofollow\"><code>getNode</code></a>), which could be a performance hit if your set is under heavy load.</p>\n\n<p>If your set isn't under heavy load, then it still probably isn't worth it, but doesn't matter so much since in a sparse hash chains set the expected lookup/remove is O(1) (i.e. will be just as fast regardless of whether you have 5 elements or 5000 in it).</p>\n"},{"tags":[],"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432698748,"creation_date":1432696450,"answer_id":30472507,"question_id":30472307,"body_markdown":"`LinkedHashSet` uses `HashMap` behind the scenes `remove(Object)` will remove the `Object` only if it `contains` the Object hence its unnecessary and will increase time complexity in case Object exists in set.\r\n\r\n","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p><code>LinkedHashSet</code> uses <code>HashMap</code> behind the scenes <code>remove(Object)</code> will remove the <code>Object</code> only if it <code>contains</code> the Object hence its unnecessary and will increase time complexity in case Object exists in set.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229470,"creation_date":1691897794,"answer_id":76891831,"question_id":30472307,"body_markdown":"Java 21 added the [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)) method to `LinkedHashSet`, which will move the element to the end of the set if it is not already present.\r\n\r\n&gt; Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.\r\n\r\nUsing this method instead of `add` solves the stated requirement without having to also call `remove`.\r\n\r\n```lang-java\r\nSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\r\nset.addLast(entry);\r\n```","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a> method to <code>LinkedHashSet</code>, which will move the element to the end of the set if it is not already present.</p>\n<blockquote>\n<p>Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.</p>\n</blockquote>\n<p>Using this method instead of <code>add</code> solves the stated requirement without having to also call <code>remove</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n\nset.addLast(entry);\n</code></pre>\n"}],"owner":{"account_id":6000975,"reputation":165,"user_id":4714270,"accept_rate":40,"display_name":"Fred"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":679,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1695229470,"creation_date":1432694972,"question_id":30472307,"body_markdown":"I&#39;m using a `LinkedHashSet` to implement a set ordered by entry. If a duplicate element is added, it should go at the end and the entry already in the set should be removed.\r\n\r\nI&#39;m debating whether it&#39;s worth it to check `set.contains(entry)` before I call `set.remove(entry)`? Essentially does checking `contains()` each time offer any time/space benefit over just blindly calling `remove()` each time?\r\n\r\n```lang-java\r\nSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\r\n// The below\r\nset.remove(entry);\r\nset.add(entry);\r\n\r\n// Versus the below\r\nif (set.contains(entry)) {\r\n  set.remove(entry);\r\n}\r\nset.add(entry);\r\n```","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>I'm using a <code>LinkedHashSet</code> to implement a set ordered by entry. If a duplicate element is added, it should go at the end and the entry already in the set should be removed.</p>\n<p>I'm debating whether it's worth it to check <code>set.contains(entry)</code> before I call <code>set.remove(entry)</code>? Essentially does checking <code>contains()</code> each time offer any time/space benefit over just blindly calling <code>remove()</code> each time?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n\n// The below\nset.remove(entry);\nset.add(entry);\n\n// Versus the below\nif (set.contains(entry)) {\n  set.remove(entry);\n}\nset.add(entry);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":130930,"reputation":67596,"user_id":330565,"accept_rate":79,"display_name":"Nikita Rybak"},"score":2,"creation_date":1286999136,"post_id":3927355,"comment_id":4189875,"body_markdown":"Where did you find add(int, Object) method for LinkedHashSet?","body":"Where did you find add(int, Object) method for LinkedHashSet?"},{"owner":{"account_id":110195,"reputation":38771,"user_id":291701,"accept_rate":66,"display_name":"user291701"},"score":0,"creation_date":1286999203,"post_id":3927355,"comment_id":4189885,"body_markdown":"Ah yeah sorry just updated the post with that, really messed that one up..","body":"Ah yeah sorry just updated the post with that, really messed that one up.."},{"owner":{"account_id":130930,"reputation":67596,"user_id":330565,"accept_rate":79,"display_name":"Nikita Rybak"},"score":0,"creation_date":1286999494,"post_id":3927355,"comment_id":4189943,"body_markdown":"Reverse? Doesn&#39;t look like anything in the API is gonna help you.","body":"Reverse? Doesn&#39;t look like anything in the API is gonna help you."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1691906008,"post_id":3927355,"comment_id":135552614,"body_markdown":"Voting to close as needing more focus/having multiple questions in one.  Alternatively, with the edit this is a duplicate of https://stackoverflow.com/q/23722650/1108305.","body":"Voting to close as needing more focus/having multiple questions in one.  Alternatively, with the edit this is a duplicate of <a href=\"https://stackoverflow.com/q/23722650/1108305\">stackoverflow.com/q/23722650/1108305</a>."}],"answers":[{"tags":[],"owner":{"account_id":36420,"reputation":2827,"user_id":103867,"accept_rate":100,"display_name":"Nick"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1286999402,"creation_date":1286999402,"answer_id":3927428,"question_id":3927355,"body_markdown":"Judging by the source code of LinkedHashMap (which backs LinkedHashSet -- see http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html ), inserts are cheap, like in a linked list.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Judging by the source code of LinkedHashMap (which backs LinkedHashSet -- see <a href=\"http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\" rel=\"nofollow\">http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html</a> ), inserts are cheap, like in a linked list.</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287000343,"creation_date":1286999440,"answer_id":3927436,"question_id":3927355,"body_markdown":"You can&#39;t add elements to the front of a `LinkedHashSet`... it has no method such as `add(int, Object)` nor any other methods that make use of the concept of an &quot;index&quot; in the set (that&#39;s a `List` concept). It only provides consistent iteration order, based on the order in which elements were inserted. The most recently inserted element that was not already in the set will be the last element when you iterate over it.\r\n\r\nAnd the Javadoc for `LinkedHashSet` explicitly states:\r\n\r\n&gt; Like HashSet, it provides constant-time performance for the basic operations (add, contains and remove), assuming the hash function disperses elements properly among the buckets.\r\n\r\n**Edit**: There is not any way to iterate over a `LinkedHashSet` in reverse short of something like copying it to a `List` and iterating over that in reverse. Using [Guava][1] you could do that like:\r\n\r\n    for (String s : Lists.reverse(ImmutableList.copyOf(set))) { ... }\r\n\r\nNote that while creating the `ImmutableList` does require iterating over each element of the original set, the `reverse` method simply provides a reverse view and doesn&#39;t iterate at all itself.\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>You can't add elements to the front of a <code>LinkedHashSet</code>... it has no method such as <code>add(int, Object)</code> nor any other methods that make use of the concept of an \"index\" in the set (that's a <code>List</code> concept). It only provides consistent iteration order, based on the order in which elements were inserted. The most recently inserted element that was not already in the set will be the last element when you iterate over it.</p>\n\n<p>And the Javadoc for <code>LinkedHashSet</code> explicitly states:</p>\n\n<blockquote>\n  <p>Like HashSet, it provides constant-time performance for the basic operations (add, contains and remove), assuming the hash function disperses elements properly among the buckets.</p>\n</blockquote>\n\n<p><strong>Edit</strong>: There is not any way to iterate over a <code>LinkedHashSet</code> in reverse short of something like copying it to a <code>List</code> and iterating over that in reverse. Using <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Guava</a> you could do that like:</p>\n\n<pre><code>for (String s : Lists.reverse(ImmutableList.copyOf(set))) { ... }\n</code></pre>\n\n<p>Note that while creating the <code>ImmutableList</code> does require iterating over each element of the original set, the <code>reverse</code> method simply provides a reverse view and doesn't iterate at all itself.</p>\n"},{"tags":[],"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286999586,"creation_date":1286999586,"answer_id":3927460,"question_id":3927355,"body_markdown":"To answer your latest question, there is no reverse iterator feature available from `LinkedHashSet`, even though internally the implementation uses a doubly linked list.\r\n\r\nThere is an open Request For Enhancement about this:\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=4848853\r\n\r\nMark Peters links to functionality available in guava, though their reverse list actually generates a reverse list.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>To answer your latest question, there is no reverse iterator feature available from <code>LinkedHashSet</code>, even though internally the implementation uses a doubly linked list.</p>\n<p>There is an open Request For Enhancement about this:</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4848853\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=4848853</a></p>\n<p>Mark Peters links to functionality available in guava, though their reverse list actually generates a reverse list.</p>\n"},{"tags":[],"owner":{"account_id":208548,"reputation":4277,"user_id":459093,"display_name":"Gaurav Saxena"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1287001206,"creation_date":1286999685,"answer_id":3927475,"question_id":3927355,"body_markdown":"Sets are, by definition, independent of order. Thus, Set doesn&#39;t have add(int , Object) method available. \r\n\r\nThis is also true of LinkedHashSet [http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html][1]\r\n\r\nLinkedHashSet maintains insertion order and thus all elements are added at the end of the linked list. This is achieved using the LinkedHashMap. You can have a look at the method linkEntry in LinkedHashMap [http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html][2]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\r\n  [2]: http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\r\n\r\n**Edit: in response to edited question**\r\n\r\nThere is no API method available to do this. But you can do the following\r\n\r\n 1. Add Set to a List using new `ArrayList(Set)`\r\n 2. Use `Collections.reverse(List)`\r\n 3. Iterate this list","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Sets are, by definition, independent of order. Thus, Set doesn't have add(int , Object) method available. </p>\n\n<p>This is also true of LinkedHashSet <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html</a></p>\n\n<p>LinkedHashSet maintains insertion order and thus all elements are added at the end of the linked list. This is achieved using the LinkedHashMap. You can have a look at the method linkEntry in LinkedHashMap <a href=\"http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\" rel=\"noreferrer\">http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html</a></p>\n\n<p><strong>Edit: in response to edited question</strong></p>\n\n<p>There is no API method available to do this. But you can do the following</p>\n\n<ol>\n<li>Add Set to a List using new <code>ArrayList(Set)</code></li>\n<li>Use <code>Collections.reverse(List)</code></li>\n<li>Iterate this list</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":217125,"reputation":1717,"user_id":472772,"accept_rate":78,"display_name":"Stas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287000326,"creation_date":1287000326,"answer_id":3927561,"question_id":3927355,"body_markdown":"As already mentioned, LinkedHashSet is build on LinkedHashMap, which is built on HashMap :) Javadocs says that it takes constant time to add an element into HashMap, assuming that your hash function is implemented properly. If your hash function is not implemented well, it may take up to O(n). \r\nIteration backwards in not supported at this moment.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>As already mentioned, LinkedHashSet is build on LinkedHashMap, which is built on HashMap :) Javadocs says that it takes constant time to add an element into HashMap, assuming that your hash function is implemented properly. If your hash function is not implemented well, it may take up to O(n). \nIteration backwards in not supported at this moment.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229441,"creation_date":1691905864,"answer_id":76892093,"question_id":3927355,"body_markdown":"Java 21 added the [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)) method to `LinkedHashSet`, which adds an element to the start of the set.\r\n\r\n&gt; Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> method to <code>LinkedHashSet</code>, which adds an element to the start of the set.</p>\n<blockquote>\n<p>Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.</p>\n</blockquote>\n"}],"owner":{"account_id":110195,"reputation":38771,"user_id":291701,"accept_rate":66,"display_name":"user291701"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9733,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":3927475,"answer_count":6,"score":3,"last_activity_date":1695229441,"creation_date":1286998851,"question_id":3927355,"body_markdown":"I&#39;m using LinkedHashSet. I want to insert items at the 0th position, like:\r\n\r\n    Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;();\r\n    for (int i = 0; i &lt; n; i++) {\r\n        set.add(0, &quot;blah&quot; + i);\r\n    }\r\n\r\nI&#39;m not sure how linked hash set is implemented, is inserting going to physically move all addresses of current items, or is it the same cost as inserting as in a linked-list implementation?\r\n\r\nThank you\r\n\r\n------ Edit ---------------\r\n\r\nComplete mess up by me, was referencing ArrayList docs. The Set interface has no add(index, object) method. Is there a way to iterate over the set backwards then? Right now to iterate I&#39;m doing:\r\n\r\n    for (String it : set) {\r\n    }\r\n\r\ncan we do that in reverse?\r\n\r\nThanks","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>I'm using LinkedHashSet. I want to insert items at the 0th position, like:</p>\n\n<pre><code>Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;();\nfor (int i = 0; i &lt; n; i++) {\n    set.add(0, \"blah\" + i);\n}\n</code></pre>\n\n<p>I'm not sure how linked hash set is implemented, is inserting going to physically move all addresses of current items, or is it the same cost as inserting as in a linked-list implementation?</p>\n\n<p>Thank you</p>\n\n<p>------ Edit ---------------</p>\n\n<p>Complete mess up by me, was referencing ArrayList docs. The Set interface has no add(index, object) method. Is there a way to iterate over the set backwards then? Right now to iterate I'm doing:</p>\n\n<pre><code>for (String it : set) {\n}\n</code></pre>\n\n<p>can we do that in reverse?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","list","java-8","java-stream"],"comments":[{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":12,"creation_date":1391622889,"post_id":21426843,"comment_id":32606762,"body_markdown":"Guava provides `Iterables.getLast` which takes Iterable but is optimized to work with `List`. A pet peeve is that it doesn&#39;t have `getFirst`. The `Stream` API in general is horribly anal, omitting lots of convenience methods. C#&#39;s LINQ, by constrast, is happy to provide `.Last()` and even `.Last(Func&lt;T,Boolean&gt; predicate)`, even though it supports infinite Enumerables too.","body":"Guava provides <code>Iterables.getLast</code> which takes Iterable but is optimized to work with <code>List</code>. A pet peeve is that it doesn&#39;t have <code>getFirst</code>. The <code>Stream</code> API in general is horribly anal, omitting lots of convenience methods. C#&#39;s LINQ, by constrast, is happy to provide <code>.Last()</code> and even <code>.Last(Func&lt;T,Boolean&gt; predicate)</code>, even though it supports infinite Enumerables too."},{"owner":{"account_id":2452410,"reputation":2272,"user_id":2138356,"accept_rate":88,"display_name":"fasth"},"score":0,"creation_date":1427078999,"post_id":21426843,"comment_id":46616936,"body_markdown":"@AleksandrDubinsky upvoted, but one note for readers. `Stream` API is not fully comparable to `LINQ` since both done in a very different paradigm. It is not worse or better it is just different. And definitely some methods are absent not because oracle devs are incompetent or mean :)","body":"@AleksandrDubinsky upvoted, but one note for readers. <code>Stream</code> API is not fully comparable to <code>LINQ</code> since both done in a very different paradigm. It is not worse or better it is just different. And definitely some methods are absent not because oracle devs are incompetent or mean :)"},{"owner":{"account_id":100622,"reputation":3010,"user_id":271149,"accept_rate":90,"display_name":"quantum"},"score":1,"creation_date":1433523003,"post_id":21426843,"comment_id":49405615,"body_markdown":"For a true one-liner, [this thread](http://stackoverflow.com/questions/27547519/most-efficient-way-to-get-the-last-element-of-a-stream) may be of use.","body":"For a true one-liner, <a href=\"http://stackoverflow.com/questions/27547519/most-efficient-way-to-get-the-last-element-of-a-stream\">this thread</a> may be of use."}],"answers":[{"tags":[],"owner":{"account_id":1370027,"reputation":49110,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"down_vote_count":0,"up_vote_count":254,"is_accepted":true,"score":254,"last_activity_date":1547520841,"creation_date":1391026384,"answer_id":21441634,"question_id":21426843,"body_markdown":"It is possible to get the last element with the method [Stream::reduce][1]. The following listing contains a minimal example for the general case:\r\n\r\n    Stream&lt;T&gt; stream = ...; // sequential or parallel stream\r\n    Optional&lt;T&gt; last = stream.reduce((first, second) -&gt; second);\r\n\r\nThis implementations works for all [ordered streams][2] (including streams created from [Lists][3]). For [unordered][4] streams it is for obvious reasons unspecified which element will be returned.\r\n\r\nThe implementation works for both **sequential** and **parallel streams**. That might be surprising at first glance, and unfortunately the documentation doesn&#39;t state it explicitly. However, it is an important feature of streams, and I try to clarify it:\r\n\r\n- The Javadoc for the method [Stream::reduce][1] states, that it _&quot;is **not** constrained to execute **sequentially**&quot;_.\r\n- The Javadoc also requires that the _&quot;accumulator function must be an **associative**, **non-interfering**, **stateless** function for combining two values&quot;_, which is obviously the case for the lambda expression `(first, second) -&gt; second`.\r\n- The Javadoc for [reduction operations][5] states: _&quot;The streams classes have multiple forms of general reduction operations, called [reduce()][1] and [collect()][6] [..]&quot;_ and _&quot;a properly constructed reduce operation is **inherently parallelizable**, so long as the function(s) used to process the elements are [associative][7] and [stateless][8].&quot;_\r\n\r\nThe documentation for the closely related [Collectors][9] is even more explicit: _&quot;To ensure that **sequential** and **parallel executions** produce **equivalent results**, the collector functions must satisfy an identity and an [associativity][7] constraints.&quot;_\r\n\r\n---\r\n\r\nBack to the original question: The following code stores a reference to the last element in the variable `last` and throws an exception if the stream is empty. The complexity is linear in the length of the stream.\r\n\r\n    CArea last = data.careas\r\n                     .stream()\r\n                     .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                     .reduce((first, second) -&gt; second).get();\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Ordering\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/List.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#unordered--\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\r\n  [8]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#NonInterfering\r\n  [9]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html","title":"Get last element of Stream/List in a one-liner","body":"<p>It is possible to get the last element with the method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">Stream::reduce</a>. The following listing contains a minimal example for the general case:</p>\n\n<pre><code>Stream&lt;T&gt; stream = ...; // sequential or parallel stream\nOptional&lt;T&gt; last = stream.reduce((first, second) -&gt; second);\n</code></pre>\n\n<p>This implementations works for all <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Ordering\" rel=\"noreferrer\">ordered streams</a> (including streams created from <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/List.html\" rel=\"noreferrer\">Lists</a>). For <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#unordered--\" rel=\"noreferrer\">unordered</a> streams it is for obvious reasons unspecified which element will be returned.</p>\n\n<p>The implementation works for both <strong>sequential</strong> and <strong>parallel streams</strong>. That might be surprising at first glance, and unfortunately the documentation doesn't state it explicitly. However, it is an important feature of streams, and I try to clarify it:</p>\n\n<ul>\n<li>The Javadoc for the method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">Stream::reduce</a> states, that it <em>\"is <strong>not</strong> constrained to execute <strong>sequentially</strong>\"</em>.</li>\n<li>The Javadoc also requires that the <em>\"accumulator function must be an <strong>associative</strong>, <strong>non-interfering</strong>, <strong>stateless</strong> function for combining two values\"</em>, which is obviously the case for the lambda expression <code>(first, second) -&gt; second</code>.</li>\n<li>The Javadoc for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"noreferrer\">reduction operations</a> states: <em>\"The streams classes have multiple forms of general reduction operations, called <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">reduce()</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-\" rel=\"noreferrer\">collect()</a> [..]\"</em> and <em>\"a properly constructed reduce operation is <strong>inherently parallelizable</strong>, so long as the function(s) used to process the elements are <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\" rel=\"noreferrer\">associative</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#NonInterfering\" rel=\"noreferrer\">stateless</a>.\"</em></li>\n</ul>\n\n<p>The documentation for the closely related <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"noreferrer\">Collectors</a> is even more explicit: <em>\"To ensure that <strong>sequential</strong> and <strong>parallel executions</strong> produce <strong>equivalent results</strong>, the collector functions must satisfy an identity and an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\" rel=\"noreferrer\">associativity</a> constraints.\"</em></p>\n\n<hr>\n\n<p>Back to the original question: The following code stores a reference to the last element in the variable <code>last</code> and throws an exception if the stream is empty. The complexity is linear in the length of the stream.</p>\n\n<pre><code>CArea last = data.careas\n                 .stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .reduce((first, second) -&gt; second).get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1831014,"reputation":1670,"user_id":1662412,"accept_rate":75,"display_name":"Peti"},"down_vote_count":2,"up_vote_count":56,"is_accepted":false,"score":54,"last_activity_date":1444203293,"creation_date":1444203293,"answer_id":32986329,"question_id":21426843,"body_markdown":"If you have a Collection (or more general an Iterable) you can use Google Guava&#39;s \r\n\r\n    Iterables.getLast(myIterable)\r\n\r\nas handy oneliner.","title":"Get last element of Stream/List in a one-liner","body":"<p>If you have a Collection (or more general an Iterable) you can use Google Guava's </p>\n\n<pre><code>Iterables.getLast(myIterable)\n</code></pre>\n\n<p>as handy oneliner.</p>\n"},{"tags":[],"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"down_vote_count":9,"up_vote_count":26,"is_accepted":false,"score":17,"last_activity_date":1623710514,"creation_date":1504079280,"answer_id":45954796,"question_id":21426843,"body_markdown":"One liner (no need for stream;):\r\n\r\n    Object lastElement = list.isEmpty() ? null : list.get(list.size()-1);","title":"Get last element of Stream/List in a one-liner","body":"<p>One liner (no need for stream;):</p>\n<pre><code>Object lastElement = list.isEmpty() ? null : list.get(list.size()-1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3375164,"reputation":81,"user_id":2833429,"display_name":"Parag Vaidya"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530615002,"creation_date":1530615002,"answer_id":51152724,"question_id":21426843,"body_markdown":"You can also use skip() function as below...\r\n\r\n    long count = data.careas.count();\r\n    CArea last = data.careas.stream().skip(count - 1).findFirst().get();\r\n\r\nit&#39;s super simple to use.","title":"Get last element of Stream/List in a one-liner","body":"<p>You can also use skip() function as below...</p>\n\n<pre><code>long count = data.careas.count();\nCArea last = data.careas.stream().skip(count - 1).findFirst().get();\n</code></pre>\n\n<p>it's super simple to use.</p>\n"},{"tags":[],"owner":{"account_id":9490046,"reputation":4121,"user_id":7055206,"accept_rate":56,"display_name":"k13i"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1557253476,"creation_date":1557253476,"answer_id":56028497,"question_id":21426843,"body_markdown":"Guava has dedicated method for this case:\r\n\r\n    Stream&lt;T&gt; stream = ...;\r\n    Optional&lt;T&gt; lastItem = Streams.findLast(stream);\r\nIt&#39;s equivalent to `stream.reduce((a, b) -&gt; b)` but creators claim it has much better performance.\r\n\r\nFrom [documentation][1]:\r\n\r\n&gt; This method&#39;s runtime will be between O(log n) and O(n), performing\r\n&gt; better on efficiently splittable streams.\r\n\r\nIt&#39;s worth to mention that if stream is unordered this method behaves like `findAny()`.\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#findLast-java.util.stream.Stream-","title":"Get last element of Stream/List in a one-liner","body":"<p>Guava has dedicated method for this case:</p>\n\n<pre><code>Stream&lt;T&gt; stream = ...;\nOptional&lt;T&gt; lastItem = Streams.findLast(stream);\n</code></pre>\n\n<p>It's equivalent to <code>stream.reduce((a, b) -&gt; b)</code> but creators claim it has much better performance.</p>\n\n<p>From <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#findLast-java.util.stream.Stream-\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>This method's runtime will be between O(log n) and O(n), performing\n  better on efficiently splittable streams.</p>\n</blockquote>\n\n<p>It's worth to mention that if stream is unordered this method behaves like <code>findAny()</code>.</p>\n"},{"tags":[],"owner":{"account_id":6000028,"reputation":677,"user_id":4713594,"display_name":"Himanshu Ahire"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1588697460,"creation_date":1588697460,"answer_id":61618504,"question_id":21426843,"body_markdown":"If you need to get the last N number of elements. Closure can be used.\r\nThe below code maintains an external queue of fixed size until, the stream reaches the end.\r\n\r\n        final Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\r\n        final int N=5;\r\n        list.stream().peek((z) -&gt; {\r\n            queue.offer(z);\r\n            if (queue.size() &gt; N)\r\n                queue.poll();\r\n        }).count();\r\n\r\nAnother option could be to use reduce operation using identity as a Queue.\r\n\r\n        final int lastN=3;\r\n        Queue&lt;Integer&gt; reduce1 = list.stream()\r\n        .reduce( \r\n            (Queue&lt;Integer&gt;)new LinkedList&lt;Integer&gt;(), \r\n            (m, n) -&gt; {\r\n                m.offer(n);\r\n                if (m.size() &gt; lastN)\r\n                   m.poll();\r\n                return m;\r\n        }, (m, n) -&gt; m);\r\n\r\n        System.out.println(&quot;reduce1 = &quot; + reduce1);","title":"Get last element of Stream/List in a one-liner","body":"<p>If you need to get the last N number of elements. Closure can be used.\nThe below code maintains an external queue of fixed size until, the stream reaches the end.</p>\n\n<pre><code>    final Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n    final int N=5;\n    list.stream().peek((z) -&gt; {\n        queue.offer(z);\n        if (queue.size() &gt; N)\n            queue.poll();\n    }).count();\n</code></pre>\n\n<p>Another option could be to use reduce operation using identity as a Queue.</p>\n\n<pre><code>    final int lastN=3;\n    Queue&lt;Integer&gt; reduce1 = list.stream()\n    .reduce( \n        (Queue&lt;Integer&gt;)new LinkedList&lt;Integer&gt;(), \n        (m, n) -&gt; {\n            m.offer(n);\n            if (m.size() &gt; lastN)\n               m.poll();\n            return m;\n    }, (m, n) -&gt; m);\n\n    System.out.println(\"reduce1 = \" + reduce1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11213388,"reputation":51,"user_id":11719375,"display_name":"sumit singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604462209,"creation_date":1604462209,"answer_id":64674044,"question_id":21426843,"body_markdown":"Another way to get the last element is by using sort.\r\n\r\n        Optional&lt;CArea&gt; num=data.careas.stream().sorted((a,b)-&gt;-1).findFirst();\r\n\r\n","title":"Get last element of Stream/List in a one-liner","body":"<p>Another way to get the last element is by using sort.</p>\n<pre><code>    Optional&lt;CArea&gt; num=data.careas.stream().sorted((a,b)-&gt;-1).findFirst();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10603787,"reputation":63,"user_id":7809939,"display_name":"elesg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1625716190,"creation_date":1625716190,"answer_id":68295391,"question_id":21426843,"body_markdown":"    list.stream().sorted(Comparator.comparing(obj::getSequence).reversed()).findFirst().get();\r\n\r\nreverse the order and get the first element from the list. here object has sequence number, Comparator provides multiple functionalities can be used as per logic.","title":"Get last element of Stream/List in a one-liner","body":"<pre><code>list.stream().sorted(Comparator.comparing(obj::getSequence).reversed()).findFirst().get();\n</code></pre>\n<p>reverse the order and get the first element from the list. here object has sequence number, Comparator provides multiple functionalities can be used as per logic.</p>\n"},{"tags":[],"owner":{"account_id":938378,"reputation":9,"user_id":966905,"display_name":"spyr01d"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654353625,"creation_date":1654352937,"answer_id":72500570,"question_id":21426843,"body_markdown":"One more approach. Pair will have first and last elements: \r\n\r\n        List&lt;Object&gt; pair = new ArrayList&lt;&gt;();\r\n        dataStream.ForEach(o -&gt; {\r\n            if (pair.size() == 0) {\r\n                pair.add(o);\r\n                pair.add(o);\r\n            }\r\n            pair.set(1, o);\r\n        });\r\n","title":"Get last element of Stream/List in a one-liner","body":"<p>One more approach. Pair will have first and last elements:</p>\n<pre><code>    List&lt;Object&gt; pair = new ArrayList&lt;&gt;();\n    dataStream.ForEach(o -&gt; {\n        if (pair.size() == 0) {\n            pair.add(o);\n            pair.add(o);\n        }\n        pair.set(1, o);\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1695229397,"creation_date":1691990316,"answer_id":76896422,"question_id":21426843,"body_markdown":"Java 21 added the [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()) method to the `List` interface, which returns the last element of the list.\r\n\r\n```lang-java\r\nCArea last = data.careas.stream()\r\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                 .collect(Collectors.toList())\r\n                 .getLast();\r\n```\r\n\r\nAlso added was the [`getFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()) method, which addresses your point about not having this functionality on the `List` interface being a pain.","title":"Get last element of Stream/List in a one-liner","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> method to the <code>List</code> interface, which returns the last element of the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CArea last = data.careas.stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .collect(Collectors.toList())\n                 .getLast();\n</code></pre>\n<p>Also added was the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()\" rel=\"nofollow noreferrer\"><code>getFirst()</code></a> method, which addresses your point about not having this functionality on the <code>List</code> interface being a pain.</p>\n"}],"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160379,"favorite_count":0,"down_vote_count":1,"up_vote_count":164,"accepted_answer_id":21441634,"answer_count":10,"score":163,"last_activity_date":1695229397,"creation_date":1390987507,"question_id":21426843,"body_markdown":"How can I get the last element of a stream or list in the following code?\r\n\r\nWhere `data.careas` is a `List&lt;CArea&gt;`:\r\n\r\n    CArea first = data.careas.stream()\r\n                      .filter(c -&gt; c.bbox.orientationHorizontal).findFirst().get();\r\n\r\n    CArea last = data.careas.stream()\r\n                     .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                     .collect(Collectors.toList()).; //how to?\r\n\r\nAs you can see getting the first element, with a certain `filter`, is not hard.\r\n\r\nHowever getting the last element in a one-liner is a real pain:\r\n\r\n- It seems I cannot obtain it directly from a `Stream`. (It would only make sense for finite streams)\r\n- It also seems that you cannot get things like `first()` and `last()` from the `List` interface, which is really a pain.\r\n\r\nI do not see any argument for not providing a `first()` and `last()` method in the `List` interface, as the elements in there, are ordered, and moreover the size is known.\r\n\r\nBut as per the original answer: How to get the last element of a finite `Stream`?\r\n\r\nPersonally, this is the closest I could get:\r\n\r\n    int lastIndex = data.careas.stream()\r\n            .filter(c -&gt; c.bbox.orientationHorizontal)\r\n            .mapToInt(c -&gt; data.careas.indexOf(c)).max().getAsInt();\r\n    CArea last = data.careas.get(lastIndex);\r\n\r\nHowever it does involve, using an `indexOf` on every element, which is most likely not you generally want as it can impair performance.","title":"Get last element of Stream/List in a one-liner","body":"<p>How can I get the last element of a stream or list in the following code?</p>\n\n<p>Where <code>data.careas</code> is a <code>List&lt;CArea&gt;</code>:</p>\n\n<pre><code>CArea first = data.careas.stream()\n                  .filter(c -&gt; c.bbox.orientationHorizontal).findFirst().get();\n\nCArea last = data.careas.stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .collect(Collectors.toList()).; //how to?\n</code></pre>\n\n<p>As you can see getting the first element, with a certain <code>filter</code>, is not hard.</p>\n\n<p>However getting the last element in a one-liner is a real pain:</p>\n\n<ul>\n<li>It seems I cannot obtain it directly from a <code>Stream</code>. (It would only make sense for finite streams)</li>\n<li>It also seems that you cannot get things like <code>first()</code> and <code>last()</code> from the <code>List</code> interface, which is really a pain.</li>\n</ul>\n\n<p>I do not see any argument for not providing a <code>first()</code> and <code>last()</code> method in the <code>List</code> interface, as the elements in there, are ordered, and moreover the size is known.</p>\n\n<p>But as per the original answer: How to get the last element of a finite <code>Stream</code>?</p>\n\n<p>Personally, this is the closest I could get:</p>\n\n<pre><code>int lastIndex = data.careas.stream()\n        .filter(c -&gt; c.bbox.orientationHorizontal)\n        .mapToInt(c -&gt; data.careas.indexOf(c)).max().getAsInt();\nCArea last = data.careas.get(lastIndex);\n</code></pre>\n\n<p>However it does involve, using an <code>indexOf</code> on every element, which is most likely not you generally want as it can impair performance.</p>\n"},{"tags":["java","collections"],"answers":[{"tags":[],"owner":{"account_id":3942908,"reputation":350,"user_id":3256585,"display_name":"JBWanscher"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514869486,"creation_date":1492211465,"answer_id":43420365,"question_id":43420337,"body_markdown":"In the case that first and last are the only elements you actually access I would suggest that you use a `java.util.Deque&lt;T&gt;` instead of a `List`.","title":"Java List addressing first and last elements","body":"<p>In the case that first and last are the only elements you actually access I would suggest that you use a <code>java.util.Deque&lt;T&gt;</code> instead of a <code>List</code>.</p>\n"},{"tags":[],"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1492211543,"creation_date":1492211543,"answer_id":43420380,"question_id":43420337,"body_markdown":"If you use `LinkedList` you can get the last and first elements.\r\n\r\n    LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\r\n    linkedList.add(&quot;element&quot;);\r\n    \r\n    String last = linkedList.getLast();\r\n    String first = linkedList.getFirst();\r\n\r\nBoth operations are constant time, but a `NoSuchElementException` will be thrown if the list is empty.\r\n","title":"Java List addressing first and last elements","body":"<p>If you use <code>LinkedList</code> you can get the last and first elements.</p>\n\n<pre><code>LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\nlinkedList.add(\"element\");\n\nString last = linkedList.getLast();\nString first = linkedList.getFirst();\n</code></pre>\n\n<p>Both operations are constant time, but a <code>NoSuchElementException</code> will be thrown if the list is empty.</p>\n"},{"tags":[],"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1492212832,"creation_date":1492212183,"answer_id":43420468,"question_id":43420337,"body_markdown":"I&#39;d prefer to use Google Guava&#39;s `Iterables` [util class][1];\r\n\r\n    Iterables.getFirst(myList);\r\n    Iterables.getLast(myList);\r\n\r\nOn top of this, it has a safe logic where you can give a default value in case the list is empty/null.\r\n\r\n    Iterables.getFirst(myList, defaultVal);\r\n    Iterables.getLast(myList, defaultVal);\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html","title":"Java List addressing first and last elements","body":"<p>I'd prefer to use Google Guava's <code>Iterables</code> <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html\" rel=\"nofollow noreferrer\">util class</a>;</p>\n\n<pre><code>Iterables.getFirst(myList);\nIterables.getLast(myList);\n</code></pre>\n\n<p>On top of this, it has a safe logic where you can give a default value in case the list is empty/null.</p>\n\n<pre><code>Iterables.getFirst(myList, defaultVal);\nIterables.getLast(myList, defaultVal);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695229348,"creation_date":1691990944,"answer_id":76896453,"question_id":43420337,"body_markdown":"Regarding retrieving the first and last elements, Java 21 added methods [`getFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()) and [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()) to the `List` interface.\r\n\r\n```lang-java\r\ncurr.getLast();\r\ncurr.getFirst();\r\n```\r\n","title":"Java List addressing first and last elements","body":"<p>Regarding retrieving the first and last elements, Java 21 added methods <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()\" rel=\"nofollow noreferrer\"><code>getFirst()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> to the <code>List</code> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>curr.getLast();\ncurr.getFirst();\n</code></pre>\n"}],"owner":{"account_id":53783,"reputation":2967,"user_id":160831,"accept_rate":75,"display_name":"Pradyot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":976,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":43420380,"answer_count":4,"score":3,"last_activity_date":1695229348,"creation_date":1492211203,"question_id":43420337,"body_markdown":"Is there any better way to access the first and last locations on a java list other than\r\n\r\n    curr.set(curr.size()-1, 10);\r\n    curr.get(curr.size()-1);\r\n    curr.set(0, 10);\r\n    curr.get(0);\r\nWhere curr can be assumed to be a list.\r\n","title":"Java List addressing first and last elements","body":"<p>Is there any better way to access the first and last locations on a java list other than</p>\n\n<pre><code>curr.set(curr.size()-1, 10);\ncurr.get(curr.size()-1);\ncurr.set(0, 10);\ncurr.get(0);\n</code></pre>\n\n<p>Where curr can be assumed to be a list.</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1237241448,"post_id":652311,"comment_id":465647,"body_markdown":"You mean, you need to iterate it forwards *and* backwards? Otherwise, just reverse your Comparator.","body":"You mean, you need to iterate it forwards <i>and</i> backwards? Otherwise, just reverse your Comparator."}],"answers":[{"tags":[],"owner":{"account_id":28164,"reputation":60109,"user_id":74939,"display_name":"Stephan202"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1237242094,"creation_date":1237241568,"answer_id":652341,"question_id":652311,"body_markdown":"You could define a SortedMap such as a [TreeMap][1] with a custom [Comparator][2] that reverses the sorting order. If you need to iterate in both directions, then maybe it&#39;s feasible to keep *two* copies of the data structure in memory?\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/TreeMap.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Comparator.html","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>You could define a SortedMap such as a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\">TreeMap</a> with a custom <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a> that reverses the sorting order. If you need to iterate in both directions, then maybe it's feasible to keep <em>two</em> copies of the data structure in memory?</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1237328242,"creation_date":1237241832,"answer_id":652359,"question_id":652311,"body_markdown":"A faster way to iterate a collection is to take an array copy of it. This can be iterated forward and backwards without creating an object or even a method call.  The downside is you need to update it as well as your collection whenever it changes.\r\n\r\nIn the following example, it takes an average of 1,208 ns to iterate over 1000 element either forward or backward.\r\n\r\n    import java.util.Comparator;\r\n    import java.util.Random;\r\n    import java.util.NavigableSet;\r\n    import java.util.TreeSet;\r\n    \r\n    /*\r\n    Average time for iteration of 1000 elements was 1,208 ns\r\n    */\r\n    public class Main {\r\n        public static void main(String... args) {\r\n            doPerfTest(true);\r\n            doPerfTest(false);\r\n        }\r\n    \r\n        private static void doPerfTest(boolean warmup) {\r\n            NavigableSet&lt;MyData&gt; set = new TreeSet&lt;MyData&gt;(new MyCompataror());\r\n            Random random = new Random();\r\n            for (int i = 0; i &lt; 1000; i++) {\r\n                set.add(new MyData(&quot;text-&quot; + random.nextLong(), random.nextInt()));\r\n            }\r\n            MyData[] myDatas = set.toArray(new MyData[set.size()]);\r\n            long start = System.nanoTime();\r\n            final int runs = 500 * 1000;\r\n            for (int i = 0; i &lt; runs; i+=2) {\r\n                // forward iteration\r\n                for (MyData md : myDatas) {\r\n    \r\n                }\r\n                // reverse iteration\r\n                for (int j = myDatas.length - 1; j &gt;= 0; j--) {\r\n                    MyData md = myDatas[j];\r\n                }\r\n            }\r\n            long time = System.nanoTime() - start;\r\n            if (!warmup)\r\n                System.out.printf(&quot;Average time for iteration of 1000 elements was %,d ns&quot;, time / runs);\r\n        }\r\n    \r\n        static class MyCompataror implements Comparator&lt;MyData&gt; {\r\n            public int compare(MyData o1, MyData o2) {\r\n                int cmp = o1.text.compareTo(o2.text);\r\n                if (cmp != 0)\r\n                    return cmp;\r\n                return o1.value &gt; o2.value ? +1 :\r\n                        o1.value &lt; o2.value ? -1 : 0;\r\n            }\r\n        }\r\n    \r\n        static class MyData {\r\n            String text;\r\n            int value;\r\n    \r\n            MyData(String text, int value) {\r\n                this.text = text;\r\n                this.value = value;\r\n            }\r\n        }\r\n    }\r\n\r\nNow replace the main loop with and the average time becomes 20,493.\r\n\r\n    // forward iteration\r\n    for(Iterator&lt;MyData&gt; it = set.iterator(); it.hasNext();) {\r\n        MyData md = it.next();\r\n    }\r\n    // reverse iteration\r\n    for(Iterator&lt;MyData&gt; it = set.descendingIterator(); it.hasNext();) {\r\n        MyData md = it.next();\r\n    }\r\n\r\nNow lets compare this with taking a copy every time (which I have stated is not as optimal as taking a copy only when changed), the time drops to 15,134 ns!\r\n\r\nSo using NavigableSet could be the **slowest** of the three options discussed.\r\n\r\n\r\n","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>A faster way to iterate a collection is to take an array copy of it. This can be iterated forward and backwards without creating an object or even a method call.  The downside is you need to update it as well as your collection whenever it changes.</p>\n\n<p>In the following example, it takes an average of 1,208 ns to iterate over 1000 element either forward or backward.</p>\n\n<pre><code>import java.util.Comparator;\nimport java.util.Random;\nimport java.util.NavigableSet;\nimport java.util.TreeSet;\n\n/*\nAverage time for iteration of 1000 elements was 1,208 ns\n*/\npublic class Main {\n    public static void main(String... args) {\n        doPerfTest(true);\n        doPerfTest(false);\n    }\n\n    private static void doPerfTest(boolean warmup) {\n        NavigableSet&lt;MyData&gt; set = new TreeSet&lt;MyData&gt;(new MyCompataror());\n        Random random = new Random();\n        for (int i = 0; i &lt; 1000; i++) {\n            set.add(new MyData(\"text-\" + random.nextLong(), random.nextInt()));\n        }\n        MyData[] myDatas = set.toArray(new MyData[set.size()]);\n        long start = System.nanoTime();\n        final int runs = 500 * 1000;\n        for (int i = 0; i &lt; runs; i+=2) {\n            // forward iteration\n            for (MyData md : myDatas) {\n\n            }\n            // reverse iteration\n            for (int j = myDatas.length - 1; j &gt;= 0; j--) {\n                MyData md = myDatas[j];\n            }\n        }\n        long time = System.nanoTime() - start;\n        if (!warmup)\n            System.out.printf(\"Average time for iteration of 1000 elements was %,d ns\", time / runs);\n    }\n\n    static class MyCompataror implements Comparator&lt;MyData&gt; {\n        public int compare(MyData o1, MyData o2) {\n            int cmp = o1.text.compareTo(o2.text);\n            if (cmp != 0)\n                return cmp;\n            return o1.value &gt; o2.value ? +1 :\n                    o1.value &lt; o2.value ? -1 : 0;\n        }\n    }\n\n    static class MyData {\n        String text;\n        int value;\n\n        MyData(String text, int value) {\n            this.text = text;\n            this.value = value;\n        }\n    }\n}\n</code></pre>\n\n<p>Now replace the main loop with and the average time becomes 20,493.</p>\n\n<pre><code>// forward iteration\nfor(Iterator&lt;MyData&gt; it = set.iterator(); it.hasNext();) {\n    MyData md = it.next();\n}\n// reverse iteration\nfor(Iterator&lt;MyData&gt; it = set.descendingIterator(); it.hasNext();) {\n    MyData md = it.next();\n}\n</code></pre>\n\n<p>Now lets compare this with taking a copy every time (which I have stated is not as optimal as taking a copy only when changed), the time drops to 15,134 ns!</p>\n\n<p>So using NavigableSet could be the <strong>slowest</strong> of the three options discussed.</p>\n"},{"tags":[],"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"down_vote_count":2,"up_vote_count":28,"is_accepted":true,"score":26,"last_activity_date":1237241921,"creation_date":1237241921,"answer_id":652365,"question_id":652311,"body_markdown":"In Java 1.6 you can use &lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/util/NavigableSet.html&quot;&gt;NavigableSet&lt;/a&gt;.","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>In Java 1.6 you can use <a href=\"http://java.sun.com/javase/6/docs/api/java/util/NavigableSet.html\" rel=\"noreferrer\">NavigableSet</a>.</p>\n"},{"tags":[],"owner":{"account_id":1818620,"reputation":318,"user_id":1653195,"display_name":"user1653195"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1353319073,"creation_date":1353319073,"answer_id":13451372,"question_id":652311,"body_markdown":"\r\n\r\nuse this before you fill your map :\r\n\r\n    SortedMap sortedMap = new TreeMap(java.util.Collections.reverseOrder());","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>use this before you fill your map :</p>\n\n<pre><code>SortedMap sortedMap = new TreeMap(java.util.Collections.reverseOrder());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229276,"creation_date":1692081009,"answer_id":76903796,"question_id":652311,"body_markdown":"Java 21 added the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedMap.html#reversed()) method to `SortedMap`, which returns a reversed view of the map.\r\n\r\n```lang-java\r\nfor (Map.Entry&lt;String, Integer&gt; entry : sortedMap.reversed().entrySet()) {\r\n  // ...\r\n}\r\n```","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method to <code>SortedMap</code>, which returns a reversed view of the map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Map.Entry&lt;String, Integer&gt; entry : sortedMap.reversed().entrySet()) {\n  // ...\n}\n</code></pre>\n"}],"owner":{"account_id":27967,"reputation":2654,"user_id":74275,"accept_rate":94,"display_name":"Alexander Temerev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30696,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":652365,"answer_count":5,"score":21,"last_activity_date":1695229276,"creation_date":1237241122,"question_id":652311,"body_markdown":"I need to iterate through SortedMap&#39;s entry set (which is a SortedSet) backwards. The code I&#39;m writing is extremely performance-sensitive, as it&#39;s going to be called from many places thousands times per second, maybe more. Any advice on doing it the fastest way?","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>I need to iterate through SortedMap's entry set (which is a SortedSet) backwards. The code I'm writing is extremely performance-sensitive, as it's going to be called from many places thousands times per second, maybe more. Any advice on doing it the fastest way?</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":85022,"reputation":13917,"user_id":237321,"accept_rate":75,"display_name":"x4u"},"score":12,"creation_date":1264003237,"post_id":2102499,"comment_id":2036632,"body_markdown":"What&#39;s so bad about using an explicit index to iterate over a indexed data structure? At least it shows you what&#39;s exactly going on. For iterating backwards I always the following slightly shorter idiom: `for (int i = nodes.size(); --i &gt;= 0;)`","body":"What&#39;s so bad about using an explicit index to iterate over a indexed data structure? At least it shows you what&#39;s exactly going on. For iterating backwards I always the following slightly shorter idiom: <code>for (int i = nodes.size(); --i &gt;= 0;)</code>"},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":5,"creation_date":1264003482,"post_id":2102499,"comment_id":2036671,"body_markdown":"Nothing particularly, I&#39;d just rather program to an interface and not know about what kind of list I&#39;m using. Though I like your short hand greatly. (+1 comment)","body":"Nothing particularly, I&#39;d just rather program to an interface and not know about what kind of list I&#39;m using. Though I like your short hand greatly. (+1 comment)"},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":1,"creation_date":1264005434,"post_id":2102499,"comment_id":2037026,"body_markdown":"@x4u: There&#39;s not much in it although Iterator is fail-fast and also allows elements to be easily removed during the iteration.","body":"@x4u: There&#39;s not much in it although Iterator is fail-fast and also allows elements to be easily removed during the iteration."},{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":2,"creation_date":1264023384,"post_id":2102499,"comment_id":2039607,"body_markdown":"This class is broken, because the user might want to iterate a second time over the same Iterable, or the list might change between when the iterable is constructed and when it&#39;s iterated. I&#39;m sure for your purposes you&#39;ll just make sure not to do that, but it wouldn&#39;t be too hard to fix the code; or just steal the code from Guava (Apache 2.0 license):\n\nhttp://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/collect/Iterables.java#674","body":"This class is broken, because the user might want to iterate a second time over the same Iterable, or the list might change between when the iterable is constructed and when it&#39;s iterated. I&#39;m sure for your purposes you&#39;ll just make sure not to do that, but it wouldn&#39;t be too hard to fix the code; or just steal the code from Guava (Apache 2.0 license):  <a href=\"http://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/collect/Iterables.java#674\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/source/browse/trunk/src/co&zwnj;&#8203;m/&hellip;</a>"},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":1,"creation_date":1264097720,"post_id":2102499,"comment_id":2047097,"body_markdown":"Fair enough, but even the Guava one is susceptible to the same thing if I&#39;m reading it right. Were a user to keep a copy of the result from reverse, it&#39;d have the same problem.","body":"Fair enough, but even the Guava one is susceptible to the same thing if I&#39;m reading it right. Were a user to keep a copy of the result from reverse, it&#39;d have the same problem."},{"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"score":0,"creation_date":1362668322,"post_id":2102499,"comment_id":21548236,"body_markdown":"I suspect @KevinBourrillion&#39;s link pointed to the deprecated Iterables#reverse, for which I just found a fascinating discussion on Guava philosophy: https://code.google.com/p/guava-libraries/issues/detail?id=980","body":"I suspect @KevinBourrillion&#39;s link pointed to the deprecated Iterables#reverse, for which I just found a fascinating discussion on Guava philosophy: <a href=\"https://code.google.com/p/guava-libraries/issues/detail?id=980\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/issues/detail?id=980</a>"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1377761201,"post_id":2102499,"comment_id":27207360,"body_markdown":"@AllainLalonde I know this is an old question but I would just point out that this breaks the `Iterable` interface. It should return a new `Iterator` each time otherwise if you use the `Iterable` in two loops the second won&#39;t work as the `Iterator` is already spent.","body":"@AllainLalonde I know this is an old question but I would just point out that this breaks the <code>Iterable</code> interface. It should return a new <code>Iterator</code> each time otherwise if you use the <code>Iterable</code> in two loops the second won&#39;t work as the <code>Iterator</code> is already spent."},{"owner":{"account_id":87772,"reputation":376,"user_id":1368122,"accept_rate":80,"display_name":"Xian Stannard"},"score":1,"creation_date":1397730516,"post_id":2102499,"comment_id":35363406,"body_markdown":"@x4u iterating using an index can be slower. See the API doc for java.util.RandomAccess","body":"@x4u iterating using an index can be slower. See the API doc for java.util.RandomAccess"},{"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"score":0,"creation_date":1411576701,"post_id":2102499,"comment_id":40758009,"body_markdown":"`List.reverseIterator()` now exists, if it helps.","body":"<code>List.reverseIterator()</code> now exists, if it helps."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449643365,"post_id":2102499,"comment_id":56091603,"body_markdown":"@ChrisDennett do you have a link to it by chance?","body":"@ChrisDennett do you have a link to it by chance?"},{"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"score":0,"creation_date":1449653013,"post_id":2102499,"comment_id":56096819,"body_markdown":"Ah sorry, got mixed up - use `while(li.hasPrevious()) {\n  System.out.println(li.previous());\n}`. I think you could write a wrapper to put it in the normal form (using `next()` and `hasNext()`. I&#39;ll check if a wrapper already exists.","body":"Ah sorry, got mixed up - use <code>while(li.hasPrevious()) {   System.out.println(li.previous()); }</code>. I think you could write a wrapper to put it in the normal form (using <code>next()</code> and <code>hasNext()</code>. I&#39;ll check if a wrapper already exists."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449680479,"post_id":2102499,"comment_id":56115490,"body_markdown":"To the OP you should probably split your &quot;inline answer&quot; out into its own answer, so that comments left differentiate between your question and answer :) See also similar answer here: http://stackoverflow.com/a/1098153/32453","body":"To the OP you should probably split your &quot;inline answer&quot; out into its own answer, so that comments left differentiate between your question and answer :) See also similar answer here: <a href=\"http://stackoverflow.com/a/1098153/32453\">stackoverflow.com/a/1098153/32453</a>"},{"owner":{"account_id":2068268,"reputation":42279,"user_id":1843331,"accept_rate":100,"display_name":"Tim"},"score":0,"creation_date":1458313952,"post_id":2102499,"comment_id":59820180,"body_markdown":"I removed your solution from the question body. Answers don&#39;t belong in questions. The solution proposed is represented in multiple other answers as well, which is why I did not convert it to a community wiki answer.","body":"I removed your solution from the question body. Answers don&#39;t belong in questions. The solution proposed is represented in multiple other answers as well, which is why I did not convert it to a community wiki answer."},{"owner":{"account_id":1673709,"reputation":1424,"user_id":1539652,"display_name":"user1539652"},"score":0,"creation_date":1524142799,"post_id":2102499,"comment_id":86859068,"body_markdown":"@x4u you can get ConcurrentModificationException  when you use loop with explicit index and remove an element inside the loop.","body":"@x4u you can get ConcurrentModificationException  when you use loop with explicit index and remove an element inside the loop."}],"answers":[{"tags":[],"owner":{"account_id":51415,"reputation":24508,"user_id":153621,"accept_rate":88,"display_name":"nanda"},"down_vote_count":13,"up_vote_count":15,"is_accepted":false,"score":2,"last_activity_date":1529581432,"creation_date":1264001504,"answer_id":2102524,"question_id":2102499,"body_markdown":"Create a custom `reverseIterable`.  ","title":"Iterating through a list in reverse order in java","body":"<p>Create a custom <code>reverseIterable</code>.  </p>\n"},{"tags":[],"owner":{"account_id":13299,"reputation":30181,"user_id":26620,"accept_rate":83,"display_name":"Kevin"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1457374800,"creation_date":1264001584,"answer_id":2102539,"question_id":2102499,"body_markdown":"Option 1: Have you thought about reversing the List with [Collections#reverse()][1] and then using foreach?\r\n\r\nOf course, you may also want to refactor your code such that the list is ordered correctly so you don&#39;t have to reverse it, which uses extra space/time.\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nOption 2: Alternatively, could you use a [Deque][2] instead of an ArrayList?  It will allow you to iterate forwards and backwards\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nOption 3: As others have suggested, you could write an Iterator that will go through the list in reverse, here is an example:\r\n\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    \r\n    public class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt;, Iterable&lt;T&gt; {\r\n        \r\n        private final List&lt;T&gt; list;\r\n        private int position;\r\n        \r\n        public ReverseIterator(List&lt;T&gt; list) {\r\n            this.list = list;\r\n            this.position = list.size() - 1;\r\n        }\r\n        \r\n        @Override\r\n        public Iterator&lt;T&gt; iterator() {\r\n            return this;\r\n        }\r\n    \r\n        @Override\r\n        public boolean hasNext() {\r\n            return position &gt;= 0;\r\n        }\r\n    \r\n        @Override\r\n        public T next() {\r\n            return list.get(position--);\r\n        }\r\n    \r\n        @Override\r\n        public void remove() {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    list.add(&quot;A&quot;);\r\n    list.add(&quot;B&quot;);\r\n    list.add(&quot;C&quot;);\r\n    list.add(&quot;D&quot;);\r\n    list.add(&quot;E&quot;);\r\n    \r\n    for (String s : new ReverseIterator&lt;String&gt;(list)) {\r\n        System.out.println(s);\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#reverse%28java.util.List%29\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Deque.html","title":"Iterating through a list in reverse order in java","body":"<p>Option 1: Have you thought about reversing the List with <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#reverse%28java.util.List%29\" rel=\"noreferrer\">Collections#reverse()</a> and then using foreach?</p>\n\n<p>Of course, you may also want to refactor your code such that the list is ordered correctly so you don't have to reverse it, which uses extra space/time.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Option 2: Alternatively, could you use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Deque.html\" rel=\"noreferrer\">Deque</a> instead of an ArrayList?  It will allow you to iterate forwards and backwards</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Option 3: As others have suggested, you could write an Iterator that will go through the list in reverse, here is an example:</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.List;\n\npublic class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt;, Iterable&lt;T&gt; {\n\n    private final List&lt;T&gt; list;\n    private int position;\n\n    public ReverseIterator(List&lt;T&gt; list) {\n        this.list = list;\n        this.position = list.size() - 1;\n    }\n\n    @Override\n    public Iterator&lt;T&gt; iterator() {\n        return this;\n    }\n\n    @Override\n    public boolean hasNext() {\n        return position &gt;= 0;\n    }\n\n    @Override\n    public T next() {\n        return list.get(position--);\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n}\n\n\nList&lt;String&gt; list = new ArrayList&lt;String&gt;();\nlist.add(\"A\");\nlist.add(\"B\");\nlist.add(\"C\");\nlist.add(\"D\");\nlist.add(\"E\");\n\nfor (String s : new ReverseIterator&lt;String&gt;(list)) {\n    System.out.println(s);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"down_vote_count":10,"up_vote_count":36,"is_accepted":false,"score":26,"last_activity_date":1264001670,"creation_date":1264001670,"answer_id":2102550,"question_id":2102499,"body_markdown":"I don&#39;t think it&#39;s possible using the for loop syntax.  The only thing I can suggest is to do something like:\r\n\r\n    Collections.reverse(list);\r\n    for (Object o : list) {\r\n      ...\r\n    }\r\n\r\n... but I wouldn&#39;t say this is &quot;cleaner&quot; given that it&#39;s going to be less efficient.","title":"Iterating through a list in reverse order in java","body":"<p>I don't think it's possible using the for loop syntax.  The only thing I can suggest is to do something like:</p>\n\n<pre><code>Collections.reverse(list);\nfor (Object o : list) {\n  ...\n}\n</code></pre>\n\n<p>... but I wouldn't say this is \"cleaner\" given that it's going to be less efficient.</p>\n"},{"tags":[],"owner":{"account_id":28214,"reputation":305260,"user_id":75170,"accept_rate":72,"display_name":"John Feminella"},"down_vote_count":0,"up_vote_count":473,"is_accepted":true,"score":473,"last_activity_date":1264002847,"creation_date":1264001691,"answer_id":2102552,"question_id":2102499,"body_markdown":"Try this:\r\n\r\n    // Substitute appropriate type.\r\n    ArrayList&lt;...&gt; a = new ArrayList&lt;...&gt;();\r\n    \r\n    // Add elements to list.\r\n    \r\n    // Generate an iterator. Start just after the last element.\r\n    ListIterator li = a.listIterator(a.size());\r\n    \r\n    // Iterate in reverse.\r\n    while(li.hasPrevious()) {\r\n      System.out.println(li.previous());\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>Try this:</p>\n\n<pre><code>// Substitute appropriate type.\nArrayList&lt;...&gt; a = new ArrayList&lt;...&gt;();\n\n// Add elements to list.\n\n// Generate an iterator. Start just after the last element.\nListIterator li = a.listIterator(a.size());\n\n// Iterate in reverse.\nwhile(li.hasPrevious()) {\n  System.out.println(li.previous());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1264005132,"creation_date":1264005132,"answer_id":2103037,"question_id":2102499,"body_markdown":"Here is an (untested) implementation of a `ReverseIterable`.  When `iterator()` is called it creates and returns a private `ReverseIterator` implementation, which simply maps calls to `hasNext()` to `hasPrevious()` and calls to `next()` are mapped to `previous()`.  It means you could iterate over an `ArrayList` in reverse as follows:\r\n\r\n    ArrayList&lt;String&gt; l = ...\r\n    for (String s : new ReverseIterable(l)) {\r\n      System.err.println(s);\r\n    }\r\n\r\n**Class Definition**\r\n\r\n    public class ReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\r\n      private static class ReverseIterator&lt;T&gt; implements Iterator {\r\n        private final ListIterator&lt;T&gt; it;\r\n    \r\n        public boolean hasNext() {\r\n          return it.hasPrevious();\r\n        }\r\n    \r\n        public T next() {\r\n          return it.previous();\r\n        }\r\n    \r\n        public void remove() {\r\n          it.remove();\r\n        }\r\n      }\r\n    \r\n      private final ArrayList&lt;T&gt; l;\r\n    \r\n      public ReverseIterable(ArrayList&lt;T&gt; l) {\r\n        this.l = l;\r\n      }\r\n    \r\n      public Iterator&lt;T&gt; iterator() {\r\n        return new ReverseIterator(l.listIterator(l.size()));\r\n      }\r\n    }\r\n\r\n","title":"Iterating through a list in reverse order in java","body":"<p>Here is an (untested) implementation of a <code>ReverseIterable</code>.  When <code>iterator()</code> is called it creates and returns a private <code>ReverseIterator</code> implementation, which simply maps calls to <code>hasNext()</code> to <code>hasPrevious()</code> and calls to <code>next()</code> are mapped to <code>previous()</code>.  It means you could iterate over an <code>ArrayList</code> in reverse as follows:</p>\n\n<pre><code>ArrayList&lt;String&gt; l = ...\nfor (String s : new ReverseIterable(l)) {\n  System.err.println(s);\n}\n</code></pre>\n\n<p><strong>Class Definition</strong></p>\n\n<pre><code>public class ReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\n  private static class ReverseIterator&lt;T&gt; implements Iterator {\n    private final ListIterator&lt;T&gt; it;\n\n    public boolean hasNext() {\n      return it.hasPrevious();\n    }\n\n    public T next() {\n      return it.previous();\n    }\n\n    public void remove() {\n      it.remove();\n    }\n  }\n\n  private final ArrayList&lt;T&gt; l;\n\n  public ReverseIterable(ArrayList&lt;T&gt; l) {\n    this.l = l;\n  }\n\n  public Iterator&lt;T&gt; iterator() {\n    return new ReverseIterator(l.listIterator(l.size()));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1264005420,"creation_date":1264005420,"answer_id":2103082,"question_id":2102499,"body_markdown":"Also found google collections [reverse][1] method.\r\n\r\n\r\n  [1]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#reverse(java.util.List)","title":"Iterating through a list in reverse order in java","body":"<p>Also found google collections <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#reverse(java.util.List)\" rel=\"nofollow noreferrer\">reverse</a> method.</p>\n"},{"tags":[],"owner":{"account_id":57077,"reputation":39235,"user_id":170974,"accept_rate":70,"display_name":"tangens"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1278955479,"creation_date":1278924759,"answer_id":3227002,"question_id":2102499,"body_markdown":"You could use the concrete class `LinkedList` instead of the general interface `List`. Then you have a [`descendingIterator`][1] for iterating with the reverse direction.\r\n\r\n    LinkedList&lt;String &gt; linkedList;\r\n    for( Iterator&lt;String &gt; it = linkedList.descendingIterator(); it.hasNext(); ) {\r\n        String text = it.next();\r\n    }\r\n\r\nDon&#39;t know why there is no `descendingIterator` with `ArrayList`...\r\n\r\n  [1]: http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/LinkedList.html#descendingIterator%28%29\r\n","title":"Iterating through a list in reverse order in java","body":"<p>You could use the concrete class <code>LinkedList</code> instead of the general interface <code>List</code>. Then you have a <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/LinkedList.html#descendingIterator%28%29\" rel=\"noreferrer\"><code>descendingIterator</code></a> for iterating with the reverse direction.</p>\n\n<pre><code>LinkedList&lt;String &gt; linkedList;\nfor( Iterator&lt;String &gt; it = linkedList.descendingIterator(); it.hasNext(); ) {\n    String text = it.next();\n}\n</code></pre>\n\n<p>Don't know why there is no <code>descendingIterator</code> with <code>ArrayList</code>...</p>\n"},{"tags":[],"owner":{"account_id":1472741,"reputation":31,"user_id":1422983,"display_name":"Ravi Kant Soni"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1340801168,"creation_date":1340800587,"answer_id":11226370,"question_id":2102499,"body_markdown":"Very simple Example:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    \r\n    list.add(&quot;ravi&quot;);\r\n    \r\n    list.add(&quot;kant&quot;);\r\n    \r\n    list.add(&quot;soni&quot;);\r\n    \r\n    // Iterate to disply : result will be as ---     ravi kant soni\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n    \r\n    //Now call this method\r\n    \r\n    Collections.reverse(list);\r\n    \r\n    // iterate and print index wise : result will be as ---     soni kant ravi\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>Very simple Example:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nlist.add(\"ravi\");\n\nlist.add(\"kant\");\n\nlist.add(\"soni\");\n\n// Iterate to disply : result will be as ---     ravi kant soni\n\nfor (String name : list) {\n  ...\n}\n\n//Now call this method\n\nCollections.reverse(list);\n\n// iterate and print index wise : result will be as ---     soni kant ravi\n\nfor (String name : list) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1472741,"reputation":31,"user_id":1422983,"display_name":"Ravi Kant Soni"},"down_vote_count":14,"up_vote_count":3,"is_accepted":false,"score":-11,"last_activity_date":1340806000,"creation_date":1340802937,"answer_id":11227109,"question_id":2102499,"body_markdown":"Reason : &quot;Don&#39;t know why there is no descendingIterator with ArrayList...&quot;\r\n\r\nSince array list doesnot keep the list in the same order as data has been added to list. So, never use Arraylist .\r\n\r\nLinked list will keep the data in same order of ADD to list.\r\n\r\nSo , above in my example, i used ArrayList() in order to make user to twist their mind and make them to workout something from their side.\r\n\r\nInstead of this\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\nUSE:\r\n\r\n    List&lt;String&gt; list = new LinkedList&lt;String&gt;();\r\n    \r\n    list.add(&quot;ravi&quot;);\r\n    \r\n    list.add(&quot;kant&quot;);\r\n    \r\n    list.add(&quot;soni&quot;);\r\n    \r\n    // Iterate to disply : result will be as ---     ravi kant soni\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n    \r\n    //Now call this method\r\n    \r\n    Collections.reverse(list);\r\n    \r\n    // iterate and print index wise : result will be as ---     soni kant ravi\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n\r\n\r\n\r\n","title":"Iterating through a list in reverse order in java","body":"<p>Reason : \"Don't know why there is no descendingIterator with ArrayList...\"</p>\n\n<p>Since array list doesnot keep the list in the same order as data has been added to list. So, never use Arraylist .</p>\n\n<p>Linked list will keep the data in same order of ADD to list.</p>\n\n<p>So , above in my example, i used ArrayList() in order to make user to twist their mind and make them to workout something from their side.</p>\n\n<p>Instead of this</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>USE:</p>\n\n<pre><code>List&lt;String&gt; list = new LinkedList&lt;String&gt;();\n\nlist.add(\"ravi\");\n\nlist.add(\"kant\");\n\nlist.add(\"soni\");\n\n// Iterate to disply : result will be as ---     ravi kant soni\n\nfor (String name : list) {\n  ...\n}\n\n//Now call this method\n\nCollections.reverse(list);\n\n// iterate and print index wise : result will be as ---     soni kant ravi\n\nfor (String name : list) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1407490129,"creation_date":1347141622,"answer_id":12334827,"question_id":2102499,"body_markdown":"To have code which looks like this:\r\n\r\n    List&lt;Item&gt; items;\r\n    ...\r\n    for (Item item : In.reverse(items))\r\n    {\r\n        ...\r\n    }\r\n\r\nPut this code into a file called &quot;In.java&quot;:\r\n\r\n    import java.util.*;\r\n\r\n    public enum In {;\r\n        public static final &lt;T&gt; Iterable&lt;T&gt; reverse(final List&lt;T&gt; list) {\r\n            return new ListReverseIterable&lt;T&gt;(list);\r\n        }\r\n\r\n        class ListReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\r\n            private final List&lt;T&gt; mList;\r\n\r\n            public ListReverseIterable(final List&lt;T&gt; list) {\r\n                mList = list;\r\n            }\r\n\r\n            public Iterator&lt;T&gt; iterator() {\r\n                return new Iterator&lt;T&gt;() {\r\n                    final ListIterator&lt;T&gt; it = mList.listIterator(mList.size());\r\n\r\n                    public boolean hasNext() {\r\n                        return it.hasPrevious();\r\n                    }\r\n                    public T next() {\r\n                        return it.previous();\r\n                    }\r\n                    public void remove() {\r\n                        it.remove();\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    }\r\n","title":"Iterating through a list in reverse order in java","body":"<p>To have code which looks like this:</p>\n\n<pre><code>List&lt;Item&gt; items;\n...\nfor (Item item : In.reverse(items))\n{\n    ...\n}\n</code></pre>\n\n<p>Put this code into a file called \"In.java\":</p>\n\n<pre><code>import java.util.*;\n\npublic enum In {;\n    public static final &lt;T&gt; Iterable&lt;T&gt; reverse(final List&lt;T&gt; list) {\n        return new ListReverseIterable&lt;T&gt;(list);\n    }\n\n    class ListReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\n        private final List&lt;T&gt; mList;\n\n        public ListReverseIterable(final List&lt;T&gt; list) {\n            mList = list;\n        }\n\n        public Iterator&lt;T&gt; iterator() {\n            return new Iterator&lt;T&gt;() {\n                final ListIterator&lt;T&gt; it = mList.listIterator(mList.size());\n\n                public boolean hasNext() {\n                    return it.hasPrevious();\n                }\n                public T next() {\n                    return it.previous();\n                }\n                public void remove() {\n                    it.remove();\n                }\n            };\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"down_vote_count":3,"up_vote_count":42,"is_accepted":false,"score":39,"last_activity_date":1518431621,"creation_date":1362668886,"answer_id":15274617,"question_id":2102499,"body_markdown":"[Guava][1] offers [`Lists#reverse(List)`][2] and [`ImmutableList#reverse()`][3]. As in most cases for Guava, the former delegates to the latter if the argument is an `ImmutableList`, so you can use the former in all cases.  These do not create new copies of the list but just &quot;reversed views&quot; of it.\r\n\r\nExample\r\n\r\n    List reversed = ImmutableList.copyOf(myList).reverse();\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained\r\n  [2]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\r\n  [3]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html#reverse--","title":"Iterating through a list in reverse order in java","body":"<p><a href=\"https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained\" rel=\"noreferrer\">Guava</a> offers <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\" rel=\"noreferrer\"><code>Lists#reverse(List)</code></a> and <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html#reverse--\" rel=\"noreferrer\"><code>ImmutableList#reverse()</code></a>. As in most cases for Guava, the former delegates to the latter if the argument is an <code>ImmutableList</code>, so you can use the former in all cases.  These do not create new copies of the list but just \"reversed views\" of it.</p>\n\n<p>Example</p>\n\n<pre><code>List reversed = ImmutableList.copyOf(myList).reverse();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1212298,"reputation":27075,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1563993131,"creation_date":1394465634,"answer_id":22304460,"question_id":2102499,"body_markdown":"You could use `ReverseListIterator` from Apache Commons-Collections:\r\n\r\nhttps://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\r\n","title":"Iterating through a list in reverse order in java","body":"<p>You could use <code>ReverseListIterator</code> from Apache Commons-Collections:</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html</a></p>\n"},{"tags":[],"owner":{"account_id":248860,"reputation":2568,"user_id":524504,"accept_rate":75,"display_name":"masterxilo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1401135053,"creation_date":1401135053,"answer_id":23877084,"question_id":2102499,"body_markdown":"As has been suggested at least twice, you can use `descendingIterator` with a `Deque`, in particular with a `LinkedList`. If you want to use the for-each loop (i.e., have an `Iterable`), you can construct and use a wraper like this:\r\n\r\n    import java.util.*;\r\n\r\n    public class Main {\r\n\r\n        public static class ReverseIterating&lt;T&gt; implements Iterable&lt;T&gt; {\r\n            private final LinkedList&lt;T&gt; list;\r\n\r\n            public ReverseIterating(LinkedList&lt;T&gt; list) {\r\n                this.list = list;\r\n            }\r\n\r\n            @Override\r\n            public Iterator&lt;T&gt; iterator() {\r\n                return list.descendingIterator();\r\n            }\r\n        }\r\n\r\n        public static void main(String... args) {\r\n            LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();\r\n            list.add(&quot;A&quot;);\r\n            list.add(&quot;B&quot;);\r\n            list.add(&quot;C&quot;);\r\n            list.add(&quot;D&quot;);\r\n            list.add(&quot;E&quot;);\r\n\r\n            for (String s : new ReverseIterating&lt;String&gt;(list)) {\r\n                System.out.println(s);\r\n            }\r\n        }\r\n    }\r\n ","title":"Iterating through a list in reverse order in java","body":"<p>As has been suggested at least twice, you can use <code>descendingIterator</code> with a <code>Deque</code>, in particular with a <code>LinkedList</code>. If you want to use the for-each loop (i.e., have an <code>Iterable</code>), you can construct and use a wraper like this:</p>\n\n<pre><code>import java.util.*;\n\npublic class Main {\n\n    public static class ReverseIterating&lt;T&gt; implements Iterable&lt;T&gt; {\n        private final LinkedList&lt;T&gt; list;\n\n        public ReverseIterating(LinkedList&lt;T&gt; list) {\n            this.list = list;\n        }\n\n        @Override\n        public Iterator&lt;T&gt; iterator() {\n            return list.descendingIterator();\n        }\n    }\n\n    public static void main(String... args) {\n        LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();\n        list.add(\"A\");\n        list.add(\"B\");\n        list.add(\"C\");\n        list.add(\"D\");\n        list.add(\"E\");\n\n        for (String s : new ReverseIterating&lt;String&gt;(list)) {\n            System.out.println(s);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1457376551,"creation_date":1401180609,"answer_id":23884932,"question_id":2102499,"body_markdown":"If the lists are fairly small so that performance is not a real issue, one can use the `reverse`-metod of the `Lists`-class in `Google Guava`. Yields pretty `for-each`-code, and the original list stays the same. Also, the reversed list is backed by the original list, so any change to the original list will be reflected in the reversed one.\r\n\r\n    import com.google.common.collect.Lists;\r\n\r\n    [...]\r\n\r\n    final List&lt;String&gt; myList = Lists.newArrayList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n    final List&lt;String&gt; myReverseList = Lists.reverse(myList);\r\n\r\n    System.out.println(myList);\r\n    System.out.println(myReverseList);\r\n\r\n    myList.add(&quot;four&quot;);\r\n\r\n    System.out.println(myList);\r\n    System.out.println(myReverseList);\r\n\r\nYields the following result:\r\n\r\n    [one, two, three]\r\n    [three, two, one]\r\n    [one, two, three, four]\r\n    [four, three, two, one]\r\n\r\n\r\nWhich means that reverse iteration of myList can be written as:\r\n\r\n    for (final String someString : Lists.reverse(myList)) {\r\n        //do something\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>If the lists are fairly small so that performance is not a real issue, one can use the <code>reverse</code>-metod of the <code>Lists</code>-class in <code>Google Guava</code>. Yields pretty <code>for-each</code>-code, and the original list stays the same. Also, the reversed list is backed by the original list, so any change to the original list will be reflected in the reversed one.</p>\n\n<pre><code>import com.google.common.collect.Lists;\n\n[...]\n\nfinal List&lt;String&gt; myList = Lists.newArrayList(\"one\", \"two\", \"three\");\nfinal List&lt;String&gt; myReverseList = Lists.reverse(myList);\n\nSystem.out.println(myList);\nSystem.out.println(myReverseList);\n\nmyList.add(\"four\");\n\nSystem.out.println(myList);\nSystem.out.println(myReverseList);\n</code></pre>\n\n<p>Yields the following result:</p>\n\n<pre><code>[one, two, three]\n[three, two, one]\n[one, two, three, four]\n[four, three, two, one]\n</code></pre>\n\n<p>Which means that reverse iteration of myList can be written as:</p>\n\n<pre><code>for (final String someString : Lists.reverse(myList)) {\n    //do something\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1532435880,"creation_date":1439910408,"answer_id":32076116,"question_id":2102499,"body_markdown":"This is an old question, but it&#39;s lacking a java8-friendly answer. Here are some ways of reverse-iterating the list, with the help of the Streaming API:\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 3, 7, 5));\r\n    list.stream().forEach(System.out::println); // 1 3 3 7 5\r\n\r\n    int size = list.size();\r\n\r\n    ListIterator&lt;Integer&gt; it = list.listIterator(size);\r\n    Stream.generate(it::previous).limit(size)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    ListIterator&lt;Integer&gt; it2 = list.listIterator(size);\r\n    Stream.iterate(it2.previous(), i -&gt; it2.previous()).limit(size)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    // If list is RandomAccess (i.e. an ArrayList)\r\n    IntStream.range(0, size).map(i -&gt; size - i - 1).map(list::get)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    // If list is RandomAccess (i.e. an ArrayList), less efficient due to sorting\r\n    IntStream.range(0, size).boxed().sorted(Comparator.reverseOrder())\r\n        .map(list::get).forEach(System.out::println); // 5 7 3 3 1\r\n","title":"Iterating through a list in reverse order in java","body":"<p>This is an old question, but it's lacking a java8-friendly answer. Here are some ways of reverse-iterating the list, with the help of the Streaming API:</p>\n\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 3, 7, 5));\nlist.stream().forEach(System.out::println); // 1 3 3 7 5\n\nint size = list.size();\n\nListIterator&lt;Integer&gt; it = list.listIterator(size);\nStream.generate(it::previous).limit(size)\n    .forEach(System.out::println); // 5 7 3 3 1\n\nListIterator&lt;Integer&gt; it2 = list.listIterator(size);\nStream.iterate(it2.previous(), i -&gt; it2.previous()).limit(size)\n    .forEach(System.out::println); // 5 7 3 3 1\n\n// If list is RandomAccess (i.e. an ArrayList)\nIntStream.range(0, size).map(i -&gt; size - i - 1).map(list::get)\n    .forEach(System.out::println); // 5 7 3 3 1\n\n// If list is RandomAccess (i.e. an ArrayList), less efficient due to sorting\nIntStream.range(0, size).boxed().sorted(Comparator.reverseOrder())\n    .map(list::get).forEach(System.out::println); // 5 7 3 3 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6671334,"reputation":1,"user_id":16078083,"display_name":"Rupesh Goyal"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622394665,"creation_date":1622394665,"answer_id":67763852,"question_id":2102499,"body_markdown":"    Valid for Java 9+\r\n    \r\n    List&lt;String&gt; strList = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);\r\n    \r\n    IntStream.iterate(strList.size() - 1, i -&gt; i &gt;= 0, i -&gt; --i)\r\n             .mapToObj(strList::get)\r\n             .forEach(System.out::println);","title":"Iterating through a list in reverse order in java","body":"<pre><code>Valid for Java 9+\n\nList&lt;String&gt; strList = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);\n\nIntStream.iterate(strList.size() - 1, i -&gt; i &gt;= 0, i -&gt; --i)\n         .mapToObj(strList::get)\n         .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24390162,"reputation":11,"user_id":18320250,"display_name":"Chengen Zhao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660718396,"creation_date":1660224709,"answer_id":73321568,"question_id":2102499,"body_markdown":"How about using DeQue:\r\n\r\n\r\n      var queue = new ArrayDeque&lt;&gt;(list);\r\n      while (!queue.isEmpty()) {\r\n        var first = reversed ? queue.removeLast() : queue.removeFirst();\r\n        var second = reversed ? queue.peekLast() : queue.peekFirst();\r\n        if (second != null) {\r\n          //your code goes here\r\n        }\r\n      }\r\n","title":"Iterating through a list in reverse order in java","body":"<p>How about using DeQue:</p>\n<pre><code>  var queue = new ArrayDeque&lt;&gt;(list);\n  while (!queue.isEmpty()) {\n    var first = reversed ? queue.removeLast() : queue.removeFirst();\n    var second = reversed ? queue.peekLast() : queue.peekFirst();\n    if (second != null) {\n      //your code goes here\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695229155,"creation_date":1691991149,"answer_id":76896466,"question_id":2102499,"body_markdown":"Java 21 added a [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method to `List`, which returns a reversed view of the list.  This can be used to iterate in reverse order.\r\n\r\n```lang-java\r\nfor (Node each : nodes.reversed()) {\r\n   ...\r\n}\r\n```","title":"Iterating through a list in reverse order in java","body":"<p>Java 21 added a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method to <code>List</code>, which returns a reversed view of the list.  This can be used to iterate in reverse order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Node each : nodes.reversed()) {\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270667,"favorite_count":0,"down_vote_count":0,"up_vote_count":273,"accepted_answer_id":2102552,"answer_count":18,"score":273,"last_activity_date":1695229155,"creation_date":1264001304,"question_id":2102499,"body_markdown":"I&#39;m migrating a piece of code to make use of generics. One argument for doing so is that the for loop is much cleaner than keeping track of indexes, or using an explicit iterator.\r\n\r\nIn about half the cases, the list (an ArrayList) is being iterated in reverse order by using an index today.\r\n\r\nCan someone suggest a cleaner way of doing this (since I dislike the `indexed for loop` when working with collections), though it does work?\r\n\r\n     for (int i = nodes.size() - 1; i &gt;= 0; i--) {\r\n        final Node each = (Node) nodes.get(i);\r\n        ...\r\n     }\r\n\r\n**Note:** I can&#39;t add any new dependencies outside the JDK.","title":"Iterating through a list in reverse order in java","body":"<p>I'm migrating a piece of code to make use of generics. One argument for doing so is that the for loop is much cleaner than keeping track of indexes, or using an explicit iterator.</p>\n\n<p>In about half the cases, the list (an ArrayList) is being iterated in reverse order by using an index today.</p>\n\n<p>Can someone suggest a cleaner way of doing this (since I dislike the <code>indexed for loop</code> when working with collections), though it does work?</p>\n\n<pre><code> for (int i = nodes.size() - 1; i &gt;= 0; i--) {\n    final Node each = (Node) nodes.get(i);\n    ...\n }\n</code></pre>\n\n<p><strong>Note:</strong> I can't add any new dependencies outside the JDK.</p>\n"},{"tags":["java","spring-boot","bearer-token","spring-cloud-feign"],"comments":[{"owner":{"account_id":17916680,"reputation":684,"user_id":13017474,"display_name":"priyranjan"},"score":0,"creation_date":1606385756,"post_id":65019801,"comment_id":114950433,"body_markdown":"ohk got now what problem are you facing?","body":"ohk got now what problem are you facing?"},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1606400063,"post_id":65019801,"comment_id":114956849,"body_markdown":"How do i get the bearer token value that submitted from postman (client)? As get it as string to replace &quot;tokenString&quot; value so i can use it to submit to another request","body":"How do i get the bearer token value that submitted from postman (client)? As get it as string to replace &quot;tokenString&quot; value so i can use it to submit to another request"},{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1606665246,"post_id":65019801,"comment_id":115023122,"body_markdown":"Are you using this token for any other purpose? For instance, for authenticating users in the application that calls the Feign client?","body":"Are you using this token for any other purpose? For instance, for authenticating users in the application that calls the Feign client?"},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1606666474,"post_id":65019801,"comment_id":115023500,"body_markdown":"yes i use it to call another microservice using feign client, and in the same gateway which is require same token because it&#39;s behind the same spring security","body":"yes i use it to call another microservice using feign client, and in the same gateway which is require same token because it&#39;s behind the same spring security"},{"owner":{"account_id":13760652,"reputation":716,"user_id":9930478,"display_name":"da-sha1"},"score":0,"creation_date":1607119987,"post_id":65019801,"comment_id":115182234,"body_markdown":"Do I understand correctly, that your first microservice, exposing &#39;/store&#39; endpoint, is using the token for authentication? If so, is it a standard authentication sceme (for example OAuth2) or a custom one (a custom JWT token authentication)?","body":"Do I understand correctly, that your first microservice, exposing &#39;/store&#39; endpoint, is using the token for authentication? If so, is it a standard authentication sceme (for example OAuth2) or a custom one (a custom JWT token authentication)?"}],"answers":[{"tags":[],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606657981,"creation_date":1606657981,"answer_id":65060872,"question_id":65019801,"body_markdown":"i got the answer but i think there i will still wait for better option, since my answer here is i have to add @RequestHeader in every controller to get the value of my token and get the token with `String token = headers.getFirst(HttpHeaders.AUTHORIZATION);`, and here is my complete controller :\r\n\r\n    @Operation(summary = &quot;Save new&quot;)\r\n    @PostMapping(&quot;/store&quot;)\r\n    public ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(@RequestHeader HttpHeaders headers, \r\n            @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n\r\n        String token = headers.getFirst(HttpHeaders.AUTHORIZATION);\r\n    \r\n        TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(token, request);\r\n    \r\n        ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\r\n    \r\n        if (newTransDeliveryPlanning != null) {\r\n            response.setMessage(PESAN_SIMPAN_BERHASIL);\r\n            response.setData(newTransDeliveryPlanning);\r\n        } else {\r\n            response.setMessage(PESAN_SIMPAN_GAGAL);\r\n        }\r\n    \r\n        return ResponseEntity.ok(response);\r\n    }\r\n\r\nand i read somewhere there is something called `Interceptor` so we don&#39;t have to type @RequestHeader in every controller i think, but i dunno if that the solution or how to use it properly. if someone can do this with something better, i will accept yours as answer","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>i got the answer but i think there i will still wait for better option, since my answer here is i have to add @RequestHeader in every controller to get the value of my token and get the token with <code>String token = headers.getFirst(HttpHeaders.AUTHORIZATION);</code>, and here is my complete controller :</p>\n<pre><code>@Operation(summary = &quot;Save new&quot;)\n@PostMapping(&quot;/store&quot;)\npublic ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(@RequestHeader HttpHeaders headers, \n        @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n\n    String token = headers.getFirst(HttpHeaders.AUTHORIZATION);\n\n    TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(token, request);\n\n    ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\n\n    if (newTransDeliveryPlanning != null) {\n        response.setMessage(PESAN_SIMPAN_BERHASIL);\n        response.setData(newTransDeliveryPlanning);\n    } else {\n        response.setMessage(PESAN_SIMPAN_GAGAL);\n    }\n\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>and i read somewhere there is something called <code>Interceptor</code> so we don't have to type @RequestHeader in every controller i think, but i dunno if that the solution or how to use it properly. if someone can do this with something better, i will accept yours as answer</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1606675494,"creation_date":1606674684,"answer_id":65063678,"question_id":65019801,"body_markdown":"You have several options here.\r\n\r\nFor example, you can use a [request scoped bean](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request) and, as you suggest, one [MVC interceptor](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-handlermapping-interceptor).\r\n\r\nBasically, you need to define a wrapper for the token value:\r\n\r\n```java\r\npublic class BearerTokenWrapper {\r\n   private String token;\r\n\r\n   // setters and getters\r\n}\r\n```\r\n\r\nThen, provide an implementation of an MVC [`HandlerInterceptor`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html):\r\n\r\n```java\r\npublic class BearerTokenInterceptor extends HandlerInterceptorAdapter {\r\n\r\n  private BearerTokenWrapper tokenWrapper;\r\n\r\n  public BearerTokenInterceptor(BearerTokenWrapper tokenWrapper) {\r\n    this.tokenWrapper = tokenWrapper;\r\n  }\r\n\r\n  @Override\r\n  public boolean preHandle(HttpServletRequest request,\r\n          HttpServletResponse response, Object handler) throws Exception {\r\n    final String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\r\n    if (authorizationHeaderValue != null &amp;&amp; authorizationHeaderValue.startsWith(&quot;Bearer&quot;)) {\r\n      String token = authorizationHeaderValue.substring(7, authorizationHeaderValue.length());\r\n      tokenWrapper.setToken(token);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nThis interceptor should be registered in your MVC configuration. For instance:\r\n\r\n```java\r\n@EnableWebMvc\r\n@Configuration\r\npublic class WebConfiguration extends WebConfigurer { /* or WebMvcConfigurerAdapter for Spring 4 */\r\n\r\n  @Override\r\n  public void addInterceptors(InterceptorRegistry registry) {\r\n    registry.addInterceptor(bearerTokenInterceptor());\r\n  }\r\n\r\n  @Bean\r\n  public BearerTokenInterceptor bearerTokenInterceptor() {\r\n      return new BearerTokenInterceptor(bearerTokenWrapper());\r\n  }\r\n\r\n  @Bean\r\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n  public BearerTokenWrapper bearerTokenWrapper() {\r\n    return new BearerTokenWrapper();\r\n  }\r\n\r\n}\r\n```\r\n\r\nWith this setup, you can use the bean in your `Service` autowiring the corresponding bean:\r\n\r\n```java\r\n@Autowired\r\nprivate BearerTokenWrapper tokenWrapper;\r\n\r\n//...\r\n\r\n\r\npublic TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n\r\n}\r\n\r\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n\r\n    String tokenString = tokenWrapper.getToken();\r\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\r\n    \r\n    return () -&gt; partnerDtoResponse;\r\n}\r\n```\r\n\r\nSimilar solutions has been provided here in stack overflow. See, for instance, [this related question](https://stackoverflow.com/questions/36295095/how-to-decorate-all-requests-to-take-a-value-from-header-and-add-it-in-the-body).\r\n\r\nIn addition to this Spring based approach, you can try something similar to the solution exposed in [this other stackoverflow question](https://stackoverflow.com/questions/37066331/using-headers-with-dynamic-values-in-feign-client-spring-cloud-brixton-rc2).\r\n\r\nHonestly I have never tested it, but it seems that you can provide the request header value right in the Feign client definition, in your case something like:\r\n\r\n```java\r\n@FeignClient(name=&quot;AccountFeignClient&quot;)\r\npublic interface AccountFeignClient {    \r\n    @RequestMapping(method = RequestMethod.GET, value = &quot;/data&quot;)\r\n    List&lt;PartnerDto&gt; getData(@RequestHeader(&quot;Authorization&quot;) String token, Set&lt;Long&gt; ids);\r\n}\r\n```\r\n\r\nOf course, you can also a common `Controller` that other `Controller`s can extend. This `Controller` will provide the logic necessary to obtain the bearer token from the `Authorization` header and the HTTP request provided, but in my opinion any of the aforementioned solutions are better.\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You have several options here.</p>\n<p>For example, you can use a <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request\" rel=\"noreferrer\">request scoped bean</a> and, as you suggest, one <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-handlermapping-interceptor\" rel=\"noreferrer\">MVC interceptor</a>.</p>\n<p>Basically, you need to define a wrapper for the token value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BearerTokenWrapper {\n   private String token;\n\n   // setters and getters\n}\n</code></pre>\n<p>Then, provide an implementation of an MVC <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html\" rel=\"noreferrer\"><code>HandlerInterceptor</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BearerTokenInterceptor extends HandlerInterceptorAdapter {\n\n  private BearerTokenWrapper tokenWrapper;\n\n  public BearerTokenInterceptor(BearerTokenWrapper tokenWrapper) {\n    this.tokenWrapper = tokenWrapper;\n  }\n\n  @Override\n  public boolean preHandle(HttpServletRequest request,\n          HttpServletResponse response, Object handler) throws Exception {\n    final String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\n    if (authorizationHeaderValue != null &amp;&amp; authorizationHeaderValue.startsWith(&quot;Bearer&quot;)) {\n      String token = authorizationHeaderValue.substring(7, authorizationHeaderValue.length());\n      tokenWrapper.setToken(token);\n    }\n    \n    return true;\n  }\n}\n</code></pre>\n<p>This interceptor should be registered in your MVC configuration. For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebMvc\n@Configuration\npublic class WebConfiguration extends WebConfigurer { /* or WebMvcConfigurerAdapter for Spring 4 */\n\n  @Override\n  public void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(bearerTokenInterceptor());\n  }\n\n  @Bean\n  public BearerTokenInterceptor bearerTokenInterceptor() {\n      return new BearerTokenInterceptor(bearerTokenWrapper());\n  }\n\n  @Bean\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n  public BearerTokenWrapper bearerTokenWrapper() {\n    return new BearerTokenWrapper();\n  }\n\n}\n</code></pre>\n<p>With this setup, you can use the bean in your <code>Service</code> autowiring the corresponding bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate BearerTokenWrapper tokenWrapper;\n\n//...\n\n\npublic TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n\n    String tokenString = tokenWrapper.getToken();\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\n    \n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n<p>Similar solutions has been provided here in stack overflow. See, for instance, <a href=\"https://stackoverflow.com/questions/36295095/how-to-decorate-all-requests-to-take-a-value-from-header-and-add-it-in-the-body\">this related question</a>.</p>\n<p>In addition to this Spring based approach, you can try something similar to the solution exposed in <a href=\"https://stackoverflow.com/questions/37066331/using-headers-with-dynamic-values-in-feign-client-spring-cloud-brixton-rc2\">this other stackoverflow question</a>.</p>\n<p>Honestly I have never tested it, but it seems that you can provide the request header value right in the Feign client definition, in your case something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FeignClient(name=&quot;AccountFeignClient&quot;)\npublic interface AccountFeignClient {    \n    @RequestMapping(method = RequestMethod.GET, value = &quot;/data&quot;)\n    List&lt;PartnerDto&gt; getData(@RequestHeader(&quot;Authorization&quot;) String token, Set&lt;Long&gt; ids);\n}\n</code></pre>\n<p>Of course, you can also a common <code>Controller</code> that other <code>Controller</code>s can extend. This <code>Controller</code> will provide the logic necessary to obtain the bearer token from the <code>Authorization</code> header and the HTTP request provided, but in my opinion any of the aforementioned solutions are better.</p>\n"},{"tags":[],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1607519571,"creation_date":1606676760,"answer_id":65064010,"question_id":65019801,"body_markdown":"I had a similar case. I was intercepting the requests from one microservice, getting the token and setting it my new ApiClient and calling endpoint from another microservice using this ApiClient. But I really don&#39;t know if there is possibility to pre-configure feign client. One thing that you can do is to create DefaultApiFilter, intercept the request, save the token in your database (or set it to some static variable, some singleton class or something similar) and then call in it your service method when trying to use the FeignClient:\r\n\r\n    package com.north.config;\r\n\r\n    import org.springframework.stereotype.Component;\r\n\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n\r\n    @Component\r\n    public class DefaultApiFilter implements Filter {\r\n\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, \r\n    FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest req = (HttpServletRequest) servletRequest;\r\n\r\n        String auth = req.getHeader(&quot;Authorization&quot;);\r\n\r\n        //TODO if you want you can persist your token here and use it on other place\r\n\r\n        //TODO This may be used for verification if it comes from the right endpoint and if you should save the token\r\n        final String requestURI = ((RequestFacade) servletRequest).getRequestURI();\r\n\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n        }\r\n    }\r\n\r\nThis `doFilter` method will always be executed before any endpoint is called, and later the endpoint will be called.\r\n\r\nAnd later use it when calling the `accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);` you can get it from your database (or from any other place that you kept it) and set it here.\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>I had a similar case. I was intercepting the requests from one microservice, getting the token and setting it my new ApiClient and calling endpoint from another microservice using this ApiClient. But I really don't know if there is possibility to pre-configure feign client. One thing that you can do is to create DefaultApiFilter, intercept the request, save the token in your database (or set it to some static variable, some singleton class or something similar) and then call in it your service method when trying to use the FeignClient:</p>\n<pre><code>package com.north.config;\n\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\n\n@Component\npublic class DefaultApiFilter implements Filter {\n\n\n@Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, \nFilterChain filterChain) throws IOException, ServletException {\n    HttpServletRequest req = (HttpServletRequest) servletRequest;\n\n    String auth = req.getHeader(&quot;Authorization&quot;);\n\n    //TODO if you want you can persist your token here and use it on other place\n\n    //TODO This may be used for verification if it comes from the right endpoint and if you should save the token\n    final String requestURI = ((RequestFacade) servletRequest).getRequestURI();\n\n    filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n</code></pre>\n<p>This <code>doFilter</code> method will always be executed before any endpoint is called, and later the endpoint will be called.</p>\n<p>And later use it when calling the <code>accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);</code> you can get it from your database (or from any other place that you kept it) and set it here.</p>\n"},{"tags":[],"owner":{"account_id":10315815,"reputation":278,"user_id":7610175,"display_name":"Abhijay"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1606896154,"creation_date":1606895488,"answer_id":65104103,"question_id":65019801,"body_markdown":"You could create this simple static method in a utility class, and reuse this method directly.\r\n\r\n    import org.springframework.web.context.request.RequestContextHolder;\r\n    import org.springframework.web.context.request.ServletRequestAttributes;\r\n    \r\n    public class BearerTokenUtil {\r\n    \r\n      public static String getBearerTokenHeader() {\r\n        return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\r\n      }\r\n    }\r\n\r\nYour service would then look like this \r\n\r\n    public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n           Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n    }\r\n    \r\n    public Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n        List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(BearerTokenUtil.getBearerTokenHeader(), ids);\r\n        return () -&gt; partnerDtoResponse;\r\n    }","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You could create this simple static method in a utility class, and reuse this method directly.</p>\n<pre><code>import org.springframework.web.context.request.RequestContextHolder;\nimport org.springframework.web.context.request.ServletRequestAttributes;\n\npublic class BearerTokenUtil {\n\n  public static String getBearerTokenHeader() {\n    return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\n  }\n}\n</code></pre>\n<p>Your service would then look like this</p>\n<pre><code>public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(BearerTokenUtil.getBearerTokenHeader(), ids);\n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14766609,"reputation":4337,"user_id":10664446,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1607081461,"creation_date":1607007522,"answer_id":65128439,"question_id":65019801,"body_markdown":"Although the suggested answers work, passing the token each time to `FeignClient` calls still not the best way to do it.\r\nI would suggest to create an interceptor for feign requests and there you can extract the token from `RequestContextHolder` and add it to request header directly.\r\n like this: \r\n\r\n        @Component\r\n        public class FeignClientInterceptor implements RequestInterceptor {\r\n        \r\n          private static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\r\n    \r\n          public static String getBearerTokenHeader() {\r\n            return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\r\n          }\r\n        \r\n          @Override\r\n          public void apply(RequestTemplate requestTemplate) {\r\n    \r\n              requestTemplate.header(AUTHORIZATION_HEADER, getBearerTokenHeader());\r\n           \r\n          }\r\n        }\r\n\r\nthis way you have a clean solution for your issue","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Although the suggested answers work, passing the token each time to <code>FeignClient</code> calls still not the best way to do it.\nI would suggest to create an interceptor for feign requests and there you can extract the token from <code>RequestContextHolder</code> and add it to request header directly.\nlike this:</p>\n<pre><code>    @Component\n    public class FeignClientInterceptor implements RequestInterceptor {\n    \n      private static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\n\n      public static String getBearerTokenHeader() {\n        return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\n      }\n    \n      @Override\n      public void apply(RequestTemplate requestTemplate) {\n\n          requestTemplate.header(AUTHORIZATION_HEADER, getBearerTokenHeader());\n       \n      }\n    }\n</code></pre>\n<p>this way you have a clean solution for your issue</p>\n"},{"tags":[],"owner":{"account_id":7231318,"reputation":89,"user_id":5518031,"accept_rate":83,"display_name":"Randy Hector"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607450124,"creation_date":1607105973,"answer_id":65148734,"question_id":65019801,"body_markdown":"I think the answer below from @stacker is correct but also I think is somehow incomplete and missing the &quot;how to use it in Feign&quot;.\r\n\r\nFor the sake of the example, I will provide a real use case where you can intercept the `User-Agent` of the caller to your service and forward this in the `Feign` call\r\n\r\nAssuming that you use `Feign` clients based on annotations this is how you can use the interceptor in all your Feign clients calls without any extra code\r\n\r\n```\r\n@Configuration\r\n@EnableFeignClients(\r\n    defaultConfiguration = DefaultFeignConfiguration.class\r\n)\r\npublic class FeignConfig\r\n{\r\n}\r\n```\r\n \r\n```\r\n@Configuration\r\n@Import(FeignClientsConfiguration.class)\r\npublic class DefaultFeignConfiguration\r\n{\r\n    @Bean\r\n    public RequestInterceptor userAgentHeaderInterceptor() {\r\n        return UserAgentHeaderInterceptor();\r\n    } \r\n}\r\n```\r\n\r\nThis is the User-Agent interceptor class\r\n\r\n```\r\npublic class UserAgentHeaderInterceptor extends BaseHeaderInterceptor\r\n{\r\n\r\n    private static final String USER_AGENT = &quot;User-Agent&quot;;\r\n\r\n\r\n    public UserAgentHeaderInterceptor()\r\n    {\r\n        super(USER_AGENT);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class BaseHeaderInterceptor implements RequestInterceptor\r\n{\r\n\r\n    private final String[] headerNames;\r\n\r\n\r\n    public BaseHeaderInterceptor(String... headerNames)\r\n    {\r\n        this.headerNames = headerNames;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void apply(RequestTemplate template)\r\n    {\r\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n\r\n        if (attributes != null)\r\n        {\r\n            HttpServletRequest httpServletRequest = attributes.getRequest();\r\n\r\n            for (String headerName : headerNames)\r\n            {\r\n                String headerValue = httpServletRequest.getHeader(headerName);\r\n                if (headerValue != null &amp;&amp; !headerValue.isEmpty())\r\n                {\r\n                    template.header(headerName, headerValue);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIn your case, you just need to either take this base class and create your own interceptor the same way as the `UserAgentHeaderInterceptor`","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>I think the answer below from @stacker is correct but also I think is somehow incomplete and missing the &quot;how to use it in Feign&quot;.</p>\n<p>For the sake of the example, I will provide a real use case where you can intercept the <code>User-Agent</code> of the caller to your service and forward this in the <code>Feign</code> call</p>\n<p>Assuming that you use <code>Feign</code> clients based on annotations this is how you can use the interceptor in all your Feign clients calls without any extra code</p>\n<pre><code>@Configuration\n@EnableFeignClients(\n    defaultConfiguration = DefaultFeignConfiguration.class\n)\npublic class FeignConfig\n{\n}\n</code></pre>\n<pre><code>@Configuration\n@Import(FeignClientsConfiguration.class)\npublic class DefaultFeignConfiguration\n{\n    @Bean\n    public RequestInterceptor userAgentHeaderInterceptor() {\n        return UserAgentHeaderInterceptor();\n    } \n}\n</code></pre>\n<p>This is the User-Agent interceptor class</p>\n<pre><code>public class UserAgentHeaderInterceptor extends BaseHeaderInterceptor\n{\n\n    private static final String USER_AGENT = &quot;User-Agent&quot;;\n\n\n    public UserAgentHeaderInterceptor()\n    {\n        super(USER_AGENT);\n    }\n}\n</code></pre>\n<pre><code>public class BaseHeaderInterceptor implements RequestInterceptor\n{\n\n    private final String[] headerNames;\n\n\n    public BaseHeaderInterceptor(String... headerNames)\n    {\n        this.headerNames = headerNames;\n    }\n\n\n    @Override\n    public void apply(RequestTemplate template)\n    {\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n\n        if (attributes != null)\n        {\n            HttpServletRequest httpServletRequest = attributes.getRequest();\n\n            for (String headerName : headerNames)\n            {\n                String headerValue = httpServletRequest.getHeader(headerName);\n                if (headerValue != null &amp;&amp; !headerValue.isEmpty())\n                {\n                    template.header(headerName, headerValue);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>In your case, you just need to either take this base class and create your own interceptor the same way as the <code>UserAgentHeaderInterceptor</code></p>\n"},{"tags":[],"owner":{"account_id":12257428,"reputation":385,"user_id":8946107,"display_name":"Rocard Fonji"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1654125532,"creation_date":1654125532,"answer_id":72468976,"question_id":65019801,"body_markdown":"An easy way to get **Bearer Token** from the header is to use **@RequestHeader** with the header name.\r\n\r\nSee code sample below\r\n```\r\n@PostMapping(&quot;/some-endpoint&quot;)\r\npublic ResponseEntity&lt;String&gt; someClassNmae(@RequestHeader(&quot;Authorization&quot;) String bearerToken) {\r\n\r\n   System.out.println(bearerToken); // print out bearer token\r\n\r\n   // some more code\r\n}\r\n```","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>An easy way to get <strong>Bearer Token</strong> from the header is to use <strong>@RequestHeader</strong> with the header name.</p>\n<p>See code sample below</p>\n<pre><code>@PostMapping(&quot;/some-endpoint&quot;)\npublic ResponseEntity&lt;String&gt; someClassNmae(@RequestHeader(&quot;Authorization&quot;) String bearerToken) {\n\n   System.out.println(bearerToken); // print out bearer token\n\n   // some more code\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24213809,"reputation":51,"user_id":18169953,"display_name":"Wenlong Feng"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663559097,"creation_date":1663559097,"answer_id":73768275,"question_id":65019801,"body_markdown":"Use this annotations to get the header information returned by the front end:\r\n**@RequestHeader(&quot;Authorization&quot;) String token**\r\n\r\nExample:\r\n```\r\n@GetMapping(&quot;/hello&quot;)\r\n    public void hello(@RequestHeader(&quot;Authorization&quot;) String token){\r\n```\r\n\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Use this annotations to get the header information returned by the front end:\n<strong>@RequestHeader(&quot;Authorization&quot;) String token</strong></p>\n<p>Example:</p>\n<pre><code>@GetMapping(&quot;/hello&quot;)\n    public void hello(@RequestHeader(&quot;Authorization&quot;) String token){\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25798468,"reputation":74,"user_id":19541281,"display_name":"sbrajchuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695227967,"creation_date":1695227360,"answer_id":77144373,"question_id":65019801,"body_markdown":"You can obtain a token from the security context using the following Java code:\r\n\r\n```Java\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.oauth2.jwt.Jwt;\r\n ...\r\n\r\nJwt authenticationToken = (Jwt) SecurityContextHolder.getContext()\r\n                                                     .getAuthentication()\r\n                                                     .getCredentials();\r\nString tokenString = authenticationToken.getTokenValue();\r\n```","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You can obtain a token from the security context using the following Java code:</p>\n<pre><code>import org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.oauth2.jwt.Jwt;\n ...\n\nJwt authenticationToken = (Jwt) SecurityContextHolder.getContext()\n                                                     .getAuthentication()\n                                                     .getCredentials();\nString tokenString = authenticationToken.getTokenValue();\n</code></pre>\n"}],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104937,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":65128439,"answer_count":9,"score":30,"last_activity_date":1695227967,"creation_date":1606385110,"question_id":65019801,"body_markdown":"Hi what trying to achieve is to get bearer token that submited from front end in java spring boot RESTApi controller and do another request using feign client to another microservices? here is what i do\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4bU6m.png\r\n\r\nimage above is how i do my request from postman, and here is my controller code :\r\n\r\n    @Operation(summary = &quot;Save new&quot;)\r\n    @PostMapping(&quot;/store&quot;)\r\n    public ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(\r\n    \t\t@Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n    \r\n    \tTransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(request);\r\n    \r\n    \tResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\r\n    \r\n    \tif (newTransDeliveryPlanning != null) {\r\n    \t\tresponse.setMessage(PESAN_SIMPAN_BERHASIL);\r\n    \t\tresponse.setData(newTransDeliveryPlanning);\r\n    \t} else {\r\n    \t\tresponse.setMessage(PESAN_SIMPAN_GAGAL);\r\n    \t}\r\n    \r\n    \treturn ResponseEntity.ok(response);\r\n    }\r\n\r\nand here is how my service look like :\r\n\r\n    public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n           Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n    \r\n    }\r\n    \r\n    public Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n    \r\n    \tString tokenString = &quot;i should get the token from postman, how do i get it to here?&quot;;\r\n    \tList&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\r\n    \t\r\n    \treturn () -&gt; partnerDtoResponse;\r\n    }\r\n\r\nas you can see, in &quot;tokenString&quot; there i put a string that i questioned about, how do i get it to there from postman?","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Hi what trying to achieve is to get bearer token that submited from front end in java spring boot RESTApi controller and do another request using feign client to another microservices? here is what i do</p>\n<p><a href=\"https://i.stack.imgur.com/4bU6m.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4bU6m.png\" alt=\"enter image description here\" /></a></p>\n<p>image above is how i do my request from postman, and here is my controller code :</p>\n<pre><code>@Operation(summary = &quot;Save new&quot;)\n@PostMapping(&quot;/store&quot;)\npublic ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(\n        @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n\n    TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(request);\n\n    ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\n\n    if (newTransDeliveryPlanning != null) {\n        response.setMessage(PESAN_SIMPAN_BERHASIL);\n        response.setData(newTransDeliveryPlanning);\n    } else {\n        response.setMessage(PESAN_SIMPAN_GAGAL);\n    }\n\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>and here is how my service look like :</p>\n<pre><code>public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n\n    String tokenString = &quot;i should get the token from postman, how do i get it to here?&quot;;\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\n    \n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n<p>as you can see, in &quot;tokenString&quot; there i put a string that i questioned about, how do i get it to there from postman?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695275279,"post_id":77144415,"comment_id":136003087,"body_markdown":"You ofcourse did read the migration guides for all the versions you skipped? Which would have lead you to https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-requestmapping.html#mvc-ann-requestmapping-suffix-pattern-match. Which explains what to do. In short do `configurer. useSuffixPatternMatching(true);` (as the default is `false`).","body":"You ofcourse did read the migration guides for all the versions you skipped? Which would have lead you to <a href=\"https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-requestmapping.html#mvc-ann-requestmapping-suffix-pattern-match\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/web/webmvc/&hellip;</a>. Which explains what to do. In short do <code>configurer. useSuffixPatternMatching(true);</code> (as the default is <code>false</code>)."},{"owner":{"account_id":1707831,"reputation":1627,"user_id":1566537,"accept_rate":82,"display_name":"Bernie"},"score":0,"creation_date":1695280585,"post_id":77144415,"comment_id":136003895,"body_markdown":"You&#39;re right, thanks. Something of note: I had in my code\n`configurer.setUseSuffixPatternMatch(true);``configurer.setUseRegisteredSuffixPatternMatch(true);`\nand it didn&#39;t work. Removing the latter and it works.","body":"You&#39;re right, thanks. Something of note: I had in my code <code>configurer.setUseSuffixPatternMatch(true);``configurer.setUs&zwnj;&#8203;eRegisteredSuffixPat&zwnj;&#8203;ternMatch(true);</code> and it didn&#39;t work. Removing the latter and it works."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695281718,"post_id":77144415,"comment_id":136004098,"body_markdown":"The one you used requires explicit setting of the suffixes that are supported and is used in conjuction with content negotiation.","body":"The one you used requires explicit setting of the suffixes that are supported and is used in conjuction with content negotiation."}],"owner":{"account_id":1707831,"reputation":1627,"user_id":1566537,"accept_rate":82,"display_name":"Bernie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695227756,"creation_date":1695227756,"question_id":77144415,"body_markdown":"I&#39;m migrating a Spring Project from v4.30 with Java 8 to v5.3.x with Java 11 (NOT Spring Boot).\r\n\r\nAll our RequestMappings used the suffix .do via Configuration, the endpoint in this class \r\n\r\n    @Controller\r\n    public class WelcomeWebController \r\n    \t@GetMapping(&quot;welcome&quot;) public String welcome() { ... } // -&gt; welcome.do\r\n    \t@GetMapping(&quot;hello&quot;)   public String hello()   { ... } // -&gt; hello.do\r\n\r\nwas actually a welcome.do or a hello.do, although the `@GetMapping(&quot;welcome&quot;)` has no &quot;.do&quot;.\r\n\r\nWe configured this suffix (among others) in a Spring derived configuration class like that:\r\n\r\n\tpublic class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\r\n\t\t@Override\r\n\t\tprotected String[] getServletMappings() {\r\n\t\t  return new String[] { &quot;*.do&quot;, &quot;*.xyz&quot;, &quot;/webresources/*&quot; };\r\n\t\t}\r\n\t\t\r\nThis worked fine in Spring4, but no longer in Spring 5 (although the debugger stops at `getServletMappings`).\r\n\r\nA possible workaround would be to add the .do to all RequestMappings, \r\n\t\r\n\r\n    @GetMapping(value={&quot;welcome&quot;,&quot;welcome.do&quot;})\r\n\r\nbut I think, there&#39;s a better way, as we have 100+ endpoints.\r\n\r\nReading along, I think the way to go in Spring 5 is to derive from WebMvcConfigurer like that:\r\n\r\n\tpublic class MyWebConfig implements WebMvcConfigurer {\r\n\t\t@Override\r\n\t\tpublic void configurePathMatch(PathMatchConfigurer configurer) {\r\n\t\t\t// Should I use setPathMatcher or setPatternParser? Or am I completely wrong here?\r\n\t\t\t// Is configurer.setUseSuffixPatternMatch(true) relevant here?\r\n\t\t\t\r\nThat&#39;s where I&#39;m struggling, I don&#39;t quite get how to use it.   \r\nHow do I override this method? Is this the right place to add the suffix?  \r\nOr can I somehow continue to use my old `MyWebAppInitializer` (see above) with the servlet mappings?  \r\n\r\nThanks","title":"Spring 5 Migration: How to add the suffix .do to all RequestMappings?","body":"<p>I'm migrating a Spring Project from v4.30 with Java 8 to v5.3.x with Java 11 (NOT Spring Boot).</p>\n<p>All our RequestMappings used the suffix .do via Configuration, the endpoint in this class</p>\n<pre><code>@Controller\npublic class WelcomeWebController \n    @GetMapping(&quot;welcome&quot;) public String welcome() { ... } // -&gt; welcome.do\n    @GetMapping(&quot;hello&quot;)   public String hello()   { ... } // -&gt; hello.do\n</code></pre>\n<p>was actually a welcome.do or a hello.do, although the <code>@GetMapping(&quot;welcome&quot;)</code> has no &quot;.do&quot;.</p>\n<p>We configured this suffix (among others) in a Spring derived configuration class like that:</p>\n<pre><code>public class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\n    @Override\n    protected String[] getServletMappings() {\n      return new String[] { &quot;*.do&quot;, &quot;*.xyz&quot;, &quot;/webresources/*&quot; };\n    }\n    \n</code></pre>\n<p>This worked fine in Spring4, but no longer in Spring 5 (although the debugger stops at <code>getServletMappings</code>).</p>\n<p>A possible workaround would be to add the .do to all RequestMappings,</p>\n<pre><code>@GetMapping(value={&quot;welcome&quot;,&quot;welcome.do&quot;})\n</code></pre>\n<p>but I think, there's a better way, as we have 100+ endpoints.</p>\n<p>Reading along, I think the way to go in Spring 5 is to derive from WebMvcConfigurer like that:</p>\n<pre><code>public class MyWebConfig implements WebMvcConfigurer {\n    @Override\n    public void configurePathMatch(PathMatchConfigurer configurer) {\n        // Should I use setPathMatcher or setPatternParser? Or am I completely wrong here?\n        // Is configurer.setUseSuffixPatternMatch(true) relevant here?\n        \n</code></pre>\n<p>That's where I'm struggling, I don't quite get how to use it.<br />\nHow do I override this method? Is this the right place to add the suffix?<br />\nOr can I somehow continue to use my old <code>MyWebAppInitializer</code> (see above) with the servlet mappings?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","springdoc-openapi-ui","openapi-generator-maven-plugin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695229554,"post_id":77144414,"comment_id":135997772,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29492216,"reputation":1,"user_id":22601041,"display_name":"tjam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695227751,"creation_date":1695227751,"question_id":77144414,"body_markdown":"# I am pretty new with openApi generator. I generated a simple code using a yaml file. everything seems to run fine but when i am accessing the swagger page i am getting &quot;No operations defined in spec!&quot;, i am unsure if i am missing a dependency or something in the code. \r\n[(https://i.stack.imgur.com/FsghM.png)](https://i.stack.imgur.com/Hjx1p.png)\r\n[enter image description here](https://i.stack.imgur.com/6a33T.png)\r\n\r\nI wrote the yaml file, added all the dependencies then did a mvn clean install which generated the code in my target folder and the code ran and compile. I was hoping to be able to render the swagger page properly for testing purposes\r\n\r\n```\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;inputSpec&gt;\r\n\t\t\t\t\t\t\t\t${project.basedir}/src/main/resources/demoFile.yml\r\n\t\t\t\t\t\t\t&lt;/inputSpec&gt;\r\n\t\t\t\t\t\t\t&lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n\t\t\t\t\t\t\t&lt;apiPackage&gt;com.code.openapi.api&lt;/apiPackage&gt;\r\n\t\t\t\t\t\t\t&lt;modelPackage&gt;com.code.openapi.model&lt;/modelPackage&gt;\r\n\t\t\t\t\t\t\t&lt;supportingFilesToGenerate&gt;\r\n\t\t\t\t\t\t\t\tApiUtil.java\r\n\t\t\t\t\t\t\t&lt;/supportingFilesToGenerate&gt;\r\n\t\t\t\t\t\t\t&lt;configOptions&gt;\r\n\t\t\t\t\t\t\t\t&lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n\t\t\t\t\t\t\t\t&lt;delegatePattern&gt;false&lt;/delegatePattern&gt;\r\n\t\t\t\t\t\t\t&lt;/configOptions&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;```\r\n```","title":"simple code using OpenAPI and spring. However, my swagger page keep saying &quot;No operations defined in spec!&quot;","body":"<h1>I am pretty new with openApi generator. I generated a simple code using a yaml file. everything seems to run fine but when i am accessing the swagger page i am getting &quot;No operations defined in spec!&quot;, i am unsure if i am missing a dependency or something in the code.</h1>\n<p><a href=\"https://i.stack.imgur.com/Hjx1p.png\" rel=\"nofollow noreferrer\">(https://i.stack.imgur.com/FsghM.png)</a>\n<a href=\"https://i.stack.imgur.com/6a33T.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I wrote the yaml file, added all the dependencies then did a mvn clean install which generated the code in my target folder and the code ran and compile. I was hoping to be able to render the swagger page properly for testing purposes</p>\n<pre><code>    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.4.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\n            &lt;version&gt;0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n                &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;5.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;\n                                ${project.basedir}/src/main/resources/demoFile.yml\n                            &lt;/inputSpec&gt;\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                            &lt;apiPackage&gt;com.code.openapi.api&lt;/apiPackage&gt;\n                            &lt;modelPackage&gt;com.code.openapi.model&lt;/modelPackage&gt;\n                            &lt;supportingFilesToGenerate&gt;\n                                ApiUtil.java\n                            &lt;/supportingFilesToGenerate&gt;\n                            &lt;configOptions&gt;\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                                &lt;delegatePattern&gt;false&lt;/delegatePattern&gt;\n                            &lt;/configOptions&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;```\n</code></pre>\n"},{"tags":["java","try-with-resources"],"comments":[{"owner":{"account_id":334987,"reputation":9182,"user_id":661797,"accept_rate":88,"display_name":"nullpotent"},"score":1,"creation_date":1348409338,"post_id":12552863,"comment_id":16906360,"body_markdown":"Your first example isn&#39;t really demonstrative. If FileWriter throws an exception, then the resource certainly isn&#39;t opened and need not to be closed.","body":"Your first example isn&#39;t really demonstrative. If FileWriter throws an exception, then the resource certainly isn&#39;t opened and need not to be closed."},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":6,"creation_date":1348410402,"post_id":12552863,"comment_id":16906606,"body_markdown":"Of course, if the underlying FileWriter&#39;s constructor throws an exception, it doesn&#39;t get even opened and everything is OK. What the 1st example is about, is what happens if the FileWriter gets created, but the BufferedWriter&#39;s constructor throws an exception.","body":"Of course, if the underlying FileWriter&#39;s constructor throws an exception, it doesn&#39;t get even opened and everything is OK. What the 1st example is about, is what happens if the FileWriter gets created, but the BufferedWriter&#39;s constructor throws an exception."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":8,"creation_date":1348410561,"post_id":12552863,"comment_id":16906641,"body_markdown":"Its worth noting that BufferedWriter will not throw an Exception. Is there an example you can think of where this question not pure academic.","body":"Its worth noting that BufferedWriter will not throw an Exception. Is there an example you can think of where this question not pure academic."},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":12,"creation_date":1348411215,"post_id":12552863,"comment_id":16906781,"body_markdown":"@PeterLawrey Yes, your&#39;re right that the BufferedWriter&#39;s constructor  in this scenario most probably will not throw an exception, but as I&#39;ve pointed out, this question concerns any decorator-style resources. But for example `public BufferedWriter(Writer out, int sz)` can throw an `IllegalArgumentException`. Also, I can extend BufferedWriter with a class that would throw something from its constructor or create a whatever custom wrapper that I need.","body":"@PeterLawrey Yes, your&#39;re right that the BufferedWriter&#39;s constructor  in this scenario most probably will not throw an exception, but as I&#39;ve pointed out, this question concerns any decorator-style resources. But for example <code>public BufferedWriter(Writer out, int sz)</code> can throw an <code>IllegalArgumentException</code>. Also, I can extend BufferedWriter with a class that would throw something from its constructor or create a whatever custom wrapper that I need."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":6,"creation_date":1348412619,"post_id":12552863,"comment_id":16907129,"body_markdown":"The `BufferedWriter` constructor can easily throw an exception. `OutOfMemoryError` is probably the most common one as it allocates a fair chunk of memory for the buffer (although may indicate you want to restart the entire process). / You need to `flush` your `BufferedWriter` if you don&#39;t close and want to keep the contents (generally **only** the non-exception case). `FileWriter` picks up whatever happens to be the &quot;default&quot; file encoding - it&#39;s better to be explicit.","body":"The <code>BufferedWriter</code> constructor can easily throw an exception. <code>OutOfMemoryError</code> is probably the most common one as it allocates a fair chunk of memory for the buffer (although may indicate you want to restart the entire process). / You need to <code>flush</code> your <code>BufferedWriter</code> if you don&#39;t close and want to keep the contents (generally <b>only</b> the non-exception case). <code>FileWriter</code> picks up whatever happens to be the &quot;default&quot; file encoding - it&#39;s better to be explicit."},{"owner":{"account_id":1658137,"reputation":26719,"user_id":1527084,"accept_rate":81,"display_name":"Geek"},"score":12,"creation_date":1406054233,"post_id":12552863,"comment_id":38672897,"body_markdown":"@Natix I wish all question in SO are as well researched and clear as this one is. I wish I could up vote this 100 times.","body":"@Natix I wish all question in SO are as well researched and clear as this one is. I wish I could up vote this 100 times."}],"answers":[{"tags":[],"owner":{"account_id":162467,"reputation":12176,"user_id":383936,"display_name":"Jeanne Boyarsky"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1480096193,"creation_date":1348423277,"answer_id":12554785,"question_id":12552863,"body_markdown":"**Option 4**\r\n\r\nChange your resources to be Closeable, not AutoClosable if you can.  The fact that the constructors can be chained implies it isn&#39;t unheard of to close the resource twice.  (This was true before ARM too.)  More on this below.\r\n\r\n**Option 5**\r\n\r\nDon&#39;t use ARM and code very carefully to ensure close() isn&#39;t called twice!\r\n\r\n**Option 6**\r\n\r\nDon&#39;t use ARM and have your finally close() calls in a try/catch themselves.\r\n\r\n**Why I don&#39;t think this problem is unique to ARM**\r\n\r\nIn all these examples, the finally close() calls should be in a catch block.  Left out for readability.\r\n\r\nNo good because fw can be closed twice.  (which is fine for FileWriter but not in your hypothetial example):\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n      fw = new FileWriter(file);\r\n      bw = new BufferedWriter(fw);\r\n      bw.write(text);\r\n    } finally {\r\n      if ( fw != null ) fw.close();\r\n      if ( bw != null ) bw.close();\r\n    }\r\n\r\nNo good because fw not closed if exception on constructing a BufferedWriter.  (again, can&#39;t happen, but in your hypothetical example):\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n      fw = new FileWriter(file);\r\n      bw = new BufferedWriter(fw);\r\n      bw.write(text);\r\n    } finally {\r\n      if ( bw != null ) bw.close();\r\n    }","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p><strong>Option 4</strong></p>\n\n<p>Change your resources to be Closeable, not AutoClosable if you can.  The fact that the constructors can be chained implies it isn't unheard of to close the resource twice.  (This was true before ARM too.)  More on this below.</p>\n\n<p><strong>Option 5</strong></p>\n\n<p>Don't use ARM and code very carefully to ensure close() isn't called twice!</p>\n\n<p><strong>Option 6</strong></p>\n\n<p>Don't use ARM and have your finally close() calls in a try/catch themselves.</p>\n\n<p><strong>Why I don't think this problem is unique to ARM</strong></p>\n\n<p>In all these examples, the finally close() calls should be in a catch block.  Left out for readability.</p>\n\n<p>No good because fw can be closed twice.  (which is fine for FileWriter but not in your hypothetial example):</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n  fw = new FileWriter(file);\n  bw = new BufferedWriter(fw);\n  bw.write(text);\n} finally {\n  if ( fw != null ) fw.close();\n  if ( bw != null ) bw.close();\n}\n</code></pre>\n\n<p>No good because fw not closed if exception on constructing a BufferedWriter.  (again, can't happen, but in your hypothetical example):</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n  fw = new FileWriter(file);\n  bw = new BufferedWriter(fw);\n  bw.write(text);\n} finally {\n  if ( bw != null ) bw.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1738665,"reputation":189,"user_id":1590666,"display_name":"poison"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1348673328,"creation_date":1348673328,"answer_id":12605251,"question_id":12552863,"body_markdown":"Since your resources are nested, your try-with clauses should also be:\r\n\r\n    try (FileWriter fw=new FileWriter(file)) {\r\n        try (BufferedWriter bw=new BufferedWriter(fw)) {\r\n            bw.write(text);\r\n        } catch (IOException ex) {\r\n            // handle ex\r\n        }\r\n    } catch (IOException ex) {\r\n        // handle ex\r\n    }","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>Since your resources are nested, your try-with clauses should also be:</p>\n\n<pre><code>try (FileWriter fw=new FileWriter(file)) {\n    try (BufferedWriter bw=new BufferedWriter(fw)) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n} catch (IOException ex) {\n    // handle ex\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1344625,"reputation":3248,"user_id":1285615,"accept_rate":55,"display_name":"sakthisundar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1348743518,"creation_date":1348743518,"answer_id":12619799,"question_id":12552863,"body_markdown":"I would say don&#39;t use ARM and go on with Closeable. Use method like,\r\n\r\n\r\n    public void close(Closeable... closeables) {\r\n        for (Closeable closeable: closeables) {\r\n           try {\r\n               closeable.close();\r\n             } catch (IOException e) {\r\n               // you can&#39;t much for this\r\n              }\r\n        }\r\n    \r\n    }\r\n\r\nAlso you should consider calling close of `BufferedWriter` as it is not just delegating the close to `FileWriter` , but it does some cleanup like `flushBuffer`.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>I would say don't use ARM and go on with Closeable. Use method like,</p>\n\n<pre><code>public void close(Closeable... closeables) {\n    for (Closeable closeable: closeables) {\n       try {\n           closeable.close();\n         } catch (IOException e) {\n           // you can't much for this\n          }\n    }\n\n}\n</code></pre>\n\n<p>Also you should consider calling close of <code>BufferedWriter</code> as it is not just delegating the close to <code>FileWriter</code> , but it does some cleanup like <code>flushBuffer</code>.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":83,"is_accepted":false,"score":82,"last_activity_date":1695227005,"creation_date":1349040478,"answer_id":12665271,"question_id":12552863,"body_markdown":"Here&#39;s my take on the alternatives:\r\n\r\n## 1) ##\r\n\r\n    try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\r\n        bw.write(text);\r\n    }\r\n\r\nFor me, the best thing coming to Java from traditional C++ 15 years ago was that you could trust your program. Even if things are in the muck and going wrong, which they often do, I want the rest of the code to be on best behaviour and smelling of roses. Indeed, the `BufferedWriter` might throw an exception here. Running out of memory wouldn&#39;t be unusual, for instance. For other decorators, do you know which of the `java.io` wrapper classes throw a checked exception from their constructors? I don&#39;t. Doesn&#39;t do code understandability much good if you rely upon that sort of obscure knowledge.\r\n\r\nAlso there&#39;s the &quot;destruction&quot;. If there is an error condition, then you probably don&#39;t want to be flushing rubbish to a file that needs deleting (code for that not shown). Although, of course, deleting the file is also another interesting operation to do as error handling.\r\n\r\nGenerally you want `finally` blocks to be as short and reliable as possible. Adding flushes does not help this goal. For many releases some of the buffering classes in the JDK had a bug where an exception from `flush` within `close` caused `close` on the decorated object not be called. Whilst that has been fixed for some time, expect it from other implementations.\r\n\r\n## 2) ##\r\n\r\n    try (\r\n        FileWriter fw = new FileWriter(file);\r\n        BufferedWriter bw = new BufferedWriter(fw)\r\n    ) {\r\n        bw.write(text);\r\n    }\r\n\r\nWe&#39;re still flushing in the implicit finally block (now with repeated `close` - this gets worse as you add more decorators), but the construction is safe and we have two implicit finally blocks so even a failed `flush` doesn&#39;t prevent resource release.\r\n\r\n## 3) ##\r\n\r\n    try (FileWriter fw = new FileWriter(file)) {\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n    }\r\n\r\nThere&#39;s a bug here. Should be:\r\n\r\n    try (FileWriter fw = new FileWriter(file)) {\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n        bw.flush();\r\n    }\r\n\r\nSome poorly implemented decorators are in fact resource and will need to be closed reliably. Also some streams may need to be closed in a particular way (perhaps they are doing compression and need to write bits to finish off, and can&#39;t just flush everything.\r\n\r\n## Verdict ##\r\n\r\nAlthough 3 is a technically superior solution, software development reasons make 2 the better choice. However, try-with-resource is still an inadequate fix and you should stick with the [Execute Around idiom][1], which should have a clearer syntax with closures in Java SE 8.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>Here's my take on the alternatives:</p>\n<h2>1)</h2>\n<pre><code>try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\n    bw.write(text);\n}\n</code></pre>\n<p>For me, the best thing coming to Java from traditional C++ 15 years ago was that you could trust your program. Even if things are in the muck and going wrong, which they often do, I want the rest of the code to be on best behaviour and smelling of roses. Indeed, the <code>BufferedWriter</code> might throw an exception here. Running out of memory wouldn't be unusual, for instance. For other decorators, do you know which of the <code>java.io</code> wrapper classes throw a checked exception from their constructors? I don't. Doesn't do code understandability much good if you rely upon that sort of obscure knowledge.</p>\n<p>Also there's the &quot;destruction&quot;. If there is an error condition, then you probably don't want to be flushing rubbish to a file that needs deleting (code for that not shown). Although, of course, deleting the file is also another interesting operation to do as error handling.</p>\n<p>Generally you want <code>finally</code> blocks to be as short and reliable as possible. Adding flushes does not help this goal. For many releases some of the buffering classes in the JDK had a bug where an exception from <code>flush</code> within <code>close</code> caused <code>close</code> on the decorated object not be called. Whilst that has been fixed for some time, expect it from other implementations.</p>\n<h2>2)</h2>\n<pre><code>try (\n    FileWriter fw = new FileWriter(file);\n    BufferedWriter bw = new BufferedWriter(fw)\n) {\n    bw.write(text);\n}\n</code></pre>\n<p>We're still flushing in the implicit finally block (now with repeated <code>close</code> - this gets worse as you add more decorators), but the construction is safe and we have two implicit finally blocks so even a failed <code>flush</code> doesn't prevent resource release.</p>\n<h2>3)</h2>\n<pre><code>try (FileWriter fw = new FileWriter(file)) {\n    BufferedWriter bw = new BufferedWriter(fw);\n    bw.write(text);\n}\n</code></pre>\n<p>There's a bug here. Should be:</p>\n<pre><code>try (FileWriter fw = new FileWriter(file)) {\n    BufferedWriter bw = new BufferedWriter(fw);\n    bw.write(text);\n    bw.flush();\n}\n</code></pre>\n<p>Some poorly implemented decorators are in fact resource and will need to be closed reliably. Also some streams may need to be closed in a particular way (perhaps they are doing compression and need to write bits to finish off, and can't just flush everything.</p>\n<h2>Verdict</h2>\n<p>Although 3 is a technically superior solution, software development reasons make 2 the better choice. However, try-with-resource is still an inadequate fix and you should stick with the <a href=\"https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom\">Execute Around idiom</a>, which should have a clearer syntax with closures in Java SE 8.</p>\n"},{"tags":[],"owner":{"account_id":1892791,"reputation":101,"user_id":1710421,"display_name":"AmyGamy"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1349040800,"creation_date":1349040800,"answer_id":12665318,"question_id":12552863,"body_markdown":"I just wanted to build on Jeanne Boyarsky&#39;s suggestion of not using ARM but making sure the FileWriter is always closed exactly once. Don&#39;t think there are any problems here...\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n        fw = new FileWriter(file);\r\n        bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n    } finally {\r\n        if (bw != null) bw.close();\r\n        else if (fw != null) fw.close();\r\n    }\r\n\r\nI guess since ARM is just syntactic sugar, we can&#39;t always use it to replace finally blocks. Just like we can&#39;t always use a for-each loop to do something that is possible with iterators.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>I just wanted to build on Jeanne Boyarsky's suggestion of not using ARM but making sure the FileWriter is always closed exactly once. Don't think there are any problems here...</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n    fw = new FileWriter(file);\n    bw = new BufferedWriter(fw);\n    bw.write(text);\n} finally {\n    if (bw != null) bw.close();\n    else if (fw != null) fw.close();\n}\n</code></pre>\n\n<p>I guess since ARM is just syntactic sugar, we can't always use it to replace finally blocks. Just like we can't always use a for-each loop to do something that is possible with iterators.</p>\n"},{"tags":[],"owner":{"account_id":429244,"reputation":10164,"user_id":812034,"accept_rate":64,"display_name":"Earth Engine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386209877,"creation_date":1366957383,"answer_id":16229988,"question_id":12552863,"body_markdown":"My solution is to do a &quot;extract method&quot; refactoring, as following:\r\n\r\n\tstatic AutoCloseable writeFileWriter(FileWriter fw, String txt) throws IOException{\r\n\t    final BufferedWriter bw  = new BufferedWriter(fw);\r\n\t    bw.write(txt);\r\n\t    return new AutoCloseable(){\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void close() throws IOException {\r\n\t\t\t\tbw.flush();\r\n\t\t\t}\r\n    \t\r\n\t    };\r\n\t}\r\n\r\n`printToFile` can be written either\r\n\r\n\tstatic void printToFile(String text, File file) {\r\n\t    try (FileWriter fw = new FileWriter(file)) {\r\n\t    \tAutoCloseable w = writeFileWriter(fw, text);\r\n\t        w.close();\r\n\t    } catch (Exception ex) {\r\n\t        // handle ex\r\n\t    }\r\n\t}\r\n\r\nor\r\n\r\n\tstatic void printToFile(String text, File file) {\r\n\t    try (FileWriter fw = new FileWriter(file);\r\n\t    \tAutoCloseable w = writeFileWriter(fw, text)){\r\n\r\n\t    } catch (Exception ex) {\r\n\t        // handle ex\r\n\t    }\r\n\t}\r\n\r\nFor class lib designers, I will suggest them extend the `AutoClosable` interface with an additional method to suppress the close. In this case we can then manually control the close behavior.\r\n\r\nFor language designers, the lesson is that adding a new feature could mean adding a lot others. In this Java case, obviously ARM feature will work better with a resource ownership transfer mechanism. \r\n\r\n**UPDATE**\r\n\r\nOriginally the code above requires `@SuppressWarning` since the `BufferedWriter` inside the function requires `close()`.\r\n\r\nAs suggested by a comment, if `flush()` to be called before close the writer, we need to do so before any `return` (implicit or explicit) statements inside the try block. There is currently no way to ensure the caller doing this I think, so this must be documented for `writeFileWriter`.\r\n\r\n**UPDATE AGAIN**\r\n\r\nThe above update makes `@SuppressWarning` unnecessary since it require the function to return the resource to the caller, so itself does not necessary being closed. Unfortunately, this pull us back to the beginning of the situation: the warning is now moved back to the caller side.\r\n\r\nSo to properly solve this, we need a customised `AutoClosable` that whenever it closes, the underline `BufferedWriter` shall be `flush()`ed. Actually, this shows us another way to bypass the warning, since the `BufferWriter` is never closed in either way.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>My solution is to do a \"extract method\" refactoring, as following:</p>\n\n<pre><code>static AutoCloseable writeFileWriter(FileWriter fw, String txt) throws IOException{\n    final BufferedWriter bw  = new BufferedWriter(fw);\n    bw.write(txt);\n    return new AutoCloseable(){\n\n        @Override\n        public void close() throws IOException {\n            bw.flush();\n        }\n\n    };\n}\n</code></pre>\n\n<p><code>printToFile</code> can be written either</p>\n\n<pre><code>static void printToFile(String text, File file) {\n    try (FileWriter fw = new FileWriter(file)) {\n        AutoCloseable w = writeFileWriter(fw, text);\n        w.close();\n    } catch (Exception ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>static void printToFile(String text, File file) {\n    try (FileWriter fw = new FileWriter(file);\n        AutoCloseable w = writeFileWriter(fw, text)){\n\n    } catch (Exception ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>For class lib designers, I will suggest them extend the <code>AutoClosable</code> interface with an additional method to suppress the close. In this case we can then manually control the close behavior.</p>\n\n<p>For language designers, the lesson is that adding a new feature could mean adding a lot others. In this Java case, obviously ARM feature will work better with a resource ownership transfer mechanism. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Originally the code above requires <code>@SuppressWarning</code> since the <code>BufferedWriter</code> inside the function requires <code>close()</code>.</p>\n\n<p>As suggested by a comment, if <code>flush()</code> to be called before close the writer, we need to do so before any <code>return</code> (implicit or explicit) statements inside the try block. There is currently no way to ensure the caller doing this I think, so this must be documented for <code>writeFileWriter</code>.</p>\n\n<p><strong>UPDATE AGAIN</strong></p>\n\n<p>The above update makes <code>@SuppressWarning</code> unnecessary since it require the function to return the resource to the caller, so itself does not necessary being closed. Unfortunately, this pull us back to the beginning of the situation: the warning is now moved back to the caller side.</p>\n\n<p>So to properly solve this, we need a customised <code>AutoClosable</code> that whenever it closes, the underline <code>BufferedWriter</code> shall be <code>flush()</code>ed. Actually, this shows us another way to bypass the warning, since the <code>BufferWriter</code> is never closed in either way.</p>\n"},{"tags":[],"owner":{"account_id":21713,"reputation":295592,"user_id":53013,"accept_rate":78,"display_name":"Daniel C. Sobral"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1377717512,"creation_date":1377717512,"answer_id":18496449,"question_id":12552863,"body_markdown":"The first style is the one [suggested by Oracle](http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html). `BufferedWriter` doesn&#39;t throw checked exceptions, so if any exception is thrown, the program is not expected to recover from it, making resource recover mostly moot.\r\n\r\nMostly because it could happen in a thread, with the thread dieing but the program still continuing -- say, there was a temporary memory outage that wasn&#39;t long enough to seriously impair the rest of the program. It&#39;s a rather corner case, though, and if it happens often enough to make resource leak a problem, the try-with-resources is the least of your problems.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>The first style is the one <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html\">suggested by Oracle</a>. <code>BufferedWriter</code> doesn't throw checked exceptions, so if any exception is thrown, the program is not expected to recover from it, making resource recover mostly moot.</p>\n\n<p>Mostly because it could happen in a thread, with the thread dieing but the program still continuing -- say, there was a temporary memory outage that wasn't long enough to seriously impair the rest of the program. It's a rather corner case, though, and if it happens often enough to make resource leak a problem, the try-with-resources is the least of your problems.</p>\n"},{"tags":[],"owner":{"account_id":2306167,"reputation":3279,"user_id":2025416,"display_name":"Nils von Barth"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1511583852,"creation_date":1440979068,"answer_id":32302353,"question_id":12552863,"body_markdown":"To concur with earlier comments: simplest is **(2)** to use `Closeable` resources and declare them in order in the try-with-resources clause. If you only have `AutoCloseable`, you can wrap them in another (nested) class that just checks that `close` is only called once (Facade Pattern), e.g. by having `private bool isClosed;`. In practice even Oracle just **(1)** chains the constructors and doesn&#39;t correctly handle exceptions partway through the chain.\r\n\r\nAlternatively, you can manually create a chained resource, using a static factory method; this encapsulates the chain, and handle cleanup if it fails part-way:\r\n\r\n    static BufferedWriter createBufferedWriterFromFile(File file)\r\n      throws IOException {\r\n      // If constructor throws an exception, no resource acquired, so no release required.\r\n      FileWriter fileWriter = new FileWriter(file);\r\n      try {\r\n        return new BufferedWriter(fileWriter);  \r\n      } catch (IOException newBufferedWriterException) {\r\n        try {\r\n          fileWriter.close();\r\n        } catch (IOException closeException) {\r\n          // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\r\n          // as in try-with-resources.\r\n          newBufferedWriterException.addSuppressed(closeException);\r\n        }\r\n        throw newBufferedWriterException;\r\n      }\r\n    }\r\n\r\nYou can then use it as a single resource in a try-with-resources clause:\r\n\r\n    try (BufferedWriter writer = createBufferedWriterFromFile(file)) {\r\n      // Work with writer.\r\n    }\r\n\r\nThe complexity comes from handling multiple exceptions; otherwise it&#39;s just &quot;close resources that you&#39;ve acquired so far&quot;. A common practice seems to be to first initialize the variable that holds the object that holds the resource to `null` (here `fileWriter`), and then include a null check in the cleanup, but that seems unnecessary: if the constructor fails, there&#39;s nothing to clean up, so we can just let that exception propagate, which simplifies the code a little.\r\n\r\nYou could probably do this generically:\r\n\r\n    static &lt;T extends AutoCloseable, U extends AutoCloseable, V&gt;\r\n        T createChainedResource(V v) throws Exception {\r\n      // If constructor throws an exception, no resource acquired, so no release required.\r\n      U u = new U(v);\r\n      try {\r\n        return new T(u);  \r\n      } catch (Exception newTException) {\r\n        try {\r\n          u.close();\r\n        } catch (Exception closeException) {\r\n          // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\r\n          // as in try-with-resources.\r\n          newTException.addSuppressed(closeException);\r\n        }\r\n        throw newTException;\r\n      }\r\n    }\r\n\r\nSimilarly, you can chain three resources, etc.\r\n\r\nAs a mathematical aside, you could even chain three times by chaining two resources at a time, and it would be associative, meaning you would get the same object on success (because the constructors are associative), and same exceptions if there were a failure in any of the constructors. Assuming you added an _S_ to the above chain (so you start with a _V_ and end with an _S_, by applying _U_, _T_, and _S_ in turn), you get the same either if you first chain _S_ and _T_, then _U_, corresponding to _(ST)U_, or if you first chained _T_ and _U_, then _S_, corresponding to _S(TU)_. However, it would be clearer to just write out an explicit three-fold chain in a single factory function.\r\n","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>To concur with earlier comments: simplest is <strong>(2)</strong> to use <code>Closeable</code> resources and declare them in order in the try-with-resources clause. If you only have <code>AutoCloseable</code>, you can wrap them in another (nested) class that just checks that <code>close</code> is only called once (Facade Pattern), e.g. by having <code>private bool isClosed;</code>. In practice even Oracle just <strong>(1)</strong> chains the constructors and doesn't correctly handle exceptions partway through the chain.</p>\n\n<p>Alternatively, you can manually create a chained resource, using a static factory method; this encapsulates the chain, and handle cleanup if it fails part-way:</p>\n\n<pre><code>static BufferedWriter createBufferedWriterFromFile(File file)\n  throws IOException {\n  // If constructor throws an exception, no resource acquired, so no release required.\n  FileWriter fileWriter = new FileWriter(file);\n  try {\n    return new BufferedWriter(fileWriter);  \n  } catch (IOException newBufferedWriterException) {\n    try {\n      fileWriter.close();\n    } catch (IOException closeException) {\n      // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\n      // as in try-with-resources.\n      newBufferedWriterException.addSuppressed(closeException);\n    }\n    throw newBufferedWriterException;\n  }\n}\n</code></pre>\n\n<p>You can then use it as a single resource in a try-with-resources clause:</p>\n\n<pre><code>try (BufferedWriter writer = createBufferedWriterFromFile(file)) {\n  // Work with writer.\n}\n</code></pre>\n\n<p>The complexity comes from handling multiple exceptions; otherwise it's just \"close resources that you've acquired so far\". A common practice seems to be to first initialize the variable that holds the object that holds the resource to <code>null</code> (here <code>fileWriter</code>), and then include a null check in the cleanup, but that seems unnecessary: if the constructor fails, there's nothing to clean up, so we can just let that exception propagate, which simplifies the code a little.</p>\n\n<p>You could probably do this generically:</p>\n\n<pre><code>static &lt;T extends AutoCloseable, U extends AutoCloseable, V&gt;\n    T createChainedResource(V v) throws Exception {\n  // If constructor throws an exception, no resource acquired, so no release required.\n  U u = new U(v);\n  try {\n    return new T(u);  \n  } catch (Exception newTException) {\n    try {\n      u.close();\n    } catch (Exception closeException) {\n      // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\n      // as in try-with-resources.\n      newTException.addSuppressed(closeException);\n    }\n    throw newTException;\n  }\n}\n</code></pre>\n\n<p>Similarly, you can chain three resources, etc.</p>\n\n<p>As a mathematical aside, you could even chain three times by chaining two resources at a time, and it would be associative, meaning you would get the same object on success (because the constructors are associative), and same exceptions if there were a failure in any of the constructors. Assuming you added an <em>S</em> to the above chain (so you start with a <em>V</em> and end with an <em>S</em>, by applying <em>U</em>, <em>T</em>, and <em>S</em> in turn), you get the same either if you first chain <em>S</em> and <em>T</em>, then <em>U</em>, corresponding to <em>(ST)U</em>, or if you first chained <em>T</em> and <em>U</em>, then <em>S</em>, corresponding to <em>S(TU)</em>. However, it would be clearer to just write out an explicit three-fold chain in a single factory function.</p>\n"}],"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37987,"favorite_count":0,"down_vote_count":1,"up_vote_count":190,"answer_count":8,"score":189,"last_activity_date":1695227005,"creation_date":1348408029,"question_id":12552863,"body_markdown":"The Java 7 *try-with-resources* syntax (also known as ARM block (*Automatic Resource Management*)) is nice, short and straightforward when using only one `AutoCloseable` resource. However, I am not sure what is the correct idiom when I need to declare multiple resources that are dependent on each other, for example a `FileWriter` and a `BufferedWriter` that wraps it. Of course, this question concerns any case when some `AutoCloseable` resources are wrapped, not only these two specific classes.\r\n\r\nI came up with the three following alternatives:\r\n\r\n## 1) ##\r\n\r\nThe naive idiom I have seen is to declare only the top-level wrapper in the ARM-managed variable:\r\n\r\n\tstatic void printToFile1(String text, File file) {\r\n\t\ttry (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nThis is nice and short, but it is broken. Because the underlying `FileWriter` is not declared in a variable, it will never be closed directly in the generated `finally` block. It will be closed only through the `close` method of the wrapping `BufferedWriter`. The problem is, that if an exception is thrown from the `bw`&#39;s constructor, its `close` will not be called and therefore the underlying `FileWriter` **will not be closed**.\r\n\r\n## 2) ##\r\n\r\n\tstatic void printToFile2(String text, File file) {\r\n\t\ttry (FileWriter fw = new FileWriter(file);\r\n\t\t\t\tBufferedWriter bw = new BufferedWriter(fw)) {\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nHere, both the underlying and the wrapping resource are declared in the ARM-managed variables, so both of them will certainly be closed, but the underlying `fw.close()` **will be called twice**: not only directly, but also through the wrapping `bw.close()`.\r\n\r\nThis should not be a problem for these two specific classes that both implement `Closeable` (which is a subtype of `AutoCloseable`), whose contract states that multiple calls to `close` are permitted:\r\n\r\n&gt; Closes this stream and releases any system resources associated with it. If the stream is already closed then invoking this method has no effect.\r\n\r\nHowever, in a general case, I can have resources that implement only `AutoCloseable` (and not `Closeable`), which doesn&#39;t guarantee that `close` can be called multiple times:\r\n\r\n&gt; Note that unlike the close method of java.io.Closeable, this close method is not required to be idempotent. In other words, calling this close method more than once may have some visible side effect, unlike Closeable.close which is required to have no effect if called more than once. However, implementers of this interface are strongly encouraged to make their close methods idempotent.\r\n\r\n## 3) ##\r\n\r\n\tstatic void printToFile3(String text, File file) {\r\n\t\ttry (FileWriter fw = new FileWriter(file)) {\r\n\t\t\tBufferedWriter bw = new BufferedWriter(fw);\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nThis version should be theoretically correct, because only the `fw` represents a real resource that needs to be cleaned up. The `bw` doesn&#39;t itself hold any resource, it only delegates to the `fw`, so it should be sufficient to only close the underlying `fw`.\r\n\r\nOn the other hand, the syntax is a bit irregular and also, Eclipse issues a warning, which I believe is a false alarm, but it is still a warning that one has to deal with:\r\n\r\n&gt; Resource leak: &#39;bw&#39; is never closed\r\n\r\n----------\r\n\r\nSo, which approach to go for? Or have I missed some other idiom that is *the correct* one?","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>The Java 7 <em>try-with-resources</em> syntax (also known as ARM block (<em>Automatic Resource Management</em>)) is nice, short and straightforward when using only one <code>AutoCloseable</code> resource. However, I am not sure what is the correct idiom when I need to declare multiple resources that are dependent on each other, for example a <code>FileWriter</code> and a <code>BufferedWriter</code> that wraps it. Of course, this question concerns any case when some <code>AutoCloseable</code> resources are wrapped, not only these two specific classes.</p>\n\n<p>I came up with the three following alternatives:</p>\n\n<h2>1)</h2>\n\n<p>The naive idiom I have seen is to declare only the top-level wrapper in the ARM-managed variable:</p>\n\n<pre><code>static void printToFile1(String text, File file) {\n    try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>This is nice and short, but it is broken. Because the underlying <code>FileWriter</code> is not declared in a variable, it will never be closed directly in the generated <code>finally</code> block. It will be closed only through the <code>close</code> method of the wrapping <code>BufferedWriter</code>. The problem is, that if an exception is thrown from the <code>bw</code>'s constructor, its <code>close</code> will not be called and therefore the underlying <code>FileWriter</code> <strong>will not be closed</strong>.</p>\n\n<h2>2)</h2>\n\n<pre><code>static void printToFile2(String text, File file) {\n    try (FileWriter fw = new FileWriter(file);\n            BufferedWriter bw = new BufferedWriter(fw)) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>Here, both the underlying and the wrapping resource are declared in the ARM-managed variables, so both of them will certainly be closed, but the underlying <code>fw.close()</code> <strong>will be called twice</strong>: not only directly, but also through the wrapping <code>bw.close()</code>.</p>\n\n<p>This should not be a problem for these two specific classes that both implement <code>Closeable</code> (which is a subtype of <code>AutoCloseable</code>), whose contract states that multiple calls to <code>close</code> are permitted:</p>\n\n<blockquote>\n  <p>Closes this stream and releases any system resources associated with it. If the stream is already closed then invoking this method has no effect.</p>\n</blockquote>\n\n<p>However, in a general case, I can have resources that implement only <code>AutoCloseable</code> (and not <code>Closeable</code>), which doesn't guarantee that <code>close</code> can be called multiple times:</p>\n\n<blockquote>\n  <p>Note that unlike the close method of java.io.Closeable, this close method is not required to be idempotent. In other words, calling this close method more than once may have some visible side effect, unlike Closeable.close which is required to have no effect if called more than once. However, implementers of this interface are strongly encouraged to make their close methods idempotent.</p>\n</blockquote>\n\n<h2>3)</h2>\n\n<pre><code>static void printToFile3(String text, File file) {\n    try (FileWriter fw = new FileWriter(file)) {\n        BufferedWriter bw = new BufferedWriter(fw);\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>This version should be theoretically correct, because only the <code>fw</code> represents a real resource that needs to be cleaned up. The <code>bw</code> doesn't itself hold any resource, it only delegates to the <code>fw</code>, so it should be sufficient to only close the underlying <code>fw</code>.</p>\n\n<p>On the other hand, the syntax is a bit irregular and also, Eclipse issues a warning, which I believe is a false alarm, but it is still a warning that one has to deal with:</p>\n\n<blockquote>\n  <p>Resource leak: 'bw' is never closed</p>\n</blockquote>\n\n<hr>\n\n<p>So, which approach to go for? Or have I missed some other idiom that is <em>the correct</em> one?</p>\n"},{"tags":["java","spring-integration","sftp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695226790,"creation_date":1695225822,"answer_id":77144196,"question_id":77143594,"body_markdown":"Apparently those algorithms have been deprecated: https://issues.apache.org/jira/browse/SSHD-1004.\r\n\r\nThis SO thread explains how to enable those old keys: https://stackoverflow.com/questions/66986656/mina-sshd-enable-kex-with-sha1-in-version-2-6-0.\r\n\r\nThe `DefaultSftpSessionFactory` supports an external `SshClient`:\r\n\r\n\t/**\r\n\t * Instantiate based on the provided {@link SshClient}, e.g. some extension for HTTP/SOCKS.\r\n\t * @param sshClient the {@link SshClient} instance.\r\n\t * @param isSharedSession true if the session is to be shared.\r\n\t */\r\n\tpublic DefaultSftpSessionFactory(SshClient sshClient, boolean isSharedSession) {\r\n\r\n\r\nSo, you need to do like this:\r\n\r\n    SshClient client = SshClient.setUpDefaultClient();\r\n    client.setKeyExchangeFactories(NamedFactory.setUpTransformedFactories(\r\n            false,\r\n            BuiltinDHFactories.VALUES,\r\n            ClientBuilder.DH2KEX\r\n        ));\r\n    client.setSignatureFactories(new ArrayList&lt;&gt;(BuiltinSignatures.VALUES))\r\n\r\nand inject that `client` into `DefaultSftpSessionFactory`.","title":"Spring Integration SFTP connection fails - Unable to negotiate key exchange for kex algorithms","body":"<p>Apparently those algorithms have been deprecated: <a href=\"https://issues.apache.org/jira/browse/SSHD-1004\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SSHD-1004</a>.</p>\n<p>This SO thread explains how to enable those old keys: <a href=\"https://stackoverflow.com/questions/66986656/mina-sshd-enable-kex-with-sha1-in-version-2-6-0\">Mina SSHD enable KEX with SHA1 in version 2.6.0</a>.</p>\n<p>The <code>DefaultSftpSessionFactory</code> supports an external <code>SshClient</code>:</p>\n<pre><code>/**\n * Instantiate based on the provided {@link SshClient}, e.g. some extension for HTTP/SOCKS.\n * @param sshClient the {@link SshClient} instance.\n * @param isSharedSession true if the session is to be shared.\n */\npublic DefaultSftpSessionFactory(SshClient sshClient, boolean isSharedSession) {\n</code></pre>\n<p>So, you need to do like this:</p>\n<pre><code>SshClient client = SshClient.setUpDefaultClient();\nclient.setKeyExchangeFactories(NamedFactory.setUpTransformedFactories(\n        false,\n        BuiltinDHFactories.VALUES,\n        ClientBuilder.DH2KEX\n    ));\nclient.setSignatureFactories(new ArrayList&lt;&gt;(BuiltinSignatures.VALUES))\n</code></pre>\n<p>and inject that <code>client</code> into <code>DefaultSftpSessionFactory</code>.</p>\n"}],"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77144196,"answer_count":1,"score":1,"last_activity_date":1695226790,"creation_date":1695221076,"question_id":77143594,"body_markdown":"I am using Spring Integration (Version: 6.1.2) to connect to an SFTP server. While creating an SFTPSession, I get this exception - \r\n\r\n    java.lang.IllegalStateException: failed to create SFTP Session\r\n    ....\r\n    Caused by: org.apache.sshd.common.SshException: Unable to negotiate key exchange for kex algorithms (\r\n    \r\n    client: \r\n    curve25519-sha256,\r\n    curve25519-sha256@libssh.org,\r\n    curve448-sha512,\r\n    ecdh-sha2-nistp521,\r\n    ecdh-sha2-nistp384,\r\n    ecdh-sha2-nistp256,\r\n    diffie-hellman-group-exchange-sha256,\r\n    diffie-hellman-group18-sha512,\r\n    diffie-hellman-group17-sha512,\r\n    diffie-hellman-group16-sha512,\r\n    diffie-hellman-group15-sha512,\r\n    diffie-hellman-group14-sha256,\r\n    ext-info-c\r\n    \r\n    server: \r\n    diffie-hellman-group1-sha1,\r\n    diffie-hellman-group14-sha1)\r\n\r\nObviously, the server only supports the old algorithms. How do I add support for these algorithms on my SFTP session?\r\n\r\nHere is my code -\r\n\r\n    DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n    factory.setHost(&quot;ftp.sssss.com&quot;);\r\n    factory.setPort(Integer.valueOf(22));\r\n    factory.setAllowUnknownKeys(true);\r\n    factory.setUser(&quot;user&quot;);\r\n    factory.setPassword(&quot;password&quot;);\r\n    \r\n    SftpSession sftpSession = factory.getSession();\r\n\r\n\r\n","title":"Spring Integration SFTP connection fails - Unable to negotiate key exchange for kex algorithms","body":"<p>I am using Spring Integration (Version: 6.1.2) to connect to an SFTP server. While creating an SFTPSession, I get this exception -</p>\n<pre><code>java.lang.IllegalStateException: failed to create SFTP Session\n....\nCaused by: org.apache.sshd.common.SshException: Unable to negotiate key exchange for kex algorithms (\n\nclient: \ncurve25519-sha256,\ncurve25519-sha256@libssh.org,\ncurve448-sha512,\necdh-sha2-nistp521,\necdh-sha2-nistp384,\necdh-sha2-nistp256,\ndiffie-hellman-group-exchange-sha256,\ndiffie-hellman-group18-sha512,\ndiffie-hellman-group17-sha512,\ndiffie-hellman-group16-sha512,\ndiffie-hellman-group15-sha512,\ndiffie-hellman-group14-sha256,\next-info-c\n\nserver: \ndiffie-hellman-group1-sha1,\ndiffie-hellman-group14-sha1)\n</code></pre>\n<p>Obviously, the server only supports the old algorithms. How do I add support for these algorithms on my SFTP session?</p>\n<p>Here is my code -</p>\n<pre><code>DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\nfactory.setHost(&quot;ftp.sssss.com&quot;);\nfactory.setPort(Integer.valueOf(22));\nfactory.setAllowUnknownKeys(true);\nfactory.setUser(&quot;user&quot;);\nfactory.setPassword(&quot;password&quot;);\n\nSftpSession sftpSession = factory.getSession();\n</code></pre>\n"},{"tags":["java","spring","concurrency","jvm","java.util.concurrent"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695286426,"post_id":77144179,"comment_id":136005043,"body_markdown":"Letting handling of `InterruptedException` aside, it’s equivalent to `CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture(new Service()) .thenComposeAsync(Service::helloFuture);`","body":"Letting handling of <code>InterruptedException</code> aside, it’s equivalent to <code>CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture(new Service()) .thenComposeAsync(Service::helloFuture);</code>"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226613,"creation_date":1695226613,"answer_id":77144293,"question_id":77144179,"body_markdown":"In the code you&#39;ve shown, you only create the `Future` after `helloFuture` has finished executing. There is no magic going on there: The method runs in exactly the order you think it does by reading the code. The method uses `CompletableFuture.completedFuture`, which does exactly what you think: It returns a new `Future` instance in an already-completed state. And the `helloFuture` call in the `Test` class will block until all of that is done.","title":"How does the jvm return a Future object reference before the asynchronous method has completed","body":"<p>In the code you've shown, you only create the <code>Future</code> after <code>helloFuture</code> has finished executing. There is no magic going on there: The method runs in exactly the order you think it does by reading the code. The method uses <code>CompletableFuture.completedFuture</code>, which does exactly what you think: It returns a new <code>Future</code> instance in an already-completed state. And the <code>helloFuture</code> call in the <code>Test</code> class will block until all of that is done.</p>\n"}],"owner":{"account_id":293433,"reputation":8693,"user_id":596720,"accept_rate":78,"display_name":"Abe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695226613,"creation_date":1695225656,"question_id":77144179,"body_markdown":"Consider the following code\r\n```java\r\nclass Test {\r\n  public void method1() {\r\n    CompletableFuture&lt;String&gt; future = helloFuture();\r\n    assertEquals(&quot;done&quot;, future.get());\r\n  }\r\n}\r\n\r\nclass Service {\r\n  @Async\r\n  public CompletableFuture&lt;String&gt; helloFuture() throws InterruptedException {\r\n    System.out.println(&quot;hello future&quot;);\r\n    Thread.sleep(100);\r\n    return CompletableFuture.completedFuture(&quot;done&quot;);\r\n  }\r\n}\r\n```\r\n\r\nThe `helloFuture` method only returns the CompletableFuture in the last line **after** it has done its work. But we get a reference to the returned CompletableFuture in the test method **when** the `helloFuture` starts executing and start to wait for it in the main thread (using the `get` method). So how does the calling method get a reference to the `CompletableFuture` even before it is created in the `helloFuture` method?\r\n\r\nThis is in the context of Spring, but even for regular `ExecutorService.submit` I have the same question. I guess it is possible that in a regular `ExecutorService` the internal implementation first creates and returns a `Future` object in the calling thread and queues up the task to be executed in the thread pool.","title":"How does the jvm return a Future object reference before the asynchronous method has completed","body":"<p>Consider the following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n  public void method1() {\n    CompletableFuture&lt;String&gt; future = helloFuture();\n    assertEquals(&quot;done&quot;, future.get());\n  }\n}\n\nclass Service {\n  @Async\n  public CompletableFuture&lt;String&gt; helloFuture() throws InterruptedException {\n    System.out.println(&quot;hello future&quot;);\n    Thread.sleep(100);\n    return CompletableFuture.completedFuture(&quot;done&quot;);\n  }\n}\n</code></pre>\n<p>The <code>helloFuture</code> method only returns the CompletableFuture in the last line <strong>after</strong> it has done its work. But we get a reference to the returned CompletableFuture in the test method <strong>when</strong> the <code>helloFuture</code> starts executing and start to wait for it in the main thread (using the <code>get</code> method). So how does the calling method get a reference to the <code>CompletableFuture</code> even before it is created in the <code>helloFuture</code> method?</p>\n<p>This is in the context of Spring, but even for regular <code>ExecutorService.submit</code> I have the same question. I guess it is possible that in a regular <code>ExecutorService</code> the internal implementation first creates and returns a <code>Future</code> object in the calling thread and queues up the task to be executed in the thread pool.</p>\n"},{"tags":["java","gitlab","dockerfile","cicd"],"owner":{"account_id":29493214,"reputation":1,"user_id":22601858,"display_name":"Mohamed Attia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695226541,"creation_date":1695226541,"question_id":77144286,"body_markdown":"Greetings,\r\n\r\nI need a support on this issue, I got totally mad about this issue, I tried to use the well known code of Pet Clinc and I forked it to my Gitlab repo, the problem I am facing as attached [enter image description here](https://i.stack.imgur.com/R4fT1.jpg)\r\n\r\nI did made the code below on the CI.yml file as usual, \r\n**\r\n#start of code##########**\r\n\r\nstages:\r\n  - build\r\n  - package\r\n  - deploy\r\n\r\nmaven-build:\r\n  stage: build\r\n  image: maven:latest #ubuntu:22.04\r\n  cache:\r\n    paths:\r\n      - target\r\n  script:\r\n    - echo &quot;Compiling the code...&quot;\r\n    - echo &quot;Compile complete.&quot;   \r\n    - apt-get update -y \r\n    - &#39;command -v ssh-agent &gt;/dev/null || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )&#39;\r\n    - apt-get install software-properties-common -y\r\n    - apt-get install curl -y\r\n    - apt-get install wget -y\r\n    - apt-get install make -y\r\n    - apt-get install gcc -y\r\n    - apt-get install libc6-dev -y\r\n    - add-apt-repository ppa:git-core/ppa -y\r\n    - apt-get install libssl-dev -y\r\n    - apt install build-essential procps curl file git -y\r\n    - apt install bash-completion -y\r\n    - apt-get install curl -y\r\n    #- /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n    - apt-get install openjdk-17-jdk -y\r\n    - apt-get install -y ruby openjdk-8-jdk openjdk-11-jdk openjdk-17-jdk\r\n    - update-alternatives --set java /usr/lib/jvm/java-17-openjdk-amd64/bin/java\r\n    - update-alternatives --set javac /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\r\n    - apt-get install wget -y\r\n    - apt-get install -y openjdk-17-jdk\r\n    - mvn -version\r\n    - git clone https://github.com/spring-projects/spring-petclinic.git\r\n    - cd spring-petclinic\r\n    - ./mvnw package\r\n    -  java -jar target/*.jar &amp;\r\n    #- mvn package\r\n    #- java -jar -e -X -spring-javaformat:apply target1/spring-petclinic-2.1.0.jar &amp;  \r\n                                                 \r\n  artifacts:\r\n    paths:\r\n      - target/*.jar\r\n#\r\ndocker-package:\r\n  \r\n  image: docker:20.10.16\r\n  stage: package\r\n  services:\r\n    - docker:20.10.16-dind\r\n  script:\r\n    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\r\n    - docker build -t $CI_REGISTRY/group/project/image:latest .\r\n    - docker push $CI_REGISTRY/group/project/image:latest\r\n\r\n\r\nand I prepared another File for Dockerfile and used the usual command for build the image as per the CI/CD files above, \r\n\r\n**##Start of the code###**\r\n\r\nFROM maven:latest\r\n\r\nWORKDIR /src\r\n\r\nCOPY .mvn/ .mvn\r\nCOPY mvnw pom.xml ./\r\n\r\ngit clone https://github.com/spring-projects/spring-petclinic.git\r\ncd spring-petclinic\r\n\r\nCOPY src ./src\r\n \r\nRUN ./mvnw package\r\nRUN java -jar target/*.jar\r\n\r\n\r\n\r\nENV PORT 5000\r\nEXPOSE $PORT\r\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;mvn -Dserver.port=${PORT} spring-boot:run&quot; ]\r\n\r\n\r\nany clue how can I fix it? \r\n\r\n\r\n\r\nI tried to edit the file I mean the Pipeline file but it was working just fine, the problem I believe is on my Docker file, I used this repo for my project... \r\n\r\nhttps://spring-petclinic.github.io/","title":"&quot;Failed to build and Push Java app Docker image to Gitlab Registry","body":"<p>Greetings,</p>\n<p>I need a support on this issue, I got totally mad about this issue, I tried to use the well known code of Pet Clinc and I forked it to my Gitlab repo, the problem I am facing as attached <a href=\"https://i.stack.imgur.com/R4fT1.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I did made the code below on the CI.yml file as usual,\n**\n#start of code##########**</p>\n<p>stages:</p>\n<ul>\n<li>build</li>\n<li>package</li>\n<li>deploy</li>\n</ul>\n<p>maven-build:\nstage: build\nimage: maven:latest #ubuntu:22.04\ncache:\npaths:\n- target\nscript:\n- echo &quot;Compiling the code...&quot;\n- echo &quot;Compile complete.&quot;<br />\n- apt-get update -y\n- 'command -v ssh-agent &gt;/dev/null || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )'\n- apt-get install software-properties-common -y\n- apt-get install curl -y\n- apt-get install wget -y\n- apt-get install make -y\n- apt-get install gcc -y\n- apt-get install libc6-dev -y\n- add-apt-repository ppa:git-core/ppa -y\n- apt-get install libssl-dev -y\n- apt install build-essential procps curl file git -y\n- apt install bash-completion -y\n- apt-get install curl -y\n#- /bin/bash -c &quot;$(curl -fsSL <a href=\"https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh</a>)&quot;\n- apt-get install openjdk-17-jdk -y\n- apt-get install -y ruby openjdk-8-jdk openjdk-11-jdk openjdk-17-jdk\n- update-alternatives --set java /usr/lib/jvm/java-17-openjdk-amd64/bin/java\n- update-alternatives --set javac /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\n- apt-get install wget -y\n- apt-get install -y openjdk-17-jdk\n- mvn -version\n- git clone <a href=\"https://github.com/spring-projects/spring-petclinic.git\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-petclinic.git</a>\n- cd spring-petclinic\n- ./mvnw package\n-  java -jar target/*.jar &amp;\n#- mvn package\n#- java -jar -e -X -spring-javaformat:apply target1/spring-petclinic-2.1.0.jar &amp;</p>\n<p>artifacts:\npaths:\n- target/*.jar</p>\n<h1></h1>\n<p>docker-package:</p>\n<p>image: docker:20.10.16\nstage: package\nservices:\n- docker:20.10.16-dind\nscript:\n- docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\n- docker build -t $CI_REGISTRY/group/project/image:latest .\n- docker push $CI_REGISTRY/group/project/image:latest</p>\n<p>and I prepared another File for Dockerfile and used the usual command for build the image as per the CI/CD files above,</p>\n<p><strong>##Start of the code###</strong></p>\n<p>FROM maven:latest</p>\n<p>WORKDIR /src</p>\n<p>COPY .mvn/ .mvn\nCOPY mvnw pom.xml ./</p>\n<p>git clone <a href=\"https://github.com/spring-projects/spring-petclinic.git\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-petclinic.git</a>\ncd spring-petclinic</p>\n<p>COPY src ./src</p>\n<p>RUN ./mvnw package\nRUN java -jar target/*.jar</p>\n<p>ENV PORT 5000\nEXPOSE $PORT\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;mvn -Dserver.port=${PORT} spring-boot:run&quot; ]</p>\n<p>any clue how can I fix it?</p>\n<p>I tried to edit the file I mean the Pipeline file but it was working just fine, the problem I believe is on my Docker file, I used this repo for my project...</p>\n<p><a href=\"https://spring-petclinic.github.io/\" rel=\"nofollow noreferrer\">https://spring-petclinic.github.io/</a></p>\n"},{"tags":["java","hibernate","jpa","orm"],"answers":[{"tags":[],"owner":{"account_id":2540497,"reputation":616,"user_id":2206401,"accept_rate":81,"display_name":"Shikhar Subedi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378880735,"creation_date":1378880735,"answer_id":18734060,"question_id":18733872,"body_markdown":"thats because in the database, the many side has the foreign key. for example consider tables \r\nUser and Transaction with relation user has many transactions. In the transaction table, every transaction has a user_id which is a foreign key to the user table not the other way round. User table does not have a transaction_id.\r\n","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>thats because in the database, the many side has the foreign key. for example consider tables \nUser and Transaction with relation user has many transactions. In the transaction table, every transaction has a user_id which is a foreign key to the user table not the other way round. User table does not have a transaction_id.</p>\n"},{"tags":[],"owner":{"account_id":2271272,"reputation":732,"user_id":1998602,"display_name":"reggert"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378881021,"creation_date":1378881021,"answer_id":18734129,"question_id":18733872,"body_markdown":"Each of the (potentially many) rows representing the entity on the &quot;many&quot; side contain (foreign key) references back to single row representing the entity on the &quot;one&quot; side of the relationship as a single database column. In order for the &quot;one&quot; side to own the relationship, the keys for all of the rows corresponding to the &quot;many&quot; side would have to fit into a single database table row, which isn&#39;t practical.\r\n\r\nIn other words, if `A` is the &quot;many&quot; side and `B` is the &quot;one side&quot;, for each row in the `B` table, there are potentially several rows in table `A` that contain a reference to it. Each of those B rows can store the key of the linked A row in a single column. There&#39;s no way for that one A row to store the keys of all those B rows.\r\n\r\nFor the same reason, in the case of a many-to-many relationship, a join table always ends up getting used in addition to the tables representing the entities in order to link the foreign key references as single columns.","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>Each of the (potentially many) rows representing the entity on the \"many\" side contain (foreign key) references back to single row representing the entity on the \"one\" side of the relationship as a single database column. In order for the \"one\" side to own the relationship, the keys for all of the rows corresponding to the \"many\" side would have to fit into a single database table row, which isn't practical.</p>\n\n<p>In other words, if <code>A</code> is the \"many\" side and <code>B</code> is the \"one side\", for each row in the <code>B</code> table, there are potentially several rows in table <code>A</code> that contain a reference to it. Each of those B rows can store the key of the linked A row in a single column. There's no way for that one A row to store the keys of all those B rows.</p>\n\n<p>For the same reason, in the case of a many-to-many relationship, a join table always ends up getting used in addition to the tables representing the entities in order to link the foreign key references as single columns.</p>\n"},{"tags":[],"owner":{"account_id":26055092,"reputation":1,"user_id":19757596,"display_name":"Ali-Hassan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226331,"creation_date":1695212688,"answer_id":77142403,"question_id":18733872,"body_markdown":"This makes sense. \r\n\r\nAssume you have two entities: **Post**, which represents the &quot;one&quot; side, and **Comments**, which represents the &quot;many&quot; side of the relationship.\r\nConsider that the JPA allows us to specify the mappedBy attribute in the @**ManyToOne** annotation. Thus, it means **Post** will be the owning side and **Comment** will be the inverse side and in the database, the table **post** will have a foreign key referring to the primary key of the table **comments**.\r\n In this scenario, the issue is that one instance of the entity **Post** has to store multiple instances of the entity **Comments**, and an ORM framework will fail to reflect this relationship in the relational database because one record cannot contain multiple foreign key values(practically).\r\n\r\nThat&#39;s why the &quot;one&quot; side in a one to many bi-directional relationship can&#39;t be the owning side. \r\n","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>This makes sense.</p>\n<p>Assume you have two entities: <strong>Post</strong>, which represents the &quot;one&quot; side, and <strong>Comments</strong>, which represents the &quot;many&quot; side of the relationship.\nConsider that the JPA allows us to specify the mappedBy attribute in the @<strong>ManyToOne</strong> annotation. Thus, it means <strong>Post</strong> will be the owning side and <strong>Comment</strong> will be the inverse side and in the database, the table <strong>post</strong> will have a foreign key referring to the primary key of the table <strong>comments</strong>.\nIn this scenario, the issue is that one instance of the entity <strong>Post</strong> has to store multiple instances of the entity <strong>Comments</strong>, and an ORM framework will fail to reflect this relationship in the relational database because one record cannot contain multiple foreign key values(practically).</p>\n<p>That's why the &quot;one&quot; side in a one to many bi-directional relationship can't be the owning side.</p>\n"}],"owner":{"account_id":3286612,"reputation":643,"user_id":2765953,"accept_rate":56,"display_name":"homeAccount"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":700,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1695226331,"creation_date":1378879955,"question_id":18733872,"body_markdown":"documentation says:\r\n\r\n \r\n\r\n&gt;    The many side of many-to-one bidirectional relationships must not\r\n&gt; define the mappedBy element. The many side is always the owning side\r\n&gt; of the relationship.\r\n\r\nCan you explain why? what the reason?","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>documentation says:</p>\n\n<blockquote>\n  <p>The many side of many-to-one bidirectional relationships must not\n  define the mappedBy element. The many side is always the owning side\n  of the relationship.</p>\n</blockquote>\n\n<p>Can you explain why? what the reason?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695226386,"post_id":77144253,"comment_id":135997143,"body_markdown":"I have no idea if that&#39;s possible, but I added the `android-studio` tag so that someone who does know can find this question more easily","body":"I have no idea if that&#39;s possible, but I added the <code>android-studio</code> tag so that someone who does know can find this question more easily"}],"owner":{"account_id":9903257,"reputation":37,"user_id":7332575,"display_name":"Wayne Lampiasi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695226306,"creation_date":1695226257,"question_id":77144253,"body_markdown":"I am legally blind.  i have a visual issue in android studio. \r\ni set most of my fonts to bold.\r\nbut, the squiggly red line under any incorrect \r\ncode would be easier to see if it were also bold.\r\nis there any way in android studio to make the red\r\nline bold?","title":"Visual isssue with Red line in Android Studio","body":"<p>I am legally blind.  i have a visual issue in android studio.\ni set most of my fonts to bold.\nbut, the squiggly red line under any incorrect\ncode would be easier to see if it were also bold.\nis there any way in android studio to make the red\nline bold?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695199173,"post_id":77135669,"comment_id":135990793,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695211649,"creation_date":1695196252,"answer_id":77140367,"question_id":77135669,"body_markdown":"Increase the wait time, when Selenium lands on any new page, or you can use the below mechanism and manipulate these codes after reaching every search result page.\r\n    \r\n    driver.manage().timeouts().scriptTimeout(Duration.ofSeconds(30));","title":"Not able to get all the search results from each page","body":"<p>Increase the wait time, when Selenium lands on any new page, or you can use the below mechanism and manipulate these codes after reaching every search result page.</p>\n<pre><code>driver.manage().timeouts().scriptTimeout(Duration.ofSeconds(30));\n</code></pre>\n"}],"owner":{"account_id":29482948,"reputation":1,"user_id":22593465,"display_name":"stranger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695226114,"creation_date":1695135206,"question_id":77135669,"body_markdown":"I was trying to automate a scenario: From amazon.com search for iphone and get the title of all the search results. In each page I do see that there are 18 search results and on the last page that is on 20th page it gives sometimes less than 10 results.\r\n\r\nI am able to get the results but the numbers are not consistent. Sometimes I do get 18 for a page but then on other pages I get less than 18 as well.\r\n\r\nI did try wait with expected conditions like presenceOfAllElementsLocated and visibility as well but both of them did not work. `numberOfElementsToBeMoreThan` did work but again the last page that os 20th page gives less than 10 results.\r\nOne more thing, using Thread.sleep also provide correct results. I am using Java. Any help would be appreciated.\r\n\r\nEdit adding the code what I did:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n    \r\n            browserUtil.openURL(&quot;https://amazon.in&quot;);\r\n            ElementUtils elementUtils = new ElementUtils(driver);\r\n    \r\n            By searchField = By.id(&quot;twotabsearchtextbox&quot;);\r\n            By searchButton = By.id(&quot;nav-search-submit-button&quot;);\r\n            By eachResult = By.xpath(&quot;//div[starts-with(@cel_widget_id, &#39;MAIN-SEARCH_RESULTS&#39;)]//h2//span&quot;);\r\n            By nextButton = By.className(&quot;s-pagination-next&quot;);\r\n    \r\n            elementUtils.sendKeysToTextField(searchField, &quot;iPhone&quot;);\r\n            elementUtils.clickOnElement(searchButton);\r\n            System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\r\n    \r\n            while(!Objects.equals(elementUtils.getWebElement(nextButton).getAttribute(&quot;aria-disabled&quot;), &quot;true&quot;)){\r\n                elementUtils.clickOnElement(nextButton);\r\n                System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\r\n            }\r\n    \r\n            browserUtil.closeBrowser();\r\n\r\nMy elements utility looks like this:\r\n\r\n    public ElementUtils(WebDriver driver){\r\n            this.driver = driver;\r\n            wait = new WebDriverWait(driver, Duration.ofSeconds(20));\r\n            actions = new Actions(driver);\r\n        }\r\n    \r\n        public WebElement getWebElement(By locator){\r\n            return wait.until(ExpectedConditions.presenceOfElementLocated(locator));\r\n        }\r\n    \r\n        public List&lt;WebElement&gt; getWebElements(By locator){\r\n            return wait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(locator));\r\n        }\r\n        public List&lt;WebElement&gt; getWebElementsBySize(By locator, int size){\r\n            return wait.until(ExpectedConditions.numberOfElementsToBeMoreThan(locator, size));\r\n    }\r\n","title":"Not able to get all the search results from each page","body":"<p>I was trying to automate a scenario: From amazon.com search for iphone and get the title of all the search results. In each page I do see that there are 18 search results and on the last page that is on 20th page it gives sometimes less than 10 results.</p>\n<p>I am able to get the results but the numbers are not consistent. Sometimes I do get 18 for a page but then on other pages I get less than 18 as well.</p>\n<p>I did try wait with expected conditions like presenceOfAllElementsLocated and visibility as well but both of them did not work. <code>numberOfElementsToBeMoreThan</code> did work but again the last page that os 20th page gives less than 10 results.\nOne more thing, using Thread.sleep also provide correct results. I am using Java. Any help would be appreciated.</p>\n<p>Edit adding the code what I did:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n\n        browserUtil.openURL(&quot;https://amazon.in&quot;);\n        ElementUtils elementUtils = new ElementUtils(driver);\n\n        By searchField = By.id(&quot;twotabsearchtextbox&quot;);\n        By searchButton = By.id(&quot;nav-search-submit-button&quot;);\n        By eachResult = By.xpath(&quot;//div[starts-with(@cel_widget_id, 'MAIN-SEARCH_RESULTS')]//h2//span&quot;);\n        By nextButton = By.className(&quot;s-pagination-next&quot;);\n\n        elementUtils.sendKeysToTextField(searchField, &quot;iPhone&quot;);\n        elementUtils.clickOnElement(searchButton);\n        System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\n\n        while(!Objects.equals(elementUtils.getWebElement(nextButton).getAttribute(&quot;aria-disabled&quot;), &quot;true&quot;)){\n            elementUtils.clickOnElement(nextButton);\n            System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\n        }\n\n        browserUtil.closeBrowser();\n</code></pre>\n<p>My elements utility looks like this:</p>\n<pre><code>public ElementUtils(WebDriver driver){\n        this.driver = driver;\n        wait = new WebDriverWait(driver, Duration.ofSeconds(20));\n        actions = new Actions(driver);\n    }\n\n    public WebElement getWebElement(By locator){\n        return wait.until(ExpectedConditions.presenceOfElementLocated(locator));\n    }\n\n    public List&lt;WebElement&gt; getWebElements(By locator){\n        return wait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(locator));\n    }\n    public List&lt;WebElement&gt; getWebElementsBySize(By locator, int size){\n        return wait.until(ExpectedConditions.numberOfElementsToBeMoreThan(locator, size));\n}\n</code></pre>\n"},{"tags":["java","spring","gradle","mapstruct"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1659545540,"post_id":73223385,"comment_id":129321571,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":5636901,"reputation":171,"user_id":4462119,"display_name":"Thomas Carlisle"},"score":0,"creation_date":1697226259,"post_id":73223385,"comment_id":136258297,"body_markdown":"While it does seem to be lacking without code, this isn&#39;t even a problem with the code. I had a project that compiled fine 2 hrs ago, made no changes, and now it can&#39;t compile. The answer below explaining how mapstruct creates file in the build dir, is spot on correct.","body":"While it does seem to be lacking without code, this isn&#39;t even a problem with the code. I had a project that compiled fine 2 hrs ago, made no changes, and now it can&#39;t compile. The answer below explaining how mapstruct creates file in the build dir, is spot on correct."}],"answers":[{"tags":[],"owner":{"account_id":15089540,"reputation":141,"user_id":10889826,"display_name":"William Buron"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1659622324,"creation_date":1659622324,"answer_id":73237439,"question_id":73223385,"body_markdown":"It seems that you already have a file call RecipeMapperImpl if i look your image.  \r\nBut the file didn&#39;t appear on the left in project explorer.  \r\n\r\nMapStruct will create a file RecipeMapperImpl so he wont success if one already exist.\r\n\r\nI suggest to remove the file RecipeMapperImpl in your project if he still exist and run a clean compile with gradle.  \r\n\r\nI faced the same error for this reason. Hope it help.\r\n","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>It seems that you already have a file call RecipeMapperImpl if i look your image.<br />\nBut the file didn't appear on the left in project explorer.</p>\n<p>MapStruct will create a file RecipeMapperImpl so he wont success if one already exist.</p>\n<p>I suggest to remove the file RecipeMapperImpl in your project if he still exist and run a clean compile with gradle.</p>\n<p>I faced the same error for this reason. Hope it help.</p>\n"},{"tags":[],"owner":{"account_id":25290436,"reputation":1,"user_id":19116658,"display_name":"Lucas Gutierrez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678102074,"creation_date":1678102074,"answer_id":75650303,"question_id":73223385,"body_markdown":"MapStruct automatically creates in the folder target/generated-sources/... the basic implementation to the methods declared in your interface. Try to delete the .java file autogenerated and compile again.\r\n","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>MapStruct automatically creates in the folder target/generated-sources/... the basic implementation to the methods declared in your interface. Try to delete the .java file autogenerated and compile again.</p>\n"},{"tags":[],"owner":{"account_id":9069635,"reputation":91,"user_id":6753339,"display_name":"dalag32"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695225979,"creation_date":1695225979,"answer_id":77144210,"question_id":73223385,"body_markdown":"I had the same problem when I was using one more plugin for code generation. In my case, it was `com.sun.xml.ws:jaxws-maven-plugin:4.0.1`, which generates java classes from WSDL. When I changed sourceDestinationDir for `jaxws-maven-plugin` to new destination `{project.baseDir}/target/generated-source/xjc/` (instead of `{project.baseDir}/target/generated-source/`, it solved my problem. \r\n\r\nSo try to check if you are not using some different plugin/processor that generates code to the same location as mapstruct.","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>I had the same problem when I was using one more plugin for code generation. In my case, it was <code>com.sun.xml.ws:jaxws-maven-plugin:4.0.1</code>, which generates java classes from WSDL. When I changed sourceDestinationDir for <code>jaxws-maven-plugin</code> to new destination <code>{project.baseDir}/target/generated-source/xjc/</code> (instead of <code>{project.baseDir}/target/generated-source/</code>, it solved my problem.</p>\n<p>So try to check if you are not using some different plugin/processor that generates code to the same location as mapstruct.</p>\n"}],"owner":{"account_id":25968330,"reputation":21,"user_id":19683969,"display_name":"Miedzic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695225979,"creation_date":1659537428,"question_id":73223385,"body_markdown":"it was my first attempt using gradle and i got some weird problem i never heard of. Google didn&#39;t help me too much so i am humbly asking for some help. I started using mapstruct after i got some problems with my dao Recipe after adding annotation entity.\r\n\r\nI have 2 dependencies related to mapstruct on my gradle file\r\n\r\nimplementation &#39;org.mapstruct:mapstruct:1.5.2.Final&#39;\r\n\r\nannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.2.Final&#39;\r\n\r\nthis is my code error, what is interesting is that code works perfectly, but i can&#39;t compile it again. If u need some code i&#39;ll be happy to provide, as u can see on the screen i have some code generated, but i&#39;m unsure when and why it stopped working.\r\n\r\n\r\n    Internal error in the mapping processor: java.lang.RuntimeException: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:59)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.writeToSourceFile(MapperRenderingProcessor.java:39)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:29)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:24)  \tat org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:350)  \tat org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:330)  \tat org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:279)  \tat org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:174)  \tat org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)  \tat org.gradle.api.internal.tasks.compile.processing.IsolatingProcessor.process(IsolatingProcessor.java:50)  \tat org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.access$401(TimeTrackingProcessor.java:37)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:99)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:96)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.track(TimeTrackingProcessor.java:117)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.process(TimeTrackingProcessor.java:96)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:985)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:901)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1227)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1340)  \tat jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1258)  \tat jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:936)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:104)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.handleExceptions(JavacTaskImpl.java:147)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)  \tat org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:89)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)  \tat org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)  \tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:54)  \tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)  \tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)  \tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)  \tat org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)  \tat org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)  \tat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)  \tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)  \tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)  \tat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)  \tat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)  \tat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)  \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)  \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)  \tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)  \tat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)  \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)  \tat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)  \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)  \tat org.gradle.api.internal.tasks.execution.TaskExecution$2.run(TaskExecution.java:239)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:224)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:207)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:190)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:168)  \tat org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)  \tat org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)  \tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)  \tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)  \tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)  \tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)  \tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)  \tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)  \tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)  \tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)  \tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)  \tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)  \tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)  \tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)  \tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)  \tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)  \tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)  \tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)  \tat org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:188)  \tat org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)  \tat org.gradle.internal.Either$Right.fold(Either.java:175)  \tat org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)  \tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)  \tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)  \tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:38)  \tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:27)  \tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)  \tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:109)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)  \tat java.base/java.util.Optional.orElseGet(Optional.java:369)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)  \tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)  \tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)  \tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)  \tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)  \tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)  \tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)  \tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)  \tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:93)  \tat java.base/java.util.Optional.orElseGet(Optional.java:369)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:93)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)  \tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)  \tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)  \tat org.gradle.api.internal.tasks.execution.TaskExecution$3.withWorkspace(TaskExecution.java:284)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)  \tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)  \tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)  \tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)  \tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)  \tat org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)  \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:142)  \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)  \tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)  \tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)  \tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)  \tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)  \tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)  \tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)  \tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:402)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:389)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:382)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:368)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)  \tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)  \tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)  \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)  \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)  \tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)  \tat java.base/java.lang.Thread.run(Thread.java:829)  Caused by: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.checkNameAndExistence(JavacFiler.java:724)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceOrClassFile(JavacFiler.java:489)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceFile(JavacFiler.java:426)  \tat org.gradle.api.internal.tasks.compile.processing.IncrementalFiler.createSourceFile(IncrementalFiler.java:45)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:56)  \t... 184 more\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n[image of error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zDtOA.png","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>it was my first attempt using gradle and i got some weird problem i never heard of. Google didn't help me too much so i am humbly asking for some help. I started using mapstruct after i got some problems with my dao Recipe after adding annotation entity.</p>\n<p>I have 2 dependencies related to mapstruct on my gradle file</p>\n<p>implementation 'org.mapstruct:mapstruct:1.5.2.Final'</p>\n<p>annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.2.Final'</p>\n<p>this is my code error, what is interesting is that code works perfectly, but i can't compile it again. If u need some code i'll be happy to provide, as u can see on the screen i have some code generated, but i'm unsure when and why it stopped working.</p>\n<pre><code>Internal error in the mapping processor: java.lang.RuntimeException: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl    at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:59)      at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.writeToSourceFile(MapperRenderingProcessor.java:39)     at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:29)   at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:24)   at org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:350)     at org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:330)    at org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:279)   at org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:174)     at org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)    at org.gradle.api.internal.tasks.compile.processing.IsolatingProcessor.process(IsolatingProcessor.java:50)      at org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)    at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.access$401(TimeTrackingProcessor.java:37)     at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:99)   at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:96)   at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.track(TimeTrackingProcessor.java:117)     at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.process(TimeTrackingProcessor.java:96)    at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:985)    at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:901)      at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1227)   at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1340)    at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1258)    at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:936)    at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:104)   at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.handleExceptions(JavacTaskImpl.java:147)      at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)    at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)   at org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:89)    at org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)      at org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)      at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:54)   at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)   at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)     at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)     at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)     at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)     at org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)     at org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)      at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)     at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)   at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)   at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)   at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)     at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)     at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)      at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)     at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)    at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)     at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)     at java.base/java.lang.reflect.Method.invoke(Method.java:566)   at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)   at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)   at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)   at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)     at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)   at org.gradle.api.internal.tasks.execution.TaskExecution$2.run(TaskExecution.java:239)      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)      at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:224)      at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:207)     at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:190)     at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:168)    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)     at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)      at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)      at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)     at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)     at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)     at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)     at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)     at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)     at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)     at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)   at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)     at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)     at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)     at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)   at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)   at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)   at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)   at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:188)      at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)      at org.gradle.internal.Either$Right.fold(Either.java:175)   at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)   at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)   at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:38)     at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:27)     at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)     at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)     at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:109)   at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)      at java.base/java.util.Optional.orElseGet(Optional.java:369)    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)   at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)   at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)   at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)   at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)     at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)     at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)      at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)   at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)     at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)     at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:93)    at java.base/java.util.Optional.orElseGet(Optional.java:369)    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:93)     at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)     at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)      at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)   at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)   at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)    at org.gradle.api.internal.tasks.execution.TaskExecution$3.withWorkspace(TaskExecution.java:284)    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)     at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)     at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)     at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)     at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)   at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)   at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)      at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:142)   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)      at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)     at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)   at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)   at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)     at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)   at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)   at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)   at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)      at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)     at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:402)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:389)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:382)      at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:368)      at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)      at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)   at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)   at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)   at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)   at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)    at java.base/java.lang.Thread.run(Thread.java:829)  Caused by: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl      at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.checkNameAndExistence(JavacFiler.java:724)    at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceOrClassFile(JavacFiler.java:489)      at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceFile(JavacFiler.java:426)     at org.gradle.api.internal.tasks.compile.processing.IncrementalFiler.createSourceFile(IncrementalFiler.java:45)     at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:56)      ... 184 more\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zDtOA.png\" rel=\"nofollow noreferrer\">image of error</a></p>\n"},{"tags":["java","xml","spring","maven","jsp"],"answers":[{"tags":[],"owner":{"account_id":17190715,"reputation":563,"user_id":12444527,"display_name":"Trushit Shekhda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580731763,"creation_date":1580731449,"answer_id":60038895,"question_id":60036205,"body_markdown":"return type : `void`\r\n\r\nrequired type : `String`\r\n\r\n**AddController.java** : \r\n\r\n    package com.telusko;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    public class addController {\r\n        @RequestMapping(&quot;/add&quot;)\r\n        public String add() {\r\n            return &quot;display.jsp&quot;;\r\n        }\r\n    }\r\nor else you can do this : \r\n\r\n    package com.telusko;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    public class addController {\r\n        @RequestMapping(&quot;/add&quot;)\r\n        public ModelAndView add() {\r\n            return new ModelAndView(&quot;display.jsp&quot;);\r\n        }\r\n    }","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>return type : <code>void</code></p>\n\n<p>required type : <code>String</code></p>\n\n<p><strong>AddController.java</strong> : </p>\n\n<pre><code>package com.telusko;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public String add() {\n        return \"display.jsp\";\n    }\n}\n</code></pre>\n\n<p>or else you can do this : </p>\n\n<pre><code>package com.telusko;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public ModelAndView add() {\n        return new ModelAndView(\"display.jsp\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12978653,"reputation":306,"user_id":9381872,"display_name":"Berthol Yvano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1580811361,"creation_date":1580810194,"answer_id":60054812,"question_id":60036205,"body_markdown":"This is the servlet you created. You have created a `telusko` servlet on the `DispatcherServlet` class. And then you mapped it with **`/`**. When the application starts, it does not find a function mapped to `/`. So you will have to readjust your web.xml file","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>This is the servlet you created. You have created a <code>telusko</code> servlet on the <code>DispatcherServlet</code> class. And then you mapped it with <strong><code>/</code></strong>. When the application starts, it does not find a function mapped to <code>/</code>. So you will have to readjust your web.xml file</p>\n"},{"tags":[],"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580890456,"creation_date":1580890456,"answer_id":60071507,"question_id":60036205,"body_markdown":"After two days I have finally decided to create a new project and start from new. I guess i had some configuration problems because after I created my new project everything worked smoothly but thanks for your answers.","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>After two days I have finally decided to create a new project and start from new. I guess i had some configuration problems because after I created my new project everything worked smoothly but thanks for your answers.</p>\n"},{"tags":[],"owner":{"account_id":26314862,"reputation":41,"user_id":19977803,"display_name":"Heena Patidar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695225886,"creation_date":1695225886,"answer_id":77144205,"question_id":60036205,"body_markdown":"internalResourceViewResolver bean in servlet could resolve this issue. The InternalResourceViewResolver is a class typically used in a Spring MVC web application to resolve view names to actual view implementations. \r\n\r\n    &lt;bean name=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        \t&lt;property name=&quot;prefix&quot;&gt;\r\n        \t\t&lt;value&gt;/WEB-INF/views/&lt;/value&gt;\r\n        \t&lt;/property&gt;\r\n        \t&lt;property name=&quot;suffix&quot;&gt;\r\n        \t\t&lt;value&gt;.jsp&lt;/value&gt;\r\n        \t&lt;/property&gt;\r\n        &lt;/bean&gt;","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>internalResourceViewResolver bean in servlet could resolve this issue. The InternalResourceViewResolver is a class typically used in a Spring MVC web application to resolve view names to actual view implementations.</p>\n<pre><code>&lt;bean name=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        &lt;property name=&quot;prefix&quot;&gt;\n            &lt;value&gt;/WEB-INF/views/&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;suffix&quot;&gt;\n            &lt;value&gt;.jsp&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1481,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60054812,"answer_count":4,"score":1,"last_activity_date":1695225886,"creation_date":1580721557,"question_id":60036205,"body_markdown":"I&#39;m really new to Spring framework and I&#39;m struggling why I&#39;m getting this warning. I have looked at the questions at StackOverflow and coderanch but it seems that I can&#39;t find my error. I even tried to watch a youtube Spring MVC tutorial twice and I&#39;m doing the same thing as the Youtuber does but I&#39;m still getting this error. I would really appreciate it if you guys could help me. I will put my codes below.\r\n\r\n**pom.xml**\r\n```&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.telusko&lt;/groupId&gt;\r\n  &lt;artifactId&gt;DemoMVC2&lt;/artifactId&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;DemoMVC2 Maven Webapp&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n  &lt;dependencies&gt;\r\n     &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.36&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;finalName&gt;DemoMVC2&lt;/finalName&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**web.xml**\r\n```\r\n&lt;!DOCTYPE web-app PUBLIC\r\n &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;\r\n &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;\r\n\r\n&lt;web-app&gt;\r\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n  \r\n  &lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\torg.springframework.web.servlet.DispatcherServlet\r\n\t\t&lt;/servlet-class&gt;\r\n\t&lt;/servlet&gt;\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\n**telusko-servlet.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:ctx=&quot;http://www.springframework.org/schema/context&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n\thttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\r\n\thttp://www.springframework.org/schema/mvc\r\n\thttp://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n\thttp://www.springframework.org/schema/context\r\n\thttp://www.springframework.org/schema/context/spring-context-2.5.xsd &quot;&gt;\r\n\t\r\n\t\r\n\t&lt;mvc:annotation-driven/&gt;\r\n\t&lt;ctx:component-scan base-package=&quot;com.telusko&quot;&gt;&lt;/ctx:component-scan&gt;\r\n&lt;/beans&gt;\r\n```\r\n**index.jsp**\r\n```\r\n&lt;html&gt;\r\n&lt;body&gt;\r\n&lt;form action=&quot;add&quot;&gt;\r\n\t&lt;input type=&quot;text&quot; name=&quot;t1&quot;&gt;&lt;/input&gt;&lt;br&gt;\r\n\t&lt;input type=&quot;text&quot; name=&quot;t2&quot;&gt;&lt;/input&gt;&lt;br&gt;\r\n\t&lt;input type=&quot;submit&quot;&gt;&lt;/input&gt;\r\n&lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n ```\r\n\r\n**addController.java**\r\n```\r\npackage com.telusko;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class addController {\r\n\t@RequestMapping(&quot;/add&quot;)\r\n\tpublic void add() {\r\n\t\treturn &quot;display.jsp&quot;;\r\n\t}\r\n}\r\n```\r\n**display.jsp**\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;title&gt;Insert title here&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n\tI&#39;m here\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>I'm really new to Spring framework and I'm struggling why I'm getting this warning. I have looked at the questions at StackOverflow and coderanch but it seems that I can't find my error. I even tried to watch a youtube Spring MVC tutorial twice and I'm doing the same thing as the Youtuber does but I'm still getting this error. I would really appreciate it if you guys could help me. I will put my codes below.</p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.telusko&lt;/groupId&gt;\n  &lt;artifactId&gt;DemoMVC2&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;DemoMVC2 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n     &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.36&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;DemoMVC2&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;!DOCTYPE web-app PUBLIC\n \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n \"http://java.sun.com/dtd/web-app_2_3.dtd\" &gt;\n\n&lt;web-app&gt;\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n\n  &lt;servlet&gt;\n        &lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            org.springframework.web.servlet.DispatcherServlet\n        &lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>telusko-servlet.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:ctx=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-2.5.xsd \"&gt;\n\n\n    &lt;mvc:annotation-driven/&gt;\n    &lt;ctx:component-scan base-package=\"com.telusko\"&gt;&lt;/ctx:component-scan&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>index.jsp</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;form action=\"add\"&gt;\n    &lt;input type=\"text\" name=\"t1\"&gt;&lt;/input&gt;&lt;br&gt;\n    &lt;input type=\"text\" name=\"t2\"&gt;&lt;/input&gt;&lt;br&gt;\n    &lt;input type=\"submit\"&gt;&lt;/input&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>addController.java</strong></p>\n\n<pre><code>package com.telusko;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public void add() {\n        return \"display.jsp\";\n    }\n}\n</code></pre>\n\n<p><strong>display.jsp</strong></p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"ISO-8859-1\"&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    I'm here\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1694633362,"post_id":77099876,"comment_id":135918461,"body_markdown":"You don&#39;t show how the updates to the model and scrolling are done. Are you making sure that those changes are done in AWT event thread?","body":"You don&#39;t show how the updates to the model and scrolling are done. Are you making sure that those changes are done in AWT event thread?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694633945,"post_id":77099876,"comment_id":135918573,"body_markdown":"Have you reviewed the tutorial? _[How to Use Scroll Panes (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)](https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)_.","body":"Have you reviewed the tutorial? <i><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">How to Use Scroll Panes (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)</a></i>."},{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1694634472,"post_id":77099876,"comment_id":135918648,"body_markdown":"@JustanotherJavaprogrammer Yes I confirmed it&#39;s getting executed on AWT Event Thread.","body":"@JustanotherJavaprogrammer Yes I confirmed it&#39;s getting executed on AWT Event Thread."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1694637745,"post_id":77099876,"comment_id":135919206,"body_markdown":"Post an [mre] demonstrating the problem. We can&#39;t guess what your application is doing.","body":"Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. We can&#39;t guess what your application is doing."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694642000,"post_id":77099876,"comment_id":135919823,"body_markdown":"I did a quick test, loading a file with 8150 lines and then paging through the table a screen full at a time without issue. Without a [mcve], there&#39;s not much more we can do for you","body":"I did a quick test, loading a file with 8150 lines and then paging through the table a screen full at a time without issue. Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, there&#39;s not much more we can do for you"}],"answers":[{"tags":[],"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695224734,"creation_date":1695224734,"answer_id":77144091,"question_id":77099876,"body_markdown":"By calling a manual repaint fixed the issue. \r\n\r\n    jTable1.setRowSelectionInterval(index, index);\r\n    int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\r\n    jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\r\n    jTable1.repaint();\r\n\r\nIt&#39;s probably not the cleanest solution but it worked in my case.","title":"Java JTable &quot;scrollRectToVisible&quot; Bad Graphics?","body":"<p>By calling a manual repaint fixed the issue.</p>\n<pre><code>jTable1.setRowSelectionInterval(index, index);\nint viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\njTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\njTable1.repaint();\n</code></pre>\n<p>It's probably not the cleanest solution but it worked in my case.</p>\n"}],"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695224734,"creation_date":1694631877,"question_id":77099876,"body_markdown":"I am trying to consectively scroll a JTable, and scroll to the given cell by index with the following code...\r\n\r\n    public void UpdateCurrentStep(final int index) {\r\n        jTable1.setRowSelectionInterval(index, index);\r\n        int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\r\n        jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\r\n    }\r\n\r\nThis scrolls like you would expect. However, occasionally when the JTable updates the graphics can get pretty bad and sometimes unreadable (Shown below).\r\n\r\nNormal Refresh:\r\n[![enter image description here][1]][1]\r\n\r\nBad Refresh:\r\n[![enter image description here][2]][2]\r\n\r\nThe problem is inconsistent. Any ideas or suggestions how to fix this would be appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C5G4I.png\r\n  [2]: https://i.stack.imgur.com/cmw56.png","title":"Java JTable &quot;scrollRectToVisible&quot; Bad Graphics?","body":"<p>I am trying to consectively scroll a JTable, and scroll to the given cell by index with the following code...</p>\n<pre><code>public void UpdateCurrentStep(final int index) {\n    jTable1.setRowSelectionInterval(index, index);\n    int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\n    jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\n}\n</code></pre>\n<p>This scrolls like you would expect. However, occasionally when the JTable updates the graphics can get pretty bad and sometimes unreadable (Shown below).</p>\n<p>Normal Refresh:\n<a href=\"https://i.stack.imgur.com/C5G4I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C5G4I.png\" alt=\"enter image description here\" /></a></p>\n<p>Bad Refresh:\n<a href=\"https://i.stack.imgur.com/cmw56.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cmw56.png\" alt=\"enter image description here\" /></a></p>\n<p>The problem is inconsistent. Any ideas or suggestions how to fix this would be appreciated.</p>\n"},{"tags":["java","snapshot","rational-team-concert"],"comments":[{"owner":{"account_id":22351107,"reputation":33,"user_id":16569213,"display_name":"angelo"},"score":0,"creation_date":1695053664,"post_id":77124017,"comment_id":135969656,"body_markdown":"i mean that code is for workitems, i can&#39;t adapt it for snapshot.","body":"i mean that code is for workitems, i can&#39;t adapt it for snapshot."}],"owner":{"account_id":22351107,"reputation":33,"user_id":16569213,"display_name":"angelo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1695224527,"creation_date":1694995751,"question_id":77124017,"body_markdown":"How can I get the date of a snapshot in rtc (EWM) using API in Java?\r\nI found this:\r\n\r\n```java\r\n    IWorkItem workItem = workItemClient.findWorkItemById(id, IWorkItem.FULL_PROFILE, monitor);\r\n    System.out.println(&quot;Last modified date: &quot;+workItem.modified()+&quot;\\n&quot;);\r\n\r\n    IItemManager itm = teamRepository.itemManager(); \r\n    List history = itm.fetchAllStateHandles((IAuditableHandle) workItem.getStateHandle(), monitor);\r\n    System.out.println(&quot;Record history details:-&quot;);\r\n    for(int i = history.size() -1; i &gt;= 0; i--){\r\n        IAuditableHandle audit = (IAuditableHandle) history.get(i);\r\n        IWorkItem workItemPrevious = (IWorkItem) teamRepository.itemManager().fetchCompleteState(audit,null);\r\n        Date recordModifiedDate = workItemPrevious.modified();\r\n        System.out.println(&quot;Record modification date: &quot;+recordModifiedDate);\r\n    }\r\n```\r\n\r\nbut it is for work items. I was unable to adapt it for snapshots.","title":"Using RTC Java API, how to get the date of snapshot","body":"<p>How can I get the date of a snapshot in rtc (EWM) using API in Java?\nI found this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    IWorkItem workItem = workItemClient.findWorkItemById(id, IWorkItem.FULL_PROFILE, monitor);\n    System.out.println(&quot;Last modified date: &quot;+workItem.modified()+&quot;\\n&quot;);\n\n    IItemManager itm = teamRepository.itemManager(); \n    List history = itm.fetchAllStateHandles((IAuditableHandle) workItem.getStateHandle(), monitor);\n    System.out.println(&quot;Record history details:-&quot;);\n    for(int i = history.size() -1; i &gt;= 0; i--){\n        IAuditableHandle audit = (IAuditableHandle) history.get(i);\n        IWorkItem workItemPrevious = (IWorkItem) teamRepository.itemManager().fetchCompleteState(audit,null);\n        Date recordModifiedDate = workItemPrevious.modified();\n        System.out.println(&quot;Record modification date: &quot;+recordModifiedDate);\n    }\n</code></pre>\n<p>but it is for work items. I was unable to adapt it for snapshots.</p>\n"},{"tags":["java","hashmap","collectors"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1695221908,"post_id":77143664,"comment_id":135996083,"body_markdown":"You definitely need a third map as none of the input maps are a `Map&lt;String, Values&gt;`.","body":"You definitely need a third map as none of the input maps are a <code>Map&lt;String, Values&gt;</code>."},{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1695222292,"post_id":77143664,"comment_id":135996188,"body_markdown":"Can you show what you tried and where you got stuck?","body":"Can you show what you tried and where you got stuck?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1695224962,"post_id":77143664,"comment_id":135996856,"body_markdown":"Using static initializers for maps is considered bad form. I changed it to use `Map.of` which was introduced in Java 9.","body":"Using static initializers for maps is considered bad form. I changed it to use <code>Map.of</code> which was introduced in Java 9."}],"answers":[{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695222250,"creation_date":1695222250,"answer_id":77143736,"question_id":77143664,"body_markdown":"Just iterate over one of the input `Map`s:\r\n```\r\n    private static Map&lt;String, Values&gt; mergeMaps(Map&lt;String, Double&gt; map1Map&lt;String, Double&gt; map2) {\r\n        Map&lt;String, Values&gt; result = new HashMap&lt;&gt;();\r\n        for(Map.Entry&lt;String, Double&gt; e1:map1.entrySet()) {\r\n            BigDecimal a = BigDecimal.valueOf(e1.getValue());\r\n            BigDecimal b = BigDecimal.valueOf(map2.get(e1.getKey()));\r\n            result.put(e1.getKey(), new Values(a, b));\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\nThis makes use of a AllArgsConstructor of `Values` which can be easily done if you make use of java&#39;s `record`:\r\n\r\n```\r\npublic record Values (BigDecimal a, BigDecimal b){}\r\n```\r\n\r\nPlease note that this code assumes that both input maps have the same set of keys.","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>Just iterate over one of the input <code>Map</code>s:</p>\n<pre><code>    private static Map&lt;String, Values&gt; mergeMaps(Map&lt;String, Double&gt; map1Map&lt;String, Double&gt; map2) {\n        Map&lt;String, Values&gt; result = new HashMap&lt;&gt;();\n        for(Map.Entry&lt;String, Double&gt; e1:map1.entrySet()) {\n            BigDecimal a = BigDecimal.valueOf(e1.getValue());\n            BigDecimal b = BigDecimal.valueOf(map2.get(e1.getKey()));\n            result.put(e1.getKey(), new Values(a, b));\n        }\n        return result;\n    }\n</code></pre>\n<p>This makes use of a AllArgsConstructor of <code>Values</code> which can be easily done if you make use of java's <code>record</code>:</p>\n<pre><code>public record Values (BigDecimal a, BigDecimal b){}\n</code></pre>\n<p>Please note that this code assumes that both input maps have the same set of keys.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695224207,"creation_date":1695223305,"answer_id":77143894,"question_id":77143664,"body_markdown":"As [@f1sh](https://stackoverflow.com/a/77143736/1552534) suggested, just use one map and use its key to get the other value from the second map.  Here is a stream approach.\r\n```\r\nMap&lt;String, Values&gt; map = map1.entrySet().stream()\r\n         .collect(Collectors.toMap(Entry::getKey,\r\n                 e -&gt; new Values(BigDecimal.valueOf(e.getValue()),\r\n                         BigDecimal.valueOf(map2.get(e.getKey())))));\r\n\r\n map.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\nA=123.1, 543.5\r\nB=345.2, 432.2\r\nC=678.3, 654.3\r\n","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>As <a href=\"https://stackoverflow.com/a/77143736/1552534\">@f1sh</a> suggested, just use one map and use its key to get the other value from the second map.  Here is a stream approach.</p>\n<pre><code>Map&lt;String, Values&gt; map = map1.entrySet().stream()\n         .collect(Collectors.toMap(Entry::getKey,\n                 e -&gt; new Values(BigDecimal.valueOf(e.getValue()),\n                         BigDecimal.valueOf(map2.get(e.getKey())))));\n\n map.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>A=123.1, 543.5\nB=345.2, 432.2\nC=678.3, 654.3\n</code></pre>\n"}],"owner":{"account_id":29490881,"reputation":13,"user_id":22599915,"display_name":"Alexander Konev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77143736,"answer_count":2,"score":1,"last_activity_date":1695224358,"creation_date":1695221628,"question_id":77143664,"body_markdown":"I have a class like\r\n\r\n```\r\npublic class Values {\r\n\r\n    BigDecimal a;\r\n    BigDecimal b;\r\n}\r\n```\r\nAnd two maps with the same keys like\r\n```\r\nMap&lt;String, Double&gt; map1 = Map.of(&quot;A&quot;, 123.1, &quot;B&quot;, 345.2, &quot;C&quot;, 678.3);\r\n\r\nMap&lt;String, Double&gt; map2 = Map.of(&quot;A&quot;, 543.5, &quot;B&quot;, 432.2, &quot;C&quot;, 654.3);\r\n```\r\n\r\nI want to merge those maps into one `Map&lt;String, Values&gt;` converting `Doubles` to `BigDecimals` on the way How can I achieve that? And maybe it&#39;s even possible without explicitly creating third map? \r\n\r\n\r\nExample of desired output (`Doubles` are now `BigDecimals` as fields a and b of Values class)\r\n\r\n```\r\nMap&lt;String, Values&gt; map3\r\n&quot;A&quot;, {123.1, 543.5}\r\n&quot;B&quot;, {345.2, 345.2}\r\n&quot;C&quot;, {678.3, 654.3}\r\n```\r\n\r\n\r\n\r\n\r\nTried solutions from close topics with stream and collectors and i guess i just cant figure it out. \r\n","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>I have a class like</p>\n<pre><code>public class Values {\n\n    BigDecimal a;\n    BigDecimal b;\n}\n</code></pre>\n<p>And two maps with the same keys like</p>\n<pre><code>Map&lt;String, Double&gt; map1 = Map.of(&quot;A&quot;, 123.1, &quot;B&quot;, 345.2, &quot;C&quot;, 678.3);\n\nMap&lt;String, Double&gt; map2 = Map.of(&quot;A&quot;, 543.5, &quot;B&quot;, 432.2, &quot;C&quot;, 654.3);\n</code></pre>\n<p>I want to merge those maps into one <code>Map&lt;String, Values&gt;</code> converting <code>Doubles</code> to <code>BigDecimals</code> on the way How can I achieve that? And maybe it's even possible without explicitly creating third map?</p>\n<p>Example of desired output (<code>Doubles</code> are now <code>BigDecimals</code> as fields a and b of Values class)</p>\n<pre><code>Map&lt;String, Values&gt; map3\n&quot;A&quot;, {123.1, 543.5}\n&quot;B&quot;, {345.2, 345.2}\n&quot;C&quot;, {678.3, 654.3}\n</code></pre>\n<p>Tried solutions from close topics with stream and collectors and i guess i just cant figure it out.</p>\n"},{"tags":["java","inheritance","static-import"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695204472,"post_id":77141362,"comment_id":135991901,"body_markdown":"Some lines of code are better than a long description","body":"Some lines of code are better than a long description"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":6,"creation_date":1695204507,"post_id":77141362,"comment_id":135991913,"body_markdown":"You can&#39;t do that. An import is not inherited. It makes no sense. An import is merely saying &quot;I want to use a shorter name for these classes/methods in this file&quot;.","body":"You can&#39;t do that. An import is not inherited. It makes no sense. An import is merely saying &quot;I want to use a shorter name for these classes/methods in this file&quot;."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695205399,"post_id":77141362,"comment_id":135992087,"body_markdown":"Not to your question, but **please** change `NL` to use `System.lineSeparator();` -- hardcoding for Windows is not a best practice.","body":"Not to your question, but <b>please</b> change <code>NL</code> to use <code>System.lineSeparator();</code> -- hardcoding for Windows is not a best practice."},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695205461,"post_id":77141362,"comment_id":135992095,"body_markdown":"@Eliott, it&#39;s not windows related. It&#39;s actually for Jira at the moment, but we want to centralize those formatting rules to make the migration easier in case we decide not to use jira anymore","body":"@Eliott, it&#39;s not windows related. It&#39;s actually for Jira at the moment, but we want to centralize those formatting rules to make the migration easier in case we decide not to use jira anymore"},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695205749,"post_id":77141362,"comment_id":135992151,"body_markdown":"@RealSkeptic Makes sense, I&#39;m so not used to write imports (as they are automatically generated) that I thought what was already imported in the abstract class was directly accessible to the children classes (as I imagined children classes as a direct extension of the mother class).\nHow would you solve this problem then ?is there any paradigm I&#39;m unfamiliar with that could be used there ?\n\nThat&#39;s why I&#39;d expect the static imports to be visible &quot;usable&quot; in the children classes","body":"@RealSkeptic Makes sense, I&#39;m so not used to write imports (as they are automatically generated) that I thought what was already imported in the abstract class was directly accessible to the children classes (as I imagined children classes as a direct extension of the mother class). How would you solve this problem then ?is there any paradigm I&#39;m unfamiliar with that could be used there ?  That&#39;s why I&#39;d expect the static imports to be visible &quot;usable&quot; in the children classes"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695208334,"post_id":77141362,"comment_id":135992681,"body_markdown":"I would just type the name of the method and then let the IDE suggest the import and accept that suggestion. Also for future reference, if people make suggestion in the comments, 1) don&#39;t make assumptions they are the downvoter (you have no way of knowing that unless they explicitly say they downvoted you), and 2) don&#39;t include snarky replies/comments in your edit: that will only invite more downvotes and is unlikely to get your question reopened (not to mention that it is technically a violation of the &quot;be nice&quot; policy, and could get you suspended).","body":"I would just type the name of the method and then let the IDE suggest the import and accept that suggestion. Also for future reference, if people make suggestion in the comments, 1) don&#39;t make assumptions they are the downvoter (you have no way of knowing that unless they explicitly say they downvoted you), and 2) don&#39;t include snarky replies/comments in your edit: that will only invite more downvotes and is unlikely to get your question reopened (not to mention that it is technically a violation of the &quot;be nice&quot; policy, and could get you suspended)."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1695209650,"post_id":77141362,"comment_id":135992969,"body_markdown":"I&#39;ve known programmers that would use ` interface FormatHelper` with final static fields, default methods (replace static), and then add `implements FormatHelper` everywhere. It does what you asked for but IMO style is ugly (and I would fail it in code review), These days &quot;import static FormatHelper.* with good IDE code organiser will cleanup the dependencies neatly.","body":"I&#39;ve known programmers that would use ` interface FormatHelper` with final static fields, default methods (replace static), and then add <code>implements FormatHelper</code> everywhere. It does what you asked for but IMO style is ugly (and I would fail it in code review), These days &quot;import static FormatHelper.* with good IDE code organiser will cleanup the dependencies neatly."},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695209842,"post_id":77141362,"comment_id":135993001,"body_markdown":"@DuncG Thanks for your input. To tell you the truth, I thought of doing it, but it doesn&#39;t really work in my case as I have also methods I&#39;d like to share that way.\n\nAt the end of the day, I think I&#39;ll refactorize this Helper into a Builder class. It&#39;s a bit more effort, but it&#39;s certainly what&#39;s cleanest.\nThat builder can then be instantiated once in the abstract class and once in each other class that used to refer to the helper.","body":"@DuncG Thanks for your input. To tell you the truth, I thought of doing it, but it doesn&#39;t really work in my case as I have also methods I&#39;d like to share that way.  At the end of the day, I think I&#39;ll refactorize this Helper into a Builder class. It&#39;s a bit more effort, but it&#39;s certainly what&#39;s cleanest. That builder can then be instantiated once in the abstract class and once in each other class that used to refer to the helper."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1695215170,"post_id":77141362,"comment_id":135994303,"body_markdown":"@Lo&#239;cGammaitoni - methods also work via the interface, but `bold` would have to be `default` rather than `static`","body":"@Lo&#239;cGammaitoni - methods also work via the interface, but <code>bold</code> would have to be <code>default</code> rather than <code>static</code>"},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695216290,"post_id":77141362,"comment_id":135994617,"body_markdown":"ooh, I wasn&#39;t aware the keyword default was a thing. That&#39;s actually pretty neat. Thanks for the pointer.","body":"ooh, I wasn&#39;t aware the keyword default was a thing. That&#39;s actually pretty neat. Thanks for the pointer."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695224293,"creation_date":1695223108,"answer_id":77143855,"question_id":77141362,"body_markdown":"Another way you could specify the format helper code is in an interface. You would need to change the static methods to default methods to allow the methods to be accessible in other classes without `ClassName.` prefix:\r\n\r\n    public interface FormatHelper {\r\n        public static final String NL= System.lineSeparator() ; // or &quot;\\r\\n&quot; if targetting Windows from non-Windows\r\n    \r\n        public default String bold(String val) {\r\n            return &quot;*&quot; + val + &quot;*&quot;;\r\n        }\r\n    \r\n        public default String underline(String val) {\r\n            return &quot;+&quot; + val + &quot;+&quot;;\r\n        }\r\n    }\r\n\r\nThen the helper code definitions can be accessed from any implementing classes (abstract or otherwise):\r\n\r\n    import xyz.FormatHelper;\r\n\r\n    public class MyBusinessClass implements FormatHelper {\r\n        public String doSomething(){\r\n            return bold(&quot;much wow&quot;)+NL;\r\n        }\r\n    }\r\n\r\nAny class derived from `MyBusinessClass` would be able to access the same methods and fields without further imports, and without &quot;FormatHelper.&quot; prefix.\r\n\r\nNOTE: this mechanism would not work within static methods of the calling classes, which may be a significant problem.","title":"accessing static import of mother class in children class","body":"<p>Another way you could specify the format helper code is in an interface. You would need to change the static methods to default methods to allow the methods to be accessible in other classes without <code>ClassName.</code> prefix:</p>\n<pre><code>public interface FormatHelper {\n    public static final String NL= System.lineSeparator() ; // or &quot;\\r\\n&quot; if targetting Windows from non-Windows\n\n    public default String bold(String val) {\n        return &quot;*&quot; + val + &quot;*&quot;;\n    }\n\n    public default String underline(String val) {\n        return &quot;+&quot; + val + &quot;+&quot;;\n    }\n}\n</code></pre>\n<p>Then the helper code definitions can be accessed from any implementing classes (abstract or otherwise):</p>\n<pre><code>import xyz.FormatHelper;\n\npublic class MyBusinessClass implements FormatHelper {\n    public String doSomething(){\n        return bold(&quot;much wow&quot;)+NL;\n    }\n}\n</code></pre>\n<p>Any class derived from <code>MyBusinessClass</code> would be able to access the same methods and fields without further imports, and without &quot;FormatHelper.&quot; prefix.</p>\n<p>NOTE: this mechanism would not work within static methods of the calling classes, which may be a significant problem.</p>\n"}],"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77143855,"answer_count":1,"score":-2,"last_activity_date":1695224293,"creation_date":1695204360,"question_id":77141362,"body_markdown":"We have a helper class that we often include via static import to be able to concisely access its static methods and fields.\r\n\r\nWe have an abstract class whose children could benefit from this helper.\r\nI was hoping to do the static import of the helper in the abstract class so that every sub-class can benefit from it, but it seems that Eclipse doesn&#39;t let me (import is deleted every time I save). Is it an Eclipse configuration problem? Or is it that the scope of the static import is limited to the class itself (and not its children).\r\n\r\nIs there any other way to make the elements in the helper accessible to all the children classes without having to modify them each individually? \r\n\r\nThe helper:\r\n\r\n```java\r\npublic class FormatHelper {\r\n    \r\n    public static final NL=&quot;\\r\\n&quot;;\r\n\r\n    public static String bold(String val) {\r\n        return &quot;*&quot; + val + &quot;*&quot;;\r\n    }\r\n   \r\n    public static String underline(String val) {\r\n        return &quot;+&quot; + val + &quot;+&quot;;\r\n    }\r\n}\r\n```\r\n\r\nNormal use of this helper:\r\n\r\n```java\r\nimport static org.whatever.FormatHelper.NL\r\nimport static org.whatever.FormatHelper.bold\r\n    \r\npublic class MyBusinessClass{\r\n  \r\n    public String doSomething(){\r\n        return bold(&quot;much wow&quot;)+NL;  \r\n    }\r\n}\r\n```\r\n\r\nNow, I have an abstract class with around 20 subclasses, each of them needing to access bold/underline and some other static methods of FormatHelper.\r\n\r\nI&#39;d prefer not to have to write FormatHelper.NL every time, hence my wish to work with static imports.\r\n\r\nI&#39;d also prefer to have those elements in the subclasses scope from the get go. As, when creating new sub classes, I&#39;d like to have a direct access to those methods, without having to think to add a static import.\r\n","title":"accessing static import of mother class in children class","body":"<p>We have a helper class that we often include via static import to be able to concisely access its static methods and fields.</p>\n<p>We have an abstract class whose children could benefit from this helper.\nI was hoping to do the static import of the helper in the abstract class so that every sub-class can benefit from it, but it seems that Eclipse doesn't let me (import is deleted every time I save). Is it an Eclipse configuration problem? Or is it that the scope of the static import is limited to the class itself (and not its children).</p>\n<p>Is there any other way to make the elements in the helper accessible to all the children classes without having to modify them each individually?</p>\n<p>The helper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FormatHelper {\n    \n    public static final NL=&quot;\\r\\n&quot;;\n\n    public static String bold(String val) {\n        return &quot;*&quot; + val + &quot;*&quot;;\n    }\n   \n    public static String underline(String val) {\n        return &quot;+&quot; + val + &quot;+&quot;;\n    }\n}\n</code></pre>\n<p>Normal use of this helper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.whatever.FormatHelper.NL\nimport static org.whatever.FormatHelper.bold\n    \npublic class MyBusinessClass{\n  \n    public String doSomething(){\n        return bold(&quot;much wow&quot;)+NL;  \n    }\n}\n</code></pre>\n<p>Now, I have an abstract class with around 20 subclasses, each of them needing to access bold/underline and some other static methods of FormatHelper.</p>\n<p>I'd prefer not to have to write FormatHelper.NL every time, hence my wish to work with static imports.</p>\n<p>I'd also prefer to have those elements in the subclasses scope from the get go. As, when creating new sub classes, I'd like to have a direct access to those methods, without having to think to add a static import.</p>\n"},{"tags":["java","slf4j"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695216985,"post_id":77142965,"comment_id":135994795,"body_markdown":"`isTraceEnabled()` is just for performance optimization.","body":"<code>isTraceEnabled()</code> is just for performance optimization."},{"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1695217142,"post_id":77142965,"comment_id":135994828,"body_markdown":"yes, should I add so that the entire method gets stubbed out","body":"yes, should I add so that the entire method gets stubbed out"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1695217148,"post_id":77142965,"comment_id":135994830,"body_markdown":"https://www.slf4j.org/faq.html#logging_performance","body":"<a href=\"https://www.slf4j.org/faq.html#logging_performance\" rel=\"nofollow noreferrer\">slf4j.org/faq.html#logging_performance</a>"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1695218499,"post_id":77142965,"comment_id":135995207,"body_markdown":"It is important to note though that the method input is evaluated. Hence why its so crucial to use the loggers formatter instead of formatting the string urself. So if you would write `log.trace(&quot;Result: &quot; + result)`, this string concatenation is computed. `isTraceEnabled` is used to guard expensive logger calls. for example if u have `log.trace(&quot;...&quot;, expensiveMethod())`, the only way to ensure that u dont pay the price when trace is disabled, is to guard it with `if (log.isTraceEnabled()) { log.trace(...); }`.","body":"It is important to note though that the method input is evaluated. Hence why its so crucial to use the loggers formatter instead of formatting the string urself. So if you would write <code>log.trace(&quot;Result: &quot; + result)</code>, this string concatenation is computed. <code>isTraceEnabled</code> is used to guard expensive logger calls. for example if u have <code>log.trace(&quot;...&quot;, expensiveMethod())</code>, the only way to ensure that u dont pay the price when trace is disabled, is to guard it with <code>if (log.isTraceEnabled()) { log.trace(...); }</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695220573,"post_id":77142965,"comment_id":135995728,"body_markdown":"I can’t tell whether you’re asking about optimization, or just asking whether log statements which use the trace level will be seen when the logger’s level is set to debug.  The answer to your first sentence is yes, that is indeed what it means.","body":"I can’t tell whether you’re asking about optimization, or just asking whether log statements which use the trace level will be seen when the logger’s level is set to debug.  The answer to your first sentence is yes, that is indeed what it means."}],"answers":[{"tags":[],"owner":{"account_id":2712341,"reputation":1106,"user_id":2340484,"display_name":"charlb"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695217138,"creation_date":1695217138,"answer_id":77143026,"question_id":77142965,"body_markdown":"When the application runs at Debug log level nothing at trace level will be logged.","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>When the application runs at Debug log level nothing at trace level will be logged.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695224019,"creation_date":1695224019,"answer_id":77143991,"question_id":77142965,"body_markdown":"Java cannot magically sniff that this code is going to end up doing nothing. It&#39;ll be run - that for loop is going to invoke `foreignMarkups.iterator()`, so an interator will be made (an object is instantiated, but its small, and fast garbage soon after), and this code will loop through every element, fetching pointers to the various strings that those 3 get methods are pointing at.\r\n\r\nNone of that is particularly expensive, but, if `foreignMarkups` has more than, say, 1000 or so elements, it&#39;ll take non-instant time at that point.\r\n\r\nIf you actually want this code to just be skipped entirely, and not incur those relatively small costs as outlined above, you have 2 options:\r\n\r\n## avoid string concat\r\n\r\nSpecifically to avoid the cost of string concat, you do this:\r\n\r\n```\r\nlog.trace(&quot;Hey there {} {}&quot;, firstName, lastName);\r\n```\r\n\r\nand not:\r\n\r\n```\r\nlog.trace(&quot;Hey there &quot; + firstName + &quot; &quot; + lastName);\r\n```\r\n\r\nBecause string concat is non-trivial (at the very least, it means a new string is created with the full content), and the logging framework will simply not concatenate the parts together if trace isn&#39;t enabled. In the second snippet, java will generate the code to do it, which will concatenate the string (with all costs associated with this), and then send it to the log framework which then immediately ignores it as trace isn&#39;t enabled.\r\n\r\n## Lambdas\r\n\r\nYou can pass lambdas to `log.trace` and friends instead of values; the lambdas will be invoked __only__ if needed, i.e. only if that log level is relevant:\r\n\r\nDo this:\r\n\r\n```\r\nlog.trace(&quot;Hey, {}&quot;, () -&gt; makePriceyDbCallToLookupFirstName(obj));\r\n```\r\n\r\nnot:\r\n\r\n```\r\nlog.trace(&quot;Hey, {}&quot;, makePriceyDbCallToLookupFirstName(obj));\r\n```\r\n\r\n## isXEnabled\r\n\r\nNone of the previous 2 plans seem particularly relevant for you. You can use the lambda trick, but only if you compress your 3 log.trace outs into a single log.trace, and the lambda calculates the entire string. You can do that. Or just use the final fallback, `isXEnabled`. Do this:\r\n\r\n```\r\nif (log.isTraceEnabled()) {\r\n  log.trace(priceLookup1());\r\n  log.trace(priceLookup2());\r\n}\r\n```\r\n\r\n","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>Java cannot magically sniff that this code is going to end up doing nothing. It'll be run - that for loop is going to invoke <code>foreignMarkups.iterator()</code>, so an interator will be made (an object is instantiated, but its small, and fast garbage soon after), and this code will loop through every element, fetching pointers to the various strings that those 3 get methods are pointing at.</p>\n<p>None of that is particularly expensive, but, if <code>foreignMarkups</code> has more than, say, 1000 or so elements, it'll take non-instant time at that point.</p>\n<p>If you actually want this code to just be skipped entirely, and not incur those relatively small costs as outlined above, you have 2 options:</p>\n<h2>avoid string concat</h2>\n<p>Specifically to avoid the cost of string concat, you do this:</p>\n<pre><code>log.trace(&quot;Hey there {} {}&quot;, firstName, lastName);\n</code></pre>\n<p>and not:</p>\n<pre><code>log.trace(&quot;Hey there &quot; + firstName + &quot; &quot; + lastName);\n</code></pre>\n<p>Because string concat is non-trivial (at the very least, it means a new string is created with the full content), and the logging framework will simply not concatenate the parts together if trace isn't enabled. In the second snippet, java will generate the code to do it, which will concatenate the string (with all costs associated with this), and then send it to the log framework which then immediately ignores it as trace isn't enabled.</p>\n<h2>Lambdas</h2>\n<p>You can pass lambdas to <code>log.trace</code> and friends instead of values; the lambdas will be invoked <strong>only</strong> if needed, i.e. only if that log level is relevant:</p>\n<p>Do this:</p>\n<pre><code>log.trace(&quot;Hey, {}&quot;, () -&gt; makePriceyDbCallToLookupFirstName(obj));\n</code></pre>\n<p>not:</p>\n<pre><code>log.trace(&quot;Hey, {}&quot;, makePriceyDbCallToLookupFirstName(obj));\n</code></pre>\n<h2>isXEnabled</h2>\n<p>None of the previous 2 plans seem particularly relevant for you. You can use the lambda trick, but only if you compress your 3 log.trace outs into a single log.trace, and the lambda calculates the entire string. You can do that. Or just use the final fallback, <code>isXEnabled</code>. Do this:</p>\n<pre><code>if (log.isTraceEnabled()) {\n  log.trace(priceLookup1());\n  log.trace(priceLookup2());\n}\n</code></pre>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695224019,"creation_date":1695216744,"question_id":77142965,"body_markdown":"My application runs on DEBUG log level, does this mean all of the following will be evaluated and trace will not be printed out.\r\n\r\nor do I need to enable https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled-- before logging this snippet\r\n\r\n        for (Element element : foreignMarkups) {\r\n            log.trace(&quot;Foreign Markup name = {}&quot;, element.getName());\r\n            log.trace(&quot;Foreign Markup value = {}&quot;, element.getText());\r\n            log.trace(&quot;Foreign Markup namespace = {}&quot;, element.getNamespace());\r\n        }\r\n\r\n","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>My application runs on DEBUG log level, does this mean all of the following will be evaluated and trace will not be printed out.</p>\n<p>or do I need to enable <a href=\"https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled--\" rel=\"nofollow noreferrer\">https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled--</a> before logging this snippet</p>\n<pre><code>    for (Element element : foreignMarkups) {\n        log.trace(&quot;Foreign Markup name = {}&quot;, element.getName());\n        log.trace(&quot;Foreign Markup value = {}&quot;, element.getText());\n        log.trace(&quot;Foreign Markup namespace = {}&quot;, element.getNamespace());\n    }\n</code></pre>\n"},{"tags":["java","security","encryption","x509certificate","digital-certificate"],"answers":[{"tags":[],"owner":{"account_id":4576437,"reputation":161,"user_id":3714760,"display_name":"MorAdan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695223930,"creation_date":1402055475,"answer_id":24081198,"question_id":21794117,"body_markdown":"PFX isn&#39;t a certificate but a keystore in itself.\r\n\r\nTo get the certificate you have to load the pfx into a keystore and then get the certificate:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    InputStream certIs=new FileInputStream(&quot;suresh.pfx&quot;);\r\n    KeyStore ks=KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    ks.load(certIs.getInputStream(),&quot;password&quot;.toCharArray());\r\n    Certificate cert=ks.getCertificate(&quot;alias&quot;);\r\n\r\nRegards","title":"java.security.cert.CertificateParsingException: signed fields invalid","body":"<p>PFX isn't a certificate but a keystore in itself.</p>\n<p>To get the certificate you have to load the pfx into a keystore and then get the certificate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream certIs=new FileInputStream(&quot;suresh.pfx&quot;);\nKeyStore ks=KeyStore.getInstance(&quot;PKCS12&quot;);\nks.load(certIs.getInputStream(),&quot;password&quot;.toCharArray());\nCertificate cert=ks.getCertificate(&quot;alias&quot;);\n</code></pre>\n<p>Regards</p>\n"}],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33894,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":1,"score":9,"last_activity_date":1695223930,"creation_date":1392444891,"question_id":21794117,"body_markdown":"I&#39;m trying to read a   `X509 certificate`  \r\n\r\n\r\n\tFileInputStream fr = new FileInputStream(&quot;suresh.pfx&quot;);\r\n    CertificateFactory cf =   CertificateFactory.getInstance(&quot;X509&quot;);\r\n    X509Certificate c = (X509Certificate) cf.generateCertificate(fr); \r\n\r\nAnd run in to the exception\r\n\r\n\r\n    java.security.cert.CertificateParsingException: signed fields invalid\r\n    \tat sun.security.x509.X509CertImpl.parse(Unknown Source)\r\n    \tat sun.security.x509.X509CertImpl.&lt;init&gt;(Unknown Source)\r\n    \tat sun.security.provider.X509Factory.engineGenerateCertificate(Unknown Source)\r\n    \tat java.security.cert.CertificateFactory.generateCertificate(Unknown Source)\r\n    \tat com.nextenders.certificategeenrator.CertificateGenerator.testGenerateSignCertWithKeyStore(CertificateGenerator.java:102)\r\n    \tat com.nextenders.certificategeenrator.CertificateGenerator.main(CertificateGenerator.java:65)\r\n     \r\n\r\nFound something related to it from [Oracle  forum][1] with no solution.\r\n\r\n Any hints ?\r\n\r\n\r\n  [1]: https://community.oracle.com/thread/1539590?tstart=1495","title":"java.security.cert.CertificateParsingException: signed fields invalid","body":"<p>I'm trying to read a   <code>X509 certificate</code>  </p>\n\n<pre><code>FileInputStream fr = new FileInputStream(\"suresh.pfx\");\nCertificateFactory cf =   CertificateFactory.getInstance(\"X509\");\nX509Certificate c = (X509Certificate) cf.generateCertificate(fr); \n</code></pre>\n\n<p>And run in to the exception</p>\n\n<pre><code>java.security.cert.CertificateParsingException: signed fields invalid\n    at sun.security.x509.X509CertImpl.parse(Unknown Source)\n    at sun.security.x509.X509CertImpl.&lt;init&gt;(Unknown Source)\n    at sun.security.provider.X509Factory.engineGenerateCertificate(Unknown Source)\n    at java.security.cert.CertificateFactory.generateCertificate(Unknown Source)\n    at com.nextenders.certificategeenrator.CertificateGenerator.testGenerateSignCertWithKeyStore(CertificateGenerator.java:102)\n    at com.nextenders.certificategeenrator.CertificateGenerator.main(CertificateGenerator.java:65)\n</code></pre>\n\n<p>Found something related to it from <a href=\"https://community.oracle.com/thread/1539590?tstart=1495\" rel=\"noreferrer\">Oracle  forum</a> with no solution.</p>\n\n<p>Any hints ?</p>\n"},{"tags":["java","maven","openapi","openapi-generator-maven-plugin"],"owner":{"account_id":14271910,"reputation":333,"user_id":10309166,"display_name":"nixfuerdiecharts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695223872,"creation_date":1675669926,"question_id":75358603,"body_markdown":"I have following open-api spec\r\n```openapi\r\n...\r\ndepartureTime:\r\n      description: Start time of your trip request. Defaults to current time if omitted.\r\n      format: date-time\r\n      type: string\r\n...\r\n```\r\nThe maven swagger codegen plugin generates the model class with the org.threeten.bp.OffsetDateTime library but I have the requirement to use java.time.OffsetDateTime.\r\nI&#39;ve tried following configuration\r\n\r\n```\r\n&lt;configuration&gt;\r\n...\r\n   &lt;typeMappings&gt;\r\n      &lt;typeMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/typeMapping&gt;\r\n   &lt;/typeMappings&gt;\r\n   &lt;importMappings&gt;\r\n      &lt;importMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/importMapping&gt;\r\n   &lt;/importMappings&gt;\r\n...\r\n&lt;/configuration&gt;\r\n```\r\nThis at least added the requiered library java.time.OffsetDateTime to my generated model classed, but now both imports are present which leads to a import conflict\r\n\r\n```java\r\n...\r\nimport org.threeten.bp.OffsetDateTime;\r\nimport java.time.OffsetDateTime;\r\n...\r\n```\r\n\r\nI&#39;ve also tried adding this to my configuration, since I&#39;ve read it&#39;s needed in some cases. But after adding it, maven has generated nothing anymore.\r\n\r\n```\r\n...\r\n&lt;configOptions&gt;\r\n   &lt;java8&gt;true&lt;/java8&gt;\r\n   &lt;dateLibrary&gt;custom&lt;/dateLibrary&gt;\r\n&lt;/configOptions&gt;\r\n...\r\n```\r\n\r\nHow can I properly change the used libraries for generated sources?","title":"Swagger codegen use different library","body":"<p>I have following open-api spec</p>\n<pre><code>...\ndepartureTime:\n      description: Start time of your trip request. Defaults to current time if omitted.\n      format: date-time\n      type: string\n...\n</code></pre>\n<p>The maven swagger codegen plugin generates the model class with the org.threeten.bp.OffsetDateTime library but I have the requirement to use java.time.OffsetDateTime.\nI've tried following configuration</p>\n<pre><code>&lt;configuration&gt;\n...\n   &lt;typeMappings&gt;\n      &lt;typeMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/typeMapping&gt;\n   &lt;/typeMappings&gt;\n   &lt;importMappings&gt;\n      &lt;importMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/importMapping&gt;\n   &lt;/importMappings&gt;\n...\n&lt;/configuration&gt;\n</code></pre>\n<p>This at least added the requiered library java.time.OffsetDateTime to my generated model classed, but now both imports are present which leads to a import conflict</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nimport org.threeten.bp.OffsetDateTime;\nimport java.time.OffsetDateTime;\n...\n</code></pre>\n<p>I've also tried adding this to my configuration, since I've read it's needed in some cases. But after adding it, maven has generated nothing anymore.</p>\n<pre><code>...\n&lt;configOptions&gt;\n   &lt;java8&gt;true&lt;/java8&gt;\n   &lt;dateLibrary&gt;custom&lt;/dateLibrary&gt;\n&lt;/configOptions&gt;\n...\n</code></pre>\n<p>How can I properly change the used libraries for generated sources?</p>\n"},{"tags":["java","swagger","schema","swagger-ui","openapi"],"comments":[{"owner":{"account_id":29293095,"reputation":840,"user_id":22443070,"display_name":"xPetersue"},"score":0,"creation_date":1695228188,"post_id":77136838,"comment_id":135997493,"body_markdown":"Could you please format your question to make it more readable? It&#39;s a bit difficult to read in its current form.","body":"Could you please format your question to make it more readable? It&#39;s a bit difficult to read in its current form."}],"answers":[{"tags":[],"owner":{"account_id":11698906,"reputation":1250,"user_id":8564731,"display_name":"Jeremy Fiel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695223463,"creation_date":1695161268,"answer_id":77138208,"question_id":77136838,"body_markdown":"Not sure you can get rid of the `type` because a schema in JSON Schema is implicitly `type: any`, if no schema is defined. If it&#39;s only because you can&#39;t have the string `type`, I think the best way would be to manually edit the file.\r\n\r\nI don&#39;t believe you can have an empty method. \r\n```js\r\nschema = @Schema()\r\n``` \r\n\r\nRegarding the validity of JSON Schema... \r\n```json\r\n&quot;schema&quot;: {}\r\n```\r\n\r\nis the same as \r\n\r\n```json\r\n&quot;schema&quot;: {&quot;type&quot;: &quot;any&quot;}\r\n```","title":"Open API v3- get rid of type from schema","body":"<p>Not sure you can get rid of the <code>type</code> because a schema in JSON Schema is implicitly <code>type: any</code>, if no schema is defined. If it's only because you can't have the string <code>type</code>, I think the best way would be to manually edit the file.</p>\n<p>I don't believe you can have an empty method.</p>\n<pre class=\"lang-js prettyprint-override\"><code>schema = @Schema()\n</code></pre>\n<p>Regarding the validity of JSON Schema...</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;schema&quot;: {}\n</code></pre>\n<p>is the same as</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;schema&quot;: {&quot;type&quot;: &quot;any&quot;}\n</code></pre>\n"}],"owner":{"account_id":29484154,"reputation":1,"user_id":22594453,"display_name":"Prathyusha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695223463,"creation_date":1695145641,"question_id":77136838,"body_markdown":"we are migrating one of our project from swagger v2 to OpenAPI v3 version and we are facing a scenario where the header has no type. i.e., manually updating the generated swagger file for the header with  `“schema”:{}` or  `“schema”:{example:”null”}` or  `“schema”:{nullable:true}`  are working as expected and able to upload those swagger versions in the api portal successfully. So now the question is, while making the same change using swagger annotations such as `schema = @Schema(example = “null”)` or `schema = @Schema(nullable = true)` is generating the `“type”:”string”` by default which looks like `“schema”:{“type”:”string”, Example: null}` or `“schema”:{“type”:”string”,nullable: true}`  which is considering as a breaking change in the api portal. Could anyone please assist on how to get rid of the `type` under schema.","title":"Open API v3- get rid of type from schema","body":"<p>we are migrating one of our project from swagger v2 to OpenAPI v3 version and we are facing a scenario where the header has no type. i.e., manually updating the generated swagger file for the header with  <code>“schema”:{}</code> or  <code>“schema”:{example:”null”}</code> or  <code>“schema”:{nullable:true}</code>  are working as expected and able to upload those swagger versions in the api portal successfully. So now the question is, while making the same change using swagger annotations such as <code>schema = @Schema(example = “null”)</code> or <code>schema = @Schema(nullable = true)</code> is generating the <code>“type”:”string”</code> by default which looks like <code>“schema”:{“type”:”string”, Example: null}</code> or <code>“schema”:{“type”:”string”,nullable: true}</code>  which is considering as a breaking change in the api portal. Could anyone please assist on how to get rid of the <code>type</code> under schema.</p>\n"},{"tags":["java","spring","spring-cloud-gateway"],"owner":{"account_id":18961813,"reputation":1,"user_id":13837144,"display_name":"jfulg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695223204,"creation_date":1695223204,"question_id":77143877,"body_markdown":"I am using spring cloud gateway for my proxy application. I have a global filter which intercepts incoming requests and checks for certain headers and cookies. If it finds that one of the headers is missing, it will modify the exchange GATEWAY_ROUTE_ATTR and the request URL in order to redirect the request to an error controller in the same proxy application. I am using the yml based route configuration approach. The issue arises when redirecting the request. I modify the route attribute of the ServerWebExchange, but the filters of the old route are still getting applied. \r\n\r\n\r\nThis is the scenario:\r\n\r\n1. request comes in for http://some-domain.com/common-prefix/xyz (some downstream service serves this)\r\n\r\n2. This URL is matched to one of the routes configured in application.yml, and this route includes a stripPrefix = 1 filter \r\n\r\n\r\n```\r\n        - id: original_route\r\n          uri: http://some-domain.com/\r\n          predicates:\r\n            - Path=/common-prefix/xyz/**\r\n          filters:\r\n            - StripPrefix=1\r\n```\r\n\r\n3. The request is missing a header so the request URL is rewritten to http://my-proxy-domain/error\r\nThe GATEWAY_ROUTE_ATTR is also modified so that the matched route is now \r\n\r\n```\r\n        - id: error_redirect\r\n          uri: http://my-proxy-domain/\r\n          predicates:\r\n            - Path=/error\r\n          filters:\r\n            - RedirectTo=302, http://my-proxy-domain/error\r\n```\r\n\r\n4. I now expect the request to be sent to http://my-proxy-domain/error, where some error message will be put in the response body and a 4xx code is returned.\r\n\r\nwhat actually happens is that /error is stripped and the request is redirected to http://my-proxy-domain\r\n\r\nthis is the code that actually modifies the request and route\r\n\r\n```\r\n    private ServerWebExchange redirectToErrorController(String reason){\r\n        logger.error(reason);\r\n        String requestURI = request.getURI().toString();\r\n        logger.info(&quot;Original request URL: {}&quot;, requestURI);\r\n        addOriginalRequestUrl(exchange, request.getURI());\r\n        String url = UriComponentsBuilder\r\n                .fromHttpUrl(ProxyApplicationUtility.getDomainName(requestURI))\r\n                .path(&quot;/redirect&quot; + ERROR_PATH).build().toUriString();\r\n\r\n\r\n        logger.info(&quot;redirecting to {}&quot;,url );\r\n\r\n        ServerHttpRequest request1 = request.mutate().uri(URI.create(url)).build();\r\n        response.setStatusCode(HttpStatus.FOUND);\r\n        response.getHeaders().set(&quot;status&quot;, &quot;302&quot;);\r\n        response.getHeaders().add(&quot;Location&quot;, url);\r\n        exchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR, request.getURI());\r\n        exchange.getAttributes().put(GATEWAY_ROUTE_ATTR, getErrorRoute());\r\n        exchange = exchange.mutate().request(request1).response(response).build();\r\n        return exchange;\r\n\r\n    }\r\n\r\n//this method gets the error route from a RouteLocator bean that contains a list of defined routes //for the application\r\n    private Route getErrorRoute(){\r\n        Flux&lt;Route&gt; routeFlux = routeLocator.getRoutes();\r\n        List&lt;Route&gt; routeList = routeFlux.collectList().block();\r\n        for(Route route: routeList){\r\n            if(&quot;error_redirect&quot;.equals(route.getId())){\r\n                return route;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n```\r\n\r\n\r\nIt seems like the StripPrefix filter I have in the original_route is still being applied once the global filter is done with its processing and send the request on, even though I have changed the route being applied\r\n\r\nHow can I make sure that only the filters associated with my new route are being applied?","title":"Original route&#39;s filters are still applied to a request after changing the route attribute","body":"<p>I am using spring cloud gateway for my proxy application. I have a global filter which intercepts incoming requests and checks for certain headers and cookies. If it finds that one of the headers is missing, it will modify the exchange GATEWAY_ROUTE_ATTR and the request URL in order to redirect the request to an error controller in the same proxy application. I am using the yml based route configuration approach. The issue arises when redirecting the request. I modify the route attribute of the ServerWebExchange, but the filters of the old route are still getting applied.</p>\n<p>This is the scenario:</p>\n<ol>\n<li><p>request comes in for <a href=\"http://some-domain.com/common-prefix/xyz\" rel=\"nofollow noreferrer\">http://some-domain.com/common-prefix/xyz</a> (some downstream service serves this)</p>\n</li>\n<li><p>This URL is matched to one of the routes configured in application.yml, and this route includes a stripPrefix = 1 filter</p>\n</li>\n</ol>\n<pre><code>        - id: original_route\n          uri: http://some-domain.com/\n          predicates:\n            - Path=/common-prefix/xyz/**\n          filters:\n            - StripPrefix=1\n</code></pre>\n<ol start=\"3\">\n<li>The request is missing a header so the request URL is rewritten to http://my-proxy-domain/error\nThe GATEWAY_ROUTE_ATTR is also modified so that the matched route is now</li>\n</ol>\n<pre><code>        - id: error_redirect\n          uri: http://my-proxy-domain/\n          predicates:\n            - Path=/error\n          filters:\n            - RedirectTo=302, http://my-proxy-domain/error\n</code></pre>\n<ol start=\"4\">\n<li>I now expect the request to be sent to http://my-proxy-domain/error, where some error message will be put in the response body and a 4xx code is returned.</li>\n</ol>\n<p>what actually happens is that /error is stripped and the request is redirected to http://my-proxy-domain</p>\n<p>this is the code that actually modifies the request and route</p>\n<pre><code>    private ServerWebExchange redirectToErrorController(String reason){\n        logger.error(reason);\n        String requestURI = request.getURI().toString();\n        logger.info(&quot;Original request URL: {}&quot;, requestURI);\n        addOriginalRequestUrl(exchange, request.getURI());\n        String url = UriComponentsBuilder\n                .fromHttpUrl(ProxyApplicationUtility.getDomainName(requestURI))\n                .path(&quot;/redirect&quot; + ERROR_PATH).build().toUriString();\n\n\n        logger.info(&quot;redirecting to {}&quot;,url );\n\n        ServerHttpRequest request1 = request.mutate().uri(URI.create(url)).build();\n        response.setStatusCode(HttpStatus.FOUND);\n        response.getHeaders().set(&quot;status&quot;, &quot;302&quot;);\n        response.getHeaders().add(&quot;Location&quot;, url);\n        exchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR, request.getURI());\n        exchange.getAttributes().put(GATEWAY_ROUTE_ATTR, getErrorRoute());\n        exchange = exchange.mutate().request(request1).response(response).build();\n        return exchange;\n\n    }\n\n//this method gets the error route from a RouteLocator bean that contains a list of defined routes //for the application\n    private Route getErrorRoute(){\n        Flux&lt;Route&gt; routeFlux = routeLocator.getRoutes();\n        List&lt;Route&gt; routeList = routeFlux.collectList().block();\n        for(Route route: routeList){\n            if(&quot;error_redirect&quot;.equals(route.getId())){\n                return route;\n            }\n        }\n\n        return null;\n\n    }\n</code></pre>\n<p>It seems like the StripPrefix filter I have in the original_route is still being applied once the global filter is done with its processing and send the request on, even though I have changed the route being applied</p>\n<p>How can I make sure that only the filters associated with my new route are being applied?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":20135765,"reputation":1239,"user_id":14766808,"display_name":"Dren"},"score":0,"creation_date":1614642594,"post_id":66431306,"comment_id":117442664,"body_markdown":"Your code is fine, check if you run the right compilation package in eclipse","body":"Your code is fine, check if you run the right compilation package in eclipse"},{"owner":{"account_id":339133,"reputation":61,"user_id":668423,"display_name":"nitroflox"},"score":0,"creation_date":1614643715,"post_id":66431306,"comment_id":117442918,"body_markdown":"Sorry, I&#39;m rather new to eclipse. Could you point me in the right direction?","body":"Sorry, I&#39;m rather new to eclipse. Could you point me in the right direction?"},{"owner":{"account_id":20135765,"reputation":1239,"user_id":14766808,"display_name":"Dren"},"score":0,"creation_date":1614644168,"post_id":66431306,"comment_id":117443023,"body_markdown":"Run -&gt; Run Configurations ... -&gt; Select &quot;Java Appliction&quot; and click &quot;New&quot;.","body":"Run -&gt; Run Configurations ... -&gt; Select &quot;Java Appliction&quot; and click &quot;New&quot;."},{"owner":{"account_id":339133,"reputation":61,"user_id":668423,"display_name":"nitroflox"},"score":1,"creation_date":1614644170,"post_id":66431306,"comment_id":117443024,"body_markdown":"Never mind, it just doesn&#39;t let me run it from the default package. Had to create a separate animals package for it to work.\n\nThanks","body":"Never mind, it just doesn&#39;t let me run it from the default package. Had to create a separate animals package for it to work.  Thanks"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1614644262,"post_id":66431306,"comment_id":117443046,"body_markdown":"Show us the full error message.","body":"Show us the full error message."},{"owner":{"account_id":339133,"reputation":61,"user_id":668423,"display_name":"nitroflox"},"score":0,"creation_date":1614644346,"post_id":66431306,"comment_id":117443063,"body_markdown":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \n\n\tat MammalInt.main(MammalInt.java:17)","body":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem:   \tat MammalInt.main(MammalInt.java:17)"},{"owner":{"account_id":339133,"reputation":61,"user_id":668423,"display_name":"nitroflox"},"score":0,"creation_date":1614644804,"post_id":66431306,"comment_id":117443173,"body_markdown":"```main() is throwing\tError  (id=20)\t\n\tbacktrace\tObject[6]  (id=23)\t\n\tcause\tError  (id=20)\t\n\tdepth\t1\t\n\tdetailMessage\t&quot;Unresolved compilation problem: \\n&quot; (id=25)\t\n\tstackTrace\tStackTraceElement[0]  (id=31)\t\n\tsuppressedExceptions\tCollections$EmptyList&lt;E&gt;  (id=32)\n```","body":"<code>main() is throwing\tError  (id=20)\t \tbacktrace\tObject[6]  (id=23)\t \tcause\tError  (id=20)\t \tdepth\t1\t \tdetailMessage\t&quot;Unresolved compilation problem: \\n&quot; (id=25)\t \tstackTrace\tStackTraceElement[0]  (id=31)\t \tsuppressedExceptions\tCollections$EmptyList&lt;E&gt;  (id=32) </code>"}],"answers":[{"tags":[],"owner":{"account_id":29492614,"reputation":1,"user_id":22601368,"display_name":"Harshavardhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695223169,"creation_date":1695223069,"answer_id":77143849,"question_id":66431306,"body_markdown":"I too faced same problem when I tried to run my program in Eclipse.\r\nIt is nothing but you have to write &quot;package&quot; in your file. Check whether you&#39;ve written package otherwise write package details and it will run smoothly.","title":"Error while compiling java code in eclipse","body":"<p>I too faced same problem when I tried to run my program in Eclipse.\nIt is nothing but you have to write &quot;package&quot; in your file. Check whether you've written package otherwise write package details and it will run smoothly.</p>\n"}],"owner":{"account_id":339133,"reputation":61,"user_id":668423,"display_name":"nitroflox"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695223169,"creation_date":1614642298,"question_id":66431306,"body_markdown":"Is there a reason why when I try to compile the code with eclipse, it gives me an error with id=20 and when I compile it in DOS it works fine?\r\n\r\nI used the command line: javac -d . &#39;filename&#39; for both.\r\n\r\nHere&#39;s the code:\r\n```package animals;\r\n\r\npublic class MammalInt implements Animal {\r\n\t\r\n\tpublic void eat() {\r\n\t\tSystem.out.println(&quot;Mammal eats.&quot;);\r\n\t}\r\n\t\r\n\tpublic void travel() {\r\n\t\tSystem.out.println(&quot;Mammal travels&quot;);\r\n\t}\r\n\t\r\n\tpublic int noOfLegs() {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tMammalInt m = new MammalInt();\r\n\t\tm.eat();\r\n\t\tm.travel();\r\n\t}\r\n}\r\n```\r\nand Animal.java:\r\n```\r\npackage animals;\r\n\r\ninterface Animal {\r\n\tpublic void eat();\r\n\tpublic void travel();\r\n}\r\n```","title":"Error while compiling java code in eclipse","body":"<p>Is there a reason why when I try to compile the code with eclipse, it gives me an error with id=20 and when I compile it in DOS it works fine?</p>\n<p>I used the command line: javac -d . 'filename' for both.</p>\n<p>Here's the code:</p>\n<pre><code>\npublic class MammalInt implements Animal {\n    \n    public void eat() {\n        System.out.println(&quot;Mammal eats.&quot;);\n    }\n    \n    public void travel() {\n        System.out.println(&quot;Mammal travels&quot;);\n    }\n    \n    public int noOfLegs() {\n        return 0;\n    }\n\n    public static void main(String[] args) {\n        MammalInt m = new MammalInt();\n        m.eat();\n        m.travel();\n    }\n}\n</code></pre>\n<p>and Animal.java:</p>\n<pre><code>package animals;\n\ninterface Animal {\n    public void eat();\n    public void travel();\n}\n</code></pre>\n"},{"tags":["java","swift","windowbuilder"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1597252657,"post_id":63381381,"comment_id":112074925,"body_markdown":"Are you referring to this [WindowBuilder](https://www.eclipse.org/windowbuilder/)? If yes, then that is an _Eclipse_ plugin. You can &quot;open&quot; a file containing java source code in _WindowBuilder_. From what you posted in your question, it appears that _WindowBuilder_ cannot handle the file you are trying to open. Maybe you should [edit] your question and post the java source code in the file you are trying to open.","body":"Are you referring to this <a href=\"https://www.eclipse.org/windowbuilder/\" rel=\"nofollow noreferrer\">WindowBuilder</a>? If yes, then that is an <i>Eclipse</i> plugin. You can &quot;open&quot; a file containing java source code in <i>WindowBuilder</i>. From what you posted in your question, it appears that <i>WindowBuilder</i> cannot handle the file you are trying to open. Maybe you should <a href=\"https://stackoverflow.com/posts/63381381/edit\">edit</a> your question and post the java source code in the file you are trying to open."},{"owner":{"account_id":19283005,"reputation":59,"user_id":14094648,"display_name":"xtremethegamer"},"score":0,"creation_date":1597252815,"post_id":63381381,"comment_id":112074995,"body_markdown":"Done! Added the source code :)","body":"Done! Added the source code :)"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1597255068,"post_id":63381381,"comment_id":112075978,"body_markdown":"I downloaded [pircbot](http://www.jibble.org/pircbot.php) and I guessed the code for `MyBot`, since you didn&#39;t include it and your code wouldn&#39;t compile without it, and I managed to open your code in the &quot;design&quot; view of _WindowBuilder_. Did you try asking in the WindowBuilder [forum](https://www.eclipse.org/forums/index.php/f/214/)?","body":"I downloaded <a href=\"http://www.jibble.org/pircbot.php\" rel=\"nofollow noreferrer\">pircbot</a> and I guessed the code for <code>MyBot</code>, since you didn&#39;t include it and your code wouldn&#39;t compile without it, and I managed to open your code in the &quot;design&quot; view of <i>WindowBuilder</i>. Did you try asking in the WindowBuilder <a href=\"https://www.eclipse.org/forums/index.php/f/214/\" rel=\"nofollow noreferrer\">forum</a>?"},{"owner":{"account_id":19283005,"reputation":59,"user_id":14094648,"display_name":"xtremethegamer"},"score":0,"creation_date":1597255939,"post_id":63381381,"comment_id":112076347,"body_markdown":"MyBot&#39;s code is really long cause it handles in the onMessage method a bunch of commands, but pretty much it takes in the channel name and goes from there. It is a bit odd right now cause I was preparing a refactor to take into account the GUI but I can&#39;t build it :/ I even reinstalled Eclipse in a newer version, and reinstalled from the install software section of Eclipse the WindowBuilder, still no meaningful results","body":"MyBot&#39;s code is really long cause it handles in the onMessage method a bunch of commands, but pretty much it takes in the channel name and goes from there. It is a bit odd right now cause I was preparing a refactor to take into account the GUI but I can&#39;t build it :/ I even reinstalled Eclipse in a newer version, and reinstalled from the install software section of Eclipse the WindowBuilder, still no meaningful results"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1597256335,"post_id":63381381,"comment_id":112076510,"body_markdown":"You don&#39;t need to post all the code of `MyBot` class, just a [mcve].","body":"You don&#39;t need to post all the code of <code>MyBot</code> class, just a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":19283005,"reputation":59,"user_id":14094648,"display_name":"xtremethegamer"},"score":0,"creation_date":1597256473,"post_id":63381381,"comment_id":112076566,"body_markdown":"I think I found the solution. Apparently, the issue lies in the fact I didn&#39;t have SWT Design installed. I did so now and it looks like it works. I&#39;ll try a few things now to test it ^^","body":"I think I found the solution. Apparently, the issue lies in the fact I didn&#39;t have SWT Design installed. I did so now and it looks like it works. I&#39;ll try a few things now to test it ^^"}],"answers":[{"tags":[],"owner":{"account_id":1535286,"reputation":553,"user_id":1431510,"display_name":"Yaza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601414198,"creation_date":1601414198,"answer_id":64127762,"question_id":63381381,"body_markdown":"You extend the SWT Composite which requires the SWT features of WindowBuilder. Maybe you only installed the Swing support features.\r\n\r\nThe best advice is to install WindowBuilder from the Eclipse Marketplace using the Help menu. Then accept all the proposed selections. Do not install XWT support.\r\n\r\nAfter restart, the GUI Toolkit should be recognized by the designer.","title":"WindowBuilder in Eclipse doesn&#39;t work even after importing libraries and installing all components","body":"<p>You extend the SWT Composite which requires the SWT features of WindowBuilder. Maybe you only installed the Swing support features.</p>\n<p>The best advice is to install WindowBuilder from the Eclipse Marketplace using the Help menu. Then accept all the proposed selections. Do not install XWT support.</p>\n<p>After restart, the GUI Toolkit should be recognized by the designer.</p>\n"},{"tags":[],"owner":{"account_id":26460461,"reputation":1,"user_id":20102719,"display_name":"Elishang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666662567,"creation_date":1666662567,"answer_id":74188374,"question_id":63381381,"body_markdown":"Quite late in responding but posting for anyone else who is searching for this solution still, as I see it many others have searched for the answer on other platforms including here.\r\n\r\nI had this issue where it would say &quot; Known GUI toolkit &quot; under the Design tab, also had several errors under the problems tab that mostly read &quot; jframe cannot be resolved to a type &quot; \r\n\r\nI was able to resolve this by removing module-info.java. I forgot where I read that it wasn&#39;t included in the product trying to be used, but it suggested entering something else. When that didn&#39;t work, I simply removed it, as the version I have is much more recent.\r\n\r\nIt was resolved instantly. ","title":"WindowBuilder in Eclipse doesn&#39;t work even after importing libraries and installing all components","body":"<p>Quite late in responding but posting for anyone else who is searching for this solution still, as I see it many others have searched for the answer on other platforms including here.</p>\n<p>I had this issue where it would say &quot; Known GUI toolkit &quot; under the Design tab, also had several errors under the problems tab that mostly read &quot; jframe cannot be resolved to a type &quot;</p>\n<p>I was able to resolve this by removing module-info.java. I forgot where I read that it wasn't included in the product trying to be used, but it suggested entering something else. When that didn't work, I simply removed it, as the version I have is much more recent.</p>\n<p>It was resolved instantly.</p>\n"},{"tags":[],"owner":{"account_id":8388148,"reputation":61,"user_id":6297816,"display_name":"loveofthecode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695223040,"creation_date":1695223040,"answer_id":77143845,"question_id":63381381,"body_markdown":"Note that one one to insure the WindowBuilder will recognize your newly\r\ncreated class is to derive it from an existing GUI Component such as\r\njavax.swing.JFrame, or javax.swing.JDialog;\r\n\r\nRegarding the inclusion/exclusion of module-info from an Eclipse project,\r\nhere is a good tutorial of what the module-info class does:\r\n[https://dev.java/learn/modules/intro/][1]\r\n\r\nIn brief, module-info is a declarative means to expose packages for\r\nyour project.  The tutorial will indicate that &quot;requires&quot; is used to\r\ndeclare that certain packages included in your project as libraries\r\nwill be visible for the classes you create in your project.\r\nThe tutorial will indicate as well the usage of &quot;uses&quot; and &quot;exposes&quot;.\r\n\r\n&quot;Exposes&quot; is the declarative means to make your classes visible \r\nwithin your project .\r\n\r\nNote that default packages under java.base module are by default\r\nalready accessible to your classes so created, and thus the default\r\npackage does not need to be listed using &quot;requires&quot;.\r\n","title":"WindowBuilder in Eclipse doesn&#39;t work even after importing libraries and installing all components","body":"<p>Note that one one to insure the WindowBuilder will recognize your newly\ncreated class is to derive it from an existing GUI Component such as\njavax.swing.JFrame, or javax.swing.JDialog;</p>\n<p>Regarding the inclusion/exclusion of module-info from an Eclipse project,\nhere is a good tutorial of what the module-info class does:\n[https://dev.java/learn/modules/intro/][1]</p>\n<p>In brief, module-info is a declarative means to expose packages for\nyour project.  The tutorial will indicate that &quot;requires&quot; is used to\ndeclare that certain packages included in your project as libraries\nwill be visible for the classes you create in your project.\nThe tutorial will indicate as well the usage of &quot;uses&quot; and &quot;exposes&quot;.</p>\n<p>&quot;Exposes&quot; is the declarative means to make your classes visible\nwithin your project .</p>\n<p>Note that default packages under java.base module are by default\nalready accessible to your classes so created, and thus the default\npackage does not need to be listed using &quot;requires&quot;.</p>\n"}],"owner":{"account_id":19283005,"reputation":59,"user_id":14094648,"display_name":"xtremethegamer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695223040,"creation_date":1597251583,"question_id":63381381,"body_markdown":"In my studies I have been just instructed about Swing and the Java GUI managment only very briefly, so I decided to take the matter into my own hands and trying to figure out how to build a good looking GUI using Java.\r\n\r\nIn doing so I came across WindowBuilder, and decided to add it to a project I had already built and currently works through User Input from the console (a Twitch Bot that makes use of the pIRCbot library). However, even after importing WindowBuilder into my project, extending Composite and doing what is shown in the first part of the official tutorial, I receive an error stating:\r\n\r\n&gt; Unknown GUI toolkit\r\nThe parser parsed the compilation unit, but can&#39;t identify any GUI toolkit, so WindowBuilder can&#39;t display any GUI to edit. This can be caused by one of the following reasons:\r\n\r\n&gt;This class is not an editable UI class and contains no UI components.\r\nWindowBuilder does not recognize the GUI toolkit or library used in this class.\r\nWindowBuilder does not understand this GUI type/pattern in a supported GUI toolkit.\r\nProblems exist with the classpath. For example, the compilation unit uses SWT classes, but the SWT/JFace libraries are not included into the classpath.\r\n\r\nThis is the stack trace:\r\n\r\n    org.eclipse.wb.internal.core.utils.exception.DesignerException: 103 (Unknown GUI toolkit). twitchChatBot.MyBotMain\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser.prepareParseContext(JavaInfoParser.java:1195)\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser.parse(JavaInfoParser.java:242)\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser.access$9(JavaInfoParser.java:238)\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser$1.runObject(JavaInfoParser.java:153)\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser$1.runObject(JavaInfoParser.java:1)\r\n\tat org.eclipse.wb.internal.core.utils.execution.ExecutionUtils.runDesignTime(ExecutionUtils.java:159)\r\n\tat org.eclipse.wb.internal.core.parser.JavaInfoParser.parse(JavaInfoParser.java:151)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF(DesignPage.java:534)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.access$9(DesignPage.java:522)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage$8$1.run(DesignPage.java:449)\r\n\tat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:236)\r\n\tat org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:146)\r\n\tat org.eclipse.swt.widgets.Display.syncExec(Display.java:5786)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage$8.run(DesignPage.java:446)\r\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:436)\r\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:352)\r\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:469)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF_withProgress(DesignPage.java:465)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF(DesignPage.java:415)\r\n\tat org.eclipse.wb.internal.core.editor.UndoManager.refreshDesignerEditor(UndoManager.java:381)\r\n\tat org.eclipse.wb.internal.core.editor.UndoManager.activate(UndoManager.java:90)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.handleActiveState_True(DesignPage.java:263)\r\n\tat org.eclipse.wb.internal.core.editor.DesignPage.handleActiveState(DesignPage.java:241)\r\n\tat org.eclipse.wb.internal.core.editor.multi.DefaultMultiMode.showPage(DefaultMultiMode.java:125)\r\n\tat org.eclipse.wb.internal.core.editor.multi.DefaultMultiMode$1.widgetSelected(DefaultMultiMode.java:63)\r\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:252)\r\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)\r\n\tat org.eclipse.swt.widgets.Display.sendEvent(Display.java:5676)\r\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1423)\r\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1449)\r\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1432)\r\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1221)\r\n\tat org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3193)\r\n\tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1876)\r\n\tat org.eclipse.swt.custom.CTabFolder.lambda$0(CTabFolder.java:330)\r\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)\r\n\tat org.eclipse.swt.widgets.Display.sendEvent(Display.java:5676)\r\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1423)\r\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4935)\r\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4429)\r\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1160)\r\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\r\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1049)\r\n\tat org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)\r\n\tat org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:660)\r\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\r\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:559)\r\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:154)\r\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:150)\r\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:137)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:107)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:657)\r\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:594)\r\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1465)\r\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1438)\r\n\r\nThis is the code of the class I&#39;m trying to open in WindowBuilder:\r\n\r\n        package twitchChatBot;\r\n    import java.io.IOException;\r\n    import org.eclipse.swt.widgets.Composite;\r\n    import org.jibble.pircbot.*;\r\n    \r\n    public class MyBotMain extends Composite {\r\n    \t\r\n    \tprivate String channel;\r\n    \t\r\n    \tpublic MyBotMain(Composite parent, int style) {\r\n    \t\tsuper(parent, style);\r\n    \t\t}\r\n    \t\r\n        public static void main(String[] args) {\r\n        \tdecideChannel();\r\n        \t}\r\n        \r\n        public static void decideChannel() {\r\n        \tconnectToChannel(&quot;&quot;);\r\n        }\r\n        \r\n        public static void connectToChannel(String channel) {\r\n       \t \tMyBot bot = new MyBot(channel);\r\n        \ttry {\r\n        \t\tbot.connect(&quot;irc.twitch.tv.&quot;, 6667, &quot;oauth:***&quot;);\r\n        \t}\r\n        \tcatch(NickAlreadyInUseException e) {\r\n        \t\tSystem.out.println(&quot;Username already in use!&quot;);\r\n        \t}\r\n        \tcatch(IrcException e) {\r\n        \t\tSystem.out.println(&quot;General error!&quot;);\r\n        \t}\r\n        \tcatch(IOException e) {\r\n        \t\tSystem.out.println(&quot;IO error!&quot;);\r\n        \t}\r\n       }\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n    \tprivate void setChannel(String channel) {this.channel = channel;}\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n    \tprivate String getChannel() {return this.channel;}\r\n        \r\n        @Override\r\n        protected void checkSubclass() {\r\n        \t\r\n        }\r\n        \r\n    }\r\n\r\n\r\nI tried  most of the fixes I could find but none seem to help me out. Anyone who knows what&#39;s going on?\r\n\r\nThanks in advance! :)\r\n\r\nEDIT 1: Added the source code as asked :)","title":"WindowBuilder in Eclipse doesn&#39;t work even after importing libraries and installing all components","body":"<p>In my studies I have been just instructed about Swing and the Java GUI managment only very briefly, so I decided to take the matter into my own hands and trying to figure out how to build a good looking GUI using Java.</p>\n<p>In doing so I came across WindowBuilder, and decided to add it to a project I had already built and currently works through User Input from the console (a Twitch Bot that makes use of the pIRCbot library). However, even after importing WindowBuilder into my project, extending Composite and doing what is shown in the first part of the official tutorial, I receive an error stating:</p>\n<blockquote>\n<p>Unknown GUI toolkit\nThe parser parsed the compilation unit, but can't identify any GUI toolkit, so WindowBuilder can't display any GUI to edit. This can be caused by one of the following reasons:</p>\n</blockquote>\n<blockquote>\n<p>This class is not an editable UI class and contains no UI components.\nWindowBuilder does not recognize the GUI toolkit or library used in this class.\nWindowBuilder does not understand this GUI type/pattern in a supported GUI toolkit.\nProblems exist with the classpath. For example, the compilation unit uses SWT classes, but the SWT/JFace libraries are not included into the classpath.</p>\n</blockquote>\n<p>This is the stack trace:</p>\n<pre><code>org.eclipse.wb.internal.core.utils.exception.DesignerException: 103 (Unknown GUI toolkit). twitchChatBot.MyBotMain\nat org.eclipse.wb.internal.core.parser.JavaInfoParser.prepareParseContext(JavaInfoParser.java:1195)\nat org.eclipse.wb.internal.core.parser.JavaInfoParser.parse(JavaInfoParser.java:242)\nat org.eclipse.wb.internal.core.parser.JavaInfoParser.access$9(JavaInfoParser.java:238)\nat org.eclipse.wb.internal.core.parser.JavaInfoParser$1.runObject(JavaInfoParser.java:153)\nat org.eclipse.wb.internal.core.parser.JavaInfoParser$1.runObject(JavaInfoParser.java:1)\nat org.eclipse.wb.internal.core.utils.execution.ExecutionUtils.runDesignTime(ExecutionUtils.java:159)\nat org.eclipse.wb.internal.core.parser.JavaInfoParser.parse(JavaInfoParser.java:151)\nat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF(DesignPage.java:534)\nat org.eclipse.wb.internal.core.editor.DesignPage.access$9(DesignPage.java:522)\nat org.eclipse.wb.internal.core.editor.DesignPage$8$1.run(DesignPage.java:449)\nat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:236)\nat org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:146)\nat org.eclipse.swt.widgets.Display.syncExec(Display.java:5786)\nat org.eclipse.wb.internal.core.editor.DesignPage$8.run(DesignPage.java:446)\nat org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:436)\nat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:352)\nat org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:469)\nat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF_withProgress(DesignPage.java:465)\nat org.eclipse.wb.internal.core.editor.DesignPage.internal_refreshGEF(DesignPage.java:415)\nat org.eclipse.wb.internal.core.editor.UndoManager.refreshDesignerEditor(UndoManager.java:381)\nat org.eclipse.wb.internal.core.editor.UndoManager.activate(UndoManager.java:90)\nat org.eclipse.wb.internal.core.editor.DesignPage.handleActiveState_True(DesignPage.java:263)\nat org.eclipse.wb.internal.core.editor.DesignPage.handleActiveState(DesignPage.java:241)\nat org.eclipse.wb.internal.core.editor.multi.DefaultMultiMode.showPage(DefaultMultiMode.java:125)\nat org.eclipse.wb.internal.core.editor.multi.DefaultMultiMode$1.widgetSelected(DefaultMultiMode.java:63)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:252)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)\nat org.eclipse.swt.widgets.Display.sendEvent(Display.java:5676)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1423)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1449)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1432)\nat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1221)\nat org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3193)\nat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1876)\nat org.eclipse.swt.custom.CTabFolder.lambda$0(CTabFolder.java:330)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)\nat org.eclipse.swt.widgets.Display.sendEvent(Display.java:5676)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1423)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4935)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4429)\nat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1160)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\nat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1049)\nat org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)\nat org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:660)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:559)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:154)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:150)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:137)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:107)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:657)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:594)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1465)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1438)\n</code></pre>\n<p>This is the code of the class I'm trying to open in WindowBuilder:</p>\n<pre><code>    package twitchChatBot;\nimport java.io.IOException;\nimport org.eclipse.swt.widgets.Composite;\nimport org.jibble.pircbot.*;\n\npublic class MyBotMain extends Composite {\n    \n    private String channel;\n    \n    public MyBotMain(Composite parent, int style) {\n        super(parent, style);\n        }\n    \n    public static void main(String[] args) {\n        decideChannel();\n        }\n    \n    public static void decideChannel() {\n        connectToChannel(&quot;&quot;);\n    }\n    \n    public static void connectToChannel(String channel) {\n        MyBot bot = new MyBot(channel);\n        try {\n            bot.connect(&quot;irc.twitch.tv.&quot;, 6667, &quot;oauth:***&quot;);\n        }\n        catch(NickAlreadyInUseException e) {\n            System.out.println(&quot;Username already in use!&quot;);\n        }\n        catch(IrcException e) {\n            System.out.println(&quot;General error!&quot;);\n        }\n        catch(IOException e) {\n            System.out.println(&quot;IO error!&quot;);\n        }\n   }\n    @SuppressWarnings(&quot;unused&quot;)\n    private void setChannel(String channel) {this.channel = channel;}\n    @SuppressWarnings(&quot;unused&quot;)\n    private String getChannel() {return this.channel;}\n    \n    @Override\n    protected void checkSubclass() {\n        \n    }\n    \n}\n</code></pre>\n<p>I tried  most of the fixes I could find but none seem to help me out. Anyone who knows what's going on?</p>\n<p>Thanks in advance! :)</p>\n<p>EDIT 1: Added the source code as asked :)</p>\n"},{"tags":["java","spring-boot","spring-security","bcrypt"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695222767,"creation_date":1695222767,"answer_id":77143797,"question_id":77143481,"body_markdown":"To test that if all work well with default implementation I recommend you to provide a `UserDetailsService` bean something like this:\r\nIt is a default one as example according to [documentation][1]\r\n\r\n      @Bean\r\n      public InMemoryUserDetailsManager users() {\r\n        return new InMemoryUserDetailsManager(\r\n            User.withUsername(&quot;myname&quot;)\r\n                .password(passwordEncoder().encode(&quot;password&quot;))\r\n                .authorities(&quot;read&quot;)\r\n                .build()\r\n        );\r\n      }\r\n    \r\n      @Bean\r\n      public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n      }\r\n\r\nSome details about `filterChain` also you should have something like this:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n                .formLogin(Customizer.withDefaults())\r\n        return http.build();\r\n\r\n}\r\n\r\nNOW you can to try to login with `myname` as login and `password` as password. Something like this.\r\n\r\n\r\nBut in controller layer you also have a `registration` here i think you should analyze/read/try with documentation this one implementation. Here I just can add some good references aka **HOW TO**\r\n\r\n[JDBC Authentication][2]\r\n\r\n[Storage Mechanisms][3]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/in-memory.html\r\n  [2]: https://docs.spring.io/spring-security/reference/servlet/authentication/index.html\r\n  [3]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/storage.html","title":"API calls failing during Spring security default authentication","body":"<p>To test that if all work well with default implementation I recommend you to provide a <code>UserDetailsService</code> bean something like this:\nIt is a default one as example according to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/in-memory.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<pre><code>  @Bean\n  public InMemoryUserDetailsManager users() {\n    return new InMemoryUserDetailsManager(\n        User.withUsername(&quot;myname&quot;)\n            .password(passwordEncoder().encode(&quot;password&quot;))\n            .authorities(&quot;read&quot;)\n            .build()\n    );\n  }\n\n  @Bean\n  public PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n  }\n</code></pre>\n<p>Some details about <code>filterChain</code> also you should have something like this:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n            .authorizeHttpRequests((authz) -&gt; authz\n                    .anyRequest().authenticated()\n            )\n            .httpBasic(withDefaults());\n            .formLogin(Customizer.withDefaults())\n    return http.build();\n</code></pre>\n<p>}</p>\n<p>NOW you can to try to login with <code>myname</code> as login and <code>password</code> as password. Something like this.</p>\n<p>But in controller layer you also have a <code>registration</code> here i think you should analyze/read/try with documentation this one implementation. Here I just can add some good references aka <strong>HOW TO</strong></p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/index.html\" rel=\"nofollow noreferrer\">JDBC Authentication</a></p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/storage.html\" rel=\"nofollow noreferrer\">Storage Mechanisms</a></p>\n"}],"owner":{"account_id":9610566,"reputation":33,"user_id":7135056,"display_name":"stan3098"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77143797,"answer_count":1,"score":0,"last_activity_date":1695222767,"creation_date":1695220268,"question_id":77143481,"body_markdown":"I am trying to incorporate password hashing using Bcrypt which required me to add spring security to my project. The issue that I am facing is that whenever I try to call any of my APIs I get the authentication like this:\r\n[![authentication screen](https://i.stack.imgur.com/urYMH.png)](https://i.stack.imgur.com/urYMH.png)\r\nand even when I enter correct username and password it fails with the logs:\r\n\r\n```\r\n2023-09-20T18:50:37.045+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login\r\n2023-09-20T18:50:37.139+05:30  WARN 18632 --- [nio-8080-exec-4] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt\r\n2023-09-20T18:50:37.139+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since password does not match stored value\r\n2023-09-20T18:50:37.144+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Failed to process authentication request\r\n\r\norg.springframework.security.authentication.BadCredentialsException: Bad credentials\r\n\tat org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:89) ~[spring-security-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147) ~[spring-security-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201) ~[spring-security-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:174) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-09-20T18:50:37.158+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-09-20T18:50:37.159+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@30505025\r\n2023-09-20T18:50:37.171+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error\r\n2023-09-20T18:50:37.174+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-09-20T18:50:37.243+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/error?continue to session\r\n2023-09-20T18:50:37.244+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-09-20T18:50:37.244+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@30505025\r\n```\r\n\r\nMy security config file is as follows:\r\n\r\n```\r\nimport org.springframework.boot.autoconfigure.security.reactive.PathRequest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\nimport static org.springframework.security.config.Customizer.withDefaults;\r\n\r\n@Configuration\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n        return http.build();\r\n    }\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().requestMatchers(String.valueOf(PathRequest.toStaticResources().atCommonLocations()));\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\nand controller is as follows:\r\n\r\n```\r\nimport com.neighborly.origin.entity.UserRegister;\r\nimport com.neighborly.origin.model.UserLogin;\r\nimport com.neighborly.origin.model.UserRegistrationRequest;\r\nimport com.neighborly.origin.repository.UserRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\npublic class UserController {\r\n    private final UserRepository userRepository;\r\n    private final PasswordEncoder passwordEncoder;\r\n    @Autowired\r\n    public UserController(UserRepository userRepository, PasswordEncoder passwordEncoder) {\r\n        this.userRepository = userRepository;\r\n        this.passwordEncoder = passwordEncoder;\r\n    }\r\n    @RequestMapping(&quot;/register&quot;)\r\n    public ResponseEntity registerUser(@RequestBody UserRegistrationRequest request) {\r\n        String username = request.getUsername();\r\n        String password = request.getPassword();\r\n        String email = request.getEmail();\r\n        String id = request.getId();\r\n\r\n        String hashedPassword = passwordEncoder.encode(password);\r\n\r\n        // TODO: Save the user to the database or perform other necessary operations\r\n        UserRegister userRegister = new UserRegister();\r\n        userRegister.setId(id);\r\n        userRegister.setUsername(username);\r\n        userRegister.setPassword(password);\r\n        userRegister.setEmail(email);\r\n        try {\r\n            userRepository.save(userRegister);\r\n        }\r\n        catch (Exception e){\r\n            return new ResponseEntity&lt;&gt;(e.toString(), HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n        return new ResponseEntity&lt;&gt;(String.format(&quot;%s user registered successfully&quot;, username), HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI have tried with default username and password too but no difference. I am using Java 17 and spring 3.1.1\r\n","title":"API calls failing during Spring security default authentication","body":"<p>I am trying to incorporate password hashing using Bcrypt which required me to add spring security to my project. The issue that I am facing is that whenever I try to call any of my APIs I get the authentication like this:\n<a href=\"https://i.stack.imgur.com/urYMH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/urYMH.png\" alt=\"authentication screen\" /></a>\nand even when I enter correct username and password it fails with the logs:</p>\n<pre><code>2023-09-20T18:50:37.045+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login\n2023-09-20T18:50:37.139+05:30  WARN 18632 --- [nio-8080-exec-4] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt\n2023-09-20T18:50:37.139+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since password does not match stored value\n2023-09-20T18:50:37.144+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Failed to process authentication request\n\norg.springframework.security.authentication.BadCredentialsException: Bad credentials\n    at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:89) ~[spring-security-core-6.1.1.jar:6.1.1]\n    at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147) ~[spring-security-core-6.1.1.jar:6.1.1]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.1.jar:6.1.1]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201) ~[spring-security-core-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:174) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-09-20T18:50:37.158+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-09-20T18:50:37.159+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@30505025\n2023-09-20T18:50:37.171+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error\n2023-09-20T18:50:37.174+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-09-20T18:50:37.243+05:30 DEBUG 18632 --- [nio-8080-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/error?continue to session\n2023-09-20T18:50:37.244+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-09-20T18:50:37.244+05:30 DEBUG 18632 --- [nio-8080-exec-4] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@30505025\n</code></pre>\n<p>My security config file is as follows:</p>\n<pre><code>import org.springframework.boot.autoconfigure.security.reactive.PathRequest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\nimport static org.springframework.security.config.Customizer.withDefaults;\n\n@Configuration\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .anyRequest().authenticated()\n                )\n                .httpBasic(withDefaults());\n        return http.build();\n    }\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().requestMatchers(String.valueOf(PathRequest.toStaticResources().atCommonLocations()));\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>and controller is as follows:</p>\n<pre><code>import com.neighborly.origin.entity.UserRegister;\nimport com.neighborly.origin.model.UserLogin;\nimport com.neighborly.origin.model.UserRegistrationRequest;\nimport com.neighborly.origin.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\npublic class UserController {\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n    @Autowired\n    public UserController(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = passwordEncoder;\n    }\n    @RequestMapping(&quot;/register&quot;)\n    public ResponseEntity registerUser(@RequestBody UserRegistrationRequest request) {\n        String username = request.getUsername();\n        String password = request.getPassword();\n        String email = request.getEmail();\n        String id = request.getId();\n\n        String hashedPassword = passwordEncoder.encode(password);\n\n        // TODO: Save the user to the database or perform other necessary operations\n        UserRegister userRegister = new UserRegister();\n        userRegister.setId(id);\n        userRegister.setUsername(username);\n        userRegister.setPassword(password);\n        userRegister.setEmail(email);\n        try {\n            userRepository.save(userRegister);\n        }\n        catch (Exception e){\n            return new ResponseEntity&lt;&gt;(e.toString(), HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n        return new ResponseEntity&lt;&gt;(String.format(&quot;%s user registered successfully&quot;, username), HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>I have tried with default username and password too but no difference. I am using Java 17 and spring 3.1.1</p>\n"},{"tags":["java","hibernate","jpa","pagination","criteria"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695233264,"post_id":77143532,"comment_id":135998486,"body_markdown":"Turn on SQL logging and you&#39;ll be able to answer all your own questions. Performance differences we can offer are going to be meaningless opinions to you and your app as it will depend on a large number of variables that are specific to your application, data and database. The only way to determine what the performance differences would be with various options is to test with real world data in a real world system and compare.","body":"Turn on SQL logging and you&#39;ll be able to answer all your own questions. Performance differences we can offer are going to be meaningless opinions to you and your app as it will depend on a large number of variables that are specific to your application, data and database. The only way to determine what the performance differences would be with various options is to test with real world data in a real world system and compare."},{"owner":{"account_id":4231062,"reputation":63,"user_id":12329490,"display_name":"Adam"},"score":0,"creation_date":1695297371,"post_id":77143532,"comment_id":136007328,"body_markdown":"@Chris I disagree that all my questions can be answered by turning on SQL logging. Hibernate documentation doesn&#39;t provide much insight on this and I want to learn the best practices from people who have experience with this.","body":"@Chris I disagree that all my questions can be answered by turning on SQL logging. Hibernate documentation doesn&#39;t provide much insight on this and I want to learn the best practices from people who have experience with this."}],"owner":{"account_id":4231062,"reputation":63,"user_id":12329490,"display_name":"Adam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695222616,"creation_date":1695220653,"question_id":77143532,"body_markdown":"I have two entities: Page and Comment\r\n\r\n    public class Page{\r\n        private int     id;\r\n    \tprivate List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n    \r\n        @OneToMany(mappedBy = &quot;page&quot;)\r\n    \tpublic List&lt;Comment&gt; getComments() { return comments }\r\n    }\r\n    \r\n    public class Comment {\r\n        private int     id;\r\n        private String  msgText;\r\n    \tprivate Page page;\r\n    \r\n        @ManyToOne\r\n    \t@JoinColumn(name=&quot;page_id&quot;)\r\n        public Page getPage() { return page }\r\n    }\r\n\r\nPage maintains a collection of comments. Every time I fetch a page, I want to have all the comments loaded together with it, so I need to use **FetchType.EAGER**.\r\nBy default, this uses FetchMode.JOIN\r\n\r\nThe problem is that JOIN messes up the pagination - when I set the limit to 5, I get the first post as well as 4 comments (or 5 comments, I forget). Instead, I should get the first 5 posts as well as all of their comments.\r\n\r\nSo instead I decided to use **FetchMode.SELECT**.\r\n\r\n\r\n**My questions**:\r\n 1. What is the difference in performance between FetchMode.SELECT together with FetchType.EAGER, and FetchMode.JOIN?\r\n 2. I know that FetchType.LAZY can lead to the N+1 queries problem. Does this problem occur when using FetchMode.SELECT with FetchType.EAGER? (ie - when I load a collection of pages, how many queries will it\r\n    take to immediately load all their associated comments?)\r\n 4. Does it have any effect to specify Batch Size when using FetchMode.SELECT with FetchType.EAGER?","title":"Performance of FetchMode.SELECT with FetchType.EAGER in Hibernate","body":"<p>I have two entities: Page and Comment</p>\n<pre><code>public class Page{\n    private int     id;\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;page&quot;)\n    public List&lt;Comment&gt; getComments() { return comments }\n}\n\npublic class Comment {\n    private int     id;\n    private String  msgText;\n    private Page page;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;page_id&quot;)\n    public Page getPage() { return page }\n}\n</code></pre>\n<p>Page maintains a collection of comments. Every time I fetch a page, I want to have all the comments loaded together with it, so I need to use <strong>FetchType.EAGER</strong>.\nBy default, this uses FetchMode.JOIN</p>\n<p>The problem is that JOIN messes up the pagination - when I set the limit to 5, I get the first post as well as 4 comments (or 5 comments, I forget). Instead, I should get the first 5 posts as well as all of their comments.</p>\n<p>So instead I decided to use <strong>FetchMode.SELECT</strong>.</p>\n<p><strong>My questions</strong>:</p>\n<ol>\n<li>What is the difference in performance between FetchMode.SELECT together with FetchType.EAGER, and FetchMode.JOIN?</li>\n<li>I know that FetchType.LAZY can lead to the N+1 queries problem. Does this problem occur when using FetchMode.SELECT with FetchType.EAGER? (ie - when I load a collection of pages, how many queries will it\ntake to immediately load all their associated comments?)</li>\n<li>Does it have any effect to specify Batch Size when using FetchMode.SELECT with FetchType.EAGER?</li>\n</ol>\n"},{"tags":["java","jwt"],"owner":{"account_id":28858201,"reputation":1,"user_id":22102557,"display_name":"Slowers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695222165,"creation_date":1694787933,"question_id":77113183,"body_markdown":"I have a problem and I don&#39;t know what to do, the problem is probably with the configuration, but this is my first spring project.\r\nI have a login method that generates a token, but when I want to perform some task as a logged-in user, there is an authorization problem.\r\n\r\nPostman: ```The request was a legal request, but the server is refusing to respond to it. Unlike a 401 Unauthorized response, authenticating will make no difference.```\r\n\r\nLogs:\r\n```\r\n2023-09-13T14:25:54.951+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /customer/login\r\n2023-09-13T14:25:54.980+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /customer/login\r\n2023-09-13T14:25:55.417+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-09-13T14:26:25.703+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /customer/loggedCustomer\r\n2023-09-13T14:26:25.715+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-09-13T14:26:25.717+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n2023-09-13T14:26:25.724+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error\r\n2023-09-13T14:26:25.727+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-09-13T14:26:25.728+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n```\r\nCode:\r\nLogin function and generate token:\r\n\r\n    @PermitAll\r\n    @PostMapping(&quot;/login&quot;)\r\n    public ResponseEntity&lt;String&gt; loginCustomer(@RequestBody CustomerLogin customerLogin) {\r\n        CustomerLogin storedCustomerLogin = customerLoginService.findPasswordByEmail(customerLogin.getEmail());\r\n        if (storedCustomerLogin != null) {\r\n\r\n            String hashedPasswordFromDatabase = storedCustomerLogin.getPassword();\r\n            BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\r\n            if (passwordEncoder.matches(customerLogin.getPassword(), hashedPasswordFromDatabase)) {\r\n\r\n                String token = jwtTokenService.generateJwtToken(customerLogin);\r\n\r\n                return new ResponseEntity&lt;&gt;(token, HttpStatus.OK);\r\n            } else {\r\n                logger.info(&quot;Attempting to log in customer with email: {}&quot;, customerLogin.getEmail());\r\n\r\n                return new ResponseEntity&lt;&gt;(&quot;Invalid credentials&quot;, HttpStatus.UNAUTHORIZED);\r\n            }\r\n        } else {\r\n            logger.error(&quot;Error during customer login for email: {}&quot;, customerLogin.getEmail());\r\n\r\n            return new ResponseEntity&lt;&gt;(&quot;User not found&quot;, HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n}\r\n\r\nConfiguration spring security: \r\n\r\n     @Configuration\r\n     @EnableWebSecurity\r\n     public class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .ignoringRequestMatchers(&quot;/customer/register&quot;, &quot;/customer/login&quot;, &quot;/admin/**&quot;, &quot;/common/**&quot;, &quot;/customer/**&quot;)\r\n                .and()\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                        .requestMatchers(&quot;/customer/register&quot;, &quot;/customer/login&quot;, &quot;/admin/**&quot;, &quot;/common/**&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                );\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n\r\nFunction jwt token:\r\n\r\n     @Service\r\n     public class JwtTokenServiceImpl {\r\n    CustomerService customerService;\r\n    SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\r\n\r\n    @Autowired\r\n    public JwtTokenServiceImpl(CustomerService customerService) {\r\n        this.customerService = customerService;\r\n    }\r\n\r\n    public String generateJwtToken(CustomerLogin customerLogin) {\r\n\r\n        return Jwts.builder()\r\n                .setSubject((customerLogin.getEmail()))\r\n                .signWith(key)\r\n                .compact();\r\n\r\n    }\r\n\r\n    public String extractEmailFromToken(String token) {\r\n        Claims claims = Jwts.parserBuilder()\r\n                .setSigningKey(key)\r\n                .build()\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n\r\n        return claims.getSubject();\r\n\r\n    }\r\n\r\n    public boolean isAuthenticated(String token) {\r\n        try {\r\n            Claims claims = Jwts.parserBuilder()\r\n                    .setSigningKey(key)\r\n                    .build()\r\n                    .parseClaimsJws(token)\r\n                    .getBody();\r\n            Date now = new Date();\r\n            return now.before(claims.getExpiration());\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\nFunction display logged client data: \r\n\r\n    @GetMapping(&quot;/loggedCustomer&quot;)\r\n    public ResponseEntity&lt;Customer&gt; getDataLoggedCustomer(@RequestHeader(&quot;Authorization&quot;) String token) {\r\n\r\n        String email = jwtTokenService.extractEmailFromToken(token);\r\n\r\n        if (email != null) {\r\n            Customer loggedCustomer = customerService.findByEmail(email);\r\n            if (loggedCustomer != null) {\r\n                logger.info(&quot;The client with email address {} has been successfully authenticated.&quot;, email);\r\n\r\n                return new ResponseEntity&lt;&gt;(loggedCustomer, HttpStatus.OK);\r\n            }\r\n        }\r\n        logger.error(&quot;Error authenticating client with address e-mail: {}&quot;, token);\r\n\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.UNAUTHORIZED);\r\n\r\n    }\r\n\r\n","title":"What is wrong with my configuration Spring Security and token JWT?","body":"<p>I have a problem and I don't know what to do, the problem is probably with the configuration, but this is my first spring project.\nI have a login method that generates a token, but when I want to perform some task as a logged-in user, there is an authorization problem.</p>\n<p>Postman: <code>The request was a legal request, but the server is refusing to respond to it. Unlike a 401 Unauthorized response, authenticating will make no difference.</code></p>\n<p>Logs:</p>\n<pre><code>2023-09-13T14:25:54.951+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /customer/login\n2023-09-13T14:25:54.980+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /customer/login\n2023-09-13T14:25:55.417+02:00 DEBUG 27392 --- [nio-8085-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-09-13T14:26:25.703+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /customer/loggedCustomer\n2023-09-13T14:26:25.715+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-09-13T14:26:25.717+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n2023-09-13T14:26:25.724+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error\n2023-09-13T14:26:25.727+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-09-13T14:26:25.728+02:00 DEBUG 27392 --- [nio-8085-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n</code></pre>\n<p>Code:\nLogin function and generate token:</p>\n<pre><code>@PermitAll\n@PostMapping(&quot;/login&quot;)\npublic ResponseEntity&lt;String&gt; loginCustomer(@RequestBody CustomerLogin customerLogin) {\n    CustomerLogin storedCustomerLogin = customerLoginService.findPasswordByEmail(customerLogin.getEmail());\n    if (storedCustomerLogin != null) {\n\n        String hashedPasswordFromDatabase = storedCustomerLogin.getPassword();\n        BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\n        if (passwordEncoder.matches(customerLogin.getPassword(), hashedPasswordFromDatabase)) {\n\n            String token = jwtTokenService.generateJwtToken(customerLogin);\n\n            return new ResponseEntity&lt;&gt;(token, HttpStatus.OK);\n        } else {\n            logger.info(&quot;Attempting to log in customer with email: {}&quot;, customerLogin.getEmail());\n\n            return new ResponseEntity&lt;&gt;(&quot;Invalid credentials&quot;, HttpStatus.UNAUTHORIZED);\n        }\n    } else {\n        logger.error(&quot;Error during customer login for email: {}&quot;, customerLogin.getEmail());\n\n        return new ResponseEntity&lt;&gt;(&quot;User not found&quot;, HttpStatus.NOT_FOUND);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Configuration spring security:</p>\n<pre><code> @Configuration\n @EnableWebSecurity\n public class SecurityConfig {\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http\n            .csrf()\n            .ignoringRequestMatchers(&quot;/customer/register&quot;, &quot;/customer/login&quot;, &quot;/admin/**&quot;, &quot;/common/**&quot;, &quot;/customer/**&quot;)\n            .and()\n            .authorizeHttpRequests((authz) -&gt; authz\n                    .requestMatchers(&quot;/customer/register&quot;, &quot;/customer/login&quot;, &quot;/admin/**&quot;, &quot;/common/**&quot;).permitAll()\n                    .anyRequest().authenticated()\n            );\n    return http.build();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>}</p>\n<p>Function jwt token:</p>\n<pre><code> @Service\n public class JwtTokenServiceImpl {\nCustomerService customerService;\nSecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\n\n@Autowired\npublic JwtTokenServiceImpl(CustomerService customerService) {\n    this.customerService = customerService;\n}\n\npublic String generateJwtToken(CustomerLogin customerLogin) {\n\n    return Jwts.builder()\n            .setSubject((customerLogin.getEmail()))\n            .signWith(key)\n            .compact();\n\n}\n\npublic String extractEmailFromToken(String token) {\n    Claims claims = Jwts.parserBuilder()\n            .setSigningKey(key)\n            .build()\n            .parseClaimsJws(token)\n            .getBody();\n\n    return claims.getSubject();\n\n}\n\npublic boolean isAuthenticated(String token) {\n    try {\n        Claims claims = Jwts.parserBuilder()\n                .setSigningKey(key)\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n        Date now = new Date();\n        return now.before(claims.getExpiration());\n    } catch (Exception e) {\n        return false;\n    }\n}\n</code></pre>\n<p>Function display logged client data:</p>\n<pre><code>@GetMapping(&quot;/loggedCustomer&quot;)\npublic ResponseEntity&lt;Customer&gt; getDataLoggedCustomer(@RequestHeader(&quot;Authorization&quot;) String token) {\n\n    String email = jwtTokenService.extractEmailFromToken(token);\n\n    if (email != null) {\n        Customer loggedCustomer = customerService.findByEmail(email);\n        if (loggedCustomer != null) {\n            logger.info(&quot;The client with email address {} has been successfully authenticated.&quot;, email);\n\n            return new ResponseEntity&lt;&gt;(loggedCustomer, HttpStatus.OK);\n        }\n    }\n    logger.error(&quot;Error authenticating client with address e-mail: {}&quot;, token);\n\n    return new ResponseEntity&lt;&gt;(HttpStatus.UNAUTHORIZED);\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","microservices"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663867436,"post_id":73817697,"comment_id":130346203,"body_markdown":"You use JPA but have nothing database related configured hence it fails. Configure a datasource and include the proper driver dependency.","body":"You use JPA but have nothing database related configured hence it fails. Configure a datasource and include the proper driver dependency."}],"answers":[{"tags":[],"owner":{"account_id":19585505,"reputation":71,"user_id":14333706,"display_name":"nejlasahin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663865539,"creation_date":1663865539,"answer_id":73818229,"question_id":73817697,"body_markdown":"If you want to use mysql you have to add mysql driver:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>If you want to use mysql you have to add mysql driver:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2038896,"reputation":134,"user_id":1820567,"display_name":"max de simone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663876259,"creation_date":1663867903,"answer_id":73818663,"question_id":73817697,"body_markdown":"The spring-boot-starter-data-jpa artifact can integrate with H2 embedded database. Add the following dependencies to your POM.xml:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt; \r\n\r\nthen, add two script files into the `src/main/resources` folder:\r\n- `schema.sql` for creating the database \r\n- `data.sql` for populating the database\r\n\r\nNote that with spring data JPA you get a default configuration for embedded database. You do not need to add database configuration to the `application.properties` file.","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>The spring-boot-starter-data-jpa artifact can integrate with H2 embedded database. Add the following dependencies to your POM.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;/dependency&gt; \n</code></pre>\n<p>then, add two script files into the <code>src/main/resources</code> folder:</p>\n<ul>\n<li><code>schema.sql</code> for creating the database</li>\n<li><code>data.sql</code> for populating the database</li>\n</ul>\n<p>Note that with spring data JPA you get a default configuration for embedded database. You do not need to add database configuration to the <code>application.properties</code> file.</p>\n"},{"tags":[],"owner":{"account_id":27344998,"reputation":1,"user_id":20855032,"display_name":"Sakshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671969589,"creation_date":1671905205,"answer_id":74909471,"question_id":73817697,"body_markdown":"Add this version of derby in `pom.xml`:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n    &lt;artifactId&gt;derby&lt;/artifactId&gt;\r\n    &lt;version&gt;10.11.1.1&lt;/version&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n    \r\nAfter making changes in pom.xml, force update the maven project\r\n\r\nAnd add the following in `applications.properties` file:\r\n\r\n```yaml\r\n#JPA\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.database=default\r\nspring.jpa.show-sql=true\r\n\r\n#DATASOURCE\r\nspring.datasource.continue-on-error=false\r\nspring.datasource.generate-unique-name=false\r\nspring.datasource.username=app\r\n```\r\n\r\nMaybe problem with the earlier default derby jar dependency\r\n\r\nIt worked after making the above changes","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>Add this version of derby in <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n    &lt;artifactId&gt;derby&lt;/artifactId&gt;\n    &lt;version&gt;10.11.1.1&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After making changes in pom.xml, force update the maven project</p>\n<p>And add the following in <code>applications.properties</code> file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>#JPA\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.database=default\nspring.jpa.show-sql=true\n\n#DATASOURCE\nspring.datasource.continue-on-error=false\nspring.datasource.generate-unique-name=false\nspring.datasource.username=app\n</code></pre>\n<p>Maybe problem with the earlier default derby jar dependency</p>\n<p>It worked after making the above changes</p>\n"},{"tags":[],"owner":{"account_id":3186836,"reputation":81,"user_id":2692249,"display_name":"Amir Sharafkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695221585,"creation_date":1683716419,"answer_id":76217604,"question_id":73817697,"body_markdown":"the solution is easy!\r\n\r\nopen the pom.xml of project and right click and select &quot;Add as Maven Project&quot; and finally &quot;Reload project&quot;\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/mTYP3.png\r\n  [2]: https://i.stack.imgur.com/wLP9N.png","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>the solution is easy!</p>\n<p>open the pom.xml of project and right click and select &quot;Add as Maven Project&quot; and finally &quot;Reload project&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/mTYP3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mTYP3.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/wLP9N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wLP9N.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13582429,"reputation":11,"user_id":9797991,"display_name":"HMoussa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694533757,"creation_date":1694339041,"answer_id":77075562,"question_id":73817697,"body_markdown":"check the classpath of the resources in your IDE \r\nsometimes it exclude all, so that the `application.properties` files are not copied to the target folder","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>check the classpath of the resources in your IDE\nsometimes it exclude all, so that the <code>application.properties</code> files are not copied to the target folder</p>\n"}],"owner":{"account_id":15570901,"reputation":517,"user_id":11953250,"display_name":"Nitin Saini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14174,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1695221585,"creation_date":1663862732,"question_id":73817697,"body_markdown":"I am trying implement open-fiegn call from currrencyexchange module to currencyconversion but I am stuck at this error. Can anyone please help me with this. I have checked other answer and tried to add `#spring.datasource.driver-class-name=com.mysql.jdbc.Driver` but didn&#39;t work.\r\n\r\n\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2022-09-22 21:07:32.787 ERROR [currency-conversion-service,,] 261173 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (the profiles dev are currently active).\r\n\r\npom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.hashedin&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;currency-conversion-service&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;currency-conversion-service&lt;/name&gt;\r\n    \t&lt;description&gt;Currency Exchange Service template for HU SDE 22.3.2 Advanced Java track&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;2021.0.1&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeign --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.6.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.7.3&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\napplication-properties\r\n \r\n\r\n     spring.application.name=currency-conversion-service\r\n        #spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n        spring.profiles.active=dev\r\n        \r\n    server.port=8081\r\n    spring.cloud.config.enabled=false\r\n    eureka.client.serviceUrl.defaultZone=https://hu-22-java-adv-mastereureka-server-urtjok3rza-wl.a.run.app/eureka\r\n    eureka.instance.prefer-ip-address=true\r\n    eureka.instance.hostname=https://hu-22-java-adv-mastereureka-server-urtjok3rza-wl.a.run.app\r\n    \r\n    eureka.client.register-with-eureka=true\r\n    eureka.client.fetch-registry=true\r\n\r\n","title":"How to resolve &quot;Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured&quot;","body":"<p>I am trying implement open-fiegn call from currrencyexchange module to currencyconversion but I am stuck at this error. Can anyone please help me with this. I have checked other answer and tried to add <code>#spring.datasource.driver-class-name=com.mysql.jdbc.Driver</code> but didn't work.</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-09-22 21:07:32.787 ERROR [currency-conversion-service,,] 261173 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (the profiles dev are currently active).\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.hashedin&lt;/groupId&gt;\n    &lt;artifactId&gt;currency-conversion-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;currency-conversion-service&lt;/name&gt;\n    &lt;description&gt;Currency Exchange Service template for HU SDE 22.3.2 Advanced Java track&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.1&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeign --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n            &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\n            &lt;version&gt;0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n            &lt;version&gt;1.6.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.7.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>application-properties</p>\n<pre><code> spring.application.name=currency-conversion-service\n    #spring.datasource.driver-class-name=com.mysql.jdbc.Driver\n    spring.profiles.active=dev\n    \nserver.port=8081\nspring.cloud.config.enabled=false\neureka.client.serviceUrl.defaultZone=https://hu-22-java-adv-mastereureka-server-urtjok3rza-wl.a.run.app/eureka\neureka.instance.prefer-ip-address=true\neureka.instance.hostname=https://hu-22-java-adv-mastereureka-server-urtjok3rza-wl.a.run.app\n\neureka.client.register-with-eureka=true\neureka.client.fetch-registry=true\n</code></pre>\n"},{"tags":["java","spring","spring-boot","redis","model"],"answers":[{"tags":[],"owner":{"account_id":19573912,"reputation":793,"user_id":14324416,"display_name":"jacky-neo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1603938082,"creation_date":1603938082,"answer_id":64584047,"question_id":64580468,"body_markdown":"Please use [Keyspaces][1] to do it. There two ways. I use one way to finish your requirement.\r\n``` java\r\n@Configuration\r\n@EnableRedisRepositories(keyspaceConfiguration = MyKeyspaceConfiguration.class)\r\npublic class ApplicationConfig {\r\n\r\n  @Value(&quot;${spring.redis.namespace}:Book&quot;)\r\n  String myKey;\r\n\r\n  //... RedisConnectionFactory and RedisTemplate Bean definitions omitted\r\n\r\n  public static class MyKeyspaceConfiguration extends KeyspaceConfiguration {\r\n\r\n    @Override\r\n    protected Iterable&lt;KeyspaceSettings&gt; initialConfiguration() {\r\n      return Collections.singleton(new KeyspaceSettings(Book.class, myKey));\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/redis/docs/2.0.3.RELEASE/reference/html/#redis.repositories.keyspaces","title":"Env variables in data class in Redis model annotation","body":"<p>Please use <a href=\"https://docs.spring.io/spring-data/redis/docs/2.0.3.RELEASE/reference/html/#redis.repositories.keyspaces\" rel=\"nofollow noreferrer\">Keyspaces</a> to do it. There two ways. I use one way to finish your requirement.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableRedisRepositories(keyspaceConfiguration = MyKeyspaceConfiguration.class)\npublic class ApplicationConfig {\n\n  @Value(&quot;${spring.redis.namespace}:Book&quot;)\n  String myKey;\n\n  //... RedisConnectionFactory and RedisTemplate Bean definitions omitted\n\n  public static class MyKeyspaceConfiguration extends KeyspaceConfiguration {\n\n    @Override\n    protected Iterable&lt;KeyspaceSettings&gt; initialConfiguration() {\n      return Collections.singleton(new KeyspaceSettings(Book.class, myKey));\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2712341,"reputation":1106,"user_id":2340484,"display_name":"charlb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695221244,"creation_date":1695213699,"answer_id":77142550,"question_id":64580468,"body_markdown":"Remove value from @RedisHash annotation\r\n\r\n    @RedisHash\r\n    public class Book {}\r\n\r\n\r\nand then define keyspaces\r\n\r\n    @Configuration\r\n    @EnableRedisRepositories\r\n    @RequiredArgsConstructor\r\n    public class RedisConfig {\r\n\r\n      private static String staticBookKeyspace;\r\n\r\n      @Value(&quot;${spring.redis.namespace}:Book&quot;)\r\n      public void setBookKeyspaceStatic(String name){\r\n          RedisConfig.staticBookKeyspace = name;\r\n      }\r\n\r\n      @Bean\r\n      public RedisMappingContext keyValueMappingContext() {\r\n        return new RedisMappingContext(\r\n              new MappingConfiguration(new IndexConfiguration(), new MyKeyspaceConfiguration()));\r\n      }\r\n\r\n      public static class MyKeyspaceConfiguration extends KeyspaceConfiguration {\r\n        @Override\r\n        protected Iterable&lt;KeyspaceSettings&gt; initialConfiguration() {\r\n            return Collections.singleton(new KeyspaceSettings(Book.class, staticBookKeyspace));\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"Env variables in data class in Redis model annotation","body":"<p>Remove value from @RedisHash annotation</p>\n<pre><code>@RedisHash\npublic class Book {}\n</code></pre>\n<p>and then define keyspaces</p>\n<pre><code>@Configuration\n@EnableRedisRepositories\n@RequiredArgsConstructor\npublic class RedisConfig {\n\n  private static String staticBookKeyspace;\n\n  @Value(&quot;${spring.redis.namespace}:Book&quot;)\n  public void setBookKeyspaceStatic(String name){\n      RedisConfig.staticBookKeyspace = name;\n  }\n\n  @Bean\n  public RedisMappingContext keyValueMappingContext() {\n    return new RedisMappingContext(\n          new MappingConfiguration(new IndexConfiguration(), new MyKeyspaceConfiguration()));\n  }\n\n  public static class MyKeyspaceConfiguration extends KeyspaceConfiguration {\n    @Override\n    protected Iterable&lt;KeyspaceSettings&gt; initialConfiguration() {\n        return Collections.singleton(new KeyspaceSettings(Book.class, staticBookKeyspace));\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3343299,"reputation":153,"user_id":3851668,"accept_rate":100,"display_name":"Edster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64584047,"answer_count":2,"score":2,"last_activity_date":1695221244,"creation_date":1603915366,"question_id":64580468,"body_markdown":"Troubling to specify dynamic env variable in the model class @Hashkey Redis annotation.\r\n\r\n\r\nModel: \r\n```\r\n@RedisHash(&quot;${spring.redis.namespace}:Book&quot;)\r\npublic class Book {\r\n    @Id\r\n    private String id;\r\n    private String name;\r\n}\r\n```\r\n\r\nMy application.properties file:\r\n```\r\nspring.redis.namespace=local\r\n```\r\n\r\nThe resulting key is &quot;${spring.redis.namespace}:Book&quot; instead of local:Book\r\n\r\nCould anyone help me with this?\r\n","title":"Env variables in data class in Redis model annotation","body":"<p>Troubling to specify dynamic env variable in the model class @Hashkey Redis annotation.</p>\n<p>Model:</p>\n<pre><code>@RedisHash(&quot;${spring.redis.namespace}:Book&quot;)\npublic class Book {\n    @Id\n    private String id;\n    private String name;\n}\n</code></pre>\n<p>My application.properties file:</p>\n<pre><code>spring.redis.namespace=local\n</code></pre>\n<p>The resulting key is &quot;${spring.redis.namespace}:Book&quot; instead of local:Book</p>\n<p>Could anyone help me with this?</p>\n"},{"tags":["java","android","flutter","replace","setuptools"],"comments":[{"owner":{"account_id":17292219,"reputation":146,"user_id":12523577,"display_name":"viethoang"},"score":0,"creation_date":1695280809,"post_id":77143570,"comment_id":136003937,"body_markdown":"https://stackoverflow.com/questions/25981156/tools-replace-not-replacing-in-android-manifest\nIt appears that we are encountering the same problem once more.","body":"<a href=\"https://stackoverflow.com/questions/25981156/tools-replace-not-replacing-in-android-manifest\" title=\"tools replace not replacing in android manifest\">stackoverflow.com/questions/25981156/&hellip;</a> It appears that we are encountering the same problem once more."}],"owner":{"account_id":29406323,"reputation":1,"user_id":22531315,"display_name":"Karan Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695220917,"creation_date":1695220917,"question_id":77143570,"body_markdown":"Running Gradle task &#39;assembleDebug&#39;...\r\nC:\\Users\\kumar\\Desktop\\Emart_V2.1_Source_Code\\apps\\eMart_Customer\\android\\app\\src\\debug\\AndroidManifest.xml:133:13-37 Error:\r\n\tAttribute receiver#com.razorpay.RzpTokenReceiver@exported value=(false) from AndroidManifest.xml:133:13-37\r\n\tis also present at [com.razorpay:checkout:1.6.34] AndroidManifest.xml:44:13-36 value=(true).\r\n\tSuggestion: add &#39;tools:replace=&quot;android:exported&quot;&#39; to &lt;receiver&gt; element at AndroidManifest.xml to override.\r\nC:\\Users\\kumar\\Desktop\\Emart_V2.1_Source_Code\\apps\\eMart_Customer\\android\\app\\src\\debug\\AndroidManifest.xml:130:13-36 Error:\r\n\tAttribute activity#com.razorpay.CheckoutActivity@exported value=(true) from AndroidManifest.xml:130:13-36\r\n\tis also present at [com.razorpay:checkout:1.6.34] AndroidManifest.xml:54:13-37 value=(false).\r\n\tSuggestion: add &#39;tools:replace=&quot;android:exported&quot;&#39; to &lt;activity&gt; element at AndroidManifest.xml to override.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:processDebugMainManifest&#39;.\r\n&gt; Manifest merger failed with multiple errors, see logs\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 48s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n","title":"&#39;tools:replace=&quot;android:exported&quot;&#39; to &lt;receiver&gt; element at AndroidManifest.xml to override","body":"<p>Running Gradle task 'assembleDebug'...\nC:\\Users\\kumar\\Desktop\\Emart_V2.1_Source_Code\\apps\\eMart_Customer\\android\\app\\src\\debug\\AndroidManifest.xml:133:13-37 Error:\nAttribute receiver#com.razorpay.RzpTokenReceiver@exported value=(false) from AndroidManifest.xml:133:13-37\nis also present at [com.razorpay:checkout:1.6.34] AndroidManifest.xml:44:13-36 value=(true).\nSuggestion: add 'tools:replace=&quot;android:exported&quot;' to  element at AndroidManifest.xml to override.\nC:\\Users\\kumar\\Desktop\\Emart_V2.1_Source_Code\\apps\\eMart_Customer\\android\\app\\src\\debug\\AndroidManifest.xml:130:13-36 Error:\nAttribute activity#com.razorpay.CheckoutActivity@exported value=(true) from AndroidManifest.xml:130:13-36\nis also present at [com.razorpay:checkout:1.6.34] AndroidManifest.xml:54:13-37 value=(false).\nSuggestion: add 'tools:replace=&quot;android:exported&quot;' to  element at AndroidManifest.xml to override.</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:processDebugMainManifest'.</li>\n</ul>\n<blockquote>\n<p>Manifest merger failed with multiple errors, see logs</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>BUILD FAILED in 48s\nException: Gradle task assembleDebug failed with exit code 1</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":2050027,"reputation":127,"user_id":1829230,"accept_rate":33,"display_name":"dascolagi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695220859,"creation_date":1695218559,"question_id":77143235,"body_markdown":"I&#39;m implementing a REST service with Spring Boot to upload a file making a Multipart POST request.\r\nI set a maximum file size in the application.yml as below:\r\n\r\n    spring:\r\n      servlet:\r\n        multipart:\r\n          enabled: true\r\n          max-file-size: 1MB\r\n          max-request-size: 1MB\r\n\r\nMy service also implements a CORS policy to allow requests from a client app hosted by a development React server:\r\n\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    @Configuration\r\n    public class SecurityConfig implements WebMvcConfigurer {\r\n    \r\n        @Value(&quot;${security.cors-origin:}&quot;)\r\n        private String allowedOrigin;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http, JwtDecoder decoder, HandlerMappingIntrospector introspector) throws Exception {\r\n    \r\n            return http\r\n                    .csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.disable())\r\n                    .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.requestMatchers(new MvcRequestMatcher(introspector, &quot;/actuator/**&quot;)).permitAll())\r\n                    .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.requestMatchers(new MvcRequestMatcher(introspector, &quot;/integration/**&quot;)).permitAll())\r\n                    .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.anyRequest().authenticated())\r\n                    .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(decoder)))\r\n                    .sessionManagement(sessionCustomizer -&gt; sessionCustomizer.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                    .build();\r\n        }\r\n    \r\n        /**\r\n         * Add a specified host to the allowed origin for Cross-Origin Resource Sharing\r\n         *\r\n         * This is needed in development as the origin of the front-end (localhost:3000)\r\n         * is different to the origin of the back-end (localhost:8080)\r\n         *\r\n         * @param registry the CorsRegistry to use to add the allowed origin\r\n         */\r\n        @Override\r\n        @ConditionalOnProperty(prefix = &quot;security&quot;, name=&quot;cors-origin&quot;)\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(allowedOrigin)\r\n                    .allowCredentials(true)\r\n            ;\r\n        }\r\n    \r\n    }\r\n\r\nI also have a ControllerAdvice to handle exceptions thrown by controllers and Spring:\r\n\r\n        @RestControllerAdvice\r\n        @Slf4j\r\n        public class GlobalControllerExceptionHandler extends ResponseEntityExceptionHandler {\r\n        \r\n            @ExceptionHandler({ MaxUploadSizeExceededException.class })\r\n            @ResponseStatus(value = HttpStatus.BAD_REQUEST)\r\n            public FileUploadErrorMessage handleMaxUploadSizeExceededException(MaxUploadSizeExceededException ex, WebRequest request) {\r\n                FileUploadErrorMessage errorMessage = new FileUploadErrorMessage(&quot;inputValidation&quot;, &quot;invalid file&quot;);\r\n                ValidationResult validationResult = new ValidationResult(&quot;invalid.logo.size&quot;);\r\n                errorMessage.setErrors(new ArrayList&lt;&gt;(Collections.singleton(validationResult)));\r\n        \r\n                return  errorMessage;\r\n            }                                    \r\n    }\r\n\r\nThe problem is that with the MaxUploadSizeExceededException, Spring Web doesn&#39;t add the Access-Control-Allow-Origin header to the error response. It works fine for other (controllers thrown) exceptions.\r\nI thought it was because the request doesn&#39;t go through any controllers as it&#39;s blocked by the framework (which throws the exception), but the weird thing is that if I don&#39;t handle MaxUploadSizeExceededException in the above ControllerAdvice, Spring returns a 500 Internal error with a response body and the CORS header as well!\r\n\r\nCan anyone explain this behaviour and knows how to fix it?","title":"CORS not working with Spring Boot when MaxUploadSizeExceededException thrown","body":"<p>I'm implementing a REST service with Spring Boot to upload a file making a Multipart POST request.\nI set a maximum file size in the application.yml as below:</p>\n<pre><code>spring:\n  servlet:\n    multipart:\n      enabled: true\n      max-file-size: 1MB\n      max-request-size: 1MB\n</code></pre>\n<p>My service also implements a CORS policy to allow requests from a client app hosted by a development React server:</p>\n<pre><code>@EnableWebSecurity\n@EnableMethodSecurity\n@Configuration\npublic class SecurityConfig implements WebMvcConfigurer {\n\n    @Value(&quot;${security.cors-origin:}&quot;)\n    private String allowedOrigin;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http, JwtDecoder decoder, HandlerMappingIntrospector introspector) throws Exception {\n\n        return http\n                .csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.disable())\n                .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.requestMatchers(new MvcRequestMatcher(introspector, &quot;/actuator/**&quot;)).permitAll())\n                .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.requestMatchers(new MvcRequestMatcher(introspector, &quot;/integration/**&quot;)).permitAll())\n                .authorizeHttpRequests(authCustomizer -&gt; authCustomizer.anyRequest().authenticated())\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.decoder(decoder)))\n                .sessionManagement(sessionCustomizer -&gt; sessionCustomizer.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .build();\n    }\n\n    /**\n     * Add a specified host to the allowed origin for Cross-Origin Resource Sharing\n     *\n     * This is needed in development as the origin of the front-end (localhost:3000)\n     * is different to the origin of the back-end (localhost:8080)\n     *\n     * @param registry the CorsRegistry to use to add the allowed origin\n     */\n    @Override\n    @ConditionalOnProperty(prefix = &quot;security&quot;, name=&quot;cors-origin&quot;)\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(allowedOrigin)\n                .allowCredentials(true)\n        ;\n    }\n\n}\n</code></pre>\n<p>I also have a ControllerAdvice to handle exceptions thrown by controllers and Spring:</p>\n<pre><code>    @RestControllerAdvice\n    @Slf4j\n    public class GlobalControllerExceptionHandler extends ResponseEntityExceptionHandler {\n    \n        @ExceptionHandler({ MaxUploadSizeExceededException.class })\n        @ResponseStatus(value = HttpStatus.BAD_REQUEST)\n        public FileUploadErrorMessage handleMaxUploadSizeExceededException(MaxUploadSizeExceededException ex, WebRequest request) {\n            FileUploadErrorMessage errorMessage = new FileUploadErrorMessage(&quot;inputValidation&quot;, &quot;invalid file&quot;);\n            ValidationResult validationResult = new ValidationResult(&quot;invalid.logo.size&quot;);\n            errorMessage.setErrors(new ArrayList&lt;&gt;(Collections.singleton(validationResult)));\n    \n            return  errorMessage;\n        }                                    \n}\n</code></pre>\n<p>The problem is that with the MaxUploadSizeExceededException, Spring Web doesn't add the Access-Control-Allow-Origin header to the error response. It works fine for other (controllers thrown) exceptions.\nI thought it was because the request doesn't go through any controllers as it's blocked by the framework (which throws the exception), but the weird thing is that if I don't handle MaxUploadSizeExceededException in the above ControllerAdvice, Spring returns a 500 Internal error with a response body and the CORS header as well!</p>\n<p>Can anyone explain this behaviour and knows how to fix it?</p>\n"},{"tags":["java","selenium-webdriver","automation","datefield"],"owner":{"account_id":20677120,"reputation":11,"user_id":15181470,"display_name":"Yogesh Bhatt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695220855,"creation_date":1695216013,"question_id":77142867,"body_markdown":"I am trying to set date in date type input filed using selenium in java with chrome browser but on submit, date filled is getting reset and filled validation message gets displayed.\r\n\r\nInput field: \r\n````\r\n&lt;input class=&quot;date_range_input&quot; type=&quot;date&quot; placeholder=&quot;Select Date&quot; name=&quot;SelectDateFrom&quot; min=&quot;2023-09-14&quot; max=&quot;2023-09-20&quot; value=&quot;&quot;&gt;\r\n````\r\nCode: \r\n````  \r\nDriver driver = new ChromeDriver();\r\nJavascriptExecutor javascriptExecutor = (JavascriptExecutor) driver;\r\n````\r\nTried solutions:\r\n\r\n 1.  \r\n````\r\njavascriptExecutor.executeScript(&quot;document.querySelector(\\&quot;input[name=&#39;SelectDateFrom&#39;]\\&quot;).setAttribute(&#39;value&#39;, &#39;2023-09-20&#39;)&quot;);\r\n````\r\n 2. \r\n````\r\nWebElement fromDateInput = driver.findElement(By.cssSelector(&quot;input[name=&#39;SelectDateFrom&#39;]&quot;));\r\nfromDateInput.sendKey(&quot;2023-09-20&quot;);\r\nfromDateInput.click();\r\n````\r\n\r\nAbove solution able to set date in date field but when I submit form selenium code\r\n\r\n```java\r\nWebElement submitButton = driver.findElement(By.cssSelector(&quot;button[type=&#39;submit&#39;]&quot;));\r\nsubmitButton.submit();\r\n```\r\n\r\nso the field **SelectDateFrom** gets reset and filed validation message shown\r\n\r\nI want to set date in date input field of HTML using using selenium in java","title":"How to set date in date input field of HTML using Selenium Java","body":"<p>I am trying to set date in date type input filed using selenium in java with chrome browser but on submit, date filled is getting reset and filled validation message gets displayed.</p>\n<p>Input field:</p>\n<pre><code>&lt;input class=&quot;date_range_input&quot; type=&quot;date&quot; placeholder=&quot;Select Date&quot; name=&quot;SelectDateFrom&quot; min=&quot;2023-09-14&quot; max=&quot;2023-09-20&quot; value=&quot;&quot;&gt;\n</code></pre>\n<p>Code:</p>\n<pre><code>Driver driver = new ChromeDriver();\nJavascriptExecutor javascriptExecutor = (JavascriptExecutor) driver;\n</code></pre>\n<p>Tried solutions:</p>\n<p>1.</p>\n<pre><code>javascriptExecutor.executeScript(&quot;document.querySelector(\\&quot;input[name='SelectDateFrom']\\&quot;).setAttribute('value', '2023-09-20')&quot;);\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>WebElement fromDateInput = driver.findElement(By.cssSelector(&quot;input[name='SelectDateFrom']&quot;));\nfromDateInput.sendKey(&quot;2023-09-20&quot;);\nfromDateInput.click();\n</code></pre>\n<p>Above solution able to set date in date field but when I submit form selenium code</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebElement submitButton = driver.findElement(By.cssSelector(&quot;button[type='submit']&quot;));\nsubmitButton.submit();\n</code></pre>\n<p>so the field <strong>SelectDateFrom</strong> gets reset and filed validation message shown</p>\n<p>I want to set date in date input field of HTML using using selenium in java</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":2535057,"reputation":25845,"user_id":2202415,"display_name":"Maciej Kowalski"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1554374755,"creation_date":1554374755,"answer_id":55513960,"question_id":55513776,"body_markdown":"`CrudRepository` or `JpaRepository` were not designed to work without an `&lt;Entity,ID&gt;` pair.\r\n\r\nYou are better off creating a custom repo, inject EntityManager and query from there:\r\n\r\n      @Repository\r\n      public class CustomNativeRepositoryImpl implements CustomNativeRepository {\r\n      \r\n        @Autowired\r\n        private EntityManager entityManager;\r\n     \r\n        @Override\r\n        public Object runNativeQuery() {\r\n            entityManager.createNativeQuery(&quot;myNativeQuery&quot;)\r\n             .getSingleResult();\r\n        }\r\n    }","title":"Create spring repository without entity","body":"<p><code>CrudRepository</code> or <code>JpaRepository</code> were not designed to work without an <code>&lt;Entity,ID&gt;</code> pair.</p>\n\n<p>You are better off creating a custom repo, inject EntityManager and query from there:</p>\n\n<pre><code>  @Repository\n  public class CustomNativeRepositoryImpl implements CustomNativeRepository {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    public Object runNativeQuery() {\n        entityManager.createNativeQuery(\"myNativeQuery\")\n         .getSingleResult();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4215774,"reputation":524,"user_id":3452039,"display_name":"Mehdi Benmesssaoud"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1554376146,"creation_date":1554376146,"answer_id":55514448,"question_id":55513776,"body_markdown":"You can just annotate your implementation with `@Repository`, and get an instance of EntityManager. \r\n\r\n\r\n \r\n\r\n    public interface ProductFilterRepository {\r\n        Page&lt;Product&gt; filter(FilterTO filter, Pageable pageable);\r\n    }\r\n\r\n \r\n\r\n    @Repository\r\n    @AllArgsConstructor\r\n    public class ProductFilterRepositoryImpl implements ProductFilterRepository {\r\n    \r\n        private final EntityManager em;\r\n    \r\n        @Override\r\n        public Page&lt;Product&gt; filter(FilterTO filter, Pageable pageable) {\r\n            CriteriaBuilder cb = em.getCriteriaBuilder();\r\n            CriteriaQuery&lt;Product&gt; cq = cb.createQuery(Product.class);\r\n            Root&lt;Product&gt; root = cq.from(Product.class);\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    \r\n            if (filter.getPriceMin() != null) {\r\n                predicates.add(cb.ge(root.get(&quot;price&quot;), filter.getPriceMin()));\r\n            }\r\n            if (filter.getPriceMax() != null) {\r\n                predicates.add(cb.le(root.get(&quot;price&quot;), filter.getPriceMax()));\r\n            }\r\n            if (filter.getBrands() != null &amp;&amp; !filter.getBrands().isEmpty()) {\r\n                predicates.add(root.get(&quot;brand&quot;).in(filter.getBrands()));\r\n            }\r\n            if (filter.getCategories() != null &amp;&amp; !filter.getCategories().isEmpty()) {\r\n                predicates.add(root.get(&quot;category&quot;).in(filter.getCategories()));\r\n            }\r\n            cq.where(predicates.toArray(new Predicate[0]));\r\n            TypedQuery&lt;Product&gt; tq = em.createQuery(cq);\r\n            tq.setMaxResults(pageable.getPageSize());\r\n            tq.setFirstResult(pageable.getPageNumber() * pageable.getPageSize());\r\n    \r\n            CriteriaQuery&lt;Long&gt; countCq = cb.createQuery(Long.class);\r\n            countCq.select(cb.count(countCq.from(Product.class)));\r\n            countCq.where(predicates.toArray(new Predicate[0]));\r\n            TypedQuery&lt;Long&gt; countTq = em.createQuery(countCq);\r\n            Long count = countTq.getSingleResult();\r\n    \r\n            return new PageImpl&lt;&gt;(tq.getResultList(), pageable, count);\r\n        }\r\n    }","title":"Create spring repository without entity","body":"<p>You can just annotate your implementation with <code>@Repository</code>, and get an instance of EntityManager. </p>\n\n<pre><code>public interface ProductFilterRepository {\n    Page&lt;Product&gt; filter(FilterTO filter, Pageable pageable);\n}\n\n\n\n@Repository\n@AllArgsConstructor\npublic class ProductFilterRepositoryImpl implements ProductFilterRepository {\n\n    private final EntityManager em;\n\n    @Override\n    public Page&lt;Product&gt; filter(FilterTO filter, Pageable pageable) {\n        CriteriaBuilder cb = em.getCriteriaBuilder();\n        CriteriaQuery&lt;Product&gt; cq = cb.createQuery(Product.class);\n        Root&lt;Product&gt; root = cq.from(Product.class);\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        if (filter.getPriceMin() != null) {\n            predicates.add(cb.ge(root.get(\"price\"), filter.getPriceMin()));\n        }\n        if (filter.getPriceMax() != null) {\n            predicates.add(cb.le(root.get(\"price\"), filter.getPriceMax()));\n        }\n        if (filter.getBrands() != null &amp;&amp; !filter.getBrands().isEmpty()) {\n            predicates.add(root.get(\"brand\").in(filter.getBrands()));\n        }\n        if (filter.getCategories() != null &amp;&amp; !filter.getCategories().isEmpty()) {\n            predicates.add(root.get(\"category\").in(filter.getCategories()));\n        }\n        cq.where(predicates.toArray(new Predicate[0]));\n        TypedQuery&lt;Product&gt; tq = em.createQuery(cq);\n        tq.setMaxResults(pageable.getPageSize());\n        tq.setFirstResult(pageable.getPageNumber() * pageable.getPageSize());\n\n        CriteriaQuery&lt;Long&gt; countCq = cb.createQuery(Long.class);\n        countCq.select(cb.count(countCq.from(Product.class)));\n        countCq.where(predicates.toArray(new Predicate[0]));\n        TypedQuery&lt;Long&gt; countTq = em.createQuery(countCq);\n        Long count = countTq.getSingleResult();\n\n        return new PageImpl&lt;&gt;(tq.getResultList(), pageable, count);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15626052,"reputation":41,"user_id":11273675,"display_name":"Jes&#250;s David L&#243;pez"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1554377405,"creation_date":1554377405,"answer_id":55514880,"question_id":55513776,"body_markdown":"If you are using JPA you need Entities. As previous answers you can create NativeQueries or use Criteria API directly from EntityManager.\r\n\r\nSome documentation about custom reports and common repo behaviour:\r\n\r\nhttps://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html#repositories.custom-behaviour-for-all-repositories","title":"Create spring repository without entity","body":"<p>If you are using JPA you need Entities. As previous answers you can create NativeQueries or use Criteria API directly from EntityManager.</p>\n\n<p>Some documentation about custom reports and common repo behaviour:</p>\n\n<p><a href=\"https://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html#repositories.custom-behaviour-for-all-repositories\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html#repositories.custom-behaviour-for-all-repositories</a></p>\n"},{"tags":[],"owner":{"account_id":4779952,"reputation":1434,"user_id":3862024,"accept_rate":100,"display_name":"gagarwa"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1695220293,"creation_date":1586960538,"answer_id":61231149,"question_id":55513776,"body_markdown":"Currently there is no functionality in JPA to create repositories with only native or JPQL/HQL queries (using @Query notation).  To get around this, you can create a dummy object to insert into the extension interface like below:\r\n\r\n    @Entity\r\n    public class RootEntity {\r\n        @Id\r\n        private Integer id;\r\n    }\r\n\r\n    @Repository\r\n    public interface MyRepository extends JpaRepository&lt;RootEntity, Integer&gt; {\r\n    }","title":"Create spring repository without entity","body":"<p>Currently there is no functionality in JPA to create repositories with only native or JPQL/HQL queries (using @Query notation).  To get around this, you can create a dummy object to insert into the extension interface like below:</p>\n<pre><code>@Entity\npublic class RootEntity {\n    @Id\n    private Integer id;\n}\n\n@Repository\npublic interface MyRepository extends JpaRepository&lt;RootEntity, Integer&gt; {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8156195,"reputation":888,"user_id":6812618,"display_name":"Manas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589710735,"creation_date":1589710735,"answer_id":61850197,"question_id":55513776,"body_markdown":"I think that using JdbcTemplate can be considered as an alternative when you do not have a concrete entity class for the resultset of a native query. Querying data using JdbcTemplate requires a POJO class for the resultset and a mapper implementing the RowMapper interface for the POJO class.","title":"Create spring repository without entity","body":"<p>I think that using JdbcTemplate can be considered as an alternative when you do not have a concrete entity class for the resultset of a native query. Querying data using JdbcTemplate requires a POJO class for the resultset and a mapper implementing the RowMapper interface for the POJO class.</p>\n"},{"tags":[],"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1668180361,"creation_date":1616095229,"answer_id":66697752,"question_id":55513776,"body_markdown":"This works for us.  See the entity manager\r\n\r\nhttps://www.baeldung.com/hibernate-entitymanager\r\n\r\n    @Repository\r\n    public class MyRepository {\r\n\r\n        @PersistenceContext\r\n        EntityManager entityManager;\r\n\r\n        public void doSomeQuery(){\r\n            Query query = entityManager.createNativeQuery(&quot;SELECT foo FROM bar&quot;);\r\n            query.getResultsList()\r\n            ...\r\n        }\r\n\r\n    }\r\n","title":"Create spring repository without entity","body":"<p>This works for us.  See the entity manager</p>\n<p><a href=\"https://www.baeldung.com/hibernate-entitymanager\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-entitymanager</a></p>\n<pre><code>@Repository\npublic class MyRepository {\n\n    @PersistenceContext\n    EntityManager entityManager;\n\n    public void doSomeQuery(){\n        Query query = entityManager.createNativeQuery(&quot;SELECT foo FROM bar&quot;);\n        query.getResultsList()\n        ...\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14252840,"reputation":551,"user_id":10296004,"display_name":"dramcio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54389,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"answer_count":6,"score":48,"last_activity_date":1695220293,"creation_date":1554374108,"question_id":55513776,"body_markdown":"I want to use spring data repository interface to execute native queries - I think this way is the simplest because of low complexity.\r\n\r\nBut when extending interface ex. `CrudRepository&lt;T, ID&gt;` I need to write T - my entity, which is not available.\r\n\r\nMy native queries does not return any concrete entity, so what is the best way to create spring repository without entity?\r\n\r\n","title":"Create spring repository without entity","body":"<p>I want to use spring data repository interface to execute native queries - I think this way is the simplest because of low complexity.</p>\n\n<p>But when extending interface ex. <code>CrudRepository&lt;T, ID&gt;</code> I need to write T - my entity, which is not available.</p>\n\n<p>My native queries does not return any concrete entity, so what is the best way to create spring repository without entity?</p>\n"},{"tags":["java","database","jdbc"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1695223843,"post_id":77143449,"comment_id":135996602,"body_markdown":"Well you&#39;re going to have to query the database for those values aren&#39;t you?","body":"Well you&#39;re going to have to query the database for those values aren&#39;t you?"}],"owner":{"account_id":26355334,"reputation":55,"user_id":20012406,"display_name":"xaso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695220064,"creation_date":1695220064,"question_id":77143449,"body_markdown":"i want write method for my app when username and email are not unique send massage and take input again .i give constraints unique in my table.\r\n\r\n     public void signUp() throws SQLException {\r\n        System.out.print(&quot;enter your name: &quot;);\r\n        String name = input.next();\r\n        System.out.print(&quot;enter your userName: &quot;);\r\n        String userName = input.next();\r\n        String email = &quot;&quot;;\r\n        boolean flag1 = true;\r\n        System.out.print(&quot;enter your email: &quot;);\r\n        while (flag1) {\r\n            email = input.next();\r\n            if (Validation.validateEmail(email)) {\r\n                flag1 = false;\r\n            } else {\r\n                System.out.println(&quot;enter valid email&quot;);\r\n            }\r\n        }\r\n        System.out.print(&quot;enter your password: &quot;);\r\n        String password = &quot;&quot;;\r\n        boolean flag = true;\r\n        while (flag) {\r\n            password = input.next();\r\n            if (Validation.isValidPassword(password)) {\r\n                flag = false;\r\n            } else {\r\n                System.out.println(&quot;please enter valid password&quot;);\r\n            }\r\n        }\r\n        User user = new User(name, userName, email, password);\r\n        userRepo.insert(user);\r\n    }","title":"How to write a log in system with uniqueness constraint using jdbc","body":"<p>i want write method for my app when username and email are not unique send massage and take input again .i give constraints unique in my table.</p>\n<pre><code> public void signUp() throws SQLException {\n    System.out.print(&quot;enter your name: &quot;);\n    String name = input.next();\n    System.out.print(&quot;enter your userName: &quot;);\n    String userName = input.next();\n    String email = &quot;&quot;;\n    boolean flag1 = true;\n    System.out.print(&quot;enter your email: &quot;);\n    while (flag1) {\n        email = input.next();\n        if (Validation.validateEmail(email)) {\n            flag1 = false;\n        } else {\n            System.out.println(&quot;enter valid email&quot;);\n        }\n    }\n    System.out.print(&quot;enter your password: &quot;);\n    String password = &quot;&quot;;\n    boolean flag = true;\n    while (flag) {\n        password = input.next();\n        if (Validation.isValidPassword(password)) {\n            flag = false;\n        } else {\n            System.out.println(&quot;please enter valid password&quot;);\n        }\n    }\n    User user = new User(name, userName, email, password);\n    userRepo.insert(user);\n}\n</code></pre>\n"},{"tags":["java","android-studio","google-sheets","google-sheets-api","spreadsheet"],"owner":{"account_id":16419304,"reputation":91,"user_id":11860941,"display_name":"ersa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695219952,"creation_date":1695135062,"question_id":77135648,"body_markdown":"Currently, I have this code to read data from Excel files.\r\nThe Excel files are located in Google Drive.\r\n\r\n    for (File excelFile : excelFiles) {                \r\n        String range = &quot;A3:E55&quot;;\r\n        ValueRange response = sheetsService.spreadsheets().values()\r\n                     .get(excelFile.getId(), range)\r\n                     .execute();\r\n        List&lt;List&lt;Object&gt;&gt; values = response.getValues();\r\n        // the rest of the code ...\r\n    }\r\n\r\n\r\nBecause I have ~100 files to read, it&#39;s taking a long time to read them all.\r\nI tried to use threads to make it faster, and it worked, but I got a quota error.\r\n\r\nIs there an option to get a list of responses with 1 command?\r\n","title":"Read multiple excel files from google drive using Java","body":"<p>Currently, I have this code to read data from Excel files.\nThe Excel files are located in Google Drive.</p>\n<pre><code>for (File excelFile : excelFiles) {                \n    String range = &quot;A3:E55&quot;;\n    ValueRange response = sheetsService.spreadsheets().values()\n                 .get(excelFile.getId(), range)\n                 .execute();\n    List&lt;List&lt;Object&gt;&gt; values = response.getValues();\n    // the rest of the code ...\n}\n</code></pre>\n<p>Because I have ~100 files to read, it's taking a long time to read them all.\nI tried to use threads to make it faster, and it worked, but I got a quota error.</p>\n<p>Is there an option to get a list of responses with 1 command?</p>\n"},{"tags":["java","android","shared-libraries","android-library"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":2,"creation_date":1695243534,"post_id":77143266,"comment_id":136000228,"body_markdown":"Java libraries are not designed to be installed, they are part of the app. So if you want to use application specific code you have to do that inside the library using conditional execution, but multiple versions don&#39;t work on Android, especially on the latest Android versions as Google wants to eliminate dynamic code loading for security reasons.","body":"Java libraries are not designed to be installed, they are part of the app. So if you want to use application specific code you have to do that inside the library using conditional execution, but multiple versions don&#39;t work on Android, especially on the latest Android versions as Google wants to eliminate dynamic code loading for security reasons."}],"owner":{"account_id":11346268,"reputation":116,"user_id":8318668,"display_name":"Simon Ackermann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695219933,"creation_date":1695218777,"question_id":77143266,"body_markdown":"**Context:**\r\n\r\nI am working on an android application that uses multiple libraries.\r\nOne of those libraries can vary depending on the device (implementation can differ)\r\nTo avoid having to build multiple version of the application the idea would be to have a unique version of the app that links to the said library on the device. The library will them use flavors to have variants\r\n\r\nIn my application manifest I have added this:\r\n```xml\r\n&lt;uses-library android:name=&quot;com.lib.package&quot;/&gt;\r\n```\r\n\r\nIn my build.gradle I have put this:\r\n```groovy\r\ndependencies {\r\n  // ...\r\n  compileOnly project(path: &quot;:path_to_lib&quot;)\r\n}\r\n```\r\n\r\nBy having compile only the compiler knows which class is available at compile time we intend to keep the exact same interfaces across flavors\r\n\r\n**Problem:**\r\n\r\nWhen I launch the application from Android studio it will not boot since the library is not available.\r\n\r\nSo far I have not found a way to install the library onto the device so that it can be linked dynamically to the app at install.\r\n\r\nIs what I am trying possible or am I totally of track ?\r\n","title":"Android shared java library","body":"<p><strong>Context:</strong></p>\n<p>I am working on an android application that uses multiple libraries.\nOne of those libraries can vary depending on the device (implementation can differ)\nTo avoid having to build multiple version of the application the idea would be to have a unique version of the app that links to the said library on the device. The library will them use flavors to have variants</p>\n<p>In my application manifest I have added this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-library android:name=&quot;com.lib.package&quot;/&gt;\n</code></pre>\n<p>In my build.gradle I have put this:</p>\n<pre><code>dependencies {\n  // ...\n  compileOnly project(path: &quot;:path_to_lib&quot;)\n}\n</code></pre>\n<p>By having compile only the compiler knows which class is available at compile time we intend to keep the exact same interfaces across flavors</p>\n<p><strong>Problem:</strong></p>\n<p>When I launch the application from Android studio it will not boot since the library is not available.</p>\n<p>So far I have not found a way to install the library onto the device so that it can be linked dynamically to the app at install.</p>\n<p>Is what I am trying possible or am I totally of track ?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":22372777,"reputation":41,"user_id":16587589,"display_name":"AA_20"},"score":0,"creation_date":1685900410,"post_id":76395961,"comment_id":134722278,"body_markdown":"https://docs.spring.io/spring-security/site/docs/6.0.x/api/org/springframework/security/core/context/DeferredSecurityContext.html, this is the class I was referring to. I was trying to understand the flow of authentication and the purpose of this class. There is no mention of it in the spring docs specifically.","body":"<a href=\"https://docs.spring.io/spring-security/site/docs/6.0.x/api/org/springframework/security/core/context/DeferredSecurityContext.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/6.0.x/api/org/&hellip;</a>, this is the class I was referring to. I was trying to understand the flow of authentication and the purpose of this class. There is no mention of it in the spring docs specifically."}],"answers":[{"tags":[],"owner":{"account_id":16421416,"reputation":1,"user_id":11925869,"display_name":"MrMango"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686801755,"creation_date":1686801755,"answer_id":76479024,"question_id":76395961,"body_markdown":"I&#39;ve been trying to find the answer for this too. Apparently from what I understood , it is used to save and persist context between requests. For instance , when you have to persist context information (uesr roles , authority , authenticated status, etc.) between requests. \r\n\r\nSeems like it&#39;s also brought as an alternative to the deprecated package called SecurityContextRepository. I think you would get a better idea if you read about that. Also refer [loadDefferedContext][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/context/SecurityContextRepository.html#loadDeferredContext(jakarta.servlet.http.HttpServletRequest)","title":"What is the use case of the deferred security context?","body":"<p>I've been trying to find the answer for this too. Apparently from what I understood , it is used to save and persist context between requests. For instance , when you have to persist context information (uesr roles , authority , authenticated status, etc.) between requests.</p>\n<p>Seems like it's also brought as an alternative to the deprecated package called SecurityContextRepository. I think you would get a better idea if you read about that. Also refer <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/context/SecurityContextRepository.html#loadDeferredContext(jakarta.servlet.http.HttpServletRequest)\" rel=\"nofollow noreferrer\">loadDefferedContext</a></p>\n"},{"tags":[],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695219688,"creation_date":1695213876,"answer_id":77142577,"question_id":76395961,"body_markdown":"This [GitHub issue][1] explains it best. To summarize:\r\n\r\n&gt; A benefit is that if it takes some work to obtain the SecurityContext, the(n) it is only looked up if necessary.\r\n&lt;br&gt;\r\nFor example, currently the `SecurityContext` is looked up from the `HttpSession` for every page. When using distributed sessions (i.e. `Spring Session` + `Redis`) this is a lot of unnecessary overhead for accessing public css, javascript, and images. With these changes Spring Security can avoid accessing the `HttpSession` for public resources like javascript, css, images, public html pages, etc.\r\n\r\n`AuthorizationManager` may not need to access the `SecurityContext` to authenticate (e.g. public invocation was allowed), in this case having a `Supplier` helps to skip the work needed to obtain the `SecurityContext`.\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/issues/10913","title":"What is the use case of the deferred security context?","body":"<p>This <a href=\"https://github.com/spring-projects/spring-security/issues/10913\" rel=\"nofollow noreferrer\">GitHub issue</a> explains it best. To summarize:</p>\n<blockquote>\n<p>A benefit is that if it takes some work to obtain the SecurityContext, the(n) it is only looked up if necessary.\n<br>\nFor example, currently the <code>SecurityContext</code> is looked up from the <code>HttpSession</code> for every page. When using distributed sessions (i.e. <code>Spring Session</code> + <code>Redis</code>) this is a lot of unnecessary overhead for accessing public css, javascript, and images. With these changes Spring Security can avoid accessing the <code>HttpSession</code> for public resources like javascript, css, images, public html pages, etc.</p>\n</blockquote>\n<p><code>AuthorizationManager</code> may not need to access the <code>SecurityContext</code> to authenticate (e.g. public invocation was allowed), in this case having a <code>Supplier</code> helps to skip the work needed to obtain the <code>SecurityContext</code>.</p>\n"}],"owner":{"account_id":22372777,"reputation":41,"user_id":16587589,"display_name":"AA_20"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1695219688,"creation_date":1685793305,"question_id":76395961,"body_markdown":"I have been going through the Spring Security docs and been playing around with basic authentication projects. I am confused as to what is the use of deferred context in authentication?\r\n\r\n\r\nI have gone through the [javadocs of the class](https://docs.spring.io/spring-security/site/docs/6.0.x/api/org/springframework/security/core/context/DeferredSecurityContext.html) and tried to see the flow of authentication, but am unable to figure out its purpose.","title":"What is the use case of the deferred security context?","body":"<p>I have been going through the Spring Security docs and been playing around with basic authentication projects. I am confused as to what is the use of deferred context in authentication?</p>\n<p>I have gone through the <a href=\"https://docs.spring.io/spring-security/site/docs/6.0.x/api/org/springframework/security/core/context/DeferredSecurityContext.html\" rel=\"nofollow noreferrer\">javadocs of the class</a> and tried to see the flow of authentication, but am unable to figure out its purpose.</p>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":1543370,"reputation":3088,"user_id":1437486,"display_name":"Olivier Coilland"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1340311589,"creation_date":1340304183,"answer_id":11144717,"question_id":11143303,"body_markdown":"It&#39;s pretty straightforward:\r\n\r\n**HSSF:**\r\n\r\n    SummaryInformation summaryInfo = workbook.getSummaryInformation();\r\n    summaryInfo.setAuthor(author);\r\n\r\n**XSSF:**\r\n\r\n    POIXMLProperties xmlProps = workbook.getProperties();    \r\n    POIXMLProperties.CoreProperties coreProps =  xmlProps.getCoreProperties();\r\n    coreProps.setCreator(author);\r\n\r\nHave fun :)","title":"How to set Author name to excel file using poi","body":"<p>It's pretty straightforward:</p>\n\n<p><strong>HSSF:</strong></p>\n\n<pre><code>SummaryInformation summaryInfo = workbook.getSummaryInformation();\nsummaryInfo.setAuthor(author);\n</code></pre>\n\n<p><strong>XSSF:</strong></p>\n\n<pre><code>POIXMLProperties xmlProps = workbook.getProperties();    \nPOIXMLProperties.CoreProperties coreProps =  xmlProps.getCoreProperties();\ncoreProps.setCreator(author);\n</code></pre>\n\n<p>Have fun :)</p>\n"},{"tags":[],"owner":{"account_id":1072619,"reputation":2617,"user_id":1071526,"accept_rate":100,"display_name":"mfeineis"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1392044063,"creation_date":1392044063,"answer_id":21680397,"question_id":11143303,"body_markdown":"Not a direct answer but in case anyone needs to do this in NPOI (the .NET port of POI) here is the extension method I came up with ... it&#39;s basically what Olivier suggested - only implemented in C#:\r\n\r\n&lt;!-- language: c# --&gt;\r\n\r\n    /// &lt;summary&gt;\r\n    /// Sets the author of this workbook.\r\n    /// &lt;/summary&gt;\r\n    /// &lt;param name=&quot;workbook&quot;&gt;&lt;/param&gt;\r\n    /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;\r\n    public static void SetAuthor(this IWorkbook workbook, string author)\r\n    {\r\n        if (workbook is NPOI.XSSF.UserModel.XSSFWorkbook)\r\n        {\r\n            var xssfWorkbook = workbook as NPOI.XSSF.UserModel.XSSFWorkbook;\r\n            var xmlProps = xssfWorkbook.GetProperties();\r\n            var coreProps = xmlProps.CoreProperties;\r\n            coreProps.Creator = author;\r\n            return;\r\n        }\r\n\r\n        if (workbook is NPOI.HSSF.UserModel.HSSFWorkbook)\r\n        {\r\n            var hssfWorkbook = workbook as NPOI.HSSF.UserModel.HSSFWorkbook;\r\n            var summaryInfo = hssfWorkbook.SummaryInformation;\r\n\r\n            if (summaryInfo != null)\r\n            {\r\n                summaryInfo.Author = author;\r\n                return;\r\n            }\r\n\r\n            var newDocInfo = NPOI.HPSF.PropertySetFactory.CreateDocumentSummaryInformation();\r\n\r\n            var newInfo = NPOI.HPSF.PropertySetFactory.CreateSummaryInformation();\r\n            newInfo.Author = author;\r\n\r\n            hssfWorkbook.DocumentSummaryInformation = newDocInfo;\r\n            hssfWorkbook.SummaryInformation = newInfo;\r\n               \r\n            return;\r\n        }\r\n    }","title":"How to set Author name to excel file using poi","body":"<p>Not a direct answer but in case anyone needs to do this in NPOI (the .NET port of POI) here is the extension method I came up with ... it's basically what Olivier suggested - only implemented in C#:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>/// &lt;summary&gt;\n/// Sets the author of this workbook.\n/// &lt;/summary&gt;\n/// &lt;param name=\"workbook\"&gt;&lt;/param&gt;\n/// &lt;param name=\"author\"&gt;&lt;/param&gt;\npublic static void SetAuthor(this IWorkbook workbook, string author)\n{\n    if (workbook is NPOI.XSSF.UserModel.XSSFWorkbook)\n    {\n        var xssfWorkbook = workbook as NPOI.XSSF.UserModel.XSSFWorkbook;\n        var xmlProps = xssfWorkbook.GetProperties();\n        var coreProps = xmlProps.CoreProperties;\n        coreProps.Creator = author;\n        return;\n    }\n\n    if (workbook is NPOI.HSSF.UserModel.HSSFWorkbook)\n    {\n        var hssfWorkbook = workbook as NPOI.HSSF.UserModel.HSSFWorkbook;\n        var summaryInfo = hssfWorkbook.SummaryInformation;\n\n        if (summaryInfo != null)\n        {\n            summaryInfo.Author = author;\n            return;\n        }\n\n        var newDocInfo = NPOI.HPSF.PropertySetFactory.CreateDocumentSummaryInformation();\n\n        var newInfo = NPOI.HPSF.PropertySetFactory.CreateSummaryInformation();\n        newInfo.Author = author;\n\n        hssfWorkbook.DocumentSummaryInformation = newDocInfo;\n        hssfWorkbook.SummaryInformation = newInfo;\n\n        return;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4534092,"reputation":41,"user_id":3683773,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695219302,"creation_date":1695219302,"answer_id":77143338,"question_id":11143303,"body_markdown":"I just wanted to provide an updated answer for XSSF, because the API changed in meantime for latest versions of POI.\r\n\r\n    var opcPackage = OPCPackage.open(inputStream);\t\r\n\topcPackage.getPackageProperties().setCreatorProperty(&quot;Author Name&quot;);\r\n\r\n\t// continue as know with XSSFWorkbook\r\n\tworkbook = new XSSFWorkbook(opcPackage);","title":"How to set Author name to excel file using poi","body":"<p>I just wanted to provide an updated answer for XSSF, because the API changed in meantime for latest versions of POI.</p>\n<pre><code>var opcPackage = OPCPackage.open(inputStream);  \nopcPackage.getPackageProperties().setCreatorProperty(&quot;Author Name&quot;);\n\n// continue as know with XSSFWorkbook\nworkbook = new XSSFWorkbook(opcPackage);\n</code></pre>\n"}],"owner":{"account_id":1534619,"reputation":525,"user_id":1430989,"accept_rate":86,"display_name":"user1430989"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17156,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":3,"score":23,"last_activity_date":1695219302,"creation_date":1340298833,"question_id":11143303,"body_markdown":"I&#39;m creating an excel (.xlsx) file using poi (java). After I create the excel file I see the excel file Author as &quot;Apache POI&quot;. Is there any way to change that?\r\n\r\nHere is the code I&#39;m using to create excel file...\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    public class CreateExcelFile {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t/** Name of excel file that we are going to create **/\r\n    \t\tString fileName = &quot;C:\\\\temp\\\\testPOIWrite.xlsx&quot;;\r\n    \t\twriteDataToExcelFile(fileName);\r\n    \t}\r\n    \r\n    \t/** This method writes data to new excel file **/\r\n    \tprivate static void writeDataToExcelFile(String fileName) {\r\n    \r\n    \t\tString[][] excelData = preapreDataToWriteToExcel();\r\n    \r\n    \t\tXSSFWorkbook myWorkBook = new XSSFWorkbook();\r\n    \t\tSheet mySheet = myWorkBook.createSheet();\r\n    \t\tRow myRow = null;\r\n    \t\tCell myCell = null;\r\n    \r\n    \t\tfor (int rowNum = 0; rowNum &lt; excelData[0].length; rowNum++) {\r\n    \t\t\tmyRow = mySheet.createRow(rowNum);\r\n    \r\n    \t\t\tfor (int cellNum = 0; cellNum &lt; 4; cellNum++) {\r\n    \t\t\t\tmyCell = myRow.createCell(cellNum);\r\n    \t\t\t\tmyCell.setCellValue(excelData[rowNum][cellNum]);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tFileOutputStream out = new FileOutputStream(fileName);\r\n    \t\t\tmyWorkBook.write(out);\r\n    \t\t\tout.flush();\r\n    \t\t\tout.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \t/** Prepare some demo data as excel file content **/\r\n    \tpublic static String[][] preapreDataToWriteToExcel() {\r\n    \t\tString[][] excelData = new String[4][4];\r\n    \t\texcelData[0][0] = &quot;First Name&quot;;\r\n    \t\texcelData[0][1] = &quot;Last Name&quot;;\r\n    \t\texcelData[0][2] = &quot;Telephone&quot;;\r\n    \t\texcelData[0][3] = &quot;Address&quot;;\r\n    \r\n    \t\texcelData[1][0] = &quot;Kushal&quot;;\r\n    \t\texcelData[1][1] = &quot;Paudyal&quot;;\r\n    \t\texcelData[1][2] = &quot;000-000-0000&quot;;\r\n    \t\texcelData[1][3] = &quot;IL,USA&quot;;\r\n    \r\n    \t\texcelData[2][0] = &quot;Randy&quot;;\r\n    \t\texcelData[2][1] = &quot;Ram Robinson&quot;;\r\n    \t\texcelData[2][2] = &quot;111-111-1111&quot;;\r\n    \t\texcelData[2][3] = &quot;TX, USA&quot;;\r\n    \r\n    \t\texcelData[3][0] = &quot;Phil&quot;;\r\n    \t\texcelData[3][1] = &quot;Collins&quot;;\r\n    \t\texcelData[3][2] = &quot;222-222-2222&quot;;\r\n    \t\texcelData[3][3] = &quot;NY, USA&quot;;\r\n    \r\n    \t\treturn excelData;\r\n    \r\n    \t}\r\n    }","title":"How to set Author name to excel file using poi","body":"<p>I'm creating an excel (.xlsx) file using poi (java). After I create the excel file I see the excel file Author as \"Apache POI\". Is there any way to change that?</p>\n\n<p>Here is the code I'm using to create excel file...</p>\n\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class CreateExcelFile {\n\n    public static void main(String[] args) {\n        /** Name of excel file that we are going to create **/\n        String fileName = \"C:\\\\temp\\\\testPOIWrite.xlsx\";\n        writeDataToExcelFile(fileName);\n    }\n\n    /** This method writes data to new excel file **/\n    private static void writeDataToExcelFile(String fileName) {\n\n        String[][] excelData = preapreDataToWriteToExcel();\n\n        XSSFWorkbook myWorkBook = new XSSFWorkbook();\n        Sheet mySheet = myWorkBook.createSheet();\n        Row myRow = null;\n        Cell myCell = null;\n\n        for (int rowNum = 0; rowNum &lt; excelData[0].length; rowNum++) {\n            myRow = mySheet.createRow(rowNum);\n\n            for (int cellNum = 0; cellNum &lt; 4; cellNum++) {\n                myCell = myRow.createCell(cellNum);\n                myCell.setCellValue(excelData[rowNum][cellNum]);\n            }\n        }\n\n        try {\n            FileOutputStream out = new FileOutputStream(fileName);\n            myWorkBook.write(out);\n            out.flush();\n            out.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    /** Prepare some demo data as excel file content **/\n    public static String[][] preapreDataToWriteToExcel() {\n        String[][] excelData = new String[4][4];\n        excelData[0][0] = \"First Name\";\n        excelData[0][1] = \"Last Name\";\n        excelData[0][2] = \"Telephone\";\n        excelData[0][3] = \"Address\";\n\n        excelData[1][0] = \"Kushal\";\n        excelData[1][1] = \"Paudyal\";\n        excelData[1][2] = \"000-000-0000\";\n        excelData[1][3] = \"IL,USA\";\n\n        excelData[2][0] = \"Randy\";\n        excelData[2][1] = \"Ram Robinson\";\n        excelData[2][2] = \"111-111-1111\";\n        excelData[2][3] = \"TX, USA\";\n\n        excelData[3][0] = \"Phil\";\n        excelData[3][1] = \"Collins\";\n        excelData[3][2] = \"222-222-2222\";\n        excelData[3][3] = \"NY, USA\";\n\n        return excelData;\n\n    }\n}\n</code></pre>\n"},{"tags":["java","linux","graphics","nvidia","amd-gpu"],"answers":[{"tags":[],"owner":{"account_id":13170665,"reputation":164,"user_id":9513183,"display_name":"Filip F."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1608745947,"creation_date":1608745947,"answer_id":65428744,"question_id":65428632,"body_markdown":"On windows, you can try right click -&gt; Run with graphic processor, and than choose which processor you want to use.","title":"How to make a Java program run with my Nvidia GPU","body":"<p>On windows, you can try right click -&gt; Run with graphic processor, and than choose which processor you want to use.</p>\n"}],"owner":{"account_id":18678697,"reputation":41,"user_id":13615792,"display_name":"aughhhhhhh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695219259,"creation_date":1608745420,"question_id":65428632,"body_markdown":"I just want to run a java program but it is running with my AMD integrated GPU, how can I get this to run with my Nvidia GPU?","title":"How to make a Java program run with my Nvidia GPU","body":"<p>I just want to run a java program but it is running with my AMD integrated GPU, how can I get this to run with my Nvidia GPU?</p>\n"},{"tags":["java","linux","apache-camel","corba"],"answers":[{"tags":[],"owner":{"account_id":8945779,"reputation":145,"user_id":6673308,"display_name":"gshepherd7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695219023,"creation_date":1695219023,"answer_id":77143302,"question_id":77096332,"body_markdown":"Issue was a class loader problem related to two different jars having identical classes and which classes got loaded first based on the path.  Removing the unneeded jar fixed the issue.","title":"Apache Camel corba external connections fail under some Linux paths","body":"<p>Issue was a class loader problem related to two different jars having identical classes and which classes got loaded first based on the path.  Removing the unneeded jar fixed the issue.</p>\n"}],"owner":{"account_id":8945779,"reputation":145,"user_id":6673308,"display_name":"gshepherd7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77143302,"answer_count":1,"score":0,"last_activity_date":1695219023,"creation_date":1694601731,"question_id":77096332,"body_markdown":"I am using Apache Camel to connect to an external Corba name service. The system does have STIGs (Security Technical Implementation Guide) applied, SELinux and firewall policies in place. I can successfully connect to the Corba name service but only under some folders on the Linux machine. For instance, if I deploy my camel application under my home directory or /tmp it connects fine, but when I try under /opt or /usr it fails to connect. Also, if I make a copy of the /opt folder to /opts it connects fine.  I&#39;ve tried adjusting the SELinux labels, as well as disabling SELinux and iptables but the connection still fails under those folders.\r\n\r\nI am using OpenJDK 11 for my application but it is just the default installation without any security measures in place yet.\r\n\r\nAny ideas or things I can look at that may be causing this odd behavior with external corba connections under specific paths?","title":"Apache Camel corba external connections fail under some Linux paths","body":"<p>I am using Apache Camel to connect to an external Corba name service. The system does have STIGs (Security Technical Implementation Guide) applied, SELinux and firewall policies in place. I can successfully connect to the Corba name service but only under some folders on the Linux machine. For instance, if I deploy my camel application under my home directory or /tmp it connects fine, but when I try under /opt or /usr it fails to connect. Also, if I make a copy of the /opt folder to /opts it connects fine.  I've tried adjusting the SELinux labels, as well as disabling SELinux and iptables but the connection still fails under those folders.</p>\n<p>I am using OpenJDK 11 for my application but it is just the default installation without any security measures in place yet.</p>\n<p>Any ideas or things I can look at that may be causing this odd behavior with external corba connections under specific paths?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695218180,"post_id":77143137,"comment_id":135995121,"body_markdown":"Please use [code format](https://stackoverflow.com/editing-help#code) for code, errors and logs.","body":"Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for code, errors and logs."},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1695218224,"post_id":77143137,"comment_id":135995130,"body_markdown":"@aled, I don&#39;t think there is an error or any log to mention. OP has asked a real simple question","body":"@aled, I don&#39;t think there is an error or any log to mention. OP has asked a real simple question"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695218273,"post_id":77143137,"comment_id":135995145,"body_markdown":"There is code, small as it may be. Formatting makes it easier to read the question.","body":"There is code, small as it may be. Formatting makes it easier to read the question."},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1695218300,"post_id":77143137,"comment_id":135995155,"body_markdown":"Yes @aled, I totally agree with the formatting part :)","body":"Yes @aled, I totally agree with the formatting part :)"},{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1695218336,"post_id":77143137,"comment_id":135995164,"body_markdown":"If you want to distinguish between `null` and `0`, you could just use `java.lang.Integer`","body":"If you want to distinguish between <code>null</code> and <code>0</code>, you could just use <code>java.lang.Integer</code>"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1695218342,"post_id":77143137,"comment_id":135995165,"body_markdown":"Please format your code in your questions, regardless how small. This&#39;ll make it way better readable. This time I fix the formatting for you.","body":"Please format your code in your questions, regardless how small. This&#39;ll make it way better readable. This time I fix the formatting for you."}],"answers":[{"tags":[],"owner":{"account_id":22633544,"reputation":588,"user_id":16810646,"display_name":"Ananta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695218201,"creation_date":1695218201,"answer_id":77143177,"question_id":77143137,"body_markdown":"You just have to change field age to type Integer. If no paramater passed, it will be null.","title":"Java pojo setter return type is int but getter return type is string","body":"<p>You just have to change field age to type Integer. If no paramater passed, it will be null.</p>\n"},{"tags":[],"owner":{"account_id":29009333,"reputation":19,"user_id":22221152,"display_name":"Kiese"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695218960,"creation_date":1695218960,"answer_id":77143288,"question_id":77143137,"body_markdown":"Try making a default constructor   \r\n\r\n    EmployeeRequest(String name){\r\n    this.name = name;\r\n    this.age = 0;\r\n    }\r\n\r\n","title":"Java pojo setter return type is int but getter return type is string","body":"<p>Try making a default constructor</p>\n<pre><code>EmployeeRequest(String name){\nthis.name = name;\nthis.age = 0;\n}\n</code></pre>\n"}],"owner":{"account_id":21238440,"reputation":7,"user_id":15622306,"display_name":"Intekhab Alam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695218960,"creation_date":1695217845,"question_id":77143137,"body_markdown":"I am creating an API, \r\n\r\nMy controller is \r\n\r\n```java\r\npublic EmployeeResponse(@RequestBody EmployeeRequest reqPacket) { }\r\n```\r\n\r\nMy pojo class is\r\n\r\n```\r\nEmployeeRequest {\r\n    int age;\r\n    String name;\r\n}\r\n```\r\n\r\nSo basically my `getAge()` and and `setAge()` methods shall be dealing with int type only\r\n\r\nNow, if my request packet is \r\n\r\n```json\r\n{\r\n    &quot;name&quot;: &quot;smith&quot;\r\n}\r\n```\r\n\r\nMeans age parameter is not there in request packet\r\n\r\nSo in my controller it shall be by default set by zero (because type is int)\r\n\r\nBut I want to know if i got age field in request packet or not.\r\n\r\nWhat is best solution for this?\r\n\r\nI can&#39;t even use `@NotNull` annotation.. because default value is zero for int type.. so it won&#39;t work..\r\n\r\nCan I make getter type as string and setter type again as int?\r\n\r\n","title":"Java pojo setter return type is int but getter return type is string","body":"<p>I am creating an API,</p>\n<p>My controller is</p>\n<pre class=\"lang-java prettyprint-override\"><code>public EmployeeResponse(@RequestBody EmployeeRequest reqPacket) { }\n</code></pre>\n<p>My pojo class is</p>\n<pre><code>EmployeeRequest {\n    int age;\n    String name;\n}\n</code></pre>\n<p>So basically my <code>getAge()</code> and and <code>setAge()</code> methods shall be dealing with int type only</p>\n<p>Now, if my request packet is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;name&quot;: &quot;smith&quot;\n}\n</code></pre>\n<p>Means age parameter is not there in request packet</p>\n<p>So in my controller it shall be by default set by zero (because type is int)</p>\n<p>But I want to know if i got age field in request packet or not.</p>\n<p>What is best solution for this?</p>\n<p>I can't even use <code>@NotNull</code> annotation.. because default value is zero for int type.. so it won't work..</p>\n<p>Can I make getter type as string and setter type again as int?</p>\n"},{"tags":["java","http","asynchronous"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691497268,"post_id":76859507,"comment_id":135497056,"body_markdown":"Because there&#39;s nothing that waits for that async call to complete","body":"Because there&#39;s nothing that waits for that async call to complete"}],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691498371,"creation_date":1691498043,"answer_id":76859621,"question_id":76859507,"body_markdown":"The call is asynchronous. This means that it is executing independently of its calling thread.  You don&#39;t know that it is &#39;done&#39; unless and until you get a notification that it is done.\r\n\r\nGetting the notification is precisely why the &#39;sendAsync&#39; call returns a Future.  Wait on the Future in your callRequest method (via &#39;get&#39;, for example), don&#39;t just ignore it. \r\n\r\nI read that you don&#39;t need the response, but the API you&#39;ve chosen to use gives no way to know that the request has even left the local system, much less arrived in the remote server. Without some sort of response you cannot know if and when the server has seen the request; that is unknowable. (At the TCP level, an ack just means it&#39;s got as far as the remote TCP stack). Thus awaiting a response is the only way this can be made reliable.\r\n\r\n[Doc for CompleteableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html)\r\n\r\n\r\n ","title":"Using httpClient.sendAsync(...) do not send request if thread terminate too early","body":"<p>The call is asynchronous. This means that it is executing independently of its calling thread.  You don't know that it is 'done' unless and until you get a notification that it is done.</p>\n<p>Getting the notification is precisely why the 'sendAsync' call returns a Future.  Wait on the Future in your callRequest method (via 'get', for example), don't just ignore it.</p>\n<p>I read that you don't need the response, but the API you've chosen to use gives no way to know that the request has even left the local system, much less arrived in the remote server. Without some sort of response you cannot know if and when the server has seen the request; that is unknowable. (At the TCP level, an ack just means it's got as far as the remote TCP stack). Thus awaiting a response is the only way this can be made reliable.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">Doc for CompleteableFuture</a></p>\n"}],"owner":{"account_id":21675058,"reputation":19,"user_id":15992163,"display_name":"Morgan Wolf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695218214,"creation_date":1691497187,"question_id":76859507,"body_markdown":"I&#39;m using java.net.http.HttpClient to send some request and ignore the response but when I tried to test I noticed that the request are not sent if I don&#39;t wait a little.\r\n\r\nI have a very simple method:\r\n\r\n    public CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; getAsyncHttp(final String url) {\r\n        HttpClient httpClient = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n                .uri(URI.create(url))\r\n                .build();\r\n        System.out.println(&quot;Send request : &quot; + url);\r\n        return httpClient.sendAsync(request, HttpResponse.BodyHandlers.ofString());\r\n    }\r\n\r\nthat I call like so:\r\n\r\n    private static void callRequest(){\r\n        HttpAsyncRequest httpAsyncRequest = new HttpAsyncRequest();\r\n        String URL = &quot;http://localhost:3000/test&quot;;\r\n        httpAsyncRequest.getAsyncHttp(URL);\r\n        System.out.println(&quot;Request done.&quot;);\r\n        // we exit here basically\r\n    }\r\n\r\nI&#39;m just trying to send the http request and ignore the response on purpose but the request is not sent.\r\n\r\nHowever, If change my callRequest() method and add a thread sleep\r\n\r\n    private static void callRequest() throws InterruptedException {\r\n        HttpAsyncRequest httpAsyncRequest = new HttpAsyncRequest();\r\n        String URL = &quot;http://localhost:3000/test&quot;;\r\n        httpAsyncRequest.getAsyncHttp(URL);\r\n        Thread.sleep(100); // line added\r\n        System.out.println(&quot;Request done.&quot;);\r\n        // we exit here basically\r\n    }\r\n\r\nNow the request is sent but it is very weird to need to add a thread sleep when I am not waiting for the server since I&#39;m simply sending the request.\r\n\r\nCan people reproduce this issue or care to explain why it happens ?\r\n\r\nThank you.","title":"Using httpClient.sendAsync(...) do not send request if thread terminate too early","body":"<p>I'm using java.net.http.HttpClient to send some request and ignore the response but when I tried to test I noticed that the request are not sent if I don't wait a little.</p>\n<p>I have a very simple method:</p>\n<pre><code>public CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; getAsyncHttp(final String url) {\n    HttpClient httpClient = HttpClient.newHttpClient();\n    HttpRequest request = HttpRequest.newBuilder()\n            .uri(URI.create(url))\n            .build();\n    System.out.println(&quot;Send request : &quot; + url);\n    return httpClient.sendAsync(request, HttpResponse.BodyHandlers.ofString());\n}\n</code></pre>\n<p>that I call like so:</p>\n<pre><code>private static void callRequest(){\n    HttpAsyncRequest httpAsyncRequest = new HttpAsyncRequest();\n    String URL = &quot;http://localhost:3000/test&quot;;\n    httpAsyncRequest.getAsyncHttp(URL);\n    System.out.println(&quot;Request done.&quot;);\n    // we exit here basically\n}\n</code></pre>\n<p>I'm just trying to send the http request and ignore the response on purpose but the request is not sent.</p>\n<p>However, If change my callRequest() method and add a thread sleep</p>\n<pre><code>private static void callRequest() throws InterruptedException {\n    HttpAsyncRequest httpAsyncRequest = new HttpAsyncRequest();\n    String URL = &quot;http://localhost:3000/test&quot;;\n    httpAsyncRequest.getAsyncHttp(URL);\n    Thread.sleep(100); // line added\n    System.out.println(&quot;Request done.&quot;);\n    // we exit here basically\n}\n</code></pre>\n<p>Now the request is sent but it is very weird to need to add a thread sleep when I am not waiting for the server since I'm simply sending the request.</p>\n<p>Can people reproduce this issue or care to explain why it happens ?</p>\n<p>Thank you.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"owner":{"account_id":21939854,"reputation":27,"user_id":16220550,"display_name":"Kuroosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695217579,"creation_date":1695217579,"question_id":77143092,"body_markdown":"I have a strange problem with Google&#39;s new **Chrome for Testing** application. Suddenly all my mobile test failing, because at one point the view switches back from mobile to normal. Window size stayes untouched (390x844).\r\n\r\nIt happens after a button is pressed, whose href tag looks something like this: `href=&quot;/page/example/&quot;`, so it doesn&#39;t contains `&quot;/mobile&quot;`, some other buttons contain it. However, this cannot be the fault, because I tried it manually and it did not switch back like that, only when Selenium clicks it.\r\n\r\nHas anyone encountered a similar problem or have any ideas why this might be?","title":"Chrome for Testing: Website&#39;s mobile view testing switches back to basic","body":"<p>I have a strange problem with Google's new <strong>Chrome for Testing</strong> application. Suddenly all my mobile test failing, because at one point the view switches back from mobile to normal. Window size stayes untouched (390x844).</p>\n<p>It happens after a button is pressed, whose href tag looks something like this: <code>href=&quot;/page/example/&quot;</code>, so it doesn't contains <code>&quot;/mobile&quot;</code>, some other buttons contain it. However, this cannot be the fault, because I tried it manually and it did not switch back like that, only when Selenium clicks it.</p>\n<p>Has anyone encountered a similar problem or have any ideas why this might be?</p>\n"},{"tags":["java","css","spring-boot","intellij-idea","vaadin24"],"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695217197,"creation_date":1695026450,"question_id":77125651,"body_markdown":"i am migrating my spring boot application (might be unrelated, just happened to pop up now) to spring boot 3 (and vaadin 24) and next to other differences i encountered a strange behaviour that never happened to me before:\r\n\r\nwhen i run my application from IDE (normal spring boot application config with some custom environment variables) and call the website, a lot (but not all) static resources are not found (css, images).\r\nHere&#39;s some infos and things i found out:\r\n\r\n - all my static files are in /src/main/resource/static/**\r\n - when i check my /target folder, i can see ALL static files exist in /target/classes/static/**\r\n - However, for example /static/css/styleA.css will be loaded, while /static/css/styleB.css throws a 404 (**remember, BOTH exist in /target and are even in the exact same sub-folder**)\r\n - this also happens, when i call the URL directly (instead of calling a website/view that imports the stylesheet or images)\r\n - when i build the package with maven (mvn clean package spring-boot:repackage -Pproduction), and run the resulting war in console, all css and images can be loaded\r\n - i already cleared the intellij cache with no success\r\n - all my requests i did with developer options/network tab open and cache disabled\r\n - my security config is attached at the end (special filter to allow a third parameter - client - for login)\r\n - when i run\r\n&gt; getClass().getResource(&quot;/static/css/styleA.css&quot;); &lt;br&gt;\r\n&gt; getClass().getResource(&quot;/static/css/styleB.css&quot;);\r\n\r\nboth paths point to the /target/classes/** folder. \r\n\r\ni hope anyone can give me a hint or has an idea where this problem could come from. if you need more info just write into the comment, i try to deliver them as precisely as possible.\r\n\r\n            http.csrf(AbstractHttpConfigurer::disable)\r\n                .requestCache(c -&gt; c.requestCache(new CustomRequestCache()))\r\n                .addFilterBefore(filter, UsernamePasswordAuthenticationFilter.class)\r\n                .authorizeHttpRequests(a -&gt;\r\n                        a.requestMatchers(SecurityUtils::isFrameworkInternalRequest,\r\n                                        antMatcher(&quot;/&quot;),\r\n                                        antMatcher(&quot;/login&quot;),\r\n                                        antMatcher(&quot;/icons/**&quot;),\r\n                                        antMatcher(&quot;/sw.js&quot;),\r\n                                        antMatcher(&quot;/manifest.webmanifest&quot;),\r\n                                        antMatcher(&quot;/static/**&quot;),\r\n                                        antMatcher(&quot;/healthy/**&quot;),\r\n                                        antMatcher(&quot;/VAADIN/**&quot;),\r\n                                        antMatcher(&quot;/frontend/**&quot;),\r\n                                        antMatcher(&quot;/frontend-es5/**&quot;),\r\n                                        antMatcher(&quot;/frontend-es6/**&quot;)).permitAll()\r\n                                .anyRequest().authenticated()\r\n                )\r\n                .formLogin(l -&gt; l.loginPage(&quot;/login&quot;).permitAll())\r\n                .headers(h -&gt; h.frameOptions(FrameOptionsConfig::sameOrigin))\r\n                .sessionManagement(m -&gt; m.sessionCreationPolicy(SessionCreationPolicy.ALWAYS))\r\n                .securityContext(c -&gt; c.securityContextRepository(securityContextRepository()));\r\n\r\n        return http.build();","title":"SOME css and images not loaded in spring boot run (IntelliJ)","body":"<p>i am migrating my spring boot application (might be unrelated, just happened to pop up now) to spring boot 3 (and vaadin 24) and next to other differences i encountered a strange behaviour that never happened to me before:</p>\n<p>when i run my application from IDE (normal spring boot application config with some custom environment variables) and call the website, a lot (but not all) static resources are not found (css, images).\nHere's some infos and things i found out:</p>\n<ul>\n<li>all my static files are in /src/main/resource/static/**</li>\n<li>when i check my /target folder, i can see ALL static files exist in /target/classes/static/**</li>\n<li>However, for example /static/css/styleA.css will be loaded, while /static/css/styleB.css throws a 404 (<strong>remember, BOTH exist in /target and are even in the exact same sub-folder</strong>)</li>\n<li>this also happens, when i call the URL directly (instead of calling a website/view that imports the stylesheet or images)</li>\n<li>when i build the package with maven (mvn clean package spring-boot:repackage -Pproduction), and run the resulting war in console, all css and images can be loaded</li>\n<li>i already cleared the intellij cache with no success</li>\n<li>all my requests i did with developer options/network tab open and cache disabled</li>\n<li>my security config is attached at the end (special filter to allow a third parameter - client - for login)</li>\n<li>when i run</li>\n</ul>\n<blockquote>\n<p>getClass().getResource(&quot;/static/css/styleA.css&quot;); <br>\ngetClass().getResource(&quot;/static/css/styleB.css&quot;);</p>\n</blockquote>\n<p>both paths point to the /target/classes/** folder.</p>\n<p>i hope anyone can give me a hint or has an idea where this problem could come from. if you need more info just write into the comment, i try to deliver them as precisely as possible.</p>\n<pre><code>        http.csrf(AbstractHttpConfigurer::disable)\n            .requestCache(c -&gt; c.requestCache(new CustomRequestCache()))\n            .addFilterBefore(filter, UsernamePasswordAuthenticationFilter.class)\n            .authorizeHttpRequests(a -&gt;\n                    a.requestMatchers(SecurityUtils::isFrameworkInternalRequest,\n                                    antMatcher(&quot;/&quot;),\n                                    antMatcher(&quot;/login&quot;),\n                                    antMatcher(&quot;/icons/**&quot;),\n                                    antMatcher(&quot;/sw.js&quot;),\n                                    antMatcher(&quot;/manifest.webmanifest&quot;),\n                                    antMatcher(&quot;/static/**&quot;),\n                                    antMatcher(&quot;/healthy/**&quot;),\n                                    antMatcher(&quot;/VAADIN/**&quot;),\n                                    antMatcher(&quot;/frontend/**&quot;),\n                                    antMatcher(&quot;/frontend-es5/**&quot;),\n                                    antMatcher(&quot;/frontend-es6/**&quot;)).permitAll()\n                            .anyRequest().authenticated()\n            )\n            .formLogin(l -&gt; l.loginPage(&quot;/login&quot;).permitAll())\n            .headers(h -&gt; h.frameOptions(FrameOptionsConfig::sameOrigin))\n            .sessionManagement(m -&gt; m.sessionCreationPolicy(SessionCreationPolicy.ALWAYS))\n            .securityContext(c -&gt; c.securityContextRepository(securityContextRepository()));\n\n    return http.build();\n</code></pre>\n"},{"tags":["java","scheduled-tasks","quarkus","stopwatch"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695217182,"creation_date":1695217182,"answer_id":77143034,"question_id":77142565,"body_markdown":"Since you know the lifetime of the token, you can schedule a one time task to refresh it at the right time. I&#39;ll use java&#39;s scheduler to demonstrate the logic, it should be fairly easy to translate to the framework you are using.\r\n```\r\n//get the token\r\nlong maxLifetimeBearerToken = //get validity from token\r\nScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();\r\nRunnable refreshTokenAction = () -&gt; {\r\n  //refresh the token\r\n  //register next task\r\n};\r\nservice.schedule(refreshTokenAction, maxLifetimeBearerToken, TimeUnit.MILLISECONDS);//or other timeunit, depending on what is maxLifetimeBearerToken\r\n```\r\nThis uses [ScheduledExecutorService.submit()][1] to register a task for single execution:\r\n\r\n&gt; Submits a one-shot task that becomes enabled after the given delay.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html#schedule(java.lang.Runnable,long,java.util.concurrent.TimeUnit)","title":"Java permanently running Task to check time","body":"<p>Since you know the lifetime of the token, you can schedule a one time task to refresh it at the right time. I'll use java's scheduler to demonstrate the logic, it should be fairly easy to translate to the framework you are using.</p>\n<pre><code>//get the token\nlong maxLifetimeBearerToken = //get validity from token\nScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();\nRunnable refreshTokenAction = () -&gt; {\n  //refresh the token\n  //register next task\n};\nservice.schedule(refreshTokenAction, maxLifetimeBearerToken, TimeUnit.MILLISECONDS);//or other timeunit, depending on what is maxLifetimeBearerToken\n</code></pre>\n<p>This uses <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html#schedule(java.lang.Runnable,long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">ScheduledExecutorService.submit()</a> to register a task for single execution:</p>\n<blockquote>\n<p>Submits a one-shot task that becomes enabled after the given delay.</p>\n</blockquote>\n"}],"owner":{"account_id":29491235,"reputation":13,"user_id":22600216,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77143034,"answer_count":1,"score":1,"last_activity_date":1695217182,"creation_date":1695213789,"question_id":77142565,"body_markdown":"I have written a task that runs as Scheduled (every Second). I need this scheduled method to monitor the lifetime of a bearer token.\r\n\r\nI&#39;m new to Java and wondering if there isn&#39;t a better, more elegant solution. I didn&#39;t find anything suitable using the search. Maybe I also used the wrong terms.\r\n\r\nI used: StopWatch (org.apache.commons commons-lang3 Version 3.13.0)\r\nTo build and test, I use Maven and Quarkus. (io.quarkus.scheduler.Scheduled)\r\n\r\nMy Scheduled Method:\r\n\r\n```\r\n@Scheduled(every = &quot;1s&quot;)\r\n    public void checkStopuhr() {\r\n        if (stopwatch.isStarted() &amp;&amp; (stopwatch.getTime() / 1000) &gt;= maxLifetimeBearerToken) {\r\n            try {\r\n                //System.out.println(&quot;Stopuhr vor reset: &quot; + stopwatch.getTime());\r\n                refreshBearer(clientAppId);\r\n            } catch (IOException e) {\r\n                logger.atError().log(&quot;Error Methode: ServiceTokenImpl.checkStopuhr(), Fehler beim Erstellen eines neuen Bearer-Tokens.&quot;);\r\n            }\r\n        } else if(stopwatch.isStarted() &amp;&amp; (stopwatch.getTime()/1000) &gt; (maxLifetimeBearerToken + 1)){\r\n            logger.atWarn().log(&quot;Die Stopuhr funktioniert nicht richtig. Sie wurde ausgel&#246;st bei {} Sekunden&quot;,stopwatch.getTime()/1000);\r\n\r\n        } else {\r\n            if(stopwatch.isStarted()){\r\n                System.out.println(&quot;verstrichene Zeit = &quot; +stopwatch.getTime()/1000);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nMaybe one of you has a good idea that is understandable for me as a beginner?","title":"Java permanently running Task to check time","body":"<p>I have written a task that runs as Scheduled (every Second). I need this scheduled method to monitor the lifetime of a bearer token.</p>\n<p>I'm new to Java and wondering if there isn't a better, more elegant solution. I didn't find anything suitable using the search. Maybe I also used the wrong terms.</p>\n<p>I used: StopWatch (org.apache.commons commons-lang3 Version 3.13.0)\nTo build and test, I use Maven and Quarkus. (io.quarkus.scheduler.Scheduled)</p>\n<p>My Scheduled Method:</p>\n<pre><code>@Scheduled(every = &quot;1s&quot;)\n    public void checkStopuhr() {\n        if (stopwatch.isStarted() &amp;&amp; (stopwatch.getTime() / 1000) &gt;= maxLifetimeBearerToken) {\n            try {\n                //System.out.println(&quot;Stopuhr vor reset: &quot; + stopwatch.getTime());\n                refreshBearer(clientAppId);\n            } catch (IOException e) {\n                logger.atError().log(&quot;Error Methode: ServiceTokenImpl.checkStopuhr(), Fehler beim Erstellen eines neuen Bearer-Tokens.&quot;);\n            }\n        } else if(stopwatch.isStarted() &amp;&amp; (stopwatch.getTime()/1000) &gt; (maxLifetimeBearerToken + 1)){\n            logger.atWarn().log(&quot;Die Stopuhr funktioniert nicht richtig. Sie wurde ausgelöst bei {} Sekunden&quot;,stopwatch.getTime()/1000);\n\n        } else {\n            if(stopwatch.isStarted()){\n                System.out.println(&quot;verstrichene Zeit = &quot; +stopwatch.getTime()/1000);\n            }\n        }\n    }\n</code></pre>\n<p>Maybe one of you has a good idea that is understandable for me as a beginner?</p>\n"},{"tags":["java","amazon-web-services","jce","openjdk-11"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1569923759,"post_id":58182231,"comment_id":102744473,"body_markdown":"The stacktrace contains the full details of the exception. Use `e.printStackTrace()` so you don&#39;t lose the actual information you&#39;re interested in.","body":"The stacktrace contains the full details of the exception. Use <code>e.printStackTrace()</code> so you don&#39;t lose the actual information you&#39;re interested in."},{"owner":{"account_id":146274,"reputation":3851,"user_id":356629,"accept_rate":100,"display_name":"kenny_k"},"score":0,"creation_date":1569923863,"post_id":58182231,"comment_id":102744523,"body_markdown":"As @Kayaman said, please edit your question to include the full stracktrace, not just the first 2 lines.","body":"As @Kayaman said, please edit your question to include the full stracktrace, not just the first 2 lines."},{"owner":{"account_id":9966483,"reputation":157,"user_id":7374044,"display_name":"user7374044"},"score":0,"creation_date":1569925788,"post_id":58182231,"comment_id":102745523,"body_markdown":"@kenny_k changed - please now check","body":"@kenny_k changed - please now check"}],"answers":[{"tags":[],"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1569928033,"creation_date":1569927665,"answer_id":58183460,"question_id":58182231,"body_markdown":"The clue is in last cause in your stack trace:&lt;br/&gt;\r\n`Caused by: java.lang.SecurityException: Can&#39;t read cryptographic policy directory: unlimited`\r\n\r\n&lt;h2&gt;down the rabit hole:&lt;/h2&gt;\r\n - Verify where your security policies are coming from by inspecting  `java.security.properties` from within running JVM:\r\n\r\n        System.getProperty(&quot;java.security.properties&quot;);\r\n\r\n It should be present and pointing at a file. Inspect that file and make sure it has the following property `crypto.policy=unlimited` and the folder called **unlimited** is available from where the policy file is. The policy file itself should explain where to look for this folder.\r\n\r\n For Coretto it is `&lt;jre_home&gt;/conf/security/policy/`\r\n&lt;br/&gt;\r\n\r\n - You can modify the location of the security policy by starting your JVM and passing it the location of the policy file:&lt;br/&gt; `java -Djava.security.properties==/conf/security/java.security`\r\n&lt;br/&gt;OR&lt;br/&gt;`java -Djava.security.properties=/conf/security/java.security`\r\n\r\n Additional `=`sign in the first case **will cause Java to use only properties in the file you pointing at**. &lt;br/&gt;The second option **will add / update the properties defined in the file**.\r\n&lt;br/&gt;\r\n - Lastly you have to dig around your **Correto 11** to find the policy file.&lt;br/&gt;\r\nThe paths above are taken from [amazon-corretto-11.0.3.7.1-linux-x64.tar.gz][1]\r\n\r\n\r\n  [1]: https://d3pxv6yz143wms.cloudfront.net/11.0.3.7.1/amazon-corretto-11.0.3.7.1-linux-x64.tar.gz","title":"OpenJDK 11 error &quot;Can not initialize cryptographic mechanism&quot;","body":"<p>The clue is in last cause in your stack trace:<br/>\n<code>Caused by: java.lang.SecurityException: Can't read cryptographic policy directory: unlimited</code></p>\n\n<h2>down the rabit hole:</h2>\n\n<ul>\n<li><p>Verify where your security policies are coming from by inspecting  <code>java.security.properties</code> from within running JVM:</p>\n\n<pre><code>System.getProperty(\"java.security.properties\");\n</code></pre>\n\n<p>It should be present and pointing at a file. Inspect that file and make sure it has the following property <code>crypto.policy=unlimited</code> and the folder called <strong>unlimited</strong> is available from where the policy file is. The policy file itself should explain where to look for this folder.</p>\n\n<p>For Coretto it is <code>&lt;jre_home&gt;/conf/security/policy/</code>\n<br/></p></li>\n<li><p>You can modify the location of the security policy by starting your JVM and passing it the location of the policy file:<br/> <code>java -Djava.security.properties==/conf/security/java.security</code>\n<br/>OR<br/><code>java -Djava.security.properties=/conf/security/java.security</code></p>\n\n<p>Additional <code>=</code>sign in the first case <strong>will cause Java to use only properties in the file you pointing at</strong>. <br/>The second option <strong>will add / update the properties defined in the file</strong>.\n<br/></p></li>\n<li>Lastly you have to dig around your <strong>Correto 11</strong> to find the policy file.<br/>\nThe paths above are taken from <a href=\"https://d3pxv6yz143wms.cloudfront.net/11.0.3.7.1/amazon-corretto-11.0.3.7.1-linux-x64.tar.gz\" rel=\"noreferrer\">amazon-corretto-11.0.3.7.1-linux-x64.tar.gz</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1816815,"reputation":178,"user_id":1651744,"display_name":"siddmuk2005"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695216977,"creation_date":1695216977,"answer_id":77143005,"question_id":58182231,"body_markdown":"Check the conf folder exist or not? if conf folder is not there then this issue comes most of the time. as conf folder contain security related policy.","title":"OpenJDK 11 error &quot;Can not initialize cryptographic mechanism&quot;","body":"<p>Check the conf folder exist or not? if conf folder is not there then this issue comes most of the time. as conf folder contain security related policy.</p>\n"}],"owner":{"account_id":9966483,"reputation":157,"user_id":7374044,"display_name":"user7374044"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13530,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1695216977,"creation_date":1569923414,"question_id":58182231,"body_markdown":"I have an app written with openJDK (Amazon Correto 11) and openJFX.\r\n\r\nWhen I run the app locally - everything works. \r\nBut when I execute the app from network share there is an Exception: \r\n```\r\njava.lang.ExceptionInInitializerError\r\n\tat java.base/javax.crypto.JceSecurityManager.&lt;clinit&gt;(JceSecurityManager.java:65)\r\n\tat java.base/javax.crypto.Cipher.getConfiguredPermission(Cipher.java:2624)\r\n\tat java.base/javax.crypto.Cipher.getMaxAllowedKeyLength(Cipher.java:2646)\r\n\tat java.base/sun.security.ssl.SSLCipher.isUnlimited(SSLCipher.java:540)\r\n\tat java.base/sun.security.ssl.SSLCipher.&lt;init&gt;(SSLCipher.java:472)\r\n\tat java.base/sun.security.ssl.SSLCipher.&lt;clinit&gt;(SSLCipher.java:174)\r\n\tat java.base/sun.security.ssl.CipherSuite.&lt;clinit&gt;(CipherSuite.java:67)\r\n\tat java.base/sun.security.ssl.SSLContextImpl.getApplicableSupportedCipherSuites(SSLContextImpl.java:348)\r\n\tat java.base/sun.security.ssl.SSLContextImpl$AbstractTLSContext.&lt;clinit&gt;(SSLContextImpl.java:579)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:315)\r\n\tat java.base/java.security.Provider$Service.getImplClass(Provider.java:1848)\r\n\tat java.base/java.security.Provider$Service.newInstance(Provider.java:1824)\r\n\tat java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:236)\r\n\tat java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:164)\r\n\tat java.base/javax.net.ssl.SSLContext.getInstance(SSLContext.java:168)\r\n\tat org.apache.http.ssl.SSLContexts.createDefault(SSLContexts.java:51)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.getSocketFactory(SSLConnectionSocketFactory.java:194)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.getDefaultRegistry(PoolingHttpClientConnectionManager.java:115)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:122)\r\n\tat com.mashape.unirest.http.options.Options.refresh(Options.java:72)\r\n\tat com.mashape.unirest.http.options.Options.&lt;clinit&gt;(Options.java:46)\r\n\tat com.mashape.unirest.http.HttpClientHelper.prepareRequest(HttpClientHelper.java:151)\r\n\tat com.mashape.unirest.http.HttpClientHelper.request(HttpClientHelper.java:131)\r\n\tat com.mashape.unirest.request.BaseRequest.asString(BaseRequest.java:56)\r\n\tat myapp.util.MyTaxNumberValidator$3.run(MyTaxNumberValidator.java:185)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\r\n\tat java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:120)\r\n\t... 27 more\r\nCaused by: java.lang.SecurityException: Can&#39;t read cryptographic policy directory: unlimited\r\n\tat java.base/javax.crypto.JceSecurity.setupJurisdictionPolicies(JceSecurity.java:326)\r\n\tat java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:111)\r\n\tat java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:108)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:107)\r\n\t... 27 more\r\n```\r\n\r\nI run an app using command:\r\n\r\n`\\\\\\some-network-share\\app\\jre\\bin\\javaw.exe -jar myapp.jar`\r\n\r\nbecause on this network share I&#39;ve copied Amazon Correto 11 JDK files and other libs I use for the app.\r\n\r\n\r\nI run get request in another thread and this thread throws an exception.\r\n\r\nHow can I overcome the problem? \r\n\r\nPlease help.\r\n\r\n\r\nI&#39;ve tried different libs: \r\n1. OkHttpClient\r\n2. Java Unirest\r\n\r\nbut in both the same error. \r\n\r\n```java\r\n\r\npublic class MyGetExecutor {\r\n\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Thread getThread = new Thread( new Runnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\r\n\t\t\t\ttry {\r\n                    logMessage.add( &quot;Before request&quot; );\r\n                    com.mashape.unirest.http.HttpResponse&lt;String&gt; response = Unirest.get(&quot;https://myappserver.domain.com/api/v1/users/1&quot;)\r\n                    .header(&quot;User-Agent&quot;, &quot;PostmanRuntime/7.17.1&quot;)\r\n                    .header(&quot;Accept&quot;, &quot;*/*&quot;)\r\n                    .header(&quot;Cache-Control&quot;, &quot;no-cache&quot;)\r\n                    .header(&quot;Postman-Token&quot;, &quot;abf4b45d-a2c5-4f53-b4e3-1fa29643d616,e59130fc-5ce0-4b70-af48-ab3808362e36&quot;)\r\n                    .header(&quot;Host&quot;, &quot;wf01.cdprojektred.com&quot;)\r\n                    .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate&quot;)\r\n                    .header(&quot;Cookie&quot;, &quot;JSESSIONID=2C71F035C2EDFF145FED5C03C4887EF1&quot;)\r\n                    .header(&quot;Connection&quot;, &quot;keep-alive&quot;)\r\n                    .header(&quot;cache-control&quot;, &quot;no-cache&quot;)\r\n                    .asString();\r\n                    logMessage.add( &quot;After request&quot; );\r\n                } catch (Exception e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\tlogMessage.add( &quot;Exception in getThread: &quot; + e.getMessage() );\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}, &quot;Get-thread&quot;);\r\n\t\tgetThread.setUncaughtExceptionHandler(\r\n\t\t\t    new Thread.UncaughtExceptionHandler() {\r\n\t\t\t        @Override\r\n\t\t\t        public void uncaughtException(Thread t, Throwable e) {\r\n\t\t\t            logMessage.add( &quot;Error in thread: &quot; + e );\r\n\t\t\t            logMessage.add( &quot;Details: &quot; + e.getCause().getMessage() );\r\n\t\t\t        }\r\n\t\t\t    }\r\n\t\t\t);\r\n\t\tgetThread.start();\r\n\t\t\r\n\t\twhile( getThread.isAlive() ) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tlogMessage.add(&quot;Main thread sleeping...&quot;);\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tlogMessage.add(&quot;Exception in main thread...: &quot; + e.getMessage());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\r\n    }\r\n}\r\n```\r\n\r\n**EDIT 1** I&#39;ve added additional stacktrace - please check","title":"OpenJDK 11 error &quot;Can not initialize cryptographic mechanism&quot;","body":"<p>I have an app written with openJDK (Amazon Correto 11) and openJFX.</p>\n\n<p>When I run the app locally - everything works. \nBut when I execute the app from network share there is an Exception: </p>\n\n<pre><code>java.lang.ExceptionInInitializerError\n    at java.base/javax.crypto.JceSecurityManager.&lt;clinit&gt;(JceSecurityManager.java:65)\n    at java.base/javax.crypto.Cipher.getConfiguredPermission(Cipher.java:2624)\n    at java.base/javax.crypto.Cipher.getMaxAllowedKeyLength(Cipher.java:2646)\n    at java.base/sun.security.ssl.SSLCipher.isUnlimited(SSLCipher.java:540)\n    at java.base/sun.security.ssl.SSLCipher.&lt;init&gt;(SSLCipher.java:472)\n    at java.base/sun.security.ssl.SSLCipher.&lt;clinit&gt;(SSLCipher.java:174)\n    at java.base/sun.security.ssl.CipherSuite.&lt;clinit&gt;(CipherSuite.java:67)\n    at java.base/sun.security.ssl.SSLContextImpl.getApplicableSupportedCipherSuites(SSLContextImpl.java:348)\n    at java.base/sun.security.ssl.SSLContextImpl$AbstractTLSContext.&lt;clinit&gt;(SSLContextImpl.java:579)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:315)\n    at java.base/java.security.Provider$Service.getImplClass(Provider.java:1848)\n    at java.base/java.security.Provider$Service.newInstance(Provider.java:1824)\n    at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:236)\n    at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:164)\n    at java.base/javax.net.ssl.SSLContext.getInstance(SSLContext.java:168)\n    at org.apache.http.ssl.SSLContexts.createDefault(SSLContexts.java:51)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.getSocketFactory(SSLConnectionSocketFactory.java:194)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.getDefaultRegistry(PoolingHttpClientConnectionManager.java:115)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:122)\n    at com.mashape.unirest.http.options.Options.refresh(Options.java:72)\n    at com.mashape.unirest.http.options.Options.&lt;clinit&gt;(Options.java:46)\n    at com.mashape.unirest.http.HttpClientHelper.prepareRequest(HttpClientHelper.java:151)\n    at com.mashape.unirest.http.HttpClientHelper.request(HttpClientHelper.java:131)\n    at com.mashape.unirest.request.BaseRequest.asString(BaseRequest.java:56)\n    at myapp.util.MyTaxNumberValidator$3.run(MyTaxNumberValidator.java:185)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\n    at java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:120)\n    ... 27 more\nCaused by: java.lang.SecurityException: Can't read cryptographic policy directory: unlimited\n    at java.base/javax.crypto.JceSecurity.setupJurisdictionPolicies(JceSecurity.java:326)\n    at java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:111)\n    at java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:108)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:107)\n    ... 27 more\n</code></pre>\n\n<p>I run an app using command:</p>\n\n<p><code>\\\\\\some-network-share\\app\\jre\\bin\\javaw.exe -jar myapp.jar</code></p>\n\n<p>because on this network share I've copied Amazon Correto 11 JDK files and other libs I use for the app.</p>\n\n<p>I run get request in another thread and this thread throws an exception.</p>\n\n<p>How can I overcome the problem? </p>\n\n<p>Please help.</p>\n\n<p>I've tried different libs: \n1. OkHttpClient\n2. Java Unirest</p>\n\n<p>but in both the same error. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class MyGetExecutor {\n\n\n    public static void main(String[] args) {\n\n        Thread getThread = new Thread( new Runnable() {\n\n            @Override\n            public void run() {\n\n                try {\n                    logMessage.add( \"Before request\" );\n                    com.mashape.unirest.http.HttpResponse&lt;String&gt; response = Unirest.get(\"https://myappserver.domain.com/api/v1/users/1\")\n                    .header(\"User-Agent\", \"PostmanRuntime/7.17.1\")\n                    .header(\"Accept\", \"*/*\")\n                    .header(\"Cache-Control\", \"no-cache\")\n                    .header(\"Postman-Token\", \"abf4b45d-a2c5-4f53-b4e3-1fa29643d616,e59130fc-5ce0-4b70-af48-ab3808362e36\")\n                    .header(\"Host\", \"wf01.cdprojektred.com\")\n                    .header(\"Accept-Encoding\", \"gzip, deflate\")\n                    .header(\"Cookie\", \"JSESSIONID=2C71F035C2EDFF145FED5C03C4887EF1\")\n                    .header(\"Connection\", \"keep-alive\")\n                    .header(\"cache-control\", \"no-cache\")\n                    .asString();\n                    logMessage.add( \"After request\" );\n                } catch (Exception e) {\n                    // TODO Auto-generated catch block\n                    logMessage.add( \"Exception in getThread: \" + e.getMessage() );\n                }\n\n\n            }\n\n        }, \"Get-thread\");\n        getThread.setUncaughtExceptionHandler(\n                new Thread.UncaughtExceptionHandler() {\n                    @Override\n                    public void uncaughtException(Thread t, Throwable e) {\n                        logMessage.add( \"Error in thread: \" + e );\n                        logMessage.add( \"Details: \" + e.getCause().getMessage() );\n                    }\n                }\n            );\n        getThread.start();\n\n        while( getThread.isAlive() ) {\n\n            try {\n                Thread.sleep(1000);\n                logMessage.add(\"Main thread sleeping...\");\n            } catch (Exception e) {\n                logMessage.add(\"Exception in main thread...: \" + e.getMessage());\n            }\n\n\n\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>EDIT 1</strong> I've added additional stacktrace - please check</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1695140034,"post_id":77136246,"comment_id":135982931,"body_markdown":"The versions you mentioned don&#39;t match up with what is in your pom. Please double-check!","body":"The versions you mentioned don&#39;t match up with what is in your pom. Please double-check!"},{"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"score":0,"creation_date":1695143415,"post_id":77136246,"comment_id":135983534,"body_markdown":"@S&#246;ren it should be fixed","body":"@S&#246;ren it should be fixed"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1695144451,"post_id":77136246,"comment_id":135983711,"body_markdown":"Nope. The versions you mention in the post are still ancient. Did you mix a Spring and Spring Boot?","body":"Nope. The versions you mention in the post are still ancient. Did you mix a Spring and Spring Boot?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1695144695,"post_id":77136246,"comment_id":135983760,"body_markdown":"Why on earth is spring boot your parent project, and not a dependency?","body":"Why on earth is spring boot your parent project, and not a dependency?"},{"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"score":0,"creation_date":1695147119,"post_id":77136246,"comment_id":135984133,"body_markdown":"@Rogue that&#39;s how it generated on https://start.spring.io/;","body":"@Rogue that&#39;s how it generated on <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a>;"},{"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"score":0,"creation_date":1695147524,"post_id":77136246,"comment_id":135984189,"body_markdown":"@Rogue Also, understand that I&#39;m not the original author.","body":"@Rogue Also, understand that I&#39;m not the original author."},{"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"score":0,"creation_date":1695220080,"post_id":77136246,"comment_id":135995590,"body_markdown":"I have tried updating the `pom.xml` and fixing the version mismatches, please check it out.","body":"I have tried updating the <code>pom.xml</code> and fixing the version mismatches, please check it out."}],"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695216905,"creation_date":1695139821,"question_id":77136246,"body_markdown":"The Spring application is working fine on `2.6.4` but I need to use Spring `3.1.2` so I had to change all the deprecated syntax like `javax` to `jakarta` within my entity classes etc. However, this small change has caused the application to throw the follwoing exception like 20 minutes after runtime:\r\n```\r\n2023-09-14T10:34:20.197-04:00  INFO 8084 --- [  restartedMain] com.aegis.kyc.KycApplication             : Starting KycApplication using Java 20.0.2 with PID 8084 (C:\\Users\\Devopscrm\\Documents\\kyc\\target\\classes started by DevopsCRM in C:\\Users\\Devopscrm\\Documents\\kyc)\r\n2023-09-14T10:34:20.198-04:00  INFO 8084 --- [  restartedMain] com.aegis.kyc.KycApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-09-14T10:34:20.234-04:00  INFO 8084 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-09-14T10:34:20.234-04:00  INFO 8084 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-09-14T10:34:20.765-04:00  INFO 8084 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-09-14T10:34:20.867-04:00  INFO 8084 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 35 JPA repository interfaces.\r\n2023-09-14T10:34:21.312-04:00  INFO 8084 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8443 (https) 8080 (http)\r\n2023-09-14T10:34:21.320-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-09-14T10:34:21.321-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]\r\n2023-09-14T10:34:21.362-04:00  INFO 8084 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-09-14T10:34:21.364-04:00  INFO 8084 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1128 ms\r\n2023-09-14T10:34:21.490-04:00  INFO 8084 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-09-14T10:34:21.528-04:00  INFO 8084 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final\r\n2023-09-14T10:34:21.529-04:00  INFO 8084 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-09-14T10:34:21.612-04:00  INFO 8084 --- [  restartedMain] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\r\n2023-09-14T10:34:21.626-04:00  INFO 8084 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-09-14T10:34:21.698-04:00  INFO 8084 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-09-14T10:34:21.710-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-09-14T10:34:21.923-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 13da464e-2c47-4c20-a774-aca6a0ab484f\r\n2023-09-14T10:34:21.924-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-09-14T10:34:22.270-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AccountStatus\r\n2023-09-14T10:34:22.271-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Associated\r\n2023-09-14T10:34:22.272-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.RevenueStream\r\n2023-09-14T10:34:22.272-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.CompanyBIRCorporation\r\n2023-09-14T10:34:22.273-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.BusinessType\r\n2023-09-14T10:34:22.273-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Affiliate\r\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Stationed\r\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.ContactType\r\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionC\r\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Opportunity\r\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Assignment\r\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionA\r\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Code\r\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.UserRole\r\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionB\r\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.CodeType\r\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.PowersOfAttorney\r\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Address\r\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Document\r\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.UserAccount\r\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Form\r\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.OpportunityLineItem\r\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.PoliticallyExposed\r\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.FormSubSection\r\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.FormPerson\r\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Plus10PercentShareholder\r\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Director\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AuthorizedSignatory\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.KYCForm\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Person\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Employee\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.ClientRep\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.TouchPoint\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.KeyFunctionaries\r\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Department\r\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.OpportunityComment\r\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Company\r\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Message\r\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AffiliateRep\r\n2023-09-14T10:34:22.397-04:00  INFO 8084 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-09-14T10:52:22.901-04:00  WARN 8084 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\r\n2023-09-14T10:52:22.904-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-09-14T10:52:22.909-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-09-14T10:52:22.912-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-09-14T10:52:22.930-04:00  INFO 8084 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-09-14T10:52:22.955-04:00 ERROR 8084 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]\r\n\tat com.aegis.kyc.KycApplication.main(KycApplication.java:34) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateInstance(Native Method) ~[na:na]\r\n\tat java.base/java.lang.invoke.DirectMethodHandle.allocateInstance(DirectMethodHandle.java:501) ~[na:na]\r\n\tat java.base/java.lang.invoke.DirectMethodHandle$Holder.newInvokeSpecial(DirectMethodHandle$Holder) ~[na:na]\r\n\tat java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder) ~[na:na]\r\n\tat org.hibernate.sql.ast.tree.expression.ColumnReference.appendReadExpression(ColumnReference.java:196) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.tree.expression.ColumnReference.appendReadExpression(ColumnReference.java:171) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitColumnReference(AbstractSqlAstTranslator.java:6086) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.tree.expression.ColumnReference.accept(ColumnReference.java:222) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.renderExpressionAsClauseItem(AbstractSqlAstTranslator.java:5035) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.renderSelectExpression(AbstractSqlAstTranslator.java:5020) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelectExpression(AbstractSqlAstTranslator.java:5015) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelection(AbstractSqlAstTranslator.java:4997) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelections(AbstractSqlAstTranslator.java:4662) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.dialect.SQLServerSqlAstTranslator.visitSqlSelections(SQLServerSqlAstTranslator.java:311) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSelectClause(AbstractSqlAstTranslator.java:4563) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.dialect.SQLServerSqlAstTranslator.visitSelectClause(SQLServerSqlAstTranslator.java:287) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitQuerySpec(AbstractSqlAstTranslator.java:3031) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.dialect.SQLServerSqlAstTranslator.visitQuerySpec(SQLServerSqlAstTranslator.java:277) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.tree.select.QuerySpec.accept(QuerySpec.java:119) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSelectStatement(AbstractSqlAstTranslator.java:986) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:849) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:799) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.loader.ast.internal.SingleIdLoadPlan.&lt;init&gt;(SingleIdLoadPlan.java:67) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:197) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:55) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3447) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3441) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:320) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:270) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\r\n\r\nProcess finished with exit code 0\r\n\r\n```\r\nThis is the where the console it stuck until the exception:\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.2)\r\n\r\n2023-09-19T11:55:56.710-04:00  INFO 800 --- [  restartedMain] com.aegis.kyc.KycApplication             : Starting KycApplication using Java 20.0.2 with PID 800 (C:\\Users\\Devopscrm\\Desktop\\New folder\\kyc\\target\\classes started by DevopsCRM in C:\\Users\\Devopscrm\\Desktop\\New folder\\kyc)\r\n2023-09-19T11:55:56.711-04:00  INFO 800 --- [  restartedMain] com.aegis.kyc.KycApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-09-19T11:55:56.752-04:00  INFO 800 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-09-19T11:55:56.753-04:00  INFO 800 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-09-19T11:55:57.263-04:00  INFO 800 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-09-19T11:55:57.357-04:00  INFO 800 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90 ms. Found 35 JPA repository interfaces.\r\n2023-09-19T11:55:57.828-04:00  INFO 800 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8443 (https) 8080 (http)\r\n2023-09-19T11:55:57.836-04:00  INFO 800 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-09-19T11:55:57.836-04:00  INFO 800 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n2023-09-19T11:55:57.876-04:00  INFO 800 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-09-19T11:55:57.878-04:00  INFO 800 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1123 ms\r\n2023-09-19T11:55:57.991-04:00  INFO 800 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-09-19T11:55:58.039-04:00  INFO 800 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n2023-09-19T11:55:58.040-04:00  INFO 800 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-09-19T11:55:58.122-04:00  INFO 800 --- [  restartedMain] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\r\n2023-09-19T11:55:58.137-04:00  INFO 800 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-09-19T11:55:58.218-04:00  INFO 800 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-09-19T11:55:58.229-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-09-19T11:55:58.447-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 3177f003-7ce9-4e36-b2a7-1f8e5044a8f5\r\n2023-09-19T11:55:58.448-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-09-19T11:55:58.831-04:00  INFO 800 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n\r\n```\r\n\r\nPreviously I added this to the `application.properties` file and the application did run, but it was on Spring `3.0.2` I was asked to try using `3.1.2` got the exception again:\r\n`spring.datasource.hikari.minimum-idle=2`\r\n\r\nThis is the `pom.xml`\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t\t xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.group&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;kyc&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;kyc&lt;/name&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;description&gt;TouchPoint Application&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring.boot.version&gt;3.1.2&lt;/spring.boot.version&gt;\r\n&lt;!--\t\t&lt;hibernate.validator.version&gt;your_version_here&lt;/hibernate.validator.version&gt;--&gt;\r\n\t\t&lt;hibernate.version&gt;6.1.6.Final&lt;/hibernate.version&gt;\r\n\t\t&lt;guava.version&gt;32.1.2-jre&lt;/guava.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Spring Boot Starter Dependencies --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;version&gt;${hibernate.validator.version}&lt;/version&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.6.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;32.1.2-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.3.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.10.1&lt;/version&gt;\r\n\t\t\t&lt;type&gt;maven-plugin&lt;/type&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.awaitility&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;awaitility&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;17&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;17&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nWhat am I missing?","title":"What is the cause of the &quot;Java heap space&quot; error related to the &#39;entityManagerFactory&#39; bean?","body":"<p>The Spring application is working fine on <code>2.6.4</code> but I need to use Spring <code>3.1.2</code> so I had to change all the deprecated syntax like <code>javax</code> to <code>jakarta</code> within my entity classes etc. However, this small change has caused the application to throw the follwoing exception like 20 minutes after runtime:</p>\n<pre><code>2023-09-14T10:34:20.197-04:00  INFO 8084 --- [  restartedMain] com.aegis.kyc.KycApplication             : Starting KycApplication using Java 20.0.2 with PID 8084 (C:\\Users\\Devopscrm\\Documents\\kyc\\target\\classes started by DevopsCRM in C:\\Users\\Devopscrm\\Documents\\kyc)\n2023-09-14T10:34:20.198-04:00  INFO 8084 --- [  restartedMain] com.aegis.kyc.KycApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-09-14T10:34:20.234-04:00  INFO 8084 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-09-14T10:34:20.234-04:00  INFO 8084 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-09-14T10:34:20.765-04:00  INFO 8084 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-09-14T10:34:20.867-04:00  INFO 8084 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 35 JPA repository interfaces.\n2023-09-14T10:34:21.312-04:00  INFO 8084 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8443 (https) 8080 (http)\n2023-09-14T10:34:21.320-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-09-14T10:34:21.321-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]\n2023-09-14T10:34:21.362-04:00  INFO 8084 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-09-14T10:34:21.364-04:00  INFO 8084 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1128 ms\n2023-09-14T10:34:21.490-04:00  INFO 8084 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-09-14T10:34:21.528-04:00  INFO 8084 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final\n2023-09-14T10:34:21.529-04:00  INFO 8084 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-09-14T10:34:21.612-04:00  INFO 8084 --- [  restartedMain] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\n2023-09-14T10:34:21.626-04:00  INFO 8084 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-09-14T10:34:21.698-04:00  INFO 8084 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-09-14T10:34:21.710-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-09-14T10:34:21.923-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 13da464e-2c47-4c20-a774-aca6a0ab484f\n2023-09-14T10:34:21.924-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-09-14T10:34:22.270-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AccountStatus\n2023-09-14T10:34:22.271-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Associated\n2023-09-14T10:34:22.272-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.RevenueStream\n2023-09-14T10:34:22.272-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.CompanyBIRCorporation\n2023-09-14T10:34:22.273-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.BusinessType\n2023-09-14T10:34:22.273-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Affiliate\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Stationed\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.ContactType\n2023-09-14T10:34:22.274-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionC\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Opportunity\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Assignment\n2023-09-14T10:34:22.275-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionA\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Code\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.UserRole\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.SectionB\n2023-09-14T10:34:22.277-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.CodeType\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.PowersOfAttorney\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Address\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Document\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.UserAccount\n2023-09-14T10:34:22.278-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Form\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.OpportunityLineItem\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.PoliticallyExposed\n2023-09-14T10:34:22.279-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.FormSubSection\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.FormPerson\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Plus10PercentShareholder\n2023-09-14T10:34:22.283-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Director\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AuthorizedSignatory\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.KYCForm\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Person\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Employee\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.ClientRep\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.TouchPoint\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.KeyFunctionaries\n2023-09-14T10:34:22.284-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Department\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.OpportunityComment\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Company\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.Message\n2023-09-14T10:34:22.285-04:00  INFO 8084 --- [  restartedMain] o.h.e.c.i.m.AuditMetadataGenerator       : Adding properties for entity: com.aegis.kyc.entity.AffiliateRep\n2023-09-14T10:34:22.397-04:00  INFO 8084 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-09-14T10:52:22.901-04:00  WARN 8084 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\n2023-09-14T10:52:22.904-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-09-14T10:52:22.909-04:00  INFO 8084 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-09-14T10:52:22.912-04:00  INFO 8084 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-09-14T10:52:22.930-04:00  INFO 8084 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-09-14T10:52:22.955-04:00 ERROR 8084 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]\n    at com.aegis.kyc.KycApplication.main(KycApplication.java:34) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/jdk.internal.misc.Unsafe.allocateInstance(Native Method) ~[na:na]\n    at java.base/java.lang.invoke.DirectMethodHandle.allocateInstance(DirectMethodHandle.java:501) ~[na:na]\n    at java.base/java.lang.invoke.DirectMethodHandle$Holder.newInvokeSpecial(DirectMethodHandle$Holder) ~[na:na]\n    at java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder) ~[na:na]\n    at org.hibernate.sql.ast.tree.expression.ColumnReference.appendReadExpression(ColumnReference.java:196) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.tree.expression.ColumnReference.appendReadExpression(ColumnReference.java:171) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitColumnReference(AbstractSqlAstTranslator.java:6086) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.tree.expression.ColumnReference.accept(ColumnReference.java:222) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.renderExpressionAsClauseItem(AbstractSqlAstTranslator.java:5035) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.renderSelectExpression(AbstractSqlAstTranslator.java:5020) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelectExpression(AbstractSqlAstTranslator.java:5015) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelection(AbstractSqlAstTranslator.java:4997) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSqlSelections(AbstractSqlAstTranslator.java:4662) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.dialect.SQLServerSqlAstTranslator.visitSqlSelections(SQLServerSqlAstTranslator.java:311) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSelectClause(AbstractSqlAstTranslator.java:4563) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.dialect.SQLServerSqlAstTranslator.visitSelectClause(SQLServerSqlAstTranslator.java:287) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitQuerySpec(AbstractSqlAstTranslator.java:3031) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.dialect.SQLServerSqlAstTranslator.visitQuerySpec(SQLServerSqlAstTranslator.java:277) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.tree.select.QuerySpec.accept(QuerySpec.java:119) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.visitSelectStatement(AbstractSqlAstTranslator.java:986) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:849) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:799) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.&lt;init&gt;(SingleIdLoadPlan.java:67) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:197) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:55) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3447) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3441) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:320) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:270) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n\n\nProcess finished with exit code 0\n\n</code></pre>\n<p>This is the where the console it stuck until the exception:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-09-19T11:55:56.710-04:00  INFO 800 --- [  restartedMain] com.aegis.kyc.KycApplication             : Starting KycApplication using Java 20.0.2 with PID 800 (C:\\Users\\Devopscrm\\Desktop\\New folder\\kyc\\target\\classes started by DevopsCRM in C:\\Users\\Devopscrm\\Desktop\\New folder\\kyc)\n2023-09-19T11:55:56.711-04:00  INFO 800 --- [  restartedMain] com.aegis.kyc.KycApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-09-19T11:55:56.752-04:00  INFO 800 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-09-19T11:55:56.753-04:00  INFO 800 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-09-19T11:55:57.263-04:00  INFO 800 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-09-19T11:55:57.357-04:00  INFO 800 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90 ms. Found 35 JPA repository interfaces.\n2023-09-19T11:55:57.828-04:00  INFO 800 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8443 (https) 8080 (http)\n2023-09-19T11:55:57.836-04:00  INFO 800 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-09-19T11:55:57.836-04:00  INFO 800 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-09-19T11:55:57.876-04:00  INFO 800 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-09-19T11:55:57.878-04:00  INFO 800 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1123 ms\n2023-09-19T11:55:57.991-04:00  INFO 800 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-09-19T11:55:58.039-04:00  INFO 800 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-09-19T11:55:58.040-04:00  INFO 800 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-09-19T11:55:58.122-04:00  INFO 800 --- [  restartedMain] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\n2023-09-19T11:55:58.137-04:00  INFO 800 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-09-19T11:55:58.218-04:00  INFO 800 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-09-19T11:55:58.229-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-09-19T11:55:58.447-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 3177f003-7ce9-4e36-b2a7-1f8e5044a8f5\n2023-09-19T11:55:58.448-04:00  INFO 800 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-09-19T11:55:58.831-04:00  INFO 800 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n\n</code></pre>\n<p>Previously I added this to the <code>application.properties</code> file and the application did run, but it was on Spring <code>3.0.2</code> I was asked to try using <code>3.1.2</code> got the exception again:\n<code>spring.datasource.hikari.minimum-idle=2</code></p>\n<p>This is the <code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.group&lt;/groupId&gt;\n    &lt;artifactId&gt;kyc&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;kyc&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;description&gt;TouchPoint Application&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring.boot.version&gt;3.1.2&lt;/spring.boot.version&gt;\n&lt;!--        &lt;hibernate.validator.version&gt;your_version_here&lt;/hibernate.validator.version&gt;--&gt;\n        &lt;hibernate.version&gt;6.1.6.Final&lt;/hibernate.version&gt;\n        &lt;guava.version&gt;32.1.2-jre&lt;/guava.version&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Spring Boot Starter Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;${hibernate.validator.version}&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\n            &lt;version&gt;6.1.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;32.1.2-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\n            &lt;version&gt;6.1.3.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.10.1&lt;/version&gt;\n            &lt;type&gt;maven-plugin&lt;/type&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\n            &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java","selenium-webdriver","popup","popupwindow"],"comments":[{"owner":{"account_id":306604,"reputation":37084,"user_id":617450,"accept_rate":61,"display_name":"Ripon Al Wasim"},"score":0,"creation_date":1504005733,"post_id":19403949,"comment_id":78833382,"body_markdown":"Take the list of windows by using driver.getWindowHandles().","body":"Take the list of windows by using driver.getWindowHandles()."}],"answers":[{"tags":[],"owner":{"account_id":1696244,"reputation":2249,"user_id":1557584,"display_name":"HemChe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1412176936,"creation_date":1381929104,"answer_id":19404394,"question_id":19403949,"body_markdown":"Do not make the situation complex. Use `ID` if they are available.\r\n\r\n    driver.get(&quot;http://www.rediff.com&quot;);\r\n\tWebElement sign = driver.findElement(By.linkText(&quot;Sign in&quot;));\r\n\tsign.click();\r\n\tWebElement email_id= driver.findElement(By.id(&quot;c_uname&quot;));\r\n\temail_id.sendKeys(&quot;hi&quot;);","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>Do not make the situation complex. Use <code>ID</code> if they are available.</p>\n\n<pre><code>driver.get(\"http://www.rediff.com\");\nWebElement sign = driver.findElement(By.linkText(\"Sign in\"));\nsign.click();\nWebElement email_id= driver.findElement(By.id(\"c_uname\"));\nemail_id.sendKeys(\"hi\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1483810,"reputation":3590,"user_id":1392498,"accept_rate":76,"display_name":"LINGS"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1496511929,"creation_date":1381941993,"answer_id":19409121,"question_id":19403949,"body_markdown":"To switch to a popup window, you need to use `getWindowHandles()` and iterate through them.\r\n\r\nIn your code you are using `getWindowHandle()` which will give you the parent window itself.\r\n\r\n    String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\r\n    String subWindowHandler = null;\r\n\r\n    Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\r\n    Iterator&lt;String&gt; iterator = handles.iterator();\r\n    while (iterator.hasNext()){\r\n        subWindowHandler = iterator.next();\r\n    }\r\n    driver.switchTo().window(subWindowHandler); // switch to popup window\r\n                                                \r\n    // Now you are in the popup window, perform necessary actions here\r\n\r\n    driver.switchTo().window(parentWindowHandler);  // switch back to parent window","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>To switch to a popup window, you need to use <code>getWindowHandles()</code> and iterate through them.</p>\n\n<p>In your code you are using <code>getWindowHandle()</code> which will give you the parent window itself.</p>\n\n<pre><code>String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\nString subWindowHandler = null;\n\nSet&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\nIterator&lt;String&gt; iterator = handles.iterator();\nwhile (iterator.hasNext()){\n    subWindowHandler = iterator.next();\n}\ndriver.switchTo().window(subWindowHandler); // switch to popup window\n\n// Now you are in the popup window, perform necessary actions here\n\ndriver.switchTo().window(parentWindowHandler);  // switch back to parent window\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3329341,"reputation":493,"user_id":2798616,"accept_rate":60,"display_name":"Niyati"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1381995587,"creation_date":1381993705,"answer_id":19420344,"question_id":19403949,"body_markdown":"I found the solution for the above program, which had the goal of signing in to http://rediff.com\r\n\r\n    public class Handle_popupNAlert\r\n    {\r\n    \tpublic static void main(String[] args ) throws InterruptedException\r\n    \t{\r\n    \t\tWebDriver driver= new FirefoxDriver(); \r\n    \t\tdriver.get(&quot;http://www.rediff.com/&quot;);\r\n    \t\tWebElement sign = driver.findElement(By.xpath(&quot;//html/body/div[3]/div[3]/span[4]/span/a&quot;));\r\n    \t\tsign.click();\r\n    \r\n    \t\tSet&lt;String&gt; windowId = driver.getWindowHandles();    // get  window id of current window\r\n    \t\tIterator&lt;String&gt; itererator = windowId.iterator();   \r\n    \r\n    \t\tString mainWinID = itererator.next();\r\n    \t\tString  newAdwinID = itererator.next();\r\n    \r\n    \t\tdriver.switchTo().window(newAdwinID);\r\n    \t\tSystem.out.println(driver.getTitle());\r\n    \t\tThread.sleep(3000);\r\n    \t\tdriver.close();\r\n    \t\t\r\n    \t\tdriver.switchTo().window(mainWinID);\r\n    \t\tSystem.out.println(driver.getTitle());\r\n    \t\tThread.sleep(2000);\r\n    \t\t\r\n    \t\tWebElement email_id= driver.findElement(By.xpath(&quot;//*[@id=&#39;c_uname&#39;]&quot;));\r\n    \t\temail_id.sendKeys(&quot;hi&quot;);\r\n    \t\tThread.sleep(5000);\r\n    \r\n    \t\tdriver.close();\r\n    \t\tdriver.quit();\r\n    \t}  \r\n    }","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>I found the solution for the above program, which had the goal of signing in to <a href=\"http://rediff.com\">http://rediff.com</a></p>\n\n<pre><code>public class Handle_popupNAlert\n{\n    public static void main(String[] args ) throws InterruptedException\n    {\n        WebDriver driver= new FirefoxDriver(); \n        driver.get(\"http://www.rediff.com/\");\n        WebElement sign = driver.findElement(By.xpath(\"//html/body/div[3]/div[3]/span[4]/span/a\"));\n        sign.click();\n\n        Set&lt;String&gt; windowId = driver.getWindowHandles();    // get  window id of current window\n        Iterator&lt;String&gt; itererator = windowId.iterator();   \n\n        String mainWinID = itererator.next();\n        String  newAdwinID = itererator.next();\n\n        driver.switchTo().window(newAdwinID);\n        System.out.println(driver.getTitle());\n        Thread.sleep(3000);\n        driver.close();\n\n        driver.switchTo().window(mainWinID);\n        System.out.println(driver.getTitle());\n        Thread.sleep(2000);\n\n        WebElement email_id= driver.findElement(By.xpath(\"//*[@id='c_uname']\"));\n        email_id.sendKeys(\"hi\");\n        Thread.sleep(5000);\n\n        driver.close();\n        driver.quit();\n    }  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5134499,"reputation":49,"user_id":4113690,"display_name":"Satheesh kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1416483966,"creation_date":1416483966,"answer_id":27038825,"question_id":19403949,"body_markdown":"           //get the main handle and remove it\r\n           //whatever remains is the child pop up window handle\r\n          \r\n           String mainHandle = driver.getWindowHandle();\r\n\t\t   Set&lt;String&gt; allHandles = driver.getWindowHandles();\r\n\t\t   Iterator&lt;String&gt; iter = allHandles.iterator();\r\n\t\t   allHandles.remove(mainHandle);\r\n\t\t   String childHandle=iter.next();","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<pre><code>       //get the main handle and remove it\n       //whatever remains is the child pop up window handle\n\n       String mainHandle = driver.getWindowHandle();\n       Set&lt;String&gt; allHandles = driver.getWindowHandles();\n       Iterator&lt;String&gt; iter = allHandles.iterator();\n       allHandles.remove(mainHandle);\n       String childHandle=iter.next();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5647686,"reputation":125,"user_id":4469239,"display_name":"ER.swatantra"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1422689800,"creation_date":1422689064,"answer_id":28249295,"question_id":19403949,"body_markdown":"You can handle popup window or alert box:\r\n\r\n    Alert alert = driver.switchTo().alert();\r\n    alert.accept();\r\n\r\nYou can also decline the alert box:\r\n\r\n    Alert alert = driver.switchTo().alert();\r\n    alert().dismiss();\r\n","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>You can handle popup window or alert box:</p>\n\n<pre><code>Alert alert = driver.switchTo().alert();\nalert.accept();\n</code></pre>\n\n<p>You can also decline the alert box:</p>\n\n<pre><code>Alert alert = driver.switchTo().alert();\nalert().dismiss();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6696105,"reputation":1,"user_id":5164077,"display_name":"Sandip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438073886,"creation_date":1438073886,"answer_id":31671694,"question_id":19403949,"body_markdown":"When the toastr message poped up on the screen of firefox. the below tag was displayed in fire bug. \r\n\r\n    &lt;div class=&quot;toast-message&quot;&gt;Invalid Credentials, Please check Password&lt;/div&gt;.\r\n\r\n \r\nI took the screenshot at that time.\r\nAnd did the below changes in selenium java code.\r\n \r\n\r\n    String alertText = &quot;&quot;;\r\n    WebDriverWait wait = new WebDriverWait(driver, 5);\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.className(&quot;toast-message&quot;)));\r\n    WebElement toast1 = driver.findElement(By.className(&quot;toast-message&quot;));  \r\n    alertText = toast1.getText();\r\n    System.out.println( alertText);\r\n\r\nAnd my issue of toastr popup got resolved.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/0TYaQ.png","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>When the toastr message poped up on the screen of firefox. the below tag was displayed in fire bug. </p>\n\n<pre><code>&lt;div class=\"toast-message\"&gt;Invalid Credentials, Please check Password&lt;/div&gt;.\n</code></pre>\n\n<p>I took the screenshot at that time.\nAnd did the below changes in selenium java code.</p>\n\n<pre><code>String alertText = \"\";\nWebDriverWait wait = new WebDriverWait(driver, 5);\nwait.until(ExpectedConditions.visibilityOfElementLocated(By.className(\"toast-message\")));\nWebElement toast1 = driver.findElement(By.className(\"toast-message\"));  \nalertText = toast1.getText();\nSystem.out.println( alertText);\n</code></pre>\n\n<p>And my issue of toastr popup got resolved.</p>\n"},{"tags":[],"owner":{"account_id":7480633,"reputation":1,"user_id":5685465,"display_name":"ankush deol"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1450251981,"creation_date":1450251688,"answer_id":34306405,"question_id":19403949,"body_markdown":"    public void Test(){\r\n\t\t\r\n\t\t WebElement sign = fc.findElement(By.xpath(&quot;.//*[@id=&#39;login-scroll&#39;]/a&quot;));\r\n\t        sign.click();\r\n\t        WebElement LoginAsGuest=fc.findElement(By.xpath(&quot;.//*[@id=&#39;guest-login-option&#39;]&quot;));\r\n\t        LoginAsGuest.click();\r\n\t        WebElement email_id= fc.findElement(By.xpath(&quot;.//*[@id=&#39;guestemail&#39;]&quot;));\r\n\t        email_id.sendKeys(&quot;ankushdeoladore@gmail.com&quot;);\r\n\t        WebElement ContinueButton=fc.findElement(By.xpath(&quot;.//*[@id=&#39;contibutton&#39;]&quot;));\r\n\t        ContinueButton.click();\r\n\t        \r\n\t}","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<pre><code>public void Test(){\n\n     WebElement sign = fc.findElement(By.xpath(\".//*[@id='login-scroll']/a\"));\n        sign.click();\n        WebElement LoginAsGuest=fc.findElement(By.xpath(\".//*[@id='guest-login-option']\"));\n        LoginAsGuest.click();\n        WebElement email_id= fc.findElement(By.xpath(\".//*[@id='guestemail']\"));\n        email_id.sendKeys(\"ankushdeoladore@gmail.com\");\n        WebElement ContinueButton=fc.findElement(By.xpath(\".//*[@id='contibutton']\"));\n        ContinueButton.click();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7827337,"reputation":51,"user_id":5918477,"display_name":"Manasis Mishra"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1463380224,"creation_date":1458899237,"answer_id":36217575,"question_id":19403949,"body_markdown":"You can use the below code inside your code when you get any web browser pop-up alert message box.\r\n\r\n    // Accepts (Click on OK) Chrome Alert Browser for RESET button.\r\n\r\n    Alert alertOK = driver.switchTo().alert();\r\n    alertOK.accept();\r\n\r\n\r\n\r\n    //Rejects (Click on Cancel) Chrome Browser Alert for RESET button.\r\n    \r\n    Alert alertCancel = driver.switchTo().alert();\r\n    alertCancel.dismiss();","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>You can use the below code inside your code when you get any web browser pop-up alert message box.</p>\n\n<pre><code>// Accepts (Click on OK) Chrome Alert Browser for RESET button.\n\nAlert alertOK = driver.switchTo().alert();\nalertOK.accept();\n\n\n\n//Rejects (Click on Cancel) Chrome Browser Alert for RESET button.\n\nAlert alertCancel = driver.switchTo().alert();\nalertCancel.dismiss();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3795467,"reputation":1,"user_id":3150673,"display_name":"user3150673"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542423762,"creation_date":1542423604,"answer_id":53347806,"question_id":19403949,"body_markdown":"    String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\r\n    String subWindowHandler = null;\r\n    \r\n    Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\r\n    Iterator&lt;String&gt; iterator = handles.iterator();\r\n    \r\n    subWindowHandler = iterator.next();\r\n    \r\n    driver.switchTo().window(subWindowHandler); // switch to popup window\r\n    \r\n    // Now you are in the popup window, perform necessary actions here\r\n    \r\n    driver.switchTo().window(parentWindowHandler);  // switch back to parent window","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<pre><code>String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\nString subWindowHandler = null;\n\nSet&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\nIterator&lt;String&gt; iterator = handles.iterator();\n\nsubWindowHandler = iterator.next();\n\ndriver.switchTo().window(subWindowHandler); // switch to popup window\n\n// Now you are in the popup window, perform necessary actions here\n\ndriver.switchTo().window(parentWindowHandler);  // switch back to parent window\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26858468,"reputation":1,"user_id":20442395,"display_name":"Greg Harward"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695216690,"creation_date":1694887146,"answer_id":77118968,"question_id":19403949,"body_markdown":"# It isn&#39;t Java, but if the comparison helps, here is a simple Python solution in Chrome that handles the question in a single line.\r\n    from selenium import webdriver\r\n\r\n    driver = webdriver.Chrome()\r\n    driver.get(url)\r\n\r\n    # Save a list of all open window handles\r\n    window_handles = driver.window_handles\r\n\r\n    # Open new window with click() action - modify as needed.\r\n    get_element(driver, By.XPATH, &quot;//input[@title]&quot;).click()\r\n\r\n    # Get and switch to the pop-up window\r\n    new_popup_window = list(set(driver.window_handles) - set(window_handles))[0]\r\n    driver.switch_to.window(new_popup_window)","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<h1>It isn't Java, but if the comparison helps, here is a simple Python solution in Chrome that handles the question in a single line.</h1>\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Chrome()\ndriver.get(url)\n\n# Save a list of all open window handles\nwindow_handles = driver.window_handles\n\n# Open new window with click() action - modify as needed.\nget_element(driver, By.XPATH, &quot;//input[@title]&quot;).click()\n\n# Get and switch to the pop-up window\nnew_popup_window = list(set(driver.window_handles) - set(window_handles))[0]\ndriver.switch_to.window(new_popup_window)\n</code></pre>\n"}],"owner":{"account_id":3329341,"reputation":493,"user_id":2798616,"accept_rate":60,"display_name":"Niyati"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287478,"favorite_count":0,"down_vote_count":1,"up_vote_count":25,"accepted_answer_id":19409121,"answer_count":10,"score":24,"last_activity_date":1695216690,"creation_date":1381927956,"question_id":19403949,"body_markdown":"I want to handle sign-in part in rediff.com, but the below code doesn&#39;t work for that:\r\n\r\n    driver.get(&quot;http://www.rediff.com/&quot;);\r\n    WebElement sign = driver.findElement(By.xpath(&quot;//html/body/div[3]/div[3]/span[4]/span/a&quot;));\r\n\tsign.click();\r\n\tString myWindowHandle = driver.getWindowHandle();\r\n\tdriver.switchTo().window(myWindowHandle);\r\n\tWebElement email_id= driver.findElement(By.xpath(&quot;//*[@id=&#39;signin_info&#39;]/a[1]&quot;));\r\n\temail_id.sendKeys(&quot;hi&quot;);\r\n\r\nIf `myWindowHandle` is not the correct string, then let me know how to get the pop-up Window name, because I can&#39;t find the name of the pop-up window.","title":"How to handle Pop-up in Selenium WebDriver using Java","body":"<p>I want to handle sign-in part in rediff.com, but the below code doesn't work for that:</p>\n\n<pre><code>driver.get(\"http://www.rediff.com/\");\nWebElement sign = driver.findElement(By.xpath(\"//html/body/div[3]/div[3]/span[4]/span/a\"));\nsign.click();\nString myWindowHandle = driver.getWindowHandle();\ndriver.switchTo().window(myWindowHandle);\nWebElement email_id= driver.findElement(By.xpath(\"//*[@id='signin_info']/a[1]\"));\nemail_id.sendKeys(\"hi\");\n</code></pre>\n\n<p>If <code>myWindowHandle</code> is not the correct string, then let me know how to get the pop-up Window name, because I can't find the name of the pop-up window.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":26776,"reputation":5358,"user_id":69966,"accept_rate":86,"display_name":"Chepech"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1656529811,"creation_date":1656529811,"answer_id":72806661,"question_id":71618805,"body_markdown":"Two things you should check:\r\n\r\nCheck that you are using the [correct ***provider*** entry depending on the version][1] that you are using the AndroidManifest, this one worked for me:\r\n\r\n    &lt;provider\r\n        android:name=&quot;androidx.startup.InitializationProvider&quot;\r\n        android:authorities=&quot;${applicationId}.androidx-startup&quot;\r\n        tools:node=&quot;remove&quot;&gt;\r\n    &lt;/provider&gt;\r\n\r\nCheck that you have this two kapt dependencies on your build.gradle (this is not mentioned on the doc, and this was the cause for me having the same issue):\r\n\r\n    kapt &quot;com.google.dagger:hilt-android-compiler:2.42&quot;\r\n    kapt &quot;androidx.hilt:hilt-compiler:1.0.0&quot;\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/workmanager/advanced/custom-configuration","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>Two things you should check:</p>\n<p>Check that you are using the <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/advanced/custom-configuration\" rel=\"noreferrer\">correct <em><strong>provider</strong></em> entry depending on the version</a> that you are using the AndroidManifest, this one worked for me:</p>\n<pre><code>&lt;provider\n    android:name=&quot;androidx.startup.InitializationProvider&quot;\n    android:authorities=&quot;${applicationId}.androidx-startup&quot;\n    tools:node=&quot;remove&quot;&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>Check that you have this two kapt dependencies on your build.gradle (this is not mentioned on the doc, and this was the cause for me having the same issue):</p>\n<pre><code>kapt &quot;com.google.dagger:hilt-android-compiler:2.42&quot;\nkapt &quot;androidx.hilt:hilt-compiler:1.0.0&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6137419,"reputation":798,"user_id":4785772,"accept_rate":50,"display_name":"Tausif"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678705427,"creation_date":1678705427,"answer_id":75721027,"question_id":71618805,"body_markdown":"In my project, I have used multiple worker class for different tasks. I also encountered the same issue and fixed this by adding   `android:multiprocess=&quot;true&quot;` in the manifest file &quot;provider&quot; tag. Sample code is given here :\r\n \r\n\r\n    &lt;provider\r\n                android:name=&quot;androidx.startup.InitializationProvider&quot;\r\n                android:authorities=&quot;${applicationId}.androidx-startup&quot;\r\n                android:multiprocess=&quot;true&quot;\r\n                tools:node=&quot;remove&quot;&gt;\r\n    &lt;/provider&gt;","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>In my project, I have used multiple worker class for different tasks. I also encountered the same issue and fixed this by adding   <code>android:multiprocess=&quot;true&quot;</code> in the manifest file &quot;provider&quot; tag. Sample code is given here :</p>\n<pre><code>&lt;provider\n            android:name=&quot;androidx.startup.InitializationProvider&quot;\n            android:authorities=&quot;${applicationId}.androidx-startup&quot;\n            android:multiprocess=&quot;true&quot;\n            tools:node=&quot;remove&quot;&gt;\n&lt;/provider&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8711625,"reputation":31,"user_id":6517630,"display_name":"Hemant Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683714399,"creation_date":1683714399,"answer_id":76217318,"question_id":71618805,"body_markdown":"I was also facing this error and I had done everything you mentioned.\r\nIn my case, the code for removing `androidx.work.impl.WorkManagerInitializer` was in the app module&#39;s `AndroidManifest.xml`. On moving that code to feature-specific `AndroidManifest.xml` I was able to fix the issue.\r\n","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>I was also facing this error and I had done everything you mentioned.\nIn my case, the code for removing <code>androidx.work.impl.WorkManagerInitializer</code> was in the app module's <code>AndroidManifest.xml</code>. On moving that code to feature-specific <code>AndroidManifest.xml</code> I was able to fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":7247553,"reputation":588,"user_id":5604429,"accept_rate":100,"display_name":"bene25"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686065649,"creation_date":1686065649,"answer_id":76416235,"question_id":71618805,"body_markdown":"I know example already has this piece of code, anyway in my case adding this code resolved the issue\r\n\r\n    override fun getWorkManagerConfiguration() =\r\n          Configuration.Builder()\r\n                .setWorkerFactory(workerFactory)\r\n                .build()","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>I know example already has this piece of code, anyway in my case adding this code resolved the issue</p>\n<pre><code>override fun getWorkManagerConfiguration() =\n      Configuration.Builder()\n            .setWorkerFactory(workerFactory)\n            .build()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8876334,"reputation":831,"user_id":6628335,"display_name":"Mohamed Medhat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693057524,"creation_date":1693057524,"answer_id":76983248,"question_id":71618805,"body_markdown":"For me, I was using hilt.  \r\nI was missing `@HiltWorker` annotation on my worker class.","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>For me, I was using hilt.<br />\nI was missing <code>@HiltWorker</code> annotation on my worker class.</p>\n"},{"tags":[],"owner":{"account_id":5599496,"reputation":306,"user_id":4436156,"display_name":"KursikS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695216474,"creation_date":1695216474,"answer_id":77142935,"question_id":71618805,"body_markdown":"Make sure you do not call WorkManager.initialize yourself\r\n\r\n    @Provides\r\n    @Singleton\r\n    override fun create(@ApplicationContext context: Context): WorkManager {\r\n        // val configuration = Configuration.Builder().build()\r\n        // WorkManager.initialize(context, configuration)\r\n        return WorkManager.getInstance(context)\r\n    }","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>Make sure you do not call WorkManager.initialize yourself</p>\n<pre><code>@Provides\n@Singleton\noverride fun create(@ApplicationContext context: Context): WorkManager {\n    // val configuration = Configuration.Builder().build()\n    // WorkManager.initialize(context, configuration)\n    return WorkManager.getInstance(context)\n}\n</code></pre>\n"}],"owner":{"account_id":18711928,"reputation":111,"user_id":13641837,"display_name":"adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4821,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":6,"score":9,"last_activity_date":1695216474,"creation_date":1648219375,"question_id":71618805,"body_markdown":"I am using work manager with Hilt but getting below error.\r\n\r\nI am referring Android tutorial https://developer.android.com/training/dependency-injection/hilt-jetpack\r\n\r\n**Error**\r\n\r\n    java.lang.NoSuchMethodException: com.debug.check.TestWorker.&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]\r\n            at java.lang.Class.getConstructor0(Class.java:2332)\r\n            at java.lang.Class.getDeclaredConstructor(Class.java:2170)\r\n            at androidx.work.WorkerFactory.createWorkerWithDefaultFallback(WorkerFactory.java:95)\r\n            at androidx.work.impl.WorkerWrapper.runWorker(WorkerWrapper.java:245)\r\n            at androidx.work.impl.WorkerWrapper.run(WorkerWrapper.java:137)\r\n            at androidx.work.impl.utils.SerialExecutor$Task.run(SerialExecutor.java:91)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n            at java.lang.Thread.run(Thread.java:929)\r\n\r\n **gradle version :**\r\n\r\n    implementation &#39;androidx.work:work-runtime-ktx:2.7.1&#39;\r\n        // When using Kotlin.\r\n    kapt(&quot;androidx.hilt:hilt-compiler:1.0.0&quot;)\r\n    implementation &#39;androidx.hilt:hilt-work:1.0.0&#39;\r\n\r\n**TestWorker**\r\n\r\n \r\n\r\n    @HiltWorker\r\n    class TestWorker @AssistedInject constructor(\r\n        @Assisted context: Context,\r\n        @Assisted chatParameters: WorkerParameters,\r\n        private val mainRepository: MainRepository\r\n    ) : CoroutineWorker(context, chatParameters) {\r\n    \r\n    \r\n        companion object {\r\n            const val KEY_RESULT = &quot;KEYRESULT&quot;\r\n        }\r\n    \r\n    \r\n        override suspend fun doWork(): Result = coroutineScope {\r\n            try {\r\n                println(&quot;test&quot;)\r\n                mainRepository.refreshMovies()\r\n            } catch (e: Exception) {\r\n                Result.failure()\r\n            }\r\n            Result.success()\r\n        }\r\n    }  \r\n\r\n**MyApplication**\r\n\r\n    @HiltAndroidApp\r\n    class MyApplication : Application(), Configuration.Provider {\r\n        @Inject\r\n        lateinit var workerFactory: HiltWorkerFactory\r\n    \r\n        override fun getWorkManagerConfiguration() =\r\n            Configuration.Builder()\r\n                .setWorkerFactory(workerFactory)\r\n                .build()\r\n        override fun onCreate() {\r\n            super.onCreate()\r\n           \r\n        }\r\n    }\r\n\r\n\r\n**MainActivity**\r\n \r\n   \r\n\r\n     @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main3);\r\n    \r\n            WorkManager workManager = WorkManager.getInstance(this);\r\n            PeriodicWorkRequest periodicWorkRequest = new PeriodicWorkRequest.Builder(TestChatWorker.class\r\n                    , 5, TimeUnit.SECONDS)\r\n                    .addTag(&quot;test&quot;)\r\n                    .build();\r\n    \r\n            workManager.enqueueUniquePeriodicWork(&quot;test&quot;, ExistingPeriodicWorkPolicy.KEEP, periodicWorkRequest);\r\n            workManager.getWorkInfoByIdLiveData(periodicWorkRequest.getId()).observe(this, new Observer&lt;WorkInfo&gt;() {\r\n                @Override\r\n                public void onChanged(WorkInfo workInfo) {\r\n                    if (workInfo != null) {\r\n                        if (workInfo.getState() == WorkInfo.State.SUCCEEDED) {\r\n                            String chatResult = workInfo.getOutputData().getString(TestWorker.KEY_RESULT);\r\n    \r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n*It continues to fail in the initiate part.*\r\nI tried to downgrade work manager to 2.6 but still not able to solve this issue.I already implemented in manifest.xml.\r\n\r\n     &lt;provider\r\n                android:name=&quot;androidx.startup.InitializationProvider&quot;\r\n                android:authorities=&quot;${applicationId}.androidx-startup&quot;\r\n                android:exported=&quot;false&quot;\r\n                tools:node=&quot;merge&quot;&gt;\r\n                &lt;!-- If you are using androidx.startup to initialize other components --&gt;\r\n                &lt;meta-data\r\n                    android:name=&quot;androidx.work.impl.WorkManagerInitializer&quot;\r\n                    android:value=&quot;androidx.startup&quot;\r\n                    tools:node=&quot;remove&quot; /&gt;\r\n            &lt;/provider&gt;\r\n\r\n","title":"Hilt and WorkManager error : java.lang.NoSuchMethodException:&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]","body":"<p>I am using work manager with Hilt but getting below error.</p>\n<p>I am referring Android tutorial <a href=\"https://developer.android.com/training/dependency-injection/hilt-jetpack\" rel=\"noreferrer\">https://developer.android.com/training/dependency-injection/hilt-jetpack</a></p>\n<p><strong>Error</strong></p>\n<pre><code>java.lang.NoSuchMethodException: com.debug.check.TestWorker.&lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]\n        at java.lang.Class.getConstructor0(Class.java:2332)\n        at java.lang.Class.getDeclaredConstructor(Class.java:2170)\n        at androidx.work.WorkerFactory.createWorkerWithDefaultFallback(WorkerFactory.java:95)\n        at androidx.work.impl.WorkerWrapper.runWorker(WorkerWrapper.java:245)\n        at androidx.work.impl.WorkerWrapper.run(WorkerWrapper.java:137)\n        at androidx.work.impl.utils.SerialExecutor$Task.run(SerialExecutor.java:91)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:929)\n</code></pre>\n<p><strong>gradle version :</strong></p>\n<pre><code>implementation 'androidx.work:work-runtime-ktx:2.7.1'\n    // When using Kotlin.\nkapt(&quot;androidx.hilt:hilt-compiler:1.0.0&quot;)\nimplementation 'androidx.hilt:hilt-work:1.0.0'\n</code></pre>\n<p><strong>TestWorker</strong></p>\n<pre><code>@HiltWorker\nclass TestWorker @AssistedInject constructor(\n    @Assisted context: Context,\n    @Assisted chatParameters: WorkerParameters,\n    private val mainRepository: MainRepository\n) : CoroutineWorker(context, chatParameters) {\n\n\n    companion object {\n        const val KEY_RESULT = &quot;KEYRESULT&quot;\n    }\n\n\n    override suspend fun doWork(): Result = coroutineScope {\n        try {\n            println(&quot;test&quot;)\n            mainRepository.refreshMovies()\n        } catch (e: Exception) {\n            Result.failure()\n        }\n        Result.success()\n    }\n}  \n</code></pre>\n<p><strong>MyApplication</strong></p>\n<pre><code>@HiltAndroidApp\nclass MyApplication : Application(), Configuration.Provider {\n    @Inject\n    lateinit var workerFactory: HiltWorkerFactory\n\n    override fun getWorkManagerConfiguration() =\n        Configuration.Builder()\n            .setWorkerFactory(workerFactory)\n            .build()\n    override fun onCreate() {\n        super.onCreate()\n       \n    }\n}\n</code></pre>\n<p><strong>MainActivity</strong></p>\n<pre><code> @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main3);\n\n        WorkManager workManager = WorkManager.getInstance(this);\n        PeriodicWorkRequest periodicWorkRequest = new PeriodicWorkRequest.Builder(TestChatWorker.class\n                , 5, TimeUnit.SECONDS)\n                .addTag(&quot;test&quot;)\n                .build();\n\n        workManager.enqueueUniquePeriodicWork(&quot;test&quot;, ExistingPeriodicWorkPolicy.KEEP, periodicWorkRequest);\n        workManager.getWorkInfoByIdLiveData(periodicWorkRequest.getId()).observe(this, new Observer&lt;WorkInfo&gt;() {\n            @Override\n            public void onChanged(WorkInfo workInfo) {\n                if (workInfo != null) {\n                    if (workInfo.getState() == WorkInfo.State.SUCCEEDED) {\n                        String chatResult = workInfo.getOutputData().getString(TestWorker.KEY_RESULT);\n\n                    }\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p><em>It continues to fail in the initiate part.</em>\nI tried to downgrade work manager to 2.6 but still not able to solve this issue.I already implemented in manifest.xml.</p>\n<pre><code> &lt;provider\n            android:name=&quot;androidx.startup.InitializationProvider&quot;\n            android:authorities=&quot;${applicationId}.androidx-startup&quot;\n            android:exported=&quot;false&quot;\n            tools:node=&quot;merge&quot;&gt;\n            &lt;!-- If you are using androidx.startup to initialize other components --&gt;\n            &lt;meta-data\n                android:name=&quot;androidx.work.impl.WorkManagerInitializer&quot;\n                android:value=&quot;androidx.startup&quot;\n                tools:node=&quot;remove&quot; /&gt;\n        &lt;/provider&gt;\n</code></pre>\n"},{"tags":["java","time","timer","calendar","scheduler"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":5,"creation_date":1694688482,"post_id":77104155,"comment_id":135925548,"body_markdown":"Depending on your operating system it might be worth it exploring its scheduling facilities instead of doing it via code.","body":"Depending on your operating system it might be worth it exploring its scheduling facilities instead of doing it via code."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1694689692,"post_id":77104155,"comment_id":135925832,"body_markdown":"I agree with @FedericoklezCulloca. You have described a cron job. Get rid of the scheduling part of your code, and just focus on the `//method to be called`. Then, write a script or something that will execute your Java file, and then put that script on the crontab. Cron jobs are easy to make and maintain, and even though scheduling them is a bit tricky, there are a million resources on how to do so online.","body":"I agree with @FedericoklezCulloca. You have described a cron job. Get rid of the scheduling part of your code, and just focus on the <code>&#47;&#47;method to be called</code>. Then, write a script or something that will execute your Java file, and then put that script on the crontab. Cron jobs are easy to make and maintain, and even though scheduling them is a bit tricky, there are a million resources on how to do so online."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1694691689,"post_id":77104155,"comment_id":135926185,"body_markdown":"Using cron (or at) is the way to go if you aren&#39;t writing Java server code. If you are writing Java server code, [Quartz](https://www.quartz-scheduler.org/) *might* be worth investigating.","body":"Using cron (or at) is the way to go if you aren&#39;t writing Java server code. If you are writing Java server code, <a href=\"https://www.quartz-scheduler.org/\" rel=\"nofollow noreferrer\">Quartz</a> <i>might</i> be worth investigating."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1694692549,"post_id":77104155,"comment_id":135926356,"body_markdown":"If you want to do it in Java, don’t use `Calendar` and `Timer`, they are outdated and `Calendar` in particular is poorly designed and cumbersome to work with. Use `ZonedDateTime` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). And use [`ScheduledExecutorService`](https://www.baeldung.com/java-executor-service-tutorial).","body":"If you want to do it in Java, don’t use <code>Calendar</code> and <code>Timer</code>, they are outdated and <code>Calendar</code> in particular is poorly designed and cumbersome to work with. Use <code>ZonedDateTime</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. And use <a href=\"https://www.baeldung.com/java-executor-service-tutorial\" rel=\"nofollow noreferrer\"><code>ScheduledExecutorService</code></a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1694692637,"post_id":77104155,"comment_id":135926376,"body_markdown":"Welcome to Stack Overflow. Please search before asking. Similar requirements are treated on a wealth of websites.","body":"Welcome to Stack Overflow. Please search before asking. Similar requirements are treated on a wealth of websites."}],"answers":[{"tags":[],"owner":{"account_id":29441321,"reputation":11,"user_id":22559387,"display_name":"Cristian Daramus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694691645,"creation_date":1694691645,"answer_id":77104543,"question_id":77104155,"body_markdown":"if you are using Spring along with Java one option is to use @Scheduled along with a cron expression. \r\n\r\nSomething like this:\r\n\r\n    @Scheduled(cron = &quot;0 0 21 * * ?&quot;, zone = &quot;Europe/Paris&quot;)\r\n\r\nYou can find more about @Scheduled here: https://www.baeldung.com/spring-scheduled-tasks.\r\n\r\nAnd you can play with cron expressions here: https://www.freeformatter.com/cron-expression-generator-quartz.html","title":"How to execute the method at desired time everyday","body":"<p>if you are using Spring along with Java one option is to use @Scheduled along with a cron expression.</p>\n<p>Something like this:</p>\n<pre><code>@Scheduled(cron = &quot;0 0 21 * * ?&quot;, zone = &quot;Europe/Paris&quot;)\n</code></pre>\n<p>You can find more about @Scheduled here: <a href=\"https://www.baeldung.com/spring-scheduled-tasks\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-scheduled-tasks</a>.</p>\n<p>And you can play with cron expressions here: <a href=\"https://www.freeformatter.com/cron-expression-generator-quartz.html\" rel=\"nofollow noreferrer\">https://www.freeformatter.com/cron-expression-generator-quartz.html</a></p>\n"}],"owner":{"account_id":29183303,"reputation":1,"user_id":22357008,"display_name":"sEul"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694692687,"answer_count":1,"score":0,"last_activity_date":1695216417,"creation_date":1694688382,"question_id":77104155,"body_markdown":"I have a method which should be executed everyday indefinitely. If the time is missed (because of the machine/laptop being inactive) then it should be executed next day. This should be running all the time.","title":"How to execute the method at desired time everyday","body":"<p>I have a method which should be executed everyday indefinitely. If the time is missed (because of the machine/laptop being inactive) then it should be executed next day. This should be running all the time.</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":16626245,"reputation":31,"user_id":12015287,"display_name":"Chungyen Tsai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695216312,"creation_date":1695216312,"question_id":77142914,"body_markdown":"The idea is to have a class that, when executed, generates entities for every table in the database. \r\nTo do this, my idea was to generate entities using the Hibernate API with code. \r\nI&#39;ve been exploring a bit, and I&#39;ve come up with this, where metadata is not null. However, in exporter.start(), it fails in a place where metadata is requested, and it&#39;s null there.\r\nCurrently, the class looks like this:\r\n\r\n    public class Hibernate {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tFile outputPath = new File(&quot;src/main/java/com/yourcompany/invoicing/model/&quot;);\r\n    \r\n    \t\tConfiguration configuration = new Configuration().configure();\r\n    \t\tStandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder()\r\n    \t\t\t\t.applySettings(configuration.getProperties());\r\n    \t\tStandardServiceRegistry registry = builder.build();\r\n    \t\tMetadataSources sources = new MetadataSources(registry);\r\n    \t\tMetadata metadata = sources.buildMetadata();\r\n    \r\n    \t\tSystem.out.println(metadata == null); // &lt;&lt; false\r\n    \t\tSystem.out.println(metadata.getDatabase().getDialect()); // &lt;&lt; returns me mysql8 dialect\r\n    \r\n    \t\tPOJOExporter exporter = new POJOExporter();\r\n    \t\texporter.setOutputDirectory(outputPath);\r\n    \t\texporter.getProperties().setProperty(&quot;jdk5&quot;, &quot;true&quot;);\r\n    \t\texporter.getProperties().setProperty(&quot;ejb3&quot;, &quot;true&quot;);\r\n    \r\n    \t\texporter.start();\r\n    \r\n    \t\tStandardServiceRegistryBuilder.destroy(registry);\r\n    \t}\r\n    \r\n    }\r\n\r\nI have configured hibernate.cfg.xml in src/main/resources like this:\r\n\r\n    &lt;hibernate-configuration&gt;\r\n    \t&lt;session-factory&gt;\r\n    \t\t&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.password&quot;&gt;r123456&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.default_schema&quot;&gt;reverse&lt;/property&gt;\r\n    \t&lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nThe hibernate.reveng.xml is also configured, although I&#39;m not sure if it&#39;s working.\r\n\r\n    &lt;hibernate-reverse-engineering&gt;\r\n        &lt;schema-selection match-schema=&quot;reverse&quot; /&gt;\r\n        &lt;table-filter match-name=&quot;.*&quot; package=&quot;com.yourcompany.invoicing.model&quot; /&gt;\r\n    &lt;/hibernate-reverse-engineering&gt;\r\n\r\nI&#39;m using the libraries in the pom.xml\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThe error is:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n    \tat org.hibernate.tool.hbm2x.AbstractExporter.buildMetadata(AbstractExporter.java:206)\r\n    \tat org.hibernate.tool.hbm2x.AbstractExporter.getMetadata(AbstractExporter.java:56)\r\n    \tat org.hibernate.tool.hbm2x.AbstractExporter.setupContext(AbstractExporter.java:177)\r\n    \tat org.hibernate.tool.hbm2x.POJOExporter.setupContext(POJOExporter.java:35)\r\n    \tat org.hibernate.tool.hbm2x.AbstractExporter.start(AbstractExporter.java:104)\r\n    \tat com.yourcompany.invoicing.run.Hibernate.main(Hibernate.java:35)\r\n\r\nWhere\r\n\r\n    (AbstractExporter.java:177) is the line if(getMetadata() != null)\r\n\r\n            if(getMetadata() != null) {\r\n            \t\tgetTemplateHelper().putInContext(&quot;md&quot;, metadata);\r\n            \t\tgetTemplateHelper().putInContext(&quot;props&quot;, getProperties());\r\n            \t\tgetTemplateHelper().putInContext(&quot;tables&quot;, metadata.collectTableMappings());\r\n            }\r\nand \r\n\r\n    (AbstractExporter.java:56) is the line metadata = buildMetadata();\r\n\r\n    \tpublic Metadata getMetadata() {\r\n    \t\tif (metadata == null) {\r\n    \t\t\tmetadata = buildMetadata();\r\n    \t\t}\r\n    \t\treturn metadata;\r\n    \t}","title":"Generate entities with Hibernate API in JAVA","body":"<p>The idea is to have a class that, when executed, generates entities for every table in the database.\nTo do this, my idea was to generate entities using the Hibernate API with code.\nI've been exploring a bit, and I've come up with this, where metadata is not null. However, in exporter.start(), it fails in a place where metadata is requested, and it's null there.\nCurrently, the class looks like this:</p>\n<pre><code>public class Hibernate {\n\n    public static void main(String[] args) {\n        File outputPath = new File(&quot;src/main/java/com/yourcompany/invoicing/model/&quot;);\n\n        Configuration configuration = new Configuration().configure();\n        StandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder()\n                .applySettings(configuration.getProperties());\n        StandardServiceRegistry registry = builder.build();\n        MetadataSources sources = new MetadataSources(registry);\n        Metadata metadata = sources.buildMetadata();\n\n        System.out.println(metadata == null); // &lt;&lt; false\n        System.out.println(metadata.getDatabase().getDialect()); // &lt;&lt; returns me mysql8 dialect\n\n        POJOExporter exporter = new POJOExporter();\n        exporter.setOutputDirectory(outputPath);\n        exporter.getProperties().setProperty(&quot;jdk5&quot;, &quot;true&quot;);\n        exporter.getProperties().setProperty(&quot;ejb3&quot;, &quot;true&quot;);\n\n        exporter.start();\n\n        StandardServiceRegistryBuilder.destroy(registry);\n    }\n\n}\n</code></pre>\n<p>I have configured hibernate.cfg.xml in src/main/resources like this:</p>\n<pre><code>&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;r123456&lt;/property&gt;\n        &lt;property name=&quot;hibernate.default_schema&quot;&gt;reverse&lt;/property&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>The hibernate.reveng.xml is also configured, although I'm not sure if it's working.</p>\n<pre><code>&lt;hibernate-reverse-engineering&gt;\n    &lt;schema-selection match-schema=&quot;reverse&quot; /&gt;\n    &lt;table-filter match-name=&quot;.*&quot; package=&quot;com.yourcompany.invoicing.model&quot; /&gt;\n&lt;/hibernate-reverse-engineering&gt;\n</code></pre>\n<p>I'm using the libraries in the pom.xml</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\n        &lt;version&gt;5.6.15.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.6.15.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;version&gt;8.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The error is:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hibernate.tool.hbm2x.AbstractExporter.buildMetadata(AbstractExporter.java:206)\n    at org.hibernate.tool.hbm2x.AbstractExporter.getMetadata(AbstractExporter.java:56)\n    at org.hibernate.tool.hbm2x.AbstractExporter.setupContext(AbstractExporter.java:177)\n    at org.hibernate.tool.hbm2x.POJOExporter.setupContext(POJOExporter.java:35)\n    at org.hibernate.tool.hbm2x.AbstractExporter.start(AbstractExporter.java:104)\n    at com.yourcompany.invoicing.run.Hibernate.main(Hibernate.java:35)\n</code></pre>\n<p>Where</p>\n<pre><code>(AbstractExporter.java:177) is the line if(getMetadata() != null)\n\n        if(getMetadata() != null) {\n                getTemplateHelper().putInContext(&quot;md&quot;, metadata);\n                getTemplateHelper().putInContext(&quot;props&quot;, getProperties());\n                getTemplateHelper().putInContext(&quot;tables&quot;, metadata.collectTableMappings());\n        }\n</code></pre>\n<p>and</p>\n<pre><code>(AbstractExporter.java:56) is the line metadata = buildMetadata();\n\n    public Metadata getMetadata() {\n        if (metadata == null) {\n            metadata = buildMetadata();\n        }\n        return metadata;\n    }\n</code></pre>\n"},{"tags":["java","android","kotlin","navigation","dependencies"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1695005323,"post_id":77124294,"comment_id":135961572,"body_markdown":"So did you try updating your `compileSdk` to 34?","body":"So did you try updating your <code>compileSdk</code> to 34?"}],"answers":[{"tags":[],"owner":{"account_id":29489127,"reputation":1,"user_id":22598423,"display_name":"DumontM4kePrompt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695216057,"creation_date":1695197721,"answer_id":77140544,"question_id":77124294,"body_markdown":"I had this mistake before when default colors (res/values/colors.xml) were replaced by me in android studio project. I worked with template Navigation Drawer Views Activity on the startup screen. By adding default colors into res/values/colors.xml I solved this problem\r\n\r\n    &lt;color name=&quot;purple_200&quot;&gt;#FFBB86FC&lt;/color&gt;\r\n    &lt;color name=&quot;purple_500&quot;&gt;#FF6200EE&lt;/color&gt;\r\n    &lt;color name=&quot;purple_700&quot;&gt;#FF3700B3&lt;/color&gt;\r\n    &lt;color name=&quot;teal_200&quot;&gt;#FF03DAC5&lt;/color&gt;\r\n    &lt;color name=&quot;teal_700&quot;&gt;#FF018786&lt;/color&gt;","title":"How to fix navigation component dependence ERROR?","body":"<p>I had this mistake before when default colors (res/values/colors.xml) were replaced by me in android studio project. I worked with template Navigation Drawer Views Activity on the startup screen. By adding default colors into res/values/colors.xml I solved this problem</p>\n<pre><code>&lt;color name=&quot;purple_200&quot;&gt;#FFBB86FC&lt;/color&gt;\n&lt;color name=&quot;purple_500&quot;&gt;#FF6200EE&lt;/color&gt;\n&lt;color name=&quot;purple_700&quot;&gt;#FF3700B3&lt;/color&gt;\n&lt;color name=&quot;teal_200&quot;&gt;#FF03DAC5&lt;/color&gt;\n&lt;color name=&quot;teal_700&quot;&gt;#FF018786&lt;/color&gt;\n</code></pre>\n"}],"owner":{"account_id":29040510,"reputation":1,"user_id":22245460,"display_name":"funny android"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":980,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695216057,"creation_date":1695004519,"question_id":77124294,"body_markdown":"When I sync, nothing is happen. But I run my app, having an error. This is my build.gradle(app)\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;org.jetbrains.kotlin.android&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.newsapp&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.newsapp&quot;\r\n        minSdk 21\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.core:core-ktx:1.7.0&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation(&quot;androidx.fragment:fragment-ktx:1.6.1&quot;)\r\n    implementation(&quot;androidx.navigation:navigation-fragment-ktx:2.7.2&quot;)\r\n    implementation(&quot;androidx.navigation:navigation-ui-ktx:2.7.2&quot;)\r\n}\r\n```\r\n\r\nAnd this is my build.gradle (project)\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.4.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.4.2&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.0&#39; apply false\r\n}\r\n\r\n```\r\n\r\nWhen I run app, have this error:\r\n\r\n8 issues were found when checking AAR metadata:\r\n\r\n 1.  Dependency &#39;androidx.navigation:navigation-common:2.7.2&#39; requires libraries and applications that depend on it to compile against version 34 or later of the Android APIs.\r\n:app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  2.  Dependency &#39;androidx.navigation:navigation-common-ktx:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  3.  Dependency &#39;androidx.navigation:navigation-runtime:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  4.  Dependency &#39;androidx.navigation:navigation-runtime-ktx:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  5.  Dependency &#39;androidx.navigation:navigation-fragment:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  6.  Dependency &#39;androidx.navigation:navigation-fragment-ktx:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  7.  Dependency &#39;androidx.navigation:navigation-ui-ktx:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\n\r\n  8.  Dependency &#39;androidx.navigation:navigation-ui:2.7.2&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 7.4.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdkVerion of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdkVersion (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdkVersion (which opts the app in to new runtime behavior) and\r\n      minSdkVersion (which determines which devices the app can be installed\r\n      on).\r\nHow to fix this error? Thanks.\r\n\r\n\r\nI want to fix this problem, I tried fix this but nothing is happen.","title":"How to fix navigation component dependence ERROR?","body":"<p>When I sync, nothing is happen. But I run my app, having an error. This is my build.gradle(app)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n}\n\nandroid {\n    namespace 'com.example.newsapp'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.newsapp&quot;\n        minSdk 21\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.core:core-ktx:1.7.0'\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation(&quot;androidx.fragment:fragment-ktx:1.6.1&quot;)\n    implementation(&quot;androidx.navigation:navigation-fragment-ktx:2.7.2&quot;)\n    implementation(&quot;androidx.navigation:navigation-ui-ktx:2.7.2&quot;)\n}\n</code></pre>\n<p>And this is my build.gradle (project)</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.4.2' apply false\n    id 'com.android.library' version '7.4.2' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.0' apply false\n}\n\n</code></pre>\n<p>When I run app, have this error:</p>\n<p>8 issues were found when checking AAR metadata:</p>\n<ol>\n<li><p>Dependency 'androidx.navigation:navigation-common:2.7.2' requires libraries and applications that depend on it to compile against version 34 or later of the Android APIs.\n:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-common-ktx:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-runtime:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-runtime-ktx:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-fragment:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-fragment-ktx:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-ui-ktx:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).</p>\n</li>\n<li><p>Dependency 'androidx.navigation:navigation-ui:2.7.2' requires libraries and applications that\ndepend on it to compile against version 34 or later of the\nAndroid APIs.</p>\n<p>:app is currently compiled against android-33.</p>\n<p>Also, the maximum recommended compile SDK version for Android Gradle\nplugin 7.4.2 is 33.</p>\n<p>Recommended action: Update this project's version of the Android Gradle\nplugin to one that supports 34, then update this project to use\ncompileSdkVerion of at least 34.</p>\n<p>Note that updating a library or application's compileSdkVersion (which\nallows newer APIs to be used) can be done separately from updating\ntargetSdkVersion (which opts the app in to new runtime behavior) and\nminSdkVersion (which determines which devices the app can be installed\non).\nHow to fix this error? Thanks.</p>\n</li>\n</ol>\n<p>I want to fix this problem, I tried fix this but nothing is happen.</p>\n"},{"tags":["java","mysql","hibernate","hibernate-criteria"],"comments":[{"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"score":1,"creation_date":1565512708,"post_id":57446747,"comment_id":101372529,"body_markdown":"You need another table where you can store multiple rows for each user, with one hobby per row. This is the way to store a many-to-many relationship in a relational database. Then you don&#39;t need to use FIND_IN_SET() or worry about which character separates hobbies.","body":"You need another table where you can store multiple rows for each user, with one hobby per row. This is the way to store a many-to-many relationship in a relational database. Then you don&#39;t need to use FIND_IN_SET() or worry about which character separates hobbies."},{"owner":{"account_id":9582832,"reputation":469,"user_id":7116745,"accept_rate":29,"display_name":"Srinivas Lakshman"},"score":0,"creation_date":1565609911,"post_id":57446747,"comment_id":101394257,"body_markdown":"Thank you Bill for the answer. Since having multiple tables is not an option, we are stuck with this. Not sure how to solve on this.","body":"Thank you Bill for the answer. Since having multiple tables is not an option, we are stuck with this. Not sure how to solve on this."},{"owner":{"account_id":4702873,"reputation":384,"user_id":3805978,"accept_rate":71,"display_name":"jfzr"},"score":0,"creation_date":1585353355,"post_id":57446747,"comment_id":107738750,"body_markdown":"@SrinivasLakshman any new on this?","body":"@SrinivasLakshman any new on this?"}],"answers":[{"tags":[],"owner":{"account_id":881423,"reputation":1631,"user_id":263116,"display_name":"Konstantin Triger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565620098,"creation_date":1565516435,"answer_id":57448904,"question_id":57446747,"body_markdown":"If your goal is building [query dynamically][1] and not using Criteria API, you may build it with [FluentJPA][2], like in this:\r\n\r\n```java\r\npublic List&lt;UserInfo&gt; filterByHobbies(List&lt;String&gt; hobbies) {\r\n\r\n    Function1&lt;UserInfo, Boolean&gt; dynamicFilter = buildOr(hobbies);\r\n\r\n    FluentQuery query = FluentJPA.SQL((UserInfo user) -&gt; {\r\n        SELECT(user);\r\n        FROM(user);\r\n\r\n        WHERE(dynamicFilter.apply(hobbies);\r\n    });\r\n\r\n    return query.createQuery(getEntityManager(), UserInfo.class).getResultList();\r\n}\r\n\r\nprivate Function1&lt;UserInfo, Boolean&gt; buildOr(List&lt;String&gt; hobbies) {\r\n    Function1&lt;UserInfo, Boolean&gt; criteria = Function1.FALSE();\r\n\r\n    for (String hobby : hobbies)\r\n        criteria = criteria.or(u -&gt; FIND_IN_SET(parameter(hobby),\r\n                                                u.getHobbies().replace(&#39;|&#39;, &#39;,&#39;)) &gt; 0);\r\n\r\n    return criteria;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/streamx-co/FluentJPA/wiki/Dynamic-Queries\r\n  [2]: https://github.com/streamx-co/FluentJPA\r\n  [3]: https://stackoverflow.com/a/57443936","title":"Hibernate Criteria using FIND_IN_SET","body":"<p>If your goal is building <a href=\"https://github.com/streamx-co/FluentJPA/wiki/Dynamic-Queries\" rel=\"nofollow noreferrer\">query dynamically</a> and not using Criteria API, you may build it with <a href=\"https://github.com/streamx-co/FluentJPA\" rel=\"nofollow noreferrer\">FluentJPA</a>, like in this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;UserInfo&gt; filterByHobbies(List&lt;String&gt; hobbies) {\n\n    Function1&lt;UserInfo, Boolean&gt; dynamicFilter = buildOr(hobbies);\n\n    FluentQuery query = FluentJPA.SQL((UserInfo user) -&gt; {\n        SELECT(user);\n        FROM(user);\n\n        WHERE(dynamicFilter.apply(hobbies);\n    });\n\n    return query.createQuery(getEntityManager(), UserInfo.class).getResultList();\n}\n\nprivate Function1&lt;UserInfo, Boolean&gt; buildOr(List&lt;String&gt; hobbies) {\n    Function1&lt;UserInfo, Boolean&gt; criteria = Function1.FALSE();\n\n    for (String hobby : hobbies)\n        criteria = criteria.or(u -&gt; FIND_IN_SET(parameter(hobby),\n                                                u.getHobbies().replace('|', ',')) &gt; 0);\n\n    return criteria;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4702873,"reputation":384,"user_id":3805978,"accept_rate":71,"display_name":"jfzr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585353484,"creation_date":1585353484,"answer_id":60895696,"question_id":57446747,"body_markdown":"This is an option in some cases:\r\n\r\n    xxxRepository.findAll((root, query, cb) -&gt; {\r\n   \r\n       List&lt;Predicate&gt; predicateList = new ArrayList&lt;&gt;();\r\n        if (StringUtils.isNotBlank(param)) {\r\n            Expression&lt;Integer&gt; findInSetFun = cb.function(&quot;FIND_IN_SET&quot;, Integer.class,             \r\n                                cb.literal(param), root.get(&quot;targetColName&quot;));\r\n \r\n            predicateList .add(cb.greaterThan(findInSetFun, 0));\r\n        }\r\n    }, pageable);\r\n\r\n","title":"Hibernate Criteria using FIND_IN_SET","body":"<p>This is an option in some cases:</p>\n\n<pre><code>xxxRepository.findAll((root, query, cb) -&gt; {\n\n   List&lt;Predicate&gt; predicateList = new ArrayList&lt;&gt;();\n    if (StringUtils.isNotBlank(param)) {\n        Expression&lt;Integer&gt; findInSetFun = cb.function(\"FIND_IN_SET\", Integer.class,             \n                            cb.literal(param), root.get(\"targetColName\"));\n\n        predicateList .add(cb.greaterThan(findInSetFun, 0));\n    }\n}, pageable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26018697,"reputation":1,"user_id":19726685,"display_name":"Santosh Suryavanshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664517845,"creation_date":1664041180,"answer_id":73839341,"question_id":57446747,"body_markdown":"```\r\nExpression&lt;Integer&gt; function = criteriaBuilder.function(&quot;find_in_set&quot;, Integer.class,\r\n                    criteriaBuilder.literal(warehouseList), root.get(&quot;sWarehouseIdList&quot;));\r\n            \r\nPredicate sWarehouseIdList = criteriaBuilder.greaterThan(function, 0);\r\n            predicateList.add(sWarehouseIdList);\r\n```","title":"Hibernate Criteria using FIND_IN_SET","body":"<pre><code>Expression&lt;Integer&gt; function = criteriaBuilder.function(&quot;find_in_set&quot;, Integer.class,\n                    criteriaBuilder.literal(warehouseList), root.get(&quot;sWarehouseIdList&quot;));\n            \nPredicate sWarehouseIdList = criteriaBuilder.greaterThan(function, 0);\n            predicateList.add(sWarehouseIdList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11720630,"reputation":27,"user_id":8579706,"display_name":"Sharun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695215955,"creation_date":1695215506,"answer_id":77142809,"question_id":57446747,"body_markdown":"    \r\n    CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n        CriteriaQuery&lt;Entity&gt; cq = cb.createQuery(Entity.class);\r\n        Root&lt;Entity&gt; contentMediaRoot = cq.from(Entity.class);\r\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n                \r\n        predicates.add(cb.gt(cb.function(&quot;FIND_IN_SET&quot;,\r\n                                            Integer.class,\r\n                 criteriaBuilder.function(\r\n                &quot;REPLACE&quot;,\r\n                String.class,\r\n                cb.literal(searchDTO.getEnum().name()),\r\n                criteriaBuilder.literal(&quot;|&quot;),\r\n                criteriaBuilder.literal(&quot;,&quot;)),\r\n                 contentMediaRoot.get(&quot;hobbies&quot;)\r\n                     ), 0\r\n                  ));\r\n        cq.where(predicates.toArray(new Predicate[0]));\r\n        TypedQuery&lt;Entity&gt; query = entityManager.createQuery(cq);\r\n        List&lt;Entity&gt; contentMediaList = query.getResultList();\r\n\r\n\r\n\r\n&gt; The answer has already been provided above, but I believe it may not\r\n&gt; be complete. To provide a more comprehensive solution: I used a\r\n&gt; List&lt;Enum&gt; mapped to a varchar field in the database as a\r\n&gt; comma-separated string. However, it&#39;s advisable not to use this\r\n&gt; approach. Instead, consider saving the enum values in a separate table\r\n&gt; and establishing a mapping relation. This way, you can easily search\r\n&gt; within that mapping.\r\n\r\nMySQL FIND_IN_SET() function is a built-in MySQL string function responsible for discovering the position of a given specific string provided in a list of strings separated by a comma \r\nPLEASE NOTE: Please ensure that you adjust the SQL function and syntax to match your database system if you&#39;re not using MySQL, as different databases may have different functions for this purpose.","title":"Hibernate Criteria using FIND_IN_SET","body":"<pre><code>CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n    CriteriaQuery&lt;Entity&gt; cq = cb.createQuery(Entity.class);\n    Root&lt;Entity&gt; contentMediaRoot = cq.from(Entity.class);\n    List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            \n    predicates.add(cb.gt(cb.function(&quot;FIND_IN_SET&quot;,\n                                        Integer.class,\n             criteriaBuilder.function(\n            &quot;REPLACE&quot;,\n            String.class,\n            cb.literal(searchDTO.getEnum().name()),\n            criteriaBuilder.literal(&quot;|&quot;),\n            criteriaBuilder.literal(&quot;,&quot;)),\n             contentMediaRoot.get(&quot;hobbies&quot;)\n                 ), 0\n              ));\n    cq.where(predicates.toArray(new Predicate[0]));\n    TypedQuery&lt;Entity&gt; query = entityManager.createQuery(cq);\n    List&lt;Entity&gt; contentMediaList = query.getResultList();\n</code></pre>\n<blockquote>\n<p>The answer has already been provided above, but I believe it may not\nbe complete. To provide a more comprehensive solution: I used a\nList mapped to a varchar field in the database as a\ncomma-separated string. However, it's advisable not to use this\napproach. Instead, consider saving the enum values in a separate table\nand establishing a mapping relation. This way, you can easily search\nwithin that mapping.</p>\n</blockquote>\n<p>MySQL FIND_IN_SET() function is a built-in MySQL string function responsible for discovering the position of a given specific string provided in a list of strings separated by a comma\nPLEASE NOTE: Please ensure that you adjust the SQL function and syntax to match your database system if you're not using MySQL, as different databases may have different functions for this purpose.</p>\n"}],"owner":{"account_id":9582832,"reputation":469,"user_id":7116745,"accept_rate":29,"display_name":"Srinivas Lakshman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1695215955,"creation_date":1565487035,"question_id":57446747,"body_markdown":"I have a below requirement in my project:  \r\n  (1) Request object to an API which is off list type (of strings).  \r\n  (2) We are using Hibernate Criteria to fetch the resultSet from the mysql database.  \r\n  (3) One of the columns is having Pipe delimited values.  \r\n  (4) We have to fetch the rows against **each** of the request object&#39;s values.\r\n\r\n\r\n    Table: user_info  \r\n    -----------------------------------------------------------\r\n     user_id       user_name    .. .. .. ..   hobbies\r\n    -----------------------------------------------------------\r\n     101           johnSmith    .. .. .. ..   Traveling|Painting|Gardening\r\n     102           tomWatch     .. .. .. ..   Gardening|Reading|Fishing\r\n     103           robertPatt   .. .. .. ..   Dancing|Gardening|Swimming|Blogging\r\n     104           julieAdams   .. .. .. ..   Bicycling|Fishing|Socializing\r\n\r\n     JSON Request object:\r\n     {\r\n       searchParams : {\r\n           hobbies : [ \r\n             &quot;Gardening&quot;,\r\n             &quot;Fishing&quot;,\r\n             &quot;Reading&quot;\r\n           ],\r\n         ..\r\n         ..\r\n         ..\r\n       }\r\n      }\r\n\r\n\r\n      Java Code \r\n\r\n\r\n      if(!CollectionUtils.isEmpty(searchParams.getHobbies())) {\r\n            List&lt;String&gt; reqHobbies = searchParameters.getHobbies();\r\n            Disjunction disjunction = Restrictions.disjunction();\r\n            for(String hobby : reqHobbies) {\r\n                Criterion criterion = Restrictions.like(&quot;hobbies&quot;, &quot;|&quot; + hobby + &quot;|&quot;);\r\n                disjunction.add(criterion);\r\n            }\r\n            criteria.add(disjunction);\r\n        }\r\n\r\n   This query will not work as the starting of the value (from table) is not having &quot;|&quot; symbol..\r\n   \r\n   If I modify the critieria API to generate the query in the following fashion, \r\n\r\n    select * from user_info\r\n    where hobbies like &#39;%Gardening|%&#39; or hobbies like &#39;%Fishing|%&#39; or hobbies like &#39;%Reading|%&#39; \r\n     or hobbies like &#39;%|Gardening|%&#39; or hobbies like &#39;%|Fishing|%&#39; or hobbies like &#39;%|Reading|%&#39; \r\n     or hobbies like &#39;%|Gardening%&#39; or hobbies like &#39;%|Fishing%&#39; or hobbies like &#39;%|Reading%&#39;;\r\n\r\n   This design also has a flaw. The only way to solve this by using FIND_IN_SET. \r\n  \r\n   Mysql query:  \r\n   \r\n    select * from user_info \r\n    where hobbies find_in_set(&#39;Gardening&#39;, replace(hobbies, &#39;|&#39;, &#39;,&#39;)) \r\n    or hobbies find_in_set(&#39;Fishing&#39;, replace(hobbies, &#39;|&#39;, &#39;,&#39;))\r\n    or hobbies find_in_set(&#39;Reading&#39;, replace(hobbies, &#39;|&#39;, &#39;,&#39;));\r\n\r\n  How to create a find_in_set query using Hibernate Criteria? Using @Formula ?","title":"Hibernate Criteria using FIND_IN_SET","body":"<p>I have a below requirement in my project:<br>\n  (1) Request object to an API which is off list type (of strings).<br>\n  (2) We are using Hibernate Criteria to fetch the resultSet from the mysql database.<br>\n  (3) One of the columns is having Pipe delimited values.<br>\n  (4) We have to fetch the rows against <strong>each</strong> of the request object's values.</p>\n\n<pre><code>Table: user_info  \n-----------------------------------------------------------\n user_id       user_name    .. .. .. ..   hobbies\n-----------------------------------------------------------\n 101           johnSmith    .. .. .. ..   Traveling|Painting|Gardening\n 102           tomWatch     .. .. .. ..   Gardening|Reading|Fishing\n 103           robertPatt   .. .. .. ..   Dancing|Gardening|Swimming|Blogging\n 104           julieAdams   .. .. .. ..   Bicycling|Fishing|Socializing\n\n JSON Request object:\n {\n   searchParams : {\n       hobbies : [ \n         \"Gardening\",\n         \"Fishing\",\n         \"Reading\"\n       ],\n     ..\n     ..\n     ..\n   }\n  }\n\n\n  Java Code \n\n\n  if(!CollectionUtils.isEmpty(searchParams.getHobbies())) {\n        List&lt;String&gt; reqHobbies = searchParameters.getHobbies();\n        Disjunction disjunction = Restrictions.disjunction();\n        for(String hobby : reqHobbies) {\n            Criterion criterion = Restrictions.like(\"hobbies\", \"|\" + hobby + \"|\");\n            disjunction.add(criterion);\n        }\n        criteria.add(disjunction);\n    }\n</code></pre>\n\n<p>This query will not work as the starting of the value (from table) is not having \"|\" symbol..</p>\n\n<p>If I modify the critieria API to generate the query in the following fashion, </p>\n\n<pre><code>select * from user_info\nwhere hobbies like '%Gardening|%' or hobbies like '%Fishing|%' or hobbies like '%Reading|%' \n or hobbies like '%|Gardening|%' or hobbies like '%|Fishing|%' or hobbies like '%|Reading|%' \n or hobbies like '%|Gardening%' or hobbies like '%|Fishing%' or hobbies like '%|Reading%';\n</code></pre>\n\n<p>This design also has a flaw. The only way to solve this by using FIND_IN_SET. </p>\n\n<p>Mysql query:  </p>\n\n<pre><code>select * from user_info \nwhere hobbies find_in_set('Gardening', replace(hobbies, '|', ',')) \nor hobbies find_in_set('Fishing', replace(hobbies, '|', ','))\nor hobbies find_in_set('Reading', replace(hobbies, '|', ','));\n</code></pre>\n\n<p>How to create a find_in_set query using Hibernate Criteria? Using @Formula ?</p>\n"},{"tags":["java","oracle","plsql"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1694941833,"post_id":77121084,"comment_id":135955487,"body_markdown":"Of course, you started with a very simple &quot;Hello World&quot; test to check that you can successfully call Java code from PL/SQL?","body":"Of course, you started with a very simple &quot;Hello World&quot; test to check that you can successfully call Java code from PL/SQL?"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1694941944,"post_id":77121084,"comment_id":135955497,"body_markdown":"And beware that Java `long` is an integer while Oracle `long` is a string!","body":"And beware that Java <code>long</code> is an integer while Oracle <code>long</code> is a string!"}],"answers":[{"tags":[],"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694944509,"creation_date":1694944509,"answer_id":77121309,"question_id":77121084,"body_markdown":"You want:\r\n\r\n - In Java, `long` is a numeric data-type but in Oracle `LONG` is a (legacy) text data-type; so in the Oracle function you want `NUMBER` not `LONG` as the data-type.\r\n - the final argument and the return type should be `java.lang.String` (note the capital letter) and not `string`.\r\n\r\nLike this:\r\n\r\n```lang-sql\r\nCREATE AND COMPILE JAVA SOURCE NAMED IdentifyFutronic AS\r\npublic class FPIdentifyFutronic {\r\n    public static String FPIdentify(\r\n      long FPtemplate,\r\n      long T1,\r\n      long T2,\r\n      long T3,\r\n      String username\r\n    ) {\r\n        return &quot;Do stuff&quot;;\r\n    }\r\n}\r\n```\r\n\r\nThen:\r\n\r\n```lang-sql\r\nCREATE OR REPLACE FUNCTION identify_FP (\r\n  FPtemplate NUMBER,\r\n  T1         NUMBER,\r\n  T2         NUMBER,\r\n  T3         NUMBER,\r\n  username   VARCHAR2\r\n) RETURN VARCHAR2\r\n  AS LANGUAGE JAVA NAME\r\n    &#39;FPIdentifyFutronic.FPIdentify(\r\n      long,\r\n      long,\r\n      long,\r\n      long,\r\n      java.lang.String\r\n    ) return java.lang.String&#39;;\r\n/\r\n```\r\n\r\nThen:\r\n\r\n```lang-sql\r\ndeclare\r\n  vOut varchar2(4000);\r\nbegin\r\n  vOut := identify_FP(1, 2, 3, 4, &#39;testjs5&#39;);\r\n  dbms_output.put_line(vOut);\r\nend;\r\n/\r\n```\r\n\r\nOutputs:\r\n\r\n&gt; ```lang-none\r\n&gt; Do stuff\r\n&gt; ```\r\n\r\n[fiddle](https://dbfiddle.uk/y9gZblnB)","title":"Using fingerprint device in pl/sql by java","body":"<p>You want:</p>\n<ul>\n<li>In Java, <code>long</code> is a numeric data-type but in Oracle <code>LONG</code> is a (legacy) text data-type; so in the Oracle function you want <code>NUMBER</code> not <code>LONG</code> as the data-type.</li>\n<li>the final argument and the return type should be <code>java.lang.String</code> (note the capital letter) and not <code>string</code>.</li>\n</ul>\n<p>Like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE AND COMPILE JAVA SOURCE NAMED IdentifyFutronic AS\npublic class FPIdentifyFutronic {\n    public static String FPIdentify(\n      long FPtemplate,\n      long T1,\n      long T2,\n      long T3,\n      String username\n    ) {\n        return &quot;Do stuff&quot;;\n    }\n}\n</code></pre>\n<p>Then:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE OR REPLACE FUNCTION identify_FP (\n  FPtemplate NUMBER,\n  T1         NUMBER,\n  T2         NUMBER,\n  T3         NUMBER,\n  username   VARCHAR2\n) RETURN VARCHAR2\n  AS LANGUAGE JAVA NAME\n    'FPIdentifyFutronic.FPIdentify(\n      long,\n      long,\n      long,\n      long,\n      java.lang.String\n    ) return java.lang.String';\n/\n</code></pre>\n<p>Then:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>declare\n  vOut varchar2(4000);\nbegin\n  vOut := identify_FP(1, 2, 3, 4, 'testjs5');\n  dbms_output.put_line(vOut);\nend;\n/\n</code></pre>\n<p>Outputs:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>Do stuff\n</code></pre>\n</blockquote>\n<p><a href=\"https://dbfiddle.uk/y9gZblnB\" rel=\"nofollow noreferrer\">fiddle</a></p>\n"}],"owner":{"account_id":28796662,"reputation":11,"user_id":22054648,"display_name":"nasim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695215809,"creation_date":1694940094,"question_id":77121084,"body_markdown":"I am trying to use fingerprint device in pl/sql.\r\nI was able to save the fingerprint in Oracle database, now I want to identify this fingerprint.\r\nFor this, the manufacturer has provided me with the sdk that I want to use its Java codes.\r\nFor this, I wrote a Java code as follows:\r\n\r\n    import java.sql.*;\r\n    import oracle.jdbc.*;\r\n    import java.awt.*;\r\n    import java.awt.image.*;\r\n    import java.io.*;\r\n    import javax.imageio.*;\r\n    import javax.swing.*;\r\n    import com.futronic.SDKHelper.*;\r\n    import java.util.Base64;\r\n    import java.util.Vector;\r\n    \r\n    \r\n    public class MainForm \r\n    {\r\n    \r\n        public static String OnGetBaseTemplateComplete(String FPtemplate)\r\n        {\r\n            StringBuffer szMessage = new StringBuffer();\r\n            \r\n            String StrTemplate = FPtemplate;\r\n            byte[] DecodeTemplate = Base64.getDecoder().decode(StrTemplate);\r\n            m_Operation = new FutronicIdentification();\r\n            ((FutronicIdentification) m_Operation).Farn(245);\r\n            ((FutronicIdentification) m_Operation).BaseTemplate(DecodeTemplate);    \r\n            \r\n    \r\n                Vector&lt;DbRecord&gt; Users = (Vector&lt;DbRecord&gt;)m_OperationObj;\r\n                FtrIdentifyRecord[] rgRecords = new FtrIdentifyRecord[ Users.size() ];\r\n                for( int iUsers = 0; iUsers &lt; Users.size(); iUsers++ )\r\n                    rgRecords[iUsers] = Users.get( iUsers ).getFtrIdentifyRecord();\r\n    \r\n                FtrIdentifyResult result = new FtrIdentifyResult();\r\n                \r\n                int nResult = ((FutronicIdentification)m_Operation).Identification(rgRecords, result);\r\n                if (nResult == FutronicSdkBase.RETCODE_OK)\r\n                {\r\n                    szMessage.append(&quot;Identification process complete. User: &quot;);\r\n                    if( result.m_Index != -1 )\r\n                        szMessage.append(Users.get( result.m_Index ).getUserName() );\r\n                    else\r\n                        szMessage.append(&quot;not found&quot;);\r\n                } else {\r\n                    szMessage.append( &quot;Identification failed.&quot; );\r\n                    szMessage.append( FutronicSdkBase.SdkRetCode2Message( nResult ) );\r\n                }\r\n    \r\n            \r\n            String StrMessage = szMessage.toString();\r\n            \r\n            return StrMessage;\r\n    \r\n        }\r\n    \r\n    \r\n        /**\r\n         * Contain reference for current operation object\r\n         */\r\n        private FutronicSdkBase m_Operation;\r\n        \r\n\r\n        private Object m_OperationObj;       \r\n    }\r\n\r\nBut the problem is with functions defined in other Java files and I don&#39;t know how to define this binding for PL/SQL.\r\nFor example code\r\n\r\n    FtrIdentifyResult result = new FtrIdentifyResult();\r\n\r\nFtrIdentifyResult itself is a separate Java file that has functions and this function is also defined. FutronicIdentification and Identification and... also.\r\n\r\nor in line\r\n\r\n    private FutronicSdkBase m_Operation\r\n\r\nA variable of type FutronicSdkBase is defined, where FutronicSdkBase is a separate Java file with functions. Now how do I define this for pl/sql?","title":"Using fingerprint device in pl/sql by java","body":"<p>I am trying to use fingerprint device in pl/sql.\nI was able to save the fingerprint in Oracle database, now I want to identify this fingerprint.\nFor this, the manufacturer has provided me with the sdk that I want to use its Java codes.\nFor this, I wrote a Java code as follows:</p>\n<pre><code>import java.sql.*;\nimport oracle.jdbc.*;\nimport java.awt.*;\nimport java.awt.image.*;\nimport java.io.*;\nimport javax.imageio.*;\nimport javax.swing.*;\nimport com.futronic.SDKHelper.*;\nimport java.util.Base64;\nimport java.util.Vector;\n\n\npublic class MainForm \n{\n\n    public static String OnGetBaseTemplateComplete(String FPtemplate)\n    {\n        StringBuffer szMessage = new StringBuffer();\n        \n        String StrTemplate = FPtemplate;\n        byte[] DecodeTemplate = Base64.getDecoder().decode(StrTemplate);\n        m_Operation = new FutronicIdentification();\n        ((FutronicIdentification) m_Operation).Farn(245);\n        ((FutronicIdentification) m_Operation).BaseTemplate(DecodeTemplate);    \n        \n\n            Vector&lt;DbRecord&gt; Users = (Vector&lt;DbRecord&gt;)m_OperationObj;\n            FtrIdentifyRecord[] rgRecords = new FtrIdentifyRecord[ Users.size() ];\n            for( int iUsers = 0; iUsers &lt; Users.size(); iUsers++ )\n                rgRecords[iUsers] = Users.get( iUsers ).getFtrIdentifyRecord();\n\n            FtrIdentifyResult result = new FtrIdentifyResult();\n            \n            int nResult = ((FutronicIdentification)m_Operation).Identification(rgRecords, result);\n            if (nResult == FutronicSdkBase.RETCODE_OK)\n            {\n                szMessage.append(&quot;Identification process complete. User: &quot;);\n                if( result.m_Index != -1 )\n                    szMessage.append(Users.get( result.m_Index ).getUserName() );\n                else\n                    szMessage.append(&quot;not found&quot;);\n            } else {\n                szMessage.append( &quot;Identification failed.&quot; );\n                szMessage.append( FutronicSdkBase.SdkRetCode2Message( nResult ) );\n            }\n\n        \n        String StrMessage = szMessage.toString();\n        \n        return StrMessage;\n\n    }\n\n\n    /**\n     * Contain reference for current operation object\n     */\n    private FutronicSdkBase m_Operation;\n    \n\n    private Object m_OperationObj;       \n}\n</code></pre>\n<p>But the problem is with functions defined in other Java files and I don't know how to define this binding for PL/SQL.\nFor example code</p>\n<pre><code>FtrIdentifyResult result = new FtrIdentifyResult();\n</code></pre>\n<p>FtrIdentifyResult itself is a separate Java file that has functions and this function is also defined. FutronicIdentification and Identification and... also.</p>\n<p>or in line</p>\n<pre><code>private FutronicSdkBase m_Operation\n</code></pre>\n<p>A variable of type FutronicSdkBase is defined, where FutronicSdkBase is a separate Java file with functions. Now how do I define this for pl/sql?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695122144,"creation_date":1695122144,"answer_id":77134059,"question_id":77133761,"body_markdown":"The Kafka consumer keeps track of offsets in-memory, without resorting to the offsets saved on the cluster. The cluster offsets are only used when the consumer is connecting (or otherwise doesn&#39;t know the offset).\r\n\r\nYou need to either retry in-memory, or manually `seek()` the consumer to the previous position.","title":"Use kafkaListener with syncCommit, but they not work","body":"<p>The Kafka consumer keeps track of offsets in-memory, without resorting to the offsets saved on the cluster. The cluster offsets are only used when the consumer is connecting (or otherwise doesn't know the offset).</p>\n<p>You need to either retry in-memory, or manually <code>seek()</code> the consumer to the previous position.</p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695215716,"creation_date":1695215716,"answer_id":77142830,"question_id":77133761,"body_markdown":"Throw an exception and the default error handler will perform the seek and redeliver the message; you can customize the retry count and delay between retries.\r\n\r\nSee https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling","title":"Use kafkaListener with syncCommit, but they not work","body":"<p>Throw an exception and the default error handler will perform the seek and redeliver the message; you can customize the retry count and delay between retries.</p>\n<p>See <a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling</a></p>\n"}],"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77134059,"answer_count":2,"score":0,"last_activity_date":1695215716,"creation_date":1695119358,"question_id":77133761,"body_markdown":"I have an application that listens to a **Kafka** topic and reads 1 message from it in 1 thread. After reading a message, there is a certain logic, during which there are two options - everything is successful and a commit occurs call method *...acknowledge()* to offset the offset and move on to the next message, or everything is unsuccessful and this message must be read again and the offset is not committed (*...acknowledge()* is not called)\r\nBut now for some reason I can’t read the same message and always move on to the next one, although I don’t call *...acknowledge()* and it seems like the offset for my *groupId* should be on the same message.\r\n\r\nI&#39;m using spring-kafka and the following settings are specified:\r\n\r\n    spring.kafka.consumer.enable-auto-commit=false\r\n    spring.kafka.consumer.auto-offset-reset=earliest\r\n    spring.kafka.consumer.max-poll-records=1\r\n\r\nAnd I programmatically set the settings:\r\n\r\n    ...setGroupId(&quot;test&quot;);\r\n    ...setSyncCommits(true);\r\n    ...setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\r\n    ...setConcurrency(1);","title":"Use kafkaListener with syncCommit, but they not work","body":"<p>I have an application that listens to a <strong>Kafka</strong> topic and reads 1 message from it in 1 thread. After reading a message, there is a certain logic, during which there are two options - everything is successful and a commit occurs call method <em>...acknowledge()</em> to offset the offset and move on to the next message, or everything is unsuccessful and this message must be read again and the offset is not committed (<em>...acknowledge()</em> is not called)\nBut now for some reason I can’t read the same message and always move on to the next one, although I don’t call <em>...acknowledge()</em> and it seems like the offset for my <em>groupId</em> should be on the same message.</p>\n<p>I'm using spring-kafka and the following settings are specified:</p>\n<pre><code>spring.kafka.consumer.enable-auto-commit=false\nspring.kafka.consumer.auto-offset-reset=earliest\nspring.kafka.consumer.max-poll-records=1\n</code></pre>\n<p>And I programmatically set the settings:</p>\n<pre><code>...setGroupId(&quot;test&quot;);\n...setSyncCommits(true);\n...setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\n...setConcurrency(1);\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","recursive-query"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695215784,"post_id":77142558,"comment_id":135994477,"body_markdown":"can you also provide some test data ? i mean some `iam.ice_folder` rows, and also expected output","body":"can you also provide some test data ? i mean some <code>iam.ice_folder</code> rows, and also expected output"},{"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"score":0,"creation_date":1695216743,"post_id":77142558,"comment_id":135994736,"body_markdown":"@AndreiLisa folderId=&quot;flrd-reer-werwer0werwerer&quot; and workspaceId =&quot;wrksp-reer-werwer0werwer=er&quot; and desired output is [&quot;flrd-reer-werwer0werweresdf&quot;, &quot;flrd-reer-wesdsrwerer&quot;]","body":"@AndreiLisa folderId=&quot;flrd-reer-werwer0werwerer&quot; and workspaceId =&quot;wrksp-reer-werwer0werwer=er&quot; and desired output is [&quot;flrd-reer-werwer0werweresdf&quot;, &quot;flrd-reer-wesdsrwerer&quot;]"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1695223105,"post_id":77142558,"comment_id":135996416,"body_markdown":"Just ditch hibernate, it&#39;s awful!. You and your team will be much happier.","body":"Just ditch hibernate, it&#39;s awful!. You and your team will be much happier."},{"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"score":0,"creation_date":1695236417,"post_id":77142558,"comment_id":135999084,"body_markdown":"Which error excatly do you get?","body":"Which error excatly do you get?"},{"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"score":0,"creation_date":1695271140,"post_id":77142558,"comment_id":136002691,"body_markdown":"@SveKamenska I&#39;m not getting any error but when I run the query directly in the database it works its giving 4 records as expected but when I put it in the code its giving empty list","body":"@SveKamenska I&#39;m not getting any error but when I run the query directly in the database it works its giving 4 records as expected but when I put it in the code its giving empty list"},{"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"score":0,"creation_date":1695287529,"post_id":77142558,"comment_id":136005299,"body_markdown":"Have you debug which parameters are passed to the query? Also what is the value of WORKSPACE_ID ? It should be &quot;workspaceId&quot;","body":"Have you debug which parameters are passed to the query? Also what is the value of WORKSPACE_ID ? It should be &quot;workspaceId&quot;"},{"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"score":0,"creation_date":1695288758,"post_id":77142558,"comment_id":136005568,"body_markdown":"@SveKamenska yes I&#39;ve checked, and everything is correct.","body":"@SveKamenska yes I&#39;ve checked, and everything is correct."},{"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"score":0,"creation_date":1695318504,"post_id":77142558,"comment_id":136011909,"body_markdown":"Then another 2 questions: 1. Do you run query against the same DB you are checking directly? Because maybe in you settings you use another DB which is empty, for example. 2. Are you sure that list is converted correctly? By default the result is returned as type List&lt;Object[]&gt; not List&lt;String&gt;, so maybe it is not converted correctly","body":"Then another 2 questions: 1. Do you run query against the same DB you are checking directly? Because maybe in you settings you use another DB which is empty, for example. 2. Are you sure that list is converted correctly? By default the result is returned as type List&lt;Object[]&gt; not List&lt;String&gt;, so maybe it is not converted correctly"},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1695490327,"post_id":77142558,"comment_id":136032643,"body_markdown":"Are you sure you executed exactly the same query directly in the database? A recursive query is supposed to use UNION ALL,  not simple UNION.","body":"Are you sure you executed exactly the same query directly in the database? A recursive query is supposed to use UNION ALL,  not simple UNION."}],"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695215576,"creation_date":1695213751,"question_id":77142558,"body_markdown":"I want to write the below query in hibernate but not getting the desired output, can anybody help me out on this?\r\n\r\n    with recursive FolderHierarchy as (\r\n    select\r\n    \tfolder_id\r\n    from\r\n    \tiam.ice_folder\r\n    where\r\n    \tworkspace_id = &#39;wksc-5cc9a319-86bf-5569-beb8-76f1e9dfc886&#39;\r\n    \tand is_deleted = 0\r\n    \tand folder_id = &#39;fldr-4935a498-322d-5efa-bf2c-790b15b0c5f4&#39;\r\n    union\r\n    select\r\n    \tf.folder_id\r\n    from\r\n    \tiam.ice_folder f\r\n    join FolderHierarchy fh on\r\n    \tf.parent_folder = fh.folder_id\r\n    )\r\n    select\r\n    \tfolder_id\r\n    from\r\n    \tFolderHierarchy;\r\n\r\nThe code I tried is the below but its not working\r\n\r\n    public List&lt;String&gt; getAllNestedFolderIds(String folderId, String workspaceId) {\r\n        String sqlQuery =\r\n            &quot;with recursive FolderHierarchy as (select folder_id from iam.ice_folder where workspace_id = :workspaceId and is_deleted = 0 and folder_id = :folderId union select f.folder_id from iam.ice_folder f join FolderHierarchy fh on f.parent_folder = fh.folder_id) select folder_id from FolderHierarchy&quot;;\r\n        Query query =\r\n            entityManager\r\n                .createNativeQuery(sqlQuery)\r\n                .setParameter(WORKSPACE_ID, workspaceId)\r\n                .setParameter(QueryAttributes.FOLDER_ID, folderId);\r\n        return query.getResultList();\r\n      }","title":"recursion query in hibernate","body":"<p>I want to write the below query in hibernate but not getting the desired output, can anybody help me out on this?</p>\n<pre><code>with recursive FolderHierarchy as (\nselect\n    folder_id\nfrom\n    iam.ice_folder\nwhere\n    workspace_id = 'wksc-5cc9a319-86bf-5569-beb8-76f1e9dfc886'\n    and is_deleted = 0\n    and folder_id = 'fldr-4935a498-322d-5efa-bf2c-790b15b0c5f4'\nunion\nselect\n    f.folder_id\nfrom\n    iam.ice_folder f\njoin FolderHierarchy fh on\n    f.parent_folder = fh.folder_id\n)\nselect\n    folder_id\nfrom\n    FolderHierarchy;\n</code></pre>\n<p>The code I tried is the below but its not working</p>\n<pre><code>public List&lt;String&gt; getAllNestedFolderIds(String folderId, String workspaceId) {\n    String sqlQuery =\n        &quot;with recursive FolderHierarchy as (select folder_id from iam.ice_folder where workspace_id = :workspaceId and is_deleted = 0 and folder_id = :folderId union select f.folder_id from iam.ice_folder f join FolderHierarchy fh on f.parent_folder = fh.folder_id) select folder_id from FolderHierarchy&quot;;\n    Query query =\n        entityManager\n            .createNativeQuery(sqlQuery)\n            .setParameter(WORKSPACE_ID, workspaceId)\n            .setParameter(QueryAttributes.FOLDER_ID, folderId);\n    return query.getResultList();\n  }\n</code></pre>\n"},{"tags":["java","spring","dependency-injection","annotations","spring-annotations"],"comments":[{"owner":{"account_id":6168842,"reputation":6596,"user_id":4807777,"accept_rate":100,"display_name":"Laurentiu L."},"score":0,"creation_date":1433670376,"post_id":30691949,"comment_id":49442934,"body_markdown":"You will need to use spring expression language. A similar question which used list (https://stackoverflow.com/questions/27390363/spring-how-to-inject-an-inline-list-of-strings-using-value-annotation). I am not sure you can do what you want out of the box. This question https://stackoverflow.com/questions/28369458/how-to-fill-hashmap-from-java-property-file-with-spring-value is a bit more to your point. Uses a custom property mapper","body":"You will need to use spring expression language. A similar question which used list (<a href=\"https://stackoverflow.com/questions/27390363/spring-how-to-inject-an-inline-list-of-strings-using-value-annotation\" title=\"spring how to inject an inline list of strings using value annotation\">stackoverflow.com/questions/27390363/&hellip;</a>). I am not sure you can do what you want out of the box. This question <a href=\"https://stackoverflow.com/questions/28369458/how-to-fill-hashmap-from-java-property-file-with-spring-value\" title=\"how to fill hashmap from java property file with spring value\">stackoverflow.com/questions/28369458/&hellip;</a> is a bit more to your point. Uses a custom property mapper"},{"owner":{"account_id":186532,"reputation":13508,"user_id":423991,"accept_rate":91,"display_name":"K Erlandsson"},"score":0,"creation_date":1433670497,"post_id":30691949,"comment_id":49442960,"body_markdown":"What exactly do you want in your map? It seems you also expect some type converstion to a `Pattern`? What kind of `Pattern` class is that?","body":"What exactly do you want in your map? It seems you also expect some type converstion to a <code>Pattern</code>? What kind of <code>Pattern</code> class is that?"},{"owner":{"account_id":1672649,"reputation":5729,"user_id":1538815,"accept_rate":57,"display_name":"yathirigan"},"score":0,"creation_date":1433698464,"post_id":30691949,"comment_id":49451175,"body_markdown":"@Erlandsson this is a RegEx pattern, we will define valid regex pattern strings in the value","body":"@Erlandsson this is a RegEx pattern, we will define valid regex pattern strings in the value"},{"owner":{"account_id":1672649,"reputation":5729,"user_id":1538815,"accept_rate":57,"display_name":"yathirigan"},"score":1,"creation_date":1433699464,"post_id":30691949,"comment_id":49451512,"body_markdown":"@LaurentuiL uin Spring boot, i am able to directly inject a map if the map matches the prefix described at class level but,my problem is the prefix at class level and this attribute level is different","body":"@LaurentuiL uin Spring boot, i am able to directly inject a map if the map matches the prefix described at class level but,my problem is the prefix at class level and this attribute level is different"}],"answers":[{"tags":[],"owner":{"account_id":3750645,"reputation":28034,"user_id":3118209,"accept_rate":93,"display_name":"Arpit Aggarwal"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1433672275,"creation_date":1433672275,"answer_id":30692388,"question_id":30691949,"body_markdown":"You can inject `.properties` as a map in your class using `@Resource` annotation.\r\n\r\nIf you are working with **`XML based configuration`,** then add below bean in your spring configuration file:\r\n   \r\n\r\n     &lt;bean id=&quot;myProperties&quot; class=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;\r\n          &lt;property name=&quot;location&quot; value=&quot;classpath:your.properties&quot;/&gt;\r\n     &lt;/bean&gt;\r\n\r\n**For, Annotation based:**\r\n\r\n    @Bean(name = &quot;myProperties&quot;)\r\n    public static PropertiesFactoryBean mapper() {\r\n            PropertiesFactoryBean bean = new PropertiesFactoryBean();\r\n            bean.setLocation(new ClassPathResource(\r\n                    &quot;your.properties&quot;));\r\n            return bean;\r\n    }\r\n\r\nThen you can pick them up in your application as a Map:\r\n\r\n    @Resource(name = &quot;myProperties&quot;)\r\n    private Map&lt;String, String&gt; myProperties;","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>You can inject <code>.properties</code> as a map in your class using <code>@Resource</code> annotation.</p>\n\n<p>If you are working with <strong><code>XML based configuration</code>,</strong> then add below bean in your spring configuration file:</p>\n\n<pre><code> &lt;bean id=\"myProperties\" class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n      &lt;property name=\"location\" value=\"classpath:your.properties\"/&gt;\n &lt;/bean&gt;\n</code></pre>\n\n<p><strong>For, Annotation based:</strong></p>\n\n<pre><code>@Bean(name = \"myProperties\")\npublic static PropertiesFactoryBean mapper() {\n        PropertiesFactoryBean bean = new PropertiesFactoryBean();\n        bean.setLocation(new ClassPathResource(\n                \"your.properties\"));\n        return bean;\n}\n</code></pre>\n\n<p>Then you can pick them up in your application as a Map:</p>\n\n<pre><code>@Resource(name = \"myProperties\")\nprivate Map&lt;String, String&gt; myProperties;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"down_vote_count":5,"up_vote_count":29,"is_accepted":true,"score":24,"last_activity_date":1433680130,"creation_date":1433676974,"answer_id":30693052,"question_id":30691949,"body_markdown":"I believe Spring Boot supports loading properties maps out of the box with [@ConfigurationProperties][1] annotation.\r\n\r\nAccording that docs you can load properties:\r\n\r\n    my.servers[0]=dev.bar.com\r\n    my.servers[1]=foo.bar.com\r\n\r\ninto bean like this:\r\n\r\n    @ConfigurationProperties(prefix=&quot;my&quot;)\r\n    public class Config {\r\n    \r\n        private List&lt;String&gt; servers = new ArrayList&lt;String&gt;();\r\n    \r\n        public List&lt;String&gt; getServers() {\r\n            return this.servers;\r\n        }\r\n    }\r\n\r\nI used @ConfigurationProperties feature before, but without loading into map. You need to use [@EnableConfigurationProperties annotation][2] to enable this feature. \r\n\r\nCool stuff about this feature is that you can [validate your properties][3].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-loading-yaml\r\n  [2]: http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-typesafe-configuration-properties\r\n  [3]: http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-validation\r\n","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>I believe Spring Boot supports loading properties maps out of the box with <a href=\"http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-loading-yaml\">@ConfigurationProperties</a> annotation.</p>\n\n<p>According that docs you can load properties:</p>\n\n<pre><code>my.servers[0]=dev.bar.com\nmy.servers[1]=foo.bar.com\n</code></pre>\n\n<p>into bean like this:</p>\n\n<pre><code>@ConfigurationProperties(prefix=\"my\")\npublic class Config {\n\n    private List&lt;String&gt; servers = new ArrayList&lt;String&gt;();\n\n    public List&lt;String&gt; getServers() {\n        return this.servers;\n    }\n}\n</code></pre>\n\n<p>I used @ConfigurationProperties feature before, but without loading into map. You need to use <a href=\"http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-typesafe-configuration-properties\">@EnableConfigurationProperties annotation</a> to enable this feature. </p>\n\n<p>Cool stuff about this feature is that you can <a href=\"http://docs.spring.io/spring-boot/docs/1.2.3.RELEASE/reference/htmlsingle/#boot-features-external-config-validation\">validate your properties</a>.</p>\n"},{"tags":[],"owner":{"account_id":200623,"reputation":1931,"user_id":4320274,"display_name":"Michael Rahenkamp"},"down_vote_count":0,"up_vote_count":193,"is_accepted":false,"score":193,"last_activity_date":1466773485,"creation_date":1461329335,"answer_id":36794304,"question_id":30691949,"body_markdown":"You can inject values into a Map from the properties file using the `@Value` annotation like this.\r\n\r\nThe property in the properties file.\r\n\r\n    propertyname={key1:&#39;value1&#39;,key2:&#39;value2&#39;,....}\r\n\r\nIn your code.\r\n\r\n    @Value(&quot;#{${propertyname}}&quot;)  private Map&lt;String,String&gt; propertyname;\r\n\r\nNote the hashtag as part of the annotation.","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>You can inject values into a Map from the properties file using the <code>@Value</code> annotation like this.</p>\n\n<p>The property in the properties file.</p>\n\n<pre><code>propertyname={key1:'value1',key2:'value2',....}\n</code></pre>\n\n<p>In your code.</p>\n\n<pre><code>@Value(\"#{${propertyname}}\")  private Map&lt;String,String&gt; propertyname;\n</code></pre>\n\n<p>Note the hashtag as part of the annotation.</p>\n"},{"tags":[],"owner":{"account_id":290097,"reputation":420,"user_id":591451,"display_name":"Neil Han"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1533744217,"creation_date":1533744217,"answer_id":51751123,"question_id":30691949,"body_markdown":"Here is how we did it. \r\nTwo sample classes as follow:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.kafka.annotation.EnableKafka;\r\n    @EnableKafka\r\n    @Configuration\r\n    @EnableConfigurationProperties(KafkaConsumerProperties.class)\r\n    public class KafkaContainerConfig {\r\n\r\n        @Autowired\r\n        protected KafkaConsumerProperties kafkaConsumerProperties;\r\n\r\n        @Bean\r\n        public ConsumerFactory&lt;String, String&gt; consumerFactory() {\r\n            return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerProperties.getKafkaConsumerConfig());\r\n        }\r\n    ...\r\n\r\n    @Configuration\r\n    @ConfigurationProperties\r\n    public class KafkaConsumerProperties {\r\n        protected Map&lt;String, Object&gt; kafkaConsumerConfig = new HashMap&lt;&gt;();\r\n\r\n        @ConfigurationProperties(&quot;kafkaConsumerConfig&quot;)\r\n        public Map&lt;String, Object&gt; getKafkaConsumerConfig() {\r\n            return (kafkaConsumerConfig);\r\n        }\r\n    ...\r\nTo provide the kafkaConsumer config from a properties file, you can use: mapname[key]=value\r\n\r\n    //application.properties\r\n    kafkaConsumerConfig[bootstrap.servers]=localhost:9092, localhost:9093, localhost:9094\r\n    kafkaConsumerConfig[group.id]=test-consumer-group-local\r\n    kafkaConsumerConfig[value.deserializer]=org.apache.kafka.common.serialization.StringDeserializer\r\n    kafkaConsumerConfig[key.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n\r\nTo provide the kafkaConsumer config from a yaml file, you can use &quot;[key]&quot;: value\r\nIn application.yml file:\r\n\r\n    kafkaConsumerConfig:\r\n      &quot;[bootstrap.servers]&quot;: localhost:9092, localhost:9093, localhost:9094\r\n      &quot;[group.id]&quot;: test-consumer-group-local\r\n      &quot;[value.deserializer]&quot;: org.apache.kafka.common.serialization.StringDeserializer\r\n      &quot;[key.deserializer]&quot;: org.apache.kafka.common.serialization.StringDeserializer\r\n\r\n\r\n","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>Here is how we did it. \nTwo sample classes as follow:</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.annotation.EnableKafka;\n@EnableKafka\n@Configuration\n@EnableConfigurationProperties(KafkaConsumerProperties.class)\npublic class KafkaContainerConfig {\n\n    @Autowired\n    protected KafkaConsumerProperties kafkaConsumerProperties;\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; consumerFactory() {\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerProperties.getKafkaConsumerConfig());\n    }\n...\n\n@Configuration\n@ConfigurationProperties\npublic class KafkaConsumerProperties {\n    protected Map&lt;String, Object&gt; kafkaConsumerConfig = new HashMap&lt;&gt;();\n\n    @ConfigurationProperties(\"kafkaConsumerConfig\")\n    public Map&lt;String, Object&gt; getKafkaConsumerConfig() {\n        return (kafkaConsumerConfig);\n    }\n...\n</code></pre>\n\n<p>To provide the kafkaConsumer config from a properties file, you can use: mapname[key]=value</p>\n\n<pre><code>//application.properties\nkafkaConsumerConfig[bootstrap.servers]=localhost:9092, localhost:9093, localhost:9094\nkafkaConsumerConfig[group.id]=test-consumer-group-local\nkafkaConsumerConfig[value.deserializer]=org.apache.kafka.common.serialization.StringDeserializer\nkafkaConsumerConfig[key.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n\n<p>To provide the kafkaConsumer config from a yaml file, you can use \"[key]\": value\nIn application.yml file:</p>\n\n<pre><code>kafkaConsumerConfig:\n  \"[bootstrap.servers]\": localhost:9092, localhost:9093, localhost:9094\n  \"[group.id]\": test-consumer-group-local\n  \"[value.deserializer]\": org.apache.kafka.common.serialization.StringDeserializer\n  \"[key.deserializer]\": org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13742022,"reputation":241,"user_id":9916861,"display_name":"liuxun"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1561389415,"creation_date":1543567608,"answer_id":53554102,"question_id":30691949,"body_markdown":"I had a simple code for Spring Cloud Config \n\nlike this:\n\nIn application.properties\n\n&gt; spring.data.mongodb.db1=mongodb://test@test1.com\n&gt;\n&gt; spring.data.mongodb.db2=mongodb://test@test2.com\n\n## read\n\n    @Bean(name = &quot;mongoConfig&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.data.mongodb&quot;)\n    public Map&lt;String, Map&lt;String, String&gt;&gt; mongoConfig() {\n        return new HashMap();\n    }\n\n## use\n\n    @Autowired\n    @Qualifier(value = &quot;mongoConfig&quot;)\n    private Map&lt;String, String&gt; mongoConfig;\n    \n    @Bean(name = &quot;mongoTemplates&quot;)\n    public HashMap&lt;String, MongoTemplate&gt; mongoTemplateMap() throws UnknownHostException {\n        HashMap&lt;String, MongoTemplate&gt; mongoTemplates = new HashMap&lt;&gt;();\n        for (Map.Entry&lt;String, String&gt;&gt; entry : mongoConfig.entrySet()) {\n            String k = entry.getKey();\n            String v = entry.getValue();\n            MongoTemplate template = new MongoTemplate(new SimpleMongoDbFactory(new MongoClientURI(v)));\n            mongoTemplates.put(k, template);\n        }\n        return mongoTemplates;\n    }","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>I had a simple code for Spring Cloud Config</p>\n<p>like this:</p>\n<p>In application.properties</p>\n<blockquote>\n<p>spring.data.mongodb.db1=mongodb://test@test1.com</p>\n<p>spring.data.mongodb.db2=mongodb://test@test2.com</p>\n</blockquote>\n<h2>read</h2>\n<pre><code>@Bean(name = &quot;mongoConfig&quot;)\n@ConfigurationProperties(prefix = &quot;spring.data.mongodb&quot;)\npublic Map&lt;String, Map&lt;String, String&gt;&gt; mongoConfig() {\n    return new HashMap();\n}\n</code></pre>\n<h2>use</h2>\n<pre><code>@Autowired\n@Qualifier(value = &quot;mongoConfig&quot;)\nprivate Map&lt;String, String&gt; mongoConfig;\n\n@Bean(name = &quot;mongoTemplates&quot;)\npublic HashMap&lt;String, MongoTemplate&gt; mongoTemplateMap() throws UnknownHostException {\n    HashMap&lt;String, MongoTemplate&gt; mongoTemplates = new HashMap&lt;&gt;();\n    for (Map.Entry&lt;String, String&gt;&gt; entry : mongoConfig.entrySet()) {\n        String k = entry.getKey();\n        String v = entry.getValue();\n        MongoTemplate template = new MongoTemplate(new SimpleMongoDbFactory(new MongoClientURI(v)));\n        mongoTemplates.put(k, template);\n    }\n    return mongoTemplates;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1329278,"reputation":2885,"user_id":1273497,"accept_rate":91,"display_name":"wild_nothing"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1695215473,"creation_date":1557250576,"answer_id":56027837,"question_id":30691949,"body_markdown":"To get this working with YAML, do this:\r\n\r\n    property-name: &#39;{\r\n      key1: &quot;value1&quot;,\r\n      key2: &quot;value2&quot;\r\n    }&#39;\r\n    ","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>To get this working with YAML, do this:</p>\n<pre><code>property-name: '{\n  key1: &quot;value1&quot;,\n  key2: &quot;value2&quot;\n}'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7353522,"reputation":171,"user_id":5598915,"display_name":"ShareYourWisdom"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1588924914,"creation_date":1588924256,"answer_id":61674515,"question_id":30691949,"body_markdown":"Following worked for me:\r\n\r\nSpingBoot 2.1.7.RELEASE\r\n\r\nYAML Property (Notice value sourrounded by single quotes)\r\n```\r\nproperty:\r\n   name: &#39;{&quot;key1&quot;: false, &quot;key2&quot;: false, &quot;key3&quot;: true}&#39;\r\n```\r\n\r\nIn Java/Kotlin annotate field with (Notice use of #) (For java no need to escape &#39;$&#39; with &#39;\\&#39;)\r\n```\r\n@Value(&quot;#{\\${property.name}}&quot;)\r\n```","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>Following worked for me:</p>\n\n<p>SpingBoot 2.1.7.RELEASE</p>\n\n<p>YAML Property (Notice value sourrounded by single quotes)</p>\n\n<pre><code>property:\n   name: '{\"key1\": false, \"key2\": false, \"key3\": true}'\n</code></pre>\n\n<p>In Java/Kotlin annotate field with (Notice use of #) (For java no need to escape '$' with '\\')</p>\n\n<pre><code>@Value(\"#{\\${property.name}}\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1733872,"reputation":2893,"user_id":1586864,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647329991,"creation_date":1647329991,"answer_id":71478498,"question_id":30691949,"body_markdown":"You can use below code.\r\n\r\nBelow code for `application.yml`\r\n\r\n    my:\r\n      mapValues:\r\n        dbData: &#39;{\r\n          &quot;connectionURL&quot;: &quot;http://tesst:3306&quot;,\r\n            &quot;userName&quot;: &quot;myUser&quot;,\r\n            &quot;password&quot;: &quot;password123&quot;\r\n        }&#39;\r\n\r\nto access these key and values using `@Value` annotation use below java code.\r\n\r\n    @Value(&quot;#{${my.mapValues.dbData}}&quot;)\r\n    private Map&lt;String,String&gt; dbValues;","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>You can use below code.</p>\n<p>Below code for <code>application.yml</code></p>\n<pre><code>my:\n  mapValues:\n    dbData: '{\n      &quot;connectionURL&quot;: &quot;http://tesst:3306&quot;,\n        &quot;userName&quot;: &quot;myUser&quot;,\n        &quot;password&quot;: &quot;password123&quot;\n    }'\n</code></pre>\n<p>to access these key and values using <code>@Value</code> annotation use below java code.</p>\n<pre><code>@Value(&quot;#{${my.mapValues.dbData}}&quot;)\nprivate Map&lt;String,String&gt; dbValues;\n</code></pre>\n"}],"owner":{"account_id":1672649,"reputation":5729,"user_id":1538815,"accept_rate":57,"display_name":"yathirigan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188595,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":30693052,"answer_count":8,"score":105,"last_activity_date":1695215473,"creation_date":1433669099,"question_id":30691949,"body_markdown":"How can I inject values into a Map from the properties file using the @Value annotation in Spring?\r\n\r\nMy Spring Java class is and I tried using the $, but got the following error message:\r\n\r\n&gt; Could not autowire field: private java.util.Map Test.standard; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;com.test.standard&#39; in string value &quot;${com.test.standard}&quot;\r\n\r\n    @ConfigurationProperty(&quot;com.hello.foo&quot;)\r\n    public class Test {\r\n    \r\n       @Value(&quot;${com.test.standard}&quot;)\r\n       private Map&lt;String,Pattern&gt; standard = new LinkedHashMap&lt;String,Pattern&gt;\r\n\r\n       private String enabled;\r\n    \r\n    }\r\n\r\nI have the following properties in a .properties file\r\n\r\n    com.test.standard.name1=Pattern1\r\n    com.test.standard.name2=Pattern2\r\n    com.test.standard.name3=Pattern3\r\n    com.hello.foo.enabled=true","title":"How to inject a Map using the @Value Spring Annotation?","body":"<p>How can I inject values into a Map from the properties file using the @Value annotation in Spring?</p>\n<p>My Spring Java class is and I tried using the $, but got the following error message:</p>\n<blockquote>\n<p>Could not autowire field: private java.util.Map Test.standard; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'com.test.standard' in string value &quot;${com.test.standard}&quot;</p>\n</blockquote>\n<pre><code>@ConfigurationProperty(&quot;com.hello.foo&quot;)\npublic class Test {\n\n   @Value(&quot;${com.test.standard}&quot;)\n   private Map&lt;String,Pattern&gt; standard = new LinkedHashMap&lt;String,Pattern&gt;\n\n   private String enabled;\n\n}\n</code></pre>\n<p>I have the following properties in a .properties file</p>\n<pre><code>com.test.standard.name1=Pattern1\ncom.test.standard.name2=Pattern2\ncom.test.standard.name3=Pattern3\ncom.hello.foo.enabled=true\n</code></pre>\n"},{"tags":["java","hibernate","datetime","jpa","timezone"],"comments":[{"owner":{"account_id":3775541,"reputation":4682,"user_id":3136474,"accept_rate":83,"display_name":"Dinei"},"score":1,"creation_date":1493995950,"post_id":508019,"comment_id":74655007,"body_markdown":"[Vlad Mihalcea&#39;s answer](http://stackoverflow.com/a/40438746/3136474) provides an updated answer (for Hibernate 5.2+)","body":"<a href=\"http://stackoverflow.com/a/40438746/3136474\">Vlad Mihalcea&#39;s answer</a> provides an updated answer (for Hibernate 5.2+)"}],"answers":[{"tags":[],"owner":{"account_id":9974,"reputation":6191,"user_id":18645,"display_name":"mitchnull"},"down_vote_count":4,"up_vote_count":63,"is_accepted":false,"score":59,"last_activity_date":1460430001,"creation_date":1233686672,"answer_id":508377,"question_id":508019,"body_markdown":"To the best of my knowledge, you need to put your entire Java app in UTC timezone (so that Hibernate will store dates in UTC), and you&#39;ll need to convert to whatever timezone desired when you display stuff (at least we do it this way).\r\n\r\nAt startup, we do:\r\n\r\n    TimeZone.setDefault(TimeZone.getTimeZone(&quot;Etc/UTC&quot;));\r\n\r\nAnd set the desired timezone to the DateFormat:\r\n\r\n    fmt.setTimeZone(TimeZone.getTimeZone(&quot;Europe/Budapest&quot;))","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>To the best of my knowledge, you need to put your entire Java app in UTC timezone (so that Hibernate will store dates in UTC), and you'll need to convert to whatever timezone desired when you display stuff (at least we do it this way).</p>\n\n<p>At startup, we do:</p>\n\n<pre><code>TimeZone.setDefault(TimeZone.getTimeZone(\"Etc/UTC\"));\n</code></pre>\n\n<p>And set the desired timezone to the DateFormat:</p>\n\n<pre><code>fmt.setTimeZone(TimeZone.getTimeZone(\"Europe/Budapest\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24809,"reputation":10138,"user_id":63308,"accept_rate":89,"display_name":"codefinger"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1234896848,"creation_date":1234892031,"answer_id":557891,"question_id":508019,"body_markdown":"You would think this common problem would be taken care of by Hibernate.  But its not!  There are a few &quot;hacks&quot; to get it right.  \r\n\r\nThe one I use is to store the Date as a Long in the database.  So I am always working with milliseconds after 1/1/70. I then have getters and setters on my Class that return/accept only Dates.  So the API remains the same. The down side is that I have longs in the database.  SO with SQL I can pretty much only do &lt;,&gt;,= comparisons -- not fancy date operators.  \r\n\r\nAnother approach is to user a custom mapping type as described here:\r\nhttp://www.hibernate.org/100.html\r\n\r\nI think the correct way to deal with this is to use a Calendar instead of a Date though.  With the Calendar you can set the TimeZone before persisting.  \r\n\r\nNOTE: Silly stackoverflow won&#39;t let me comment, so here is a response to david a.\r\n\r\nIf you create this object in Chicago:\r\n\r\n    new Date(0);\r\n\r\nHibernate persists it as &quot;12/31/1969 18:00:00&quot;.  Dates should be devoid of timezone, so I&#39;m not sure why the adjustment would be made.","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>You would think this common problem would be taken care of by Hibernate.  But its not!  There are a few \"hacks\" to get it right.  </p>\n\n<p>The one I use is to store the Date as a Long in the database.  So I am always working with milliseconds after 1/1/70. I then have getters and setters on my Class that return/accept only Dates.  So the API remains the same. The down side is that I have longs in the database.  SO with SQL I can pretty much only do &lt;,>,= comparisons -- not fancy date operators.  </p>\n\n<p>Another approach is to user a custom mapping type as described here:\n<a href=\"http://www.hibernate.org/100.html\" rel=\"noreferrer\">http://www.hibernate.org/100.html</a></p>\n\n<p>I think the correct way to deal with this is to use a Calendar instead of a Date though.  With the Calendar you can set the TimeZone before persisting.  </p>\n\n<p>NOTE: Silly stackoverflow won't let me comment, so here is a response to david a.</p>\n\n<p>If you create this object in Chicago:</p>\n\n<pre><code>new Date(0);\n</code></pre>\n\n<p>Hibernate persists it as \"12/31/1969 18:00:00\".  Dates should be devoid of timezone, so I'm not sure why the adjustment would be made.</p>\n"},{"tags":[],"owner":{"display_name":"Time Master"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1237834956,"creation_date":1237834956,"answer_id":674785,"question_id":508019,"body_markdown":"Date is not in any time zone (it is a millisecond office from a defined moment in time same for everyone), but underlying (R)DBs generally store timestamps in political format (year, month, day, hour, minute, second, ...) that is time-zone sensitive.\r\n\r\nTo be serious, Hibernate *MUST* be allow being told within some form of mapping that the DB date is in such-and-such timezone so that when it loads or stores it it does not assume its own...\r\n","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Date is not in any time zone (it is a millisecond office from a defined moment in time same for everyone), but underlying (R)DBs generally store timestamps in political format (year, month, day, hour, minute, second, ...) that is time-zone sensitive.</p>\n\n<p>To be serious, Hibernate <em>MUST</em> be allow being told within some form of mapping that the DB date is in such-and-such timezone so that when it loads or stores it it does not assume its own...</p>\n"},{"tags":[],"owner":{"account_id":613160,"reputation":81,"user_id":330139,"display_name":"Chris Pheby"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1304374537,"creation_date":1272728145,"answer_id":2750527,"question_id":508019,"body_markdown":"Please take a look at my project on Sourceforge which has user types for standard SQL Date and Time types as well as JSR 310 and Joda Time. All of the types try to address the offsetting issue. See http://sourceforge.net/projects/usertype/\r\n\r\nEDIT: In response to Derek Mahar&#39;s question attached to this comment: \t\r\n\r\n&quot;Chris, do your user types work with Hibernate 3 or greater? – Derek Mahar Nov 7 &#39;10 at 12:30&quot;\r\n\r\nYes these types support Hibernate 3.x versions including Hibernate 3.6. ","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Please take a look at my project on Sourceforge which has user types for standard SQL Date and Time types as well as JSR 310 and Joda Time. All of the types try to address the offsetting issue. See <a href=\"http://sourceforge.net/projects/usertype/\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/usertype/</a></p>\n\n<p>EDIT: In response to Derek Mahar's question attached to this comment:   </p>\n\n<p>\"Chris, do your user types work with Hibernate 3 or greater? – Derek Mahar Nov 7 '10 at 12:30\"</p>\n\n<p>Yes these types support Hibernate 3.x versions including Hibernate 3.6. </p>\n"},{"tags":[],"owner":{"account_id":180506,"reputation":783,"user_id":413862,"display_name":"divestoclimb"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1472472735,"creation_date":1281194984,"answer_id":3430957,"question_id":508019,"body_markdown":"Hibernate is ignorant of time zone stuff in Dates (because there isn&#39;t any), but it&#39;s actually the JDBC layer that&#39;s causing problems. `ResultSet.getTimestamp` and `PreparedStatement.setTimestamp` both say in their docs that they transform dates to/from the current JVM timezone by default when reading and writing from/to the database.\r\n\r\nI came up with a solution to this in Hibernate 3.5 by subclassing `org.hibernate.type.TimestampType` that forces these JDBC methods to use UTC instead of the local time zone:\r\n\r\n    public class UtcTimestampType extends TimestampType {\r\n\r\n        private static final long serialVersionUID = 8088663383676984635L;\r\n\r\n        private static final TimeZone UTC = TimeZone.getTimeZone(&quot;UTC&quot;);\r\n \r\n        @Override\r\n        public Object get(ResultSet rs, String name) throws SQLException {\r\n            return rs.getTimestamp(name, Calendar.getInstance(UTC));\r\n        }\r\n\r\n        @Override\r\n        public void set(PreparedStatement st, Object value, int index) throws SQLException {\r\n            Timestamp ts;\r\n            if(value instanceof Timestamp) {\r\n                ts = (Timestamp) value;\r\n            } else {\r\n                ts = new Timestamp(((java.util.Date) value).getTime());\r\n            }\r\n            st.setTimestamp(index, ts, Calendar.getInstance(UTC));\r\n        }\r\n    }\r\n\r\nThe same thing should be done to fix TimeType and DateType if you use those types. The downside is you&#39;ll have to manually specify that these types are to be used instead of the defaults on every Date field in your POJOs (and also breaks pure JPA compatibility), unless someone knows of a more general override method.\r\n\r\nUPDATE: Hibernate 3.6 has changed the types API. In 3.6, I wrote a class UtcTimestampTypeDescriptor to implement this.\r\n\r\n    public class UtcTimestampTypeDescriptor extends TimestampTypeDescriptor {\r\n    \tpublic static final UtcTimestampTypeDescriptor INSTANCE = new UtcTimestampTypeDescriptor();\r\n    \t\r\n    \tprivate static final TimeZone UTC = TimeZone.getTimeZone(&quot;UTC&quot;);\r\n    \r\n    \tpublic &lt;X&gt; ValueBinder&lt;X&gt; getBinder(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\r\n    \t\treturn new BasicBinder&lt;X&gt;( javaTypeDescriptor, this ) {\r\n    \t\t\t@Override\r\n    \t\t\tprotected void doBind(PreparedStatement st, X value, int index, WrapperOptions options) throws SQLException {\r\n    \t\t\t\tst.setTimestamp( index, javaTypeDescriptor.unwrap( value, Timestamp.class, options ), Calendar.getInstance(UTC) );\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    \tpublic &lt;X&gt; ValueExtractor&lt;X&gt; getExtractor(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\r\n    \t\treturn new BasicExtractor&lt;X&gt;( javaTypeDescriptor, this ) {\r\n    \t\t\t@Override\r\n    \t\t\tprotected X doExtract(ResultSet rs, String name, WrapperOptions options) throws SQLException {\r\n    \t\t\t\treturn javaTypeDescriptor.wrap( rs.getTimestamp( name, Calendar.getInstance(UTC) ), options );\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    }\r\n\r\nNow when the app starts, if you set TimestampTypeDescriptor.INSTANCE to an instance of UtcTimestampTypeDescriptor, all timestamps will be stored and treated as being in UTC without having to change the annotations on POJOs. [I haven&#39;t tested this yet]","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Hibernate is ignorant of time zone stuff in Dates (because there isn't any), but it's actually the JDBC layer that's causing problems. <code>ResultSet.getTimestamp</code> and <code>PreparedStatement.setTimestamp</code> both say in their docs that they transform dates to/from the current JVM timezone by default when reading and writing from/to the database.</p>\n\n<p>I came up with a solution to this in Hibernate 3.5 by subclassing <code>org.hibernate.type.TimestampType</code> that forces these JDBC methods to use UTC instead of the local time zone:</p>\n\n<pre><code>public class UtcTimestampType extends TimestampType {\n\n    private static final long serialVersionUID = 8088663383676984635L;\n\n    private static final TimeZone UTC = TimeZone.getTimeZone(\"UTC\");\n\n    @Override\n    public Object get(ResultSet rs, String name) throws SQLException {\n        return rs.getTimestamp(name, Calendar.getInstance(UTC));\n    }\n\n    @Override\n    public void set(PreparedStatement st, Object value, int index) throws SQLException {\n        Timestamp ts;\n        if(value instanceof Timestamp) {\n            ts = (Timestamp) value;\n        } else {\n            ts = new Timestamp(((java.util.Date) value).getTime());\n        }\n        st.setTimestamp(index, ts, Calendar.getInstance(UTC));\n    }\n}\n</code></pre>\n\n<p>The same thing should be done to fix TimeType and DateType if you use those types. The downside is you'll have to manually specify that these types are to be used instead of the defaults on every Date field in your POJOs (and also breaks pure JPA compatibility), unless someone knows of a more general override method.</p>\n\n<p>UPDATE: Hibernate 3.6 has changed the types API. In 3.6, I wrote a class UtcTimestampTypeDescriptor to implement this.</p>\n\n<pre><code>public class UtcTimestampTypeDescriptor extends TimestampTypeDescriptor {\n    public static final UtcTimestampTypeDescriptor INSTANCE = new UtcTimestampTypeDescriptor();\n\n    private static final TimeZone UTC = TimeZone.getTimeZone(\"UTC\");\n\n    public &lt;X&gt; ValueBinder&lt;X&gt; getBinder(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\n        return new BasicBinder&lt;X&gt;( javaTypeDescriptor, this ) {\n            @Override\n            protected void doBind(PreparedStatement st, X value, int index, WrapperOptions options) throws SQLException {\n                st.setTimestamp( index, javaTypeDescriptor.unwrap( value, Timestamp.class, options ), Calendar.getInstance(UTC) );\n            }\n        };\n    }\n\n    public &lt;X&gt; ValueExtractor&lt;X&gt; getExtractor(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\n        return new BasicExtractor&lt;X&gt;( javaTypeDescriptor, this ) {\n            @Override\n            protected X doExtract(ResultSet rs, String name, WrapperOptions options) throws SQLException {\n                return javaTypeDescriptor.wrap( rs.getTimestamp( name, Calendar.getInstance(UTC) ), options );\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Now when the app starts, if you set TimestampTypeDescriptor.INSTANCE to an instance of UtcTimestampTypeDescriptor, all timestamps will be stored and treated as being in UTC without having to change the annotations on POJOs. [I haven't tested this yet]</p>\n"},{"tags":[],"owner":{"account_id":642074,"reputation":57,"user_id":422102,"display_name":"joobik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578941915,"creation_date":1291836413,"answer_id":4391438,"question_id":508019,"body_markdown":"Hibernate does not allow for specifying time zones by annotation or any other means. If you use Calendar instead of date, you can implement a workaround using HIbernate property AccessType and implementing the mapping yourself. The more advanced solution is to implement a custom UserType to map your Date or Calendar. Both solutions are explained in my blog post here: [http://www.joobik.com/2010/11/mapping-dates-and-time-zones-with.html][1]\r\n\r\n\r\n  [1]: http://www.joobik.com/2010/11/mapping-dates-and-time-zones-with.html","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Hibernate does not allow for specifying time zones by annotation or any other means. If you use Calendar instead of date, you can implement a workaround using HIbernate property AccessType and implementing the mapping yourself. The more advanced solution is to implement a custom UserType to map your Date or Calendar. Both solutions are explained in my blog post here: <a href=\"http://www.joobik.com/2010/11/mapping-dates-and-time-zones-with.html\" rel=\"nofollow noreferrer\">http://www.joobik.com/2010/11/mapping-dates-and-time-zones-with.html</a></p>\n"},{"tags":[],"owner":{"account_id":684720,"reputation":81,"user_id":541082,"display_name":"Moa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1292274465,"creation_date":1292274465,"answer_id":4433502,"question_id":508019,"body_markdown":"There are several timezones in operation here:\r\n\r\n 1. Java&#39;s Date classes (util and sql), which have implicit timezones\r\n    of UTC \r\n 2. The timezone your JVM is running in, and\r\n 3. the default timezone of your database server.\r\n\r\nAll of these can be different. Hibernate/JPA has a severe design deficiency in that a user cannot easily ensure that timezone information is preserved in the database server (which allows reconstruction of correct times and dates in the JVM). \r\n\r\nWithout the ability to (easily) store timezone using JPA/Hibernate then information is lost and once information is lost it becomes expensive to construct it (if at all possible).\r\n\r\nI would argue that it is better to always store timezone information (should be the default) and users should then have the optional ability to optimize the timezone away (although it only really affects display, there is still an implicit timezone in any date).\r\n\r\nSorry, this post doesn&#39;t provide a work-around (that&#39;s been answered elsewhere) but it is a rationalization of why always storing timezone information around is important. Unfortunately it seems many Computer Scientists and programming practitioners argue against the need for timezones simply because they don&#39;t appreciate the &quot;loss of information&quot; perspective and how that makes things like internationalization very difficult - which is very important these days with web sites accessible by clients and people in your organization as they move around the world.","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>There are several timezones in operation here:</p>\n\n<ol>\n<li>Java's Date classes (util and sql), which have implicit timezones\nof UTC </li>\n<li>The timezone your JVM is running in, and</li>\n<li>the default timezone of your database server.</li>\n</ol>\n\n<p>All of these can be different. Hibernate/JPA has a severe design deficiency in that a user cannot easily ensure that timezone information is preserved in the database server (which allows reconstruction of correct times and dates in the JVM). </p>\n\n<p>Without the ability to (easily) store timezone using JPA/Hibernate then information is lost and once information is lost it becomes expensive to construct it (if at all possible).</p>\n\n<p>I would argue that it is better to always store timezone information (should be the default) and users should then have the optional ability to optimize the timezone away (although it only really affects display, there is still an implicit timezone in any date).</p>\n\n<p>Sorry, this post doesn't provide a work-around (that's been answered elsewhere) but it is a rationalization of why always storing timezone information around is important. Unfortunately it seems many Computer Scientists and programming practitioners argue against the need for timezones simply because they don't appreciate the \"loss of information\" perspective and how that makes things like internationalization very difficult - which is very important these days with web sites accessible by clients and people in your organization as they move around the world.</p>\n"},{"tags":[],"owner":{"account_id":65816,"reputation":4229,"user_id":193435,"display_name":"Shane"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1370500094,"creation_date":1370500094,"answer_id":16955113,"question_id":508019,"body_markdown":"Adding an answer that&#39;s **completely** based on and indebted to divestoclimb with a hint from Shaun Stone. Just wanted to spell it out in detail since it&#39;s a common problem and the solution is a bit confusing.\r\n\r\nThis is using Hibernate 4.1.4.Final, though I suspect anything after 3.6 will work.\r\n\r\nFirst, create divestoclimb&#39;s UtcTimestampTypeDescriptor\r\n\r\n    public class UtcTimestampTypeDescriptor extends TimestampTypeDescriptor {\r\n        public static final UtcTimestampTypeDescriptor INSTANCE = new UtcTimestampTypeDescriptor();\r\n\r\n        private static final TimeZone UTC = TimeZone.getTimeZone(&quot;UTC&quot;);\r\n\r\n        public &lt;X&gt; ValueBinder&lt;X&gt; getBinder(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\r\n            return new BasicBinder&lt;X&gt;( javaTypeDescriptor, this ) {\r\n                @Override\r\n                protected void doBind(PreparedStatement st, X value, int index, WrapperOptions options) throws SQLException {\r\n                    st.setTimestamp( index, javaTypeDescriptor.unwrap( value, Timestamp.class, options ), Calendar.getInstance(UTC) );\r\n                }\r\n            };\r\n        }\r\n\r\n        public &lt;X&gt; ValueExtractor&lt;X&gt; getExtractor(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\r\n            return new BasicExtractor&lt;X&gt;( javaTypeDescriptor, this ) {\r\n                @Override\r\n                protected X doExtract(ResultSet rs, String name, WrapperOptions options) throws SQLException {\r\n                    return javaTypeDescriptor.wrap( rs.getTimestamp( name, Calendar.getInstance(UTC) ), options );\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nThen create UtcTimestampType, which uses UtcTimestampTypeDescriptor instead of TimestampTypeDescriptor as the SqlTypeDescriptor in the super constructor call but otherwise delegates everything to TimestampType:\r\n\r\n    public class UtcTimestampType\r\n            extends AbstractSingleColumnStandardBasicType&lt;Date&gt;\r\n            implements VersionType&lt;Date&gt;, LiteralType&lt;Date&gt; {\r\n        public static final UtcTimestampType INSTANCE = new UtcTimestampType();\r\n    \r\n        public UtcTimestampType() {\r\n            super( UtcTimestampTypeDescriptor.INSTANCE, JdbcTimestampTypeDescriptor.INSTANCE );\r\n        }\r\n    \r\n        public String getName() {\r\n            return TimestampType.INSTANCE.getName();\r\n        }\r\n    \r\n        @Override\r\n        public String[] getRegistrationKeys() {\r\n            return TimestampType.INSTANCE.getRegistrationKeys();\r\n        }\r\n    \r\n        public Date next(Date current, SessionImplementor session) {\r\n            return TimestampType.INSTANCE.next(current, session);\r\n        }\r\n    \r\n        public Date seed(SessionImplementor session) {\r\n            return TimestampType.INSTANCE.seed(session);\r\n        }\r\n    \r\n        public Comparator&lt;Date&gt; getComparator() {\r\n            return TimestampType.INSTANCE.getComparator();        \r\n        }\r\n    \r\n        public String objectToSQLString(Date value, Dialect dialect) throws Exception {\r\n            return TimestampType.INSTANCE.objectToSQLString(value, dialect);\r\n        }\r\n    \r\n        public Date fromStringValue(String xml) throws HibernateException {\r\n            return TimestampType.INSTANCE.fromStringValue(xml);\r\n        }\r\n    }\r\n\r\nFinally, when you initialize your Hibernate configuration, register UtcTimestampType as a type override:\r\n\r\n    configuration.registerTypeOverride(new UtcTimestampType());\r\n\r\nNow timestamps shouldn&#39;t be concerned with the JVM&#39;s time zone on their way to and from the database. HTH.","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Adding an answer that's <strong>completely</strong> based on and indebted to divestoclimb with a hint from Shaun Stone. Just wanted to spell it out in detail since it's a common problem and the solution is a bit confusing.</p>\n\n<p>This is using Hibernate 4.1.4.Final, though I suspect anything after 3.6 will work.</p>\n\n<p>First, create divestoclimb's UtcTimestampTypeDescriptor</p>\n\n<pre><code>public class UtcTimestampTypeDescriptor extends TimestampTypeDescriptor {\n    public static final UtcTimestampTypeDescriptor INSTANCE = new UtcTimestampTypeDescriptor();\n\n    private static final TimeZone UTC = TimeZone.getTimeZone(\"UTC\");\n\n    public &lt;X&gt; ValueBinder&lt;X&gt; getBinder(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\n        return new BasicBinder&lt;X&gt;( javaTypeDescriptor, this ) {\n            @Override\n            protected void doBind(PreparedStatement st, X value, int index, WrapperOptions options) throws SQLException {\n                st.setTimestamp( index, javaTypeDescriptor.unwrap( value, Timestamp.class, options ), Calendar.getInstance(UTC) );\n            }\n        };\n    }\n\n    public &lt;X&gt; ValueExtractor&lt;X&gt; getExtractor(final JavaTypeDescriptor&lt;X&gt; javaTypeDescriptor) {\n        return new BasicExtractor&lt;X&gt;( javaTypeDescriptor, this ) {\n            @Override\n            protected X doExtract(ResultSet rs, String name, WrapperOptions options) throws SQLException {\n                return javaTypeDescriptor.wrap( rs.getTimestamp( name, Calendar.getInstance(UTC) ), options );\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Then create UtcTimestampType, which uses UtcTimestampTypeDescriptor instead of TimestampTypeDescriptor as the SqlTypeDescriptor in the super constructor call but otherwise delegates everything to TimestampType:</p>\n\n<pre><code>public class UtcTimestampType\n        extends AbstractSingleColumnStandardBasicType&lt;Date&gt;\n        implements VersionType&lt;Date&gt;, LiteralType&lt;Date&gt; {\n    public static final UtcTimestampType INSTANCE = new UtcTimestampType();\n\n    public UtcTimestampType() {\n        super( UtcTimestampTypeDescriptor.INSTANCE, JdbcTimestampTypeDescriptor.INSTANCE );\n    }\n\n    public String getName() {\n        return TimestampType.INSTANCE.getName();\n    }\n\n    @Override\n    public String[] getRegistrationKeys() {\n        return TimestampType.INSTANCE.getRegistrationKeys();\n    }\n\n    public Date next(Date current, SessionImplementor session) {\n        return TimestampType.INSTANCE.next(current, session);\n    }\n\n    public Date seed(SessionImplementor session) {\n        return TimestampType.INSTANCE.seed(session);\n    }\n\n    public Comparator&lt;Date&gt; getComparator() {\n        return TimestampType.INSTANCE.getComparator();        \n    }\n\n    public String objectToSQLString(Date value, Dialect dialect) throws Exception {\n        return TimestampType.INSTANCE.objectToSQLString(value, dialect);\n    }\n\n    public Date fromStringValue(String xml) throws HibernateException {\n        return TimestampType.INSTANCE.fromStringValue(xml);\n    }\n}\n</code></pre>\n\n<p>Finally, when you initialize your Hibernate configuration, register UtcTimestampType as a type override:</p>\n\n<pre><code>configuration.registerTypeOverride(new UtcTimestampType());\n</code></pre>\n\n<p>Now timestamps shouldn't be concerned with the JVM's time zone on their way to and from the database. HTH.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":113,"is_accepted":true,"score":113,"last_activity_date":1630963911,"creation_date":1478352273,"answer_id":40438746,"question_id":508019,"body_markdown":"Since Hibernate 5.2, you can now force the UTC time zone by adding the following configuration property into the `properties.xml` JPA configuration file:\r\n\r\n    &lt;property name=&quot;hibernate.jdbc.time_zone&quot; value=&quot;UTC&quot;/&gt;\r\n\r\nIf you&#39;re using Spring Boot, then add this property to your `application.properties` file:\r\n\r\n    spring.jpa.properties.hibernate.jdbc.time_zone=UTC","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Since Hibernate 5.2, you can now force the UTC time zone by adding the following configuration property into the <code>properties.xml</code> JPA configuration file:</p>\n<pre><code>&lt;property name=&quot;hibernate.jdbc.time_zone&quot; value=&quot;UTC&quot;/&gt;\n</code></pre>\n<p>If you're using Spring Boot, then add this property to your <code>application.properties</code> file:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.time_zone=UTC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2541333,"reputation":143,"user_id":2207078,"accept_rate":73,"display_name":"orim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478611892,"creation_date":1478611892,"answer_id":40488244,"question_id":508019,"body_markdown":"I encountered just the same problem when I wanted to store the dates in the DB as UTC and avoid using `varchar` and explicit `String &lt;-&gt; java.util.Date` conversions, or setting my whole Java app in the UTC time zone (because this could lead to another unexpected issues, if the JVM is shared across many applications). \r\n\r\nSo, there is an open source project `DbAssist`, which allows you to easily fix the read/write as UTC date from the database. Since you are using JPA Annotations to map the fields in the entity, all you have to do is to include the following dependency to your Maven `pom` file:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.montrosesoftware&lt;/groupId&gt;\r\n        &lt;artifactId&gt;DbAssist-5.2.2&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen you apply the fix (for Hibernate + Spring Boot example) by adding `@EnableAutoConfiguration` annotation before the Spring application class. For other setups installation instructions and more use examples, just refer to the project&#39;s [github](https://github.com/montrosesoftware/DbAssist).\r\n\r\nThe good thing is that you don&#39;t have to modify the entities at all; you can leave their `java.util.Date` fields as they are.\r\n\r\n`5.2.2` has to correspond to the Hibernate version you are using. I am not sure, which version you are using in your project, but the full list of provided fixes is available on the wiki page of the project&#39;s [github](https://github.com/montrosesoftware/DbAssist/wiki#add-the-dependency). The reason why the fix is different for various Hibernate versions is because Hibernate creators changed the API a couple of times between the releases.\r\n\r\nInternally, the fix uses hints from divestoclimb, Shane and a few other sources in order to create a custom `UtcDateType`. Then it maps the standard `java.util.Date` with the custom `UtcDateType` which handles all the necessary time zone handling. \r\nThe mapping of the types is achieved using `@Typedef` annotation in the provided `package-info.java` file.\r\n\r\n    @TypeDef(name = &quot;UtcDateType&quot;, defaultForType = Date.class, typeClass = UtcDateType.class),\r\n    package com.montrosesoftware.dbassist.types;\r\n\r\nYou can find an article [here](http://blog.montrosesoftware.com/2016/11/08/dates-and-times-in-java-unexpected-timezone-shift/) which explains why such a time shift occurs at all and what are the approaches to solve it.","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>I encountered just the same problem when I wanted to store the dates in the DB as UTC and avoid using <code>varchar</code> and explicit <code>String &lt;-&gt; java.util.Date</code> conversions, or setting my whole Java app in the UTC time zone (because this could lead to another unexpected issues, if the JVM is shared across many applications). </p>\n\n<p>So, there is an open source project <code>DbAssist</code>, which allows you to easily fix the read/write as UTC date from the database. Since you are using JPA Annotations to map the fields in the entity, all you have to do is to include the following dependency to your Maven <code>pom</code> file:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.montrosesoftware&lt;/groupId&gt;\n    &lt;artifactId&gt;DbAssist-5.2.2&lt;/artifactId&gt;\n    &lt;version&gt;1.0-RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then you apply the fix (for Hibernate + Spring Boot example) by adding <code>@EnableAutoConfiguration</code> annotation before the Spring application class. For other setups installation instructions and more use examples, just refer to the project's <a href=\"https://github.com/montrosesoftware/DbAssist\" rel=\"nofollow noreferrer\">github</a>.</p>\n\n<p>The good thing is that you don't have to modify the entities at all; you can leave their <code>java.util.Date</code> fields as they are.</p>\n\n<p><code>5.2.2</code> has to correspond to the Hibernate version you are using. I am not sure, which version you are using in your project, but the full list of provided fixes is available on the wiki page of the project's <a href=\"https://github.com/montrosesoftware/DbAssist/wiki#add-the-dependency\" rel=\"nofollow noreferrer\">github</a>. The reason why the fix is different for various Hibernate versions is because Hibernate creators changed the API a couple of times between the releases.</p>\n\n<p>Internally, the fix uses hints from divestoclimb, Shane and a few other sources in order to create a custom <code>UtcDateType</code>. Then it maps the standard <code>java.util.Date</code> with the custom <code>UtcDateType</code> which handles all the necessary time zone handling. \nThe mapping of the types is achieved using <code>@Typedef</code> annotation in the provided <code>package-info.java</code> file.</p>\n\n<pre><code>@TypeDef(name = \"UtcDateType\", defaultForType = Date.class, typeClass = UtcDateType.class),\npackage com.montrosesoftware.dbassist.types;\n</code></pre>\n\n<p>You can find an article <a href=\"http://blog.montrosesoftware.com/2016/11/08/dates-and-times-in-java-unexpected-timezone-shift/\" rel=\"nofollow noreferrer\">here</a> which explains why such a time shift occurs at all and what are the approaches to solve it.</p>\n"},{"tags":[],"owner":{"account_id":10147386,"reputation":475,"user_id":7495124,"display_name":"JavaGeek"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1553702299,"creation_date":1553702299,"answer_id":55381561,"question_id":508019,"body_markdown":"With Spring Boot JPA, use the below code in your application.properties file and obviously you can modify timezone to your choice\r\n\r\n    spring.jpa.properties.hibernate.jdbc.time_zone = UTC\r\n\r\nThen in your Entity class file, \r\n\r\n    @Column\r\n    private LocalDateTime created;","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>With Spring Boot JPA, use the below code in your application.properties file and obviously you can modify timezone to your choice</p>\n\n<pre><code>spring.jpa.properties.hibernate.jdbc.time_zone = UTC\n</code></pre>\n\n<p>Then in your Entity class file, </p>\n\n<pre><code>@Column\nprivate LocalDateTime created;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568344,"reputation":645,"user_id":2979325,"display_name":"Serkan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675752232,"creation_date":1675618301,"answer_id":75354188,"question_id":508019,"body_markdown":"Here is the complete checklist for storing dates in your database in a proper way: \r\n\r\n - first, make sure your OS timezone is st properly: either set *TZ* env variable in your Dockerfile or start your Java application with *-Duser.timezone=“UTC”*.\r\n - As mentioned earlier: also set the timezone for JPA with *hibernate.jdbc.time_zone = UTC*\r\n - Use *OffsetDateTime* for storing dates as UTC in your entities. Don’t use *Date, Calendar &amp; ZonedDateTime* !","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>Here is the complete checklist for storing dates in your database in a proper way:</p>\n<ul>\n<li>first, make sure your OS timezone is st properly: either set <em>TZ</em> env variable in your Dockerfile or start your Java application with <em>-Duser.timezone=“UTC”</em>.</li>\n<li>As mentioned earlier: also set the timezone for JPA with <em>hibernate.jdbc.time_zone = UTC</em></li>\n<li>Use <em>OffsetDateTime</em> for storing dates as UTC in your entities. Don’t use <em>Date, Calendar &amp; ZonedDateTime</em> !</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1629745,"reputation":18644,"user_id":1504556,"accept_rate":63,"display_name":"peterh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695215198,"creation_date":1695215198,"answer_id":77142765,"question_id":508019,"body_markdown":"It is now 2023. What you want to store from a Java perspecitive is an `Instant`, right?\r\n\r\nSo just do that:\r\n\r\n```java\r\npublic class Event {\r\n    @Id\r\n    public int id;\r\n\r\n    @Column(&quot;event_timestamp&quot;)\r\n    public Instant eventTimestamp;\r\n}\r\n\r\n```\r\n\r\nThis will work with Hibernate 5.2 or later.  You can find many tales on the Internet of having to set `hibernate.jdbc.time_zone` system property to `UTC`. This is not necessary with the above, at least not with Hibernate 6. The reason is that Hibernate can see your intent (you specify `Instant`, not any of the other JSR-310 types), so it knows it has to use a static UTC_CAL when reading or writing the values from/to the database. It will work regardless of your JVM timezone or the timezone of the database server.\r\n\r\nThe world is luckily much simpler (now) than the other answers on this page leads you to believe.","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>It is now 2023. What you want to store from a Java perspecitive is an <code>Instant</code>, right?</p>\n<p>So just do that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Event {\n    @Id\n    public int id;\n\n    @Column(&quot;event_timestamp&quot;)\n    public Instant eventTimestamp;\n}\n\n</code></pre>\n<p>This will work with Hibernate 5.2 or later.  You can find many tales on the Internet of having to set <code>hibernate.jdbc.time_zone</code> system property to <code>UTC</code>. This is not necessary with the above, at least not with Hibernate 6. The reason is that Hibernate can see your intent (you specify <code>Instant</code>, not any of the other JSR-310 types), so it knows it has to use a static UTC_CAL when reading or writing the values from/to the database. It will work regardless of your JVM timezone or the timezone of the database server.</p>\n<p>The world is luckily much simpler (now) than the other answers on this page leads you to believe.</p>\n"}],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222680,"favorite_count":0,"down_vote_count":0,"up_vote_count":126,"accepted_answer_id":40438746,"answer_count":13,"score":126,"last_activity_date":1695215198,"creation_date":1233681351,"question_id":508019,"body_markdown":"How can I configure JPA/Hibernate to store a date/time in the database as UTC (GMT) time zone? Consider this annotated JPA entity:\r\n\r\n    public class Event {\r\n        @Id\r\n        public int id;\r\n    \r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        public java.util.Date date;\r\n    }\r\n\r\nIf the date is 2008-Feb-03 9:30am Pacific Standard Time (PST), then I want the UTC time of 2008-Feb-03 5:30pm stored in the database. Likewise, when the date is retrieved from the database, I want it interpreted as UTC. So in this case 530pm is 530pm UTC. When it&#39;s displayed it will be formatted as 9:30am PST.\r\n\r\n","title":"How to store date/time and timestamps in UTC time zone with JPA and Hibernate","body":"<p>How can I configure JPA/Hibernate to store a date/time in the database as UTC (GMT) time zone? Consider this annotated JPA entity:</p>\n\n<pre><code>public class Event {\n    @Id\n    public int id;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    public java.util.Date date;\n}\n</code></pre>\n\n<p>If the date is 2008-Feb-03 9:30am Pacific Standard Time (PST), then I want the UTC time of 2008-Feb-03 5:30pm stored in the database. Likewise, when the date is retrieved from the database, I want it interpreted as UTC. So in this case 530pm is 530pm UTC. When it's displayed it will be formatted as 9:30am PST.</p>\n"},{"tags":["java","spring-rest"],"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":1,"creation_date":1641187383,"post_id":70561948,"comment_id":124734289,"body_markdown":"you can send GET with body https://stackoverflow.com/questions/978061/http-get-with-request-body","body":"you can send GET with body <a href=\"https://stackoverflow.com/questions/978061/http-get-with-request-body\" title=\"http get with request body\">stackoverflow.com/questions/978061/http-get-with-request-bod&zwnj;&#8203;y</a>"}],"answers":[{"tags":[],"owner":{"account_id":18975310,"reputation":68,"user_id":13847924,"display_name":"Mohan k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641200783,"creation_date":1641188101,"answer_id":70562025,"question_id":70561948,"body_markdown":"You can read queryParam/Request HTTP header as below:\r\n    \r\n    @GetMapping(value = &quot;{URL}&quot;)\r\n    public ResponseEntity getMethod(@RequestParam(&quot;consumes&quot;) String consumes) {\r\n            return ResponseEntity.ok().build();\r\n    }","title":"Why does @GetMapping have a &#39;consumes&#39; attribute?","body":"<p>You can read queryParam/Request HTTP header as below:</p>\n<pre><code>@GetMapping(value = &quot;{URL}&quot;)\npublic ResponseEntity getMethod(@RequestParam(&quot;consumes&quot;) String consumes) {\n        return ResponseEntity.ok().build();\n}\n</code></pre>\n"}],"owner":{"account_id":9289570,"reputation":125,"user_id":6898377,"display_name":"nonder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1695215116,"creation_date":1641187247,"question_id":70561948,"body_markdown":"In spring framework, @GetMapping doesn&#39;t have a body. But it has a &#39;consumes&#39; attribute. So how does it use this attribute without a body?\r\n\r\nexample: \r\n\r\n    @GetMapping(value = &quot;/methodA&quot;, consumes = &quot;application/json&quot;)","title":"Why does @GetMapping have a &#39;consumes&#39; attribute?","body":"<p>In spring framework, @GetMapping doesn't have a body. But it has a 'consumes' attribute. So how does it use this attribute without a body?</p>\n<p>example:</p>\n<pre><code>@GetMapping(value = &quot;/methodA&quot;, consumes = &quot;application/json&quot;)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1685462270,"post_id":76366440,"comment_id":134661966,"body_markdown":"About grouping logically related records see my solution at https://stackoverflow.com/a/46346438/685806 but it does not use `RepositoryItemReader`.","body":"About grouping logically related records see my solution at <a href=\"https://stackoverflow.com/a/46346438/685806\">stackoverflow.com/a/46346438/685806</a> but it does not use <code>RepositoryItemReader</code>."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1685463741,"post_id":76366440,"comment_id":134662340,"body_markdown":"@Pino I need to group the records based on a database column, and NOT database rows.","body":"@Pino I need to group the records based on a database column, and NOT database rows."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1685468952,"post_id":76366440,"comment_id":134663409,"body_markdown":"Not sure if I got your point but a simple `order by bookingId` clause added to the SQL statement of JdbcItemReader should do the trick.","body":"Not sure if I got your point but a simple <code>order by bookingId</code> clause added to the SQL statement of JdbcItemReader should do the trick."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1685469102,"post_id":76366440,"comment_id":134663443,"body_markdown":"@Mar-Z \ncan you explain how this would work? when we order it by `bookingId`, how to ensure that the processor gets the list of records that has only a particular `bookingId` (list containing all same) ?  I need to ensure that the next execution of processor should take a list with different `bookingId`","body":"@Mar-Z  can you explain how this would work? when we order it by <code>bookingId</code>, how to ensure that the processor gets the list of records that has only a particular <code>bookingId</code> (list containing all same) ?  I need to ensure that the next execution of processor should take a list with different <code>bookingId</code>"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1685470469,"post_id":76366440,"comment_id":134663711,"body_markdown":"The processor doesn&#39;t work on a list of items. It takes a single item (= database row) from the reader. Only the writer works on a list of items gathered in a chunk. My proposal of ordering was to process items in a desired sequence.","body":"The processor doesn&#39;t work on a list of items. It takes a single item (= database row) from the reader. Only the writer works on a list of items gathered in a chunk. My proposal of ordering was to process items in a desired sequence."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1685508832,"post_id":76366440,"comment_id":134668207,"body_markdown":"@Mar-Z I want one bookingId records to be executed in one thread/execution clubbed as a group. I do not want the same bookingId to be executed across multiple threads.","body":"@Mar-Z I want one bookingId records to be executed in one thread/execution clubbed as a group. I do not want the same bookingId to be executed across multiple threads."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1685546617,"post_id":76366440,"comment_id":134676175,"body_markdown":"Rahul, my solution groups records having the same valute on one or more db column, just like you want. Read it better.","body":"Rahul, my solution groups records having the same valute on one or more db column, just like you want. Read it better."}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685513917,"creation_date":1685513917,"answer_id":76370656,"question_id":76366440,"body_markdown":"The chunk-oriented processing model is **not** suitable for this use case. No matter how you group items in your query (sql `group by` for instance) , items from the same group could span multiple chunks when returned from the reader. Therefore, it is impossible to have a chunk per group.\r\n\r\nOf course it is technically possible to abuse the pattern and find a way to implement that requirement, but every solution would not be clean as it would use a model for use case that is was not designed for.\r\n\r\nThe &quot;cleanest&quot; way I see to address this is to use a partitioned step, where partitions are created by the grouping criteria (`bookingId` in your case).","title":"How to group the records in spring batch 5.x so that every thread/execution is dedicated for one group of records","body":"<p>The chunk-oriented processing model is <strong>not</strong> suitable for this use case. No matter how you group items in your query (sql <code>group by</code> for instance) , items from the same group could span multiple chunks when returned from the reader. Therefore, it is impossible to have a chunk per group.</p>\n<p>Of course it is technically possible to abuse the pattern and find a way to implement that requirement, but every solution would not be clean as it would use a model for use case that is was not designed for.</p>\n<p>The &quot;cleanest&quot; way I see to address this is to use a partitioned step, where partitions are created by the grouping criteria (<code>bookingId</code> in your case).</p>\n"},{"tags":[],"owner":{"account_id":29491517,"reputation":1,"user_id":22600442,"display_name":"Shuvam Karmakar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695215084,"creation_date":1695215084,"answer_id":77142746,"question_id":76366440,"body_markdown":"@Pino&#39;s solution has to be modified a little bit with usage of SingleItemPeekableItemReader to peek to the next record outside the original chunk  to handle the concerns raised by @Mahmoud Ben Hassine regarding chunking but it is not the &quot;cleanest&quot; solution.","title":"How to group the records in spring batch 5.x so that every thread/execution is dedicated for one group of records","body":"<p>@Pino's solution has to be modified a little bit with usage of SingleItemPeekableItemReader to peek to the next record outside the original chunk  to handle the concerns raised by @Mahmoud Ben Hassine regarding chunking but it is not the &quot;cleanest&quot; solution.</p>\n"}],"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695215084,"creation_date":1685460841,"question_id":76366440,"body_markdown":"I&#39;m using Spring batch 5 &amp; I have a usecase where I need to group the input records (from database) based on `bookingId`. Now the processor should pick the records group by group from the reader output. Also, the writer should write output group by group. \r\n\r\nHow can we achieve this with `RepositoryItemReader`. I&#39;m struggling to find a sample code for Spring Batch 5. It&#39;s a shame that there are no enough samples on this standard usecase. I would appreciate your help in this, in case you have worked on similar usecases. \r\n","title":"How to group the records in spring batch 5.x so that every thread/execution is dedicated for one group of records","body":"<p>I'm using Spring batch 5 &amp; I have a usecase where I need to group the input records (from database) based on <code>bookingId</code>. Now the processor should pick the records group by group from the reader output. Also, the writer should write output group by group.</p>\n<p>How can we achieve this with <code>RepositoryItemReader</code>. I'm struggling to find a sample code for Spring Batch 5. It's a shame that there are no enough samples on this standard usecase. I would appreciate your help in this, in case you have worked on similar usecases.</p>\n"},{"tags":["python","java","java-native-interface","apk","native"],"comments":[{"owner":{"account_id":1113934,"reputation":663,"user_id":1103781,"display_name":"Zach B."},"score":0,"creation_date":1695215109,"post_id":77142161,"comment_id":135994282,"body_markdown":"Native android libraries are not windows DLLs. I don&#39;t believe you can load a native android library on windows the way you are trying. https://developer.android.com/ndk/guides — if you&#39;re trying to port this to python, is it possible for you to remove the calls to the native library and replace them with a comparable python library?","body":"Native android libraries are not windows DLLs. I don&#39;t believe you can load a native android library on windows the way you are trying. <a href=\"https://developer.android.com/ndk/guides\" rel=\"nofollow noreferrer\">developer.android.com/ndk/guides</a> — if you&#39;re trying to port this to python, is it possible for you to remove the calls to the native library and replace them with a comparable python library?"}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695214928,"creation_date":1695214928,"answer_id":77142716,"question_id":77142161,"body_markdown":"You cannot simply load a library compiled for a completely different processor and expect it to work. You will need to set up an armeabi-v7a environment using, say, QEMU so you have a host process that can load the DLL.\r\n\r\nBut that is not all! The very first thing this `performAction` function will do is call into the JVM function pointer table (also called `JNIEnv*`) to retrieve information the supplied String object. Very probably that is not the *only* JVM call it will make. So you will also need to load this DLL from a JVM that has a sufficiently similar environment that the native code does not encounter a missing class or method.\r\n\r\nIn summary, you need **far** more tooling than just Python.","title":"Is there a way to run a class of a decompiled apk in python without actually running the application?","body":"<p>You cannot simply load a library compiled for a completely different processor and expect it to work. You will need to set up an armeabi-v7a environment using, say, QEMU so you have a host process that can load the DLL.</p>\n<p>But that is not all! The very first thing this <code>performAction</code> function will do is call into the JVM function pointer table (also called <code>JNIEnv*</code>) to retrieve information the supplied String object. Very probably that is not the <em>only</em> JVM call it will make. So you will also need to load this DLL from a JVM that has a sufficiently similar environment that the native code does not encounter a missing class or method.</p>\n<p>In summary, you need <strong>far</strong> more tooling than just Python.</p>\n"}],"owner":{"account_id":14936234,"reputation":1,"user_id":10784154,"display_name":"Drew"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695214928,"creation_date":1695210911,"question_id":77142161,"body_markdown":"I have decompiled an apk using jadx-gui and I notice the app uses a native library inside one of the classes. I just want to see how I can run a method in a class without actually running the apk file in an android emulator. I want to write a script in python that runs that class method and returns me with the result.\r\n\r\nClass code of the decompiled apk is below:\r\n\r\n```\r\npackage com.test.bap;\r\n\r\nimport java.util.Base64;\r\nimport kotlin.jvm.internal.Intrinsics;\r\n\r\n/* loaded from: classes.dex */\r\npublic final class JniBridge {\r\n    static {\r\n        if (&quot;btap&quot;.length() &gt; 0) {\r\n            System.loadLibrary(&quot;btap&quot;);\r\n        }\r\n    }\r\n\r\n    private final native byte[] performAction(int i, String str);\r\n\r\n    public final String a(String... params) {\r\n        String encodeToString = Base64.getEncoder().withoutPadding().encodeToString(performAction(12345, params[0]));\r\n        return encodeToString;\r\n    }\r\n}\r\n```\r\n\r\nI have tried to load the library using the following code but it doesn&#39;t work.\r\n\r\n```\r\nfrom ctypes import *\r\nlibc = CDLL(r&quot;C:\\Program Files (x86)\\Nox\\bin\\1\\recompile\\resources\\lib\\armeabi-v7a\\libbtap.so&quot;)\r\nprint(type(libc))\r\n```\r\n\r\nbut get the error:\r\n\r\n```\r\n  File &quot;C:\\Python311\\Lib\\ctypes\\__init__.py&quot;, line 376, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\r\nOSError: [WinError 193] %1 is not a valid Win32 application\r\n\r\n\r\n```\r\nI have been able to hook to the application in an android emulator and see the input arguments and return value using objection hooking watch method. However, I want to code this in Python and I don&#39;t want to run the app in an android emulator. I just want to use replicate that class code in Python.\r\nCan someone please guide me with how I can achieve this?\r\nThanks for your help.","title":"Is there a way to run a class of a decompiled apk in python without actually running the application?","body":"<p>I have decompiled an apk using jadx-gui and I notice the app uses a native library inside one of the classes. I just want to see how I can run a method in a class without actually running the apk file in an android emulator. I want to write a script in python that runs that class method and returns me with the result.</p>\n<p>Class code of the decompiled apk is below:</p>\n<pre><code>package com.test.bap;\n\nimport java.util.Base64;\nimport kotlin.jvm.internal.Intrinsics;\n\n/* loaded from: classes.dex */\npublic final class JniBridge {\n    static {\n        if (&quot;btap&quot;.length() &gt; 0) {\n            System.loadLibrary(&quot;btap&quot;);\n        }\n    }\n\n    private final native byte[] performAction(int i, String str);\n\n    public final String a(String... params) {\n        String encodeToString = Base64.getEncoder().withoutPadding().encodeToString(performAction(12345, params[0]));\n        return encodeToString;\n    }\n}\n</code></pre>\n<p>I have tried to load the library using the following code but it doesn't work.</p>\n<pre><code>from ctypes import *\nlibc = CDLL(r&quot;C:\\Program Files (x86)\\Nox\\bin\\1\\recompile\\resources\\lib\\armeabi-v7a\\libbtap.so&quot;)\nprint(type(libc))\n</code></pre>\n<p>but get the error:</p>\n<pre><code>  File &quot;C:\\Python311\\Lib\\ctypes\\__init__.py&quot;, line 376, in __init__\n    self._handle = _dlopen(self._name, mode)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\nOSError: [WinError 193] %1 is not a valid Win32 application\n\n\n</code></pre>\n<p>I have been able to hook to the application in an android emulator and see the input arguments and return value using objection hooking watch method. However, I want to code this in Python and I don't want to run the app in an android emulator. I just want to use replicate that class code in Python.\nCan someone please guide me with how I can achieve this?\nThanks for your help.</p>\n"},{"tags":["java","docker","datadog"],"comments":[{"owner":{"account_id":7531505,"reputation":311,"user_id":5719502,"display_name":"Zombro"},"score":0,"creation_date":1695227317,"post_id":77142488,"comment_id":135997342,"body_markdown":"how are you running your docker container ? \n\ni would recommend containerizing a datadog agent and linking it to your java container, with something like a docker-compose file, and configuring datadog in java mode","body":"how are you running your docker container ?   i would recommend containerizing a datadog agent and linking it to your java container, with something like a docker-compose file, and configuring datadog in java mode"},{"owner":{"account_id":2607022,"reputation":99,"user_id":2257986,"accept_rate":43,"display_name":"Ricardo"},"score":0,"creation_date":1695285210,"post_id":77142488,"comment_id":136004795,"body_markdown":"If Datadog is in Java mode, how to deal with the outputs that are not Java, like docker or system logs? (Agent is running as a service o VM right now)","body":"If Datadog is in Java mode, how to deal with the outputs that are not Java, like docker or system logs? (Agent is running as a service o VM right now)"}],"owner":{"account_id":2607022,"reputation":99,"user_id":2257986,"accept_rate":43,"display_name":"Ricardo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695214598,"creation_date":1695213297,"question_id":77142488,"body_markdown":"I have an Java application running on a container in the same VM that my DataDog agent is running, the agent, with a very basic and general configuration, is capture all logs and send them to Datadog site.\r\n\r\nThe issue is that they are being sent to DataDog it seems that the source is the docker image name and it causes the logs not being matched to a pipeline.\r\n\r\nSo, two questions regarding this:\r\n\r\n1 - Considering that this is a Java application on a Docker container, should the source be Java or Docker? If I pick Java some system logs will not be parsed correctly e.g. docker or OpenJDK initialization. If I pick Docker, then my application logs will not be correct. What is the recommended approach?\r\n\r\n2 - Where is the best place to configure the source? I was trying to find examples of this on the agent configuration file, but I can only find examples of log processing rules using FILE (and they are very basic).\r\n\r\nThanks in advance.","title":"Capture logs on DataDog agent from a Java application running on a Docker container","body":"<p>I have an Java application running on a container in the same VM that my DataDog agent is running, the agent, with a very basic and general configuration, is capture all logs and send them to Datadog site.</p>\n<p>The issue is that they are being sent to DataDog it seems that the source is the docker image name and it causes the logs not being matched to a pipeline.</p>\n<p>So, two questions regarding this:</p>\n<p>1 - Considering that this is a Java application on a Docker container, should the source be Java or Docker? If I pick Java some system logs will not be parsed correctly e.g. docker or OpenJDK initialization. If I pick Docker, then my application logs will not be correct. What is the recommended approach?</p>\n<p>2 - Where is the best place to configure the source? I was trying to find examples of this on the agent configuration file, but I can only find examples of log processing rules using FILE (and they are very basic).</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","intellij-idea","sdk","option-type"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1673865535,"post_id":75132606,"comment_id":132585070,"body_markdown":"Try to close the project (File | Close Project), close the IDE, open the project in OS file manager and delete the .idea directory. Re-import the project as per https://www.jetbrains.com/help/idea/import-project-or-module-wizard.html#open-project and configure JDK from scratch under (File | Project Structure | SDKs) and (File | Project Structure | Project)","body":"Try to close the project (File | Close Project), close the IDE, open the project in OS file manager and delete the .idea directory. Re-import the project as per <a href=\"https://www.jetbrains.com/help/idea/import-project-or-module-wizard.html#open-project\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a> and configure JDK from scratch under (File | Project Structure | SDKs) and (File | Project Structure | Project)"},{"owner":{"account_id":27541541,"reputation":21,"user_id":21018204,"display_name":"Zaitis"},"score":0,"creation_date":1673867601,"post_id":75132606,"comment_id":132585693,"body_markdown":"You are awesome! Now i can run my project! Thanks","body":"You are awesome! Now i can run my project! Thanks"},{"owner":{"account_id":3901102,"reputation":91,"user_id":3228950,"display_name":"slaman"},"score":0,"creation_date":1676663734,"post_id":75132606,"comment_id":133189995,"body_markdown":"It is possible the Run/Debug Configuration settings (copied from another computer?) don&#39;t match the project settings","body":"It is possible the Run/Debug Configuration settings (copied from another computer?) don&#39;t match the project settings"}],"answers":[{"tags":[],"owner":{"account_id":3878753,"reputation":312,"user_id":3211953,"accept_rate":25,"display_name":"Bar Hoshen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673863690,"creation_date":1673863690,"answer_id":75132715,"question_id":75132606,"body_markdown":"Your Intellij is set to use the SDK but your project isn&#39;t.\r\nFile -&gt; Project structure -&gt; Project -&gt; Project SDK\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4Fpy7.png","title":"Failed to resolve SDK","body":"<p>Your Intellij is set to use the SDK but your project isn't.\nFile -&gt; Project structure -&gt; Project -&gt; Project SDK\n<a href=\"https://i.stack.imgur.com/4Fpy7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Fpy7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":28163882,"reputation":161,"user_id":21523331,"display_name":"louiskun"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1691142069,"creation_date":1680158611,"answer_id":75884885,"question_id":75132606,"body_markdown":"I encountered the same problem as you. My solution is to click Edit Configurations on the left side of the run button, and select to modify jdk in the pop-up interface.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aV96I.png","title":"Failed to resolve SDK","body":"<p>I encountered the same problem as you. My solution is to click Edit Configurations on the left side of the run button, and select to modify jdk in the pop-up interface.</p>\n<p><img src=\"https://i.stack.imgur.com/aV96I.png\" alt=\"enter image description here\" /></p>\n"},{"tags":[],"owner":{"account_id":4993801,"reputation":997,"user_id":4015129,"display_name":"Prashant Sahoo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682591037,"creation_date":1682591037,"answer_id":76119320,"question_id":75132606,"body_markdown":"I was getting the same message while running the Flink java project in InteliiJ Idea.\r\nI deleted the .idea folder from project and rebuild the project. Then it resolved.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tBw5N.png","title":"Failed to resolve SDK","body":"<p>I was getting the same message while running the Flink java project in InteliiJ Idea.\nI deleted the .idea folder from project and rebuild the project. Then it resolved.</p>\n<p><a href=\"https://i.stack.imgur.com/tBw5N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tBw5N.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":28876580,"reputation":11,"user_id":22116976,"display_name":"divya k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687618945,"creation_date":1687469284,"answer_id":76535751,"question_id":75132606,"body_markdown":"Check the path on Run/debug configuration dialog:\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/ce6Gx.png","title":"Failed to resolve SDK","body":"<p>Check the path on Run/debug configuration dialog:\n<a href=\"https://i.stack.imgur.com/ce6Gx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ce6Gx.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":27541541,"reputation":21,"user_id":21018204,"display_name":"Zaitis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5505,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1695214383,"creation_date":1673863226,"question_id":75132606,"body_markdown":"On my first post I am using Inteliij and I have problem with my project. I was make project in Spring Boot. All works fine on this computer. Today when I copy this project from my computer to another I have a trouble when i try run project with &quot;Failed to resolve SDK try to Find SDK&quot;. When i click on blue link, it dosn&#39;t work.\r\n\r\n![information about problem](https://i.stack.imgur.com/pUZvG.png). \r\n\r\n\r\n\r\n\r\n\r\n\r\nI am checking Settings=&gt;build..=&gt;compiler=&gt;java compiler.[java compiler](https://i.stack.imgur.com/GCw27.png) and project structure=&gt;SDKs. [SDK](https://i.stack.imgur.com/rdAOA.png)All looks like good. I don&#39;t have any idea why this dosn&#39;t work. Maybe someone have similar problem and You know how to solve this issue.\r\n\r\nThanks.\r\n\r\nEDIT:\r\n[GatePass][1]\r\n\r\n  [1]: https://i.stack.imgur.com/vpKck.png","title":"Failed to resolve SDK","body":"<p>On my first post I am using Inteliij and I have problem with my project. I was make project in Spring Boot. All works fine on this computer. Today when I copy this project from my computer to another I have a trouble when i try run project with &quot;Failed to resolve SDK try to Find SDK&quot;. When i click on blue link, it dosn't work.</p>\n<p><img src=\"https://i.stack.imgur.com/pUZvG.png\" alt=\"information about problem\" />.</p>\n<p>I am checking Settings=&gt;build..=&gt;compiler=&gt;java compiler.<a href=\"https://i.stack.imgur.com/GCw27.png\" rel=\"nofollow noreferrer\">java compiler</a> and project structure=&gt;SDKs. <a href=\"https://i.stack.imgur.com/rdAOA.png\" rel=\"nofollow noreferrer\">SDK</a>All looks like good. I don't have any idea why this dosn't work. Maybe someone have similar problem and You know how to solve this issue.</p>\n<p>Thanks.</p>\n<p>EDIT:\n<a href=\"https://i.stack.imgur.com/vpKck.png\" rel=\"nofollow noreferrer\">GatePass</a></p>\n"},{"tags":["java","maven","installation"],"answers":[{"tags":[],"owner":{"account_id":10298373,"reputation":148,"user_id":7597798,"display_name":"S Manikandan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1571044203,"creation_date":1571044203,"answer_id":58373500,"question_id":58373147,"body_markdown":"from java 11 jaxb annoations has been removed and jaxb dependency to your project","title":"XmlElement annotation not found","body":"<p>from java 11 jaxb annoations has been removed and jaxb dependency to your project</p>\n"},{"tags":[],"owner":{"account_id":6360561,"reputation":2582,"user_id":4936193,"display_name":"jurl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695214355,"creation_date":1695214355,"answer_id":77142645,"question_id":58373147,"body_markdown":"For me it happened after a sudden update of `jakarta.xml.bind:jakarta.xml.bind-api:4.0.0` from another package I import.\r\n\r\nI added this strictly annotation and it solved my runtime exception:\r\n\r\n```gradle\r\nimplementation (group: &#39;jakarta.xml.bind&#39;, name: &#39;jakarta.xml.bind-api&#39;) {\r\n    version {\r\n        // Fix NoClassDefFoundError: javax/xml/bind/annotation/XmlElement\r\n        strictly &#39;2.3.3&#39;\r\n    }\r\n}\r\n```\r\n\r\nI didn&#39;t add `javax.xml.bind:jaxb-api` again because it was just updated to the newer jakarta version which replaces it.","title":"XmlElement annotation not found","body":"<p>For me it happened after a sudden update of <code>jakarta.xml.bind:jakarta.xml.bind-api:4.0.0</code> from another package I import.</p>\n<p>I added this strictly annotation and it solved my runtime exception:</p>\n<pre><code>implementation (group: 'jakarta.xml.bind', name: 'jakarta.xml.bind-api') {\n    version {\n        // Fix NoClassDefFoundError: javax/xml/bind/annotation/XmlElement\n        strictly '2.3.3'\n    }\n}\n</code></pre>\n<p>I didn't add <code>javax.xml.bind:jaxb-api</code> again because it was just updated to the newer jakarta version which replaces it.</p>\n"}],"owner":{"account_id":14945761,"reputation":45,"user_id":10791083,"display_name":"Josko de Boer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2891,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":58373500,"answer_count":2,"score":2,"last_activity_date":1695214355,"creation_date":1571043030,"question_id":58373147,"body_markdown":"Apparently, the XMLElement annotation class can&#39;t be found. The project builds and deploys successfully on another computer, which makes me think this is an installation issue. However, I can&#39;t find any way of fixing this. \r\n\r\nI&#39;ve already switched by installation to run on oracle JDK:\r\n\r\n    @:~/$ java --version\r\n        java 11.0.4 2019-07-16 LTS\r\n        Java(TM) SE Runtime Environment 18.9 (build 11.0.4+10-LTS)\r\n        Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.4+10-LTS, mixed mode)\r\n    @:~/$ javac --version\r\n        javac 11.0.4\r\n\r\n\r\nThe error:\r\n   \r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlElement\r\n        at java.net.URLClassLoader.findClass (URLClassLoader.java:436)\r\n        at java.lang.ClassLoader.loadClass (ClassLoader.java:588)\r\n        at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\r\n        at com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector.&lt;init&gt; (JaxbAnnotationIntrospector.java:139)\r\n        at com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector.&lt;init&gt; (JaxbAnnotationIntrospector.java:126)\r\n        at com.fasterxml.jackson.module.jaxb.JaxbAnnotationModule.setupModule (JaxbAnnotationModule.java:90)\r\n        at com.fasterxml.jackson.databind.ObjectMapper.registerModule (ObjectMapper.java:751)\r\n        at com.fasterxml.jackson.databind.ObjectMapper.registerModules (ObjectMapper.java:951)\r\n        at org.apache.beam.sdk.options.PipelineOptionsFactory.&lt;clinit&gt; (PipelineOptionsFactory.java:468)\r\n        at com.spilgames.dataflow.portal.flows.PortalEvents.main (PortalEvents.java:73)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:567)\r\n        at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n        at java.lang.Thread.run (Thread.java:830)\r\n\r\n\r\nIt seems that one of the dependencies (codehaus.mojo) is referencing to it, but it doesn&#39;t exist:\r\n\r\n    [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project dwh-dataflow-portal: An exception occured while executing the Java class. javax/xml/bind/annotation/XmlElement: javax.xml.bind.annotation.XmlElement -&gt; [Help 1]\r\n        org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project dwh-dataflow-portal: An exception occured while executing the Java class. javax/xml/bind/annotation/XmlElement\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n            at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n            at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n            at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n            at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n            at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n            at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n            at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n            at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke (Method.java:567)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)","title":"XmlElement annotation not found","body":"<p>Apparently, the XMLElement annotation class can't be found. The project builds and deploys successfully on another computer, which makes me think this is an installation issue. However, I can't find any way of fixing this. </p>\n\n<p>I've already switched by installation to run on oracle JDK:</p>\n\n<pre><code>@:~/$ java --version\n    java 11.0.4 2019-07-16 LTS\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.4+10-LTS)\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.4+10-LTS, mixed mode)\n@:~/$ javac --version\n    javac 11.0.4\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlElement\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:436)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:588)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\n    at com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector.&lt;init&gt; (JaxbAnnotationIntrospector.java:139)\n    at com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector.&lt;init&gt; (JaxbAnnotationIntrospector.java:126)\n    at com.fasterxml.jackson.module.jaxb.JaxbAnnotationModule.setupModule (JaxbAnnotationModule.java:90)\n    at com.fasterxml.jackson.databind.ObjectMapper.registerModule (ObjectMapper.java:751)\n    at com.fasterxml.jackson.databind.ObjectMapper.registerModules (ObjectMapper.java:951)\n    at org.apache.beam.sdk.options.PipelineOptionsFactory.&lt;clinit&gt; (PipelineOptionsFactory.java:468)\n    at com.spilgames.dataflow.portal.flows.PortalEvents.main (PortalEvents.java:73)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:567)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\n    at java.lang.Thread.run (Thread.java:830)\n</code></pre>\n\n<p>It seems that one of the dependencies (codehaus.mojo) is referencing to it, but it doesn't exist:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project dwh-dataflow-portal: An exception occured while executing the Java class. javax/xml/bind/annotation/XmlElement: javax.xml.bind.annotation.XmlElement -&gt; [Help 1]\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default-cli) on project dwh-dataflow-portal: An exception occured while executing the Java class. javax/xml/bind/annotation/XmlElement\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:567)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n</code></pre>\n"},{"tags":["java","string","exception"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1694991527,"post_id":77123847,"comment_id":135960650,"body_markdown":"Don&#39;t do `userInputScanner.close();` - this will also close the underlying `System.in`, preventing any further possibility of getting input","body":"Don&#39;t do <code>userInputScanner.close();</code> - this will also close the underlying <code>System.in</code>, preventing any further possibility of getting input"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694991714,"post_id":77123847,"comment_id":135960659,"body_markdown":"I&#39;d also consider making use of regular expression capture groups, something like `&lt;(\\d*\\.?\\d*),( )?(\\d*\\.?\\d*)&gt;` as a rudimentary/rough starting point","body":"I&#39;d also consider making use of regular expression capture groups, something like <code>&lt;(\\d*\\.?\\d*),( )?(\\d*\\.?\\d*)&gt;</code> as a rudimentary/rough starting point"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694992076,"post_id":77123847,"comment_id":135960680,"body_markdown":"I&#39;d also make use of [try-catch-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) rather then relying on all the `if-else` statements","body":"I&#39;d also make use of <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-catch-with-resources</a> rather then relying on all the <code>if-else</code> statements"},{"owner":{"account_id":29468521,"reputation":1,"user_id":22581585,"display_name":"Colin Baumgartner"},"score":0,"creation_date":1694992627,"post_id":77123847,"comment_id":135960727,"body_markdown":"Thank you for the help, I also think I might&#39;ve neglected to mention that the scanner buffer is empty (&quot;&quot;), I&#39;m really not sure if it&#39;s a delimiter issue or","body":"Thank you for the help, I also think I might&#39;ve neglected to mention that the scanner buffer is empty (&quot;&quot;), I&#39;m really not sure if it&#39;s a delimiter issue or"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694993184,"post_id":77123847,"comment_id":135960765,"body_markdown":"Honestly, I don&#39;t think `Scanner`, in this case, is the best choice, but&#39;s just my opinion","body":"Honestly, I don&#39;t think <code>Scanner</code>, in this case, is the best choice, but&#39;s just my opinion"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694995821,"creation_date":1694992807,"answer_id":77123945,"question_id":77123847,"body_markdown":"&gt; _&#39;... This program takes input from the user in the form of a vector `&lt;xcoord,ycoord&gt;`. ...&#39;_\r\n\r\nIf the parse is simple enough, just use _String_ methods.\r\n\r\nHere is an example.\r\n\r\n```java\r\nString s = &quot;&lt;1, 2&gt;&quot;;\r\nint n = s.length() - 1, i;\r\nif (s.charAt(0) != &#39;&lt;&#39;) throw new Exception(&quot;Missing the first arrow&quot;);\r\nif (s.charAt(n) != &#39;&gt;&#39;) throw new Exception(&quot;Missing the end arrow&quot;);\r\ns = s.substring(1, n);\r\nif ((i = s.indexOf(&#39;,&#39;)) == -1) throw new Exception(&quot;Missing the middle comma&quot;);\r\nif (s.lastIndexOf(&#39;,&#39;) != i) throw new Exception(&quot;Extra comma&quot;);\r\nString[] v = s.split(&quot;, +&quot;);\r\nif (v[0].isEmpty()) throw new Exception(&quot;Missing the x coord&quot;);\r\nif (v[1].isEmpty()) throw new Exception(&quot;Missing the y coord&quot;);\r\n\r\nSystem.out.println(&quot;s = &quot; + s);\r\nSystem.out.println(&quot;v[0] = &quot; + v[0].trim());\r\nSystem.out.println(&quot;v[1] = &quot; + v[1].trim());\r\n```\r\n\r\nOutput\r\n\r\n```none\r\ns = 1, 2\r\nv[0] = 1\r\nv[1] = 2\r\n```","title":"Issue with reading user input in Java (Delimiter/Pattern issue)","body":"<blockquote>\n<p><em>'... This program takes input from the user in the form of a vector <code>&lt;xcoord,ycoord&gt;</code>. ...'</em></p>\n</blockquote>\n<p>If the parse is simple enough, just use <em>String</em> methods.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;&lt;1, 2&gt;&quot;;\nint n = s.length() - 1, i;\nif (s.charAt(0) != '&lt;') throw new Exception(&quot;Missing the first arrow&quot;);\nif (s.charAt(n) != '&gt;') throw new Exception(&quot;Missing the end arrow&quot;);\ns = s.substring(1, n);\nif ((i = s.indexOf(',')) == -1) throw new Exception(&quot;Missing the middle comma&quot;);\nif (s.lastIndexOf(',') != i) throw new Exception(&quot;Extra comma&quot;);\nString[] v = s.split(&quot;, +&quot;);\nif (v[0].isEmpty()) throw new Exception(&quot;Missing the x coord&quot;);\nif (v[1].isEmpty()) throw new Exception(&quot;Missing the y coord&quot;);\n\nSystem.out.println(&quot;s = &quot; + s);\nSystem.out.println(&quot;v[0] = &quot; + v[0].trim());\nSystem.out.println(&quot;v[1] = &quot; + v[1].trim());\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>s = 1, 2\nv[0] = 1\nv[1] = 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695213864,"creation_date":1695213864,"answer_id":77142575,"question_id":77123847,"body_markdown":"I don&#39;t think the **Scanner#useDelimiter()** is really what you want to use for this sort of thing. You are expecting the User to enter in vector data then you want to validate that entry to ensure it is in the correct format. If it isn&#39;t then provide a relatively detailed reason why it&#39;s not valid. \r\n\r\nTo be honest, entry mistakes will always be done especially if it involves more that one character but, the User will have far greater success with his/her entries if....they know exactly what they are expected to enter. Throw the User a bone and let them know before you toss out a prompt like: `&quot;Please enter your vector&quot;`. You would find that if an entry error is made, then just an `Invalid Entry! (34.4, 55.1&gt;) - Try again...` message should pretty much suffice. The User can see exactly where the problem is and then make a correct attempt. \r\n\r\nTo validate the a User&#39;s entry, the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method can be used along with a [Regular Expression](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html) (regex), for *example*:\r\n\r\n```\r\nString commandLine = &quot;&quot;;\r\nwhile (commandLine.isEmpty()) {\r\n    System.out.print(&quot;Please enter your vector data (q to quit): -&gt; &quot;);\r\n    commandLine = userInputScanner.nextLine().trim();\r\n\r\n    /* Validate Entry - If the entry does NOT match the regex \r\n       then inform User and allow him/her to try again.    */\r\n    if (!commandLine.matches(&quot;^(\\\\&lt;(-?\\\\d+(\\\\.\\\\d+)?),\\\\s?(-?\\\\d+(\\\\.\\\\d+)?)\\\\&gt;)$&quot;)) {\r\n        System.out.println(&quot;Invalid Vector Entry Supplied! (&quot; + commandLine + &quot;) - Try again...&quot; );\r\n        commandLine = &quot;&quot;;  // Empty `commandLine` to ensure re-loop.\r\n    }\r\n}\r\nVectorCoordinate vc = VectorCalculator.parseVectorString(commandLine);\r\n```\r\n\r\n**What does the regex passed to the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method mean?**\r\n \r\n\r\n - `^` Asserts position at start of the String;\r\n - `\\\\&lt;` The first literal character must be the Less-Than (&lt;) character;\r\n - `(-?\\\\d+(\\\\.\\\\d+)?)` Next must be a string representation of a signed\r\n   or unsigned Integer or Floating Point value;\r\n - `,` The supplied numerical value must be followed by a comma (,);\r\n - `\\\\s?` The comma may or may not be followed by a single white-space;\r\n - `(-?\\\\d+(\\\\.\\\\d+)?)` The comma (or comma + white-space) must be followed by a string\r\n   representation of a signed or unsigned Integer or Floating Point\r\n   value;\r\n - `\\\\&gt;` The last literal character must be the Greater-Than (&gt;)\r\n   character;\r\n - `$` Asserts position at the end of the String.\r\n\r\nBelow is a runnable which *similarly* puts the above code into practice. The application consists of three classes, the **MainStartClass** class, the **VectorCalculator** class, and the **VectoCoordinate** class. The User supplied Vector data is placed into an instance of VectorCoordinate which will hold the `x` and `y` coordintes supplied. The User can continuously supply vector coordinates until &#39;q&#39; for quit is entered. All VectorCoordinate instances are stored within a List Interface of VectorCoordinate which can be displayed when the User quits. Please be sure to read all the comments in code:\r\n\r\n----------\r\n\r\n**The MainStartClass class:**\r\n\r\n```\r\npublic class MainStartClass {\r\n\r\n    /**\r\n     * First (and ONLY) Scanner object for `System.in`:&lt;br&gt;\r\n     * Do Not close this resource unless you are absolutely sure\r\n     * you will not need it again during your application run. If\r\n     * you do, you will need to restart your application in order\r\n     * to use `System.in` again. The JVM will automatically close \r\n     * this resource when the application ends. This object can be \r\n     * used globally:                 \r\n    */\r\n    public final static java.util.Scanner userInputScanner = new java.util.Scanner(System.in); \r\n    \r\n    /**\r\n     * A List Interface object of VectorCoordinate to store \r\n     * valid User supplied vector data: (see VectorCoordinate\r\n     * class). This object can be used globally:   \r\n    */\r\n    public static java.util.List&lt;VectorCoordinate&gt; coordsList = new java.util.ArrayList&lt;&gt;();\r\n    \r\n    /**\r\n     * Not all Terminal or Console windows utilize the same newline \r\n     * character sequence. This ensures that the `newline` character \r\n     * sequence complies with the Operating System this application \r\n     * is run in. This object can be used globally: \r\n     */\r\n    public static final String LS = System.lineSeparator();\r\n    \r\n    \r\n    // Application entry point:\r\n    public static void main(String[] args) {\r\n        /* App started this way to avoid the need for statics \r\n           (unless we actually want them):        */\r\n        new MainStartClass().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        /* Inform what application is about. Give Users a fighting chance\r\n           towards a proper entry. Let them know what is expected of them:  */\r\n        System.out.println(&quot;Welcome to the Vector Calculator:&quot; + LS \r\n                         + &quot;=================================&quot; + LS\r\n                         + &quot;You will be prompted to enter vector data which will ultimately&quot; + LS \r\n                         + &quot;get parsed into X and Y Coordinates. All supplied coordinates&quot; + LS \r\n                         + &quot;are to be enclosed within Chevron Brackets (&lt; &gt;) and delimited&quot; + LS \r\n                         + &quot;with a comma (,). Both Integer and or Floating Point values can&quot; + LS \r\n                         + &quot;be supplied. The Integer values will be auto-converted to double&quot; + LS \r\n                         + &quot;type. Here is an example entry: -  &lt;26, 67.8&gt;&quot; + LS \r\n                         + &quot;----------------------------------------------------------------&quot; + LS); \r\n        \r\n        // Prompt #1 - Prompt for User to enter in Vector data:\r\n        String commandLine = &quot;&quot;;\r\n        \r\n        // Continually ask User for vector data unless &#39;q&#39; was supplied to quit:\r\n        while (commandLine.isEmpty()) {\r\n            System.out.print(&quot;Please enter your vector data (q to quit): -&gt; &quot;); \r\n            commandLine = userInputScanner.nextLine().trim(); \r\n            \r\n            // Was &#39;q&#39; supplied to quit?\r\n            if (commandLine.equalsIgnoreCase(&quot;q&quot;)) {\r\n                // Is quit really desired (see the `quit()` method)?\r\n                if(!quit()) {\r\n                    // No...Empty `commandLine` so to ensure re-loop:\r\n                    commandLine = &quot;&quot;;\r\n                }\r\n                // Otherwise...\r\n                continue; // Because `commandLine` is not empty, this will exit the `while` loop\r\n            }\r\n            \r\n            /* Parse the supplied vector string and print out values.\r\n               If `vc` does not equal null, then the User entry is valid \r\n               and is stored as `VectorCoordinate` (see the VectorCoordinate \r\n               Class - Also see the `VectorCalculator` class `parseVectorString()`\r\n               method):                                               */\r\n            VectorCoordinate vc = VectorCalculator.parseVectorString(commandLine); \r\n            if (vc != null) {\r\n                coordsList.add(vc);  // Add valid entry to List.\r\n                System.out.println(&quot;X Coordinate = &quot; + vc.getX() + &quot;  |  Y Coordinate = &quot; + vc.getY());\r\n            }\r\n            // Otherwise...\r\n            commandLine = &quot;&quot;;       // Empty `commandLine` so to ensure re-loop.\r\n            System.out.println();   // Display a blank line for aesthetics.\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * This method prompts the User to ensure that he/she truly wants to \r\n     * quit the application. \r\n     * &lt;p&gt;\r\n     * If `n` (no) is supplied, then boolean false is returned and this \r\n     * then gets interpreted that quit is not desired and the application \r\n     * continues to prompt for, and accept, Vector entries.\r\n     * &lt;p&gt;\r\n     * If `y` (yes) is supplied then the User is confronted with yet \r\n     * another prompt which asks if he/she wants to display the stored \r\n     * Vector entries. If at this point `n` (no) is supplied then the \r\n     * application will simply return boolean true which is later interpreted \r\n     * as a desire to quit. If however, `y` (yes) is supplied, then \r\n     * the User is displayed all the stored vector entries and then the \r\n     * application simply returns true which is also later interpreted as \r\n     * a desire to quit.&lt;br&gt;&lt;br&gt;\r\n     * \r\n     * @return (boolean) \r\n     */\r\n    private boolean quit() {\r\n        boolean res = false;\r\n        // Prompt #2 - Prompt for `Are You Sure...`:\r\n        String yn = &quot;&quot;;\r\n        while (yn.isEmpty()) {\r\n            System.out.print(&quot;Are you sure you want to quit (y/n)? -&gt; &quot;);\r\n            yn = userInputScanner.nextLine().trim();\r\n            if (!yn.matches(&quot;(?i)[yn]&quot;)) {\r\n                System.err.println(&quot;Invalid Entry Response! Try again...&quot; + LS);\r\n                yn = &quot;&quot;;\r\n            }\r\n        }\r\n        if (yn.equalsIgnoreCase(&quot;y&quot;)) {\r\n            // Prompt #3 - Prompt to display store Vector entries but only if there are any: \r\n            yn = &quot;&quot;;\r\n            while (yn.isEmpty() &amp;&amp; !coordsList.isEmpty()) {\r\n                System.out.print(&quot;Do you want to display all User Entered Vectors first? -&gt; &quot;);\r\n                yn = userInputScanner.nextLine().trim();\r\n                if (!yn.matches(&quot;(?i)[yn]&quot;)) {\r\n                    System.err.println(&quot;Invalid Entry Response! Try again...&quot; + LS);\r\n                    yn = &quot;&quot;;\r\n                }\r\n            }\r\n            if (yn.equalsIgnoreCase(&quot;y&quot;)) {\r\n                System.out.println(LS + &quot;Vectors Entered By User:&quot; + LS +\r\n                                        &quot;------------------------&quot;);\r\n                for (VectorCoordinate c : coordsList) {\r\n                    System.out.printf(&quot;X = %-10s Y = %-10s%n&quot;, c.getX(), c.getY());\r\n                }\r\n                System.out.println(&quot;------------------------&quot;);\r\n            }\r\n            System.out.println(LS + &quot;Quiting - Bye Bye.&quot; + LS);\r\n            res = true;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```\r\n\r\n**The VectorCalculator class:**\r\n\r\n```\r\n/**\r\n * Used for validating and parsing supplied vector coordinate strings\r\n * from User.\r\n */\r\npublic class VectorCalculator {\r\n\r\n    /**\r\n     * Used for validating and parsing supplied vector coordinate strings.&lt;br&gt;&lt;br&gt;\r\n     * \r\n     * @param commandLine (String) Vector data in the format: {@code &quot;&lt;n, n&gt;&quot;}.&lt;br&gt;\r\n     * @return \r\n     */\r\n    public static VectorCoordinate parseVectorString(String commandLine) {\r\n        double x = 0.0d;    // To hold the Vector X Coordinate:\r\n        double y = 0.0d;    // To hold the Vector Y Coordinate:\r\n        \r\n        /* Validate supplied commandLine string:\r\n           Is the supplied string in `commandLine` valid?     */\r\n        if (!commandLine.matches(&quot;^(\\\\&lt;(-?\\\\d+(\\\\.\\\\d+)?),\\\\s?(-?\\\\d+(\\\\.\\\\d+)?)\\\\&gt;)$&quot;)) {\r\n            // No... Determine what is wrong with it and display that info:\r\n            /* Copy commandLine into `cl` but first, remove any possible double \r\n               (or more) white-spacing from within the vector string and make \r\n               them single spaced. Also trim of any leading or trailing white-\r\n            spaces:                    */\r\n            String cl = commandLine.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).trim();\r\n            \r\n            // Prepare for error messaging. All errors found are concantenated together:\r\n            StringBuilder errMsg = new StringBuilder(&quot;&quot;);\r\n            \r\n            // Is the supplied vector string empty?\r\n            if (cl.isEmpty()) { errMsg.append(&quot;The supplied Vector string can not be empty! &quot;); }\r\n            \r\n            // If the supplied string doesn&#39;t start with the &#39;&lt;&#39; character:\r\n            if (!cl.startsWith(&quot;&lt;&quot;)) { errMsg.append(&quot;Missing Opening Bracket (&lt;)! &quot;); }\r\n            \r\n            // If the supplied string doesn&#39;t end with the &#39;&gt;&#39; character:\r\n            if (!cl.endsWith(&quot;&gt;&quot;)) { errMsg.append(&quot;Missing Closing Bracket (&gt;)! &quot;); }\r\n            \r\n            // Remove the brackets from the suppliec vector string:\r\n            cl = cl.replaceAll(&quot;[&lt;&gt;]&quot;, &quot;&quot;);\r\n            \r\n            // If the current vector string does not contain a comma (,).\r\n            if (!cl.contains(&quot;,&quot;)) { errMsg.append(&quot;Missing comma (,) delimiter between coordinates! &quot;); }\r\n            \r\n            // Otherwise...split the coordinate values and validate them:\r\n            else {\r\n                /* Split the coordinate values based on a comma delimter \r\n                   and 0 to unlimited number of spaces after the comma.  */\r\n                String[] coords = cl.split(&quot;,\\\\s*&quot;);\r\n                \r\n                // If the length of coords = 0 then no coordinate values were supplied!\r\n                if (coords.length == 0) { errMsg.append(&quot;Missing the X/Y Coordinates!&quot;); }\r\n                \r\n                // If the length of coords = 1 then there was no `y` coordinate value supplied!\r\n                else if (coords.length == 1) { errMsg.append(&quot;Missing the Y Coordinate!&quot;); }\r\n                \r\n                // If `coords[0]` is empty then there is no `x` coordinate value supplied!\r\n                else if (coords[0].isEmpty()) { errMsg.append(&quot;Missing the X Coordinate!&quot;); }\r\n            }\r\n            \r\n            // Inform User of all the problems and return `null`:\r\n            System.err.println(&quot;Vector Parse Error! - Invalid Vector Data Supplied (&quot; \r\n                               + commandLine + &quot;)! - &quot; + errMsg.toString());\r\n            return null;\r\n        }\r\n        \r\n        // Yes...The supplied Vector String appears to be valid!\r\n        /* Remove the brackets (using the `String#substring()` method) \r\n           and split the coordinate values into a String[] arrays based \r\n           on a comma delimter and 0 to unlimited number of spaces after \r\n           the comma (if any):               */\r\n        String[] xy_coords = commandLine.substring(1, commandLine.length() - 1).split(&quot;,\\\\s*&quot;);\r\n        \r\n         /* Convert the above array x and y coordinate string numerical values \r\n            to double type values:           */\r\n        x = Double.parseDouble(xy_coords[0]);\r\n        y = Double.parseDouble(xy_coords[1]);\r\n        \r\n        // Create a new VectorCoordinate and return it.\r\n        return new VectorCoordinate(x, y);\r\n    }\r\n}\r\n```\r\n\r\n**The VectorCoordinate class:**\r\n\r\n```\r\npublic class VectorCoordinate {\r\n    \r\n    double x;\r\n    double y;\r\n    \r\n    /**\r\n     * There are no Setters for `x` and `y`, only Getters. Typical setting of \r\n     * `x` and `y` would be through this constructor.&lt;br&gt;&lt;br&gt;\r\n     * \r\n     * @param x (double)\r\n     * \r\n     * @param y (double)\r\n     */\r\n    public VectorCoordinate(double x, double y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public double getX() {\r\n        return this.x;\r\n    }\r\n\r\n    public double getY() {\r\n        return this.y;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.x + &quot;, &quot; + this.y;\r\n    }\r\n}\r\n```","title":"Issue with reading user input in Java (Delimiter/Pattern issue)","body":"<p>I don't think the <strong>Scanner#useDelimiter()</strong> is really what you want to use for this sort of thing. You are expecting the User to enter in vector data then you want to validate that entry to ensure it is in the correct format. If it isn't then provide a relatively detailed reason why it's not valid.</p>\n<p>To be honest, entry mistakes will always be done especially if it involves more that one character but, the User will have far greater success with his/her entries if....they know exactly what they are expected to enter. Throw the User a bone and let them know before you toss out a prompt like: <code>&quot;Please enter your vector&quot;</code>. You would find that if an entry error is made, then just an <code>Invalid Entry! (34.4, 55.1&gt;) - Try again...</code> message should pretty much suffice. The User can see exactly where the problem is and then make a correct attempt.</p>\n<p>To validate the a User's entry, the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method can be used along with a <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">Regular Expression</a> (regex), for <em>example</em>:</p>\n<pre><code>String commandLine = &quot;&quot;;\nwhile (commandLine.isEmpty()) {\n    System.out.print(&quot;Please enter your vector data (q to quit): -&gt; &quot;);\n    commandLine = userInputScanner.nextLine().trim();\n\n    /* Validate Entry - If the entry does NOT match the regex \n       then inform User and allow him/her to try again.    */\n    if (!commandLine.matches(&quot;^(\\\\&lt;(-?\\\\d+(\\\\.\\\\d+)?),\\\\s?(-?\\\\d+(\\\\.\\\\d+)?)\\\\&gt;)$&quot;)) {\n        System.out.println(&quot;Invalid Vector Entry Supplied! (&quot; + commandLine + &quot;) - Try again...&quot; );\n        commandLine = &quot;&quot;;  // Empty `commandLine` to ensure re-loop.\n    }\n}\nVectorCoordinate vc = VectorCalculator.parseVectorString(commandLine);\n</code></pre>\n<p><strong>What does the regex passed to the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method mean?</strong></p>\n<ul>\n<li><code>^</code> Asserts position at start of the String;</li>\n<li><code>\\\\&lt;</code> The first literal character must be the Less-Than (&lt;) character;</li>\n<li><code>(-?\\\\d+(\\\\.\\\\d+)?)</code> Next must be a string representation of a signed\nor unsigned Integer or Floating Point value;</li>\n<li><code>,</code> The supplied numerical value must be followed by a comma (,);</li>\n<li><code>\\\\s?</code> The comma may or may not be followed by a single white-space;</li>\n<li><code>(-?\\\\d+(\\\\.\\\\d+)?)</code> The comma (or comma + white-space) must be followed by a string\nrepresentation of a signed or unsigned Integer or Floating Point\nvalue;</li>\n<li><code>\\\\&gt;</code> The last literal character must be the Greater-Than (&gt;)\ncharacter;</li>\n<li><code>$</code> Asserts position at the end of the String.</li>\n</ul>\n<p>Below is a runnable which <em>similarly</em> puts the above code into practice. The application consists of three classes, the <strong>MainStartClass</strong> class, the <strong>VectorCalculator</strong> class, and the <strong>VectoCoordinate</strong> class. The User supplied Vector data is placed into an instance of VectorCoordinate which will hold the <code>x</code> and <code>y</code> coordintes supplied. The User can continuously supply vector coordinates until 'q' for quit is entered. All VectorCoordinate instances are stored within a List Interface of VectorCoordinate which can be displayed when the User quits. Please be sure to read all the comments in code:</p>\n<hr />\n<p><strong>The MainStartClass class:</strong></p>\n<pre><code>public class MainStartClass {\n\n    /**\n     * First (and ONLY) Scanner object for `System.in`:&lt;br&gt;\n     * Do Not close this resource unless you are absolutely sure\n     * you will not need it again during your application run. If\n     * you do, you will need to restart your application in order\n     * to use `System.in` again. The JVM will automatically close \n     * this resource when the application ends. This object can be \n     * used globally:                 \n    */\n    public final static java.util.Scanner userInputScanner = new java.util.Scanner(System.in); \n    \n    /**\n     * A List Interface object of VectorCoordinate to store \n     * valid User supplied vector data: (see VectorCoordinate\n     * class). This object can be used globally:   \n    */\n    public static java.util.List&lt;VectorCoordinate&gt; coordsList = new java.util.ArrayList&lt;&gt;();\n    \n    /**\n     * Not all Terminal or Console windows utilize the same newline \n     * character sequence. This ensures that the `newline` character \n     * sequence complies with the Operating System this application \n     * is run in. This object can be used globally: \n     */\n    public static final String LS = System.lineSeparator();\n    \n    \n    // Application entry point:\n    public static void main(String[] args) {\n        /* App started this way to avoid the need for statics \n           (unless we actually want them):        */\n        new MainStartClass().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        /* Inform what application is about. Give Users a fighting chance\n           towards a proper entry. Let them know what is expected of them:  */\n        System.out.println(&quot;Welcome to the Vector Calculator:&quot; + LS \n                         + &quot;=================================&quot; + LS\n                         + &quot;You will be prompted to enter vector data which will ultimately&quot; + LS \n                         + &quot;get parsed into X and Y Coordinates. All supplied coordinates&quot; + LS \n                         + &quot;are to be enclosed within Chevron Brackets (&lt; &gt;) and delimited&quot; + LS \n                         + &quot;with a comma (,). Both Integer and or Floating Point values can&quot; + LS \n                         + &quot;be supplied. The Integer values will be auto-converted to double&quot; + LS \n                         + &quot;type. Here is an example entry: -  &lt;26, 67.8&gt;&quot; + LS \n                         + &quot;----------------------------------------------------------------&quot; + LS); \n        \n        // Prompt #1 - Prompt for User to enter in Vector data:\n        String commandLine = &quot;&quot;;\n        \n        // Continually ask User for vector data unless 'q' was supplied to quit:\n        while (commandLine.isEmpty()) {\n            System.out.print(&quot;Please enter your vector data (q to quit): -&gt; &quot;); \n            commandLine = userInputScanner.nextLine().trim(); \n            \n            // Was 'q' supplied to quit?\n            if (commandLine.equalsIgnoreCase(&quot;q&quot;)) {\n                // Is quit really desired (see the `quit()` method)?\n                if(!quit()) {\n                    // No...Empty `commandLine` so to ensure re-loop:\n                    commandLine = &quot;&quot;;\n                }\n                // Otherwise...\n                continue; // Because `commandLine` is not empty, this will exit the `while` loop\n            }\n            \n            /* Parse the supplied vector string and print out values.\n               If `vc` does not equal null, then the User entry is valid \n               and is stored as `VectorCoordinate` (see the VectorCoordinate \n               Class - Also see the `VectorCalculator` class `parseVectorString()`\n               method):                                               */\n            VectorCoordinate vc = VectorCalculator.parseVectorString(commandLine); \n            if (vc != null) {\n                coordsList.add(vc);  // Add valid entry to List.\n                System.out.println(&quot;X Coordinate = &quot; + vc.getX() + &quot;  |  Y Coordinate = &quot; + vc.getY());\n            }\n            // Otherwise...\n            commandLine = &quot;&quot;;       // Empty `commandLine` so to ensure re-loop.\n            System.out.println();   // Display a blank line for aesthetics.\n        }\n    }\n    \n    /**\n     * This method prompts the User to ensure that he/she truly wants to \n     * quit the application. \n     * &lt;p&gt;\n     * If `n` (no) is supplied, then boolean false is returned and this \n     * then gets interpreted that quit is not desired and the application \n     * continues to prompt for, and accept, Vector entries.\n     * &lt;p&gt;\n     * If `y` (yes) is supplied then the User is confronted with yet \n     * another prompt which asks if he/she wants to display the stored \n     * Vector entries. If at this point `n` (no) is supplied then the \n     * application will simply return boolean true which is later interpreted \n     * as a desire to quit. If however, `y` (yes) is supplied, then \n     * the User is displayed all the stored vector entries and then the \n     * application simply returns true which is also later interpreted as \n     * a desire to quit.&lt;br&gt;&lt;br&gt;\n     * \n     * @return (boolean) \n     */\n    private boolean quit() {\n        boolean res = false;\n        // Prompt #2 - Prompt for `Are You Sure...`:\n        String yn = &quot;&quot;;\n        while (yn.isEmpty()) {\n            System.out.print(&quot;Are you sure you want to quit (y/n)? -&gt; &quot;);\n            yn = userInputScanner.nextLine().trim();\n            if (!yn.matches(&quot;(?i)[yn]&quot;)) {\n                System.err.println(&quot;Invalid Entry Response! Try again...&quot; + LS);\n                yn = &quot;&quot;;\n            }\n        }\n        if (yn.equalsIgnoreCase(&quot;y&quot;)) {\n            // Prompt #3 - Prompt to display store Vector entries but only if there are any: \n            yn = &quot;&quot;;\n            while (yn.isEmpty() &amp;&amp; !coordsList.isEmpty()) {\n                System.out.print(&quot;Do you want to display all User Entered Vectors first? -&gt; &quot;);\n                yn = userInputScanner.nextLine().trim();\n                if (!yn.matches(&quot;(?i)[yn]&quot;)) {\n                    System.err.println(&quot;Invalid Entry Response! Try again...&quot; + LS);\n                    yn = &quot;&quot;;\n                }\n            }\n            if (yn.equalsIgnoreCase(&quot;y&quot;)) {\n                System.out.println(LS + &quot;Vectors Entered By User:&quot; + LS +\n                                        &quot;------------------------&quot;);\n                for (VectorCoordinate c : coordsList) {\n                    System.out.printf(&quot;X = %-10s Y = %-10s%n&quot;, c.getX(), c.getY());\n                }\n                System.out.println(&quot;------------------------&quot;);\n            }\n            System.out.println(LS + &quot;Quiting - Bye Bye.&quot; + LS);\n            res = true;\n        }\n        return res;\n    }\n}\n</code></pre>\n<p><strong>The VectorCalculator class:</strong></p>\n<pre><code>/**\n * Used for validating and parsing supplied vector coordinate strings\n * from User.\n */\npublic class VectorCalculator {\n\n    /**\n     * Used for validating and parsing supplied vector coordinate strings.&lt;br&gt;&lt;br&gt;\n     * \n     * @param commandLine (String) Vector data in the format: {@code &quot;&lt;n, n&gt;&quot;}.&lt;br&gt;\n     * @return \n     */\n    public static VectorCoordinate parseVectorString(String commandLine) {\n        double x = 0.0d;    // To hold the Vector X Coordinate:\n        double y = 0.0d;    // To hold the Vector Y Coordinate:\n        \n        /* Validate supplied commandLine string:\n           Is the supplied string in `commandLine` valid?     */\n        if (!commandLine.matches(&quot;^(\\\\&lt;(-?\\\\d+(\\\\.\\\\d+)?),\\\\s?(-?\\\\d+(\\\\.\\\\d+)?)\\\\&gt;)$&quot;)) {\n            // No... Determine what is wrong with it and display that info:\n            /* Copy commandLine into `cl` but first, remove any possible double \n               (or more) white-spacing from within the vector string and make \n               them single spaced. Also trim of any leading or trailing white-\n            spaces:                    */\n            String cl = commandLine.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).trim();\n            \n            // Prepare for error messaging. All errors found are concantenated together:\n            StringBuilder errMsg = new StringBuilder(&quot;&quot;);\n            \n            // Is the supplied vector string empty?\n            if (cl.isEmpty()) { errMsg.append(&quot;The supplied Vector string can not be empty! &quot;); }\n            \n            // If the supplied string doesn't start with the '&lt;' character:\n            if (!cl.startsWith(&quot;&lt;&quot;)) { errMsg.append(&quot;Missing Opening Bracket (&lt;)! &quot;); }\n            \n            // If the supplied string doesn't end with the '&gt;' character:\n            if (!cl.endsWith(&quot;&gt;&quot;)) { errMsg.append(&quot;Missing Closing Bracket (&gt;)! &quot;); }\n            \n            // Remove the brackets from the suppliec vector string:\n            cl = cl.replaceAll(&quot;[&lt;&gt;]&quot;, &quot;&quot;);\n            \n            // If the current vector string does not contain a comma (,).\n            if (!cl.contains(&quot;,&quot;)) { errMsg.append(&quot;Missing comma (,) delimiter between coordinates! &quot;); }\n            \n            // Otherwise...split the coordinate values and validate them:\n            else {\n                /* Split the coordinate values based on a comma delimter \n                   and 0 to unlimited number of spaces after the comma.  */\n                String[] coords = cl.split(&quot;,\\\\s*&quot;);\n                \n                // If the length of coords = 0 then no coordinate values were supplied!\n                if (coords.length == 0) { errMsg.append(&quot;Missing the X/Y Coordinates!&quot;); }\n                \n                // If the length of coords = 1 then there was no `y` coordinate value supplied!\n                else if (coords.length == 1) { errMsg.append(&quot;Missing the Y Coordinate!&quot;); }\n                \n                // If `coords[0]` is empty then there is no `x` coordinate value supplied!\n                else if (coords[0].isEmpty()) { errMsg.append(&quot;Missing the X Coordinate!&quot;); }\n            }\n            \n            // Inform User of all the problems and return `null`:\n            System.err.println(&quot;Vector Parse Error! - Invalid Vector Data Supplied (&quot; \n                               + commandLine + &quot;)! - &quot; + errMsg.toString());\n            return null;\n        }\n        \n        // Yes...The supplied Vector String appears to be valid!\n        /* Remove the brackets (using the `String#substring()` method) \n           and split the coordinate values into a String[] arrays based \n           on a comma delimter and 0 to unlimited number of spaces after \n           the comma (if any):               */\n        String[] xy_coords = commandLine.substring(1, commandLine.length() - 1).split(&quot;,\\\\s*&quot;);\n        \n         /* Convert the above array x and y coordinate string numerical values \n            to double type values:           */\n        x = Double.parseDouble(xy_coords[0]);\n        y = Double.parseDouble(xy_coords[1]);\n        \n        // Create a new VectorCoordinate and return it.\n        return new VectorCoordinate(x, y);\n    }\n}\n</code></pre>\n<p><strong>The VectorCoordinate class:</strong></p>\n<pre><code>public class VectorCoordinate {\n    \n    double x;\n    double y;\n    \n    /**\n     * There are no Setters for `x` and `y`, only Getters. Typical setting of \n     * `x` and `y` would be through this constructor.&lt;br&gt;&lt;br&gt;\n     * \n     * @param x (double)\n     * \n     * @param y (double)\n     */\n    public VectorCoordinate(double x, double y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    public double getX() {\n        return this.x;\n    }\n\n    public double getY() {\n        return this.y;\n    }\n\n    @Override\n    public String toString() {\n        return this.x + &quot;, &quot; + this.y;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29468521,"reputation":1,"user_id":22581585,"display_name":"Colin Baumgartner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695213864,"creation_date":1694990035,"question_id":77123847,"body_markdown":"This program takes input from the user in the form of a vector `&lt;xcoord,ycoord&gt;`. I have successfully got the buffer from the user. \r\n\r\nI&#39;ve debugged this and found out the `.hasNext()` part of this isn&#39;t detecting the first `&lt;` in my code and it outputs the `&quot;Missing the first arrow&quot;` exception. Any help on this?\r\n\r\nMy code:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    System.out.println(&quot;Welcome to the Vector Calculator!&quot;); //display messages to the user&#39;\r\n    System.out.println(&quot;Please enter your vector&quot;); //display messages to the user&#39;\r\n    Scanner userInputScanner = new Scanner(System.in); //first scanner\r\n    String commandLine = userInputScanner.nextLine(); //buffer is read in correctly\r\n    userInputScanner.close();\r\n    VectorCalculator.parseVectorString(commandLine); //parse vector string and print out values.**\r\n    }\r\n}\r\n```\r\n\r\nThen to this method (important code commented with ****):\r\n\r\n```\r\npublic boolean read(String commandLine) throws Exception {\r\n\r\n     Scanner scanner = new Scanner(commandLine); // ****\r\n\r\n     Pattern originalPattern = scanner.delimiter(); //retain original delimiters for scanner\r\n     scanner.useDelimiter(&quot;[&quot; + originalPattern + &quot;,]&quot;); // add comma to delimiters\r\n     scanner.useDelimiter(&quot; &quot;);\r\n     if(scanner.hasNext(&quot;&lt;&quot;)){ //\r\n         scanner.next(&quot;&lt;&quot;); //gobble up the &#39;&lt;&#39;\r\n         if(scanner.hasNextDouble()) {\r\n             xCoord = scanner.nextDouble(); //capture the x coordinate\r\n             //scanner.useDelimiter(originalPattern); //restore original delimiters\r\n             if(scanner.hasNext(&quot;,&quot;)){\r\n                 scanner.next(&quot;,&quot;); //gobble up the comma\r\n                 if(scanner.hasNextDouble()){\r\n                     yCoord = scanner.nextDouble(); //capture the y coordinate\r\n                     //scanner.useDelimiter(originalPattern); //restore original delimiters\r\n                     if(scanner.hasNext(&quot;&gt;&quot;)){\r\n                         scanner.next(&quot;&gt;&quot;);\r\n                         scanner.close();\r\n                         return true;\r\n                     } else {\r\n                         scanner.close();\r\n                         throw new Exception(&quot;Missing the end arrow&quot;);\r\n                     }\r\n                 } else {\r\n                     scanner.close();\r\n                     throw new Exception(&quot;Missing the y coord&quot;);\r\n                 }\r\n             } else {\r\n                 scanner.close();\r\n                 throw new Exception(&quot;Missing the middle comma&quot;);\r\n             }\r\n         } else {\r\n             scanner.close();\r\n             throw new Exception(&quot;Missing the x coord&quot;);\r\n         }\r\n     } else {\r\n         scanner.close();\r\n         throw new Exception(&quot;Missing the first arrow&quot;);\r\n     }\r\n}\r\n```\r\n","title":"Issue with reading user input in Java (Delimiter/Pattern issue)","body":"<p>This program takes input from the user in the form of a vector <code>&lt;xcoord,ycoord&gt;</code>. I have successfully got the buffer from the user.</p>\n<p>I've debugged this and found out the <code>.hasNext()</code> part of this isn't detecting the first <code>&lt;</code> in my code and it outputs the <code>&quot;Missing the first arrow&quot;</code> exception. Any help on this?</p>\n<p>My code:</p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(&quot;Welcome to the Vector Calculator!&quot;); //display messages to the user'\n    System.out.println(&quot;Please enter your vector&quot;); //display messages to the user'\n    Scanner userInputScanner = new Scanner(System.in); //first scanner\n    String commandLine = userInputScanner.nextLine(); //buffer is read in correctly\n    userInputScanner.close();\n    VectorCalculator.parseVectorString(commandLine); //parse vector string and print out values.**\n    }\n}\n</code></pre>\n<p>Then to this method (important code commented with ****):</p>\n<pre><code>public boolean read(String commandLine) throws Exception {\n\n     Scanner scanner = new Scanner(commandLine); // ****\n\n     Pattern originalPattern = scanner.delimiter(); //retain original delimiters for scanner\n     scanner.useDelimiter(&quot;[&quot; + originalPattern + &quot;,]&quot;); // add comma to delimiters\n     scanner.useDelimiter(&quot; &quot;);\n     if(scanner.hasNext(&quot;&lt;&quot;)){ //\n         scanner.next(&quot;&lt;&quot;); //gobble up the '&lt;'\n         if(scanner.hasNextDouble()) {\n             xCoord = scanner.nextDouble(); //capture the x coordinate\n             //scanner.useDelimiter(originalPattern); //restore original delimiters\n             if(scanner.hasNext(&quot;,&quot;)){\n                 scanner.next(&quot;,&quot;); //gobble up the comma\n                 if(scanner.hasNextDouble()){\n                     yCoord = scanner.nextDouble(); //capture the y coordinate\n                     //scanner.useDelimiter(originalPattern); //restore original delimiters\n                     if(scanner.hasNext(&quot;&gt;&quot;)){\n                         scanner.next(&quot;&gt;&quot;);\n                         scanner.close();\n                         return true;\n                     } else {\n                         scanner.close();\n                         throw new Exception(&quot;Missing the end arrow&quot;);\n                     }\n                 } else {\n                     scanner.close();\n                     throw new Exception(&quot;Missing the y coord&quot;);\n                 }\n             } else {\n                 scanner.close();\n                 throw new Exception(&quot;Missing the middle comma&quot;);\n             }\n         } else {\n             scanner.close();\n             throw new Exception(&quot;Missing the x coord&quot;);\n         }\n     } else {\n         scanner.close();\n         throw new Exception(&quot;Missing the first arrow&quot;);\n     }\n}\n</code></pre>\n"},{"tags":["java","parsing","antlr","logical-operators","conditional-operator"],"comments":[{"owner":{"account_id":27375673,"reputation":87,"user_id":20881060,"display_name":"Berc07"},"score":1,"creation_date":1694708185,"post_id":77106698,"comment_id":135930092,"body_markdown":"Try putting a &#39;\\&#39; (backslash) before the special character.","body":"Try putting a &#39;\\&#39; (backslash) before the special character."},{"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"score":0,"creation_date":1694709447,"post_id":77106698,"comment_id":135930318,"body_markdown":"Unfortunately I can&#39;t pass backslash in the input as it might affect the requirement :(","body":"Unfortunately I can&#39;t pass backslash in the input as it might affect the requirement :("},{"owner":{"account_id":50123,"reputation":365443,"user_id":149392,"display_name":"sepp2k"},"score":1,"creation_date":1694718911,"post_id":77106698,"comment_id":135931950,"body_markdown":"Where in your grammar are you trying to accept commas?","body":"Where in your grammar are you trying to accept commas?"}],"answers":[{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694940786,"creation_date":1694720751,"answer_id":77107965,"question_id":77106698,"body_markdown":"Add `expression ( &#39;,&#39; expression )+` at the start of the `expression` rule:\r\n\r\n```\r\nexpression\r\n : expression ( &#39;,&#39; expression )+ #multipleExpression\r\n | ...\r\n ;\r\n```\r\n\r\n### EDIT\r\n\r\nAfter adding the rule above:\r\n\r\n```\r\ngrammar SimpleBoolean;\r\n\r\nparse\r\n : expression EOF\r\n ;\r\n\r\nexpression\r\n : expression ( &#39;,&#39; expression )+                 #multipleExpression\r\n | LPAREN expression RPAREN                       #parenExpression\r\n | NOT expression                                 #notExpression\r\n | left=expression op=comparator right=expression #comparatorExpression\r\n | left=expression op=binary right=expression     #binaryExpression\r\n | bool                                           #boolExpression\r\n | IDENTIFIER                                     #identifierExpression\r\n | DECIMAL                                        #decimalExpression\r\n ;\r\n\r\ncomparator\r\n : GT | GE | LT | LE | EQ | NE | IN | NOTIN | STARTSWITH | ENDSWITH | NULL | NOTNULL\r\n ;\r\n\r\nbinary\r\n : AND | OR\r\n ;\r\n\r\nbool\r\n : TRUE | FALSE\r\n ;\r\n\r\nAND        : &#39;AND&#39; ;\r\nOR         : &#39;OR&#39; ;\r\nNOT        : &#39;NOT&#39;;\r\nTRUE       : &#39;TRUE&#39; ;\r\nFALSE      : &#39;FALSE&#39; ;\r\nGT         : &#39;&gt;&#39; ;\r\nGE         : &#39;&gt;=&#39; ;\r\nLT         : &#39;&lt;&#39; ;\r\nLE         : &#39;&lt;=&#39; ;\r\nEQ         : &#39;=&#39; ;\r\nNE         : &#39;!=&#39; ;\r\nIN         : &#39;IN&#39; ;\r\nNOTIN      : &#39;NOTIN&#39; ;\r\nSTARTSWITH : &#39;STARTSWITH&#39; ;\r\nENDSWITH   : &#39;ENDSWITH&#39; ;\r\nNULL       : &#39;NULL&#39; ;\r\nNOTNULL    : &#39;NOTNULL&#39; ;\r\nLPAREN     : &#39;(&#39; ;\r\nRPAREN     : &#39;)&#39; ;\r\nDECIMAL    : &#39;-&#39;? [0-9]+ ( &#39;.&#39; [0-9]+ )? ;\r\nIDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]* ;\r\nWS         : [ \\r\\t\\u000C\\n]+ -&gt; skip;\r\n```\r\n\r\nyour example input `9355560 = 9355560 AND NOT ( comments = comments AND system IN system,admin,developer )` gets parsed as follows (without errors!):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tPJFn.png","title":"ANTLR accepting special characters like . (dot) and , (comma) in identifier or expression","body":"<p>Add <code>expression ( ',' expression )+</code> at the start of the <code>expression</code> rule:</p>\n<pre><code>expression\n : expression ( ',' expression )+ #multipleExpression\n | ...\n ;\n</code></pre>\n<h3>EDIT</h3>\n<p>After adding the rule above:</p>\n<pre><code>grammar SimpleBoolean;\n\nparse\n : expression EOF\n ;\n\nexpression\n : expression ( ',' expression )+                 #multipleExpression\n | LPAREN expression RPAREN                       #parenExpression\n | NOT expression                                 #notExpression\n | left=expression op=comparator right=expression #comparatorExpression\n | left=expression op=binary right=expression     #binaryExpression\n | bool                                           #boolExpression\n | IDENTIFIER                                     #identifierExpression\n | DECIMAL                                        #decimalExpression\n ;\n\ncomparator\n : GT | GE | LT | LE | EQ | NE | IN | NOTIN | STARTSWITH | ENDSWITH | NULL | NOTNULL\n ;\n\nbinary\n : AND | OR\n ;\n\nbool\n : TRUE | FALSE\n ;\n\nAND        : 'AND' ;\nOR         : 'OR' ;\nNOT        : 'NOT';\nTRUE       : 'TRUE' ;\nFALSE      : 'FALSE' ;\nGT         : '&gt;' ;\nGE         : '&gt;=' ;\nLT         : '&lt;' ;\nLE         : '&lt;=' ;\nEQ         : '=' ;\nNE         : '!=' ;\nIN         : 'IN' ;\nNOTIN      : 'NOTIN' ;\nSTARTSWITH : 'STARTSWITH' ;\nENDSWITH   : 'ENDSWITH' ;\nNULL       : 'NULL' ;\nNOTNULL    : 'NOTNULL' ;\nLPAREN     : '(' ;\nRPAREN     : ')' ;\nDECIMAL    : '-'? [0-9]+ ( '.' [0-9]+ )? ;\nIDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]* ;\nWS         : [ \\r\\t\\u000C\\n]+ -&gt; skip;\n</code></pre>\n<p>your example input <code>9355560 = 9355560 AND NOT ( comments = comments AND system IN system,admin,developer )</code> gets parsed as follows (without errors!):</p>\n<p><a href=\"https://i.stack.imgur.com/tPJFn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tPJFn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77107965,"answer_count":1,"score":1,"last_activity_date":1695213840,"creation_date":1694707809,"question_id":77106698,"body_markdown":"I&#39;m trying to execute dynamic expressions for the input data (Map) using ANTLR and using the answer of @Bart Kiers from the [stackoverflow&#39;s post](https://stackoverflow.com/questions/30976962/nested-boolean-expression-parser-using-antlr) I was able to do it.\r\n\r\nI tried to add `IN`, `STARTSWITH`, `ENDSWITH `condition with in the grammer and trying to add the logic for it from the java end. For the case of `IN `function I&#39;m trying to split a set of string using a special character preferably` , (comma)`. But when I add them in my expression I get an error as follows\r\n```\r\nline 1:64 token recognition error at: &#39;,&#39;\r\n```\r\n\r\n\r\n\r\nLet me know how to allow special characters within the expression.\r\n\r\n**The grammer file I used**\r\n\r\n    grammar SimpleBoolean;\r\n    \r\n    parse\r\n     : expression EOF\r\n     ;\r\n    \r\n    expression\r\n     : LPAREN expression RPAREN                       #parenExpression\r\n     | NOT expression                                 #notExpression\r\n     | left=expression op=comparator right=expression #comparatorExpression\r\n     | left=expression op=binary right=expression     #binaryExpression\r\n     | bool                                           #boolExpression\r\n     | IDENTIFIER                                     #identifierExpression\r\n     | DECIMAL                                        #decimalExpression\r\n     ;\r\n    \r\n    comparator\r\n     : GT | GE | LT | LE | EQ | NE | IN | NOTIN | STARTSWITH | ENDSWITH | NULL | NOTNULL\r\n     ;\r\n    \r\n    binary\r\n     : AND | OR\r\n     ;\r\n    \r\n    bool\r\n     : TRUE | FALSE\r\n     ;\r\n    \r\n    AND        : &#39;AND&#39; ;\r\n    OR         : &#39;OR&#39; ;\r\n    NOT        : &#39;NOT&#39;;\r\n    TRUE       : &#39;TRUE&#39; ;\r\n    FALSE      : &#39;FALSE&#39; ;\r\n    GT         : &#39;&gt;&#39; ;\r\n    GE         : &#39;&gt;=&#39; ;\r\n    LT         : &#39;&lt;&#39; ;\r\n    LE         : &#39;&lt;=&#39; ;\r\n    EQ         : &#39;=&#39; ;\r\n    NE         : &#39;!=&#39; ;\r\n    IN         : &#39;IN&#39; ;\r\n    NOTIN      : &#39;NOTIN&#39; ;\r\n    STARTSWITH : &#39;STARTSWITH&#39; ;\r\n    ENDSWITH   : &#39;ENDSWITH&#39; ;\r\n    NULL       : &#39;NULL&#39; ;\r\n    NOTNULL    : &#39;NOTNULL&#39; ;\r\n    LPAREN     : &#39;(&#39; ;\r\n    RPAREN     : &#39;)&#39; ;\r\n    DECIMAL    : &#39;-&#39;? [0-9]+ ( &#39;.&#39; [0-9]+ )? ;\r\n    IDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]* ;\r\n    WS         : [ \\r\\t\\u000C\\n]+ -&gt; skip;\r\n\r\nModified **EvalVisitor.class**\r\n\r\nAdded the below lines\r\n\r\n    if (ctx.op.EQ() != null) {\r\n    \t      return this.visit(ctx.left).equals(this.visit(ctx.right));\r\n    \t    }\r\n    \t    else if (ctx.op.IN() != null) {\r\n    \t    \tString checkVal[] = this.visit(ctx.right).toString().split(&quot;,&quot;);\r\n        \t\tboolean valuePresent = false;\r\n        \t\t\r\n        \t\tfor(String value : checkVal) {\r\n                    if(value.equals(this.visit(ctx.left).toString()))\r\n                    \tvaluePresent = true;\r\n                }\r\n        \t\treturn valuePresent;\r\n    \t\t}\r\n\r\nThe **Expression** I passed,\r\n\r\n    ID = ID AND NOT ( comments = comments AND system IN system,admin,developer )","title":"ANTLR accepting special characters like . (dot) and , (comma) in identifier or expression","body":"<p>I'm trying to execute dynamic expressions for the input data (Map) using ANTLR and using the answer of @Bart Kiers from the <a href=\"https://stackoverflow.com/questions/30976962/nested-boolean-expression-parser-using-antlr\">stackoverflow's post</a> I was able to do it.</p>\n<p>I tried to add <code>IN</code>, <code>STARTSWITH</code>, <code>ENDSWITH </code>condition with in the grammer and trying to add the logic for it from the java end. For the case of <code>IN </code>function I'm trying to split a set of string using a special character preferably<code> , (comma)</code>. But when I add them in my expression I get an error as follows</p>\n<pre><code>line 1:64 token recognition error at: ','\n</code></pre>\n<p>Let me know how to allow special characters within the expression.</p>\n<p><strong>The grammer file I used</strong></p>\n<pre><code>grammar SimpleBoolean;\n\nparse\n : expression EOF\n ;\n\nexpression\n : LPAREN expression RPAREN                       #parenExpression\n | NOT expression                                 #notExpression\n | left=expression op=comparator right=expression #comparatorExpression\n | left=expression op=binary right=expression     #binaryExpression\n | bool                                           #boolExpression\n | IDENTIFIER                                     #identifierExpression\n | DECIMAL                                        #decimalExpression\n ;\n\ncomparator\n : GT | GE | LT | LE | EQ | NE | IN | NOTIN | STARTSWITH | ENDSWITH | NULL | NOTNULL\n ;\n\nbinary\n : AND | OR\n ;\n\nbool\n : TRUE | FALSE\n ;\n\nAND        : 'AND' ;\nOR         : 'OR' ;\nNOT        : 'NOT';\nTRUE       : 'TRUE' ;\nFALSE      : 'FALSE' ;\nGT         : '&gt;' ;\nGE         : '&gt;=' ;\nLT         : '&lt;' ;\nLE         : '&lt;=' ;\nEQ         : '=' ;\nNE         : '!=' ;\nIN         : 'IN' ;\nNOTIN      : 'NOTIN' ;\nSTARTSWITH : 'STARTSWITH' ;\nENDSWITH   : 'ENDSWITH' ;\nNULL       : 'NULL' ;\nNOTNULL    : 'NOTNULL' ;\nLPAREN     : '(' ;\nRPAREN     : ')' ;\nDECIMAL    : '-'? [0-9]+ ( '.' [0-9]+ )? ;\nIDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]* ;\nWS         : [ \\r\\t\\u000C\\n]+ -&gt; skip;\n</code></pre>\n<p>Modified <strong>EvalVisitor.class</strong></p>\n<p>Added the below lines</p>\n<pre><code>if (ctx.op.EQ() != null) {\n          return this.visit(ctx.left).equals(this.visit(ctx.right));\n        }\n        else if (ctx.op.IN() != null) {\n            String checkVal[] = this.visit(ctx.right).toString().split(&quot;,&quot;);\n            boolean valuePresent = false;\n            \n            for(String value : checkVal) {\n                if(value.equals(this.visit(ctx.left).toString()))\n                    valuePresent = true;\n            }\n            return valuePresent;\n        }\n</code></pre>\n<p>The <strong>Expression</strong> I passed,</p>\n<pre><code>ID = ID AND NOT ( comments = comments AND system IN system,admin,developer )\n</code></pre>\n"},{"tags":["java","android","kotlin","android-navigation-graph"],"owner":{"account_id":7544172,"reputation":417,"user_id":5727849,"display_name":"Thang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695213014,"creation_date":1695213014,"question_id":77142459,"body_markdown":"I don&#39;t have any idea for this request yet: Can anyone help me with an idea? I would be very grateful.\r\nI have a request like this. On my android screen.  There can be many levels of menus. For example If there was only 1 menu level it would look like the first image. And when I click on the area I drew in red, it will display the content on the right side.\r\nBut if my menu has 2 levels it will look like the 2nd image.\r\nOn the contrary, if my menu has more than 2 levels, the next level will replace the previous level. it&#39;s like from 2nd image to 3rd image.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/OrkIj.jpg)](https://i.stack.imgur.com/OrkIj.jpg)\r\n\r\nI have no ideal for now.","title":"How to do Sub Menu with Mutiple Level in Android Kotlin","body":"<p>I don't have any idea for this request yet: Can anyone help me with an idea? I would be very grateful.\nI have a request like this. On my android screen.  There can be many levels of menus. For example If there was only 1 menu level it would look like the first image. And when I click on the area I drew in red, it will display the content on the right side.\nBut if my menu has 2 levels it will look like the 2nd image.\nOn the contrary, if my menu has more than 2 levels, the next level will replace the previous level. it's like from 2nd image to 3rd image.</p>\n<p><a href=\"https://i.stack.imgur.com/OrkIj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OrkIj.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I have no ideal for now.</p>\n"},{"tags":["java","string","reflection","velocity","string-interpolation"],"comments":[{"owner":{"account_id":34651,"reputation":3177,"user_id":97992,"accept_rate":80,"display_name":"Droo"},"score":2,"creation_date":1283828191,"post_id":3655424,"comment_id":3844898,"body_markdown":"Replace where? A class? A JSP?  String has a format method if you just: `String.format(&quot;Hello %s&quot;, username);`","body":"Replace where? A class? A JSP?  String has a format method if you just: <code>String.format(&quot;Hello %s&quot;, username);</code>"},{"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"score":3,"creation_date":1283828525,"post_id":3655424,"comment_id":3844917,"body_markdown":"@Droo: In the example, string is like `Hello ${user.name}`, not like, `Hello %s` or `Hello {0}`.","body":"@Droo: In the example, string is like <code>Hello ${user.name}</code>, not like, <code>Hello %s</code> or <code>Hello {0}</code>."},{"owner":{"account_id":10611,"reputation":110107,"user_id":20128,"accept_rate":73,"display_name":"serg"},"score":3,"creation_date":1283828549,"post_id":3655424,"comment_id":3844918,"body_markdown":"If you need something that looks like velocity and smells like velocity, maybe it is velocity? :)","body":"If you need something that looks like velocity and smells like velocity, maybe it is velocity? :)"},{"owner":{"account_id":145429,"reputation":3296,"user_id":355231,"accept_rate":94,"display_name":"Sastrija"},"score":0,"creation_date":1283828798,"post_id":3655424,"comment_id":3844933,"body_markdown":"@Droo: Its not a class. I&#39;ve the above text in a &quot;String&quot; variable and wants to replace all the occurrences of the strings inside ${} with values in the corresponding objects. for example replace all ${user.name} with name property in &quot;user&quot; object.","body":"@Droo: Its not a class. I&#39;ve the above text in a &quot;String&quot; variable and wants to replace all the occurrences of the strings inside ${} with values in the corresponding objects. for example replace all ${user.name} with name property in &quot;user&quot; object."},{"owner":{"account_id":145429,"reputation":3296,"user_id":355231,"accept_rate":94,"display_name":"Sastrija"},"score":0,"creation_date":1283828876,"post_id":3655424,"comment_id":3844941,"body_markdown":"@serg: Yes it is a velocity code. and I wants to remove the velocity from my code.","body":"@serg: Yes it is a velocity code. and I wants to remove the velocity from my code."},{"owner":{"account_id":193707,"reputation":34681,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1429449096,"post_id":3655424,"comment_id":47594052,"body_markdown":"Possible duplicate to: http://stackoverflow.com/q/772988/435605","body":"Possible duplicate to: <a href=\"http://stackoverflow.com/q/772988/435605\">stackoverflow.com/q/772988/435605</a>"},{"owner":{"account_id":145429,"reputation":3296,"user_id":355231,"accept_rate":94,"display_name":"Sastrija"},"score":0,"creation_date":1433698521,"post_id":3655424,"comment_id":49451195,"body_markdown":"@AlikElzin-kilaka This is not a duplicate, since both posts have its own differences in requirement(though both are string replacements). Please refer the accepted answer to know what I meant.","body":"@AlikElzin-kilaka This is not a duplicate, since both posts have its own differences in requirement(though both are string replacements). Please refer the accepted answer to know what I meant."},{"owner":{"account_id":438750,"reputation":550,"user_id":827225,"display_name":"Vishnoo Rath"},"score":0,"creation_date":1509439737,"post_id":3655424,"comment_id":81008770,"body_markdown":"Maybe a bit late, but please see jeval.sourceforge.net.  I have used this in a Grails application. It is a Java library. Very useful and covers more use cases than you need. It is a Formula evaluator as well.","body":"Maybe a bit late, but please see jeval.sourceforge.net.  I have used this in a Grails application. It is a Java library. Very useful and covers more use cases than you need. It is a Formula evaluator as well."}],"answers":[{"tags":[],"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1283828465,"creation_date":1283828465,"answer_id":3655460,"question_id":3655424,"body_markdown":"Here&#39;s an outline of how you could go about doing this. It should be relatively straightforward to implement it as actual code.\r\n\r\n1. Create a map of all the objects that will be referenced in the template.\r\n2. Use a regular expression to find variable references in the template and replace them with their values (see step 3). The [Matcher](http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html) class will come in handy for find-and-replace.\r\n3. Split the variable name at the dot. `user.name` would become `user` and `name`. Look up `user` in your map to get the object and use [reflection](http://download.oracle.com/javase/tutorial/reflect/member/index.html) to obtain the value of `name` from the object. Assuming your objects have standard getters, you will look for a method `getName` and invoke it.","title":"String replacement in java, similar to a velocity template","body":"<p>Here's an outline of how you could go about doing this. It should be relatively straightforward to implement it as actual code.</p>\n\n<ol>\n<li>Create a map of all the objects that will be referenced in the template.</li>\n<li>Use a regular expression to find variable references in the template and replace them with their values (see step 3). The <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html\" rel=\"noreferrer\">Matcher</a> class will come in handy for find-and-replace.</li>\n<li>Split the variable name at the dot. <code>user.name</code> would become <code>user</code> and <code>name</code>. Look up <code>user</code> in your map to get the object and use <a href=\"http://download.oracle.com/javase/tutorial/reflect/member/index.html\" rel=\"noreferrer\">reflection</a> to obtain the value of <code>name</code> from the object. Assuming your objects have standard getters, you will look for a method <code>getName</code> and invoke it.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"down_vote_count":0,"up_vote_count":154,"is_accepted":false,"score":154,"last_activity_date":1298734666,"creation_date":1283828657,"answer_id":3655472,"question_id":3655424,"body_markdown":"Take a look at the [`java.text.MessageFormat`][1] class, MessageFormat takes a set of objects, formats them, then inserts the formatted strings into the pattern at the appropriate places. \r\n\r\n    Object[] params = new Object[]{&quot;hello&quot;, &quot;!&quot;};\r\n    String msg = MessageFormat.format(&quot;{0} world {1}&quot;, params);\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html","title":"String replacement in java, similar to a velocity template","body":"<p>Take a look at the <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html\" rel=\"noreferrer\"><code>java.text.MessageFormat</code></a> class, MessageFormat takes a set of objects, formats them, then inserts the formatted strings into the pattern at the appropriate places. </p>\n\n<pre><code>Object[] params = new Object[]{\"hello\", \"!\"};\nString msg = MessageFormat.format(\"{0} world {1}\", params);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1283833206,"creation_date":1283830776,"answer_id":3655604,"question_id":3655424,"body_markdown":"I threw together a small test implementation of this.  The basic idea is to call `format` and pass in the format string, and a map of objects, and the names that they have locally.\r\n\r\nThe output of the following is:\r\n\r\n &gt; My dog is named fido, and Jane Doe owns him.\r\n\r\n\r\n    public class StringFormatter {\r\n    \r\n        private static final String fieldStart = &quot;\\\\$\\\\{&quot;;\r\n        private static final String fieldEnd = &quot;\\\\}&quot;;\r\n    \r\n        private static final String regex = fieldStart + &quot;([^}]+)&quot; + fieldEnd;\r\n        private static final Pattern pattern = Pattern.compile(regex);\r\n    \r\n        public static String format(String format, Map&lt;String, Object&gt; objects) {\r\n            Matcher m = pattern.matcher(format);\r\n            String result = format;\r\n            while (m.find()) {\r\n                String[] found = m.group(1).split(&quot;\\\\.&quot;);\r\n                Object o = objects.get(found[0]);\r\n                Field f = o.getClass().getField(found[1]);\r\n                String newVal = f.get(o).toString();\r\n                result = result.replaceFirst(regex, newVal);\r\n            }\r\n            return result;\r\n        }\r\n    \r\n        static class Dog {\r\n            public String name;\r\n            public String owner;\r\n            public String gender;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Dog d = new Dog();\r\n            d.name = &quot;fido&quot;;\r\n            d.owner = &quot;Jane Doe&quot;;\r\n            d.gender = &quot;him&quot;;\r\n            Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\r\n            map.put(&quot;d&quot;, d);\r\n            System.out.println(\r\n               StringFormatter.format(\r\n                    &quot;My dog is named ${d.name}, and ${d.owner} owns ${d.gender}.&quot;, \r\n                    map));\r\n        }\r\n    }\r\n\r\n*Note: This doesn&#39;t compile due to unhandled exceptions.  But it makes the code much easier to read.*\r\n\r\nAlso, I don&#39;t like that you have to construct the map yourself in the code, but I don&#39;t know how to get the names of the local variables programatically.  The best way to do it, is to remember to put the object in the map as soon as you create it.\r\n\r\nThe following example produces the results that you want from your example:\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\r\n        Site site = new Site();\r\n        map.put(&quot;site&quot;, site);\r\n        site.name = &quot;StackOverflow.com&quot;;\r\n        User user = new User();\r\n        map.put(&quot;user&quot;, user);\r\n        user.name = &quot;jjnguy&quot;;\r\n        System.out.println(\r\n             format(&quot;Hello ${user.name},\\n\\tWelcome to ${site.name}. &quot;, map));\r\n    }\r\n\r\n&lt;sub&gt;*I should also mention that I have no idea what Velocity is, so I hope this answer is relevant.*&lt;/sub&gt;","title":"String replacement in java, similar to a velocity template","body":"<p>I threw together a small test implementation of this.  The basic idea is to call <code>format</code> and pass in the format string, and a map of objects, and the names that they have locally.</p>\n\n<p>The output of the following is:</p>\n\n<blockquote>\n  <p>My dog is named fido, and Jane Doe owns him.</p>\n</blockquote>\n\n<pre><code>public class StringFormatter {\n\n    private static final String fieldStart = \"\\\\$\\\\{\";\n    private static final String fieldEnd = \"\\\\}\";\n\n    private static final String regex = fieldStart + \"([^}]+)\" + fieldEnd;\n    private static final Pattern pattern = Pattern.compile(regex);\n\n    public static String format(String format, Map&lt;String, Object&gt; objects) {\n        Matcher m = pattern.matcher(format);\n        String result = format;\n        while (m.find()) {\n            String[] found = m.group(1).split(\"\\\\.\");\n            Object o = objects.get(found[0]);\n            Field f = o.getClass().getField(found[1]);\n            String newVal = f.get(o).toString();\n            result = result.replaceFirst(regex, newVal);\n        }\n        return result;\n    }\n\n    static class Dog {\n        public String name;\n        public String owner;\n        public String gender;\n    }\n\n    public static void main(String[] args) {\n        Dog d = new Dog();\n        d.name = \"fido\";\n        d.owner = \"Jane Doe\";\n        d.gender = \"him\";\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n        map.put(\"d\", d);\n        System.out.println(\n           StringFormatter.format(\n                \"My dog is named ${d.name}, and ${d.owner} owns ${d.gender}.\", \n                map));\n    }\n}\n</code></pre>\n\n<p><em>Note: This doesn't compile due to unhandled exceptions.  But it makes the code much easier to read.</em></p>\n\n<p>Also, I don't like that you have to construct the map yourself in the code, but I don't know how to get the names of the local variables programatically.  The best way to do it, is to remember to put the object in the map as soon as you create it.</p>\n\n<p>The following example produces the results that you want from your example:</p>\n\n<pre><code>public static void main(String[] args) {\n    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n    Site site = new Site();\n    map.put(\"site\", site);\n    site.name = \"StackOverflow.com\";\n    User user = new User();\n    map.put(\"user\", user);\n    user.name = \"jjnguy\";\n    System.out.println(\n         format(\"Hello ${user.name},\\n\\tWelcome to ${site.name}. \", map));\n}\n</code></pre>\n\n<p><sub><em>I should also mention that I have no idea what Velocity is, so I hope this answer is relevant.</em></sub></p>\n"},{"tags":[],"owner":{"account_id":197167,"reputation":4011,"user_id":441063,"accept_rate":100,"display_name":"Mike Milkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1283831732,"creation_date":1283831732,"answer_id":3655662,"question_id":3655424,"body_markdown":"There is nothing out of the box that is comparable to velocity since velocity was written to solve exactly that problem.  The closest thing you can try is looking into the Formatter\r\n\r\nhttp://cupi2.uniandes.edu.co/site/images/recursos/javadoc/j2se/1.5.0/docs/api/java/util/Formatter.html\r\n\r\nHowever the formatter as far as I know was created to provide C like formatting options in Java so it may not scratch exactly your itch but you are welcome to try :).\r\n","title":"String replacement in java, similar to a velocity template","body":"<p>There is nothing out of the box that is comparable to velocity since velocity was written to solve exactly that problem.  The closest thing you can try is looking into the Formatter</p>\n\n<p><a href=\"http://cupi2.uniandes.edu.co/site/images/recursos/javadoc/j2se/1.5.0/docs/api/java/util/Formatter.html\" rel=\"nofollow noreferrer\">http://cupi2.uniandes.edu.co/site/images/recursos/javadoc/j2se/1.5.0/docs/api/java/util/Formatter.html</a></p>\n\n<p>However the formatter as far as I know was created to provide C like formatting options in Java so it may not scratch exactly your itch but you are welcome to try :).</p>\n"},{"tags":[],"owner":{"account_id":32462,"reputation":4177,"user_id":90138,"accept_rate":60,"display_name":"JH."},"down_vote_count":1,"up_vote_count":193,"is_accepted":true,"score":192,"last_activity_date":1673963673,"creation_date":1283836633,"answer_id":3655963,"question_id":3655424,"body_markdown":"Use `StringSubstitutor` from [Apache Commons Text](https://commons.apache.org/proper/commons-text/).\r\n\r\n## Dependency import\r\nImport the Apache commons text dependency using maven as bellow:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n    &lt;version&gt;1.10.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n## Example\r\n```java\r\nMap&lt;String, String&gt; valuesMap = new HashMap&lt;String, String&gt;();\r\nvaluesMap.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\r\nvaluesMap.put(&quot;target&quot;, &quot;lazy dog&quot;);\r\nString templateString = &quot;The ${animal} jumped over the ${target}.&quot;;\r\nStringSubstitutor sub = new StringSubstitutor(valuesMap);\r\nString resolvedString = sub.replace(templateString);\r\n```","title":"String replacement in java, similar to a velocity template","body":"<p>Use <code>StringSubstitutor</code> from <a href=\"https://commons.apache.org/proper/commons-text/\" rel=\"noreferrer\">Apache Commons Text</a>.</p>\n<h2>Dependency import</h2>\n<p>Import the Apache commons text dependency using maven as bellow:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n    &lt;version&gt;1.10.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h2>Example</h2>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; valuesMap = new HashMap&lt;String, String&gt;();\nvaluesMap.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\nvaluesMap.put(&quot;target&quot;, &quot;lazy dog&quot;);\nString templateString = &quot;The ${animal} jumped over the ${target}.&quot;;\nStringSubstitutor sub = new StringSubstitutor(valuesMap);\nString resolvedString = sub.replace(templateString);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21094,"reputation":1458,"user_id":51016,"accept_rate":100,"display_name":"Christoffer Soop"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1641775055,"creation_date":1283839447,"answer_id":3656134,"question_id":3655424,"body_markdown":"There are a couple of Expression Language implementations out there that does this for you, could be preferable to using your own implementation as or if your requirments grow, see for example [JUEL][1] and [MVEL][2]\r\n\r\nI like and have successfully used MVEL in at least one project.\r\n\r\nAlso see the Stackflow post [JSTL/JSP EL (Expression Language) in a non JSP (standalone) context][3]\r\n\r\n\r\n  [1]: http://juel.sourceforge.net/\r\n  [2]: https://github.com/codehaus/mvel\r\n  [3]: https://stackoverflow.com/questions/91692/jstl-jsp-el-expression-language-in-a-non-jsp-standalone-context","title":"String replacement in java, similar to a velocity template","body":"<p>There are a couple of Expression Language implementations out there that does this for you, could be preferable to using your own implementation as or if your requirments grow, see for example <a href=\"http://juel.sourceforge.net/\" rel=\"nofollow noreferrer\">JUEL</a> and <a href=\"https://github.com/codehaus/mvel\" rel=\"nofollow noreferrer\">MVEL</a></p>\n<p>I like and have successfully used MVEL in at least one project.</p>\n<p>Also see the Stackflow post <a href=\"https://stackoverflow.com/questions/91692/jstl-jsp-el-expression-language-in-a-non-jsp-standalone-context\">JSTL/JSP EL (Expression Language) in a non JSP (standalone) context</a></p>\n"},{"tags":[],"owner":{"account_id":1370042,"reputation":3162,"user_id":1344421,"accept_rate":87,"display_name":"artgrohe"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1571138329,"creation_date":1546939563,"answer_id":54088735,"question_id":3655424,"body_markdown":"My preferred way is **`String.format()`** because its a oneliner and doesn&#39;t require third party libraries:\r\n\r\n    String message = String.format(&quot;Hello! My name is %s, I&#39;m %s.&quot;, name, age); \r\n\r\nI use this regularly, e.g. in exception messages like:\r\n\r\n    throw new Exception(String.format(&quot;Unable to login with email: %s&quot;, email));\r\n\r\nHint: You can put in as many variables as you like because `format()` uses [Varargs][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-varargs","title":"String replacement in java, similar to a velocity template","body":"<p>My preferred way is <strong><code>String.format()</code></strong> because its a oneliner and doesn't require third party libraries:</p>\n\n<pre><code>String message = String.format(\"Hello! My name is %s, I'm %s.\", name, age); \n</code></pre>\n\n<p>I use this regularly, e.g. in exception messages like:</p>\n\n<pre><code>throw new Exception(String.format(\"Unable to login with email: %s\", email));\n</code></pre>\n\n<p>Hint: You can put in as many variables as you like because <code>format()</code> uses <a href=\"https://www.baeldung.com/java-varargs\" rel=\"noreferrer\">Varargs</a></p>\n"},{"tags":[],"owner":{"account_id":7025832,"reputation":53,"user_id":5383240,"display_name":"Kan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561457059,"creation_date":1561457059,"answer_id":56751525,"question_id":3655424,"body_markdown":"I use GroovyShell in java to parse template with Groovy GString:\r\n\r\n    Binding binding = new Binding();\r\n    GroovyShell gs = new GroovyShell(binding);\r\n    // this JSONObject can also be replaced by any Java Object\r\n    JSONObject obj = new JSONObject();\r\n    obj.put(&quot;key&quot;, &quot;value&quot;);\r\n    binding.setProperty(&quot;obj&quot;, obj)\r\n    String str = &quot;${obj.key}&quot;;\r\n    String exp = String.format(&quot;\\&quot;%s\\&quot;.toString()&quot;, str);\r\n    String res = (String) gs.evaluate(exp);\r\n    // value\r\n    System.out.println(str);\r\n\r\n","title":"String replacement in java, similar to a velocity template","body":"<p>I use GroovyShell in java to parse template with Groovy GString:</p>\n\n<pre><code>Binding binding = new Binding();\nGroovyShell gs = new GroovyShell(binding);\n// this JSONObject can also be replaced by any Java Object\nJSONObject obj = new JSONObject();\nobj.put(\"key\", \"value\");\nbinding.setProperty(\"obj\", obj)\nString str = \"${obj.key}\";\nString exp = String.format(\"\\\"%s\\\".toString()\", str);\nString res = (String) gs.evaluate(exp);\n// value\nSystem.out.println(str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615731149,"creation_date":1615731149,"answer_id":66625510,"question_id":3655424,"body_markdown":"I created this utility that uses vanilla Java.  It combines two formats... `{}` and `%s` style from String.format.... into one method call.  Please note it only replaces empty `{}` brackets, not `{someWord}`.\r\n\r\n    public class LogUtils {\r\n    \r\n        public static String populate(String log, Object... objects) {\r\n            log = log.replaceAll(&quot;\\\\{\\\\}&quot;, &quot;%s&quot;);\r\n            return String.format(log, objects);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(populate(&quot;x = %s, y ={}&quot;, 5, 4));;\r\n        }\r\n    \r\n    }","title":"String replacement in java, similar to a velocity template","body":"<p>I created this utility that uses vanilla Java.  It combines two formats... <code>{}</code> and <code>%s</code> style from String.format.... into one method call.  Please note it only replaces empty <code>{}</code> brackets, not <code>{someWord}</code>.</p>\n<pre><code>public class LogUtils {\n\n    public static String populate(String log, Object... objects) {\n        log = log.replaceAll(&quot;\\\\{\\\\}&quot;, &quot;%s&quot;);\n        return String.format(log, objects);\n    }\n\n    public static void main(String[] args) {\n        System.out.println(populate(&quot;x = %s, y ={}&quot;, 5, 4));;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":357362,"reputation":2080,"user_id":697480,"display_name":"Adam Wise"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631543343,"creation_date":1631543343,"answer_id":69164457,"question_id":3655424,"body_markdown":"Handlebars.java might be a better option in terms of a Velocity-like syntax with other server-side templating features.\r\n\r\nhttp://jknack.github.io/handlebars.java/\r\n\r\n    Handlebars handlebars = new Handlebars();\r\n    Template template = handlebars.compileInline(&quot;Hello {{this}}!&quot;);\r\n    System.out.println(template.apply(&quot;Handlebars.java&quot;));\r\n\r\n\r\n","title":"String replacement in java, similar to a velocity template","body":"<p>Handlebars.java might be a better option in terms of a Velocity-like syntax with other server-side templating features.</p>\n<p><a href=\"http://jknack.github.io/handlebars.java/\" rel=\"nofollow noreferrer\">http://jknack.github.io/handlebars.java/</a></p>\n<pre><code>Handlebars handlebars = new Handlebars();\nTemplate template = handlebars.compileInline(&quot;Hello {{this}}!&quot;);\nSystem.out.println(template.apply(&quot;Handlebars.java&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178797,"reputation":1794,"user_id":3402449,"display_name":"Ahmad Shahwan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1665844521,"creation_date":1663859835,"answer_id":73817077,"question_id":3655424,"body_markdown":"Since Java 15 you have the method `String.formatted()` (see [documentation][1]).\r\n\r\n`str.formatted(args)` is the equivalent of `String.format(str, args)` with less ceremony.\r\n\r\nFor the example mentioned in the question, the method could be used as follows:\r\n\r\n```java\r\n&quot;Hello %s, Welcome to %s.&quot;.formatted(user.getName(), site.getName())\r\n``` \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)","title":"String replacement in java, similar to a velocity template","body":"<p>Since Java 15 you have the method <code>String.formatted()</code> (see <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)\" rel=\"nofollow noreferrer\">documentation</a>).</p>\n<p><code>str.formatted(args)</code> is the equivalent of <code>String.format(str, args)</code> with less ceremony.</p>\n<p>For the example mentioned in the question, the method could be used as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;Hello %s, Welcome to %s.&quot;.formatted(user.getName(), site.getName())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695212496,"creation_date":1670932671,"answer_id":74784516,"question_id":3655424,"body_markdown":"Java now has string templates (from version **21**, as a preview feature).\r\n\r\nSee [the string templates proposal (JEP 430) here](https://openjdk.org/jeps/430).\r\n\r\nIt is something along the lines of this:\r\n\r\n```java\r\nString name = &quot;John&quot;;\r\nString info = STR.&quot;I am \\{name}&quot;;\r\nSystem.out.println(info); // I am John\r\n```\r\n---\r\n\r\nP.S. [Kotlin][1] is 100% interoperable with Java. It supports cleaner string templates out of the box:\r\n\r\n```kotlin\r\nval name = &quot;John&quot;\r\nval info = &quot;I am $name&quot;\r\nprintln(info) // I am John\r\n```\r\n\r\nCombined with [extension functions][2], you can achieve the same thing the Java template processors (e.g. `STR`) will do.\r\n\r\n\r\n  [1]: https://kotlinlang.org/\r\n  [2]: https://kotlinlang.org/docs/extensions.html","title":"String replacement in java, similar to a velocity template","body":"<p>Java now has string templates (from version <strong>21</strong>, as a preview feature).</p>\n<p>See <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">the string templates proposal (JEP 430) here</a>.</p>\n<p>It is something along the lines of this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String name = &quot;John&quot;;\nString info = STR.&quot;I am \\{name}&quot;;\nSystem.out.println(info); // I am John\n</code></pre>\n<hr />\n<p>P.S. <a href=\"https://kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin</a> is 100% interoperable with Java. It supports cleaner string templates out of the box:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val name = &quot;John&quot;\nval info = &quot;I am $name&quot;\nprintln(info) // I am John\n</code></pre>\n<p>Combined with <a href=\"https://kotlinlang.org/docs/extensions.html\" rel=\"nofollow noreferrer\">extension functions</a>, you can achieve the same thing the Java template processors (e.g. <code>STR</code>) will do.</p>\n"}],"owner":{"account_id":145429,"reputation":3296,"user_id":355231,"accept_rate":94,"display_name":"Sastrija"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193388,"favorite_count":0,"down_vote_count":2,"up_vote_count":144,"accepted_answer_id":3655963,"answer_count":12,"score":142,"last_activity_date":1695212496,"creation_date":1283827726,"question_id":3655424,"body_markdown":"Is there any `String` replacement mechanism in Java, where I can pass objects with a text, and it replaces the string as it occurs?\r\nFor example, the text is:\r\n\r\n```raw\r\nHello ${user.name},\r\nWelcome to ${site.name}. \r\n```\r\n\r\nThe objects I have are `user` and `site`. I want to replace the strings given inside `${}` with its equivalent values from the objects. This is same as we replace objects in a [velocity][1] template.\r\n\r\n\r\n  [1]: https://github.com/apache/velocity-engine","title":"String replacement in java, similar to a velocity template","body":"<p>Is there any <code>String</code> replacement mechanism in Java, where I can pass objects with a text, and it replaces the string as it occurs?\nFor example, the text is:</p>\n<pre><code>Hello ${user.name},\nWelcome to ${site.name}. \n</code></pre>\n<p>The objects I have are <code>user</code> and <code>site</code>. I want to replace the strings given inside <code>${}</code> with its equivalent values from the objects. This is same as we replace objects in a <a href=\"https://github.com/apache/velocity-engine\" rel=\"noreferrer\">velocity</a> template.</p>\n"},{"tags":["java","image","image-resizing"],"comments":[{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":0,"creation_date":1357090498,"post_id":14115950,"comment_id":19536360,"body_markdown":"In what way is the quality lower? Can you post example images?","body":"In what way is the quality lower? Can you post example images?"},{"owner":{"account_id":274704,"reputation":4540,"user_id":567091,"accept_rate":100,"display_name":"NYCdotNet"},"score":0,"creation_date":1357090736,"post_id":14115950,"comment_id":19536410,"body_markdown":"Are you sure it&#39;s the resizing and not that you&#39;re saving it as a JPG and perhaps the default JPG compression is too high?  Have you tried saving it as an uncompressed format first?","body":"Are you sure it&#39;s the resizing and not that you&#39;re saving it as a JPG and perhaps the default JPG compression is too high?  Have you tried saving it as an uncompressed format first?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1357095371,"post_id":14115950,"comment_id":19537213,"body_markdown":"1) For better help sooner, post an [SSCCE](http://sscce.org/). 2) JPG is inherently lossy.  The compression/quality can be set at time of creation, as seen in [this answer](http://stackoverflow.com/a/11861821/418556). 3) The uploaded images appear identical to me.  It also is not an image I would see as being well suited to resizing, given the pale contrast of the &#39;white good&#39; appliance against a white BG.","body":"1) For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>. 2) JPG is inherently lossy.  The compression/quality can be set at time of creation, as seen in <a href=\"http://stackoverflow.com/a/11861821/418556\">this answer</a>. 3) The uploaded images appear identical to me.  It also is not an image I would see as being well suited to resizing, given the pale contrast of the &#39;white good&#39; appliance against a white BG."},{"owner":{"account_id":2196177,"reputation":273,"user_id":1941778,"display_name":"dutchman191"},"score":0,"creation_date":1357101132,"post_id":14115950,"comment_id":19538136,"body_markdown":"To me the images look very different, more just the smoothness of the thumb in the first one.  I need it to be closer to that level of quality.  Working on setting the compression quality now.","body":"To me the images look very different, more just the smoothness of the thumb in the first one.  I need it to be closer to that level of quality.  Working on setting the compression quality now."},{"owner":{"account_id":4060,"reputation":301914,"user_id":5987,"accept_rate":55,"display_name":"Mark Ransom"},"score":0,"creation_date":1360994576,"post_id":14115950,"comment_id":20911684,"body_markdown":"Have you tried `VALUE_INTERPOLATION_BICUBIC` instead of `VALUE_INTERPOLATION_BILINEAR`? According to the documentation bilinear only considers a 4x4 sample from the input while it&#39;s less specific about bicubic. Proper resizing requires a larger sampling window as the ratio of output to input gets smaller.","body":"Have you tried <code>VALUE_INTERPOLATION_BICUBIC</code> instead of <code>VALUE_INTERPOLATION_BILINEAR</code>? According to the documentation bilinear only considers a 4x4 sample from the input while it&#39;s less specific about bicubic. Proper resizing requires a larger sampling window as the ratio of output to input gets smaller."},{"owner":{"account_id":1231534,"reputation":2502,"user_id":1766868,"display_name":"le3th4x0rbot"},"score":1,"creation_date":1405881854,"post_id":14115950,"comment_id":38594125,"body_markdown":"The Java resized image has severe aliasing.  Claiming the sized versions look the same is some form of denial.  I worked around this problem using an ImageMagick integration.","body":"The Java resized image has severe aliasing.  Claiming the sized versions look the same is some form of denial.  I worked around this problem using an ImageMagick integration."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1604075717,"creation_date":1357099620,"answer_id":14116752,"question_id":14115950,"body_markdown":"Scaling an image down over a large range is inherently dangerous (from the point of view of quality), especially using a single step.\r\n\r\nThe recommended method is to use a divide and conquer method.  Basically, you scale the image down in steps of 50% until you reach your desired size.\r\n\r\nSo, I took the original image of 650x748 and scaled it down to fit within a 60x60 region (52x60).\r\n\r\n![enter image description here][1]\r\n\r\nDivide and conquer compared to one step...\r\n\r\n![enter image description here][2]![enter image description here][3]\r\n\r\n\tpublic class TestImageResize {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tnew TestImageResize();\r\n\t\t}\r\n\r\n\t\tpublic TestImageResize() {\r\n\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tUIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\t\t\t\t\t} catch (Exception ex) {\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tJFrame frame = new JFrame(&quot;Testing&quot;);\r\n\t\t\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\t\tframe.setLayout(new BorderLayout());\r\n\t\t\t\t\tframe.add(new ScalePane());\r\n\t\t\t\t\tframe.pack();\r\n\t\t\t\t\tframe.setLocationRelativeTo(null);\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic class ScalePane extends JPanel {\r\n\r\n\t\t\tprivate BufferedImage original;\r\n\t\t\tprivate BufferedImage scaled;\r\n\r\n\t\t\tpublic ScalePane() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\toriginal = ImageIO.read(new File(&quot;path/to/master.jpg&quot;));\r\n\t\t\t\t\tscaled = getScaledInstanceToFit(original, new Dimension(60, 60));\r\n\t\t\t\t\tImageIO.write(scaled, &quot;jpg&quot;, new File(&quot;scaled.jpg&quot;));\r\n\r\n\t\t\t\t\tBufferedImage image = new BufferedImage(52, 60, BufferedImage.TYPE_INT_RGB);\r\n\t\t\t\t\tGraphics2D g2d = image.createGraphics();\r\n\t\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\t\t\tg2d.drawImage(original, 0, 0, 52, 60, this);\r\n\t\t\t\t\tg2d.dispose();\r\n\r\n\t\t\t\t\tImageIO.write(image, &quot;jpg&quot;, new File(&quot;test.jpg&quot;));\r\n\r\n\t\t\t\t} catch (IOException ex) {\r\n\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic Dimension getPreferredSize() {\r\n\r\n\t\t\t\tDimension size = super.getPreferredSize();\r\n\t\t\t\tif (original != null) {\r\n\t\t\t\t\tif (scaled != null) {\r\n\t\t\t\t\t\tsize.width = original.getWidth() + scaled.getWidth();\r\n\t\t\t\t\t\tsize.height = original.getHeight();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsize.width = original.getWidth();\r\n\t\t\t\t\t\tsize.height = original.getHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn size;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected void paintComponent(Graphics g) {\r\n\t\t\t\tsuper.paintComponent(g);\r\n\t\t\t\tGraphics2D g2d = (Graphics2D) g.create();\r\n\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n\t\t\t\tif (original != null) {\r\n\t\t\t\t\tint x = 0;\r\n\t\t\t\t\tint y = (getHeight() - original.getHeight()) / 2;;\r\n\t\t\t\t\tif (scaled != null) {\r\n\t\t\t\t\t\tx = (getWidth() - (original.getWidth() + scaled.getWidth())) / 2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tx = (getWidth() - original.getWidth()) / 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tg2d.drawImage(original, x, y, this);\r\n\r\n\t\t\t\t\tif (scaled != null) {\r\n\t\t\t\t\t\tx += original.getWidth();\r\n\t\t\t\t\t\ty = (getHeight() - scaled.getHeight()) / 2;\r\n\t\t\t\t\t\tg2d.drawImage(scaled, x, y, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tg2d.dispose();\r\n\t\t\t}\r\n\r\n\t\t\tpublic BufferedImage getScaledInstanceToFit(BufferedImage img, Dimension size) {\r\n\t\t\t\tfloat scaleFactor = getScaleFactorToFit(img, size);\r\n\t\t\t\treturn getScaledInstance(img, scaleFactor);\r\n\t\t\t}\r\n\r\n\t\t\tpublic float getScaleFactorToFit(BufferedImage img, Dimension size) {\r\n\t\t\t\tfloat scale = 1f;\r\n\t\t\t\tif (img != null) {\r\n\t\t\t\t\tint imageWidth = img.getWidth();\r\n\t\t\t\t\tint imageHeight = img.getHeight();\r\n\t\t\t\t\tscale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\r\n\t\t\t\t}\r\n\t\t\t\treturn scale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic float getScaleFactorToFit(Dimension original, Dimension toFit) {\r\n\t\t\t\tfloat scale = 1f;\r\n\t\t\t\tif (original != null &amp;&amp; toFit != null) {\r\n\t\t\t\t\tfloat dScaleWidth = getScaleFactor(original.width, toFit.width);\r\n\t\t\t\t\tfloat dScaleHeight = getScaleFactor(original.height, toFit.height);\r\n\t\t\t\t\tscale = Math.min(dScaleHeight, dScaleWidth);\r\n\t\t\t\t}\r\n\t\t\t\treturn scale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic float getScaleFactor(int iMasterSize, int iTargetSize) {\r\n\t\t\t\tfloat scale = 1;\r\n\t\t\t\tif (iMasterSize &gt; iTargetSize) {\r\n\t\t\t\t\tscale = (float) iTargetSize / (float) iMasterSize;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscale = (float) iTargetSize / (float) iMasterSize;\r\n\t\t\t\t}\r\n\t\t\t\treturn scale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic BufferedImage getScaledInstance(BufferedImage img, double dScaleFactor) {\r\n\t\t\t\tBufferedImage imgBuffer = null;\r\n\t\t\t\timgBuffer = getScaledInstance(img, dScaleFactor, RenderingHints.VALUE_INTERPOLATION_BILINEAR, true);\r\n\t\t\t\treturn imgBuffer;\r\n\t\t\t}\r\n\r\n\t\t\tprotected BufferedImage getScaledInstance(BufferedImage img, double dScaleFactor, Object hint, boolean higherQuality) {\r\n\r\n\t\t\t\tint targetWidth = (int) Math.round(img.getWidth() * dScaleFactor);\r\n\t\t\t\tint targetHeight = (int) Math.round(img.getHeight() * dScaleFactor);\r\n\r\n\t\t\t\tint type = (img.getTransparency() == Transparency.OPAQUE)\r\n\t\t\t\t\t\t\t\t? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\r\n\r\n\t\t\t\tBufferedImage ret = (BufferedImage) img;\r\n\r\n\t\t\t\tif (targetHeight &gt; 0 || targetWidth &gt; 0) {\r\n\t\t\t\t\tint w, h;\r\n\t\t\t\t\tif (higherQuality) {\r\n\t\t\t\t\t\tw = img.getWidth();\r\n\t\t\t\t\t\th = img.getHeight();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tw = targetWidth;\r\n\t\t\t\t\t\th = targetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tif (higherQuality &amp;&amp; w &gt; targetWidth) {\r\n\t\t\t\t\t\t\tw /= 2;\r\n\t\t\t\t\t\t\tif (w &lt; targetWidth) {\r\n\t\t\t\t\t\t\t\tw = targetWidth;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (higherQuality &amp;&amp; h &gt; targetHeight) {\r\n\t\t\t\t\t\t\th /= 2;\r\n\t\t\t\t\t\t\tif (h &lt; targetHeight) {\r\n\t\t\t\t\t\t\t\th = targetHeight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tBufferedImage tmp = new BufferedImage(Math.max(w, 1), Math.max(h, 1), type);\r\n\t\t\t\t\t\tGraphics2D g2 = tmp.createGraphics();\r\n\t\t\t\t\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);\r\n\t\t\t\t\t\tg2.drawImage(ret, 0, 0, w, h, null);\r\n\t\t\t\t\t\tg2.dispose();\r\n\r\n\t\t\t\t\t\tret = tmp;\r\n\t\t\t\t\t} while (w != targetWidth || h != targetHeight);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret = new BufferedImage(1, 1, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\nYou may, also, find [The Perils of Image.getScaledInstance()](https://web.archive.org/web/20150518194337/http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html) of interest.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/vWsrq.png\r\n  [2]: http://i.stack.imgur.com/MCoU2.jpg\r\n  [3]: http://i.stack.imgur.com/sl9zQ.jpg","title":"Quality of Image after resize very low -- Java","body":"<p>Scaling an image down over a large range is inherently dangerous (from the point of view of quality), especially using a single step.</p>\n<p>The recommended method is to use a divide and conquer method.  Basically, you scale the image down in steps of 50% until you reach your desired size.</p>\n<p>So, I took the original image of 650x748 and scaled it down to fit within a 60x60 region (52x60).</p>\n<p><img src=\"https://i.stack.imgur.com/vWsrq.png\" alt=\"enter image description here\" /></p>\n<p>Divide and conquer compared to one step...</p>\n<p><img src=\"https://i.stack.imgur.com/MCoU2.jpg\" alt=\"enter image description here\" /><img src=\"https://i.stack.imgur.com/sl9zQ.jpg\" alt=\"enter image description here\" /></p>\n<pre><code>public class TestImageResize {\n\n    public static void main(String[] args) {\n        new TestImageResize();\n    }\n\n    public TestImageResize() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (Exception ex) {\n                }\n\n                JFrame frame = new JFrame(&quot;Testing&quot;);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.setLayout(new BorderLayout());\n                frame.add(new ScalePane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class ScalePane extends JPanel {\n\n        private BufferedImage original;\n        private BufferedImage scaled;\n\n        public ScalePane() {\n            try {\n                original = ImageIO.read(new File(&quot;path/to/master.jpg&quot;));\n                scaled = getScaledInstanceToFit(original, new Dimension(60, 60));\n                ImageIO.write(scaled, &quot;jpg&quot;, new File(&quot;scaled.jpg&quot;));\n\n                BufferedImage image = new BufferedImage(52, 60, BufferedImage.TYPE_INT_RGB);\n                Graphics2D g2d = image.createGraphics();\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n                g2d.drawImage(original, 0, 0, 52, 60, this);\n                g2d.dispose();\n\n                ImageIO.write(image, &quot;jpg&quot;, new File(&quot;test.jpg&quot;));\n\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n\n            Dimension size = super.getPreferredSize();\n            if (original != null) {\n                if (scaled != null) {\n                    size.width = original.getWidth() + scaled.getWidth();\n                    size.height = original.getHeight();\n                } else {\n                    size.width = original.getWidth();\n                    size.height = original.getHeight();\n                }\n            }\n\n            return size;\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n            if (original != null) {\n                int x = 0;\n                int y = (getHeight() - original.getHeight()) / 2;;\n                if (scaled != null) {\n                    x = (getWidth() - (original.getWidth() + scaled.getWidth())) / 2;\n                } else {\n                    x = (getWidth() - original.getWidth()) / 2;\n                }\n                g2d.drawImage(original, x, y, this);\n\n                if (scaled != null) {\n                    x += original.getWidth();\n                    y = (getHeight() - scaled.getHeight()) / 2;\n                    g2d.drawImage(scaled, x, y, this);\n                }\n            }\n            g2d.dispose();\n        }\n\n        public BufferedImage getScaledInstanceToFit(BufferedImage img, Dimension size) {\n            float scaleFactor = getScaleFactorToFit(img, size);\n            return getScaledInstance(img, scaleFactor);\n        }\n\n        public float getScaleFactorToFit(BufferedImage img, Dimension size) {\n            float scale = 1f;\n            if (img != null) {\n                int imageWidth = img.getWidth();\n                int imageHeight = img.getHeight();\n                scale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\n            }\n            return scale;\n        }\n\n        public float getScaleFactorToFit(Dimension original, Dimension toFit) {\n            float scale = 1f;\n            if (original != null &amp;&amp; toFit != null) {\n                float dScaleWidth = getScaleFactor(original.width, toFit.width);\n                float dScaleHeight = getScaleFactor(original.height, toFit.height);\n                scale = Math.min(dScaleHeight, dScaleWidth);\n            }\n            return scale;\n        }\n\n        public float getScaleFactor(int iMasterSize, int iTargetSize) {\n            float scale = 1;\n            if (iMasterSize &gt; iTargetSize) {\n                scale = (float) iTargetSize / (float) iMasterSize;\n            } else {\n                scale = (float) iTargetSize / (float) iMasterSize;\n            }\n            return scale;\n        }\n\n        public BufferedImage getScaledInstance(BufferedImage img, double dScaleFactor) {\n            BufferedImage imgBuffer = null;\n            imgBuffer = getScaledInstance(img, dScaleFactor, RenderingHints.VALUE_INTERPOLATION_BILINEAR, true);\n            return imgBuffer;\n        }\n\n        protected BufferedImage getScaledInstance(BufferedImage img, double dScaleFactor, Object hint, boolean higherQuality) {\n\n            int targetWidth = (int) Math.round(img.getWidth() * dScaleFactor);\n            int targetHeight = (int) Math.round(img.getHeight() * dScaleFactor);\n\n            int type = (img.getTransparency() == Transparency.OPAQUE)\n                            ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\n\n            BufferedImage ret = (BufferedImage) img;\n\n            if (targetHeight &gt; 0 || targetWidth &gt; 0) {\n                int w, h;\n                if (higherQuality) {\n                    w = img.getWidth();\n                    h = img.getHeight();\n                } else {\n                    w = targetWidth;\n                    h = targetHeight;\n                }\n\n                do {\n                    if (higherQuality &amp;&amp; w &gt; targetWidth) {\n                        w /= 2;\n                        if (w &lt; targetWidth) {\n                            w = targetWidth;\n                        }\n                    }\n\n                    if (higherQuality &amp;&amp; h &gt; targetHeight) {\n                        h /= 2;\n                        if (h &lt; targetHeight) {\n                            h = targetHeight;\n                        }\n                    }\n\n                    BufferedImage tmp = new BufferedImage(Math.max(w, 1), Math.max(h, 1), type);\n                    Graphics2D g2 = tmp.createGraphics();\n                    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);\n                    g2.drawImage(ret, 0, 0, w, h, null);\n                    g2.dispose();\n\n                    ret = tmp;\n                } while (w != targetWidth || h != targetHeight);\n            } else {\n                ret = new BufferedImage(1, 1, type);\n            }\n            return ret;\n        }\n    }\n}\n</code></pre>\n<p>You may, also, find <a href=\"https://web.archive.org/web/20150518194337/http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html\" rel=\"nofollow noreferrer\">The Perils of Image.getScaledInstance()</a> of interest.</p>\n"},{"tags":[],"owner":{"account_id":2053832,"reputation":18961,"user_id":1832154,"display_name":"mmgp"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1357101617,"creation_date":1357101617,"answer_id":14116909,"question_id":14115950,"body_markdown":"The issue you are seeing is actually related to the resampling filter used for downscaling. Obviously, the one used by your library is a bad one for the situation. Nearest neighbor, bilinear and bicubic are typical bad examples to be used when downscaling. I don&#39;t know the exact resampling filter Photoshop uses, but I used 3-lobed lanczos and got the following result:\r\n\r\n![enter image description here][1]\r\n\r\nSo, to solve your problem, you need to use a smarter resampling filter.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Ois0x.png","title":"Quality of Image after resize very low -- Java","body":"<p>The issue you are seeing is actually related to the resampling filter used for downscaling. Obviously, the one used by your library is a bad one for the situation. Nearest neighbor, bilinear and bicubic are typical bad examples to be used when downscaling. I don't know the exact resampling filter Photoshop uses, but I used 3-lobed lanczos and got the following result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Ois0x.png\" alt=\"enter image description here\"></p>\n\n<p>So, to solve your problem, you need to use a smarter resampling filter.</p>\n"},{"tags":[],"owner":{"account_id":266126,"reputation":10632,"user_id":553524,"accept_rate":82,"display_name":"Riyad Kalla"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1695211908,"creation_date":1357142369,"answer_id":14125088,"question_id":14115950,"body_markdown":"dutchman, this is why I maintain the &quot;imgscalr library&quot; -- to make this kind of stuff painfully easy.\r\n\r\nIn your example, a single method call would do the trick, right after your first ImageIO.read line:\r\n\r\n    origImage = ImageIO.read(new File(sourceImg));\r\n\r\nyou can do the following to get what you want ([javadoc for this method][2]):\r\n\r\n    origImage = Scalr.resize(origImage, Method.ULTRA_QUALITY, 60);\r\n\r\nand if that still looked a little jagged (because you are removing so much information from the image, you can add the following OP to the command to apply a light anti-aliasing filter to the image so it looks smoother):\r\n\r\n    origImage = Scalr.resize(origImage, Method.ULTRA_QUALITY, 60, Scalr.OP_ANTIALIAS);\r\n\r\nThat will replace all the remainder of the code logic you have. The only other thing I would recommend is saving out your really small samples as PNG&#39;s so there is no more compression/lossy conversion done on the image OR make sure you use little to none compression on the JPG if you really want it in JPG format. (Here is [an article][3] on how to do it; it utilizes the [ImageWriteParam][4] class)\r\n\r\nimgscalr is licensed under an Apache 2 license and hosted on [GitHub][5] so you can do what you want with it; it also includes [asynchronous scaling support][6] if you are using the library in a server-side app and queuing up huge numbers of scaling operations and don&#39;t want to kill the server.\r\n\r\n  [2]: http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#resize%28java.awt.image.BufferedImage,%20org.imgscalr.Scalr.Method,%20int,%20java.awt.image.BufferedImageOp...%29\r\n  [3]: http://blog.carsoncheng.ca/2011/02/how-to-change-jpeg-compression-in-java.html\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriteParam.html\r\n  [5]: https://github.com/thebuzzmedia/imgscalr\r\n  [6]: http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/AsyncScalr.html","title":"Quality of Image after resize very low -- Java","body":"<p>dutchman, this is why I maintain the &quot;imgscalr library&quot; -- to make this kind of stuff painfully easy.</p>\n<p>In your example, a single method call would do the trick, right after your first ImageIO.read line:</p>\n<pre><code>origImage = ImageIO.read(new File(sourceImg));\n</code></pre>\n<p>you can do the following to get what you want (<a href=\"http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#resize%28java.awt.image.BufferedImage,%20org.imgscalr.Scalr.Method,%20int,%20java.awt.image.BufferedImageOp...%29\" rel=\"nofollow noreferrer\">javadoc for this method</a>):</p>\n<pre><code>origImage = Scalr.resize(origImage, Method.ULTRA_QUALITY, 60);\n</code></pre>\n<p>and if that still looked a little jagged (because you are removing so much information from the image, you can add the following OP to the command to apply a light anti-aliasing filter to the image so it looks smoother):</p>\n<pre><code>origImage = Scalr.resize(origImage, Method.ULTRA_QUALITY, 60, Scalr.OP_ANTIALIAS);\n</code></pre>\n<p>That will replace all the remainder of the code logic you have. The only other thing I would recommend is saving out your really small samples as PNG's so there is no more compression/lossy conversion done on the image OR make sure you use little to none compression on the JPG if you really want it in JPG format. (Here is <a href=\"http://blog.carsoncheng.ca/2011/02/how-to-change-jpeg-compression-in-java.html\" rel=\"nofollow noreferrer\">an article</a> on how to do it; it utilizes the <a href=\"http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriteParam.html\" rel=\"nofollow noreferrer\">ImageWriteParam</a> class)</p>\n<p>imgscalr is licensed under an Apache 2 license and hosted on <a href=\"https://github.com/thebuzzmedia/imgscalr\" rel=\"nofollow noreferrer\">GitHub</a> so you can do what you want with it; it also includes <a href=\"http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/AsyncScalr.html\" rel=\"nofollow noreferrer\">asynchronous scaling support</a> if you are using the library in a server-side app and queuing up huge numbers of scaling operations and don't want to kill the server.</p>\n"},{"tags":[],"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1475954063,"creation_date":1459374240,"answer_id":36320292,"question_id":14115950,"body_markdown":"As already stated, Java&#39;s Graphics2D does not provide a very good algorithm for down-scaling. If you don&#39;t want to implement a sophisticated algorithm yourself you could try out the current open source libs specialized for this: [Thumbnailator][1], [imgscalr][2] and a Java interface for [ImageMagick][3].\r\n\r\nWhile researching for a private project I tried them out (except ImageMagick) and here are the visual results with Photoshop as reference:\r\n\r\n[![comparison][1]][1]\r\n\r\n&gt;  A. **Thumbnailator** 0.4.8 with default settings (no additional internal resizing)  \r\n&gt; B. **imgscalr** 4.2 with ULTRA_QUALTY setting  \r\n&gt; C. **Photoshop** CS5 bicubic filter (save for web)  \r\n&gt; D. **Graphics2d** with all HQ render hints\r\n\r\n[*Here is the used code*][2]\r\n\r\nThumbnailator and PS create similar results, while imgscalr seems to be softer. It is subjective which one of the libs creates the preferable results. Another point to consider though is the performance. While Thumbnailator and Graphics2d have similar runtime, imgscalr is considerably slower (with ULTRA_QUALITY) [in my benchmarks][3].\r\n\r\n[For more info, read this post providing more detail on this matter][3].\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/hH8C3.png\r\n  [2]: https://gist.github.com/patrickfav/a147ecd26a385ce4f6d8c373356454c4\r\n  [3]: https://stackoverflow.com/a/36295066/774398","title":"Quality of Image after resize very low -- Java","body":"<p>As already stated, Java's Graphics2D does not provide a very good algorithm for down-scaling. If you don't want to implement a sophisticated algorithm yourself you could try out the current open source libs specialized for this: <a href=\"https://i.stack.imgur.com/hH8C3.png\" rel=\"noreferrer\">Thumbnailator</a>, <a href=\"https://gist.github.com/patrickfav/a147ecd26a385ce4f6d8c373356454c4\" rel=\"noreferrer\">imgscalr</a> and a Java interface for <a href=\"https://stackoverflow.com/a/36295066/774398\">ImageMagick</a>.</p>\n\n<p>While researching for a private project I tried them out (except ImageMagick) and here are the visual results with Photoshop as reference:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hH8C3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hH8C3.png\" alt=\"comparison\"></a></p>\n\n<blockquote>\n  <p>A. <strong>Thumbnailator</strong> 0.4.8 with default settings (no additional internal resizing)<br>\n  B. <strong>imgscalr</strong> 4.2 with ULTRA_QUALTY setting<br>\n  C. <strong>Photoshop</strong> CS5 bicubic filter (save for web)<br>\n  D. <strong>Graphics2d</strong> with all HQ render hints</p>\n</blockquote>\n\n<p><a href=\"https://gist.github.com/patrickfav/a147ecd26a385ce4f6d8c373356454c4\" rel=\"noreferrer\"><em>Here is the used code</em></a></p>\n\n<p>Thumbnailator and PS create similar results, while imgscalr seems to be softer. It is subjective which one of the libs creates the preferable results. Another point to consider though is the performance. While Thumbnailator and Graphics2d have similar runtime, imgscalr is considerably slower (with ULTRA_QUALITY) <a href=\"https://stackoverflow.com/a/36295066/774398\">in my benchmarks</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/36295066/774398\">For more info, read this post providing more detail on this matter</a>.</p>\n"}],"owner":{"account_id":2196177,"reputation":273,"user_id":1941778,"display_name":"dutchman191"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22533,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":14116909,"answer_count":4,"score":27,"last_activity_date":1695211908,"creation_date":1357090321,"question_id":14115950,"body_markdown":"In the script it is going from around the 300x300 mark down to 60x60.  Need to improve the overall image quality as it is coming out very poorly at the moment.\r\n\r\n    public static Boolean resizeImage(String sourceImg, String destImg, Integer Width, Integer Height, Integer whiteSpaceAmount) \r\n    {\r\n        BufferedImage origImage;\r\n        \r\n        try \r\n        {\r\n            origImage = ImageIO.read(new File(sourceImg));\r\n            int type = origImage.getType() == 0? BufferedImage.TYPE_INT_ARGB : origImage.getType();\r\n            int fHeight = Height;\r\n            int fWidth = Width;\r\n            int whiteSpace = Height + whiteSpaceAmount; //Formatting all to squares so don&#39;t need two whiteSpace calcs..\r\n            double aspectRatio;\r\n\r\n            //Work out the resized dimensions\r\n            if (origImage.getHeight() &gt; origImage.getWidth()) //If the pictures height is greater than the width then scale appropriately.\r\n            {\r\n                fHeight = Height; //Set the height to 60 as it is the biggest side.\r\n\r\n                aspectRatio = (double)origImage.getWidth() / (double)origImage.getHeight(); //Get the aspect ratio of the picture.\r\n                fWidth = (int)Math.round(Width * aspectRatio); //Sets the width as created via the aspect ratio.\r\n            }\r\n            else if (origImage.getHeight() &lt; origImage.getWidth()) //If the pictures width is greater than the height scale appropriately.\r\n            {\r\n                fWidth = Width; //Set the height to 60 as it is the biggest side.\r\n\r\n                aspectRatio = (double)origImage.getHeight() / (double)origImage.getWidth(); //Get the aspect ratio of the picture.\r\n                fHeight = (int)Math.round(Height * aspectRatio); //Sets the height as created via the aspect ratio.\r\n            }\r\n\r\n            int extraHeight = whiteSpace - fHeight;\r\n            int extraWidth = whiteSpace - fWidth;\r\n\r\n            BufferedImage resizedImage = new BufferedImage(whiteSpace, whiteSpace, type);\r\n            Graphics2D g = resizedImage.createGraphics();\r\n            g.setColor(Color.white);\r\n            g.fillRect(0, 0, whiteSpace, whiteSpace);\r\n            \r\n            g.setComposite(AlphaComposite.Src);\r\n            g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n            g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            \r\n            g.drawImage(origImage, extraWidth/2, extraHeight/2, fWidth, fHeight, null);\r\n            g.dispose();\r\n\r\n            ImageIO.write(resizedImage, &quot;jpg&quot;, new File(destImg));\r\n        } \r\n        catch (IOException ex) \r\n        {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\nReally just need to know if their is something I can plug in that will bump up the quality or if I need to look at something else entirely.\r\n\r\n\r\nEDIT: Picture comparison.\r\n\r\nSource, just picked a random washing machine from google.\r\n&lt;img&gt;http://www.essexappliances.co.uk/images/categories/washing-machine.jpg&lt;/img&gt;\r\n\r\n![Washing Machine][1]\r\n\r\nThe same picture converted in Photoshop to what I need it to be.\r\nhttps://i.stack.imgur.com/Nn6S0.jpg\r\n\r\n![Good resize in Paint shop][2]\r\n\r\nWhat it looks like being converted like this.\r\nhttps://i.stack.imgur.com/uXZMD.jpg\r\n\r\n![Bad resize][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xKZsO.jpg\r\n  [2]: https://i.stack.imgur.com/TRKij.jpg\r\n  [3]: https://i.stack.imgur.com/wkD8O.jpg","title":"Quality of Image after resize very low -- Java","body":"<p>In the script it is going from around the 300x300 mark down to 60x60.  Need to improve the overall image quality as it is coming out very poorly at the moment.</p>\n\n<pre><code>public static Boolean resizeImage(String sourceImg, String destImg, Integer Width, Integer Height, Integer whiteSpaceAmount) \n{\n    BufferedImage origImage;\n\n    try \n    {\n        origImage = ImageIO.read(new File(sourceImg));\n        int type = origImage.getType() == 0? BufferedImage.TYPE_INT_ARGB : origImage.getType();\n        int fHeight = Height;\n        int fWidth = Width;\n        int whiteSpace = Height + whiteSpaceAmount; //Formatting all to squares so don't need two whiteSpace calcs..\n        double aspectRatio;\n\n        //Work out the resized dimensions\n        if (origImage.getHeight() &gt; origImage.getWidth()) //If the pictures height is greater than the width then scale appropriately.\n        {\n            fHeight = Height; //Set the height to 60 as it is the biggest side.\n\n            aspectRatio = (double)origImage.getWidth() / (double)origImage.getHeight(); //Get the aspect ratio of the picture.\n            fWidth = (int)Math.round(Width * aspectRatio); //Sets the width as created via the aspect ratio.\n        }\n        else if (origImage.getHeight() &lt; origImage.getWidth()) //If the pictures width is greater than the height scale appropriately.\n        {\n            fWidth = Width; //Set the height to 60 as it is the biggest side.\n\n            aspectRatio = (double)origImage.getHeight() / (double)origImage.getWidth(); //Get the aspect ratio of the picture.\n            fHeight = (int)Math.round(Height * aspectRatio); //Sets the height as created via the aspect ratio.\n        }\n\n        int extraHeight = whiteSpace - fHeight;\n        int extraWidth = whiteSpace - fWidth;\n\n        BufferedImage resizedImage = new BufferedImage(whiteSpace, whiteSpace, type);\n        Graphics2D g = resizedImage.createGraphics();\n        g.setColor(Color.white);\n        g.fillRect(0, 0, whiteSpace, whiteSpace);\n\n        g.setComposite(AlphaComposite.Src);\n        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n        g.drawImage(origImage, extraWidth/2, extraHeight/2, fWidth, fHeight, null);\n        g.dispose();\n\n        ImageIO.write(resizedImage, \"jpg\", new File(destImg));\n    } \n    catch (IOException ex) \n    {\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Really just need to know if their is something I can plug in that will bump up the quality or if I need to look at something else entirely.</p>\n\n<p>EDIT: Picture comparison.</p>\n\n<p>Source, just picked a random washing machine from google.\n<a href=\"http://www.essexappliances.co.uk/images/categories/washing-machine.jpg\" rel=\"noreferrer\">http://www.essexappliances.co.uk/images/categories/washing-machine.jpg</a></p>\n\n<p><img src=\"https://i.stack.imgur.com/xKZsO.jpg\" alt=\"Washing Machine\"></p>\n\n<p>The same picture converted in Photoshop to what I need it to be.\n<a href=\"https://i.stack.imgur.com/Nn6S0.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/Nn6S0.jpg</a></p>\n\n<p><img src=\"https://i.stack.imgur.com/TRKij.jpg\" alt=\"Good resize in Paint shop\"></p>\n\n<p>What it looks like being converted like this.\n<a href=\"https://i.stack.imgur.com/uXZMD.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/uXZMD.jpg</a></p>\n\n<p><img src=\"https://i.stack.imgur.com/wkD8O.jpg\" alt=\"Bad resize\"></p>\n"},{"tags":["java","android","flutter"],"comments":[{"owner":{"account_id":13698816,"reputation":1476,"user_id":9884628,"display_name":"Karan Mehta"},"score":0,"creation_date":1695191238,"post_id":77139350,"comment_id":135989213,"body_markdown":"You can provide gradient background to the progressbar and if you don&#39;t find any other solution then you can go with the Stack and use container with gradient like this and then put the transparent progressbar above that. Ultimately if nothing works then you can use the image as well.","body":"You can provide gradient background to the progressbar and if you don&#39;t find any other solution then you can go with the Stack and use container with gradient like this and then put the transparent progressbar above that. Ultimately if nothing works then you can use the image as well."}],"owner":{"account_id":29487699,"reputation":11,"user_id":22597245,"display_name":"yogesh kahar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695211876,"creation_date":1695185121,"question_id":77139350,"body_markdown":"I want to make multi color progress bar with indicator in flutter, but I am not find any type of package.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAbove image tell you, which I want design.\r\nif any one have solution about problem tell me.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8StrY.png","title":"multi color progress indicator","body":"<p>I want to make multi color progress bar with indicator in flutter, but I am not find any type of package.</p>\n<p><a href=\"https://i.stack.imgur.com/8StrY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8StrY.png\" alt=\"enter image description here\" /></a></p>\n<p>Above image tell you, which I want design.\nif any one have solution about problem tell me.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2934859,"reputation":1622,"user_id":2514069,"display_name":"Nikolay Hristov"},"score":0,"creation_date":1688281385,"post_id":76339307,"comment_id":135051169,"body_markdown":"Take a look at Danvega example here https://github.com/danvega/jwt\nIt helped me to understand the new changes a lot.","body":"Take a look at Danvega example here <a href=\"https://github.com/danvega/jwt\" rel=\"nofollow noreferrer\">github.com/danvega/jwt</a> It helped me to understand the new changes a lot."}],"answers":[{"tags":[],"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1685106930,"creation_date":1685097684,"answer_id":76340012,"question_id":76339307,"body_markdown":"Spring&#39;s general advice is to migrate to Spring 5.8 first, and to 6.0 later, to have a smoother transition to the new features.\r\n\r\nAs stated in [Spring Security 5.8 documentation][1]:\r\n\r\n&gt; In Spring Security 5.8, the antMatchers, mvcMatchers, and regexMatchers methods were deprecated in favor of new requestMatchers methods\r\n\r\nAs far as I know `http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)` should still work, it is even mentioned in the [Spring Security 6.0 documentation about JWT][2]:\r\n\r\nUsually Spring classes have a great documentation about deprecated methods, i.e. the JavaDoc often is giving hints which class or method to use instead.\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\r\n  [2]: https://docs.spring.io/spring-security/reference/6.0/servlet/oauth2/resource-server/jwt.html","title":"Spring Security deprecated issue","body":"<p>Spring's general advice is to migrate to Spring 5.8 first, and to 6.0 later, to have a smoother transition to the new features.</p>\n<p>As stated in <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"noreferrer\">Spring Security 5.8 documentation</a>:</p>\n<blockquote>\n<p>In Spring Security 5.8, the antMatchers, mvcMatchers, and regexMatchers methods were deprecated in favor of new requestMatchers methods</p>\n</blockquote>\n<p>As far as I know <code>http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)</code> should still work, it is even mentioned in the <a href=\"https://docs.spring.io/spring-security/reference/6.0/servlet/oauth2/resource-server/jwt.html\" rel=\"noreferrer\">Spring Security 6.0 documentation about JWT</a>:</p>\n<p>Usually Spring classes have a great documentation about deprecated methods, i.e. the JavaDoc often is giving hints which class or method to use instead.</p>\n"},{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1685107402,"creation_date":1685107402,"answer_id":76341223,"question_id":76339307,"body_markdown":"In addition to @schrom answer and more related to the deprecation of `OAuth2ResourceServerConfigurer#jwt`, Spring Security deprecated the methods that return its own configurer in favor of the ones that return `HttpSecurity`, and deprecated the `.and()` method from the `HttpSecurity`.\r\n\r\nFor example, `httpBasic()` is deprecated in favor of `httpBasic(Customizer)`. Those deprecations were done to have only one way to configure the security DSL, which is using lambdas. Take a look [at the documentation][1].\r\n\r\nSo, for JWT configuration, you&#39;d have to do:\r\n\r\n```java\r\noauth2ResourceServer((oauth2) -&gt; oauth2\r\n    .jwt(Customizer.withDefaults())\r\n)\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/migration-7/configuration.html#_use_the_lambda_dsl","title":"Spring Security deprecated issue","body":"<p>In addition to @schrom answer and more related to the deprecation of <code>OAuth2ResourceServerConfigurer#jwt</code>, Spring Security deprecated the methods that return its own configurer in favor of the ones that return <code>HttpSecurity</code>, and deprecated the <code>.and()</code> method from the <code>HttpSecurity</code>.</p>\n<p>For example, <code>httpBasic()</code> is deprecated in favor of <code>httpBasic(Customizer)</code>. Those deprecations were done to have only one way to configure the security DSL, which is using lambdas. Take a look <a href=\"https://docs.spring.io/spring-security/reference/migration-7/configuration.html#_use_the_lambda_dsl\" rel=\"noreferrer\">at the documentation</a>.</p>\n<p>So, for JWT configuration, you'd have to do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>oauth2ResourceServer((oauth2) -&gt; oauth2\n    .jwt(Customizer.withDefaults())\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685607447,"creation_date":1685607447,"answer_id":76379935,"question_id":76339307,"body_markdown":"Try this like:\r\n\r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n                http\r\n                        // Other stuff\r\n                        .oauth2ResourceServer((rs) -&gt;\r\n                                rs.jwt((jwt) -&gt;jwt.decoder(jwtDecoder()))\r\n                        );\r\n                return http.build();\r\n        }\r\n\r\n        @Bean\r\n        public JwtDecoder jwtDecoder() {\r\n                // return your JWTdecoder\r\n        }","title":"Spring Security deprecated issue","body":"<p>Try this like:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n            http\n                    // Other stuff\n                    .oauth2ResourceServer((rs) -&gt;\n                            rs.jwt((jwt) -&gt;jwt.decoder(jwtDecoder()))\n                    );\n            return http.build();\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n            // return your JWTdecoder\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25470907,"reputation":1,"user_id":19269101,"display_name":"lazyInferno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689861497,"creation_date":1689861257,"answer_id":76730620,"question_id":76339307,"body_markdown":"I guess you are looking to configure the Customizer for the various HTTPSecurity settings, you can take a cue from below:\r\n\r\n````\r\n    @Value(&quot;${jwksUri}&quot;)\r\n    private String jwksUri;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        http.oauth2ResourceServer( server -&gt; server.jwt(jwtConfigurer -&gt; jwtConfigurer.jwkSetUri(jwksUri)));\r\n\r\n        http.oauth2ResourceServer( server -&gt; server.jwt(jwtConfigurer -&gt; jwtConfigurer.decoder( myDecoder )));\r\n\r\n        http.authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated());\r\n\r\n        return http.build();\r\n\r\n    }\r\n````","title":"Spring Security deprecated issue","body":"<p>I guess you are looking to configure the Customizer for the various HTTPSecurity settings, you can take a cue from below:</p>\n<pre><code>    @Value(&quot;${jwksUri}&quot;)\n    private String jwksUri;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n        http.oauth2ResourceServer( server -&gt; server.jwt(jwtConfigurer -&gt; jwtConfigurer.jwkSetUri(jwksUri)));\n\n        http.oauth2ResourceServer( server -&gt; server.jwt(jwtConfigurer -&gt; jwtConfigurer.decoder( myDecoder )));\n\n        http.authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated());\n\n        return http.build();\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15668947,"reputation":2188,"user_id":11306005,"display_name":"helpper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695211433,"creation_date":1695211433,"answer_id":77142239,"question_id":76339307,"body_markdown":"Just for the Kotlin devs looking in here \r\n```kotlin\r\nfun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n        http.authorizeHttpRequests { auth -&gt;\r\n            auth.requestMatchers(&quot;/myendpoint/**&quot;).authenticated()\r\n        }\r\n        .oauth2ResourceServer { oauth2 -&gt; oauth2.jwt(Customizer.withDefaults()) }\r\n\r\n        return http.build()\r\n    }","title":"Spring Security deprecated issue","body":"<p>Just for the Kotlin devs looking in here</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        http.authorizeHttpRequests { auth -&gt;\n            auth.requestMatchers(&quot;/myendpoint/**&quot;).authenticated()\n        }\n        .oauth2ResourceServer { oauth2 -&gt; oauth2.jwt(Customizer.withDefaults()) }\n\n        return http.build()\n    }\n</code></pre>\n"}],"owner":{"account_id":20831010,"reputation":187,"user_id":15300325,"display_name":"Yogesh Rao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22919,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":76341223,"answer_count":5,"score":18,"last_activity_date":1695211433,"creation_date":1685092035,"question_id":76339307,"body_markdown":"Trying to configure JWT configuration. Seems like JWT is deprecated. How can I use `OAuth2ResourceServerConfigurer::jwt` now? \r\n\r\nMy code: \r\n\r\n```java\r\n@Bean\r\nSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    http.authorizeHttpRequests((requests) -&gt; requests.anyRequest().authenticated());\r\n    http.sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n    //http.formLogin(withDefaults());\r\n    http.httpBasic(Customizer.withDefaults());\r\n    http.csrf(csrf -&gt; csrf.disable());\r\n    http.headers(headers -&gt; headers.frameOptions(frameOptionsConfig -&gt; frameOptionsConfig.sameOrigin()));\r\n    http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n    return http.build();\r\n}\r\n```\r\n\r\nAlso, in Spring Security 6.0, `antMatchers()` as well as other configuration methods for securing requests (namely `mvcMatchers()` and `regexMatchers()`) have been removed from the API.","title":"Spring Security deprecated issue","body":"<p>Trying to configure JWT configuration. Seems like JWT is deprecated. How can I use <code>OAuth2ResourceServerConfigurer::jwt</code> now?</p>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests((requests) -&gt; requests.anyRequest().authenticated());\n    http.sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n    //http.formLogin(withDefaults());\n    http.httpBasic(Customizer.withDefaults());\n    http.csrf(csrf -&gt; csrf.disable());\n    http.headers(headers -&gt; headers.frameOptions(frameOptionsConfig -&gt; frameOptionsConfig.sameOrigin()));\n    http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n    return http.build();\n}\n</code></pre>\n<p>Also, in Spring Security 6.0, <code>antMatchers()</code> as well as other configuration methods for securing requests (namely <code>mvcMatchers()</code> and <code>regexMatchers()</code>) have been removed from the API.</p>\n"},{"tags":["java","spring","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1632240400,"post_id":69270197,"comment_id":122436792,"body_markdown":"Does anyone else have ever create unit test for caching in Java?","body":"Does anyone else have ever create unit test for caching in Java?"}],"answers":[{"tags":[],"owner":{"account_id":346385,"reputation":5794,"user_id":679879,"accept_rate":90,"display_name":"Mustafa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632303724,"creation_date":1632303724,"answer_id":69281769,"question_id":69270197,"body_markdown":"You need to annotate the service class method with `@Cacheable`. Try to follow the code in [this tutorial][1]. The following test code works as expected\r\n\r\n```java\r\n@Import({CacheConfig.class, DemoServiceImpl.class})\r\n@ExtendWith(SpringExtension.class)\r\n@EnableCaching\r\n@ImportAutoConfiguration(classes = {\r\n    CacheAutoConfiguration.class,\r\n    RedisAutoConfiguration.class\r\n})\r\nclass DemoServiceImplTest {\r\n\r\n  @MockBean\r\n  private LabelRepository labelRepository;\r\n\r\n  @Autowired\r\n  private DemoServiceImpl demoService;\r\n\r\n  @Autowired\r\n  private CacheManager cacheManager;\r\n\r\n  @TestConfiguration\r\n  static class EmbeddedRedisConfiguration {\r\n\r\n    private final RedisServer redisServer;\r\n\r\n    public EmbeddedRedisConfiguration() {\r\n      this.redisServer = new RedisServer();\r\n    }\r\n\r\n    @PostConstruct\r\n    public void startRedis() {\r\n      redisServer.start();\r\n    }\r\n\r\n    @PreDestroy\r\n    public void stopRedis() {\r\n      this.redisServer.stop();\r\n    }\r\n  }\r\n\r\n  @Test\r\n  void givenRedisCaching_whenFindItemById_thenItemReturnedFromCache() {\r\n    UUID id = UUID.randomUUID();\r\n    Label aLabel = new Label(id, &quot;label&quot;);\r\n\r\n    Mockito.when(labelRepository.findById(id)).thenReturn(Optional.of(aLabel));\r\n\r\n    Label labelCacheMiss = demoService.findByUuid(id);\r\n    Label labelCacheHit = demoService.findByUuid(id);\r\n\r\n    Mockito.verify(labelRepository, Mockito.times(1)).findById(id);\r\n  }\r\n}\r\n```\r\nWith this service class code:\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@EnableCaching\r\npublic class DemoServiceImpl {\r\n\r\n  public static final String CACHE_NAME = &quot;demoCache&quot;;\r\n\r\n  private final LabelRepository labelRepository;\r\n\r\n  @Cacheable(value = CACHE_NAME)\r\n  public Label findByUuid(UUID uuid) {\r\n    return labelRepository.findById(uuid)\r\n        .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Not found.&quot;));\r\n  }\r\n}\r\n```\r\nAnd this `CacheConfig`:\r\n\r\n```java\r\n@Configuration\r\npublic class CacheConfig {\r\n\r\n  @Bean\r\n  public RedisCacheManagerBuilderCustomizer redisCacheManagerBuilderCustomizer() {\r\n    return (builder) -&gt; builder\r\n        .withCacheConfiguration(DemoServiceImpl.CACHE_NAME,\r\n            RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofMinutes(10)));\r\n  }\r\n\r\n  @Bean\r\n  public RedisCacheConfiguration cacheConfiguration() {\r\n    return RedisCacheConfiguration.defaultCacheConfig()\r\n        .entryTtl(Duration.ofMinutes(60))\r\n        .disableCachingNullValues()\r\n        .serializeValuesWith(\r\n            RedisSerializationContext.SerializationPair.fromSerializer(\r\n                new GenericJackson2JsonRedisSerializer()));\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-redis-cache","title":"Unit Test for Redis cache in Java","body":"<p>You need to annotate the service class method with <code>@Cacheable</code>. Try to follow the code in <a href=\"https://www.baeldung.com/spring-boot-redis-cache\" rel=\"nofollow noreferrer\">this tutorial</a>. The following test code works as expected</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Import({CacheConfig.class, DemoServiceImpl.class})\n@ExtendWith(SpringExtension.class)\n@EnableCaching\n@ImportAutoConfiguration(classes = {\n    CacheAutoConfiguration.class,\n    RedisAutoConfiguration.class\n})\nclass DemoServiceImplTest {\n\n  @MockBean\n  private LabelRepository labelRepository;\n\n  @Autowired\n  private DemoServiceImpl demoService;\n\n  @Autowired\n  private CacheManager cacheManager;\n\n  @TestConfiguration\n  static class EmbeddedRedisConfiguration {\n\n    private final RedisServer redisServer;\n\n    public EmbeddedRedisConfiguration() {\n      this.redisServer = new RedisServer();\n    }\n\n    @PostConstruct\n    public void startRedis() {\n      redisServer.start();\n    }\n\n    @PreDestroy\n    public void stopRedis() {\n      this.redisServer.stop();\n    }\n  }\n\n  @Test\n  void givenRedisCaching_whenFindItemById_thenItemReturnedFromCache() {\n    UUID id = UUID.randomUUID();\n    Label aLabel = new Label(id, &quot;label&quot;);\n\n    Mockito.when(labelRepository.findById(id)).thenReturn(Optional.of(aLabel));\n\n    Label labelCacheMiss = demoService.findByUuid(id);\n    Label labelCacheHit = demoService.findByUuid(id);\n\n    Mockito.verify(labelRepository, Mockito.times(1)).findById(id);\n  }\n}\n</code></pre>\n<p>With this service class code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@EnableCaching\npublic class DemoServiceImpl {\n\n  public static final String CACHE_NAME = &quot;demoCache&quot;;\n\n  private final LabelRepository labelRepository;\n\n  @Cacheable(value = CACHE_NAME)\n  public Label findByUuid(UUID uuid) {\n    return labelRepository.findById(uuid)\n        .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Not found.&quot;));\n  }\n}\n</code></pre>\n<p>And this <code>CacheConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CacheConfig {\n\n  @Bean\n  public RedisCacheManagerBuilderCustomizer redisCacheManagerBuilderCustomizer() {\n    return (builder) -&gt; builder\n        .withCacheConfiguration(DemoServiceImpl.CACHE_NAME,\n            RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofMinutes(10)));\n  }\n\n  @Bean\n  public RedisCacheConfiguration cacheConfiguration() {\n    return RedisCacheConfiguration.defaultCacheConfig()\n        .entryTtl(Duration.ofMinutes(60))\n        .disableCachingNullValues()\n        .serializeValuesWith(\n            RedisSerializationContext.SerializationPair.fromSerializer(\n                new GenericJackson2JsonRedisSerializer()));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8901,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695211375,"creation_date":1632232759,"question_id":69270197,"body_markdown":"**Note:** I already look at and tried some approaches on SO e.g. [How to test Spring&#39;s declarative caching support on Spring Data repositories?](https://stackoverflow.com/questions/24221569/how-to-test-springs-declarative-caching-support-on-spring-data-repositories), but as most of them old, I cannot make them work properly and I need a solution with the latest library versions. So, I would be appreciated if you have a look at the question and help.\r\n\r\n\r\n\r\n\r\n```\r\n@Service\r\n@EnableCaching\r\n@RequiredArgsConstructor\r\npublic class DemoServiceImpl implements DemoService {\r\n\r\n    private static final String CACHE_NAME = &quot;demoCache&quot;;\r\n\r\n    private final LabelRepository labelRepository;\r\n    private final LabelTranslatableRepository translatableRepository;\r\n    private final LanguageService languageService;\r\n\r\n\r\n    @Override\r\n    public LabelDTO findByUuid(UUID uuid) {\r\n        final Label label = labelRepository.findByUuid(uuid)\r\n                .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Not found.&quot;));\r\n        final List&lt;LabelTranslatable&gt; translatableList = translatableRepository.findAllByEntityUuid(uuid);\r\n        return new LabelDTO(Pair.of(label.getUuid(), label.getKey()), translatableList);\r\n    }\r\n}\r\n```\r\n\r\nI created the following Unit Test to test caching for the nethod above:\r\n\r\n```\r\n@EnableCaching\r\n@ImportAutoConfiguration(classes = {\r\n        CacheAutoConfiguration.class,\r\n        RedisAutoConfiguration.class\r\n})\r\n@ExtendWith(MockitoExtension.class)\r\nclass TextLabelServiceImpl_deneme_Test {\r\n\r\n    @Autowired\r\n    private CacheManager cacheManager;\r\n\r\n    @InjectMocks\r\n    private LabelService labelService;\r\n\r\n    @Mock\r\n    private LabelRepository labelRepository;\r\n\r\n    @Mock\r\n    private LabelTranslatableRepository translatableRepository;\r\n\r\n    @Test\r\n    void test_Cache() {\r\n        UUID uuid = UUID.randomUUID();\r\n        final TextLabel textLabel = new TextLabel();\r\n        textLabel.setId(1);\r\n        textLabel.setKey(&quot;key1&quot;);\r\n\r\n        TextLabelTranslatable textLabelTranslatable = new TextLabelTranslatable();\r\n        textLabelTranslatable.setEntityUuid(uuid);\r\n        textLabelTranslatable.setLanguage(SupportedLanguage.fr);\r\n        textLabelTranslatable.setValue(&quot;value1&quot;);\r\n\r\n        final List&lt;TextLabelTranslatable&gt; translatableList = new ArrayList&lt;&gt;();\r\n        translatableList.add(textLabelTranslatable);\r\n\r\n        when(labelRepository.findByUuid(uuid)).thenReturn(Optional.of(textLabel));\r\n        when(translatableRepository.findAllByEntityUuid(uuid)).thenReturn(translatableList);\r\n\r\n        TextLabelDTO result1 = labelService.findByUuid(uuid);\r\n        TextLabelDTO result2 = labelService.findByUuid(uuid);\r\n\r\n        assertEquals(result1, result2);\r\n        Mockito.verify(translatableRepository, Mockito.times(1)).findAllByEntityUuid(uuid);\r\n    }\r\n```\r\n\r\nI am not sure if there is a missing part in my test, but at the last line (`Mockito.verify()`), it returns 2 instead of 1 that means caching not works. But it is working properly and there is a problem in my test I think. How should I complete the unit test to check the caching properly? ","title":"Unit Test for Redis cache in Java","body":"<p><strong>Note:</strong> I already look at and tried some approaches on SO e.g. <a href=\"https://stackoverflow.com/questions/24221569/how-to-test-springs-declarative-caching-support-on-spring-data-repositories\">How to test Spring's declarative caching support on Spring Data repositories?</a>, but as most of them old, I cannot make them work properly and I need a solution with the latest library versions. So, I would be appreciated if you have a look at the question and help.</p>\n<pre><code>@Service\n@EnableCaching\n@RequiredArgsConstructor\npublic class DemoServiceImpl implements DemoService {\n\n    private static final String CACHE_NAME = &quot;demoCache&quot;;\n\n    private final LabelRepository labelRepository;\n    private final LabelTranslatableRepository translatableRepository;\n    private final LanguageService languageService;\n\n\n    @Override\n    public LabelDTO findByUuid(UUID uuid) {\n        final Label label = labelRepository.findByUuid(uuid)\n                .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Not found.&quot;));\n        final List&lt;LabelTranslatable&gt; translatableList = translatableRepository.findAllByEntityUuid(uuid);\n        return new LabelDTO(Pair.of(label.getUuid(), label.getKey()), translatableList);\n    }\n}\n</code></pre>\n<p>I created the following Unit Test to test caching for the nethod above:</p>\n<pre><code>@EnableCaching\n@ImportAutoConfiguration(classes = {\n        CacheAutoConfiguration.class,\n        RedisAutoConfiguration.class\n})\n@ExtendWith(MockitoExtension.class)\nclass TextLabelServiceImpl_deneme_Test {\n\n    @Autowired\n    private CacheManager cacheManager;\n\n    @InjectMocks\n    private LabelService labelService;\n\n    @Mock\n    private LabelRepository labelRepository;\n\n    @Mock\n    private LabelTranslatableRepository translatableRepository;\n\n    @Test\n    void test_Cache() {\n        UUID uuid = UUID.randomUUID();\n        final TextLabel textLabel = new TextLabel();\n        textLabel.setId(1);\n        textLabel.setKey(&quot;key1&quot;);\n\n        TextLabelTranslatable textLabelTranslatable = new TextLabelTranslatable();\n        textLabelTranslatable.setEntityUuid(uuid);\n        textLabelTranslatable.setLanguage(SupportedLanguage.fr);\n        textLabelTranslatable.setValue(&quot;value1&quot;);\n\n        final List&lt;TextLabelTranslatable&gt; translatableList = new ArrayList&lt;&gt;();\n        translatableList.add(textLabelTranslatable);\n\n        when(labelRepository.findByUuid(uuid)).thenReturn(Optional.of(textLabel));\n        when(translatableRepository.findAllByEntityUuid(uuid)).thenReturn(translatableList);\n\n        TextLabelDTO result1 = labelService.findByUuid(uuid);\n        TextLabelDTO result2 = labelService.findByUuid(uuid);\n\n        assertEquals(result1, result2);\n        Mockito.verify(translatableRepository, Mockito.times(1)).findAllByEntityUuid(uuid);\n    }\n</code></pre>\n<p>I am not sure if there is a missing part in my test, but at the last line (<code>Mockito.verify()</code>), it returns 2 instead of 1 that means caching not works. But it is working properly and there is a problem in my test I think. How should I complete the unit test to check the caching properly?</p>\n"},{"tags":["java","gradle","intellij-idea","upgrade"],"comments":[{"owner":{"account_id":1575209,"reputation":10468,"user_id":1461862,"accept_rate":67,"display_name":"Mauricio Gracia Gutierrez"},"score":1,"creation_date":1694996590,"post_id":77124032,"comment_id":135960969,"body_markdown":"I don&#39;t know if you are using a version control system, but once you solve this issue, you should use different branches for different java versions","body":"I don&#39;t know if you are using a version control system, but once you solve this issue, you should use different branches for different java versions"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1694996708,"post_id":77124032,"comment_id":135960976,"body_markdown":"Please check https://stackoverflow.com/q/69637244/18157","body":"Please check <a href=\"https://stackoverflow.com/q/69637244/18157\">stackoverflow.com/q/69637244/18157</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694996805,"post_id":77124032,"comment_id":135960980,"body_markdown":"Why downgrade Gradle? Why not keep the latest Gradle but target your build for Java 8?","body":"Why downgrade Gradle? Why not keep the latest Gradle but target your build for Java 8?"},{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1694997060,"post_id":77124032,"comment_id":135960992,"body_markdown":"@MauricioGraciaGutierrez - yes I will keep difference branches fo different java versions after this is solved.","body":"@MauricioGraciaGutierrez - yes I will keep difference branches fo different java versions after this is solved."},{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1694997124,"post_id":77124032,"comment_id":135960997,"body_markdown":"@JimGarrison - In the link shared- we are adding a lib, think - switching back should not be dependent on adding any libs.","body":"@JimGarrison - In the link shared- we are adding a lib, think - switching back should not be dependent on adding any libs."},{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1694997166,"post_id":77124032,"comment_id":135960999,"body_markdown":"@BasilBourque - That is a separate repository all together. Hence setting up java 8 with the code compatible.","body":"@BasilBourque - That is a separate repository all together. Hence setting up java 8 with the code compatible."},{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1694997231,"post_id":77124032,"comment_id":135961003,"body_markdown":"Also i observed that this particular project is still running on java 17 but i have updated all the settings.  cxo-dashboards-war % java -version\njava version &quot;17.0.8&quot; 2023-07-18 LTS\nJava(TM) SE Runtime Environment (build 17.0.8+9-LTS-211)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.8+9-LTS-211, mixed mode, sharing)","body":"Also i observed that this particular project is still running on java 17 but i have updated all the settings.  cxo-dashboards-war % java -version java version &quot;17.0.8&quot; 2023-07-18 LTS Java(TM) SE Runtime Environment (build 17.0.8+9-LTS-211) Java HotSpot(TM) 64-Bit Server VM (build 17.0.8+9-LTS-211, mixed mode, sharing)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1694998790,"post_id":77124032,"comment_id":135961103,"body_markdown":"*&quot;Also i observed that this particular project is still running on java 17 but i have updated all the settings.&quot;* - The implication of &quot;still running on Java 17&quot; AND Jim Garrison&#39;s answer is that (in fact) you haven&#39;t updated all of the relevant settings ... or you haven&#39;t updated them correctly, or in all of the places that they need to be updated.","body":"<i>&quot;Also i observed that this particular project is still running on java 17 but i have updated all the settings.&quot;</i> - The implication of &quot;still running on Java 17&quot; AND Jim Garrison&#39;s answer is that (in fact) you haven&#39;t updated all of the relevant settings ... or you haven&#39;t updated them correctly, or in all of the places that they need to be updated."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1695000064,"post_id":77124032,"comment_id":135961217,"body_markdown":"If you are running gradle from the command line ... did you update the environment variables?  See https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_environment_variables","body":"If you are running gradle from the command line ... did you update the environment variables?  See <a href=\"https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_environment_variables\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694997681,"creation_date":1694997681,"answer_id":77124069,"question_id":77124032,"body_markdown":"When you read an exception message, always look for the final `Caused by:` message. This is the root cause, and the other parts of the stack trace show you why the code that throws that exception is being called.\r\n\r\nYour root cause is:\r\n```\r\nCaused by: java.lang.NoSuchMethodError: &#39;java.lang.Class sun.misc.Unsafe.defineClass(java.lang.String, byte[], int, int, java.lang.ClassLoader, java.security.ProtectionDomain)&#39;\r\n        at org.gradle.internal.classloader.ClassLoaderUtils.define(ClassLoaderUtils.java:104)\r\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:58)\r\n```\r\nSo the version of gradle you are using is trying to call a method which doesn&#39;t exist in the version of Java you are running with.\r\n\r\nAs the question Jim Garrison linked to points out, that method was removed in Java 11 (https://bugs.openjdk.org/browse/JDK-8193033).\r\n\r\nSo if you want to use grade 4.7 (I don&#39;t know why you&#39;d use such an old version) you will need to use Java 10 or earlier. ","title":"Issue after Switching back from Java 17 to Java 8","body":"<p>When you read an exception message, always look for the final <code>Caused by:</code> message. This is the root cause, and the other parts of the stack trace show you why the code that throws that exception is being called.</p>\n<p>Your root cause is:</p>\n<pre><code>Caused by: java.lang.NoSuchMethodError: 'java.lang.Class sun.misc.Unsafe.defineClass(java.lang.String, byte[], int, int, java.lang.ClassLoader, java.security.ProtectionDomain)'\n        at org.gradle.internal.classloader.ClassLoaderUtils.define(ClassLoaderUtils.java:104)\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:58)\n</code></pre>\n<p>So the version of gradle you are using is trying to call a method which doesn't exist in the version of Java you are running with.</p>\n<p>As the question Jim Garrison linked to points out, that method was removed in Java 11 (<a href=\"https://bugs.openjdk.org/browse/JDK-8193033\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8193033</a>).</p>\n<p>So if you want to use grade 4.7 (I don't know why you'd use such an old version) you will need to use Java 10 or earlier.</p>\n"},{"tags":[],"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695211213,"creation_date":1695211213,"answer_id":77142203,"question_id":77124032,"body_markdown":"This entire series of problems happened due to the gradle version download and the &quot;.cache&quot; folder created by gradle pertaining to that workspace. In my case - there were two problems.\r\n1. Multiple gradle version downloads for the same workspace: For Java 8, the downloaded gradle version was 4x and for Java 17 - the downloaded gradle version was 7x in the same workspace along with the &quot;.cache&quot; folder which created the version compatibility issues\r\n2. Updating the Environmental variables: When there was only one Java version, it was automatically picked up but since now we have two different versions in the same path, we would need to update the environment variables based on the Java version we want to use.\r\n\r\nSo by creating a new workspace W1 on Java 8 and another Workspace W2 on Java17 separately but updating the environment variables based on the Workspace we chose to work on, I was able to proceed.\r\n\r\nThanks, everyone for the input. Appreciate for sharing your suggestions.","title":"Issue after Switching back from Java 17 to Java 8","body":"<p>This entire series of problems happened due to the gradle version download and the &quot;.cache&quot; folder created by gradle pertaining to that workspace. In my case - there were two problems.</p>\n<ol>\n<li>Multiple gradle version downloads for the same workspace: For Java 8, the downloaded gradle version was 4x and for Java 17 - the downloaded gradle version was 7x in the same workspace along with the &quot;.cache&quot; folder which created the version compatibility issues</li>\n<li>Updating the Environmental variables: When there was only one Java version, it was automatically picked up but since now we have two different versions in the same path, we would need to update the environment variables based on the Java version we want to use.</li>\n</ol>\n<p>So by creating a new workspace W1 on Java 8 and another Workspace W2 on Java17 separately but updating the environment variables based on the Workspace we chose to work on, I was able to proceed.</p>\n<p>Thanks, everyone for the input. Appreciate for sharing your suggestions.</p>\n"}],"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77142203,"answer_count":2,"score":1,"last_activity_date":1695211213,"creation_date":1694996279,"question_id":77124032,"body_markdown":"My Current workspace was running with Java 8 with the Gradle version -&quot;4.7&quot;. Later I upgraded to Java 17 in the same workspace with an upgrade in gradle 7x version with other libraries. Now I am switching back to Java 8 again on the gradle version - &quot;4.7&quot; and hitting with below issue. I understand some class file or some lib settings has been disturbed.  Can someone please assist with this? \r\nI have already done the &quot;invalidate caches&quot;, removed the .gradle, .idea, and build folders. \r\n\r\n\r\n./gradlew npmInstallDefault --stacktrace\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not create service of type ScriptPluginFactory using BuildScopeServices.createScriptPluginFactory().\r\n\r\nCould not create service of type PluginResolutionStrategyInternal using BuildScopeServices.createPluginResolutionStrategy().\r\n\r\n* Exception is:\r\n\r\n```\r\norg.gradle.internal.service.ServiceCreationException: Could not create service of type ScriptPluginFactory using BuildScopeServices.createScriptPluginFactory().\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:816)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:767)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.find(DefaultServiceRegistry.java:295)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:284)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:279)\r\n        at org.gradle.initialization.DefaultGradleLauncherFactory.doNewInstance(DefaultGradleLauncherFactory.java:179)\r\n        at org.gradle.initialization.DefaultGradleLauncherFactory.newInstance(DefaultGradleLauncherFactory.java:108)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:40)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:31)\r\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\r\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\r\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:80)\r\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:53)\r\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:61)\r\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:34)\r\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\r\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\r\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\r\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:29)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:59)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:44)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:46)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:30)\r\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n        at org.gradle.util.Swapper.swap(Swapper.java:38)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\nCaused by: org.gradle.internal.service.ServiceCreationException: Could not create service of type PluginResolutionStrategyInternal using BuildScopeServices.createPluginResolutionStrategy().\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:816)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:767)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.find(DefaultServiceRegistry.java:295)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:284)\r\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:279)\r\n        at org.gradle.internal.service.scopes.BuildScopeServices.defaultScriptPluginFactory(BuildScopeServices.java:301)\r\n        at org.gradle.internal.service.scopes.BuildScopeServices.createScriptPluginFactory(BuildScopeServices.java:293)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\r\n        at org.gradle.internal.service.ReflectionBasedServiceMethod.invoke(ReflectionBasedServiceMethod.java:35)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:814)\r\n        ... 61 more\r\nCaused by: org.gradle.api.GradleException: Could not generate a proxy class for class org.gradle.plugin.management.internal.DefaultPluginResolutionStrategy.\r\n        at org.gradle.api.internal.AbstractClassGenerator.generateUnderLock(AbstractClassGenerator.java:228)\r\n        at org.gradle.api.internal.AbstractClassGenerator.generate(AbstractClassGenerator.java:80)\r\n        at org.gradle.api.internal.ClassGeneratorBackedInstantiator.newInstance(ClassGeneratorBackedInstantiator.java:36)\r\n        at org.gradle.plugin.internal.PluginUsePluginServiceRegistry$BuildScopeServices.createPluginResolutionStrategy(PluginUsePluginServiceRegistry.java:106)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\r\n        at org.gradle.internal.service.ReflectionBasedServiceMethod.invoke(ReflectionBasedServiceMethod.java:35)\r\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:814)\r\n        ... 79 more\r\nCaused by: java.lang.NoSuchMethodError: &#39;java.lang.Class sun.misc.Unsafe.defineClass(java.lang.String, byte[], int, int, java.lang.ClassLoader, java.security.ProtectionDomain)&#39;\r\n        at org.gradle.internal.classloader.ClassLoaderUtils.define(ClassLoaderUtils.java:104)\r\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:58)\r\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:54)\r\n        at org.gradle.api.internal.AsmBackedClassGenerator$ClassBuilderImpl.generate(AsmBackedClassGenerator.java:967)\r\n        at org.gradle.api.internal.AbstractClassGenerator.generateUnderLock(AbstractClassGenerator.java:226)\r\n        ... 88 more\r\n```\r\n\r\nThank you in advance.","title":"Issue after Switching back from Java 17 to Java 8","body":"<p>My Current workspace was running with Java 8 with the Gradle version -&quot;4.7&quot;. Later I upgraded to Java 17 in the same workspace with an upgrade in gradle 7x version with other libraries. Now I am switching back to Java 8 again on the gradle version - &quot;4.7&quot; and hitting with below issue. I understand some class file or some lib settings has been disturbed.  Can someone please assist with this?\nI have already done the &quot;invalidate caches&quot;, removed the .gradle, .idea, and build folders.</p>\n<p>./gradlew npmInstallDefault --stacktrace</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not create service of type ScriptPluginFactory using BuildScopeServices.createScriptPluginFactory().</li>\n</ul>\n<p>Could not create service of type PluginResolutionStrategyInternal using BuildScopeServices.createPluginResolutionStrategy().</p>\n<ul>\n<li>Exception is:</li>\n</ul>\n<pre><code>org.gradle.internal.service.ServiceCreationException: Could not create service of type ScriptPluginFactory using BuildScopeServices.createScriptPluginFactory().\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:816)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:767)\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\n        at org.gradle.internal.service.DefaultServiceRegistry.find(DefaultServiceRegistry.java:295)\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:284)\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:279)\n        at org.gradle.initialization.DefaultGradleLauncherFactory.doNewInstance(DefaultGradleLauncherFactory.java:179)\n        at org.gradle.initialization.DefaultGradleLauncherFactory.newInstance(DefaultGradleLauncherFactory.java:108)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:40)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:31)\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:80)\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:53)\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:61)\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:34)\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:29)\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:59)\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:44)\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:46)\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:30)\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n        at org.gradle.util.Swapper.swap(Swapper.java:38)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\nCaused by: org.gradle.internal.service.ServiceCreationException: Could not create service of type PluginResolutionStrategyInternal using BuildScopeServices.createPluginResolutionStrategy().\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:816)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:767)\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.assembleParameters(DefaultServiceRegistry.java:780)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryService.create(DefaultServiceRegistry.java:766)\n        at org.gradle.internal.service.DefaultServiceRegistry$ManagedObjectServiceProvider.getInstance(DefaultServiceRegistry.java:571)\n        at org.gradle.internal.service.DefaultServiceRegistry$SingletonService.get(DefaultServiceRegistry.java:628)\n        at org.gradle.internal.service.DefaultServiceRegistry.find(DefaultServiceRegistry.java:295)\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:284)\n        at org.gradle.internal.service.DefaultServiceRegistry.get(DefaultServiceRegistry.java:279)\n        at org.gradle.internal.service.scopes.BuildScopeServices.defaultScriptPluginFactory(BuildScopeServices.java:301)\n        at org.gradle.internal.service.scopes.BuildScopeServices.createScriptPluginFactory(BuildScopeServices.java:293)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n        at org.gradle.internal.service.ReflectionBasedServiceMethod.invoke(ReflectionBasedServiceMethod.java:35)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:814)\n        ... 61 more\nCaused by: org.gradle.api.GradleException: Could not generate a proxy class for class org.gradle.plugin.management.internal.DefaultPluginResolutionStrategy.\n        at org.gradle.api.internal.AbstractClassGenerator.generateUnderLock(AbstractClassGenerator.java:228)\n        at org.gradle.api.internal.AbstractClassGenerator.generate(AbstractClassGenerator.java:80)\n        at org.gradle.api.internal.ClassGeneratorBackedInstantiator.newInstance(ClassGeneratorBackedInstantiator.java:36)\n        at org.gradle.plugin.internal.PluginUsePluginServiceRegistry$BuildScopeServices.createPluginResolutionStrategy(PluginUsePluginServiceRegistry.java:106)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n        at org.gradle.internal.service.ReflectionBasedServiceMethod.invoke(ReflectionBasedServiceMethod.java:35)\n        at org.gradle.internal.service.DefaultServiceRegistry$FactoryMethodService.invokeMethod(DefaultServiceRegistry.java:814)\n        ... 79 more\nCaused by: java.lang.NoSuchMethodError: 'java.lang.Class sun.misc.Unsafe.defineClass(java.lang.String, byte[], int, int, java.lang.ClassLoader, java.security.ProtectionDomain)'\n        at org.gradle.internal.classloader.ClassLoaderUtils.define(ClassLoaderUtils.java:104)\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:58)\n        at org.gradle.model.internal.asm.AsmClassGenerator.define(AsmClassGenerator.java:54)\n        at org.gradle.api.internal.AsmBackedClassGenerator$ClassBuilderImpl.generate(AsmBackedClassGenerator.java:967)\n        at org.gradle.api.internal.AbstractClassGenerator.generateUnderLock(AbstractClassGenerator.java:226)\n        ... 88 more\n</code></pre>\n<p>Thank you in advance.</p>\n"},{"tags":["java","gis","geospatial","openstreetmap","geotools"],"answers":[{"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195279,"creation_date":1695195279,"answer_id":77140257,"question_id":77138209,"body_markdown":"**LT;DR;** It can&#39;t be done.\r\n\r\nA Shapefile (which is a very old and obsolete format) can only store one type of geometry. So you can&#39;t save both points and polygons in a single shapefile. So, you will either need two shapefiles or, better, use a GeoPackage and store two tables with in it (you could store both in one table but it will just cause problems later with styling).\r\n\r\nFinally, rather than rolling your own distance code you should make use of the [`GeodeticCalculator.getOrthodromicDistance()`][1] which will return the distance in metres between two lat/lon points directly.\r\n\r\n\r\n  [1]: https://docs.geotools.org/stable/javadocs/org/geotools/referencing/GeodeticCalculator.html#getOrthodromicDistance()","title":"Modifying an existing shapefile by adding polygons and points using GeoTools in Java","body":"<p><strong>LT;DR;</strong> It can't be done.</p>\n<p>A Shapefile (which is a very old and obsolete format) can only store one type of geometry. So you can't save both points and polygons in a single shapefile. So, you will either need two shapefiles or, better, use a GeoPackage and store two tables with in it (you could store both in one table but it will just cause problems later with styling).</p>\n<p>Finally, rather than rolling your own distance code you should make use of the <a href=\"https://docs.geotools.org/stable/javadocs/org/geotools/referencing/GeodeticCalculator.html#getOrthodromicDistance()\" rel=\"nofollow noreferrer\"><code>GeodeticCalculator.getOrthodromicDistance()</code></a> which will return the distance in metres between two lat/lon points directly.</p>\n"}],"owner":{"account_id":10976043,"reputation":700,"user_id":8064710,"display_name":"Siva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695211108,"creation_date":1695161291,"question_id":77138209,"body_markdown":"I am working on a Java project where I need to modify an existing shapefile by adding new polygons and points to it using the GeoTools library. I have managed to create the polygons and points separately and display them individually, but I&#39;m struggling to combine and saving them to the existing shapefile. Here&#39;s a simplified version of my code:\r\n\r\n```java\r\npublic class CRSLab {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tCRSLab lab = new CRSLab();\r\n\t\tlab.displayShapefile();\r\n\t}\r\n\r\n\tprivate void displayShapefile() throws Exception {\r\n\t\tList&lt;PolygonPoint&gt; locations = new ArrayList&lt;&gt;();\r\n\t\tinitData(locations);\r\n\r\n\t\tSimpleFeatureTypeBuilder builder = new SimpleFeatureTypeBuilder();\r\n\t\tbuilder.setName(&quot;polygonFeature&quot;);\r\n\t\tbuilder.add(&quot;the_geom&quot;, Polygon.class);\r\n\t\tSimpleFeatureType POLYGON = builder.buildFeatureType();\r\n\t\tGeometryFactory geometryFactory = JTSFactoryFinder.getGeometryFactory(null);\r\n\r\n\t\tSimpleFeature simpleFeature = toFeature(locations, POLYGON, geometryFactory);\r\n\r\n\t\tSimpleFeatureTypeBuilder pointBuilder = new SimpleFeatureTypeBuilder();\r\n\t\tbuilder.setName(&quot;pointFeature&quot;);\r\n\t\tbuilder.add(&quot;the_geom&quot;, Point.class);\r\n\r\n\t\tSimpleFeatureType pointFeatureType = builder.buildFeatureType();\r\n\r\n\t\tSimpleFeature simpleFeaturePoint1 = toFeaturePoint(46.45d, -72.15d, pointFeatureType, geometryFactory);\r\n\t\tSimpleFeature simpleFeaturePoint2 = toFeaturePoint(47.15d, -72.15d, pointFeatureType, geometryFactory);\r\n\t\tSimpleFeature simpleFeaturePoint3 = toFeaturePoint(48.25d, -72.15d, pointFeatureType, geometryFactory);\r\n\t\tSimpleFeature simpleFeaturePoint4 = toFeaturePoint(49.35d, -72.15d, pointFeatureType, geometryFactory);\r\n\r\n\t\tDefaultFeatureCollection collection = new DefaultFeatureCollection();\r\n\t\tcollection.add(simpleFeature);\r\n\t\tcollection.add(simpleFeaturePoint1);\r\n\t\tcollection.add(simpleFeaturePoint2);\r\n\t\tcollection.add(simpleFeaturePoint3);\r\n\t\tcollection.add(simpleFeaturePoint4);\r\n\r\n\t\tFile shapeFile = new File(new File(&quot;src/main/resources/&quot;).getAbsolutePath() + &quot;example_shapefile_1.shp&quot;);\r\n\t\tMap&lt;String, Serializable&gt; params = new HashMap&lt;&gt;();\r\n\t\tparams.put(&quot;url&quot;, shapeFile.toURI().toURL());\r\n\r\n\t\tShapefileDataStoreFactory dataStoreFactory = new ShapefileDataStoreFactory();\r\n\r\n\t\tShapefileDataStore dataStore = (ShapefileDataStore) dataStoreFactory.createNewDataStore(params);\r\n\t\tdataStore.createSchema(POLYGON);\r\n\r\n\t\tTransaction polygonTransaction = new DefaultTransaction(&quot;create&quot;);\r\n\r\n\t\tString typeName = dataStore.getTypeNames()[0];\r\n\t\tSimpleFeatureSource featureSource = dataStore.getFeatureSource(typeName);\r\n\r\n\t\tif (featureSource instanceof SimpleFeatureStore) {\r\n\t\t\tSimpleFeatureStore featureStore = (SimpleFeatureStore) featureSource;\r\n\t\t\tfeatureStore.setTransaction(polygonTransaction);\r\n\t\t\ttry {\r\n\t\t\t\tfeatureStore.addFeatures(collection);\r\n\t\t\t\tpolygonTransaction.commit();\r\n\r\n\t\t\t} catch (Exception problem) {\r\n\t\t\t\tpolygonTransaction.rollback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Create a map content and add our shapefile to it\r\n\t\tMapContent map = new MapContent();\r\n\t\tmap.setTitle(&quot;Quickstart&quot;);\r\n\t\tStyle style = SLD.createSimpleStyle(featureSource.getSchema(), Color.RED);\r\n\r\n\t\tLayer layer = new FeatureLayer(featureSource, style);\r\n\t\tmap.addLayer(layer);\r\n\r\n\t\t// Now display the map\r\n\t\tJMapFrame.showMap(map);\r\n\t}\r\n\r\n\tprivate static SimpleFeature toFeature(List&lt;PolygonPoint&gt; locations, SimpleFeatureType POLYGON,\r\n\t\t\tGeometryFactory geometryFactory) {\r\n\t\tCoordinate[] coords = new Coordinate[locations.size()];\r\n\r\n\t\tint i = 0;\r\n\t\tfor (PolygonPoint location : locations) {\r\n\t\t\tCoordinate coord = new Coordinate(location.x, location.y, 0);\r\n\t\t\tcoords[i] = (coord);\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tPolygon polygon = geometryFactory.createPolygon(coords);\r\n\r\n\t\tSystem.out.println(polygon.toString());\r\n\r\n\t\tSimpleFeatureBuilder featureBuilder = new SimpleFeatureBuilder(POLYGON);\r\n\t\tfeatureBuilder.add(polygon);\r\n\t\treturn featureBuilder.buildFeature(null);\r\n\t}\r\n\r\n\tprivate static SimpleFeature toFeaturePoint(Double latitude, Double longitude, SimpleFeatureType pointFeatureType,\r\n\t\t\tGeometryFactory geometryFactory) {\r\n\t\tCoordinate coord = new Coordinate(latitude, longitude, 0);\r\n\t\tPoint point = geometryFactory.createPoint(coord);\r\n\t\tSimpleFeatureBuilder featureBuilder = new SimpleFeatureBuilder(pointFeatureType);\r\n\t\tfeatureBuilder.add(point);\r\n\t\treturn featureBuilder.buildFeature(null);\r\n\t}\r\n\r\n\tstatic class PolygonPoint {\r\n\t\tpublic double x;\r\n\t\tpublic double y;\r\n\r\n\t\tpublic PolygonPoint(double x, double y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void initData(List&lt;PolygonPoint&gt; locations) {\r\n\t\tlocations.add(new PolygonPoint(40.0, -75.0));\r\n\t\tlocations.add(new PolygonPoint(42.5, -70.0));\r\n\t\tlocations.add(new PolygonPoint(45.0, -75.0));\r\n\t\tlocations.add(new PolygonPoint(42.5, -80.0));\r\n\t\tlocations.add(new PolygonPoint(40.0, -75.0));\r\n\t}\r\n\r\n\tpublic static double calculateDistanceInMeters(double x1, double y1, double x2, double y2) {\r\n\t\tdouble deltaX = x2 - x1;\r\n\t\tdouble deltaY = y2 - y1;\r\n\t\tdouble distanceSquared = (deltaX * deltaX) + (deltaY * deltaY);\r\n\t\treturn Math.sqrt(distanceSquared);\r\n\t}\r\n\r\n\tpublic static double distance(double lat1, double lon1, double lat2, double lon2) {\r\n\t\t// The math module contains a function\r\n\t\t// named toRadians which converts from\r\n\t\t// degrees to radians.\r\n\r\n\t\tlon1 = Math.toRadians(lon1);\r\n\t\tlon2 = Math.toRadians(lon2);\r\n\t\tlat1 = Math.toRadians(lat1);\r\n\t\tlat2 = Math.toRadians(lat2);\r\n\r\n\t\t// Haversine formula\r\n\r\n\t\tdouble dlon = lon2 - lon1;\r\n\t\tdouble dlat = lat2 - lat1;\r\n\t\tdouble a = Math.pow(Math.sin(dlat / 2), 2) + Math.cos(lat1) * Math.cos(lat2) * Math.pow(Math.sin(dlon / 2), 2);\r\n\r\n\t\tdouble c = 2 * Math.asin(Math.sqrt(a));\r\n\r\n\t\t// Radius of earth in kilometers. Use 3956\r\n\t\t// for miles\r\n\r\n\t\tdouble r = 6371;\r\n\r\n\t\t// calculate the result\r\n\r\n\t\treturn (c * r);\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m using GeoTools version 30. My goal is to add the collection of points and polygon to the existing shapefile and save it. However, I&#39;m not sure how to do this correctly. Could someone provide guidance on how to achieve this using GeoTools?","title":"Modifying an existing shapefile by adding polygons and points using GeoTools in Java","body":"<p>I am working on a Java project where I need to modify an existing shapefile by adding new polygons and points to it using the GeoTools library. I have managed to create the polygons and points separately and display them individually, but I'm struggling to combine and saving them to the existing shapefile. Here's a simplified version of my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CRSLab {\n\n    public static void main(String[] args) throws Exception {\n        CRSLab lab = new CRSLab();\n        lab.displayShapefile();\n    }\n\n    private void displayShapefile() throws Exception {\n        List&lt;PolygonPoint&gt; locations = new ArrayList&lt;&gt;();\n        initData(locations);\n\n        SimpleFeatureTypeBuilder builder = new SimpleFeatureTypeBuilder();\n        builder.setName(&quot;polygonFeature&quot;);\n        builder.add(&quot;the_geom&quot;, Polygon.class);\n        SimpleFeatureType POLYGON = builder.buildFeatureType();\n        GeometryFactory geometryFactory = JTSFactoryFinder.getGeometryFactory(null);\n\n        SimpleFeature simpleFeature = toFeature(locations, POLYGON, geometryFactory);\n\n        SimpleFeatureTypeBuilder pointBuilder = new SimpleFeatureTypeBuilder();\n        builder.setName(&quot;pointFeature&quot;);\n        builder.add(&quot;the_geom&quot;, Point.class);\n\n        SimpleFeatureType pointFeatureType = builder.buildFeatureType();\n\n        SimpleFeature simpleFeaturePoint1 = toFeaturePoint(46.45d, -72.15d, pointFeatureType, geometryFactory);\n        SimpleFeature simpleFeaturePoint2 = toFeaturePoint(47.15d, -72.15d, pointFeatureType, geometryFactory);\n        SimpleFeature simpleFeaturePoint3 = toFeaturePoint(48.25d, -72.15d, pointFeatureType, geometryFactory);\n        SimpleFeature simpleFeaturePoint4 = toFeaturePoint(49.35d, -72.15d, pointFeatureType, geometryFactory);\n\n        DefaultFeatureCollection collection = new DefaultFeatureCollection();\n        collection.add(simpleFeature);\n        collection.add(simpleFeaturePoint1);\n        collection.add(simpleFeaturePoint2);\n        collection.add(simpleFeaturePoint3);\n        collection.add(simpleFeaturePoint4);\n\n        File shapeFile = new File(new File(&quot;src/main/resources/&quot;).getAbsolutePath() + &quot;example_shapefile_1.shp&quot;);\n        Map&lt;String, Serializable&gt; params = new HashMap&lt;&gt;();\n        params.put(&quot;url&quot;, shapeFile.toURI().toURL());\n\n        ShapefileDataStoreFactory dataStoreFactory = new ShapefileDataStoreFactory();\n\n        ShapefileDataStore dataStore = (ShapefileDataStore) dataStoreFactory.createNewDataStore(params);\n        dataStore.createSchema(POLYGON);\n\n        Transaction polygonTransaction = new DefaultTransaction(&quot;create&quot;);\n\n        String typeName = dataStore.getTypeNames()[0];\n        SimpleFeatureSource featureSource = dataStore.getFeatureSource(typeName);\n\n        if (featureSource instanceof SimpleFeatureStore) {\n            SimpleFeatureStore featureStore = (SimpleFeatureStore) featureSource;\n            featureStore.setTransaction(polygonTransaction);\n            try {\n                featureStore.addFeatures(collection);\n                polygonTransaction.commit();\n\n            } catch (Exception problem) {\n                polygonTransaction.rollback();\n            }\n        }\n\n        // Create a map content and add our shapefile to it\n        MapContent map = new MapContent();\n        map.setTitle(&quot;Quickstart&quot;);\n        Style style = SLD.createSimpleStyle(featureSource.getSchema(), Color.RED);\n\n        Layer layer = new FeatureLayer(featureSource, style);\n        map.addLayer(layer);\n\n        // Now display the map\n        JMapFrame.showMap(map);\n    }\n\n    private static SimpleFeature toFeature(List&lt;PolygonPoint&gt; locations, SimpleFeatureType POLYGON,\n            GeometryFactory geometryFactory) {\n        Coordinate[] coords = new Coordinate[locations.size()];\n\n        int i = 0;\n        for (PolygonPoint location : locations) {\n            Coordinate coord = new Coordinate(location.x, location.y, 0);\n            coords[i] = (coord);\n            i++;\n        }\n\n        Polygon polygon = geometryFactory.createPolygon(coords);\n\n        System.out.println(polygon.toString());\n\n        SimpleFeatureBuilder featureBuilder = new SimpleFeatureBuilder(POLYGON);\n        featureBuilder.add(polygon);\n        return featureBuilder.buildFeature(null);\n    }\n\n    private static SimpleFeature toFeaturePoint(Double latitude, Double longitude, SimpleFeatureType pointFeatureType,\n            GeometryFactory geometryFactory) {\n        Coordinate coord = new Coordinate(latitude, longitude, 0);\n        Point point = geometryFactory.createPoint(coord);\n        SimpleFeatureBuilder featureBuilder = new SimpleFeatureBuilder(pointFeatureType);\n        featureBuilder.add(point);\n        return featureBuilder.buildFeature(null);\n    }\n\n    static class PolygonPoint {\n        public double x;\n        public double y;\n\n        public PolygonPoint(double x, double y) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    private static void initData(List&lt;PolygonPoint&gt; locations) {\n        locations.add(new PolygonPoint(40.0, -75.0));\n        locations.add(new PolygonPoint(42.5, -70.0));\n        locations.add(new PolygonPoint(45.0, -75.0));\n        locations.add(new PolygonPoint(42.5, -80.0));\n        locations.add(new PolygonPoint(40.0, -75.0));\n    }\n\n    public static double calculateDistanceInMeters(double x1, double y1, double x2, double y2) {\n        double deltaX = x2 - x1;\n        double deltaY = y2 - y1;\n        double distanceSquared = (deltaX * deltaX) + (deltaY * deltaY);\n        return Math.sqrt(distanceSquared);\n    }\n\n    public static double distance(double lat1, double lon1, double lat2, double lon2) {\n        // The math module contains a function\n        // named toRadians which converts from\n        // degrees to radians.\n\n        lon1 = Math.toRadians(lon1);\n        lon2 = Math.toRadians(lon2);\n        lat1 = Math.toRadians(lat1);\n        lat2 = Math.toRadians(lat2);\n\n        // Haversine formula\n\n        double dlon = lon2 - lon1;\n        double dlat = lat2 - lat1;\n        double a = Math.pow(Math.sin(dlat / 2), 2) + Math.cos(lat1) * Math.cos(lat2) * Math.pow(Math.sin(dlon / 2), 2);\n\n        double c = 2 * Math.asin(Math.sqrt(a));\n\n        // Radius of earth in kilometers. Use 3956\n        // for miles\n\n        double r = 6371;\n\n        // calculate the result\n\n        return (c * r);\n    }\n}\n</code></pre>\n<p>I'm using GeoTools version 30. My goal is to add the collection of points and polygon to the existing shapefile and save it. However, I'm not sure how to do this correctly. Could someone provide guidance on how to achieve this using GeoTools?</p>\n"},{"tags":["java","fibonacci"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1695142526,"post_id":77136473,"comment_id":135983374,"body_markdown":"all numbers can be represented by `x = w^3-1` ?! that is, `w = (x+1)^(1/3)` - you probably forgot to add that `w` must be an integer - anyway the question, as posted, is not clear || BTW posted code is not complete, neither method is being called... maybe a [mre] would be appropriate","body":"all numbers can be represented by <code>x = w^3-1</code> ?! that is, <code>w = (x+1)^(1&#47;3)</code> - you probably forgot to add that <code>w</code> must be an integer - anyway the question, as posted, is not clear || BTW posted code is not complete, neither method is being called... maybe a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be appropriate"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":2,"creation_date":1695143013,"post_id":77136473,"comment_id":135983454,"body_markdown":"Note that the 93rd Fibonacci number is too large to fit in a long. You might have better luck using BigInteger.","body":"Note that the 93rd Fibonacci number is too large to fit in a long. You might have better luck using BigInteger."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1695143120,"post_id":77136473,"comment_id":135983472,"body_markdown":"Use two sets - one for the fib numbers and one for the x^3-1 numbers, then call Set.retainAll","body":"Use two sets - one for the fib numbers and one for the x^3-1 numbers, then call Set.retainAll"},{"owner":{"account_id":27703902,"reputation":77,"user_id":21147982,"display_name":"mary"},"score":0,"creation_date":1695153239,"post_id":77136473,"comment_id":135985063,"body_markdown":"yes, i used Set.retainAll, but still the result is only 0. Then i think it is true though","body":"yes, i used Set.retainAll, but still the result is only 0. Then i think it is true though"},{"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"score":0,"creation_date":1695214310,"post_id":77136473,"comment_id":135994040,"body_markdown":"I would also post it on MathExchange. But as to prove you that there are other numbers than 0 which satisfy your condition. As I understand, you are looking for **Fn = (w^3) - 1**\n\nSomeone will prove it using induction or something","body":"I would also post it on MathExchange. But as to prove you that there are other numbers than 0 which satisfy your condition. As I understand, you are looking for <b>Fn = (w^3) - 1</b>  Someone will prove it using induction or something"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695210974,"creation_date":1695178258,"answer_id":77139003,"question_id":77136473,"body_markdown":"You might find this [article](https://www.researchgate.net/publication/228934007_Fibonacci_numbers_at_most_one_away_from_a_perfect_power) interesting. Here is the abstract.\r\n\r\n&gt; The famous problem of determining all perfect powers in the Fibonacci sequence and the Lucas sequence has recently been resolved by three of the present authors. We sketch the proof of this result, and we apply it to show that the only Fibonacci numbers `Fn` such that `Fn &#177; 1` is a perfect power are `0, 1, 2, 3, 5 and 8`. The proof of the Fibonacci Perfect Powers Theorem involves very deep mathematics, combining the modular approach used in the proof of Fermat&#39;s Last Theorem with Baker&#39;s Theory. By contrast, using the knowledge of the all perfect powers in the Fibonacci and Lucas sequences, the determination of the perfect powers among the numbers Fn &#177; 1 is quite elementary.\r\n\r\nFor the first `1000` values I only came up with `0`. Since `BigDecimal` has no fractional power or cbrt method (like `Math.cbrt`) .  I used `Newton&#39;s method` to  compute the cube roots along with the fact that the recursive sums of the digits of candidate under test must be `0,1,8,or 9` for the number to be a perfect cube. (e.g.  19683 -&gt; 1 + 9 + 6 + 8 + 3 = 27 -&gt; 9 so it **may be** a perfect cube (in fact it is). The latter was used to eliminate candidates.\r\n\r\nThis was more a math problem than a programming problem. So you may want to check out the [MathExchange](https://math.stackexchange.com/) for more info.\r\n","title":"which numbers among the first N Fibonacci numbers can be given in the form (1 less than a certain cube)?","body":"<p>You might find this <a href=\"https://www.researchgate.net/publication/228934007_Fibonacci_numbers_at_most_one_away_from_a_perfect_power\" rel=\"nofollow noreferrer\">article</a> interesting. Here is the abstract.</p>\n<blockquote>\n<p>The famous problem of determining all perfect powers in the Fibonacci sequence and the Lucas sequence has recently been resolved by three of the present authors. We sketch the proof of this result, and we apply it to show that the only Fibonacci numbers <code>Fn</code> such that <code>Fn ± 1</code> is a perfect power are <code>0, 1, 2, 3, 5 and 8</code>. The proof of the Fibonacci Perfect Powers Theorem involves very deep mathematics, combining the modular approach used in the proof of Fermat's Last Theorem with Baker's Theory. By contrast, using the knowledge of the all perfect powers in the Fibonacci and Lucas sequences, the determination of the perfect powers among the numbers Fn ± 1 is quite elementary.</p>\n</blockquote>\n<p>For the first <code>1000</code> values I only came up with <code>0</code>. Since <code>BigDecimal</code> has no fractional power or cbrt method (like <code>Math.cbrt</code>) .  I used <code>Newton's method</code> to  compute the cube roots along with the fact that the recursive sums of the digits of candidate under test must be <code>0,1,8,or 9</code> for the number to be a perfect cube. (e.g.  19683 -&gt; 1 + 9 + 6 + 8 + 3 = 27 -&gt; 9 so it <strong>may be</strong> a perfect cube (in fact it is). The latter was used to eliminate candidates.</p>\n<p>This was more a math problem than a programming problem. So you may want to check out the <a href=\"https://math.stackexchange.com/\">MathExchange</a> for more info.</p>\n"}],"owner":{"account_id":27703902,"reputation":77,"user_id":21147982,"display_name":"mary"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695210974,"creation_date":1695141947,"question_id":77136473,"body_markdown":"I have the task to determine all numbers among the first N Fibonacci numbers that can be given in such a form: w^3 - 1.\r\n\r\nFor example, i have such a simple part of the program:\r\n\r\n    public static List&lt;Long&gt; generateFibonacciNumbers(int N) {\r\n        List&lt;Long&gt; fibonacciNumbers = new ArrayList&lt;&gt;();\r\n        long a = 0, b = 1;\r\n        fibonacciNumbers.add(a);\r\n        fibonacciNumbers.add(b);\r\n\r\n        for (int i = 2; i &lt; N; i++) {\r\n            long c = a + b;\r\n            fibonacciNumbers.add(c);\r\n            a = b;\r\n            b = c;\r\n        }\r\n\r\n        return fibonacciNumbers;\r\n    }\r\n\r\n    public static boolean isW3Minus1(long num) {\r\n        long w = (long) Math.cbrt(num + 1);\r\n        return w * w * w - 1 == num;\r\n    }\r\n\r\nThe problem is that the result of this program is 0 and nothing else. I also checked manually to find such numbers, but could not do it. So i started to think that there are no such numbers except 0, but anyway, i wanted to check here too.","title":"which numbers among the first N Fibonacci numbers can be given in the form (1 less than a certain cube)?","body":"<p>I have the task to determine all numbers among the first N Fibonacci numbers that can be given in such a form: w^3 - 1.</p>\n<p>For example, i have such a simple part of the program:</p>\n<pre><code>public static List&lt;Long&gt; generateFibonacciNumbers(int N) {\n    List&lt;Long&gt; fibonacciNumbers = new ArrayList&lt;&gt;();\n    long a = 0, b = 1;\n    fibonacciNumbers.add(a);\n    fibonacciNumbers.add(b);\n\n    for (int i = 2; i &lt; N; i++) {\n        long c = a + b;\n        fibonacciNumbers.add(c);\n        a = b;\n        b = c;\n    }\n\n    return fibonacciNumbers;\n}\n\npublic static boolean isW3Minus1(long num) {\n    long w = (long) Math.cbrt(num + 1);\n    return w * w * w - 1 == num;\n}\n</code></pre>\n<p>The problem is that the result of this program is 0 and nothing else. I also checked manually to find such numbers, but could not do it. So i started to think that there are no such numbers except 0, but anyway, i wanted to check here too.</p>\n"},{"tags":["java","build.gradle","owasp-dependency-check"],"owner":{"account_id":1522315,"reputation":71,"user_id":1421658,"display_name":"FARSiM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695210675,"creation_date":1695210675,"question_id":77142130,"body_markdown":"OWASP dependency checker found an issue in the **snakeyaml** library version 1.3. Since this was included in the project as a transitive dependency of spring-boot-starter which is also automatically included as a dependency of spring-boot library. \r\nSo, I forced version 2.0 of snakeyaml in the *build.gradle* file. \r\n```\r\nconfigurations {    \r\n    all {\r\n        resolutionStrategy {           \r\n            force &#39;org.yaml:snakeyaml:2.0&#39;\r\n        }\r\n    }\r\n}\r\n```\r\nNow, I can see in the external library list, snakeyaml version 2.0 is present. But after running the dependency checker again, I can see it&#39;s reporting snakeyaml 1.3 version again, but from the **gradle cache location**. \r\n\r\nI removed the cache, but reloading gradle reinstates the older version along with version 2.3.  \r\n\r\nQ1. Is there any way we can configure OWASP dependency checker not to omit the libraries in the cache, only look for used libraries? \r\nQ2. Is there any other way to handle the situation?","title":"WASP dependency checker reporting security issue from cache for a library that is forced to a later version","body":"<p>OWASP dependency checker found an issue in the <strong>snakeyaml</strong> library version 1.3. Since this was included in the project as a transitive dependency of spring-boot-starter which is also automatically included as a dependency of spring-boot library.\nSo, I forced version 2.0 of snakeyaml in the <em>build.gradle</em> file.</p>\n<pre><code>configurations {    \n    all {\n        resolutionStrategy {           \n            force 'org.yaml:snakeyaml:2.0'\n        }\n    }\n}\n</code></pre>\n<p>Now, I can see in the external library list, snakeyaml version 2.0 is present. But after running the dependency checker again, I can see it's reporting snakeyaml 1.3 version again, but from the <strong>gradle cache location</strong>.</p>\n<p>I removed the cache, but reloading gradle reinstates the older version along with version 2.3.</p>\n<p>Q1. Is there any way we can configure OWASP dependency checker not to omit the libraries in the cache, only look for used libraries?\nQ2. Is there any other way to handle the situation?</p>\n"},{"tags":["java","redis"],"comments":[{"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"score":0,"creation_date":1695224506,"post_id":77140718,"comment_id":135996754,"body_markdown":"Please add the code of how you&#39;re connection and the code that&#39;s generating the error. Also add a bit more detailed error.","body":"Please add the code of how you&#39;re connection and the code that&#39;s generating the error. Also add a bit more detailed error."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695230355,"post_id":77140718,"comment_id":135997921,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695210675,"creation_date":1695210675,"answer_id":77142129,"question_id":77140718,"body_markdown":"The node you are connecting to does not contain the key of the command to be executed or is not the master node containing the key.\r\n\r\nThe solution is to execute the command to the proper node which is `127.0.0.1:7002`.","title":"Issue with Redis CLuster &quot;MovedDataException&quot;","body":"<p>The node you are connecting to does not contain the key of the command to be executed or is not the master node containing the key.</p>\n<p>The solution is to execute the command to the proper node which is <code>127.0.0.1:7002</code>.</p>\n"}],"owner":{"account_id":7918872,"reputation":1,"user_id":5980484,"display_name":"Adam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695210675,"creation_date":1695199288,"question_id":77140718,"body_markdown":"I have a Redis cluster setup and working.\r\n\r\na specific call is returning this error:\r\n\r\n\r\n```\r\nredis.clients.jedis.exceptions.JedisMovedDataException: MOVED 12867 127.0.0.1:7002\r\n\r\n```\r\n\r\n\r\n\r\nany ideas folks ?\r\n\r\na\r\n\r\n\r\nI cant work it out.. i see connections being accepted into the cluster and Redis reports the cluster is ok.","title":"Issue with Redis CLuster &quot;MovedDataException&quot;","body":"<p>I have a Redis cluster setup and working.</p>\n<p>a specific call is returning this error:</p>\n<pre><code>redis.clients.jedis.exceptions.JedisMovedDataException: MOVED 12867 127.0.0.1:7002\n\n</code></pre>\n<p>any ideas folks ?</p>\n<p>a</p>\n<p>I cant work it out.. i see connections being accepted into the cluster and Redis reports the cluster is ok.</p>\n"},{"tags":["java","xml","spring","string"],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694943176,"creation_date":1694943176,"answer_id":77121241,"question_id":77120829,"body_markdown":"It just needs a couple of lines of XSLT:\r\n\r\n    &lt;xsl:template match=&quot;trade_qty[.=$oldprice]&quot;&gt;\r\n      &lt;xsl:copy&gt;{$newprice}&lt;/xsl:copy&gt;\r\n    &lt;/xsl:template&gt;\r\n\r\nwhere $oldprice and $newprice are parameters to the stylesheet.\r\n\r\nI&#39;ve used XSLT 3.0 syntax here for brevity but if you prefer to use an XSLT 1.0 processor it&#39;s perfectly feasible, just a bit more verbose.","title":"Replace xml tag along with value in xml request string","body":"<p>It just needs a couple of lines of XSLT:</p>\n<pre><code>&lt;xsl:template match=&quot;trade_qty[.=$oldprice]&quot;&gt;\n  &lt;xsl:copy&gt;{$newprice}&lt;/xsl:copy&gt;\n&lt;/xsl:template&gt;\n</code></pre>\n<p>where $oldprice and $newprice are parameters to the stylesheet.</p>\n<p>I've used XSLT 3.0 syntax here for brevity but if you prefer to use an XSLT 1.0 processor it's perfectly feasible, just a bit more verbose.</p>\n"},{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694986814,"creation_date":1694951190,"answer_id":77121640,"question_id":77120829,"body_markdown":"Using XSLT for this problem in Java is possible but gets awkward if your replacements differ for various input values. Using XPath and DOM-API is much easier.\r\n\r\nGiven an input XML document like this:\r\n```\r\n&lt;container&gt;\r\n\t&lt;trade_qty&gt;&lt;![CDATA[123]]&gt;&lt;/trade_qty&gt;\r\n\t&lt;trade_qty&gt;&lt;![CDATA[234]]&gt;&lt;/trade_qty&gt;\r\n\t&lt;fixed_price&gt;&lt;![CDATA[345.67]]&gt;&lt;/fixed_price&gt;\r\n\t&lt;fixed_price&gt;&lt;![CDATA[456.78]]&gt;&lt;/fixed_price&gt;\r\n&lt;/container&gt;\r\n```\r\n\r\n```\r\n@Test\r\nvoid testReplace() throws Exception {\r\n    // Just for reading the source XML document\r\n    var r = new DOMResult();\r\n    try(InputStream is = getClass().getResourceAsStream(&quot;/replace.xml&quot;)) {\r\n        TransformerFactory.newInstance().newTransformer().transform(new StreamSource(is), r);\r\n    }\r\n    \r\n    Node doc = r.getNode(); // This is your XML document as a DOM-Node\r\n    \r\n    // REPLACEMENT BEGIN\r\n    var xPath = XPathFactory.newInstance().newXPath(); // We want to use XPath to find the ocurrences of trade_qty and fixed_price\r\n    \r\n    // Replace trade_qty ...\r\n    var nodes = (NodeList)xPath.evaluate(&quot;container/trade_qty&quot;, doc, XPathConstants.NODESET);\r\n    for(int i = 0; i &lt; nodes.getLength(); i++) {\r\n        nodes.item(i).setTextContent(&quot;100&quot;); // Replace with new content.\r\n    }\r\n    // The same for container/fixed_price. Omitted for simplicity.\r\n    \r\n    // REPLACEMENT end\r\n    \r\n    // Just for checking the output\r\n    try(ByteArrayOutputStream os = new ByteArrayOutputStream()) {\r\n        TransformerFactory.newInstance().newTransformer().transform(new DOMSource(doc), new StreamResult(os));\r\n        System.out.println(os.toString());\r\n    }\r\n}\r\n```\r\nNote that a CDATA section is just a representation for a text node in XML where you don&#39;t have to escape some special characters (e.g. &lt; and &amp;). Thus `&lt;trade_qty&gt;&lt;!CDATA[123]]&gt;&lt;/trade_qty&gt;` and `&lt;trade_qty&gt;123&lt;/trade_qty&gt;` are the same.\r\n\r\n# Edit\r\n\r\nSome useful XPaths:\r\n\r\n1. `//trade_qty` selects any trade_qty element in your XML document.\r\n2. `//TermPriceList/fixed_price` selects any fixed_price element that is a child of TermPriceList.","title":"Replace xml tag along with value in xml request string","body":"<p>Using XSLT for this problem in Java is possible but gets awkward if your replacements differ for various input values. Using XPath and DOM-API is much easier.</p>\n<p>Given an input XML document like this:</p>\n<pre><code>&lt;container&gt;\n    &lt;trade_qty&gt;&lt;![CDATA[123]]&gt;&lt;/trade_qty&gt;\n    &lt;trade_qty&gt;&lt;![CDATA[234]]&gt;&lt;/trade_qty&gt;\n    &lt;fixed_price&gt;&lt;![CDATA[345.67]]&gt;&lt;/fixed_price&gt;\n    &lt;fixed_price&gt;&lt;![CDATA[456.78]]&gt;&lt;/fixed_price&gt;\n&lt;/container&gt;\n</code></pre>\n<pre><code>@Test\nvoid testReplace() throws Exception {\n    // Just for reading the source XML document\n    var r = new DOMResult();\n    try(InputStream is = getClass().getResourceAsStream(&quot;/replace.xml&quot;)) {\n        TransformerFactory.newInstance().newTransformer().transform(new StreamSource(is), r);\n    }\n    \n    Node doc = r.getNode(); // This is your XML document as a DOM-Node\n    \n    // REPLACEMENT BEGIN\n    var xPath = XPathFactory.newInstance().newXPath(); // We want to use XPath to find the ocurrences of trade_qty and fixed_price\n    \n    // Replace trade_qty ...\n    var nodes = (NodeList)xPath.evaluate(&quot;container/trade_qty&quot;, doc, XPathConstants.NODESET);\n    for(int i = 0; i &lt; nodes.getLength(); i++) {\n        nodes.item(i).setTextContent(&quot;100&quot;); // Replace with new content.\n    }\n    // The same for container/fixed_price. Omitted for simplicity.\n    \n    // REPLACEMENT end\n    \n    // Just for checking the output\n    try(ByteArrayOutputStream os = new ByteArrayOutputStream()) {\n        TransformerFactory.newInstance().newTransformer().transform(new DOMSource(doc), new StreamResult(os));\n        System.out.println(os.toString());\n    }\n}\n</code></pre>\n<p>Note that a CDATA section is just a representation for a text node in XML where you don't have to escape some special characters (e.g. &lt; and &amp;). Thus <code>&lt;trade_qty&gt;&lt;!CDATA[123]]&gt;&lt;/trade_qty&gt;</code> and <code>&lt;trade_qty&gt;123&lt;/trade_qty&gt;</code> are the same.</p>\n<h1>Edit</h1>\n<p>Some useful XPaths:</p>\n<ol>\n<li><code>//trade_qty</code> selects any trade_qty element in your XML document.</li>\n<li><code>//TermPriceList/fixed_price</code> selects any fixed_price element that is a child of TermPriceList.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28348722,"reputation":35,"user_id":21680516,"display_name":"Rassermann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695210638,"creation_date":1695210638,"answer_id":77142121,"question_id":77120829,"body_markdown":"This was solved using Jsoup\r\n\r\n    public String transformXML(String tradeDataXML, Double newQty, Double newPrice)\r\n    {\r\n        String newXML = &quot;&quot;;\r\n        org.jsoup.nodes.Document doc = Jsoup.parse(tradeDataXML, &quot;&quot;, Parser.xmlParser());\r\n\r\n        CDataNode trade_qty = (CDataNode) doc.selectFirst(&quot;SwapTermList trade_qty&quot;).childNode(0);\r\n        CDataNode fixed_price = (CDataNode) doc.selectFirst(&quot;SwapTermList TermPriceList fixed_price&quot;).childNode(0);\r\n\r\n        if(trade_qty != null &amp;&amp; fixed_price != null) {\r\n            logger.info(&quot;original values of trade_qty and fixed_price: &quot; + trade_qty.text() + SPACE_AND_COMMA + fixed_price.text());\r\n        }\r\n\r\n        if(trade_qty != null) trade_qty.text((newQty == null)?&quot;&quot;:newQty.toString());\r\n        if(fixed_price != null) fixed_price.text((newPrice == null)?&quot;&quot;:newPrice.toString());\r\n\r\n        if(trade_qty != null &amp;&amp; fixed_price != null) {\r\n            logger.info(&quot;Replaced values of trade_qty and fixed_price: &quot; + trade_qty.text() + SPACE_AND_COMMA + fixed_price.text());\r\n        }\r\n\r\n        doc.outputSettings().prettyPrint(false);\r\n        newXML = doc.outerHtml();\r\n        return newXML;\r\n    }","title":"Replace xml tag along with value in xml request string","body":"<p>This was solved using Jsoup</p>\n<pre><code>public String transformXML(String tradeDataXML, Double newQty, Double newPrice)\n{\n    String newXML = &quot;&quot;;\n    org.jsoup.nodes.Document doc = Jsoup.parse(tradeDataXML, &quot;&quot;, Parser.xmlParser());\n\n    CDataNode trade_qty = (CDataNode) doc.selectFirst(&quot;SwapTermList trade_qty&quot;).childNode(0);\n    CDataNode fixed_price = (CDataNode) doc.selectFirst(&quot;SwapTermList TermPriceList fixed_price&quot;).childNode(0);\n\n    if(trade_qty != null &amp;&amp; fixed_price != null) {\n        logger.info(&quot;original values of trade_qty and fixed_price: &quot; + trade_qty.text() + SPACE_AND_COMMA + fixed_price.text());\n    }\n\n    if(trade_qty != null) trade_qty.text((newQty == null)?&quot;&quot;:newQty.toString());\n    if(fixed_price != null) fixed_price.text((newPrice == null)?&quot;&quot;:newPrice.toString());\n\n    if(trade_qty != null &amp;&amp; fixed_price != null) {\n        logger.info(&quot;Replaced values of trade_qty and fixed_price: &quot; + trade_qty.text() + SPACE_AND_COMMA + fixed_price.text());\n    }\n\n    doc.outputSettings().prettyPrint(false);\n    newXML = doc.outerHtml();\n    return newXML;\n}\n</code></pre>\n"}],"owner":{"account_id":28348722,"reputation":35,"user_id":21680516,"display_name":"Rassermann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77142121,"answer_count":3,"score":0,"last_activity_date":1695210638,"creation_date":1694934680,"question_id":77120829,"body_markdown":"I want to replace following String in an xml request where ever it occurs (occurs multiple time)\r\n\r\n```\r\n&lt;trade_qty&gt;&lt;![CDATA[OLDQTY]]&gt;&lt;/trade_qty&gt;\r\n```\r\nWith\r\n```\r\n&lt;trade_qty&gt;&lt;![CDATA[NEWQTY]]&gt;&lt;/trade_qty&gt;\r\n```\r\n\r\nWhere I will be specifying the NEWQTY from my code\r\n\r\nSimilarly, I want to replace the LAST OCCURRENCE of following String\r\n\r\n```\r\n&lt;fixed_price&gt;&lt;![CDATA[OLDPRICE]]&gt;&lt;/fixed_price&gt;\r\n```\r\nwith\r\n```\r\n&lt;fixed_price&gt;&lt;![CDATA[NEWPRICE]]&gt;&lt;/fixed_price&gt;\r\n```\r\n\r\nWhere I will specifying the NEWPRICE from my code.\r\n\r\nPlease Help!\r\n\r\nWe can also skip the CDATA part if required, in the resultant string:\r\n\r\nviz., `&lt;fixed_price&gt;NEWPRICE&lt;/fixed_price&gt;` and `&lt;trade_qty&gt;NEWQTY&lt;/trade_qty&gt;`\r\n\r\nI tried this from ([https://www.logicbig.com/how-to/java-string/replace-between-two-strings.html](https://stackoverflow.com))\r\nBut it didn&#39;t help","title":"Replace xml tag along with value in xml request string","body":"<p>I want to replace following String in an xml request where ever it occurs (occurs multiple time)</p>\n<pre><code>&lt;trade_qty&gt;&lt;![CDATA[OLDQTY]]&gt;&lt;/trade_qty&gt;\n</code></pre>\n<p>With</p>\n<pre><code>&lt;trade_qty&gt;&lt;![CDATA[NEWQTY]]&gt;&lt;/trade_qty&gt;\n</code></pre>\n<p>Where I will be specifying the NEWQTY from my code</p>\n<p>Similarly, I want to replace the LAST OCCURRENCE of following String</p>\n<pre><code>&lt;fixed_price&gt;&lt;![CDATA[OLDPRICE]]&gt;&lt;/fixed_price&gt;\n</code></pre>\n<p>with</p>\n<pre><code>&lt;fixed_price&gt;&lt;![CDATA[NEWPRICE]]&gt;&lt;/fixed_price&gt;\n</code></pre>\n<p>Where I will specifying the NEWPRICE from my code.</p>\n<p>Please Help!</p>\n<p>We can also skip the CDATA part if required, in the resultant string:</p>\n<p>viz., <code>&lt;fixed_price&gt;NEWPRICE&lt;/fixed_price&gt;</code> and <code>&lt;trade_qty&gt;NEWQTY&lt;/trade_qty&gt;</code></p>\n<p>I tried this from (<a href=\"https://stackoverflow.com\">https://www.logicbig.com/how-to/java-string/replace-between-two-strings.html</a>)\nBut it didn't help</p>\n"},{"tags":["java","testng","bazel","bazel-rules"],"owner":{"account_id":1302546,"reputation":2286,"user_id":1252174,"accept_rate":39,"display_name":"ken4ward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695210252,"creation_date":1695210252,"question_id":77142075,"body_markdown":"I have a test project, it is configured with maven and TestNG, it works perfectly fine with it. \r\nI want to use Bazel to run the same project. I have created WORKSPACE and BUILD files for each directory, which builds perfectly fine. \r\nI want to run the test using the &#39;testng_regressions.xml&#39; in this direcotry: src/test/resources/testrunners/testng_regressions.xml\r\n\r\nThis is the BUILD file for &#39;testng_regressions.xml&#39;, \r\n\r\n    load(&quot;@rules_java//java:defs.bzl&quot;, &quot;java_test&quot;)\r\n    \r\n    java_library(\r\n        name = &quot;main_project_files&quot;,\r\n        srcs = glob([&#39;src/main/java/**/*.java&#39;]),\r\n        runtime_deps = [\r\n            &quot;//Web/src/main/java/io/package/com/constants:app_constants&quot;,\r\n            &quot;//Web/src/main/java/io/package/com/factory:playwright_factory&quot;,\r\n            &quot;//Web/src/main/java/io/package/com/listeners:extent_report_listener&quot;,\r\n            &quot;//Web/src/main/java/io/package/com/pages:login_page&quot;,\r\n            &quot;//Web/src/main/java/io/package/com/steps:login_steps&quot;,\r\n        ],\r\n    )\r\n    \r\n    java_library(\r\n        name = &quot;test_project_files&quot;,\r\n        srcs = glob([&#39;src/test/java/**/*.java&#39;]),\r\n        runtime_deps = [&quot;:main_project_files&quot;,\r\n                &quot;//Web/src/test/java/io/package/com/base:base_test&quot;,\r\n                &quot;//Web/src/test/java/io/package/com/tests:project_test_files&quot;],\r\n    )\r\n    #\r\n    java_test(\r\n        name = &quot;testng_regressions&quot;,\r\n        size = &quot;small&quot;,\r\n        timeout = &quot;short&quot;,\r\n        tags = [&quot;regression&quot;],\r\n        runtime_deps = [\r\n            &quot;:main_project_files&quot;,\r\n            &quot;:test_project_files&quot;\r\n        ],\r\n        use_testrunner = False,\r\n        main_class=&#39;org.testng.TestNG&#39;,\r\n        args=[&#39;-testjar&#39;,&#39;libtest_project_files.jar&#39;,&#39;-verbose&#39;,&#39;2&#39;],\r\n    )\r\n\r\nThis is the content of the testNG file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    \r\n    &lt;suite name=&quot;Open Cart Test Regression PW Suite&quot; thread-count=&quot;5&quot;\r\n    \t   parallel=&quot;tests&quot; verbose=&quot;4&quot;&gt;\r\n    \t&lt;listeners&gt;\r\n    \t\t&lt;listener class-name=&quot;io.christdoes.com.listeners.ExtentReportListener&quot; /&gt;\r\n    \t&lt;/listeners&gt;\r\n    \t&lt;test name=&quot;Open Cart Home Page Test_chrome&quot;&gt;\r\n    \t\t&lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot; /&gt;\r\n    \t\t&lt;parameter name=&quot;language&quot; value=&quot;en&quot; /&gt;\r\n    \t\t&lt;classes&gt;\r\n    \t\t\t&lt;class name=&quot;io.christdoes.com.tests.HomePageTest&quot; /&gt;\r\n    \t\t&lt;/classes&gt;\r\n    \t&lt;/test&gt;\r\n    \t&lt;test name=&quot;Open Cart Login Page Test_safari&quot;&gt;\r\n    \t\t&lt;parameter name=&quot;browser&quot; value=&quot;safari&quot; /&gt;\r\n    \t\t&lt;parameter name=&quot;language&quot; value=&quot;nl&quot; /&gt;\r\n    \t\t&lt;classes&gt;\r\n    \t\t\t&lt;class name=&quot;io.christdoes.com.tests.HomePageTest&quot; /&gt;\r\n    \t\t&lt;/classes&gt;\r\n    \t&lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\nWhen I run the test, it always give a non-detailed error\r\n\r\n    FAIL: //Web/src/test/resources/testrunners:testng_regressions (see /private/var/tmp/_bazel_christdoes/44565daf5d57f20e3e02fd7160ffadab/execroot/__main__/bazel-out/darwin-fastbuild/testlogs/Web/src/test/resources/testrunners/testng_regressions/test.log)\r\n    INFO: Elapsed time: 91.557s, Critical Path: 31.65s\r\n    INFO: 17 processes: 3 internal, 6 darwin-sandbox, 8 worker.\r\n    INFO: Build completed, 1 test FAILED, 17 total actions\r\n    //Web/src/test/resources/testrunners:testng_regressions                  FAILED in 2.1s\r\n      /private/var/tmp/_bazel_user/44565daf5d57f20e3e02fd7160ffadab/execroot/__main__/bazel-out/darwin-fastbuild/testlogs/Web/src/test/resources/testrunners/testng_regressions/test.log\r\n    \r\n    Executed 1 out of 1 test: 1 fails locally.\r\nHow do I run the test using testNG?\r\n\r\n\r\n","title":"Runnig TestNG test with Bazel","body":"<p>I have a test project, it is configured with maven and TestNG, it works perfectly fine with it.\nI want to use Bazel to run the same project. I have created WORKSPACE and BUILD files for each directory, which builds perfectly fine.\nI want to run the test using the 'testng_regressions.xml' in this direcotry: src/test/resources/testrunners/testng_regressions.xml</p>\n<p>This is the BUILD file for 'testng_regressions.xml',</p>\n<pre><code>load(&quot;@rules_java//java:defs.bzl&quot;, &quot;java_test&quot;)\n\njava_library(\n    name = &quot;main_project_files&quot;,\n    srcs = glob(['src/main/java/**/*.java']),\n    runtime_deps = [\n        &quot;//Web/src/main/java/io/package/com/constants:app_constants&quot;,\n        &quot;//Web/src/main/java/io/package/com/factory:playwright_factory&quot;,\n        &quot;//Web/src/main/java/io/package/com/listeners:extent_report_listener&quot;,\n        &quot;//Web/src/main/java/io/package/com/pages:login_page&quot;,\n        &quot;//Web/src/main/java/io/package/com/steps:login_steps&quot;,\n    ],\n)\n\njava_library(\n    name = &quot;test_project_files&quot;,\n    srcs = glob(['src/test/java/**/*.java']),\n    runtime_deps = [&quot;:main_project_files&quot;,\n            &quot;//Web/src/test/java/io/package/com/base:base_test&quot;,\n            &quot;//Web/src/test/java/io/package/com/tests:project_test_files&quot;],\n)\n#\njava_test(\n    name = &quot;testng_regressions&quot;,\n    size = &quot;small&quot;,\n    timeout = &quot;short&quot;,\n    tags = [&quot;regression&quot;],\n    runtime_deps = [\n        &quot;:main_project_files&quot;,\n        &quot;:test_project_files&quot;\n    ],\n    use_testrunner = False,\n    main_class='org.testng.TestNG',\n    args=['-testjar','libtest_project_files.jar','-verbose','2'],\n)\n</code></pre>\n<p>This is the content of the testNG file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n\n&lt;suite name=&quot;Open Cart Test Regression PW Suite&quot; thread-count=&quot;5&quot;\n       parallel=&quot;tests&quot; verbose=&quot;4&quot;&gt;\n    &lt;listeners&gt;\n        &lt;listener class-name=&quot;io.christdoes.com.listeners.ExtentReportListener&quot; /&gt;\n    &lt;/listeners&gt;\n    &lt;test name=&quot;Open Cart Home Page Test_chrome&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot; /&gt;\n        &lt;parameter name=&quot;language&quot; value=&quot;en&quot; /&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;io.christdoes.com.tests.HomePageTest&quot; /&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;Open Cart Login Page Test_safari&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;safari&quot; /&gt;\n        &lt;parameter name=&quot;language&quot; value=&quot;nl&quot; /&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;io.christdoes.com.tests.HomePageTest&quot; /&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>When I run the test, it always give a non-detailed error</p>\n<pre><code>FAIL: //Web/src/test/resources/testrunners:testng_regressions (see /private/var/tmp/_bazel_christdoes/44565daf5d57f20e3e02fd7160ffadab/execroot/__main__/bazel-out/darwin-fastbuild/testlogs/Web/src/test/resources/testrunners/testng_regressions/test.log)\nINFO: Elapsed time: 91.557s, Critical Path: 31.65s\nINFO: 17 processes: 3 internal, 6 darwin-sandbox, 8 worker.\nINFO: Build completed, 1 test FAILED, 17 total actions\n//Web/src/test/resources/testrunners:testng_regressions                  FAILED in 2.1s\n  /private/var/tmp/_bazel_user/44565daf5d57f20e3e02fd7160ffadab/execroot/__main__/bazel-out/darwin-fastbuild/testlogs/Web/src/test/resources/testrunners/testng_regressions/test.log\n\nExecuted 1 out of 1 test: 1 fails locally.\n</code></pre>\n<p>How do I run the test using testNG?</p>\n"},{"tags":["java","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1695200693,"post_id":77139365,"comment_id":135991087,"body_markdown":"`then it cannot be authenticated` i have absolutely no idea what you mean by this statement, authenticated when doing what? what is it? the user? a client? Also, enable DEBUG logs and update your question with the full debug logs so that we can actually see what it is you are trying to do. Your question header is suggesting that it is Spring Security that is authenticating? Spring security is a library, it cant authenticate itself. Users or clients authenticate themselves, not libraries.","body":"<code>then it cannot be authenticated</code> i have absolutely no idea what you mean by this statement, authenticated when doing what? what is it? the user? a client? Also, enable DEBUG logs and update your question with the full debug logs so that we can actually see what it is you are trying to do. Your question header is suggesting that it is Spring Security that is authenticating? Spring security is a library, it cant authenticate itself. Users or clients authenticate themselves, not libraries."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695228116,"post_id":77139365,"comment_id":135997476,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":10153177,"reputation":5292,"user_id":7499069,"display_name":"tuhin47"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695209977,"creation_date":1695209977,"answer_id":77142037,"question_id":77139365,"body_markdown":"`user.isEnabled()` might be a possible error. Try this\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }","title":"Spring Security cannot be authenticated","body":"<p><code>user.isEnabled()</code> might be a possible error. Try this</p>\n<pre><code>@Override\npublic boolean isEnabled() {\n    return true;\n}\n</code></pre>\n"}],"owner":{"account_id":8575185,"reputation":11,"user_id":6424528,"display_name":"Roberto Ambrosio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695209977,"creation_date":1695185389,"question_id":77139365,"body_markdown":"When the loadUserByUsername function return ShopmeUserDetails(user), then it cannot be authenticated. But when return the User details it works without issue.\r\n\r\n\r\nBelow not work, which return the new ShopmeUserDetails(user):\r\n\r\n```\r\npackage co.ichat.ichatweb.impl;\r\n\r\nimport java.util.Optional;\r\nimport java.util.stream.Collectors;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport co.ichat.ichatweb.model.ShopmeUserDetails;\r\nimport co.ichat.ichatweb.model.User;\r\nimport co.ichat.ichatweb.repository.UserRepository;\r\nimport co.ichat.ichatweb.service.IUserService;\r\n\r\n@Service\r\npublic class UserServiceImpl implements IUserService, UserDetailsService{\r\n\t\r\n\t@Autowired\r\n\tprivate UserRepository userRepo;\r\n\t\r\n\t@Autowired\r\n\tprivate BCryptPasswordEncoder passwordEncoder;\r\n\r\n\t@Override\r\n\tpublic Integer saveUser(User user) {\r\n\t\tString passwd= user.getPassword();\r\n\t\tString encodedPasswod = passwordEncoder.encode(passwd);\r\n\t\tuser.setPassword(encodedPasswod);\r\n\t\tuser = userRepo.save(user);\r\n\t\treturn user.getId();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic UserDetails loadUserByUsername(String email) \r\n\t\t\tthrows UsernameNotFoundException {\r\n\t\t\r\n\t\tOptional&lt;User&gt; opt = userRepo.findUserByEmail(email);\r\n\t\t\r\n\t\tif(opt.isEmpty())\r\n\t\t{\r\n\t\t\t\t\r\n\t\t\tthrow new UsernameNotFoundException(&quot;User with email: &quot; +email +&quot; not found !&quot;);\r\n\t\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tUser user = opt.get();\r\n\t\t\t// return new org.springframework.security.core.userdetails.User(\r\n\t\t\t// \t\tuser.getEmail(),\r\n\t\t\t// \t\tuser.getPassword(),\r\n\t\t\t// \t\tuser.getRoles()\r\n\t\t\t// \t\t.stream()\r\n\t\t\t// \t\t.map(role-&gt; new SimpleGrantedAuthority(role))\r\n\t\t\t// \t\t.collect(Collectors.toSet())\r\n\t\t    // );\r\n\t\t\treturn new ShopmeUserDetails(user);\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\nAnd below work:\r\n\r\n```\r\npackage co.ichat.ichatweb.impl;\r\n\r\nimport java.util.Optional;\r\nimport java.util.stream.Collectors;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport co.ichat.ichatweb.model.ShopmeUserDetails;\r\nimport co.ichat.ichatweb.model.User;\r\nimport co.ichat.ichatweb.repository.UserRepository;\r\nimport co.ichat.ichatweb.service.IUserService;\r\n\r\n@Service\r\npublic class UserServiceImpl implements IUserService, UserDetailsService{\r\n\t\r\n\t@Autowired\r\n\tprivate UserRepository userRepo;\r\n\t\r\n\t@Autowired\r\n\tprivate BCryptPasswordEncoder passwordEncoder;\r\n\r\n\t@Override\r\n\tpublic Integer saveUser(User user) {\r\n\t\tString passwd= user.getPassword();\r\n\t\tString encodedPasswod = passwordEncoder.encode(passwd);\r\n\t\tuser.setPassword(encodedPasswod);\r\n\t\tuser = userRepo.save(user);\r\n\t\treturn user.getId();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic UserDetails loadUserByUsername(String email) \r\n\t\t\tthrows UsernameNotFoundException {\r\n\t\t\r\n\t\tOptional&lt;User&gt; opt = userRepo.findUserByEmail(email);\r\n\t\t\r\n\t\tif(opt.isEmpty())\r\n\t\t{\r\n\t\t\t\t\r\n\t\t\tthrow new UsernameNotFoundException(&quot;User with email: &quot; +email +&quot; not found !&quot;);\r\n\t\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tUser user = opt.get();\r\n\t\t\treturn new org.springframework.security.core.userdetails.User(\r\n\t\t\t\t\tuser.getEmail(),\r\n\t\t\t\t\tuser.getPassword(),\r\n\t\t\t\t\tuser.getRoles()\r\n\t\t\t\t\t.stream()\r\n\t\t\t\t\t.map(role-&gt; new SimpleGrantedAuthority(role))\r\n\t\t\t\t\t.collect(Collectors.toSet())\r\n\t\t    );\r\n\t\t\t//return new ShopmeUserDetails(user);\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\nAnd below is the ShopmeUserDetails class:\r\n```\r\n\r\npackage co.ichat.ichatweb.model;\r\n\r\nimport java.util.\\*;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\npublic class ShopmeUserDetails implements UserDetails {\r\nprivate User user;\r\n\r\n    public ShopmeUserDetails(User user) {\r\n        this.user = user;\r\n    }\r\n    \r\n    //Issue with below function\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        List&lt;String&gt; roles = user.getRoles();\r\n        List&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n    \r\n        for (String role : roles) {\r\n            authorities.add(new SimpleGrantedAuthority(role));\r\n        }\r\n        return authorities;\r\n    }\r\n    \r\n    @Override\r\n    public String getPassword() {\r\n        return user.getPassword();\r\n    }\r\n    \r\n    @Override\r\n    public String getUsername() {\r\n        return user.getEmail();\r\n    }\r\n    \r\n    \r\n    public String getEmail() {\r\n        return user.getEmail();\r\n    }\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n    \r\n    public int getId() {\r\n        return user.getId();\r\n    }\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public boolean isEnabled() {\r\n        return user.isEnabled();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nWhy it cannot be authenticated when we return ShopmeUserDetails(user)\r\n```","title":"Spring Security cannot be authenticated","body":"<p>When the loadUserByUsername function return ShopmeUserDetails(user), then it cannot be authenticated. But when return the User details it works without issue.</p>\n<p>Below not work, which return the new ShopmeUserDetails(user):</p>\n<pre><code>package co.ichat.ichatweb.impl;\n\nimport java.util.Optional;\nimport java.util.stream.Collectors;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport co.ichat.ichatweb.model.ShopmeUserDetails;\nimport co.ichat.ichatweb.model.User;\nimport co.ichat.ichatweb.repository.UserRepository;\nimport co.ichat.ichatweb.service.IUserService;\n\n@Service\npublic class UserServiceImpl implements IUserService, UserDetailsService{\n    \n    @Autowired\n    private UserRepository userRepo;\n    \n    @Autowired\n    private BCryptPasswordEncoder passwordEncoder;\n\n    @Override\n    public Integer saveUser(User user) {\n        String passwd= user.getPassword();\n        String encodedPasswod = passwordEncoder.encode(passwd);\n        user.setPassword(encodedPasswod);\n        user = userRepo.save(user);\n        return user.getId();\n    }\n    \n    @Override\n    public UserDetails loadUserByUsername(String email) \n            throws UsernameNotFoundException {\n        \n        Optional&lt;User&gt; opt = userRepo.findUserByEmail(email);\n        \n        if(opt.isEmpty())\n        {\n                \n            throw new UsernameNotFoundException(&quot;User with email: &quot; +email +&quot; not found !&quot;);\n                \n        }\n        else {\n            User user = opt.get();\n            // return new org.springframework.security.core.userdetails.User(\n            //      user.getEmail(),\n            //      user.getPassword(),\n            //      user.getRoles()\n            //      .stream()\n            //      .map(role-&gt; new SimpleGrantedAuthority(role))\n            //      .collect(Collectors.toSet())\n            // );\n            return new ShopmeUserDetails(user);\n        }\n        \n    }\n}\n</code></pre>\n<p>And below work:</p>\n<pre><code>package co.ichat.ichatweb.impl;\n\nimport java.util.Optional;\nimport java.util.stream.Collectors;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport co.ichat.ichatweb.model.ShopmeUserDetails;\nimport co.ichat.ichatweb.model.User;\nimport co.ichat.ichatweb.repository.UserRepository;\nimport co.ichat.ichatweb.service.IUserService;\n\n@Service\npublic class UserServiceImpl implements IUserService, UserDetailsService{\n    \n    @Autowired\n    private UserRepository userRepo;\n    \n    @Autowired\n    private BCryptPasswordEncoder passwordEncoder;\n\n    @Override\n    public Integer saveUser(User user) {\n        String passwd= user.getPassword();\n        String encodedPasswod = passwordEncoder.encode(passwd);\n        user.setPassword(encodedPasswod);\n        user = userRepo.save(user);\n        return user.getId();\n    }\n    \n    @Override\n    public UserDetails loadUserByUsername(String email) \n            throws UsernameNotFoundException {\n        \n        Optional&lt;User&gt; opt = userRepo.findUserByEmail(email);\n        \n        if(opt.isEmpty())\n        {\n                \n            throw new UsernameNotFoundException(&quot;User with email: &quot; +email +&quot; not found !&quot;);\n                \n        }\n        else {\n            User user = opt.get();\n            return new org.springframework.security.core.userdetails.User(\n                    user.getEmail(),\n                    user.getPassword(),\n                    user.getRoles()\n                    .stream()\n                    .map(role-&gt; new SimpleGrantedAuthority(role))\n                    .collect(Collectors.toSet())\n            );\n            //return new ShopmeUserDetails(user);\n        }\n        \n    }\n}\n</code></pre>\n<p>And below is the ShopmeUserDetails class:</p>\n<pre><code>\npackage co.ichat.ichatweb.model;\n\nimport java.util.\\*;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\npublic class ShopmeUserDetails implements UserDetails {\nprivate User user;\n\n    public ShopmeUserDetails(User user) {\n        this.user = user;\n    }\n    \n    //Issue with below function\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        List&lt;String&gt; roles = user.getRoles();\n        List&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n    \n        for (String role : roles) {\n            authorities.add(new SimpleGrantedAuthority(role));\n        }\n        return authorities;\n    }\n    \n    @Override\n    public String getPassword() {\n        return user.getPassword();\n    }\n    \n    @Override\n    public String getUsername() {\n        return user.getEmail();\n    }\n    \n    \n    public String getEmail() {\n        return user.getEmail();\n    }\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n    \n    public int getId() {\n        return user.getId();\n    }\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n    \n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n    \n    @Override\n    public boolean isEnabled() {\n        return user.isEnabled();\n    }\n\n}\n\n</code></pre>\n<p>Why it cannot be authenticated when we return ShopmeUserDetails(user)</p>\n<pre><code></code></pre>\n"},{"tags":["java","spring","cron","scheduler"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695209476,"post_id":77141859,"comment_id":135992924,"body_markdown":"I guess the `${random.int[0,5]}` will only called once where the sceduler is created, If you start your application a gain, it wil generate a new random value","body":"I guess the <code>${random.int[0,5]}</code> will only called once where the sceduler is created, If you start your application a gain, it wil generate a new random value"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1695209813,"post_id":77141859,"comment_id":135992995,"body_markdown":"Do you want the executions to be at 01:05, then 02:03, then 03:04 and so on? Or do you want executions like 01:09, then 02:09, with the minute being random, decided once on startup?","body":"Do you want the executions to be at 01:05, then 02:03, then 03:04 and so on? Or do you want executions like 01:09, then 02:09, with the minute being random, decided once on startup?"},{"owner":{"account_id":2712341,"reputation":1106,"user_id":2340484,"display_name":"charlb"},"score":1,"creation_date":1695217702,"post_id":77141859,"comment_id":135994984,"body_markdown":"If you have 4 instances, don&#39;t you want one of the pods to execute the job every hour instead of randomizing the execution? You can achieve that with e.g. shedlock","body":"If you have 4 instances, don&#39;t you want one of the pods to execute the job every hour instead of randomizing the execution? You can achieve that with e.g. shedlock"}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695209108,"creation_date":1695209108,"answer_id":77141925,"question_id":77141859,"body_markdown":"Maybe give this a try:\r\n\r\n```\r\n0 $(expr $RANDOM \\% 11) * * * *\r\n\r\n```\r\n\r\n***$(expr $RANDOM \\% 11)*** generates a random number between 0 and 10. *$RANDOM* is a built-in shell variable in Unix-like systems that generates a random integer\r\n\r\nGood Luck!","title":"Spring random cron expression","body":"<p>Maybe give this a try:</p>\n<pre><code>0 $(expr $RANDOM \\% 11) * * * *\n\n</code></pre>\n<p><em><strong>$(expr $RANDOM % 11)</strong></em> generates a random number between 0 and 10. <em>$RANDOM</em> is a built-in shell variable in Unix-like systems that generates a random integer</p>\n<p>Good Luck!</p>\n"}],"owner":{"account_id":3944976,"reputation":613,"user_id":3257991,"accept_rate":100,"display_name":"Oussama"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77141925,"answer_count":1,"score":0,"last_activity_date":1695209108,"creation_date":1695208557,"question_id":77141859,"body_markdown":"I want to have a job executed each 1 hour.\r\nI have 4 pods running in kubernetes and I&#39;m using this expression: `0 0 */1 * * *`\r\n\r\nCurrent situation is that all pods execute the job the first minute of each hour.\r\n\r\nI want to randomize the expression so that each pod will execute the job each hour but at random minute between 0-10. \r\n\r\nIn spring there is a random.int function so I used it: `0 ${random.int[0,5]} */1 * * *` but it executed the job each 2 minutes. ","title":"Spring random cron expression","body":"<p>I want to have a job executed each 1 hour.\nI have 4 pods running in kubernetes and I'm using this expression: <code>0 0 */1 * * *</code></p>\n<p>Current situation is that all pods execute the job the first minute of each hour.</p>\n<p>I want to randomize the expression so that each pod will execute the job each hour but at random minute between 0-10.</p>\n<p>In spring there is a random.int function so I used it: <code>0 ${random.int[0,5]} */1 * * *</code> but it executed the job each 2 minutes.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9820,"page":172,"page_size":100}
