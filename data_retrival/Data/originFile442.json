{"items":[{"tags":["java","apache-camel","out-of-memory","buffer","jsch"],"comments":[{"owner":{"account_id":1928385,"reputation":1014,"user_id":1738332,"accept_rate":89,"display_name":"Wesley De Keirsmaeker"},"score":0,"creation_date":1697714278,"post_id":76224610,"comment_id":136315942,"body_markdown":"I tried a lot of things to get this fixed, but in the end I wrote the FTP functionality in a bean and memory usage went down by 200MB.","body":"I tried a lot of things to get this fixed, but in the end I wrote the FTP functionality in a bean and memory usage went down by 200MB."}],"owner":{"account_id":9013088,"reputation":11,"user_id":6716923,"display_name":"B.War"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683795184,"creation_date":1683785418,"question_id":76224610,"body_markdown":"Our application has been throwing **OutOfMemory** for quite sometime. At first we thought it is due to inefficient usage of collections but on deeper analysing the application and heapdump, it looks like **Apache camel** is causing this **memory issue**. We are pulling files from SFTP daily and decrypt them before going through data processing and inserting into **DB**. It looks like **Apache camel** is not freeing up the memory from its jsch buffer.\r\n\r\nOur camel is simple, sharing a sample here: \r\n```\r\nfrom(&quot;sftpUrl&quot;+dynamic_fileName+&quot;.pgp&quot;+&quot;&amp;noop=true&amp;delay=5m&amp;stepwise=false&quot;).routeId(&quot;id&quot;).process(isNotAllprocessed).unmarshal().pgp(somekey,user,pwd).unmarshal().string().process(writeToDBProcessor).log(&quot;Done&quot;);\r\n```\r\n\r\nwe tried using `streamcaching()` and refactoring the processor, nothing resolved this issue.\r\n\r\nOther solutions for apache camel in stack overflow seems to be with **JMS**, I do not find anything related to my issue so posting this. If you know an existing answer kindly comment here.\r\n\r\nHave any of you faced this issue? \r\n\r\nCan someone suggest what we can do here?\r\n\r\n**Please give an explanation why this is happening? how to avoid this?**","title":"Apache camel memory issue with dynamic SFTP uri for file processing","body":"<p>Our application has been throwing <strong>OutOfMemory</strong> for quite sometime. At first we thought it is due to inefficient usage of collections but on deeper analysing the application and heapdump, it looks like <strong>Apache camel</strong> is causing this <strong>memory issue</strong>. We are pulling files from SFTP daily and decrypt them before going through data processing and inserting into <strong>DB</strong>. It looks like <strong>Apache camel</strong> is not freeing up the memory from its jsch buffer.</p>\n<p>Our camel is simple, sharing a sample here:</p>\n<pre><code>from(&quot;sftpUrl&quot;+dynamic_fileName+&quot;.pgp&quot;+&quot;&amp;noop=true&amp;delay=5m&amp;stepwise=false&quot;).routeId(&quot;id&quot;).process(isNotAllprocessed).unmarshal().pgp(somekey,user,pwd).unmarshal().string().process(writeToDBProcessor).log(&quot;Done&quot;);\n</code></pre>\n<p>we tried using <code>streamcaching()</code> and refactoring the processor, nothing resolved this issue.</p>\n<p>Other solutions for apache camel in stack overflow seems to be with <strong>JMS</strong>, I do not find anything related to my issue so posting this. If you know an existing answer kindly comment here.</p>\n<p>Have any of you faced this issue?</p>\n<p>Can someone suggest what we can do here?</p>\n<p><strong>Please give an explanation why this is happening? how to avoid this?</strong></p>\n"},{"tags":["java","multidimensional-array","concurrency","parallel-processing","synchronized"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683480481,"post_id":76195313,"comment_id":134369937,"body_markdown":"I think the first thing I would do is try to do this single-threaded, and optimize that solution as much as possible.  If the result is still too slow, you can try multi-threading.  However if you get the speed required, stop.","body":"I think the first thing I would do is try to do this single-threaded, and optimize that solution as much as possible.  If the result is still too slow, you can try multi-threading.  However if you get the speed required, stop."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683480593,"post_id":76195313,"comment_id":134369954,"body_markdown":"The second thing: yes your synchronization looks a little suspect.  If you have too much synchronization between threads, then likely each thread will end up waiting on the other thread, and you won&#39;t see an improvement over the single threaded implementation.  C.f. Amdahl&#39;s Law.","body":"The second thing: yes your synchronization looks a little suspect.  If you have too much synchronization between threads, then likely each thread will end up waiting on the other thread, and you won&#39;t see an improvement over the single threaded implementation.  C.f. Amdahl&#39;s Law."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683480838,"post_id":76195313,"comment_id":134369990,"body_markdown":"So some ideas: a lot of times two arrays may be used.  One is read only, it contains the data you need.  The other is used for output only, and is private to each thread.  At the end, values from each thread are merged (for example, by summing) to get the final correct value.  If you need something more complex, send output values to a single thread with a task that calculates the intersection of two sub-arrays.  It uses one lock for the entire intersection, this will reduce the number of times you need to take and release a lock, which reduces overhead.","body":"So some ideas: a lot of times two arrays may be used.  One is read only, it contains the data you need.  The other is used for output only, and is private to each thread.  At the end, values from each thread are merged (for example, by summing) to get the final correct value.  If you need something more complex, send output values to a single thread with a task that calculates the intersection of two sub-arrays.  It uses one lock for the entire intersection, this will reduce the number of times you need to take and release a lock, which reduces overhead."},{"owner":{"account_id":25091388,"reputation":1,"user_id":18942983,"display_name":"Adrian Weber"},"score":0,"creation_date":1683483138,"post_id":76195313,"comment_id":134370329,"body_markdown":"Its a task from my university so it is mandetory to parallelize it..","body":"Its a task from my university so it is mandetory to parallelize it.."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683491211,"post_id":76195313,"comment_id":134371404,"body_markdown":"Well, I think you should use fewer locks.  The current version seems guaranteed to run slowly, at least as I see it.","body":"Well, I think you should use fewer locks.  The current version seems guaranteed to run slowly, at least as I see it."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683546109,"post_id":76195313,"comment_id":134378276,"body_markdown":"There‚Äôs a lot wrong but first, what type does your array have?","body":"There‚Äôs a lot wrong but first, what type does your array have?"},{"owner":{"account_id":25091388,"reputation":1,"user_id":18942983,"display_name":"Adrian Weber"},"score":0,"creation_date":1683649584,"post_id":76195313,"comment_id":134397721,"body_markdown":"two dimensional string array (String[][])","body":"two dimensional string array (String[][])"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683736601,"creation_date":1683736601,"answer_id":76220764,"question_id":76195313,"body_markdown":"First of all, developing multi-threaded applications is a complex topic. The complexity may exceed everything you‚Äôve learned so far, so it‚Äôs weird to get an assignment including parallel processing from your university without any guidance.\r\n\r\nParallel read access does not impose any problems and hence, does not require locking. On the other hand, problems can occur with concurrent access to the same data while at least one thread modifies it. This is what requires appropriate measures.\r\n\r\nThe next fundamental thing you need to understand is: *`synchronized` does not lock anything*.\r\n\r\nWhen two or more threads try to execute a synchronized block or method, synchronizing *on the same object*, they have to execute the block or method one after the other. The thread entering the synchronized block or method after the other is guaranteed to see the modifications made by the other thread before leaving the synchronized block or method, consistently. But there is no restriction on which data the thread(s) may modify and nothing prevents other threads from modifying the same data without `synchronized`.\r\n\r\nIt‚Äôs up to you to arrange the code in a way that all access to the same mutable data is done within synchronized blocks or methods, synchronizing on the same object. A natural valid protocol would be to use the same object whose fields your are accessing for the synchronization, but nothing enforces this. It‚Äôs also valid to use a different object for synchronization than the one you‚Äôre modifying, you might even modify more than one object, *as long as all threads adhere to the same protocol*.\r\n\r\nSo when you use `synchronized(array[xi][yi]){ ‚Ä¶ }` you are *not* locking the array element. You are reading the array element, without synchronization as the synchronized block has not entered yet, and synchronizing on the object whose reference you read. Since you said, the objects are (immutable) `String`s, it‚Äôs clear that you are not modifying the object but assigning a new string, as that‚Äôs the only way to update a string array.\r\n\r\nThis is completely broken. Two threads performing `synchronized(array[xi][yi]){ ‚Ä¶ }` for the same `xi` and `yi` may see different objects at the array location and synchronizing on different objects is as good as having no synchronization at all. For completeness, it‚Äôs also possible to get over-synchronization when the same string is stored at different array locations, but performance problems are irrelevant as long as the program isn‚Äôt correct.\r\n\r\nIt might be overkill to create a distinct object for each (600 x 400) array location to lock on those. But how a useful solution might look like depends on how much overlapping your sub-fields actually have and how many writes are necessary in your algorithm, compared to the number of read accesses. That‚Äôs a new question, requiring more information about your actual algorithm.\r\n","title":"Parallelize execution on 2D Array - lock single field / cells of array","body":"<p>First of all, developing multi-threaded applications is a complex topic. The complexity may exceed everything you‚Äôve learned so far, so it‚Äôs weird to get an assignment including parallel processing from your university without any guidance.</p>\n<p>Parallel read access does not impose any problems and hence, does not require locking. On the other hand, problems can occur with concurrent access to the same data while at least one thread modifies it. This is what requires appropriate measures.</p>\n<p>The next fundamental thing you need to understand is: <em><code>synchronized</code> does not lock anything</em>.</p>\n<p>When two or more threads try to execute a synchronized block or method, synchronizing <em>on the same object</em>, they have to execute the block or method one after the other. The thread entering the synchronized block or method after the other is guaranteed to see the modifications made by the other thread before leaving the synchronized block or method, consistently. But there is no restriction on which data the thread(s) may modify and nothing prevents other threads from modifying the same data without <code>synchronized</code>.</p>\n<p>It‚Äôs up to you to arrange the code in a way that all access to the same mutable data is done within synchronized blocks or methods, synchronizing on the same object. A natural valid protocol would be to use the same object whose fields your are accessing for the synchronization, but nothing enforces this. It‚Äôs also valid to use a different object for synchronization than the one you‚Äôre modifying, you might even modify more than one object, <em>as long as all threads adhere to the same protocol</em>.</p>\n<p>So when you use <code>synchronized(array[xi][yi]){ ‚Ä¶ }</code> you are <em>not</em> locking the array element. You are reading the array element, without synchronization as the synchronized block has not entered yet, and synchronizing on the object whose reference you read. Since you said, the objects are (immutable) <code>String</code>s, it‚Äôs clear that you are not modifying the object but assigning a new string, as that‚Äôs the only way to update a string array.</p>\n<p>This is completely broken. Two threads performing <code>synchronized(array[xi][yi]){ ‚Ä¶ }</code> for the same <code>xi</code> and <code>yi</code> may see different objects at the array location and synchronizing on different objects is as good as having no synchronization at all. For completeness, it‚Äôs also possible to get over-synchronization when the same string is stored at different array locations, but performance problems are irrelevant as long as the program isn‚Äôt correct.</p>\n<p>It might be overkill to create a distinct object for each (600 x 400) array location to lock on those. But how a useful solution might look like depends on how much overlapping your sub-fields actually have and how many writes are necessary in your algorithm, compared to the number of read accesses. That‚Äôs a new question, requiring more information about your actual algorithm.</p>\n"}],"owner":{"account_id":25091388,"reputation":1,"user_id":18942983,"display_name":"Adrian Weber"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683795122,"creation_date":1683480043,"question_id":76195313,"body_markdown":"Iam working on the parallelization of the calculation of a 2D-Array. To be more precise, iam trying to parallize the simulation of a predator-prey szenario. Therefore, i am using a 2D-Array, in which each field of the array displays a pixel. For the parallelization, iam deviding the field to the given number of threads in subfields - one for each thread. The threads should perform the calculation for each field in each sub-array simultaniously.\r\n\r\nMore information about my algorithm: \r\n\r\n1. Step: it chooses a random cell inside its subfield (xi, yi)\r\n2. Step: it chooses a random neighbor field --&gt; left, right, above, below of (xi,yi), called xin, yin\r\n3. Step: it chooses randomly, if it performe a move, selection or reproduction action\r\n\r\nHere is an example of the move action: \r\n\r\n```\r\n    public void move(int xi, int yi, int xin, int yin){\r\n       String temp = this.simulationBoard[xi][yi];\r\n       this.simulationBoard[xi][yi] = this.simulationBoard[xin][yin];\r\n       this.simulationBoard[xin][yin] = temp;\r\n    }\r\n\r\n```\r\n\r\nNow regarding the parallelization: \r\n\r\n- Each thread performs the algorithm on its subfield (this is ensured by only randomly choosing cells in the subfield (by specifying borders))\r\n- The only difference is, that in Step 2 of the algorithm it is checked, wether (xi,yi) or (xin,yin) are located in a critical region\r\n- critical region means, that 2 Threads could both perform an action on the field of the array ((xi,yi) or (xin,yin))\r\n- critical regions are simplified the boarders of each sub-field\r\n\r\nSo my goal is to ensure, that if a threads performs an action on the element of the 2d array that is located in a critical region, \r\nonly one thread can perform the action at a time. During this, the other threads should nether read nor write the element. \r\n\r\nMy current approach is: \r\n\r\n\r\nAll threads are performing methods on the instance of the SimulationBoard class see below:\r\n\r\n```\r\n    public class SimulationBoard{\r\n    \r\n       private String[][] simulationBoard;\r\n    \r\n       ...\r\n    \r\n       public void move(int xi, int yi, int xin, int yin, boolean lockXiYi, boolean lockXinYin) {\r\n            if(lockXiYi &amp;&amp; lockXinYin){\r\n                this.moveXiYiXinYinLocked(xi, yi, xin, yin);\r\n            }\r\n            else if(lockXiYi){\r\n                this.moveXiYiLocked(xi, yi, xin, yin);\r\n            }\r\n            else if(lockXinYin){\r\n                this.moveXinYinLocked(xi, yi, xin, yin);\r\n            }\r\n            else {\r\n                this.moveUnlocked(xi, yi, xin, yin);\r\n            }\r\n       }\r\n        ...\r\n    \r\n        // here, only one thread at a time should acces and perform actions on the element simulationBoard[xi][yi]\r\n        public void moveXiYiLocked(int xi, int yi, int xin, int yin){\r\n            synchronized(simulationBoard[xi][yi]){\r\n                String temp = this.simulationBoard[xi][yi];\r\n                this.simulationBoard[xi][yi] = this.simulationBoard[xin][yin];\r\n                this.simulationBoard[xin][yin] = temp;\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\nSo this is my current status..\r\n\r\nnow when i am performing my simulation on a 600 x 400 field for example with 4 threads, the whole simulation is not getting any faster. for other configuration the result is more or less the same..\r\n\r\nIs my logic wrong or something like that? \r\nIs synchronized(array[xi][yi]) blocking the whole array maybe???\r\n\r\nThanks for your help!!","title":"Parallelize execution on 2D Array - lock single field / cells of array","body":"<p>Iam working on the parallelization of the calculation of a 2D-Array. To be more precise, iam trying to parallize the simulation of a predator-prey szenario. Therefore, i am using a 2D-Array, in which each field of the array displays a pixel. For the parallelization, iam deviding the field to the given number of threads in subfields - one for each thread. The threads should perform the calculation for each field in each sub-array simultaniously.</p>\n<p>More information about my algorithm:</p>\n<ol>\n<li>Step: it chooses a random cell inside its subfield (xi, yi)</li>\n<li>Step: it chooses a random neighbor field --&gt; left, right, above, below of (xi,yi), called xin, yin</li>\n<li>Step: it chooses randomly, if it performe a move, selection or reproduction action</li>\n</ol>\n<p>Here is an example of the move action:</p>\n<pre><code>    public void move(int xi, int yi, int xin, int yin){\n       String temp = this.simulationBoard[xi][yi];\n       this.simulationBoard[xi][yi] = this.simulationBoard[xin][yin];\n       this.simulationBoard[xin][yin] = temp;\n    }\n\n</code></pre>\n<p>Now regarding the parallelization:</p>\n<ul>\n<li>Each thread performs the algorithm on its subfield (this is ensured by only randomly choosing cells in the subfield (by specifying borders))</li>\n<li>The only difference is, that in Step 2 of the algorithm it is checked, wether (xi,yi) or (xin,yin) are located in a critical region</li>\n<li>critical region means, that 2 Threads could both perform an action on the field of the array ((xi,yi) or (xin,yin))</li>\n<li>critical regions are simplified the boarders of each sub-field</li>\n</ul>\n<p>So my goal is to ensure, that if a threads performs an action on the element of the 2d array that is located in a critical region,\nonly one thread can perform the action at a time. During this, the other threads should nether read nor write the element.</p>\n<p>My current approach is:</p>\n<p>All threads are performing methods on the instance of the SimulationBoard class see below:</p>\n<pre><code>    public class SimulationBoard{\n    \n       private String[][] simulationBoard;\n    \n       ...\n    \n       public void move(int xi, int yi, int xin, int yin, boolean lockXiYi, boolean lockXinYin) {\n            if(lockXiYi &amp;&amp; lockXinYin){\n                this.moveXiYiXinYinLocked(xi, yi, xin, yin);\n            }\n            else if(lockXiYi){\n                this.moveXiYiLocked(xi, yi, xin, yin);\n            }\n            else if(lockXinYin){\n                this.moveXinYinLocked(xi, yi, xin, yin);\n            }\n            else {\n                this.moveUnlocked(xi, yi, xin, yin);\n            }\n       }\n        ...\n    \n        // here, only one thread at a time should acces and perform actions on the element simulationBoard[xi][yi]\n        public void moveXiYiLocked(int xi, int yi, int xin, int yin){\n            synchronized(simulationBoard[xi][yi]){\n                String temp = this.simulationBoard[xi][yi];\n                this.simulationBoard[xi][yi] = this.simulationBoard[xin][yin];\n                this.simulationBoard[xin][yin] = temp;\n            }\n        }\n    }\n\n</code></pre>\n<p>So this is my current status..</p>\n<p>now when i am performing my simulation on a 600 x 400 field for example with 4 threads, the whole simulation is not getting any faster. for other configuration the result is more or less the same..</p>\n<p>Is my logic wrong or something like that?\nIs synchronized(array[xi][yi]) blocking the whole array maybe???</p>\n<p>Thanks for your help!!</p>\n"},{"tags":["javascript","java","android","capacitor"],"owner":{"account_id":25461817,"reputation":37,"user_id":19261454,"display_name":"xtyy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683794582,"creation_date":1683794582,"question_id":76225716,"body_markdown":"I&#39;m currently trying to develop a simple plugin for integrating stylus pen events into an android app.\r\nfollowing the capacitor docs, I&#39;ve setup my dev environment and was given a template with a simple echo method. I have confirmed that after importing this class to javascript, and running the echo method, I can successfully log on the console that the echo method is working correctly.\r\n\r\nI made code changes from this starter template below, take a look:\r\n\r\n```\r\nimport android.app.Activity;\r\nimport android.util.Log;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\n\r\nimport com.getcapacitor.JSObject;\r\nimport com.getcapacitor.Plugin;\r\nimport com.getcapacitor.PluginCall;\r\nimport com.getcapacitor.PluginMethod;\r\nimport com.getcapacitor.annotation.CapacitorPlugin;\r\n\r\n@CapacitorPlugin(name = &quot;MotionEventClass&quot;)\r\npublic class MotionEventClassPlugin extends Plugin {\r\n\r\n    private MotionEventClass implementation = new MotionEventClass();\r\n\r\n    @PluginMethod\r\n    public void echo(PluginCall call) {\r\n        String value = call.getString(&quot;value&quot;);\r\n\r\n        JSObject ret = new JSObject();\r\n        ret.put(&quot;value&quot;, implementation.echo(value));\r\n        call.resolve(ret);\r\n    }\r\n\r\n    private class StylusButtonTouchListener implements View.OnTouchListener {\r\n        @Override\r\n        public boolean onTouch(View v, MotionEvent event) {\r\n            Log.d(&quot;mytag&quot;, &quot;Touch event triggered&quot;);\r\n        }\r\n    }\r\n\r\n    @PluginMethod\r\n    public void setupStylusButtonListener(PluginCall call) {\r\n        // Obtain the activity and root view\r\n        final Activity activity = getBridge().getActivity();\r\n        final View rootView = activity.getWindow().getDecorView().getRootView();\r\n\r\n        if (activity == null) {\r\n            Log.e(&quot;mytag&quot;, &quot;Activity is null&quot;);\r\n            return;\r\n        } else {\r\n            Log.d(&quot;mytag&quot;, &quot;Activity obtained successfully&quot;);\r\n        }\r\n    \r\n        if (rootView == null) {\r\n            Log.e(&quot;mytag&quot;, &quot;RootView is null&quot;);\r\n            return;\r\n        } else {\r\n            Log.d(&quot;mytag&quot;, &quot;RootView obtained successfully&quot;);\r\n        }\r\n        \r\n        // Create the touch listener and set it on the root view\r\n        final StylusButtonTouchListener stylusButtonTouchListener = new StylusButtonTouchListener();\r\n        rootView.setOnTouchListener(stylusButtonTouchListener);\r\n        Log.d(&quot;mytag&quot;, &quot;Touch listener set successfully&quot;);\r\n        // Notify the JavaScript side that the listener has been set up\r\n        call.resolve();\r\n    }\r\n}\r\n\r\n```\r\n\r\n***\r\nbefore listening for stylus input events, I want to do a simple test for the onTouchListener(). So that is why I did not add any stylus-associated code to the plugin yet.\r\n***\r\n\r\n\r\nthen on javascript side:\r\n```\r\nMotionEventClass.echo({ value: &#39;Hello World!&#39; }).then(result =&gt; {\r\n   console.log(result);\r\n}).catch(error =&gt; {\r\n   console.error(error);\r\n});\r\nMotionEventClass.setupStylusButtonListener();\r\n```\r\n\r\nwhen checking my filtered logcat, i can see that touch listener is set successfully.\r\nproblem is, touching on the screen doesn&#39;t fire any events.\r\n\r\nbut the events DO fire if i touch on the navigation bar.\r\n\r\npossibly because capacitor is rendering the javascript page on the webview. \r\nshould i make changes in my plugin class to use webview? \r\nI&#39;m not sure where to go from here. Suggestions would be very much appreciated. &#128591;","title":"capacitor.js plugin for android onTouchListener","body":"<p>I'm currently trying to develop a simple plugin for integrating stylus pen events into an android app.\nfollowing the capacitor docs, I've setup my dev environment and was given a template with a simple echo method. I have confirmed that after importing this class to javascript, and running the echo method, I can successfully log on the console that the echo method is working correctly.</p>\n<p>I made code changes from this starter template below, take a look:</p>\n<pre><code>import android.app.Activity;\nimport android.util.Log;\nimport android.view.MotionEvent;\nimport android.view.View;\n\nimport com.getcapacitor.JSObject;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginCall;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.annotation.CapacitorPlugin;\n\n@CapacitorPlugin(name = &quot;MotionEventClass&quot;)\npublic class MotionEventClassPlugin extends Plugin {\n\n    private MotionEventClass implementation = new MotionEventClass();\n\n    @PluginMethod\n    public void echo(PluginCall call) {\n        String value = call.getString(&quot;value&quot;);\n\n        JSObject ret = new JSObject();\n        ret.put(&quot;value&quot;, implementation.echo(value));\n        call.resolve(ret);\n    }\n\n    private class StylusButtonTouchListener implements View.OnTouchListener {\n        @Override\n        public boolean onTouch(View v, MotionEvent event) {\n            Log.d(&quot;mytag&quot;, &quot;Touch event triggered&quot;);\n        }\n    }\n\n    @PluginMethod\n    public void setupStylusButtonListener(PluginCall call) {\n        // Obtain the activity and root view\n        final Activity activity = getBridge().getActivity();\n        final View rootView = activity.getWindow().getDecorView().getRootView();\n\n        if (activity == null) {\n            Log.e(&quot;mytag&quot;, &quot;Activity is null&quot;);\n            return;\n        } else {\n            Log.d(&quot;mytag&quot;, &quot;Activity obtained successfully&quot;);\n        }\n    \n        if (rootView == null) {\n            Log.e(&quot;mytag&quot;, &quot;RootView is null&quot;);\n            return;\n        } else {\n            Log.d(&quot;mytag&quot;, &quot;RootView obtained successfully&quot;);\n        }\n        \n        // Create the touch listener and set it on the root view\n        final StylusButtonTouchListener stylusButtonTouchListener = new StylusButtonTouchListener();\n        rootView.setOnTouchListener(stylusButtonTouchListener);\n        Log.d(&quot;mytag&quot;, &quot;Touch listener set successfully&quot;);\n        // Notify the JavaScript side that the listener has been set up\n        call.resolve();\n    }\n}\n\n</code></pre>\n<hr />\n<p>before listening for stylus input events, I want to do a simple test for the onTouchListener(). So that is why I did not add any stylus-associated code to the plugin yet.</p>\n<hr />\n<p>then on javascript side:</p>\n<pre><code>MotionEventClass.echo({ value: 'Hello World!' }).then(result =&gt; {\n   console.log(result);\n}).catch(error =&gt; {\n   console.error(error);\n});\nMotionEventClass.setupStylusButtonListener();\n</code></pre>\n<p>when checking my filtered logcat, i can see that touch listener is set successfully.\nproblem is, touching on the screen doesn't fire any events.</p>\n<p>but the events DO fire if i touch on the navigation bar.</p>\n<p>possibly because capacitor is rendering the javascript page on the webview.\nshould i make changes in my plugin class to use webview?\nI'm not sure where to go from here. Suggestions would be very much appreciated. üôè</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":0,"creation_date":1683736354,"post_id":76220273,"comment_id":134413648,"body_markdown":"1. What does `com..application` mean? That&#39;s not a legal package name.","body":"1. What does <code>com..application</code> mean? That&#39;s not a legal package name."},{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":1,"creation_date":1683736377,"post_id":76220273,"comment_id":134413654,"body_markdown":"2. Most likely, you can simply remove all the `proxy=...` attributes. I doubt you need them.","body":"2. Most likely, you can simply remove all the <code>proxy=...</code> attributes. I doubt you need them."},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":0,"creation_date":1683787681,"post_id":76220273,"comment_id":134420705,"body_markdown":"@GavinKing had to remove some of the package name for security reasons - also thank you, i will try doing this today.","body":"@GavinKing had to remove some of the package name for security reasons - also thank you, i will try doing this today."}],"answers":[{"tags":[],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683794447,"creation_date":1683794447,"answer_id":76225701,"question_id":76220273,"body_markdown":"Thanks to GavinKing for the answer in the comments. Removing the proxy property from my xml file solved this error. \r\n\r\n\r\n        &lt;subclass discriminator-value=&quot;MONTHLY_TRUE_UP&quot; \r\n            name=&quot;com..application.nomination.domain.MonthlyTrueUpNomination&quot;\r\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;","title":"Multiple entities named the same interface as their proxy which is not supported","body":"<p>Thanks to GavinKing for the answer in the comments. Removing the proxy property from my xml file solved this error.</p>\n<pre><code>    &lt;subclass discriminator-value=&quot;MONTHLY_TRUE_UP&quot; \n        name=&quot;com..application.nomination.domain.MonthlyTrueUpNomination&quot;\n        proxy=&quot;com..application.nomination.domain.Nomination&quot;\n    /&gt;\n</code></pre>\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683794447,"creation_date":1683732815,"question_id":76220273,"body_markdown":"I am in the process of upgrading an applications tech stack and currently trying to upgrade from hibernate 4.3.11 to 5.4.23. \r\n\r\nthe system is outdated and still uses xml mapping - i have added the nomination xml file at the bottom\r\n\r\nI have managed to complete most of the required changes going off guides/documentation but now when running the app, i get hit with this **runtime error**.\r\n\r\n```\r\ndatasource-config.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Multiple entities [com.app.application.nomination.domain.AnnualNomination, com.app.application.nomination.domain.IntraDayNomination] named the same interface [com.app.application.nomination.domain.Nomination] as their proxy which is not supported\r\n```\r\nI am unsure about how to fix this and why it isnt allowed. If someone could share their knowledge then that would be very appreciated.\r\n\r\n**tech stack**\r\n - java 11\r\n - spring 5\r\n - hibernate 5\r\n\r\nhere is my datasource config file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\t   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n    \r\n\t&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n        &lt;property name=&quot;driverClassName&quot; value=&quot;${datasource.driverClassName}&quot;/&gt;\r\n        &lt;property name=&quot;url&quot; value=&quot;${datasource.url}&quot;/&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;${datasource.username}&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;${datasource.password}&quot;/&gt;\r\n        &lt;property name=&quot;initialSize&quot; value=&quot;${datasource.initialPoolSize}&quot; /&gt;\r\n        &lt;property name=&quot;minIdle&quot; value=&quot;${datasource.minPoolSize}&quot; /&gt;\r\n        &lt;property name=&quot;maxIdle&quot; value=&quot;${datasource.maxPoolSize}&quot; /&gt;\r\n        &lt;property name=&quot;maxActive&quot; value=&quot;${datasource.maxStatements}&quot; /&gt;\r\n\t\t&lt;property name=&quot;validationQuery&quot; value=&quot;select 1 from dual&quot;/&gt;\r\n\t\t&lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot;/&gt;\r\n\t\t&lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot;/&gt;\r\n  \t\t&lt;property name=&quot;testOnReturn&quot; value=&quot;false&quot;/&gt;\r\n    &lt;/bean&gt;\r\n   \r\n    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;configLocation&quot;&gt;\r\n\t\t\t&lt;value&gt;classpath:com/app/application/hibernate.cfg.xml&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;com.amor&quot;/&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;bean id=&quot;persistenceContext&quot; class=&quot;com.app.application.core.dao.hibernate.DefaultHibernatePersistenceContext&quot;&gt;\r\n        &lt;constructor-arg ref=&quot;sessionFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \r\n&lt;/beans&gt;\r\n```\r\n\r\nhere is the nomination.hbm.xml \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-mapping default-access=&quot;field&quot;&gt;\r\n\t&lt;typedef name=&quot;NominationStatus&quot; class=&quot;com..application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\r\n\t    &lt;param name=&quot;enumClassName&quot;&gt;com..application.nomination.domain.NominationStatus&lt;/param&gt;\r\n\t&lt;/typedef&gt;\r\n\t&lt;typedef name=&quot;NominationType&quot; class=&quot;com..application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\r\n\t    &lt;param name=&quot;enumClassName&quot;&gt;com..application.nomination.domain.NominationType&lt;/param&gt;\r\n\t&lt;/typedef&gt;\r\n    &lt;class table=&quot;NOMINATION&quot; \r\n    \tname=&quot;com..application.nomination.domain.NominationImpl&quot; \r\n    \tproxy=&quot;com..application.nomination.domain.Nomination&quot; abstract=&quot;true&quot; &gt;\r\n        &lt;id name=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\r\n            &lt;column name=&quot;ID&quot; precision=&quot;20&quot; scale=&quot;0&quot; /&gt;\r\n            &lt;generator class=&quot;sequence&quot;&gt;\r\n        \t    &lt;param name=&quot;sequence&quot;&gt;NOMINATION_ID_SEQ&lt;/param&gt;\r\n            &lt;/generator&gt;\r\n        &lt;/id&gt;\r\n        &lt;discriminator column=&quot;NOMINATION_TYPE&quot; type=&quot;string&quot; /&gt;\r\n        &lt;component name=&quot;nominationDetails&quot; class=&quot;com..application.nomination.domain.NominationDetails&quot;&gt;\r\n\t        &lt;property name=&quot;gasDay&quot; type=&quot;LocalDate&quot;&gt;\r\n\t        \t&lt;column name=&quot;GAS_DAY&quot; not-null=&quot;true&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;many-to-one name=&quot;flowpath&quot; class=&quot;com..application.network.domain.FlowpathImpl&quot;&gt;\r\n\t        \t&lt;column name=&quot;FLOWPATH_ID&quot; not-null=&quot;true&quot; /&gt;\r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;many-to-one name=&quot;shipper&quot; class=&quot;com..application.network.domain.ShipperImpl&quot;&gt;\r\n\t        \t&lt;column name=&quot;SHIPPER_ID&quot; not-null=&quot;true&quot; /&gt;\r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;property name=&quot;submittedDateTime&quot; type=&quot;DateTime&quot;&gt;\r\n\t        \t&lt;column name=&quot;SUBMITTED_DATE_TIME&quot; not-null=&quot;true&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;property name=&quot;effectiveDateTime&quot; type=&quot;DateTime&quot;&gt;\r\n\t        \t&lt;column name=&quot;EFFECTIVE_DATE_TIME&quot; not-null=&quot;false&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t         &lt;property name=&quot;nominationStatus&quot; type=&quot;NominationStatus&quot; not-null=&quot;true&quot;&gt;\r\n\t            &lt;column name=&quot;NOMINATION_STATUS&quot; length=&quot;64&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t        \r\n\t        &lt;property name=&quot;nominationType&quot; type=&quot;NominationType&quot; column=&quot;NOMINATION_TYPE&quot; insert=&quot;false&quot; update=&quot;false&quot; /&gt;\r\n\t        \r\n\t        &lt;property name=&quot;revisionNumber&quot; type=&quot;int&quot;&gt;\r\n\t            &lt;column name=&quot;REVISION_NUMBER&quot; scale=&quot;0&quot; not-null=&quot;true&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;property name=&quot;superseded&quot; type=&quot;yes_no&quot;&gt;\r\n\t            &lt;column name=&quot;SUPERSEDED&quot; length=&quot;1&quot;/&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;property name=&quot;curtailed&quot; type=&quot;yes_no&quot;&gt;\r\n\t            &lt;column name=&quot;CURTAILED&quot; length=&quot;1&quot;/&gt;\r\n\t        &lt;/property&gt;\r\n       \t\t&lt;many-to-one name=&quot;estimatedCondensate&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;ESTIMATED_CONDENSATE_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;deliveryRequirementVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;DELIVERY_REQ_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;deliveryRequirementEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;DELIVERY_REQ_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;many-to-one name=&quot;nominatedEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;NOMINATED_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;nominatedVolumeFirm&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;NOMINATED_VOLUME_FIRM_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;nominatedVolumeInterruptible&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;NOMINATED_VOLUME_INT_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;many-to-one name=&quot;curtailedVolumeFirm&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REVISED_VOLUME_FIRM_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;curtailedVolumeInterruptible&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REVISED_VOLUME_INT_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;redeliveryRequirementEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REDELIVERY_REQ_ENERGY_ID&quot; not-null=&quot;true&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;many-to-one name=&quot;redeliveryRequirementVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REDELIVERY_REQ_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n       \t\t&lt;many-to-one name=&quot;redeliveryVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REDELIVERY_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n\t        &lt;many-to-one name=&quot;redeliveryEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\r\n\t            &lt;column name=&quot;REDELIVERY_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/many-to-one&gt;\r\n\t\t\t&lt;property name=&quot;comment&quot; type=&quot;java.lang.String&quot;&gt;\r\n\t            &lt;column name=&quot;NOMINATION_COMMENT&quot; length=&quot;3000&quot; not-null=&quot;false&quot; /&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;property name=&quot;interimImbalance&quot; type=&quot;RTNumber&quot;&gt;\r\n\t        \t&lt;column name=&quot;INTERIM_IMBALANCE&quot; not-null=&quot;false&quot; /&gt;  \r\n\t        &lt;/property&gt;\r\n \t        &lt;property name=&quot;locked&quot; type=&quot;yes_no&quot;&gt;\r\n\t            &lt;column name=&quot;LOCKED&quot; length=&quot;1&quot;/&gt;\r\n\t        &lt;/property&gt;\r\n\t        &lt;property name=&quot;confirmedByTransporter&quot; type=&quot;yes_no&quot;&gt;\r\n\t            &lt;column name=&quot;CONFIRMED_BY_TRANSPORTER&quot; length=&quot;1&quot;/&gt;\r\n\t        &lt;/property&gt;\r\n\t         &lt;many-to-one name=&quot;systemUser&quot; class=&quot;com..application.security.domain.NgcSystemUserImpl&quot; fetch=&quot;select&quot;&gt;\r\n            \t&lt;column name=&quot;SYSTEM_USER_ID&quot; length=&quot;32&quot; not-null=&quot;true&quot; /&gt;\r\n        \t&lt;/many-to-one&gt;\r\n        &lt;/component&gt;\r\n        \r\n        &lt;subclass discriminator-value=&quot;ANNUAL&quot; \r\n        \tname=&quot;com..application.nomination.domain.AnnualNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n        &lt;subclass discriminator-value=&quot;MONTHLY&quot; \r\n        \tname=&quot;com..application.nomination.domain.MonthlyNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n        &lt;subclass discriminator-value=&quot;DAILY&quot; \r\n        \tname=&quot;com..application.nomination.domain.DailyNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n        &lt;subclass discriminator-value=&quot;INTRA_DAY&quot; \r\n        \tname=&quot;com..application.nomination.domain.IntraDayNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n        &lt;subclass discriminator-value=&quot;DAILY_TRUE_UP&quot; \r\n        \tname=&quot;com..application.nomination.domain.DailyTrueUpNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n        &lt;subclass discriminator-value=&quot;MONTHLY_TRUE_UP&quot; \r\n        \tname=&quot;com..application.nomination.domain.MonthlyTrueUpNomination&quot;\r\n        \tproxy=&quot;com..application.nomination.domain.Nomination&quot;\r\n        /&gt;\r\n       \r\n    &lt;/class&gt;\r\n    &lt;query name=&quot;findAnnualNominationsApplicableBetweenDates&quot;&gt;&lt;![CDATA[\r\n        select n1 from AnnualNomination as n1  \r\n        where n1.nominationDetails.effectiveDateTime \r\n        between (select max(n2.nominationDetails.effectiveDateTime) \r\n            \t from AnnualNomination n2\r\n            \t where n2.nominationDetails.effectiveDateTime &lt; :startDate) \r\n        \tand (select max(n3.nominationDetails.effectiveDateTime) \r\n            \t from AnnualNomination n3\r\n            \t where n3.nominationDetails.effectiveDateTime &lt; :endDate) \r\n    ]]&gt;&lt;/query&gt;\r\n&lt;/hibernate-mapping&gt;\r\n\r\n```","title":"Multiple entities named the same interface as their proxy which is not supported","body":"<p>I am in the process of upgrading an applications tech stack and currently trying to upgrade from hibernate 4.3.11 to 5.4.23.</p>\n<p>the system is outdated and still uses xml mapping - i have added the nomination xml file at the bottom</p>\n<p>I have managed to complete most of the required changes going off guides/documentation but now when running the app, i get hit with this <strong>runtime error</strong>.</p>\n<pre><code>datasource-config.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Multiple entities [com.app.application.nomination.domain.AnnualNomination, com.app.application.nomination.domain.IntraDayNomination] named the same interface [com.app.application.nomination.domain.Nomination] as their proxy which is not supported\n</code></pre>\n<p>I am unsure about how to fix this and why it isnt allowed. If someone could share their knowledge then that would be very appreciated.</p>\n<p><strong>tech stack</strong></p>\n<ul>\n<li>java 11</li>\n<li>spring 5</li>\n<li>hibernate 5</li>\n</ul>\n<p>here is my datasource config file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n    \n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;${datasource.driverClassName}&quot;/&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${datasource.url}&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${datasource.username}&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;${datasource.password}&quot;/&gt;\n        &lt;property name=&quot;initialSize&quot; value=&quot;${datasource.initialPoolSize}&quot; /&gt;\n        &lt;property name=&quot;minIdle&quot; value=&quot;${datasource.minPoolSize}&quot; /&gt;\n        &lt;property name=&quot;maxIdle&quot; value=&quot;${datasource.maxPoolSize}&quot; /&gt;\n        &lt;property name=&quot;maxActive&quot; value=&quot;${datasource.maxStatements}&quot; /&gt;\n        &lt;property name=&quot;validationQuery&quot; value=&quot;select 1 from dual&quot;/&gt;\n        &lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;testOnReturn&quot; value=&quot;false&quot;/&gt;\n    &lt;/bean&gt;\n   \n    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\n        &lt;property name=&quot;configLocation&quot;&gt;\n            &lt;value&gt;classpath:com/app/application/hibernate.cfg.xml&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.amor&quot;/&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;persistenceContext&quot; class=&quot;com.app.application.core.dao.hibernate.DefaultHibernatePersistenceContext&quot;&gt;\n        &lt;constructor-arg ref=&quot;sessionFactory&quot; /&gt;\n    &lt;/bean&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p>here is the nomination.hbm.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\n&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\n\n&lt;hibernate-mapping default-access=&quot;field&quot;&gt;\n    &lt;typedef name=&quot;NominationStatus&quot; class=&quot;com..application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\n        &lt;param name=&quot;enumClassName&quot;&gt;com..application.nomination.domain.NominationStatus&lt;/param&gt;\n    &lt;/typedef&gt;\n    &lt;typedef name=&quot;NominationType&quot; class=&quot;com..application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\n        &lt;param name=&quot;enumClassName&quot;&gt;com..application.nomination.domain.NominationType&lt;/param&gt;\n    &lt;/typedef&gt;\n    &lt;class table=&quot;NOMINATION&quot; \n        name=&quot;com..application.nomination.domain.NominationImpl&quot; \n        proxy=&quot;com..application.nomination.domain.Nomination&quot; abstract=&quot;true&quot; &gt;\n        &lt;id name=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\n            &lt;column name=&quot;ID&quot; precision=&quot;20&quot; scale=&quot;0&quot; /&gt;\n            &lt;generator class=&quot;sequence&quot;&gt;\n                &lt;param name=&quot;sequence&quot;&gt;NOMINATION_ID_SEQ&lt;/param&gt;\n            &lt;/generator&gt;\n        &lt;/id&gt;\n        &lt;discriminator column=&quot;NOMINATION_TYPE&quot; type=&quot;string&quot; /&gt;\n        &lt;component name=&quot;nominationDetails&quot; class=&quot;com..application.nomination.domain.NominationDetails&quot;&gt;\n            &lt;property name=&quot;gasDay&quot; type=&quot;LocalDate&quot;&gt;\n                &lt;column name=&quot;GAS_DAY&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/property&gt;\n            &lt;many-to-one name=&quot;flowpath&quot; class=&quot;com..application.network.domain.FlowpathImpl&quot;&gt;\n                &lt;column name=&quot;FLOWPATH_ID&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;shipper&quot; class=&quot;com..application.network.domain.ShipperImpl&quot;&gt;\n                &lt;column name=&quot;SHIPPER_ID&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/many-to-one&gt;\n            &lt;property name=&quot;submittedDateTime&quot; type=&quot;DateTime&quot;&gt;\n                &lt;column name=&quot;SUBMITTED_DATE_TIME&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/property&gt;\n            &lt;property name=&quot;effectiveDateTime&quot; type=&quot;DateTime&quot;&gt;\n                &lt;column name=&quot;EFFECTIVE_DATE_TIME&quot; not-null=&quot;false&quot; /&gt;\n            &lt;/property&gt;\n             &lt;property name=&quot;nominationStatus&quot; type=&quot;NominationStatus&quot; not-null=&quot;true&quot;&gt;\n                &lt;column name=&quot;NOMINATION_STATUS&quot; length=&quot;64&quot; /&gt;\n            &lt;/property&gt;\n            \n            &lt;property name=&quot;nominationType&quot; type=&quot;NominationType&quot; column=&quot;NOMINATION_TYPE&quot; insert=&quot;false&quot; update=&quot;false&quot; /&gt;\n            \n            &lt;property name=&quot;revisionNumber&quot; type=&quot;int&quot;&gt;\n                &lt;column name=&quot;REVISION_NUMBER&quot; scale=&quot;0&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/property&gt;\n            &lt;property name=&quot;superseded&quot; type=&quot;yes_no&quot;&gt;\n                &lt;column name=&quot;SUPERSEDED&quot; length=&quot;1&quot;/&gt;\n            &lt;/property&gt;\n            &lt;property name=&quot;curtailed&quot; type=&quot;yes_no&quot;&gt;\n                &lt;column name=&quot;CURTAILED&quot; length=&quot;1&quot;/&gt;\n            &lt;/property&gt;\n            &lt;many-to-one name=&quot;estimatedCondensate&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;ESTIMATED_CONDENSATE_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;deliveryRequirementVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;DELIVERY_REQ_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;deliveryRequirementEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;DELIVERY_REQ_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;nominatedEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;NOMINATED_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;nominatedVolumeFirm&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;NOMINATED_VOLUME_FIRM_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;nominatedVolumeInterruptible&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;NOMINATED_VOLUME_INT_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;curtailedVolumeFirm&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REVISED_VOLUME_FIRM_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;curtailedVolumeInterruptible&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REVISED_VOLUME_INT_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;redeliveryRequirementEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REDELIVERY_REQ_ENERGY_ID&quot; not-null=&quot;true&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;redeliveryRequirementVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REDELIVERY_REQ_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;redeliveryVolume&quot; class=&quot;com..application.data.domain.datapoint.VolumeDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REDELIVERY_VOLUME_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;many-to-one name=&quot;redeliveryEnergy&quot; class=&quot;com..application.data.domain.datapoint.EnergyDataValueImpl&quot; fetch=&quot;select&quot; cascade=&quot;all&quot;&gt;\n                &lt;column name=&quot;REDELIVERY_ENERGY_ID&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/many-to-one&gt;\n            &lt;property name=&quot;comment&quot; type=&quot;java.lang.String&quot;&gt;\n                &lt;column name=&quot;NOMINATION_COMMENT&quot; length=&quot;3000&quot; not-null=&quot;false&quot; /&gt;\n            &lt;/property&gt;\n            &lt;property name=&quot;interimImbalance&quot; type=&quot;RTNumber&quot;&gt;\n                &lt;column name=&quot;INTERIM_IMBALANCE&quot; not-null=&quot;false&quot; /&gt;  \n            &lt;/property&gt;\n            &lt;property name=&quot;locked&quot; type=&quot;yes_no&quot;&gt;\n                &lt;column name=&quot;LOCKED&quot; length=&quot;1&quot;/&gt;\n            &lt;/property&gt;\n            &lt;property name=&quot;confirmedByTransporter&quot; type=&quot;yes_no&quot;&gt;\n                &lt;column name=&quot;CONFIRMED_BY_TRANSPORTER&quot; length=&quot;1&quot;/&gt;\n            &lt;/property&gt;\n             &lt;many-to-one name=&quot;systemUser&quot; class=&quot;com..application.security.domain.NgcSystemUserImpl&quot; fetch=&quot;select&quot;&gt;\n                &lt;column name=&quot;SYSTEM_USER_ID&quot; length=&quot;32&quot; not-null=&quot;true&quot; /&gt;\n            &lt;/many-to-one&gt;\n        &lt;/component&gt;\n        \n        &lt;subclass discriminator-value=&quot;ANNUAL&quot; \n            name=&quot;com..application.nomination.domain.AnnualNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n        &lt;subclass discriminator-value=&quot;MONTHLY&quot; \n            name=&quot;com..application.nomination.domain.MonthlyNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n        &lt;subclass discriminator-value=&quot;DAILY&quot; \n            name=&quot;com..application.nomination.domain.DailyNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n        &lt;subclass discriminator-value=&quot;INTRA_DAY&quot; \n            name=&quot;com..application.nomination.domain.IntraDayNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n        &lt;subclass discriminator-value=&quot;DAILY_TRUE_UP&quot; \n            name=&quot;com..application.nomination.domain.DailyTrueUpNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n        &lt;subclass discriminator-value=&quot;MONTHLY_TRUE_UP&quot; \n            name=&quot;com..application.nomination.domain.MonthlyTrueUpNomination&quot;\n            proxy=&quot;com..application.nomination.domain.Nomination&quot;\n        /&gt;\n       \n    &lt;/class&gt;\n    &lt;query name=&quot;findAnnualNominationsApplicableBetweenDates&quot;&gt;&lt;![CDATA[\n        select n1 from AnnualNomination as n1  \n        where n1.nominationDetails.effectiveDateTime \n        between (select max(n2.nominationDetails.effectiveDateTime) \n                 from AnnualNomination n2\n                 where n2.nominationDetails.effectiveDateTime &lt; :startDate) \n            and (select max(n3.nominationDetails.effectiveDateTime) \n                 from AnnualNomination n3\n                 where n3.nominationDetails.effectiveDateTime &lt; :endDate) \n    ]]&gt;&lt;/query&gt;\n&lt;/hibernate-mapping&gt;\n\n</code></pre>\n"},{"tags":["java","spring-boot","reflection","annotations","annotation-processing"],"comments":[{"owner":{"account_id":951981,"reputation":14760,"user_id":977919,"accept_rate":92,"display_name":"sidgate"},"score":2,"creation_date":1683790502,"post_id":76225092,"comment_id":134421233,"body_markdown":"what is the question? Seems you already know you need to use reflection. where are you stuck?","body":"what is the question? Seems you already know you need to use reflection. where are you stuck?"},{"owner":{"account_id":5337599,"reputation":33,"user_id":4255996,"display_name":"Marc"},"score":0,"creation_date":1683791118,"post_id":76225092,"comment_id":134421338,"body_markdown":"I want to make sure that the code doesn&#39;t fail on runtime. Unit tests are a good idea but I think the solution would be way more clean if compilation would fail when the field does not exist","body":"I want to make sure that the code doesn&#39;t fail on runtime. Unit tests are a good idea but I think the solution would be way more clean if compilation would fail when the field does not exist"}],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683794335,"creation_date":1683794335,"answer_id":76225688,"question_id":76225092,"body_markdown":"If you cannot fail during compile time, the second best thing is to add a Unit Test that invokes your reflection code. That way, if you run your tests after every dependency update (you should do that anyway), your test will fail if the implementation details you rely on change.\r\n\r\nIf you absolutely want to fail compilation, you&#39;ll need some kind of preprocessor. You could, for example, build a small, specialized code generator that generates a bridge interface based on the reflection you have in mind, but fails to generate methods for fields it cannot resolve. Then you only use the generated bridge code. I&#39;m not aware of a library that can do this out of the box, but it&#39;s not very hard to write in the specific case (it does not need to be flexible).\r\n\r\nThis could still lead to runtime problems, for example if the compiletime and runtime versions of your dependencies differ, or if old generated code is not replaced for some reason. So make sure to also add Unit Tests.","title":"Named fields for another class","body":"<p>If you cannot fail during compile time, the second best thing is to add a Unit Test that invokes your reflection code. That way, if you run your tests after every dependency update (you should do that anyway), your test will fail if the implementation details you rely on change.</p>\n<p>If you absolutely want to fail compilation, you'll need some kind of preprocessor. You could, for example, build a small, specialized code generator that generates a bridge interface based on the reflection you have in mind, but fails to generate methods for fields it cannot resolve. Then you only use the generated bridge code. I'm not aware of a library that can do this out of the box, but it's not very hard to write in the specific case (it does not need to be flexible).</p>\n<p>This could still lead to runtime problems, for example if the compiletime and runtime versions of your dependencies differ, or if old generated code is not replaced for some reason. So make sure to also add Unit Tests.</p>\n"}],"owner":{"account_id":5337599,"reputation":33,"user_id":4255996,"display_name":"Marc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683794335,"creation_date":1683790129,"question_id":76225092,"body_markdown":"I need to access some private fields via reflection. While this is considered bad, it is an external library and I have no other way to access it. The field names (and types) are known in advance (during compile time) and as a precaution for future library updates I want the compiler to throw an error when this field doesn&#39;t exist anymore.\r\n\r\nLombok has the annotation @FieldNameConstants which generates all field names as static Strings. When the field doesn&#39;t exist anymore, the static variable won&#39;t generate and the compiler will throw an error. This would be a great solution, but as this is an external library class I cannot annotate it with lombok.","title":"Named fields for another class","body":"<p>I need to access some private fields via reflection. While this is considered bad, it is an external library and I have no other way to access it. The field names (and types) are known in advance (during compile time) and as a precaution for future library updates I want the compiler to throw an error when this field doesn't exist anymore.</p>\n<p>Lombok has the annotation @FieldNameConstants which generates all field names as static Strings. When the field doesn't exist anymore, the static variable won't generate and the compiler will throw an error. This would be a great solution, but as this is an external library class I cannot annotate it with lombok.</p>\n"},{"tags":["java","json","xml","spring-boot","jackson"],"answers":[{"tags":[],"owner":{"account_id":2465079,"reputation":2962,"user_id":2148365,"display_name":"Michiel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682000004,"creation_date":1681986182,"answer_id":76063031,"question_id":76062760,"body_markdown":"The `@XmlElement(name = &quot;ParticipantBinding&quot;)` annotation might be interfering with the `@com.fasterxml.jackson.annotation.JsonProperty(&quot;participantBindings&quot;)` annotation. Could you verify that your `ObjectMapper` bean has registered the module `JaxbAnnotationModule` at runtime by any chance? \r\n\r\nYou can check this by `@Autowire`-ing the ObjectMapper in any class and debugging the ObjectMapper when a method in the class is called.  Evaluate `mapper.getRegisteredModuleIds()` to see which modules are registered. \r\n\r\nIf the ObjectMapper has indeed registered the module (which I&#39;m guessing it has, as you might also be using it to serialize the object to XML), you might want register separate MessageConverters (each having a separate ObjectMapper) for separate media types. An example can be found [here](https://stackoverflow.com/a/45157169/2148365).","title":"Jackson JAXB ignores JSONProperty when XMLProperty and XMLElementWrapper annotations","body":"<p>The <code>@XmlElement(name = &quot;ParticipantBinding&quot;)</code> annotation might be interfering with the <code>@com.fasterxml.jackson.annotation.JsonProperty(&quot;participantBindings&quot;)</code> annotation. Could you verify that your <code>ObjectMapper</code> bean has registered the module <code>JaxbAnnotationModule</code> at runtime by any chance?</p>\n<p>You can check this by <code>@Autowire</code>-ing the ObjectMapper in any class and debugging the ObjectMapper when a method in the class is called.  Evaluate <code>mapper.getRegisteredModuleIds()</code> to see which modules are registered.</p>\n<p>If the ObjectMapper has indeed registered the module (which I'm guessing it has, as you might also be using it to serialize the object to XML), you might want register separate MessageConverters (each having a separate ObjectMapper) for separate media types. An example can be found <a href=\"https://stackoverflow.com/a/45157169/2148365\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683793881,"creation_date":1683793881,"answer_id":76225621,"question_id":76062760,"body_markdown":"If you come across this problem: The Jaxb message converter should be justed to serialize xml requests but is added only if JAXB2 is present on the classpath and if jackson xml is not.","title":"Jackson JAXB ignores JSONProperty when XMLProperty and XMLElementWrapper annotations","body":"<p>If you come across this problem: The Jaxb message converter should be justed to serialize xml requests but is added only if JAXB2 is present on the classpath and if jackson xml is not.</p>\n"}],"owner":{"account_id":5660807,"reputation":350,"user_id":4478537,"display_name":"Asger Weirs&#248;e"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":437,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76063031,"answer_count":2,"score":1,"last_activity_date":1683793881,"creation_date":1681984205,"question_id":76062760,"body_markdown":"I have a field that I want formatted differently when using XML and JSON, though Jackson only reads the JAXB annotation `@XMLElement` but ignores the Jackson annotation `@JsonProperty` when serializing to JSON.\r\n\r\n\r\n\r\n```java\r\n@XmlElementWrapper(name = &quot;ParticipantBindings&quot;)\r\n@XmlElement(name = &quot;ParticipantBinding&quot;)\r\n@com.fasterxml.jackson.annotation.JsonProperty(&quot;participantBindings&quot;) // This is ignored?\r\npublic List&lt;ParticipantBinding&gt; getParticipantBindings() {\r\n    return participantBindings;\r\n}\r\n```\r\n\r\nMy Spring boot controller is called as so\r\n\r\n```java\r\n@GetMapping(path = &quot;/{id}&quot;, produces = {MediaType.TEXT_XML_VALUE, MediaType.APPLICATION_JSON_VALUE})\r\npublic ResponseEntity&lt;Participant&gt; getParticipantById(@PathVariable(&quot;id&quot;) int id) {\r\n    Participant p = participantDao.getParticipantFull(id);\r\n\r\n    if (p == null) {\r\n        throw new ResourceNotFoundException();\r\n    } else {\r\n        return ResponseEntity.ok(p);\r\n    }\r\n}\r\n```\r\n\r\nWhere the expected result for sending a getrequest with accept-header: application/xml would be:\r\n\r\n```xml\r\n&lt;ParticipantBindings&gt;\r\n   &lt;ParticipanBinding&gt;...&lt;/ParticipantBinding&gt;\r\n   &lt;ParticipanBinding&gt;...&lt;/ParticipantBinding&gt;\r\n&lt;ParticipantBindings&gt;\r\n```\r\n\r\nWhere for application/json the expected result should be:\r\n```JSON\r\n&quot;participantBindings&quot;: [ ...]\r\n```\r\n\r\nAnd although XML is correctly formatted, the JSON is outputted as follows:\r\n```JSON\r\n&quot;ParticipantBinding&quot; : [ ...]\r\n``` \r\n\r\n\r\n\r\n","title":"Jackson JAXB ignores JSONProperty when XMLProperty and XMLElementWrapper annotations","body":"<p>I have a field that I want formatted differently when using XML and JSON, though Jackson only reads the JAXB annotation <code>@XMLElement</code> but ignores the Jackson annotation <code>@JsonProperty</code> when serializing to JSON.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlElementWrapper(name = &quot;ParticipantBindings&quot;)\n@XmlElement(name = &quot;ParticipantBinding&quot;)\n@com.fasterxml.jackson.annotation.JsonProperty(&quot;participantBindings&quot;) // This is ignored?\npublic List&lt;ParticipantBinding&gt; getParticipantBindings() {\n    return participantBindings;\n}\n</code></pre>\n<p>My Spring boot controller is called as so</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(path = &quot;/{id}&quot;, produces = {MediaType.TEXT_XML_VALUE, MediaType.APPLICATION_JSON_VALUE})\npublic ResponseEntity&lt;Participant&gt; getParticipantById(@PathVariable(&quot;id&quot;) int id) {\n    Participant p = participantDao.getParticipantFull(id);\n\n    if (p == null) {\n        throw new ResourceNotFoundException();\n    } else {\n        return ResponseEntity.ok(p);\n    }\n}\n</code></pre>\n<p>Where the expected result for sending a getrequest with accept-header: application/xml would be:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ParticipantBindings&gt;\n   &lt;ParticipanBinding&gt;...&lt;/ParticipantBinding&gt;\n   &lt;ParticipanBinding&gt;...&lt;/ParticipantBinding&gt;\n&lt;ParticipantBindings&gt;\n</code></pre>\n<p>Where for application/json the expected result should be:</p>\n<pre><code>&quot;participantBindings&quot;: [ ...]\n</code></pre>\n<p>And although XML is correctly formatted, the JSON is outputted as follows:</p>\n<pre><code>&quot;ParticipantBinding&quot; : [ ...]\n</code></pre>\n"},{"tags":["java","javafx","terminate"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1683662541,"post_id":76212943,"comment_id":134400461,"body_markdown":"Create and post a [mre]","body":"Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683680746,"creation_date":1683680746,"answer_id":76214279,"question_id":76212943,"body_markdown":"There are two distinct issues here. The first (and the one I understand best) is that the JavaFX platform, by default, will exit when the last window is closed. You can avoid this with a call to \r\n\r\n    Platform.setImplicitExit(false);\r\n\r\nIn this case, you will need to explicitly call \r\n\r\n    Platform.exit();\r\n\r\nto terminate the application.\r\n\r\nThe second appears to be a question of timing. It looks like the `onHidden` event handler is getting closed before the window has properly closed. Consequently, you call `stage.show()` but then subsequently the underlying native peer window is closed, causing the window not to appear. This might be a bug.\r\n\r\nA couple of workarounds:\r\n\r\n1. Wrap the call in `Platform.runLater(...)` this will enqueue the call on the FX Application Thread and it won&#39;t get invoked until after pending event handlers have completed. This ensures the call to `stage.show()` happens after the window has completely closed.\r\n\r\n        public void start(Stage newStage) {\r\n            Platform.setImplicitExit(false);\r\n            stage = newStage;\r\n            scene = new Scene(mainPane, 640, 700);\r\n            stage.setScene(scene);\r\n            stage.setOnHidden(e -&gt; Platform.runLater(Example::showBuild)); \r\n            showBuild();\r\n    \r\n        }\r\n\r\n2. Use the `showingProperty()` instead. This appears to change only after the window has completely closed.\r\n\r\n        public void start(Stage newStage) {\r\n            Platform.setImplicitExit(false);\r\n            stage = newStage;\r\n            scene = new Scene(mainPane, 640, 700);\r\n            stage.setScene(scene);\r\n            stage.showingProperty().addListener((obs, wasShowing, isNowShowing) -&gt; {\r\n                if (! isNowShowing) {\r\n                    showBuild();\r\n                }\r\n            });\r\n            showBuild();\r\n    \r\n        }","title":"JavaFX program terminates when Stage.show() called a second time","body":"<p>There are two distinct issues here. The first (and the one I understand best) is that the JavaFX platform, by default, will exit when the last window is closed. You can avoid this with a call to</p>\n<pre><code>Platform.setImplicitExit(false);\n</code></pre>\n<p>In this case, you will need to explicitly call</p>\n<pre><code>Platform.exit();\n</code></pre>\n<p>to terminate the application.</p>\n<p>The second appears to be a question of timing. It looks like the <code>onHidden</code> event handler is getting closed before the window has properly closed. Consequently, you call <code>stage.show()</code> but then subsequently the underlying native peer window is closed, causing the window not to appear. This might be a bug.</p>\n<p>A couple of workarounds:</p>\n<ol>\n<li><p>Wrap the call in <code>Platform.runLater(...)</code> this will enqueue the call on the FX Application Thread and it won't get invoked until after pending event handlers have completed. This ensures the call to <code>stage.show()</code> happens after the window has completely closed.</p>\n<pre><code> public void start(Stage newStage) {\n     Platform.setImplicitExit(false);\n     stage = newStage;\n     scene = new Scene(mainPane, 640, 700);\n     stage.setScene(scene);\n     stage.setOnHidden(e -&gt; Platform.runLater(Example::showBuild)); \n     showBuild();\n\n }\n</code></pre>\n</li>\n<li><p>Use the <code>showingProperty()</code> instead. This appears to change only after the window has completely closed.</p>\n<pre><code> public void start(Stage newStage) {\n     Platform.setImplicitExit(false);\n     stage = newStage;\n     scene = new Scene(mainPane, 640, 700);\n     stage.setScene(scene);\n     stage.showingProperty().addListener((obs, wasShowing, isNowShowing) -&gt; {\n         if (! isNowShowing) {\n             showBuild();\n         }\n     });\n     showBuild();\n\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":21919387,"reputation":3,"user_id":16202822,"display_name":"Untitled"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76214279,"answer_count":1,"score":0,"last_activity_date":1683793622,"creation_date":1683662032,"question_id":76212943,"body_markdown":"I&#39;m writing a JavaFX program that doesn&#39;t show the stage (`Stage.show()`) in the `start(Stage)` function, but rather, other methods in the same class call `Stage.show()` to show the stage at a later time. If I try to call any of the methods which call `Stage.show()` more than once, the program terminates itself.\r\n\r\nThe first showing of the stage/window works as expected, and after I use the ‚úï to close the window the program proceeds correctly. However, if I try to call `Stage.show()` again, even from the same method, the stage/window opens and immediately closes, terminating the entire program with it. There is no error: I&#39;m using Eclipse and the exit code is 0, suggesting successful program completion. I don&#39;t know what is different the second time that makes the program think it should terminate.\r\n\r\nMy program is directed by a command system that I built into it, and the command system is paused during the opening of the window or else the window crashes. Because of this, I have no other way of closing the window than the ‚úï. The `Stage.setonHidden()` restarts my command system.\r\n\r\nAny insights into why closing and reopening a stage might cause the entire program to terminate would be appreciated.\r\n\r\nThis is a whittled down version of my program:\r\n```Java\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Example extends Application{\r\n        \r\n        static BorderPane mainPane = new BorderPane();\r\n        static Scene scene;\r\n        static Stage stage;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch(args);\r\n    \t}\r\n    \t\r\n    \tpublic void start(Stage newStage) {\r\n    \t\tstage = newStage;\r\n    \t\tscene = new Scene(mainPane, 640, 700);\r\n    \t\tstage.setScene(scene);\r\n    \t\tstage.setOnHidden(e -&gt; showBuild()); //Runs successfully when window is closed\r\n    \t\tshowBuild();\r\n    \t}\r\n    \r\n        public static void showBuild() {\r\n    \t\tstage.show(); //fails to show stage and terminates program when called a second time\r\n    \t}\r\n    \r\n    }\r\n```","title":"JavaFX program terminates when Stage.show() called a second time","body":"<p>I'm writing a JavaFX program that doesn't show the stage (<code>Stage.show()</code>) in the <code>start(Stage)</code> function, but rather, other methods in the same class call <code>Stage.show()</code> to show the stage at a later time. If I try to call any of the methods which call <code>Stage.show()</code> more than once, the program terminates itself.</p>\n<p>The first showing of the stage/window works as expected, and after I use the ‚úï to close the window the program proceeds correctly. However, if I try to call <code>Stage.show()</code> again, even from the same method, the stage/window opens and immediately closes, terminating the entire program with it. There is no error: I'm using Eclipse and the exit code is 0, suggesting successful program completion. I don't know what is different the second time that makes the program think it should terminate.</p>\n<p>My program is directed by a command system that I built into it, and the command system is paused during the opening of the window or else the window crashes. Because of this, I have no other way of closing the window than the ‚úï. The <code>Stage.setonHidden()</code> restarts my command system.</p>\n<p>Any insights into why closing and reopening a stage might cause the entire program to terminate would be appreciated.</p>\n<p>This is a whittled down version of my program:</p>\n<pre><code>    import javafx.application.Application;\n    import javafx.scene.Scene;\n    import javafx.scene.layout.BorderPane;\n    import javafx.stage.Stage;\n    \n    public class Example extends Application{\n        \n        static BorderPane mainPane = new BorderPane();\n        static Scene scene;\n        static Stage stage;\n    \n        public static void main(String[] args) {\n            launch(args);\n        }\n        \n        public void start(Stage newStage) {\n            stage = newStage;\n            scene = new Scene(mainPane, 640, 700);\n            stage.setScene(scene);\n            stage.setOnHidden(e -&gt; showBuild()); //Runs successfully when window is closed\n            showBuild();\n        }\n    \n        public static void showBuild() {\n            stage.show(); //fails to show stage and terminates program when called a second time\n        }\n    \n    }\n</code></pre>\n"},{"tags":["java","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":21424142,"reputation":191,"user_id":15781733,"display_name":"waffledood"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683793518,"creation_date":1672726161,"answer_id":74989607,"question_id":74989141,"body_markdown":"I understand why the `RegexFilter` doesn&#39;t work, it&#39;s because I&#39;m trying to apply a regex on the logger &amp; not the message.\r\n\r\n`RegexFilter` is intended to apply regexes on messages, not details associated with the logger (type, time, package message was from, etc.) \r\n\r\nI referenced this StackOverflow [post](https://stackoverflow.com/questions/50435243/log4j2-regexfilter-pattern-does-not-match) that was very similar to my question.\r\n\r\nHope this serves as a helpful guide to anyone that comes across this, cheers!","title":"RegexFilter in Log4j2.xml not filtering logs as expected","body":"<p>I understand why the <code>RegexFilter</code> doesn't work, it's because I'm trying to apply a regex on the logger &amp; not the message.</p>\n<p><code>RegexFilter</code> is intended to apply regexes on messages, not details associated with the logger (type, time, package message was from, etc.)</p>\n<p>I referenced this StackOverflow <a href=\"https://stackoverflow.com/questions/50435243/log4j2-regexfilter-pattern-does-not-match\">post</a> that was very similar to my question.</p>\n<p>Hope this serves as a helpful guide to anyone that comes across this, cheers!</p>\n"}],"owner":{"account_id":21424142,"reputation":191,"user_id":15781733,"display_name":"waffledood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74989607,"answer_count":1,"score":1,"last_activity_date":1683793518,"creation_date":1672721505,"question_id":74989141,"body_markdown":"I can&#39;t seem to get the `RegexFilter` working. I have set up the `log4j2.xml` file as follows:\r\n\r\n\r\n```\r\n&lt;Console name=&quot;prodOutput&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    &lt;PatternLayout pattern=&quot;[%d] [Org Utility] -- [ITEM1=%X{ITEM1} ITEM2=%X{ITEM2} ITEM3=%X{ITEM3} USERID=%X{USERID} ENV=%X{ENV}]- [%t] %-5p %c %x - %m%n&quot;/&gt;\r\n    &lt;Filters&gt;\r\n        &lt;RegexFilter regex=&quot;.*ENV=local.*&quot; useRawMsg=&quot;false&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n    &lt;/Filters&gt;\r\n&lt;/Console&gt;\r\n\r\n&lt;Loggers&gt;\r\n\r\n        &lt;!-- switch off log output from these packages --&gt;\r\n        &lt;Logger name=&quot;orgName.package1&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;appender-ref ref=&quot;prodOutput&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n\r\n        &lt;!-- retain log output for other packages --&gt;\r\n        &lt;Logger name=&quot;orgName&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;appender-ref ref=&quot;${sys:logger.out.type}&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;appender-ref ref=&quot;${sys:logger.out.type}&quot;/&gt;\r\n        &lt;/Root&gt;\r\n\r\n&lt;/Loggers&gt;\r\n```\r\n\r\n\r\nHere&#39;s a sample of our log output, but somehow the log from this package `orgName.package1` is not getting picked up the regex, because I can still see the log from this package in the console.\r\n\r\n```\r\n[2023-01-03 12:41:56,353] [Org Utility] -- [ITEM1=XX ITEM2=XX ITEM3=XX USERID=@ADMIN ENV=local]- [ForkJoinPool-1-worker-29] DEBUG orgName.executeRule [] ...\r\n```\r\n\r\nBecause when I replace the regex with the trivial `.*`, the output from the package `orgName.package1` is not shown in the console.\r\n\r\nThe value of `ENV` in `ThreadContextMap` is `local`, so I&#39;m expecting the log output to be `... ENV=local ...` &amp; it indeed is, as shown in the console. But this log is somehow not getting detected by the regex.\r\n\r\nIs there a setting or configuration I missed out on? Or perhaps I had miswrote the regex? But I had double-checked my regex on regex101.com &amp; the test-cases I wrote passed, here&#39;s a [sample](https://regex101.com/r/NHYTlq/1).","title":"RegexFilter in Log4j2.xml not filtering logs as expected","body":"<p>I can't seem to get the <code>RegexFilter</code> working. I have set up the <code>log4j2.xml</code> file as follows:</p>\n<pre><code>&lt;Console name=&quot;prodOutput&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n    &lt;PatternLayout pattern=&quot;[%d] [Org Utility] -- [ITEM1=%X{ITEM1} ITEM2=%X{ITEM2} ITEM3=%X{ITEM3} USERID=%X{USERID} ENV=%X{ENV}]- [%t] %-5p %c %x - %m%n&quot;/&gt;\n    &lt;Filters&gt;\n        &lt;RegexFilter regex=&quot;.*ENV=local.*&quot; useRawMsg=&quot;false&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\n    &lt;/Filters&gt;\n&lt;/Console&gt;\n\n&lt;Loggers&gt;\n\n        &lt;!-- switch off log output from these packages --&gt;\n        &lt;Logger name=&quot;orgName.package1&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;prodOutput&quot;/&gt;\n        &lt;/Logger&gt;\n\n        &lt;!-- retain log output for other packages --&gt;\n        &lt;Logger name=&quot;orgName&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;${sys:logger.out.type}&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;${sys:logger.out.type}&quot;/&gt;\n        &lt;/Root&gt;\n\n&lt;/Loggers&gt;\n</code></pre>\n<p>Here's a sample of our log output, but somehow the log from this package <code>orgName.package1</code> is not getting picked up the regex, because I can still see the log from this package in the console.</p>\n<pre><code>[2023-01-03 12:41:56,353] [Org Utility] -- [ITEM1=XX ITEM2=XX ITEM3=XX USERID=@ADMIN ENV=local]- [ForkJoinPool-1-worker-29] DEBUG orgName.executeRule [] ...\n</code></pre>\n<p>Because when I replace the regex with the trivial <code>.*</code>, the output from the package <code>orgName.package1</code> is not shown in the console.</p>\n<p>The value of <code>ENV</code> in <code>ThreadContextMap</code> is <code>local</code>, so I'm expecting the log output to be <code>... ENV=local ...</code> &amp; it indeed is, as shown in the console. But this log is somehow not getting detected by the regex.</p>\n<p>Is there a setting or configuration I missed out on? Or perhaps I had miswrote the regex? But I had double-checked my regex on regex101.com &amp; the test-cases I wrote passed, here's a <a href=\"https://regex101.com/r/NHYTlq/1\" rel=\"nofollow noreferrer\">sample</a>.</p>\n"},{"tags":["java","maven","spring-boot","javassist","java-9"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1504979262,"post_id":46132019,"comment_id":79229257,"body_markdown":"Could you confirm the `java -version` from where you&#39;re trying to execute the command.","body":"Could you confirm the <code>java -version</code> from where you&#39;re trying to execute the command."},{"owner":{"account_id":1537344,"reputation":12765,"user_id":1432980,"accept_rate":73,"display_name":"lapots"},"score":0,"creation_date":1504979613,"post_id":46132019,"comment_id":79229350,"body_markdown":"@nullpointer `java version &quot;9&quot; Java(TM) SE Runtime Environment (build 9+181) Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)`","body":"@nullpointer <code>java version &quot;9&quot; Java(TM) SE Runtime Environment (build 9+181) Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)</code>"},{"owner":{"account_id":1537344,"reputation":12765,"user_id":1432980,"accept_rate":73,"display_name":"lapots"},"score":0,"creation_date":1504979696,"post_id":46132019,"comment_id":79229375,"body_markdown":"@nullpointer if I switch to `1.5.6.RELEASE` boot I get `org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile\n` which is the same but without `invalid constant type`","body":"@nullpointer if I switch to <code>1.5.6.RELEASE</code> boot I get <code>org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile </code> which is the same but without <code>invalid constant type</code>"},{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":0,"creation_date":1505027809,"post_id":46132019,"comment_id":79238350,"body_markdown":"Not clear from the question why `--add-modules java.xml.bind` is used. This will ensure that the java.xml.bind module in the JDK is resolved but the CNF seems to the Java Persistence API.","body":"Not clear from the question why <code>--add-modules java.xml.bind</code> is used. This will ensure that the java.xml.bind module in the JDK is resolved but the CNF seems to the Java Persistence API."},{"owner":{"account_id":1537344,"reputation":12765,"user_id":1432980,"accept_rate":73,"display_name":"lapots"},"score":0,"creation_date":1505037147,"post_id":46132019,"comment_id":79240532,"body_markdown":"@AlanBateman oh my bad. With the amount of questions I asked it seems I mixed what and where. Aside `javax.persistence` which I fixed using maven dependencies I also had a problem `java.lang.ClassNotFoundException: javax.xml.bind.JAXBException`. I updated stacktrace. thanks for pointing this out.","body":"@AlanBateman oh my bad. With the amount of questions I asked it seems I mixed what and where. Aside <code>javax.persistence</code> which I fixed using maven dependencies I also had a problem <code>java.lang.ClassNotFoundException: javax.xml.bind.JAXBException</code>. I updated stacktrace. thanks for pointing this out."}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1504982221,"creation_date":1504982221,"answer_id":46133927,"question_id":46132019,"body_markdown":"Though this doesn&#39;t answer on how to fix this but as stated in [JDK-8161256](https://bugs.openjdk.java.net/browse/JDK-8161256) about the Constant pool tags:\r\n\r\n&gt; Java 9 uses codes `19` and `20` for the module system.\r\n\r\nand the way currently `javassist` creates `ClassFile` is by looking up in the [`ConstantPool`](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4-140) (table until Java8) using the [`readOne`](https://github.com/jboss-javassist/javassist/blob/master/src/main/javassist/bytecode/ConstPool.java#L1197) method which certainly lacks something like a `Module` for the latest java version. Your dependency hierarchy for `javassist`:\r\n\r\n&gt;  - org.springframework.boot:spring-boot-starter-actuator:jar:2.0.0.M3:compile\r\n&gt; \r\n&gt;     - org.springframework.boot:spring-boot-starter-data-jpa:jar:2.0.0.M3:compile\r\n&gt; \r\n&gt; \r\n&gt;       -  org.hibernate:hibernate-core:jar:5.2.10.Final:compile\r\n&gt;  \r\n&gt;          -  org.javassist:javassist:jar:3.21.0-GA:compile\r\n\r\n\r\n\r\nLooking at the [tag:javassist] side of things:\r\n\r\n - There seems to be a similar bug registered on [javassist/issues#147](https://github.com/jboss-javassist/javassist/issues/147).\r\n\r\n - The [rel_3_22_0_cr2](https://github.com/jboss-javassist/javassist/releases/tag/rel_3_22_0_cr2) (last release) from them \r\nreads *Compatible with Java 9-ea+164.* Same issue occurs with this version of javassist as well.\r\n\r\n - So you can probably wait for javassist to come back over this with a solution.\r\n\r\n","title":"java.io.IOException: invalid constant type: 19 at 5","body":"<p>Though this doesn't answer on how to fix this but as stated in <a href=\"https://bugs.openjdk.java.net/browse/JDK-8161256\" rel=\"noreferrer\">JDK-8161256</a> about the Constant pool tags:</p>\n\n<blockquote>\n  <p>Java 9 uses codes <code>19</code> and <code>20</code> for the module system.</p>\n</blockquote>\n\n<p>and the way currently <code>javassist</code> creates <code>ClassFile</code> is by looking up in the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4-140\" rel=\"noreferrer\"><code>ConstantPool</code></a> (table until Java8) using the <a href=\"https://github.com/jboss-javassist/javassist/blob/master/src/main/javassist/bytecode/ConstPool.java#L1197\" rel=\"noreferrer\"><code>readOne</code></a> method which certainly lacks something like a <code>Module</code> for the latest java version. Your dependency hierarchy for <code>javassist</code>:</p>\n\n<blockquote>\n  <ul>\n  <li><p>org.springframework.boot:spring-boot-starter-actuator:jar:2.0.0.M3:compile</p>\n  \n  <ul>\n  <li><p>org.springframework.boot:spring-boot-starter-data-jpa:jar:2.0.0.M3:compile</p>\n  \n  <ul>\n  <li><p>org.hibernate:hibernate-core:jar:5.2.10.Final:compile</p>\n  \n  <ul>\n  <li>org.javassist:javassist:jar:3.21.0-GA:compile</li>\n  </ul></li>\n  </ul></li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>Looking at the <a href=\"/questions/tagged/javassist\" class=\"post-tag\" title=\"show questions tagged &#39;javassist&#39;\" rel=\"tag\">javassist</a> side of things:</p>\n\n<ul>\n<li><p>There seems to be a similar bug registered on <a href=\"https://github.com/jboss-javassist/javassist/issues/147\" rel=\"noreferrer\">javassist/issues#147</a>.</p></li>\n<li><p>The <a href=\"https://github.com/jboss-javassist/javassist/releases/tag/rel_3_22_0_cr2\" rel=\"noreferrer\">rel_3_22_0_cr2</a> (last release) from them \nreads <em>Compatible with Java 9-ea+164.</em> Same issue occurs with this version of javassist as well.</p></li>\n<li><p>So you can probably wait for javassist to come back over this with a solution.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":34578,"reputation":4133,"user_id":97799,"accept_rate":100,"display_name":"ATorras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683793491,"creation_date":1683793491,"answer_id":76225568,"question_id":46132019,"body_markdown":"I was hit by this problem when using Java version 11. I switched **back to Java 8** and everything was fixed.","title":"java.io.IOException: invalid constant type: 19 at 5","body":"<p>I was hit by this problem when using Java version 11. I switched <strong>back to Java 8</strong> and everything was fixed.</p>\n"}],"owner":{"account_id":1537344,"reputation":12765,"user_id":1432980,"accept_rate":73,"display_name":"lapots"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9337,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":46133927,"answer_count":2,"score":9,"last_activity_date":1683793491,"creation_date":1504969613,"question_id":46132019,"body_markdown":"I have a [project][1]. It uses `spring boot 2`, `java 9` and maven. It can be build sucessfully using `mvn clean package`. \r\n\r\nTo run `spring boot` application I used the command\r\n\r\n    java -jar java-cloud-rest-api/target/java-cloud-rest-api-0.0.1-SNAPSHOT.jar\r\n\r\nBut it failed with error\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; n\r\n    ested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1716) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:499) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:858) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:122) ~[spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n    Caused by: java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n            at org.hibernate.boot.spi.XmlMappingBinderAccess.&lt;init&gt;(XmlMappingBinderAccess.java:43) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.MetadataSources.&lt;init&gt;(MetadataSources.java:87) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:208) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:163) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:51) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:358) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:384) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1776) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1712) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            ... 24 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException\r\n            at java.base/java.net.URLClassLoader.findClass(Unknown Source) ~[na:na]\r\n            at java.base/java.lang.ClassLoader.loadClass(Unknown Source) ~[na:na]\r\n            at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:93) ~[java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at java.base/java.lang.ClassLoader.loadClass(Unknown Source) ~[na:na]\r\n            ... 34 common frames omitted\r\n\r\n\r\nI added additional argument to start command\r\n\r\n    java --add-modules java.xml.bind -jar java-cloud-rest-api/target/java-cloud-rest-api-0.0.1-SNAPSHOT.jar\r\n\r\nBut when I run it, I get this error\r\n\r\n    java.lang.ClassCastException: org.springframework.boot.context.event.ApplicationFailedEvent cannot be cast to org.springframework.boot.web.context.WebServerInitializedEvent\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:159) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.boot.context.event.EventPublishingRunListener.finished(EventPublishingRunListener.java:114) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplicationRunListeners.callFinishedListener(SpringApplicationRunListeners.java:79) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplicationRunListeners.finished(SpringApplicationRunListeners.java:72) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:803) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n\r\n    2017-09-09 18:03:42.242  INFO 9200 --- [           main] utoConfigurationReportLoggingInitializer :\r\n\r\n    Error starting ApplicationContext. To display the auto-configuration report re-run your application with &#39;debug&#39; enabled.\r\n    2017-09-09 18:03:42.242 ERROR 9200 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/H\r\n    ibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1716) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:499) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:858) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:122) ~[spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\r\n            at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n            at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n    Caused by: org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile\r\n            at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.toClassFile(ClassFileArchiveEntryHandler.java:64) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.handleEntry(ClassFileArchiveEntryHandler.java:47) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.archive.internal.JarFileBasedArchiveDescriptor.visitArchive(JarFileBasedArchiveDescriptor.java:146) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.archive.scan.spi.AbstractScannerImpl.scan(AbstractScannerImpl.java:47) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.model.process.internal.ScanningCoordinator.coordinateScan(ScanningCoordinator.java:75) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.prepare(MetadataBuildingProcess.java:98) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:228) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:163) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:51) ~[spring-orm-5.0.0.RC3.\r\n    jar!/:5.0.0.RC3]\r\n            at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:358) ~[spring-orm-5.0.0.RC3.jar!/:5\r\n    .0.0.RC3]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:384) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1776) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.R\r\n    C3]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1712) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\r\n\r\n            ... 24 common frames omitted\r\n    Caused by: java.io.IOException: invalid constant type: 19 at 5\r\n            at javassist.bytecode.ConstPool.readOne(ConstPool.java:1244) ~[javassist-3.21.0-GA.jar!/:na]\r\n            at javassist.bytecode.ConstPool.read(ConstPool.java:1175) ~[javassist-3.21.0-GA.jar!/:na]\r\n            at javassist.bytecode.ConstPool.&lt;init&gt;(ConstPool.java:185) ~[javassist-3.21.0-GA.jar!/:na]\r\n            at javassist.bytecode.ClassFile.read(ClassFile.java:829) ~[javassist-3.21.0-GA.jar!/:na]\r\n            at javassist.bytecode.ClassFile.&lt;init&gt;(ClassFile.java:154) ~[javassist-3.21.0-GA.jar!/:na]\r\n            at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.toClassFile(ClassFileArchiveEntryHandler.java:61) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\r\n            ... 37 common frames omitted\r\n\r\n\r\nWhat is the problem?\r\n  [1]: https://github.com/lapots/java-cloud-sample","title":"java.io.IOException: invalid constant type: 19 at 5","body":"<p>I have a <a href=\"https://github.com/lapots/java-cloud-sample\" rel=\"noreferrer\">project</a>. It uses <code>spring boot 2</code>, <code>java 9</code> and maven. It can be build sucessfully using <code>mvn clean package</code>. </p>\n\n<p>To run <code>spring boot</code> application I used the command</p>\n\n<pre><code>java -jar java-cloud-rest-api/target/java-cloud-rest-api-0.0.1-SNAPSHOT.jar\n</code></pre>\n\n<p>But it failed with error</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; n\nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1716) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:499) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:858) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:122) ~[spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.hibernate.boot.spi.XmlMappingBinderAccess.&lt;init&gt;(XmlMappingBinderAccess.java:43) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.MetadataSources.&lt;init&gt;(MetadataSources.java:87) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:208) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:163) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:51) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:358) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:384) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1776) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1712) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        ... 24 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException\n        at java.base/java.net.URLClassLoader.findClass(Unknown Source) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(Unknown Source) ~[na:na]\n        at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:93) ~[java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at java.base/java.lang.ClassLoader.loadClass(Unknown Source) ~[na:na]\n        ... 34 common frames omitted\n</code></pre>\n\n<p>I added additional argument to start command</p>\n\n<pre><code>java --add-modules java.xml.bind -jar java-cloud-rest-api/target/java-cloud-rest-api-0.0.1-SNAPSHOT.jar\n</code></pre>\n\n<p>But when I run it, I get this error</p>\n\n<pre><code>java.lang.ClassCastException: org.springframework.boot.context.event.ApplicationFailedEvent cannot be cast to org.springframework.boot.web.context.WebServerInitializedEvent\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:159) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127) [spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.boot.context.event.EventPublishingRunListener.finished(EventPublishingRunListener.java:114) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplicationRunListeners.callFinishedListener(SpringApplicationRunListeners.java:79) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplicationRunListeners.finished(SpringApplicationRunListeners.java:72) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:803) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n\n2017-09-09 18:03:42.242  INFO 9200 --- [           main] utoConfigurationReportLoggingInitializer :\n\nError starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2017-09-09 18:03:42.242 ERROR 9200 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/H\nibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1716) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:499) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:858) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:122) ~[spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1245) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1233) [spring-boot-2.0.0.M3.jar!/:2.0.0.M3]\n        at com.lapots.breed.platform.cloud.boot.app.JavaCloudSampleApplication.main(JavaCloudSampleApplication.java:10) [classes!/:0.0.1-SNAPSHOT]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [java-cloud-rest-api-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\nCaused by: org.hibernate.boot.archive.spi.ArchiveException: Could not build ClassFile\n        at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.toClassFile(ClassFileArchiveEntryHandler.java:64) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.handleEntry(ClassFileArchiveEntryHandler.java:47) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.archive.internal.JarFileBasedArchiveDescriptor.visitArchive(JarFileBasedArchiveDescriptor.java:146) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.archive.scan.spi.AbstractScannerImpl.scan(AbstractScannerImpl.java:47) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.model.process.internal.ScanningCoordinator.coordinateScan(ScanningCoordinator.java:75) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.prepare(MetadataBuildingProcess.java:98) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:228) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:163) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:51) ~[spring-orm-5.0.0.RC3.\njar!/:5.0.0.RC3]\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:358) ~[spring-orm-5.0.0.RC3.jar!/:5\n.0.0.RC3]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:384) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-5.0.0.RC3.jar!/:5.0.0.RC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1776) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.R\nC3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1712) ~[spring-beans-5.0.0.RC3.jar!/:5.0.0.RC3]\n\n        ... 24 common frames omitted\nCaused by: java.io.IOException: invalid constant type: 19 at 5\n        at javassist.bytecode.ConstPool.readOne(ConstPool.java:1244) ~[javassist-3.21.0-GA.jar!/:na]\n        at javassist.bytecode.ConstPool.read(ConstPool.java:1175) ~[javassist-3.21.0-GA.jar!/:na]\n        at javassist.bytecode.ConstPool.&lt;init&gt;(ConstPool.java:185) ~[javassist-3.21.0-GA.jar!/:na]\n        at javassist.bytecode.ClassFile.read(ClassFile.java:829) ~[javassist-3.21.0-GA.jar!/:na]\n        at javassist.bytecode.ClassFile.&lt;init&gt;(ClassFile.java:154) ~[javassist-3.21.0-GA.jar!/:na]\n        at org.hibernate.boot.archive.scan.spi.ClassFileArchiveEntryHandler.toClassFile(ClassFileArchiveEntryHandler.java:61) ~[hibernate-core-5.2.10.Final.jar!/:5.2.10.Final]\n        ... 37 common frames omitted\n</code></pre>\n\n<p>What is the problem?</p>\n"},{"tags":["java","sql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1683794121,"post_id":76225492,"comment_id":134421995,"body_markdown":"cb.function(&quot;to_date&quot;, Instant.class, cb.function(&quot;json_value&quot;, Object.class, root.get(&quot;myclob_column&quot;),&quot;$.entry_date&quot;))","body":"cb.function(&quot;to_date&quot;, Instant.class, cb.function(&quot;json_value&quot;, Object.class, root.get(&quot;myclob_column&quot;),&quot;$.entry_date&quot;))"},{"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"score":0,"creation_date":1683812034,"post_id":76225492,"comment_id":134426072,"body_markdown":"Thanks, it worked. If you post this in Answer section , I can accept the answer.","body":"Thanks, it worked. If you post this in Answer section , I can accept the answer."}],"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683793445,"creation_date":1683793065,"question_id":76225492,"body_markdown":"\r\nI have a table `MYTABLE` which has 3 columns as mentioned below.\r\n\r\n    |id | myclob_column | column3|\r\n\r\nIt has one column (`myclob_column`) which is **clob data (json)**. Sample clob data is below.\r\n\r\n    {\r\n    &quot;name&quot; : &quot;Rahul&quot;,\r\n    &quot;entry_date&quot; : &quot;2021-08-26T10:00:00Z&quot;\r\n    }\r\n\r\n`entry_date` field is in string. The below query works fine in oracle db when I convert the string to date by using `TO_DATE` function along with `JSON_VALUE` function.\r\n\r\n\r\n    select * from MYTABLE where TO_DATE( (JSON_VALUE(myclob_column, &#39;$.entry_date&#39;)) , &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;&#39; )  &gt;= TO_DATE(&#39;2021-06-25T10:00:00Z&#39; , &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;&#39;);\r\n\r\n\r\nNow I am writing a code with Java JPA CriteriaBuilder.\r\n\r\n    Expression&lt;Instant&gt; dbFunction = criteriaBuilder.function(&quot;JSON_VALUE&quot;, String.class, &#39;$.entry_date&#39;, &#39;myclob_column&#39;);\r\n\r\n(`Instant.class` is Java class which represents date in &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;&#39; format)\r\n\r\nI have to apply another function `TO_DATE` as well along with `JSON_VALUE` because `JSON_VALUE` will return string date and I have to convert the string date to sql date datatype. How to use both the functions with CriteriaBuilder? Can you please guide.\r\n\r\n**Note:** From java side, I will get date as `Instant class (not String)` from the web application user interface.","title":"JPA Criteria Builder with two database functions together","body":"<p>I have a table <code>MYTABLE</code> which has 3 columns as mentioned below.</p>\n<pre><code>|id | myclob_column | column3|\n</code></pre>\n<p>It has one column (<code>myclob_column</code>) which is <strong>clob data (json)</strong>. Sample clob data is below.</p>\n<pre><code>{\n&quot;name&quot; : &quot;Rahul&quot;,\n&quot;entry_date&quot; : &quot;2021-08-26T10:00:00Z&quot;\n}\n</code></pre>\n<p><code>entry_date</code> field is in string. The below query works fine in oracle db when I convert the string to date by using <code>TO_DATE</code> function along with <code>JSON_VALUE</code> function.</p>\n<pre><code>select * from MYTABLE where TO_DATE( (JSON_VALUE(myclob_column, '$.entry_date')) , 'YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;' )  &gt;= TO_DATE('2021-06-25T10:00:00Z' , 'YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;');\n</code></pre>\n<p>Now I am writing a code with Java JPA CriteriaBuilder.</p>\n<pre><code>Expression&lt;Instant&gt; dbFunction = criteriaBuilder.function(&quot;JSON_VALUE&quot;, String.class, '$.entry_date', 'myclob_column');\n</code></pre>\n<p>(<code>Instant.class</code> is Java class which represents date in 'YYYY-MM-DD&quot;T&quot;HH24:MI:SS&quot;Z&quot;' format)</p>\n<p>I have to apply another function <code>TO_DATE</code> as well along with <code>JSON_VALUE</code> because <code>JSON_VALUE</code> will return string date and I have to convert the string date to sql date datatype. How to use both the functions with CriteriaBuilder? Can you please guide.</p>\n<p><strong>Note:</strong> From java side, I will get date as <code>Instant class (not String)</code> from the web application user interface.</p>\n"},{"tags":["java","spring-mvc"],"owner":{"account_id":10230595,"reputation":20,"user_id":7551498,"display_name":"Avinash kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683793135,"creation_date":1683793135,"question_id":76225506,"body_markdown":"I am creating Spring MVC project and have neo4j datasource. When i am trying to create Retrybale data source on getConnection getting issue; \r\n\r\n&#39;&#39;&#39;Caused by: java.lang.IllegalArgumentException: DataSource router not initialized\r\n\tat org.springframework.util.Assert.notNull(Assert.java:201) ~[spring-core-5.3.25.jar:5.3.25]\r\n\tat org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource.determineTargetDataSource(AbstractRoutingDataSource.java:225) ~[spring-jdbc-5.3.25.jar:5.3.25]&#39;&#39;&#39;\r\n\r\n\r\npublic class RetryableDatabasePostProcessor implements BeanPostProcessor {\r\n\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n        if(bean instanceof DataSource) {\r\n            return new RetryableDataSource((DataSource) bean);\r\n        }\r\n        return bean;\r\n    }\r\n\r\n    @Override\r\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        return bean;\r\n    }\r\n\r\n}\r\n\r\npublic  class RetryableDataSource extends AbstractDataSource {\r\n\r\n    private DataSource dataSource;\r\n\r\n    public RetryableDataSource(DataSource bean) {\r\n        dataSource = bean;\r\n    }\r\n\r\n    @Override\r\n    @Retryable(value= {CustomRetryException.class}, maxAttemptsExpression = &quot;2&quot;,  backoff = @Backoff(delayExpression = &quot;2000&quot;))\r\n    public Connection getConnection() throws SQLException {\r\n        return getConnectionWithRetry();\r\n    }\r\n\r\n    @Override\r\n    @Retryable(value= {CustomRetryException.class}, maxAttemptsExpression = &quot;2&quot;,  backoff = @Backoff(delayExpression = &quot;2000&quot;))\r\n    public Connection getConnection(String username, String password) throws SQLException {\r\n        return getConnectionWithRetry();\r\n    }\r\n\r\n\r\n    private Connection getConnectionWithRetry() {\r\n        try {\r\n            return dataSource.getConnection();\r\n        } catch (Exception e) {\r\n            if(CheckExceptionUtil.isRetryableException(e) ){\r\n                throw  new CustomRetryException(e.getMessage());\r\n            }\r\n            throw new ApiException(e);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\t","title":"Retryable DataSource is not working with Spring MVC","body":"<p>I am creating Spring MVC project and have neo4j datasource. When i am trying to create Retrybale data source on getConnection getting issue;</p>\n<p>'''Caused by: java.lang.IllegalArgumentException: DataSource router not initialized\nat org.springframework.util.Assert.notNull(Assert.java:201) ~[spring-core-5.3.25.jar:5.3.25]\nat org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource.determineTargetDataSource(AbstractRoutingDataSource.java:225) ~[spring-jdbc-5.3.25.jar:5.3.25]'''</p>\n<p>public class RetryableDatabasePostProcessor implements BeanPostProcessor {</p>\n<pre><code>@Override\npublic Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n    if(bean instanceof DataSource) {\n        return new RetryableDataSource((DataSource) bean);\n    }\n    return bean;\n}\n\n@Override\npublic Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n    return bean;\n}\n</code></pre>\n<p>}</p>\n<p>public  class RetryableDataSource extends AbstractDataSource {</p>\n<pre><code>private DataSource dataSource;\n\npublic RetryableDataSource(DataSource bean) {\n    dataSource = bean;\n}\n\n@Override\n@Retryable(value= {CustomRetryException.class}, maxAttemptsExpression = &quot;2&quot;,  backoff = @Backoff(delayExpression = &quot;2000&quot;))\npublic Connection getConnection() throws SQLException {\n    return getConnectionWithRetry();\n}\n\n@Override\n@Retryable(value= {CustomRetryException.class}, maxAttemptsExpression = &quot;2&quot;,  backoff = @Backoff(delayExpression = &quot;2000&quot;))\npublic Connection getConnection(String username, String password) throws SQLException {\n    return getConnectionWithRetry();\n}\n\n\nprivate Connection getConnectionWithRetry() {\n    try {\n        return dataSource.getConnection();\n    } catch (Exception e) {\n        if(CheckExceptionUtil.isRetryableException(e) ){\n            throw  new CustomRetryException(e.getMessage());\n        }\n        throw new ApiException(e);\n    }\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring-boot","spring-session"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1683793126,"post_id":76225038,"comment_id":134421755,"body_markdown":"Just use/access the `HttpSession` in your code (add something to it) and you will get a cookie. The same applies for your session scoped object, it will only be created and placed in the session after you are using it (it will be created lazily), so if you set some values it will be put in there.","body":"Just use/access the <code>HttpSession</code> in your code (add something to it) and you will get a cookie. The same applies for your session scoped object, it will only be created and placed in the session after you are using it (it will be created lazily), so if you set some values it will be put in there."},{"owner":{"account_id":3524392,"reputation":859,"user_id":2945917,"accept_rate":73,"display_name":"user435421"},"score":0,"creation_date":1683794335,"post_id":76225038,"comment_id":134422041,"body_markdown":"New JSESSIONID get&#39;s set on each new request for the same &quot;user&quot;. I have tried using `SessionCreationPolicy.IF_REQUIRED` and `SessionCreationPolicy.NEVER`","body":"New JSESSIONID get&#39;s set on each new request for the same &quot;user&quot;. I have tried using <code>SessionCreationPolicy.IF_REQUIRED</code> and <code>SessionCreationPolicy.NEVER</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1683795250,"post_id":76225038,"comment_id":134422240,"body_markdown":"That is for Spring Security and has nothing to do with other session usage on ly the session usage for SPring Security.","body":"That is for Spring Security and has nothing to do with other session usage on ly the session usage for SPring Security."}],"owner":{"account_id":3524392,"reputation":859,"user_id":2945917,"accept_rate":73,"display_name":"user435421"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683793006,"creation_date":1683789753,"question_id":76225038,"body_markdown":"I have a simple Spring Boot app. I have created a session-scoped class and want for it to store some session related stuff. I want for the HTTP session to be created and tracked via the JSESSIONID cookie on the first request coming to the server. However, it looks like Spring Boot does not use HTTP session tracking by default (even JSESSIONID cookie is never created). How to enable HTTP session tracking - no user authentication is needed. Just plain JSESSIONID cookie tracking is wanted.","title":"How to make Spring Boot track HTTP session without authentication?","body":"<p>I have a simple Spring Boot app. I have created a session-scoped class and want for it to store some session related stuff. I want for the HTTP session to be created and tracked via the JSESSIONID cookie on the first request coming to the server. However, it looks like Spring Boot does not use HTTP session tracking by default (even JSESSIONID cookie is never created). How to enable HTTP session tracking - no user authentication is needed. Just plain JSESSIONID cookie tracking is wanted.</p>\n"},{"tags":["java","android","interface","instance"],"owner":{"account_id":26104704,"reputation":21,"user_id":19799567,"display_name":"asdf9797"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683792793,"creation_date":1683792793,"question_id":76225458,"body_markdown":"Same as the question, A colleague of mine has implemented as below how to take an interface as a parameter to implement it abstractly as a library.\r\n\r\n    public void setData(\r\n            List&lt;ProgramGuideChannel&gt; newChannels,\r\n            Map&lt;String, List&lt;ProgramGuideSchedule&lt;T&gt;&gt;&gt; newChannelEntries,\r\n            LocalDate selectedDate\r\n    ) {\r\n        programGuideManager.setData(newChannels, newChannelEntries, selectedDate, DISPLAY_TIMEZONE);\r\n    }\r\n\r\nThe problematic part here is the first parameter, List Of ProgramGuideChannel\r\n\r\n    public class EpgChannel implements ProgramGuideChannel {\r\n    private final Channel channel;\r\n\r\n    public EpgChannel(Channel channel) {\r\n        this.channel = channel;\r\n    }\r\n\r\n    @Override\r\n    public String getId() {\r\n        return String.valueOf(channel.getId());\r\n    }\r\n\r\n    @Override\r\n    public Spanned getName() {\r\n        return new SpannedString(channel.getDisplayName());\r\n    }\r\n\r\n    @Override\r\n    public String getImageUrl() {\r\n        return channel.getAppLinkPosterArtUri();\r\n    }\r\n    public String getOriginalNetworkId(){\r\n        return String.valueOf(channel.getOriginalNetworkId());\r\n    }\r\n}\r\nLike the code above, my EpgChannel class implements the ProgramGuideChannel interface.\r\nAnd when I insert the List for this EpgChannel as a parameter to the setData method, an error occurs\r\n\r\n    setData(java.util.List&lt;com.jhh.epg.model.ProgramGuideChannel&gt;, java.util.Map&lt;java.lang.String,java.util.List&lt;com.jhh.epg.model.ProgramGuideSchedule&lt;com.google.android.media.tv.companionlibrary.model.Program&gt;&gt;&gt;, java.time.LocalDate) in com.jhh.epg.ProgramGuideFragment cannot be applied to (java.util.List&lt;com.jhh.phoenixplayer2.livetv.epg.EpgChannel&gt;, java.util.Map&lt;java.lang.String,java.util.List&lt;com.jhh.epg.model.ProgramGuideSchedule&lt;com.google.android.media.tv.companionlibrary.model.Program&gt;&gt;&gt;, java.time.LocalDate)\r\n\r\n \r\nI don&#39;t understand this error. My EpgChannel object obviously has an instance of ProgramGuideChannel. However, my method is not aware of this.\r\nDoes anyone know the reason for this?\r\n\r\nps - There was no problem when the corresponding setData was developed in kotlin. I am thinking that it may be a Java problem.\r\n","title":"Can&#39;t a method that receives an interface as a parameter in Android receive an object that implements the interface as a parameter?","body":"<p>Same as the question, A colleague of mine has implemented as below how to take an interface as a parameter to implement it abstractly as a library.</p>\n<pre><code>public void setData(\n        List&lt;ProgramGuideChannel&gt; newChannels,\n        Map&lt;String, List&lt;ProgramGuideSchedule&lt;T&gt;&gt;&gt; newChannelEntries,\n        LocalDate selectedDate\n) {\n    programGuideManager.setData(newChannels, newChannelEntries, selectedDate, DISPLAY_TIMEZONE);\n}\n</code></pre>\n<p>The problematic part here is the first parameter, List Of ProgramGuideChannel</p>\n<pre><code>public class EpgChannel implements ProgramGuideChannel {\nprivate final Channel channel;\n\npublic EpgChannel(Channel channel) {\n    this.channel = channel;\n}\n\n@Override\npublic String getId() {\n    return String.valueOf(channel.getId());\n}\n\n@Override\npublic Spanned getName() {\n    return new SpannedString(channel.getDisplayName());\n}\n\n@Override\npublic String getImageUrl() {\n    return channel.getAppLinkPosterArtUri();\n}\npublic String getOriginalNetworkId(){\n    return String.valueOf(channel.getOriginalNetworkId());\n}\n</code></pre>\n<p>}\nLike the code above, my EpgChannel class implements the ProgramGuideChannel interface.\nAnd when I insert the List for this EpgChannel as a parameter to the setData method, an error occurs</p>\n<pre><code>setData(java.util.List&lt;com.jhh.epg.model.ProgramGuideChannel&gt;, java.util.Map&lt;java.lang.String,java.util.List&lt;com.jhh.epg.model.ProgramGuideSchedule&lt;com.google.android.media.tv.companionlibrary.model.Program&gt;&gt;&gt;, java.time.LocalDate) in com.jhh.epg.ProgramGuideFragment cannot be applied to (java.util.List&lt;com.jhh.phoenixplayer2.livetv.epg.EpgChannel&gt;, java.util.Map&lt;java.lang.String,java.util.List&lt;com.jhh.epg.model.ProgramGuideSchedule&lt;com.google.android.media.tv.companionlibrary.model.Program&gt;&gt;&gt;, java.time.LocalDate)\n</code></pre>\n<p>I don't understand this error. My EpgChannel object obviously has an instance of ProgramGuideChannel. However, my method is not aware of this.\nDoes anyone know the reason for this?</p>\n<p>ps - There was no problem when the corresponding setData was developed in kotlin. I am thinking that it may be a Java problem.</p>\n"},{"tags":["java","firebase","android-studio"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1683696369,"post_id":76210576,"comment_id":134404141,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-display-locations-from-firestore-on-google-maps-using-jetpack-compose-9490c92c34da) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirestoreGoogleMapsJetpackCompose).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-display-locations-from-firestore-on-google-maps-using-jetpack-compose-9490c92c34da\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirestoreGoogleMapsJetpackCompose\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":28050227,"reputation":1,"user_id":21439337,"display_name":"Aditya Wiradarma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683791283,"creation_date":1683643482,"question_id":76210576,"body_markdown":"Google maps on the android application does not appear. On the terminal it says E/location: enabled\r\n\r\nE/location: enabled\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FYZYo.png","title":"Google maps on the android application does not appear","body":"<p>Google maps on the android application does not appear. On the terminal it says E/location: enabled</p>\n<p>E/location: enabled</p>\n<p><a href=\"https://i.stack.imgur.com/FYZYo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FYZYo.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","php","twilio","twilio-api","twilio-php"],"comments":[{"owner":{"account_id":1530592,"reputation":92715,"user_id":1427878,"display_name":"CBroe"},"score":1,"creation_date":1674548663,"post_id":75217991,"comment_id":132731764,"body_markdown":"Not sure what data exactly you need to get, but maybe you can use UsageTriggers instead? https://www.twilio.com/docs/usage/api/usage-trigger","body":"Not sure what data exactly you need to get, but maybe you can use UsageTriggers instead? <a href=\"https://www.twilio.com/docs/usage/api/usage-trigger\" rel=\"nofollow noreferrer\">twilio.com/docs/usage/api/usage-trigger</a>"},{"owner":{"account_id":5458539,"reputation":54,"user_id":5249021,"display_name":"chilli10"},"score":0,"creation_date":1674566751,"post_id":75217991,"comment_id":132737366,"body_markdown":"@CBroe I need the data given by the usages records API such as SMS/Voice usages (including related bill charged) in the last n minutes and fees charged in the last x hours.","body":"@CBroe I need the data given by the usages records API such as SMS/Voice usages (including related bill charged) in the last n minutes and fees charged in the last x hours."},{"owner":{"account_id":5458539,"reputation":54,"user_id":5249021,"display_name":"chilli10"},"score":0,"creation_date":1674568474,"post_id":75217991,"comment_id":132738021,"body_markdown":"Also the usage-trigger has its finest resolution as once per day, which does not satisfy my requirement.","body":"Also the usage-trigger has its finest resolution as once per day, which does not satisfy my requirement."},{"owner":{"account_id":2698449,"reputation":490,"user_id":2329822,"accept_rate":94,"display_name":"John Smith"},"score":0,"creation_date":1674633927,"post_id":75217991,"comment_id":132753764,"body_markdown":"it&#39;s not like the prices change every other day. if you know how to monitor every action that occurs you can easily estimate the charges down to the penny more or less.","body":"it&#39;s not like the prices change every other day. if you know how to monitor every action that occurs you can easily estimate the charges down to the penny more or less."},{"owner":{"account_id":8274076,"reputation":85,"user_id":6220901,"display_name":"tcbeaton"},"score":0,"creation_date":1674840616,"post_id":75217991,"comment_id":132806251,"body_markdown":"Assuming the Usage Records API is real-time, updating throughout the day, you could ping it every ten minutes and subtract the previous values to get the number within the last ten minutes (i.e., if there were 47 messages ten minutes ago and there are 55 now, 8 occurred in the last ten minutes). This is a little better than querying every ten minutes for the last ten minutes; if the query for just ten minutes is early, something might get double counted, if it&#39;s late, something could get skipped.","body":"Assuming the Usage Records API is real-time, updating throughout the day, you could ping it every ten minutes and subtract the previous values to get the number within the last ten minutes (i.e., if there were 47 messages ten minutes ago and there are 55 now, 8 occurred in the last ten minutes). This is a little better than querying every ten minutes for the last ten minutes; if the query for just ten minutes is early, something might get double counted, if it&#39;s late, something could get skipped."}],"answers":[{"tags":[],"owner":{"account_id":77875,"reputation":2447,"user_id":222011,"display_name":"Matthew Setter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683791120,"creation_date":1683791120,"answer_id":76225210,"question_id":75217991,"body_markdown":"Responses from the endpoint don&#39;t return any properties that you can use to filter out older records, unfortunately. The only suggestions I have are to persist the results in the response to a database table or cache, where each record has some kind of unique identifier and then query the data store for the newer records using the identifier to filter out the older/previously retrieved records.","title":"How to get Twilio Usages data every few minutes?","body":"<p>Responses from the endpoint don't return any properties that you can use to filter out older records, unfortunately. The only suggestions I have are to persist the results in the response to a database table or cache, where each record has some kind of unique identifier and then query the data store for the newer records using the identifier to filter out the older/previously retrieved records.</p>\n"}],"owner":{"account_id":5458539,"reputation":54,"user_id":5249021,"display_name":"chilli10"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683791120,"creation_date":1674540738,"question_id":75217991,"body_markdown":"Requirement: I need to monitor the Twilio account and subaccount usages in near real-time.\r\nAny solution in java, php, python or even curl will do for me.\r\n\r\nTwilio provides [Usage Records API][1] and allows some [subresources][2] which contains [`Today`][3] but that returns all data from the start of that day till the nearest current time. I am unable to find anything in the documents that would retrieve only usages of the last minute or last 10 minutes or even between two time constants. The Usage API accepts two dates but not time.\r\nHoping someone out there has a solution to offer.\r\n\r\n\r\n  [1]: https://www.twilio.com/docs/usage/api/usage-record\r\n  [2]: https://www.twilio.com/docs/usage/api/usage-record#list-subresources\r\n  [3]: https://www.twilio.com/docs/usage/api/usage-record?code-sample=code-todays-calls&amp;code-language=Java&amp;code-sdk-version=9.x","title":"How to get Twilio Usages data every few minutes?","body":"<p>Requirement: I need to monitor the Twilio account and subaccount usages in near real-time.\nAny solution in java, php, python or even curl will do for me.</p>\n<p>Twilio provides <a href=\"https://www.twilio.com/docs/usage/api/usage-record\" rel=\"nofollow noreferrer\">Usage Records API</a> and allows some <a href=\"https://www.twilio.com/docs/usage/api/usage-record#list-subresources\" rel=\"nofollow noreferrer\">subresources</a> which contains <a href=\"https://www.twilio.com/docs/usage/api/usage-record?code-sample=code-todays-calls&amp;code-language=Java&amp;code-sdk-version=9.x\" rel=\"nofollow noreferrer\"><code>Today</code></a> but that returns all data from the start of that day till the nearest current time. I am unable to find anything in the documents that would retrieve only usages of the last minute or last 10 minutes or even between two time constants. The Usage API accepts two dates but not time.\nHoping someone out there has a solution to offer.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1683699985,"post_id":76215410,"comment_id":134404688,"body_markdown":"Please share the PDF for analysis.","body":"Please share the PDF for analysis."},{"owner":{"account_id":14291246,"reputation":51,"user_id":10323128,"display_name":"Abhay Patel"},"score":0,"creation_date":1683700200,"post_id":76215410,"comment_id":134404728,"body_markdown":"Hi @mkl Thank you for the response. I can not share the pdf because of security reasons.","body":"Hi @mkl Thank you for the response. I can not share the pdf because of security reasons."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1683700647,"post_id":76215410,"comment_id":134404816,"body_markdown":"Then, unfortunately, I see no way helping you.","body":"Then, unfortunately, I see no way helping you."},{"owner":{"account_id":14291246,"reputation":51,"user_id":10323128,"display_name":"Abhay Patel"},"score":0,"creation_date":1683790301,"post_id":76215410,"comment_id":134421185,"body_markdown":"@TilmanHausherr As I checked in PDFDebugger the same error was shown in every version which is mentioned in the question.","body":"@TilmanHausherr As I checked in PDFDebugger the same error was shown in every version which is mentioned in the question."},{"owner":{"account_id":14291246,"reputation":51,"user_id":10323128,"display_name":"Abhay Patel"},"score":0,"creation_date":1683790974,"post_id":76215410,"comment_id":134421314,"body_markdown":"@TilmanHausherr I had attached the debugger stacktrace in question.","body":"@TilmanHausherr I had attached the debugger stacktrace in question."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1683792707,"post_id":76215410,"comment_id":134421666,"body_markdown":"That sounds like there is some invalid entry in the page tree of the PDF. @AbhayPatel are you knowledgeable enough in PDF details to check the structure of the page tree of the document manually?","body":"That sounds like there is some invalid entry in the page tree of the PDF. @AbhayPatel are you knowledgeable enough in PDF details to check the structure of the page tree of the document manually?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1683794554,"post_id":76215410,"comment_id":134422083,"body_markdown":"Look for /Pages in the PDF (open with NOTEPAD++), compare it with a working PDF.","body":"Look for /Pages in the PDF (open with NOTEPAD++), compare it with a working PDF."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1683795074,"post_id":76215410,"comment_id":134422196,"body_markdown":"You can&#39;t really &quot;resolve&quot; this issue, the creator of the PDF made a mistake or the PDF was corrupted in transfer. At most, you could save the &quot;repaired&quot; PDF from Adobe Reader and then use that one.","body":"You can&#39;t really &quot;resolve&quot; this issue, the creator of the PDF made a mistake or the PDF was corrupted in transfer. At most, you could save the &quot;repaired&quot; PDF from Adobe Reader and then use that one."},{"owner":{"account_id":14291246,"reputation":51,"user_id":10323128,"display_name":"Abhay Patel"},"score":0,"creation_date":1684126245,"post_id":76215410,"comment_id":134465417,"body_markdown":"Hi @TilmanHausherr as checked in adobe reader we are able to open the same file in Adobe properly there are no errors showing in opening that file in adobe reader.","body":"Hi @TilmanHausherr as checked in adobe reader we are able to open the same file in Adobe properly there are no errors showing in opening that file in adobe reader."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1684136081,"post_id":76215410,"comment_id":134466836,"body_markdown":"I meant save that one with &quot;Save As&quot; so you get a new file. This might then be a repaired file. Btw Adobe opening the file doesn&#39;t imply it is correct. Adobe does a lot of quiet repairing when needed.","body":"I meant save that one with &quot;Save As&quot; so you get a new file. This might then be a repaired file. Btw Adobe opening the file doesn&#39;t imply it is correct. Adobe does a lot of quiet repairing when needed."}],"owner":{"account_id":14291246,"reputation":51,"user_id":10323128,"display_name":"Abhay Patel"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683790931,"creation_date":1683699738,"question_id":76215410,"body_markdown":"I am using PDFBox version : 2.0.27\r\n\r\nThe pdf file has 55 pages which loads perfectly in every application\r\n\r\nwhile parsing the pdf when call pdDocument.getPage(0) it returns the pdPage object\r\nbut when i call pdDocument.getPage(1) it throws the below error \r\n\r\n    java.lang.IllegalStateException: 1-based index not found: 2\r\n        at org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:342)\r\n        at org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:258)\r\n        at org.apache.pdfbox.pdmodel.PDDocument.getPage(PDDocument.java:1547)\r\n\r\nThe pdDocument can load only one page for this file it can not load the other pages of file.\r\n\r\nPlease refer the code snippet below.\r\n\r\n```\r\nPDDocument pdDocument = PDDocument.load(&quot;filePath&quot;, MemoryUsageSetting.setupTempFileOnly());\r\nfor(int i = 0; i &lt; pdDocument.getNumberOfPages(); i++) {\r\n   PDPage page = pdDocument.getPage(i); //error occurring in this statement\r\n   // rest of the logic\r\n}\r\n```\r\nPlease check the below stacktrace which is received in PDFDebugger app\r\n\r\n```\r\njava.lang.IllegalStateException: 1-based index not found: 2\r\n    org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:342)\r\n    org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:258)\r\n    org.apache.pdfbox.debugger.ui.DocumentEntry.getPage(DocumentEntry.java:47)\r\n    org.apache.pdfbox.debugger.ui.PDFTreeModel.getChild(PDFTreeModel.java:143)\r\n    java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)\r\n    java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)\r\n    java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)\r\n    org.apache.pdfbox.debugger.PDFDebugger.initTree(PDFDebugger.java:1502)\r\n    org.apache.pdfbox.debugger.PDFDebugger.readPDFFile(PDFDebugger.java:1432)\r\n    org.apache.pdfbox.debugger.PDFDebugger.openMenuItemActionPerformed(PDFDebugger.java:759)\r\n    org.apache.pdfbox.debugger.PDFDebugger.access$400(PDFDebugger.java:141)\r\n    org.apache.pdfbox.debugger.PDFDebugger$4.actionPerformed(PDFDebugger.java:395)\r\n    java.security.AccessController.doPrivileged(Native Method)\r\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\r\n    java.security.AccessController.doPrivileged(Native Method)\r\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n\r\n```\r\nFound below logs in debugger app if it is helpful for troubleshoot.\r\n```\r\n Info  [PDFDebugger] Parsed in 240 ms\r\n Warning  [PDPageTree] COSDictionary expected, but got null\r\n Warning  [PDPageTree] COSDictionary expected, but got null\r\n```\r\n\r\nHow can I resolve this issue?","title":"PDFBox : java.lang.IllegalStateException: 1-based index not found: 2 error in getPage()","body":"<p>I am using PDFBox version : 2.0.27</p>\n<p>The pdf file has 55 pages which loads perfectly in every application</p>\n<p>while parsing the pdf when call pdDocument.getPage(0) it returns the pdPage object\nbut when i call pdDocument.getPage(1) it throws the below error</p>\n<pre><code>java.lang.IllegalStateException: 1-based index not found: 2\n    at org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:342)\n    at org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:258)\n    at org.apache.pdfbox.pdmodel.PDDocument.getPage(PDDocument.java:1547)\n</code></pre>\n<p>The pdDocument can load only one page for this file it can not load the other pages of file.</p>\n<p>Please refer the code snippet below.</p>\n<pre><code>PDDocument pdDocument = PDDocument.load(&quot;filePath&quot;, MemoryUsageSetting.setupTempFileOnly());\nfor(int i = 0; i &lt; pdDocument.getNumberOfPages(); i++) {\n   PDPage page = pdDocument.getPage(i); //error occurring in this statement\n   // rest of the logic\n}\n</code></pre>\n<p>Please check the below stacktrace which is received in PDFDebugger app</p>\n<pre><code>java.lang.IllegalStateException: 1-based index not found: 2\n    org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:342)\n    org.apache.pdfbox.pdmodel.PDPageTree.get(PDPageTree.java:258)\n    org.apache.pdfbox.debugger.ui.DocumentEntry.getPage(DocumentEntry.java:47)\n    org.apache.pdfbox.debugger.ui.PDFTreeModel.getChild(PDFTreeModel.java:143)\n    java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)\n    java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)\n    java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)\n    org.apache.pdfbox.debugger.PDFDebugger.initTree(PDFDebugger.java:1502)\n    org.apache.pdfbox.debugger.PDFDebugger.readPDFFile(PDFDebugger.java:1432)\n    org.apache.pdfbox.debugger.PDFDebugger.openMenuItemActionPerformed(PDFDebugger.java:759)\n    org.apache.pdfbox.debugger.PDFDebugger.access$400(PDFDebugger.java:141)\n    org.apache.pdfbox.debugger.PDFDebugger$4.actionPerformed(PDFDebugger.java:395)\n    java.security.AccessController.doPrivileged(Native Method)\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\n    java.security.AccessController.doPrivileged(Native Method)\n    java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n\n</code></pre>\n<p>Found below logs in debugger app if it is helpful for troubleshoot.</p>\n<pre><code> Info  [PDFDebugger] Parsed in 240 ms\n Warning  [PDPageTree] COSDictionary expected, but got null\n Warning  [PDPageTree] COSDictionary expected, but got null\n</code></pre>\n<p>How can I resolve this issue?</p>\n"},{"tags":["java","switch-statement","cisco"],"comments":[{"owner":{"account_id":10219989,"reputation":11,"user_id":7544456,"display_name":"Dino"},"score":1,"creation_date":1683809031,"post_id":76225127,"comment_id":134425334,"body_markdown":"in case someone roam into this, might be useful: install JRE 8 u321 (later and previous vesrions wont work), clear jJava cache, uninstall all other version of Java. Tested on Win10, Win 11, Win 2019.","body":"in case someone roam into this, might be useful: install JRE 8 u321 (later and previous vesrions wont work), clear jJava cache, uninstall all other version of Java. Tested on Win10, Win 11, Win 2019."}],"owner":{"account_id":10219989,"reputation":11,"user_id":7544456,"display_name":"Dino"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683790424,"creation_date":1683790424,"question_id":76225127,"body_markdown":"I recently installed firmware version 9.2 (1a) on the Cisco DS-C9148S-k9 switch and I can&#39;t start the device manager, does anyone know what the problem would be?\r\n\r\nI tried many different versions of Java and the latest.\r\n\r\nError is :\r\nUnable to launch application / JNLP Jar download failure.\r\n\r\nDetails:\r\n\r\nLaunch File:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;jnlp spec=&quot;1.0+&quot; codebase=&quot;https://*sw IP*&quot;&gt;\r\n&lt;information&gt;\r\n&lt;title&gt;Cisco Device Manager&lt;/title&gt;\r\n&lt;vendor&gt;Cisco Systems, Inc.&lt;/vendor&gt;\r\n&lt;description&gt;Device Manager&lt;/description&gt;\r\n&lt;description kind=&quot;short&quot;&gt;Cisco Device Manager&lt;/description&gt;\r\n&lt;icon href=&quot;andiamo32.gif&quot;/&gt;\r\n&lt;offline-allowed/&gt;\r\n&lt;/information&gt;\r\n&lt;resources&gt;\r\n&lt;j2se version=&quot;1.7+&quot; java-vm-args=&quot;-Xms512m -Xmx512m&quot;/&gt;\r\n&lt;jar href=&quot;boot.jar&quot;/&gt;\r\n&lt;jar href=&quot;installer.jar&quot;/&gt;\r\n&lt;jar href=&quot;log4j.jar&quot;/&gt;\r\n&lt;/resources&gt;\r\n&lt;security&gt;\r\n&lt;all-permissions/&gt;\r\n&lt;/security&gt;\r\n&lt;application-desc main-class=&quot;com.cisco.dcbu.install.Boot&quot;&gt;\r\n&lt;argument&gt;-main=com.cisco.dcbu.dm.DM&lt;/argument&gt;\r\n&lt;argument&gt;-home=*sw IP*&lt;/argument&gt;\r\n&lt;argument&gt;-version=9.2(1a)&lt;/argument&gt;\r\n&lt;argument&gt;-https=true&lt;/argument&gt;\r\n&lt;/application-desc&gt;\r\n&lt;/jnlp&gt;\r\n```\r\n\r\nException:\r\n```\r\njava.io.IOException: JNLP Jar download failure.\r\n\tat com.sun.javaws.LaunchDownload.validateResults(Unknown Source)\r\n\tat com.sun.javaws.LaunchDownload.downloadJarFiles(Unknown Source)\r\n\tat com.sun.javaws.LaunchDownload.downloadEagerorAll(Unknown Source)\r\n\tat com.sun.javaws.Launcher.downloadResources(Unknown Source)\r\n\tat com.sun.javaws.Launcher.prepareResources(Unknown Source)\r\n\tat com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\r\n\tat com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n\tat com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n\tat com.sun.javaws.Launcher.launch(Unknown Source)\r\n\tat com.sun.javaws.Main.launchApp(Unknown Source)\r\n\tat com.sun.javaws.Main.continueInSecureThread(Unknown Source)\r\n\tat com.sun.javaws.Main.access$000(Unknown Source)\r\n\tat com.sun.javaws.Main$1.run(Unknown Source)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\n\r\nI tried many different versions of Java and the latest.\r\nTried to run element-manager.jnlp file from CMD as administrator.\r\nI put switch IP into java security exceptions.","title":"Cisco DS-C9148S-k9 9.2(1a) unable to launch device manager","body":"<p>I recently installed firmware version 9.2 (1a) on the Cisco DS-C9148S-k9 switch and I can't start the device manager, does anyone know what the problem would be?</p>\n<p>I tried many different versions of Java and the latest.</p>\n<p>Error is :\nUnable to launch application / JNLP Jar download failure.</p>\n<p>Details:</p>\n<p>Launch File:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;jnlp spec=&quot;1.0+&quot; codebase=&quot;https://*sw IP*&quot;&gt;\n&lt;information&gt;\n&lt;title&gt;Cisco Device Manager&lt;/title&gt;\n&lt;vendor&gt;Cisco Systems, Inc.&lt;/vendor&gt;\n&lt;description&gt;Device Manager&lt;/description&gt;\n&lt;description kind=&quot;short&quot;&gt;Cisco Device Manager&lt;/description&gt;\n&lt;icon href=&quot;andiamo32.gif&quot;/&gt;\n&lt;offline-allowed/&gt;\n&lt;/information&gt;\n&lt;resources&gt;\n&lt;j2se version=&quot;1.7+&quot; java-vm-args=&quot;-Xms512m -Xmx512m&quot;/&gt;\n&lt;jar href=&quot;boot.jar&quot;/&gt;\n&lt;jar href=&quot;installer.jar&quot;/&gt;\n&lt;jar href=&quot;log4j.jar&quot;/&gt;\n&lt;/resources&gt;\n&lt;security&gt;\n&lt;all-permissions/&gt;\n&lt;/security&gt;\n&lt;application-desc main-class=&quot;com.cisco.dcbu.install.Boot&quot;&gt;\n&lt;argument&gt;-main=com.cisco.dcbu.dm.DM&lt;/argument&gt;\n&lt;argument&gt;-home=*sw IP*&lt;/argument&gt;\n&lt;argument&gt;-version=9.2(1a)&lt;/argument&gt;\n&lt;argument&gt;-https=true&lt;/argument&gt;\n&lt;/application-desc&gt;\n&lt;/jnlp&gt;\n</code></pre>\n<p>Exception:</p>\n<pre><code>java.io.IOException: JNLP Jar download failure.\n    at com.sun.javaws.LaunchDownload.validateResults(Unknown Source)\n    at com.sun.javaws.LaunchDownload.downloadJarFiles(Unknown Source)\n    at com.sun.javaws.LaunchDownload.downloadEagerorAll(Unknown Source)\n    at com.sun.javaws.Launcher.downloadResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.launch(Unknown Source)\n    at com.sun.javaws.Main.launchApp(Unknown Source)\n    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)\n    at com.sun.javaws.Main.access$000(Unknown Source)\n    at com.sun.javaws.Main$1.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p>I tried many different versions of Java and the latest.\nTried to run element-manager.jnlp file from CMD as administrator.\nI put switch IP into java security exceptions.</p>\n"},{"tags":["java","apache-kafka","apache-flink","flink-streaming","flink-sql"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1683832222,"post_id":76225126,"comment_id":134430907,"body_markdown":"Try applying assignTimestampsAndWatermarks after the 2 second delay.","body":"Try applying assignTimestampsAndWatermarks after the 2 second delay."},{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1683832350,"post_id":76225126,"comment_id":134430935,"body_markdown":"Also, it&#39;s a bit worrisome that you are registering the timer for 2 seconds (in wall clock time) after the event&#39;s timestamp. That could be a time in the past.","body":"Also, it&#39;s a bit worrisome that you are registering the timer for 2 seconds (in wall clock time) after the event&#39;s timestamp. That could be a time in the past."}],"owner":{"account_id":17689110,"reputation":31,"user_id":13427559,"display_name":"Vivek Chandela"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683790421,"creation_date":1683790421,"question_id":76225126,"body_markdown":"I have 2 KafkaConsumers A (topic = &quot;viewTopic&quot;) &amp; B (topic = &quot;engTopic&quot;) and 1 KafkaProducer C (topic = &quot;delayedTopic&quot;).\r\n\r\nEvents in A &amp; B are strings of form `a_{id}_{timestamp}` and `b_{id}_{timestamp}` respectively.\r\n\r\nI need to do the following:\r\n 1. Delay the events in A by 2 seconds\r\n 2. Do an interval join with events in B if their ids match\r\n 3. Push the joined events in C.\r\n\r\nI&#39;m using event time as interval join works on event time only.\r\n\r\n### Main class ###\r\n```\r\npublic class DataStreamJob {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tfinal StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\t\tenv.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\r\n\t\tProperties properties1 = new Properties();\r\n\t\tproperties1.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n\t\tproperties1.setProperty(&quot;group.id&quot;, &quot;myGroup1&quot;);\r\n\t\tProperties properties2 = new Properties();\r\n\t\tproperties2.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n\t\tproperties2.setProperty(&quot;group.id&quot;, &quot;myGroup1&quot;);\r\n\t\tProperties properties3 = new Properties();\r\n\t\tproperties3.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n\r\n\t\t// set up Kafka String view consumer\r\n\t\tFlinkKafkaConsumer&lt;String&gt; viewConsumer = new FlinkKafkaConsumer&lt;&gt;(&quot;viewTopic&quot;, new SimpleStringSchema(), properties1);\r\n\t\tDataStream&lt;Event&gt; delayedViewStream = env.addSource(viewConsumer)\r\n\t\t\t\t\t\t// map incoming string to a JSON.\r\n\t\t\t\t\t\t.map(DataStreamJob::parseEvent)\r\n\t\t\t\t\t\t.assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBoundedOutOfOrderness(Duration.ofSeconds(5))\r\n\t\t\t\t\t\t\t\t.withTimestampAssigner((event, timestamp) -&gt; event.getTimestamp()))\r\n\t\t\t\t\t\t// records with same key are assigned same partition\r\n\t\t\t\t\t\t.keyBy(event -&gt; event.getId())\r\n\t\t\t\t\t\t.process(new DelayedEventsProcessFunction());\r\n\r\n\t\t// set up Kafka String engagement consumer\r\n\t\tFlinkKafkaConsumer&lt;String&gt; engConsumer = new FlinkKafkaConsumer&lt;&gt;(&quot;engTopic&quot;, new SimpleStringSchema(), properties2);\r\n\t\tDataStream&lt;Event&gt; directEngStream =  env.addSource(engConsumer)\r\n\t\t\t\t\t\t.map(DataStreamJob::parseEvent)\r\n\t\t\t\t\t\t.assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBoundedOutOfOrderness(Duration.ofSeconds(5))\r\n\t\t\t\t\t\t\t\t.withTimestampAssigner((event, timestamp) -&gt; event.getTimestamp()))\r\n\t\t\t\t\t\t.keyBy(event -&gt; event.getId());\r\n\r\n\t\t// interval join both streams\r\n\t\tDataStream&lt;Event&gt; joinedStream  = delayedViewStream.keyBy(event -&gt; event.getId())\r\n\t\t\t\t\t\t.intervalJoin(directEngStream.keyBy(event -&gt; event.getId()))\r\n\t\t\t\t\t\t.between(Time.seconds(-10), Time.seconds(10))\r\n\t\t\t\t\t\t.process(new EventJoinProcessFunction());\r\n\r\n\t\t// set up Kafka Event producer\r\n\t\tKeyedSerializationSchema&lt;String&gt; keyedSerializationSchema = new KeyedSerializationSchemaWrapper&lt;&gt;(new SimpleStringSchema());\r\n\t\tFlinkKafkaProducer&lt;String&gt; kafkaProducer = new FlinkKafkaProducer&lt;&gt;(\r\n\t\t\t\t\t\t&quot;delayedTopic&quot;,\r\n\t\t\t\t\t\tkeyedSerializationSchema,\r\n\t\t\t\t\t\tproperties3,\r\n\t\t\t\t\t\tFlinkKafkaProducer.Semantic.EXACTLY_ONCE);\r\n\r\n\t\tjoinedStream.map(Event::eventToString).addSink(kafkaProducer);\r\n\t\tenv.execute();\r\n}\r\n```\r\n\r\n### Code for DelayedEventsProcessFunction ###\r\n```\r\npublic class DelayedEventsProcessFunction extends KeyedProcessFunction&lt;String, Event, Event&gt; {\r\n    private transient MapState&lt;Long, Event&gt; delayedEventsState;\r\n\r\n    @Override\r\n    public void open(Configuration parameters) throws Exception {\r\n        MapStateDescriptor&lt;Long, Event&gt; delayedEventsDescriptor = new MapStateDescriptor&lt;&gt;(\r\n                &quot;delayedEventsState&quot;,\r\n                Types.LONG,\r\n                TypeInformation.of(new TypeHint&lt;Event&gt;() {})\r\n        );\r\n        delayedEventsState = getRuntimeContext().getMapState(delayedEventsDescriptor);\r\n    }\r\n\r\n    @Override\r\n    public void processElement(Event event, KeyedProcessFunction&lt;String, Event, Event&gt;.Context ctx, Collector&lt;Event&gt; out) throws Exception {\r\n        long currentTimestamp = event.getTimestamp();\r\n        long delayedTimestamp = currentTimestamp + TimeUnit.SECONDS.toMillis(2);\r\n        // schedule a callback when 2 seconds have passed.\r\n        ctx.timerService().registerProcessingTimeTimer(delayedTimestamp);\r\n        delayedEventsState.put(delayedTimestamp, event);\r\n    }\r\n\r\n    @Override\r\n    public void onTimer(long timestamp, OnTimerContext ctx, Collector&lt;Event&gt; out) throws Exception {\r\n        Event delayedEvent = delayedEventsState.get(timestamp);\r\n        if (delayedEvent != null) {\r\n            out.collect(delayedEvent);\r\n            delayedEventsState.remove(timestamp);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Code for EventJoinProcessFunction ###\r\n```\r\npublic class EventJoinProcessFunction extends ProcessJoinFunction&lt;Event, Event, Event&gt; {\r\n    @Override\r\n    public void processElement(Event left, Event right, ProcessJoinFunction&lt;Event, Event, Event&gt;.Context ctx, Collector&lt;Event&gt; out) throws Exception {\r\n        out.collect(new Event(&quot;join:&quot;+left.getType()+right.getType(), left.getId()+right.getId(), left.getTimestamp()));\r\n    }\r\n}\r\n```\r\n\r\n### Code for Event class ###\r\n```\r\npublic class Event {\r\n    private final String type;\r\n\r\n    private final String id;\r\n\r\n    private long timestamp;\r\n\r\n    public Event(String type, String id, long timestamp) {\r\n        this.type = type;\r\n        this.id = id;\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n    public String getType() {\r\n        return type;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public long getTimestamp() {return timestamp;}\r\n\r\n    public String eventToString() {\r\n        return String.format(&quot;%s_%s_%s&quot;, type, id, timestamp);\r\n    }\r\n}\r\n```\r\n\r\n### Local setup ###\r\n\r\n- Download IntelliJ for Mac\r\n- Download latest Kafka: https://kafka.apache.org/quickstart\r\n- `tar -xzf kafka_2.13-3.4.0.tgz`\r\n- `cd kafka_2.13-3.4.0`\r\n\r\nCreate the 3 topics\r\n\r\n- `bin/kafka-topics.sh --create --topic viewTopic --bootstrap-server localhost:9092`\r\n- `bin/kafka-topics.sh --create --topic engTopic --bootstrap-server localhost:9092`\r\n- `bin/kafka-topics.sh --create --topic delayedTopic --bootstrap-server localhost:9092`\r\n\r\nOpen 5 different terminals and run the following commands inside kafka_2.13-3.4.0 folder:\r\n\r\n- `bin/zookeeper-server-start.sh config/zookeeper.properties`\r\n- `bin/kafka-server-start.sh config/server.properties`\r\n- Write events: `bin/kafka-console-producer.sh --topic viewTopic --bootstrap-server localhost:9092 &lt; viewEvents.txt`\r\n- Write events: `bin/kafka-console-producer.sh --topic engTopic --bootstrap-server localhost:9092 &lt; engEvents.txt`\r\n- Read output: `bin/kafka-console-consumer.sh --topic delayedTopic --bootstrap-server localhost:9092`\r\n\r\nviewEvents.txt and engEvents.txt will have strings of the form `view_{id}_{timestamp}` and `eng_{id}_{timestamp}` repectively. Each string will be in a new line. e.g `view_1_1683787256`, `eng_1_1683787456`\r\n\r\nRun the code in IntelliJ and you are good to go.\r\n","title":"Flink interval join throws error: Long.MIN_VALUE timestamp: Elements used in interval stream joins need to have timestamps meaningful timestamps","body":"<p>I have 2 KafkaConsumers A (topic = &quot;viewTopic&quot;) &amp; B (topic = &quot;engTopic&quot;) and 1 KafkaProducer C (topic = &quot;delayedTopic&quot;).</p>\n<p>Events in A &amp; B are strings of form <code>a_{id}_{timestamp}</code> and <code>b_{id}_{timestamp}</code> respectively.</p>\n<p>I need to do the following:</p>\n<ol>\n<li>Delay the events in A by 2 seconds</li>\n<li>Do an interval join with events in B if their ids match</li>\n<li>Push the joined events in C.</li>\n</ol>\n<p>I'm using event time as interval join works on event time only.</p>\n<h3>Main class</h3>\n<pre><code>public class DataStreamJob {\n\n    public static void main(String[] args) throws Exception {\n        final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\n        Properties properties1 = new Properties();\n        properties1.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        properties1.setProperty(&quot;group.id&quot;, &quot;myGroup1&quot;);\n        Properties properties2 = new Properties();\n        properties2.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        properties2.setProperty(&quot;group.id&quot;, &quot;myGroup1&quot;);\n        Properties properties3 = new Properties();\n        properties3.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n\n        // set up Kafka String view consumer\n        FlinkKafkaConsumer&lt;String&gt; viewConsumer = new FlinkKafkaConsumer&lt;&gt;(&quot;viewTopic&quot;, new SimpleStringSchema(), properties1);\n        DataStream&lt;Event&gt; delayedViewStream = env.addSource(viewConsumer)\n                        // map incoming string to a JSON.\n                        .map(DataStreamJob::parseEvent)\n                        .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBoundedOutOfOrderness(Duration.ofSeconds(5))\n                                .withTimestampAssigner((event, timestamp) -&gt; event.getTimestamp()))\n                        // records with same key are assigned same partition\n                        .keyBy(event -&gt; event.getId())\n                        .process(new DelayedEventsProcessFunction());\n\n        // set up Kafka String engagement consumer\n        FlinkKafkaConsumer&lt;String&gt; engConsumer = new FlinkKafkaConsumer&lt;&gt;(&quot;engTopic&quot;, new SimpleStringSchema(), properties2);\n        DataStream&lt;Event&gt; directEngStream =  env.addSource(engConsumer)\n                        .map(DataStreamJob::parseEvent)\n                        .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBoundedOutOfOrderness(Duration.ofSeconds(5))\n                                .withTimestampAssigner((event, timestamp) -&gt; event.getTimestamp()))\n                        .keyBy(event -&gt; event.getId());\n\n        // interval join both streams\n        DataStream&lt;Event&gt; joinedStream  = delayedViewStream.keyBy(event -&gt; event.getId())\n                        .intervalJoin(directEngStream.keyBy(event -&gt; event.getId()))\n                        .between(Time.seconds(-10), Time.seconds(10))\n                        .process(new EventJoinProcessFunction());\n\n        // set up Kafka Event producer\n        KeyedSerializationSchema&lt;String&gt; keyedSerializationSchema = new KeyedSerializationSchemaWrapper&lt;&gt;(new SimpleStringSchema());\n        FlinkKafkaProducer&lt;String&gt; kafkaProducer = new FlinkKafkaProducer&lt;&gt;(\n                        &quot;delayedTopic&quot;,\n                        keyedSerializationSchema,\n                        properties3,\n                        FlinkKafkaProducer.Semantic.EXACTLY_ONCE);\n\n        joinedStream.map(Event::eventToString).addSink(kafkaProducer);\n        env.execute();\n}\n</code></pre>\n<h3>Code for DelayedEventsProcessFunction</h3>\n<pre><code>public class DelayedEventsProcessFunction extends KeyedProcessFunction&lt;String, Event, Event&gt; {\n    private transient MapState&lt;Long, Event&gt; delayedEventsState;\n\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        MapStateDescriptor&lt;Long, Event&gt; delayedEventsDescriptor = new MapStateDescriptor&lt;&gt;(\n                &quot;delayedEventsState&quot;,\n                Types.LONG,\n                TypeInformation.of(new TypeHint&lt;Event&gt;() {})\n        );\n        delayedEventsState = getRuntimeContext().getMapState(delayedEventsDescriptor);\n    }\n\n    @Override\n    public void processElement(Event event, KeyedProcessFunction&lt;String, Event, Event&gt;.Context ctx, Collector&lt;Event&gt; out) throws Exception {\n        long currentTimestamp = event.getTimestamp();\n        long delayedTimestamp = currentTimestamp + TimeUnit.SECONDS.toMillis(2);\n        // schedule a callback when 2 seconds have passed.\n        ctx.timerService().registerProcessingTimeTimer(delayedTimestamp);\n        delayedEventsState.put(delayedTimestamp, event);\n    }\n\n    @Override\n    public void onTimer(long timestamp, OnTimerContext ctx, Collector&lt;Event&gt; out) throws Exception {\n        Event delayedEvent = delayedEventsState.get(timestamp);\n        if (delayedEvent != null) {\n            out.collect(delayedEvent);\n            delayedEventsState.remove(timestamp);\n        }\n    }\n}\n</code></pre>\n<h3>Code for EventJoinProcessFunction</h3>\n<pre><code>public class EventJoinProcessFunction extends ProcessJoinFunction&lt;Event, Event, Event&gt; {\n    @Override\n    public void processElement(Event left, Event right, ProcessJoinFunction&lt;Event, Event, Event&gt;.Context ctx, Collector&lt;Event&gt; out) throws Exception {\n        out.collect(new Event(&quot;join:&quot;+left.getType()+right.getType(), left.getId()+right.getId(), left.getTimestamp()));\n    }\n}\n</code></pre>\n<h3>Code for Event class</h3>\n<pre><code>public class Event {\n    private final String type;\n\n    private final String id;\n\n    private long timestamp;\n\n    public Event(String type, String id, long timestamp) {\n        this.type = type;\n        this.id = id;\n        this.timestamp = timestamp;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public long getTimestamp() {return timestamp;}\n\n    public String eventToString() {\n        return String.format(&quot;%s_%s_%s&quot;, type, id, timestamp);\n    }\n}\n</code></pre>\n<h3>Local setup</h3>\n<ul>\n<li>Download IntelliJ for Mac</li>\n<li>Download latest Kafka: <a href=\"https://kafka.apache.org/quickstart\" rel=\"nofollow noreferrer\">https://kafka.apache.org/quickstart</a></li>\n<li><code>tar -xzf kafka_2.13-3.4.0.tgz</code></li>\n<li><code>cd kafka_2.13-3.4.0</code></li>\n</ul>\n<p>Create the 3 topics</p>\n<ul>\n<li><code>bin/kafka-topics.sh --create --topic viewTopic --bootstrap-server localhost:9092</code></li>\n<li><code>bin/kafka-topics.sh --create --topic engTopic --bootstrap-server localhost:9092</code></li>\n<li><code>bin/kafka-topics.sh --create --topic delayedTopic --bootstrap-server localhost:9092</code></li>\n</ul>\n<p>Open 5 different terminals and run the following commands inside kafka_2.13-3.4.0 folder:</p>\n<ul>\n<li><code>bin/zookeeper-server-start.sh config/zookeeper.properties</code></li>\n<li><code>bin/kafka-server-start.sh config/server.properties</code></li>\n<li>Write events: <code>bin/kafka-console-producer.sh --topic viewTopic --bootstrap-server localhost:9092 &lt; viewEvents.txt</code></li>\n<li>Write events: <code>bin/kafka-console-producer.sh --topic engTopic --bootstrap-server localhost:9092 &lt; engEvents.txt</code></li>\n<li>Read output: <code>bin/kafka-console-consumer.sh --topic delayedTopic --bootstrap-server localhost:9092</code></li>\n</ul>\n<p>viewEvents.txt and engEvents.txt will have strings of the form <code>view_{id}_{timestamp}</code> and <code>eng_{id}_{timestamp}</code> repectively. Each string will be in a new line. e.g <code>view_1_1683787256</code>, <code>eng_1_1683787456</code></p>\n<p>Run the code in IntelliJ and you are good to go.</p>\n"},{"tags":["java","html","spring","thymeleaf"],"comments":[{"owner":{"account_id":6767185,"reputation":17843,"user_id":5211833,"accept_rate":83,"display_name":"Adriaan"},"score":0,"creation_date":1683790151,"post_id":76180802,"comment_id":134421157,"body_markdown":"Please don&#39;t make more work for other people by vandalizing your posts. By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right, under the [CC BY-SA 4.0 license](https://creativecommons.org/licenses/by-sa/4.0/), for Stack Exchange to distribute that content (i.e. regardless of your future choices). By Stack Exchange policy, the non-vandalized version of the post is the one which is distributed. Thus, any vandalism will be reverted. If you want to know more about deleting a post please see: [How does deleting work?](https://meta.stackexchange.com/q/5221)","body":"Please don&#39;t make more work for other people by vandalizing your posts. By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right, under the <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\" rel=\"nofollow noreferrer\">CC BY-SA 4.0 license</a>, for Stack Exchange to distribute that content (i.e. regardless of your future choices). By Stack Exchange policy, the non-vandalized version of the post is the one which is distributed. Thus, any vandalism will be reverted. If you want to know more about deleting a post please see: <a href=\"https://meta.stackexchange.com/q/5221\">How does deleting work?</a>"}],"answers":[{"tags":[],"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683726311,"creation_date":1683726311,"answer_id":76219198,"question_id":76180802,"body_markdown":"Why did you set multiple html attributes with thymeleaf and with standard html attributes ? It should work well using the `th:field` thymeleaf tag, I bet that&#39;s why your code editor underline that with red, because `th:id` and `th:value` are redundant :\r\n\r\n    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;&quot; \r\n           th:field=&quot;*{token}&quot; data-cy=&quot;token&quot; autofocus/&gt;","title":"th:field attribute has a red underline in fragment thymeleaf","body":"<p>Why did you set multiple html attributes with thymeleaf and with standard html attributes ? It should work well using the <code>th:field</code> thymeleaf tag, I bet that's why your code editor underline that with red, because <code>th:id</code> and <code>th:value</code> are redundant :</p>\n<pre><code>&lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;&quot; \n       th:field=&quot;*{token}&quot; data-cy=&quot;token&quot; autofocus/&gt;\n</code></pre>\n"}],"owner":{"account_id":14322830,"reputation":39,"user_id":10345705,"display_name":"Grand Skunk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683790138,"creation_date":1683279342,"question_id":76180802,"body_markdown":"I have this fragment, it opens a modal when a button is clicked and inside that model is a form with a text field for token and submit button. \r\n\r\nHowever the th:field attribute token appears to have the red squiggle underneath so I&#39;m not sure I am doing wrong. I think it is something to do with using fragments but I am not sure how to fix this. And because of this, when invalid input/blank field is entered in the token field then no errors are displayed in the errors div where field.errors(&#39;token&#39;) is used. \r\n\r\n\r\n    &lt;div th:fragment=&quot;joinTeamByToken(joinTeamForm, tokenInvalid)&quot;&gt;\r\n    \r\n        &lt;form id=&quot;forgot-password-form&quot; th:action=&quot;@{my-teams}&quot; method=&quot;post&quot; th:object=&quot;${joinTeamForm}&quot;&gt;\r\n    \r\n    \r\n        &lt;div class=&quot;submit-button&quot;&gt;\r\n            &lt;button id=&quot;joinTeamByTokenModalBtn&quot; type=&quot;button&quot; class=&quot;registerLoginButton&quot;&gt;Join Team by Token&lt;/button&gt;\r\n        &lt;/div&gt;\r\n    \r\n    \r\n        &lt;div id=&quot;joinTeamModal&quot; class=&quot;modal&quot; th:style=&quot;${tokenInvalid != null ? &#39;display:block&#39; : &#39;display:none&#39;}&quot;&gt;\r\n    \r\n            &lt;div class=&quot;modal-content&quot;&gt;\r\n                &lt;span class=&quot;close&quot;&gt;&amp;times;&lt;/span&gt;\r\n                &lt;h4 class=&quot;reset-password-info&quot;&gt; Join Team By Token &lt;/h4&gt;\r\n    \r\n                &lt;div class=&quot;input-box&quot;&gt;\r\n                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;token&quot; placeholder=&quot;&quot; th:field=&quot;*{token}&quot; th:value=&quot;${token}&quot;\r\n                           data-cy=&quot;token&quot; autofocus&gt;\r\n                    &lt;label for=&quot;token&quot;&gt; Token: &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;\r\n                &lt;/div&gt;\r\n    \r\n                &lt;div th:each=&quot;err : ${#fields.errors(&#39;token&#39;)}&quot; th:text=&quot;${err}&quot; class=&quot;error-message&quot;&gt;&lt;/div&gt;\r\n    \r\n    \r\n                &lt;div class=&quot;submit-button&quot;&gt;\r\n                    &lt;button id=&quot;joinTeam&quot; type=&quot;submit&quot; class=&quot;registerLoginButton&quot;&gt;Join Team&lt;/button&gt;\r\n                &lt;/div&gt;\r\n    \r\n            &lt;/div&gt;\r\n    \r\n        &lt;/div&gt;\r\n\r\n\r\n\r\nthe @PostMapping to post upon submit\r\n\r\n\r\n\r\n     @PostMapping(&quot;/my-teams&quot;)\r\n        public String joinTeamsForm(\r\n                @RequestParam(&quot;token&quot;) String token,\r\n                @Validated JoinTeamForm joinTeamForm,\r\n                BindingResult bindingResult,\r\n                Model model,\r\n                HttpServletResponse httpServletResponse, HttpServletRequest request,\r\n                RedirectAttributes redirectAttributes) throws IOException {\r\n    \r\n            model.addAttribute(&quot;token&quot;, token);\r\n            model.addAttribute(&quot;httpServletRequest&quot;, request);\r\n    \r\n            User user = userService.getCurrentUser().get();\r\n            Optional&lt;Team&gt; team = teamService.findByToken(token);\r\n    \r\n    \r\n            if(team.isEmpty()) {\r\n                redirectAttributes.addFlashAttribute(&quot;tokenInvalid&quot;, &quot;Token is null&quot;);\r\n            }\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                redirectAttributes.addFlashAttribute(&quot;tokenInvalid&quot;, &quot;Token is null&quot;);\r\n                httpServletResponse.setStatus(HttpServletResponse.SC_BAD_REQUEST);\r\n                return &quot;redirect:/my-teams?page=1&quot;;\r\n            }\r\n    \r\n            if(team.isPresent()) {\r\n                Team teamToJoin =  team.get();\r\n                user.joinTeam(teamToJoin);\r\n                userService.updateOrAddUser(user);\r\n            }\r\n            \r\n            return &quot;redirect:/my-teams?page=1&quot;;\r\n        }\r\n\r\n\r\n\r\nJoinTeamForm\r\n\r\n    public class JoinTeamForm {\r\n    \r\n        @NotBlank(message = &quot;Field cannot be blank&quot;)\r\n        private String token;\r\n    \r\n        public String getToken() {\r\n            return token;\r\n        }\r\n    \r\n        public void setToken(String token) {\r\n            this.token = token;\r\n        }\r\n    }\r\n\r\n","title":"th:field attribute has a red underline in fragment thymeleaf","body":"<p>I have this fragment, it opens a modal when a button is clicked and inside that model is a form with a text field for token and submit button.</p>\n<p>However the th:field attribute token appears to have the red squiggle underneath so I'm not sure I am doing wrong. I think it is something to do with using fragments but I am not sure how to fix this. And because of this, when invalid input/blank field is entered in the token field then no errors are displayed in the errors div where field.errors('token') is used.</p>\n<pre><code>&lt;div th:fragment=&quot;joinTeamByToken(joinTeamForm, tokenInvalid)&quot;&gt;\n\n    &lt;form id=&quot;forgot-password-form&quot; th:action=&quot;@{my-teams}&quot; method=&quot;post&quot; th:object=&quot;${joinTeamForm}&quot;&gt;\n\n\n    &lt;div class=&quot;submit-button&quot;&gt;\n        &lt;button id=&quot;joinTeamByTokenModalBtn&quot; type=&quot;button&quot; class=&quot;registerLoginButton&quot;&gt;Join Team by Token&lt;/button&gt;\n    &lt;/div&gt;\n\n\n    &lt;div id=&quot;joinTeamModal&quot; class=&quot;modal&quot; th:style=&quot;${tokenInvalid != null ? 'display:block' : 'display:none'}&quot;&gt;\n\n        &lt;div class=&quot;modal-content&quot;&gt;\n            &lt;span class=&quot;close&quot;&gt;&amp;times;&lt;/span&gt;\n            &lt;h4 class=&quot;reset-password-info&quot;&gt; Join Team By Token &lt;/h4&gt;\n\n            &lt;div class=&quot;input-box&quot;&gt;\n                &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;token&quot; placeholder=&quot;&quot; th:field=&quot;*{token}&quot; th:value=&quot;${token}&quot;\n                       data-cy=&quot;token&quot; autofocus&gt;\n                &lt;label for=&quot;token&quot;&gt; Token: &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;\n            &lt;/div&gt;\n\n            &lt;div th:each=&quot;err : ${#fields.errors('token')}&quot; th:text=&quot;${err}&quot; class=&quot;error-message&quot;&gt;&lt;/div&gt;\n\n\n            &lt;div class=&quot;submit-button&quot;&gt;\n                &lt;button id=&quot;joinTeam&quot; type=&quot;submit&quot; class=&quot;registerLoginButton&quot;&gt;Join Team&lt;/button&gt;\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n</code></pre>\n<p>the @PostMapping to post upon submit</p>\n<pre><code> @PostMapping(&quot;/my-teams&quot;)\n    public String joinTeamsForm(\n            @RequestParam(&quot;token&quot;) String token,\n            @Validated JoinTeamForm joinTeamForm,\n            BindingResult bindingResult,\n            Model model,\n            HttpServletResponse httpServletResponse, HttpServletRequest request,\n            RedirectAttributes redirectAttributes) throws IOException {\n\n        model.addAttribute(&quot;token&quot;, token);\n        model.addAttribute(&quot;httpServletRequest&quot;, request);\n\n        User user = userService.getCurrentUser().get();\n        Optional&lt;Team&gt; team = teamService.findByToken(token);\n\n\n        if(team.isEmpty()) {\n            redirectAttributes.addFlashAttribute(&quot;tokenInvalid&quot;, &quot;Token is null&quot;);\n        }\n\n        if (bindingResult.hasErrors()) {\n            redirectAttributes.addFlashAttribute(&quot;tokenInvalid&quot;, &quot;Token is null&quot;);\n            httpServletResponse.setStatus(HttpServletResponse.SC_BAD_REQUEST);\n            return &quot;redirect:/my-teams?page=1&quot;;\n        }\n\n        if(team.isPresent()) {\n            Team teamToJoin =  team.get();\n            user.joinTeam(teamToJoin);\n            userService.updateOrAddUser(user);\n        }\n        \n        return &quot;redirect:/my-teams?page=1&quot;;\n    }\n</code></pre>\n<p>JoinTeamForm</p>\n<pre><code>public class JoinTeamForm {\n\n    @NotBlank(message = &quot;Field cannot be blank&quot;)\n    private String token;\n\n    public String getToken() {\n        return token;\n    }\n\n    public void setToken(String token) {\n        this.token = token;\n    }\n}\n</code></pre>\n"},{"tags":["java","arraylist","resize"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1683788955,"post_id":76224912,"comment_id":134420928,"body_markdown":"The idea is to create a new array of larger size, and either using for loop or System.arraycopy(), copy the values stored to new array then reassign the new array to the previous array variable. Also note that ArrayList maintains a variable like size/count so that insertion is O(1) and iteration is not needed for insertion","body":"The idea is to create a new array of larger size, and either using for loop or System.arraycopy(), copy the values stored to new array then reassign the new array to the previous array variable. Also note that ArrayList maintains a variable like size/count so that insertion is O(1) and iteration is not needed for insertion"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1683789613,"post_id":76224912,"comment_id":134421050,"body_markdown":"Hello and welcome. I&#39;m assuming you&#39;re talking about [this specific answer](https://stackoverflow.com/a/62850895/133203). When they say it&#39;s not recommended they mean for actual production code. For homework it&#39;s perfectly fine. Anyway, a better approach would be to double the size of the array when it&#39;s full instead of growing it by one element at each insertion.","body":"Hello and welcome. I&#39;m assuming you&#39;re talking about <a href=\"https://stackoverflow.com/a/62850895/133203\">this specific answer</a>. When they say it&#39;s not recommended they mean for actual production code. For homework it&#39;s perfectly fine. Anyway, a better approach would be to double the size of the array when it&#39;s full instead of growing it by one element at each insertion."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683789819,"creation_date":1683789819,"answer_id":76225050,"question_id":76224912,"body_markdown":"You could implement your method as \r\n```\r\nprivate void resizeArray(int newCapacity){\r\n  Object[] newArray = new Object[newCapacity]; //create new extended array\r\n  Object[] elements = this.elements; //get existing array\r\n  System.arrayCopy(elements, 0, newArray, 0, elements.length); //copy existing data into the new array\r\n  this.elements = newArray; // set new array as storage\r\n}","title":"How to mimic ArrayList in Java?","body":"<p>You could implement your method as</p>\n<pre><code>private void resizeArray(int newCapacity){\n  Object[] newArray = new Object[newCapacity]; //create new extended array\n  Object[] elements = this.elements; //get existing array\n  System.arrayCopy(elements, 0, newArray, 0, elements.length); //copy existing data into the new array\n  this.elements = newArray; // set new array as storage\n}\n</code></pre>\n"}],"owner":{"account_id":28366608,"reputation":13,"user_id":21695819,"display_name":"Gilson dos Reis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76225050,"answer_count":1,"score":1,"last_activity_date":1683789819,"creation_date":1683788599,"question_id":76224912,"body_markdown":"I have homework to mimic the ArrayList data structure in Java. I am not allowed to use any 3rd party data structures or anything in java.Utils.package.\r\n\r\nI got stuck on how to increase the array size dynamically.\r\n\r\nI read the documentation at  [Class ArrayList&lt;E&gt;](https://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html) and many online articles and I didn&#39;t figure out a solution. \r\n\r\nI found a post here but the author does not recommend to use his solution. [&quot;FAKE resizable array&quot;](https://stackoverflow.com/questions/2581972/how-can-i-make-a-resizable-array-in-java/)\r\n\r\n\r\n\r\nThis is part of my code:\r\n\r\n```\r\n//Implementation Class\r\npackage IncreaseArraySize;\r\npublic class StudentArrayList&lt;E&gt;{\r\n\tprivate Object[] elements;\r\n\tpublic StudentArrayList() {\r\n\t\t\telements = new Object[]{null, null};\r\n\t}\r\n        public StudentArrayList(int capacity) {\r\n\t\telements = new Object[capacity];\r\n\t\tfor(int i = 0; i &lt; capacity; i++){\r\n\t\t\telements[i] = null; \r\n\t\t}\r\n\t}\r\n\tpublic void add(E e){\r\n\t\tBoolean isItAdded = false;\r\n\t\tfor ( int i= 0; i &lt; elements.length; i++) {\r\n\t\t\t//assuming the 1st null is the end of the list\r\n                       if(elements[i] == null){  \r\n\t\t\t\telements[i] = e;\r\n\t\t\t\tisItAdded = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n                        }\r\n                        if(isItAdded == false){\r\n\t\t \t       int holdIndex = elements.length;\r\n\t\t\t       resizeArray(holdIndex+10);\r\n\t\t\t       elements[holdIndex] = e;\r\n\t\t        }\r\n                }\r\n\tprivate void resizeArray(int newCapacity){\r\n\t\tSystem.out.println(&quot;Resize the array &#39;elements&#39; here&quot;);\r\n\t}\r\n\tpublic String toString(){\r\n\t\tString stringOfElements=&quot;[&quot;;\r\n\t\tBoolean notFirstElement = false;\r\n\t\tfor ( int i= 0; i &lt; elements.length; i++) {\r\n            if(elements[i] != null){\r\n\t\t\t\tif(notFirstElement) stringOfElements += &quot;, &quot;;\r\n\t\t\t  stringOfElements += elements[i];\r\n\t\t\t  notFirstElement = true;\r\n\t\t\t} \r\n        } \r\n\t\tstringOfElements += &quot;]&quot;;\r\n        return stringOfElements;\r\n    }\r\n}\r\n\r\n//Main method\r\npackage IncreaseArraySize;\r\n\r\npublic class testMyArrayList {\r\n    public static void main(String[] args) {\r\n        StudentArrayList&lt;String&gt; myArrayList = new StudentArrayList&lt;String&gt;(2);\r\n        System.out.println(&quot;Initial list of elements = &quot; + myArrayList.toString());\r\n        myArrayList.add(&quot;this works fine&quot;);\r\n        myArrayList.add(&quot;this works fine too&quot;);\r\n        System.out.println(&quot;List of elements = &quot; + myArrayList.toString());\r\n        myArrayList.add(&quot;This doesn&#39;t work&quot;);\r\n        System.out.println(&quot;Array was resized: list of elements= &quot; + myArrayList.toString());\r\n    }\r\n}\r\n\r\n```\r\n\r\nAny help is appreciated. \r\n","title":"How to mimic ArrayList in Java?","body":"<p>I have homework to mimic the ArrayList data structure in Java. I am not allowed to use any 3rd party data structures or anything in java.Utils.package.</p>\n<p>I got stuck on how to increase the array size dynamically.</p>\n<p>I read the documentation at  <a href=\"https://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\">Class ArrayList</a> and many online articles and I didn't figure out a solution.</p>\n<p>I found a post here but the author does not recommend to use his solution. <a href=\"https://stackoverflow.com/questions/2581972/how-can-i-make-a-resizable-array-in-java/\">&quot;FAKE resizable array&quot;</a></p>\n<p>This is part of my code:</p>\n<pre><code>//Implementation Class\npackage IncreaseArraySize;\npublic class StudentArrayList&lt;E&gt;{\n    private Object[] elements;\n    public StudentArrayList() {\n            elements = new Object[]{null, null};\n    }\n        public StudentArrayList(int capacity) {\n        elements = new Object[capacity];\n        for(int i = 0; i &lt; capacity; i++){\n            elements[i] = null; \n        }\n    }\n    public void add(E e){\n        Boolean isItAdded = false;\n        for ( int i= 0; i &lt; elements.length; i++) {\n            //assuming the 1st null is the end of the list\n                       if(elements[i] == null){  \n                elements[i] = e;\n                isItAdded = true;\n                break;\n            }\n                        }\n                        if(isItAdded == false){\n                   int holdIndex = elements.length;\n                   resizeArray(holdIndex+10);\n                   elements[holdIndex] = e;\n                }\n                }\n    private void resizeArray(int newCapacity){\n        System.out.println(&quot;Resize the array 'elements' here&quot;);\n    }\n    public String toString(){\n        String stringOfElements=&quot;[&quot;;\n        Boolean notFirstElement = false;\n        for ( int i= 0; i &lt; elements.length; i++) {\n            if(elements[i] != null){\n                if(notFirstElement) stringOfElements += &quot;, &quot;;\n              stringOfElements += elements[i];\n              notFirstElement = true;\n            } \n        } \n        stringOfElements += &quot;]&quot;;\n        return stringOfElements;\n    }\n}\n\n//Main method\npackage IncreaseArraySize;\n\npublic class testMyArrayList {\n    public static void main(String[] args) {\n        StudentArrayList&lt;String&gt; myArrayList = new StudentArrayList&lt;String&gt;(2);\n        System.out.println(&quot;Initial list of elements = &quot; + myArrayList.toString());\n        myArrayList.add(&quot;this works fine&quot;);\n        myArrayList.add(&quot;this works fine too&quot;);\n        System.out.println(&quot;List of elements = &quot; + myArrayList.toString());\n        myArrayList.add(&quot;This doesn't work&quot;);\n        System.out.println(&quot;Array was resized: list of elements= &quot; + myArrayList.toString());\n    }\n}\n\n</code></pre>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","appium","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":1,"creation_date":1683800348,"post_id":76225029,"comment_id":134423408,"body_markdown":"sorry, I would not recommend using java at all in karate. please also read this: https://github.com/karatelabs/karate/tree/master/karate-core#locator-lookup","body":"sorry, I would not recommend using java at all in karate. please also read this: <a href=\"https://github.com/karatelabs/karate/tree/master/karate-core#locator-lookup\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/tree/master/&hellip;</a>"},{"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"score":0,"creation_date":1683866357,"post_id":76225029,"comment_id":134435070,"body_markdown":"Have you used this locator anywhere in your repository? `*[name=&#39;usernametxtbox&#39;]`","body":"Have you used this locator anywhere in your repository? <code>*[name=&#39;usernametxtbox&#39;]</code>"}],"owner":{"account_id":3836586,"reputation":105,"user_id":3180718,"accept_rate":60,"display_name":"Michael Corleone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683789702,"creation_date":1683789702,"question_id":76225029,"body_markdown":"I am trying to implement Page Factory concept in Karate Framework.\r\n\r\n`LoginPage.java`\r\n\r\n  \r\n\r\n    @AndroidFindBy(xpath = &quot;//android.widget.EditText[@content-desc=&#39;email-input&#39;]&quot;)\r\n       public WebElement usernametxtbox;\r\n    \r\n    @AndroidFindBy(xpath = &quot;//android.widget.EditText[@content-desc=&#39;password-input&#39;]&quot;)\r\n    public WebElement passwordtxtbox;\r\n    \r\n    public LoginPage(WebDriver driver){\r\n            this.driver = driver;\r\n            PageFactory.initElements(driver, this);\r\n            driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n        }\r\n    \r\n        public void doLogin() throws InterruptedException, IOException {\r\n           usernametxtbox.sendKeys(&quot;username&quot;);\r\n          passwordtxtbox.sendKeys(&quot;password&quot;);\r\n    }\r\n\r\n\r\n\r\n`Login.feature`\r\n\r\n    Background: App Preset\r\n        * def LoginPage = Java.type(&#39;com.mobile.pages.LoginPage&#39;)\r\n        * def LoginPageObj = new LoginPage(driver)\r\n    \r\n      Scenario: Android app UI test\r\n        Given LoginPageObj.doLogin()\r\n\r\n\r\nI am getting below error when I execute the above feature file\r\n\r\n    01: LoginPageObj.doLogin()\r\n    &lt;&lt;&lt;&lt;\r\n    org.graalvm.polyglot.PolyglotException: Unsupported CSS selector &#39;*[name=&#39;usernametxtbox&#39;]&#39;. Reason: &#39;Error: &#39;name&#39; is not a valid attribute. Supported attributes are &#39;checkable, checked, clickable, enabled, focusable, focused, long-clickable, scrollable, selected, index, instance, description, resource-id, text, class-name, package-name&#39;&#39;\r\n\r\nKarate is considering the WebElement name as the CSS selector when I try to do usernametxtbox.sendKeys(&quot;username&quot;);\r\n","title":"Unable to implement page factory in Karate Framework","body":"<p>I am trying to implement Page Factory concept in Karate Framework.</p>\n<p><code>LoginPage.java</code></p>\n<pre><code>@AndroidFindBy(xpath = &quot;//android.widget.EditText[@content-desc='email-input']&quot;)\n   public WebElement usernametxtbox;\n\n@AndroidFindBy(xpath = &quot;//android.widget.EditText[@content-desc='password-input']&quot;)\npublic WebElement passwordtxtbox;\n\npublic LoginPage(WebDriver driver){\n        this.driver = driver;\n        PageFactory.initElements(driver, this);\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n    }\n\n    public void doLogin() throws InterruptedException, IOException {\n       usernametxtbox.sendKeys(&quot;username&quot;);\n      passwordtxtbox.sendKeys(&quot;password&quot;);\n}\n</code></pre>\n<p><code>Login.feature</code></p>\n<pre><code>Background: App Preset\n    * def LoginPage = Java.type('com.mobile.pages.LoginPage')\n    * def LoginPageObj = new LoginPage(driver)\n\n  Scenario: Android app UI test\n    Given LoginPageObj.doLogin()\n</code></pre>\n<p>I am getting below error when I execute the above feature file</p>\n<pre><code>01: LoginPageObj.doLogin()\n&lt;&lt;&lt;&lt;\norg.graalvm.polyglot.PolyglotException: Unsupported CSS selector '*[name='usernametxtbox']'. Reason: 'Error: 'name' is not a valid attribute. Supported attributes are 'checkable, checked, clickable, enabled, focusable, focused, long-clickable, scrollable, selected, index, instance, description, resource-id, text, class-name, package-name''\n</code></pre>\n<p>Karate is considering the WebElement name as the CSS selector when I try to do usernametxtbox.sendKeys(&quot;username&quot;);</p>\n"},{"tags":["javascript","java","firebase","google-cloud-platform","google-cloud-functions"],"answers":[{"tags":[],"owner":{"account_id":4108664,"reputation":80443,"user_id":3371862,"accept_rate":73,"display_name":"Renaud Tarnec"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1625604996,"creation_date":1625604996,"answer_id":68277276,"question_id":68276782,"body_markdown":"In the `lastCustIdGrab` function you need to return [the promises chain][1], as follows:\r\n\r\n    exports.lastCustIdGrab = () =&gt; {\r\n      return db.collection(&#39;Customers&#39;)   // &lt;== See return \r\n      .orderBy(&#39;createdAt&#39;, &#39;desc&#39;)\r\n      .limit(1);\r\n      .get()\r\n        .then((data) =&gt; {\r\n            let DOC = data.docs[0];\r\n            let ID = DOC.id;\r\n            console.log(&quot;LOOOP &quot;,ID);\r\n            return ID;\r\n        });\r\n    }\r\n\r\n**AND** you should note that the `lastCustIdGrab` function is asynchronous and returns a Promise, which means that you need to do:\r\n\r\n    lastCustIdGrab()\r\n    .then(data =&gt; {\r\n       console.log(`Last number ${data}`);\r\n    });\r\n\r\n \r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#chaining","title":"Passing ID from one function to another with return","body":"<p>In the <code>lastCustIdGrab</code> function you need to return <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#chaining\" rel=\"nofollow noreferrer\">the promises chain</a>, as follows:</p>\n<pre><code>exports.lastCustIdGrab = () =&gt; {\n  return db.collection('Customers')   // &lt;== See return \n  .orderBy('createdAt', 'desc')\n  .limit(1);\n  .get()\n    .then((data) =&gt; {\n        let DOC = data.docs[0];\n        let ID = DOC.id;\n        console.log(&quot;LOOOP &quot;,ID);\n        return ID;\n    });\n}\n</code></pre>\n<p><strong>AND</strong> you should note that the <code>lastCustIdGrab</code> function is asynchronous and returns a Promise, which means that you need to do:</p>\n<pre><code>lastCustIdGrab()\n.then(data =&gt; {\n   console.log(`Last number ${data}`);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14126431,"reputation":203,"user_id":10205580,"display_name":"Porter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625605134,"creation_date":1625605134,"answer_id":68277293,"question_id":68276782,"body_markdown":"`.get()` is asynchronous, and in your method you&#39;re not returning the promise. So even though the `then()` is executing, the value returned from the promise&#39;s resolve isn&#39;t being returned to `lastCustIdGrab()` invocation because the promise is never returned. So (switching it up to use async/await) try this:\r\n```js\r\nexports.lastCustIdGrab = async () =&gt; {\r\n  let data = await db.collection(&#39;Customers&#39;)\r\n  .orderBy(&#39;createdAt&#39;, &#39;desc&#39;)\r\n  .limit(1)\r\n  .get();\r\n\r\n  let DOC = data.docs[0];\r\n  let ID = DOC.id;\r\n  return ID;\r\n  }\r\n}\r\n```\r\nAnd in your invocation wait for the promise to resolve to ensure error handling and method completion:\r\n```js\r\nconst data = await lastCustIdGrab();\r\n```","title":"Passing ID from one function to another with return","body":"<p><code>.get()</code> is asynchronous, and in your method you're not returning the promise. So even though the <code>then()</code> is executing, the value returned from the promise's resolve isn't being returned to <code>lastCustIdGrab()</code> invocation because the promise is never returned. So (switching it up to use async/await) try this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>exports.lastCustIdGrab = async () =&gt; {\n  let data = await db.collection('Customers')\n  .orderBy('createdAt', 'desc')\n  .limit(1)\n  .get();\n\n  let DOC = data.docs[0];\n  let ID = DOC.id;\n  return ID;\n  }\n}\n</code></pre>\n<p>And in your invocation wait for the promise to resolve to ensure error handling and method completion:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const data = await lastCustIdGrab();\n</code></pre>\n"}],"owner":{"account_id":8925344,"reputation":83,"user_id":6660118,"display_name":"JGC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68277276,"answer_count":2,"score":0,"last_activity_date":1683789621,"creation_date":1625601827,"question_id":68276782,"body_markdown":"I would like to validate and set a ID for a collection in firebase. Right now i am just trying to get an id number back from a collections query and send it to the function that needs it. Here is the function that needs the id#.\r\n\r\n    const data = lastCustIdGrab(); console.log(`Last number ${data}`);\r\n\r\nThis is the return sender. I can get the document Id in the console log but can&#39;t figure how to send it back.\r\n\r\n    exports.lastCustIdGrab = () =&gt; {\r\n      db.collection(&#39;Customers&#39;)\r\n      .orderBy(&#39;createdAt&#39;, &#39;desc&#39;)\r\n      .limit(1);\r\n      .get()\r\n        .then((data) =&gt; {\r\n            let DOC = data.docs[0];\r\n            let ID = DOC.id;\r\n            console.log(&quot;LOOOP &quot;,ID);\r\n       return ID;\r\n    })}\r\n\r\nThis gets me the id in the LOOOP output but won&#39;t return it! I know i can return data as i have tested with the arbitrary code below and it works. The return sends it back to be console logged in the &quot;last number&quot; output properly.\r\n\r\n    exports.lastCustIdGrab = () =&gt; {\r\n\tlet ID = 12345;\r\n\treturn ID;   \r\n}\r\n\r\nSo I&#39;m sure that i am just missing something simple. Thanks for the Help!\r\n ","title":"Passing ID from one function to another with return","body":"<p>I would like to validate and set a ID for a collection in firebase. Right now i am just trying to get an id number back from a collections query and send it to the function that needs it. Here is the function that needs the id#.</p>\n<pre><code>const data = lastCustIdGrab(); console.log(`Last number ${data}`);\n</code></pre>\n<p>This is the return sender. I can get the document Id in the console log but can't figure how to send it back.</p>\n<pre><code>exports.lastCustIdGrab = () =&gt; {\n  db.collection('Customers')\n  .orderBy('createdAt', 'desc')\n  .limit(1);\n  .get()\n    .then((data) =&gt; {\n        let DOC = data.docs[0];\n        let ID = DOC.id;\n        console.log(&quot;LOOOP &quot;,ID);\n   return ID;\n})}\n</code></pre>\n<p>This gets me the id in the LOOOP output but won't return it! I know i can return data as i have tested with the arbitrary code below and it works. The return sends it back to be console logged in the &quot;last number&quot; output properly.</p>\n<pre><code>exports.lastCustIdGrab = () =&gt; {\nlet ID = 12345;\nreturn ID;   \n</code></pre>\n<p>}</p>\n<p>So I'm sure that i am just missing something simple. Thanks for the Help!</p>\n"},{"tags":["java","concurrency","parallel-processing","java-8","java-stream"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":3,"creation_date":1498646133,"post_id":44800027,"comment_id":76580053,"body_markdown":"Your linked question already contains the answer (by the esteemed Brian Goetz) to your question in the comments.","body":"Your linked question already contains the answer (by the esteemed Brian Goetz) to your question in the comments."},{"owner":{"account_id":8864948,"reputation":173,"user_id":6620376,"display_name":"Disruptive"},"score":0,"creation_date":1498649336,"post_id":44800027,"comment_id":76582099,"body_markdown":"In the question linked no answer has been given, just a workaround with other facilities for other purpouses. I can&#39;t comment his answer because i&#39;m a new user, I was able just to open a new question","body":"In the question linked no answer has been given, just a workaround with other facilities for other purpouses. I can&#39;t comment his answer because i&#39;m a new user, I was able just to open a new question"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1498650022,"post_id":44800027,"comment_id":76582535,"body_markdown":"Well, as explained, you can&#39;t force it. Instead use an executor. Your workaround of adding redundant elements is a pretty horrible hack.","body":"Well, as explained, you can&#39;t force it. Instead use an executor. Your workaround of adding redundant elements is a pretty horrible hack."},{"owner":{"account_id":8864948,"reputation":173,"user_id":6620376,"display_name":"Disruptive"},"score":0,"creation_date":1498650203,"post_id":44800027,"comment_id":76582670,"body_markdown":"Thank you, but my point was using just the stream api","body":"Thank you, but my point was using just the stream api"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":3,"creation_date":1498650304,"post_id":44800027,"comment_id":76582748,"body_markdown":"I understand that, but sometimes you need to use the right tool for the right job, instead of insisting on using the wrong tool and hacking around just because you think you have to use the wrong tool. If all you have is a hammer, then everything looks like a nail, and it sounds like your hammer is the stream api.","body":"I understand that, but sometimes you need to use the right tool for the right job, instead of insisting on using the wrong tool and hacking around just because you think you have to use the wrong tool. If all you have is a hammer, then everything looks like a nail, and it sounds like your hammer is the stream api."},{"owner":{"account_id":8864948,"reputation":173,"user_id":6620376,"display_name":"Disruptive"},"score":0,"creation_date":1498650549,"post_id":44800027,"comment_id":76582929,"body_markdown":"To me it looks much more like an api limitation/misbehaviour instead of an api hammer. Api should provide functionalities, stopping a legit behaviour through an automatism that *should* help is something useful but that should be possibile to tune.","body":"To me it looks much more like an api limitation/misbehaviour instead of an api hammer. Api should provide functionalities, stopping a legit behaviour through an automatism that <i>should</i> help is something useful but that should be possibile to tune."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1498650744,"post_id":44800027,"comment_id":76583091,"body_markdown":"I&#39;m not talking about the possible limitations of the Stream API. I&#39;m talking about you choosing a suboptimal solution for the sole reason that you want to use Stream API. That&#39;s not a very good quality in a software developer.","body":"I&#39;m not talking about the possible limitations of the Stream API. I&#39;m talking about you choosing a suboptimal solution for the sole reason that you want to use Stream API. That&#39;s not a very good quality in a software developer."},{"owner":{"account_id":8864948,"reputation":173,"user_id":6620376,"display_name":"Disruptive"},"score":0,"creation_date":1498650928,"post_id":44800027,"comment_id":76583234,"body_markdown":"I&#39;m just trying to understand perfectly what are the stream api limits, and discovering if was actually possible triggering parallelism without caring of the stream size was one step. Deciding what is optimal or non optimal is a job that I leave to the people who know the code they are working on","body":"I&#39;m just trying to understand perfectly what are the stream api limits, and discovering if was actually possible triggering parallelism without caring of the stream size was one step. Deciding what is optimal or non optimal is a job that I leave to the people who know the code they are working on"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1498651268,"post_id":44800027,"comment_id":76583489,"body_markdown":"Well, [so far](http://download.java.net/java/jdk9/docs/api/java/util/stream/package-summary.html) it seems that you won&#39;t [get what you want](http://www.baeldung.com/java-9-stream-api) in JDK9 either.","body":"Well, <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">so far</a> it seems that you won&#39;t <a href=\"http://www.baeldung.com/java-9-stream-api\" rel=\"nofollow noreferrer\">get what you want</a> in JDK9 either."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1683789471,"creation_date":1498653724,"answer_id":44802784,"question_id":44800027,"body_markdown":"There seems to be a fundamental misunderstanding. The linked Q&amp;A discusses that the stream *apparently* doesn‚Äôt work in parallel, due to the OP not seeing the expected speedup. The conclusion is that there is *no benefit* in parallel processing if the workload is too small, *not* that there was an automatic fallback to sequential execution.\r\n\r\nIt‚Äôs actually the opposite. If you request parallel, you get parallel, even if it actually reduces the performance. The implementation does not switch to the potentially more efficient sequential execution in such cases.\r\n\r\nSo if you are confident that the per-element workload is high enough to justify the use of a parallel execution regardless of the small number of elements, you can simply request a parallel execution.\r\n\r\nAs can easily demonstrated:\r\n\r\n    Stream.of(1, 2).parallel()\r\n          .peek(x -&gt; System.out.println(&quot;processing &quot;+x+&quot; in &quot;+Thread.currentThread()))\r\n          .forEach(System.out::println);\r\n\r\n[On Ideone](http://ideone.com/WL4wka), it prints\r\n\r\n    processing 2 in Thread[main,5,main]\r\n    2\r\n    processing 1 in Thread[ForkJoinPool.commonPool-worker-1,5,main]\r\n    1\r\n\r\nbut the order of messages and details may vary. It may even be possible that in some environments, both task may happen to get executed by the same thread, if it can steal the second task before another thread is started to pick it up. But of course, if the tasks are expensive enough, this will not happen. The important point is that the overall workload has been split and enqueued to be potentially picked up by other worker threads.\r\n\r\nIf execution by a single thread happens in your environment for the simple example above, you may insert simulated workload like this:\r\n\r\n    Stream.of(1, 2).parallel()\r\n          .peek(x -&gt; System.out.println(&quot;processing &quot;+x+&quot; in &quot;+Thread.currentThread()))\r\n          .map(x -&gt; {\r\n               LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(3));\r\n               return x;\r\n            })\r\n          .forEach(System.out::println);\r\n\r\nThen, you may also see that the overall execution time will be shorter than ‚Äú*number of elements*‚Äù&#215;‚Äú*processing time per element*‚Äù if the ‚Äú*processing time per element*‚Äù is high enough.\r\n\r\n---\r\n\r\nUpdate: the misunderstanding might be cause by Brian Goetz‚Äô misleading statement: ‚ÄúIn your case, your input set is simply too small to be decomposed‚Äù.\r\n\r\nIt must be emphasized that this is not a general property of the Stream API, but the `Map` that has been used. A `HashMap` has a backing array and the entries are distributed within that array depending on their hash code. It might be the case that splitting the array into *n* ranges doesn‚Äôt lead to a balanced split of the contained element, especially, if there are only two. The implementors of the `HashMap`‚Äôs `Spliterator` considered searching the array for elements to get a perfectly balanced split to be too expensive, not that splitting two elements was not worth it.\r\n\r\nSince the `HashMap`‚Äôs default capacity is `16` and the example had only two elements, we can say that the map was oversized. Simply fixing that would also fix the example:\r\n\r\n    long start = System.nanoTime();\r\n\r\n    Map&lt;String, Supplier&lt;String&gt;&gt; input = new HashMap&lt;&gt;(2);\r\n    input.put(&quot;1&quot;, () -&gt; {\r\n        System.out.println(Thread.currentThread());\r\n        LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(2));\r\n        return &quot;a&quot;;\r\n    });\r\n    input.put(&quot;2&quot;, () -&gt; {\r\n        System.out.println(Thread.currentThread());\r\n        LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(2));\r\n        return &quot;b&quot;;\r\n    });\r\n    Map&lt;String, String&gt; results = input.keySet()\r\n            .parallelStream().collect(Collectors.toConcurrentMap(\r\n        key -&gt; key,\r\n        key -&gt; input.get(key).get()));\r\n\r\n    System.out.println(&quot;Time: &quot; + TimeUnit.NANOSECONDS.toMillis(System.nanoTime()- start));\r\n\r\non my machine, it prints\r\n\r\n    Thread[main,5,main]\r\n    Thread[ForkJoinPool.commonPool-worker-1,5,main]\r\n    Time: 2058\r\n\r\nThe conclusion is that the Stream implementation always tries to use parallel execution, if you request it, regardless of the input size. But it depends on the input‚Äôs *structure* how well the workload can be distributed to the worker threads. Things could be even worse, e.g. if you stream lines from a file.\r\n\r\nIf you think that the benefit of a balanced splitting is worth the cost of a copying step, you could also use `new ArrayList&lt;&gt;(input.keySet()).parallelStream()` instead of `input.keySet().parallelStream()`, as the distribution of elements within `ArrayList` always allows a perfectly balanced split.\r\n","title":"Is there a way to force parallelStream() to go parallel?","body":"<p>There seems to be a fundamental misunderstanding. The linked Q&amp;A discusses that the stream <em>apparently</em> doesn‚Äôt work in parallel, due to the OP not seeing the expected speedup. The conclusion is that there is <em>no benefit</em> in parallel processing if the workload is too small, <em>not</em> that there was an automatic fallback to sequential execution.</p>\n<p>It‚Äôs actually the opposite. If you request parallel, you get parallel, even if it actually reduces the performance. The implementation does not switch to the potentially more efficient sequential execution in such cases.</p>\n<p>So if you are confident that the per-element workload is high enough to justify the use of a parallel execution regardless of the small number of elements, you can simply request a parallel execution.</p>\n<p>As can easily demonstrated:</p>\n<pre><code>Stream.of(1, 2).parallel()\n      .peek(x -&gt; System.out.println(&quot;processing &quot;+x+&quot; in &quot;+Thread.currentThread()))\n      .forEach(System.out::println);\n</code></pre>\n<p><a href=\"http://ideone.com/WL4wka\" rel=\"nofollow noreferrer\">On Ideone</a>, it prints</p>\n<pre><code>processing 2 in Thread[main,5,main]\n2\nprocessing 1 in Thread[ForkJoinPool.commonPool-worker-1,5,main]\n1\n</code></pre>\n<p>but the order of messages and details may vary. It may even be possible that in some environments, both task may happen to get executed by the same thread, if it can steal the second task before another thread is started to pick it up. But of course, if the tasks are expensive enough, this will not happen. The important point is that the overall workload has been split and enqueued to be potentially picked up by other worker threads.</p>\n<p>If execution by a single thread happens in your environment for the simple example above, you may insert simulated workload like this:</p>\n<pre><code>Stream.of(1, 2).parallel()\n      .peek(x -&gt; System.out.println(&quot;processing &quot;+x+&quot; in &quot;+Thread.currentThread()))\n      .map(x -&gt; {\n           LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(3));\n           return x;\n        })\n      .forEach(System.out::println);\n</code></pre>\n<p>Then, you may also see that the overall execution time will be shorter than ‚Äú<em>number of elements</em>‚Äù√ó‚Äú<em>processing time per element</em>‚Äù if the ‚Äú<em>processing time per element</em>‚Äù is high enough.</p>\n<hr />\n<p>Update: the misunderstanding might be cause by Brian Goetz‚Äô misleading statement: ‚ÄúIn your case, your input set is simply too small to be decomposed‚Äù.</p>\n<p>It must be emphasized that this is not a general property of the Stream API, but the <code>Map</code> that has been used. A <code>HashMap</code> has a backing array and the entries are distributed within that array depending on their hash code. It might be the case that splitting the array into <em>n</em> ranges doesn‚Äôt lead to a balanced split of the contained element, especially, if there are only two. The implementors of the <code>HashMap</code>‚Äôs <code>Spliterator</code> considered searching the array for elements to get a perfectly balanced split to be too expensive, not that splitting two elements was not worth it.</p>\n<p>Since the <code>HashMap</code>‚Äôs default capacity is <code>16</code> and the example had only two elements, we can say that the map was oversized. Simply fixing that would also fix the example:</p>\n<pre><code>long start = System.nanoTime();\n\nMap&lt;String, Supplier&lt;String&gt;&gt; input = new HashMap&lt;&gt;(2);\ninput.put(&quot;1&quot;, () -&gt; {\n    System.out.println(Thread.currentThread());\n    LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(2));\n    return &quot;a&quot;;\n});\ninput.put(&quot;2&quot;, () -&gt; {\n    System.out.println(Thread.currentThread());\n    LockSupport.parkNanos(&quot;simulated workload&quot;, TimeUnit.SECONDS.toNanos(2));\n    return &quot;b&quot;;\n});\nMap&lt;String, String&gt; results = input.keySet()\n        .parallelStream().collect(Collectors.toConcurrentMap(\n    key -&gt; key,\n    key -&gt; input.get(key).get()));\n\nSystem.out.println(&quot;Time: &quot; + TimeUnit.NANOSECONDS.toMillis(System.nanoTime()- start));\n</code></pre>\n<p>on my machine, it prints</p>\n<pre><code>Thread[main,5,main]\nThread[ForkJoinPool.commonPool-worker-1,5,main]\nTime: 2058\n</code></pre>\n<p>The conclusion is that the Stream implementation always tries to use parallel execution, if you request it, regardless of the input size. But it depends on the input‚Äôs <em>structure</em> how well the workload can be distributed to the worker threads. Things could be even worse, e.g. if you stream lines from a file.</p>\n<p>If you think that the benefit of a balanced splitting is worth the cost of a copying step, you could also use <code>new ArrayList&lt;&gt;(input.keySet()).parallelStream()</code> instead of <code>input.keySet().parallelStream()</code>, as the distribution of elements within <code>ArrayList</code> always allows a perfectly balanced split.</p>\n"}],"owner":{"account_id":8864948,"reputation":173,"user_id":6620376,"display_name":"Disruptive"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4414,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"closed_date":1683792011,"accepted_answer_id":44802784,"answer_count":1,"score":10,"last_activity_date":1683789471,"creation_date":1498645895,"question_id":44800027,"body_markdown":"If the input size is too small the library [automatically serializes the execution of the maps in the stream][1], but this automation doesn&#39;t and can&#39;t take in account how heavy is the map operation. Is there a way to force `parallelStream()` to actually parallelize CPU *heavy* maps?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/25517706/java-8-parallel-streams-dont-appear-to-actually-be-working-in-parallel","title":"Is there a way to force parallelStream() to go parallel?","body":"<p>If the input size is too small the library <a href=\"https://stackoverflow.com/questions/25517706/java-8-parallel-streams-dont-appear-to-actually-be-working-in-parallel\">automatically serializes the execution of the maps in the stream</a>, but this automation doesn't and can't take in account how heavy is the map operation. Is there a way to force <code>parallelStream()</code> to actually parallelize CPU <em>heavy</em> maps?</p>\n"},{"tags":["java","database","postgresql","bulkinsert","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1683788748,"creation_date":1500895460,"answer_id":45279364,"question_id":45274242,"body_markdown":"jOOQ&#39;s [`DSLContext.batchInsert()`][1] creates one JDBC batch statement per set of consecutive records with identical generated SQL strings (the Javadoc doesn&#39;t formally define this, unfortunately).\r\n\r\nThis can turn into a problem when your records look like this:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    +------+--------+--------+\r\n    | COL1 | COL2   | COL3   |\r\n    +------+--------+--------+\r\n    | 1*   | {null} | {null} |\r\n    | 2*   | B*     | {null} |\r\n    | 3*   | {null} | C*     |\r\n    | 4*   | D*     | D*     |\r\n    +------+--------+--------+\r\n\r\n.. because in that case, the generated SQL strings will look like this:\r\n\r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    INSERT INTO t (col1) VALUES (?);\r\n    INSERT INTO t (col1, col2) VALUES (?, ?);\r\n    INSERT INTO t (col1, col3) VALUES (?, ?);\r\n    INSERT INTO t (col1, col2, col3) VALUES (?, ?, ?);\r\n\r\nThe reason for this default behaviour is the fact that this is the only way to guarantee ... `DEFAULT` behaviour. As in SQL `DEFAULT`. [I gave a rationale of this behaviour here][2].\r\n\r\nWith this in mind, and as each consecutive SQL string is different, the inserts unfortunately aren&#39;t batched as a single batch as you intended.\r\n\r\n### Solution 1: Make sure all changed flags are `true`\r\n\r\nOne way to enforce all `INSERT` statements to be the same is to set all changed flags of each individula record to `true`:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    for (Record r : records)\r\n        r.changed(true);\r\n\r\nNow, all SQL strings will be the same.\r\n\r\n### Solution 2: Use the `Loader` API\r\n\r\nInstead of batching, you could import the data (and specify batch sizes there). For details, see the manual&#39;s section about importing records:\r\n\r\nhttps://www.jooq.org/doc/latest/manual/sql-execution/importing/importing-records\r\n\r\n### Solution 3: Use a batch statement instead\r\n\r\nYour usage of `batchInsert()` is convenience that works when using `TableRecords`. But of course, you can generate an `INSERT` statement manually and batch the individual bind variables by using jOOQ&#39;s batch statement API:\r\n\r\nhttps://www.jooq.org/doc/latest/manual/sql-execution/batch-execution\r\n\r\n### A note on performance\r\n\r\nThere are a couple of open issues regarding the `DSLContext.batchInsert()` and similar API. The client side algorithm that generates SQL strings for each individual record is inefficient and might be changed in the future, relying on `changed()` flags directly. Some relevant issues:\r\n\r\n- [#4533][3]: DSLContext.batchInsert(), batchUpdate(), batchDelete(), etc. generate too many individual SQL statements\r\n- [#6294][4]: DSLContext.batchInsert() should take into consideration all Record.changed() flags\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#batchInsert-java.util.Collection-\r\n  [2]: https://dba.stackexchange.com/a/176595/2512\r\n  [3]: https://github.com/jOOQ/jOOQ/issues/4533\r\n  [4]: https://github.com/jOOQ/jOOQ/issues/6294","title":"Jooq batch record insert","body":"<p>jOOQ's <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#batchInsert-java.util.Collection-\" rel=\"nofollow noreferrer\"><code>DSLContext.batchInsert()</code></a> creates one JDBC batch statement per set of consecutive records with identical generated SQL strings (the Javadoc doesn't formally define this, unfortunately).</p>\n<p>This can turn into a problem when your records look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>+------+--------+--------+\n| COL1 | COL2   | COL3   |\n+------+--------+--------+\n| 1*   | {null} | {null} |\n| 2*   | B*     | {null} |\n| 3*   | {null} | C*     |\n| 4*   | D*     | D*     |\n+------+--------+--------+\n</code></pre>\n<p>.. because in that case, the generated SQL strings will look like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO t (col1) VALUES (?);\nINSERT INTO t (col1, col2) VALUES (?, ?);\nINSERT INTO t (col1, col3) VALUES (?, ?);\nINSERT INTO t (col1, col2, col3) VALUES (?, ?, ?);\n</code></pre>\n<p>The reason for this default behaviour is the fact that this is the only way to guarantee ... <code>DEFAULT</code> behaviour. As in SQL <code>DEFAULT</code>. <a href=\"https://dba.stackexchange.com/a/176595/2512\">I gave a rationale of this behaviour here</a>.</p>\n<p>With this in mind, and as each consecutive SQL string is different, the inserts unfortunately aren't batched as a single batch as you intended.</p>\n<h3>Solution 1: Make sure all changed flags are <code>true</code></h3>\n<p>One way to enforce all <code>INSERT</code> statements to be the same is to set all changed flags of each individula record to <code>true</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Record r : records)\n    r.changed(true);\n</code></pre>\n<p>Now, all SQL strings will be the same.</p>\n<h3>Solution 2: Use the <code>Loader</code> API</h3>\n<p>Instead of batching, you could import the data (and specify batch sizes there). For details, see the manual's section about importing records:</p>\n<p><a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/importing/importing-records\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-execution/importing/importing-records</a></p>\n<h3>Solution 3: Use a batch statement instead</h3>\n<p>Your usage of <code>batchInsert()</code> is convenience that works when using <code>TableRecords</code>. But of course, you can generate an <code>INSERT</code> statement manually and batch the individual bind variables by using jOOQ's batch statement API:</p>\n<p><a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/batch-execution\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-execution/batch-execution</a></p>\n<h3>A note on performance</h3>\n<p>There are a couple of open issues regarding the <code>DSLContext.batchInsert()</code> and similar API. The client side algorithm that generates SQL strings for each individual record is inefficient and might be changed in the future, relying on <code>changed()</code> flags directly. Some relevant issues:</p>\n<ul>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/4533\" rel=\"nofollow noreferrer\">#4533</a>: DSLContext.batchInsert(), batchUpdate(), batchDelete(), etc. generate too many individual SQL statements</li>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/6294\" rel=\"nofollow noreferrer\">#6294</a>: DSLContext.batchInsert() should take into consideration all Record.changed() flags</li>\n</ul>\n"}],"owner":{"account_id":2030745,"reputation":1718,"user_id":1814524,"accept_rate":83,"display_name":"hya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18182,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":45279364,"answer_count":1,"score":7,"last_activity_date":1683788748,"creation_date":1500878961,"question_id":45274242,"body_markdown":"I&#39;m currently trying to insert in batch many records (~2000) and Jooq&#39;s batchInsert is not doing what I want. \r\n\r\nI&#39;m transforming POJOs into UpdatableRecords and then I&#39;m performing batchInsert which is executing insert for each record. So Jooq is doing ~2000 queries for each batch insert and it&#39;s killing database performance.\r\n\r\nIt&#39;s executing this code (jooq&#39;s batch insert):\r\n\r\n    for (int i = 0; i &lt; records.length; i++) {\r\n                Configuration previous = ((AttachableInternal) records[i]).configuration();\r\n    \r\n                try {\r\n                    records[i].attach(local);\r\n                    executeAction(i);\r\n                }\r\n                catch (QueryCollectorSignal e) {\r\n                    Query query = e.getQuery();\r\n                    String sql = e.getSQL();\r\n    \r\n                    // Aggregate executable queries by identical SQL\r\n                    if (query.isExecutable()) {\r\n                        List&lt;Query&gt; list = queries.get(sql);\r\n    \r\n                        if (list == null) {\r\n                            list = new ArrayList&lt;Query&gt;();\r\n                            queries.put(sql, list);\r\n                        }\r\n    \r\n                        list.add(query);\r\n                    }\r\n                }\r\n                finally {\r\n                    records[i].attach(previous);\r\n                }\r\n            }\r\n\r\nI could just do it like this (because Jooq is doing same thing internally):\r\n\r\n    records.forEach(UpdatableRecord::insert);\r\n\r\ninstead of:\r\n\r\n    jooq.batchInsert(records).execute();\r\n\r\nHow can I tell Jooq to create new records in batch mode? Should I transform records into bind queries and then call batchInsert? Any ideas? ;)","title":"Jooq batch record insert","body":"<p>I'm currently trying to insert in batch many records (~2000) and Jooq's batchInsert is not doing what I want. </p>\n\n<p>I'm transforming POJOs into UpdatableRecords and then I'm performing batchInsert which is executing insert for each record. So Jooq is doing ~2000 queries for each batch insert and it's killing database performance.</p>\n\n<p>It's executing this code (jooq's batch insert):</p>\n\n<pre><code>for (int i = 0; i &lt; records.length; i++) {\n            Configuration previous = ((AttachableInternal) records[i]).configuration();\n\n            try {\n                records[i].attach(local);\n                executeAction(i);\n            }\n            catch (QueryCollectorSignal e) {\n                Query query = e.getQuery();\n                String sql = e.getSQL();\n\n                // Aggregate executable queries by identical SQL\n                if (query.isExecutable()) {\n                    List&lt;Query&gt; list = queries.get(sql);\n\n                    if (list == null) {\n                        list = new ArrayList&lt;Query&gt;();\n                        queries.put(sql, list);\n                    }\n\n                    list.add(query);\n                }\n            }\n            finally {\n                records[i].attach(previous);\n            }\n        }\n</code></pre>\n\n<p>I could just do it like this (because Jooq is doing same thing internally):</p>\n\n<pre><code>records.forEach(UpdatableRecord::insert);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>jooq.batchInsert(records).execute();\n</code></pre>\n\n<p>How can I tell Jooq to create new records in batch mode? Should I transform records into bind queries and then call batchInsert? Any ideas? ;)</p>\n"},{"tags":["java","classloader","classloading"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1683639851,"post_id":76196521,"comment_id":134395165,"body_markdown":"Is that the entire exception? Usually, a `NoClassDefFoundError` is &quot;Caused by:&quot; some `ClassNotFoundException`, whose stacktrace would yield valuable clues ...","body":"Is that the entire exception? Usually, a <code>NoClassDefFoundError</code> is &quot;Caused by:&quot; some <code>ClassNotFoundException</code>, whose stacktrace would yield valuable clues ..."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1683727083,"creation_date":1683727083,"answer_id":76219307,"question_id":76196521,"body_markdown":"A `NoClassDefFoundError` indicates that a class, who was successfully loaded from some `ClassLoader`, is statically referring to another class, whose definition that `ClassLoader` can not find. \r\n\r\nThat is, if a class A refers to a class B, the runtime does\r\n\r\n```\r\nA.class.getClassLoader().loadClass(&quot;the.fully.qualified.name.of.B&quot;);\r\n```\r\n\r\nSuppose you have the following ClassLoader hierarchy:\r\n\r\n```\r\n+---------+\r\n| parent  |\r\n+---------+\r\n| B.class |\r\n+---------+\r\n     ^\r\n     |\r\n+---------+\r\n| child   |\r\n+---------+\r\n| A.class |\r\n| C.class |\r\n+---------+\r\n```\r\n\r\nwhere `A` refers to `B`, and `B` refers to `C`, and we do `child.loadClass(&quot;A&quot;)`. Then, the following happens:\r\n\r\n* `child` is asked to load `A`, finds its definition, defines the class, and then proceecds to resolve its references:\r\n  * `child` is asked to load `B`, and can not find its definition. Therefore,\r\n    * `parent` is asked to load `B`, finds its definition, defines the class, and then proceeds to resolve its references\r\n      * `parent` is asked to load `C`, can not find its definition, and throws a ClassNotFoundException\r\n      \r\n      since the reference to C could not be resolved, a NoClassDefFoundError for `C` is thrown\r\n\r\nThat is, loading `A` from `child` fails with a `NoClassDefFoundError` for `C`, even though `child` has a definition for `C`.\r\n\r\n&gt; I was expecting the references to library classes to be resolved correctly because the class loader of the Bootstrap class should delegate to the library class loader, which I confirmed to have successfully &#39;loaded&#39; the libraries.\r\n\r\nAs we&#39;ve just seen, that doesn&#39;t follow. Each class resolves its dependencies using its defining class loader, not the class loader that originally triggered the loading attempt.\r\n\r\nSo, how could this have happened? You have set up the following class loader hierarchy:\r\n\r\n```\r\n+-----------------+\r\n| rootLoader      |\r\n+-----------------+\r\n| Main.class      |\r\n| Bootstrap.class |\r\n| Y.class         |\r\n+-----------------+\r\n         ^\r\n         |\r\n+---------------------------+\r\n| libraryLoader             |\r\n+---------------------------+\r\n| CredentialsProvider.class |\r\n| X.class                   |\r\n+---------------------------+\r\n         ^\r\n         |\r\n+-----------------+\r\n| appLoader       |\r\n+-----------------+\r\n| Bootstrap.class |\r\n| Y.class         |\r\n+-----------------+\r\n```\r\n\r\nThat is, your Bootstrap classes are on the classpath twice, in two different `ClassLoaders`. You&#39;re probably hoping that the extra classes in `rootLoader` do no harm, because the `appLoader` prefers its own definition over that of its ancestors. However, the `libraryLoader` doesn&#39;t see the definitions in the `appLoader`, and will delegate to the `rootLoader`. \r\n\r\nSuppose that `Bootstrap` uses `X`, who uses `Y`, who uses `CredentialsProvider`. Then, the following happens:\r\n\r\n* Bootstrap is defined by appLoader\r\n* X is defined by libraryLoader\r\n* Y is defined by rootLoader (!)\r\n* CredentialsProvider is not found by rootLoader\r\n\r\nThat is, the extra class definitions obscure the origin of dependency problems. If a library class incorrectly depends on an application class, you don&#39;t get a NoClassDefFoundError for that application class, but a NoClassDefFoundError for one of its library dependencies. And if there are no library dependencies, the class will be loaded a second time, and you will have separate classes with the same name in the system, which can cause really hard to diagnose issues (for instance: why is that static field having different values depending on who uses it?).\r\n\r\nFor the sake of your sanity, and those who come after you, I therefore recommend that you do not put your application classes into two different class loaders in the hierarchy.\r\n\r\nPS: I can&#39;t tell you the identity of X and Y, but you should be able to find them as follows:\r\n\r\n1. determine the runtime type of `rootLoader`\r\n2. create a conditional breakpoint in its `loadClass()` implementation that triggers if the argument ends with `&quot;CredentialsProvider&quot;`\r\n3. once your program hits the breakpoint, inspect the stack trace. You should see the recursive calls to loadClass, and can check their local variables to identify the classes in the dependency chain and the class loaders involved.\r\n\r\n(note that conditional breakpoints in library code can be a bit brittle. For instance, when I just tested this in a toy example, I had to briefly halt execution with a normal breakpoint, to give the conditional breakpoint enough time to hook into the ClassLoader code)\r\n\r\nAlternatively, you could write your own class for `libraryLoader`, which throws, logs, or halt in a breakpoint whenever it is asked for classes that should come from `appLoader`.","title":"Error when trying to use dynamically loaded libraries","body":"<p>A <code>NoClassDefFoundError</code> indicates that a class, who was successfully loaded from some <code>ClassLoader</code>, is statically referring to another class, whose definition that <code>ClassLoader</code> can not find.</p>\n<p>That is, if a class A refers to a class B, the runtime does</p>\n<pre><code>A.class.getClassLoader().loadClass(&quot;the.fully.qualified.name.of.B&quot;);\n</code></pre>\n<p>Suppose you have the following ClassLoader hierarchy:</p>\n<pre><code>+---------+\n| parent  |\n+---------+\n| B.class |\n+---------+\n     ^\n     |\n+---------+\n| child   |\n+---------+\n| A.class |\n| C.class |\n+---------+\n</code></pre>\n<p>where <code>A</code> refers to <code>B</code>, and <code>B</code> refers to <code>C</code>, and we do <code>child.loadClass(&quot;A&quot;)</code>. Then, the following happens:</p>\n<ul>\n<li><code>child</code> is asked to load <code>A</code>, finds its definition, defines the class, and then proceecds to resolve its references:\n<ul>\n<li><code>child</code> is asked to load <code>B</code>, and can not find its definition. Therefore,\n<ul>\n<li><p><code>parent</code> is asked to load <code>B</code>, finds its definition, defines the class, and then proceeds to resolve its references</p>\n<ul>\n<li><code>parent</code> is asked to load <code>C</code>, can not find its definition, and throws a ClassNotFoundException</li>\n</ul>\n<p>since the reference to C could not be resolved, a NoClassDefFoundError for <code>C</code> is thrown</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>That is, loading <code>A</code> from <code>child</code> fails with a <code>NoClassDefFoundError</code> for <code>C</code>, even though <code>child</code> has a definition for <code>C</code>.</p>\n<blockquote>\n<p>I was expecting the references to library classes to be resolved correctly because the class loader of the Bootstrap class should delegate to the library class loader, which I confirmed to have successfully 'loaded' the libraries.</p>\n</blockquote>\n<p>As we've just seen, that doesn't follow. Each class resolves its dependencies using its defining class loader, not the class loader that originally triggered the loading attempt.</p>\n<p>So, how could this have happened? You have set up the following class loader hierarchy:</p>\n<pre><code>+-----------------+\n| rootLoader      |\n+-----------------+\n| Main.class      |\n| Bootstrap.class |\n| Y.class         |\n+-----------------+\n         ^\n         |\n+---------------------------+\n| libraryLoader             |\n+---------------------------+\n| CredentialsProvider.class |\n| X.class                   |\n+---------------------------+\n         ^\n         |\n+-----------------+\n| appLoader       |\n+-----------------+\n| Bootstrap.class |\n| Y.class         |\n+-----------------+\n</code></pre>\n<p>That is, your Bootstrap classes are on the classpath twice, in two different <code>ClassLoaders</code>. You're probably hoping that the extra classes in <code>rootLoader</code> do no harm, because the <code>appLoader</code> prefers its own definition over that of its ancestors. However, the <code>libraryLoader</code> doesn't see the definitions in the <code>appLoader</code>, and will delegate to the <code>rootLoader</code>.</p>\n<p>Suppose that <code>Bootstrap</code> uses <code>X</code>, who uses <code>Y</code>, who uses <code>CredentialsProvider</code>. Then, the following happens:</p>\n<ul>\n<li>Bootstrap is defined by appLoader</li>\n<li>X is defined by libraryLoader</li>\n<li>Y is defined by rootLoader (!)</li>\n<li>CredentialsProvider is not found by rootLoader</li>\n</ul>\n<p>That is, the extra class definitions obscure the origin of dependency problems. If a library class incorrectly depends on an application class, you don't get a NoClassDefFoundError for that application class, but a NoClassDefFoundError for one of its library dependencies. And if there are no library dependencies, the class will be loaded a second time, and you will have separate classes with the same name in the system, which can cause really hard to diagnose issues (for instance: why is that static field having different values depending on who uses it?).</p>\n<p>For the sake of your sanity, and those who come after you, I therefore recommend that you do not put your application classes into two different class loaders in the hierarchy.</p>\n<p>PS: I can't tell you the identity of X and Y, but you should be able to find them as follows:</p>\n<ol>\n<li>determine the runtime type of <code>rootLoader</code></li>\n<li>create a conditional breakpoint in its <code>loadClass()</code> implementation that triggers if the argument ends with <code>&quot;CredentialsProvider&quot;</code></li>\n<li>once your program hits the breakpoint, inspect the stack trace. You should see the recursive calls to loadClass, and can check their local variables to identify the classes in the dependency chain and the class loaders involved.</li>\n</ol>\n<p>(note that conditional breakpoints in library code can be a bit brittle. For instance, when I just tested this in a toy example, I had to briefly halt execution with a normal breakpoint, to give the conditional breakpoint enough time to hook into the ClassLoader code)</p>\n<p>Alternatively, you could write your own class for <code>libraryLoader</code>, which throws, logs, or halt in a breakpoint whenever it is asked for classes that should come from <code>appLoader</code>.</p>\n"},{"tags":[],"owner":{"account_id":28540189,"reputation":43,"user_id":21846363,"display_name":"asdafadsfadsfdaf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683788554,"creation_date":1683788554,"answer_id":76224906,"question_id":76196521,"body_markdown":"So I ended up figuring it out by `meriton`s answer. It wasn&#39;t a problem with the hyarchy, rather it was the fact that the URLClassLoader for some reason prefers ancestors for `findClass`. I ended up on [this question][1] which had an answer I ended up copying (the `ParentLastURLClassLoader`) and it worked.\r\n\r\nEssentially the problem was that, since the `URLClassLoader` for `appLoader` delegated to the root class loader first, the `Bootstrap` class was loaded by the root loader. This meant it was not under the library class loader in the class loading chain, not giving it access to those classes.\r\n\r\n  [1]: https://stackoverflow.com/questions/5445511/how-do-i-create-a-parent-last-child-first-classloader-in-java-or-how-to-overr?rq=1","title":"Error when trying to use dynamically loaded libraries","body":"<p>So I ended up figuring it out by <code>meriton</code>s answer. It wasn't a problem with the hyarchy, rather it was the fact that the URLClassLoader for some reason prefers ancestors for <code>findClass</code>. I ended up on <a href=\"https://stackoverflow.com/questions/5445511/how-do-i-create-a-parent-last-child-first-classloader-in-java-or-how-to-overr?rq=1\">this question</a> which had an answer I ended up copying (the <code>ParentLastURLClassLoader</code>) and it worked.</p>\n<p>Essentially the problem was that, since the <code>URLClassLoader</code> for <code>appLoader</code> delegated to the root class loader first, the <code>Bootstrap</code> class was loaded by the root loader. This meant it was not under the library class loader in the class loading chain, not giving it access to those classes.</p>\n"}],"owner":{"account_id":28540189,"reputation":43,"user_id":21846363,"display_name":"asdafadsfadsfdaf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683788554,"creation_date":1683498189,"question_id":76196521,"body_markdown":"I&#39;m trying to dynamically load libraries instead of shading them into my JAR to reduce file size. It&#39;s a standalone application with a `Bootstrap` class and a `Main` class. The main class is responsible for loading libraries and calling the bootstrap class&#39; `execute(...)` method.\r\n\r\nThe downloading of the artifacts and loading of the library classes using `Class.forName(class, true, libraryLoader)` works, but when I try to load the `Bootstrap` class it can&#39;t find the class definitions for the library classes.\r\n\r\nHere is how I&#39;m currently trying to achieve this:\r\n```java\r\n//////// Main.java /////////\r\n/* ... public static void main(String[] args) { */\r\n\r\n// download libraries\r\n// these URLs reference the local JAR files downloaded\r\n// i&#39;m not going to get into detail on how i&#39;m doing this right now, as this works\r\nURL[] libraryUrls = ...;\r\n\r\n// create parent loader for libraries\r\nfinal ClassLoader rootLoader = Main.class.getClassLoader(); // app class loader\r\nClassLoader libraryLoader = new DelegatingClassLoader(new URLClassLoader(\r\n        libraryUrls,\r\n        rootLoader\r\n), rootLoader);\r\n\r\n/* this passes, so the libraries are successfully loaded onto the loaders ucp */\r\nClass.forName(&quot;org.eclipse.jgit.transport.CredentialsProvider&quot;, true, libraryLoader);\r\n\r\n// find URL for JAR of bootstrap class\r\nProtectionDomain domain = Main.class.getProtectionDomain();\r\nCodeSource source = domain.getCodeSource();\r\nURL file = source.getLocation();\r\n\r\n// create child loader with our JAR file\r\nClassLoader appLoader = new DelegatingClassLoader(new URLClassLoader(\r\n        new URL[] { file }, libraryLoader), libraryLoader);\r\n\r\n// load bootstrap class and execute\r\nClass&lt;?&gt; bootstrap = Class.forName( // the error occurs here\r\n        &quot;my.package.Bootstrap&quot;,\r\n        /* initialize */ true,\r\n        appLoader\r\n);\r\n\r\nbootstrap.getMethod(&quot;execute&quot;, String[].class)\r\n        .invoke(null, (Object) args);\r\n\r\n/* } ... */\r\n```\r\n\r\nThe `DelegatingClassLoader` first tries to load a class through the delegate and if that fails delegates to the parent. [Here](https://pastes.dev/SHfmYFHRxQ) is the exact source.\r\n\r\nThe specific error I get:\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/eclipse/jgit/transport/CredentialsProvider \r\n \tat java.base/java.lang.Class.forName0(Native Method) \r\n \tat java.base/java.lang.Class.forName(Class.java:467) \r\n \tat my.package.Main.main(Main.java:108)\r\n        // line 108 is the line where i call Class.forName(&quot;my.package.Bootstrap, ...) \r\n```\r\n\r\nI was expecting the references to library classes to be resolved correctly because the class loader of the `Bootstrap` class should delegate to the library class loader, which I confirmed to have successfully &#39;loaded&#39; the libraries.","title":"Error when trying to use dynamically loaded libraries","body":"<p>I'm trying to dynamically load libraries instead of shading them into my JAR to reduce file size. It's a standalone application with a <code>Bootstrap</code> class and a <code>Main</code> class. The main class is responsible for loading libraries and calling the bootstrap class' <code>execute(...)</code> method.</p>\n<p>The downloading of the artifacts and loading of the library classes using <code>Class.forName(class, true, libraryLoader)</code> works, but when I try to load the <code>Bootstrap</code> class it can't find the class definitions for the library classes.</p>\n<p>Here is how I'm currently trying to achieve this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//////// Main.java /////////\n/* ... public static void main(String[] args) { */\n\n// download libraries\n// these URLs reference the local JAR files downloaded\n// i'm not going to get into detail on how i'm doing this right now, as this works\nURL[] libraryUrls = ...;\n\n// create parent loader for libraries\nfinal ClassLoader rootLoader = Main.class.getClassLoader(); // app class loader\nClassLoader libraryLoader = new DelegatingClassLoader(new URLClassLoader(\n        libraryUrls,\n        rootLoader\n), rootLoader);\n\n/* this passes, so the libraries are successfully loaded onto the loaders ucp */\nClass.forName(&quot;org.eclipse.jgit.transport.CredentialsProvider&quot;, true, libraryLoader);\n\n// find URL for JAR of bootstrap class\nProtectionDomain domain = Main.class.getProtectionDomain();\nCodeSource source = domain.getCodeSource();\nURL file = source.getLocation();\n\n// create child loader with our JAR file\nClassLoader appLoader = new DelegatingClassLoader(new URLClassLoader(\n        new URL[] { file }, libraryLoader), libraryLoader);\n\n// load bootstrap class and execute\nClass&lt;?&gt; bootstrap = Class.forName( // the error occurs here\n        &quot;my.package.Bootstrap&quot;,\n        /* initialize */ true,\n        appLoader\n);\n\nbootstrap.getMethod(&quot;execute&quot;, String[].class)\n        .invoke(null, (Object) args);\n\n/* } ... */\n</code></pre>\n<p>The <code>DelegatingClassLoader</code> first tries to load a class through the delegate and if that fails delegates to the parent. <a href=\"https://pastes.dev/SHfmYFHRxQ\" rel=\"nofollow noreferrer\">Here</a> is the exact source.</p>\n<p>The specific error I get:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/eclipse/jgit/transport/CredentialsProvider \n    at java.base/java.lang.Class.forName0(Native Method) \n    at java.base/java.lang.Class.forName(Class.java:467) \n    at my.package.Main.main(Main.java:108)\n        // line 108 is the line where i call Class.forName(&quot;my.package.Bootstrap, ...) \n</code></pre>\n<p>I was expecting the references to library classes to be resolved correctly because the class loader of the <code>Bootstrap</code> class should delegate to the library class loader, which I confirmed to have successfully 'loaded' the libraries.</p>\n"},{"tags":["java","autodesk-forge","autodesk-viewer","autodesk-model-derivative"],"answers":[{"tags":[],"owner":{"account_id":6212245,"reputation":8513,"user_id":4838205,"accept_rate":82,"display_name":"Augusto Goncalves"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1468589295,"creation_date":1468517028,"answer_id":38380497,"question_id":38378629,"body_markdown":"Yes it is, use the [Extractor][1] to generate the files you need &quot;offline&quot; (on your server). See instructions.\r\n\r\n**EDIT**\r\n\r\nUpdated [ReadMe link][2] (seem comments).\r\n\r\n\r\n  [1]: http://extract.autodesk.io/\r\n  [2]: https://github.com/cyrillef/extract.autodesk.io/blob/master/README.md","title":"Autodesk Forge Viewer storing files on local server?","body":"<p>Yes it is, use the <a href=\"http://extract.autodesk.io/\" rel=\"nofollow\">Extractor</a> to generate the files you need \"offline\" (on your server). See instructions.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Updated <a href=\"https://github.com/cyrillef/extract.autodesk.io/blob/master/README.md\" rel=\"nofollow\">ReadMe link</a> (seem comments).</p>\n"}],"owner":{"account_id":8807471,"reputation":323,"user_id":6581594,"accept_rate":60,"display_name":"Greg Bluntzer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1846,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":38380497,"answer_count":1,"score":1,"last_activity_date":1683788219,"creation_date":1468510972,"question_id":38378629,"body_markdown":"Can anyone tell me if this is possible with Autodesk Forge Viewer and Model Derivative\r\n\r\n- User has dwg and rvt files \r\n- Those files are sent to the Autodesk buckets\r\n- Those files are then sent jobs to convert them to formats that the autodesk forge viewer can display (f2d,svf)\r\n- The converted files are downloaded\r\n\r\nIs it then possible to store those converted files on the local server and still have the autodesk forge viewer display them?\r\n\r\nAny links or docs on the matter would be appreciated. Also we are a java devs","title":"Autodesk Forge Viewer storing files on local server?","body":"<p>Can anyone tell me if this is possible with Autodesk Forge Viewer and Model Derivative</p>\n\n<ul>\n<li>User has dwg and rvt files </li>\n<li>Those files are sent to the Autodesk buckets</li>\n<li>Those files are then sent jobs to convert them to formats that the autodesk forge viewer can display (f2d,svf)</li>\n<li>The converted files are downloaded</li>\n</ul>\n\n<p>Is it then possible to store those converted files on the local server and still have the autodesk forge viewer display them?</p>\n\n<p>Any links or docs on the matter would be appreciated. Also we are a java devs</p>\n"},{"tags":["java","cassandra"],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643374857,"creation_date":1642727405,"answer_id":70795248,"question_id":70794850,"body_markdown":"There isn&#39;t any magic that happens here since Cassandra is simply using the Java IO utilities so this is a low-level filesystem issue.\r\n\r\nOne of the things to check for is whether the existing commit logs in the directory are owned by a different user that the Cassandra process does not have access to. For example, `CommitLog-6-1642719269564.log` is owned by `root` but the C* process is running with `cassandra`. If so, you will need to change the file ownership. Cheers!\r\n\r\n**[UPDATE]** Java 11 is only supported from Cassandra 4.x. Earlier versions of Cassandra only work with Java 8.","title":"Getting AccessDeniedException when running embedded cassandra with Azul jdk 11","body":"<p>There isn't any magic that happens here since Cassandra is simply using the Java IO utilities so this is a low-level filesystem issue.</p>\n<p>One of the things to check for is whether the existing commit logs in the directory are owned by a different user that the Cassandra process does not have access to. For example, <code>CommitLog-6-1642719269564.log</code> is owned by <code>root</code> but the C* process is running with <code>cassandra</code>. If so, you will need to change the file ownership. Cheers!</p>\n<p><strong>[UPDATE]</strong> Java 11 is only supported from Cassandra 4.x. Earlier versions of Cassandra only work with Java 8.</p>\n"},{"tags":[],"owner":{"account_id":7976164,"reputation":1,"user_id":6045462,"display_name":"T. Huber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683787405,"creation_date":1683787405,"answer_id":76224799,"question_id":70794850,"body_markdown":"Check the test dependency tree for version downgrades with `gradle dependencies`. My Apache Cassandra and Java Native Access libs were getting downgraded by Spring Boot 2.2. Fixing the JNA version took care of the AccessDeniedException error in Windows.\r\n\r\nAdditionally, CassandraUnit uses a JDK-internal Cleaner class that is restricted in Java 11. You can add a JVM arg in the test task(s) to make it available again.\r\n\r\nThe relevant build.gradle snippets are shown below.\r\n\r\n```groovy\r\ndependencies {\r\n    ...\r\n    testImplementation &#39;org.cassandraunit:cassandra-unit:4.3.1.0&#39;\r\n    testImplementation &#39;com.datastax.oss:java-driver-core:4.11.3&#39;\r\n    testImplementation &#39;org.apache.cassandra:cassandra-all:4.0.8&#39; // override 3.x from spring-data-cassandra\r\n    testImplementation &#39;net.java.dev.jna:jna:5.13.0&#39;              // override 4.5 from spring-boot-dependencies\r\n}\r\ntasks.withType(Test) {\r\n    // allow cassandraunit to use jdk11 internal Cleaner\r\n    jvmArgs &#39;--add-exports&#39;, &#39;java.base/jdk.internal.ref=ALL-UNNAMED&#39;\r\n}\r\n```\r\n","title":"Getting AccessDeniedException when running embedded cassandra with Azul jdk 11","body":"<p>Check the test dependency tree for version downgrades with <code>gradle dependencies</code>. My Apache Cassandra and Java Native Access libs were getting downgraded by Spring Boot 2.2. Fixing the JNA version took care of the AccessDeniedException error in Windows.</p>\n<p>Additionally, CassandraUnit uses a JDK-internal Cleaner class that is restricted in Java 11. You can add a JVM arg in the test task(s) to make it available again.</p>\n<p>The relevant build.gradle snippets are shown below.</p>\n<pre><code>dependencies {\n    ...\n    testImplementation 'org.cassandraunit:cassandra-unit:4.3.1.0'\n    testImplementation 'com.datastax.oss:java-driver-core:4.11.3'\n    testImplementation 'org.apache.cassandra:cassandra-all:4.0.8' // override 3.x from spring-data-cassandra\n    testImplementation 'net.java.dev.jna:jna:5.13.0'              // override 4.5 from spring-boot-dependencies\n}\ntasks.withType(Test) {\n    // allow cassandraunit to use jdk11 internal Cleaner\n    jvmArgs '--add-exports', 'java.base/jdk.internal.ref=ALL-UNNAMED'\n}\n</code></pre>\n"}],"owner":{"account_id":1382967,"reputation":1730,"user_id":1315599,"accept_rate":56,"display_name":"yu.pitomets"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":913,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70795248,"answer_count":2,"score":2,"last_activity_date":1683787405,"creation_date":1642723246,"question_id":70794850,"body_markdown":"I am trying to run embedded Cassandra using cassandra-unit library in **Azul JDK 11** with Gradle project and getting following AccessDenindException. I&#39;ve checked the permissions of the `build` folder it is not readonly and there are some files already. Don&#39;t have anything else in the project which might causing the issue.\r\n\r\n```\r\norg.apache.cassandra.io.FSWriteError: java.nio.file.AccessDeniedException: build\\embeddedCassandra\\commitlog\\CommitLog-6-1642719269564.log\r\n\tat org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:143)\r\n\tat org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:160)\r\n\tat org.apache.cassandra.db.commitlog.CommitLogSegment.discard(CommitLogSegment.java:409)\r\n```\r\n\r\n**Java class**\r\n```java\r\nEmbeddedCassandraServerHelper.startEmbeddedCassandra();\r\n```\r\n\r\n**build.gradle**\r\n\r\n```gradle\r\ntestCompile &#39;org.cassandraunit:cassandra-unit:4.3.1.0&#39;\r\ntestCompile &#39;com.datastax.oss:java-driver-core:4.13.0&#39;\r\n```","title":"Getting AccessDeniedException when running embedded cassandra with Azul jdk 11","body":"<p>I am trying to run embedded Cassandra using cassandra-unit library in <strong>Azul JDK 11</strong> with Gradle project and getting following AccessDenindException. I've checked the permissions of the <code>build</code> folder it is not readonly and there are some files already. Don't have anything else in the project which might causing the issue.</p>\n<pre><code>org.apache.cassandra.io.FSWriteError: java.nio.file.AccessDeniedException: build\\embeddedCassandra\\commitlog\\CommitLog-6-1642719269564.log\n    at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:143)\n    at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:160)\n    at org.apache.cassandra.db.commitlog.CommitLogSegment.discard(CommitLogSegment.java:409)\n</code></pre>\n<p><strong>Java class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>EmbeddedCassandraServerHelper.startEmbeddedCassandra();\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>testCompile 'org.cassandraunit:cassandra-unit:4.3.1.0'\ntestCompile 'com.datastax.oss:java-driver-core:4.13.0'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683787383,"creation_date":1683787383,"answer_id":76224797,"question_id":76208703,"body_markdown":"You can attach file in Postman.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EQ6oy.gif","title":"Spring Controller that accepts a HashMap of different type of Objects","body":"<p>You can attach file in Postman.\n<a href=\"https://i.stack.imgur.com/EQ6oy.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQ6oy.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683787383,"creation_date":1683630773,"question_id":76208703,"body_markdown":"I need to make a POST Controller in Java Springboot which will accept a hashmap of objects.\r\nThe datatypes for each value in the key-value pair can be different\r\n\r\n    {\r\n      &quot;myFile&quot; : MultipartFile\r\n      &quot;metadata&quot; : Java POJO in string format\r\n    }\r\nI have written the controller in this way:\r\n\r\n    public ResponseEntity&lt;String&gt; uploadFile2(@RequestBody HashMap&lt;String, Object&gt; requestMap) {\r\n        \r\n        return new ResponseEntity&lt;&gt;(&quot;File uploaded successfully!&quot;, HttpStatus.OK);\r\n      }\r\n\r\nHow do I test this controller through POSTMAN? I have to bind an actual physical file and a json string to the RequestBody","title":"Spring Controller that accepts a HashMap of different type of Objects","body":"<p>I need to make a POST Controller in Java Springboot which will accept a hashmap of objects.\nThe datatypes for each value in the key-value pair can be different</p>\n<pre><code>{\n  &quot;myFile&quot; : MultipartFile\n  &quot;metadata&quot; : Java POJO in string format\n}\n</code></pre>\n<p>I have written the controller in this way:</p>\n<pre><code>public ResponseEntity&lt;String&gt; uploadFile2(@RequestBody HashMap&lt;String, Object&gt; requestMap) {\n    \n    return new ResponseEntity&lt;&gt;(&quot;File uploaded successfully!&quot;, HttpStatus.OK);\n  }\n</code></pre>\n<p>How do I test this controller through POSTMAN? I have to bind an actual physical file and a json string to the RequestBody</p>\n"},{"tags":["java","spring","postgresql","spring-boot","docker"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1664969887,"post_id":73959505,"comment_id":130588905,"body_markdown":"when you say pgAdmin connection works, do you mean you are connecting via `jdbc:postgresql://host.docker.internal:5430/endlessblow_db` url?","body":"when you say pgAdmin connection works, do you mean you are connecting via <code>jdbc:postgresql:&#47;&#47;host.docker.internal:5430&#47;endlessblow_db</code> url?"},{"owner":{"display_name":"user19516326"},"score":0,"creation_date":1664970224,"post_id":73959505,"comment_id":130588999,"body_markdown":"In pgAdmin I am just putting those connection values into specific fields I mean host, db, user and password. I am not putting this whole String anywhere here","body":"In pgAdmin I am just putting those connection values into specific fields I mean host, db, user and password. I am not putting this whole String anywhere here"}],"answers":[{"tags":[],"owner":{"account_id":2876145,"reputation":2806,"user_id":2468608,"display_name":"IamK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664981465,"creation_date":1664968764,"answer_id":73959618,"question_id":73959505,"body_markdown":"Change \r\n\r\n    spring.datasource.url=jdbc:postgresql://host.docker.internal:5430/endlessblow_db\r\n\r\nthis to \r\n\r\n    spring.datasource.url=jdbc:postgresql://endlessblowdb_container:5432/endlessblow_db\r\n\r\n","title":"Docker postgres java.io.EOFException: null when trying to connect","body":"<p>Change</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://host.docker.internal:5430/endlessblow_db\n</code></pre>\n<p>this to</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://endlessblowdb_container:5432/endlessblow_db\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26552141,"reputation":61,"user_id":20181285,"display_name":"Sk Nur Hasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665550865,"creation_date":1665550865,"answer_id":74036699,"question_id":73959505,"body_markdown":"This error is coming for wrong database password \r\n\r\nand application properties will be : \r\n\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/&lt;database name&gt;\r\n    spring.datasource.username=&lt;database user name&gt;\r\n    spring.datasource.password=&lt;database password&gt;\r\nDialect for postgresSQL :\r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\r\n\r\nDialect for MySQL : \r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect\r\n\r\nTry this once.","title":"Docker postgres java.io.EOFException: null when trying to connect","body":"<p>This error is coming for wrong database password</p>\n<p>and application properties will be :</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/&lt;database name&gt;\nspring.datasource.username=&lt;database user name&gt;\nspring.datasource.password=&lt;database password&gt;\n</code></pre>\n<p>Dialect for postgresSQL :</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>Dialect for MySQL :</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect\n</code></pre>\n<p>Try this once.</p>\n"},{"tags":[],"owner":{"account_id":4488682,"reputation":93,"user_id":4055672,"display_name":"sudeep biswas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683786936,"creation_date":1683786936,"answer_id":76224754,"question_id":73959505,"body_markdown":"append below in your connection.\r\n?gssEncMode=disable","title":"Docker postgres java.io.EOFException: null when trying to connect","body":"<p>append below in your connection.\n?gssEncMode=disable</p>\n"}],"owner":{"display_name":"user19516326"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2071,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1683786936,"creation_date":1664968081,"question_id":73959505,"body_markdown":"I have my Dockerfile and docker-compose.yml configured to start my two services - this is my postgres db and Spring Boot app. \r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:8-jdk-alpine\r\n    \r\n    ENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64/\r\n    RUN export JAVA_HOME\r\n    \r\n    COPY ./init.dump /docker-entrypoint-initdb.d/\r\n    RUN chmod 0755 /docker-entrypoint-initdb.d/init.dump\r\n    COPY target/endlessblow-server-1.0-SNAPSHOT.jar /\r\n    COPY endless-blow-firebase.json /\r\n    \r\n    EXPOSE 8000\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;endlessblow-server-1.0-SNAPSHOT.jar&quot;]\r\n\r\ndocker-compose.yml\r\n\r\n    version: &quot;3.5&quot;\r\n    \r\n    services:\r\n      endlessblowapp_container:\r\n        build: .\r\n        image: endlessblowapp\r\n        container_name: endlessblowapp_container\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n        environment:\r\n          SPRING_DATASOURCE_URL: jdbc:postgresql://host.docker.internal:5430/endlessblow_db\r\n        restart: on-failure\r\n        depends_on:\r\n          - endlessblowdb_container\r\n    \r\n      endlessblowdb_container:\r\n        image: postgres:14-alpine\r\n        container_name: endlessblowdb_container\r\n        command: -c &#39;max_connections=250&#39;\r\n        ports:\r\n          - &quot;5430:5432&quot;\r\n        environment:\r\n          POSTGRES_DB: endlessblow_db\r\n          POSTGRES_USER: kuba\r\n          POSTGRES_PASSWORD: admin\r\n        volumes:\r\n          - ./init.dump:/docker-entrypoint-initdb.d/init.dump\r\n\r\napplication.properties\r\n\r\n    spring.datasource.url=jdbc:postgresql://host.docker.internal:5430/endlessblow_db\r\n    spring.datasource.username=kuba\r\n    spring.datasource.password=admin\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\r\n\r\n\r\nNow, the problem is once the containers are starting and db container is started, the container with Spring Boot app still fails to be started due to this exception:\r\n\r\n        Caused by: java.io.EOFException: null\r\n                at org.postgresql.core.PGStream.receiveChar(PGStream.java:455) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n                at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:553) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n                at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n                at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n                ... 57 common frames omitted\r\n    \r\n    . \r\n    \r\nHere I am attaching full Spring Boot container log:\r\n    \r\n    .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v2.4.3)\r\n    \r\n    2022-10-05 10:49:04.695  INFO 1 --- [           main] pl.jawegiel.Main                         : Starting Main v1.0-SNAPSHOT using Java 1.8.0_212 on f347c0966ca7 with PID 1 (/endlessblow-server-1.0-SNAPSHOT.jar started by root in /)\r\n    2022-10-05 10:49:04.699  INFO 1 --- [           main] pl.jawegiel.Main                         : No active profile set, falling back to default profiles: default\r\n    2022-10-05 10:49:07.123  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2022-10-05 10:49:07.156  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\r\n    2022-10-05 10:49:08.845  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2022-10-05 10:49:08.864  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2022-10-05 10:49:08.865  INFO 1 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.43]\r\n    2022-10-05 10:49:08.948  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2022-10-05 10:49:08.949  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4102 ms\r\n    2022-10-05 10:49:09.497  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2022-10-05 10:49:10.621 ERROR 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n    \r\n    org.postgresql.util.PSQLException: The connection attempt failed.\r\n            at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:331) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:247) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.Driver.makeConnection(Driver.java:434) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.Driver.connect(Driver.java:291) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:358) ~[HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:477) [HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:560) [HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.5.jar!/:na]\r\n            at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.5.jar!/:na]\r\n            at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158) [spring-jdbc-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116) [spring-jdbc-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79) [spring-jdbc-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330) [spring-jdbc-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:182) [spring-boot-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:130) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:136) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:102) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:94) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:134) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n            at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n            at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1153) ~[spring-context-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:907) ~[spring-context-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:582) ~[spring-context-5.3.4.jar!/:5.3.4]\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:767) ~[spring-boot-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) ~[spring-boot-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:426) ~[spring-boot-2.4.3.jar!/:2.4.3]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-2.4.3.jar!/:2.4.3]\r\n            at pl.jawegiel.Main.main(Main.java:22) ~[classes!/:1.0-SNAPSHOT]\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n            at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:107) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\r\n    Caused by: java.io.EOFException: null\r\n            at org.postgresql.core.PGStream.receiveChar(PGStream.java:455) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:553) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.5.0.jar!/:42.5.0]\r\n            ... 56 common frames omitted\r\n    \r\n    2022-10-05 10:49:10.823  INFO 1 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2022-10-05 10:49:11.034  INFO 1 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.28.Final\r\n    2022-10-05 10:49:11.296  INFO 1 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n    2022-10-05 10:49:11.468  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2022-10-05 10:49:12.479 ERROR 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n\r\nWhat&#39;s interesting is that when I try to connect to postgres container on pgAdmin it connects correctly.","title":"Docker postgres java.io.EOFException: null when trying to connect","body":"<p>I have my Dockerfile and docker-compose.yml configured to start my two services - this is my postgres db and Spring Boot app.</p>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:8-jdk-alpine\n\nENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64/\nRUN export JAVA_HOME\n\nCOPY ./init.dump /docker-entrypoint-initdb.d/\nRUN chmod 0755 /docker-entrypoint-initdb.d/init.dump\nCOPY target/endlessblow-server-1.0-SNAPSHOT.jar /\nCOPY endless-blow-firebase.json /\n\nEXPOSE 8000\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;endlessblow-server-1.0-SNAPSHOT.jar&quot;]\n</code></pre>\n<p>docker-compose.yml</p>\n<pre><code>version: &quot;3.5&quot;\n\nservices:\n  endlessblowapp_container:\n    build: .\n    image: endlessblowapp\n    container_name: endlessblowapp_container\n    ports:\n      - &quot;8080:8080&quot;\n    environment:\n      SPRING_DATASOURCE_URL: jdbc:postgresql://host.docker.internal:5430/endlessblow_db\n    restart: on-failure\n    depends_on:\n      - endlessblowdb_container\n\n  endlessblowdb_container:\n    image: postgres:14-alpine\n    container_name: endlessblowdb_container\n    command: -c 'max_connections=250'\n    ports:\n      - &quot;5430:5432&quot;\n    environment:\n      POSTGRES_DB: endlessblow_db\n      POSTGRES_USER: kuba\n      POSTGRES_PASSWORD: admin\n    volumes:\n      - ./init.dump:/docker-entrypoint-initdb.d/init.dump\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://host.docker.internal:5430/endlessblow_db\nspring.datasource.username=kuba\nspring.datasource.password=admin\nspring.datasource.driver-class-name=org.postgresql.Driver\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>Now, the problem is once the containers are starting and db container is started, the container with Spring Boot app still fails to be started due to this exception:</p>\n<pre><code>    Caused by: java.io.EOFException: null\n            at org.postgresql.core.PGStream.receiveChar(PGStream.java:455) ~[postgresql-42.5.0.jar!/:42.5.0]\n            at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:553) ~[postgresql-42.5.0.jar!/:42.5.0]\n            at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.5.0.jar!/:42.5.0]\n            at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.5.0.jar!/:42.5.0]\n            ... 57 common frames omitted\n\n. \n</code></pre>\n<p>Here I am attaching full Spring Boot container log:</p>\n<pre><code>.   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.4.3)\n\n2022-10-05 10:49:04.695  INFO 1 --- [           main] pl.jawegiel.Main                         : Starting Main v1.0-SNAPSHOT using Java 1.8.0_212 on f347c0966ca7 with PID 1 (/endlessblow-server-1.0-SNAPSHOT.jar started by root in /)\n2022-10-05 10:49:04.699  INFO 1 --- [           main] pl.jawegiel.Main                         : No active profile set, falling back to default profiles: default\n2022-10-05 10:49:07.123  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-10-05 10:49:07.156  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\n2022-10-05 10:49:08.845  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-10-05 10:49:08.864  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-10-05 10:49:08.865  INFO 1 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.43]\n2022-10-05 10:49:08.948  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-10-05 10:49:08.949  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4102 ms\n2022-10-05 10:49:09.497  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2022-10-05 10:49:10.621 ERROR 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\norg.postgresql.util.PSQLException: The connection attempt failed.\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:331) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:247) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.Driver.makeConnection(Driver.java:434) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.Driver.connect(Driver.java:291) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:358) ~[HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:477) [HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:560) [HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.5.jar!/:na]\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.5.jar!/:na]\n        at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158) [spring-jdbc-5.3.4.jar!/:5.3.4]\n        at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116) [spring-jdbc-5.3.4.jar!/:5.3.4]\n        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79) [spring-jdbc-5.3.4.jar!/:5.3.4]\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330) [spring-jdbc-5.3.4.jar!/:5.3.4]\n        at org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:182) [spring-boot-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:130) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:136) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:102) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:94) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) [spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:134) ~[spring-boot-autoconfigure-2.4.3.jar!/:2.4.3]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.4.jar!/:5.3.4]\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1153) ~[spring-context-5.3.4.jar!/:5.3.4]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:907) ~[spring-context-5.3.4.jar!/:5.3.4]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:582) ~[spring-context-5.3.4.jar!/:5.3.4]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:767) ~[spring-boot-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) ~[spring-boot-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:426) ~[spring-boot-2.4.3.jar!/:2.4.3]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-2.4.3.jar!/:2.4.3]\n        at pl.jawegiel.Main.main(Main.java:22) ~[classes!/:1.0-SNAPSHOT]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:107) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[endlessblow-server-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]\nCaused by: java.io.EOFException: null\n        at org.postgresql.core.PGStream.receiveChar(PGStream.java:455) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:553) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.5.0.jar!/:42.5.0]\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.5.0.jar!/:42.5.0]\n        ... 56 common frames omitted\n\n2022-10-05 10:49:10.823  INFO 1 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2022-10-05 10:49:11.034  INFO 1 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.28.Final\n2022-10-05 10:49:11.296  INFO 1 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2022-10-05 10:49:11.468  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2022-10-05 10:49:12.479 ERROR 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n</code></pre>\n<p>What's interesting is that when I try to connect to postgres container on pgAdmin it connects correctly.</p>\n"},{"tags":["java","swing","alignment","jbutton"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1683728835,"post_id":76219222,"comment_id":134411655,"body_markdown":"Start by finding a reference for HTML syntax. Don&#39;t just guess. For example why do all your examples play with the Font tag? A Font is a style or size of the text. You can&#39;t assign an alignment to a Font. Why would you define the &quot;sup&quot; tag first? Logically it comes after the text, so define your HTML that way as well. For a basic test you can start with: `String secondContent = &quot;&lt;html&gt;Multi-line&lt;sup&gt;HTML&lt;/sup&gt;&lt;/html&gt;&quot;;`","body":"Start by finding a reference for HTML syntax. Don&#39;t just guess. For example why do all your examples play with the Font tag? A Font is a style or size of the text. You can&#39;t assign an alignment to a Font. Why would you define the &quot;sup&quot; tag first? Logically it comes after the text, so define your HTML that way as well. For a basic test you can start with: <code>String secondContent = &quot;&lt;html&gt;Multi-line&lt;sup&gt;HTML&lt;&#47;sup&gt;&lt;&#47;html&gt;&quot;;</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1683731060,"post_id":76219222,"comment_id":134412277,"body_markdown":"Don‚Äôt add `JLabel`s to a `JButton`; that‚Äôs not gonna work. Further, there‚Äôs no point in setting a `FlowLayout` on a freshly instantiated `JPanel`, as that‚Äôs the default anyway. camickr already told you how to do the html right, but note that there‚Äôs no payoff in writing the implied tags in such fragments, just `&quot;&lt;html&gt;Some text&lt;sup&gt;10&quot;` and `&quot;&lt;html&gt;Multi-line&lt;sup&gt;HTML&quot;` are enough‚Ä¶ And as a side note, looking at your screenshot I‚Äôm wondering what this `RoundedBorder` is good for. It doesn‚Äôt seem to have any effect.","body":"Don‚Äôt add <code>JLabel</code>s to a <code>JButton</code>; that‚Äôs not gonna work. Further, there‚Äôs no point in setting a <code>FlowLayout</code> on a freshly instantiated <code>JPanel</code>, as that‚Äôs the default anyway. camickr already told you how to do the html right, but note that there‚Äôs no payoff in writing the implied tags in such fragments, just <code>&quot;&lt;html&gt;Some text&lt;sup&gt;10&quot;</code> and <code>&quot;&lt;html&gt;Multi-line&lt;sup&gt;HTML&quot;</code> are enough‚Ä¶ And as a side note, looking at your screenshot I‚Äôm wondering what this <code>RoundedBorder</code> is good for. It doesn‚Äôt seem to have any effect."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1683742528,"post_id":76219222,"comment_id":134415022,"body_markdown":"Why not just create images as you did for the question, load the images, and display them on `JButtons`?","body":"Why not just create images as you did for the question, load the images, and display them on <code>JButtons</code>?"}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683745177,"creation_date":1683745177,"answer_id":76221784,"question_id":76219222,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.\r\n\r\nAs I said in my comment, why not just create an image and place the image in a `JButton`.\r\n\r\nHere&#39;s the GUI I came up with.\r\n\r\n[![Example][1]][1]\r\n\r\nTo create images for all your `JButtons`, just call the image creation method in a loop.\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Font;\r\n    import java.awt.FontMetrics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Rectangle;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.image.BufferedImage;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class JButtonImageExample implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new JButtonImageExample());\r\n    \t}\r\n    \r\n    \tprivate BufferedImage image;\r\n    \r\n    \tpublic JButtonImageExample() {\r\n    \t\tFont font = new Font(Font.DIALOG, Font.PLAIN, 36);\r\n    \t\tthis.image = createLetterImage(70, 70, font, &#39;G&#39;, 7);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Example&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(createButtonPanel(), BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createButtonPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout());\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(100, 100, 100, 100));\r\n    \r\n    \t\tJButton button = new JButton(new ImageIcon(image));\r\n    \t\tpanel.add(button);\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate BufferedImage createLetterImage(int width, int height, Font font,\r\n    \t\t\tchar letter, int value) {\r\n    \t\tBufferedImage image = new BufferedImage(width, height,\r\n    \t\t\t\tBufferedImage.TYPE_INT_ARGB);\r\n    \t\tGraphics2D g2d = (Graphics2D) image.getGraphics();\r\n    \t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n    \t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n    \t\tg2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\r\n    \t\t\t\tRenderingHints.VALUE_TEXT_ANTIALIAS_ON);\r\n    \t\tg2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,\r\n    \t\t\t\tRenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n    \t\tg2d.setFont(font);\r\n    \r\n    \t\tg2d.setColor(Color.WHITE);\r\n    \t\tg2d.fillRect(0, 0, width, height);\r\n    \r\n    \t\tg2d.setColor(Color.BLACK);\r\n    \t\tString s = Character.toString(letter);\r\n    \t\tRectangle rect = new Rectangle(0, 0, width, height);\r\n    \t\tdrawCenteredString(g2d, s, rect, font);\r\n    \r\n    \t\tg2d.setColor(Color.BLUE);\r\n    \t\ts = Integer.toString(value);\r\n    \t\tdrawRightAlignedString(g2d, s, width, font);\r\n    \r\n    \t\tg2d.dispose();\r\n    \r\n    \t\treturn image;\r\n    \t}\r\n    \r\n    \tprivate void drawRightAlignedString(Graphics2D g2d, String text, int width,\r\n    \t\t\tFont font) {\r\n    \t\tint pointSize = font.getSize() / 2;\r\n    \t\tg2d.setFont(font.deriveFont((float) pointSize));\r\n    \t\tFontMetrics metrics = g2d.getFontMetrics(g2d.getFont());\r\n    \t\tint margin = 2;\r\n    \t\tint x = width - metrics.stringWidth(text) - margin;\r\n    \t\tint y = metrics.getAscent() - margin;\r\n    \t\tg2d.drawString(text, x, y);\r\n    \t}\r\n    \r\n    \tprivate void drawCenteredString(Graphics2D g2d, String text, Rectangle rect,\r\n    \t\t\tFont font) {\r\n    \t\tFontMetrics metrics = g2d.getFontMetrics(font);\r\n    \t\tint x = rect.x + (rect.width - metrics.stringWidth(text)) / 2;\r\n    \t\tint y = rect.y + ((rect.height - metrics.getHeight()) / 2)\r\n    \t\t\t\t+ metrics.getAscent();\r\n    \t\tg2d.setFont(font);\r\n    \t\tg2d.drawString(text, x, y);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oI12A.png\r\n","title":"How to properly align a multiline text in a JButton?","body":"<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section.</p>\n<p>As I said in my comment, why not just create an image and place the image in a <code>JButton</code>.</p>\n<p>Here's the GUI I came up with.</p>\n<p><a href=\"https://i.stack.imgur.com/oI12A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oI12A.png\" alt=\"Example\" /></a></p>\n<p>To create images for all your <code>JButtons</code>, just call the image creation method in a loop.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.RenderingHints;\nimport java.awt.image.BufferedImage;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class JButtonImageExample implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new JButtonImageExample());\n    }\n\n    private BufferedImage image;\n\n    public JButtonImageExample() {\n        Font font = new Font(Font.DIALOG, Font.PLAIN, 36);\n        this.image = createLetterImage(70, 70, font, 'G', 7);\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Example&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(createButtonPanel(), BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel panel = new JPanel(new FlowLayout());\n        panel.setBorder(BorderFactory.createEmptyBorder(100, 100, 100, 100));\n\n        JButton button = new JButton(new ImageIcon(image));\n        panel.add(button);\n\n        return panel;\n    }\n\n    private BufferedImage createLetterImage(int width, int height, Font font,\n            char letter, int value) {\n        BufferedImage image = new BufferedImage(width, height,\n                BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = (Graphics2D) image.getGraphics();\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,\n                RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        g2d.setFont(font);\n\n        g2d.setColor(Color.WHITE);\n        g2d.fillRect(0, 0, width, height);\n\n        g2d.setColor(Color.BLACK);\n        String s = Character.toString(letter);\n        Rectangle rect = new Rectangle(0, 0, width, height);\n        drawCenteredString(g2d, s, rect, font);\n\n        g2d.setColor(Color.BLUE);\n        s = Integer.toString(value);\n        drawRightAlignedString(g2d, s, width, font);\n\n        g2d.dispose();\n\n        return image;\n    }\n\n    private void drawRightAlignedString(Graphics2D g2d, String text, int width,\n            Font font) {\n        int pointSize = font.getSize() / 2;\n        g2d.setFont(font.deriveFont((float) pointSize));\n        FontMetrics metrics = g2d.getFontMetrics(g2d.getFont());\n        int margin = 2;\n        int x = width - metrics.stringWidth(text) - margin;\n        int y = metrics.getAscent() - margin;\n        g2d.drawString(text, x, y);\n    }\n\n    private void drawCenteredString(Graphics2D g2d, String text, Rectangle rect,\n            Font font) {\n        FontMetrics metrics = g2d.getFontMetrics(font);\n        int x = rect.x + (rect.width - metrics.stringWidth(text)) / 2;\n        int y = rect.y + ((rect.height - metrics.getHeight()) / 2)\n                + metrics.getAscent();\n        g2d.setFont(font);\n        g2d.drawString(text, x, y);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26897819,"reputation":33,"user_id":20845398,"display_name":"seened"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76221784,"answer_count":1,"score":2,"last_activity_date":1683786868,"creation_date":1683726510,"question_id":76219222,"body_markdown":"I am trying to figure it out how to align some text in a JButton, but it seems to be more challenging than I thought it can be. In some ways I have tried to use HTML and JLabel, but had no luck with it. What I am trying to do, I want to simulate a keyboard key with letter centered and a digit on the right-top of it.\r\n\r\n[![https://i.stack.imgur.com/dGnXx.png][1]][1]\r\n\r\n```\r\nJPanel panel = new JPanel();\r\nLayoutManager layout = new FlowLayout();\r\npanel.setLayout(layout);\r\n\r\nString htmlContent = &quot;&lt;html&gt;&lt;font align=right&gt;10&lt;/font&gt;&lt;br&gt;&lt;center&gt;&lt;font width=100&gt;Some text&lt;font&gt;&lt;/center&gt;&lt;br&gt;&lt;font height=20&gt;&lt;/font&gt;&lt;/html&gt;&quot;;\r\nString secondContent = &quot;&lt;html&gt;&lt;sup&gt;HTML&lt;/sup&gt;&lt;br&gt;&lt;font&gt;Multi-line&lt;/font&gt;&quot;;\r\n\r\nJButton nextButton = new JButton(htmlContent);\r\nnextButton.setForeground(new Color(0x000000));\r\nnextButton.setBackground(new Color(0xffffff));\r\nnextButton.setBorderPainted(false);\r\nnextButton.setFocusPainted(false);\r\nnextButton.setBounds(0, 0, 30, 25);\r\npanel.add(nextButton);\r\n\r\nJButton secondButton = new JButton(secondContent);\r\nsecondButton.setForeground(new Color(0xffffff));\r\nsecondButton.setBackground(new Color(0x0062ff));\r\nsecondButton.setBorderPainted(false);\r\nsecondButton.setFocusPainted(false);\r\npanel.add(secondButton);\r\n\r\nJLabel firstLabel = new JLabel(&quot;First&quot;);\r\nfirstLabel.setHorizontalTextPosition(JLabel.RIGHT);\r\nfirstLabel.setVerticalTextPosition(JLabel.TOP);\r\nfirstLabel.setSize(150,100);\r\nJLabel secondLabel = new JLabel(&quot;So much text&quot;);\r\nsecondLabel.setHorizontalTextPosition(JLabel.CENTER);\r\nsecondLabel.setVerticalTextPosition(JLabel.CENTER);\r\nsecondLabel.setSize(100,100);\r\n\r\nJButton thirdBtn = new JButton();\r\nthirdBtn.setForeground(new Color(0x000000));\r\nthirdBtn.setBackground(new Color(0xbdbdbd));\r\nthirdBtn.setBorderPainted(false);\r\nthirdBtn.setFocusPainted(false);\r\nthirdBtn.add(firstLabel);\r\nthirdBtn.add(secondLabel);\r\nthirdBtn.setPreferredSize(new Dimension(200, 80));\r\npanel.add(thirdBtn);\r\n\r\nframe.getContentPane().add(panel, BorderLayout.CENTER);\r\n```\r\n\r\nSo far here is the code I have tried to use to achieve this, but I can see no result of what I need, just cannot align the text to right or make it flow to there. Also tried using double labeled button, it seems that the labels cannot be aligned regarding each other. Is there a way to do that?\r\n\r\nP.S. Forgot to mention, have tried to use align=right or align=&#39;right&#39; or just &#39;right&#39; in HTML tags, but none of these works\r\n\r\nResults:\r\n\r\n[![https://i.stack.imgur.com/EQcX3.png][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dGnXx.png\r\n  [2]: https://i.stack.imgur.com/EQcX3.png","title":"How to properly align a multiline text in a JButton?","body":"<p>I am trying to figure it out how to align some text in a JButton, but it seems to be more challenging than I thought it can be. In some ways I have tried to use HTML and JLabel, but had no luck with it. What I am trying to do, I want to simulate a keyboard key with letter centered and a digit on the right-top of it.</p>\n<p><a href=\"https://i.stack.imgur.com/dGnXx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dGnXx.png\" alt=\"https://i.stack.imgur.com/dGnXx.png\" /></a></p>\n<pre><code>JPanel panel = new JPanel();\nLayoutManager layout = new FlowLayout();\npanel.setLayout(layout);\n\nString htmlContent = &quot;&lt;html&gt;&lt;font align=right&gt;10&lt;/font&gt;&lt;br&gt;&lt;center&gt;&lt;font width=100&gt;Some text&lt;font&gt;&lt;/center&gt;&lt;br&gt;&lt;font height=20&gt;&lt;/font&gt;&lt;/html&gt;&quot;;\nString secondContent = &quot;&lt;html&gt;&lt;sup&gt;HTML&lt;/sup&gt;&lt;br&gt;&lt;font&gt;Multi-line&lt;/font&gt;&quot;;\n\nJButton nextButton = new JButton(htmlContent);\nnextButton.setForeground(new Color(0x000000));\nnextButton.setBackground(new Color(0xffffff));\nnextButton.setBorderPainted(false);\nnextButton.setFocusPainted(false);\nnextButton.setBounds(0, 0, 30, 25);\npanel.add(nextButton);\n\nJButton secondButton = new JButton(secondContent);\nsecondButton.setForeground(new Color(0xffffff));\nsecondButton.setBackground(new Color(0x0062ff));\nsecondButton.setBorderPainted(false);\nsecondButton.setFocusPainted(false);\npanel.add(secondButton);\n\nJLabel firstLabel = new JLabel(&quot;First&quot;);\nfirstLabel.setHorizontalTextPosition(JLabel.RIGHT);\nfirstLabel.setVerticalTextPosition(JLabel.TOP);\nfirstLabel.setSize(150,100);\nJLabel secondLabel = new JLabel(&quot;So much text&quot;);\nsecondLabel.setHorizontalTextPosition(JLabel.CENTER);\nsecondLabel.setVerticalTextPosition(JLabel.CENTER);\nsecondLabel.setSize(100,100);\n\nJButton thirdBtn = new JButton();\nthirdBtn.setForeground(new Color(0x000000));\nthirdBtn.setBackground(new Color(0xbdbdbd));\nthirdBtn.setBorderPainted(false);\nthirdBtn.setFocusPainted(false);\nthirdBtn.add(firstLabel);\nthirdBtn.add(secondLabel);\nthirdBtn.setPreferredSize(new Dimension(200, 80));\npanel.add(thirdBtn);\n\nframe.getContentPane().add(panel, BorderLayout.CENTER);\n</code></pre>\n<p>So far here is the code I have tried to use to achieve this, but I can see no result of what I need, just cannot align the text to right or make it flow to there. Also tried using double labeled button, it seems that the labels cannot be aligned regarding each other. Is there a way to do that?</p>\n<p>P.S. Forgot to mention, have tried to use align=right or align='right' or just 'right' in HTML tags, but none of these works</p>\n<p>Results:</p>\n<p><a href=\"https://i.stack.imgur.com/EQcX3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQcX3.png\" alt=\"https://i.stack.imgur.com/EQcX3.png\" /></a></p>\n"},{"tags":["java","spring","spring-security","openapi"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1683715681,"post_id":76215142,"comment_id":134408190,"body_markdown":"why not just enable debug logs and look for the exact reason in the logs for why you are getting a 403?","body":"why not just enable debug logs and look for the exact reason in the logs for why you are getting a 403?"},{"owner":{"account_id":21867652,"reputation":11,"user_id":16157597,"display_name":"ShortlyMsg"},"score":0,"creation_date":1683748965,"post_id":76215142,"comment_id":134416216,"body_markdown":"@Toerktumlare Thank you for your advice, I followed your suggestions.\nI added the logs to the question. Can you check them? I couldn&#39;t fully understand where the mistake is.","body":"@Toerktumlare Thank you for your advice, I followed your suggestions. I added the logs to the question. Can you check them? I couldn&#39;t fully understand where the mistake is."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1683751834,"post_id":76215142,"comment_id":134416726,"body_markdown":"&quot;with postman its working&quot; you are not doing the same thing with postman, you are fetching `/users` not `swagger-ui.html` so how can you claim its working? try whitelisting `/error` endpoint","body":"&quot;with postman its working&quot; you are not doing the same thing with postman, you are fetching <code>&#47;users</code> not <code>swagger-ui.html</code> so how can you claim its working? try whitelisting <code>&#47;error</code> endpoint"},{"owner":{"account_id":21867652,"reputation":11,"user_id":16157597,"display_name":"ShortlyMsg"},"score":1,"creation_date":1683786042,"post_id":76215142,"comment_id":134420415,"body_markdown":"I did what you suggested and /error returned a 404 error to me. After doing some research, I found out that in Spring Boot 3, OpenAPI has been upgraded to a new version. When I changed the dependency, it gave me the correct output.  Thanks to you, I learned how to look at the log history and now I can approach things from different perspectives. Thank you again.","body":"I did what you suggested and /error returned a 404 error to me. After doing some research, I found out that in Spring Boot 3, OpenAPI has been upgraded to a new version. When I changed the dependency, it gave me the correct output.  Thanks to you, I learned how to look at the log history and now I can approach things from different perspectives. Thank you again."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1683793834,"post_id":76215142,"comment_id":134421937,"body_markdown":"logs are your best friend","body":"logs are your best friend"}],"owner":{"account_id":21867652,"reputation":11,"user_id":16157597,"display_name":"ShortlyMsg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":555,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683786715,"creation_date":1683696220,"question_id":76215142,"body_markdown":"I have just started learning Spring Security. I can access it with Postman, but I can&#39;t reach it with OpenApi. What could be the issue? It was working before I updated and added Security.\r\n**Spring Boot vers 3.0.6**\r\n**Spring Security vers 6**.\r\nHere is my code:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public UserDetailsService userDetailsService(PasswordEncoder encoder){\r\n        UserDetails admin = User.withUsername(&quot;msg&quot;)\r\n                .password(encoder.encode(&quot;123&quot;))\r\n                .roles(&quot;ADMIN&quot;, &quot;USER&quot;)\r\n                .build();\r\n        UserDetails user = User.withUsername(&quot;user&quot;)\r\n                .password(encoder.encode(&quot;123&quot;))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(admin, user);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n        return http.httpBasic()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;).permitAll()\r\n                //.requestMatchers(&quot;/users&quot;).authenticated()\r\n                .requestMatchers(HttpMethod.POST,&quot;/users/**&quot;).hasRole(&quot;USER&quot;)\r\n                .requestMatchers(&quot;/users/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                .and()\r\n                .csrf().disable()\r\n                .formLogin().disable()\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\npom.xml\r\n\r\n```\r\n   \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-security&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI added the &#39;springdoc-openapi-security&#39; later because it was not working. However, even after adding it, it is still not working.\r\n\r\nOpenAPI is sending an HTTP 403 error for all requests. The URL is http://localhost:9090/swagger-ui.html.\r\n\r\n**Edit***\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nOpen API new version. This is the version supported by Spring Boot 3.0. When I changed it, everything was fixed.","title":"Spring Security 6 - OpenApi return HTTP ERROR 403 *Fixed","body":"<p>I have just started learning Spring Security. I can access it with Postman, but I can't reach it with OpenApi. What could be the issue? It was working before I updated and added Security.\n<strong>Spring Boot vers 3.0.6</strong>\n<strong>Spring Security vers 6</strong>.\nHere is my code:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public UserDetailsService userDetailsService(PasswordEncoder encoder){\n        UserDetails admin = User.withUsername(&quot;msg&quot;)\n                .password(encoder.encode(&quot;123&quot;))\n                .roles(&quot;ADMIN&quot;, &quot;USER&quot;)\n                .build();\n        UserDetails user = User.withUsername(&quot;user&quot;)\n                .password(encoder.encode(&quot;123&quot;))\n                .roles(&quot;USER&quot;)\n                .build();\n        return new InMemoryUserDetailsManager(admin, user);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        return http.httpBasic()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui.html&quot;).permitAll()\n                //.requestMatchers(&quot;/users&quot;).authenticated()\n                .requestMatchers(HttpMethod.POST,&quot;/users/**&quot;).hasRole(&quot;USER&quot;)\n                .requestMatchers(&quot;/users/**&quot;).hasRole(&quot;ADMIN&quot;)\n                .and()\n                .csrf().disable()\n                .formLogin().disable()\n                .build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>   \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-security&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I added the 'springdoc-openapi-security' later because it was not working. However, even after adding it, it is still not working.</p>\n<p>OpenAPI is sending an HTTP 403 error for all requests. The URL is http://localhost:9090/swagger-ui.html.</p>\n<p><strong>Edit</strong>*</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Open API new version. This is the version supported by Spring Boot 3.0. When I changed it, everything was fixed.</p>\n"},{"tags":["java","birt","birt-emitter"],"answers":[{"tags":[],"owner":{"account_id":3349759,"reputation":2483,"user_id":2814025,"display_name":"hvb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683701936,"creation_date":1683701936,"answer_id":76215689,"question_id":76208475,"body_markdown":"Maybe that was a bug in BIRT 2.5.x.\r\n\r\nMaster pages work as expected since at least BIRT 3.7.1.\r\n\r\nIf you want different master pages, then you need to explicitly assign the master pages to some layout container objects where you want to switch the master pages (I recommend to explicitly specify the master page for the very first layout object, too).\r\nIf the master page property changes, BIRT will issue a page break and switch to the new master page.","title":"Birt migration from 2.5.2 to 4.9.0(Master page repeating in header on all pages)","body":"<p>Maybe that was a bug in BIRT 2.5.x.</p>\n<p>Master pages work as expected since at least BIRT 3.7.1.</p>\n<p>If you want different master pages, then you need to explicitly assign the master pages to some layout container objects where you want to switch the master pages (I recommend to explicitly specify the master page for the very first layout object, too).\nIf the master page property changes, BIRT will issue a page break and switch to the new master page.</p>\n"}],"owner":{"account_id":27601754,"reputation":1,"user_id":21066841,"display_name":"Kiran Kadam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683786608,"creation_date":1683629014,"question_id":76208475,"body_markdown":"Trying to create a report with two different master pages. The expectation is that the First one will be applied on very first page. And second one will be applied from second page and repeat till end of all pages. \r\n\r\nBut we are having issue mentioned in the title.\r\n\r\nTried resetting repeatHeader and pageBreakInterval properties and also tried resetting master pages.\r\n\r\nFollowing is the sample report design layout, as you can see we are having two tables with two different master pages still the first one gets repeated over all the pages.\r\nAny suggestion what we are missing here.\r\n\r\n\r\n    ================== Master pages =======================\r\n    &lt;page-setup&gt;\r\n    **&lt;simple-master-page name=&quot;FirstMasterPage&quot; id=&quot;2&quot;&gt;**\r\n    &lt;property name=&quot;orientation&quot;&gt;portrait&lt;/property&gt;\r\n    &lt;property name=&quot;showHeaderOnFirst&quot;&gt;true&lt;/property&gt;\r\n    &lt;property name=&quot;showFooterOnLast&quot;&gt;true&lt;/property&gt;\r\n    &lt;page-header&gt;\r\n    &lt;label id=&quot;171&quot;&gt;\r\n    &lt;property name=&quot;fontSize&quot;&gt;14pt&lt;/property&gt;\r\n    &lt;property name=&quot;textAlign&quot;&gt;center&lt;/property&gt;\r\n    &lt;text-property name=&quot;text&quot;&gt;Portrait&lt;/text-property&gt;\r\n    &lt;/label&gt;\r\n    &lt;/page-header&gt;\r\n    &lt;/simple-master-page&gt;\r\n    **&lt;simple-master-page name=&quot;SecondMasterPage&quot; id=&quot;8&quot;&gt;**\r\n    &lt;property name=&quot;orientation&quot;&gt;landscape&lt;/property&gt;\r\n    &lt;page-header&gt;\r\n    &lt;label id=&quot;172&quot;&gt;\r\n    &lt;property name=&quot;fontSize&quot;&gt;12pt&lt;/property&gt;\r\n    &lt;property name=&quot;textAlign&quot;&gt;center&lt;/property&gt;\r\n    &lt;text-property name=&quot;text&quot;&gt;Landscape&lt;/text-property&gt;\r\n    &lt;/label&gt;\r\n    &lt;/page-header&gt;\r\n    &lt;/simple-master-page&gt;\r\n    &lt;/page-setup&gt;\r\n    \r\n    ================== Table ======================= \r\n    &lt;body&gt;\r\n    &lt;table name=&quot;myTableFirst&quot; id=&quot;173&quot;&gt;\r\n    **&lt;property name=&quot;masterPage&quot;&gt;FirstMasterPage&lt;/property&gt;**\r\n    &lt;property name=&quot;pageBreakAfter&quot;&gt;always&lt;/property&gt;\r\n    &lt;property name=&quot;pageBreakBefore&quot;&gt;auto&lt;/property&gt;\r\n    &lt;property name=&quot;repeatHeader&quot;&gt;false&lt;/property&gt;\r\n    &lt;property name=&quot;pageBreakInterval&quot;&gt;0&lt;/property&gt;\r\n    \r\n    // some column details\r\n    &lt;/table&gt;\r\n    \r\n    **&lt;table name=&quot;myTable&quot; id=&quot;217&quot;&gt;\r\n    **&lt;property name=&quot;masterPage&quot;&gt;SecondMasterPage&lt;/property&gt;**\r\n    &lt;property name=&quot;pageBreakAfter&quot;&gt;always&lt;/property&gt;\r\n    &lt;property name=&quot;pageBreakBefore&quot;&gt;auto&lt;/property&gt;\r\n    &lt;property name=&quot;repeatHeader&quot;&gt;true&lt;/property&gt;\r\n    &lt;property name=&quot;pageBreakInterval&quot;&gt;40&lt;/property&gt;**\r\n    \r\n    // some column details\r\n    &lt;/table&gt;\r\n\r\n    \r\n**Following dependencies are used for the Birt report**\r\n    \r\n    org.eclipse.birt.runtime_4.9.0-20220315\r\n    org.eclipse.equinox.common_3.10.0.v20180412-1130\r\n    org.eclipse.equinox.registry_3.8.0.v20180426-1327\r\n    org.eclipse.core.runtime_3.14.0.v20180417-0825\r\n    org.eclipse.osgi --&gt; 3.10.2.v20150203-1939\r\n    org.eclipse.datatools.connectivity.oda_3.6.1.201712071719\r\n    org.mozilla.javascript_1.7.5.v201504281450\r\n    org.apache.batik.css_1.7.0.v201011041433\r\n    org.apache.batik.util_1.7.0.v201011041433\r\n    com.lowagie.itext\r\n    org.osgi.service.prefs\r\n\r\nAny help would be highly appreciated..\r\nThanks","title":"Birt migration from 2.5.2 to 4.9.0(Master page repeating in header on all pages)","body":"<p>Trying to create a report with two different master pages. The expectation is that the First one will be applied on very first page. And second one will be applied from second page and repeat till end of all pages.</p>\n<p>But we are having issue mentioned in the title.</p>\n<p>Tried resetting repeatHeader and pageBreakInterval properties and also tried resetting master pages.</p>\n<p>Following is the sample report design layout, as you can see we are having two tables with two different master pages still the first one gets repeated over all the pages.\nAny suggestion what we are missing here.</p>\n<pre><code>================== Master pages =======================\n&lt;page-setup&gt;\n**&lt;simple-master-page name=&quot;FirstMasterPage&quot; id=&quot;2&quot;&gt;**\n&lt;property name=&quot;orientation&quot;&gt;portrait&lt;/property&gt;\n&lt;property name=&quot;showHeaderOnFirst&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;showFooterOnLast&quot;&gt;true&lt;/property&gt;\n&lt;page-header&gt;\n&lt;label id=&quot;171&quot;&gt;\n&lt;property name=&quot;fontSize&quot;&gt;14pt&lt;/property&gt;\n&lt;property name=&quot;textAlign&quot;&gt;center&lt;/property&gt;\n&lt;text-property name=&quot;text&quot;&gt;Portrait&lt;/text-property&gt;\n&lt;/label&gt;\n&lt;/page-header&gt;\n&lt;/simple-master-page&gt;\n**&lt;simple-master-page name=&quot;SecondMasterPage&quot; id=&quot;8&quot;&gt;**\n&lt;property name=&quot;orientation&quot;&gt;landscape&lt;/property&gt;\n&lt;page-header&gt;\n&lt;label id=&quot;172&quot;&gt;\n&lt;property name=&quot;fontSize&quot;&gt;12pt&lt;/property&gt;\n&lt;property name=&quot;textAlign&quot;&gt;center&lt;/property&gt;\n&lt;text-property name=&quot;text&quot;&gt;Landscape&lt;/text-property&gt;\n&lt;/label&gt;\n&lt;/page-header&gt;\n&lt;/simple-master-page&gt;\n&lt;/page-setup&gt;\n\n================== Table ======================= \n&lt;body&gt;\n&lt;table name=&quot;myTableFirst&quot; id=&quot;173&quot;&gt;\n**&lt;property name=&quot;masterPage&quot;&gt;FirstMasterPage&lt;/property&gt;**\n&lt;property name=&quot;pageBreakAfter&quot;&gt;always&lt;/property&gt;\n&lt;property name=&quot;pageBreakBefore&quot;&gt;auto&lt;/property&gt;\n&lt;property name=&quot;repeatHeader&quot;&gt;false&lt;/property&gt;\n&lt;property name=&quot;pageBreakInterval&quot;&gt;0&lt;/property&gt;\n\n// some column details\n&lt;/table&gt;\n\n**&lt;table name=&quot;myTable&quot; id=&quot;217&quot;&gt;\n**&lt;property name=&quot;masterPage&quot;&gt;SecondMasterPage&lt;/property&gt;**\n&lt;property name=&quot;pageBreakAfter&quot;&gt;always&lt;/property&gt;\n&lt;property name=&quot;pageBreakBefore&quot;&gt;auto&lt;/property&gt;\n&lt;property name=&quot;repeatHeader&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;pageBreakInterval&quot;&gt;40&lt;/property&gt;**\n\n// some column details\n&lt;/table&gt;\n</code></pre>\n<p><strong>Following dependencies are used for the Birt report</strong></p>\n<pre><code>org.eclipse.birt.runtime_4.9.0-20220315\norg.eclipse.equinox.common_3.10.0.v20180412-1130\norg.eclipse.equinox.registry_3.8.0.v20180426-1327\norg.eclipse.core.runtime_3.14.0.v20180417-0825\norg.eclipse.osgi --&gt; 3.10.2.v20150203-1939\norg.eclipse.datatools.connectivity.oda_3.6.1.201712071719\norg.mozilla.javascript_1.7.5.v201504281450\norg.apache.batik.css_1.7.0.v201011041433\norg.apache.batik.util_1.7.0.v201011041433\ncom.lowagie.itext\norg.osgi.service.prefs\n</code></pre>\n<p>Any help would be highly appreciated..\nThanks</p>\n"},{"tags":["java","jaxb"],"owner":{"account_id":14232409,"reputation":270,"user_id":10281244,"display_name":"Diksha Goyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683786599,"creation_date":1683786599,"question_id":76224724,"body_markdown":"I have been trying to unmarshal an XML using JAXB library. The XML is fetched from S3. We have an XSD in place which we are using at multiple place(working fine while marshalling into the same XML). Following is the piece of code:\r\n\r\n```\r\nS3Object xml = s3.getObject();\r\nfinal InputStreamReader streamReader = new InputStreamReader(xml.getObjectContent(), StandardCharsets.UTF_8);\r\nfinal BufferedReader reader = new BufferedReader(streamReader);\r\nJAXBContext jc = JAXBContext.newInstance();\r\nUnmarshaller unmarshaller = jc.createUnmarshaller();\r\nRequest pojo = (Request) unmarshaller.unmarshal(reader);\r\n```\r\n\r\nJaxb v2.3.1 is used.\r\n\r\nStack Trace: \r\n```\r\njavax.xml.bind.UnmarshalException: unexpected element (uri:\\&quot;\\&quot;, local:\\&quot;Request\\&quot;). Expected elements are (none)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:744)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:262)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:257)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:124)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1149)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:574)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:556)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:168)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:258)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:229)\\n\\tat javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:170)\\n\\tat javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:219)\\n\\tat \r\n```\r\n","title":"javax.xml.bind.UnmarshalException: unexpected element (uri:\\&quot;\\&quot;, local:\\&quot;Request\\&quot;). Expected elements are (none)","body":"<p>I have been trying to unmarshal an XML using JAXB library. The XML is fetched from S3. We have an XSD in place which we are using at multiple place(working fine while marshalling into the same XML). Following is the piece of code:</p>\n<pre><code>S3Object xml = s3.getObject();\nfinal InputStreamReader streamReader = new InputStreamReader(xml.getObjectContent(), StandardCharsets.UTF_8);\nfinal BufferedReader reader = new BufferedReader(streamReader);\nJAXBContext jc = JAXBContext.newInstance();\nUnmarshaller unmarshaller = jc.createUnmarshaller();\nRequest pojo = (Request) unmarshaller.unmarshal(reader);\n</code></pre>\n<p>Jaxb v2.3.1 is used.</p>\n<p>Stack Trace:</p>\n<pre><code>javax.xml.bind.UnmarshalException: unexpected element (uri:\\&quot;\\&quot;, local:\\&quot;Request\\&quot;). Expected elements are (none)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:744)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:262)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:257)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:124)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1149)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:574)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:556)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:168)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\\n\\tat java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:258)\\n\\tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:229)\\n\\tat javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:170)\\n\\tat javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:219)\\n\\tat \n</code></pre>\n"},{"tags":["java","while-loop","final"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683786525,"creation_date":1683785738,"answer_id":76224649,"question_id":76224542,"body_markdown":"While in both cases the variables are `final`, the variables in the second case are also [*constant variables*][1]:\r\n\r\n&gt; A constant variable is a final variable of primitive type or type String that is initialized with a constant expression ([&#167;15.29][2]). Whether a variable is a constant variable or not may have implications with respect to [...] reachability (&#167;14.22) [...].\r\n\r\nThe variables in the first case are not constant variables, because they are not initialised. They are assigned in the next statement. Note that final variables don&#39;t have to be initialised = they just need to be [definitely assigned][3].\r\n\r\nThis makes `a &lt;= b` in the second code a [*constant expression*][2], with the constant value `true`. And this affects whether a statement is *reachable*. See the relevant quotes in [this section][4].\r\n\r\n&gt; It is a compile-time error if a statement cannot be executed because\r\n&gt; it is unreachable.\r\n&gt; \r\n&gt; The first statement in a non-empty block that is not a switch block is reachable iff the block is reachable.\r\n&gt;\r\n&gt; Every other statement S in a non-empty block that is not a switch\r\n&gt; block is reachable iff the statement preceding S can complete\r\n&gt; normally.\r\n&gt; \r\n&gt; - A while statement can complete normally iff at least one of the following is true:\r\n&gt; \r\n&gt;     - The while statement is reachable and the condition expression is not a constant expression (&#167;15.29) with value true.\r\n&gt; \r\n&gt;     - There is a reachable `break` statement that exits the while statement.\r\n\r\nIn this case, since the `while` statement does have a constant `true` condition, and there is no `break`s, the `while` statement cannot complete normally. This causes the statement after the while loop to be unreachable.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.12.4\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.29\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-16.html\r\n  [4]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.22","title":"Is there any difference between nested assignment and normal assignment?","body":"<p>While in both cases the variables are <code>final</code>, the variables in the second case are also <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\"><em>constant variables</em></a>:</p>\n<blockquote>\n<p>A constant variable is a final variable of primitive type or type String that is initialized with a constant expression (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\">¬ß15.29</a>). Whether a variable is a constant variable or not may have implications with respect to [...] reachability (¬ß14.22) [...].</p>\n</blockquote>\n<p>The variables in the first case are not constant variables, because they are not initialised. They are assigned in the next statement. Note that final variables don't have to be initialised = they just need to be <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-16.html\" rel=\"nofollow noreferrer\">definitely assigned</a>.</p>\n<p>This makes <code>a &lt;= b</code> in the second code a <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\"><em>constant expression</em></a>, with the constant value <code>true</code>. And this affects whether a statement is <em>reachable</em>. See the relevant quotes in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.22\" rel=\"nofollow noreferrer\">this section</a>.</p>\n<blockquote>\n<p>It is a compile-time error if a statement cannot be executed because\nit is unreachable.</p>\n<p>The first statement in a non-empty block that is not a switch block is reachable iff the block is reachable.</p>\n<p>Every other statement S in a non-empty block that is not a switch\nblock is reachable iff the statement preceding S can complete\nnormally.</p>\n<ul>\n<li><p>A while statement can complete normally iff at least one of the following is true:</p>\n<ul>\n<li><p>The while statement is reachable and the condition expression is not a constant expression (¬ß15.29) with value true.</p>\n</li>\n<li><p>There is a reachable <code>break</code> statement that exits the while statement.</p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>In this case, since the <code>while</code> statement does have a constant <code>true</code> condition, and there is no <code>break</code>s, the <code>while</code> statement cannot complete normally. This causes the statement after the while loop to be unreachable.</p>\n"},{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683786589,"creation_date":1683786396,"answer_id":76224703,"question_id":76224542,"body_markdown":" I explain this phenomenon in an unprofessional way, the test class is as follows:\r\n\r\n    package com;                                                                                                       \r\n                                                                                                                       \r\n    public class Assignment {                                                                                          \r\n        public static void main(String[] args) { }                                                                           \r\n        public int m1() {                                                           \r\n            final int a, b;                                                         \r\n            a = b = 10;                                                             \r\n            return a + b;                                                                                              \r\n        }                                                                           \r\n        public int m2() {                                                           \r\n            int a, b;                                                               \r\n            a = b = 10;                                                             \r\n            return a + b;                                                                                              \r\n        }                                                                                                              \r\n        public int m3() {                                                           \r\n            final int a = 10;                                                                                          \r\n            final int b = 10;                                                       \r\n            return a + b;                                                           \r\n        }                                                                           \r\n    }\r\n\r\nAfter compiling with javac, the result of decompiling with javap is as followsÔºö\r\n\r\n    Compiled from &quot;Assignment.java&quot;\r\n    public class com.Assignment {\r\n      public com.Assignment();\r\n        Code:\r\n           0: aload_0\r\n           1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n           4: return\r\n    \r\n      public static void main(java.lang.String[]);\r\n        Code:\r\n           0: return\r\n    \r\n      public int m1();\r\n        Code:\r\n           0: bipush        10\r\n           2: dup\r\n           3: istore_2\r\n           4: istore_1\r\n           5: iload_1\r\n           6: iload_2\r\n           7: iadd\r\n           8: ireturn\r\n    \r\n      public int m2();\r\n        Code:\r\n           0: bipush        10\r\n           2: dup\r\n           3: istore_2\r\n           4: istore_1\r\n           5: iload_1\r\n           6: iload_2\r\n           7: iadd\r\n           8: ireturn\r\n    \r\n      public int m3();\r\n        Code:\r\n           0: bipush        20\r\n           2: ireturn\r\n    }\r\n\r\nPay attention to m3, the value of return is directly replaced with 20ÔºÅ\r\n\r\nBoth m1 and m2 are calculated, that is, the specific values ‚Äã‚Äãare not known until the running phase. \r\n\r\nSo...., the next conclusion can be drawnÔºåThe value in m3 can actually be determined during the compilation phase. If you put it in while as a condition, then you can know the result during the compilation phase.","title":"Is there any difference between nested assignment and normal assignment?","body":"<p>I explain this phenomenon in an unprofessional way, the test class is as follows:</p>\n<pre><code>package com;                                                                                                       \n                                                                                                                   \npublic class Assignment {                                                                                          \n    public static void main(String[] args) { }                                                                           \n    public int m1() {                                                           \n        final int a, b;                                                         \n        a = b = 10;                                                             \n        return a + b;                                                                                              \n    }                                                                           \n    public int m2() {                                                           \n        int a, b;                                                               \n        a = b = 10;                                                             \n        return a + b;                                                                                              \n    }                                                                                                              \n    public int m3() {                                                           \n        final int a = 10;                                                                                          \n        final int b = 10;                                                       \n        return a + b;                                                           \n    }                                                                           \n}\n</code></pre>\n<p>After compiling with javac, the result of decompiling with javap is as followsÔºö</p>\n<pre><code>Compiled from &quot;Assignment.java&quot;\npublic class com.Assignment {\n  public com.Assignment();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: return\n\n  public int m1();\n    Code:\n       0: bipush        10\n       2: dup\n       3: istore_2\n       4: istore_1\n       5: iload_1\n       6: iload_2\n       7: iadd\n       8: ireturn\n\n  public int m2();\n    Code:\n       0: bipush        10\n       2: dup\n       3: istore_2\n       4: istore_1\n       5: iload_1\n       6: iload_2\n       7: iadd\n       8: ireturn\n\n  public int m3();\n    Code:\n       0: bipush        20\n       2: ireturn\n}\n</code></pre>\n<p>Pay attention to m3, the value of return is directly replaced with 20ÔºÅ</p>\n<p>Both m1 and m2 are calculated, that is, the specific values ‚Äã‚Äãare not known until the running phase.</p>\n<p>So...., the next conclusion can be drawnÔºåThe value in m3 can actually be determined during the compilation phase. If you put it in while as a condition, then you can know the result during the compilation phase.</p>\n"}],"owner":{"account_id":28271325,"reputation":19,"user_id":21614464,"display_name":"bharath Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683786589,"creation_date":1683784776,"question_id":76224542,"body_markdown":"I have a code\r\n\r\n\tfinal int a, b;\r\n\ta = b = 10;\r\n\r\n\twhile (a &lt;= b) {\r\n\t\tSystem.out.println(&quot;this is in while loop&quot;);\r\n\t}\r\n\tSystem.out.println(&quot;this is out of while loop&quot;);\r\n\r\nin this case my while block is executing infinite times.\r\n\r\nIn have another code\r\n\r\n\tfinal int a=10;\r\n\tfinal int b = 10;\r\n\r\n\twhile (a &lt;= b) {\r\n\t\tSystem.out.println(&quot;this is in while loop&quot;);\r\n\t}\r\n\tSystem.out.println(&quot;this is out of while loop&quot;);\r\n\r\nin this case i am getting compilation error mentioning unreachable code for the statement outside while loop\r\n\r\neven though they are final variables.I tried to reassign the values for variables a and b respectively in both cases,But i could not re -assign the values in both cases as it is final variable.\r\nbut in the first case i mentioned they are not considering as constants that is the reason loop is repeating.","title":"Is there any difference between nested assignment and normal assignment?","body":"<p>I have a code</p>\n<pre><code>final int a, b;\na = b = 10;\n\nwhile (a &lt;= b) {\n    System.out.println(&quot;this is in while loop&quot;);\n}\nSystem.out.println(&quot;this is out of while loop&quot;);\n</code></pre>\n<p>in this case my while block is executing infinite times.</p>\n<p>In have another code</p>\n<pre><code>final int a=10;\nfinal int b = 10;\n\nwhile (a &lt;= b) {\n    System.out.println(&quot;this is in while loop&quot;);\n}\nSystem.out.println(&quot;this is out of while loop&quot;);\n</code></pre>\n<p>in this case i am getting compilation error mentioning unreachable code for the statement outside while loop</p>\n<p>even though they are final variables.I tried to reassign the values for variables a and b respectively in both cases,But i could not re -assign the values in both cases as it is final variable.\nbut in the first case i mentioned they are not considering as constants that is the reason loop is repeating.</p>\n"},{"tags":["java","java-8","reactive-programming","reactive","spring-data-r2dbc"],"answers":[{"tags":[],"owner":{"account_id":5523754,"reputation":19812,"user_id":4385913,"accept_rate":93,"display_name":"Skizo-oz·¥â ûS „ÉÑ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683785956,"creation_date":1683626691,"answer_id":76208139,"question_id":76208061,"body_markdown":"Have you tried [`flatMapMany`](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#flatMapMany-java.util.function.Function-)?\r\n\r\nIn your code should look like this \r\n\r\n```\r\nFlux&lt;Project&gt; projectFluxReturn = result.toStream()\r\n        .collect(Collectors.toMap(Project::getProjectId, Function.identity(), (project1, project2) -&gt; {\r\n            project1.getTaskList().addAll(project2.getTaskList());\r\n            project2.getTaskList().clear();\r\n            return project1;\r\n        }))\r\n        .values()\r\n        .stream()\r\n        //in case you want to flattern the list use .flatMap\r\n        .flatMap(whatever -&gt; Flux.fromIterable(whatever.getWhatever()));\r\n```\r\n\r\nEdit\r\n----\r\n\r\n```\r\nMono&lt;Map&lt;Integer, Project&gt;&gt; monoMap = result.toStream();\r\nFlux&lt;Project&gt; fluxProject = monoMap.flatMapMany(map -&gt; Flux.fromIterable(map.values()));\r\n\r\n```\r\n\r\n","title":"mono of map to flux conversion","body":"<p>Have you tried <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#flatMapMany-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>flatMapMany</code></a>?</p>\n<p>In your code should look like this</p>\n<pre><code>Flux&lt;Project&gt; projectFluxReturn = result.toStream()\n        .collect(Collectors.toMap(Project::getProjectId, Function.identity(), (project1, project2) -&gt; {\n            project1.getTaskList().addAll(project2.getTaskList());\n            project2.getTaskList().clear();\n            return project1;\n        }))\n        .values()\n        .stream()\n        //in case you want to flattern the list use .flatMap\n        .flatMap(whatever -&gt; Flux.fromIterable(whatever.getWhatever()));\n</code></pre>\n<h2>Edit</h2>\n<pre><code>Mono&lt;Map&lt;Integer, Project&gt;&gt; monoMap = result.toStream();\nFlux&lt;Project&gt; fluxProject = monoMap.flatMapMany(map -&gt; Flux.fromIterable(map.values()));\n\n</code></pre>\n"}],"owner":{"account_id":25836931,"reputation":25,"user_id":19573182,"display_name":"Sujoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683785956,"creation_date":1683626232,"question_id":76208061,"body_markdown":"I want to convert a Mono of map to flux . can anyone help me on that please?\r\n\r\nThe object that I have is something like \r\n\r\n`Mono&lt;Map&lt;Integer , Project&gt;&gt;` \r\n\r\nwhere map key is the project key \r\n\r\nFrom this mono I want to construct a flux of project which is something like\r\n\r\n`flux&lt;project&gt;` \r\n\r\nas map key is the project id which is present in the project object, we can ignore that. \r\n\r\nI try something like this but that did not work I also do not want to use type conversion directly. \r\n\r\n\r\n```\r\n     Flux&lt;Project&gt; projectFluxReturn = (Flux&lt;Project&gt;) result.toStream().collect(\r\n                Collectors.toMap(Project::getProjectId, Function.identity(), (Project project1, Project project2) -&gt; {\r\n                    project1.getTaskList().addAll(project2.getTaskList());\r\n                    project2.getTaskList().clear();\r\n                    return project1;\r\n                })\r\n        )\r\n                .values();\r\n```\r\n","title":"mono of map to flux conversion","body":"<p>I want to convert a Mono of map to flux . can anyone help me on that please?</p>\n<p>The object that I have is something like</p>\n<p><code>Mono&lt;Map&lt;Integer , Project&gt;&gt;</code></p>\n<p>where map key is the project key</p>\n<p>From this mono I want to construct a flux of project which is something like</p>\n<p><code>flux&lt;project&gt;</code></p>\n<p>as map key is the project id which is present in the project object, we can ignore that.</p>\n<p>I try something like this but that did not work I also do not want to use type conversion directly.</p>\n<pre><code>     Flux&lt;Project&gt; projectFluxReturn = (Flux&lt;Project&gt;) result.toStream().collect(\n                Collectors.toMap(Project::getProjectId, Function.identity(), (Project project1, Project project2) -&gt; {\n                    project1.getTaskList().addAll(project2.getTaskList());\n                    project2.getTaskList().clear();\n                    return project1;\n                })\n        )\n                .values();\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":968470,"reputation":5711,"user_id":991479,"display_name":"Ewald"},"down_vote_count":5,"up_vote_count":105,"is_accepted":true,"score":100,"last_activity_date":1683785876,"creation_date":1338893556,"answer_id":10895993,"question_id":10895969,"body_markdown":"*** UPDATE ***\r\n\r\nSince around 2020, the below answer is sadly no longer accurate. So much has changed in Java over the previous decade and compatibility was sacrificed to move things forward. \r\n\r\nWhile it remains true that most of your code and knowledge transfers to newer versions, there are many exceptions these days, though, in my experience, migrations can sometimes be quite easy.\r\n\r\n*** UPDATE ENDS ***\r\n\r\nYou would not encounter any problems - that&#39;s the magic of Java -it&#39;s backwards compatible.You can run almost all code from Java 1 on Java 8.  There&#39;s no reason why Java 6 code won&#39;t run on a Java 8 Runtime.\r\n\r\nWhat is interesting, is that for applications written in, let&#39;s say, Java 1.4, you even have speed increases when running them on later runtimes. This is because Java is constantly evolving, not just the language known as &quot;Java&quot;, but also the JVM (Java virtual machine). I still have source code from more than 10 years ago that still work, as expected in the latest JVM.\r\n\r\nIf you want to target, let&#39;s say, a Java 5 VM, then you can do that with the Java 8 SDK tools. You can ultimately specify which target VM you wish to support, as long as you bear in mind that a version 5 VM might not support all the features a version 8 VM will.\r\n\r\nI&#39;ve just tested code I wrote in Java 5 against the new Java 8 runtime and everything works as expected, so, even though we have a more powerful language and runtime now, we can continue to use our investments of the past. Just that alone makes Java a great development choice for companies. ","title":"Can newer JRE versions run Java programs compiled with older JDK versions?","body":"<p>*** UPDATE ***</p>\n<p>Since around 2020, the below answer is sadly no longer accurate. So much has changed in Java over the previous decade and compatibility was sacrificed to move things forward.</p>\n<p>While it remains true that most of your code and knowledge transfers to newer versions, there are many exceptions these days, though, in my experience, migrations can sometimes be quite easy.</p>\n<p>*** UPDATE ENDS ***</p>\n<p>You would not encounter any problems - that's the magic of Java -it's backwards compatible.You can run almost all code from Java 1 on Java 8.  There's no reason why Java 6 code won't run on a Java 8 Runtime.</p>\n<p>What is interesting, is that for applications written in, let's say, Java 1.4, you even have speed increases when running them on later runtimes. This is because Java is constantly evolving, not just the language known as &quot;Java&quot;, but also the JVM (Java virtual machine). I still have source code from more than 10 years ago that still work, as expected in the latest JVM.</p>\n<p>If you want to target, let's say, a Java 5 VM, then you can do that with the Java 8 SDK tools. You can ultimately specify which target VM you wish to support, as long as you bear in mind that a version 5 VM might not support all the features a version 8 VM will.</p>\n<p>I've just tested code I wrote in Java 5 against the new Java 8 runtime and everything works as expected, so, even though we have a more powerful language and runtime now, we can continue to use our investments of the past. Just that alone makes Java a great development choice for companies.</p>\n"},{"tags":[],"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"down_vote_count":0,"up_vote_count":111,"is_accepted":false,"score":111,"last_activity_date":1682431222,"creation_date":1424345337,"answer_id":28605204,"question_id":10895969,"body_markdown":"As answered already you are __mostly__ safe and __most__ products  and 3&lt;sup&gt;rd&lt;/sup&gt; party libraries will simply work. However there **do exist** (not so-) rare **binary incompatibilities**. \r\n\r\nThese incompatibilities happen where the classes compiled using older JDK fail to run in the newer JVM due to **compatibility breaking changes** introduced in the JDK itself (e.g. **class removal**, **class/method visibility reduction**, **method signature changes** or **package changes**) were introduced after the code using JDK has been written and compiled.\r\n\r\nFor Java 9 and earlier:&lt;br/&gt;\r\nOfficial list of Oracle Java incompatibilities:\r\n----------------------------------------------------------------\r\n - [in Java SE 9 since Java SE 8][1]\r\n - [in Java SE 8 since Java SE 7][2] \r\n - [in Java SE 7 since Java SE 6][3] \r\n - [in Java SE 6 since Java SE 5.0][4] \r\n - [in Java SE 5.0 since Java SE 1.4.2][5] \r\n\r\nFor Java 9 and later:&lt;br/&gt;Compatibility tool\r\n------------------\r\nPackaged with **JDK 9 and onwards**, there is [jdeprscan ][6] tool, which verifies the compatibility, lists no longer used APIs within your code and suggests alternatives(!). You can specify the target **JDK version** (works for **JDK 17**, **11**, **9**, **8**, **7** and **6**) and it will list incompatibilities specific to your target version.\r\n\r\n\r\nAdditional comment in case of libraries:\r\n---------------------------------------------------------\r\n\r\nA reasonable rule of thumb is to use latest stable release version of library for the JRE version your software targets. Obviously you will find many  exceptions from this rule, but in general stability of publicly available libraries **usually** increases with time. \r\n\r\nNaturally **API compatibility** and **versioning** have to be considered when changing versions of dependencies.\r\n\r\n\r\nAgain most popular dependencies will have web pages where such information should be available. \r\n\r\nIf however you are using something a bit more obscure, you can discern which JRE were the classes within your dependency compiled for. \r\n\r\n[Here is a great answer on how to find out class version][7]. You might need to unzip the JAR file first.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-F7696E02-A1FB-4D5A-B1F2-89E7007D4096\r\n  [2]: http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html#A999198\r\n  [3]: http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities &quot;official list of incompatibilities&quot;\r\n  [4]: http://www.oracle.com/technetwork/java/javase/compatibility-137541.html#incompatibilities\r\n  [5]: http://www.oracle.com/technetwork/java/javase/compatibility-137462.html#incompatibilities\r\n  [6]: https://docs.oracle.com/javase/9/tools/jdeprscan.htm\r\n  [7]: https://stackoverflow.com/a/1096159/76237","title":"Can newer JRE versions run Java programs compiled with older JDK versions?","body":"<p>As answered already you are <strong>mostly</strong> safe and <strong>most</strong> products  and 3<sup>rd</sup> party libraries will simply work. However there <strong>do exist</strong> (not so-) rare <strong>binary incompatibilities</strong>.</p>\n<p>These incompatibilities happen where the classes compiled using older JDK fail to run in the newer JVM due to <strong>compatibility breaking changes</strong> introduced in the JDK itself (e.g. <strong>class removal</strong>, <strong>class/method visibility reduction</strong>, <strong>method signature changes</strong> or <strong>package changes</strong>) were introduced after the code using JDK has been written and compiled.</p>\n<h2>For Java 9 and earlier:<br/>\nOfficial list of Oracle Java incompatibilities:</h2>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-F7696E02-A1FB-4D5A-B1F2-89E7007D4096\" rel=\"nofollow noreferrer\">in Java SE 9 since Java SE 8</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html#A999198\" rel=\"nofollow noreferrer\">in Java SE 8 since Java SE 7</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities\" rel=\"nofollow noreferrer\" title=\"official list of incompatibilities\">in Java SE 7 since Java SE 6</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/compatibility-137541.html#incompatibilities\" rel=\"nofollow noreferrer\">in Java SE 6 since Java SE 5.0</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/compatibility-137462.html#incompatibilities\" rel=\"nofollow noreferrer\">in Java SE 5.0 since Java SE 1.4.2</a></li>\n</ul>\n<h2>For Java 9 and later:<br/>Compatibility tool</h2>\n<p>Packaged with <strong>JDK 9 and onwards</strong>, there is <a href=\"https://docs.oracle.com/javase/9/tools/jdeprscan.htm\" rel=\"nofollow noreferrer\">jdeprscan </a> tool, which verifies the compatibility, lists no longer used APIs within your code and suggests alternatives(!). You can specify the target <strong>JDK version</strong> (works for <strong>JDK 17</strong>, <strong>11</strong>, <strong>9</strong>, <strong>8</strong>, <strong>7</strong> and <strong>6</strong>) and it will list incompatibilities specific to your target version.</p>\n<h2>Additional comment in case of libraries:</h2>\n<p>A reasonable rule of thumb is to use latest stable release version of library for the JRE version your software targets. Obviously you will find many  exceptions from this rule, but in general stability of publicly available libraries <strong>usually</strong> increases with time.</p>\n<p>Naturally <strong>API compatibility</strong> and <strong>versioning</strong> have to be considered when changing versions of dependencies.</p>\n<p>Again most popular dependencies will have web pages where such information should be available.</p>\n<p>If however you are using something a bit more obscure, you can discern which JRE were the classes within your dependency compiled for.</p>\n<p><a href=\"https://stackoverflow.com/a/1096159/76237\">Here is a great answer on how to find out class version</a>. You might need to unzip the JAR file first.</p>\n"}],"owner":{"account_id":928397,"reputation":4113,"user_id":958712,"accept_rate":59,"display_name":"shawn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107234,"favorite_count":0,"down_vote_count":0,"up_vote_count":97,"accepted_answer_id":10895993,"answer_count":2,"score":97,"last_activity_date":1683785876,"creation_date":1338893445,"question_id":10895969,"body_markdown":"Would I encounter any problems running Java programs and associated libraries compiled in Java version 1.6 **and** 1.7 (I&#39;m compiling using 1.7 whereas some libraries are compiled using 1.6) and running the entire program in a 1.7 JRE?","title":"Can newer JRE versions run Java programs compiled with older JDK versions?","body":"<p>Would I encounter any problems running Java programs and associated libraries compiled in Java version 1.6 <strong>and</strong> 1.7 (I'm compiling using 1.7 whereas some libraries are compiled using 1.6) and running the entire program in a 1.7 JRE?</p>\n"},{"tags":["java","android","kotlin","xamarin.forms","maui"],"comments":[{"owner":{"account_id":7631826,"reputation":27,"user_id":5786637,"display_name":"K. Moteluk"},"score":0,"creation_date":1683399988,"post_id":76188745,"comment_id":134362069,"body_markdown":"Found another issue that might link to the solution: \n2&gt;        JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX\n2&gt;        reason: class file for androidx.annotation.RestrictTo$Scope not found","body":"Found another issue that might link to the solution:  2&gt;        JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX 2&gt;        reason: class file for androidx.annotation.RestrictTo$Scope not found"},{"owner":{"account_id":18105680,"reputation":623,"user_id":13163025,"display_name":"o_w"},"score":0,"creation_date":1683448296,"post_id":76188745,"comment_id":134365935,"body_markdown":"Check in VS, under Tools -&gt; Android -&gt; Android SDK Manager, if you have the selected version of the OS installed","body":"Check in VS, under Tools -&gt; Android -&gt; Android SDK Manager, if you have the selected version of the OS installed"},{"owner":{"account_id":23390850,"reputation":9996,"user_id":17455524,"display_name":"Liyun Zhang - MSFT"},"score":0,"creation_date":1683696019,"post_id":76188745,"comment_id":134404084,"body_markdown":"Did you try to set the `&lt;TargetFrameworks&gt;net7.0-android&lt;/TargetFrameworks&gt;` as net6.0-android? I have checked the  xamarin.kotlin.stdlib package and found it support .net6.0 not .net7.0.","body":"Did you try to set the <code>&lt;TargetFrameworks&gt;net7.0-android&lt;&#47;TargetFrameworks&gt;</code> as net6.0-android? I have checked the  xamarin.kotlin.stdlib package and found it support .net6.0 not .net7.0."},{"owner":{"account_id":7631826,"reputation":27,"user_id":5786637,"display_name":"K. Moteluk"},"score":0,"creation_date":1683785235,"post_id":76188745,"comment_id":134420276,"body_markdown":"Yeah, going with net6.0 together with implicitly including xamarin.kotlin.stdlib JDK7 for version 1.8.0 solved this issue :)","body":"Yeah, going with net6.0 together with implicitly including xamarin.kotlin.stdlib JDK7 for version 1.8.0 solved this issue :)"}],"answers":[{"tags":[],"owner":{"account_id":7631826,"reputation":27,"user_id":5786637,"display_name":"K. Moteluk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683785311,"creation_date":1683785311,"answer_id":76224593,"question_id":76188745,"body_markdown":"Solution that worked for me:\r\n* Downgrading entire solution from net7.0 to net6.0\r\n* Implicitly including xamarin.kotlin.stdlib JDK7 (and JDK8 just in case) for version 1.8.0.","title":"Error in xamarin.kotlin.stdlib ($ReflectSdkVersion is defined multiple times) after migration from Xamarin.Forms","body":"<p>Solution that worked for me:</p>\n<ul>\n<li>Downgrading entire solution from net7.0 to net6.0</li>\n<li>Implicitly including xamarin.kotlin.stdlib JDK7 (and JDK8 just in case) for version 1.8.0.</li>\n</ul>\n"}],"owner":{"account_id":7631826,"reputation":27,"user_id":5786637,"display_name":"K. Moteluk"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76224593,"answer_count":1,"score":0,"last_activity_date":1683785311,"creation_date":1683374407,"question_id":76188745,"body_markdown":"For last few days i;m fighting with migrating my app from Xamarin.Forms to MAUI.\r\nI solved dozens of errors already but this one - i cannot wrap my head around.\r\n\r\nError:\r\n\r\n    MSBUILD : java.exe error JAVA0000: Error in .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class:\r\n    MSBUILD : java.exe error JAVA0000: Type kotlin.internal.jdk7.JDK7PlatformImplementations$ReflectSdkVersion is defined multiple times: .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class, .nuget\\packages\\xamarin.kotlin.stdlib.jdk7\\1.7.20.1\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-jdk7-1.7.20.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class\r\n    java.exe error JAVA0000: Compilation failed\r\n    java.exe error JAVA0000: java.lang.RuntimeException: com.android.tools.r8.CompilationFailedException: Compilation failed to complete, origin: .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar\r\n    2&gt;MSBUILD : java.exe error JAVA0000: kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class\r\n\r\nFollowed by hundreds of warnings such as:\r\n\r\n    2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX\r\n    2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY\r\n    2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY\r\n    2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX\r\n\r\nMy android .csproj Packages (i suspect nugets)\r\n\r\n     &lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;\r\n     &lt;PropertyGroup&gt;\r\n     &lt;OutputType&gt;Exe&lt;/OutputType&gt;\r\n     &lt;PublishTrimmed&gt;true&lt;/PublishTrimmed&gt;\r\n     &lt;TrimMode&gt;link&lt;/TrimMode&gt;\r\n     &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\r\n     &lt;UseMaui&gt;true&lt;/UseMaui&gt;\r\n\r\n    &lt;SupportedOSPlatformVersion Condition=&quot;$([MSBuild]::GetTargetPlatformIdentifier(&#39;$(TargetFramework)&#39;)) == &#39;android&#39;&quot;&gt;29.0&lt;/SupportedOSPlatformVersion&gt;\r\n       &lt;/PropertyGroup&gt;\r\n       &lt;PropertyGroup Condition=&quot; &#39;$(Configuration)|$(Platform)&#39; == &#39;Debug|AnyCPU&#39; &quot;&gt;\r\n         &lt;EnableLLVM&gt;true&lt;/EnableLLVM&gt;\r\n         &lt;AndroidEnableProfiledAot&gt;false&lt;/AndroidEnableProfiledAot&gt;\r\n         &lt;EmbedAssembliesIntoApk&gt;true&lt;/EmbedAssembliesIntoApk&gt;\r\n         &lt;!--&lt;AndroidDexTool&gt;d8&lt;/AndroidDexTool&gt;\r\n         &lt;AndroidLinkTool&gt;r8&lt;/AndroidLinkTool&gt;--&gt;\r\n         &lt;AndroidPackageFormat&gt;aab&lt;/AndroidPackageFormat&gt;\r\n         &lt;AndroidCreatePackagePerAbi&gt;false&lt;/AndroidCreatePackagePerAbi&gt;\r\n       &lt;/PropertyGroup&gt;\r\n       &lt;PropertyGroup&gt;\r\n         &lt;TargetFrameworks&gt;net7.0-android&lt;/TargetFrameworks&gt;\r\n       &lt;/PropertyGroup&gt;\r\n       &lt;PropertyGroup Condition=&quot;&#39;$(Configuration)|$(TargetFramework)|$(Platform)&#39;==&#39;Debug|net7.0-android|AnyCPU&#39;&quot;&gt;\r\n         &lt;Optimize&gt;True&lt;/Optimize&gt;\r\n       &lt;/PropertyGroup&gt;\r\n       &lt;PropertyGroup Condition=&quot;&#39;$(Configuration)|$(TargetFramework)|$(Platform)&#39;==&#39;Release|net7.0-android|AnyCPU&#39;&quot; /&gt;\r\n       &lt;ItemGroup&gt;\r\n         &lt;PackageReference Include=&quot;CommunityToolkit.Maui.Markup&quot; Version=&quot;3.1.0&quot; /&gt;\r\n         &lt;PackageReference Include=&quot;FirebaseAuthentication.net&quot;&gt;\r\n           &lt;Version&gt;4.0.2&lt;/Version&gt;\r\n         &lt;/PackageReference&gt;\r\n         &lt;PackageReference Include=&quot;Refractored.MvvmHelpers&quot; Version=&quot;1.6.2&quot; /&gt;\r\n         &lt;PackageReference Include=&quot;sqlite-net-pcl&quot;&gt;\r\n           &lt;Version&gt;1.8.116&lt;/Version&gt;\r\n         &lt;/PackageReference&gt;\r\n         &lt;PackageReference Include=&quot;Xamarin.AndroidX.Annotation&quot; Version=&quot;1.6.0.1&quot; /&gt;\r\n         &lt;PackageReference Include=&quot;Xamarin.AndroidX.RecyclerView&quot;&gt;\r\n           &lt;Version&gt;1.3.0&lt;/Version&gt;\r\n         &lt;/PackageReference&gt;\r\n         &lt;PackageReference Include=&quot;Microsoft.DotNet.UpgradeAssistant.Extensions.Default.Analyzers&quot; Version=&quot;0.4.421302&quot;&gt;\r\n          &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;\r\n         &lt;/PackageReference&gt;\r\n         &lt;PackageReference Include=&quot;Xamarin.AndroidX.Work.Runtime&quot; Version=&quot;2.7.1.5&quot; /&gt;\r\n         &lt;PackageReference Include=&quot;Xamarin.GooglePlayServices.Base&quot; Version=&quot;118.1.0&quot; /&gt;\r\n    &lt;/ItemGroup&gt;\r\n    &lt;ItemGroup&gt;\r\n    &lt;GoogleServicesJson Include=&quot;google-services.json&quot; /&gt;\r\n    &lt;!--&lt;ProguardConfiguration Include=&quot;proguard.cfg&quot; /&gt;--&gt;\r\n    &lt;/ItemGroup&gt;\r\n    &lt;/Project&gt;","title":"Error in xamarin.kotlin.stdlib ($ReflectSdkVersion is defined multiple times) after migration from Xamarin.Forms","body":"<p>For last few days i;m fighting with migrating my app from Xamarin.Forms to MAUI.\nI solved dozens of errors already but this one - i cannot wrap my head around.</p>\n<p>Error:</p>\n<pre><code>MSBUILD : java.exe error JAVA0000: Error in .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class:\nMSBUILD : java.exe error JAVA0000: Type kotlin.internal.jdk7.JDK7PlatformImplementations$ReflectSdkVersion is defined multiple times: .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class, .nuget\\packages\\xamarin.kotlin.stdlib.jdk7\\1.7.20.1\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-jdk7-1.7.20.jar:kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class\njava.exe error JAVA0000: Compilation failed\njava.exe error JAVA0000: java.lang.RuntimeException: com.android.tools.r8.CompilationFailedException: Compilation failed to complete, origin: .nuget\\packages\\xamarin.kotlin.stdlib\\1.8.10\\buildTransitive\\net6.0-android31.0....\\jar\\org.jetbrains.kotlin.kotlin-stdlib-1.8.10.jar\n2&gt;MSBUILD : java.exe error JAVA0000: kotlin/internal/jdk7/JDK7PlatformImplementations$ReflectSdkVersion.class\n</code></pre>\n<p>Followed by hundreds of warnings such as:</p>\n<pre><code>2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX\n2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY\n2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY\n2&gt;JAVAC : warning : unknown enum constant Scope.LIBRARY_GROUP_PREFIX\n</code></pre>\n<p>My android .csproj Packages (i suspect nugets)</p>\n<pre><code> &lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;\n &lt;PropertyGroup&gt;\n &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n &lt;PublishTrimmed&gt;true&lt;/PublishTrimmed&gt;\n &lt;TrimMode&gt;link&lt;/TrimMode&gt;\n &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n &lt;UseMaui&gt;true&lt;/UseMaui&gt;\n\n&lt;SupportedOSPlatformVersion Condition=&quot;$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'android'&quot;&gt;29.0&lt;/SupportedOSPlatformVersion&gt;\n   &lt;/PropertyGroup&gt;\n   &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;\n     &lt;EnableLLVM&gt;true&lt;/EnableLLVM&gt;\n     &lt;AndroidEnableProfiledAot&gt;false&lt;/AndroidEnableProfiledAot&gt;\n     &lt;EmbedAssembliesIntoApk&gt;true&lt;/EmbedAssembliesIntoApk&gt;\n     &lt;!--&lt;AndroidDexTool&gt;d8&lt;/AndroidDexTool&gt;\n     &lt;AndroidLinkTool&gt;r8&lt;/AndroidLinkTool&gt;--&gt;\n     &lt;AndroidPackageFormat&gt;aab&lt;/AndroidPackageFormat&gt;\n     &lt;AndroidCreatePackagePerAbi&gt;false&lt;/AndroidCreatePackagePerAbi&gt;\n   &lt;/PropertyGroup&gt;\n   &lt;PropertyGroup&gt;\n     &lt;TargetFrameworks&gt;net7.0-android&lt;/TargetFrameworks&gt;\n   &lt;/PropertyGroup&gt;\n   &lt;PropertyGroup Condition=&quot;'$(Configuration)|$(TargetFramework)|$(Platform)'=='Debug|net7.0-android|AnyCPU'&quot;&gt;\n     &lt;Optimize&gt;True&lt;/Optimize&gt;\n   &lt;/PropertyGroup&gt;\n   &lt;PropertyGroup Condition=&quot;'$(Configuration)|$(TargetFramework)|$(Platform)'=='Release|net7.0-android|AnyCPU'&quot; /&gt;\n   &lt;ItemGroup&gt;\n     &lt;PackageReference Include=&quot;CommunityToolkit.Maui.Markup&quot; Version=&quot;3.1.0&quot; /&gt;\n     &lt;PackageReference Include=&quot;FirebaseAuthentication.net&quot;&gt;\n       &lt;Version&gt;4.0.2&lt;/Version&gt;\n     &lt;/PackageReference&gt;\n     &lt;PackageReference Include=&quot;Refractored.MvvmHelpers&quot; Version=&quot;1.6.2&quot; /&gt;\n     &lt;PackageReference Include=&quot;sqlite-net-pcl&quot;&gt;\n       &lt;Version&gt;1.8.116&lt;/Version&gt;\n     &lt;/PackageReference&gt;\n     &lt;PackageReference Include=&quot;Xamarin.AndroidX.Annotation&quot; Version=&quot;1.6.0.1&quot; /&gt;\n     &lt;PackageReference Include=&quot;Xamarin.AndroidX.RecyclerView&quot;&gt;\n       &lt;Version&gt;1.3.0&lt;/Version&gt;\n     &lt;/PackageReference&gt;\n     &lt;PackageReference Include=&quot;Microsoft.DotNet.UpgradeAssistant.Extensions.Default.Analyzers&quot; Version=&quot;0.4.421302&quot;&gt;\n      &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;\n     &lt;/PackageReference&gt;\n     &lt;PackageReference Include=&quot;Xamarin.AndroidX.Work.Runtime&quot; Version=&quot;2.7.1.5&quot; /&gt;\n     &lt;PackageReference Include=&quot;Xamarin.GooglePlayServices.Base&quot; Version=&quot;118.1.0&quot; /&gt;\n&lt;/ItemGroup&gt;\n&lt;ItemGroup&gt;\n&lt;GoogleServicesJson Include=&quot;google-services.json&quot; /&gt;\n&lt;!--&lt;ProguardConfiguration Include=&quot;proguard.cfg&quot; /&gt;--&gt;\n&lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n"},{"tags":["java","java-8","nullpointerexception","null","option-type"],"comments":[{"owner":{"account_id":3888087,"reputation":296,"user_id":3218967,"display_name":"LoveToCode"},"score":1,"creation_date":1475666715,"post_id":31696485,"comment_id":67031944,"body_markdown":"please tell me which package must import to use this?","body":"please tell me which package must import to use this?"},{"owner":{"account_id":228170,"reputation":16153,"user_id":490315,"accept_rate":94,"display_name":"whirlwin"},"score":5,"creation_date":1475675086,"post_id":31696485,"comment_id":67037947,"body_markdown":"@LoveToCode `java.util.Optional` - It&#39;s available if you&#39;re using JDK 8 or later","body":"@LoveToCode <code>java.util.Optional</code> - It&#39;s available if you&#39;re using JDK 8 or later"},{"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"score":46,"creation_date":1528891825,"post_id":31696485,"comment_id":88677492,"body_markdown":"I would love if they would have `ofNullable()` named `of()` and and `of()` named `ofNotNull()`","body":"I would love if they would have <code>ofNullable()</code> named <code>of()</code> and and <code>of()</code> named <code>ofNotNull()</code>"},{"owner":{"account_id":4777913,"reputation":2557,"user_id":3860531,"display_name":"Sumesh TG"},"score":0,"creation_date":1536664329,"post_id":31696485,"comment_id":91496398,"body_markdown":"Please refer https://www.baeldung.com/java-optional","body":"Please refer <a href=\"https://www.baeldung.com/java-optional\" rel=\"nofollow noreferrer\">baeldung.com/java-optional</a>"},{"owner":{"account_id":8328700,"reputation":168,"user_id":7676653,"display_name":"Karan Arora"},"score":0,"creation_date":1558385184,"post_id":31696485,"comment_id":99076173,"body_markdown":"As you are asking &quot;why does&#160;Optional.of&#160;exist at all? Why not just use&#160;Optional.ofNullable&#160;and be on the safe side at all times?&quot; Let&#39;s say if user&#39;s required data is not present, then we must throw exception. So, it totally depends on your usecase. https://www.baeldung.com/java-optional-throw-exception","body":"As you are asking &quot;why does Optional.of exist at all? Why not just use Optional.ofNullable and be on the safe side at all times?&quot; Let&#39;s say if user&#39;s required data is not present, then we must throw exception. So, it totally depends on your usecase. <a href=\"https://www.baeldung.com/java-optional-throw-exception\" rel=\"nofollow noreferrer\">baeldung.com/java-optional-throw-exception</a>"}],"answers":[{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":9,"up_vote_count":448,"is_accepted":true,"score":439,"last_activity_date":1438162502,"creation_date":1438162502,"answer_id":31696584,"question_id":31696485,"body_markdown":"Your question is based on assumption that the code which may throw `NullPointerException` is worse than the code which may not. This assumption is wrong. If you expect that your `foobar` is never null due to the program logic, it&#39;s much better to use `Optional.of(foobar)` as you will see a `NullPointerException` which will indicate that your program has a bug. If you use `Optional.ofNullable(foobar)` and the `foobar` happens to be `null` due to the bug, then your program will silently continue working incorrectly, which may be a bigger disaster. This way an error may occur much later and it would be much harder to understand at which point it went wrong.","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>Your question is based on assumption that the code which may throw <code>NullPointerException</code> is worse than the code which may not. This assumption is wrong. If you expect that your <code>foobar</code> is never null due to the program logic, it's much better to use <code>Optional.of(foobar)</code> as you will see a <code>NullPointerException</code> which will indicate that your program has a bug. If you use <code>Optional.ofNullable(foobar)</code> and the <code>foobar</code> happens to be <code>null</code> due to the bug, then your program will silently continue working incorrectly, which may be a bigger disaster. This way an error may occur much later and it would be much harder to understand at which point it went wrong.</p>\n"},{"tags":[],"owner":{"account_id":8328700,"reputation":168,"user_id":7676653,"display_name":"Karan Arora"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1611832813,"creation_date":1534236045,"answer_id":51837219,"question_id":31696485,"body_markdown":"In addition, If you know your code should not work if object is null, you can throw exception by using **`Optional.orElseThrow`** \r\n\r\n    String nullName = null;\r\n\r\n    String name = Optional.ofNullable(nullName)\r\n                          .orElseThrow(NullPointerException::new);\r\n                       // .orElseThrow(CustomException::new);\r\n\r\n","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>In addition, If you know your code should not work if object is null, you can throw exception by using <strong><code>Optional.orElseThrow</code></strong></p>\n<pre><code>String nullName = null;\n\nString name = Optional.ofNullable(nullName)\n                      .orElseThrow(NullPointerException::new);\n                   // .orElseThrow(CustomException::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9146210,"reputation":66,"user_id":6802317,"display_name":"espendennis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593670083,"creation_date":1536663487,"answer_id":52274352,"question_id":31696485,"body_markdown":"Optional should mainly be used for results of Services anyway. In the service you know what you have at hand and return Optional.of(someValue) if you have a result and return Optional.empty() if you don&#39;t. In this case, someValue should never be null and still, you return an Optional.","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>Optional should mainly be used for results of Services anyway. In the service you know what you have at hand and return Optional.of(someValue) if you have a result and return Optional.empty() if you don't. In this case, someValue should never be null and still, you return an Optional.</p>\n"},{"tags":[],"owner":{"account_id":7275363,"reputation":31,"user_id":5547000,"display_name":"Gautam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563998528,"creation_date":1563952860,"answer_id":57177340,"question_id":31696485,"body_markdown":"This depends upon scenarios.\r\n\r\nLet&#39;s say you have some business functionality and you need to process something with that value further but having `null` value at time of processing would impact it. \r\n\r\nThen, in that case, you can use `Optional&lt;?&gt;`.\r\n\r\n    String nullName = null;\r\n\r\n    String name = Optional.ofNullable(nullName)\r\n                          .map(&lt;doSomething&gt;)\r\n                          .orElse(&quot;Default value in case of null&quot;);","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>This depends upon scenarios.</p>\n\n<p>Let's say you have some business functionality and you need to process something with that value further but having <code>null</code> value at time of processing would impact it. </p>\n\n<p>Then, in that case, you can use <code>Optional&lt;?&gt;</code>.</p>\n\n<pre><code>String nullName = null;\n\nString name = Optional.ofNullable(nullName)\n                      .map(&lt;doSomething&gt;)\n                      .orElse(\"Default value in case of null\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10743483,"reputation":561,"user_id":7905696,"display_name":"Nishant"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663409612,"creation_date":1663409612,"answer_id":73753985,"question_id":31696485,"body_markdown":"Main difference b/w Optional.of and Optional.ofNullable is that if the element wrapped under Optional is null, Optional.of will raise Null pointer exception and will stop further processing of code. whereas, Optional.ofNullable will just ignore null element/object and returns Optional.empty() or NoSuchElementPresent.","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>Main difference b/w Optional.of and Optional.ofNullable is that if the element wrapped under Optional is null, Optional.of will raise Null pointer exception and will stop further processing of code. whereas, Optional.ofNullable will just ignore null element/object and returns Optional.empty() or NoSuchElementPresent.</p>\n"},{"tags":[],"owner":{"account_id":1470353,"reputation":1531,"user_id":1382079,"display_name":"Tadayoshi Sato"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1683784839,"creation_date":1683784839,"answer_id":76224546,"question_id":31696485,"body_markdown":"This question is over seven years old, but I felt so frustrated by the best answer that I had to write my answer.\r\n\r\nThe reason why the existing answers, including the best one, are failing to answer the question properly is because the original question is not appropriate in the first place. If you do not set the right question, you will not get the right answer.\r\n\r\nWhat is improper about the original question is that it is comparing the wrong pair. There are three static methods in `java.util.Optional`.\r\n\r\n- `Optional#empty()`\r\n- `Optional#of(T value)`\r\n- `Optional#ofNullable(T value)`\r\n\r\nThe pair is not `of` and `ofNullable`, but `of` and `empty`. This is because these two are the factory methods that create new instances, where `Optional` doesn&#39;t provide a public constructor.\r\n\r\nYou can choose from `of` and `empty` when you want to create a new instance of `Optional`.\r\n\r\n```java\r\nOptional&lt;Integer&gt; answer = Optional.of(42); // or Optional.empty() if it&#39;s absent\r\n```\r\n\r\nIn this usage, you are sure you don&#39;t pass `null` to `of()`, because it is you who are initialising the instance. If you want to create an empty instance, you can just choose `empty()` instead. Therefore, if you are passing a `null` value to `of()` at this stage, it is obviously a bug and you should receive an NPE.\r\n\r\nOne of the commenters in this question suggested that, since `ofNullable` is more useful than `of`, it would have been better if `ofNullable` were named as `of` and `of` were `ofNotNull`. This opinion is well taken. However, when you consider that `of` and `empty` are the official `Optional` factory methods, it makes sense that the more commonly used one is defined with a shorter name. Furthermore, it is also a good name that is consistent with the naming of the other Java collection class factory methods such as `List#of()`, `Set#of()`, and `Map#of()`.\r\n\r\nSo what is `ofNullable`? This one is actually a utility adapter method to bridge the null-eliminated `Optional` world with the legacy world full of `null`s. It is used to wrap variables defined somewhere else, or return values received from external services, in `Optional` to make them null-safe.\r\n\r\n```java\r\nString foo = someExternalAPI();\r\nOptional&lt;String&gt; bar = Optional.ofNullable(foo);\r\n```\r\n\r\nAs this is a utility method rather than a primary factory method, it should be generally acceptable to give it a slightly longer name, and it is even good practice that a utility method has a descriptive name which tells its intent clearly.\r\n\r\n### Summary\r\n\r\n- What is paired with `Optional#of(T value)` is `Optional#empty()`.\r\n- Use `of` or `empty` to create a new `Optional` instance.\r\n- Use `ofNullable` to wrap an existing variable as `Optional`.\r\n","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>This question is over seven years old, but I felt so frustrated by the best answer that I had to write my answer.</p>\n<p>The reason why the existing answers, including the best one, are failing to answer the question properly is because the original question is not appropriate in the first place. If you do not set the right question, you will not get the right answer.</p>\n<p>What is improper about the original question is that it is comparing the wrong pair. There are three static methods in <code>java.util.Optional</code>.</p>\n<ul>\n<li><code>Optional#empty()</code></li>\n<li><code>Optional#of(T value)</code></li>\n<li><code>Optional#ofNullable(T value)</code></li>\n</ul>\n<p>The pair is not <code>of</code> and <code>ofNullable</code>, but <code>of</code> and <code>empty</code>. This is because these two are the factory methods that create new instances, where <code>Optional</code> doesn't provide a public constructor.</p>\n<p>You can choose from <code>of</code> and <code>empty</code> when you want to create a new instance of <code>Optional</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;Integer&gt; answer = Optional.of(42); // or Optional.empty() if it's absent\n</code></pre>\n<p>In this usage, you are sure you don't pass <code>null</code> to <code>of()</code>, because it is you who are initialising the instance. If you want to create an empty instance, you can just choose <code>empty()</code> instead. Therefore, if you are passing a <code>null</code> value to <code>of()</code> at this stage, it is obviously a bug and you should receive an NPE.</p>\n<p>One of the commenters in this question suggested that, since <code>ofNullable</code> is more useful than <code>of</code>, it would have been better if <code>ofNullable</code> were named as <code>of</code> and <code>of</code> were <code>ofNotNull</code>. This opinion is well taken. However, when you consider that <code>of</code> and <code>empty</code> are the official <code>Optional</code> factory methods, it makes sense that the more commonly used one is defined with a shorter name. Furthermore, it is also a good name that is consistent with the naming of the other Java collection class factory methods such as <code>List#of()</code>, <code>Set#of()</code>, and <code>Map#of()</code>.</p>\n<p>So what is <code>ofNullable</code>? This one is actually a utility adapter method to bridge the null-eliminated <code>Optional</code> world with the legacy world full of <code>null</code>s. It is used to wrap variables defined somewhere else, or return values received from external services, in <code>Optional</code> to make them null-safe.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String foo = someExternalAPI();\nOptional&lt;String&gt; bar = Optional.ofNullable(foo);\n</code></pre>\n<p>As this is a utility method rather than a primary factory method, it should be generally acceptable to give it a slightly longer name, and it is even good practice that a utility method has a descriptive name which tells its intent clearly.</p>\n<h3>Summary</h3>\n<ul>\n<li>What is paired with <code>Optional#of(T value)</code> is <code>Optional#empty()</code>.</li>\n<li>Use <code>of</code> or <code>empty</code> to create a new <code>Optional</code> instance.</li>\n<li>Use <code>ofNullable</code> to wrap an existing variable as <code>Optional</code>.</li>\n</ul>\n"}],"owner":{"account_id":228170,"reputation":16153,"user_id":490315,"accept_rate":94,"display_name":"whirlwin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216265,"favorite_count":0,"down_vote_count":0,"up_vote_count":332,"accepted_answer_id":31696584,"answer_count":6,"score":332,"last_activity_date":1683784839,"creation_date":1438162258,"question_id":31696485,"body_markdown":"When using the Java 8 `Optional` class, there are two ways in which a value can be wrapped in an optional.\r\n\r\n    String foobar = &lt;value or null&gt;;\r\n    Optional.of(foobar);         // May throw NullPointerException\r\n    Optional.ofNullable(foobar); // Safe from NullPointerException\r\n\r\nI understand `Optional.ofNullable` is the only safe way of using `Optional`, but why does `Optional.of` exist at all? Why not just use `Optional.ofNullable`  and be on the safe side at all times?\r\n","title":"Why use Optional.of over Optional.ofNullable?","body":"<p>When using the Java 8 <code>Optional</code> class, there are two ways in which a value can be wrapped in an optional.</p>\n\n<pre><code>String foobar = &lt;value or null&gt;;\nOptional.of(foobar);         // May throw NullPointerException\nOptional.ofNullable(foobar); // Safe from NullPointerException\n</code></pre>\n\n<p>I understand <code>Optional.ofNullable</code> is the only safe way of using <code>Optional</code>, but why does <code>Optional.of</code> exist at all? Why not just use <code>Optional.ofNullable</code>  and be on the safe side at all times?</p>\n"},{"tags":["java","spring-boot","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683709334,"post_id":76215321,"comment_id":134406698,"body_markdown":"It&#39;s unclear why `&lt;bind&gt;` is necessary. If it&#39;s passed as a method parameter, you should be able to use it directly. Showing the `&lt;if&gt;` version might help us understand the issue.","body":"It&#39;s unclear why <code>&lt;bind&gt;</code> is necessary. If it&#39;s passed as a method parameter, you should be able to use it directly. Showing the <code>&lt;if&gt;</code> version might help us understand the issue."},{"owner":{"account_id":5277424,"reputation":2670,"user_id":4213803,"accept_rate":80,"display_name":"V&#252;sal"},"score":0,"creation_date":1683714800,"post_id":76215321,"comment_id":134408009,"body_markdown":"There seems to be `when ... otherwise` tags: https://mybatis.org/mybatis-3/dynamic-sql.html#choose-when-otherwise - maybe you can try it.","body":"There seems to be <code>when ... otherwise</code> tags: <a href=\"https://mybatis.org/mybatis-3/dynamic-sql.html#choose-when-otherwise\" rel=\"nofollow noreferrer\">mybatis.org/mybatis-3/dynamic-sql.html#choose-when-otherwise</a> - maybe you can try it."},{"owner":{"account_id":5277424,"reputation":2670,"user_id":4213803,"accept_rate":80,"display_name":"V&#252;sal"},"score":0,"creation_date":1683715236,"post_id":76215321,"comment_id":134408086,"body_markdown":"or use `_parameter` : https://mybatis.org/mybatis-3/dynamic-sql.html#bind","body":"or use <code>_parameter</code> : <a href=\"https://mybatis.org/mybatis-3/dynamic-sql.html#bind\" rel=\"nofollow noreferrer\">mybatis.org/mybatis-3/dynamic-sql.html#bind</a>"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683717071,"post_id":76215321,"comment_id":134408499,"body_markdown":"@HamidSultanzadeh You can use parameter inside `&lt;include&gt;`.  If it does not work, there must be another problem. If you need further help, try creating a small demo project like [these](https://github.com/harawata/mybatis-issues). If the same problem reproduces with the demo project, share it on GitHub or somewhere so that we can take a look. Be sure to make the demo as simple as possible (i.e. minimum number of columns, parameters, etc.).","body":"@HamidSultanzadeh You can use parameter inside <code>&lt;include&gt;</code>.  If it does not work, there must be another problem. If you need further help, try creating a small demo project like <a href=\"https://github.com/harawata/mybatis-issues\" rel=\"nofollow noreferrer\">these</a>. If the same problem reproduces with the demo project, share it on GitHub or somewhere so that we can take a look. Be sure to make the demo as simple as possible (i.e. minimum number of columns, parameters, etc.)."},{"owner":{"account_id":15335846,"reputation":1,"user_id":11064223,"display_name":"Hamid Sultanzadeh"},"score":0,"creation_date":1683783876,"post_id":76215321,"comment_id":134420081,"body_markdown":"@V&#252;sal, thanks a lot. _parameter worked!","body":"@V&#252;sal, thanks a lot. _parameter worked!"}],"owner":{"account_id":15335846,"reputation":1,"user_id":11064223,"display_name":"Hamid Sultanzadeh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683784474,"creation_date":1683698749,"question_id":76215321,"body_markdown":"I&#39;m facing an issue with my &lt;bind&gt; variable in MyBatis select query taking its value from the outside. Like the below code\r\n\r\n```\r\nSELECT\r\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;true&quot;/&gt;  // this line is current form. I want to set value from outside in here\r\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;checkRolePrice&quot;/&gt; // something like that, or #{checkRolePrice}\r\n            \r\n            &lt;include refid=&quot;digitalAppPlanBaseColumns&quot;&gt;\r\n                &lt;property name=&quot;prefix&quot; value=&quot;&quot;/&gt;\r\n            &lt;/include&gt;,\r\n\r\n            da.ICON_URL,\r\n            da.CATEGORY_ID,\r\n            da.TYPE,\r\n...\r\n```\r\n\r\n```\r\nList&lt;DigitalAppPlanWrapper&gt; getAllDigitalApps(@Param(&quot;role&quot;) String roleName,\r\n                                              @Param(&quot;deviceType&quot;) String source,\r\n                                              @Param(&quot;planIds&quot;) List&lt;Long&gt; planIds,\r\n                                              @Param(&quot;trial&quot;) Integer trial, \r\n                                              @Param(&quot;checkRolePrice&quot;) boolean checkRolePrice);\r\n```\r\n\r\nI want to derive `checkRolePrice` bind-variable&#39;s value from the method&#39;s parameter.\r\n\r\nDetails:\r\n\r\n - MyBatis starter version: 3.0.1 \r\n - Spring Boot: 3.0.4 \r\n - Java: 17\r\n\r\nI tried to use two if tags to get the result. It worked, but I&#39;m looking for a more readable and simple way to achieve that.\r\n\r\n\r\nEDIT V1: \r\n\r\nI use this `&lt;bind&gt;` to define which column I will choose inside `&lt;include&gt;` block. I can&#39;t use the method parameter inside `&lt;include&gt;` block. That&#39;s why I have to use `&lt;bind&gt;` variable. \r\n\r\n```\r\n&lt;sql id=&quot;digitalAppPlanBaseColumns&quot;&gt;\r\n        dap.ID                      ${prefix}ID,\r\n        dap.APP_ID                  ${prefix}APP_ID,\r\n        &lt;if test=&quot;checkRolePrice&quot;&gt;\r\n            CASE WHEN dapr.role_price is not null\r\n                THEN dapr.role_price\r\n                ELSE dap.price\r\n            end                     ${prefix}PRICE,\r\n        &lt;/if&gt;\r\n        &lt;if test=&quot;!checkRolePrice&quot;&gt;\r\n            dap.PRICE               ${prefix}PRICE,\r\n        &lt;/if&gt;\r\n...\r\n```\r\n\r\nThis solution seems a little bit weird. \r\nI used the role parameter instead of a new one.\r\n```\r\nSELECT\r\n        &lt;if test=&quot;role != null&quot;&gt;\r\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/if&gt;\r\n        &lt;if test=&quot;role == null&quot;&gt;\r\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;false&quot;/&gt;\r\n        &lt;/if&gt;\r\n```\r\n\r\n&lt;h3&gt;THE SOLUTION:&lt;/h3&gt;\r\n\r\n\r\nI used `_parameter`, and it worked.\r\n\r\n[doc][1]\r\n\r\n`&lt;bind name=&quot;checkRolePrice&quot; value=&quot;_parameter.role!=null&quot;/&gt;`\r\n\r\n\r\n  [1]: https://mybatis.org/mybatis-3/dynamic-sql.html#bind","title":"MyBatis - dynamic &lt;bind&gt; variable","body":"<p>I'm facing an issue with my  variable in MyBatis select query taking its value from the outside. Like the below code</p>\n<pre><code>SELECT\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;true&quot;/&gt;  // this line is current form. I want to set value from outside in here\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;checkRolePrice&quot;/&gt; // something like that, or #{checkRolePrice}\n            \n            &lt;include refid=&quot;digitalAppPlanBaseColumns&quot;&gt;\n                &lt;property name=&quot;prefix&quot; value=&quot;&quot;/&gt;\n            &lt;/include&gt;,\n\n            da.ICON_URL,\n            da.CATEGORY_ID,\n            da.TYPE,\n...\n</code></pre>\n<pre><code>List&lt;DigitalAppPlanWrapper&gt; getAllDigitalApps(@Param(&quot;role&quot;) String roleName,\n                                              @Param(&quot;deviceType&quot;) String source,\n                                              @Param(&quot;planIds&quot;) List&lt;Long&gt; planIds,\n                                              @Param(&quot;trial&quot;) Integer trial, \n                                              @Param(&quot;checkRolePrice&quot;) boolean checkRolePrice);\n</code></pre>\n<p>I want to derive <code>checkRolePrice</code> bind-variable's value from the method's parameter.</p>\n<p>Details:</p>\n<ul>\n<li>MyBatis starter version: 3.0.1</li>\n<li>Spring Boot: 3.0.4</li>\n<li>Java: 17</li>\n</ul>\n<p>I tried to use two if tags to get the result. It worked, but I'm looking for a more readable and simple way to achieve that.</p>\n<p>EDIT V1:</p>\n<p>I use this <code>&lt;bind&gt;</code> to define which column I will choose inside <code>&lt;include&gt;</code> block. I can't use the method parameter inside <code>&lt;include&gt;</code> block. That's why I have to use <code>&lt;bind&gt;</code> variable.</p>\n<pre><code>&lt;sql id=&quot;digitalAppPlanBaseColumns&quot;&gt;\n        dap.ID                      ${prefix}ID,\n        dap.APP_ID                  ${prefix}APP_ID,\n        &lt;if test=&quot;checkRolePrice&quot;&gt;\n            CASE WHEN dapr.role_price is not null\n                THEN dapr.role_price\n                ELSE dap.price\n            end                     ${prefix}PRICE,\n        &lt;/if&gt;\n        &lt;if test=&quot;!checkRolePrice&quot;&gt;\n            dap.PRICE               ${prefix}PRICE,\n        &lt;/if&gt;\n...\n</code></pre>\n<p>This solution seems a little bit weird.\nI used the role parameter instead of a new one.</p>\n<pre><code>SELECT\n        &lt;if test=&quot;role != null&quot;&gt;\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;true&quot;/&gt;\n        &lt;/if&gt;\n        &lt;if test=&quot;role == null&quot;&gt;\n            &lt;bind name=&quot;checkRolePrice&quot; value=&quot;false&quot;/&gt;\n        &lt;/if&gt;\n</code></pre>\n<h3>THE SOLUTION:</h3>\n<p>I used <code>_parameter</code>, and it worked.</p>\n<p><a href=\"https://mybatis.org/mybatis-3/dynamic-sql.html#bind\" rel=\"nofollow noreferrer\">doc</a></p>\n<p><code>&lt;bind name=&quot;checkRolePrice&quot; value=&quot;_parameter.role!=null&quot;/&gt;</code></p>\n"},{"tags":["java","mysql","record","mybatis-plus"],"owner":{"account_id":28570297,"reputation":1,"user_id":21872629,"display_name":"user21872629"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683784341,"creation_date":1683735339,"question_id":76220622,"body_markdown":"I hava a record class as java bean:\r\n```java\r\n@With\r\n@TableName(value = &quot;user&quot;)\r\npublic record User(\r\n        @TableId(value = &quot;uid&quot;, type = IdType.AUTO)\r\n        Integer id,\r\n        String username,\r\n        String password,\r\n) {}\r\n```\r\nthen I use mybatis-plus to manage it:\r\n```java\r\npublic class UserServiceImpl implements UserService {\r\n    private final UserMapper userMapper;\r\n    public UserServiceImpl(UserMapper userMapper) {\r\n        this.userMapper = userMapper;\r\n    }\r\n\r\n    @Override\r\n    public CommonResponse&lt;Object&gt; register(User user) {\r\n\r\n        String password = &quot;9ABB136AA0B984E8&quot;;\r\n        User newUser = user.withPassword(password)\r\n\r\n        int rows = userMapper.insert(newUser);  // got a MyBatisSystemException\r\n        if (rows == 0) {\r\n            return CommonResponse.createResponseForError();\r\n        }\r\n        return CommonResponse.createResponseForSuccess();\r\n    }\r\n}\r\n```\r\nThe UserMapper is the default implementation of mybatis-plus\r\n```java\r\npublic interface UserMapper extends BaseMapper&lt;User&gt; {}\r\n\r\n```\r\n\r\nWhen I execute the INSERT operation on it, the code reports an error:\r\n```\r\nError getting generated key or setting result to parameter object. Cause: org.apache.ibatis.executor.ExecutorException: No setter found for the keyProperty &#39;id&#39; in &#39;com.csu.mypetstore.api.domain.User&#39;.\r\n```\r\n\r\n\r\nI know that the cause of this error is that the record class cannot perform setter operations, but I don&#39;t know how to get around this error and implement self-incrementing operations on the database.\r\n\r\nI have tried adding the setId method to the User record class, but it doesn&#39;t work.\r\n```java\r\n@With\r\n@TableName(value = &quot;user&quot;)\r\npublic record User(\r\n        @TableId(value = &quot;uid&quot;, type = IdType.AUTO)\r\n        Integer id,\r\n        String username,\r\n        String password,\r\n) {\r\n        public User setId(Integer id){\r\n                return new User(id, username, password);  // No use\r\n        }\r\n}\r\n\r\n```\r\nWhat can I do to accomplish mybatis-plus operations on the record class, such as completing an insert operation on a table with a self-incrementing primary key, or does the record class not apply to mybatis-plus?","title":"Use mybatis-plus to manipulate java record class and report error for insert operation","body":"<p>I hava a record class as java bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@With\n@TableName(value = &quot;user&quot;)\npublic record User(\n        @TableId(value = &quot;uid&quot;, type = IdType.AUTO)\n        Integer id,\n        String username,\n        String password,\n) {}\n</code></pre>\n<p>then I use mybatis-plus to manage it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserServiceImpl implements UserService {\n    private final UserMapper userMapper;\n    public UserServiceImpl(UserMapper userMapper) {\n        this.userMapper = userMapper;\n    }\n\n    @Override\n    public CommonResponse&lt;Object&gt; register(User user) {\n\n        String password = &quot;9ABB136AA0B984E8&quot;;\n        User newUser = user.withPassword(password)\n\n        int rows = userMapper.insert(newUser);  // got a MyBatisSystemException\n        if (rows == 0) {\n            return CommonResponse.createResponseForError();\n        }\n        return CommonResponse.createResponseForSuccess();\n    }\n}\n</code></pre>\n<p>The UserMapper is the default implementation of mybatis-plus</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserMapper extends BaseMapper&lt;User&gt; {}\n\n</code></pre>\n<p>When I execute the INSERT operation on it, the code reports an error:</p>\n<pre><code>Error getting generated key or setting result to parameter object. Cause: org.apache.ibatis.executor.ExecutorException: No setter found for the keyProperty 'id' in 'com.csu.mypetstore.api.domain.User'.\n</code></pre>\n<p>I know that the cause of this error is that the record class cannot perform setter operations, but I don't know how to get around this error and implement self-incrementing operations on the database.</p>\n<p>I have tried adding the setId method to the User record class, but it doesn't work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@With\n@TableName(value = &quot;user&quot;)\npublic record User(\n        @TableId(value = &quot;uid&quot;, type = IdType.AUTO)\n        Integer id,\n        String username,\n        String password,\n) {\n        public User setId(Integer id){\n                return new User(id, username, password);  // No use\n        }\n}\n\n</code></pre>\n<p>What can I do to accomplish mybatis-plus operations on the record class, such as completing an insert operation on a table with a self-incrementing primary key, or does the record class not apply to mybatis-plus?</p>\n"},{"tags":["java","unit-testing","hbase","java-17","hbasetestingutility"],"owner":{"account_id":28575924,"reputation":11,"user_id":21877532,"display_name":"ASG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683783802,"creation_date":1683783802,"question_id":76224450,"body_markdown":"To give a background, our project uses bigtable. For unit testing, we are using the package hbase-testing-util:2.2.3 for creating a local mini hbase cluster.\r\nOur code base is in Java 8 and I&#39;m trying to migrate it to Java 17. While doing so, I&#39;m encountering the following error on running the unit tests (in java 17).\r\n\r\n```\r\nStarting hbase testing utility failed: java.io.IOException: Shutting down\r\n\tat org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:266)\r\n\tat org.apache.hadoop.hbase.MiniHBaseCluster.&lt;init&gt;(MiniHBaseCluster.java:116)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:1142)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1107)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1071)\r\n\tat com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:165)\r\n```\r\n\r\n```\r\njava.lang.ExceptionInInitializerError\r\n\tat com.yawasa.server.BabelFishStringValueTest.before(BabelFishStringValueTest.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:57)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: java.lang.RuntimeException: java.io.IOException: Shutting down\r\n\tat com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:195)\r\n\tat com.yawasa.server.testing.TestingUtility.&lt;clinit&gt;(TestingUtility.java:713)\r\n\t... 46 more\r\nCaused by: java.io.IOException: Shutting down\r\n\tat org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:266)\r\n\tat org.apache.hadoop.hbase.MiniHBaseCluster.&lt;init&gt;(MiniHBaseCluster.java:116)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:1142)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1107)\r\n\tat org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1071)\r\n\tat com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:165)\r\n\t... 47 more\r\nCaused by: java.lang.RuntimeException: Master not initialized after 200000ms\r\n\tat org.apache.hadoop.hbase.util.JVMClusterUtil.waitForEvent(JVMClusterUtil.java:229)\r\n\tat org.apache.hadoop.hbase.util.JVMClusterUtil.startup(JVMClusterUtil.java:197)\r\n\tat org.apache.hadoop.hbase.LocalHBaseCluster.startup(LocalHBaseCluster.java:413)\r\n\tat org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:259)\r\n\t... 52 more\r\n```\r\n\r\nThere is another set of stacktrace for \\~360 threads that indicate that the threads are waiting for some event. They look like this:\r\n\r\n```\r\nThread 340 (master/localhost:0.Chore.1):\r\n  State: TIMED_WAITING\r\n  Blocked count: 0\r\n  Waited count: 3\r\n  Stack:\r\n    java.base@17.0.7/jdk.internal.misc.Unsafe.park(Native Method)\r\n    java.base@17.0.7/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\r\n    java.base@17.0.7/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1672)\r\n    java.base@17.0.7/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\r\n    java.base@17.0.7/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\r\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1062)\r\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1122)\r\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    java.base@17.0.7/java.lang.Thread.run(Thread.java:833)\r\nThread 341 (snapshot-hfile-cleaner-cache-refresher):\r\n  State: TIMED_WAITING\r\n  Blocked count: 0\r\n  Waited count: 1\r\n  Stack:\r\n    java.base@17.0.7/java.lang.Object.wait(Native Method)\r\n    java.base@17.0.7/java.util.TimerThread.mainLoop(Timer.java:563)\r\n    java.base@17.0.7/java.util.TimerThread.run(Timer.java:516)\r\n```\r\n\r\nI haven&#39;t been able to find any info for this particular issue.\r\n\r\nI tried upgrading the library to 2.3.0+ version but that is leading to a jar hell much before this code path is hit, so I&#39;m not sure if resolving the jar hell will resolve the complete issue.","title":"MIniHBaseCluster shutting down with java.lang.RuntimeException: Master not initialized after 200000ms","body":"<p>To give a background, our project uses bigtable. For unit testing, we are using the package hbase-testing-util:2.2.3 for creating a local mini hbase cluster.\nOur code base is in Java 8 and I'm trying to migrate it to Java 17. While doing so, I'm encountering the following error on running the unit tests (in java 17).</p>\n<pre><code>Starting hbase testing utility failed: java.io.IOException: Shutting down\n    at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:266)\n    at org.apache.hadoop.hbase.MiniHBaseCluster.&lt;init&gt;(MiniHBaseCluster.java:116)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:1142)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1107)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1071)\n    at com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:165)\n</code></pre>\n<pre><code>java.lang.ExceptionInInitializerError\n    at com.yawasa.server.BabelFishStringValueTest.before(BabelFishStringValueTest.java:56)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:57)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)\n    at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\nCaused by: java.lang.RuntimeException: java.io.IOException: Shutting down\n    at com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:195)\n    at com.yawasa.server.testing.TestingUtility.&lt;clinit&gt;(TestingUtility.java:713)\n    ... 46 more\nCaused by: java.io.IOException: Shutting down\n    at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:266)\n    at org.apache.hadoop.hbase.MiniHBaseCluster.&lt;init&gt;(MiniHBaseCluster.java:116)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:1142)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1107)\n    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:1071)\n    at com.yawasa.server.testing.TestingUtility.init(TestingUtility.java:165)\n    ... 47 more\nCaused by: java.lang.RuntimeException: Master not initialized after 200000ms\n    at org.apache.hadoop.hbase.util.JVMClusterUtil.waitForEvent(JVMClusterUtil.java:229)\n    at org.apache.hadoop.hbase.util.JVMClusterUtil.startup(JVMClusterUtil.java:197)\n    at org.apache.hadoop.hbase.LocalHBaseCluster.startup(LocalHBaseCluster.java:413)\n    at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:259)\n    ... 52 more\n</code></pre>\n<p>There is another set of stacktrace for ~360 threads that indicate that the threads are waiting for some event. They look like this:</p>\n<pre><code>Thread 340 (master/localhost:0.Chore.1):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 3\n  Stack:\n    java.base@17.0.7/jdk.internal.misc.Unsafe.park(Native Method)\n    java.base@17.0.7/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\n    java.base@17.0.7/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1672)\n    java.base@17.0.7/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\n    java.base@17.0.7/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1062)\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1122)\n    java.base@17.0.7/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    java.base@17.0.7/java.lang.Thread.run(Thread.java:833)\nThread 341 (snapshot-hfile-cleaner-cache-refresher):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 1\n  Stack:\n    java.base@17.0.7/java.lang.Object.wait(Native Method)\n    java.base@17.0.7/java.util.TimerThread.mainLoop(Timer.java:563)\n    java.base@17.0.7/java.util.TimerThread.run(Timer.java:516)\n</code></pre>\n<p>I haven't been able to find any info for this particular issue.</p>\n<p>I tried upgrading the library to 2.3.0+ version but that is leading to a jar hell much before this code path is hit, so I'm not sure if resolving the jar hell will resolve the complete issue.</p>\n"},{"tags":["java","spring","apache-camel"],"owner":{"account_id":6189371,"reputation":4655,"user_id":4822479,"accept_rate":60,"display_name":"Madhusudan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683783772,"creation_date":1683783772,"question_id":76224447,"body_markdown":"I am doing camel migration from 2.25.4 to 3.0.24. WHile doing this I have to do some chnages in camel config xml file where **httpConnectionManager** has been updated to **clientConnectionManager** for bean class org.apache.camel.component.http.HttpComponent.\r\n\r\nHere below I have mentioned piece of my camel config xml file:\r\n\r\n\r\n     &lt;bean id=&quot;http&quot; class=&quot;org.apache.camel.component.http.HttpComponent&quot;&gt;\r\n         &lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot;/&gt;\r\n         &lt;property name=&quot;clientConnectionManager&quot; ref=&quot;myHttpConnectionManager&quot;/&gt;\r\n     &lt;/bean&gt;\r\n\r\n     &lt;bean id=&quot;https&quot; class=&quot;org.apache.camel.component.http.HttpComponent&quot;&gt;\r\n         &lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot;/&gt;\r\n         &lt;property name=&quot;clientConnectionManager&quot; ref=&quot;myHttpConnectionManager&quot;/&gt;\r\n     &lt;/bean&gt;\r\n\r\n     &lt;bean id=&quot;myHttpConnectionManager&quot; class=&quot;org.apache.commons.httpclient.MultiThreadedHttpConnectionManager&quot;&gt;\r\n         &lt;property name=&quot;params&quot; ref=&quot;myHttpConnectionManagerParams&quot;/&gt;\r\n     &lt;/bean&gt;\r\n\r\n     &lt;bean id=&quot;myHttpConnectionManagerParams&quot; class=&quot;org.apache.commons.httpclient.params.HttpConnectionManagerParams&quot;&gt;\r\n         &lt;property name=&quot;defaultMaxConnectionsPerHost&quot; value=&quot;20&quot;/&gt;\r\n     &lt;/bean&gt;\r\n\r\nWith this change, when I start tomcat, it gives me below error:\r\n\r\n\r\n    11-May-2023 11:07:16.052 SEVERE [main] \r\n    org.springframework.web.context.ContextLoader.initWebApplicationContext Context initialization failed\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;http&#39; \r\n    defined in ServletContext resource [/WEB-INF/camel-config.xml]: Initialization of bean failed; \r\n    nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert \r\n    property value of type &#39;org.apache.commons.httpclient.MultiThreadedHttpConnectionManager&#39; to \r\n    required type &#39;org.apache.http.conn.HttpClientConnectionManager&#39; for property \r\n    &#39;clientConnectionManager&#39;; nested exception is java.lang.IllegalStateException: Cannot convert \r\n    value of type &#39;org.apache.commons.httpclient.MultiThreadedHttpConnectionManager&#39; to required type \r\n    &#39;org.apache.http.conn.HttpClientConnectionManager&#39; for property &#39;clientConnectionManager&#39;: no \r\n    matching editors or conversion strategy found\r\n        \r\nIs there any specific version of apache commons-httpclient requirement with camel 3.20.4? Or instead of MultiThreadedHttpConnectionManager, I have to use some other class?\r\n","title":"ERROR: Cannot resolve reference to bean &#39;myHttpConnectionManager&#39; while setting bean property &#39;clientConnectionManager&#39;","body":"<p>I am doing camel migration from 2.25.4 to 3.0.24. WHile doing this I have to do some chnages in camel config xml file where <strong>httpConnectionManager</strong> has been updated to <strong>clientConnectionManager</strong> for bean class org.apache.camel.component.http.HttpComponent.</p>\n<p>Here below I have mentioned piece of my camel config xml file:</p>\n<pre><code> &lt;bean id=&quot;http&quot; class=&quot;org.apache.camel.component.http.HttpComponent&quot;&gt;\n     &lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot;/&gt;\n     &lt;property name=&quot;clientConnectionManager&quot; ref=&quot;myHttpConnectionManager&quot;/&gt;\n &lt;/bean&gt;\n\n &lt;bean id=&quot;https&quot; class=&quot;org.apache.camel.component.http.HttpComponent&quot;&gt;\n     &lt;property name=&quot;camelContext&quot; ref=&quot;camel&quot;/&gt;\n     &lt;property name=&quot;clientConnectionManager&quot; ref=&quot;myHttpConnectionManager&quot;/&gt;\n &lt;/bean&gt;\n\n &lt;bean id=&quot;myHttpConnectionManager&quot; class=&quot;org.apache.commons.httpclient.MultiThreadedHttpConnectionManager&quot;&gt;\n     &lt;property name=&quot;params&quot; ref=&quot;myHttpConnectionManagerParams&quot;/&gt;\n &lt;/bean&gt;\n\n &lt;bean id=&quot;myHttpConnectionManagerParams&quot; class=&quot;org.apache.commons.httpclient.params.HttpConnectionManagerParams&quot;&gt;\n     &lt;property name=&quot;defaultMaxConnectionsPerHost&quot; value=&quot;20&quot;/&gt;\n &lt;/bean&gt;\n</code></pre>\n<p>With this change, when I start tomcat, it gives me below error:</p>\n<pre><code>11-May-2023 11:07:16.052 SEVERE [main] \norg.springframework.web.context.ContextLoader.initWebApplicationContext Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'http' \ndefined in ServletContext resource [/WEB-INF/camel-config.xml]: Initialization of bean failed; \nnested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert \nproperty value of type 'org.apache.commons.httpclient.MultiThreadedHttpConnectionManager' to \nrequired type 'org.apache.http.conn.HttpClientConnectionManager' for property \n'clientConnectionManager'; nested exception is java.lang.IllegalStateException: Cannot convert \nvalue of type 'org.apache.commons.httpclient.MultiThreadedHttpConnectionManager' to required type \n'org.apache.http.conn.HttpClientConnectionManager' for property 'clientConnectionManager': no \nmatching editors or conversion strategy found\n    \n</code></pre>\n<p>Is there any specific version of apache commons-httpclient requirement with camel 3.20.4? Or instead of MultiThreadedHttpConnectionManager, I have to use some other class?</p>\n"},{"tags":["java","android","android-contentresolver","android-calendar"],"comments":[{"owner":{"account_id":11184418,"reputation":179,"user_id":8207343,"display_name":"HYA"},"score":0,"creation_date":1683405448,"post_id":76190682,"comment_id":134362778,"body_markdown":"You are using the CalendarContract content provider to read and delete events from the device&#39;s calendar. When you delete an event using the ContentResolver&#39;s delete() method, the event is not immediately deleted from the calendar provider. Instead, it is marked for deletion, and the actual deletion is performed by the provider&#39;s background process at some point in the future. This is done to ensure that the event is removed from all synced calendars and that any associated reminders or notifications are also removed.","body":"You are using the CalendarContract content provider to read and delete events from the device&#39;s calendar. When you delete an event using the ContentResolver&#39;s delete() method, the event is not immediately deleted from the calendar provider. Instead, it is marked for deletion, and the actual deletion is performed by the provider&#39;s background process at some point in the future. This is done to ensure that the event is removed from all synced calendars and that any associated reminders or notifications are also removed."},{"owner":{"account_id":28530435,"reputation":1,"user_id":21837928,"display_name":"Pratham Koli"},"score":0,"creation_date":1683438331,"post_id":76190682,"comment_id":134365057,"body_markdown":"So I cannot delete instantly i have to wait after giving delete command?","body":"So I cannot delete instantly i have to wait after giving delete command?"}],"owner":{"account_id":28530435,"reputation":1,"user_id":21837928,"display_name":"Pratham Koli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683783383,"creation_date":1683400681,"question_id":76190682,"body_markdown":"`I&#39;m facing an issue with the ListView in an Android app where I&#39;m able to delete an event from the listview using a content resolver. The deletion is reflected instantly in the ListView, but when I reopen the ListView, the deleted items start appearing again. The items are only deleted permanently after a few minutes of delay.What could be the issue??\r\n\r\n\r\nBelow is my listview displaying and deletion code as well content resolver code for event reading and deleting\r\n\r\nCalendar_ListView.java\r\n\r\n```\r\npackage com.example.eventhub;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.AnimationDrawable;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ListView;\r\nimport android.widget.RelativeLayout;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class Calendar_ListView extends AppCompatActivity {\r\n    public ArrayList&lt;String&gt; Events_Name = new ArrayList&lt;String&gt;();\r\n    public ArrayList&lt;String&gt; temporary = new ArrayList&lt;String&gt;();\r\n    ArrayAdapter arrayAdapter;\r\n\r\n    Utility utility;\r\n\r\n    Context context;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.reminder_list_view);\r\n\r\n        context = getApplicationContext();\r\n        utility = new Utility(context);\r\n\r\n        RelativeLayout relativeLayout = findViewById(R.id.ListId);\r\n        AnimationDrawable animationDrawable = (AnimationDrawable) relativeLayout.getBackground();\r\n        animationDrawable.setEnterFadeDuration(3500);\r\n        animationDrawable.setExitFadeDuration(5500);\r\n        animationDrawable.start();\r\n        ListView listview = findViewById(R.id.listview);\r\n//        Fetch_EventNames();\r\n\r\n//        Log.d(&quot;FETCH_ON_CREATE&quot;, Events_Name.toString());\r\n//        Log.d(&quot;FETCH_ON_CREATE&quot;, temporary.toString(  ));\r\n//        Log.d(&quot;LISTVIEW&quot;, Events_Name.toString());\r\n\r\n        arrayAdapter = new ArrayAdapter(Calendar_ListView.this, R.layout.listview_custom_itemview, temporary);\r\n\r\n        listview.setAdapter(arrayAdapter);\r\n        listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(Calendar_ListView.this);\r\n                builder.setMessage(&quot;Do you want to delete this reminder?&quot;)\r\n                        .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int id) {\r\n                                // Perform delete action here\r\n//                                Utility utility = new Utility();\r\n                                utility.deleteEventByTitle2(context, Events_Name.get(position));\r\n                                Log.d(&quot;FETCH&quot;, Events_Name.toString());\r\n                                Log.d(&quot;FETCH&quot;, temporary.toString());\r\n                                arrayAdapter.remove(arrayAdapter.getItem(position));\r\n//                                Events_Name.remove(position);\r\n//                                temporary.remove(position);\r\n//                                arrayAdapter.notifyDataSetChanged();\r\n                            }\r\n                        })\r\n                        .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int id) {\r\n                                // User cancelled the dialog\r\n                                dialog.dismiss();\r\n                            }\r\n                        });\r\n                AlertDialog dialog = builder.create();\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Fetch_EventNames();\r\n        Log.d(&quot;LISTVIEW&quot;, Events_Name.toString());\r\n        arrayAdapter.notifyDataSetChanged();\r\n    }\r\n    public void Fetch_EventNames(){\r\n//        Utility utility = new Utility();\r\n        utility.readCalendarEvent(context);\r\n        Events_Name.clear();\r\n        temporary.clear();\r\n        ArrayList&lt;String&gt; titles = utility.nameOfEvent;\r\n        ArrayList&lt;String&gt; myEvents = new ArrayList&lt;String&gt;();\r\n        for(String str : titles){\r\n            if(str != null &amp;&amp; str.length() &gt; 3 &amp;&amp; str.substring(str.length() - 3).equals(&quot;_eh&quot;)){\r\n                myEvents.add(str);\r\n            }\r\n        }\r\n        Events_Name = myEvents;\r\n        for(String str : Events_Name){\r\n            temporary.add(str.substring(0, str.length()-3));\r\n        }\r\n//        Log.d(&quot;REMINDER_MY_EVENTS&quot;, myEvents.toString());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nUtility.java\r\n\r\n\r\n```\r\npackage com.example.eventhub;\r\n\r\nimport android.content.ContentResolver;\r\nimport android.content.ContentUris;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.net.Uri;\r\nimport android.provider.CalendarContract;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\n\r\npublic class Utility {\r\n    public ArrayList&lt;String&gt; nameOfEvent = new ArrayList&lt;String&gt;();\r\n    public ArrayList&lt;ArrayList&lt;String&gt;&gt; Event_Start_End = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\r\n\r\n    public ArrayList&lt;String&gt; startDates = new ArrayList&lt;String&gt;();\r\n    public ArrayList&lt;String&gt; endDates = new ArrayList&lt;String&gt;();\r\n    public ArrayList&lt;String&gt; descriptions = new ArrayList&lt;String&gt;();\r\n    public ArrayList&lt;String&gt; eventIds = new ArrayList&lt;String&gt;();\r\n    ContentResolver resolver;\r\n    public Utility(Context context){\r\n        resolver = context.getContentResolver();\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; readCalendarEvent(Context context) {\r\n\r\n//        Cursor cursor = context.getContentResolver()\r\n        Cursor cursor = resolver\r\n                .query(\r\n                        Uri.parse(&quot;content://com.android.calendar/events&quot;),\r\n                        new String[]{&quot;calendar_id&quot;, &quot;title&quot;, &quot;description&quot;,\r\n                                &quot;dtstart&quot;, &quot;dtend&quot;, &quot;eventLocation&quot;}, null,\r\n                        null, null);\r\n        cursor.moveToFirst();\r\n        // fetching calendars name\r\n        String CNames[] = new String[cursor.getCount()];\r\n\r\n        // fetching calendars id\r\n        nameOfEvent.clear();\r\n        startDates.clear();\r\n        endDates.clear();\r\n        descriptions.clear();\r\n        Log.d(&quot;UTILITY_OBJ&quot;, &quot;SIZE: &quot;+ Integer.toString(cursor.getCount()));\r\n\r\n        for (int i = 0; i &lt; CNames.length; i++) {\r\n            String str1=&quot;&quot;, str2, str3;\r\n//            ArrayList&lt;String&gt; temp = new ArrayList&lt;String&gt;(3);\r\n            nameOfEvent.add(cursor.getString(1));\r\n\r\n            if(cursor.getString(3) != null){\r\n                startDates.add(getDate(Long.parseLong(cursor.getString(3))));\r\n\r\n            }\r\n            if(cursor.getString(4) != null){\r\n                endDates.add(getDate(Long.parseLong(cursor.getString(4))));\r\n            }\r\n            descriptions.add(cursor.getString(2));\r\n            CNames[i] = cursor.getString(1);\r\n            cursor.moveToNext();\r\n        }\r\n        return nameOfEvent;\r\n    }\r\n    public void deleteEventByTitle(Context context, String title) {\r\n//        ContentResolver cr = context.getContentResolver();\r\n\r\n        Cursor cursor = resolver.query(\r\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\r\n                new String[]{&quot;_id&quot;},\r\n                &quot;title=?&quot;,\r\n                new String[]{title},\r\n                null);\r\n\r\n        if (cursor.moveToFirst()) {\r\n            int temp = cursor.getColumnIndex(&quot;_id&quot;);\r\n            long id;\r\n            if(temp &gt;= 0) {\r\n                id = cursor.getLong(temp);\r\n                Uri deleteUri = ContentUris.withAppendedId(CalendarContract.Events.CONTENT_URI, id);\r\n//                int rows = cr.delete(deleteUri, null, null);\r\n                int rows = resolver.delete(deleteUri, null, null);\r\n\r\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;Rows deleted: &quot; + rows);\r\n                Toast.makeText(context, &quot;Event Successfully Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n            else {\r\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\r\n                Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n        else {\r\n            Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\r\n            Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        cursor.close();\r\n    }\r\n\r\n    public String getDate(long milliSeconds) {\r\n        SimpleDateFormat formatter = new SimpleDateFormat(\r\n                &quot;dd/MM/yyyy hh:mm:ss a&quot;);\r\n        Calendar calendar = Calendar.getInstance();\r\n        calendar.setTimeInMillis(milliSeconds);\r\n        return formatter.format(calendar.getTime());\r\n    }\r\n    public ArrayList&lt;String&gt; readCalendarEvent2(Context context) {\r\n        Cursor cursor = context.getContentResolver().query(\r\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\r\n                new String[]{&quot;_id&quot;, &quot;calendar_id&quot;, &quot;title&quot;, &quot;description&quot;,\r\n                        &quot;dtstart&quot;, &quot;dtend&quot;, &quot;eventLocation&quot;}, null, null, null);\r\n        cursor.moveToFirst();\r\n        // fetching calendars name\r\n        String CNames[] = new String[cursor.getCount()];\r\n\r\n        // fetching calendars id\r\n        nameOfEvent.clear();\r\n        startDates.clear();\r\n        endDates.clear();\r\n        descriptions.clear();\r\n        eventIds.clear(); // List to store event IDs\r\n        Log.d(&quot;UTILITY_OBJ&quot;, &quot;SIZE: &quot;+ Integer.toString(cursor.getCount()));\r\n\r\n        for (int i = 0; i &lt; CNames.length; i++) {\r\n            eventIds.add(cursor.getString(0)); // Add event ID to list\r\n            nameOfEvent.add(cursor.getString(2));\r\n            if(cursor.getString(4) != null){\r\n                startDates.add(getDate(Long.parseLong(cursor.getString(4))));\r\n            }\r\n            if(cursor.getString(5) != null){\r\n                endDates.add(getDate(Long.parseLong(cursor.getString(5))));\r\n            }\r\n            descriptions.add(cursor.getString(3));\r\n            CNames[i] = cursor.getString(2);\r\n            cursor.moveToNext();\r\n        }\r\n        return nameOfEvent;\r\n    }\r\n\r\n    public void deleteEventByTitle2(Context context, String title) {\r\n        Cursor cursor = resolver.query(\r\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\r\n                new String[]{&quot;_id&quot;},\r\n                &quot;title=?&quot;,\r\n                new String[]{title},\r\n                null);\r\n\r\n        ArrayList&lt;String&gt; eventsToDelete = new ArrayList&lt;String&gt;();\r\n\r\n        if (cursor.moveToFirst()) {\r\n            int temp = cursor.getColumnIndex(&quot;_id&quot;);\r\n            long id;\r\n            if(temp &gt;= 0) {\r\n                id = cursor.getLong(temp);\r\n                eventsToDelete.add(title);\r\n                Uri deleteUri = ContentUris.withAppendedId(CalendarContract.Events.CONTENT_URI, id);\r\n                int rows = resolver.delete(deleteUri, null, null);\r\n\r\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;Rows deleted: &quot; + rows);\r\n                Toast.makeText(context, &quot;Event Successfully Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n            else {\r\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\r\n                Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n        else {\r\n            Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\r\n            Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        cursor.close();\r\n\r\n        // remove eventsToDelete from nameOfEvent ArrayList\r\n        for (String event : eventsToDelete) {\r\n            nameOfEvent.remove(event);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried making a single instance of content resolver but still didn&#39;t do any good.`","title":"Instantly not able to delete contents from Calendar","body":"<p>`I'm facing an issue with the ListView in an Android app where I'm able to delete an event from the listview using a content resolver. The deletion is reflected instantly in the ListView, but when I reopen the ListView, the deleted items start appearing again. The items are only deleted permanently after a few minutes of delay.What could be the issue??</p>\n<p>Below is my listview displaying and deletion code as well content resolver code for event reading and deleting</p>\n<p>Calendar_ListView.java</p>\n<pre><code>package com.example.eventhub;\n\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.graphics.drawable.AnimationDrawable;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.ListView;\nimport android.widget.RelativeLayout;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.constraintlayout.widget.ConstraintLayout;\n\nimport java.util.ArrayList;\n\npublic class Calendar_ListView extends AppCompatActivity {\n    public ArrayList&lt;String&gt; Events_Name = new ArrayList&lt;String&gt;();\n    public ArrayList&lt;String&gt; temporary = new ArrayList&lt;String&gt;();\n    ArrayAdapter arrayAdapter;\n\n    Utility utility;\n\n    Context context;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.reminder_list_view);\n\n        context = getApplicationContext();\n        utility = new Utility(context);\n\n        RelativeLayout relativeLayout = findViewById(R.id.ListId);\n        AnimationDrawable animationDrawable = (AnimationDrawable) relativeLayout.getBackground();\n        animationDrawable.setEnterFadeDuration(3500);\n        animationDrawable.setExitFadeDuration(5500);\n        animationDrawable.start();\n        ListView listview = findViewById(R.id.listview);\n//        Fetch_EventNames();\n\n//        Log.d(&quot;FETCH_ON_CREATE&quot;, Events_Name.toString());\n//        Log.d(&quot;FETCH_ON_CREATE&quot;, temporary.toString(  ));\n//        Log.d(&quot;LISTVIEW&quot;, Events_Name.toString());\n\n        arrayAdapter = new ArrayAdapter(Calendar_ListView.this, R.layout.listview_custom_itemview, temporary);\n\n        listview.setAdapter(arrayAdapter);\n        listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                AlertDialog.Builder builder = new AlertDialog.Builder(Calendar_ListView.this);\n                builder.setMessage(&quot;Do you want to delete this reminder?&quot;)\n                        .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n                            public void onClick(DialogInterface dialog, int id) {\n                                // Perform delete action here\n//                                Utility utility = new Utility();\n                                utility.deleteEventByTitle2(context, Events_Name.get(position));\n                                Log.d(&quot;FETCH&quot;, Events_Name.toString());\n                                Log.d(&quot;FETCH&quot;, temporary.toString());\n                                arrayAdapter.remove(arrayAdapter.getItem(position));\n//                                Events_Name.remove(position);\n//                                temporary.remove(position);\n//                                arrayAdapter.notifyDataSetChanged();\n                            }\n                        })\n                        .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\n                            public void onClick(DialogInterface dialog, int id) {\n                                // User cancelled the dialog\n                                dialog.dismiss();\n                            }\n                        });\n                AlertDialog dialog = builder.create();\n                dialog.show();\n            }\n        });\n\n    }\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Fetch_EventNames();\n        Log.d(&quot;LISTVIEW&quot;, Events_Name.toString());\n        arrayAdapter.notifyDataSetChanged();\n    }\n    public void Fetch_EventNames(){\n//        Utility utility = new Utility();\n        utility.readCalendarEvent(context);\n        Events_Name.clear();\n        temporary.clear();\n        ArrayList&lt;String&gt; titles = utility.nameOfEvent;\n        ArrayList&lt;String&gt; myEvents = new ArrayList&lt;String&gt;();\n        for(String str : titles){\n            if(str != null &amp;&amp; str.length() &gt; 3 &amp;&amp; str.substring(str.length() - 3).equals(&quot;_eh&quot;)){\n                myEvents.add(str);\n            }\n        }\n        Events_Name = myEvents;\n        for(String str : Events_Name){\n            temporary.add(str.substring(0, str.length()-3));\n        }\n//        Log.d(&quot;REMINDER_MY_EVENTS&quot;, myEvents.toString());\n    }\n}\n</code></pre>\n<p>Utility.java</p>\n<pre><code>package com.example.eventhub;\n\nimport android.content.ContentResolver;\nimport android.content.ContentUris;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.net.Uri;\nimport android.provider.CalendarContract;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Calendar;\n\npublic class Utility {\n    public ArrayList&lt;String&gt; nameOfEvent = new ArrayList&lt;String&gt;();\n    public ArrayList&lt;ArrayList&lt;String&gt;&gt; Event_Start_End = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\n\n    public ArrayList&lt;String&gt; startDates = new ArrayList&lt;String&gt;();\n    public ArrayList&lt;String&gt; endDates = new ArrayList&lt;String&gt;();\n    public ArrayList&lt;String&gt; descriptions = new ArrayList&lt;String&gt;();\n    public ArrayList&lt;String&gt; eventIds = new ArrayList&lt;String&gt;();\n    ContentResolver resolver;\n    public Utility(Context context){\n        resolver = context.getContentResolver();\n    }\n\n    public ArrayList&lt;String&gt; readCalendarEvent(Context context) {\n\n//        Cursor cursor = context.getContentResolver()\n        Cursor cursor = resolver\n                .query(\n                        Uri.parse(&quot;content://com.android.calendar/events&quot;),\n                        new String[]{&quot;calendar_id&quot;, &quot;title&quot;, &quot;description&quot;,\n                                &quot;dtstart&quot;, &quot;dtend&quot;, &quot;eventLocation&quot;}, null,\n                        null, null);\n        cursor.moveToFirst();\n        // fetching calendars name\n        String CNames[] = new String[cursor.getCount()];\n\n        // fetching calendars id\n        nameOfEvent.clear();\n        startDates.clear();\n        endDates.clear();\n        descriptions.clear();\n        Log.d(&quot;UTILITY_OBJ&quot;, &quot;SIZE: &quot;+ Integer.toString(cursor.getCount()));\n\n        for (int i = 0; i &lt; CNames.length; i++) {\n            String str1=&quot;&quot;, str2, str3;\n//            ArrayList&lt;String&gt; temp = new ArrayList&lt;String&gt;(3);\n            nameOfEvent.add(cursor.getString(1));\n\n            if(cursor.getString(3) != null){\n                startDates.add(getDate(Long.parseLong(cursor.getString(3))));\n\n            }\n            if(cursor.getString(4) != null){\n                endDates.add(getDate(Long.parseLong(cursor.getString(4))));\n            }\n            descriptions.add(cursor.getString(2));\n            CNames[i] = cursor.getString(1);\n            cursor.moveToNext();\n        }\n        return nameOfEvent;\n    }\n    public void deleteEventByTitle(Context context, String title) {\n//        ContentResolver cr = context.getContentResolver();\n\n        Cursor cursor = resolver.query(\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\n                new String[]{&quot;_id&quot;},\n                &quot;title=?&quot;,\n                new String[]{title},\n                null);\n\n        if (cursor.moveToFirst()) {\n            int temp = cursor.getColumnIndex(&quot;_id&quot;);\n            long id;\n            if(temp &gt;= 0) {\n                id = cursor.getLong(temp);\n                Uri deleteUri = ContentUris.withAppendedId(CalendarContract.Events.CONTENT_URI, id);\n//                int rows = cr.delete(deleteUri, null, null);\n                int rows = resolver.delete(deleteUri, null, null);\n\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;Rows deleted: &quot; + rows);\n                Toast.makeText(context, &quot;Event Successfully Deleted&quot;, Toast.LENGTH_SHORT).show();\n\n            }\n            else {\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\n                Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n        else {\n            Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\n            Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\n        }\n        cursor.close();\n    }\n\n    public String getDate(long milliSeconds) {\n        SimpleDateFormat formatter = new SimpleDateFormat(\n                &quot;dd/MM/yyyy hh:mm:ss a&quot;);\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTimeInMillis(milliSeconds);\n        return formatter.format(calendar.getTime());\n    }\n    public ArrayList&lt;String&gt; readCalendarEvent2(Context context) {\n        Cursor cursor = context.getContentResolver().query(\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\n                new String[]{&quot;_id&quot;, &quot;calendar_id&quot;, &quot;title&quot;, &quot;description&quot;,\n                        &quot;dtstart&quot;, &quot;dtend&quot;, &quot;eventLocation&quot;}, null, null, null);\n        cursor.moveToFirst();\n        // fetching calendars name\n        String CNames[] = new String[cursor.getCount()];\n\n        // fetching calendars id\n        nameOfEvent.clear();\n        startDates.clear();\n        endDates.clear();\n        descriptions.clear();\n        eventIds.clear(); // List to store event IDs\n        Log.d(&quot;UTILITY_OBJ&quot;, &quot;SIZE: &quot;+ Integer.toString(cursor.getCount()));\n\n        for (int i = 0; i &lt; CNames.length; i++) {\n            eventIds.add(cursor.getString(0)); // Add event ID to list\n            nameOfEvent.add(cursor.getString(2));\n            if(cursor.getString(4) != null){\n                startDates.add(getDate(Long.parseLong(cursor.getString(4))));\n            }\n            if(cursor.getString(5) != null){\n                endDates.add(getDate(Long.parseLong(cursor.getString(5))));\n            }\n            descriptions.add(cursor.getString(3));\n            CNames[i] = cursor.getString(2);\n            cursor.moveToNext();\n        }\n        return nameOfEvent;\n    }\n\n    public void deleteEventByTitle2(Context context, String title) {\n        Cursor cursor = resolver.query(\n                Uri.parse(&quot;content://com.android.calendar/events&quot;),\n                new String[]{&quot;_id&quot;},\n                &quot;title=?&quot;,\n                new String[]{title},\n                null);\n\n        ArrayList&lt;String&gt; eventsToDelete = new ArrayList&lt;String&gt;();\n\n        if (cursor.moveToFirst()) {\n            int temp = cursor.getColumnIndex(&quot;_id&quot;);\n            long id;\n            if(temp &gt;= 0) {\n                id = cursor.getLong(temp);\n                eventsToDelete.add(title);\n                Uri deleteUri = ContentUris.withAppendedId(CalendarContract.Events.CONTENT_URI, id);\n                int rows = resolver.delete(deleteUri, null, null);\n\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;Rows deleted: &quot; + rows);\n                Toast.makeText(context, &quot;Event Successfully Deleted&quot;, Toast.LENGTH_SHORT).show();\n\n            }\n            else {\n                Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\n                Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n        else {\n            Log.d(&quot;UTILITY_OBJ&quot;, &quot;EVENT ID NOT FOUND&quot;);\n            Toast.makeText(context, &quot;Event NOT FOUND!!&quot;, Toast.LENGTH_SHORT).show();\n        }\n        cursor.close();\n\n        // remove eventsToDelete from nameOfEvent ArrayList\n        for (String event : eventsToDelete) {\n            nameOfEvent.remove(event);\n        }\n    }\n\n\n}\n</code></pre>\n<p>I tried making a single instance of content resolver but still didn't do any good.`</p>\n"},{"tags":["java","rhapsody"],"answers":[{"tags":[],"owner":{"account_id":5712438,"reputation":124,"user_id":4513940,"display_name":"Kishore Vanapalli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683782939,"creation_date":1539127748,"answer_id":52730601,"question_id":52703688,"body_markdown":"there is method called **selected_el.getNestedElementsByMetaClass(ClassType, 0/1)** that will return all the elements of that MetaClass recursively based on 0/1 which is the second argument\r\n\r\nClassType is either Class, Port, Package -- find out the ClassType you are looking for\r\n\r\nAlternatively there is **myPrj.findNestedElementRecursive( name, metaClass)** for example myPrj.findNestedElementRecursive( namedPkg, &quot;Package&quot;) will find a Package under the &#39;myPrj&#39; project that has a name that matches the value of the &#39;namedPkg&#39; variable.\r\n\r\nThe Rhapsody Java API can be found [here][1].\r\n\r\n\r\n  [1]: https://www.ibm.com/support/pages/introduction-ibm-rational-rhapsody-api","title":"IBM Rhapsody Java API - Get every element in a project","body":"<p>there is method called <strong>selected_el.getNestedElementsByMetaClass(ClassType, 0/1)</strong> that will return all the elements of that MetaClass recursively based on 0/1 which is the second argument</p>\n<p>ClassType is either Class, Port, Package -- find out the ClassType you are looking for</p>\n<p>Alternatively there is <strong>myPrj.findNestedElementRecursive( name, metaClass)</strong> for example myPrj.findNestedElementRecursive( namedPkg, &quot;Package&quot;) will find a Package under the 'myPrj' project that has a name that matches the value of the 'namedPkg' variable.</p>\n<p>The Rhapsody Java API can be found <a href=\"https://www.ibm.com/support/pages/introduction-ibm-rational-rhapsody-api\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8909377,"reputation":151,"user_id":6650184,"display_name":"Shlomo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539159397,"creation_date":1539159397,"answer_id":52735610,"question_id":52703688,"body_markdown":"Try calling IRPModelElement.getNestedElementsRecursive on the project element:\r\n\r\n[![documentation for getNestedElementsRecursive][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Iszgu.png","title":"IBM Rhapsody Java API - Get every element in a project","body":"<p>Try calling IRPModelElement.getNestedElementsRecursive on the project element:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Iszgu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Iszgu.png\" alt=\"documentation for getNestedElementsRecursive\"></a></p>\n"}],"owner":{"display_name":"user10473458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1611,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52730601,"answer_count":2,"score":1,"last_activity_date":1683782939,"creation_date":1539006265,"question_id":52703688,"body_markdown":"I&#39;m currently trying to find or make a function to get every item in a Rhapsody project, meaning the nested elements of the project and the nested elements of those elements, etc.\r\n\r\nIs there an easy way to do this? And with easy I don&#39;t mean a looped function continually using the getNestedElements() function ;)","title":"IBM Rhapsody Java API - Get every element in a project","body":"<p>I'm currently trying to find or make a function to get every item in a Rhapsody project, meaning the nested elements of the project and the nested elements of those elements, etc.</p>\n\n<p>Is there an easy way to do this? And with easy I don't mean a looped function continually using the getNestedElements() function ;)</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1683715261,"post_id":76216917,"comment_id":134408094,"body_markdown":"Why do you need a custom `AuthenticationProvider` in its own `AuthenticationManager` why doesn&#39;t the default `AuthenticationManager` work, and use the default database authentication provider?","body":"Why do you need a custom <code>AuthenticationProvider</code> in its own <code>AuthenticationManager</code> why doesn&#39;t the default <code>AuthenticationManager</code> work, and use the default database authentication provider?"},{"owner":{"account_id":8775638,"reputation":241,"user_id":6561000,"display_name":"John"},"score":0,"creation_date":1683715334,"post_id":76216917,"comment_id":134408112,"body_markdown":"It is just a placeholder implementation. At this point I do a user authentication against my database + ldap.","body":"It is just a placeholder implementation. At this point I do a user authentication against my database + ldap."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1683715363,"post_id":76216917,"comment_id":134408118,"body_markdown":"so why dont you use the default Database authentication provider? your placeholder implementation does not explain your user case","body":"so why dont you use the default Database authentication provider? your placeholder implementation does not explain your user case"},{"owner":{"account_id":8775638,"reputation":241,"user_id":6561000,"display_name":"John"},"score":0,"creation_date":1683716743,"post_id":76216917,"comment_id":134408434,"body_markdown":"i can&#39;t go into details here but it&#39;s neccessary.","body":"i can&#39;t go into details here but it&#39;s neccessary."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1683732580,"post_id":76216917,"comment_id":134412725,"body_markdown":"well then im not going to do guesswork when trying to solve this when you are not allowed to know the boundries. The solution to your problem is, use the built in features of the framework. Good luck","body":"well then im not going to do guesswork when trying to solve this when you are not allowed to know the boundries. The solution to your problem is, use the built in features of the framework. Good luck"}],"answers":[{"tags":[],"owner":{"account_id":8775638,"reputation":241,"user_id":6561000,"display_name":"John"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683781782,"creation_date":1683781782,"answer_id":76224314,"question_id":76216917,"body_markdown":"for everyone having the same issue, you can restore the old session behavior by setting the session creation policy in your security filter chain:\r\n\r\n```java\r\n.httpBasic(withDefaults())\r\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n...\r\n```","title":"Custom provider getting execude on every request with Spring 6 Basic Authentication","body":"<p>for everyone having the same issue, you can restore the old session behavior by setting the session creation policy in your security filter chain:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.httpBasic(withDefaults())\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\n...\n</code></pre>\n"}],"owner":{"account_id":8775638,"reputation":241,"user_id":6561000,"display_name":"John"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76224314,"answer_count":1,"score":-1,"last_activity_date":1683781782,"creation_date":1683711453,"question_id":76216917,"body_markdown":"Currently working on upgrading my web application from Spring Boot 2 to Version 3. As Spring Boot 3 uses Spring 6 I needed to update my security configuration. After my changes I noticed that my custom authentication provider is getting called on every request which leads to heavy database traffic. It&#39;s not happening if I use the spring default login form but with basic authentication.\r\n\r\nHere is my sample security configuration:\r\n\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public AuthenticationManager authenticationManager() {\r\n        return new ProviderManager(new CustomAuthenticationProvider());\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .httpBasic();\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nMy Provider looks like:\r\n\r\n\r\n```java\r\npublic class CustomAuthenticationProvider implements AuthenticationProvider {\r\n\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication)\r\n            throws AuthenticationException {\r\n\r\n        String username = authentication.getName();\r\n        String password = authentication.getCredentials().toString();\r\n\r\n        if (&quot;admin&quot;.equals(username) &amp;&amp; &quot;admin&quot;.equals(password)) {\r\n            var user = User.withUsername(&quot;admin&quot;).password(&quot;admin&quot;).authorities(new ArrayList&lt;&gt;()).build();\r\n            return new UsernamePasswordAuthenticationToken(user.getUsername(), user.getPassword(), user.getAuthorities());\r\n        } else {\r\n            throw new\r\n                    BadCredentialsException(&quot;system authentication failed&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; auth) {\r\n        return auth.equals(UsernamePasswordAuthenticationToken.class);\r\n    }\r\n}\r\n```\r\n\r\nBehavior in short:\r\n\r\n| SecurityConfig| Behavior |\r\n| -------- | -------- |\r\n| `.formLogin()`  | 1x Login / Provider-Call  |\r\n| `.httpBasic()`    | 1x Login per Session / 1x Provider-Call per request  |\r\n\r\nWhat can I do to get the old behavior back as it was with Spring 5 / Spring Boot 2?\r\n\r\n","title":"Custom provider getting execude on every request with Spring 6 Basic Authentication","body":"<p>Currently working on upgrading my web application from Spring Boot 2 to Version 3. As Spring Boot 3 uses Spring 6 I needed to update my security configuration. After my changes I noticed that my custom authentication provider is getting called on every request which leads to heavy database traffic. It's not happening if I use the spring default login form but with basic authentication.</p>\n<p>Here is my sample security configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public AuthenticationManager authenticationManager() {\n        return new ProviderManager(new CustomAuthenticationProvider());\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests((authorize) -&gt; authorize\n                        .anyRequest().authenticated()\n                )\n                .httpBasic();\n        return http.build();\n    }\n}\n</code></pre>\n<p>My Provider looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomAuthenticationProvider implements AuthenticationProvider {\n\n    @Override\n    public Authentication authenticate(Authentication authentication)\n            throws AuthenticationException {\n\n        String username = authentication.getName();\n        String password = authentication.getCredentials().toString();\n\n        if (&quot;admin&quot;.equals(username) &amp;&amp; &quot;admin&quot;.equals(password)) {\n            var user = User.withUsername(&quot;admin&quot;).password(&quot;admin&quot;).authorities(new ArrayList&lt;&gt;()).build();\n            return new UsernamePasswordAuthenticationToken(user.getUsername(), user.getPassword(), user.getAuthorities());\n        } else {\n            throw new\n                    BadCredentialsException(&quot;system authentication failed&quot;);\n        }\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; auth) {\n        return auth.equals(UsernamePasswordAuthenticationToken.class);\n    }\n}\n</code></pre>\n<p>Behavior in short:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>SecurityConfig</th>\n<th>Behavior</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>.formLogin()</code></td>\n<td>1x Login / Provider-Call</td>\n</tr>\n<tr>\n<td><code>.httpBasic()</code></td>\n<td>1x Login per Session / 1x Provider-Call per request</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>What can I do to get the old behavior back as it was with Spring 5 / Spring Boot 2?</p>\n"},{"tags":["java","android","xml","admob","google-ads-api"],"answers":[{"tags":[],"owner":{"account_id":13736277,"reputation":404,"user_id":9912464,"display_name":"Gouranga Das"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683780456,"creation_date":1683727501,"answer_id":76219385,"question_id":76210095,"body_markdown":"**First**, I would recommend to follow the [official guidelines][1] to implement banner ads properly in your Android app.\r\n\r\n**Second**, there could be various reasons for not getting ads, for example a recently created AdMob account or a newly created ad unit ID can cause problems.\r\n\r\n**Third**, in your code, you implemented banner ads incorrectly. AdMob recommends that you **set the ad size and ad unit ID in the same way (eg set in XML or both programmatically), but not both**. When you set `app:adSize` and `app:adSize` in xml, there is no need to set the same properties programmatically. \r\n\r\n**Fourth**, In xml you set the id of `AdView` as `android:id=&quot;@+id/ad_container&quot;`. But in code you are accessing `AdView` as `LinearLayout` like below:\r\n\r\n    LinearLayout adContainer = findViewById(R.id.ad_container);\r\n    adContainer.addView(adView);\r\nAnd you are attaching the newly created `AdView` to an another `AdView`.\r\n\r\n**So what is the next step?**\r\n\r\nI am assuming your activity is `MainActivity`. Then change your  code of implementation as below:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        private AdView mAdView;\r\n\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n\r\n            MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n                @Override\r\n                public void onInitializationComplete(InitializationStatus initializationStatus) {\r\n                }\r\n            });\r\n\r\n            //We will use R.id.ad_container here as per your XML\r\n            mAdView = findViewById(R.id.ad_container);\r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n            mAdView.loadAd(adRequest);\r\n        }\r\n    }\r\n\r\nThe above example is copied from [Admob Documentation][1]. \r\n\r\n**AND** please don&#39;t use real ads for debugging, you should use Admob&#39;s [Demo AdUnit Ids][2] to avoid policy issues.\r\n\r\n\r\nThat&#39;s all I know. Hope it will help.\r\n\r\n\r\n  [1]: https://developers.google.com/admob/android/banner\r\n  [2]: https://developers.google.com/admob/android/test-ads#demo_ad_units","title":"Google AdMob does not show ads","body":"<p><strong>First</strong>, I would recommend to follow the <a href=\"https://developers.google.com/admob/android/banner\" rel=\"nofollow noreferrer\">official guidelines</a> to implement banner ads properly in your Android app.</p>\n<p><strong>Second</strong>, there could be various reasons for not getting ads, for example a recently created AdMob account or a newly created ad unit ID can cause problems.</p>\n<p><strong>Third</strong>, in your code, you implemented banner ads incorrectly. AdMob recommends that you <strong>set the ad size and ad unit ID in the same way (eg set in XML or both programmatically), but not both</strong>. When you set <code>app:adSize</code> and <code>app:adSize</code> in xml, there is no need to set the same properties programmatically.</p>\n<p><strong>Fourth</strong>, In xml you set the id of <code>AdView</code> as <code>android:id=&quot;@+id/ad_container&quot;</code>. But in code you are accessing <code>AdView</code> as <code>LinearLayout</code> like below:</p>\n<pre><code>LinearLayout adContainer = findViewById(R.id.ad_container);\nadContainer.addView(adView);\n</code></pre>\n<p>And you are attaching the newly created <code>AdView</code> to an another <code>AdView</code>.</p>\n<p><strong>So what is the next step?</strong></p>\n<p>I am assuming your activity is <code>MainActivity</code>. Then change your  code of implementation as below:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private AdView mAdView;\n\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\n            }\n        });\n\n        //We will use R.id.ad_container here as per your XML\n        mAdView = findViewById(R.id.ad_container);\n        AdRequest adRequest = new AdRequest.Builder().build();\n        mAdView.loadAd(adRequest);\n    }\n}\n</code></pre>\n<p>The above example is copied from <a href=\"https://developers.google.com/admob/android/banner\" rel=\"nofollow noreferrer\">Admob Documentation</a>.</p>\n<p><strong>AND</strong> please don't use real ads for debugging, you should use Admob's <a href=\"https://developers.google.com/admob/android/test-ads#demo_ad_units\" rel=\"nofollow noreferrer\">Demo AdUnit Ids</a> to avoid policy issues.</p>\n<p>That's all I know. Hope it will help.</p>\n"}],"owner":{"account_id":28558490,"reputation":37,"user_id":21862383,"display_name":"accismns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76219385,"answer_count":1,"score":0,"last_activity_date":1683780456,"creation_date":1683640326,"question_id":76210095,"body_markdown":"I&#39;m trying to put advertisements on my app, I put my app on amazon app store and then approved by google admob I set up Ad Unit ID (next level promotion) and put in both the xml and java part the appropriate code for it to work however I still don&#39;t get any Ad bar on the home of my app. Does anyone have any idea why it doesn&#39;t come up?\r\n\r\nJava:\r\n\r\n       ` MobileAds.initialize(this, initializationStatus -&gt; {});\r\n        // Create an AdView and set the ad unit ID and ad size\r\n        adView = new AdView(this);\r\n        adView.setAdUnitId(&quot;*******&quot;); \r\n        adView.setAdSize(AdSize.BANNER);\r\n\r\n        // Add the AdView to your layout\r\n        LinearLayout adContainer = findViewById(R.id.ad_container);\r\n        if (adContainer != null) {\r\n            adContainer.addView(adView);\r\n\r\n            // Load an ad\r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n            adView.loadAd(adRequest);\r\n        }`\r\n\r\nXML:\r\n\r\n           `&lt;com.google.android.gms.ads.AdView\r\n            android:id=&quot;@+id/ad_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            app:adSize=&quot;BANNER&quot;\r\n            app:adUnitId=&quot;***&quot; /&gt;`\r\n\r\n","title":"Google AdMob does not show ads","body":"<p>I'm trying to put advertisements on my app, I put my app on amazon app store and then approved by google admob I set up Ad Unit ID (next level promotion) and put in both the xml and java part the appropriate code for it to work however I still don't get any Ad bar on the home of my app. Does anyone have any idea why it doesn't come up?</p>\n<p>Java:</p>\n<pre><code>   ` MobileAds.initialize(this, initializationStatus -&gt; {});\n    // Create an AdView and set the ad unit ID and ad size\n    adView = new AdView(this);\n    adView.setAdUnitId(&quot;*******&quot;); \n    adView.setAdSize(AdSize.BANNER);\n\n    // Add the AdView to your layout\n    LinearLayout adContainer = findViewById(R.id.ad_container);\n    if (adContainer != null) {\n        adContainer.addView(adView);\n\n        // Load an ad\n        AdRequest adRequest = new AdRequest.Builder().build();\n        adView.loadAd(adRequest);\n    }`\n</code></pre>\n<p>XML:</p>\n<pre><code>       `&lt;com.google.android.gms.ads.AdView\n        android:id=&quot;@+id/ad_container&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentBottom=&quot;true&quot;\n        app:adSize=&quot;BANNER&quot;\n        app:adUnitId=&quot;***&quot; /&gt;`\n</code></pre>\n"},{"tags":["java","image","png","xmp","apache-commons-io"],"owner":{"account_id":19050,"reputation":29594,"user_id":44286,"accept_rate":77,"display_name":"Omnipresent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":813,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683779969,"creation_date":1477520541,"question_id":40273064,"body_markdown":"I am using the commons io imaging library. On the [format page][1] the library says\r\n\r\n&gt; Can read XMP XML (as as String) from TIFF, GIF, PNG, JPEG and PSD. Can\r\n&gt; embed XMP XML when writing GIF, PNG and TIFF. Can remove, insert and\r\n&gt; update XMP XML into existing JPEG files.\r\n\r\nHowever, I can&#39;t find any example of how to embed xmp xml to a PNG image. I&#39;ve been able to update xmp xml of a JPEG with the code below but not sure how to do it for PNG\r\n\r\n            String xmpXml = &quot;&lt;x:xmpmeta&gt;&quot; +\r\n            &quot;\\n&lt;sample&gt;&quot; +\r\n            &quot;\\n\\t&lt;Date&gt;&quot;+&quot;some date&quot;+&quot;&lt;/Date&gt;&quot; +\r\n            &quot;\\n\\t&lt;Description&gt;&quot;+&quot;Some description&quot;+&quot;&lt;/Description&gt;&quot; +\r\n            &quot;\\n&lt;/sample&gt;&quot; +\r\n            &quot;\\n&lt;/x:xmpmeta&gt;&quot;;\r\n          JpegXmpRewriter rewriter = new JpegXmpRewriter();\r\n          rewriter.updateXmpXml(isNew1,os, xmpXml);\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-imaging/formatsupport.html","title":"How to embed xmp xml metadata to PNG","body":"<p>I am using the commons io imaging library. On the <a href=\"https://commons.apache.org/proper/commons-imaging/formatsupport.html\" rel=\"nofollow\">format page</a> the library says</p>\n\n<blockquote>\n  <p>Can read XMP XML (as as String) from TIFF, GIF, PNG, JPEG and PSD. Can\n  embed XMP XML when writing GIF, PNG and TIFF. Can remove, insert and\n  update XMP XML into existing JPEG files.</p>\n</blockquote>\n\n<p>However, I can't find any example of how to embed xmp xml to a PNG image. I've been able to update xmp xml of a JPEG with the code below but not sure how to do it for PNG</p>\n\n<pre><code>        String xmpXml = \"&lt;x:xmpmeta&gt;\" +\n        \"\\n&lt;sample&gt;\" +\n        \"\\n\\t&lt;Date&gt;\"+\"some date\"+\"&lt;/Date&gt;\" +\n        \"\\n\\t&lt;Description&gt;\"+\"Some description\"+\"&lt;/Description&gt;\" +\n        \"\\n&lt;/sample&gt;\" +\n        \"\\n&lt;/x:xmpmeta&gt;\";\n      JpegXmpRewriter rewriter = new JpegXmpRewriter();\n      rewriter.updateXmpXml(isNew1,os, xmpXml);\n</code></pre>\n"},{"tags":["java","fingerprint","biometrics","iso-19794"],"comments":[{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":1,"creation_date":1369734647,"post_id":16787228,"comment_id":24193207,"body_markdown":"Shouldn&#39;t the Standard Document for ISO 19794-4 tell you this? Or am I missing something. I don&#39;t know the contents of the document, but I&#39;d expect that to be defined there.","body":"Shouldn&#39;t the Standard Document for ISO 19794-4 tell you this? Or am I missing something. I don&#39;t know the contents of the document, but I&#39;d expect that to be defined there."},{"owner":{"account_id":2157072,"reputation":3397,"user_id":1912032,"accept_rate":86,"display_name":"code_fish"},"score":0,"creation_date":1369736115,"post_id":16787228,"comment_id":24194022,"body_markdown":"@Fildor yes I have the document but from the document what I understand is that I should put image data with the BDIR header. But I want to know how do people/biometric device process the image with bdir information.","body":"@Fildor yes I have the document but from the document what I understand is that I should put image data with the BDIR header. But I want to know how do people/biometric device process the image with bdir information."}],"answers":[{"tags":[],"owner":{"account_id":104568,"reputation":4517,"user_id":279511,"accept_rate":76,"display_name":"tbsalling"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1495698700,"creation_date":1370264528,"answer_id":16897391,"question_id":16787228,"body_markdown":"You can get inspiration from the source code of [JMRTD][1]. Especially the [FingerImageInfo.java][2] file.\r\n\r\n\r\n  [1]: http://jmrtd.org/\r\n  [2]: https://static.javadoc.io/org.jmrtd/jmrtd/0.5.13/org/jmrtd/lds/iso19794/FingerImageInfo.html","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>You can get inspiration from the source code of <a href=\"http://jmrtd.org/\" rel=\"nofollow noreferrer\">JMRTD</a>. Especially the <a href=\"https://static.javadoc.io/org.jmrtd/jmrtd/0.5.13/org/jmrtd/lds/iso19794/FingerImageInfo.html\" rel=\"nofollow noreferrer\">FingerImageInfo.java</a> file.</p>\n"},{"tags":[],"owner":{"account_id":295872,"reputation":325,"user_id":600504,"display_name":"Celino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414435368,"creation_date":1370466526,"answer_id":16949929,"question_id":16787228,"body_markdown":"If you see Table B-2 of ISO 19794-4, have an example of file were uncompressed image data will be from 15th bytes from end of file. But this depends of what compression algorithm is been used: WSQ, JPEG, JPEG2000 or PNG. I don`t know a commercial or opensource libray that take an ISO file and converts to image.\r\n\r\nNeeds to read entire specification to understand this standard. It`s like a normal image file, have a header telling somethings about image and after that the pixel data. But if you see annex B maybe you can understand better this standard.\r\n\r\nI already work with this standard and we have a library developed by us to use it. If you need more specific question, please ask and I will try answer without violating my NDA at work.","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>If you see Table B-2 of ISO 19794-4, have an example of file were uncompressed image data will be from 15th bytes from end of file. But this depends of what compression algorithm is been used: WSQ, JPEG, JPEG2000 or PNG. I don`t know a commercial or opensource libray that take an ISO file and converts to image.</p>\n\n<p>Needs to read entire specification to understand this standard. It`s like a normal image file, have a header telling somethings about image and after that the pixel data. But if you see annex B maybe you can understand better this standard.</p>\n\n<p>I already work with this standard and we have a library developed by us to use it. If you need more specific question, please ask and I will try answer without violating my NDA at work.</p>\n"},{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1370729004,"creation_date":1370729004,"answer_id":17004297,"question_id":16787228,"body_markdown":"Disclaimer: I don&#39;t know the spec. \r\n\r\nAnyway, if @Celino is right about the offsets and the formats for the image data you should be able to show the images fairly easy. ImageIO can read the data if it&#39;s either JPEG (JFIF) or PNG. If it&#39;s JPEG2000, you might need JAI (jai-imageio) to read it. However, if it&#39;s WSQ, I&#39;m not sure if there&#39;s a plugin or Java library available.","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>Disclaimer: I don't know the spec. </p>\n\n<p>Anyway, if @Celino is right about the offsets and the formats for the image data you should be able to show the images fairly easy. ImageIO can read the data if it's either JPEG (JFIF) or PNG. If it's JPEG2000, you might need JAI (jai-imageio) to read it. However, if it's WSQ, I'm not sure if there's a plugin or Java library available.</p>\n"},{"tags":[],"owner":{"account_id":2889312,"reputation":53,"user_id":2478453,"display_name":"Haiko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394702758,"creation_date":1394702758,"answer_id":22374121,"question_id":16787228,"body_markdown":"There are some commercial libs available to decode WSQ, search for Neurotechnology, Cognaxon ...\r\nAll these are native C libs so you need to integrate them via JNI.","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>There are some commercial libs available to decode WSQ, search for Neurotechnology, Cognaxon ...\nAll these are native C libs so you need to integrate them via JNI.</p>\n"},{"tags":[],"owner":{"account_id":10579727,"reputation":71,"user_id":7794027,"display_name":"Sazib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683777930,"creation_date":1683777930,"answer_id":76224080,"question_id":16787228,"body_markdown":"If you are using **Secugen** fingerprint scanner you can use this method It&#39;s working for me. Here you should pass image `width`, `height`, `file path` and `JSGPLib object`. My import&#39;s: `enter code here`\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.*;\r\n    import java.awt.*;\r\n    import java.awt.color.ColorSpace;\r\n    import javax.imageio.ImageIO;\r\n    import java.io.BufferedOutputStream;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n\r\n    public void getImageIconF(int imageWidth, int imageHeight, JSGFPLib sgfplib, String path) {\r\n    \t\tint[] quality = new int[1];\r\n    \t\tlong nfiqvalue;\r\n    \t\tBufferedImage img1gray = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_BYTE_GRAY);\r\n    \t\tbyte[] imageBuffer1 = ((java.awt.image.DataBufferByte) img1gray.getRaster().getDataBuffer()).getData();\r\n    \t\tsgfplib.GetImageEx(imageBuffer1, 10 * 1000, 0, 50);\r\n    \t\ttry {\r\n    \t\t\tImageIO.write(img1gray, &quot;PNG&quot;, new File(path));\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>If you are using <strong>Secugen</strong> fingerprint scanner you can use this method It's working for me. Here you should pass image <code>width</code>, <code>height</code>, <code>file path</code> and <code>JSGPLib object</code>. My import's: <code>enter code here</code></p>\n<pre><code>import java.awt.image.BufferedImage;\nimport java.awt.image.*;\nimport java.awt.*;\nimport java.awt.color.ColorSpace;\nimport javax.imageio.ImageIO;\nimport java.io.BufferedOutputStream;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic void getImageIconF(int imageWidth, int imageHeight, JSGFPLib sgfplib, String path) {\n        int[] quality = new int[1];\n        long nfiqvalue;\n        BufferedImage img1gray = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_BYTE_GRAY);\n        byte[] imageBuffer1 = ((java.awt.image.DataBufferByte) img1gray.getRaster().getDataBuffer()).getData();\n        sgfplib.GetImageEx(imageBuffer1, 10 * 1000, 0, 50);\n        try {\n            ImageIO.write(img1gray, &quot;PNG&quot;, new File(path));\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n    }\n</code></pre>\n"}],"owner":{"account_id":2157072,"reputation":3397,"user_id":1912032,"accept_rate":86,"display_name":"code_fish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4658,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":16897391,"answer_count":5,"score":7,"last_activity_date":1683777930,"creation_date":1369729372,"question_id":16787228,"body_markdown":"I am having a Bio metric finger print scanning device and we are able to read the data scanned by image. Now we have to make the image in accordace with the ISO compliance i.e. we have to add the `Binary Data Interchange Record(BDIR)` with the image data to follow the data record interchange format as specified in `ISO/IEC 19794-4:2011`.\r\n\r\n\r\n\r\n**UPDATE:**\r\nI have an ISO/IEC 19794-4 image data file. I have to make image from the data. Now the data has the additional General header and Representation header information along with image data. How can I make image from this data. Should I just extract the image data from ISO/IEC 19794-4 image data and show it on screen?\r\n\r\nOR \r\n\r\nWhat is the proper way of creating and showing image from ISO/IEC 19794-4 image data file.\r\n\r\nThanks in advance","title":"Create image from ISO/IEC 19794-4 image data file","body":"<p>I am having a Bio metric finger print scanning device and we are able to read the data scanned by image. Now we have to make the image in accordace with the ISO compliance i.e. we have to add the <code>Binary Data Interchange Record(BDIR)</code> with the image data to follow the data record interchange format as specified in <code>ISO/IEC 19794-4:2011</code>.</p>\n\n<p><strong>UPDATE:</strong>\nI have an ISO/IEC 19794-4 image data file. I have to make image from the data. Now the data has the additional General header and Representation header information along with image data. How can I make image from this data. Should I just extract the image data from ISO/IEC 19794-4 image data and show it on screen?</p>\n\n<p>OR </p>\n\n<p>What is the proper way of creating and showing image from ISO/IEC 19794-4 image data file.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","bigdecimal","bignum","web3-java"],"answers":[{"tags":[],"owner":{"account_id":9815835,"reputation":1242,"user_id":7272379,"display_name":"Fariha Abbasi"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1660147256,"creation_date":1591789177,"answer_id":62302672,"question_id":62301960,"body_markdown":"I tried sending the parameter as a String and it worked.","title":"Unable to call contract function from web3 with big number as parameter","body":"<p>I tried sending the parameter as a String and it worked.</p>\n"},{"tags":[],"owner":{"account_id":1856445,"reputation":5907,"user_id":1681903,"accept_rate":71,"display_name":"vanduc1102"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1683777335,"creation_date":1636277271,"answer_id":69871180,"question_id":62301960,"body_markdown":"I&#39;m using BigInt in my Truffle UnitTest ( this is typescript code )\r\n\r\n```typescript\r\nit(&#39;should return correct balances when transfer&#39;, async () =&gt; {\r\n    const receiver = accounts[2];\r\n    const balanceOfOwner = await contractInstance.balanceOf.call(owner);\r\n    assert.equal(balanceOfOwner, totalSupply * 10 ** decimals, &#39;Total balance&#39;);\r\n\r\n    const sendAmount = 69 * 10 ** decimals;\r\n    await contractInstance.transfer(receiver, BigInt(sendAmount), {\r\n      from: owner,\r\n    });\r\n\r\n    const balanceOfReceiver = await contractInstance.balanceOf.call(receiver);\r\n    assert.equal(balanceOfReceiver, sendAmount, &#39;Received sendAmount&#39;);\r\n    assert.equal(\r\n      await contractInstance.balanceOf.call(owner),\r\n      balanceOfOwner - sendAmount,\r\n      &#39;Decreased to&#39;\r\n    );\r\n  });\r\n```","title":"Unable to call contract function from web3 with big number as parameter","body":"<p>I'm using BigInt in my Truffle UnitTest ( this is typescript code )</p>\n<pre class=\"lang-js prettyprint-override\"><code>it('should return correct balances when transfer', async () =&gt; {\n    const receiver = accounts[2];\n    const balanceOfOwner = await contractInstance.balanceOf.call(owner);\n    assert.equal(balanceOfOwner, totalSupply * 10 ** decimals, 'Total balance');\n\n    const sendAmount = 69 * 10 ** decimals;\n    await contractInstance.transfer(receiver, BigInt(sendAmount), {\n      from: owner,\n    });\n\n    const balanceOfReceiver = await contractInstance.balanceOf.call(receiver);\n    assert.equal(balanceOfReceiver, sendAmount, 'Received sendAmount');\n    assert.equal(\n      await contractInstance.balanceOf.call(owner),\n      balanceOfOwner - sendAmount,\n      'Decreased to'\n    );\n  });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23232110,"reputation":101,"user_id":17322664,"display_name":"Ogubuike Alexandra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648800428,"creation_date":1648800428,"answer_id":71703709,"question_id":62301960,"body_markdown":"For me, I was trying to call .toNumber() on a BigNumber and the error came up. It went away when I used .toString() instead \r\n\r\n```\r\nx.toString();\r\n```","title":"Unable to call contract function from web3 with big number as parameter","body":"<p>For me, I was trying to call .toNumber() on a BigNumber and the error came up. It went away when I used .toString() instead</p>\n<pre><code>x.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20525661,"reputation":653,"user_id":15064155,"display_name":"Aun Shahbaz Awan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653060244,"creation_date":1653060244,"answer_id":72321364,"question_id":62301960,"body_markdown":"To enable the **BigInt** global you can add a comment to your code:\r\n\r\n    /* global BigInt */\r\n\r\nand here is the web3 code snippet:\r\n\r\n    Contract.methods.lock(0x57AA33D53351eA4BF00C6F10c816B3037E268b7a, \r\n       BigInt(10000000000000000000)).send({\r\n          from: accounts[0],\r\n          gasLimit: 500000,\r\n          value: 0\r\n       });\r\n\r\n\r\n\r\n","title":"Unable to call contract function from web3 with big number as parameter","body":"<p>To enable the <strong>BigInt</strong> global you can add a comment to your code:</p>\n<pre><code>/* global BigInt */\n</code></pre>\n<p>and here is the web3 code snippet:</p>\n<pre><code>Contract.methods.lock(0x57AA33D53351eA4BF00C6F10c816B3037E268b7a, \n   BigInt(10000000000000000000)).send({\n      from: accounts[0],\n      gasLimit: 500000,\n      value: 0\n   });\n</code></pre>\n"}],"owner":{"account_id":9815835,"reputation":1242,"user_id":7272379,"display_name":"Fariha Abbasi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24424,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":4,"score":27,"last_activity_date":1683777335,"creation_date":1591786895,"question_id":62301960,"body_markdown":"I am trying to call a custom function of a contract that expects a parameter of unit256.\r\n\r\nI&#39;m calling this function from web3 with this value as parameter: 10000000000000000000 (10 with 18 zeros)\r\nAs soon as this call is hit by web3, I faced following Big number error:\r\n\r\n&gt; Error: overflow (fault=&quot;overflow&quot;, operation=&quot;BigNumber.from&quot;, value=10000000000000000000, code=NUMERIC_FAULT, version=bignumber/5.0.0-beta.138)**\r\n\r\nDoes anyone know the cause?\r\n\r\nHere is the function of the contract I&#39;m calling:\r\n\r\n    function lock(\r\n        address tokenAddress,\r\n        uint256 amount\r\n    )\r\nand here is the web3 code snippet:\r\n\r\n    Contract.methods.lock(0x57AA33D53351eA4BF00C6F10c816B3037E268b7a, 10000000000000000000,\r\n            ).send({\r\n                from: accounts[0],\r\n                gasLimit: 500000,\r\n                value: 0\r\n            });\r\n\r\nI tried the same function with small values for amount and it worked e.g. 1(with 18 zeros)","title":"Unable to call contract function from web3 with big number as parameter","body":"<p>I am trying to call a custom function of a contract that expects a parameter of unit256.</p>\n<p>I'm calling this function from web3 with this value as parameter: 10000000000000000000 (10 with 18 zeros)\nAs soon as this call is hit by web3, I faced following Big number error:</p>\n<blockquote>\n<p>Error: overflow (fault=&quot;overflow&quot;, operation=&quot;BigNumber.from&quot;, value=10000000000000000000, code=NUMERIC_FAULT, version=bignumber/5.0.0-beta.138)**</p>\n</blockquote>\n<p>Does anyone know the cause?</p>\n<p>Here is the function of the contract I'm calling:</p>\n<pre><code>function lock(\n    address tokenAddress,\n    uint256 amount\n)\n</code></pre>\n<p>and here is the web3 code snippet:</p>\n<pre><code>Contract.methods.lock(0x57AA33D53351eA4BF00C6F10c816B3037E268b7a, 10000000000000000000,\n        ).send({\n            from: accounts[0],\n            gasLimit: 500000,\n            value: 0\n        });\n</code></pre>\n<p>I tried the same function with small values for amount and it worked e.g. 1(with 18 zeros)</p>\n"},{"tags":["java","java.util.scanner","removing-whitespace"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1570584709,"post_id":58295896,"comment_id":102955358,"body_markdown":"`String [] nums = keyboard.nextLine().split(&quot;+&quot;)` - use Integer.valueOf(nums[0]) etc.","body":"<code>String [] nums = keyboard.nextLine().split(&quot;+&quot;)</code> - use Integer.valueOf(nums[0]) etc."},{"owner":{"account_id":16852777,"reputation":11,"user_id":12185314,"display_name":"computer891"},"score":0,"creation_date":1570584954,"post_id":58295896,"comment_id":102955398,"body_markdown":"but the scanner has to be able read any operator not specific and why an array?","body":"but the scanner has to be able read any operator not specific and why an array?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1570585594,"post_id":58295896,"comment_id":102955515,"body_markdown":"In that case you are better finding a library that does this for you.","body":"In that case you are better finding a library that does this for you."}],"answers":[{"tags":[],"owner":{"account_id":16158789,"reputation":21,"user_id":11665426,"display_name":"jay patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570586259,"creation_date":1570586259,"answer_id":58296059,"question_id":58295896,"body_markdown":"&gt;This is not working because you don&#39;t enter it with spaces. Try entering is separately like entering 1 and the enter and then + and the enter and then 1. \r\n&gt; hope This helps you.\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\npublic class operations{\r\n   public static void main(String[] args){\r\n      Scanner sc = new Scanner(System.in);\r\n      System.out.println(&quot;Enter the equation&quot;);\r\n      String eq  = sc.nextLine();\r\n      System.out.println(eq);\r\n      String[] result = eq.split(&quot;(?&lt;=[-+*/])|(?=[-+*/])&quot;);\r\n      System.out.println(result[0]);\r\n      System.out.println(result[1]);\r\n      System.out.println(result[2]);\r\n   }\r\n}  \r\n\r\n```","title":"Is there a way to create a simple equation using scanner","body":"<blockquote>\n  <p>This is not working because you don't enter it with spaces. Try entering is separately like entering 1 and the enter and then + and the enter and then 1. \n  hope This helps you.</p>\n</blockquote>\n\n<pre><code>import java.util.*;\nimport java.io.*;\npublic class operations{\n   public static void main(String[] args){\n      Scanner sc = new Scanner(System.in);\n      System.out.println(\"Enter the equation\");\n      String eq  = sc.nextLine();\n      System.out.println(eq);\n      String[] result = eq.split(\"(?&lt;=[-+*/])|(?=[-+*/])\");\n      System.out.println(result[0]);\n      System.out.println(result[1]);\n      System.out.println(result[2]);\n   }\n}  \n\n</code></pre>\n"}],"owner":{"account_id":16852777,"reputation":11,"user_id":12185314,"display_name":"computer891"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683777091,"creation_date":1570584525,"question_id":58295896,"body_markdown":"I&#39;m a beginner in java, and I am trying to figure out why 2 operands with an operator &quot;without spaces&quot; is not allowed in a scanner. \r\n\r\nI&#39;m trying to do an output that does\r\n \r\n    enter an operand with an operator and another operand: \r\n    1+1 \r\n    The answer is: 2.0 \r\n\r\nThe first and last lines is ok to understand, but the 2nd line I thought it would be simple, but I get an error when I put 1+1. However when I do 1 + 1 it works (with spaces). I declared 3 variables to input in the scanner:\r\n\r\n    double input1 = keyboard.nextDouble();\r\n    char operator = keyboard.next().charAt(0);\r\n\tdouble input2 = keyboard.nextDouble();\r\n\r\nI tried this but an error occurred, but by doing 1 + 1 using the scanner (above) it worked. Is there a way to remove the spaces between operands and operator?","title":"Is there a way to create a simple equation using scanner","body":"<p>I'm a beginner in java, and I am trying to figure out why 2 operands with an operator \"without spaces\" is not allowed in a scanner. </p>\n\n<p>I'm trying to do an output that does</p>\n\n<pre><code>enter an operand with an operator and another operand: \n1+1 \nThe answer is: 2.0 \n</code></pre>\n\n<p>The first and last lines is ok to understand, but the 2nd line I thought it would be simple, but I get an error when I put 1+1. However when I do 1 + 1 it works (with spaces). I declared 3 variables to input in the scanner:</p>\n\n<pre><code>double input1 = keyboard.nextDouble();\nchar operator = keyboard.next().charAt(0);\ndouble input2 = keyboard.nextDouble();\n</code></pre>\n\n<p>I tried this but an error occurred, but by doing 1 + 1 using the scanner (above) it worked. Is there a way to remove the spaces between operands and operator?</p>\n"},{"tags":["java","for-loop","iterator","queue"],"comments":[{"owner":{"account_id":6379952,"reputation":3111,"user_id":4949750,"display_name":"Amongalen"},"score":2,"creation_date":1588860492,"post_id":61659790,"comment_id":109067476,"body_markdown":"Why do you think it would remove any element? You never called `remove()`. You can think of an `iterator` as a pointer, that is pointing at specific element of the collection. When you call `i.next()`, the pointer moves by one and points on another element.","body":"Why do you think it would remove any element? You never called <code>remove()</code>. You can think of an <code>iterator</code> as a pointer, that is pointing at specific element of the collection. When you call <code>i.next()</code>, the pointer moves by one and points on another element."},{"owner":{"account_id":8262666,"reputation":1,"user_id":6213462,"display_name":"Lahiru Ekanayake"},"score":0,"creation_date":1588864830,"post_id":61659790,"comment_id":109070262,"body_markdown":"@Amongalen Beacuse I am assuming `Queue` only have `remove()/poll()` methods to get all of the stored values/objects. Therefore, how can an *iterator* of a `Queue object` traverse it without changing the `Queue`, *`names`*?           Also, if `next()` uses a pointer on a `Queue object` what is the method it uses to get the n_th element ?","body":"@Amongalen Beacuse I am assuming <code>Queue</code> only have <code>remove()&#47;poll()</code> methods to get all of the stored values/objects. Therefore, how can an <i>iterator</i> of a <code>Queue object</code> traverse it without changing the <code>Queue</code>, <i><code>names</code></i>?           Also, if <code>next()</code> uses a pointer on a <code>Queue object</code> what is the method it uses to get the n_th element ?"}],"answers":[{"tags":[],"owner":{"account_id":1857245,"reputation":9188,"user_id":1682559,"accept_rate":80,"display_name":"Kevin Cruijssen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588869198,"creation_date":1588860613,"answer_id":61659962,"question_id":61659790,"body_markdown":"`Iterator` is simply used to iterate over a Collection. In this case, you could have used a for-each for the same result:\r\n\r\n    for(String name : names){\r\n      System.out.println(name);\r\n    }\r\n\r\nBased on your question however, I assume you want to iterate over the `Queue`, ***popping*** and printing each item in FIFO order (hence the use of your `LinkedList`). In that case, you may simply want to loop `names.size()` amount of times, and calling `.remove()` to pop an item each iteration, like this:\r\n\r\n    for(int n = names.size(); n &gt; 0; n--){\r\n      String name = names.remove();\r\n      System.out.println(name);\r\n    }\r\n\r\nOutput:\r\n\r\n&lt;!-- language-all: none --&gt;\r\n\r\n    Queue before the loop: [First, Middle, Last]\r\n    Printing loop...\r\n    First\r\n    Middle\r\n    Last\r\n    Queue after the loop: []\r\n\r\n[**Try it online.**](https://tio.run/##jU9NT8MwDL33V1g9pUAjznRU4sKpk0A7Ig7Z6o10aVIlbtFA@@3FaaWpCIHwxYn9PvwaNai8qY/jqNvOeYKGB7InbeRVkSQ7o0KAtdL2MwGurt8avYNAirgNTtfQ8lJsyGt7eHkFlc3AWM899riaVyVY1WKAe7D4DpW2R6wrHWhVigfv1SlIFeJfpI/aB0pvIF3rujYYX5XiSZYVF@XNKRC20vUkO1YnY0U6ucEW984j0BuCca67gxSuZ2um/8l/ig@@dOJJKdOFH2sK3oKN90cxGfQHiqzgSQm33PJ8EXyymGJP6AvJY@uGSPuO/HlMhC9Q5@QfydWe0P8SfBY5j@MX)\r\n\r\n---------------\r\n\r\nEDIT: To explain a bit more of what&#39;s going on for the `.iterator()`:\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\nIf we look at [the source code of the `Iterator`](http://developer.classpath.org/doc/java/util/Iterator-source.html), we can see it&#39;s an interface. Each Collection-implementation will have its own individual Iterator implementation.  \r\nLooking at [the source code of the `Queue`](https://introcs.cs.princeton.edu/java/43stack/Queue.java.html), the `iterator()` method is this:\r\n\r\n    /**\r\n     * Returns an iterator that iterates over the items in this queue in FIFO order.\r\n     *\r\n     * @return an iterator that iterates over the items in this queue in FIFO order\r\n     */\r\n    public Iterator&lt;Item&gt; iterator() {\r\n        return new ListIterator();\r\n    }\r\n\r\n    // an iterator, doesn&#39;t implement remove() since it&#39;s optional\r\n    private class ListIterator implements Iterator&lt;Item&gt; {\r\n        private Node current = first;  // node containing current item\r\n\r\n        public boolean hasNext() {\r\n            return current != null;\r\n        }\r\n\r\n        public void remove() {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n\r\n        public Item next() {\r\n            if (!hasNext()) throw new NoSuchElementException();\r\n            Item item = current.item;\r\n            current = current.next;\r\n            return item;\r\n        }\r\n    }\r\n\r\nAs you can see, it stores the `Node first` of Queue as its `current` when the `ListIterator` is created in the `iterator()` method.  \r\nIn the actual `next()`-method, it uses neither the `remove()` nor `poll()` methods of the Queue (nor `get()`..), so the items aren&#39;t actually popped. Instead, it simply stores the current Node temporarily with `Item item = current.item`; then updates the `current` Node to the next one with `current = current.next`; after which it will return that temporary `item`.\r\n\r\n","title":"What Iterator.next() method do inside a for statement when used with java.util.Queue?","body":"<p><code>Iterator</code> is simply used to iterate over a Collection. In this case, you could have used a for-each for the same result:</p>\n\n<pre><code>for(String name : names){\n  System.out.println(name);\n}\n</code></pre>\n\n<p>Based on your question however, I assume you want to iterate over the <code>Queue</code>, <strong><em>popping</em></strong> and printing each item in FIFO order (hence the use of your <code>LinkedList</code>). In that case, you may simply want to loop <code>names.size()</code> amount of times, and calling <code>.remove()</code> to pop an item each iteration, like this:</p>\n\n<pre><code>for(int n = names.size(); n &gt; 0; n--){\n  String name = names.remove();\n  System.out.println(name);\n}\n</code></pre>\n\n<p>Output:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>Queue before the loop: [First, Middle, Last]\nPrinting loop...\nFirst\nMiddle\nLast\nQueue after the loop: []\n</code></pre>\n\n<p><a href=\"https://tio.run/##jU9NT8MwDL33V1g9pUAjznRU4sKpk0A7Ig7Z6o10aVIlbtFA@@3FaaWpCIHwxYn9PvwaNai8qY/jqNvOeYKGB7InbeRVkSQ7o0KAtdL2MwGurt8avYNAirgNTtfQ8lJsyGt7eHkFlc3AWM899riaVyVY1WKAe7D4DpW2R6wrHWhVigfv1SlIFeJfpI/aB0pvIF3rujYYX5XiSZYVF@XNKRC20vUkO1YnY0U6ucEW984j0BuCca67gxSuZ2um/8l/ig@@dOJJKdOFH2sK3oKN90cxGfQHiqzgSQm33PJ8EXyymGJP6AvJY@uGSPuO/HlMhC9Q5@QfydWe0P8SfBY5j@MX\" rel=\"nofollow noreferrer\"><strong>Try it online.</strong></a></p>\n\n<hr>\n\n<p>EDIT: To explain a bit more of what's going on for the <code>.iterator()</code>:</p>\n\n\n\n<p>If we look at <a href=\"http://developer.classpath.org/doc/java/util/Iterator-source.html\" rel=\"nofollow noreferrer\">the source code of the <code>Iterator</code></a>, we can see it's an interface. Each Collection-implementation will have its own individual Iterator implementation.<br>\nLooking at <a href=\"https://introcs.cs.princeton.edu/java/43stack/Queue.java.html\" rel=\"nofollow noreferrer\">the source code of the <code>Queue</code></a>, the <code>iterator()</code> method is this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Returns an iterator that iterates over the items in this queue in FIFO order.\n *\n * @return an iterator that iterates over the items in this queue in FIFO order\n */\npublic Iterator&lt;Item&gt; iterator() {\n    return new ListIterator();\n}\n\n// an iterator, doesn't implement remove() since it's optional\nprivate class ListIterator implements Iterator&lt;Item&gt; {\n    private Node current = first;  // node containing current item\n\n    public boolean hasNext() {\n        return current != null;\n    }\n\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n    public Item next() {\n        if (!hasNext()) throw new NoSuchElementException();\n        Item item = current.item;\n        current = current.next;\n        return item;\n    }\n}\n</code></pre>\n\n<p>As you can see, it stores the <code>Node first</code> of Queue as its <code>current</code> when the <code>ListIterator</code> is created in the <code>iterator()</code> method.<br>\nIn the actual <code>next()</code>-method, it uses neither the <code>remove()</code> nor <code>poll()</code> methods of the Queue (nor <code>get()</code>..), so the items aren't actually popped. Instead, it simply stores the current Node temporarily with <code>Item item = current.item</code>; then updates the <code>current</code> Node to the next one with <code>current = current.next</code>; after which it will return that temporary <code>item</code>.</p>\n"},{"tags":[],"owner":{"account_id":8262666,"reputation":1,"user_id":6213462,"display_name":"Lahiru Ekanayake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589113957,"creation_date":1589113957,"answer_id":61712032,"question_id":61659790,"body_markdown":"&gt; Since `names` is a *LinkedList* object and *LinkedList* does&#39;t have\r\n&gt; any `iterator()` method in it, `names.iterator()` would call\r\n&gt; [that method in\r\n&gt; *AbstractSequentialList*](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractSequentialList.java#l238)\r\n&gt; (immediate super class of *LinkedList*).\r\n\r\n&gt;However, by tracking the call stack *(can be done easily through a GUI debugger of any decent java IDE)* when initializing `i = names.iterator()` one can easily see it calls the method `listIterator(0)` method [here](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractList.java#l299). Eventhough *AbstractList* has it&#39;s own implementation of `listIterator(int index)`, *LinkedList* has [overriden that same method](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/LinkedList.java#l864) ;\r\n\r\n&lt;br/&gt;Segment of *LinkedList.java* :\r\n```\r\npackage java.util;\r\n\r\npublic class LinkedList&lt;E&gt;\r\n    extends AbstractSequentialList&lt;E&gt;\r\n    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable\r\n{\t\r\n\tpublic ListIterator&lt;E&gt; listIterator(int index) {\r\n\t\t\tcheckPositionIndex(index);\r\n\t\t\treturn new ListItr(index);\r\n    }\r\n    private class ListItr implements ListIterator&lt;E&gt; {\r\n        private Node&lt;E&gt; lastReturned = null;\r\n        private Node&lt;E&gt; next;\r\n        private int nextIndex;\r\n        private int expectedModCount = modCount;\r\n        ListItr(int index) {\r\n            // assert isPositionIndex(index);\r\n            next = (index == size) ? null : node(index);\r\n            nextIndex = index;\r\n        }\r\n        public boolean hasNext() {\r\n            return nextIndex &lt; size;\r\n        }\r\n        public E next() {\r\n            checkForComodification();\r\n            if (!hasNext())\r\n                throw new NoSuchElementException();\r\n            lastReturned = next;\r\n            next = next.next;\r\n            nextIndex++;\r\n            return lastReturned.item;\r\n        }\r\n\t*\r\n\t*\t(code contraction...)\r\n\t*\r\n\t\tfinal void checkForComodification() {\r\n\t\t\t\tif (modCount != expectedModCount)\r\n\t\t\t\t\tthrow new ConcurrentModificationException();\r\n\t\t\t}\r\n\t}\r\n}\r\n```\r\n&gt;Hence, obviously `names.iterator()` would return an object through `return new ListItr(index)`, which is an inner class of *LinkedList*.\r\n\r\n&gt;Now we can clearly see when calling `i.next()`, it actually calls the `next()` method in the inner class ***ListItr***. Also it uses the class variable;\r\n```\r\nprivate Node&lt;E&gt; next;\r\n```\r\n&gt;to track, to where the iterator is pointing next.\r\n\r\n&gt;This comes into play when considering the performance of the [enhanced for loop](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2).\r\n\r\n&lt;br/&gt;Segment of Oracle docs for *enhance-for-loop*s :\r\n```\r\nfor (I #i = Expression.iterator(); #i.hasNext(); ) {\r\n    VariableModifiersopt TargetType Identifier = (TargetType) #i.next();\r\n    Statement\r\n}\r\n```\r\n&gt; As you can see this uses the `#i.next()` method and since `names`(in the original question&#39;s example) is a variable of type ***Queue***, one can in-the-dark assume `#i.next()` in the enhanced-for-loop uses [this](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractList.java#l354) implementation which is in *AbstractList* and it questionably uses some `get(int index)` method, hence poor performance (a poor,unfortunate guy like me, did the same deduction and caught up in a hay-stack of code. LOL).\r\n\r\n&gt;On that false deduction I asked this question in this forum and after digging deeper for several days, now I can see there are **no any performance reduction**(not that I know of) when **using an enhanced-for-loop to iterate over a _LinkedList_ object** due to the fact,\r\n\r\n&gt;&gt;that *iterator object*(`#i`) uses a variable `Node&lt;E&gt; next` to keep the reference to the next object in-order to use in the *enhanced-for-loop* &#39;s next iteration.","title":"What Iterator.next() method do inside a for statement when used with java.util.Queue?","body":"<blockquote>\n  <p>Since <code>names</code> is a <em>LinkedList</em> object and <em>LinkedList</em> does't have\n  any <code>iterator()</code> method in it, <code>names.iterator()</code> would call\n  <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractSequentialList.java#l238\" rel=\"nofollow noreferrer\">that method in\n  <em>AbstractSequentialList</em></a>\n  (immediate super class of <em>LinkedList</em>).</p>\n  \n  <p>However, by tracking the call stack <em>(can be done easily through a GUI debugger of any decent java IDE)</em> when initializing <code>i = names.iterator()</code> one can easily see it calls the method <code>listIterator(0)</code> method <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractList.java#l299\" rel=\"nofollow noreferrer\">here</a>. Eventhough <em>AbstractList</em> has it's own implementation of <code>listIterator(int index)</code>, <em>LinkedList</em> has <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/LinkedList.java#l864\" rel=\"nofollow noreferrer\">overriden that same method</a> ;</p>\n</blockquote>\n\n<p><br/>Segment of <em>LinkedList.java</em> :</p>\n\n<pre><code>package java.util;\n\npublic class LinkedList&lt;E&gt;\n    extends AbstractSequentialList&lt;E&gt;\n    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable\n{   \n    public ListIterator&lt;E&gt; listIterator(int index) {\n            checkPositionIndex(index);\n            return new ListItr(index);\n    }\n    private class ListItr implements ListIterator&lt;E&gt; {\n        private Node&lt;E&gt; lastReturned = null;\n        private Node&lt;E&gt; next;\n        private int nextIndex;\n        private int expectedModCount = modCount;\n        ListItr(int index) {\n            // assert isPositionIndex(index);\n            next = (index == size) ? null : node(index);\n            nextIndex = index;\n        }\n        public boolean hasNext() {\n            return nextIndex &lt; size;\n        }\n        public E next() {\n            checkForComodification();\n            if (!hasNext())\n                throw new NoSuchElementException();\n            lastReturned = next;\n            next = next.next;\n            nextIndex++;\n            return lastReturned.item;\n        }\n    *\n    *   (code contraction...)\n    *\n        final void checkForComodification() {\n                if (modCount != expectedModCount)\n                    throw new ConcurrentModificationException();\n            }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Hence, obviously <code>names.iterator()</code> would return an object through <code>return new ListItr(index)</code>, which is an inner class of <em>LinkedList</em>.</p>\n  \n  <p>Now we can clearly see when calling <code>i.next()</code>, it actually calls the <code>next()</code> method in the inner class <strong><em>ListItr</em></strong>. Also it uses the class variable;</p>\n</blockquote>\n\n<pre><code>private Node&lt;E&gt; next;\n</code></pre>\n\n<blockquote>\n  <p>to track, to where the iterator is pointing next.</p>\n  \n  <p>This comes into play when considering the performance of the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2\" rel=\"nofollow noreferrer\">enhanced for loop</a>.</p>\n</blockquote>\n\n<p><br/>Segment of Oracle docs for <em>enhance-for-loop</em>s :</p>\n\n<pre><code>for (I #i = Expression.iterator(); #i.hasNext(); ) {\n    VariableModifiersopt TargetType Identifier = (TargetType) #i.next();\n    Statement\n}\n</code></pre>\n\n<blockquote>\n  <p>As you can see this uses the <code>#i.next()</code> method and since <code>names</code>(in the original question's example) is a variable of type <strong><em>Queue</em></strong>, one can in-the-dark assume <code>#i.next()</code> in the enhanced-for-loop uses <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/util/AbstractList.java#l354\" rel=\"nofollow noreferrer\">this</a> implementation which is in <em>AbstractList</em> and it questionably uses some <code>get(int index)</code> method, hence poor performance (a poor,unfortunate guy like me, did the same deduction and caught up in a hay-stack of code. LOL).</p>\n  \n  <p>On that false deduction I asked this question in this forum and after digging deeper for several days, now I can see there are <strong>no any performance reduction</strong>(not that I know of) when <strong>using an enhanced-for-loop to iterate over a <em>LinkedList</em> object</strong> due to the fact,</p>\n  \n  <blockquote>\n    <p>that <em>iterator object</em>(<code>#i</code>) uses a variable <code>Node&lt;E&gt; next</code> to keep the reference to the next object in-order to use in the <em>enhanced-for-loop</em> 's next iteration.</p>\n  </blockquote>\n</blockquote>\n"}],"owner":{"account_id":8262666,"reputation":1,"user_id":6213462,"display_name":"Lahiru Ekanayake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1727,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1683777068,"creation_date":1588860135,"question_id":61659790,"body_markdown":"For example:\r\n```lang-java\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        Queue&lt;String&gt; names = new LinkedList&lt;&gt;(Arrays.asList(&quot;First&quot;, &quot;Middle&quot;, &quot;Last&quot;));\r\n        System.out.println(&quot;Queue before the loop: &quot; + names);\r\n\r\n        System.out.println(&quot;Printing loop...&quot;);\r\n        for (Iterator&lt;String&gt; i = names.iterator(); i.hasNext();) {\r\n            String name = i.next();\r\n            System.out.println(name);\r\n        }\r\n\r\n        System.out.println(&quot;Queue after the loop: &quot; + names);\r\n    }\r\n}\r\n```\r\nOutput:\r\n```lang-none\r\nQueue before the loop: [First, Middle, Last]\r\nPrinting loop...\r\nFirst\r\nMiddle\r\nLast\r\nQueue after the loop: [First, Middle, Last]\r\n```\r\n\r\nI know how the next() method traverse the *LinkedList*. But when it is called on a *Queue.iterator()* like, `i.next()` what does it do? &lt;br/&gt;&lt;br/&gt;As you can see from the output it haven&#39;t removed any element from the queue. &lt;br/&gt;*which I thought would be the case, since Queue only have `remove()/poll()`.*","title":"What Iterator.next() method do inside a for statement when used with java.util.Queue?","body":"<p>For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n\n    public static void main(String[] args) {\n        Queue&lt;String&gt; names = new LinkedList&lt;&gt;(Arrays.asList(\"First\", \"Middle\", \"Last\"));\n        System.out.println(\"Queue before the loop: \" + names);\n\n        System.out.println(\"Printing loop...\");\n        for (Iterator&lt;String&gt; i = names.iterator(); i.hasNext();) {\n            String name = i.next();\n            System.out.println(name);\n        }\n\n        System.out.println(\"Queue after the loop: \" + names);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Queue before the loop: [First, Middle, Last]\nPrinting loop...\nFirst\nMiddle\nLast\nQueue after the loop: [First, Middle, Last]\n</code></pre>\n\n<p>I know how the next() method traverse the <em>LinkedList</em>. But when it is called on a <em>Queue.iterator()</em> like, <code>i.next()</code> what does it do? <br/><br/>As you can see from the output it haven't removed any element from the queue. <br/><em>which I thought would be the case, since Queue only have <code>remove()/poll()</code>.</em></p>\n"},{"tags":["java","string","java.util.scanner"],"comments":[{"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"score":0,"creation_date":1584164881,"post_id":60680078,"comment_id":107358675,"body_markdown":"You aren&#39;t even supposed to touch the main method here?","body":"You aren&#39;t even supposed to touch the main method here?"},{"owner":{"account_id":14384415,"reputation":1324,"user_id":10390808,"display_name":"Abhinav Chauhan"},"score":0,"creation_date":1584165262,"post_id":60680078,"comment_id":107358735,"body_markdown":"next() stops taking input when the delimeter is reached which is by default a space , and nextline() stops taking input when you press the enter so spaces are also counted","body":"next() stops taking input when the delimeter is reached which is by default a space , and nextline() stops taking input when you press the enter so spaces are also counted"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1584166599,"post_id":60680078,"comment_id":107358915,"body_markdown":"I did not verify the timing, but it seems that `Scanner.nextLine()` uses a regular expression that is computationally more expensive than the one used by `Scanner.next()`. But: the input data is presented one item per line, so the fastest way to read the input would be using `BufferedReader.readLine()`","body":"I did not verify the timing, but it seems that <code>Scanner.nextLine()</code> uses a regular expression that is computationally more expensive than the one used by <code>Scanner.next()</code>. But: the input data is presented one item per line, so the fastest way to read the input would be using <code>BufferedReader.readLine()</code>"}],"owner":{"account_id":13889137,"reputation":3,"user_id":10444822,"display_name":"Rohan Gaonkar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683777055,"creation_date":1584164595,"question_id":60680078,"body_markdown":"I was solving [this][1] problem on Hackerrank. Where I had to sort large numbers. So what I did was that I used collection.sort method and used custom comparator to sort the array. so my compare method was actually comparing string, since i cannot use int or double as range of numbers was bigger. What I noticed was that when I used sc.nextLine() to scan it did not pass all test cases. But when I used sc.next() it passed all test cases. Can anyone tell me reason behind this.\r\n\r\n        public static void main(String[] args) {\r\n         Scanner sc=new Scanner(System.in);\r\n         int x=sc.nextInt();sc.nextLine();\r\n        \r\n         List&lt;String&gt; list=new ArrayList();\r\n         for(int i=0;i&lt;x;i++){\r\n             list.add(sc.next());\r\n         }\r\n        Collections.sort(list, (s1,s2) -&gt;{\r\n            if(s1.length()==s2.length())\r\n               return s1.compareTo(s2);\r\n               return s1.length()&gt;s2.length()?1:-1;\r\n                     } \r\n               );\r\n         for(String str:list)\r\n        System.out.println(str);\r\n         \r\n\r\n    }\r\n\r\n\r\n  [1]: https://www.hackerrank.com/challenges/big-sorting/problem","title":"Performance of sc.next() and sc.nextLine()","body":"<p>I was solving <a href=\"https://www.hackerrank.com/challenges/big-sorting/problem\" rel=\"nofollow noreferrer\">this</a> problem on Hackerrank. Where I had to sort large numbers. So what I did was that I used collection.sort method and used custom comparator to sort the array. so my compare method was actually comparing string, since i cannot use int or double as range of numbers was bigger. What I noticed was that when I used sc.nextLine() to scan it did not pass all test cases. But when I used sc.next() it passed all test cases. Can anyone tell me reason behind this.</p>\n\n<pre><code>    public static void main(String[] args) {\n     Scanner sc=new Scanner(System.in);\n     int x=sc.nextInt();sc.nextLine();\n\n     List&lt;String&gt; list=new ArrayList();\n     for(int i=0;i&lt;x;i++){\n         list.add(sc.next());\n     }\n    Collections.sort(list, (s1,s2) -&gt;{\n        if(s1.length()==s2.length())\n           return s1.compareTo(s2);\n           return s1.length()&gt;s2.length()?1:-1;\n                 } \n           );\n     for(String str:list)\n    System.out.println(str);\n\n\n}\n</code></pre>\n"},{"tags":["java","iterator","doubly-linked-list"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1586586686,"post_id":61151842,"comment_id":108185149,"body_markdown":"In [How much research effort is expected of Stack Overflow users?](https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users) is written: _Asking a question on Stack Overflow should be the last step in your process for finding an answer_ I Googled the terms ___java linkedlist listiterator___ and found [Java LinkedList ListIterator behavior](https://stackoverflow.com/questions/40469352/java-linkedlist-listiterator-behavior/40469988) Does it not answer your question?","body":"In <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">How much research effort is expected of Stack Overflow users?</a> is written: <i>Asking a question on Stack Overflow should be the last step in your process for finding an answer</i> I Googled the terms <b><i>java linkedlist listiterator</i></b> and found <a href=\"https://stackoverflow.com/questions/40469352/java-linkedlist-listiterator-behavior/40469988\">Java LinkedList ListIterator behavior</a> Does it not answer your question?"},{"owner":{"account_id":12902555,"reputation":1,"user_id":9330874,"display_name":"Phucci"},"score":0,"creation_date":1586903432,"post_id":61151842,"comment_id":108299563,"body_markdown":"@Abra thank you for the reference. I did indeed googled the for more information on java linkedlist listiterator before I made the question but somehow were not able to find the link that you pointed out","body":"@Abra thank you for the reference. I did indeed googled the for more information on java linkedlist listiterator before I made the question but somehow were not able to find the link that you pointed out"}],"answers":[{"tags":[],"owner":{"account_id":14679743,"reputation":528,"user_id":10601657,"display_name":"Mihir Kekkar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586577513,"creation_date":1586577513,"answer_id":61151960,"question_id":61151842,"body_markdown":"The [documentation][1] for `ListIterator` explains this issue. Basically the &quot;current&quot; location isn&#39;t a single node, it&#39;s between two nodes. Specifically, it&#39;s between the nodes that would be returned if you called `prev()` or if you called `next()`. For example, after your first two calls to `next()` your iterator looks like this:\r\n\r\n`7 -&gt; 8 *-&gt;* 9 -&gt; 10` Current is between `8` and `9`.\r\n\r\nCalling `prev()` will return the previous node, which is `8`. Then, the iterator will look like this: \r\n\r\n`7 *-&gt;* 8 -&gt; 9 -&gt; 10` Current is between `7` and `8`.\r\n\r\nFollowing on, calling `next()` again will return `8`, and so on. This is by design and you&#39;d have to account for it while traversing with the `ListIterator`.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html","title":"Java listIterator() is giving me weird outputs with .next() and .prev()","body":"<p>The <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html\" rel=\"nofollow noreferrer\">documentation</a> for <code>ListIterator</code> explains this issue. Basically the \"current\" location isn't a single node, it's between two nodes. Specifically, it's between the nodes that would be returned if you called <code>prev()</code> or if you called <code>next()</code>. For example, after your first two calls to <code>next()</code> your iterator looks like this:</p>\n\n<p><code>7 -&gt; 8 *-&gt;* 9 -&gt; 10</code> Current is between <code>8</code> and <code>9</code>.</p>\n\n<p>Calling <code>prev()</code> will return the previous node, which is <code>8</code>. Then, the iterator will look like this: </p>\n\n<p><code>7 *-&gt;* 8 -&gt; 9 -&gt; 10</code> Current is between <code>7</code> and <code>8</code>.</p>\n\n<p>Following on, calling <code>next()</code> again will return <code>8</code>, and so on. This is by design and you'd have to account for it while traversing with the <code>ListIterator</code>.</p>\n"}],"owner":{"account_id":12902555,"reputation":1,"user_id":9330874,"display_name":"Phucci"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683777035,"creation_date":1586576471,"question_id":61151842,"body_markdown":"I&#39;ve been working on a project where I implemented a (Doubly Linked List) from scratch with a separate &quot;Node class&quot;. \r\n\r\nI have then gotten to the point where I need to sort my &quot;Linked List of Nodes&quot;. Since I implemented my Linked List from scratch, so in order to sort it, I have to implement a &quot;Merge Sort&quot; from scratch for my Linked List as well, which is a bit of time consuming to do. \r\n\r\nSo I thought about using &quot;Java Linked List&quot; from java.util with the listIterator() then use Collections.sort() to sort my LinkedList, but its next() and previous() are giving me some unexpected weird outputs vs when I was traversing my LinkedList of Nodes with direct access using (.next) &amp; (.prev). For example, let&#39;s say:\r\n \r\n\r\n    node1.time = 7;\r\n    node2.time = 8;\r\n    node3.time = 9;\r\n    node4.time = 10;\r\n    \r\n    LinkedList&lt;Node&gt; nodeList = new LinkedList&lt;Node&gt;():\r\n    nodeList.add(node1); nodeList.add(node2); nodeList.add(node3); nodeList.add(node4);\r\n\r\n    void testFunction() {\r\n      \r\n      ListIterator&lt;Node&gt; nodesIterator = nodeList.listIterator();\r\n\r\n      Node current;\r\n\r\n      for (int i = 0; i &lt; 2; i++) {\r\n        current = nodesIterator.next();\r\n        System.out.println(&quot;current = &quot; + current.time);\r\n      }\r\n      System.out.println(&quot;outside of loop:&quot;); \r\n    \r\n      System.out.println(&quot;move current backward:&quot;);\r\n      current = nodesIterator.previous();\r\n      System.out.println(&quot;current = &quot; + current.time);\r\n    \r\n      System.out.println(&quot;move current forward:&quot;);\r\n      current = nodesIterator.next();\r\n      System.out.println(&quot;current = &quot; + current.time);\r\n\r\n      System.out.println(&quot;Passing nodesIterator into testFunction2():&quot;);\r\n      testFunction2(nodesIterator);   \r\n    }\r\n \r\n    \r\n    void testFunction2(ListIterator&lt;Node&gt; nodesIterator) {\r\n      \r\n      System.out.println(&quot;inside testFunction2():&quot;);\r\n\r\n      Node current = nodesIterator.next();\r\n      System.out.println(&quot;current = &quot; + current.time);\r\n\r\n      System.out.println(&quot;move current backward:&quot;);\r\n      current = nodesIterator.previous();\r\n      System.out.println(&quot;current = &quot; + current.time);\r\n\r\n      System.out.println(&quot;move current backward again:&quot;);\r\n      current = nodesIterator.previous();\r\n      System.out.println(&quot;current = &quot; + current.time);\r\n    }\r\n\r\n\r\n \r\n\r\n\r\nOutputs:\r\n\r\n    current = 7\r\n    current = 8\r\n\r\n    outside of loop:\r\n    \r\n    move current backward:\r\n    current = 8\r\n     // -&gt; current is suppose to be 7 if previous current inside the loop was 8?\r\n\r\n    move current forward:\r\n    current = 8\r\n     // -&gt; current is suppose to be 9 if previous current = 8?\r\n\r\n    Passing nodesIterator into testFunction2():\r\n    \r\n    inside testFunction2():\r\n    current = 9\r\n     // -&gt; guess it&#39;s correct since previous current = 8?\r\n\r\n    move current backward:\r\n    current = 9\r\n     // -&gt; suppose to give me 8 since previous current = 9?\r\n\r\n    move current backward again:\r\n    current = 8\r\n     // -&gt; now it actually moved backward!\r\n\r\n\r\nWhat&#39;s going on with Java&#39;s next() &amp; prev()? My Linked List implemented from scratch would never give me these issues, plus passing nodes to other functions for traversal is way simpler with direct access to (.next) &amp; (.prev) since I can just pass in (node.next) or (node.prev) to other functions without having to pass in the listIterator() reference to link my list of nodes.\r\n\r\nShould I stick with my Linked List from scratch and just code out the &quot;Merge Sort&quot;","title":"Java listIterator() is giving me weird outputs with .next() and .prev()","body":"<p>I've been working on a project where I implemented a (Doubly Linked List) from scratch with a separate \"Node class\". </p>\n\n<p>I have then gotten to the point where I need to sort my \"Linked List of Nodes\". Since I implemented my Linked List from scratch, so in order to sort it, I have to implement a \"Merge Sort\" from scratch for my Linked List as well, which is a bit of time consuming to do. </p>\n\n<p>So I thought about using \"Java Linked List\" from java.util with the listIterator() then use Collections.sort() to sort my LinkedList, but its next() and previous() are giving me some unexpected weird outputs vs when I was traversing my LinkedList of Nodes with direct access using (.next) &amp; (.prev). For example, let's say:</p>\n\n<pre><code>node1.time = 7;\nnode2.time = 8;\nnode3.time = 9;\nnode4.time = 10;\n\nLinkedList&lt;Node&gt; nodeList = new LinkedList&lt;Node&gt;():\nnodeList.add(node1); nodeList.add(node2); nodeList.add(node3); nodeList.add(node4);\n\nvoid testFunction() {\n\n  ListIterator&lt;Node&gt; nodesIterator = nodeList.listIterator();\n\n  Node current;\n\n  for (int i = 0; i &lt; 2; i++) {\n    current = nodesIterator.next();\n    System.out.println(\"current = \" + current.time);\n  }\n  System.out.println(\"outside of loop:\"); \n\n  System.out.println(\"move current backward:\");\n  current = nodesIterator.previous();\n  System.out.println(\"current = \" + current.time);\n\n  System.out.println(\"move current forward:\");\n  current = nodesIterator.next();\n  System.out.println(\"current = \" + current.time);\n\n  System.out.println(\"Passing nodesIterator into testFunction2():\");\n  testFunction2(nodesIterator);   \n}\n\n\nvoid testFunction2(ListIterator&lt;Node&gt; nodesIterator) {\n\n  System.out.println(\"inside testFunction2():\");\n\n  Node current = nodesIterator.next();\n  System.out.println(\"current = \" + current.time);\n\n  System.out.println(\"move current backward:\");\n  current = nodesIterator.previous();\n  System.out.println(\"current = \" + current.time);\n\n  System.out.println(\"move current backward again:\");\n  current = nodesIterator.previous();\n  System.out.println(\"current = \" + current.time);\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>current = 7\ncurrent = 8\n\noutside of loop:\n\nmove current backward:\ncurrent = 8\n // -&gt; current is suppose to be 7 if previous current inside the loop was 8?\n\nmove current forward:\ncurrent = 8\n // -&gt; current is suppose to be 9 if previous current = 8?\n\nPassing nodesIterator into testFunction2():\n\ninside testFunction2():\ncurrent = 9\n // -&gt; guess it's correct since previous current = 8?\n\nmove current backward:\ncurrent = 9\n // -&gt; suppose to give me 8 since previous current = 9?\n\nmove current backward again:\ncurrent = 8\n // -&gt; now it actually moved backward!\n</code></pre>\n\n<p>What's going on with Java's next() &amp; prev()? My Linked List implemented from scratch would never give me these issues, plus passing nodes to other functions for traversal is way simpler with direct access to (.next) &amp; (.prev) since I can just pass in (node.next) or (node.prev) to other functions without having to pass in the listIterator() reference to link my list of nodes.</p>\n\n<p>Should I stick with my Linked List from scratch and just code out the \"Merge Sort\"</p>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":2,"creation_date":1601301489,"post_id":64103558,"comment_id":113356926,"body_markdown":"[ListIterator#previous() Javadoc](https://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html#previous()) states: &quot;(Note that alternating calls to next and previous will return the same element repeatedly.)&quot; This has to do with the fact on how the Iterator moves the current position when calling `next()` and `previous()`.","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html#previous()\" rel=\"nofollow noreferrer\">ListIterator#previous() Javadoc</a> states: &quot;(Note that alternating calls to next and previous will return the same element repeatedly.)&quot; This has to do with the fact on how the Iterator moves the current position when calling <code>next()</code> and <code>previous()</code>."},{"owner":{"account_id":19402702,"reputation":989,"user_id":14188899,"display_name":"Stefan"},"score":0,"creation_date":1601301743,"post_id":64103558,"comment_id":113357060,"body_markdown":"I see, but that doesn&#39;t make sense. Why would anyone want to make it confusing like that?","body":"I see, but that doesn&#39;t make sense. Why would anyone want to make it confusing like that?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1601301762,"post_id":64103558,"comment_id":113357081,"body_markdown":"The `next` implementation returns the current item, then advances. Meaning the pointer points to `song4` after the last call to `next`. `previous` advances first and then returns the value, meaning the pointer goes back to `song3`.","body":"The <code>next</code> implementation returns the current item, then advances. Meaning the pointer points to <code>song4</code> after the last call to <code>next</code>. <code>previous</code> advances first and then returns the value, meaning the pointer goes back to <code>song3</code>."}],"answers":[{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601301433,"creation_date":1601301433,"answer_id":64103666,"question_id":64103558,"body_markdown":"Because as the docs says `next()` gives you the current element AND moves the iterator to the next:\r\n\r\n&gt; Returns the next element in the list and advances the cursor position.\r\n\r\nThis when it prints `song3` the *cursor* is moved just after `song3`, then if you call `previous()` you will get the element just before the *cursor*, hence `song3` again.\r\n","title":"Why do I need to call previous() twice in ListIterator so I can go in &#39;reverse&#39; iteration?","body":"<p>Because as the docs says <code>next()</code> gives you the current element AND moves the iterator to the next:</p>\n<blockquote>\n<p>Returns the next element in the list and advances the cursor position.</p>\n</blockquote>\n<p>This when it prints <code>song3</code> the <em>cursor</em> is moved just after <code>song3</code>, then if you call <code>previous()</code> you will get the element just before the <em>cursor</em>, hence <code>song3</code> again.</p>\n"},{"tags":[],"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1601305277,"creation_date":1601302886,"answer_id":64104068,"question_id":64103558,"body_markdown":"Take a look at `ListIterator`&#39;s [javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ListIterator.html)...\r\n\r\n&gt;                          Element(0)   Element(1)   Element(2)   ... Element(n-1)\r\n&gt;     cursor positions:  ^            ^            ^            ^                  ^\r\n\r\nAt the beginning of an iteration, cursor points *before* the first element.\r\n\r\nA call to `next()` (1) retrieves the first element after the cursor position and (2) advances the cursor to point after the retrieved element.\r\n\r\nA call to `previous()` (1) retrieves the first element before the cursor position and (2) sets the cursor to point before the retrieved element.\r\n\r\n---\r\n\r\nLets examine what happens between your 3rd and 4th line of output that is problematic.\r\n\r\nState of your iterator after the second line of output:\r\n\r\n                        &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\r\n    cursor position:                      ^\r\n\r\nNow you call `next()` again and output `&quot;song3&quot;`. Your iterator state looks like this:\r\n\r\n                        &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\r\n    cursor position:                                ^\r\n\r\nAt this point you call `previous()` and `&quot;song3&quot;` gets printed again. The iterator state after the operation is as follows:\r\n\r\n                        &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\r\n    cursor position:                      ^","title":"Why do I need to call previous() twice in ListIterator so I can go in &#39;reverse&#39; iteration?","body":"<p>Take a look at <code>ListIterator</code>'s <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ListIterator.html\" rel=\"nofollow noreferrer\">javadoc</a>...</p>\n<blockquote>\n<pre><code>                     Element(0)   Element(1)   Element(2)   ... Element(n-1)\ncursor positions:  ^            ^            ^            ^                  ^\n</code></pre>\n</blockquote>\n<p>At the beginning of an iteration, cursor points <em>before</em> the first element.</p>\n<p>A call to <code>next()</code> (1) retrieves the first element after the cursor position and (2) advances the cursor to point after the retrieved element.</p>\n<p>A call to <code>previous()</code> (1) retrieves the first element before the cursor position and (2) sets the cursor to point before the retrieved element.</p>\n<hr />\n<p>Lets examine what happens between your 3rd and 4th line of output that is problematic.</p>\n<p>State of your iterator after the second line of output:</p>\n<pre><code>                    &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\ncursor position:                      ^\n</code></pre>\n<p>Now you call <code>next()</code> again and output <code>&quot;song3&quot;</code>. Your iterator state looks like this:</p>\n<pre><code>                    &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\ncursor position:                                ^\n</code></pre>\n<p>At this point you call <code>previous()</code> and <code>&quot;song3&quot;</code> gets printed again. The iterator state after the operation is as follows:</p>\n<pre><code>                    &quot;song1&quot;   &quot;song2&quot;   &quot;song3&quot;   &quot;song4&quot;\ncursor position:                      ^\n</code></pre>\n"}],"owner":{"account_id":19402702,"reputation":989,"user_id":14188899,"display_name":"Stefan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64104068,"answer_count":2,"score":2,"last_activity_date":1683776988,"creation_date":1601301065,"question_id":64103558,"body_markdown":"We know what `ListIterator` has method `next()` and `previous()` that allow us to **traverse** in both directions. So I made a little program to try it out.\r\n\r\n    List&lt;String&gt; songs = new ArrayList&lt;&gt;();\r\n       songs.add(&quot;song1&quot;);\r\n       songs.add(&quot;song2&quot;);\r\n       songs.add(&quot;song3&quot;);\r\n       songs.add(&quot;song4&quot;);\r\n    \r\n        ListIterator&lt;String&gt; iterator = songs.listIterator();\r\n    \r\n        System.out.println(iterator.next());\r\n        System.out.println(iterator.next());\r\n        System.out.println(iterator.next());\r\n    \r\n        System.out.println(iterator.previous());\r\n        System.out.println(iterator.previous());\r\n\r\nWhat I was expecting is to get:\r\n\r\n \r\n\r\n    song1\r\n    song2\r\n    song3\r\n    song2\r\n    song1\r\n\r\nBut I was **wrong**. Actual result it this:\r\n\r\n    song1\r\n    song2\r\n    song3\r\n    song3\r\n    song2\r\nCan someone tell me how does this happens? Isn&#39;t **cursor** when I am &#39;in&#39; `song3` literally there, so when I do `previous()` it gives me song **before** that one? How can I finally understand this concept the easy way?\r\n","title":"Why do I need to call previous() twice in ListIterator so I can go in &#39;reverse&#39; iteration?","body":"<p>We know what <code>ListIterator</code> has method <code>next()</code> and <code>previous()</code> that allow us to <strong>traverse</strong> in both directions. So I made a little program to try it out.</p>\n<pre><code>List&lt;String&gt; songs = new ArrayList&lt;&gt;();\n   songs.add(&quot;song1&quot;);\n   songs.add(&quot;song2&quot;);\n   songs.add(&quot;song3&quot;);\n   songs.add(&quot;song4&quot;);\n\n    ListIterator&lt;String&gt; iterator = songs.listIterator();\n\n    System.out.println(iterator.next());\n    System.out.println(iterator.next());\n    System.out.println(iterator.next());\n\n    System.out.println(iterator.previous());\n    System.out.println(iterator.previous());\n</code></pre>\n<p>What I was expecting is to get:</p>\n<pre><code>song1\nsong2\nsong3\nsong2\nsong1\n</code></pre>\n<p>But I was <strong>wrong</strong>. Actual result it this:</p>\n<pre><code>song1\nsong2\nsong3\nsong3\nsong2\n</code></pre>\n<p>Can someone tell me how does this happens? Isn't <strong>cursor</strong> when I am 'in' <code>song3</code> literally there, so when I do <code>previous()</code> it gives me song <strong>before</strong> that one? How can I finally understand this concept the easy way?</p>\n"},{"tags":["java","date","for-loop","iteration"],"comments":[{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":0,"creation_date":1608183953,"post_id":65335253,"comment_id":115506600,"body_markdown":"Why are you adding 1 day in a loop?","body":"Why are you adding 1 day in a loop?"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":6,"creation_date":1608184057,"post_id":65335253,"comment_id":115506632,"body_markdown":"You can&#39;t have the *next* date without constructing a new Date instance. So that has to be done. And speaking of `plusDays()`, why are you not using `java.time.LocalDate`?","body":"You can&#39;t have the <i>next</i> date without constructing a new Date instance. So that has to be done. And speaking of <code>plusDays()</code>, why are you not using <code>java.time.LocalDate</code>?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1608186577,"post_id":65335253,"comment_id":115507239,"body_markdown":"Why are you using `Date`? That class is poorly designed and long outdated and will not work for what you want. If you do need `Date` for some legacy API, you will need some conversion/s. IMHO the best you can do then is convert to and from `LocalDate` or `ZonedDateTime` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"Why are you using <code>Date</code>? That class is poorly designed and long outdated and will not work for what you want. If you do need <code>Date</code> for some legacy API, you will need some conversion/s. IMHO the best you can do then is convert to and from <code>LocalDate</code> or <code>ZonedDateTime</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":52488,"reputation":21899,"user_id":156869,"accept_rate":89,"display_name":"ariefbayu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608185853,"creation_date":1608185853,"answer_id":65335553,"question_id":65335253,"body_markdown":"You can use `plusDays()` by converting your [`Date`][1] into [`LocalDate`][2]:\r\n\r\n    import java.util.*;\r\n    import java.time.*;\r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            Date date = new Date();\r\n            LocalDate dateCopy =  date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\r\n            System.out.println(&quot;Date:  &quot; + dateCopy);\r\n            \r\n            for(int counter = 1; counter &lt;= 5; counter++){\r\n                dateCopy = dateCopy.plusDays(1);\r\n                System.out.println(&quot;Date:  &quot; + dateCopy);\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nNotice that I use the same `dateCopy` variable, since plusDays() return a copy of `LocalDate` and I don&#39;t want to create new variables.\r\n\r\nCodes above will produce the following console logs:\r\n\r\n    Date:  2020-12-17\r\n    Date:  2020-12-18\r\n    Date:  2020-12-19\r\n    Date:  2020-12-20\r\n    Date:  2020-12-21\r\n    Date:  2020-12-22\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html","title":"Iterate over dates in java","body":"<p>You can use <code>plusDays()</code> by converting your <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>Date</code></a> into <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>:</p>\n<pre><code>import java.util.*;\nimport java.time.*;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        Date date = new Date();\n        LocalDate dateCopy =  date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\n        System.out.println(&quot;Date:  &quot; + dateCopy);\n        \n        for(int counter = 1; counter &lt;= 5; counter++){\n            dateCopy = dateCopy.plusDays(1);\n            System.out.println(&quot;Date:  &quot; + dateCopy);\n\n        }\n    }\n}\n</code></pre>\n<p>Notice that I use the same <code>dateCopy</code> variable, since plusDays() return a copy of <code>LocalDate</code> and I don't want to create new variables.</p>\n<p>Codes above will produce the following console logs:</p>\n<pre><code>Date:  2020-12-17\nDate:  2020-12-18\nDate:  2020-12-19\nDate:  2020-12-20\nDate:  2020-12-21\nDate:  2020-12-22\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1608186664,"creation_date":1608186298,"answer_id":65335622,"question_id":65335253,"body_markdown":"# tl;dr\r\n\r\n```java\r\nLocalDate.now().plusDays( 1 )  // Get tomorrow&#39;s date.\r\n```\r\n\r\n# Avoid legacy date-time classes.\r\n\r\nNever use `java.util.Date`. \r\n\r\nThat terrible class was supplanted years ago by the modern *java.time* classes defined in JSR 310. Ditto for `Calendar`, `GregorianCalendar`, and `SimpleDateFormat`. \r\n\r\n# `LocalDate`\r\n\r\nFor a date-only value, without time-of-day and without time zone, use `LocalDate` class.\r\n\r\nCall `LocalDate.now` to get the current date. \r\n\r\nFor any particular moment, the date varies around the globe by time zone. So, specify the time zone by which you want to view the date. If omitted, you get the JVM‚Äôs current default time zone implicitly applied. \r\n\r\n```java\r\nLocalDate today = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) ) ;  // Capture the current date as seen in a particular time zone.\r\nfor ( int i = 0 ; i &lt; 7 ; i++ )\r\n{\r\n    LocalDate localDate = today.plusDays( i );\r\n    System.out.println( &quot;localDate = &quot; + localDate );\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nlocalDate = 2020-12-17\r\nlocalDate = 2020-12-18\r\nlocalDate = 2020-12-19\r\nlocalDate = 2020-12-20\r\nlocalDate = 2020-12-21\r\nlocalDate = 2020-12-22\r\nlocalDate = 2020-12-23\r\n```\r\n\r\nIf you are comfortable with Java streams, use `LocalDate::datesUntil`.\r\n\r\n```java\r\nLocalDate today = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) );  // Capture the current date as seen in a particular time zone.\r\ntoday.datesUntil( today.plusWeeks( 1 ) ).forEach( System.out :: println );\r\n```\r\n\r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n   - [**Java 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) brought some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n   - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n   - Later versions of Android (26+) bundle implementations of the *java.time* classes.\r\n   - For earlier Android (&lt;26), a process known as [*API desugaring*](https://developer.android.com/studio/write/java8-support#library-desugaring) brings a [subset of the *java.time*](https://developer.android.com/studio/write/java8-support-table) functionality not originally built into Android.\r\n     - If the desugaring does not offer what you need, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above) to Android. See [*How to use ThreeTenABP‚Ä¶*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n\r\n","title":"Iterate over dates in java","body":"<h1>tl;dr</h1>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate.now().plusDays( 1 )  // Get tomorrow's date.\n</code></pre>\n<h1>Avoid legacy date-time classes.</h1>\n<p>Never use <code>java.util.Date</code>.</p>\n<p>That terrible class was supplanted years ago by the modern <em>java.time</em> classes defined in JSR 310. Ditto for <code>Calendar</code>, <code>GregorianCalendar</code>, and <code>SimpleDateFormat</code>.</p>\n<h1><code>LocalDate</code></h1>\n<p>For a date-only value, without time-of-day and without time zone, use <code>LocalDate</code> class.</p>\n<p>Call <code>LocalDate.now</code> to get the current date.</p>\n<p>For any particular moment, the date varies around the globe by time zone. So, specify the time zone by which you want to view the date. If omitted, you get the JVM‚Äôs current default time zone implicitly applied.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate today = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) ) ;  // Capture the current date as seen in a particular time zone.\nfor ( int i = 0 ; i &lt; 7 ; i++ )\n{\n    LocalDate localDate = today.plusDays( i );\n    System.out.println( &quot;localDate = &quot; + localDate );\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>localDate = 2020-12-17\nlocalDate = 2020-12-18\nlocalDate = 2020-12-19\nlocalDate = 2020-12-20\nlocalDate = 2020-12-21\nlocalDate = 2020-12-22\nlocalDate = 2020-12-23\n</code></pre>\n<p>If you are comfortable with Java streams, use <code>LocalDate::datesUntil</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate today = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) );  // Capture the current date as seen in a particular time zone.\ntoday.datesUntil( today.plusWeeks( 1 ) ).forEach( System.out :: println );\n</code></pre>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"nofollow noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"nofollow noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"nofollow noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"nofollow noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java 9</strong></a> brought some minor features and fixes.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>Java SE 7</strong></a>\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a>\n<ul>\n<li>Later versions of Android (26+) bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), a process known as <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"nofollow noreferrer\"><em>API desugaring</em></a> brings a <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">subset of the <em>java.time</em></a> functionality not originally built into Android.\n<ul>\n<li>If the desugaring does not offer what you need, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above) to Android. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP‚Ä¶</em></a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608227406,"creation_date":1608227406,"answer_id":65345859,"question_id":65335253,"body_markdown":"As the others said, avoid using `java.util.Date` if there‚Äôs any way you can. Prefer the good answer by Basil Bourque.\r\n\r\nSometimes we need to interoperate with legacy code that uses the legacy date-time classes as `Date` and that we cannot afford to upgrade to java.time right away.\r\n\r\n - If you get a `Date` form a legacy API, use the answer by ariefbayu.\r\n - If the other way around for each date iterated you need an old-fashioned `Date` object for a legacy API, I will show you how.\r\n\r\n\t\tLocalDate startDateInclusive = LocalDate.of(2021, Month.MARCH, 12);\r\n\t\tLocalDate endDateExlusive = LocalDate.of(2021, Month.MARCH, 17);\r\n\t\t\r\n\t\tstartDateInclusive.datesUntil(endDateExlusive)\r\n\t\t\t\t.map(d -&gt; d.atStartOfDay(ZoneId.systemDefault()))\r\n\t\t\t\t.map(ZonedDateTime::toInstant)\r\n\t\t\t\t.map(Date::from)\r\n\t\t\t\t.forEach(System.out::println);\r\n\r\nI ran this snippet in `America/Cambridge_Bay` time zone and got this output:\r\n\r\n&gt;     Fri Mar 12 00:00:00 MST 2021\r\n&gt;     Sat Mar 13 00:00:00 MST 2021\r\n&gt;     Sun Mar 14 00:00:00 MST 2021\r\n&gt;     Mon Mar 15 00:00:00 MDT 2021\r\n&gt;     Tue Mar 16 00:00:00 MDT 2021\r\n\r\n`LocalDate.datesUnitil()` gives us a stream of `LocalDate`s. Through a series of `map` operations I convert each `LocalDate` to a `Date`, which I finally print. Instead of printing you will want to call one or more legacy methods, for example:\r\n\r\n\t\t\t\t.forEach(jud -&gt; {\r\n\t\t\t\t\tsomeLegayMethod(jud);\r\n\t\t\t\t\tsomeOtherLegacyMethod(jud, &quot;some other argument&quot;);\r\n\t\t\t\t});\r\n\r\nIn the output above you will notice that Java knows that summer time (DST) is introduced on March 14, so from March 15 the time zone abbreviation is `MDT` for Mountain Daylight Time rather than `MST` for Mountain Standard Time. There are really only 23 hours between those two `Date` objects when they both fall at 00:00.\r\n\r\n&gt; Used `date1 = new Date(date1.getTime() + (1000 * 60 * 60 * 24))` in\r\n&gt; for loop. But I don&#39;t think its a good idea to create objects by\r\n&gt; calling new each time in for loop.\r\n\r\nCreating a new object each time is no problem (except in very special situations). There are a couple of other reasons why your code is not good:\r\n\r\n - It‚Äôs a bad habit to do our own time math. We should rely on the library classes because\r\n\r\n    a. it gives code that is clearer to read\r\n\r\n    b. date and time math is most often more complicated than we think and therefore easy to get wrong; specifically we may miss a lot of corner cases, which often goes unnoticed in test.\r\n\r\n - Your code assumes that a day is always 24 hours. As I said above, this is not the case.\r\n\r\n## Link\r\n\r\n[Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n\r\n","title":"Iterate over dates in java","body":"<p>As the others said, avoid using <code>java.util.Date</code> if there‚Äôs any way you can. Prefer the good answer by Basil Bourque.</p>\n<p>Sometimes we need to interoperate with legacy code that uses the legacy date-time classes as <code>Date</code> and that we cannot afford to upgrade to java.time right away.</p>\n<ul>\n<li><p>If you get a <code>Date</code> form a legacy API, use the answer by ariefbayu.</p>\n</li>\n<li><p>If the other way around for each date iterated you need an old-fashioned <code>Date</code> object for a legacy API, I will show you how.</p>\n<pre><code> LocalDate startDateInclusive = LocalDate.of(2021, Month.MARCH, 12);\n LocalDate endDateExlusive = LocalDate.of(2021, Month.MARCH, 17);\n\n startDateInclusive.datesUntil(endDateExlusive)\n         .map(d -&gt; d.atStartOfDay(ZoneId.systemDefault()))\n         .map(ZonedDateTime::toInstant)\n         .map(Date::from)\n         .forEach(System.out::println);\n</code></pre>\n</li>\n</ul>\n<p>I ran this snippet in <code>America/Cambridge_Bay</code> time zone and got this output:</p>\n<blockquote>\n<pre><code>Fri Mar 12 00:00:00 MST 2021\nSat Mar 13 00:00:00 MST 2021\nSun Mar 14 00:00:00 MST 2021\nMon Mar 15 00:00:00 MDT 2021\nTue Mar 16 00:00:00 MDT 2021\n</code></pre>\n</blockquote>\n<p><code>LocalDate.datesUnitil()</code> gives us a stream of <code>LocalDate</code>s. Through a series of <code>map</code> operations I convert each <code>LocalDate</code> to a <code>Date</code>, which I finally print. Instead of printing you will want to call one or more legacy methods, for example:</p>\n<pre><code>            .forEach(jud -&gt; {\n                someLegayMethod(jud);\n                someOtherLegacyMethod(jud, &quot;some other argument&quot;);\n            });\n</code></pre>\n<p>In the output above you will notice that Java knows that summer time (DST) is introduced on March 14, so from March 15 the time zone abbreviation is <code>MDT</code> for Mountain Daylight Time rather than <code>MST</code> for Mountain Standard Time. There are really only 23 hours between those two <code>Date</code> objects when they both fall at 00:00.</p>\n<blockquote>\n<p>Used <code>date1 = new Date(date1.getTime() + (1000 * 60 * 60 * 24))</code> in\nfor loop. But I don't think its a good idea to create objects by\ncalling new each time in for loop.</p>\n</blockquote>\n<p>Creating a new object each time is no problem (except in very special situations). There are a couple of other reasons why your code is not good:</p>\n<ul>\n<li><p>It‚Äôs a bad habit to do our own time math. We should rely on the library classes because</p>\n<p>a. it gives code that is clearer to read</p>\n<p>b. date and time math is most often more complicated than we think and therefore easy to get wrong; specifically we may miss a lot of corner cases, which often goes unnoticed in test.</p>\n</li>\n<li><p>Your code assumes that a day is always 24 hours. As I said above, this is not the case.</p>\n</li>\n</ul>\n<h2>Link</h2>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608237129,"creation_date":1608233195,"answer_id":65347123,"question_id":65335253,"body_markdown":"All the existing answers are great. This answer provides some additional information which can also solve your problem or at least lead you in the right direction.\r\n\r\n## Using the modern API:\r\n\r\n    import java.time.LocalDate;\r\n    \r\n    class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocalDate startDate = LocalDate.of(2020, 12, 5);// 5th Dec 2020\r\n    \t\tLocalDate endDate = LocalDate.of(2020, 12, 15);// 15th Dec 2020\r\n    \t\tfor (LocalDate date = startDate; !date.isAfter(endDate); date = date.plusDays(1)) {\r\n    \t\t\tSystem.out.println(date);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    2020-12-05\r\n    2020-12-06\r\n    2020-12-07\r\n    2020-12-08\r\n    2020-12-09\r\n    2020-12-10\r\n\r\n**If you have dates as string objects:**\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    \r\n    class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;d/M/uuuu&quot;);\r\n    \t\tLocalDate startDate = LocalDate.parse(&quot;5/12/2020&quot;, dtf);// 5th Dec 2020\r\n    \t\tLocalDate endDate = LocalDate.parse(&quot;10/12/2020&quot;, dtf);// 10th Dec 2020\r\n    \t\tfor (LocalDate date = startDate; !date.isAfter(endDate); date = date.plusDays(1)) {\r\n    \t\t\tSystem.out.println(date);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    2020-12-05\r\n    2020-12-06\r\n    2020-12-07\r\n    2020-12-08\r\n    2020-12-09\r\n    2020-12-10\r\n\r\n## Using the legacy API:\r\n\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tCalendar calendar = Calendar.getInstance();\r\n    \t\tcalendar.set(2020, 11, 5);// 5th Dec 2020\r\n    \t\tDate startDate = calendar.getTime();\r\n    \r\n    \t\tcalendar.set(2020, 11, 10);// 10th Dec 2020\r\n    \t\tDate endDate = calendar.getTime();\r\n    \r\n    \t\tSimpleDateFormat sdfForOutput = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n    \t\tDate date = startDate;\r\n    \t\tfor (calendar.setTime(startDate); !date.after(endDate); calendar.add(Calendar.DAY_OF_YEAR,\r\n    \t\t\t\t1), date = calendar.getTime()) {\r\n    \t\t\tSystem.out.println(sdfForOutput.format(date));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    2020-12-05\r\n    2020-12-06\r\n    2020-12-07\r\n    2020-12-08\r\n    2020-12-09\r\n    2020-12-10\r\n\r\n**If you have dates as string objects:**\r\n\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    class Main {\r\n    \tpublic static void main(String[] args) throws ParseException {\r\n    \t\tSimpleDateFormat sdfForParsing = new SimpleDateFormat(&quot;d/M/yyyy&quot;);\r\n    \t\tDate startDate = sdfForParsing.parse(&quot;5/12/2020&quot;);// 5th Dec 2020\r\n    \t\tDate endDate = sdfForParsing.parse(&quot;10/12/2020&quot;);// 10th Dec 2020\r\n    \t\tCalendar calendar = Calendar.getInstance();\r\n    \r\n    \t\tSimpleDateFormat sdfForOutput = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n    \t\tDate date = startDate;\r\n    \t\tfor (calendar.setTime(startDate); !date.after(endDate); calendar.add(Calendar.DAY_OF_YEAR,\r\n    \t\t\t\t1), date = calendar.getTime()) {\r\n    \t\t\tSystem.out.println(sdfForOutput.format(date));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    2020-12-05\r\n    2020-12-06\r\n    2020-12-07\r\n    2020-12-08\r\n    2020-12-09\r\n    2020-12-10\r\n\r\nNote that the date-time API of `java.util` and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html). Learn more about the modern date-time API at **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n**Note:** For any reason, if you have to stick to Java 6 or Java 7, you can use [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) which backports most of the *java.time* functionality to Java 6 &amp; 7.\r\n\r\nIf you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table) and [How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n","title":"Iterate over dates in java","body":"<p>All the existing answers are great. This answer provides some additional information which can also solve your problem or at least lead you in the right direction.</p>\n<h2>Using the modern API:</h2>\n<pre><code>import java.time.LocalDate;\n\nclass Main {\n    public static void main(String[] args) {\n        LocalDate startDate = LocalDate.of(2020, 12, 5);// 5th Dec 2020\n        LocalDate endDate = LocalDate.of(2020, 12, 15);// 15th Dec 2020\n        for (LocalDate date = startDate; !date.isAfter(endDate); date = date.plusDays(1)) {\n            System.out.println(date);\n        }\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2020-12-05\n2020-12-06\n2020-12-07\n2020-12-08\n2020-12-09\n2020-12-10\n</code></pre>\n<p><strong>If you have dates as string objects:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\nclass Main {\n    public static void main(String[] args) {\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;d/M/uuuu&quot;);\n        LocalDate startDate = LocalDate.parse(&quot;5/12/2020&quot;, dtf);// 5th Dec 2020\n        LocalDate endDate = LocalDate.parse(&quot;10/12/2020&quot;, dtf);// 10th Dec 2020\n        for (LocalDate date = startDate; !date.isAfter(endDate); date = date.plusDays(1)) {\n            System.out.println(date);\n        }\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2020-12-05\n2020-12-06\n2020-12-07\n2020-12-08\n2020-12-09\n2020-12-10\n</code></pre>\n<h2>Using the legacy API:</h2>\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\nclass Main {\n    public static void main(String[] args) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(2020, 11, 5);// 5th Dec 2020\n        Date startDate = calendar.getTime();\n\n        calendar.set(2020, 11, 10);// 10th Dec 2020\n        Date endDate = calendar.getTime();\n\n        SimpleDateFormat sdfForOutput = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n        Date date = startDate;\n        for (calendar.setTime(startDate); !date.after(endDate); calendar.add(Calendar.DAY_OF_YEAR,\n                1), date = calendar.getTime()) {\n            System.out.println(sdfForOutput.format(date));\n        }\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2020-12-05\n2020-12-06\n2020-12-07\n2020-12-08\n2020-12-09\n2020-12-10\n</code></pre>\n<p><strong>If you have dates as string objects:</strong></p>\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\nclass Main {\n    public static void main(String[] args) throws ParseException {\n        SimpleDateFormat sdfForParsing = new SimpleDateFormat(&quot;d/M/yyyy&quot;);\n        Date startDate = sdfForParsing.parse(&quot;5/12/2020&quot;);// 5th Dec 2020\n        Date endDate = sdfForParsing.parse(&quot;10/12/2020&quot;);// 10th Dec 2020\n        Calendar calendar = Calendar.getInstance();\n\n        SimpleDateFormat sdfForOutput = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n        Date date = startDate;\n        for (calendar.setTime(startDate); !date.after(endDate); calendar.add(Calendar.DAY_OF_YEAR,\n                1), date = calendar.getTime()) {\n            System.out.println(sdfForOutput.format(date));\n        }\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2020-12-05\n2020-12-06\n2020-12-07\n2020-12-08\n2020-12-09\n2020-12-10\n</code></pre>\n<p>Note that the date-time API of <code>java.util</code> and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">modern date-time API</a>. Learn more about the modern date-time API at <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<p><strong>Note:</strong> For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7.</p>\n<p>If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.</p>\n"}],"owner":{"account_id":19246297,"reputation":43,"user_id":14065277,"display_name":"Deepa Das"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1968,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1683776973,"creation_date":1608183585,"question_id":65335253,"body_markdown":"I need to iterate through a range of dates. Not sure on how to take next day in for loop.\r\nI am using `java.util.Date`. So `plusDays(1)` cannot be used in the for loop for taking next date.\r\n\r\nUsed `date1 = new Date(date1.getTime() + (1000 * 60 * 60 * 24))` in for loop. But I don&#39;t think its a good idea to create objects by calling new each time in for loop.\r\n\r\nPlease suggest a better way for taking next day in for loop.\r\n\r\n","title":"Iterate over dates in java","body":"<p>I need to iterate through a range of dates. Not sure on how to take next day in for loop.\nI am using <code>java.util.Date</code>. So <code>plusDays(1)</code> cannot be used in the for loop for taking next date.</p>\n<p>Used <code>date1 = new Date(date1.getTime() + (1000 * 60 * 60 * 24))</code> in for loop. But I don't think its a good idea to create objects by calling new each time in for loop.</p>\n<p>Please suggest a better way for taking next day in for loop.</p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1683774160,"post_id":76223860,"comment_id":134419073,"body_markdown":"The problem is that `Math.abs(n)` doesn&#39;t always return a non-negative number. Try stepping through your code in a debugger or adding some `println` statements to see what the values of your variables are at each step. https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#abs(int)","body":"The problem is that <code>Math.abs(n)</code> doesn&#39;t always return a non-negative number. Try stepping through your code in a debugger or adding some <code>println</code> statements to see what the values of your variables are at each step. <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#abs(int)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/20/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683774647,"creation_date":1683774647,"answer_id":76223903,"question_id":76223860,"body_markdown":"The magnitude of the smallest negative `int` value is larger than the magnitude of the largest positive `int` value. Thus `Math.abs` cannot return the correct value for `Integer.MIN_VALUE`. \r\n\r\nTo solve this problem, you can cast the exponent to `long` before using binary exponentiation.\r\n\r\n```java\r\npublic double myPow(double x, int n) {\r\n\tif (n == 0)\r\n\t\treturn 1;\r\n\tif (n &lt; 0) return 1 / getDFS(x, Math.abs((long) n));\r\n\treturn getDFS(x, n);\r\n}\r\nprivate double getDFS(double x, long n) {\r\n    // ...\r\n    if (n / 2 &gt;= 1) { \r\n        long newN = n / 2;\r\n        saveData = getDFS(x,newN);\r\n    }\r\n    // ...\r\n}\r\n```","title":"Math Power(x,n) does not work -2147483648 for in java?","body":"<p>The magnitude of the smallest negative <code>int</code> value is larger than the magnitude of the largest positive <code>int</code> value. Thus <code>Math.abs</code> cannot return the correct value for <code>Integer.MIN_VALUE</code>.</p>\n<p>To solve this problem, you can cast the exponent to <code>long</code> before using binary exponentiation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public double myPow(double x, int n) {\n    if (n == 0)\n        return 1;\n    if (n &lt; 0) return 1 / getDFS(x, Math.abs((long) n));\n    return getDFS(x, n);\n}\nprivate double getDFS(double x, long n) {\n    // ...\n    if (n / 2 &gt;= 1) { \n        long newN = n / 2;\n        saveData = getDFS(x,newN);\n    }\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683774942,"accepted_answer_id":76223903,"answer_count":1,"score":0,"last_activity_date":1683774647,"creation_date":1683773897,"question_id":76223860,"body_markdown":"I am doing a leetcode problem. \r\nhttps://leetcode.com/problems/powx-n/\r\n\r\n&gt; Implement pow(x, n), which calculates x raised to the power n (i.e.,\r\n&gt; x^n).\r\n\r\nI have no idea why last test case is failing, x^-2147483648 returns 1 instead of 0.\r\n\r\n 1. Why should this even return 0 in first place? \r\n 2. Also, Math.abs(n) in debugger still returns a negative -2147483648.\r\n\r\n\r\n--\r\n\r\n**Code:**\r\n\r\n    class Solution {\r\n        public double myPow(double x, int n) {\r\n            if (n == 0)\r\n                return 1;\r\n            if (n &lt; 0) {\r\n                return 1 / getDFS(x, Math.abs(n));\r\n            }\r\n            return getDFS(x, n);\r\n        }\r\n    \r\n        private double getDFS(double x, int n) {\r\n            if (n == 1) {\r\n                return x;\r\n            }\r\n            double saveData = 1;\r\n            if (n / 2 &gt;= 1) {\r\n                int newN = n / 2;\r\n                saveData = getDFS(x,newN);\r\n            } \r\n            if (n % 2 == 1) {\r\n                return saveData * saveData * x;\r\n            }\r\n            return saveData * saveData;\r\n        }\r\n    }\r\n\r\n**Results:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1x9zk.png","title":"Math Power(x,n) does not work -2147483648 for in java?","body":"<p>I am doing a leetcode problem.\n<a href=\"https://leetcode.com/problems/powx-n/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/powx-n/</a></p>\n<blockquote>\n<p>Implement pow(x, n), which calculates x raised to the power n (i.e.,\nx^n).</p>\n</blockquote>\n<p>I have no idea why last test case is failing, x^-2147483648 returns 1 instead of 0.</p>\n<ol>\n<li>Why should this even return 0 in first place?</li>\n<li>Also, Math.abs(n) in debugger still returns a negative -2147483648.</li>\n</ol>\n<p>--</p>\n<p><strong>Code:</strong></p>\n<pre><code>class Solution {\n    public double myPow(double x, int n) {\n        if (n == 0)\n            return 1;\n        if (n &lt; 0) {\n            return 1 / getDFS(x, Math.abs(n));\n        }\n        return getDFS(x, n);\n    }\n\n    private double getDFS(double x, int n) {\n        if (n == 1) {\n            return x;\n        }\n        double saveData = 1;\n        if (n / 2 &gt;= 1) {\n            int newN = n / 2;\n            saveData = getDFS(x,newN);\n        } \n        if (n % 2 == 1) {\n            return saveData * saveData * x;\n        }\n        return saveData * saveData;\n    }\n}\n</code></pre>\n<p><strong>Results:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/1x9zk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1x9zk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","java.util.scanner","scite"],"answers":[{"tags":[],"owner":{"account_id":996105,"reputation":182284,"user_id":1011995,"display_name":"Daniel Fischer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1321728562,"creation_date":1321728562,"answer_id":8196382,"question_id":8196114,"body_markdown":"Buffering. At the command prompt, and apparently in NetBeans, the stdin stream is line-buffered, so your app doesn&#39;t know you&#39;ve typed anything before you&#39;ve entered a newline (or the buffer is full). Scite apparently doesn&#39;t line-buffer the input stream but flushes it either after each character or at each space.","title":"Java: Scanner&#39;s next() acts differently in Scite and command prompt","body":"<p>Buffering. At the command prompt, and apparently in NetBeans, the stdin stream is line-buffered, so your app doesn't know you've typed anything before you've entered a newline (or the buffer is full). Scite apparently doesn't line-buffer the input stream but flushes it either after each character or at each space.</p>\n"}],"owner":{"account_id":1051775,"reputation":8676,"user_id":1055527,"accept_rate":100,"display_name":"ABVincita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":680,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8196382,"answer_count":1,"score":1,"last_activity_date":1683773721,"creation_date":1321726129,"question_id":8196114,"body_markdown":"I&#39;m trying out a very simple Java program that uses Scanner and its method next(), and somehow I encounter a weird situation. Here is the code: \r\n\r\n    import java.util.Scanner;\r\n    public class Test\r\n    {\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n\t    \tScanner scan = new Scanner(System.in);\r\n\t    \tString input = &quot;&quot;;\r\n\t\t\r\n\t    \tSystem.out.println(&quot;Enter a sentence here: &quot;);\r\n\t\t\r\n\t    \twhile(!input.endsWith(&quot;.&quot;))\r\n\t    \t{\r\n\t    \t\tinput = scan.next();\r\n\t    \t\tSystem.out.println(&quot;Echo: &quot; + input);\r\n\t    \t}\r\n    \t}\r\n    }\r\n\r\nIf I run it in Scite, everytime I type a space after a word, the line &quot;Echo: &quot; + the inputted word will be printed right after the the space. \r\n\r\nSuppose I type the input in keyboard like this: \r\n\r\n    apple orange mango.\r\n\r\nIn scite it will look like this:\r\n\r\n    Enter a sentence here:\r\n    apple Echo: apple\r\n    orange Echo: orange\r\n    mango. Echo: mango.\r\n    \r\nBut if I run it in command prompt and type the same input, it will look like this :\r\n\r\n    Enter a sentence here: \r\n    apple orange mango.\r\n    Echo: apple\r\n    Echo: orange\r\n    Echo: mango.\r\n\r\nNote: when running in command prompt, I must hit enter after I type &quot;apple orange mango.&quot; or it will not print the &quot;Echo&quot; sentences. Also tried the code in NetBeans and it gave the same results as the command prompt one.\r\n\r\nWhy does the program act differently?\r\n","title":"Java: Scanner&#39;s next() acts differently in Scite and command prompt","body":"<p>I'm trying out a very simple Java program that uses Scanner and its method next(), and somehow I encounter a weird situation. Here is the code: </p>\n\n<pre><code>import java.util.Scanner;\npublic class Test\n{\n    public static void main(String[] args)\n    {\n        Scanner scan = new Scanner(System.in);\n        String input = \"\";\n\n        System.out.println(\"Enter a sentence here: \");\n\n        while(!input.endsWith(\".\"))\n        {\n            input = scan.next();\n            System.out.println(\"Echo: \" + input);\n        }\n    }\n}\n</code></pre>\n\n<p>If I run it in Scite, everytime I type a space after a word, the line \"Echo: \" + the inputted word will be printed right after the the space. </p>\n\n<p>Suppose I type the input in keyboard like this: </p>\n\n<pre><code>apple orange mango.\n</code></pre>\n\n<p>In scite it will look like this:</p>\n\n<pre><code>Enter a sentence here:\napple Echo: apple\norange Echo: orange\nmango. Echo: mango.\n</code></pre>\n\n<p>But if I run it in command prompt and type the same input, it will look like this :</p>\n\n<pre><code>Enter a sentence here: \napple orange mango.\nEcho: apple\nEcho: orange\nEcho: mango.\n</code></pre>\n\n<p>Note: when running in command prompt, I must hit enter after I type \"apple orange mango.\" or it will not print the \"Echo\" sentences. Also tried the code in NetBeans and it gave the same results as the command prompt one.</p>\n\n<p>Why does the program act differently?</p>\n"},{"tags":["java","java.util.scanner"],"answers":[{"tags":[],"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1567004993,"creation_date":1567004993,"answer_id":57695439,"question_id":57695235,"body_markdown":"You need to add a call to `scan.nextLine()` after you call `scan.nextInt();` and not use the value from it:\r\n\r\n    int b=scan.nextInt();\r\n    scan.nextLine(); //Add this line\r\n\r\nThis is because `nextInt()` does not consume the line terminator that is used in `nextLine()` to determine the end of the line and the extra call to `nextLine()` will consume it for you correctly.  \r\n\r\nBasically before you were giving it the value `2` for example, the `nextInt()` will take the `2`, then `nextLine()` will take everything after the `2` on THAT line, which would be nothing.\r\n\r\nThis will always need to be done if you are mixing the use of `next` or `nextInt` with `nextLine`.","title":"How to fix my problem with &#39;nextLine()&#39; in my input?","body":"<p>You need to add a call to <code>scan.nextLine()</code> after you call <code>scan.nextInt();</code> and not use the value from it:</p>\n\n<pre><code>int b=scan.nextInt();\nscan.nextLine(); //Add this line\n</code></pre>\n\n<p>This is because <code>nextInt()</code> does not consume the line terminator that is used in <code>nextLine()</code> to determine the end of the line and the extra call to <code>nextLine()</code> will consume it for you correctly.  </p>\n\n<p>Basically before you were giving it the value <code>2</code> for example, the <code>nextInt()</code> will take the <code>2</code>, then <code>nextLine()</code> will take everything after the <code>2</code> on THAT line, which would be nothing.</p>\n\n<p>This will always need to be done if you are mixing the use of <code>next</code> or <code>nextInt</code> with <code>nextLine</code>.</p>\n"}],"owner":{"account_id":16535396,"reputation":15,"user_id":11947571,"display_name":"arxxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1683817364,"accepted_answer_id":57695439,"answer_count":1,"score":1,"last_activity_date":1683773702,"creation_date":1567004284,"question_id":57695235,"body_markdown":"I can understand why `nextLine()` doesnt work.\r\n\r\nIf I change `nextLine()` with `next()` my input doest take all the phrase \r\n\r\n\r\n     case 7:\r\n            System.out.println(&quot;Press 1 to post on your wall \\nPress 2 to post on a friend&#39;s wall&quot;);\r\n            int b=scan.nextInt();\r\n            if(b==1){\r\n                System.out.println(&quot;What do you want to post?&quot;);\r\n                String pm=scan.nextLine();\r\n                \r\n                Message ms= new Message(loginUser.getUsername(),loginUser.getUsername() +&quot; :&quot;+ pm.toString());\r\n                message.add(ms);\r\n            }\r\n            if(b==2){\r\n                System.out.println(&quot;Whose wall do you want to post? (Write his/her username)&quot;);\r\n                String ph=scan.next();\r\n            \r\n                for(int n = 0;  n&lt; users.size(); n++)\r\n                {\r\n                    if(!loginUser.getUsername().equals(ph) \r\n                            &amp;&amp; users.get(n).getUsername().equals(ph)){\r\n                        System.out.println(&quot;What do you want to post?&quot;);\r\n                        String postIt=scan.nextLine();\r\n                        Message me= new Message( ph,ph +&quot; : &quot;+loginUser.getUsername() +&quot; : &quot; + postIt.toString() );\r\n                        message.add(me);\r\n                    }\r\n                }\r\n            } \r\n            luna=false;\r\n            break;","title":"How to fix my problem with &#39;nextLine()&#39; in my input?","body":"<p>I can understand why <code>nextLine()</code> doesnt work.</p>\n\n<p>If I change <code>nextLine()</code> with <code>next()</code> my input doest take all the phrase </p>\n\n<pre><code> case 7:\n        System.out.println(\"Press 1 to post on your wall \\nPress 2 to post on a friend's wall\");\n        int b=scan.nextInt();\n        if(b==1){\n            System.out.println(\"What do you want to post?\");\n            String pm=scan.nextLine();\n\n            Message ms= new Message(loginUser.getUsername(),loginUser.getUsername() +\" :\"+ pm.toString());\n            message.add(ms);\n        }\n        if(b==2){\n            System.out.println(\"Whose wall do you want to post? (Write his/her username)\");\n            String ph=scan.next();\n\n            for(int n = 0;  n&lt; users.size(); n++)\n            {\n                if(!loginUser.getUsername().equals(ph) \n                        &amp;&amp; users.get(n).getUsername().equals(ph)){\n                    System.out.println(\"What do you want to post?\");\n                    String postIt=scan.nextLine();\n                    Message me= new Message( ph,ph +\" : \"+loginUser.getUsername() +\" : \" + postIt.toString() );\n                    message.add(me);\n                }\n            }\n        } \n        luna=false;\n        break;\n</code></pre>\n"},{"tags":["java","file","java.util.scanner"],"comments":[{"owner":{"account_id":316740,"reputation":488,"user_id":633062,"accept_rate":50,"display_name":"Jeremiah Adams"},"score":0,"creation_date":1606152567,"post_id":64973250,"comment_id":114868987,"body_markdown":"What is the question?","body":"What is the question?"},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1606152676,"post_id":64973250,"comment_id":114869053,"body_markdown":"How can I separate the items received from the scanner so that they can be counted in the totals inside the if statements?","body":"How can I separate the items received from the scanner so that they can be counted in the totals inside the if statements?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1606154673,"post_id":64973250,"comment_id":114869929,"body_markdown":"Use the isBlank method of String to check for a blank line.","body":"Use the isBlank method of String to check for a blank line."}],"answers":[{"tags":[],"owner":{"account_id":19871842,"reputation":93,"user_id":14557790,"display_name":"Laith.jas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606154772,"creation_date":1606154772,"answer_id":64973852,"question_id":64973250,"body_markdown":"I don&#39;t know if this answers your question, but as I understand u want to separate each line in the text file. If this is the case you can write a switch statement that has two cases, A and B. And u want a loop to go over each character in a line: \r\n\r\n    for(int i = 0; i&lt;2; i++){\r\n       switch(token.charAt(i)){\r\n           case &#39;G&#39;:\r\n               &lt;Some variable&gt;\r\n               break;\r\n           case &#39;B&#39;:\r\n               &lt;Some variable&gt;\r\n               break;\r\n        }\r\n    }\r\nP.S: I&#39;m not an expert, I&#39;m just a student.\r\n","title":"How to separate items from a file in java","body":"<p>I don't know if this answers your question, but as I understand u want to separate each line in the text file. If this is the case you can write a switch statement that has two cases, A and B. And u want a loop to go over each character in a line:</p>\n<pre><code>for(int i = 0; i&lt;2; i++){\n   switch(token.charAt(i)){\n       case 'G':\n           &lt;Some variable&gt;\n           break;\n       case 'B':\n           &lt;Some variable&gt;\n           break;\n    }\n}\n</code></pre>\n<p>P.S: I'm not an expert, I'm just a student.</p>\n"}],"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683773675,"creation_date":1606152361,"question_id":64973250,"body_markdown":"Good afternoon, I am currently trying to read the contents of a file and add them to their respective variables based on how many times they occur. The program is designed to calculate the probability of a boy or girl in a 2 offspring family. BB means 2 boys, GG means 2 girls, and GB or BG is boy and girl. The file`s information is as follows : \r\n\r\n    BB\r\n\r\n    GB\r\n\r\n    GB\r\n\r\n    BG\r\n\r\n    GG\r\n\r\n    GB\r\n\r\n    GB\r\n\r\n    GB\r\n\r\n    GB\r\n\r\n    GG\r\n\r\nHere is what I have coded:\r\n```\r\nimport java.util.Scanner;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\npublic class Family\r\n{\r\n   public static void main (String args[]) throws IOException {\r\n    //variables defined\r\n    int numGB = 0;\r\n    int numBG = 0;\r\n    int numGG = 0;\r\n    int numBB = 0;\r\n    int totalNum = 0;\r\n    double probBG;\r\n    double probGG;\r\n    double probBB;\r\n    String token =&quot;&quot;;\r\n    int spaceDeleter = 0;\r\n    int token2Sub = 0;\r\n    \r\n    File fileName = new File (&quot;test1.txt&quot;); \r\n    \r\n    Scanner in = new Scanner(fileName); //scans file\r\n    \r\n    System.out.println(&quot;Composition statistics for families with two children&quot;);\r\n    while(in.hasNextLine())\r\n    {\r\n        token = in.next( ); //recives token from scanner\r\n        if(token.equals(&quot;GB&quot;))\r\n        {\r\n        numGB = numGB + 1;\r\n        }\r\n        else if(token.equals(&quot;BG&quot;))\r\n        {\r\n        numBG = numBG + 1;\r\n        }\r\n        else if(token.equals(&quot;GG&quot;))\r\n        {\r\n        numGG = numGG + 1;\r\n        }\r\n        else if(token.equals(&quot;BB&quot;))\r\n        {\r\n        numBB = numBB + 1;\r\n        }\r\n        else if(token.equals(&quot;&quot;))\r\n        {\r\n        spaceDeleter =+ 1; //tried to delete space to no avial\r\n        }\r\n        else \r\n        {\r\n        System.out.println(&quot;Data reading error&quot;);\r\n        }\r\n    }\r\n    in.close(); //closes file\r\n    \r\n    totalNum = numBB + numGG + numBG + numGB; // calculates total num of tokens\r\n    probBG = (numBG + numGB) / totalNum; //Probability of boy and girl\r\n    probBB = numBB / totalNum; // Probability of Boy\r\n    probGG = numGG / totalNum; //Probability of girl\r\n    \r\n    System.out.println(&quot;Total number of families: &quot; + totalNum); //print results to user\r\n    System.out.println(&quot;&quot;);\r\n    System.out.println(&quot;Number of families with&quot;);\r\n    System.out.println(&quot;\\t 2 boys: &quot; + numBB + &quot; represents &quot; + probBB + &quot;%&quot;);\r\n    System.out.println(&quot;\\t 2 girls: &quot; + numGG + &quot; represents &quot; + probGG + &quot;%&quot;);\r\n    System.out.println(&quot;\\t 1 boy and 1 girl: &quot; + (numBG + numGB) + &quot; represents &quot; + probBG + &quot;%&quot;);\r\n}\r\n}\r\n\r\n```\r\n","title":"How to separate items from a file in java","body":"<p>Good afternoon, I am currently trying to read the contents of a file and add them to their respective variables based on how many times they occur. The program is designed to calculate the probability of a boy or girl in a 2 offspring family. BB means 2 boys, GG means 2 girls, and GB or BG is boy and girl. The file`s information is as follows :</p>\n<pre><code>BB\n\nGB\n\nGB\n\nBG\n\nGG\n\nGB\n\nGB\n\nGB\n\nGB\n\nGG\n</code></pre>\n<p>Here is what I have coded:</p>\n<pre><code>import java.util.Scanner;\nimport java.io.File;\nimport java.io.IOException;\npublic class Family\n{\n   public static void main (String args[]) throws IOException {\n    //variables defined\n    int numGB = 0;\n    int numBG = 0;\n    int numGG = 0;\n    int numBB = 0;\n    int totalNum = 0;\n    double probBG;\n    double probGG;\n    double probBB;\n    String token =&quot;&quot;;\n    int spaceDeleter = 0;\n    int token2Sub = 0;\n    \n    File fileName = new File (&quot;test1.txt&quot;); \n    \n    Scanner in = new Scanner(fileName); //scans file\n    \n    System.out.println(&quot;Composition statistics for families with two children&quot;);\n    while(in.hasNextLine())\n    {\n        token = in.next( ); //recives token from scanner\n        if(token.equals(&quot;GB&quot;))\n        {\n        numGB = numGB + 1;\n        }\n        else if(token.equals(&quot;BG&quot;))\n        {\n        numBG = numBG + 1;\n        }\n        else if(token.equals(&quot;GG&quot;))\n        {\n        numGG = numGG + 1;\n        }\n        else if(token.equals(&quot;BB&quot;))\n        {\n        numBB = numBB + 1;\n        }\n        else if(token.equals(&quot;&quot;))\n        {\n        spaceDeleter =+ 1; //tried to delete space to no avial\n        }\n        else \n        {\n        System.out.println(&quot;Data reading error&quot;);\n        }\n    }\n    in.close(); //closes file\n    \n    totalNum = numBB + numGG + numBG + numGB; // calculates total num of tokens\n    probBG = (numBG + numGB) / totalNum; //Probability of boy and girl\n    probBB = numBB / totalNum; // Probability of Boy\n    probGG = numGG / totalNum; //Probability of girl\n    \n    System.out.println(&quot;Total number of families: &quot; + totalNum); //print results to user\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;Number of families with&quot;);\n    System.out.println(&quot;\\t 2 boys: &quot; + numBB + &quot; represents &quot; + probBB + &quot;%&quot;);\n    System.out.println(&quot;\\t 2 girls: &quot; + numGG + &quot; represents &quot; + probGG + &quot;%&quot;);\n    System.out.println(&quot;\\t 1 boy and 1 girl: &quot; + (numBG + numGB) + &quot; represents &quot; + probBG + &quot;%&quot;);\n}\n}\n\n</code></pre>\n"},{"tags":["java","list","iterator"],"comments":[{"owner":{"account_id":1008660,"reputation":13673,"user_id":1021725,"accept_rate":75,"display_name":"David Brossard"},"score":3,"creation_date":1616826067,"post_id":66828558,"comment_id":118130097,"body_markdown":"To start with you&#39;re calling next() twice","body":"To start with you&#39;re calling next() twice"}],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1616826613,"creation_date":1616826613,"answer_id":66828616,"question_id":66828558,"body_markdown":"Where is itrPlaylist is defined? Somethng like\r\n\r\n    itrPlaylist = list.iterator();\r\n\r\nAbove assignment should have happened after all the inserts have been done to the list. Looks like you have created one instance variable for itrPlaylist. And I think you might be doing \r\n\r\n    list.add(value); \r\n\r\nafter itrPlaylist has been initialized.\r\n\r\nIn that case, code will throw the above mentioned exception. This happens when some other code outside of iterator modifies the list when iterator is already initialized.","title":"Concurrent Exception on Iterator.next() in Java","body":"<p>Where is itrPlaylist is defined? Somethng like</p>\n<pre><code>itrPlaylist = list.iterator();\n</code></pre>\n<p>Above assignment should have happened after all the inserts have been done to the list. Looks like you have created one instance variable for itrPlaylist. And I think you might be doing</p>\n<pre><code>list.add(value); \n</code></pre>\n<p>after itrPlaylist has been initialized.</p>\n<p>In that case, code will throw the above mentioned exception. This happens when some other code outside of iterator modifies the list when iterator is already initialized.</p>\n"}],"owner":{"account_id":11057261,"reputation":3,"user_id":8183734,"display_name":"ashray mp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1616831197,"accepted_answer_id":66828616,"answer_count":1,"score":-1,"last_activity_date":1683773655,"creation_date":1616825922,"question_id":66828558,"body_markdown":"This is a code snippet to move to next element in the linked list. On debugging,  itrPlaylist.next() is triggering a ConcurrentModificationException. I read that the list should not be modified while I am iterating. So, in this case, where did I go wrong? How can it be resolved? \r\n\r\nThanks in Advance.\r\n\r\n\tpublic boolean nexxt() {\r\n\t\tif(this.itrPlaylist.hasNext())\r\n\t\t{\r\n\t\t\tif(!bForward)\r\n\t\t\t{\r\n\t\t\t\tbForward = true;\r\n\t\t\t\titrPlaylist.next();\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Now playing : &quot; + itrPlaylist.next());\r\n\t\t\treturn true;\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Reached end of &quot; + this.getPlaylistName() + &quot; playlist !&quot;);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n","title":"Concurrent Exception on Iterator.next() in Java","body":"<p>This is a code snippet to move to next element in the linked list. On debugging,  itrPlaylist.next() is triggering a ConcurrentModificationException. I read that the list should not be modified while I am iterating. So, in this case, where did I go wrong? How can it be resolved?</p>\n<p>Thanks in Advance.</p>\n<pre><code>public boolean nexxt() {\n    if(this.itrPlaylist.hasNext())\n    {\n        if(!bForward)\n        {\n            bForward = true;\n            itrPlaylist.next();\n        }\n        System.out.println(&quot;Now playing : &quot; + itrPlaylist.next());\n        return true;    \n    }\n    else\n    {\n        System.out.println(&quot;Reached end of &quot; + this.getPlaylistName() + &quot; playlist !&quot;);\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","java.util.scanner","system.in"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1618547744,"post_id":67118992,"comment_id":118639208,"body_markdown":"`System.in` represents the console, `Scanner` represents something that can be used to read inputs, and `nextInt()` is just a way to actually make the application stop and wait to get an input. The only active thing here is the `nextInt()` call that triggers all of this.","body":"<code>System.in</code> represents the console, <code>Scanner</code> represents something that can be used to read inputs, and <code>nextInt()</code> is just a way to actually make the application stop and wait to get an input. The only active thing here is the <code>nextInt()</code> call that triggers all of this."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618546565,"creation_date":1618546565,"answer_id":67119022,"question_id":67118992,"body_markdown":"`System.in` is read _from_, it doesn&#39;t read itself. \r\n\r\nThe `Scanner` class helps parse input that it gets from the input source you give it. \r\n In this case, you&#39;ve given it `System.in`, so it reads input from there. \r\n\r\n`nextInt()` is one of the methods `Scanner` provides to help you parse input.  Specifically, it parses an integer.\r\n\r\n","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<p><code>System.in</code> is read <em>from</em>, it doesn't read itself.</p>\n<p>The <code>Scanner</code> class helps parse input that it gets from the input source you give it.\nIn this case, you've given it <code>System.in</code>, so it reads input from there.</p>\n<p><code>nextInt()</code> is one of the methods <code>Scanner</code> provides to help you parse input.  Specifically, it parses an integer.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1618549286,"creation_date":1618549286,"answer_id":67119363,"question_id":67118992,"body_markdown":"`System.in` is an `InputStream` that (by default) provides user input from the console. You can read from it directly by using `read`:\r\n\r\n    int someByte = System.in.read();\r\n\r\nNote that this reads an unsigned byte (Java doesn&#39;t have a type for unsigned bytes, so the type is `int`). For example, if I entered `1` in my console, the above will store 49 into `someByte`, because 49 is the first byte that the _character_ `1` is encoded as.\r\n\r\nIf you want to `someByte` to be 1 instead, using `System.in.read` is clearly not very helpful, is it? We don&#39;t want to _just_ read the bytes. We want to read the bytes, and use a particular encoding to convert those bytes to characters and then _parse_ the string of characters to a number. This is what `Scanner` does.\r\n\r\nA `Scanner` can take an input stream, and read bytes from it on demand, understands them as characters using a default encoding, then it groups chunks of characters together into _tokens_. One way for a `Scanner` to read stuff is by calling `nextInt`. What `nextInt` does is: read bytes until it finds a complete token, and parses it to an integer. \r\n\r\nIn short, `System.in` gives you the raw bytes, `Scanner` gives you tokens, parsed or otherwise. Hopefully that answers your first and third question.\r\n\r\n&gt; when we type(enter) input from the console, where is it going? to the System.in?\r\n\r\nYes, at this level of abstraction, you can say that&#39;s the first place it will go. Then the bytes you inputted then get passed to `Scanner`, which then transforms them into tokens, and then parsed.","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<p><code>System.in</code> is an <code>InputStream</code> that (by default) provides user input from the console. You can read from it directly by using <code>read</code>:</p>\n<pre><code>int someByte = System.in.read();\n</code></pre>\n<p>Note that this reads an unsigned byte (Java doesn't have a type for unsigned bytes, so the type is <code>int</code>). For example, if I entered <code>1</code> in my console, the above will store 49 into <code>someByte</code>, because 49 is the first byte that the <em>character</em> <code>1</code> is encoded as.</p>\n<p>If you want to <code>someByte</code> to be 1 instead, using <code>System.in.read</code> is clearly not very helpful, is it? We don't want to <em>just</em> read the bytes. We want to read the bytes, and use a particular encoding to convert those bytes to characters and then <em>parse</em> the string of characters to a number. This is what <code>Scanner</code> does.</p>\n<p>A <code>Scanner</code> can take an input stream, and read bytes from it on demand, understands them as characters using a default encoding, then it groups chunks of characters together into <em>tokens</em>. One way for a <code>Scanner</code> to read stuff is by calling <code>nextInt</code>. What <code>nextInt</code> does is: read bytes until it finds a complete token, and parses it to an integer.</p>\n<p>In short, <code>System.in</code> gives you the raw bytes, <code>Scanner</code> gives you tokens, parsed or otherwise. Hopefully that answers your first and third question.</p>\n<blockquote>\n<p>when we type(enter) input from the console, where is it going? to the System.in?</p>\n</blockquote>\n<p>Yes, at this level of abstraction, you can say that's the first place it will go. Then the bytes you inputted then get passed to <code>Scanner</code>, which then transforms them into tokens, and then parsed.</p>\n"}],"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67119363,"answer_count":2,"score":0,"last_activity_date":1683773641,"creation_date":1618546359,"question_id":67118992,"body_markdown":"\r\n  \r\n\r\n      Scanner scanner = new Scanner(System.in);\r\n    \r\n        System.out.println(&quot;enter number :&quot;);\r\n        int number = scanner.nextInt();\r\n        System.out.println(&quot;Number is &quot; + number);\r\n\r\nlet me go through step by step to explain my understanding,\r\n\r\n    Scanner scanner = new Scanner(System.in);  \r\n\r\n- The Scanner is one of the java In-built classes and it is one of the ways we can use it to read user input.\r\n\r\n-  scanner is the identifier of the object we created.\r\n\r\n- Using `new`, we create an instance of the object.\r\n\r\n- `System.in` helps us to take the inputs from the console(keyboard)  \r\n\r\n    System.out.println(&quot;enter number :&quot;);\r\n\r\n- prints the &quot; enter number : &quot;.\r\n\r\n    int number = scanner.nextInt();\r\n\r\n- Reads the input given to the system.in from console(keyboard) and parse(convert) the input  to an int  and stores it in the variable number.\r\n\r\n    System.out.println(&quot;Number is &quot; + number);\r\n\r\n- prints  the statement &quot;Number is &quot; + number(input stored in the variable number));\r\n\r\nthis is my vague understanding I think and I am not certain of my knowledge.\r\n\r\nmy questions are;\r\n\r\n1) Scanner class is used to read user input, then System.in also is used to read input?   isn&#39;t it?  it will be a help to explain the clear distinction between these two terms?\r\n\r\n2) when we type(enter) input from the console, where is it going? to the System.in? \r\n\r\n  does System.in storing the values? \r\n\r\n3) nextInt() method is also used to read inputs? how it works?  is it read input that is already been read by the System.in and then parses to an int?\r\n\r\nThe scanner reads, System.in reads, nextInt() reads, everything reads? I can&#39;t able to distinguish the workings of these?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zq8q4.png\r\n  [2]: https://i.stack.imgur.com/EuzrX.png\r\n","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<pre><code>  Scanner scanner = new Scanner(System.in);\n\n    System.out.println(&quot;enter number :&quot;);\n    int number = scanner.nextInt();\n    System.out.println(&quot;Number is &quot; + number);\n</code></pre>\n<p>let me go through step by step to explain my understanding,</p>\n<pre><code>Scanner scanner = new Scanner(System.in);  \n</code></pre>\n<ul>\n<li><p>The Scanner is one of the java In-built classes and it is one of the ways we can use it to read user input.</p>\n</li>\n<li><p>scanner is the identifier of the object we created.</p>\n</li>\n<li><p>Using <code>new</code>, we create an instance of the object.</p>\n</li>\n<li><p><code>System.in</code> helps us to take the inputs from the console(keyboard)</p>\n<p>System.out.println(&quot;enter number :&quot;);</p>\n</li>\n<li><p>prints the &quot; enter number : &quot;.</p>\n<p>int number = scanner.nextInt();</p>\n</li>\n<li><p>Reads the input given to the system.in from console(keyboard) and parse(convert) the input  to an int  and stores it in the variable number.</p>\n<p>System.out.println(&quot;Number is &quot; + number);</p>\n</li>\n<li><p>prints  the statement &quot;Number is &quot; + number(input stored in the variable number));</p>\n</li>\n</ul>\n<p>this is my vague understanding I think and I am not certain of my knowledge.</p>\n<p>my questions are;</p>\n<ol>\n<li><p>Scanner class is used to read user input, then System.in also is used to read input?   isn't it?  it will be a help to explain the clear distinction between these two terms?</p>\n</li>\n<li><p>when we type(enter) input from the console, where is it going? to the System.in?</p>\n</li>\n</ol>\n<p>does System.in storing the values?</p>\n<ol start=\"3\">\n<li>nextInt() method is also used to read inputs? how it works?  is it read input that is already been read by the System.in and then parses to an int?</li>\n</ol>\n<p>The scanner reads, System.in reads, nextInt() reads, everything reads? I can't able to distinguish the workings of these?</p>\n"},{"tags":["java","selenium-webdriver","datepicker"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1631747837,"post_id":69200356,"comment_id":122308795,"body_markdown":"That exception usually means you are sending an action to a webelement that isn&#39;t designed to take that action.  This suggests you are targeting the wrong webelement.  (//h4 maybe?)  You should specify which line throws the exception.","body":"That exception usually means you are sending an action to a webelement that isn&#39;t designed to take that action.  This suggests you are targeting the wrong webelement.  (//h4 maybe?)  You should specify which line throws the exception."},{"owner":{"account_id":22764328,"reputation":1,"user_id":16922631,"display_name":"Sri"},"score":0,"creation_date":1631750052,"post_id":69200356,"comment_id":122309179,"body_markdown":"It is inside a div tag\n   &lt;a class=&quot;ui-datepicker-prev ui-corner-all ui-state-disabled&quot; title=&quot;Prev&quot;&gt;\n      &lt;span class=&quot;ui-icon ui-icon-circle-triangle-w&quot;&gt;Prev&lt;/span&gt;\n   &lt;/a&gt;\n   &lt;a class=&quot;ui-datepicker-next ui-corner-all&quot; data-handler=&quot;next&quot; data-event=&quot;click&quot; title=&quot;Next&quot;&gt;\n      &lt;span class=&quot;ui-icon ui-icon-circle-triangle-e&quot;&gt;Next&lt;/span&gt;\n   &lt;/a&gt;\n  &lt;div class=&quot;ui-datepicker-title&quot;&gt;\n   &lt;span class=&quot;ui-datepicker-month&quot;&gt;September&lt;/span&gt;&amp;nbsp;\n   &lt;span class=&quot;ui-datepicker-year&quot;&gt;2021&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;","body":"It is inside a div tag    &lt;a class=&quot;ui-datepicker-prev ui-corner-all ui-state-disabled&quot; title=&quot;Prev&quot;&gt;       &lt;span class=&quot;ui-icon ui-icon-circle-triangle-w&quot;&gt;Prev&lt;/span&gt;    &lt;/a&gt;    &lt;a class=&quot;ui-datepicker-next ui-corner-all&quot; data-handler=&quot;next&quot; data-event=&quot;click&quot; title=&quot;Next&quot;&gt;       &lt;span class=&quot;ui-icon ui-icon-circle-triangle-e&quot;&gt;Next&lt;/span&gt;    &lt;/a&gt;   &lt;div class=&quot;ui-datepicker-title&quot;&gt;    &lt;span class=&quot;ui-datepicker-month&quot;&gt;September&lt;/span&gt;&amp;nbsp;    &lt;span class=&quot;ui-datepicker-year&quot;&gt;2021&lt;/span&gt;   &lt;/div&gt; &lt;/div&gt;"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":1,"creation_date":1631766139,"post_id":69200356,"comment_id":122311576,"body_markdown":"Is it possible to share url ?","body":"Is it possible to share url ?"},{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1631778904,"post_id":69200356,"comment_id":122315270,"body_markdown":"Hi, please write a summarized title and put the rest of the explanation in the body. Good luck &#128578;","body":"Hi, please write a summarized title and put the rest of the explanation in the body. Good luck üôÇ"},{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1631778920,"post_id":69200356,"comment_id":122315278,"body_markdown":"please take a moment and read this article https://stackoverflow.com/help/how-to-ask about how to asking questions also read this article https://stackoverflow.com/help/minimal-reproducible-example about how to ask a good question with minimum requirement.","body":"please take a moment and read this article <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> about how to asking questions also read this article <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> about how to ask a good question with minimum requirement."},{"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"score":0,"creation_date":1631865262,"post_id":69200356,"comment_id":122342952,"body_markdown":"Please share us the screen shot or small video clip, which will be helpful for us to debug.","body":"Please share us the screen shot or small video clip, which will be helpful for us to debug."}],"owner":{"account_id":22764328,"reputation":1,"user_id":16922631,"display_name":"Sri"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683773609,"creation_date":1631744372,"question_id":69200356,"body_markdown":"\r\n\r\n        public boolean dateCheck(String doctorName,String dateAppointment,String Time,String symptom) throws Exception\r\n           {\t   \t   \r\n        \t    driver.findElement(By.xpath(&quot;//span[contains(text(),&#39;Schedule Appointment&#39;)]&quot;)).click();\r\n        \t\t driver.findElement(By.xpath(&quot;//input[@value=&#39;Create new appointment&#39;]&quot;)).click();\r\n        \t \r\n        driver.findElement(By.xpath(&quot;//h4[contains(text(),&#39;&quot;+doctorName+&quot;&#39;)]/ancestor::ul/&quot;\r\n        \t\t \t\t+ &quot;following-sibling::button[contains(text(),&#39;Book Appointment&#39;)]&quot;)).click();\r\n    \t\t \r\n    \t\t calendarFrame=driver.findElement(By.xpath(&quot;//iframe[@id=&#39;myframe&#39;]&quot;));\r\n    \t     driver.switchTo().frame(calendarFrame);\t     \r\n    \t\t driver.findElement(By.xpath(&quot;//input[@id=&#39;datepicker&#39;]&quot;)).click();\r\n    \t\t   \r\n    \t\t   \r\n    \t\t   DateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\r\n    \t\t   LocalDate currentDate = LocalDate.parse(dateAppointment,dateformat);\t   \r\n    \t\t   int appoint_dt = currentDate.getDayOfMonth();\r\n    \t\t   int appoint_mth = currentDate.getMonthValue();\r\n    \t\t   System.out.println(&quot;month number give:&quot;+appoint_mth);\r\n    \t\t   int appoint_yr = currentDate.getYear();\r\n    \t\t  \r\n    \t\t  \r\n    \t\t   SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n    \t\t   Date currentDate1 = new Date();\r\n    \t\t   Date todayDate = sdf.parse(dateAppointment);\r\n    \t\t   System.out.println(&quot;today date is :&quot;+currentDate1);\r\n    \t\t   System.out.println(&quot;given date:&quot;+todayDate);\r\n    \t\t  \r\n    \t\t   Month month_name = Month.of(appoint_mth);\r\n    \t\t   System.out.println(&quot;given month :&quot;+month_name);\r\n    \t\r\n    \t\r\n    \t\t monthTitle = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-month&#39;]&quot;)).getText();\r\n    \t\t year = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-year&#39;]&quot;)).getText();\t\t \r\n    \t\t \r\n    \r\n    \t\tMonth name = Month.valueOf(monthTitle.toUpperCase());\r\n    \t\t\r\n    \t\t System.out.println(&quot;month from calendar:&quot;+ name);\r\n    \t\t \r\n    \t\t String cal_string = name.toString();\r\n    \t\t String given_string = month_name.toString();\r\n    \t \r\n    \t\t while(!cal_string.equalsIgnoreCase(given_string))\r\n    \t\t {\r\n    \t\t\t\tSystem.out.println(&quot;month and year are not  equal&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;months not equal&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;month from calendar:&quot;+ name);\r\n    \t\t\t\tSystem.out.println(&quot;given month :&quot;+month_name);\r\n    \t\t\t\t//wait=new WebDriverWait(driver,20);\r\n    \t\t\t\t//driver.findElement(By.xpath(&quot;//*[@id=&#39;ui-datepicker-div&#39;]/div/a[2]/span&quot;)).click();\r\n    \t\t\t\t//wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;))).click();\r\n    \t\t\t\tdriver.findElement(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;)).click();\r\n    \t\t\t\tmonthTitle = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-month&#39;]&quot;)).getText();\r\n    \t\t\t\tname = Month.valueOf(monthTitle.toUpperCase());\r\n    \t\t\t\tcal_string = name.toString();\r\n    \t\t\t\t//given_string = month_name.toString();\r\n    \t\t\t\tbreak;\r\n    \t\t\t }\r\n    \t\t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//div[@id=&#39;ui-datepicker-div&#39;]/table/tbody/tr/td/child::a[contains(text(),&#39;&quot;+appoint_dt+&quot;&#39;)]&quot;)).click();\r\n    \t\t\t\t\t\t\t\t \t\t\t \t\t \t\t \t \r\n    \t\t Thread.sleep(2000);\r\n    \t\t\r\n    \t\t while(!year.equalsIgnoreCase(Integer.toString(appoint_yr)))\r\n    \t\t {\r\n    \t\t\t //driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;)).click();\r\n    \t\t\t driver.findElement(By.xpath(&quot;//*[@id=&#39;ui-datepicker-div&#39;]/div/a[2]/span&quot;)).click();\r\n    \t\t\t year = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-year&#39;]&quot;)).getText();\r\n    \t\t\t break;\r\n    \t\t }\r\n    \t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//div[@id=&#39;ui-datepicker-div&#39;]/table/tbody/tr/td/child::a[contains(text(),&#39;&quot;+appoint_dt+&quot;&#39;)]&quot;)).click();\t\t\r\n    \t\t \r\n    \t\t time_dropDown = driver.findElement(By.xpath(&quot;//select[@name=&#39;time&#39;]&quot;));\r\n    \t\t s = new Select(time_dropDown);\r\n    \t\t \r\n    \t\t List&lt;WebElement&gt; timeOptions = s.getOptions();\r\n    \t\t for (WebElement t : timeOptions) {\t\t \r\n    \t\t\t if(t.getAttribute(&quot;value&quot;).equalsIgnoreCase(Time))\r\n    \t\t\t {\r\n    \t\t\t\t s.selectByValue(Time);\r\n    \t\t\t }\t\t\r\n    \t\t  }\r\n    \t\t Thread.sleep(2000);\t \r\n    \t\t driver.findElement(By.xpath(&quot;//button[@id=&#39;ChangeHeatName&#39;]&quot;)).click();\t\t \t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//textarea[@name=&#39;sym&#39;]&quot;)).sendKeys(symptom);\t\t \r\n    \t\t if(symptom.isEmpty())\r\n    \t\t {\r\n    \t\t\t System.out.println(&quot;Please provide your symptoms&quot;);\r\n    \t\t }\t \t\t\r\n    \t\t driver.findElement(By.xpath(&quot;//input[@value=&#39;Submit&#39;]&quot;)).click();\r\n    \t\t return true;\r\n     }  \t  \r\n\r\n","title":"I am trying to click next button on date picker in selenium java but it stops after first click and gives element not interactable exception. help pls","body":"<pre><code>    public boolean dateCheck(String doctorName,String dateAppointment,String Time,String symptom) throws Exception\n       {           \n            driver.findElement(By.xpath(&quot;//span[contains(text(),'Schedule Appointment')]&quot;)).click();\n             driver.findElement(By.xpath(&quot;//input[@value='Create new appointment']&quot;)).click();\n         \n    driver.findElement(By.xpath(&quot;//h4[contains(text(),'&quot;+doctorName+&quot;')]/ancestor::ul/&quot;\n                    + &quot;following-sibling::button[contains(text(),'Book Appointment')]&quot;)).click();\n         \n         calendarFrame=driver.findElement(By.xpath(&quot;//iframe[@id='myframe']&quot;));\n         driver.switchTo().frame(calendarFrame);         \n         driver.findElement(By.xpath(&quot;//input[@id='datepicker']&quot;)).click();\n           \n           \n           DateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\n           LocalDate currentDate = LocalDate.parse(dateAppointment,dateformat);    \n           int appoint_dt = currentDate.getDayOfMonth();\n           int appoint_mth = currentDate.getMonthValue();\n           System.out.println(&quot;month number give:&quot;+appoint_mth);\n           int appoint_yr = currentDate.getYear();\n          \n          \n           SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n           Date currentDate1 = new Date();\n           Date todayDate = sdf.parse(dateAppointment);\n           System.out.println(&quot;today date is :&quot;+currentDate1);\n           System.out.println(&quot;given date:&quot;+todayDate);\n          \n           Month month_name = Month.of(appoint_mth);\n           System.out.println(&quot;given month :&quot;+month_name);\n    \n    \n         monthTitle = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-month']&quot;)).getText();\n         year = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-year']&quot;)).getText();       \n         \n\n        Month name = Month.valueOf(monthTitle.toUpperCase());\n        \n         System.out.println(&quot;month from calendar:&quot;+ name);\n         \n         String cal_string = name.toString();\n         String given_string = month_name.toString();\n     \n         while(!cal_string.equalsIgnoreCase(given_string))\n         {\n                System.out.println(&quot;month and year are not  equal&quot;);\n                System.out.println(&quot;months not equal&quot;);\n                System.out.println(&quot;month from calendar:&quot;+ name);\n                System.out.println(&quot;given month :&quot;+month_name);\n                //wait=new WebDriverWait(driver,20);\n                //driver.findElement(By.xpath(&quot;//*[@id='ui-datepicker-div']/div/a[2]/span&quot;)).click();\n                //wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;))).click();\n                driver.findElement(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;)).click();\n                monthTitle = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-month']&quot;)).getText();\n                name = Month.valueOf(monthTitle.toUpperCase());\n                cal_string = name.toString();\n                //given_string = month_name.toString();\n                break;\n             }\n             \n         driver.findElement(By.xpath(&quot;//div[@id='ui-datepicker-div']/table/tbody/tr/td/child::a[contains(text(),'&quot;+appoint_dt+&quot;')]&quot;)).click();\n                                                                 \n         Thread.sleep(2000);\n        \n         while(!year.equalsIgnoreCase(Integer.toString(appoint_yr)))\n         {\n             //driver.findElement(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;)).click();\n             driver.findElement(By.xpath(&quot;//*[@id='ui-datepicker-div']/div/a[2]/span&quot;)).click();\n             year = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-year']&quot;)).getText();\n             break;\n         }\n         \n         driver.findElement(By.xpath(&quot;//div[@id='ui-datepicker-div']/table/tbody/tr/td/child::a[contains(text(),'&quot;+appoint_dt+&quot;')]&quot;)).click();      \n         \n         time_dropDown = driver.findElement(By.xpath(&quot;//select[@name='time']&quot;));\n         s = new Select(time_dropDown);\n         \n         List&lt;WebElement&gt; timeOptions = s.getOptions();\n         for (WebElement t : timeOptions) {      \n             if(t.getAttribute(&quot;value&quot;).equalsIgnoreCase(Time))\n             {\n                 s.selectByValue(Time);\n             }      \n          }\n         Thread.sleep(2000);     \n         driver.findElement(By.xpath(&quot;//button[@id='ChangeHeatName']&quot;)).click();                 \n         driver.findElement(By.xpath(&quot;//textarea[@name='sym']&quot;)).sendKeys(symptom);      \n         if(symptom.isEmpty())\n         {\n             System.out.println(&quot;Please provide your symptoms&quot;);\n         }          \n         driver.findElement(By.xpath(&quot;//input[@value='Submit']&quot;)).click();\n         return true;\n }        \n</code></pre>\n"},{"tags":["java","java.util.scanner","delimiter","string-length"],"comments":[{"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"score":1,"creation_date":1581041838,"post_id":60106220,"comment_id":106306205,"body_markdown":"Have you tried to press Enter right after typing a question? This should trigger `nextLine`. Also, we&#39;ll need to see your code to really understand what&#39;s happening there.","body":"Have you tried to press Enter right after typing a question? This should trigger <code>nextLine</code>. Also, we&#39;ll need to see your code to really understand what&#39;s happening there."},{"owner":{"account_id":17707447,"reputation":29,"user_id":12855660,"display_name":"Kate Dineen"},"score":0,"creation_date":1581042603,"post_id":60106220,"comment_id":106306367,"body_markdown":"When I press Enter right after typing a question with nextLine it just returns to a new like waiting for me to type more without printing my systems.","body":"When I press Enter right after typing a question with nextLine it just returns to a new like waiting for me to type more without printing my systems."}],"answers":[{"tags":[],"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581043312,"creation_date":1581042966,"answer_id":60106358,"question_id":60106220,"body_markdown":"`keyboard.next` call is waiting for user input. You&#39;re calling it twice, so your program expects the user to enter two words.\r\n\r\nSo, when you type in &quot;Hello world.&quot; it reads &quot;Hello&quot; and &quot;world.&quot; separately:\r\n\r\n```\r\n//Here, the sentence is &quot;Hello&quot;\r\nString sentence = keyboard.next();\r\nSystem.out.println();\r\n\r\n//Here, keyboard.next() returns &quot;World.&quot;\r\nint sentenceLength = keyboard.next().length();\r\n```\r\n\r\nAnd when you use `nextLine` your code is waiting for the user to enter two lines.\r\n\r\nTo fix this you need to:\r\n\r\n1. Read the whole line with `nextLine`.\r\n2. Use `sentence` instead of requesting user input the second time.\r\n\r\nSomething like this should work:\r\n\r\n```\r\nString sentence = keyboard.nextLine();\r\nSystem.out.println();\r\n\r\nint sentenceLength = sentence.length();\r\n```","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<p><code>keyboard.next</code> call is waiting for user input. You're calling it twice, so your program expects the user to enter two words.</p>\n\n<p>So, when you type in \"Hello world.\" it reads \"Hello\" and \"world.\" separately:</p>\n\n<pre><code>//Here, the sentence is \"Hello\"\nString sentence = keyboard.next();\nSystem.out.println();\n\n//Here, keyboard.next() returns \"World.\"\nint sentenceLength = keyboard.next().length();\n</code></pre>\n\n<p>And when you use <code>nextLine</code> your code is waiting for the user to enter two lines.</p>\n\n<p>To fix this you need to:</p>\n\n<ol>\n<li>Read the whole line with <code>nextLine</code>.</li>\n<li>Use <code>sentence</code> instead of requesting user input the second time.</li>\n</ol>\n\n<p>Something like this should work:</p>\n\n<pre><code>String sentence = keyboard.nextLine();\nSystem.out.println();\n\nint sentenceLength = sentence.length();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23058934,"reputation":1,"user_id":17174575,"display_name":"Yellapu Pavani Sai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635098677,"creation_date":1635098677,"answer_id":69699467,"question_id":60106220,"body_markdown":"    import java.util.Scanner;\r\n    public Stringcount\r\n    {\r\n     public static void main(String args[])\r\n     {\r\n     Scanner s=new Scanner(System.in);\r\n     System.out.println(&quot;enter the sentence:&quot;);\r\n     String str=s.nextLine();\r\n     int count = 0;\r\n     System.out.println(&quot;The entered string is: &quot;+str);    \r\n     for(int i = 0; i &lt; str.length(); i++) \r\n        {    \r\n            if(str.charAt(i) != &#39; &#39;)    \r\n                count++;    \r\n        }\r\n        System.out.println(&quot;Total number of characters in the string: &quot; + count);  \r\n        System.out.println(&quot;The first character of your sentence is &quot; + str.substring(0,1) + &quot;.&quot;);\r\n      System.out.println(&quot;The index of the first space is &quot; + str.indexOf(&quot; &quot;) + &quot;.&quot;);  \r\n    }      \r\n}\r\n     ","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<pre><code>import java.util.Scanner;\npublic Stringcount\n{\n public static void main(String args[])\n {\n Scanner s=new Scanner(System.in);\n System.out.println(&quot;enter the sentence:&quot;);\n String str=s.nextLine();\n int count = 0;\n System.out.println(&quot;The entered string is: &quot;+str);    \n for(int i = 0; i &lt; str.length(); i++) \n    {    \n        if(str.charAt(i) != ' ')    \n            count++;    \n    }\n    System.out.println(&quot;Total number of characters in the string: &quot; + count);  \n    System.out.println(&quot;The first character of your sentence is &quot; + str.substring(0,1) + &quot;.&quot;);\n  System.out.println(&quot;The index of the first space is &quot; + str.indexOf(&quot; &quot;) + &quot;.&quot;);  \n}      \n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":17707447,"reputation":29,"user_id":12855660,"display_name":"Kate Dineen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":584,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60106358,"answer_count":2,"score":1,"last_activity_date":1683773584,"creation_date":1581041637,"question_id":60106220,"body_markdown":"The Java task is to have the user type a sentence/phrase and then print out how many characters the sentence has. My .length() method is only counting the first word and space as characters. I&#39;ve read previous questions and answers involving nextLine() but if I use that instead of next() it only lets the user type it&#39;s question and waits, doesn&#39;t print anything else immediately anymore. I&#39;m brand new to Java and I think this can be fixed with a delimiter but I&#39;m not sure how or what I&#39;m missing. TIA!! \r\n\r\n**Update:** Here&#39;s my code. \r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass StringStuff{\r\n   public static void main( String [] args){\r\n      \r\n      Scanner keyboard = new Scanner(System.in);\r\n      int number;\r\n      \r\n      System.out.print(&quot;Welcome! Please enter a phrase or sentence: &quot;);\r\n      System.out.println();\r\n      String sentence = keyboard.next();\r\n      System.out.println();\r\n    \r\n      int sentenceLength = keyboard.next().length();\r\n    \r\n      \r\n      System.out.println(&quot;Your sentence has &quot; + sentenceLength + &quot; characters.&quot;);\r\n      System.out.println(&quot;The first character of your sentence is &quot; + sentence.substring(0,1) + &quot;.&quot;);\r\n      System.out.println(&quot;The index of the first space is &quot; + sentence.indexOf(&quot; &quot;) + &quot;.&quot;);\r\n     \r\n  \r\n   }\r\n}\r\n```\r\n\r\nwhen I type &quot;Hello world.&quot; as the sentence it prints:\r\n\r\nYour sentence has 6 characters.\r\nThe first character of your sentence is H.\r\nThe index of the first space is -1.\r\n","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<p>The Java task is to have the user type a sentence/phrase and then print out how many characters the sentence has. My .length() method is only counting the first word and space as characters. I've read previous questions and answers involving nextLine() but if I use that instead of next() it only lets the user type it's question and waits, doesn't print anything else immediately anymore. I'm brand new to Java and I think this can be fixed with a delimiter but I'm not sure how or what I'm missing. TIA!! </p>\n\n<p><strong>Update:</strong> Here's my code. </p>\n\n<pre><code>import java.util.Scanner;\n\nclass StringStuff{\n   public static void main( String [] args){\n\n      Scanner keyboard = new Scanner(System.in);\n      int number;\n\n      System.out.print(\"Welcome! Please enter a phrase or sentence: \");\n      System.out.println();\n      String sentence = keyboard.next();\n      System.out.println();\n\n      int sentenceLength = keyboard.next().length();\n\n\n      System.out.println(\"Your sentence has \" + sentenceLength + \" characters.\");\n      System.out.println(\"The first character of your sentence is \" + sentence.substring(0,1) + \".\");\n      System.out.println(\"The index of the first space is \" + sentence.indexOf(\" \") + \".\");\n\n\n   }\n}\n</code></pre>\n\n<p>when I type \"Hello world.\" as the sentence it prints:</p>\n\n<p>Your sentence has 6 characters.\nThe first character of your sentence is H.\nThe index of the first space is -1.</p>\n"},{"tags":["java","while-loop","java.util.scanner"],"comments":[{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":2,"creation_date":1497208273,"post_id":44487686,"comment_id":75969500,"body_markdown":"Have you read the documentation of the `Scanner.hasNext()` method in the API Javadoc? Because if you don&#39;t and your first reaction to seeing a method is asking here what it means, you are going to need a lot of questions.... If you have, please be more specific about what you do not understand.","body":"Have you read the documentation of the <code>Scanner.hasNext()</code> method in the API Javadoc? Because if you don&#39;t and your first reaction to seeing a method is asking here what it means, you are going to need a lot of questions.... If you have, please be more specific about what you do not understand."},{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":0,"creation_date":1497208290,"post_id":44487686,"comment_id":75969508,"body_markdown":"Have you looked at the javadoc? Were there any parts what we&#39;re unclear","body":"Have you looked at the javadoc? Were there any parts what we&#39;re unclear"}],"answers":[{"tags":[],"owner":{"account_id":11095235,"reputation":1,"user_id":8145630,"display_name":"Meepers55"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497210007,"creation_date":1497209586,"answer_id":44487925,"question_id":44487686,"body_markdown":"I do recommend looking at the Javadoc, but I&#39;ll explain it for you as simple as I can. \n\nBasically, the hasNext() method returns `true` if the given document contains another string. Hence why the snippet will loop if said document **has** another string. Once there are no more Strings in the entire document, hasNext() returns`false`.\n\nHere&#39;s an example of the next() method:\n `String myString = myScanner.next();`\nThis makes myString equal to the next string in the given document. ","title":"What does hasNext() in a While do?","body":"<p>I do recommend looking at the Javadoc, but I'll explain it for you as simple as I can. </p>\n\n<p>Basically, the hasNext() method returns <code>true</code> if the given document contains another string. Hence why the snippet will loop if said document <strong>has</strong> another string. Once there are no more Strings in the entire document, hasNext() returns<code>false</code>.</p>\n\n<p>Here's an example of the next() method:\n <code>String myString = myScanner.next();</code>\nThis makes myString equal to the next string in the given document. </p>\n"},{"tags":[],"owner":{"account_id":11094833,"reputation":41,"user_id":8145373,"display_name":"Lydzje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497218109,"creation_date":1497218109,"answer_id":44489152,"question_id":44487686,"body_markdown":"Javadoc says:\r\n\r\n&gt; ***hasNext***  \r\n&gt; public boolean hasNext()\r\n&gt; \r\n&gt; Returns true if this scanner has another token in its input. This\r\n&gt; method may block while waiting for input to scan. The scanner does not\r\n&gt; advance past any input.\r\n&gt; \r\n&gt; ***next***   \r\n&gt; public String next()\r\n&gt; \r\n&gt; Finds and returns the next complete token from this scanner. A\r\n&gt; complete token is preceded and followed by input that matches the\r\n&gt; delimiter pattern. This method may block while waiting for input to\r\n&gt; scan, even if a previous invocation of hasNext() returned true.\r\n\r\nTo read all your file rows you&#39;ll have to check if there are tokens every line. Then you call 3 times the next method since you know there will be 3 tokens per line:\r\n\r\n    import java.io.File;\r\n    import java.util.Scanner;\r\n    \r\n    public class FLoader {\r\n    \r\n    \tpublic void load(String path) {\r\n    \t\tScanner in = null;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tin = new Scanner(new File(path));\r\n    \t\t\twhile (in.hasNext()) {\t\r\n    \t\t\t\tString ss = in.next();\r\n    \t\t\t\tString FName = in.next();\r\n    \t\t\t\tString LName = in.next();\r\n    \r\n    \t\t\t\tSystem.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;, ss, FName, LName);\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.err.println(&quot;Loading file failed&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tSystem.exit(-1);\r\n    \t\t}\r\n    \t}\r\n    }","title":"What does hasNext() in a While do?","body":"<p>Javadoc says:</p>\n\n<blockquote>\n  <p><strong><em>hasNext</em></strong><br>\n  public boolean hasNext()</p>\n  \n  <p>Returns true if this scanner has another token in its input. This\n  method may block while waiting for input to scan. The scanner does not\n  advance past any input.</p>\n  \n  <p><strong><em>next</em></strong><br>\n  public String next()</p>\n  \n  <p>Finds and returns the next complete token from this scanner. A\n  complete token is preceded and followed by input that matches the\n  delimiter pattern. This method may block while waiting for input to\n  scan, even if a previous invocation of hasNext() returned true.</p>\n</blockquote>\n\n<p>To read all your file rows you'll have to check if there are tokens every line. Then you call 3 times the next method since you know there will be 3 tokens per line:</p>\n\n<pre><code>import java.io.File;\nimport java.util.Scanner;\n\npublic class FLoader {\n\n    public void load(String path) {\n        Scanner in = null;\n\n        try {\n            in = new Scanner(new File(path));\n            while (in.hasNext()) {  \n                String ss = in.next();\n                String FName = in.next();\n                String LName = in.next();\n\n                System.out.printf(\"SSN: %s, FirstName: %s, LastName: %s \\n\", ss, FName, LName);\n            }\n\n        } catch (Exception e) {\n            System.err.println(\"Loading file failed\");\n            e.printStackTrace();\n            System.exit(-1);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11088849,"reputation":91,"user_id":8141536,"display_name":"Johith Iype"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32925,"favorite_count":0,"down_vote_count":7,"up_vote_count":6,"answer_count":2,"score":-1,"last_activity_date":1683773562,"creation_date":1497208057,"question_id":44487686,"body_markdown":"I&#39;m new to Java and I&#39;m trying to read data from a .txt file. I&#39;ve implemented a Scanner object &#39;in&#39; `Scanner in=new Scanner(&quot;file.txt&quot;);` and then down the code a while loop to traverse through the content of the file.There are multiple rows of data in the file and in each row there are three strings (security number ,First name ,Last name : 01 Thomas Anderson)\r\n\r\n    while(in.hasNext()){\r\n\t    String ss = in.next();\r\n\t\tString FName=in.next();\r\n\t\tString LName=in.next();\r\n\t\t\r\n\t\tSystem.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;,ss,FName,LName);\r\n\t\t}\r\n\r\nSo, what does the hasNext() method do? Does it look for end of the row or for the last row in the file or.... ?\r\n\r\nPlease elaborate on the working of the above snippet (mentioning the next() method too).\r\n\r\n","title":"What does hasNext() in a While do?","body":"<p>I'm new to Java and I'm trying to read data from a .txt file. I've implemented a Scanner object 'in' <code>Scanner in=new Scanner(&quot;file.txt&quot;);</code> and then down the code a while loop to traverse through the content of the file.There are multiple rows of data in the file and in each row there are three strings (security number ,First name ,Last name : 01 Thomas Anderson)</p>\n<pre><code>while(in.hasNext()){\n    String ss = in.next();\n    String FName=in.next();\n    String LName=in.next();\n    \n    System.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;,ss,FName,LName);\n    }\n</code></pre>\n<p>So, what does the hasNext() method do? Does it look for end of the row or for the last row in the file or.... ?</p>\n<p>Please elaborate on the working of the above snippet (mentioning the next() method too).</p>\n"},{"tags":["java","amazon-s3","gzipinputstream"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1483122241,"post_id":41400810,"comment_id":70003842,"body_markdown":"Regarding your ‚Äúsave the GZIPed file locally‚Äù code:  Channels need to be closed, just like InputStreams and OutputStreams.","body":"Regarding your ‚Äúsave the GZIPed file locally‚Äù code:  Channels need to be closed, just like InputStreams and OutputStreams."},{"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"score":1,"creation_date":1483592993,"post_id":41400810,"comment_id":70160893,"body_markdown":"OpenJDK bug [JDK-8081450](https://bugs.openjdk.java.net/browse/JDK-8081450) looks to be the same issue.","body":"OpenJDK bug <a href=\"https://bugs.openjdk.java.net/browse/JDK-8081450\" rel=\"nofollow noreferrer\">JDK-8081450</a> looks to be the same issue."}],"answers":[{"tags":[],"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1483596413,"creation_date":1483582327,"answer_id":41476316,"question_id":41400810,"body_markdown":"### Root Cause Discussion ###\r\n\r\nIt turns out that InputStreams can vary quite a bit. In particular they differ in how they implement the .available() method. For example ByteArrayInputStream .available() returns the number of bytes remaining in the InputStream. However, HTTPInputStream .available() returns the number of bytes available for reading before a blocking IO request needs to be made to refill the buffer. (See the Java Docs for more info)\r\n\r\nThe problem is that GZIPInputStream uses the output of .available() to determine if there might be an additional GZIP file available in the InputStream after it finishes decompressing a complete GZIP file. Here is line 231 from OpenJDK source file [GZIPInputStream.java]( http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/0e4fc29a5ce4/src/share/classes/java/util/zip/GZIPInputStream.java) method readTrailer(). \r\n\r\n       if (this.in.available() &gt; 0 || n &gt; 26) {\r\n\r\nIf the HTTPInputStream read buffer empties right at the boundary of two concatenated GZIP files GZIPInputStream calls .available(), which responds with a 0 as it would need to go out to the network to refill the buffer, and so GZIPInputStream treats the file as complete and closes prematurely.\r\n\r\nThe Common Crawl .wet archives are hundreds of megabytes of small concatenated GZIP files and so eventually the HTTPInputStream buffer will empty right at the end of one of the concatenated GZIP files and GZIPInputStream will close prematurely. This explains the problem demonstrated in the question.\r\n\r\n### Solution and Work Around ###\r\n\r\nThis [GIST](https://gist.github.com/jeffharwell/2e8785a0ec8acc8539901e841d595394) contains a patch to jdk8u152-b00 revision 12039 and two jtreg tests that remove the (in my humble opinion) incorrect reliance on .available().\r\n\r\nIf you cannot patch the JDK a work around is to make sure that available() always returns &gt; 0 which forces GZIPInputStream to always check for another GZIP file in the stream. Unfortunately HTTPInputStream is private so you cannot subclass it directly, instead extend InputStream and wrap the HTTPInputStream. The below code demonstrates this work around.\r\n\r\n### Demonstration Code and Output ###\r\n\r\nHere is the output showing that when the HTTPInputStream is wrapped as discussed GZIPInputStream will produces identical results when reading the concatenated GZIP from a file and directly from HTTP.\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 448974935 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile0.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 451171329 bytes from HTTP-&gt;GZIP\r\n    Read 451171329 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile40.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 453183600 bytes from HTTP-&gt;GZIP\r\n    Read 453183600 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile500.wet\r\n\r\nHere is the demonstration code from the question modified with an InputStream wrapper.\r\n\r\n    import java.net.*;\r\n    import java.io.*;\r\n    import java.util.zip.GZIPInputStream;\r\n    import java.nio.channels.*;\r\n    \r\n    public class GZIPTest {\r\n        // Here is a wrapper class that wraps an InputStream\r\n        // but always returns &gt; 0 when .available() is called.\r\n        // This will cause GZIPInputStream to always make another \r\n        // call to the InputStream to check for an additional \r\n        // concatenated GZIP file in the stream.\r\n        public static class AvailableInputStream extends InputStream {\r\n            private InputStream is;\r\n    \r\n            AvailableInputStream(InputStream inputstream) {\r\n                is = inputstream;\r\n            }\r\n    \r\n            public int read() throws IOException {\r\n                return(is.read());\r\n            }\r\n    \r\n            public int read(byte[] b) throws IOException {\r\n                return(is.read(b));\r\n            }\r\n    \r\n            public int read(byte[] b, int off, int len) throws IOException {\r\n                return(is.read(b, off, len));\r\n            }\r\n    \r\n            public void close() throws IOException {\r\n                is.close();\r\n            }\r\n    \r\n            public int available() throws IOException {\r\n                // Always say that we have 1 more byte in the\r\n                // buffer, even when we don&#39;t\r\n                int a = is.available();\r\n                if (a == 0) {\r\n                    return(1);\r\n                } else {\r\n                    return(a);\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            // Our three test files from CommonCrawl\r\n            URL url0 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url40 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url500 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n            /*\r\n             * Test the URLs and display the results\r\n             */\r\n            test(url0, &quot;testfile0.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url40, &quot;testfile40.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url500, &quot;testfile500.wet&quot;);\r\n        }\r\n    \r\n        public static void test(URL url, String testGZFileName) throws Exception {\r\n            System.out.println(&quot;Testing URL &quot;+url.toString());\r\n    \r\n            // First directly wrap the HTTP inputStream with GZIPInputStream\r\n            // and count the number of bytes we read\r\n            // Go ahead and save the extracted stream to a file for further inspection\r\n            System.out.println(&quot;Testing HTTP Input Stream direct to GZIPInputStream&quot;);\r\n            int bytesFromGZIPDirect = 0;\r\n            URLConnection urlConnection = url.openConnection();\r\n            // Wrap the HTTPInputStream in our AvailableHttpInputStream\r\n            AvailableInputStream ais = new AvailableInputStream(urlConnection.getInputStream());\r\n            GZIPInputStream gzipishttp = new GZIPInputStream(ais);\r\n            FileOutputStream directGZIPOutStream = new FileOutputStream(&quot;./&quot;+testGZFileName);\r\n            int buffersize = 1024;\r\n            byte[] buffer = new byte[buffersize];\r\n            int bytesRead = -1;\r\n            while ((bytesRead = gzipishttp.read(buffer, 0, buffersize)) != -1) {\r\n                bytesFromGZIPDirect += bytesRead;\r\n                directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\r\n            }\r\n            gzipishttp.close();\r\n            directGZIPOutStream.close();\r\n    \r\n            // Save the GZIPed file locally\r\n            System.out.println(&quot;Testing saving to file before decompression&quot;);\r\n            ReadableByteChannel rbc = Channels.newChannel(url.openStream());\r\n            FileOutputStream outputStream = new FileOutputStream(&quot;./test.wet.gz&quot;);\r\n            outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\r\n    \r\n            // Now decompress the local file and count the number of bytes\r\n            int bytesFromGZIPFile = 0;\r\n            GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n    \r\n            buffer = new byte[1024];\r\n            while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPFile += bytesRead;\r\n            }\r\n            gzipis.close();\r\n    \r\n            // The Results\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPDirect+&quot; bytes from HTTP-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPFile+&quot; bytes from HTTP-&gt;file-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Output from HTTP-&gt;GZIP saved to file &quot;+testGZFileName);\r\n        }\r\n    \r\n    }\r\n","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<h3>Root Cause Discussion</h3>\n\n<p>It turns out that InputStreams can vary quite a bit. In particular they differ in how they implement the .available() method. For example ByteArrayInputStream .available() returns the number of bytes remaining in the InputStream. However, HTTPInputStream .available() returns the number of bytes available for reading before a blocking IO request needs to be made to refill the buffer. (See the Java Docs for more info)</p>\n\n<p>The problem is that GZIPInputStream uses the output of .available() to determine if there might be an additional GZIP file available in the InputStream after it finishes decompressing a complete GZIP file. Here is line 231 from OpenJDK source file <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/0e4fc29a5ce4/src/share/classes/java/util/zip/GZIPInputStream.java\" rel=\"noreferrer\">GZIPInputStream.java</a> method readTrailer(). </p>\n\n<pre><code>   if (this.in.available() &gt; 0 || n &gt; 26) {\n</code></pre>\n\n<p>If the HTTPInputStream read buffer empties right at the boundary of two concatenated GZIP files GZIPInputStream calls .available(), which responds with a 0 as it would need to go out to the network to refill the buffer, and so GZIPInputStream treats the file as complete and closes prematurely.</p>\n\n<p>The Common Crawl .wet archives are hundreds of megabytes of small concatenated GZIP files and so eventually the HTTPInputStream buffer will empty right at the end of one of the concatenated GZIP files and GZIPInputStream will close prematurely. This explains the problem demonstrated in the question.</p>\n\n<h3>Solution and Work Around</h3>\n\n<p>This <a href=\"https://gist.github.com/jeffharwell/2e8785a0ec8acc8539901e841d595394\" rel=\"noreferrer\">GIST</a> contains a patch to jdk8u152-b00 revision 12039 and two jtreg tests that remove the (in my humble opinion) incorrect reliance on .available().</p>\n\n<p>If you cannot patch the JDK a work around is to make sure that available() always returns > 0 which forces GZIPInputStream to always check for another GZIP file in the stream. Unfortunately HTTPInputStream is private so you cannot subclass it directly, instead extend InputStream and wrap the HTTPInputStream. The below code demonstrates this work around.</p>\n\n<h3>Demonstration Code and Output</h3>\n\n<p>Here is the output showing that when the HTTPInputStream is wrapped as discussed GZIPInputStream will produces identical results when reading the concatenated GZIP from a file and directly from HTTP.</p>\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 448974935 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile0.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 451171329 bytes from HTTP-&gt;GZIP\nRead 451171329 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile40.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 453183600 bytes from HTTP-&gt;GZIP\nRead 453183600 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile500.wet\n</code></pre>\n\n<p>Here is the demonstration code from the question modified with an InputStream wrapper.</p>\n\n<pre><code>import java.net.*;\nimport java.io.*;\nimport java.util.zip.GZIPInputStream;\nimport java.nio.channels.*;\n\npublic class GZIPTest {\n    // Here is a wrapper class that wraps an InputStream\n    // but always returns &gt; 0 when .available() is called.\n    // This will cause GZIPInputStream to always make another \n    // call to the InputStream to check for an additional \n    // concatenated GZIP file in the stream.\n    public static class AvailableInputStream extends InputStream {\n        private InputStream is;\n\n        AvailableInputStream(InputStream inputstream) {\n            is = inputstream;\n        }\n\n        public int read() throws IOException {\n            return(is.read());\n        }\n\n        public int read(byte[] b) throws IOException {\n            return(is.read(b));\n        }\n\n        public int read(byte[] b, int off, int len) throws IOException {\n            return(is.read(b, off, len));\n        }\n\n        public void close() throws IOException {\n            is.close();\n        }\n\n        public int available() throws IOException {\n            // Always say that we have 1 more byte in the\n            // buffer, even when we don't\n            int a = is.available();\n            if (a == 0) {\n                return(1);\n            } else {\n                return(a);\n            }\n        }\n    }\n\n\n\n    public static void main(String[] args) throws Exception {\n        // Our three test files from CommonCrawl\n        URL url0 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url40 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url500 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\n        /*\n         * Test the URLs and display the results\n         */\n        test(url0, \"testfile0.wet\");\n        System.out.println(\"------\");\n        test(url40, \"testfile40.wet\");\n        System.out.println(\"------\");\n        test(url500, \"testfile500.wet\");\n    }\n\n    public static void test(URL url, String testGZFileName) throws Exception {\n        System.out.println(\"Testing URL \"+url.toString());\n\n        // First directly wrap the HTTP inputStream with GZIPInputStream\n        // and count the number of bytes we read\n        // Go ahead and save the extracted stream to a file for further inspection\n        System.out.println(\"Testing HTTP Input Stream direct to GZIPInputStream\");\n        int bytesFromGZIPDirect = 0;\n        URLConnection urlConnection = url.openConnection();\n        // Wrap the HTTPInputStream in our AvailableHttpInputStream\n        AvailableInputStream ais = new AvailableInputStream(urlConnection.getInputStream());\n        GZIPInputStream gzipishttp = new GZIPInputStream(ais);\n        FileOutputStream directGZIPOutStream = new FileOutputStream(\"./\"+testGZFileName);\n        int buffersize = 1024;\n        byte[] buffer = new byte[buffersize];\n        int bytesRead = -1;\n        while ((bytesRead = gzipishttp.read(buffer, 0, buffersize)) != -1) {\n            bytesFromGZIPDirect += bytesRead;\n            directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\n        }\n        gzipishttp.close();\n        directGZIPOutStream.close();\n\n        // Save the GZIPed file locally\n        System.out.println(\"Testing saving to file before decompression\");\n        ReadableByteChannel rbc = Channels.newChannel(url.openStream());\n        FileOutputStream outputStream = new FileOutputStream(\"./test.wet.gz\");\n        outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\n\n        // Now decompress the local file and count the number of bytes\n        int bytesFromGZIPFile = 0;\n        GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));\n\n        buffer = new byte[1024];\n        while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPFile += bytesRead;\n        }\n        gzipis.close();\n\n        // The Results\n        System.out.println(\"Read \"+bytesFromGZIPDirect+\" bytes from HTTP-&gt;GZIP\");\n        System.out.println(\"Read \"+bytesFromGZIPFile+\" bytes from HTTP-&gt;file-&gt;GZIP\");\n        System.out.println(\"Output from HTTP-&gt;GZIP saved to file \"+testGZFileName);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1553934,"reputation":480,"user_id":1445644,"accept_rate":50,"display_name":"askldjd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683773361,"creation_date":1683773361,"answer_id":76223833,"question_id":41400810,"body_markdown":"We recently experienced the same bug while we are trying to stream decode a large gzip file from AWS S3. We worked around the issue with [Apache Common&#39;s `GzipCompressorInputStream`][1] instead of the native `GzipInputStream`. Make sure you set `decompressConcatenated=true` in the constructor and GzipCompressorInputStream should be able to decode the S3 HTTPInputStream without the premature termination.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/compressors/gzip/GzipCompressorInputStream.html","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<p>We recently experienced the same bug while we are trying to stream decode a large gzip file from AWS S3. We worked around the issue with <a href=\"https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/compressors/gzip/GzipCompressorInputStream.html\" rel=\"nofollow noreferrer\">Apache Common's <code>GzipCompressorInputStream</code></a> instead of the native <code>GzipInputStream</code>. Make sure you set <code>decompressConcatenated=true</code> in the constructor and GzipCompressorInputStream should be able to decode the S3 HTTPInputStream without the premature termination.</p>\n"}],"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1810,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41476316,"answer_count":2,"score":8,"last_activity_date":1683773361,"creation_date":1483121970,"question_id":41400810,"body_markdown":"## Question ##\r\n\r\n*See updated question in edit section below*\r\n\r\nI&#39;m trying to decompress large (~300M) GZIPed files from Amazon S3 on the fly using GZIPInputStream but it only outputs a portion of the file; however, if I download to the filesystem before decompression then GZIPInputStream will decompress the entire file.\r\n\r\nHow can I get GZIPInputStream to decompress the entire HTTPInputStream and not just the first part of it?\r\n\r\n## What I&#39;ve Tried ##\r\n\r\n*see update in the edit section below*\r\n\r\nI suspected a HTTP problem except that no exceptions are ever thrown, GZIPInputStream returns a fairly consistent chunk of the file each time and, as far as I can tell, it always breaks on a WET record boundary although the boundary it picks is different for each URL (which is very strange as everything is being treated as a binary stream, no parsing of the WET records in the file is happening at all.)\r\n\r\nThe closest question I could find is \r\nhttps://stackoverflow.com/questions/31275728/gzipinputstream-is-prematurely-closed-when-reading-from-s3 The answer to that question was that some GZIP files are actually multiple appended GZIP files and GZIPInputStream doesn&#39;t handle that well. However, if that is the case here why would GZIPInputStream work fine on a local copy of the file?\r\n\r\n## Demonstration Code and Output ##\r\n\r\nBelow is a piece of sample code that demonstrates the problem I am seeing. I&#39;ve tested it with Java 1.8.0_72 and 1.8.0_112 on two different Linux computers on two different networks with similar results. I expect the byte count from the decompressed HTTPInputStream to be identical to the byte count from the decompressed local copy of the file, but the decompressed HTTPInputStream is much smaller.\r\n\r\n#### Output ####\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 87894 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile0.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 1772936 bytes from HTTP-&gt;GZIP\r\n    Read 451171329 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile40.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 89217 bytes from HTTP-&gt;GZIP\r\n    Read 453183600 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile500.wet\r\n\r\n#### Sample Code ####\r\n\r\n    import java.net.*;\r\n    import java.io.*;\r\n    import java.util.zip.GZIPInputStream;\r\n    import java.nio.channels.*;\r\n    \r\n    public class GZIPTest {\r\n        public static void main(String[] args) throws Exception {\r\n            // Our three test files from CommonCrawl\r\n            URL url0 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url40 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url500 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n            /*\r\n             * Test the URLs and display the results\r\n             */\r\n            test(url0, &quot;testfile0.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url40, &quot;testfile40.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url500, &quot;testfile500.wet&quot;);\r\n        }\r\n    \r\n        public static void test(URL url, String testGZFileName) throws Exception {\r\n            System.out.println(&quot;Testing URL &quot;+url.toString());\r\n    \r\n            // First directly wrap the HTTPInputStream with GZIPInputStream\r\n            // and count the number of bytes we read\r\n            // Go ahead and save the extracted stream to a file for further inspection\r\n            System.out.println(&quot;Testing HTTP Input Stream direct to GZIPInputStream&quot;);\r\n            int bytesFromGZIPDirect = 0;\r\n            URLConnection urlConnection = url.openConnection();\r\n            FileOutputStream directGZIPOutStream = new FileOutputStream(&quot;./&quot;+testGZFileName);\r\n\r\n            // FIRST TEST - Decompress from HTTPInputStream\r\n            GZIPInputStream gzipishttp = new GZIPInputStream(urlConnection.getInputStream());\r\n\r\n            byte[] buffer = new byte[1024];\r\n            int bytesRead = -1;\r\n            while ((bytesRead = gzipishttp.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPDirect += bytesRead;\r\n                directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\r\n            }\r\n            gzipishttp.close();\r\n            directGZIPOutStream.close();\r\n    \r\n            // Now save the GZIPed file locally\r\n            System.out.println(&quot;Testing saving to file before decompression&quot;);\r\n            int bytesFromGZIPFile = 0;\r\n            ReadableByteChannel rbc = Channels.newChannel(url.openStream());\r\n            FileOutputStream outputStream = new FileOutputStream(&quot;./test.wet.gz&quot;);\r\n            outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\r\n            outputStream.close();\r\n    \r\n            // SECOND TEST - decompress from FileInputStream\r\n            GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n    \r\n            buffer = new byte[1024];\r\n            bytesRead = -1;\r\n            while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPFile += bytesRead;\r\n            }\r\n            gzipis.close();\r\n    \r\n            // The Results - these numbers should match but they don&#39;t\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPDirect+&quot; bytes from HTTP-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPFile+&quot; bytes from HTTP-&gt;file-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Output from HTTP-&gt;GZIP saved to file &quot;+testGZFileName);\r\n        }\r\n    \r\n    }\r\n\r\n### Edit ###\r\n\r\nClosed Stream and associated Channel in demonstration code as per comment by @VGR.\r\n\r\n*UPDATE*:\r\n\r\nThe problem does seem to be something specific to the file. I pulled the Common Crawl WET archive down locally (wget), uncompressed it (gunzip 1.8), then recompressed it (gzip 1.8) and re-uploaded to S3 and the on-the-fly decompression then worked fine. You can see the test if you modify the sample code above to include the following lines:\r\n\r\n    // Original file from CommonCrawl hosted on S3\r\n    URL originals3 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    // Recompressed file hosted on S3\r\n    URL rezippeds3 = new URL(&quot;https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n    test(originals3, &quot;originalhost.txt&quot;);\r\n    test(rezippeds3, &quot;rezippedhost.txt&quot;);\r\n\r\nURL rezippeds3 points to the WET archive file that I downloaded, decompressed and recompressed, then re-uploaded to S3. You will see the following output:\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 7212400 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file originals3.txt\r\n    -----\r\n    Testing URL https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 448974935 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file rezippeds3.txt\r\n\r\nAs you can see once the file was recompressed I was able to stream it through GZIPInputStream and get the entire file. The original file still shows the usual premature end of the decompression. When I downloaded and uploaded the WET file without recompressing it I got the same incomplete streaming behavior so it was definitely the recompression that fixed it. I also put both files, the original and the recompressed, onto a traditional Apache web server and was able to replicate the results, so S3 doesn&#39;t seem to have anything to do with the problem.\r\n\r\nSo. I have a new question.\r\n\r\n## New Question ##\r\n\r\nWhy would a FileInputStream behave differently than a HTTPInputStream when reading the same content. If it is the exact same file why does:\r\n\r\nnew GZIPInputStream(urlConnection.getInputStream());\r\n\r\nbehave any differently than \r\n\r\nnew GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n\r\n?? Isn&#39;t an input stream just an input stream??","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<h2>Question</h2>\n\n<p><em>See updated question in edit section below</em></p>\n\n<p>I'm trying to decompress large (~300M) GZIPed files from Amazon S3 on the fly using GZIPInputStream but it only outputs a portion of the file; however, if I download to the filesystem before decompression then GZIPInputStream will decompress the entire file.</p>\n\n<p>How can I get GZIPInputStream to decompress the entire HTTPInputStream and not just the first part of it?</p>\n\n<h2>What I've Tried</h2>\n\n<p><em>see update in the edit section below</em></p>\n\n<p>I suspected a HTTP problem except that no exceptions are ever thrown, GZIPInputStream returns a fairly consistent chunk of the file each time and, as far as I can tell, it always breaks on a WET record boundary although the boundary it picks is different for each URL (which is very strange as everything is being treated as a binary stream, no parsing of the WET records in the file is happening at all.)</p>\n\n<p>The closest question I could find is \n<a href=\"https://stackoverflow.com/questions/31275728/gzipinputstream-is-prematurely-closed-when-reading-from-s3\">GZIPInputStream is prematurely closed when reading from s3</a> The answer to that question was that some GZIP files are actually multiple appended GZIP files and GZIPInputStream doesn't handle that well. However, if that is the case here why would GZIPInputStream work fine on a local copy of the file?</p>\n\n<h2>Demonstration Code and Output</h2>\n\n<p>Below is a piece of sample code that demonstrates the problem I am seeing. I've tested it with Java 1.8.0_72 and 1.8.0_112 on two different Linux computers on two different networks with similar results. I expect the byte count from the decompressed HTTPInputStream to be identical to the byte count from the decompressed local copy of the file, but the decompressed HTTPInputStream is much smaller.</p>\n\nOutput\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 87894 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile0.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 1772936 bytes from HTTP-&gt;GZIP\nRead 451171329 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile40.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 89217 bytes from HTTP-&gt;GZIP\nRead 453183600 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile500.wet\n</code></pre>\n\nSample Code\n\n<pre><code>import java.net.*;\nimport java.io.*;\nimport java.util.zip.GZIPInputStream;\nimport java.nio.channels.*;\n\npublic class GZIPTest {\n    public static void main(String[] args) throws Exception {\n        // Our three test files from CommonCrawl\n        URL url0 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url40 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url500 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\n        /*\n         * Test the URLs and display the results\n         */\n        test(url0, \"testfile0.wet\");\n        System.out.println(\"------\");\n        test(url40, \"testfile40.wet\");\n        System.out.println(\"------\");\n        test(url500, \"testfile500.wet\");\n    }\n\n    public static void test(URL url, String testGZFileName) throws Exception {\n        System.out.println(\"Testing URL \"+url.toString());\n\n        // First directly wrap the HTTPInputStream with GZIPInputStream\n        // and count the number of bytes we read\n        // Go ahead and save the extracted stream to a file for further inspection\n        System.out.println(\"Testing HTTP Input Stream direct to GZIPInputStream\");\n        int bytesFromGZIPDirect = 0;\n        URLConnection urlConnection = url.openConnection();\n        FileOutputStream directGZIPOutStream = new FileOutputStream(\"./\"+testGZFileName);\n\n        // FIRST TEST - Decompress from HTTPInputStream\n        GZIPInputStream gzipishttp = new GZIPInputStream(urlConnection.getInputStream());\n\n        byte[] buffer = new byte[1024];\n        int bytesRead = -1;\n        while ((bytesRead = gzipishttp.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPDirect += bytesRead;\n            directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\n        }\n        gzipishttp.close();\n        directGZIPOutStream.close();\n\n        // Now save the GZIPed file locally\n        System.out.println(\"Testing saving to file before decompression\");\n        int bytesFromGZIPFile = 0;\n        ReadableByteChannel rbc = Channels.newChannel(url.openStream());\n        FileOutputStream outputStream = new FileOutputStream(\"./test.wet.gz\");\n        outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\n        outputStream.close();\n\n        // SECOND TEST - decompress from FileInputStream\n        GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));\n\n        buffer = new byte[1024];\n        bytesRead = -1;\n        while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPFile += bytesRead;\n        }\n        gzipis.close();\n\n        // The Results - these numbers should match but they don't\n        System.out.println(\"Read \"+bytesFromGZIPDirect+\" bytes from HTTP-&gt;GZIP\");\n        System.out.println(\"Read \"+bytesFromGZIPFile+\" bytes from HTTP-&gt;file-&gt;GZIP\");\n        System.out.println(\"Output from HTTP-&gt;GZIP saved to file \"+testGZFileName);\n    }\n\n}\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>Closed Stream and associated Channel in demonstration code as per comment by @VGR.</p>\n\n<p><em>UPDATE</em>:</p>\n\n<p>The problem does seem to be something specific to the file. I pulled the Common Crawl WET archive down locally (wget), uncompressed it (gunzip 1.8), then recompressed it (gzip 1.8) and re-uploaded to S3 and the on-the-fly decompression then worked fine. You can see the test if you modify the sample code above to include the following lines:</p>\n\n<pre><code>// Original file from CommonCrawl hosted on S3\nURL originals3 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n// Recompressed file hosted on S3\nURL rezippeds3 = new URL(\"https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\ntest(originals3, \"originalhost.txt\");\ntest(rezippeds3, \"rezippedhost.txt\");\n</code></pre>\n\n<p>URL rezippeds3 points to the WET archive file that I downloaded, decompressed and recompressed, then re-uploaded to S3. You will see the following output:</p>\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 7212400 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file originals3.txt\n-----\nTesting URL https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 448974935 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file rezippeds3.txt\n</code></pre>\n\n<p>As you can see once the file was recompressed I was able to stream it through GZIPInputStream and get the entire file. The original file still shows the usual premature end of the decompression. When I downloaded and uploaded the WET file without recompressing it I got the same incomplete streaming behavior so it was definitely the recompression that fixed it. I also put both files, the original and the recompressed, onto a traditional Apache web server and was able to replicate the results, so S3 doesn't seem to have anything to do with the problem.</p>\n\n<p>So. I have a new question.</p>\n\n<h2>New Question</h2>\n\n<p>Why would a FileInputStream behave differently than a HTTPInputStream when reading the same content. If it is the exact same file why does:</p>\n\n<p>new GZIPInputStream(urlConnection.getInputStream());</p>\n\n<p>behave any differently than </p>\n\n<p>new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));</p>\n\n<p>?? Isn't an input stream just an input stream??</p>\n"},{"tags":["java","aws-lambda","reflection","properties"],"answers":[{"tags":[],"owner":{"account_id":18271532,"reputation":24,"user_id":13302222,"display_name":"Marzen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683773253,"creation_date":1683773253,"answer_id":76223824,"question_id":76220297,"body_markdown":"You can see the source codes of mybatis-plus to findout how it convert the SFunction to db columns. I found the codes in class `AbstractLambdaWrapper`.\r\nIt just read the lambda method name and remove &#39;get&#39;, then convert property to column.\r\nOr you could make the abstract service class implements `IService&lt;T&gt;` with Generic Type and make your services extends this abstract class .\r\n```\r\npublic abstract class AbstarctService&lt;T&gt; implements IService&lt;T&gt; {\r\n\r\n    public &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\r\n        return new LambdaQueryChainWrapper&lt;T&gt;(getBaseMapper())\r\n            .select(keyName())\r\n            .eq(lambda, value)\r\n            .getEntity();\r\n    }\r\n\r\n    abstract SFunction&lt;T, ?&gt; keyName();\r\n}\r\n```\r\nthese may help you in another way.","title":"How to convert lambda expression from a type to another type in Java?","body":"<p>You can see the source codes of mybatis-plus to findout how it convert the SFunction to db columns. I found the codes in class <code>AbstractLambdaWrapper</code>.\nIt just read the lambda method name and remove 'get', then convert property to column.\nOr you could make the abstract service class implements <code>IService&lt;T&gt;</code> with Generic Type and make your services extends this abstract class .</p>\n<pre><code>public abstract class AbstarctService&lt;T&gt; implements IService&lt;T&gt; {\n\n    public &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\n        return new LambdaQueryChainWrapper&lt;T&gt;(getBaseMapper())\n            .select(keyName())\n            .eq(lambda, value)\n            .getEntity();\n    }\n\n    abstract SFunction&lt;T, ?&gt; keyName();\n}\n</code></pre>\n<p>these may help you in another way.</p>\n"}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683773253,"creation_date":1683732943,"question_id":76220297,"body_markdown":"I&#39;m using mybatis-plus&#39;s `lambda chained query` and it looks like this\r\n\r\n```\r\nLong uid = new LambdaQueryChainWrapper(baseMapeer)\r\n            .select(User::getUid)\r\n            .eq(User::getUsername, username)\r\n            .get();\r\n```\r\n\r\nI think it&#39;s so tedious that I have to write every class, and sometimes I needed to add caching operations, so I write an abstract class to simplify the operation,  like this\r\n\r\n```\r\n// abstract service\r\npublic &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\r\n    // use mybatis-plus util\r\n    final String keyColumn = keyName();\r\n    // USE THIRD-PARTY LIBRARY REFLECTION UTIL\r\n    final String propertyName = reflectProperty(lambda);\r\n    // use mybatis-plus util\r\n    final String columnName = reflectColumn(propertyName);\r\n\r\n    return new QueryChainWrapper(baseMapper)\r\n             .select(keyColumn)\r\n             .eq(columnName, value)\r\n             .get();\r\n}\r\n\r\n// actual service\r\npublic Long getUid(String username) {\r\n    return getEntityByUniqueColumn(User::getUsername, username);\r\n}\r\n```\r\n\r\nI&#39;m using the &#39;de.cronn.reflection.util.PropertyUtils&#39; method to get propertyName through get lambda function\r\n\r\n```\r\nprivate String reflectPropertyName(SFunction&lt;T, ?&gt; getXxxSFunc) {\r\n    if (getXxxSFunc == null) return null;\r\n    try {\r\n        return PropertyUtils.getPropertyName(entityClass, getXxxSFunc::apply);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\n------\r\n\r\nNow the problem arises. PropertyUtils requires a lambda expression with a `TypedPropertyGetter` parameter, while my abstract method provides a lambda expression with an `SFunction` parameter.\r\n\r\nThe method signature of the former is `V get(T t)`, and the method signature of the latter is `V apply(T t)`. I tried to convert from SFunction to TypedPropertyGetter by using `lambda::apply`.\r\n\r\nBut I encountered an exception when I executed it. The reason is:\r\nPropertyUtils will eventually check whether the lambda method passed `is call site specific`. If it is, it throws an exception. This means that we cannot express lambda expressions by delegation (there are attributes inside), and we must pass this parameter by user-defined, such as User::getUsername.\r\n\r\n```\r\n// source-code\r\nprivate static void assertHasNoDeclaredFields(Object lambda) {\r\n\tif (hasDeclaredFields(lambda)) {\r\n\t\tthrow new IllegalArgumentException(lambda + &quot; is call site specific&quot;);\r\n\t}\r\n}\r\n\r\nprivate static boolean hasDeclaredFields(Object lambda) {\r\n\treturn lambda.getClass().getDeclaredFields().length &gt; 0;\r\n}\r\n```\r\n\r\nThere are many methods of abstract classes in my project. I want to know how to convert this lambda expression into another type without delegation.","title":"How to convert lambda expression from a type to another type in Java?","body":"<p>I'm using mybatis-plus's <code>lambda chained query</code> and it looks like this</p>\n<pre><code>Long uid = new LambdaQueryChainWrapper(baseMapeer)\n            .select(User::getUid)\n            .eq(User::getUsername, username)\n            .get();\n</code></pre>\n<p>I think it's so tedious that I have to write every class, and sometimes I needed to add caching operations, so I write an abstract class to simplify the operation,  like this</p>\n<pre><code>// abstract service\npublic &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\n    // use mybatis-plus util\n    final String keyColumn = keyName();\n    // USE THIRD-PARTY LIBRARY REFLECTION UTIL\n    final String propertyName = reflectProperty(lambda);\n    // use mybatis-plus util\n    final String columnName = reflectColumn(propertyName);\n\n    return new QueryChainWrapper(baseMapper)\n             .select(keyColumn)\n             .eq(columnName, value)\n             .get();\n}\n\n// actual service\npublic Long getUid(String username) {\n    return getEntityByUniqueColumn(User::getUsername, username);\n}\n</code></pre>\n<p>I'm using the 'de.cronn.reflection.util.PropertyUtils' method to get propertyName through get lambda function</p>\n<pre><code>private String reflectPropertyName(SFunction&lt;T, ?&gt; getXxxSFunc) {\n    if (getXxxSFunc == null) return null;\n    try {\n        return PropertyUtils.getPropertyName(entityClass, getXxxSFunc::apply);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<hr />\n<p>Now the problem arises. PropertyUtils requires a lambda expression with a <code>TypedPropertyGetter</code> parameter, while my abstract method provides a lambda expression with an <code>SFunction</code> parameter.</p>\n<p>The method signature of the former is <code>V get(T t)</code>, and the method signature of the latter is <code>V apply(T t)</code>. I tried to convert from SFunction to TypedPropertyGetter by using <code>lambda::apply</code>.</p>\n<p>But I encountered an exception when I executed it. The reason is:\nPropertyUtils will eventually check whether the lambda method passed <code>is call site specific</code>. If it is, it throws an exception. This means that we cannot express lambda expressions by delegation (there are attributes inside), and we must pass this parameter by user-defined, such as User::getUsername.</p>\n<pre><code>// source-code\nprivate static void assertHasNoDeclaredFields(Object lambda) {\n    if (hasDeclaredFields(lambda)) {\n        throw new IllegalArgumentException(lambda + &quot; is call site specific&quot;);\n    }\n}\n\nprivate static boolean hasDeclaredFields(Object lambda) {\n    return lambda.getClass().getDeclaredFields().length &gt; 0;\n}\n</code></pre>\n<p>There are many methods of abstract classes in my project. I want to know how to convert this lambda expression into another type without delegation.</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"comments":[{"owner":{"account_id":9197152,"reputation":1142,"user_id":6835509,"display_name":"Vasanth Subramanian"},"score":1,"creation_date":1683772795,"post_id":76223770,"comment_id":134418945,"body_markdown":"As per this article https://www.baeldung.com/spring-boot-formatting-json-dates, its mentioned &quot;Unfortunately, it doesn&#39;t work with the Java 8 date types, such as LocalDate and LocalDateTime. We can only use it to format fields of the type java.util.Date or the java.util.Calendar&quot;","body":"As per this article <a href=\"https://www.baeldung.com/spring-boot-formatting-json-dates\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-formatting-json-dates</a>, its mentioned &quot;Unfortunately, it doesn&#39;t work with the Java 8 date types, such as LocalDate and LocalDateTime. We can only use it to format fields of the type java.util.Date or the java.util.Calendar&quot;"},{"owner":{"account_id":6524069,"reputation":715,"user_id":5047297,"accept_rate":53,"display_name":"WestFarmer"},"score":0,"creation_date":1683774322,"post_id":76223770,"comment_id":134419088,"body_markdown":"it&#39;s the @EnableWebMVC preventing jackson configuration works....","body":"it&#39;s the @EnableWebMVC preventing jackson configuration works...."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683783607,"post_id":76223770,"comment_id":134420047,"body_markdown":"https://mvnrepository.com/artifact/com.fasterxml.jackson.datatype/jackson-datatype-jsr310","body":"<a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.datatype/jackson-datatype-jsr310\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.fasterxml.jackson.datatype/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1683783859,"post_id":76223770,"comment_id":134420079,"body_markdown":"Remove the `@EnableWebMvc` as that disables auto configuration of the web and jackson parts. Even better ditch the whole class and just add `spring.jackson.default-property-inclusion=NON_NULL` which achieves the same.","body":"Remove the <code>@EnableWebMvc</code> as that disables auto configuration of the web and jackson parts. Even better ditch the whole class and just add <code>spring.jackson.default-property-inclusion=NON_NULL</code> which achieves the same."}],"owner":{"account_id":6524069,"reputation":715,"user_id":5047297,"accept_rate":53,"display_name":"WestFarmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683772730,"creation_date":1683772222,"question_id":76223770,"body_markdown":"spring boot version: 2.7.8\r\n\r\nI want to set a global format for all `java.util.Date` and date time types in `java.time.*`\r\n\r\nwhat I have tried:\r\n\r\nsetting in application.yml:\r\n```\r\napp:\r\n  dateFormat: &quot;yyyy/MM/dd&quot;\r\n  timeFormat: &quot;HH:mm:ss&quot;\r\n\r\nspring\r\n  jackson:\r\n    date-format: &quot;yyyy-MM-dd HH:mm:ss&quot;\r\n```\r\n\r\nthis is not working, all date types is still formatted as long.\r\n\r\n```java\r\n@Configuration\r\npublic class JacksonConfig {\r\n\t@Value(&quot;${app.dateFormat}&quot;)\r\n\tprivate String dateFormat;\r\n\t\r\n\t@Value(&quot;${app.dateFormat} ${app.timeFormat}&quot;)\r\n\tprivate String dateTimeFormat;\r\n\t\r\n\t\r\n\t@Bean\r\n\tpublic Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\r\n       System.out.println(&quot;---------------&quot;);\r\n\t\treturn builder -&gt; {\r\n\t\t\tbuilder.simpleDateFormat(dateFormat);\r\n\t\t\tbuilder.serializers(new LocalDateSerializer(DateTimeFormatter.ofPattern(dateFormat)));\r\n\t\t\tbuilder.serializers(new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(dateTimeFormat)));\r\n\t\t};\r\n\t}\r\n}\r\n``` \r\n\r\nthis is not working too, all date types is still formatted as long. but the `System.out.println(&quot;---------------&quot;)` is executed, so it&#39;s picked up by spring.\r\n\r\nI have another configuration class, which config jackson to ignore null properties, if that matters.\r\n\r\n```java\r\n@Configuration\r\n@EnableWebMvc\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\t\r\n\t@Override\r\n\tpublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\t\tconverters.forEach(c -&gt; {\r\n\t\t\tif(c instanceof MappingJackson2HttpMessageConverter) {\r\n\t\t\t\tMappingJackson2HttpMessageConverter jc = (MappingJackson2HttpMessageConverter)c;\r\n\t\t\t\tjc.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n\t\t\t}\r\n\t\t});\r\n\t\tWebMvcConfigurer.super.extendMessageConverters(converters);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nplease give me some hint.","title":"Why set datetime format for jackson not works","body":"<p>spring boot version: 2.7.8</p>\n<p>I want to set a global format for all <code>java.util.Date</code> and date time types in <code>java.time.*</code></p>\n<p>what I have tried:</p>\n<p>setting in application.yml:</p>\n<pre><code>app:\n  dateFormat: &quot;yyyy/MM/dd&quot;\n  timeFormat: &quot;HH:mm:ss&quot;\n\nspring\n  jackson:\n    date-format: &quot;yyyy-MM-dd HH:mm:ss&quot;\n</code></pre>\n<p>this is not working, all date types is still formatted as long.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JacksonConfig {\n    @Value(&quot;${app.dateFormat}&quot;)\n    private String dateFormat;\n    \n    @Value(&quot;${app.dateFormat} ${app.timeFormat}&quot;)\n    private String dateTimeFormat;\n    \n    \n    @Bean\n    public Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\n       System.out.println(&quot;---------------&quot;);\n        return builder -&gt; {\n            builder.simpleDateFormat(dateFormat);\n            builder.serializers(new LocalDateSerializer(DateTimeFormatter.ofPattern(dateFormat)));\n            builder.serializers(new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(dateTimeFormat)));\n        };\n    }\n}\n</code></pre>\n<p>this is not working too, all date types is still formatted as long. but the <code>System.out.println(&quot;---------------&quot;)</code> is executed, so it's picked up by spring.</p>\n<p>I have another configuration class, which config jackson to ignore null properties, if that matters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    \n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.forEach(c -&gt; {\n            if(c instanceof MappingJackson2HttpMessageConverter) {\n                MappingJackson2HttpMessageConverter jc = (MappingJackson2HttpMessageConverter)c;\n                jc.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\n            }\n        });\n        WebMvcConfigurer.super.extendMessageConverters(converters);\n    }\n\n}\n</code></pre>\n<p>please give me some hint.</p>\n"},{"tags":["java","spring-boot","http","utf-8","content-disposition"],"comments":[{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":0,"creation_date":1683694580,"post_id":76212138,"comment_id":134403927,"body_markdown":"a) Which browser? b) Are the field values the same for both Spring versions?","body":"a) Which browser? b) Are the field values the same for both Spring versions?"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1683694935,"post_id":76212138,"comment_id":134403965,"body_markdown":"a) I am using chrome browser, b) field values are same for both spring versions....what I observe is if I use the springboot ver 2.6.11, I have a `content-disposition` info on the response....but if I use springboot ver 2.7.11, there is no `content-disposition` info on the response","body":"a) I am using chrome browser, b) field values are same for both spring versions....what I observe is if I use the springboot ver 2.6.11, I have a <code>content-disposition</code> info on the response....but if I use springboot ver 2.7.11, there is no <code>content-disposition</code> info on the response"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1683707832,"post_id":76212138,"comment_id":134406368,"body_markdown":"additonal info, it only happens that the `content-disposition` is not shown when the filename I used is in Japanese characters....using english characters, there is a `content-disposition` informatiom","body":"additonal info, it only happens that the <code>content-disposition</code> is not shown when the filename I used is in Japanese characters....using english characters, there is a <code>content-disposition</code> informatiom"}],"answers":[{"tags":[],"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683724486,"creation_date":1683724486,"answer_id":76218892,"question_id":76212138,"body_markdown":"The problem likely is caused by literal non-ASCII characters in the field value, which might cause Spring not to set the value at all.\r\n\r\nRemove the &quot;filename&quot; (not &quot;filename*&quot;) parameter and try again.","title":"Content-Disposition filename not being set correctly in Spring Boot 2.7.11","body":"<p>The problem likely is caused by literal non-ASCII characters in the field value, which might cause Spring not to set the value at all.</p>\n<p>Remove the &quot;filename&quot; (not &quot;filename*&quot;) parameter and try again.</p>\n"}],"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76218892,"answer_count":1,"score":0,"last_activity_date":1683772371,"creation_date":1683654518,"question_id":76212138,"body_markdown":"I&#39;m using Spring Boot 2.7.11 and I&#39;m having an issue with the Content-Disposition header not being set correctly when downloading a file with a Japanese filename. Specifically, when I download the file, the filename is being changed to &quot;files.zip&quot; instead of the correct filename.\r\n\r\nI&#39;ve confirmed that the filename is being passed correctly to the writeContentDisposition() method, and I&#39;m setting the Content-Disposition header correctly with the filename parameter encoded as UTF-8.\r\n\r\nHere&#39;s an example of the header value that I&#39;m passing:\r\n\r\n```\r\nattachment; filename=&quot;Êó•Êú¨Ë™ûÈ†ëÂºµ„Çã.zip&quot;; filename*=UTF-8&#39;&#39;%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%83%86%E3%82%B9%E3%83%88.zip\r\n```\r\n\r\nThis works correctly in Spring Boot 2.6.11, but in Spring Boot 2.7.11, the downloaded file is named &quot;files.zip&quot; instead of the correct filename.\r\n\r\nHere&#39;s the code that I&#39;m using to set the Content-Disposition header:\r\n\r\n```\r\npublic static void setContentDisposition(\r\n    HttpServletResponse response, String filename, boolean download) {\r\n        String encodedFilename = UriUtils.encode(filename, StandardCharsets.UTF_8).replaceAll(&quot;\\\\+&quot;,\r\n   &quot;%20&quot;);\r\n      String disposition = (download ? &quot;attachment&quot; : &quot;inline&quot;) +\r\n        &quot;; filename=\\&quot;&quot; + filename + &quot;\\&quot;&quot; +\r\n        &quot;; filename*=UTF-8&#39;&#39;&quot; + encodedFilename;\r\n      response.setHeader(HttpHeaders.CONTENT_DISPOSITION, disposition);\r\n}\r\n```\r\n\r\nI&#39;m not sure why this isn&#39;t working in Spring Boot 2.7.11. Can anyone help me figure out what might be causing this issue?\r\n\r\n","title":"Content-Disposition filename not being set correctly in Spring Boot 2.7.11","body":"<p>I'm using Spring Boot 2.7.11 and I'm having an issue with the Content-Disposition header not being set correctly when downloading a file with a Japanese filename. Specifically, when I download the file, the filename is being changed to &quot;files.zip&quot; instead of the correct filename.</p>\n<p>I've confirmed that the filename is being passed correctly to the writeContentDisposition() method, and I'm setting the Content-Disposition header correctly with the filename parameter encoded as UTF-8.</p>\n<p>Here's an example of the header value that I'm passing:</p>\n<pre><code>attachment; filename=&quot;Êó•Êú¨Ë™ûÈ†ëÂºµ„Çã.zip&quot;; filename*=UTF-8''%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%83%86%E3%82%B9%E3%83%88.zip\n</code></pre>\n<p>This works correctly in Spring Boot 2.6.11, but in Spring Boot 2.7.11, the downloaded file is named &quot;files.zip&quot; instead of the correct filename.</p>\n<p>Here's the code that I'm using to set the Content-Disposition header:</p>\n<pre><code>public static void setContentDisposition(\n    HttpServletResponse response, String filename, boolean download) {\n        String encodedFilename = UriUtils.encode(filename, StandardCharsets.UTF_8).replaceAll(&quot;\\\\+&quot;,\n   &quot;%20&quot;);\n      String disposition = (download ? &quot;attachment&quot; : &quot;inline&quot;) +\n        &quot;; filename=\\&quot;&quot; + filename + &quot;\\&quot;&quot; +\n        &quot;; filename*=UTF-8''&quot; + encodedFilename;\n      response.setHeader(HttpHeaders.CONTENT_DISPOSITION, disposition);\n}\n</code></pre>\n<p>I'm not sure why this isn't working in Spring Boot 2.7.11. Can anyone help me figure out what might be causing this issue?</p>\n"},{"tags":["java","regex","email"],"answers":[{"tags":[],"owner":{"account_id":14348046,"reputation":30,"user_id":20448104,"display_name":"Najam Ul Saqib"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1683741387,"creation_date":1683741387,"answer_id":76221347,"question_id":76221333,"body_markdown":"The regex you provided is a basic email validation pattern, and it seems to meet your requirements as described. However, it is not very strict and may allow some invalid email addresses to pass through. Here&#39;s the regex you provided:\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\r\n\r\nThis regex will match email addresses with the format you described, ignoring leading and trailing whitespace, and requiring at least one character for the username, domain, and domain extension. However, it does not impose any restrictions on the types of characters that can appear in the username, domain, or domain extension.\r\n\r\nIf you want to improve the regex to be slightly more strict, you can use the following pattern:\r\n\r\n\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*([\\\\w!#$%&amp;&#39;*+\\\\-/=?^_`{|}~]+(?:\\\\.[\\\\w!#$%&amp;&#39;*+\\\\-/=?^_`{|}~]+)*)@([\\\\w](?:[\\\\w-]*[\\\\w])?\\\\.)+[a-zA-Z]{2,}\\\\s*$&quot;;\r\n\r\nThis pattern allows for a wider range of valid characters in the username and domain, while also checking for valid domain extensions consisting of at least two alphabetic characters. However, it still may not cover all valid email addresses or reject all invalid ones.\r\n\r\nThe Apache Commons EmailValidator is more comprehensive in its validation, but as you mentioned, it may not suit your use case. If the regex pattern above works for your specific requirements, then you can use it for your basic email validation.","title":"Java regex basic email validation","body":"<p>The regex you provided is a basic email validation pattern, and it seems to meet your requirements as described. However, it is not very strict and may allow some invalid email addresses to pass through. Here's the regex you provided:</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\n</code></pre>\n<p>This regex will match email addresses with the format you described, ignoring leading and trailing whitespace, and requiring at least one character for the username, domain, and domain extension. However, it does not impose any restrictions on the types of characters that can appear in the username, domain, or domain extension.</p>\n<p>If you want to improve the regex to be slightly more strict, you can use the following pattern:</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*([\\\\w!#$%&amp;'*+\\\\-/=?^_`{|}~]+(?:\\\\.[\\\\w!#$%&amp;'*+\\\\-/=?^_`{|}~]+)*)@([\\\\w](?:[\\\\w-]*[\\\\w])?\\\\.)+[a-zA-Z]{2,}\\\\s*$&quot;;\n</code></pre>\n<p>This pattern allows for a wider range of valid characters in the username and domain, while also checking for valid domain extensions consisting of at least two alphabetic characters. However, it still may not cover all valid email addresses or reject all invalid ones.</p>\n<p>The Apache Commons EmailValidator is more comprehensive in its validation, but as you mentioned, it may not suit your use case. If the regex pattern above works for your specific requirements, then you can use it for your basic email validation.</p>\n"}],"owner":{"account_id":16704955,"reputation":423,"user_id":15407955,"display_name":"user124"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1683741732,"accepted_answer_id":76221347,"answer_count":1,"score":-1,"last_activity_date":1683772063,"creation_date":1683741219,"question_id":76221333,"body_markdown":"I want to do basic email validation in java using regex and I came up with following regex\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\r\n    \r\n    If we take test@gmail.com under this regex.\r\n    \r\n    1. Ignore starting and trailing white spaces.\r\n    2. 1 or more char for username  (test)\r\n    3. @\r\n    4. one or more char for domain (gmail)\r\n    5. .\r\n    6. one or more char for domain extension(com).\r\n\r\nIs it correct as per my requirement?\r\n\r\nI have checked Apache EmailValidator but it does some validation of domain also, eg. when i tried it with test@gmail.adpcc, then it did not work. And I want it to work as per my use case.\r\n","title":"Java regex basic email validation","body":"<p>I want to do basic email validation in java using regex and I came up with following regex</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\n\nIf we take test@gmail.com under this regex.\n\n1. Ignore starting and trailing white spaces.\n2. 1 or more char for username  (test)\n3. @\n4. one or more char for domain (gmail)\n5. .\n6. one or more char for domain extension(com).\n</code></pre>\n<p>Is it correct as per my requirement?</p>\n<p>I have checked Apache EmailValidator but it does some validation of domain also, eg. when i tried it with test@gmail.adpcc, then it did not work. And I want it to work as per my use case.</p>\n"},{"tags":["java","mysql","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":111584,"reputation":2209,"user_id":294696,"accept_rate":100,"display_name":"Mikk"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1424211124,"creation_date":1424211124,"answer_id":28572095,"question_id":28571848,"body_markdown":"You can try:\r\n\r\n    @Entity\r\n    @Table(name = &quot;ITEMS_TO_REGISTER&quot;)\r\n    public class ItemsToRegister implements Serializable {\r\n       ...","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You can try:</p>\n\n<pre><code>@Entity\n@Table(name = \"ITEMS_TO_REGISTER\")\npublic class ItemsToRegister implements Serializable {\n   ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5703004,"reputation":524,"user_id":4507438,"display_name":"John Thompson"},"down_vote_count":3,"up_vote_count":19,"is_accepted":false,"score":16,"last_activity_date":1424223009,"creation_date":1424223009,"answer_id":28574416,"question_id":28571848,"body_markdown":"You&#39;ll need to escape the table name with tics(`) to make it case sensitive. \r\n\r\n    @Table(name = &quot;`ITEMS_TO_REGISTER`&quot;)","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You'll need to escape the table name with tics(`) to make it case sensitive. </p>\n\n<pre><code>@Table(name = \"`ITEMS_TO_REGISTER`\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2416768,"reputation":906,"user_id":2110628,"accept_rate":57,"display_name":"carlj"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1571885045,"creation_date":1424811758,"answer_id":28706179,"question_id":28571848,"body_markdown":"The solution is to add: \r\n\r\n    spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy\r\n\r\nto `application.properties`\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>The solution is to add: </p>\n\n<pre><code>spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy\n</code></pre>\n\n<p>to <code>application.properties</code></p>\n"},{"tags":[],"owner":{"account_id":8947834,"reputation":1896,"user_id":6674574,"display_name":"jasonleakey"},"down_vote_count":0,"up_vote_count":169,"is_accepted":true,"score":169,"last_activity_date":1472406635,"creation_date":1472406635,"answer_id":39194169,"question_id":28571848,"body_markdown":"On hibernate 5, it would be \r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\nin your **application.properties** file. ","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>On hibernate 5, it would be </p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n\n<p>in your <strong>application.properties</strong> file. </p>\n"},{"tags":[],"owner":{"account_id":4143810,"reputation":501,"user_id":3398188,"display_name":"SekharKari"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1495826248,"creation_date":1495825900,"answer_id":44208675,"question_id":28571848,"body_markdown":"As @jasonleakey suggested we can consider using naming-strategy as below.\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\nthis tells Hibernate to generate SQL&#39;s as exactly as specified in the @Table (name=&quot; &quot;) or @Column(name=&quot; &quot;). All well.\r\n\r\nBut keep in mind - while using PhysicalNamingStrategy without @Table, @Column annotations in the entity class, hibernate generates SQL using class name and variable names.  Consider the below java class\r\n\r\n    Class Employee {\r\n       private String firstName;\r\n       private String lastName; \r\n    }\r\n\r\nthen the generated sql would be,\r\n\r\n    select employee0_.firstName,employee0_lastName from Employee employee0_;\r\n\r\nUnfortunately this is not a great choice as typically we would have defined the columns in DB as FIRST_NAME and LAST_NAME and table name as EMPLOYEE. Had you not used PhysicalNamingStrategy the SQL would have been\r\n\r\n    select employee0_.first_name,employee0_last_name from employee employee0_;\r\n\r\nso it&#39;s really a choice between the below two options.\r\n\r\n \r\n\r\n - Use PhysicalStrategy and explicitly define all tables names/column names in java code with @Table and @Column annotations.\r\n &lt;br&gt;or \r\n - Define lowercase table name in db and let hibernate automatically generate table names/column names for us.","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>As @jasonleakey suggested we can consider using naming-strategy as below.</p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n\n<p>this tells Hibernate to generate SQL's as exactly as specified in the @Table (name=\" \") or @Column(name=\" \"). All well.</p>\n\n<p>But keep in mind - while using PhysicalNamingStrategy without @Table, @Column annotations in the entity class, hibernate generates SQL using class name and variable names.  Consider the below java class</p>\n\n<pre><code>Class Employee {\n   private String firstName;\n   private String lastName; \n}\n</code></pre>\n\n<p>then the generated sql would be,</p>\n\n<pre><code>select employee0_.firstName,employee0_lastName from Employee employee0_;\n</code></pre>\n\n<p>Unfortunately this is not a great choice as typically we would have defined the columns in DB as FIRST_NAME and LAST_NAME and table name as EMPLOYEE. Had you not used PhysicalNamingStrategy the SQL would have been</p>\n\n<pre><code>select employee0_.first_name,employee0_last_name from employee employee0_;\n</code></pre>\n\n<p>so it's really a choice between the below two options.</p>\n\n<ul>\n<li>Use PhysicalStrategy and explicitly define all tables names/column names in java code with @Table and @Column annotations.\n<br>or </li>\n<li>Define lowercase table name in db and let hibernate automatically generate table names/column names for us.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3910972,"reputation":129,"user_id":3236321,"display_name":"mjassani"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501601309,"creation_date":1501601309,"answer_id":45441904,"question_id":28571848,"body_markdown":"You can implement your own strategy and invoke it from application.properties:\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=com.proto.CustomPhysicalNamingStrategy\r\n\r\nBellow an example that always capitalize the first letter \r\n\r\n    import java.io.Serializable;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.hibernate.boot.model.naming.Identifier;\r\n    import org.hibernate.boot.model.naming.PhysicalNamingStrategy;\r\n    import org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;\r\n    \r\n    public class CustomPhysicalNamingStrategy implements PhysicalNamingStrategy, Serializable {\r\n    \t/**\r\n    \t * Singleton access\r\n    \t */\r\n    \tpublic static final CustomPhysicalNamingStrategy INSTANCE = new CustomPhysicalNamingStrategy();\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalCatalogName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalSchemaName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalTableName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalSequenceName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalColumnName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \t\r\n    \tprivate Identifier capitalize(Identifier name) {\r\n    \t\tif (name == null)\r\n    \t\t\treturn null;\r\n    \t\tif (name.isQuoted())\r\n    \t\t\treturn name;\r\n    \t\tString text = StringUtils.capitalize(name.getText());\r\n    \t\treturn Identifier.toIdentifier(text);\r\n    \t}\r\n    }\r\n\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You can implement your own strategy and invoke it from application.properties:</p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=com.proto.CustomPhysicalNamingStrategy\n</code></pre>\n\n<p>Bellow an example that always capitalize the first letter </p>\n\n<pre><code>import java.io.Serializable;\nimport org.apache.commons.lang3.StringUtils;\nimport org.hibernate.boot.model.naming.Identifier;\nimport org.hibernate.boot.model.naming.PhysicalNamingStrategy;\nimport org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;\n\npublic class CustomPhysicalNamingStrategy implements PhysicalNamingStrategy, Serializable {\n    /**\n     * Singleton access\n     */\n    public static final CustomPhysicalNamingStrategy INSTANCE = new CustomPhysicalNamingStrategy();\n\n    @Override\n    public Identifier toPhysicalCatalogName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalSchemaName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalTableName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalSequenceName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalColumnName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    private Identifier capitalize(Identifier name) {\n        if (name == null)\n            return null;\n        if (name.isQuoted())\n            return name;\n        String text = StringUtils.capitalize(name.getText());\n        return Identifier.toIdentifier(text);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12381428,"reputation":809,"user_id":9026870,"display_name":"Oleh Tatsiun"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1635596279,"creation_date":1635596279,"answer_id":69779561,"question_id":28571848,"body_markdown":"I use H2 database in the example.\r\n\r\nMaking table name &quot;user&quot; with backticks will give you lowercase table name in your database.\r\n\r\nEntity class:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTable name in the database:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nP.S. You can name entity as &quot;User&quot;(uppercase) it will give you &quot;user&quot;(lowercase) anyway\r\n\r\nSource:\r\nhttp://coddingbuddy.com/article/56566857/jpa-uppercase-table-names\r\n\r\n  [1]: https://i.stack.imgur.com/6Hvzk.png\r\n  [2]: https://i.stack.imgur.com/s9izw.png","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>I use H2 database in the example.</p>\n<p>Making table name &quot;user&quot; with backticks will give you lowercase table name in your database.</p>\n<p>Entity class:</p>\n<p><a href=\"https://i.stack.imgur.com/6Hvzk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Hvzk.png\" alt=\"enter image description here\" /></a></p>\n<p>Table name in the database:</p>\n<p><a href=\"https://i.stack.imgur.com/s9izw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s9izw.png\" alt=\"enter image description here\" /></a></p>\n<p>P.S. You can name entity as &quot;User&quot;(uppercase) it will give you &quot;user&quot;(lowercase) anyway</p>\n<p>Source:\n<a href=\"http://coddingbuddy.com/article/56566857/jpa-uppercase-table-names\" rel=\"nofollow noreferrer\">http://coddingbuddy.com/article/56566857/jpa-uppercase-table-names</a></p>\n"},{"tags":[],"owner":{"account_id":1400419,"reputation":1726,"user_id":1329308,"display_name":"Vadim Zin4uk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665034267,"creation_date":1665034267,"answer_id":73969010,"question_id":28571848,"body_markdown":"Try this property:\r\n\r\n    spring:\r\n      jpa:\r\n        properties:\r\n          hibernate:\r\n            globally_quoted_identifiers: true","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>Try this property:</p>\n<pre><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        globally_quoted_identifiers: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3975546,"reputation":8098,"user_id":3278822,"accept_rate":74,"display_name":"DDan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683771574,"creation_date":1683771574,"answer_id":76223719,"question_id":28571848,"body_markdown":"If you are using yml configuration, add this:\r\n\r\n    spring:\r\n      jpa:\r\n        hibernate:\r\n          naming:\r\n            physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>If you are using yml configuration, add this:</p>\n<pre><code>spring:\n  jpa:\n    hibernate:\n      naming:\n        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n"}],"owner":{"account_id":2416768,"reputation":906,"user_id":2110628,"accept_rate":57,"display_name":"carlj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113460,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":39194169,"answer_count":9,"score":71,"last_activity_date":1683771574,"creation_date":1424210084,"question_id":28571848,"body_markdown":"i have a table entity mapped as : \r\n    \r\n    @Entity\r\n    public class ItemsToRegister implements Serializable{\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_ITEM_TO_REGISTER&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private int id;\r\n    .....\r\n\r\nWhen i try to insert new record in database, the table name was translated in lowercase as : items_to_register , but my table name is ITEMS_TO_REGISTER\r\nHow can i fix my problem without change MySql configuration? (my.cnf) \r\n\r\nI have in my application.properties file : \r\n\r\n    spring.jpa.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.hibernate.naming_strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>i have a table entity mapped as : </p>\n\n<pre><code>@Entity\npublic class ItemsToRegister implements Serializable{\n\n@Id\n@Column(name = \"ID_ITEM_TO_REGISTER\")\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate int id;\n.....\n</code></pre>\n\n<p>When i try to insert new record in database, the table name was translated in lowercase as : items_to_register , but my table name is ITEMS_TO_REGISTER\nHow can i fix my problem without change MySql configuration? (my.cnf) </p>\n\n<p>I have in my application.properties file : </p>\n\n<pre><code>spring.jpa.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.naming_strategy = org.hibernate.cfg.ImprovedNamingStrategy\n</code></pre>\n"},{"tags":["java","dnsjava"],"owner":{"account_id":229213,"reputation":8557,"user_id":492015,"accept_rate":68,"display_name":"Arya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683771053,"creation_date":1683771053,"question_id":76223689,"body_markdown":"I have noticed that when checking some domains using the DNSJava library it take a very long time to get dns records.\r\n\r\nThis is the code I am using\r\n\r\n\r\n       private void dnsCheck(DomainName domainName) {\r\n            try {\r\n                final long startTime = System.currentTimeMillis();\r\n                Record[] recordsA = new Lookup(domainName.getDomainName(), Type.A).run();\r\n                Record[] recordsAAAA = new Lookup(domainName.getDomainName(), Type.AAAA).run();\r\n                Record[] recordsCNAME = new Lookup(domainName.getDomainName(), Type.CNAME).run();\r\n                Record[] recordsMX = new Lookup(domainName.getDomainName(), Type.MX).run();\r\n                Record[] recordsNS = new Lookup(domainName.getDomainName(), Type.NS).run();\r\n                Record[] recordsPTR = new Lookup(domainName.getDomainName(), Type.PTR).run();\r\n                Record[] recordsSRV = new Lookup(domainName.getDomainName(), Type.SRV).run();\r\n                Record[] recordsSOA = new Lookup(domainName.getDomainName(), Type.SOA).run();\r\n                Record[] recordsTXT = new Lookup(domainName.getDomainName(), Type.TXT).run();\r\n                Record[] recordsCAA = new Lookup(domainName.getDomainName(), Type.CAA).run();\r\n                Record[] recordsDS = new Lookup(domainName.getDomainName(), Type.DS).run();\r\n                Record[] recordsDNSKEY = new Lookup(domainName.getDomainName(), Type.DNSKEY).run();\r\n                final long endTime = System.currentTimeMillis();\r\n    \r\n                System.out.println(&quot;Total execution time for domain: &quot; + domainName.getDomainName() + &quot; &quot; + (endTime - startTime));\r\n          ....\r\n          ....\r\n           } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\nThe domain names below take a very long time to return results\r\n\r\n    webdddd.com 66042 milliseconds\r\n    gotest.com 16114 milliseconds\r\n    testblog.com 27575 milliseconds\r\n    testapp.com 66283 milliseconds\r\n\r\nBut the following come back fast\r\n\r\n    prodddd.com 115 milliseconds\r\n    ddddmedia.com 179 milliseconds\r\n    greendddd.com 598 milliseconds\r\n    ddddbox.com 619 milliseconds\r\n\r\nAm I not using DNSJava correctly? Is there anything I can do to get the results faster?","title":"Checking some domains takes a very long time with DNSJava","body":"<p>I have noticed that when checking some domains using the DNSJava library it take a very long time to get dns records.</p>\n<p>This is the code I am using</p>\n<pre><code>   private void dnsCheck(DomainName domainName) {\n        try {\n            final long startTime = System.currentTimeMillis();\n            Record[] recordsA = new Lookup(domainName.getDomainName(), Type.A).run();\n            Record[] recordsAAAA = new Lookup(domainName.getDomainName(), Type.AAAA).run();\n            Record[] recordsCNAME = new Lookup(domainName.getDomainName(), Type.CNAME).run();\n            Record[] recordsMX = new Lookup(domainName.getDomainName(), Type.MX).run();\n            Record[] recordsNS = new Lookup(domainName.getDomainName(), Type.NS).run();\n            Record[] recordsPTR = new Lookup(domainName.getDomainName(), Type.PTR).run();\n            Record[] recordsSRV = new Lookup(domainName.getDomainName(), Type.SRV).run();\n            Record[] recordsSOA = new Lookup(domainName.getDomainName(), Type.SOA).run();\n            Record[] recordsTXT = new Lookup(domainName.getDomainName(), Type.TXT).run();\n            Record[] recordsCAA = new Lookup(domainName.getDomainName(), Type.CAA).run();\n            Record[] recordsDS = new Lookup(domainName.getDomainName(), Type.DS).run();\n            Record[] recordsDNSKEY = new Lookup(domainName.getDomainName(), Type.DNSKEY).run();\n            final long endTime = System.currentTimeMillis();\n\n            System.out.println(&quot;Total execution time for domain: &quot; + domainName.getDomainName() + &quot; &quot; + (endTime - startTime));\n      ....\n      ....\n       } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>The domain names below take a very long time to return results</p>\n<pre><code>webdddd.com 66042 milliseconds\ngotest.com 16114 milliseconds\ntestblog.com 27575 milliseconds\ntestapp.com 66283 milliseconds\n</code></pre>\n<p>But the following come back fast</p>\n<pre><code>prodddd.com 115 milliseconds\nddddmedia.com 179 milliseconds\ngreendddd.com 598 milliseconds\nddddbox.com 619 milliseconds\n</code></pre>\n<p>Am I not using DNSJava correctly? Is there anything I can do to get the results faster?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683771515,"post_id":76223683,"comment_id":134418805,"body_markdown":"Please share the dependency in the pom. Check if there is a conflicting version from a transitive dependency.","body":"Please share the dependency in the pom. Check if there is a conflicting version from a transitive dependency."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683783081,"post_id":76223683,"comment_id":134419978,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28366390,"reputation":1,"user_id":21695640,"display_name":"hld942614"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683771004,"creation_date":1683771004,"question_id":76223683,"body_markdown":"when I try to use ContainerFactory in my projectÔºåI got error message &quot;java.lang.NoClassDefFoundError: javax/json/JsonValue&quot;„ÄÇBut I already add dependency &quot;jakarta.json-api 2.0.1 version&quot; in my pom.xml; However when I use the lower version &quot;jakarta.json-api 1.1.6&quot; ,it work well. \r\nMy question is that this &quot;javax/json/JsonValue&quot; doesn&#39;t exist in 2.0.1 version but in 1.1.6 version?\r\n\r\n\r\nI am try to figure out that &quot;javax/json/JsonValue&quot; exist in &quot;jakarta.json-api 2.0.1 version&quot; or not","title":"java.lang.NoClassDefFoundError: javax/json/JsonValue","body":"<p>when I try to use ContainerFactory in my projectÔºåI got error message &quot;java.lang.NoClassDefFoundError: javax/json/JsonValue&quot;„ÄÇBut I already add dependency &quot;jakarta.json-api 2.0.1 version&quot; in my pom.xml; However when I use the lower version &quot;jakarta.json-api 1.1.6&quot; ,it work well.\nMy question is that this &quot;javax/json/JsonValue&quot; doesn't exist in 2.0.1 version but in 1.1.6 version?</p>\n<p>I am try to figure out that &quot;javax/json/JsonValue&quot; exist in &quot;jakarta.json-api 2.0.1 version&quot; or not</p>\n"},{"tags":["java","spring-boot","elasticsearch","exception","indexing"],"answers":[{"tags":[],"owner":{"account_id":5460030,"reputation":79,"user_id":6250010,"accept_rate":0,"display_name":"Theara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682235636,"creation_date":1682235636,"answer_id":76083655,"question_id":76082852,"body_markdown":"plz change the index name to the lowercase in class below:\r\n\r\n```\r\npackage br.com.uburu.spring.utils;\r\n\r\npublic final class Indices {\r\n\r\n    public static final String KEYWORD = &quot;keyword&quot;;\r\n    public static final String PATH = &quot;path&quot;;\r\n    public static final String FILTER = &quot;filter&quot;;\r\n    \r\n}\r\n```\r\nResult:\r\n```\r\nrequest [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.302+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.306+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.319+07:00  WARN 75565 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-04-23T14:40:01.433+07:00  INFO 75565 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-04-23T14:40:01.438+07:00  INFO 75565 --- [  restartedMain] br.com.uburu.spring.Application          : Started Application in 1.272 seconds (process running for 6.551)\r\n```","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<p>plz change the index name to the lowercase in class below:</p>\n<pre><code>package br.com.uburu.spring.utils;\n\npublic final class Indices {\n\n    public static final String KEYWORD = &quot;keyword&quot;;\n    public static final String PATH = &quot;path&quot;;\n    public static final String FILTER = &quot;filter&quot;;\n    \n}\n</code></pre>\n<p>Result:</p>\n<pre><code>request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.302+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.306+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.319+07:00  WARN 75565 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-04-23T14:40:01.433+07:00  INFO 75565 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-04-23T14:40:01.438+07:00  INFO 75565 --- [  restartedMain] br.com.uburu.spring.Application          : Started Application in 1.272 seconds (process running for 6.551)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23012116,"reputation":51,"user_id":17134498,"display_name":"Dheovani Xavier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683770282,"creation_date":1683770282,"answer_id":76223650,"question_id":76082852,"body_markdown":"Almost 2 months later, finally managed to solve it. It was a problem with the ssl connection. I&#39;ve turned it all off and reconfigured it manually in `elasticsearch-8.7.0\\config\\elasticsearch.yml` to make it work","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<p>Almost 2 months later, finally managed to solve it. It was a problem with the ssl connection. I've turned it all off and reconfigured it manually in <code>elasticsearch-8.7.0\\config\\elasticsearch.yml</code> to make it work</p>\n"}],"owner":{"account_id":23012116,"reputation":51,"user_id":17134498,"display_name":"Dheovani Xavier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1031,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76223650,"answer_count":2,"score":3,"last_activity_date":1683770282,"creation_date":1682216810,"question_id":76082852,"body_markdown":"## Problem\r\n\r\nIt seems like my SpringBoot application can&#39;t connect with ElasticSearch. I keep getting this error whenever i try to run my application:\r\n\r\n&gt; UnsatisfiedDependencyException: Error creating bean with name &#39;filterController&#39;: Unsatisfied dependency expressed through field &#39;service&#39;: Error creating bean with name &#39;filterService&#39;: Unsatisfied dependency expressed through field &#39;repository&#39;: Error creating bean with name &#39;filterRepository&#39; defined in repository.FilterRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception\r\n\r\n\r\n## Code info\r\n\r\n- I didn&#39;t make any changes nor extra-configurations. I&#39;m running ElasticSearch normally\r\n- I did not create a custom configuration file, since [SpringBoot does it automatically](https://stackoverflow.com/questions/66745757/how-to-use-elasticsearchrestclientautoconfiguration-with-spring-boot)\r\n- You can find full source-code [here](https://github.com/Dheovani/Uburu/tree/elasticsearch)\r\n\r\nThis is my Application.java file:\r\n\r\n```\r\npackage br.com.uburu.spring;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis is my FilterController.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.controller;\r\n\r\n// Imports\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/filter&quot;)\r\npublic class FilterController {\r\n\r\n    @Autowired\r\n    private FilterService service;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Filter&gt;&gt; getAll() {\r\n        List&lt;Filter&gt; filters = service.getAll();\r\n        return new ResponseEntity&lt;List&lt;Filter&gt;&gt;(filters, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Filter&gt; getById(@PathVariable(&quot;id&quot;) long id) {\r\n        Filter filter = service.findById(id);\r\n        return new ResponseEntity&lt;Filter&gt;(filter, HttpStatus.OK);\r\n    }\r\n\r\n    // Some other methods\r\n    \r\n}\r\n```\r\n\r\nThis is the FilterService.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.service;\r\n\r\n// Imports\r\n\r\n@Service\r\npublic class FilterService {\r\n\r\n    @Autowired\r\n    private FilterRepository repository;\r\n\r\n    public List&lt;Filter&gt; getAll() {\r\n        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();\r\n        repository.findAll().forEach(filters::add);\r\n\r\n        return filters;\r\n    }\r\n\r\n    public Filter findById(long id) {\r\n        return repository.findById(id).orElse(null);\r\n    }\r\n\r\n    public Filter save(Filter filter) {\r\n        return repository.save(filter);\r\n    }\r\n\r\n    public void delete(long id) {\r\n        repository.deleteById(id);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nMy FilterRepository.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.repository;\r\n\r\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n\r\nimport br.com.uburu.spring.document.Filter;\r\n\r\npublic interface FilterRepository extends ElasticsearchRepository&lt;Filter, Long&gt; {}\r\n```\r\n\r\nTo finish, my project&#39;s dependencies:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.0.5&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n## Some solutions i&#39;ve tried:\r\n\r\n- Initializing my service and repository variables without the `@Autowired` tag\r\n- Initializing it inside a class constructor, passing the `@Autowired` tag above the constructor\r\n- Running ElasticSearch as admin\r\n- Cleaning Java Language Server Workspace (I&#39;m using VSCode)\r\n- Running `mvn clean install` once again before trying to run my application\r\n\r\n## Logs from ElasticSearch\r\n\r\nI&#39;ve noticed this logs in the ElasticSearch&#39;s console whenever i try to run my SpringBoot application:\r\n\r\n&gt; [2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}\r\n","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<h2>Problem</h2>\n<p>It seems like my SpringBoot application can't connect with ElasticSearch. I keep getting this error whenever i try to run my application:</p>\n<blockquote>\n<p>UnsatisfiedDependencyException: Error creating bean with name 'filterController': Unsatisfied dependency expressed through field 'service': Error creating bean with name 'filterService': Unsatisfied dependency expressed through field 'repository': Error creating bean with name 'filterRepository' defined in repository.FilterRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception</p>\n</blockquote>\n<h2>Code info</h2>\n<ul>\n<li>I didn't make any changes nor extra-configurations. I'm running ElasticSearch normally</li>\n<li>I did not create a custom configuration file, since <a href=\"https://stackoverflow.com/questions/66745757/how-to-use-elasticsearchrestclientautoconfiguration-with-spring-boot\">SpringBoot does it automatically</a></li>\n<li>You can find full source-code <a href=\"https://github.com/Dheovani/Uburu/tree/elasticsearch\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n<p>This is my Application.java file:</p>\n<pre><code>package br.com.uburu.spring;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>This is my FilterController.java file:</p>\n<pre><code>package br.com.uburu.spring.controller;\n\n// Imports\n\n@RestController\n@RequestMapping(&quot;/api/v1/filter&quot;)\npublic class FilterController {\n\n    @Autowired\n    private FilterService service;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Filter&gt;&gt; getAll() {\n        List&lt;Filter&gt; filters = service.getAll();\n        return new ResponseEntity&lt;List&lt;Filter&gt;&gt;(filters, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Filter&gt; getById(@PathVariable(&quot;id&quot;) long id) {\n        Filter filter = service.findById(id);\n        return new ResponseEntity&lt;Filter&gt;(filter, HttpStatus.OK);\n    }\n\n    // Some other methods\n    \n}\n</code></pre>\n<p>This is the FilterService.java file:</p>\n<pre><code>package br.com.uburu.spring.service;\n\n// Imports\n\n@Service\npublic class FilterService {\n\n    @Autowired\n    private FilterRepository repository;\n\n    public List&lt;Filter&gt; getAll() {\n        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();\n        repository.findAll().forEach(filters::add);\n\n        return filters;\n    }\n\n    public Filter findById(long id) {\n        return repository.findById(id).orElse(null);\n    }\n\n    public Filter save(Filter filter) {\n        return repository.save(filter);\n    }\n\n    public void delete(long id) {\n        repository.deleteById(id);\n    }\n    \n}\n</code></pre>\n<p>My FilterRepository.java file:</p>\n<pre><code>package br.com.uburu.spring.repository;\n\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\nimport br.com.uburu.spring.document.Filter;\n\npublic interface FilterRepository extends ElasticsearchRepository&lt;Filter, Long&gt; {}\n</code></pre>\n<p>To finish, my project's dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n        \n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\n        &lt;version&gt;5.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<h2>Some solutions i've tried:</h2>\n<ul>\n<li>Initializing my service and repository variables without the <code>@Autowired</code> tag</li>\n<li>Initializing it inside a class constructor, passing the <code>@Autowired</code> tag above the constructor</li>\n<li>Running ElasticSearch as admin</li>\n<li>Cleaning Java Language Server Workspace (I'm using VSCode)</li>\n<li>Running <code>mvn clean install</code> once again before trying to run my application</li>\n</ul>\n<h2>Logs from ElasticSearch</h2>\n<p>I've noticed this logs in the ElasticSearch's console whenever i try to run my SpringBoot application:</p>\n<blockquote>\n<p>[2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}</p>\n</blockquote>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data","eclipselink"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683778873,"post_id":76223632,"comment_id":134419498,"body_markdown":"afaik, you can&#39;t overcome that, hibernate creates insert task upon persist, so it expects all required fields are populated, however I do like that eclipselink behaviour.","body":"afaik, you can&#39;t overcome that, hibernate creates insert task upon persist, so it expects all required fields are populated, however I do like that eclipselink behaviour."}],"owner":{"account_id":13778459,"reputation":73,"user_id":9944181,"display_name":"Hasn A"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683769939,"creation_date":1683769939,"question_id":76223632,"body_markdown":"We are migrating our application from eclipselink to hibernate.\r\nIn our legacy code we are persisting the object first, then setting the values.\r\nThis used to work in eclipselink but fails in hibernate in the case when we try to call em.persist before setting the value of any field which has not-null constraint in DB.\r\n\r\nError message I get:\r\n\r\n    could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\r\n\r\neclipselink code which works:  \r\n\r\n    //eclipselink 2.5.1\r\n    @javax.ejb.TransactionAttribute(javax.ejb.TransactionAttributeType.REQUIRED)\r\n    public void save(Person p){\r\n        em.persist(p);\r\n        p.setEmail(&quot;abc@xyz.com&quot;);         \r\n    }\r\n\r\n\r\nHibernate code which doesnt work(same code as eclipselink)\r\n\r\n    //hibernate 5.6.15\r\n    @org.springframework.transaction.annotation.Transactional\r\n    public void save(Person p){\r\n        em.persist(p);             \r\n        p.setEmail(&quot;abc@xyz.com&quot;);\r\n    }\r\n\r\nHere p.setEmail() is set as not-null in DB.\r\nAnd exception is thrown after the method execution is completed and it goes to commit the transaction. And in logs the generated insert query has null value for property &#39;email&#39;.","title":"Eclipselink to Hibernate migration: em.persist fails in hibernate when not null is set in DB","body":"<p>We are migrating our application from eclipselink to hibernate.\nIn our legacy code we are persisting the object first, then setting the values.\nThis used to work in eclipselink but fails in hibernate in the case when we try to call em.persist before setting the value of any field which has not-null constraint in DB.</p>\n<p>Error message I get:</p>\n<pre><code>could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\n</code></pre>\n<p>eclipselink code which works:</p>\n<pre><code>//eclipselink 2.5.1\n@javax.ejb.TransactionAttribute(javax.ejb.TransactionAttributeType.REQUIRED)\npublic void save(Person p){\n    em.persist(p);\n    p.setEmail(&quot;abc@xyz.com&quot;);         \n}\n</code></pre>\n<p>Hibernate code which doesnt work(same code as eclipselink)</p>\n<pre><code>//hibernate 5.6.15\n@org.springframework.transaction.annotation.Transactional\npublic void save(Person p){\n    em.persist(p);             \n    p.setEmail(&quot;abc@xyz.com&quot;);\n}\n</code></pre>\n<p>Here p.setEmail() is set as not-null in DB.\nAnd exception is thrown after the method execution is completed and it goes to commit the transaction. And in logs the generated insert query has null value for property 'email'.</p>\n"},{"tags":["java","apache-nifi"],"answers":[{"tags":[],"owner":{"account_id":22213424,"reputation":49,"user_id":16452194,"display_name":"Kyle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683768656,"creation_date":1683767591,"answer_id":76223504,"question_id":76221847,"body_markdown":"Well I *seemed* to have figured it out with some help from some other articles. \r\n\r\nI went into the nifi.properties file located in the conf folder.\r\n\r\nI changed the following property from 8443 to 8442 (I chose 8442 arbitrarily hoping since it was close to 8443 that made it a good port candidate so you may want to choose a different one)\r\n\r\n    nifi.web.https.port=8442\r\n\r\nThen, I navigated to the login-identity-providers.xml file located in the same conf folder. \r\n\r\nI removed the default username and password that were in the file so that it looks like it does below.\r\n\r\n    &lt;provider&gt;\r\n        &lt;identifier&gt;single-user-provider&lt;/identifier&gt;\r\n        &lt;class&gt;org.apache.nifi.authentication.single.user.SingleUserLoginIdentityProvider&lt;/class&gt;\r\n        &lt;property name=&quot;Username&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;Password&quot;&gt;&lt;/property&gt;\r\n    &lt;/provider&gt;\r\n\r\nThen, I went back to the terminal, navigated to the `bin` directory and ran the following command...\r\n\r\n    ./nifi.sh restart\r\n\r\nIt spit out a ton of code but if you use ctrl + F and search for the word &quot;generated&quot; (without quotes) you should see a generated username and password.\r\n\r\nFinally, I navigated to https://127.0.0.1:8442/nifi/ and entered the generated username and password and eureka it seems to be working!\r\n\r\nHopefully nothing important was using port 8442!","title":"Kill command not working on java.net.BindException: Address already in use error","body":"<p>Well I <em>seemed</em> to have figured it out with some help from some other articles.</p>\n<p>I went into the nifi.properties file located in the conf folder.</p>\n<p>I changed the following property from 8443 to 8442 (I chose 8442 arbitrarily hoping since it was close to 8443 that made it a good port candidate so you may want to choose a different one)</p>\n<pre><code>nifi.web.https.port=8442\n</code></pre>\n<p>Then, I navigated to the login-identity-providers.xml file located in the same conf folder.</p>\n<p>I removed the default username and password that were in the file so that it looks like it does below.</p>\n<pre><code>&lt;provider&gt;\n    &lt;identifier&gt;single-user-provider&lt;/identifier&gt;\n    &lt;class&gt;org.apache.nifi.authentication.single.user.SingleUserLoginIdentityProvider&lt;/class&gt;\n    &lt;property name=&quot;Username&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;Password&quot;&gt;&lt;/property&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>Then, I went back to the terminal, navigated to the <code>bin</code> directory and ran the following command...</p>\n<pre><code>./nifi.sh restart\n</code></pre>\n<p>It spit out a ton of code but if you use ctrl + F and search for the word &quot;generated&quot; (without quotes) you should see a generated username and password.</p>\n<p>Finally, I navigated to <a href=\"https://127.0.0.1:8442/nifi/\" rel=\"nofollow noreferrer\">https://127.0.0.1:8442/nifi/</a> and entered the generated username and password and eureka it seems to be working!</p>\n<p>Hopefully nothing important was using port 8442!</p>\n"}],"owner":{"account_id":22213424,"reputation":49,"user_id":16452194,"display_name":"Kyle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683768656,"creation_date":1683745884,"question_id":76221847,"body_markdown":"None of the other similar posts to this issue fix my problem.\r\n\r\nThe generated username and password for Apache Nifi doesn&#39;t work.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI&#39;m following [these][2] instructions.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI tried running the `tail -f nifi-app.log` command to troubleshoot the issue.\r\n\r\nAnd got the following results... \r\n\r\n    Caused by: java.net.BindException: Address already in use\r\n    \tat java.base/sun.nio.ch.Net.bind0(Native Method)\r\n    \tat java.base/sun.nio.ch.Net.bind(Net.java:555)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\r\n    \tat java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\r\n    \t... 10 common frames omitted\r\n    2023-05-10 14:22:54,303 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\r\n\r\nI tried checking the port with the following command `sudo lsof -i :8443`\r\n\r\nand got the following response,,,\r\n\r\n    COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\r\n    java    71776 user 3146u  IPv4 0x9a0863600c7cb941      0t0  TCP localhost:pcsync-https (LISTEN)\r\n\r\nSo, I killed the process using `kill 71776`\r\n\r\nI started Nifi again using `bin/nifi.sh start`\r\n\r\nand again ran the command `tail -f nifi-app.log`\r\n\r\nwhich resulted in the following...\r\n\r\n    2023-05-10 14:57:09,939 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@ff0e6d4{/nifi-jolt-transform-json-ui-1.21.0,/nifi-jolt-transform-json-ui-1.21.0,file:///Users/user/nifi-1.21.0/work/jetty/nifi-jolt-transform-json-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-standard-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-jolt-transform-json-ui-1.21.0.war}\r\n    2023-05-10 14:57:10,512 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=143ms\r\n    2023-05-10 14:57:10,530 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:10,604 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@70d3cdbf{nifi,/nifi,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-ui-1.21.0.war}\r\n    2023-05-10 14:57:11,128 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=273ms\r\n    2023-05-10 14:57:11,131 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:11,248 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\r\n    2023-05-10 14:57:14,041 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loading Application Properties [/Users/user/nifi-1.21.0/./conf/nifi.properties]\r\n    2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 91 properties from system properties and environment variables\r\n    2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 91 properties.  Including precedence overrides effective accessible registry key size is 91\r\n    2023-05-10 14:57:18,441 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Initialized FlowFile Repository\r\n    2023-05-10 14:57:18,450 INFO [main] o.apache.nifi.controller.FlowController Creating Provenance Repository [org.apache.nifi.provenance.WriteAheadProvenanceRepository]\r\n    2023-05-10 14:57:18,509 INFO [main] o.a.n.p.store.WriteAheadStorePartition After recovering ./provenance_repository, next Event ID to be generated will be 0\r\n    2023-05-10 14:57:18,514 INFO [main] o.a.n.p.index.lucene.LuceneEventIndex Will avoid re-indexing Provenance Events because the newest index is defunct, so it will be re-indexed in the background\r\n    2023-05-10 14:57:18,515 INFO [main] o.apache.nifi.controller.FlowController Creating Content Repository [org.apache.nifi.controller.repository.FileSystemRepository]\r\n    2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Maximum Threshold for Container default set to 129851995586 bytes; if volume exceeds this size, archived data will be deleted until it no longer exceeds this size\r\n    2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Initializing FileSystemRepository with &#39;Always Sync&#39; set to false\r\n    2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f finished recovering records. Performing Checkpoint to ensure proper state of Partitions before updates\r\n    2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog Successfully recovered 2 records in 8 milliseconds\r\n    2023-05-10 14:57:18,951 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f checkpointed with 2 Records and 0 Swap Files in 24 milliseconds (Stop-the-world time = 7 milliseconds, Clear Edit Logs time = 10 millis), max Transaction ID 1\r\n    2023-05-10 14:57:19,032 INFO [main] o.apache.nifi.controller.FlowController Not enabling RAW Socket Site-to-Site functionality because nifi.remote.input.socket.port is not set\r\n    2023-05-10 14:57:22,380 INFO [main] o.s.s.web.DefaultSecurityFilterChain Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b89cbc0, org.apache.nifi.web.security.csrf.SkipReplicatedCsrfFilter@7a9c91e7, org.springframework.security.web.csrf.CsrfFilter@52e10d07, org.apache.nifi.web.security.x509.X509AuthenticationFilter@2b7e07e0, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@37717b97, org.apache.nifi.web.security.log.AuthenticationUserFilter@12837172, org.springframework.security.web.access.ExceptionTranslationFilter@40b4a59c, org.springframework.security.web.access.intercept.AuthorizationFilter@26d38b98]\r\n    2023-05-10 14:57:23,190 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Starting Flow Controller...\r\n    2023-05-10 14:57:23,209 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Synchronizing FlowController with proposed flow: Controller Already Synchronized = false\r\n    2023-05-10 14:57:23,444 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer In order to inherit proposed dataflow, will stop any components that will be affected by the update\r\n    2023-05-10 14:57:23,445 INFO [main] o.a.n.c.s.AffectedComponentSet Stopping the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\r\n    2023-05-10 14:57:23,449 INFO [main] o.a.n.c.s.AffectedComponentSet Successfully stopped all components in 3 milliseconds\r\n    2023-05-10 14:57:23,456 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Recovering records from Write-Ahead Log at ./flowfile_repository\r\n    2023-05-10 14:57:23,470 INFO [main] org.apache.nifi.wali.HashMapSnapshot org.apache.nifi.wali.HashMapSnapshot@5c2463d8 restored 0 Records and 0 Swap Files from Snapshot, ending with Transaction ID -1\r\n    2023-05-10 14:57:23,472 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records and 0 swap files from Snapshot at ./flowfile_repository/checkpoint with Max Transaction ID of -1 in 14 milliseconds. Now recovering records from 1 journal files\r\n    2023-05-10 14:57:23,477 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Recovering records from journal ./flowfile_repository/journals/0.journal\r\n    2023-05-10 14:57:23,482 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Successfully recovered 0 updates from journal ./flowfile_repository/journals/0.journal\r\n    2023-05-10 14:57:23,483 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records in 26 milliseconds. Now checkpointing to ensure that Write-Ahead Log is in a consistent state\r\n    2023-05-10 14:57:23,503 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Checkpointed Write-Ahead Log with 0 Records and 0 Swap Files in 19 milliseconds (Stop-the-world time = 4 milliseconds), max Transaction ID -1\r\n    2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Timer Driven] Maximum Thread Count updated [10] previous [10]\r\n    2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Event Driven] Maximum Thread Count updated [1] previous [1]\r\n    2023-05-10 14:57:23,555 INFO [main] o.a.n.f.s.StandardVersionedComponentSynchronizer No differences between current flow and proposed flow for StandardProcessGroup[identifier=06e6af5d-0188-1000-2060-fb348a94c582,name=NiFi Flow]\r\n    2023-05-10 14:57:23,594 INFO [main] o.a.n.c.s.AffectedComponentSet Starting the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\r\n    2023-05-10 14:57:23,596 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Successfully synchronized dataflow with the proposed flow in 387 millis\r\n    2023-05-10 14:57:23,596 INFO [main] o.apache.nifi.controller.FlowController Successfully synchronized controller with proposed flow. Flow contains the following number of components: {Processors=0, Controller Services=0, Reporting Tasks=0, Process Groups=0, Remote Process Groups=0, Parameter Providers=0, Flow Registry Clients=0, Local Input Ports=0, Local Output Ports=0, Public Input Ports=0, Public Output Ports=0}\r\n    2023-05-10 14:57:23,712 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Successfully restored 0 FlowFiles and 0 Swap Files\r\n    2023-05-10 14:57:23,808 INFO [main] o.apache.nifi.controller.FlowController Performed initial validation of all components in 1 milliseconds\r\n    2023-05-10 14:57:23,809 INFO [main] o.apache.nifi.controller.FlowController Starting 0 processors/ports/funnels\r\n    2023-05-10 14:57:23,810 INFO [main] o.apache.nifi.controller.FlowController Started 0 Remote Group Ports transmitting\r\n    2023-05-10 14:57:23,812 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Flow Controller started successfully.\r\n    2023-05-10 14:57:28,530 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@72a7aa4f{nifi-api,/nifi-api,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-api-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-api-1.21.0.war}\r\n    2023-05-10 14:57:29,274 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=183ms\r\n    2023-05-10 14:57:29,356 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,362 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@537ca28e{nifi-content-viewer,/nifi-content-viewer,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-content-viewer-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-content-viewer-1.21.0.war}\r\n    2023-05-10 14:57:29,421 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=13ms\r\n    2023-05-10 14:57:29,500 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,505 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@5b322873{nifi-docs,/nifi-docs,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-docs-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-docs-1.21.0.war}\r\n    2023-05-10 14:57:29,552 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=12ms\r\n    2023-05-10 14:57:29,626 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,631 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@35e2b89f{nifi-error,/,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-error-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-error-1.21.0.war}\r\n    2023-05-10 14:57:29,647 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\r\n    java.io.IOException: Failed to bind to /127.0.0.1:8443\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:349)\r\n    \tat org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:310)\r\n    \tat org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\r\n    \tat org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:234)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:401)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:816)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:172)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:332)\r\n    Caused by: java.net.BindException: Address already in use\r\n    \tat java.base/sun.nio.ch.Net.bind0(Native Method)\r\n    \tat java.base/sun.nio.ch.Net.bind(Net.java:555)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\r\n    \tat java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\r\n    \t... 10 common frames omitted\r\n    2023-05-10 14:57:29,652 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\r\n\r\nIt appears to be the same error as before I killed the process. Any help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GCgIA.png\r\n  [2]: https://file:///Users/user/nifi-1.21.0/README\r\n  [3]: https://i.stack.imgur.com/sQYwv.png\r\n","title":"Kill command not working on java.net.BindException: Address already in use error","body":"<p>None of the other similar posts to this issue fix my problem.</p>\n<p>The generated username and password for Apache Nifi doesn't work.</p>\n<p><a href=\"https://i.stack.imgur.com/GCgIA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GCgIA.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm following <a href=\"https://file:///Users/user/nifi-1.21.0/README\" rel=\"nofollow noreferrer\">these</a> instructions.</p>\n<p><a href=\"https://i.stack.imgur.com/sQYwv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQYwv.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried running the <code>tail -f nifi-app.log</code> command to troubleshoot the issue.</p>\n<p>And got the following results...</p>\n<pre><code>Caused by: java.net.BindException: Address already in use\n    at java.base/sun.nio.ch.Net.bind0(Native Method)\n    at java.base/sun.nio.ch.Net.bind(Net.java:555)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\n    at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\n    ... 10 common frames omitted\n2023-05-10 14:22:54,303 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\n</code></pre>\n<p>I tried checking the port with the following command <code>sudo lsof -i :8443</code></p>\n<p>and got the following response,,,</p>\n<pre><code>COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\njava    71776 user 3146u  IPv4 0x9a0863600c7cb941      0t0  TCP localhost:pcsync-https (LISTEN)\n</code></pre>\n<p>So, I killed the process using <code>kill 71776</code></p>\n<p>I started Nifi again using <code>bin/nifi.sh start</code></p>\n<p>and again ran the command <code>tail -f nifi-app.log</code></p>\n<p>which resulted in the following...</p>\n<pre><code>2023-05-10 14:57:09,939 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@ff0e6d4{/nifi-jolt-transform-json-ui-1.21.0,/nifi-jolt-transform-json-ui-1.21.0,file:///Users/user/nifi-1.21.0/work/jetty/nifi-jolt-transform-json-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-standard-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-jolt-transform-json-ui-1.21.0.war}\n2023-05-10 14:57:10,512 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=143ms\n2023-05-10 14:57:10,530 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:10,604 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@70d3cdbf{nifi,/nifi,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-ui-1.21.0.war}\n2023-05-10 14:57:11,128 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=273ms\n2023-05-10 14:57:11,131 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:11,248 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\n2023-05-10 14:57:14,041 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loading Application Properties [/Users/user/nifi-1.21.0/./conf/nifi.properties]\n2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 91 properties from system properties and environment variables\n2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 91 properties.  Including precedence overrides effective accessible registry key size is 91\n2023-05-10 14:57:18,441 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Initialized FlowFile Repository\n2023-05-10 14:57:18,450 INFO [main] o.apache.nifi.controller.FlowController Creating Provenance Repository [org.apache.nifi.provenance.WriteAheadProvenanceRepository]\n2023-05-10 14:57:18,509 INFO [main] o.a.n.p.store.WriteAheadStorePartition After recovering ./provenance_repository, next Event ID to be generated will be 0\n2023-05-10 14:57:18,514 INFO [main] o.a.n.p.index.lucene.LuceneEventIndex Will avoid re-indexing Provenance Events because the newest index is defunct, so it will be re-indexed in the background\n2023-05-10 14:57:18,515 INFO [main] o.apache.nifi.controller.FlowController Creating Content Repository [org.apache.nifi.controller.repository.FileSystemRepository]\n2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Maximum Threshold for Container default set to 129851995586 bytes; if volume exceeds this size, archived data will be deleted until it no longer exceeds this size\n2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Initializing FileSystemRepository with 'Always Sync' set to false\n2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f finished recovering records. Performing Checkpoint to ensure proper state of Partitions before updates\n2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog Successfully recovered 2 records in 8 milliseconds\n2023-05-10 14:57:18,951 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f checkpointed with 2 Records and 0 Swap Files in 24 milliseconds (Stop-the-world time = 7 milliseconds, Clear Edit Logs time = 10 millis), max Transaction ID 1\n2023-05-10 14:57:19,032 INFO [main] o.apache.nifi.controller.FlowController Not enabling RAW Socket Site-to-Site functionality because nifi.remote.input.socket.port is not set\n2023-05-10 14:57:22,380 INFO [main] o.s.s.web.DefaultSecurityFilterChain Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b89cbc0, org.apache.nifi.web.security.csrf.SkipReplicatedCsrfFilter@7a9c91e7, org.springframework.security.web.csrf.CsrfFilter@52e10d07, org.apache.nifi.web.security.x509.X509AuthenticationFilter@2b7e07e0, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@37717b97, org.apache.nifi.web.security.log.AuthenticationUserFilter@12837172, org.springframework.security.web.access.ExceptionTranslationFilter@40b4a59c, org.springframework.security.web.access.intercept.AuthorizationFilter@26d38b98]\n2023-05-10 14:57:23,190 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Starting Flow Controller...\n2023-05-10 14:57:23,209 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Synchronizing FlowController with proposed flow: Controller Already Synchronized = false\n2023-05-10 14:57:23,444 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer In order to inherit proposed dataflow, will stop any components that will be affected by the update\n2023-05-10 14:57:23,445 INFO [main] o.a.n.c.s.AffectedComponentSet Stopping the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\n2023-05-10 14:57:23,449 INFO [main] o.a.n.c.s.AffectedComponentSet Successfully stopped all components in 3 milliseconds\n2023-05-10 14:57:23,456 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Recovering records from Write-Ahead Log at ./flowfile_repository\n2023-05-10 14:57:23,470 INFO [main] org.apache.nifi.wali.HashMapSnapshot org.apache.nifi.wali.HashMapSnapshot@5c2463d8 restored 0 Records and 0 Swap Files from Snapshot, ending with Transaction ID -1\n2023-05-10 14:57:23,472 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records and 0 swap files from Snapshot at ./flowfile_repository/checkpoint with Max Transaction ID of -1 in 14 milliseconds. Now recovering records from 1 journal files\n2023-05-10 14:57:23,477 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Recovering records from journal ./flowfile_repository/journals/0.journal\n2023-05-10 14:57:23,482 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Successfully recovered 0 updates from journal ./flowfile_repository/journals/0.journal\n2023-05-10 14:57:23,483 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records in 26 milliseconds. Now checkpointing to ensure that Write-Ahead Log is in a consistent state\n2023-05-10 14:57:23,503 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Checkpointed Write-Ahead Log with 0 Records and 0 Swap Files in 19 milliseconds (Stop-the-world time = 4 milliseconds), max Transaction ID -1\n2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Timer Driven] Maximum Thread Count updated [10] previous [10]\n2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Event Driven] Maximum Thread Count updated [1] previous [1]\n2023-05-10 14:57:23,555 INFO [main] o.a.n.f.s.StandardVersionedComponentSynchronizer No differences between current flow and proposed flow for StandardProcessGroup[identifier=06e6af5d-0188-1000-2060-fb348a94c582,name=NiFi Flow]\n2023-05-10 14:57:23,594 INFO [main] o.a.n.c.s.AffectedComponentSet Starting the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\n2023-05-10 14:57:23,596 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Successfully synchronized dataflow with the proposed flow in 387 millis\n2023-05-10 14:57:23,596 INFO [main] o.apache.nifi.controller.FlowController Successfully synchronized controller with proposed flow. Flow contains the following number of components: {Processors=0, Controller Services=0, Reporting Tasks=0, Process Groups=0, Remote Process Groups=0, Parameter Providers=0, Flow Registry Clients=0, Local Input Ports=0, Local Output Ports=0, Public Input Ports=0, Public Output Ports=0}\n2023-05-10 14:57:23,712 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Successfully restored 0 FlowFiles and 0 Swap Files\n2023-05-10 14:57:23,808 INFO [main] o.apache.nifi.controller.FlowController Performed initial validation of all components in 1 milliseconds\n2023-05-10 14:57:23,809 INFO [main] o.apache.nifi.controller.FlowController Starting 0 processors/ports/funnels\n2023-05-10 14:57:23,810 INFO [main] o.apache.nifi.controller.FlowController Started 0 Remote Group Ports transmitting\n2023-05-10 14:57:23,812 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Flow Controller started successfully.\n2023-05-10 14:57:28,530 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@72a7aa4f{nifi-api,/nifi-api,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-api-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-api-1.21.0.war}\n2023-05-10 14:57:29,274 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=183ms\n2023-05-10 14:57:29,356 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,362 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@537ca28e{nifi-content-viewer,/nifi-content-viewer,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-content-viewer-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-content-viewer-1.21.0.war}\n2023-05-10 14:57:29,421 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=13ms\n2023-05-10 14:57:29,500 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,505 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@5b322873{nifi-docs,/nifi-docs,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-docs-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-docs-1.21.0.war}\n2023-05-10 14:57:29,552 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=12ms\n2023-05-10 14:57:29,626 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,631 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@35e2b89f{nifi-error,/,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-error-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-error-1.21.0.war}\n2023-05-10 14:57:29,647 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\njava.io.IOException: Failed to bind to /127.0.0.1:8443\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:349)\n    at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:310)\n    at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\n    at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:234)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:401)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:816)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:172)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\n    at org.apache.nifi.NiFi.main(NiFi.java:332)\nCaused by: java.net.BindException: Address already in use\n    at java.base/sun.nio.ch.Net.bind0(Native Method)\n    at java.base/sun.nio.ch.Net.bind(Net.java:555)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\n    at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\n    ... 10 common frames omitted\n2023-05-10 14:57:29,652 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\n</code></pre>\n<p>It appears to be the same error as before I killed the process. Any help is appreciated.</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":28555159,"reputation":9,"user_id":21859476,"display_name":"fengyadong"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683768321,"creation_date":1683623824,"answer_id":76207677,"question_id":76207551,"body_markdown":"[Wrong Answer]Http request must have exact body data type, like json, xml, html.So you can&#39;t put two kind of data in http body.\r\nYou can transfer the params by url, and transfer file data by body.","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>[Wrong Answer]Http request must have exact body data type, like json, xml, html.So you can't put two kind of data in http body.\nYou can transfer the params by url, and transfer file data by body.</p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683719068,"creation_date":1683633301,"answer_id":76209048,"question_id":76207551,"body_markdown":"Modify the controller method like this:\r\n\r\n    @PostMapping(path = &quot;/post&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    public ResponseEntity&lt;String&gt; endpoint(\r\n            @RequestPart ReportDto reportDto,\r\n            @RequestPart MultipartFile myFile) {\r\n        return ResponseEntity.ok(service.process(reportDto, myFile));\r\n    }\r\n\r\nPlease note: the name attribute in the annotation RequestPart is not required if it matches the parameter name. Please also note that using the constants defined in MediaType helps avoid typo/mistakes.\r\n\r\nYou should also add the media type definition for reportDto to your CURL/Postman request:\r\n\r\n    -F &#39;reportDto={\r\n        &quot;address&quot;: &quot;string&quot;,\r\n        &quot;fullName&quot;: &quot;string&quot;};\r\n        type=application/json&#39;","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>Modify the controller method like this:</p>\n<pre><code>@PostMapping(path = &quot;/post&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\npublic ResponseEntity&lt;String&gt; endpoint(\n        @RequestPart ReportDto reportDto,\n        @RequestPart MultipartFile myFile) {\n    return ResponseEntity.ok(service.process(reportDto, myFile));\n}\n</code></pre>\n<p>Please note: the name attribute in the annotation RequestPart is not required if it matches the parameter name. Please also note that using the constants defined in MediaType helps avoid typo/mistakes.</p>\n<p>You should also add the media type definition for reportDto to your CURL/Postman request:</p>\n<pre><code>-F 'reportDto={\n    &quot;address&quot;: &quot;string&quot;,\n    &quot;fullName&quot;: &quot;string&quot;};\n    type=application/json'\n</code></pre>\n"}],"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":909,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76209048,"answer_count":2,"score":0,"last_activity_date":1683768321,"creation_date":1683622988,"question_id":76207551,"body_markdown":"I need to make a POST endpoint in Java Springboot that accepts a MultipartFile (a raw file like xlsx, doc that we can upload from windows explorer) and also a JSON Object (metadata).\r\nThe JSON Object will be provided as a String, like:\r\n\r\n    {\r\n      &quot;address&quot;: &quot;string&quot;,\r\n      &quot;fullName&quot;: &quot;string&quot;\r\n    }\r\n\r\nI tried the following:\r\n\r\nController:\r\n  \r\n\r\n    @PostMapping(path = &quot;/post&quot;, consumes = {&quot;application/json&quot;,&quot;multipart/form-data&quot;})\r\n      public ResponseEntity&lt;String&gt; endpoint(\r\n        @RequestBody ReportDto reportDto,\r\n        @RequestPart(&quot;myFile&quot;) MultipartFile myFile\r\n      ){\r\n      return ResponseEntity.ok(service.process(reportDto,myFile));\r\n      }\r\n      \r\n\r\nReportDto used in controller:\r\n\r\n \r\n\r\n     public class ReportDto{\r\n      \r\n      String address;\r\n      String fullName;\r\n        //getters\r\n        //setters\r\n        //all arg constructor\r\n        //no arg constructor\r\n      \r\n      }\r\n\r\nWhen I try to hit the endpoint through Swagger or through POSTMAN, i get **HTTP 415 : Unsupported Media** error.\r\n\r\nMy CURL request looks like this:\r\n\r\n    curl -X &#39;POST&#39; \\\r\n      &#39;http://localhost:8080/api/v1/dashboards/post&#39; \\\r\n      -H &#39;accept: */*&#39; \\\r\n      -H &#39;Authorization: Bearer somebearertoken&#39; \\\r\n      -H &#39;Content-Type: multipart/form-data&#39; \\\r\n      -F &#39;reportDto={\r\n      &quot;address&quot;: &quot;string&quot;,\r\n      &quot;fullName&quot;: &quot;string&quot;\r\n    }&#39; \\\r\n      -F &#39;myFile=@Table_New.xlsx;type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;\r\n\r\n\r\nPlease help me on resolving this\r\n","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>I need to make a POST endpoint in Java Springboot that accepts a MultipartFile (a raw file like xlsx, doc that we can upload from windows explorer) and also a JSON Object (metadata).\nThe JSON Object will be provided as a String, like:</p>\n<pre><code>{\n  &quot;address&quot;: &quot;string&quot;,\n  &quot;fullName&quot;: &quot;string&quot;\n}\n</code></pre>\n<p>I tried the following:</p>\n<p>Controller:</p>\n<pre><code>@PostMapping(path = &quot;/post&quot;, consumes = {&quot;application/json&quot;,&quot;multipart/form-data&quot;})\n  public ResponseEntity&lt;String&gt; endpoint(\n    @RequestBody ReportDto reportDto,\n    @RequestPart(&quot;myFile&quot;) MultipartFile myFile\n  ){\n  return ResponseEntity.ok(service.process(reportDto,myFile));\n  }\n  \n</code></pre>\n<p>ReportDto used in controller:</p>\n<pre><code> public class ReportDto{\n  \n  String address;\n  String fullName;\n    //getters\n    //setters\n    //all arg constructor\n    //no arg constructor\n  \n  }\n</code></pre>\n<p>When I try to hit the endpoint through Swagger or through POSTMAN, i get <strong>HTTP 415 : Unsupported Media</strong> error.</p>\n<p>My CURL request looks like this:</p>\n<pre><code>curl -X 'POST' \\\n  'http://localhost:8080/api/v1/dashboards/post' \\\n  -H 'accept: */*' \\\n  -H 'Authorization: Bearer somebearertoken' \\\n  -H 'Content-Type: multipart/form-data' \\\n  -F 'reportDto={\n  &quot;address&quot;: &quot;string&quot;,\n  &quot;fullName&quot;: &quot;string&quot;\n}' \\\n  -F 'myFile=@Table_New.xlsx;type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n</code></pre>\n<p>Please help me on resolving this</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683766496,"creation_date":1683765252,"answer_id":76223402,"question_id":76223253,"body_markdown":"That is how `spring-data-jpa` designed: since your entity has external identifier, `spring-data-jpa` never considers it as a new entity, and [instead of calling `em.persist()` it calls `em.save()` (`em.merge()` in recent versions)](https://github.com/spring-projects/spring-data-jpa/blob/878db1d51ed1074dfc25625d42c21bf773579496/spring-data-jpa/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java#L632), which in turn cause Hibernate to make a decision what to do with entity: insert or update:\r\n\r\n\r\n```java\r\n@Transactional\r\n@Override\r\npublic &lt;S extends T&gt; S save(S entity) {\r\n\r\n    Assert.notNull(entity, &quot;Entity must not be null&quot;);\r\n\r\n    if (entityInformation.isNew(entity)) {\r\n        em.persist(entity);\r\n        return entity;\r\n    } else {\r\n        return em.merge(entity);\r\n    }\r\n}\r\n```\r\n\r\nThe options are following:\r\n\r\n1. take advantage of DB locks, i.e. lock something in DB upon entering critical section and perform some checks before saving entity. In PostgreSQL it is possible to use [advisory locks](https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS), in case of other DBs you may create a table with single row and lock it.\r\n\r\n2. define a &quot;technical&quot; `@Id` field for your entity, and use &quot;business identifier&quot; provided as `@NaturalId`, in that case unique constraint will help\r\n\r\n3. don&#39;t use `spring-data-jpa` repository for this particular case - use `EnitytManager` API instead.\r\n\r\n4. take advantage of [Composite Repositories](https://thorben-janssen.com/composite-repositories-spring-data-jpa/) and call `em.persist()`\r\n\r\n5. file a CR to `spring-data-jpa` project, asking to provide `persist` method or some other option, `boolean isNew` parameter, for exmaple\r\n\r\n6. take advantage of [@Version](https://vladmihalcea.com/jpa-entity-version-property-hibernate/) - hibernate (and `spring-data-jpa`) believes entities with `null` version are new.\r\n\r\n7. somehow try to implement `org.springframework.data.domain.Persistable` in your entity in order to tell `spring-data-jpa` that in particular scenario it should consider entity as new, for example:\r\n\r\n```java\r\n@Entity\r\npublic class MySimple extends AbstractPersistable&lt;Integer&gt; {\r\n\r\n    private Boolean forceNew;\r\n\r\n    @Transient\r\n    @Override\r\n    public boolean isNew() {\r\n        if (forceNew != null) {\r\n            return forceNew;\r\n        }\r\n        return super.isNew();\r\n    }\r\n\r\n}\r\n```","title":"hibernate guarantee failure on concurrent insertion of existing record instead of update","body":"<p>That is how <code>spring-data-jpa</code> designed: since your entity has external identifier, <code>spring-data-jpa</code> never considers it as a new entity, and <a href=\"https://github.com/spring-projects/spring-data-jpa/blob/878db1d51ed1074dfc25625d42c21bf773579496/spring-data-jpa/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java#L632\" rel=\"nofollow noreferrer\">instead of calling <code>em.persist()</code> it calls <code>em.save()</code> (<code>em.merge()</code> in recent versions)</a>, which in turn cause Hibernate to make a decision what to do with entity: insert or update:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Override\npublic &lt;S extends T&gt; S save(S entity) {\n\n    Assert.notNull(entity, &quot;Entity must not be null&quot;);\n\n    if (entityInformation.isNew(entity)) {\n        em.persist(entity);\n        return entity;\n    } else {\n        return em.merge(entity);\n    }\n}\n</code></pre>\n<p>The options are following:</p>\n<ol>\n<li><p>take advantage of DB locks, i.e. lock something in DB upon entering critical section and perform some checks before saving entity. In PostgreSQL it is possible to use <a href=\"https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS\" rel=\"nofollow noreferrer\">advisory locks</a>, in case of other DBs you may create a table with single row and lock it.</p>\n</li>\n<li><p>define a &quot;technical&quot; <code>@Id</code> field for your entity, and use &quot;business identifier&quot; provided as <code>@NaturalId</code>, in that case unique constraint will help</p>\n</li>\n<li><p>don't use <code>spring-data-jpa</code> repository for this particular case - use <code>EnitytManager</code> API instead.</p>\n</li>\n<li><p>take advantage of <a href=\"https://thorben-janssen.com/composite-repositories-spring-data-jpa/\" rel=\"nofollow noreferrer\">Composite Repositories</a> and call <code>em.persist()</code></p>\n</li>\n<li><p>file a CR to <code>spring-data-jpa</code> project, asking to provide <code>persist</code> method or some other option, <code>boolean isNew</code> parameter, for exmaple</p>\n</li>\n<li><p>take advantage of <a href=\"https://vladmihalcea.com/jpa-entity-version-property-hibernate/\" rel=\"nofollow noreferrer\">@Version</a> - hibernate (and <code>spring-data-jpa</code>) believes entities with <code>null</code> version are new.</p>\n</li>\n<li><p>somehow try to implement <code>org.springframework.data.domain.Persistable</code> in your entity in order to tell <code>spring-data-jpa</code> that in particular scenario it should consider entity as new, for example:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class MySimple extends AbstractPersistable&lt;Integer&gt; {\n\n    private Boolean forceNew;\n\n    @Transient\n    @Override\n    public boolean isNew() {\n        if (forceNew != null) {\n            return forceNew;\n        }\n        return super.isNew();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":12015092,"reputation":833,"user_id":11218205,"display_name":"Dr Phil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76223402,"answer_count":1,"score":1,"last_activity_date":1683766496,"creation_date":1683762198,"question_id":76223253,"body_markdown":"I have this scenario.\r\nI have a web/rest service that receives a new record with a business id and inserts it using hibernate entityManager. However, there are multiple processes which can be doing such an insertion concurrently. Hibernate `save` method will insert or update( if the record exists for the same primary key).\r\n\r\nso if multiple processes are performing the equivalent of:\r\n\r\nprocess1:\r\n```java\r\n\r\n    MySimple r=new MySimple(1,&#39;tagP1&#39;)\r\n    mySinmpleRepository.save(r);\r\n```\r\n\r\nprocess2:\r\n```java\r\n\r\n    MySimple r=new MySimple(1,&#39;tagP2&#39;)\r\n    mySinmpleRepository.save(r);\r\n```\r\n\r\n\r\nWhat i need to achieve is a form of optimistic locking and to fail the update if the record already exists. \r\n\\\r\nUnfortunately what happens so far is that the record gets updated and none of the save methods fail even if I try to &quot;insert&quot; a detached entity\r\n\r\n**sample entity:**\r\n\r\n```sql\r\n\r\n    create table MySimple(\r\n     SIMPLE_ID INTEGER NOT NULL,\r\n    TAG VARCHAR(200),\r\n    primary key PK_MYSIMPLE (SIMPLE_ID)\r\n    )\r\n```\r\n\r\nentity:\r\n\r\n```java\r\n    @Entity\r\n    public class MySimple {\r\n     @Id\r\n     @Column(name=&quot;SIMPLE_ID&quot;, nullable=false, updateable=false)\r\n     private simpleId;\r\n    \r\n     @Column(name=&quot;TAG&quot;, nullable=false, updateable=true)\r\n     private tag;\r\n     // getters/setters/etc..\r\n    }\r\n\r\n    public interface MySimpleRepository extends JpaRepository&lt;MySimple, Integer&gt;{\r\n    }\r\n```\r\n\r\n\r\n\r\n","title":"hibernate guarantee failure on concurrent insertion of existing record instead of update","body":"<p>I have this scenario.\nI have a web/rest service that receives a new record with a business id and inserts it using hibernate entityManager. However, there are multiple processes which can be doing such an insertion concurrently. Hibernate <code>save</code> method will insert or update( if the record exists for the same primary key).</p>\n<p>so if multiple processes are performing the equivalent of:</p>\n<p>process1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    MySimple r=new MySimple(1,'tagP1')\n    mySinmpleRepository.save(r);\n</code></pre>\n<p>process2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    MySimple r=new MySimple(1,'tagP2')\n    mySinmpleRepository.save(r);\n</code></pre>\n<p>What i need to achieve is a form of optimistic locking and to fail the update if the record already exists.\n<br />\nUnfortunately what happens so far is that the record gets updated and none of the save methods fail even if I try to &quot;insert&quot; a detached entity</p>\n<p><strong>sample entity:</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>\n    create table MySimple(\n     SIMPLE_ID INTEGER NOT NULL,\n    TAG VARCHAR(200),\n    primary key PK_MYSIMPLE (SIMPLE_ID)\n    )\n</code></pre>\n<p>entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Entity\n    public class MySimple {\n     @Id\n     @Column(name=&quot;SIMPLE_ID&quot;, nullable=false, updateable=false)\n     private simpleId;\n    \n     @Column(name=&quot;TAG&quot;, nullable=false, updateable=true)\n     private tag;\n     // getters/setters/etc..\n    }\n\n    public interface MySimpleRepository extends JpaRepository&lt;MySimple, Integer&gt;{\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","jboss","jboss7.x"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1683665712,"post_id":76212034,"comment_id":134401035,"body_markdown":"Have you made the required Java 17 configuration changes mentioned in the Notes at the bottom of https://access.redhat.com/articles/6978703 ?","body":"Have you made the required Java 17 configuration changes mentioned in the Notes at the bottom of <a href=\"https://access.redhat.com/articles/6978703\" rel=\"nofollow noreferrer\">access.redhat.com/articles/6978703</a> ?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1683766463,"post_id":76212034,"comment_id":134418344,"body_markdown":"No need for JBOSS anymore.  Run your Spring Boot app as an executable JAR and ditch the JEE server.","body":"No need for JBOSS anymore.  Run your Spring Boot app as an executable JAR and ditch the JEE server."}],"answers":[{"tags":[],"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683766313,"creation_date":1683766313,"answer_id":76223454,"question_id":76212034,"body_markdown":"Spring 6 requires Jakarta EE 9.1+. JBoss EAP 7.4 is a Jakarta EE 8 container. You can&#39;t deploy Spring 6 applications on JBoss EAP 7.4. You&#39;d have to use [WildFly 28][1] if you want to use Spring 6.\r\n\r\nThat said, the error you&#39;re seeing; I&#39;m not sure what is happening there. I&#39;ve never seen that before, but maybe it&#39;s a side-affect of attempting to use Spring 6 with JBoss EAP 7.4.\r\n\r\n[1]: https://wildfly.org","title":"Unable to start Jboss version 7.4.9 in Eclipse 2022-09","body":"<p>Spring 6 requires Jakarta EE 9.1+. JBoss EAP 7.4 is a Jakarta EE 8 container. You can't deploy Spring 6 applications on JBoss EAP 7.4. You'd have to use <a href=\"https://wildfly.org\" rel=\"nofollow noreferrer\">WildFly 28</a> if you want to use Spring 6.</p>\n<p>That said, the error you're seeing; I'm not sure what is happening there. I've never seen that before, but maybe it's a side-affect of attempting to use Spring 6 with JBoss EAP 7.4.</p>\n"}],"owner":{"account_id":7588671,"reputation":29,"user_id":5756954,"accept_rate":60,"display_name":"Deepu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":699,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683766313,"creation_date":1683653651,"question_id":76212034,"body_markdown":"I am working on updating our java/Spring boot application from java 1.8 to java 17 and to spring 6. As part of this I have updated the eclipse version from Neon to 2022-09 and Jboss server in Eclipse to 7.4.9. But currently I am facing an issue while starting the jboss server in my local, it is throwing error within a few seconds after the server is started.\r\n\r\nEven though it is throwing FileNotFoundException, it is not defined which file is missing. I have compared the latest jboss standalone xml file with my old working jboss standalone file and found no lead, deployments section is removed from standalone xml. Provided full access server.log/audit.log and to all the folders inside standalone folder in Jboss directory also did not help and server.log is also not having much details regarding the error. Tried searching through the internet and did not get any solution for this issue. \r\n\r\n```\r\nFailed to read or configure the org.jboss.logmanager.LogManager\r\njava.lang.IllegalArgumentException: Failed to instantiate class &quot;org.jboss.logmanager.handlers.PeriodicRotatingFileHandler&quot; for handler &quot;FILE&quot;\r\nat org.jboss.loamanager@2.1.18.Final-redhat-0000.//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:122\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:42)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.validate(AbstractPropertyContaguration.java:118\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImp1.doPrepare(LogContextConfigurationImpl.java:336)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImpl.prepare(LogContextConfigurationImpl.java:289)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.confiq.LoqContextConfigurationImpl.commit(LoqContextConfigurationImpl.java:298)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:546)\r\nat org.jboss.logmanager@2.1.10.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:97)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:170)\r\nat org.jboss.Logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:132)\r\njava.Logging/java.util.Logging.LogManager.readPrimordialConfiguration\r\njava.logging/java.util.logging.LogManager$2.run(LogManager.java.395)\r\njava.base/java.security.AccessController.doPrivilege(AccessController.java:318)\r\njava.logging/java.util.Logging.LogManager.ensurelogManager.java.logging/java.util.logging.LogManager.getlogManager(LogManager.java:431)\r\njboss.modules.Main.main(Main.java.457)\r\nCaused by.java.lang.reflect.InvocationTargetException\r\nbase/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\nredhat-00001//org.jboss.logmanager.config.AbstractPropertyConfigurationsConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:120)\r\nCaused by.java.io.FileNotFoundException.(The handle is invalid)\r\nat java.base/java.io.FileOutputStream.open(Native.Method)\r\nat Java.Base/Java.10.FileOutputStream.open(FileOutputStream.java.293)\r\nat Java.base/Java.10.FileOutputStream.&lt;init&gt;(FileOutputStream.java.235)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org-jboss.logmanager.handlers.PeriodicRotatingfileHandler.setFil.(PeriodicRotatingFileHandler.java.109)\r\norg.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.setFileName(FileHandler.java.189.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.&lt;init&gt;(FileHandler.java:119.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//or..jboss.logmanager.handlers.PeriodicRotatingFileHandlor.&lt;init.(PeriodicRotatingFileHandler.java.77)\r\n```","title":"Unable to start Jboss version 7.4.9 in Eclipse 2022-09","body":"<p>I am working on updating our java/Spring boot application from java 1.8 to java 17 and to spring 6. As part of this I have updated the eclipse version from Neon to 2022-09 and Jboss server in Eclipse to 7.4.9. But currently I am facing an issue while starting the jboss server in my local, it is throwing error within a few seconds after the server is started.</p>\n<p>Even though it is throwing FileNotFoundException, it is not defined which file is missing. I have compared the latest jboss standalone xml file with my old working jboss standalone file and found no lead, deployments section is removed from standalone xml. Provided full access server.log/audit.log and to all the folders inside standalone folder in Jboss directory also did not help and server.log is also not having much details regarding the error. Tried searching through the internet and did not get any solution for this issue.</p>\n<pre><code>Failed to read or configure the org.jboss.logmanager.LogManager\njava.lang.IllegalArgumentException: Failed to instantiate class &quot;org.jboss.logmanager.handlers.PeriodicRotatingFileHandler&quot; for handler &quot;FILE&quot;\nat org.jboss.loamanager@2.1.18.Final-redhat-0000.//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:122\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:42)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.validate(AbstractPropertyContaguration.java:118\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImp1.doPrepare(LogContextConfigurationImpl.java:336)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImpl.prepare(LogContextConfigurationImpl.java:289)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.confiq.LoqContextConfigurationImpl.commit(LoqContextConfigurationImpl.java:298)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:546)\nat org.jboss.logmanager@2.1.10.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:97)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:170)\nat org.jboss.Logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:132)\njava.Logging/java.util.Logging.LogManager.readPrimordialConfiguration\njava.logging/java.util.logging.LogManager$2.run(LogManager.java.395)\njava.base/java.security.AccessController.doPrivilege(AccessController.java:318)\njava.logging/java.util.Logging.LogManager.ensurelogManager.java.logging/java.util.logging.LogManager.getlogManager(LogManager.java:431)\njboss.modules.Main.main(Main.java.457)\nCaused by.java.lang.reflect.InvocationTargetException\nbase/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nredhat-00001//org.jboss.logmanager.config.AbstractPropertyConfigurationsConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:120)\nCaused by.java.io.FileNotFoundException.(The handle is invalid)\nat java.base/java.io.FileOutputStream.open(Native.Method)\nat Java.Base/Java.10.FileOutputStream.open(FileOutputStream.java.293)\nat Java.base/Java.10.FileOutputStream.&lt;init&gt;(FileOutputStream.java.235)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org-jboss.logmanager.handlers.PeriodicRotatingfileHandler.setFil.(PeriodicRotatingFileHandler.java.109)\norg.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.setFileName(FileHandler.java.189.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.&lt;init&gt;(FileHandler.java:119.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//or..jboss.logmanager.handlers.PeriodicRotatingFileHandlor.&lt;init.(PeriodicRotatingFileHandler.java.77)\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1590501156,"creation_date":1590501156,"answer_id":62023740,"question_id":61822827,"body_markdown":"After many investigation, it seems that neither Spring or Spring Boot ensure the order of property source loading.\r\nI did remove my properties inheritance : 1 app, 1 app.properties file.","title":"@PropertySource values overriding","body":"<p>After many investigation, it seems that neither Spring or Spring Boot ensure the order of property source loading.\nI did remove my properties inheritance : 1 app, 1 app.properties file.</p>\n"},{"tags":[],"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683766034,"creation_date":1683766034,"answer_id":76223441,"question_id":61822827,"body_markdown":"A known workaround is renaming `application.properties` to something else (e.g. `app.properties`). Overriding works normally then.\r\n\r\nBut I admit this is not a proper fix to this issue and might not work in some scenarios.\r\n\r\nSource: a comment by Maksim Muruev (mmuruev) in [@PropertySource not overriding in order [SPR-13500]](https://github.com/spring-projects/spring-framework/issues/18078#issuecomment-711850211).","title":"@PropertySource values overriding","body":"<p>A known workaround is renaming <code>application.properties</code> to something else (e.g. <code>app.properties</code>). Overriding works normally then.</p>\n<p>But I admit this is not a proper fix to this issue and might not work in some scenarios.</p>\n<p>Source: a comment by Maksim Muruev (mmuruev) in <a href=\"https://github.com/spring-projects/spring-framework/issues/18078#issuecomment-711850211\" rel=\"nofollow noreferrer\">@PropertySource not overriding in order [SPR-13500]</a>.</p>\n"}],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62023740,"answer_count":2,"score":2,"last_activity_date":1683766034,"creation_date":1589556500,"question_id":61822827,"body_markdown":"I&#39;m trying to have 2 external files for my app config, one with common properties for all my apps and one with specific things for each app.\r\n\r\nIn my Springboot App, I declare : \r\n```\r\n@PropertySource(value = {&quot;file:/etc/company/application.properties&quot;,\r\n        &quot;file:/etc/company/myApp/application.properties&quot;}, ignoreResourceNotFound = true)\r\n```\r\n\r\nIn logs, \r\n```\r\nConverting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper\r\nConverting PropertySource URL [file:/etc/company/myApp/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\r\nConverting PropertySource URL [file:/etc/company/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\r\n```\r\nAnd the properties from **/etc/company/application.properties** are the ones taken into account..\r\nThis is the exact inverse of what is mentioned in PropertySource javadoc.\r\n\r\nAm I missing something here ?","title":"@PropertySource values overriding","body":"<p>I'm trying to have 2 external files for my app config, one with common properties for all my apps and one with specific things for each app.</p>\n\n<p>In my Springboot App, I declare : </p>\n\n<pre><code>@PropertySource(value = {\"file:/etc/company/application.properties\",\n        \"file:/etc/company/myApp/application.properties\"}, ignoreResourceNotFound = true)\n</code></pre>\n\n<p>In logs, </p>\n\n<pre><code>Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper\nConverting PropertySource URL [file:/etc/company/myApp/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\nConverting PropertySource URL [file:/etc/company/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\n</code></pre>\n\n<p>And the properties from <strong>/etc/company/application.properties</strong> are the ones taken into account..\nThis is the exact inverse of what is mentioned in PropertySource javadoc.</p>\n\n<p>Am I missing something here ?</p>\n"},{"tags":["java","spring","runtime","datasource","multi-tenant"],"answers":[{"tags":[],"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1507051062,"creation_date":1507051062,"answer_id":46550054,"question_id":46515298,"body_markdown":"I finally managed to get things working straight. For someone having same issue, just check [this](https://github.com/bcssp10/multi-tenant) multi-tenant demo project.\r\n","title":"spring add datasource at runtime","body":"<p>I finally managed to get things working straight. For someone having same issue, just check <a href=\"https://github.com/bcssp10/multi-tenant\" rel=\"noreferrer\">this</a> multi-tenant demo project.</p>\n"}],"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11807,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":46550054,"answer_count":1,"score":13,"last_activity_date":1683765705,"creation_date":1506881071,"question_id":46515298,"body_markdown":"I am working on a spring boot multi-tenant application with database per tenant strategy. Requirement is that to add new databases at runtime which means I have to create new datasource objects dynamically.\r\n\r\nI also looked upon Spring&#39;s AbstractRoutingDataSource but in needs pre-defined datasources. So I just want to know how to add/remove datasource without restarting application server.\r\n\r\nThanks in advance.","title":"spring add datasource at runtime","body":"<p>I am working on a spring boot multi-tenant application with database per tenant strategy. Requirement is that to add new databases at runtime which means I have to create new datasource objects dynamically.</p>\n\n<p>I also looked upon Spring's AbstractRoutingDataSource but in needs pre-defined datasources. So I just want to know how to add/remove datasource without restarting application server.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","windows","launch"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1683762422,"post_id":76223252,"comment_id":134418017,"body_markdown":"Uh, in the JDK there is one debugger that might be of interest: [`jhsdb`](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jhsdb.html). Is that what you mean? Debugging and such is usually linked to development, so the JDK is probably what you need.","body":"Uh, in the JDK there is one debugger that might be of interest: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jhsdb.html\" rel=\"nofollow noreferrer\"><code>jhsdb</code></a>. Is that what you mean? Debugging and such is usually linked to development, so the JDK is probably what you need."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683765286,"creation_date":1683762570,"answer_id":76223267,"question_id":76223252,"body_markdown":"&gt; The Java JDK and JRE has been installed\r\n\r\nYou need only one or the other.\r\n\r\n - To develop Java apps, install a [JDK][1].\r\n - To run an existing Java app, install a [JRE][2].\r\n\r\n&gt; no Java JRE icon appears on the desktop\r\n\r\n**Java has no built-in [GUI][3]** to display on a desktop [OS][4] such as Windows, macOS, or Linux. So no apps icons will appear.\r\n\r\nIn the `bin` directory of a JDK/JRE, you will find [several console apps][5]. For example, the `java` console app is used to run Java apps. Invoke these console apps on a command-line in a terminal app such as [*Windows Terminal*](https://en.wikipedia.org/wiki/Windows_Terminal) on the Windows OS. \r\n\r\nFor example, to see the current version of the default Java installation, on a command-line execute:\r\n\r\n```bash\r\njava --version\r\n```\r\n\r\nFor more info, study a tutorial such as: [Run a Java Application from the Command Line][6] by Baeldung.\r\n\r\nAs [commented by Bodewes][7], if you want to launch a postmortem debugger to analyze the content of a core dump from a crashed Java Virtual Machine (JVM), use the [`jhsdb`][8] console app. \r\n\r\nAnother debugging tool is `jdb`. That command demonstrates the [Java Platform Debugger Architecture][9] and provides inspection and debugging of a local or remote JVM.\r\n\r\nWhile developing Java software, most folks rely on the debugging facility of their favorite [IDE][10] such as [IntelliJ][11], [NetBeans][12], or [Eclipse][13].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [2]: https://en.wikipedia.org/wiki/Java_Runtime_Environment\r\n  [3]: https://en.wikipedia.org/wiki/Graphical_user_interface\r\n  [4]: https://en.wikipedia.org/wiki/Operating_system\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/index.html\r\n  [6]: https://www.baeldung.com/java-run-jar-with-arguments\r\n  [7]: https://stackoverflow.com/questions/76223252/how-to-launch-windows-10-java-jre/76223267#comment134418017_76223252\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/jhsdb.html\r\n  [9]: https://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture\r\n  [10]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [11]: https://www.jetbrains.com/help/idea/debugging-code.html#general-procedure\r\n  [12]: https://netbeans.apache.org/kb/docs/java/debug-visual.html\r\n  [13]: https://www.baeldung.com/eclipse-debugging","title":"How to launch Windows 10 Java JRE","body":"<blockquote>\n<p>The Java JDK and JRE has been installed</p>\n</blockquote>\n<p>You need only one or the other.</p>\n<ul>\n<li>To develop Java apps, install a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a>.</li>\n<li>To run an existing Java app, install a <a href=\"https://en.wikipedia.org/wiki/Java_Runtime_Environment\" rel=\"nofollow noreferrer\">JRE</a>.</li>\n</ul>\n<blockquote>\n<p>no Java JRE icon appears on the desktop</p>\n</blockquote>\n<p><strong>Java has no built-in <a href=\"https://en.wikipedia.org/wiki/Graphical_user_interface\" rel=\"nofollow noreferrer\">GUI</a></strong> to display on a desktop <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">OS</a> such as Windows, macOS, or Linux. So no apps icons will appear.</p>\n<p>In the <code>bin</code> directory of a JDK/JRE, you will find <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/index.html\" rel=\"nofollow noreferrer\">several console apps</a>. For example, the <code>java</code> console app is used to run Java apps. Invoke these console apps on a command-line in a terminal app such as <a href=\"https://en.wikipedia.org/wiki/Windows_Terminal\" rel=\"nofollow noreferrer\"><em>Windows Terminal</em></a> on the Windows OS.</p>\n<p>For example, to see the current version of the default Java installation, on a command-line execute:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java --version\n</code></pre>\n<p>For more info, study a tutorial such as: <a href=\"https://www.baeldung.com/java-run-jar-with-arguments\" rel=\"nofollow noreferrer\">Run a Java Application from the Command Line</a> by Baeldung.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/76223252/how-to-launch-windows-10-java-jre/76223267#comment134418017_76223252\">commented by Bodewes</a>, if you want to launch a postmortem debugger to analyze the content of a core dump from a crashed Java Virtual Machine (JVM), use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jhsdb.html\" rel=\"nofollow noreferrer\"><code>jhsdb</code></a> console app.</p>\n<p>Another debugging tool is <code>jdb</code>. That command demonstrates the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture\" rel=\"nofollow noreferrer\">Java Platform Debugger Architecture</a> and provides inspection and debugging of a local or remote JVM.</p>\n<p>While developing Java software, most folks rely on the debugging facility of their favorite <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> such as <a href=\"https://www.jetbrains.com/help/idea/debugging-code.html#general-procedure\" rel=\"nofollow noreferrer\">IntelliJ</a>, <a href=\"https://netbeans.apache.org/kb/docs/java/debug-visual.html\" rel=\"nofollow noreferrer\">NetBeans</a>, or <a href=\"https://www.baeldung.com/eclipse-debugging\" rel=\"nofollow noreferrer\">Eclipse</a>.</p>\n"}],"owner":{"account_id":28573785,"reputation":1,"user_id":21875673,"display_name":"Mike Rowkosm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683765286,"creation_date":1683762158,"question_id":76223252,"body_markdown":"The Java JDK and JRE has been installed and the environment variables set but no Java JRE icon appears on the desktop. How do you start it?\r\n\r\ntried running it from the MSDOS command line but &quot;&gt;Java&quot; gets you the jar file interpreter.\r\nI need the java runtime interactive source debugger. ","title":"How to launch Windows 10 Java JRE","body":"<p>The Java JDK and JRE has been installed and the environment variables set but no Java JRE icon appears on the desktop. How do you start it?</p>\n<p>tried running it from the MSDOS command line but &quot;&gt;Java&quot; gets you the jar file interpreter.\nI need the java runtime interactive source debugger.</p>\n"},{"tags":["java","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683762107,"creation_date":1683084635,"answer_id":76160250,"question_id":76160177,"body_markdown":"For code samples, take a look at [the relevant snippets on Google&#39;s GitHub](https://github.com/googleapis/java-bigquery/blob/0ffbac349cc27ce72b06e05723e45a973b69cef1/samples/snippets/src/main/java/com/example/bigquery/QueryBatch.java).\r\n\r\nBefore trying this sample, follow [the Java setup instructions in the BigQuery QuickStart using client libraries](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries).\r\n\r\nFor more information, see [the BigQuery Java API reference documentation](https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/overview).\r\n\r\nTo authenticate to BigQuery, set up the Application Default Credentials. For more information, see [Set up authentication for a local development environment](https://cloud.google.com/docs/authentication/provide-credentials-adc#local-dev). ","title":"BigQuery for Spring batch metadata","body":"<p>For code samples, take a look at <a href=\"https://github.com/googleapis/java-bigquery/blob/0ffbac349cc27ce72b06e05723e45a973b69cef1/samples/snippets/src/main/java/com/example/bigquery/QueryBatch.java\" rel=\"nofollow noreferrer\">the relevant snippets on Google's GitHub</a>.</p>\n<p>Before trying this sample, follow <a href=\"https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries\" rel=\"nofollow noreferrer\">the Java setup instructions in the BigQuery QuickStart using client libraries</a>.</p>\n<p>For more information, see <a href=\"https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/overview\" rel=\"nofollow noreferrer\">the BigQuery Java API reference documentation</a>.</p>\n<p>To authenticate to BigQuery, set up the Application Default Credentials. For more information, see <a href=\"https://cloud.google.com/docs/authentication/provide-credentials-adc#local-dev\" rel=\"nofollow noreferrer\">Set up authentication for a local development environment</a>.</p>\n"}],"owner":{"account_id":3146957,"reputation":462,"user_id":2661251,"accept_rate":25,"display_name":"gcpdev-guy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683104450,"answer_count":1,"score":0,"last_activity_date":1683762107,"creation_date":1683083155,"question_id":76160177,"body_markdown":"Anyone used BigQuery to store spring batch jobs, steps and execution instead of other RDBMS? Trying to build a spring-boot batch application to read from BQ table and write it to a pubsub. So thought of using the same BQ to store jobs metadata. Any help is appreciated?","title":"BigQuery for Spring batch metadata","body":"<p>Anyone used BigQuery to store spring batch jobs, steps and execution instead of other RDBMS? Trying to build a spring-boot batch application to read from BQ table and write it to a pubsub. So thought of using the same BQ to store jobs metadata. Any help is appreciated?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1494936859,"post_id":44001081,"comment_id":75030554,"body_markdown":"`MouseListener`? `MouseMotionListener`?","body":"<code>MouseListener</code>? <code>MouseMotionListener</code>?"},{"owner":{"account_id":10693349,"reputation":31,"user_id":7871451,"display_name":"Yuan  Kai"},"score":0,"creation_date":1494937895,"post_id":44001081,"comment_id":75031304,"body_markdown":"mouse listener doesn&#39;t work every frame","body":"mouse listener doesn&#39;t work every frame"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1494966809,"post_id":44001081,"comment_id":75050355,"body_markdown":"*&quot;Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel&quot;* - No really, because the panel is contained within the frame&#39;s borders, so it&#39;s offset. I think a greater explanation of the problem you&#39;re trying to solve would help others help you","body":"<i>&quot;Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel&quot;</i> - No really, because the panel is contained within the frame&#39;s borders, so it&#39;s offset. I think a greater explanation of the problem you&#39;re trying to solve would help others help you"}],"answers":[{"tags":[],"owner":{"account_id":10913378,"reputation":527,"user_id":8022004,"display_name":"qlown"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1494968866,"creation_date":1494968866,"answer_id":44011593,"question_id":44001081,"body_markdown":"Question is &quot;How to get mouse location relative to the JPanel on every frame&quot;.\r\n\r\nI take from this you don&#39;t necessarily have mouse events for each frame, so you have to poll mouse position (relative to screen), and compute the relative position (relative to your JPanel).\r\n\r\nAll in all, it makes me think you want this:\r\n\r\n    Point p = MouseInfo.getPointerInfo().getLocation();\r\n    SwingUtilities.convertPointFromScreen(p, yourJPanel);\r\n    // Then use &#39;p&#39;, which was modified by method call above","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Question is \"How to get mouse location relative to the JPanel on every frame\".</p>\n\n<p>I take from this you don't necessarily have mouse events for each frame, so you have to poll mouse position (relative to screen), and compute the relative position (relative to your JPanel).</p>\n\n<p>All in all, it makes me think you want this:</p>\n\n<pre><code>Point p = MouseInfo.getPointerInfo().getLocation();\nSwingUtilities.convertPointFromScreen(p, yourJPanel);\n// Then use 'p', which was modified by method call above\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683761485,"creation_date":1683724029,"answer_id":76218786,"question_id":44001081,"body_markdown":"Let&#39;s say you created a JPanel like so:\r\n\r\n`JPanel myJPanel = new JPanel;`\r\n\r\nyou can use:\r\n\r\n`myJPanel.getMousePosition().x` and `myJPanel.getMousePosition().y` to get the x and y coordinates of the mouse respectively. These will be relative to the top right corner of your JPanel.\r\n\r\nBe careful, if your mouse isn&#39;t inside the panel, or the panel isn&#39;t visible, this will return a null value, so, if you ever want to call these functions, wrap the code that uses them inside a `try` like so:\r\n````\r\ntry{\r\n    [insert code that uses myJPanel.getMousePosition().x/y here, if your mouse isn&#39;t inside the JPanel or the JPanel isn&#39;t visible, the code here will not be executed]\r\n   }catch(NullPointerException e) {[if your mouse isn&#39;t inside the JPanel or the JPanel isn&#39;t visible, code placed here will be executed]}\r\n````\r\nThis will stop your code throwing errors in cases where your mouse is outside the bounds of the JPanel or your JPanel isn&#39;t visible.\r\n\r\n This can work well if you only ever intend to execute the code when your mouse is inside a visible JPanel, but otherwise, I would stick to other methods to get the mouse coordinates.\r\n\r\nIt&#39;s useful for doing things such as clicking on objects inside your JPanel, but it does have limitations.","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Let's say you created a JPanel like so:</p>\n<p><code>JPanel myJPanel = new JPanel;</code></p>\n<p>you can use:</p>\n<p><code>myJPanel.getMousePosition().x</code> and <code>myJPanel.getMousePosition().y</code> to get the x and y coordinates of the mouse respectively. These will be relative to the top right corner of your JPanel.</p>\n<p>Be careful, if your mouse isn't inside the panel, or the panel isn't visible, this will return a null value, so, if you ever want to call these functions, wrap the code that uses them inside a <code>try</code> like so:</p>\n<pre><code>try{\n    [insert code that uses myJPanel.getMousePosition().x/y here, if your mouse isn't inside the JPanel or the JPanel isn't visible, the code here will not be executed]\n   }catch(NullPointerException e) {[if your mouse isn't inside the JPanel or the JPanel isn't visible, code placed here will be executed]}\n</code></pre>\n<p>This will stop your code throwing errors in cases where your mouse is outside the bounds of the JPanel or your JPanel isn't visible.</p>\n<p>This can work well if you only ever intend to execute the code when your mouse is inside a visible JPanel, but otherwise, I would stick to other methods to get the mouse coordinates.</p>\n<p>It's useful for doing things such as clicking on objects inside your JPanel, but it does have limitations.</p>\n"}],"owner":{"account_id":10693349,"reputation":31,"user_id":7871451,"display_name":"Yuan  Kai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44011593,"answer_count":2,"score":1,"last_activity_date":1683761485,"creation_date":1494936637,"question_id":44001081,"body_markdown":"Now I&#39;m doing this\r\n\r\n    mouseX = MouseInfo.getPointerInfo().getLocation().x;\r\n\r\nbut this doesn&#39;t work anymore if I move the JFrame.\r\n\r\nAlso I need the mouse position every time I move my mouse because I want to drag stuff in my game thus mouse event won&#39;t work.\r\n\r\nHow do I get the mouse location relative to the JPanel every frame?\r\n\r\n------------------------------------------------------------------\r\n\r\nEdit 1: Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel \r\n\r\n","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Now I'm doing this</p>\n\n<pre><code>mouseX = MouseInfo.getPointerInfo().getLocation().x;\n</code></pre>\n\n<p>but this doesn't work anymore if I move the JFrame.</p>\n\n<p>Also I need the mouse position every time I move my mouse because I want to drag stuff in my game thus mouse event won't work.</p>\n\n<p>How do I get the mouse location relative to the JPanel every frame?</p>\n\n<hr>\n\n<p>Edit 1: Ok I have figured it out. I'm take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel </p>\n"},{"tags":["java","concurrency","java-8"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1448906107,"post_id":34004802,"comment_id":55765476,"body_markdown":"I don&#39;t understand what you are trying to do. What is your `combine` method? What&#39;s its purpose? What do you want to do with the `CompletionStage`s? Who is the consumer at the end? What should be the result they receive?","body":"I don&#39;t understand what you are trying to do. What is your <code>combine</code> method? What&#39;s its purpose? What do you want to do with the <code>CompletionStage</code>s? Who is the consumer at the end? What should be the result they receive?"},{"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"score":1,"creation_date":1448907364,"post_id":34004802,"comment_id":55766161,"body_markdown":"@SotiriosDelimanolis, `combine` is a function taking 4 parameters and returning 1 of type `Combined`. The consumer can be for example another function taking `Combined` as a parameter and returning another `CompletionStage`, which is invoked using `combinedDataCompletionStage.thenCompose(...)`.","body":"@SotiriosDelimanolis, <code>combine</code> is a function taking 4 parameters and returning 1 of type <code>Combined</code>. The consumer can be for example another function taking <code>Combined</code> as a parameter and returning another <code>CompletionStage</code>, which is invoked using <code>combinedDataCompletionStage.thenCompose(...)</code>."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":62,"is_accepted":true,"score":62,"last_activity_date":1448908169,"creation_date":1448908169,"answer_id":34005471,"question_id":34004802,"body_markdown":"The only way to combine multiple stages that scales well with a growing number of stages, is to use `CompletableFuture`. If your `CompletionStage`s aren‚Äôt `CompletableFuture`s you may still convert them using `.toCompletableFuture()`:\r\n\r\n    CompletableFuture&lt;A&gt; aCompletionStage = getA().toCompletableFuture();\r\n    CompletableFuture&lt;B&gt; bCompletionStage = getB().toCompletableFuture();\r\n    CompletableFuture&lt;C&gt; cCompletionStage = getC().toCompletableFuture();\r\n    CompletableFuture&lt;D&gt; dCompletionStage = getD().toCompletableFuture();\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = CompletableFuture.allOf(\r\n        aCompletionStage, bCompletionStage, cCompletionStage, dCompletionStage)\r\n        .thenApply(ignoredVoid -&gt; combine(\r\n            aCompletionStage.join(), bCompletionStage.join(),\r\n            cCompletionStage.join(), dCompletionStage.join()) );\r\n\r\nThis contains more boilerplate than combining two stages via `thenCombine` but the boilerplate doesn‚Äôt grow when adding more stages to it.\r\n\r\n---\r\n\r\nNote that even with your original `thenCombine` approach, you don‚Äôt need a `Triple`, a `Pair` is sufficient:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage =\r\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of)).thenCombine(\r\n            cCompletionStage.thenCombine(dCompletionStage, Pair::of),\r\n            (ab, cd) -&gt; combine(ab.getLeft(), ab.getRight(), cd.getLeft(), cd.getRight()));\r\n\r\nStill, it doesn‚Äôt scale well if you want to combine more stages.\r\n\r\n---\r\nAn in-between solution (regarding complexity) might be:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\r\n        a -&gt; bCompletionStage.thenCompose(b -&gt; cCompletionStage.thenCompose(\r\n            c -&gt; dCompletionStage.thenApply(d -&gt; combine(a, b, c, d)))));\r\n\r\nThat‚Äôs simpler in its structure but still doesn‚Äôt scale well with more more stages.","title":"How to combine 3 or more CompletionStages?","body":"<p>The only way to combine multiple stages that scales well with a growing number of stages, is to use <code>CompletableFuture</code>. If your <code>CompletionStage</code>s aren‚Äôt <code>CompletableFuture</code>s you may still convert them using <code>.toCompletableFuture()</code>:</p>\n\n<pre><code>CompletableFuture&lt;A&gt; aCompletionStage = getA().toCompletableFuture();\nCompletableFuture&lt;B&gt; bCompletionStage = getB().toCompletableFuture();\nCompletableFuture&lt;C&gt; cCompletionStage = getC().toCompletableFuture();\nCompletableFuture&lt;D&gt; dCompletionStage = getD().toCompletableFuture();\n\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage = CompletableFuture.allOf(\n    aCompletionStage, bCompletionStage, cCompletionStage, dCompletionStage)\n    .thenApply(ignoredVoid -&gt; combine(\n        aCompletionStage.join(), bCompletionStage.join(),\n        cCompletionStage.join(), dCompletionStage.join()) );\n</code></pre>\n\n<p>This contains more boilerplate than combining two stages via <code>thenCombine</code> but the boilerplate doesn‚Äôt grow when adding more stages to it.</p>\n\n<hr>\n\n<p>Note that even with your original <code>thenCombine</code> approach, you don‚Äôt need a <code>Triple</code>, a <code>Pair</code> is sufficient:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage =\n    aCompletionStage.thenCombine(bCompletionStage, (Pair::of)).thenCombine(\n        cCompletionStage.thenCombine(dCompletionStage, Pair::of),\n        (ab, cd) -&gt; combine(ab.getLeft(), ab.getRight(), cd.getLeft(), cd.getRight()));\n</code></pre>\n\n<p>Still, it doesn‚Äôt scale well if you want to combine more stages.</p>\n\n<hr>\n\n<p>An in-between solution (regarding complexity) might be:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\n    a -&gt; bCompletionStage.thenCompose(b -&gt; cCompletionStage.thenCompose(\n        c -&gt; dCompletionStage.thenApply(d -&gt; combine(a, b, c, d)))));\n</code></pre>\n\n<p>That‚Äôs simpler in its structure but still doesn‚Äôt scale well with more more stages.</p>\n"},{"tags":[],"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1448972408,"creation_date":1448972408,"answer_id":34020329,"question_id":34004802,"body_markdown":"[Holger&#39;s third answer][1] can be made a little bit shorter:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\r\n        a -&gt; bCompletionStage.thenCompose(\r\n            b -&gt; cCompletionStage.thenCombine(dCompletionStage,\r\n                (c, d) -&gt; combine(a, b, c, d))));\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/34005471/545298","title":"How to combine 3 or more CompletionStages?","body":"<p><a href=\"https://stackoverflow.com/a/34005471/545298\">Holger's third answer</a> can be made a little bit shorter:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\n    a -&gt; bCompletionStage.thenCompose(\n        b -&gt; cCompletionStage.thenCombine(dCompletionStage,\n            (c, d) -&gt; combine(a, b, c, d))));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5055381,"reputation":109,"user_id":4058774,"accept_rate":0,"display_name":"Caspar Nonclercq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535476048,"creation_date":1535476048,"answer_id":52063117,"question_id":34004802,"body_markdown":"I think you should use an intermediary object, but one of your own instead of using `Pair` and `Tuple`\r\n\r\n    public R method() {\r\n        CompletableFuture&lt;A&gt; aFuture = getAFuture();\r\n        CompletableFuture&lt;B&gt; bFuture = getBFuture();\r\n        CompletableFuture&lt;C&gt; cFuture = getCFuture();\r\n        CompletableFuture&lt;D&gt; dFuture = getDFuture();\r\n        \r\n        return CompletableFuture.completedFuture(new WellNamedResultHolder())\r\n                .thenCombineAsync(aFuture, WellNamedResultHolder::withAResult)\r\n                .thenCombineAsync(bFuture, WellNamedResultHolder::withBResult)\r\n                .thenCombineAsync(cFuture, WellNamedResultHolder::withCResult)\r\n                .thenCombineAsync(dFuture, WellNamedResultHolder::withDResult)\r\n                .thenApplyAsync(this::combineAllTheResults);\r\n    }\r\n    \r\n    private static class WellNamedResultHolder {\r\n        private A aResult;\r\n        private B bResult;\r\n        private C cResult;\r\n        private D dResult;\r\n\r\n        // Getters\r\n\r\n        public WellNamedResultHolder withAResult(final A aResult) {\r\n            this.aResult = aResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withBResult(final B bResult) {\r\n            this.bResult = bResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withCResult(final C cResult) {\r\n            this.cResult = cResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withDResult(final D dResult) {\r\n            this.dResult = dResult;\r\n            return this;\r\n        }\r\n    }\r\n\r\nThe actual form of the result holder can obviously change to match your own needs, giving you greater flexibility. You also get to be in charge of what happens as these futures complete. Although there is more boilerplate, you get code that is more descriptive of what is happening (which lombok can tidy up).","title":"How to combine 3 or more CompletionStages?","body":"<p>I think you should use an intermediary object, but one of your own instead of using <code>Pair</code> and <code>Tuple</code></p>\n\n<pre><code>public R method() {\n    CompletableFuture&lt;A&gt; aFuture = getAFuture();\n    CompletableFuture&lt;B&gt; bFuture = getBFuture();\n    CompletableFuture&lt;C&gt; cFuture = getCFuture();\n    CompletableFuture&lt;D&gt; dFuture = getDFuture();\n\n    return CompletableFuture.completedFuture(new WellNamedResultHolder())\n            .thenCombineAsync(aFuture, WellNamedResultHolder::withAResult)\n            .thenCombineAsync(bFuture, WellNamedResultHolder::withBResult)\n            .thenCombineAsync(cFuture, WellNamedResultHolder::withCResult)\n            .thenCombineAsync(dFuture, WellNamedResultHolder::withDResult)\n            .thenApplyAsync(this::combineAllTheResults);\n}\n\nprivate static class WellNamedResultHolder {\n    private A aResult;\n    private B bResult;\n    private C cResult;\n    private D dResult;\n\n    // Getters\n\n    public WellNamedResultHolder withAResult(final A aResult) {\n        this.aResult = aResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withBResult(final B bResult) {\n        this.bResult = bResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withCResult(final C cResult) {\n        this.cResult = cResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withDResult(final D dResult) {\n        this.dResult = dResult;\n        return this;\n    }\n}\n</code></pre>\n\n<p>The actual form of the result holder can obviously change to match your own needs, giving you greater flexibility. You also get to be in charge of what happens as these futures complete. Although there is more boilerplate, you get code that is more descriptive of what is happening (which lombok can tidy up).</p>\n"},{"tags":[],"owner":{"account_id":2190659,"reputation":2306,"user_id":1937795,"accept_rate":75,"display_name":"Itchy"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1551416912,"creation_date":1551416912,"answer_id":54938274,"question_id":34004802,"body_markdown":"You asked about &quot;3 or more&quot;, if you have them in a List as CompletableFutures (see other answers) you could use this handy method:\r\n\r\n    private static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; join(List&lt;CompletableFuture&lt;T&gt;&gt; executionPromises) {\r\n        CompletableFuture&lt;Void&gt; joinedPromise = CompletableFuture.allOf(executionPromises.toArray(CompletableFuture[]::new));\r\n        return joinedPromise.thenApply(voit -&gt; executionPromises.stream().map(CompletableFuture::join).collect(Collectors.toList()));\r\n    }\r\n\r\nIt converts your &quot;list of futures&quot; to a &quot;future for a list of the results&quot;.","title":"How to combine 3 or more CompletionStages?","body":"<p>You asked about \"3 or more\", if you have them in a List as CompletableFutures (see other answers) you could use this handy method:</p>\n\n<pre><code>private static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; join(List&lt;CompletableFuture&lt;T&gt;&gt; executionPromises) {\n    CompletableFuture&lt;Void&gt; joinedPromise = CompletableFuture.allOf(executionPromises.toArray(CompletableFuture[]::new));\n    return joinedPromise.thenApply(voit -&gt; executionPromises.stream().map(CompletableFuture::join).collect(Collectors.toList()));\n}\n</code></pre>\n\n<p>It converts your \"list of futures\" to a \"future for a list of the results\".</p>\n"},{"tags":[],"owner":{"account_id":7238992,"reputation":159,"user_id":5523155,"accept_rate":100,"display_name":"Krish"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558997838,"creation_date":1558997838,"answer_id":56333226,"question_id":34004802,"body_markdown":"I had a similar problem but had more than 3 completablefutures so building up on [Holger&#39;s][1] answer I made a small generic utility. \r\n\r\n    public static &lt;T, R&gt; CompletableFuture&lt;R&gt; allOf(List&lt;CompletableFuture&lt;T&gt;&gt; args, Function&lt;List&lt;T&gt;, R&gt; combiner) {\r\n        final Queue&lt;CompletableFuture&lt;T&gt;&gt; queue = new LinkedList&lt;&gt;();\r\n        for (CompletableFuture&lt;T&gt; arg : args) {\r\n            queue.add(arg);\r\n        }\r\n        return aggregator(queue, new ArrayList&lt;&gt;(), combiner);\r\n    }\r\n\r\n    private static &lt;T, R&gt; CompletableFuture&lt;R&gt; aggregator(Queue&lt;CompletableFuture&lt;T&gt;&gt; queue, List&lt;T&gt; arg,\r\n            Function&lt;List&lt;T&gt;, R&gt; combiner) {\r\n        if (queue.size() == 2)\r\n            return queue.poll().thenCombine(queue.poll(), (c, d) -&gt; {\r\n                arg.add(c);\r\n                arg.add(d);\r\n                return combiner.apply(arg);\r\n            });\r\n        return queue.poll().thenCompose(data -&gt; {\r\n            arg.add(data);\r\n            return aggregator(queue, arg, combiner);\r\n        });\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/34004802/how-to-combine-3-or-more-completionstages/34005471#34005471","title":"How to combine 3 or more CompletionStages?","body":"<p>I had a similar problem but had more than 3 completablefutures so building up on <a href=\"https://stackoverflow.com/questions/34004802/how-to-combine-3-or-more-completionstages/34005471#34005471\">Holger's</a> answer I made a small generic utility. </p>\n\n<pre><code>public static &lt;T, R&gt; CompletableFuture&lt;R&gt; allOf(List&lt;CompletableFuture&lt;T&gt;&gt; args, Function&lt;List&lt;T&gt;, R&gt; combiner) {\n    final Queue&lt;CompletableFuture&lt;T&gt;&gt; queue = new LinkedList&lt;&gt;();\n    for (CompletableFuture&lt;T&gt; arg : args) {\n        queue.add(arg);\n    }\n    return aggregator(queue, new ArrayList&lt;&gt;(), combiner);\n}\n\nprivate static &lt;T, R&gt; CompletableFuture&lt;R&gt; aggregator(Queue&lt;CompletableFuture&lt;T&gt;&gt; queue, List&lt;T&gt; arg,\n        Function&lt;List&lt;T&gt;, R&gt; combiner) {\n    if (queue.size() == 2)\n        return queue.poll().thenCombine(queue.poll(), (c, d) -&gt; {\n            arg.add(c);\n            arg.add(d);\n            return combiner.apply(arg);\n        });\n    return queue.poll().thenCompose(data -&gt; {\n        arg.add(data);\n        return aggregator(queue, arg, combiner);\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8180146,"reputation":49,"user_id":6157639,"display_name":"Jack"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1580899923,"creation_date":1580899923,"answer_id":60074169,"question_id":34004802,"body_markdown":"I think that CompleableFuture.allOf() function can help you.\r\n\r\nFor example: (View full Class [here][1])\r\n\r\n        List&lt;String&gt; urls = [\r\n                &quot;https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994&quot;,\r\n                &quot;https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994?a=1&quot;\r\n        ]\r\n        CompletableFuture&lt;Response&gt;[] futures = new Completablefuture[2]\r\n        for (int i = 0; i &lt; urls.size(); i++) {\r\n            futures[i] = asyncHttpClient.prepareGet(urls[i]).execute().toCompletableFuture()\r\n\r\n        }\r\n\r\n        CompletableFuture.allOf(futures).thenApply { future -&gt;\r\n            return futures.collect { it.join() }\r\n        }.thenApply({ responses -&gt;\r\n            //Do something with results\r\n            responses.each { println(&quot;Status code: &quot; + it.statusCode) }\r\n        })\r\n\r\n\r\n  [1]: https://gist.github.com/huantt/49f26c56699362755bee78a0090928d1","title":"How to combine 3 or more CompletionStages?","body":"<p>I think that CompleableFuture.allOf() function can help you.</p>\n\n<p>For example: (View full Class <a href=\"https://gist.github.com/huantt/49f26c56699362755bee78a0090928d1\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>    List&lt;String&gt; urls = [\n            \"https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994\",\n            \"https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994?a=1\"\n    ]\n    CompletableFuture&lt;Response&gt;[] futures = new Completablefuture[2]\n    for (int i = 0; i &lt; urls.size(); i++) {\n        futures[i] = asyncHttpClient.prepareGet(urls[i]).execute().toCompletableFuture()\n\n    }\n\n    CompletableFuture.allOf(futures).thenApply { future -&gt;\n        return futures.collect { it.join() }\n    }.thenApply({ responses -&gt;\n        //Do something with results\n        responses.each { println(\"Status code: \" + it.statusCode) }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":348277,"reputation":1874,"user_id":1052099,"accept_rate":60,"display_name":"TriCore"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1583346195,"creation_date":1583346195,"answer_id":60532456,"question_id":34004802,"body_markdown":"Any number of CompletableFuture can be combined (reduced)\r\n\r\n    CompletionStage&lt;A&gt; futA = getA();\r\n    CompletionStage&lt;B&gt; futB = getB(); \r\n    CompletionStage&lt;C&gt; futC = getC(); \r\n\r\n    Stream.of(futA, futB, futC) \r\n        .reduce((f1, f2) -&gt; f1.thenCombine(f2, (d1, d2) -&gt; combine(d1, d2));\r\n\r\n\r\nThe implementation of *combine* method will be responsible to merge data values (A, B and C), which could be tricky if A, B and C are disparate.","title":"How to combine 3 or more CompletionStages?","body":"<p>Any number of CompletableFuture can be combined (reduced)</p>\n\n<pre><code>CompletionStage&lt;A&gt; futA = getA();\nCompletionStage&lt;B&gt; futB = getB(); \nCompletionStage&lt;C&gt; futC = getC(); \n\nStream.of(futA, futB, futC) \n    .reduce((f1, f2) -&gt; f1.thenCombine(f2, (d1, d2) -&gt; combine(d1, d2));\n</code></pre>\n\n<p>The implementation of <em>combine</em> method will be responsible to merge data values (A, B and C), which could be tricky if A, B and C are disparate.</p>\n"},{"tags":[],"owner":{"account_id":2139684,"reputation":8710,"user_id":2019549,"accept_rate":62,"display_name":"cambunctious"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607630551,"creation_date":1607630551,"answer_id":65241514,"question_id":34004802,"body_markdown":"You can create a helper function...\r\n\r\n```java\r\ncombine3(\r\n    futureA, futureB, futureC,\r\n    (a, b, c) -&gt; {\r\n      // let&#39;s go!\r\n    }).toCompletableFuture();\r\n```\r\n\r\nDefinition:\r\n\r\n```java\r\nprivate static &lt;A, B, C, D&gt; CompletionStage&lt;D&gt; combine3(\r\n        CompletionStage&lt;A&gt; aStage,\r\n        CompletionStage&lt;B&gt; bStage,\r\n        CompletionStage&lt;C&gt; cStage,\r\n        TriFunction&lt;A, B, C, D&gt; f\r\n) {\r\n    return aStage.thenCompose(\r\n            a -&gt; bStage.thenCombine(cStage,\r\n                    (b, c) -&gt; f.apply(a, b, c)));\r\n}\r\n\r\ninterface TriFunction&lt;A, B, C, D&gt; {\r\n    D apply(A a, B b, C c);\r\n}\r\n```","title":"How to combine 3 or more CompletionStages?","body":"<p>You can create a helper function...</p>\n<pre class=\"lang-java prettyprint-override\"><code>combine3(\n    futureA, futureB, futureC,\n    (a, b, c) -&gt; {\n      // let's go!\n    }).toCompletableFuture();\n</code></pre>\n<p>Definition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static &lt;A, B, C, D&gt; CompletionStage&lt;D&gt; combine3(\n        CompletionStage&lt;A&gt; aStage,\n        CompletionStage&lt;B&gt; bStage,\n        CompletionStage&lt;C&gt; cStage,\n        TriFunction&lt;A, B, C, D&gt; f\n) {\n    return aStage.thenCompose(\n            a -&gt; bStage.thenCombine(cStage,\n                    (b, c) -&gt; f.apply(a, b, c)));\n}\n\ninterface TriFunction&lt;A, B, C, D&gt; {\n    D apply(A a, B b, C c);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4745435,"reputation":943,"user_id":3836927,"accept_rate":89,"display_name":"Werner de Groot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654414698,"creation_date":1654414698,"answer_id":72505584,"question_id":34004802,"body_markdown":"I had the exact same problem (and likewise for `Optional`) so I wrote a library to generate `thenCombine`-methods up to arity 26: https://github.com/wernerdegroot/applicatives \r\n\r\nPerhaps it will be of help.","title":"How to combine 3 or more CompletionStages?","body":"<p>I had the exact same problem (and likewise for <code>Optional</code>) so I wrote a library to generate <code>thenCombine</code>-methods up to arity 26: <a href=\"https://github.com/wernerdegroot/applicatives\" rel=\"nofollow noreferrer\">https://github.com/wernerdegroot/applicatives</a></p>\n<p>Perhaps it will be of help.</p>\n"},{"tags":[],"owner":{"account_id":2365895,"reputation":1,"user_id":2071582,"display_name":"Oleh Faizulin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676375078,"creation_date":1676373915,"answer_id":75447134,"question_id":34004802,"body_markdown":"If you want to combine results from multiple CFs you need an aggregator for that.\r\n\r\nTake a look on the following example, on how to combine multiple CFs returning strings:\r\n\r\n```\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n\r\n        var executor = CompletableFuture.delayedExecutor(10, TimeUnit.SECONDS);\r\n        var cf1 = CompletableFuture.supplyAsync(() -&gt; &quot;1&quot;, executor);\r\n        var cf2 = CompletableFuture.supplyAsync(() -&gt; &quot;2&quot;, executor);\r\n        var cf3 = CompletableFuture.supplyAsync(() -&gt; &quot;3&quot;, executor);\r\n        var cf4 = CompletableFuture.supplyAsync(() -&gt; &quot;4&quot;, executor);\r\n\r\n        var collectees = List.of(cf1, cf2, cf3, cf4);\r\n\r\n\r\n        System.out.println(Instant.now() + &quot;: before combine&quot;);\r\n        var combinedFuture = combine(collectees);\r\n        System.out.println(Instant.now() + &quot;: after combine&quot;);\r\n        // .get() is a blocking function\r\n        // if you remove .get() the program will print uncompleted future and exit (e.g. works async)\r\n        var result = combinedFuture.thenApply(list -&gt; String.join(&quot; - &quot;, list)).get();\r\n        System.out.println(Instant.now() + &quot;: &quot; + result);\r\n    }\r\n\r\n    static &lt;T&gt; CompletableFuture&lt;? extends List&lt;T&gt;&gt; combine(List&lt;CompletableFuture&lt;T&gt;&gt; input) {\r\n        var collector = CompletableFuture.completedFuture(new ArrayList&lt;T&gt;(input.size()));\r\n        for (var toCollect : input) {\r\n            collector = collector.thenCombine(toCollect, (ts, t) -&gt; {\r\n                ts.add(t);\r\n                return ts;\r\n            });\r\n        }\r\n        return collector;\r\n    }\r\n```","title":"How to combine 3 or more CompletionStages?","body":"<p>If you want to combine results from multiple CFs you need an aggregator for that.</p>\n<p>Take a look on the following example, on how to combine multiple CFs returning strings:</p>\n<pre><code>    public static void main(String[] args) throws ExecutionException, InterruptedException {\n\n        var executor = CompletableFuture.delayedExecutor(10, TimeUnit.SECONDS);\n        var cf1 = CompletableFuture.supplyAsync(() -&gt; &quot;1&quot;, executor);\n        var cf2 = CompletableFuture.supplyAsync(() -&gt; &quot;2&quot;, executor);\n        var cf3 = CompletableFuture.supplyAsync(() -&gt; &quot;3&quot;, executor);\n        var cf4 = CompletableFuture.supplyAsync(() -&gt; &quot;4&quot;, executor);\n\n        var collectees = List.of(cf1, cf2, cf3, cf4);\n\n\n        System.out.println(Instant.now() + &quot;: before combine&quot;);\n        var combinedFuture = combine(collectees);\n        System.out.println(Instant.now() + &quot;: after combine&quot;);\n        // .get() is a blocking function\n        // if you remove .get() the program will print uncompleted future and exit (e.g. works async)\n        var result = combinedFuture.thenApply(list -&gt; String.join(&quot; - &quot;, list)).get();\n        System.out.println(Instant.now() + &quot;: &quot; + result);\n    }\n\n    static &lt;T&gt; CompletableFuture&lt;? extends List&lt;T&gt;&gt; combine(List&lt;CompletableFuture&lt;T&gt;&gt; input) {\n        var collector = CompletableFuture.completedFuture(new ArrayList&lt;T&gt;(input.size()));\n        for (var toCollect : input) {\n            collector = collector.thenCombine(toCollect, (ts, t) -&gt; {\n                ts.add(t);\n                return ts;\n            });\n        }\n        return collector;\n    }\n</code></pre>\n"}],"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50611,"favorite_count":0,"down_vote_count":1,"up_vote_count":43,"accepted_answer_id":34005471,"answer_count":10,"score":42,"last_activity_date":1683761437,"creation_date":1448905749,"question_id":34004802,"body_markdown":"If have 2 CompletionStages, I can combine them with `thenCombine` method:\r\n\r\n```java\r\nCompletionStage&lt;A&gt; aCompletionStage = getA();\r\nCompletionStage&lt;B&gt; bCompletionStage = getB();\r\nCompletionStage&lt;Combined&gt; combinedCompletionStage =\r\n    aCompletionStage.thenCombine(bCompletionStage, (aData, bData) -&gt; combine(aData, bData));\r\n```\r\n\r\nIf I have 3 or more CompletionStages, I can make a chain of `thenCombine` methods, but I have to use temporary objects to pass results. For example, here is a solution using `Pair` and `Triple` from the `org.apache.commons.lang3.tuple` package:\r\n\r\n```java\r\nCompletionStage&lt;A&gt; aCompletionStage = getA();\r\nCompletionStage&lt;B&gt; bCompletionStage = getB();\r\nCompletionStage&lt;C&gt; cCompletionStage = getC();\r\nCompletionStage&lt;D&gt; dCompletionStage = getD();\r\n\r\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage =\r\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of))\r\n                .thenCombine(cCompletionStage, (ab, c) -&gt;\r\n                        Triple.of(ab.getLeft(), ab.getRight(), c))\r\n                .thenCombine(dCompletionStage, (abc, d) -&gt;\r\n                        combine(abc.getLeft(), abc.getMiddle(), abc.getRight(), d));\r\n```\r\n\r\nIs there a better way to combine results from multiple CompletionStages?","title":"How to combine 3 or more CompletionStages?","body":"<p>If have 2 CompletionStages, I can combine them with <code>thenCombine</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletionStage&lt;A&gt; aCompletionStage = getA();\nCompletionStage&lt;B&gt; bCompletionStage = getB();\nCompletionStage&lt;Combined&gt; combinedCompletionStage =\n    aCompletionStage.thenCombine(bCompletionStage, (aData, bData) -&gt; combine(aData, bData));\n</code></pre>\n<p>If I have 3 or more CompletionStages, I can make a chain of <code>thenCombine</code> methods, but I have to use temporary objects to pass results. For example, here is a solution using <code>Pair</code> and <code>Triple</code> from the <code>org.apache.commons.lang3.tuple</code> package:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletionStage&lt;A&gt; aCompletionStage = getA();\nCompletionStage&lt;B&gt; bCompletionStage = getB();\nCompletionStage&lt;C&gt; cCompletionStage = getC();\nCompletionStage&lt;D&gt; dCompletionStage = getD();\n\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage =\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of))\n                .thenCombine(cCompletionStage, (ab, c) -&gt;\n                        Triple.of(ab.getLeft(), ab.getRight(), c))\n                .thenCombine(dCompletionStage, (abc, d) -&gt;\n                        combine(abc.getLeft(), abc.getMiddle(), abc.getRight(), d));\n</code></pre>\n<p>Is there a better way to combine results from multiple CompletionStages?</p>\n"},{"tags":["java","spring-boot","jaxb"],"comments":[{"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"score":0,"creation_date":1572024601,"post_id":58562784,"comment_id":103445028,"body_markdown":"You have not provided the required JAXB annotations in your pojo classes.","body":"You have not provided the required JAXB annotations in your pojo classes."},{"owner":{"account_id":2409035,"reputation":1992,"user_id":2104638,"accept_rate":47,"display_name":"Pasupathi Rajamanickam"},"score":1,"creation_date":1572026014,"post_id":58562784,"comment_id":103445563,"body_markdown":"Can you post the request from network tab?","body":"Can you post the request from network tab?"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572084107,"post_id":58562784,"comment_id":103456811,"body_markdown":"@Sambit I have updated it with the XmlElement and XmlAttribute annotations, but still getting the same error.","body":"@Sambit I have updated it with the XmlElement and XmlAttribute annotations, but still getting the same error."},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572084178,"post_id":58562784,"comment_id":103456826,"body_markdown":"@PasupathiRajamanickam I have posted a screenshot from Postman or is it something else you are asking for?","body":"@PasupathiRajamanickam I have posted a screenshot from Postman or is it something else you are asking for?"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":0,"creation_date":1572123717,"post_id":58562784,"comment_id":103465483,"body_markdown":"Can you provide the content of the headers in postman? Especially the Content-Type and the Accept header.","body":"Can you provide the content of the headers in postman? Especially the Content-Type and the Accept header."},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572201762,"post_id":58562784,"comment_id":103478868,"body_markdown":"@k5_ the only key for the headers is: Content-Type and the value is: application/x-www-form-urlencoded","body":"@k5_ the only key for the headers is: Content-Type and the value is: application/x-www-form-urlencoded"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":1,"creation_date":1572202113,"post_id":58562784,"comment_id":103478982,"body_markdown":"your Content-Type header should application/xml (iff you want to send xml). You should add Accept: application/json","body":"your Content-Type header should application/xml (iff you want to send xml). You should add Accept: application/json"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572204574,"post_id":58562784,"comment_id":103479665,"body_markdown":"@k5_ thanks that got rid of the error! However, the attributes of my object is null now...any idea?","body":"@k5_ thanks that got rid of the error! However, the attributes of my object is null now...any idea?"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":0,"creation_date":1572204929,"post_id":58562784,"comment_id":103479759,"body_markdown":"At least `Race` should have a `@XmlRootElement` annotation","body":"At least <code>Race</code> should have a <code>@XmlRootElement</code> annotation"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572205338,"post_id":58562784,"comment_id":103479864,"body_markdown":"@k5_ thanks, I have tried adding that for only Race and then for both Race and Item, but still the values for the object is null. I am getting this also when I have removed the RequestBody annotation in my controller, since having that gives me a NoClassDefFoundError.","body":"@k5_ thanks, I have tried adding that for only Race and then for both Race and Item, but still the values for the object is null. I am getting this also when I have removed the RequestBody annotation in my controller, since having that gives me a NoClassDefFoundError."}],"answers":[{"tags":[],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1572218420,"creation_date":1572218420,"answer_id":58584195,"question_id":58562784,"body_markdown":"In the end I had to both add \r\n\r\n    @XmlRootElement(name = &quot;nameInXml&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n\r\nfor each class\r\n\r\nand these two dependencies:\r\n\r\n            &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t        &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;","title":"Getting Unsupported Media Type when trying to create POJO from XML","body":"<p>In the end I had to both add </p>\n\n<pre><code>@XmlRootElement(name = \"nameInXml\")\n@XmlAccessorType(XmlAccessType.FIELD)\n</code></pre>\n\n<p>for each class</p>\n\n<p>and these two dependencies:</p>\n\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n                &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58584195,"answer_count":1,"score":0,"last_activity_date":1683760988,"creation_date":1572022795,"question_id":58562784,"body_markdown":"I am trying to create a POJO from the inputted XML in a POST request, but I am getting a Unsupported Media Type error. I&#39;m not sure if I am missing some sort of annotation for my fields or if I have just set up my classes incorrectly some how. I have tried looking at other examples online, but I still don&#39;t see where my mess up is.\r\n\r\n**Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class TestController {\r\n    \r\n        @PostMapping(value = &quot;/test&quot;, consumes = MediaType.APPLICATION_XML_VALUE,\r\n        \t\tproduces = MediaType.APPLICATION_JSON_VALUE)\r\n        public String test(@RequestBody Race race) { \r\n        \tSystem.out.println(&quot;value is: &quot; + race);\r\n    \t\r\n            return &quot;{ \\&quot;message\\&quot;: \\&quot;doesnt matter for now\\&quot; }&quot;;\r\n        }\r\n    }\r\n\r\n**POJOs**\r\n\r\n**Race**\r\n\r\n    public class Race implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = 1379428133671921863L;\r\n    \t\r\n        @XmlElement\r\n        private int numberOfLaps;\r\n\t    @XmlElement\r\n        private Item item;\r\n    \r\n        public Race() {\r\n        }\r\n        \r\n        public Race(int numberOfLaps, Item item) {\r\n    \t\tthis.numberOfLaps = numberOfLaps;\r\n    \t\tthis.item = item;\r\n    \t}\r\n    \r\n    \tpublic int getNumberOfLaps ()\r\n        {\r\n            return numberOfLaps;\r\n        }\r\n    \r\n        public void setNumberOfLaps (int numberOfLaps)\r\n        {\r\n            this.numberOfLaps = numberOfLaps;\r\n        }\r\n    \r\n        public Item getItem ()\r\n        {\r\n            return item;\r\n        }\r\n    \r\n        public void setItem (Item item)\r\n        {\r\n            this.item = item;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [numberOfLaps = &quot;+numberOfLaps+&quot;, item = &quot;+item+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\n**Item**\r\n\r\n    public class Item implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = -2335797924272015448L;\r\n    \r\n        @XmlElement\r\n    \tprivate Laps[] laps;\r\n    \r\n    \tpublic Item() {\r\n    \t}\r\n    \t\r\n    \tpublic Item(Laps[] laps) {\r\n    \t\tthis.laps = laps;\r\n    \t}\r\n    \r\n    \tpublic Laps[] getlaps ()\r\n    \t{\r\n    \t\treturn laps;\r\n    \t}\r\n    \r\n    \tpublic void setlaps (Laps[] laps)\r\n    \t{\r\n    \t\tthis.laps = laps;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString()\r\n    \t{\r\n    \t\treturn &quot;ClassPojo [laps = &quot;+laps+&quot;]&quot;;\r\n    \t}\r\n    }\r\n\r\n**Laps**\r\n\r\n    public class Laps implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n        @XmlAttribute\r\n        private int count;\r\n\t    @XmlElement\r\n        private Lane[] lane;\r\n    \r\n        public Laps() {\r\n    \t}\r\n        public Laps(int count, Lane[] lane) {\r\n    \t\tthis.count = count;\r\n    \t\tthis.lane = lane;\r\n    \t}\r\n    \r\n    \tpublic int getCount ()\r\n        {\r\n            return count;\r\n        }\r\n    \r\n        public void setCount (int count)\r\n        {\r\n            this.count = count;\r\n        }\r\n    \r\n        public Lane[] getLane ()\r\n        {\r\n            return lane;\r\n        }\r\n    \r\n        public void setLane (Lane[] lane)\r\n        {\r\n            this.lane = lane;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [count = &quot;+count+&quot;, lane = &quot;+lane+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\n**Lane**\r\n\r\n    public class Lane implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = -8249718991307207229L;\r\n    \t\r\n        @XmlAttribute\r\n        private int number;\r\n\t    @XmlAttribute\r\n        private String value;\r\n    \r\n        public Lane() {\r\n    \t}\r\n        public Lane(int number, String value) {\r\n    \t\tthis.number = number;\r\n    \t\tthis.value = value;\r\n    \t}\r\n    \r\n    \tpublic int getNumber ()\r\n        {\r\n            return number;\r\n        }\r\n    \r\n        public void setNumber (int number)\r\n        {\r\n            this.number = number;\r\n        }\r\n    \r\n        public String getContent ()\r\n        {\r\n            return value;\r\n        }\r\n    \r\n        public void setContent (String content)\r\n        {\r\n            this.value = content;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [number = &quot;+number+&quot;, content = &quot;+value+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\nraw XML input into POSTMAN\r\n\r\n    &lt;race&gt;\r\n        &lt;countOfLaps&gt;3&lt;/countOfLaps&gt;\r\n        &lt;item&gt;\r\n            &lt;laps count=&quot;1&quot;&gt;\r\n                &lt;lane count=&quot;1&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;2&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;3&quot;&gt;0&lt;/lane&gt;\r\n                &lt;lane count=&quot;4&quot;&gt;-2&lt;/lane&gt;\r\n            &lt;/laps&gt;\r\n            &lt;laps count=&quot;2&quot;&gt;\r\n                &lt;lane count=&quot;1&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;2&quot;&gt;-1&lt;/lane&gt;\r\n                &lt;lane count=&quot;3&quot;&gt;2&lt;/lane&gt;\r\n                &lt;lane count=&quot;4&quot;&gt;-2&lt;/lane&gt;\r\n            &lt;/laps&gt;\r\n        &lt;/item&gt;\r\n    &lt;/race&gt;\r\n\r\npom depencencies\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nfull error message \r\n\r\n    {\r\n        &quot;timestamp&quot;: 1572020022472,\r\n        &quot;status&quot;: 415,\r\n        &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n        &quot;exception&quot;: &quot;org.springframework.web.HttpMediaTypeNotSupportedException&quot;,\r\n        &quot;message&quot;: &quot;Unsupported Media Type&quot;,\r\n        &quot;path&quot;: &quot;/api/play&quot;\r\n    }\r\n\r\n\r\n[![Postman][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AuWgx.png\r\n\r\n","title":"Getting Unsupported Media Type when trying to create POJO from XML","body":"<p>I am trying to create a POJO from the inputted XML in a POST request, but I am getting a Unsupported Media Type error. I'm not sure if I am missing some sort of annotation for my fields or if I have just set up my classes incorrectly some how. I have tried looking at other examples online, but I still don't see where my mess up is.</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\npublic class TestController {\n\n    @PostMapping(value = \"/test\", consumes = MediaType.APPLICATION_XML_VALUE,\n            produces = MediaType.APPLICATION_JSON_VALUE)\n    public String test(@RequestBody Race race) { \n        System.out.println(\"value is: \" + race);\n\n        return \"{ \\\"message\\\": \\\"doesnt matter for now\\\" }\";\n    }\n}\n</code></pre>\n\n<p><strong>POJOs</strong></p>\n\n<p><strong>Race</strong></p>\n\n<pre><code>public class Race implements Serializable\n{\n    private static final long serialVersionUID = 1379428133671921863L;\n\n    @XmlElement\n    private int numberOfLaps;\n    @XmlElement\n    private Item item;\n\n    public Race() {\n    }\n\n    public Race(int numberOfLaps, Item item) {\n        this.numberOfLaps = numberOfLaps;\n        this.item = item;\n    }\n\n    public int getNumberOfLaps ()\n    {\n        return numberOfLaps;\n    }\n\n    public void setNumberOfLaps (int numberOfLaps)\n    {\n        this.numberOfLaps = numberOfLaps;\n    }\n\n    public Item getItem ()\n    {\n        return item;\n    }\n\n    public void setItem (Item item)\n    {\n        this.item = item;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [numberOfLaps = \"+numberOfLaps+\", item = \"+item+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Item</strong></p>\n\n<pre><code>public class Item implements Serializable\n{\n    private static final long serialVersionUID = -2335797924272015448L;\n\n    @XmlElement\n    private Laps[] laps;\n\n    public Item() {\n    }\n\n    public Item(Laps[] laps) {\n        this.laps = laps;\n    }\n\n    public Laps[] getlaps ()\n    {\n        return laps;\n    }\n\n    public void setlaps (Laps[] laps)\n    {\n        this.laps = laps;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [laps = \"+laps+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Laps</strong></p>\n\n<pre><code>public class Laps implements Serializable\n{\n    private static final long serialVersionUID = 1L;\n\n    @XmlAttribute\n    private int count;\n    @XmlElement\n    private Lane[] lane;\n\n    public Laps() {\n    }\n    public Laps(int count, Lane[] lane) {\n        this.count = count;\n        this.lane = lane;\n    }\n\n    public int getCount ()\n    {\n        return count;\n    }\n\n    public void setCount (int count)\n    {\n        this.count = count;\n    }\n\n    public Lane[] getLane ()\n    {\n        return lane;\n    }\n\n    public void setLane (Lane[] lane)\n    {\n        this.lane = lane;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [count = \"+count+\", lane = \"+lane+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Lane</strong></p>\n\n<pre><code>public class Lane implements Serializable\n{\n    private static final long serialVersionUID = -8249718991307207229L;\n\n    @XmlAttribute\n    private int number;\n    @XmlAttribute\n    private String value;\n\n    public Lane() {\n    }\n    public Lane(int number, String value) {\n        this.number = number;\n        this.value = value;\n    }\n\n    public int getNumber ()\n    {\n        return number;\n    }\n\n    public void setNumber (int number)\n    {\n        this.number = number;\n    }\n\n    public String getContent ()\n    {\n        return value;\n    }\n\n    public void setContent (String content)\n    {\n        this.value = content;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [number = \"+number+\", content = \"+value+\"]\";\n    }\n}\n</code></pre>\n\n<p>raw XML input into POSTMAN</p>\n\n<pre><code>&lt;race&gt;\n    &lt;countOfLaps&gt;3&lt;/countOfLaps&gt;\n    &lt;item&gt;\n        &lt;laps count=\"1\"&gt;\n            &lt;lane count=\"1\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"2\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"3\"&gt;0&lt;/lane&gt;\n            &lt;lane count=\"4\"&gt;-2&lt;/lane&gt;\n        &lt;/laps&gt;\n        &lt;laps count=\"2\"&gt;\n            &lt;lane count=\"1\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"2\"&gt;-1&lt;/lane&gt;\n            &lt;lane count=\"3\"&gt;2&lt;/lane&gt;\n            &lt;lane count=\"4\"&gt;-2&lt;/lane&gt;\n        &lt;/laps&gt;\n    &lt;/item&gt;\n&lt;/race&gt;\n</code></pre>\n\n<p>pom depencencies</p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.11&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>full error message </p>\n\n<pre><code>{\n    \"timestamp\": 1572020022472,\n    \"status\": 415,\n    \"error\": \"Unsupported Media Type\",\n    \"exception\": \"org.springframework.web.HttpMediaTypeNotSupportedException\",\n    \"message\": \"Unsupported Media Type\",\n    \"path\": \"/api/play\"\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AuWgx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AuWgx.png\" alt=\"Postman\"></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1683760287,"post_id":76223122,"comment_id":134417818,"body_markdown":"That is [not an option on modern versions of Android for ordinary developers](https://developer.android.com/guide/components/activities/background-starts).","body":"That is <a href=\"https://developer.android.com/guide/components/activities/background-starts\" rel=\"nofollow noreferrer\">not an option on modern versions of Android for ordinary developers</a>."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1683761745,"post_id":76223122,"comment_id":134417954,"body_markdown":"You&#39;re looking for [`setFullScreenIntent`](https://developer.android.com/reference/androidx/core/app/NotificationCompat.Builder?hl=en#setFullScreenIntent(android.app.PendingIntent,boolean)) on `NotificationCompat.Builder`.  (cc @CommonsWare)","body":"You&#39;re looking for <a href=\"https://developer.android.com/reference/androidx/core/app/NotificationCompat.Builder?hl=en#setFullScreenIntent(android.app.PendingIntent,boolean)\" rel=\"nofollow noreferrer\"><code>setFullScreenIntent</code></a> on <code>NotificationCompat.Builder</code>.  (cc @CommonsWare)"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1683761775,"post_id":76223122,"comment_id":134417959,"body_markdown":"There&#39;s probably a question somewhere on Stack Overflow describing how to do that. (edit: but if there is, I can&#39;t find it; I&#39;ve just found a bunch of really awful advice that won&#39;t work)","body":"There&#39;s probably a question somewhere on Stack Overflow describing how to do that. (edit: but if there is, I can&#39;t find it; I&#39;ve just found a bunch of really awful advice that won&#39;t work)"}],"owner":{"account_id":23659396,"reputation":31,"user_id":17687172,"display_name":"Heinner Lara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683759970,"creation_date":1683759970,"question_id":76223122,"body_markdown":"I am developing a video call app, I want to open an activity automatically when receiving the fcm notification that allows me to send the request to open the activity to answer or not to the video call, all this works perfectly when my application is in the foreground, but it does not work when my application is in the background or closed, Just like whatsApp does, it doesn&#39;t matter if the app is in the foreground or background or disabled, calls are always received. THANK YOU!\r\n\r\n`\r\n```\r\n@Override\r\n    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) { //este metodo me servira para recibir los datos que se envien en la N.\r\n        super.onMessageReceived(remoteMessage);\r\n\r\n        String title = remoteMessage.getData().get(&quot;title&quot;);\r\n        if (title != null) {\r\n            if (title.equals(&quot;LLAMADA&quot;)) {\r\n                Intent intent = new Intent(getApplicationContext(), IncomingActivity.class);\r\n                intent.putExtra(&quot;username&quot;, remoteMessage.getData().get(&quot;username&quot;));\r\n                intent.putExtra(&quot;image&quot;, remoteMessage.getData().get(&quot;image&quot;));\r\n                intent.putExtra(&quot;inviterToken&quot;, remoteMessage.getData().get(&quot;inviterToken&quot;));\r\n                intent.putExtra(&quot;country&quot;, remoteMessage.getData().get(&quot;country&quot;));\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                startActivity(intent);\r\n\r\n            } else {\r\n\r\n                Map&lt;String, String&gt; data = remoteMessage.getData();\r\n                String body = data.get(&quot;body&quot;); //capturamos el cuerpo del mensaje\r\n                String idNotification = data.get(&quot;idNotification&quot;);\r\n\r\n                if (!ifChatActivityInForeground(getBaseContext(), IGNORED_ACTIVITY_NAME)) { // si ChatActivity no esta en primer plano que se muestre la notificacion\r\n                    if (title.equals(&quot;MENSAJE&quot;)) {\r\n                        getImageReceiver(data);\r\n                    } else {\r\n                        showNotification(title, body, idNotification);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n`\r\n\r\nI try to put an intent to go to the activity that allows me to answer or reject the video call","title":"Open activity automatically when receiving fcm notification","body":"<p>I am developing a video call app, I want to open an activity automatically when receiving the fcm notification that allows me to send the request to open the activity to answer or not to the video call, all this works perfectly when my application is in the foreground, but it does not work when my application is in the background or closed, Just like whatsApp does, it doesn't matter if the app is in the foreground or background or disabled, calls are always received. THANK YOU!</p>\n<p>`</p>\n<pre><code>@Override\n    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) { //este metodo me servira para recibir los datos que se envien en la N.\n        super.onMessageReceived(remoteMessage);\n\n        String title = remoteMessage.getData().get(&quot;title&quot;);\n        if (title != null) {\n            if (title.equals(&quot;LLAMADA&quot;)) {\n                Intent intent = new Intent(getApplicationContext(), IncomingActivity.class);\n                intent.putExtra(&quot;username&quot;, remoteMessage.getData().get(&quot;username&quot;));\n                intent.putExtra(&quot;image&quot;, remoteMessage.getData().get(&quot;image&quot;));\n                intent.putExtra(&quot;inviterToken&quot;, remoteMessage.getData().get(&quot;inviterToken&quot;));\n                intent.putExtra(&quot;country&quot;, remoteMessage.getData().get(&quot;country&quot;));\n                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                startActivity(intent);\n\n            } else {\n\n                Map&lt;String, String&gt; data = remoteMessage.getData();\n                String body = data.get(&quot;body&quot;); //capturamos el cuerpo del mensaje\n                String idNotification = data.get(&quot;idNotification&quot;);\n\n                if (!ifChatActivityInForeground(getBaseContext(), IGNORED_ACTIVITY_NAME)) { // si ChatActivity no esta en primer plano que se muestre la notificacion\n                    if (title.equals(&quot;MENSAJE&quot;)) {\n                        getImageReceiver(data);\n                    } else {\n                        showNotification(title, body, idNotification);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>`</p>\n<p>I try to put an intent to go to the activity that allows me to answer or reject the video call</p>\n"},{"tags":["java","aws-lambda","aws-lambda-layers","aws-lambda-containers"],"comments":[{"owner":{"account_id":58377,"reputation":247880,"user_id":174777,"display_name":"John Rotenstein"},"score":0,"creation_date":1683758717,"post_id":76220486,"comment_id":134417641,"body_markdown":"AWS Step Functions is the &#39;correct&#39; way to wait for a period before invoking an AWS Lambda function.","body":"AWS Step Functions is the &#39;correct&#39; way to wait for a period before invoking an AWS Lambda function."}],"answers":[{"tags":[],"owner":{"account_id":8499572,"reputation":821,"user_id":6916510,"display_name":"Miguel Conde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683743029,"creation_date":1683743029,"answer_id":76221555,"question_id":76220486,"body_markdown":"Your lambda A can publish a message in SQS, then your lambda B can be executed each one hour (using Cloudwatch event bridge) and reading the messages in the SQS queue, if a message is detected and have 24 hours published you can continue with the execution of the lambda B and delete the message from SQS.","title":"Schedule Lambda from another Lambda","body":"<p>Your lambda A can publish a message in SQS, then your lambda B can be executed each one hour (using Cloudwatch event bridge) and reading the messages in the SQS queue, if a message is detected and have 24 hours published you can continue with the execution of the lambda B and delete the message from SQS.</p>\n"},{"tags":[],"owner":{"account_id":4346930,"reputation":3859,"user_id":3548640,"accept_rate":64,"display_name":"codeninja.sj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683752021,"creation_date":1683752021,"answer_id":76222482,"question_id":76220486,"body_markdown":"There are multiple ways to achieve this using AWS resources. Here are a few options that can be implemented easily:\r\n\r\n**Step Functions:** In Step Functions, you can utilize the [Wait][1] state to control the transition of messages from one Lambda function to another. By configuring appropriate wait times, you can achieve the desired delay between the execution of Lambda function A and Lambda function B.\r\n\r\n**SQS:** Another approach is to trigger Lambda function B using SQS messages. However, note that the [maximum visibility timeout][2] for SQS is limited to 12 hours. To achieve a 24-hour window, you can enable the retry functionality on the SQS. However, in order to trigger the retries, you would need to configure Lambda function B to throw an exception during the first attempt of processing the messages from the SQS queue. This will signal to SQS that the message processing should be retried.\r\n\r\n  [1]: https://docs.aws.amazon.com/step-functions/latest/dg/amazon-states-language-wait-state.html\r\n  [2]: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html","title":"Schedule Lambda from another Lambda","body":"<p>There are multiple ways to achieve this using AWS resources. Here are a few options that can be implemented easily:</p>\n<p><strong>Step Functions:</strong> In Step Functions, you can utilize the <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/amazon-states-language-wait-state.html\" rel=\"nofollow noreferrer\">Wait</a> state to control the transition of messages from one Lambda function to another. By configuring appropriate wait times, you can achieve the desired delay between the execution of Lambda function A and Lambda function B.</p>\n<p><strong>SQS:</strong> Another approach is to trigger Lambda function B using SQS messages. However, note that the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html\" rel=\"nofollow noreferrer\">maximum visibility timeout</a> for SQS is limited to 12 hours. To achieve a 24-hour window, you can enable the retry functionality on the SQS. However, in order to trigger the retries, you would need to configure Lambda function B to throw an exception during the first attempt of processing the messages from the SQS queue. This will signal to SQS that the message processing should be retried.</p>\n"}],"owner":{"account_id":12834347,"reputation":23,"user_id":9284486,"display_name":"Roopchand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76222482,"answer_count":2,"score":0,"last_activity_date":1683758662,"creation_date":1683734165,"question_id":76220486,"body_markdown":"I have two lambda function and both written in Java. Assume A &amp; B.. When A function got successfully executed then I want B function to be executed after 24 hours. \r\nIs it possible to achieve? If yes how?","title":"Schedule Lambda from another Lambda","body":"<p>I have two lambda function and both written in Java. Assume A &amp; B.. When A function got successfully executed then I want B function to be executed after 24 hours.\nIs it possible to achieve? If yes how?</p>\n"},{"tags":["java","servlets","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1683752880,"post_id":76222165,"comment_id":134416902,"body_markdown":"If you upgrade to GlassFish version 7.0.3 you can use any JDK release between 11 and 20: [&quot;Eclipse GlassFish 7.0.3 compiles and runs with JDK 11 to JDK 20 releases.&quot;](https://glassfish.org/#:~:text=ASM%209.5%20integration.-,Eclipse%20GlassFish%207.0.,requires%20JDK%2017%20or%20higher.)","body":"If you upgrade to GlassFish version 7.0.3 you can use any JDK release between 11 and 20: <a href=\"https://glassfish.org/#:~:text=ASM%209.5%20integration.-,Eclipse%20GlassFish%207.0.,requires%20JDK%2017%20or%20higher.\" rel=\"nofollow noreferrer\">&quot;Eclipse GlassFish 7.0.3 compiles and runs with JDK 11 to JDK 20 releases.&quot;</a>"},{"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"score":0,"creation_date":1683757350,"post_id":76222165,"comment_id":134417482,"body_markdown":"Please how do i upgrate to 7.0.3","body":"Please how do i upgrate to 7.0.3"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1683757693,"post_id":76222165,"comment_id":134417529,"body_markdown":"Download links for recent versions: [download](https://glassfish.org/download_gf7.html). Download whatever recent version you want (why not just grab the latest?). Unzip the zip file, and then read the &quot;README.txt&quot; file.","body":"Download links for recent versions: <a href=\"https://glassfish.org/download_gf7.html\" rel=\"nofollow noreferrer\">download</a>. Download whatever recent version you want (why not just grab the latest?). Unzip the zip file, and then read the &quot;README.txt&quot; file."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1683757718,"post_id":76222165,"comment_id":134417535,"body_markdown":"I just posted an answer. See below. Actually the latest release is 7.0.4.","body":"I just posted an answer. See below. Actually the latest release is 7.0.4."}],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1683757673,"creation_date":1683757673,"answer_id":76222963,"question_id":76222165,"body_markdown":"I can reproduce your problem. I just tried to start GlassFish 7 on NetBeans 17 using JDK 20, and NetBeans wouldn&#39;t let me do that. But when I selected JDK 17 instead it worked fine. So to resolve this:\r\n- Use **Tools &gt; Java Platforms... &gt; Add Platform** to add *JDK 17* as a platform in NetBeans.\r\n- [Download and install the latest release of GlassFish 7: version 7.0.4](https://glassfish.org/download).\r\n- When you try to start GlassFish 7.0.4 as a server within NetBeans it will fail (_&quot;GlassFish server could not be started...&quot;_), but NetBeans should then invite you to select an alternative platform to use instead:\r\n\r\n  [![Select JDK][1]][1]\r\n\r\n- Note that if JDK 19 is your only platform in NetBeans you won&#39;t be given the option to select an alternative platform, and you won&#39;t be able to resolve the issue.\r\n- Just select *JDK 17* as your **Java Platform** and click **OK** and everything should work. I am running GlassFish 7 on JDK 17 within NetBeans 17 which is using JDK 20 and it is working.  Using JDK 18 instead also worked for me.\r\n\r\nSee the [Eclipse GlassFish download page](https://glassfish.org/download) for details on the latest releases and their JDK requirements. It looks like all releases of GlassFish 7 formally support the use of JDK19. \r\n\r\nNotes:\r\n- Don&#39;t let NetBeans download GlassFish 7.0.0 for you; that is only going to lead to problems. Instead, create an empty directory (e.g. C:/GlassFish704), and then download and install the latest release, GlassFish 7.0.4, into that directory yourself. Then, when you add GlassFish 7 as a server, navigate to the root directory of that GlassFish 7.0.4 installation. In my case (on Windows) that path was **C:/GlassFish704/glassfish-7.0.4/glassfish7**\r\n- Do not use GlassFish 7.0.0 because [there is an unrelated problem with the Admin Console](https://github.com/eclipse-ee4j/glassfish/issues/23782): &quot;GlassFish Server Administration Console (http://localhost:4848) cannot be loaded.&quot;. You will see a `ResolveError` in the GlassFish log, and you won&#39;t be able to open the Admin Console, typically from `http://localhost:4848/common/index.jsf`.\r\n- I think a minor bug in NetBeans caused you to hit this issue, since NetBeans does officially support the use of JDK 19. It seems that there is a needless hard coded constraint preventing you from using JDK 19 with GlassFish 7.x.x.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8JeYE.png","title":"What version of Java supports GlassFish 7.0.0 on a Mac?","body":"<p>I can reproduce your problem. I just tried to start GlassFish 7 on NetBeans 17 using JDK 20, and NetBeans wouldn't let me do that. But when I selected JDK 17 instead it worked fine. So to resolve this:</p>\n<ul>\n<li><p>Use <strong>Tools &gt; Java Platforms... &gt; Add Platform</strong> to add <em>JDK 17</em> as a platform in NetBeans.</p>\n</li>\n<li><p><a href=\"https://glassfish.org/download\" rel=\"nofollow noreferrer\">Download and install the latest release of GlassFish 7: version 7.0.4</a>.</p>\n</li>\n<li><p>When you try to start GlassFish 7.0.4 as a server within NetBeans it will fail (<em>&quot;GlassFish server could not be started...&quot;</em>), but NetBeans should then invite you to select an alternative platform to use instead:</p>\n<p><a href=\"https://i.stack.imgur.com/8JeYE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8JeYE.png\" alt=\"Select JDK\" /></a></p>\n</li>\n<li><p>Note that if JDK 19 is your only platform in NetBeans you won't be given the option to select an alternative platform, and you won't be able to resolve the issue.</p>\n</li>\n<li><p>Just select <em>JDK 17</em> as your <strong>Java Platform</strong> and click <strong>OK</strong> and everything should work. I am running GlassFish 7 on JDK 17 within NetBeans 17 which is using JDK 20 and it is working.  Using JDK 18 instead also worked for me.</p>\n</li>\n</ul>\n<p>See the <a href=\"https://glassfish.org/download\" rel=\"nofollow noreferrer\">Eclipse GlassFish download page</a> for details on the latest releases and their JDK requirements. It looks like all releases of GlassFish 7 formally support the use of JDK19.</p>\n<p>Notes:</p>\n<ul>\n<li>Don't let NetBeans download GlassFish 7.0.0 for you; that is only going to lead to problems. Instead, create an empty directory (e.g. C:/GlassFish704), and then download and install the latest release, GlassFish 7.0.4, into that directory yourself. Then, when you add GlassFish 7 as a server, navigate to the root directory of that GlassFish 7.0.4 installation. In my case (on Windows) that path was <strong>C:/GlassFish704/glassfish-7.0.4/glassfish7</strong></li>\n<li>Do not use GlassFish 7.0.0 because <a href=\"https://github.com/eclipse-ee4j/glassfish/issues/23782\" rel=\"nofollow noreferrer\">there is an unrelated problem with the Admin Console</a>: &quot;GlassFish Server Administration Console (http://localhost:4848) cannot be loaded.&quot;. You will see a <code>ResolveError</code> in the GlassFish log, and you won't be able to open the Admin Console, typically from <code>http://localhost:4848/common/index.jsf</code>.</li>\n<li>I think a minor bug in NetBeans caused you to hit this issue, since NetBeans does officially support the use of JDK 19. It seems that there is a needless hard coded constraint preventing you from using JDK 19 with GlassFish 7.x.x.</li>\n</ul>\n"}],"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76222963,"answer_count":1,"score":1,"last_activity_date":1683758284,"creation_date":1683748754,"question_id":76222165,"body_markdown":"I have NetBeans 17 and the highest GlassFish version is 7.0.0. I have Java JDK 19 installed but GlassFish tells me it is not compatible with JDK 19. \r\n\r\nWhat version of JDK is suitable for GlassFish 7.0.0 or lower?","title":"What version of Java supports GlassFish 7.0.0 on a Mac?","body":"<p>I have NetBeans 17 and the highest GlassFish version is 7.0.0. I have Java JDK 19 installed but GlassFish tells me it is not compatible with JDK 19.</p>\n<p>What version of JDK is suitable for GlassFish 7.0.0 or lower?</p>\n"},{"tags":["java","android","xml","jdom-2"],"answers":[{"tags":[],"owner":{"account_id":447793,"reputation":57,"user_id":841635,"display_name":"Arash"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1683758045,"creation_date":1683758045,"answer_id":76222987,"question_id":76218967,"body_markdown":"First i had to implement `xercesImpl.jar` to my project.\r\nThen i had to change the `SAXBuilder` as below:\r\n\r\n    SAXBuilder builder = new SAXBuilder(&quot;org.apache.xerces.parsers.SAXParser&quot;);\r\n    builder.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\n\r\nAnd guess what, `ChatGPT` solved my problem step by step. it&#39;s amazing.","title":"Error in XML parser with JDOM2 package in android studio (java)","body":"<p>First i had to implement <code>xercesImpl.jar</code> to my project.\nThen i had to change the <code>SAXBuilder</code> as below:</p>\n<pre><code>SAXBuilder builder = new SAXBuilder(&quot;org.apache.xerces.parsers.SAXParser&quot;);\nbuilder.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\n</code></pre>\n<p>And guess what, <code>ChatGPT</code> solved my problem step by step. it's amazing.</p>\n"}],"owner":{"account_id":447793,"reputation":57,"user_id":841635,"display_name":"Arash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76222987,"answer_count":1,"score":0,"last_activity_date":1683758045,"creation_date":1683724908,"question_id":76218967,"body_markdown":"This code should convert `xml` to json and i got below error in the first of it.\r\n`SAXBuilder` can&#39;t read `xml` file.\r\n\r\nI use JDOM2 library in this code.\r\n\r\nJava code:\r\n\r\n    package com.example.books_xmltojson;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.widget.EditText;\r\n    import org.jdom2.Document;\r\n    import org.jdom2.input.SAXBuilder;\r\n    import java.io.InputStream;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        EditText edittext;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            edittext = findViewById(R.id.edittext);\r\n            // SAX builder \r\n            InputStream input = getResources().openRawResource(R.raw.books);\r\n            SAXBuilder builder = new SAXBuilder();\r\n            try {\r\n                Document doc = builder.build(input);\r\n            } catch (Exception e) {\r\n                    edittext.setText(e.toString());\r\n          } \r\n       }\r\n    }\r\n\r\n\r\nXML R.raw.books:\r\n\r\n    // Resources\r\n    &lt;catalog&gt;\r\n       &lt;book&gt;\r\n          &lt;title&gt;XML Developer&#39;s Guide&lt;/title&gt;\r\n          &lt;genre&gt;Computer&lt;/genre&gt;\r\n    \r\n       &lt;/book&gt;\r\n       &lt;book&gt;\r\n          &lt;title&gt;Midnight Rain&lt;/title&gt;\r\n          &lt;genre&gt;Fantasy&lt;/genre&gt;\r\n       &lt;/book&gt;\r\n    &lt;/catalog&gt;\r\n\r\nThe error:\r\n\r\norg.jdom2.JDOMException: http://xml.org/sax/features/external-general-entities feature http://xml.org/sax/features/external-general-entities not supported for SAX driver org.apache.harmony.xml.ExpatReader\r\n\r\n\r\n\r\n","title":"Error in XML parser with JDOM2 package in android studio (java)","body":"<p>This code should convert <code>xml</code> to json and i got below error in the first of it.\n<code>SAXBuilder</code> can't read <code>xml</code> file.</p>\n<p>I use JDOM2 library in this code.</p>\n<p>Java code:</p>\n<pre><code>package com.example.books_xmltojson;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.EditText;\nimport org.jdom2.Document;\nimport org.jdom2.input.SAXBuilder;\nimport java.io.InputStream;\n\npublic class MainActivity extends AppCompatActivity {\n    EditText edittext;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        edittext = findViewById(R.id.edittext);\n        // SAX builder \n        InputStream input = getResources().openRawResource(R.raw.books);\n        SAXBuilder builder = new SAXBuilder();\n        try {\n            Document doc = builder.build(input);\n        } catch (Exception e) {\n                edittext.setText(e.toString());\n      } \n   }\n}\n</code></pre>\n<p>XML R.raw.books:</p>\n<pre><code>// Resources\n&lt;catalog&gt;\n   &lt;book&gt;\n      &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n\n   &lt;/book&gt;\n   &lt;book&gt;\n      &lt;title&gt;Midnight Rain&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n   &lt;/book&gt;\n&lt;/catalog&gt;\n</code></pre>\n<p>The error:</p>\n<p>org.jdom2.JDOMException: <a href=\"http://xml.org/sax/features/external-general-entities\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/external-general-entities</a> feature <a href=\"http://xml.org/sax/features/external-general-entities\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/external-general-entities</a> not supported for SAX driver org.apache.harmony.xml.ExpatReader</p>\n"},{"tags":["java","swing","user-interface"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683678082,"post_id":76214081,"comment_id":134402565,"body_markdown":"Don&#39;t call `setBorder(...)` or do any other direct mutational changes on component state within a painting method. Consider creating your own Border class and setting a component&#39;s border with it.","body":"Don&#39;t call <code>setBorder(...)</code> or do any other direct mutational changes on component state within a painting method. Consider creating your own Border class and setting a component&#39;s border with it."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683680168,"post_id":76214081,"comment_id":134402727,"body_markdown":"*&quot;and what I want is&quot;* which seems to come from https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038","body":"<i>&quot;and what I want is&quot;</i> which seems to come from <a href=\"https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038\" title=\"jpanel drop shadow\">stackoverflow.com/questions/13368103/jpanel-drop-shadow/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683757632,"creation_date":1683679852,"answer_id":76214227,"question_id":76214081,"body_markdown":"This is, actually, very complicated, at least if you want it to look &quot;cool&quot;.\r\n\r\nBefore I get started, I wouldn&#39;t use `Border` for this, you can have a look at https://stackoverflow.com/questions/23945781/is-there-a-way-to-make-jtextfield-for-my-address-bar-larger-and-curvier/23945841#23945841 for some reasons why.\r\n\r\nNormally, I make use of [JH Labs image filters](http://www.jhlabs.com/ip/filters/index.html) to produced a blurred shadow, [for example](https://stackoverflow.com/questions/14655643/java-create-shadow-effect-on-image/14656403#14656403), but for the following, I&#39;ve removed it so you can run it without dependencies.\r\n\r\nFirst, you&#39;re going to need some &quot;support&quot; functionality...\r\n\r\n    public class ImageUtilities {\r\n\r\n        public static void applyQualityRenderingHints(Graphics2D g2d) {\r\n            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(int width, int height) {\r\n            return createCompatibleImage(width, height, Transparency.TRANSLUCENT);\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(int width, int height, int transparency) {\r\n            BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);\r\n            image.coerceData(true);\r\n            return image;\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(BufferedImage image) {\r\n            return createCompatibleImage(image, image.getWidth(), image.getHeight());\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(BufferedImage image,\r\n                int width, int height) {\r\n            return getGraphicsConfiguration().createCompatibleImage(width, height, image.getTransparency());\r\n        }\r\n\r\n        public static GraphicsConfiguration getGraphicsConfiguration() {\r\n            return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();\r\n        }\r\n\r\n        public static BufferedImage generateMask(BufferedImage imgSource, Color color, float alpha) {\r\n            int imgWidth = imgSource.getWidth();\r\n            int imgHeight = imgSource.getHeight();\r\n\r\n            BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgBlur.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            g2.drawImage(imgSource, 0, 0, null);\r\n            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\r\n            g2.setColor(color);\r\n\r\n            g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\r\n            g2.dispose();\r\n\r\n            return imgBlur;\r\n        }\r\n\r\n        public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            //GaussianFilter filter = new GaussianFilter(size);\r\n\r\n            int imgWidth = imgSource.getWidth();\r\n            int imgHeight = imgSource.getHeight();\r\n\r\n            BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgBlur.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            g2.drawImage(imgSource, 0, 0, null);\r\n            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\r\n            g2.setColor(color);\r\n\r\n            g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\r\n            g2.dispose();\r\n\r\n            //imgBlur = filter.filter(imgBlur, null);\r\n\r\n            return imgBlur;\r\n        }\r\n\r\n        public static BufferedImage applyShadow(Shape shape, int size, Color backgroundColor, Color shadowColor, float alpha) {\r\n            BufferedImage sourceImage = createCompatibleImage(shape.getBounds().width, shape.getBounds().height);\r\n            Graphics2D g2d = sourceImage.createGraphics();\r\n            applyQualityRenderingHints(g2d);\r\n            g2d.translate(-shape.getBounds().getX(), -shape.getBounds().getY());\r\n            g2d.setColor(backgroundColor);\r\n            g2d.fill(shape);\r\n            g2d.dispose();\r\n            return applyShadow(sourceImage, size, shadowColor, alpha);\r\n        }\r\n        \r\n        public static BufferedImage applyShadow(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            BufferedImage result = createCompatibleImage(imgSource, imgSource.getWidth() + (size * 2), imgSource.getHeight() + (size * 2));\r\n            Graphics2D g2d = result.createGraphics();\r\n            g2d.drawImage(generateShadow(imgSource, size, color, alpha), size, size, null);\r\n            g2d.drawImage(imgSource, 0, 0, null);\r\n            g2d.dispose();\r\n\r\n            return result;\r\n        }\r\n\r\n        public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            int imgWidth = imgSource.getWidth() + (size * 2);\r\n            int imgHeight = imgSource.getHeight() + (size * 2);\r\n\r\n            BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgMask.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);\r\n            int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);\r\n            g2.drawImage(imgSource, x, y, null);\r\n            g2.dispose();\r\n\r\n            // ---- Blur here ---\r\n            BufferedImage imgGlow = generateBlur(imgMask, (size * 2), color, alpha);\r\n            return imgGlow;\r\n        }\r\n\r\n        public static Image applyMask(BufferedImage sourceImage, BufferedImage maskImage) {\r\n            return applyMask(sourceImage, maskImage, AlphaComposite.DST_IN);\r\n        }\r\n\r\n        public static BufferedImage applyMask(BufferedImage sourceImage, BufferedImage maskImage, int method) {\r\n            BufferedImage maskedImage = null;\r\n            if (sourceImage != null) {\r\n\r\n                int width = maskImage.getWidth(null);\r\n                int height = maskImage.getHeight(null);\r\n\r\n                maskedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n                Graphics2D mg = maskedImage.createGraphics();\r\n\r\n                int x = (width - sourceImage.getWidth(null)) / 2;\r\n                int y = (height - sourceImage.getHeight(null)) / 2;\r\n\r\n                mg.drawImage(sourceImage, x, y, null);\r\n                mg.setComposite(AlphaComposite.getInstance(method));\r\n\r\n                mg.drawImage(maskImage, 0, 0, null);\r\n\r\n                mg.dispose();\r\n            }\r\n            return maskedImage;\r\n        }\r\n    }\r\n\r\nThis is a lot of functionality which does a relatively simple job - it produces a drop shadow from a supplied image or shape.  It does this through a process of image masking.\r\n\r\nLet&#39;s run a quick test...\r\n\r\n    public class TestPane extends JPanel {\r\n\r\n        public TestPane() {\r\n        }\r\n\r\n        @Override\r\n        public Dimension getPreferredSize() {\r\n            return new Dimension(200, 200);\r\n        }\r\n\r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g.create();\r\n            \r\n            int size = Math.min(getWidth(), getHeight()) / 2;\r\n            \r\n            RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, size, size, 20, 20);\r\n            ImageUtilities.applyQualityRenderingHints(g2d);\r\n            g2d.drawImage(ImageUtilities.applyShadow(border, 2, getBackground(), Color.BLACK, 0.25f), 5, 5, this);\r\n            g2d.setColor(Color.DARK_GRAY);\r\n            g2d.translate(5, 5);\r\n            g2d.draw(border);\r\n            g2d.dispose();\r\n        }\r\n\r\n    }\r\n\r\nNow, this will produce...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAlright, job done!\r\n\r\nOk, not entirely.  What we really need is a &quot;composite&quot; component.  That is one, which will contain and manage the rounded border and drop shadow, but also allow use to add components to it, which won&#39;t &quot;over flow&quot; the border, maybe something like...\r\n\r\n    public class RoundedShadowPane extends JPanel {\r\n\r\n        private double cornerRadius = 20;\r\n        private int shadowSize = 5;\r\n        private Color shadowColor = Color.BLACK;\r\n        private float shadowAlpha = 0.25f;\r\n\r\n        private JComponent contentPane;\r\n\r\n        public RoundedShadowPane() {\r\n            setOpaque(false);\r\n            int shadowSize = getShadowSize();\r\n            int cornerRadius = (int) getCornerRadius() / 4;\r\n            setBorder(new EmptyBorder(\r\n                    shadowSize + cornerRadius, \r\n                    shadowSize + cornerRadius, \r\n                    shadowSize + cornerRadius + shadowSize, \r\n                    shadowSize + cornerRadius + shadowSize\r\n            ));\r\n            setLayout(new BorderLayout());\r\n            add(getContentPane());\r\n        }\r\n\r\n        public JComponent getContentPane() {\r\n            if (contentPane == null) {\r\n                contentPane = new JPanel();\r\n            }\r\n            return contentPane;\r\n        }\r\n\r\n        public void setContentPane(JComponent contentPane) {\r\n            if (this.contentPane != null) {\r\n                remove(this.contentPane);\r\n            }\r\n            this.contentPane = contentPane;\r\n            this.setBackground(this.contentPane.getBackground());\r\n            add(this.contentPane);\r\n        }\r\n\r\n        public double getCornerRadius() {\r\n            return cornerRadius;\r\n        }\r\n\r\n        public int getShadowSize() {\r\n            return shadowSize;\r\n        }\r\n\r\n        public Color getShadowColor() {\r\n            return shadowColor;\r\n        }\r\n\r\n        public float getShadowAlpha() {\r\n            return shadowAlpha;\r\n        }\r\n       \r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g.create();\r\n            g2d.setColor(Color.MAGENTA);\r\n            g2d.fillRect(0, 0, getWidth(), getHeight());\r\n\r\n            double cornerRadius = getCornerRadius();\r\n            double cornerInsets = cornerRadius / 4d;\r\n\r\n            int width = getWidth();\r\n            int height = getHeight();\r\n            Insets insets = getInsets();\r\n            insets.left -= cornerInsets;\r\n            insets.right -= cornerInsets;\r\n            insets.top -= cornerInsets;\r\n            insets.bottom -= cornerInsets;\r\n\r\n            width -= insets.left + insets.right;\r\n            height -= insets.top + insets.bottom;\r\n\r\n            RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, width, height, cornerRadius, cornerRadius);\r\n            ImageUtilities.applyQualityRenderingHints(g2d);\r\n            g2d.drawImage(\r\n                    ImageUtilities.applyShadow(\r\n                            border, getShadowSize(), \r\n                            getBackground(), \r\n                            getShadowColor(), \r\n                            getShadowAlpha()\r\n                    ), \r\n                    insets.left, \r\n                    insets.top, \r\n                    this\r\n            );\r\n            g2d.setColor(Color.DARK_GRAY);\r\n            g2d.translate(insets.left, insets.top);\r\n            g2d.draw(border);\r\n            g2d.dispose();\r\n        }\r\n\r\n    }  \r\n\r\nThis is a little complicated and it&#39;s important to note the their is a seperate `contentPane` onto which all you other components should be added.\r\n\r\nFor example...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    public class TestPane extends JPanel {\r\n        public TestPane() {\r\n            setLayout(new GridBagLayout());\r\n            GridBagConstraints gbc = new GridBagConstraints();\r\n            \r\n            RoundedShadowPane shadowPane = new RoundedShadowPane();\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Everything is normal here&quot;));\r\n            \r\n            gbc.gridx = 0;\r\n            gbc.gridy = 0;\r\n            add(shadowPane, gbc);\r\n            \r\n            shadowPane = new RoundedShadowPane();\r\n            JPanel contentPane = new JPanel();\r\n            contentPane.setBackground(Color.GREEN);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Envy with green&quot;));\r\n            \r\n            gbc.gridx = 1;\r\n            add(shadowPane, gbc);\r\n\r\n            shadowPane = new RoundedShadowPane();\r\n            contentPane = new JPanel();\r\n            contentPane.setBackground(Color.BLUE);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Why so blue?&quot;));\r\n            \r\n            gbc.gridy = 1;\r\n            gbc.gridx = 0;\r\n            add(shadowPane, gbc);\r\n            \r\n            shadowPane = new RoundedShadowPane();\r\n            contentPane = new JPanel();\r\n            contentPane.setBackground(Color.RED);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Roses are red&quot;));\r\n            \r\n            gbc.gridx = 1;\r\n            add(shadowPane, gbc);\r\n        }\r\n    }\r\n\r\n\r\nNow, a clever person should realise that you could actually paint the `RoundedRectangle` twice, once for the shadow and once for the fill and this would be an entirely valid approach, except, I&#39;d include blurring the shadow, because it &quot;looks&quot; nicer (IMHO)\r\n\r\n&gt; Is there any way that the drop shadow could be blurred? \r\n\r\nAs stated, the answer is based on https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038 which makes use of [JH Labs image filters](http://www.jhlabs.com/ip/filters/index.html) to produced the blurring.\r\n\r\nIf you want to re-enable the blurring, then you will need to download the `Filters.jar` from [JH Labs](http://www.jhlabs.com/ip/filters/index.html) and link it to your project (no going to describe how to do that).\r\n\r\nOnce you&#39;ve done that, modify the `ImageUtilities` class&#39;s `generateBlur` method to reinstate\r\n\r\n    GaussianFilter filter = new GaussianFilter(size);\r\n\r\nand \r\n\r\n    imgBlur = filter.filter(imgBlur, null);\r\n\r\nlines and blurring will once again be implemented.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kv5E4.png\r\n  [2]: https://i.stack.imgur.com/QwEjO.png\r\n  [3]: https://i.stack.imgur.com/IM7lB.png","title":"How to make a JPanel with round corners and box shadow in Swing?","body":"<p>This is, actually, very complicated, at least if you want it to look &quot;cool&quot;.</p>\n<p>Before I get started, I wouldn't use <code>Border</code> for this, you can have a look at <a href=\"https://stackoverflow.com/questions/23945781/is-there-a-way-to-make-jtextfield-for-my-address-bar-larger-and-curvier/23945841#23945841\">Is there a way to make JTextField for my address bar larger and curvier</a> for some reasons why.</p>\n<p>Normally, I make use of <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs image filters</a> to produced a blurred shadow, <a href=\"https://stackoverflow.com/questions/14655643/java-create-shadow-effect-on-image/14656403#14656403\">for example</a>, but for the following, I've removed it so you can run it without dependencies.</p>\n<p>First, you're going to need some &quot;support&quot; functionality...</p>\n<pre><code>public class ImageUtilities {\n\n    public static void applyQualityRenderingHints(Graphics2D g2d) {\n        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n        g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n    }\n\n    public static BufferedImage createCompatibleImage(int width, int height) {\n        return createCompatibleImage(width, height, Transparency.TRANSLUCENT);\n    }\n\n    public static BufferedImage createCompatibleImage(int width, int height, int transparency) {\n        BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);\n        image.coerceData(true);\n        return image;\n    }\n\n    public static BufferedImage createCompatibleImage(BufferedImage image) {\n        return createCompatibleImage(image, image.getWidth(), image.getHeight());\n    }\n\n    public static BufferedImage createCompatibleImage(BufferedImage image,\n            int width, int height) {\n        return getGraphicsConfiguration().createCompatibleImage(width, height, image.getTransparency());\n    }\n\n    public static GraphicsConfiguration getGraphicsConfiguration() {\n        return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();\n    }\n\n    public static BufferedImage generateMask(BufferedImage imgSource, Color color, float alpha) {\n        int imgWidth = imgSource.getWidth();\n        int imgHeight = imgSource.getHeight();\n\n        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgBlur.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        g2.drawImage(imgSource, 0, 0, null);\n        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\n        g2.setColor(color);\n\n        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\n        g2.dispose();\n\n        return imgBlur;\n    }\n\n    public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {\n        //GaussianFilter filter = new GaussianFilter(size);\n\n        int imgWidth = imgSource.getWidth();\n        int imgHeight = imgSource.getHeight();\n\n        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgBlur.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        g2.drawImage(imgSource, 0, 0, null);\n        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\n        g2.setColor(color);\n\n        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\n        g2.dispose();\n\n        //imgBlur = filter.filter(imgBlur, null);\n\n        return imgBlur;\n    }\n\n    public static BufferedImage applyShadow(Shape shape, int size, Color backgroundColor, Color shadowColor, float alpha) {\n        BufferedImage sourceImage = createCompatibleImage(shape.getBounds().width, shape.getBounds().height);\n        Graphics2D g2d = sourceImage.createGraphics();\n        applyQualityRenderingHints(g2d);\n        g2d.translate(-shape.getBounds().getX(), -shape.getBounds().getY());\n        g2d.setColor(backgroundColor);\n        g2d.fill(shape);\n        g2d.dispose();\n        return applyShadow(sourceImage, size, shadowColor, alpha);\n    }\n    \n    public static BufferedImage applyShadow(BufferedImage imgSource, int size, Color color, float alpha) {\n        BufferedImage result = createCompatibleImage(imgSource, imgSource.getWidth() + (size * 2), imgSource.getHeight() + (size * 2));\n        Graphics2D g2d = result.createGraphics();\n        g2d.drawImage(generateShadow(imgSource, size, color, alpha), size, size, null);\n        g2d.drawImage(imgSource, 0, 0, null);\n        g2d.dispose();\n\n        return result;\n    }\n\n    public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {\n        int imgWidth = imgSource.getWidth() + (size * 2);\n        int imgHeight = imgSource.getHeight() + (size * 2);\n\n        BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgMask.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);\n        int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);\n        g2.drawImage(imgSource, x, y, null);\n        g2.dispose();\n\n        // ---- Blur here ---\n        BufferedImage imgGlow = generateBlur(imgMask, (size * 2), color, alpha);\n        return imgGlow;\n    }\n\n    public static Image applyMask(BufferedImage sourceImage, BufferedImage maskImage) {\n        return applyMask(sourceImage, maskImage, AlphaComposite.DST_IN);\n    }\n\n    public static BufferedImage applyMask(BufferedImage sourceImage, BufferedImage maskImage, int method) {\n        BufferedImage maskedImage = null;\n        if (sourceImage != null) {\n\n            int width = maskImage.getWidth(null);\n            int height = maskImage.getHeight(null);\n\n            maskedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n            Graphics2D mg = maskedImage.createGraphics();\n\n            int x = (width - sourceImage.getWidth(null)) / 2;\n            int y = (height - sourceImage.getHeight(null)) / 2;\n\n            mg.drawImage(sourceImage, x, y, null);\n            mg.setComposite(AlphaComposite.getInstance(method));\n\n            mg.drawImage(maskImage, 0, 0, null);\n\n            mg.dispose();\n        }\n        return maskedImage;\n    }\n}\n</code></pre>\n<p>This is a lot of functionality which does a relatively simple job - it produces a drop shadow from a supplied image or shape.  It does this through a process of image masking.</p>\n<p>Let's run a quick test...</p>\n<pre><code>public class TestPane extends JPanel {\n\n    public TestPane() {\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(200, 200);\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g.create();\n        \n        int size = Math.min(getWidth(), getHeight()) / 2;\n        \n        RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, size, size, 20, 20);\n        ImageUtilities.applyQualityRenderingHints(g2d);\n        g2d.drawImage(ImageUtilities.applyShadow(border, 2, getBackground(), Color.BLACK, 0.25f), 5, 5, this);\n        g2d.setColor(Color.DARK_GRAY);\n        g2d.translate(5, 5);\n        g2d.draw(border);\n        g2d.dispose();\n    }\n\n}\n</code></pre>\n<p>Now, this will produce...</p>\n<p><a href=\"https://i.stack.imgur.com/kv5E4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kv5E4.png\" alt=\"enter image description here\" /></a></p>\n<p>Alright, job done!</p>\n<p>Ok, not entirely.  What we really need is a &quot;composite&quot; component.  That is one, which will contain and manage the rounded border and drop shadow, but also allow use to add components to it, which won't &quot;over flow&quot; the border, maybe something like...</p>\n<pre><code>public class RoundedShadowPane extends JPanel {\n\n    private double cornerRadius = 20;\n    private int shadowSize = 5;\n    private Color shadowColor = Color.BLACK;\n    private float shadowAlpha = 0.25f;\n\n    private JComponent contentPane;\n\n    public RoundedShadowPane() {\n        setOpaque(false);\n        int shadowSize = getShadowSize();\n        int cornerRadius = (int) getCornerRadius() / 4;\n        setBorder(new EmptyBorder(\n                shadowSize + cornerRadius, \n                shadowSize + cornerRadius, \n                shadowSize + cornerRadius + shadowSize, \n                shadowSize + cornerRadius + shadowSize\n        ));\n        setLayout(new BorderLayout());\n        add(getContentPane());\n    }\n\n    public JComponent getContentPane() {\n        if (contentPane == null) {\n            contentPane = new JPanel();\n        }\n        return contentPane;\n    }\n\n    public void setContentPane(JComponent contentPane) {\n        if (this.contentPane != null) {\n            remove(this.contentPane);\n        }\n        this.contentPane = contentPane;\n        this.setBackground(this.contentPane.getBackground());\n        add(this.contentPane);\n    }\n\n    public double getCornerRadius() {\n        return cornerRadius;\n    }\n\n    public int getShadowSize() {\n        return shadowSize;\n    }\n\n    public Color getShadowColor() {\n        return shadowColor;\n    }\n\n    public float getShadowAlpha() {\n        return shadowAlpha;\n    }\n   \n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g.create();\n        g2d.setColor(Color.MAGENTA);\n        g2d.fillRect(0, 0, getWidth(), getHeight());\n\n        double cornerRadius = getCornerRadius();\n        double cornerInsets = cornerRadius / 4d;\n\n        int width = getWidth();\n        int height = getHeight();\n        Insets insets = getInsets();\n        insets.left -= cornerInsets;\n        insets.right -= cornerInsets;\n        insets.top -= cornerInsets;\n        insets.bottom -= cornerInsets;\n\n        width -= insets.left + insets.right;\n        height -= insets.top + insets.bottom;\n\n        RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, width, height, cornerRadius, cornerRadius);\n        ImageUtilities.applyQualityRenderingHints(g2d);\n        g2d.drawImage(\n                ImageUtilities.applyShadow(\n                        border, getShadowSize(), \n                        getBackground(), \n                        getShadowColor(), \n                        getShadowAlpha()\n                ), \n                insets.left, \n                insets.top, \n                this\n        );\n        g2d.setColor(Color.DARK_GRAY);\n        g2d.translate(insets.left, insets.top);\n        g2d.draw(border);\n        g2d.dispose();\n    }\n\n}  \n</code></pre>\n<p>This is a little complicated and it's important to note the their is a seperate <code>contentPane</code> onto which all you other components should be added.</p>\n<p>For example...</p>\n<p><a href=\"https://i.stack.imgur.com/QwEjO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QwEjO.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class TestPane extends JPanel {\n    public TestPane() {\n        setLayout(new GridBagLayout());\n        GridBagConstraints gbc = new GridBagConstraints();\n        \n        RoundedShadowPane shadowPane = new RoundedShadowPane();\n        shadowPane.getContentPane().add(new JLabel(&quot;Everything is normal here&quot;));\n        \n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        add(shadowPane, gbc);\n        \n        shadowPane = new RoundedShadowPane();\n        JPanel contentPane = new JPanel();\n        contentPane.setBackground(Color.GREEN);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Envy with green&quot;));\n        \n        gbc.gridx = 1;\n        add(shadowPane, gbc);\n\n        shadowPane = new RoundedShadowPane();\n        contentPane = new JPanel();\n        contentPane.setBackground(Color.BLUE);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Why so blue?&quot;));\n        \n        gbc.gridy = 1;\n        gbc.gridx = 0;\n        add(shadowPane, gbc);\n        \n        shadowPane = new RoundedShadowPane();\n        contentPane = new JPanel();\n        contentPane.setBackground(Color.RED);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Roses are red&quot;));\n        \n        gbc.gridx = 1;\n        add(shadowPane, gbc);\n    }\n}\n</code></pre>\n<p>Now, a clever person should realise that you could actually paint the <code>RoundedRectangle</code> twice, once for the shadow and once for the fill and this would be an entirely valid approach, except, I'd include blurring the shadow, because it &quot;looks&quot; nicer (IMHO)</p>\n<blockquote>\n<p>Is there any way that the drop shadow could be blurred?</p>\n</blockquote>\n<p>As stated, the answer is based on <a href=\"https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038\">JPanel Drop Shadow</a> which makes use of <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs image filters</a> to produced the blurring.</p>\n<p>If you want to re-enable the blurring, then you will need to download the <code>Filters.jar</code> from <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs</a> and link it to your project (no going to describe how to do that).</p>\n<p>Once you've done that, modify the <code>ImageUtilities</code> class's <code>generateBlur</code> method to reinstate</p>\n<pre><code>GaussianFilter filter = new GaussianFilter(size);\n</code></pre>\n<p>and</p>\n<pre><code>imgBlur = filter.filter(imgBlur, null);\n</code></pre>\n<p>lines and blurring will once again be implemented.</p>\n<p><a href=\"https://i.stack.imgur.com/IM7lB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IM7lB.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28386551,"reputation":25,"user_id":21712941,"display_name":"Jake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76214227,"answer_count":1,"score":1,"last_activity_date":1683757632,"creation_date":1683676992,"question_id":76214081,"body_markdown":"I&#39;m making an app and I&#39;ve come to the conclusion that I want to make panels have both a box shadow and round corners, I&#39;ve looked through a bunch of already answered questions but I&#39;ve had no success.\r\n\r\n\r\nI have:\r\n```\r\n            JPanel panel = new JPanel() {\r\n                @Override\r\n                protected void paintComponent(Graphics g) {\r\n                    super.setBorder(new DropShadowBorder());\r\n                    super.paintComponent(g);\r\n                    Graphics2D graphics = (Graphics2D) g;\r\n                    graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                    graphics.setColor(Color.white);\r\n                    graphics.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\r\n                }\r\n            };\r\n```\r\n\r\nwhich results in:\r\n[![https://i.stack.imgur.com/spK4E.png][1]][1]\r\n\r\nand what I want is:\r\n[![https://i.stack.imgur.com/JE2io.png][2]][2]\r\n\r\nPlease help\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/spK4E.png\r\n  [2]: https://i.stack.imgur.com/JE2io.png","title":"How to make a JPanel with round corners and box shadow in Swing?","body":"<p>I'm making an app and I've come to the conclusion that I want to make panels have both a box shadow and round corners, I've looked through a bunch of already answered questions but I've had no success.</p>\n<p>I have:</p>\n<pre><code>            JPanel panel = new JPanel() {\n                @Override\n                protected void paintComponent(Graphics g) {\n                    super.setBorder(new DropShadowBorder());\n                    super.paintComponent(g);\n                    Graphics2D graphics = (Graphics2D) g;\n                    graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n                    graphics.setColor(Color.white);\n                    graphics.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\n                }\n            };\n</code></pre>\n<p>which results in:\n<a href=\"https://i.stack.imgur.com/spK4E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/spK4E.png\" alt=\"https://i.stack.imgur.com/spK4E.png\" /></a></p>\n<p>and what I want is:\n<a href=\"https://i.stack.imgur.com/JE2io.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JE2io.png\" alt=\"https://i.stack.imgur.com/JE2io.png\" /></a></p>\n<p>Please help</p>\n"},{"tags":["java","reference"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1683757357,"post_id":76222915,"comment_id":134417483,"body_markdown":"The problem that you have is that your `switch` method can&#39;t be implemented the way you think it can: assigning anything to the parameters has no effect outside of that method. And the fact that you use `ArrayList` is a red herring: the same effect would happen with `String` or `int`. See [this question](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value) for an in-depth guide to what&#39;s happening and why you can&#39;t do what you want.","body":"The problem that you have is that your <code>switch</code> method can&#39;t be implemented the way you think it can: assigning anything to the parameters has no effect outside of that method. And the fact that you use <code>ArrayList</code> is a red herring: the same effect would happen with <code>String</code> or <code>int</code>. See <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">this question</a> for an in-depth guide to what&#39;s happening and why you can&#39;t do what you want."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":4,"creation_date":1683757603,"post_id":76222915,"comment_id":134417512,"body_markdown":"This is not about lists, it&#39;s about references. I recommend you read about scopes.","body":"This is not about lists, it&#39;s about references. I recommend you read about scopes."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1683759947,"post_id":76222915,"comment_id":134417784,"body_markdown":"`public static &lt;T&gt; void switchArrLists(List&lt;T&gt; x, List&lt;T&gt; y) { List&lt;T&gt; temp = new ArrayList&lt;&gt;(x); x.clear(); x.addAll(y); y.clear(); y.addAll(temp); }`","body":"<code>public static &lt;T&gt; void switchArrLists(List&lt;T&gt; x, List&lt;T&gt; y) { List&lt;T&gt; temp = new ArrayList&lt;&gt;(x); x.clear(); x.addAll(y); y.clear(); y.addAll(temp); }</code>"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683760464,"post_id":76222915,"comment_id":134417834,"body_markdown":"Just as another exercise, you can make `x` and `y` fields (i.e. `private static` and not inside any method). Then use `switchArrLists()` with no parameters. See how that affects the swapping logic.","body":"Just as another exercise, you can make <code>x</code> and <code>y</code> fields (i.e. <code>private static</code> and not inside any method). Then use <code>switchArrLists()</code> with no parameters. See how that affects the swapping logic."}],"owner":{"account_id":18194473,"reputation":13,"user_id":13239792,"display_name":"randomCactus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683758024,"answer_count":0,"score":0,"last_activity_date":1683757622,"creation_date":1683756923,"question_id":76222915,"body_markdown":"I&#39;m new to Java and currently playing around with ArrayLists. I found something I couldn&#39;t quite grasp and couldn&#39;t find a previous post that answered my question. I was having problems understanding why I can&#39;t overwrite an entire `ArrayList` with another `ArrayList`. I&#39;ve found that replacing each item in an `ArrayList` works, which I can quite understand. However, I can&#39;t seem to grasp why I can&#39;t replace the content of an `ArrayList` entirely.\r\n\r\nFor example:\r\n\r\n```\r\nclass Test {\r\n    public static void switchArrLists(ArrayList&lt;Integer&gt; x, ArrayList&lt;Integer&gt; y) {\r\n        ArrayList&lt;Integer&gt; temp = x;\r\n        x = y;\r\n        y = temp;\r\n\r\n        System.out.println(&quot;x is: &quot; + x);\r\n        System.out.println(&quot;y is: &quot; + y);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;(Arrays.asList(5, 0, 20, 4, 0, 0, 9));\r\n        ArrayList&lt;Integer&gt; y = new ArrayList&lt;Integer&gt;(Arrays.asList(0, 4, 10, 9, 6, 12, 4));\r\n        switchArrLists(x, y);\r\n        System.out.println(&quot;x is: &quot; + x);\r\n        System.out.println(&quot;y is: &quot; + y);\r\n    }\r\n}\r\n```\r\nWhen the code runs, I&#39;ve found that the result is the following:\r\n\r\n    x is: [0, 4, 10, 9, 6, 12, 4]\r\n    y is: [5, 0, 20, 4, 0, 0, 9]\r\n    x is: [5, 0, 20, 4, 0, 0, 9]\r\n    y is: [0, 4, 10, 9, 6, 12, 4]\r\n\r\nwhich shows that the switchArrLists method doesn&#39;t really work. I was wondering why this would be the case. I have a feeling that it has to do something with reference values but can&#39;t really understand it completely.","title":"Overwriting an ArrayList with a different ArrayList","body":"<p>I'm new to Java and currently playing around with ArrayLists. I found something I couldn't quite grasp and couldn't find a previous post that answered my question. I was having problems understanding why I can't overwrite an entire <code>ArrayList</code> with another <code>ArrayList</code>. I've found that replacing each item in an <code>ArrayList</code> works, which I can quite understand. However, I can't seem to grasp why I can't replace the content of an <code>ArrayList</code> entirely.</p>\n<p>For example:</p>\n<pre><code>class Test {\n    public static void switchArrLists(ArrayList&lt;Integer&gt; x, ArrayList&lt;Integer&gt; y) {\n        ArrayList&lt;Integer&gt; temp = x;\n        x = y;\n        y = temp;\n\n        System.out.println(&quot;x is: &quot; + x);\n        System.out.println(&quot;y is: &quot; + y);\n    }\n\n    public static void main(String[] args) {\n        ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;(Arrays.asList(5, 0, 20, 4, 0, 0, 9));\n        ArrayList&lt;Integer&gt; y = new ArrayList&lt;Integer&gt;(Arrays.asList(0, 4, 10, 9, 6, 12, 4));\n        switchArrLists(x, y);\n        System.out.println(&quot;x is: &quot; + x);\n        System.out.println(&quot;y is: &quot; + y);\n    }\n}\n</code></pre>\n<p>When the code runs, I've found that the result is the following:</p>\n<pre><code>x is: [0, 4, 10, 9, 6, 12, 4]\ny is: [5, 0, 20, 4, 0, 0, 9]\nx is: [5, 0, 20, 4, 0, 0, 9]\ny is: [0, 4, 10, 9, 6, 12, 4]\n</code></pre>\n<p>which shows that the switchArrLists method doesn't really work. I was wondering why this would be the case. I have a feeling that it has to do something with reference values but can't really understand it completely.</p>\n"},{"tags":["java","swing","jpanel","jbutton"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333972533,"post_id":10053471,"comment_id":12894548,"body_markdown":"1) *&quot;After going through the answers, My comments are:&quot;* Not something we will be &#39;notified&#39; of..  The only way for us to know is for you to add a comment to each answer.  I just returned to this to see what the score was after a recent up-vote.  ;)  2)  For better help sooner, post an [SSCCE](http://sscce.org/).  You can see an SSCCE in my linked answer.","body":"1) <i>&quot;After going through the answers, My comments are:&quot;</i> Not something we will be &#39;notified&#39; of..  The only way for us to know is for you to add a comment to each answer.  I just returned to this to see what the score was after a recent up-vote.  ;)  2)  For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>.  You can see an SSCCE in my linked answer."}],"answers":[{"tags":[],"owner":{"account_id":1355455,"reputation":1133,"user_id":1293950,"display_name":"dexametason"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1333793023,"creation_date":1333793023,"answer_id":10053504,"question_id":10053471,"body_markdown":"If your application is as simple as having only two panels you shouldn&#39;t create two JFrames. You should create a JFrame with two JPanel each of them contains the neccessary information for you. If you are ready with your first panel you can call setVisible(false) on it, and call setVisible(true) on the 2nd frame. It is the one of the most easy-to-understand solution.&lt;br&gt;\r\nBut, it only depends on you if it is good for you or you would like to use some more detailed solution.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>If your application is as simple as having only two panels you shouldn't create two JFrames. You should create a JFrame with two JPanel each of them contains the neccessary information for you. If you are ready with your first panel you can call setVisible(false) on it, and call setVisible(true) on the 2nd frame. It is the one of the most easy-to-understand solution.<br>\nBut, it only depends on you if it is good for you or you would like to use some more detailed solution.</p>\n"},{"tags":[],"owner":{"account_id":1323592,"reputation":8676,"user_id":1268895,"accept_rate":80,"display_name":"wattostudios"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333793104,"creation_date":1333793104,"answer_id":10053508,"question_id":10053471,"body_markdown":"What you should do is have a single `JFrame` for the application, then you add and remove `JPanels` as you want to move between screens.\r\n\r\nEach of your `JPanels` should basically have the following...\r\n1. A `JButton` called &quot;Next&quot;\r\n2. A `ButtonListener` for each button, that tells the `JFrame` to load panel2, panel3, etc.\r\n\r\nAs part of the `ButtonListener`, you basically just want to call something like `JFrame.removeAll()` to remove the existing panel, then `JFrame.add(JPanel)` to add the next panel.\r\n\r\nBy having 1 `JFrame`, you also only have 1 `main()` method.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>What you should do is have a single <code>JFrame</code> for the application, then you add and remove <code>JPanels</code> as you want to move between screens.</p>\n\n<p>Each of your <code>JPanels</code> should basically have the following...\n1. A <code>JButton</code> called \"Next\"\n2. A <code>ButtonListener</code> for each button, that tells the <code>JFrame</code> to load panel2, panel3, etc.</p>\n\n<p>As part of the <code>ButtonListener</code>, you basically just want to call something like <code>JFrame.removeAll()</code> to remove the existing panel, then <code>JFrame.add(JPanel)</code> to add the next panel.</p>\n\n<p>By having 1 <code>JFrame</code>, you also only have 1 <code>main()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1333793798,"creation_date":1333793798,"answer_id":10053591,"question_id":10053471,"body_markdown":"Don&#39;t use two or more `JFrames`, nor with separated and compiled `Jar files`, this is road to the hell, better would be look at [CardLayout][1], \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>Don't use two or more <code>JFrames</code>, nor with separated and compiled <code>Jar files</code>, this is road to the hell, better would be look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow\">CardLayout</a>, </p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1333972774,"creation_date":1333794128,"answer_id":10053635,"question_id":10053471,"body_markdown":"Use a &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html&quot;&gt;CardLayout&lt;/a&gt;, as shown &lt;a href=&quot;https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005&quot;&gt;here&lt;/a&gt;  (and [one frame](https://stackoverflow.com/a/9554657/418556)) as mentioned by others.\r\n\r\n![Game view][1]  ![High Scores view][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/dJLvt.png\r\n  [2]: http://i.stack.imgur.com/i9ZvK.png\r\n\r\n&gt; When Next is clicked, I&#39;m trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?\r\n\r\nMake the panels `public` access level and they will be available from other packages.\r\n\r\n---\r\n\r\nOne problem in that code snippet is implied by the line:\r\n\r\n    UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();  \r\n\r\nIt goes out of scope before ever being added to a container.  Also, their should be no need to remove anything when adding a new card to the layout, and no need to call `repaint()`.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>Use a <a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html\" rel=\"nofollow noreferrer\">CardLayout</a>, as shown <a href=\"https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005\">here</a>  (and <a href=\"https://stackoverflow.com/a/9554657/418556\">one frame</a>) as mentioned by others.</p>\n\n<p><img src=\"https://i.stack.imgur.com/dJLvt.png\" alt=\"Game view\">  <img src=\"https://i.stack.imgur.com/i9ZvK.png\" alt=\"High Scores view\"></p>\n\n<blockquote>\n  <p>When Next is clicked, I'm trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?</p>\n</blockquote>\n\n<p>Make the panels <code>public</code> access level and they will be available from other packages.</p>\n\n<hr>\n\n<p>One problem in that code snippet is implied by the line:</p>\n\n<pre><code>UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();  \n</code></pre>\n\n<p>It goes out of scope before ever being added to a container.  Also, their should be no need to remove anything when adding a new card to the layout, and no need to call <code>repaint()</code>.</p>\n"}],"owner":{"account_id":1367110,"reputation":386,"user_id":1303321,"accept_rate":41,"display_name":"merlachandra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":607,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":10053591,"answer_count":4,"score":1,"last_activity_date":1683756408,"creation_date":1333792655,"question_id":10053471,"body_markdown":"I&#39;m new to java.I&#39;m creating a swing based UI. I&#39;ve created 2 frames, each one in separate .java file inside same package.\r\n\r\nThese two frames represents 2 screens (panels) of application. When Next button in first frame is clicked, it should move to second frame.\r\n\r\nWhen I checked, these two classes are having main method, I think it should be correct way for creating applications. there should be only one main method.\r\n\r\nWhen Next is clicked, I&#39;m trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?\r\n\r\nAs I&#39;m beginner, Can somebody suggest me in how to start up with these kind of applications? what are the guidelines that need to be followed? And please help me in finding documentation related to starting up with the development of such applications.\r\n\r\nAfter going through the answers, My comments are:\r\n\r\nI used the following code to go to next panel from first panel, but didn&#39;t worked.\r\n\r\n    private void gotoNextPanel(){\r\n    //    jPanelFirstScreen.setVisible(false);\r\n          JPanelSecondScreen jpanelSecondScreen= new JPanelSecondScreen();\r\n          jpanelSecondScreen.setVisible(true);\r\n          UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();\r\n          upgradeUtilityGUI.removeAll();\r\n          validate();\r\n          repaint();\r\n    //      upgradeUtilityGUI.add(jpanelSecondScreen);\r\n                upgradeUtilityGUI.getContentPane().add(jpanelSecondScreen, &quot;card2&quot;);\r\n          jpanelSecondScreen.setVisible(true);\r\n          validate();\r\n          repaint();\r\n                    \r\n        }\r\n\r\nI&#39;m using netbeans, and &#39;ve added two panels to the cardlayout of frame. And when I use the above code to change panels, Nothing is happening, the first panel is still appearing. Can somebody tell me, how to write code for moving from one panel to another when both the panels &#39;ve been added to cardlayout of jFrame ?","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>I'm new to java.I'm creating a swing based UI. I've created 2 frames, each one in separate .java file inside same package.</p>\n\n<p>These two frames represents 2 screens (panels) of application. When Next button in first frame is clicked, it should move to second frame.</p>\n\n<p>When I checked, these two classes are having main method, I think it should be correct way for creating applications. there should be only one main method.</p>\n\n<p>When Next is clicked, I'm trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?</p>\n\n<p>As I'm beginner, Can somebody suggest me in how to start up with these kind of applications? what are the guidelines that need to be followed? And please help me in finding documentation related to starting up with the development of such applications.</p>\n\n<p>After going through the answers, My comments are:</p>\n\n<p>I used the following code to go to next panel from first panel, but didn't worked.</p>\n\n<pre><code>private void gotoNextPanel(){\n//    jPanelFirstScreen.setVisible(false);\n      JPanelSecondScreen jpanelSecondScreen= new JPanelSecondScreen();\n      jpanelSecondScreen.setVisible(true);\n      UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();\n      upgradeUtilityGUI.removeAll();\n      validate();\n      repaint();\n//      upgradeUtilityGUI.add(jpanelSecondScreen);\n            upgradeUtilityGUI.getContentPane().add(jpanelSecondScreen, \"card2\");\n      jpanelSecondScreen.setVisible(true);\n      validate();\n      repaint();\n\n    }\n</code></pre>\n\n<p>I'm using netbeans, and 've added two panels to the cardlayout of frame. And when I use the above code to change panels, Nothing is happening, the first panel is still appearing. Can somebody tell me, how to write code for moving from one panel to another when both the panels 've been added to cardlayout of jFrame ?</p>\n"},{"tags":["java","c++","c","algorithm"],"comments":[{"owner":{"account_id":996105,"reputation":182284,"user_id":1011995,"display_name":"Daniel Fischer"},"score":23,"creation_date":1352293985,"post_id":13270491,"comment_id":18087763,"body_markdown":"Sort the arrays first. Then you only need a single pass.","body":"Sort the arrays first. Then you only need a single pass."},{"owner":{"account_id":316698,"reputation":3443,"user_id":633001,"accept_rate":86,"display_name":"SinisterMJ"},"score":0,"creation_date":1352294045,"post_id":13270491,"comment_id":18087786,"body_markdown":"As stated above, sort the two arrays, and from there it is really easy.","body":"As stated above, sort the two arrays, and from there it is really easy."},{"owner":{"account_id":1381576,"reputation":1565,"user_id":1314439,"accept_rate":62,"display_name":"Ranjan Sarma"},"score":0,"creation_date":1352294097,"post_id":13270491,"comment_id":18087820,"body_markdown":"Let Us Consider Sorting Cannot Be Implemented In This Case (I am saying so because in most day to day case it will take longer time to sort non-primitive data types or classes which would suppress the purpose of single pass).","body":"Let Us Consider Sorting Cannot Be Implemented In This Case (I am saying so because in most day to day case it will take longer time to sort non-primitive data types or classes which would suppress the purpose of single pass)."},{"owner":{"account_id":1879711,"reputation":1641,"user_id":1700184,"accept_rate":43,"display_name":"user1700184"},"score":51,"creation_date":1352294120,"post_id":13270491,"comment_id":18087828,"body_markdown":"Use HashSet to store all data from first array.  Then for every element in the second array, check if the HashSet contains() the element.  The complexity of sorting is O(n lg n) while the complexity of this method is O(n)","body":"Use HashSet to store all data from first array.  Then for every element in the second array, check if the HashSet contains() the element.  The complexity of sorting is O(n lg n) while the complexity of this method is O(n)"},{"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"score":0,"creation_date":1352294570,"post_id":13270491,"comment_id":18088023,"body_markdown":"is sorting allowed at all, or do u have to work the array is it is? because this feels like a string searching algorithm question","body":"is sorting allowed at all, or do u have to work the array is it is? because this feels like a string searching algorithm question"},{"owner":{"account_id":1497288,"reputation":666,"user_id":1402919,"accept_rate":100,"display_name":"dounyy"},"score":0,"creation_date":1352295370,"post_id":13270491,"comment_id":18088372,"body_markdown":"Well, I guess sorting is doing several passes over the array, so to me this option should be excluded.","body":"Well, I guess sorting is doing several passes over the array, so to me this option should be excluded."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":4,"creation_date":1352297280,"post_id":13270491,"comment_id":18089221,"body_markdown":"What is more important to you? Time or space efficiency?","body":"What is more important to you? Time or space efficiency?"},{"owner":{"account_id":327343,"reputation":151574,"user_id":649665,"accept_rate":71,"display_name":"James Kanze"},"score":0,"creation_date":1352299114,"post_id":13270491,"comment_id":18090084,"body_markdown":"@RanjanSarma Sorting, then merging is `O(n lg n)`.  Using unsorted arrays is `O(n^2)`.  Sorting will be a lot more efficient.","body":"@RanjanSarma Sorting, then merging is <code>O(n lg n)</code>.  Using unsorted arrays is <code>O(n^2)</code>.  Sorting will be a lot more efficient."},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":1,"creation_date":1352300778,"post_id":13270491,"comment_id":18090959,"body_markdown":"Is the type of the arrays actually `char`? Some of the arguments in comments below could be resolved by putting some restrictions on the types. For example, all the stuff about expected `O(N)` with hash tables goes out the window if you don&#39;t have a reasonable hash function for the type (that&#39;s why Java encourages you to write one). Conversely with `char` and sufficiently large input, the fastest could be to create an array with one element for each character value (generally 256 or 65536), and use it to record which characters appear in each input.","body":"Is the type of the arrays actually <code>char</code>? Some of the arguments in comments below could be resolved by putting some restrictions on the types. For example, all the stuff about expected <code>O(N)</code> with hash tables goes out the window if you don&#39;t have a reasonable hash function for the type (that&#39;s why Java encourages you to write one). Conversely with <code>char</code> and sufficiently large input, the fastest could be to create an array with one element for each character value (generally 256 or 65536), and use it to record which characters appear in each input."},{"owner":{"account_id":64020,"reputation":107959,"user_id":189205,"display_name":"interjay"},"score":0,"creation_date":1352304041,"post_id":13270491,"comment_id":18092710,"body_markdown":"possible duplicate of [Efficient set intersection algorithm](http://stackoverflow.com/questions/497338/efficient-set-intersection-algorithm)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/497338/efficient-set-intersection-algorithm\">Efficient set intersection algorithm</a>"},{"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"score":0,"creation_date":1352305084,"post_id":13270491,"comment_id":18093266,"body_markdown":"Do you care about duplicates? IE if A: [1,1,2] and B: [1,2], should the intersection be [1]?","body":"Do you care about duplicates? IE if A: [1,1,2] and B: [1,2], should the intersection be [1]?"},{"owner":{"account_id":232525,"reputation":176054,"user_id":497418,"accept_rate":76,"display_name":"zzzzBov"},"score":25,"creation_date":1352308862,"post_id":13270491,"comment_id":18095302,"body_markdown":"Without a clear definition of what &quot;best&quot; is, I propose this solution for sorting arrays: Print each array item on a slip of paper, and place each slip of paper in a clearly marked envelope. Mail the envelopes to your grandmother with instructions to return only the items that were included in both envelopes, along with some cookies. The solution isn&#39;t very fast as it&#39;s `O(USPS^grandmother)`, but it&#39;s best because cookies are awesome.","body":"Without a clear definition of what &quot;best&quot; is, I propose this solution for sorting arrays: Print each array item on a slip of paper, and place each slip of paper in a clearly marked envelope. Mail the envelopes to your grandmother with instructions to return only the items that were included in both envelopes, along with some cookies. The solution isn&#39;t very fast as it&#39;s <code>O(USPS^grandmother)</code>, but it&#39;s best because cookies are awesome."},{"owner":{"account_id":1880793,"reputation":737,"user_id":1701047,"display_name":"user1701047"},"score":0,"creation_date":1352317161,"post_id":13270491,"comment_id":18098879,"body_markdown":"I guess don&#39;t understand why you hash AND sort?  Your hash isn&#39;t guaranteed to be O(n) and the sorting may not be O(n log(n)) where n is the number of elements.  If you are not allowed to create any further data types and only compare, you will need to find the most efficient string comparing method and possibly employ tricks as a few have suggested.  If you aren&#39;t restricting on the creation of more data your best bet is a hash.  A binary tree of some kind might another one to do it.","body":"I guess don&#39;t understand why you hash AND sort?  Your hash isn&#39;t guaranteed to be O(n) and the sorting may not be O(n log(n)) where n is the number of elements.  If you are not allowed to create any further data types and only compare, you will need to find the most efficient string comparing method and possibly employ tricks as a few have suggested.  If you aren&#39;t restricting on the creation of more data your best bet is a hash.  A binary tree of some kind might another one to do it."},{"owner":{"account_id":2294362,"reputation":14383,"user_id":2016221,"accept_rate":86,"display_name":"rr-"},"score":0,"creation_date":1441716730,"post_id":13270491,"comment_id":52778652,"body_markdown":"@user1700184 what are you talking about? How is querying a HashSet O(1)?","body":"@user1700184 what are you talking about? How is querying a HashSet O(1)?"}],"answers":[{"tags":[],"owner":{"account_id":80529,"reputation":448248,"user_id":227665,"accept_rate":33,"display_name":"codaddict"},"down_vote_count":0,"up_vote_count":109,"is_accepted":false,"score":109,"last_activity_date":1352839789,"creation_date":1352294123,"answer_id":13270569,"question_id":13270491,"body_markdown":"    foreach element e in array A\r\n        insert e into hash table H\r\n    \r\n    foreach element e in array B\r\n        if H contains e \r\n            print e\r\n      \r\n\r\nThis algorithm is `O(N)` in time and `O(N)` in space. \r\n\r\nTo avoid the extra space, you can use the sorting based approach.","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>foreach element e in array A\n    insert e into hash table H\n\nforeach element e in array B\n    if H contains e \n        print e\n</code></pre>\n\n<p>This algorithm is <code>O(N)</code> in time and <code>O(N)</code> in space. </p>\n\n<p>To avoid the extra space, you can use the sorting based approach.</p>\n"},{"tags":[],"owner":{"account_id":1331302,"reputation":118767,"user_id":1275169,"accept_rate":71,"display_name":"P.P"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1352294152,"creation_date":1352294152,"answer_id":13270580,"question_id":13270491,"body_markdown":"1. Sort both the arrays.  \r\n2. Then do loop until they have have elements common Or one of the arrays reaches its end.\r\n\r\nAsymptotically, this takes the complexity of sorting. i.e. O(NlogN) where N is the length of longer input array.","title":"How do I get the intersection between two arrays as a new array?","body":"<ol>\n<li>Sort both the arrays.  </li>\n<li>Then do loop until they have have elements common Or one of the arrays reaches its end.</li>\n</ol>\n\n<p>Asymptotically, this takes the complexity of sorting. i.e. O(NlogN) where N is the length of longer input array.</p>\n"},{"tags":[],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352294336,"creation_date":1352294336,"answer_id":13270639,"question_id":13270491,"body_markdown":"The best way is not to start with arrays at all. Arrays are optimal for random access to elements, but not optimal for searching (which is what finding the intersection is all about). As you are talking about _intersection_, you must be regarding the arrays as sets. So use a more appropriate data structure (in Java, a `Set`). Then the task is much more efficient.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>The best way is not to start with arrays at all. Arrays are optimal for random access to elements, but not optimal for searching (which is what finding the intersection is all about). As you are talking about <em>intersection</em>, you must be regarding the arrays as sets. So use a more appropriate data structure (in Java, a <code>Set</code>). Then the task is much more efficient.</p>\n"},{"tags":[],"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1352294825,"creation_date":1352294825,"answer_id":13270765,"question_id":13270491,"body_markdown":"You can use tree, but time will be O(n(log n)) and elements must be comparable","title":"How do I get the intersection between two arrays as a new array?","body":"<p>You can use tree, but time will be O(n(log n)) and elements must be comparable</p>\n"},{"tags":[],"owner":{"account_id":1424920,"reputation":47863,"user_id":1348709,"accept_rate":73,"display_name":"Mike"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1527067323,"creation_date":1352295145,"answer_id":13270831,"question_id":13270491,"body_markdown":"There are a few methods in some languages that I&#39;m aware of that do exactly what you want, have you considered looking at some of these implementations?\r\n\r\nPHP - &lt;a href=&quot;http://php.net/manual/en/function.array-intersect.php&quot;&gt;array_intersect()&lt;/a&gt;\r\n\r\n    $array1 = array(&quot;a&quot; =&gt; &quot;green&quot;, &quot;red&quot;, &quot;blue&quot;);\r\n    $array2 = array(&quot;b&quot; =&gt; &quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;);\r\n    $result = array_intersect($array1, $array2);\r\n    print_r($result);\r\n\r\n    &gt;&gt; green\r\n       red\r\n\r\n\r\nJava - [List.retainAll][1]\r\n\r\n    Collection listOne = new ArrayList(Arrays.asList(&quot;milan&quot;,&quot;dingo&quot;, &quot;elpha&quot;, &quot;hafil&quot;, &quot;meat&quot;, &quot;iga&quot;, &quot;neeta.peeta&quot;));\r\n    Collection listTwo = new ArrayList(Arrays.asList(&quot;hafil&quot;, &quot;iga&quot;, &quot;binga&quot;, &quot;mike&quot;, &quot;dingo&quot;));\r\n\r\n    listOne.retainAll( listTwo );\r\n    System.out.println( listOne );\r\n\r\n    &gt;&gt; dingo, hafil, iga\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html#retainAll-java.util.Collection-","title":"How do I get the intersection between two arrays as a new array?","body":"<p>There are a few methods in some languages that I'm aware of that do exactly what you want, have you considered looking at some of these implementations?</p>\n\n<p>PHP - <a href=\"http://php.net/manual/en/function.array-intersect.php\" rel=\"nofollow noreferrer\">array_intersect()</a></p>\n\n<pre><code>$array1 = array(\"a\" =&gt; \"green\", \"red\", \"blue\");\n$array2 = array(\"b\" =&gt; \"green\", \"yellow\", \"red\");\n$result = array_intersect($array1, $array2);\nprint_r($result);\n\n&gt;&gt; green\n   red\n</code></pre>\n\n<p>Java - <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#retainAll-java.util.Collection-\" rel=\"nofollow noreferrer\">List.retainAll</a></p>\n\n<pre><code>Collection listOne = new ArrayList(Arrays.asList(\"milan\",\"dingo\", \"elpha\", \"hafil\", \"meat\", \"iga\", \"neeta.peeta\"));\nCollection listTwo = new ArrayList(Arrays.asList(\"hafil\", \"iga\", \"binga\", \"mike\", \"dingo\"));\n\nlistOne.retainAll( listTwo );\nSystem.out.println( listOne );\n\n&gt;&gt; dingo, hafil, iga\n</code></pre>\n"},{"tags":[],"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"down_vote_count":6,"up_vote_count":18,"is_accepted":true,"score":12,"last_activity_date":1352295167,"creation_date":1352295167,"answer_id":13270836,"question_id":13270491,"body_markdown":"Since this looks to me like a string algorithm, I&#39;ll assume for a moment that its not possible to sort this sequence (hence string) then you can use [Longest Common Sequence algorithm (LCS)][1]\r\n\r\nAssuming the input size is constant, then the problem has a complexity of O(nxm), (length of the two inputs)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Since this looks to me like a string algorithm, I'll assume for a moment that its not possible to sort this sequence (hence string) then you can use <a href=\"http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\">Longest Common Sequence algorithm (LCS)</a></p>\n\n<p>Assuming the input size is constant, then the problem has a complexity of O(nxm), (length of the two inputs)</p>\n"},{"tags":[],"owner":{"account_id":961739,"reputation":21941,"user_id":985949,"accept_rate":87,"display_name":"Mik378"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1352297925,"creation_date":1352295761,"answer_id":13271020,"question_id":13270491,"body_markdown":"        public static void main(String[] args) {\r\n            char[] a = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n            char[] b = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n            System.out.println(intersect(a, b));\r\n        }\r\n    \r\n        private static Set&lt;Character&gt; intersect(char[] a, char[] b) {\r\n            Set&lt;Character&gt; aSet = new HashSet&lt;Character&gt;();\r\n            Set&lt;Character&gt; intersection = new HashSet&lt;Character&gt;();\r\n            for (char c : a) {\r\n                aSet.add(c);\r\n            }\r\n            for (char c : b) {\r\n                if (aSet.contains(c)) {\r\n                    intersection.add(c);\r\n                }\r\n            }\r\n            return intersection;\r\n        }","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>    public static void main(String[] args) {\n        char[] a = {'a', 'b', 'c', 'd'};\n        char[] b = {'c', 'd', 'e', 'f'};\n        System.out.println(intersect(a, b));\n    }\n\n    private static Set&lt;Character&gt; intersect(char[] a, char[] b) {\n        Set&lt;Character&gt; aSet = new HashSet&lt;Character&gt;();\n        Set&lt;Character&gt; intersection = new HashSet&lt;Character&gt;();\n        for (char c : a) {\n            aSet.add(c);\n        }\n        for (char c : b) {\n            if (aSet.contains(c)) {\n                intersection.add(c);\n            }\n        }\n        return intersection;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1352328677,"creation_date":1352298058,"answer_id":13271619,"question_id":13270491,"body_markdown":"The lower bound on efficiency is O(n) - you need to at least read all the elements.\r\nThen there are several apporaches:\r\n\r\nDumb simplest approach\r\n--------------------------\r\n\r\nSearch for every element from array one in array two. Time complexity O(n^2).\r\n\r\nSorting approach\r\n----------------\r\n\r\nYou need to sort only array one, then search for elements from array two using binary search. Time complexity: sorting O(nlogn), searching O(n * logn) = O(nlogn), total O(nlogn).\r\n\r\nHash approach\r\n-------------\r\n\r\nCreate a hash table from array one elements. Search for elements form second table in the hash table. The time complexity depends on the hash function. You can achieve O(1) for searches in the optimal case (all elements will have different hash value), but O(n) in the worst case (all elements will have the same hash value). Total time complexity: O(n^x), where x is a factor of hash function efficiency (between 1 and 2).\r\n\r\nSome hash functions are guaranteed to build a table with no collisions. But the building no longer takes strictly O(1) time for every element. It will be O(1) in most cases, but if the table is full or a collision is encountered, then the table needs to be rehashed - taking O(n) time. This happens not so often, much less frequently than clean adds. So the AMORTISED time complexity is O(1). We don&#39;t care about some of the adds taking O(n) time, as long as the majority of adds takes O(1) time.\r\n\r\nBut even so, in an extreme case, the table must be rehashed every single insertion, so the strict time complexity would be O(n^2)","title":"How do I get the intersection between two arrays as a new array?","body":"<p>The lower bound on efficiency is O(n) - you need to at least read all the elements.\nThen there are several apporaches:</p>\n\n<h2>Dumb simplest approach</h2>\n\n<p>Search for every element from array one in array two. Time complexity O(n^2).</p>\n\n<h2>Sorting approach</h2>\n\n<p>You need to sort only array one, then search for elements from array two using binary search. Time complexity: sorting O(nlogn), searching O(n * logn) = O(nlogn), total O(nlogn).</p>\n\n<h2>Hash approach</h2>\n\n<p>Create a hash table from array one elements. Search for elements form second table in the hash table. The time complexity depends on the hash function. You can achieve O(1) for searches in the optimal case (all elements will have different hash value), but O(n) in the worst case (all elements will have the same hash value). Total time complexity: O(n^x), where x is a factor of hash function efficiency (between 1 and 2).</p>\n\n<p>Some hash functions are guaranteed to build a table with no collisions. But the building no longer takes strictly O(1) time for every element. It will be O(1) in most cases, but if the table is full or a collision is encountered, then the table needs to be rehashed - taking O(n) time. This happens not so often, much less frequently than clean adds. So the AMORTISED time complexity is O(1). We don't care about some of the adds taking O(n) time, as long as the majority of adds takes O(1) time.</p>\n\n<p>But even so, in an extreme case, the table must be rehashed every single insertion, so the strict time complexity would be O(n^2)</p>\n"},{"tags":[],"owner":{"account_id":205044,"reputation":22510,"user_id":453590,"accept_rate":100,"display_name":"haylem"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475043285,"creation_date":1352298951,"answer_id":13271878,"question_id":13270491,"body_markdown":"# Google Guava\n\nThere are already many good answers to this, but if you want the one-liner approach using a library for lazy-coding, I&#39;d go with [Google Guava][1] (for Java) and its [`Sets.intersection`](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html#intersection(java.util.Set,%20java.util.Set)) method.\n\n_&lt;sup&gt;(no compiler at hand, bear with me)&lt;/sup&gt;_\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n\r\n    Set&lt;Character&gt; intersection = Sets.intersection(\r\n        Sets.newHashSet&lt;Character&gt;(Chars.asList(a)),\r\n        Sets.newHashSet&lt;Character&gt;(Chars.asList(b))\r\n    );\r\n\r\nObviously, this is assuming both arrays wouldn&#39;t have duplicates, in which case using a set data structure would make more sense and allow for this sort of operation more efficiently, especially if you don&#39;t start from an array of primitives from the start.\r\n\r\nMay or may not fit your use case, but sort of the no-brainer approach for the general case.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"How do I get the intersection between two arrays as a new array?","body":"<h1>Google Guava</h1>\n\n<p>There are already many good answers to this, but if you want the one-liner approach using a library for lazy-coding, I'd go with <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Google Guava</a> (for Java) and its <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html#intersection(java.util.Set,%20java.util.Set)\" rel=\"nofollow\"><code>Sets.intersection</code></a> method.</p>\n\n<p><em><sup>(no compiler at hand, bear with me)</sup></em></p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\n\nSet&lt;Character&gt; intersection = Sets.intersection(\n    Sets.newHashSet&lt;Character&gt;(Chars.asList(a)),\n    Sets.newHashSet&lt;Character&gt;(Chars.asList(b))\n);\n</code></pre>\n\n<p>Obviously, this is assuming both arrays wouldn't have duplicates, in which case using a set data structure would make more sense and allow for this sort of operation more efficiently, especially if you don't start from an array of primitives from the start.</p>\n\n<p>May or may not fit your use case, but sort of the no-brainer approach for the general case.</p>\n"},{"tags":[],"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1352306390,"creation_date":1352306390,"answer_id":13274144,"question_id":13270491,"body_markdown":"If you care about duplicates, use a hash map to index list A, with the key being the element, and the value being a number of how many times that element has been seen. \r\n\r\nYou iterate through the first and for every element in A and if it does not exist in the map, put it in there with a value of 1, if it already exists in the map, add one to that value.\r\n\r\nNext, iterate through B, and if the value exists, subtract 1. If not, put -1 in the value on the table for that element.\r\n\r\nFinally, iterate through the map and for any element that has a value != 0, print out as a difference.\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; intersectArrays(List&lt;T&gt; a, List&lt;T&gt; b) {\r\n        Map&lt;T, Long&gt; intersectionCountMap = new HashMap&lt;T, Long&gt;((((Math.max(a.size(), b.size()))*4)/3)+1);\r\n        List&lt;T&gt; returnList = new LinkedList&lt;T&gt;();\r\n        for(T element : a) {\r\n            Long count = intersectionCountMap.get(element);\r\n            if (count != null) {\r\n                intersectionCountMap.put(element, count+1);\r\n            } else {\r\n                intersectionCountMap.put(element, 1L);\r\n            }\r\n        }\r\n        for (T element : b) {\r\n            Long count = intersectionCountMap.get(element);\r\n            if (count != null) {\r\n                intersectionCountMap.put(element, count-1);\r\n            } else {\r\n                intersectionCountMap.put(element, -1L);\r\n            }            \r\n        }\r\n        for(T key : intersectionCountMap.keySet()) {\r\n            Long count = intersectionCountMap.get(key);\r\n            if (count != null &amp;&amp; count != 0) {\r\n                for(long i = 0; i &lt; count; i++) {\r\n                    returnList.add(key);\r\n                }\r\n            }\r\n        }\r\n        return returnList;\r\n    }\r\n\r\nThis should run in `O(n)`, as we&#39;re only iterating the Lists each once, and the Map once. The Data structures here used in Java should be efficient, as the `HashMap` is constructed with a capacity that can handle the largest size of the lists. \r\n\r\nI&#39;m using a `LinkedList` for the return as it provides us a way of adding and iterating through a list for our unknown sized intersection.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>If you care about duplicates, use a hash map to index list A, with the key being the element, and the value being a number of how many times that element has been seen. </p>\n\n<p>You iterate through the first and for every element in A and if it does not exist in the map, put it in there with a value of 1, if it already exists in the map, add one to that value.</p>\n\n<p>Next, iterate through B, and if the value exists, subtract 1. If not, put -1 in the value on the table for that element.</p>\n\n<p>Finally, iterate through the map and for any element that has a value != 0, print out as a difference.</p>\n\n<pre><code>private static &lt;T&gt; List&lt;T&gt; intersectArrays(List&lt;T&gt; a, List&lt;T&gt; b) {\n    Map&lt;T, Long&gt; intersectionCountMap = new HashMap&lt;T, Long&gt;((((Math.max(a.size(), b.size()))*4)/3)+1);\n    List&lt;T&gt; returnList = new LinkedList&lt;T&gt;();\n    for(T element : a) {\n        Long count = intersectionCountMap.get(element);\n        if (count != null) {\n            intersectionCountMap.put(element, count+1);\n        } else {\n            intersectionCountMap.put(element, 1L);\n        }\n    }\n    for (T element : b) {\n        Long count = intersectionCountMap.get(element);\n        if (count != null) {\n            intersectionCountMap.put(element, count-1);\n        } else {\n            intersectionCountMap.put(element, -1L);\n        }            \n    }\n    for(T key : intersectionCountMap.keySet()) {\n        Long count = intersectionCountMap.get(key);\n        if (count != null &amp;&amp; count != 0) {\n            for(long i = 0; i &lt; count; i++) {\n                returnList.add(key);\n            }\n        }\n    }\n    return returnList;\n}\n</code></pre>\n\n<p>This should run in <code>O(n)</code>, as we're only iterating the Lists each once, and the Map once. The Data structures here used in Java should be efficient, as the <code>HashMap</code> is constructed with a capacity that can handle the largest size of the lists. </p>\n\n<p>I'm using a <code>LinkedList</code> for the return as it provides us a way of adding and iterating through a list for our unknown sized intersection.</p>\n"},{"tags":[],"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352313186,"creation_date":1352313186,"answer_id":13275940,"question_id":13270491,"body_markdown":"Assuming you are dealing with ANSI characters. The approach should be similar for Unicode, just change the range.\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n    int[] charset = new int[256]\r\n\r\n    for(int i=0; i&lt;A.length; i++) {\r\n      charset[A[i]]++;\r\n    }\r\n\r\nNow iterate over the B and you can check if the corresponding charset value for the character being iterated is greater than 0. You can store them in a list or any other collection.\r\n\r\nThis approach takes O(n) time complexity and a constant space for your checks not taking into account your new array/list being used to hold the common elements.\r\n\r\nThis is better than the HashSet/Hashtable approach in terms of space complexity.\r\n\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Assuming you are dealing with ANSI characters. The approach should be similar for Unicode, just change the range.</p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\nint[] charset = new int[256]\n\nfor(int i=0; i&lt;A.length; i++) {\n  charset[A[i]]++;\n}\n</code></pre>\n\n<p>Now iterate over the B and you can check if the corresponding charset value for the character being iterated is greater than 0. You can store them in a list or any other collection.</p>\n\n<p>This approach takes O(n) time complexity and a constant space for your checks not taking into account your new array/list being used to hold the common elements.</p>\n\n<p>This is better than the HashSet/Hashtable approach in terms of space complexity.</p>\n"},{"tags":[],"owner":{"account_id":1336729,"reputation":799,"user_id":1279301,"accept_rate":67,"display_name":"Sumit Kumar Saha"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1352330529,"creation_date":1352330529,"answer_id":13280009,"question_id":13270491,"body_markdown":"    \r\n    int s[256] // for considering all ascii values, serves as a hash function\r\n\r\n    for(int i=0;i&lt;256;i++)\r\n    s[i]=0;\r\n\r\n    char a[]={&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;};\r\n    char b[]={&#39;c&#39;,&#39;d&#39;,&#39;e&#39;,&#39;f&#39;};\r\n\r\n    for(int i=0;i&lt;sizeof(a);i++)\r\n    {\r\n       s[a[i]]++;\r\n     }\r\n\r\n     for(int i=0;i&lt;sizeof(b);i++)//checker function\r\n     {\r\n         if(s[b[i]]&gt;0)\r\n           cout&lt;&lt;b[i]; \r\n      }\r\n\r\n\r\n      complexity O(m+n);\r\n      m- length of array a\r\n      n- length of array b","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>int s[256] // for considering all ascii values, serves as a hash function\n\nfor(int i=0;i&lt;256;i++)\ns[i]=0;\n\nchar a[]={'a','b','c','d'};\nchar b[]={'c','d','e','f'};\n\nfor(int i=0;i&lt;sizeof(a);i++)\n{\n   s[a[i]]++;\n }\n\n for(int i=0;i&lt;sizeof(b);i++)//checker function\n {\n     if(s[b[i]]&gt;0)\n       cout&lt;&lt;b[i]; \n  }\n\n\n  complexity O(m+n);\n  m- length of array a\n  n- length of array b\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1851402,"reputation":1688,"user_id":1677896,"accept_rate":35,"display_name":"kishore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352897488,"creation_date":1352896111,"answer_id":13378834,"question_id":13270491,"body_markdown":"First, sort the two arrays using best sorting algorithm.  \r\nThen, with linear search, you can get the common elements.\r\n\r\n\r\nIf an extra space is provided then we can use hash table to do that.\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>First, sort the two arrays using best sorting algorithm.<br>\nThen, with linear search, you can get the common elements.</p>\n\n<p>If an extra space is provided then we can use hash table to do that.</p>\n"},{"tags":[],"owner":{"account_id":236804,"reputation":1373,"user_id":504534,"display_name":"Colin MacKenzie - III"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363051518,"creation_date":1363051518,"answer_id":15351713,"question_id":13270491,"body_markdown":"in ruby you can just say\r\n\r\n    a = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]\r\n    b = [&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;]\r\n    c = a &amp; b\r\n\r\nc contains [&#39;c&#39;,&#39;d&#39;]","title":"How do I get the intersection between two arrays as a new array?","body":"<p>in ruby you can just say</p>\n\n<pre><code>a = ['a', 'b', 'c', 'd']\nb = ['c', 'd', 'e', 'f']\nc = a &amp; b\n</code></pre>\n\n<p>c contains ['c','d']</p>\n"},{"tags":[],"owner":{"account_id":3149806,"reputation":271,"user_id":2663465,"display_name":"Sanj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375950283,"creation_date":1375948857,"answer_id":18120869,"question_id":13270491,"body_markdown":"You could use HashSet&lt;T&gt; in .NET 3.5 or later. Example c# code:\r\n\r\n    HashSet&lt;int&gt; set1 = new HashSet&lt;int&gt;(new int[]{8, 12, 13, 15});\r\n       \r\n    HashSet&lt;int&gt; set2 = new HashSet&lt;int&gt;(new int[] { 15, 16, 7, 8, 9 });\r\n     \r\n    set1.IntersectWith(set2);\r\n    \r\n    foreach (int i in set1)\r\n    \r\n       Console.Write(i+ &quot; &quot;);\r\n      \r\n      \r\n//output: 8 15","title":"How do I get the intersection between two arrays as a new array?","body":"<p>You could use HashSet in .NET 3.5 or later. Example c# code:</p>\n\n<pre><code>HashSet&lt;int&gt; set1 = new HashSet&lt;int&gt;(new int[]{8, 12, 13, 15});\n\nHashSet&lt;int&gt; set2 = new HashSet&lt;int&gt;(new int[] { 15, 16, 7, 8, 9 });\n\nset1.IntersectWith(set2);\n\nforeach (int i in set1)\n\n   Console.Write(i+ \" \");\n</code></pre>\n\n<p>//output: 8 15</p>\n"},{"tags":[],"owner":{"account_id":1825241,"reputation":1,"user_id":1658235,"display_name":"navgupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381845310,"creation_date":1381845310,"answer_id":19383087,"question_id":13270491,"body_markdown":"\r\nSort one of the arrays (m Log(m) )\r\nnow Pick each element from other array and \r\ndo a binary search in first array(the sorted one)  -&gt;n Log(m)\r\n\r\n\r\nTotal Time Complexity :- **(n+m)Log(m)**.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Sort one of the arrays (m Log(m) )\nnow Pick each element from other array and \ndo a binary search in first array(the sorted one)  ->n Log(m)</p>\n\n<p>Total Time Complexity :- <strong>(n+m)Log(m)</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2667036,"reputation":3989,"user_id":2305243,"accept_rate":100,"display_name":"Alan Dong"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412173764,"creation_date":1412173764,"answer_id":26143765,"question_id":13270491,"body_markdown":"Sort two arrays first, then iterate them, if they are the same element, add to to be returned array.\r\n\r\nCode is here:\r\n\r\n    public static void printArr(int[] arr){\r\n        for (int a:arr){\r\n            System.out.print(a + &quot;, &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    public static int[] intersectionOf(int[] arr1, int[] arr2){\r\n        Arrays.sort(arr1);\r\n        Arrays.sort(arr2);\r\n\r\n        printArr(arr1);\r\n        printArr(arr2);\r\n\r\n        int i=0, j=0, k=0;\r\n        int[] arr = new int[Math.min(arr1.length, arr2.length)];\r\n\r\n        while( i &lt; arr1.length &amp;&amp; j &lt; arr2.length){\r\n            if(arr1[i] &lt; arr2[j]){\r\n                i++;\r\n            } else if(arr1[i] &gt; arr2[j]){\r\n                j++;\r\n            } else {\r\n                arr[k++] = arr1[i++];\r\n                j++;\r\n            }\r\n        }\r\n        return Arrays.copyOf(arr, k);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int[] arr1 = {1, 2, 6};\r\n        int[] arr2 = {10, 2, 5, 1};\r\n        printArr(intersectionOf(arr1,arr2));\r\n    }\r\n\r\noutputs:\r\n\r\n    arr1: 1, 2, 6, \r\n    arr2: 1, 2, 5, 10, \r\n    arr: 1, 2, ","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Sort two arrays first, then iterate them, if they are the same element, add to to be returned array.</p>\n\n<p>Code is here:</p>\n\n<pre><code>public static void printArr(int[] arr){\n    for (int a:arr){\n        System.out.print(a + \", \");\n    }\n    System.out.println();\n}\n\npublic static int[] intersectionOf(int[] arr1, int[] arr2){\n    Arrays.sort(arr1);\n    Arrays.sort(arr2);\n\n    printArr(arr1);\n    printArr(arr2);\n\n    int i=0, j=0, k=0;\n    int[] arr = new int[Math.min(arr1.length, arr2.length)];\n\n    while( i &lt; arr1.length &amp;&amp; j &lt; arr2.length){\n        if(arr1[i] &lt; arr2[j]){\n            i++;\n        } else if(arr1[i] &gt; arr2[j]){\n            j++;\n        } else {\n            arr[k++] = arr1[i++];\n            j++;\n        }\n    }\n    return Arrays.copyOf(arr, k);\n}\n\npublic static void main(String[] args) {\n    int[] arr1 = {1, 2, 6};\n    int[] arr2 = {10, 2, 5, 1};\n    printArr(intersectionOf(arr1,arr2));\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>arr1: 1, 2, 6, \narr2: 1, 2, 5, 10, \narr: 1, 2, \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2633780,"reputation":757,"user_id":2279035,"display_name":"Deepak Singhvi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418535009,"creation_date":1418535009,"answer_id":27466653,"question_id":13270491,"body_markdown":"I hope the following would be useful. \r\nThese are two different approached:\r\n\r\n - Simple Intersection where you compare all the elements from one array\r\n   to another array. \r\n\r\n - Sorting and searching based approach which sorts one array and search second array element in first array using binary\r\n   search.\r\n\r\n&lt;code&gt;\r\n//\r\n\r\n    public class IntersectionOfUnsortedArrays {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[] arr1 = { 12, 4, 17 };\r\n    \t\tint[] arr2 = { 1, 12, 7, 17 };\r\n    \t\tSystem.out.println(&quot;Intersection Using Simple Comparision&quot;);\r\n    \t\tprintArray(simpleIntersection(arr1, arr2));\r\n    \t\tSystem.out.println(&quot;Intersection Using Sort and Binary Search&quot;);\r\n    \t\tprintArray(sortingBasedIntersection(arr1, arr2));\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Simple intersection based on the comparison without any sorting.\r\n    \t * Complexity O(n^2)\r\n    \t */\r\n    \tpublic static int[] simpleIntersection(int[] a, int[] b) {\r\n    \t\tint minlen = a.length &gt; b.length ? b.length : a.length;\r\n    \t\tint c[] = new int[minlen];\r\n    \t\tint k=0;\r\n    \t\tfor(int i=0;i&lt;a.length;i++){\r\n    \t\t\tfor(int j=0;j&lt;b.length;j++){\r\n    \t\t\t\tif(a[i]==b[j]){\r\n    \t\t\t\t\tc[k++]=a[i];\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tint arr[] = new int[k];\r\n    \t\t// copy the final array to remove unwanted 0&#39;s from the array c\r\n    \t\tSystem.arraycopy(c, 0, arr, 0, k);\r\n    \t\treturn arr;\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Sorting and Searching based intersection.\r\n    \t * Complexity Sorting O(n^2) + Searching O(log n)\r\n    \t */\r\n    \t\r\n    \tpublic static int[] sortingBasedIntersection(int[] a, int[] b){\r\n    \t\tinsertionSort(a);\r\n    \t\tint minlen = a.length &gt; b.length ? b.length : a.length;\r\n    \t\tint c[] = new int[minlen];\r\n    \t\tint k=0;\r\n    \t\tfor(int i=0;i&lt;b.length;i++){\r\n    \t\t\tint result = binarySearch(a,0,a.length,b[i]);\r\n    \t\t\tif(result &gt; -1){\r\n    \t\t\t\tc[k++] = a[result];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tint arr[] = new int[k];\r\n    \t\t// copy the final array to remove unwanted 0&#39;s from the array c\r\n    \t\tSystem.arraycopy(c, 0, arr, 0, k);\r\n    \t\treturn arr;\r\n    \t}\r\n    \t\r\n    \tpublic static void insertionSort(int array[]) {\r\n    \t\tfor (int i = 1; i &lt; array.length; i++) {\r\n    \t\t\tint j = i;\r\n    \t\t\tint b = array[i];\r\n    \t\t\twhile ((j &gt; 0) &amp;&amp; (array[j - 1] &gt; b)) {\r\n    \t\t\t\tarray[j] = array[j - 1];\r\n    \t\t\t\tj--;\r\n    \t\t\t}\r\n    \t\t\tarray[j] = b;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tstatic int binarySearch(int arr[], int low, int high, int num) {\r\n    \t\tif (high &lt; low)\r\n    \t\t\treturn -1;\r\n    \t\tint mid = (low + high) / 2;\r\n    \t\tif (num == arr[mid])\r\n    \t\t\treturn mid;\r\n    \t\tif (num &gt; arr[mid])\r\n    \t\t\treturn binarySearch(arr, (mid + 1), high, num);\r\n    \t\telse\r\n    \t\t\treturn binarySearch(arr, low, (mid - 1), num);\r\n    \t}\r\n    \t\r\n    \tpublic static void printArray(int[] array) {\r\n    \t\tfor (int value : array) {\r\n    \t\t\tSystem.out.print(&quot; &quot;+value);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;\\n&quot;);\r\n    \t}\r\n    }\r\n\r\n&lt;/code&gt;","title":"How do I get the intersection between two arrays as a new array?","body":"<p>I hope the following would be useful. \nThese are two different approached:</p>\n\n<ul>\n<li><p>Simple Intersection where you compare all the elements from one array\nto another array. </p></li>\n<li><p>Sorting and searching based approach which sorts one array and search second array element in first array using binary\nsearch.</p></li>\n</ul>\n\n<p><code>\n//</p>\n\n<pre><code>public class IntersectionOfUnsortedArrays {\n    public static void main(String[] args) {\n        int[] arr1 = { 12, 4, 17 };\n        int[] arr2 = { 1, 12, 7, 17 };\n        System.out.println(\"Intersection Using Simple Comparision\");\n        printArray(simpleIntersection(arr1, arr2));\n        System.out.println(\"Intersection Using Sort and Binary Search\");\n        printArray(sortingBasedIntersection(arr1, arr2));\n    }\n\n    /*\n     * Simple intersection based on the comparison without any sorting.\n     * Complexity O(n^2)\n     */\n    public static int[] simpleIntersection(int[] a, int[] b) {\n        int minlen = a.length &gt; b.length ? b.length : a.length;\n        int c[] = new int[minlen];\n        int k=0;\n        for(int i=0;i&lt;a.length;i++){\n            for(int j=0;j&lt;b.length;j++){\n                if(a[i]==b[j]){\n                    c[k++]=a[i];\n                }\n            }\n        }\n        int arr[] = new int[k];\n        // copy the final array to remove unwanted 0's from the array c\n        System.arraycopy(c, 0, arr, 0, k);\n        return arr;\n    }\n\n    /*\n     * Sorting and Searching based intersection.\n     * Complexity Sorting O(n^2) + Searching O(log n)\n     */\n\n    public static int[] sortingBasedIntersection(int[] a, int[] b){\n        insertionSort(a);\n        int minlen = a.length &gt; b.length ? b.length : a.length;\n        int c[] = new int[minlen];\n        int k=0;\n        for(int i=0;i&lt;b.length;i++){\n            int result = binarySearch(a,0,a.length,b[i]);\n            if(result &gt; -1){\n                c[k++] = a[result];\n            }\n        }\n        int arr[] = new int[k];\n        // copy the final array to remove unwanted 0's from the array c\n        System.arraycopy(c, 0, arr, 0, k);\n        return arr;\n    }\n\n    public static void insertionSort(int array[]) {\n        for (int i = 1; i &lt; array.length; i++) {\n            int j = i;\n            int b = array[i];\n            while ((j &gt; 0) &amp;&amp; (array[j - 1] &gt; b)) {\n                array[j] = array[j - 1];\n                j--;\n            }\n            array[j] = b;\n        }\n    }\n\n    static int binarySearch(int arr[], int low, int high, int num) {\n        if (high &lt; low)\n            return -1;\n        int mid = (low + high) / 2;\n        if (num == arr[mid])\n            return mid;\n        if (num &gt; arr[mid])\n            return binarySearch(arr, (mid + 1), high, num);\n        else\n            return binarySearch(arr, low, (mid - 1), num);\n    }\n\n    public static void printArray(int[] array) {\n        for (int value : array) {\n            System.out.print(\" \"+value);\n        }\n        System.out.println(\"\\n\");\n    }\n}\n</code></pre>\n\n<p></code></p>\n"},{"tags":[],"owner":{"account_id":2191061,"reputation":147,"user_id":1938094,"accept_rate":86,"display_name":"Nick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446517508,"creation_date":1446517508,"answer_id":33490414,"question_id":13270491,"body_markdown":"If the collections are already sorted, as shown in the question, then the best solution (not mentioned yet) is a merge-sort-like algorithm that runs in O(n+m).\r\n\r\nCompare the first elements of each collection. If they&#39;re the same, add the element to the intersection set and pop both elements from their collections. If the elements are different, pop the element that&#39;s greater, in comparison, to the other element. Repeat until one collection is empty.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>If the collections are already sorted, as shown in the question, then the best solution (not mentioned yet) is a merge-sort-like algorithm that runs in O(n+m).</p>\n\n<p>Compare the first elements of each collection. If they're the same, add the element to the intersection set and pop both elements from their collections. If the elements are different, pop the element that's greater, in comparison, to the other element. Repeat until one collection is empty.</p>\n"},{"tags":[],"owner":{"account_id":3693494,"reputation":2307,"user_id":3075533,"accept_rate":53,"display_name":"mohsenmadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450235223,"creation_date":1450235223,"answer_id":34303291,"question_id":13270491,"body_markdown":"Using Java 8 features, here is an algorithm which honours duplicates within a list instead of turning a list into a set. No sorting, so no `n log n`.\r\n\r\n 1. Convert one of the lists into a map, with value being number of occurrences (cost: O(n)).\r\n 2. For each item in the other list, if the item exists in the map, decrease occurrence by one (cost: O(n)).\r\n\r\nTherefore, overall cost is O(n). Code:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n\r\n    public class Dup {\r\n\t  public static void main(String[] args) {\r\n\t\tList&lt;Integer&gt; listA = Arrays.asList(3, 1, 4, 1, 9, 5, 9);\r\n\t\tList&lt;Integer&gt; listB = Arrays.asList(2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2, 3);\r\n\t\tfindCommons(listA, listB);\r\n\t  }\r\n\r\n\t  static void findCommons(List&lt;Integer&gt; listA, List&lt;Integer&gt; listB) {\r\n\t\tMap&lt;Integer, Long&gt; mapA = \r\n\t\t\tlistA.stream().collect(\r\n\t\t\t\tCollectors.groupingBy(Integer::intValue, Collectors.counting()));\r\n\t\t\r\n\t\tList&lt;Integer&gt; commons = new ArrayList&lt;&gt;();\r\n\t\tlistB.stream()\r\n\t\t\t.filter(e -&gt; mapA.get(e) != null)\r\n\t\t\t.filter(e -&gt; mapA.get(e) &gt; 0)\r\n\t\t\t.forEach(e -&gt; {\r\n\t\t\t\tmapA.put(e, mapA.get(e) - 1);\r\n\t\t\t\tcommons.add(e);\r\n\t\t\t});\r\n\t\t\r\n\t\tSystem.out.println(commons);\r\n\t  }\r\n    }\r\n\r\n Code above will give this output: `[5, 3, 9, 9]`.\r\n\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Using Java 8 features, here is an algorithm which honours duplicates within a list instead of turning a list into a set. No sorting, so no <code>n log n</code>.</p>\n\n<ol>\n<li>Convert one of the lists into a map, with value being number of occurrences (cost: O(n)).</li>\n<li>For each item in the other list, if the item exists in the map, decrease occurrence by one (cost: O(n)).</li>\n</ol>\n\n<p>Therefore, overall cost is O(n). Code:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic class Dup {\n  public static void main(String[] args) {\n    List&lt;Integer&gt; listA = Arrays.asList(3, 1, 4, 1, 9, 5, 9);\n    List&lt;Integer&gt; listB = Arrays.asList(2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2, 3);\n    findCommons(listA, listB);\n  }\n\n  static void findCommons(List&lt;Integer&gt; listA, List&lt;Integer&gt; listB) {\n    Map&lt;Integer, Long&gt; mapA = \n        listA.stream().collect(\n            Collectors.groupingBy(Integer::intValue, Collectors.counting()));\n\n    List&lt;Integer&gt; commons = new ArrayList&lt;&gt;();\n    listB.stream()\n        .filter(e -&gt; mapA.get(e) != null)\n        .filter(e -&gt; mapA.get(e) &gt; 0)\n        .forEach(e -&gt; {\n            mapA.put(e, mapA.get(e) - 1);\n            commons.add(e);\n        });\n\n    System.out.println(commons);\n  }\n}\n</code></pre>\n\n<p>Code above will give this output: <code>[5, 3, 9, 9]</code>.</p>\n"},{"tags":[],"owner":{"account_id":9271726,"reputation":308,"user_id":6885473,"accept_rate":87,"display_name":"user6885473"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475033808,"creation_date":1475033808,"answer_id":39737613,"question_id":13270491,"body_markdown":"import java.util.Scanner;\r\n\r\npublic class arraycommon {\r\n\r\n\tpublic static void main(String[] args) {\r\n        Scanner sc=new Scanner(System.in);\r\n\t\t// display common element in two diffrent array\r\n\t\tint sizea,sizeb,i=0,j=0,k=0;\r\n\t\tint count=0;\r\n\t\tSystem.out.println(&quot;enter the size array A:&quot;+&#39;\\n&#39;);\r\n\t\tsizea=sc.nextInt();\r\n\t\tSystem.out.println(&quot;enter the size array B&quot;+&#39;\\n&#39;);\r\n\t\tsizeb=sc.nextInt();\r\n\t\tint a[]=new int[sizea];\r\n\t\tint b[]=new int[sizeb];\r\n\t\tint c[]=new int[sizea];\r\n\t\t\r\n\t\t\r\n\t\tSystem.out.println(&quot;enter the element in array A:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizea; i++) {\r\n\t\t\t\r\n\t\t\ta[i]=sc.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;enter the element in array B:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizeb; i++) {\r\n\t\t\t\r\n\t\t\tb[i]=sc.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;the element in array A:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizea; i++) {\r\n\t\t\t\r\n\t\t\tSystem.out.print(a[i]+&quot; &quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\tSystem.out.println(&#39;\\n&#39;);\r\n\t\tSystem.out.println(&quot;the element in array B:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizeb; i++) \r\n\t\t{\r\n\t\t\t\r\n\t\t\tSystem.out.print(b[i]+&quot; &quot;);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i = 0; i &lt;sizea; i++) \r\n\t\t{\r\n\t\t\tfor (j = 0; j &lt; sizeb; j++) \r\n\t\t\t{\r\n\t\t\t   if(a[i]==b[j])\r\n\t\t\t   {\r\n\t\t\t\t   count++;\r\n\t\t\t\t   c[k]=a[i];\r\n\t\t\t\t   k=k+1;\r\n\t\t\t   }\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&#39;\\n&#39;);\r\n\t\tSystem.out.println(&quot;element common in array is&quot;);\r\n\t\t\r\n\t\tif(count==0)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;sorry no common elements&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tfor (i = 0; i &lt;count; i++) \r\n\t\t\t{\r\n\t\t\t\r\n\t\t\tSystem.out.print(c[i]+&quot; &quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>import java.util.Scanner;</p>\n\n<p>public class arraycommon {</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner sc=new Scanner(System.in);\n    // display common element in two diffrent array\n    int sizea,sizeb,i=0,j=0,k=0;\n    int count=0;\n    System.out.println(\"enter the size array A:\"+'\\n');\n    sizea=sc.nextInt();\n    System.out.println(\"enter the size array B\"+'\\n');\n    sizeb=sc.nextInt();\n    int a[]=new int[sizea];\n    int b[]=new int[sizeb];\n    int c[]=new int[sizea];\n\n\n    System.out.println(\"enter the element in array A:\"+'\\n');\n    for (i = 0; i &lt; sizea; i++) {\n\n        a[i]=sc.nextInt();\n    }\n    System.out.println(\"enter the element in array B:\"+'\\n');\n    for (i = 0; i &lt; sizeb; i++) {\n\n        b[i]=sc.nextInt();\n    }\n    System.out.println(\"the element in array A:\"+'\\n');\n    for (i = 0; i &lt; sizea; i++) {\n\n        System.out.print(a[i]+\" \");\n\n    }\n    System.out.println('\\n');\n    System.out.println(\"the element in array B:\"+'\\n');\n    for (i = 0; i &lt; sizeb; i++) \n    {\n\n        System.out.print(b[i]+\" \");\n    }\n\n    for (i = 0; i &lt;sizea; i++) \n    {\n        for (j = 0; j &lt; sizeb; j++) \n        {\n           if(a[i]==b[j])\n           {\n               count++;\n               c[k]=a[i];\n               k=k+1;\n           }\n        }\n    }\n    System.out.println('\\n');\n    System.out.println(\"element common in array is\");\n\n    if(count==0)\n    {\n        System.out.println(\"sorry no common elements\");\n    }\n    else\n    {\n        for (i = 0; i &lt;count; i++) \n        {\n\n        System.out.print(c[i]+\" \");\n        }\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":10249031,"reputation":2757,"user_id":7563926,"accept_rate":100,"display_name":"Akash Salunkhe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489753336,"creation_date":1489753336,"answer_id":42857442,"question_id":13270491,"body_markdown":"        simply search each element of first array with each element of second array and stored matched result in third array\r\n    class Union\r\n    {\r\n      public static void main(String[] args) {\r\n      char a[] ={&#39;f&#39;,&#39;g&#39;,&#39;d&#39;,&#39;v&#39;,&#39;a&#39;};\r\n      char b[] ={&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;};\r\n      char temp[] = new char[5];\r\n      int p=0;\r\n      for(int i=0;i&lt;a.length;i++)\r\n      {\r\n        for(int j=0;j&lt;b.length;j++)\r\n        {\r\n          if(a[i]==b[j])     //searches if both array has common element\r\n          {\r\n    \r\n            temp[p] = a[i];   //if match found store it in a new array\r\n            p++;\r\n          }\r\n    \r\n        }\r\n    \r\n      }\r\n      for(int k=0;k&lt;temp.length;k++)\r\n      {\r\n          System.out.println(temp[k]);\r\n      }\r\n    \r\n      }\r\n    }\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>    simply search each element of first array with each element of second array and stored matched result in third array\nclass Union\n{\n  public static void main(String[] args) {\n  char a[] ={'f','g','d','v','a'};\n  char b[] ={'a','b','c','d','e'};\n  char temp[] = new char[5];\n  int p=0;\n  for(int i=0;i&lt;a.length;i++)\n  {\n    for(int j=0;j&lt;b.length;j++)\n    {\n      if(a[i]==b[j])     //searches if both array has common element\n      {\n\n        temp[p] = a[i];   //if match found store it in a new array\n        p++;\n      }\n\n    }\n\n  }\n  for(int k=0;k&lt;temp.length;k++)\n  {\n      System.out.println(temp[k]);\n  }\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13468344,"reputation":51,"user_id":9717784,"display_name":"Partha.B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683756368,"creation_date":1683755580,"answer_id":76222807,"question_id":13270491,"body_markdown":"Below is my solution with test data\r\n\r\n    public class IntersectionOf2Arrays {\r\n        public static void main(String[] args) {\r\n            System.out.print(&quot;2 Given Arrays are \\n&quot;);\r\n            int[] x= {2,5,3,7};\r\n            //int[] x= {3, 10, 4, 2, 8};\r\n            int[] y={5,2,9,0,1,3};\r\n            //int[] y={10, 4, 12, 3, 23, 1, 8};\r\n            Arrays.stream(x).forEach(a -&gt; System.out.print(&quot;  &quot;+a));\r\n            System.out.print(&quot;\\n&quot;);\r\n            Arrays.stream(y).forEach(b -&gt; System.out.print(&quot;  &quot;+b));\r\n            System.out.print(&quot;\\nIntersection of above two  array is &quot;);\r\n            int[] result = intersection(x,y);\r\n            Arrays.stream(result).forEach(c -&gt; System.out.print(&quot;  &quot;+c));\r\n        }\r\n        static int[] intersectionWithFilter(int x[],int y[]){\r\n    \r\n            int[] z =Arrays.stream(x)\r\n                    .distinct()\r\n                    .filter(a -&gt; Arrays.stream(y).anyMatch(b -&gt; b==a))\r\n                    .toArray();\r\n            return z;\r\n        }\r\n    \r\n        static int[] intersection(int x[],int y[]) {\r\n            int len = 0;\r\n            if(x.length&gt;y.length)\r\n                len = x.length;\r\n            else\r\n                len=y.length;\r\n    \r\n            int []z=new int[len];\r\n            int c = 0;\r\n            for(int i=0;i &lt;(x.length);i++) {\r\n                for(int j=0;j &lt; y.length;j++) {\r\n                    if(x[i]==y[j]){\r\n                        z[c]=x[i];\r\n                        c++;\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            // As it is int array so it is by default 0 filled , so we need to remove those zeros\r\n            return resize(z,c);\r\n        }\r\n    \r\n        private static int[] resize(int[] oldArray, int newSize) {\r\n            int[] newArray = new int[newSize];\r\n            System.arraycopy( oldArray, 0, newArray, 0, newSize );\r\n            return newArray;\r\n        }\r\n    }\r\n\r\nTest result is below:-\r\n2 Given Arrays are \r\n  2  5  3  7\r\nSecond array\r\n  5  2  9  0  1  3\r\nIntersection of above two  array is   2  5  3","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Below is my solution with test data</p>\n<pre><code>public class IntersectionOf2Arrays {\n    public static void main(String[] args) {\n        System.out.print(&quot;2 Given Arrays are \\n&quot;);\n        int[] x= {2,5,3,7};\n        //int[] x= {3, 10, 4, 2, 8};\n        int[] y={5,2,9,0,1,3};\n        //int[] y={10, 4, 12, 3, 23, 1, 8};\n        Arrays.stream(x).forEach(a -&gt; System.out.print(&quot;  &quot;+a));\n        System.out.print(&quot;\\n&quot;);\n        Arrays.stream(y).forEach(b -&gt; System.out.print(&quot;  &quot;+b));\n        System.out.print(&quot;\\nIntersection of above two  array is &quot;);\n        int[] result = intersection(x,y);\n        Arrays.stream(result).forEach(c -&gt; System.out.print(&quot;  &quot;+c));\n    }\n    static int[] intersectionWithFilter(int x[],int y[]){\n\n        int[] z =Arrays.stream(x)\n                .distinct()\n                .filter(a -&gt; Arrays.stream(y).anyMatch(b -&gt; b==a))\n                .toArray();\n        return z;\n    }\n\n    static int[] intersection(int x[],int y[]) {\n        int len = 0;\n        if(x.length&gt;y.length)\n            len = x.length;\n        else\n            len=y.length;\n\n        int []z=new int[len];\n        int c = 0;\n        for(int i=0;i &lt;(x.length);i++) {\n            for(int j=0;j &lt; y.length;j++) {\n                if(x[i]==y[j]){\n                    z[c]=x[i];\n                    c++;\n                }\n                else {\n                    continue;\n                }\n            }\n        }\n        // As it is int array so it is by default 0 filled , so we need to remove those zeros\n        return resize(z,c);\n    }\n\n    private static int[] resize(int[] oldArray, int newSize) {\n        int[] newArray = new int[newSize];\n        System.arraycopy( oldArray, 0, newArray, 0, newSize );\n        return newArray;\n    }\n}\n</code></pre>\n<p>Test result is below:-\n2 Given Arrays are\n2  5  3  7\nSecond array\n5  2  9  0  1  3\nIntersection of above two  array is   2  5  3</p>\n"}],"owner":{"account_id":1381576,"reputation":1565,"user_id":1314439,"accept_rate":62,"display_name":"Ranjan Sarma"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85456,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":13270836,"answer_count":23,"score":72,"last_activity_date":1683756368,"creation_date":1352293861,"question_id":13270491,"body_markdown":"I faced this problem many times during various situations. It is generic to all programming languages although I am comfortable with C or Java.\r\n\r\nLet us consider two arrays (or collections):\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n\r\nHow do I get the common elements between the two arrays as a new array?\r\nIn this case, the intersection of array A and B is `char[] c = {&#39;c&#39;, &#39;d&#39;}`.\r\n\r\nI want to avoid the repeated iteration of one array inside the other array which will\r\nincrease the execution time by (length of A times length of B) which is too much in the case of huge arrays.\r\n\r\nIs there any way we could do a single pass in each array to get the common elements?\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>I faced this problem many times during various situations. It is generic to all programming languages although I am comfortable with C or Java.</p>\n\n<p>Let us consider two arrays (or collections):</p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\n</code></pre>\n\n<p>How do I get the common elements between the two arrays as a new array?\nIn this case, the intersection of array A and B is <code>char[] c = {'c', 'd'}</code>.</p>\n\n<p>I want to avoid the repeated iteration of one array inside the other array which will\nincrease the execution time by (length of A times length of B) which is too much in the case of huge arrays.</p>\n\n<p>Is there any way we could do a single pass in each array to get the common elements?</p>\n"},{"tags":["java","jframe","jpanel","jbutton","game-development"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1683743035,"post_id":76221528,"comment_id":134415117,"body_markdown":"Show your window management code, maybe?","body":"Show your window management code, maybe?"},{"owner":{"account_id":27939108,"reputation":49,"user_id":21335474,"display_name":"User"},"score":0,"creation_date":1683743085,"post_id":76221528,"comment_id":134415125,"body_markdown":"The ActioLlistener method?","body":"The ActioLlistener method?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683743086,"post_id":76221528,"comment_id":134415126,"body_markdown":"A &quot;home screen&quot; suggests a `CardLayout`","body":"A &quot;home screen&quot; suggests a <code>CardLayout</code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1683743322,"post_id":76221528,"comment_id":134415165,"body_markdown":"It sounds like you shouldn&#39;t be changing jframes, but changing the components within the jframe. If you want multiple windows you should have a JDialog. A card layout lets you &quot;switch screens&quot;. When your game is opened one JPanel would be displayed, you click start, then another JPanel is displayed, then the game ends, ...guess what another JPanel is displayed.","body":"It sounds like you shouldn&#39;t be changing jframes, but changing the components within the jframe. If you want multiple windows you should have a JDialog. A card layout lets you &quot;switch screens&quot;. When your game is opened one JPanel would be displayed, you click start, then another JPanel is displayed, then the game ends, ...guess what another JPanel is displayed."},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":2,"creation_date":1683744876,"post_id":76221528,"comment_id":134415473,"body_markdown":"I&#39;m assuming `HScreen()` is supposed to be `public Screen()`. Anyway, you configure `frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`, but in the start button handler you have `frame.dispose();`, which should trigger the `EXIT_ON_CLOSE` operation to call `System exit()` and exit your application. Even if this isn&#39;t the cause of your problem, it&#39;s probably not what you want.","body":"I&#39;m assuming <code>HScreen()</code> is supposed to be <code>public Screen()</code>. Anyway, you configure <code>frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)</code>, but in the start button handler you have <code>frame.dispose();</code>, which should trigger the <code>EXIT_ON_CLOSE</code> operation to call <code>System exit()</code> and exit your application. Even if this isn&#39;t the cause of your problem, it&#39;s probably not what you want."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683849126,"post_id":76221528,"comment_id":134433529,"body_markdown":"It sounds like you&#39;re running some kind of thread/timer which is constantly requesting keyboard focus for your game window, which suggests you&#39;re using a `KeyListener`. You could fix the immediate issue (of the task bar buttons flashing) by using the Key Bindings API instead (of `KeyListener`, which should just do).  Another choice is to use a `WindowFocusListener` and pause/resume you &quot;game loop&quot; when focus is lost/gained.  But in this context, I would just make use of a `CardLayout`.  You could also make use of an `OverlayLayout` or `JLayeredPane` if you want to &quot;overlay&quot; on top of the game","body":"It sounds like you&#39;re running some kind of thread/timer which is constantly requesting keyboard focus for your game window, which suggests you&#39;re using a <code>KeyListener</code>. You could fix the immediate issue (of the task bar buttons flashing) by using the Key Bindings API instead (of <code>KeyListener</code>, which should just do).  Another choice is to use a <code>WindowFocusListener</code> and pause/resume you &quot;game loop&quot; when focus is lost/gained.  But in this context, I would just make use of a <code>CardLayout</code>.  You could also make use of an <code>OverlayLayout</code> or <code>JLayeredPane</code> if you want to &quot;overlay&quot; on top of the game"}],"answers":[{"tags":[],"owner":{"account_id":23666583,"reputation":86,"user_id":17693981,"display_name":"Nicolas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683743175,"creation_date":1683743175,"answer_id":76221568,"question_id":76221528,"body_markdown":"Instead of creating a new JFrame instance for each screen, you can consider using a CardLayout to switch between different JPanels. A CardLayout allows you to stack multiple JPanels on top of each other, and switch between them using a card name or index.","title":"How to create different windows on Java GUI?","body":"<p>Instead of creating a new JFrame instance for each screen, you can consider using a CardLayout to switch between different JPanels. A CardLayout allows you to stack multiple JPanels on top of each other, and switch between them using a card name or index.</p>\n"}],"owner":{"account_id":27939108,"reputation":49,"user_id":21335474,"display_name":"User"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1683761808,"answer_count":1,"score":1,"last_activity_date":1683756118,"creation_date":1683742789,"question_id":76221528,"body_markdown":"So I have created a game and I&#39;m just finishing up the project now but then at then end  I realised I need to have a home screen where the player has the option to press start button or settings. My initial plan was to create another class with a new home screen frame called frame. In this class I implemented ActionListener interface and created a start button. If start button is pressed then hide or dispose and creat a new instance of GamePanel. Then in GamePanel&#39;s ActionListener I said if menu button is pressed then dispose and create new instance of screen.\r\n\r\nEverything worked as planned but then again I realised that the icon for JFrame is blinking like a christmas light in my taskbar. When I press start in the home screen frame then JFrame is disposed so it disappears from the taskbar then instantly appears again since another frame is opened (this is very annoying). I&#39;m here to ask you guys if there is another easy way since I am out of time at this moment? I tried using different JPanels but lets just say it got too complicated.\r\n\r\n\r\n```java\r\n\r\npublic class Screen extends JPanel implements ActionListener {\r\n    JButton startButton = new JButton(&quot;Start&quot;);\r\n    JFrame frame = new JFrame();\r\n\r\n    HScreen() {\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(new Dimension(600, 400));\r\n        frame.setLayout(null);\r\n        frame.setVisible(true);\r\n        frame.setResizable(false);\r\n        frame.add(startButton);\r\n        startButton.setBounds(250, 90, 100, 50);\r\n        startButton.addActionListener(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == startButton) {\r\n            frame.dispose();\r\n            new GamePanel();\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new HScreen();\r\n    }\r\n\r\n}```","title":"How to create different windows on Java GUI?","body":"<p>So I have created a game and I'm just finishing up the project now but then at then end  I realised I need to have a home screen where the player has the option to press start button or settings. My initial plan was to create another class with a new home screen frame called frame. In this class I implemented ActionListener interface and created a start button. If start button is pressed then hide or dispose and creat a new instance of GamePanel. Then in GamePanel's ActionListener I said if menu button is pressed then dispose and create new instance of screen.</p>\n<p>Everything worked as planned but then again I realised that the icon for JFrame is blinking like a christmas light in my taskbar. When I press start in the home screen frame then JFrame is disposed so it disappears from the taskbar then instantly appears again since another frame is opened (this is very annoying). I'm here to ask you guys if there is another easy way since I am out of time at this moment? I tried using different JPanels but lets just say it got too complicated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class Screen extends JPanel implements ActionListener {\n    JButton startButton = new JButton(&quot;Start&quot;);\n    JFrame frame = new JFrame();\n\n    HScreen() {\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(new Dimension(600, 400));\n        frame.setLayout(null);\n        frame.setVisible(true);\n        frame.setResizable(false);\n        frame.add(startButton);\n        startButton.setBounds(250, 90, 100, 50);\n        startButton.addActionListener(this);\n\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == startButton) {\n            frame.dispose();\n            new GamePanel();\n        }\n\n    }\n\n    public static void main(String[] args) {\n        new HScreen();\n    }\n\n}```\n</code></pre>\n"},{"tags":["java","json","rest"],"owner":{"account_id":5167400,"reputation":21,"user_id":4136974,"accept_rate":0,"display_name":"anudeep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683756116,"creation_date":1683756116,"question_id":76222853,"body_markdown":"I am having a code where I have created a object from a payload by using objectMapper like below.\r\n\r\n \r\n\r\n     Test notification =\r\n                        objectMapper.readValue((byte[]) payload, Test.class);\r\n    \r\nTest Class looks like this\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Builder\r\n    public class Test {\r\n      private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\r\n    \r\n      @JsonProperty(&quot;eid&quot;)\r\n      String id;\r\n    \r\n      @JsonProperty(&quot;st&quot;)\r\n      String type;\r\n    }\r\n\r\nNow I need to send this test object as response to another Rest Call. \r\nWhen I used the same Test Object as response from the server , everything is received as empty in the client.\r\nBut if I send response with different Object and with same fields, it is received perfectly.\r\nWhy I am not able to use Test object as response?\r\nIs there any way I can use this as a response without creating  a new object","title":"How to send json parsed data as a response to another rest call","body":"<p>I am having a code where I have created a object from a payload by using objectMapper like below.</p>\n<pre><code> Test notification =\n                    objectMapper.readValue((byte[]) payload, Test.class);\n</code></pre>\n<p>Test Class looks like this</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Builder\npublic class Test {\n  private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\n\n  @JsonProperty(&quot;eid&quot;)\n  String id;\n\n  @JsonProperty(&quot;st&quot;)\n  String type;\n}\n</code></pre>\n<p>Now I need to send this test object as response to another Rest Call.\nWhen I used the same Test Object as response from the server , everything is received as empty in the client.\nBut if I send response with different Object and with same fields, it is received perfectly.\nWhy I am not able to use Test object as response?\nIs there any way I can use this as a response without creating  a new object</p>\n"},{"tags":["java","ssl","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":12,"creation_date":1336948936,"post_id":2703161,"comment_id":13693685,"body_markdown":"It should be noted that the answers to this question don&#39;t do more than what&#39;s asked: they let you ignore the error but don&#39;t fix the underlying problem (a bit like removing the batteries from a smoke alarm instead of putting out the fire). Certificates have a purpose in ensuring the security of the SSL/TLS connection, ignoring those errors introduces a vulnerability to MITM attack. Use test certificates instead of ignoring the error.","body":"It should be noted that the answers to this question don&#39;t do more than what&#39;s asked: they let you ignore the error but don&#39;t fix the underlying problem (a bit like removing the batteries from a smoke alarm instead of putting out the fire). Certificates have a purpose in ensuring the security of the SSL/TLS connection, ignoring those errors introduces a vulnerability to MITM attack. Use test certificates instead of ignoring the error."},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":1,"creation_date":1337274856,"post_id":2703161,"comment_id":13794333,"body_markdown":"Related to http://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient","body":"Related to <a href=\"http://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient\" title=\"how to handle invalid ssl certificates with apache httpclient\">stackoverflow.com/questions/1828775/&hellip;</a>"},{"owner":{"account_id":146530,"reputation":59311,"user_id":357024,"accept_rate":90,"display_name":"Mike"},"score":58,"creation_date":1389897738,"post_id":2703161,"comment_id":31869558,"body_markdown":"&quot;like removing the batteries from a smoke alarm&quot; You might give other developers the benefit of the doubt and assume they know what they&#39;re doing. Perhaps the motivation for this question is local testing and the OP wishes to run a quick test without going through the horrible amounts of Java boilerplate necessary to set up even a simple SSL environment. Maybe someone could just answer the question without going into a &quot;holier than thou&quot; lecture.","body":"&quot;like removing the batteries from a smoke alarm&quot; You might give other developers the benefit of the doubt and assume they know what they&#39;re doing. Perhaps the motivation for this question is local testing and the OP wishes to run a quick test without going through the horrible amounts of Java boilerplate necessary to set up even a simple SSL environment. Maybe someone could just answer the question without going into a &quot;holier than thou&quot; lecture."},{"owner":{"account_id":970066,"reputation":4079,"user_id":992765,"accept_rate":51,"display_name":"odiszapc"},"score":0,"creation_date":1459861693,"post_id":2703161,"comment_id":60468862,"body_markdown":"I.e in our company internal JIRA server has some &quot;windows security policy based cert&quot; which is valid on Windows machines included in domain and not valid on other. I can&#39;t control this policy and still want to call JIRA REST API.","body":"I.e in our company internal JIRA server has some &quot;windows security policy based cert&quot; which is valid on Windows machines included in domain and not valid on other. I can&#39;t control this policy and still want to call JIRA REST API."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":4,"creation_date":1490122479,"post_id":2703161,"comment_id":72968686,"body_markdown":"@Bruno The inability to disable smoke detectors for a period of 30-60 minutes while dealing with a small kitchen fire shows an insane lack of insight into usage patterns by some legal official at some point that I feel borders on criminal.  The fact that there is a concept of &quot;removing batteries from a smoke alarm&quot; proves this.  I feel about the same level of anger about having to get certificates to work for a simple test that I know doesn&#39;t have security ramifications. The existence of this question proves this.","body":"@Bruno The inability to disable smoke detectors for a period of 30-60 minutes while dealing with a small kitchen fire shows an insane lack of insight into usage patterns by some legal official at some point that I feel borders on criminal.  The fact that there is a concept of &quot;removing batteries from a smoke alarm&quot; proves this.  I feel about the same level of anger about having to get certificates to work for a simple test that I know doesn&#39;t have security ramifications. The existence of this question proves this."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1490128001,"post_id":2703161,"comment_id":72971944,"body_markdown":"@BillK Sure, don&#39;t get me wrong, I&#39;ve disabled that sort of verification myself for simple tests once in a while. The real problem is that most people understand the why it&#39;s a problem with smoke alarms. That&#39;s not so much the case in software development: these lines of codes won&#39;t generate errors, and it&#39;s very easy for various project stakeholders (especially those who don&#39;t get near the code) to push for a product release without realising the consequences. Fixing things that don&#39;t cause errors is generally not a priority, especially when you have a deadline.","body":"@BillK Sure, don&#39;t get me wrong, I&#39;ve disabled that sort of verification myself for simple tests once in a while. The real problem is that most people understand the why it&#39;s a problem with smoke alarms. That&#39;s not so much the case in software development: these lines of codes won&#39;t generate errors, and it&#39;s very easy for various project stakeholders (especially those who don&#39;t get near the code) to push for a product release without realising the consequences. Fixing things that don&#39;t cause errors is generally not a priority, especially when you have a deadline."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1490389878,"post_id":2703161,"comment_id":73107967,"body_markdown":"@Bruno Sounds like I agree--My point would be that to not recognize that this is an issue is a design flaw. If the designers were more aware of this issue they might have given us a command line -Dignore_certs_unsafe=true to disable cert checking completely.  This is a pretty exact match to the fire alarm analogy where they should just have a button to disable it for 30 minutes instead of a law that it can&#39;t be disabled.  Sometimes what is perceived as more security is actually less security in practice :)","body":"@Bruno Sounds like I agree--My point would be that to not recognize that this is an issue is a design flaw. If the designers were more aware of this issue they might have given us a command line -Dignore_certs_unsafe=true to disable cert checking completely.  This is a pretty exact match to the fire alarm analogy where they should just have a button to disable it for 30 minutes instead of a law that it can&#39;t be disabled.  Sometimes what is perceived as more security is actually less security in practice :)"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1490389950,"post_id":2703161,"comment_id":73107999,"body_markdown":"Hmm, and actually that might be a good way to implement this hack--setting a -D variable that you enable in your dev launch environment but never prod which would eliminate your concern about forgetting it.","body":"Hmm, and actually that might be a good way to implement this hack--setting a -D variable that you enable in your dev launch environment but never prod which would eliminate your concern about forgetting it."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1494505246,"post_id":2703161,"comment_id":74863570,"body_markdown":"If you don&#39;t want it secure why are you using SSL at all?","body":"If you don&#39;t want it secure why are you using SSL at all?"}],"answers":[{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":2,"up_vote_count":100,"is_accepted":true,"score":98,"last_activity_date":1348086074,"creation_date":1272083541,"answer_id":2703233,"question_id":2703161,"body_markdown":"You need to create a SSLContext with your own TrustManager and create HTTPS scheme using this context. Here is the code,\r\n\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n    // set up a TrustManager that trusts everything\r\n    sslContext.init(null, new TrustManager[] { new X509TrustManager() {\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                        System.out.println(&quot;getAcceptedIssuers =============&quot;);\r\n                        return null;\r\n                }\r\n\r\n                public void checkClientTrusted(X509Certificate[] certs,\r\n                                String authType) {\r\n                        System.out.println(&quot;checkClientTrusted =============&quot;);\r\n                }\r\n\r\n                public void checkServerTrusted(X509Certificate[] certs,\r\n                                String authType) {\r\n                        System.out.println(&quot;checkServerTrusted =============&quot;);\r\n                }\r\n    } }, new SecureRandom());\r\n\r\n    SSLSocketFactory sf = new SSLSocketFactory(sslContext);\r\n    Scheme httpsScheme = new Scheme(&quot;https&quot;, 443, sf);\r\n    SchemeRegistry schemeRegistry = new SchemeRegistry();\r\n    schemeRegistry.register(httpsScheme);\r\n\r\n    // apache HttpClient version &gt;4.2 should use BasicClientConnectionManager\r\n    ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\r\n    HttpClient httpClient = new DefaultHttpClient(cm);\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>You need to create a SSLContext with your own TrustManager and create HTTPS scheme using this context. Here is the code,</p>\n\n<pre><code>SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n\n// set up a TrustManager that trusts everything\nsslContext.init(null, new TrustManager[] { new X509TrustManager() {\n            public X509Certificate[] getAcceptedIssuers() {\n                    System.out.println(\"getAcceptedIssuers =============\");\n                    return null;\n            }\n\n            public void checkClientTrusted(X509Certificate[] certs,\n                            String authType) {\n                    System.out.println(\"checkClientTrusted =============\");\n            }\n\n            public void checkServerTrusted(X509Certificate[] certs,\n                            String authType) {\n                    System.out.println(\"checkServerTrusted =============\");\n            }\n} }, new SecureRandom());\n\nSSLSocketFactory sf = new SSLSocketFactory(sslContext);\nScheme httpsScheme = new Scheme(\"https\", 443, sf);\nSchemeRegistry schemeRegistry = new SchemeRegistry();\nschemeRegistry.register(httpsScheme);\n\n// apache HttpClient version &gt;4.2 should use BasicClientConnectionManager\nClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\nHttpClient httpClient = new DefaultHttpClient(cm);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173089,"reputation":254,"user_id":401552,"display_name":"eldur"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1314121757,"creation_date":1286569729,"answer_id":3894076,"question_id":2703161,"body_markdown":"In extension to *[ZZ Coder&#39;s answer][1]* it will be nice to override the hostnameverifier.\r\n\r\n    // ...\r\n    SSLSocketFactory sf = new SSLSocketFactory (sslContext);\r\n    sf.setHostnameVerifier(new X509HostnameVerifier() {\r\n        public boolean verify(String hostname, SSLSession session) {\r\n            return true;\r\n        }\r\n\r\n        public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\r\n        }\r\n\r\n        public void verify(String host, X509Certificate cert) throws SSLException {\r\n        }\r\n\r\n        public void verify(String host, SSLSocket ssl) throws IOException {\r\n        }\r\n    });\r\n    // ...\r\n\r\n  [1]: https://stackoverflow.com/questions/2703161/apache-httpclient-4-0-ignore-ssl-certificate-errors/2703233#2703233\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>In extension to <em><a href=\"https://stackoverflow.com/questions/2703161/apache-httpclient-4-0-ignore-ssl-certificate-errors/2703233#2703233\">ZZ Coder's answer</a></em> it will be nice to override the hostnameverifier.</p>\n\n<pre><code>// ...\nSSLSocketFactory sf = new SSLSocketFactory (sslContext);\nsf.setHostnameVerifier(new X509HostnameVerifier() {\n    public boolean verify(String hostname, SSLSession session) {\n        return true;\n    }\n\n    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\n    }\n\n    public void verify(String host, X509Certificate cert) throws SSLException {\n    }\n\n    public void verify(String host, SSLSocket ssl) throws IOException {\n    }\n});\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":53330,"reputation":9385,"user_id":159434,"accept_rate":76,"display_name":"David Tinker"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1305208254,"creation_date":1305208254,"answer_id":5979031,"question_id":2703161,"body_markdown":"If all you want to do is get rid of invalid hostname errors you can just do:\r\n\r\n    HttpClient httpClient = new DefaultHttpClient();\r\n    SSLSocketFactory sf = (SSLSocketFactory)httpClient.getConnectionManager()\r\n        .getSchemeRegistry().getScheme(&quot;https&quot;).getSocketFactory();\r\n    sf.setHostnameVerifier(new AllowAllHostnameVerifier());\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If all you want to do is get rid of invalid hostname errors you can just do:</p>\n\n<pre><code>HttpClient httpClient = new DefaultHttpClient();\nSSLSocketFactory sf = (SSLSocketFactory)httpClient.getConnectionManager()\n    .getSchemeRegistry().getScheme(\"https\").getSocketFactory();\nsf.setHostnameVerifier(new AllowAllHostnameVerifier());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1336935559,"creation_date":1335888595,"answer_id":10400575,"question_id":2703161,"body_markdown":"Just for the record, there is a much simpler way to accomplish the same with HttpClient 4.1\r\n\r\n        SSLSocketFactory sslsf = new SSLSocketFactory(new TrustStrategy() {\r\n            \r\n            public boolean isTrusted(\r\n                    final X509Certificate[] chain, String authType) throws CertificateException {\r\n                // Oh, I am easy...\r\n                return true;\r\n            }\r\n            \r\n        });\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Just for the record, there is a much simpler way to accomplish the same with HttpClient 4.1</p>\n\n<pre><code>    SSLSocketFactory sslsf = new SSLSocketFactory(new TrustStrategy() {\n\n        public boolean isTrusted(\n                final X509Certificate[] chain, String authType) throws CertificateException {\n            // Oh, I am easy...\n            return true;\n        }\n\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67073,"reputation":2018,"user_id":196463,"display_name":"Korny"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338443368,"creation_date":1338443368,"answer_id":10828086,"question_id":2703161,"body_markdown":"a full working version for Apache HttpClient 4.1.3 (based on oleg&#39;s code above, but it still needed an allow_all_hostname_verifier on my system):\r\n\r\n\tprivate static HttpClient trustEveryoneSslHttpClient() {\r\n\t\ttry {\r\n\t\t\tSchemeRegistry registry = new SchemeRegistry();\r\n\r\n\t\t\tSSLSocketFactory socketFactory = new SSLSocketFactory(new TrustStrategy() {\r\n\r\n\t\t\t\tpublic boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\t\t\t// Oh, I am easy...\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t}, org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t\t\tregistry.register(new Scheme(&quot;https&quot;, 443, socketFactory));\r\n\t\t\tThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager(registry);\r\n\t\t\tDefaultHttpClient client = new DefaultHttpClient(mgr, new DefaultHttpClient().getParams());\r\n\t\t\treturn client;\r\n\t\t} catch (GeneralSecurityException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\nNote I&#39;m re-throwing all exceptions because really, there&#39;s not much I can do if any of this fails in a real system!","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>a full working version for Apache HttpClient 4.1.3 (based on oleg's code above, but it still needed an allow_all_hostname_verifier on my system):</p>\n\n<pre><code>private static HttpClient trustEveryoneSslHttpClient() {\n    try {\n        SchemeRegistry registry = new SchemeRegistry();\n\n        SSLSocketFactory socketFactory = new SSLSocketFactory(new TrustStrategy() {\n\n            public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\n                // Oh, I am easy...\n                return true;\n            }\n\n        }, org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        registry.register(new Scheme(\"https\", 443, socketFactory));\n        ThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager(registry);\n        DefaultHttpClient client = new DefaultHttpClient(mgr, new DefaultHttpClient().getParams());\n        return client;\n    } catch (GeneralSecurityException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>Note I'm re-throwing all exceptions because really, there's not much I can do if any of this fails in a real system!</p>\n"},{"tags":[],"owner":{"account_id":1079658,"reputation":661,"user_id":1076975,"accept_rate":29,"display_name":"littletiger"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1343053537,"creation_date":1343053537,"answer_id":11614499,"question_id":2703161,"body_markdown":"    \t\tDefaultHttpClient httpclient = new DefaultHttpClient();\r\n\r\n\t\tSSLContext sslContext;\r\n\t\ttry {\r\n\t\t\tsslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n\t\t\t// set up a TrustManager that trusts everything\r\n\t\t\ttry {\r\n\t\t\t\tsslContext.init(null,\r\n\t\t\t\t\t\tnew TrustManager[] { new X509TrustManager() {\r\n\t\t\t\t\t\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;getAcceptedIssuers =============&quot;);\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpublic void checkClientTrusted(\r\n\t\t\t\t\t\t\t\t\tX509Certificate[] certs, String authType) {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;checkClientTrusted =============&quot;);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpublic void checkServerTrusted(\r\n\t\t\t\t\t\t\t\t\tX509Certificate[] certs, String authType) {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;checkServerTrusted =============&quot;);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} }, new SecureRandom());\r\n\t\t\t} catch (KeyManagementException e) {\r\n\t\t\t}\r\n             SSLSocketFactory ssf = new SSLSocketFactory(sslContext,SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n             ClientConnectionManager ccm = this.httpclient.getConnectionManager();\r\n             SchemeRegistry sr = ccm.getSchemeRegistry();\r\n             sr.register(new Scheme(&quot;https&quot;, 443, ssf));\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(e.getMessage(),e);\r\n\t\t}","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<pre><code>        DefaultHttpClient httpclient = new DefaultHttpClient();\n\n    SSLContext sslContext;\n    try {\n        sslContext = SSLContext.getInstance(\"SSL\");\n\n        // set up a TrustManager that trusts everything\n        try {\n            sslContext.init(null,\n                    new TrustManager[] { new X509TrustManager() {\n                        public X509Certificate[] getAcceptedIssuers() {\n                            log.debug(\"getAcceptedIssuers =============\");\n                            return null;\n                        }\n\n                        public void checkClientTrusted(\n                                X509Certificate[] certs, String authType) {\n                            log.debug(\"checkClientTrusted =============\");\n                        }\n\n                        public void checkServerTrusted(\n                                X509Certificate[] certs, String authType) {\n                            log.debug(\"checkServerTrusted =============\");\n                        }\n                    } }, new SecureRandom());\n        } catch (KeyManagementException e) {\n        }\n         SSLSocketFactory ssf = new SSLSocketFactory(sslContext,SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n         ClientConnectionManager ccm = this.httpclient.getConnectionManager();\n         SchemeRegistry sr = ccm.getSchemeRegistry();\n         sr.register(new Scheme(\"https\", 443, ssf));            \n    } catch (Exception e) {\n        log.error(e.getMessage(),e);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1281526,"reputation":141,"user_id":1235537,"display_name":"Swaroop Rath"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1350988381,"creation_date":1345124065,"answer_id":11988335,"question_id":2703161,"body_markdown":"This is how I did it - \r\n\r\n 1. Create my own MockSSLSocketFactory (Class attached below)\r\n 2. Use it to initialise DefaultHttpClient. Proxy settings need to be provided if a proxy is used. \r\n\r\n----\r\nInitialising DefaultHTTPClient - \r\n\r\n    SchemeRegistry schemeRegistry = new SchemeRegistry();\r\n\t\tschemeRegistry.register(new Scheme(&quot;http&quot;, 80, PlainSocketFactory.getSocketFactory()));\r\n\t\tschemeRegistry.register(new Scheme(&quot;https&quot;, 443, new MockSSLSocketFactory()));\r\n\t\tClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\r\n\r\n\t\tDefaultHttpClient httpclient = new DefaultHttpClient(cm);\r\n\t\t\r\n---\r\nMock SSL Factory - \r\n\r\n    public class MockSSLSocketFactory extends SSLSocketFactory {\r\n\r\n\tpublic MockSSLSocketFactory() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n\t\tsuper(trustStrategy, hostnameVerifier);\r\n\t}\r\n\r\n    private static final X509HostnameVerifier hostnameVerifier = new X509HostnameVerifier() {\r\n\t    @Override\r\n\t    public void verify(String host, SSLSocket ssl) throws IOException {\r\n\t\t    // Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void verify(String host, X509Certificate cert) throws SSLException {\r\n\t\t\t//Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\r\n\t\t    //Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public boolean verify(String s, SSLSession sslSession) {\r\n\t\t    return true; \r\n\t    }\r\n    };\r\n\r\n\tprivate static final TrustStrategy trustStrategy = new TrustStrategy() {\r\n\t\t@Override\r\n\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n    }\r\n\r\n----\r\n\r\nIf behind a proxy, need to do this - \r\n\r\n    HttpParams params = new BasicHttpParams();\r\n\t\tparams.setParameter(AuthPNames.PROXY_AUTH_PREF, getClientAuthPrefs());\r\n\r\n    DefaultHttpClient httpclient = new DefaultHttpClient(cm, params);\r\n\r\n    httpclient.getCredentialsProvider().setCredentials(\r\n\t\t\t\t\t\t\tnew AuthScope(proxyHost, proxyPort),\r\n\t\t\t\t\t\t\tnew UsernamePasswordCredentials(proxyUser, proxyPass));","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>This is how I did it - </p>\n\n<ol>\n<li>Create my own MockSSLSocketFactory (Class attached below)</li>\n<li>Use it to initialise DefaultHttpClient. Proxy settings need to be provided if a proxy is used. </li>\n</ol>\n\n<hr>\n\n<p>Initialising DefaultHTTPClient - </p>\n\n<pre><code>SchemeRegistry schemeRegistry = new SchemeRegistry();\n    schemeRegistry.register(new Scheme(\"http\", 80, PlainSocketFactory.getSocketFactory()));\n    schemeRegistry.register(new Scheme(\"https\", 443, new MockSSLSocketFactory()));\n    ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\n\n    DefaultHttpClient httpclient = new DefaultHttpClient(cm);\n</code></pre>\n\n<hr>\n\n<p>Mock SSL Factory - </p>\n\n<pre><code>public class MockSSLSocketFactory extends SSLSocketFactory {\n\npublic MockSSLSocketFactory() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n    super(trustStrategy, hostnameVerifier);\n}\n\nprivate static final X509HostnameVerifier hostnameVerifier = new X509HostnameVerifier() {\n    @Override\n    public void verify(String host, SSLSocket ssl) throws IOException {\n        // Do nothing\n    }\n\n    @Override\n    public void verify(String host, X509Certificate cert) throws SSLException {\n        //Do nothing\n    }\n\n    @Override\n    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\n        //Do nothing\n    }\n\n    @Override\n    public boolean verify(String s, SSLSession sslSession) {\n        return true; \n    }\n};\n\nprivate static final TrustStrategy trustStrategy = new TrustStrategy() {\n    @Override\n    public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        return true;\n    }\n};\n}\n</code></pre>\n\n<hr>\n\n<p>If behind a proxy, need to do this - </p>\n\n<pre><code>HttpParams params = new BasicHttpParams();\n    params.setParameter(AuthPNames.PROXY_AUTH_PREF, getClientAuthPrefs());\n\nDefaultHttpClient httpclient = new DefaultHttpClient(cm, params);\n\nhttpclient.getCredentialsProvider().setCredentials(\n                        new AuthScope(proxyHost, proxyPort),\n                        new UsernamePasswordCredentials(proxyUser, proxyPass));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266342,"reputation":7863,"user_id":553865,"accept_rate":67,"display_name":"Mike Slinn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348524056,"creation_date":1348524056,"answer_id":12573535,"question_id":2703161,"body_markdown":"If you encountered this problem when using AmazonS3Client, which embeds Apache HttpClient 4.1, you simply need to define a system property like this so that the SSL cert checker is relaxed:\r\n\r\n-Dcom.amazonaws.sdk.disableCertChecking=true\r\n\r\nMischief managed","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you encountered this problem when using AmazonS3Client, which embeds Apache HttpClient 4.1, you simply need to define a system property like this so that the SSL cert checker is relaxed:</p>\n\n<p>-Dcom.amazonaws.sdk.disableCertChecking=true</p>\n\n<p>Mischief managed</p>\n"},{"tags":[],"owner":{"account_id":50263,"reputation":22896,"user_id":149872,"accept_rate":100,"display_name":"Elias Dorneles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1372945776,"creation_date":1372945776,"answer_id":17472034,"question_id":2703161,"body_markdown":"If you are using the [fluent API][1], you need to set it up via the `Executor`:\r\n\r\n\r\n    Executor.unregisterScheme(&quot;https&quot;);\r\n    SSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext,\r\n                                      SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n    Executor.registerScheme(new Scheme(&quot;https&quot;, 443, sslSocketFactory));\r\n\r\n... where `sslContext` is the SSLContext created as shown in the **ZZ Coder**&#39;s answer.\r\n\r\nAfter that, you can do your http requests as:\r\n\r\n    String responseAsString = Request.Get(&quot;https://192.168.1.0/whatever.json&quot;)\r\n                             .execute().getContent().asString();\r\n\r\n&lt;sub&gt;**Note:** tested with HttpClient 4.2&lt;/sub&gt;\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fluent.html","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you are using the <a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fluent.html\" rel=\"nofollow\">fluent API</a>, you need to set it up via the <code>Executor</code>:</p>\n\n<pre><code>Executor.unregisterScheme(\"https\");\nSSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext,\n                                  SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\nExecutor.registerScheme(new Scheme(\"https\", 443, sslSocketFactory));\n</code></pre>\n\n<p>... where <code>sslContext</code> is the SSLContext created as shown in the <strong>ZZ Coder</strong>'s answer.</p>\n\n<p>After that, you can do your http requests as:</p>\n\n<pre><code>String responseAsString = Request.Get(\"https://192.168.1.0/whatever.json\")\n                         .execute().getContent().asString();\n</code></pre>\n\n<p><sub><strong>Note:</strong> tested with HttpClient 4.2</sub></p>\n"},{"tags":[],"owner":{"account_id":323601,"reputation":2971,"user_id":643716,"accept_rate":92,"display_name":"Eric"},"down_vote_count":3,"up_vote_count":128,"is_accepted":false,"score":125,"last_activity_date":1611920770,"creation_date":1403538449,"answer_id":24370091,"question_id":2703161,"body_markdown":"All of the other answers were either deprecated or didn&#39;t work for HttpClient 4.3.\r\n\r\nHere is a way to allow all hostnames when building an http client.\r\n\r\n    CloseableHttpClient httpClient = HttpClients\r\n        .custom()\r\n        .setHostnameVerifier(new AllowAllHostnameVerifier())\r\n        .build();\r\n\r\nOr if you are using version 4.4 or later, the updated call looks like this: \r\n    \r\n    CloseableHttpClient httpClient = HttpClients\r\n        .custom()\r\n        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n        .build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>All of the other answers were either deprecated or didn't work for HttpClient 4.3.</p>\n<p>Here is a way to allow all hostnames when building an http client.</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients\n    .custom()\n    .setHostnameVerifier(new AllowAllHostnameVerifier())\n    .build();\n</code></pre>\n<p>Or if you are using version 4.4 or later, the updated call looks like this:</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients\n    .custom()\n    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1891952,"reputation":2743,"user_id":1709793,"accept_rate":0,"display_name":"craftsmannadeem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1404800589,"creation_date":1404800589,"answer_id":24624966,"question_id":2703161,"body_markdown":"Tested with 4.3.3\r\n\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n\r\n    import javax.net.ssl.SSLContext;\r\n\r\n    import org.apache.http.Header;\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.conn.ssl.SSLContexts;\r\n    import org.apache.http.conn.ssl.TrustStrategy;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n\r\n    public class AccessProtectedResource {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\t// Trust all certs\r\n\t\tSSLContext sslcontext = buildSSLContext();\r\n\r\n\t\t// Allow TLSv1 protocol only\r\n\t\tSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n\t\t\t\tsslcontext,\r\n\t\t\t\tnew String[] { &quot;TLSv1&quot; },\r\n\t\t\t\tnull,\r\n\t\t\t\tSSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t\tCloseableHttpClient httpclient = HttpClients.custom()\r\n\t\t\t\t.setSSLSocketFactory(sslsf)\r\n\t\t\t\t.build();\r\n\t\ttry {\r\n\r\n\t\t\tHttpGet httpget = new HttpGet(&quot;https://yoururl&quot;);\r\n\r\n\t\t\tSystem.out.println(&quot;executing request&quot; + httpget.getRequestLine());\r\n\r\n\t\t\tCloseableHttpResponse response = httpclient.execute(httpget);\r\n\t\t\ttry {\r\n\t\t\t\tHttpEntity entity = response.getEntity();\r\n\r\n\t\t\t\tSystem.out.println(&quot;----------------------------------------&quot;);\r\n\t\t\t\tSystem.out.println(response.getStatusLine());\r\n\t\t\t\tif (entity != null) {\r\n\t\t\t\t\tSystem.out.println(&quot;Response content length: &quot; + entity.getContentLength());\r\n\t\t\t\t}\r\n\t\t\t\tfor (Header header : response.getAllHeaders()) {\r\n\t\t\t\t\tSystem.out.println(header);\r\n\t\t\t\t}\r\n\t\t\t\tEntityUtils.consume(entity);\r\n\t\t\t} finally {\r\n\t\t\t\tresponse.close();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\thttpclient.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static SSLContext buildSSLContext()\r\n\t\t\tthrows NoSuchAlgorithmException, KeyManagementException,\r\n\t\t\tKeyStoreException {\r\n\t\tSSLContext sslcontext = SSLContexts.custom()\r\n\t\t\t\t.setSecureRandom(new SecureRandom())\r\n\t\t\t\t.loadTrustMaterial(null, new TrustStrategy() {\r\n\r\n\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType)\r\n\t\t\t\t\t\t\tthrows CertificateException {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.build();\r\n\t\treturn sslcontext;\r\n\t}\r\n}\r\n\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested with 4.3.3</p>\n\n<pre><code>import java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.SSLContext;\n\nimport org.apache.http.Header;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.SSLContexts;\nimport org.apache.http.conn.ssl.TrustStrategy;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\npublic class AccessProtectedResource {\n\npublic static void main(String[] args) throws Exception {\n\n    // Trust all certs\n    SSLContext sslcontext = buildSSLContext();\n\n    // Allow TLSv1 protocol only\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n            sslcontext,\n            new String[] { \"TLSv1\" },\n            null,\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n    CloseableHttpClient httpclient = HttpClients.custom()\n            .setSSLSocketFactory(sslsf)\n            .build();\n    try {\n\n        HttpGet httpget = new HttpGet(\"https://yoururl\");\n\n        System.out.println(\"executing request\" + httpget.getRequestLine());\n\n        CloseableHttpResponse response = httpclient.execute(httpget);\n        try {\n            HttpEntity entity = response.getEntity();\n\n            System.out.println(\"----------------------------------------\");\n            System.out.println(response.getStatusLine());\n            if (entity != null) {\n                System.out.println(\"Response content length: \" + entity.getContentLength());\n            }\n            for (Header header : response.getAllHeaders()) {\n                System.out.println(header);\n            }\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    } finally {\n        httpclient.close();\n    }\n}\n\nprivate static SSLContext buildSSLContext()\n        throws NoSuchAlgorithmException, KeyManagementException,\n        KeyStoreException {\n    SSLContext sslcontext = SSLContexts.custom()\n            .setSecureRandom(new SecureRandom())\n            .loadTrustMaterial(null, new TrustStrategy() {\n\n                public boolean isTrusted(X509Certificate[] chain, String authType)\n                        throws CertificateException {\n                    return true;\n                }\n            })\n            .build();\n    return sslcontext;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":1178518,"reputation":954,"user_id":1153946,"display_name":"STM"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1418941619,"creation_date":1418941139,"answer_id":27556715,"question_id":2703161,"body_markdown":"For the record, tested with httpclient 4.3.6 and compatible with Executor of fluent api:\r\n\r\n    CloseableHttpClient httpClient = HttpClients.custom().\r\n    \t\t\t\t\tsetHostnameVerifier(new AllowAllHostnameVerifier()).\r\n    \t\t\t\t\tsetSslcontext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}).build()).build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>For the record, tested with httpclient 4.3.6 and compatible with Executor of fluent api:</p>\n\n<pre><code>CloseableHttpClient httpClient = HttpClients.custom().\n                    setHostnameVerifier(new AllowAllHostnameVerifier()).\n                    setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\n                    {\n                        public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\n                        {\n                            return true;\n                        }\n                    }).build()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1426934537,"creation_date":1425446484,"answer_id":28847175,"question_id":2703161,"body_markdown":"For Apache HttpClient 4.4:  \r\n\r\n    HttpClientBuilder b = HttpClientBuilder.create();\r\n\r\n    SSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy() {\r\n\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}).build();\r\n    b.setSslcontext( sslContext);\r\n\t\r\n    // or SSLConnectionSocketFactory.getDefaultHostnameVerifier(), if you don&#39;t want to weaken\r\n    HostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;\r\n\r\n    SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, hostnameVerifier);\r\n    Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n\t\t\t.register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n\t\t\t.register(&quot;https&quot;, sslSocketFactory)\r\n            .build();\r\n\r\n    // allows multi-threaded use\r\n    PoolingHttpClientConnectionManager connMgr = new PoolingHttpClientConnectionManager( socketFactoryRegistry);\r\n    b.setConnectionManager( connMgr);\r\n      \r\n    HttpClient client = b.build();\r\n\r\nThis is extracted from our actual working implementation. \r\n\r\nThe other answers are popular, but for HttpClient 4.4 they don&#39;t work. I spent hours trying &amp; exhausting possibilities, but there seems to have been extremely major API change &amp; relocation at 4.4.\r\n\r\nSee also a slightly fuller explanation at: http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/\r\n\r\nHope that helps!","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>For Apache HttpClient 4.4:  </p>\n\n<pre><code>HttpClientBuilder b = HttpClientBuilder.create();\n\nSSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy() {\n    public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n        return true;\n    }\n}).build();\nb.setSslcontext( sslContext);\n\n// or SSLConnectionSocketFactory.getDefaultHostnameVerifier(), if you don't want to weaken\nHostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;\n\nSSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, hostnameVerifier);\nRegistry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n        .register(\"http\", PlainConnectionSocketFactory.getSocketFactory())\n        .register(\"https\", sslSocketFactory)\n        .build();\n\n// allows multi-threaded use\nPoolingHttpClientConnectionManager connMgr = new PoolingHttpClientConnectionManager( socketFactoryRegistry);\nb.setConnectionManager( connMgr);\n\nHttpClient client = b.build();\n</code></pre>\n\n<p>This is extracted from our actual working implementation. </p>\n\n<p>The other answers are popular, but for HttpClient 4.4 they don't work. I spent hours trying &amp; exhausting possibilities, but there seems to have been extremely major API change &amp; relocation at 4.4.</p>\n\n<p>See also a slightly fuller explanation at: <a href=\"http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/\" rel=\"noreferrer\">http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/</a></p>\n\n<p>Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":2238040,"reputation":5463,"user_id":1973820,"accept_rate":36,"display_name":"Hamed MP"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1428075081,"creation_date":1428075081,"answer_id":29435138,"question_id":2703161,"body_markdown":"We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\r\nAfter thinking and figuring out the problem, we come to the following code which works perfectly,\r\njust add it before creating HttpClient instance.\r\n\r\n&gt; some method to call when making post requests....\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n        builder.loadTrustMaterial(null, new TrustStrategy() {\r\n            @Override\r\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\r\n                SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n        HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\r\n        HttpPost postRequest = new HttpPost(url);\r\n\r\n&gt; continue your request in the normal form","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\nAfter thinking and figuring out the problem, we come to the following code which works perfectly,\njust add it before creating HttpClient instance.</p>\n\n<blockquote>\n  <p>some method to call when making post requests....</p>\n</blockquote>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\n    builder.loadTrustMaterial(null, new TrustStrategy() {\n        @Override\n        public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            return true;\n        }\n    });\n\n    SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n    HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\n    HttpPost postRequest = new HttpPost(url);\n</code></pre>\n\n<blockquote>\n  <p>continue your request in the normal form</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1383972,"reputation":588,"user_id":1316389,"display_name":"Chilly"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429105598,"creation_date":1429105598,"answer_id":29651988,"question_id":2703161,"body_markdown":"To accept all certificates in HttpClient 4.4.x you can use the following one liner when creating the httpClient:\r\n\r\n    httpClient = HttpClients.custom().setSSLHostnameVerifier(new NoopHostnameVerifier()).setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, (x509Certificates, s) -&gt; true).build()).build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>To accept all certificates in HttpClient 4.4.x you can use the following one liner when creating the httpClient:</p>\n\n<pre><code>httpClient = HttpClients.custom().setSSLHostnameVerifier(new NoopHostnameVerifier()).setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, (x509Certificates, s) -&gt; true).build()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":328884,"reputation":460,"user_id":652078,"accept_rate":73,"display_name":"sairn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454597977,"creation_date":1454596787,"answer_id":35203927,"question_id":2703161,"body_markdown":"fwiw, an example using &quot;RestEasy&quot; implementation of JAX-RS 2.x to build a special &quot;trust all&quot; client...\r\n\r\n\t\timport java.io.IOException;\r\n\t\timport java.net.MalformedURLException;\r\n\t\timport java.security.GeneralSecurityException;\r\n\t\timport java.security.KeyManagementException;\r\n\t\timport java.security.KeyStoreException;\r\n\t\timport java.security.NoSuchAlgorithmException;\r\n\t\timport java.security.cert.CertificateException;\r\n\t\timport java.security.cert.X509Certificate;\r\n\t\timport java.util.ArrayList;\r\n\t\timport java.util.Arrays;\r\n\t\timport javax.ejb.Stateless;\r\n\t\timport javax.net.ssl.SSLContext;\r\n\t\timport javax.ws.rs.GET;\r\n\t\timport javax.ws.rs.Path;\r\n\t\timport javax.ws.rs.Produces;\r\n\t\timport org.apache.logging.log4j.LogManager;\r\n\t\timport org.apache.logging.log4j.Logger;\r\n\t\timport javax.ws.rs.client.Entity;\r\n\t\timport javax.ws.rs.core.MediaType;\r\n\t\timport javax.ws.rs.core.Response;\r\n\t\timport org.apache.http.config.Registry;\r\n\t\timport org.apache.http.config.RegistryBuilder;\r\n\t\timport org.apache.http.conn.HttpClientConnectionManager;\r\n\t\timport org.apache.http.conn.ssl.TrustStrategy;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyClient;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyWebTarget;\r\n\t\timport org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine;\r\n\t\timport org.apache.http.impl.conn.BasicHttpClientConnectionManager;\r\n\t\timport org.apache.http.conn.socket.ConnectionSocketFactory;\r\n\t\timport org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n\t\timport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n\t\timport org.apache.http.impl.client.CloseableHttpClient;\r\n\t\timport org.apache.http.impl.client.HttpClientBuilder;\r\n\t\timport org.apache.http.ssl.SSLContexts;\r\n\r\n\t\t@Stateless\r\n\t\t@Path(&quot;/postservice&quot;)\r\n\t\tpublic class PostService {\r\n\r\n\t\t    private static final Logger LOG = LogManager.getLogger(&quot;PostService&quot;);\r\n\r\n\t\t    public PostService() {\r\n\t\t    }\r\n\r\n\t\t    @GET\r\n\t\t    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\r\n\t\t    public PostRespDTO get() throws NoSuchAlgorithmException, KeyManagementException, MalformedURLException, IOException, GeneralSecurityException {\r\n\r\n\t\t\t\t//...object passed to the POST method...\r\n\t\t\t\tPostDTO requestObject = new PostDTO();\r\n\t\t\t\trequestObject.setEntryAList(new ArrayList&lt;&gt;(Arrays.asList(&quot;ITEM0000A&quot;, &quot;ITEM0000B&quot;, &quot;ITEM0000C&quot;)));\r\n\t\t\t\trequestObject.setEntryBList(new ArrayList&lt;&gt;(Arrays.asList(&quot;AAA&quot;, &quot;BBB&quot;, &quot;CCC&quot;)));\r\n\r\n\t\t\t\t//...build special &quot;trust all&quot; client to call POST method...\r\n\t\t\t\tApacheHttpClient4Engine engine = new ApacheHttpClient4Engine(createTrustAllClient());\r\n\r\n\t\t\t\tResteasyClient client = new ResteasyClientBuilder().httpEngine(engine).build();\r\n\t\t\t\tResteasyWebTarget target = client.target(&quot;https://localhost:7002/postRespWS&quot;).path(&quot;postrespservice&quot;);\r\n\t\t\t\tResponse response = target.request().accept(MediaType.APPLICATION_JSON).post(Entity.entity(requestObject, MediaType.APPLICATION_JSON));\r\n\t\t\t\t\r\n\t\t\t\t//...object returned from the POST method...\r\n\t\t\t\tPostRespDTO responseObject = response.readEntity(PostRespDTO.class);\r\n\r\n\t\t\t\tresponse.close();\r\n\r\n\t\t\t\treturn responseObject;\r\n\t\t    }\r\n\r\n\r\n\t\t    //...get special &quot;trust all&quot; client...\r\n\t\t    private static CloseableHttpClient createTrustAllClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\r\n\r\n\t\t\t\tSSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, TRUSTALLCERTS).useProtocol(&quot;TLS&quot;).build();\r\n\t\t\t\tHttpClientBuilder builder = HttpClientBuilder.create();\r\n\t\t\t\tNoopHostnameVerifier noop = new NoopHostnameVerifier();\r\n\t\t\t\tSSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContext, noop);\r\n\t\t\t\tbuilder.setSSLSocketFactory(sslConnectionSocketFactory);\r\n\t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create().register(&quot;https&quot;, sslConnectionSocketFactory).build();\r\n\t\t\t\tHttpClientConnectionManager ccm = new BasicHttpClientConnectionManager(registry);\r\n\t\t\t\tbuilder.setConnectionManager(ccm);\r\n\r\n\t\t\t\treturn builder.build();\r\n\t\t    }\r\n\r\n\r\n\t\t    private static final TrustStrategy TRUSTALLCERTS = new TrustStrategy() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType)\r\n\t\t\t\t\tthrows CertificateException {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t    };\r\n\t\t}\r\n\r\n\r\n***related Maven dependencies***\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;4.5&lt;/version&gt;\r\n\t\t    &lt;type&gt;jar&lt;/type&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;javax&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;7.0&lt;/version&gt;\r\n\t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt; ","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>fwiw, an example using \"RestEasy\" implementation of JAX-RS 2.x to build a special \"trust all\" client...</p>\n\n<pre><code>    import java.io.IOException;\n    import java.net.MalformedURLException;\n    import java.security.GeneralSecurityException;\n    import java.security.KeyManagementException;\n    import java.security.KeyStoreException;\n    import java.security.NoSuchAlgorithmException;\n    import java.security.cert.CertificateException;\n    import java.security.cert.X509Certificate;\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import javax.ejb.Stateless;\n    import javax.net.ssl.SSLContext;\n    import javax.ws.rs.GET;\n    import javax.ws.rs.Path;\n    import javax.ws.rs.Produces;\n    import org.apache.logging.log4j.LogManager;\n    import org.apache.logging.log4j.Logger;\n    import javax.ws.rs.client.Entity;\n    import javax.ws.rs.core.MediaType;\n    import javax.ws.rs.core.Response;\n    import org.apache.http.config.Registry;\n    import org.apache.http.config.RegistryBuilder;\n    import org.apache.http.conn.HttpClientConnectionManager;\n    import org.apache.http.conn.ssl.TrustStrategy;\n    import org.jboss.resteasy.client.jaxrs.ResteasyClient;\n    import org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\n    import org.jboss.resteasy.client.jaxrs.ResteasyWebTarget;\n    import org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine;\n    import org.apache.http.impl.conn.BasicHttpClientConnectionManager;\n    import org.apache.http.conn.socket.ConnectionSocketFactory;\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n    import org.apache.http.impl.client.CloseableHttpClient;\n    import org.apache.http.impl.client.HttpClientBuilder;\n    import org.apache.http.ssl.SSLContexts;\n\n    @Stateless\n    @Path(\"/postservice\")\n    public class PostService {\n\n        private static final Logger LOG = LogManager.getLogger(\"PostService\");\n\n        public PostService() {\n        }\n\n        @GET\n        @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n        public PostRespDTO get() throws NoSuchAlgorithmException, KeyManagementException, MalformedURLException, IOException, GeneralSecurityException {\n\n            //...object passed to the POST method...\n            PostDTO requestObject = new PostDTO();\n            requestObject.setEntryAList(new ArrayList&lt;&gt;(Arrays.asList(\"ITEM0000A\", \"ITEM0000B\", \"ITEM0000C\")));\n            requestObject.setEntryBList(new ArrayList&lt;&gt;(Arrays.asList(\"AAA\", \"BBB\", \"CCC\")));\n\n            //...build special \"trust all\" client to call POST method...\n            ApacheHttpClient4Engine engine = new ApacheHttpClient4Engine(createTrustAllClient());\n\n            ResteasyClient client = new ResteasyClientBuilder().httpEngine(engine).build();\n            ResteasyWebTarget target = client.target(\"https://localhost:7002/postRespWS\").path(\"postrespservice\");\n            Response response = target.request().accept(MediaType.APPLICATION_JSON).post(Entity.entity(requestObject, MediaType.APPLICATION_JSON));\n\n            //...object returned from the POST method...\n            PostRespDTO responseObject = response.readEntity(PostRespDTO.class);\n\n            response.close();\n\n            return responseObject;\n        }\n\n\n        //...get special \"trust all\" client...\n        private static CloseableHttpClient createTrustAllClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\n\n            SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, TRUSTALLCERTS).useProtocol(\"TLS\").build();\n            HttpClientBuilder builder = HttpClientBuilder.create();\n            NoopHostnameVerifier noop = new NoopHostnameVerifier();\n            SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContext, noop);\n            builder.setSSLSocketFactory(sslConnectionSocketFactory);\n            Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create().register(\"https\", sslConnectionSocketFactory).build();\n            HttpClientConnectionManager ccm = new BasicHttpClientConnectionManager(registry);\n            builder.setConnectionManager(ccm);\n\n            return builder.build();\n        }\n\n\n        private static final TrustStrategy TRUSTALLCERTS = new TrustStrategy() {\n            @Override\n            public boolean isTrusted(X509Certificate[] chain, String authType)\n                throws CertificateException {\n                return true;\n            }\n        };\n    }\n</code></pre>\n\n<p><strong><em>related Maven dependencies</em></strong></p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\n        &lt;version&gt;7.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3967293,"reputation":1851,"user_id":3272856,"display_name":"Z4-"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1538563376,"creation_date":1469116821,"answer_id":38509015,"question_id":2703161,"body_markdown":"Just had to do this with the newer **HttpClient 4.5** and it seems like they&#39;ve deprecated a few things since 4.4 so here&#39;s the snippet that works for me and uses the most recent API:\r\n\r\n    final SSLContext sslContext = new SSLContextBuilder()\r\n            .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true)\r\n            .build();\r\n\r\n    return HttpClientBuilder.create()\r\n            .setSSLContext(sslContext)\r\n            .setConnectionManager(\r\n                    new PoolingHttpClientConnectionManager(\r\n                            RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n                                    .register(&quot;http&quot;, PlainConnectionSocketFactory.INSTANCE)\r\n                                    .register(&quot;https&quot;, new SSLConnectionSocketFactory(sslContext,\r\n                                            NoopHostnameVerifier.INSTANCE))\r\n                                    .build()\r\n                    ))\r\n            .build();\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Just had to do this with the newer <strong>HttpClient 4.5</strong> and it seems like they've deprecated a few things since 4.4 so here's the snippet that works for me and uses the most recent API:</p>\n\n<pre><code>final SSLContext sslContext = new SSLContextBuilder()\n        .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true)\n        .build();\n\nreturn HttpClientBuilder.create()\n        .setSSLContext(sslContext)\n        .setConnectionManager(\n                new PoolingHttpClientConnectionManager(\n                        RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                                .register(\"http\", PlainConnectionSocketFactory.INSTANCE)\n                                .register(\"https\", new SSLConnectionSocketFactory(sslContext,\n                                        NoopHostnameVerifier.INSTANCE))\n                                .build()\n                ))\n        .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":282657,"reputation":21077,"user_id":579689,"accept_rate":54,"display_name":"Talespin_Kit"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1474216984,"creation_date":1474216984,"answer_id":39560151,"question_id":2703161,"body_markdown":"With fluent 4.5.2 i had to make the following modification to make it work.\r\n\r\n    try {\r\n        TrustManager[] trustAllCerts = new TrustManager[] {\r\n\t       new X509TrustManager() {\r\n\t    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n\t\t    return null;\r\n\t    }\r\n\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {  }\r\n\r\n\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {  }\r\n\t\t}\r\n\t    };\r\n\r\n\t    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t    sc.init(null, trustAllCerts, new SecureRandom());\r\n\t    CloseableHttpClient httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).setSslcontext(sc).build();\r\n\r\n\t    String output = Executor.newInstance(httpClient).execute(Request.Get(&quot;https://127.0.0.1:3000/something&quot;)\r\n\t\t\t\t\t\t\t\t\t\t  .connectTimeout(1000)\r\n\t\t\t\t\t\t\t\t\t\t  .socketTimeout(1000)).returnContent().asString();\r\n        } catch (Exception e) {\r\n        }\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>With fluent 4.5.2 i had to make the following modification to make it work.</p>\n\n<pre><code>try {\n    TrustManager[] trustAllCerts = new TrustManager[] {\n       new X509TrustManager() {\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n        return null;\n    }\n    public void checkClientTrusted(X509Certificate[] certs, String authType) {  }\n\n    public void checkServerTrusted(X509Certificate[] certs, String authType) {  }\n    }\n    };\n\n    SSLContext sc = SSLContext.getInstance(\"SSL\");\n    sc.init(null, trustAllCerts, new SecureRandom());\n    CloseableHttpClient httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).setSslcontext(sc).build();\n\n    String output = Executor.newInstance(httpClient).execute(Request.Get(\"https://127.0.0.1:3000/something\")\n                                      .connectTimeout(1000)\n                                      .socketTimeout(1000)).returnContent().asString();\n    } catch (Exception e) {\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1386628,"reputation":8709,"user_id":1318528,"accept_rate":74,"display_name":"Jacky"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1513221842,"creation_date":1513221842,"answer_id":47805407,"question_id":2703161,"body_markdown":"Tested on 4.5.4:\r\n\r\n                SSLContext sslContext = new SSLContextBuilder()\r\n                        .loadTrustMaterial(null, (TrustStrategy) (arg0, arg1) -&gt; true).build();\r\n    \r\n                CloseableHttpClient httpClient = HttpClients\r\n                        .custom()\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .setSSLContext(sslContext)\r\n                        .build();\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested on 4.5.4:</p>\n\n<pre><code>            SSLContext sslContext = new SSLContextBuilder()\n                    .loadTrustMaterial(null, (TrustStrategy) (arg0, arg1) -&gt; true).build();\n\n            CloseableHttpClient httpClient = HttpClients\n                    .custom()\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .setSSLContext(sslContext)\n                    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13299258,"reputation":51,"user_id":9601220,"display_name":"Lachesis"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522920087,"creation_date":1522920087,"answer_id":49668661,"question_id":2703161,"body_markdown":"Tested with HttpClient 4.5.5 with Fluent API\r\n\r\n    final SSLContext sslContext = new SSLContextBuilder()\r\n        .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true).build();\r\n\r\n    CloseableHttpClient httpClient = HttpClients.custom()\r\n        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n    \t.setSSLContext(sslContext).build();\r\n\r\n    String result = Executor.newInstance(httpClient)\r\n        .execute(Request.Get(&quot;https://localhost:8080/someapi&quot;)\r\n        .connectTimeout(1000).socketTimeout(1000))\r\n    \t.returnContent().asString();\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested with HttpClient 4.5.5 with Fluent API</p>\n\n<pre><code>final SSLContext sslContext = new SSLContextBuilder()\n    .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true).build();\n\nCloseableHttpClient httpClient = HttpClients.custom()\n    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n    .setSSLContext(sslContext).build();\n\nString result = Executor.newInstance(httpClient)\n    .execute(Request.Get(\"https://localhost:8080/someapi\")\n    .connectTimeout(1000).socketTimeout(1000))\n    .returnContent().asString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2055585,"reputation":437,"user_id":5285016,"display_name":"Brijesh Patel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1525457395,"creation_date":1525457395,"answer_id":50180854,"question_id":2703161,"body_markdown":"If you are using **Apache httpClient 4.5.x** then try this:\r\n\r\n    public static void main(String... args)  {\r\n\r\n        try (CloseableHttpClient httpclient = createAcceptSelfSignedCertificateClient()) {\r\n            HttpGet httpget = new HttpGet(&quot;https://example.com&quot;);\r\n            System.out.println(&quot;Executing request &quot; + httpget.getRequestLine());\r\n            \r\n            httpclient.execute(httpget);\r\n            System.out.println(&quot;----------------------------------------&quot;);\r\n        } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private static CloseableHttpClient createAcceptSelfSignedCertificateClient()\r\n            throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\r\n\r\n        // use the TrustSelfSignedStrategy to allow Self Signed Certificates\r\n        SSLContext sslContext = SSLContextBuilder\r\n                .create()\r\n                .loadTrustMaterial(new TrustSelfSignedStrategy())\r\n                .build();\r\n\r\n        // we can optionally disable hostname verification. \r\n        // if you don&#39;t want to further weaken the security, you don&#39;t have to include this.\r\n        HostnameVerifier allowAllHosts = new NoopHostnameVerifier();\r\n        \r\n        // create an SSL Socket Factory to use the SSLContext with the trust self signed certificate strategy\r\n        // and allow all hosts verifier.\r\n        SSLConnectionSocketFactory connectionFactory = new SSLConnectionSocketFactory(sslContext, allowAllHosts);\r\n        \r\n        // finally create the HttpClient using HttpClient factory methods and assign the ssl socket factory\r\n        return HttpClients\r\n                .custom()\r\n                .setSSLSocketFactory(connectionFactory)\r\n                .build();\r\n    }","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you are using <strong>Apache httpClient 4.5.x</strong> then try this:</p>\n\n<pre><code>public static void main(String... args)  {\n\n    try (CloseableHttpClient httpclient = createAcceptSelfSignedCertificateClient()) {\n        HttpGet httpget = new HttpGet(\"https://example.com\");\n        System.out.println(\"Executing request \" + httpget.getRequestLine());\n\n        httpclient.execute(httpget);\n        System.out.println(\"----------------------------------------\");\n    } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate static CloseableHttpClient createAcceptSelfSignedCertificateClient()\n        throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\n\n    // use the TrustSelfSignedStrategy to allow Self Signed Certificates\n    SSLContext sslContext = SSLContextBuilder\n            .create()\n            .loadTrustMaterial(new TrustSelfSignedStrategy())\n            .build();\n\n    // we can optionally disable hostname verification. \n    // if you don't want to further weaken the security, you don't have to include this.\n    HostnameVerifier allowAllHosts = new NoopHostnameVerifier();\n\n    // create an SSL Socket Factory to use the SSLContext with the trust self signed certificate strategy\n    // and allow all hosts verifier.\n    SSLConnectionSocketFactory connectionFactory = new SSLConnectionSocketFactory(sslContext, allowAllHosts);\n\n    // finally create the HttpClient using HttpClient factory methods and assign the ssl socket factory\n    return HttpClients\n            .custom()\n            .setSSLSocketFactory(connectionFactory)\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3371794,"reputation":143468,"user_id":2830850,"display_name":"Tarun Lalwani"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1525791508,"creation_date":1525791508,"answer_id":50236635,"question_id":2703161,"body_markdown":"Below code works with `4.5.5`\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.client.methods.HttpUriRequest;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n    \r\n    class HttpsSSLClient {\r\n    \r\n    \r\n        public static CloseableHttpClient createSSLInsecureClient() {\r\n            SSLContext sslcontext = createSSLContext();\r\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslcontext, new HostnameVerifier() {\r\n    \r\n                @Override\r\n                public boolean verify(String paramString, SSLSession paramSSLSession) {\r\n                    return true;\r\n                }\r\n            });\r\n            CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\r\n            return httpclient;\r\n        }\r\n    \r\n    \r\n        private static SSLContext createSSLContext() {\r\n            SSLContext sslcontext = null;\r\n            try {\r\n                sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n                sslcontext.init(null, new TrustManager[] {new TrustAnyTrustManager()}, new SecureRandom());\r\n            } catch (NoSuchAlgorithmException e) {\r\n                e.printStackTrace();\r\n            } catch (KeyManagementException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return sslcontext;\r\n        }\r\n    \r\n    \r\n        private static class TrustAnyTrustManager implements X509TrustManager {\r\n    \r\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\r\n    \r\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\r\n    \r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return new X509Certificate[] {};\r\n            }\r\n        }\r\n    \r\n    }\r\n    public class TestMe {\r\n    \r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            CloseableHttpClient client = HttpsSSLClient.createSSLInsecureClient();\r\n    \r\n            CloseableHttpResponse res = client.execute(new HttpGet(&quot;https://wrong.host.badssl.com/&quot;));\r\n            System.out.println(EntityUtils.toString(res.getEntity()));\r\n        }\r\n    }\r\n\r\nOutput from code is\r\n\r\n[![Code][1]][1]\r\n\r\nOutput on browser is\r\n\r\n[![Bad SSL][2]][2]\r\n\r\nThe pom used is below\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.tarun&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testing&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;6&lt;/source&gt;\r\n                        &lt;target&gt;6&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;4.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BnC7J.png\r\n  [2]: https://i.stack.imgur.com/IZjDv.png","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Below code works with <code>4.5.5</code></p>\n\n<pre><code>import java.io.IOException;\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpUriRequest;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\nclass HttpsSSLClient {\n\n\n    public static CloseableHttpClient createSSLInsecureClient() {\n        SSLContext sslcontext = createSSLContext();\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslcontext, new HostnameVerifier() {\n\n            @Override\n            public boolean verify(String paramString, SSLSession paramSSLSession) {\n                return true;\n            }\n        });\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\n        return httpclient;\n    }\n\n\n    private static SSLContext createSSLContext() {\n        SSLContext sslcontext = null;\n        try {\n            sslcontext = SSLContext.getInstance(\"TLS\");\n            sslcontext.init(null, new TrustManager[] {new TrustAnyTrustManager()}, new SecureRandom());\n        } catch (NoSuchAlgorithmException e) {\n            e.printStackTrace();\n        } catch (KeyManagementException e) {\n            e.printStackTrace();\n        }\n        return sslcontext;\n    }\n\n\n    private static class TrustAnyTrustManager implements X509TrustManager {\n\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\n\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\n\n        public X509Certificate[] getAcceptedIssuers() {\n            return new X509Certificate[] {};\n        }\n    }\n\n}\npublic class TestMe {\n\n\n    public static void main(String[] args) throws IOException {\n        CloseableHttpClient client = HttpsSSLClient.createSSLInsecureClient();\n\n        CloseableHttpResponse res = client.execute(new HttpGet(\"https://wrong.host.badssl.com/\"));\n        System.out.println(EntityUtils.toString(res.getEntity()));\n    }\n}\n</code></pre>\n\n<p>Output from code is</p>\n\n<p><a href=\"https://i.stack.imgur.com/BnC7J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BnC7J.png\" alt=\"Code\"></a></p>\n\n<p>Output on browser is</p>\n\n<p><a href=\"https://i.stack.imgur.com/IZjDv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IZjDv.png\" alt=\"Bad SSL\"></a></p>\n\n<p>The pom used is below</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.tarun&lt;/groupId&gt;\n    &lt;artifactId&gt;testing&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;6&lt;/source&gt;\n                    &lt;target&gt;6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1525960628,"creation_date":1525960211,"answer_id":50274496,"question_id":2703161,"body_markdown":"**Apache HttpClient 4.5.5**\r\n\r\n    HttpClient httpClient = HttpClients\r\n                .custom()\r\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                .build();\r\n\r\nNo deprecated API has been used.\r\n\r\nSimple verifiable test case:\r\n\r\n \r\n\r\n    package org.apache.http.client.test;\r\n    \r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.client.methods.HttpUriRequest;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    \r\n    import java.io.IOException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    \r\n    public class ApacheHttpClientTest {\r\n    \r\n        private HttpClient httpClient;\r\n    \r\n        @Before\r\n        public void initClient() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\r\n            httpClient = HttpClients\r\n                    .custom()\r\n                    .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                    .build();\r\n        }\r\n    \r\n        @Test\r\n        public void apacheHttpClient455Test() throws IOException {\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://expired.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://wrong.host.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://self-signed.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://untrusted-root.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://revoked.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://pinning-test.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://sha1-intermediate.badssl.com&quot;);\r\n        }\r\n    \r\n        private void executeRequestAndVerifyStatusIsOk(String url) throws IOException {\r\n            HttpUriRequest request = new HttpGet(url);\r\n    \r\n            HttpResponse response = httpClient.execute(request);\r\n            int statusCode = response.getStatusLine().getStatusCode();\r\n    \r\n            assert statusCode == 200;\r\n        }\r\n    }\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p><strong>Apache HttpClient 4.5.5</strong></p>\n\n<pre><code>HttpClient httpClient = HttpClients\n            .custom()\n            .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n            .build();\n</code></pre>\n\n<p>No deprecated API has been used.</p>\n\n<p>Simple verifiable test case:</p>\n\n<pre><code>package org.apache.http.client.test;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpUriRequest;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.junit.Before;\nimport org.junit.Test;\n\nimport java.io.IOException;\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\n\npublic class ApacheHttpClientTest {\n\n    private HttpClient httpClient;\n\n    @Before\n    public void initClient() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\n        httpClient = HttpClients\n                .custom()\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                .build();\n    }\n\n    @Test\n    public void apacheHttpClient455Test() throws IOException {\n        executeRequestAndVerifyStatusIsOk(\"https://expired.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://wrong.host.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://self-signed.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://untrusted-root.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://revoked.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://pinning-test.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://sha1-intermediate.badssl.com\");\n    }\n\n    private void executeRequestAndVerifyStatusIsOk(String url) throws IOException {\n        HttpUriRequest request = new HttpGet(url);\n\n        HttpResponse response = httpClient.execute(request);\n        int statusCode = response.getStatusLine().getStatusCode();\n\n        assert statusCode == 200;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13659441,"reputation":164,"user_id":10305731,"display_name":"WISERDIVISOR"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680088958,"creation_date":1680088958,"answer_id":75876538,"question_id":2703161,"body_markdown":"## For `java.net.http.HttpClient`\r\n---\r\n### Imports\r\n```java\r\nimport java.net.http.HttpClient;\r\nimport org.apache.http.ssl.SSLContexts;\r\nimport javax.net.ssl.SSLContext;\r\n\r\nimport java.security.KeyManagementException;\r\nimport java.security.KeyStoreException;\r\nimport java.security.NoSuchAlgorithmException;\r\n```\r\n---\r\n### Usage\r\n```java\r\n\ttry {\r\n\t\tsslContext = SSLContexts.custom()\r\n\t\t        .loadTrustMaterial(null, (chain, authType) -&gt; true)\r\n\t\t        .build();\r\n\t} catch (KeyManagementException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t} catch (NoSuchAlgorithmException e) {\r\n\t    // TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t} catch (KeyStoreException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\t\r\n    HttpClient httpClient = HttpClient.newBuilder().sslContext(sslContext).build();\r\n```\r\n**Tested on Elasticsearch 8.1.3 as a Maven plugin**","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<h2>For <code>java.net.http.HttpClient</code></h2>\n<hr />\n<h3>Imports</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.net.http.HttpClient;\nimport org.apache.http.ssl.SSLContexts;\nimport javax.net.ssl.SSLContext;\n\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\n</code></pre>\n<hr />\n<h3>Usage</h3>\n<pre class=\"lang-java prettyprint-override\"><code>    try {\n        sslContext = SSLContexts.custom()\n                .loadTrustMaterial(null, (chain, authType) -&gt; true)\n                .build();\n    } catch (KeyManagementException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchAlgorithmException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (KeyStoreException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n        \n    HttpClient httpClient = HttpClient.newBuilder().sslContext(sslContext).build();\n</code></pre>\n<p><strong>Tested on Elasticsearch 8.1.3 as a Maven plugin</strong></p>\n"},{"tags":[],"owner":{"account_id":1312571,"reputation":321,"user_id":3724142,"accept_rate":44,"display_name":"Tim Schumacher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683756086,"creation_date":1683756086,"answer_id":76222849,"question_id":2703161,"body_markdown":"Careful with the use of SSLConnectionSocketFactory. This was noted with Apache HttpClient v4.5.x  \r\n\r\n    Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;somedomain.org&gt; doesn&#39;t match any of the subject alternative names: [cert-used-in-2-way-tls.org, www.cert-used-in-2-way-tls.org]\r\n\r\nThe following code still yielded above exception:\r\n\r\n            KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n\r\n            inputStream = new FileInputStream(certificatePath);\r\n\r\n            keyStore.load(inputStream, certificatePassword.toCharArray());\r\n\r\n            SSLContext sslContext = SSLContexts.custom()\r\n                    .loadKeyMaterial(keyStore, certificatePassword.toCharArray())\r\n                    .build();\r\n\r\n            SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext); //don&#39;t do this\r\n\r\n            client = HttpClients.custom()\r\n                        .setSSLSocketFactory(socketFactory) //don&#39;t do this\r\n                        //.setSSLContext(sslContext) //do this instead\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .build();\r\n\r\nThe following worked for me instead:\r\n\r\n                 //same code as above, but not using the SSLConnectionSocketFactory \r\n                 client = HttpClients.custom()\r\n                        .setSSLContext(sslContext) //do this instead\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .build(); ","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Careful with the use of SSLConnectionSocketFactory. This was noted with Apache HttpClient v4.5.x</p>\n<pre><code>Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;somedomain.org&gt; doesn't match any of the subject alternative names: [cert-used-in-2-way-tls.org, www.cert-used-in-2-way-tls.org]\n</code></pre>\n<p>The following code still yielded above exception:</p>\n<pre><code>        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n\n        inputStream = new FileInputStream(certificatePath);\n\n        keyStore.load(inputStream, certificatePassword.toCharArray());\n\n        SSLContext sslContext = SSLContexts.custom()\n                .loadKeyMaterial(keyStore, certificatePassword.toCharArray())\n                .build();\n\n        SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext); //don't do this\n\n        client = HttpClients.custom()\n                    .setSSLSocketFactory(socketFactory) //don't do this\n                    //.setSSLContext(sslContext) //do this instead\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .build();\n</code></pre>\n<p>The following worked for me instead:</p>\n<pre><code>             //same code as above, but not using the SSLConnectionSocketFactory \n             client = HttpClients.custom()\n                    .setSSLContext(sslContext) //do this instead\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .build(); \n</code></pre>\n"}],"owner":{"account_id":43750,"reputation":18014,"user_id":128028,"accept_rate":86,"display_name":"Viet"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348999,"favorite_count":0,"down_vote_count":1,"up_vote_count":167,"accepted_answer_id":2703233,"answer_count":25,"score":166,"last_activity_date":1683756086,"creation_date":1272081557,"question_id":2703161,"body_markdown":"How do I bypass invalid SSL certificate errors with Apache [HttpClient][1] 4.0?\r\n\r\n  [1]: http://hc.apache.org/httpclient-3.x/\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>How do I bypass invalid SSL certificate errors with Apache <a href=\"http://hc.apache.org/httpclient-3.x/\" rel=\"noreferrer\">HttpClient</a> 4.0?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"score":0,"creation_date":1336439624,"post_id":10491234,"comment_id":13559826,"body_markdown":"oh and yeah i have aPf created....","body":"oh and yeah i have aPf created...."}],"answers":[{"tags":[],"owner":{"account_id":1252478,"reputation":1866,"user_id":1212605,"display_name":"raddykrish"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1336440499,"creation_date":1336440499,"answer_id":10491342,"question_id":10491234,"body_markdown":"I think the delimiter `/` is not escaped properly. Try to use like `\\/` to escape that. Please refer this https://stackoverflow.com/questions/6076229/escaping-a-forward-slash-in-a-regular-expression for more clarity.","title":"Scanner next() as parameter","body":"<p>I think the delimiter <code>/</code> is not escaped properly. Try to use like <code>\\/</code> to escape that. Please refer this <a href=\"https://stackoverflow.com/questions/6076229/escaping-a-forward-slash-in-a-regular-expression\">Escaping a forward slash in a regular expression</a> for more clarity.</p>\n"},{"tags":[],"owner":{"account_id":1458021,"reputation":4881,"user_id":1373124,"accept_rate":88,"display_name":"pippin1289"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336440836,"creation_date":1336440836,"answer_id":10491381,"question_id":10491234,"body_markdown":"I think there are two ways you might go about this. The first is using reset() to reset the delimiter. So what I mean to say is go with the default delimiter of &#39; &#39; for nextInt, then call useDelimiter(&#39;\\/&#39;) for the next call. Then call scanner.reset().\r\n\r\nAnother way to go about this might be to grab a string based upon the / delimiter. Then split that string further based on the space as the next delimiter. Maybe use StringTokenizer to accomplish this.","title":"Scanner next() as parameter","body":"<p>I think there are two ways you might go about this. The first is using reset() to reset the delimiter. So what I mean to say is go with the default delimiter of ' ' for nextInt, then call useDelimiter('/') for the next call. Then call scanner.reset().</p>\n\n<p>Another way to go about this might be to grab a string based upon the / delimiter. Then split that string further based on the space as the next delimiter. Maybe use StringTokenizer to accomplish this.</p>\n"}],"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683756077,"creation_date":1336439567,"question_id":10491234,"body_markdown":"i have file which is in this format.\r\n50 xxx/ 70 aaa/ 90 ccc/\r\n\r\nthe program saves the file to default directory, the same one i think its trying to read from. but it just doesnt scan anything... what is wrong please? im not good at programing sorry\r\n\r\ni would like it to read the 50 to &quot;prior&quot; xxx to &quot;text&quot; and then use those two things in aPf.insert(prior, text).\r\n\r\n    File file = new File(&quot;poznamky.txt&quot;);\r\n            Scanner scanner = null;\r\n            int prior;\r\n            String text;\r\n            \r\n            try {\r\n                scanner = new Scanner(file);\r\n                scanner.useDelimiter(&quot;/&quot;);\r\n                \r\n             while (scanner.hasNext()) {\r\n    \r\n              prior = scanner.nextInt();\r\n              text = scanner.next();\r\n              aPf.insert(prior, text);\r\n    \r\n    }\r\n    \r\n    } catch (FileNotFoundException e) {\r\n    \r\n    e.printStackTrace();\r\n    \r\n    }","title":"Scanner next() as parameter","body":"<p>i have file which is in this format.\n50 xxx/ 70 aaa/ 90 ccc/</p>\n\n<p>the program saves the file to default directory, the same one i think its trying to read from. but it just doesnt scan anything... what is wrong please? im not good at programing sorry</p>\n\n<p>i would like it to read the 50 to \"prior\" xxx to \"text\" and then use those two things in aPf.insert(prior, text).</p>\n\n<pre><code>File file = new File(\"poznamky.txt\");\n        Scanner scanner = null;\n        int prior;\n        String text;\n\n        try {\n            scanner = new Scanner(file);\n            scanner.useDelimiter(\"/\");\n\n         while (scanner.hasNext()) {\n\n          prior = scanner.nextInt();\n          text = scanner.next();\n          aPf.insert(prior, text);\n\n}\n\n} catch (FileNotFoundException e) {\n\ne.printStackTrace();\n\n}\n</code></pre>\n"},{"tags":["java","android","in-app-update"],"answers":[{"tags":[],"owner":{"account_id":12359904,"reputation":202,"user_id":9014504,"display_name":"Asif A. Sohan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616437448,"creation_date":1616437448,"answer_id":66751800,"question_id":66549229,"body_markdown":"As mentioned in the [Documentation][1], there are different flow to trigger Google App Update API from different components in app. We need to trigger correct flow according to our requirements.\r\n\r\n\r\n    startUpdateFlow(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options)\r\n    Starts the desired update flow asynchronously.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, IntentSenderForResultStarter starter, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, Activity activity, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, IntentSenderForResultStarter starter, AppUpdateOptions options, int requestCod\r\n\r\n  [1]: https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager\r\n","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>As mentioned in the <a href=\"https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager\" rel=\"nofollow noreferrer\">Documentation</a>, there are different flow to trigger Google App Update API from different components in app. We need to trigger correct flow according to our requirements.</p>\n<pre><code>startUpdateFlow(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options)\nStarts the desired update flow asynchronously.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, IntentSenderForResultStarter starter, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, Activity activity, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, IntentSenderForResultStarter starter, AppUpdateOptions options, int requestCod\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9260104,"reputation":3582,"user_id":6877502,"display_name":"Aliaksei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683754971,"creation_date":1683754971,"answer_id":76222737,"question_id":66549229,"body_markdown":"According to [documentation][1] of `startUpdateFlowForResult()`\r\n\r\n&gt; Each `AppUpdateInfo` instance can be used **only in a single** call to this method. If you need to call it multiple times - for instance, when retrying to start a flow in case of failure - you need to get a fresh `AppUpdateInfo` from `getAppUpdateInfo()`.\r\n\r\nSo, we should renew our `appUpdateInfoTask` for every calling of `startUpdateFlowForResult()`\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager#startUpdateFlowForResult(com.google.android.play.core.appupdate.AppUpdateInfo,%20android.app.Activity,%20com.google.android.play.core.appupdate.AppUpdateOptions,%20int)","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>According to <a href=\"https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager#startUpdateFlowForResult(com.google.android.play.core.appupdate.AppUpdateInfo,%20android.app.Activity,%20com.google.android.play.core.appupdate.AppUpdateOptions,%20int)\" rel=\"nofollow noreferrer\">documentation</a> of <code>startUpdateFlowForResult()</code></p>\n<blockquote>\n<p>Each <code>AppUpdateInfo</code> instance can be used <strong>only in a single</strong> call to this method. If you need to call it multiple times - for instance, when retrying to start a flow in case of failure - you need to get a fresh <code>AppUpdateInfo</code> from <code>getAppUpdateInfo()</code>.</p>\n</blockquote>\n<p>So, we should renew our <code>appUpdateInfoTask</code> for every calling of <code>startUpdateFlowForResult()</code></p>\n"}],"owner":{"account_id":12359904,"reputation":202,"user_id":9014504,"display_name":"Asif A. Sohan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1587,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1683754971,"creation_date":1615301608,"question_id":66549229,"body_markdown":"In-app update is available multiple times in my app. User can cancel the update first time while opening the app and choose to trigger in-app Update from another fragment manually.\r\n\r\nAs per Google documentation, I have created new instances each time to trigger the update but it is only working for the first. Next time, it&#39;s causing **AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException** \r\n\r\n\r\n    private void init() {\r\n            appUpdateManager = AppUpdateManagerFactory.create(mContext);\r\n            appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\r\n    \r\n        }\r\n\r\n     public void checkAppUpdate() {\r\n                appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\r\n                    .....................................\r\n                    .....................................\r\n                    startAppUpdate(appUpdateInfo);\r\n       \r\n            }\r\n\r\n    private void startAppUpdate(AppUpdateInfo appUpdateInfo) {\r\n            Log.d(TAG, &quot;startAppUpdate: starting app update&quot;);\r\n            appUpdateManager.startUpdateFlowForResult(\r\n                    appUpdateInfo,\r\n                    appUpdateType,\r\n                    mActivityReference,\r\n                    mRequestCode);\r\n        }","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>In-app update is available multiple times in my app. User can cancel the update first time while opening the app and choose to trigger in-app Update from another fragment manually.</p>\n<p>As per Google documentation, I have created new instances each time to trigger the update but it is only working for the first. Next time, it's causing <strong>AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException</strong></p>\n<pre><code>private void init() {\n        appUpdateManager = AppUpdateManagerFactory.create(mContext);\n        appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\n\n    }\n\n public void checkAppUpdate() {\n            appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\n                .....................................\n                .....................................\n                startAppUpdate(appUpdateInfo);\n   \n        }\n\nprivate void startAppUpdate(AppUpdateInfo appUpdateInfo) {\n        Log.d(TAG, &quot;startAppUpdate: starting app update&quot;);\n        appUpdateManager.startUpdateFlowForResult(\n                appUpdateInfo,\n                appUpdateType,\n                mActivityReference,\n                mRequestCode);\n    }\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","jpa","nativequery"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1667642906,"creation_date":1667642596,"answer_id":74326793,"question_id":74326715,"body_markdown":"You can use this trick:\r\n\r\n    @Query(&quot;&quot;&quot;\r\n            SELECT * from user u WHERE \r\n            u.last_modified &gt;= (NOW() - (INTERVAL &#39;1&#39; minutes) * :timeInMinutes)\r\n            &quot;&quot;&quot;, nativeQuery = true)\r\n    SomeType getRecord(Long timeInMinutes);\r\n\r\nThe idea here is to multiply `timeInMinutes` by `1`, which will give you always `timeInMinutes`.\r\n\r\nNote: the type of timeInMinutes should be a number, and also you have to use `nativeQuery = true` because your query is not a JPA syntax.\r\n\r\n","title":"Get records which are last updated in n minutes in jpa","body":"<p>You can use this trick:</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        SELECT * from user u WHERE \n        u.last_modified &gt;= (NOW() - (INTERVAL '1' minutes) * :timeInMinutes)\n        &quot;&quot;&quot;, nativeQuery = true)\nSomeType getRecord(Long timeInMinutes);\n</code></pre>\n<p>The idea here is to multiply <code>timeInMinutes</code> by <code>1</code>, which will give you always <code>timeInMinutes</code>.</p>\n<p>Note: the type of timeInMinutes should be a number, and also you have to use <code>nativeQuery = true</code> because your query is not a JPA syntax.</p>\n"},{"tags":[],"owner":{"account_id":5894271,"reputation":831,"user_id":4639860,"display_name":"Kehinde Adedamola Shittu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683754233,"creation_date":1683754233,"answer_id":76222671,"question_id":74326715,"body_markdown":"The accepted answer failed with syntax error on my end but I was able to rewrite it and this worked, query would return all user records modified X minutes ago.\r\n\r\n        @Query(value = &quot;&quot;&quot;\r\n        SELECT * from user u WHERE \r\n        u.last_modified &lt;= DATE_SUB(NOW(), INTERVAL :timeInMinutes minute)\r\n        &quot;&quot;&quot;, nativeQuery = true)\r\n        SomeType getRecord(Long timeInMinutes);","title":"Get records which are last updated in n minutes in jpa","body":"<p>The accepted answer failed with syntax error on my end but I was able to rewrite it and this worked, query would return all user records modified X minutes ago.</p>\n<pre><code>    @Query(value = &quot;&quot;&quot;\n    SELECT * from user u WHERE \n    u.last_modified &lt;= DATE_SUB(NOW(), INTERVAL :timeInMinutes minute)\n    &quot;&quot;&quot;, nativeQuery = true)\n    SomeType getRecord(Long timeInMinutes);\n</code></pre>\n"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1272,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74326793,"answer_count":2,"score":1,"last_activity_date":1683754233,"creation_date":1667641854,"question_id":74326715,"body_markdown":"I am working on a jpa query which requires to fetch all the records whose last updated time is more than 15 minutes\r\nMy query goes like\r\n\r\n    Select * from user u where u.last_modified &gt;= NOW() - INTERVAL &#39;5 minutes&#39; \r\n\r\nI will be passing the minutes dynamically ie in my jpa\r\n\r\n    @Query(&quot;Select * from user u where u.last_modified &gt;= NOW() - INTERVAL &#39;:timeInMinutes minutes&#39;&quot;)\r\n    getRecord(String timeInMinutes);\r\n\r\n\r\nThis does not work. I want to pass the minute dynamically. Can someone please help me with this","title":"Get records which are last updated in n minutes in jpa","body":"<p>I am working on a jpa query which requires to fetch all the records whose last updated time is more than 15 minutes\nMy query goes like</p>\n<pre><code>Select * from user u where u.last_modified &gt;= NOW() - INTERVAL '5 minutes' \n</code></pre>\n<p>I will be passing the minutes dynamically ie in my jpa</p>\n<pre><code>@Query(&quot;Select * from user u where u.last_modified &gt;= NOW() - INTERVAL ':timeInMinutes minutes'&quot;)\ngetRecord(String timeInMinutes);\n</code></pre>\n<p>This does not work. I want to pass the minute dynamically. Can someone please help me with this</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-security"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1674140012,"post_id":75102645,"comment_id":132654887,"body_markdown":"share also your `@Configuration` and `@SpringBootApplication` classes and also any custom security configurations","body":"share also your <code>@Configuration</code> and <code>@SpringBootApplication</code> classes and also any custom security configurations"},{"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"score":0,"creation_date":1674231435,"post_id":75102645,"comment_id":132677300,"body_markdown":"@PanagiotisBougioukos I&#39;ve added those classes to my post","body":"@PanagiotisBougioukos I&#39;ve added those classes to my post"},{"owner":{"account_id":10288,"reputation":1616,"user_id":19366,"display_name":"varad"},"score":1,"creation_date":1674235137,"post_id":75102645,"comment_id":132678517,"body_markdown":"I have an interface with a method annotated with `@PreAuthorize`. An implementation of this method also have `@PreAuthorize`. I.e. PreAuthorize is defined on two places for the same method. When using @EnableMethodSecurity, I was getting the same error. \n\nWhen I use deprecated &quot;`@EnableGlobalMethodSecurity(prePostEnabled = true)`&quot; instead, it works. I guess that&#39;s what they mean by &quot;activate stricter enforcement of Spring Security‚Äôs non-repeatable&quot; (https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#servlet-check-for-annotationconfigurationexceptions)","body":"I have an interface with a method annotated with <code>@PreAuthorize</code>. An implementation of this method also have <code>@PreAuthorize</code>. I.e. PreAuthorize is defined on two places for the same method. When using @EnableMethodSecurity, I was getting the same error.   When I use deprecated &quot;<code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>&quot; instead, it works. I guess that&#39;s what they mean by &quot;activate stricter enforcement of Spring Security‚Äôs non-repeatable&quot; (<a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#servlet-check-for-annotationconfigurationexceptions\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/serv&zwnj;&#8203;let/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674287676,"creation_date":1674287676,"answer_id":75191876,"question_id":75102645,"body_markdown":"After some more debugging and reading through the migration-guide @varad posted I decided to implement custom authorization-managers which do not scan the annotations as thoroughly as Spring Security does.\r\n\r\nI posted the implementations of the custom method-security and authorization-managers on GitHub: https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d\r\n\r\nThanks for you help guys.","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>After some more debugging and reading through the migration-guide @varad posted I decided to implement custom authorization-managers which do not scan the annotations as thoroughly as Spring Security does.</p>\n<p>I posted the implementations of the custom method-security and authorization-managers on GitHub: <a href=\"https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d\" rel=\"nofollow noreferrer\">https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d</a></p>\n<p>Thanks for you help guys.</p>\n"},{"tags":[],"owner":{"account_id":6254321,"reputation":51,"user_id":4863415,"display_name":"Manas Das"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683753606,"creation_date":1683753606,"answer_id":76222627,"question_id":75102645,"body_markdown":"I am doing similar stuff. Applying post filter on findAll method.\r\n\r\n    public interface AbcRepository extends JpaRepository&lt;InfraResource, Long&gt; {\r\n    \r\n        @PostFilter(&quot;hasPermission(filterObject, &#39;read&#39;)&quot;)\r\n        List&lt;InfraResource&gt; findAll();\r\n    }\r\n\r\nConfiguration annotated with @EnableMethodSecurity(prePostEnabled = true) I am getting following issue.\r\n\r\n**API Response**\r\n\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n\r\n**Server log**\r\n\r\n    ERROR 45859 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed: org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.] with root cause\r\n            \r\n            org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\r\n\r\nAfter doing some further debug into the code base, I found `AuthorizationAnnotationUtils` class. Method `findUniqueAnnotation` performs an exhaustive search on type hierarchy of a given method and if the it finds duplicate annotation throws `AnnotationConfigurationException` exception.\r\n\r\nUnder the hood for findAll there are 2 implementations.\r\n\r\n    1. Iterable&lt;T&gt; findAll() coming from CrudRepository\r\n    2. List&lt;T&gt; findAll() coming from SimpleJpaRepository \r\n\r\nFurther digging down, at runtime it is finding duplicate `PostFilter` annotation for `findAll` method.\r\n\r\nHere is the duplicate details in runtime\r\n\r\n    public abstract java.util.List AbcRepository.findAll()\r\n        \r\n    public default java.lang.Iterable AbcRepository.findAll()\r\n\r\nFor now I am using `@EnableGlobalMethodSecurity(prePostEnabled = true)` instead to overcome the issue even though it is marked as deprecated.\r\n\r\nI am still researching on. I Will post an update as soon as I find an alternative.","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>I am doing similar stuff. Applying post filter on findAll method.</p>\n<pre><code>public interface AbcRepository extends JpaRepository&lt;InfraResource, Long&gt; {\n\n    @PostFilter(&quot;hasPermission(filterObject, 'read')&quot;)\n    List&lt;InfraResource&gt; findAll();\n}\n</code></pre>\n<p>Configuration annotated with @EnableMethodSecurity(prePostEnabled = true) I am getting following issue.</p>\n<p><strong>API Response</strong></p>\n<pre><code>&quot;status&quot;: 500,\n&quot;error&quot;: &quot;Internal Server Error&quot;,\n</code></pre>\n<p><strong>Server log</strong></p>\n<pre><code>ERROR 45859 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed: org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.] with root cause\n        \n        org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\n</code></pre>\n<p>After doing some further debug into the code base, I found <code>AuthorizationAnnotationUtils</code> class. Method <code>findUniqueAnnotation</code> performs an exhaustive search on type hierarchy of a given method and if the it finds duplicate annotation throws <code>AnnotationConfigurationException</code> exception.</p>\n<p>Under the hood for findAll there are 2 implementations.</p>\n<pre><code>1. Iterable&lt;T&gt; findAll() coming from CrudRepository\n2. List&lt;T&gt; findAll() coming from SimpleJpaRepository \n</code></pre>\n<p>Further digging down, at runtime it is finding duplicate <code>PostFilter</code> annotation for <code>findAll</code> method.</p>\n<p>Here is the duplicate details in runtime</p>\n<pre><code>public abstract java.util.List AbcRepository.findAll()\n    \npublic default java.lang.Iterable AbcRepository.findAll()\n</code></pre>\n<p>For now I am using <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code> instead to overcome the issue even though it is marked as deprecated.</p>\n<p>I am still researching on. I Will post an update as soon as I find an alternative.</p>\n"}],"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1157,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75191876,"answer_count":2,"score":4,"last_activity_date":1683753606,"creation_date":1673560053,"question_id":75102645,"body_markdown":"I have recently upgraded my Spring Boot Application to Spring Boot 3 (from 2.6.4), Kotlin 1.8.0 (from 1.7.20) and JDK 17 (from 11). Right now I&#39;m facing AnnotationConfigurationExceptions caused by `@PreAuthorize` meta-annotations used on inherited repository-methods.\r\n\r\n```\r\norg.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PreAuthorize attributed to public final java.util.List jdk.proxy2.$Proxy390.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\r\n        at org.springframework.security.authorization.method.AuthorizationAnnotationUtils.findUniqueAnnotation(AuthorizationAnnotationUtils.java:64)\r\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.findPreAuthorizeAnnotation(PreAuthorizeExpressionAttributeRegistry.java:71)\r\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.resolveAttribute(PreAuthorizeExpressionAttributeRegistry.java:61)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.lambda$getAttribute$0(AbstractExpressionAttributeRegistry.java:57)\r\n        at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:57)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:46)\r\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:63)\r\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)\r\n        at org.springframework.security.authorization.ObservationAuthorizationManager.check(ObservationAuthorizationManager.java:55)\r\n        at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)\r\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)\r\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\r\n```\r\n\r\nAfter some debugging, I found that Spring Security somehow reflects the single annotation multiple times. As soon as I move the methods from the base-repository to the actual repository, the exception does no longer appear.\r\n\r\nI&#39;ve got a base-repository implementing some common methods like findAll, findById, etc. and marking them accessible using the REST-API and restricting the access using the `@HasRoleAdminOrHasReadCollectionPermission` meta-annotation (following later):\r\n``` kotlin\r\n@NoRepositoryBean\r\ninterface BaseRepository&lt;T : BaseEntity&gt; : CrudRepository&lt;T, Long&gt; {\r\n\r\n    /* [...] */\r\n\r\n    @RestResource\r\n    @HasRoleAdminOrHasReadCollectionPermission\r\n    override fun findAll(): List&lt;T&gt;\r\n\r\n    /* [...] */\r\n\r\n}\r\n```\r\n\r\nSecond, the base-repository is implemented by the actual entity-repository:\r\n``` kotlin\r\n@RepositoryRestResource(path = &quot;categories&quot;, collectionResourceRel = &quot;categories&quot;)\r\n@Transactional(readOnly = true)\r\ninterface CategoryRepository : BaseRepository&lt;Category&gt; {\r\n\r\n    /* [...] */\r\n\r\n}\r\n```\r\n\r\nThird, here&#39;s the `@HasRoleAdminOrHasReadCollectionPermission` meta-annotation:\r\n\r\n``` kotlin\r\n@Retention(AnnotationRetention.RUNTIME)\r\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)\r\n@PreAuthorize(&quot;hasRole(&#39;$ROLE_ADMIN&#39;) or hasPermission($COLLECTION_TARGET, $DELETE_PERMISSION)&quot;)\r\nannotation class HasRoleAdminOrHasDeleteCollectionPermission\r\n```\r\n\r\nI&#39;m all out of ideas, looked through the Java files generated from Kotlin, nowhere are duplicated annotations. Hoping someone here can help me with that.\r\n\r\nEdit: As requested, here&#39;s the Application-class and the class containing the security-config:\r\n\r\n``` kotlin\r\n@SpringBootApplication(exclude = [ErrorMvcAutoConfiguration::class])\r\n@ServletComponentScan\r\n@EnableAsync\r\n@EnableScheduling\r\nclass Application {\r\n    companion object {\r\n        val HOSTNAME = System.getenv(&quot;HOSTNAME&quot;)\r\n        val TIMESTAMP = System.currentTimeMillis()\r\n\r\n        /** Entry point, run with gradle `bootRun` task. */\r\n        @JvmStatic\r\n        fun main(args: Array&lt;String&gt;) {\r\n            SpringApplication.run(Application::class.java, *args)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n``` kotlin\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableMethodSecurity(prePostEnabled = true)\r\nclass SecurityConfig(\r\n    private val environment: Environment,\r\n    private val baseProperties: BaseProperties,\r\n    private val accountService: AccountService,\r\n    private val integrationService: IntegrationService,\r\n    private val jwtService: JwtService,\r\n    private val loginAttemptService: LoginAttemptService,\r\n    private val handlerExceptionResolver: HandlerExceptionResolver\r\n) {\r\n\r\n    @Bean\r\n    fun webSecurityCustomizer(): WebSecurityCustomizer =\r\n        WebSecurityCustomizer { web: WebSecurity -&gt; web.debug(true) }\r\n\r\n    @Bean\r\n    fun corsConfigurationSource(): CorsConfigurationSource {\r\n        val configuration = CorsConfiguration()\r\n        configuration.allowedOrigins = baseProperties.corsAllowedOrigins()\r\n        configuration.allowedMethods = listOf(CorsConfiguration.ALL)\r\n        configuration.allowedHeaders = listOf(CorsConfiguration.ALL)\r\n        configuration.allowCredentials = true\r\n        val source = UrlBasedCorsConfigurationSource()\r\n        source.registerCorsConfiguration(ANY_PATH, configuration)\r\n        return source\r\n    }\r\n\r\n    @Bean\r\n    fun userDetailsService(): UserDetailsService =\r\n        AccountUserDetailsService(accountService, integrationService)\r\n\r\n    @Bean\r\n    fun authenticationManager(\r\n        http: HttpSecurity,\r\n        userDetailsService: UserDetailsService\r\n    ): AuthenticationManager {\r\n        val authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder::class.java)\r\n\r\n        val loginAttemptDaoAuthenticationProvider = LoginAttemptDaoAuthenticationProvider(loginAttemptService, userDetailsService)\r\n        val jwtPreAuthenticationProvider = PreAuthenticatedAuthenticationProvider()\r\n\r\n        jwtPreAuthenticationProvider.setPreAuthenticatedUserDetailsService(UserDetailsByNameServiceWrapper(userDetailsService))\r\n\r\n        return authenticationManagerBuilder\r\n            .userDetailsService(userDetailsService).and()\r\n            .authenticationProvider(loginAttemptDaoAuthenticationProvider)\r\n            .authenticationProvider(jwtPreAuthenticationProvider)\r\n            .build()\r\n    }\r\n\r\n    @Bean\r\n    fun filterChain(\r\n        http: HttpSecurity,\r\n        authenticationManager: AuthenticationManager,\r\n        userDetailsService: UserDetailsService\r\n    ): SecurityFilterChain {\r\n        return http\r\n            .requireSSL()\r\n            .disableLocalHSTS()\r\n            .enableCors()\r\n            .enableStatelessCsrf()\r\n            .statelessSessionManagement()\r\n            .jwtAuthentication(authenticationManager)\r\n            .setRequestRestrictions()\r\n            .build()\r\n    }\r\n\r\n    private fun HttpSecurity.requireSSL(): HttpSecurity =\r\n        requiresChannel().anyRequest().requiresSecure().and()\r\n\r\n    private fun HttpSecurity.disableLocalHSTS(): HttpSecurity =\r\n        if (environment.acceptsProfiles(Profiles.of(DEVELOPMENT, TESTING)))\r\n            headers().httpStrictTransportSecurity().disable().and()\r\n        else this\r\n\r\n    private fun HttpSecurity.enableCors(): HttpSecurity =\r\n        cors().and()\r\n\r\n    private fun HttpSecurity.enableStatelessCsrf(): HttpSecurity =\r\n        csrf().disable().addFilterBefore(StatelessCsrfFilter(), CsrfFilter::class.java)\r\n\r\n    private fun HttpSecurity.statelessSessionManagement(): HttpSecurity =\r\n        sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n\r\n    private fun HttpSecurity.jwtAuthentication(\r\n        authenticationManager: AuthenticationManager\r\n    ): HttpSecurity =\r\n        addFilterBefore(JwtPreAuthenticatedProcessingFilter(authenticationManager, jwtService), UsernamePasswordAuthenticationFilter::class.java)\r\n            .addFilterBefore(JwtCookiePreAuthenticationFilter(jwtService), UsernamePasswordAuthenticationFilter::class.java)\r\n            .formLogin()\r\n            .loginProcessingUrl(LOGIN_URL)\r\n            .successHandler(JwtCookieAuthenticationSuccessHandler(jwtService))\r\n            .failureHandler(AuthenticationFailureResolver(handlerExceptionResolver))\r\n            .and()\r\n            .logout()\r\n            .logoutUrl(LOGOUT_URL)\r\n            .logoutSuccessHandler(Http200LogoutSuccessHandler())\r\n            .addLogoutHandler(JwtCookieLogoutHandler(jwtService))\r\n            .and()\r\n\r\n    private fun HttpSecurity.setRequestRestrictions(): HttpSecurity =\r\n        authorizeHttpRequests {\r\n            it.requestMatchers(HttpMethod.GET, ROOT_URL).permitAll()\r\n                .requestMatchers([...])\r\n                .anyRequest().denyAll().and()\r\n        }\r\n}\r\n\r\n```","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>I have recently upgraded my Spring Boot Application to Spring Boot 3 (from 2.6.4), Kotlin 1.8.0 (from 1.7.20) and JDK 17 (from 11). Right now I'm facing AnnotationConfigurationExceptions caused by <code>@PreAuthorize</code> meta-annotations used on inherited repository-methods.</p>\n<pre><code>org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PreAuthorize attributed to public final java.util.List jdk.proxy2.$Proxy390.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\n        at org.springframework.security.authorization.method.AuthorizationAnnotationUtils.findUniqueAnnotation(AuthorizationAnnotationUtils.java:64)\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.findPreAuthorizeAnnotation(PreAuthorizeExpressionAttributeRegistry.java:71)\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.resolveAttribute(PreAuthorizeExpressionAttributeRegistry.java:61)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.lambda$getAttribute$0(AbstractExpressionAttributeRegistry.java:57)\n        at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:57)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:46)\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:63)\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)\n        at org.springframework.security.authorization.ObservationAuthorizationManager.check(ObservationAuthorizationManager.java:55)\n        at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\n</code></pre>\n<p>After some debugging, I found that Spring Security somehow reflects the single annotation multiple times. As soon as I move the methods from the base-repository to the actual repository, the exception does no longer appear.</p>\n<p>I've got a base-repository implementing some common methods like findAll, findById, etc. and marking them accessible using the REST-API and restricting the access using the <code>@HasRoleAdminOrHasReadCollectionPermission</code> meta-annotation (following later):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@NoRepositoryBean\ninterface BaseRepository&lt;T : BaseEntity&gt; : CrudRepository&lt;T, Long&gt; {\n\n    /* [...] */\n\n    @RestResource\n    @HasRoleAdminOrHasReadCollectionPermission\n    override fun findAll(): List&lt;T&gt;\n\n    /* [...] */\n\n}\n</code></pre>\n<p>Second, the base-repository is implemented by the actual entity-repository:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@RepositoryRestResource(path = &quot;categories&quot;, collectionResourceRel = &quot;categories&quot;)\n@Transactional(readOnly = true)\ninterface CategoryRepository : BaseRepository&lt;Category&gt; {\n\n    /* [...] */\n\n}\n</code></pre>\n<p>Third, here's the <code>@HasRoleAdminOrHasReadCollectionPermission</code> meta-annotation:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Retention(AnnotationRetention.RUNTIME)\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)\n@PreAuthorize(&quot;hasRole('$ROLE_ADMIN') or hasPermission($COLLECTION_TARGET, $DELETE_PERMISSION)&quot;)\nannotation class HasRoleAdminOrHasDeleteCollectionPermission\n</code></pre>\n<p>I'm all out of ideas, looked through the Java files generated from Kotlin, nowhere are duplicated annotations. Hoping someone here can help me with that.</p>\n<p>Edit: As requested, here's the Application-class and the class containing the security-config:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootApplication(exclude = [ErrorMvcAutoConfiguration::class])\n@ServletComponentScan\n@EnableAsync\n@EnableScheduling\nclass Application {\n    companion object {\n        val HOSTNAME = System.getenv(&quot;HOSTNAME&quot;)\n        val TIMESTAMP = System.currentTimeMillis()\n\n        /** Entry point, run with gradle `bootRun` task. */\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            SpringApplication.run(Application::class.java, *args)\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableMethodSecurity(prePostEnabled = true)\nclass SecurityConfig(\n    private val environment: Environment,\n    private val baseProperties: BaseProperties,\n    private val accountService: AccountService,\n    private val integrationService: IntegrationService,\n    private val jwtService: JwtService,\n    private val loginAttemptService: LoginAttemptService,\n    private val handlerExceptionResolver: HandlerExceptionResolver\n) {\n\n    @Bean\n    fun webSecurityCustomizer(): WebSecurityCustomizer =\n        WebSecurityCustomizer { web: WebSecurity -&gt; web.debug(true) }\n\n    @Bean\n    fun corsConfigurationSource(): CorsConfigurationSource {\n        val configuration = CorsConfiguration()\n        configuration.allowedOrigins = baseProperties.corsAllowedOrigins()\n        configuration.allowedMethods = listOf(CorsConfiguration.ALL)\n        configuration.allowedHeaders = listOf(CorsConfiguration.ALL)\n        configuration.allowCredentials = true\n        val source = UrlBasedCorsConfigurationSource()\n        source.registerCorsConfiguration(ANY_PATH, configuration)\n        return source\n    }\n\n    @Bean\n    fun userDetailsService(): UserDetailsService =\n        AccountUserDetailsService(accountService, integrationService)\n\n    @Bean\n    fun authenticationManager(\n        http: HttpSecurity,\n        userDetailsService: UserDetailsService\n    ): AuthenticationManager {\n        val authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder::class.java)\n\n        val loginAttemptDaoAuthenticationProvider = LoginAttemptDaoAuthenticationProvider(loginAttemptService, userDetailsService)\n        val jwtPreAuthenticationProvider = PreAuthenticatedAuthenticationProvider()\n\n        jwtPreAuthenticationProvider.setPreAuthenticatedUserDetailsService(UserDetailsByNameServiceWrapper(userDetailsService))\n\n        return authenticationManagerBuilder\n            .userDetailsService(userDetailsService).and()\n            .authenticationProvider(loginAttemptDaoAuthenticationProvider)\n            .authenticationProvider(jwtPreAuthenticationProvider)\n            .build()\n    }\n\n    @Bean\n    fun filterChain(\n        http: HttpSecurity,\n        authenticationManager: AuthenticationManager,\n        userDetailsService: UserDetailsService\n    ): SecurityFilterChain {\n        return http\n            .requireSSL()\n            .disableLocalHSTS()\n            .enableCors()\n            .enableStatelessCsrf()\n            .statelessSessionManagement()\n            .jwtAuthentication(authenticationManager)\n            .setRequestRestrictions()\n            .build()\n    }\n\n    private fun HttpSecurity.requireSSL(): HttpSecurity =\n        requiresChannel().anyRequest().requiresSecure().and()\n\n    private fun HttpSecurity.disableLocalHSTS(): HttpSecurity =\n        if (environment.acceptsProfiles(Profiles.of(DEVELOPMENT, TESTING)))\n            headers().httpStrictTransportSecurity().disable().and()\n        else this\n\n    private fun HttpSecurity.enableCors(): HttpSecurity =\n        cors().and()\n\n    private fun HttpSecurity.enableStatelessCsrf(): HttpSecurity =\n        csrf().disable().addFilterBefore(StatelessCsrfFilter(), CsrfFilter::class.java)\n\n    private fun HttpSecurity.statelessSessionManagement(): HttpSecurity =\n        sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n\n    private fun HttpSecurity.jwtAuthentication(\n        authenticationManager: AuthenticationManager\n    ): HttpSecurity =\n        addFilterBefore(JwtPreAuthenticatedProcessingFilter(authenticationManager, jwtService), UsernamePasswordAuthenticationFilter::class.java)\n            .addFilterBefore(JwtCookiePreAuthenticationFilter(jwtService), UsernamePasswordAuthenticationFilter::class.java)\n            .formLogin()\n            .loginProcessingUrl(LOGIN_URL)\n            .successHandler(JwtCookieAuthenticationSuccessHandler(jwtService))\n            .failureHandler(AuthenticationFailureResolver(handlerExceptionResolver))\n            .and()\n            .logout()\n            .logoutUrl(LOGOUT_URL)\n            .logoutSuccessHandler(Http200LogoutSuccessHandler())\n            .addLogoutHandler(JwtCookieLogoutHandler(jwtService))\n            .and()\n\n    private fun HttpSecurity.setRequestRestrictions(): HttpSecurity =\n        authorizeHttpRequests {\n            it.requestMatchers(HttpMethod.GET, ROOT_URL).permitAll()\n                .requestMatchers([...])\n                .anyRequest().denyAll().and()\n        }\n}\n\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9550,"page":442,"page_size":100}
