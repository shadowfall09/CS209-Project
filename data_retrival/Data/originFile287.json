{"items":[{"tags":["java","parsing","web-scraping","jsoup","pastebin"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690163609,"creation_date":1690163609,"answer_id":76751006,"question_id":76750142,"body_markdown":"## Class line is invalid\r\n\r\nSpace in a `class` attribute separates class names. Hence, expecting `.getElementsByClass(&quot;foo bar&quot;)` to work is incorrect - you&#39;re asking a lot from JSoup here. What you really want is `.getElementsByClass(&quot;foo&quot;)` and then get the intersection (the &#39;overlap&#39;) between that and `.getElementsByClass(&quot;bar&quot;)`.\r\n\r\nSecondly, HTML classes must start with a letter. In other words, `-raw` is an invalid class name. Given that it is invalid, in the browser/HTML space the general trend is not to hard-crash (but, had it been XHTML, most parser tools would completely refuse this HTML as being invalid), but what _does_ happen is more or less undefined - you shouldn&#39;t write invalid HTML. It is possible that JSoup completely ignores &#39;-raw&#39;.\r\n\r\nThus, we have 2 plausible things that make JSoup not parse this, and __neither is JSoup&#39;s fault - it is the fault of this invalid HTML__:\r\n\r\n* It doesn&#39;t let you ask for multiple classes in a single &quot;by class&quot; call. Fix by getting the intersection between all those classes you are actually interested in.\r\n\r\n* It doesn&#39;t let you ask for `-raw`. Simply don&#39;t ask for that one.\r\n\r\n## Different HTML is returned\r\n\r\nJSoup parses the HTML. __It does not run any javascript__. Turn javascript off in your browser and retry the request. I bet you get the same &#39;weird completely neutered HTML&#39;.\r\n\r\nThere are various ways to integrate dynamism (e.g. the values of things in db tables, think &#39;list of movies on youtube&#39;, &#39;streetnames in google maps&#39;, &#39;most recent posts&#39; on a forum site, and so on - anything that isn&#39;t &#39;hardcoded&#39; by the programmers and designers). The usual way __in the past__ was templating. In which case, the HTML you get from the browser is very similar to the DOM that the browser ends up showing to your eyeballs.\r\n\r\nHowever, more and more of the web is now done using a static-HTML+API-calls model: The HTML/CSS/JS served by the server is completely static (&#39;hardcoded&#39; - every pageload it is the same every time, and therefore, it contains absolutely nothing dynamic. No comments, nothing that could change based on user interaction at all). That HTML/CSS/JS then runs a bunch of web requests within javascript to get the dynamic parts and creates the HTML elements dynamically, injecting them on the fly into the DOM (which is the &#39;HTML&#39; the way the browser knows how to render it, i.e. parsed, turned into a syntax tree, and crucially _the javascript gets to edit it, which is reflected live in what the page looks like_.\r\n\r\nAll those pages (And it is _most of the web_ at this point) cannot be parsed with JSoup. You need something to fully emulate an entire browser (because that javascript can tell the system to scroll the page, and then render a canvas, and then check the canvas and react to that, and then ask for your screen size, and a million other things that are difficult to emulate for a non-browser). Then you can ask the browser for the DOM and go from there.\r\n\r\nThis _is_ possible - &#39;browser automation&#39; exists, e.g. in the form of selenium, but these tools were generally originally designed to let you _test_ your own websites, they weren&#39;t designed to let you scrape existing sites. Selenium specifically, and the general principle of browser based web scraping, is __incredibly slow and complicated__. You&#39;re running an entire browser, which means you need a graphics stack and GBs of memory to spend a second or 3 to process it all.\r\n\r\nGenerally, the obvious way to get at all that dynamic data is __to use the same APIs that the static HTML/CSS/JS is using__ - because APIs don&#39;t change when a designer decides they don&#39;t like the colour of part of the page: They are _designed_ to be easy to use from code. Sites also tend to charge for API usage, though. Generally, the significant hassle of attempting to write the extremely complicated code, and maintain the extremely complicated stack of IAAS you need, and the extremely complicated team of lawyers you need to sort out the business of using automated browsers to parse the web add up to costing far, far more than API access costs. Which is why the vast majority of programmers use those APIs, which means that few good programmers are working on making those browser automation tools run faster.\r\n\r\nThat all combines into: Use the API.\r\n","title":"Jsoup can&#39;t find existing element by class name","body":"<h2>Class line is invalid</h2>\n<p>Space in a <code>class</code> attribute separates class names. Hence, expecting <code>.getElementsByClass(&quot;foo bar&quot;)</code> to work is incorrect - you're asking a lot from JSoup here. What you really want is <code>.getElementsByClass(&quot;foo&quot;)</code> and then get the intersection (the 'overlap') between that and <code>.getElementsByClass(&quot;bar&quot;)</code>.</p>\n<p>Secondly, HTML classes must start with a letter. In other words, <code>-raw</code> is an invalid class name. Given that it is invalid, in the browser/HTML space the general trend is not to hard-crash (but, had it been XHTML, most parser tools would completely refuse this HTML as being invalid), but what <em>does</em> happen is more or less undefined - you shouldn't write invalid HTML. It is possible that JSoup completely ignores '-raw'.</p>\n<p>Thus, we have 2 plausible things that make JSoup not parse this, and <strong>neither is JSoup's fault - it is the fault of this invalid HTML</strong>:</p>\n<ul>\n<li><p>It doesn't let you ask for multiple classes in a single &quot;by class&quot; call. Fix by getting the intersection between all those classes you are actually interested in.</p>\n</li>\n<li><p>It doesn't let you ask for <code>-raw</code>. Simply don't ask for that one.</p>\n</li>\n</ul>\n<h2>Different HTML is returned</h2>\n<p>JSoup parses the HTML. <strong>It does not run any javascript</strong>. Turn javascript off in your browser and retry the request. I bet you get the same 'weird completely neutered HTML'.</p>\n<p>There are various ways to integrate dynamism (e.g. the values of things in db tables, think 'list of movies on youtube', 'streetnames in google maps', 'most recent posts' on a forum site, and so on - anything that isn't 'hardcoded' by the programmers and designers). The usual way <strong>in the past</strong> was templating. In which case, the HTML you get from the browser is very similar to the DOM that the browser ends up showing to your eyeballs.</p>\n<p>However, more and more of the web is now done using a static-HTML+API-calls model: The HTML/CSS/JS served by the server is completely static ('hardcoded' - every pageload it is the same every time, and therefore, it contains absolutely nothing dynamic. No comments, nothing that could change based on user interaction at all). That HTML/CSS/JS then runs a bunch of web requests within javascript to get the dynamic parts and creates the HTML elements dynamically, injecting them on the fly into the DOM (which is the 'HTML' the way the browser knows how to render it, i.e. parsed, turned into a syntax tree, and crucially <em>the javascript gets to edit it, which is reflected live in what the page looks like</em>.</p>\n<p>All those pages (And it is <em>most of the web</em> at this point) cannot be parsed with JSoup. You need something to fully emulate an entire browser (because that javascript can tell the system to scroll the page, and then render a canvas, and then check the canvas and react to that, and then ask for your screen size, and a million other things that are difficult to emulate for a non-browser). Then you can ask the browser for the DOM and go from there.</p>\n<p>This <em>is</em> possible - 'browser automation' exists, e.g. in the form of selenium, but these tools were generally originally designed to let you <em>test</em> your own websites, they weren't designed to let you scrape existing sites. Selenium specifically, and the general principle of browser based web scraping, is <strong>incredibly slow and complicated</strong>. You're running an entire browser, which means you need a graphics stack and GBs of memory to spend a second or 3 to process it all.</p>\n<p>Generally, the obvious way to get at all that dynamic data is <strong>to use the same APIs that the static HTML/CSS/JS is using</strong> - because APIs don't change when a designer decides they don't like the colour of part of the page: They are <em>designed</em> to be easy to use from code. Sites also tend to charge for API usage, though. Generally, the significant hassle of attempting to write the extremely complicated code, and maintain the extremely complicated stack of IAAS you need, and the extremely complicated team of lawyers you need to sort out the business of using automated browsers to parse the web add up to costing far, far more than API access costs. Which is why the vast majority of programmers use those APIs, which means that few good programmers are working on making those browser automation tools run faster.</p>\n<p>That all combines into: Use the API.</p>\n"}],"owner":{"account_id":29076113,"reputation":1,"user_id":22273230,"display_name":"KostromDan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690315963,"creation_date":1690143161,"question_id":76750142,"body_markdown":"I&#39;m trying to parse `pastebin` page with all params(likes, views_count, etc). And all fine except raw text.\r\nI know that there is a `\\&lt;paste_id\\&gt;/raw`, but I don&#39;t want to use it since I will have to make 2 requests. And I can&#39;t immediately access `\\&lt;paste_id\\&gt;/raw` because I need all the additional parameters.\r\nNeeded data stores in\r\n\r\n```html\r\n&lt;textarea class=&quot;textarea -raw js-paste-raw&quot;&gt;Text I need to parse&lt;/textarea&gt;\r\n```\r\nI checked that in the response from the `pastebin` server without processing/with `javascript` processing, this element looks exactly the same.\r\n`Jsoup` simply ignores this element as if it doesn&#39;t exist.\r\n\r\n```java\r\nElements raw_test_1 = doc.getElementsByClass(&quot;textarea&quot;);\r\nlog(raw_test_1.size());\r\n\r\nElements raw_test_2 = doc.select(&quot;textarea&quot;);\r\nlog(raw_test_2.size());\r\n\r\nElements raw_test_3 = doc.getElementsByClass(&quot;textarea -raw js-paste-raw&quot;);\r\nlog(raw_test_3.size());\r\n```\r\n\r\nResult:\r\n\r\n`0`\r\n\r\n`0`\r\n\r\n`0`\r\n\r\nIt looks like the `pastebin` developers did something nasty with this element to ruin the lives of those who try to parse their site.\r\nEdge shows that this element has errors.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhich confirms that this element of the site is intentionally corrupted.\r\n\r\nupdate:\r\n\r\nI found out the cause of the problem. The response from the `PasteBin` servers is completely different for browsers and `JSoup`. There are more than 900 lines of code for browsers. And 300 for `Jsoup`. `Pastebin` somehow detects that we are parsing the page and issues a neutered response. The raw paste we need is contained in the neutered part of the answer. I tried `.userAgent(&quot;Chrome/4.0.249.0 Safari/532.5&quot;)` but it&#39;s not enough, how to make `pastebin` servers perceive our request as a real request?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wwOnG.png","title":"Jsoup can&#39;t find existing element by class name","body":"<p>I'm trying to parse <code>pastebin</code> page with all params(likes, views_count, etc). And all fine except raw text.\nI know that there is a <code>\\&lt;paste_id\\&gt;/raw</code>, but I don't want to use it since I will have to make 2 requests. And I can't immediately access <code>\\&lt;paste_id\\&gt;/raw</code> because I need all the additional parameters.\nNeeded data stores in</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;textarea class=&quot;textarea -raw js-paste-raw&quot;&gt;Text I need to parse&lt;/textarea&gt;\n</code></pre>\n<p>I checked that in the response from the <code>pastebin</code> server without processing/with <code>javascript</code> processing, this element looks exactly the same.\n<code>Jsoup</code> simply ignores this element as if it doesn't exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Elements raw_test_1 = doc.getElementsByClass(&quot;textarea&quot;);\nlog(raw_test_1.size());\n\nElements raw_test_2 = doc.select(&quot;textarea&quot;);\nlog(raw_test_2.size());\n\nElements raw_test_3 = doc.getElementsByClass(&quot;textarea -raw js-paste-raw&quot;);\nlog(raw_test_3.size());\n</code></pre>\n<p>Result:</p>\n<p><code>0</code></p>\n<p><code>0</code></p>\n<p><code>0</code></p>\n<p>It looks like the <code>pastebin</code> developers did something nasty with this element to ruin the lives of those who try to parse their site.\nEdge shows that this element has errors.</p>\n<p><a href=\"https://i.stack.imgur.com/wwOnG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wwOnG.png\" alt=\"enter image description here\" /></a></p>\n<p>Which confirms that this element of the site is intentionally corrupted.</p>\n<p>update:</p>\n<p>I found out the cause of the problem. The response from the <code>PasteBin</code> servers is completely different for browsers and <code>JSoup</code>. There are more than 900 lines of code for browsers. And 300 for <code>Jsoup</code>. <code>Pastebin</code> somehow detects that we are parsing the page and issues a neutered response. The raw paste we need is contained in the neutered part of the answer. I tried <code>.userAgent(&quot;Chrome/4.0.249.0 Safari/532.5&quot;)</code> but it's not enough, how to make <code>pastebin</code> servers perceive our request as a real request?</p>\n"},{"tags":["java","quartz-scheduler","spring-camel"],"comments":[{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1690318777,"post_id":76766142,"comment_id":135336277,"body_markdown":"I am not sure I understand the question but how would you like to have scheduler running if you no longer add the route to the camel context?","body":"I am not sure I understand the question but how would you like to have scheduler running if you no longer add the route to the camel context?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690323201,"post_id":76766142,"comment_id":135336886,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29089927,"reputation":1,"user_id":22284051,"display_name":"ntn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690315102,"creation_date":1690315102,"question_id":76766142,"body_markdown":"There is a Springboot application that receives the parameters (what, where) of the route (Apache Camel) and the schedule for its execution (Quartz).\r\nFor example, log a message every second, or send a message to the ActiceMQ queue once.\r\nA database is used to save and restore the schedule in case of an application restart.\r\n\r\nHow to correctly save and restore Apache Camel route parameters on application restart by linking it to its corresponding schedule?\r\n\r\n```\r\npublic class CustomRouter extends RouteBuilder {\r\n\r\n    private final int repeatInterval;\r\n    private final String message;\r\n    private final String destination;\r\n    private final String triggerName;\r\n\r\n    public CustomRouter(\r\n            int repeatInterval, \r\n            String message, \r\n            String destination, \r\n            String triggerName) {\r\n        this.repeatInterval = repeatInterval;\r\n        this.message = message;\r\n        this.destination = destination;\r\n        this.triggerName = triggerName;\r\n    }\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;customQuartz://&quot; \r\n                + triggerName + &quot;?trigger.repeatInterval=&quot; + repeatInterval)\r\n                .setBody(simple(this.message))\r\n                .to(destination);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Service\r\npublic class CamelStarter implements InitializingBean, DisposableBean {\r\n    \r\n    private final QuartzComponent customQuartz;\r\n    private DefaultCamelContext camelCustomContext;\r\n\r\n    public CamelStarter(QuartzComponent customQuartz) {\r\n        this.customQuartz = customQuartz;\r\n    }\r\n    \r\n    @Override\r\n    public void afterPropertiesSet() throws Exception {\r\n        camelCustomContext = new DefaultCamelContext();\r\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\r\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\r\n        \r\n        camelCustomContext.addRoutes(new CustomRouter(\r\n                1000, \r\n                &quot;CustomRouter1&quot;, \r\n                &quot;log:customLog1&quot;, \r\n                &quot;customRouterTrigger1&quot;));\r\n        \r\n        camelCustomContext.start();\r\n    }\r\n\r\n    @Override\r\n    public void destroy() throws Exception {\r\n        camelCustomContext.stop();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class CamelCustomConfiguration {\r\n\r\n    @Bean\r\n    public SchedulerFactoryBean customSchedulerFactory(\r\n            DataSource dataSource, QuartzProperties quartzProperties) {\r\n        Properties properties = new Properties();\r\n        properties.putAll(quartzProperties.getProperties());\r\n\r\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\r\n        factory.setOverwriteExistingJobs(true);\r\n        factory.setWaitForJobsToCompleteOnShutdown(true);\r\n        factory.setDataSource(dataSource);\r\n        factory.setQuartzProperties(properties);\r\n        factory.setJobFactory(new SpringBeanJobFactory());\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public Scheduler customScheduler(\r\n            DataSource dataSource, QuartzProperties quartzProperties) {\r\n        return customSchedulerFactory(dataSource, quartzProperties).getScheduler();\r\n    }\r\n\r\n    @Bean\r\n    public QuartzComponent customquartz(\r\n            DataSource dataSource,\r\n            QuartzProperties quartzProperties) {\r\n        QuartzComponent component = new QuartzComponent();\r\n        component.setScheduler(customScheduler(dataSource, quartzProperties));\r\n        return component;\r\n    }\r\n}\r\n```\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/schedule_module\r\nspring.datasource.username=postgres\r\nspring.datasource.password=1111\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\nspring.quartz.job-store-type=jdbc\r\nspring.quartz.properties.org.quartz.scheduler.instanceId=CustomClusteredScheduler\r\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=qrtz_\r\nspring.quartz.properties.org.quartz.jobStore.isClustered=true\r\n```\r\n\r\nAt the 1st launch of the application, the message is displayed in the Log and entries about the route schedule appear in the database:\r\n\r\n```\r\n2023-07-25 22:53:04.929  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Starting ScheduleAppApplication using Java 17.0.6 on DESKTOP-6SHGJTA with PID 9928 (C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app\\target\\classes started by baa in C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app)\r\n2023-07-25 22:53:04.932  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-07-25 22:53:05.775  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-07-25 22:53:05.902  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-07-25 22:53:05.965  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Using default implementation for ThreadExecutor\r\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.SchedulerSignalerImpl    : Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\r\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Quartz Scheduler v.2.3.2 created.\r\n2023-07-25 22:53:05.982  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : Using db table-based data access locking (synchronization).\r\n2023-07-25 22:53:05.984  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : JobStoreCMT initialized.\r\n2023-07-25 22:53:05.985  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler meta-data: Quartz Scheduler (v2.3.2) &#39;customSchedulerFactory&#39; with instanceId &#39;CustomClusteredScheduler&#39;\r\n  Scheduler class: &#39;org.quartz.core.QuartzScheduler&#39; - running locally.\r\n  NOT STARTED.\r\n  Currently in standby mode.\r\n  Number of jobs executed: 0\r\n  Using thread pool &#39;org.quartz.simpl.SimpleThreadPool&#39; - with 10 threads.\r\n  Using job-store &#39;org.springframework.scheduling.quartz.LocalDataSourceJobStore&#39; - which supports persistence. and is clustered.\r\n\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler &#39;customSchedulerFactory&#39; initialized from an externally provided properties instance.\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@4d8286c4\r\n2023-07-25 22:53:06.441  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\r\n2023-07-25 22:53:06.501  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is 2023-07-25T22:53:06.464+0300\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route1 (customQuartz://customRouterTrigger1)\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 173ms (build:3ms init:102ms start:68ms)\r\n2023-07-25 22:53:06.511  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@889a8a8\r\n2023-07-25 22:53:06.522  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\r\n2023-07-25 22:53:06.586  INFO 9928 --- [actory_Worker-1] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:06.787  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\r\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 61ms (build:42ms init:19ms start:0ms)\r\n2023-07-25 22:53:06.793  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.205 seconds (JVM running for 2.508)\r\n2023-07-25 22:53:07.472  INFO 9928 --- [actory_Worker-2] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:08.470  INFO 9928 --- [actory_Worker-3] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:09.469  INFO 9928 --- [actory_Worker-4] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:10.473  INFO 9928 --- [actory_Worker-5] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:11.470  INFO 9928 --- [actory_Worker-6] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n```\r\n\r\nBut if stop the application, remove the line with the addition of the route:\r\n\r\n```\r\n@Override\r\n    public void afterPropertiesSet() throws Exception {\r\n        camelCustomContext = new DefaultCamelContext();\r\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\r\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\r\n        \r\n        camelCustomContext.start();\r\n    }\r\n```\r\n\r\nand start the application again, then a message is not displayed in the Log:\r\n\r\n```\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler &#39;customSchedulerFactory&#39; initialized from an externally provided properties instance.\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@6778aea6\r\n2023-07-25 22:57:11.603  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\r\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 29ms (build:3ms init:23ms start:3ms)\r\n2023-07-25 22:57:11.610  INFO 16864 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@23a918c7\r\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: detected 1 failed or restarted instances.\r\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: Scanning for instance &quot;CustomClusteredScheduler&quot;&#39;s failed in-progress jobs.\r\n2023-07-25 22:57:11.645  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: ......Freed 1 acquired trigger(s).\r\n2023-07-25 22:57:11.650  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\r\n2023-07-25 22:57:11.708  WARN 16864 --- [actory_Worker-1] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.717  WARN 16864 --- [actory_Worker-2] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.732  WARN 16864 --- [actory_Worker-3] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-1] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-2] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-3] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.907  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\r\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 69ms (build:51ms init:18ms start:0ms)\r\n2023-07-25 22:57:11.914  INFO 16864 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.054 seconds (JVM running for 2.394)\r\n```\r\n\r\n\r\n","title":"How to save and bind Camel dynamic route and Quartz scheduler in DB and restore it after application restart?","body":"<p>There is a Springboot application that receives the parameters (what, where) of the route (Apache Camel) and the schedule for its execution (Quartz).\nFor example, log a message every second, or send a message to the ActiceMQ queue once.\nA database is used to save and restore the schedule in case of an application restart.</p>\n<p>How to correctly save and restore Apache Camel route parameters on application restart by linking it to its corresponding schedule?</p>\n<pre><code>public class CustomRouter extends RouteBuilder {\n\n    private final int repeatInterval;\n    private final String message;\n    private final String destination;\n    private final String triggerName;\n\n    public CustomRouter(\n            int repeatInterval, \n            String message, \n            String destination, \n            String triggerName) {\n        this.repeatInterval = repeatInterval;\n        this.message = message;\n        this.destination = destination;\n        this.triggerName = triggerName;\n    }\n\n    @Override\n    public void configure() throws Exception {\n        from(&quot;customQuartz://&quot; \n                + triggerName + &quot;?trigger.repeatInterval=&quot; + repeatInterval)\n                .setBody(simple(this.message))\n                .to(destination);\n    }\n}\n</code></pre>\n<pre><code>@Service\npublic class CamelStarter implements InitializingBean, DisposableBean {\n    \n    private final QuartzComponent customQuartz;\n    private DefaultCamelContext camelCustomContext;\n\n    public CamelStarter(QuartzComponent customQuartz) {\n        this.customQuartz = customQuartz;\n    }\n    \n    @Override\n    public void afterPropertiesSet() throws Exception {\n        camelCustomContext = new DefaultCamelContext();\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\n        \n        camelCustomContext.addRoutes(new CustomRouter(\n                1000, \n                &quot;CustomRouter1&quot;, \n                &quot;log:customLog1&quot;, \n                &quot;customRouterTrigger1&quot;));\n        \n        camelCustomContext.start();\n    }\n\n    @Override\n    public void destroy() throws Exception {\n        camelCustomContext.stop();\n    }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class CamelCustomConfiguration {\n\n    @Bean\n    public SchedulerFactoryBean customSchedulerFactory(\n            DataSource dataSource, QuartzProperties quartzProperties) {\n        Properties properties = new Properties();\n        properties.putAll(quartzProperties.getProperties());\n\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\n        factory.setOverwriteExistingJobs(true);\n        factory.setWaitForJobsToCompleteOnShutdown(true);\n        factory.setDataSource(dataSource);\n        factory.setQuartzProperties(properties);\n        factory.setJobFactory(new SpringBeanJobFactory());\n        return factory;\n    }\n\n    @Bean\n    public Scheduler customScheduler(\n            DataSource dataSource, QuartzProperties quartzProperties) {\n        return customSchedulerFactory(dataSource, quartzProperties).getScheduler();\n    }\n\n    @Bean\n    public QuartzComponent customquartz(\n            DataSource dataSource,\n            QuartzProperties quartzProperties) {\n        QuartzComponent component = new QuartzComponent();\n        component.setScheduler(customScheduler(dataSource, quartzProperties));\n        return component;\n    }\n}\n</code></pre>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/schedule_module\nspring.datasource.username=postgres\nspring.datasource.password=1111\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=update\n\nspring.quartz.job-store-type=jdbc\nspring.quartz.properties.org.quartz.scheduler.instanceId=CustomClusteredScheduler\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=qrtz_\nspring.quartz.properties.org.quartz.jobStore.isClustered=true\n</code></pre>\n<p>At the 1st launch of the application, the message is displayed in the Log and entries about the route schedule appear in the database:</p>\n<pre><code>2023-07-25 22:53:04.929  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Starting ScheduleAppApplication using Java 17.0.6 on DESKTOP-6SHGJTA with PID 9928 (C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app\\target\\classes started by baa in C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app)\n2023-07-25 22:53:04.932  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-07-25 22:53:05.775  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-25 22:53:05.902  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-07-25 22:53:05.965  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Using default implementation for ThreadExecutor\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.SchedulerSignalerImpl    : Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Quartz Scheduler v.2.3.2 created.\n2023-07-25 22:53:05.982  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : Using db table-based data access locking (synchronization).\n2023-07-25 22:53:05.984  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : JobStoreCMT initialized.\n2023-07-25 22:53:05.985  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler meta-data: Quartz Scheduler (v2.3.2) 'customSchedulerFactory' with instanceId 'CustomClusteredScheduler'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.\n  Using job-store 'org.springframework.scheduling.quartz.LocalDataSourceJobStore' - which supports persistence. and is clustered.\n\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler 'customSchedulerFactory' initialized from an externally provided properties instance.\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@4d8286c4\n2023-07-25 22:53:06.441  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\n2023-07-25 22:53:06.501  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is 2023-07-25T22:53:06.464+0300\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route1 (customQuartz://customRouterTrigger1)\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 173ms (build:3ms init:102ms start:68ms)\n2023-07-25 22:53:06.511  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@889a8a8\n2023-07-25 22:53:06.522  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\n2023-07-25 22:53:06.586  INFO 9928 --- [actory_Worker-1] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:06.787  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 61ms (build:42ms init:19ms start:0ms)\n2023-07-25 22:53:06.793  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.205 seconds (JVM running for 2.508)\n2023-07-25 22:53:07.472  INFO 9928 --- [actory_Worker-2] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:08.470  INFO 9928 --- [actory_Worker-3] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:09.469  INFO 9928 --- [actory_Worker-4] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:10.473  INFO 9928 --- [actory_Worker-5] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:11.470  INFO 9928 --- [actory_Worker-6] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n</code></pre>\n<p>But if stop the application, remove the line with the addition of the route:</p>\n<pre><code>@Override\n    public void afterPropertiesSet() throws Exception {\n        camelCustomContext = new DefaultCamelContext();\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\n        \n        camelCustomContext.start();\n    }\n</code></pre>\n<p>and start the application again, then a message is not displayed in the Log:</p>\n<pre><code>2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler 'customSchedulerFactory' initialized from an externally provided properties instance.\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@6778aea6\n2023-07-25 22:57:11.603  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 29ms (build:3ms init:23ms start:3ms)\n2023-07-25 22:57:11.610  INFO 16864 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@23a918c7\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: detected 1 failed or restarted instances.\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: Scanning for instance &quot;CustomClusteredScheduler&quot;'s failed in-progress jobs.\n2023-07-25 22:57:11.645  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: ......Freed 1 acquired trigger(s).\n2023-07-25 22:57:11.650  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\n2023-07-25 22:57:11.708  WARN 16864 --- [actory_Worker-1] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.717  WARN 16864 --- [actory_Worker-2] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.732  WARN 16864 --- [actory_Worker-3] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-1] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-2] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-3] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.907  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 69ms (build:51ms init:18ms start:0ms)\n2023-07-25 22:57:11.914  INFO 16864 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.054 seconds (JVM running for 2.394)\n</code></pre>\n"},{"tags":["java","static","calendar","thread-safety"],"comments":[{"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"score":0,"creation_date":1307300249,"post_id":6245053,"comment_id":7281079,"body_markdown":"Is your static calendar just a fixed date?","body":"Is your static calendar just a fixed date?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300255,"post_id":6245053,"comment_id":7281081,"body_markdown":"maybe it would help to make it &quot;volatile&quot; ?","body":"maybe it would help to make it &quot;volatile&quot; ?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300357,"post_id":6245053,"comment_id":7281097,"body_markdown":"no, I just don&#39;t want to create so many instances - for every call to my methods, as that possibly could take time.","body":"no, I just don&#39;t want to create so many instances - for every call to my methods, as that possibly could take time."},{"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"score":0,"creation_date":1307300446,"post_id":6245053,"comment_id":7281107,"body_markdown":"You mean you are worried about the performance hit of many calls to the constructor?","body":"You mean you are worried about the performance hit of many calls to the constructor?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300825,"post_id":6245053,"comment_id":7281159,"body_markdown":"Yes, not at least as the code is for mobile devices..","body":"Yes, not at least as the code is for mobile devices.."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":2,"creation_date":1370540140,"post_id":6245053,"comment_id":24507638,"body_markdown":"I am beginning to conclude that Calendar should not be regarded as simply &quot;not thread safe.&quot;  It should be labeled &quot;thread hostile&quot;.","body":"I am beginning to conclude that Calendar should not be regarded as simply &quot;not thread safe.&quot;  It should be labeled &quot;thread hostile&quot;."}],"answers":[{"tags":[],"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1513606224,"creation_date":1307300060,"answer_id":6245077,"question_id":6245053,"body_markdown":"Create a `Calendar` as a local variable in the method. If you need the same calendar across methods, you may be using statics where a (singleton or quasi-singleton) object would be more appropriate.","title":"How to make a static Calendar thread safe","body":"<p>Create a <code>Calendar</code> as a local variable in the method. If you need the same calendar across methods, you may be using statics where a (singleton or quasi-singleton) object would be more appropriate.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1417612408,"creation_date":1307300142,"answer_id":6245086,"question_id":6245053,"body_markdown":"You can&#39;t make something thread-safe if it isn&#39;t. In the case of `Calendar`, even *reading* data from it isn&#39;t thread-safe, as it can update internal data structures.\r\n\r\nIf at all possible, I&#39;d suggest using [Joda Time][1] instead:\r\n\r\n- Most of the types are immutable\r\n- The immutable types are thread-safe\r\n- It&#39;s a generally much better API anyway\r\n\r\nIf you absolutely *have* to use a `Calendar`, you could create a locking object and put all the access through a lock. For example:\r\n\r\n    private static final Calendar calendar = Calendar.getInstance();\r\n    private static final Object calendarLock = new Object();\r\n\r\n    public static int getYear()\r\n    {\r\n        synchronized(calendarLock)\r\n        {\r\n            return calendar.get(Calendar.YEAR);\r\n        }\r\n    }\r\n\r\n    // Ditto for other methods\r\n\r\nIt&#39;s pretty nasty though. You could have just *one* synchronized method which created a clone of the original calendar each time it was needed, of course... it&#39;s possible that by calling `computeFields` or `computeTime` you could make *subsequent* read-operations thread-safe, of course, but personally I&#39;d be loathe to try it.\r\n\r\n  [1]: http://www.joda.org/joda-time/","title":"How to make a static Calendar thread safe","body":"<p>You can't make something thread-safe if it isn't. In the case of <code>Calendar</code>, even <em>reading</em> data from it isn't thread-safe, as it can update internal data structures.</p>\n\n<p>If at all possible, I'd suggest using <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda Time</a> instead:</p>\n\n<ul>\n<li>Most of the types are immutable</li>\n<li>The immutable types are thread-safe</li>\n<li>It's a generally much better API anyway</li>\n</ul>\n\n<p>If you absolutely <em>have</em> to use a <code>Calendar</code>, you could create a locking object and put all the access through a lock. For example:</p>\n\n<pre><code>private static final Calendar calendar = Calendar.getInstance();\nprivate static final Object calendarLock = new Object();\n\npublic static int getYear()\n{\n    synchronized(calendarLock)\n    {\n        return calendar.get(Calendar.YEAR);\n    }\n}\n\n// Ditto for other methods\n</code></pre>\n\n<p>It's pretty nasty though. You could have just <em>one</em> synchronized method which created a clone of the original calendar each time it was needed, of course... it's possible that by calling <code>computeFields</code> or <code>computeTime</code> you could make <em>subsequent</em> read-operations thread-safe, of course, but personally I'd be loathe to try it.</p>\n"},{"tags":[],"owner":{"account_id":106190,"reputation":9362,"user_id":282968,"accept_rate":73,"display_name":"MJB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307300167,"creation_date":1307300167,"answer_id":6245091,"question_id":6245053,"body_markdown":"You cannot. Yes, you could synchronize on it, but it still has mutable state fields. You&#39;ll have to create your own Calendar object.\r\n\r\nIf possible, use something lightweight, like a long measuring the times in milliseconds, and only convert to a Calendar when you NEED to.","title":"How to make a static Calendar thread safe","body":"<p>You cannot. Yes, you could synchronize on it, but it still has mutable state fields. You'll have to create your own Calendar object.</p>\n\n<p>If possible, use something lightweight, like a long measuring the times in milliseconds, and only convert to a Calendar when you NEED to.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1513606178,"creation_date":1307300341,"answer_id":6245117,"question_id":6245053,"body_markdown":"Calendar is thread safe provided you don&#39;t change it.  The usage in your example is fine.\r\n\r\nIt is worth noting that Calendar is not an efficient class and you should only use it for complex operations (like finding the next month/year) IMHO: If you do use it for complex operations, use local variables only.\r\n\r\nIf all you want it a snapshot of the time a faster way is to use currentTimeMillis which does even create an object. You can make the field volatile if you want to make it thread safe.\r\n\r\n    private static long now = System.currentTimeMillis();\r\n\r\nThe usage is a bit suspect.  Why would you get the current time and store it globally like this.  It reminds me of the old joke. \r\n\r\n&gt; \\- Do you have the time?  \r\n&gt; \\- Yes, I have it written down somewhere.","title":"How to make a static Calendar thread safe","body":"<p>Calendar is thread safe provided you don't change it.  The usage in your example is fine.</p>\n\n<p>It is worth noting that Calendar is not an efficient class and you should only use it for complex operations (like finding the next month/year) IMHO: If you do use it for complex operations, use local variables only.</p>\n\n<p>If all you want it a snapshot of the time a faster way is to use currentTimeMillis which does even create an object. You can make the field volatile if you want to make it thread safe.</p>\n\n<pre><code>private static long now = System.currentTimeMillis();\n</code></pre>\n\n<p>The usage is a bit suspect.  Why would you get the current time and store it globally like this.  It reminds me of the old joke. </p>\n\n<blockquote>\n  <p>- Do you have the time?<br>\n  - Yes, I have it written down somewhere.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690314229,"creation_date":1689962378,"answer_id":76740232,"question_id":6245053,"body_markdown":"Instead of trying to make the `Calendar` API thread-safe, use the thread-safe `java.time` API introduced in Java 8 instead. This API also provides a more fluent and intuitive interface for date and time manipulation.\r\n\r\nHere&#39;s an example compatible with the legacy `Date` API of getting the start of next day with the `java.time` API:\r\n\r\n```java\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneId;\r\n\r\npublic static Date getStartOfNextDay() {\r\n    final ZonedDateTime startOfNextDay = ZonedDateTime.now()\r\n            .plusDays(1)\r\n            .withHour(0).withMinute(0).withSecond(0).withNano(0);\r\n    return Date.from(startOfNextDay.toInstant());\r\n}\r\n```\r\n\r\nAnd here&#39;s how it looks with the `Calendar` API:\r\n```java\r\nimport java.util.Calendar;\r\n\r\npublic static Date getStartOfNextDay() {\r\n    final Calendar calendar = Calendar.getInstance();\r\n    calendar.add(Calendar.DAY_OF_MONTH, 1);\r\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n    calendar.set(Calendar.MINUTE, 0);\r\n    calendar.set(Calendar.SECOND, 0);\r\n    calendar.set(Calendar.MILLISECOND, 0);\r\n    return calendar.getTime();\r\n}\r\n```","title":"How to make a static Calendar thread safe","body":"<p>Instead of trying to make the <code>Calendar</code> API thread-safe, use the thread-safe <code>java.time</code> API introduced in Java 8 instead. This API also provides a more fluent and intuitive interface for date and time manipulation.</p>\n<p>Here's an example compatible with the legacy <code>Date</code> API of getting the start of next day with the <code>java.time</code> API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDateTime;\nimport java.time.ZoneId;\n\npublic static Date getStartOfNextDay() {\n    final ZonedDateTime startOfNextDay = ZonedDateTime.now()\n            .plusDays(1)\n            .withHour(0).withMinute(0).withSecond(0).withNano(0);\n    return Date.from(startOfNextDay.toInstant());\n}\n</code></pre>\n<p>And here's how it looks with the <code>Calendar</code> API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Calendar;\n\npublic static Date getStartOfNextDay() {\n    final Calendar calendar = Calendar.getInstance();\n    calendar.add(Calendar.DAY_OF_MONTH, 1);\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\n    calendar.set(Calendar.MINUTE, 0);\n    calendar.set(Calendar.SECOND, 0);\n    calendar.set(Calendar.MILLISECOND, 0);\n    return calendar.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690054359,"creation_date":1689974286,"answer_id":76741301,"question_id":6245053,"body_markdown":"# tl;dr\r\n\r\n`Calendar` replaced by [`ZonedDateTime`][1]. [Immutable][2], so [thread-safe][3].\r\n\r\n    private static ZonedDateTime someMoment = ZonedDateTime.now();  // Capture the current moment as seen in the JVMs current default time zone.\r\n\r\nIf the value is meant to be fixed, unchanging during the execution of your app, mark it `final`. \r\n\r\n    private static final ZonedDateTime someMoment = ZonedDateTime.now();  \r\n\r\nIf at runtime you might assign a different object, then for thread-safety use an [`AtomicReference`][4].\r\n\r\n    private static final AtomicReference&lt; ZonedDateTime &gt; someMomentRef = new AtomicReference&lt;&gt;( ZonedDateTime.now() ) ;\r\n\r\nLater updating with a fresh moment. \r\n\r\n    someMomentRef.set( ZonedDateTime.now() );\r\n\r\nIf you need to interoperate with old code not yet updated to *java.time*, convert.\r\n\r\n    ZonedDateTime someMoment = someMomentRef.get() ;\r\n    Calendar c = GregorianCalendar.from( someMoment ) ;  // `GregorianCalendar` is a concrete subclass of `Calendar`.\r\n\r\n\r\n# `java.time.ZonedDateTime`\r\n\r\nThe terribly flawed `java.util.Calendar` class has been supplanted by the modern *java.time* classes defined in JSR 310. Specifically replaced by `java.time.ZonedDateTime`. \r\n\r\nA `ZonedDateTime` object represents a date with time-of-day as seen in a particular time zone. \r\n\r\nUnderstand that a time zone is a named history of the changes to the offset used by the people of a particular region as decided by their politicians. An offset is merely a number of hours-minutes-seconds ahead or behind the temporal meridian of UTC.\r\n\r\nTo get the current moment, specify your desired/expected time zone.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Africa/Casablanca&quot; ) ;\r\n    ZonedDateTime zdt = ZonedDateTime.now( z ) ;\r\n\r\nIf you want the JVMs current default time zone, use `ZoneId.systemDefault()`.\r\n\r\nYou can store a `ZonedDateTime` object in a `static` reference. But be aware that such an object stores a frozen moment, is immutable, and does not adjust to later moments. If you want a later moment, call `now` method ago to generate a new fresh `ZonedDateTime` object.\r\n\r\n    private static final ZonedDateTime appLaunched = ZonedDateTime.now( ZoneId.of( &quot;Asia/Tokyo&quot; ) );\r\n\r\n# `java.time.Instant`\r\n\r\nIf you merely want to track a moment, a specific point on the timeline, without business rules explicitly aimed at time zones, use a moment as seen in UTC. For that, use `java.time.Instant` class.\r\n\r\n    private static final Instant instant = Instant.now() ;  // Always in UTC, an offset of zero.\r\n\r\n# Generating localized text\r\n\r\nYou can later apply a time zone for presentation to the user.\r\n\r\n    ZonedDateTime zdt = instant.atZone( ZoneId.systemDefault() ) ;\r\n    String output = \r\n        zdt\r\n        .atZone( ZoneId.systemDefault() )  // Returns a `ZonedDateTime` object.\r\n        .format( \r\n            DateTimeFormatter\r\n            .ofLocalizedDateTime( FormatStyle.FULL )  // Returns a `DateTimeFormatter` object.\r\n            .withLocale( Locale.getDefault() )\r\n        ) ;  // Returns a `String` object.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\r\n  [2]: https://en.wikipedia.org/wiki/Immutable_object\r\n  [3]: https://en.wikipedia.org/wiki/Thread_safety\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html","title":"How to make a static Calendar thread safe","body":"<h1>tl;dr</h1>\n<p><code>Calendar</code> replaced by <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>. <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"nofollow noreferrer\">Immutable</a>, so <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safe</a>.</p>\n<pre><code>private static ZonedDateTime someMoment = ZonedDateTime.now();  // Capture the current moment as seen in the JVMs current default time zone.\n</code></pre>\n<p>If the value is meant to be fixed, unchanging during the execution of your app, mark it <code>final</code>.</p>\n<pre><code>private static final ZonedDateTime someMoment = ZonedDateTime.now();  \n</code></pre>\n<p>If at runtime you might assign a different object, then for thread-safety use an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\"><code>AtomicReference</code></a>.</p>\n<pre><code>private static final AtomicReference&lt; ZonedDateTime &gt; someMomentRef = new AtomicReference&lt;&gt;( ZonedDateTime.now() ) ;\n</code></pre>\n<p>Later updating with a fresh moment.</p>\n<pre><code>someMomentRef.set( ZonedDateTime.now() );\n</code></pre>\n<p>If you need to interoperate with old code not yet updated to <em>java.time</em>, convert.</p>\n<pre><code>ZonedDateTime someMoment = someMomentRef.get() ;\nCalendar c = GregorianCalendar.from( someMoment ) ;  // `GregorianCalendar` is a concrete subclass of `Calendar`.\n</code></pre>\n<h1><code>java.time.ZonedDateTime</code></h1>\n<p>The terribly flawed <code>java.util.Calendar</code> class has been supplanted by the modern <em>java.time</em> classes defined in JSR 310. Specifically replaced by <code>java.time.ZonedDateTime</code>.</p>\n<p>A <code>ZonedDateTime</code> object represents a date with time-of-day as seen in a particular time zone.</p>\n<p>Understand that a time zone is a named history of the changes to the offset used by the people of a particular region as decided by their politicians. An offset is merely a number of hours-minutes-seconds ahead or behind the temporal meridian of UTC.</p>\n<p>To get the current moment, specify your desired/expected time zone.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Africa/Casablanca&quot; ) ;\nZonedDateTime zdt = ZonedDateTime.now( z ) ;\n</code></pre>\n<p>If you want the JVMs current default time zone, use <code>ZoneId.systemDefault()</code>.</p>\n<p>You can store a <code>ZonedDateTime</code> object in a <code>static</code> reference. But be aware that such an object stores a frozen moment, is immutable, and does not adjust to later moments. If you want a later moment, call <code>now</code> method ago to generate a new fresh <code>ZonedDateTime</code> object.</p>\n<pre><code>private static final ZonedDateTime appLaunched = ZonedDateTime.now( ZoneId.of( &quot;Asia/Tokyo&quot; ) );\n</code></pre>\n<h1><code>java.time.Instant</code></h1>\n<p>If you merely want to track a moment, a specific point on the timeline, without business rules explicitly aimed at time zones, use a moment as seen in UTC. For that, use <code>java.time.Instant</code> class.</p>\n<pre><code>private static final Instant instant = Instant.now() ;  // Always in UTC, an offset of zero.\n</code></pre>\n<h1>Generating localized text</h1>\n<p>You can later apply a time zone for presentation to the user.</p>\n<pre><code>ZonedDateTime zdt = instant.atZone( ZoneId.systemDefault() ) ;\nString output = \n    zdt\n    .atZone( ZoneId.systemDefault() )  // Returns a `ZonedDateTime` object.\n    .format( \n        DateTimeFormatter\n        .ofLocalizedDateTime( FormatStyle.FULL )  // Returns a `DateTimeFormatter` object.\n        .withLocale( Locale.getDefault() )\n    ) ;  // Returns a `String` object.\n</code></pre>\n"}],"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12698,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":6245086,"answer_count":6,"score":10,"last_activity_date":1690314229,"creation_date":1307299882,"question_id":6245053,"body_markdown":"I&#39;d like to use a Calendar for some static methods and use a static field:\r\n\r\n    private static Calendar calendar = Calendar.getInstance();\r\n\r\nNow I read java.util.Calendar isn&#39;t thread safe. How can I make this thread safe (it should be **static**)?","title":"How to make a static Calendar thread safe","body":"<p>I'd like to use a Calendar for some static methods and use a static field:</p>\n\n<pre><code>private static Calendar calendar = Calendar.getInstance();\n</code></pre>\n\n<p>Now I read java.util.Calendar isn't thread safe. How can I make this thread safe (it should be <strong>static</strong>)?</p>\n"},{"tags":["java","quarkus","quarkus-rest-client"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1690352313,"post_id":76765016,"comment_id":135339487,"body_markdown":"https://quarkus.io/guides/resteasy-reactive#grouping-parameters-in-a-custom-class. Also https://docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html","body":"<a href=\"https://quarkus.io/guides/resteasy-reactive#grouping-parameters-in-a-custom-class\" rel=\"nofollow noreferrer\">quarkus.io/guides/&hellip;</a>. Also <a href=\"https://docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690313874,"creation_date":1690313874,"answer_id":76766011,"question_id":76765016,"body_markdown":"**TLDR;** BeanParams are not working with Java Records yet.\r\n\r\n Quarkus 3 supports Jakarta EE APIs. The latest JakartaEE 10 specification contains Restful Web Services 3.1 component which is on Java 11.\r\n\r\nAccording to this [discussion on JakartaEE&#39;s GitHub project](https://github.com/jakartaee/rest/issues/913) v4.0 will be supporting Java 17 (or later) \r\n\r\nUsing traditional java class will solve this problem\r\n\r\n```java\r\npublic class ExampleSearchParameters {\r\n    @QueryParam(&quot;query&quot;)\r\n    String searchQuery;\r\n    @QueryParam(&quot;page_size&quot;)\r\n    Integer size;\r\n    @QueryParam(&quot;page_index&quot;)\r\n    Integer from;\r\n}\r\n```\r\n**Don&#39;t forget** to put annotations on fields (e.g. `@QueryParam`).\r\n\r\nNow, this POJO can be injected as a `@BeanParam` like this:\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n    @GET\r\n    public List&lt;String&gt; hello(@BeanParam ExampleSearchParameters filterParams) {\r\n        return List.of(&quot;query:&quot; + filterParams.searchQuery, &quot;size: &quot; + filterParams.size, &quot;from:&quot; + filterParams.from);\r\n    }\r\n}\r\n``` ","title":"How to pass GET query parameters in Quarkus as POJO object?","body":"<p><strong>TLDR;</strong> BeanParams are not working with Java Records yet.</p>\n<p>Quarkus 3 supports Jakarta EE APIs. The latest JakartaEE 10 specification contains Restful Web Services 3.1 component which is on Java 11.</p>\n<p>According to this <a href=\"https://github.com/jakartaee/rest/issues/913\" rel=\"nofollow noreferrer\">discussion on JakartaEE's GitHub project</a> v4.0 will be supporting Java 17 (or later)</p>\n<p>Using traditional java class will solve this problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExampleSearchParameters {\n    @QueryParam(&quot;query&quot;)\n    String searchQuery;\n    @QueryParam(&quot;page_size&quot;)\n    Integer size;\n    @QueryParam(&quot;page_index&quot;)\n    Integer from;\n}\n</code></pre>\n<p><strong>Don't forget</strong> to put annotations on fields (e.g. <code>@QueryParam</code>).</p>\n<p>Now, this POJO can be injected as a <code>@BeanParam</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n    @GET\n    public List&lt;String&gt; hello(@BeanParam ExampleSearchParameters filterParams) {\n        return List.of(&quot;query:&quot; + filterParams.searchQuery, &quot;size: &quot; + filterParams.size, &quot;from:&quot; + filterParams.from);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690313874,"creation_date":1690304682,"question_id":76765016,"body_markdown":"I&#39;m switching from Spring to Quarkus and this doesn&#39;t seem to work the same way.\r\n\r\nThere are classes defined:\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET\r\n  public List&lt;String&gt; search(ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic record ExampleSearchParams(\r\n  String searchQuery,\r\n  Integer size,\r\n  Integer from\r\n) {\r\n}\r\n```\r\nNow after querying URL `/example?size=10` or `/example?size=10&amp;from=10&amp;searchQuery=test` you get HTTP ERROR 415.\r\n\r\nTry 1. According to docs, you need to annotate with `@BeanParam`\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET                    // v HERE\r\n  public List&lt;String&gt; search(@BeanParam ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\nNow the Quarkus app fails to start:\r\n```\r\nERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n\r\n[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: jakarta.enterprise.inject.spi.DeploymentException: Found 3 deployment problems: \r\n\r\n[1] Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\r\n\r\n[2] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\r\n\r\n[3] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\r\n```\r\n\r\nTry 2. Add `@RestQuery` annotations\r\n\r\n```java\r\npublic record ExampleSearchParams(\r\n  @RestQuery\r\n  String searchQuery,\r\n  @RestQuery\r\n  Integer size,\r\n  @RestQuery\r\n  Integer from\r\n) {\r\n}\r\n```\r\nStill the same error on Quarkus app startup.\r\n\r\nTry 3. Use `@RestQuery` directly on object parameter.\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET\r\n  public List&lt;String&gt; search(@RestQuery ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\nAnd the Quarkus app fails to start with error:\r\n```\r\nCaused by: java.lang.RuntimeException: Could not create converter for ExampleSearchParams for method java.util.List&lt;java.lang.String&gt; search()\r\n```\r\n\r\nIn pom.xml there is dependency\r\n```xml\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nAny workaround for this? ","title":"How to pass GET query parameters in Quarkus as POJO object?","body":"<p>I'm switching from Spring to Quarkus and this doesn't seem to work the same way.</p>\n<p>There are classes defined:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET\n  public List&lt;String&gt; search(ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public record ExampleSearchParams(\n  String searchQuery,\n  Integer size,\n  Integer from\n) {\n}\n</code></pre>\n<p>Now after querying URL <code>/example?size=10</code> or <code>/example?size=10&amp;from=10&amp;searchQuery=test</code> you get HTTP ERROR 415.</p>\n<p>Try 1. According to docs, you need to annotate with <code>@BeanParam</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET                    // v HERE\n  public List&lt;String&gt; search(@BeanParam ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<p>Now the Quarkus app fails to start:</p>\n<pre><code>ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n\n[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: jakarta.enterprise.inject.spi.DeploymentException: Found 3 deployment problems: \n\n[1] Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\n\n[2] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\n\n[3] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\n</code></pre>\n<p>Try 2. Add <code>@RestQuery</code> annotations</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record ExampleSearchParams(\n  @RestQuery\n  String searchQuery,\n  @RestQuery\n  Integer size,\n  @RestQuery\n  Integer from\n) {\n}\n</code></pre>\n<p>Still the same error on Quarkus app startup.</p>\n<p>Try 3. Use <code>@RestQuery</code> directly on object parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET\n  public List&lt;String&gt; search(@RestQuery ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<p>And the Quarkus app fails to start with error:</p>\n<pre><code>Caused by: java.lang.RuntimeException: Could not create converter for ExampleSearchParams for method java.util.List&lt;java.lang.String&gt; search()\n</code></pre>\n<p>In pom.xml there is dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Any workaround for this?</p>\n"},{"tags":["java","collections","set","hashset"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1646240414,"post_id":71326401,"comment_id":126075957,"body_markdown":"Have you checked [the documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...))? It doesn&#39;t define a specific implementation class, but describes some properties of that implementation instead. That means that it&#39;s probably implemented via some internal class. Your first example uses [double-brace initialization](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java) which I&#39;d avoid, because it creates classes where no new classes should be needed.","body":"Have you checked <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\">the documentation</a>? It doesn&#39;t define a specific implementation class, but describes some properties of that implementation instead. That means that it&#39;s probably implemented via some internal class. Your first example uses <a href=\"https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java\">double-brace initialization</a> which I&#39;d avoid, because it creates classes where no new classes should be needed."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1646240421,"post_id":71326401,"comment_id":126075961,"body_markdown":"`MySillyTest$1` is an anonymous subclass of `HashSet`;  `Set.of()` is returning an [unmodifiable set](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable) {usually a non-public class, can change depending on version of Java} {source code of `ImmutableCollections` should be distributed together with the JDK, see `lib/src.zip` }","body":"<code>MySillyTest$1</code> is an anonymous subclass of <code>HashSet</code>;  <code>Set.of()</code> is returning an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable set</a> {usually a non-public class, can change depending on version of Java} {source code of <code>ImmutableCollections</code> should be distributed together with the JDK, see <code>lib&#47;src.zip</code> }"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1646241344,"post_id":71326401,"comment_id":126076332,"body_markdown":"[Dont use double brace initialization.](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java)","body":"<a href=\"https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java\">Dont use double brace initialization.</a>"},{"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"score":0,"creation_date":1646291375,"post_id":71326401,"comment_id":126087993,"body_markdown":"@BasilBourque, thanks for pointing this out, I have edited the snippet","body":"@BasilBourque, thanks for pointing this out, I have edited the snippet"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646240591,"creation_date":1646240591,"answer_id":71326488,"question_id":71326401,"body_markdown":"The implementation class resulting from `Set.of(...)` is not guaranteed. It could change depending on the runtime implementation or in future versions. However, some of its characteristics&amp;mdash;chiefly immutability&amp;mdash;are guaranteed.\r\n\r\nWhen you use &quot;double-brace initialization&quot;, you are defining a new anonymous class that derives from the specified type. So `MySillyTest$1` extends `HashSet` because that&#39;s what you specified. Note that double-brace initialization [has problems;][1] I don&#39;t allow it, and I discourage others from using it.\r\n\r\nThe important difference between the two is the immutability resulting from `Set.of(...)`. If you need a mutable set, it&#39;s not an option. But if you can use an immutable set, it provides superior readability and performance.\r\n\r\nEven if you need a mutable set, however, don&#39;t look at double-brace initialization as an alternative to `Set.of(...)`; just use a `HashSet` in the conventional way.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27521360/3474","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<p>The implementation class resulting from <code>Set.of(...)</code> is not guaranteed. It could change depending on the runtime implementation or in future versions. However, some of its characteristicschiefly immutabilityare guaranteed.</p>\n<p>When you use &quot;double-brace initialization&quot;, you are defining a new anonymous class that derives from the specified type. So <code>MySillyTest$1</code> extends <code>HashSet</code> because that's what you specified. Note that double-brace initialization <a href=\"https://stackoverflow.com/a/27521360/3474\">has problems;</a> I don't allow it, and I discourage others from using it.</p>\n<p>The important difference between the two is the immutability resulting from <code>Set.of(...)</code>. If you need a mutable set, it's not an option. But if you can use an immutable set, it provides superior readability and performance.</p>\n<p>Even if you need a mutable set, however, don't look at double-brace initialization as an alternative to <code>Set.of(...)</code>; just use a <code>HashSet</code> in the conventional way.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1690313865,"creation_date":1646240960,"answer_id":71326564,"question_id":71326401,"body_markdown":"# Dont know, dont care\r\n\r\nThe concrete class used by [`Set.of`][1] (and [`List.of`][2], [`Map.of`][3]) is not documented. All we know is that the object returned (a) implements the interface, and (b) is unmodifiable. \r\n\r\nThat is all we need to know. We should not care about the particular concrete class used under the covers. \r\n\r\nBeing of unknown concrete class gives freedom to the implementors of the `of` methods. \r\n\r\n - Those programmers are free to optimize according to the nature of your arguments. For example, if you are passing enum arguments, the highly optimized [`EnumSet`][4] class might be used behind the scenes. \r\n - Those programmers are free to change their concrete class between versions of Java. For example, Java 17 implementation might return one concrete class while Java 18 returns another. \r\n\r\nSo you should **never depend on a particular concrete class** being utilized by the `of`/[`copyOf`][5] methods. \r\n\r\nYou asked:\r\n\r\n&gt; What is the real difference between those two? \r\n\r\nIn your first one, we know the concrete class. And the resulting set is modifiable. \r\n\r\nIn your second one, we do not know the concrete class, nor do we care about the concrete class. And the resulting set is unmodifiable. \r\n\r\n\r\n|Code| Concrete Class |Modifiable|\r\n|:--:|:--:|:--:|\r\n| new HashSet&lt;&gt;() {{ add(&quot;a&quot;); add(&quot;b&quot;); add(&quot;c&quot;); }} | known | modifiable |\r\n| Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; | unknown | unmodifiable |\r\n\r\n# Avoid double-brace\r\n\r\nAs others said, its generally best to avoid double-brace initialization. \r\n\r\nIf you want the convenience of compact literals-style initialization of your modifiable collection, combine with the `of` methods.  You can pass an existing collection to the constructor. \r\n\r\n    Set&lt; String &gt; set =\r\n        new HashSet&lt;&gt;(\r\n            Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; )  // Pass a collection to constructor. \r\n        )\r\n    ;\r\n\r\n    \r\n# But I *do* care \r\n\r\nIf you do care about the specific details of the implementation, then you should not use `Set.of`. The implementation details may vary as discussed above, so you should not rely on a specific implementation with `Set.of`. \r\n\r\nWhen your project has specific needs, you should explicitly choose a particular implementation that meets those needs. You can choose one of the bundled implementations, obtain one from a third-party library such as [*Eclipse Collections*][7] or [Google Guava][8], or write your own. \r\n\r\nTip: You can leverage the convenient syntax of `Set.of` by passing its result to the constructor of your chosen implementation. See the code example above: \r\n\r\n    new HashSet&lt;&gt;( Set.of(  ) )\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V)\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#copyOf(java.util.Collection)\r\n  [6]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [7]: https://eclipse.dev/collections/\r\n  [8]: https://en.wikipedia.org/wiki/Google_Guava","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<h1>Dont know, dont care</h1>\n<p>The concrete class used by <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\"><code>Set.of</code></a> (and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\" rel=\"nofollow noreferrer\"><code>List.of</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V)\" rel=\"nofollow noreferrer\"><code>Map.of</code></a>) is not documented. All we know is that the object returned (a) implements the interface, and (b) is unmodifiable.</p>\n<p>That is all we need to know. We should not care about the particular concrete class used under the covers.</p>\n<p>Being of unknown concrete class gives freedom to the implementors of the <code>of</code> methods.</p>\n<ul>\n<li>Those programmers are free to optimize according to the nature of your arguments. For example, if you are passing enum arguments, the highly optimized <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html\" rel=\"nofollow noreferrer\"><code>EnumSet</code></a> class might be used behind the scenes.</li>\n<li>Those programmers are free to change their concrete class between versions of Java. For example, Java 17 implementation might return one concrete class while Java 18 returns another.</li>\n</ul>\n<p>So you should <strong>never depend on a particular concrete class</strong> being utilized by the <code>of</code>/<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>copyOf</code></a> methods.</p>\n<p>You asked:</p>\n<blockquote>\n<p>What is the real difference between those two?</p>\n</blockquote>\n<p>In your first one, we know the concrete class. And the resulting set is modifiable.</p>\n<p>In your second one, we do not know the concrete class, nor do we care about the concrete class. And the resulting set is unmodifiable.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Code</th>\n<th style=\"text-align: center;\">Concrete Class</th>\n<th style=\"text-align: center;\">Modifiable</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">new HashSet&lt;&gt;() {{ add(&quot;a&quot;); add(&quot;b&quot;); add(&quot;c&quot;); }}</td>\n<td style=\"text-align: center;\">known</td>\n<td style=\"text-align: center;\">modifiable</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</td>\n<td style=\"text-align: center;\">unknown</td>\n<td style=\"text-align: center;\">unmodifiable</td>\n</tr>\n</tbody>\n</table>\n</div><h1>Avoid double-brace</h1>\n<p>As others said, its generally best to avoid double-brace initialization.</p>\n<p>If you want the convenience of compact literals-style initialization of your modifiable collection, combine with the <code>of</code> methods.  You can pass an existing collection to the constructor.</p>\n<pre><code>Set&lt; String &gt; set =\n    new HashSet&lt;&gt;(\n        Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; )  // Pass a collection to constructor. \n    )\n;\n</code></pre>\n<h1>But I <em>do</em> care </h1>\n<p>If you do care about the specific details of the implementation, then you should not use <code>Set.of</code>. The implementation details may vary as discussed above, so you should not rely on a specific implementation with <code>Set.of</code>.</p>\n<p>When your project has specific needs, you should explicitly choose a particular implementation that meets those needs. You can choose one of the bundled implementations, obtain one from a third-party library such as <a href=\"https://eclipse.dev/collections/\" rel=\"nofollow noreferrer\"><em>Eclipse Collections</em></a> or <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a>, or write your own.</p>\n<p>Tip: You can leverage the convenient syntax of <code>Set.of</code> by passing its result to the constructor of your chosen implementation. See the code example above:</p>\n<pre><code>new HashSet&lt;&gt;( Set.of(  ) )\n</code></pre>\n"}],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":894,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":71326564,"answer_count":2,"score":0,"last_activity_date":1690313865,"creation_date":1646240142,"question_id":71326401,"body_markdown":"I wanted to ask - what is the difference between\r\n\r\n    Set&lt;CurrencyType&gt; set1 = new HashSet&lt;&gt;() {{\r\n        add(&quot;a&quot;);\r\n        add(&quot;b&quot;);\r\n        add(&quot;c&quot;);\r\n    }}\r\n\r\nand\r\n\r\n    Set&lt;CurrencyType&gt; set2 = Set.of(\r\n        &quot;a&quot;,\r\n        &quot;b&quot;,\r\n        &quot;c&quot;\r\n    )\r\n\r\nIn debug mode in a @Test named `MySillyTest` (this name will come back very soon) i can see that `set1` is an instance of `MySillyTest$1`, but I assume it is just a `HashSet`. `set2` on the other hand is an instance of `ImmutableCollections$SetN`. What is the real difference between those two? What implementation of `java.util.Set` is `Set.of()` using? Is there a performance/memory usage/cpu usage difference between those two?","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<p>I wanted to ask - what is the difference between</p>\n<pre><code>Set&lt;CurrencyType&gt; set1 = new HashSet&lt;&gt;() {{\n    add(&quot;a&quot;);\n    add(&quot;b&quot;);\n    add(&quot;c&quot;);\n}}\n</code></pre>\n<p>and</p>\n<pre><code>Set&lt;CurrencyType&gt; set2 = Set.of(\n    &quot;a&quot;,\n    &quot;b&quot;,\n    &quot;c&quot;\n)\n</code></pre>\n<p>In debug mode in a @Test named <code>MySillyTest</code> (this name will come back very soon) i can see that <code>set1</code> is an instance of <code>MySillyTest$1</code>, but I assume it is just a <code>HashSet</code>. <code>set2</code> on the other hand is an instance of <code>ImmutableCollections$SetN</code>. What is the real difference between those two? What implementation of <code>java.util.Set</code> is <code>Set.of()</code> using? Is there a performance/memory usage/cpu usage difference between those two?</p>\n"},{"tags":["java","mysql","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690303274,"post_id":76764041,"comment_id":135333385,"body_markdown":"I strongly advise *not* running with a user called &#39;root&#39;. For one thing, you can easily get locked out from the whole server doing that and it&#39;s a PITA to correct that. Create a new user with its own password","body":"I strongly advise <i>not</i> running with a user called &#39;root&#39;. For one thing, you can easily get locked out from the whole server doing that and it&#39;s a PITA to correct that. Create a new user with its own password"}],"answers":[{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690313473,"creation_date":1690313473,"answer_id":76765966,"question_id":76764041,"body_markdown":"I think you forget one property for password. Even though MySQL DB doesn&#39;t have any password you need to pass this property.\r\n\r\n    spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.datasource.username=root\r\n    spring.datasource.password= ","title":"MySQL 8.0 Access denied for user &#39;root&#39;@&#39;localhost&#39; with empty password","body":"<p>I think you forget one property for password. Even though MySQL DB doesn't have any password you need to pass this property.</p>\n<pre><code>spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\nspring.datasource.password= \n</code></pre>\n"}],"owner":{"account_id":1250016,"reputation":865,"user_id":3151513,"accept_rate":60,"display_name":"July"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690313473,"creation_date":1690297477,"question_id":76764041,"body_markdown":"On my Debian system, type \r\n``` mysql -u root  -h localhost -P 3306```\r\nIt can login successfully:\r\n```\r\n\r\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\r\nYour MySQL connection id is 213\r\nServer version: 8.0.33 MySQL Community Server - GPL\r\n\r\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\r\n\r\nOracle is a registered trademark of Oracle Corporation and/or its\r\naffiliates. Other names may be trademarks of their respective\r\nowners.\r\n\r\nType &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.\r\n\r\nmysql&gt; \r\n\r\n```\r\n\r\nBut when I start spring boot 2.5.3 with config like below in application.properties:\r\n```\r\nspring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.username=root\r\n```\r\n\r\nproduced exception like below:\r\n```\r\njava.sql.SQLException: Access denied for user &#39;root&#39;@&#39;localhost&#39;\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"MySQL 8.0 Access denied for user &#39;root&#39;@&#39;localhost&#39; with empty password","body":"<p>On my Debian system, type\n<code> mysql -u root  -h localhost -P 3306</code>\nIt can login successfully:</p>\n<pre><code>\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 213\nServer version: 8.0.33 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql&gt; \n\n</code></pre>\n<p>But when I start spring boot 2.5.3 with config like below in application.properties:</p>\n<pre><code>spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\n</code></pre>\n<p>produced exception like below:</p>\n<pre><code>java.sql.SQLException: Access denied for user 'root'@'localhost'\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","flyway"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690313013,"creation_date":1690313013,"answer_id":76765923,"question_id":76765760,"body_markdown":"The column `dtype` has been added implicitly to the table `users` because it is now the base entity for the `customers`. Hibernate uses it as a discriminator to distinguish between both objects. You should add it to the Flyway script as a TEXT type column.","title":"ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist","body":"<p>The column <code>dtype</code> has been added implicitly to the table <code>users</code> because it is now the base entity for the <code>customers</code>. Hibernate uses it as a discriminator to distinguish between both objects. You should add it to the Flyway script as a TEXT type column.</p>\n"}],"owner":{"account_id":20069788,"reputation":25,"user_id":17535621,"display_name":"Julia_Gubolin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765923,"answer_count":1,"score":0,"last_activity_date":1690313013,"creation_date":1690311443,"question_id":76765760,"body_markdown":"I&#39;m creating an API with Spring Boot (3.1.1), Java, PostgreSQL and Flyway. I started doing the security settings with Spring Security, creating a user that could have 3 roles (ADMIN, USER, CUSTOMER) and the functions of authentication, authorization and get all/update/delete of users worked without problems.\r\nHowever, I wanted Customer to have more attributes than I had put in User, so I created a class called Customer and had it inherit from User. I did this in code and in migration. But now, when I try to register a new user (User, not Customer), it returns the error: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist. I didn&#39;t put this attribute in the users table and I couldn&#39;t resolve the error. I tried to recreate the migrations and the database, but it didn&#39;t work.\r\n\r\n**Class User**\r\n\r\n```\r\npackage com.example.auth.domain.user;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\nimport java.util.List;\r\n\r\n@Table(name = &quot;users&quot;)\r\n@Entity(name = &quot;users&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(of = &quot;id&quot;)\r\npublic class User implements UserDetails {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private String id;\r\n    private String login;\r\n    private String password;\r\n    private UserRole role;\r\n\r\n    public User(String login, String password, UserRole role){\r\n        this.login = login;\r\n        this.password = password;\r\n        this.role = role;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        if(this.role == UserRole.ADMIN){\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;), new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        } \r\n        else if(this.role == UserRole.USER){\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        }\r\n        else{\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return login;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n**Class Customer:**\r\n\r\n```\r\npackage com.example.auth.domain.costumer;\r\n\r\nimport com.example.auth.domain.user.User;\r\nimport com.example.auth.domain.user.UserRole;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Entity(name = &quot;customers&quot;)\r\n@Table(name=&quot;customers&quot;)\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class Customer extends User{\r\n\r\n    private String name;\r\n    private String email;\r\n    private String phone;\r\n    private Integer relationshipTime;\r\n    private Integer age;\r\n    private CustomerContactRole contactorigin;\r\n    private CustomerAccountTypeRole accounttype;\r\n\r\n    public Customer(String login, String password, String name, String email, String phone,\r\n            Integer relationshipTime, Integer age, CustomerContactRole contactOrigin,\r\n            CustomerAccountTypeRole accountType) {\r\n        super(login, password, UserRole.CUSTOMER);\r\n        this.name = name;\r\n        this.email = email;\r\n        this.phone = phone;\r\n        this.relationshipTime = relationshipTime;\r\n        this.age = age;\r\n        this.contactorigin = contactOrigin;\r\n        this.accounttype = accountType;\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Migration: V1__create-product-user-customer-table.sql**\r\n\r\n```\r\nCREATE TABLE product (\r\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\r\n    name TEXT NOT NULL,\r\n    price INTEGER NOT NULL\r\n);\r\nCREATE TABLE users (\r\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\r\n    login TEXT NOT NULL UNIQUE,\r\n    password TEXT NOT NULL,\r\n    role TEXT NOT NULL\r\n);\r\n\r\nCREATE TABLE customers (\r\n    name TEXT NOT NULL UNIQUE,\r\n    email TEXT NOT NULL,\r\n    phone TEXT NOT NULL,\r\n    relationshiptime INTEGER NOT NULL,\r\n    age INTEGER NOT NULL,\r\n    contactorigin TEXT NOT NULL,\r\n    accounttype TEXT NOT NULL\r\n) inherits (users);\r\n```\r\n\r\n**Endpoint that generates de error (when I try to register a new User)**\r\n\r\n```\r\n@PostMapping(&quot;/register&quot;)\r\n    public ResponseEntity&lt;String&gt; register(@RequestBody @Valid RegisterDTO data){\r\n        /*if(this.repository.findByLogin(data.login()) != null) {\r\n            String jooj=&quot;&quot;;\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Wrong acess.&quot;);\r\n        }*/\r\n        \r\n        String encryptedPassword = new BCryptPasswordEncoder().encode(data.password());\r\n        User newUser = new User(data.login(), encryptedPassword, data.role());\r\n\r\n        this.repository.save(newUser);\r\n\r\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Account created sucessfully&quot;);\r\n    }\r\n```\r\n\r\n**Error**\r\n\r\n```\r\nServlet.service() for \r\nservlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\r\n  Posi&#254;&#210;o: 40] [insert into users (login,password,role,dtype,id) values (?,?,?,&#39;users&#39;,?)]; SQL [insert into users (login,password,role,dtype,id) values (?,?,?,&#39;users&#39;,?)]] with root cause\r\n\r\norg.postgresql.util.PSQLException: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\r\n  Posi&#231;&#227;o: 40```","title":"ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist","body":"<p>I'm creating an API with Spring Boot (3.1.1), Java, PostgreSQL and Flyway. I started doing the security settings with Spring Security, creating a user that could have 3 roles (ADMIN, USER, CUSTOMER) and the functions of authentication, authorization and get all/update/delete of users worked without problems.\nHowever, I wanted Customer to have more attributes than I had put in User, so I created a class called Customer and had it inherit from User. I did this in code and in migration. But now, when I try to register a new user (User, not Customer), it returns the error: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist. I didn't put this attribute in the users table and I couldn't resolve the error. I tried to recreate the migrations and the database, but it didn't work.</p>\n<p><strong>Class User</strong></p>\n<pre><code>package com.example.auth.domain.user;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.List;\n\n@Table(name = &quot;users&quot;)\n@Entity(name = &quot;users&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(of = &quot;id&quot;)\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private String id;\n    private String login;\n    private String password;\n    private UserRole role;\n\n    public User(String login, String password, UserRole role){\n        this.login = login;\n        this.password = password;\n        this.role = role;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        if(this.role == UserRole.ADMIN){\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;), new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        } \n        else if(this.role == UserRole.USER){\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        }\n        else{\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        }\n    }\n\n    @Override\n    public String getUsername() {\n        return login;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p><strong>Class Customer:</strong></p>\n<pre><code>package com.example.auth.domain.costumer;\n\nimport com.example.auth.domain.user.User;\nimport com.example.auth.domain.user.UserRole;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Entity(name = &quot;customers&quot;)\n@Table(name=&quot;customers&quot;)\n@AllArgsConstructor\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Customer extends User{\n\n    private String name;\n    private String email;\n    private String phone;\n    private Integer relationshipTime;\n    private Integer age;\n    private CustomerContactRole contactorigin;\n    private CustomerAccountTypeRole accounttype;\n\n    public Customer(String login, String password, String name, String email, String phone,\n            Integer relationshipTime, Integer age, CustomerContactRole contactOrigin,\n            CustomerAccountTypeRole accountType) {\n        super(login, password, UserRole.CUSTOMER);\n        this.name = name;\n        this.email = email;\n        this.phone = phone;\n        this.relationshipTime = relationshipTime;\n        this.age = age;\n        this.contactorigin = contactOrigin;\n        this.accounttype = accountType;\n    }\n\n}\n</code></pre>\n<p><strong>Migration: V1__create-product-user-customer-table.sql</strong></p>\n<pre><code>CREATE TABLE product (\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\n    name TEXT NOT NULL,\n    price INTEGER NOT NULL\n);\nCREATE TABLE users (\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\n    login TEXT NOT NULL UNIQUE,\n    password TEXT NOT NULL,\n    role TEXT NOT NULL\n);\n\nCREATE TABLE customers (\n    name TEXT NOT NULL UNIQUE,\n    email TEXT NOT NULL,\n    phone TEXT NOT NULL,\n    relationshiptime INTEGER NOT NULL,\n    age INTEGER NOT NULL,\n    contactorigin TEXT NOT NULL,\n    accounttype TEXT NOT NULL\n) inherits (users);\n</code></pre>\n<p><strong>Endpoint that generates de error (when I try to register a new User)</strong></p>\n<pre><code>@PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;String&gt; register(@RequestBody @Valid RegisterDTO data){\n        /*if(this.repository.findByLogin(data.login()) != null) {\n            String jooj=&quot;&quot;;\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Wrong acess.&quot;);\n        }*/\n        \n        String encryptedPassword = new BCryptPasswordEncoder().encode(data.password());\n        User newUser = new User(data.login(), encryptedPassword, data.role());\n\n        this.repository.save(newUser);\n\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Account created sucessfully&quot;);\n    }\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>Servlet.service() for \nservlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\n  Posio: 40] [insert into users (login,password,role,dtype,id) values (?,?,?,'users',?)]; SQL [insert into users (login,password,role,dtype,id) values (?,?,?,'users',?)]] with root cause\n\norg.postgresql.util.PSQLException: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\n  Posio: 40```\n</code></pre>\n"},{"tags":["java","sorting","hazelcast","predicates"],"answers":[{"tags":[],"owner":{"account_id":1116483,"reputation":515,"user_id":1105694,"accept_rate":83,"display_name":"h.i"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1430553715,"creation_date":1430553715,"answer_id":29999885,"question_id":29968146,"body_markdown":"i ran a few tests with pagingpredicate and it did exactly what i wanted.\r\n\r\npagesize should be selected carefully. small page size with big data can cause huge number of comparisons with lots of data travel between hazelcast nodes.\r\n\r\nat the end, all the items in the resulting collection are perfectly sorted, including the ones in any given page of course.\r\n\r\nhope someone will find it useful.","title":"Have hazelcast predicate return sorted collection","body":"<p>i ran a few tests with pagingpredicate and it did exactly what i wanted.</p>\n\n<p>pagesize should be selected carefully. small page size with big data can cause huge number of comparisons with lots of data travel between hazelcast nodes.</p>\n\n<p>at the end, all the items in the resulting collection are perfectly sorted, including the ones in any given page of course.</p>\n\n<p>hope someone will find it useful.</p>\n"},{"tags":[],"owner":{"account_id":6415158,"reputation":382,"user_id":4973598,"display_name":"Sunil K-Standard Chartered"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690312760,"creation_date":1690312760,"answer_id":76765894,"question_id":29968146,"body_markdown":"In the Hazelcast document for 4.2 API, it says,\r\n\r\nHazelcast provides paging for defined predicates. With its PagingPredicate interface, you can get a collection of keys, values, or entries page by page by filtering them with predicates and giving the size of the pages. Also, **you can sort the entries by specifying comparators.**\r\n\r\nRefer the page, \r\nhttps://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates\r\n\r\nBTW, I am currently working on developing a rest api on top of a IMap that stores hazelcast Json object which isnt the same as specified above in documentation. Shall revert on the hazelcast json object.","title":"Have hazelcast predicate return sorted collection","body":"<p>In the Hazelcast document for 4.2 API, it says,</p>\n<p>Hazelcast provides paging for defined predicates. With its PagingPredicate interface, you can get a collection of keys, values, or entries page by page by filtering them with predicates and giving the size of the pages. Also, <strong>you can sort the entries by specifying comparators.</strong></p>\n<p>Refer the page,\n<a href=\"https://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates</a></p>\n<p>BTW, I am currently working on developing a rest api on top of a IMap that stores hazelcast Json object which isnt the same as specified above in documentation. Shall revert on the hazelcast json object.</p>\n"}],"owner":{"account_id":1116483,"reputation":515,"user_id":1105694,"accept_rate":83,"display_name":"h.i"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1890,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29999885,"answer_count":2,"score":1,"last_activity_date":1690312760,"creation_date":1430397966,"question_id":29968146,"body_markdown":"is there a way to get a sorted collection from a hazelcast predicate? i have found that hazelcast offers a pagingpredicate for this purpose but i am not interested in the paging behavior (at least for now).\r\n\r\neven if one does use this pagingpredicate, does it make sure that the whole collection is sorted and not just the items in a particular page? and also if there is any way to disable the paging completely?\r\n\r\ni am interested in getting the results in sorted form and not in sorting the distributed data structure.\r\n\r\nthank you","title":"Have hazelcast predicate return sorted collection","body":"<p>is there a way to get a sorted collection from a hazelcast predicate? i have found that hazelcast offers a pagingpredicate for this purpose but i am not interested in the paging behavior (at least for now).</p>\n\n<p>even if one does use this pagingpredicate, does it make sure that the whole collection is sorted and not just the items in a particular page? and also if there is any way to disable the paging completely?</p>\n\n<p>i am interested in getting the results in sorted form and not in sorting the distributed data structure.</p>\n\n<p>thank you</p>\n"},{"tags":["java","database","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1690035541,"post_id":76743880,"comment_id":135298284,"body_markdown":"Why do you want it on order?","body":"Why do you want it on order?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690049035,"post_id":76743880,"comment_id":135300004,"body_markdown":"Why not if it can be displayed in some default order that a person prefer to see ?","body":"Why not if it can be displayed in some default order that a person prefer to see ?"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690047911,"creation_date":1690042789,"answer_id":76744775,"question_id":76743880,"body_markdown":"Because you configure Hibernate to auto-generate and create the table schema by setting `spring.jpa.hibernate.ddl-auto` to `create-drop`. It has its own rule to determine the order of the columns in the generated create tables DDL which the has nothing to do with the order of fields in the related entity Java class.\r\n\r\nSince hibernate 6.2 , it provides a way to customize the column order in the generated DDL through `ColumnOrderingStrategy` but the behaviour you want still not support out of the box. \r\n\r\nIf you want to take back the total control about defining the column order in the tables , you have to manually create the table by yourself rather than rely on Hibernate to do it. You have to set `spring.jpa.hibernate.ddl-auto` to `none` to tell Hibernate not to do that.\r\n\r\n*Note: consider to use the DB schema management tool such as [`Flyway`][1] or [`Liquibase`][2] to manage all schema changes for any serious production application.*\r\n\r\n\r\n  [1]: https://flywaydb.org/\r\n  [2]: https://www.liquibase.org/","title":"How to change the DB table column order using Spring + Sping Data JPA + Hibernate","body":"<p>Because you configure Hibernate to auto-generate and create the table schema by setting <code>spring.jpa.hibernate.ddl-auto</code> to <code>create-drop</code>. It has its own rule to determine the order of the columns in the generated create tables DDL which the has nothing to do with the order of fields in the related entity Java class.</p>\n<p>Since hibernate 6.2 , it provides a way to customize the column order in the generated DDL through <code>ColumnOrderingStrategy</code> but the behaviour you want still not support out of the box.</p>\n<p>If you want to take back the total control about defining the column order in the tables , you have to manually create the table by yourself rather than rely on Hibernate to do it. You have to set <code>spring.jpa.hibernate.ddl-auto</code> to <code>none</code> to tell Hibernate not to do that.</p>\n<p><em>Note: consider to use the DB schema management tool such as <a href=\"https://flywaydb.org/\" rel=\"nofollow noreferrer\"><code>Flyway</code></a> or <a href=\"https://www.liquibase.org/\" rel=\"nofollow noreferrer\"><code>Liquibase</code></a> to manage all schema changes for any serious production application.</em></p>\n"}],"owner":{"account_id":26571773,"reputation":15,"user_id":20197889,"display_name":"Oleg Khandozhko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76744775,"answer_count":1,"score":1,"last_activity_date":1690312354,"creation_date":1690030334,"question_id":76743880,"body_markdown":"actually i am trying to learn something using this tutorial - \r\nhttps://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s\r\n\r\nNow i connect my new DB with my Sping(Java) something.\r\nBut. I don&#39;t understand why in RUN output in IJ and SQL Shell shows wrong order of lines.\r\n**The first line in column should be ID.\r\nAfter should go - name,email, date,age.**\r\n\r\nIn reality it shows - age,date,id,email,name. How can i change it? Please, help.\r\n\r\n\r\nExample from SQL Shell - \r\n\r\n```\r\n Column |          Type          | Collation | Nullable | Default\r\n--------+------------------------+-----------+----------+---------\r\n age    | integer                |           |          |\r\n dob    | date                   |           |          |\r\n id     | bigint                 |           | not null |\r\n email  | character varying(255) |           |          |\r\n name   | character varying(255) |           |          |\r\nIndexes:\r\n    &quot;student_pkey&quot; PRIMARY KEY, btree (id)\r\n```\r\n\r\nMy Student class - \r\n\r\n```\r\n\r\n@Entity\r\n@Table\r\npublic class Student {\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;student_sequence&quot;,\r\n            sequenceName = &quot;student_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;student_sequence&quot;\r\n    )\r\n    private Long id;\r\n    private String name;\r\n    private String email;\r\n    private LocalDate dob;\r\n    private Integer age;\r\n\r\n    public Student() {\r\n    }\r\n\r\n    public Student(Long id, String name, String email, LocalDate dob, Integer age) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.email = email;\r\n        this.dob = dob;\r\n        this.age = age;\r\n    }\r\n\r\n    public Student(String name, String email, LocalDate dob, Integer age) {\r\n        this.name = name;\r\n        this.email = email;\r\n        this.dob = dob;\r\n        this.age = age;\r\n    }\r\n\r\nGetters,Setters and to String\r\n\r\n```\r\n\r\nI try to change long to Long and nothing else. I don&#39;t know how to change order of lines here. It looks like everything is fine.","title":"How to change the DB table column order using Spring + Sping Data JPA + Hibernate","body":"<p>actually i am trying to learn something using this tutorial -\n<a href=\"https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s</a></p>\n<p>Now i connect my new DB with my Sping(Java) something.\nBut. I don't understand why in RUN output in IJ and SQL Shell shows wrong order of lines.\n<strong>The first line in column should be ID.\nAfter should go - name,email, date,age.</strong></p>\n<p>In reality it shows - age,date,id,email,name. How can i change it? Please, help.</p>\n<p>Example from SQL Shell -</p>\n<pre><code> Column |          Type          | Collation | Nullable | Default\n--------+------------------------+-----------+----------+---------\n age    | integer                |           |          |\n dob    | date                   |           |          |\n id     | bigint                 |           | not null |\n email  | character varying(255) |           |          |\n name   | character varying(255) |           |          |\nIndexes:\n    &quot;student_pkey&quot; PRIMARY KEY, btree (id)\n</code></pre>\n<p>My Student class -</p>\n<pre><code>\n@Entity\n@Table\npublic class Student {\n\n    @Id\n    @SequenceGenerator(\n            name = &quot;student_sequence&quot;,\n            sequenceName = &quot;student_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;student_sequence&quot;\n    )\n    private Long id;\n    private String name;\n    private String email;\n    private LocalDate dob;\n    private Integer age;\n\n    public Student() {\n    }\n\n    public Student(Long id, String name, String email, LocalDate dob, Integer age) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.dob = dob;\n        this.age = age;\n    }\n\n    public Student(String name, String email, LocalDate dob, Integer age) {\n        this.name = name;\n        this.email = email;\n        this.dob = dob;\n        this.age = age;\n    }\n\nGetters,Setters and to String\n\n</code></pre>\n<p>I try to change long to Long and nothing else. I don't know how to change order of lines here. It looks like everything is fine.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1690098916,"post_id":76747138,"comment_id":135303606,"body_markdown":"What&#39;s your import statement for `Type`?","body":"What&#39;s your import statement for <code>Type</code>?"},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690100001,"post_id":76747138,"comment_id":135303708,"body_markdown":"import org.hibernate.annotations.Type;","body":"import org.hibernate.annotations.Type;"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690102131,"creation_date":1690100834,"answer_id":76747285,"question_id":76747138,"body_markdown":"Guess that you are using Hibernate 6 ?\r\n\r\nIf yes, the source codes you show is for Hibernate 5 or before. Hibernate 6 has the breaking change in the type system , there are no more `type` attribute in the `@Type` , you have to migrate it to use the related JPA standard `AttributeConverter` (i.e `YesNoConverter`) according to the [migration guide][1] : \r\n\r\n&gt; Hibernate now provides standard AttributeConverter implementations for\r\n&gt; handling different database representations as boolean values in the\r\n&gt; domain model\r\n\r\nChange to the following should solve your problem : \r\n\r\n``` java\r\n @Convert(converter=YesNoConverter.class)\r\n private Boolean completed;\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html#_boolean_converters","title":"JPA @Type annotation &quot;Cannot resolve method &#39;type&#39; &quot;","body":"<p>Guess that you are using Hibernate 6 ?</p>\n<p>If yes, the source codes you show is for Hibernate 5 or before. Hibernate 6 has the breaking change in the type system , there are no more <code>type</code> attribute in the <code>@Type</code> , you have to migrate it to use the related JPA standard <code>AttributeConverter</code> (i.e <code>YesNoConverter</code>) according to the <a href=\"https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html#_boolean_converters\" rel=\"nofollow noreferrer\">migration guide</a> :</p>\n<blockquote>\n<p>Hibernate now provides standard AttributeConverter implementations for\nhandling different database representations as boolean values in the\ndomain model</p>\n</blockquote>\n<p>Change to the following should solve your problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Convert(converter=YesNoConverter.class)\n private Boolean completed;\n</code></pre>\n"}],"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76747285,"answer_count":1,"score":0,"last_activity_date":1690312334,"creation_date":1690098355,"question_id":76747138,"body_markdown":"I was working on a project and found that on the @Type interface, there is no method called type. Is there any way to resolve the error? \r\n\r\n\r\n[![Cannot resolve method &#39;type&#39;][1]][1]\r\n\r\n    @Entity\r\n    @Table(name = &quot;Delivery_Table&quot;)\r\n    public class Delivery {\r\n        @Id\r\n        @GeneratedValue\r\n        @Column(name = &quot;Delivery_Id&quot;)\r\n        private Long id;\r\n    \r\n        @Nationalized\r\n        private String name;\r\n        @Column(name = &quot;address_full&quot;,length = 500)\r\n        private String address;\r\n        private LocalTime Delivery_time;\r\n        //Problem occurs here\r\n        //Configuration on pom.xml used JPA where Hibernate is already there\r\n        @Type(type = &quot;yes_no&quot;)\r\n        private Boolean completed;\r\n    \r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/8JAbF.png","title":"JPA @Type annotation &quot;Cannot resolve method &#39;type&#39; &quot;","body":"<p>I was working on a project and found that on the @Type interface, there is no method called type. Is there any way to resolve the error?</p>\n<p><a href=\"https://i.stack.imgur.com/8JAbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8JAbF.png\" alt=\"Cannot resolve method 'type'\" /></a></p>\n<pre><code>@Entity\n@Table(name = &quot;Delivery_Table&quot;)\npublic class Delivery {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;Delivery_Id&quot;)\n    private Long id;\n\n    @Nationalized\n    private String name;\n    @Column(name = &quot;address_full&quot;,length = 500)\n    private String address;\n    private LocalTime Delivery_time;\n    //Problem occurs here\n    //Configuration on pom.xml used JPA where Hibernate is already there\n    @Type(type = &quot;yes_no&quot;)\n    private Boolean completed;\n\n}\n</code></pre>\n"},{"tags":["java","design-patterns","decimalformat"],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690312119,"creation_date":1690312119,"answer_id":76765824,"question_id":76765528,"body_markdown":"In case &quot;f&quot;, the zero shows up because Java prints a `0` if it&#39;s not guaranteed that there is a fraction part to print.  The below code is taken from [JDK 17 source code for `DecimalFormat`][1].  Because you have all `#` after the decimal point, `minFraDigits` is `0` so it can&#39;t assume that a fraction is present.  It apparently doesn&#39;t see that there is a fraction part to print yet.  It guards against printing nothing if the value is zero.\r\n\r\n```\r\n\r\n// Determine whether or not there are any printable fractional\r\n// digits.  If we&#39;ve used up the digits we know there aren&#39;t.\r\nboolean fractionPresent = (minFraDigits &gt; 0) ||\r\n        (!isInteger &amp;&amp; digitIndex &lt; digitList.count);\r\n\r\n// If there is no fraction present, and we haven&#39;t printed any\r\n// integer digits, then print a zero.  Otherwise we won&#39;t print\r\n// _any_ digits, and we won&#39;t be able to parse this string.\r\nif (!fractionPresent &amp;&amp; result.length() == sizeBeforeIntegerPart) {\r\n    result.append(zero);\r\n}\r\n```\r\n\r\nThe case &quot;g&quot; format is an invalid format.  You can&#39;t have a `0`\r\nfurther from the decimal point than a `#`.  It&#39;s enforced in the\r\nparsing grammar in the [`DecimalFormat` javadocs][2].  For the\r\nFraction part, the zeros must come first if they exist, followed by\r\noptional `#`s.\r\n\r\n&gt; _Fraction_:&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_MinimumFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; _OptionalFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; \r\n&gt; _MinimumFraction_:&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0\r\n&gt; _MinimumFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; \r\n&gt; OptionalFraction:&lt;br&gt;\r\n&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#\r\n&gt; _OptionalFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n\r\nAnother part of the grammar similar to this enforces that _before_ the decimal point, any `#`s must be before any `0`s, the reverse of after the decimal point.\r\n\r\n\r\n[1]: https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/text/DecimalFormat.java\r\n[2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DecimalFormat.html\r\n","title":"Java DecimalFormat pattern, differences between # and 0","body":"<p>In case &quot;f&quot;, the zero shows up because Java prints a <code>0</code> if it's not guaranteed that there is a fraction part to print.  The below code is taken from <a href=\"https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/text/DecimalFormat.java\" rel=\"nofollow noreferrer\">JDK 17 source code for <code>DecimalFormat</code></a>.  Because you have all <code>#</code> after the decimal point, <code>minFraDigits</code> is <code>0</code> so it can't assume that a fraction is present.  It apparently doesn't see that there is a fraction part to print yet.  It guards against printing nothing if the value is zero.</p>\n<pre><code>\n// Determine whether or not there are any printable fractional\n// digits.  If we've used up the digits we know there aren't.\nboolean fractionPresent = (minFraDigits &gt; 0) ||\n        (!isInteger &amp;&amp; digitIndex &lt; digitList.count);\n\n// If there is no fraction present, and we haven't printed any\n// integer digits, then print a zero.  Otherwise we won't print\n// _any_ digits, and we won't be able to parse this string.\nif (!fractionPresent &amp;&amp; result.length() == sizeBeforeIntegerPart) {\n    result.append(zero);\n}\n</code></pre>\n<p>The case &quot;g&quot; format is an invalid format.  You can't have a <code>0</code>\nfurther from the decimal point than a <code>#</code>.  It's enforced in the\nparsing grammar in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\"><code>DecimalFormat</code> javadocs</a>.  For the\nFraction part, the zeros must come first if they exist, followed by\noptional <code>#</code>s.</p>\n<blockquote>\n<p><em>Fraction</em>:<br> <em>MinimumFraction</em><sub><em>opt</em></sub>\n<em>OptionalFraction</em><sub><em>opt</em></sub></p>\n<p><em>MinimumFraction</em>:<br> 0\n<em>MinimumFraction</em><sub><em>opt</em></sub></p>\n<p>OptionalFraction:<br>\n#\n<em>OptionalFraction</em><sub><em>opt</em></sub></p>\n</blockquote>\n<p>Another part of the grammar similar to this enforces that <em>before</em> the decimal point, any <code>#</code>s must be before any <code>0</code>s, the reverse of after the decimal point.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76765824,"answer_count":1,"score":1,"last_activity_date":1690312119,"creation_date":1690309182,"question_id":76765528,"body_markdown":"I have the following code:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String pattern = &quot;.00&quot;;         // a) =&gt; |.46|\r\n    //        String pattern = &quot;.##&quot;;       // b) =&gt; |.46|\r\n    //        String pattern = &quot;.0#&quot;;       // c) =&gt; |.46|\r\n    //        String pattern = &quot;#.00&quot;;      // d) =&gt; |.46|\r\n    //        String pattern = &quot;#.0#&quot;;      // e) =&gt; |.46|\r\n    //        String pattern = &quot;#.##&quot;;      // f) =&gt; |0.46|\r\n    //        String pattern = &quot;.#0&quot;;       // g) =&gt; IllegalArgumentException: Malformed pattern &quot;.#0&quot;\r\n\r\n        double value = 0.456;\r\n        DecimalFormat df = (DecimalFormat) NumberFormat.getNumberInstance(Locale.US);\r\n        df.applyPattern(pattern);\r\n        String output = df.format(value);\r\n        System.out.printf(&quot;|%s|&quot;, output);\r\n       }  \r\n    }\r\n\r\nCould someone explain that why in f) the zero before decimal point still displays while d) and e) don&#39;t even though they are all have a &#39;#&#39; before decimal point in the pattern? Also, what could be the reason for the exception in g) as it seems to me a valid pattern?","title":"Java DecimalFormat pattern, differences between # and 0","body":"<p>I have the following code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        String pattern = &quot;.00&quot;;         // a) =&gt; |.46|\n//        String pattern = &quot;.##&quot;;       // b) =&gt; |.46|\n//        String pattern = &quot;.0#&quot;;       // c) =&gt; |.46|\n//        String pattern = &quot;#.00&quot;;      // d) =&gt; |.46|\n//        String pattern = &quot;#.0#&quot;;      // e) =&gt; |.46|\n//        String pattern = &quot;#.##&quot;;      // f) =&gt; |0.46|\n//        String pattern = &quot;.#0&quot;;       // g) =&gt; IllegalArgumentException: Malformed pattern &quot;.#0&quot;\n\n    double value = 0.456;\n    DecimalFormat df = (DecimalFormat) NumberFormat.getNumberInstance(Locale.US);\n    df.applyPattern(pattern);\n    String output = df.format(value);\n    System.out.printf(&quot;|%s|&quot;, output);\n   }  \n}\n</code></pre>\n<p>Could someone explain that why in f) the zero before decimal point still displays while d) and e) don't even though they are all have a '#' before decimal point in the pattern? Also, what could be the reason for the exception in g) as it seems to me a valid pattern?</p>\n"},{"tags":["java","date","localtime"],"comments":[{"owner":{"account_id":1755242,"reputation":867,"user_id":1970214,"display_name":"Rafael R. S. Robles"},"score":0,"creation_date":1430246909,"post_id":29927362,"comment_id":47976827,"body_markdown":"First is first, what version of Java are we talking about?","body":"First is first, what version of Java are we talking about?"},{"owner":{"account_id":4000003,"reputation":4365,"user_id":3296266,"accept_rate":92,"display_name":"Stanko"},"score":0,"creation_date":1430247013,"post_id":29927362,"comment_id":47976885,"body_markdown":"@RafaelR.S.Robles JDK 1.8","body":"@RafaelR.S.Robles JDK 1.8"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":2,"up_vote_count":14,"is_accepted":true,"score":12,"last_activity_date":1430246964,"creation_date":1430246964,"answer_id":29927527,"question_id":29927362,"body_markdown":"Your input is effectively a `LocalDateTime`. It would be much simpler to simply parse that to a `LocalDateTime` and then get the `LocalTime` from that. No time zones to worry about, no somewhat-legacy classes (avoid `Date` and `Calendar` where possible...)\r\n\r\n    import java.time.*;\r\n    import java.time.format.*;\r\n    import java.util.*;\r\n    \r\n    public class Test {\r\n        \r\n        public static void main(String[] args) {\r\n            DateTimeFormatter formatter =\r\n                DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;, Locale.US);\r\n            \r\n            String text = &quot;2011-02-18 05:00:00.0&quot;;\r\n            LocalDateTime localDateTime = LocalDateTime.parse(text, formatter);\r\n            LocalTime localTime = localDateTime.toLocalTime();\r\n            System.out.println(localTime);\r\n        }\r\n    }","title":"LocalTime from Date","body":"<p>Your input is effectively a <code>LocalDateTime</code>. It would be much simpler to simply parse that to a <code>LocalDateTime</code> and then get the <code>LocalTime</code> from that. No time zones to worry about, no somewhat-legacy classes (avoid <code>Date</code> and <code>Calendar</code> where possible...)</p>\n\n<pre><code>import java.time.*;\nimport java.time.format.*;\nimport java.util.*;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        DateTimeFormatter formatter =\n            DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss.S\", Locale.US);\n\n        String text = \"2011-02-18 05:00:00.0\";\n        LocalDateTime localDateTime = LocalDateTime.parse(text, formatter);\n        LocalTime localTime = localDateTime.toLocalTime();\n        System.out.println(localTime);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4624062"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430247047,"creation_date":1430247047,"answer_id":29927556,"question_id":29927362,"body_markdown":"Try this&lt;br/&gt;\r\n\r\n        String datestring = &quot;2011-02-18 05:00:00.0&quot;;\r\n        SimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);//take a look at MM\r\n        Date date = dt.parse(datestring );\r\n        Instant instant = Instant.ofEpochMilli(date.getTime());\r\n        LocalTime res = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();","title":"LocalTime from Date","body":"<p>Try this<br/></p>\n\n<pre><code>    String datestring = \"2011-02-18 05:00:00.0\";\n    SimpleDateFormat dt = new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\");//take a look at MM\n    Date date = dt.parse(datestring );\n    Instant instant = Instant.ofEpochMilli(date.getTime());\n    LocalTime res = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3140002,"reputation":892,"user_id":2655624,"display_name":"johanwannheden"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1589787256,"creation_date":1475658891,"answer_id":39869935,"question_id":29927362,"body_markdown":"This is also quite simple:\r\n\r\n    LocalTime time = LocalDateTime.ofInstant(new Date().toInstant(),\r\n        ZoneId.systemDefault()).toLocalTime();\r\n\r\n","title":"LocalTime from Date","body":"<p>This is also quite simple:</p>\n\n<pre><code>LocalTime time = LocalDateTime.ofInstant(new Date().toInstant(),\n    ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1475709334,"creation_date":1475707643,"answer_id":39884840,"question_id":29927362,"body_markdown":"The [accepted Answer by Jon Skeet][1] is correct. This Answer expands on those ideas.\r\n\r\n# Avoid legacy date-time classes\r\n\r\nSome of the other Answers, and the Question, mix the old legacy date-time classes with the new. That is unnecessary and bad practice. The whole point of the [java.time][2] classes is to *replace* the troublesome and confusing old classes.\r\n\r\n - You do *not* need `java.util.Date`. \r\n - You do *not* need `java.util.Calendar`.\r\n\r\n# `LocalDateTime`\r\n\r\nYour input string lacks any information about offset-from-UTC or time zone. So we parse it as a [`LocalDateTime`][3] object.\r\n\r\nTo parse, we replace the SPACE in the middle with a `T` to comply with the [ISO 8601][4] standard for date-time formats.\r\n\r\n    String input = &quot;2011-02-18 05:00:00.0&quot;.replace( &quot; &quot; , &quot;T&quot; );\r\n    LocalDateTime ldt = LocalDateTime.parse( input );\r\n\r\n# `LocalTime`\r\n\r\nTo focus on the time-of-day without the date, ask for a [`LocalTime`][5].\r\n\r\n    LocalTime lt = ldt.toLocalTime();\r\n\r\n# `ZonedDateTime`\r\n\r\nNote that none of this are actual moments, not a point on the timeline. Without the context of an offset-from-UTC or a time zone, we do not know if you meant 5 AM in Auckland NZ or 5 AM in Kolkata IN or 5 AM in Paris France or 5 AM in Montr&#233;al Qu&#233;bec. Each of those would be very different moments in time.\r\n\r\nIf by context you do know for certain the intended time zone, apply it. Apply a [`ZoneId`][6] to get a [`ZonedDateTime`][7].\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Montreal&quot; );\r\n    ZonedDateTime zdt = ldt.atZone( z );\r\n\r\nFrom there, ask for the `LocalTime` if desired.\r\n\r\n    LocalTime lt = zdt.toLocalTime(); \r\n\r\n# `Instant`\r\n\r\nIf you want to see that same moment in [UTC][8], extract an `Instant`. The [`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) class represents a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) with a resolution of [nanoseconds](https://en.wikipedia.org/wiki/Nanosecond) (up to nine (9) digits of a decimal fraction).\r\n\r\nGenerally best to focus on [UTC][8] in much of your business logic, logging, data storage, and data exchange. Learn to think of UTC as The One True Time.\r\n\r\n    Instant instant = zdt.toInstant();  // Same moment, shifted to UTC.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29927527/642706\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\r\n  [4]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\r\n  [8]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time","title":"LocalTime from Date","body":"<p>The <a href=\"https://stackoverflow.com/a/29927527/642706\">accepted Answer by Jon Skeet</a> is correct. This Answer expands on those ideas.</p>\n\n<h1>Avoid legacy date-time classes</h1>\n\n<p>Some of the other Answers, and the Question, mix the old legacy date-time classes with the new. That is unnecessary and bad practice. The whole point of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes is to <em>replace</em> the troublesome and confusing old classes.</p>\n\n<ul>\n<li>You do <em>not</em> need <code>java.util.Date</code>. </li>\n<li>You do <em>not</em> need <code>java.util.Calendar</code>.</li>\n</ul>\n\n<h1><code>LocalDateTime</code></h1>\n\n<p>Your input string lacks any information about offset-from-UTC or time zone. So we parse it as a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a> object.</p>\n\n<p>To parse, we replace the SPACE in the middle with a <code>T</code> to comply with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard for date-time formats.</p>\n\n<pre><code>String input = \"2011-02-18 05:00:00.0\".replace( \" \" , \"T\" );\nLocalDateTime ldt = LocalDateTime.parse( input );\n</code></pre>\n\n<h1><code>LocalTime</code></h1>\n\n<p>To focus on the time-of-day without the date, ask for a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a>.</p>\n\n<pre><code>LocalTime lt = ldt.toLocalTime();\n</code></pre>\n\n<h1><code>ZonedDateTime</code></h1>\n\n<p>Note that none of this are actual moments, not a point on the timeline. Without the context of an offset-from-UTC or a time zone, we do not know if you meant 5 AM in Auckland NZ or 5 AM in Kolkata IN or 5 AM in Paris France or 5 AM in Montral Qubec. Each of those would be very different moments in time.</p>\n\n<p>If by context you do know for certain the intended time zone, apply it. Apply a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\" rel=\"nofollow noreferrer\"><code>ZoneId</code></a> to get a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>.</p>\n\n<pre><code>ZoneId z = ZoneId.of( \"America/Montreal\" );\nZonedDateTime zdt = ldt.atZone( z );\n</code></pre>\n\n<p>From there, ask for the <code>LocalTime</code> if desired.</p>\n\n<pre><code>LocalTime lt = zdt.toLocalTime(); \n</code></pre>\n\n<h1><code>Instant</code></h1>\n\n<p>If you want to see that same moment in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>, extract an <code>Instant</code>. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class represents a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a> (up to nine (9) digits of a decimal fraction).</p>\n\n<p>Generally best to focus on <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> in much of your business logic, logging, data storage, and data exchange. Learn to think of UTC as The One True Time.</p>\n\n<pre><code>Instant instant = zdt.toInstant();  // Same moment, shifted to UTC.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690311653,"creation_date":1689689860,"answer_id":76713736,"question_id":29927362,"body_markdown":"You can parse your date-time string into a `LocalTime` directly\r\n--\r\n\r\n**Solution using `java.time`, the modern Date-Time API&lt;sup&gt;*&lt;/sup&gt;:**\r\n\r\nHaving formatted the given date-time string into [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format, you can parse it to `LocalTime` directly using `DateTimeFormatter.ISO_LOCAL_DATE_TIME`.\r\n\r\nAlternatively, you can use the pattern `u-M-d H:m:s.S` with `DateTimeFormatter` to parse the given date-time string directly into `LocalTime`. \r\n\r\n**Demo:**\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            LocalTime time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;.replace(&#39; &#39;, &#39;T&#39;), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\r\n            System.out.println(time);\r\n    \r\n            // Alternatively,\r\n            time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;, DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH));\r\n            System.out.println(time);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    05:00\r\n    05:00\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/wPE3ub)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n---\r\n&lt;sup&gt;* The `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html).&lt;/sup&gt;","title":"LocalTime from Date","body":"<h2>You can parse your date-time string into a <code>LocalTime</code> directly</h2>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API<sup>*</sup>:</strong></p>\n<p>Having formatted the given date-time string into <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format, you can parse it to <code>LocalTime</code> directly using <code>DateTimeFormatter.ISO_LOCAL_DATE_TIME</code>.</p>\n<p>Alternatively, you can use the pattern <code>u-M-d H:m:s.S</code> with <code>DateTimeFormatter</code> to parse the given date-time string directly into <code>LocalTime</code>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        LocalTime time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;.replace(' ', 'T'), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\n        System.out.println(time);\n\n        // Alternatively,\n        time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;, DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH));\n        System.out.println(time);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>05:00\n05:00\n</code></pre>\n<p><a href=\"https://ideone.com/wPE3ub\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</sup></p>\n"}],"owner":{"account_id":4000003,"reputation":4365,"user_id":3296266,"accept_rate":92,"display_name":"Stanko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43865,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":29927527,"answer_count":5,"score":20,"last_activity_date":1690311653,"creation_date":1430246405,"question_id":29927362,"body_markdown":"I&#39;m trying to convert a `Date` instance to a `LocalTime` instance.\r\n\r\n    // Create the Date\r\n    Date date = format.parse(&quot;2011-02-18 05:00:00.0&quot;);    \r\n    \r\n    // Convert to Calendar\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTime(date);\r\n\r\n    // Convert Calendar to LocalTime\r\n    Instant instant = Instant.ofEpochMilli(cal.getTimeInMillis());\r\n    LocalTime convert = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\r\n\r\nI don&#39;t get a compiler error but the `LocalTime` instance values are wrong.\r\n\r\n\r\nI think it does not work because `Date` stores time in `fasttime` instead of `cdate`.\r\n\r\nI&#39;m using JDK version 1.8.","title":"LocalTime from Date","body":"<p>I'm trying to convert a <code>Date</code> instance to a <code>LocalTime</code> instance.</p>\n\n<pre><code>// Create the Date\nDate date = format.parse(\"2011-02-18 05:00:00.0\");    \n\n// Convert to Calendar\nCalendar cal = Calendar.getInstance();\ncal.setTime(date);\n\n// Convert Calendar to LocalTime\nInstant instant = Instant.ofEpochMilli(cal.getTimeInMillis());\nLocalTime convert = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n\n<p>I don't get a compiler error but the <code>LocalTime</code> instance values are wrong.</p>\n\n<p>I think it does not work because <code>Date</code> stores time in <code>fasttime</code> instead of <code>cdate</code>.</p>\n\n<p>I'm using JDK version 1.8.</p>\n"},{"tags":["java","postgresql","hibernate","auto-increment"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689661071,"post_id":76709961,"comment_id":135241094,"body_markdown":"You didn&#39;t specify a strategy on the `@Id` field. There should be an `@GeneratedValue` on there to indiciate to hibernate that the database will generate the identifier.","body":"You didn&#39;t specify a strategy on the <code>@Id</code> field. There should be an <code>@GeneratedValue</code> on there to indiciate to hibernate that the database will generate the identifier."},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1689661397,"post_id":76709961,"comment_id":135241146,"body_markdown":"If you create the column as `id bigint GENERATED ALWAYS AS IDENTITY PRIMARY KEY`, you&#39;ll see that Hibernate tries to insert.","body":"If you create the column as <code>id bigint GENERATED ALWAYS AS IDENTITY PRIMARY KEY</code>, you&#39;ll see that Hibernate tries to insert."},{"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":" "},"score":0,"creation_date":1689662461,"post_id":76709961,"comment_id":135241320,"body_markdown":"@M. Deinum When I added the &#39;@GeneratedValue&#39; annotation, I got the following error\n\nCaused by: org.postgresql.util.PSQLException: ERROR: &quot;newtable_seq&quot; relationship does not exist\n  Position: 16","body":"@M. Deinum When I added the &#39;@GeneratedValue&#39; annotation, I got the following error  Caused by: org.postgresql.util.PSQLException: ERROR: &quot;newtable_seq&quot; relationship does not exist   Position: 16"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689662639,"post_id":76709961,"comment_id":135241349,"body_markdown":"You need to tell it it uses IDENTITY not AUTO or SEQUENCE.","body":"You need to tell it it uses IDENTITY not AUTO or SEQUENCE."},{"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":" "},"score":0,"creation_date":1689663708,"post_id":76709961,"comment_id":135241549,"body_markdown":"@M. Deinum I cannot thank you enough!","body":"@M. Deinum I cannot thank you enough!"}],"answers":[{"tags":[],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":" "},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690311225,"creation_date":1689956745,"answer_id":76739678,"question_id":76709961,"body_markdown":" \r\nAnswer from [M. Deinum][1]:\r\n\r\nYou didn&#39;t specify a strategy on the `@Id` field. There should be an `@GeneratedValue` on there to indicate to Hibernate that the database will generate the identifier.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2696260/m-deinum","title":"Auto incrementing does not occur when adding an item in PostgreSQL using Hibernate","body":"<p>Answer from <a href=\"https://stackoverflow.com/users/2696260/m-deinum\">M. Deinum</a>:</p>\n<p>You didn't specify a strategy on the <code>@Id</code> field. There should be an <code>@GeneratedValue</code> on there to indicate to Hibernate that the database will generate the identifier.</p>\n"}],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":" "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76739678,"answer_count":1,"score":0,"last_activity_date":1690311225,"creation_date":1689660894,"question_id":76709961,"body_markdown":"I created a table in PostgeSQL with data for a person and marked the column &quot;id&quot; with the type &#39;SERIAL&#39; as &#39;primary key&#39;, &#39;not null&#39;\r\n\r\nCREATE Script:\r\n\r\n    \r\n    CREATE TABLE people (\r\n      id serial NOT NULL,\r\n      name varchar(15),\r\n      surname varchar(25),\r\n      department varchar(20),\r\n      salary int,\r\n      PRIMARY KEY (id)\r\n    );\r\nThen I created an Entity class for my table \r\n\r\n\r\n    package hibernate_test.entity;\r\n    import jakarta.persistence.*;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;people&quot;)\r\n    public class Employee {\r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        @Column(name = &quot;surname&quot;)\r\n        private String surname;\r\n        @Column(name = &quot;department&quot;)\r\n        private String department;\r\n        @Column(name = &quot;salary&quot;)\r\n        private int salary;\r\n    \r\n        public Employee() {\r\n        }\r\n    \r\n        public Employee(String name, String surname, String department, int salary) {\r\n            this.name = name;\r\n            this.surname = surname;\r\n            this.department = department;\r\n            this.salary = salary;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Employee{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, surname=&#39;&quot; + surname + &#39;\\&#39;&#39; +\r\n                    &quot;, department=&#39;&quot; + department + &#39;\\&#39;&#39; +\r\n                    &quot;, salary=&quot; + salary +\r\n                    &#39;}&#39;;\r\n        }\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getSurname() {\r\n            return surname;\r\n        }\r\n    \r\n        public void setSurname(String surname) {\r\n            this.surname = surname;\r\n        }\r\n    \r\n        public String getDepartment() {\r\n            return department;\r\n        }\r\n    \r\n        public void setDepartment(String department) {\r\n            this.department = department;\r\n        }\r\n    \r\n        public int getSalary() {\r\n            return salary;\r\n        }\r\n    \r\n        public void setSalary(int salary) {\r\n            this.salary = salary;\r\n        }\r\n    }\r\n\r\nNext, I wrote a program that adds a record to my table\r\n\r\n    package hibernate_test;\r\n    \r\n    import hibernate_test.entity.Employee;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    public class Test1 {\r\n        public static void main(String[] args) {\r\n            SessionFactory factory = new Configuration()\r\n                    .configure(&quot;hibernate.cfg.xml&quot;)\r\n                    .addAnnotatedClass(Employee.class)\r\n                    .buildSessionFactory();\r\n    \r\n            Session session = factory.getCurrentSession();\r\n            Employee emp = new Employee(&quot;Jack&quot;, &quot;Jack&quot;, &quot;IT&quot;, 5000);\r\n    \r\n            try {\r\n                session.beginTransaction();\r\n                session.save(emp);\r\n                session.getTransaction().commit();\r\n    \r\n            }finally {\r\n                factory.close();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nWhen I run this code, the first record is added to the table, but the id is at index 0. I think the index should start at 1 because I specified the type &#39;SERIAL&#39; in the id. \r\nWhen I try to add another item, an error occurs:\r\n\r\n    09:09:05.911 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.6.Final\r\n    09:09:05.916 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\r\n    09:09:06.366 [main] WARN org.hibernate.orm.connections.pooling -- HHH10001002: Using built-in connection pool (not intended for production use)\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001005: Loaded JDBC driver class: org.postgresql.Driver\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001012: Connecting with JDBC URL [jdbc:postgresql://127.0.0.1:5432/learnhbn]\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001001: Connection properties: {password=****, user=postgres}\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001003: Autocommit mode: false\r\n    09:09:06.373 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001115: Connection pool size: 20 (min=1)\r\n    09:09:06.796 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\r\n    Hibernate: insert into people (department,name,salary,surname,id) values (?,?,?,?,?)\r\n    09:09:07.648 [main] WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- SQL Error: 0, SQLState: 23505\r\n    09:09:07.648 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- :       &quot;people_pkey&quot;\r\n      :  (id)=(0)  .\r\n    09:09:07.656 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001008: Cleaning up connection pool [jdbc:postgresql://127.0.0.1:5432/learnhbn]\r\n    Exception in thread &quot;main&quot; org.hibernate.exception.ConstraintViolationException: could not execute statement [:       &quot;people_pkey&quot;\r\n      :  (id)=(0)  .] [insert into people (department,name,salary,surname,id) values (?,?,?,?,?)]\r\n    \tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:95)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:108)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:53)\r\n    \tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\r\n    \tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2761)\r\n    \tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:633)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502)\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n    \tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2301)\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1966)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n    \tat hibernate_test.Test1.main(Test1.java:21)\r\n    Caused by: org.postgresql.util.PSQLException: :       &quot;people_pkey&quot;\r\n      :  (id)=(0)  .\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n    \tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n    \tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)\r\n    \t... 21 more\r\n    \r\n    Process finished with exit code 1\r\n\r\nThe error indicates that there can&#39;t be two records with index 0, but I don&#39;t pass any id value directly to the constructor. Hibernate should increment the id to one itself, and ideally start with one\r\n\r\nI will be glad if you can help me figure out where I am making a mistake","title":"Auto incrementing does not occur when adding an item in PostgreSQL using Hibernate","body":"<p>I created a table in PostgeSQL with data for a person and marked the column &quot;id&quot; with the type 'SERIAL' as 'primary key', 'not null'</p>\n<p>CREATE Script:</p>\n<pre><code>CREATE TABLE people (\n  id serial NOT NULL,\n  name varchar(15),\n  surname varchar(25),\n  department varchar(20),\n  salary int,\n  PRIMARY KEY (id)\n);\n</code></pre>\n<p>Then I created an Entity class for my table</p>\n<pre><code>package hibernate_test.entity;\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;people&quot;)\npublic class Employee {\n    @Id\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;surname&quot;)\n    private String surname;\n    @Column(name = &quot;department&quot;)\n    private String department;\n    @Column(name = &quot;salary&quot;)\n    private int salary;\n\n    public Employee() {\n    }\n\n    public Employee(String name, String surname, String department, int salary) {\n        this.name = name;\n        this.surname = surname;\n        this.department = department;\n        this.salary = salary;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, surname='&quot; + surname + '\\'' +\n                &quot;, department='&quot; + department + '\\'' +\n                &quot;, salary=&quot; + salary +\n                '}';\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSurname() {\n        return surname;\n    }\n\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n\n    public String getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(String department) {\n        this.department = department;\n    }\n\n    public int getSalary() {\n        return salary;\n    }\n\n    public void setSalary(int salary) {\n        this.salary = salary;\n    }\n}\n</code></pre>\n<p>Next, I wrote a program that adds a record to my table</p>\n<pre><code>package hibernate_test;\n\nimport hibernate_test.entity.Employee;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\npublic class Test1 {\n    public static void main(String[] args) {\n        SessionFactory factory = new Configuration()\n                .configure(&quot;hibernate.cfg.xml&quot;)\n                .addAnnotatedClass(Employee.class)\n                .buildSessionFactory();\n\n        Session session = factory.getCurrentSession();\n        Employee emp = new Employee(&quot;Jack&quot;, &quot;Jack&quot;, &quot;IT&quot;, 5000);\n\n        try {\n            session.beginTransaction();\n            session.save(emp);\n            session.getTransaction().commit();\n\n        }finally {\n            factory.close();\n        }\n\n    }\n}\n</code></pre>\n<p>When I run this code, the first record is added to the table, but the id is at index 0. I think the index should start at 1 because I specified the type 'SERIAL' in the id.\nWhen I try to add another item, an error occurs:</p>\n<pre><code>09:09:05.911 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.6.Final\n09:09:05.916 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\n09:09:06.366 [main] WARN org.hibernate.orm.connections.pooling -- HHH10001002: Using built-in connection pool (not intended for production use)\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001005: Loaded JDBC driver class: org.postgresql.Driver\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001012: Connecting with JDBC URL [jdbc:postgresql://127.0.0.1:5432/learnhbn]\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001001: Connection properties: {password=****, user=postgres}\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001003: Autocommit mode: false\n09:09:06.373 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001115: Connection pool size: 20 (min=1)\n09:09:06.796 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\nHibernate: insert into people (department,name,salary,surname,id) values (?,?,?,?,?)\n09:09:07.648 [main] WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- SQL Error: 0, SQLState: 23505\n09:09:07.648 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- :       &quot;people_pkey&quot;\n  :  (id)=(0)  .\n09:09:07.656 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001008: Cleaning up connection pool [jdbc:postgresql://127.0.0.1:5432/learnhbn]\nException in thread &quot;main&quot; org.hibernate.exception.ConstraintViolationException: could not execute statement [:       &quot;people_pkey&quot;\n  :  (id)=(0)  .] [insert into people (department,name,salary,surname,id) values (?,?,?,?,?)]\n    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:95)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:108)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:53)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2761)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:633)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2301)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1966)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at hibernate_test.Test1.main(Test1.java:21)\nCaused by: org.postgresql.util.PSQLException: :       &quot;people_pkey&quot;\n  :  (id)=(0)  .\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\n    at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)\n    ... 21 more\n\nProcess finished with exit code 1\n</code></pre>\n<p>The error indicates that there can't be two records with index 0, but I don't pass any id value directly to the constructor. Hibernate should increment the id to one itself, and ideally start with one</p>\n<p>I will be glad if you can help me figure out where I am making a mistake</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":29089873,"reputation":1,"user_id":22284008,"display_name":"Denis Lobanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690311140,"creation_date":1690311140,"answer_id":76765723,"question_id":76765178,"body_markdown":"Can use @WithMockUser in IT.\r\n\r\nor\r\n\r\ncreate customMockUser\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @WithSecurityContext(factory = CustomUserSecurityContextFactory.class)\r\n    public @interface CustomMockUser {\r\n    \r\n    \tString username() default &quot;user&quot;;\r\n    \r\n    \tString userId() default &quot;&quot;;\r\n    \r\n    \t@AliasFor(annotation = WithSecurityContext.class)\r\n    \tTestExecutionEvent setupBefore() default TestExecutionEvent.TEST_EXECUTION;\r\n    }\r\n\r\nand \r\n\r\n    public class CustomUserSecurityContextFactory implements WithSecurityContextFactory&lt;CustomMockUser&gt; {\r\n\r\n\t@Override\r\n\tpublic SecurityContext createSecurityContext(CustomMockUser withUser) {\r\n\t\tJwtAuthenticationToken authentication = new JwtAuthenticationToken(Jwt.withTokenValue(UUID.randomUUID().toString())\r\n\t\t\t\t\t\t.claim(KeycloakAuthToken.SESSION_ID_CLAIM, UUID.randomUUID().toString())\r\n\t\t\t\t\t\t.claim(KeycloakAuthToken.USER_LOGIN_CLAIM, withUser.username())\r\n\t\t\t\t\t\t.header(&quot;typ&quot;, &quot;JWT&quot;)\r\n\t\t\t\t\t\t.build());\r\n\r\n\t\tSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\t\tcontext.setAuthentication(authentication);\r\n\t\treturn context;\r\n\t}\r\n    }","title":"Migrating from Spring security oauth to spring security core 6.1.0 getting &#39;principalName cannot be empty&#39; error","body":"<p>Can use @WithMockUser in IT.</p>\n<p>or</p>\n<p>create customMockUser</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@WithSecurityContext(factory = CustomUserSecurityContextFactory.class)\npublic @interface CustomMockUser {\n\n    String username() default &quot;user&quot;;\n\n    String userId() default &quot;&quot;;\n\n    @AliasFor(annotation = WithSecurityContext.class)\n    TestExecutionEvent setupBefore() default TestExecutionEvent.TEST_EXECUTION;\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class CustomUserSecurityContextFactory implements WithSecurityContextFactory&lt;CustomMockUser&gt; {\n\n@Override\npublic SecurityContext createSecurityContext(CustomMockUser withUser) {\n    JwtAuthenticationToken authentication = new JwtAuthenticationToken(Jwt.withTokenValue(UUID.randomUUID().toString())\n                    .claim(KeycloakAuthToken.SESSION_ID_CLAIM, UUID.randomUUID().toString())\n                    .claim(KeycloakAuthToken.USER_LOGIN_CLAIM, withUser.username())\n                    .header(&quot;typ&quot;, &quot;JWT&quot;)\n                    .build());\n\n    SecurityContext context = SecurityContextHolder.createEmptyContext();\n    context.setAuthentication(authentication);\n    return context;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":29089628,"reputation":1,"user_id":22283810,"display_name":"Cole Gvozdas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690311140,"creation_date":1690305904,"question_id":76765178,"body_markdown":"I am working on migrating from spring security oauth to spring security core and I just changed our securityfilter chain that used to look like\r\n\r\n\r\n```\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n\r\n/** Security configuration for the application */\r\n@Configuration\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception {\r\n    http.csrf().disable().authorizeRequests().anyRequest().permitAll();\r\n  }\r\n}\r\n```\r\nbut now i have changed it to look like this (essentially just getting rid of the deprecated stuff\r\n```\r\n@Configuration\r\npublic class SecurityConfig {\r\n\r\n  @Bean\r\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.csrf(AbstractHttpConfigurer::disable).authorizeHttpRequests(auth -&gt; auth.anyRequest().permitAll());\r\n    return http.build();\r\n  }\r\n}\r\n\r\n```\r\nnow whenever i run an integration test or make a request on our api I receive the error below coming from loadAuthorizedClient function in the *InMemoryOAuth2AuthorizedClientService* file from the spring security apache libraries\r\n```\r\njava.lang.IllegalArgumentException: principalName cannot be empty\r\n\tat org.springframework.util.Assert.hasText(Assert.java:294)\r\n```\r\nnot sure how to set this or even possibly disable it\r\n\r\n\r\nNot even sure where to begin.  I tried setting a principal and it still comes up as null.  I tried writing another bean to overwrite the one from their library with something that has a test principalname, and a few other methods.  Most stack overflow suggestions ive seen on similar posts say to use a bunch of libraries that are all deprecated/non-existent in spring security core 6.  The released migration guide from spring security core is not helpful either.","title":"Migrating from Spring security oauth to spring security core 6.1.0 getting &#39;principalName cannot be empty&#39; error","body":"<p>I am working on migrating from spring security oauth to spring security core and I just changed our securityfilter chain that used to look like</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n/** Security configuration for the application */\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests().anyRequest().permitAll();\n  }\n}\n</code></pre>\n<p>but now i have changed it to look like this (essentially just getting rid of the deprecated stuff</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.csrf(AbstractHttpConfigurer::disable).authorizeHttpRequests(auth -&gt; auth.anyRequest().permitAll());\n    return http.build();\n  }\n}\n\n</code></pre>\n<p>now whenever i run an integration test or make a request on our api I receive the error below coming from loadAuthorizedClient function in the <em>InMemoryOAuth2AuthorizedClientService</em> file from the spring security apache libraries</p>\n<pre><code>java.lang.IllegalArgumentException: principalName cannot be empty\n    at org.springframework.util.Assert.hasText(Assert.java:294)\n</code></pre>\n<p>not sure how to set this or even possibly disable it</p>\n<p>Not even sure where to begin.  I tried setting a principal and it still comes up as null.  I tried writing another bean to overwrite the one from their library with something that has a test principalname, and a few other methods.  Most stack overflow suggestions ive seen on similar posts say to use a bunch of libraries that are all deprecated/non-existent in spring security core 6.  The released migration guide from spring security core is not helpful either.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":1917892,"reputation":1091,"user_id":1730078,"accept_rate":100,"display_name":"schumacher574"},"score":1,"creation_date":1615790336,"post_id":66623708,"comment_id":117790268,"body_markdown":"What sort of Exception is occurring?  Try printing e&#39;s message or stack trace.","body":"What sort of Exception is occurring?  Try printing e&#39;s message or stack trace."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1615811755,"post_id":66623708,"comment_id":117798593,"body_markdown":"Please don&#39;t swallow exceptions. Either let them bubble up, wrap them, or at the very minimum, log the actual exception (e.g. `e.printStackTrace()`, or better yet, using a logging library).","body":"Please don&#39;t swallow exceptions. Either let them bubble up, wrap them, or at the very minimum, log the actual exception (e.g. <code>e.printStackTrace()</code>, or better yet, using a logging library)."}],"answers":[{"tags":[],"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615807157,"creation_date":1615807157,"answer_id":66636983,"question_id":66623708,"body_markdown":"The `root` mysql account is configured to only allow a connection from the PC running the MySQL Server. For obvious security reasons.\r\n\r\n\r\nI suggest you go to the WAMPServer machine and login to MySQL as root, then create a new account, that is NOT a Super User account and HAS password. Using `phpMyAdmin` for this is probably easiest.\r\n\r\nThen configure the domain for this account to allow connections from your network only (192.168.1) note only 3 of the 4 quartiles used will allow access from any IP in your network, but only from within your network. Allocate only the required privileges on the specific databases required, to the new account.\r\n\r\nThen use this new account in your Java code.\r\n\r\n","title":"Connect to a remote database server instead of localhost","body":"<p>The <code>root</code> mysql account is configured to only allow a connection from the PC running the MySQL Server. For obvious security reasons.</p>\n<p>I suggest you go to the WAMPServer machine and login to MySQL as root, then create a new account, that is NOT a Super User account and HAS password. Using <code>phpMyAdmin</code> for this is probably easiest.</p>\n<p>Then configure the domain for this account to allow connections from your network only (192.168.1) note only 3 of the 4 quartiles used will allow access from any IP in your network, but only from within your network. Allocate only the required privileges on the specific databases required, to the new account.</p>\n<p>Then use this new account in your Java code.</p>\n"}],"owner":{"account_id":17655752,"reputation":1,"user_id":12815396,"display_name":"Rod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690310928,"creation_date":1615719659,"question_id":66623708,"body_markdown":"I&#39;m trying to connect to my WAMP sever by using its IP address in my LAN. So far I have written the following code, and I don&#39;t understand why it does not establish the connection.\r\n\r\n    public class DBConnect {    \r\n        public static Connection connect()\r\n        {\r\n            Connection con=null;\r\n            try {\r\n                Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                con=(Connection) DriverManager.getConnection(&quot;jdbc:mysql://192.168.1.2:3306/employee101?&quot;,&quot;root&quot;,&quot;&quot;);\r\n                JOptionPane.showMessageDialog(null, &quot;Connection Success&quot;);\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;inter.DBConnect.connect()&quot;);\r\n            }\r\n            return con;\r\n        }    \r\n    }","title":"Connect to a remote database server instead of localhost","body":"<p>I'm trying to connect to my WAMP sever by using its IP address in my LAN. So far I have written the following code, and I don't understand why it does not establish the connection.</p>\n<pre><code>public class DBConnect {    \n    public static Connection connect()\n    {\n        Connection con=null;\n        try {\n            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n            con=(Connection) DriverManager.getConnection(&quot;jdbc:mysql://192.168.1.2:3306/employee101?&quot;,&quot;root&quot;,&quot;&quot;);\n            JOptionPane.showMessageDialog(null, &quot;Connection Success&quot;);\n        } catch (Exception e) {\n            System.out.println(&quot;inter.DBConnect.connect()&quot;);\n        }\n        return con;\n    }    \n}\n</code></pre>\n"},{"tags":["java","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690310749,"creation_date":1690296428,"answer_id":76763878,"question_id":76761703,"body_markdown":"Don&#39;t close the `CloseableHttpClient`. It doesn&#39;t have any claimed resources itself, that all goes through the connection manager.\r\n\r\nAlternatively, call `setConnectionManagerShared(true)` on the builder. From its API documentation:\r\n&gt; Defines the connection manager is to be shared by multiple client instances.\r\n&gt;\r\n&gt; If the connection manager is shared its life-cycle is expected to be managed by the caller and it will not be shut down if the client is closed.\r\n","title":"correct way to use PoolingHttpClientConnectionManager in HttpClient4 getting issue java.lang.IllegalStateException: Connection pool shut down","body":"<p>Don't close the <code>CloseableHttpClient</code>. It doesn't have any claimed resources itself, that all goes through the connection manager.</p>\n<p>Alternatively, call <code>setConnectionManagerShared(true)</code> on the builder. From its API documentation:</p>\n<blockquote>\n<p>Defines the connection manager is to be shared by multiple client instances.</p>\n<p>If the connection manager is shared its life-cycle is expected to be managed by the caller and it will not be shut down if the client is closed.</p>\n</blockquote>\n"}],"owner":{"account_id":27891295,"reputation":25,"user_id":21297617,"display_name":"ketan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763878,"answer_count":1,"score":0,"last_activity_date":1690310749,"creation_date":1690280282,"question_id":76761703,"body_markdown":"I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. I want to use connectionPooling for improved performance but I am not able to find a proper way to do it.\r\n\r\n\r\nI am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. Below is a code sample illustrating how I set up the connection manager and use it to obtain an instance of the CloseableHttpClient:\r\n\r\n```java\r\n// Setting up the connection manager\r\nstatic PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\r\n\r\n// Getting the CloseableHttpClient using the same connection manager\r\nCloseableHttpClient httpClient = HttpClients.custom()\r\n                                .setConnectionManager(connectionManager)\r\n                                .build();\r\n```\r\n\r\nHowever, after using the httpClient and then closing it, I encountered the following error on trying to get a new httpClient from the connectionManager:\r\n\r\n```\r\njava.lang.IllegalStateException: Connection pool shut down\r\n```\r\n\r\nUpon investigation, I discovered that closing the CloseableHttpClient also closes the connection manager, leading to this issue.\r\n\r\nI understand that connection pooling is recommended when obtaining an httpClient. However, the current behavior poses a question: How can we reuse the same connection manager to get an httpClient if closing the httpClient also closes the connection manager? Additionally, if we cannot reuse the same connection manager, then how does connection pooling work effectively?","title":"correct way to use PoolingHttpClientConnectionManager in HttpClient4 getting issue java.lang.IllegalStateException: Connection pool shut down","body":"<p>I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. I want to use connectionPooling for improved performance but I am not able to find a proper way to do it.</p>\n<p>I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. Below is a code sample illustrating how I set up the connection manager and use it to obtain an instance of the CloseableHttpClient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Setting up the connection manager\nstatic PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\n\n// Getting the CloseableHttpClient using the same connection manager\nCloseableHttpClient httpClient = HttpClients.custom()\n                                .setConnectionManager(connectionManager)\n                                .build();\n</code></pre>\n<p>However, after using the httpClient and then closing it, I encountered the following error on trying to get a new httpClient from the connectionManager:</p>\n<pre><code>java.lang.IllegalStateException: Connection pool shut down\n</code></pre>\n<p>Upon investigation, I discovered that closing the CloseableHttpClient also closes the connection manager, leading to this issue.</p>\n<p>I understand that connection pooling is recommended when obtaining an httpClient. However, the current behavior poses a question: How can we reuse the same connection manager to get an httpClient if closing the httpClient also closes the connection manager? Additionally, if we cannot reuse the same connection manager, then how does connection pooling work effectively?</p>\n"},{"tags":["java","oracle","jdbc","datasource"],"comments":[{"owner":{"account_id":74118,"reputation":49342,"user_id":213136,"accept_rate":100,"display_name":"Bob Jarvis -  "},"score":0,"creation_date":1552046899,"post_id":55062845,"comment_id":96873795,"body_markdown":"Have you tried `dataSource.SetAutoCommit(false)`?","body":"Have you tried <code>dataSource.SetAutoCommit(false)</code>?"},{"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"score":0,"creation_date":1552046957,"post_id":55062845,"comment_id":96873820,"body_markdown":"OracleDatasource if don&#39;t have setautocommit. Connection has it","body":"OracleDatasource if don&#39;t have setautocommit. Connection has it"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1552051767,"post_id":55062845,"comment_id":96876367,"body_markdown":"Why do you think that the Oracle datasource has a property called AutoCommit? In any case, if `-Doracle.jdbc.autoCommitSpecCompliant=false` works, have you tried using `props.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;,  &quot;false&quot;)`?","body":"Why do you think that the Oracle datasource has a property called AutoCommit? In any case, if <code>-Doracle.jdbc.autoCommitSpecCompliant=false</code> works, have you tried using <code>props.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;,  &quot;false&quot;)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1552051986,"creation_date":1552051986,"answer_id":55064299,"question_id":55062845,"body_markdown":"Solution:\r\n\r\n    public DataSource getDefaultDataSource() throws SQLException {\r\n    \tOracleDataSource dataSource = new OracleDataSource();\r\n    \tdataSource.setUser(userName);\r\n    \tdataSource.setPassword(password);\r\n    \tdataSource.setURL(wallet);\r\n    \tProperties props = new Properties();\r\n    \tprops.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;, &quot;false&quot;);\r\n    \tdataSource.setConnectionProperties(props );\r\n    \treturn dataSource;\r\n    }","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>Solution:</p>\n\n<pre><code>public DataSource getDefaultDataSource() throws SQLException {\n    OracleDataSource dataSource = new OracleDataSource();\n    dataSource.setUser(userName);\n    dataSource.setPassword(password);\n    dataSource.setURL(wallet);\n    Properties props = new Properties();\n    props.put(\"oracle.jdbc.autoCommitSpecCompliant\", \"false\");\n    dataSource.setConnectionProperties(props );\n    return dataSource;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690310545,"creation_date":1690310545,"answer_id":76765674,"question_id":55062845,"body_markdown":"The value should be a String not a Boolean:\r\n\r\n    props.put(OracleConnection.CONNECTION_PROPERTY_AUTOCOMMIT, &quot;false&quot;); \r\n\r\n","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>The value should be a String not a Boolean:</p>\n<pre><code>props.put(OracleConnection.CONNECTION_PROPERTY_AUTOCOMMIT, &quot;false&quot;); \n</code></pre>\n"}],"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3534,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690310545,"creation_date":1552046509,"question_id":55062845,"body_markdown":"I have this bean:\r\n\r\n    public DataSource getDatsource() throws SQLException {\r\n\t\tOracleDataSource dataSource = new OracleDataSource();\r\n\t\tdataSource.setUser(userName);\r\n\t\tdataSource.setPassword(password);\r\n\t\tdataSource.setURL(wallet);\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(&quot;AutoCommit&quot;, false); // not working\r\n\t\tdataSource.setConnectionProperties(props );\r\n\t\treturn dataSource;\r\n\t}\r\n\r\nI would set up datasource like all the connection generated from it, has auto commit to false.\r\n\r\nHow can I do it?\r\n\r\nPS I know `-Doracle.jdbc.autoCommitSpecCompliant=false` and works, but I would set the property hard coded.\r\n\r\nThanks.","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>I have this bean:</p>\n\n<pre><code>public DataSource getDatsource() throws SQLException {\n    OracleDataSource dataSource = new OracleDataSource();\n    dataSource.setUser(userName);\n    dataSource.setPassword(password);\n    dataSource.setURL(wallet);\n    Properties props = new Properties();\n    props.put(\"AutoCommit\", false); // not working\n    dataSource.setConnectionProperties(props );\n    return dataSource;\n}\n</code></pre>\n\n<p>I would set up datasource like all the connection generated from it, has auto commit to false.</p>\n\n<p>How can I do it?</p>\n\n<p>PS I know <code>-Doracle.jdbc.autoCommitSpecCompliant=false</code> and works, but I would set the property hard coded.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","swagger","spring-boot-actuator"],"owner":{"account_id":1538531,"reputation":3761,"user_id":1433826,"accept_rate":51,"display_name":"reiley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690310342,"creation_date":1690310342,"question_id":76765646,"body_markdown":"I am upgrading spring boot to `2.7.13` &amp; `JDK17`.\r\n\r\nThen I ran into a common problem with `Springfox`, which I solved using this [post][1]. (tl;dr defining `WebMvcEndpointHandlerMapping` bean)\r\n\r\n\r\nIn my project I&#39;m exposing by health endpoint on `8081`.\r\n\r\n    management.server.port: 8081\r\n\r\nDoing this is throwing error:\r\n\r\n    Parameter 4 of method webEndpointServletHandlerMapping in com.my.application.web.config.WebMvcEndpointConfig required a bean of type &#39;org.springframework.boot.actuate.autoconfigure.endpoint.web.CorsEndpointProperties&#39; that could not be found.\r\n\r\nLooks like the custom definition of bean is not handling CORS well for port 8081.\r\n\r\nAny suggestions how can this be solved?\r\n\r\nBean definition:\r\n\r\n    @Bean\r\n        public WebMvcEndpointHandlerMapping webEndpointServletHandlerMapping(WebEndpointsSupplier webEndpointsSupplier,\r\n                                                                             ServletEndpointsSupplier servletEndpointsSupplier, ControllerEndpointsSupplier controllerEndpointsSupplier,\r\n                                                                             EndpointMediaTypes endpointMediaTypes, CorsEndpointProperties corsProperties,\r\n                                                                             WebEndpointProperties webEndpointProperties, Environment environment) {\r\n            List&lt;ExposableEndpoint&lt;?&gt;&gt; allEndpoints = new ArrayList();\r\n            Collection&lt;ExposableWebEndpoint&gt; webEndpoints = webEndpointsSupplier.getEndpoints();\r\n            allEndpoints.addAll(webEndpoints);\r\n            allEndpoints.addAll(servletEndpointsSupplier.getEndpoints());\r\n            allEndpoints.addAll(controllerEndpointsSupplier.getEndpoints());\r\n            String basePath = webEndpointProperties.getBasePath();\r\n            EndpointMapping endpointMapping = new EndpointMapping(basePath);\r\n            boolean shouldRegisterLinksMapping = this.shouldRegisterLinksMapping(webEndpointProperties, environment,\r\n                    basePath);\r\n            return new WebMvcEndpointHandlerMapping(endpointMapping, webEndpoints, endpointMediaTypes,\r\n                    corsProperties.toCorsConfiguration(), new EndpointLinksResolver(allEndpoints, basePath),\r\n                    shouldRegisterLinksMapping, null);\r\n        }\r\n    \r\n        private boolean shouldRegisterLinksMapping(WebEndpointProperties webEndpointProperties, Environment environment,\r\n                                                   String basePath) {\r\n    \r\n            return webEndpointProperties.getDiscovery().isEnabled() &amp;&amp; (StringUtils.hasText(basePath)\r\n                    || ManagementPortType.get(environment).equals(ManagementPortType.DIFFERENT));\r\n    \r\n        }\r\n\r\n  [1]: https://stackoverflow.com/a/70892119/1433826","title":"Actuator CORS issue when creating WebMvcEndpointHandlerMapping bean","body":"<p>I am upgrading spring boot to <code>2.7.13</code> &amp; <code>JDK17</code>.</p>\n<p>Then I ran into a common problem with <code>Springfox</code>, which I solved using this <a href=\"https://stackoverflow.com/a/70892119/1433826\">post</a>. (tl;dr defining <code>WebMvcEndpointHandlerMapping</code> bean)</p>\n<p>In my project I'm exposing by health endpoint on <code>8081</code>.</p>\n<pre><code>management.server.port: 8081\n</code></pre>\n<p>Doing this is throwing error:</p>\n<pre><code>Parameter 4 of method webEndpointServletHandlerMapping in com.my.application.web.config.WebMvcEndpointConfig required a bean of type 'org.springframework.boot.actuate.autoconfigure.endpoint.web.CorsEndpointProperties' that could not be found.\n</code></pre>\n<p>Looks like the custom definition of bean is not handling CORS well for port 8081.</p>\n<p>Any suggestions how can this be solved?</p>\n<p>Bean definition:</p>\n<pre><code>@Bean\n    public WebMvcEndpointHandlerMapping webEndpointServletHandlerMapping(WebEndpointsSupplier webEndpointsSupplier,\n                                                                         ServletEndpointsSupplier servletEndpointsSupplier, ControllerEndpointsSupplier controllerEndpointsSupplier,\n                                                                         EndpointMediaTypes endpointMediaTypes, CorsEndpointProperties corsProperties,\n                                                                         WebEndpointProperties webEndpointProperties, Environment environment) {\n        List&lt;ExposableEndpoint&lt;?&gt;&gt; allEndpoints = new ArrayList();\n        Collection&lt;ExposableWebEndpoint&gt; webEndpoints = webEndpointsSupplier.getEndpoints();\n        allEndpoints.addAll(webEndpoints);\n        allEndpoints.addAll(servletEndpointsSupplier.getEndpoints());\n        allEndpoints.addAll(controllerEndpointsSupplier.getEndpoints());\n        String basePath = webEndpointProperties.getBasePath();\n        EndpointMapping endpointMapping = new EndpointMapping(basePath);\n        boolean shouldRegisterLinksMapping = this.shouldRegisterLinksMapping(webEndpointProperties, environment,\n                basePath);\n        return new WebMvcEndpointHandlerMapping(endpointMapping, webEndpoints, endpointMediaTypes,\n                corsProperties.toCorsConfiguration(), new EndpointLinksResolver(allEndpoints, basePath),\n                shouldRegisterLinksMapping, null);\n    }\n\n    private boolean shouldRegisterLinksMapping(WebEndpointProperties webEndpointProperties, Environment environment,\n                                               String basePath) {\n\n        return webEndpointProperties.getDiscovery().isEnabled() &amp;&amp; (StringUtils.hasText(basePath)\n                || ManagementPortType.get(environment).equals(ManagementPortType.DIFFERENT));\n\n    }\n</code></pre>\n"},{"tags":["java","sql-server","jdbc"],"comments":[{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1689610381,"post_id":76706311,"comment_id":135234568,"body_markdown":"You don&#39;t append a database name to the server name in a connection string. The Database Name is a separate parameter.","body":"You don&#39;t append a database name to the server name in a connection string. The Database Name is a separate parameter."},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":1,"creation_date":1689611198,"post_id":76706311,"comment_id":135234741,"body_markdown":"*&quot;So similarly in java I cannot use the instance name. I leave the database blank.&quot;* The *Instance* and *Database* are different things. A database is something that is hosted on an Instance. There can be multiple Instances on a (Windows) server, and then each Instance will have multiple databases.","body":"<i>&quot;So similarly in java I cannot use the instance name. I leave the database blank.&quot;</i> The <i>Instance</i> and <i>Database</i> are different things. A database is something that is hosted on an Instance. There can be multiple Instances on a (Windows) server, and then each Instance will have multiple databases."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1689631271,"post_id":76706311,"comment_id":135238331,"body_markdown":"Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. Does the login you&#39;re using actually have access to both databases?","body":"Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. Does the login you&#39;re using actually have access to both databases?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1689631490,"post_id":76706311,"comment_id":135238364,"body_markdown":"If you&#39;re using JDBC connection string URLs then have you tried telling it which database to use by specifying `jdbc:sqlserver://serverNameOrIpAddress;databaseName=NameOfDatabase2;user=yourLoginName;password=yourLoginPassword`?","body":"If you&#39;re using JDBC connection string URLs then have you tried telling it which database to use by specifying <code>jdbc:sqlserver:&#47;&#47;serverNameOrIpAddress;databaseName=NameOfDa&zwnj;&#8203;tabase2;user=yourLog&zwnj;&#8203;inName;password=your&zwnj;&#8203;LoginPassword</code>?"},{"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"score":0,"creation_date":1690310362,"post_id":76706311,"comment_id":135334780,"body_markdown":"I agree with @Thomas A. In my situation this particular Instances was not set up correctly. Also I did not have a user account for this DB and ran into issues due to it. I was able to access the first DB/instance without any issues as I had a user account for that DB and was set up correctly.","body":"I agree with @Thomas A. In my situation this particular Instances was not set up correctly. Also I did not have a user account for this DB and ran into issues due to it. I was able to access the first DB/instance without any issues as I had a user account for that DB and was set up correctly."},{"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"score":0,"creation_date":1690310418,"post_id":76706311,"comment_id":135334788,"body_markdown":"Agree with @Always learning: the solution is provided in the Answer below:  Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. \nAlwaysLearning","body":"Agree with @Always learning: the solution is provided in the Answer below:  Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there.  AlwaysLearning"}],"answers":[{"tags":[],"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690310120,"creation_date":1690310120,"answer_id":76765623,"question_id":76706311,"body_markdown":"This question can be marked as answered.\r\n\r\nI found out what the real issue was. I realized that while connecting to the server, the Master DB was set as the default. Then providing an instance name in the connection string gave an error that the database cannot be found. Connecting to the server and providing blank for an instance name, connects to the Master DB and obviously cannot find the table that you are trying to query. The DBA had to change the setting (change the default DB). In my case since this was an old DB trying to get hold of the credentials for sa was a challenge!","title":"Java Database connects to the master only","body":"<p>This question can be marked as answered.</p>\n<p>I found out what the real issue was. I realized that while connecting to the server, the Master DB was set as the default. Then providing an instance name in the connection string gave an error that the database cannot be found. Connecting to the server and providing blank for an instance name, connects to the Master DB and obviously cannot find the table that you are trying to query. The DBA had to change the setting (change the default DB). In my case since this was an old DB trying to get hold of the credentials for sa was a challenge!</p>\n"}],"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690310120,"creation_date":1689610150,"question_id":76706311,"body_markdown":"I have a java application that needs to connect to 2 databases on the same server. \r\nThe first one works fine when I connect using server/databasename/userid/password as I connect to the server and a specific database instance.\r\n\r\nThe second data base is set up on the same server but through SSMS I connect only connect to the server and it automatically connects me to Database2. i.e. I use \r\n```none\r\nServer Type: Database Engine\r\nSerevrName: xxx.yyy.z.1\r\nAuthentication SQL Server Authentication\r\nLogin:\r\npassword:\r\n```\r\nThis works fine in SSMS, recognizes all the tables etc.\r\nBut if I use ServerName/databaseName, I get an error that the database cannot be found.\r\nServer Type: Database Engine\r\n```\r\nSerevrName: xxx.yyy.z.1/Database2\r\nAuthentication SQL Server Authentication\r\nLogin:\r\npassword:\r\n```\r\nSo similarly in java I cannot use the instance name. I leave the database blank. It conencts to master and I get a object not found error. If I change my query to include the database select * from database2.dbo.table, also I am getting an error.\r\n\r\nI am not sure how to use and connect to Dataabse2, like I can do it in sql.\r\nUSE Database 2;\r\nGO;\r\n\r\nThis database is created on a SQL Server 2012 and is very old. None of the people who set this up are with us the current time. \r\n\r\nAny help with connecting to the second database will help. \r\nThanks, \r\n\r\n","title":"Java Database connects to the master only","body":"<p>I have a java application that needs to connect to 2 databases on the same server.\nThe first one works fine when I connect using server/databasename/userid/password as I connect to the server and a specific database instance.</p>\n<p>The second data base is set up on the same server but through SSMS I connect only connect to the server and it automatically connects me to Database2. i.e. I use</p>\n<pre class=\"lang-none prettyprint-override\"><code>Server Type: Database Engine\nSerevrName: xxx.yyy.z.1\nAuthentication SQL Server Authentication\nLogin:\npassword:\n</code></pre>\n<p>This works fine in SSMS, recognizes all the tables etc.\nBut if I use ServerName/databaseName, I get an error that the database cannot be found.\nServer Type: Database Engine</p>\n<pre><code>SerevrName: xxx.yyy.z.1/Database2\nAuthentication SQL Server Authentication\nLogin:\npassword:\n</code></pre>\n<p>So similarly in java I cannot use the instance name. I leave the database blank. It conencts to master and I get a object not found error. If I change my query to include the database select * from database2.dbo.table, also I am getting an error.</p>\n<p>I am not sure how to use and connect to Dataabse2, like I can do it in sql.\nUSE Database 2;\nGO;</p>\n<p>This database is created on a SQL Server 2012 and is very old. None of the people who set this up are with us the current time.</p>\n<p>Any help with connecting to the second database will help.\nThanks,</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1690275230,"post_id":76760090,"comment_id":135326978,"body_markdown":"You are trying to use the jwt as a session holder. Thats not how you should use JWT, the roles should be inserted into the JWT, by the authorization server when it creates the JWT, and userdetails is used for session based login. You are trying to mix two different login types. If you need specific info you use the id in the jwt and do a lookup for that specific endpoint. Not use userdetsilsservice.","body":"You are trying to use the jwt as a session holder. Thats not how you should use JWT, the roles should be inserted into the JWT, by the authorization server when it creates the JWT, and userdetails is used for session based login. You are trying to mix two different login types. If you need specific info you use the id in the jwt and do a lookup for that specific endpoint. Not use userdetsilsservice."},{"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"score":0,"creation_date":1690275654,"post_id":76760090,"comment_id":135327089,"body_markdown":"@Toerktumlare Thank you for your response. A requirement is that I manage the roles on my side. Is it correct to use a JwtAuthenticationConverter to add additional authorities to the security context, like I did?\n\nIf using UserDetails in this context is not recommended, I can live with it. I thought it&#39;s a convention to configure it too, no matter if we use JWTs or not. Thanks!","body":"@Toerktumlare Thank you for your response. A requirement is that I manage the roles on my side. Is it correct to use a JwtAuthenticationConverter to add additional authorities to the security context, like I did?  If using UserDetails in this context is not recommended, I can live with it. I thought it&#39;s a convention to configure it too, no matter if we use JWTs or not. Thanks!"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1690279417,"post_id":76760090,"comment_id":135327898,"body_markdown":"There should be some way to add private claims to access tokens in your authorisation server, and it would be more efficient to fetch these roles from  DB only once per token issuance rather than for each and every incoming request to your resource server(s). I advise that you expose user roles on a REST endpoint and configure your authorization server to call this endpoint (with client_credentials) and add the result to access and ID tokens private claims. Configuring a `Converter&lt;Jwt, JwtAuthenticationToken&gt;` in resource server(s) should then be straight forward.","body":"There should be some way to add private claims to access tokens in your authorisation server, and it would be more efficient to fetch these roles from  DB only once per token issuance rather than for each and every incoming request to your resource server(s). I advise that you expose user roles on a REST endpoint and configure your authorization server to call this endpoint (with client_credentials) and add the result to access and ID tokens private claims. Configuring a <code>Converter&lt;Jwt, JwtAuthenticationToken&gt;</code> in resource server(s) should then be straight forward."},{"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"score":0,"creation_date":1690283564,"post_id":76760090,"comment_id":135328703,"body_markdown":"@ch4mp Thank you! I&#39;m not sure it&#39;s possible to configure it this way since I&#39;m using Azure for authentication and I&#39;m not aware of such a feature in Azure to allow me to dynamically load the user roles when issuing an access token. Also, performance is not really an issue. I&#39;d rather want to have UserDetails implemented. Any help with this? Thanks!","body":"@ch4mp Thank you! I&#39;m not sure it&#39;s possible to configure it this way since I&#39;m using Azure for authentication and I&#39;m not aware of such a feature in Azure to allow me to dynamically load the user roles when issuing an access token. Also, performance is not really an issue. I&#39;d rather want to have UserDetails implemented. Any help with this? Thanks!"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1690287677,"post_id":76760090,"comment_id":135329583,"body_markdown":"`I&#39;d rather want to have UserDetails implemented` were we not clear? UserDetails is used for form login scenarios, not JWT. You are trying to build a custom security solution which is bad practice. Im not going to participate in teaching bad practices and unsecure solutions. And you should adhere to best security practices.","body":"<code>I&#39;d rather want to have UserDetails implemented</code> were we not clear? UserDetails is used for form login scenarios, not JWT. You are trying to build a custom security solution which is bad practice. Im not going to participate in teaching bad practices and unsecure solutions. And you should adhere to best security practices."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1690303002,"post_id":76760090,"comment_id":135333330,"body_markdown":"First, choosing the less efficient solution frequently is a bad choice, and professionally unacceptable. Second, you should ask the question to Google rather than writing &quot;I&#39;m not aware of such a feature in Azure&quot;: https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow","body":"First, choosing the less efficient solution frequently is a bad choice, and professionally unacceptable. Second, you should ask the question to Google rather than writing &quot;I&#39;m not aware of such a feature in Azure&quot;: <a href=\"https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/active-directory-b2c/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690309927,"creation_date":1690306020,"answer_id":76765194,"question_id":76760090,"body_markdown":"It is feasible to wire a JPA repository in an authentication converter bean (I do it [here][1] for instance), but **it is a bad practice which should be reserved to cases where you can&#39;t set access token private claims on the authorization server and where you can&#39;t use another (more configurable) authorization server in front of it**. In Keycloak, you do this using &quot;[mappers][2]&quot;, in Auth0, you write &quot;[actions][3]&quot;, in Azure, you use &quot;[API connectors][4]&quot;, etc.\r\n\r\nIt is much more efficient to fetch roles from DB on the authorization server once per token issuance, rather than for each incoming request on resource server(s). You could mitigate that with caches, but creating, maintaining and debugging caches (shared caches in a distributed environment) is always a pain.\r\n\r\nDetails of a working solution with an authorities converter fetching roles from DB (but again, if you do that, my bet is you&#39;ll regret it sooner or later):\r\n```java\r\nstatic interface AuthoritiesConverter extends Converter&lt;Jwt, Set&lt;SimpleGrantedAuthority&gt;&gt; {\r\n}\r\n\r\nstatic interface AuthenticationConverter extends Converter&lt;Jwt, JwtAuthenticationToken&gt; {\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic static class PersistedGrantedAuthoritiesRetriever implements AuthoritiesConverter {\r\n\tprivate final UserAuthorityRepository authoritiesRepo;\r\n\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic Set&lt;SimpleGrantedAuthority&gt; convert(Jwt jwt) {\r\n\t\tfinal Collection&lt;UserAuthority&gt; authorities = authoritiesRepo.findBySubject(jwt.getSubject());\r\n\r\n\t\treturn authorities.stream().map(UserAuthority::getAuthority).map(SimpleGrantedAuthority::new).collect(Collectors.toSet());\r\n\t}\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic static class JpaAuthenticationConverter implements AuthenticationConverter {\r\n\tprivate final Converter&lt;String, ? extends Collection&lt;? extends GrantedAuthority&gt;&gt; authoritiesConverter;\r\n\r\n\t@Override\r\n\tpublic JwtAuthenticationToken convert(Jwt jwt) {\r\n\t\treturn new JwtAuthenticationToken(jwt, authoritiesConverter.convert(jwt));\r\n\t}\r\n}\r\n\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\n@Configuration\r\npublic static class WebSecurityConfig {\r\n\r\n    @Bean\r\n    SecurityFilterChain filterChain(\r\n            HttpSecurity http,\r\n            Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt; authenticationConverter) throws Exception {\r\n\r\n        http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(authenticationConverter)));\r\n        \r\n        ...\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwt-default-jpa-authorities\r\n  [2]: https://github.com/ch4mpy/user-proxies/tree/main/api\r\n  [3]: https://auth0.com/docs/customize/actions\r\n  [4]: https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow","title":"Spring Security 6 - Access UserDetails in a OAuth2ResourceServer","body":"<p>It is feasible to wire a JPA repository in an authentication converter bean (I do it <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwt-default-jpa-authorities\" rel=\"nofollow noreferrer\">here</a> for instance), but <strong>it is a bad practice which should be reserved to cases where you can't set access token private claims on the authorization server and where you can't use another (more configurable) authorization server in front of it</strong>. In Keycloak, you do this using &quot;<a href=\"https://github.com/ch4mpy/user-proxies/tree/main/api\" rel=\"nofollow noreferrer\">mappers</a>&quot;, in Auth0, you write &quot;<a href=\"https://auth0.com/docs/customize/actions\" rel=\"nofollow noreferrer\">actions</a>&quot;, in Azure, you use &quot;<a href=\"https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow\" rel=\"nofollow noreferrer\">API connectors</a>&quot;, etc.</p>\n<p>It is much more efficient to fetch roles from DB on the authorization server once per token issuance, rather than for each incoming request on resource server(s). You could mitigate that with caches, but creating, maintaining and debugging caches (shared caches in a distributed environment) is always a pain.</p>\n<p>Details of a working solution with an authorities converter fetching roles from DB (but again, if you do that, my bet is you'll regret it sooner or later):</p>\n<pre class=\"lang-java prettyprint-override\"><code>static interface AuthoritiesConverter extends Converter&lt;Jwt, Set&lt;SimpleGrantedAuthority&gt;&gt; {\n}\n\nstatic interface AuthenticationConverter extends Converter&lt;Jwt, JwtAuthenticationToken&gt; {\n}\n\n@Component\n@RequiredArgsConstructor\npublic static class PersistedGrantedAuthoritiesRetriever implements AuthoritiesConverter {\n    private final UserAuthorityRepository authoritiesRepo;\n\n    @Override\n    @Transactional(readOnly = true)\n    public Set&lt;SimpleGrantedAuthority&gt; convert(Jwt jwt) {\n        final Collection&lt;UserAuthority&gt; authorities = authoritiesRepo.findBySubject(jwt.getSubject());\n\n        return authorities.stream().map(UserAuthority::getAuthority).map(SimpleGrantedAuthority::new).collect(Collectors.toSet());\n    }\n}\n\n@Component\n@RequiredArgsConstructor\npublic static class JpaAuthenticationConverter implements AuthenticationConverter {\n    private final Converter&lt;String, ? extends Collection&lt;? extends GrantedAuthority&gt;&gt; authoritiesConverter;\n\n    @Override\n    public JwtAuthenticationToken convert(Jwt jwt) {\n        return new JwtAuthenticationToken(jwt, authoritiesConverter.convert(jwt));\n    }\n}\n\n@EnableWebSecurity\n@EnableMethodSecurity\n@Configuration\npublic static class WebSecurityConfig {\n\n    @Bean\n    SecurityFilterChain filterChain(\n            HttpSecurity http,\n            Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt; authenticationConverter) throws Exception {\n\n        http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(authenticationConverter)));\n        \n        ...\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":924,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690309927,"creation_date":1690267814,"question_id":76760090,"body_markdown":"I&#39;m trying to set up an OAuth2Resource Server using Springboot 3 and Spring Security 6.\r\n\r\nI was able to configure authentication correctly; I implemented a custom jwt converter, which fetches the user&#39;s authorities from my database and assigns them to the security context. \r\n```java\r\nclass CustomAuthenticationConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\r\n\r\n    AzureUserService azureUserService;\r\n\r\n    public CustomAuthenticationConverter(AzureUserService azureUserService) {\r\n        this.azureUserService = azureUserService;\r\n    }\r\n\r\n    public AbstractAuthenticationToken convert(@NonNull Jwt jwt) {\r\n        // Currently, creates a user in the database, if they don&#39;t exist yet. Guaranteed to get a user.\r\n        User user = azureUserService.retrieveOrCreateUserFromJwt(jwt);\r\n        JwtAuthenticationToken authentication = new JwtAuthenticationToken(jwt, user.getAuthorities(), user.getId());\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        return authentication;\r\n    }\r\n}\r\n```\r\n\r\nNow I can protect my routes using authorities. Next step: I&#39;d like to be able to access inside of some route the information about the current user. \r\nHowever, even after registering my user details service class:\r\n\r\n```java\r\n@Bean\r\npublic DaoAuthenticationProvider authenticationProvider() {\r\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n    provider.setUserDetailsService(userDetailsService);\r\n    return provider;\r\n}\r\n```\r\n\r\nI cannot access the UserDetails object in my route:\r\n```java\r\n    @GetMapping(&quot;/api/admin/you&quot;)\r\n    public String showProfile(@AuthenticationPrincipal CustomUserDetails userDetails) {\r\n        return &quot;Details&quot;+ userDetails;\r\n\r\n    }\r\n```\r\n\r\nThis will return &quot;Details null&quot;.\r\n\r\nI&#39;m not sure if UserDetails is not accessible because I&#39;m using this application just as an OAuthResource Server or I haven&#39;t configured it correctly.\r\n\r\nThe implementation of my UserDetails class:\r\n```java\r\n\r\npublic class CustomUserDetails implements UserDetails {\r\n\r\n    private final User user; // This is your own User entity class\r\n\r\n    public CustomUserDetails(User user) {\r\n        this.user = user;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return user.getAuthorities();\r\n    }\r\n\r\n    // We use OAuth2, hence no need for password\r\n    @Override\r\n    public String getPassword() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return user.getId();\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return user.getEnabled();\r\n    }\r\n\r\n    public User getUser() {\r\n        return user;\r\n    }\r\n}\r\n\r\n```\r\n\r\nand the service:\r\n\r\n```java\r\n@Transactional\r\n@Service\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n    private final UserRepository userRepository;\r\n\r\n    public CustomUserDetailsService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    // Note that Spring calls the unique user identifier &quot;username&quot;, but we&#39;re working with a unique identifier.\r\n    @Override\r\n    public CustomUserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; optionalUser = userRepository.findById(username);\r\n\r\n        if (optionalUser.isPresent()) {\r\n            User user = optionalUser.get();\r\n            return new CustomUserDetails(user);\r\n        }\r\n        else {\r\n            throw new UsernameNotFoundException(&quot;User not found with id: &quot; + username);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nAlso, here is my SecurityConfiguration\r\n\r\n```java\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        // Create RequestMatchers out of the Strings\r\n        List&lt;RequestMatcher&gt; publicMatchers = Arrays.stream(publicPaths)\r\n                .map(AntPathRequestMatcher::new)\r\n                .collect(Collectors.toList());\r\n\r\n        // Apply configuration\r\n        http\r\n                .authenticationProvider(authenticationProvider())\r\n                .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                    authorizeRequests\r\n\r\n                            // Allow public access to the routes specified in &#39;publicMatchers&#39; list\r\n                            .requestMatchers(request -&gt;\r\n                                    publicMatchers.stream().anyMatch(matcher -&gt; matcher.matches(request))\r\n                            ).permitAll()\r\n\r\n\r\n                            // Require authentication for all other routes.\r\n                            .anyRequest().authenticated();\r\n                })\r\n\r\n\r\n                // Configure the OAuth 2.0 resource server to use JWT tokens provided by Azure AD B2C\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\r\n                        oauth2ResourceServer\r\n                                .jwt(jwt -&gt;\r\n                                        // Set the location where the server can find the JSON Web Key Set (JWK Set).\r\n                                        // The JWK Set contains public keys. The server uses these public keys to\r\n                                        // validate the signatures of incoming JWTs, ensuring they were issued by a trusted authorization server.\r\n                                        // In this case, the URI of the JWK Set is provided by the &#39;jwkSetUri&#39; variable.\r\n                                        jwt.jwkSetUri(this.jwkSetUri)\r\n                                                .jwtAuthenticationConverter(customAuthenticationConverter())\r\n                                )\r\n                )\r\n                .userDetailsService(userDetailsService);\r\n\r\n        return http.build();\r\n    }\r\n\r\n```","title":"Spring Security 6 - Access UserDetails in a OAuth2ResourceServer","body":"<p>I'm trying to set up an OAuth2Resource Server using Springboot 3 and Spring Security 6.</p>\n<p>I was able to configure authentication correctly; I implemented a custom jwt converter, which fetches the user's authorities from my database and assigns them to the security context.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class CustomAuthenticationConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\n\n    AzureUserService azureUserService;\n\n    public CustomAuthenticationConverter(AzureUserService azureUserService) {\n        this.azureUserService = azureUserService;\n    }\n\n    public AbstractAuthenticationToken convert(@NonNull Jwt jwt) {\n        // Currently, creates a user in the database, if they don't exist yet. Guaranteed to get a user.\n        User user = azureUserService.retrieveOrCreateUserFromJwt(jwt);\n        JwtAuthenticationToken authentication = new JwtAuthenticationToken(jwt, user.getAuthorities(), user.getId());\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        return authentication;\n    }\n}\n</code></pre>\n<p>Now I can protect my routes using authorities. Next step: I'd like to be able to access inside of some route the information about the current user.\nHowever, even after registering my user details service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n    provider.setUserDetailsService(userDetailsService);\n    return provider;\n}\n</code></pre>\n<p>I cannot access the UserDetails object in my route:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(&quot;/api/admin/you&quot;)\n    public String showProfile(@AuthenticationPrincipal CustomUserDetails userDetails) {\n        return &quot;Details&quot;+ userDetails;\n\n    }\n</code></pre>\n<p>This will return &quot;Details null&quot;.</p>\n<p>I'm not sure if UserDetails is not accessible because I'm using this application just as an OAuthResource Server or I haven't configured it correctly.</p>\n<p>The implementation of my UserDetails class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class CustomUserDetails implements UserDetails {\n\n    private final User user; // This is your own User entity class\n\n    public CustomUserDetails(User user) {\n        this.user = user;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return user.getAuthorities();\n    }\n\n    // We use OAuth2, hence no need for password\n    @Override\n    public String getPassword() {\n        return null;\n    }\n\n    @Override\n    public String getUsername() {\n        return user.getId();\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return user.getEnabled();\n    }\n\n    public User getUser() {\n        return user;\n    }\n}\n\n</code></pre>\n<p>and the service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    // Note that Spring calls the unique user identifier &quot;username&quot;, but we're working with a unique identifier.\n    @Override\n    public CustomUserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional&lt;User&gt; optionalUser = userRepository.findById(username);\n\n        if (optionalUser.isPresent()) {\n            User user = optionalUser.get();\n            return new CustomUserDetails(user);\n        }\n        else {\n            throw new UsernameNotFoundException(&quot;User not found with id: &quot; + username);\n        }\n    }\n}\n\n</code></pre>\n<p>Also, here is my SecurityConfiguration</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n        // Create RequestMatchers out of the Strings\n        List&lt;RequestMatcher&gt; publicMatchers = Arrays.stream(publicPaths)\n                .map(AntPathRequestMatcher::new)\n                .collect(Collectors.toList());\n\n        // Apply configuration\n        http\n                .authenticationProvider(authenticationProvider())\n                .authorizeHttpRequests(authorizeRequests -&gt; {\n                    authorizeRequests\n\n                            // Allow public access to the routes specified in 'publicMatchers' list\n                            .requestMatchers(request -&gt;\n                                    publicMatchers.stream().anyMatch(matcher -&gt; matcher.matches(request))\n                            ).permitAll()\n\n\n                            // Require authentication for all other routes.\n                            .anyRequest().authenticated();\n                })\n\n\n                // Configure the OAuth 2.0 resource server to use JWT tokens provided by Azure AD B2C\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\n                        oauth2ResourceServer\n                                .jwt(jwt -&gt;\n                                        // Set the location where the server can find the JSON Web Key Set (JWK Set).\n                                        // The JWK Set contains public keys. The server uses these public keys to\n                                        // validate the signatures of incoming JWTs, ensuring they were issued by a trusted authorization server.\n                                        // In this case, the URI of the JWK Set is provided by the 'jwkSetUri' variable.\n                                        jwt.jwkSetUri(this.jwkSetUri)\n                                                .jwtAuthenticationConverter(customAuthenticationConverter())\n                                )\n                )\n                .userDetailsService(userDetailsService);\n\n        return http.build();\n    }\n\n</code></pre>\n"},{"tags":["java","hibernate","maven","hbm2java"],"answers":[{"tags":[],"owner":{"account_id":28009875,"reputation":1,"user_id":21392595,"display_name":"ulil"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678751053,"creation_date":1678751053,"answer_id":75727864,"question_id":75581489,"body_markdown":"I&#39;ve been searching for this as well to find\r\ngroupId org.hibernate.tool\r\nartifactId hibernate-tools-maven\r\nversion 6.1.7.Final\r\ndoing it","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>I've been searching for this as well to find\ngroupId org.hibernate.tool\nartifactId hibernate-tools-maven\nversion 6.1.7.Final\ndoing it</p>\n"},{"tags":[],"owner":{"account_id":21323309,"reputation":11,"user_id":15696108,"display_name":"Ramanandafy Lova Mialy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690309923,"creation_date":1690309923,"answer_id":76765600,"question_id":75581489,"body_markdown":"it works with hbernate-tools-maven. I use the latest version on maven central: 6.2.6.Final\r\nThis is the definition of the plugin tag inside my pom.xml\r\n\r\n       &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;hibernate-tools-maven&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;6.2.6.Final&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;packageName&gt;com.example.entity&lt;/packageName&gt;\r\n\t\t\t\t\t&lt;revengFile&gt;src/main/resources/hibernate.reveng.xml&lt;/revengFile&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;src/main/java&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;ejb3&gt;true&lt;/ejb3&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;6.2.6.Final&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;2.1.214&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;entity-generation&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;none&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;hbm2java&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\nhibernate.properties\r\n\r\n    hibernate.dialect = org.hibernate.dialect.H2Dialect\r\n    hibernate.connection.driver_class = org.h2.Driver\r\n    hibernate.connection.url = jdbc:h2:file:~/my-db;MODE=MySQL\r\n    hibernate.connection.username = sa\r\n    hibernate.connection.password =\r\n    hibernate.hbm2ddl.auto = update\r\n\r\nhibernate.reveng.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-reverse-engineering PUBLIC\r\n        &quot;-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd&quot; &gt;\r\n\r\n    &lt;hibernate-reverse-engineering&gt;\r\n\r\n       &lt;schema-selection match-catalog=&quot;CAMUNDA-DB&quot; match-schema=&quot;PUBLIC&quot;/&gt;\r\n       &lt;type-mapping&gt;\r\n           &lt;!-- jdbc-type is name for java.sql.Types --&gt;\r\n           &lt;sql-type jdbc-type=&quot;VARCHAR&quot; hibernate-type=&quot;java.lang.String&quot; /&gt;\r\n           &lt;sql-type jdbc-type=&quot;DOUBLE&quot;  precision=&#39;4&#39; hibernate- \r\n            type=&quot;java.lang.Double&quot; /&gt;\r\n           &lt;sql-type jdbc-type=&quot;TIMESTAMP&quot;  hibernate- \r\n            type=&quot;java.time.LocalDateTime&quot; /&gt;\r\n       &lt;/type-mapping&gt;\r\n       &lt;table-filter match-name=&quot;flyway_schema_history&quot; exclude=&quot;true&quot;/&gt;\r\n\r\n    &lt;/hibernate-reverse-engineering&gt;\r\n\r\nmy command line for generating entities classes:\r\n\r\n    mvn hibernate-tools:hbm2java","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>it works with hbernate-tools-maven. I use the latest version on maven central: 6.2.6.Final\nThis is the definition of the plugin tag inside my pom.xml</p>\n<pre><code>   &lt;plugin&gt;\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-tools-maven&lt;/artifactId&gt;\n            &lt;version&gt;6.2.6.Final&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;packageName&gt;com.example.entity&lt;/packageName&gt;\n                &lt;revengFile&gt;src/main/resources/hibernate.reveng.xml&lt;/revengFile&gt;\n                &lt;outputDirectory&gt;src/main/java&lt;/outputDirectory&gt;\n                &lt;ejb3&gt;true&lt;/ejb3&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n                    &lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\n                    &lt;version&gt;6.2.6.Final&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n                    &lt;version&gt;2.1.214&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;entity-generation&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;hbm2java&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>hibernate.properties</p>\n<pre><code>hibernate.dialect = org.hibernate.dialect.H2Dialect\nhibernate.connection.driver_class = org.h2.Driver\nhibernate.connection.url = jdbc:h2:file:~/my-db;MODE=MySQL\nhibernate.connection.username = sa\nhibernate.connection.password =\nhibernate.hbm2ddl.auto = update\n</code></pre>\n<p>hibernate.reveng.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-reverse-engineering PUBLIC\n    &quot;-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd&quot; &gt;\n\n&lt;hibernate-reverse-engineering&gt;\n\n   &lt;schema-selection match-catalog=&quot;CAMUNDA-DB&quot; match-schema=&quot;PUBLIC&quot;/&gt;\n   &lt;type-mapping&gt;\n       &lt;!-- jdbc-type is name for java.sql.Types --&gt;\n       &lt;sql-type jdbc-type=&quot;VARCHAR&quot; hibernate-type=&quot;java.lang.String&quot; /&gt;\n       &lt;sql-type jdbc-type=&quot;DOUBLE&quot;  precision='4' hibernate- \n        type=&quot;java.lang.Double&quot; /&gt;\n       &lt;sql-type jdbc-type=&quot;TIMESTAMP&quot;  hibernate- \n        type=&quot;java.time.LocalDateTime&quot; /&gt;\n   &lt;/type-mapping&gt;\n   &lt;table-filter match-name=&quot;flyway_schema_history&quot; exclude=&quot;true&quot;/&gt;\n\n&lt;/hibernate-reverse-engineering&gt;\n</code></pre>\n<p>my command line for generating entities classes:</p>\n<pre><code>mvn hibernate-tools:hbm2java\n</code></pre>\n"}],"owner":{"account_id":146653,"reputation":888,"user_id":357226,"accept_rate":75,"display_name":"Lawrence Tierney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690309923,"creation_date":1677506727,"question_id":75581489,"body_markdown":"When I run hbm2java I would like it to create Entity classes that:\r\n\r\n    import jakarta.persistence\r\n\r\nrather than (as currently)\r\n\r\n    import javax.persistence\r\n\r\nI am invoking hbm2java from a Maven build thus:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n           &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n           &lt;goals&gt;\r\n               &lt;goal&gt;hbm2java&lt;/goal&gt;\r\n           &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n     &lt;/executions&gt;\r\n     &lt;configuration&gt;\r\n         &lt;packageName&gt;PACKAGE_NAME&lt;/packageName&gt;\r\n         &lt;outputDirectory&gt;OUTPUT_DIR&lt;/outputDirectory&gt;\r\n         &lt;ejb3&gt;true&lt;/ejb3&gt;\r\n     &lt;/configuration&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n           &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n           &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n           &lt;version&gt;8.0.32&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       &lt;!-- I thought the following dependency would work but it didnt.. --&gt;\r\n       &lt;!--&lt;dependency&gt;\r\n           &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n           &lt;artifactId&gt;hibernate-jpamodelgen-jakarta&lt;/artifactId&gt;\r\n           &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n       &lt;/dependency&gt;--&gt;\r\n   &lt;/dependencies&gt;\r\n&lt;/plugin&gt;\r\n```\r\nWith hibernate.properties\r\n```\r\nhibernate.connection.url=jdbc:mysql://someserver\r\nhibernate.connection.username=username\r\nhibernate.connection.password=password\r\nhibernate.connection.driver_class=com.mysql.cj.jdbc.Driver\r\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n```","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>When I run hbm2java I would like it to create Entity classes that:</p>\n<pre><code>import jakarta.persistence\n</code></pre>\n<p>rather than (as currently)</p>\n<pre><code>import javax.persistence\n</code></pre>\n<p>I am invoking hbm2java from a Maven build thus:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;5.6.15.Final&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n           &lt;phase&gt;generate-sources&lt;/phase&gt;\n           &lt;goals&gt;\n               &lt;goal&gt;hbm2java&lt;/goal&gt;\n           &lt;/goals&gt;\n        &lt;/execution&gt;\n     &lt;/executions&gt;\n     &lt;configuration&gt;\n         &lt;packageName&gt;PACKAGE_NAME&lt;/packageName&gt;\n         &lt;outputDirectory&gt;OUTPUT_DIR&lt;/outputDirectory&gt;\n         &lt;ejb3&gt;true&lt;/ejb3&gt;\n     &lt;/configuration&gt;\n    &lt;dependencies&gt;\n       &lt;dependency&gt;\n           &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n           &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n           &lt;version&gt;8.0.32&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;!-- I thought the following dependency would work but it didnt.. --&gt;\n       &lt;!--&lt;dependency&gt;\n           &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n           &lt;artifactId&gt;hibernate-jpamodelgen-jakarta&lt;/artifactId&gt;\n           &lt;version&gt;5.6.15.Final&lt;/version&gt;\n       &lt;/dependency&gt;--&gt;\n   &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>With hibernate.properties</p>\n<pre><code>hibernate.connection.url=jdbc:mysql://someserver\nhibernate.connection.username=username\nhibernate.connection.password=password\nhibernate.connection.driver_class=com.mysql.cj.jdbc.Driver\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\n</code></pre>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1292509696,"creation_date":1292509696,"answer_id":4461772,"question_id":4461673,"body_markdown":"When you right click on the project directory and `Run As &gt; JUnit test` it&#39;s basically the relevant run configuration that is being triggered. Therefore go to `Run &gt; Run Configurations` and on the left panel see exactly what your JUnit configuration is actually doing and configure accordingly.","title":"Excluding JUnit tests in eclipse","body":"<p>When you right click on the project directory and <code>Run As &gt; JUnit test</code> it's basically the relevant run configuration that is being triggered. Therefore go to <code>Run &gt; Run Configurations</code> and on the left panel see exactly what your JUnit configuration is actually doing and configure accordingly.</p>\n"}],"owner":{"account_id":667533,"reputation":3441,"user_id":502012,"accept_rate":87,"display_name":"Roger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4896,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":4461772,"answer_count":1,"score":7,"last_activity_date":1690309832,"creation_date":1292509051,"question_id":4461673,"body_markdown":"I have a whole bunch of unit tests. I have placed them into suitable test suites. I would like to be able to click on the root directory and go run JUnit tests to execute all the tests. However, if I do this it runs all the tests AND then runs the testsuites. Therefore running all the tests again.\r\n\r\nIs there someway to exclude the testsuites in Eclipse?\r\nthanks\r\n\r\n","title":"Excluding JUnit tests in eclipse","body":"<p>Hey<br>\nI have a whole bunch of unit tests. I have placed them into suitable test suites. I would like to be able to click on the root directory and go run JUnit tests to execute all the tests. However, if I do this it runs all the tests AND then runs the testsuites. Therefore running all the tests again.</p>\n\n<p>Is there someway to exclude the testsuites in Eclipse?\nthanks</p>\n"},{"tags":["java","json","reactor-kafka"],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690309807,"creation_date":1690309807,"answer_id":76765589,"question_id":76765099,"body_markdown":"Just use `Flux.mapNotNull`:\r\n\r\n        return kafkaReceiver.receive()\r\n                .mapNotNull(oneRecordWithJson -&gt; {\r\n                    // whatever\r\n                    return null; // record would be skipped\r\n                })","title":"How to do nothing when consuming invalid json using reactor kafka?","body":"<p>Just use <code>Flux.mapNotNull</code>:</p>\n<pre><code>    return kafkaReceiver.receive()\n            .mapNotNull(oneRecordWithJson -&gt; {\n                // whatever\n                return null; // record would be skipped\n            })\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765589,"answer_count":1,"score":0,"last_activity_date":1690309807,"creation_date":1690305347,"question_id":76765099,"body_markdown":"What I am trying to achieve:\r\n\r\nWith a Reactor Kafka Consumer, consume messages, and be able to &quot;do nothing&quot; when there is an error.\r\n\r\nThe message inside kafka is a JSON representation of ```Person```, the business flow is to convert it to ```person``` object.\r\n\r\nexample of message input: ```{&quot;name&quot;:&quot;John&quot;, &quot;age&quot;:30}```\r\n\r\nHowever, the following can happen:\r\n1 - it is a happy case, the json is well formed, I can convert it to Person with objectMapper.\r\n2 - it is a wrong json, ```JsonProcessingException```, I would like to just throw a runtime exception\r\n3 - the json is incomplete, like ```{&quot;name&quot;:&quot;John&quot;, &quot;ag``` for this case alone, I would like to ignore this case only. However, I am not able to just ignore the message.\r\n\r\nWhat did I try:\r\n\r\n```\r\nFlux&lt;Person&gt; consume() {\r\n        return kafkaReceiver.receive()\r\n                .map(oneRecordWithJson -&gt; {\r\n                    try {\r\n                        //regular flow, no issue, just transform an input to an output\r\n                        return objectMapper.readValue(oneRecordWithJson.value(), Person.class);\r\n                    } catch (JsonEOFException | JsonMappingException e) {\r\n                        // the json is broken in the first place, I do not want to do anything in this case.\r\n                        // I do not want to return a default bad object, I do not want to throw any exception\r\n                        // But here, I am required to return\r\n                        LOGGER.error(&quot;the input is broken, it is not even a valid json to begin with {}&quot;, oneRecordWithJson.value(), e);\r\n                        return null; //&lt;- no!\r\n                    } catch (JsonProcessingException e) {\r\n                        // this is bad, I do want to throw an exception here (which will stop the consumer, but that what is expected)\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                })\r\n                .map(oneCorrectPerson -&gt; doSomething(oneCorrectPerson));\r\n    }\r\n```\r\n\r\nQuestion:\r\n\r\nHow to just ignore the case when the input is not well formed? Without having to throw an exception, returning a null, a default object, etc...","title":"How to do nothing when consuming invalid json using reactor kafka?","body":"<p>What I am trying to achieve:</p>\n<p>With a Reactor Kafka Consumer, consume messages, and be able to &quot;do nothing&quot; when there is an error.</p>\n<p>The message inside kafka is a JSON representation of <code>Person</code>, the business flow is to convert it to <code>person</code> object.</p>\n<p>example of message input: <code>{&quot;name&quot;:&quot;John&quot;, &quot;age&quot;:30}</code></p>\n<p>However, the following can happen:\n1 - it is a happy case, the json is well formed, I can convert it to Person with objectMapper.\n2 - it is a wrong json, <code>JsonProcessingException</code>, I would like to just throw a runtime exception\n3 - the json is incomplete, like <code>{&quot;name&quot;:&quot;John&quot;, &quot;ag</code> for this case alone, I would like to ignore this case only. However, I am not able to just ignore the message.</p>\n<p>What did I try:</p>\n<pre><code>Flux&lt;Person&gt; consume() {\n        return kafkaReceiver.receive()\n                .map(oneRecordWithJson -&gt; {\n                    try {\n                        //regular flow, no issue, just transform an input to an output\n                        return objectMapper.readValue(oneRecordWithJson.value(), Person.class);\n                    } catch (JsonEOFException | JsonMappingException e) {\n                        // the json is broken in the first place, I do not want to do anything in this case.\n                        // I do not want to return a default bad object, I do not want to throw any exception\n                        // But here, I am required to return\n                        LOGGER.error(&quot;the input is broken, it is not even a valid json to begin with {}&quot;, oneRecordWithJson.value(), e);\n                        return null; //&lt;- no!\n                    } catch (JsonProcessingException e) {\n                        // this is bad, I do want to throw an exception here (which will stop the consumer, but that what is expected)\n                        throw new RuntimeException(e);\n                    }\n                })\n                .map(oneCorrectPerson -&gt; doSomething(oneCorrectPerson));\n    }\n</code></pre>\n<p>Question:</p>\n<p>How to just ignore the case when the input is not well formed? Without having to throw an exception, returning a null, a default object, etc...</p>\n"},{"tags":["java","selenium-webdriver","automated-tests","cucumber","kibana"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1690325334,"post_id":76765580,"comment_id":135337097,"body_markdown":"It&#39;s pretty useful if you want to figure out which tests get slower over time. Flake analysis is possible too if you&#39;re doing scheduled runs.","body":"It&#39;s pretty useful if you want to figure out which tests get slower over time. Flake analysis is possible too if you&#39;re doing scheduled runs."},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1690372574,"post_id":76765580,"comment_id":135343662,"body_markdown":"That depends. I capture logs for every test run and save that file into cloud and writes the files location respective to date and time in data base. In my case, I can go and check any old logs. If you want a tool to track all logs together then you can go for it.","body":"That depends. I capture logs for every test run and save that file into cloud and writes the files location respective to date and time in data base. In my case, I can go and check any old logs. If you want a tool to track all logs together then you can go for it."}],"owner":{"account_id":24894125,"reputation":27,"user_id":18765607,"display_name":"Jano Marek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690309677,"creation_date":1690309677,"question_id":76765580,"body_markdown":"I have a dilemma. I have a Cucumber-Java framework integrated with Jenkins. It is primarily sequential testing with a lot of different inputs. As an output, I have Extent Reports from Cucumber, and I&#39;m also running multiple jobs with different test sets (tags). Please tell me your honest opinion about whether it makes any sense to integrate it together with Kibana/Grafana. Is it really that beneficial, considering that it can provide historical trend analysis? Will this approach be meaningful in this case?","title":"Does Integration of DataDriven Test framework with kibana make sense?","body":"<p>I have a dilemma. I have a Cucumber-Java framework integrated with Jenkins. It is primarily sequential testing with a lot of different inputs. As an output, I have Extent Reports from Cucumber, and I'm also running multiple jobs with different test sets (tags). Please tell me your honest opinion about whether it makes any sense to integrate it together with Kibana/Grafana. Is it really that beneficial, considering that it can provide historical trend analysis? Will this approach be meaningful in this case?</p>\n"},{"tags":["java","spring-boot","gradle","intellij-idea","integration-testing"],"comments":[{"owner":{"account_id":1884162,"reputation":7056,"user_id":1703730,"display_name":"Bj&#248;rn Vester"},"score":0,"creation_date":1617653141,"post_id":66949242,"comment_id":118358723,"body_markdown":"That exact project structure is documented in the Gradle user guide [here](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests).","body":"That exact project structure is documented in the Gradle user guide <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"score":0,"creation_date":1617680036,"post_id":66949242,"comment_id":118364485,"body_markdown":"@Bj&#248;rnVester thanks! I&#39;ve actually just found the solution you suggested in another forum and it&#39;s very close to what I need but it creates the module as &#39;Source&#39; instead of &#39;Test Source&#39; and it doesn&#39;t help me. \nThis seems to be a [known issue](https://stackoverflow.com/questions/36324424/defining-a-test-source-set-for-intellij-15-with-gradle).\n\nMy manager don&#39;t want me to spend a lot of time on it and told me to create both &#39;integrationTest&#39; and &#39;unitTest&#39; under &#39;test&#39; module in different packages. I don&#39;t like it but this seems to be something that works.","body":"@Bj&#248;rnVester thanks! I&#39;ve actually just found the solution you suggested in another forum and it&#39;s very close to what I need but it creates the module as &#39;Source&#39; instead of &#39;Test Source&#39; and it doesn&#39;t help me.  This seems to be a <a href=\"https://stackoverflow.com/questions/36324424/defining-a-test-source-set-for-intellij-15-with-gradle\">known issue</a>.  My manager don&#39;t want me to spend a lot of time on it and told me to create both &#39;integrationTest&#39; and &#39;unitTest&#39; under &#39;test&#39; module in different packages. I don&#39;t like it but this seems to be something that works."}],"answers":[{"tags":[],"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675101781,"creation_date":1629272029,"answer_id":68828205,"question_id":66949242,"body_markdown":"I&#39;ll put here the solution for people who encounter the same problem.\r\n\r\nCreating a module for integrationTest (add the following to `build.gradle`):\r\n\r\n    sourceSets {\r\n    \tintegrationTest {\r\n    \t\tjava.srcDir file(&quot;src/integrationTest/java&quot;)\r\n    \t\tresources.srcDir file(&quot;src/integrationTest/resources&quot;)\r\n    \t\truntimeClasspath += sourceSets.main.runtimeClasspath + sourceSets.test.runtimeClasspath\r\n    \t\tcompileClasspath += sourceSets.main.compileClasspath + sourceSets.test.compileClasspath\r\n    \t}\r\n    }\r\n\r\nMark it as &#39;Test Source&#39; in Intellij:\r\n\r\n    plugins {\r\n        // ...\r\n\t    id &#39;idea&#39;\r\n    }\r\n    // ...\r\n    idea {\r\n    \tmodule {\r\n    \t\tsourceSets.integrationTest.allSource.srcDirs.each { srcDir -&gt; module.testSourceDirs += srcDir }\r\n    \t}\r\n    }\r\n    // ...\r\n\r\n","title":"Creating IntegrationTest folder as module in intellij","body":"<p>I'll put here the solution for people who encounter the same problem.</p>\n<p>Creating a module for integrationTest (add the following to <code>build.gradle</code>):</p>\n<pre><code>sourceSets {\n    integrationTest {\n        java.srcDir file(&quot;src/integrationTest/java&quot;)\n        resources.srcDir file(&quot;src/integrationTest/resources&quot;)\n        runtimeClasspath += sourceSets.main.runtimeClasspath + sourceSets.test.runtimeClasspath\n        compileClasspath += sourceSets.main.compileClasspath + sourceSets.test.compileClasspath\n    }\n}\n</code></pre>\n<p>Mark it as 'Test Source' in Intellij:</p>\n<pre><code>plugins {\n    // ...\n    id 'idea'\n}\n// ...\nidea {\n    module {\n        sourceSets.integrationTest.allSource.srcDirs.each { srcDir -&gt; module.testSourceDirs += srcDir }\n    }\n}\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690308953,"creation_date":1690308953,"answer_id":76765509,"question_id":66949242,"body_markdown":"Extending the accepted answer, this is how you do it in Kotlin DSL:\r\n```\r\nsourceSets {\r\n    create(&quot;integrationTest&quot;) {\r\n        java.srcDir(&quot;src/integrationTest/scala&quot;)\r\n        resources.srcDir(&quot;src/integrationTest/resources&quot;)\r\n        runtimeClasspath += sourceSets[&quot;main&quot;].runtimeClasspath + sourceSets[&quot;test&quot;].runtimeClasspath\r\n        compileClasspath += sourceSets[&quot;main&quot;].compileClasspath + sourceSets[&quot;test&quot;].compileClasspath\r\n    }\r\n}\r\n\r\nidea {\r\n    module {\r\n        val integrationTestSourceSet = sourceSets[&quot;integrationTest&quot;]\r\n        integrationTestSourceSet.allSource.srcDirs.forEach { srcDir -&gt; testSourceDirs.add(srcDir) }\r\n    }\r\n}\r\n```","title":"Creating IntegrationTest folder as module in intellij","body":"<p>Extending the accepted answer, this is how you do it in Kotlin DSL:</p>\n<pre><code>sourceSets {\n    create(&quot;integrationTest&quot;) {\n        java.srcDir(&quot;src/integrationTest/scala&quot;)\n        resources.srcDir(&quot;src/integrationTest/resources&quot;)\n        runtimeClasspath += sourceSets[&quot;main&quot;].runtimeClasspath + sourceSets[&quot;test&quot;].runtimeClasspath\n        compileClasspath += sourceSets[&quot;main&quot;].compileClasspath + sourceSets[&quot;test&quot;].compileClasspath\n    }\n}\n\nidea {\n    module {\n        val integrationTestSourceSet = sourceSets[&quot;integrationTest&quot;]\n        integrationTestSourceSet.allSource.srcDirs.forEach { srcDir -&gt; testSourceDirs.add(srcDir) }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1411,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68828205,"answer_count":2,"score":2,"last_activity_date":1690308953,"creation_date":1617605441,"question_id":66949242,"body_markdown":"I would like to add integration tests to my spring boot application.\r\nCurrently I don&#39;t have unit tests but I want to keep the standard project layout:\r\n```\r\n Demo\r\n    src\r\n       main\r\n|   |   |   java\r\n       integrationTest\r\n|   |   |   java\r\n       test\r\n|   |   |   java\r\n```\r\nMy questions are:\r\n\r\nShould I create integrationTest folder as module?\r\nIf so - why? and how can I do it in intellij?\r\n\r\n&#39;main&#39; and &#39;test&#39; are already defined as modules under &#39;Demo&#39; which is also defined as module.\r\n\r\nI&#39;ve tried several times to set it via &#39;Project Structure&#39; but it wasn&#39;t created under &#39;Demo&#39; and caused to a mess by creating a different src folder and another build.gardle file\r\n\r\nand when I succeeded to create it under &#39;Demo&#39;, it added a new line to setting.gradle file: include &#39;integrationTest&#39;\r\n\r\nI&#39;m really confused with it.\r\n\r\nCan anyone help me how to create this submodule (if needed)?\r\n\r\nThanks","title":"Creating IntegrationTest folder as module in intellij","body":"<p>I would like to add integration tests to my spring boot application.\nCurrently I don't have unit tests but I want to keep the standard project layout:</p>\n<pre><code> Demo\n    src\n       main\n|   |   |   java\n       integrationTest\n|   |   |   java\n       test\n|   |   |   java\n</code></pre>\n<p>My questions are:</p>\n<p>Should I create integrationTest folder as module?\nIf so - why? and how can I do it in intellij?</p>\n<p>'main' and 'test' are already defined as modules under 'Demo' which is also defined as module.</p>\n<p>I've tried several times to set it via 'Project Structure' but it wasn't created under 'Demo' and caused to a mess by creating a different src folder and another build.gardle file</p>\n<p>and when I succeeded to create it under 'Demo', it added a new line to setting.gradle file: include 'integrationTest'</p>\n<p>I'm really confused with it.</p>\n<p>Can anyone help me how to create this submodule (if needed)?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","deployment"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1690309187,"post_id":76765408,"comment_id":135334569,"body_markdown":"Welcome to stackoverflow. Asking for recommendations is off-topic, see [help/on-topic]. If you&#39;re a student, maybe ask if your university can host. Or put the code on github. As a hiring manager I&#39;ll rather look at your code than how your app looks in the browser anyway.","body":"Welcome to stackoverflow. Asking for recommendations is off-topic, see <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>. If you&#39;re a student, maybe ask if your university can host. Or put the code on github. As a hiring manager I&#39;ll rather look at your code than how your app looks in the browser anyway."}],"owner":{"account_id":26807550,"reputation":1,"user_id":20398633,"display_name":"SUPRANSHU SINGH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690308073,"creation_date":1690308073,"question_id":76765408,"body_markdown":"I had created a portfolio website by using spring boot, as we all know that heruku is now paid and railway.app is also paid now from previous few weeks.There is one website know as RENDER is available for deploaying the websites that are made by using spring boot, but its servise is very slow, the websites doesn&#39;t even runs on the browser after a day of deployement.\r\nIn my portfolio website, i had only used emailApi from java and nothing else like database, so it should be easy to deploy.\r\n\r\nI want recommendation of a website to deploy my  Spring bott web application which should be free because I am just a student and I don&#39;t have money to spend. The deployment should be smooth and easy also the speed of website should be well enough.","title":"Spring boot webapp deployement","body":"<p>I had created a portfolio website by using spring boot, as we all know that heruku is now paid and railway.app is also paid now from previous few weeks.There is one website know as RENDER is available for deploaying the websites that are made by using spring boot, but its servise is very slow, the websites doesn't even runs on the browser after a day of deployement.\nIn my portfolio website, i had only used emailApi from java and nothing else like database, so it should be easy to deploy.</p>\n<p>I want recommendation of a website to deploy my  Spring bott web application which should be free because I am just a student and I don't have money to spend. The deployment should be smooth and easy also the speed of website should be well enough.</p>\n"},{"tags":["java","android","webview","java-native-interface","native-activity"],"answers":[{"tags":[],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690307899,"creation_date":1690307899,"answer_id":76765391,"question_id":76489030,"body_markdown":"It appears it is impossible to generate the classes without actual Java code.\r\n\r\nThe solution for me was to use WebMessage Pipes and intercept null callbacks. See this:\r\n\r\nhttps://stackoverflow.com/questions/76716355/acessing-messagepayloadjni-class-in-jni","title":"How to create classes exclusively in JNI / Android Native Acitivites","body":"<p>It appears it is impossible to generate the classes without actual Java code.</p>\n<p>The solution for me was to use WebMessage Pipes and intercept null callbacks. See this:</p>\n<p><a href=\"https://stackoverflow.com/questions/76716355/acessing-messagepayloadjni-class-in-jni\">Acessing MessagePayloadJni class in JNI</a></p>\n"}],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765391,"answer_count":1,"score":0,"last_activity_date":1690307899,"creation_date":1686909448,"question_id":76489030,"body_markdown":"I have Web Views working in my Native Activity, without any java at all.  Because I&#39;m writing a NativeActivity, using Java is quite painful (if not impossible).  And it&#39;s not too hard to get WebView&#39;s working.  But one issue is the WebViews can only do things like navigate to URLs, or kind of execute JavaScript.\r\n\r\nBut any kind of callback functionality is difficult -- unless -- there is some way using the JNI only, to create a new `ValueCallback&lt;String&gt;`, in C which would override the `onReceiveValue` function.  Only issue is I can&#39;t seem to find any examples of this.\r\n\r\nWhat is the general approach to &quot;generating&quot; classes in the JNI / Native Activities","title":"How to create classes exclusively in JNI / Android Native Acitivites","body":"<p>I have Web Views working in my Native Activity, without any java at all.  Because I'm writing a NativeActivity, using Java is quite painful (if not impossible).  And it's not too hard to get WebView's working.  But one issue is the WebViews can only do things like navigate to URLs, or kind of execute JavaScript.</p>\n<p>But any kind of callback functionality is difficult -- unless -- there is some way using the JNI only, to create a new <code>ValueCallback&lt;String&gt;</code>, in C which would override the <code>onReceiveValue</code> function.  Only issue is I can't seem to find any examples of this.</p>\n<p>What is the general approach to &quot;generating&quot; classes in the JNI / Native Activities</p>\n"},{"tags":["java","javafx","focus","tableview","javafx-8"],"answers":[{"tags":[],"owner":{"account_id":9729040,"reputation":2257,"user_id":7214815,"display_name":"Dmytro Maslenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500323433,"creation_date":1500323433,"answer_id":45153163,"question_id":45137655,"body_markdown":"I see the next solution: you have a temporary variable which will point to the last selected node and you listen to 2 table views for focused property:\r\n\r\n    Node lastSelectedTable = null;\r\n\r\n    tableView1.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n        if (newValue) {\r\n            lastSelectedTable = tableView1;\r\n        }\r\n    });\r\n\r\n    tableView2.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n        if (newValue) {\r\n            lastSelectedTable = tableView2;\r\n        }\r\n    });\r\n\r\nAt any time under &#39;lastSelectedTable&#39; you have a reference to really latest focused table.","title":"JavaFx : get the last focused table","body":"<p>I see the next solution: you have a temporary variable which will point to the last selected node and you listen to 2 table views for focused property:</p>\n\n<pre><code>Node lastSelectedTable = null;\n\ntableView1.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\n    if (newValue) {\n        lastSelectedTable = tableView1;\n    }\n});\n\ntableView2.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\n    if (newValue) {\n        lastSelectedTable = tableView2;\n    }\n});\n</code></pre>\n\n<p>At any time under 'lastSelectedTable' you have a reference to really latest focused table.</p>\n"}],"owner":{"account_id":10625553,"reputation":3067,"user_id":7825294,"accept_rate":73,"display_name":"Sunflame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690307330,"creation_date":1500274144,"question_id":45137655,"body_markdown":"I have a view with two `TableView`s, and I want to get the last selected table, so which table&#39;s row was selected last time. I tried:\r\n\r\n  * `table.isFocused()` but it returns false for both tables, I guess because I have selected a row not the table itself. \r\n\r\n  * `table.getFocusModel().getFocusedItem() != null`, but it returns true for both tables if I select a row in both table.\r\n\r\nSo how can I get the last selected table&#39;s row, I have a dirty solution, to define an enum and add a listener to the `tableView`&#39;s selection model, but I think there is a simpler way, so do you have any idea? For me the best would be a method that returns true for one tableview and false for the other, of course true for the last selected.","title":"JavaFx : get the last focused table","body":"<p>I have a view with two <code>TableView</code>s, and I want to get the last selected table, so which table's row was selected last time. I tried:</p>\n<ul>\n<li><p><code>table.isFocused()</code> but it returns false for both tables, I guess because I have selected a row not the table itself.</p>\n</li>\n<li><p><code>table.getFocusModel().getFocusedItem() != null</code>, but it returns true for both tables if I select a row in both table.</p>\n</li>\n</ul>\n<p>So how can I get the last selected table's row, I have a dirty solution, to define an enum and add a listener to the <code>tableView</code>'s selection model, but I think there is a simpler way, so do you have any idea? For me the best would be a method that returns true for one tableview and false for the other, of course true for the last selected.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690295183,"post_id":76763633,"comment_id":135331554,"body_markdown":"For reference, the source of the problem is  [LeetCode 31](https://leetcode.com/problems/next-permutation/)","body":"For reference, the source of the problem is  <a href=\"https://leetcode.com/problems/next-permutation/\" rel=\"nofollow noreferrer\">LeetCode 31</a>"}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306839,"creation_date":1690296117,"answer_id":76763845,"question_id":76763633,"body_markdown":"Your code seems to be missing the step where you reverse the subarray from index &quot;i+1&quot; to the end of the array. This step is essential to ensure you get the next lexicographically greater permutation.\r\n\r\nTo fix the issue, make sure to add the reverse operation in the function, as shown in the correct implementation above. After adding the reverse step, your function should give the correct output for the given test case and other cases as well.\r\n\r\nI solved this way:\r\n\r\n```java\r\nclass Solution {\r\n\tpublic static void nextPermutation(int[] nums) {\r\n\t\tint i = nums.length - 2;\r\n\t\twhile (i &gt;= 0 &amp;&amp; nums[i] &gt;= nums[i + 1]) {\r\n\t\t\ti--;\r\n\t\t}\r\n\r\n\t\tif (i &gt;= 0) {\r\n\t\t\tint j = nums.length - 1;\r\n\t\t\twhile (j &gt;= 0 &amp;&amp; nums[j] &lt;= nums[i]) {\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\r\n\t\t\tswap(nums, i, j);\r\n\t\t}\r\n\r\n\t\treverse(nums, i + 1);\r\n\t\t\r\n\t\tprintArray(nums);\r\n\t}\r\n\r\n\tprivate static void swap(int[] nums, int i, int j) {\r\n\t\tint temp = nums[i];\r\n\t\tnums[i] = nums[j];\r\n\t\tnums[j] = temp;\r\n\t}\r\n\r\n\tprivate static void reverse(int[] nums, int start) {\r\n\t\tint i = start;\r\n\t\tint j = nums.length - 1;\r\n\t\twhile (i &lt; j) {\r\n\t\t\tswap(nums, i, j);\r\n\t\t\ti++;\r\n\t\t\tj--;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void printArray(int[] nums) {\r\n\t\tSystem.out.print(&quot;[&quot;);\r\n\t\tfor (int i = 0; i &lt; nums.length; i++) {\r\n\t\t\tSystem.out.print(nums[i]);\r\n\t\t\tif (i != nums.length - 1) {\r\n\t\t\t\tSystem.out.print(&quot;, &quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;]&quot;);\r\n\t}\r\n}\r\n```\r\nCheck this out: [LeetCode31 Full Explanation][1]\r\n\r\n\r\n  [1]: https://leetcode.com/problems/next-permutation/solutions/3473399/beats-100-full-explanation-in-steps/","title":"Next Permutation in Java","body":"<p>Your code seems to be missing the step where you reverse the subarray from index &quot;i+1&quot; to the end of the array. This step is essential to ensure you get the next lexicographically greater permutation.</p>\n<p>To fix the issue, make sure to add the reverse operation in the function, as shown in the correct implementation above. After adding the reverse step, your function should give the correct output for the given test case and other cases as well.</p>\n<p>I solved this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public static void nextPermutation(int[] nums) {\n        int i = nums.length - 2;\n        while (i &gt;= 0 &amp;&amp; nums[i] &gt;= nums[i + 1]) {\n            i--;\n        }\n\n        if (i &gt;= 0) {\n            int j = nums.length - 1;\n            while (j &gt;= 0 &amp;&amp; nums[j] &lt;= nums[i]) {\n                j--;\n            }\n\n            swap(nums, i, j);\n        }\n\n        reverse(nums, i + 1);\n        \n        printArray(nums);\n    }\n\n    private static void swap(int[] nums, int i, int j) {\n        int temp = nums[i];\n        nums[i] = nums[j];\n        nums[j] = temp;\n    }\n\n    private static void reverse(int[] nums, int start) {\n        int i = start;\n        int j = nums.length - 1;\n        while (i &lt; j) {\n            swap(nums, i, j);\n            i++;\n            j--;\n        }\n    }\n\n    private static void printArray(int[] nums) {\n        System.out.print(&quot;[&quot;);\n        for (int i = 0; i &lt; nums.length; i++) {\n            System.out.print(nums[i]);\n            if (i != nums.length - 1) {\n                System.out.print(&quot;, &quot;);\n            }\n        }\n        System.out.println(&quot;]&quot;);\n    }\n}\n</code></pre>\n<p>Check this out: <a href=\"https://leetcode.com/problems/next-permutation/solutions/3473399/beats-100-full-explanation-in-steps/\" rel=\"nofollow noreferrer\">LeetCode31 Full Explanation</a></p>\n"}],"owner":{"account_id":29088482,"reputation":11,"user_id":22282904,"display_name":"Pari Patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690306839,"creation_date":1690294517,"question_id":76763633,"body_markdown":"I am trying to solve the next permutation question in java but 1/3 test case fails.. \r\n\r\nQ. A permutation of an array of integers is an arrangement of its members into a sequence or linear order.\r\n\r\nFor example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].\r\nThe next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).\r\n\r\nFor example, the next permutation of arr = [1,2,3] is [1,3,2].\r\nSimilarly, the next permutation of arr = [2,3,1] is [3,1,2].\r\nWhile the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.\r\nGiven an array of integers nums, find the next permutation of nums.\r\n\r\nThe replacement must be in place and use only constant extra memory.\r\n\r\nExample 1:\r\n\r\nInput: nums = [1,2,3]\r\nOutput: [1,3,2]\r\nExample 2:\r\n\r\nInput: nums = [3,2,1]\r\nOutput: [1,2,3]\r\nExample 3:\r\n\r\nInput: nums = [1,1,5]\r\nOutput: [1,5,1]\r\n\r\n\r\n\r\n\r\n\r\nMy Code:-\r\n\r\n```\r\nclass Solution {\r\n    public void nextPermutation(int[] nums) {\r\n        int ind=1;\r\n        int n= nums.length;\r\n        for(int i=n-2;i&gt;=0;i--){\r\n            if(nums[i]&lt;nums[i+1]){\r\n                ind=i;\r\n                break;\r\n            }\r\n        }\r\n        for(int i=n-1;i&gt;=0;i--){\r\n        if (ind==-1){\r\n            reverse(nums,i+1,n-1);\r\n        }\r\n        }\r\n\r\n        for(int j=n-1;j&gt;ind;j--){\r\n            if(nums[j]&gt;nums[ind]){\r\n                swap(nums,j,ind);\r\n                break;\r\n            }\r\n        }\r\n\r\n        reverse(nums,0,n-1);\r\n\r\n        for(int k=0;k&lt;n;k++){\r\n            System.out.println(nums[k]);\r\n        }\r\n    }\r\n    public static void swap(int n[],int i, int j){\r\n        int temp=n[i];\r\n        n[i]=n[j];\r\n        n[j]=temp;\r\n    }\r\n    public static void reverse(int n[],int i, int j){\r\n        while(i&lt;j){\r\n            swap(n,i,j);\r\n            i++;\r\n            j--;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n_____________________________________________________________\r\nthe driver code just accepts the input and calls the function..\r\n\r\nWhat mistake am I making? \r\n\r\nmy failed test case:-\r\n\r\nInput\r\nnums =\r\n[1,2,3]\r\n\r\nStdout\r\n2\r\n3\r\n1\r\n\r\nOutput\r\n[2,3,1]\r\n\r\nExpected\r\n[1,3,2]","title":"Next Permutation in Java","body":"<p>I am trying to solve the next permutation question in java but 1/3 test case fails..</p>\n<p>Q. A permutation of an array of integers is an arrangement of its members into a sequence or linear order.</p>\n<p>For example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].\nThe next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).</p>\n<p>For example, the next permutation of arr = [1,2,3] is [1,3,2].\nSimilarly, the next permutation of arr = [2,3,1] is [3,1,2].\nWhile the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.\nGiven an array of integers nums, find the next permutation of nums.</p>\n<p>The replacement must be in place and use only constant extra memory.</p>\n<p>Example 1:</p>\n<p>Input: nums = [1,2,3]\nOutput: [1,3,2]\nExample 2:</p>\n<p>Input: nums = [3,2,1]\nOutput: [1,2,3]\nExample 3:</p>\n<p>Input: nums = [1,1,5]\nOutput: [1,5,1]</p>\n<p>My Code:-</p>\n<pre><code>class Solution {\n    public void nextPermutation(int[] nums) {\n        int ind=1;\n        int n= nums.length;\n        for(int i=n-2;i&gt;=0;i--){\n            if(nums[i]&lt;nums[i+1]){\n                ind=i;\n                break;\n            }\n        }\n        for(int i=n-1;i&gt;=0;i--){\n        if (ind==-1){\n            reverse(nums,i+1,n-1);\n        }\n        }\n\n        for(int j=n-1;j&gt;ind;j--){\n            if(nums[j]&gt;nums[ind]){\n                swap(nums,j,ind);\n                break;\n            }\n        }\n\n        reverse(nums,0,n-1);\n\n        for(int k=0;k&lt;n;k++){\n            System.out.println(nums[k]);\n        }\n    }\n    public static void swap(int n[],int i, int j){\n        int temp=n[i];\n        n[i]=n[j];\n        n[j]=temp;\n    }\n    public static void reverse(int n[],int i, int j){\n        while(i&lt;j){\n            swap(n,i,j);\n            i++;\n            j--;\n        }\n    }\n}\n</code></pre>\n<hr />\n<p>the driver code just accepts the input and calls the function..</p>\n<p>What mistake am I making?</p>\n<p>my failed test case:-</p>\n<p>Input\nnums =\n[1,2,3]</p>\n<p>Stdout\n2\n3\n1</p>\n<p>Output\n[2,3,1]</p>\n<p>Expected\n[1,3,2]</p>\n"},{"tags":["java","xml","xslt","sap-cpi"],"comments":[{"owner":{"account_id":8112,"reputation":64592,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":0,"creation_date":1690286126,"post_id":76762287,"comment_id":135329233,"body_markdown":"What is the criteria for &quot;similar&quot;?","body":"What is the criteria for &quot;similar&quot;?"},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1690289894,"post_id":76762287,"comment_id":135330180,"body_markdown":"Seems like a trivial problem. Where exactly are you stuck with this?","body":"Seems like a trivial problem. Where exactly are you stuck with this?"},{"owner":{"account_id":12578778,"reputation":12325,"user_id":9150270,"display_name":"Sandra Rossi"},"score":0,"creation_date":1690293473,"post_id":76762287,"comment_id":135331118,"body_markdown":"Please post minimal example, only `productType` nodes are needed for your question. It&#39;s only a [tag:xslt] question, why using other tags?","body":"Please post minimal example, only <code>productType</code> nodes are needed for your question. It&#39;s only a <a href=\"https://stackoverflow.com/questions/tagged/xslt\">xslt</a> question, why using other tags?"},{"owner":{"account_id":4570164,"reputation":4170,"user_id":3710053,"display_name":"Siebe Jongebloed"},"score":0,"creation_date":1690295354,"post_id":76762287,"comment_id":135331600,"body_markdown":"@SandraRossi: xslt is mostly the best option when transforming xml, but maybe java or spa-cpi have other options as well?","body":"@SandraRossi: xslt is mostly the best option when transforming xml, but maybe java or spa-cpi have other options as well?"}],"answers":[{"tags":[],"owner":{"account_id":22562945,"reputation":462,"user_id":16750357,"display_name":"al.truisme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306808,"creation_date":1690306808,"answer_id":76765283,"question_id":76762287,"body_markdown":"I get your desired result given your input set with the XSLT3 implementation.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n  version=&quot;3.0&quot;\r\n  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n  exclude-result-prefixes=&quot;#all&quot;&gt;\r\n  \r\n  &lt;xsl:output indent=&quot;yes&quot; /&gt;\r\n  \r\n  &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\r\n  \r\n  &lt;xsl:template match=&quot;/Orders/*[ (name(.) || &#39;Value&#39;) eq name(*[1]) ]&quot; &gt;\r\n    &lt;xsl:if test=&quot;current() is /Orders/*[name(current()) eq name(.)][1]&quot; &gt;\r\n      &lt;xsl:copy&gt;\r\n        &lt;xsl:apply-templates /&gt;\r\n      &lt;/xsl:copy&gt;\r\n    &lt;/xsl:if&gt;\r\n  &lt;/xsl:template&gt;\r\n  \r\n  &lt;xsl:template match=&quot;/Orders/*/*&quot;&gt;\r\n    &lt;xsl:copy&gt;\r\n      &lt;xsl:value-of select=&quot;/Orders/*/*[name(current()) eq name(.)]&quot; \r\n                    separator=&quot;,&quot; /&gt;\r\n    &lt;/xsl:copy&gt;\r\n  &lt;/xsl:template&gt;\r\n  \r\n&lt;/xsl:stylesheet&gt;\r\n```","title":"XSLT mapping to concatenate similar node values","body":"<p>I get your desired result given your input set with the XSLT3 implementation.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n  version=&quot;3.0&quot;\n  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n  exclude-result-prefixes=&quot;#all&quot;&gt;\n  \n  &lt;xsl:output indent=&quot;yes&quot; /&gt;\n  \n  &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\n  \n  &lt;xsl:template match=&quot;/Orders/*[ (name(.) || 'Value') eq name(*[1]) ]&quot; &gt;\n    &lt;xsl:if test=&quot;current() is /Orders/*[name(current()) eq name(.)][1]&quot; &gt;\n      &lt;xsl:copy&gt;\n        &lt;xsl:apply-templates /&gt;\n      &lt;/xsl:copy&gt;\n    &lt;/xsl:if&gt;\n  &lt;/xsl:template&gt;\n  \n  &lt;xsl:template match=&quot;/Orders/*/*&quot;&gt;\n    &lt;xsl:copy&gt;\n      &lt;xsl:value-of select=&quot;/Orders/*/*[name(current()) eq name(.)]&quot; \n                    separator=&quot;,&quot; /&gt;\n    &lt;/xsl:copy&gt;\n  &lt;/xsl:template&gt;\n  \n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}],"owner":{"account_id":29087320,"reputation":11,"user_id":22281984,"display_name":"Jagadeesh Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690306808,"creation_date":1690284757,"question_id":76762287,"body_markdown":"I want `productType` nodes to be combined and values to be concatenated.\r\n\r\nI have sample input XML as below.\r\n\r\n    &lt;Orders&gt;\r\n        &lt;fromDate&gt;Date&lt;/fromDate&gt;\r\n        &lt;toDate&gt;Date&lt;/toDate&gt;\r\n        &lt;soldTo&gt;String&lt;/soldTo&gt;\r\n        &lt;shipTo&gt;String&lt;/shipTo&gt;\r\n        &lt;endUser&gt;String&lt;/endUser&gt;\r\n        &lt;customerPO&gt;String&lt;/customerPO&gt;\r\n        &lt;orderId&gt;String&lt;/orderId&gt;\r\n        &lt;consigneePO&gt;String&lt;/consigneePO&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String1&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String2&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String3&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String4&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String5&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String6&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n    &lt;/Orders&gt;\r\n\r\nExpected output:\r\n\r\n    &lt;Orders&gt;\r\n        &lt;fromDate&gt;Date&lt;/fromDate&gt;\r\n        &lt;toDate&gt;Date&lt;/toDate&gt;\r\n        &lt;soldTo&gt;String&lt;/soldTo&gt;\r\n        &lt;shipTo&gt;String&lt;/shipTo&gt;\r\n        &lt;endUser&gt;String&lt;/endUser&gt;\r\n        &lt;customerPO&gt;String&lt;/customerPO&gt;\r\n        &lt;orderId&gt;String&lt;/orderId&gt;\r\n        &lt;consigneePO&gt;String&lt;/consigneePO&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String1,String2&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String3,String4&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String5,String6&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n    &lt;/Orders&gt;","title":"XSLT mapping to concatenate similar node values","body":"<p>I want <code>productType</code> nodes to be combined and values to be concatenated.</p>\n<p>I have sample input XML as below.</p>\n<pre><code>&lt;Orders&gt;\n    &lt;fromDate&gt;Date&lt;/fromDate&gt;\n    &lt;toDate&gt;Date&lt;/toDate&gt;\n    &lt;soldTo&gt;String&lt;/soldTo&gt;\n    &lt;shipTo&gt;String&lt;/shipTo&gt;\n    &lt;endUser&gt;String&lt;/endUser&gt;\n    &lt;customerPO&gt;String&lt;/customerPO&gt;\n    &lt;orderId&gt;String&lt;/orderId&gt;\n    &lt;consigneePO&gt;String&lt;/consigneePO&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String1&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String2&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String3&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String4&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String5&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String6&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n&lt;/Orders&gt;\n</code></pre>\n<p>Expected output:</p>\n<pre><code>&lt;Orders&gt;\n    &lt;fromDate&gt;Date&lt;/fromDate&gt;\n    &lt;toDate&gt;Date&lt;/toDate&gt;\n    &lt;soldTo&gt;String&lt;/soldTo&gt;\n    &lt;shipTo&gt;String&lt;/shipTo&gt;\n    &lt;endUser&gt;String&lt;/endUser&gt;\n    &lt;customerPO&gt;String&lt;/customerPO&gt;\n    &lt;orderId&gt;String&lt;/orderId&gt;\n    &lt;consigneePO&gt;String&lt;/consigneePO&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String1,String2&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String3,String4&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String5,String6&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n&lt;/Orders&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jackson","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":6623193,"reputation":505,"user_id":5114189,"display_name":"msilb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582278197,"creation_date":1582278197,"answer_id":60335899,"question_id":60335898,"body_markdown":"After quite some time spent debugging Spring WebFlux / Jackson library code, I was able to finally find a hint to solve the issue looking at the reactive WebFlux WebClient [docs][1]. There is some custom plumbing required to make WebClient use the default auto-configured Jackson ObjectMapper. The solution is to configure the default decoder used for processing Server-Sent Events when creating new instance of the WebClient. Here is the sample code:\r\n\r\n```\r\n@Component\r\npublic class MarketDataFetcher implements CommandLineRunner {\r\n\r\n    // ...\r\n\r\n    private final WebClient webClient;\r\n\r\n    public MarketDataFetcher(ObjectMapper objectMapper) {\r\n        webClient = createWebClient(objectMapper);\r\n    }\r\n\r\n    private WebClient createWebClient(ObjectMapper objectMapper) {\r\n        return WebClient.builder()\r\n                .codecs(configurer -&gt; configurer.defaultCodecs()\r\n                        .serverSentEventDecoder(new Jackson2JsonDecoder(objectMapper)))\r\n                .baseUrl(BASE_URL)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n`ObjectMapper` is automatically injected by Spring, so no `@Autowired` annotation is needed.\r\n\r\nIt would certainly help if this could be made more explicit in the official documentation somehow. Hope this answer can be useful for someone facing similar issue!\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>After quite some time spent debugging Spring WebFlux / Jackson library code, I was able to finally find a hint to solve the issue looking at the reactive WebFlux WebClient <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder\" rel=\"nofollow noreferrer\">docs</a>. There is some custom plumbing required to make WebClient use the default auto-configured Jackson ObjectMapper. The solution is to configure the default decoder used for processing Server-Sent Events when creating new instance of the WebClient. Here is the sample code:</p>\n\n<pre><code>@Component\npublic class MarketDataFetcher implements CommandLineRunner {\n\n    // ...\n\n    private final WebClient webClient;\n\n    public MarketDataFetcher(ObjectMapper objectMapper) {\n        webClient = createWebClient(objectMapper);\n    }\n\n    private WebClient createWebClient(ObjectMapper objectMapper) {\n        return WebClient.builder()\n                .codecs(configurer -&gt; configurer.defaultCodecs()\n                        .serverSentEventDecoder(new Jackson2JsonDecoder(objectMapper)))\n                .baseUrl(BASE_URL)\n                .build();\n    }\n}\n</code></pre>\n\n<p><code>ObjectMapper</code> is automatically injected by Spring, so no <code>@Autowired</code> annotation is needed.</p>\n\n<p>It would certainly help if this could be made more explicit in the official documentation somehow. Hope this answer can be useful for someone facing similar issue!</p>\n"},{"tags":[],"owner":{"account_id":7298493,"reputation":304,"user_id":5562284,"display_name":"nouveu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690186927,"creation_date":1690186927,"answer_id":76752610,"question_id":60335898,"body_markdown":"I found in Spring Boot [docs][1] that:\r\n\r\n&gt; the client instance is built using the WebClient.Builder bean auto-configured by Spring Boot\r\n\r\nThere is also section dedicated to [WebClient customization][2] which says:\r\n\r\n&gt; To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required.\r\n\r\nTherefore simplest way to use configured `ObjectMapper` is to define `WebClient` bean like this:\r\n\r\n```java\r\n@Bean\r\npublic WebClient webClient(WebClient.Builder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nThat is pretty unconvenient that Spring Boot doesn&#39;t do that by default given how any other stuff is already configured to use out of box but it is much better than configuring codecs by hand.\r\n\r\n  [1]: https://%20https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.reactive.reactive-server-resources-configuration\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.rest-client.webclient.customization","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>I found in Spring Boot <a href=\"https://%20https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.reactive.reactive-server-resources-configuration\" rel=\"nofollow noreferrer\">docs</a> that:</p>\n<blockquote>\n<p>the client instance is built using the WebClient.Builder bean auto-configured by Spring Boot</p>\n</blockquote>\n<p>There is also section dedicated to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.rest-client.webclient.customization\" rel=\"nofollow noreferrer\">WebClient customization</a> which says:</p>\n<blockquote>\n<p>To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required.</p>\n</blockquote>\n<p>Therefore simplest way to use configured <code>ObjectMapper</code> is to define <code>WebClient</code> bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic WebClient webClient(WebClient.Builder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>That is pretty unconvenient that Spring Boot doesn't do that by default given how any other stuff is already configured to use out of box but it is much better than configuring codecs by hand.</p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306788,"creation_date":1690306788,"answer_id":76765280,"question_id":60335898,"body_markdown":"I haven&#39;t tried the high-level property settings mentioned in the question, but you can surgically configure the Jackson `ObjectMapper` at the application level using `Jackson2ObjectMapperBuilderCustomizer`, as I explained in [my answer to another question][1].\r\n\r\n```java\r\n@Configuration\r\npublic class MyAppConfiguration {\r\n\r\n  @Bean\r\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\r\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\r\n  }\r\n\r\n}\r\n```\r\n\r\nIn limited testing WebFlux seems to use this configuration, e.g. with `.bodyToMono(SomeType.class)`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76765254","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>I haven't tried the high-level property settings mentioned in the question, but you can surgically configure the Jackson <code>ObjectMapper</code> at the application level using <code>Jackson2ObjectMapperBuilderCustomizer</code>, as I explained in <a href=\"https://stackoverflow.com/a/76765254\">my answer to another question</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyAppConfiguration {\n\n  @Bean\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\n  }\n\n}\n</code></pre>\n<p>In limited testing WebFlux seems to use this configuration, e.g. with <code>.bodyToMono(SomeType.class)</code>.</p>\n"}],"owner":{"account_id":6623193,"reputation":505,"user_id":5114189,"display_name":"msilb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4677,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1690306788,"creation_date":1582278197,"question_id":60335898,"body_markdown":"In my Spring Boot application I&#39;m making use of the reactive WebFlux WebClient to retrieve streaming JSON data from an SSE (Server-Sent Events) endpoint. Modifying the default auto-configured Jackson ObjectMapper behavior by setting config options in Spring Boot like `spring.jackson.deserialization.read-date-timestamps-as-nanoseconds=false` as suggested by the [official docs][1] has no effect on the WebFlux WebClient. I also tried other suggestions outlined in this [SO thread][2] like creating custom beans for WebFlux configuration but they did not help, the config is still not being picked up.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-customize-the-jackson-objectmapper\r\n  [2]: https://stackoverflow.com/questions/43195987/configured-objectmapper-not-used-in-spring-boot-webflux/43241547","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>In my Spring Boot application I'm making use of the reactive WebFlux WebClient to retrieve streaming JSON data from an SSE (Server-Sent Events) endpoint. Modifying the default auto-configured Jackson ObjectMapper behavior by setting config options in Spring Boot like <code>spring.jackson.deserialization.read-date-timestamps-as-nanoseconds=false</code> as suggested by the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-customize-the-jackson-objectmapper\" rel=\"nofollow noreferrer\">official docs</a> has no effect on the WebFlux WebClient. I also tried other suggestions outlined in this <a href=\"https://stackoverflow.com/questions/43195987/configured-objectmapper-not-used-in-spring-boot-webflux/43241547\">SO thread</a> like creating custom beans for WebFlux configuration but they did not help, the config is still not being picked up.</p>\n"},{"tags":["java","json","spring","reactive-programming","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1516926426,"creation_date":1494925676,"answer_id":43997021,"question_id":43769301,"body_markdown":"Here&#39;s an example that customizes the `ObjectMapper` for JSON (de)serialization.\r\nNote that for streaming purposes, different encoders/decoders are being used but the principle remains the same for their configuration.\r\n\r\n        ExchangeStrategies strategies = ExchangeStrategies\r\n                .builder()\r\n                .codecs(clientDefaultCodecsConfigurer -&gt; {\r\n                    clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n                    clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n\r\n                }).build();\r\n        \r\n        WebClient webClient = WebClient.builder().exchangeStrategies(strategies).build();","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Here's an example that customizes the <code>ObjectMapper</code> for JSON (de)serialization.\nNote that for streaming purposes, different encoders/decoders are being used but the principle remains the same for their configuration.</p>\n\n<pre><code>    ExchangeStrategies strategies = ExchangeStrategies\n            .builder()\n            .codecs(clientDefaultCodecsConfigurer -&gt; {\n                clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n                clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n\n            }).build();\n\n    WebClient webClient = WebClient.builder().exchangeStrategies(strategies).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11558150,"reputation":101,"user_id":8468681,"display_name":"Ricardo"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1502895997,"creation_date":1502895997,"answer_id":45717173,"question_id":43769301,"body_markdown":"You can configure this for a specific WebClient:\r\n\r\n    @Autowired\r\n    public ItunesAlbumServiceImpl(ObjectMapper mapper) {\r\n        ExchangeStrategies strategies = ExchangeStrategies.builder().codecs(clientCodecConfigurer -&gt;\r\n            clientCodecConfigurer.customCodecs().decoder(\r\n                    new Jackson2JsonDecoder(mapper,\r\n                            new MimeType(&quot;text&quot;, &quot;javascript&quot;, StandardCharsets.UTF_8)))\r\n        ).build();\r\n     \r\n        webClient = WebClient.builder()\r\n                .exchangeStrategies(strategies)\r\n                .baseUrl(&quot;https://itunes.apple.com&quot;)\r\n                .build();\r\n    }\r\n\r\nBut also on &#39;application level&#39;\r\n\r\nby configuring a `CodecCustomizer`:\r\n\r\n    @Bean\r\n    public CodecCustomizer jacksonLegacyJsonCustomizer(ObjectMapper mapper) {\r\n        return (configurer) -&gt; {\r\n            MimeType textJavascript = new MimeType(&quot;text&quot;, &quot;javascript&quot;, StandardCharsets.UTF_8);\r\n            CodecConfigurer.CustomCodecs customCodecs = configurer.customCodecs();\r\n            customCodecs.decoder(\r\n                    new Jackson2JsonDecoder(mapper, textJavascript));\r\n            customCodecs.encoder(\r\n                    new Jackson2JsonEncoder(mapper, textJavascript));\r\n        };\r\n    }\r\n\r\nwhich will be made effective by the `WebClientAutoConfiguration` as a `WebClient.Builder` bean:\r\n\r\n    @Autowired\r\n    public ItunesAlbumServiceImpl(WebClient.Builder webclientBuilder) {\r\n        webClient = webclientBuilder.baseUrl(&quot;https://itunes.apple.com&quot;).build();\r\n    }","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>You can configure this for a specific WebClient:</p>\n\n<pre><code>@Autowired\npublic ItunesAlbumServiceImpl(ObjectMapper mapper) {\n    ExchangeStrategies strategies = ExchangeStrategies.builder().codecs(clientCodecConfigurer -&gt;\n        clientCodecConfigurer.customCodecs().decoder(\n                new Jackson2JsonDecoder(mapper,\n                        new MimeType(\"text\", \"javascript\", StandardCharsets.UTF_8)))\n    ).build();\n\n    webClient = WebClient.builder()\n            .exchangeStrategies(strategies)\n            .baseUrl(\"https://itunes.apple.com\")\n            .build();\n}\n</code></pre>\n\n<p>But also on 'application level'</p>\n\n<p>by configuring a <code>CodecCustomizer</code>:</p>\n\n<pre><code>@Bean\npublic CodecCustomizer jacksonLegacyJsonCustomizer(ObjectMapper mapper) {\n    return (configurer) -&gt; {\n        MimeType textJavascript = new MimeType(\"text\", \"javascript\", StandardCharsets.UTF_8);\n        CodecConfigurer.CustomCodecs customCodecs = configurer.customCodecs();\n        customCodecs.decoder(\n                new Jackson2JsonDecoder(mapper, textJavascript));\n        customCodecs.encoder(\n                new Jackson2JsonEncoder(mapper, textJavascript));\n    };\n}\n</code></pre>\n\n<p>which will be made effective by the <code>WebClientAutoConfiguration</code> as a <code>WebClient.Builder</code> bean:</p>\n\n<pre><code>@Autowired\npublic ItunesAlbumServiceImpl(WebClient.Builder webclientBuilder) {\n    webClient = webclientBuilder.baseUrl(\"https://itunes.apple.com\").build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3261148,"reputation":425,"user_id":2746716,"accept_rate":50,"display_name":"Amit Yatagiri"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1583859337,"creation_date":1516897870,"answer_id":48447713,"question_id":43769301,"body_markdown":"with webflux 5.0.2, de-registerDefaults\r\n\r\n\r\n    val strategies = ExchangeStrategies.builder()\r\n                    .codecs { configurer -&gt;\r\n                        configurer.registerDefaults(false)\r\n                        configurer.customCodecs().encoder(Jackson2JsonEncoder(objectMapper, APPLICATION_JSON))\r\n                        configurer.customCodecs().decoder(Jackson2JsonDecoder(objectMapper, APPLICATION_JSON))\r\n                    }.build()\r\n\r\n","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>with webflux 5.0.2, de-registerDefaults</p>\n\n<pre><code>val strategies = ExchangeStrategies.builder()\n                .codecs { configurer -&gt;\n                    configurer.registerDefaults(false)\n                    configurer.customCodecs().encoder(Jackson2JsonEncoder(objectMapper, APPLICATION_JSON))\n                    configurer.customCodecs().decoder(Jackson2JsonDecoder(objectMapper, APPLICATION_JSON))\n                }.build()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2904275,"reputation":12430,"user_id":2490074,"accept_rate":62,"display_name":"Sarvar Nishonboyev"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1586955036,"creation_date":1586955036,"answer_id":61229164,"question_id":43769301,"body_markdown":"Configuring globally:\r\n\r\n```\r\n@Configuration\r\npublic class AppConfig {\r\n\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @Autowired\r\n    public AppConfig(ObjectMapper objectMapper) {\r\n        this.objectMapper = objectMapper;\r\n        this.webClientBuilder = WebClient.builder()\r\n                .exchangeStrategies(exchangeStrategies());\r\n    }\r\n\r\n    private ExchangeStrategies exchangeStrategies() {\r\n        Jackson2JsonEncoder encoder = new Jackson2JsonEncoder(objectMapper);\r\n        Jackson2JsonDecoder decoder = new Jackson2JsonDecoder(objectMapper);\r\n        return ExchangeStrategies\r\n                .builder()\r\n                .codecs(configurer -&gt; {\r\n                    configurer.defaultCodecs().jackson2JsonEncoder(encoder);\r\n                    configurer.defaultCodecs().jackson2JsonDecoder(decoder);\r\n                }).build();\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Configuring globally:</p>\n\n<pre><code>@Configuration\npublic class AppConfig {\n\n    private final ObjectMapper objectMapper;\n\n    @Autowired\n    public AppConfig(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n        this.webClientBuilder = WebClient.builder()\n                .exchangeStrategies(exchangeStrategies());\n    }\n\n    private ExchangeStrategies exchangeStrategies() {\n        Jackson2JsonEncoder encoder = new Jackson2JsonEncoder(objectMapper);\n        Jackson2JsonDecoder decoder = new Jackson2JsonDecoder(objectMapper);\n        return ExchangeStrategies\n                .builder()\n                .codecs(configurer -&gt; {\n                    configurer.defaultCodecs().jackson2JsonEncoder(encoder);\n                    configurer.defaultCodecs().jackson2JsonDecoder(decoder);\n                }).build();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4470329,"reputation":1272,"user_id":3636822,"display_name":"tomasulo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1589796132,"creation_date":1589796132,"answer_id":61867063,"question_id":43769301,"body_markdown":"Since Spring `5.1.13` you can use a dedicated `.codec` method to customize them:\r\n\r\n```\r\nWebClient.builder()\r\n    .codecs(configurer -&gt; {\r\n        configurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n        configurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n     })\r\n    .build();","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Since Spring <code>5.1.13</code> you can use a dedicated <code>.codec</code> method to customize them:</p>\n\n<pre><code>WebClient.builder()\n    .codecs(configurer -&gt; {\n        configurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n        configurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n     })\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12040719,"reputation":2526,"user_id":8807741,"display_name":"SeverityOne"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1604583742,"creation_date":1601307196,"answer_id":64105246,"question_id":43769301,"body_markdown":"Based on the replies above, I ended up with this code:\r\n\r\n    final ObjectMapper mapper = new ObjectMapper()\r\n        .findAndRegisterModules()\r\n        .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\r\n    final ExchangeStrategies exchangeStrategies = ExchangeStrategies.builder()\r\n        .codecs(configurer -&gt; configurer.defaultCodecs()\r\n        .jackson2JsonDecoder(new Jackson2JsonDecoder(mapper)))\r\n        .build();\r\n    final WebClient webClient = WebClient.builder()\r\n        .exchangeStrategies(exchangeStrategies)\r\n        .build();\r\n\r\nIf you don&#39;t include `.findAndRegisterModules()`, you&#39;re going to have problems when you want to deserialise things like Java 8&#39;s time objects.","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Based on the replies above, I ended up with this code:</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper()\n    .findAndRegisterModules()\n    .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\nfinal ExchangeStrategies exchangeStrategies = ExchangeStrategies.builder()\n    .codecs(configurer -&gt; configurer.defaultCodecs()\n    .jackson2JsonDecoder(new Jackson2JsonDecoder(mapper)))\n    .build();\nfinal WebClient webClient = WebClient.builder()\n    .exchangeStrategies(exchangeStrategies)\n    .build();\n</code></pre>\n<p>If you don't include <code>.findAndRegisterModules()</code>, you're going to have problems when you want to deserialise things like Java 8's time objects.</p>\n"},{"tags":[],"owner":{"account_id":1525566,"reputation":1183,"user_id":1424108,"display_name":"ibai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687863665,"creation_date":1687863665,"answer_id":76564187,"question_id":43769301,"body_markdown":"If anyone interested in customizing the `WebTestClient` during a test, then it would be a similar approach. Just need to mutate the original bean.\r\n\r\n```\r\n@Autowired\r\nprivate WebTestClient webTestClient;\r\n\r\n@Test\r\nvoid test() {\r\n    webTestClient.mutate()\r\n        .codecs(clientCodecConfigurer -&gt; clientCodecConfigurer.defaultCodecs()\r\n            .jackson2JsonDecoder(new Jackson2JsonDecoder(CUSTOM_OBJECT_MAPPER, MediaType.APPLICATION_JSON)))\r\n        .build()\r\n        .get()\r\n        .uri(&quot;/test-endpoint&quot;)\r\n        .exchange()\r\n        .expectStatus().isOk();\r\n\r\n```","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>If anyone interested in customizing the <code>WebTestClient</code> during a test, then it would be a similar approach. Just need to mutate the original bean.</p>\n<pre><code>@Autowired\nprivate WebTestClient webTestClient;\n\n@Test\nvoid test() {\n    webTestClient.mutate()\n        .codecs(clientCodecConfigurer -&gt; clientCodecConfigurer.defaultCodecs()\n            .jackson2JsonDecoder(new Jackson2JsonDecoder(CUSTOM_OBJECT_MAPPER, MediaType.APPLICATION_JSON)))\n        .build()\n        .get()\n        .uri(&quot;/test-endpoint&quot;)\n        .exchange()\n        .expectStatus().isOk();\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7298493,"reputation":304,"user_id":5562284,"display_name":"nouveu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690189528,"creation_date":1690189528,"answer_id":76752914,"question_id":43769301,"body_markdown":"In case you use Spring Boot then you can use auto-configured `ObjectMapper` and omit verbose codecs configuration. Just define bean like this:\r\n```java\r\n@Bean\r\npublic WebClient webClient(WebClient.Builder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nAs I explained [here][1] Spring Boot does auto-configure `WebClient` **builder**. When you create instance by hand it uses built-in defaults and then you have to manually update codecs using one of methods above.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76752610/5562284","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>In case you use Spring Boot then you can use auto-configured <code>ObjectMapper</code> and omit verbose codecs configuration. Just define bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic WebClient webClient(WebClient.Builder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>As I explained <a href=\"https://stackoverflow.com/a/76752610/5562284\">here</a> Spring Boot does auto-configure <code>WebClient</code> <strong>builder</strong>. When you create instance by hand it uses built-in defaults and then you have to manually update codecs using one of methods above.</p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306581,"creation_date":1690306581,"answer_id":76765254,"question_id":43769301,"body_markdown":"The most direct, concise, and surgical way I&#39;ve found, which I read about in in Baeldung&#39;s [_Spring Boot: Customize the Jackson ObjectMapper_][1], is to use a `Jackson2ObjectMapperBuilderCustomizer`. It looks like this:\r\n\r\n```java\r\n@Configuration\r\npublic class MyAppConfiguration {\r\n\r\n  @Bean\r\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\r\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\r\n  }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve verified that this works with Spring Data as well as WebFlux, e.g. `WebClient` and `.bodyToMono(SomeType.class)`. It even works in conjunction with `WebClientCustomizer` if you happen to be using that for customizing the `WebClient`; see the answers to https://stackoverflow.com/q/76080315 .\r\n\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-customize-jackson-objectmapper","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>The most direct, concise, and surgical way I've found, which I read about in in Baeldung's <a href=\"https://www.baeldung.com/spring-boot-customize-jackson-objectmapper\" rel=\"nofollow noreferrer\"><em>Spring Boot: Customize the Jackson ObjectMapper</em></a>, is to use a <code>Jackson2ObjectMapperBuilderCustomizer</code>. It looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyAppConfiguration {\n\n  @Bean\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\n  }\n\n}\n</code></pre>\n<p>I've verified that this works with Spring Data as well as WebFlux, e.g. <code>WebClient</code> and <code>.bodyToMono(SomeType.class)</code>. It even works in conjunction with <code>WebClientCustomizer</code> if you happen to be using that for customizing the <code>WebClient</code>; see the answers to <a href=\"https://stackoverflow.com/q/76080315\">Spring WebClient.Builder timeout defaults and overrides for runtimes</a> .</p>\n"}],"owner":{"account_id":1999642,"reputation":786,"user_id":1790988,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61021,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"answer_count":9,"score":71,"last_activity_date":1690306581,"creation_date":1493842859,"question_id":43769301,"body_markdown":"I&#39;m using a [spring-webflux WebClient](https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html)  (build 20170502.221452-172) to access a Web application producing a stream of _Entry_ objects (application/stream+json) like this:\r\n    \r\n    final WebClient producerClient = WebClient.create(&quot;http://localhost:8080/&quot;);\r\n\r\n    Flux&lt;Entry&gt; entries = producerClient.get().uri(&quot;json-stream&quot;)\r\n            .accept(MediaType.APPLICATION_STREAM_JSON)\r\n            .exchange()\r\n            .flatMapMany(clientResponse -&gt; clientResponse.bodyToFlux(Entry.class));\r\n\r\nWhile the deserialization of the _Entry_ objects works fine for POJOs using standard common types including Java time (JSR-310) datatypes like java.time.Instant, I wonder what I would have to do in order to add any custom JSON to Java deserialization (e. g., a custom Jackson ObjectMapper). \r\n\r\nI can&#39;t find any API in [WebClient](https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html) or in the classes of the objects produced by its builder and fluent APIs to do that. \r\n\r\nHas anybody used WebClient with customized deserialization?\r\n\r\n(Maybe the API is not there, yet?)   ","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>I'm using a <a href=\"https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\" rel=\"noreferrer\">spring-webflux WebClient</a>  (build 20170502.221452-172) to access a Web application producing a stream of <em>Entry</em> objects (application/stream+json) like this:</p>\n\n<pre><code>final WebClient producerClient = WebClient.create(\"http://localhost:8080/\");\n\nFlux&lt;Entry&gt; entries = producerClient.get().uri(\"json-stream\")\n        .accept(MediaType.APPLICATION_STREAM_JSON)\n        .exchange()\n        .flatMapMany(clientResponse -&gt; clientResponse.bodyToFlux(Entry.class));\n</code></pre>\n\n<p>While the deserialization of the <em>Entry</em> objects works fine for POJOs using standard common types including Java time (JSR-310) datatypes like java.time.Instant, I wonder what I would have to do in order to add any custom JSON to Java deserialization (e. g., a custom Jackson ObjectMapper). </p>\n\n<p>I can't find any API in <a href=\"https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\" rel=\"noreferrer\">WebClient</a> or in the classes of the objects produced by its builder and fluent APIs to do that. </p>\n\n<p>Has anybody used WebClient with customized deserialization?</p>\n\n<p>(Maybe the API is not there, yet?)   </p>\n"},{"tags":["java","rest","hp-alm"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690814500,"post_id":76765240,"comment_id":135401698,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29089701,"reputation":1,"user_id":22283871,"display_name":"Mykola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306494,"creation_date":1690306429,"question_id":76765240,"body_markdown":"Trying to create custom script using HP ALM Rest API and while all endpoints are working fine \\bp-components endpoint gives me following:\r\n\r\nResponse code: 403\r\n{&quot;Id&quot;:&quot;qccore.operation-forbidden&quot;,&quot;Title&quot;:&quot;Access to this resource has been denied&quot;,&quot;ExceptionProperties&quot;:null,&quot;StackTrace&quot;:null}\r\n\r\nDoes anyone were able to access BPT resources via rest api?\r\nThanks!\r\n","title":"&quot;Access to this resource has been denied&quot; for Business Components endpoint in HP ALM Rest API","body":"<p>Trying to create custom script using HP ALM Rest API and while all endpoints are working fine \\bp-components endpoint gives me following:</p>\n<p>Response code: 403\n{&quot;Id&quot;:&quot;qccore.operation-forbidden&quot;,&quot;Title&quot;:&quot;Access to this resource has been denied&quot;,&quot;ExceptionProperties&quot;:null,&quot;StackTrace&quot;:null}</p>\n<p>Does anyone were able to access BPT resources via rest api?\nThanks!</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690353162,"post_id":76764767,"comment_id":135339636,"body_markdown":"Well the name is a give-away it is a `ThreadLocal` it is bound to a thread, if you start/use another thread it doesn&#39;t have access to it anymore because it is a different thread. A `ThreadLocal` is basically a `Map` with the `Thread` as the key. The problem is your completable futures those already run on a thread before accessig the request hence there is nothing. Instead let the `@Async` method return a `CompletableFuture` and use those instead.","body":"Well the name is a give-away it is a <code>ThreadLocal</code> it is bound to a thread, if you start/use another thread it doesn&#39;t have access to it anymore because it is a different thread. A <code>ThreadLocal</code> is basically a <code>Map</code> with the <code>Thread</code> as the key. The problem is your completable futures those already run on a thread before accessig the request hence there is nothing. Instead let the <code>@Async</code> method return a <code>CompletableFuture</code> and use those instead."}],"owner":{"account_id":2221547,"reputation":1350,"user_id":1960809,"accept_rate":68,"display_name":"blitzen12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306219,"creation_date":1690302675,"question_id":76764767,"body_markdown":"Hello I have here an `async` controller and inside a controller which also calls an `async` method to retrieve user from an API. I wanted to access the userToken which can be found in the requestAttributes where I will be using it to decrypt the encryptedId. Following the answer from [here][1], I was able to access the user token from `ThreadLocalData` however when I try to make my controller asynchronous this is where it no longer works.\r\n\r\n`MyController.java`\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    @GetMapping(value = &quot;/users&quot;)\r\n    public Callable&lt;ResponseEntity&lt;GetUserResponse&gt;&gt; getCashFlowTotals(\r\n            final UserToken accessToken,\r\n            @RequestParam MultiValueMap&lt;String,String&gt; params\r\n    ) throws ExecutionException, InterruptedException, JsonProcessingException {\r\n        \r\n        List&lt;CompletableFuture&lt;GetUserResponse&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n        params.get(&quot;encryptedIds&quot;).forEach(param -&gt; {\r\n            futures.add(userService.getUserDetails(param));\r\n        });\r\n\r\n        CompletableFuture&lt;List&lt;GetUserResponse&gt;&gt; userCompletableFuture = CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).thenApply(v -&gt; {\r\n            return futures.stream().map(CompletableFuture::join).collect(Collectors.toList());\r\n        });\r\n\r\n        return () -&gt; ResponseEntity.ok(GetUserResponse.builder().user(totalsCompletableFuture.join()).build());\r\n    }\r\n\r\n\r\n`UserService.java`\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    public GetUserResponse getUserDetails(String encryptedIds) {\r\n        Request request = requestFactory.createUserRequest(encryptedIds);\r\n\r\n        //Retrieve user from an API\r\n\r\n        UserToken userToken = ThreadLocalData.getAccessToken(); // This is where it returns empty.\r\n\r\n        return this.formatResponse(userList, encryptedIds);\r\n    }\r\n\r\n`ThreadLocalData.java`\r\n\r\n    public class ThreadLocalData {\r\n    private ThreadLocalData() {}\r\n\r\n    private static final ThreadLocal&lt;Map&lt;String, Object&gt;&gt; ctx = ThreadLocal.withInitial(\r\n            HashMap::new\r\n    );\r\n\r\n    public static Map&lt;String, Object&gt; getContext() {\r\n        return ctx.get();\r\n    }\r\n\r\n    public static void setContext(Map&lt;String, Object&gt; map) {\r\n        ctx.set(map);\r\n    }\r\n\r\n    public static void removeContext() {\r\n        ctx.remove();\r\n    }\r\n\r\n    public static Optional&lt;AccessToken&gt; getUserToken() {\r\n        if (ctx.get().containsKey(&quot;__access_token__&quot;)) {\r\n            return Optional.ofNullable((UserToken) ctx.get().get(&quot;__access_token__&quot;));\r\n        }\r\n\r\n        return Optional.empty();\r\n      }\r\n   }\r\n\r\n`Configuration.java`\r\n\r\n    @Bean(name = &quot;taskExecutor&quot;)\r\n    public Executor taskExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setTaskDecorator(runnable -&gt; {\r\n            RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\r\n            Map&lt;String, Object&gt; map;\r\n\r\n            if (requestAttributes != null) {\r\n                map = Arrays.stream(requestAttributes.getAttributeNames(0))\r\n                                .collect(Collectors.toMap(\r\n                                        r -&gt; r,\r\n                                        r -&gt; requestAttributes.getAttribute(r, 0)\r\n                                ));\r\n            } else {\r\n                map = new HashMap&lt;&gt;();\r\n            }\r\n\r\n            return () -&gt; {\r\n                    try {\r\n                        ThreadLocalData.setContext(map);\r\n                        runnable.run();\r\n                    } finally {\r\n                       ThreadLocalData.removeContext()\r\n                    }\r\n\r\n            };\r\n        });\r\n        executor.setCorePoolSize(10);\r\n        executor.setMaxPoolSize(15);\r\n        executor.setQueueCapacity(100);\r\n        executor.setThreadNamePrefix(&quot;asyncThread-&quot;);\r\n        executor.initialize();\r\n\r\n        return executor;\r\n    }\r\n\r\n \r\nDoes anyone here have an idea on what did I miss or how could I get it working?\r\n\r\n  [1]: https://stackoverflow.com/a/58700745/1960809","title":"custom threadlocal data returns null with async within async","body":"<p>Hello I have here an <code>async</code> controller and inside a controller which also calls an <code>async</code> method to retrieve user from an API. I wanted to access the userToken which can be found in the requestAttributes where I will be using it to decrypt the encryptedId. Following the answer from <a href=\"https://stackoverflow.com/a/58700745/1960809\">here</a>, I was able to access the user token from <code>ThreadLocalData</code> however when I try to make my controller asynchronous this is where it no longer works.</p>\n<p><code>MyController.java</code></p>\n<pre><code>@Async(&quot;taskExecutor&quot;)\n@GetMapping(value = &quot;/users&quot;)\npublic Callable&lt;ResponseEntity&lt;GetUserResponse&gt;&gt; getCashFlowTotals(\n        final UserToken accessToken,\n        @RequestParam MultiValueMap&lt;String,String&gt; params\n) throws ExecutionException, InterruptedException, JsonProcessingException {\n    \n    List&lt;CompletableFuture&lt;GetUserResponse&gt;&gt; futures = new ArrayList&lt;&gt;();\n    params.get(&quot;encryptedIds&quot;).forEach(param -&gt; {\n        futures.add(userService.getUserDetails(param));\n    });\n\n    CompletableFuture&lt;List&lt;GetUserResponse&gt;&gt; userCompletableFuture = CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).thenApply(v -&gt; {\n        return futures.stream().map(CompletableFuture::join).collect(Collectors.toList());\n    });\n\n    return () -&gt; ResponseEntity.ok(GetUserResponse.builder().user(totalsCompletableFuture.join()).build());\n}\n</code></pre>\n<p><code>UserService.java</code></p>\n<pre><code>@Async(&quot;taskExecutor&quot;)\npublic GetUserResponse getUserDetails(String encryptedIds) {\n    Request request = requestFactory.createUserRequest(encryptedIds);\n\n    //Retrieve user from an API\n\n    UserToken userToken = ThreadLocalData.getAccessToken(); // This is where it returns empty.\n\n    return this.formatResponse(userList, encryptedIds);\n}\n</code></pre>\n<p><code>ThreadLocalData.java</code></p>\n<pre><code>public class ThreadLocalData {\nprivate ThreadLocalData() {}\n\nprivate static final ThreadLocal&lt;Map&lt;String, Object&gt;&gt; ctx = ThreadLocal.withInitial(\n        HashMap::new\n);\n\npublic static Map&lt;String, Object&gt; getContext() {\n    return ctx.get();\n}\n\npublic static void setContext(Map&lt;String, Object&gt; map) {\n    ctx.set(map);\n}\n\npublic static void removeContext() {\n    ctx.remove();\n}\n\npublic static Optional&lt;AccessToken&gt; getUserToken() {\n    if (ctx.get().containsKey(&quot;__access_token__&quot;)) {\n        return Optional.ofNullable((UserToken) ctx.get().get(&quot;__access_token__&quot;));\n    }\n\n    return Optional.empty();\n  }\n</code></pre>\n<p>}</p>\n<p><code>Configuration.java</code></p>\n<pre><code>@Bean(name = &quot;taskExecutor&quot;)\npublic Executor taskExecutor() {\n    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n    executor.setTaskDecorator(runnable -&gt; {\n        RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\n        Map&lt;String, Object&gt; map;\n\n        if (requestAttributes != null) {\n            map = Arrays.stream(requestAttributes.getAttributeNames(0))\n                            .collect(Collectors.toMap(\n                                    r -&gt; r,\n                                    r -&gt; requestAttributes.getAttribute(r, 0)\n                            ));\n        } else {\n            map = new HashMap&lt;&gt;();\n        }\n\n        return () -&gt; {\n                try {\n                    ThreadLocalData.setContext(map);\n                    runnable.run();\n                } finally {\n                   ThreadLocalData.removeContext()\n                }\n\n        };\n    });\n    executor.setCorePoolSize(10);\n    executor.setMaxPoolSize(15);\n    executor.setQueueCapacity(100);\n    executor.setThreadNamePrefix(&quot;asyncThread-&quot;);\n    executor.initialize();\n\n    return executor;\n}\n</code></pre>\n<p>Does anyone here have an idea on what did I miss or how could I get it working?</p>\n"},{"tags":["java","spring-boot","gradle","jar","executable-jar"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1690306572,"post_id":76765206,"comment_id":135334044,"body_markdown":"&quot;*How do I tell the java -jar command to keep running?*&quot; - You don&#39;t. The application should keep running. This is an indication for another issue. Can you [edit] the post and add the relevant code?","body":"&quot;<i>How do I tell the java -jar command to keep running?</i>&quot; - You don&#39;t. The application should keep running. This is an indication for another issue. Can you <a href=\"https://stackoverflow.com/posts/76765206/edit\">edit</a> the post and add the relevant code?"},{"owner":{"account_id":7975532,"reputation":103,"user_id":6018837,"display_name":"Daniel Matev"},"score":2,"creation_date":1690306770,"post_id":76765206,"comment_id":135334085,"body_markdown":"Remove the  `org.springframework.boot:spring-boot-starter-tomcat`, it&#39;s conflicting with `org.springframework.boot:spring-boot-starter-web`.","body":"Remove the  <code>org.springframework.boot:spring-boot-starter-tomcat</code>, it&#39;s conflicting with <code>org.springframework.boot:spring-boot-starter-web</code>."},{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1690313597,"post_id":76765206,"comment_id":135335373,"body_markdown":"I tried that but the same issue I actually just added it back after I saw a couple posts and wanted to include it in case someone suggested it.","body":"I tried that but the same issue I actually just added it back after I saw a couple posts and wanted to include it in case someone suggested it."}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306114,"creation_date":1690306114,"question_id":76765206,"body_markdown":"I have a simple spring boot application with the following in my build.gradle...\r\n\r\n```\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    providedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n```\r\n\r\nWhen I run `gradle bootRun` everything works great but when I run `gradle assemble` and then try running the jar with `java -jar` the application seems to boot properly and I see \r\n\r\n```\r\n13:21:41.132 [main] INFO com.jrgleason.App -- Started App in 1.104 seconds (process running for 1.312\r\n```\r\n\r\nBut it immediately stops running after that. How do I tell the `java -jar` command to keep running?","title":"Why is my Spring Boot Application exiting after starting when ran with &#39;java -jar&#39;","body":"<p>I have a simple spring boot application with the following in my build.gradle...</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>When I run <code>gradle bootRun</code> everything works great but when I run <code>gradle assemble</code> and then try running the jar with <code>java -jar</code> the application seems to boot properly and I see</p>\n<pre><code>13:21:41.132 [main] INFO com.jrgleason.App -- Started App in 1.104 seconds (process running for 1.312\n</code></pre>\n<p>But it immediately stops running after that. How do I tell the <code>java -jar</code> command to keep running?</p>\n"},{"tags":["java","oop","design-patterns","dependency-injection","inversion-of-control"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1666387485,"post_id":74159270,"comment_id":130933544,"body_markdown":"Nope, it&#39;s normal.","body":"Nope, it&#39;s normal."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666387531,"post_id":74159270,"comment_id":130933555,"body_markdown":"@LouisWasserman: So having e.g. 8 classes injected is normal and there is no need for further re-design?","body":"@LouisWasserman: So having e.g. 8 classes injected is normal and there is no need for further re-design?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1666420840,"post_id":74159270,"comment_id":130937340,"body_markdown":"This question is probably not a great fit for Stack Overflow&#39;s requirements, as it is fairly broad and likely to attract opinion-based answers. The general strategy is to consider grouping some of the related dependencies behind a [facade](https://en.wikipedia.org/wiki/Facade_pattern). If none of them are related, perhaps the class still has too many responsibilities.","body":"This question is probably not a great fit for Stack Overflow&#39;s requirements, as it is fairly broad and likely to attract opinion-based answers. The general strategy is to consider grouping some of the related dependencies behind a <a href=\"https://en.wikipedia.org/wiki/Facade_pattern\" rel=\"nofollow noreferrer\">facade</a>. If none of them are related, perhaps the class still has too many responsibilities."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666425594,"post_id":74159270,"comment_id":130937943,"body_markdown":"@TimMoore: What is a good way to determine/analyse if I need to use facade?","body":"@TimMoore: What is a good way to determine/analyse if I need to use facade?"},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666425729,"post_id":74159270,"comment_id":130937956,"body_markdown":"@TimMoore: The issue with using the facade is that the individual classes are not really related","body":"@TimMoore: The issue with using the facade is that the individual classes are not really related"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1666427180,"post_id":74159270,"comment_id":130938106,"body_markdown":"It might be easier to answer this if the question contained a specific example","body":"It might be easier to answer this if the question contained a specific example"},{"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"score":0,"creation_date":1666470669,"post_id":74159270,"comment_id":130946460,"body_markdown":"could you show, please, code?","body":"could you show, please, code?"}],"answers":[{"tags":[],"owner":{"account_id":97618,"reputation":168076,"user_id":264697,"accept_rate":100,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690305452,"creation_date":1666429352,"answer_id":74162257,"question_id":74159270,"body_markdown":"If your class has 8 dependencies, as you note in the comments, it likely means the class is exhibiting the [Constructor Over-Injection][1] code smell. This code smell is linked to the [Single Responsibility Principle][2]. It is an indication that your class is still doing too much.\r\n\r\nThere are many design patterns that can help you in further reducing the number of dependencies that the class had and therefore lowering the number of responsibilities and, in the end, lowering the complexity of these classes. Although there are many, two interesting patterns that come to my mind are:\r\n\r\n* **The [Decorator design pattern][3];** which is especially suited for extracting Cross-Cutting Concerns like logging out of the class that contains the core/business functionality\r\n* **The [Facade Service refactoring][4];** which hides a group of dependencies with their behavior behind a single, simplified abstraction, allowing the complexity of the original class to be reduced. This pattern is a specific form of the more general [Extract Class refactoring][5].\r\n\r\nI&#39;m naming these two patterns because they are often beneficial in the context of DI. There are, of course, many more patterns and refactorings that might be applicable to your situation, but it would not be useful trying to list them all. With concrete code examples, I might be able to give more specific guidance.\r\n\r\n  [1]: https://blog.ploeh.dk/2018/08/27/on-constructor-over-injection/\r\n  [2]: https://en.wikipedia.org/wiki/Single-responsibility_principle\r\n  [3]: https://en.wikipedia.org/wiki/Decorator_pattern\r\n  [4]: https://blog.ploeh.dk/2010/02/02/RefactoringtoAggregateServices/\r\n  [5]: https://refactoring.com/catalog/extractClass.html","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>If your class has 8 dependencies, as you note in the comments, it likely means the class is exhibiting the <a href=\"https://blog.ploeh.dk/2018/08/27/on-constructor-over-injection/\" rel=\"nofollow noreferrer\">Constructor Over-Injection</a> code smell. This code smell is linked to the <a href=\"https://en.wikipedia.org/wiki/Single-responsibility_principle\" rel=\"nofollow noreferrer\">Single Responsibility Principle</a>. It is an indication that your class is still doing too much.</p>\n<p>There are many design patterns that can help you in further reducing the number of dependencies that the class had and therefore lowering the number of responsibilities and, in the end, lowering the complexity of these classes. Although there are many, two interesting patterns that come to my mind are:</p>\n<ul>\n<li><strong>The <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow noreferrer\">Decorator design pattern</a>;</strong> which is especially suited for extracting Cross-Cutting Concerns like logging out of the class that contains the core/business functionality</li>\n<li><strong>The <a href=\"https://blog.ploeh.dk/2010/02/02/RefactoringtoAggregateServices/\" rel=\"nofollow noreferrer\">Facade Service refactoring</a>;</strong> which hides a group of dependencies with their behavior behind a single, simplified abstraction, allowing the complexity of the original class to be reduced. This pattern is a specific form of the more general <a href=\"https://refactoring.com/catalog/extractClass.html\" rel=\"nofollow noreferrer\">Extract Class refactoring</a>.</li>\n</ul>\n<p>I'm naming these two patterns because they are often beneficial in the context of DI. There are, of course, many more patterns and refactorings that might be applicable to your situation, but it would not be useful trying to list them all. With concrete code examples, I might be able to give more specific guidance.</p>\n"},{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666474389,"creation_date":1666474389,"answer_id":74167237,"question_id":74159270,"body_markdown":"If class has too many dependencies, then it is one if the sign that it does many things. So try to design your class to have fewer dependencies.\r\n\r\nIf you think that design of your class is okay, then you can try to group some classes into one and initialize it through dependency injection. This class will be like some one plase to do one tightly coupled operation. ","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>If class has too many dependencies, then it is one if the sign that it does many things. So try to design your class to have fewer dependencies.</p>\n<p>If you think that design of your class is okay, then you can try to group some classes into one and initialize it through dependency injection. This class will be like some one plase to do one tightly coupled operation.</p>\n"}],"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":714,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690305452,"creation_date":1666387362,"question_id":74159270,"body_markdown":"I have a class that does too many things (many responsibilities). E.g. logging, loading data from various databases, methods that are doing extraneous calculation/processing as well as the main processing method that is this class&#39;s responsibility.  \r\nI have split the class to multiple classes each doing a specific thing and inject the classes to the original one.  \r\nThe concern I have is that now I am injecting quite a few classes and I am not sure if that is considered bad design or code smell.  \r\nIs there some design pattern, similar as there is e.g. builder pattern for the case of having functions with too many parameters, that addresses the case of having many injected dependencies in a class?","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>I have a class that does too many things (many responsibilities). E.g. logging, loading data from various databases, methods that are doing extraneous calculation/processing as well as the main processing method that is this class's responsibility.<br />\nI have split the class to multiple classes each doing a specific thing and inject the classes to the original one.<br />\nThe concern I have is that now I am injecting quite a few classes and I am not sure if that is considered bad design or code smell.<br />\nIs there some design pattern, similar as there is e.g. builder pattern for the case of having functions with too many parameters, that addresses the case of having many injected dependencies in a class?</p>\n"},{"tags":["java","desktop-application"],"answers":[{"tags":[],"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1340286444,"creation_date":1340286444,"answer_id":11139625,"question_id":11139552,"body_markdown":"Use `user.home` system property. Like this:\r\n\r\n\r\n    String userHomePath = System.getProperty(&quot;user.home&quot;);\r\n    File myAwesomeFolder = new File(useHomePath, &quot;myAweSomeApp&quot;);\r\n    myAwesomeFolder.mkdirs();","title":"Creating a local storage directory in Java desktop app","body":"<p>Use <code>user.home</code> system property. Like this:</p>\n\n<pre><code>String userHomePath = System.getProperty(\"user.home\");\nFile myAwesomeFolder = new File(useHomePath, \"myAweSomeApp\");\nmyAwesomeFolder.mkdirs();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690305216,"creation_date":1340286634,"answer_id":11139677,"question_id":11139552,"body_markdown":"You could always use the [Java Preferences API][1] which will store info per-user and you don&#39;t have to worry about the implementation. Different implementations are available for different platforms but that&#39;s hidden from you (the client).\r\n\r\nAn alternative is to use the [Apache Commons Configuration][2] API, which is more complex, but gives you a lot more features.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/prefs/Preferences.html\r\n  [2]: https://commons.apache.org/proper/commons-configuration/userguide/user_guide.html","title":"Creating a local storage directory in Java desktop app","body":"<p>You could always use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\">Java Preferences API</a> which will store info per-user and you don't have to worry about the implementation. Different implementations are available for different platforms but that's hidden from you (the client).</p>\n<p>An alternative is to use the <a href=\"https://commons.apache.org/proper/commons-configuration/userguide/user_guide.html\" rel=\"nofollow noreferrer\">Apache Commons Configuration</a> API, which is more complex, but gives you a lot more features.</p>\n"},{"tags":[],"owner":{"account_id":1363065,"reputation":1271,"user_id":1300056,"accept_rate":33,"display_name":"RTA"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1340286686,"creation_date":1340286686,"answer_id":11139697,"question_id":11139552,"body_markdown":"not confirmed about Linux but you can make entry to windows registry too.\r\n\r\neither way,\r\n\r\n    String path = System.getProperty(&quot;user.home&quot;)+ &quot;\\\\AppLication Data&quot;+&quot;\\\\xyzFolder&quot;;\r\n\r\nthis works for both windows 7 to because %appData% shows the path which legacy for above.\r\n","title":"Creating a local storage directory in Java desktop app","body":"<p>not confirmed about Linux but you can make entry to windows registry too.</p>\n\n<p>either way,</p>\n\n<pre><code>String path = System.getProperty(\"user.home\")+ \"\\\\AppLication Data\"+\"\\\\xyzFolder\";\n</code></pre>\n\n<p>this works for both windows 7 to because %appData% shows the path which legacy for above.</p>\n"},{"tags":[],"owner":{"account_id":1570718,"reputation":148,"user_id":1458461,"display_name":"jayeff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340286781,"creation_date":1340286781,"answer_id":11139727,"question_id":11139552,"body_markdown":"How about storing the app-folder into the user home directory? You can get it per System.getProperty(&quot;user.home&quot;), see http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html","title":"Creating a local storage directory in Java desktop app","body":"<p>How about storing the app-folder into the user home directory? You can get it per System.getProperty(\"user.home\"), see <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html</a></p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340292886,"creation_date":1340291381,"answer_id":11141176,"question_id":11139552,"body_markdown":"    import java.io.File;\r\n    \r\n    public class AppPathFolder {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString path = null;\r\n    \t\tString osName = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n    \t\tif (osName.indexOf(&quot;windows&quot;)&gt;-1) {\r\n    \t\t\tpath = System.getenv(&quot;APPDATA&quot;);\r\n    \t\t} else if (osName.indexOf(&quot;mac&quot;)&gt;-1) {\r\n    \t\t\t// get the env. variable for Mac..\r\n    \t\t\tpath = System.getenv(&quot;?&quot;);\r\n    \t\t\t// etc. for Linux, Unix, Solaris..\r\n    \t\t} else { //anything else\r\n    \t\t\tpath = System.getProperty(&quot;user.home&quot;);\r\n    \t\t}\r\n    \t\tFile rootOfPath = new File(path);\r\n    \t\t// create a sub-directory based on package name of main class..\r\n    \t\t// perhaps prefixed with with java/appdata\r\n    \t\tSystem.out.println(rootOfPath);\r\n    \t}\r\n    }\r\n\r\n\r\nOf course, there are other options for small amounts of data: \r\n\r\n- Apps. that are trusted or have no security manager might use the [`Preferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html) API\r\n- A desktop app. launched using [Java Web Start](https://stackoverflow.com/tags/java-web-start/info) has access to the JNLP API, wich offers the `PersistenceService` - available even to sand-boxed apps.\r\n- An applet can store cookies.\r\n","title":"Creating a local storage directory in Java desktop app","body":"<pre><code>import java.io.File;\n\npublic class AppPathFolder {\n\n    public static void main(String[] args) {\n        String path = null;\n        String osName = System.getProperty(\"os.name\").toLowerCase();\n        if (osName.indexOf(\"windows\")&gt;-1) {\n            path = System.getenv(\"APPDATA\");\n        } else if (osName.indexOf(\"mac\")&gt;-1) {\n            // get the env. variable for Mac..\n            path = System.getenv(\"?\");\n            // etc. for Linux, Unix, Solaris..\n        } else { //anything else\n            path = System.getProperty(\"user.home\");\n        }\n        File rootOfPath = new File(path);\n        // create a sub-directory based on package name of main class..\n        // perhaps prefixed with with java/appdata\n        System.out.println(rootOfPath);\n    }\n}\n</code></pre>\n\n<p>Of course, there are other options for small amounts of data: </p>\n\n<ul>\n<li>Apps. that are trusted or have no security manager might use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\"><code>Preferences</code></a> API</li>\n<li>A desktop app. launched using <a href=\"https://stackoverflow.com/tags/java-web-start/info\">Java Web Start</a> has access to the JNLP API, wich offers the <code>PersistenceService</code> - available even to sand-boxed apps.</li>\n<li>An applet can store cookies.</li>\n</ul>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4275,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1690305216,"creation_date":1340286174,"question_id":11139552,"body_markdown":"I&#39;m building a Java desktop application and need to store some local data (preferences and history). For this I&#39;d like to create a new folder in the appropriate location, like *AppData\\myapp* in Windows and *~/.myapp* in Linux (and wherever is expected on a Mac).\r\n\r\nWhat is the nice, cross-platform way to do that?\r\n\r\n----\r\n\r\nI&#39;ve seen several questions on this site that ask about this, but either:\r\n\r\n- The asker wants to find Windows&#39; *Application Data* (not cross-platform)\r\n- The solution is to create a folder in `user.home` (Linux style, not cross-platform) This is what I currently do, but I&#39;m looking for an improvement.","title":"Creating a local storage directory in Java desktop app","body":"<p>I'm building a Java desktop application and need to store some local data (preferences and history). For this I'd like to create a new folder in the appropriate location, like <em>AppData\\myapp</em> in Windows and <em>~/.myapp</em> in Linux (and wherever is expected on a Mac).</p>\n\n<p>What is the nice, cross-platform way to do that?</p>\n\n<hr>\n\n<p>I've seen several questions on this site that ask about this, but either:</p>\n\n<ul>\n<li>The asker wants to find Windows' <em>Application Data</em> (not cross-platform)</li>\n<li>The solution is to create a folder in <code>user.home</code> (Linux style, not cross-platform) This is what I currently do, but I'm looking for an improvement.</li>\n</ul>\n"},{"tags":["java","android","kotlin","android-studio"],"answers":[{"tags":[],"owner":{"account_id":11813923,"reputation":342,"user_id":8644685,"display_name":"Ivan Abakumov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690304804,"creation_date":1690304804,"answer_id":76765031,"question_id":76764736,"body_markdown":"You don&#39;t have to worry about this. With each new project creation, Android Studio lets you choose the language in which the project will be.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1azeW.jpg","title":"Change language in android studio from kotlin to java","body":"<p>You don't have to worry about this. With each new project creation, Android Studio lets you choose the language in which the project will be.</p>\n<p><a href=\"https://i.stack.imgur.com/1azeW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1azeW.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29088944,"reputation":55,"user_id":22283269,"display_name":"Keval"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1690339887,"accepted_answer_id":76765031,"answer_count":1,"score":2,"last_activity_date":1690304804,"creation_date":1690302438,"question_id":76764736,"body_markdown":"i selected kotlin by mistake at the time of installation of android studio now how to change it to java?\r\n\r\nI haven&#39;t started to code yet so no worries about files or anything\r\n\r\nAnd i have started the project so provide the solution to change the language after starting the project\r\n\r\nAnd i also tried clean installation but whenever i reinstall it doesn&#39;t even give me option to select a language, however it gave me option to create a new project and everything...\r\n\r\nWhen i create a new project i don&#39;t get option to select a language or i counld have made  a new project\r\n\r\nAnd also a default file named MainActivity.kt should be in .java","title":"Change language in android studio from kotlin to java","body":"<p>i selected kotlin by mistake at the time of installation of android studio now how to change it to java?</p>\n<p>I haven't started to code yet so no worries about files or anything</p>\n<p>And i have started the project so provide the solution to change the language after starting the project</p>\n<p>And i also tried clean installation but whenever i reinstall it doesn't even give me option to select a language, however it gave me option to create a new project and everything...</p>\n<p>When i create a new project i don't get option to select a language or i counld have made  a new project</p>\n<p>And also a default file named MainActivity.kt should be in .java</p>\n"},{"tags":["java","r","installation","arm64","rjava"],"comments":[{"owner":{"account_id":3207579,"reputation":1665,"user_id":2726543,"accept_rate":83,"display_name":"Avraham"},"score":0,"creation_date":1690305658,"post_id":76765021,"comment_id":135333877,"body_markdown":"You may wish to look at the [openxlsx](https://CRAN.R-project.org/package=openxlsx) package which provides similar functonality without any Java dependency. It&#39;s based on C++ and Rcpp.","body":"You may wish to look at the <a href=\"https://CRAN.R-project.org/package=openxlsx\" rel=\"nofollow noreferrer\">openxlsx</a> package which provides similar functonality without any Java dependency. It&#39;s based on C++ and Rcpp."},{"owner":{"account_id":6814076,"reputation":12697,"user_id":5295429,"display_name":"Oo.oO"},"score":0,"creation_date":1698387501,"post_id":76765021,"comment_id":136401306,"body_markdown":"I haven&#39;t tried recent versions for quite some time, but sometimes it&#39;s easiest to build stuff from the sources: https://www.owsiak.org/r-java-11-and-making-sure-you-can-load-rjava/ https://www.owsiak.org/r4-0-with-java-14-inside-macos-10-15-4/","body":"I haven&#39;t tried recent versions for quite some time, but sometimes it&#39;s easiest to build stuff from the sources: <a href=\"https://www.owsiak.org/r-java-11-and-making-sure-you-can-load-rjava/\" rel=\"nofollow noreferrer\">owsiak.org/r-java-11-and-making-sure-you-can-load-rjava</a> <a href=\"https://www.owsiak.org/r4-0-with-java-14-inside-macos-10-15-4/\" rel=\"nofollow noreferrer\">owsiak.org/r4-0-with-java-14-inside-macos-10-15-4</a>"}],"owner":{"account_id":29089304,"reputation":1,"user_id":22283563,"display_name":"Yunna Lin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690304727,"creation_date":1690304727,"question_id":76765021,"body_markdown":"I am having trouble loading the xlsx package on R (via RStudio). The error message I get when I try to call the package is as below. \r\n\r\n```\r\n&gt; library(xlsx)\r\nError: package or namespace load failed for xlsx:\r\n .onLoad failed in loadNamespace() for &#39;rJava&#39;, details:\r\n  call: dyn.load(jli, FALSE)\r\n  error: unable to load shared object &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39;:\r\n  dlopen(/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib, 0x000A): tried: &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;)), &#39;/System/Volumes/Preboot/Cryptexes/OS/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (no such file), &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;))\r\n```\r\n\r\nFrom what I can understand this seems to be a rJava issue and not a problem with library(xlsx) per se. I can confirm that the xlsx package is installed on my computer, it just can&#39;t be loaded. I&#39;m using a MacBook running arm64, and I&#39;m running the arm64 version of both R and Rstudio.\r\n\r\nI tried to replace my existing version of Java with the arm64 version of the JRE (obtained from this link: https://www.java.com/en/download/). According to terminal, `java -version` now returns  \r\n```\r\njava version &quot;1.8.0_381&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_381-b09)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.381-b09, mixed mode)\r\n```\r\nHowever now when I try to run the xlsx package on R I get the following fatal error:\r\n\r\n```\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00000002880bf2cc, pid=1308, tid=0x0000000000000103\r\n#\r\n# JRE version: Java(TM) SE Runtime Environment (8.0_381) (build 1.8.0_381-b09)\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.381-b09 mixed mode bsd-aarch64 compressed oops)\r\n# Problematic frame:\r\n# v  ~StubRoutines::jshort_disjoint_arraycopy\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n```\r\n\r\nLooks like I&#39;ve somehow managed to make things worse. Any advice would be appreciated!","title":"Potential Java/arm64 error when loading the xlsx package in R?","body":"<p>I am having trouble loading the xlsx package on R (via RStudio). The error message I get when I try to call the package is as below.</p>\n<pre><code>&gt; library(xlsx)\nError: package or namespace load failed for xlsx:\n .onLoad failed in loadNamespace() for 'rJava', details:\n  call: dyn.load(jli, FALSE)\n  error: unable to load shared object '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib':\n  dlopen(/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib, 0x000A): tried: '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (no such file), '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\n</code></pre>\n<p>From what I can understand this seems to be a rJava issue and not a problem with library(xlsx) per se. I can confirm that the xlsx package is installed on my computer, it just can't be loaded. I'm using a MacBook running arm64, and I'm running the arm64 version of both R and Rstudio.</p>\n<p>I tried to replace my existing version of Java with the arm64 version of the JRE (obtained from this link: <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a>). According to terminal, <code>java -version</code> now returns</p>\n<pre><code>java version &quot;1.8.0_381&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_381-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.381-b09, mixed mode)\n</code></pre>\n<p>However now when I try to run the xlsx package on R I get the following fatal error:</p>\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00000002880bf2cc, pid=1308, tid=0x0000000000000103\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_381) (build 1.8.0_381-b09)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.381-b09 mixed mode bsd-aarch64 compressed oops)\n# Problematic frame:\n# v  ~StubRoutines::jshort_disjoint_arraycopy\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n</code></pre>\n<p>Looks like I've somehow managed to make things worse. Any advice would be appreciated!</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6904832,"reputation":127,"user_id":5954437,"display_name":"ganeshram"},"score":0,"creation_date":1690302580,"post_id":76764649,"comment_id":135333249,"body_markdown":"Please provide full stack trace of error, if possible.","body":"Please provide full stack trace of error, if possible."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690303426,"post_id":76764649,"comment_id":135333413,"body_markdown":"Just a wrong class imported. Should be: import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;","body":"Just a wrong class imported. Should be: import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder&zwnj;&#8203;;"},{"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"score":0,"creation_date":1690303959,"post_id":76764649,"comment_id":135333516,"body_markdown":"OMG @Mar-Z! I knew it was something stupid I was doing. THANK YOU VERY MUCH for your quick helpful answer!","body":"OMG @Mar-Z! I knew it was something stupid I was doing. THANK YOU VERY MUCH for your quick helpful answer!"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690304533,"post_id":76764649,"comment_id":135333636,"body_markdown":"Cool. Thanks for feedback.","body":"Cool. Thanks for feedback."}],"answers":[{"tags":[],"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690304351,"creation_date":1690304046,"answer_id":76764935,"question_id":76764649,"body_markdown":"The answer was simple - and Mar-Z came up with the correct answer:\r\n\r\nJust a wrong class imported. Should be: \r\n```\r\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder; \r\n```\r\n\r\nand NOT:\r\n```\r\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\r\n```","title":"Spring Boot 3 - Multiple Data Sources - EntityManagerFactoryBuilder builder Compile Error","body":"<p>The answer was simple - and Mar-Z came up with the correct answer:</p>\n<p>Just a wrong class imported. Should be:</p>\n<pre><code>import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder; \n</code></pre>\n<p>and NOT:</p>\n<pre><code>import org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\n</code></pre>\n"}],"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":650,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76764935,"answer_count":1,"score":-1,"last_activity_date":1690304351,"creation_date":1690301759,"question_id":76764649,"body_markdown":"I need to use multiple data sources in my Spring Boot 3 application. I have configured all the connection properties correctly in my application.properties file (I have used the configuration for single data source projects in the past).\r\n\r\nWhen I try to setup my @Primary data source (it&#39;s the only one I&#39;m trying to setup at this time) - I&#39;m getting a complaint at the line:  ```return builder.dataSource(qaDataSource)```\r\n\r\nThe error is:\r\n```\r\ncannot find symbol\r\n  symbol:  method dataSource(DataSource)\r\n  location: variable builder of type EntityManagerFactoryBuilder\r\n```\r\n\r\nHere&#39;s the class code:\r\n\r\n\r\n```\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport javax.sql.DataSource;\r\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\n/**\r\n *\r\n * Configuration for the QA Datasource\r\n * \r\n * \r\n */\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        entityManagerFactoryRef = &quot;qaEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;qaTransactionManager&quot;,\r\n        basePackages = { &quot;com.app.repositories&quot; })\r\npublic class QADataConfiguration {\r\n\r\n    @Primary\r\n    @Bean(name=&quot;qaProperties&quot;)\r\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\r\n    public DataSourceProperties dataSourceProperties() {\r\n\r\n        return new DataSourceProperties();\r\n    }\r\n    \r\n    @Primary\r\n    @Bean(name=&quot;qaDatasource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public DataSource datasource(@Qualifier(&quot;qaProperties&quot;) DataSourceProperties properties){\r\n\r\n        return properties.initializeDataSourceBuilder().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name=&quot;qaEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean\r\n            (EntityManagerFactoryBuilder builder,\r\n             @Qualifier(&quot;qaDatasource&quot;) DataSource qaDataSource){\r\n\r\n        return builder.dataSource(qaDataSource)\r\n                .packages(&quot;com.app.config.data.entity.NotifConfig&quot;)\r\n                .persistenceUnit(&quot;qa&quot;).build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;qaTransactionManager&quot;)\r\n    @ConfigurationProperties(&quot;spring.jpa&quot;)\r\n    public PlatformTransactionManager transactionManager(\r\n            @Qualifier(&quot;userEntityManagerFactory&quot;) EntityManagerFactory entityManagerFactory) {\r\n\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n\r\n}\r\n```\r\n\r\nCompile Error:\r\n\r\n```\r\n-------------------------------------------------------------\r\nCOMPILATION ERROR : \r\n-------------------------------------------------------------\r\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\r\n  symbol:   method dataSource(javax.sql.DataSource)\r\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\r\n1 error\r\n-------------------------------------------------------------\r\n------------------------------------------------------------------------\r\nBUILD FAILURE\r\n------------------------------------------------------------------------\r\nTotal time:  19.071 s\r\nFinished at: 2023-07-25T08:02:25-07:00\r\n------------------------------------------------------------------------\r\nFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project sjconfigurator: Compilation failure\r\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\r\n  symbol:   method dataSource(javax.sql.DataSource)\r\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\r\n```\r\n\r\nI&#39;m sure it&#39;s just a case of &quot;stupid user detected&quot;  :) but if someone can help me out - I&#39;d really appreciate it.\r\n","title":"Spring Boot 3 - Multiple Data Sources - EntityManagerFactoryBuilder builder Compile Error","body":"<p>I need to use multiple data sources in my Spring Boot 3 application. I have configured all the connection properties correctly in my application.properties file (I have used the configuration for single data source projects in the past).</p>\n<p>When I try to setup my @Primary data source (it's the only one I'm trying to setup at this time) - I'm getting a complaint at the line:  <code>return builder.dataSource(qaDataSource)</code></p>\n<p>The error is:</p>\n<pre><code>cannot find symbol\n  symbol:  method dataSource(DataSource)\n  location: variable builder of type EntityManagerFactoryBuilder\n</code></pre>\n<p>Here's the class code:</p>\n<pre><code>import jakarta.persistence.EntityManagerFactory;\nimport javax.sql.DataSource;\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n/**\n *\n * Configuration for the QA Datasource\n * \n * \n */\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        entityManagerFactoryRef = &quot;qaEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;qaTransactionManager&quot;,\n        basePackages = { &quot;com.app.repositories&quot; })\npublic class QADataConfiguration {\n\n    @Primary\n    @Bean(name=&quot;qaProperties&quot;)\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\n    public DataSourceProperties dataSourceProperties() {\n\n        return new DataSourceProperties();\n    }\n    \n    @Primary\n    @Bean(name=&quot;qaDatasource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource datasource(@Qualifier(&quot;qaProperties&quot;) DataSourceProperties properties){\n\n        return properties.initializeDataSourceBuilder().build();\n    }\n\n    @Primary\n    @Bean(name=&quot;qaEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean\n            (EntityManagerFactoryBuilder builder,\n             @Qualifier(&quot;qaDatasource&quot;) DataSource qaDataSource){\n\n        return builder.dataSource(qaDataSource)\n                .packages(&quot;com.app.config.data.entity.NotifConfig&quot;)\n                .persistenceUnit(&quot;qa&quot;).build();\n    }\n\n    @Primary\n    @Bean(name = &quot;qaTransactionManager&quot;)\n    @ConfigurationProperties(&quot;spring.jpa&quot;)\n    public PlatformTransactionManager transactionManager(\n            @Qualifier(&quot;userEntityManagerFactory&quot;) EntityManagerFactory entityManagerFactory) {\n\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n\n}\n</code></pre>\n<p>Compile Error:</p>\n<pre><code>-------------------------------------------------------------\nCOMPILATION ERROR : \n-------------------------------------------------------------\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\n  symbol:   method dataSource(javax.sql.DataSource)\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\n1 error\n-------------------------------------------------------------\n------------------------------------------------------------------------\nBUILD FAILURE\n------------------------------------------------------------------------\nTotal time:  19.071 s\nFinished at: 2023-07-25T08:02:25-07:00\n------------------------------------------------------------------------\nFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project sjconfigurator: Compilation failure\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\n  symbol:   method dataSource(javax.sql.DataSource)\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\n</code></pre>\n<p>I'm sure it's just a case of &quot;stupid user detected&quot;  :) but if someone can help me out - I'd really appreciate it.</p>\n"},{"tags":["java","jvm","sts-springsourcetoolsuite"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1355200693,"post_id":13813112,"comment_id":19005786,"body_markdown":"are you mixing 64bit STS with 32bit JDK(or vice versa)?","body":"are you mixing 64bit STS with 32bit JDK(or vice versa)?"},{"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"score":0,"creation_date":1520996093,"post_id":13813112,"comment_id":85541322,"body_markdown":"This question is very old. And I haven&#39;t use STS after that. So I may not be able to try any other answer.","body":"This question is very old. And I haven&#39;t use STS after that. So I may not be able to try any other answer."}],"answers":[{"tags":[],"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1355274123,"creation_date":1355274123,"answer_id":13831131,"question_id":13813112,"body_markdown":"Initially I was using STS zip version. Now I installed STS from executable. And it is working fine for me. I required to setup HOME variable, that&#39;s all.\r\n\r\nAttaching the STS.ini from installed STS (for reference).\r\n\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813\r\n    -product\r\n    org.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.XXMaxPermSize\r\n    256M\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xms40m\r\n    -Xmx768m\r\n    -XX:MaxPermSize=256m\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>Initially I was using STS zip version. Now I installed STS from executable. And it is working fine for me. I required to setup HOME variable, that's all.</p>\n\n<p>Attaching the STS.ini from installed STS (for reference).</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813\n-product\norg.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n--launcher.XXMaxPermSize\n256M\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms40m\n-Xmx768m\n-XX:MaxPermSize=256m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":911208,"reputation":7563,"user_id":945034,"accept_rate":57,"display_name":"Kumar Sambhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395743733,"creation_date":1395743733,"answer_id":22631888,"question_id":13813112,"body_markdown":"Try running it as administrator.\r\nRight Click --&gt; Run as Administrator.","title":"STS is failing to start on my machine","body":"<p>Try running it as administrator.\nRight Click --> Run as Administrator.</p>\n"},{"tags":[],"owner":{"account_id":1888212,"reputation":31,"user_id":1706984,"display_name":"vik86"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428745332,"creation_date":1428745332,"answer_id":29576373,"question_id":13813112,"body_markdown":"I&#39;d same issue, On looking at the STS.ini file saw there was double entry of \r\n-vm argument. This error happened to me on updating the STS. Also if it still does not work try running the eclipsec.exe and if that work, then something in ini file is not set correctly.","title":"STS is failing to start on my machine","body":"<p>I'd same issue, On looking at the STS.ini file saw there was double entry of \n-vm argument. This error happened to me on updating the STS. Also if it still does not work try running the eclipsec.exe and if that work, then something in ini file is not set correctly.</p>\n"},{"tags":[],"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440740687,"creation_date":1440740687,"answer_id":32264098,"question_id":13813112,"body_markdown":"Make sure your STS and JDK that you provide while initializing STS is compatible. What I mean by this is that if your JDK is 64 bit then you should install 64 bit version of Spring suite (`spring-web-4.0.a.RELEASE-installer-x86_64.exe`) and not the 32 bit one.","title":"STS is failing to start on my machine","body":"<p>Make sure your STS and JDK that you provide while initializing STS is compatible. What I mean by this is that if your JDK is 64 bit then you should install 64 bit version of Spring suite (<code>spring-web-4.0.a.RELEASE-installer-x86_64.exe</code>) and not the 32 bit one.</p>\n"},{"tags":[],"owner":{"account_id":902053,"reputation":1613,"user_id":5823681,"display_name":"khd"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1519279850,"creation_date":1468124482,"answer_id":38288553,"question_id":13813112,"body_markdown":"Delete STS.ini file.\r\nthen it runs correctly and creates a new STS.ini File Automatically","title":"STS is failing to start on my machine","body":"<p>Delete STS.ini file.\nthen it runs correctly and creates a new STS.ini File Automatically</p>\n"},{"tags":[],"owner":{"account_id":3467185,"reputation":77,"user_id":2902426,"display_name":"user2902426"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690304034,"creation_date":1471933840,"answer_id":39093851,"question_id":13813112,"body_markdown":"I had the same problem yesterday morning. After googling, I saw that the following lines in the STS.ini file were missing (orange marked): [STS.ini][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BXpzt.png\r\n\r\nAfter adding:\r\n\r\n-vm\r\n\r\n[full path to the javaw.exe]\r\n\r\neverything worked again properly.\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>I had the same problem yesterday morning. After googling, I saw that the following lines in the STS.ini file were missing (orange marked): <a href=\"https://i.stack.imgur.com/BXpzt.png\" rel=\"nofollow noreferrer\">STS.ini</a></p>\n<p>After adding:</p>\n<p>-vm</p>\n<p>[full path to the javaw.exe]</p>\n<p>everything worked again properly.</p>\n"},{"tags":[],"owner":{"account_id":4087284,"reputation":339,"user_id":3356278,"accept_rate":25,"display_name":"Rohit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485871897,"creation_date":1485871897,"answer_id":41959718,"question_id":13813112,"body_markdown":"Added line -vm\r\nC:\\Program Files\\Java\\jdk1.8.0_45\\bin\\javaw.exe at the top of sts.ini and it worked for me","title":"STS is failing to start on my machine","body":"<p>Added line -vm\nC:\\Program Files\\Java\\jdk1.8.0_45\\bin\\javaw.exe at the top of sts.ini and it worked for me</p>\n"},{"tags":[],"owner":{"account_id":8821418,"reputation":1,"user_id":6591145,"display_name":"Meharnath B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507655352,"creation_date":1507648234,"answer_id":46670180,"question_id":13813112,"body_markdown":"If you are using 32 bit OS, please install 32-bit version of Java 1.8 and similarly 64bit version of java for 64 bit machine.\r\n\r\nAlso, add below vm configurations to your STS.ini file\r\n\r\n\r\n----------\r\n\r\n    -vm \r\n    C:\\Users\\bmeharn\\Documents\\Softwares\\Java8\\jdk1.8.0_131\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170531-1133\r\n    -product\r\n    org.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -Xms40m\r\n    -Dosgi.module.lock.timeout=10\r\n    -Xverify:none\r\n    -Dorg.eclipse.swt.browser.IEVersion=10001\r\n    -Xmx1200m\r\n\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>If you are using 32 bit OS, please install 32-bit version of Java 1.8 and similarly 64bit version of java for 64 bit machine.</p>\n\n<p>Also, add below vm configurations to your STS.ini file</p>\n\n<hr>\n\n<pre><code>-vm \nC:\\Users\\bmeharn\\Documents\\Softwares\\Java8\\jdk1.8.0_131\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170531-1133\n-product\norg.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n-vmargs\n-Dosgi.requiredJavaVersion=1.8\n-Xms40m\n-Dosgi.module.lock.timeout=10\n-Xverify:none\n-Dorg.eclipse.swt.browser.IEVersion=10001\n-Xmx1200m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4760206,"reputation":11,"user_id":3847765,"display_name":"Sanjay KK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530790775,"creation_date":1530790775,"answer_id":51190422,"question_id":13813112,"body_markdown":"There are two different downloaders of the STS IDE. May be you have downloaded 32 bit version instead of 64 bits version. Downloaded zip somehow has win32 in either cases.","title":"STS is failing to start on my machine","body":"<p>There are two different downloaders of the STS IDE. May be you have downloaded 32 bit version instead of 64 bits version. Downloaded zip somehow has win32 in either cases.</p>\n"},{"tags":[],"owner":{"account_id":8884633,"reputation":179,"user_id":6633285,"display_name":"Sachin Ghumbre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546146098,"creation_date":1546145683,"answer_id":53975364,"question_id":13813112,"body_markdown":"Try Below things and this will surely resolve your issue:\r\n\r\n1. Check your **OS (32 or 64 bit)** and then check STS whether it is compatible with 32 or 64 bit or for both. Now check your **jdk (32 or 64 bit)**\r\n2. If step 1 is validated then update **javaw.exe** path on top in **STS.ini** as given below. Make sure there are no duplicate entries for this path in STS.ini and path is also correct\r\n\r\n**-vm\r\nC:\\Program Files\\Java\\jdk1.8.0_191\\bin\\javaw.exe**\r\n\r\nDone your STS will surely run, best luck !","title":"STS is failing to start on my machine","body":"<p>Try Below things and this will surely resolve your issue:</p>\n\n<ol>\n<li>Check your <strong>OS (32 or 64 bit)</strong> and then check STS whether it is compatible with 32 or 64 bit or for both. Now check your <strong>jdk (32 or 64 bit)</strong></li>\n<li>If step 1 is validated then update <strong>javaw.exe</strong> path on top in <strong>STS.ini</strong> as given below. Make sure there are no duplicate entries for this path in STS.ini and path is also correct</li>\n</ol>\n\n<p><strong>-vm\nC:\\Program Files\\Java\\jdk1.8.0_191\\bin\\javaw.exe</strong></p>\n\n<p>Done your STS will surely run, best luck !</p>\n"},{"tags":[],"owner":{"account_id":12498830,"reputation":1,"user_id":9097905,"display_name":"JavaEngineer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558543889,"creation_date":1558543889,"answer_id":56261644,"question_id":13813112,"body_markdown":"Updated -vm properties but still not working. Running sts as Administrator worked for me.","title":"STS is failing to start on my machine","body":"<p>Updated -vm properties but still not working. Running sts as Administrator worked for me.</p>\n"},{"tags":[],"owner":{"account_id":17945185,"reputation":122,"user_id":13039638,"display_name":"uma mahesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690303969,"creation_date":1690195556,"answer_id":76753719,"question_id":13813112,"body_markdown":"If your workspace in **one drive** make sure that your one drive is running in windows","title":"STS is failing to start on my machine","body":"<p>If your workspace in <strong>one drive</strong> make sure that your one drive is running in windows</p>\n"}],"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34709,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":13831131,"answer_count":12,"score":5,"last_activity_date":1690304034,"creation_date":1355195983,"question_id":13813112,"body_markdown":"I was trying to setup Spring mvc projects on eclipse. Basic projects were working fine. But using restful services, jersey etc started giving so many errors related to dependencies. So I am planning to move on to STS.\r\n\r\nI am using STS 2.9.2. It was giving me &quot;failed to create java virtual machine&quot;. So I added \r\n\r\n    -vm C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n\r\nto STS.ini. But now it is giving me following fatal error\r\n\r\n![enter image description here][1]\r\n\r\nBelow is STS.ini\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502\r\n    -product\r\n    com.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.XXMaxPermSize\r\n    884M\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xmn128m\r\n    -Xms256m\r\n    -Xmx768m\r\n    -Xss1m\r\n    -XX:PermSize=384m\r\n    -XX:MaxPermSize=768m\r\n\r\n - Eclipse is working perfectly on my machine.\r\n - I don&#39;t want to use Maven or other build tools to solve dependencies related problem due to\r\n   limited internet speed.\r\n\r\n  [1]: http://i.stack.imgur.com/sgK5o.jpg","title":"STS is failing to start on my machine","body":"<p>I was trying to setup Spring mvc projects on eclipse. Basic projects were working fine. But using restful services, jersey etc started giving so many errors related to dependencies. So I am planning to move on to STS.</p>\n\n<p>I am using STS 2.9.2. It was giving me \"failed to create java virtual machine\". So I added </p>\n\n<pre><code>-vm C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n</code></pre>\n\n<p>to STS.ini. But now it is giving me following fatal error</p>\n\n<p><img src=\"https://i.stack.imgur.com/sgK5o.jpg\" alt=\"enter image description here\"></p>\n\n<p>Below is STS.ini</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502\n-product\ncom.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n--launcher.XXMaxPermSize\n884M\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xmn128m\n-Xms256m\n-Xmx768m\n-Xss1m\n-XX:PermSize=384m\n-XX:MaxPermSize=768m\n</code></pre>\n\n<ul>\n<li>Eclipse is working perfectly on my machine.</li>\n<li>I don't want to use Maven or other build tools to solve dependencies related problem due to\nlimited internet speed.</li>\n</ul>\n"},{"tags":["java","java-platform-module-system","module-info"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690222760,"post_id":76756387,"comment_id":135320387,"body_markdown":"*...  then the module must contain opens resources.* No - that&#39;s not necessary","body":"<i>...  then the module must contain opens resources.</i> No - that&#39;s not necessary"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690225554,"post_id":76756387,"comment_id":135320798,"body_markdown":"What makes you think you need an `opens` instruction for reading resources? When I create two modules, one with a resource and one using it with `getClassLoader().getResourceAsStream(&quot;META-INF/res/A.txt&quot;)`, I don&#39;t need any `opens` statements.","body":"What makes you think you need an <code>opens</code> instruction for reading resources? When I create two modules, one with a resource and one using it with <code>getClassLoader().getResourceAsStream(&quot;META-INF&#47;res&#47;A.txt&quot;)</code>, I don&#39;t need any <code>opens</code> statements."},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1690301017,"post_id":76756387,"comment_id":135332895,"body_markdown":"@g00se then how do you explain [this exception](https://github.com/testng-team/testng/issues/2727#issue-1128971797)? [Class.getResourceAsStream()](https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109) is returning `null` when looking up a resource in an external module.","body":"@g00se then how do you explain <a href=\"https://github.com/testng-team/testng/issues/2727#issue-1128971797\" rel=\"nofollow noreferrer\">this exception</a>? <a href=\"https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109\" rel=\"nofollow noreferrer\">Class.getResourceAsStream()</a> is returning <code>null</code> when looking up a resource in an external module."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690301156,"post_id":76756387,"comment_id":135332930,"body_markdown":"Did you try using `ClassLoader#getResourceAsStream` and the full resource name? Can you try to provide an [mcve]?","body":"Did you try using <code>ClassLoader#getResourceAsStream</code> and the full resource name? Can you try to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690302231,"post_id":76756387,"comment_id":135333174,"body_markdown":"*@g00se then how do you explain this exception?* The path to the resource is wrong? In the exception message the resource name is simply the plain file name. That would mean it would have (generally) to be in the same package as the class that loaded it. That, needless to say, is not the correct state of affairs: that Javascript resource should be in a separate resource folder","body":"<i>@g00se then how do you explain this exception?</i> The path to the resource is wrong? In the exception message the resource name is simply the plain file name. That would mean it would have (generally) to be in the same package as the class that loaded it. That, needless to say, is not the correct state of affairs: that Javascript resource should be in a separate resource folder"},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1690302505,"post_id":76756387,"comment_id":135333232,"body_markdown":"@g00se I agree that the path looks wrong, but why would this code work fine on the classpath but break on the module path? Does Java include `/META-INF/resources` in the search path for non-modular code, but removes it for modular code? That seems odd.","body":"@g00se I agree that the path looks wrong, but why would this code work fine on the classpath but break on the module path? Does Java include <code>&#47;META-INF&#47;resources</code> in the search path for non-modular code, but removes it for modular code? That seems odd."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690302879,"post_id":76756387,"comment_id":135333307,"body_markdown":"Try to create a minimal reproducer (using the command line) of the issue and show that in your question. I assume there might be some `.class` file or similar in the `META-INF` directory.","body":"Try to create a minimal reproducer (using the command line) of the issue and show that in your question. I assume there might be some <code>.class</code> file or similar in the <code>META-INF</code> directory."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690303027,"post_id":76756387,"comment_id":135333336,"body_markdown":"`META-INF` is generally nothing to do with resources. To debug, I would print the value of system property `java.class.path` at the app&#39;s entry point","body":"<code>META-INF</code> is generally nothing to do with resources. To debug, I would print the value of system property <code>java.class.path</code> at the app&#39;s entry point"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690303113,"post_id":76756387,"comment_id":135333355,"body_markdown":"Are you maybe using multi-release JARs? Because these have `.class` files somewhere in the `META-INF` directory. Try without a multi-release build.","body":"Are you maybe using multi-release JARs? Because these have <code>.class</code> files somewhere in the <code>META-INF</code> directory. Try without a multi-release build."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690303665,"post_id":76756387,"comment_id":135333465,"body_markdown":"You might also want to make sure you are using a `Class` from the same `ClassLoader` the resource is located under as well.","body":"You might also want to make sure you are using a <code>Class</code> from the same <code>ClassLoader</code> the resource is located under as well."}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690302931,"creation_date":1690302931,"answer_id":76764802,"question_id":76756387,"body_markdown":"From my testing, opening the package is only necessary when **the file is in the same package as a class in the module**. In that case, you need to open the package of the class in the same module.\r\n\r\nSo, assume you have a project like the following:\r\n```\r\n|-A\r\n| |-module-info.java\r\n| |-a\r\n|   |-A.java\r\n|   |-x\r\n|     |-X\r\n|-B\r\n  |-module-info.java\r\n  |-b\r\n    |-B.java\r\n```\r\nand `A/module-info.java`:\r\n```java\r\nmodule a {\r\n\texports a;\r\n}\r\n```\r\nas well as `B/module-info.java`:\r\n```java\r\nmodule b {\r\n\trequires a;\r\n}\r\n```\r\n\r\nthen compile it with the following commands:\r\n```bash\r\ncd A\r\njavac module-info.java a\\A.java\r\ncd ..\r\ncd B\r\njavac --module-path ..\\A module-info.java b\\B.java\r\ncd ..\r\n```\r\n\r\nThe content of class `A` is irrelevant here (it just needs to exist and have a class/interface/enum/record/whatever declaration with the correct name).\r\n\r\nWe then let `B` read the file `a/x/X` from module `A`:\r\n```java\r\npackage b;\r\n\r\nimport java.io.*;\r\nimport a.A;\r\n\r\npublic class B{\r\n\tpublic static void main(String[] args) throws Exception{\r\n\t\ttry(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getClassLoader().getResourceAsStream(&quot;a/x/X&quot;)))){\r\n\t\t\tSystem.out.println(br.readLine());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nWhen running it with\r\n```java\r\njava --module-path A;B -m b/b.B\r\n```\r\nit displays the first line of `a/x/X`.\r\n\r\nHowever, we cannot access files in the same directory as the `A.class` file:\r\n```java\r\npackage b;\r\n\r\nimport java.io.*;\r\nimport a.A;\r\n\r\npublic class B{\r\n\tpublic static void main(String[] args) throws Exception{\r\n\t\ttry(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getResourceAsStream(&quot;A.java&quot;)))){\r\n\t\t\tSystem.out.println(br.readLine());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nIf we now add `opens a` in `A/module-info.java` (and recompile the module with the above command), the resource can be read.\r\n\r\nIf we want to read `/META-INF/a/A.txt` or similar (in the `A` module), no `opens` statement is required as there is no class in the same package.","title":"How to access files in /META-INF/resources when module-info.java is present?","body":"<p>From my testing, opening the package is only necessary when <strong>the file is in the same package as a class in the module</strong>. In that case, you need to open the package of the class in the same module.</p>\n<p>So, assume you have a project like the following:</p>\n<pre><code>|-A\n| |-module-info.java\n| |-a\n|   |-A.java\n|   |-x\n|     |-X\n|-B\n  |-module-info.java\n  |-b\n    |-B.java\n</code></pre>\n<p>and <code>A/module-info.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module a {\n    exports a;\n}\n</code></pre>\n<p>as well as <code>B/module-info.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module b {\n    requires a;\n}\n</code></pre>\n<p>then compile it with the following commands:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cd A\njavac module-info.java a\\A.java\ncd ..\ncd B\njavac --module-path ..\\A module-info.java b\\B.java\ncd ..\n</code></pre>\n<p>The content of class <code>A</code> is irrelevant here (it just needs to exist and have a class/interface/enum/record/whatever declaration with the correct name).</p>\n<p>We then let <code>B</code> read the file <code>a/x/X</code> from module <code>A</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package b;\n\nimport java.io.*;\nimport a.A;\n\npublic class B{\n    public static void main(String[] args) throws Exception{\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getClassLoader().getResourceAsStream(&quot;a/x/X&quot;)))){\n            System.out.println(br.readLine());\n        }\n    }\n}\n</code></pre>\n<p>When running it with</p>\n<pre class=\"lang-java prettyprint-override\"><code>java --module-path A;B -m b/b.B\n</code></pre>\n<p>it displays the first line of <code>a/x/X</code>.</p>\n<p>However, we cannot access files in the same directory as the <code>A.class</code> file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package b;\n\nimport java.io.*;\nimport a.A;\n\npublic class B{\n    public static void main(String[] args) throws Exception{\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getResourceAsStream(&quot;A.java&quot;)))){\n            System.out.println(br.readLine());\n        }\n    }\n}\n</code></pre>\n<p>If we now add <code>opens a</code> in <code>A/module-info.java</code> (and recompile the module with the above command), the resource can be read.</p>\n<p>If we want to read <code>/META-INF/a/A.txt</code> or similar (in the <code>A</code> module), no <code>opens</code> statement is required as there is no class in the same package.</p>\n"}],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76764802,"answer_count":1,"score":2,"last_activity_date":1690303392,"creation_date":1690215951,"question_id":76756387,"body_markdown":"When TestNG invokes [Class.getResourceAsStream()](https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109) on an external module, [it is returning null](https://github.com/testng-team/testng/issues/2727#issue-1128971797).\r\n\r\nPer https://stackoverflow.com/questions/59020158/resources-visibility-with-java9-modules#comment104334989_59020158 when a user wants to access `/resources/someResource.xml` in a library that contains `module-info.java`, the module must `opens resources` unconditionally.\r\n\r\nFair enough. But what happens if a user wants to access `/META-INF/resources/someResource.xml` in such a library? What `opens` instruction is necessary in this case?\r\n\r\n**UPDATE**:\r\n\r\nThe bug report was filed against version 7.5 of TestNG. I just noticed that if we [look at the source code](https://github.com/testng-team/testng/blob/release_7.5/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L107C71-L107C71) of that version we see it is trying to load `/META-INF/resources/webjars/jquery/3.5.1/jquery.min.js`.","title":"How to access files in /META-INF/resources when module-info.java is present?","body":"<p>When TestNG invokes <a href=\"https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109\" rel=\"nofollow noreferrer\">Class.getResourceAsStream()</a> on an external module, <a href=\"https://github.com/testng-team/testng/issues/2727#issue-1128971797\" rel=\"nofollow noreferrer\">it is returning null</a>.</p>\n<p>Per <a href=\"https://stackoverflow.com/questions/59020158/resources-visibility-with-java9-modules#comment104334989_59020158\">Resources visibility with java9 modules</a> when a user wants to access <code>/resources/someResource.xml</code> in a library that contains <code>module-info.java</code>, the module must <code>opens resources</code> unconditionally.</p>\n<p>Fair enough. But what happens if a user wants to access <code>/META-INF/resources/someResource.xml</code> in such a library? What <code>opens</code> instruction is necessary in this case?</p>\n<p><strong>UPDATE</strong>:</p>\n<p>The bug report was filed against version 7.5 of TestNG. I just noticed that if we <a href=\"https://github.com/testng-team/testng/blob/release_7.5/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L107C71-L107C71\" rel=\"nofollow noreferrer\">look at the source code</a> of that version we see it is trying to load <code>/META-INF/resources/webjars/jquery/3.5.1/jquery.min.js</code>.</p>\n"},{"tags":["java","java-9","java-module"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1574758391,"post_id":59020158,"comment_id":104334989,"body_markdown":"Resources in named modules are encapsulated by default. The ClassLoader getResource methods can only locate resources in packages that are open to all modules. Is the V1__init.sql resource in your own module? If so, use Class.getResource instead.","body":"Resources in named modules are encapsulated by default. The ClassLoader getResource methods can only locate resources in packages that are open to all modules. Is the V1__init.sql resource in your own module? If so, use Class.getResource instead."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1574778743,"post_id":59020158,"comment_id":104346181,"body_markdown":"When you need resources of your own module, you should not ask the thread&#39;s context class loader, a feature that only exists to allow setting it to a *different* class loader.","body":"When you need resources of your own module, you should not ask the thread&#39;s context class loader, a feature that only exists to allow setting it to a <i>different</i> class loader."},{"owner":{"account_id":1568042,"reputation":532,"user_id":1456388,"accept_rate":33,"display_name":"fritsMaister"},"score":0,"creation_date":1574803166,"post_id":59020158,"comment_id":104358441,"body_markdown":"I moved the `V1__init.sql` file to `com\\my\\color\\view\\V1__init.sql` and I open this package `opens com.my.color.view;`\nWith this configuration flyway can access the file when I run  `gradle run` but it can&#39;t when I run it with intelij or with running the generated image after `gradle jlink`","body":"I moved the <code>V1__init.sql</code> file to <code>com\\my\\color\\view\\V1__init.sql</code> and I open this package <code>opens com.my.color.view;</code> With this configuration flyway can access the file when I run  <code>gradle run</code> but it can&#39;t when I run it with intelij or with running the generated image after <code>gradle jlink</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1574843240,"post_id":59020158,"comment_id":104370314,"body_markdown":"Just to emphasize the things already said, you should access the resource like, e.g. `ColorsListView.class.getResource(&quot;V1__init.sql&quot;)`, so that package and module are implicitly given. Then, you must use the returned `URL` as-is, instead of assuming that its `getPath` method returns a file. After packaging the code as jar or image, the resource is not a file anymore.","body":"Just to emphasize the things already said, you should access the resource like, e.g. <code>ColorsListView.class.getResource(&quot;V1__init.sql&quot;)</code>, so that package and module are implicitly given. Then, you must use the returned <code>URL</code> as-is, instead of assuming that its <code>getPath</code> method returns a file. After packaging the code as jar or image, the resource is not a file anymore."}],"owner":{"account_id":1568042,"reputation":532,"user_id":1456388,"accept_rate":33,"display_name":"fritsMaister"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690302588,"creation_date":1574614701,"question_id":59020158,"body_markdown":"I&#39;m having issues with finding resources since I start using java modules. \r\n\r\nThe same exact code: ` Thread.currentThread().contextClassLoader.getResource(&quot;db/migration/V1__init.sql&quot;)?.path` behave different, with java-module it returns null, without it, it returns the correct path. \r\n\r\nI guess I&#39;m missing something about java-modules visibility. \r\n\r\nI&#39;m having problems with flyway loading migration files. I&#39;ve made an example code in [github][1] \r\n\r\n\r\n  [1]: https://github.com/ferranDelgado/colors-tornadofx","title":"Resources visibility with java9 modules","body":"<p>I'm having issues with finding resources since I start using java modules. </p>\n\n<p>The same exact code: <code>Thread.currentThread().contextClassLoader.getResource(\"db/migration/V1__init.sql\")?.path</code> behave different, with java-module it returns null, without it, it returns the correct path. </p>\n\n<p>I guess I'm missing something about java-modules visibility. </p>\n\n<p>I'm having problems with flyway loading migration files. I've made an example code in <a href=\"https://github.com/ferranDelgado/colors-tornadofx\" rel=\"nofollow noreferrer\">github</a> </p>\n"},{"tags":["java","spring-boot","jwt","base64","base64url"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1611006489,"post_id":65782480,"comment_id":116307520,"body_markdown":"Put error text in your post as text. Not as image. Having said that: I don&#39;t see your code catching that error anywhere, so which line of _your_ code triggers this errors?","body":"Put error text in your post as text. Not as image. Having said that: I don&#39;t see your code catching that error anywhere, so which line of <i>your</i> code triggers this errors?"},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1611006999,"post_id":65782480,"comment_id":116307663,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans I edited the post and put the error as text. When I do a request that goes through the filter with an JWToken in the header I get this error.","body":"@Mike&#39;Pomax&#39;Kamermans I edited the post and put the error as text. When I do a request that goes through the filter with an JWToken in the header I get this error."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1611008447,"post_id":65782480,"comment_id":116308119,"body_markdown":"_Why_ are you rewriting your own filter instead of using the out-of-the-box Spring Security JWT support?","body":"<i>Why</i> are you rewriting your own filter instead of using the out-of-the-box Spring Security JWT support?"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623100013,"post_id":65782480,"comment_id":119978311,"body_markdown":"Did you end up figuring it out by any chance? I am in a similar situation at the moment.","body":"Did you end up figuring it out by any chance? I am in a similar situation at the moment."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":1,"creation_date":1623152833,"post_id":65782480,"comment_id":119990901,"body_markdown":"@A.J yes for some reason the substring function still kept on some white space before the token so I changed that to: requestTokenHeader.split(&quot; &quot;)[1].trim()","body":"@A.J yes for some reason the substring function still kept on some white space before the token so I changed that to: requestTokenHeader.split(&quot; &quot;)[1].trim()"},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":1,"creation_date":1623153063,"post_id":65782480,"comment_id":119990986,"body_markdown":"@A.J I also answered my question below just now","body":"@A.J I also answered my question below just now"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623182102,"post_id":65782480,"comment_id":120004786,"body_markdown":"@RonnyGiezen hmm I added your change but it didn&#39;t fix the issue. I do have a slightly different error - `Illegal base64 character: &#39;&gt;&#39;`, although I&#39;d guess it is because of the same problem.","body":"@RonnyGiezen hmm I added your change but it didn&#39;t fix the issue. I do have a slightly different error - <code>Illegal base64 character: &#39;&gt;&#39;</code>, although I&#39;d guess it is because of the same problem."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1623183375,"post_id":65782480,"comment_id":120005284,"body_markdown":"@A.J Do you see that character anywhere when you print the token in the console after trimming it?","body":"@A.J Do you see that character anywhere when you print the token in the console after trimming it?"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623183911,"post_id":65782480,"comment_id":120005481,"body_markdown":"@RonnyGiezen This happens just in general when I try to generate the token as well. It fails in your `public String encode(String name, boolean admin) {` method. But yea, if I send a token and output it then I don&#39;t see that `&lt;` symbol.","body":"@RonnyGiezen This happens just in general when I try to generate the token as well. It fails in your <code>public String encode(String name, boolean admin) {</code> method. But yea, if I send a token and output it then I don&#39;t see that <code>&lt;</code> symbol."},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623185014,"post_id":65782480,"comment_id":120005877,"body_markdown":"@RonnyGiezen FYI this happened only after moving from version `0.9.1` to `0.11.2`.","body":"@RonnyGiezen FYI this happened only after moving from version <code>0.9.1</code> to <code>0.11.2</code>."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1623185296,"post_id":65782480,"comment_id":120005977,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/233524/discussion-between-ronny-giezen-and-a-j).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/233524/discussion-between-ronny-giezen-and-a-j\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1611008633,"creation_date":1611008633,"answer_id":65782873,"question_id":65782480,"body_markdown":"What you are decoding isn&#39;t the token, you&#39;re trying to decode _the entire header value_. `Bearer ` isn&#39;t part of the token, it&#39;s the authentication scheme.\r\n\r\nMore generally, you&#39;re writing your own security infrastructure, which is almost always a very bad idea. Spring Security JWT handles all of this for you automatically; use it instead.","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>What you are decoding isn't the token, you're trying to decode <em>the entire header value</em>. <code>Bearer </code> isn't part of the token, it's the authentication scheme.</p>\n<p>More generally, you're writing your own security infrastructure, which is almost always a very bad idea. Spring Security JWT handles all of this for you automatically; use it instead.</p>\n"},{"tags":[],"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1623153557,"creation_date":1623153031,"answer_id":67886311,"question_id":65782480,"body_markdown":"For some reason the substring function kept some white space before the token. I changed that line in my JWTRequestFilter.\r\n\r\nOld:\r\n\r\n    jwtToken = requestTokenHeader.substring(7);\r\nNew:\r\n\r\n    jwtToken = requestTokenHeader.split(&quot; &quot;)[1].trim();\r\nThe added .trim() will delete any white space before or after the string, so that was the solution for me","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>For some reason the substring function kept some white space before the token. I changed that line in my JWTRequestFilter.</p>\n<p>Old:</p>\n<pre><code>jwtToken = requestTokenHeader.substring(7);\n</code></pre>\n<p>New:</p>\n<pre><code>jwtToken = requestTokenHeader.split(&quot; &quot;)[1].trim();\n</code></pre>\n<p>The added .trim() will delete any white space before or after the string, so that was the solution for me</p>\n"},{"tags":[],"owner":{"account_id":23329722,"reputation":11,"user_id":17406298,"display_name":"mohamedpieerre"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651725975,"creation_date":1651725975,"answer_id":72122028,"question_id":65782480,"body_markdown":"U can also use this : \r\n\r\n    jwtToken = requestTokenHeader.substring(&quot;Bearer &quot;.length());\r\n\r\nIt solved the some problem for me.","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>U can also use this :</p>\n<pre><code>jwtToken = requestTokenHeader.substring(&quot;Bearer &quot;.length());\n</code></pre>\n<p>It solved the some problem for me.</p>\n"},{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690302340,"creation_date":1690301946,"answer_id":76764679,"question_id":65782480,"body_markdown":"For me, the problem has been solved after using a proper Base64 compatible secret (i.e., the secret should not have any illegal characters). If you still run into the issue, then double check your secret key i.e., are you using the same secret while decoding the token? \r\n\r\nYou can use the below code to securely generate secret key:\r\n\r\n    public String createSecretKey() {\r\n        SecureRandom secureRandom = new SecureRandom();\r\n        byte[] secretBytes = new byte[36]; //36*8=288 (&gt;256 bits required for HS256)\r\n        secureRandom.nextBytes(secretBytes);\r\n        Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding();\r\n        return encoder.encodeToString(secretBytes);\r\n    }","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>For me, the problem has been solved after using a proper Base64 compatible secret (i.e., the secret should not have any illegal characters). If you still run into the issue, then double check your secret key i.e., are you using the same secret while decoding the token?</p>\n<p>You can use the below code to securely generate secret key:</p>\n<pre><code>public String createSecretKey() {\n    SecureRandom secureRandom = new SecureRandom();\n    byte[] secretBytes = new byte[36]; //36*8=288 (&gt;256 bits required for HS256)\n    secureRandom.nextBytes(secretBytes);\n    Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding();\n    return encoder.encodeToString(secretBytes);\n}\n</code></pre>\n"}],"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13509,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":67886311,"answer_count":4,"score":7,"last_activity_date":1690302340,"creation_date":1611006248,"question_id":65782480,"body_markdown":"When I get some claims from a JWT Token to validate user authentication I get the following error:\r\n\r\n    Illegal base64url character: &#39; &#39;\r\n\r\nCreating a JWT goes completely fine but &quot;decoding&quot; seems to have some issues...\r\nI also tried a base64url decoder to decode the token before getting the claims but then the token is unvalid.\r\n\r\nMy JWToken class where I encode and &quot;decode&quot; the token:\r\n\r\n    @Component\r\n    public class JWToken {\r\n    \r\n        private static final String JWT_USERNAME_CLAIM = &quot;sub&quot;;\r\n        private static final String JWT_ADMIN_CLAIM = &quot;admin&quot;;\r\n    \r\n        @Value(&quot;${jwt.issuer}&quot;)\r\n        private String issuer;\r\n    \r\n        @Value(&quot;${jwt.passPhrase}&quot;)\r\n        private String passPhrase;\r\n    \r\n        @Value(&quot;${jwt.duration-of-validity}&quot;)\r\n        private int expiration;\r\n    \r\n    \r\n       public String encode(String name, boolean admin) {\r\n           String token = Jwts.builder()\r\n                   .claim(JWT_USERNAME_CLAIM, name)\r\n                   .claim(JWT_ADMIN_CLAIM, admin)\r\n                   .setSubject(name)\r\n                   .setIssuer(issuer)\r\n                   .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                   .setExpiration(new Date(System.currentTimeMillis() + expiration * 1000))\r\n                   .signWith(SignatureAlgorithm.HS512, passPhrase).compact();\r\n    \r\n           return token;\r\n       }\r\n    \r\n    \r\n        //for retrieving any information from token we will need the secret key\r\n        private Claims getAllClaimsFromToken(String token) {\r\n            return Jwts.parser().setSigningKey(passPhrase).parseClaimsJws(token).getBody();\r\n        }\r\n    \r\n        public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n            final Claims claims = getAllClaimsFromToken(token);\r\n            return claimsResolver.apply(claims);\r\n        }\r\n    \r\n        //retrieve username from jwt token\r\n        public String getUsernameFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getSubject);\r\n        }\r\n    \r\n        //retrieve expiration date from jwt token\r\n        public Date getExpirationDateFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getExpiration);\r\n        }\r\n    \r\n        //check if the token has expired\r\n        private Boolean isTokenExpired(String token) {\r\n            final Date expiration = getExpirationDateFromToken(token);\r\n            return expiration.before(new Date());\r\n        }\r\n    \r\n        //validate token\r\n        public Boolean validateToken(String token, String name) {\r\n            final String username = getUsernameFromToken(token);\r\n            return (username.equals(name) &amp;&amp; !isTokenExpired(token));\r\n        }\r\n        \r\n    \r\n    \r\n    }\r\n\r\nMy request filter:\r\n\r\n    @Component\r\n    public class JWTRequestFilter extends OncePerRequestFilter {\r\n        private static final Set&lt;String&gt; SECURED_PATHS =\r\n                Set.of(&quot;/api/offers&quot;, &quot;/api/bids&quot;);\r\n    \r\n        private final JWToken jwToken;\r\n    \r\n        @Autowired\r\n        public JWTRequestFilter(JWToken jwToken) {\r\n            this.jwToken = jwToken;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n    \r\n    \r\n            final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n            String username = null;\r\n            String jwtToken = null;\r\n    \r\n            String servletPath = request.getServletPath();\r\n    \r\n            if (HttpMethod.OPTIONS.matches(request.getMethod()) || SECURED_PATHS.stream().noneMatch(servletPath::startsWith)) {\r\n    \r\n                filterChain.doFilter(request, response);\r\n                return;\r\n            }\r\n    \r\n            // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\r\n            // only the Token\r\n            if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n                jwtToken = requestTokenHeader.substring(7);\r\n                try {\r\n                    System.out.println(jwtToken);\r\n                    username = jwToken.getUsernameFromToken(jwtToken);\r\n                } catch (IllegalArgumentException e) {\r\n                    System.out.println(&quot;Unable to get JWT Token&quot;);\r\n                    throw new AuthenticationException(&quot;authentication problem&quot;);\r\n                } catch (ExpiredJwtException e) {\r\n                    throw new AuthenticationException(&quot;authentication problem&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(requestTokenHeader);\r\n                logger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\r\n                //throw new AuthenticationException(&quot;authentication problem&quot;);\r\n            }\r\n    \r\n            if(jwToken.validateToken(jwtToken, username)){\r\n                filterChain.doFilter(request, response);\r\n            }\r\n    \r\n            // Once we get the token validate it.\r\n    \r\n            }\r\n    \r\n    }\r\n\r\nThe error in my console when I do a get request for `/api/offers` with the generated JWT token in the header:\r\n\r\n    io.jsonwebtoken.io.DecodingException: Illegal base64url character: &#39; &#39;\r\n    \tat io.jsonwebtoken.io.Base64.ctoi(Base64.java:221) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64.decodeFast(Base64.java:270) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:23) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.ExceptionPropagatingDecoder.decode(ExceptionPropagatingDecoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:309) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:550) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:610) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat team10.server.aucserver.security.JWToken.getAllClaimsFromToken(JWToken.java:47) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWToken.getClaimFromToken(JWToken.java:51) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWToken.getUsernameFromToken(JWToken.java:57) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWTRequestFilter.doFilterInternal(JWTRequestFilter.java:52) ~[classes/:na]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n\r\nAnd line 47 is the `getAllClaimsFromToken` method in the JWToken class.\r\n\r\nFor an extra example this is one of the tokens the encode genrated:\r\n\r\n    Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJyb25ueSIsImFkbWluIjpmYWxzZSwiaXNzIjoicHJpdmF0ZSBjb21wYW55IiwiaWF0IjoxNjExMDA1NTc4LCJleHAiOjE2MTEwMDY3Nzh9.dQwEVfSNa6EIx-U-bgHN50hmrN0wYkj-8jXRoFLTx6JB53ERBWuGUeiXLqtiJ_jTGxEISB-Lv7E9KAyPk8nV3g","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>When I get some claims from a JWT Token to validate user authentication I get the following error:</p>\n<pre><code>Illegal base64url character: ' '\n</code></pre>\n<p>Creating a JWT goes completely fine but &quot;decoding&quot; seems to have some issues...\nI also tried a base64url decoder to decode the token before getting the claims but then the token is unvalid.</p>\n<p>My JWToken class where I encode and &quot;decode&quot; the token:</p>\n<pre><code>@Component\npublic class JWToken {\n\n    private static final String JWT_USERNAME_CLAIM = &quot;sub&quot;;\n    private static final String JWT_ADMIN_CLAIM = &quot;admin&quot;;\n\n    @Value(&quot;${jwt.issuer}&quot;)\n    private String issuer;\n\n    @Value(&quot;${jwt.passPhrase}&quot;)\n    private String passPhrase;\n\n    @Value(&quot;${jwt.duration-of-validity}&quot;)\n    private int expiration;\n\n\n   public String encode(String name, boolean admin) {\n       String token = Jwts.builder()\n               .claim(JWT_USERNAME_CLAIM, name)\n               .claim(JWT_ADMIN_CLAIM, admin)\n               .setSubject(name)\n               .setIssuer(issuer)\n               .setIssuedAt(new Date(System.currentTimeMillis()))\n               .setExpiration(new Date(System.currentTimeMillis() + expiration * 1000))\n               .signWith(SignatureAlgorithm.HS512, passPhrase).compact();\n\n       return token;\n   }\n\n\n    //for retrieving any information from token we will need the secret key\n    private Claims getAllClaimsFromToken(String token) {\n        return Jwts.parser().setSigningKey(passPhrase).parseClaimsJws(token).getBody();\n    }\n\n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = getAllClaimsFromToken(token);\n        return claimsResolver.apply(claims);\n    }\n\n    //retrieve username from jwt token\n    public String getUsernameFromToken(String token) {\n        return getClaimFromToken(token, Claims::getSubject);\n    }\n\n    //retrieve expiration date from jwt token\n    public Date getExpirationDateFromToken(String token) {\n        return getClaimFromToken(token, Claims::getExpiration);\n    }\n\n    //check if the token has expired\n    private Boolean isTokenExpired(String token) {\n        final Date expiration = getExpirationDateFromToken(token);\n        return expiration.before(new Date());\n    }\n\n    //validate token\n    public Boolean validateToken(String token, String name) {\n        final String username = getUsernameFromToken(token);\n        return (username.equals(name) &amp;&amp; !isTokenExpired(token));\n    }\n    \n\n\n}\n</code></pre>\n<p>My request filter:</p>\n<pre><code>@Component\npublic class JWTRequestFilter extends OncePerRequestFilter {\n    private static final Set&lt;String&gt; SECURED_PATHS =\n            Set.of(&quot;/api/offers&quot;, &quot;/api/bids&quot;);\n\n    private final JWToken jwToken;\n\n    @Autowired\n    public JWTRequestFilter(JWToken jwToken) {\n        this.jwToken = jwToken;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n\n\n\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n        String username = null;\n        String jwtToken = null;\n\n        String servletPath = request.getServletPath();\n\n        if (HttpMethod.OPTIONS.matches(request.getMethod()) || SECURED_PATHS.stream().noneMatch(servletPath::startsWith)) {\n\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\n        // only the Token\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                System.out.println(jwtToken);\n                username = jwToken.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                System.out.println(&quot;Unable to get JWT Token&quot;);\n                throw new AuthenticationException(&quot;authentication problem&quot;);\n            } catch (ExpiredJwtException e) {\n                throw new AuthenticationException(&quot;authentication problem&quot;);\n            }\n        } else {\n            System.out.println(requestTokenHeader);\n            logger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\n            //throw new AuthenticationException(&quot;authentication problem&quot;);\n        }\n\n        if(jwToken.validateToken(jwtToken, username)){\n            filterChain.doFilter(request, response);\n        }\n\n        // Once we get the token validate it.\n\n        }\n\n}\n</code></pre>\n<p>The error in my console when I do a get request for <code>/api/offers</code> with the generated JWT token in the header:</p>\n<pre><code>io.jsonwebtoken.io.DecodingException: Illegal base64url character: ' '\n    at io.jsonwebtoken.io.Base64.ctoi(Base64.java:221) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64.decodeFast(Base64.java:270) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:23) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.ExceptionPropagatingDecoder.decode(ExceptionPropagatingDecoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:309) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:550) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:610) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at team10.server.aucserver.security.JWToken.getAllClaimsFromToken(JWToken.java:47) ~[classes/:na]\n    at team10.server.aucserver.security.JWToken.getClaimFromToken(JWToken.java:51) ~[classes/:na]\n    at team10.server.aucserver.security.JWToken.getUsernameFromToken(JWToken.java:57) ~[classes/:na]\n    at team10.server.aucserver.security.JWTRequestFilter.doFilterInternal(JWTRequestFilter.java:52) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n</code></pre>\n<p>And line 47 is the <code>getAllClaimsFromToken</code> method in the JWToken class.</p>\n<p>For an extra example this is one of the tokens the encode genrated:</p>\n<pre><code>Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJyb25ueSIsImFkbWluIjpmYWxzZSwiaXNzIjoicHJpdmF0ZSBjb21wYW55IiwiaWF0IjoxNjExMDA1NTc4LCJleHAiOjE2MTEwMDY3Nzh9.dQwEVfSNa6EIx-U-bgHN50hmrN0wYkj-8jXRoFLTx6JB53ERBWuGUeiXLqtiJ_jTGxEISB-Lv7E9KAyPk8nV3g\n</code></pre>\n"},{"tags":["java","spring","registration","consul"],"owner":{"account_id":11442532,"reputation":1,"user_id":8529895,"display_name":"Rosogi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690302131,"creation_date":1690301681,"question_id":76764639,"body_markdown":"**The main problem is** how to register a service with a name not from application.properties (application.yml)\r\nI have an application that runs multiple times *(about 10-20 instances)* and takes configuration values from the database to run. If you take the service-name value from application.properties, then you will have to write your own configuration file for each individual instance. The database has a table that is read and stored in a specific class at startup (I can identify my service based on their environment variables (IP, MAC, etc). \r\n*Can I take service name value from database and set it to service-name in Consul?*\r\n\r\n**The class that registers the service**\r\n```\r\n@Configuration\r\n@ConditionalOnConsulEnabled\r\n@ConditionalOnMissingBean(type= &quot;org.springframework.cloud.consul.discovery.ConsulLifecycle&quot;)\r\n@AutoConfigureAfter(ConsulAutoServiceRegistrationAutoConfiguration.class)\r\npublic class ConsulLifecycle implements ApplicationContextAware {\r\n\r\n    private ConsulAutoServiceRegistration registration;\r\n\r\n    public ConsulLifecycle(ConsulAutoServiceRegistration registration) {\r\n        this.registration = registration;\r\n    }\r\n\r\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\r\n        if (registration != null ) {\r\n            registration.start();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**A class that stores values from the database**\r\n```\r\n@Component\r\npublic class DatabaseValues {\r\n\r\n   private String serviceName;\r\n\r\n   //Getters, setters and inner logic\r\n}\r\n```\r\n\r\n\r\nI can&#39;t figure out how to specifically create an object of type *ConsulAutoServiceRegistration* in order to register with the service name I need that i get from database before ConsulLifecycle is created in JVM.\r\nIf there is any other way to do the same functionality without this class, I will gladly try it!","title":"How to register Consul service with service-name from database?","body":"<p><strong>The main problem is</strong> how to register a service with a name not from application.properties (application.yml)\nI have an application that runs multiple times <em>(about 10-20 instances)</em> and takes configuration values from the database to run. If you take the service-name value from application.properties, then you will have to write your own configuration file for each individual instance. The database has a table that is read and stored in a specific class at startup (I can identify my service based on their environment variables (IP, MAC, etc).\n<em>Can I take service name value from database and set it to service-name in Consul?</em></p>\n<p><strong>The class that registers the service</strong></p>\n<pre><code>@Configuration\n@ConditionalOnConsulEnabled\n@ConditionalOnMissingBean(type= &quot;org.springframework.cloud.consul.discovery.ConsulLifecycle&quot;)\n@AutoConfigureAfter(ConsulAutoServiceRegistrationAutoConfiguration.class)\npublic class ConsulLifecycle implements ApplicationContextAware {\n\n    private ConsulAutoServiceRegistration registration;\n\n    public ConsulLifecycle(ConsulAutoServiceRegistration registration) {\n        this.registration = registration;\n    }\n\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\n        if (registration != null ) {\n            registration.start();\n        }\n    }\n}\n</code></pre>\n<p><strong>A class that stores values from the database</strong></p>\n<pre><code>@Component\npublic class DatabaseValues {\n\n   private String serviceName;\n\n   //Getters, setters and inner logic\n}\n</code></pre>\n<p>I can't figure out how to specifically create an object of type <em>ConsulAutoServiceRegistration</em> in order to register with the service name I need that i get from database before ConsulLifecycle is created in JVM.\nIf there is any other way to do the same functionality without this class, I will gladly try it!</p>\n"},{"tags":["java","android","rotation"],"comments":[{"owner":{"account_id":7680112,"reputation":762,"user_id":5819589,"display_name":"Malith Lakshan"},"score":0,"creation_date":1464095721,"post_id":37414662,"comment_id":62335658,"body_markdown":"android:screenOrientation=&quot;locked&quot; add this to manifest","body":"android:screenOrientation=&quot;locked&quot; add this to manifest"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464098622,"post_id":37414662,"comment_id":62337855,"body_markdown":"@MalithLakshan no... i have tryed it, but without seccess... Actually i have added entire manifest file","body":"@MalithLakshan no... i have tryed it, but without seccess... Actually i have added entire manifest file"},{"owner":{"account_id":5759553,"reputation":4140,"user_id":4546390,"accept_rate":67,"display_name":"Tilak Madichetti"},"score":0,"creation_date":1464098820,"post_id":37414662,"comment_id":62337998,"body_markdown":"http://stackoverflow.com/questions/18425862/screen-orientation-forced-to-portrait-but-still-the-activities-will-rotate-to/18425897#18425897","body":"<a href=\"http://stackoverflow.com/questions/18425862/screen-orientation-forced-to-portrait-but-still-the-activities-will-rotate-to/18425897#18425897\" title=\"screen orientation forced to portrait but still the activities will rotate to\">stackoverflow.com/questions/18425862/&hellip;</a>"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464100603,"post_id":37414662,"comment_id":62339287,"body_markdown":"Can you check your theme style to see if there is anything in there for screen orientation ?","body":"Can you check your theme style to see if there is anything in there for screen orientation ?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464162498,"post_id":37414662,"comment_id":62365566,"body_markdown":"@TilakMadichetti No... i need keep portrait mode for all app. And i have tryed android:screenOrientation=&quot;portrait&quot; but according to my question it doesn&#39;t work","body":"@TilakMadichetti No... i need keep portrait mode for all app. And i have tryed android:screenOrientation=&quot;portrait&quot; but according to my question it doesn&#39;t work"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464162597,"post_id":37414662,"comment_id":62365628,"body_markdown":"@ThomasV i checked my theme and here nothing special &lt;style name=&quot;MaterialTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/ntz_color_yellow&lt;/item&gt;\n    &lt;/style&gt;","body":"@ThomasV i checked my theme and here nothing special &lt;style name=&quot;MaterialTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;         &lt;item name=&quot;colorAccent&quot;&gt;@color/ntz_color_yellow&lt;/item&gt;     &lt;/style&gt;"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464165229,"post_id":37414662,"comment_id":62367174,"body_markdown":"Wild guess, but at this point I think we can try anything. ```&lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; /&gt;``` try removing the extra point : ```com.google.android.RECEIVE```","body":"Wild guess, but at this point I think we can try anything. <code>&lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; &#47;&gt;</code> try removing the extra point : <code>com.google.android.RECEIVE</code>"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464165303,"post_id":37414662,"comment_id":62367219,"body_markdown":"Also, I had some weird behaviors when I had comments in my xml files, you could try removing them.","body":"Also, I had some weird behaviors when I had comments in my xml files, you could try removing them."},{"owner":{"account_id":8039996,"reputation":5591,"user_id":6061978,"display_name":"Chris"},"score":0,"creation_date":1464165415,"post_id":37414662,"comment_id":62367302,"body_markdown":"Could you post your Java code for the splash screen?","body":"Could you post your Java code for the splash screen?"}],"answers":[{"tags":[],"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464100715,"creation_date":1464095931,"answer_id":37414849,"question_id":37414662,"body_markdown":"Can you add `android:configChanges=&quot;orientation|keyboardHidden&quot;` ?\r\n\r\n    &lt;activity\r\n        android:name=&quot;.activities.Splash&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:screenOrientation=&quot;portrait&quot;\r\n        android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>Can you add <code>android:configChanges=\"orientation|keyboardHidden\"</code> ?</p>\n\n<pre><code>&lt;activity\n    android:name=\".activities.Splash\"\n    android:label=\"@string/app_name\"\n    android:screenOrientation=\"portrait\"\n    android:configChanges=\"orientation|keyboardHidden\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1703486,"reputation":3349,"user_id":1563038,"display_name":"Naveen Tamrakar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464096147,"creation_date":1464096147,"answer_id":37414943,"question_id":37414662,"body_markdown":"Locks the orientation to its current rotation, whatever that is. Added in API level 18.\r\n\r\n    android:screenOrientation=&quot;locked&quot;\r\n\r\n[android:screenOrientation=&quot;locked&quot;][1]\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/manifest/activity-element.html","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>Locks the orientation to its current rotation, whatever that is. Added in API level 18.</p>\n\n<pre><code>android:screenOrientation=\"locked\"\n</code></pre>\n\n<p><a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html\" rel=\"nofollow\">android:screenOrientation=\"locked\"</a></p>\n"},{"tags":[],"owner":{"account_id":8230775,"reputation":45,"user_id":6191449,"accept_rate":43,"display_name":"Abhijeet Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464098063,"creation_date":1464098063,"answer_id":37415730,"question_id":37414662,"body_markdown":"In your manifest file after your main activity Paste below line.\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\nOr in your coding after setContentView() Paste below line.\r\n\r\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>In your manifest file after your main activity Paste below line.</p>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<p>Or in your coding after setContentView() Paste below line.</p>\n\n<pre><code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470636824,"creation_date":1470636824,"answer_id":38822331,"question_id":37414662,"body_markdown":"\r\n\r\n&gt;In your manifest file after your main activity Paste below line.\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\n\r\n&gt; java through setContentView() Paste below line.\r\n\r\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n\r\n[see documentation.][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int)","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<blockquote>\n  <p>In your manifest file after your main activity Paste below line.</p>\n</blockquote>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<blockquote>\n  <p>java through setContentView() Paste below line.</p>\n</blockquote>\n\n<pre><code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n\n<p><a href=\"https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int)\" rel=\"nofollow\">see documentation.</a></p>\n"},{"tags":[],"owner":{"account_id":29089278,"reputation":1,"user_id":22283546,"display_name":"Rifaat Hassan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690301703,"creation_date":1690301703,"answer_id":76764644,"question_id":37414662,"body_markdown":"android:exported=&quot;true&quot;\r\nandroid:screenOrientation=&quot;locked&quot;\r\n\r\nthis is work for me","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>android:exported=&quot;true&quot;\nandroid:screenOrientation=&quot;locked&quot;</p>\n<p>this is work for me</p>\n"}],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2654,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1690301703,"creation_date":1464095462,"question_id":37414662,"body_markdown":"I need to keep the screen in portrait mode. For this I use this line in the manifest file\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\n\r\nHere my file\r\n\r\n    &lt;activity\r\n            android:name=&quot;.activities.Splash&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:screenOrientation=&quot;portrait&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\nI use a Samsung S5, and it still can rotate in landscape...\r\n\r\nAccorging documentation with Android 5.0 we get wide setting options\r\n\r\n    android:screenOrientation=[&quot;unspecified&quot; | &quot;behind&quot; |\r\n    &quot;landscape&quot; | &quot;portrait&quot; |\r\n    &quot;reverseLandscape&quot; | &quot;reversePortrait&quot; |\r\n    &quot;sensorLandscape&quot; | &quot;sensorPortrait&quot; |\r\n    &quot;userLandscape&quot; | &quot;userPortrait&quot; |\r\n    &quot;sensor&quot; | &quot;fullSensor&quot; | &quot;nosensor&quot; |\r\n    &quot;user&quot; | &quot;fullUser&quot; | &quot;locked&quot;]\r\n\r\nI have tried some of them but it still rotate...\r\n\r\nWhat am I doing wrong?\r\n\r\nEntire manifest file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.android.camera2basic&quot;\r\n    android:versionCode=&quot;1&quot;\r\n    android:versionName=&quot;1.0&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;!-- GCM requires a Google account. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot; /&gt;\r\n\r\n    &lt;!-- For Google+ LogIn --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.USE_CREDENTIALS&quot; /&gt;\r\n\r\n    &lt;!--     GCM  ,   . --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n\r\n    &lt;!-- Keeps the processor from sleeping when a message is received. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n\r\n    &lt;!-- This app has permission to register and receive data message. --&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; /&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot; /&gt;\r\n\r\n    &lt;permission\r\n        android:name=&quot;com.example.android.C2D_MESSAGE&quot;\r\n        android:protectionLevel=&quot;signature&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;com.example.android&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;.authorization.MyFacebook&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@drawable/title&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@style/MaterialTheme&quot;&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;com.facebook.sdk.ApplicationId&quot;\r\n            android:value=&quot;@string/app_id&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.activities.Splash&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:screenOrientation=&quot;locked&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.version&quot;\r\n            android:value=&quot;@integer/google_play_services_version&quot; /&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.gcm.GcmBroadcastReceiver&quot;\r\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.REGISTRATION&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;com.example.android&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;service android:name=&quot;.gcm.GcmIntentService&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.activities.AcceptNotAccept&quot;\r\n            android:theme=&quot;@style/AppTheme.CustomStyle&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.activities.PopUpActivity&quot;\r\n            android:theme=&quot;@style/AppTheme.CustomStyle&quot; /&gt;\r\n        &lt;activity android:name=&quot;.tools.TestDeleteIt&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.Welcome2&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.WebActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.AuthorizationActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.WebViewAcceptReject&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.CameraActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.LogIn&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.RegistrationActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.ForgotYourPassword&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.MainActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.VideoActivity&quot;/&gt;\r\n        &lt;activity\r\n            android:name=&quot;com.facebook.FacebookActivity&quot;\r\n            android:configChanges=&quot;keyboard|keyboardHidden|screenLayout|screenSize|orientation&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n    &lt;/manifest&gt;\r\n\r\nJava code for splash\r\n\r\n    public class Splash extends Activity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_splash);\r\n\r\n    //      Hide the status bar.\r\n        View decorView = getWindow().getDecorView();\r\n        int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;\r\n        decorView.setSystemUiVisibility(uiOptions);\r\n\r\n        TextView tvSplash = (TextView) findViewById(R.id.tvSplash);\r\n        tvSplash.setVisibility(View.INVISIBLE);\r\n        UtilClass.setFont(getApplicationContext(), tvSplash);\r\n\r\n        Thread logoTimer = new Thread() {\r\n            public void run() {\r\n                try {\r\n\r\n                    ImageView imageView = (ImageView) findViewById(R.id.ivSplash);\r\n                    Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.scale);\r\n                    imageView.startAnimation(animation);\r\n\r\n                    int logoTimer = 0;\r\n                    while (logoTimer &lt; 2500) {\r\n                        sleep(100);\r\n                        logoTimer = logoTimer + 100;\r\n                    }\r\n\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            TextView textView = (TextView) findViewById(R.id.tvSplash);\r\n                            Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.alpha);\r\n                            textView.startAnimation(animation);\r\n\r\n                        }\r\n                    });\r\n\r\n                    logoTimer = 0;\r\n\r\n                    while (logoTimer &lt; 2500) {\r\n                        sleep(100);\r\n                        logoTimer = logoTimer + 100;\r\n                    }\r\n\r\n                    if (UtilClass.checkLogIn(getApplicationContext())) {\r\n                        startActivity(new Intent(getApplicationContext(), MainActivity.class)\r\n                                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\r\n                                        Intent.FLAG_ACTIVITY_CLEAR_TASK));\r\n                    } else {\r\n                        startActivity(new Intent(getApplicationContext(), AuthorizationActivity.class)\r\n                                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\r\n                                        Intent.FLAG_ACTIVITY_CLEAR_TASK));\r\n                    }\r\n\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n        logoTimer.start();\r\n    }\r\n    }\r\n","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>I need to keep the screen in portrait mode. For this I use this line in the manifest file</p>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<p>Here my file</p>\n\n<pre><code>&lt;activity\n        android:name=\".activities.Splash\"\n        android:label=\"@string/app_name\"\n        android:screenOrientation=\"portrait\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n\n<p>I use a Samsung S5, and it still can rotate in landscape...</p>\n\n<p>Accorging documentation with Android 5.0 we get wide setting options</p>\n\n<pre><code>android:screenOrientation=[\"unspecified\" | \"behind\" |\n\"landscape\" | \"portrait\" |\n\"reverseLandscape\" | \"reversePortrait\" |\n\"sensorLandscape\" | \"sensorPortrait\" |\n\"userLandscape\" | \"userPortrait\" |\n\"sensor\" | \"fullSensor\" | \"nosensor\" |\n\"user\" | \"fullUser\" | \"locked\"]\n</code></pre>\n\n<p>I have tried some of them but it still rotate...</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Entire manifest file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.example.android.camera2basic\"\nandroid:versionCode=\"1\"\nandroid:versionName=\"1.0\"&gt;\n\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n\n&lt;!-- GCM requires a Google account. --&gt;\n&lt;uses-permission android:name=\"android.permission.GET_ACCOUNTS\" /&gt;\n\n&lt;!-- For Google+ LogIn --&gt;\n&lt;uses-permission android:name=\"android.permission.USE_CREDENTIALS\" /&gt;\n\n&lt;!--     GCM  ,   . --&gt;\n&lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;\n\n&lt;!-- Keeps the processor from sleeping when a message is received. --&gt;\n&lt;uses-permission android:name=\"android.permission.WAKE_LOCK\" /&gt;\n\n&lt;!-- This app has permission to register and receive data message. --&gt;\n&lt;uses-permission android:name=\"com.google.android..RECEIVE\" /&gt;\n\n&lt;uses-feature android:name=\"android.hardware.camera\" /&gt;\n&lt;uses-feature android:name=\"android.hardware.camera.autofocus\" /&gt;\n\n&lt;permission\n    android:name=\"com.example.android.C2D_MESSAGE\"\n    android:protectionLevel=\"signature\" /&gt;\n\n&lt;uses-permission android:name=\"com.example.android\" /&gt;\n\n&lt;application\n    android:name=\".authorization.MyFacebook\"\n    android:allowBackup=\"true\"\n    android:icon=\"@drawable/title\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@style/MaterialTheme\"&gt;\n    &lt;meta-data\n        android:name=\"com.facebook.sdk.ApplicationId\"\n        android:value=\"@string/app_id\" /&gt;\n\n    &lt;activity\n        android:name=\".activities.Splash\"\n        android:label=\"@string/app_name\"\n        android:screenOrientation=\"locked\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;meta-data\n        android:name=\"com.google.android.gms.version\"\n        android:value=\"@integer/google_play_services_version\" /&gt;\n\n    &lt;receiver\n        android:name=\".gcm.GcmBroadcastReceiver\"\n        android:permission=\"com.google.android.c2dm.permission.SEND\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.android.c2dm.intent.RECEIVE\" /&gt;\n            &lt;action android:name=\"com.google.android.c2dm.intent.REGISTRATION\" /&gt;\n\n            &lt;category android:name=\"com.example.android\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;service android:name=\".gcm.GcmIntentService\" /&gt;\n\n    &lt;activity\n        android:name=\".activities.AcceptNotAccept\"\n        android:theme=\"@style/AppTheme.CustomStyle\" /&gt;\n    &lt;activity\n        android:name=\".activities.PopUpActivity\"\n        android:theme=\"@style/AppTheme.CustomStyle\" /&gt;\n    &lt;activity android:name=\".tools.TestDeleteIt\" /&gt;\n    &lt;activity android:name=\".activities.Welcome2\" /&gt;\n    &lt;activity android:name=\".activities.WebActivity\" /&gt;\n    &lt;activity android:name=\".authorization.AuthorizationActivity\" /&gt;\n    &lt;activity android:name=\".activities.WebViewAcceptReject\" /&gt;\n    &lt;activity android:name=\".activities.CameraActivity\" /&gt;\n    &lt;activity android:name=\".authorization.LogIn\" /&gt;\n    &lt;activity android:name=\".authorization.RegistrationActivity\" /&gt;\n    &lt;activity android:name=\".activities.ForgotYourPassword\" /&gt;\n    &lt;activity android:name=\".activities.MainActivity\" /&gt;\n    &lt;activity android:name=\".activities.VideoActivity\"/&gt;\n    &lt;activity\n        android:name=\"com.facebook.FacebookActivity\"\n        android:configChanges=\"keyboard|keyboardHidden|screenLayout|screenSize|orientation\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@android:style/Theme.Translucent.NoTitleBar\" /&gt;\n&lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Java code for splash</p>\n\n<pre><code>public class Splash extends Activity {\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_splash);\n\n//      Hide the status bar.\n    View decorView = getWindow().getDecorView();\n    int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;\n    decorView.setSystemUiVisibility(uiOptions);\n\n    TextView tvSplash = (TextView) findViewById(R.id.tvSplash);\n    tvSplash.setVisibility(View.INVISIBLE);\n    UtilClass.setFont(getApplicationContext(), tvSplash);\n\n    Thread logoTimer = new Thread() {\n        public void run() {\n            try {\n\n                ImageView imageView = (ImageView) findViewById(R.id.ivSplash);\n                Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.scale);\n                imageView.startAnimation(animation);\n\n                int logoTimer = 0;\n                while (logoTimer &lt; 2500) {\n                    sleep(100);\n                    logoTimer = logoTimer + 100;\n                }\n\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        TextView textView = (TextView) findViewById(R.id.tvSplash);\n                        Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.alpha);\n                        textView.startAnimation(animation);\n\n                    }\n                });\n\n                logoTimer = 0;\n\n                while (logoTimer &lt; 2500) {\n                    sleep(100);\n                    logoTimer = logoTimer + 100;\n                }\n\n                if (UtilClass.checkLogIn(getApplicationContext())) {\n                    startActivity(new Intent(getApplicationContext(), MainActivity.class)\n                            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\n                                    Intent.FLAG_ACTIVITY_CLEAR_TASK));\n                } else {\n                    startActivity(new Intent(getApplicationContext(), AuthorizationActivity.class)\n                            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\n                                    Intent.FLAG_ACTIVITY_CLEAR_TASK));\n                }\n\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    };\n    logoTimer.start();\n}\n}\n</code></pre>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":20353400,"reputation":124,"user_id":14929537,"display_name":"fabio19933"},"score":0,"creation_date":1690291232,"post_id":76763005,"comment_id":135330509,"body_markdown":"Could you print implementation of addBatch and setStructured inside to SQLServerPreparedStatement class to understand if everything is correct?","body":"Could you print implementation of addBatch and setStructured inside to SQLServerPreparedStatement class to understand if everything is correct?"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":3,"creation_date":1690291466,"post_id":76763005,"comment_id":135330575,"body_markdown":"The methods are final. Don&#39;t know if Mockito can instrument that. https://github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerPreparedStatement.java","body":"The methods are final. Don&#39;t know if Mockito can instrument that. <a href=\"https://github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerPreparedStatement.java\" rel=\"nofollow noreferrer\">github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19179079,"reputation":55,"user_id":14011203,"display_name":"Renaud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690300992,"creation_date":1690300992,"answer_id":76764544,"question_id":76763005,"body_markdown":"Thanks @Gimby for pointing out the issue.  It was in fact related to the method being final.  \r\n\r\nA few references that helped me out:\r\n- https://stackoverflow.com/questions/52418475/java-mock-final-void-method-using-mockito\r\n- https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/","title":"Mockito error &quot;Only void methods can doNothing()&quot; while trying to mock a void method","body":"<p>Thanks @Gimby for pointing out the issue.  It was in fact related to the method being final.</p>\n<p>A few references that helped me out:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/52418475/java-mock-final-void-method-using-mockito\">Java Mock final void method using Mockito</a></li>\n<li><a href=\"https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/\" rel=\"nofollow noreferrer\">https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/</a></li>\n</ul>\n"}],"owner":{"account_id":19179079,"reputation":55,"user_id":14011203,"display_name":"Renaud"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690300992,"creation_date":1690290261,"question_id":76763005,"body_markdown":"Im experimenting with Mockito and am encountering an error while trying to mock a void method: &quot;Only void methods can doNothing()!&quot;.  However the method Im trying to mock is a void method: \r\n`void com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.setStructured(int n, String tvpName, SQLServerDataTable tvpDataTable) throws SQLServerException`\r\n\r\n\r\nHere&#39;s what Im doing\r\n\r\n```\r\npublic class MockitoTest {\r\n\t@Mock private Connection mockConnection;\r\n\t@Mock private SQLServerPreparedStatement mockStatement;\t\r\n\r\n\r\n\t@Test\r\n\tpublic void mockitoTest() throws SQLException\r\n\t{\r\n\t\tMockitoAnnotations.openMocks(this);\r\n\t\tMockito.when(mockConnection.prepareStatement(Mockito.any())).thenReturn(mockStatement);\r\n\t\t\r\n\t\t// Can mock this and it doesnt give me any errors\r\n\t\tMockito.doNothing().when(mockStatement).addBatch(Mockito.isA(String.class));\r\n\r\n\t\t// This throws me the mentioned MockitoException, even through setStructured is void\r\n\t\tMockito.doNothing().when(mockStatement).setStructured(1, Mockito.isA(String.class), Mockito.isA(SQLServerDataTable.class));\r\n\r\n\t\t// ... \r\n\t}\r\n```\r\n\r\nAs per my comment, I can mock SQLServerPreparedStatement&#39;s addBatch method, but not the setStructured method?  Both are void methods.  Why does Mockito think setStructured is not a void method?\r\n\r\nIm using this versions:\r\n```\r\n\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.11.0&lt;/version&gt;\r\n```","title":"Mockito error &quot;Only void methods can doNothing()&quot; while trying to mock a void method","body":"<p>Im experimenting with Mockito and am encountering an error while trying to mock a void method: &quot;Only void methods can doNothing()!&quot;.  However the method Im trying to mock is a void method:\n<code>void com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.setStructured(int n, String tvpName, SQLServerDataTable tvpDataTable) throws SQLServerException</code></p>\n<p>Here's what Im doing</p>\n<pre><code>public class MockitoTest {\n    @Mock private Connection mockConnection;\n    @Mock private SQLServerPreparedStatement mockStatement; \n\n\n    @Test\n    public void mockitoTest() throws SQLException\n    {\n        MockitoAnnotations.openMocks(this);\n        Mockito.when(mockConnection.prepareStatement(Mockito.any())).thenReturn(mockStatement);\n        \n        // Can mock this and it doesnt give me any errors\n        Mockito.doNothing().when(mockStatement).addBatch(Mockito.isA(String.class));\n\n        // This throws me the mentioned MockitoException, even through setStructured is void\n        Mockito.doNothing().when(mockStatement).setStructured(1, Mockito.isA(String.class), Mockito.isA(SQLServerDataTable.class));\n\n        // ... \n    }\n</code></pre>\n<p>As per my comment, I can mock SQLServerPreparedStatement's addBatch method, but not the setStructured method?  Both are void methods.  Why does Mockito think setStructured is not a void method?</p>\n<p>Im using this versions:</p>\n<pre><code>    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;version&gt;4.11.0&lt;/version&gt;\n</code></pre>\n"},{"tags":["java","discord","discord-jda"],"comments":[{"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1690284281,"post_id":76761294,"comment_id":135328863,"body_markdown":"Speaking modes are unrelated to whether the bot is muted. You should consider removing the while(true) loop, since it will just stop your bot from working.","body":"Speaking modes are unrelated to whether the bot is muted. You should consider removing the while(true) loop, since it will just stop your bot from working."},{"owner":{"account_id":29080637,"reputation":1,"user_id":22276759,"display_name":"kabaniery"},"score":0,"creation_date":1690301489,"post_id":76761294,"comment_id":135333012,"body_markdown":"Sorry, I say wrong, bot stay silent, doesn&#39;t muted. But if I remove while(true) loop, bot starts recursive reconnect to the voice channel. Maybe exist some method that should starting calling canProvide() method? Unfortunately I can&#39;t find anything on documentation","body":"Sorry, I say wrong, bot stay silent, doesn&#39;t muted. But if I remove while(true) loop, bot starts recursive reconnect to the voice channel. Maybe exist some method that should starting calling canProvide() method? Unfortunately I can&#39;t find anything on documentation"},{"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1690394171,"post_id":76761294,"comment_id":135348899,"body_markdown":"try updating jda, and in the future you should make sure to properly describe your problem in your original post. The loop only makes your bot stop working entirely.","body":"try updating jda, and in the future you should make sure to properly describe your problem in your original post. The loop only makes your bot stop working entirely."}],"owner":{"account_id":29080637,"reputation":1,"user_id":22276759,"display_name":"kabaniery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690300984,"creation_date":1690277383,"question_id":76761294,"body_markdown":"I developing a Discord bot on Java, using JDA v5.0.0-alpha.1. My current target is forcing bot to use voice mode in channel to broadcast audioStream of one of my audio device. For that I use function that set AudioSendHandler to bot AudioManager and open connection of user&#39;s voice channel:\r\n\r\n```\r\npublic void startStream(SlashCommandEvent event) {\r\n        AudioManager manager = Objects.requireNonNull(event.getGuild()).getAudioManager();\r\n        AudioFormatter stream = new AudioFormatter();\r\n        manager.setSendingHandler(stream);\r\n        manager.setSpeakingMode(SpeakingMode.VOICE);\r\n        if (event.getMember().getVoiceState().inAudioChannel()) {\r\n            manager.openAudioConnection(event.getMember().getVoiceState().getChannel());\r\n        }\r\n        while (true) {\r\n        }\r\n        //manager.closeAudioConnection();\r\n    }\r\n```\r\nBut after writting a command, bot connect to user&#39;s channel and stay silent. How can I force him to use a Speaking Mode?\r\nCode of my AudioSendHandler class:\r\n\r\n```\r\npublic class AudioFormatter implements AudioSendHandler {\r\n    AudioFormat format;\r\n    TargetDataLine targetDataLine;\r\n    byte[] buffer;\r\n    ByteBuffer returnedAudio;\r\n\r\n    public AudioFormatter() {\r\n        this.format = new AudioFormat((float)48000, 16, 2, true, true);\r\n        this.targetDataLine =  AudioDevice.getAudioDevice();\r\n    }\r\n\r\n    @Override\r\n    public boolean canProvide() {\r\n        buffer = new byte[48000 * 2 * 2 / 50];\r\n        int bytesRead = targetDataLine.read(buffer, 0, buffer.length);\r\n        returnedAudio = ByteBuffer.wrap(buffer);\r\n        return true;\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public ByteBuffer provide20MsAudio() {\r\n        return returnedAudio;\r\n    }\r\n    @Override\r\n    public boolean isOpus() {\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\n\r\nOn debugging, I notice, that object of AudioSendHandler class was created but method canProvide() was never invoked.","title":"How to enable Speaking Mode in JDA Bot (Java Discord API)","body":"<p>I developing a Discord bot on Java, using JDA v5.0.0-alpha.1. My current target is forcing bot to use voice mode in channel to broadcast audioStream of one of my audio device. For that I use function that set AudioSendHandler to bot AudioManager and open connection of user's voice channel:</p>\n<pre><code>public void startStream(SlashCommandEvent event) {\n        AudioManager manager = Objects.requireNonNull(event.getGuild()).getAudioManager();\n        AudioFormatter stream = new AudioFormatter();\n        manager.setSendingHandler(stream);\n        manager.setSpeakingMode(SpeakingMode.VOICE);\n        if (event.getMember().getVoiceState().inAudioChannel()) {\n            manager.openAudioConnection(event.getMember().getVoiceState().getChannel());\n        }\n        while (true) {\n        }\n        //manager.closeAudioConnection();\n    }\n</code></pre>\n<p>But after writting a command, bot connect to user's channel and stay silent. How can I force him to use a Speaking Mode?\nCode of my AudioSendHandler class:</p>\n<pre><code>public class AudioFormatter implements AudioSendHandler {\n    AudioFormat format;\n    TargetDataLine targetDataLine;\n    byte[] buffer;\n    ByteBuffer returnedAudio;\n\n    public AudioFormatter() {\n        this.format = new AudioFormat((float)48000, 16, 2, true, true);\n        this.targetDataLine =  AudioDevice.getAudioDevice();\n    }\n\n    @Override\n    public boolean canProvide() {\n        buffer = new byte[48000 * 2 * 2 / 50];\n        int bytesRead = targetDataLine.read(buffer, 0, buffer.length);\n        returnedAudio = ByteBuffer.wrap(buffer);\n        return true;\n    }\n\n    @Nullable\n    @Override\n    public ByteBuffer provide20MsAudio() {\n        return returnedAudio;\n    }\n    @Override\n    public boolean isOpus() {\n        return false;\n    }\n}\n</code></pre>\n<p>On debugging, I notice, that object of AudioSendHandler class was created but method canProvide() was never invoked.</p>\n"},{"tags":["java","primefaces","png","image-cropper"],"answers":[{"tags":[],"owner":{"account_id":420683,"reputation":10207,"user_id":798502,"accept_rate":86,"display_name":"seinecle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690300419,"creation_date":1690298041,"answer_id":76764126,"question_id":76764125,"body_markdown":"The error was investigated [in a Github issue posted on the Primefaces repo][1].\r\n\r\nIt seems that the issue lays in the JDK, not in Primefaces. The error disappears when:\r\n\r\n- the image is converted to jpg\r\n- or a smaller png image is used\r\n\r\nThere is no reason for Primefaces to work on solving this issue and I document it here for future users.\r\n\r\n\r\n  [1]: https://github.com/primefaces/primefaces/issues/10373","title":"ImageCropper: fails with unhelpful error message on very large pictures","body":"<p>The error was investigated <a href=\"https://github.com/primefaces/primefaces/issues/10373\" rel=\"nofollow noreferrer\">in a Github issue posted on the Primefaces repo</a>.</p>\n<p>It seems that the issue lays in the JDK, not in Primefaces. The error disappears when:</p>\n<ul>\n<li>the image is converted to jpg</li>\n<li>or a smaller png image is used</li>\n</ul>\n<p>There is no reason for Primefaces to work on solving this issue and I document it here for future users.</p>\n"}],"owner":{"account_id":420683,"reputation":10207,"user_id":798502,"accept_rate":86,"display_name":"seinecle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690300419,"creation_date":1690298041,"question_id":76764125,"body_markdown":"Using Primefaces&#39;s `ImageCropper` component, cropping a png image of 15,000 x 12,000 pixels fails, the only error trace I get is `error reading png data`. There is no error trace logged on my local IDE.\r\n\r\n- local IDE: NetBeans\r\n- JDK: 17\r\n- server: Payara\r\n\r\n","title":"ImageCropper: fails with unhelpful error message on very large pictures","body":"<p>Using Primefaces's <code>ImageCropper</code> component, cropping a png image of 15,000 x 12,000 pixels fails, the only error trace I get is <code>error reading png data</code>. There is no error trace logged on my local IDE.</p>\n<ul>\n<li>local IDE: NetBeans</li>\n<li>JDK: 17</li>\n<li>server: Payara</li>\n</ul>\n"},{"tags":["java","spring","spring-integration","distributed-lock","spring-integration-jdbc"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690298487,"creation_date":1690298487,"answer_id":76764197,"question_id":76755731,"body_markdown":"When you talk about one process (and even different threads), you still ask same repository instance and second request is aware about the first. When we deal with several repository instances (different processes in your meaning), they are not aware of each other, and we can avoid dead lock only via TTL (expire) property. This is typical approach in distributed systems to let other instances to take the data when locked instance might be already dead or crashed, so it could not unlock.\r\n\r\nThis way we recommend a TTL long enough to let the logic in program to be performed, but so reasonable that other instances wont park for nothing too long.\r\n\r\nIn other words, the `time-to-live` is, essentially, an emergency procedure: the locking process might be still running when we take the lock in other process because of expiration. Therefore it has to be a bit longer than we keep the lock in our program.\r\n\r\nYou can look into a `JdbcLockRegistry.expireUnusedOlderThan()` though, but just imaging what would you do if you wouldn&#39;t use this `JdbcLockRegistry`, but regular `ReentrantLock` since you really talk about a single JVM problem.","title":"time to live of DefaultLockRepository has no effect for 2 threads in the same java process when using JdbcLockRegistry","body":"<p>When you talk about one process (and even different threads), you still ask same repository instance and second request is aware about the first. When we deal with several repository instances (different processes in your meaning), they are not aware of each other, and we can avoid dead lock only via TTL (expire) property. This is typical approach in distributed systems to let other instances to take the data when locked instance might be already dead or crashed, so it could not unlock.</p>\n<p>This way we recommend a TTL long enough to let the logic in program to be performed, but so reasonable that other instances wont park for nothing too long.</p>\n<p>In other words, the <code>time-to-live</code> is, essentially, an emergency procedure: the locking process might be still running when we take the lock in other process because of expiration. Therefore it has to be a bit longer than we keep the lock in our program.</p>\n<p>You can look into a <code>JdbcLockRegistry.expireUnusedOlderThan()</code> though, but just imaging what would you do if you wouldn't use this <code>JdbcLockRegistry</code>, but regular <code>ReentrantLock</code> since you really talk about a single JVM problem.</p>\n"}],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76764197,"answer_count":1,"score":0,"last_activity_date":1690299531,"creation_date":1690210920,"question_id":76755731,"body_markdown":"The following code can reproduce the issue\r\n\r\nhttps://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/\r\n\r\nrun the test cases in the above code to reproduce\r\n\r\nbefore running the test case, start pg db in docker:\r\n\r\n```shell\r\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:9.6.12\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nwhen running 2 workers in 2 separate java processes, TTL works as expected \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2aPaE.png\r\n  [2]: https://i.stack.imgur.com/HTjf7.png\r\n\r\nwhen running both workers in one java process, TTL has no effect \r\n\r\n&gt; \r\n\r\nAside from the above code, the real issue I was facing is like this:\r\n\r\n**request 1 hits server 1**, while handling the request, the **thread** **sometimes** **hangs**(due to a weird issue of a 3rd party jar which we can not replace)\r\n**when** that **hanging** happens, our code **won&#39;t have a chance to release the lock**\r\n\r\nthen **request 2** comes, if it hits **other servers**, then **it&#39;s fine**. but **if it hits server 1**, then **request 2** won&#39;t be able to get the lock since the hanging thread **never released the lock** and **TTL does not help in this case**.\r\n\r\nIn **summary**:\r\nIn **one java process**, **a thread gets the lock** but somehow due to bugs or whatever reason it **did not get a chance to  release** the lock. \r\nThen **subsequent threads in this java process** **won&#39;t be able to obtain the same lock** and can not proceed with unfinished job.\r\n**In this case, are there any recommended ways to allow the subsequent threads to be able to get the lock?**","title":"time to live of DefaultLockRepository has no effect for 2 threads in the same java process when using JdbcLockRegistry","body":"<p>The following code can reproduce the issue</p>\n<p><a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/</a></p>\n<p>run the test cases in the above code to reproduce</p>\n<p>before running the test case, start pg db in docker:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:9.6.12\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2aPaE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2aPaE.png\" alt=\"enter image description here\" /></a></p>\n<p>when running 2 workers in 2 separate java processes, TTL works as expected </p>\n<p><a href=\"https://i.stack.imgur.com/HTjf7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HTjf7.png\" alt=\"enter image description here\" /></a></p>\n<p>when running both workers in one java process, TTL has no effect </p>\n<blockquote>\n</blockquote>\n<p>Aside from the above code, the real issue I was facing is like this:</p>\n<p><strong>request 1 hits server 1</strong>, while handling the request, the <strong>thread</strong> <strong>sometimes</strong> <strong>hangs</strong>(due to a weird issue of a 3rd party jar which we can not replace)\n<strong>when</strong> that <strong>hanging</strong> happens, our code <strong>won't have a chance to release the lock</strong></p>\n<p>then <strong>request 2</strong> comes, if it hits <strong>other servers</strong>, then <strong>it's fine</strong>. but <strong>if it hits server 1</strong>, then <strong>request 2</strong> won't be able to get the lock since the hanging thread <strong>never released the lock</strong> and <strong>TTL does not help in this case</strong>.</p>\n<p>In <strong>summary</strong>:\nIn <strong>one java process</strong>, <strong>a thread gets the lock</strong> but somehow due to bugs or whatever reason it <strong>did not get a chance to  release</strong> the lock.\nThen <strong>subsequent threads in this java process</strong> <strong>won't be able to obtain the same lock</strong> and can not proceed with unfinished job.\n<strong>In this case, are there any recommended ways to allow the subsequent threads to be able to get the lock?</strong></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1690295950,"post_id":76763722,"comment_id":135331747,"body_markdown":"Did you look at the documentation? That should tell you what you need to know.","body":"Did you look at the documentation? That should tell you what you need to know."},{"owner":{"account_id":1317274,"reputation":1240,"user_id":1263867,"accept_rate":100,"display_name":"Koos Gadellaa"},"score":1,"creation_date":1690296485,"post_id":76763722,"comment_id":135331865,"body_markdown":"see https://docs.spring.io/spring-security/site/docs/current/api/deprecated-list.html perhaps?","body":"see <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/deprecated-list.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/api/&hellip;</a> perhaps?"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1690296723,"post_id":76763722,"comment_id":135331911,"body_markdown":"why did you not read the documentation?","body":"why did you not read the documentation?"}],"owner":{"account_id":10046033,"reputation":672,"user_id":7427398,"accept_rate":32,"display_name":"ksernow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690299472,"creation_date":1690295212,"question_id":76763722,"body_markdown":"I am trying to migrate to spring 3. I am finding that many method like csrf, authorizeReuqests, antMatcher has been deprecated. \r\n\r\nWhat is the correct way to replace them?\r\n\r\n```\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp.csrf().disable().authorizeRequests().antMatchers(apiPublicPattern).permitAll().antMatchers(fileExtensions)\r\n\t\t\t\t.permitAll().anyRequest().authenticated().and()\r\n\t\t\t\t.addFilterBefore(compositeAuthenticationFilter(), BasicAuthenticationFilter.class).sessionManagement()\r\n\t\t\t\t.maximumSessions(1).expiredUrl(&quot;/expired&quot;).sessionRegistry(sessionRegistry());\r\n\t\thttp.exceptionHandling().accessDeniedHandler(accessDeniedHandler()).and().logout().logoutUrl(&quot;/logout&quot;)\r\n\t\t\t\t.logoutSuccessUrl(&quot;/&quot;).and().headers().contentSecurityPolicy(contentSecurityPolicy);\r\n\t\thttp.authenticationProvider(jwtBearerTokenAuthenticationProvider());\r\n\t\thttp.authenticationProvider(apiKeyAuthenticationProvider());\r\n\t\treturn http.build();\r\n\r\n\r\n\t}\r\n\r\n```\r\n\r\nIDE shows warnings[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GaX9D.png","title":"Updating to Spring 3.X from 2.X - Correct way to replace deprecated method?","body":"<p>I am trying to migrate to spring 3. I am finding that many method like csrf, authorizeReuqests, antMatcher has been deprecated.</p>\n<p>What is the correct way to replace them?</p>\n<pre><code>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable().authorizeRequests().antMatchers(apiPublicPattern).permitAll().antMatchers(fileExtensions)\n                .permitAll().anyRequest().authenticated().and()\n                .addFilterBefore(compositeAuthenticationFilter(), BasicAuthenticationFilter.class).sessionManagement()\n                .maximumSessions(1).expiredUrl(&quot;/expired&quot;).sessionRegistry(sessionRegistry());\n        http.exceptionHandling().accessDeniedHandler(accessDeniedHandler()).and().logout().logoutUrl(&quot;/logout&quot;)\n                .logoutSuccessUrl(&quot;/&quot;).and().headers().contentSecurityPolicy(contentSecurityPolicy);\n        http.authenticationProvider(jwtBearerTokenAuthenticationProvider());\n        http.authenticationProvider(apiKeyAuthenticationProvider());\n        return http.build();\n\n\n    }\n\n</code></pre>\n<p>IDE shows warnings<a href=\"https://i.stack.imgur.com/GaX9D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GaX9D.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":982079,"reputation":705,"user_id":1001566,"accept_rate":33,"display_name":"Paulo Coutinho"},"score":1,"creation_date":1618015809,"post_id":61455134,"comment_id":118482727,"body_markdown":"I made a new project that can help everyone that is trying do it: https://github.com/paulo-coutinho/rvplayer","body":"I made a new project that can help everyone that is trying do it: <a href=\"https://github.com/paulo-coutinho/rvplayer\" rel=\"nofollow noreferrer\">github.com/paulo-coutinho/rvplayer</a>"}],"answers":[{"tags":[],"owner":{"account_id":3626293,"reputation":3505,"user_id":3023833,"display_name":"Mostafa Anter"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609181722,"creation_date":1593004715,"answer_id":62556034,"question_id":61455134,"body_markdown":"here is a new concept to implement that so check this out Integrate RecyclerView with ExoPlayer  The clean way  and customization, my solution based on that [article][1] \r\n\r\nP.S For cleaner code, we will be using Data binding Library and BindingAdapter so do not forget to enable these in gradle.\r\n\r\nLets create an extension function with @BindingAdapter annotation, that we will use to setup our PlayerView, with the values we have passed in our xml file as the arguments.\r\n\r\n\r\n\r\n   BindingData Adapter will be something like this\r\n\r\n    @BindingAdapter(&quot;video_url&quot;, &quot;on_state_change&quot;)\r\n    fun PlayerView.loadVideo(url: String, callback: PlayerStateChange) {\r\n    if (url == null) return\r\n    val player = ExoPlayerFactory.newSimpleInstance(\r\n        context, DefaultRenderersFactory(context), DefaultTrackSelector(),\r\n        DefaultLoadControl()\r\n    )\r\n\r\n    player.playWhenReady = true\r\n    player.repeatMode = Player.REPEAT_MODE_ALL\r\n    // When changing track, retain the latest frame instead of showing a black screen\r\n    setKeepContentOnPlayerReset(true)\r\n    // We&#39;ll show the controller\r\n    this.useController = true\r\n    // Provide url to load the video from here\r\n    val mediaSource = ExtractorMediaSource.Factory(\r\n        DefaultHttpDataSourceFactory(&quot;Demo&quot;)\r\n    ).createMediaSource(Uri.parse(url))\r\n\r\n    player.prepare(mediaSource)\r\n\r\n    this.player = player\r\n\r\n    this.player!!.addListener(object : Player.EventListener {\r\n\r\n        override fun onPlayerError(error: ExoPlaybackException?) {\r\n            super.onPlayerError(error)\r\n            this@loadVideo.context.toast(&quot;Oops! Error occurred while playing media.&quot;)\r\n        }\r\n\r\n        override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\r\n            super.onPlayerStateChanged(playWhenReady, playbackState)\r\n            \r\n            if (playbackState == Player.STATE_BUFFERING) callback.onVideoBuffering(player) // Buffering.. set progress bar visible here\r\n            if (playbackState == Player.STATE_READY){\r\n                // [PlayerView] has fetched the video duration so this is the block to hide the buffering progress bar\r\n                callback.onVideoDurationRetrieved(this@loadVideo.player.duration, player)\r\n            }\r\n            if (playbackState == Player.STATE_READY &amp;&amp; player.playWhenReady){\r\n                // [PlayerView] has started playing/resumed the video\r\n                callback.onStartedPlaying(player)\r\n            }\r\n        }\r\n    })\r\n    }\r\n\r\n\r\n\r\nyou can access a demo repo from [here][2]\r\n\r\n&lt;iframe src=&quot;https://giphy.com/embed/ibAOpHOHg9w8Wfabuy&quot; width=&quot;222&quot; height=&quot;480&quot; frameBorder=&quot;0&quot; class=&quot;giphy-embed&quot; allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href=&quot;https://giphy.com/gifs/ibAOpHOHg9w8Wfabuy&quot;&gt;via GIPHY&lt;/a&gt;&lt;/p&gt;\r\n\r\n  [1]: https://medium.com/mindorks/working-with-exoplayer-the-clean-way-and-customization-fac81e5d39ba\r\n  [2]: https://github.com/MostafaAnter/VideoPlayerInsideRecyclerView","title":"Exoplayer with Recyclerview","body":"<p>here is a new concept to implement that so check this out Integrate RecyclerView with ExoPlayer  The clean way  and customization, my solution based on that <a href=\"https://medium.com/mindorks/working-with-exoplayer-the-clean-way-and-customization-fac81e5d39ba\" rel=\"noreferrer\">article</a></p>\n<p>P.S For cleaner code, we will be using Data binding Library and BindingAdapter so do not forget to enable these in gradle.</p>\n<p>Lets create an extension function with @BindingAdapter annotation, that we will use to setup our PlayerView, with the values we have passed in our xml file as the arguments.</p>\n<p>BindingData Adapter will be something like this</p>\n<pre><code>@BindingAdapter(&quot;video_url&quot;, &quot;on_state_change&quot;)\nfun PlayerView.loadVideo(url: String, callback: PlayerStateChange) {\nif (url == null) return\nval player = ExoPlayerFactory.newSimpleInstance(\n    context, DefaultRenderersFactory(context), DefaultTrackSelector(),\n    DefaultLoadControl()\n)\n\nplayer.playWhenReady = true\nplayer.repeatMode = Player.REPEAT_MODE_ALL\n// When changing track, retain the latest frame instead of showing a black screen\nsetKeepContentOnPlayerReset(true)\n// We'll show the controller\nthis.useController = true\n// Provide url to load the video from here\nval mediaSource = ExtractorMediaSource.Factory(\n    DefaultHttpDataSourceFactory(&quot;Demo&quot;)\n).createMediaSource(Uri.parse(url))\n\nplayer.prepare(mediaSource)\n\nthis.player = player\n\nthis.player!!.addListener(object : Player.EventListener {\n\n    override fun onPlayerError(error: ExoPlaybackException?) {\n        super.onPlayerError(error)\n        this@loadVideo.context.toast(&quot;Oops! Error occurred while playing media.&quot;)\n    }\n\n    override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\n        super.onPlayerStateChanged(playWhenReady, playbackState)\n        \n        if (playbackState == Player.STATE_BUFFERING) callback.onVideoBuffering(player) // Buffering.. set progress bar visible here\n        if (playbackState == Player.STATE_READY){\n            // [PlayerView] has fetched the video duration so this is the block to hide the buffering progress bar\n            callback.onVideoDurationRetrieved(this@loadVideo.player.duration, player)\n        }\n        if (playbackState == Player.STATE_READY &amp;&amp; player.playWhenReady){\n            // [PlayerView] has started playing/resumed the video\n            callback.onStartedPlaying(player)\n        }\n    }\n})\n}\n</code></pre>\n<p>you can access a demo repo from <a href=\"https://github.com/MostafaAnter/VideoPlayerInsideRecyclerView\" rel=\"noreferrer\">here</a></p>\n<p><a href=\"https://giphy.com/gifs/ibAOpHOHg9w8Wfabuy\" rel=\"noreferrer\">via GIPHY</a></p>\n"},{"tags":[],"owner":{"account_id":20115729,"reputation":111,"user_id":14751240,"display_name":"somia molaei"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1609164045,"creation_date":1609102349,"answer_id":65470344,"question_id":61455134,"body_markdown":"    holder.player_name.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() {\r\n        @Override\r\n        public void onViewAttachedToWindow(View v) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void onViewDetachedFromWindow(View v) {\r\n            holder.player_name.getPlayer().stop();\r\n\r\n        }\r\n    });\r\n\r\n","title":"Exoplayer with Recyclerview","body":"<pre><code>holder.player_name.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() {\n    @Override\n    public void onViewAttachedToWindow(View v) {\n\n    }\n\n    @Override\n    public void onViewDetachedFromWindow(View v) {\n        holder.player_name.getPlayer().stop();\n\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13755617,"reputation":184,"user_id":9926639,"display_name":"Ziyaad Shiraz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631976340,"creation_date":1631976340,"answer_id":69235670,"question_id":61455134,"body_markdown":"You can create a method inside the adapter, and using the adapter object you have access to in the homefragment, you can call the method. E.g have a method to stop playing the media in on destroy in the home fragment. Inside the method (which will be in adapter,) you can access the exoplayer instance and perform actions on it.","title":"Exoplayer with Recyclerview","body":"<p>You can create a method inside the adapter, and using the adapter object you have access to in the homefragment, you can call the method. E.g have a method to stop playing the media in on destroy in the home fragment. Inside the method (which will be in adapter,) you can access the exoplayer instance and perform actions on it.</p>\n"}],"owner":{"account_id":16055334,"reputation":133,"user_id":11587925,"display_name":"Mukesh Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11183,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1690299219,"creation_date":1587977849,"question_id":61455134,"body_markdown":"I have a video feed (similar to TikTok) but when I swipe up the new video plays but the old one keeps playing. I&#39;ve managed to get a page listener but I cannot control the ExoPlayer from the &quot;Home Fragment&quot;.\r\n\r\nAny idea on how to trigger something inside the RecyclerView Adapter from the Home Fragment?\r\n\r\nIf there&#39;s a better solution for doing this, please tell me.\r\n\r\n\r\n\r\n**Home Fragment**\r\n\r\n```\r\npublic class HomeFragment extends Fragment {\r\n\r\n    private View view;\r\n    RecyclerView recyclerView;\r\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\r\n    MainRecylerAdapter adapter;\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.fragment_home, container, false);\r\n\r\n\r\n        recyclerView = view.findViewById(R.id.recyclerview);\r\n\r\n        models.add(new Model(1, &quot;https://www.newslistener.com/Mukesh/1.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(2, &quot;https://www.newslistener.com/Mukesh/2.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(3, &quot;https://www.newslistener.com/Mukesh/3.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(4, &quot;https://www.newslistener.com/Mukesh/4.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(5, &quot;https://www.newslistener.com/Mukesh/5.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(6, &quot;https://www.newslistener.com/Mukesh/6.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(7, &quot;https://www.newslistener.com/Mukesh/7.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(8, &quot;https://www.newslistener.com/Mukesh/8.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(9, &quot;https://www.newslistener.com/Mukesh/9.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(10, &quot;https://www.newslistener.com/Mukesh/10.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(11, &quot;https://www.newslistener.com/Mukesh/11.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(12, &quot;https://www.newslistener.com/Mukesh/12.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(13, &quot;https://www.newslistener.com/Mukesh/13.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(14, &quot;https://www.newslistener.com/Mukesh/14.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(15, &quot;https://www.newslistener.com/Mukesh/15.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(16, &quot;https://www.newslistener.com/Mukesh/16.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(17, &quot;https://www.newslistener.com/Mukesh/17.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(18, &quot;https://www.newslistener.com/Mukesh/18.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(19, &quot;https://www.newslistener.com/Mukesh/19.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(20, &quot;https://www.newslistener.com/Mukesh/20.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(21, &quot;https://www.newslistener.com/Mukesh/21.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(22, &quot;https://www.newslistener.com/Mukesh/22.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(23, &quot;https://www.newslistener.com/Mukesh/23.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(24, &quot;https://www.newslistener.com/Mukesh/24.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(25, &quot;https://www.newslistener.com/Mukesh/25.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(26, &quot;https://www.newslistener.com/Mukesh/26.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(27, &quot;https://www.newslistener.com/Mukesh/27.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(28, &quot;https://www.newslistener.com/Mukesh/28.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(29, &quot;https://www.newslistener.com/Mukesh/29.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(30, &quot;https://www.newslistener.com/Mukesh/30.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(31, &quot;https://www.newslistener.com/Mukesh/31.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(32, &quot;https://www.newslistener.com/Mukesh/32.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(33, &quot;https://www.newslistener.com/Mukesh/33.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(34, &quot;https://www.newslistener.com/Mukesh/34.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(35, &quot;https://www.newslistener.com/Mukesh/35.mp4&quot;, &quot;one&quot;));\r\n\r\n        SnapHelper snapHelper = new PagerSnapHelper();\r\n        snapHelper.attachToRecyclerView(recyclerView);\r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\r\n        recyclerView.setLayoutManager(layoutManager);\r\n        adapter = new MainRecylerAdapter(models, getActivity());\r\n        recyclerView.setAdapter(adapter);\r\n\r\n\r\n        return view;\r\n    }\r\n}\r\n```\r\n\r\n**Adapter**\r\n\r\n```\r\npublic class MainRecylerAdapter extends RecyclerView.Adapter&lt;MainRecylerAdapter.ViewHolder&gt; {\r\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\r\n    Context context;\r\n    private int index = 0;\r\n\r\n    public MainRecylerAdapter(List&lt;Model&gt; models, Context context) {\r\n        this.models = models;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MainRecylerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_recyler_layout, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final MainRecylerAdapter.ViewHolder holder, final int position) {\r\n\r\n        if (holder.isPlaying()) {\r\n            Log.e(&quot;TAG1&quot;, &quot;play&quot;);\r\n            holder.releasePlayer();\r\n            holder.intiPlayer(models.get(position).getUrl());\r\n        } else {\r\n            Log.e(&quot;TAG1&quot;, &quot;empty&quot;);\r\n            holder.intiPlayer(models.get(position).getUrl());\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return models.size();\r\n    }\r\n    \r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        SimpleExoPlayerView exoPlayerView;\r\n        SimpleExoPlayer exoPlayer;\r\n        private long playbackPosition;\r\n        private int currentWindow;\r\n        private boolean playWhenReady;\r\n        ProgressBar progressBar;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            exoPlayerView = itemView.findViewById(R.id.exoplayerview);\r\n            progressBar  = itemView.findViewById(R.id.progress);\r\n\r\n        }\r\n\r\n        private void intiPlayer(String url) {\r\n                try {\r\n                    BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();\r\n                    TrackSelector trackSelector = new DefaultTrackSelector(new AdaptiveTrackSelection.Factory(bandwidthMeter));\r\n                    exoPlayer = ExoPlayerFactory.newSimpleInstance(context, trackSelector);\r\n                    Uri videoURI = Uri.parse(url);\r\n                    DefaultHttpDataSourceFactory dataSourceFactory = new DefaultHttpDataSourceFactory(&quot;exoplayer_video&quot;);\r\n                    ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();\r\n                    MediaSource mediaSource = new ExtractorMediaSource(videoURI, dataSourceFactory, extractorsFactory, null, null);\r\n                    exoPlayerView.setPlayer(exoPlayer);\r\n                    exoPlayer.prepare(mediaSource);\r\n                    exoPlayer.setPlayWhenReady(true);\r\n                } catch (Exception e) {\r\n                    Log.e(&quot;MainAcvtivity&quot;, &quot; exoplayer error &quot; + e.toString());\r\n                }\r\n\r\n\r\n        }\r\n\r\n        private boolean isPlaying() {\r\n            return exoPlayer != null\r\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_ENDED\r\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_IDLE\r\n                    &amp;&amp; exoPlayer.getPlayWhenReady();\r\n        }\r\n\r\n        private void releasePlayer() {\r\n            if (exoPlayer != null) {\r\n                playbackPosition = exoPlayer.getCurrentPosition();\r\n                currentWindow = exoPlayer.getCurrentWindowIndex();\r\n                playWhenReady = exoPlayer.getPlayWhenReady();\r\n                exoPlayer.release();\r\n                exoPlayer = null;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n```\r\n\r\n","title":"Exoplayer with Recyclerview","body":"<p>I have a video feed (similar to TikTok) but when I swipe up the new video plays but the old one keeps playing. I've managed to get a page listener but I cannot control the ExoPlayer from the &quot;Home Fragment&quot;.</p>\n<p>Any idea on how to trigger something inside the RecyclerView Adapter from the Home Fragment?</p>\n<p>If there's a better solution for doing this, please tell me.</p>\n<p><strong>Home Fragment</strong></p>\n<pre><code>public class HomeFragment extends Fragment {\n\n    private View view;\n    RecyclerView recyclerView;\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\n    MainRecylerAdapter adapter;\n\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        view = inflater.inflate(R.layout.fragment_home, container, false);\n\n\n        recyclerView = view.findViewById(R.id.recyclerview);\n\n        models.add(new Model(1, &quot;https://www.newslistener.com/Mukesh/1.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(2, &quot;https://www.newslistener.com/Mukesh/2.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(3, &quot;https://www.newslistener.com/Mukesh/3.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(4, &quot;https://www.newslistener.com/Mukesh/4.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(5, &quot;https://www.newslistener.com/Mukesh/5.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(6, &quot;https://www.newslistener.com/Mukesh/6.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(7, &quot;https://www.newslistener.com/Mukesh/7.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(8, &quot;https://www.newslistener.com/Mukesh/8.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(9, &quot;https://www.newslistener.com/Mukesh/9.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(10, &quot;https://www.newslistener.com/Mukesh/10.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(11, &quot;https://www.newslistener.com/Mukesh/11.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(12, &quot;https://www.newslistener.com/Mukesh/12.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(13, &quot;https://www.newslistener.com/Mukesh/13.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(14, &quot;https://www.newslistener.com/Mukesh/14.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(15, &quot;https://www.newslistener.com/Mukesh/15.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(16, &quot;https://www.newslistener.com/Mukesh/16.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(17, &quot;https://www.newslistener.com/Mukesh/17.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(18, &quot;https://www.newslistener.com/Mukesh/18.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(19, &quot;https://www.newslistener.com/Mukesh/19.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(20, &quot;https://www.newslistener.com/Mukesh/20.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(21, &quot;https://www.newslistener.com/Mukesh/21.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(22, &quot;https://www.newslistener.com/Mukesh/22.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(23, &quot;https://www.newslistener.com/Mukesh/23.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(24, &quot;https://www.newslistener.com/Mukesh/24.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(25, &quot;https://www.newslistener.com/Mukesh/25.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(26, &quot;https://www.newslistener.com/Mukesh/26.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(27, &quot;https://www.newslistener.com/Mukesh/27.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(28, &quot;https://www.newslistener.com/Mukesh/28.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(29, &quot;https://www.newslistener.com/Mukesh/29.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(30, &quot;https://www.newslistener.com/Mukesh/30.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(31, &quot;https://www.newslistener.com/Mukesh/31.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(32, &quot;https://www.newslistener.com/Mukesh/32.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(33, &quot;https://www.newslistener.com/Mukesh/33.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(34, &quot;https://www.newslistener.com/Mukesh/34.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(35, &quot;https://www.newslistener.com/Mukesh/35.mp4&quot;, &quot;one&quot;));\n\n        SnapHelper snapHelper = new PagerSnapHelper();\n        snapHelper.attachToRecyclerView(recyclerView);\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\n        recyclerView.setLayoutManager(layoutManager);\n        adapter = new MainRecylerAdapter(models, getActivity());\n        recyclerView.setAdapter(adapter);\n\n\n        return view;\n    }\n}\n</code></pre>\n<p><strong>Adapter</strong></p>\n<pre><code>public class MainRecylerAdapter extends RecyclerView.Adapter&lt;MainRecylerAdapter.ViewHolder&gt; {\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\n    Context context;\n    private int index = 0;\n\n    public MainRecylerAdapter(List&lt;Model&gt; models, Context context) {\n        this.models = models;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public MainRecylerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_recyler_layout, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull final MainRecylerAdapter.ViewHolder holder, final int position) {\n\n        if (holder.isPlaying()) {\n            Log.e(&quot;TAG1&quot;, &quot;play&quot;);\n            holder.releasePlayer();\n            holder.intiPlayer(models.get(position).getUrl());\n        } else {\n            Log.e(&quot;TAG1&quot;, &quot;empty&quot;);\n            holder.intiPlayer(models.get(position).getUrl());\n        }\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return models.size();\n    }\n    \n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        SimpleExoPlayerView exoPlayerView;\n        SimpleExoPlayer exoPlayer;\n        private long playbackPosition;\n        private int currentWindow;\n        private boolean playWhenReady;\n        ProgressBar progressBar;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            exoPlayerView = itemView.findViewById(R.id.exoplayerview);\n            progressBar  = itemView.findViewById(R.id.progress);\n\n        }\n\n        private void intiPlayer(String url) {\n                try {\n                    BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();\n                    TrackSelector trackSelector = new DefaultTrackSelector(new AdaptiveTrackSelection.Factory(bandwidthMeter));\n                    exoPlayer = ExoPlayerFactory.newSimpleInstance(context, trackSelector);\n                    Uri videoURI = Uri.parse(url);\n                    DefaultHttpDataSourceFactory dataSourceFactory = new DefaultHttpDataSourceFactory(&quot;exoplayer_video&quot;);\n                    ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();\n                    MediaSource mediaSource = new ExtractorMediaSource(videoURI, dataSourceFactory, extractorsFactory, null, null);\n                    exoPlayerView.setPlayer(exoPlayer);\n                    exoPlayer.prepare(mediaSource);\n                    exoPlayer.setPlayWhenReady(true);\n                } catch (Exception e) {\n                    Log.e(&quot;MainAcvtivity&quot;, &quot; exoplayer error &quot; + e.toString());\n                }\n\n\n        }\n\n        private boolean isPlaying() {\n            return exoPlayer != null\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_ENDED\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_IDLE\n                    &amp;&amp; exoPlayer.getPlayWhenReady();\n        }\n\n        private void releasePlayer() {\n            if (exoPlayer != null) {\n                playbackPosition = exoPlayer.getCurrentPosition();\n                currentWindow = exoPlayer.getCurrentWindowIndex();\n                playWhenReady = exoPlayer.getPlayWhenReady();\n                exoPlayer.release();\n                exoPlayer = null;\n            }\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["java","intellij-idea","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1690210646,"post_id":76755440,"comment_id":135318057,"body_markdown":"Can you show the full console log? Show your code and give more details?","body":"Can you show the full console log? Show your code and give more details?"},{"owner":{"account_id":28044768,"reputation":13,"user_id":21421739,"display_name":"NoobGangNB1234"},"score":0,"creation_date":1690212344,"post_id":76755440,"comment_id":135318464,"body_markdown":"Like what? @Elikill58?. the console log was only:\n\n    Process &#39;command &#39;C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\n\n    Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.","body":"Like what? @Elikill58?. the console log was only:      Process &#39;command &#39;C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1      Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1690234553,"post_id":76755440,"comment_id":135322266,"body_markdown":"Check the log file of your client, you should have more detail somewhere","body":"Check the log file of your client, you should have more detail somewhere"}],"owner":{"account_id":28044768,"reputation":13,"user_id":21421739,"display_name":"NoobGangNB1234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690298129,"creation_date":1690208872,"question_id":76755440,"body_markdown":"I Was writing a mod for minecraft 1.12.2, the build was successful(im using intellij idea community edition 2021.3). i used the command that runs minecraft or runClient and IT gave me a ERROR:\r\nExecution failed for task &#39;:runClient&#39;.\r\n&gt; Process &#39;command &#39;C:\\Users\\NB\\.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n ","title":"&#39;:runClient&#39;. &gt; Process &#39;command &#39;C:\\Users\\NB\\.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value","body":"<p>I Was writing a mod for minecraft 1.12.2, the build was successful(im using intellij idea community edition 2021.3). i used the command that runs minecraft or runClient and IT gave me a ERROR:\nExecution failed for task ':runClient'.</p>\n<blockquote>\n<p>Process 'command 'C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe'' finished with non-zero exit value -1</p>\n</blockquote>\n<ul>\n<li>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</li>\n</ul>\n"},{"tags":["java","flutter","selenium","appium","bdd"],"answers":[{"tags":[],"owner":{"account_id":5061796,"reputation":78,"user_id":4954866,"display_name":"aki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641973357,"creation_date":1641973357,"answer_id":70677890,"question_id":70677172,"body_markdown":" 1. You can use gherkin packages available on pub.dev to automate using BDD Cucumber. \r\nThe tests will be written in dart. \r\n\r\n 2. As far as my finding, appium requires `accessibility-id` to interact with elements. In flutter you cannot set `accessibility-id` for widgets. I gave up after a few days of research. The [issue](https://github.com/flutter/flutter/issues/17988) is still open. \r\n\r\nEdit: Found [this](https://github.com/appium/appium/issues/12919) as well that says semanticLabel can be used for resource-id. \r\n\r\n 4. Flutter has its own integration test package that you can use to automate your tests. It&#39;s very easy to implement. \r\nRead more here: https://docs.flutter.dev/cookbook/testing/integration/introduction\r\n\r\n","title":"How to automate flutter mobile app using appium?","body":"<ol>\n<li><p>You can use gherkin packages available on pub.dev to automate using BDD Cucumber.\nThe tests will be written in dart.</p>\n</li>\n<li><p>As far as my finding, appium requires <code>accessibility-id</code> to interact with elements. In flutter you cannot set <code>accessibility-id</code> for widgets. I gave up after a few days of research. The <a href=\"https://github.com/flutter/flutter/issues/17988\" rel=\"nofollow noreferrer\">issue</a> is still open.</p>\n</li>\n</ol>\n<p>Edit: Found <a href=\"https://github.com/appium/appium/issues/12919\" rel=\"nofollow noreferrer\">this</a> as well that says semanticLabel can be used for resource-id.</p>\n<ol start=\"4\">\n<li>Flutter has its own integration test package that you can use to automate your tests. It's very easy to implement.\nRead more here: <a href=\"https://docs.flutter.dev/cookbook/testing/integration/introduction\" rel=\"nofollow noreferrer\">https://docs.flutter.dev/cookbook/testing/integration/introduction</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29088800,"reputation":1,"user_id":22283152,"display_name":"Nirmoh Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690297289,"creation_date":1690297289,"answer_id":76764014,"question_id":70677172,"body_markdown":"1. Is it possible to automate flutter applications with the BDD Cucumber Java framework?\r\n\r\nyes you can create the project Java + maven + cucumber + Junit or TestNg\r\n\r\n2. Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?\r\n\r\nThere are some limitations to find the elements by using the appium inspector.","title":"How to automate flutter mobile app using appium?","body":"<ol>\n<li>Is it possible to automate flutter applications with the BDD Cucumber Java framework?</li>\n</ol>\n<p>yes you can create the project Java + maven + cucumber + Junit or TestNg</p>\n<ol start=\"2\">\n<li>Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?</li>\n</ol>\n<p>There are some limitations to find the elements by using the appium inspector.</p>\n"}],"owner":{"account_id":4778281,"reputation":47,"user_id":3860807,"display_name":"Vaibhav Khachane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2670,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690297289,"creation_date":1641968608,"question_id":70677172,"body_markdown":"Currently, I am working on automating flutter mobile apps. I have successfully designed a BDD cucumber Java framework with a login script that is working well. Then I tried automating other functionalities, but I couldnt get the mobile elements locator values into Appium Inspector. Our Team I need your input on the following points.\r\n\r\n1) Is it possible to automate flutter applications with the BDD Cucumber Java framework?\r\n2) Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?\r\n3) Do we have any other options for automating Flutter apps?","title":"How to automate flutter mobile app using appium?","body":"<p>Currently, I am working on automating flutter mobile apps. I have successfully designed a BDD cucumber Java framework with a login script that is working well. Then I tried automating other functionalities, but I couldnt get the mobile elements locator values into Appium Inspector. Our Team I need your input on the following points.</p>\n<ol>\n<li>Is it possible to automate flutter applications with the BDD Cucumber Java framework?</li>\n<li>Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?</li>\n<li>Do we have any other options for automating Flutter apps?</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","postman"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690297184,"post_id":76763835,"comment_id":135332007,"body_markdown":"The JSON in your question is valid and could be parsed in your backend. So what&#39;s the question?","body":"The JSON in your question is valid and could be parsed in your backend. So what&#39;s the question?"},{"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"score":0,"creation_date":1690299102,"post_id":76763835,"comment_id":135332439,"body_markdown":"[Check this post if it helps to you.](https://stackoverflow.com/questions/31337914/how-to-post-object-and-list-using-postman#:~:text=Postman%3A%20Set%20the%20Body%20type%20to%20raw%20and%20add%20header%20Content%2DType%3A%20application/json)","body":"<a href=\"https://stackoverflow.com/questions/31337914/how-to-post-object-and-list-using-postman#:~:text=Postman%3A%20Set%20the%20Body%20type%20to%20raw%20and%20add%20header%20Content%2DType%3A%20application/json\">Check this post if it helps to you.</a>"}],"answers":[{"tags":[],"owner":{"account_id":4678173,"reputation":2456,"user_id":3787750,"accept_rate":48,"display_name":"Ekansh Rastogi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690297121,"creation_date":1690297121,"answer_id":76763981,"question_id":76763835,"body_markdown":"Just create a POJO mapping class\r\n\r\n```\r\nclass Pojo {\r\n private List&lt;AnotherPojo&gt; productIds;\r\n}\r\n\r\nclass AnotherPojo {\r\n private long productId;\r\n} \r\n\r\nand add in controller as below\r\n\r\n@GetMapping(&quot;uri&quot;)\r\npublic Object get(@RequestBody Pojo pojo){\r\n   // log pojo\r\n}\r\n\r\n { &quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] }\r\n```\r\n\r\nWhen calling from post man, add header Content-type: application-json","title":"how to send a list of id&#39;s in postman","body":"<p>Just create a POJO mapping class</p>\n<pre><code>class Pojo {\n private List&lt;AnotherPojo&gt; productIds;\n}\n\nclass AnotherPojo {\n private long productId;\n} \n\nand add in controller as below\n\n@GetMapping(&quot;uri&quot;)\npublic Object get(@RequestBody Pojo pojo){\n   // log pojo\n}\n\n { &quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] }\n</code></pre>\n<p>When calling from post man, add header Content-type: application-json</p>\n"}],"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690297121,"creation_date":1690296012,"question_id":76763835,"body_markdown":"I have a spring boot project where I need to expose a few APIs.\r\nI have 2 entities and what I would like to do is to be able to send list of id&#39;s of one of the entities in postman.\r\nAny idea how can I do it?\r\nthis is how my json looks as of now: `&quot;productIds&quot;: [{ &quot;productId&quot;:1 },\r\n{&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }]\r\n      `\r\nbasically Product is an entity and I don&#39;t want to send in the request the entire object, only it&#39;s id","title":"how to send a list of id&#39;s in postman","body":"<p>I have a spring boot project where I need to expose a few APIs.\nI have 2 entities and what I would like to do is to be able to send list of id's of one of the entities in postman.\nAny idea how can I do it?\nthis is how my json looks as of now: <code>&quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] </code>\nbasically Product is an entity and I don't want to send in the request the entire object, only it's id</p>\n"},{"tags":["java","java.util.concurrent","spring-scheduled"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690292250,"post_id":76763214,"comment_id":135330787,"body_markdown":"I would suggest to use a proper caching solution (like Caffeine) and let that do the caching and reloading instead of a scheduled method. That should take care of all those things instead of reinventing the wheel.","body":"I would suggest to use a proper caching solution (like Caffeine) and let that do the caching and reloading instead of a scheduled method. That should take care of all those things instead of reinventing the wheel."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690294574,"creation_date":1690294574,"answer_id":76763642,"question_id":76763214,"body_markdown":"Yes, reference assignments are atomic and even guarantee consistent application, i.e. if you have this code:\r\n\r\n```\r\n// thread A:\r\n\r\nsomeField = &quot;Hello&quot;;\r\n// do stuff\r\nsomeField = &quot;World&quot;;\r\n\r\n\r\n// thread B:\r\nprint(someField);\r\n// do stuff\r\nprint(someField);\r\n```\r\n\r\nThen it can print one of 3 things:\r\n\r\n* Hello / Hello\r\n* Hello / World\r\n* World / World\r\n\r\nIt is not possible for this code to asplode because of a half-written pointer, nor for this code to first see World and then later see Hello.\r\n\r\n__HOWEVER__.\r\n\r\nThe problem is, this code is still highly suspect. Because it is quite likely it will print Hello/Hello even if (relative to computer terms, and in theory, even human terms, i.e. minutes or even days) have passed since the code that set it to `&quot;World&quot;` has ran! The JVM gives itself the right (see the Java Memory Model section of the JVM Specification) to create local caches for every field, so, thread B has a &#39;cache&#39; that reads &#39;Hello&#39;, and when thread A updates that field to &#39;World&#39;, that just updates thread A&#39;s local cache of that field. A says that field has value &#39;World&#39;, B says it has value &#39;Hello&#39;, and that state of affairs can last very very long indeed, the JVM makes no guarantees about arbitrary synchronization of such conflicts.\r\n\r\nWhat you need are so-called Happens-Before relationships in order to get around the fact that the JMM has all sorts of &#39;I may.. or may not&#39; text in it (which doesn&#39;t simply mean this code is unreliable - it means it is __untestable__. On a really simple machine that doesn&#39;t have local CPU cache pages, it&#39;ll work just fine. On another it fails all the time - you can&#39;t figure that out when working on the box where it works fine!)\r\n\r\nYou establish this in many ways - there is an explicit list in the JMM section. The obvious ones are the same things that establish atomicity - `synchronized`, `volatile`, and many java core libs (mostly, some of stuff in the `java.util.concurrent` package. Not all the stuff - things like `AtomicInteger` don&#39;t, and that&#39;s why AtomicInteger is generally much faster than trying to handroll such things with `synchronized`, as `synchronized` does a lot more than just provide atomicity - it establishes guarantees).\r\n\r\nThe idea behind HB is simple: Any 2 statements have an HB relationship, or not. If they do, then it is not possible for the line that &#39;happens after&#39; to observe any state as it was before the HB line ran. You shouldn&#39;t think about it in terms of &#39;the HB line runs first&#39; (after all, if the HA line doesn&#39;t read any state that the HB line is changing, the JVM is not obligated to &#39;run the HB line first&#39;).\r\n\r\nYou will need to establish HB here: You want `listFromDynamo = result;` to be HB relative to whatever line has any interest in receiving this update in some sort of timely fashion. Otherwise the JVM is free to take _days_ to propagate this write.\r\n\r\nOne really simple way to do it is to slap a `synchronized` on `getListFromDynamo` and `updateListFromDynamo` (or at least wrap `listFromDynamo = result` in a synchronized block). It&#39;s generally a really bad idea to lock on public stuff, so use lombok&#39;s `@Synchronized` or handwrite it:\r\n\r\n```\r\nprivate final Object dynamoLock = new Object[0];\r\n\r\npublic List&lt;ClassFromDynamo&gt; getListFromDynamo() {\r\n  synchronized (dynamoLock) {\r\n    return listFromDynamo;\r\n  }\r\n}\r\n\r\npublic void updateListFromDynamo(){\r\n  List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\r\n  table.scan().forEach(page -&gt; result.addAll(page.items()));\r\n  synchronized (dynamoLock) {\r\n    listFromDyanmo = result;\r\n  }\r\n}\r\n```\r\n\r\nThis establishes that the `}` of the `synchronized` block in the update method is HB relative to the `synchronized (listFromDynamo) {` in the `get` method, and therefore ensures that the get method cannot observe state as it was _before_ - i.e. cannot observe the &#39;old&#39; reference.\r\n\r\nIf that feels too &#39;inefficient&#39; - perhaps look into that first, synchronized probably isn&#39;t nearly as bad as you think it is, especially in light of the fact that entire table scans are being performed here. That&#39;s like complaining that peeing in the ocean in Amsterdam raises the waterlevel in Manhattan. Yeah probably but not in a way you could even measure. If you have profiler reports that conclusively tell you there is indeed a performance issue there, then and only then start looking into alternatives, which do exist (`AtomicReference` might be very slightly faster, I&#39;d try that first).\r\n","title":"Should I use lock for reference assignment in class","body":"<p>Yes, reference assignments are atomic and even guarantee consistent application, i.e. if you have this code:</p>\n<pre><code>// thread A:\n\nsomeField = &quot;Hello&quot;;\n// do stuff\nsomeField = &quot;World&quot;;\n\n\n// thread B:\nprint(someField);\n// do stuff\nprint(someField);\n</code></pre>\n<p>Then it can print one of 3 things:</p>\n<ul>\n<li>Hello / Hello</li>\n<li>Hello / World</li>\n<li>World / World</li>\n</ul>\n<p>It is not possible for this code to asplode because of a half-written pointer, nor for this code to first see World and then later see Hello.</p>\n<p><strong>HOWEVER</strong>.</p>\n<p>The problem is, this code is still highly suspect. Because it is quite likely it will print Hello/Hello even if (relative to computer terms, and in theory, even human terms, i.e. minutes or even days) have passed since the code that set it to <code>&quot;World&quot;</code> has ran! The JVM gives itself the right (see the Java Memory Model section of the JVM Specification) to create local caches for every field, so, thread B has a 'cache' that reads 'Hello', and when thread A updates that field to 'World', that just updates thread A's local cache of that field. A says that field has value 'World', B says it has value 'Hello', and that state of affairs can last very very long indeed, the JVM makes no guarantees about arbitrary synchronization of such conflicts.</p>\n<p>What you need are so-called Happens-Before relationships in order to get around the fact that the JMM has all sorts of 'I may.. or may not' text in it (which doesn't simply mean this code is unreliable - it means it is <strong>untestable</strong>. On a really simple machine that doesn't have local CPU cache pages, it'll work just fine. On another it fails all the time - you can't figure that out when working on the box where it works fine!)</p>\n<p>You establish this in many ways - there is an explicit list in the JMM section. The obvious ones are the same things that establish atomicity - <code>synchronized</code>, <code>volatile</code>, and many java core libs (mostly, some of stuff in the <code>java.util.concurrent</code> package. Not all the stuff - things like <code>AtomicInteger</code> don't, and that's why AtomicInteger is generally much faster than trying to handroll such things with <code>synchronized</code>, as <code>synchronized</code> does a lot more than just provide atomicity - it establishes guarantees).</p>\n<p>The idea behind HB is simple: Any 2 statements have an HB relationship, or not. If they do, then it is not possible for the line that 'happens after' to observe any state as it was before the HB line ran. You shouldn't think about it in terms of 'the HB line runs first' (after all, if the HA line doesn't read any state that the HB line is changing, the JVM is not obligated to 'run the HB line first').</p>\n<p>You will need to establish HB here: You want <code>listFromDynamo = result;</code> to be HB relative to whatever line has any interest in receiving this update in some sort of timely fashion. Otherwise the JVM is free to take <em>days</em> to propagate this write.</p>\n<p>One really simple way to do it is to slap a <code>synchronized</code> on <code>getListFromDynamo</code> and <code>updateListFromDynamo</code> (or at least wrap <code>listFromDynamo = result</code> in a synchronized block). It's generally a really bad idea to lock on public stuff, so use lombok's <code>@Synchronized</code> or handwrite it:</p>\n<pre><code>private final Object dynamoLock = new Object[0];\n\npublic List&lt;ClassFromDynamo&gt; getListFromDynamo() {\n  synchronized (dynamoLock) {\n    return listFromDynamo;\n  }\n}\n\npublic void updateListFromDynamo(){\n  List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\n  table.scan().forEach(page -&gt; result.addAll(page.items()));\n  synchronized (dynamoLock) {\n    listFromDyanmo = result;\n  }\n}\n</code></pre>\n<p>This establishes that the <code>}</code> of the <code>synchronized</code> block in the update method is HB relative to the <code>synchronized (listFromDynamo) {</code> in the <code>get</code> method, and therefore ensures that the get method cannot observe state as it was <em>before</em> - i.e. cannot observe the 'old' reference.</p>\n<p>If that feels too 'inefficient' - perhaps look into that first, synchronized probably isn't nearly as bad as you think it is, especially in light of the fact that entire table scans are being performed here. That's like complaining that peeing in the ocean in Amsterdam raises the waterlevel in Manhattan. Yeah probably but not in a way you could even measure. If you have profiler reports that conclusively tell you there is indeed a performance issue there, then and only then start looking into alternatives, which do exist (<code>AtomicReference</code> might be very slightly faster, I'd try that first).</p>\n"}],"owner":{"account_id":17138604,"reputation":51,"user_id":12403120,"display_name":"eweiss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690296993,"creation_date":1690291671,"question_id":76763214,"body_markdown":"I have a Spring component class with field of type list with fill from AWS DynamoDB. The use of this component class is in a controller for reading the list. I also have a schedule service that run in a cron and every 10 minute call the update list method.\r\n\r\nThe situation is that I will have multiple read threads and only one write thread, but I am not sure if I should use the Java concurrency lock. Also is the reference assignment atomic?\r\n\r\n```\r\n@Component\r\npublic class ExampleA  {\r\n    DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\r\n            .dynamoDbClient(\r\n                    // Configure an instance of the standard client.\r\n                    DynamoDbClient.builder()\r\n                            .region(Region.X)\r\n                            .build())\r\n            .build();\r\n\r\n    DynamoDbTable&lt;ClassFromDyanmo&gt; table = enhancedClient.table(&quot;dynamo_table&quot;, TableSchema.fromBean(ClassFromDyanmo.class));\r\n    private List&lt;ClassFromDyanmo&gt; listFromDynamo;\r\n    \r\n    public List&lt;ClassFromDyanmo&gt; getListFromDynamo() {\r\n    return listFromDyanmo\r\n}\r\n\r\npublic void updateListFromDynamo(){\r\n    List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\r\n    table.scan().forEach(page -&gt; result.addAll(page.items()));\r\n    listFromDyanmo = result;\r\n}\r\n```\r\n\r\nthe SchduleService:\r\n\r\n```\r\n@Service\r\npublic class UpdateRulesScheduler {\r\n\r\n    @Autowired\r\n    private ExampleA exampleA;\r\n\r\n    @Scheduled(cron = &quot;0 */10 * ? * *&quot;)\r\n    public void scheduleEvery10Minutes() {\r\n        exampleA.updateListFromDynamo();\r\n    }\r\n```\r\n","title":"Should I use lock for reference assignment in class","body":"<p>I have a Spring component class with field of type list with fill from AWS DynamoDB. The use of this component class is in a controller for reading the list. I also have a schedule service that run in a cron and every 10 minute call the update list method.</p>\n<p>The situation is that I will have multiple read threads and only one write thread, but I am not sure if I should use the Java concurrency lock. Also is the reference assignment atomic?</p>\n<pre><code>@Component\npublic class ExampleA  {\n    DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\n            .dynamoDbClient(\n                    // Configure an instance of the standard client.\n                    DynamoDbClient.builder()\n                            .region(Region.X)\n                            .build())\n            .build();\n\n    DynamoDbTable&lt;ClassFromDyanmo&gt; table = enhancedClient.table(&quot;dynamo_table&quot;, TableSchema.fromBean(ClassFromDyanmo.class));\n    private List&lt;ClassFromDyanmo&gt; listFromDynamo;\n    \n    public List&lt;ClassFromDyanmo&gt; getListFromDynamo() {\n    return listFromDyanmo\n}\n\npublic void updateListFromDynamo(){\n    List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\n    table.scan().forEach(page -&gt; result.addAll(page.items()));\n    listFromDyanmo = result;\n}\n</code></pre>\n<p>the SchduleService:</p>\n<pre><code>@Service\npublic class UpdateRulesScheduler {\n\n    @Autowired\n    private ExampleA exampleA;\n\n    @Scheduled(cron = &quot;0 */10 * ? * *&quot;)\n    public void scheduleEvery10Minutes() {\n        exampleA.updateListFromDynamo();\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1690271011,"post_id":76760418,"comment_id":135326061,"body_markdown":"While there are *some* databases that allow you to execute Java functions (like H2), most won&#39;t. So you either have to rewrite the Java logic as SQL, or update the rows one by one.","body":"While there are <i>some</i> databases that allow you to execute Java functions (like H2), most won&#39;t. So you either have to rewrite the Java logic as SQL, or update the rows one by one."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272282,"post_id":76760418,"comment_id":135326334,"body_markdown":"Oracle allows Java code store procedures too.","body":"Oracle allows Java code store procedures too."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272408,"post_id":76760418,"comment_id":135326359,"body_markdown":"As well Microsoft SQL Server.","body":"As well Microsoft SQL Server."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272676,"post_id":76760418,"comment_id":135326418,"body_markdown":"PostgreSQL using PL/Java extension.","body":"PostgreSQL using PL/Java extension."},{"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"score":0,"creation_date":1690272721,"post_id":76760418,"comment_id":135326427,"body_markdown":"Thanks for the information on this. Is there any way to do this row by row without knowing the underlying data structure? (Like extracting the row to a Map or something similar)","body":"Thanks for the information on this. Is there any way to do this row by row without knowing the underlying data structure? (Like extracting the row to a Map or something similar)"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1690333225,"post_id":76760418,"comment_id":135337753,"body_markdown":"I think it would be best to use a DB trigger.","body":"I think it would be best to use a DB trigger."}],"answers":[{"tags":[],"owner":{"account_id":18178272,"reputation":55,"user_id":13226583,"display_name":"Rishabh Kabra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690296858,"creation_date":1690293027,"answer_id":76763419,"question_id":76760418,"body_markdown":"This is not possible via @Query but can be  done via EntityManager.\r\n\r\n    class Test {\r\n    \t@PersistenceContext\r\n    \tprivate EntityManager em;\r\n    \r\n    \tpublic &lt;T&gt; void update(String UpdatedName, T name) {\r\n    \t\tvar data =  myJavaMethod(name);\r\n    \t\tem.createNativeQuery(&quot;UPDATE table SET&quot; + UpdatedName + &quot;= &#39;&quot; + data.toString() + &quot;&#39;&quot;);\r\n    \t}\r\n    }\r\n\r\nI haven&#39;t tried this code but probably this would work if I have understood your requirement correctly.\r\n","title":"How to update a column based on another column&#39;s value with a native query?","body":"<p>This is not possible via @Query but can be  done via EntityManager.</p>\n<pre><code>class Test {\n    @PersistenceContext\n    private EntityManager em;\n\n    public &lt;T&gt; void update(String UpdatedName, T name) {\n        var data =  myJavaMethod(name);\n        em.createNativeQuery(&quot;UPDATE table SET&quot; + UpdatedName + &quot;= '&quot; + data.toString() + &quot;'&quot;);\n    }\n}\n</code></pre>\n<p>I haven't tried this code but probably this would work if I have understood your requirement correctly.</p>\n"}],"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690296858,"creation_date":1690270667,"question_id":76760418,"body_markdown":"Let&#39;s say I have the following table:\r\n\r\n| name | UpdatedName |\r\n| -------- | -------------- |\r\n| toto    |            |\r\n| foo   |            |\r\n\r\nI want to run a native query that will, for each name, compute an `UpdateName` thanks to a Java method. \r\n\r\nThe reason why I want this to be a native query is because I want to make my code generic, able to perform this transformation on _any_ table with _any_ input and output columns. Thus, this bit of code has no idea of the entities that it is modifying. Of course, if a way to keep this generic and use something else than native queries exist, I&#39;m interested too :) \r\n\r\nHow can I have a query which will, in essence, do this:\r\n```sql\r\nUPDATE table SET UpdatedName = myJavaMethod(name)\r\n``` \r\nI know I can use native queries to do something similar to\r\n```java\r\nUPDATE table SET UpdatedName = :myNewValue\r\n```\r\n\r\nbut how could I retrieve the `name` value from that row, so that I can pass `myJavaMethod(name)` as the arg?","title":"How to update a column based on another column&#39;s value with a native query?","body":"<p>Let's say I have the following table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>UpdatedName</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>toto</td>\n<td></td>\n</tr>\n<tr>\n<td>foo</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I want to run a native query that will, for each name, compute an <code>UpdateName</code> thanks to a Java method.</p>\n<p>The reason why I want this to be a native query is because I want to make my code generic, able to perform this transformation on <em>any</em> table with <em>any</em> input and output columns. Thus, this bit of code has no idea of the entities that it is modifying. Of course, if a way to keep this generic and use something else than native queries exist, I'm interested too :)</p>\n<p>How can I have a query which will, in essence, do this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE table SET UpdatedName = myJavaMethod(name)\n</code></pre>\n<p>I know I can use native queries to do something similar to</p>\n<pre class=\"lang-java prettyprint-override\"><code>UPDATE table SET UpdatedName = :myNewValue\n</code></pre>\n<p>but how could I retrieve the <code>name</code> value from that row, so that I can pass <code>myJavaMethod(name)</code> as the arg?</p>\n"},{"tags":["java","selenium-webdriver","scrollbar"],"answers":[{"tags":[],"owner":{"account_id":27127834,"reputation":55,"user_id":20670520,"display_name":"Adem akdag"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690296691,"creation_date":1689965207,"answer_id":76740504,"question_id":76733738,"body_markdown":"Okay, this worked for me:\r\n```\r\nJavascriptExecutor js = (JavascriptExecutor) driver; \r\njs.executeScript(&quot;document.getElementById(&#39;elementsId&#39;).scrollBy(0,100)&quot;);\r\n```","title":"How to scroll inner scroll bar in selenium webdriver java","body":"<p>Okay, this worked for me:</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver; \njs.executeScript(&quot;document.getElementById('elementsId').scrollBy(0,100)&quot;);\n</code></pre>\n"}],"owner":{"account_id":27127834,"reputation":55,"user_id":20670520,"display_name":"Adem akdag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690296691,"creation_date":1689887438,"question_id":76733738,"body_markdown":"I have been trying to scroll inner scroll bar on a page (There is no Iframe) but every time driver was focusing on outer scroll bar. How can I control the inner scroll bar? Can anyone help please?","title":"How to scroll inner scroll bar in selenium webdriver java","body":"<p>I have been trying to scroll inner scroll bar on a page (There is no Iframe) but every time driver was focusing on outer scroll bar. How can I control the inner scroll bar? Can anyone help please?</p>\n"},{"tags":["java","ubuntu","memory-management","etl","talend"],"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690296336,"creation_date":1690296336,"question_id":76763868,"body_markdown":"I am using Talend open studio(TOS_BD-20211109_1610-V8.0.1) in Ubuntu(22.04.2 LTS). However, I am encountering a persistent issue where the application crashes automatically after some time. I have attempted to resolve the problem by modifying the .ini file configurations and upgrading my Java version from 11 to 17. Despite these efforts, the issue persists, and I am still facing the same problem with Talend Open Studio crashing unexpectedly.\r\n\r\nThese are the configurations in my TOS_BD-linux-gtk-x86_64.ini file.\r\n~~~\r\n-vmargs\r\n-Xms1024m\r\n-Xmx4096m\r\n-Dfile.encoding=UTF-8\r\n-Dosgi.requiredJavaVersion=11\r\n-XX:+UseG1GC\r\n-XX:+UseStringDeduplication\r\n-XX:MaxMetaspaceSize=1024m\r\n--add-opens\r\njava.base/java.lang=ALL-UNNAMED\r\n--add-opens\r\njava.base/java.util=ALL-UNNAMED\r\n--add-modules=ALL-SYSTEM\r\n~~~\r\n\r\nAlso attaching a screen shot of the error which pops up after crash.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OAplk.png","title":"My Talend Open Studio keeps on crashing after sometime","body":"<p>I am using Talend open studio(TOS_BD-20211109_1610-V8.0.1) in Ubuntu(22.04.2 LTS). However, I am encountering a persistent issue where the application crashes automatically after some time. I have attempted to resolve the problem by modifying the .ini file configurations and upgrading my Java version from 11 to 17. Despite these efforts, the issue persists, and I am still facing the same problem with Talend Open Studio crashing unexpectedly.</p>\n<p>These are the configurations in my TOS_BD-linux-gtk-x86_64.ini file.</p>\n<pre><code>-vmargs\n-Xms1024m\n-Xmx4096m\n-Dfile.encoding=UTF-8\n-Dosgi.requiredJavaVersion=11\n-XX:+UseG1GC\n-XX:+UseStringDeduplication\n-XX:MaxMetaspaceSize=1024m\n--add-opens\njava.base/java.lang=ALL-UNNAMED\n--add-opens\njava.base/java.util=ALL-UNNAMED\n--add-modules=ALL-SYSTEM\n</code></pre>\n<p>Also attaching a screen shot of the error which pops up after crash.\n<a href=\"https://i.stack.imgur.com/OAplk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OAplk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","java-stream","polymorphism"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1690133810,"post_id":76749538,"comment_id":135307649,"body_markdown":"Use `Optional` for starters.","body":"Use <code>Optional</code> for starters."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1690134621,"post_id":76749538,"comment_id":135307751,"body_markdown":"Minor remark: instead of `orElse(new NotFoundResult());` (which will always create a new `NotFoundResult`, no matter whether `res` is empty or not, we should use `orElseGet(NotFoundResult::new);`, which will only create a `NotFoundResult` if `res` is empty.","body":"Minor remark: instead of <code>orElse(new NotFoundResult());</code> (which will always create a new <code>NotFoundResult</code>, no matter whether <code>res</code> is empty or not, we should use <code>orElseGet(NotFoundResult::new);</code>, which will only create a <code>NotFoundResult</code> if <code>res</code> is empty."},{"owner":{"account_id":25240917,"reputation":5,"user_id":19074806,"display_name":"Gyo"},"score":0,"creation_date":1690240174,"post_id":76749538,"comment_id":135322918,"body_markdown":"@Turing85 Thanks for the nice comment. Thanks to your comment, I realized the difference between the orElse and orElseGet methods.","body":"@Turing85 Thanks for the nice comment. Thanks to your comment, I realized the difference between the orElse and orElseGet methods."},{"owner":{"account_id":25240917,"reputation":5,"user_id":19074806,"display_name":"Gyo"},"score":0,"creation_date":1690245648,"post_id":76749538,"comment_id":135323410,"body_markdown":"@OleksandrPyrohov I thought the cast was ugly too, thanks for the nice comment. I&#39;m just practicing to use the StramAPI in a variety of ways, and this is very helpful.","body":"@OleksandrPyrohov I thought the cast was ugly too, thanks for the nice comment. I&#39;m just practicing to use the StramAPI in a variety of ways, and this is very helpful."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690134961,"creation_date":1690134609,"answer_id":76749604,"question_id":76749538,"body_markdown":"&gt;My first attempt looks like this But this has a syntax error A compilation error occurred because Optional&lt;OkResult&gt; is required in orElse(new NotFoundResult()).\r\n\r\nHow about using the `map` method of `Optional`? \r\n```\r\npublic ResultBase handle(Request request) {\r\n         return this.movieArrayList.stream()\r\n             .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\r\n             .findFirst().map(movie -&gt; (ResultBase) new OkResult(movie))\r\n             .orElseGet(NotFoundResult::new);\r\n}\r\n","title":"How to use Java StreamAPI in this situtation (using polymorphism)","body":"<blockquote>\n<p>My first attempt looks like this But this has a syntax error A compilation error occurred because Optional is required in orElse(new NotFoundResult()).</p>\n</blockquote>\n<p>How about using the <code>map</code> method of <code>Optional</code>?</p>\n<pre><code>public ResultBase handle(Request request) {\n         return this.movieArrayList.stream()\n             .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\n             .findFirst().map(movie -&gt; (ResultBase) new OkResult(movie))\n             .orElseGet(NotFoundResult::new);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690135473,"creation_date":1690135109,"answer_id":76749638,"question_id":76749538,"body_markdown":"In addition to [WJS][wjsProfile]&#39; [answer][wjsAnswer], which moves the `map`ping after the `findFirst()`, effectively reducing the amount of calculation that must be done (since we map only once), we can eliminate the in-line cast by adding a separate `map` step to cast. We can also use a method reference to call the `OkResult`-constructor. All taken together would look like this:\r\n\r\n    public ResultBase handle(Request request) {\r\n        return this.movieArrayList.stream()\r\n            .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\r\n            .findFirst()\r\n            .map(OkResult::new)\r\n            .map(ResultBase.class::cast)\r\n            .orElseGet(NotFoundResult::new);\r\n    }\r\n\r\n[wjsProfile]: https://stackoverflow.com/users/1552534/wjs\r\n[wjsAnswer]: https://stackoverflow.com/a/76749604/4216641","title":"How to use Java StreamAPI in this situtation (using polymorphism)","body":"<p>In addition to <a href=\"https://stackoverflow.com/users/1552534/wjs\">WJS</a>' <a href=\"https://stackoverflow.com/a/76749604/4216641\">answer</a>, which moves the <code>map</code>ping after the <code>findFirst()</code>, effectively reducing the amount of calculation that must be done (since we map only once), we can eliminate the in-line cast by adding a separate <code>map</code> step to cast. We can also use a method reference to call the <code>OkResult</code>-constructor. All taken together would look like this:</p>\n<pre><code>public ResultBase handle(Request request) {\n    return this.movieArrayList.stream()\n        .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\n        .findFirst()\n        .map(OkResult::new)\n        .map(ResultBase.class::cast)\n        .orElseGet(NotFoundResult::new);\n}\n</code></pre>\n"}],"owner":{"account_id":25240917,"reputation":5,"user_id":19074806,"display_name":"Gyo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76749604,"answer_count":2,"score":0,"last_activity_date":1690296313,"creation_date":1690133554,"question_id":76749538,"body_markdown":"```\r\n@Override\r\n    public ResultBase handle(Request request) {\r\n        for (Movie movie : this.movieArrayList) {\r\n            if (movie.getTitle().equals(request.getTitle())) {\r\n                return new OkResult(movie);\r\n            }\r\n        }\r\n        return new NotFoundResult();\r\n    } \r\n```\r\n\r\nI want to apply the STREAM API to the above code\r\n\r\nOkResult and NotFoundResult both inherit from the abstract class ResultBase.\r\n\r\nThe code will return an OkResult if the movie is found in the movie list, and a NotFoundResult otherwise.\r\n\r\n```\r\npublic final class OkResult extends ResultBase {\r\n    private final Movie movie;\r\n\r\n    public OkResult(final Movie movie) {\r\n        super(ResultCode.OK);\r\n\r\n        this.movie = movie;\r\n    }\r\n\r\n    public Movie getMovie() {\r\n        return this.movie;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic final class NotFoundResult extends ResultBase {\r\n    public NotFoundResult() {\r\n        super(ResultCode.NOT_FOUND);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Override\r\npublic ResultBase handle(Request request) {\r\n    return this.movieArrayList.stream()\r\n            .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\r\n            .map(movie -&gt; new OkResult(movie))\r\n            .findFirst()\r\n            .orElse(new NotFoundResult());\r\n}\r\n```\r\n\r\nMy first attempt looks like this But this has a syntax error A compilation error occurred because Optional\\&lt;OkResult\\&gt; is required in orElse(new NotFoundResult()).\r\n\r\nSo I tried fixing the code using polymorphism. The fixed code looks like this\r\n\r\n```\r\n@Override\r\n    public ResultBase handle(Request request) {\r\n        Optional&lt;ResultBase&gt; res = this.movieArrayList.stream()\r\n                .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\r\n                .map(movie -&gt; (ResultBase) new OkResult(movie))\r\n                .findFirst();\r\n\r\n        return res.orElse(new NotFoundResult());\r\n    }\r\n```\r\n\r\nIs there a better way? Thanks for reading this long post","title":"How to use Java StreamAPI in this situtation (using polymorphism)","body":"<pre><code>@Override\n    public ResultBase handle(Request request) {\n        for (Movie movie : this.movieArrayList) {\n            if (movie.getTitle().equals(request.getTitle())) {\n                return new OkResult(movie);\n            }\n        }\n        return new NotFoundResult();\n    } \n</code></pre>\n<p>I want to apply the STREAM API to the above code</p>\n<p>OkResult and NotFoundResult both inherit from the abstract class ResultBase.</p>\n<p>The code will return an OkResult if the movie is found in the movie list, and a NotFoundResult otherwise.</p>\n<pre><code>public final class OkResult extends ResultBase {\n    private final Movie movie;\n\n    public OkResult(final Movie movie) {\n        super(ResultCode.OK);\n\n        this.movie = movie;\n    }\n\n    public Movie getMovie() {\n        return this.movie;\n    }\n}\n</code></pre>\n<pre><code>public final class NotFoundResult extends ResultBase {\n    public NotFoundResult() {\n        super(ResultCode.NOT_FOUND);\n    }\n}\n</code></pre>\n<pre><code>@Override\npublic ResultBase handle(Request request) {\n    return this.movieArrayList.stream()\n            .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\n            .map(movie -&gt; new OkResult(movie))\n            .findFirst()\n            .orElse(new NotFoundResult());\n}\n</code></pre>\n<p>My first attempt looks like this But this has a syntax error A compilation error occurred because Optional&lt;OkResult&gt; is required in orElse(new NotFoundResult()).</p>\n<p>So I tried fixing the code using polymorphism. The fixed code looks like this</p>\n<pre><code>@Override\n    public ResultBase handle(Request request) {\n        Optional&lt;ResultBase&gt; res = this.movieArrayList.stream()\n                .filter(movie -&gt; movie.getTitle().equals(request.getTitle()))\n                .map(movie -&gt; (ResultBase) new OkResult(movie))\n                .findFirst();\n\n        return res.orElse(new NotFoundResult());\n    }\n</code></pre>\n<p>Is there a better way? Thanks for reading this long post</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":10400295,"reputation":759,"user_id":7668817,"display_name":"Djamel Korei"},"score":0,"creation_date":1553536327,"post_id":55343616,"comment_id":97412343,"body_markdown":"the question already exist check [here](https://stackoverflow.com/questions/51989745/spring-boot-2-disable-autocommit-hikari-with-multiple-datasources)","body":"the question already exist check <a href=\"https://stackoverflow.com/questions/51989745/spring-boot-2-disable-autocommit-hikari-with-multiple-datasources\">here</a>"},{"owner":{"account_id":7450337,"reputation":69,"user_id":7963141,"display_name":"Andre Soares"},"score":0,"creation_date":1553536998,"post_id":55343616,"comment_id":97412649,"body_markdown":"But it did not work. Thank you.","body":"But it did not work. Thank you."},{"owner":{"account_id":13862323,"reputation":1355,"user_id":10007682,"display_name":"Dylan"},"score":0,"creation_date":1553537429,"post_id":55343616,"comment_id":97412865,"body_markdown":"@AndreSoares did you try removing `.hikari`?","body":"@AndreSoares did you try removing <code>.hikari</code>?"},{"owner":{"account_id":7450337,"reputation":69,"user_id":7963141,"display_name":"Andre Soares"},"score":0,"creation_date":1553539720,"post_id":55343616,"comment_id":97413900,"body_markdown":"yes, but not did not work. I tried too ```spring.datasource.ucm.autocommit=false``` ```spring.datasource.ucm.default-auto-commit=false``` @Dylan","body":"yes, but not did not work. I tried too <code>spring.datasource.ucm.autocommit=false</code> <code>spring.datasource.ucm.default-auto-commit=false</code> @Dylan"},{"owner":{"account_id":7450337,"reputation":69,"user_id":7963141,"display_name":"Andre Soares"},"score":0,"creation_date":1565201763,"post_id":55343616,"comment_id":101281907,"body_markdown":"tks, solve the problem =D","body":"tks, solve the problem =D"},{"owner":{"account_id":6760856,"reputation":131,"user_id":5207684,"display_name":"Katha patel"},"score":0,"creation_date":1647334246,"post_id":55343616,"comment_id":126338878,"body_markdown":"how did you solve the problem, could you share the correct one please?","body":"how did you solve the problem, could you share the correct one please?"}],"answers":[{"tags":[],"owner":{"account_id":1494810,"reputation":8228,"user_id":1401019,"accept_rate":79,"display_name":"Sundararaj Govindasamy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1553549217,"creation_date":1553549217,"answer_id":55346646,"question_id":55343616,"body_markdown":"Use\r\n\r\n    spring.datasource.auto-commit=false\r\n\r\nThis property (and some more too) were **not** documented. \r\n\r\nPlease refer below github issue for more **undocumented** properties. \r\n\r\nhttps://github.com/spring-projects/spring-boot/issues/1829","title":"How to disable autocommit Spring Boot?","body":"<p>Use</p>\n\n<pre><code>spring.datasource.auto-commit=false\n</code></pre>\n\n<p>This property (and some more too) were <strong>not</strong> documented. </p>\n\n<p>Please refer below github issue for more <strong>undocumented</strong> properties. </p>\n\n<p><a href=\"https://github.com/spring-projects/spring-boot/issues/1829\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/1829</a></p>\n"},{"tags":[],"owner":{"account_id":2213402,"reputation":1,"user_id":4319038,"display_name":"Eric Colinet"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690296313,"creation_date":1690296313,"answer_id":76763867,"question_id":55343616,"body_markdown":"With Spring Boot 3, the connection pool has been changed to HikariCP and the parameter is now : `spring.datasource.hikari.auto-commit=false`\r\n","title":"How to disable autocommit Spring Boot?","body":"<p>With Spring Boot 3, the connection pool has been changed to HikariCP and the parameter is now : <code>spring.datasource.hikari.auto-commit=false</code></p>\n"}],"owner":{"account_id":7450337,"reputation":69,"user_id":7963141,"display_name":"Andre Soares"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26390,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1690296313,"creation_date":1553535575,"question_id":55343616,"body_markdown":"I&#39;m trying to disable autocommit, but I&#39;m not lucky. I&#39;m using the Spring Boot version 2.1.3.RELEASE\r\n\r\napplication.properties\r\n\r\n```\r\nspring.jpa.database=oracle\r\nspring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect\r\nspring.jpa.generate-ddl=false\r\nspring.jpa.open-in-view=true\r\nspring.jpa.show-sql=false\r\nspring.datasource.hikari.auto-commit=false\r\n```","title":"How to disable autocommit Spring Boot?","body":"<p>I'm trying to disable autocommit, but I'm not lucky. I'm using the Spring Boot version 2.1.3.RELEASE</p>\n\n<p>application.properties</p>\n\n<pre><code>spring.jpa.database=oracle\nspring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect\nspring.jpa.generate-ddl=false\nspring.jpa.open-in-view=true\nspring.jpa.show-sql=false\nspring.datasource.hikari.auto-commit=false\n</code></pre>\n"},{"tags":["java","couchbase","xdcr"],"comments":[{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1671579589,"post_id":74858751,"comment_id":132128667,"body_markdown":"The Couchbase Java SDK does not have an API for managing XDCR.\n\nOne option is to use the [SDK&#39;s HTTP client](https://github.com/couchbase/couchbase-jvm-clients/blob/d88c840977d6f8d67fc1dc5bec5a7510341aa82c/java-client/src/main/java/com/couchbase/client/java/http/CouchbaseHttpClient.java#L25-L63) to invoke the [XDCR HTTP API](https://docs.couchbase.com/server/current/rest-api/rest-xdcr-intro.html) yourself.","body":"The Couchbase Java SDK does not have an API for managing XDCR.  One option is to use the <a href=\"https://github.com/couchbase/couchbase-jvm-clients/blob/d88c840977d6f8d67fc1dc5bec5a7510341aa82c/java-client/src/main/java/com/couchbase/client/java/http/CouchbaseHttpClient.java#L25-L63\" rel=\"nofollow noreferrer\">SDK&#39;s HTTP client</a> to invoke the <a href=\"https://docs.couchbase.com/server/current/rest-api/rest-xdcr-intro.html\" rel=\"nofollow noreferrer\">XDCR HTTP API</a> yourself."},{"owner":{"account_id":2821426,"reputation":347,"user_id":2425109,"display_name":"user2425109"},"score":0,"creation_date":1671609538,"post_id":74858751,"comment_id":132133393,"body_markdown":"Thanks for reply. with XDCR HTTP API if we have collection mapping rules can we add filter expression per collection mapping rule ? if yes what will be the sample code. say if sourcecollection11-&gt;targetcollection1 should be replicated with filter expression 1. sourcecollection2-&gt;targetcollection2 should be replicated with filter expression 2 and so one","body":"Thanks for reply. with XDCR HTTP API if we have collection mapping rules can we add filter expression per collection mapping rule ? if yes what will be the sample code. say if sourcecollection11-&gt;targetcollection1 should be replicated with filter expression 1. sourcecollection2-&gt;targetcollection2 should be replicated with filter expression 2 and so one"}],"answers":[{"tags":[],"owner":{"account_id":390970,"reputation":675,"user_id":751367,"display_name":"Perry Krug"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690295923,"creation_date":1690295923,"answer_id":76763820,"question_id":74858751,"body_markdown":"You can use the REST API to configure collection mappings: https://docs.couchbase.com/server/current/rest-api/rest-xdcr-adv-settings.html (look for `calMappingRules`)","title":"Adding filter expression in collection mapping rules XDCR with Java client","body":"<p>You can use the REST API to configure collection mappings: <a href=\"https://docs.couchbase.com/server/current/rest-api/rest-xdcr-adv-settings.html\" rel=\"nofollow noreferrer\">https://docs.couchbase.com/server/current/rest-api/rest-xdcr-adv-settings.html</a> (look for <code>calMappingRules</code>)</p>\n"}],"owner":{"account_id":2821426,"reputation":347,"user_id":2425109,"display_name":"user2425109"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690295923,"creation_date":1671513239,"question_id":74858751,"body_markdown":"I am integrating XDCR via JAVA Sdk. If I need to setup filter expression per collection mapping rule how to do in java?\r\nsay collection mapping rule 1 has one filter expression,\r\ncollection mapping rule 2 has some other filter expression and so on.","title":"Adding filter expression in collection mapping rules XDCR with Java client","body":"<p>I am integrating XDCR via JAVA Sdk. If I need to setup filter expression per collection mapping rule how to do in java?\nsay collection mapping rule 1 has one filter expression,\ncollection mapping rule 2 has some other filter expression and so on.</p>\n"},{"tags":["java","spring","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1690293216,"post_id":76762715,"comment_id":135331038,"body_markdown":"Make it a native query. Otherwise you would need to [register a new function with HQL](https://stackoverflow.com/questions/13568914/date-operations-in-hql). As a side note: https://www.coding-dude.com/wp/hibernate/hql-current-date/ this lists possible options for you","body":"Make it a native query. Otherwise you would need to <a href=\"https://stackoverflow.com/questions/13568914/date-operations-in-hql\">register a new function with HQL</a>. As a side note: <a href=\"https://www.coding-dude.com/wp/hibernate/hql-current-date/\" rel=\"nofollow noreferrer\">coding-dude.com/wp/hibernate/hql-current-date</a> this lists possible options for you"},{"owner":{"account_id":17628263,"reputation":143,"user_id":12792897,"display_name":"Wail"},"score":0,"creation_date":1690295252,"post_id":76762715,"comment_id":135331570,"body_markdown":"If I do a native query as you say, it stops for a while and I get the message: &quot;No Dialect mapping for JDBC type: 2002; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002&quot;,","body":"If I do a native query as you say, it stops for a while and I get the message: &quot;No Dialect mapping for JDBC type: 2002; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002&quot;,"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1690351610,"post_id":76762715,"comment_id":135339399,"body_markdown":"To fix that is probably out of scope of this question. According to the 2nd link I posted, you could try in the HQL something like this: `WHERE :activeDate between cd.module_start_date and cd.module_end_date + 90` This requires `module_end_date` to be date without time though","body":"To fix that is probably out of scope of this question. According to the 2nd link I posted, you could try in the HQL something like this: <code>WHERE :activeDate between cd.module_start_date and cd.module_end_date + 90</code> This requires <code>module_end_date</code> to be date without time though"}],"owner":{"account_id":17628263,"reputation":143,"user_id":12792897,"display_name":"Wail"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690295844,"creation_date":1690288131,"question_id":76762715,"body_markdown":"I&#39;m trying to make the moduleEndDate field 90 days in the future. If I run this in the database natively from Postgre, it doesn&#39;t return any error, but if I apply it to JPA I get an error. \r\n\r\n&gt; 2023-07-25 14:22:35.099 [main] ERROR o.h.hql.internal.ast.ErrorTracker\r\n&gt; - line 1:103: unexpected token: INTERVAL antlr.NoViableAltException: unexpected token: INTERVAL\r\n\r\nThe specific query is customized for JPA:\r\n\r\n    public interface ICourseDataRepository extends JpaRepository&lt;CourseData, Long&gt; {\r\n    \r\n    \t@Query(&quot;SELECT cd FROM course_data cd WHERE :activeDate between cd.module_start_date and cd.module_end_date + INTERVAL &#39;90 DAY&#39;&quot;)\r\n    \tpublic List&lt;CourseData&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\r\n    \r\n    }\r\n\r\n\r\nIf I directly try to take the field and add it for the number of seconds in a day **cd.module_end_date + 90 * 86400** I can&#39;t either because the field is of the timestamp type... I can&#39;t think of any other way for JPA to accept it and be compatible with Postgre.\r\n\r\n\r\nI update that I have tried to do it with native query in this way and it returns another error:\r\n\r\n    @Query(value = &quot;SELECT cd FROM course_data cd WHERE ?1 between cd.module_start_date and cd.module_end_date + INTERVAL &#39;90 DAY&#39;&quot;,\r\n    \t\tnativeQuery = true)\r\n    public List&lt;Object[]&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\r\n\r\nAnd it returns the following error:\r\n\r\n&gt; org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for\r\n&gt; JDBC type: 2002; nested exception is org.hibernate.MappingException:\r\n&gt; No Dialect mapping for JDBC type: 2002","title":"How to increment days for JPA without using interval?","body":"<p>I'm trying to make the moduleEndDate field 90 days in the future. If I run this in the database natively from Postgre, it doesn't return any error, but if I apply it to JPA I get an error.</p>\n<blockquote>\n<p>2023-07-25 14:22:35.099 [main] ERROR o.h.hql.internal.ast.ErrorTracker</p>\n<ul>\n<li>line 1:103: unexpected token: INTERVAL antlr.NoViableAltException: unexpected token: INTERVAL</li>\n</ul>\n</blockquote>\n<p>The specific query is customized for JPA:</p>\n<pre><code>public interface ICourseDataRepository extends JpaRepository&lt;CourseData, Long&gt; {\n\n    @Query(&quot;SELECT cd FROM course_data cd WHERE :activeDate between cd.module_start_date and cd.module_end_date + INTERVAL '90 DAY'&quot;)\n    public List&lt;CourseData&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\n\n}\n</code></pre>\n<p>If I directly try to take the field and add it for the number of seconds in a day <strong>cd.module_end_date + 90 * 86400</strong> I can't either because the field is of the timestamp type... I can't think of any other way for JPA to accept it and be compatible with Postgre.</p>\n<p>I update that I have tried to do it with native query in this way and it returns another error:</p>\n<pre><code>@Query(value = &quot;SELECT cd FROM course_data cd WHERE ?1 between cd.module_start_date and cd.module_end_date + INTERVAL '90 DAY'&quot;,\n        nativeQuery = true)\npublic List&lt;Object[]&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\n</code></pre>\n<p>And it returns the following error:</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for\nJDBC type: 2002; nested exception is org.hibernate.MappingException:\nNo Dialect mapping for JDBC type: 2002</p>\n</blockquote>\n"},{"tags":["java","jsf","cdi"],"comments":[{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1690216429,"post_id":76745863,"comment_id":135319338,"body_markdown":"fire CDI event from generic popup? listen to event in beans, and don&#39;t forget @Observes(notifyObserver=IF_EXISTS),  so event is listened to only if there is instance of PopupCallback (so constructor will not be called for every PopupCallback, just for the one that is already in the view scope)","body":"fire CDI event from generic popup? listen to event in beans, and don&#39;t forget @Observes(notifyObserver=IF_EXISTS),  so event is listened to only if there is instance of PopupCallback (so constructor will not be called for every PopupCallback, just for the one that is already in the view scope)"}],"answers":[{"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690230350,"creation_date":1690230350,"answer_id":76757817,"question_id":76745863,"body_markdown":"If this were me, I would just inject the bean:\r\n\r\n```\r\n@Named\r\n@ViewScoped\r\npublic class GenericPopupBean {\r\n    @Inject\r\n    private PopupCallback callback;\r\n}\r\n```\r\nThis should work as long as there is one implementation of `PopupCallback`. You wouldn&#39;t even need the `PopupCallback` interface.\r\n\r\n\r\nIf multiple implementations of `PopupCallback` exist, I would probably solve this by inverting the relationship:\r\n\r\n```\r\n@Named\r\n@ViewScoped\r\npublic class MainBean implements PopupCallback {\r\n    @Inject\r\n    private MainBean popupCallback;\r\n    @Inject\r\n    private GenericPopupBean genericPopupBean;\r\n\r\n...\r\n\r\n    public void openPopup() {\r\n        genericPopupBean.setCallBack(popupCallback); //note &#39;this&#39; might work here instead, depending on the CDI implementation. Not sure that&#39;s 100% spec compliant.\r\n        ...\r\n    }\r\n...\r\n}\r\n```\r\n\r\nIf you want to know why this works, see my answer here: https://stackoverflow.com/questions/64536655/why-does-self-injection-with-cdi-not-result-in-an-infinite-loop\r\n\r\nIt&#39;s usually not a good idea to pass around `@Inject`ed material, but in this particular case I think it&#39;s ok.\r\n\r\n\r\nOther ways would be to use the flash scope, which really isn&#39;t super great solution if people have multiple tabs/windows open.\r\n\r\nAnother is CDI Events, where you broadcast an event and then an arbitrary number of receivers can listen for said event, but it&#39;ll be hard to figure out who the correct receiver should be if you have multiple PopupCallbacks.\r\n\r\nAnyway good luck, let us know what you end up doing so others can benefit!","title":"Changing reference of ViewScoped beans in JSF 2.3 dynamically","body":"<p>If this were me, I would just inject the bean:</p>\n<pre><code>@Named\n@ViewScoped\npublic class GenericPopupBean {\n    @Inject\n    private PopupCallback callback;\n}\n</code></pre>\n<p>This should work as long as there is one implementation of <code>PopupCallback</code>. You wouldn't even need the <code>PopupCallback</code> interface.</p>\n<p>If multiple implementations of <code>PopupCallback</code> exist, I would probably solve this by inverting the relationship:</p>\n<pre><code>@Named\n@ViewScoped\npublic class MainBean implements PopupCallback {\n    @Inject\n    private MainBean popupCallback;\n    @Inject\n    private GenericPopupBean genericPopupBean;\n\n...\n\n    public void openPopup() {\n        genericPopupBean.setCallBack(popupCallback); //note 'this' might work here instead, depending on the CDI implementation. Not sure that's 100% spec compliant.\n        ...\n    }\n...\n}\n</code></pre>\n<p>If you want to know why this works, see my answer here: <a href=\"https://stackoverflow.com/questions/64536655/why-does-self-injection-with-cdi-not-result-in-an-infinite-loop\">Why does self injection with CDI not result in an infinite loop?</a></p>\n<p>It's usually not a good idea to pass around <code>@Inject</code>ed material, but in this particular case I think it's ok.</p>\n<p>Other ways would be to use the flash scope, which really isn't super great solution if people have multiple tabs/windows open.</p>\n<p>Another is CDI Events, where you broadcast an event and then an arbitrary number of receivers can listen for said event, but it'll be hard to figure out who the correct receiver should be if you have multiple PopupCallbacks.</p>\n<p>Anyway good luck, let us know what you end up doing so others can benefit!</p>\n"}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76757817,"answer_count":1,"score":1,"last_activity_date":1690295780,"creation_date":1690061612,"question_id":76745863,"body_markdown":"I am working on an application in JSF, in which I have two ViewScoped beans within the same screen, and they need to communicate with each other. The first bean represents the main screen, and the other bean is a popup window where the user selects a certain value, which is then passed back to the previous bean.\r\n\r\nThe problem is that this latter bean is generic, meaning it can be used from various screens, so it doesn&#39;t have a direct reference to the main screen&#39;s bean. Instead, it references an interface, which is set dynamically. However, in some cases, this dynamic setting leads to errors, such as data loss.\r\n\r\nExample: \r\n\r\n``` \r\npublic interface PopupCallback {\r\n    void onValueSelected(String value);\r\n}\r\n\r\n@Named\r\n@ViewScoped\r\npublic class MainBean implements PopupCallback {\r\n    private String selectedValue;\r\n\r\n    // Getter and Setter for selectedValue\r\n\r\n    @Override\r\n    public void onValueSelected(String value) {\r\n        this.selectedValue = value;\r\n        // You can perform any additional logic here upon receiving the value from the popup.\r\n    }\r\n\r\n    public void openPopup() {\r\n        // Code to open the generic popup window\r\n    }\r\n}\r\n\r\n@Named\r\n@ViewScoped\r\npublic class GenericPopupBean {\r\n    private PopupCallback callback;\r\n\r\n    // Setter for the callback interface\r\n    public void setCallback(PopupCallback callback) {\r\n        this.callback = callback;\r\n    }\r\n\r\n    // Method to be called when the user selects a value in the popup\r\n    public void onValueSelected(String value) {\r\n        if (callback != null) {\r\n            callback.onValueSelected(value);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nWhat is the best way to achieve this?","title":"Changing reference of ViewScoped beans in JSF 2.3 dynamically","body":"<p>I am working on an application in JSF, in which I have two ViewScoped beans within the same screen, and they need to communicate with each other. The first bean represents the main screen, and the other bean is a popup window where the user selects a certain value, which is then passed back to the previous bean.</p>\n<p>The problem is that this latter bean is generic, meaning it can be used from various screens, so it doesn't have a direct reference to the main screen's bean. Instead, it references an interface, which is set dynamically. However, in some cases, this dynamic setting leads to errors, such as data loss.</p>\n<p>Example:</p>\n<pre><code>public interface PopupCallback {\n    void onValueSelected(String value);\n}\n\n@Named\n@ViewScoped\npublic class MainBean implements PopupCallback {\n    private String selectedValue;\n\n    // Getter and Setter for selectedValue\n\n    @Override\n    public void onValueSelected(String value) {\n        this.selectedValue = value;\n        // You can perform any additional logic here upon receiving the value from the popup.\n    }\n\n    public void openPopup() {\n        // Code to open the generic popup window\n    }\n}\n\n@Named\n@ViewScoped\npublic class GenericPopupBean {\n    private PopupCallback callback;\n\n    // Setter for the callback interface\n    public void setCallback(PopupCallback callback) {\n        this.callback = callback;\n    }\n\n    // Method to be called when the user selects a value in the popup\n    public void onValueSelected(String value) {\n        if (callback != null) {\n            callback.onValueSelected(value);\n        }\n    }\n}\n\n</code></pre>\n<p>What is the best way to achieve this?</p>\n"},{"tags":["java","request","jwt","http-headers"],"comments":[{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558984157,"post_id":56331269,"comment_id":99269511,"body_markdown":"Can you explain?","body":"Can you explain?"},{"owner":{"account_id":3597514,"reputation":117145,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558984759,"post_id":56331269,"comment_id":99269701,"body_markdown":"Probably the server isn&#39;t set up correctly so is denying the options request, but we can&#39;t tell from what you&#39;ve posted. See e.g. https://stackoverflow.com/a/40723041/3001761","body":"Probably the server isn&#39;t set up correctly so is denying the options request, but we can&#39;t tell from what you&#39;ve posted. See e.g. <a href=\"https://stackoverflow.com/a/40723041/3001761\">stackoverflow.com/a/40723041/3001761</a>"},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558987378,"post_id":56331269,"comment_id":99270457,"body_markdown":"The angular not sended the token in the request is not a problem?","body":"The angular not sended the token in the request is not a problem?"},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558987527,"post_id":56331269,"comment_id":99270493,"body_markdown":"I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.","body":"I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request."},{"owner":{"account_id":3597514,"reputation":117145,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558987580,"post_id":56331269,"comment_id":99270508,"body_markdown":"Did you read the link? A preflight options request shouldn&#39;t include credentials. Unless you did the whole CORS cycle and made an options request from insomnia, you&#39;re wrong about where the problem is.","body":"Did you read the link? A preflight options request shouldn&#39;t include credentials. Unless you did the whole CORS cycle and made an options request from insomnia, you&#39;re wrong about where the problem is."},{"owner":{"account_id":4484745,"reputation":512,"user_id":3647773,"display_name":"Ritchie"},"score":0,"creation_date":1558988386,"post_id":56331269,"comment_id":99270736,"body_markdown":"Is the interceptor correctly extending the Http class in your `app.module`?","body":"Is the interceptor correctly extending the Http class in your <code>app.module</code>?"},{"owner":{"account_id":3597514,"reputation":117145,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558988464,"post_id":56331269,"comment_id":99270755,"body_markdown":"@Ritchie this isn&#39;t getting as far as the point where that would matter. The credentials *don&#39;t get added to the preflight request*.","body":"@Ritchie this isn&#39;t getting as far as the point where that would matter. The credentials <i>don&#39;t get added to the preflight request</i>."},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558991840,"post_id":56331269,"comment_id":99271651,"body_markdown":"@Ritchie I think so, I put my app modules in the question, can you look there?","body":"@Ritchie I think so, I put my app modules in the question, can you look there?"}],"answers":[{"tags":[],"owner":{"account_id":4097863,"reputation":554,"user_id":5857484,"display_name":"andbjer"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558990114,"creation_date":1558989190,"answer_id":56332172,"question_id":56331269,"body_markdown":"First of all, if you haven&#39;t done so already you need to provide the interceptor in the root module. Add this to the `providers`-field: \r\n\r\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\r\n\r\nSecond, this could be related to [this issue][1]. Make sure you only have one import of `HttpClientModule` in the entire app. \r\n\r\nAlso check out [this discussion](https://github.com/angular/angular/issues/20575) from an issue on the Angular repo. The same behavior can occur if you import some module from a third party package that imports `HttpClientModule`. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/45418477/angular-4-3-interceptor-not-working/47475945#47475945","title":"Not setting headers for request","body":"<p>First of all, if you haven't done so already you need to provide the interceptor in the root module. Add this to the <code>providers</code>-field: </p>\n\n<pre><code>{ provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n</code></pre>\n\n<p>Second, this could be related to <a href=\"https://stackoverflow.com/questions/45418477/angular-4-3-interceptor-not-working/47475945#47475945\">this issue</a>. Make sure you only have one import of <code>HttpClientModule</code> in the entire app. </p>\n\n<p>Also check out <a href=\"https://github.com/angular/angular/issues/20575\" rel=\"nofollow noreferrer\">this discussion</a> from an issue on the Angular repo. The same behavior can occur if you import some module from a third party package that imports <code>HttpClientModule</code>. </p>\n"},{"tags":[],"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1558994119,"creation_date":1558994119,"answer_id":56332816,"question_id":56331269,"body_markdown":"Thanks for the comments, I was able to formulate a solution, I modified my WebSecurityConfig.java api file, the problem was not the angular requests.\r\nThanks to all.\r\n\r\n       \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    \r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private ParametersProperties parameters;\r\n    \r\n        @Resource(name = &quot;userService&quot;)\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Autowired\r\n        private JwtAuthenticationEntryPoint unauthorizedHandler;\r\n    \r\n        @Override\r\n        @Bean\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Autowired\r\n        public void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService)\r\n                    .passwordEncoder(encoder());\r\n        }\r\n    \r\n        @Bean\r\n        public JwtAuthenticationFilter authenticationTokenFilterBean() {\r\n            return new JwtAuthenticationFilter();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors().and().csrf().disable().\r\n                    authorizeRequests()\r\n                    .antMatchers(\r\n                             &quot;/swagger-resources/**&quot;,\r\n                             &quot;/swagger-ui.html&quot;,\r\n                             &quot;/webjars/**&quot;,\r\n                             &quot;/h2/**&quot;,\r\n                             &quot;/auth/signin&quot;,\r\n                    ).permitAll()\r\n                    /* the saver is the line below*/ \r\n                    .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n            http\r\n                    .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class)\r\n                    .headers().frameOptions().sameOrigin();\r\n        }\r\n    \r\n        @Bean\r\n        public BCryptPasswordEncoder encoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }","title":"Not setting headers for request","body":"<p>Thanks for the comments, I was able to formulate a solution, I modified my WebSecurityConfig.java api file, the problem was not the angular requests.\nThanks to all.</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private ParametersProperties parameters;\n\n    @Resource(name = \"userService\")\n    private UserDetailsService userDetailsService;\n\n    @Autowired\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Autowired\n    public void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService)\n                .passwordEncoder(encoder());\n    }\n\n    @Bean\n    public JwtAuthenticationFilter authenticationTokenFilterBean() {\n        return new JwtAuthenticationFilter();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable().\n                authorizeRequests()\n                .antMatchers(\n                         \"/swagger-resources/**\",\n                         \"/swagger-ui.html\",\n                         \"/webjars/**\",\n                         \"/h2/**\",\n                         \"/auth/signin\",\n                ).permitAll()\n                /* the saver is the line below*/ \n                .antMatchers(HttpMethod.OPTIONS, \"/**\").permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http\n                .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class)\n                .headers().frameOptions().sameOrigin();\n    }\n\n    @Bean\n    public BCryptPasswordEncoder encoder(){\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56332816,"answer_count":2,"score":0,"last_activity_date":1690295727,"creation_date":1558983798,"question_id":56331269,"body_markdown":"I have an Angular 7 app and an API in Java Spring with JTW. The app must at each request in the API send the token, but this is not happening, and so all requests return the 401 error.\r\n\r\n**app modules**\r\n   \r\n\r\n         ...\r\n        \r\n            @NgModule\r\n    \r\n    ({\r\n          declarations: [\r\n            AppComponent,\r\n            PatientComponent,\r\n            HeaderComponent,\r\n            FooterComponent,\r\n            AlertComponent,\r\n            NotFoundComponent,\r\n            UserRegisterComponent,\r\n            LoginComponent,\r\n            AuthGuardComponent\r\n          ],\r\n          imports: [\r\n            BrowserModule,\r\n            FormsModule,\r\n            NgSelectModule, \r\n            ReactiveFormsModule,\r\n            HttpClientModule,\r\n            AppRoutingModule,\r\n            NgbModule,\r\n          ],\r\n          providers: [\r\n            {\r\n              provide : HTTP_INTERCEPTORS,\r\n              useClass: AuthInterceptor,\r\n              multi   : true,\r\n            },\r\n          ],\r\n          bootstrap: [AppComponent]\r\n        })\r\n        \r\n        export class AppModule {\r\n        \r\n        }\r\n\r\n**AuthInterceptor**\r\n\r\n    import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpHeaders } from &#39;@angular/common/http&#39;;\r\n    import { Injectable } from &#39;@angular/core&#39;;\r\n    import { GeneralService } from &#39;../_service/general.service&#39;;\r\n    import { Observable } from &#39;rxjs&#39;;\r\n    \r\n    @Injectable()\r\n    export class AuthInterceptor implements HttpInterceptor {\r\n        constructor(private generalService: GeneralService) {\r\n            \r\n        }\r\n    \r\n        intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\r\n            req = req.clone({\r\n                setHeaders: {\r\n                    Authorization: &#39;Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyIiwic2NvcGVzIjpbeyJhdXRob3JpdHkiOiJTeXN0ZW0gVXNlciJ9XSwiaXNzIjoiaHR0cHM6Ly9hcGkubmVvZ3JpZC5jb20vIiwiaWF0IjoxNTU4OTgwOTAxLCJleHAiOjE1NTg5OTg5MDF9.vZByXryTI-1wGLYY1bU8DurOF15qlxA7QkdMW5UeM8c&#39;)\r\n                }\r\n            });\r\n    \r\n           console.log(req);\r\n           return next.handle(req);\r\n        }\r\n    }\r\n\r\n**Request**\r\n\r\n    listAll() {\r\n         return this.http.get(&#39;http://localhost:8080/api/listAll&#39;);\r\n    }\r\n\r\n    async get() {\r\n        let error = null;\r\n    \r\n        let response = await this.listAll()\r\n        .toPromise()\r\n        .catch(error =&gt; error = error);\r\n    \r\n        console.log(response);\r\n      }\r\n\r\n  \r\n\r\n**Result of console.log(req);**\r\n\r\nLooks like okay, the authorization and the token is there\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**The request**\r\n\r\nDont pass the token here :c\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Erros**\r\n\r\n&gt; OPTIONS 401 Access to XMLHttpRequest\r\n&gt; at&#39;http://localhost:4200&#39; has been blocked by CORS policy: Response to\r\n&gt; preflight request doesn&#39;t pass access control check: It does not have\r\n&gt; HTTP ok status.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7sFTN.png\r\n  [2]: https://i.stack.imgur.com/Yw0ro.png\r\n\r\n\r\nI done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.\r\n","title":"Not setting headers for request","body":"<p>I have an Angular 7 app and an API in Java Spring with JTW. The app must at each request in the API send the token, but this is not happening, and so all requests return the 401 error.</p>\n\n<p><strong>app modules</strong></p>\n\n<pre><code>     ...\n\n        @NgModule\n\n({\n      declarations: [\n        AppComponent,\n        PatientComponent,\n        HeaderComponent,\n        FooterComponent,\n        AlertComponent,\n        NotFoundComponent,\n        UserRegisterComponent,\n        LoginComponent,\n        AuthGuardComponent\n      ],\n      imports: [\n        BrowserModule,\n        FormsModule,\n        NgSelectModule, \n        ReactiveFormsModule,\n        HttpClientModule,\n        AppRoutingModule,\n        NgbModule,\n      ],\n      providers: [\n        {\n          provide : HTTP_INTERCEPTORS,\n          useClass: AuthInterceptor,\n          multi   : true,\n        },\n      ],\n      bootstrap: [AppComponent]\n    })\n\n    export class AppModule {\n\n    }\n</code></pre>\n\n<p><strong>AuthInterceptor</strong></p>\n\n<pre><code>import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { GeneralService } from '../_service/general.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n    constructor(private generalService: GeneralService) {\n\n    }\n\n    intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n        req = req.clone({\n            setHeaders: {\n                Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyIiwic2NvcGVzIjpbeyJhdXRob3JpdHkiOiJTeXN0ZW0gVXNlciJ9XSwiaXNzIjoiaHR0cHM6Ly9hcGkubmVvZ3JpZC5jb20vIiwiaWF0IjoxNTU4OTgwOTAxLCJleHAiOjE1NTg5OTg5MDF9.vZByXryTI-1wGLYY1bU8DurOF15qlxA7QkdMW5UeM8c')\n            }\n        });\n\n       console.log(req);\n       return next.handle(req);\n    }\n}\n</code></pre>\n\n<p><strong>Request</strong></p>\n\n<pre><code>listAll() {\n     return this.http.get('http://localhost:8080/api/listAll');\n}\n\nasync get() {\n    let error = null;\n\n    let response = await this.listAll()\n    .toPromise()\n    .catch(error =&gt; error = error);\n\n    console.log(response);\n  }\n</code></pre>\n\n<p><strong>Result of console.log(req);</strong></p>\n\n<p>Looks like okay, the authorization and the token is there</p>\n\n<p><a href=\"https://i.stack.imgur.com/7sFTN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7sFTN.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The request</strong></p>\n\n<p>Dont pass the token here :c</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yw0ro.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yw0ro.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Erros</strong></p>\n\n<blockquote>\n  <p>OPTIONS 401 Access to XMLHttpRequest\n  at'<a href=\"http://localhost:4200\" rel=\"nofollow noreferrer\">http://localhost:4200</a>' has been blocked by CORS policy: Response to\n  preflight request doesn't pass access control check: It does not have\n  HTTP ok status.</p>\n</blockquote>\n\n<p>I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.</p>\n"},{"tags":["java","android","android-livedata","android-viewmodel","viewmodelfactory"],"answers":[{"tags":[],"owner":{"account_id":27718587,"reputation":24,"user_id":21159694,"display_name":"genzo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690231926,"creation_date":1690231619,"answer_id":76757919,"question_id":76757109,"body_markdown":"You can try using `android:&quot;configChanges:orientation`&quot; in your Manifest file to igonre screen rotation like this:\r\n\r\n    &lt;activity\r\n        android:name=&quot;ActivityName&quot;\r\n        android:configChanges=&quot;orientation&quot;\r\n        android:label=&quot;@string/your_label&quot;&gt;\r\n\r\nBut this isn&#39;t the best approach. \r\nLink on docs: https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity\r\n\r\nPlease let me know if the solution helped.","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>You can try using <code>android:&quot;configChanges:orientation</code>&quot; in your Manifest file to igonre screen rotation like this:</p>\n<pre><code>&lt;activity\n    android:name=&quot;ActivityName&quot;\n    android:configChanges=&quot;orientation&quot;\n    android:label=&quot;@string/your_label&quot;&gt;\n</code></pre>\n<p>But this isn't the best approach.\nLink on docs: <a href=\"https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity</a></p>\n<p>Please let me know if the solution helped.</p>\n"},{"tags":[],"owner":{"account_id":26079994,"reputation":39,"user_id":19778332,"display_name":"David Feldman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690295066,"creation_date":1690295066,"answer_id":76763709,"question_id":76757109,"body_markdown":"i got the problem , that\r\nin the onDestroy i am deleting the list like this\r\n```java\r\n    @Override\r\n    protected void onDestroy() {super.onDestroy();\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().reactionsDao().deleteTopicReactions(topic));\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().chatMessageDao().deleteByTopic(topic));\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().repliesDao().deleteByTopic(topic));\r\n    }\r\n```\r\nand at configChanges the onDestroy is getting called so the database gets empty, so i am getting back a empty list","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>i got the problem , that\nin the onDestroy i am deleting the list like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void onDestroy() {super.onDestroy();\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().reactionsDao().deleteTopicReactions(topic));\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().chatMessageDao().deleteByTopic(topic));\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().repliesDao().deleteByTopic(topic));\n    }\n</code></pre>\n<p>and at configChanges the onDestroy is getting called so the database gets empty, so i am getting back a empty list</p>\n"}],"owner":{"account_id":26079994,"reputation":39,"user_id":19778332,"display_name":"David Feldman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690295066,"creation_date":1690222987,"question_id":76757109,"body_markdown":"I have an issue concerning the behavior of LiveData within my ViewModel during a screen rotation.\r\n\r\nMy application, structured around the MVVM pattern, includes an Activity which observes a LiveData&lt;List&lt;ChatMessageDB&gt;&gt; from a ViewModel which, in turn, fetches data from a Repository linked to a Room database.\r\n\r\nBelow are the involved code snippets:\r\n\r\nThe Activity onCreate:\r\n```java\r\nChatViewModel2.getInstance(this, topic).getTopicChatLiveData().observe(this, chatMessageDBS -&gt; {\r\n    chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList()));\r\n});\r\n```\r\nThe ViewModel:\r\n```java\r\npublic class ChatViewModel2 extends ViewModel {\r\n    private final ChatMassagesRepository repository;\r\n    private String topic;\r\n    private static ChatViewModel2 instance;\r\n\r\n    public ChatViewModel2(@NonNull String topic) {\r\n        repository = new ChatMassagesRepository();\r\n        this.topic = topic;\r\n    }\r\n\r\n    public static synchronized ChatViewModel2 getInstance(Context context, String topic) {\r\n        if (instance == null) {\r\n            instance = new ViewModelProvider((ViewModelStoreOwner) context, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getTopicChatLiveData() {\r\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; topicChatLiveData = repository.getAllRepliesByTopic(topic);\r\n        return topicChatLiveData;\r\n    }\r\n}\r\n```\r\nThe ViewModelFactory:\r\n```java\r\npublic class ChatMassagesViewModelFactory implements ViewModelProvider.Factory {\r\n    private String topic;\r\n\r\n    public ChatMassagesViewModelFactory(String topic) {\r\n        this.topic = topic;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\r\n        if (modelClass.isAssignableFrom(ChatViewModel2.class)) {\r\n            return (T) new ChatViewModel2(topic);\r\n        }\r\n        throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\r\n    }\r\n}\r\n```\r\nThe Repository:\r\n```java\r\npublic class ChatMassagesRepository {\r\n    ChatMessageDAO chatMessageDao;\r\n    private static ChatMassagesRepository INSTANCE;\r\n\r\n    public static ChatMassagesRepository getInstance() {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = new ChatMassagesRepository();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n\r\n    public ChatMassagesRepository() {\r\n        chatMessageDao= ChatDatabase.getInstance().chatMessageDao();\r\n    }\r\n\r\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getAllRepliesByTopic(String topic){\r\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; replies = chatMessageDao.getTopicChat(topic);\r\n        return  replies;\r\n    }\r\n}\r\n```\r\nAnd this is the getInstance from the Database class:\r\n```java\r\n@NonNull\r\npublic static ChatDatabase getInstance(final Context context){\r\n    synchronized (ChatDatabase.class) {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(), ChatDatabase.class, &quot;teleconsole_chat_database&quot;).fallbackToDestructiveMigration().build();\r\n        }\r\n    }\r\n    return INSTANCE;\r\n}\r\n\r\npublic static ChatDatabase getInstance(){\r\n    return getInstance(AppController.getInstance());\r\n}\r\n```\r\nEverything works fine until the screen rotates. Post-rotation, the observer in the Activity receives an empty list. Any insight into why this is happening and how to rectify it would be greatly appreciated.\r\n\r\ni also tried\r\n```java\r\n        new ViewModelProvider(this, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class).getTopicChatLiveData().observe(this, chatMessageDBS -&gt;\r\n                chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList())));\r\n```\r\nbut did not help","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>I have an issue concerning the behavior of LiveData within my ViewModel during a screen rotation.</p>\n<p>My application, structured around the MVVM pattern, includes an Activity which observes a LiveData&lt;List&gt; from a ViewModel which, in turn, fetches data from a Repository linked to a Room database.</p>\n<p>Below are the involved code snippets:</p>\n<p>The Activity onCreate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ChatViewModel2.getInstance(this, topic).getTopicChatLiveData().observe(this, chatMessageDBS -&gt; {\n    chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList()));\n});\n</code></pre>\n<p>The ViewModel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatViewModel2 extends ViewModel {\n    private final ChatMassagesRepository repository;\n    private String topic;\n    private static ChatViewModel2 instance;\n\n    public ChatViewModel2(@NonNull String topic) {\n        repository = new ChatMassagesRepository();\n        this.topic = topic;\n    }\n\n    public static synchronized ChatViewModel2 getInstance(Context context, String topic) {\n        if (instance == null) {\n            instance = new ViewModelProvider((ViewModelStoreOwner) context, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class);\n        }\n        return instance;\n    }\n\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getTopicChatLiveData() {\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; topicChatLiveData = repository.getAllRepliesByTopic(topic);\n        return topicChatLiveData;\n    }\n}\n</code></pre>\n<p>The ViewModelFactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatMassagesViewModelFactory implements ViewModelProvider.Factory {\n    private String topic;\n\n    public ChatMassagesViewModelFactory(String topic) {\n        this.topic = topic;\n    }\n\n    @NonNull\n    @Override\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\n        if (modelClass.isAssignableFrom(ChatViewModel2.class)) {\n            return (T) new ChatViewModel2(topic);\n        }\n        throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\n    }\n}\n</code></pre>\n<p>The Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatMassagesRepository {\n    ChatMessageDAO chatMessageDao;\n    private static ChatMassagesRepository INSTANCE;\n\n    public static ChatMassagesRepository getInstance() {\n        if (INSTANCE == null) {\n            INSTANCE = new ChatMassagesRepository();\n        }\n        return INSTANCE;\n    }\n\n    public ChatMassagesRepository() {\n        chatMessageDao= ChatDatabase.getInstance().chatMessageDao();\n    }\n\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getAllRepliesByTopic(String topic){\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; replies = chatMessageDao.getTopicChat(topic);\n        return  replies;\n    }\n}\n</code></pre>\n<p>And this is the getInstance from the Database class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull\npublic static ChatDatabase getInstance(final Context context){\n    synchronized (ChatDatabase.class) {\n        if (INSTANCE == null) {\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(), ChatDatabase.class, &quot;teleconsole_chat_database&quot;).fallbackToDestructiveMigration().build();\n        }\n    }\n    return INSTANCE;\n}\n\npublic static ChatDatabase getInstance(){\n    return getInstance(AppController.getInstance());\n}\n</code></pre>\n<p>Everything works fine until the screen rotates. Post-rotation, the observer in the Activity receives an empty list. Any insight into why this is happening and how to rectify it would be greatly appreciated.</p>\n<p>i also tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>        new ViewModelProvider(this, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class).getTopicChatLiveData().observe(this, chatMessageDBS -&gt;\n                chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList())));\n</code></pre>\n<p>but did not help</p>\n"},{"tags":["java","inversion-of-control","micronaut"],"answers":[{"tags":[],"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690294135,"creation_date":1690294135,"answer_id":76763579,"question_id":76622237,"body_markdown":"After some trial and error i came up with this working solution:\r\n\r\n```java\r\npublic abstract class ObjectifyRepository&lt;T&gt; {\r\n}\r\n\r\n@Singleton\r\n@Bean(typed = RepositoryA.class)\r\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\r\n    public RepositoryA() {\r\n        super(EntityA.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\n@Bean(typed = RepositoryB.class)\r\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\r\n\r\n    public RepositoryB() {\r\n        super(EntityB.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\npublic class MyService {\r\n    private final RespositoryA repository;\r\n\r\n    public MyService(RespositoryA repository) {\r\n        this.repository = repository;\r\n    }\r\n}\r\n```","title":"Prevent NonUniqueBeanException in Micronaut, even with using @Named annotation","body":"<p>After some trial and error i came up with this working solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class ObjectifyRepository&lt;T&gt; {\n}\n\n@Singleton\n@Bean(typed = RepositoryA.class)\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\n    public RepositoryA() {\n        super(EntityA.class);\n    }\n}\n\n@Singleton\n@Bean(typed = RepositoryB.class)\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\n\n    public RepositoryB() {\n        super(EntityB.class);\n    }\n}\n\n@Singleton\npublic class MyService {\n    private final RespositoryA repository;\n\n    public MyService(RespositoryA repository) {\n        this.repository = repository;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763579,"answer_count":1,"score":0,"last_activity_date":1690294135,"creation_date":1688573873,"question_id":76622237,"body_markdown":"Why does this code yield a io.micronaut.context.exceptions.NonUniqueBeanException?\r\n\r\n```java\r\npublic abstract class ObjectifyRepository&lt;T&gt; {\r\n}\r\n\r\n@Singleton\r\n@Named(&quot;repositoryA&quot;)\r\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\r\n    public RepositoryA() {\r\n        super(EntityA.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\n@Named(&quot;repositoryB&quot;)\r\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\r\n\r\n    public RepositoryB() {\r\n        super(EntityB.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\npublic class MyService {\r\n    private final RespositoryA repository;\r\n\r\n    public MyService(@Named(&quot;repositoryA&quot;) RespositoryA repository) {\r\n        this.repository = repository;\r\n    }\r\n}\r\n```\r\n\r\nThe error message is:\r\n```\r\nio.micronaut.context.exceptions.NonUniqueBeanException: Multiple possible bean candidates found: [com.example.repository.$RepositoryA$Definition$Intercepted, com.example.repository.$RepositoryB$Definition$Intercepted]\r\n```\r\n\r\nCould this be related to the fact that i extend a base class instead of using interfaces?\r\n\r\nEvery solution that i found suggested to use the `@Named` annotations, so i have added them, but it still doesn&#39;t resolve my problem.\r\n\r\n*When i asked ChatGPT it started lying and suggested some imaginary @Type annotation :D*","title":"Prevent NonUniqueBeanException in Micronaut, even with using @Named annotation","body":"<p>Why does this code yield a io.micronaut.context.exceptions.NonUniqueBeanException?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class ObjectifyRepository&lt;T&gt; {\n}\n\n@Singleton\n@Named(&quot;repositoryA&quot;)\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\n    public RepositoryA() {\n        super(EntityA.class);\n    }\n}\n\n@Singleton\n@Named(&quot;repositoryB&quot;)\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\n\n    public RepositoryB() {\n        super(EntityB.class);\n    }\n}\n\n@Singleton\npublic class MyService {\n    private final RespositoryA repository;\n\n    public MyService(@Named(&quot;repositoryA&quot;) RespositoryA repository) {\n        this.repository = repository;\n    }\n}\n</code></pre>\n<p>The error message is:</p>\n<pre><code>io.micronaut.context.exceptions.NonUniqueBeanException: Multiple possible bean candidates found: [com.example.repository.$RepositoryA$Definition$Intercepted, com.example.repository.$RepositoryB$Definition$Intercepted]\n</code></pre>\n<p>Could this be related to the fact that i extend a base class instead of using interfaces?</p>\n<p>Every solution that i found suggested to use the <code>@Named</code> annotations, so i have added them, but it still doesn't resolve my problem.</p>\n<p><em>When i asked ChatGPT it started lying and suggested some imaginary @Type annotation :D</em></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689993677,"creation_date":1689993677,"answer_id":76742100,"question_id":76738588,"body_markdown":"You can disable Spring security in your test if that&#39;s not what the test is supposed to check:\r\n\r\n```java\r\n@Import({DisableSpringSecurityTestConfiguration.class})\r\npublic class YourTest {\r\n\r\n   @Test\r\n   void testSomething() {\r\n      // ...\r\n   }\r\n}\r\n\r\n@Configuration\r\n@EnableAutoConfiguration(exclude = {\r\n  // disable Spring Security auto conf to get endpoint calls in unit tests executed\r\n  SecurityAutoConfiguration.class,\r\n  ManagementWebSecurityAutoConfiguration.class\r\n})\r\npublic class DisableSpringSecurtiyTestConfiguration {\r\n\r\n}\r\n```\r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>You can disable Spring security in your test if that's not what the test is supposed to check:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Import({DisableSpringSecurityTestConfiguration.class})\npublic class YourTest {\n\n   @Test\n   void testSomething() {\n      // ...\n   }\n}\n\n@Configuration\n@EnableAutoConfiguration(exclude = {\n  // disable Spring Security auto conf to get endpoint calls in unit tests executed\n  SecurityAutoConfiguration.class,\n  ManagementWebSecurityAutoConfiguration.class\n})\npublic class DisableSpringSecurtiyTestConfiguration {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5759607,"reputation":78,"user_id":4546430,"display_name":"Herisson-88"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690293792,"creation_date":1690284718,"answer_id":76762283,"question_id":76738588,"body_markdown":"Seems issue of parallel call between asynchrone call\r\n```\r\n    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\r\n    }, res -&gt; {\r\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\r\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\r\n    });\r\n```\r\nand next call which is execute in parallel\r\n```\r\n    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\r\n```\r\n\r\nWhy not use restTemplate.getForEntity the 1st time to avoid parallel call and this issue of TestRestTemplate ?\r\n\r\nBut in fact to really analyse need all the Test class, especially the initialisation of TestRestTemplate\r\n   \r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>Seems issue of parallel call between asynchrone call</p>\n<pre><code>    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\n    }, res -&gt; {\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\n    });\n</code></pre>\n<p>and next call which is execute in parallel</p>\n<pre><code>    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\n</code></pre>\n<p>Why not use restTemplate.getForEntity the 1st time to avoid parallel call and this issue of TestRestTemplate ?</p>\n<p>But in fact to really analyse need all the Test class, especially the initialisation of TestRestTemplate</p>\n"}],"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1690293792,"creation_date":1689947392,"question_id":76738588,"body_markdown":"I have some strange issue with my old tests after adding spring security configuration.\r\n\r\nSo, let&#39;s start from beginning to my already existing project I have added Spring Security and `JWT Filter`. The reason for that is that every request from UI, we are expecting JWT token and what we want to allow only users with given roles to access given endpoints. \r\n\r\n**Configuration code:**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n\tprivate final UserInfoHeaderFilter userInfoHeaderFilter;\r\n\r\n\tpublic SecurityConfig(UserInfoHeaderFilter userInfoHeaderFilter) {\r\n\t\tthis.userInfoHeaderFilter = userInfoHeaderFilter;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http\r\n\t\t\t\t.addFilterBefore(userInfoHeaderFilter, BasicAuthenticationFilter.class)\r\n\t\t\t\t.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t\t\t\t.requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\r\n\t\t\t\t\t\t.anyRequest().hasAnyAuthority(&quot;SUPER_ADMIN&quot;)\r\n\t\t\t\t)\r\n\t\t\t\t.csrf().disable()\r\n\t\t\t\t.build();\r\n\t}\r\n}\r\n```\r\n\r\njust for example, I have changed it to have one role for each request.\r\n\r\n**JwtFilter code:**\r\n\r\n```\r\n@Slf4j\r\n@Component\r\npublic class UserInfoHeaderFilter extends OncePerRequestFilter {\r\n\r\n\tpublic static final String HEADER_NAME = &quot;Authorization&quot;;\r\n\r\n\tprivate static final String NO_USER = &quot;NO USER&quot;;\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, @NotNull HttpServletResponse response, @NotNull FilterChain filterChain) throws ServletException, IOException {\r\n\t\tString headerValue = request.getHeader(HEADER_NAME);\r\n\t\tif (headerValue != null &amp;&amp; headerValue.startsWith(&quot;Bearer &quot;)) {\r\n\t\t\tsetAuthenticationInSecurityContext(headerValue.substring(7));\r\n\t\t}\r\n\r\n\r\n\t\tfilterChain.doFilter(request, response);\r\n\t}\r\n\r\n\tprivate String setAuthenticationInSecurityContext(String token) {\r\n\t\ttry {\r\n\t\t\tDecodedJWT jwt = JWT.decode(token);\r\n\t\t\tString username = jwt.getClaim(&quot;preferred_username&quot;).asString();\r\n\t\t\tList&lt;String&gt; roles = (List&lt;String&gt;) jwt.getClaim(&quot;realm_access&quot;).asMap().get(&quot;roles&quot;);\r\n\r\n\t\t\tList&lt;GrantedAuthority&gt; authorities = roles.stream()\r\n\t\t\t\t\t.map(SimpleGrantedAuthority::new)\r\n\t\t\t\t\t.collect(Collectors.toList());\r\n\r\n\t\t\tAuthentication authentication = new UsernamePasswordAuthenticationToken(username, null, authorities);\r\n\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n\t\t\tlog.debug(&quot;User [{}] has been logged&quot;, username);\r\n\r\n\t\t\treturn username;\r\n\t\t} catch (JWTDecodeException e) {\r\n\t\t\tlog.error(&quot;Failed to decode JWT&quot;, e);\r\n\t\t\treturn NO_USER;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAs you can probably see, in this filter we are only getting roles/username from jwt and putting them in `securityContext`. So no verification of jwt is needed.\r\n\r\nAnd locally everything seems to be working correctly. But integration tests are failing (I have added to restTemplate interceptor, which will add every request correct jwt token)\r\n\r\nThis is simplified test, which is using `TestRestTemplate` \r\n```\r\n@BeforeEach\r\nvoid setup() {\r\n\tClientHttpRequestInterceptor interceptor = (request, body, execution) -&gt; {\r\n\t\trequest.getHeaders().add(&quot;Authorization&quot;, BEARER + TEST_JWT_TOKEN);\r\n\t\treturn execution.execute(request, body);\r\n\t};\r\n\trestTemplate.getRestTemplate().setInterceptors(Collections.singletonList(interceptor));\r\n}\r\n\r\n@Test\r\nvoid stupidTest() {\r\n\trestTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\r\n\t}, res -&gt; {\r\n\t\tAssertions.assertTrue(res.getStatusCode().is2xxSuccessful());\r\n\t\treturn IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\r\n\t});\r\n\r\n\t//Thread.sleep(10000);\r\n\r\n\tAuthorRequest payload = AuthorRequest.builder()\r\n\t\t\t.name(&quot;TEST&quot;)\r\n\t\t\t.labels(Collections.emptySet())\r\n\t\t\t.build();\r\n\r\n\trestTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\r\n}\r\n```\r\n\r\nIt is failing when second request is sent. When debugging code, it is never entering `author` endpoint nor `filter` for second time, but when adding `Thread.sleep(1000);` between those two calls it starts working correctly. \r\n\r\nIn logs I can see \r\n\r\n&gt; 2023-07-21 15:45:20 5.14.0 SEVERE Servlet.service() for servlet\r\n&gt; [dispatcherServlet] in context with path [] threw exception [Unable to\r\n&gt; handle the Spring Security Exception because the response is already\r\n&gt; committed.] with root cause \r\n&gt; org.springframework.security.access.AccessDeniedException: Access\r\n&gt; Denied\r\n&gt; \r\n&gt; 2023-07-21 15:45:20 5.14.0 SEVERE Exception Processing\r\n&gt; ErrorPage[errorCode=0, location=/error] \r\n&gt; jakarta.servlet.ServletException: Unable to handle the Spring Security\r\n&gt; Exception because the response is already committed.\r\n&gt; \r\n&gt; I/O error on POST request for &quot;http://localhost:61916/v1/author&quot;:\r\n&gt; localhost:61916 failed to respond\r\n&gt; org.springframework.web.client.ResourceAccessException: I/O error on\r\n&gt; POST request for &quot;http://localhost:61916/v1/author&quot;: localhost:61916\r\n&gt; failed to respond\r\n\r\nWhich seems to be saying that second request was denied, but even though why it is working correctly, with sleep? Hmm. Removing Spring Security Configuration make test works again.\r\n\r\n\r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>I have some strange issue with my old tests after adding spring security configuration.</p>\n<p>So, let's start from beginning to my already existing project I have added Spring Security and <code>JWT Filter</code>. The reason for that is that every request from UI, we are expecting JWT token and what we want to allow only users with given roles to access given endpoints.</p>\n<p><strong>Configuration code:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final UserInfoHeaderFilter userInfoHeaderFilter;\n\n    public SecurityConfig(UserInfoHeaderFilter userInfoHeaderFilter) {\n        this.userInfoHeaderFilter = userInfoHeaderFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .addFilterBefore(userInfoHeaderFilter, BasicAuthenticationFilter.class)\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\n                        .anyRequest().hasAnyAuthority(&quot;SUPER_ADMIN&quot;)\n                )\n                .csrf().disable()\n                .build();\n    }\n}\n</code></pre>\n<p>just for example, I have changed it to have one role for each request.</p>\n<p><strong>JwtFilter code:</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class UserInfoHeaderFilter extends OncePerRequestFilter {\n\n    public static final String HEADER_NAME = &quot;Authorization&quot;;\n\n    private static final String NO_USER = &quot;NO USER&quot;;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, @NotNull HttpServletResponse response, @NotNull FilterChain filterChain) throws ServletException, IOException {\n        String headerValue = request.getHeader(HEADER_NAME);\n        if (headerValue != null &amp;&amp; headerValue.startsWith(&quot;Bearer &quot;)) {\n            setAuthenticationInSecurityContext(headerValue.substring(7));\n        }\n\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String setAuthenticationInSecurityContext(String token) {\n        try {\n            DecodedJWT jwt = JWT.decode(token);\n            String username = jwt.getClaim(&quot;preferred_username&quot;).asString();\n            List&lt;String&gt; roles = (List&lt;String&gt;) jwt.getClaim(&quot;realm_access&quot;).asMap().get(&quot;roles&quot;);\n\n            List&lt;GrantedAuthority&gt; authorities = roles.stream()\n                    .map(SimpleGrantedAuthority::new)\n                    .collect(Collectors.toList());\n\n            Authentication authentication = new UsernamePasswordAuthenticationToken(username, null, authorities);\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n            log.debug(&quot;User [{}] has been logged&quot;, username);\n\n            return username;\n        } catch (JWTDecodeException e) {\n            log.error(&quot;Failed to decode JWT&quot;, e);\n            return NO_USER;\n        }\n    }\n}\n</code></pre>\n<p>As you can probably see, in this filter we are only getting roles/username from jwt and putting them in <code>securityContext</code>. So no verification of jwt is needed.</p>\n<p>And locally everything seems to be working correctly. But integration tests are failing (I have added to restTemplate interceptor, which will add every request correct jwt token)</p>\n<p>This is simplified test, which is using <code>TestRestTemplate</code></p>\n<pre><code>@BeforeEach\nvoid setup() {\n    ClientHttpRequestInterceptor interceptor = (request, body, execution) -&gt; {\n        request.getHeaders().add(&quot;Authorization&quot;, BEARER + TEST_JWT_TOKEN);\n        return execution.execute(request, body);\n    };\n    restTemplate.getRestTemplate().setInterceptors(Collections.singletonList(interceptor));\n}\n\n@Test\nvoid stupidTest() {\n    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\n    }, res -&gt; {\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\n    });\n\n    //Thread.sleep(10000);\n\n    AuthorRequest payload = AuthorRequest.builder()\n            .name(&quot;TEST&quot;)\n            .labels(Collections.emptySet())\n            .build();\n\n    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\n}\n</code></pre>\n<p>It is failing when second request is sent. When debugging code, it is never entering <code>author</code> endpoint nor <code>filter</code> for second time, but when adding <code>Thread.sleep(1000);</code> between those two calls it starts working correctly.</p>\n<p>In logs I can see</p>\n<blockquote>\n<p>2023-07-21 15:45:20 5.14.0 SEVERE Servlet.service() for servlet\n[dispatcherServlet] in context with path [] threw exception [Unable to\nhandle the Spring Security Exception because the response is already\ncommitted.] with root cause\norg.springframework.security.access.AccessDeniedException: Access\nDenied</p>\n<p>2023-07-21 15:45:20 5.14.0 SEVERE Exception Processing\nErrorPage[errorCode=0, location=/error]\njakarta.servlet.ServletException: Unable to handle the Spring Security\nException because the response is already committed.</p>\n<p>I/O error on POST request for &quot;http://localhost:61916/v1/author&quot;:\nlocalhost:61916 failed to respond\norg.springframework.web.client.ResourceAccessException: I/O error on\nPOST request for &quot;http://localhost:61916/v1/author&quot;: localhost:61916\nfailed to respond</p>\n</blockquote>\n<p>Which seems to be saying that second request was denied, but even though why it is working correctly, with sleep? Hmm. Removing Spring Security Configuration make test works again.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690275231,"creation_date":1690275231,"answer_id":76761021,"question_id":76760954,"body_markdown":"Yes, this is a standard problem when mapping JSON to Java DTOs. JSON knows the difference between a key that&#39;s just not there (`{}`), and `{&quot;key&quot;=null}` property. In Java, both those versions will map to `key = null`. Your PUT endpoint ignores `null` values, so that you can PUT partial updates and leave other fields untouched. That&#39;s what the code you posted is doing:\r\n\r\n```\r\ncustomerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());\r\n```\r\n\r\nIf the posted value is `null`, it uses the value from the (existing) entity instead. A more readable variant would be:\r\n\r\n```\r\nif (customerDto.getNotificationId() != null) {\r\n  customerEntity.setNotificationId(customerDto.getNotificationId());\r\n}\r\n```\r\n\r\nHow you solve this problem is up to you. There are several options, including but not limited to:\r\n\r\n* Create a PATCH endpoint in addition to the PUT endpoint, which has different semantics regarding how `null` values are handled\r\n* Parse the incoming JSON in a different way, so that you know whether the client specificied an explicit `null` or just omitted the property.\r\n\r\n","title":"unable to update a value inside an entity to null using PUT request","body":"<p>Yes, this is a standard problem when mapping JSON to Java DTOs. JSON knows the difference between a key that's just not there (<code>{}</code>), and <code>{&quot;key&quot;=null}</code> property. In Java, both those versions will map to <code>key = null</code>. Your PUT endpoint ignores <code>null</code> values, so that you can PUT partial updates and leave other fields untouched. That's what the code you posted is doing:</p>\n<pre><code>customerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());\n</code></pre>\n<p>If the posted value is <code>null</code>, it uses the value from the (existing) entity instead. A more readable variant would be:</p>\n<pre><code>if (customerDto.getNotificationId() != null) {\n  customerEntity.setNotificationId(customerDto.getNotificationId());\n}\n</code></pre>\n<p>How you solve this problem is up to you. There are several options, including but not limited to:</p>\n<ul>\n<li>Create a PATCH endpoint in addition to the PUT endpoint, which has different semantics regarding how <code>null</code> values are handled</li>\n<li>Parse the incoming JSON in a different way, so that you know whether the client specificied an explicit <code>null</code> or just omitted the property.</li>\n</ul>\n"}],"owner":{"account_id":25882721,"reputation":21,"user_id":19611476,"display_name":"Abdullaah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690293681,"creation_date":1690274726,"question_id":76760954,"body_markdown":"I have a method for updating customer Entity  using PUT request in my Java Spring boot project. There is a field notificationId inside customer entity. Below is a statement from this method.  \r\n```\r\ncustomerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());  \r\n```\r\nThis statement works as expected but if the customer once updates notificationId to eg: `12345` and then again wants to update to `null`, he is not able to update to `null`. I tried some changes in the logic, but no use. Kindly suggest changes.","title":"unable to update a value inside an entity to null using PUT request","body":"<p>I have a method for updating customer Entity  using PUT request in my Java Spring boot project. There is a field notificationId inside customer entity. Below is a statement from this method.</p>\n<pre><code>customerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());  \n</code></pre>\n<p>This statement works as expected but if the customer once updates notificationId to eg: <code>12345</code> and then again wants to update to <code>null</code>, he is not able to update to <code>null</code>. I tried some changes in the logic, but no use. Kindly suggest changes.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1646150661,"post_id":71310532,"comment_id":126049894,"body_markdown":"Does this answer your question? [Error &quot;Source option 5 is no longer supported. Use 6 or later&quot; on Maven compile](https://stackoverflow.com/questions/53034953/error-source-option-5-is-no-longer-supported-use-6-or-later-on-maven-compile)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53034953/error-source-option-5-is-no-longer-supported-use-6-or-later-on-maven-compile\">Error &quot;Source option 5 is no longer supported. Use 6 or later&quot; on Maven compile</a>"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":0,"creation_date":1651288398,"post_id":71310532,"comment_id":127334909,"body_markdown":"It was helpful.  It explained how to fix the problem, but didn&#39;t explain why the problem occurred.   I tracked it down and provided an answer.  Thanks for the pointer!","body":"It was helpful.  It explained how to fix the problem, but didn&#39;t explain why the problem occurred.   I tracked it down and provided an answer.  Thanks for the pointer!"}],"answers":[{"tags":[],"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651286998,"creation_date":1651286998,"answer_id":72065336,"question_id":71310532,"body_markdown":"The problem occurs because the maven plugin (maven-compiler-plugin:3.1) passes the arguments `-source 1.5 -target 1.5` to the JDK 17 java compiler.\r\n\r\nThe JDK 17 compiler doesn&#39;t support generating code for the Java 1.5 runtime so the error is produced as shown:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile \r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n\r\n```\r\n\r\nYou can see this if you use the `-X` debug flag when running the maven command as shown below:\r\n\r\n```\r\nmvn -X clean install\r\n. . . lots of output omitted . . .\r\n[DEBUG] Command line options:\r\n[DEBUG] -target 1.5 -source 1.5 -d target\\classes -classpath target\\classes; -sourcepath src\\main\\java; -g -nowarn\r\n. . .\r\n```\r\n\r\n\r\nThe fix is to modify the `pom.xml` file so that the maven-compiler-plugin will pass options like `-source 1.8 -target 1.8` (or some higher number) so that the JDK 17 can produce code that is targeted for a version of the JDK that the JDK 17 compiler supports.\r\n\r\nFor example, to use JDK 1.8, you would add the following to your `pom.xml` file.\r\n```\r\n&lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\nThe question and answer https://stackoverflow.com/a/60344341/3281336 also might add some more information if you are interested.\r\n\r\nNOTE: The 3.1 version of the maven-compiler-plugin is very old (released Apr 2013) based on https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin so back then, Java version 1.5 was a viable choice.\r\n\r\n","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>The problem occurs because the maven plugin (maven-compiler-plugin:3.1) passes the arguments <code>-source 1.5 -target 1.5</code> to the JDK 17 java compiler.</p>\n<p>The JDK 17 compiler doesn't support generating code for the Java 1.5 runtime so the error is produced as shown:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile \n[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n\n</code></pre>\n<p>You can see this if you use the <code>-X</code> debug flag when running the maven command as shown below:</p>\n<pre><code>mvn -X clean install\n. . . lots of output omitted . . .\n[DEBUG] Command line options:\n[DEBUG] -target 1.5 -source 1.5 -d target\\classes -classpath target\\classes; -sourcepath src\\main\\java; -g -nowarn\n. . .\n</code></pre>\n<p>The fix is to modify the <code>pom.xml</code> file so that the maven-compiler-plugin will pass options like <code>-source 1.8 -target 1.8</code> (or some higher number) so that the JDK 17 can produce code that is targeted for a version of the JDK that the JDK 17 compiler supports.</p>\n<p>For example, to use JDK 1.8, you would add the following to your <code>pom.xml</code> file.</p>\n<pre><code>&lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>The question and answer <a href=\"https://stackoverflow.com/a/60344341/3281336\">https://stackoverflow.com/a/60344341/3281336</a> also might add some more information if you are interested.</p>\n<p>NOTE: The 3.1 version of the maven-compiler-plugin is very old (released Apr 2013) based on <a href=\"https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin</a> so back then, Java version 1.5 was a viable choice.</p>\n"},{"tags":[],"owner":{"account_id":9718904,"reputation":11,"user_id":22077359,"display_name":"asn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690293679,"creation_date":1690293603,"answer_id":76763505,"question_id":71310532,"body_markdown":"It worked for me.\r\n\r\n```\r\n&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;!-- &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; --&gt;\r\n\t\t&lt;!-- &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; --&gt; \r\n\t\t&lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n\t&lt;/properties&gt;\r\n```","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>It worked for me.</p>\n<pre><code>&lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;!-- &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; --&gt;\n        &lt;!-- &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; --&gt; \n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72065336,"answer_count":2,"score":0,"last_activity_date":1690293679,"creation_date":1646147041,"question_id":71310532,"body_markdown":"When using the maven command to create a simple Maven project (with the latest versions of maven and java), I get the error:\r\n\r\n```\r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n```\r\n\r\n**So, what change is needed to fix this.**  Do I change the maven command or edit the pom.xml file afterwards?\r\n\r\n## To reproduce the error\r\n**First verify what versions of Java and Maven you are running.**\r\nAt the time of this question, I&#39;m using the latest versions of Maven and Java.\r\nMaven: 3.8.4 and Java 17.0.2&lt;br/&gt;\r\nBelow are details\r\n\r\n```\r\nmvn --version\r\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\r\nMaven home: D:\\p\\apache-maven-3.8.4\r\nJava version: 17.0.2, vendor: Oracle Corporation, runtime: D:\\p\\jdk-17.0.2\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\njava -version\r\njava version &quot;17.0.2&quot; 2022-01-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)\r\n```\r\n\r\n### Create the maven hello world-like program\r\nI used this command to create the Java maven sample program.\r\n```\r\nmvn archetype:generate -DgroupId=com.example -DartifactId=helloworld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\r\n```\r\n\r\nI found the following link which explains this in more detail (if needed).\r\nhttps://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/.\r\n\r\n### Build the code\r\nNext, build the code and observe the error.\r\n```\r\ncd helloworld\r\nmvn clean install\r\n[ERROR] COMPILATION ERROR :\r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n```\r\nNotice the **ERROR**s.\r\n\r\n**But, if I switch back to Java 8 (JDK 1.8) and run the maven build command, then the code compiles successfully.**  Below is the successful compile and the maven version and JDK version used that result in a successful compilation.\r\n\r\n```\r\nmvn clean install\r\n[INFO] BUILD SUCCESS\r\n\r\nmvn --version\r\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\r\nMaven home: D:\\p\\apache-maven-3.8.4\r\nJava version: 1.8.0_271, vendor: Oracle Corporation, runtime: D:\\p\\jdk1.8.0_271\\jre\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n```\r\n\r\n**My question is, how do I fix this?**  and **Why does this happen?**\r\n\r\n\r\n","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>When using the maven command to create a simple Maven project (with the latest versions of maven and java), I get the error:</p>\n<pre><code>[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n</code></pre>\n<p><strong>So, what change is needed to fix this.</strong>  Do I change the maven command or edit the pom.xml file afterwards?</p>\n<h2>To reproduce the error</h2>\n<p><strong>First verify what versions of Java and Maven you are running.</strong>\nAt the time of this question, I'm using the latest versions of Maven and Java.\nMaven: 3.8.4 and Java 17.0.2<br/>\nBelow are details</p>\n<pre><code>mvn --version\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\nMaven home: D:\\p\\apache-maven-3.8.4\nJava version: 17.0.2, vendor: Oracle Corporation, runtime: D:\\p\\jdk-17.0.2\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n\njava -version\njava version &quot;17.0.2&quot; 2022-01-18 LTS\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)\n</code></pre>\n<h3>Create the maven hello world-like program</h3>\n<p>I used this command to create the Java maven sample program.</p>\n<pre><code>mvn archetype:generate -DgroupId=com.example -DartifactId=helloworld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\n</code></pre>\n<p>I found the following link which explains this in more detail (if needed).\n<a href=\"https://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/\" rel=\"nofollow noreferrer\">https://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/</a>.</p>\n<h3>Build the code</h3>\n<p>Next, build the code and observe the error.</p>\n<pre><code>cd helloworld\nmvn clean install\n[ERROR] COMPILATION ERROR :\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n</code></pre>\n<p>Notice the <strong>ERROR</strong>s.</p>\n<p><strong>But, if I switch back to Java 8 (JDK 1.8) and run the maven build command, then the code compiles successfully.</strong>  Below is the successful compile and the maven version and JDK version used that result in a successful compilation.</p>\n<pre><code>mvn clean install\n[INFO] BUILD SUCCESS\n\nmvn --version\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\nMaven home: D:\\p\\apache-maven-3.8.4\nJava version: 1.8.0_271, vendor: Oracle Corporation, runtime: D:\\p\\jdk1.8.0_271\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n</code></pre>\n<p><strong>My question is, how do I fix this?</strong>  and <strong>Why does this happen?</strong></p>\n"},{"tags":["java","json","rest","jersey","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416759974,"post_id":27090833,"comment_id":42689106,"body_markdown":"I know this is a client side problem, but can you show the server application configuration","body":"I know this is a client side problem, but can you show the server application configuration"}],"answers":[{"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1690293379,"creation_date":1416761681,"answer_id":27091616,"question_id":27090833,"body_markdown":"I see you have two different provider dependencies `jersey-media-moxy` and `jersey-media-json-jackson`. I&#39;ve always had a problem with `Maps` with MOXy. I guess they don&#39;t play well. Seems you will need to use an adapter to make it play nice, as seen [here from Blaise Doughan](https://stackoverflow.com/a/11360732/2587435). \r\n\r\nThat being said, I requested (in the comments above) to see your Server side configuration, as MOXy will auto configure itself, and take precedence over the `jersey-media-json-jackson`. Why, I&#39;m not sure, this is just what I&#39;ve always experienced. So I&#39;m curious how the Server side didn&#39;t fail even before the response came back to the client. Unless you confgiure the `JacksonFeature` with the server application, in which you should have also configured it with the client. (This is only the case, because you also have MOXy dependency).\r\n\r\nAnyway, if you don&#39;t want to go through the hassle creating adapters, as seen in the link above, just get rid of the `jersey-media-moxy` dependency. `jersey-media-json-jackson` will also auto configure it feature. You should just use one or the other.\r\n\r\n----\r\n\r\n**As an aside:**\r\n\r\n`@Path(&quot;/getAllNews&quot;)`. Path segments should be nouns, unless they are controller resources, which normally perform some action, other than normal CRUD operations (e.g. `/register`). The HTTP method already consists of the verb to which each CRUD action should be performed.\r\n\r\n* **C**reate - POST\r\n* **R**etriecve - GET\r\n* **U**pdate = PUT\r\n* **D**elete - DELETE \r\n\r\nJust some semantics to consider :-)\r\n\r\n------\r\n\r\n**UPDATE**\r\n\r\nThe problem is with the `New` key. Jackson doesn&#39;t know how to deserialize this. Since you are willing to switch the key and value type, just change the `toString` to return the `name` in the `Term` class, and it should be OK.\r\n\r\n\r\n","title":"Jersey Error: MessageBodyReader not found for media type=application/json","body":"<p>I see you have two different provider dependencies <code>jersey-media-moxy</code> and <code>jersey-media-json-jackson</code>. I've always had a problem with <code>Maps</code> with MOXy. I guess they don't play well. Seems you will need to use an adapter to make it play nice, as seen <a href=\"https://stackoverflow.com/a/11360732/2587435\">here from Blaise Doughan</a>.</p>\n<p>That being said, I requested (in the comments above) to see your Server side configuration, as MOXy will auto configure itself, and take precedence over the <code>jersey-media-json-jackson</code>. Why, I'm not sure, this is just what I've always experienced. So I'm curious how the Server side didn't fail even before the response came back to the client. Unless you confgiure the <code>JacksonFeature</code> with the server application, in which you should have also configured it with the client. (This is only the case, because you also have MOXy dependency).</p>\n<p>Anyway, if you don't want to go through the hassle creating adapters, as seen in the link above, just get rid of the <code>jersey-media-moxy</code> dependency. <code>jersey-media-json-jackson</code> will also auto configure it feature. You should just use one or the other.</p>\n<hr />\n<p><strong>As an aside:</strong></p>\n<p><code>@Path(&quot;/getAllNews&quot;)</code>. Path segments should be nouns, unless they are controller resources, which normally perform some action, other than normal CRUD operations (e.g. <code>/register</code>). The HTTP method already consists of the verb to which each CRUD action should be performed.</p>\n<ul>\n<li><strong>C</strong>reate - POST</li>\n<li><strong>R</strong>etriecve - GET</li>\n<li><strong>U</strong>pdate = PUT</li>\n<li><strong>D</strong>elete - DELETE</li>\n</ul>\n<p>Just some semantics to consider :-)</p>\n<hr />\n<p><strong>UPDATE</strong></p>\n<p>The problem is with the <code>New</code> key. Jackson doesn't know how to deserialize this. Since you are willing to switch the key and value type, just change the <code>toString</code> to return the <code>name</code> in the <code>Term</code> class, and it should be OK.</p>\n"}],"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31652,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":27091616,"answer_count":1,"score":11,"last_activity_date":1690293379,"creation_date":1416757657,"question_id":27090833,"body_markdown":"i&#39;m trying to implement a small REST API using Jersey as framework, in principle the code worked fine but when I try to do a &#39;GET&#39; of a hash table, I get the following error:\r\n\r\n    nov 23, 2014 4:27:40 PM org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor aroundReadFrom\r\n\tGRAVE: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.JobRunShell - Job DEFAULT.testJob3 threw an unhandled Exception: \r\n\torg.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n\t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n    )\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n\t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\r\n\t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n\t1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.ErrorLogger - Job (DEFAULT.testJob3 threw an exception.\r\n\torg.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.]\r\n\t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:213)\r\n\t\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n\tCaused by: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n\t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n\t\tat org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:228)\r\n\t\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n\t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\r\n\t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n\t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n\t\t... 1 more\r\n\r\n\r\nThis is the problematic line:\r\n\r\n\t\tClient client = ClientBuilder.newClient();\r\n\t\t\r\n\t\tWebTarget targetGetAllNews = client.target(&quot;http://localhost:15000&quot;).path(&quot;news/getAllNews&quot;);\r\n\r\n\t\t\r\n    \tMap&lt;New, Term&gt; NewsAll = targetGetAllNews.request(\r\n\t\t\t\t MediaType.APPLICATION_JSON_TYPE).get(new GenericType&lt;Map&lt;New, Term&gt;&gt;(){});\r\n\r\n\r\nand this is how I implemented the service:\r\n\r\n\t@GET\r\n\t@Path(&quot;/getAllNews&quot;)\r\n\t@Produces(MediaType.APPLICATION_JSON)\r\n\tpublic Map&lt;New, Term&gt; getAllNews() {\r\n\t\treturn NewsCrawler.getNewAndTerm();\r\n\t}\r\n\r\npom.xml (maven dependencies)\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;upf.dad.proyecto&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;JAXRS-proyecto&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;dependencies&gt;\r\n\t&lt;!-- Rome RSS and Atom utilities @ http://rometools.github.io/rome/ --&gt;        \r\n\t&lt;dependency&gt;\r\n\t        &lt;groupId&gt;rome&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;rome&lt;/artifactId&gt;             \r\n\t        &lt;version&gt;1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- jsoup HTML parser library @ http://jsoup.org/ --&gt;         \r\n\t&lt;dependency&gt;             \r\n\t\t\t&lt;groupId&gt;org.jsoup&lt;/groupId&gt;             \r\n\t\t\t&lt;artifactId&gt;jsoup&lt;/artifactId&gt;             \r\n\t\t\t&lt;version&gt;1.8.1&lt;/version&gt;      \t\t   \r\n\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.twitter4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-container-jdk-http&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;/project&gt;\r\n\r\n\r\nServer side configuration:\r\n\r\n    public class NewsCrawlerRestServer {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tURI baseUri = UriBuilder.fromUri(&quot;http://localhost/&quot;).port(15000).build();\r\n\t\tResourceConfig config = new ResourceConfig(NewsCrawlerServices.class, HotTopicDetectorServices.class);\r\n\t\tconfig.register(JacksonFeature.class);\r\n\t\tHttpServer server = JdkHttpServerFactory.createHttpServer(baseUri, config);\r\n\t\tSystem.out.println(&quot;Server started...&quot;);\r\n\t\t\r\n\t\t}\r\n    }\r\n\r\n\r\nError registering Jackson in the client:\r\n\r\n    org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ws.rs.ProcessingException: Error reading entity from input stream.]\r\n    \t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:213)\r\n    \t\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n    \tCaused by: javax.ws.rs.ProcessingException: Error reading entity from input stream.\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:866)\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n    \t\tat org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:228)\r\n    \t\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n    \t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:112)\r\n    \t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n    \t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n    \t\t... 1 more\r\n    \tCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class upf.dad.proyecto.New]\r\n    \t\tat com.fasterxml.jackson.databind.deser.DeserializerCache._handleUnknownKeyDeserializer(DeserializerCache.java:580)\r\n    \t\tat com.fasterxml.jackson.databind.deser.DeserializerCache.findKeyDeserializer(DeserializerCache.java:170)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.findKeyDeserializer(DeserializationContext.java:404)\r\n    \t\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.createContextual(MapDeserializer.java:232)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.handleSecondaryContextualization(DeserializationContext.java:572)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:386)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader._findRootDeserializer(ObjectReader.java:1380)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1228)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:677)\r\n    \t\tat com.fasterxml.jackson.jaxrs.base.ProviderBase.readFrom(ProviderBase.java:777)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.invokeReadFrom(ReaderInterceptorExecutor.java:264)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:234)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n    \t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\r\n\r\n\r\nNew Class:\r\n\r\n    package upf.dad.proyecto;\r\n\r\n    import java.util.Date;\r\n\r\n    public class New {\r\n\r\n\tprivate String tittle;\r\n\tprivate String description;\r\n\tprivate Date date;\r\n\tprivate String link;\r\n\t\r\n\tpublic New(){\r\n\r\n\t}\r\n\t\r\n\tpublic New(String t, String d, Date date, String l){\r\n\t\tthis.tittle = t;\r\n\t\tthis.description = d;\r\n\t\tthis.date = date;\r\n\t\tthis.link = l;\r\n\t}\r\n\r\n\tpublic String getTittle() {\r\n\t\treturn tittle;\r\n\t}\r\n\r\n\tpublic void setTittle(String tittle) {\r\n\t\tthis.tittle = tittle;\r\n\t}\r\n\r\n\tpublic String getDescription() {\r\n\t\treturn description;\r\n\t}\r\n\r\n\tpublic void setDescription(String description) {\r\n\t\tthis.description = description;\r\n\t}\r\n\r\n\tpublic Date getDate() {\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic void setDate(Date date) {\r\n\t\tthis.date = date;\r\n\t}\r\n\r\n\tpublic String getLink() {\r\n\t\treturn link;\r\n\t}\r\n\r\n\tpublic void setLink(String link) {\r\n\t\tthis.link = link;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;New [tittle=&quot; + tittle + &quot;, description=&quot; + description\r\n\t\t\t\t+ &quot;, date=&quot; + date + &quot;, link=&quot; + link + &quot;]&quot;;\r\n\t}\r\n\t\r\n\t\r\n    }\r\n\r\n\r\nTerm class:\r\n\r\n    package upf.dad.proyecto;\r\n\r\n    public class Term {\r\n\r\n\tprivate String word;\r\n\t\r\n\tpublic Term(){\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic Term(String word){\r\n\t\tthis.word = word;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic String getWord(){\r\n\t\treturn word;\r\n\t}\r\n\t\r\n\tpublic void setWord(String _word){\r\n\t\tword = _word;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Termino =&quot; + word + &quot;]&quot;;\r\n\t}\r\n    }\r\n\r\ncan someone help me please to return the map?\r\n","title":"Jersey Error: MessageBodyReader not found for media type=application/json","body":"<p>i'm trying to implement a small REST API using Jersey as framework, in principle the code worked fine but when I try to do a 'GET' of a hash table, I get the following error:</p>\n\n<pre><code>nov 23, 2014 4:27:40 PM org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor aroundReadFrom\nGRAVE: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.JobRunShell - Job DEFAULT.testJob3 threw an unhandled Exception: \norg.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n    at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n    at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\n    at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.ErrorLogger - Job (DEFAULT.testJob3 threw an exception.\norg.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.]\n    at org.quartz.core.JobRunShell.run(JobRunShell.java:213)\n    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\nCaused by: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n    at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n    at org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\n    at org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\n    at org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\n    at org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:228)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\n    at org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n    at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\n    at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n    at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n    ... 1 more\n</code></pre>\n\n<p>This is the problematic line:</p>\n\n<pre><code>    Client client = ClientBuilder.newClient();\n\n    WebTarget targetGetAllNews = client.target(\"http://localhost:15000\").path(\"news/getAllNews\");\n\n\n    Map&lt;New, Term&gt; NewsAll = targetGetAllNews.request(\n             MediaType.APPLICATION_JSON_TYPE).get(new GenericType&lt;Map&lt;New, Term&gt;&gt;(){});\n</code></pre>\n\n<p>and this is how I implemented the service:</p>\n\n<pre><code>@GET\n@Path(\"/getAllNews\")\n@Produces(MediaType.APPLICATION_JSON)\npublic Map&lt;New, Term&gt; getAllNews() {\n    return NewsCrawler.getNewAndTerm();\n}\n</code></pre>\n\n<p>pom.xml (maven dependencies)</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;upf.dad.proyecto&lt;/groupId&gt;\n&lt;artifactId&gt;JAXRS-proyecto&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;dependencies&gt;\n&lt;!-- Rome RSS and Atom utilities @ http://rometools.github.io/rome/ --&gt;        \n&lt;dependency&gt;\n        &lt;groupId&gt;rome&lt;/groupId&gt;\n        &lt;artifactId&gt;rome&lt;/artifactId&gt;             \n        &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- jsoup HTML parser library @ http://jsoup.org/ --&gt;         \n&lt;dependency&gt;             \n        &lt;groupId&gt;org.jsoup&lt;/groupId&gt;             \n        &lt;artifactId&gt;jsoup&lt;/artifactId&gt;             \n        &lt;version&gt;1.8.1&lt;/version&gt;               \n&lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n        &lt;artifactId&gt;quartz&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.twitter4j&lt;/groupId&gt;\n        &lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;\n        &lt;version&gt;4.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-container-jdk-http&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n        &lt;version&gt;2.13&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Server side configuration:</p>\n\n<pre><code>public class NewsCrawlerRestServer {\n\npublic static void main(String[] args) throws IOException {\n\n    URI baseUri = UriBuilder.fromUri(\"http://localhost/\").port(15000).build();\n    ResourceConfig config = new ResourceConfig(NewsCrawlerServices.class, HotTopicDetectorServices.class);\n    config.register(JacksonFeature.class);\n    HttpServer server = JdkHttpServerFactory.createHttpServer(baseUri, config);\n    System.out.println(\"Server started...\");\n\n    }\n}\n</code></pre>\n\n<p>Error registering Jackson in the client:</p>\n\n<pre><code>org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ws.rs.ProcessingException: Error reading entity from input stream.]\n        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)\n        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\n    Caused by: javax.ws.rs.ProcessingException: Error reading entity from input stream.\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:866)\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n        at org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\n        at org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\n        at org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\n        at org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:228)\n        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\n        at org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\n        at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\n        at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n        at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:112)\n        at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n        ... 1 more\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class upf.dad.proyecto.New]\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._handleUnknownKeyDeserializer(DeserializerCache.java:580)\n        at com.fasterxml.jackson.databind.deser.DeserializerCache.findKeyDeserializer(DeserializerCache.java:170)\n        at com.fasterxml.jackson.databind.DeserializationContext.findKeyDeserializer(DeserializationContext.java:404)\n        at com.fasterxml.jackson.databind.deser.std.MapDeserializer.createContextual(MapDeserializer.java:232)\n        at com.fasterxml.jackson.databind.DeserializationContext.handleSecondaryContextualization(DeserializationContext.java:572)\n        at com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:386)\n        at com.fasterxml.jackson.databind.ObjectReader._findRootDeserializer(ObjectReader.java:1380)\n        at com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1228)\n        at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:677)\n        at com.fasterxml.jackson.jaxrs.base.ProviderBase.readFrom(ProviderBase.java:777)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.invokeReadFrom(ReaderInterceptorExecutor.java:264)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:234)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n        at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n</code></pre>\n\n<p>New Class:</p>\n\n<pre><code>package upf.dad.proyecto;\n\nimport java.util.Date;\n\npublic class New {\n\nprivate String tittle;\nprivate String description;\nprivate Date date;\nprivate String link;\n\npublic New(){\n\n}\n\npublic New(String t, String d, Date date, String l){\n    this.tittle = t;\n    this.description = d;\n    this.date = date;\n    this.link = l;\n}\n\npublic String getTittle() {\n    return tittle;\n}\n\npublic void setTittle(String tittle) {\n    this.tittle = tittle;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic Date getDate() {\n    return date;\n}\n\npublic void setDate(Date date) {\n    this.date = date;\n}\n\npublic String getLink() {\n    return link;\n}\n\npublic void setLink(String link) {\n    this.link = link;\n}\n\n@Override\npublic String toString() {\n    return \"New [tittle=\" + tittle + \", description=\" + description\n            + \", date=\" + date + \", link=\" + link + \"]\";\n}\n\n\n}\n</code></pre>\n\n<p>Term class:</p>\n\n<pre><code>package upf.dad.proyecto;\n\npublic class Term {\n\nprivate String word;\n\npublic Term(){\n\n}\n\npublic Term(String word){\n    this.word = word;\n\n}\n\npublic String getWord(){\n    return word;\n}\n\npublic void setWord(String _word){\n    word = _word;\n}\n\n@Override\npublic String toString() {\n    return \"Termino =\" + word + \"]\";\n}\n}\n</code></pre>\n\n<p>can someone help me please to return the map?</p>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1690291965,"post_id":76763237,"comment_id":135330703,"body_markdown":"What have you tried? Why didn&#39;t it work? Show us the relevant code and any error messages.","body":"What have you tried? Why didn&#39;t it work? Show us the relevant code and any error messages."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690292807,"creation_date":1690292269,"answer_id":76763299,"question_id":76763237,"body_markdown":"You are trying to parse a `List&lt;JobSeeker&gt;`, while your JSON is an *object* with a `data` field that *contains* (what I think is) a `List&lt;JobSeeker&gt;`. So make another wrapper object and parse that instead:\r\n\r\n```\r\nclass Data {\r\n  // constructor, getter/setter and Jackson annotations omitted\r\n  List&lt;JobSeeker&gt; data;\r\n}\r\n```\r\n\r\nthen change the parsing: `objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;Data&gt;(){});`","title":"Getting map from a JSON object with an array using Jackson","body":"<p>You are trying to parse a <code>List&lt;JobSeeker&gt;</code>, while your JSON is an <em>object</em> with a <code>data</code> field that <em>contains</em> (what I think is) a <code>List&lt;JobSeeker&gt;</code>. So make another wrapper object and parse that instead:</p>\n<pre><code>class Data {\n  // constructor, getter/setter and Jackson annotations omitted\n  List&lt;JobSeeker&gt; data;\n}\n</code></pre>\n<p>then change the parsing: <code>objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;Data&gt;(){});</code></p>\n"}],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763299,"answer_count":1,"score":0,"last_activity_date":1690292807,"creation_date":1690291856,"question_id":76763237,"body_markdown":"I&#39;m trying to de-serialize a JSON String that contains an array and multiple levels down. I just want the map of the &quot;attributes&quot; property and the &quot;id&quot;. Here is an example:\r\n\r\n    {\r\n    \t&quot;data&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;id&quot;: &quot;3252&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;job_seekers&quot;,\r\n    \t\t\t&quot;attributes&quot;: {\r\n    \t\t\t\t&quot;first_name&quot;: &quot;nathan&quot;,\r\n    \t\t\t\t&quot;last_name&quot;: &quot;taylor&quot;,\r\n    \t\t\t\t&quot;full_name&quot;: &quot;nathan taylor&quot;,\r\n    \t\t\t\t&quot;email&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone_iso2&quot;: &quot;CA&quot;,\r\n    \t\t\t\t&quot;date_of_birth&quot;: null,\r\n    \t\t\t\t&quot;summary&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;created_at&quot;: &quot;2023-01-03T17:34:57+00:00&quot;,\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;2023-04-21T19:16:05+00:00&quot;,\r\n    \t\t\t\t&quot;locale&quot;: &quot;en&quot;,\r\n    \t\t\t\t&quot;channel&quot;: &quot;web_traffic_referral&quot;,\r\n    \t\t\t\t&quot;channel_source&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;pipeline_source&quot;: &quot;self_registered&quot;,\r\n    \t\t\t\t&quot;address1&quot;: null,\r\n    \t\t\t\t&quot;address2&quot;: null,\r\n    \t\t\t\t&quot;town&quot;: null,\r\n    \t\t\t\t&quot;country&quot;: null,\r\n    \t\t\t\t&quot;postcode&quot;: null\r\n    \t\t\t},\r\n    \t\t\t&quot;relationships&quot;: {\r\n    \t\t\t\t&quot;answers&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;custom_attributes&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;comments&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;id&quot;: &quot;26346&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;job_seekers&quot;,\r\n    \t\t\t&quot;attributes&quot;: {\r\n    \t\t\t\t&quot;first_name&quot;: &quot;spencer&quot;,\r\n    \t\t\t\t&quot;last_name&quot;: &quot;gordon&quot;,\r\n    \t\t\t\t&quot;full_name&quot;: &quot;spencer gordon&quot;,\r\n    \t\t\t\t&quot;email&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone_iso2&quot;: &quot;US&quot;,\r\n    \t\t\t\t&quot;date_of_birth&quot;: null,\r\n    \t\t\t\t&quot;summary&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;created_at&quot;: &quot;2023-01-06T21:52:40+00:00&quot;,\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;2023-04-21T19:16:43+00:00&quot;,\r\n    \t\t\t\t&quot;locale&quot;: &quot;en&quot;,\r\n    \t\t\t\t&quot;channel&quot;: &quot;direct&quot;,\r\n    \t\t\t\t&quot;channel_source&quot;: null,\r\n    \t\t\t\t&quot;pipeline_source&quot;: &quot;self_registered&quot;,\r\n    \t\t\t\t&quot;address1&quot;: null,\r\n    \t\t\t\t&quot;address2&quot;: null,\r\n    \t\t\t\t&quot;town&quot;: null,\r\n    \t\t\t\t&quot;country&quot;: null,\r\n    \t\t\t\t&quot;postcode&quot;: null\r\n    \t\t\t},\r\n    \t\t\t&quot;relationships&quot;: {\r\n    \t\t\t\t&quot;answers&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;custom_attributes&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;comments&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t],\r\n    \t&quot;meta&quot;: {}\r\n    }\r\n\r\nThis is what I&#39;ve tried:\r\n\r\n\r\n      ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n    \r\n                    List&lt;JobSeeker&gt; myObjects = objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;List&lt;JobSeeker&gt;&gt;(){});\r\n    \r\n                    for (JobSeeker itr : myObjects)\r\n                    {\r\n                        System.out.println(itr);\r\n                    }\r\n\r\n\r\n\r\nError:\r\n\r\n    SEVERE: null\r\n    com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.ArrayList&lt;app.JobSeeker&gt;` from Object value (token `JsonToken.START_OBJECT`)\r\n     at [Source: (StringReader); line: 1, column: 1]\r\n    \tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1752)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1526)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:396)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:252)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n    \tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3755)\r\n    \tat app.Main.main(Main.java:52)","title":"Getting map from a JSON object with an array using Jackson","body":"<p>I'm trying to de-serialize a JSON String that contains an array and multiple levels down. I just want the map of the &quot;attributes&quot; property and the &quot;id&quot;. Here is an example:</p>\n<pre><code>{\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: &quot;3252&quot;,\n            &quot;type&quot;: &quot;job_seekers&quot;,\n            &quot;attributes&quot;: {\n                &quot;first_name&quot;: &quot;nathan&quot;,\n                &quot;last_name&quot;: &quot;taylor&quot;,\n                &quot;full_name&quot;: &quot;nathan taylor&quot;,\n                &quot;email&quot;: &quot;&quot;,\n                &quot;phone&quot;: &quot;&quot;,\n                &quot;phone_iso2&quot;: &quot;CA&quot;,\n                &quot;date_of_birth&quot;: null,\n                &quot;summary&quot;: &quot;&quot;,\n                &quot;created_at&quot;: &quot;2023-01-03T17:34:57+00:00&quot;,\n                &quot;updated_at&quot;: &quot;2023-04-21T19:16:05+00:00&quot;,\n                &quot;locale&quot;: &quot;en&quot;,\n                &quot;channel&quot;: &quot;web_traffic_referral&quot;,\n                &quot;channel_source&quot;: &quot;&quot;,\n                &quot;pipeline_source&quot;: &quot;self_registered&quot;,\n                &quot;address1&quot;: null,\n                &quot;address2&quot;: null,\n                &quot;town&quot;: null,\n                &quot;country&quot;: null,\n                &quot;postcode&quot;: null\n            },\n            &quot;relationships&quot;: {\n                &quot;answers&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;custom_attributes&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;comments&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                }\n            }\n        },\n        {\n            &quot;id&quot;: &quot;26346&quot;,\n            &quot;type&quot;: &quot;job_seekers&quot;,\n            &quot;attributes&quot;: {\n                &quot;first_name&quot;: &quot;spencer&quot;,\n                &quot;last_name&quot;: &quot;gordon&quot;,\n                &quot;full_name&quot;: &quot;spencer gordon&quot;,\n                &quot;email&quot;: &quot;&quot;,\n                &quot;phone&quot;: &quot;&quot;,\n                &quot;phone_iso2&quot;: &quot;US&quot;,\n                &quot;date_of_birth&quot;: null,\n                &quot;summary&quot;: &quot;&quot;,\n                &quot;created_at&quot;: &quot;2023-01-06T21:52:40+00:00&quot;,\n                &quot;updated_at&quot;: &quot;2023-04-21T19:16:43+00:00&quot;,\n                &quot;locale&quot;: &quot;en&quot;,\n                &quot;channel&quot;: &quot;direct&quot;,\n                &quot;channel_source&quot;: null,\n                &quot;pipeline_source&quot;: &quot;self_registered&quot;,\n                &quot;address1&quot;: null,\n                &quot;address2&quot;: null,\n                &quot;town&quot;: null,\n                &quot;country&quot;: null,\n                &quot;postcode&quot;: null\n            },\n            &quot;relationships&quot;: {\n                &quot;answers&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;custom_attributes&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;comments&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                }\n            }\n        }\n    ],\n    &quot;meta&quot;: {}\n}\n</code></pre>\n<p>This is what I've tried:</p>\n<pre><code>  ObjectMapper objectMapper = new ObjectMapper();\n\n\n                List&lt;JobSeeker&gt; myObjects = objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;List&lt;JobSeeker&gt;&gt;(){});\n\n                for (JobSeeker itr : myObjects)\n                {\n                    System.out.println(itr);\n                }\n</code></pre>\n<p>Error:</p>\n<pre><code>SEVERE: null\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.ArrayList&lt;app.JobSeeker&gt;` from Object value (token `JsonToken.START_OBJECT`)\n at [Source: (StringReader); line: 1, column: 1]\n    at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1752)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1526)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:396)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:252)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3755)\n    at app.Main.main(Main.java:52)\n</code></pre>\n"},{"tags":["java","spring","validation","bean-validation","jsr"],"comments":[{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1562949672,"post_id":57010688,"comment_id":100554699,"body_markdown":"can you add the stack trace or fully qualified name of both exceptions","body":"can you add the stack trace or fully qualified name of both exceptions"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1562950993,"post_id":57010688,"comment_id":100555177,"body_markdown":"I checked the root cause in debug mode but it is showing all validated fields in the root cause and the exception is same","body":"I checked the root cause in debug mode but it is showing all validated fields in the root cause and the exception is same"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1562967253,"post_id":57010688,"comment_id":100560559,"body_markdown":"why don&#39;t you add it here","body":"why don&#39;t you add it here"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1562968065,"post_id":57010688,"comment_id":100560726,"body_markdown":"and also add the `ClassA` and `ClassB ` with import statements, there is a possibility of  `ConstraintViolationException` which is part of jsr 380","body":"and also add the <code>ClassA</code> and <code>ClassB </code> with import statements, there is a possibility of  <code>ConstraintViolationException</code> which is part of jsr 380"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214612,"post_id":57010688,"comment_id":100618027,"body_markdown":"Exception strace for : javax.validation.ConstraintViolationException: methodName.obj_name.field_name: must not be blank","body":"Exception strace for : javax.validation.ConstraintViolationException: methodName.obj_name.field_name: must not be blank"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214691,"post_id":57010688,"comment_id":100618058,"body_markdown":"Import statements are :","body":"Import statements are :"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214693,"post_id":57010688,"comment_id":100618060,"body_markdown":"import javax.validation.Valid;\nimport javax.validation.constraints.NotBlank;\nimport javax.validation.constraints.NotEmpty;\nimport javax.validation.constraints.Pattern;\nimport javax.validation.constraints.Size;","body":"import javax.validation.Valid; import javax.validation.constraints.NotBlank; import javax.validation.constraints.NotEmpty; import javax.validation.constraints.Pattern; import javax.validation.constraints.Size;"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214729,"post_id":57010688,"comment_id":100618078,"body_markdown":"I can not post completed code here","body":"I can not post completed code here"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":1,"creation_date":1563216744,"post_id":57010688,"comment_id":100618784,"body_markdown":"@Deadpool : One thing I observed is whenever I add validation groups (eg. @SomeValidation(groups=GroupA.class)) I get ConstraintViolationException and If I remove groups I get MethodArgumentNotValidException","body":"@Deadpool : One thing I observed is whenever I add validation groups (eg. @SomeValidation(groups=GroupA.class)) I get ConstraintViolationException and If I remove groups I get MethodArgumentNotValidException"}],"answers":[{"tags":[],"owner":{"account_id":5225768,"reputation":1139,"user_id":4177869,"accept_rate":50,"display_name":"Mohamed Sweelam"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1594872395,"creation_date":1562948938,"answer_id":57010819,"question_id":57010688,"body_markdown":"When you use @Valid, you are applying validation which is defined by you on your model class fields, while there are different types of validations, you can choose like @NotNull, @Max, @Min and so on, you will get the matching type. \r\n\r\nIn general, all of these are parallel to **MethodArgumentNotValidException** which will be thrown in all cases.\r\n\r\nFrom official document \r\n&gt; Exception to be thrown when validation on an argument annotated with @Valid fails.\r\n\r\nConstraintViolationException is thrown by hibernate entity manager when some constrain violated, so this means you violated some fields in some entity you are using.","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>When you use @Valid, you are applying validation which is defined by you on your model class fields, while there are different types of validations, you can choose like @NotNull, @Max, @Min and so on, you will get the matching type.</p>\n<p>In general, all of these are parallel to <strong>MethodArgumentNotValidException</strong> which will be thrown in all cases.</p>\n<p>From official document</p>\n<blockquote>\n<p>Exception to be thrown when validation on an argument annotated with @Valid fails.</p>\n</blockquote>\n<p>ConstraintViolationException is thrown by hibernate entity manager when some constrain violated, so this means you violated some fields in some entity you are using.</p>\n"},{"tags":[],"owner":{"account_id":2017799,"reputation":3789,"user_id":1804661,"accept_rate":50,"display_name":"Christopher Yang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1603137692,"creation_date":1603137692,"answer_id":64434390,"question_id":57010688,"body_markdown":"Take a look at this [article][1]. These exceptions are thrown under different situations when you mix spring&#39;s validation framework with bean validation.\r\n\r\n\r\n  [1]: https://reflectoring.io/bean-validation-with-spring-boot/","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>Take a look at this <a href=\"https://reflectoring.io/bean-validation-with-spring-boot/\" rel=\"noreferrer\">article</a>. These exceptions are thrown under different situations when you mix spring's validation framework with bean validation.</p>\n"},{"tags":[],"owner":{"account_id":14846084,"reputation":230,"user_id":10721364,"display_name":"Hashir Labs"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1690292763,"creation_date":1622893727,"answer_id":67849251,"question_id":57010688,"body_markdown":"For a simple understanding, if validation happens at the controller/service layer by using the `@Valid` annotation, it generates `MethodArgumentNotValidException`. You can add a handler for this and return the response accordingly. This class is part of the Spring framework, and validation is performed by the Spring framework.\r\nSee sample below:\r\n```java\r\n    @ExceptionHandler(MethodArgumentNotValidException.class)\r\n    public ResponseEntity&lt;Response&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\r\n    \r\n        logger.info(&quot;Invalid arguments found : &quot; + ex.getMessage());\r\n        // Get the error messages for invalid fields\r\n        List&lt;FieldError&gt; errors = ex.getBindingResult()\r\n                .getFieldErrors()\r\n                .stream()\r\n                .map(fieldError -&gt; new FieldError(fieldError.getField(), fieldError.getDefaultMessage()))\r\n                .collect(Collectors.toList());\r\n    \r\n        String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\r\n        Response response = new Response(false, message)\r\n                .setErrors(errors);\r\n        ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\r\n        return responseEntity;\r\n    }\r\n```\r\nInstead, if you do not validate using the `@Valid` annotation, an exception is raised by Hibernate at the JPA layer and generates `ConstraintViolationException`. This exception is part of the Javax bean validation framework and raised at the time of performing the persistence operation (before the actual SQL execution).\r\nSee sample below:\r\n```java\r\n    @ExceptionHandler(ConstraintViolationException.class)\r\n        public ResponseEntity&lt;Response&gt; handleConstraintViolationException(ConstraintViolationException ex) {\r\n            List&lt;FieldError&gt; errors = ex.getConstraintViolations()\r\n                    .stream()\r\n                    .map(constraintViolation -&gt; {\r\n                        return new FieldError(constraintViolation.getRootBeanClass().getName() + &quot; &quot; + constraintViolation.getPropertyPath(), constraintViolation.getMessage());\r\n                    })\r\n                    .collect(Collectors.toList());\r\n    \r\n            String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\r\n            Response response = new Response(false, message)\r\n                    .setErrors(errors);\r\n            ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\r\n            return responseEntity;\r\n        }\r\n```","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>For a simple understanding, if validation happens at the controller/service layer by using the <code>@Valid</code> annotation, it generates <code>MethodArgumentNotValidException</code>. You can add a handler for this and return the response accordingly. This class is part of the Spring framework, and validation is performed by the Spring framework.\nSee sample below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;Response&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\n    \n        logger.info(&quot;Invalid arguments found : &quot; + ex.getMessage());\n        // Get the error messages for invalid fields\n        List&lt;FieldError&gt; errors = ex.getBindingResult()\n                .getFieldErrors()\n                .stream()\n                .map(fieldError -&gt; new FieldError(fieldError.getField(), fieldError.getDefaultMessage()))\n                .collect(Collectors.toList());\n    \n        String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\n        Response response = new Response(false, message)\n                .setErrors(errors);\n        ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\n        return responseEntity;\n    }\n</code></pre>\n<p>Instead, if you do not validate using the <code>@Valid</code> annotation, an exception is raised by Hibernate at the JPA layer and generates <code>ConstraintViolationException</code>. This exception is part of the Javax bean validation framework and raised at the time of performing the persistence operation (before the actual SQL execution).\nSee sample below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ExceptionHandler(ConstraintViolationException.class)\n        public ResponseEntity&lt;Response&gt; handleConstraintViolationException(ConstraintViolationException ex) {\n            List&lt;FieldError&gt; errors = ex.getConstraintViolations()\n                    .stream()\n                    .map(constraintViolation -&gt; {\n                        return new FieldError(constraintViolation.getRootBeanClass().getName() + &quot; &quot; + constraintViolation.getPropertyPath(), constraintViolation.getMessage());\n                    })\n                    .collect(Collectors.toList());\n    \n            String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\n            Response response = new Response(false, message)\n                    .setErrors(errors);\n            ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\n            return responseEntity;\n        }\n</code></pre>\n"}],"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14497,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":3,"score":23,"last_activity_date":1690292763,"creation_date":1562948330,"question_id":57010688,"body_markdown":"When I am validating bean using `@Valid` annotation in `javax.validation`, for some objects I am getting `ConstraintViolationException` and for some I am getting a `MethodArgumentNotValidException`.\r\n\r\nI understand that, if I validate anything in `@ResponseBody` in the controller , it throws a `MethodArgumentNotValidException`.\r\n\r\nBut for some custom validations(eg. `@MyCustomValidation`) at the class level it is throwing `ConstraintViolationException` even if it is being validated in @ResponseValidation.\r\n\r\nAnd for some other custom validation for a different REST endpoint, it throws `MethodArgumentNotValidException`.\r\n\r\nI am finding it a bit difficult to understand its behavior. \r\n\r\n    @PostMapping(path = &quot;/someEndPoint&quot;)\t\r\n\t@Validated(OnASave.class)\r\n\tpublic ResponseEntity&lt;ClassA&gt; saveObjA(@Valid @RequestBody ClassA objA)\r\n\r\n    \r\n\r\n&gt; Result - throws `MethodArgumentNotValidException`\r\n\r\n    @PostMapping(path = &quot;/someOtherEndPoint&quot;)\t\r\n\t@Validated(OnBSave.class)\r\n\tpublic ResponseEntity&lt;ClassB&gt; saveObjB(@Valid @RequestBody ClassB objB)\r\n\r\n&gt; Result - throws `ConstraintViolationException`\r\n\r\nBoth `ClassA` and `ClassB` has custom validations.","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>When I am validating bean using <code>@Valid</code> annotation in <code>javax.validation</code>, for some objects I am getting <code>ConstraintViolationException</code> and for some I am getting a <code>MethodArgumentNotValidException</code>.</p>\n<p>I understand that, if I validate anything in <code>@ResponseBody</code> in the controller , it throws a <code>MethodArgumentNotValidException</code>.</p>\n<p>But for some custom validations(eg. <code>@MyCustomValidation</code>) at the class level it is throwing <code>ConstraintViolationException</code> even if it is being validated in @ResponseValidation.</p>\n<p>And for some other custom validation for a different REST endpoint, it throws <code>MethodArgumentNotValidException</code>.</p>\n<p>I am finding it a bit difficult to understand its behavior.</p>\n<pre><code>@PostMapping(path = &quot;/someEndPoint&quot;)    \n@Validated(OnASave.class)\npublic ResponseEntity&lt;ClassA&gt; saveObjA(@Valid @RequestBody ClassA objA)\n</code></pre>\n<blockquote>\n<p>Result - throws <code>MethodArgumentNotValidException</code></p>\n</blockquote>\n<pre><code>@PostMapping(path = &quot;/someOtherEndPoint&quot;)   \n@Validated(OnBSave.class)\npublic ResponseEntity&lt;ClassB&gt; saveObjB(@Valid @RequestBody ClassB objB)\n</code></pre>\n<blockquote>\n<p>Result - throws <code>ConstraintViolationException</code></p>\n</blockquote>\n<p>Both <code>ClassA</code> and <code>ClassB</code> has custom validations.</p>\n"},{"tags":["java","intellij-idea","cucumber"],"comments":[{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1690292389,"post_id":76763279,"comment_id":135330831,"body_markdown":"Unfortunately  IntelliJ IDEA, or any other JetBrains product, does not have native support to resolve any file path from within a Gherkin (Cucumber) feature file and can provide navigation to it.","body":"Unfortunately  IntelliJ IDEA, or any other JetBrains product, does not have native support to resolve any file path from within a Gherkin (Cucumber) feature file and can provide navigation to it."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690292642,"creation_date":1690292642,"answer_id":76763356,"question_id":76763279,"body_markdown":"There is a feature in IntelliJ that may help you, although I&#39;m not sure if it&#39;s supported on Cucumber files. Try it out by putting your cursor in the string, then selecting the action (Ctrl-shift-A in my keymap): &quot;Inject language or reference&quot;, and selecting &quot;File reference&quot;:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DVPIJ.png","title":"Can Intellij IDEA navigate from cucumber feature file to file from resources mentioned in step?","body":"<p>There is a feature in IntelliJ that may help you, although I'm not sure if it's supported on Cucumber files. Try it out by putting your cursor in the string, then selecting the action (Ctrl-shift-A in my keymap): &quot;Inject language or reference&quot;, and selecting &quot;File reference&quot;:</p>\n<p><a href=\"https://i.stack.imgur.com/DVPIJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DVPIJ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3871840,"reputation":5493,"user_id":3206927,"accept_rate":77,"display_name":"sinedsem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690292642,"creation_date":1690292155,"question_id":76763279,"body_markdown":"My input data for cucumber tests is big enough, so I moved that to external files in resources.\r\n\r\nSo my feature file looks like: \r\n\r\n    Given I have a file located at &quot;classpath:example.txt&quot;\r\n    When read the file\r\n    Then ...\r\n\r\nAny change IDEA can understand that my argument is a reference to file and help me to navigate to it?\r\n\r\n\r\n\r\n\r\n","title":"Can Intellij IDEA navigate from cucumber feature file to file from resources mentioned in step?","body":"<p>My input data for cucumber tests is big enough, so I moved that to external files in resources.</p>\n<p>So my feature file looks like:</p>\n<pre><code>Given I have a file located at &quot;classpath:example.txt&quot;\nWhen read the file\nThen ...\n</code></pre>\n<p>Any change IDEA can understand that my argument is a reference to file and help me to navigate to it?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","auth0"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":1,"creation_date":1631113610,"post_id":69105077,"comment_id":122137517,"body_markdown":"Does this help https://stackoverflow.com/questions/62249978/how-to-secure-apis-with-resourceserver-implementation-with-multiple-resource-ids/64666011#64666011","body":"Does this help <a href=\"https://stackoverflow.com/questions/62249978/how-to-secure-apis-with-resourceserver-implementation-with-multiple-resource-ids/64666011#64666011\" title=\"how to secure apis with resourceserver implementation with multiple resource ids\">stackoverflow.com/questions/62249978/&hellip;</a>"},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1631117687,"post_id":69105077,"comment_id":122139287,"body_markdown":"Thank you so much for the response. I&#39;m not sure if you would know but how could i make my jwtDecoder() work with this approach? thank you again!","body":"Thank you so much for the response. I&#39;m not sure if you would know but how could i make my jwtDecoder() work with this approach? thank you again!"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1631175093,"post_id":69105077,"comment_id":122153302,"body_markdown":"You could use an `AuthenticationManagerResolver` that resolves to different `JwtAuthenticationProviders`, each with a different `JwtDecoder`. See this [example](https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/oauth2/resource-server/multi-tenancy/src/main/java/example/OAuth2ResourceServerSecurityConfiguration.java). The approach would be very similar, except instead of a `OpaqueTokenIntrospector`, you would have 2 `JwtDecoder`.","body":"You could use an <code>AuthenticationManagerResolver</code> that resolves to different <code>JwtAuthenticationProviders</code>, each with a different <code>JwtDecoder</code>. See this <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/oauth2/resource-server/multi-tenancy/src/main/java/example/OAuth2ResourceServerSecurityConfiguration.java\" rel=\"nofollow noreferrer\">example</a>. The approach would be very similar, except instead of a <code>OpaqueTokenIntrospector</code>, you would have 2 <code>JwtDecoder</code>."},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1631565984,"post_id":69105077,"comment_id":122251980,"body_markdown":"Thank you for the response Eleftheria!! Sorry dog had an accident needing surgery so I&#39;m only back at the computer now. \n\nI&#39;m having some issues with parts of that code example (probably more on the understanding) would you mind if i updated my main question and see if you can still help? thanks again!!","body":"Thank you for the response Eleftheria!! Sorry dog had an accident needing surgery so I&#39;m only back at the computer now.   I&#39;m having some issues with parts of that code example (probably more on the understanding) would you mind if i updated my main question and see if you can still help? thanks again!!"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1631605830,"post_id":69105077,"comment_id":122260570,"body_markdown":"Feel free to update the question with what you have tried, or open a new question if it&#39;s not directly related.","body":"Feel free to update the question with what you have tried, or open a new question if it&#39;s not directly related."},{"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"score":0,"creation_date":1646075718,"post_id":69105077,"comment_id":126030439,"body_markdown":"@EleftheriaStein-Kousathana is there an example where two &quot;issuer-uri&quot; are used? Thank you!","body":"@EleftheriaStein-Kousathana is there an example where two &quot;issuer-uri&quot; are used? Thank you!"},{"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"score":0,"creation_date":1646252456,"post_id":69105077,"comment_id":126080102,"body_markdown":"I have posted a working solution below","body":"I have posted a working solution below"}],"answers":[{"tags":[],"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1646252406,"creation_date":1646252406,"answer_id":71328679,"question_id":69105077,"body_markdown":"I have struggled with this issue for a bit a well. \r\n\r\nThe code below works with several issues (user pools). It&#39;s an alternative to one *spring.security.oauth2.resourceserver.jwt.issuer-uri* property\r\n\r\n\r\nPlease, look at the code for SpringSecurity configuration:\r\n```\r\n\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;config&quot;)\r\nclass JWTIssuersProps {\r\n    private List&lt;String&gt; issuers;\r\n\r\n    // getter and setter\r\n    public List&lt;String&gt; getIssuers() {\r\n        return issuers;\r\n    }\r\n\r\n    public void setIssuers(List&lt;String&gt; issuers) {\r\n        this.issuers = issuers;\r\n    }\r\n}\r\n\r\n@Configuration\r\npublic class JWTCustomSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private JWTIssuersProps props;\r\n\r\n    Map&lt;String, AuthenticationManager&gt; authenticationManagers = new HashMap&lt;&gt;();\r\n\r\n    JwtIssuerAuthenticationManagerResolver authenticationManagerResolver =\r\n            new JwtIssuerAuthenticationManagerResolver(authenticationManagers::get);\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        List&lt;String&gt; propsIssuers = props.getIssuers();\r\n        propsIssuers.forEach(issuer -&gt; addManager(authenticationManagers, issuer));\r\n\r\n        http.\r\n                // CORS configuration\r\n                cors().configurationSource(request -&gt; {\r\n                    var cors = new CorsConfiguration();\r\n                    cors.setAllowedOrigins(List.of(&quot;http://localhost:3000&quot;));\r\n                    cors.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n                    cors.setAllowedHeaders(List.of(&quot;*&quot;));\r\n                    return cors;\r\n                })\r\n\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/actuator/**&quot;).permitAll()\r\n                .and()\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt; {\r\n                    oauth2ResourceServer.authenticationManagerResolver(this.authenticationManagerResolver);\r\n                });\r\n    }\r\n\r\n    public void addManager(Map&lt;String, AuthenticationManager&gt; authenticationManagers, String issuer) {\r\n        JwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        JwtAuthenticationProvider authenticationProvider = new JwtAuthenticationProvider(jwtDecoder);\r\n        authenticationProvider.setJwtAuthenticationConverter(new MyJwtAuthenticationConverter());\r\n        authenticationManagers.put(issuer, authenticationProvider::authenticate);\r\n    }\r\n\r\n    static class MyJwtAuthenticationConverter extends JwtAuthenticationConverter {\r\n        @Override\r\n        protected Collection&lt;GrantedAuthority&gt; extractAuthorities(final Jwt jwt) {\r\n            List&lt;String&gt; groups = jwt.getClaim(&quot;cognito:groups&quot;);\r\n\r\n            System.out.println(&quot;User groups list.size =&quot; + groups.size());\r\n            System.out.println(&quot;User groups:&quot;);\r\n            groups.forEach(System.out::println);\r\n\r\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n            for (String role : groups) {\r\n                authorities.add(new SimpleGrantedAuthority(role));\r\n            }\r\n            return authorities;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt expects application.yaml file:\r\n```\r\nconfig:\r\n  issuers:\r\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-1&gt;\r\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-2&gt;\r\n```\r\n\r\nI also have CORS configuration there. And read Amazon Cognito groups.\r\n\r\nYou can find the full project source code here: https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java","title":"Spring Boot - Support multiple issuer-uri","body":"<p>I have struggled with this issue for a bit a well.</p>\n<p>The code below works with several issues (user pools). It's an alternative to one <em>spring.security.oauth2.resourceserver.jwt.issuer-uri</em> property</p>\n<p>Please, look at the code for SpringSecurity configuration:</p>\n<pre><code>\n@Component\n@ConfigurationProperties(prefix = &quot;config&quot;)\nclass JWTIssuersProps {\n    private List&lt;String&gt; issuers;\n\n    // getter and setter\n    public List&lt;String&gt; getIssuers() {\n        return issuers;\n    }\n\n    public void setIssuers(List&lt;String&gt; issuers) {\n        this.issuers = issuers;\n    }\n}\n\n@Configuration\npublic class JWTCustomSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private JWTIssuersProps props;\n\n    Map&lt;String, AuthenticationManager&gt; authenticationManagers = new HashMap&lt;&gt;();\n\n    JwtIssuerAuthenticationManagerResolver authenticationManagerResolver =\n            new JwtIssuerAuthenticationManagerResolver(authenticationManagers::get);\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        List&lt;String&gt; propsIssuers = props.getIssuers();\n        propsIssuers.forEach(issuer -&gt; addManager(authenticationManagers, issuer));\n\n        http.\n                // CORS configuration\n                cors().configurationSource(request -&gt; {\n                    var cors = new CorsConfiguration();\n                    cors.setAllowedOrigins(List.of(&quot;http://localhost:3000&quot;));\n                    cors.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n                    cors.setAllowedHeaders(List.of(&quot;*&quot;));\n                    return cors;\n                })\n\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/actuator/**&quot;).permitAll()\n                .and()\n                .oauth2ResourceServer(oauth2ResourceServer -&gt; {\n                    oauth2ResourceServer.authenticationManagerResolver(this.authenticationManagerResolver);\n                });\n    }\n\n    public void addManager(Map&lt;String, AuthenticationManager&gt; authenticationManagers, String issuer) {\n        JwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        JwtAuthenticationProvider authenticationProvider = new JwtAuthenticationProvider(jwtDecoder);\n        authenticationProvider.setJwtAuthenticationConverter(new MyJwtAuthenticationConverter());\n        authenticationManagers.put(issuer, authenticationProvider::authenticate);\n    }\n\n    static class MyJwtAuthenticationConverter extends JwtAuthenticationConverter {\n        @Override\n        protected Collection&lt;GrantedAuthority&gt; extractAuthorities(final Jwt jwt) {\n            List&lt;String&gt; groups = jwt.getClaim(&quot;cognito:groups&quot;);\n\n            System.out.println(&quot;User groups list.size =&quot; + groups.size());\n            System.out.println(&quot;User groups:&quot;);\n            groups.forEach(System.out::println);\n\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n            for (String role : groups) {\n                authorities.add(new SimpleGrantedAuthority(role));\n            }\n            return authorities;\n        }\n    }\n}\n</code></pre>\n<p>It expects application.yaml file:</p>\n<pre><code>config:\n  issuers:\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-1&gt;\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-2&gt;\n</code></pre>\n<p>I also have CORS configuration there. And read Amazon Cognito groups.</p>\n<p>You can find the full project source code here: <a href=\"https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java\" rel=\"noreferrer\">https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java</a></p>\n"},{"tags":[],"owner":{"account_id":2921381,"reputation":486,"user_id":2503544,"display_name":"Mohammad Sadegh Rafiei"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682491250,"creation_date":1682253939,"answer_id":76084924,"question_id":69105077,"body_markdown":"You can use this Implementation for multiple issuer support in Spring boot 2.7.10. auth-servers urls at this sample are equals to bellows urls.\r\n\r\n    http://localhost:9292/auth/realms/sso\r\n    http://www.auth-server.org:9292/auth/realms/sso\r\n    http://127.0.0.1:9292/auth/realms/sso\r\n\r\nalso this is my application.properties configuration\r\n\r\n    spring.security.oauth2.client.registration.keycloak.client-id=sample-client\r\n    spring.security.oauth2.client.provider.keycloak.authorization-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/auth\r\n    spring.security.oauth2.client.provider.keycloak.token-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/token\r\n    spring.security.oauth2.client.registration.keycloak.redirect-uri=http://localhost:8080/login/oauth2/code/sample-client\r\n    spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\r\n    spring.security.oauth2.client.registration.keycloak.scope=openid\r\n\r\nThis class just is a simple configuration.\r\n\r\n    @Configuration\r\n    public class ClientSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n       @Override\r\n       public void configure(HttpSecurity http) throws Exception {\r\n           // @formatter:off\r\n           http.authorizeHttpRequests()\r\n                   .anyRequest()\r\n                   .authenticated();\r\n           http.oauth2Login();\r\n           http.oauth2ResourceServer(httpSecurity -&gt; httpSecurity.jwt(\r\n                   jwtConfigurer -&gt; jwtConfigurer.decoder(CustomJwtDecoder::getJwt)\r\n           ));\r\n           // @formatter:on\r\n        }\r\n    }\r\n\r\nand to support multiple issuers, write two class CustomJwtDecoder and CustomJwtDecoderFactory that implements in order two interfaces JwtDecoder and JwtDecoderFactory&lt;ClientRegistration&gt;.\r\n\r\nimplementation of these two class:\r\n\r\n    @Component\r\n    public class CustomJwtDecoder implements JwtDecoder {\r\n\r\n        @Override\r\n        public Jwt decode(String token) throws JwtException {\r\n            return getJwt(token);\r\n        }\r\n    \r\n        public static Jwt getJwt(String token) {\r\n            Jwt result = null;\r\n            JwtDecoder jdLocal =     JwtDecoders.fromIssuerLocation(&quot;http://localhost:9292/auth/realms/sso&quot;);\r\n            JwtDecoder jdDomain = JwtDecoders.fromIssuerLocation(&quot;http://www.auth-server.org:9292/auth/realms/sso&quot;);\r\n            JwtDecoder jdIp = JwtDecoders.fromIssuerLocation(&quot;http://127.0.0.1:9292/auth/realms/sso&quot;);\r\n            try { result = jdLocal.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            try { result = jdDomain.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            try { result = jdIp.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            return result;\r\n        }\r\n    }\r\nand this class\r\n\r\n\r\n    @Component\r\n    public class CustomJwtDecoderFactory implements JwtDecoderFactory&lt;ClientRegistration&gt; {\r\n        @Override\r\n        public JwtDecoder createDecoder(ClientRegistration context) {\r\n            return CustomJwtDecoder::getJwt;\r\n        }\r\n    }\r\n","title":"Spring Boot - Support multiple issuer-uri","body":"<p>You can use this Implementation for multiple issuer support in Spring boot 2.7.10. auth-servers urls at this sample are equals to bellows urls.</p>\n<pre><code>http://localhost:9292/auth/realms/sso\nhttp://www.auth-server.org:9292/auth/realms/sso\nhttp://127.0.0.1:9292/auth/realms/sso\n</code></pre>\n<p>also this is my application.properties configuration</p>\n<pre><code>spring.security.oauth2.client.registration.keycloak.client-id=sample-client\nspring.security.oauth2.client.provider.keycloak.authorization-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/auth\nspring.security.oauth2.client.provider.keycloak.token-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/token\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://localhost:8080/login/oauth2/code/sample-client\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.keycloak.scope=openid\n</code></pre>\n<p>This class just is a simple configuration.</p>\n<pre><code>@Configuration\npublic class ClientSecurityConfig extends WebSecurityConfigurerAdapter {\n\n   @Override\n   public void configure(HttpSecurity http) throws Exception {\n       // @formatter:off\n       http.authorizeHttpRequests()\n               .anyRequest()\n               .authenticated();\n       http.oauth2Login();\n       http.oauth2ResourceServer(httpSecurity -&gt; httpSecurity.jwt(\n               jwtConfigurer -&gt; jwtConfigurer.decoder(CustomJwtDecoder::getJwt)\n       ));\n       // @formatter:on\n    }\n}\n</code></pre>\n<p>and to support multiple issuers, write two class CustomJwtDecoder and CustomJwtDecoderFactory that implements in order two interfaces JwtDecoder and JwtDecoderFactory.</p>\n<p>implementation of these two class:</p>\n<pre><code>@Component\npublic class CustomJwtDecoder implements JwtDecoder {\n\n    @Override\n    public Jwt decode(String token) throws JwtException {\n        return getJwt(token);\n    }\n\n    public static Jwt getJwt(String token) {\n        Jwt result = null;\n        JwtDecoder jdLocal =     JwtDecoders.fromIssuerLocation(&quot;http://localhost:9292/auth/realms/sso&quot;);\n        JwtDecoder jdDomain = JwtDecoders.fromIssuerLocation(&quot;http://www.auth-server.org:9292/auth/realms/sso&quot;);\n        JwtDecoder jdIp = JwtDecoders.fromIssuerLocation(&quot;http://127.0.0.1:9292/auth/realms/sso&quot;);\n        try { result = jdLocal.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        try { result = jdDomain.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        try { result = jdIp.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        return result;\n    }\n}\n</code></pre>\n<p>and this class</p>\n<pre><code>@Component\npublic class CustomJwtDecoderFactory implements JwtDecoderFactory&lt;ClientRegistration&gt; {\n    @Override\n    public JwtDecoder createDecoder(ClientRegistration context) {\n        return CustomJwtDecoder::getJwt;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9192,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1690292539,"creation_date":1631111834,"question_id":69105077,"body_markdown":"Hi, I&#39;ve been searching the web with very little success and I&#39;m hoping someone here at SO might be able to help.\r\n\r\nCurrently I have my Spring Boot API&#39;s (Version 2.5.4) accepting a JWT which is provided by Auth0. Now I&#39;ve created a second tenant there and I&#39;m struggling to understand how I can support two or more  issuer-uri&#39;s. \r\n\r\nHere is how I&#39;m currently doing it:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = false)\r\n@EnableGlobalMethodSecurity(\r\n        securedEnabled = true,\r\n        jsr250Enabled = true,\r\n        prePostEnabled = true\r\n)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Value(&quot;${auth0.audience}&quot;)\r\n    private String audience;\r\n\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String issuer;\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3010&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        configuration.addAllowedHeader(&quot;Authorization&quot;);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http\r\n                .cors()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .headers().referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.SAME_ORIGIN)\r\n                .and()\r\n                .xssProtection()\r\n                .and()\r\n                .contentSecurityPolicy(&quot;script-src &#39;self&#39;&quot;).and()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .formLogin()\r\n                .disable()\r\n                .httpBasic()\r\n                .disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new RestAuthenticationEntryPoint())\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/api/v1/user/profile/**&quot;).permitAll()\r\n                .antMatchers(&quot;/user/profile/**&quot;).permitAll()\r\n                .antMatchers(&quot;/swagger-resources/**&quot;).permitAll()        \r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2ResourceServer().jwt();\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers(&quot;/health&quot;, &quot;/health/**&quot;);\r\n    }\r\n\r\n    @Bean\r\n    JwtDecoder jwtDecoder() {\r\n        /*\r\n        By default, Spring Security does not validate the &quot;aud&quot; claim of the token, to ensure that this token is\r\n        indeed intended for our app. Adding our own validator is easy to do:\r\n        */\r\n\r\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\r\n                JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\r\n\r\n        jwtDecoder.setJwtValidator(withAudience);\r\n\r\n        return jwtDecoder;\r\n    }\r\n}\r\n```\r\n\r\nCan anyone shed some light, with Node I can just set the issuer-uri to be a String array and it works out of the box. Hoping there is something similar in Spring?\r\n\r\nEDIT:\r\nIn case needed here is my build file for versions:\r\n\r\n```\r\nplugins {\r\n    id &quot;org.springframework.boot&quot; version &quot;2.5.4&quot;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;java&#39;\r\n    id &quot;com.github.davidmc24.gradle.plugin.avro&quot; version &quot;1.2.0&quot;\r\n    id &quot;idea&quot;\r\n    id &#39;com.google.cloud.tools.jib&#39; version &#39;3.0.0&#39;\r\n}\r\n\r\n\r\napply plugin: &#39;idea&#39;\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0&#39;\r\n\r\n\r\njava {\r\n    sourceCompatibility = JavaVersion.VERSION_14\r\n    targetCompatibility = JavaVersion.VERSION_14\r\n}\r\n\r\n\r\njib.from.image = &#39;openjdk:15-jdk-buster&#39;\r\njib.to.image = &#39;gcr.io/thefullstack/tfs-project-service&#39;\r\n\r\next {\r\n    avroVersion = &quot;1.10.1&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    jcenter()\r\n    maven {\r\n        url &quot;https://packages.confluent.io/maven/&quot;\r\n    }\r\n}\r\n\r\navro {\r\n    createSetters = true\r\n    fieldVisibility = &quot;PRIVATE&quot;\r\n}\r\n\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;)\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-mongodb&#39;\r\n    implementation group: &#39;org.springframework.data&#39;, name: &#39;spring-data-elasticsearch&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-security&#39;\r\n    implementation group: &#39;org.springframework.security&#39;, name: &#39;spring-security-oauth2-client&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-validation&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-oauth2-resource-server&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-cache&#39;\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\r\n    implementation group: &#39;org.springframework.integration&#39;, name: &#39;spring-integration-core&#39;, version: &#39;5.5.3&#39;\r\n\r\n\r\n//    implementation group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-logging&#39;\r\n    implementation group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-logging&#39;, version: &#39;1.2.8.RELEASE&#39;\r\n    implementation(&quot;org.springframework.cloud:spring-cloud-gcp-starter-pubsub:1.2.5.RELEASE&quot;)\r\n    implementation(&quot;org.springframework.integration:spring-integration-core&quot;)\r\n\r\n\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk&#39;, version: &#39;1.11.860&#39;\r\n    implementation group: &#39;com.mashape.unirest&#39;, name: &#39;unirest-java&#39;, version: &#39;1.4.9&#39;\r\n\r\n    implementation group: &#39;javax.validation&#39;, name: &#39;validation-api&#39;, version: &#39;2.0.1.Final&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.datatype&#39;, name: &#39;jackson-datatype-jsr310&#39;, version: &#39;2.12.3&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-core&#39;, version: &#39;2.12.3&#39;\r\n    implementation group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt&#39;, version: &#39;0.9.1&#39;\r\n    implementation group: &#39;org.openapitools&#39;, name: &#39;jackson-databind-nullable&#39;, version: &#39;0.2.1&#39;\r\n\r\n    implementation group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.6&#39;\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-collections4&#39;, version: &#39;4.4&#39;\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.11&#39;\r\n\r\n    implementation group: &#39;com.auth0&#39;, name: &#39;java-jwt&#39;, version: &#39;3.12.0&#39;\r\n    implementation &quot;org.apache.avro:avro:1.10.1&quot;\r\n    implementation &quot;org.apache.avro:avro:${avroVersion}&quot;\r\n\r\n    implementation &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n\r\n    implementation &#39;com.amazonaws:aws-java-sdk-s3&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\r\n    testImplementation group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;\r\n    testImplementation &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    testAnnotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n        exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n    }\r\n}\r\n```","title":"Spring Boot - Support multiple issuer-uri","body":"<p>Hi, I've been searching the web with very little success and I'm hoping someone here at SO might be able to help.</p>\n<p>Currently I have my Spring Boot API's (Version 2.5.4) accepting a JWT which is provided by Auth0. Now I've created a second tenant there and I'm struggling to understand how I can support two or more  issuer-uri's.</p>\n<p>Here is how I'm currently doing it:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = false)\n@EnableGlobalMethodSecurity(\n        securedEnabled = true,\n        jsr250Enabled = true,\n        prePostEnabled = true\n)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuer;\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3010&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;));\n        configuration.setAllowCredentials(true);\n        configuration.addAllowedHeader(&quot;Authorization&quot;);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n                .cors()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .headers().referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.SAME_ORIGIN)\n                .and()\n                .xssProtection()\n                .and()\n                .contentSecurityPolicy(&quot;script-src 'self'&quot;).and()\n                .and()\n                .csrf()\n                .disable()\n                .formLogin()\n                .disable()\n                .httpBasic()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(new RestAuthenticationEntryPoint())\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/api/v1/user/profile/**&quot;).permitAll()\n                .antMatchers(&quot;/user/profile/**&quot;).permitAll()\n                .antMatchers(&quot;/swagger-resources/**&quot;).permitAll()        \n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2ResourceServer().jwt();\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/health&quot;, &quot;/health/**&quot;);\n    }\n\n    @Bean\n    JwtDecoder jwtDecoder() {\n        /*\n        By default, Spring Security does not validate the &quot;aud&quot; claim of the token, to ensure that this token is\n        indeed intended for our app. Adding our own validator is easy to do:\n        */\n\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\n                JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>Can anyone shed some light, with Node I can just set the issuer-uri to be a String array and it works out of the box. Hoping there is something similar in Spring?</p>\n<p>EDIT:\nIn case needed here is my build file for versions:</p>\n<pre><code>plugins {\n    id &quot;org.springframework.boot&quot; version &quot;2.5.4&quot;\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n    id &quot;com.github.davidmc24.gradle.plugin.avro&quot; version &quot;1.2.0&quot;\n    id &quot;idea&quot;\n    id 'com.google.cloud.tools.jib' version '3.0.0'\n}\n\n\napply plugin: 'idea'\n\ngroup 'org.example'\nversion '1.0'\n\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_14\n    targetCompatibility = JavaVersion.VERSION_14\n}\n\n\njib.from.image = 'openjdk:15-jdk-buster'\njib.to.image = 'gcr.io/thefullstack/tfs-project-service'\n\next {\n    avroVersion = &quot;1.10.1&quot;\n}\n\nrepositories {\n    mavenCentral()\n    jcenter()\n    maven {\n        url &quot;https://packages.confluent.io/maven/&quot;\n    }\n}\n\navro {\n    createSetters = true\n    fieldVisibility = &quot;PRIVATE&quot;\n}\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-data-elasticsearch')\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-mongodb'\n    implementation group: 'org.springframework.data', name: 'spring-data-elasticsearch'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-security'\n    implementation group: 'org.springframework.security', name: 'spring-security-oauth2-client'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-validation'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-oauth2-resource-server'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-cache'\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\n    implementation group: 'org.springframework.integration', name: 'spring-integration-core', version: '5.5.3'\n\n\n//    implementation group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-logging'\n    implementation group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-logging', version: '1.2.8.RELEASE'\n    implementation(&quot;org.springframework.cloud:spring-cloud-gcp-starter-pubsub:1.2.5.RELEASE&quot;)\n    implementation(&quot;org.springframework.integration:spring-integration-core&quot;)\n\n\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk', version: '1.11.860'\n    implementation group: 'com.mashape.unirest', name: 'unirest-java', version: '1.4.9'\n\n    implementation group: 'javax.validation', name: 'validation-api', version: '2.0.1.Final'\n    implementation group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.12.3'\n    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.12.3'\n    implementation group: 'io.jsonwebtoken', name: 'jjwt', version: '0.9.1'\n    implementation group: 'org.openapitools', name: 'jackson-databind-nullable', version: '0.2.1'\n\n    implementation group: 'commons-io', name: 'commons-io', version: '2.6'\n    implementation group: 'org.apache.commons', name: 'commons-collections4', version: '4.4'\n    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.11'\n\n    implementation group: 'com.auth0', name: 'java-jwt', version: '3.12.0'\n    implementation &quot;org.apache.avro:avro:1.10.1&quot;\n    implementation &quot;org.apache.avro:avro:${avroVersion}&quot;\n\n    implementation 'org.projectlombok:lombok:1.18.20'\n    annotationProcessor 'org.projectlombok:lombok:1.18.20'\n\n    implementation 'com.amazonaws:aws-java-sdk-s3'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n\n    testImplementation group: 'junit', name: 'junit', version: '4.12'\n    testImplementation 'org.projectlombok:lombok:1.18.20'\n    testAnnotationProcessor 'org.projectlombok:lombok:1.18.20'\n\n    testImplementation('org.springframework.boot:spring-boot-starter-test') {\n        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n    }\n}\n</code></pre>\n"},{"tags":["java","date","calendar","timezone"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690314939,"post_id":12487125,"comment_id":135335604,"body_markdown":"**Update:** The code here uses terrible date-time classes that were years ago supplanted by the *java.time* classes defined in JSR 310. For a modern solution, see the [Answer by Ole V.V.](https://stackoverflow.com/a/46011166/642706)","body":"<b>Update:</b> The code here uses terrible date-time classes that were years ago supplanted by the <i>java.time</i> classes defined in JSR 310. For a modern solution, see the <a href=\"https://stackoverflow.com/a/46011166/642706\">Answer by Ole V.V.</a>"}],"answers":[{"tags":[],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"down_vote_count":2,"up_vote_count":78,"is_accepted":true,"score":76,"last_activity_date":1348017176,"creation_date":1348017176,"answer_id":12487281,"question_id":12487125,"body_markdown":"`Date` has no timezone and internally stores in UTC. Only when a date is formatted is the timezone correction applies. When using a `DateFormat`, it defaults to the timezone of the JVM it&#39;s running in. Use `setTimeZone` to change it as necessary.\r\n\r\n    DateFormat utcFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;);\r\n    utcFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n    Date date = utcFormat.parse(&quot;2012-08-15T22:56:02.038Z&quot;);\r\n\r\n    DateFormat pstFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;);\r\n    pstFormat.setTimeZone(TimeZone.getTimeZone(&quot;PST&quot;));\r\n\r\n    System.out.println(pstFormat.format(date));\r\n\r\nThis prints `2012-08-15T15:56:02.038`\r\n\r\nNote that I left out the `&#39;Z&#39;` in the PST format as it indicates UTC. If you just went with `Z` then the output would be `2012-08-15T15:56:02.038-0700`","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p><code>Date</code> has no timezone and internally stores in UTC. Only when a date is formatted is the timezone correction applies. When using a <code>DateFormat</code>, it defaults to the timezone of the JVM it's running in. Use <code>setTimeZone</code> to change it as necessary.</p>\n\n<pre><code>DateFormat utcFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\");\nutcFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\nDate date = utcFormat.parse(\"2012-08-15T22:56:02.038Z\");\n\nDateFormat pstFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS\");\npstFormat.setTimeZone(TimeZone.getTimeZone(\"PST\"));\n\nSystem.out.println(pstFormat.format(date));\n</code></pre>\n\n<p>This prints <code>2012-08-15T15:56:02.038</code></p>\n\n<p>Note that I left out the <code>'Z'</code> in the PST format as it indicates UTC. If you just went with <code>Z</code> then the output would be <code>2012-08-15T15:56:02.038-0700</code></p>\n"},{"tags":[],"owner":{"account_id":3908294,"reputation":3454,"user_id":3234352,"accept_rate":68,"display_name":"Sathya Baman"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1494223550,"creation_date":1494223550,"answer_id":43840821,"question_id":12487125,"body_markdown":"**Here is a Simple Modified solution**\r\n\r\n\r\n        public String convertToCurrentTimeZone(String Date) {\r\n                String converted_date = &quot;&quot;;\r\n                try {\r\n        \r\n                    DateFormat utcFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                    utcFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n        \r\n                    Date date = utcFormat.parse(Date);\r\n        \r\n                    DateFormat currentTFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                    currentTFormat.setTimeZone(TimeZone.getTimeZone(getCurrentTimeZone()));\r\n        \r\n                    converted_date =  currentTFormat.format(date);\r\n                }catch (Exception e){ e.printStackTrace();}\r\n        \r\n                return converted_date;\r\n        }\r\n        \r\n        \r\n        //get the current time zone\r\n        \r\n        public String getCurrentTimeZone(){\r\n                TimeZone tz = Calendar.getInstance().getTimeZone();\r\n                System.out.println(tz.getDisplayName());\r\n                return tz.getID();\r\n        }","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p><strong>Here is a Simple Modified solution</strong></p>\n\n<pre><code>    public String convertToCurrentTimeZone(String Date) {\n            String converted_date = \"\";\n            try {\n\n                DateFormat utcFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                utcFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\n                Date date = utcFormat.parse(Date);\n\n                DateFormat currentTFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                currentTFormat.setTimeZone(TimeZone.getTimeZone(getCurrentTimeZone()));\n\n                converted_date =  currentTFormat.format(date);\n            }catch (Exception e){ e.printStackTrace();}\n\n            return converted_date;\n    }\n\n\n    //get the current time zone\n\n    public String getCurrentTimeZone(){\n            TimeZone tz = Calendar.getInstance().getTimeZone();\n            System.out.println(tz.getDisplayName());\n            return tz.getID();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1504334422,"creation_date":1504334016,"answer_id":46011166,"question_id":12487125,"body_markdown":"Use the modern Java date &amp; time API, and this is straightforward:\r\n\r\n\t\tString inputValue = &quot;2012-08-15T22:56:02.038Z&quot;;\r\n\t\tInstant timestamp = Instant.parse(inputValue);\r\n\t\tZonedDateTime losAngelesTime = timestamp.atZone(ZoneId.of(&quot;America/Los_Angeles&quot;));\r\n\t\tSystem.out.println(losAngelesTime);\r\n\r\nThis prints\r\n\r\n    2012-08-15T15:56:02.038-07:00[America/Los_Angeles]\r\n\r\nPoints to note:\r\n\r\n - Theres a little bug in your expectations. The `Z` in your timestamp means UTC, also known as Zulu time. So in your local time value, the `Z` should not be there. Rather you would want a return value like for example `2012-08-15T15:56:02.038-07:00`, since the offset is now -7 hours rather than Z.\r\n - Avoid the three letter time zone abbreviations. They are not standardized and therefore most often ambiguous. PST, for example, may mean Philppine Standard Time, Pacific Standard Time or Pitcairn Standard Time (though S in an abbreviation is often for summer time (meaning DST)). If you intended Pacific Standard Time, that isnt even a time zone, since in summer (where your sample timestamp falls) Pacific Daylight Time is used instead. Instead of the abbreviations use time zone IDs in the format *region/city* as in my code.\r\n - Timestamps are generally best handled as `Instant` objects. Convert to `ZonedDateTime` only when you have a need, like for presentation.\r\n\r\n**Question: Can I use the modern API with my Java version?**\r\n\r\nIf using at least Java **6**, you can.\r\n\r\n - In Java 8 and later the new API comes built-in.\r\n - In Java 6 and 7 get [the ThreeTen Backport](http://www.threeten.org/threetenbp/), the backport of the new classes (thats ThreeTen for JSR-310, where the modern API was first defined).\r\n - On Android, use the Android edition of ThreeTen Backport. Its called ThreeTenABP, and I think that theres a wonderful explanation in [this question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p>Use the modern Java date &amp; time API, and this is straightforward:</p>\n\n<pre><code>    String inputValue = \"2012-08-15T22:56:02.038Z\";\n    Instant timestamp = Instant.parse(inputValue);\n    ZonedDateTime losAngelesTime = timestamp.atZone(ZoneId.of(\"America/Los_Angeles\"));\n    System.out.println(losAngelesTime);\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>2012-08-15T15:56:02.038-07:00[America/Los_Angeles]\n</code></pre>\n\n<p>Points to note:</p>\n\n<ul>\n<li>Theres a little bug in your expectations. The <code>Z</code> in your timestamp means UTC, also known as Zulu time. So in your local time value, the <code>Z</code> should not be there. Rather you would want a return value like for example <code>2012-08-15T15:56:02.038-07:00</code>, since the offset is now -7 hours rather than Z.</li>\n<li>Avoid the three letter time zone abbreviations. They are not standardized and therefore most often ambiguous. PST, for example, may mean Philppine Standard Time, Pacific Standard Time or Pitcairn Standard Time (though S in an abbreviation is often for summer time (meaning DST)). If you intended Pacific Standard Time, that isnt even a time zone, since in summer (where your sample timestamp falls) Pacific Daylight Time is used instead. Instead of the abbreviations use time zone IDs in the format <em>region/city</em> as in my code.</li>\n<li>Timestamps are generally best handled as <code>Instant</code> objects. Convert to <code>ZonedDateTime</code> only when you have a need, like for presentation.</li>\n</ul>\n\n<p><strong>Question: Can I use the modern API with my Java version?</strong></p>\n\n<p>If using at least Java <strong>6</strong>, you can.</p>\n\n<ul>\n<li>In Java 8 and later the new API comes built-in.</li>\n<li>In Java 6 and 7 get <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">the ThreeTen Backport</a>, the backport of the new classes (thats ThreeTen for JSR-310, where the modern API was first defined).</li>\n<li>On Android, use the Android edition of ThreeTen Backport. Its called ThreeTenABP, and I think that theres a wonderful explanation in <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">this question: How to use ThreeTenABP in Android Project</a>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28957321,"reputation":1,"user_id":22180602,"display_name":"Wolfgang Hasler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290177,"creation_date":1690290177,"answer_id":76762985,"question_id":12487125,"body_markdown":"        Instant timestamp = Instant.parse(&quot;2023-07-25T11:04:31.650Z&quot;);  \r\n        System.out.println(timestamp.atZone(ZoneId.systemDefault()).toOffsetDateTime());\r\n\r\nPrints for my location:\r\n\r\n2023-07-25T13:04:31.650+02:00\r\n\r\n\r\n\r\n","title":"Java: How do you convert a UTC timestamp to local time?","body":"<pre><code>    Instant timestamp = Instant.parse(&quot;2023-07-25T11:04:31.650Z&quot;);  \n    System.out.println(timestamp.atZone(ZoneId.systemDefault()).toOffsetDateTime());\n</code></pre>\n<p>Prints for my location:</p>\n<p>2023-07-25T13:04:31.650+02:00</p>\n"}],"owner":{"account_id":932593,"reputation":3291,"user_id":962146,"accept_rate":58,"display_name":"Android Noob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140163,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":12487281,"answer_count":4,"score":50,"last_activity_date":1690292502,"creation_date":1348015879,"question_id":12487125,"body_markdown":"I have a timestamp that&#39;s in UTC and I want to convert it to local time without using an API call like `TimeZone.getTimeZone(&quot;PST&quot;)`.  How exactly are you supposed to do this?  I&#39;ve been using the following code without much success:\r\n\r\n    private static final SimpleDateFormat mSegmentStartTimeFormatter = new        SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;);\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tcalendar.setTime(mSegmentStartTimeFormatter.parse(startTime));\r\n\t\t}\r\n\t\tcatch (ParseException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\treturn calendar.getTimeInMillis();\r\n\r\nSample input value: `[2012-08-15T22:56:02.038Z]`\r\n\r\nshould return the equivalent of `[2012-08-15T15:56:02.038Z]`","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p>I have a timestamp that's in UTC and I want to convert it to local time without using an API call like <code>TimeZone.getTimeZone(\"PST\")</code>.  How exactly are you supposed to do this?  I've been using the following code without much success:</p>\n\n<pre><code>private static final SimpleDateFormat mSegmentStartTimeFormatter = new        SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS\");\n\nCalendar calendar = Calendar.getInstance();\n\n    try {\n        calendar.setTime(mSegmentStartTimeFormatter.parse(startTime));\n    }\n    catch (ParseException e) {\n        e.printStackTrace();\n    }\n\n    return calendar.getTimeInMillis();\n</code></pre>\n\n<p>Sample input value: <code>[2012-08-15T22:56:02.038Z]</code></p>\n\n<p>should return the equivalent of <code>[2012-08-15T15:56:02.038Z]</code></p>\n"},{"tags":["java","spring","spring-batch"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1598287536,"post_id":63565151,"comment_id":112403273,"body_markdown":"You store them in some temporary repository, like a database or filesystem?","body":"You store them in some temporary repository, like a database or filesystem?"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598288650,"post_id":63565151,"comment_id":112403855,"body_markdown":"I am looking for a solution that hopefully conveys in the context of springbatch","body":"I am looking for a solution that hopefully conveys in the context of springbatch"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1598291595,"post_id":63565151,"comment_id":112405259,"body_markdown":"Just create a composite writer that does logging and then the analyzing. Basically you shoehorned logging into a seperate step. Heck you could even use an `ItemListener` or `StepListener` for that and log the written items (which would probably be more suiteable for the task).","body":"Just create a composite writer that does logging and then the analyzing. Basically you shoehorned logging into a seperate step. Heck you could even use an <code>ItemListener</code> or <code>StepListener</code> for that and log the written items (which would probably be more suiteable for the task)."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1598341831,"post_id":63565151,"comment_id":112419548,"body_markdown":"You defined an item processor but you did not set it on the step. Is that intended? `performing some processing against it rather than just logging it`: You can implement that processing in the item processor. Are you sure you need a second step for the processing?","body":"You defined an item processor but you did not set it on the step. Is that intended? <code>performing some processing against it rather than just logging it</code>: You can implement that processing in the item processor. Are you sure you need a second step for the processing?"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598533925,"post_id":63565151,"comment_id":112494376,"body_markdown":"@M.Deinum , thanks. would it be possible to explain how I can share data for a second step using an itemlistener or steplistener? thank you.","body":"@M.Deinum , thanks. would it be possible to explain how I can share data for a second step using an itemlistener or steplistener? thank you."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1598535361,"post_id":63565151,"comment_id":112495284,"body_markdown":"Don&#39;t. As stated you are splitting something in 2 steps which you shouldn&#39;t split. You shouldn&#39;t store data in an item listener.","body":"Don&#39;t. As stated you are splitting something in 2 steps which you shouldn&#39;t split. You shouldn&#39;t store data in an item listener."}],"answers":[{"tags":[],"owner":{"account_id":16623452,"reputation":902,"user_id":12013107,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598292337,"creation_date":1598292337,"answer_id":63566381,"question_id":63565151,"body_markdown":"If you do not want to write the data in the database or filesystem, one way to achieve the same is like below:\r\n\r\n 1. Create your own job context bean in your `config` class having the required properties and annotated it with `@JobScope`.\r\n 2. Implement `org.springframework.batch.core.step.tasklet` interface to your reader, processor and writer classes. If you want more control over steps you can also implement `org.springframework.batch.core.StepExecutionListener` with it.\r\n 3. Get your own `context` object using `@Autowire` and use the setter-getter method of it to store and retrieve the data.\r\n\r\nSample Code:\r\n\r\n**Config.java**\r\n\r\n    @Autowired\r\n    private Processor processor;\r\n    \r\n    @Autowired\r\n    private Reader reader;\r\n    \r\n    @Autowired\r\n    private Writer writer;\r\n    \r\n    @Autowired\r\n    private JobBuilderFactory jobBuilderFactory;\r\n    \t \r\n    @Autowired\r\n    private StepBuilderFactory stepBuilderFactory;\r\n    \r\n    @Bean\r\n    @JobScope\r\n    public JobContext getJobContexts() {\r\n    \tJobContext newJobContext = new JobContext();\r\n    \treturn newJobContext;\r\n    }\r\n    \r\n    @Bean\r\n    public Step reader() {\r\n    \t  return stepBuilderFactory.get(&quot;reader&quot;)\r\n    \t    .tasklet(reader)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    @Bean\r\n    public Step processor() {\r\n    \t  return stepBuilderFactory.get(&quot;processor&quot;)\r\n    \t    .tasklet(processor)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    @Bean\r\n    public Step writer() {\r\n    \t  return stepBuilderFactory.get(&quot;writer&quot;)\r\n    \t    .tasklet(writer)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    \r\n    public Job testJob() {\r\n    \t  \r\n    \t  return jobBuilderFactory.get(&quot;testJob&quot;)\r\n    \t    .start(reader())\r\n    \t    .next(processor())\r\n    \t    .next(writer())\r\n    \t    .build();\r\n    \t }\r\n  \r\n    //Below will start the job\r\n    @Scheduled(fixedRate = 1000)\r\n    \tpublic void starJob(){\r\n    \t\t\r\n    \t\tMap&lt;String, JobParameter&gt; confMap = new HashMap&lt;&gt;();\r\n    \t\tconfMap.put(&quot;time&quot;, new JobParameter(new Date()));\r\n    \t\tJobParameters jobParameters = new JobParameters(confMap);\r\n    \t\tmonitorJobLauncher.run(testJob(), jobParameters);\r\n    \t\t\r\n    }\r\n\r\n**JobContext.java**\r\n \r\n\r\n    private List&lt;StuffDto&gt; dataToProcess = new ArrayList&lt;&gt;();\r\n    private List&lt;StuffDto&gt; dataToWrite = new ArrayList&lt;&gt;();\r\n    \r\n    //getter\r\n\r\n**SampleReader.java**\r\n\r\n    @Component\r\n    public class SampleReader  implements Tasklet,StepExecutionListener{\r\n            @Autowired\r\n        \tprivate JobContext context;\r\n           \r\n          @Override\r\n          public void beforeStep(StepExecution stepExecution) {\r\n        //logic that you need to perform before the execution of this step.\r\n          }\r\n        \r\n        @Override\r\n          public void afterStep(StepExecution stepExecution) {\r\n        //logic that you need to perform after the execution of this step.\r\n          }\r\n        \r\n        @Override\r\n        public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\r\n         // Whatever code is here will get executed for reader.\r\n         //  Fetch StuffDto object from database and add it to jobContext \r\n       //dataToProcess list.\r\n        return RepeatStatus.FINISHED;\r\n        }\r\n    }\r\n\r\n**SampleProcessor.java**\r\n\r\n  \r\n\r\n       @Component\r\n       public class SampleProcessor  implements Tasklet{\r\n        \r\n           @Autowired\r\n           private JobContext context;\r\n        \r\n            @Override\r\n            public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\r\n            \r\n             // Whatever code is here will get executed for processor.\r\n            // context.getDataToProcessList();\r\n           // apply business logic and set the data to write.\r\n    \r\n    return RepeatStatus.FINISHED;\r\n        }\r\n\r\nSame ways for the `writer` class. \r\n\r\n**Note**: Please note here that here you need to write database-related boilerplate code on your own. But this way you can have more control over your logic and nothing to worry about context size limit. All the data will be in memory so as soon as operation done those will be garbage collected. I hope you get the idea of what I willing to convey.\r\n\r\nTo read more about `Tasklet` vs `Chunk` read [this][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-batch-tasklet-chunk","title":"SpringBatch Sharing Large Amounts of Data Between Steps","body":"<p>If you do not want to write the data in the database or filesystem, one way to achieve the same is like below:</p>\n<ol>\n<li>Create your own job context bean in your <code>config</code> class having the required properties and annotated it with <code>@JobScope</code>.</li>\n<li>Implement <code>org.springframework.batch.core.step.tasklet</code> interface to your reader, processor and writer classes. If you want more control over steps you can also implement <code>org.springframework.batch.core.StepExecutionListener</code> with it.</li>\n<li>Get your own <code>context</code> object using <code>@Autowire</code> and use the setter-getter method of it to store and retrieve the data.</li>\n</ol>\n<p>Sample Code:</p>\n<p><strong>Config.java</strong></p>\n<pre><code>@Autowired\nprivate Processor processor;\n\n@Autowired\nprivate Reader reader;\n\n@Autowired\nprivate Writer writer;\n\n@Autowired\nprivate JobBuilderFactory jobBuilderFactory;\n     \n@Autowired\nprivate StepBuilderFactory stepBuilderFactory;\n\n@Bean\n@JobScope\npublic JobContext getJobContexts() {\n    JobContext newJobContext = new JobContext();\n    return newJobContext;\n}\n\n@Bean\npublic Step reader() {\n      return stepBuilderFactory.get(&quot;reader&quot;)\n        .tasklet(reader)\n        .build();\n     }\n\n@Bean\npublic Step processor() {\n      return stepBuilderFactory.get(&quot;processor&quot;)\n        .tasklet(processor)\n        .build();\n     }\n\n@Bean\npublic Step writer() {\n      return stepBuilderFactory.get(&quot;writer&quot;)\n        .tasklet(writer)\n        .build();\n     }\n\n\npublic Job testJob() {\n      \n      return jobBuilderFactory.get(&quot;testJob&quot;)\n        .start(reader())\n        .next(processor())\n        .next(writer())\n        .build();\n     }\n\n//Below will start the job\n@Scheduled(fixedRate = 1000)\n    public void starJob(){\n        \n        Map&lt;String, JobParameter&gt; confMap = new HashMap&lt;&gt;();\n        confMap.put(&quot;time&quot;, new JobParameter(new Date()));\n        JobParameters jobParameters = new JobParameters(confMap);\n        monitorJobLauncher.run(testJob(), jobParameters);\n        \n}\n</code></pre>\n<p><strong>JobContext.java</strong></p>\n<pre><code>private List&lt;StuffDto&gt; dataToProcess = new ArrayList&lt;&gt;();\nprivate List&lt;StuffDto&gt; dataToWrite = new ArrayList&lt;&gt;();\n\n//getter\n</code></pre>\n<p><strong>SampleReader.java</strong></p>\n<pre><code>@Component\npublic class SampleReader  implements Tasklet,StepExecutionListener{\n        @Autowired\n        private JobContext context;\n       \n      @Override\n      public void beforeStep(StepExecution stepExecution) {\n    //logic that you need to perform before the execution of this step.\n      }\n    \n    @Override\n      public void afterStep(StepExecution stepExecution) {\n    //logic that you need to perform after the execution of this step.\n      }\n    \n    @Override\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\n     // Whatever code is here will get executed for reader.\n     //  Fetch StuffDto object from database and add it to jobContext \n   //dataToProcess list.\n    return RepeatStatus.FINISHED;\n    }\n}\n</code></pre>\n<p><strong>SampleProcessor.java</strong></p>\n<pre><code>   @Component\n   public class SampleProcessor  implements Tasklet{\n    \n       @Autowired\n       private JobContext context;\n    \n        @Override\n        public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\n        \n         // Whatever code is here will get executed for processor.\n        // context.getDataToProcessList();\n       // apply business logic and set the data to write.\n\nreturn RepeatStatus.FINISHED;\n    }\n</code></pre>\n<p>Same ways for the <code>writer</code> class.</p>\n<p><strong>Note</strong>: Please note here that here you need to write database-related boilerplate code on your own. But this way you can have more control over your logic and nothing to worry about context size limit. All the data will be in memory so as soon as operation done those will be garbage collected. I hope you get the idea of what I willing to convey.</p>\n<p>To read more about <code>Tasklet</code> vs <code>Chunk</code> read <a href=\"https://www.baeldung.com/spring-batch-tasklet-chunk\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2348,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63566381,"answer_count":1,"score":1,"last_activity_date":1690292239,"creation_date":1598286999,"question_id":63565151,"body_markdown":"I have a need to share relatively large amounts of data between job steps for a spring batch implementation. I am aware of `StepExecutionContext` and `JobExecutionContext` as mechanisms for this. However, I read that since these must be limited in size (less than 2500 characters). That is too small for my needs. In my novice one-step `Spring Batch` implementation, my single step job is as below:\r\n\r\n```\r\n@Configuration\r\n@EnableBatchProcessing\r\npublic class BatchConfig {\r\n\r\n    @Autowired\r\n    public JobBuilderFactory jobBuilderFactory;\r\n\r\n    @Autowired\r\n    public StepBuilderFactory stepBuilderFactory;\r\n\r\n\r\n    private static final String GET_DATA =\r\n    &quot;    SELECT &quot; +\r\n    &quot;stuffA, &quot; +\r\n    &quot;stuffB, &quot; +\r\n    &quot;FROM STUFF_TABLE &quot; +\r\n    &quot;ORDER BY stuffA ASC&quot;;\r\n\r\n    @Bean\r\n    public ItemReader&lt;StuffDto&gt; databaseCursorItemReader(DataSource dataSource) {\r\n        return new JdbcCursorItemReaderBuilder&lt;StuffDto&gt;()\r\n                .name(&quot;cursorItemReader&quot;)\r\n            .dataSource(dataSource)\r\n            .sql(GET_DATA)\r\n            .rowMapper(new BeanPropertyRowMapper&lt;&gt;(StuffDto.class))\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    ItemProcessor&lt;StuffDto, StuffDto&gt; databaseXmlItemProcessor() {\r\n        return new QueryLoggingProcessor();\r\n    }\r\n\r\n    @Bean\r\n    public ItemWriter&lt;StuffDto&gt; databaseCursorItemWriter() {\r\n        return new LoggingItemWriter();\r\n    }\r\n\r\n    @Bean\r\n    public Step databaseCursorStep(@Qualifier(&quot;databaseCursorItemReader&quot;) ItemReader&lt;StuffDto&gt; reader,\r\n    @Qualifier(&quot;databaseCursorItemWriter&quot;) ItemWriter&lt;StuffDto&gt; writer,\r\n    StepBuilderFactory stepBuilderFactory) {\r\n        return stepBuilderFactory.get(&quot;databaseCursorStep&quot;)\r\n            .&lt;StuffDto, StuffDto&gt;chunk(1)\r\n        .reader(reader)\r\n            .writer(writer)\r\n            .build();\r\n    }\r\n\r\n    @Bean\r\n    public Job databaseCursorJob(@Qualifier(&quot;databaseCursorStep&quot;) Step exampleJobStep,\r\n    JobBuilderFactory jobBuilderFactory) {\r\n        return jobBuilderFactory.get(&quot;databaseCursorJob&quot;)\r\n            .incrementer(new RunIdIncrementer())\r\n            .flow(exampleJobStep)\r\n            .end()\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\nThis works fine in the sense that I can successfully read from the database and write in the writer step to a loggingitemwriter like this:\r\n\r\n```\r\npublic class LoggingItemWriter implements ItemWriter&lt;StuffDto&gt; {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\r\n\r\n    @Override\r\n    public void write(List&lt;? extends StuffDto&gt; list) throws Exception {\r\n        LOGGER.info(&quot;Writing stuff: {}&quot;, list);\r\n    }\r\n}\r\n```\r\n\r\nHowever, I need to be able to make available that `StuffDto` (or equivalent) and it&#39;s data to a second step that would be performing some processing against it rather than just logging it. \r\n\r\nI would be grateful for any ideas on how that could be accomplished if you assume that the step and job contexts are too limited. Thanks.","title":"SpringBatch Sharing Large Amounts of Data Between Steps","body":"<p>I have a need to share relatively large amounts of data between job steps for a spring batch implementation. I am aware of <code>StepExecutionContext</code> and <code>JobExecutionContext</code> as mechanisms for this. However, I read that since these must be limited in size (less than 2500 characters). That is too small for my needs. In my novice one-step <code>Spring Batch</code> implementation, my single step job is as below:</p>\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class BatchConfig {\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n\n\n    private static final String GET_DATA =\n    &quot;    SELECT &quot; +\n    &quot;stuffA, &quot; +\n    &quot;stuffB, &quot; +\n    &quot;FROM STUFF_TABLE &quot; +\n    &quot;ORDER BY stuffA ASC&quot;;\n\n    @Bean\n    public ItemReader&lt;StuffDto&gt; databaseCursorItemReader(DataSource dataSource) {\n        return new JdbcCursorItemReaderBuilder&lt;StuffDto&gt;()\n                .name(&quot;cursorItemReader&quot;)\n            .dataSource(dataSource)\n            .sql(GET_DATA)\n            .rowMapper(new BeanPropertyRowMapper&lt;&gt;(StuffDto.class))\n                .build();\n    }\n\n    @Bean\n    ItemProcessor&lt;StuffDto, StuffDto&gt; databaseXmlItemProcessor() {\n        return new QueryLoggingProcessor();\n    }\n\n    @Bean\n    public ItemWriter&lt;StuffDto&gt; databaseCursorItemWriter() {\n        return new LoggingItemWriter();\n    }\n\n    @Bean\n    public Step databaseCursorStep(@Qualifier(&quot;databaseCursorItemReader&quot;) ItemReader&lt;StuffDto&gt; reader,\n    @Qualifier(&quot;databaseCursorItemWriter&quot;) ItemWriter&lt;StuffDto&gt; writer,\n    StepBuilderFactory stepBuilderFactory) {\n        return stepBuilderFactory.get(&quot;databaseCursorStep&quot;)\n            .&lt;StuffDto, StuffDto&gt;chunk(1)\n        .reader(reader)\n            .writer(writer)\n            .build();\n    }\n\n    @Bean\n    public Job databaseCursorJob(@Qualifier(&quot;databaseCursorStep&quot;) Step exampleJobStep,\n    JobBuilderFactory jobBuilderFactory) {\n        return jobBuilderFactory.get(&quot;databaseCursorJob&quot;)\n            .incrementer(new RunIdIncrementer())\n            .flow(exampleJobStep)\n            .end()\n            .build();\n    }\n}\n</code></pre>\n<p>This works fine in the sense that I can successfully read from the database and write in the writer step to a loggingitemwriter like this:</p>\n<pre><code>public class LoggingItemWriter implements ItemWriter&lt;StuffDto&gt; {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\n\n    @Override\n    public void write(List&lt;? extends StuffDto&gt; list) throws Exception {\n        LOGGER.info(&quot;Writing stuff: {}&quot;, list);\n    }\n}\n</code></pre>\n<p>However, I need to be able to make available that <code>StuffDto</code> (or equivalent) and it's data to a second step that would be performing some processing against it rather than just logging it.</p>\n<p>I would be grateful for any ideas on how that could be accomplished if you assume that the step and job contexts are too limited. Thanks.</p>\n"},{"tags":["java","validation","bean-validation","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1329145344,"creation_date":1329145344,"answer_id":9262669,"question_id":9251671,"body_markdown":"With Bean Validation that is not possible. Only class level constraints have access to the validation root. A property level constraint has only access to the validated value. This might change in Bean Validation 1.1.\r\n\r\nYou could write your custom ConstraintValiatorFactory which allows injection.","title":"JSR303 Validation: Pass in an Object/Context Information at runtime?","body":"<p>With Bean Validation that is not possible. Only class level constraints have access to the validation root. A property level constraint has only access to the validated value. This might change in Bean Validation 1.1.</p>\n\n<p>You could write your custom ConstraintValiatorFactory which allows injection.</p>\n"}],"owner":{"account_id":1167224,"reputation":2444,"user_id":1145216,"accept_rate":78,"display_name":"user1145216"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":9262669,"answer_count":1,"score":0,"last_activity_date":1690291817,"creation_date":1329073050,"question_id":9251671,"body_markdown":"I have an List of String-IDs in a bean that I like to validate against a &quot;Reference List&quot; of String ids:\r\n\r\n    @MyIdListValidator  \r\n    private List&lt;String&gt; idsFromHtmlForm;  //These need to be validate against an ID list from DB\r\n\r\nSo I have to somehow inject the &quot;Reference List&quot; with all valid values to check against **at rumtime**. (These reference ids read/generated from the database at runtime). This is a webapplication (Struts) and I am really wondering why this seems to be not possible, but is a use-case that is prevalent in millions of webapplications. How do you solve this?\r\n\r\nIs there some way to either inject any arbitrary information (context objects) to the ```validator.validate(form);``` method?\r\n\r\nAnd is there an easy way to get access to the whole(!!) object being validated in this method:\r\n\r\n\r\n`public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext)` of  `ConstraintValidator&lt;Date,String&gt;,`\r\n\r\nNote:  My question is not related to class level validations, but to property level validations if there is a trick to get access to the whole object (the property belongs to), not only the value of a property itself. (If I would have access to the whole instance/class being validated I could set the data there as a secondary property, it is messy but would be a solution).\r\n\t\r\n\r\n\r\n\r\n\r\n\r\nThanks very much","title":"JSR303 Validation: Pass in an Object/Context Information at runtime?","body":"<p>I have an List of String-IDs in a bean that I like to validate against a &quot;Reference List&quot; of String ids:</p>\n<pre><code>@MyIdListValidator  \nprivate List&lt;String&gt; idsFromHtmlForm;  //These need to be validate against an ID list from DB\n</code></pre>\n<p>So I have to somehow inject the &quot;Reference List&quot; with all valid values to check against <strong>at rumtime</strong>. (These reference ids read/generated from the database at runtime). This is a webapplication (Struts) and I am really wondering why this seems to be not possible, but is a use-case that is prevalent in millions of webapplications. How do you solve this?</p>\n<p>Is there some way to either inject any arbitrary information (context objects) to the <code>validator.validate(form);</code> method?</p>\n<p>And is there an easy way to get access to the whole(!!) object being validated in this method:</p>\n<p><code>public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext)</code> of  <code>ConstraintValidator&lt;Date,String&gt;,</code></p>\n<p>Note:  My question is not related to class level validations, but to property level validations if there is a trick to get access to the whole object (the property belongs to), not only the value of a property itself. (If I would have access to the whole instance/class being validated I could set the data there as a secondary property, it is messy but would be a solution).</p>\n<p>Thanks very much</p>\n"},{"tags":["javascript","java","digital-signature","dss"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690279572,"post_id":76755188,"comment_id":135327945,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":24987108,"reputation":1,"user_id":18848767,"display_name":"Frago Mehdi"},"score":0,"creation_date":1690291826,"post_id":76755188,"comment_id":135330669,"body_markdown":"I just edited the question and added the source code to retrieve the positions. But my question in the first place is just to know the unit for DSS and for the front or the converter that must be put","body":"I just edited the question and added the source code to retrieve the positions. But my question in the first place is just to know the unit for DSS and for the front or the converter that must be put"}],"owner":{"account_id":24987108,"reputation":1,"user_id":18848767,"display_name":"Frago Mehdi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690291760,"creation_date":1690206888,"question_id":76755188,"body_markdown":"I have developed an online electronic signature application using DSS which works well.\r\n\r\nNow I&#39;m integrating a web application that allows users to position a signature area in a PDF (using Javascript) and then I get the X and Y positions.\r\n\r\nThe problem I encounter is that the positions I retrieve from the front application are shifted after signing at the DSS level.\r\n\r\nMay I know what unit of measurement is used at DSS level (originX and originY)?\r\n\r\nWhat I&#39;m doing right now is getting the positions provided at the web application level and converting by multiplying by 0.75 which decreases the lag a little but not top\r\n\r\nHere is the source code to retrieve pdf positions from front application : \r\n\r\n**index.html**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n      &lt;title&gt;Positionnement de la zone de signature dans un PDF&lt;/title&gt;\r\n      &lt;style&gt;\r\n       \r\n        #signatureZone {\r\n          position: absolute;\r\n          top: 100px;\r\n          left: 100px;\r\n          width: 150px;\r\n          height: 50px;\r\n          border: 2px dashed #f00;\r\n          cursor: grab;\r\n        }\r\n        #pdfContainer {\r\n          overflow-y: scroll; /* Ajoute une barre de d&#233;filement verticale */\r\n          width: 600px;\r\n          height: 600px;\r\n          border: 1px solid #ccc;\r\n        }\r\n        #pdfPages {\r\n          height: 100%; /* Remplit toute la hauteur du conteneur */\r\n        }\r\n        .page {\r\n      display: block;\r\n      margin: 10px auto;\r\n      max-width: 100%;\r\n    }\r\n      &lt;/style&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n      &lt;div id=&quot;pdfContainer&quot;&gt;\r\n            &lt;div id=&quot;pdfPages&quot;&gt;&lt;/div&gt;\r\n    \r\n      &lt;/div&gt;\r\n         &lt;div id=&quot;signatureZone&quot;&gt;&lt;/div&gt;\r\n        &lt;button id=&quot;prevPage&quot;&gt;Precedent&lt;/button&gt;\r\n      &lt;button id=&quot;nextPage&quot;&gt;Suivant&lt;/button&gt;\r\n      &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;pdf.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;pdf.worker.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**script.js**\r\n\r\n    let pdfDoc = null;\r\n    let pageNum = 1;\r\n    let pageRendering = false;\r\n    let pageNumPending = null;\r\n    const scale = 1.5; // Ajustez la valeur si n&#233;cessaire\r\n    const signatureZone = document.getElementById(&#39;signatureZone&#39;);\r\n    let offsetX, offsetY;\r\n    let isDragging = false;\r\n    let currentPage = 1; // Variable pour stocker le num&#233;ro de la page actuelle\r\n    \r\n    \r\n    // Gestionnaires d&#39;&#233;v&#233;nements pour faire glisser la zone de signature\r\n    signatureZone.addEventListener(&#39;mousedown&#39;, startDragging);\r\n    signatureZone.addEventListener(&#39;mousemove&#39;, drag);\r\n    signatureZone.addEventListener(&#39;mouseup&#39;, endDragging);\r\n    signatureZone.addEventListener(&#39;mouseleave&#39;, endDragging);\r\n    \r\n    // Charge le PDF et affiche la premi&#232;re page\r\n    pdfjsLib.getDocument(&#39;exemple.pdf&#39;).promise.then(function (pdf) {\r\n      pdfDoc = pdf;\r\n      renderPage(pageNum);\r\n      // displayPages(pdf.numPages);\r\n    });\r\n    \r\n    function displayPages(numPages) {\r\n      const pdfPagesContainer = document.getElementById(&#39;pdfPages&#39;);\r\n    \r\n      for (let i = 1; i &lt;= numPages; i++) {\r\n        const pageDiv = document.createElement(&#39;div&#39;);\r\n        pageDiv.className = &#39;page&#39;;\r\n        pdfPagesContainer.appendChild(pageDiv);\r\n    \r\n        // Affiche chaque page dans le div cr&#233;&#233; ci-dessus\r\n        pdfDoc.getPage(i).then(function (page) {\r\n          const canvas = document.createElement(&#39;canvas&#39;);\r\n          const context = canvas.getContext(&#39;2d&#39;);\r\n          const viewport = page.getViewport({ scale });\r\n          canvas.height = viewport.height;\r\n          canvas.width = viewport.width;\r\n          const renderContext = {\r\n            canvasContext: context,\r\n            viewport: viewport,\r\n          };\r\n          page.render(renderContext).promise.then(function () {\r\n            pageDiv.appendChild(canvas);\r\n          });\r\n        });\r\n      }\r\n      // Met &#224; jour la variable currentPage avec le num&#233;ro de la page actuelle\r\n      currentPage = numPages;\r\n    }\r\n    \r\n    \r\n    function renderPage(num) {\r\n      pageRendering = true;\r\n      pdfDoc.getPage(num).then(function (page) {\r\n        const canvas = document.createElement(&#39;canvas&#39;);\r\n        const context = canvas.getContext(&#39;2d&#39;);\r\n        const viewport = page.getViewport({ scale });\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n    \r\n        const renderContext = {\r\n          canvasContext: context,\r\n          viewport: viewport,\r\n        };\r\n    \r\n        page.render(renderContext).promise.then(function () {\r\n          const pdfContainer = document.getElementById(&#39;pdfContainer&#39;);\r\n          pdfContainer.innerHTML = &#39;&#39;;\r\n          pdfContainer.appendChild(canvas);\r\n          pageRendering = false;\r\n          if (pageNumPending !== null) {\r\n            renderPage(pageNumPending);\r\n            pageNumPending = null;\r\n          }\r\n        });\r\n      });\r\n      // Met &#224; jour la variable currentPage avec le num&#233;ro de la page actuelle\r\n      currentPage = num;\r\n    }\r\n    \r\n    function queueRenderPage(num) {\r\n      if (pageRendering) {\r\n        pageNumPending = num;\r\n      } else {\r\n        renderPage(num);\r\n      }\r\n    }\r\n    \r\n    function onPrevPage() {\r\n      if (pageNum &lt;= 1) {\r\n        return;\r\n      }\r\n      pageNum--;\r\n      queueRenderPage(pageNum);\r\n    }\r\n    \r\n    function onNextPage() {\r\n      if (pageNum &gt;= pdfDoc.numPages) {\r\n        return;\r\n      }\r\n      pageNum++;\r\n      queueRenderPage(pageNum);\r\n    }\r\n    \r\n    function startDragging(e) {\r\n      isDragging = true;\r\n      offsetX = e.clientX - signatureZone.getBoundingClientRect().left;\r\n      offsetY = e.clientY - signatureZone.getBoundingClientRect().top;\r\n    }\r\n    \r\n    function drag(e) {\r\n      if (isDragging) {\r\n        e.preventDefault();\r\n        const containerRect = document.getElementById(&#39;pdfContainer&#39;).getBoundingClientRect();\r\n        const x = e.clientX - containerRect.left - offsetX;\r\n        const y = e.clientY - containerRect.top - offsetY;\r\n        signatureZone.style.left = `${x}px`;\r\n        signatureZone.style.top = `${y}px`;\r\n      }\r\n    }\r\n    \r\n    function endDragging() {\r\n      isDragging = false;\r\n    \r\n      // Enregistrez la position de la zone de signature ici, par exemple avec jQuery AJAX\r\n       const position = {\r\n        page: currentPage,\r\n        left: signatureZone.style.left,\r\n        top: signatureZone.style.top,\r\n      };\r\n    \r\n      console.log(&quot;position : &quot;, position)\r\n      // Vous pouvez ensuite envoyer la position au serveur pour enregistrement\r\n      // $.ajax({\r\n      //   url: &#39;/votre/endpoint&#39;,\r\n      //   type: &#39;POST&#39;,\r\n      //   data: position,\r\n      //   success: function (response) {\r\n      //     console.log(&#39;Position enregistr&#233;e avec succ&#232;s&#39;);\r\n      //   },\r\n      //   error: function (error) {\r\n      //     console.error(&#39;Erreur lors de l\\&#39;enregistrement de la position&#39;, error);\r\n      //   },\r\n      // });\r\n    }\r\n    \r\n    // Gestion des boutons pr&#233;c&#233;dents/suivants\r\n    document.getElementById(&#39;prevPage&#39;).addEventListener(&#39;click&#39;, onPrevPage);\r\n    document.getElementById(&#39;nextPage&#39;).addEventListener(&#39;click&#39;, onNextPage);\r\n\r\n","title":"Add signatyre field to PDF and use it on DSS","body":"<p>I have developed an online electronic signature application using DSS which works well.</p>\n<p>Now I'm integrating a web application that allows users to position a signature area in a PDF (using Javascript) and then I get the X and Y positions.</p>\n<p>The problem I encounter is that the positions I retrieve from the front application are shifted after signing at the DSS level.</p>\n<p>May I know what unit of measurement is used at DSS level (originX and originY)?</p>\n<p>What I'm doing right now is getting the positions provided at the web application level and converting by multiplying by 0.75 which decreases the lag a little but not top</p>\n<p>Here is the source code to retrieve pdf positions from front application :</p>\n<p><strong>index.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Positionnement de la zone de signature dans un PDF&lt;/title&gt;\n  &lt;style&gt;\n   \n    #signatureZone {\n      position: absolute;\n      top: 100px;\n      left: 100px;\n      width: 150px;\n      height: 50px;\n      border: 2px dashed #f00;\n      cursor: grab;\n    }\n    #pdfContainer {\n      overflow-y: scroll; /* Ajoute une barre de dfilement verticale */\n      width: 600px;\n      height: 600px;\n      border: 1px solid #ccc;\n    }\n    #pdfPages {\n      height: 100%; /* Remplit toute la hauteur du conteneur */\n    }\n    .page {\n  display: block;\n  margin: 10px auto;\n  max-width: 100%;\n}\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=&quot;pdfContainer&quot;&gt;\n        &lt;div id=&quot;pdfPages&quot;&gt;&lt;/div&gt;\n\n  &lt;/div&gt;\n     &lt;div id=&quot;signatureZone&quot;&gt;&lt;/div&gt;\n    &lt;button id=&quot;prevPage&quot;&gt;Precedent&lt;/button&gt;\n  &lt;button id=&quot;nextPage&quot;&gt;Suivant&lt;/button&gt;\n  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;pdf.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;pdf.worker.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>script.js</strong></p>\n<pre><code>let pdfDoc = null;\nlet pageNum = 1;\nlet pageRendering = false;\nlet pageNumPending = null;\nconst scale = 1.5; // Ajustez la valeur si ncessaire\nconst signatureZone = document.getElementById('signatureZone');\nlet offsetX, offsetY;\nlet isDragging = false;\nlet currentPage = 1; // Variable pour stocker le numro de la page actuelle\n\n\n// Gestionnaires d'vnements pour faire glisser la zone de signature\nsignatureZone.addEventListener('mousedown', startDragging);\nsignatureZone.addEventListener('mousemove', drag);\nsignatureZone.addEventListener('mouseup', endDragging);\nsignatureZone.addEventListener('mouseleave', endDragging);\n\n// Charge le PDF et affiche la premire page\npdfjsLib.getDocument('exemple.pdf').promise.then(function (pdf) {\n  pdfDoc = pdf;\n  renderPage(pageNum);\n  // displayPages(pdf.numPages);\n});\n\nfunction displayPages(numPages) {\n  const pdfPagesContainer = document.getElementById('pdfPages');\n\n  for (let i = 1; i &lt;= numPages; i++) {\n    const pageDiv = document.createElement('div');\n    pageDiv.className = 'page';\n    pdfPagesContainer.appendChild(pageDiv);\n\n    // Affiche chaque page dans le div cr ci-dessus\n    pdfDoc.getPage(i).then(function (page) {\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      const viewport = page.getViewport({ scale });\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n      };\n      page.render(renderContext).promise.then(function () {\n        pageDiv.appendChild(canvas);\n      });\n    });\n  }\n  // Met  jour la variable currentPage avec le numro de la page actuelle\n  currentPage = numPages;\n}\n\n\nfunction renderPage(num) {\n  pageRendering = true;\n  pdfDoc.getPage(num).then(function (page) {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const viewport = page.getViewport({ scale });\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n\n    const renderContext = {\n      canvasContext: context,\n      viewport: viewport,\n    };\n\n    page.render(renderContext).promise.then(function () {\n      const pdfContainer = document.getElementById('pdfContainer');\n      pdfContainer.innerHTML = '';\n      pdfContainer.appendChild(canvas);\n      pageRendering = false;\n      if (pageNumPending !== null) {\n        renderPage(pageNumPending);\n        pageNumPending = null;\n      }\n    });\n  });\n  // Met  jour la variable currentPage avec le numro de la page actuelle\n  currentPage = num;\n}\n\nfunction queueRenderPage(num) {\n  if (pageRendering) {\n    pageNumPending = num;\n  } else {\n    renderPage(num);\n  }\n}\n\nfunction onPrevPage() {\n  if (pageNum &lt;= 1) {\n    return;\n  }\n  pageNum--;\n  queueRenderPage(pageNum);\n}\n\nfunction onNextPage() {\n  if (pageNum &gt;= pdfDoc.numPages) {\n    return;\n  }\n  pageNum++;\n  queueRenderPage(pageNum);\n}\n\nfunction startDragging(e) {\n  isDragging = true;\n  offsetX = e.clientX - signatureZone.getBoundingClientRect().left;\n  offsetY = e.clientY - signatureZone.getBoundingClientRect().top;\n}\n\nfunction drag(e) {\n  if (isDragging) {\n    e.preventDefault();\n    const containerRect = document.getElementById('pdfContainer').getBoundingClientRect();\n    const x = e.clientX - containerRect.left - offsetX;\n    const y = e.clientY - containerRect.top - offsetY;\n    signatureZone.style.left = `${x}px`;\n    signatureZone.style.top = `${y}px`;\n  }\n}\n\nfunction endDragging() {\n  isDragging = false;\n\n  // Enregistrez la position de la zone de signature ici, par exemple avec jQuery AJAX\n   const position = {\n    page: currentPage,\n    left: signatureZone.style.left,\n    top: signatureZone.style.top,\n  };\n\n  console.log(&quot;position : &quot;, position)\n  // Vous pouvez ensuite envoyer la position au serveur pour enregistrement\n  // $.ajax({\n  //   url: '/votre/endpoint',\n  //   type: 'POST',\n  //   data: position,\n  //   success: function (response) {\n  //     console.log('Position enregistre avec succs');\n  //   },\n  //   error: function (error) {\n  //     console.error('Erreur lors de l\\'enregistrement de la position', error);\n  //   },\n  // });\n}\n\n// Gestion des boutons prcdents/suivants\ndocument.getElementById('prevPage').addEventListener('click', onPrevPage);\ndocument.getElementById('nextPage').addEventListener('click', onNextPage);\n</code></pre>\n"},{"tags":["java","inputstream"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1690285369,"post_id":76762343,"comment_id":135329090,"body_markdown":"`InputStream` has a `read` method. Start there, try to implement it, and if you get stuck, ask a new question with specific details.","body":"<code>InputStream</code> has a <code>read</code> method. Start there, try to implement it, and if you get stuck, ask a new question with specific details."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690285751,"post_id":76762343,"comment_id":135329166,"body_markdown":"Call `read()` on each and exit reading as soon as the two calls produce a differing value. You can short cut by returning false if the files (if they *are* files) differ in length","body":"Call <code>read()</code> on each and exit reading as soon as the two calls produce a differing value. You can short cut by returning false if the files (if they <i>are</i> files) differ in length"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1690286290,"post_id":76762343,"comment_id":135329265,"body_markdown":"Read the whole stream,  md5 it, if the hashes are different - the content is different.","body":"Read the whole stream,  md5 it, if the hashes are different - the content is different."}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690286201,"creation_date":1690285865,"answer_id":76762427,"question_id":76762343,"body_markdown":" \r\n\r\n&gt; How to compare content of 2 [InputStreams][1] Objects ?\r\n\r\nYou can read the data from each stream and compare their byte codes.\r\nNot that If the streams has different size then they are definitely not equal.\r\n\r\n\r\n    int cisByte = cis.read();\r\n    int resByte = resStream.read();\r\n\r\n    while (cisByte != -1 &amp;&amp; resByte != -1) {\r\n        if (cisByte != resByte) {\r\n            return false;\r\n        }\r\n        cisByte = cis.read();\r\n        resByte = resStream.read();\r\n    }\r\n\r\n    return cisByte == resByte;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html","title":"How to compare content of 2 InputStreams Objects","body":"<blockquote>\n<p>How to compare content of 2 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\">InputStreams</a> Objects ?</p>\n</blockquote>\n<p>You can read the data from each stream and compare their byte codes.\nNot that If the streams has different size then they are definitely not equal.</p>\n<pre><code>int cisByte = cis.read();\nint resByte = resStream.read();\n\nwhile (cisByte != -1 &amp;&amp; resByte != -1) {\n    if (cisByte != resByte) {\n        return false;\n    }\n    cisByte = cis.read();\n    resByte = resStream.read();\n}\n\nreturn cisByte == resByte;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1690286790,"creation_date":1690286790,"answer_id":76762553,"question_id":76762343,"body_markdown":"The idea is to read the whole stream as a String, then md5 the string, and finally check if the hashes are the same. MD5 guarantees that hashing the same string will produce the same result.\r\n\r\n```\r\npublic String readInputStreamAsString(InputStream stream) {\r\n int bufferSize = 1024;\r\n char[] buffer = new char[bufferSize];\r\n StringBuilder out = new StringBuilder();\r\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\r\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\r\n     out.append(buffer, 0, numRead);\r\n }\r\n return out.toString();\r\n}\r\n\r\npublic String hashMD5(String input) {\r\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n        byte[] messageDigest = md.digest(input.getBytes());\r\n        BigInteger number = new BigInteger(1, messageDigest);\r\n        String hashtext = number.toString(16);\r\n        return hashtext;\r\n}\r\n\r\npublic void TestMe() {\r\n   final InputStream cis = test.getEncryptingInputStream(is);\r\n   final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\r\n\r\n   String cisAsString = readInputStreamAsString(cis);\r\n   String resStreamAsString = readInputStreamAsString(resStream);\r\n\r\n   String cisMD5 = hashMD5(cisAsString);\r\n   String resMD5 = hashMD5(resStreamAsString);\r\n\r\n   if(cisMD5.equals(resMD5)) { \r\n       System.out.println(&quot;Streams contents are equal&quot;); \r\n   } else { \r\n       System.out.println(&quot;Stream contents are NOT equal :(&quot;); \r\n   }\r\n}\r\n```","title":"How to compare content of 2 InputStreams Objects","body":"<p>The idea is to read the whole stream as a String, then md5 the string, and finally check if the hashes are the same. MD5 guarantees that hashing the same string will produce the same result.</p>\n<pre><code>public String readInputStreamAsString(InputStream stream) {\n int bufferSize = 1024;\n char[] buffer = new char[bufferSize];\n StringBuilder out = new StringBuilder();\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\n     out.append(buffer, 0, numRead);\n }\n return out.toString();\n}\n\npublic String hashMD5(String input) {\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n        byte[] messageDigest = md.digest(input.getBytes());\n        BigInteger number = new BigInteger(1, messageDigest);\n        String hashtext = number.toString(16);\n        return hashtext;\n}\n\npublic void TestMe() {\n   final InputStream cis = test.getEncryptingInputStream(is);\n   final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\n\n   String cisAsString = readInputStreamAsString(cis);\n   String resStreamAsString = readInputStreamAsString(resStream);\n\n   String cisMD5 = hashMD5(cisAsString);\n   String resMD5 = hashMD5(resStreamAsString);\n\n   if(cisMD5.equals(resMD5)) { \n       System.out.println(&quot;Streams contents are equal&quot;); \n   } else { \n       System.out.println(&quot;Stream contents are NOT equal :(&quot;); \n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690291614,"creation_date":1690286806,"answer_id":76762554,"question_id":76762343,"body_markdown":"Putting just the algorithm, not the real implementation...\r\n```\r\nfinal InputStream cis = test.getEncryptingInputStream(is);\r\nCreate a ByteArrayOutputStream cisArray / FileOutputStream\r\nRead everything from cis and store in cisArray/FileOutputStream.\r\n\r\nCreate cisInputStream as ByteArrayInputStream from stored cisArray&#39;s bytes OR FileInputStream from file.\r\nfinal InputStream resStream = test.reEncrypt(cisInputStream, &quot;&quot;);\r\n\r\nRead resStream &amp; cisInputStream (re-open) byte by byte and compare\r\n```","title":"How to compare content of 2 InputStreams Objects","body":"<p>Putting just the algorithm, not the real implementation...</p>\n<pre><code>final InputStream cis = test.getEncryptingInputStream(is);\nCreate a ByteArrayOutputStream cisArray / FileOutputStream\nRead everything from cis and store in cisArray/FileOutputStream.\n\nCreate cisInputStream as ByteArrayInputStream from stored cisArray's bytes OR FileInputStream from file.\nfinal InputStream resStream = test.reEncrypt(cisInputStream, &quot;&quot;);\n\nRead resStream &amp; cisInputStream (re-open) byte by byte and compare\n</code></pre>\n"}],"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1690290733,"accepted_answer_id":76762553,"answer_count":3,"score":-1,"last_activity_date":1690291614,"creation_date":1690285196,"question_id":76762343,"body_markdown":"I want to compare the content in cis and resStream. My target is to check if the reEncryption gave me the same data or different.\r\n\r\nAny leads would be really great. Thanks \r\n\r\n    final InputStream cis = test.getEncryptingInputStream(is);\r\n    final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\r\n\r\nHow can we check the content of InputStreams?","title":"How to compare content of 2 InputStreams Objects","body":"<p>I want to compare the content in cis and resStream. My target is to check if the reEncryption gave me the same data or different.</p>\n<p>Any leads would be really great. Thanks</p>\n<pre><code>final InputStream cis = test.getEncryptingInputStream(is);\nfinal InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\n</code></pre>\n<p>How can we check the content of InputStreams?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1690290832,"post_id":76763046,"comment_id":135330410,"body_markdown":"Your main class is named `com.startjava.lesson_2_3.calculator.CalculatorTest`, but you are trying to run one named `com.starjava.lesson_2_3.calculator.CalculatorTest`.  Note &quot;starjava&quot; != &quot;startjava&quot;.","body":"Your main class is named <code>com.startjava.lesson_2_3.calculator.CalculatorTest</code>, but you are trying to run one named <code>com.starjava.lesson_2_3.calculator.CalculatorTest</code>.  Note &quot;starjava&quot; != &quot;startjava&quot;."},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690291125,"post_id":76763046,"comment_id":135330477,"body_markdown":"@JohnBollinger please write it as answer or i will do :)","body":"@JohnBollinger please write it as answer or i will do :)"},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690291286,"post_id":76763046,"comment_id":135330524,"body_markdown":"I added for clarification, the path options and sources, I am trying to understand your answer","body":"I added for clarification, the path options and sources, I am trying to understand your answer"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1690291309,"post_id":76763046,"comment_id":135330531,"body_markdown":"@Lunatic, the appropriate action, if you should choose to take one, is to vote to close as a typo.  I have not done so myself because I am presently refraining from all moderation actions.","body":"@Lunatic, the appropriate action, if you should choose to take one, is to vote to close as a typo.  I have not done so myself because I am presently refraining from all moderation actions."},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690292539,"post_id":76763046,"comment_id":135330870,"body_markdown":"@JohnBollinger it turns out I have an error in the optionsj file, I understand the error in the class name at start, but still not getting the same error","body":"@JohnBollinger it turns out I have an error in the optionsj file, I understand the error in the class name at start, but still not getting the same error"},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690292910,"post_id":76763046,"comment_id":135330969,"body_markdown":"@JohnBollinger  -cp D:\\Startjava\\out\\com\\startjava\\lesson_2_3\\calculator\nCalculatorTest if I write like this in the optionsj file, then the same error Caused by: java.lang.NoClassDefFoundError: com/startjava/lesson_2_3/calculator/CalculatorTest (wrong name: CalculatorTest)","body":"@JohnBollinger  -cp D:\\Startjava\\out\\com\\startjava\\lesson_2_3\\calculator CalculatorTest if I write like this in the optionsj file, then the same error Caused by: java.lang.NoClassDefFoundError: com/startjava/lesson_2_3/calculator/CalculatorTest (wrong name: CalculatorTest)"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1690293462,"post_id":76763046,"comment_id":135331111,"body_markdown":"@Tribjj, the classpath should be `D:\\Startjava\\out`, not the full path to the class file, so the `options` and `optionsj` files presented in the question appear to be consistent with each other as-is.  The `java` and `javac` commands compute classpath-relative directories for class files based on classes&#39; package names.  You don&#39;t do that yourself.","body":"@Tribjj, the classpath should be <code>D:\\Startjava\\out</code>, not the full path to the class file, so the <code>options</code> and <code>optionsj</code> files presented in the question appear to be consistent with each other as-is.  The <code>java</code> and <code>javac</code> commands compute classpath-relative directories for class files based on classes&#39; package names.  You don&#39;t do that yourself."},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690295547,"post_id":76763046,"comment_id":135331646,"body_markdown":"@JohnBollinger strangely, everything started up for me, as in the beginning the options files, did not change anything, what is it :-d D:\\Startjava\\out\nCalculator.java                                                                                           \nCalculatorTest.java   -cp D:\\Startjava\\out\ncom.startjava.lesson_2_3.calculator.CalculatorTest and work","body":"@JohnBollinger strangely, everything started up for me, as in the beginning the options files, did not change anything, what is it :-d D:\\Startjava\\out Calculator.java                                                                                            CalculatorTest.java   -cp D:\\Startjava\\out com.startjava.lesson_2_3.calculator.CalculatorTest and work"}],"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690291231,"creation_date":1690290522,"question_id":76763046,"body_markdown":"unable to run and find classpath compiled files CalculatorTest.class, Calculator.class\r\nI think I&#39;m confused about absolute paths...\r\n\r\nfile options:\r\n\r\n    -d D:\\Startjava\\out\r\n    Calculator.java                                                                                           \r\n    CalculatorTest.java \r\n\r\nfile optionsj :\r\n\r\n    -cp D:\\Startjava\\out\r\n    com.starjava.lesson_2_3.calculator.CalculatorTest\r\n\r\ncompile run javac @options \r\n\r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n     javac @options                                                                                                                 \r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8  \r\n\r\n\r\nrun Could not find or load main class compiled files CalculatorTest.class, Calculator.class.\r\n\r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n     java @optionsj                                                                                                                 \r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8                                                                                \r\n    Error: Could not find or load main class com.starjava.lesson_2_3.calculator.CalculatorTest                                       \r\n    Caused by: java.lang.ClassNotFoundException: com.starjava.lesson_2_3.calculator.CalculatorTest\r\n\r\nsource CalculatorTest.java :\r\n\r\n    package com.startjava.lesson_2_3.calculator;\r\n    \r\n    import java.util.*;\r\n    \r\n    public class CalculatorTest {\r\n        public static void  main(String[] args) {\r\n    ...\r\n    }\r\n\r\nsource Calculator.java\r\n\r\n    package com.startjava.lesson_2_3.calculator;\r\n    \r\n    public class Calculator {\r\n    ...\r\n    }\r\n\r\nfile path options optionsj and source :\r\n    \r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n     ls                                                                                                                             \r\n    Calculator.java  CalculatorTest.java  options  optionsj  ","title":"Could not find or load main class, when run java @options","body":"<p>unable to run and find classpath compiled files CalculatorTest.class, Calculator.class\nI think I'm confused about absolute paths...</p>\n<p>file options:</p>\n<pre><code>-d D:\\Startjava\\out\nCalculator.java                                                                                           \nCalculatorTest.java \n</code></pre>\n<p>file optionsj :</p>\n<pre><code>-cp D:\\Startjava\\out\ncom.starjava.lesson_2_3.calculator.CalculatorTest\n</code></pre>\n<p>compile run javac @options</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \n javac @options                                                                                                                 \nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8  \n</code></pre>\n<p>run Could not find or load main class compiled files CalculatorTest.class, Calculator.class.</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \n java @optionsj                                                                                                                 \nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8                                                                                \nError: Could not find or load main class com.starjava.lesson_2_3.calculator.CalculatorTest                                       \nCaused by: java.lang.ClassNotFoundException: com.starjava.lesson_2_3.calculator.CalculatorTest\n</code></pre>\n<p>source CalculatorTest.java :</p>\n<pre><code>package com.startjava.lesson_2_3.calculator;\n\nimport java.util.*;\n\npublic class CalculatorTest {\n    public static void  main(String[] args) {\n...\n}\n</code></pre>\n<p>source Calculator.java</p>\n<pre><code>package com.startjava.lesson_2_3.calculator;\n\npublic class Calculator {\n...\n}\n</code></pre>\n<p>file path options optionsj and source :</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \n ls                                                                                                                             \nCalculator.java  CalculatorTest.java  options  optionsj  \n</code></pre>\n"},{"tags":["java","multithreading","threadpool"],"comments":[{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":1,"creation_date":1689757171,"post_id":76719484,"comment_id":135257011,"body_markdown":"Try Apache Camel, it will solve your issue. You can also use it in Non-Blocking way. https://camel.apache.org/","body":"Try Apache Camel, it will solve your issue. You can also use it in Non-Blocking way. <a href=\"https://camel.apache.org/\" rel=\"nofollow noreferrer\">camel.apache.org</a>"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1689861696,"post_id":76719484,"comment_id":135275681,"body_markdown":"@Shekhar Which feature of camel would allow parallel execution whilst also limiting to one parallel process per passenger?","body":"@Shekhar Which feature of camel would allow parallel execution whilst also limiting to one parallel process per passenger?"},{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":0,"creation_date":1689863581,"post_id":76719484,"comment_id":135276204,"body_markdown":"So Camel is a big framework for Workflows. You can customize the flows completely based on your requirement. \nIt provides you with all the interfaces that you can implement yourself and put conditions on Flows.","body":"So Camel is a big framework for Workflows. You can customize the flows completely based on your requirement.  It provides you with all the interfaces that you can implement yourself and put conditions on Flows."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1689866033,"post_id":76719484,"comment_id":135276868,"body_markdown":"I&#39;m very familiar with camel... I use it every day. I want to know the exact mechanism that will allow for parallel execution whilst also preventing messages for the same passenger from executing in parallel","body":"I&#39;m very familiar with camel... I use it every day. I want to know the exact mechanism that will allow for parallel execution whilst also preventing messages for the same passenger from executing in parallel"}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689932505,"creation_date":1689758855,"answer_id":76719806,"question_id":76719484,"body_markdown":"In this situation you would likely use sharding/partitioning.\r\n\r\n```java\r\npublic interface HashFunction&lt;T&gt; {\r\n   /**\r\n    * Calculate a hash that is\r\n    *   - repeatable (same value always gets the same hash)\r\n    *   - evenly distributed (so jobs are distributed fairly across the threads)\r\n    */\r\n   int accept(T value);\r\n}\r\n```\r\n\r\n```java\r\n/**\r\n * Maintains threadCount single threaded executors\r\n * Ensures that tasks for the same ID execute serially, on a single thread\r\n * whilst jobs for different ID&#39;s can execute in parallel\r\n */\r\npublic class PartitionedExecutor&lt;ID&gt; {\r\n   private final int threadCount;\r\n   private final HashFunction&lt;ID&gt; hashFunction;\r\n   private final ExecutorService[] executors;\r\n   \r\n   public PartitionedExecutor(int threadCount, HashFunction&lt;ID&gt; hashFunction) {\r\n      this.threadCount = threadCount;\r\n\t  this.hashFunction = hashFunction;\r\n      this.executors = IntStream.range(0, threadCount)\r\n\t     .mapToObj(i -&gt; Executors.newSingleThreadedExecutor())\r\n         .toArray(Executors[]::new);\r\n   }   \r\n   \r\n   public Future&lt;V&gt; submit(ID identifier, Callable&lt;V&gt; task) {\r\n      int threadIndex = hashFunction.accept(identifier) % threadCount;\r\n      return executors[threadIndex].submit(task);\r\n   }\r\n}\r\n```\r\n\r\n```java\r\npublic class PassengerService {\r\n   private final PartitionedExecutor&lt;Long&gt; executor;\r\n\r\n   public PassengerService(int threadCount) {\r\n      // assuming passengerId is a Long here \r\n      // Using Long.hashCode() as the hash function\r\n      this.executor = new PartitionedExecutor&lt;&gt;(threadCount, Long::hashCode);\r\n   }\r\n   \r\n   public Future&lt;Result&gt; processOrder(PassengerOrder order) {\r\n      return executor.submit(order.getPassengerId(), () -&gt; doProcessOrder(order));\r\n   }\r\n   \r\n   public Future&lt;Result&gt; processAmend(PassengerAmend amend) {\r\n      return executor.submit(amend.getPassengerId(), () -&gt; doProcessAmend(amend));\r\n   }\r\n\r\n   public Future&lt;Result&gt; processDelete(Long passengerId) {\r\n      return executor.submit(passengerId, () -&gt; doProcessDelete(passengerId));\r\n   }\r\n   \r\n   private Result doProcessOrder(PassengerOrder order) {\r\n      // TODO: implement\r\n   }\r\n   \r\n   private Result doProcessAmend(PassengerAmend amend) {\r\n      // TODO: implement\r\n   }\r\n\r\n   private Result doProcessDelete(Long passengerId) {\r\n      // TODO: implement\r\n   }\r\n}\r\n```\r\n\r\n[Apache Kafka](https://kafka.apache.org/) has this concept at it&#39;s heart (you can&#39;t send a message without first assigning it a partition)\r\n","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>In this situation you would likely use sharding/partitioning.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface HashFunction&lt;T&gt; {\n   /**\n    * Calculate a hash that is\n    *   - repeatable (same value always gets the same hash)\n    *   - evenly distributed (so jobs are distributed fairly across the threads)\n    */\n   int accept(T value);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Maintains threadCount single threaded executors\n * Ensures that tasks for the same ID execute serially, on a single thread\n * whilst jobs for different ID's can execute in parallel\n */\npublic class PartitionedExecutor&lt;ID&gt; {\n   private final int threadCount;\n   private final HashFunction&lt;ID&gt; hashFunction;\n   private final ExecutorService[] executors;\n   \n   public PartitionedExecutor(int threadCount, HashFunction&lt;ID&gt; hashFunction) {\n      this.threadCount = threadCount;\n      this.hashFunction = hashFunction;\n      this.executors = IntStream.range(0, threadCount)\n         .mapToObj(i -&gt; Executors.newSingleThreadedExecutor())\n         .toArray(Executors[]::new);\n   }   \n   \n   public Future&lt;V&gt; submit(ID identifier, Callable&lt;V&gt; task) {\n      int threadIndex = hashFunction.accept(identifier) % threadCount;\n      return executors[threadIndex].submit(task);\n   }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PassengerService {\n   private final PartitionedExecutor&lt;Long&gt; executor;\n\n   public PassengerService(int threadCount) {\n      // assuming passengerId is a Long here \n      // Using Long.hashCode() as the hash function\n      this.executor = new PartitionedExecutor&lt;&gt;(threadCount, Long::hashCode);\n   }\n   \n   public Future&lt;Result&gt; processOrder(PassengerOrder order) {\n      return executor.submit(order.getPassengerId(), () -&gt; doProcessOrder(order));\n   }\n   \n   public Future&lt;Result&gt; processAmend(PassengerAmend amend) {\n      return executor.submit(amend.getPassengerId(), () -&gt; doProcessAmend(amend));\n   }\n\n   public Future&lt;Result&gt; processDelete(Long passengerId) {\n      return executor.submit(passengerId, () -&gt; doProcessDelete(passengerId));\n   }\n   \n   private Result doProcessOrder(PassengerOrder order) {\n      // TODO: implement\n   }\n   \n   private Result doProcessAmend(PassengerAmend amend) {\n      // TODO: implement\n   }\n\n   private Result doProcessDelete(Long passengerId) {\n      // TODO: implement\n   }\n}\n</code></pre>\n<p><a href=\"https://kafka.apache.org/\" rel=\"nofollow noreferrer\">Apache Kafka</a> has this concept at it's heart (you can't send a message without first assigning it a partition)</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690291178,"creation_date":1690291178,"answer_id":76763137,"question_id":76719484,"body_markdown":"Not sure about the libraries directly available for specific requirement but the [answer](https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843)\r\nwould work out well with arguably maximum concurrency.","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>Not sure about the libraries directly available for specific requirement but the <a href=\"https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843\">answer</a>\nwould work out well with arguably maximum concurrency.</p>\n"}],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1690291178,"creation_date":1689756427,"question_id":76719484,"body_markdown":"We want to execute a set of jobs, but some are conflicting, meaning cannot be executed in parallel. Is there anything (interfaces / libraries) supporting workflow in Java ecosystem?\r\n\r\nLike we have passengers and we&#39;d like to process orders but two orders for the same passenger cannot be processed in parallel, but sequentially. \r\n\r\nThe pool of awaiting jobs on the event of a signal that the thread worker is ready to execute a task could check what jobs are still in work and pick any non-conflicting.\r\n\r\nThe standard Java thread pool executor has a queue embedded but that queue knows nothing about currently running jobs - it only uses some static order without knowledge of conflicting jobs.\r\n\r\n","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>We want to execute a set of jobs, but some are conflicting, meaning cannot be executed in parallel. Is there anything (interfaces / libraries) supporting workflow in Java ecosystem?</p>\n<p>Like we have passengers and we'd like to process orders but two orders for the same passenger cannot be processed in parallel, but sequentially.</p>\n<p>The pool of awaiting jobs on the event of a signal that the thread worker is ready to execute a task could check what jobs are still in work and pick any non-conflicting.</p>\n<p>The standard Java thread pool executor has a queue embedded but that queue knows nothing about currently running jobs - it only uses some static order without knowledge of conflicting jobs.</p>\n"},{"tags":["java","karate","karate-call-single"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690289126,"post_id":76762834,"comment_id":135329960,"body_markdown":"Show us the code","body":"Show us the code"},{"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"score":0,"creation_date":1690289510,"post_id":76762834,"comment_id":135330084,"body_markdown":"can not show due to policies. all the relevant details have been mentioned above.","body":"can not show due to policies. all the relevant details have been mentioned above."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690289575,"post_id":76762834,"comment_id":135330101,"body_markdown":"Even if you cannot share the original code, I recommend you make a [MCVE]. Debugging code is much easier than debugging a description of code.","body":"Even if you cannot share the original code, I recommend you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Debugging code is much easier than debugging a description of code."},{"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"score":0,"creation_date":1690290619,"post_id":76762834,"comment_id":135330355,"body_markdown":"added, now can be looked. @Jorn","body":"added, now can be looked. @Jorn"}],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290665,"creation_date":1690290130,"answer_id":76762979,"question_id":76762834,"body_markdown":"Normally teams use `karate.callSingle()` for this kind of use-case: https://stackoverflow.com/a/56853597/143475\r\n\r\nIf you insist on using Java, use a singleton as described here: https://stackoverflow.com/a/54571844/143475\r\n\r\nPlease note that tests that depend on each other is not a good practice and not supported by Karate: https://stackoverflow.com/a/46080568/143475","title":"How to extract a variable&#39;s value in feature file that was set during an endpoint call to java service using Karate automation?","body":"<p>Normally teams use <code>karate.callSingle()</code> for this kind of use-case: <a href=\"https://stackoverflow.com/a/56853597/143475\">https://stackoverflow.com/a/56853597/143475</a></p>\n<p>If you insist on using Java, use a singleton as described here: <a href=\"https://stackoverflow.com/a/54571844/143475\">https://stackoverflow.com/a/54571844/143475</a></p>\n<p>Please note that tests that depend on each other is not a good practice and not supported by Karate: <a href=\"https://stackoverflow.com/a/46080568/143475\">https://stackoverflow.com/a/46080568/143475</a></p>\n"}],"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690290665,"creation_date":1690289047,"question_id":76762834,"body_markdown":"Have a variable &#39;dummyVariable&#39; in a function of MyService.java file. Now I am calling an endpoint &#39;dummyEndpoint&#39; that sets the value of &#39;dummyVariable&#39; to true or false. \r\n\r\nI want to extract this value of &#39;dummyVariable&#39; after I call &#39;dummyEndpoint&#39; using Karate feature files by call() method.\r\n\r\nFurther I want to perform different actions in feature file depending on this value being true or false. Basically this can be treated as knowing whether an experiment is on or off in java service during an endpoint calling.\r\n\r\nMore crisp explanation-&gt;\r\ndummyEndpoint called from Karate file-&gt; sets a variable&#39;s value in java service -&gt; want to extract that value after call completion.\r\n\r\n//MyKarateFile .feature file\r\n\r\n    Scenario: Make a call to service\r\n      Given url baseUrl\r\n      And path /some-path\r\n      And header Authorization = api\r\n      And param environment = env\r\n      And request req\r\n      When method POST\r\n      Then status 200\r\n      //want to check dummyVariable &#39;s value here\r\n\r\n//MyService .java\r\n\r\n    private final DummyVariableSetter dummyVariableSetter;\r\n    public int myFunction() {\r\n        boolean dummyVariable = dummyVariableSetter.isDummyVaribaleOn();\r\n        if(!dummyVariable) return 0;\r\n        return 1;\r\n    }\r\n\r\n//DummyVariableSetter .java\r\n\r\n    public boolean isDummyVaribaleOn() {\r\n        return getVersion(some-property) &gt;= 0;\r\n    }\r\n\r\n\r\ntried using exits() method of Karate but did not worked. ","title":"How to extract a variable&#39;s value in feature file that was set during an endpoint call to java service using Karate automation?","body":"<p>Have a variable 'dummyVariable' in a function of MyService.java file. Now I am calling an endpoint 'dummyEndpoint' that sets the value of 'dummyVariable' to true or false.</p>\n<p>I want to extract this value of 'dummyVariable' after I call 'dummyEndpoint' using Karate feature files by call() method.</p>\n<p>Further I want to perform different actions in feature file depending on this value being true or false. Basically this can be treated as knowing whether an experiment is on or off in java service during an endpoint calling.</p>\n<p>More crisp explanation-&gt;\ndummyEndpoint called from Karate file-&gt; sets a variable's value in java service -&gt; want to extract that value after call completion.</p>\n<p>//MyKarateFile .feature file</p>\n<pre><code>Scenario: Make a call to service\n  Given url baseUrl\n  And path /some-path\n  And header Authorization = api\n  And param environment = env\n  And request req\n  When method POST\n  Then status 200\n  //want to check dummyVariable 's value here\n</code></pre>\n<p>//MyService .java</p>\n<pre><code>private final DummyVariableSetter dummyVariableSetter;\npublic int myFunction() {\n    boolean dummyVariable = dummyVariableSetter.isDummyVaribaleOn();\n    if(!dummyVariable) return 0;\n    return 1;\n}\n</code></pre>\n<p>//DummyVariableSetter .java</p>\n<pre><code>public boolean isDummyVaribaleOn() {\n    return getVersion(some-property) &gt;= 0;\n}\n</code></pre>\n<p>tried using exits() method of Karate but did not worked.</p>\n"},{"tags":["java","data-structures","printing","binary-tree"],"answers":[{"tags":[],"owner":{"account_id":207873,"reputation":1751,"user_id":458014,"accept_rate":83,"display_name":"hd42"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1297410306,"creation_date":1297410306,"answer_id":4966711,"question_id":4965335,"body_markdown":"Your tree will need twice the distance for each layer:\r\n&lt;pre&gt;       a\r\n      / \\\r\n     /   \\\r\n    /     \\\r\n   /       \\\r\n   b       c\r\n  / \\     / \\\r\n /   \\   /   \\\r\n d   e   f   g\r\n/ \\ / \\ / \\ / \\\r\nh i j k l m n o&lt;/pre&gt;\r\nYou can save your tree in an array of arrays, one array for every depth:\r\n&lt;pre&gt;[[a],[b,c],[d,e,f,g],[h,i,j,k,l,m,n,o]]&lt;/pre&gt;\r\nIf your tree is not full, you need to include empty values in that array:\r\n&lt;pre&gt;       a\r\n      / \\\r\n     /   \\\r\n    /     \\\r\n   /       \\\r\n   b       c\r\n  / \\     / \\\r\n /   \\   /   \\\r\n d   e   f   g\r\n/ \\   \\ / \\   \\\r\nh i   k l m   o\r\n[[a],[b,c],[d,e,f,g],[h,i, ,k,l,m, ,o]]&lt;/pre&gt;\r\nThen you can iterate over the array to print your tree, printing spaces before the first element and between the elements depending on the depth and printing the lines depending on if the corresponding elements in the array for the next layer are filled or not.\r\nIf your values can be more than one character long, you need to find the longest value while creating the array representation and multiply all widths and the number of lines accordingly.","title":"How to print binary tree diagram in Java?","body":"<p>Your tree will need twice the distance for each layer:</p>\n\n<pre>       a\n      / \\\n     /   \\\n    /     \\\n   /       \\\n   b       c\n  / \\     / \\\n /   \\   /   \\\n d   e   f   g\n/ \\ / \\ / \\ / \\\nh i j k l m n o</pre>\n\n<p>You can save your tree in an array of arrays, one array for every depth:</p>\n\n<pre>[[a],[b,c],[d,e,f,g],[h,i,j,k,l,m,n,o]]</pre>\n\n<p>If your tree is not full, you need to include empty values in that array:</p>\n\n<pre>       a\n      / \\\n     /   \\\n    /     \\\n   /       \\\n   b       c\n  / \\     / \\\n /   \\   /   \\\n d   e   f   g\n/ \\   \\ / \\   \\\nh i   k l m   o\n[[a],[b,c],[d,e,f,g],[h,i, ,k,l,m, ,o]]</pre>\n\n<p>Then you can iterate over the array to print your tree, printing spaces before the first element and between the elements depending on the depth and printing the lines depending on if the corresponding elements in the array for the next layer are filled or not.\nIf your values can be more than one character long, you need to find the longest value while creating the array representation and multiply all widths and the number of lines accordingly.</p>\n"},{"tags":[],"owner":{"account_id":114552,"reputation":12230,"user_id":301153,"accept_rate":88,"display_name":"michal.kreuzman"},"down_vote_count":0,"up_vote_count":277,"is_accepted":true,"score":277,"last_activity_date":1297454569,"creation_date":1297451815,"answer_id":4973083,"question_id":4965335,"body_markdown":"I&#39;ve created simple binary tree printer. You can use and modify it as you want, but it&#39;s not optimized anyway. I think that a lot of things can be improved here ;)\r\n\r\n\r\n    import java.util.ArrayList;\r\n\timport java.util.Collections;\r\n\timport java.util.List;\r\n\t\r\n\tpublic class BTreePrinterTest {\r\n\t\r\n\t\tprivate static Node&lt;Integer&gt; test1() {\r\n\t\t\tNode&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\r\n\t\t\tNode&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(3);\r\n\t\t\tNode&lt;Integer&gt; n24 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\r\n\t\t\tNode&lt;Integer&gt; n34 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n35 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n36 = new Node&lt;Integer&gt;(4);\r\n\t\t\tNode&lt;Integer&gt; n37 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n38 = new Node&lt;Integer&gt;(8);\r\n\t\r\n\t\t\troot.left = n11;\r\n\t\t\troot.right = n12;\r\n\t\r\n\t\t\tn11.left = n21;\r\n\t\t\tn11.right = n22;\r\n\t\t\tn12.left = n23;\r\n\t\t\tn12.right = n24;\r\n\t\r\n\t\t\tn21.left = n31;\r\n\t\t\tn21.right = n32;\r\n\t\t\tn22.left = n33;\r\n\t\t\tn22.right = n34;\r\n\t\t\tn23.left = n35;\r\n\t\t\tn23.right = n36;\r\n\t\t\tn24.left = n37;\r\n\t\t\tn24.right = n38;\r\n\t\r\n\t\t\treturn root;\r\n\t\t}\r\n\t\r\n\t\tprivate static Node&lt;Integer&gt; test2() {\r\n\t\t\tNode&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\r\n\t\t\tNode&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(9);\r\n\t\t\tNode&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\r\n\t\r\n\t\t\troot.left = n11;\r\n\t\t\troot.right = n12;\r\n\t\r\n\t\t\tn11.left = n21;\r\n\t\t\tn11.right = n22;\r\n\t\r\n\t\t\tn12.right = n23;\r\n\t\t\tn22.left = n31;\r\n\t\t\tn22.right = n32;\r\n\t\r\n\t\t\tn23.left = n33;\r\n\t\r\n\t\t\treturn root;\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\r\n\t\t\tBTreePrinter.printNode(test1());\r\n\t\t\tBTreePrinter.printNode(test2());\r\n\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Node&lt;T extends Comparable&lt;?&gt;&gt; {\r\n\t\tNode&lt;T&gt; left, right;\r\n\t\tT data;\r\n\t\r\n\t\tpublic Node(T data) {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass BTreePrinter {\r\n\t\r\n\t\tpublic static &lt;T extends Comparable&lt;?&gt;&gt; void printNode(Node&lt;T&gt; root) {\r\n\t\t\tint maxLevel = BTreePrinter.maxLevel(root);\r\n\t\r\n\t\t\tprintNodeInternal(Collections.singletonList(root), 1, maxLevel);\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T extends Comparable&lt;?&gt;&gt; void printNodeInternal(List&lt;Node&lt;T&gt;&gt; nodes, int level, int maxLevel) {\r\n\t\t\tif (nodes.isEmpty() || BTreePrinter.isAllElementsNull(nodes))\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\tint floor = maxLevel - level;\r\n\t\t\tint endgeLines = (int) Math.pow(2, (Math.max(floor - 1, 0)));\r\n\t\t\tint firstSpaces = (int) Math.pow(2, (floor)) - 1;\r\n\t\t\tint betweenSpaces = (int) Math.pow(2, (floor + 1)) - 1;\r\n\t\r\n\t\t\tBTreePrinter.printWhitespaces(firstSpaces);\r\n\t\r\n\t\t\tList&lt;Node&lt;T&gt;&gt; newNodes = new ArrayList&lt;Node&lt;T&gt;&gt;();\r\n\t\t\tfor (Node&lt;T&gt; node : nodes) {\r\n\t\t\t\tif (node != null) {\r\n\t\t\t\t\tSystem.out.print(node.data);\r\n\t\t\t\t\tnewNodes.add(node.left);\r\n\t\t\t\t\tnewNodes.add(node.right);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewNodes.add(null);\r\n\t\t\t\t\tnewNodes.add(null);\r\n\t\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tBTreePrinter.printWhitespaces(betweenSpaces);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\r\n\t\t\tfor (int i = 1; i &lt;= endgeLines; i++) {\r\n\t\t\t\tfor (int j = 0; j &lt; nodes.size(); j++) {\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(firstSpaces - i);\r\n\t\t\t\t\tif (nodes.get(j) == null) {\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(endgeLines + endgeLines + i + 1);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif (nodes.get(j).left != null)\r\n\t\t\t\t\t\tSystem.out.print(&quot;/&quot;);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(1);\r\n\t\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(i + i - 1);\r\n\t\r\n\t\t\t\t\tif (nodes.get(j).right != null)\r\n\t\t\t\t\t\tSystem.out.print(&quot;\\\\&quot;);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(1);\r\n\t\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(endgeLines + endgeLines - i);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\t}\r\n\t\r\n\t\t\tprintNodeInternal(newNodes, level + 1, maxLevel);\r\n\t\t}\r\n\t\r\n\t\tprivate static void printWhitespaces(int count) {\r\n\t\t\tfor (int i = 0; i &lt; count; i++)\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T extends Comparable&lt;?&gt;&gt; int maxLevel(Node&lt;T&gt; node) {\r\n\t\t\tif (node == null)\r\n\t\t\t\treturn 0;\r\n\t\r\n\t\t\treturn Math.max(BTreePrinter.maxLevel(node.left), BTreePrinter.maxLevel(node.right)) + 1;\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T&gt; boolean isAllElementsNull(List&lt;T&gt; list) {\r\n\t\t\tfor (Object object : list) {\r\n\t\t\t\tif (object != null)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\nOutput 1 :\r\n\r\n             2               \r\n            / \\       \r\n           /   \\      \r\n          /     \\     \r\n         /       \\    \r\n         7       5       \r\n        / \\     / \\   \r\n       /   \\   /   \\  \r\n       2   6   3   6   \r\n      / \\ / \\ / \\ / \\ \r\n      5 8 4 5 8 4 5 8 \r\n\r\nOutput 2 :\r\n\r\n           2               \r\n          / \\       \r\n         /   \\      \r\n        /     \\     \r\n       /       \\    \r\n       7       5       \r\n      / \\       \\   \r\n     /   \\       \\  \r\n     2   6       9   \r\n        / \\     /   \r\n        5 8     4   \r\n\r\n ","title":"How to print binary tree diagram in Java?","body":"<p>I've created simple binary tree printer. You can use and modify it as you want, but it's not optimized anyway. I think that a lot of things can be improved here ;)</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class BTreePrinterTest {\n\n    private static Node&lt;Integer&gt; test1() {\n        Node&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\n        Node&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(3);\n        Node&lt;Integer&gt; n24 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\n        Node&lt;Integer&gt; n34 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n35 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n36 = new Node&lt;Integer&gt;(4);\n        Node&lt;Integer&gt; n37 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n38 = new Node&lt;Integer&gt;(8);\n\n        root.left = n11;\n        root.right = n12;\n\n        n11.left = n21;\n        n11.right = n22;\n        n12.left = n23;\n        n12.right = n24;\n\n        n21.left = n31;\n        n21.right = n32;\n        n22.left = n33;\n        n22.right = n34;\n        n23.left = n35;\n        n23.right = n36;\n        n24.left = n37;\n        n24.right = n38;\n\n        return root;\n    }\n\n    private static Node&lt;Integer&gt; test2() {\n        Node&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\n        Node&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(9);\n        Node&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\n\n        root.left = n11;\n        root.right = n12;\n\n        n11.left = n21;\n        n11.right = n22;\n\n        n12.right = n23;\n        n22.left = n31;\n        n22.right = n32;\n\n        n23.left = n33;\n\n        return root;\n    }\n\n    public static void main(String[] args) {\n\n        BTreePrinter.printNode(test1());\n        BTreePrinter.printNode(test2());\n\n    }\n}\n\nclass Node&lt;T extends Comparable&lt;?&gt;&gt; {\n    Node&lt;T&gt; left, right;\n    T data;\n\n    public Node(T data) {\n        this.data = data;\n    }\n}\n\nclass BTreePrinter {\n\n    public static &lt;T extends Comparable&lt;?&gt;&gt; void printNode(Node&lt;T&gt; root) {\n        int maxLevel = BTreePrinter.maxLevel(root);\n\n        printNodeInternal(Collections.singletonList(root), 1, maxLevel);\n    }\n\n    private static &lt;T extends Comparable&lt;?&gt;&gt; void printNodeInternal(List&lt;Node&lt;T&gt;&gt; nodes, int level, int maxLevel) {\n        if (nodes.isEmpty() || BTreePrinter.isAllElementsNull(nodes))\n            return;\n\n        int floor = maxLevel - level;\n        int endgeLines = (int) Math.pow(2, (Math.max(floor - 1, 0)));\n        int firstSpaces = (int) Math.pow(2, (floor)) - 1;\n        int betweenSpaces = (int) Math.pow(2, (floor + 1)) - 1;\n\n        BTreePrinter.printWhitespaces(firstSpaces);\n\n        List&lt;Node&lt;T&gt;&gt; newNodes = new ArrayList&lt;Node&lt;T&gt;&gt;();\n        for (Node&lt;T&gt; node : nodes) {\n            if (node != null) {\n                System.out.print(node.data);\n                newNodes.add(node.left);\n                newNodes.add(node.right);\n            } else {\n                newNodes.add(null);\n                newNodes.add(null);\n                System.out.print(\" \");\n            }\n\n            BTreePrinter.printWhitespaces(betweenSpaces);\n        }\n        System.out.println(\"\");\n\n        for (int i = 1; i &lt;= endgeLines; i++) {\n            for (int j = 0; j &lt; nodes.size(); j++) {\n                BTreePrinter.printWhitespaces(firstSpaces - i);\n                if (nodes.get(j) == null) {\n                    BTreePrinter.printWhitespaces(endgeLines + endgeLines + i + 1);\n                    continue;\n                }\n\n                if (nodes.get(j).left != null)\n                    System.out.print(\"/\");\n                else\n                    BTreePrinter.printWhitespaces(1);\n\n                BTreePrinter.printWhitespaces(i + i - 1);\n\n                if (nodes.get(j).right != null)\n                    System.out.print(\"\\\\\");\n                else\n                    BTreePrinter.printWhitespaces(1);\n\n                BTreePrinter.printWhitespaces(endgeLines + endgeLines - i);\n            }\n\n            System.out.println(\"\");\n        }\n\n        printNodeInternal(newNodes, level + 1, maxLevel);\n    }\n\n    private static void printWhitespaces(int count) {\n        for (int i = 0; i &lt; count; i++)\n            System.out.print(\" \");\n    }\n\n    private static &lt;T extends Comparable&lt;?&gt;&gt; int maxLevel(Node&lt;T&gt; node) {\n        if (node == null)\n            return 0;\n\n        return Math.max(BTreePrinter.maxLevel(node.left), BTreePrinter.maxLevel(node.right)) + 1;\n    }\n\n    private static &lt;T&gt; boolean isAllElementsNull(List&lt;T&gt; list) {\n        for (Object object : list) {\n            if (object != null)\n                return false;\n        }\n\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>Output 1 :</p>\n\n<pre><code>         2               \n        / \\       \n       /   \\      \n      /     \\     \n     /       \\    \n     7       5       \n    / \\     / \\   \n   /   \\   /   \\  \n   2   6   3   6   \n  / \\ / \\ / \\ / \\ \n  5 8 4 5 8 4 5 8 \n</code></pre>\n\n<p>Output 2 :</p>\n\n<pre><code>       2               \n      / \\       \n     /   \\      \n    /     \\     \n   /       \\    \n   7       5       \n  / \\       \\   \n /   \\       \\  \n 2   6       9   \n    / \\     /   \n    5 8     4   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1098340,"reputation":9801,"user_id":1091436,"accept_rate":50,"display_name":"VasiliNovikov"},"down_vote_count":1,"up_vote_count":341,"is_accepted":false,"score":340,"last_activity_date":1563618541,"creation_date":1327098563,"answer_id":8948691,"question_id":4965335,"body_markdown":"Print a [large] tree by lines.\r\n\r\noutput example:\r\n\r\n\tz\r\n\t&#160;c\r\n\t&#160;&#160;&#160;&#160;a\r\n\t&#160;&#160;&#160;&#160;b\r\n\t&#160;d\r\n\t&#160;e\r\n\t&#160;&#160;&#160;&#160;asdf\r\n\t&#160;f\r\n\r\ncode:\r\n\r\n\tpublic class TreeNode {\r\n\t\r\n\t\tfinal String name;\r\n\t\tfinal List&lt;TreeNode&gt; children;\r\n\t\r\n\t\tpublic TreeNode(String name, List&lt;TreeNode&gt; children) {\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.children = children;\r\n\t\t}\r\n\t\r\n\t\tpublic String toString() {\r\n\t\t\tStringBuilder buffer = new StringBuilder(50);\r\n\t\t\tprint(buffer, &quot;&quot;, &quot;&quot;);\r\n\t\t\treturn buffer.toString();\r\n\t\t}\r\n\t\r\n\t\tprivate void print(StringBuilder buffer, String prefix, String childrenPrefix) {\r\n\t\t\tbuffer.append(prefix);\r\n\t\t\tbuffer.append(name);\r\n\t\t\tbuffer.append(&#39;\\n&#39;);\r\n\t\t\tfor (Iterator&lt;TreeNode&gt; it = children.iterator(); it.hasNext();) {\r\n\t\t\t\tTreeNode next = it.next();\r\n\t\t\t\tif (it.hasNext()) {\r\n\t\t\t\t\tnext.print(buffer, childrenPrefix + &quot; &quot;, childrenPrefix + &quot;   &quot;);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext.print(buffer, childrenPrefix + &quot; &quot;, childrenPrefix + &quot;    &quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nP.S. This answer doesn&#39;t exactly focus on &quot;binary&quot; trees -- instead, it prints all kinds of trees. Solution is inspired by the &quot;tree&quot; command in linux.","title":"How to print binary tree diagram in Java?","body":"<p>Print a [large] tree by lines.</p>\n\n<p>output example:</p>\n\n<pre><code>z\nc\na\nb\nd\ne\nasdf\nf\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>public class TreeNode {\n\n    final String name;\n    final List&lt;TreeNode&gt; children;\n\n    public TreeNode(String name, List&lt;TreeNode&gt; children) {\n        this.name = name;\n        this.children = children;\n    }\n\n    public String toString() {\n        StringBuilder buffer = new StringBuilder(50);\n        print(buffer, \"\", \"\");\n        return buffer.toString();\n    }\n\n    private void print(StringBuilder buffer, String prefix, String childrenPrefix) {\n        buffer.append(prefix);\n        buffer.append(name);\n        buffer.append('\\n');\n        for (Iterator&lt;TreeNode&gt; it = children.iterator(); it.hasNext();) {\n            TreeNode next = it.next();\n            if (it.hasNext()) {\n                next.print(buffer, childrenPrefix + \" \", childrenPrefix + \"   \");\n            } else {\n                next.print(buffer, childrenPrefix + \" \", childrenPrefix + \"    \");\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>P.S. This answer doesn't exactly focus on \"binary\" trees -- instead, it prints all kinds of trees. Solution is inspired by the \"tree\" command in linux.</p>\n"},{"tags":[],"owner":{"account_id":2838904,"reputation":303,"user_id":2438880,"display_name":"Anurag Agarwal"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1611702903,"creation_date":1373225455,"answer_id":17515532,"question_id":4965335,"body_markdown":"michal.kreuzman nice one I will have to say. It was useful.\r\n\r\nHowever, the above works only for single digits: if you are going to use more than one digit, the structure is going to get misplaced since you are using spaces and not tabs.\r\n\r\nAs for my later codes I needed more digits than only 2, so I made a program myself. \r\n\r\nIt has some bugs now, again right now I am feeling lazy to correct them but it prints very beautifully and the nodes can take a larger number of digits.\r\n\r\nThe tree is not going to be as the question mentions but it is 270 degrees rotated :)\r\n\r\n    public static void printBinaryTree(TreeNode root, int level){\r\n        if(root==null)\r\n             return;\r\n        printBinaryTree(root.right, level+1);\r\n        if(level!=0){\r\n            for(int i=0;i&lt;level-1;i++)\r\n                System.out.print(&quot;|\\t&quot;);\r\n            System.out.println(&quot;|-------&quot;+root.val);\r\n        }\r\n        else\r\n            System.out.println(root.val);\r\n        printBinaryTree(root.left, level+1);\r\n    }    \r\n\r\nPlace this function with your own specified TreeNode and keep the level initially 0, and enjoy! \r\n\r\nHere are some of the sample outputs:\r\n\r\n    |\t    |\t    |-------11\r\n    |\t    |-------10\r\n    |\t    |\t    |-------9\r\n    |-------8\r\n    |\t    |\t    |-------7\r\n    |\t    |-------6\r\n    |\t    |\t    |-------5\r\n    4\r\n    |\t    |-------3\r\n    |-------2\r\n    |\t    |-------1\r\n\r\n\r\n    |\t    |\t    |\t    |-------10\r\n    |\t    |\t    |-------9\r\n    |\t    |-------8\r\n    |\t    |\t    |-------7\r\n    |-------6\r\n    |\t    |-------5\r\n    4\r\n    |\t    |-------3\r\n    |-------2\r\n    |\t    |-------1\r\n\r\nOnly problem is with the extending branches; I will try to solve the problem as soon as possible but till then you can use it too.","title":"How to print binary tree diagram in Java?","body":"<p>michal.kreuzman nice one I will have to say. It was useful.</p>\n<p>However, the above works only for single digits: if you are going to use more than one digit, the structure is going to get misplaced since you are using spaces and not tabs.</p>\n<p>As for my later codes I needed more digits than only 2, so I made a program myself.</p>\n<p>It has some bugs now, again right now I am feeling lazy to correct them but it prints very beautifully and the nodes can take a larger number of digits.</p>\n<p>The tree is not going to be as the question mentions but it is 270 degrees rotated :)</p>\n<pre><code>public static void printBinaryTree(TreeNode root, int level){\n    if(root==null)\n         return;\n    printBinaryTree(root.right, level+1);\n    if(level!=0){\n        for(int i=0;i&lt;level-1;i++)\n            System.out.print(&quot;|\\t&quot;);\n        System.out.println(&quot;|-------&quot;+root.val);\n    }\n    else\n        System.out.println(root.val);\n    printBinaryTree(root.left, level+1);\n}    \n</code></pre>\n<p>Place this function with your own specified TreeNode and keep the level initially 0, and enjoy!</p>\n<p>Here are some of the sample outputs:</p>\n<pre><code>|       |       |-------11\n|       |-------10\n|       |       |-------9\n|-------8\n|       |       |-------7\n|       |-------6\n|       |       |-------5\n4\n|       |-------3\n|-------2\n|       |-------1\n\n\n|       |       |       |-------10\n|       |       |-------9\n|       |-------8\n|       |       |-------7\n|-------6\n|       |-------5\n4\n|       |-------3\n|-------2\n|       |-------1\n</code></pre>\n<p>Only problem is with the extending branches; I will try to solve the problem as soon as possible but till then you can use it too.</p>\n"},{"tags":[],"owner":{"display_name":"user1231969"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1381728086,"creation_date":1381728086,"answer_id":19353914,"question_id":4965335,"body_markdown":"I needed to print a binary tree in one of my projects, for that I have prepared a java class `TreePrinter`, one of the sample output is:\r\n&lt;pre&gt;&lt;code&gt;                [+]\r\n               /   \\\r\n              /     \\\r\n             /       \\\r\n            /         \\\r\n           /           \\\r\n        [*]             \\\r\n       /   \\             [-]\r\n[speed]     [2]         /   \\\r\n                    [45]     [12]&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nHere is the code for class `TreePrinter` along with class `TextNode`. For printing any tree you can just create an equivalent tree with `TextNode` class.\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\nimport java.util.ArrayList;\r\n\r\npublic class TreePrinter {\r\n    \r\n    public TreePrinter(){\r\n    }\r\n    \r\n    public static String TreeString(TextNode root){\r\n        ArrayList&lt;String&gt; layers = new ArrayList&lt;&gt;();\r\n        ArrayList&lt;TextNode&gt; bottom = new ArrayList&lt;&gt;();\r\n         \r\n        FillBottom(bottom, root);  DrawEdges(root);\r\n        \r\n        int height = GetHeight(root);\r\n        for(int i = 0; i &lt; height; i++) layers.add(&quot;&quot;);\r\n        bottom.clear(); FillBottom(bottom, root);\r\n        \r\n        \r\n        int min = layers.get(0).length();\r\n        \r\n        for(int i = 0; i &lt; bottom.size(); i++){\r\n            TextNode n = bottom.get(i);\r\n            String s = layers.get(n.depth);\r\n            \r\n            while(s.length() &lt; n.x) s += &quot; &quot;;\r\n            if(min &gt; s.length()) min = s.length();\r\n            \r\n            if(!n.isEdge) s += &quot;[&quot;;\r\n            s += n.text;\r\n            if(!n.isEdge) s += &quot;]&quot;;\r\n            \r\n            layers.set(n.depth, s);\r\n        }\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        \r\n        for(int i = 0; i &lt; layers.size(); i++){\r\n            if(i != 0) sb.append(&quot;\\n&quot;);\r\n            sb.append(layers.get(i).substring(min));\r\n        }\r\n        \r\n        return sb.toString();\r\n    }\r\n    \r\n    private static void DrawEdges(TextNode n){\r\n        if(n == null) return;\r\n        if(isLeaf(n)) return;\r\n        \r\n        if(n.left != null){\r\n            int count = n.x - (n.left.x + n.left.text.length() + 2);\r\n            ArrayList&lt;TextNode&gt; temp = new ArrayList&lt;&gt;();\r\n            \r\n            for(int i = 0; i &lt; count; i++){\r\n                TextNode x = new TextNode(&quot;/&quot;); \r\n                x.isEdge = true;\r\n                x.x = n.x - i - 1;\r\n                x.depth = n.depth + i + 1;\r\n                if(i &gt; 0) temp.get(i-1).left = x;\r\n                temp.add(x);\r\n            }\r\n            \r\n            temp.get(count-1).left = n.left;\r\n            n.left.depth = temp.get(count-1).depth+1;\r\n            n.left = temp.get(0);\r\n            \r\n            DrawEdges(temp.get(count-1).left);\r\n        }\r\n        if(n.right != null){\r\n            int count = n.right.x - (n.x + n.text.length() + 2);\r\n            ArrayList&lt;TextNode&gt; temp = new ArrayList&lt;&gt;();\r\n            \r\n            for(int i = 0; i &lt; count; i++){\r\n                TextNode x = new TextNode(&quot;\\\\&quot;); \r\n                x.isEdge = true;\r\n                x.x = n.x + n.text.length() + 2 + i;\r\n                x.depth = n.depth + i + 1;\r\n                if(i &gt; 0) temp.get(i-1).right = x;\r\n                temp.add(x);\r\n            }\r\n            \r\n            temp.get(count-1).right = n.right;\r\n            n.right.depth = temp.get(count-1).depth+1;\r\n            n.right = temp.get(0);  \r\n            \r\n            DrawEdges(temp.get(count-1).right);\r\n        }\r\n    }\r\n    \r\n    private static void FillBottom(ArrayList&lt;TextNode&gt; bottom, TextNode n){\r\n        if(n == null) return;\r\n        \r\n        FillBottom(bottom, n.left);\r\n        \r\n        if(!bottom.isEmpty()){            \r\n            int i = bottom.size()-1;\r\n            while(bottom.get(i).isEdge) i--;\r\n            TextNode last = bottom.get(i);\r\n            \r\n            if(!n.isEdge) n.x = last.x + last.text.length() + 3;\r\n        }\r\n        bottom.add(n);\r\n        FillBottom(bottom, n.right);\r\n    }\r\n    \r\n    private static boolean isLeaf(TextNode n){\r\n        return (n.left == null &amp;&amp; n.right == null);\r\n    }\r\n    \r\n    private static int GetHeight(TextNode n){\r\n        if(n == null) return 0;\r\n        \r\n        int l = GetHeight(n.left);\r\n        int r = GetHeight(n.right);\r\n        \r\n        return Math.max(l, r) + 1;\r\n    }\r\n}\r\n\r\n\r\nclass TextNode {\r\n    public String text;\r\n    public TextNode parent, left, right;\r\n    public boolean isEdge;\r\n    public int x, depth;\r\n    \r\n    public TextNode(String text){\r\n        this.text = text;\r\n        parent = null; left = null; right = null;\r\n        isEdge = false;\r\n        x = 0; depth = 0;\r\n    }\r\n}\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nFinally here is a test class for printing given sample:\r\n&lt;pre&gt;&lt;code&gt;\r\npublic class Test {\r\n    \r\n    public static void main(String[] args){\r\n        TextNode root = new TextNode(&quot;+&quot;);\r\n        root.left = new TextNode(&quot;*&quot;);            root.left.parent = root;\r\n        root.right = new TextNode(&quot;-&quot;);           root.right.parent = root;\r\n        root.left.left = new TextNode(&quot;speed&quot;);   root.left.left.parent = root.left;\r\n        root.left.right = new TextNode(&quot;2&quot;);      root.left.right.parent = root.left;\r\n        root.right.left = new TextNode(&quot;45&quot;);     root.right.left.parent = root.right;\r\n        root.right.right = new TextNode(&quot;12&quot;);    root.right.right.parent = root.right;\r\n        \r\n        System.out.println(TreePrinter.TreeString(root));\r\n    }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to print binary tree diagram in Java?","body":"<p>I needed to print a binary tree in one of my projects, for that I have prepared a java class <code>TreePrinter</code>, one of the sample output is:</p>\n\n<pre><code>                [+]\n               /   \\\n              /     \\\n             /       \\\n            /         \\\n           /           \\\n        [*]             \\\n       /   \\             [-]\n[speed]     [2]         /   \\\n                    [45]     [12]</code>\n</pre>\n\n<p>Here is the code for class <code>TreePrinter</code> along with class <code>TextNode</code>. For printing any tree you can just create an equivalent tree with <code>TextNode</code> class.</p>\n\n<pre>\n<code>\nimport java.util.ArrayList;\n\npublic class TreePrinter {\n\n    public TreePrinter(){\n    }\n\n    public static String TreeString(TextNode root){\n        ArrayList layers = new ArrayList();\n        ArrayList bottom = new ArrayList();\n\n        FillBottom(bottom, root);  DrawEdges(root);\n\n        int height = GetHeight(root);\n        for(int i = 0; i  s.length()) min = s.length();\n\n            if(!n.isEdge) s += \"[\";\n            s += n.text;\n            if(!n.isEdge) s += \"]\";\n\n            layers.set(n.depth, s);\n        }\n\n        StringBuilder sb = new StringBuilder();\n\n        for(int i = 0; i  temp = new ArrayList();\n\n            for(int i = 0; i  0) temp.get(i-1).left = x;\n                temp.add(x);\n            }\n\n            temp.get(count-1).left = n.left;\n            n.left.depth = temp.get(count-1).depth+1;\n            n.left = temp.get(0);\n\n            DrawEdges(temp.get(count-1).left);\n        }\n        if(n.right != null){\n            int count = n.right.x - (n.x + n.text.length() + 2);\n            ArrayList temp = new ArrayList();\n\n            for(int i = 0; i  0) temp.get(i-1).right = x;\n                temp.add(x);\n            }\n\n            temp.get(count-1).right = n.right;\n            n.right.depth = temp.get(count-1).depth+1;\n            n.right = temp.get(0);  \n\n            DrawEdges(temp.get(count-1).right);\n        }\n    }\n\n    private static void FillBottom(ArrayList bottom, TextNode n){\n        if(n == null) return;\n\n        FillBottom(bottom, n.left);\n\n        if(!bottom.isEmpty()){            \n            int i = bottom.size()-1;\n            while(bottom.get(i).isEdge) i--;\n            TextNode last = bottom.get(i);\n\n            if(!n.isEdge) n.x = last.x + last.text.length() + 3;\n        }\n        bottom.add(n);\n        FillBottom(bottom, n.right);\n    }\n\n    private static boolean isLeaf(TextNode n){\n        return (n.left == null && n.right == null);\n    }\n\n    private static int GetHeight(TextNode n){\n        if(n == null) return 0;\n\n        int l = GetHeight(n.left);\n        int r = GetHeight(n.right);\n\n        return Math.max(l, r) + 1;\n    }\n}\n\n\nclass TextNode {\n    public String text;\n    public TextNode parent, left, right;\n    public boolean isEdge;\n    public int x, depth;\n\n    public TextNode(String text){\n        this.text = text;\n        parent = null; left = null; right = null;\n        isEdge = false;\n        x = 0; depth = 0;\n    }\n}\n</code>\n</pre>\n\n<p>Finally here is a test class for printing given sample:</p>\n\n<pre><code>\npublic class Test {\n\n    public static void main(String[] args){\n        TextNode root = new TextNode(\"+\");\n        root.left = new TextNode(\"*\");            root.left.parent = root;\n        root.right = new TextNode(\"-\");           root.right.parent = root;\n        root.left.left = new TextNode(\"speed\");   root.left.left.parent = root.left;\n        root.left.right = new TextNode(\"2\");      root.left.right.parent = root.left;\n        root.right.left = new TextNode(\"45\");     root.right.left.parent = root.right;\n        root.right.right = new TextNode(\"12\");    root.right.right.parent = root.right;\n\n        System.out.println(TreePrinter.TreeString(root));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3465722,"reputation":797,"user_id":2901325,"display_name":"Laurent Demailly"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1382312688,"creation_date":1382312688,"answer_id":19484210,"question_id":4965335,"body_markdown":"\tpublic static class Node&lt;T extends Comparable&lt;T&gt;&gt; {\r\n\t\tT value;\r\n\t\tNode&lt;T&gt; left, right;\r\n\r\n\t\tpublic void insertToTree(T v) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = v;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (v.compareTo(value) &lt; 0) {\r\n\t\t\t\tif (left == null) {\r\n\t\t\t\t\tleft = new Node&lt;T&gt;();\r\n\t\t\t\t}\r\n\t\t\t\tleft.insertToTree(v);\r\n\t\t\t} else {\r\n\t\t\t\tif (right == null) {\r\n\t\t\t\t\tright = new Node&lt;T&gt;();\r\n\t\t\t\t}\r\n\t\t\t\tright.insertToTree(v);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic void printTree(OutputStreamWriter out) throws IOException {\r\n\t\t\tif (right != null) {\r\n\t\t\t\tright.printTree(out, true, &quot;&quot;);\r\n\t\t\t}\r\n\t\t\tprintNodeValue(out);\r\n\t\t\tif (left != null) {\r\n\t\t\t\tleft.printTree(out, false, &quot;&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tprivate void printNodeValue(OutputStreamWriter out) throws IOException {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tout.write(&quot;&lt;null&gt;&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tout.write(value.toString());\r\n\t\t\t}\r\n\t\t\tout.write(&#39;\\n&#39;);\r\n\t\t}\r\n\t\t// use string and not stringbuffer on purpose as we need to change the indent at each recursion\r\n\t\tprivate void printTree(OutputStreamWriter out, boolean isRight, String indent) throws IOException {\r\n\t\t\tif (right != null) {\r\n\t\t\t\tright.printTree(out, true, indent + (isRight ? &quot;        &quot; : &quot; |      &quot;));\r\n\t\t\t}\r\n\t\t\tout.write(indent);\r\n\t\t\tif (isRight) {\r\n\t\t\t\tout.write(&quot; /&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tout.write(&quot; \\\\&quot;);\r\n\t\t\t}\r\n\t\t\tout.write(&quot;----- &quot;);\r\n\t\t\tprintNodeValue(out);\r\n\t\t\tif (left != null) {\r\n\t\t\t\tleft.printTree(out, false, indent + (isRight ? &quot; |      &quot; : &quot;        &quot;));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nwill print:\r\n\r\n                     /----- 20\r\n                     |       \\----- 15\r\n             /----- 14\r\n             |       \\----- 13\r\n     /----- 12\r\n     |       |       /----- 11\r\n     |       \\----- 10\r\n     |               \\----- 9\r\n    8\r\n     |               /----- 7\r\n     |       /----- 6\r\n     |       |       \\----- 5\r\n     \\----- 4\r\n             |       /----- 3\r\n             \\----- 2\r\n                     \\----- 1\r\n\r\n\r\nfor the input\r\n\r\n8\r\n4\r\n12\r\n2\r\n6\r\n10\r\n14\r\n1\r\n3\r\n5\r\n7\r\n9\r\n11\r\n13\r\n20\r\n15\r\n\r\nthis is a variant from @anurag&#39;s answer - it was bugging me to see the extra |s\r\n","title":"How to print binary tree diagram in Java?","body":"<pre><code>public static class Node&lt;T extends Comparable&lt;T&gt;&gt; {\n    T value;\n    Node&lt;T&gt; left, right;\n\n    public void insertToTree(T v) {\n        if (value == null) {\n            value = v;\n            return;\n        }\n        if (v.compareTo(value) &lt; 0) {\n            if (left == null) {\n                left = new Node&lt;T&gt;();\n            }\n            left.insertToTree(v);\n        } else {\n            if (right == null) {\n                right = new Node&lt;T&gt;();\n            }\n            right.insertToTree(v);\n        }\n    }\n\n    public void printTree(OutputStreamWriter out) throws IOException {\n        if (right != null) {\n            right.printTree(out, true, \"\");\n        }\n        printNodeValue(out);\n        if (left != null) {\n            left.printTree(out, false, \"\");\n        }\n    }\n    private void printNodeValue(OutputStreamWriter out) throws IOException {\n        if (value == null) {\n            out.write(\"&lt;null&gt;\");\n        } else {\n            out.write(value.toString());\n        }\n        out.write('\\n');\n    }\n    // use string and not stringbuffer on purpose as we need to change the indent at each recursion\n    private void printTree(OutputStreamWriter out, boolean isRight, String indent) throws IOException {\n        if (right != null) {\n            right.printTree(out, true, indent + (isRight ? \"        \" : \" |      \"));\n        }\n        out.write(indent);\n        if (isRight) {\n            out.write(\" /\");\n        } else {\n            out.write(\" \\\\\");\n        }\n        out.write(\"----- \");\n        printNodeValue(out);\n        if (left != null) {\n            left.printTree(out, false, indent + (isRight ? \" |      \" : \"        \"));\n        }\n    }\n\n}\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>                 /----- 20\n                 |       \\----- 15\n         /----- 14\n         |       \\----- 13\n /----- 12\n |       |       /----- 11\n |       \\----- 10\n |               \\----- 9\n8\n |               /----- 7\n |       /----- 6\n |       |       \\----- 5\n \\----- 4\n         |       /----- 3\n         \\----- 2\n                 \\----- 1\n</code></pre>\n\n<p>for the input</p>\n\n<p>8\n4\n12\n2\n6\n10\n14\n1\n3\n5\n7\n9\n11\n13\n20\n15</p>\n\n<p>this is a variant from @anurag's answer - it was bugging me to see the extra |s</p>\n"},{"tags":[],"owner":{"account_id":3604825,"reputation":39,"user_id":3007237,"display_name":"Wenguang Wang"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1391283698,"creation_date":1391283698,"answer_id":21502660,"question_id":4965335,"body_markdown":"This is a very simple solution to print out a tree.  It is not that pretty, but it is really simple:\r\n\r\n    enum { kWidth = 6 };\r\n    void PrintSpace(int n)\r\n    {\r\n      for (int i = 0; i &lt; n; ++i)\r\n        printf(&quot; &quot;);\r\n    }\r\n\r\n    void PrintTree(struct Node * root, int level)\r\n    {\r\n      if (!root) return;\r\n      PrintTree(root-&gt;right, level + 1);\r\n      PrintSpace(level * kWidth);\r\n      printf(&quot;%d&quot;, root-&gt;data);\r\n      PrintTree(root-&gt;left, level + 1);\r\n    }\r\n\r\nSample output:\r\n&lt;pre&gt;\r\n      106\r\n            105\r\n104\r\n            103\r\n                  102\r\n                        101\r\n      100\r\n&lt;/pre&gt;\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>This is a very simple solution to print out a tree.  It is not that pretty, but it is really simple:</p>\n\n<pre><code>enum { kWidth = 6 };\nvoid PrintSpace(int n)\n{\n  for (int i = 0; i &lt; n; ++i)\n    printf(\" \");\n}\n\nvoid PrintTree(struct Node * root, int level)\n{\n  if (!root) return;\n  PrintTree(root-&gt;right, level + 1);\n  PrintSpace(level * kWidth);\n  printf(\"%d\", root-&gt;data);\n  PrintTree(root-&gt;left, level + 1);\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre>\n      106\n            105\n104\n            103\n                  102\n                        101\n      100\n</pre>\n"},{"tags":[],"owner":{"account_id":1008417,"reputation":831,"user_id":1021522,"display_name":"Sujit Kamthe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1394287056,"creation_date":1394287056,"answer_id":22270258,"question_id":4965335,"body_markdown":"    public void printPreety() {\r\n\t\tList&lt;TreeNode&gt; list = new ArrayList&lt;TreeNode&gt;();\r\n\t\tlist.add(head);\r\n\t\tprintTree(list, getHeight(head));\r\n\t}\r\n\r\n\tpublic int getHeight(TreeNode head) {\r\n\r\n\t\tif (head == null) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\treturn 1 + Math.max(getHeight(head.left), getHeight(head.right));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * pass head node in list and height of the tree \r\n\t * \r\n\t * @param levelNodes\r\n\t * @param level\r\n\t */\r\n\tprivate void printTree(List&lt;TreeNode&gt; levelNodes, int level) {\r\n\r\n\t\tList&lt;TreeNode&gt; nodes = new ArrayList&lt;TreeNode&gt;();\r\n\t\t\r\n\t\t//indentation for first node in given level\r\n\t\tprintIndentForLevel(level);\r\n\t\t\r\n\t\tfor (TreeNode treeNode : levelNodes) {\r\n\t\t\t\r\n\t\t\t//print node data\r\n\t\t\tSystem.out.print(treeNode == null?&quot; &quot;:treeNode.data);\r\n\t\t\r\n\t\t\t//spacing between nodes\r\n\t\t\tprintSpacingBetweenNodes(level);\r\n\t\t\t\r\n\t\t\t//if its not a leaf node\r\n\t\t\tif(level&gt;1){\r\n\t\t\t\tnodes.add(treeNode == null? null:treeNode.left);\r\n\t\t\t\tnodes.add(treeNode == null? null:treeNode.right);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\t\r\n\t\tif(level&gt;1){\t\t\r\n\t\t\tprintTree(nodes, level-1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void printIndentForLevel(int level){\r\n\t\tfor (int i = (int) (Math.pow(2,level-1)); i &gt;0; i--) {\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void printSpacingBetweenNodes(int level){\r\n\t\t//spacing between nodes\r\n\t\tfor (int i = (int) ((Math.pow(2,level-1))*2)-1; i &gt;0; i--) {\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t}\r\n\r\n\r\n    Prints Tree in following format:\r\n                    4                               \r\n            3               7               \r\n        1               5       8       \r\n          2                       10   \r\n                                 9   ","title":"How to print binary tree diagram in Java?","body":"<pre><code>public void printPreety() {\n    List&lt;TreeNode&gt; list = new ArrayList&lt;TreeNode&gt;();\n    list.add(head);\n    printTree(list, getHeight(head));\n}\n\npublic int getHeight(TreeNode head) {\n\n    if (head == null) {\n        return 0;\n    } else {\n        return 1 + Math.max(getHeight(head.left), getHeight(head.right));\n    }\n}\n\n/**\n * pass head node in list and height of the tree \n * \n * @param levelNodes\n * @param level\n */\nprivate void printTree(List&lt;TreeNode&gt; levelNodes, int level) {\n\n    List&lt;TreeNode&gt; nodes = new ArrayList&lt;TreeNode&gt;();\n\n    //indentation for first node in given level\n    printIndentForLevel(level);\n\n    for (TreeNode treeNode : levelNodes) {\n\n        //print node data\n        System.out.print(treeNode == null?\" \":treeNode.data);\n\n        //spacing between nodes\n        printSpacingBetweenNodes(level);\n\n        //if its not a leaf node\n        if(level&gt;1){\n            nodes.add(treeNode == null? null:treeNode.left);\n            nodes.add(treeNode == null? null:treeNode.right);\n        }\n    }\n    System.out.println();\n\n    if(level&gt;1){        \n        printTree(nodes, level-1);\n    }\n}\n\nprivate void printIndentForLevel(int level){\n    for (int i = (int) (Math.pow(2,level-1)); i &gt;0; i--) {\n        System.out.print(\" \");\n    }\n}\n\nprivate void printSpacingBetweenNodes(int level){\n    //spacing between nodes\n    for (int i = (int) ((Math.pow(2,level-1))*2)-1; i &gt;0; i--) {\n        System.out.print(\" \");\n    }\n}\n\n\nPrints Tree in following format:\n                4                               \n        3               7               \n    1               5       8       \n      2                       10   \n                             9   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":274883,"reputation":5504,"user_id":567390,"accept_rate":89,"display_name":"Todd Davies"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1425745175,"creation_date":1417018646,"answer_id":27153988,"question_id":4965335,"body_markdown":"Adapted from [Vasya Novikov][1]&#39;s [answer][2] to make it more *binary*, and use a `StringBuilder` for efficiency (concatenating `String` objects together in Java is generally inefficient).\r\n\r\n    public StringBuilder toString(StringBuilder prefix, boolean isTail, StringBuilder sb) {\r\n        if(right!=null) {\r\n            right.toString(new StringBuilder().append(prefix).append(isTail ? &quot;   &quot; : &quot;    &quot;), false, sb);\r\n        }\r\n        sb.append(prefix).append(isTail ? &quot; &quot; : &quot; &quot;).append(value.toString()).append(&quot;\\n&quot;);\r\n        if(left!=null) {\r\n            left.toString(new StringBuilder().append(prefix).append(isTail ? &quot;    &quot; : &quot;   &quot;), true, sb);\r\n        }\r\n        return sb;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.toString(new StringBuilder(), true, new StringBuilder()).toString();\r\n    }\r\n\r\nOutput:\r\n\r\n            7\r\n        6\r\n           5\r\n     4\r\n            3\r\n         2\r\n             1\r\n                 0\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1091436/vasya-novikov\r\n  [2]: https://stackoverflow.com/a/8948691/567390","title":"How to print binary tree diagram in Java?","body":"<p>Adapted from <a href=\"https://stackoverflow.com/users/1091436/vasya-novikov\">Vasya Novikov</a>'s <a href=\"https://stackoverflow.com/a/8948691/567390\">answer</a> to make it more <em>binary</em>, and use a <code>StringBuilder</code> for efficiency (concatenating <code>String</code> objects together in Java is generally inefficient).</p>\n\n<pre><code>public StringBuilder toString(StringBuilder prefix, boolean isTail, StringBuilder sb) {\n    if(right!=null) {\n        right.toString(new StringBuilder().append(prefix).append(isTail ? \"   \" : \"    \"), false, sb);\n    }\n    sb.append(prefix).append(isTail ? \" \" : \" \").append(value.toString()).append(\"\\n\");\n    if(left!=null) {\n        left.toString(new StringBuilder().append(prefix).append(isTail ? \"    \" : \"   \"), true, sb);\n    }\n    return sb;\n}\n\n@Override\npublic String toString() {\n    return this.toString(new StringBuilder(), true, new StringBuilder()).toString();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>        7\n    6\n       5\n 4\n        3\n     2\n         1\n             0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2506651,"reputation":18472,"user_id":2180189,"accept_rate":71,"display_name":"MightyPork"},"down_vote_count":0,"up_vote_count":74,"is_accepted":false,"score":74,"last_activity_date":1429286770,"creation_date":1429286770,"answer_id":29704252,"question_id":4965335,"body_markdown":"I&#39;ve made an improved algorithm for this, which handles nicely nodes with different size. It prints top-down using lines.\r\n\r\n    package alg;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    \r\n    /**\r\n     * Binary tree printer\r\n     * \r\n     * @author MightyPork\r\n     */\r\n    public class TreePrinter\r\n    {\r\n        /** Node that can be printed */\r\n        public interface PrintableNode\r\n        {\r\n            /** Get left child */\r\n            PrintableNode getLeft();\r\n    \r\n    \r\n            /** Get right child */\r\n            PrintableNode getRight();\r\n    \r\n    \r\n            /** Get text to be printed */\r\n            String getText();\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Print a tree\r\n         * \r\n         * @param root\r\n         *            tree root node\r\n         */\r\n        public static void print(PrintableNode root)\r\n        {\r\n            List&lt;List&lt;String&gt;&gt; lines = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n    \r\n            List&lt;PrintableNode&gt; level = new ArrayList&lt;PrintableNode&gt;();\r\n            List&lt;PrintableNode&gt; next = new ArrayList&lt;PrintableNode&gt;();\r\n    \r\n            level.add(root);\r\n            int nn = 1;\r\n    \r\n            int widest = 0;\r\n    \r\n            while (nn != 0) {\r\n                List&lt;String&gt; line = new ArrayList&lt;String&gt;();\r\n    \r\n                nn = 0;\r\n    \r\n                for (PrintableNode n : level) {\r\n                    if (n == null) {\r\n                        line.add(null);\r\n    \r\n                        next.add(null);\r\n                        next.add(null);\r\n                    } else {\r\n                        String aa = n.getText();\r\n                        line.add(aa);\r\n                        if (aa.length() &gt; widest) widest = aa.length();\r\n    \r\n                        next.add(n.getLeft());\r\n                        next.add(n.getRight());\r\n    \r\n                        if (n.getLeft() != null) nn++;\r\n                        if (n.getRight() != null) nn++;\r\n                    }\r\n                }\r\n    \r\n                if (widest % 2 == 1) widest++;\r\n    \r\n                lines.add(line);\r\n    \r\n                List&lt;PrintableNode&gt; tmp = level;\r\n                level = next;\r\n                next = tmp;\r\n                next.clear();\r\n            }\r\n    \r\n            int perpiece = lines.get(lines.size() - 1).size() * (widest + 4);\r\n            for (int i = 0; i &lt; lines.size(); i++) {\r\n                List&lt;String&gt; line = lines.get(i);\r\n                int hpw = (int) Math.floor(perpiece / 2f) - 1;\r\n    \r\n                if (i &gt; 0) {\r\n                    for (int j = 0; j &lt; line.size(); j++) {\r\n    \r\n                        // split node\r\n                        char c = &#39; &#39;;\r\n                        if (j % 2 == 1) {\r\n                            if (line.get(j - 1) != null) {\r\n                                c = (line.get(j) != null) ? &#39;&#39; : &#39;&#39;;\r\n                            } else {\r\n                                if (j &lt; line.size() &amp;&amp; line.get(j) != null) c = &#39;&#39;;\r\n                            }\r\n                        }\r\n                        System.out.print(c);\r\n    \r\n                        // lines and spaces\r\n                        if (line.get(j) == null) {\r\n                            for (int k = 0; k &lt; perpiece - 1; k++) {\r\n                                System.out.print(&quot; &quot;);\r\n                            }\r\n                        } else {\r\n    \r\n                            for (int k = 0; k &lt; hpw; k++) {\r\n                                System.out.print(j % 2 == 0 ? &quot; &quot; : &quot;&quot;);\r\n                            }\r\n                            System.out.print(j % 2 == 0 ? &quot;&quot; : &quot;&quot;);\r\n                            for (int k = 0; k &lt; hpw; k++) {\r\n                                System.out.print(j % 2 == 0 ? &quot;&quot; : &quot; &quot;);\r\n                            }\r\n                        }\r\n                    }\r\n                    System.out.println();\r\n                }\r\n    \r\n                // print line of numbers\r\n                for (int j = 0; j &lt; line.size(); j++) {\r\n    \r\n                    String f = line.get(j);\r\n                    if (f == null) f = &quot;&quot;;\r\n                    int gap1 = (int) Math.ceil(perpiece / 2f - f.length() / 2f);\r\n                    int gap2 = (int) Math.floor(perpiece / 2f - f.length() / 2f);\r\n    \r\n                    // a number\r\n                    for (int k = 0; k &lt; gap1; k++) {\r\n                        System.out.print(&quot; &quot;);\r\n                    }\r\n                    System.out.print(f);\r\n                    for (int k = 0; k &lt; gap2; k++) {\r\n                        System.out.print(&quot; &quot;);\r\n                    }\r\n                }\r\n                System.out.println();\r\n    \r\n                perpiece /= 2;\r\n            }\r\n        }\r\n    }\r\n\r\nTo use this for your Tree, let your `Node` class implement `PrintableNode`.\r\n\r\nExample output:\r\n\r\n                                             2952:0                                             \r\n                                               \r\n                     1249:-1                                         5866:0                     \r\n                                              \r\n         491:-1                  1572:0                  4786:1                  6190:0         \r\n                                                                     \r\n    339:0                                                      5717:0      6061:0      6271:0   ","title":"How to print binary tree diagram in Java?","body":"<p>I've made an improved algorithm for this, which handles nicely nodes with different size. It prints top-down using lines.</p>\n\n<pre><code>package alg;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n/**\n * Binary tree printer\n * \n * @author MightyPork\n */\npublic class TreePrinter\n{\n    /** Node that can be printed */\n    public interface PrintableNode\n    {\n        /** Get left child */\n        PrintableNode getLeft();\n\n\n        /** Get right child */\n        PrintableNode getRight();\n\n\n        /** Get text to be printed */\n        String getText();\n    }\n\n\n    /**\n     * Print a tree\n     * \n     * @param root\n     *            tree root node\n     */\n    public static void print(PrintableNode root)\n    {\n        List&lt;List&lt;String&gt;&gt; lines = new ArrayList&lt;List&lt;String&gt;&gt;();\n\n        List&lt;PrintableNode&gt; level = new ArrayList&lt;PrintableNode&gt;();\n        List&lt;PrintableNode&gt; next = new ArrayList&lt;PrintableNode&gt;();\n\n        level.add(root);\n        int nn = 1;\n\n        int widest = 0;\n\n        while (nn != 0) {\n            List&lt;String&gt; line = new ArrayList&lt;String&gt;();\n\n            nn = 0;\n\n            for (PrintableNode n : level) {\n                if (n == null) {\n                    line.add(null);\n\n                    next.add(null);\n                    next.add(null);\n                } else {\n                    String aa = n.getText();\n                    line.add(aa);\n                    if (aa.length() &gt; widest) widest = aa.length();\n\n                    next.add(n.getLeft());\n                    next.add(n.getRight());\n\n                    if (n.getLeft() != null) nn++;\n                    if (n.getRight() != null) nn++;\n                }\n            }\n\n            if (widest % 2 == 1) widest++;\n\n            lines.add(line);\n\n            List&lt;PrintableNode&gt; tmp = level;\n            level = next;\n            next = tmp;\n            next.clear();\n        }\n\n        int perpiece = lines.get(lines.size() - 1).size() * (widest + 4);\n        for (int i = 0; i &lt; lines.size(); i++) {\n            List&lt;String&gt; line = lines.get(i);\n            int hpw = (int) Math.floor(perpiece / 2f) - 1;\n\n            if (i &gt; 0) {\n                for (int j = 0; j &lt; line.size(); j++) {\n\n                    // split node\n                    char c = ' ';\n                    if (j % 2 == 1) {\n                        if (line.get(j - 1) != null) {\n                            c = (line.get(j) != null) ? '' : '';\n                        } else {\n                            if (j &lt; line.size() &amp;&amp; line.get(j) != null) c = '';\n                        }\n                    }\n                    System.out.print(c);\n\n                    // lines and spaces\n                    if (line.get(j) == null) {\n                        for (int k = 0; k &lt; perpiece - 1; k++) {\n                            System.out.print(\" \");\n                        }\n                    } else {\n\n                        for (int k = 0; k &lt; hpw; k++) {\n                            System.out.print(j % 2 == 0 ? \" \" : \"\");\n                        }\n                        System.out.print(j % 2 == 0 ? \"\" : \"\");\n                        for (int k = 0; k &lt; hpw; k++) {\n                            System.out.print(j % 2 == 0 ? \"\" : \" \");\n                        }\n                    }\n                }\n                System.out.println();\n            }\n\n            // print line of numbers\n            for (int j = 0; j &lt; line.size(); j++) {\n\n                String f = line.get(j);\n                if (f == null) f = \"\";\n                int gap1 = (int) Math.ceil(perpiece / 2f - f.length() / 2f);\n                int gap2 = (int) Math.floor(perpiece / 2f - f.length() / 2f);\n\n                // a number\n                for (int k = 0; k &lt; gap1; k++) {\n                    System.out.print(\" \");\n                }\n                System.out.print(f);\n                for (int k = 0; k &lt; gap2; k++) {\n                    System.out.print(\" \");\n                }\n            }\n            System.out.println();\n\n            perpiece /= 2;\n        }\n    }\n}\n</code></pre>\n\n<p>To use this for your Tree, let your <code>Node</code> class implement <code>PrintableNode</code>.</p>\n\n<p>Example output:</p>\n\n<pre><code>                                         2952:0                                             \n                                           \n                 1249:-1                                         5866:0                     \n                                          \n     491:-1                  1572:0                  4786:1                  6190:0         \n                                                                 \n339:0                                                      5717:0      6061:0      6271:0   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4992404,"reputation":307,"user_id":4014182,"accept_rate":60,"display_name":"Murtaza Raja"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456764447,"creation_date":1456602838,"answer_id":35674693,"question_id":4965335,"body_markdown":"    private StringBuilder prettyPrint(Node root, int currentHeight, int totalHeight) {\r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \t\tint spaces = getSpaceCount(totalHeight-currentHeight + 1);\r\n    \t\tif(root == null) {\r\n    \t\t\t//create a &#39;spatial&#39; block and return it\r\n    \t\t\tString row = String.format(&quot;%&quot;+(2*spaces+1)+&quot;s%n&quot;, &quot;&quot;);\r\n    \t\t\t//now repeat this row space+1 times\r\n    \t\t\tString block = new String(new char[spaces+1]).replace(&quot;\\0&quot;, row);\r\n    \t\t\treturn new StringBuilder(block);\r\n    \t\t}\r\n    \t\tif(currentHeight==totalHeight) return new StringBuilder(root.data+&quot;&quot;);\r\n    \t\tint slashes = getSlashCount(totalHeight-currentHeight +1);\r\n    \t\tsb.append(String.format(&quot;%&quot;+(spaces+1)+&quot;s%&quot;+spaces+&quot;s&quot;, root.data+&quot;&quot;, &quot;&quot;));\r\n    \t\tsb.append(&quot;\\n&quot;);\r\n    \t\t//now print / and \\\r\n    \t\t// but make sure that left and right exists\r\n    \t\tchar leftSlash = root.left == null? &#39; &#39;:&#39;/&#39;;\r\n    \t\tchar rightSlash = root.right==null? &#39; &#39;:&#39;\\\\&#39;;\r\n    \t\tint spaceInBetween = 1;\r\n    \t\tfor(int i=0, space = spaces-1; i&lt;slashes; i++, space --, spaceInBetween+=2) {\r\n    \t\t\tfor(int j=0; j&lt;space; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(leftSlash);\r\n    \t\t\tfor(int j=0; j&lt;spaceInBetween; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(rightSlash+&quot;&quot;);\r\n    \t\t\tfor(int j=0; j&lt;space; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\t//sb.append(&quot;\\n&quot;);\r\n    \r\n    \t\t//now get string representations of left and right subtrees\r\n    \t\tStringBuilder leftTree = prettyPrint(root.left, currentHeight+1, totalHeight);\r\n    \t\tStringBuilder rightTree = prettyPrint(root.right, currentHeight+1, totalHeight);\r\n    \t\t// now line by line print the trees side by side\r\n    \t\tScanner leftScanner = new Scanner(leftTree.toString());\r\n    \t\tScanner rightScanner = new Scanner(rightTree.toString());\r\n    //\t\tspaceInBetween+=1;\r\n    \t\twhile(leftScanner.hasNextLine()) {\r\n    \t\t\tif(currentHeight==totalHeight-1) {\r\n    \t\t\t\tsb.append(String.format(&quot;%-2s %2s&quot;, leftScanner.nextLine(), rightScanner.nextLine()));\r\n    \t\t\t\tsb.append(&quot;\\n&quot;);\r\n    \t\t\t\tspaceInBetween-=2;\t\t\t\t\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tsb.append(leftScanner.nextLine());\r\n    \t\t\t\tsb.append(&quot; &quot;);\r\n    \t\t\t\tsb.append(rightScanner.nextLine()+&quot;\\n&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn sb;\r\n    \r\n    \t}\r\n    private int getSpaceCount(int height) {\r\n    \t\treturn (int) (3*Math.pow(2, height-2)-1);\r\n    \t}\r\n    private int getSlashCount(int height) {\r\n    \t\tif(height &lt;= 3) return height -1;\r\n    \t\treturn (int) (3*Math.pow(2, height-3)-1);\r\n    \t}\r\n\r\nhttps://github.com/murtraja/java-binary-tree-printer\r\n\r\nonly works for 1 to 2 digit integers (i was lazy to make it generic)\r\n\r\n[![skewed][1]][1]\r\n[![full][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/PbJzM.png\r\n  [2]: http://i.stack.imgur.com/WP2uj.png","title":"How to print binary tree diagram in Java?","body":"<pre><code>private StringBuilder prettyPrint(Node root, int currentHeight, int totalHeight) {\n        StringBuilder sb = new StringBuilder();\n        int spaces = getSpaceCount(totalHeight-currentHeight + 1);\n        if(root == null) {\n            //create a 'spatial' block and return it\n            String row = String.format(\"%\"+(2*spaces+1)+\"s%n\", \"\");\n            //now repeat this row space+1 times\n            String block = new String(new char[spaces+1]).replace(\"\\0\", row);\n            return new StringBuilder(block);\n        }\n        if(currentHeight==totalHeight) return new StringBuilder(root.data+\"\");\n        int slashes = getSlashCount(totalHeight-currentHeight +1);\n        sb.append(String.format(\"%\"+(spaces+1)+\"s%\"+spaces+\"s\", root.data+\"\", \"\"));\n        sb.append(\"\\n\");\n        //now print / and \\\n        // but make sure that left and right exists\n        char leftSlash = root.left == null? ' ':'/';\n        char rightSlash = root.right==null? ' ':'\\\\';\n        int spaceInBetween = 1;\n        for(int i=0, space = spaces-1; i&lt;slashes; i++, space --, spaceInBetween+=2) {\n            for(int j=0; j&lt;space; j++) sb.append(\" \");\n            sb.append(leftSlash);\n            for(int j=0; j&lt;spaceInBetween; j++) sb.append(\" \");\n            sb.append(rightSlash+\"\");\n            for(int j=0; j&lt;space; j++) sb.append(\" \");\n            sb.append(\"\\n\");\n        }\n        //sb.append(\"\\n\");\n\n        //now get string representations of left and right subtrees\n        StringBuilder leftTree = prettyPrint(root.left, currentHeight+1, totalHeight);\n        StringBuilder rightTree = prettyPrint(root.right, currentHeight+1, totalHeight);\n        // now line by line print the trees side by side\n        Scanner leftScanner = new Scanner(leftTree.toString());\n        Scanner rightScanner = new Scanner(rightTree.toString());\n//      spaceInBetween+=1;\n        while(leftScanner.hasNextLine()) {\n            if(currentHeight==totalHeight-1) {\n                sb.append(String.format(\"%-2s %2s\", leftScanner.nextLine(), rightScanner.nextLine()));\n                sb.append(\"\\n\");\n                spaceInBetween-=2;              \n            }\n            else {\n                sb.append(leftScanner.nextLine());\n                sb.append(\" \");\n                sb.append(rightScanner.nextLine()+\"\\n\");\n            }\n        }\n\n        return sb;\n\n    }\nprivate int getSpaceCount(int height) {\n        return (int) (3*Math.pow(2, height-2)-1);\n    }\nprivate int getSlashCount(int height) {\n        if(height &lt;= 3) return height -1;\n        return (int) (3*Math.pow(2, height-3)-1);\n    }\n</code></pre>\n\n<p><a href=\"https://github.com/murtraja/java-binary-tree-printer\" rel=\"nofollow noreferrer\">https://github.com/murtraja/java-binary-tree-printer</a></p>\n\n<p>only works for 1 to 2 digit integers (i was lazy to make it generic)</p>\n\n<p><a href=\"https://i.stack.imgur.com/PbJzM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PbJzM.png\" alt=\"skewed\"></a>\n<a href=\"https://i.stack.imgur.com/WP2uj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WP2uj.png\" alt=\"full\"></a></p>\n"},{"tags":[],"owner":{"account_id":355526,"reputation":61,"user_id":694521,"display_name":"Divang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461759964,"creation_date":1461742966,"answer_id":36883418,"question_id":4965335,"body_markdown":"Print in Console: \r\n\r\n                                                    500\r\n                           700                                             300   \r\n        200                                   400                                                                                          \r\n    \r\nSimple code :\r\n\r\n    public int getHeight()\r\n    \t{\r\n    \t\tif(rootNode == null) return -1;\r\n    \t\treturn getHeight(rootNode);\r\n    \t}\r\n    \t\r\n    \tprivate int getHeight(Node node)\r\n    \t{\r\n    \t\tif(node == null) return -1;\r\n    \t\t\r\n    \t\treturn Math.max(getHeight(node.left), getHeight(node.right)) + 1;\r\n    \t}\r\n    \r\n    \tpublic void printBinaryTree(Node rootNode)\r\n    \t{\r\n    \t\tQueue&lt;Node&gt; rootsQueue = new LinkedList&lt;Node&gt;();\r\n    \t\tQueue&lt;Node&gt; levelQueue = new LinkedList&lt;Node&gt;();\r\n    \t\tlevelQueue.add(rootNode);\r\n    \t\tint treeHeight = getHeight();\r\n    \t\tint firstNodeGap;\r\n    \t\tint internalNodeGap;\r\n    \t\tint copyinternalNodeGap;\r\n    \t\twhile(true)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;&quot;);\r\n    \t\t\tinternalNodeGap = (int)(Math.pow(2, treeHeight + 1) -1);  \r\n    \t\t\tcopyinternalNodeGap = internalNodeGap;\r\n    \t\t\tfirstNodeGap = internalNodeGap/2;\r\n    \t\t\t\r\n    \t\t\tboolean levelFirstNode = true;\r\n    \t\t\t\r\n    \t\t\twhile(!levelQueue.isEmpty())\r\n    \t\t\t{\r\n    \t\t\t\tinternalNodeGap = copyinternalNodeGap;\r\n    \t\t\t\tNode currNode = levelQueue.poll();\r\n    \t\t\t\tif(currNode != null)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tif(levelFirstNode)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t    while(firstNodeGap &gt; 0)\r\n    \t\t\t\t\t    {\r\n    \t\t\t\t\t    \tSystem.out.format(&quot;%s&quot;, &quot;   &quot;);\r\n    \t\t\t\t\t    \tfirstNodeGap--; \r\n    \t\t\t\t\t    }\r\n    \t\t\t\t\t\tlevelFirstNode =false;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\telse\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\twhile(internalNodeGap&gt;0)\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\tinternalNodeGap--;\r\n    \t\t\t\t\t\t\tSystem.out.format(&quot;%s&quot;, &quot;   &quot;);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tSystem.out.format(&quot;%3d&quot;,currNode.data);\r\n    \t\t\t\t\trootsQueue.add(currNode);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t--treeHeight;\r\n    \t\t\t\r\n    \t\t\twhile(!rootsQueue.isEmpty())\r\n    \t\t\t{\r\n    \t\t\t\tNode currNode = rootsQueue.poll();\r\n    \t\t\t\tif(currNode != null)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tlevelQueue.add(currNode.left);\r\n    \t\t\t\t\tlevelQueue.add(currNode.right);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif(levelQueue.isEmpty()) break;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Print in Console: </p>\n\n<pre><code>                                                500\n                       700                                             300   \n    200                                   400                                                                                          \n</code></pre>\n\n<p>Simple code :</p>\n\n<pre><code>public int getHeight()\n    {\n        if(rootNode == null) return -1;\n        return getHeight(rootNode);\n    }\n\n    private int getHeight(Node node)\n    {\n        if(node == null) return -1;\n\n        return Math.max(getHeight(node.left), getHeight(node.right)) + 1;\n    }\n\n    public void printBinaryTree(Node rootNode)\n    {\n        Queue&lt;Node&gt; rootsQueue = new LinkedList&lt;Node&gt;();\n        Queue&lt;Node&gt; levelQueue = new LinkedList&lt;Node&gt;();\n        levelQueue.add(rootNode);\n        int treeHeight = getHeight();\n        int firstNodeGap;\n        int internalNodeGap;\n        int copyinternalNodeGap;\n        while(true)\n        {\n            System.out.println(\"\");\n            internalNodeGap = (int)(Math.pow(2, treeHeight + 1) -1);  \n            copyinternalNodeGap = internalNodeGap;\n            firstNodeGap = internalNodeGap/2;\n\n            boolean levelFirstNode = true;\n\n            while(!levelQueue.isEmpty())\n            {\n                internalNodeGap = copyinternalNodeGap;\n                Node currNode = levelQueue.poll();\n                if(currNode != null)\n                {\n                    if(levelFirstNode)\n                    {\n                        while(firstNodeGap &gt; 0)\n                        {\n                            System.out.format(\"%s\", \"   \");\n                            firstNodeGap--; \n                        }\n                        levelFirstNode =false;\n                    }\n                    else\n                    {\n                        while(internalNodeGap&gt;0)\n                        {\n                            internalNodeGap--;\n                            System.out.format(\"%s\", \"   \");\n                        }\n                    }\n                    System.out.format(\"%3d\",currNode.data);\n                    rootsQueue.add(currNode);\n                }\n            }\n\n            --treeHeight;\n\n            while(!rootsQueue.isEmpty())\n            {\n                Node currNode = rootsQueue.poll();\n                if(currNode != null)\n                {\n                    levelQueue.add(currNode.left);\n                    levelQueue.add(currNode.right);\n                }\n            }\n\n            if(levelQueue.isEmpty()) break;\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1137268,"reputation":1777,"user_id":1122069,"accept_rate":68,"display_name":"user1122069"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467163464,"creation_date":1467163464,"answer_id":38088807,"question_id":4965335,"body_markdown":"Here&#39;s a very versatile tree printer. Not the best looking, but it handles a lot of cases. Feel free to add slashes if you can figure that out.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class NodePrinter{\r\n        final private List&lt;List&lt;PrintableNodePosition&gt;&gt; nodesByRow;\r\n        int maxColumnsLeft = 0;\r\n        int maxColumnsRight = 0;\r\n        int maxTitleLength = 0;\r\n        String sep = &quot; &quot;;\r\n        int depth = 0;\r\n    \r\n        public NodePrinter(PrintableNode rootNode, int chars_per_node){\r\n            this.setDepth(rootNode,1);\r\n            nodesByRow = new ArrayList&lt;&gt;(depth);\r\n            this.addNode(rootNode._getPrintableNodeInfo(),0,0);\r\n            for (int i = 0;i&lt;chars_per_node;i++){\r\n                //sep += &quot; &quot;;\r\n            }\r\n        }\r\n    \r\n        private void setDepth(PrintableNode info, int depth){\r\n            if (depth &gt; this.depth){\r\n                this.depth = depth;\r\n            }\r\n            if (info._getLeftChild() != null){\r\n                this.setDepth(info._getLeftChild(),depth+1);\r\n            }\r\n            if (info._getRightChild() != null){\r\n                this.setDepth(info._getRightChild(),depth+1);\r\n            }\r\n        }\r\n    \r\n        private void addNode(PrintableNodeInfo node, int level, int position){\r\n            if (position &lt; 0 &amp;&amp; -position &gt; maxColumnsLeft){\r\n                maxColumnsLeft = -position;\r\n            }\r\n            if (position &gt; 0 &amp;&amp; position &gt; maxColumnsRight){\r\n                maxColumnsRight = position;\r\n            }\r\n            if (node.getTitleLength() &gt; maxTitleLength){\r\n               maxTitleLength = node.getTitleLength();\r\n            }\r\n            List&lt;PrintableNodePosition&gt; row = this.getRow(level);\r\n            row.add(new PrintableNodePosition(node, level, position));\r\n            level++;\r\n    \r\n            int depthToUse = Math.min(depth,6);\r\n            int levelToUse = Math.min(level,6);\r\n            int offset = depthToUse - levelToUse-1;\r\n            offset = (int)(Math.pow(offset,Math.log(depthToUse)*1.4));\r\n            offset = Math.max(offset,3);\r\n    \r\n    \r\n            PrintableNodeInfo leftChild = node.getLeftChildInfo();\r\n            PrintableNodeInfo rightChild = node.getRightChildInfo();\r\n            if (leftChild != null){\r\n                this.addNode(leftChild,level,position-offset);\r\n            }\r\n            if (rightChild != null){\r\n                this.addNode(rightChild,level,position+offset);\r\n            }\r\n        }\r\n    \r\n        private List&lt;PrintableNodePosition&gt; getRow(int row){\r\n            if (row &gt; nodesByRow.size() - 1){\r\n                nodesByRow.add(new LinkedList&lt;&gt;());\r\n            }\r\n            return nodesByRow.get(row);\r\n        }\r\n    \r\n        public void print(){\r\n            int max_chars = this.maxColumnsLeft+maxColumnsRight+1;\r\n            int level = 0;\r\n            String node_format = &quot;%-&quot;+this.maxTitleLength+&quot;s&quot;;\r\n            for (List&lt;PrintableNodePosition&gt; pos_arr : this.nodesByRow){\r\n                String[] chars = this.getCharactersArray(pos_arr,max_chars);\r\n                String line = &quot;&quot;;\r\n                int empty_chars = 0;\r\n                for (int i=0;i&lt;chars.length+1;i++){\r\n                    String value_i = i &lt; chars.length ? chars[i]:null;\r\n                    if (chars.length + 1 == i || value_i != null){\r\n                        if (empty_chars &gt; 0) {\r\n                            System.out.print(String.format(&quot;%-&quot; + empty_chars + &quot;s&quot;, &quot; &quot;));\r\n                        }\r\n                        if (value_i != null){\r\n                            System.out.print(String.format(node_format,value_i));\r\n                            empty_chars = -1;\r\n                        } else{\r\n                            empty_chars = 0;\r\n                        }\r\n                    } else {\r\n                        empty_chars++;\r\n                    }\r\n                }\r\n                System.out.print(&quot;\\n&quot;);\r\n    \r\n                int depthToUse = Math.min(6,depth);\r\n                int line_offset = depthToUse - level;\r\n                line_offset *= 0.5;\r\n                line_offset = Math.max(0,line_offset);\r\n    \r\n                for (int i=0;i&lt;line_offset;i++){\r\n                    System.out.println(&quot;&quot;);\r\n                }\r\n    \r\n    \r\n                level++;\r\n            }\r\n        }\r\n    \r\n        private String[] getCharactersArray(List&lt;PrintableNodePosition&gt; nodes, int max_chars){\r\n            String[] positions = new String[max_chars+1];\r\n            for (PrintableNodePosition a : nodes){\r\n                int pos_i = maxColumnsLeft + a.column;\r\n                String title_i = a.nodeInfo.getTitleFormatted(this.maxTitleLength);\r\n                positions[pos_i] = title_i;\r\n            }\r\n            return positions;\r\n        }\r\n    }\r\n\r\nNodeInfo class\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class PrintableNodeInfo {\r\n        public enum CLI_PRINT_COLOR {\r\n            RESET(&quot;\\u001B[0m&quot;),\r\n            BLACK(&quot;\\u001B[30m&quot;),\r\n            RED(&quot;\\u001B[31m&quot;),\r\n            GREEN(&quot;\\u001B[32m&quot;),\r\n            YELLOW(&quot;\\u001B[33m&quot;),\r\n            BLUE(&quot;\\u001B[34m&quot;),\r\n            PURPLE(&quot;\\u001B[35m&quot;),\r\n            CYAN(&quot;\\u001B[36m&quot;),\r\n            WHITE(&quot;\\u001B[37m&quot;);\r\n            \r\n            final String value;\r\n            CLI_PRINT_COLOR(String value){\r\n                this.value = value;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return value;\r\n            }\r\n        }\r\n        private final String title;\r\n        private final PrintableNode leftChild;\r\n        private final PrintableNode rightChild;\r\n        private final CLI_PRINT_COLOR textColor;\r\n    \r\n        public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode rightChild){\r\n            this(title,leftChild,rightChild,CLI_PRINT_COLOR.BLACK);\r\n        }\r\n    \r\n        public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode righthild, CLI_PRINT_COLOR textColor){\r\n            this.title = title;\r\n            this.leftChild = leftChild;\r\n            this.rightChild = righthild;\r\n            this.textColor = textColor;\r\n        }\r\n    \r\n        public String getTitle(){\r\n            return title;\r\n        }\r\n    \r\n        public CLI_PRINT_COLOR getTextColor(){\r\n            return textColor;\r\n        }\r\n    \r\n        public String getTitleFormatted(int max_chars){\r\n            return this.textColor+title+CLI_PRINT_COLOR.RESET;\r\n            /*\r\n            String title = this.title.length() &gt; max_chars ? this.title.substring(0,max_chars+1):this.title;\r\n            boolean left = true;\r\n            while(title.length() &lt; max_chars){\r\n                if (left){\r\n                    title = &quot; &quot;+title;\r\n                } else {\r\n                    title = title + &quot; &quot;;\r\n                }\r\n            }\r\n            return this.textColor+title+CLI_PRINT_COLOR.RESET;*/\r\n        }\r\n    \r\n        public int getTitleLength(){\r\n            return title.length();\r\n        }\r\n    \r\n        public PrintableNodeInfo getLeftChildInfo(){\r\n            if (leftChild == null){\r\n                return null;\r\n            }\r\n            return leftChild._getPrintableNodeInfo();\r\n        }\r\n    \r\n        public PrintableNodeInfo getRightChildInfo(){\r\n            if (rightChild == null){\r\n                return null;\r\n            }\r\n            return rightChild._getPrintableNodeInfo();\r\n        }\r\n    }\r\n\r\nNodePosition class\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class PrintableNodePosition implements Comparable&lt;PrintableNodePosition&gt; {\r\n        public final int row;\r\n        public final int column;\r\n        public final PrintableNodeInfo nodeInfo;\r\n        public PrintableNodePosition(PrintableNodeInfo nodeInfo, int row, int column){\r\n            this.row = row;\r\n            this.column = column;\r\n            this.nodeInfo = nodeInfo;\r\n        }\r\n    \r\n        @Override\r\n        public int compareTo(PrintableNodePosition o) {\r\n            return Integer.compare(this.column,o.column);\r\n        }\r\n    }\r\n\r\nAnd, finally, Node Interface\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public interface PrintableNode {\r\n        PrintableNodeInfo _getPrintableNodeInfo();\r\n        PrintableNode _getLeftChild();\r\n        PrintableNode _getRightChild();\r\n    }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Glo7T.png","title":"How to print binary tree diagram in Java?","body":"<p>Here's a very versatile tree printer. Not the best looking, but it handles a lot of cases. Feel free to add slashes if you can figure that out.\n<a href=\"https://i.stack.imgur.com/Glo7T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Glo7T.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\nimport java.util.ArrayList;\nimport java.util.LinkedList;\nimport java.util.List;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class NodePrinter{\n    final private List&lt;List&lt;PrintableNodePosition&gt;&gt; nodesByRow;\n    int maxColumnsLeft = 0;\n    int maxColumnsRight = 0;\n    int maxTitleLength = 0;\n    String sep = \" \";\n    int depth = 0;\n\n    public NodePrinter(PrintableNode rootNode, int chars_per_node){\n        this.setDepth(rootNode,1);\n        nodesByRow = new ArrayList&lt;&gt;(depth);\n        this.addNode(rootNode._getPrintableNodeInfo(),0,0);\n        for (int i = 0;i&lt;chars_per_node;i++){\n            //sep += \" \";\n        }\n    }\n\n    private void setDepth(PrintableNode info, int depth){\n        if (depth &gt; this.depth){\n            this.depth = depth;\n        }\n        if (info._getLeftChild() != null){\n            this.setDepth(info._getLeftChild(),depth+1);\n        }\n        if (info._getRightChild() != null){\n            this.setDepth(info._getRightChild(),depth+1);\n        }\n    }\n\n    private void addNode(PrintableNodeInfo node, int level, int position){\n        if (position &lt; 0 &amp;&amp; -position &gt; maxColumnsLeft){\n            maxColumnsLeft = -position;\n        }\n        if (position &gt; 0 &amp;&amp; position &gt; maxColumnsRight){\n            maxColumnsRight = position;\n        }\n        if (node.getTitleLength() &gt; maxTitleLength){\n           maxTitleLength = node.getTitleLength();\n        }\n        List&lt;PrintableNodePosition&gt; row = this.getRow(level);\n        row.add(new PrintableNodePosition(node, level, position));\n        level++;\n\n        int depthToUse = Math.min(depth,6);\n        int levelToUse = Math.min(level,6);\n        int offset = depthToUse - levelToUse-1;\n        offset = (int)(Math.pow(offset,Math.log(depthToUse)*1.4));\n        offset = Math.max(offset,3);\n\n\n        PrintableNodeInfo leftChild = node.getLeftChildInfo();\n        PrintableNodeInfo rightChild = node.getRightChildInfo();\n        if (leftChild != null){\n            this.addNode(leftChild,level,position-offset);\n        }\n        if (rightChild != null){\n            this.addNode(rightChild,level,position+offset);\n        }\n    }\n\n    private List&lt;PrintableNodePosition&gt; getRow(int row){\n        if (row &gt; nodesByRow.size() - 1){\n            nodesByRow.add(new LinkedList&lt;&gt;());\n        }\n        return nodesByRow.get(row);\n    }\n\n    public void print(){\n        int max_chars = this.maxColumnsLeft+maxColumnsRight+1;\n        int level = 0;\n        String node_format = \"%-\"+this.maxTitleLength+\"s\";\n        for (List&lt;PrintableNodePosition&gt; pos_arr : this.nodesByRow){\n            String[] chars = this.getCharactersArray(pos_arr,max_chars);\n            String line = \"\";\n            int empty_chars = 0;\n            for (int i=0;i&lt;chars.length+1;i++){\n                String value_i = i &lt; chars.length ? chars[i]:null;\n                if (chars.length + 1 == i || value_i != null){\n                    if (empty_chars &gt; 0) {\n                        System.out.print(String.format(\"%-\" + empty_chars + \"s\", \" \"));\n                    }\n                    if (value_i != null){\n                        System.out.print(String.format(node_format,value_i));\n                        empty_chars = -1;\n                    } else{\n                        empty_chars = 0;\n                    }\n                } else {\n                    empty_chars++;\n                }\n            }\n            System.out.print(\"\\n\");\n\n            int depthToUse = Math.min(6,depth);\n            int line_offset = depthToUse - level;\n            line_offset *= 0.5;\n            line_offset = Math.max(0,line_offset);\n\n            for (int i=0;i&lt;line_offset;i++){\n                System.out.println(\"\");\n            }\n\n\n            level++;\n        }\n    }\n\n    private String[] getCharactersArray(List&lt;PrintableNodePosition&gt; nodes, int max_chars){\n        String[] positions = new String[max_chars+1];\n        for (PrintableNodePosition a : nodes){\n            int pos_i = maxColumnsLeft + a.column;\n            String title_i = a.nodeInfo.getTitleFormatted(this.maxTitleLength);\n            positions[pos_i] = title_i;\n        }\n        return positions;\n    }\n}\n</code></pre>\n\n<p>NodeInfo class</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class PrintableNodeInfo {\n    public enum CLI_PRINT_COLOR {\n        RESET(\"\\u001B[0m\"),\n        BLACK(\"\\u001B[30m\"),\n        RED(\"\\u001B[31m\"),\n        GREEN(\"\\u001B[32m\"),\n        YELLOW(\"\\u001B[33m\"),\n        BLUE(\"\\u001B[34m\"),\n        PURPLE(\"\\u001B[35m\"),\n        CYAN(\"\\u001B[36m\"),\n        WHITE(\"\\u001B[37m\");\n\n        final String value;\n        CLI_PRINT_COLOR(String value){\n            this.value = value;\n        }\n\n        @Override\n        public String toString() {\n            return value;\n        }\n    }\n    private final String title;\n    private final PrintableNode leftChild;\n    private final PrintableNode rightChild;\n    private final CLI_PRINT_COLOR textColor;\n\n    public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode rightChild){\n        this(title,leftChild,rightChild,CLI_PRINT_COLOR.BLACK);\n    }\n\n    public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode righthild, CLI_PRINT_COLOR textColor){\n        this.title = title;\n        this.leftChild = leftChild;\n        this.rightChild = righthild;\n        this.textColor = textColor;\n    }\n\n    public String getTitle(){\n        return title;\n    }\n\n    public CLI_PRINT_COLOR getTextColor(){\n        return textColor;\n    }\n\n    public String getTitleFormatted(int max_chars){\n        return this.textColor+title+CLI_PRINT_COLOR.RESET;\n        /*\n        String title = this.title.length() &gt; max_chars ? this.title.substring(0,max_chars+1):this.title;\n        boolean left = true;\n        while(title.length() &lt; max_chars){\n            if (left){\n                title = \" \"+title;\n            } else {\n                title = title + \" \";\n            }\n        }\n        return this.textColor+title+CLI_PRINT_COLOR.RESET;*/\n    }\n\n    public int getTitleLength(){\n        return title.length();\n    }\n\n    public PrintableNodeInfo getLeftChildInfo(){\n        if (leftChild == null){\n            return null;\n        }\n        return leftChild._getPrintableNodeInfo();\n    }\n\n    public PrintableNodeInfo getRightChildInfo(){\n        if (rightChild == null){\n            return null;\n        }\n        return rightChild._getPrintableNodeInfo();\n    }\n}\n</code></pre>\n\n<p>NodePosition class</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class PrintableNodePosition implements Comparable&lt;PrintableNodePosition&gt; {\n    public final int row;\n    public final int column;\n    public final PrintableNodeInfo nodeInfo;\n    public PrintableNodePosition(PrintableNodeInfo nodeInfo, int row, int column){\n        this.row = row;\n        this.column = column;\n        this.nodeInfo = nodeInfo;\n    }\n\n    @Override\n    public int compareTo(PrintableNodePosition o) {\n        return Integer.compare(this.column,o.column);\n    }\n}\n</code></pre>\n\n<p>And, finally, Node Interface</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic interface PrintableNode {\n    PrintableNodeInfo _getPrintableNodeInfo();\n    PrintableNode _getLeftChild();\n    PrintableNode _getRightChild();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":323581,"reputation":1799,"user_id":643684,"accept_rate":67,"display_name":"Colin Woodbury"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475686193,"creation_date":1475686193,"answer_id":39879646,"question_id":4965335,"body_markdown":"A Scala solution, adapted from Vasya Novikov&#39;s answer and specialized for binary trees:\r\n\r\n    /** An immutable Binary Tree. */\r\n    case class BTree[T](value: T, left: Option[BTree[T]], right: Option[BTree[T]]) {\r\n    \r\n      /* Adapted from: http://stackoverflow.com/a/8948691/643684 */\r\n      def pretty: String = {\r\n        def work(tree: BTree[T], prefix: String, isTail: Boolean): String = {\r\n          val (line, bar) = if (isTail) (&quot; &quot;, &quot; &quot;) else (&quot; &quot;, &quot;&quot;)\r\n    \r\n          val curr = s&quot;${prefix}${line}${tree.value}&quot;\r\n    \r\n          val rights = tree.right match {\r\n            case None    =&gt; s&quot;${prefix}${bar}    &quot;\r\n            case Some(r) =&gt; work(r, s&quot;${prefix}${bar}   &quot;, false)\r\n          }\r\n    \r\n          val lefts = tree.left match {\r\n            case None    =&gt; s&quot;${prefix}${bar}    &quot;\r\n            case Some(l) =&gt; work(l, s&quot;${prefix}${bar}   &quot;, true)\r\n          }\r\n    \r\n          s&quot;${curr}\\n${rights}\\n${lefts}&quot;\r\n    \r\n        }\r\n    \r\n        work(this, &quot;&quot;, true)\r\n      }\r\n    }","title":"How to print binary tree diagram in Java?","body":"<p>A Scala solution, adapted from Vasya Novikov's answer and specialized for binary trees:</p>\n\n<pre><code>/** An immutable Binary Tree. */\ncase class BTree[T](value: T, left: Option[BTree[T]], right: Option[BTree[T]]) {\n\n  /* Adapted from: http://stackoverflow.com/a/8948691/643684 */\n  def pretty: String = {\n    def work(tree: BTree[T], prefix: String, isTail: Boolean): String = {\n      val (line, bar) = if (isTail) (\" \", \" \") else (\" \", \"\")\n\n      val curr = s\"${prefix}${line}${tree.value}\"\n\n      val rights = tree.right match {\n        case None    =&gt; s\"${prefix}${bar}    \"\n        case Some(r) =&gt; work(r, s\"${prefix}${bar}   \", false)\n      }\n\n      val lefts = tree.left match {\n        case None    =&gt; s\"${prefix}${bar}    \"\n        case Some(l) =&gt; work(l, s\"${prefix}${bar}   \", true)\n      }\n\n      s\"${curr}\\n${rights}\\n${lefts}\"\n\n    }\n\n    work(this, \"\", true)\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10328940,"reputation":307,"user_id":7619515,"display_name":"Nitin K"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1487975453,"creation_date":1487975453,"answer_id":42449385,"question_id":4965335,"body_markdown":"I found VasyaNovikov&#39;s answer very useful for printing a large general tree, and modified it for a binary tree\r\n\r\nCode:\r\n\r\n    class TreeNode {\r\n        Integer data = null;\r\n        TreeNode left = null;\r\n        TreeNode right = null;\r\n        \r\n        TreeNode(Integer data) {this.data = data;}\r\n        \r\n        public void print() {\r\n            print(&quot;&quot;, this, false);\r\n        }\r\n        \r\n        public void print(String prefix, TreeNode n, boolean isLeft) {\r\n            if (n != null) {\r\n                System.out.println (prefix + (isLeft ? &quot;|-- &quot; : &quot;\\\\-- &quot;) + n.data);\r\n                print(prefix + (isLeft ? &quot;|   &quot; : &quot;    &quot;), n.left, true);\r\n                print(prefix + (isLeft ? &quot;|   &quot; : &quot;    &quot;), n.right, false);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nSample output:\r\n\r\n    \\-- 7\r\n        |-- 3\r\n        |   |-- 1\r\n        |   |   \\-- 2\r\n        |   \\-- 5\r\n        |       |-- 4\r\n        |       \\-- 6\r\n        \\-- 11\r\n            |-- 9\r\n            |   |-- 8\r\n            |   \\-- 10\r\n            \\-- 13\r\n                |-- 12\r\n                \\-- 14","title":"How to print binary tree diagram in Java?","body":"<p>I found VasyaNovikov's answer very useful for printing a large general tree, and modified it for a binary tree</p>\n\n<p>Code:</p>\n\n<pre><code>class TreeNode {\n    Integer data = null;\n    TreeNode left = null;\n    TreeNode right = null;\n\n    TreeNode(Integer data) {this.data = data;}\n\n    public void print() {\n        print(\"\", this, false);\n    }\n\n    public void print(String prefix, TreeNode n, boolean isLeft) {\n        if (n != null) {\n            System.out.println (prefix + (isLeft ? \"|-- \" : \"\\\\-- \") + n.data);\n            print(prefix + (isLeft ? \"|   \" : \"    \"), n.left, true);\n            print(prefix + (isLeft ? \"|   \" : \"    \"), n.right, false);\n        }\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>\\-- 7\n    |-- 3\n    |   |-- 1\n    |   |   \\-- 2\n    |   \\-- 5\n    |       |-- 4\n    |       \\-- 6\n    \\-- 11\n        |-- 9\n        |   |-- 8\n        |   \\-- 10\n        \\-- 13\n            |-- 12\n            \\-- 14\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5862786,"reputation":1367,"user_id":4617883,"accept_rate":0,"display_name":"user4617883"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520931122,"creation_date":1520930355,"answer_id":49251599,"question_id":4965335,"body_markdown":"Here is another way to visualize your tree:  save the nodes as an xml file and then let your browser show you the hierarchy:\r\n\r\n    class treeNode{\r\n        int key;\r\n        treeNode left;\r\n        treeNode right;\r\n    \r\n        public treeNode(int key){\r\n            this.key = key;\r\n            left = right = null;\r\n        }\r\n    \r\n        public void printNode(StringBuilder output, String dir){\r\n            output.append(&quot;&lt;node key=&#39;&quot; + key + &quot;&#39; dir=&#39;&quot; + dir + &quot;&#39;&gt;&quot;);\r\n            if(left != null)\r\n                left.printNode(output, &quot;l&quot;);\r\n            if(right != null)\r\n                right.printNode(output, &quot;r&quot;);\r\n            output.append(&quot;&lt;/node&gt;&quot;);\r\n        }\r\n    }\r\n\r\n    class tree{\r\n        private treeNode treeRoot;\r\n    \r\n        public tree(int key){\r\n            treeRoot = new treeNode(key);\r\n        }\r\n    \r\n        public void insert(int key){\r\n            insert(treeRoot, key);\r\n        }\r\n    \r\n        private treeNode insert(treeNode root, int key){\r\n            if(root == null){\r\n                treeNode child = new treeNode(key);\r\n                return child;\r\n            }\r\n    \r\n            if(key &lt; root.key)\r\n                root.left = insert(root.left, key);\r\n            else if(key &gt; root.key)\r\n                root.right = insert(root.right, key);\r\n    \r\n            return root;\r\n        }\r\n    \r\n        public void saveTreeAsXml(){\r\n            StringBuilder strOutput = new StringBuilder();\r\n            strOutput.append(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;);\r\n            treeRoot.printNode(strOutput, &quot;root&quot;);\r\n            try {\r\n                PrintWriter writer = new PrintWriter(&quot;C:/tree.xml&quot;, &quot;UTF-8&quot;);\r\n                writer.write(strOutput.toString());\r\n                writer.close();\r\n            }\r\n            catch (FileNotFoundException e){\r\n    \r\n            }\r\n            catch(UnsupportedEncodingException e){\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nHere is code to test it:\r\n\r\n        tree t = new tree(1);\r\n        t.insert(10);\r\n        t.insert(5);\r\n        t.insert(4);\r\n        t.insert(20);\r\n        t.insert(40);\r\n        t.insert(30);\r\n        t.insert(80);\r\n        t.insert(60);\r\n        t.insert(50);\r\n\r\n        t.saveTreeAsXml();\r\n\r\nAnd the output looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nbG70.png","title":"How to print binary tree diagram in Java?","body":"<p>Here is another way to visualize your tree:  save the nodes as an xml file and then let your browser show you the hierarchy:</p>\n\n<pre><code>class treeNode{\n    int key;\n    treeNode left;\n    treeNode right;\n\n    public treeNode(int key){\n        this.key = key;\n        left = right = null;\n    }\n\n    public void printNode(StringBuilder output, String dir){\n        output.append(\"&lt;node key='\" + key + \"' dir='\" + dir + \"'&gt;\");\n        if(left != null)\n            left.printNode(output, \"l\");\n        if(right != null)\n            right.printNode(output, \"r\");\n        output.append(\"&lt;/node&gt;\");\n    }\n}\n\nclass tree{\n    private treeNode treeRoot;\n\n    public tree(int key){\n        treeRoot = new treeNode(key);\n    }\n\n    public void insert(int key){\n        insert(treeRoot, key);\n    }\n\n    private treeNode insert(treeNode root, int key){\n        if(root == null){\n            treeNode child = new treeNode(key);\n            return child;\n        }\n\n        if(key &lt; root.key)\n            root.left = insert(root.left, key);\n        else if(key &gt; root.key)\n            root.right = insert(root.right, key);\n\n        return root;\n    }\n\n    public void saveTreeAsXml(){\n        StringBuilder strOutput = new StringBuilder();\n        strOutput.append(\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\");\n        treeRoot.printNode(strOutput, \"root\");\n        try {\n            PrintWriter writer = new PrintWriter(\"C:/tree.xml\", \"UTF-8\");\n            writer.write(strOutput.toString());\n            writer.close();\n        }\n        catch (FileNotFoundException e){\n\n        }\n        catch(UnsupportedEncodingException e){\n\n        }\n    }\n}\n</code></pre>\n\n<p>Here is code to test it:</p>\n\n<pre><code>    tree t = new tree(1);\n    t.insert(10);\n    t.insert(5);\n    t.insert(4);\n    t.insert(20);\n    t.insert(40);\n    t.insert(30);\n    t.insert(80);\n    t.insert(60);\n    t.insert(50);\n\n    t.saveTreeAsXml();\n</code></pre>\n\n<p>And the output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nbG70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nbG70.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8114023,"reputation":1631,"user_id":6113110,"accept_rate":62,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1544454364,"creation_date":1544445708,"answer_id":53705889,"question_id":4965335,"body_markdown":"Based on VasyaNovikov answer. Improved with some Java magic: Generics and Functional interface.\r\n\r\n    /**\r\n\t * Print a tree structure in a pretty ASCII fromat.\r\n\t * @param prefix Currnet previx. Use &quot;&quot; in initial call!\r\n\t * @param node The current node. Pass the root node of your tree in initial call.\r\n\t * @param getChildrenFunc A {@link Function} that returns the children of a given node.\r\n\t * @param isTail Is node the last of its sibblings. Use true in initial call. (This is needed for pretty printing.)\r\n\t * @param &lt;T&gt; The type of your nodes. Anything that has a toString can be used.\r\n\t */\r\n\tprivate &lt;T&gt; void printTreeRec(String prefix, T node, Function&lt;T, List&lt;T&gt;&gt; getChildrenFunc, boolean isTail) {\r\n\t\tString nodeName = node.toString();\r\n\t\tString nodeConnection = isTail ? &quot; &quot; : &quot; &quot;;\r\n\t\tlog.debug(prefix + nodeConnection + nodeName);\r\n\t\tList&lt;T&gt; children = getChildrenFunc.apply(node);\r\n\t\tfor (int i = 0; i &lt; children.size(); i++) {\r\n\t\t\tString newPrefix = prefix + (isTail ? &quot;    &quot; : &quot;   &quot;);\r\n\t\t\tprintTreeRec(newPrefix, children.get(i), getChildrenFunc, i == children.size()-1);\r\n\t\t}\r\n\t}\r\n\r\nExample initial call:\r\n\r\n    Function&lt;ChecksumModel, List&lt;ChecksumModel&gt;&gt; getChildrenFunc = node -&gt; getChildrenOf(node)\r\n    printTreeRec(&quot;&quot;, rootNode, getChildrenFunc, true);\r\n\r\nWill output something like\r\n\r\n     rootNode\r\n         childNode1\r\n         childNode2\r\n            childNode2.1\r\n            childNode2.2\r\n            childNode2.3\r\n         childNode3\r\n         childNode4\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Based on VasyaNovikov answer. Improved with some Java magic: Generics and Functional interface.</p>\n\n<pre><code>/**\n * Print a tree structure in a pretty ASCII fromat.\n * @param prefix Currnet previx. Use \"\" in initial call!\n * @param node The current node. Pass the root node of your tree in initial call.\n * @param getChildrenFunc A {@link Function} that returns the children of a given node.\n * @param isTail Is node the last of its sibblings. Use true in initial call. (This is needed for pretty printing.)\n * @param &lt;T&gt; The type of your nodes. Anything that has a toString can be used.\n */\nprivate &lt;T&gt; void printTreeRec(String prefix, T node, Function&lt;T, List&lt;T&gt;&gt; getChildrenFunc, boolean isTail) {\n    String nodeName = node.toString();\n    String nodeConnection = isTail ? \" \" : \" \";\n    log.debug(prefix + nodeConnection + nodeName);\n    List&lt;T&gt; children = getChildrenFunc.apply(node);\n    for (int i = 0; i &lt; children.size(); i++) {\n        String newPrefix = prefix + (isTail ? \"    \" : \"   \");\n        printTreeRec(newPrefix, children.get(i), getChildrenFunc, i == children.size()-1);\n    }\n}\n</code></pre>\n\n<p>Example initial call:</p>\n\n<pre><code>Function&lt;ChecksumModel, List&lt;ChecksumModel&gt;&gt; getChildrenFunc = node -&gt; getChildrenOf(node)\nprintTreeRec(\"\", rootNode, getChildrenFunc, true);\n</code></pre>\n\n<p>Will output something like</p>\n\n<pre><code> rootNode\n     childNode1\n     childNode2\n        childNode2.1\n        childNode2.2\n        childNode2.3\n     childNode3\n     childNode4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1721101,"reputation":799,"user_id":1576929,"accept_rate":58,"display_name":"navderm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1552528735,"creation_date":1552528735,"answer_id":55153851,"question_id":4965335,"body_markdown":"This was the simplest solution for horizontal view. Tried with bunch of examples. Works well for my purpose. Updated from @nitin-k &#39;s answer.\r\n\r\n\r\n    \r\n    public void print(String prefix, BTNode n, boolean isLeft) {\r\n        if (n != null) {\r\n            print(prefix + &quot;     &quot;, n.right, false);\r\n            System.out.println (prefix + (&quot;|-- &quot;) + n.data);\r\n            print(prefix + &quot;     &quot;, n.left, true);\r\n        }\r\n    }\r\n\r\nCall:\r\n\r\n    bst.print(&quot;&quot;, bst.root, false);\r\n\r\n\r\nSolution:\r\n\r\n                             |-- 80\r\n                        |-- 70\r\n                   |-- 60\r\n              |-- 50\r\n         |-- 40\r\n    |-- 30\r\n         |-- 20\r\n              |-- 10\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>This was the simplest solution for horizontal view. Tried with bunch of examples. Works well for my purpose. Updated from @nitin-k 's answer.</p>\n\n<pre><code>public void print(String prefix, BTNode n, boolean isLeft) {\n    if (n != null) {\n        print(prefix + \"     \", n.right, false);\n        System.out.println (prefix + (\"|-- \") + n.data);\n        print(prefix + \"     \", n.left, true);\n    }\n}\n</code></pre>\n\n<p>Call:</p>\n\n<pre><code>bst.print(\"\", bst.root, false);\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>                         |-- 80\n                    |-- 70\n               |-- 60\n          |-- 50\n     |-- 40\n|-- 30\n     |-- 20\n          |-- 10\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10048577,"reputation":21,"user_id":7429075,"display_name":"satish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552683106,"creation_date":1552683106,"answer_id":55190522,"question_id":4965335,"body_markdown":"    using map...\r\n    {\r\n    Map&lt;Integer,String&gt; m = new LinkedHashMap&lt;&gt;();\r\n    \t\t\r\n    \t\t tn.printNodeWithLvl(node,l,m);\r\n    \t\t\r\n    \t\tfor(Entry&lt;Integer, String&gt; map :m.entrySet()) {\r\n    \t\t\tSystem.out.println(map.getValue());\r\n    \t\t}\r\n    then....method\r\n    \r\n    \r\n       private  void printNodeWithLvl(Node node,int l,Map&lt;Integer,String&gt; m) {\r\n    \t   if(node==null) {\r\n    \t\t   return;\r\n    \t   }\r\n    \t  if(m.containsKey(l)) {\r\n    \t\t  m.put(l, new StringBuilder(m.get(l)).append(node.value).toString());\r\n    \t  }else {\r\n    \t\t  m.put(l, node.value+&quot;&quot;);\r\n    \t  }\r\n    \t  l++;\r\n    \t  printNodeWithLvl( node.left,l,m);\r\n    \t  printNodeWithLvl(node.right,l,m);\r\n    \t\t\r\n    \t}\r\n    }","title":"How to print binary tree diagram in Java?","body":"<pre><code>using map...\n{\nMap&lt;Integer,String&gt; m = new LinkedHashMap&lt;&gt;();\n\n         tn.printNodeWithLvl(node,l,m);\n\n        for(Entry&lt;Integer, String&gt; map :m.entrySet()) {\n            System.out.println(map.getValue());\n        }\nthen....method\n\n\n   private  void printNodeWithLvl(Node node,int l,Map&lt;Integer,String&gt; m) {\n       if(node==null) {\n           return;\n       }\n      if(m.containsKey(l)) {\n          m.put(l, new StringBuilder(m.get(l)).append(node.value).toString());\n      }else {\n          m.put(l, node.value+\"\");\n      }\n      l++;\n      printNodeWithLvl( node.left,l,m);\n      printNodeWithLvl(node.right,l,m);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16567032,"reputation":785,"user_id":11971304,"display_name":"mahee96"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626990750,"creation_date":1626990750,"answer_id":68491892,"question_id":4965335,"body_markdown":"Horizontal representation is a little complex compared to vertical representation. Vertical printing is just plain RNL(Right-&gt;Node-&gt;left or mirror of inorder) traversal so that right subtree is printed first then left subtree.\r\n```python\r\ndef printFullTree(root, delim=&#39; &#39;, idnt=[], left=None):\r\n    if root:\r\n        idnt.append(delim)\r\n        x, y = setDelims(left)\r\n        printFullTree(root.right, x, idnt, False)\r\n        indent2(root.val, idnt)\r\n        printFullTree(root.left, y, idnt, True)\r\n        idnt.pop()\r\n\r\ndef setDelims(left):\r\n    x = &#39; &#39;; y=&#39;|&#39;\r\n    return (y,x) if (left == True) else (x,y) if (left == False) else (x,x)\r\n\r\ndef indent2(x, idnt, width=6):\r\n    for delim in idnt:\r\n        print(delim + &#39; &#39;*(width-1), end=&#39;&#39;)\r\n    print(&#39;|-&gt;&#39;, x)\r\n```\r\n\r\n```python\r\noutput:\r\n                        |-&gt; 15\r\n                  |-&gt; 14\r\n                  |     |-&gt; 13\r\n            |-&gt; 12\r\n            |     |     |-&gt; 11\r\n            |     |-&gt; 10\r\n            |           |-&gt; 9\r\n      |-&gt; 8\r\n            |           |-&gt; 7\r\n            |     |-&gt; 6\r\n            |     |     |-&gt; 4\r\n            |-&gt; 3\r\n                  |     |-&gt; 2\r\n                  |-&gt; 1\r\n                        |-&gt; 0\r\n```\r\nIn horizontal representation, the display is built by HashMap of TreeMap or `HashMap&lt;Integer, TreeMap&lt;Integer, Object&gt;&gt; xy;` where HashMap contains node&#39;s y-axis/level_no as Key and TreeMap as value. The Treemap interally holds all nodes in same level, sorted by their x axis value as key starting from leftmost -ve, root=0, rightmost=+ve.\r\n\r\nUsing HashMap makes algo work in O(1) lookup for each level and TreeMap for sorted order in O(logn) if self balancing tree/Treap is used.\r\n\r\nStill while doing so don&#39;t forget to store placeholders for null child such as &#39; &#39;/spaces so that the tree looks as intended.\r\n\r\nNow the only thing left is to calculate horizontal node distance, this can be done with some math calc,\r\n1. calc tree width and height.\r\n2. once done, when displaying the nodes, present them at a optimal distance based on calculated width, height, and skew info if any.","title":"How to print binary tree diagram in Java?","body":"<p>Horizontal representation is a little complex compared to vertical representation. Vertical printing is just plain RNL(Right-&gt;Node-&gt;left or mirror of inorder) traversal so that right subtree is printed first then left subtree.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def printFullTree(root, delim=' ', idnt=[], left=None):\n    if root:\n        idnt.append(delim)\n        x, y = setDelims(left)\n        printFullTree(root.right, x, idnt, False)\n        indent2(root.val, idnt)\n        printFullTree(root.left, y, idnt, True)\n        idnt.pop()\n\ndef setDelims(left):\n    x = ' '; y='|'\n    return (y,x) if (left == True) else (x,y) if (left == False) else (x,x)\n\ndef indent2(x, idnt, width=6):\n    for delim in idnt:\n        print(delim + ' '*(width-1), end='')\n    print('|-&gt;', x)\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>output:\n                        |-&gt; 15\n                  |-&gt; 14\n                  |     |-&gt; 13\n            |-&gt; 12\n            |     |     |-&gt; 11\n            |     |-&gt; 10\n            |           |-&gt; 9\n      |-&gt; 8\n            |           |-&gt; 7\n            |     |-&gt; 6\n            |     |     |-&gt; 4\n            |-&gt; 3\n                  |     |-&gt; 2\n                  |-&gt; 1\n                        |-&gt; 0\n</code></pre>\n<p>In horizontal representation, the display is built by HashMap of TreeMap or <code>HashMap&lt;Integer, TreeMap&lt;Integer, Object&gt;&gt; xy;</code> where HashMap contains node's y-axis/level_no as Key and TreeMap as value. The Treemap interally holds all nodes in same level, sorted by their x axis value as key starting from leftmost -ve, root=0, rightmost=+ve.</p>\n<p>Using HashMap makes algo work in O(1) lookup for each level and TreeMap for sorted order in O(logn) if self balancing tree/Treap is used.</p>\n<p>Still while doing so don't forget to store placeholders for null child such as ' '/spaces so that the tree looks as intended.</p>\n<p>Now the only thing left is to calculate horizontal node distance, this can be done with some math calc,</p>\n<ol>\n<li>calc tree width and height.</li>\n<li>once done, when displaying the nodes, present them at a optimal distance based on calculated width, height, and skew info if any.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19687420,"reputation":167,"user_id":14413096,"display_name":"Aharon Sambol"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652949212,"creation_date":1652949212,"answer_id":72301195,"question_id":4965335,"body_markdown":"https://github.com/AharonSambol/PrettyPrintTreeJava\r\n\r\nI know I&#39;m late.. But I made this solution which works not only for simple trees but also for more complex ones (such as multi-lined strings)\r\n\r\nExample output:\r\n\r\n[![example output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3246o.png\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p><a href=\"https://github.com/AharonSambol/PrettyPrintTreeJava\" rel=\"nofollow noreferrer\">https://github.com/AharonSambol/PrettyPrintTreeJava</a></p>\n<p>I know I'm late.. But I made this solution which works not only for simple trees but also for more complex ones (such as multi-lined strings)</p>\n<p>Example output:</p>\n<p><a href=\"https://i.stack.imgur.com/3246o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3246o.png\" alt=\"example output\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24794941,"reputation":1,"user_id":18677728,"display_name":"VWagen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661493770,"creation_date":1661492705,"answer_id":73496548,"question_id":4965335,"body_markdown":"Try this:\r\n\r\n    public static void print(int[] minHeap, int minWidth) {\r\n\r\n        int size = minHeap.length;\r\n\r\n        int level = log2(size);\r\n        int maxLength = (int) Math.pow(2, level) * minWidth;\r\n        int currentLevel = -1 ;\r\n        int width = maxLength;\r\n\r\n        for (int i = 0; i &lt; size; i++) {\r\n            if (log2(i + 1) &gt; currentLevel) {\r\n                currentLevel++;\r\n                System.out.println();\r\n                width = maxLength / (int) Math.pow(2, currentLevel);\r\n            }\r\n            System.out.print(StringUtils.center(String.valueOf(minHeap[i]), width));\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    private static int log2(int n) {\r\n        return (int) (Math.log(n) / Math.log(2));\r\n    }\r\n\r\nThe idea of this code snippet is dividing the maxLength which is the length of bottom line by the number of elements of each line to get the block width. Then put the element in the middle of each block.\r\n\r\nThe parameter minWidth implys the length of blocks in the bottom line.\r\n\r\n[A picture to illustrate the idea and show the result.][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZOryX.png","title":"How to print binary tree diagram in Java?","body":"<p>Try this:</p>\n<pre><code>public static void print(int[] minHeap, int minWidth) {\n\n    int size = minHeap.length;\n\n    int level = log2(size);\n    int maxLength = (int) Math.pow(2, level) * minWidth;\n    int currentLevel = -1 ;\n    int width = maxLength;\n\n    for (int i = 0; i &lt; size; i++) {\n        if (log2(i + 1) &gt; currentLevel) {\n            currentLevel++;\n            System.out.println();\n            width = maxLength / (int) Math.pow(2, currentLevel);\n        }\n        System.out.print(StringUtils.center(String.valueOf(minHeap[i]), width));\n    }\n    System.out.println();\n}\n\nprivate static int log2(int n) {\n    return (int) (Math.log(n) / Math.log(2));\n}\n</code></pre>\n<p>The idea of this code snippet is dividing the maxLength which is the length of bottom line by the number of elements of each line to get the block width. Then put the element in the middle of each block.</p>\n<p>The parameter minWidth implys the length of blocks in the bottom line.</p>\n<p><a href=\"https://i.stack.imgur.com/ZOryX.png\" rel=\"nofollow noreferrer\">A picture to illustrate the idea and show the result.</a></p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690290556,"creation_date":1690290556,"answer_id":76763055,"question_id":4965335,"body_markdown":"Here is a class (&#177; 60 lines) that can produce a string like this:\r\n\r\n```\r\n       330\r\n \r\n101          1738\r\n         \r\n  198      467  1922\r\n            \r\n154          648  1924\r\n     \r\n  155  621         1524\r\n             \r\n     576       987       1531\r\n               \r\n       617  703  1079  1527\r\n                 \r\n               1066\r\n```\r\n\r\nThe code assumes a `Node` class with `left`, `right` and `data` fields. If for instance you have a `Node root`, the below `TreeFormatter` can be used as follows:\r\n\r\n```\r\n    TreeFormatter formatter = new TreeFormatter();\r\n    System.out.println(formatter.topDown(root));\r\n```\r\n\r\nThe class itself:\r\n\r\n```\r\nclass TreeFormatter {\r\n    int padding = 2; // minimum number of horizontal spaces between two node data\r\n\r\n    private int indent(List&lt;String&gt; lines, int margin) {\r\n        // If negative, prefix all lines with spaces and return 0\r\n        if (margin &gt;= 0) return margin;\r\n        String spaces = &quot; &quot;.repeat(-margin);\r\n        int i = 0;\r\n        for (var line : lines) {\r\n            lines.set(i++, spaces + line);\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    private List&lt;String&gt; merge(List&lt;String&gt; left, List&lt;String&gt; right) {\r\n        // Merge two arrays, where the right strings are indented so there is no overlap\r\n        int minSize = Math.min(left.size(), right.size());\r\n        int offset = 0;\r\n        for (int i = 0; i &lt; minSize; i++) {\r\n            offset = Math.max(offset, left.get(i).length() + padding - right.get(i).replaceAll(&quot;\\\\S.*&quot;, &quot;&quot;).length());\r\n        }\r\n        indent(right, -indent(left, offset));\r\n        for (int i = 0; i &lt; minSize; i++) {\r\n            left.set(i, left.get(i) + right.get(i).substring(left.get(i).length()));\r\n        }\r\n        if (right.size() &gt; minSize) {\r\n            left.addAll(right.subList(minSize, right.size()));\r\n        }\r\n        return left;\r\n    }\r\n\r\n    private List&lt;String&gt; buildLines(Node node) {\r\n        if (node == null) return new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; lines = merge(buildLines(node.left), buildLines(node.right));\r\n        int half = String.valueOf(node.data).length() / 2;\r\n        int i = half;\r\n        if (lines.size() &gt; 0) {\r\n            String line;\r\n            i = lines.get(0).indexOf(&quot;*&quot;); // Find index of first subtree\r\n            if (node.right == null) {\r\n                line = &quot; &quot;.repeat(i) + &quot;&quot;;\r\n                i += 2;\r\n            } else if (node.left == null) {\r\n                line = &quot; &quot;.repeat(i = indent(lines, i - 2)) + &quot;&quot;;\r\n            } else {\r\n                int dist = lines.get(0).length() - 1 - i; // Find distance between subtree roots\r\n                line = String.format(&quot;%s%s%s&quot;, &quot; &quot;.repeat(i), &quot;&quot;.repeat(dist / 2 - 1), &quot;&quot;.repeat((dist - 1) / 2));\r\n                i += dist / 2;\r\n            }\r\n            lines.set(0, line);\r\n        }\r\n        lines.add(0, &quot; &quot;.repeat(indent(lines, i - half)) + node.data);\r\n        lines.add(0, &quot; &quot;.repeat(i + Math.max(0, half - i)) + &quot;*&quot;); // Add a marker for caller\r\n        return lines;\r\n    }\r\n    \r\n    public String topDown(Node root) {\r\n        List&lt;String&gt; lines = buildLines(root);\r\n        return String.join(&quot;\\n&quot;, lines.subList(1, lines.size()));\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Here is a class ( 60 lines) that can produce a string like this:</p>\n<pre><code>       330\n \n101          1738\n         \n  198      467  1922\n            \n154          648  1924\n     \n  155  621         1524\n             \n     576       987       1531\n               \n       617  703  1079  1527\n                 \n               1066\n</code></pre>\n<p>The code assumes a <code>Node</code> class with <code>left</code>, <code>right</code> and <code>data</code> fields. If for instance you have a <code>Node root</code>, the below <code>TreeFormatter</code> can be used as follows:</p>\n<pre><code>    TreeFormatter formatter = new TreeFormatter();\n    System.out.println(formatter.topDown(root));\n</code></pre>\n<p>The class itself:</p>\n<pre><code>class TreeFormatter {\n    int padding = 2; // minimum number of horizontal spaces between two node data\n\n    private int indent(List&lt;String&gt; lines, int margin) {\n        // If negative, prefix all lines with spaces and return 0\n        if (margin &gt;= 0) return margin;\n        String spaces = &quot; &quot;.repeat(-margin);\n        int i = 0;\n        for (var line : lines) {\n            lines.set(i++, spaces + line);\n        }\n        return 0;\n    }\n    \n    private List&lt;String&gt; merge(List&lt;String&gt; left, List&lt;String&gt; right) {\n        // Merge two arrays, where the right strings are indented so there is no overlap\n        int minSize = Math.min(left.size(), right.size());\n        int offset = 0;\n        for (int i = 0; i &lt; minSize; i++) {\n            offset = Math.max(offset, left.get(i).length() + padding - right.get(i).replaceAll(&quot;\\\\S.*&quot;, &quot;&quot;).length());\n        }\n        indent(right, -indent(left, offset));\n        for (int i = 0; i &lt; minSize; i++) {\n            left.set(i, left.get(i) + right.get(i).substring(left.get(i).length()));\n        }\n        if (right.size() &gt; minSize) {\n            left.addAll(right.subList(minSize, right.size()));\n        }\n        return left;\n    }\n\n    private List&lt;String&gt; buildLines(Node node) {\n        if (node == null) return new ArrayList&lt;&gt;();\n        List&lt;String&gt; lines = merge(buildLines(node.left), buildLines(node.right));\n        int half = String.valueOf(node.data).length() / 2;\n        int i = half;\n        if (lines.size() &gt; 0) {\n            String line;\n            i = lines.get(0).indexOf(&quot;*&quot;); // Find index of first subtree\n            if (node.right == null) {\n                line = &quot; &quot;.repeat(i) + &quot;&quot;;\n                i += 2;\n            } else if (node.left == null) {\n                line = &quot; &quot;.repeat(i = indent(lines, i - 2)) + &quot;&quot;;\n            } else {\n                int dist = lines.get(0).length() - 1 - i; // Find distance between subtree roots\n                line = String.format(&quot;%s%s%s&quot;, &quot; &quot;.repeat(i), &quot;&quot;.repeat(dist / 2 - 1), &quot;&quot;.repeat((dist - 1) / 2));\n                i += dist / 2;\n            }\n            lines.set(0, line);\n        }\n        lines.add(0, &quot; &quot;.repeat(indent(lines, i - half)) + node.data);\n        lines.add(0, &quot; &quot;.repeat(i + Math.max(0, half - i)) + &quot;*&quot;); // Add a marker for caller\n        return lines;\n    }\n    \n    public String topDown(Node root) {\n        List&lt;String&gt; lines = buildLines(root);\n        return String.join(&quot;\\n&quot;, lines.subList(1, lines.size()));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":225593,"reputation":2473,"user_id":486158,"accept_rate":75,"display_name":"Tian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306394,"favorite_count":0,"down_vote_count":0,"up_vote_count":216,"accepted_answer_id":4973083,"answer_count":23,"score":216,"last_activity_date":1690290556,"creation_date":1297394913,"question_id":4965335,"body_markdown":"How can I print a binary tree in Java so that the output is like:\r\n\r\n       4 \r\n      / \\ \r\n     2   5 \r\n\r\nMy node:\r\n\r\n    public class Node&lt;A extends Comparable&gt; {\r\n        Node&lt;A&gt; left, right;\r\n        A data;\r\n\t\r\n        public Node(A data){\r\n            this.data = data;\r\n        }\r\n    }\r\n","title":"How to print binary tree diagram in Java?","body":"<p>How can I print a binary tree in Java so that the output is like:</p>\n\n<pre><code>   4 \n  / \\ \n 2   5 \n</code></pre>\n\n<p>My node:</p>\n\n<pre><code>public class Node&lt;A extends Comparable&gt; {\n    Node&lt;A&gt; left, right;\n    A data;\n\n    public Node(A data){\n        this.data = data;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","apache-camel"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690290691,"post_id":76754641,"comment_id":135330377,"body_markdown":"Greetings ! i provided an answers please consider to upvote or accept it if it address the solution otherwise feel free to leave comment, here to help.","body":"Greetings ! i provided an answers please consider to upvote or accept it if it address the solution otherwise feel free to leave comment, here to help."}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290500,"creation_date":1690290500,"answer_id":76763038,"question_id":76754641,"body_markdown":"&gt; Apache camel component to consume messages from pravega ?`enter code here`\r\n\r\nYou can use the [Camel-Pravega][1] component, which provides a Camel endpoint for reading and writing data to Pravega streams,  you can do this in your Camel configuration file or in your Camel route definition.\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n    public class CamelRoute extends RouteBuilder {\r\n        \r\n        @Override\r\n        public void configure() throws Exception {\r\n            from(&quot;pravega://tcp://localhost:9090/scope-name/stream-name&quot;)\r\n                .process(e -&gt; {\r\n                    // Process the message\r\n                    ...\r\n                })\r\n                .to(&quot;log:my-logger&quot;);\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n\r\nThis route consumes messages from the `scope-name/stream-name` stream in the Pravega cluster using the Pravega endpoint then processes the message in the process block, and logs the message using the Camel log component.\r\nAfterward you can start the Camel context and it will automatically consume messages from the Pravega stream, some thinglike\r\n\r\n\r\n\r\n    CamelContext context = new DefaultCamelContext();\r\n    context.addRoutes(new CamelRoute());\r\n    context.start();\r\n    Thread.sleep(5);\r\n    context.stop();\r\n\r\nWhich we configured the lifetime to 5 second.\r\n\r\n  [1]: https://doc.akka.io/docs/alpakka/current/external/apache-camel.html\r\n  [2]: https://cncf.pravega.io/docs/latest/connectors/","title":"apache camel component to consume messages from pravega","body":"<blockquote>\n<p>Apache camel component to consume messages from pravega ?<code>enter code here</code></p>\n</blockquote>\n<p>You can use the <a href=\"https://doc.akka.io/docs/alpakka/current/external/apache-camel.html\" rel=\"nofollow noreferrer\">Camel-Pravega</a> component, which provides a Camel endpoint for reading and writing data to Pravega streams,  you can do this in your Camel configuration file or in your Camel route definition.</p>\n\n<pre><code>public class CamelRoute extends RouteBuilder {\n    \n    @Override\n    public void configure() throws Exception {\n        from(&quot;pravega://tcp://localhost:9090/scope-name/stream-name&quot;)\n            .process(e -&gt; {\n                // Process the message\n                ...\n            })\n            .to(&quot;log:my-logger&quot;);\n    }\n    \n    ...\n}\n</code></pre>\n<p>This route consumes messages from the <code>scope-name/stream-name</code> stream in the Pravega cluster using the Pravega endpoint then processes the message in the process block, and logs the message using the Camel log component.\nAfterward you can start the Camel context and it will automatically consume messages from the Pravega stream, some thinglike</p>\n<pre><code>CamelContext context = new DefaultCamelContext();\ncontext.addRoutes(new CamelRoute());\ncontext.start();\nThread.sleep(5);\ncontext.stop();\n</code></pre>\n<p>Which we configured the lifetime to 5 second.</p>\n"}],"owner":{"account_id":3145385,"reputation":883,"user_id":2659962,"display_name":"Akhilesh Pandey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690290500,"creation_date":1690202714,"question_id":76754641,"body_markdown":"is there an any Apache Camel component, similar to the Kafka component, that allows me to consume messages from [Pravega][1].\r\n\r\n\r\n  [1]: https://github.com/pravega/pravega\r\n\r\n","title":"apache camel component to consume messages from pravega","body":"<p>is there an any Apache Camel component, similar to the Kafka component, that allows me to consume messages from <a href=\"https://github.com/pravega/pravega\" rel=\"nofollow noreferrer\">Pravega</a>.</p>\n"},{"tags":["java","guice"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690269809,"post_id":76756163,"comment_id":135325827,"body_markdown":"I don&#39;t understand what you&#39;re trying to do. Are you instantiating your `oven` *inside* the Guice module? That&#39;s really bad. Instead, just make a (singleton) binding that provides the `oven`, then`@Inject` it where needed. Provider functions in modules are allowed to have parameters, which are injected as anything else would be. If you want to make this clearer, provide the real Module code instead of the pseudo-code you have now.","body":"I don&#39;t understand what you&#39;re trying to do. Are you instantiating your <code>oven</code> <i>inside</i> the Guice module? That&#39;s really bad. Instead, just make a (singleton) binding that provides the <code>oven</code>, then<code>@Inject</code> it where needed. Provider functions in modules are allowed to have parameters, which are injected as anything else would be. If you want to make this clearer, provide the real Module code instead of the pseudo-code you have now."},{"owner":{"account_id":669808,"reputation":3053,"user_id":508459,"accept_rate":69,"display_name":"eshalev"},"score":0,"creation_date":1690287533,"post_id":76756163,"comment_id":135329553,"body_markdown":"Thanks, I&#39;ve edited the example. The intent of the question is to avoid repeated `@Inject` parameters throughout my providers. The first example (my current code) injects an oven in each provider method. (My real code has more then 3 providers, and more then 2 parameters). The seconds psuedocode example is what I would like to have: I don&#39;t want to `@Inject` the oven 20 times all over my provider parameters. I would like to inject it once, and use it for all the providers in the module","body":"Thanks, I&#39;ve edited the example. The intent of the question is to avoid repeated <code>@Inject</code> parameters throughout my providers. The first example (my current code) injects an oven in each provider method. (My real code has more then 3 providers, and more then 2 parameters). The seconds psuedocode example is what I would like to have: I don&#39;t want to <code>@Inject</code> the oven 20 times all over my provider parameters. I would like to inject it once, and use it for all the providers in the module"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690288184,"post_id":76756163,"comment_id":135329710,"body_markdown":"I don&#39;t think you can do that. You are trying to mix setup (modules &amp; provider functions) with runtime (actual injected values), which is always a bad idea.","body":"I don&#39;t think you can do that. You are trying to mix setup (modules &amp; provider functions) with runtime (actual injected values), which is always a bad idea."}],"owner":{"account_id":669808,"reputation":3053,"user_id":508459,"accept_rate":69,"display_name":"eshalev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690290461,"creation_date":1690214048,"question_id":76756163,"body_markdown":"I am using Guice in java.\r\nFor some modules I have noticed that I have parameters which are repeated in every provider in my module. This can become very verbose if I have several of them per provider function.\r\n\r\nI am looking for a pattern where I can pass a shared dependency once into the module.\r\n\r\n```\r\nPizzasModule{\r\n  @Provides provideMushroomPizza ( oven ,mushrooms)  {oven.bakePizza(mushrooms)}\r\n  @Provides provideMOlivePizza   ( oven ,olives)     {oven.bakePizza(olives)}\r\n  @Provides provideMTomatoPizza  ( oven ,tomatoes)   {oven.bakePizza(tomatoes)}\r\n\r\n}\r\n```\r\nEvery pizza needs to be baked in the oven.\r\nI would like to provide it once for the module.\r\n**How do I inject `oven` in to the code below without repeating it?**\r\n\r\n```\r\nPizzasModule{\r\n  \r\n  Oven oven; //How do I get this injected into module only once? (as opposed to the example in the previous block)\r\n\r\n  bakePizzaInOven(topping) {oven.bakePizza(topping)}\r\n\r\n  @Provides provideMushroomPizza (mushrooms)  {bakePizzaInOven(mushrooms)}\r\n  @Provides provideMOlivePizza   (olives)     {bakePizzaInOven(olives)}\r\n  @Provides provideMTomatoPizza  (tomatoes)   {bakePizzaInOven(tomatoes)}\r\n\r\n}\r\n```\r\n\r\nI only want to specify `oven` once in my provider (the oven is not mine, and I only get it once I start injecting [I cannot pass it in the module constructor] ).\r\n\r\nI can probably add a helper provider, which will provide a `pizzeria` with an oven bound to it, and a `pizzeria.bakePizzaInOven(topping)` method. But I am wondering if GUICE has a built in pattern to save me the trouble? (Also my &quot;real code&quot; has more then just one shared parameter)","title":"Shared injections in Guice","body":"<p>I am using Guice in java.\nFor some modules I have noticed that I have parameters which are repeated in every provider in my module. This can become very verbose if I have several of them per provider function.</p>\n<p>I am looking for a pattern where I can pass a shared dependency once into the module.</p>\n<pre><code>PizzasModule{\n  @Provides provideMushroomPizza ( oven ,mushrooms)  {oven.bakePizza(mushrooms)}\n  @Provides provideMOlivePizza   ( oven ,olives)     {oven.bakePizza(olives)}\n  @Provides provideMTomatoPizza  ( oven ,tomatoes)   {oven.bakePizza(tomatoes)}\n\n}\n</code></pre>\n<p>Every pizza needs to be baked in the oven.\nI would like to provide it once for the module.\n<strong>How do I inject <code>oven</code> in to the code below without repeating it?</strong></p>\n<pre><code>PizzasModule{\n  \n  Oven oven; //How do I get this injected into module only once? (as opposed to the example in the previous block)\n\n  bakePizzaInOven(topping) {oven.bakePizza(topping)}\n\n  @Provides provideMushroomPizza (mushrooms)  {bakePizzaInOven(mushrooms)}\n  @Provides provideMOlivePizza   (olives)     {bakePizzaInOven(olives)}\n  @Provides provideMTomatoPizza  (tomatoes)   {bakePizzaInOven(tomatoes)}\n\n}\n</code></pre>\n<p>I only want to specify <code>oven</code> once in my provider (the oven is not mine, and I only get it once I start injecting [I cannot pass it in the module constructor] ).</p>\n<p>I can probably add a helper provider, which will provide a <code>pizzeria</code> with an oven bound to it, and a <code>pizzeria.bakePizzaInOven(topping)</code> method. But I am wondering if GUICE has a built in pattern to save me the trouble? (Also my &quot;real code&quot; has more then just one shared parameter)</p>\n"},{"tags":["java","spring-boot","websphere","cxf","cxf-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688678606,"post_id":76628984,"comment_id":135110107,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":9651072,"reputation":1933,"user_id":7162232,"display_name":"Jarid"},"score":1,"creation_date":1688734558,"post_id":76628984,"comment_id":135117399,"body_markdown":"The ClassCastException message appears to indicate that you&#39;ve got a mix of objects from Axis2 (the server&#39;s built-in web services provider) and CXF. Are you intending to use CXF only for web services, or are you relying on the server&#39;s implementation at all? Bringing your own web services implementation requires some additional configuration steps.","body":"The ClassCastException message appears to indicate that you&#39;ve got a mix of objects from Axis2 (the server&#39;s built-in web services provider) and CXF. Are you intending to use CXF only for web services, or are you relying on the server&#39;s implementation at all? Bringing your own web services implementation requires some additional configuration steps."}],"owner":{"account_id":14237337,"reputation":1,"user_id":10284793,"display_name":"El Mehdi Es-safi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690290449,"creation_date":1688647549,"question_id":76628984,"body_markdown":"Hello I deploy spring boot app v1.5.22.RELEASE on Websphere 8.5.5.20 =&gt; OK\r\n\r\nI use java version 1.8 and cxf-rt-transports-http and cxf-rt-frontend-jaxws v3.5.5 \r\n\r\nThe problem is when i try to call the api I get this error : \r\n\r\n```json\r\n{\r\n    &quot;timestamp&quot;: 1688630892602,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;exception&quot;: &quot;java.lang.ClassCastException&quot;,\r\n    &quot;message&quot;: &quot;org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler incompatible with org.apache.cxf.frontend.ClientProxy&quot;,\r\n    &quot;path&quot;: &quot;/Api/test1&quot;\r\n}\r\n```\r\n\r\nPlease I need help after the good deployment of my application on WebSphere I try to make a call it doesn&#39;t work I get error 500 is someone else had this the same problem?\r\n\r\nI have already used the class loader parent first on WebSphere it does not work","title":"Deploy Springboot 1.5.22.RELEASE on Websphere 8.5.5.20","body":"<p>Hello I deploy spring boot app v1.5.22.RELEASE on Websphere 8.5.5.20 =&gt; OK</p>\n<p>I use java version 1.8 and cxf-rt-transports-http and cxf-rt-frontend-jaxws v3.5.5</p>\n<p>The problem is when i try to call the api I get this error :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;timestamp&quot;: 1688630892602,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;exception&quot;: &quot;java.lang.ClassCastException&quot;,\n    &quot;message&quot;: &quot;org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler incompatible with org.apache.cxf.frontend.ClientProxy&quot;,\n    &quot;path&quot;: &quot;/Api/test1&quot;\n}\n</code></pre>\n<p>Please I need help after the good deployment of my application on WebSphere I try to make a call it doesn't work I get error 500 is someone else had this the same problem?</p>\n<p>I have already used the class loader parent first on WebSphere it does not work</p>\n"},{"tags":["java","testing","junit","mockito","stubbing"],"comments":[{"owner":{"account_id":1642932,"reputation":1379,"user_id":1515042,"accept_rate":54,"display_name":"Nadir"},"score":6,"creation_date":1444825418,"post_id":33124153,"comment_id":54062755,"body_markdown":"the object in when() must be a mock created by Mockito.mock(), it does not work for manually created real objects - not sure if that&#39;s your issue, since I&#39;m not really getting where your problem is...","body":"the object in when() must be a mock created by Mockito.mock(), it does not work for manually created real objects - not sure if that&#39;s your issue, since I&#39;m not really getting where your problem is..."},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1444825614,"post_id":33124153,"comment_id":54062906,"body_markdown":"It sounds like `classIwantToTest.object.get()` result is not a mock, or that `get()` is returning null. But please post your code, showing your test, and initialization of your mocks.","body":"It sounds like <code>classIwantToTest.object.get()</code> result is not a mock, or that <code>get()</code> is returning null. But please post your code, showing your test, and initialization of your mocks."},{"owner":{"account_id":7078298,"reputation":3226,"user_id":5417542,"accept_rate":36,"display_name":"user5417542"},"score":0,"creation_date":1444827611,"post_id":33124153,"comment_id":54064272,"body_markdown":"Added some code. Needed to change the variable-names, since it&#39;s from my company ;).","body":"Added some code. Needed to change the variable-names, since it&#39;s from my company ;)."},{"owner":{"account_id":329906,"reputation":12891,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":1,"creation_date":1600279451,"post_id":33124153,"comment_id":113040731,"body_markdown":"Help for visitors to this question: Make sure you haven&#39;t accidentally got `final` in your method signature. That&#39;s another hard to track down route cause of an NPE here","body":"Help for visitors to this question: Make sure you haven&#39;t accidentally got <code>final</code> in your method signature. That&#39;s another hard to track down route cause of an NPE here"},{"owner":{"account_id":170035,"reputation":6390,"user_id":396483,"accept_rate":68,"display_name":"john k"},"score":0,"creation_date":1627316863,"post_id":33124153,"comment_id":121118369,"body_markdown":"please create a minimal example\nhttps://stackoverflow.com/help/minimal-reproducible-example","body":"please create a minimal example <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"answers":[{"tags":[],"owner":{"account_id":2385189,"reputation":1502,"user_id":2086307,"display_name":"ahu"},"down_vote_count":1,"up_vote_count":90,"is_accepted":true,"score":89,"last_activity_date":1503480196,"creation_date":1445261040,"answer_id":33215620,"question_id":33124153,"body_markdown":"The default return value of methods you haven&#39;t stubbed yet is `false` for boolean methods, an empty collection or map for methods returning collections or maps and `null` otherwise.\r\n\r\nThis also applies to method calls within `when(...)`. In you&#39;re example `when(myService.getListWithData(inputData).get())` will cause a NullPointerException because `myService.getListWithData(inputData)` is `null` - it has not been stubbed before.\r\n\r\nOne option is create mocks for all intermediate return values and stub them before use. For example:\r\n   \r\n    ListWithData listWithData = mock(ListWithData.class);\r\n    when(listWithData.get()).thenReturn(item1);\r\n    when(myService.getListWithData()).thenReturn(listWithData);\r\n\r\nOr alternatively, you can specify a different default answer when creating a mock, to make methods return a new mock instead of null: `RETURNS_DEEP_STUBS`\r\n\r\n    SomeService myService = mock(SomeService.class, Mockito.RETURNS_DEEP_STUBS);\r\n    when(myService.getListWithData().get()).thenReturn(item1);\r\n\r\nYou should read the Javadoc of [Mockito.RETURNS_DEEP_STUBS][1] which explains this in more detail and also has some warnings about its usage.\r\n\r\nI hope this helps. Just note that your example code seems to have more issues, such as missing assert or verify statements and calling setters on mocks (which does not have any effect).\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.2.9/org/mockito/Answers.html#RETURNS_DEEP_STUBS","title":"Mockito - NullpointerException when stubbing Method","body":"<p>The default return value of methods you haven't stubbed yet is <code>false</code> for boolean methods, an empty collection or map for methods returning collections or maps and <code>null</code> otherwise.</p>\n\n<p>This also applies to method calls within <code>when(...)</code>. In you're example <code>when(myService.getListWithData(inputData).get())</code> will cause a NullPointerException because <code>myService.getListWithData(inputData)</code> is <code>null</code> - it has not been stubbed before.</p>\n\n<p>One option is create mocks for all intermediate return values and stub them before use. For example:</p>\n\n<pre><code>ListWithData listWithData = mock(ListWithData.class);\nwhen(listWithData.get()).thenReturn(item1);\nwhen(myService.getListWithData()).thenReturn(listWithData);\n</code></pre>\n\n<p>Or alternatively, you can specify a different default answer when creating a mock, to make methods return a new mock instead of null: <code>RETURNS_DEEP_STUBS</code></p>\n\n<pre><code>SomeService myService = mock(SomeService.class, Mockito.RETURNS_DEEP_STUBS);\nwhen(myService.getListWithData().get()).thenReturn(item1);\n</code></pre>\n\n<p>You should read the Javadoc of <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.9/org/mockito/Answers.html#RETURNS_DEEP_STUBS\" rel=\"noreferrer\">Mockito.RETURNS_DEEP_STUBS</a> which explains this in more detail and also has some warnings about its usage.</p>\n\n<p>I hope this helps. Just note that your example code seems to have more issues, such as missing assert or verify statements and calling setters on mocks (which does not have any effect).</p>\n"},{"tags":[],"owner":{"account_id":476940,"reputation":871,"user_id":5524683,"display_name":"Ed Webb"},"down_vote_count":2,"up_vote_count":87,"is_accepted":false,"score":85,"last_activity_date":1481821244,"creation_date":1481821244,"answer_id":41169554,"question_id":33124153,"body_markdown":"I had the same problem and my issue was simply that I had not annotated the class properly using @RunWith. In your example, make sure that you have:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class Test {\r\n    ...\r\n\r\nOnce I did that, the NullPointerExceptions disappeared.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I had the same problem and my issue was simply that I had not annotated the class properly using @RunWith. In your example, make sure that you have:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class Test {\n...\n</code></pre>\n\n<p>Once I did that, the NullPointerExceptions disappeared.</p>\n"},{"tags":[],"owner":{"account_id":228932,"reputation":23614,"user_id":491553,"accept_rate":45,"display_name":"Ryan Shillington"},"down_vote_count":0,"up_vote_count":361,"is_accepted":false,"score":361,"last_activity_date":1549272810,"creation_date":1493760458,"answer_id":43747523,"question_id":33124153,"body_markdown":"I had this issue and my problem was that I was calling my method with `any()` instead of `anyInt()`.  So I had:\r\n\r\n    doAnswer(...).with(myMockObject).thisFuncTakesAnInt(any())\r\n\r\nand I had to change it to:\r\n\r\n    doAnswer(...).with(myMockObject).thisFuncTakesAnInt(anyInt())\r\n\r\nI have no idea why that produced a NullPointerException.  Maybe this will help the next poor soul.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I had this issue and my problem was that I was calling my method with <code>any()</code> instead of <code>anyInt()</code>.  So I had:</p>\n\n<pre><code>doAnswer(...).with(myMockObject).thisFuncTakesAnInt(any())\n</code></pre>\n\n<p>and I had to change it to:</p>\n\n<pre><code>doAnswer(...).with(myMockObject).thisFuncTakesAnInt(anyInt())\n</code></pre>\n\n<p>I have no idea why that produced a NullPointerException.  Maybe this will help the next poor soul.</p>\n"},{"tags":[],"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1549272839,"creation_date":1509457851,"answer_id":47037078,"question_id":33124153,"body_markdown":"    \r\n    @RunWith(MockitoJUnitRunner.class) //(OR) PowerMockRunner.class\r\n\r\n    @PrepareForTest({UpdateUtil.class,Log.class,SharedPreferences.class,SharedPreferences.Editor.class})\r\n    public class InstallationTest extends TestCase{\r\n\r\n    @Mock\r\n    Context mockContext;\r\n    @Mock\r\n    SharedPreferences mSharedPreferences;\r\n    @Mock\r\n    SharedPreferences.Editor mSharedPreferenceEdtor;\r\n\r\n    @Before\r\n    public void setUp() throws Exception\r\n    {\r\n    //        mockContext = Mockito.mock(Context.class);\r\n    //        mSharedPreferences = Mockito.mock(SharedPreferences.class);\r\n    //        mSharedPreferenceEdtor = Mockito.mock(SharedPreferences.Editor.class);\r\n        when(mockContext.getSharedPreferences(Mockito.anyString(),Mockito.anyInt())).thenReturn(mSharedPreferences);\r\n        when(mSharedPreferences.edit()).thenReturn(mSharedPreferenceEdtor);\r\n        when(mSharedPreferenceEdtor.remove(Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\r\n        when(mSharedPreferenceEdtor.putString(Mockito.anyString(),Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\r\n    }\r\n\r\n    @Test\r\n    public void deletePreferencesTest() throws Exception {\r\n\r\n     }\r\n    }\r\n\r\nAll the above commented codes are not required \r\n{ `mockContext = Mockito.mock(Context.class);` },\r\nif you use **@Mock** Annotation to `Context mockContext;` \r\n\r\n    @Mock \r\n    Context mockContext; \r\n\r\nBut it will work if you use **@RunWith(MockitoJUnitRunner.class)** only. As per Mockito you can create mock object by either using *@Mock or Mockito.mock(Context.class);* ,\r\n\r\nI got NullpointerException because of using @RunWith(PowerMockRunner.class), instead of that I changed to @RunWith(MockitoJUnitRunner.class) it works fine","title":"Mockito - NullpointerException when stubbing Method","body":"<pre><code>@RunWith(MockitoJUnitRunner.class) //(OR) PowerMockRunner.class\n\n@PrepareForTest({UpdateUtil.class,Log.class,SharedPreferences.class,SharedPreferences.Editor.class})\npublic class InstallationTest extends TestCase{\n\n@Mock\nContext mockContext;\n@Mock\nSharedPreferences mSharedPreferences;\n@Mock\nSharedPreferences.Editor mSharedPreferenceEdtor;\n\n@Before\npublic void setUp() throws Exception\n{\n//        mockContext = Mockito.mock(Context.class);\n//        mSharedPreferences = Mockito.mock(SharedPreferences.class);\n//        mSharedPreferenceEdtor = Mockito.mock(SharedPreferences.Editor.class);\n    when(mockContext.getSharedPreferences(Mockito.anyString(),Mockito.anyInt())).thenReturn(mSharedPreferences);\n    when(mSharedPreferences.edit()).thenReturn(mSharedPreferenceEdtor);\n    when(mSharedPreferenceEdtor.remove(Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\n    when(mSharedPreferenceEdtor.putString(Mockito.anyString(),Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\n}\n\n@Test\npublic void deletePreferencesTest() throws Exception {\n\n }\n}\n</code></pre>\n\n<p>All the above commented codes are not required \n{ <code>mockContext = Mockito.mock(Context.class);</code> },\nif you use <strong>@Mock</strong> Annotation to <code>Context mockContext;</code> </p>\n\n<pre><code>@Mock \nContext mockContext; \n</code></pre>\n\n<p>But it will work if you use <strong>@RunWith(MockitoJUnitRunner.class)</strong> only. As per Mockito you can create mock object by either using <em>@Mock or Mockito.mock(Context.class);</em> ,</p>\n\n<p>I got NullpointerException because of using @RunWith(PowerMockRunner.class), instead of that I changed to @RunWith(MockitoJUnitRunner.class) it works fine</p>\n"},{"tags":[],"owner":{"account_id":2279339,"reputation":5596,"user_id":2004857,"accept_rate":43,"display_name":"Victor Basso"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1519035474,"creation_date":1518775341,"answer_id":48824254,"question_id":33124153,"body_markdown":"**Corner case:**  \r\nIf you&#39;re using **Scala** and you try to create an `any` matcher on a **value class**, you&#39;ll get an unhelpful NPE.\r\n\r\nSo given `case class ValueClass(value: Int) extends AnyVal`, what you want to do is `ValueClass(anyInt)` instead of `any[ValueClass]` \r\n\r\n    when(mock.someMethod(ValueClass(anyInt))).thenAnswer {\r\n       ...\r\n       val v  = ValueClass(invocation.getArguments()(0).asInstanceOf[Int])\r\n       ...\r\n    }\r\n\r\nThis other [SO question][1] is more specifically about that, but you&#39;d miss it when you don&#39;t know the issue is with value classes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/27289757/mockito-matchers-scala-value-class-and-nullpointerexception","title":"Mockito - NullpointerException when stubbing Method","body":"<p><strong>Corner case:</strong><br>\nIf you're using <strong>Scala</strong> and you try to create an <code>any</code> matcher on a <strong>value class</strong>, you'll get an unhelpful NPE.</p>\n\n<p>So given <code>case class ValueClass(value: Int) extends AnyVal</code>, what you want to do is <code>ValueClass(anyInt)</code> instead of <code>any[ValueClass]</code> </p>\n\n<pre><code>when(mock.someMethod(ValueClass(anyInt))).thenAnswer {\n   ...\n   val v  = ValueClass(invocation.getArguments()(0).asInstanceOf[Int])\n   ...\n}\n</code></pre>\n\n<p>This other <a href=\"https://stackoverflow.com/questions/27289757/mockito-matchers-scala-value-class-and-nullpointerexception\">SO question</a> is more specifically about that, but you'd miss it when you don't know the issue is with value classes.</p>\n"},{"tags":[],"owner":{"account_id":2389551,"reputation":40441,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1549272756,"creation_date":1522770823,"answer_id":49634323,"question_id":33124153,"body_markdown":"For me the reason I was getting NPE is that I was using `Mockito.any()` when mocking primitives. I found that by switching to using the correct variant from mockito gets rid of the errors.\r\n\r\nFor example, to mock a function that takes a primitive `long` as parameter, instead of using `any()`, you should be more specific and replace that with `any(Long.class)` or `Mockito.anyLong()`.\r\n\r\nHope that helps someone.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For me the reason I was getting NPE is that I was using <code>Mockito.any()</code> when mocking primitives. I found that by switching to using the correct variant from mockito gets rid of the errors.</p>\n\n<p>For example, to mock a function that takes a primitive <code>long</code> as parameter, instead of using <code>any()</code>, you should be more specific and replace that with <code>any(Long.class)</code> or <code>Mockito.anyLong()</code>.</p>\n\n<p>Hope that helps someone.</p>\n"},{"tags":[],"owner":{"account_id":4117933,"reputation":5487,"user_id":3379058,"accept_rate":45,"display_name":"Tal Joffe"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1566370853,"creation_date":1530638986,"answer_id":51160104,"question_id":33124153,"body_markdown":"For future readers, another cause for NPE when using mocks is forgetting to initialize the mocks like so:\r\n\r\n    @Mock\r\n    SomeMock someMock;\r\n   \r\n    @InjectMocks\r\n    SomeService someService;\r\n\r\n    @Before\r\n    public void setup(){\r\n        MockitoAnnotations.initMocks(this); //without this you will get NPE\r\n    }\r\n    \r\n    @Test\r\n    public void someTest(){\r\n        Mockito.when(someMock.someMethod()).thenReturn(&quot;some result&quot;);\r\n       // ...\r\n    }\r\n\r\nAlso make sure you are using JUnit for all annotations.\r\nI once accidently created a test with @Test from testNG so the @Before didn&#39;t work with it (in testNG the annotation is @BeforeTest)","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For future readers, another cause for NPE when using mocks is forgetting to initialize the mocks like so:</p>\n\n<pre><code>@Mock\nSomeMock someMock;\n\n@InjectMocks\nSomeService someService;\n\n@Before\npublic void setup(){\n    MockitoAnnotations.initMocks(this); //without this you will get NPE\n}\n\n@Test\npublic void someTest(){\n    Mockito.when(someMock.someMethod()).thenReturn(\"some result\");\n   // ...\n}\n</code></pre>\n\n<p>Also make sure you are using JUnit for all annotations.\nI once accidently created a test with @Test from testNG so the @Before didn't work with it (in testNG the annotation is @BeforeTest)</p>\n"},{"tags":[],"owner":{"account_id":2367760,"reputation":2249,"user_id":2073130,"accept_rate":80,"display_name":"lcn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532489727,"creation_date":1532489727,"answer_id":51510424,"question_id":33124153,"body_markdown":"Ed Webb&#39;s [answer][1] helped in my case. And instead, you can also try add \r\n\r\n      @Rule public Mocks mocks = new Mocks(this);\r\n\r\nif you `@RunWith(JUnit4.class)`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/41169554/2073130","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Ed Webb's <a href=\"https://stackoverflow.com/a/41169554/2073130\">answer</a> helped in my case. And instead, you can also try add </p>\n\n<pre><code>  @Rule public Mocks mocks = new Mocks(this);\n</code></pre>\n\n<p>if you <code>@RunWith(JUnit4.class)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1218420,"reputation":2261,"user_id":1185555,"accept_rate":44,"display_name":"Serhii Bohutskyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538142667,"creation_date":1538142667,"answer_id":52556863,"question_id":33124153,"body_markdown":"In my case, I missed add first \r\n\r\n    PowerMockito.spy(ClassWhichNeedToBeStaticMocked.class);\r\n\r\nso this can be helpful to somebody who see such error\r\n\r\n    java.lang.NullPointerException\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.addAnswersForStubbing(PowerMockitoStubberImpl.java:67)\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:42)\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:112)\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, I missed add first </p>\n\n<pre><code>PowerMockito.spy(ClassWhichNeedToBeStaticMocked.class);\n</code></pre>\n\n<p>so this can be helpful to somebody who see such error</p>\n\n<pre><code>java.lang.NullPointerException\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.addAnswersForStubbing(PowerMockitoStubberImpl.java:67)\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:42)\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:112)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1288279,"reputation":1763,"user_id":1240899,"accept_rate":68,"display_name":"mindreader"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546630937,"creation_date":1546630937,"answer_id":54045078,"question_id":33124153,"body_markdown":"None of these answers worked for me. This answer doesn&#39;t solve OP&#39;s issue but since this post is the only one that shows up on googling this issue, I&#39;m sharing my answer here.\r\n\r\nI came across this issue while writing unit tests for Android. The issue was that the activity that I was testing extended `AppCompatActivity` instead of `Activity`. To fix this, I was able to just replace `AppCompatActivity` with `Activity` since I didn&#39;t really need it. This might not be a viable solution for everyone, but hopefully knowing the root cause will help someone. ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>None of these answers worked for me. This answer doesn't solve OP's issue but since this post is the only one that shows up on googling this issue, I'm sharing my answer here.</p>\n\n<p>I came across this issue while writing unit tests for Android. The issue was that the activity that I was testing extended <code>AppCompatActivity</code> instead of <code>Activity</code>. To fix this, I was able to just replace <code>AppCompatActivity</code> with <code>Activity</code> since I didn't really need it. This might not be a viable solution for everyone, but hopefully knowing the root cause will help someone. </p>\n"},{"tags":[],"owner":{"account_id":1088874,"reputation":61123,"user_id":1083957,"accept_rate":93,"display_name":"azizbekian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559723503,"creation_date":1559723503,"answer_id":56456834,"question_id":33124153,"body_markdown":"None of the above answers helped me. I was struggling to understand why code works in Java but **not** in Kotlin.\r\n\r\nThen I figured it out from [this thread][1].\r\n\r\nYou have to make class and member functions `open`, otherwise NPE was being thrown.\r\n\r\nAfter making function `open` tests started to pass.\r\n\r\nYou might as well consider using compiler&#39;s [&quot;all-open&quot; plugin][2]:\r\n\r\n&gt; Kotlin has classes and their members ***final by default***, which makes it inconvenient to use frameworks and libraries such as Spring AOP that require classes to be **open**. The `all-open` compiler plugin adapts Kotlin to the requirements of those frameworks and **makes classes annotated with a specific annotation and their members open** without the explicit open keyword.\r\n\r\n\r\n  [1]: https://github.com/nhaarman/mockito-kotlin/issues/255#issuecomment-395099869\r\n  [2]: https://kotlinlang.org/docs/reference/compiler-plugins.html","title":"Mockito - NullpointerException when stubbing Method","body":"<p>None of the above answers helped me. I was struggling to understand why code works in Java but <strong>not</strong> in Kotlin.</p>\n\n<p>Then I figured it out from <a href=\"https://github.com/nhaarman/mockito-kotlin/issues/255#issuecomment-395099869\" rel=\"nofollow noreferrer\">this thread</a>.</p>\n\n<p>You have to make class and member functions <code>open</code>, otherwise NPE was being thrown.</p>\n\n<p>After making function <code>open</code> tests started to pass.</p>\n\n<p>You might as well consider using compiler's <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">\"all-open\" plugin</a>:</p>\n\n<blockquote>\n  <p>Kotlin has classes and their members <strong><em>final by default</em></strong>, which makes it inconvenient to use frameworks and libraries such as Spring AOP that require classes to be <strong>open</strong>. The <code>all-open</code> compiler plugin adapts Kotlin to the requirements of those frameworks and <strong>makes classes annotated with a specific annotation and their members open</strong> without the explicit open keyword.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6180392,"reputation":1028,"user_id":4816080,"accept_rate":100,"display_name":""},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565192857,"creation_date":1565192857,"answer_id":57398128,"question_id":33124153,"body_markdown":"you need to initialize MockitoAnnotations.initMocks(this) method has to called to initialize annotated fields.\r\n\r\n       @Before public void initMocks() {\r\n           MockitoAnnotations.initMocks(this);\r\n       }\r\n\r\nfor more details see [Doc][1]\r\n\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.2.28/org/mockito/MockitoAnnotations.html","title":"Mockito - NullpointerException when stubbing Method","body":"<p>you need to initialize MockitoAnnotations.initMocks(this) method has to called to initialize annotated fields.</p>\n\n<pre><code>   @Before public void initMocks() {\n       MockitoAnnotations.initMocks(this);\n   }\n</code></pre>\n\n<p>for more details see <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.28/org/mockito/MockitoAnnotations.html\" rel=\"noreferrer\">Doc</a></p>\n"},{"tags":[],"owner":{"account_id":8640558,"reputation":666,"user_id":6469368,"accept_rate":100,"display_name":"Onome Sotu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579864471,"creation_date":1579864471,"answer_id":59895335,"question_id":33124153,"body_markdown":"When using JUnit 5 or above. You have to inject the class annotated with `@Mock`\r\nin an `@BeforeEach` setup. ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>When using JUnit 5 or above. You have to inject the class annotated with <code>@Mock</code>\nin an <code>@BeforeEach</code> setup. </p>\n"},{"tags":[],"owner":{"account_id":3796499,"reputation":5874,"user_id":3151415,"accept_rate":65,"display_name":"garg10may"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1586696788,"creation_date":1586696788,"answer_id":61171946,"question_id":33124153,"body_markdown":"Make sure you initialize your mocks. \r\n\r\n`JUnit4` use `@Before`\r\n\r\n\t@Before\r\n\tpublic void setup() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n\r\n`JUnit5` use `@BeforeEach`\r\n\r\n\t@BeforeEach\r\n\tpublic void setup() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n\r\nFor `JUnit5` check, you are using proper imports also. \r\n\r\n    import org.junit.runner.RunWith\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Make sure you initialize your mocks. </p>\n\n<p><code>JUnit4</code> use <code>@Before</code></p>\n\n<pre><code>@Before\npublic void setup() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></pre>\n\n<p><code>JUnit5</code> use <code>@BeforeEach</code></p>\n\n<pre><code>@BeforeEach\npublic void setup() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></pre>\n\n<p>For <code>JUnit5</code> check, you are using proper imports also. </p>\n\n<pre><code>import org.junit.runner.RunWith\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329906,"reputation":12891,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677329890,"creation_date":1600279699,"answer_id":63925670,"question_id":33124153,"body_markdown":"Check that the method signature **is not declared as** `final`\r\n\r\nThis one catches out a lot of people who work on codebases which are subjected to Checkstyle and have internalised the need to mark members as `final`.\r\n\r\n\r\ni.e. in the OP&#39;s example:\r\n\r\n`object.method()`\r\n\r\nMake sure that `method()` is not declared as `final`:\r\n\r\n```\r\npublic final Object method() {\r\n}\r\n```\r\n\r\nMockito cannot mock a final method and this will come up as a wrapped NPE:\r\n\r\n```\r\nSuppressed: org.mockito.exceptions.misusing.InvalidUseOfMatchersException:\r\n```\r\n\r\nBuried deep in the error message is the following:\r\n\r\n```\r\nAlso, this error might show up because you use argument matchers with methods that cannot be mocked.\r\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\r\nMocking methods declared on non-public parent classes is not supported.\r\n```\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Check that the method signature <strong>is not declared as</strong> <code>final</code></p>\n<p>This one catches out a lot of people who work on codebases which are subjected to Checkstyle and have internalised the need to mark members as <code>final</code>.</p>\n<p>i.e. in the OP's example:</p>\n<p><code>object.method()</code></p>\n<p>Make sure that <code>method()</code> is not declared as <code>final</code>:</p>\n<pre><code>public final Object method() {\n}\n</code></pre>\n<p>Mockito cannot mock a final method and this will come up as a wrapped NPE:</p>\n<pre><code>Suppressed: org.mockito.exceptions.misusing.InvalidUseOfMatchersException:\n</code></pre>\n<p>Buried deep in the error message is the following:</p>\n<pre><code>Also, this error might show up because you use argument matchers with methods that cannot be mocked.\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\nMocking methods declared on non-public parent classes is not supported.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7335793,"reputation":1160,"user_id":5587233,"display_name":"Tanel"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1656697104,"creation_date":1602753057,"answer_id":64368328,"question_id":33124153,"body_markdown":"As this is the closest I found to the issue I had, it&#39;s the first result that comes up and I didn&#39;t find an appropriate answer, I&#39;ll post the solution here for any future poor souls:\r\n\r\n`any()` doesn&#39;t work where mocked class method uses a primitive parameter. \r\n\r\n```\r\n public Boolean getResult(String identifier, boolean switch)\r\n```\r\nThe above will produce the same exact issue as OP.\r\n\r\nSolution, just wrap it:\r\n\r\n```\r\n public Boolean getResult(String identifier, Boolean switch)\r\n```\r\n\r\nThe latter solves the NPE.\r\n\r\n* _keep in mind if you choose this approach, now you might want to include a nullcheck for Boolean in production code_ (credit: brought up by Ridcully)","title":"Mockito - NullpointerException when stubbing Method","body":"<p>As this is the closest I found to the issue I had, it's the first result that comes up and I didn't find an appropriate answer, I'll post the solution here for any future poor souls:</p>\n<p><code>any()</code> doesn't work where mocked class method uses a primitive parameter.</p>\n<pre><code> public Boolean getResult(String identifier, boolean switch)\n</code></pre>\n<p>The above will produce the same exact issue as OP.</p>\n<p>Solution, just wrap it:</p>\n<pre><code> public Boolean getResult(String identifier, Boolean switch)\n</code></pre>\n<p>The latter solves the NPE.</p>\n<ul>\n<li><em>keep in mind if you choose this approach, now you might want to include a nullcheck for Boolean in production code</em> (credit: brought up by Ridcully)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19005995,"reputation":1,"user_id":13872739,"display_name":"Satya Samal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604947050,"creation_date":1604947050,"answer_id":64757402,"question_id":33124153,"body_markdown":"In my case it was due to wrong import of the @Test annotation \r\n\r\nMake sure you are using the following import\r\n\r\n    import org.junit.jupiter.api.Test;\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case it was due to wrong import of the @Test annotation</p>\n<p>Make sure you are using the following import</p>\n<pre><code>import org.junit.jupiter.api.Test;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21103523,"reputation":221,"user_id":15512979,"display_name":"Poulami Pal"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1618687396,"creation_date":1618687396,"answer_id":67142144,"question_id":33124153,"body_markdown":"For JUnit 5 the test class has to be annotated with:\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n```\r\n\r\nimports:\r\n```\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.junit.jupiter.MockitoExtension;\r\n```\r\n\r\nMy issue was fixed with this addition.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For JUnit 5 the test class has to be annotated with:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n</code></pre>\n<p>imports:</p>\n<pre><code>import org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\n</code></pre>\n<p>My issue was fixed with this addition.</p>\n"},{"tags":[],"owner":{"account_id":20506220,"reputation":1455,"user_id":15048947,"display_name":"Md. Shahariar Hossen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625634555,"creation_date":1625634555,"answer_id":68280342,"question_id":33124153,"body_markdown":"Annotate the test class with: `@ExtendWith(MockitoExtension.class)`.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Annotate the test class with: <code>@ExtendWith(MockitoExtension.class)</code>.</p>\n"},{"tags":[],"owner":{"account_id":6914488,"reputation":21,"user_id":5309287,"display_name":"Yogeshwar Bagul"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628366450,"creation_date":1628333497,"answer_id":68691708,"question_id":33124153,"body_markdown":"For me, it was because I was stubbing the mock in the `@BeforeAll` method.\r\n\r\n`MockitoExtension` does not have a callback for `@BeforeAll`. \r\n\r\n    public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver\r\n\r\nI moved the stubbing inside the test method it worked!!","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For me, it was because I was stubbing the mock in the <code>@BeforeAll</code> method.</p>\n<p><code>MockitoExtension</code> does not have a callback for <code>@BeforeAll</code>.</p>\n<pre><code>public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver\n</code></pre>\n<p>I moved the stubbing inside the test method it worked!!</p>\n"},{"tags":[],"owner":{"account_id":12924013,"reputation":95,"user_id":9345418,"display_name":"Abhishek P"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628586784,"creation_date":1628586784,"answer_id":68724057,"question_id":33124153,"body_markdown":"Well in my case it was because of wrong annotation usage. I was using junit 4 for testing and used `@BeforeEach` instead of `@Before` while initializing.\r\n\r\nChanged it to `@Before` and it works like charm.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Well in my case it was because of wrong annotation usage. I was using junit 4 for testing and used <code>@BeforeEach</code> instead of <code>@Before</code> while initializing.</p>\n<p>Changed it to <code>@Before</code> and it works like charm.</p>\n"},{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633432190,"creation_date":1633432190,"answer_id":69449353,"question_id":33124153,"body_markdown":"In my case, it was the wrong import for `when()`.\r\n\r\nI used `import static reactor.core.publisher.Mono.when` by accident.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, it was the wrong import for <code>when()</code>.</p>\n<p>I used <code>import static reactor.core.publisher.Mono.when</code> by accident.</p>\n"},{"tags":[],"owner":{"account_id":23046057,"reputation":1,"user_id":17203873,"display_name":"ives murillo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634891404,"creation_date":1634850519,"answer_id":69668822,"question_id":33124153,"body_markdown":"In my case i was missing the annotation `@mock` in the mapper declaration.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case i was missing the annotation <code>@mock</code> in the mapper declaration.</p>\n"},{"tags":[],"owner":{"account_id":12130994,"reputation":171,"user_id":9297322,"display_name":"Omar Ghazi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646556521,"creation_date":1646556200,"answer_id":71368825,"question_id":33124153,"body_markdown":"In my case, Intellij created Test with `org.junit.jupiter.api.Test` (Junit5) instead of import `org.junit.Test` of (Junit4) which caused all beans to be null apparently.\r\nalso, make sure the class and test method is public ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, Intellij created Test with <code>org.junit.jupiter.api.Test</code> (Junit5) instead of import <code>org.junit.Test</code> of (Junit4) which caused all beans to be null apparently.\nalso, make sure the class and test method is public</p>\n"},{"tags":[],"owner":{"account_id":142251,"reputation":2173,"user_id":349831,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647572262,"creation_date":1647572262,"answer_id":71521998,"question_id":33124153,"body_markdown":"This is where google took me when I had the same `NullPointerException` with Junit 5, but was correctly using `@ExtendWith(MockitoExtension.class)` in my maven project.\r\n\r\nTurns out I hadn&#39;t included the `maven-surefire-plugin` in my pom.xml and that meant the `@ExtendWith` wasn&#39;t actually doing anything!\r\n\r\n```xml\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;2.22.1&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n    ...\r\n```","title":"Mockito - NullpointerException when stubbing Method","body":"<p>This is where google took me when I had the same <code>NullPointerException</code> with Junit 5, but was correctly using <code>@ExtendWith(MockitoExtension.class)</code> in my maven project.</p>\n<p>Turns out I hadn't included the <code>maven-surefire-plugin</code> in my pom.xml and that meant the <code>@ExtendWith</code> wasn't actually doing anything!</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.22.1&lt;/version&gt;\n    &lt;/plugin&gt;\n    ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648207271,"creation_date":1648207271,"answer_id":71616114,"question_id":33124153,"body_markdown":"In my case a tested method called another method as a parameter:\r\n\r\n    Mockito.`when`(repository.getItems(prefs.getUser().id)).thenReturn(listOf())`\r\n\r\nWhile `repository` is mocked, `prefs.getUser().id)` will throw NPE. So, first we should mock a parameter, for instance,\r\n\r\n    Mockito.`when`(prefs.getUser()).thenReturn(User(id = 1, name = &quot;user&quot;))`\r\n\r\nAlso we should mock `prefs`. I didn&#39;t check it and changed a library, sorry.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case a tested method called another method as a parameter:</p>\n<pre><code>Mockito.`when`(repository.getItems(prefs.getUser().id)).thenReturn(listOf())`\n</code></pre>\n<p>While <code>repository</code> is mocked, <code>prefs.getUser().id)</code> will throw NPE. So, first we should mock a parameter, for instance,</p>\n<pre><code>Mockito.`when`(prefs.getUser()).thenReturn(User(id = 1, name = &quot;user&quot;))`\n</code></pre>\n<p>Also we should mock <code>prefs</code>. I didn't check it and changed a library, sorry.</p>\n"},{"tags":[],"owner":{"account_id":5786299,"reputation":3037,"user_id":4565405,"accept_rate":60,"display_name":"Spencer Sutton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649095722,"creation_date":1649095722,"answer_id":71741870,"question_id":33124153,"body_markdown":"I was trying to mock a &quot;final&quot; method, which apparently was the problem.\r\n\r\nThe right way to handle this would be to use an interface and mock that interface however I couldn&#39;t control the library where the &quot;final&quot; method was. \r\n\r\nMockito 2 can handle mocking final method. Add a text file to the project&#39;s src/test/resources/mockito-extensions directory named org.mockito.plugins.MockMaker and add a single line of text:\r\n\r\n```\r\nmock-maker-inline\r\n```\r\n\r\nAfter that, mocking the final method should work just fine.\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I was trying to mock a &quot;final&quot; method, which apparently was the problem.</p>\n<p>The right way to handle this would be to use an interface and mock that interface however I couldn't control the library where the &quot;final&quot; method was.</p>\n<p>Mockito 2 can handle mocking final method. Add a text file to the project's src/test/resources/mockito-extensions directory named org.mockito.plugins.MockMaker and add a single line of text:</p>\n<pre><code>mock-maker-inline\n</code></pre>\n<p>After that, mocking the final method should work just fine.</p>\n"},{"tags":[],"owner":{"account_id":24860942,"reputation":1,"user_id":18736732,"display_name":"passive_programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649336088,"creation_date":1649336088,"answer_id":71782569,"question_id":33124153,"body_markdown":"Check which version of Junit you are using. In the Maven/Gradle build tool, if you set to use `testRuntimeOnly &#39;junit5&#39;`,then it might not take `@RunWith` since it is not available and it is replaced with `@ExtendWith` in Junit5. \r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Check which version of Junit you are using. In the Maven/Gradle build tool, if you set to use <code>testRuntimeOnly 'junit5'</code>,then it might not take <code>@RunWith</code> since it is not available and it is replaced with <code>@ExtendWith</code> in Junit5.</p>\n"},{"tags":[],"owner":{"account_id":18164243,"reputation":223,"user_id":13215135,"display_name":"tommytucker7182"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658867532,"creation_date":1658866214,"answer_id":73129216,"question_id":33124153,"body_markdown":"This doesnt answer the OP&#39;s original query, but its here to try help others with Mockito null pointer exceptions (NPE). \r\n\r\nMy NPE was happening as I did not explicitly set the class under tests&#39; dependencies to be the classes I had mocked. So the class under test was unable to find its required dependencies, creating the NPE. I tend to not mock the class under test (i.e. use ```new``` keyword), to ensure im getting my native class behaviour for testing.\r\n\r\nIm still using Junit 4 for reasons outside my control. Worked example;\r\n\r\n**ClassUnderTest**\r\n```java\r\npublic class ClassUnderTest {\r\n    private DependantClassOne dependantClassOne; \r\n    private DependantClassTwo dependantClassTwo;\r\n\r\n    // remaining class, including setters\r\n}\r\n```\r\n\r\n**Test Class**\r\n```java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class Test {\r\n    private ClassUnderTest classUnderTest;\r\n    private DependantClassOne dependantClassOne;\r\n    private DependantClassTwo dependantClassTwo;\r\n \r\n    @Before\r\n    public void setup() {\r\n        dependantClassOne = mock(DependantClassOne.class);\r\n        dependantClassTwo = mock(DependantClassTwo.class);\r\n        classUnderTest = new ClassUnderTest();\r\n\r\n        classUnderTest.setDependantClassOne(dependantClassOne); //added to prevent NPE\r\n        classUnderTest.setDependantClassTwo(dependantClassTwo); //added to prevent NPE\r\n    }\r\n\r\n    // tests\r\n}\r\n```","title":"Mockito - NullpointerException when stubbing Method","body":"<p>This doesnt answer the OP's original query, but its here to try help others with Mockito null pointer exceptions (NPE).</p>\n<p>My NPE was happening as I did not explicitly set the class under tests' dependencies to be the classes I had mocked. So the class under test was unable to find its required dependencies, creating the NPE. I tend to not mock the class under test (i.e. use <code>new</code> keyword), to ensure im getting my native class behaviour for testing.</p>\n<p>Im still using Junit 4 for reasons outside my control. Worked example;</p>\n<p><strong>ClassUnderTest</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClassUnderTest {\n    private DependantClassOne dependantClassOne; \n    private DependantClassTwo dependantClassTwo;\n\n    // remaining class, including setters\n}\n</code></pre>\n<p><strong>Test Class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(MockitoJUnitRunner.class)\npublic class Test {\n    private ClassUnderTest classUnderTest;\n    private DependantClassOne dependantClassOne;\n    private DependantClassTwo dependantClassTwo;\n \n    @Before\n    public void setup() {\n        dependantClassOne = mock(DependantClassOne.class);\n        dependantClassTwo = mock(DependantClassTwo.class);\n        classUnderTest = new ClassUnderTest();\n\n        classUnderTest.setDependantClassOne(dependantClassOne); //added to prevent NPE\n        classUnderTest.setDependantClassTwo(dependantClassTwo); //added to prevent NPE\n    }\n\n    // tests\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9028118,"reputation":731,"user_id":8696281,"display_name":"noobie2023"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1660323396,"creation_date":1660323396,"answer_id":73337513,"question_id":33124153,"body_markdown":"In my case, my Mockito annotation didn&#39;t match the JUnit Version.\r\n\r\n1. When using `@ExtendWith(MockitoExtension.class)` make sure you&#39;re using JUnit 5: `import org.junit.jupiter.api.Test;`\r\n\r\n2. When using `@RunWith(MockitoJUnitRunner.class)` make sure you&#39;re using JUnit 4: `import org.junit.Test;`  ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, my Mockito annotation didn't match the JUnit Version.</p>\n<ol>\n<li><p>When using <code>@ExtendWith(MockitoExtension.class)</code> make sure you're using JUnit 5: <code>import org.junit.jupiter.api.Test;</code></p>\n</li>\n<li><p>When using <code>@RunWith(MockitoJUnitRunner.class)</code> make sure you're using JUnit 4: <code>import org.junit.Test;</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16021655,"reputation":1,"user_id":11563030,"display_name":"Shurion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671041088,"creation_date":1671041065,"answer_id":74802530,"question_id":33124153,"body_markdown":"In my case UnderTest class has two kind of injections: via constructor(TheSecondService) and via setters(TheFirstService). \r\n\r\nAll injections via setters was null. This helps:\r\n\r\n    @Mock\r\n    private TheFirstService theFirstService;\r\n    @Mock\r\n    private TheSecondService theSecondService;\r\n    @InjectMocks\r\n    private TheThirdService underTest;\r\n      \r\n    @BeforeEach\r\n    public void setup() {\r\n        underTest.setTheFirstService(theFirstService);\r\n    }","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case UnderTest class has two kind of injections: via constructor(TheSecondService) and via setters(TheFirstService).</p>\n<p>All injections via setters was null. This helps:</p>\n<pre><code>@Mock\nprivate TheFirstService theFirstService;\n@Mock\nprivate TheSecondService theSecondService;\n@InjectMocks\nprivate TheThirdService underTest;\n  \n@BeforeEach\npublic void setup() {\n    underTest.setTheFirstService(theFirstService);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675950416,"creation_date":1675682809,"answer_id":75360700,"question_id":33124153,"body_markdown":"I was using wrong annotation/import of Mock, so my object was not getting formed.\r\nI was using `org.evosuite.shaded.org.mockito.Mock` and I switched back to `org.mockito.Mock`. Then as if by magic, it started working for me.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I was using wrong annotation/import of Mock, so my object was not getting formed.\nI was using <code>org.evosuite.shaded.org.mockito.Mock</code> and I switched back to <code>org.mockito.Mock</code>. Then as if by magic, it started working for me.</p>\n"},{"tags":[],"owner":{"account_id":13597862,"reputation":67,"user_id":9809339,"display_name":"Assaduzzaman Assad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690289973,"creation_date":1689849669,"answer_id":76729066,"question_id":33124153,"body_markdown":"&lt;h3&gt; Fix Static Import &lt;/h3&gt;\r\n\r\nPlease check the static import. It seems like this is the issue.\r\n\r\n**The correct import should be:**\r\n\r\n `import static org.mockito.Mockito.when`\r\n\r\n**Instead of:**\r\n\r\n `import static reactor.core.publisher.Mono.when`.","title":"Mockito - NullpointerException when stubbing Method","body":"<h3> Fix Static Import </h3>\n<p>Please check the static import. It seems like this is the issue.</p>\n<p><strong>The correct import should be:</strong></p>\n<p><code>import static org.mockito.Mockito.when</code></p>\n<p><strong>Instead of:</strong></p>\n<p><code>import static reactor.core.publisher.Mono.when</code>.</p>\n"}],"owner":{"account_id":7078298,"reputation":3226,"user_id":5417542,"accept_rate":36,"display_name":"user5417542"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375539,"favorite_count":0,"down_vote_count":0,"up_vote_count":184,"accepted_answer_id":33215620,"answer_count":33,"score":184,"last_activity_date":1690289973,"creation_date":1444822213,"question_id":33124153,"body_markdown":"So I started writing tests for our Java-Spring-project. \r\n\r\nWhat I use is JUnit and Mockito. It&#39;s said, that when I use the when()...thenReturn() option I can mock services, without simulating them or so. So what I want to do is, to set:\r\n\r\n    when(classIwantToTest.object.get().methodWhichReturnsAList(input))thenReturn(ListcreatedInsideTheTestClass)  \r\n\r\nBut no matter which when-clause I do, I always get a NullpointerException, which of course makes sense, because input is null. \r\n\r\n\r\nAlso when I try to mock another method from an object: \r\n\r\n    when(object.method()).thenReturn(true)\r\n\r\nThere I also get a Nullpointer, because the method needs a variable, which isn&#39;t set. \r\n\r\n\r\nBut I want to use when()..thenReturn() to get around creating this variable and so on. I just want to make sure, that if any class calls this method, then no matter what, just return true or the list above.\r\n\r\nIs it a basically misunderstanding from my side, or is there something else wrong?\r\n\r\n\r\n**Code:**\r\n\r\n\r\n    public class classIWantToTest implements classIWantToTestFacade{\r\n    \t    @Autowired\r\n    \t    private SomeService myService;\r\n    \r\n    \t    @Override\r\n    \t    public Optional&lt;OutputData&gt; getInformations(final InputData inputData) {\r\n    \t        final Optional&lt;OutputData&gt; data = myService.getListWithData(inputData);\r\n    \t        if (data.isPresent()) {\r\n    \t            final List&lt;ItemData&gt; allData = data.get().getItemDatas();\r\n    \t            \t//do something with the data and allData\r\n    \t            return data;\r\n    \t        }\r\n    \r\n    \t        return Optional.absent();\r\n    \t    }\t\r\n    }\r\n\r\n\r\n\r\nAnd here is my test class:\r\n\r\n    public class Test {\r\n    \r\n        private InputData inputdata;\r\n    \r\n        private ClassUnderTest classUnderTest;\r\n    \r\n        final List&lt;ItemData&gt; allData = new ArrayList&lt;ItemData&gt;();\r\n    \r\n        @Mock\r\n        private DeliveryItemData item1;\r\n    \r\n        @Mock\r\n        private DeliveryItemData item2;\r\n    \r\n    \r\n    \r\n        @Mock\r\n        private SomeService myService;\r\n    \r\n     \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            classUnderTest = new ClassUnderTest();\r\n            myService = mock(myService.class); \r\n            classUnderTest.setService(myService);\r\n            item1 = mock(DeliveryItemData.class);\r\n            item2 = mock(DeliveryItemData.class);\r\n    \r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void test_sort() {\r\n            createData();\r\n            when(myService.getListWithData(inputdata).get().getItemDatas());\r\n    \r\n            when(item1.hasSomething()).thenReturn(true);\r\n            when(item2.hasSomething()).thenReturn(false);\r\n    \r\n        }\r\n    \r\n        public void createData() {\r\n        \titem1.setSomeValue(&quot;val&quot;);\r\n        \titem2.setSomeOtherValue(&quot;test&quot;);\r\n    \r\n            item2.setSomeValue(&quot;val&quot;);\r\n            item2.setSomeOtherValue(&quot;value&quot;);\r\n    \r\n            allData.add(item1);\r\n            allData.add(item2);\r\n    \r\n    \r\n    }\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>So I started writing tests for our Java-Spring-project. </p>\n\n<p>What I use is JUnit and Mockito. It's said, that when I use the when()...thenReturn() option I can mock services, without simulating them or so. So what I want to do is, to set:</p>\n\n<pre><code>when(classIwantToTest.object.get().methodWhichReturnsAList(input))thenReturn(ListcreatedInsideTheTestClass)  \n</code></pre>\n\n<p>But no matter which when-clause I do, I always get a NullpointerException, which of course makes sense, because input is null. </p>\n\n<p>Also when I try to mock another method from an object: </p>\n\n<pre><code>when(object.method()).thenReturn(true)\n</code></pre>\n\n<p>There I also get a Nullpointer, because the method needs a variable, which isn't set. </p>\n\n<p>But I want to use when()..thenReturn() to get around creating this variable and so on. I just want to make sure, that if any class calls this method, then no matter what, just return true or the list above.</p>\n\n<p>Is it a basically misunderstanding from my side, or is there something else wrong?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>public class classIWantToTest implements classIWantToTestFacade{\n        @Autowired\n        private SomeService myService;\n\n        @Override\n        public Optional&lt;OutputData&gt; getInformations(final InputData inputData) {\n            final Optional&lt;OutputData&gt; data = myService.getListWithData(inputData);\n            if (data.isPresent()) {\n                final List&lt;ItemData&gt; allData = data.get().getItemDatas();\n                    //do something with the data and allData\n                return data;\n            }\n\n            return Optional.absent();\n        }   \n}\n</code></pre>\n\n<p>And here is my test class:</p>\n\n<pre><code>public class Test {\n\n    private InputData inputdata;\n\n    private ClassUnderTest classUnderTest;\n\n    final List&lt;ItemData&gt; allData = new ArrayList&lt;ItemData&gt;();\n\n    @Mock\n    private DeliveryItemData item1;\n\n    @Mock\n    private DeliveryItemData item2;\n\n\n\n    @Mock\n    private SomeService myService;\n\n\n    @Before\n    public void setUp() throws Exception {\n        classUnderTest = new ClassUnderTest();\n        myService = mock(myService.class); \n        classUnderTest.setService(myService);\n        item1 = mock(DeliveryItemData.class);\n        item2 = mock(DeliveryItemData.class);\n\n    }\n\n\n    @Test\n    public void test_sort() {\n        createData();\n        when(myService.getListWithData(inputdata).get().getItemDatas());\n\n        when(item1.hasSomething()).thenReturn(true);\n        when(item2.hasSomething()).thenReturn(false);\n\n    }\n\n    public void createData() {\n        item1.setSomeValue(\"val\");\n        item2.setSomeOtherValue(\"test\");\n\n        item2.setSomeValue(\"val\");\n        item2.setSomeOtherValue(\"value\");\n\n        allData.add(item1);\n        allData.add(item2);\n\n\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","ibm-mq","apache-kafka-connect","jsonpath"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690218918,"creation_date":1690218918,"answer_id":76756716,"question_id":76750813,"body_markdown":"You will need to write custom code, or pre-process the data using tools like Kafka Streams, ksqlDB, Flink, Spark, etc.\r\n\r\nKafka Connect works best on structured data, not plain strings, and even if you have JSON, there is no &quot;String contains&quot; filter that is built-in. The linked transform from Confluent would have to be installed separately, and you can try using `=~` JSONPath operator.","title":"MQ to Kafka source connector filter","body":"<p>You will need to write custom code, or pre-process the data using tools like Kafka Streams, ksqlDB, Flink, Spark, etc.</p>\n<p>Kafka Connect works best on structured data, not plain strings, and even if you have JSON, there is no &quot;String contains&quot; filter that is built-in. The linked transform from Confluent would have to be installed separately, and you can try using <code>=~</code> JSONPath operator.</p>\n"}],"owner":{"account_id":899936,"reputation":2034,"user_id":936329,"accept_rate":48,"display_name":"bluelabel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76756716,"answer_count":1,"score":0,"last_activity_date":1690289465,"creation_date":1690158735,"question_id":76750813,"body_markdown":"I am trying to configure a Kafka source connector to read messages from IBMMQ and route those messages to a Kafka topic. I am getting 2 types of messages, and value of the both message is a string.\r\nEg: `AB ABC123 PQRZ 20220724 IJK BLA BLA-BLA` and\r\n`AB PQR123 1234 20220724 IJK BLA BLA-BLA XYZ`\r\n\r\nI want to filter out one of those messages based on the string content of the value. \r\n\r\nIf I take the above 2 messages as an example, I want the message which contains ABC123 to be produced to the Kafka topic and PQR123 to be dropped. [The examples shown in the confluent][1] are all based on JSON payload. Is there any way I can do this without writing a custom transform class (java)\r\n\r\n\r\n  [1]: https://docs.confluent.io/platform/current/connect/transforms/filter-confluent.html#confluent-filter","title":"MQ to Kafka source connector filter","body":"<p>I am trying to configure a Kafka source connector to read messages from IBMMQ and route those messages to a Kafka topic. I am getting 2 types of messages, and value of the both message is a string.\nEg: <code>AB ABC123 PQRZ 20220724 IJK BLA BLA-BLA</code> and\n<code>AB PQR123 1234 20220724 IJK BLA BLA-BLA XYZ</code></p>\n<p>I want to filter out one of those messages based on the string content of the value.</p>\n<p>If I take the above 2 messages as an example, I want the message which contains ABC123 to be produced to the Kafka topic and PQR123 to be dropped. <a href=\"https://docs.confluent.io/platform/current/connect/transforms/filter-confluent.html#confluent-filter\" rel=\"nofollow noreferrer\">The examples shown in the confluent</a> are all based on JSON payload. Is there any way I can do this without writing a custom transform class (java)</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1689779550,"post_id":76722163,"comment_id":135262541,"body_markdown":"Just out of curiosity, are these time units like days, weeks, months and years? If so, should not 12 days come after 1 week?","body":"Just out of curiosity, are these time units like days, weeks, months and years? If so, should not 12 days come after 1 week?"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690289301,"creation_date":1689775831,"answer_id":76722241,"question_id":76722163,"body_markdown":"First, you should sort by the index in `order`, then by the numeric value.\r\n\r\nMoreover, you should get the index of the last character in the string in `order`, instead of passing the whole `String` to `indexOf`.\r\n\r\n```java\r\nvar order = Arrays.asList(&#39;D&#39;, &#39;W&#39;, &#39;M&#39;,&#39;Y&#39;); // use chars instead of String\r\nlistNew.sort(Comparator.comparingInt((String s) -&gt; order.indexOf(s.charAt(s.length() - 1)))\r\n             .thenComparingInt(s -&gt; Integer.parseInt(s, 0, s.length() - 1, 10)));\r\n```","title":"Sorting list in a specific order","body":"<p>First, you should sort by the index in <code>order</code>, then by the numeric value.</p>\n<p>Moreover, you should get the index of the last character in the string in <code>order</code>, instead of passing the whole <code>String</code> to <code>indexOf</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var order = Arrays.asList('D', 'W', 'M','Y'); // use chars instead of String\nlistNew.sort(Comparator.comparingInt((String s) -&gt; order.indexOf(s.charAt(s.length() - 1)))\n             .thenComparingInt(s -&gt; Integer.parseInt(s, 0, s.length() - 1, 10)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689779238,"creation_date":1689779238,"answer_id":76722726,"question_id":76722163,"body_markdown":"This might be just an exercise, so the following might be overkill, but if this is an actual entity it might be worth to create a class/record and define a compare method. \r\n\r\nThis class would have a number and a period string (&#39;D&#39;, &#39;W&#39;, &#39;M&#39;, &#39;Y&#39;), then to compare them you create two instances and invoke the `compareTo` method:\r\n\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    \r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\r\n            listNew.add(&quot;2D&quot;);\r\n            listNew.add(&quot;1D&quot;);\r\n            listNew.add(&quot;1Y&quot;);\r\n            listNew.add(&quot;12W&quot;);\r\n            listNew.add(&quot;1W&quot;);\r\n            listNew.add(&quot;23M&quot;);\r\n            listNew.add(&quot;4M&quot;);\r\n            listNew.add(&quot;2Y&quot;);\r\n            listNew.add(&quot;12D&quot;);\r\n            listNew.add(&quot;1W&quot;);;\r\n            \r\n            listNew.sort((s, t) -&gt; {\r\n                var a = new TimePeriod(Integer.parseInt(s.substring(0, s.length() - 1)), s.substring(s.length() - 1));\r\n                var b = new TimePeriod(Integer.parseInt(t.substring(0, t.length() - 1)), t.substring(t.length() - 1));\r\n                return a.compareTo(b);\r\n            });\r\n    \r\n            for (String element : listNew) {\r\n                System.out.println(element);\r\n            }\r\n        }\r\n    }\r\n    \r\n    record TimePeriod(int number, String period) {\r\n      private static final List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;, &quot;Y&quot;);\r\n    \r\n      public int compareTo (TimePeriod other){\r\n        int periodPart = Integer.compare( order.indexOf(this.period), order.indexOf(other.period));\r\n        return periodPart != 0 ? periodPart : Integer.compare(this.number, other.number);\r\n      }\r\n    }\r\n\r\nIt might not be as clever, but overtime might be easier to maintain. ","title":"Sorting list in a specific order","body":"<p>This might be just an exercise, so the following might be overkill, but if this is an actual entity it might be worth to create a class/record and define a compare method.</p>\n<p>This class would have a number and a period string ('D', 'W', 'M', 'Y'), then to compare them you create two instances and invoke the <code>compareTo</code> method:</p>\n<pre><code>import java.util.Comparator;\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\n\npublic class MyClass {\n    public static void main(String args[]) {\n        List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\n        listNew.add(&quot;2D&quot;);\n        listNew.add(&quot;1D&quot;);\n        listNew.add(&quot;1Y&quot;);\n        listNew.add(&quot;12W&quot;);\n        listNew.add(&quot;1W&quot;);\n        listNew.add(&quot;23M&quot;);\n        listNew.add(&quot;4M&quot;);\n        listNew.add(&quot;2Y&quot;);\n        listNew.add(&quot;12D&quot;);\n        listNew.add(&quot;1W&quot;);;\n        \n        listNew.sort((s, t) -&gt; {\n            var a = new TimePeriod(Integer.parseInt(s.substring(0, s.length() - 1)), s.substring(s.length() - 1));\n            var b = new TimePeriod(Integer.parseInt(t.substring(0, t.length() - 1)), t.substring(t.length() - 1));\n            return a.compareTo(b);\n        });\n\n        for (String element : listNew) {\n            System.out.println(element);\n        }\n    }\n}\n\nrecord TimePeriod(int number, String period) {\n  private static final List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;, &quot;Y&quot;);\n\n  public int compareTo (TimePeriod other){\n    int periodPart = Integer.compare( order.indexOf(this.period), order.indexOf(other.period));\n    return periodPart != 0 ? periodPart : Integer.compare(this.number, other.number);\n  }\n}\n</code></pre>\n<p>It might not be as clever, but overtime might be easier to maintain.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689798399,"creation_date":1689798399,"answer_id":76724963,"question_id":76722163,"body_markdown":"In case you use immutable list, you can use snippet like this:\r\n\r\n```java\r\npublic static List&lt;String&gt; sort(List&lt;String&gt; data, char... letters) {\r\n    Map&lt;Character, Queue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n    for (String str : data) {\r\n        map.computeIfAbsent(str.charAt(str.length() - 1),\r\n                            PriorityQueue::new)\r\n                .add(Integer.parseInt(str.substring(0, str.length() - 1)));\r\n    }\r\n\r\n    return IntStream.range(0, letters.length)\r\n            .mapToObj(i -&gt; letters[i])\r\n            .filter(map::containsKey)\r\n            .flatMap((Function&lt;Character, Stream&lt;String&gt;&gt;) ch -&gt;\r\n                    map.get(ch).stream()\r\n                            .map(num -&gt; String.valueOf(num) + ch))\r\n            .collect(Collectors.toList());\r\n}\r\n```","title":"Sorting list in a specific order","body":"<p>In case you use immutable list, you can use snippet like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; sort(List&lt;String&gt; data, char... letters) {\n    Map&lt;Character, Queue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\n\n    for (String str : data) {\n        map.computeIfAbsent(str.charAt(str.length() - 1),\n                            PriorityQueue::new)\n                .add(Integer.parseInt(str.substring(0, str.length() - 1)));\n    }\n\n    return IntStream.range(0, letters.length)\n            .mapToObj(i -&gt; letters[i])\n            .filter(map::containsKey)\n            .flatMap((Function&lt;Character, Stream&lt;String&gt;&gt;) ch -&gt;\n                    map.get(ch).stream()\n                            .map(num -&gt; String.valueOf(num) + ch))\n            .collect(Collectors.toList());\n}\n</code></pre>\n"}],"owner":{"account_id":4708698,"reputation":1254,"user_id":3809938,"accept_rate":44,"display_name":"user3809938"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1690289301,"creation_date":1689775375,"question_id":76722163,"body_markdown":"I have a list as below\r\n\r\n(2D, 1D, 1Y, 12W, 1W, 23M, 4M, 2Y, 12D)\r\n\r\nI want to sort in the following order\r\n\r\n1) by the letters (D,W,M,Y)\r\n2) then numerically\r\n\r\nSo I should have output\r\n\r\n(1D, 2D, 12D, 1W, 12W, 4M, 23M, 1Y, 2Y)\r\n\r\nI have tried this\r\n\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    import java.util.Comparator;\r\n    import java.util.Collections;\r\n    import java.util.Arrays;\r\n\r\n\r\n    public class MyClass {\r\n    public static void main(String args[]) {\r\n      List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\r\n      listNew.add(&quot;2D&quot;);\r\n      listNew.add(&quot;1D&quot;);\r\n      listNew.add(&quot;1Y&quot;);\r\n      listNew.add(&quot;12W&quot;);\r\n      listNew.add(&quot;1W&quot;);\r\n      listNew.add(&quot;23M&quot;);\r\n      listNew.add(&quot;4M&quot;);\r\n      listNew.add(&quot;2Y&quot;);\r\n      listNew.add(&quot;12D&quot;);\r\n      listNew.add(&quot;1W&quot;);\r\n      List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;,&quot;Y&quot;);\r\n      listNew.sort(Comparator.comparingInt(s -&gt; Integer.parseInt(((String) s).substring(0, ((String) s).length() - 1))).thenComparing(Comparator.comparingInt(order::indexOf)));\r\n      for (String element : listNew) {\r\n            System.out.println(element);\r\n        }\r\n    }\r\n}\r\n\r\nHowever I get this output:\r\n\r\n1D\r\n1Y\r\n1W\r\n1W\r\n2D\r\n2Y\r\n4M\r\n12W\r\n12D\r\n23M\r\n\r\nWhat am I doing wrong?","title":"Sorting list in a specific order","body":"<p>I have a list as below</p>\n<p>(2D, 1D, 1Y, 12W, 1W, 23M, 4M, 2Y, 12D)</p>\n<p>I want to sort in the following order</p>\n<ol>\n<li>by the letters (D,W,M,Y)</li>\n<li>then numerically</li>\n</ol>\n<p>So I should have output</p>\n<p>(1D, 2D, 12D, 1W, 12W, 4M, 23M, 1Y, 2Y)</p>\n<p>I have tried this</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.Collections;\nimport java.util.Arrays;\n\n\npublic class MyClass {\npublic static void main(String args[]) {\n  List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\n  listNew.add(&quot;2D&quot;);\n  listNew.add(&quot;1D&quot;);\n  listNew.add(&quot;1Y&quot;);\n  listNew.add(&quot;12W&quot;);\n  listNew.add(&quot;1W&quot;);\n  listNew.add(&quot;23M&quot;);\n  listNew.add(&quot;4M&quot;);\n  listNew.add(&quot;2Y&quot;);\n  listNew.add(&quot;12D&quot;);\n  listNew.add(&quot;1W&quot;);\n  List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;,&quot;Y&quot;);\n  listNew.sort(Comparator.comparingInt(s -&gt; Integer.parseInt(((String) s).substring(0, ((String) s).length() - 1))).thenComparing(Comparator.comparingInt(order::indexOf)));\n  for (String element : listNew) {\n        System.out.println(element);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>However I get this output:</p>\n<p>1D\n1Y\n1W\n1W\n2D\n2Y\n4M\n12W\n12D\n23M</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["javascript","java","syncfusion"],"comments":[{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1688133843,"post_id":76588899,"comment_id":135037278,"body_markdown":"To solve the issue I use this","body":"To solve the issue I use this"}],"answers":[{"tags":[],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688134123,"creation_date":1688134123,"answer_id":76589652,"question_id":76588899,"body_markdown":"To solve the issue I did this\r\n\r\n```java\r\npublic static String htmlToSfdt(String html) throws Exception {\r\n\t\thtml = ImageUtil.convertImagesToBase64(html);\r\n\t\tbyte[] bytes = html.getBytes(StandardCharsets.UTF_8);\r\n\t\tInputStream stream = new ByteArrayInputStream(bytes);\t\t\r\n\t\tString sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\r\n\t\tstream.close();\r\n\t\treturn sfdt;\r\n\t}\r\n```\r\n\r\n\r\n#ImageUtil.java\r\n```java\r\npublic static String convertImagesToBase64(String html) {\r\n        Pattern pattern = Pattern.compile(&quot;&lt;img\\\\s+src\\\\s*=\\\\s*\\&quot;(.*?)\\&quot;&quot;, Pattern.CASE_INSENSITIVE);\r\n        Matcher matcher = pattern.matcher(html);\r\n        StringBuffer sb = new StringBuffer();\r\n\r\n        while (matcher.find()) {\r\n            String imageUrl = matcher.group(1);\r\n            try {\r\n                String base64Image = imageToBase64(imageUrl);\r\n                matcher.appendReplacement(sb, &quot;&lt;img src=\\&quot;data:image/png;base64,&quot; + base64Image + &quot;\\&quot;&quot;);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        matcher.appendTail(sb);\r\n        return sb.toString();\r\n    }\r\n\r\n    public static String imageToBase64(String imageUrl) throws IOException {\r\n    \t  URL url = new URL(imageUrl);\r\n          InputStream inputStream = url.openStream();\r\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n          byte[] buffer = new byte[4096];\r\n          int bytesRead;\r\n\r\n          while ((bytesRead = inputStream.read(buffer)) != -1) \r\n              outputStream.write(buffer, 0, bytesRead);\r\n\r\n          byte[] imageBytes = outputStream.toByteArray();\r\n          String base64Image = Base64.getEncoder().encodeToString(imageBytes);\r\n\r\n          inputStream.close();\r\n          outputStream.close();\r\n\r\n          return base64Image;\r\n    }\r\n```\r\n\r\nhowever, I would expect that Syncfusion&#39;s Document Editor do this backstage. If somebody knows a better way it would be helpful.","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>To solve the issue I did this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String htmlToSfdt(String html) throws Exception {\n        html = ImageUtil.convertImagesToBase64(html);\n        byte[] bytes = html.getBytes(StandardCharsets.UTF_8);\n        InputStream stream = new ByteArrayInputStream(bytes);       \n        String sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\n        stream.close();\n        return sfdt;\n    }\n</code></pre>\n<p>#ImageUtil.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String convertImagesToBase64(String html) {\n        Pattern pattern = Pattern.compile(&quot;&lt;img\\\\s+src\\\\s*=\\\\s*\\&quot;(.*?)\\&quot;&quot;, Pattern.CASE_INSENSITIVE);\n        Matcher matcher = pattern.matcher(html);\n        StringBuffer sb = new StringBuffer();\n\n        while (matcher.find()) {\n            String imageUrl = matcher.group(1);\n            try {\n                String base64Image = imageToBase64(imageUrl);\n                matcher.appendReplacement(sb, &quot;&lt;img src=\\&quot;data:image/png;base64,&quot; + base64Image + &quot;\\&quot;&quot;);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        matcher.appendTail(sb);\n        return sb.toString();\n    }\n\n    public static String imageToBase64(String imageUrl) throws IOException {\n          URL url = new URL(imageUrl);\n          InputStream inputStream = url.openStream();\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n          byte[] buffer = new byte[4096];\n          int bytesRead;\n\n          while ((bytesRead = inputStream.read(buffer)) != -1) \n              outputStream.write(buffer, 0, bytesRead);\n\n          byte[] imageBytes = outputStream.toByteArray();\n          String base64Image = Base64.getEncoder().encodeToString(imageBytes);\n\n          inputStream.close();\n          outputStream.close();\n\n          return base64Image;\n    }\n</code></pre>\n<p>however, I would expect that Syncfusion's Document Editor do this backstage. If somebody knows a better way it would be helpful.</p>\n"},{"tags":[],"owner":{"account_id":28947647,"reputation":1,"user_id":22172917,"display_name":"Selvaprakash K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688465273,"creation_date":1688465151,"answer_id":76611511,"question_id":76588899,"body_markdown":"After examining your use case, we suggest that if you want to add an image from a web or file URL, you can use the insertImage API directly on the client side. For further information on this, you can refer to the UG documentation below.\r\n\r\nIf your use case is different than that of the above one, please share with us more details about it.\r\n\r\n[UG Link][1]\r\n\r\n\r\n  [1]: https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>After examining your use case, we suggest that if you want to add an image from a web or file URL, you can use the insertImage API directly on the client side. For further information on this, you can refer to the UG documentation below.</p>\n<p>If your use case is different than that of the above one, please share with us more details about it.</p>\n<p><a href=\"https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage\" rel=\"nofollow noreferrer\">UG Link</a></p>\n"},{"tags":[],"owner":{"account_id":28947647,"reputation":1,"user_id":22172917,"display_name":"Selvaprakash K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690289164,"creation_date":1689850893,"answer_id":76729192,"question_id":76588899,"body_markdown":"Regarding the query, &quot;however, I need to process images at backend.&quot; Please refer to the below code snippet.\r\n\r\nProcess flow:\r\n 1. Using the `DocIO` component, we are creating a Word document and inserting the image tag.\r\n 2. The created document is sent to `DocumentEditor` for opening.\r\n\r\n```csharp\r\npublic string OpenImage()\r\n{\r\n    //Loads the template document\r\n    WDocument document = new WDocument();\r\n    document.EnsureMinimal();\r\n    document.HTMLImportSettings.ImageNodeVisited += OpenImage;\r\n    //Html string to be inserted\r\n    string html = &quot;&lt;img src=\\&quot;https://www.w3schools.com/tags/img_girl.jpg\\&quot;/&gt;&quot;;\r\n    //Validates the Html string\r\n    bool isValidHtml = document.LastSection.Body.IsValidXHTML(html, Syncfusion.DocIO.DLS.XHTMLValidationType.None);\r\n    //When the Html string passes validation, it is inserted to the document\r\n    if (isValidHtml)\r\n    {\r\n\r\n        //Appends the Html string to first paragraph in the document\r\n        document.Sections[0].Body.Paragraphs[0].AppendHTML(html);\r\n    }\r\n    document.HTMLImportSettings.ImageNodeVisited -= OpenImage;\r\n    //Hooks MetafileImageParsed event.\r\n    WordDocument.MetafileImageParsed += OnMetafileImageParsed;\r\n    WordDocument document1 = WordDocument.Load(document);\r\n    document1.OptimizeSfdt = false;\r\n    //Unhooks MetafileImageParsed event.\r\n    WordDocument.MetafileImageParsed -= OnMetafileImageParsed;\r\n    string json = Newtonsoft.Json.JsonConvert.SerializeObject(document1);\r\n    document.Dispose();\r\n    return json;\r\n}\r\n\r\n/// &lt;summary&gt;\r\n/// Event handler to download the image from website.\r\n/// &lt;/summary&gt;\r\nprivate static void OpenImage(object sender, Syncfusion.DocIO.DLS.ImageNodeVisitedEventArgs args)\r\n{\r\n    //Check whether image src is mentioned as website URL.\r\n    if (args.Uri.StartsWith(&quot;https://&quot;))\r\n    {\r\n        WebClient client = new WebClient();\r\n        //Download the image as stream.\r\n        byte[] image = client.DownloadData(args.Uri);\r\n        Stream stream = new MemoryStream(image);\r\n        //Set the retrieved image from the input HTML.\r\n        args.ImageStream = stream;\r\n    }\r\n}\r\n\r\n//Converts Metafile to raster image.\r\nprivate static void OnMetafileImageParsed(object sender, MetafileImageParsedEventArgs args)\r\n{\r\n    System.Drawing.Image img = System.Drawing.Image.FromStream(args.MetafileStream);\r\n    //You can write your own method definition for converting metafile to raster image using any third-party image converter.\r\n    args.ImageStream = ConvertMetafileToRasterImage(args.MetafileStream);\r\n}\r\n\r\nprivate static Stream ConvertMetafileToRasterImage(Stream ImageStream)\r\n{\r\n    //Here we are loading a default raster image as fallback.\r\n    Stream imgStream = GetManifestResourceStream(&quot;ImageNotFound.jpg&quot;);\r\n    return imgStream;\r\n\r\n    //To do : Write your own logic for converting metafile to raster image using any third-party image converter(Syncfusion doesn&#39;t provide any image converter).\r\n}\r\n```\r\nOn the client side, you can call the above mentioned web action `OpenImage` and use the Open API.\r\n\r\n```javascript\r\n//Initialize Document Editor Container component.\r\nlet container: DocumentEditorContainer = new DocumentEditorContainer();\r\n\r\ncontainer.appendTo(&#39;#DocumentEditorContainer&#39;);\r\n\r\ndocument.getElementById(&#39;import&#39;).addEventListener(&#39;click&#39;, () =&gt; {\r\n    let http: XMLHttpRequest = new XMLHttpRequest();\r\n    //add your url in which you want to open document inside the &quot;&quot;\r\n    let content = { fileUrl: &quot;&quot; };\r\n    let baseurl: string = &quot;/api/documenteditor/OpenImage&quot;;\r\n    http.open(&quot;POST&quot;, baseurl, true);\r\n    http.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;);\r\n    http.onreadystatechange = () =&gt; {\r\n        if (http.readyState === 4) {\r\n            if (http.status === 200 || http.status === 304) {\r\n                //open the SFDT text in Document Editor\r\n                container.documentEditor.open(http.responseText);\r\n            }\r\n        }\r\n    };\r\n    http.send(JSON.stringify(content));\r\n});\r\n```","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>Regarding the query, &quot;however, I need to process images at backend.&quot; Please refer to the below code snippet.</p>\n<p>Process flow:</p>\n<ol>\n<li>Using the <code>DocIO</code> component, we are creating a Word document and inserting the image tag.</li>\n<li>The created document is sent to <code>DocumentEditor</code> for opening.</li>\n</ol>\n<pre class=\"lang-cs prettyprint-override\"><code>public string OpenImage()\n{\n    //Loads the template document\n    WDocument document = new WDocument();\n    document.EnsureMinimal();\n    document.HTMLImportSettings.ImageNodeVisited += OpenImage;\n    //Html string to be inserted\n    string html = &quot;&lt;img src=\\&quot;https://www.w3schools.com/tags/img_girl.jpg\\&quot;/&gt;&quot;;\n    //Validates the Html string\n    bool isValidHtml = document.LastSection.Body.IsValidXHTML(html, Syncfusion.DocIO.DLS.XHTMLValidationType.None);\n    //When the Html string passes validation, it is inserted to the document\n    if (isValidHtml)\n    {\n\n        //Appends the Html string to first paragraph in the document\n        document.Sections[0].Body.Paragraphs[0].AppendHTML(html);\n    }\n    document.HTMLImportSettings.ImageNodeVisited -= OpenImage;\n    //Hooks MetafileImageParsed event.\n    WordDocument.MetafileImageParsed += OnMetafileImageParsed;\n    WordDocument document1 = WordDocument.Load(document);\n    document1.OptimizeSfdt = false;\n    //Unhooks MetafileImageParsed event.\n    WordDocument.MetafileImageParsed -= OnMetafileImageParsed;\n    string json = Newtonsoft.Json.JsonConvert.SerializeObject(document1);\n    document.Dispose();\n    return json;\n}\n\n/// &lt;summary&gt;\n/// Event handler to download the image from website.\n/// &lt;/summary&gt;\nprivate static void OpenImage(object sender, Syncfusion.DocIO.DLS.ImageNodeVisitedEventArgs args)\n{\n    //Check whether image src is mentioned as website URL.\n    if (args.Uri.StartsWith(&quot;https://&quot;))\n    {\n        WebClient client = new WebClient();\n        //Download the image as stream.\n        byte[] image = client.DownloadData(args.Uri);\n        Stream stream = new MemoryStream(image);\n        //Set the retrieved image from the input HTML.\n        args.ImageStream = stream;\n    }\n}\n\n//Converts Metafile to raster image.\nprivate static void OnMetafileImageParsed(object sender, MetafileImageParsedEventArgs args)\n{\n    System.Drawing.Image img = System.Drawing.Image.FromStream(args.MetafileStream);\n    //You can write your own method definition for converting metafile to raster image using any third-party image converter.\n    args.ImageStream = ConvertMetafileToRasterImage(args.MetafileStream);\n}\n\nprivate static Stream ConvertMetafileToRasterImage(Stream ImageStream)\n{\n    //Here we are loading a default raster image as fallback.\n    Stream imgStream = GetManifestResourceStream(&quot;ImageNotFound.jpg&quot;);\n    return imgStream;\n\n    //To do : Write your own logic for converting metafile to raster image using any third-party image converter(Syncfusion doesn't provide any image converter).\n}\n</code></pre>\n<p>On the client side, you can call the above mentioned web action <code>OpenImage</code> and use the Open API.</p>\n<pre class=\"lang-js prettyprint-override\"><code>//Initialize Document Editor Container component.\nlet container: DocumentEditorContainer = new DocumentEditorContainer();\n\ncontainer.appendTo('#DocumentEditorContainer');\n\ndocument.getElementById('import').addEventListener('click', () =&gt; {\n    let http: XMLHttpRequest = new XMLHttpRequest();\n    //add your url in which you want to open document inside the &quot;&quot;\n    let content = { fileUrl: &quot;&quot; };\n    let baseurl: string = &quot;/api/documenteditor/OpenImage&quot;;\n    http.open(&quot;POST&quot;, baseurl, true);\n    http.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;);\n    http.onreadystatechange = () =&gt; {\n        if (http.readyState === 4) {\n            if (http.status === 200 || http.status === 304) {\n                //open the SFDT text in Document Editor\n                container.documentEditor.open(http.responseText);\n            }\n        }\n    };\n    http.send(JSON.stringify(content));\n});\n</code></pre>\n"}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76589652,"answer_count":3,"score":0,"last_activity_date":1690289164,"creation_date":1688127923,"question_id":76588899,"body_markdown":"I am struggling with syncfusion Document Editor. If I serialize an image and its content is in format base64 I am able to see the image in the document. However if the source of the image\r\nis its URL the Document Editor show an image indicating that it was unable to render the image or just doesn&#39;t find it. This is the code that I am using to transform from html to sfdt:\r\n```java\r\n\tpublic static String htmlToSfdt(String html) throws Exception {\r\n\t\thtml = &quot;&lt;img src=\\&quot;http://localhost:8080/app/resources/rtf/1/test.001.png\\&quot;/&gt;&quot;;\r\n\t\tbyte[] bytes = html.getBytes(StandardCharsets.UTF_8);\r\n\t\tInputStream stream = new ByteArrayInputStream(bytes);\t\t\r\n\t\tString sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\r\n\t\tstream.close();\r\n\t\treturn sfdt;\r\n\t}\r\n```\r\nThen I pass this sfdt to the DocumentEditor and get \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5frCc.png","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>I am struggling with syncfusion Document Editor. If I serialize an image and its content is in format base64 I am able to see the image in the document. However if the source of the image\nis its URL the Document Editor show an image indicating that it was unable to render the image or just doesn't find it. This is the code that I am using to transform from html to sfdt:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static String htmlToSfdt(String html) throws Exception {\n        html = &quot;&lt;img src=\\&quot;http://localhost:8080/app/resources/rtf/1/test.001.png\\&quot;/&gt;&quot;;\n        byte[] bytes = html.getBytes(StandardCharsets.UTF_8);\n        InputStream stream = new ByteArrayInputStream(bytes);       \n        String sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\n        stream.close();\n        return sfdt;\n    }\n</code></pre>\n<p>Then I pass this sfdt to the DocumentEditor and get\n<a href=\"https://i.stack.imgur.com/5frCc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5frCc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1684758572,"post_id":76305897,"comment_id":134559062,"body_markdown":"That is an hint that you have a wrong configuration in your build... either inherited through parent or alike... Please check the log output ...because I suppose it will be executed at least two times... etc.  Reference: https://lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p Link to the appropriate issue: https://issues.apache.org/jira/browse/MSOURCES-121","body":"That is an hint that you have a wrong configuration in your build... either inherited through parent or alike... Please check the log output ...because I suppose it will be executed at least two times... etc.  Reference: <a href=\"https://lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p\" rel=\"nofollow noreferrer\">lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p</a> Link to the appropriate issue: <a href=\"https://issues.apache.org/jira/browse/MSOURCES-121\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSOURCES-121</a>"},{"owner":{"account_id":4560293,"reputation":751,"user_id":3702839,"display_name":"Joao Esperancinha"},"score":0,"creation_date":1684787097,"post_id":76305897,"comment_id":134565184,"body_markdown":"I found exactly the same error: https://github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/5050076108/jobs/9060326828?pr=53. I have no idea even where to start.","body":"I found exactly the same error: <a href=\"https://github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/5050076108/jobs/9060326828?pr=53\" rel=\"nofollow noreferrer\">github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/&hellip;</a>&zwnj;&#8203;. I have no idea even where to start."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1684957639,"post_id":76305897,"comment_id":134595188,"body_markdown":"I had the same error happening to me. Turns out I had specified both the `jar` and the `jar-no-fork` goals...","body":"I had the same error happening to me. Turns out I had specified both the <code>jar</code> and the <code>jar-no-fork</code> goals..."},{"owner":{"account_id":125910,"reputation":1106,"user_id":322017,"accept_rate":67,"display_name":"Nicolas"},"score":0,"creation_date":1685009972,"post_id":76305897,"comment_id":134602286,"body_markdown":"I&#39;m also encountering this issue which is a result of https://issues.apache.org/jira/browse/MSOURCES-121. Unfortuanately I don&#39;t have enough information to understand if that&#39;s a bug in my pom or in the plugin.","body":"I&#39;m also encountering this issue which is a result of <a href=\"https://issues.apache.org/jira/browse/MSOURCES-121\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSOURCES-121</a>. Unfortuanately I don&#39;t have enough information to understand if that&#39;s a bug in my pom or in the plugin."},{"owner":{"account_id":5969893,"reputation":972,"user_id":4692517,"display_name":"rmbrad"},"score":0,"creation_date":1685073602,"post_id":76305897,"comment_id":134613314,"body_markdown":"Had same error, was due to `shade` plugin with `createSourcesJar` running before source plugin. Fixed by moving `maven-source-plugin:jar` to `package` phase ([Usage](https://maven.apache.org/plugins/maven-source-plugin/usage.html) docs has it set to `verify`.)","body":"Had same error, was due to <code>shade</code> plugin with <code>createSourcesJar</code> running before source plugin. Fixed by moving <code>maven-source-plugin:jar</code> to <code>package</code> phase (<a href=\"https://maven.apache.org/plugins/maven-source-plugin/usage.html\" rel=\"nofollow noreferrer\">Usage</a> docs has it set to <code>verify</code>.)"}],"answers":[{"tags":[],"owner":{"account_id":28678692,"reputation":1,"user_id":21960318,"display_name":"Jos&#233; Fernandes"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1685018832,"creation_date":1685018832,"answer_id":76332433,"question_id":76305897,"body_markdown":"I had the same problem yesterday and I solved adding this in my pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n       &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;3.2.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n       &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;3.2.1&lt;/version&gt;\t\t\t\t\r\n    &lt;/plugin&gt;","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>I had the same problem yesterday and I solved adding this in my pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n   &lt;version&gt;3.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n   &lt;version&gt;3.2.1&lt;/version&gt;             \n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685599966,"creation_date":1685599966,"answer_id":76379125,"question_id":76305897,"body_markdown":"Had the same issue after upgrading from `3.2.1` to `3.3.0`.\r\n\r\nThe error was resolved after changing the `goal` from `jar` to `jar-no-fork`:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3.0&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;attach-sources&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;jar-no-fork&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>Had the same issue after upgrading from <code>3.2.1</code> to <code>3.3.0</code>.</p>\n<p>The error was resolved after changing the <code>goal</code> from <code>jar</code> to <code>jar-no-fork</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;attach-sources&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jar-no-fork&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12073168,"reputation":1,"user_id":8827775,"display_name":"Zach"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1686165360,"creation_date":1686164622,"answer_id":76426353,"question_id":76305897,"body_markdown":"If you&#39;re encountering difficulties with your pom configuration and need a workaround, you can skip the maven-source-plugin (this will prevent &#39;artifact-sources.jar&#39; deployment) by utilizing the **&#39;-Dmaven.source.skip&#39;** parameter in your mvn command.\r\n\r\n mvn help:describe -Dplugin=org.apache.maven.plugins:maven-source-plugin\r\n  &gt;Available parameters:\r\n    &lt;br&gt;skipSource (Default: false)&lt;/br&gt;\r\n      &lt;br&gt;User property: maven.source.skip&lt;/br&gt;\r\nA flag used to disable the source procedure. &lt;br&gt;This is primarily intended\r\n      for usage from the command line to occasionally adjust the build.\r\n\r\n\r\nFor versions of the &#39;maven-source-plugin&#39; up to 2.4, you should use &#39;-Dsource.skip&#39;.&lt;br&gt;For version 3.0.0 and later, employ &#39;-Dmaven.source.skip&#39; instead.&lt;/br&gt;\r\n","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>If you're encountering difficulties with your pom configuration and need a workaround, you can skip the maven-source-plugin (this will prevent 'artifact-sources.jar' deployment) by utilizing the <strong>'-Dmaven.source.skip'</strong> parameter in your mvn command.</p>\n<p>mvn help:describe -Dplugin=org.apache.maven.plugins:maven-source-plugin</p>\n<blockquote>\n<p>Available parameters:\n<br>skipSource (Default: false)\n<br>User property: maven.source.skip\nA flag used to disable the source procedure. <br>This is primarily intended\nfor usage from the command line to occasionally adjust the build.</p>\n</blockquote>\n<p>For versions of the 'maven-source-plugin' up to 2.4, you should use '-Dsource.skip'.<br>For version 3.0.0 and later, employ '-Dmaven.source.skip' instead.</p>\n"},{"tags":[],"owner":{"account_id":4515229,"reputation":384,"user_id":3670285,"display_name":"user3670285"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690289152,"creation_date":1690289152,"answer_id":76762846,"question_id":76305897,"body_markdown":"Since `3.3.0` the duplicate check will also fails build when multiple lifecycle phase which are bound to the `jar-no-fork` goal of the sources plugin are given on the command line. For example\r\n\r\n    # mvn package install\r\n    # mvn install deploy\r\n\r\nThe solution is to simply avoid the unnecessary lifecycle phase:\r\n\r\n    # mvn install\r\n    # mvn deploy\r\n\r\n\r\nHowever, upgrading to `maven-sources-plugin` **3.3.0** will break quite a number of build I presume.\r\n\r\n\r\n","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>Since <code>3.3.0</code> the duplicate check will also fails build when multiple lifecycle phase which are bound to the <code>jar-no-fork</code> goal of the sources plugin are given on the command line. For example</p>\n<pre><code># mvn package install\n# mvn install deploy\n</code></pre>\n<p>The solution is to simply avoid the unnecessary lifecycle phase:</p>\n<pre><code># mvn install\n# mvn deploy\n</code></pre>\n<p>However, upgrading to <code>maven-sources-plugin</code> <strong>3.3.0</strong> will break quite a number of build I presume.</p>\n"}],"owner":{"account_id":25686844,"reputation":189,"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3984,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":4,"score":11,"last_activity_date":1690289152,"creation_date":1684756380,"question_id":76305897,"body_markdown":"I recently upgraded the maven-source-plugin version in my project from 3.2.1 to 3.3.0 and now I am encountering the following error during the build process:\r\n\r\n&gt; Failed to execute goal org.apache.maven.plugins:maven-source-plugin:3.3.0:jar (attach-sources) on project xxx: Presumably you have configured maven-source-plugn to execute twice times in your build. You have to configure a classifier for at least on of them. -&gt; [Help 1] \r\n\r\nIt seems that this error is related to the fact that the maven-source-plugin has changed its behavior in version 3.3.0 to prevent the attach-sources goal from being executed multiple times during the build. However, I can&#39;t find any doc or release note related to this feature that may cause this incompatibility problem.\r\n\r\nI want to know where I can find the official documentation and what the purpose of this new feature is? Thanks~","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>I recently upgraded the maven-source-plugin version in my project from 3.2.1 to 3.3.0 and now I am encountering the following error during the build process:</p>\n<blockquote>\n<p>Failed to execute goal org.apache.maven.plugins:maven-source-plugin:3.3.0:jar (attach-sources) on project xxx: Presumably you have configured maven-source-plugn to execute twice times in your build. You have to configure a classifier for at least on of them. -&gt; [Help 1]</p>\n</blockquote>\n<p>It seems that this error is related to the fact that the maven-source-plugin has changed its behavior in version 3.3.0 to prevent the attach-sources goal from being executed multiple times during the build. However, I can't find any doc or release note related to this feature that may cause this incompatibility problem.</p>\n<p>I want to know where I can find the official documentation and what the purpose of this new feature is? Thanks~</p>\n"},{"tags":["java","android","kotlin","android-studio"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":0,"creation_date":1690292318,"post_id":76762833,"comment_id":135330813,"body_markdown":"Is that on the emulator? or do you feel that on real devices?","body":"Is that on the emulator? or do you feel that on real devices?"},{"owner":{"account_id":21165874,"reputation":681,"user_id":16342700,"display_name":"Abhishek Vashishtha_IBS"},"score":0,"creation_date":1690352023,"post_id":76762833,"comment_id":135339445,"body_markdown":"yes, I tested on the real device this happened when I used TextWatcher.","body":"yes, I tested on the real device this happened when I used TextWatcher."}],"owner":{"account_id":21165874,"reputation":681,"user_id":16342700,"display_name":"Abhishek Vashishtha_IBS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690289038,"creation_date":1690289038,"question_id":76762833,"body_markdown":"I mentioned my bottom sheet edit text code and image please help me! I do not understand what&#39;s going wrong with my code!\r\n\r\nSoftkeypad not working but visible with black light shadow\r\n\r\nMY XML File\r\n\r\n``` \r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.view.dashboard.home.FullPageBottomSheetFragment&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_margin=&quot;20dp&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n        &lt;EditText\r\n            android:id=&quot;@+id/textSearch&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:background=&quot;@drawable/black_border&quot;\r\n            android:gravity=&quot;top|start&quot;\r\n            android:focusable=&quot;true&quot;\r\n            android:hint=&quot;@string/search_friends&quot;\r\n            android:inputType=&quot;textMultiLine&quot;\r\n            android:lines=&quot;1&quot;\r\n            android:padding=&quot;10dp&quot;\r\n            android:scrollbars=&quot;vertical&quot;\r\n            android:textColor=&quot;@android:color/black&quot;\r\n            android:textSize=&quot;14sp&quot; /&gt;\r\n        &lt;ImageView\r\n            android:layout_width=&quot;35dp&quot;\r\n            android:layout_height=&quot;35dp&quot;\r\n            android:layout_marginStart=&quot;10dp&quot;\r\n            android:src=&quot;@drawable/search_icon&quot;/&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/recyclerViewFriends&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;700dp&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n ```\r\n\r\nMy Fragment Code\r\n``` \r\npublic class FullPageBottomSheetFragment extends BottomSheetDialogFragment/* implements TextWatcher*/ {\r\n    private FragmentFullPageBottomSheetBinding binding;\r\n    private RecyclerView recyclerViewFriends; // Add this line \r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        binding = FragmentFullPageBottomSheetBinding.inflate(inflater, container, false);\r\n        \r\n\r\n        // Request focus to the EditText to show the soft keypad\r\n        binding.textSearch.setFocusableInTouchMode(true);\r\n        binding.textSearch.requestFocus();\r\n//        binding.textSearch.addTextChangedListener(this);\r\n\r\n        return binding.getRoot();\r\n    }\r\n}\r\n ```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r0FJX.jpg\r\n\r\nThis type of error i seen first time in my carrer please help me for fix my code.","title":"In BottomSheetFragment When i clicked on EditText field then show disabled Softkeypad In android Java","body":"<p>I mentioned my bottom sheet edit text code and image please help me! I do not understand what's going wrong with my code!</p>\n<p>Softkeypad not working but visible with black light shadow</p>\n<p>MY XML File</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.view.dashboard.home.FullPageBottomSheetFragment&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;20dp&quot;\n        android:gravity=&quot;center_vertical&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n        &lt;EditText\n            android:id=&quot;@+id/textSearch&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:background=&quot;@drawable/black_border&quot;\n            android:gravity=&quot;top|start&quot;\n            android:focusable=&quot;true&quot;\n            android:hint=&quot;@string/search_friends&quot;\n            android:inputType=&quot;textMultiLine&quot;\n            android:lines=&quot;1&quot;\n            android:padding=&quot;10dp&quot;\n            android:scrollbars=&quot;vertical&quot;\n            android:textColor=&quot;@android:color/black&quot;\n            android:textSize=&quot;14sp&quot; /&gt;\n        &lt;ImageView\n            android:layout_width=&quot;35dp&quot;\n            android:layout_height=&quot;35dp&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:src=&quot;@drawable/search_icon&quot;/&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/recyclerViewFriends&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;700dp&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>My Fragment Code</p>\n<pre><code>public class FullPageBottomSheetFragment extends BottomSheetDialogFragment/* implements TextWatcher*/ {\n    private FragmentFullPageBottomSheetBinding binding;\n    private RecyclerView recyclerViewFriends; // Add this line \n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        binding = FragmentFullPageBottomSheetBinding.inflate(inflater, container, false);\n        \n\n        // Request focus to the EditText to show the soft keypad\n        binding.textSearch.setFocusableInTouchMode(true);\n        binding.textSearch.requestFocus();\n//        binding.textSearch.addTextChangedListener(this);\n\n        return binding.getRoot();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/r0FJX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r0FJX.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This type of error i seen first time in my carrer please help me for fix my code.</p>\n"},{"tags":["java","eclipse","swt","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690269643,"post_id":76759969,"comment_id":135325797,"body_markdown":"Looks like that list is shown by `org.eclipse.e4.ui.internal.workbench.renderers.swt.BasicPartList` which doesn&#39;t seem to have a simple way to change the font. For an RCP you could perhaps use a custom `StackRenderer` extending the standard one and override `showAvailableItems`","body":"Looks like that list is shown by <code>org.eclipse.e4.ui.internal.workbench.renderers.swt.BasicPart&zwnj;&#8203;List</code> which doesn&#39;t seem to have a simple way to change the font. For an RCP you could perhaps use a custom <code>StackRenderer</code> extending the standard one and override <code>showAvailableItems</code>"},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690277816,"post_id":76759969,"comment_id":135327568,"body_markdown":"@greg-449 i tried overriding showAvailableItems but from there I am still not able to access the font size. How can i do that ?","body":"@greg-449 i tried overriding showAvailableItems but from there I am still not able to access the font size. How can i do that ?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690278459,"post_id":76759969,"comment_id":135327693,"body_markdown":"You use CSS classes and ids to specify the font of controls. You can use something like `StyledCellLabelProvider` in a table to deal with bold etc.","body":"You use CSS classes and ids to specify the font of controls. You can use something like <code>StyledCellLabelProvider</code> in a table to deal with bold etc."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690280469,"post_id":76759969,"comment_id":135328125,"body_markdown":"@greg-449 what to do with StyledCellLabelProvider?? i have tried with css as well but I am not able to figure out which table it is and what changes should i make","body":"@greg-449 what to do with StyledCellLabelProvider?? i have tried with css as well but I am not able to figure out which table it is and what changes should i make"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690281756,"post_id":76759969,"comment_id":135328342,"body_markdown":"You are going to have to write a replacement for BasicPartList and use all that stuff in the replacement","body":"You are going to have to write a replacement for BasicPartList and use all that stuff in the replacement"},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690283207,"post_id":76759969,"comment_id":135328635,"body_markdown":"@greg-449 which funtion of BasicPartList should i override to change the font size","body":"@greg-449 which funtion of BasicPartList should i override to change the font size"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690285203,"post_id":76759969,"comment_id":135329049,"body_markdown":"No idea, study the source.","body":"No idea, study the source."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690354179,"post_id":76759969,"comment_id":135339846,"body_markdown":"@greg-449 none of the functions of basicPartList is helping with the font size","body":"@greg-449 none of the functions of basicPartList is helping with the font size"}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690288882,"creation_date":1690266503,"question_id":76759969,"body_markdown":"![Image for your reference](https://i.stack.imgur.com/vMiXH.png)\r\n\r\nHow can I change the font size of this overflowed tabs drop down list present in eclipse ide.\r\nList is marked in the image.\r\n\r\nI want to change the font size of this drop-down list.\r\nI tried using PartImpl and stackRenderer files, but not able to find any approach.","title":"How to change font size for overflowed tabs drop down list of Eclipse IDE","body":"<p><img src=\"https://i.stack.imgur.com/vMiXH.png\" alt=\"Image for your reference\" /></p>\n<p>How can I change the font size of this overflowed tabs drop down list present in eclipse ide.\nList is marked in the image.</p>\n<p>I want to change the font size of this drop-down list.\nI tried using PartImpl and stackRenderer files, but not able to find any approach.</p>\n"},{"tags":["java","spring","spring-boot","gradle","build.gradle"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672982703,"post_id":75027108,"comment_id":132400319,"body_markdown":"Spring Boot 3 need Java 17,  ( https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0 ) , `Upgrade to Java 17`","body":"Spring Boot 3 need Java 17,  ( <a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0</a> ) , <code>Upgrade to Java 17</code>"},{"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"score":0,"creation_date":1672983630,"post_id":75027108,"comment_id":132400450,"body_markdown":"Yes, I know that... The project uses Java 11 and that&#39;s why I have springBootPluginVersion = &#39;2.7.6&#39;  in the build file.","body":"Yes, I know that... The project uses Java 11 and that&#39;s why I have springBootPluginVersion = &#39;2.7.6&#39;  in the build file."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672984817,"post_id":75027108,"comment_id":132400643,"body_markdown":"Your Error Message is :`/repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!`","body":"Your Error Message is :<code>&#47;repository&#47;org&#47;springframework&#47;boot&#47;spring-boot&#47;3.0.1&#47;spri&zwnj;&#8203;ng-boot-3.0.1.jar!</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":2,"creation_date":1672984896,"post_id":75027108,"comment_id":132400652,"body_markdown":"Try `gradle clean`","body":"Try <code>gradle clean</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672985186,"post_id":75027108,"comment_id":132400693,"body_markdown":"In IntelliJ, Gradle Tab, select your project , popmenu `Reload Gradle Project`","body":"In IntelliJ, Gradle Tab, select your project , popmenu <code>Reload Gradle Project</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672985605,"post_id":75027108,"comment_id":132400764,"body_markdown":"In IntelliJ, Gradle Tab, select your project , popup menu `Analyze Dependencies`, check your  Dependencies , spring boot version","body":"In IntelliJ, Gradle Tab, select your project , popup menu <code>Analyze Dependencies</code>, check your  Dependencies , spring boot version"},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":0,"creation_date":1673033930,"post_id":75027108,"comment_id":132414441,"body_markdown":"springboot plugin version (like other plugins) cannot be set from properties inside the `build.gradle` file AFAIK. can you share your build script section where you actually apply the springboot plugin ?  something like ` plugins {   id  &quot;org.springframework.boot&quot; version &quot;??????&quot; }","body":"springboot plugin version (like other plugins) cannot be set from properties inside the <code>build.gradle</code> file AFAIK. can you share your build script section where you actually apply the springboot plugin ?  something like ` plugins {   id  &quot;org.springframework.boot&quot; version &quot;??????&quot; }"},{"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"score":0,"creation_date":1673218465,"post_id":75027108,"comment_id":132443190,"body_markdown":"I have tried &#39;gradle clean&#39;, reloading the project, and analyzing dependencies many times. At some point. one of them worked and I dont get that error anymore .. Thank you @life888888","body":"I have tried &#39;gradle clean&#39;, reloading the project, and analyzing dependencies many times. At some point. one of them worked and I dont get that error anymore .. Thank you @life888888"}],"answers":[{"tags":[],"owner":{"account_id":12819605,"reputation":21,"user_id":9275036,"display_name":"Sujith Jeewantha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690288398,"creation_date":1690288398,"answer_id":76762747,"question_id":75027108,"body_markdown":"change the version as below\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;","title":"Java: cannot access org.springframework.boot.SpringApplication","body":"<p>change the version as below</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.2&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n"}],"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":963,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1690288398,"creation_date":1672981389,"question_id":75027108,"body_markdown":"I am getting this error when I try to start the Spring Boot Application:\r\n\r\n**java: cannot access org.springframework.boot.SpringApplication   bad class file: /repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!/org/springframework/boot/SpringApplication.class**\r\n*class file has wrong version 61.0, should be 55.0* \r\n*Please remove or make sure it appears in the correct subdirectory of the classpath.*\r\n\r\nI had a look at the below SO question and it looks like this error happens when the Spring Boot version is 3.0.1. But I dont have that version mentioned in the build.gradle file.\r\n\r\nhttps://stackoverflow.com/questions/73679679/java-cannot-access-org-springframework-boot-springapplication-bad-class-file\r\n\r\nhere is the build.gradle file portion:\r\n\r\n        springCloudVersion = &#39;2021.0.3&#39;\r\n        springBootPluginVersion = &#39;2.7.6&#39;\r\n        sonarQubePluginVersion = &#39;3.3&#39;\r\n        gatlingPluginVersion = &#39;3.8.4&#39;\r\n        nebulaPublishingPluginVersion = &#39;18.4.0&#39;\r\n        nebulaReleasePluginVersion = &#39;16.0.0&#39;\r\n        jasyptSpringBootStarterVersion = &#39;3.0.4&#39;\r\n\r\nUsing Java 11.\r\n\r\nI can also see that every time I build the project in IntelliJ, a spring boot 3.0.1 jar and its folder are created under the repository mentioned above ( even if I delete it). I can&#39;t see where is that version coming from. Any pointers will be greatly appreciated.\r\n","title":"Java: cannot access org.springframework.boot.SpringApplication","body":"<p>I am getting this error when I try to start the Spring Boot Application:</p>\n<p><strong>java: cannot access org.springframework.boot.SpringApplication   bad class file: /repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!/org/springframework/boot/SpringApplication.class</strong>\n<em>class file has wrong version 61.0, should be 55.0</em>\n<em>Please remove or make sure it appears in the correct subdirectory of the classpath.</em></p>\n<p>I had a look at the below SO question and it looks like this error happens when the Spring Boot version is 3.0.1. But I dont have that version mentioned in the build.gradle file.</p>\n<p><a href=\"https://stackoverflow.com/questions/73679679/java-cannot-access-org-springframework-boot-springapplication-bad-class-file\">java: cannot access org.springframework.boot.SpringApplication bad class file</a></p>\n<p>here is the build.gradle file portion:</p>\n<pre><code>    springCloudVersion = '2021.0.3'\n    springBootPluginVersion = '2.7.6'\n    sonarQubePluginVersion = '3.3'\n    gatlingPluginVersion = '3.8.4'\n    nebulaPublishingPluginVersion = '18.4.0'\n    nebulaReleasePluginVersion = '16.0.0'\n    jasyptSpringBootStarterVersion = '3.0.4'\n</code></pre>\n<p>Using Java 11.</p>\n<p>I can also see that every time I build the project in IntelliJ, a spring boot 3.0.1 jar and its folder are created under the repository mentioned above ( even if I delete it). I can't see where is that version coming from. Any pointers will be greatly appreciated.</p>\n"},{"tags":["java","android","google-cloud-platform","google-drive-api"],"comments":[{"owner":{"account_id":2122531,"reputation":363,"user_id":2425668,"display_name":"Radiance Wei Qi Ong"},"score":0,"creation_date":1690251662,"post_id":76757498,"comment_id":135323906,"body_markdown":"1. Please show the code that you have tried (see https://stackoverflow.com/help/minimal-reproducible-example) 2. What you are expecting to happen if the code is right 3. What you are actually getting (show the error output as much as possible)","body":"1. Please show the code that you have tried (see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>) 2. What you are expecting to happen if the code is right 3. What you are actually getting (show the error output as much as possible)"},{"owner":{"account_id":2803423,"reputation":1,"user_id":2411193,"display_name":"Edemir Santos de Paula"},"score":0,"creation_date":1690288302,"post_id":76757498,"comment_id":135329735,"body_markdown":"@RadianceWeiQiOng added my mainActivity code do the question. I only need to show user file list. After I get the data I will be able to deal with showing wherever I want. My problem is all auth, api and oauth.","body":"@RadianceWeiQiOng added my mainActivity code do the question. I only need to show user file list. After I get the data I will be able to deal with showing wherever I want. My problem is all auth, api and oauth."},{"owner":{"account_id":2122531,"reputation":363,"user_id":2425668,"display_name":"Radiance Wei Qi Ong"},"score":0,"creation_date":1690336630,"post_id":76757498,"comment_id":135338019,"body_markdown":"You should add the full stack trace (with the line numbers) so that we can tell where the problem originated. Anyway it is likely that you are making network calls on the main thread. You should do it in another thread using ExecutorService or similar (https://developer.android.com/reference/java/util/concurrent/ExecutorService). You can search android.os.NetworkOnMainThreadException for more info (but note that old answers would recommend old way of using another thread e.g. AsyncTask)","body":"You should add the full stack trace (with the line numbers) so that we can tell where the problem originated. Anyway it is likely that you are making network calls on the main thread. You should do it in another thread using ExecutorService or similar (<a href=\"https://developer.android.com/reference/java/util/concurrent/ExecutorService\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/util/concurrent/&hellip;</a>). You can search android.os.NetworkOnMainThreadException for more info (but note that old answers would recommend old way of using another thread e.g. AsyncTask)"}],"owner":{"account_id":2803423,"reputation":1,"user_id":2411193,"display_name":"Edemir Santos de Paula"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690288253,"creation_date":1690226801,"question_id":76757498,"body_markdown":"I&#39;m having trouble fetching the user&#39;s Google Drive files to display them in my Android application. I&#39;ve been trying for about 5 days now, and I&#39;ve read a lot of documentation before asking for help here, but I just can&#39;t figure out how to get the authentication to fetch user data from Drive.\r\n\r\nI&#39;ve tried various methods, one of which involved creating an application on Google Cloud, enabling the Google Drive API, generating the credentials.json file in OAuth, and adding it to my project, but it didn&#39;t work.\r\n\r\nI also attempted the quickstart available on the website https://developers.google.com/drive/api/quickstart/java?hl=pt-br, but it doesn&#39;t seem to work for Android applications.\r\n\r\nI followed the documentation provided on this page without success: https://github.com/googleapis/google-auth-library-java\r\n\r\nAccording to the documentation above, it should be as simple as:\r\n\r\n```\r\nGoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(&quot;/path/to/credentials.json&quot;));\r\ncredentials.refreshIfExpired();\r\nAccessToken token = credentials.getAccessToken();\r\n```\r\n\r\nAlso tried this example without success: https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\r\n\r\nHowever, I&#39;m getting numerous errors that I honestly can&#39;t understand.\r\n\r\nDo I need to have a backend server to make these requests?\r\n\r\nMy application is already connecting to Firebase with Google authentication; all I want is to fetch the list of files from the Drive.\r\n\r\nSorry for being such a noob but I&#39;m just starting on android development.\r\n\r\nI appreciate the help.\r\n\r\nI also attempted the quickstart available on the website https://developers.google.com/drive/api/quickstart/java?hl=pt-br, but it doesn&#39;t seem to work for Android applications.\r\n\r\nI followed the documentation provided on this page without success: https://github.com/googleapis/google-auth-library-java\r\n\r\nAlso tried this example without success: https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\r\n\r\n\r\nI need my android app, after the user logged in, list his google drive files.\r\n\r\nHere&#39;s my mainActivity.java, only Firebase login is working.\r\n\r\n    package com.example.app;\r\n    \r\n    import static java.lang.System.in;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.provider.MediaStore;\r\n    import android.util.Log;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.app.ActivityCompat;\r\n    \r\n    \r\n    import com.google.android.gms.common.api.internal.GoogleApiManager;\r\n    import com.google.api.client.auth.oauth2.Credential;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\n    import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\n    import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\n    import com.google.api.client.http.javanet.NetHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.gson.GsonFactory;\r\n    import com.google.api.client.util.store.FileDataStoreFactory;\r\n    import com.google.auth.oauth2.GoogleCredentials;\r\n    \r\n    import com.google.api.services.sheets.v4.Sheets;\r\n    import com.google.api.services.sheets.v4.SheetsScopes;\r\n    import com.google.api.services.sheets.v4.model.ValueRange;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.security.GeneralSecurityException;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * Nothing actually happens here.  This is only here so I know it installed on the phone for\r\n     * to test with.  Normally there won&#39;t be one at all.\r\n     */\r\n    \r\n    public class mainActivity extends AppCompatActivity {\r\n    \r\n        private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n        private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\r\n        \r\n        private static final String APPLICATION_NAME = &quot;Widget Sheet&quot;;\r\n    \r\n        private static File folder;\r\n    \r\n        private static final List&lt;String&gt; SCOPES =\r\n                Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\r\n    \r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            //Abre a tela de in&#237;cio com as instru&#231;&#245;es\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.inicio);\r\n    \r\n            try {\r\n                  isStoragePermissionGranted();\r\n    \r\n                  folder = getDir(&quot;tokens&quot;, Context.MODE_PRIVATE);\r\n    \r\n                  listFiles();\r\n                  \r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (GeneralSecurityException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n            // Iniciar o processo de login com Firebase\r\n            FirebaseLoginHelper.startFirebaseLogin(this);\r\n        }\r\n    \r\n        public static void listFiles() throws IOException, GeneralSecurityException {\r\n            // Build a new authorized API client service.\r\n            final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n            final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\r\n            final String range = &quot;Class Data!A2:E&quot;;\r\n            Sheets service =\r\n                    new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\r\n                            .setApplicationName(APPLICATION_NAME)\r\n                            .build();\r\n            ValueRange response = service.spreadsheets().values()\r\n                    .get(spreadsheetId, range)\r\n                    .execute();\r\n            List&lt;List&lt;Object&gt;&gt; values = response.getValues();\r\n            if (values == null || values.isEmpty()) {\r\n                System.out.println(&quot;No data found.&quot;);\r\n            } else {\r\n                System.out.println(&quot;Name, Major&quot;);\r\n                for (List row : values) {\r\n                    // Print columns A and E, which correspond to indices 0 and 4.\r\n                    System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\r\n                }\r\n            }\r\n        }\r\n    \r\n        public  boolean isStoragePermissionGranted() {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                if (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                        == PackageManager.PERMISSION_GRANTED) {\r\n                    Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\r\n                    return true;\r\n                } else {\r\n                    Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is revoked&quot;);\r\n                    ActivityCompat.requestPermissions(this, new String[]{\r\n                            android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n                    return false;\r\n                }\r\n            }\r\n            else { //permission is automatically granted on sdk&lt;23 upon installation\r\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\r\n                throws IOException {\r\n            // Load client secrets.\r\n            InputStream in = mainActivity.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n            if (in == null) {\r\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n            }\r\n            GoogleClientSecrets clientSecrets =\r\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n    \r\n    \r\n    \r\n            // Build flow and trigger user authorization request.\r\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                    .setDataStoreFactory(new FileDataStoreFactory(folder))\r\n                    .setAccessType(&quot;offline&quot;)\r\n                    .build();\r\n    \r\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n        }\r\n    \r\n        // Tratar o resultado do login usando Firebase\r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            FirebaseLoginHelper.handleLoginResult(requestCode, resultCode, data);\r\n            \r\n        }\r\n    \r\n        // Tratar a resposta da solicita&#231;&#227;o de permiss&#227;o para o Google Drive\r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode,\r\n                                               @NonNull String[] permissions,\r\n                                               @NonNull int[] grantResults) {\r\n    \r\n            Log.w(&quot;Drive&quot;,&quot;Solicitado&quot;);\r\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        }\r\n    }\r\n\r\n\r\nError presented: \r\n\r\n&gt; java.lang.RuntimeException: Unable to start activity\r\n&gt; ComponentInfo{com.example.app/com.example.app.mainActivity}:\r\n&gt; android.os.NetworkOnMainThreadException","title":"How to List files from user Google Drive in my android application?","body":"<p>I'm having trouble fetching the user's Google Drive files to display them in my Android application. I've been trying for about 5 days now, and I've read a lot of documentation before asking for help here, but I just can't figure out how to get the authentication to fetch user data from Drive.</p>\n<p>I've tried various methods, one of which involved creating an application on Google Cloud, enabling the Google Drive API, generating the credentials.json file in OAuth, and adding it to my project, but it didn't work.</p>\n<p>I also attempted the quickstart available on the website <a href=\"https://developers.google.com/drive/api/quickstart/java?hl=pt-br\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/quickstart/java?hl=pt-br</a>, but it doesn't seem to work for Android applications.</p>\n<p>I followed the documentation provided on this page without success: <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-auth-library-java</a></p>\n<p>According to the documentation above, it should be as simple as:</p>\n<pre><code>GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(&quot;/path/to/credentials.json&quot;));\ncredentials.refreshIfExpired();\nAccessToken token = credentials.getAccessToken();\n</code></pre>\n<p>Also tried this example without success: <a href=\"https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\" rel=\"nofollow noreferrer\">https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation</a></p>\n<p>However, I'm getting numerous errors that I honestly can't understand.</p>\n<p>Do I need to have a backend server to make these requests?</p>\n<p>My application is already connecting to Firebase with Google authentication; all I want is to fetch the list of files from the Drive.</p>\n<p>Sorry for being such a noob but I'm just starting on android development.</p>\n<p>I appreciate the help.</p>\n<p>I also attempted the quickstart available on the website <a href=\"https://developers.google.com/drive/api/quickstart/java?hl=pt-br\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/quickstart/java?hl=pt-br</a>, but it doesn't seem to work for Android applications.</p>\n<p>I followed the documentation provided on this page without success: <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-auth-library-java</a></p>\n<p>Also tried this example without success: <a href=\"https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\" rel=\"nofollow noreferrer\">https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation</a></p>\n<p>I need my android app, after the user logged in, list his google drive files.</p>\n<p>Here's my mainActivity.java, only Firebase login is working.</p>\n<pre><code>package com.example.app;\n\nimport static java.lang.System.in;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.provider.MediaStore;\nimport android.util.Log;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\n\n\nimport com.google.android.gms.common.api.internal.GoogleApiManager;\nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.auth.oauth2.GoogleCredentials;\n\nimport com.google.api.services.sheets.v4.Sheets;\nimport com.google.api.services.sheets.v4.SheetsScopes;\nimport com.google.api.services.sheets.v4.model.ValueRange;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * Nothing actually happens here.  This is only here so I know it installed on the phone for\n * to test with.  Normally there won't be one at all.\n */\n\npublic class mainActivity extends AppCompatActivity {\n\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n    private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\n    \n    private static final String APPLICATION_NAME = &quot;Widget Sheet&quot;;\n\n    private static File folder;\n\n    private static final List&lt;String&gt; SCOPES =\n            Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\n\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        //Abre a tela de incio com as instrues\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.inicio);\n\n        try {\n              isStoragePermissionGranted();\n\n              folder = getDir(&quot;tokens&quot;, Context.MODE_PRIVATE);\n\n              listFiles();\n              \n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (GeneralSecurityException e) {\n            throw new RuntimeException(e);\n        }\n\n        // Iniciar o processo de login com Firebase\n        FirebaseLoginHelper.startFirebaseLogin(this);\n    }\n\n    public static void listFiles() throws IOException, GeneralSecurityException {\n        // Build a new authorized API client service.\n        final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n        final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\n        final String range = &quot;Class Data!A2:E&quot;;\n        Sheets service =\n                new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\n                        .setApplicationName(APPLICATION_NAME)\n                        .build();\n        ValueRange response = service.spreadsheets().values()\n                .get(spreadsheetId, range)\n                .execute();\n        List&lt;List&lt;Object&gt;&gt; values = response.getValues();\n        if (values == null || values.isEmpty()) {\n            System.out.println(&quot;No data found.&quot;);\n        } else {\n            System.out.println(&quot;Name, Major&quot;);\n            for (List row : values) {\n                // Print columns A and E, which correspond to indices 0 and 4.\n                System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\n            }\n        }\n    }\n\n    public  boolean isStoragePermissionGranted() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\n                return true;\n            } else {\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is revoked&quot;);\n                ActivityCompat.requestPermissions(this, new String[]{\n                        android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n                return false;\n            }\n        }\n        else { //permission is automatically granted on sdk&lt;23 upon installation\n            Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\n            return true;\n        }\n    }\n\n    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\n            throws IOException {\n        // Load client secrets.\n        InputStream in = mainActivity.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n        if (in == null) {\n            throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n        }\n        GoogleClientSecrets clientSecrets =\n                GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n\n\n        // Build flow and trigger user authorization request.\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                .setDataStoreFactory(new FileDataStoreFactory(folder))\n                .setAccessType(&quot;offline&quot;)\n                .build();\n\n        LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n        return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n    }\n\n    // Tratar o resultado do login usando Firebase\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        FirebaseLoginHelper.handleLoginResult(requestCode, resultCode, data);\n        \n    }\n\n    // Tratar a resposta da solicitao de permisso para o Google Drive\n    @Override\n    public void onRequestPermissionsResult(int requestCode,\n                                           @NonNull String[] permissions,\n                                           @NonNull int[] grantResults) {\n\n        Log.w(&quot;Drive&quot;,&quot;Solicitado&quot;);\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    }\n}\n</code></pre>\n<p>Error presented:</p>\n<blockquote>\n<p>java.lang.RuntimeException: Unable to start activity\nComponentInfo{com.example.app/com.example.app.mainActivity}:\nandroid.os.NetworkOnMainThreadException</p>\n</blockquote>\n"},{"tags":["java","eclipse","egit","jgit","vcs-checkout"],"comments":[{"owner":{"account_id":74748,"reputation":3592,"user_id":214626,"accept_rate":82,"display_name":"panzerschreck"},"score":0,"creation_date":1410241006,"post_id":25737269,"comment_id":40240938,"body_markdown":"Conflict occurs when your changes cannot be merged with what is coming in because the changes are essentially on the same line. You have two options either to revert your change or manually merge the changes and commit it later.","body":"Conflict occurs when your changes cannot be merged with what is coming in because the changes are essentially on the same line. You have two options either to revert your change or manually merge the changes and commit it later."},{"owner":{"account_id":291009,"reputation":9437,"user_id":592898,"accept_rate":60,"display_name":"Frederic Close"},"score":0,"creation_date":1410242167,"post_id":25737269,"comment_id":40241330,"body_markdown":"http://wiki.eclipse.org/EGit/User_Guide : have a look at section &#39;Resolving a merge conflict&#39;","body":"<a href=\"http://wiki.eclipse.org/EGit/User_Guide\" rel=\"nofollow noreferrer\">wiki.eclipse.org/EGit/User_Guide</a> : have a look at section &#39;Resolving a merge conflict&#39;"}],"answers":[{"tags":[],"owner":{"account_id":910393,"reputation":1619,"user_id":1384748,"display_name":"Breand&#225;n Dalton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601504966,"creation_date":1410267862,"answer_id":25745409,"question_id":25737269,"body_markdown":"You must [manually resolve the conflict](http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution) by incorporating your partner&#39;s change into your code and committing the manually merged file.\r\n\r\nAlternatively, if your changes aren&#39;t too complex, you may revert (throw away) your changes to that file, update your code to pick up your partner&#39;s changes, and then redo your work. \r\n\r\n\r\nSee http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>You must <a href=\"http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\" rel=\"nofollow noreferrer\">manually resolve the conflict</a> by incorporating your partner's change into your code and committing the manually merged file.</p>\n<p>Alternatively, if your changes aren't too complex, you may revert (throw away) your changes to that file, update your code to pick up your partner's changes, and then redo your work.</p>\n<p>See <a href=\"http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\" rel=\"nofollow noreferrer\">http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution</a></p>\n"},{"tags":[],"owner":{"account_id":1789513,"reputation":3771,"user_id":1630244,"accept_rate":55,"display_name":"chrisinmtown"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435579911,"creation_date":1435579911,"answer_id":31115392,"question_id":25737269,"body_markdown":"Do you have uncommitted changes in the file that&#39;s in your working copy? Or is your working copy clean? The EGit documentation guides you thru the latter scenario.\r\n\r\nIn my experience, the error dialog posted by @lmray is what EGit shows when a local working copy has uncommitted changes.  EGit wishes to merge in information from the remote but I&#39;m told it will not modify a dirty working copy.  To proceed, you must first commit your changes locally, giving you a fallback point, then request merge again.  The merge should then produce a merged file, hopefully without any conflicts.\r\n\r\nThanks to @B. Dalton for trying to straighten me out - my dirty working copy file had uncommitted changes, and a local git wizard explained things.\r\n\r\nDigression: this is a mental adjustment if you (like me) were used to working with SVN, which would happily pull remote changes into a dirty local working file.  Not saying that was better, just that git works differently. I&#39;m still struggling to convert my SVN-trained intuition over to suitable expectations for Git.","title":"Checkout conflict with files. How do I proceed?","body":"<p>Do you have uncommitted changes in the file that's in your working copy? Or is your working copy clean? The EGit documentation guides you thru the latter scenario.</p>\n\n<p>In my experience, the error dialog posted by @lmray is what EGit shows when a local working copy has uncommitted changes.  EGit wishes to merge in information from the remote but I'm told it will not modify a dirty working copy.  To proceed, you must first commit your changes locally, giving you a fallback point, then request merge again.  The merge should then produce a merged file, hopefully without any conflicts.</p>\n\n<p>Thanks to @B. Dalton for trying to straighten me out - my dirty working copy file had uncommitted changes, and a local git wizard explained things.</p>\n\n<p>Digression: this is a mental adjustment if you (like me) were used to working with SVN, which would happily pull remote changes into a dirty local working file.  Not saying that was better, just that git works differently. I'm still struggling to convert my SVN-trained intuition over to suitable expectations for Git.</p>\n"},{"tags":[],"owner":{"account_id":6152006,"reputation":534,"user_id":4796172,"accept_rate":86,"display_name":"Pushkin"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1526912843,"creation_date":1459940558,"answer_id":36449204,"question_id":25737269,"body_markdown":"I faced this issue today and below solution works for me.\r\n\r\n1. Do a git stash. This will consolidate all your local and conflicting changes. \r\n2. Do a git pull now\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>I faced this issue today and below solution works for me.</p>\n\n<ol>\n<li>Do a git stash. This will consolidate all your local and conflicting changes. </li>\n<li>Do a git pull now</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2735009,"reputation":4764,"user_id":2357869,"accept_rate":33,"display_name":"Vijay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595247238,"creation_date":1595245653,"answer_id":62994728,"question_id":25737269,"body_markdown":"In Eclipse :-\r\n\r\n1) Right click -&gt; click on &#39;add to index&#39;\r\n\r\nAdd conflict file in staged area\r\n\r\n2) Right Click -&gt;click on commit \r\n\r\nAdd conflict file in local repository\r\n\r\n3) Pull\r\n\r\nYou will get all changes (change in remote repository and local repository)\r\n\r\nChanges mentioned as Head(**&lt;&lt;&lt;&lt;&lt;&lt; HEAD**) is your change, Changes mentioned in branch(**&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch**) is other person change, you can update file accordingly. \r\n\r\n4) Right click -&gt;click on add to index\r\n\r\n5) Right click -&gt; commit and push\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>In Eclipse :-</p>\n<ol>\n<li>Right click -&gt; click on 'add to index'</li>\n</ol>\n<p>Add conflict file in staged area</p>\n<ol start=\"2\">\n<li>Right Click -&gt;click on commit</li>\n</ol>\n<p>Add conflict file in local repository</p>\n<ol start=\"3\">\n<li>Pull</li>\n</ol>\n<p>You will get all changes (change in remote repository and local repository)</p>\n<p>Changes mentioned as Head(<strong>&lt;&lt;&lt;&lt;&lt;&lt; HEAD</strong>) is your change, Changes mentioned in branch(<strong>&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch</strong>) is other person change, you can update file accordingly.</p>\n<ol start=\"4\">\n<li><p>Right click -&gt;click on add to index</p>\n</li>\n<li><p>Right click -&gt; commit and push</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13770490,"reputation":107,"user_id":9938083,"display_name":"Sudhir Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287888,"creation_date":1690287888,"answer_id":76762682,"question_id":25737269,"body_markdown":"Follow this steps,\r\n**Step1:**\r\nIf you are using Windows OS, Use gitbash tool .\r\nIf you are using MAC OS, use terminal.\r\n**Step2:** Go to your git project location using \r\n#cd &lt;patch_of_project&gt;\r\n**Step3:** #git stash\r\n**step4:** #git pull\r\n**step5:** #git stash apply \r\n**Step6 :** resolve conflict manually by this ,\r\nChanges mentioned as Head(&lt;&lt;&lt;&lt;&lt;&lt; HEAD) is your change, Changes mentioned in branch(&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch) is other person change, you can update file accordingly.\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>Follow this steps,\n<strong>Step1:</strong>\nIf you are using Windows OS, Use gitbash tool .\nIf you are using MAC OS, use terminal.\n<strong>Step2:</strong> Go to your git project location using\n#cd &lt;patch_of_project&gt;\n<strong>Step3:</strong> #git stash\n<strong>step4:</strong> #git pull\n<strong>step5:</strong> #git stash apply\n<strong>Step6 :</strong> resolve conflict manually by this ,\nChanges mentioned as Head(&lt;&lt;&lt;&lt;&lt;&lt; HEAD) is your change, Changes mentioned in branch(&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch) is other person change, you can update file accordingly.</p>\n"}],"owner":{"account_id":1848986,"reputation":22324,"user_id":1675976,"accept_rate":59,"display_name":"CodyBugstein"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59390,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1690287888,"creation_date":1410240759,"question_id":25737269,"body_markdown":"I just pulled some changes from a remote repository holding my teams project.\r\n\r\nThis is the message I received on pull:\r\n\r\n![Checkout Conflict][1]\r\n\r\n\r\nApparently, one of my partners made changed to the same file as me. \r\n\r\nHow do I proceed from here? The message is very vague. Was there an error? Do I have to undo what I did? Does he have to? \r\n\r\n  [1]: http://i.stack.imgur.com/g8J24.jpg","title":"Checkout conflict with files. How do I proceed?","body":"<p>I just pulled some changes from a remote repository holding my teams project.</p>\n\n<p>This is the message I received on pull:</p>\n\n<p><img src=\"https://i.stack.imgur.com/g8J24.jpg\" alt=\"Checkout Conflict\"></p>\n\n<p>Apparently, one of my partners made changed to the same file as me. </p>\n\n<p>How do I proceed from here? The message is very vague. Was there an error? Do I have to undo what I did? Does he have to? </p>\n"},{"tags":["java","forms","authentication","vaadin","vaadin-flow"],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287653,"creation_date":1690287653,"answer_id":76762655,"question_id":76754954,"body_markdown":"&gt; public class LoginView extends LoginOverlay \r\n\r\nVaadin does **not** mandate that you need to extend `LoginOverlay` or `LoginForm` in your LoginView. These two components are basic implementations for such view, which can be used to reduce boiler plate when applicable. They are not meant to be applicable in 100% of the cases, but the common ones. You can compose your LoginView anyway you want using more elementary components and you can define it with template using TypeScript or fully compose the view with Java.\r\n","title":"Vaadin Custom Login Form","body":"<blockquote>\n<p>public class LoginView extends LoginOverlay</p>\n</blockquote>\n<p>Vaadin does <strong>not</strong> mandate that you need to extend <code>LoginOverlay</code> or <code>LoginForm</code> in your LoginView. These two components are basic implementations for such view, which can be used to reduce boiler plate when applicable. They are not meant to be applicable in 100% of the cases, but the common ones. You can compose your LoginView anyway you want using more elementary components and you can define it with template using TypeScript or fully compose the view with Java.</p>\n"}],"owner":{"account_id":28083954,"reputation":41,"user_id":21454599,"display_name":"bc_tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690287653,"creation_date":1690205094,"question_id":76754954,"body_markdown":"my colleagues and I have created a UI with Vaadin23 and it also contains the default Vaadin Login Form from the Tutorial/ Vaadin Starter Application:\r\n\r\n    public class LoginView extends LoginOverlay implements BeforeEnterObserver {\r\n\r\n    private final AuthenticatedUser authenticatedUser;\r\n\r\n    public LoginView(AuthenticatedUser authenticatedUser) {\r\n        this.authenticatedUser = authenticatedUser;\r\n        setAction(RouteUtil.getRoutePath(VaadinService.getCurrent().getContext(), getClass()));\r\n        LoginI18n i18n = LoginI18n.createDefault();\r\n        i18n.setHeader(new LoginI18n.Header());\r\n        i18n.setAdditionalInformation(null);\r\n        setI18n(i18n);\r\n        setForgotPasswordButtonVisible(false);\r\n        setOpened(true);\r\n      }\r\n      // ...\r\n    }\r\nSince we require a different way of logging in, we need to use a custom login form.\r\nThe problem is, that we cannot edit the Vaadin standard login form but we&#39;d like to keep the security mechanism for now. We also understand the basic process of the login mechanism. Filling out the form which starts the firing of a LoginEvent within the AbstractLogin class.\r\n\r\nOur login form should contain a *Select* field containing the users, a password field that only uses a NumPad to enter a pin code and a Login Button to submit the form.\r\nHow do we have to configure a custom login form in order to connect to the security functionality?\r\n\r\nPossible Vaadin LoginForm in Typescript (The styling attributes come from copy&amp;pasting and can be ignored). Help for implementing the TypeScript component as well as the connected Java View class is greatly appreciated.\r\n```\r\n    &lt;vaadin-vertical-layout style=&quot;width: 100%; height: 100%;&quot; class=&quot;content&quot;&gt;\r\n\t  &lt;vaadin-vertical-layout theme=&quot;spacing&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;\r\n\t    &lt;vaadin-form-layout id=&quot;login-form&quot;&gt;\r\n\t      &lt;vaadin-select label=&quot;User&quot; id=&quot;username-select&quot;&gt;&lt;/vaadin-select&gt;\r\n\t      &lt;vaadin-password-field label=&quot;Password&quot; id=&quot;password-field&quot;&gt;&lt;/vaadin-password-field&gt;\r\n\t      &lt;vaadin-button theme=&quot;primary error&quot; tabindex=&quot;0&quot; id=&quot;login-button&quot;&gt;\r\n      \t    Login \r\n          &lt;/vaadin-button&gt;\r\n\t    &lt;/vaadin-form-layout&gt;\r\n\t  &lt;/vaadin-vertical-layout&gt;\r\n\t&lt;/vaadin-vertical-layout&gt;\r\n```\r\n\r\nI can also provide additional information if needed.\r\n\r\nThis is the code of the Vaadin Tutorial. \r\n\r\nAuthenticatedUser.class\r\n  ```\r\n  @Component\r\n  public class AuthenticatedUser {\r\n    private final UserRepository userRepository;\r\n\r\n    private final AuthenticationContext authenticationContext;\r\n\r\n    public AuthenticatedUser(AuthenticationContext authenticationContext, UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n        this.authenticationContext = authenticationContext;\r\n    }\r\n\r\n    public Optional&lt;User&gt; get() {\r\n        return authenticationContext.getAuthenticatedUser(UserDetails.class)\r\n                .map(userDetails -&gt; userRepository.findByUsername(userDetails.getUsername()));\r\n    }\r\n\r\n    public void logout() {\r\n        authenticationContext.logout();\r\n    }\r\n\r\n  }\r\n```\r\n\r\nSecurityConfiguration.class\r\n```\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfiguration extends VaadinWebSecurity {\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http.authorizeRequests().requestMatchers(new AntPathRequestMatcher(&quot;/images/*.png&quot;)).permitAll();\r\n        super.configure(http);\r\n        setLoginView(http, LoginView.class);\r\n    }\r\n}\r\n```\r\n\r\nUserDetailsServiceImpl.class\r\n```\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    public UserDetailsServiceImpl(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    private static List&lt;GrantedAuthority&gt; getAuthorities(User user) {\r\n        return user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\r\n                .collect(Collectors.toList());\r\n\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepository.findByUsername(username);\r\n        if (user == null) {\r\n            throw new UsernameNotFoundException(&quot;No user present with username: &quot; + username);\r\n        }\r\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getHashedPassword(),\r\n                getAuthorities(user));\r\n    }\r\n\r\n}\r\n```","title":"Vaadin Custom Login Form","body":"<p>my colleagues and I have created a UI with Vaadin23 and it also contains the default Vaadin Login Form from the Tutorial/ Vaadin Starter Application:</p>\n<pre><code>public class LoginView extends LoginOverlay implements BeforeEnterObserver {\n\nprivate final AuthenticatedUser authenticatedUser;\n\npublic LoginView(AuthenticatedUser authenticatedUser) {\n    this.authenticatedUser = authenticatedUser;\n    setAction(RouteUtil.getRoutePath(VaadinService.getCurrent().getContext(), getClass()));\n    LoginI18n i18n = LoginI18n.createDefault();\n    i18n.setHeader(new LoginI18n.Header());\n    i18n.setAdditionalInformation(null);\n    setI18n(i18n);\n    setForgotPasswordButtonVisible(false);\n    setOpened(true);\n  }\n  // ...\n}\n</code></pre>\n<p>Since we require a different way of logging in, we need to use a custom login form.\nThe problem is, that we cannot edit the Vaadin standard login form but we'd like to keep the security mechanism for now. We also understand the basic process of the login mechanism. Filling out the form which starts the firing of a LoginEvent within the AbstractLogin class.</p>\n<p>Our login form should contain a <em>Select</em> field containing the users, a password field that only uses a NumPad to enter a pin code and a Login Button to submit the form.\nHow do we have to configure a custom login form in order to connect to the security functionality?</p>\n<p>Possible Vaadin LoginForm in Typescript (The styling attributes come from copy&amp;pasting and can be ignored). Help for implementing the TypeScript component as well as the connected Java View class is greatly appreciated.</p>\n<pre><code>    &lt;vaadin-vertical-layout style=&quot;width: 100%; height: 100%;&quot; class=&quot;content&quot;&gt;\n      &lt;vaadin-vertical-layout theme=&quot;spacing&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;\n        &lt;vaadin-form-layout id=&quot;login-form&quot;&gt;\n          &lt;vaadin-select label=&quot;User&quot; id=&quot;username-select&quot;&gt;&lt;/vaadin-select&gt;\n          &lt;vaadin-password-field label=&quot;Password&quot; id=&quot;password-field&quot;&gt;&lt;/vaadin-password-field&gt;\n          &lt;vaadin-button theme=&quot;primary error&quot; tabindex=&quot;0&quot; id=&quot;login-button&quot;&gt;\n            Login \n          &lt;/vaadin-button&gt;\n        &lt;/vaadin-form-layout&gt;\n      &lt;/vaadin-vertical-layout&gt;\n    &lt;/vaadin-vertical-layout&gt;\n</code></pre>\n<p>I can also provide additional information if needed.</p>\n<p>This is the code of the Vaadin Tutorial.</p>\n<p>AuthenticatedUser.class</p>\n<pre><code>@Component\npublic class AuthenticatedUser {\n  private final UserRepository userRepository;\n\n  private final AuthenticationContext authenticationContext;\n\n  public AuthenticatedUser(AuthenticationContext authenticationContext, UserRepository userRepository) {\n      this.userRepository = userRepository;\n      this.authenticationContext = authenticationContext;\n  }\n\n  public Optional&lt;User&gt; get() {\n      return authenticationContext.getAuthenticatedUser(UserDetails.class)\n              .map(userDetails -&gt; userRepository.findByUsername(userDetails.getUsername()));\n  }\n\n  public void logout() {\n      authenticationContext.logout();\n  }\n\n}\n</code></pre>\n<p>SecurityConfiguration.class</p>\n<pre><code>@EnableWebSecurity\n@Configuration\npublic class SecurityConfiguration extends VaadinWebSecurity {\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.authorizeRequests().requestMatchers(new AntPathRequestMatcher(&quot;/images/*.png&quot;)).permitAll();\n        super.configure(http);\n        setLoginView(http, LoginView.class);\n    }\n}\n</code></pre>\n<p>UserDetailsServiceImpl.class</p>\n<pre><code>@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    public UserDetailsServiceImpl(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    private static List&lt;GrantedAuthority&gt; getAuthorities(User user) {\n        return user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\n                .collect(Collectors.toList());\n\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username);\n        if (user == null) {\n            throw new UsernameNotFoundException(&quot;No user present with username: &quot; + username);\n        }\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getHashedPassword(),\n                getAuthorities(user));\n    }\n\n}\n</code></pre>\n"},{"tags":["java","compression","unzip","7zip"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690209823,"post_id":76755220,"comment_id":135317864,"body_markdown":"Try `char[] pass = password.toCharArray();`","body":"Try <code>char[] pass = password.toCharArray();</code>"},{"owner":{"account_id":29080944,"reputation":1,"user_id":22276987,"display_name":"Pintu"},"score":0,"creation_date":1690211668,"post_id":76755220,"comment_id":135318305,"body_markdown":"Only accepting byte for file","body":"Only accepting byte for file"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690212151,"post_id":76755220,"comment_id":135318417,"body_markdown":"Using an old version? That came in 1.17","body":"Using an old version? That came in 1.17"}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287621,"creation_date":1690287621,"answer_id":76762650,"question_id":76755220,"body_markdown":"You asked for,\r\n&gt; Unzipping 7z files with password.\r\n\r\nOne practice to so is to use [Apache Compress Library][1], i recommand to use [try, catch with-resources][2] statement to automatically close streams.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    public static void unzip(File file, String password) throws IOException {\r\n        try (SevenZFile sevenZFile = new SevenZFile(file, password.getBytes())) {\r\n            SevenZArchiveEntry archive = null;\r\n            while ((archive = sevenZFile.getNextEntry()) != null) {\r\n                if (archive.isDirectory()) continue;\r\n                File outputFile = new File(archive.getName());\r\n                try (OutputStream outputStream = new FileOutputStream(outputFile)) {\r\n                    sevenZFile.transferTo(outputStream);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nFinally i used `transferTo()` method of the `SevenZFile` object to copy the contents of the entry directly to the output stream, instead of reading and writing the contents byte-by-byte, its more efficient and faster,\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"Java code for unzip 7z file with password","body":"<p>You asked for,</p>\n<blockquote>\n<p>Unzipping 7z files with password.</p>\n</blockquote>\n<p>One practice to so is to use <a href=\"https://commons.apache.org/proper/commons-compress/\" rel=\"nofollow noreferrer\">Apache Compress Library</a>, i recommand to use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try, catch with-resources</a> statement to automatically close streams.</p>\n\n<pre><code>public static void unzip(File file, String password) throws IOException {\n    try (SevenZFile sevenZFile = new SevenZFile(file, password.getBytes())) {\n        SevenZArchiveEntry archive = null;\n        while ((archive = sevenZFile.getNextEntry()) != null) {\n            if (archive.isDirectory()) continue;\n            File outputFile = new File(archive.getName());\n            try (OutputStream outputStream = new FileOutputStream(outputFile)) {\n                sevenZFile.transferTo(outputStream);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Finally i used <code>transferTo()</code> method of the <code>SevenZFile</code> object to copy the contents of the entry directly to the output stream, instead of reading and writing the contents byte-by-byte, its more efficient and faster,</p>\n"}],"owner":{"account_id":29080944,"reputation":1,"user_id":22276987,"display_name":"Pintu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690287621,"creation_date":1690207103,"question_id":76755220,"body_markdown":"I have tried to unzip the 7z file in Java code but I&#39;m getting &quot;Bad 7z signature&quot;\r\n\r\nAny suggestions would be helpful..\r\n\r\nI&#39;ve used UTF-16LE and UTF-16 both throwing same error\r\n\r\nBelow is the code that Ive tried \r\n_----_----+++-\r\n\r\npublic void SevenZFile(String directory, String encryptCompressFileName, String password) {\r\n\r\n        SevenZFile sevenZFile = null;\r\n        SevenZArchiveEntry entry = null;\r\n\r\n        try {\r\n\r\n            File file = new File(directory+encryptCompressFileName);\r\n            byte[] inputData = new byte[(int) file.length()];\r\n            FileInputStream fis = new FileInputStream(file);\r\n            fis.read(inputData);\r\n            fis.close();\r\n\r\n            // SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(inputData);\r\n            if(null != password){\r\n                byte[] pass = password.getBytes(&quot;UTF16&quot;);\r\n                sevenZFile = new SevenZFile(file, pass);\r\n            }else{\r\n                sevenZFile = new SevenZFile(file);\r\n            }\r\n\r\n            // Go through all entries\r\n            while (null != (entry = sevenZFile.getNextEntry())) {\r\n\r\n                // Maybe filter by name. Name can contain a path.\r\n                String processingFileName = entry.getName();\r\n                if (entry.isDirectory()) {\r\n                    System.out.println(String.format(&quot;Found directory entry %s&quot;, processingFileName));\r\n\r\n                } else {\r\n\r\n                    // If this is a file, we read the file content into a ByteArrayOutputStream ...\r\n                    System.out.println(String.format(&quot;Unpacking start %s ...&quot;, processingFileName));\r\n                    ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\r\n\r\n                    // ... using a small buffer byte array.\r\n                    byte[] buffer = new byte[2048];\r\n                    int bytesRead;\r\n\r\n                    while ((bytesRead = sevenZFile.read(buffer)) != -1) {\r\n                        contentBytes.write(buffer, 0, bytesRead);\r\n                    }\r\n\r\n\r\n                 FileOutputStream fileOut = new FileOutputStream(directory+processingFileName);\r\n                        fileOut.write(contentBytes.toByteArray());\r\n                        fileOut.flush();\r\n                        wb.write(fileOut);\r\n                        fileOut.close();\r\n                        wb.close();\r\n                    }else{ //regular file\r\n                        System.out.println(contentBytes.toString(&quot;UTF-8&quot;));\r\n                    }\r\n                    System.out.println(String.format(&quot;Unpacking finish %s ...&quot;, processingFileName));   \r\n                }\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                sevenZFile.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    }\r\n","title":"Java code for unzip 7z file with password","body":"<p>I have tried to unzip the 7z file in Java code but I'm getting &quot;Bad 7z signature&quot;</p>\n<p>Any suggestions would be helpful..</p>\n<p>I've used UTF-16LE and UTF-16 both throwing same error</p>\n<p>Below is the code that Ive tried\n<em>----</em>----+++-</p>\n<p>public void SevenZFile(String directory, String encryptCompressFileName, String password) {</p>\n<pre><code>    SevenZFile sevenZFile = null;\n    SevenZArchiveEntry entry = null;\n\n    try {\n\n        File file = new File(directory+encryptCompressFileName);\n        byte[] inputData = new byte[(int) file.length()];\n        FileInputStream fis = new FileInputStream(file);\n        fis.read(inputData);\n        fis.close();\n\n        // SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(inputData);\n        if(null != password){\n            byte[] pass = password.getBytes(&quot;UTF16&quot;);\n            sevenZFile = new SevenZFile(file, pass);\n        }else{\n            sevenZFile = new SevenZFile(file);\n        }\n\n        // Go through all entries\n        while (null != (entry = sevenZFile.getNextEntry())) {\n\n            // Maybe filter by name. Name can contain a path.\n            String processingFileName = entry.getName();\n            if (entry.isDirectory()) {\n                System.out.println(String.format(&quot;Found directory entry %s&quot;, processingFileName));\n\n            } else {\n\n                // If this is a file, we read the file content into a ByteArrayOutputStream ...\n                System.out.println(String.format(&quot;Unpacking start %s ...&quot;, processingFileName));\n                ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\n\n                // ... using a small buffer byte array.\n                byte[] buffer = new byte[2048];\n                int bytesRead;\n\n                while ((bytesRead = sevenZFile.read(buffer)) != -1) {\n                    contentBytes.write(buffer, 0, bytesRead);\n                }\n\n\n             FileOutputStream fileOut = new FileOutputStream(directory+processingFileName);\n                    fileOut.write(contentBytes.toByteArray());\n                    fileOut.flush();\n                    wb.write(fileOut);\n                    fileOut.close();\n                    wb.close();\n                }else{ //regular file\n                    System.out.println(contentBytes.toString(&quot;UTF-8&quot;));\n                }\n                System.out.println(String.format(&quot;Unpacking finish %s ...&quot;, processingFileName));   \n            }\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            sevenZFile.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","windows","utf-8","character-encoding","console"],"comments":[{"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"score":0,"creation_date":1405602896,"post_id":24803733,"comment_id":38501101,"body_markdown":"`System.out` encodes bytes using the [default encoding](http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--). Sometimes this is even the encoding used by the console.","body":"<code>System.out</code> encodes bytes using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\" rel=\"nofollow noreferrer\">default encoding</a>. Sometimes this is even the encoding used by the console."},{"owner":{"account_id":2103510,"reputation":25631,"user_id":1870481,"accept_rate":56,"display_name":"michas"},"score":0,"creation_date":1405603391,"post_id":24803733,"comment_id":38501478,"body_markdown":"But why does `java Foo` output something different that `java Foo|cat`? - The default encoding should be the same.","body":"But why does <code>java Foo</code> output something different that <code>java Foo|cat</code>? - The default encoding should be the same."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1405783983,"post_id":24803733,"comment_id":38571584,"body_markdown":"did you ensure that you actually _saved_ the file using utf-8 encoding?  it&#39;s generally a bad idea to depend on source file encodings.  to be truly safe, define the string using `&quot;\\u&quot;` escapes.","body":"did you ensure that you actually <i>saved</i> the file using utf-8 encoding?  it&#39;s generally a bad idea to depend on source file encodings.  to be truly safe, define the string using <code>&quot;\\u&quot;</code> escapes."}],"answers":[{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1405783415,"creation_date":1405783415,"answer_id":24841904,"question_id":24803733,"body_markdown":"I&#39;m assuming that your console still runs under cmd.exe. I doubt your console is really expecting UTF-8 - I expect it is really an OEM DOS encoding (e.g. [850 or 437][1].)\r\n\r\nJava will encode bytes using the [default encoding][3] set during JVM initialization.\r\n\r\nReproducing on my PC:\r\n\r\n    java Foo\r\n\r\nJava encodes as windows-1252; console decodes as IBM850. Result: **Mojibake**\r\n\r\n    java -Dfile.encoding=UTF-8 Foo\r\n\r\nJava encodes as UTF-8; console decodes as IBM850. Result: **Mojibake**\r\n\r\n    cat test.txt\r\n\r\ncat decodes file as UTF-8; cat encodes as IBM850; console decodes as IBM850.\r\n\r\n    java Foo | cat\r\n\r\nJava encodes as windows-1252; cat decodes as windows-1252; cat encodes as IBM850; console decodes as IBM850\r\n\r\n    java -Dfile.encoding=UTF-8 Foo | cat\r\n\r\nJava encodes as UTF-8; cat decodes as UTF-8; cat encodes as IBM850; console decodes as IBM850\r\n\r\nThis implementation of _cat_ must use heuristics to determine if the character data is UTF-8 or not, then transcodes the data from either UTF-8 or ANSI (e.g. windows-1252) to the console encoding (e.g. IBM850.)\r\n\r\nThis can be confirmed with the following commands:\r\n\r\n    $ java HexDump utf8.txt\r\n    78 78 c3 a4 c3 b1 78 78\r\n    \r\n    $ cat utf8.txt\r\n    xx&#228;&#241;xx\r\n    \r\n    $ java HexDump ansi.txt\r\n    78 78 e4 f1 78 78\r\n    \r\n    $ cat ansi.txt\r\n    xx&#228;&#241;xx\r\n\r\nThe _cat_ command can make this determination because `e4 f1` is not a valid UTF-8 sequence.\r\n\r\nYou can correct the Java output by:\r\n\r\n - [Setting the console encoding][4] to the system ANSI value\r\n - Using the [Console][5] type\r\n - Using some [shiv layer][6] as you are doing with _cat_\r\n\r\n_HexDump_ is a trivial Java application:\r\n\r\n    import java.io.*;\r\n    class HexDump {\r\n      public static void main(String[] args) throws IOException {\r\n        try (InputStream in = new FileInputStream(args[0])) {\r\n    \t  int r;\r\n    \t  while((r = in.read()) != -1) {\r\n    \t    System.out.format(&quot;%02x &quot;, 0xFF &amp; r);\r\n    \t  }\r\n    \t  System.out.println();\r\n    \t}\r\n      }\r\n    }\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx\r\n  [2]: http://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\r\n  [4]: http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html#charsets_1252\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/io/Console.html\r\n  [6]: http://illegalargumentexception.blogspot.co.uk/2013/06/go-unicode-on-windows-command-prompt.html#gou_java","title":"Default character encoding for java console output","body":"<p>I'm assuming that your console still runs under cmd.exe. I doubt your console is really expecting UTF-8 - I expect it is really an OEM DOS encoding (e.g. <a href=\"http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx\">850 or 437</a>.)</p>\n\n<p>Java will encode bytes using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\">default encoding</a> set during JVM initialization.</p>\n\n<p>Reproducing on my PC:</p>\n\n<pre><code>java Foo\n</code></pre>\n\n<p>Java encodes as windows-1252; console decodes as IBM850. Result: <strong>Mojibake</strong></p>\n\n<pre><code>java -Dfile.encoding=UTF-8 Foo\n</code></pre>\n\n<p>Java encodes as UTF-8; console decodes as IBM850. Result: <strong>Mojibake</strong></p>\n\n<pre><code>cat test.txt\n</code></pre>\n\n<p>cat decodes file as UTF-8; cat encodes as IBM850; console decodes as IBM850.</p>\n\n<pre><code>java Foo | cat\n</code></pre>\n\n<p>Java encodes as windows-1252; cat decodes as windows-1252; cat encodes as IBM850; console decodes as IBM850</p>\n\n<pre><code>java -Dfile.encoding=UTF-8 Foo | cat\n</code></pre>\n\n<p>Java encodes as UTF-8; cat decodes as UTF-8; cat encodes as IBM850; console decodes as IBM850</p>\n\n<p>This implementation of <em>cat</em> must use heuristics to determine if the character data is UTF-8 or not, then transcodes the data from either UTF-8 or ANSI (e.g. windows-1252) to the console encoding (e.g. IBM850.)</p>\n\n<p>This can be confirmed with the following commands:</p>\n\n<pre><code>$ java HexDump utf8.txt\n78 78 c3 a4 c3 b1 78 78\n\n$ cat utf8.txt\nxxxx\n\n$ java HexDump ansi.txt\n78 78 e4 f1 78 78\n\n$ cat ansi.txt\nxxxx\n</code></pre>\n\n<p>The <em>cat</em> command can make this determination because <code>e4 f1</code> is not a valid UTF-8 sequence.</p>\n\n<p>You can correct the Java output by:</p>\n\n<ul>\n<li><a href=\"http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html#charsets_1252\">Setting the console encoding</a> to the system ANSI value</li>\n<li>Using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/Console.html\">Console</a> type</li>\n<li>Using some <a href=\"http://illegalargumentexception.blogspot.co.uk/2013/06/go-unicode-on-windows-command-prompt.html#gou_java\">shiv layer</a> as you are doing with <em>cat</em></li>\n</ul>\n\n<p><em>HexDump</em> is a trivial Java application:</p>\n\n<pre><code>import java.io.*;\nclass HexDump {\n  public static void main(String[] args) throws IOException {\n    try (InputStream in = new FileInputStream(args[0])) {\n      int r;\n      while((r = in.read()) != -1) {\n        System.out.format(\"%02x \", 0xFF &amp; r);\n      }\n      System.out.println();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2103510,"reputation":25631,"user_id":1870481,"accept_rate":56,"display_name":"michas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27234,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":24841904,"answer_count":1,"score":10,"last_activity_date":1690286844,"creation_date":1405600438,"question_id":24803733,"body_markdown":"How does Java determine the encoding used for `System.out`?\r\n\r\nGiven the following class:\r\n\r\n    import java.io.File;\r\n    import java.io.PrintWriter;\r\n    \r\n    public class Foo\r\n    {\r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            String s = &quot;xx&#228;&#241;xx&quot;;\r\n            System.out.println(s);\r\n            PrintWriter out = new PrintWriter(new File(&quot;test.txt&quot;), &quot;UTF-8&quot;);\r\n            out.println(s);\r\n            out.close();\r\n        }\r\n    }\r\n\r\nIt is saved as UTF-8 and compiled with `javac -encoding UTF-8 Foo.java` on a Windows system.\r\n\r\nAfterwards on a git-bash console (using UTF-8 charset) I do:\r\n\r\n    $ java Foo\r\n    xx&#245;&#177;xx\r\n    $ java -Dfile.encoding=UTF-8 Foo\r\n    xx&#241;xx\r\n    $ cat test.txt\r\n    xx&#228;&#241;xx\r\n    $ java Foo | cat\r\n    xx&#228;&#241;xx\r\n    $ java -Dfile.encoding=UTF-8 Foo | cat\r\n    xx&#228;&#241;xx\r\n\r\nWhat is going on here? \r\n\r\nObviously java checks if it is connected to a terminal and is changing its encoding in that case. Is there a way to force Java to simply output plain UTF-8?\r\n\r\n---\r\n\r\nI tried the same with the cmd console, too. Redirecting STDOUT does not seem to make any difference there. Without the file.encoding parameter it outputs ansi encoding with the parameter it outputs utf8 encoding.\r\n\r\n\r\n","title":"Default character encoding for java console output","body":"<p>How does Java determine the encoding used for <code>System.out</code>?</p>\n\n<p>Given the following class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.PrintWriter;\n\npublic class Foo\n{\n    public static void main(String[] args) throws Exception\n    {\n        String s = \"xxxx\";\n        System.out.println(s);\n        PrintWriter out = new PrintWriter(new File(\"test.txt\"), \"UTF-8\");\n        out.println(s);\n        out.close();\n    }\n}\n</code></pre>\n\n<p>It is saved as UTF-8 and compiled with <code>javac -encoding UTF-8 Foo.java</code> on a Windows system.</p>\n\n<p>Afterwards on a git-bash console (using UTF-8 charset) I do:</p>\n\n<pre><code>$ java Foo\nxxxx\n$ java -Dfile.encoding=UTF-8 Foo\nxxxx\n$ cat test.txt\nxxxx\n$ java Foo | cat\nxxxx\n$ java -Dfile.encoding=UTF-8 Foo | cat\nxxxx\n</code></pre>\n\n<p>What is going on here? </p>\n\n<p>Obviously java checks if it is connected to a terminal and is changing its encoding in that case. Is there a way to force Java to simply output plain UTF-8?</p>\n\n<hr>\n\n<p>I tried the same with the cmd console, too. Redirecting STDOUT does not seem to make any difference there. Without the file.encoding parameter it outputs ansi encoding with the parameter it outputs utf8 encoding.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9705,"page":287,"page_size":100}
