{"items":[{"tags":["java","object","methods","program-entry-point"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1564983034,"post_id":57352625,"comment_id":101192906,"body_markdown":"Nope, just call `new MainClass()` or whatever the main class name is.  Some example code will help.","body":"Nope, just call <code>new MainClass()</code> or whatever the main class name is.  Some example code will help."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1564983051,"post_id":57352625,"comment_id":101192912,"body_markdown":"No, it&#39;s not true that it depends on compiler.  Did you try creating an object of that class?  What happened when you did?","body":"No, it&#39;s not true that it depends on compiler.  Did you try creating an object of that class?  What happened when you did?"},{"owner":{"account_id":11448531,"reputation":665,"user_id":8391546,"display_name":"abj1305"},"score":0,"creation_date":1564984361,"post_id":57352625,"comment_id":101193230,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/2550310/can-a-main-method-of-class-be-invoked-from-another-class-in-java","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/2550310/can-a-main-method-of-class-be-invoked-from-another-class-in-java\" title=\"can a main method of class be invoked from another class in java\">stackoverflow.com/questions/2550310/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7486911,"reputation":444,"user_id":5689806,"accept_rate":50,"display_name":"Propagandian"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684364033,"creation_date":1564983783,"answer_id":57352738,"question_id":57352625,"body_markdown":"Yes, you can. The main method is just an entry point. The class is like any other, except it has an additional `public static` method. The main method is static and therefore not part of the instance of the object, but you shouldn&#39;t be using the main method anyway except for starting the program.\r\n\r\n```Java\r\npublic class Scratchpad {\r\n\r\n    public static void main(String[] args) {\r\n        Scratchpad scratchpad = new Scratchpad();\r\n        scratchpad.someMethod();\r\n    }\r\n\r\n    public Scratchpad() {\r\n    }\r\n\r\n    private void someMethod() {\r\n        System.out.println(&quot;Non-static method prints&quot;);\r\n    }\r\n}\r\n```","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Yes, you can. The main method is just an entry point. The class is like any other, except it has an additional <code>public static</code> method. The main method is static and therefore not part of the instance of the object, but you shouldn't be using the main method anyway except for starting the program.</p>\n<pre><code>public class Scratchpad {\n\n    public static void main(String[] args) {\n        Scratchpad scratchpad = new Scratchpad();\n        scratchpad.someMethod();\n    }\n\n    public Scratchpad() {\n    }\n\n    private void someMethod() {\n        System.out.println(&quot;Non-static method prints&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":264034,"reputation":134,"user_id":550037,"display_name":"Bhanu Boppana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564988032,"creation_date":1564988032,"answer_id":57353523,"question_id":57352625,"body_markdown":"Yes, you can create object for the class which has main method. There is no difference in this class and a class which don&#39;t have main method with respect to creating objects and using.","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Yes, you can create object for the class which has main method. There is no difference in this class and a class which don't have main method with respect to creating objects and using.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684373582,"creation_date":1684373582,"answer_id":76277185,"question_id":57352625,"body_markdown":"The `main` method is not limited to one class, you can place it within any class.\r\n\r\nAs for different JVM implementations having different standards, that I am unsure of.  \r\nIt doesn&#39;t sound correct, being unable to instantiate the class within itself would create constraints.\r\n\r\n```java\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        Example example = new Example();\r\n    }\r\n}\r\n```","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>The <code>main</code> method is not limited to one class, you can place it within any class.</p>\n<p>As for different JVM implementations having different standards, that I am unsure of.<br />\nIt doesn't sound correct, being unable to instantiate the class within itself would create constraints.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n    public static void main(String[] args) {\n        Example example = new Example();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7127999,"reputation":115,"user_id":5474425,"display_name":"user5474425"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6457,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1684373582,"creation_date":1564982987,"question_id":57352625,"body_markdown":"Is it possible to create object of class in which main method resides.I have been searching for this answer but I have been told that it depends on compiler some compiler will allow while others will not.Is that true?","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Is it possible to create object of class in which main method resides.I have been searching for this answer but I have been told that it depends on compiler some compiler will allow while others will not.Is that true?</p>\n"},{"tags":["java","uri","crop","onactivityresult"],"owner":{"account_id":17083164,"reputation":48,"user_id":12361104,"display_name":"Neldison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684373476,"creation_date":1684373476,"question_id":76277182,"body_markdown":"I&#39;m working on an app where user can upload three images at once but I&#39;m having problem handling the onActivityResult() method. I can Crop one image using the codes below\r\n\r\n```\r\nprivate ImageView image1; \r\n\r\n// I need to crop three images this time. image1,  image2 and image3\r\n\r\nprivate Uri imageUri; \r\n\r\n@Override\r\nprotected void onCreate(Bundle saveInstanceState) {\r\n\r\nsuper.onCreate(saveInstanceState);\r\n\r\nsetContentView(R.layout.my_layout);\r\n\r\nimage1 = findViewById(R.id.image1);\r\n\r\nimage1.setOnclickListener(new View.OnClickListener(){\r\n@Override\r\npublic void onClick(View v) {\r\nCropImage.activity().start(MyActivity.this);\r\n  }\r\n }\r\n}\r\n\r\n@Override\r\nprotected void onActivityResult(\r\nint requestCode,  int resultCode,  Intent data) {\r\nsuper.onActivityResult(requestCode, resultCode, data);\r\n\r\nif(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\r\nCropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n\r\nimageUri = result.getUri();\r\n\r\nimage1.setImageURI(imageUri);\r\n }\r\n}\r\n```\r\nMy problem now is that I want to Crop three images but I don&#39;t know how to call each one of them in onActivityResult().","title":"How To Crop Multiple Images Separately","body":"<p>I'm working on an app where user can upload three images at once but I'm having problem handling the onActivityResult() method. I can Crop one image using the codes below</p>\n<pre><code>private ImageView image1; \n\n// I need to crop three images this time. image1,  image2 and image3\n\nprivate Uri imageUri; \n\n@Override\nprotected void onCreate(Bundle saveInstanceState) {\n\nsuper.onCreate(saveInstanceState);\n\nsetContentView(R.layout.my_layout);\n\nimage1 = findViewById(R.id.image1);\n\nimage1.setOnclickListener(new View.OnClickListener(){\n@Override\npublic void onClick(View v) {\nCropImage.activity().start(MyActivity.this);\n  }\n }\n}\n\n@Override\nprotected void onActivityResult(\nint requestCode,  int resultCode,  Intent data) {\nsuper.onActivityResult(requestCode, resultCode, data);\n\nif(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\nCropImage.ActivityResult result = CropImage.getActivityResult(data);\n\nimageUri = result.getUri();\n\nimage1.setImageURI(imageUri);\n }\n}\n</code></pre>\n<p>My problem now is that I want to Crop three images but I don't know how to call each one of them in onActivityResult().</p>\n"},{"tags":["java"],"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1684372736,"creation_date":1679421053,"question_id":75804762,"body_markdown":"I have this exception while unserializing an object:\r\n\r\njava.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\r\n\r\nAt serialization, the a.b.c.BaseClass.aField does contain a List that was created like this \r\n\r\n    return List.copyOf(originalList);\r\n\r\nI have a “simple” workaround to fix the problem by changing the previous line to:\r\n\r\n    return originalList.\r\n\r\nNote that the list may be shared by multiple instances of a.b.c.BaseClass. \r\nStack:\r\n\r\n    Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\r\n    \tat java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\r\n    \tat java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\r\n    \tat java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\r\n    \tat java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\r\n    \tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\r\n    \tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\r\n    \tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n    \t… \r\n\r\nIf I break and debug at the exception point:\r\n\r\n \r\n\r\n       private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\r\n            if (obj == null) {\r\n                throw new NullPointerException();\r\n            }\r\n            for (int i = numPrimFields; i &lt; fields.length; i++) {\r\n                long key = writeKeys[i];\r\n                if (key == Unsafe.INVALID_FIELD_OFFSET) {\r\n                    continue;           // discard value\r\n                }\r\n                switch (typeCodes[i]) {\r\n                    case &#39;L&#39;, &#39;[&#39; -&gt; {\r\n                        Object val = vals[offsets[i]];\r\n                        if (val != null &amp;&amp;\r\n                            !types[i - numPrimFields].isInstance(val))\r\n                        {\r\n                            Field f = fields[i].getField();\r\n                            throw new ClassCastException(\r\n                                &quot;cannot assign instance of &quot; +\r\n                                val.getClass().getName() + &quot; to field &quot; +\r\n                                f.getDeclaringClass().getName() + &quot;.&quot; +\r\n                                f.getName() + &quot; of type &quot; +\r\n                                f.getType().getName() + &quot; in instance of &quot; +\r\n                                obj.getClass().getName());\r\n                        }\r\n                        if (!dryRun)\r\n                            unsafe.putReference(obj, key, val);\r\n                    }\r\n                    default -&gt; throw new InternalError();\r\n                }\r\n            }\r\n        }\r\n\r\nIn my scenario, \r\n\r\n- obj is an instance of a.b.c.SubClass \r\n- vals has 26 elements of    which index 17 is a CollSer \r\n- dryRun is true \r\n- The “i” value is 20.    \r\n- typecode[i] is ‘L’ \r\n- numPrimFields is 3 \r\n- offset[i] is 17    \r\n- types[i - numPrimFields] is java.util.List \r\n- val is a CollSer    (array null, tag 1 (IMM_LIST))\r\n\r\nThe line:\r\n\r\n    !types[i - numPrimFields].isInstance(val)\r\n\r\nFails because java.util.List is not an instance of java.util.CollSer\r\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer’s readResolve.\r\n\r\nAm I doing something wrong?\r\n\r\nUnfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can’t easily reproduce the error using a simple test.\r\nMy env:\r\n- openjdk version &quot;17&quot; 2021-09-14\r\n- OpenJDK Runtime Environment (build 17+35-2724)\r\n- OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)\r\n\r\n(tested with version &quot;20&quot; also)\r\n\r\nThis question is probably a duplicate of https://stackoverflow.com/q/65613929/731548\r\nthat has been flagged as answered without a real solution.\r\n\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\r\n\r\nI think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.","title":"ClassCastException when unserializing an immutable List: cannot assign instance of java.util.CollSer to field of type java.util.List","body":"<p>I have this exception while unserializing an object:</p>\n<p>java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.</p>\n<p>At serialization, the a.b.c.BaseClass.aField does contain a List that was created like this</p>\n<pre><code>return List.copyOf(originalList);\n</code></pre>\n<p>I have a “simple” workaround to fix the problem by changing the previous line to:</p>\n<pre><code>return originalList.\n</code></pre>\n<p>Note that the list may be shared by multiple instances of a.b.c.BaseClass.\nStack:</p>\n<pre><code>Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\n    at java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\n    at java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\n    at java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\n    at java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\n    at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\n    at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\n    at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\n    … \n</code></pre>\n<p>If I break and debug at the exception point:</p>\n<pre><code>   private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\n        if (obj == null) {\n            throw new NullPointerException();\n        }\n        for (int i = numPrimFields; i &lt; fields.length; i++) {\n            long key = writeKeys[i];\n            if (key == Unsafe.INVALID_FIELD_OFFSET) {\n                continue;           // discard value\n            }\n            switch (typeCodes[i]) {\n                case 'L', '[' -&gt; {\n                    Object val = vals[offsets[i]];\n                    if (val != null &amp;&amp;\n                        !types[i - numPrimFields].isInstance(val))\n                    {\n                        Field f = fields[i].getField();\n                        throw new ClassCastException(\n                            &quot;cannot assign instance of &quot; +\n                            val.getClass().getName() + &quot; to field &quot; +\n                            f.getDeclaringClass().getName() + &quot;.&quot; +\n                            f.getName() + &quot; of type &quot; +\n                            f.getType().getName() + &quot; in instance of &quot; +\n                            obj.getClass().getName());\n                    }\n                    if (!dryRun)\n                        unsafe.putReference(obj, key, val);\n                }\n                default -&gt; throw new InternalError();\n            }\n        }\n    }\n</code></pre>\n<p>In my scenario,</p>\n<ul>\n<li>obj is an instance of a.b.c.SubClass</li>\n<li>vals has 26 elements of    which index 17 is a CollSer</li>\n<li>dryRun is true</li>\n<li>The “i” value is 20.</li>\n<li>typecode[i] is ‘L’</li>\n<li>numPrimFields is 3</li>\n<li>offset[i] is 17</li>\n<li>types[i - numPrimFields] is java.util.List</li>\n<li>val is a CollSer    (array null, tag 1 (IMM_LIST))</li>\n</ul>\n<p>The line:</p>\n<pre><code>!types[i - numPrimFields].isInstance(val)\n</code></pre>\n<p>Fails because java.util.List is not an instance of java.util.CollSer\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer’s readResolve.</p>\n<p>Am I doing something wrong?</p>\n<p>Unfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can’t easily reproduce the error using a simple test.\nMy env:</p>\n<ul>\n<li>openjdk version &quot;17&quot; 2021-09-14</li>\n<li>OpenJDK Runtime Environment (build 17+35-2724)</li>\n<li>OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)</li>\n</ul>\n<p>(tested with version &quot;20&quot; also)</p>\n<p>This question is probably a duplicate of <a href=\"https://stackoverflow.com/q/65613929/731548\">Map in ActiveMQ ObjectMessage throws ClassCastException: cannot assign instance of java.util.CollSer?</a>\nthat has been flagged as answered without a real solution.</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814</a></p>\n<p>I think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.</p>\n"},{"tags":["java","oop","overriding"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1684337679,"post_id":76273764,"comment_id":134504499,"body_markdown":"If there is such an occasion it is very rare. Overriding methods goes hand in hand with polymorphism.","body":"If there is such an occasion it is very rare. Overriding methods goes hand in hand with polymorphism."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684337854,"post_id":76273764,"comment_id":134504552,"body_markdown":"Polymorphism can only be achieved when there is inheritance accompanied by overriding. Overriding is all about bringing a change and without change how can one achieve Poly-Morphism (multiple forms/outcomes during multiple instance)","body":"Polymorphism can only be achieved when there is inheritance accompanied by overriding. Overriding is all about bringing a change and without change how can one achieve Poly-Morphism (multiple forms/outcomes during multiple instance)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1684337892,"post_id":76273764,"comment_id":134504560,"body_markdown":"Subclassing can be augmentation w/o overrides, e.g., a base class provides common functionality, and subclasses extend/use that functionality without replacing it. This isn&#39;t as unusual as the preceding comments imply *(for better or worse)*. *(Whether or not subclassing is the **best** approach, then, is a separate conversation, e.g., composition may make more sense.)*","body":"Subclassing can be augmentation w/o overrides, e.g., a base class provides common functionality, and subclasses extend/use that functionality without replacing it. This isn&#39;t as unusual as the preceding comments imply <i>(for better or worse)</i>. <i>(Whether or not subclassing is the <b>best</b> approach, then, is a separate conversation, e.g., composition may make more sense.)</i>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1684337908,"post_id":76273764,"comment_id":134504567,"body_markdown":"Polymorphism is a broader concept than subclassing/overriding. Overloading, for example, also is a form of Polymorphism. Generics too.","body":"Polymorphism is a broader concept than subclassing/overriding. Overloading, for example, also is a form of Polymorphism. Generics too."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684372514,"creation_date":1684363977,"answer_id":76276679,"question_id":76273764,"body_markdown":"Overriding is only required if you&#39;re extending an `abstract` class which contains `abstract` methods, or implementing an `interface` which contains un-implemented methods.\r\n\r\nFor example, the `Object` class, which all Java classes inherently extend, includes methods that can optionally be overridden, such as `toString`.\r\n\r\nConsider the following `abstract class`.\r\n\r\n```java\r\nabstract class Example {\r\n    String stringA = &quot;stack&quot;;\r\n    String stringB = &quot;overflow&quot;;\r\n\r\n    private String methodA() {\r\n        return stringA + &quot; &quot; + stringB;\r\n    }\r\n\r\n    protected int methodB(int value) {\r\n        return value + 100;\r\n    }\r\n\r\n    public abstract int methodC(int valueA, int valueB);\r\n}\r\n```\r\n`methodA` cannot be overridden; it is marked as `private`.  \r\n`methodB` can optionally be overridden, although it is not required.  \r\n`methodC` requires an implementation, thus is overridable.\r\n\r\nInterfaces are similar.\r\n\r\n```java\r\ninterface Example {\r\n    String stringA = &quot;stack&quot;;\r\n    String stringB = &quot;overflow&quot;;\r\n\r\n    private String methodA() {\r\n        return stringA + &quot; &quot; + stringB;\r\n    }\r\n\r\n    default int methodB(int value) {\r\n        return value + 100;\r\n    }\r\n\r\n    int methodC(int valueA, int valueB);\r\n}\r\n```\r\n`methodA` cannot be overridden; it is marked as `private`.  \r\n`methodB` can optionally be overridden, although it is not required.  \r\n`methodC` requires an implementation, thus is overridable.\r\n\r\nFor more information on this topic, see https://docs.oracle.com/javase/tutorial/java/IandI/override.html.\r\n\r\nAs a way to demonstrate the polymorphism of the `interface`, consider the following two implementing classes.\r\n\r\n```java\r\nclass ExampleImplA implements Example {\r\n    @Override\r\n    public int methodC(int valueA, int valueB) {\r\n        return valueA * valueB;\r\n    }\r\n}\r\n\r\nclass ExampleImplB implements Example {\r\n    @Override\r\n    public int methodC(int valueA, int valueB) {\r\n        return valueA - valueB;\r\n    }\r\n}\r\n```\r\nNow, from another class, if you created a list of `Example`&#39;s, supplying a different implementation for each item, if you called `methodC` on each of the list items, a different implementation of `methodC` will be executed.\r\n```java\r\nvoid method() {\r\n    List&lt;Example&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(new ExampleImplA());\r\n    list.add(new ExampleImplB());\r\n    for (Example example : list)\r\n        example.methodC(1, 2);\r\n}\r\n```","title":"How i can definy the limit between polymorphism and override method?","body":"<p>Overriding is only required if you're extending an <code>abstract</code> class which contains <code>abstract</code> methods, or implementing an <code>interface</code> which contains un-implemented methods.</p>\n<p>For example, the <code>Object</code> class, which all Java classes inherently extend, includes methods that can optionally be overridden, such as <code>toString</code>.</p>\n<p>Consider the following <code>abstract class</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    protected int methodB(int value) {\n        return value + 100;\n    }\n\n    public abstract int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>Interfaces are similar.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    default int methodB(int value) {\n        return value + 100;\n    }\n\n    int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>For more information on this topic, see <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/IandI/override.html</a>.</p>\n<p>As a way to demonstrate the polymorphism of the <code>interface</code>, consider the following two implementing classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ExampleImplA implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA * valueB;\n    }\n}\n\nclass ExampleImplB implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA - valueB;\n    }\n}\n</code></pre>\n<p>Now, from another class, if you created a list of <code>Example</code>'s, supplying a different implementation for each item, if you called <code>methodC</code> on each of the list items, a different implementation of <code>methodC</code> will be executed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void method() {\n    List&lt;Example&gt; list = new ArrayList&lt;&gt;();\n    list.add(new ExampleImplA());\n    list.add(new ExampleImplB());\n    for (Example example : list)\n        example.methodC(1, 2);\n}\n</code></pre>\n"}],"owner":{"account_id":28233491,"reputation":11,"user_id":21582360,"display_name":"Arthur Bittencourt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684372514,"creation_date":1684337337,"question_id":76273764,"body_markdown":"I&#39;m studying OOP in Java, and i already understand the concepts about polymorphism and @override methods, but how one can be used without another?\r\n\r\n\r\nI would like to understand if there is an occasion of using polymorphism in which method overwriting is not used.","title":"How i can definy the limit between polymorphism and override method?","body":"<p>I'm studying OOP in Java, and i already understand the concepts about polymorphism and @override methods, but how one can be used without another?</p>\n<p>I would like to understand if there is an occasion of using polymorphism in which method overwriting is not used.</p>\n"},{"tags":["java","dns"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1684324338,"post_id":76270467,"comment_id":134501049,"body_markdown":"The SAN (subject alternative name) is the **name** of the server in the TLS (SSL is *ancient*) certificate. You can [disable hostname verification](https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification). Or you can modify DNS to actually resolve abc.xyz.com. This behavior is required by the protocol. And you&#39;d see a very similar message if you tried to access the URL in a browser.","body":"The SAN (subject alternative name) is the <b>name</b> of the server in the TLS (SSL is <i>ancient</i>) certificate. You can <a href=\"https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification\">disable hostname verification</a>. Or you can modify DNS to actually resolve abc.xyz.com. This behavior is required by the protocol. And you&#39;d see a very similar message if you tried to access the URL in a browser."},{"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"score":0,"creation_date":1684330655,"post_id":76270467,"comment_id":134502598,"body_markdown":"@ElliottFrisch: Thank you. I am using `HttpURLConnection` class in Java. I found that there is API available in `HttpsURLConnection` class to disable SSL validation.","body":"@ElliottFrisch: Thank you. I am using <code>HttpURLConnection</code> class in Java. I found that there is API available in <code>HttpsURLConnection</code> class to disable SSL validation."}],"answers":[{"tags":[],"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684371596,"creation_date":1684371596,"answer_id":76277106,"question_id":76270467,"body_markdown":"The simplest way I found is to provide value `true` to `HttpsURLConnection.setHostnameVerifier()`\r\n\r\nYou need to override the method `public boolean verify(String hostname, SSLSession session)` for returning `true` everytime.\r\n\r\n\r\nBelow is an example: \r\n\r\n\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.lang.Exception;\r\n    import java.net.URL;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import javax.net.ssl.SSLSession;\r\n    \r\n    public class SkipVerification implements Runnable {\r\n    \r\n        private static final String TAG = SkipVerification.class.toString();\r\n        private String server_port;\r\n        private String serverIP;\r\n    \r\n        public SkipVerification(String serverIP, String server_port){\r\n            this.serverIP = serverIP;\r\n            this.server_port = server_port;\r\n        }\r\n    \r\n        public void run() {\r\n            try {\r\n                HostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n                    @Override\r\n                    public boolean verify(String hostname, SSLSession session) {\r\n                        return true;\r\n                    }\r\n                };\r\n    \r\n                URL url = new URL(&quot;https://&quot; + serverIP + &quot;:&quot; + server_port + &quot;/json&quot;);\r\n                InputStream inStream = null;\r\n    \r\n                try {\r\n                    HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();\r\n                    urlConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n                    urlConnection.setHostnameVerifier(hostnameVerifier);\r\n                    inStream = urlConnection.getInputStream();\r\n                    BufferedReader reader = new BufferedReader(new InputStreamReader(inStream));\r\n                } catch (Exception e) {\r\n                    Log.e(TAG, &quot;error fetching data from server&quot;, e);\r\n                } finally {\r\n                    if (inStream != null) {\r\n                        inStream.close();\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                Log.e(TAG, &quot;error initializing SkipVerificationn thread&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThis works when using `HttpsURLConnection` class. For other implementation, please refer to comment to question by **@Elliott Frisch**.","title":"Resolve the hostname in Java code and use it","body":"<p>The simplest way I found is to provide value <code>true</code> to <code>HttpsURLConnection.setHostnameVerifier()</code></p>\n<p>You need to override the method <code>public boolean verify(String hostname, SSLSession session)</code> for returning <code>true</code> everytime.</p>\n<p>Below is an example:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.Exception;\nimport java.net.URL;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLSession;\n\npublic class SkipVerification implements Runnable {\n\n    private static final String TAG = SkipVerification.class.toString();\n    private String server_port;\n    private String serverIP;\n\n    public SkipVerification(String serverIP, String server_port){\n        this.serverIP = serverIP;\n        this.server_port = server_port;\n    }\n\n    public void run() {\n        try {\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                @Override\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n            URL url = new URL(&quot;https://&quot; + serverIP + &quot;:&quot; + server_port + &quot;/json&quot;);\n            InputStream inStream = null;\n\n            try {\n                HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();\n                urlConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n                urlConnection.setHostnameVerifier(hostnameVerifier);\n                inStream = urlConnection.getInputStream();\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inStream));\n            } catch (Exception e) {\n                Log.e(TAG, &quot;error fetching data from server&quot;, e);\n            } finally {\n                if (inStream != null) {\n                    inStream.close();\n                }\n            }\n        } catch (Exception e) {\n            Log.e(TAG, &quot;error initializing SkipVerificationn thread&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>This works when using <code>HttpsURLConnection</code> class. For other implementation, please refer to comment to question by <strong>@Elliott Frisch</strong>.</p>\n"}],"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277106,"answer_count":1,"score":0,"last_activity_date":1684371596,"creation_date":1684315148,"question_id":76270467,"body_markdown":"I am connecting to a service through my Java code. Let&#39;s call FQDN or hostname of service as: `abc.xyz.com`.\r\n\r\nMy Java implementation returns exception:\r\n \r\n\r\n    java.net.UnknownHostException: dfour6gtsg5a.streaming.us-phoenix-1.oci.oraclecloud.com\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\r\n    \tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:633)\r\n    \tat java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\r\n    \tat java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:174)\r\n    \tat java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\r\n    \tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\r\n    \tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\r\n    \tat java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\r\n    \tat java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\r\n    \tat \r\n\r\nNow, when I include entry of FQDN of service and IPAddress in `/etc/hosts` as below: \r\n\r\n    127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\r\n    ...\r\n    100.70.125.57 abc.xyz.com\r\n\r\nSame Java implementation works correctly as service FQDN get resolved to IP address correctly.\r\n\r\nIf I try to run Java implementation with IPAddress, I get below error:\r\n\r\n    javax.net.ssl.SSLHandshakeException: No subject alternative names matching IP address 100.70.125.57 found\r\n    \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\r\n    \tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\r\n\r\nIn production environment, I will not have access to `/etc/hosts` for editing.\r\n\r\nHow can I resolve the Service FQDN to the IPAddress inside my Java implementation?\r\n\r\n\r\n\r\n","title":"Resolve the hostname in Java code and use it","body":"<p>I am connecting to a service through my Java code. Let's call FQDN or hostname of service as: <code>abc.xyz.com</code>.</p>\n<p>My Java implementation returns exception:</p>\n<pre><code>java.net.UnknownHostException: dfour6gtsg5a.streaming.us-phoenix-1.oci.oraclecloud.com\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\n    at java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:174)\n    at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\n    at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n    at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\n    at \n</code></pre>\n<p>Now, when I include entry of FQDN of service and IPAddress in <code>/etc/hosts</code> as below:</p>\n<pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n...\n100.70.125.57 abc.xyz.com\n</code></pre>\n<p>Same Java implementation works correctly as service FQDN get resolved to IP address correctly.</p>\n<p>If I try to run Java implementation with IPAddress, I get below error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: No subject alternative names matching IP address 100.70.125.57 found\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\n</code></pre>\n<p>In production environment, I will not have access to <code>/etc/hosts</code> for editing.</p>\n<p>How can I resolve the Service FQDN to the IPAddress inside my Java implementation?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":1582945,"reputation":113,"user_id":1467885,"accept_rate":25,"display_name":"user1467885"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1340320013,"creation_date":1340320013,"answer_id":11148089,"question_id":11111653,"body_markdown":"I have found the solution after hours of fiddling. I am using VisualJVM now instead but they operate in the same way by connecting to a local socket and setting up a JMX connection.\r\n\r\nFirstly Both jvmmonitor/visualjm and your java app MUST be running under the same user.\r\n\r\nThe user must have write access to the tmp directry on linux /tmp/.\r\n\r\nWhen any java app is launched a local file with the process PID for the java program is created in hsperfdata_myusername folder in tmp which is used by java profiling software to connect to the jvm running your java program.\r\n\r\nIf you launch a java program from a terminal and the current directory of the terminal is not your home directory, eg. launching from  MYNAME:/home/myname/project/myjavaapp$ you may find that you can connect to the jvm but not be able to sample or profile it. Making the current directory your home directory should solve this problem. \r\n\r\n","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>I have found the solution after hours of fiddling. I am using VisualJVM now instead but they operate in the same way by connecting to a local socket and setting up a JMX connection.</p>\n\n<p>Firstly Both jvmmonitor/visualjm and your java app MUST be running under the same user.</p>\n\n<p>The user must have write access to the tmp directry on linux /tmp/.</p>\n\n<p>When any java app is launched a local file with the process PID for the java program is created in hsperfdata_myusername folder in tmp which is used by java profiling software to connect to the jvm running your java program.</p>\n\n<p>If you launch a java program from a terminal and the current directory of the terminal is not your home directory, eg. launching from  MYNAME:/home/myname/project/myjavaapp$ you may find that you can connect to the jvm but not be able to sample or profile it. Making the current directory your home directory should solve this problem. </p>\n"},{"tags":[],"owner":{"account_id":1476756,"reputation":1921,"user_id":1386969,"accept_rate":80,"display_name":"lidox"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463642254,"creation_date":1406641002,"answer_id":25016721,"question_id":11111653,"body_markdown":"You have to change the .ini file of Eclipse\r\n\r\nJust add:\r\n\r\n    -vm C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\r\n\r\nHere is the eclipse.ini file in full:\r\n\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519\r\n    -product\r\n    org.eclipse.epp.package.jee.product\r\n    --launcher.XXMaxPermSize\r\n    256M\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.XXMaxPermSize\r\n    256m\r\n    -vm\r\n    C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xms40m\r\n    -Xmx512m","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>You have to change the .ini file of Eclipse</p>\n\n<p>Just add:</p>\n\n<pre><code>-vm C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n</code></pre>\n\n<p>Here is the eclipse.ini file in full:</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519\n-product\norg.eclipse.epp.package.jee.product\n--launcher.XXMaxPermSize\n256M\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n-vm\nC:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms40m\n-Xmx512m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93838,"reputation":13057,"user_id":256544,"display_name":"splash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432042556,"creation_date":1432042556,"answer_id":30327251,"question_id":11111653,"body_markdown":"This solution from the [JVisualVM Troubleshooting Guide][1] also helps me for jvmmonitor:\r\n\r\n&gt; **Local Applications Cannot Be Monitored**\r\n&gt; \r\n&gt; **Description:** An error dialog saying that local applications cannot be\r\n&gt; monitored is shown immediately after VisualVM startup. Locally running\r\n&gt; Java applications are displayed as &lt;Unknown Application&gt; (pid ###).\r\n&gt; \r\n&gt; **Resolution:**  This can happen on Windows systems if the username\r\n&gt; contains capitalized letters. In this case, username is `UserName` but\r\n&gt; the jvmstat directory created by JDK is `%TMP%\\hsperfdata_username`. To\r\n&gt; workaround the problem, exit all Java applications, delete the\r\n&gt; `%TMP%\\hsperfdata_username` directory and create new\r\n&gt; `%TMP%\\hsperfdata_UserName` directory.\r\n\r\n\r\n  [1]: https://visualvm.java.net/troubleshooting.html","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>This solution from the <a href=\"https://visualvm.java.net/troubleshooting.html\" rel=\"nofollow\">JVisualVM Troubleshooting Guide</a> also helps me for jvmmonitor:</p>\n\n<blockquote>\n  <p><strong>Local Applications Cannot Be Monitored</strong></p>\n  \n  <p><strong>Description:</strong> An error dialog saying that local applications cannot be\n  monitored is shown immediately after VisualVM startup. Locally running\n  Java applications are displayed as  (pid ###).</p>\n  \n  <p><strong>Resolution:</strong>  This can happen on Windows systems if the username\n  contains capitalized letters. In this case, username is <code>UserName</code> but\n  the jvmstat directory created by JDK is <code>%TMP%\\hsperfdata_username</code>. To\n  workaround the problem, exit all Java applications, delete the\n  <code>%TMP%\\hsperfdata_username</code> directory and create new\n  <code>%TMP%\\hsperfdata_UserName</code> directory.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4072211,"reputation":2941,"user_id":3344832,"accept_rate":50,"display_name":"Mohamed Ennahdi El Idrissi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570914083,"creation_date":1533553261,"answer_id":51706069,"question_id":11111653,"body_markdown":"Did you check the directive in this [JVMMonitor&#39;s FAQ](http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs)?\r\n\r\nIf the problem persists, run Eclipse as an Administrator, at least once after the installation of JVM Monitor plugin.\r\n\r\nThis solved the problem for me.","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>Did you check the directive in this <a href=\"http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs\" rel=\"nofollow noreferrer\">JVMMonitor's FAQ</a>?</p>\n\n<p>If the problem persists, run Eclipse as an Administrator, at least once after the installation of JVM Monitor plugin.</p>\n\n<p>This solved the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":9757211,"reputation":49,"user_id":7233526,"display_name":"Mohammed_Moulla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684371558,"creation_date":1684371558,"answer_id":76277100,"question_id":11111653,"body_markdown":"after try the first solution (change ini file) it not worked\r\nand I just but the jdk path in the preferences : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eTY8f.png","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>after try the first solution (change ini file) it not worked\nand I just but the jdk path in the preferences :</p>\n<p><a href=\"https://i.stack.imgur.com/eTY8f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTY8f.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1582945,"reputation":113,"user_id":1467885,"accept_rate":25,"display_name":"user1467885"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5561,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1684371558,"creation_date":1340155406,"question_id":11111653,"body_markdown":"I am trying to use jvmmonitor to profile my app in eclipse but there are no jvms listed, not even the running eclipse jvm and when I start my app the new jvm does not appear. \r\n \r\n[The docs][1] say &gt;\r\n\r\n&gt; At least one JVM (Eclipse itself) should be shown on JVM Explorer. If no JVM is shown, it is likely that Eclipse is not started with supported JDK. For example, JRE might be used instead of JDK. \r\nTo solve the issue, \r\n Check the value of system property java.home with Help &gt; About Eclipse &gt; Installation Details &gt; Configuration. You may see that the supported JDK is not specified to java.home. \r\n Close Eclipse. \r\n To enforce using a desired JDK on Eclipse, specify the option -vm to the eclipse executable, or alternatively specify it in eclipse.ini. See the   Workbench User Guide to learn how to specify that option. \r\n Start Eclipse.\r\n\r\nThe java.home property in the eclipse config says /home/myname/programs/jdk/jre\r\n\r\nI have tried to change it but nothing will. my -vm is already set to the jdk directory and my linux .profile and .bashrc exports to the JAVA_HOME to the jdk directory but java.home in eclipse still says /home/myname/programs/jdk/jre\r\n\r\n\r\nI have also set the jdk root directory to /home/myname/programs/jdk/ in the java&gt;monitor&gt;tools  preferences page but still no luck.\r\n\r\nI have uninstalled jvmmonitor and reinstalled it completely but there is no change.\r\n\r\nI am running eclipse indigo with jdk 7 and jvmmonitor 3.8\r\n\r\nThis is driving me nuts now, any ideas would be most welcome\r\n\r\nThanks in advance\r\n\r\n  [1]: http://www.jvmmonitor.org/doc/index.html#FAQ","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>I am trying to use jvmmonitor to profile my app in eclipse but there are no jvms listed, not even the running eclipse jvm and when I start my app the new jvm does not appear. </p>\n\n<p><a href=\"http://www.jvmmonitor.org/doc/index.html#FAQ\" rel=\"nofollow\">The docs</a> say ></p>\n\n<blockquote>\n  <p>At least one JVM (Eclipse itself) should be shown on JVM Explorer. If no JVM is shown, it is likely that Eclipse is not started with supported JDK. For example, JRE might be used instead of JDK. \n  To solve the issue, \n   Check the value of system property java.home with Help > About Eclipse > Installation Details > Configuration. You may see that the supported JDK is not specified to java.home. \n   Close Eclipse. \n   To enforce using a desired JDK on Eclipse, specify the option -vm to the eclipse executable, or alternatively specify it in eclipse.ini. See the   Workbench User Guide to learn how to specify that option. \n   Start Eclipse.</p>\n</blockquote>\n\n<p>The java.home property in the eclipse config says /home/myname/programs/jdk/jre</p>\n\n<p>I have tried to change it but nothing will. my -vm is already set to the jdk directory and my linux .profile and .bashrc exports to the JAVA_HOME to the jdk directory but java.home in eclipse still says /home/myname/programs/jdk/jre</p>\n\n<p>I have also set the jdk root directory to /home/myname/programs/jdk/ in the java>monitor>tools  preferences page but still no luck.</p>\n\n<p>I have uninstalled jvmmonitor and reinstalled it completely but there is no change.</p>\n\n<p>I am running eclipse indigo with jdk 7 and jvmmonitor 3.8</p>\n\n<p>This is driving me nuts now, any ideas would be most welcome</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684367832,"post_id":76276868,"comment_id":134510001,"body_markdown":"If `getId` is returning `null` then check when it&#39;s assigned, in the `createRecord` method.  It sounds like the database call is returning `null`.","body":"If <code>getId</code> is returning <code>null</code> then check when it&#39;s assigned, in the <code>createRecord</code> method.  It sounds like the database call is returning <code>null</code>."},{"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"score":0,"creation_date":1684368014,"post_id":76276868,"comment_id":134510016,"body_markdown":"I didn&#39;t explain it well. let me reword my question. I reworded my psuedo code.","body":"I didn&#39;t explain it well. let me reword my question. I reworded my psuedo code."}],"answers":[{"tags":[],"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684371468,"creation_date":1684371468,"answer_id":76277091,"question_id":76276868,"body_markdown":"If you require some additional mocking behavior other than simply returning a value, you can use `thenAnswer` instead of `thenReturn` in your `when` mocking stub.\r\n\r\nI hope this (overly) simplified example helps:\r\n```java\r\n   @Mock\r\n   private Bar executor;\r\n\r\n   @Test\r\n   public void testMutation() {\r\n      Foo foo = new Foo();\r\n\r\n      when(executor.mutate(foo)).thenAnswer(a -&gt; {\r\n         int mockedId = 10;\r\n         Foo input = a.getArgument(0);\r\n         input.setId(mockedId); // mutate the parameter from the method signature\r\n         return mockedId;\r\n      });\r\n\r\n      executor.mutate(foo);\r\n      Assertions.assertEquals(10, foo.getId());\r\n   }\r\n\r\n   //---- boiler plate code of the DTO and method that mutates the value\r\n   public class Bar {\r\n\r\n      public int mutate(Foo input) {\r\n         input.setId(3);\r\n         return 3;\r\n      }\r\n   }\r\n\r\n   public class Foo {\r\n      private int id;\r\n\r\n      public int getId() {\r\n         return id;\r\n      }\r\n\r\n      public void setId(int id) {\r\n         this.id = id;\r\n      }\r\n   }\r\n```","title":"Mocking a method that edits the input","body":"<p>If you require some additional mocking behavior other than simply returning a value, you can use <code>thenAnswer</code> instead of <code>thenReturn</code> in your <code>when</code> mocking stub.</p>\n<p>I hope this (overly) simplified example helps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @Mock\n   private Bar executor;\n\n   @Test\n   public void testMutation() {\n      Foo foo = new Foo();\n\n      when(executor.mutate(foo)).thenAnswer(a -&gt; {\n         int mockedId = 10;\n         Foo input = a.getArgument(0);\n         input.setId(mockedId); // mutate the parameter from the method signature\n         return mockedId;\n      });\n\n      executor.mutate(foo);\n      Assertions.assertEquals(10, foo.getId());\n   }\n\n   //---- boiler plate code of the DTO and method that mutates the value\n   public class Bar {\n\n      public int mutate(Foo input) {\n         input.setId(3);\n         return 3;\n      }\n   }\n\n   public class Foo {\n      private int id;\n\n      public int getId() {\n         return id;\n      }\n\n      public void setId(int id) {\n         this.id = id;\n      }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684371492,"creation_date":1684371492,"answer_id":76277095,"question_id":76276868,"body_markdown":"My guess is that you are **only mocking** the **value return** but **not the side effect** inside the **dao method**. You are passing the `RecordDto` as parameter, doing something and also calling methods that modify the state of the parameter received. The solution for that would be to use `doAnswer` that lets you not only return a value, you can add some extra logic. So, your test should look like this:\r\n\r\n    @Test\r\n    public void test() {\r\n        dao = mock(Dao.class);\r\n        RecordDto input = new RecordDto();\r\n        Integer someRandomId = 15;\r\n        Integer randomRowsUpdated = 3;\r\n        Answer&lt;Integer&gt; answer = new Answer&lt;Integer&gt;() {\r\n            public Integer answer(InvocationOnMock invocation) {\r\n                RecordDto input = invocation.getArgument(0, RecordDto.class); // get the argument received in `createRecord`\r\n                input.setId(someRandomId); // set the new id\r\n                return randomRowsUpdated; // the value to be returned by `createdRecord`\r\n            }\r\n        };\r\n        doAnswer(answer).when(dao).createRecord(input); // using doAnswer instead of doReturn\r\n        createSomething(input);\r\n    }\r\n\r\nThat would be the quick solution. \r\n\r\nI would say that this is not exactly the best approach. Doing side effects inside a method could cause bugs in a future and it will hard to know the root cause of the problem or even debug. Returning a `RecordDto` or another custom object that lets you now the new id and the affected rows or something similar will make your tests easier to setup and also make the assertion.","title":"Mocking a method that edits the input","body":"<p>My guess is that you are <strong>only mocking</strong> the <strong>value return</strong> but <strong>not the side effect</strong> inside the <strong>dao method</strong>. You are passing the <code>RecordDto</code> as parameter, doing something and also calling methods that modify the state of the parameter received. The solution for that would be to use <code>doAnswer</code> that lets you not only return a value, you can add some extra logic. So, your test should look like this:</p>\n<pre><code>@Test\npublic void test() {\n    dao = mock(Dao.class);\n    RecordDto input = new RecordDto();\n    Integer someRandomId = 15;\n    Integer randomRowsUpdated = 3;\n    Answer&lt;Integer&gt; answer = new Answer&lt;Integer&gt;() {\n        public Integer answer(InvocationOnMock invocation) {\n            RecordDto input = invocation.getArgument(0, RecordDto.class); // get the argument received in `createRecord`\n            input.setId(someRandomId); // set the new id\n            return randomRowsUpdated; // the value to be returned by `createdRecord`\n        }\n    };\n    doAnswer(answer).when(dao).createRecord(input); // using doAnswer instead of doReturn\n    createSomething(input);\n}\n</code></pre>\n<p>That would be the quick solution.</p>\n<p>I would say that this is not exactly the best approach. Doing side effects inside a method could cause bugs in a future and it will hard to know the root cause of the problem or even debug. Returning a <code>RecordDto</code> or another custom object that lets you now the new id and the affected rows or something similar will make your tests easier to setup and also make the assertion.</p>\n"}],"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277095,"answer_count":2,"score":0,"last_activity_date":1684371492,"creation_date":1684367161,"question_id":76276868,"body_markdown":"I am trying to mock a dao method that creates a record then sets the id on the input.\r\n\r\nhere is some psuedo code\r\n\r\nsample test\r\n\r\n    RecordDto input = new RecordDto();\r\n    input.setId(null);\r\n    input.setName(&quot;test&quot;);\r\n    \r\n    when(dao.createRecord(any(RecordDto.class)).thenReturn(1);\r\n    \r\n    createSomething(input);\r\n\r\nmethod to mock\r\n\r\n    public int createRecord(RecordDto input) {\r\n       int updatedRowCount = 0;\r\n       int primaryKey = db call to create record\r\n       rows += primary != null ? 1 : 0;\r\n       input.setId(primaryKey) &lt;-\r\n       return updateRowCount;\r\n    }\r\n\r\nclass under test\r\n\r\n    public void createSomething(RecordDto input)\r\n       int rowsUpdated = dao.createRecord(input);\r\n       if (input.getId() != null) {\r\n          do something &lt;- this code can not be reached from my test\r\n          because my mock only sets the return value. It needs to also\r\n          modify the input.id.\r\n       }\r\n\r\nOnce the method is called in my real class input has an id. My mock just returns a 1 for the row count but the id is still null.\r\n\r\n   \r\n\r\n","title":"Mocking a method that edits the input","body":"<p>I am trying to mock a dao method that creates a record then sets the id on the input.</p>\n<p>here is some psuedo code</p>\n<p>sample test</p>\n<pre><code>RecordDto input = new RecordDto();\ninput.setId(null);\ninput.setName(&quot;test&quot;);\n\nwhen(dao.createRecord(any(RecordDto.class)).thenReturn(1);\n\ncreateSomething(input);\n</code></pre>\n<p>method to mock</p>\n<pre><code>public int createRecord(RecordDto input) {\n   int updatedRowCount = 0;\n   int primaryKey = db call to create record\n   rows += primary != null ? 1 : 0;\n   input.setId(primaryKey) &lt;-\n   return updateRowCount;\n}\n</code></pre>\n<p>class under test</p>\n<pre><code>public void createSomething(RecordDto input)\n   int rowsUpdated = dao.createRecord(input);\n   if (input.getId() != null) {\n      do something &lt;- this code can not be reached from my test\n      because my mock only sets the return value. It needs to also\n      modify the input.id.\n   }\n</code></pre>\n<p>Once the method is called in my real class input has an id. My mock just returns a 1 for the row count but the id is still null.</p>\n"},{"tags":["java","sql-server","jdbc","glassfish-5"],"comments":[{"owner":{"account_id":6317022,"reputation":3182,"user_id":4906586,"accept_rate":88,"display_name":"Al-un"},"score":0,"creation_date":1507716594,"post_id":46683881,"comment_id":80318550,"body_markdown":"It looks like [SSL is mandatory for Microsoft SQL server](https://blogs.msdn.microsoft.com/jdbcteam/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption/). Silly question: have you tried to a [SSL-enabled](https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption) configuration?","body":"It looks like <a href=\"https://blogs.msdn.microsoft.com/jdbcteam/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption/\" rel=\"nofollow noreferrer\">SSL is mandatory for Microsoft SQL server</a>. Silly question: have you tried to a <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption\" rel=\"nofollow noreferrer\">SSL-enabled</a> configuration?"},{"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"score":0,"creation_date":1507721234,"post_id":46683881,"comment_id":80321471,"body_markdown":"Actually I haven&#39;t because at the moment I don&#39;t need SSL...\nI had no problem connecting to the same db with a glassfish-4 installation though.","body":"Actually I haven&#39;t because at the moment I don&#39;t need SSL... I had no problem connecting to the same db with a glassfish-4 installation though."},{"owner":{"account_id":8655,"reputation":20729,"user_id":15689,"accept_rate":91,"display_name":"Brian Knoblauch"},"score":0,"creation_date":1512403914,"post_id":46683881,"comment_id":82233020,"body_markdown":"Exact same issue here (unable to upgrade to GlassFish 5.0 because of this, despite it working fine on 4.1.1), were you ever able to get this fixed?","body":"Exact same issue here (unable to upgrade to GlassFish 5.0 because of this, despite it working fine on 4.1.1), were you ever able to get this fixed?"},{"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"score":0,"creation_date":1512458827,"post_id":46683881,"comment_id":82254619,"body_markdown":"Sorry, I never got the time to try it out again... I&#39;m stuck with 4.1.1 as well for now..","body":"Sorry, I never got the time to try it out again... I&#39;m stuck with 4.1.1 as well for now.."}],"answers":[{"tags":[],"owner":{"account_id":12505593,"reputation":56,"user_id":9102524,"display_name":"Nicolas Gaudin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1513328073,"creation_date":1513325778,"answer_id":47828264,"question_id":46683881,"body_markdown":"Facing also this issue with *Glassfish 5* on *Windows 10*, disabling elliptic curves did the trick, just add:\r\n\r\n    -Dcom.sun.net.ssl.enableECC=false\r\n\r\nto glassfish JVM options and restart server.\r\nposted workaround on glassfish issue tracker to help them fix it quickly \r\n","title":"JDBC connection pool ping error in Glassfish","body":"<p>Facing also this issue with <em>Glassfish 5</em> on <em>Windows 10</em>, disabling elliptic curves did the trick, just add:</p>\n\n<pre><code>-Dcom.sun.net.ssl.enableECC=false\n</code></pre>\n\n<p>to glassfish JVM options and restart server.\nposted workaround on glassfish issue tracker to help them fix it quickly </p>\n"},{"tags":[],"owner":{"account_id":28165739,"reputation":1,"user_id":21524965,"display_name":"Nen patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680161637,"creation_date":1680161637,"answer_id":75885330,"question_id":46683881,"body_markdown":"this happens when password you have set in phpMyAdmin and in payara console is different, check the password \r\nfor that\r\ngo to xampp-&gt;Apache-&gt;config-&gt;config.inc.php\r\ncheck password in that file \r\nand keep the same password in payara or glassfish console.","title":"JDBC connection pool ping error in Glassfish","body":"<p>this happens when password you have set in phpMyAdmin and in payara console is different, check the password\nfor that\ngo to xampp-&gt;Apache-&gt;config-&gt;config.inc.php\ncheck password in that file\nand keep the same password in payara or glassfish console.</p>\n"}],"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5500,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47828264,"answer_count":2,"score":2,"last_activity_date":1684371254,"creation_date":1507711911,"question_id":46683881,"body_markdown":"I am trying to create a jdbc connection pool in glassfish 5 for a Microsoft SQL Server database. I am using the `mssql-jdbc-6.2.2.jre8.jar` and the latest SQLExpress server version (MSSQL14.SQLEXPRESS)\r\n\r\nResource Type: `javax.sql.DataSource`\r\n\r\nDatasource Classname: `com.microsoft.sqlserver.jdbc.SQLServerDataSource`\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\nThe connection pool is created successfully but when i try to ping, I get this error:\r\n\r\n&gt; Ping Connection Pool failed for sql_tire_pool. Connection could not be\r\n&gt; allocated because: The driver could not establish a secure connection\r\n&gt; to SQL Server by using Secure Sockets Layer (SSL) encryption. Error:\r\n&gt; &quot;Unsupported curveId: 29&quot;.\r\n&gt; ClientConnectionId:f86f1ef8-29c4-4e39-b112-f5da9cbfe13d Please check\r\n&gt; the server.log for more details.\r\n\r\n\r\nAnd this is the server log:\r\n\r\n\r\n&gt; [2017-10-11T10:55:11.747+0300] [glassfish 5.0] [WARNING]\r\n&gt; [test.connection.pool.failed]\r\n&gt; [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service]\r\n&gt; [tid: _ThreadID=125 _ThreadName=admin-listener(7)] [timeMillis:\r\n&gt; 1507708511747] [levelValue: 900] [[   RAR8054: Exception while\r\n&gt; creating an unpooled [test] connection for pool [ test_pool ],\r\n&gt; Connection could not be allocated because: The driver could not\r\n&gt; establish a secure connection to SQL Server by using Secure Sockets\r\n&gt; Layer (SSL) encryption. Error: &quot;Unsupported curveId: 29&quot;.\r\n&gt; ClientConnectionId:4c325981-4c97-4db2-b4fb-f7aafca4f03b]]\r\n&gt; \r\n&gt; [2017-10-11T10:55:11.750+0300] [glassfish 5.0] [SEVERE] []\r\n&gt; [org.glassfish.admingui] [tid: _ThreadID=51\r\n&gt; _ThreadName=admin-listener(3)] [timeMillis: 1507708511750] [levelValue: 1000] [[   RestResponse.getResponse() gives FAILURE. \r\n&gt; endpoint =\r\n&gt; &#39;http://localhost:4848/management/domain/resources/ping-connection-pool.json&#39;;\r\n&gt; attrs = &#39;{id=test_pool}&#39;]]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Sse7.png\r\n  [2]: https://i.stack.imgur.com/7H5uO.png\r\n\r\n\r\nI am running Windows 10 and also everything is running locally (Glassfish installation, SQL server)\r\n\r\n\r\n**UPDATE**\r\n\r\nUsing the accepted answer&#39;s solution, the problem is partially solved.The connection pool now successfuly pings the database, but I encounter the same problem as the same error is thrown in the glassfish log when my application tries to run a query through jpa/hibernate.","title":"JDBC connection pool ping error in Glassfish","body":"<p>I am trying to create a jdbc connection pool in glassfish 5 for a Microsoft SQL Server database. I am using the <code>mssql-jdbc-6.2.2.jre8.jar</code> and the latest SQLExpress server version (MSSQL14.SQLEXPRESS)</p>\n\n<p>Resource Type: <code>javax.sql.DataSource</code></p>\n\n<p>Datasource Classname: <code>com.microsoft.sqlserver.jdbc.SQLServerDataSource</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/7Sse7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Sse7.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/7H5uO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7H5uO.png\" alt=\"enter image description here\"></a>\nThe connection pool is created successfully but when i try to ping, I get this error:</p>\n\n<blockquote>\n  <p>Ping Connection Pool failed for sql_tire_pool. Connection could not be\n  allocated because: The driver could not establish a secure connection\n  to SQL Server by using Secure Sockets Layer (SSL) encryption. Error:\n  \"Unsupported curveId: 29\".\n  ClientConnectionId:f86f1ef8-29c4-4e39-b112-f5da9cbfe13d Please check\n  the server.log for more details.</p>\n</blockquote>\n\n<p>And this is the server log:</p>\n\n<blockquote>\n  <p>[2017-10-11T10:55:11.747+0300] [glassfish 5.0] [WARNING]\n  [test.connection.pool.failed]\n  [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service]\n  [tid: _ThreadID=125 _ThreadName=admin-listener(7)] [timeMillis:\n  1507708511747] [levelValue: 900] [[   RAR8054: Exception while\n  creating an unpooled [test] connection for pool [ test_pool ],\n  Connection could not be allocated because: The driver could not\n  establish a secure connection to SQL Server by using Secure Sockets\n  Layer (SSL) encryption. Error: \"Unsupported curveId: 29\".\n  ClientConnectionId:4c325981-4c97-4db2-b4fb-f7aafca4f03b]]</p>\n  \n  <p>[2017-10-11T10:55:11.750+0300] [glassfish 5.0] [SEVERE] []\n  [org.glassfish.admingui] [tid: _ThreadID=51\n  _ThreadName=admin-listener(3)] [timeMillis: 1507708511750] [levelValue: 1000] [[   RestResponse.getResponse() gives FAILURE. \n  endpoint =\n  '<a href=\"http://localhost:4848/management/domain/resources/ping-connection-pool.json\" rel=\"nofollow noreferrer\">http://localhost:4848/management/domain/resources/ping-connection-pool.json</a>';\n  attrs = '{id=test_pool}']]</p>\n</blockquote>\n\n<p>I am running Windows 10 and also everything is running locally (Glassfish installation, SQL server)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Using the accepted answer's solution, the problem is partially solved.The connection pool now successfuly pings the database, but I encounter the same problem as the same error is thrown in the glassfish log when my application tries to run a query through jpa/hibernate.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":2,"creation_date":1684344260,"post_id":76274686,"comment_id":134505985,"body_markdown":"You can use this answer to set whatever decimal separator you need [How to change the decimal separator of DecimalFormat from comma to dot/point?](https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point)","body":"You can use this answer to set whatever decimal separator you need <a href=\"https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point\">How to change the decimal separator of DecimalFormat from comma to dot/point?</a>"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1684344611,"post_id":76274686,"comment_id":134506061,"body_markdown":"`resultSigiop.getString(&quot;aaun_md_area&quot;)` should probably be `resultSigiop.getDouble(&quot;aaun_md_area&quot;)`. You are reading the value as a String from the database and writing that String straight to the file.","body":"<code>resultSigiop.getString(&quot;aaun_md_area&quot;)</code> should probably be <code>resultSigiop.getDouble(&quot;aaun_md_area&quot;)</code>. You are reading the value as a String from the database and writing that String straight to the file."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684370666,"creation_date":1684370666,"answer_id":76277048,"question_id":76274686,"body_markdown":"You could use the `String.replace` method, replacing a `.` with a `,`.\r\n\r\n```java\r\nfw.append(resultSigiop.getString(&quot;aaun_md_area&quot;).replace(&#39;.&#39;, &#39;,&#39;));","title":"Java File, change decimal dot for a comma when exporting in txt","body":"<p>You could use the <code>String.replace</code> method, replacing a <code>.</code> with a <code>,</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;).replace('.', ','));\n</code></pre>\n"}],"owner":{"account_id":7190531,"reputation":175,"user_id":5491043,"display_name":"AllPower"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684370666,"creation_date":1684344123,"question_id":76274686,"body_markdown":"I do a database search, assemble the columns and export a txt\r\n\r\nBut in the column (&quot;aaun_md_area) that is a number, instead of a comma, a dot is being applied, making it difficult to count in excel.\r\n\r\nThe column that is decimal that I need to change, is the &quot;aaun_md_area&quot; column\r\n\r\nHow to export using a comma?\r\n\r\n    File arquivo = new File(path);\r\n     try (FileWriter fw = new FileWriter(arquivo))\r\n\t\t{ fw.append(&quot;Witdh&quot;);\r\n          fw.append(&quot;Area&quot;);\r\n\t\t}\r\n\r\n    for (int i = 0;i&lt;listaRt.length; i++){\r\n      rts.add(listaRt[i]);\r\n      ResultSet resultSigiop = stSigiop.executeQuery(sqlSigiop.replace(&quot;:1&quot;, \r\n      rts.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;)));\r\n           while(resultSigiop.next()) \r\n\t\t\t\t{\r\n                   fw.append(resultSigiop.getString(&quot;ssrt_cd_status_subitem_rt&quot;));\r\n\t\t\t\t   fw.append(&#39;\\t&#39;);\r\n\t\t\t\t   fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;));\r\n\t\t\t\t   fw.append(&#39;\\n&#39;);\t\r\n\t\t\t    }\r\n\t\t\t\t\tfw.flush();\r\n\t\t\t\t\t\r\n\t\t\t\t} catch(IOException ex){\r\n\t\t\t\t\tthrow ex;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\trts = new ArrayList&lt;String&gt;();\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\tfw.close();\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(IOException ex){\r\n\t\t\tthrow ex;\r\n\t\t}\r\n\t\t\r\n    }","title":"Java File, change decimal dot for a comma when exporting in txt","body":"<p>I do a database search, assemble the columns and export a txt</p>\n<p>But in the column (&quot;aaun_md_area) that is a number, instead of a comma, a dot is being applied, making it difficult to count in excel.</p>\n<p>The column that is decimal that I need to change, is the &quot;aaun_md_area&quot; column</p>\n<p>How to export using a comma?</p>\n<pre><code>File arquivo = new File(path);\n try (FileWriter fw = new FileWriter(arquivo))\n    { fw.append(&quot;Witdh&quot;);\n      fw.append(&quot;Area&quot;);\n    }\n\nfor (int i = 0;i&lt;listaRt.length; i++){\n  rts.add(listaRt[i]);\n  ResultSet resultSigiop = stSigiop.executeQuery(sqlSigiop.replace(&quot;:1&quot;, \n  rts.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;)));\n       while(resultSigiop.next()) \n            {\n               fw.append(resultSigiop.getString(&quot;ssrt_cd_status_subitem_rt&quot;));\n               fw.append('\\t');\n               fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;));\n               fw.append('\\n'); \n            }\n                fw.flush();\n                \n            } catch(IOException ex){\n                throw ex;\n            }\n            \n            rts = new ArrayList&lt;String&gt;();\n        }   \n        \n        fw.close();\n        \n    }\n    catch(IOException ex){\n        throw ex;\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","image","graphics2d"],"comments":[{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":1,"creation_date":1423559321,"post_id":28427566,"comment_id":45187009,"body_markdown":"A typical screen hat appx. 72 dpi. A typical printer may have 720 dpi. So in order to exploit the printer resolution, you&#39;ll have to increase the image size significantly (probably: As high as possible without causing an OutOfMemoryError...)","body":"A typical screen hat appx. 72 dpi. A typical printer may have 720 dpi. So in order to exploit the printer resolution, you&#39;ll have to increase the image size significantly (probably: As high as possible without causing an OutOfMemoryError...)"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423559784,"post_id":28427566,"comment_id":45187258,"body_markdown":"i made that by doing this:\n\nsize.width *= 5;\nsize.height *= 5;\n\nThe initial image had resolution: 594 X 840 and size 38.7KB,\nand the new image has resolution 2970 X 4200 and size 3.67 MB, but the same low quality..","body":"i made that by doing this:  size.width *= 5; size.height *= 5;  The initial image had resolution: 594 X 840 and size 38.7KB, and the new image has resolution 2970 X 4200 and size 3.67 MB, but the same low quality.."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1423560577,"post_id":28427566,"comment_id":45187711,"body_markdown":"You&#39;re capturing the image @ 72dpi...scaling it is only going to make it look worse","body":"You&#39;re capturing the image @ 72dpi...scaling it is only going to make it look worse"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423560636,"post_id":28427566,"comment_id":45187749,"body_markdown":"A better solution be to actually use the printer api and print the contents to PDF, maybe even consider using something like Jasper Reports","body":"A better solution be to actually use the printer api and print the contents to PDF, maybe even consider using something like Jasper Reports"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423563824,"post_id":28427566,"comment_id":45189598,"body_markdown":"How can i capturate the image as 90dp or bigger..?","body":"How can i capturate the image as 90dp or bigger..?"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423564226,"post_id":28427566,"comment_id":45189832,"body_markdown":"You could export to a vector rather than png or jpg - that way you get your high resolution whatever the scale.  There&#39;s a method in the accepted answer [here](http://stackoverflow.com/questions/811916/export-jpanel-to-vector-graphics).  Good output options are eps or pdf as suggested by @MadProgrammer.  SVG also good, but not all programs will open them. If you have a reason to have png - I think you might be best to get rid of that class you have found - it will always output the image at screen resolution and as mentioned, simply scaling it up to scale it down won&#39;t help.","body":"You could export to a vector rather than png or jpg - that way you get your high resolution whatever the scale.  There&#39;s a method in the accepted answer <a href=\"http://stackoverflow.com/questions/811916/export-jpanel-to-vector-graphics\">here</a>.  Good output options are eps or pdf as suggested by @MadProgrammer.  SVG also good, but not all programs will open them. If you have a reason to have png - I think you might be best to get rid of that class you have found - it will always output the image at screen resolution and as mentioned, simply scaling it up to scale it down won&#39;t help."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423564394,"post_id":28427566,"comment_id":45189916,"body_markdown":"I was about to go into details of getting higher resolution png, when googling &quot;jpanel paint resolution&quot; [revealed this answer](http://stackoverflow.com/a/26923692/838992).  As your image is mostly text, you&#39;d be best to used the third option presented in that answer.","body":"I was about to go into details of getting higher resolution png, when googling &quot;jpanel paint resolution&quot; <a href=\"http://stackoverflow.com/a/26923692/838992\">revealed this answer</a>.  As your image is mostly text, you&#39;d be best to used the third option presented in that answer."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423565450,"post_id":28427566,"comment_id":45190508,"body_markdown":"possible duplicate of [Getting High Resolution Image from JPanel](http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\">Getting High Resolution Image from JPanel</a>"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423566289,"post_id":28427566,"comment_id":45190955,"body_markdown":"This isn&#39;t what i need: http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel  .\nThis link works good for images, but i have a lot of JLabels and the text of JLabels is loosing the quality. I need a solution to increase the quality of text. I will try to export to a Vector..","body":"This isn&#39;t what i need: <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\" title=\"getting high resolution image from jpanel\">stackoverflow.com/questions/26923282/&hellip;</a>  . This link works good for images, but i have a lot of JLabels and the text of JLabels is loosing the quality. I need a solution to increase the quality of text. I will try to export to a Vector.."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423598713,"post_id":28427566,"comment_id":45211173,"body_markdown":"@Ghita You really need to get away from the components and use the print api and render the output directly with the Graphics API, this is capable of printing at a much higher dpi, but you&#39;ll need a PDF or image printer driver","body":"@Ghita You really need to get away from the components and use the print api and render the output directly with the Graphics API, this is capable of printing at a much higher dpi, but you&#39;ll need a PDF or image printer driver"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423639646,"post_id":28427566,"comment_id":45225719,"body_markdown":"@MadProgrammer i don&#39;t know how to do that....Could you give me an example? Thank you!","body":"@MadProgrammer i don&#39;t know how to do that....Could you give me an example? Thank you!"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1423654395,"post_id":28427566,"comment_id":45233633,"body_markdown":"What&#39;s the code for the panel look like...really don&#39;t want to try and replicate all myself","body":"What&#39;s the code for the panel look like...really don&#39;t want to try and replicate all myself"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423747249,"post_id":28427566,"comment_id":45279592,"body_markdown":"Are you sure the third option on the answer quoted doesn&#39;t work for you?  Here&#39;s an example of it I knocked up [png](https://www.dropbox.com/s/t8wfwoh3y27jigp/Test.png?dl=0) - full code [here](https://www.dropbox.com/s/fvj2lc3d9mhpopy/PanelRenderer.java?dl=0).  You can see the text in the output png can be displayed really quite big with v. little feathering on the edges.  Obviously I still support export as vector as best option and second @MadProgrammer request to link to your panel as is so we don&#39;t have to replicate.","body":"Are you sure the third option on the answer quoted doesn&#39;t work for you?  Here&#39;s an example of it I knocked up <a href=\"https://www.dropbox.com/s/t8wfwoh3y27jigp/Test.png?dl=0\" rel=\"nofollow noreferrer\">png</a> - full code <a href=\"https://www.dropbox.com/s/fvj2lc3d9mhpopy/PanelRenderer.java?dl=0\" rel=\"nofollow noreferrer\">here</a>.  You can see the text in the output png can be displayed really quite big with v. little feathering on the edges.  Obviously I still support export as vector as best option and second @MadProgrammer request to link to your panel as is so we don&#39;t have to replicate."},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423747704,"post_id":28427566,"comment_id":45279896,"body_markdown":"@JRichardSnape you&#39;re the best!!!!!!!!!!! The code works very good!! Thank you a lot for this!! You are the best!","body":"@JRichardSnape you&#39;re the best!!!!!!!!!!! The code works very good!! Thank you a lot for this!! You are the best!"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684368020,"creation_date":1423799461,"answer_id":28492187,"question_id":28427566,"body_markdown":"Let&#39;s start with the obvious...\r\n\r\n- A A4 sheet of paper is 21.0cm x 29.7cm.\r\n- At 300dpi, that makes it 2480.315x3507.874 pixels\r\n- At 72dpi, that makes it 595.2756x841.8898 pixels\r\n\r\nWhy&#39;s this important?  Java renders to the screen at 72dpi, but is capable of printing at 300dpi (above and below, but this is nice figure).  This means, roughly, you&#39;d to scale the screen image UP by 4 times.  Up scaling is never pleasant, as demonstrated [here](https://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel/26923692#26923692)\r\n\r\nA better solution would be work with the printer DPI and scale the image down to the screen.\r\n\r\nFor convenience sake, you can use something like...\r\n\r\n\tpublic static final float CM_PER_INCH = 0.393700787f;\r\n\r\n\tpublic static float cmsToPixel(float cms, float dpi) {\r\n\t\treturn cmToInches(cms) * dpi;\r\n\t}\r\n\r\n\tpublic static float cmToInches(float cms) {\r\n\t\treturn cms * CM_PER_INCH;\r\n\t}\r\n\r\nTo convert from cm&#39;s to pixels at a given DPI.\r\n\r\nNow to the fun part.  You &quot;could&quot; use Swing components to render the basic layout, it might be easier, but you&#39;d have to scale the graphics down, as the core printer API assumes a DPI of 72 (don&#39;t ask).  Now scaling down generally results in a better output, but there is another solution.\r\n\r\nInstead, you could use the Graphics 2D API and generate the output yourself...\r\n\r\n\tpublic static class Ticket {\r\n\r\n\t\tpublic enum TextAlignment {\r\n\r\n\t\t\tLEFT,\r\n\t\t\tRIGHT,\r\n\t\t\tCENTRE\r\n\t\t}\r\n\r\n\t\tprotected static final int STUB_NUMBER_Y_POS = 12;\r\n\r\n\t\tprivate Font plainFont;\r\n\t\tprivate Font boldFont;\r\n\r\n\t\tprivate Stroke dashedStroke;\r\n\r\n\t\tpublic void paint(Graphics2D g2d, double pageWidth, double pageHeight, int stubNumber) {\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\r\n\t\t\tpaintLeftStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintBody((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintRightStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintEndStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\r\n\t\t\tg2d = (Graphics2D) g2d.create();\r\n\t\t\tg2d.setColor(Color.GRAY);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(0, pageHeight - 1, pageWidth, pageHeight - 1));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void paintLeftStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\tdouble stubWidth = pageWidth / 4;\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\r\n\t\t\tFont font = getBoldFont().deriveFont(18f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\t// Did mention I hate doing inline transformations :P\r\n\t\t\tg2d.rotate(Math.toRadians(-90), stubWidth / 2, pageHeight / 2);\r\n\t\t\tg2d.translate(0, -((stubWidth - pageHeight) / 2));\r\n\r\n\t\t\tString lines[] = {&quot;MORATUFIESTA&quot;, &quot;&quot;, &quot;Sat. 3 Auguest 2015&quot;, &quot;Adult - $3&quot;};\r\n\t\t\tdouble x = 2;\r\n\t\t\tdouble y = 0;\r\n\t\t\tdouble maxWidth = 0;\r\n\t\t\tfor (String text : lines) {\r\n\r\n\t\t\t\tx = calculateHorizontalCenterPositionFor(text, fm, stubWidth);\r\n\t\t\t\tmaxWidth = Math.max(maxWidth, fm.stringWidth(text));\r\n\t\t\t\tg2d.drawString(text, (int) Math.round(x), (int) Math.round(y + fm.getAscent()));\r\n\t\t\t\ty += fm.getHeight();\r\n\r\n\t\t\t}\r\n\t\t\tdouble blockWidth = y;\r\n\r\n\t\t\t// Easier then trying to undo the transformation...\r\n\t\t\tg2d.dispose();\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\r\n\t\t\tString text = &quot;Low&quot;;\r\n\r\n\t\t\tfont = getPlainFont().deriveFont(6f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tfm = g2d.getFontMetrics();\r\n\t\t\tdouble xPos = calculateHorizontalCenterPositionFor(text, fm, blockWidth) + 2;\r\n\t\t\tdouble yPos = (pageHeight - maxWidth) / 2;\r\n\t\t\tg2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos - fm.getAscent()));\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, stubWidth - 8 - fm.getHeight() - fm.getAscent(), STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected Stroke getDashedStroke() {\r\n\r\n\t\t\tif (dashedStroke == null) {\r\n\r\n\t\t\t\tfloat dash[] = {10.0f};\r\n\t\t\t\tdashedStroke = new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND, 10f, dash, 0.0f);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn dashedStroke;\r\n\r\n\t\t}\r\n\r\n\t\tpublic Font getPlainFont() {\r\n\r\n\t\t\tif (plainFont == null) {\r\n\r\n\t\t\t\tplainFont = UIManager.getFont(&quot;Label.font&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn plainFont;\r\n\r\n\t\t}\r\n\r\n\t\tpublic Font getBoldFont() {\r\n\r\n\t\t\tif (boldFont == null) {\r\n\r\n\t\t\t\tboldFont = getPlainFont();\r\n\t\t\t\tboldFont = boldFont.deriveFont(Font.BOLD);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn boldFont;\r\n\r\n\t\t}\r\n\r\n\t\tprotected double calculateHorizontalCenterPositionFor(String text, FontMetrics fm, double width) {\r\n\t\t\treturn (width - fm.stringWidth(text)) / 2d;\r\n\t\t}\r\n\r\n\t\tprotected void paintBody(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble xOffset = pageWidth / 4d;\r\n\t\t\t\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\r\n\t\t\tdouble bodyWidth = (pageWidth / 2d);\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setFont(getPlainFont().deriveFont(12f));\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\t\t\tString text = &quot;Moratu Fiesta&quot;;\r\n\t\t\tdouble xPos = bodyWidth - fm.stringWidth(text) - padding;\r\n\t\t\tdouble yPos = padding;\r\n\r\n\t\t\tg2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos + fm.getAscent()));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tFont plainFont = getPlainFont().deriveFont(9.5f);\r\n\t\t\tTextLine[] addressLines01 = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;61 Railway Pde North&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Glen Waverley&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;03 9836 8673&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tTextLine[] addressLines02 = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;1120, Glen Huntly&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Glen Huntly&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;03 9571 5544&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tTextLine[] sponsorLines = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;Proudly supported by&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Quality Groceries&quot;, plainFont.deriveFont(Font.BOLD)),\r\n\t\t\t\tnew TextLine(&quot;Visit for all your grocery needs&quot;, plainFont)\r\n\t\t\t};\r\n\r\n\t\t\tArea area = new Area();\r\n\t\t\taddTo(g2d, area, addressLines01);\r\n\t\t\taddTo(g2d, area, addressLines02);\r\n\t\t\taddTo(g2d, area, sponsorLines);\r\n\t\t\tint height = area.getBounds().height;\r\n\t\t\tdouble bottomBlockYPos = pageHeight - height - padding;\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, addressLines01);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, sponsorLines);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, addressLines02);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tplainFont = getPlainFont().deriveFont(10f);\r\n\t\t\tTextLine[] textLines = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;On Saturday, August 3, 2013 from 6.30pm till midnight&quot;, plainFont.deriveFont(Font.BOLD)),\r\n\t\t\t\tnew TextLine(&quot;At 21, Sacred Heart Parish Hall, Johnson Street, Oakleigh&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tint blockHeight = getSizeFor(g2d, textLines).height;\r\n\t\t\tdouble mainBlockYPos = (pageHeight - blockHeight) / 2;\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tdrawTextLines(g2d, 0, mainBlockYPos, bodyWidth, TextAlignment.CENTRE, textLines);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tFont boldFont = getBoldFont().deriveFont(9f);\r\n\t\t\tdouble upperYPos = (mainBlockYPos + blockHeight);\r\n\t\t\tdouble middleBlockYPos = upperYPos + ((bottomBlockYPos - upperYPos) / 2) - (g2d.getFontMetrics(boldFont).getHeight() / 2);\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, new TextLine(&quot;Melway Ref, 69 FB&quot;, boldFont));\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, new TextLine(&quot;Music by REDEMPTION&quot;, boldFont));\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, new TextLine(&quot;Donations $30&quot;, boldFont));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(bodyWidth, 0, bodyWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void drawStubNumber(Graphics2D g2d, double x, double y, int stubNumber) {\r\n\r\n\t\t\tFont font = getBoldFont().deriveFont(18f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tString text = Integer.toString(stubNumber);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\t\t\tg2d.dispose();\r\n\t\t}\r\n\r\n\t\tprotected void paintRightStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\t\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble xOffset = (pageWidth / 4d) * 3;\r\n\t\t\tdouble stubWidth = (pageWidth / 4d) / 2;\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tString text = &quot;Cafe Little Hut&quot;;\r\n\t\t\tFont font = getPlainFont().deriveFont(23f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tdouble x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2d);\r\n\t\t\tdouble y = ((pageHeight - fm.getHeight()) / 2d);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void paintEndStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\t\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble stubWidth = (pageWidth / 4d) / 2;\r\n\t\t\tdouble xOffset = ((pageWidth / 4d) * 3 + stubWidth);\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tString text = &quot;Entrance&quot;;\r\n\t\t\tFont font = getBoldFont().deriveFont(32f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tdouble x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2);\r\n\t\t\tdouble y = ((pageHeight - fm.getHeight()) / 2);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected Dimension drawTextLines(Graphics2D g2d, double xPos, double yPos, double width, TextAlignment textAlignment, TextLine... textLines) {\r\n\r\n\t\t\tArea area = new Area();\r\n\r\n\t\t\tfor (TextLine textLine : textLines) {\r\n\t\t\t\tg2d.translate(xPos, yPos);\r\n\t\t\t\tDimension size = textLine.getBounds(g2d);\r\n\t\t\t\ttextLine.paint(g2d, width, textAlignment);\r\n\t\t\t\tarea.add(new Area(new Rectangle2D.Double(xPos, yPos, size.width, size.height)));\r\n\t\t\t\tg2d.translate(-xPos, -yPos);\r\n\t\t\t\tyPos += size.height;\r\n\t\t\t}\r\n\r\n\t\t\treturn area.getBounds().getSize();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void addTo(Graphics2D g2d, Area area, TextLine... textLines) {\r\n\r\n\t\t\tarea.add(new Area(new Rectangle(getSizeFor(g2d, textLines))));\r\n\r\n\t\t}\r\n\r\n\t\tprotected Dimension getSizeFor(Graphics2D g2d, TextLine... textLines) {\r\n\r\n\t\t\tint yPos = 0;\r\n\t\t\tint width = 0;\r\n\t\t\tfor (TextLine textLine : textLines) {\r\n\t\t\t\tDimension size = textLine.getBounds(g2d);\r\n\t\t\t\tyPos += size.height;\r\n\t\t\t\twidth = Math.max(size.width, width);\r\n\t\t\t}\r\n\r\n\t\t\treturn new Dimension(width, yPos);\r\n\r\n\t\t}\r\n\r\n\t\tprotected class TextLine {\r\n\r\n\t\t\tprivate String text;\r\n\t\t\tprivate Font font;\r\n\r\n\t\t\tpublic TextLine(String text, Font font) {\r\n\t\t\t\tthis.text = text;\r\n\t\t\t\tthis.font = font;\r\n\t\t\t}\r\n\r\n\t\t\tpublic String getText() {\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\r\n\t\t\tpublic Font getFont() {\r\n\t\t\t\treturn font;\r\n\t\t\t}\r\n\r\n\t\t\tpublic Dimension getBounds(Graphics2D g2d) {\r\n\t\t\t\tFontMetrics fm = g2d.getFontMetrics(getFont());\r\n\t\t\t\treturn new Dimension(fm.stringWidth(text), fm.getHeight());\r\n\t\t\t}\r\n\r\n\t\t\tpublic void paint(Graphics2D g2d, double width, TextAlignment textAlignment) {\r\n\t\t\t\tDimension bounds = getBounds(g2d);\r\n\t\t\t\tFontMetrics fm = g2d.getFontMetrics(getFont());\r\n\t\t\t\tg2d.setFont(font);\r\n\t\t\t\tdouble x = 0;\r\n\t\t\t\tswitch (textAlignment) {\r\n\t\t\t\t\tcase CENTRE:\r\n\t\t\t\t\t\tx = (width - bounds.width) / 2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase RIGHT:\r\n\t\t\t\t\t\tx = width - bounds.width;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tg2d.drawString(getText(), (int) Math.round(x), fm.getAscent());\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\nWhy would you do that?  It&#39;s easier to wrap a `Printable` around and print to a printer and you can also &quot;paint&quot; to a component (or image)\r\n\r\nFor example...\r\n\r\n\tpublic class TicketPrintable implements Printable {\r\n\r\n\t\tprivate Ticket ticket;\r\n\r\n\t\tpublic TicketPrintable(Ticket ticket) {\r\n\t\t\tthis.ticket = ticket;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\r\n\t\t\tint result = NO_SUCH_PAGE;\r\n\t\t\tif (pageIndex == 0) {\r\n\t\t\t\tGraphics2D g2d = (Graphics2D) graphics;\r\n\t\t\t\tdouble width = pageFormat.getImageableWidth();\r\n\t\t\t\tdouble height = pageFormat.getImageableHeight();\r\n\r\n\t\t\t\tg2d.translate((int) pageFormat.getImageableX(),\r\n\t\t\t\t\t\t\t\t(int) pageFormat.getImageableY());\r\n\t\t\t\t\r\n\t\t\t\tdouble ticketHeight = height / 4d;\r\n\t\t\t\tfor (int index = 0; index &lt; 4; index++) {\r\n\t\t\t\t\r\n\t\t\t\t\tticket.paint(g2d, width, ticketHeight, index + 1);\r\n\t\t\t\t\tg2d.translate(0, ticketHeight);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult = PAGE_EXISTS;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t}\r\n\r\nAnd to print it, you would use something like...\r\n\r\n\tPrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\r\n\taset.add(MediaSizeName.ISO_A4);\r\n\taset.add(new PrinterResolution(300, 300, PrinterResolution.DPI));\r\n\taset.add(new MediaPrintableArea(0, 0, 210, 297, MediaPrintableArea.MM));\r\n\r\n\tPrinterJob pj = PrinterJob.getPrinterJob();\r\n\tpj.setPrintable(new TicketPrintable(new Ticket()));\r\n\r\n\tif (pj.printDialog(aset)) {\r\n\t\ttry {\r\n\t\t\tpj.print(aset);\r\n\t\t} catch (PrinterException ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nOn the screen it looks like...\r\n\r\n![Screen][1]\r\n\r\nOn paper it looks like (scaled down for SO)\r\n\r\n![Printed][2]\r\n\r\nNow having said that, I would strongly encourage you to learn JasperReports, which makes this all so much simpler...\r\n\r\n**Updated**\r\n\r\nSo, I was sitting in traffic and thought to myself, I wonder if I can just use scaling to render the `Ticket` to an image, so I thought I&#39;d give it a try...\r\n\r\nThe top image is 72dpi, the bottom image is scaled to 300dpi\r\n\r\n![ScaleComparison][3]\r\n\r\n\tdouble pageWidth = cmsToPixel(21.0f, 300f);\r\n\tdouble pageHeight = cmsToPixel(29.7f, 300f);\r\n\tdouble imageWidth = cmsToPixel(21.0f, 72f);\r\n\tdouble imageHeight = cmsToPixel(29.7f, 72f);\r\n\r\n\tdouble scaleFactor = ImageUtilities.getScaleFactorToFit(\r\n\t\t\tnew Dimension((int) Math.round(imageWidth), (int) Math.round(imageHeight)),\r\n\t\t\tnew Dimension((int) Math.round(pageWidth), (int) Math.round(pageHeight)));\r\n\r\n\tint width = (int) Math.round(pageWidth);\r\n\tint height = (int) Math.round(pageHeight);\r\n\r\n\tBufferedImage img = new BufferedImage(\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tBufferedImage.TYPE_INT_ARGB);\r\n\tGraphics2D g2d = img.createGraphics();\r\n\tg2d.setColor(Color.WHITE);\r\n\tg2d.fill(new Rectangle2D.Double(0, 0, img.getWidth(), img.getHeight()));\r\n\tg2d.scale(scaleFactor, scaleFactor);\r\n\r\n\tTicket ticket = new Ticket();\r\n\tticket.paint(g2d, img.getWidth() / scaleFactor, (img.getHeight() / scaleFactor) / 4, 1);\r\n\tg2d.dispose();\r\n\r\n\ttry {\r\n\t\tImageIO.write(img, &quot;png&quot;, new File(&quot;Ticket.png&quot;));\r\n\t} catch (IOException ex) {\r\n\t\tex.printStackTrace();\r\n\t}\r\n\r\nScale factor algorithms\r\n\r\n\tpublic static double getScaleFactorToFit(Dimension original, Dimension toFit) {\r\n\r\n\t\tdouble dScale = 1d;\r\n\r\n\t\tif (original != null &amp;&amp; toFit != null) {\r\n\r\n\t\t\tdouble dScaleWidth = getScaleFactor(original.width, toFit.width);\r\n\t\t\tdouble dScaleHeight = getScaleFactor(original.height, toFit.height);\r\n\r\n\t\t\tdScale = Math.min(dScaleHeight, dScaleWidth);\r\n\r\n\t\t}\r\n\r\n\t\treturn dScale;\r\n\r\n\t}\r\n\r\n\r\n\tpublic static double getScaleFactor(int iMasterSize, int iTargetSize) {\r\n\r\n\t\tdouble dScale = 1;\r\n\t\tif (iMasterSize &gt; iTargetSize) {\r\n\r\n\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\r\n\t\t}\r\n\r\n\t\treturn dScale;\r\n\r\n\t}\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Nx6k7.png\r\n  [2]: http://i.stack.imgur.com/4o5EF.png\r\n  [3]: http://i.stack.imgur.com/o2ANT.png\r\n\r\n**Note:** This is only really going to work for text and primitive graphics, you put an image into this and it won&#39;t work, the image will be scaled up and look crappy, as demonstrated in the linked answer from before.  In that case, you&#39;d have to design the form to render at 300+dpi and scale the image down to 72dpi","title":"Save JPanel as Image HD Quality","body":"<p>Let's start with the obvious...</p>\n<ul>\n<li>A A4 sheet of paper is 21.0cm x 29.7cm.</li>\n<li>At 300dpi, that makes it 2480.315x3507.874 pixels</li>\n<li>At 72dpi, that makes it 595.2756x841.8898 pixels</li>\n</ul>\n<p>Why's this important?  Java renders to the screen at 72dpi, but is capable of printing at 300dpi (above and below, but this is nice figure).  This means, roughly, you'd to scale the screen image UP by 4 times.  Up scaling is never pleasant, as demonstrated <a href=\"https://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel/26923692#26923692\">here</a></p>\n<p>A better solution would be work with the printer DPI and scale the image down to the screen.</p>\n<p>For convenience sake, you can use something like...</p>\n<pre><code>public static final float CM_PER_INCH = 0.393700787f;\n\npublic static float cmsToPixel(float cms, float dpi) {\n    return cmToInches(cms) * dpi;\n}\n\npublic static float cmToInches(float cms) {\n    return cms * CM_PER_INCH;\n}\n</code></pre>\n<p>To convert from cm's to pixels at a given DPI.</p>\n<p>Now to the fun part.  You &quot;could&quot; use Swing components to render the basic layout, it might be easier, but you'd have to scale the graphics down, as the core printer API assumes a DPI of 72 (don't ask).  Now scaling down generally results in a better output, but there is another solution.</p>\n<p>Instead, you could use the Graphics 2D API and generate the output yourself...</p>\n<pre><code>public static class Ticket {\n\n    public enum TextAlignment {\n\n        LEFT,\n        RIGHT,\n        CENTRE\n    }\n\n    protected static final int STUB_NUMBER_Y_POS = 12;\n\n    private Font plainFont;\n    private Font boldFont;\n\n    private Stroke dashedStroke;\n\n    public void paint(Graphics2D g2d, double pageWidth, double pageHeight, int stubNumber) {\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n        paintLeftStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintBody((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintRightStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintEndStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n\n        g2d = (Graphics2D) g2d.create();\n        g2d.setColor(Color.GRAY);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(0, pageHeight - 1, pageWidth, pageHeight - 1));\n        g2d.dispose();\n\n    }\n\n    protected void paintLeftStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        double stubWidth = pageWidth / 4;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        // Did mention I hate doing inline transformations :P\n        g2d.rotate(Math.toRadians(-90), stubWidth / 2, pageHeight / 2);\n        g2d.translate(0, -((stubWidth - pageHeight) / 2));\n\n        String lines[] = {&quot;MORATUFIESTA&quot;, &quot;&quot;, &quot;Sat. 3 Auguest 2015&quot;, &quot;Adult - $3&quot;};\n        double x = 2;\n        double y = 0;\n        double maxWidth = 0;\n        for (String text : lines) {\n\n            x = calculateHorizontalCenterPositionFor(text, fm, stubWidth);\n            maxWidth = Math.max(maxWidth, fm.stringWidth(text));\n            g2d.drawString(text, (int) Math.round(x), (int) Math.round(y + fm.getAscent()));\n            y += fm.getHeight();\n\n        }\n        double blockWidth = y;\n\n        // Easier then trying to undo the transformation...\n        g2d.dispose();\n        g2d = (Graphics2D) graphics.create();\n\n        String text = &quot;Low&quot;;\n\n        font = getPlainFont().deriveFont(6f);\n        g2d.setFont(font);\n        fm = g2d.getFontMetrics();\n        double xPos = calculateHorizontalCenterPositionFor(text, fm, blockWidth) + 2;\n        double yPos = (pageHeight - maxWidth) / 2;\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos - fm.getAscent()));\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, stubWidth - 8 - fm.getHeight() - fm.getAscent(), STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected Stroke getDashedStroke() {\n\n        if (dashedStroke == null) {\n\n            float dash[] = {10.0f};\n            dashedStroke = new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND, 10f, dash, 0.0f);\n\n        }\n\n        return dashedStroke;\n\n    }\n\n    public Font getPlainFont() {\n\n        if (plainFont == null) {\n\n            plainFont = UIManager.getFont(&quot;Label.font&quot;);\n\n        }\n\n        return plainFont;\n\n    }\n\n    public Font getBoldFont() {\n\n        if (boldFont == null) {\n\n            boldFont = getPlainFont();\n            boldFont = boldFont.deriveFont(Font.BOLD);\n\n        }\n\n        return boldFont;\n\n    }\n\n    protected double calculateHorizontalCenterPositionFor(String text, FontMetrics fm, double width) {\n        return (width - fm.stringWidth(text)) / 2d;\n    }\n\n    protected void paintBody(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        int padding = 8;\n        double xOffset = pageWidth / 4d;\n        \n        graphics.setColor(Color.BLACK);\n\n        double bodyWidth = (pageWidth / 2d);\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setFont(getPlainFont().deriveFont(12f));\n        FontMetrics fm = g2d.getFontMetrics();\n        String text = &quot;Moratu Fiesta&quot;;\n        double xPos = bodyWidth - fm.stringWidth(text) - padding;\n        double yPos = padding;\n\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos + fm.getAscent()));\n        g2d.dispose();\n\n        Font plainFont = getPlainFont().deriveFont(9.5f);\n        TextLine[] addressLines01 = new TextLine[]{\n            new TextLine(&quot;61 Railway Pde North&quot;, plainFont),\n            new TextLine(&quot;Glen Waverley&quot;, plainFont),\n            new TextLine(&quot;03 9836 8673&quot;, plainFont)\n        };\n        TextLine[] addressLines02 = new TextLine[]{\n            new TextLine(&quot;1120, Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;03 9571 5544&quot;, plainFont)\n        };\n        TextLine[] sponsorLines = new TextLine[]{\n            new TextLine(&quot;Proudly supported by&quot;, plainFont),\n            new TextLine(&quot;Quality Groceries&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;Visit for all your grocery needs&quot;, plainFont)\n        };\n\n        Area area = new Area();\n        addTo(g2d, area, addressLines01);\n        addTo(g2d, area, addressLines02);\n        addTo(g2d, area, sponsorLines);\n        int height = area.getBounds().height;\n        double bottomBlockYPos = pageHeight - height - padding;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, addressLines01);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, sponsorLines);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, addressLines02);\n        g2d.dispose();\n\n        plainFont = getPlainFont().deriveFont(10f);\n        TextLine[] textLines = new TextLine[]{\n            new TextLine(&quot;On Saturday, August 3, 2013 from 6.30pm till midnight&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;At 21, Sacred Heart Parish Hall, Johnson Street, Oakleigh&quot;, plainFont)\n        };\n        int blockHeight = getSizeFor(g2d, textLines).height;\n        double mainBlockYPos = (pageHeight - blockHeight) / 2;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, 0, mainBlockYPos, bodyWidth, TextAlignment.CENTRE, textLines);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        Font boldFont = getBoldFont().deriveFont(9f);\n        double upperYPos = (mainBlockYPos + blockHeight);\n        double middleBlockYPos = upperYPos + ((bottomBlockYPos - upperYPos) / 2) - (g2d.getFontMetrics(boldFont).getHeight() / 2);\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, new TextLine(&quot;Melway Ref, 69 FB&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, new TextLine(&quot;Music by REDEMPTION&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, new TextLine(&quot;Donations $30&quot;, boldFont));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(bodyWidth, 0, bodyWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected void drawStubNumber(Graphics2D g2d, double x, double y, int stubNumber) {\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        String text = Integer.toString(stubNumber);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n        g2d.dispose();\n    }\n\n    protected void paintRightStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double xOffset = (pageWidth / 4d) * 3;\n        double stubWidth = (pageWidth / 4d) / 2;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Cafe Little Hut&quot;;\n        Font font = getPlainFont().deriveFont(23f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2d);\n        double y = ((pageHeight - fm.getHeight()) / 2d);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected void paintEndStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double stubWidth = (pageWidth / 4d) / 2;\n        double xOffset = ((pageWidth / 4d) * 3 + stubWidth);\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Entrance&quot;;\n        Font font = getBoldFont().deriveFont(32f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2);\n        double y = ((pageHeight - fm.getHeight()) / 2);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected Dimension drawTextLines(Graphics2D g2d, double xPos, double yPos, double width, TextAlignment textAlignment, TextLine... textLines) {\n\n        Area area = new Area();\n\n        for (TextLine textLine : textLines) {\n            g2d.translate(xPos, yPos);\n            Dimension size = textLine.getBounds(g2d);\n            textLine.paint(g2d, width, textAlignment);\n            area.add(new Area(new Rectangle2D.Double(xPos, yPos, size.width, size.height)));\n            g2d.translate(-xPos, -yPos);\n            yPos += size.height;\n        }\n\n        return area.getBounds().getSize();\n\n    }\n\n    protected void addTo(Graphics2D g2d, Area area, TextLine... textLines) {\n\n        area.add(new Area(new Rectangle(getSizeFor(g2d, textLines))));\n\n    }\n\n    protected Dimension getSizeFor(Graphics2D g2d, TextLine... textLines) {\n\n        int yPos = 0;\n        int width = 0;\n        for (TextLine textLine : textLines) {\n            Dimension size = textLine.getBounds(g2d);\n            yPos += size.height;\n            width = Math.max(size.width, width);\n        }\n\n        return new Dimension(width, yPos);\n\n    }\n\n    protected class TextLine {\n\n        private String text;\n        private Font font;\n\n        public TextLine(String text, Font font) {\n            this.text = text;\n            this.font = font;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        public Font getFont() {\n            return font;\n        }\n\n        public Dimension getBounds(Graphics2D g2d) {\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            return new Dimension(fm.stringWidth(text), fm.getHeight());\n        }\n\n        public void paint(Graphics2D g2d, double width, TextAlignment textAlignment) {\n            Dimension bounds = getBounds(g2d);\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            g2d.setFont(font);\n            double x = 0;\n            switch (textAlignment) {\n                case CENTRE:\n                    x = (width - bounds.width) / 2;\n                    break;\n                case RIGHT:\n                    x = width - bounds.width;\n                    break;\n            }\n            g2d.drawString(getText(), (int) Math.round(x), fm.getAscent());\n        }\n\n    }\n\n}\n</code></pre>\n<p>Why would you do that?  It's easier to wrap a <code>Printable</code> around and print to a printer and you can also &quot;paint&quot; to a component (or image)</p>\n<p>For example...</p>\n<pre><code>public class TicketPrintable implements Printable {\n\n    private Ticket ticket;\n\n    public TicketPrintable(Ticket ticket) {\n        this.ticket = ticket;\n    }\n\n    @Override\n    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\n        int result = NO_SUCH_PAGE;\n        if (pageIndex == 0) {\n            Graphics2D g2d = (Graphics2D) graphics;\n            double width = pageFormat.getImageableWidth();\n            double height = pageFormat.getImageableHeight();\n\n            g2d.translate((int) pageFormat.getImageableX(),\n                            (int) pageFormat.getImageableY());\n            \n            double ticketHeight = height / 4d;\n            for (int index = 0; index &lt; 4; index++) {\n            \n                ticket.paint(g2d, width, ticketHeight, index + 1);\n                g2d.translate(0, ticketHeight);\n                \n            }\n\n            result = PAGE_EXISTS;\n        }\n        return result;\n    }\n\n}\n</code></pre>\n<p>And to print it, you would use something like...</p>\n<pre><code>PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\naset.add(MediaSizeName.ISO_A4);\naset.add(new PrinterResolution(300, 300, PrinterResolution.DPI));\naset.add(new MediaPrintableArea(0, 0, 210, 297, MediaPrintableArea.MM));\n\nPrinterJob pj = PrinterJob.getPrinterJob();\npj.setPrintable(new TicketPrintable(new Ticket()));\n\nif (pj.printDialog(aset)) {\n    try {\n        pj.print(aset);\n    } catch (PrinterException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>On the screen it looks like...</p>\n<p><img src=\"https://i.stack.imgur.com/Nx6k7.png\" alt=\"Screen\" /></p>\n<p>On paper it looks like (scaled down for SO)</p>\n<p><img src=\"https://i.stack.imgur.com/4o5EF.png\" alt=\"Printed\" /></p>\n<p>Now having said that, I would strongly encourage you to learn JasperReports, which makes this all so much simpler...</p>\n<p><strong>Updated</strong></p>\n<p>So, I was sitting in traffic and thought to myself, I wonder if I can just use scaling to render the <code>Ticket</code> to an image, so I thought I'd give it a try...</p>\n<p>The top image is 72dpi, the bottom image is scaled to 300dpi</p>\n<p><img src=\"https://i.stack.imgur.com/o2ANT.png\" alt=\"ScaleComparison\" /></p>\n<pre><code>double pageWidth = cmsToPixel(21.0f, 300f);\ndouble pageHeight = cmsToPixel(29.7f, 300f);\ndouble imageWidth = cmsToPixel(21.0f, 72f);\ndouble imageHeight = cmsToPixel(29.7f, 72f);\n\ndouble scaleFactor = ImageUtilities.getScaleFactorToFit(\n        new Dimension((int) Math.round(imageWidth), (int) Math.round(imageHeight)),\n        new Dimension((int) Math.round(pageWidth), (int) Math.round(pageHeight)));\n\nint width = (int) Math.round(pageWidth);\nint height = (int) Math.round(pageHeight);\n\nBufferedImage img = new BufferedImage(\n        width,\n        height,\n        BufferedImage.TYPE_INT_ARGB);\nGraphics2D g2d = img.createGraphics();\ng2d.setColor(Color.WHITE);\ng2d.fill(new Rectangle2D.Double(0, 0, img.getWidth(), img.getHeight()));\ng2d.scale(scaleFactor, scaleFactor);\n\nTicket ticket = new Ticket();\nticket.paint(g2d, img.getWidth() / scaleFactor, (img.getHeight() / scaleFactor) / 4, 1);\ng2d.dispose();\n\ntry {\n    ImageIO.write(img, &quot;png&quot;, new File(&quot;Ticket.png&quot;));\n} catch (IOException ex) {\n    ex.printStackTrace();\n}\n</code></pre>\n<p>Scale factor algorithms</p>\n<pre><code>public static double getScaleFactorToFit(Dimension original, Dimension toFit) {\n\n    double dScale = 1d;\n\n    if (original != null &amp;&amp; toFit != null) {\n\n        double dScaleWidth = getScaleFactor(original.width, toFit.width);\n        double dScaleHeight = getScaleFactor(original.height, toFit.height);\n\n        dScale = Math.min(dScaleHeight, dScaleWidth);\n\n    }\n\n    return dScale;\n\n}\n\n\npublic static double getScaleFactor(int iMasterSize, int iTargetSize) {\n\n    double dScale = 1;\n    if (iMasterSize &gt; iTargetSize) {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    } else {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    }\n\n    return dScale;\n\n}\n</code></pre>\n<p><strong>Note:</strong> This is only really going to work for text and primitive graphics, you put an image into this and it won't work, the image will be scaled up and look crappy, as demonstrated in the linked answer from before.  In that case, you'd have to design the form to render at 300+dpi and scale the image down to 72dpi</p>\n"}],"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1379,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684368020,"creation_date":1423558733,"question_id":28427566,"body_markdown":"I am trying to save a JPanel as Image (Png, Jpg, whatever) but with Graphics2D the Quality is very low. My JPanel contains mostly text and  I want to print the panel 4 times on a A4 paper size, so that it fills the page.\r\nBut the text is like washed-out when i print the image. I tried to create an A3 image then print it to the smaller A4 size. The quality increases very little, almost insignificantly.\r\n\r\nHere is the function i use to generate the image, based on this ScreenImage.Class i found [here][1] :\r\n\r\n    public void exportToPNG(JRootPane panel){\r\n\t\tDimension size = panel.getSize();\r\n\t\tBufferedImage image = new BufferedImage(\r\n\t\t\t\tsize.width, size.height * 4 /* use the same image 4 times */\r\n\t\t\t\t, BufferedImage.TYPE_INT_RGB);\r\n\t\tGraphics2D g2 = image.createGraphics();\r\n\t\t\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\r\n\t\tg2.drawImage(ScreenImage.createImage(panel), 0, 0, size.width, size.height, null);\r\n\t\tg2.drawImage(ScreenImage.createImage(panel), 0, size.height, size.width, size.height, null);\r\n        g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 2, size.width, size.height, null);\r\n        g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 3, size.width, size.height, null);\r\n\r\n        \r\n        try{\r\n            ImageIO.write(image, &quot;png&quot;, new File(&quot;D:\\\\test-image.png&quot;));\r\n        \r\n        }\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n\t}\r\n\r\n\r\nHere is a sample image i generated:\r\n[click the link..][2]\r\n\r\nYou should see that washed-out effect on the image even when zooming-in a little.\r\n\r\nIs there a way to increase the quality? or a dedicated library?\r\n\r\n\r\n  [1]: https://tips4java.wordpress.com/2008/10/13/screen-image/\r\n  [2]: https://i.stack.imgur.com/MshWC.png","title":"Save JPanel as Image HD Quality","body":"<p>I am trying to save a JPanel as Image (Png, Jpg, whatever) but with Graphics2D the Quality is very low. My JPanel contains mostly text and  I want to print the panel 4 times on a A4 paper size, so that it fills the page.\nBut the text is like washed-out when i print the image. I tried to create an A3 image then print it to the smaller A4 size. The quality increases very little, almost insignificantly.</p>\n\n<p>Here is the function i use to generate the image, based on this ScreenImage.Class i found <a href=\"https://tips4java.wordpress.com/2008/10/13/screen-image/\" rel=\"nofollow\">here</a> :</p>\n\n<pre><code>public void exportToPNG(JRootPane panel){\n    Dimension size = panel.getSize();\n    BufferedImage image = new BufferedImage(\n            size.width, size.height * 4 /* use the same image 4 times */\n            , BufferedImage.TYPE_INT_RGB);\n    Graphics2D g2 = image.createGraphics();\n\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n    g2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n    g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n    g2.drawImage(ScreenImage.createImage(panel), 0, 0, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 2, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 3, size.width, size.height, null);\n\n\n    try{\n        ImageIO.write(image, \"png\", new File(\"D:\\\\test-image.png\"));\n\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Here is a sample image i generated:\n<a href=\"https://i.stack.imgur.com/MshWC.png\" rel=\"nofollow\">click the link..</a></p>\n\n<p>You should see that washed-out effect on the image even when zooming-in a little.</p>\n\n<p>Is there a way to increase the quality? or a dedicated library?</p>\n"},{"tags":["java","lambda","mockito"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1684372243,"post_id":76276845,"comment_id":134510343,"body_markdown":"Does this answer your question? [Mockito verify that a specific lambda has been passed as an argument in mock&#39;s method](https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">Mockito verify that a specific lambda has been passed as an argument in mock&#39;s method</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1684391106,"post_id":76276845,"comment_id":134511928,"body_markdown":"What do you mean by &quot;I can&#39;t perform any verify() on the headers() function.&quot; I don&#39;t see any verify in your question, and you haven&#39;t explained what happens when you call it.","body":"What do you mean by &quot;I can&#39;t perform any verify() on the headers() function.&quot; I don&#39;t see any verify in your question, and you haven&#39;t explained what happens when you call it."},{"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"score":0,"creation_date":1684714428,"post_id":76276845,"comment_id":134552715,"body_markdown":"Thank you Gast&#243;n. You are right, that answered my question.","body":"Thank you Gast&#243;n. You are right, that answered my question."},{"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"score":0,"creation_date":1684714511,"post_id":76276845,"comment_id":134552723,"body_markdown":"This answers my question [https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m](https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m)","body":"This answers my question <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">https://stackoverflow.com/questions/41462913/mockito-verify-&zwnj;&#8203;that-a-specific-lamb&zwnj;&#8203;da-has-been-passed-a&zwnj;&#8203;s-an-argument-in-moc&zwnj;&#8203;ks-m</a>"}],"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684367201,"creation_date":1684366682,"question_id":76276845,"body_markdown":"I am creating a Spring WebClient and adding some personalized headers to the builder:\r\n```\r\n@Component\r\npublic class ApiClient {\r\n\r\n    private final WebClient client;\r\n    \r\n    public Mono&lt;Optional&lt;String&gt;&gt; getApiInfo(final String header) {\r\n        return client\r\n                .get()\r\n                .uri(URI)\r\n                .headers(requestHeaders -&gt; {\r\n                    requestHeaders.add(&quot;Header_name&quot;, &quot;Header_Value&quot;);\r\n                    if (StringUtils.isNotBlank(forwardedHost)) {\r\n                        requestHeaders.add(&quot;Second_header&quot;, header);\r\n                    }\r\n                })\r\n                .retrieve()\r\n                .\r\n\t\t\t\t.\r\n\t\t\t\t.\r\n\t}\r\n}\r\n```\r\nHow can I validate that headers were added by just using Mockito?\r\n\r\nI mocked every builder step, but I can&#39;t perform any verify() on the headers() function.","title":"Using Mockito, how can I perform verify on the parameters I send to a lambda expression?","body":"<p>I am creating a Spring WebClient and adding some personalized headers to the builder:</p>\n<pre><code>@Component\npublic class ApiClient {\n\n    private final WebClient client;\n    \n    public Mono&lt;Optional&lt;String&gt;&gt; getApiInfo(final String header) {\n        return client\n                .get()\n                .uri(URI)\n                .headers(requestHeaders -&gt; {\n                    requestHeaders.add(&quot;Header_name&quot;, &quot;Header_Value&quot;);\n                    if (StringUtils.isNotBlank(forwardedHost)) {\n                        requestHeaders.add(&quot;Second_header&quot;, header);\n                    }\n                })\n                .retrieve()\n                .\n                .\n                .\n    }\n}\n</code></pre>\n<p>How can I validate that headers were added by just using Mockito?</p>\n<p>I mocked every builder step, but I can't perform any verify() on the headers() function.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":12572780,"reputation":3,"user_id":9146328,"display_name":"Alfonso Pimienta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684366959,"creation_date":1684366959,"question_id":76276860,"body_markdown":"I&#39;m experiencing an issue with a test case in my `ProductRepositoryTest` class. The test case `findByActive_ActiveProductsExist` is failing with an `AssertionError`. Here is the error message:\r\n\r\n```\r\njava.lang.AssertionError: \r\nExpecting ArrayList:\r\n[Product [id=2, productType=Scanner, productDescription=Scanner de alta resoluci&#243;n, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\nto contain only:\r\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null],\r\nProduct [id=2, productType=Scanner, productDescription=Scanner de alta resoluci&#243;n, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\nbut could not find the following element(s):\r\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\n```\r\n\r\nThe test case is intended to verify that the `findByActive` method in the `ProductRepository` returns the correct list of active products. However, the assertion is failing because the expected list is not found in the actual list.\r\n\r\nI noticed that there are differences between the input and output IDs. The `activeProduct1` has an expected ID of 1, but the output shows an ID of 2. Similarly, the `activeProduct2` has an expected ID of 2, but the output shows an ID of 4.\r\n\r\nHere is the code for reference:\r\n\r\n```java\r\npackage com.saajf.manager.eewaapro;\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\nimport java.sql.Date;\r\nimport java.util.List;\r\nimport javax.transaction.Transactional;\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport com.saajf.manager.eewaapro.domain.entities.Product;\r\nimport com.saajf.manager.eewaapro.infrastructure.repositories.ProductRepository;\r\n@DataJpaTest\r\n@Transactional\r\npublic class ProductRepositoryTest {\r\n@Autowired\r\nprivate ProductRepository productRepository;\r\n@Autowired\r\nprivate TestEntityManager entityManager;\r\n@BeforeEach\r\nvoid setUp() {\r\n// Limpiar los datos de prueba antes de cada prueba\r\nproductRepository.deleteAll();\r\n}\r\n@AfterEach\r\nvoid tearDown() {\r\n// Limpiar los datos de prueba despu&#233;s de cada prueba\r\nproductRepository.deleteAll();\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByActive_ActiveProductsExist() {\r\nProduct activeProduct1 = new Product();\r\nactiveProduct1.setId(1);\r\nactiveProduct1 = new Product(1, &quot;PC&quot;, &quot;Potente ordenador de escritorio&quot;, &quot;Dell&quot;, &quot;XPS 8900&quot;, &quot;1234567890ABCDEF&quot;,\r\n&quot;Intel Core i7, 16GB RAM, 2TB HDD&quot;, &quot;DISPONIBLE&quot;, &quot;Oficina principal&quot;, null, new Date(0), true,\r\n&quot;Activo&quot;);\r\nProduct activeProduct2 = new Product();\r\nactiveProduct2.setId(2);\r\nactiveProduct2 = new Product(2, &quot;Scanner&quot;, &quot;Scanner de alta resoluci&#243;n&quot;, &quot;Canon&quot;, &quot;Canoscan 9000F Mark II&quot;,\r\n&quot;1234567890ABCDEF&quot;, &quot;Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp&quot;, &quot;EN_USO&quot;, &quot;Oficina principal&quot;, 1,\r\nnew Date(0), true, &quot;Activo&quot;);\r\nProduct inactiveProduct1 = new Product(3, &quot;Impresora&quot;, &quot;Impresora l&#225;ser monocrom&#225;tica&quot;, &quot;HP&quot;,\r\n&quot;LaserJet Pro M15w&quot;, &quot;1234567890ABCDEF&quot;, &quot;Impresi&#243;n r&#225;pida a 19 ppm&quot;, &quot;EN_USO&quot;, &quot;Almac&#233;n&quot;, null,\r\nnew Date(0), false, &quot;Inactivo&quot;);\r\nproductRepository.save(activeProduct1);\r\nproductRepository.save(activeProduct2);\r\nproductRepository.save(inactiveProduct1);\r\n// Verificar el ID asignado al activeProduct1\r\nSystem.out.println(&quot;ID del activeProduct1: &quot; + activeProduct1.getId());\r\nSystem.out.println(&quot;ID del activeProduct2: &quot; + activeProduct2.getId());\r\nList&lt;Product&gt; activeProducts = productRepository.findByActive(true);\r\nfor (Product product : activeProducts) {\r\nSystem.out.println(&quot;ID: &quot; + product.getId());\r\n}\r\nassertThat(activeProducts).containsOnly(activeProduct1, activeProduct2);\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByProductSerialNumber_ProductExists() {\r\nProduct product = new Product();\r\nproduct.setProductSerialNumber(&quot;SN223686007&quot;);\r\nproduct.setProductType(&quot;Electronics&quot;);\r\nproduct.setProductDescription(&quot;Personal Computer&quot;);\r\nproduct.setProductBrand(&quot;Apple&quot;);\r\nproduct.setProductModel(&quot;MacBook Pro&quot;);\r\nproduct.setProductTechnicalFeatures(&quot;M1 chip, 8GB RAM, 256GB SSD&quot;);\r\nproduct.setProductUsageStatus(&quot;Nuevo&quot;);\r\nproduct.setProductLocation(&quot;Office&quot;);\r\nproduct.setAssignedUserProduct(2);\r\nproduct.setProductPurchaseDate(Date.valueOf(&quot;2023-05-11&quot;));\r\nproduct.setActive(false);\r\nproduct.setStatus(&quot;EN_USO&quot;);\r\nentityManager.merge(product);\r\nentityManager.flush();\r\nentityManager.clear();\r\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;SN223686007&quot;);\r\nassertThat(foundProduct).isNotNull();\r\nassertThat(foundProduct.getProductSerialNumber()).isEqualTo(&quot;SN223686007&quot;);\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByProductSerialNumber_ProductNotExists() {\r\n// Intentar buscar un producto por un n&#250;mero de serie inexistente\r\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;XYZ789&quot;);\r\n// Verificar que el producto encontrado sea nulo\r\nassertThat(foundProduct).isNull();\r\n}\r\n}\r\n```\r\n\r\n\r\nI ran the test cases in the class.","title":"AssertionError in test findByActive_ActiveProductsExist","body":"<p>I'm experiencing an issue with a test case in my <code>ProductRepositoryTest</code> class. The test case <code>findByActive_ActiveProductsExist</code> is failing with an <code>AssertionError</code>. Here is the error message:</p>\n<pre><code>java.lang.AssertionError: \nExpecting ArrayList:\n[Product [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nto contain only:\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null],\nProduct [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nbut could not find the following element(s):\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\n</code></pre>\n<p>The test case is intended to verify that the <code>findByActive</code> method in the <code>ProductRepository</code> returns the correct list of active products. However, the assertion is failing because the expected list is not found in the actual list.</p>\n<p>I noticed that there are differences between the input and output IDs. The <code>activeProduct1</code> has an expected ID of 1, but the output shows an ID of 2. Similarly, the <code>activeProduct2</code> has an expected ID of 2, but the output shows an ID of 4.</p>\n<p>Here is the code for reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.saajf.manager.eewaapro;\nimport static org.assertj.core.api.Assertions.assertThat;\nimport java.sql.Date;\nimport java.util.List;\nimport javax.transaction.Transactional;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport com.saajf.manager.eewaapro.domain.entities.Product;\nimport com.saajf.manager.eewaapro.infrastructure.repositories.ProductRepository;\n@DataJpaTest\n@Transactional\npublic class ProductRepositoryTest {\n@Autowired\nprivate ProductRepository productRepository;\n@Autowired\nprivate TestEntityManager entityManager;\n@BeforeEach\nvoid setUp() {\n// Limpiar los datos de prueba antes de cada prueba\nproductRepository.deleteAll();\n}\n@AfterEach\nvoid tearDown() {\n// Limpiar los datos de prueba después de cada prueba\nproductRepository.deleteAll();\n}\n@Test\n@Transactional\nvoid findByActive_ActiveProductsExist() {\nProduct activeProduct1 = new Product();\nactiveProduct1.setId(1);\nactiveProduct1 = new Product(1, &quot;PC&quot;, &quot;Potente ordenador de escritorio&quot;, &quot;Dell&quot;, &quot;XPS 8900&quot;, &quot;1234567890ABCDEF&quot;,\n&quot;Intel Core i7, 16GB RAM, 2TB HDD&quot;, &quot;DISPONIBLE&quot;, &quot;Oficina principal&quot;, null, new Date(0), true,\n&quot;Activo&quot;);\nProduct activeProduct2 = new Product();\nactiveProduct2.setId(2);\nactiveProduct2 = new Product(2, &quot;Scanner&quot;, &quot;Scanner de alta resolución&quot;, &quot;Canon&quot;, &quot;Canoscan 9000F Mark II&quot;,\n&quot;1234567890ABCDEF&quot;, &quot;Resolución óptica de 9600 x 9600 ppp&quot;, &quot;EN_USO&quot;, &quot;Oficina principal&quot;, 1,\nnew Date(0), true, &quot;Activo&quot;);\nProduct inactiveProduct1 = new Product(3, &quot;Impresora&quot;, &quot;Impresora láser monocromática&quot;, &quot;HP&quot;,\n&quot;LaserJet Pro M15w&quot;, &quot;1234567890ABCDEF&quot;, &quot;Impresión rápida a 19 ppm&quot;, &quot;EN_USO&quot;, &quot;Almacén&quot;, null,\nnew Date(0), false, &quot;Inactivo&quot;);\nproductRepository.save(activeProduct1);\nproductRepository.save(activeProduct2);\nproductRepository.save(inactiveProduct1);\n// Verificar el ID asignado al activeProduct1\nSystem.out.println(&quot;ID del activeProduct1: &quot; + activeProduct1.getId());\nSystem.out.println(&quot;ID del activeProduct2: &quot; + activeProduct2.getId());\nList&lt;Product&gt; activeProducts = productRepository.findByActive(true);\nfor (Product product : activeProducts) {\nSystem.out.println(&quot;ID: &quot; + product.getId());\n}\nassertThat(activeProducts).containsOnly(activeProduct1, activeProduct2);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductExists() {\nProduct product = new Product();\nproduct.setProductSerialNumber(&quot;SN223686007&quot;);\nproduct.setProductType(&quot;Electronics&quot;);\nproduct.setProductDescription(&quot;Personal Computer&quot;);\nproduct.setProductBrand(&quot;Apple&quot;);\nproduct.setProductModel(&quot;MacBook Pro&quot;);\nproduct.setProductTechnicalFeatures(&quot;M1 chip, 8GB RAM, 256GB SSD&quot;);\nproduct.setProductUsageStatus(&quot;Nuevo&quot;);\nproduct.setProductLocation(&quot;Office&quot;);\nproduct.setAssignedUserProduct(2);\nproduct.setProductPurchaseDate(Date.valueOf(&quot;2023-05-11&quot;));\nproduct.setActive(false);\nproduct.setStatus(&quot;EN_USO&quot;);\nentityManager.merge(product);\nentityManager.flush();\nentityManager.clear();\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;SN223686007&quot;);\nassertThat(foundProduct).isNotNull();\nassertThat(foundProduct.getProductSerialNumber()).isEqualTo(&quot;SN223686007&quot;);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductNotExists() {\n// Intentar buscar un producto por un número de serie inexistente\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;XYZ789&quot;);\n// Verificar que el producto encontrado sea nulo\nassertThat(foundProduct).isNull();\n}\n}\n</code></pre>\n<p>I ran the test cases in the class.</p>\n"},{"tags":["java","git","github","jgit"],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684365337,"creation_date":1684365337,"answer_id":76276760,"question_id":76276462,"body_markdown":"Looking at [`org.eclipse.jgit.api / Class AddCommand / addFilepattern()`][1], I see:\r\n\r\n&gt; Add a path to a file/directory whose content should be added.\r\n&gt;\r\n&gt; A directory name (e.g. `dir` to add `dir/file1` and `dir/file2`) can also be given to add all files in the directory, recursively.  \r\nFileglobs (e.g. *.c) are not yet supported.\r\n&gt;\r\n&gt; Parameters:  \r\n&gt; `filepattern` - **repository-relative path** of file/directory to add (with `/` as separator)\r\n\r\nThe term &quot;repository-relative&quot; in the documentation for the addFilepattern() method means that the file pattern should be specified relative to the root directory of the repository.\r\n\r\n```\r\n/repo\r\n   /dir1\r\n      file1.txt\r\n   /dir2\r\n      file2.txt\r\n```\r\n\r\nIf you want to add file1.txt to the staging area, you would use addFilepattern(&quot;dir1/file1.txt&quot;), even if the current working directory is dir1 or dir2. This is because the path is relative to the root of the repository (/repo), not the current working directory.\r\n\r\nIf you try to add a file that doesn&#39;t exist in the repository (from the root directory perspective), it won&#39;t be staged, and no changes will be registered when you commit.\r\n\r\nDouble-check the value of postname in `git.add().addFilepattern(postname).call();`, to make sure it is a valid paramter.\r\n\r\n  [1]: https://javadoc.io/doc/org.eclipse.jgit/org.eclipse.jgit/latest/org.eclipse.jgit/org/eclipse/jgit/api/AddCommand.html","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>Looking at <a href=\"https://javadoc.io/doc/org.eclipse.jgit/org.eclipse.jgit/latest/org.eclipse.jgit/org/eclipse/jgit/api/AddCommand.html\" rel=\"nofollow noreferrer\"><code>org.eclipse.jgit.api / Class AddCommand / addFilepattern()</code></a>, I see:</p>\n<blockquote>\n<p>Add a path to a file/directory whose content should be added.</p>\n<p>A directory name (e.g. <code>dir</code> to add <code>dir/file1</code> and <code>dir/file2</code>) can also be given to add all files in the directory, recursively.<br />\nFileglobs (e.g. *.c) are not yet supported.</p>\n<p>Parameters:<br />\n<code>filepattern</code> - <strong>repository-relative path</strong> of file/directory to add (with <code>/</code> as separator)</p>\n</blockquote>\n<p>The term &quot;repository-relative&quot; in the documentation for the addFilepattern() method means that the file pattern should be specified relative to the root directory of the repository.</p>\n<pre><code>/repo\n   /dir1\n      file1.txt\n   /dir2\n      file2.txt\n</code></pre>\n<p>If you want to add file1.txt to the staging area, you would use addFilepattern(&quot;dir1/file1.txt&quot;), even if the current working directory is dir1 or dir2. This is because the path is relative to the root of the repository (/repo), not the current working directory.</p>\n<p>If you try to add a file that doesn't exist in the repository (from the root directory perspective), it won't be staged, and no changes will be registered when you commit.</p>\n<p>Double-check the value of postname in <code>git.add().addFilepattern(postname).call();</code>, to make sure it is a valid paramter.</p>\n"},{"tags":[],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684366873,"creation_date":1684366873,"answer_id":76276856,"question_id":76276462,"body_markdown":"I eventually decided to use \r\n```\r\ngit.add().addFilepattern(&quot;*&quot;).call();\r\n```\r\nwhich was the only thing that worked","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>I eventually decided to use</p>\n<pre><code>git.add().addFilepattern(&quot;*&quot;).call();\n</code></pre>\n<p>which was the only thing that worked</p>\n"}],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76276856,"answer_count":2,"score":1,"last_activity_date":1684366873,"creation_date":1684360797,"question_id":76276462,"body_markdown":"Here is my code:\r\n\r\n```st = &quot;&quot;;\r\n\t\t\t\t\t\t\tpostbody = usabled;\r\n\t\t\t\t\t\t\tString pathToClone = &quot;./repo&quot;;\r\n\t\t\t\t\t        Git git = Git.cloneRepository()\r\n\t\t\t\t\t                .setURI(&quot;https://github.com/Glitch31415/rws.git&quot;)\r\n\t\t\t\t\t                .setDirectory(new File(pathToClone))\r\n\t\t\t\t\t                .call();\r\n\t\t\t\t\t        System.out.println(&quot;remade local repo&quot;);\r\n\t\t\t\t\t        if (windows == true) {\r\n\t\t\t\t\t\t        new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot;, postname);\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        else {\r\n\t\t\t\t\t\t        new File(git.getRepository().getDirectory().getParent() + &quot;/community/&quot;, postname);\r\n\t\t\t\t\t        }\r\n\t\t\t\t        \r\n\t\t\t\t\t        try {\r\n\t\t\t\t\t        \tFileWriter myWriter;\r\n\t\t\t\t\t        \tif (windows == true) {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\r\n\t\t\t\t\t\t\t        System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\r\n\t\t\t\t\t        \t}\r\n\t\t\t\t\t        \telse {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\r\n\t\t\t\t\t\t\t        System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\r\n\t\t\t\t\t        \t}\r\n\r\n\t\t\t\t\t            myWriter.write(postbody);\r\n\t\t\t\t\t            System.out.println(&quot;wrote &quot; + postbody);\r\n\t\t\t\t\t            myWriter.close();\r\n\t\t\t\t\t          } catch (IOException e) {\r\n\t\t\t\t\t            e.printStackTrace();\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        git.add().addFilepattern(postname).call();\r\n\t\t\t\t\t        try {\r\n\t\t\t\t\t        \ttry {\r\n\t\t\t\t\t        \t\tFile myObj;\r\n\t\t\t\t\t        \t\tif (windows == true) {\r\n\t\t\t\t\t\t        \t      myObj = new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\r\n\t\t\t\t\t        \t\t}\r\n\t\t\t\t\t        \t\telse {\r\n\t\t\t\t\t\t        \t      myObj = new File(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\r\n\t\t\t\t\t        \t\t}\r\n\r\n\t\t\t\t\t        \t      Scanner myReader = new Scanner(myObj);\r\n\t\t\t\t\t        \t      while (myReader.hasNextLine()) {\r\n\t\t\t\t\t        \t        st = st + myReader.nextLine() + &quot;\\n&quot;;\r\n\t\t\t\t\t        \t      }\r\n\t\t\t\t\t        \t      myReader.close();\r\n\t\t\t\t\t        \t    } catch (FileNotFoundException e) {\r\n\t\t\t\t\t        \t      e.printStackTrace();\r\n\t\t\t\t\t        \t    }\r\n\t\t\t\t\t            System.out.println(&quot;index was read as &#39;&quot; + st + &quot;&#39;&quot;);\r\n\t\t\t\t\t            FileWriter myWriter;\r\n\t\t\t\t\t            if (windows == true) {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t            else {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\r\n\t\t\t\t\t            }\r\n\r\n\t\t\t\t\t            \r\n\t\t\t\t\t            myWriter.write(st+postname+&quot;\\n&quot;);\r\n\t\t\t\t\t            myWriter.close();\r\n\t\t\t\t\t          } catch (IOException e) {\r\n\t\t\t\t\t            e.printStackTrace();\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        git.add().addFilepattern(&quot;/community/index&quot;).call();\r\n\t\t\t\t\t        git.commit().setMessage(&quot;Committed from server&quot;).call();\r\n\t\t\t\t\t        PushCommand pushCommand = git.push();\r\n\t\t\t\t\t        pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider(&quot;key&quot;, &quot;&quot;));\r\n\t\t\t\t\t        pushCommand.call();\r\n\t\t\t\t\t        Path directory = Path.of(pathToClone);\r\n\t\t\t\t\t        Files.walk(directory)\r\n\t\t\t                .sorted(Comparator.reverseOrder())\r\n\t\t\t                .map(Path::toFile)\r\n\t\t\t                .forEach(File::delete);\r\n```\r\n\r\nThis code creates a new file, writes to it, then modifies another file and appends something onto the end of it. All this works in the local cloned repo. But, when I run commit and push, nothing changes in the online repo. It says there was a new commit, but it also says &quot;Showing 0 changed files with 0 additions and 0 deletions.&quot; Basically an empty commit. What am I doing wrong? How do I just copy the local repo into the online one?\r\nAlso, if the git.add() command is in the wrong spot, it&#39;s because I moved it in front of the changes to try to fix the problem. It used to be behind them.","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>Here is my code:</p>\n<pre><code>                            postbody = usabled;\n                            String pathToClone = &quot;./repo&quot;;\n                            Git git = Git.cloneRepository()\n                                    .setURI(&quot;https://github.com/Glitch31415/rws.git&quot;)\n                                    .setDirectory(new File(pathToClone))\n                                    .call();\n                            System.out.println(&quot;remade local repo&quot;);\n                            if (windows == true) {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot;, postname);\n                            }\n                            else {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;/community/&quot;, postname);\n                            }\n                        \n                            try {\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                }\n\n                                myWriter.write(postbody);\n                                System.out.println(&quot;wrote &quot; + postbody);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(postname).call();\n                            try {\n                                try {\n                                    File myObj;\n                                    if (windows == true) {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                    }\n                                    else {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                    }\n\n                                      Scanner myReader = new Scanner(myObj);\n                                      while (myReader.hasNextLine()) {\n                                        st = st + myReader.nextLine() + &quot;\\n&quot;;\n                                      }\n                                      myReader.close();\n                                    } catch (FileNotFoundException e) {\n                                      e.printStackTrace();\n                                    }\n                                System.out.println(&quot;index was read as '&quot; + st + &quot;'&quot;);\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                }\n\n                                \n                                myWriter.write(st+postname+&quot;\\n&quot;);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(&quot;/community/index&quot;).call();\n                            git.commit().setMessage(&quot;Committed from server&quot;).call();\n                            PushCommand pushCommand = git.push();\n                            pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider(&quot;key&quot;, &quot;&quot;));\n                            pushCommand.call();\n                            Path directory = Path.of(pathToClone);\n                            Files.walk(directory)\n                            .sorted(Comparator.reverseOrder())\n                            .map(Path::toFile)\n                            .forEach(File::delete);\n</code></pre>\n<p>This code creates a new file, writes to it, then modifies another file and appends something onto the end of it. All this works in the local cloned repo. But, when I run commit and push, nothing changes in the online repo. It says there was a new commit, but it also says &quot;Showing 0 changed files with 0 additions and 0 deletions.&quot; Basically an empty commit. What am I doing wrong? How do I just copy the local repo into the online one?\nAlso, if the git.add() command is in the wrong spot, it's because I moved it in front of the changes to try to fix the problem. It used to be behind them.</p>\n"},{"tags":["java","spring-boot","thymeleaf","pdf-generation","itext7"],"owner":{"account_id":18753354,"reputation":1,"user_id":13673967,"display_name":"sophie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684366607,"creation_date":1684366607,"question_id":76276840,"body_markdown":"I want to generate in SpringBoot pdf file from html with styles and with using cyrillic letters. Is there any solution so that I could convert html file as it is to pdf, including cyrillic alphabet and style?\r\n```\r\n @GetMapping(&quot;/generatePDF&quot;)\r\n    public void generateInvoice(HttpServletResponse response, HttpServletRequest request){\r\n\r\n        try (OutputStream outputStream = response.getOutputStream()) {\r\n            response.setContentType(MediaType.APPLICATION_PDF_VALUE);\r\n\r\n            Context context = new Context();\r\n            context.setVariable(&quot;user&quot;, userService.findUserById(1L));\r\n\r\n            String htmlContent = templateEngine.process(&quot;welcome&quot;, context);\r\n\r\n            Document document = Jsoup.parse(htmlContent);\r\n            document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\r\n            document.outputSettings().charset(StandardCharsets.UTF_8);\r\n\r\n            String modifiedHtml = document.html().replaceAll(&quot;&amp;nbsp;&quot;, &quot; &quot;);\r\n            ITextRenderer renderer = new ITextRenderer();\r\n\r\n            renderer.getFontResolver().addFont(&quot;src/main/java/com/example/textpdf/Arial Unicode MS.ttf&quot;, &quot;Identity-H&quot;, BaseFont.EMBEDDED);\r\n\r\n            renderer.setDocumentFromString(modifiedHtml);\r\n            renderer.layout();\r\n            renderer.createPDF(outputStream);\r\n        } catch (IOException | DocumentException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nand welcome.html file: \r\n \r\n```\r\n   &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta content=&#39;text/html; charset=utf-8&#39; charset=&quot;UTF-8&quot;/&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h3 style=&quot;text-align: center; color: green&quot;&gt;\r\n    &lt;span style=&quot;font-family: Arial, sans-serif; font-size:16px; font-weight: normal;color: blue&quot; th:text=&quot;&#39;Привіт &#39;+ ${user.firstName + &#39; &#39; + user.lastName}&quot;&gt;&lt;/span&gt;\r\n&lt;/h3&gt;\r\n&lt;h2&gt;Привет&lt;/h2&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI also tried to use Paragraph class but it doesn&#39;t add styles of html file.","title":"Generate PDF with Cyrillic letters using IText","body":"<p>I want to generate in SpringBoot pdf file from html with styles and with using cyrillic letters. Is there any solution so that I could convert html file as it is to pdf, including cyrillic alphabet and style?</p>\n<pre><code> @GetMapping(&quot;/generatePDF&quot;)\n    public void generateInvoice(HttpServletResponse response, HttpServletRequest request){\n\n        try (OutputStream outputStream = response.getOutputStream()) {\n            response.setContentType(MediaType.APPLICATION_PDF_VALUE);\n\n            Context context = new Context();\n            context.setVariable(&quot;user&quot;, userService.findUserById(1L));\n\n            String htmlContent = templateEngine.process(&quot;welcome&quot;, context);\n\n            Document document = Jsoup.parse(htmlContent);\n            document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\n            document.outputSettings().charset(StandardCharsets.UTF_8);\n\n            String modifiedHtml = document.html().replaceAll(&quot;&amp;nbsp;&quot;, &quot; &quot;);\n            ITextRenderer renderer = new ITextRenderer();\n\n            renderer.getFontResolver().addFont(&quot;src/main/java/com/example/textpdf/Arial Unicode MS.ttf&quot;, &quot;Identity-H&quot;, BaseFont.EMBEDDED);\n\n            renderer.setDocumentFromString(modifiedHtml);\n            renderer.layout();\n            renderer.createPDF(outputStream);\n        } catch (IOException | DocumentException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>and welcome.html file:</p>\n<pre><code>   &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta content='text/html; charset=utf-8' charset=&quot;UTF-8&quot;/&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3 style=&quot;text-align: center; color: green&quot;&gt;\n    &lt;span style=&quot;font-family: Arial, sans-serif; font-size:16px; font-weight: normal;color: blue&quot; th:text=&quot;'Привіт '+ ${user.firstName + ' ' + user.lastName}&quot;&gt;&lt;/span&gt;\n&lt;/h3&gt;\n&lt;h2&gt;Привет&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I also tried to use Paragraph class but it doesn't add styles of html file.</p>\n"},{"tags":["java","spring-boot","maven","lombok","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":8059842,"reputation":41,"user_id":6075710,"display_name":"Oladipupo Aina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586573569,"creation_date":1586573569,"answer_id":61151532,"question_id":61143001,"body_markdown":"Eventually resolved this by overriding the default compile goal during the compile phase using execution as shown below:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;Compile With Annotation Processing&lt;/id&gt;\r\n                &lt;phase&gt;compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;compile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.18.12&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.2.0.Final&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>Eventually resolved this by overriding the default compile goal during the compile phase using execution as shown below:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;Compile With Annotation Processing&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;1.18.12&lt;/version&gt;\n                    &lt;/path&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;1.2.0.Final&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n                &lt;compilerArgs&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5043954,"reputation":11,"user_id":4050555,"display_name":"Việt Đỗ"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684365992,"creation_date":1648008838,"answer_id":71581751,"question_id":61143001,"body_markdown":"If your lombok and mapstruct don&#39;t play well with each other, you can use ```lombok-mapstruct-binding``` to resolve the conflict (You don&#39;t need to put it in the ```execution``` tag). The key is to include the binding artifact in the same place with the lombok and mapstruct annotation processors configuration. It works splendid in my case!\r\n    \r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          ..\r\n          &lt;configuration&gt;\r\n            ..\r\n            &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;1.18.20&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n              &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;plugins&gt;\r\n    &lt;build&gt;","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>If your lombok and mapstruct don't play well with each other, you can use <code>lombok-mapstruct-binding</code> to resolve the conflict (You don't need to put it in the <code>execution</code> tag). The key is to include the binding artifact in the same place with the lombok and mapstruct annotation processors configuration. It works splendid in my case!</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      ..\n      &lt;configuration&gt;\n        ..\n        &lt;annotationProcessorPaths&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n          &lt;version&gt;0.2.0&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/path&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/plugin&gt;\n  &lt;plugins&gt;\n&lt;build&gt;\n</code></pre>\n"}],"owner":{"account_id":8059842,"reputation":41,"user_id":6075710,"display_name":"Oladipupo Aina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3269,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684365992,"creation_date":1586530755,"question_id":61143001,"body_markdown":"I have a spring boot project that has lombok and mapstruct and uses maven as the build tool. I need the annotations to be processed at compile time with the resultant generated sources packaged with the final jar. The build is successful. However, the final jar is missing the mapstruct implementation class. The error when I try to start the spring boot application is:\r\n\r\n&gt; ***************************\r\n&gt;  APPLICATION FAILED TO START\r\n&gt; ***************************\r\n&gt; \r\n&gt; Description:\r\n&gt; \r\n&gt; Field salesforceObjectMapper in\r\n&gt; com.some_org.service.salesforce.object.processor.SalesforceObjectProcessor\r\n&gt; required a bean of type\r\n&gt; &#39;com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper&#39;\r\n&gt; that could not be found.\r\n&gt; \r\n&gt; \r\n&gt; Action:\r\n&gt; \r\n&gt; Consider defining a bean of type\r\n&gt; &#39;com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper&#39;\r\n&gt; in your configuration.\r\n\r\nHere is my maven-compiler-plugin setup:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;1.8&lt;/source&gt;\r\n            &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;annotationProcessorPaths&gt;\r\n                &lt;path&gt;\r\n                    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.18.12&lt;/version&gt;\r\n                &lt;/path&gt;\r\n                &lt;path&gt;\r\n                    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.0.Final&lt;/version&gt;\r\n                &lt;/path&gt;\r\n            &lt;/annotationProcessorPaths&gt;\r\n            &lt;compilerArgs&gt;\r\n                &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\r\n                &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\r\n            &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>I have a spring boot project that has lombok and mapstruct and uses maven as the build tool. I need the annotations to be processed at compile time with the resultant generated sources packaged with the final jar. The build is successful. However, the final jar is missing the mapstruct implementation class. The error when I try to start the spring boot application is:</p>\n\n<blockquote>\n  <hr>\n  \n  <p>APPLICATION FAILED TO START</p>\n  \n  <hr>\n  \n  <p>Description:</p>\n  \n  <p>Field salesforceObjectMapper in\n  com.some_org.service.salesforce.object.processor.SalesforceObjectProcessor\n  required a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  that could not be found.</p>\n  \n  <p>Action:</p>\n  \n  <p>Consider defining a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  in your configuration.</p>\n</blockquote>\n\n<p>Here is my maven-compiler-plugin setup:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.12&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.2.0.Final&lt;/version&gt;\n            &lt;/path&gt;\n        &lt;/annotationProcessorPaths&gt;\n        &lt;compilerArgs&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n        &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","inheritance","constructor"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1684352982,"post_id":76275687,"comment_id":134507775,"body_markdown":"If you mean &quot;advertisement&quot;, the abbreviation in English is &quot;ad&quot; with a single &quot;d&quot;, fyi.","body":"If you mean &quot;advertisement&quot;, the abbreviation in English is &quot;ad&quot; with a single &quot;d&quot;, fyi."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1684353277,"post_id":76275687,"comment_id":134507821,"body_markdown":"What you need is to call the superconstructor in `PrintedAdd`, and yes, you will have to repeat the variables.","body":"What you need is to call the superconstructor in <code>PrintedAdd</code>, and yes, you will have to repeat the variables."},{"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"score":0,"creation_date":1684366468,"post_id":76275687,"comment_id":134509850,"body_markdown":"For help in removing a lot boiler-plate code, you might want to have a look at Project Lombok - https://projectlombok.org","body":"For help in removing a lot boiler-plate code, you might want to have a look at Project Lombok - <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">projectlombok.org</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684365631,"creation_date":1684353667,"answer_id":76275808,"question_id":76275687,"body_markdown":"In your code:\r\n\r\n    PrintedAdd ad2 = new PrintedAdd(10,20,30);\r\n\r\nThis new `PrintedAdd` object (also an `Advertisement`) has `null` in its two inherited member fields, `ID` and `description`. You neglected to invoke a constructor (or setters) to specify those values, so they default to `null`.  \r\n\r\nSo yes, if you want a subclass to have 5 fields, 2 inherited, and 3 defined on the subclass itself, at run time you need to pass 5 values (primitives or object references). You can pass to a constructor, and/or you can pass via setter methods. Or you could use a [dependency injection][1] framework such as [*Jakarta Contexts and Dependency Injection*][2], [*Google Guice*][3], or [*Spring*][4]. Otherwise, you get default values in member field; for object references that means `null`. \r\n\r\nIn your particular case, your objects are read-only, with getters but no setters. So that eliminates the setters option. And in your case, a dependency injection framework is not appropriate, as that is for providing resources and services, not for individual values such as an ID or description. So, that leaves the constructor option. &#128073; You should write the subclass to have a constructor taking 5 arguments, for the 2 inherited fields and the 3 subclass-specific fields.\r\n\r\nBe aware that a subclass’ constructor can call a superclass’ constructor. See existing Question such as [*Calling superclass from a subclass constructor in Java*](https://stackoverflow.com/q/19326229/642706). \r\n\r\n\r\n\r\nHere is some example code, and some notes.\r\n\r\n- Your superclass should be marked `abstract` as you intend only to instantiate the subclasses, never the superclass. You may want to read [*Constructors in Java Abstract Classes*](https://www.baeldung.com/java-abstract-classes-constructors) by [baeldung][5]. And read Question, [*Can an abstract class have a constructor?*](https://stackoverflow.com/q/260666/642706). \r\n- Since you know all subclasses at compile time, and do not expect new ones to be dynamically added at runtime, you can [seal the superclass][6]. Sealed classes and interfaces restrict which other classes or interfaces may extend or implement them. (Not important for your Question, just a note for modern Java programming.)\r\n- In Java naming conventions, a member field should be name with an initial lowercase letter. So, `first`, not `First`. And `id`, not `ID`. All uppercase by convention means a [constant][7]. \r\n- For simplicity, I replaced your multiple member fields on `PrintAd` to a single `LocalDate`. \r\n- &#128073; Note how it makes sense to pass the id and description in each constructor — there is no other way to discern what the value should be for those fields.\r\n\r\nThe superclass:\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\npublic abstract sealed class Advertisement\r\n        permits PrintAd, WebAd, RadioAd\r\n{\r\n    // Member fields. Read-only, via getter methods.\r\n\r\n    private final UUID id;\r\n    private final String description;\r\n\r\n    // Constructors\r\n\r\n    public Advertisement ( final UUID id ,\r\n                           final String description )\r\n    {\r\n        this.id = id;\r\n        this.description = description;\r\n    }\r\n\r\n    // Getters\r\n\r\n    public UUID getId ( )\r\n    {\r\n        return id;\r\n    }\r\n\r\n    public String getDescription ( )\r\n    {\r\n        return description;\r\n    }\r\n\r\n    // `Object` overrides\r\n\r\n    @Override\r\n    public boolean equals ( Object o )\r\n    {\r\n        if ( this == o ) return true;\r\n        if ( o == null || getClass ( ) != o.getClass ( ) ) return false;\r\n        Advertisement that = ( Advertisement ) o;\r\n        return Objects.equals ( id , that.id );\r\n    }\r\n\r\n    @Override\r\n    public int hashCode ( )\r\n    {\r\n        return Objects.hash ( id );\r\n    }\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;Advertisement[&quot; +\r\n                &quot;id=&quot; + id + &quot;, &quot; +\r\n                &quot;description=&quot; + description + &#39;]&#39;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nEach of the subclasses, with a third one `RadioAd` just for fun:\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.UUID;\r\n\r\npublic final class PrintAd extends Advertisement\r\n{\r\n    private final LocalDate runDate;\r\n\r\n    public PrintAd ( final UUID id , final String description , final LocalDate runDate )\r\n    {\r\n        super ( id , description );\r\n        this.runDate = runDate;\r\n    }\r\n\r\n    public LocalDate getRunDate ( )\r\n    {\r\n        return runDate;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.net.URL;\r\nimport java.util.UUID;\r\n\r\npublic final class WebAd extends Advertisement\r\n{\r\n    private final URL url;\r\n\r\n    public WebAd ( final UUID id , final String description , final URL url )\r\n    {\r\n        super ( id , description );\r\n        this.url = url;\r\n    }\r\n\r\n    public URL getUrl ( )\r\n    {\r\n        return url;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.time.LocalTime;\r\nimport java.util.UUID;\r\n\r\npublic final class RadioAd extends Advertisement\r\n{\r\n    private final LocalTime airTime;\r\n\r\n    public RadioAd ( final UUID id , final String description , final LocalTime airTime )\r\n    {\r\n        super ( id , description );\r\n        this.airTime = airTime;\r\n    }\r\n\r\n    public LocalTime getAirTime ( )\r\n    {\r\n        return this.airTime;\r\n    }\r\n}\r\n```\r\n\r\nAnd an app to exercise those business logic classes.\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URI;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalTime;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        List &lt; Advertisement &gt; ads = null;\r\n        try\r\n        {\r\n            ads =\r\n                    List.of (\r\n                            new PrintAd (\r\n                                    UUID.fromString ( &quot;a71330e7-131f-4d10-beac-4e8ffc21887f&quot; ) ,\r\n                                    &quot;Example print ad.&quot; ,\r\n                                    LocalDate.now ( )\r\n                            ) ,\r\n                            new WebAd (\r\n                                    UUID.fromString ( &quot;8aafa2cf-03dc-452b-a84d-c61d75964955&quot; ) ,\r\n                                    &quot;Example web ad.&quot; ,\r\n                                    URI.create ( &quot;https://www.DailyBugle.com/ads&quot; ).toURL ( )\r\n                            ) ,\r\n                            new RadioAd (\r\n                                    UUID.fromString ( &quot;e21b187c-01e2-44da-9a26-5debb9146cf6&quot; ) ,\r\n                                    &quot;Example radio ad.&quot; ,\r\n                                    LocalTime.NOON\r\n                            )\r\n                    );\r\n        }\r\n        catch ( MalformedURLException e ) { throw new RuntimeException ( e ); }\r\n\r\n        System.out.println ( &quot;ads = &quot; + ads );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;ads = [Advertisement[id=a71330e7-131f-4d10-beac-4e8ffc21887f, description=Example print ad.], Advertisement[id=8aafa2cf-03dc-452b-a84d-c61d75964955, description=Example web ad.], Advertisement[id=e21b187c-01e2-44da-9a26-5debb9146cf6, description=Example radio ad.]]\r\n\r\n\r\n----------\r\n\r\n\r\nTo learn more, see the [*The Java Tutorials*][8] provided by Oracle Corp free of cost:\r\n\r\n - [*Controlling Access to Members of a Class*][9]\r\n - [*Inheritance*][10]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dependency_injection\r\n  [2]: https://jakarta.ee/specifications/cdi/\r\n  [3]: https://en.wikipedia.org/wiki/Google_Guice\r\n  [4]: https://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_(dependency_injection)\r\n  [5]: https://www.baeldung.com/author/baeldung\r\n  [6]: https://openjdk.org/jeps/409\r\n  [7]: https://en.wikipedia.org/wiki/Constant_(computer_programming)\r\n  [8]: https://docs.oracle.com/javase/tutorial/index.html\r\n  [9]: https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\r\n  [10]: https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>In your code:</p>\n<pre><code>PrintedAdd ad2 = new PrintedAdd(10,20,30);\n</code></pre>\n<p>This new <code>PrintedAdd</code> object (also an <code>Advertisement</code>) has <code>null</code> in its two inherited member fields, <code>ID</code> and <code>description</code>. You neglected to invoke a constructor (or setters) to specify those values, so they default to <code>null</code>.</p>\n<p>So yes, if you want a subclass to have 5 fields, 2 inherited, and 3 defined on the subclass itself, at run time you need to pass 5 values (primitives or object references). You can pass to a constructor, and/or you can pass via setter methods. Or you could use a <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">dependency injection</a> framework such as <a href=\"https://jakarta.ee/specifications/cdi/\" rel=\"nofollow noreferrer\"><em>Jakarta Contexts and Dependency Injection</em></a>, <a href=\"https://en.wikipedia.org/wiki/Google_Guice\" rel=\"nofollow noreferrer\"><em>Google Guice</em></a>, or <a href=\"https://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_(dependency_injection)\" rel=\"nofollow noreferrer\"><em>Spring</em></a>. Otherwise, you get default values in member field; for object references that means <code>null</code>.</p>\n<p>In your particular case, your objects are read-only, with getters but no setters. So that eliminates the setters option. And in your case, a dependency injection framework is not appropriate, as that is for providing resources and services, not for individual values such as an ID or description. So, that leaves the constructor option. 👉 You should write the subclass to have a constructor taking 5 arguments, for the 2 inherited fields and the 3 subclass-specific fields.</p>\n<p>Be aware that a subclass’ constructor can call a superclass’ constructor. See existing Question such as <a href=\"https://stackoverflow.com/q/19326229/642706\"><em>Calling superclass from a subclass constructor in Java</em></a>.</p>\n<p>Here is some example code, and some notes.</p>\n<ul>\n<li>Your superclass should be marked <code>abstract</code> as you intend only to instantiate the subclasses, never the superclass. You may want to read <a href=\"https://www.baeldung.com/java-abstract-classes-constructors\" rel=\"nofollow noreferrer\"><em>Constructors in Java Abstract Classes</em></a> by <a href=\"https://www.baeldung.com/author/baeldung\" rel=\"nofollow noreferrer\">baeldung</a>. And read Question, <a href=\"https://stackoverflow.com/q/260666/642706\"><em>Can an abstract class have a constructor?</em></a>.</li>\n<li>Since you know all subclasses at compile time, and do not expect new ones to be dynamically added at runtime, you can <a href=\"https://openjdk.org/jeps/409\" rel=\"nofollow noreferrer\">seal the superclass</a>. Sealed classes and interfaces restrict which other classes or interfaces may extend or implement them. (Not important for your Question, just a note for modern Java programming.)</li>\n<li>In Java naming conventions, a member field should be name with an initial lowercase letter. So, <code>first</code>, not <code>First</code>. And <code>id</code>, not <code>ID</code>. All uppercase by convention means a <a href=\"https://en.wikipedia.org/wiki/Constant_(computer_programming)\" rel=\"nofollow noreferrer\">constant</a>.</li>\n<li>For simplicity, I replaced your multiple member fields on <code>PrintAd</code> to a single <code>LocalDate</code>.</li>\n<li>👉 Note how it makes sense to pass the id and description in each constructor — there is no other way to discern what the value should be for those fields.</li>\n</ul>\n<p>The superclass:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.util.Objects;\nimport java.util.UUID;\n\npublic abstract sealed class Advertisement\n        permits PrintAd, WebAd, RadioAd\n{\n    // Member fields. Read-only, via getter methods.\n\n    private final UUID id;\n    private final String description;\n\n    // Constructors\n\n    public Advertisement ( final UUID id ,\n                           final String description )\n    {\n        this.id = id;\n        this.description = description;\n    }\n\n    // Getters\n\n    public UUID getId ( )\n    {\n        return id;\n    }\n\n    public String getDescription ( )\n    {\n        return description;\n    }\n\n    // `Object` overrides\n\n    @Override\n    public boolean equals ( Object o )\n    {\n        if ( this == o ) return true;\n        if ( o == null || getClass ( ) != o.getClass ( ) ) return false;\n        Advertisement that = ( Advertisement ) o;\n        return Objects.equals ( id , that.id );\n    }\n\n    @Override\n    public int hashCode ( )\n    {\n        return Objects.hash ( id );\n    }\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;Advertisement[&quot; +\n                &quot;id=&quot; + id + &quot;, &quot; +\n                &quot;description=&quot; + description + ']';\n    }\n\n}\n</code></pre>\n<p>Each of the subclasses, with a third one <code>RadioAd</code> just for fun:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic final class PrintAd extends Advertisement\n{\n    private final LocalDate runDate;\n\n    public PrintAd ( final UUID id , final String description , final LocalDate runDate )\n    {\n        super ( id , description );\n        this.runDate = runDate;\n    }\n\n    public LocalDate getRunDate ( )\n    {\n        return runDate;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.URL;\nimport java.util.UUID;\n\npublic final class WebAd extends Advertisement\n{\n    private final URL url;\n\n    public WebAd ( final UUID id , final String description , final URL url )\n    {\n        super ( id , description );\n        this.url = url;\n    }\n\n    public URL getUrl ( )\n    {\n        return url;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalTime;\nimport java.util.UUID;\n\npublic final class RadioAd extends Advertisement\n{\n    private final LocalTime airTime;\n\n    public RadioAd ( final UUID id , final String description , final LocalTime airTime )\n    {\n        super ( id , description );\n        this.airTime = airTime;\n    }\n\n    public LocalTime getAirTime ( )\n    {\n        return this.airTime;\n    }\n}\n</code></pre>\n<p>And an app to exercise those business logic classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.MalformedURLException;\nimport java.net.URI;\nimport java.time.LocalDate;\nimport java.time.LocalTime;\nimport java.util.List;\nimport java.util.UUID;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        List &lt; Advertisement &gt; ads = null;\n        try\n        {\n            ads =\n                    List.of (\n                            new PrintAd (\n                                    UUID.fromString ( &quot;a71330e7-131f-4d10-beac-4e8ffc21887f&quot; ) ,\n                                    &quot;Example print ad.&quot; ,\n                                    LocalDate.now ( )\n                            ) ,\n                            new WebAd (\n                                    UUID.fromString ( &quot;8aafa2cf-03dc-452b-a84d-c61d75964955&quot; ) ,\n                                    &quot;Example web ad.&quot; ,\n                                    URI.create ( &quot;https://www.DailyBugle.com/ads&quot; ).toURL ( )\n                            ) ,\n                            new RadioAd (\n                                    UUID.fromString ( &quot;e21b187c-01e2-44da-9a26-5debb9146cf6&quot; ) ,\n                                    &quot;Example radio ad.&quot; ,\n                                    LocalTime.NOON\n                            )\n                    );\n        }\n        catch ( MalformedURLException e ) { throw new RuntimeException ( e ); }\n\n        System.out.println ( &quot;ads = &quot; + ads );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>ads = [Advertisement[id=a71330e7-131f-4d10-beac-4e8ffc21887f, description=Example print ad.], Advertisement[id=8aafa2cf-03dc-452b-a84d-c61d75964955, description=Example web ad.], Advertisement[id=e21b187c-01e2-44da-9a26-5debb9146cf6, description=Example radio ad.]]</p>\n</blockquote>\n<hr />\n<p>To learn more, see the <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\"><em>The Java Tutorials</em></a> provided by Oracle Corp free of cost:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\"><em>Controlling Access to Members of a Class</em></a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\" rel=\"nofollow noreferrer\"><em>Inheritance</em></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684363756,"creation_date":1684354293,"answer_id":76275881,"question_id":76275687,"body_markdown":"One way to complete this task is to create a static field within the `Advertisement` class.\r\n\r\nThen, within your `Advertisement` constructor, increment this field by `1`, and assign it to your `ID` field.\r\n\r\nConsider the following.\r\n\r\n```java\r\npublic class Advertisement {\r\n    private static int universalId = 0;\r\n\r\n    private int ID;\r\n    private String description;\r\n\r\n    protected Advertisement() {\r\n        ID = universalId++;\r\n    }\r\n\r\n    public Advertisement(String description) {\r\n        this();\r\n        this.description = description;\r\n    }\r\n\r\n    public int getID() {\r\n        return ID;\r\n    }\r\n}\r\n```\r\n\r\nThen, for your sub-classes, within their constructors&#39;, make a call to the super constructor, as follows.\r\n\r\n```java\r\npublic class PrintedAdd extends Advertisement {\r\n    private int First;   //first page cost\r\n    private int Middle;  //middle page cost\r\n    private int Last;    //last page cost\r\n\r\n    public PrintedAdd(int First, int Middle, int Last) {\r\n        super();\r\n        this.First = First;\r\n        this.Middle = Middle;\r\n        this.Last = Last;\r\n    }\r\n\r\n    public int getFirst() {\r\n        return First;\r\n    }\r\n}\r\n```\r\n\r\nThus, making a call to `ad.getID()` should produce `0`, and making a call to `ad2.getID()` should produce `1`.","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>One way to complete this task is to create a static field within the <code>Advertisement</code> class.</p>\n<p>Then, within your <code>Advertisement</code> constructor, increment this field by <code>1</code>, and assign it to your <code>ID</code> field.</p>\n<p>Consider the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Advertisement {\n    private static int universalId = 0;\n\n    private int ID;\n    private String description;\n\n    protected Advertisement() {\n        ID = universalId++;\n    }\n\n    public Advertisement(String description) {\n        this();\n        this.description = description;\n    }\n\n    public int getID() {\n        return ID;\n    }\n}\n</code></pre>\n<p>Then, for your sub-classes, within their constructors', make a call to the super constructor, as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PrintedAdd extends Advertisement {\n    private int First;   //first page cost\n    private int Middle;  //middle page cost\n    private int Last;    //last page cost\n\n    public PrintedAdd(int First, int Middle, int Last) {\n        super();\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n\n    public int getFirst() {\n        return First;\n    }\n}\n</code></pre>\n<p>Thus, making a call to <code>ad.getID()</code> should produce <code>0</code>, and making a call to <code>ad2.getID()</code> should produce <code>1</code>.</p>\n"}],"owner":{"account_id":16238085,"reputation":131,"user_id":11725128,"display_name":"Spiros Skouras"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1684365631,"creation_date":1684352699,"question_id":76275687,"body_markdown":"Creating a program that manages advertisements. Every ad will have 2 common attributes 1: ID, 2: Description.  \r\nDepending if the ad is for a webpage or for a newspaper for example it will have different costs per page, words or duration it is shown.\r\n\r\nI have 3 files\r\n\r\n1. Main.java\r\n2. Advertisement.java\r\n3. PrintedAd.java\r\n4. WebpageAd.java\r\n\r\n**Advertisement.java**\r\n```\r\npublic class Advertisement{\r\n\r\n    private int ID;\r\n    private String description;\r\n\r\n    // Constructor\r\n    public Advertisement(int ID, String description){\r\n        this.ID = ID;\r\n        this.description = description;\r\n    }\r\n    public int getID() {\r\n        return ID;\r\n    }\r\n```\r\n\r\n**PrintedAd.java**\r\n```\r\npublic class PrintedAd extends Advertisement{\r\n\r\n        private int First;   //first page cost\r\n        private int Middle;  //middle page cost\r\n        private int Last;    //last page cost\r\n\r\n    public PrintedAd(int First, int Middle, int Last){\r\n        this.First = First;\r\n        this.Middle = Middle;\r\n        this.Last = Last;\r\n    }\r\n    public int getFirst() {\r\n        return First;\r\n    }\r\n```\r\n\r\n**Main.java**\r\n```\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        \r\n        Advertisement ad = new Advertisement(34567, &quot;test&quot;);\r\n        System.out.println(ad.getID());\r\n\r\n        PrintedAdd ad2 = new PrintedAdd(10,20,30);\r\n        System.out.println(ad2);\r\n    }\r\n}\r\n```\r\n(had to change var names to make it more readable so if any &quot;dumb&quot; errors appear please understand)\r\nCreating 2 different variables from these 2 classes works fine.\r\n\r\nEven though the variable ad2 is an ad and needs to have an ID number and a description I am unable to do both the Advertisement and PrintedAd attributes.\r\n\r\nWhat I am asking is if there a way for me to not have to write the variables and the constructor for every child class.\r\nIf I were to add to every type of ad this it would solve the issue I believe but still asking if there is a way: \r\n\r\n```\r\n    private int ID;\r\n    private String description;\r\n\r\n    // Constructor\r\n    public Advertisement(int ID, String description){\r\n        this.ID = ID;\r\n        this.description = description;\r\n    }\r\n```","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>Creating a program that manages advertisements. Every ad will have 2 common attributes 1: ID, 2: Description.<br />\nDepending if the ad is for a webpage or for a newspaper for example it will have different costs per page, words or duration it is shown.</p>\n<p>I have 3 files</p>\n<ol>\n<li>Main.java</li>\n<li>Advertisement.java</li>\n<li>PrintedAd.java</li>\n<li>WebpageAd.java</li>\n</ol>\n<p><strong>Advertisement.java</strong></p>\n<pre><code>public class Advertisement{\n\n    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n    public int getID() {\n        return ID;\n    }\n</code></pre>\n<p><strong>PrintedAd.java</strong></p>\n<pre><code>public class PrintedAd extends Advertisement{\n\n        private int First;   //first page cost\n        private int Middle;  //middle page cost\n        private int Last;    //last page cost\n\n    public PrintedAd(int First, int Middle, int Last){\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n    public int getFirst() {\n        return First;\n    }\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>public class Main{\n    public static void main(String[] args) {\n        \n        Advertisement ad = new Advertisement(34567, &quot;test&quot;);\n        System.out.println(ad.getID());\n\n        PrintedAdd ad2 = new PrintedAdd(10,20,30);\n        System.out.println(ad2);\n    }\n}\n</code></pre>\n<p>(had to change var names to make it more readable so if any &quot;dumb&quot; errors appear please understand)\nCreating 2 different variables from these 2 classes works fine.</p>\n<p>Even though the variable ad2 is an ad and needs to have an ID number and a description I am unable to do both the Advertisement and PrintedAd attributes.</p>\n<p>What I am asking is if there a way for me to not have to write the variables and the constructor for every child class.\nIf I were to add to every type of ad this it would solve the issue I believe but still asking if there is a way:</p>\n<pre><code>    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n</code></pre>\n"},{"tags":["java","linux","jvm"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684342610,"post_id":76274447,"comment_id":134505645,"body_markdown":"You may be able to read the size of the actual library file, but that won’t tell you what memory allocations that library has performed.  I doubt there is any way to do that.","body":"You may be able to read the size of the actual library file, but that won’t tell you what memory allocations that library has performed.  I doubt there is any way to do that."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1684350159,"post_id":76274447,"comment_id":134507188,"body_markdown":"There is no &quot;total library size&quot;. Please define what exactly you want to measure.","body":"There is no &quot;total library size&quot;. Please define what exactly you want to measure."},{"owner":{"account_id":2931727,"reputation":4221,"user_id":2511795,"display_name":"0andriy"},"score":1,"creation_date":1684365285,"post_id":76274447,"comment_id":134509707,"body_markdown":"Why the heck it has `embedded-linux` tag?","body":"Why the heck it has <code>embedded-linux</code> tag?"},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684386341,"post_id":76274447,"comment_id":134511418,"body_markdown":"@VGR, For the Memory allocation I think there are some dynamic analysis tools specified for monitoring this in the run time like Valgrind-Massif tool I think, but how can I get the actual lib size that you have referenced to ?","body":"@VGR, For the Memory allocation I think there are some dynamic analysis tools specified for monitoring this in the run time like Valgrind-Massif tool I think, but how can I get the actual lib size that you have referenced to ?"},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684386443,"post_id":76274447,"comment_id":134511428,"body_markdown":"@apangin, I need to measure the memory consumption of this Lib is it clear ?, the Idea that I&#39;m a beginner in the jvm and linux memories staff so I&#39;m not able to understand how the lib is going to be allocated to the memory after loading it, and how we can get its size in the runtime","body":"@apangin, I need to measure the memory consumption of this Lib is it clear ?, the Idea that I&#39;m a beginner in the jvm and linux memories staff so I&#39;m not able to understand how the lib is going to be allocated to the memory after loading it, and how we can get its size in the runtime"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1684449644,"post_id":76274447,"comment_id":134523358,"body_markdown":"No: &quot;memory consumption&quot; is ambiguous: it can be virtual memory, resident set size, Java heap size, etc. It&#39;s unclear whether you want to count memory mapped sections of the library image or dynamically allocated memory or both. If this library depends on two other libraries, one of which has been loaded before your library and the other one after, which of them would you like to count? You see, the question is not as simple as it may look. Please start by explaining your originial problem (i.e. *why* do you want to measure), this will help us give you the *right* answer, not a random one.","body":"No: &quot;memory consumption&quot; is ambiguous: it can be virtual memory, resident set size, Java heap size, etc. It&#39;s unclear whether you want to count memory mapped sections of the library image or dynamically allocated memory or both. If this library depends on two other libraries, one of which has been loaded before your library and the other one after, which of them would you like to count? You see, the question is not as simple as it may look. Please start by explaining your originial problem (i.e. <i>why</i> do you want to measure), this will help us give you the <i>right</i> answer, not a random one."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1684450970,"post_id":76274447,"comment_id":134523513,"body_markdown":"You may get some memory stats of the process by reading [`/proc/self/statm`](https://man7.org/linux/man-pages/man5/proc.5.html) pseudofile.","body":"You may get some memory stats of the process by reading <a href=\"https://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\"><code>&#47;proc&#47;self&#47;statm</code></a> pseudofile."},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684502131,"post_id":76274447,"comment_id":134530657,"body_markdown":"@apangin, I got what you mean, Okay let me give you a brief about the Idea, The issue that I may have some non functional requirements in my project that state as following:  &quot;Tested_library shouldn&#39;t exceed x ram usage during the runtime.&quot;, Hence I started to search for a mechanism that could give me such an information. As far as I understand, the consumed ram memory of the lib is separated to the size of the loaded library itself in the memory &quot;static size&quot;, in addition to the heab size &quot; which has dynamically allocated memory during runtime.&quot;","body":"@apangin, I got what you mean, Okay let me give you a brief about the Idea, The issue that I may have some non functional requirements in my project that state as following:  &quot;Tested_library shouldn&#39;t exceed x ram usage during the runtime.&quot;, Hence I started to search for a mechanism that could give me such an information. As far as I understand, the consumed ram memory of the lib is separated to the size of the loaded library itself in the memory &quot;static size&quot;, in addition to the heab size &quot; which has dynamically allocated memory during runtime.&quot;"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1684545976,"post_id":76274447,"comment_id":134537419,"body_markdown":"Measure RSS of the process without library loaded and with the library loaded. The difference will be the approximation of what you are looking for.","body":"Measure RSS of the process without library loaded and with the library loaded. The difference will be the approximation of what you are looking for."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684345291,"creation_date":1684345291,"answer_id":76274835,"question_id":76274447,"body_markdown":"Using Runtime.totalMemory() and freeMemory() is not very precise. It doesn&#39;t consider what other threads of the Java process or your library may be doing. Calling System.gc() is just a suggestion to the JVM to do garbage collection. There is no guarantee it will execute, and when it does it only cleans the heap memory pool, which is only the memory pools the JVM uses for object instances. Whatever your library is doing will not be inside the heap, unless it uses JNI to manipulate Java objects.\r\n\r\nIF you only want to know the memory the shared library file uses in memory in Linux you should refer to Linux-specific answers like https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage. This is not a Java question.\r\n\r\n","title":"How to get the size of a loaded library on java application in the runtime","body":"<p>Using Runtime.totalMemory() and freeMemory() is not very precise. It doesn't consider what other threads of the Java process or your library may be doing. Calling System.gc() is just a suggestion to the JVM to do garbage collection. There is no guarantee it will execute, and when it does it only cleans the heap memory pool, which is only the memory pools the JVM uses for object instances. Whatever your library is doing will not be inside the heap, unless it uses JNI to manipulate Java objects.</p>\n<p>IF you only want to know the memory the shared library file uses in memory in Linux you should refer to Linux-specific answers like <a href=\"https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage\">https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage</a>. This is not a Java question.</p>\n"}],"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684365301,"creation_date":1684342227,"question_id":76274447,"body_markdown":"Kindly I need help to get the size of a specific loaded library in a running Java Application. \r\n\r\nIn details, I&#39;m running a Java application though JVM on Linux. While I&#39;m trying to get the memory consumption of a specific library that is being loaded during the App initialization. \r\n\r\nSo I&#39;m using something like the following:\r\n        \r\n```lang-java\r\npublic class Test \r\n{\r\n     static\r\n     { \r\n        System.loadLibrary(&quot;Tested_Lib&quot;);\r\n     }\r\n\r\n     public int register () { ......}\r\n     public int unregister () { ......}\r\n}\r\n```\r\n\r\nSo what I&#39;m asking for: \r\n1. Is loading the library that way means that the total library size will be loaded to the JVM address space? \r\n2. How to measure the memory consumption of &quot;Tested_Lib&quot; in the running time?\r\n\r\nI have tried the following: \r\n \r\n```lang-java\r\n        System.gc();\r\n        usedMemoryBefore = runtime.totalMemory() - runtime.freeMemory();\r\n \r\n        System.loadLibrary(&quot;Tested_Lib&quot;);\r\n\r\n        usedMemoryAfter = runtime.totalMemory() - runtime.freeMemory();\r\n        libSizeInRam = (usedMemoryAfter - usedMemoryBefore)/KILOBYTE;  \r\n```\r\nwhile the output was not reasonable at all regarding the expected size of the lib. ","title":"How to get the size of a loaded library on java application in the runtime","body":"<p>Kindly I need help to get the size of a specific loaded library in a running Java Application.</p>\n<p>In details, I'm running a Java application though JVM on Linux. While I'm trying to get the memory consumption of a specific library that is being loaded during the App initialization.</p>\n<p>So I'm using something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test \n{\n     static\n     { \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n     }\n\n     public int register () { ......}\n     public int unregister () { ......}\n}\n</code></pre>\n<p>So what I'm asking for:</p>\n<ol>\n<li>Is loading the library that way means that the total library size will be loaded to the JVM address space?</li>\n<li>How to measure the memory consumption of &quot;Tested_Lib&quot; in the running time?</li>\n</ol>\n<p>I have tried the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        System.gc();\n        usedMemoryBefore = runtime.totalMemory() - runtime.freeMemory();\n \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n\n        usedMemoryAfter = runtime.totalMemory() - runtime.freeMemory();\n        libSizeInRam = (usedMemoryAfter - usedMemoryBefore)/KILOBYTE;  \n</code></pre>\n<p>while the output was not reasonable at all regarding the expected size of the lib.</p>\n"},{"tags":["java","wav","ogg","oggvorbis"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684334338,"post_id":76273071,"comment_id":134503579,"body_markdown":"Make sure you&#39;ve got all necessary deps.  vorbis-java-core seems possible","body":"Make sure you&#39;ve got all necessary deps.  vorbis-java-core seems possible"}],"owner":{"account_id":15903408,"reputation":443,"user_id":11475227,"display_name":"Billy Billy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684365059,"creation_date":1684332801,"question_id":76273071,"body_markdown":"I [have an ogg][1] file downloaded from whatsapp. I am trying to convert it to wav. However, reading the input stream is failing  with Unsupported format.\r\n\r\n```\r\n        File file = new File(&quot;audio.ogg&quot;);\r\n        AudioInputStream in = AudioSystem.getAudioInputStream(file);\r\n```\r\nThe exception:\r\n```\r\nException in thread &quot;main&quot; javax.sound.sampled.UnsupportedAudioFileException: File of unsupported format\r\n        at java.desktop/javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1066)\r\n        at org.Convert.main(Convert.java:20)\r\n```\r\n\r\nI added following dependency to no avail.\r\n```\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\r\n    &lt;artifactId&gt;vorbisspi&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThoughts?\r\n\r\n  [1]: https://file.io/CJWFsXL6IgZa","title":"Convert ogg/oga file to wav using Java","body":"<p>I <a href=\"https://file.io/CJWFsXL6IgZa\" rel=\"nofollow noreferrer\">have an ogg</a> file downloaded from whatsapp. I am trying to convert it to wav. However, reading the input stream is failing  with Unsupported format.</p>\n<pre><code>        File file = new File(&quot;audio.ogg&quot;);\n        AudioInputStream in = AudioSystem.getAudioInputStream(file);\n</code></pre>\n<p>The exception:</p>\n<pre><code>Exception in thread &quot;main&quot; javax.sound.sampled.UnsupportedAudioFileException: File of unsupported format\n        at java.desktop/javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1066)\n        at org.Convert.main(Convert.java:20)\n</code></pre>\n<p>I added following dependency to no avail.</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\n    &lt;artifactId&gt;vorbisspi&lt;/artifactId&gt;\n    &lt;version&gt;1.0.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Thoughts?</p>\n"},{"tags":["java","quarkus","mutiny"],"comments":[{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1682498370,"post_id":76043558,"comment_id":134223964,"body_markdown":"Could you create a test project somewhere so that I can have a better look?","body":"Could you create a test project somewhere so that I can have a better look?"},{"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"score":0,"creation_date":1682698393,"post_id":76043558,"comment_id":134261740,"body_markdown":"I tried to recreate this problem in a new test project, but i couldn&#39;t. Retries are working as expected now. I see 3.0.1 is released, but even downgrading to 3.0.0.CR2 nothing changed. Maybe i coded something realy stupid, which now i cannot reproduce since i have better knowledge of the framework.","body":"I tried to recreate this problem in a new test project, but i couldn&#39;t. Retries are working as expected now. I see 3.0.1 is released, but even downgrading to 3.0.0.CR2 nothing changed. Maybe i coded something realy stupid, which now i cannot reproduce since i have better knowledge of the framework."},{"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"score":0,"creation_date":1684321280,"post_id":76043558,"comment_id":134500410,"body_markdown":"HI @DavideD&#39;Alto, I managed to reproduce it on new 3.0.3.Final version. Here is test project: https://github.com/sfeliks/retry-test. When SchedulerService throws an error, it is: CompositeException: Multiple exceptions caught:\n\t[Exception 0] java.lang.RuntimeException: Test Runtime\n\t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [116]: &#39;vert.x-eventloop-thread-3&#39; current Thread [118]: &#39;executor-thread-2&#39;","body":"HI @DavideD&#39;Alto, I managed to reproduce it on new 3.0.3.Final version. Here is test project: <a href=\"https://github.com/sfeliks/retry-test\" rel=\"nofollow noreferrer\">github.com/sfeliks/retry-test</a>. When SchedulerService throws an error, it is: CompositeException: Multiple exceptions caught: \t[Exception 0] java.lang.RuntimeException: Test Runtime \t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [116]: &#39;vert.x-eventloop-thread-3&#39; current Thread [118]: &#39;executor-thread-2&#39;"}],"answers":[{"tags":[],"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682503778,"creation_date":1682503778,"answer_id":76109560,"question_id":76043558,"body_markdown":"In the end retries started working for me, but it&#39;s unclear what fixed it.\r\nThe main changes i did that could help were:\r\n1. I downgraded Quarkus to 2.16 - previous version (3.0.0.CR2) is the main culprit for me\r\n2. I gave up on using @WithSession completely - left it for Quarkus to handle\r\n3. And follow-up to number 2. - i have better undestanding of working with Mutiny streams, so now i just return Uni to the original caller (Rest endpoint and a Scheduler).","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>In the end retries started working for me, but it's unclear what fixed it.\nThe main changes i did that could help were:</p>\n<ol>\n<li>I downgraded Quarkus to 2.16 - previous version (3.0.0.CR2) is the main culprit for me</li>\n<li>I gave up on using @WithSession completely - left it for Quarkus to handle</li>\n<li>And follow-up to number 2. - i have better undestanding of working with Mutiny streams, so now i just return Uni to the original caller (Rest endpoint and a Scheduler).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684340704,"creation_date":1684336935,"answer_id":76273708,"question_id":76043558,"body_markdown":"The problem is caused by `.withBackoff`.\r\n\r\nHibernate Reactive checks two things when the session is used:\r\n1. The session must be called in a event-loop thread\r\n2. The session must be used in the same thread it has been created.\r\n\r\nIn this case, the first check is failing because of a limitation (or bug) in Mutiny: when retrying using the `.withBackoff` option, the uni runs in a worker thread (and not in the event-loop thread the session was created).\r\nNote that even if you create a new session, the check will fail because the code it&#39;s not running in a worker-thread (and not a event-loop thread).\r\n\r\nThis works with Quarkus 2.16 because there is a check that makes sure that [everything runs in an event-loop thread](https://github.com/quarkusio/quarkus/blob/62070cb257e78d10e5fdfee6b227dad22c3cf261/extensions/panache/hibernate-reactive-panache-common/runtime/src/main/java/io/quarkus/hibernate/reactive/panache/common/runtime/AbstractJpaOperations.java#L130). This check has been removed in Quarkus 3, this is probably a bug.\r\n\r\nAt the moment, I don&#39;t have a workaround, but it should work if you avoid the `.withBackoff` option.\r\n\r\n","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>The problem is caused by <code>.withBackoff</code>.</p>\n<p>Hibernate Reactive checks two things when the session is used:</p>\n<ol>\n<li>The session must be called in a event-loop thread</li>\n<li>The session must be used in the same thread it has been created.</li>\n</ol>\n<p>In this case, the first check is failing because of a limitation (or bug) in Mutiny: when retrying using the <code>.withBackoff</code> option, the uni runs in a worker thread (and not in the event-loop thread the session was created).\nNote that even if you create a new session, the check will fail because the code it's not running in a worker-thread (and not a event-loop thread).</p>\n<p>This works with Quarkus 2.16 because there is a check that makes sure that <a href=\"https://github.com/quarkusio/quarkus/blob/62070cb257e78d10e5fdfee6b227dad22c3cf261/extensions/panache/hibernate-reactive-panache-common/runtime/src/main/java/io/quarkus/hibernate/reactive/panache/common/runtime/AbstractJpaOperations.java#L130\" rel=\"nofollow noreferrer\">everything runs in an event-loop thread</a>. This check has been removed in Quarkus 3, this is probably a bug.</p>\n<p>At the moment, I don't have a workaround, but it should work if you avoid the <code>.withBackoff</code> option.</p>\n"}],"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76273708,"answer_count":2,"score":1,"last_activity_date":1684364966,"creation_date":1681814094,"question_id":76043558,"body_markdown":"I need to write code that will:\r\n- connect to external DB\r\n- query that DB for data\r\n- process this data, meaning create multiple entities in local DB\r\n\r\nI created a method like below:\r\n\r\n```\r\n  @WithSession\r\n  public Uni&lt;Void&gt; retrieveDataAndSaveInLocalDB() {\r\n    final Sample timer = Timer.start(meterRegistry);\r\n    return Uni.createFrom()\r\n        .deferred(() -&gt; Uni.createFrom()\r\n            .item(dbService::connectToDB))\r\n        .onFailure()\r\n        .retry()\r\n        .withBackOff(Duration.ofSeconds(3), Duration.ofMinutes(5))\r\n        .atMost(3)\r\n        .map(this::getListOfEntities)\r\n        .flatMap(entityRepository::persist)\r\n        .call(entityRepository::flush)\r\n        .invoke(() -&gt; timer.stop(meterRegistry.timer(&quot;timer&quot;)))\r\n        .invoke(() -&gt; Log.info(&quot;logged info&quot;));\r\n  }\r\n```\r\nWhen dbService::connectToDB throws an exception, I want to give it another go in a few seconds.\r\nThe problem I have is that when dbService::connectToDB throws an error, retries are done on another thread. Here are the logs:\r\n\r\n```\r\n2023-04-18 12:09:42,926 INFO  [DbService] (vert.x-eventloop-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@b931fa7\r\n2023-04-18 12:09:46,142 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@73903696\r\n2023-04-18 12:09:51,210 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@379aed2d\r\n2023-04-18 12:09:51,237 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-1) HTTP Request to /sampleendpoint failed, error id: 8dc81df2-e526-4a64-a67d-bf04cbb9e580-1: io.smallrye.mutiny.CompositeException: Multiple exceptions caught:\r\n\t[Exception 0] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\tat io.smallrye.mutiny.groups.UniOnItemOrFailure.lambda$call$1(UniOnItemOrFailure.java:75)\r\n\tat io.smallrye.context.impl.wrappers.SlowContextualBiFunction.apply(SlowContextualBiFunction.java:21)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:86)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnTermination$UniOnTerminationProcessor.onFailure(UniOnTermination.java:52)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.helpers.EmptyUniSubscription.propagateFailureEvent(EmptyUniSubscription.java:40)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:26)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\r\n\tat org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnTermination.subscribe(UniOnTermination.java:21)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap.subscribe(UniOnItemOrFailureFlatMap.java:27)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:58)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forward(UniCreateFromCompletionStage.java:51)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:35)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\r\n\tat org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem$KnownItemSubscription.forward(UniCreateFromKnownItem.java:38)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem.subscribe(UniCreateFromKnownItem.java:23)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni.subscribe(UniOnItemTransformToUni.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromPublisher$PublisherSubscriber.onNext(UniCreateFromPublisher.java:70)\r\n\tat io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\r\n\tat io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.subscription.SerializedSubscriber.onItem(SerializedSubscriber.java:74)\r\n\tat io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.onItem(MultiRetryWhenOp.java:111)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromDeferredSupplier.subscribe(UniCreateFromDeferredSupplier.java:36)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.request(UniToMultiPublisher.java:73)\r\n\tat io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.setOrSwitchUpstream(SwitchableSubscriptionSubscriber.java:205)\r\n\tat io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.onSubscribe(SwitchableSubscriptionSubscriber.java:107)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher.subscribe(UniToMultiPublisher.java:25)\r\n\tat io.smallrye.mutiny.groups.MultiCreate$1.subscribe(MultiCreate.java:165)\r\n\tat io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.resubscribe(MultiRetryWhenOp.java:157)\r\n\tat io.smalliny.operators.multi.MultiRetryWhenOp$TriggerSubscriber.onNext(MultiRetryWhenOp.java:188)\r\n\tat io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\r\n\tat io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\r\n\tat io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapMainSubscriber.tryEmit(MultiConcatMapOp.java:182)\r\n\tat io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapInner.onItem(MultiConcatMapOp.java:285)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\r\n\tat io.smallrye.mutiny.operators.uni.UniDelayOnItem$UniDelayOnItemProcessor.lambda$onItem$0(UniDelayOnItem.java:53)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2892)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2883)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$AbstractScheduledFuture.run(EnhancedQueueExecutor.java:2741)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tSuppressed: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\t\tat org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:447)\r\n\t\tat org.hibernate.internal.SessionImpl.checkOpenOrWaitingForAutoClose(SessionImpl.java:616)\r\n\t\tat org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:410)\r\n\t\tat org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactiveClose(ReactiveSessionImpl.java:1738)\r\n\t\tat io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\r\n\t\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\r\n\t\t... 76 more\r\nCaused by: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\tat org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactivePersist(ReactiveSessionImpl.java:833)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$2(CompletionStages.java:178)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$7(CompletionStages.java:409)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages$ArrayLoop.next(CompletionStages.java:483)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.lambda$asyncWhile$1(AsyncTrampoline.java:215)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:121)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.trampoline(AsyncTrampoline.java:102)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:197)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:215)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:410)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:381)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:178)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.applyToAll(CompletionStages.java:505)\r\n\tat org.hibernate.reactive.mutiny.impl.MutinySessionImpl.lambda$persistAll$10(MutinySessionImpl.java:229)\r\n\tat io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\r\n\t... 51 more\r\n\r\n```\r\n\r\nThe &quot;Connected&quot; line in logs comes from the body of dbService::connectToDB method.\r\n\r\nLogs show that the first execution is on the correct thread, which in my case is &#39;vert.x-eventloop-thread-4&#39;, but then the retries are executed on &#39;executor-thread-1&#39;. If an exception is not thrown in the first execution, all processing goes well. If the first exection fails, but one of the retries succeeds, the exception as above is thrown.\r\n\r\nWhat&#39;s wrong with my code? Starting a new session for each retry is not possible; Quarkus complains that a new session is not on a vert.x-eventloop-thread thread.\r\n\r\nMaybe it&#39;s also worth pointing out that when calling `serviceImpactRepository::persist` I actually want to persist a list of entities, not a single entity.\r\n\r\nI am using a new version of Quarkus (3.0.0.CR2) with Reactive Hibernate.\r\n","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>I need to write code that will:</p>\n<ul>\n<li>connect to external DB</li>\n<li>query that DB for data</li>\n<li>process this data, meaning create multiple entities in local DB</li>\n</ul>\n<p>I created a method like below:</p>\n<pre><code>  @WithSession\n  public Uni&lt;Void&gt; retrieveDataAndSaveInLocalDB() {\n    final Sample timer = Timer.start(meterRegistry);\n    return Uni.createFrom()\n        .deferred(() -&gt; Uni.createFrom()\n            .item(dbService::connectToDB))\n        .onFailure()\n        .retry()\n        .withBackOff(Duration.ofSeconds(3), Duration.ofMinutes(5))\n        .atMost(3)\n        .map(this::getListOfEntities)\n        .flatMap(entityRepository::persist)\n        .call(entityRepository::flush)\n        .invoke(() -&gt; timer.stop(meterRegistry.timer(&quot;timer&quot;)))\n        .invoke(() -&gt; Log.info(&quot;logged info&quot;));\n  }\n</code></pre>\n<p>When dbService::connectToDB throws an exception, I want to give it another go in a few seconds.\nThe problem I have is that when dbService::connectToDB throws an error, retries are done on another thread. Here are the logs:</p>\n<pre><code>2023-04-18 12:09:42,926 INFO  [DbService] (vert.x-eventloop-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@b931fa7\n2023-04-18 12:09:46,142 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@73903696\n2023-04-18 12:09:51,210 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@379aed2d\n2023-04-18 12:09:51,237 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-1) HTTP Request to /sampleendpoint failed, error id: 8dc81df2-e526-4a64-a67d-bf04cbb9e580-1: io.smallrye.mutiny.CompositeException: Multiple exceptions caught:\n    [Exception 0] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    [Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at io.smallrye.mutiny.groups.UniOnItemOrFailure.lambda$call$1(UniOnItemOrFailure.java:75)\n    at io.smallrye.context.impl.wrappers.SlowContextualBiFunction.apply(SlowContextualBiFunction.java:21)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:86)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination$UniOnTerminationProcessor.onFailure(UniOnTermination.java:52)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.helpers.EmptyUniSubscription.propagateFailureEvent(EmptyUniSubscription.java:40)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:26)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination.subscribe(UniOnTermination.java:21)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap.subscribe(UniOnItemOrFailureFlatMap.java:27)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:58)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forward(UniCreateFromCompletionStage.java:51)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:35)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem$KnownItemSubscription.forward(UniCreateFromKnownItem.java:38)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem.subscribe(UniCreateFromKnownItem.java:23)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni.subscribe(UniOnItemTransformToUni.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromPublisher$PublisherSubscriber.onNext(UniCreateFromPublisher.java:70)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.subscription.SerializedSubscriber.onItem(SerializedSubscriber.java:74)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.onItem(MultiRetryWhenOp.java:111)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromDeferredSupplier.subscribe(UniCreateFromDeferredSupplier.java:36)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.request(UniToMultiPublisher.java:73)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.setOrSwitchUpstream(SwitchableSubscriptionSubscriber.java:205)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.onSubscribe(SwitchableSubscriptionSubscriber.java:107)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher.subscribe(UniToMultiPublisher.java:25)\n    at io.smallrye.mutiny.groups.MultiCreate$1.subscribe(MultiCreate.java:165)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.resubscribe(MultiRetryWhenOp.java:157)\n    at io.smalliny.operators.multi.MultiRetryWhenOp$TriggerSubscriber.onNext(MultiRetryWhenOp.java:188)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapMainSubscriber.tryEmit(MultiConcatMapOp.java:182)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapInner.onItem(MultiConcatMapOp.java:285)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.UniDelayOnItem$UniDelayOnItemProcessor.lambda$onItem$0(UniDelayOnItem.java:53)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2892)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2883)\n    at org.jboss.threads.EnhancedQueueExecutor$AbstractScheduledFuture.run(EnhancedQueueExecutor.java:2741)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    Suppressed: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n        at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n        at org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:447)\n        at org.hibernate.internal.SessionImpl.checkOpenOrWaitingForAutoClose(SessionImpl.java:616)\n        at org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:410)\n        at org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactiveClose(ReactiveSessionImpl.java:1738)\n        at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n        at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n        ... 76 more\nCaused by: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactivePersist(ReactiveSessionImpl.java:833)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$2(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$7(CompletionStages.java:409)\n    at org.hibernate.reactive.util.impl.CompletionStages$ArrayLoop.next(CompletionStages.java:483)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.lambda$asyncWhile$1(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:121)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.trampoline(AsyncTrampoline.java:102)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:197)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:410)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:381)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.applyToAll(CompletionStages.java:505)\n    at org.hibernate.reactive.mutiny.impl.MutinySessionImpl.lambda$persistAll$10(MutinySessionImpl.java:229)\n    at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n    ... 51 more\n\n</code></pre>\n<p>The &quot;Connected&quot; line in logs comes from the body of dbService::connectToDB method.</p>\n<p>Logs show that the first execution is on the correct thread, which in my case is 'vert.x-eventloop-thread-4', but then the retries are executed on 'executor-thread-1'. If an exception is not thrown in the first execution, all processing goes well. If the first exection fails, but one of the retries succeeds, the exception as above is thrown.</p>\n<p>What's wrong with my code? Starting a new session for each retry is not possible; Quarkus complains that a new session is not on a vert.x-eventloop-thread thread.</p>\n<p>Maybe it's also worth pointing out that when calling <code>serviceImpactRepository::persist</code> I actually want to persist a list of entities, not a single entity.</p>\n<p>I am using a new version of Quarkus (3.0.0.CR2) with Reactive Hibernate.</p>\n"},{"tags":["java","android","xml","user-interface","layout"],"answers":[{"tags":[],"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684329195,"creation_date":1684329195,"answer_id":76272510,"question_id":76272445,"body_markdown":"Issue is with ```RadioGroup``` height . In your code , ```RadioGroup``` height is ```match_parent``` so replace ```android:layout_height=&quot;match_parent&quot;``` with ```android:layout_height=&quot;wrap_content&quot;``` for ```RadioGroup``` in xml file","title":"Layout Issue : getting layout height to match_parent only after soft keyboard present","body":"<p>Issue is with <code>RadioGroup</code> height . In your code , <code>RadioGroup</code> height is <code>match_parent</code> so replace <code>android:layout_height=&quot;match_parent&quot;</code> with <code>android:layout_height=&quot;wrap_content&quot;</code> for <code>RadioGroup</code> in xml file</p>\n"}],"owner":{"account_id":15882942,"reputation":215,"user_id":11460211,"display_name":"Nilesh Singh Dahiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76272510,"answer_count":1,"score":1,"last_activity_date":1684364823,"creation_date":1684328768,"question_id":76272445,"body_markdown":"I am trying to create a single activity app that collects data using &quot;EditText&quot; and saves it into a Firebase Realtime Database. I already achieved everything I needed for this project. But after setting everything and getting one successful build, a new build with some changes in activity files gives me following layout issue. **It is fine showing every widget while soft keyboard is present**. If I close the keyboard, **it shrinks to top.** You can see following screenshots for reference. Thanks for trying to help me. The code I used is as follows.\r\n\r\n1. Without keyboard\r\n\r\n[![without keyboard][1]][1]\r\n\r\n\r\n2. While keyboard present\r\n\r\n[![with keyboard][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zme6Q.jpg\r\n  [2]: https://i.stack.imgur.com/FuaqB.jpg\r\n\r\n3.activity_main.xml\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;&gt;\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:fillViewport=&quot;true&quot;&gt;\r\n\r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/parent_group&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;।। श्री गणेशाय नम:&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginTop=&quot;8dp&quot;\r\n        android:id=&quot;@+id/start_txt&quot;/&gt;\r\n\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbname&quot;\r\n        android:hint=&quot;वर / वधु का नाम &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/start_txt&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbpname&quot;\r\n        android:hint=&quot;पिता का नाम &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbname&quot; /&gt;\r\n\r\n                &lt;RadioGroup\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot;\r\n                    android:id=&quot;@+id/genderrg&quot;\r\n                    android:orientation=&quot;horizontal&quot;\r\n                    android:layout_below=&quot;@+id/gbpname&quot;&gt;\r\n                &lt;RadioButton\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/rbmale&quot;\r\n                    android:text=&quot;वर&quot;\r\n                    android:layout_marginStart=&quot;10dp&quot;\r\n                    android:textSize=&quot;22sp&quot;\r\n                    android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                    android:layout_weight=&quot;1&quot;/&gt;\r\n                &lt;RadioButton\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/rbfmale&quot;\r\n                    android:text=&quot;वधु&quot;\r\n                    android:layout_marginEnd=&quot;10dp&quot;\r\n                    android:textSize=&quot;22sp&quot;\r\n                    android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                    android:layout_weight=&quot;1&quot;/&gt;\r\n\r\n                &lt;/RadioGroup&gt;\r\n\r\n\r\n\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbgotra&quot;\r\n        android:hint=&quot;गोत्र &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/genderrg&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbdob&quot;\r\n        android:hint=&quot;जन्‍म तिथि DD-MM-YYYY &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbgotra&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbheight&quot;\r\n        android:hint=&quot;ऊंचाई&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbdob&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbcolor&quot;\r\n        android:hint=&quot;रंग&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbheight&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbedu&quot;\r\n        android:hint=&quot;शिक्षा &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbcolor&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbjob&quot;\r\n        android:hint=&quot;व्‍यवसाय&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbedu&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbhobby&quot;\r\n        android:hint=&quot;रूचि के विषय&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbjob&quot;/&gt;\r\n            &lt;EditText\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/gbmail&quot;\r\n                android:hint=&quot;ई-मेल&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n                android:layout_below=&quot;@+id/gbhobby&quot;/&gt;\r\n            &lt;EditText\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/gbphone&quot;\r\n                android:hint=&quot;मोबाईल नंबर&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n                android:layout_below=&quot;@+id/gbmail&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbaddr&quot;\r\n        android:hint=&quot;स्‍थायी पता&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbphone&quot;/&gt;\r\n\r\n\r\n            &lt;Button\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/add_details&quot;\r\n                android:text=&quot;जानकारी जोडें&quot;\r\n                android:layout_below=&quot;@id/gbaddr&quot;\r\n                android:layout_margin=&quot;8dp&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:backgroundTint=&quot;@android:color/holo_orange_dark&quot;/&gt;\r\n        \r\n\r\n&lt;/RelativeLayout&gt;\r\n    &lt;/ScrollView&gt;\r\n\r\n\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n\r\n4.MainActivity.java\r\n\r\n    package com.nilesh.rbndj;\r\n    \r\n    import android.os.Bundle;\r\n    import android.os.Handler;\r\n    \r\n    import com.google.android.gms.ads.AdRequest;\r\n    import com.google.android.gms.ads.AdView;\r\n    import com.google.android.material.snackbar.Snackbar;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.view.View;\r\n    \r\n    import androidx.core.view.WindowCompat;\r\n    import androidx.navigation.NavController;\r\n    import androidx.navigation.Navigation;\r\n    import androidx.navigation.ui.AppBarConfiguration;\r\n    import androidx.navigation.ui.NavigationUI;\r\n    \r\n    import com.google.firebase.database.ChildEventListener;\r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseError;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    import com.nilesh.rbndj.databinding.ActivityMainBinding;\r\n    \r\n    import android.view.Menu;\r\n    import android.view.MenuItem;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.RadioButton;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n    \r\n    \r\n        private static final String TAG = &quot;MainActivity&quot;;\r\n        private AdView mAdView;\r\n    \r\n        EditText name,fname,gotra,dob,hght,colorr,edu,job,hobby,mail,phone,addr;\r\n        Button addButton;\r\n        RadioButton male,fmale;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n    //        mAdView = findViewById(R.id.adView);\r\n    //        AdRequest adRequest = new AdRequest.Builder().build();\r\n    //        mAdView.loadAd(adRequest);\r\n    \r\n    \r\n            name = findViewById(R.id.gbname);\r\n            fname = findViewById(R.id.gbpname);\r\n            gotra = findViewById(R.id.gbgotra);\r\n            dob = findViewById(R.id.gbdob);\r\n            hght = findViewById(R.id.gbheight);\r\n            colorr = findViewById(R.id.gbcolor);\r\n            edu = findViewById(R.id.gbedu);\r\n            job = findViewById(R.id.gbjob);\r\n            hobby = findViewById(R.id.gbhobby);\r\n            mail = findViewById(R.id.gbmail);\r\n            phone = findViewById(R.id.gbphone);\r\n            addr = findViewById(R.id.gbaddr);\r\n            addButton = findViewById(R.id.add_details);\r\n            male = findViewById(R.id.rbmale);\r\n            fmale = findViewById(R.id.rbfmale);\r\n    \r\n    \r\n            addButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Members members = new Members();\r\n                    DatabaseReference mDatabase;\r\n    \r\n                    mDatabase = FirebaseDatabase.getInstance().getReference();\r\n    \r\n                    String id, namee, fnamee, gotraa, dobb, hghtt, colorrr, eduu, jobbb, hobbyy, email, phonee, addrr, rbm, rbf;\r\n    \r\n    \r\n                    namee = name.getText().toString();\r\n                    fnamee = fname.getText().toString();\r\n                    gotraa = gotra.getText().toString();\r\n                    dobb = dob.getText().toString();\r\n                    hghtt = hght.getText().toString();\r\n                    colorrr = colorr.getText().toString();\r\n                    eduu = edu.getText().toString();\r\n                    jobbb = job.getText().toString();\r\n                    hobbyy = hobby.getText().toString();\r\n                    email = mail.getText().toString();\r\n                    phonee = phone.getText().toString();\r\n                    addrr = addr.getText().toString();\r\n                    rbm = male.getText().toString();\r\n                    rbf = fmale.getText().toString();\r\n    \r\n                    id = phonee;\r\n    \r\n    \r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;name&quot;).setValue(namee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;father&quot;).setValue(fnamee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gotra&quot;).setValue(gotraa);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;dob&quot;).setValue(dobb);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;height&quot;).setValue(hghtt);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;color&quot;).setValue(colorrr);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;education&quot;).setValue(eduu);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;job&quot;).setValue(jobbb);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;hobby&quot;).setValue(hobbyy);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;email&quot;).setValue(email);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;phone&quot;).setValue(phonee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;address&quot;).setValue(addrr);\r\n    \r\n                    if (male.isChecked()) {\r\n                        members.setGender(rbm);\r\n                        mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbm);\r\n    \r\n                    } else {\r\n                        members.setGender(rbf);\r\n                        mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbf);\r\n                    }\r\n    \r\n                    mDatabase.addChildEventListener(new ChildEventListener() {\r\n                        @Override\r\n                        public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    //                        if (snapshot.hasChild(&quot;message&quot;)){\r\n    //                            clearForm();\r\n    //                        }\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n    \r\n                        }\r\n                    });\r\n    \r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n    \r\n        }\r\n    \r\n    //    public  void  clearForm() {\r\n    //\r\n    //        ViewGroup group = (ViewGroup) findViewById(R.id.parent_group);\r\n    //        for (int i = 0, count = group.getChildCount(); i &lt; count; ++i) {\r\n    //            View view = group.getChildAt(i);\r\n    //            if (view instanceof EditText) {\r\n    //                ((EditText) view).setText(null);\r\n    //            }\r\n    //        }\r\n\r\n    }\r\n\r\n\r\nI hope this information is enough for you to help solve my issue.\r\n","title":"Layout Issue : getting layout height to match_parent only after soft keyboard present","body":"<p>I am trying to create a single activity app that collects data using &quot;EditText&quot; and saves it into a Firebase Realtime Database. I already achieved everything I needed for this project. But after setting everything and getting one successful build, a new build with some changes in activity files gives me following layout issue. <strong>It is fine showing every widget while soft keyboard is present</strong>. If I close the keyboard, <strong>it shrinks to top.</strong> You can see following screenshots for reference. Thanks for trying to help me. The code I used is as follows.</p>\n<ol>\n<li>Without keyboard</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Zme6Q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zme6Q.jpg\" alt=\"without keyboard\" /></a></p>\n<ol start=\"2\">\n<li>While keyboard present</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FuaqB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FuaqB.jpg\" alt=\"with keyboard\" /></a></p>\n<p>3.activity_main.xml</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:fitsSystemWindows=&quot;true&quot;&gt;\n\n&lt;ScrollView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fillViewport=&quot;true&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/parent_group&quot;&gt;\n\n&lt;TextView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;।। श्री गणेशाय नम:&quot;\n    android:textSize=&quot;22sp&quot;\n    android:gravity=&quot;center&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginTop=&quot;8dp&quot;\n    android:id=&quot;@+id/start_txt&quot;/&gt;\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbname&quot;\n    android:hint=&quot;वर / वधु का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/start_txt&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbpname&quot;\n    android:hint=&quot;पिता का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbname&quot; /&gt;\n\n            &lt;RadioGroup\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:id=&quot;@+id/genderrg&quot;\n                android:orientation=&quot;horizontal&quot;\n                android:layout_below=&quot;@+id/gbpname&quot;&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbmale&quot;\n                android:text=&quot;वर&quot;\n                android:layout_marginStart=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbfmale&quot;\n                android:text=&quot;वधु&quot;\n                android:layout_marginEnd=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n\n            &lt;/RadioGroup&gt;\n\n\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbgotra&quot;\n    android:hint=&quot;गोत्र &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/genderrg&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbdob&quot;\n    android:hint=&quot;जन्‍म तिथि DD-MM-YYYY &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbgotra&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbheight&quot;\n    android:hint=&quot;ऊंचाई&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbdob&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbcolor&quot;\n    android:hint=&quot;रंग&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbheight&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbedu&quot;\n    android:hint=&quot;शिक्षा &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbcolor&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbjob&quot;\n    android:hint=&quot;व्‍यवसाय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbedu&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbhobby&quot;\n    android:hint=&quot;रूचि के विषय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbjob&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbmail&quot;\n            android:hint=&quot;ई-मेल&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbhobby&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbphone&quot;\n            android:hint=&quot;मोबाईल नंबर&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbmail&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbaddr&quot;\n    android:hint=&quot;स्‍थायी पता&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbphone&quot;/&gt;\n\n\n        &lt;Button\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/add_details&quot;\n            android:text=&quot;जानकारी जोडें&quot;\n            android:layout_below=&quot;@id/gbaddr&quot;\n            android:layout_margin=&quot;8dp&quot;\n            android:textSize=&quot;22sp&quot;\n            android:backgroundTint=&quot;@android:color/holo_orange_dark&quot;/&gt;\n    \n</code></pre>\n\n    \n\n<p>4.MainActivity.java</p>\n<pre><code>package com.nilesh.rbndj;\n\nimport android.os.Bundle;\nimport android.os.Handler;\n\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.AdView;\nimport com.google.android.material.snackbar.Snackbar;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.view.View;\n\nimport androidx.core.view.WindowCompat;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.AppBarConfiguration;\nimport androidx.navigation.ui.NavigationUI;\n\nimport com.google.firebase.database.ChildEventListener;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.nilesh.rbndj.databinding.ActivityMainBinding;\n\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RadioButton;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    private AdView mAdView;\n\n    EditText name,fname,gotra,dob,hght,colorr,edu,job,hobby,mail,phone,addr;\n    Button addButton;\n    RadioButton male,fmale;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n//        mAdView = findViewById(R.id.adView);\n//        AdRequest adRequest = new AdRequest.Builder().build();\n//        mAdView.loadAd(adRequest);\n\n\n        name = findViewById(R.id.gbname);\n        fname = findViewById(R.id.gbpname);\n        gotra = findViewById(R.id.gbgotra);\n        dob = findViewById(R.id.gbdob);\n        hght = findViewById(R.id.gbheight);\n        colorr = findViewById(R.id.gbcolor);\n        edu = findViewById(R.id.gbedu);\n        job = findViewById(R.id.gbjob);\n        hobby = findViewById(R.id.gbhobby);\n        mail = findViewById(R.id.gbmail);\n        phone = findViewById(R.id.gbphone);\n        addr = findViewById(R.id.gbaddr);\n        addButton = findViewById(R.id.add_details);\n        male = findViewById(R.id.rbmale);\n        fmale = findViewById(R.id.rbfmale);\n\n\n        addButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Members members = new Members();\n                DatabaseReference mDatabase;\n\n                mDatabase = FirebaseDatabase.getInstance().getReference();\n\n                String id, namee, fnamee, gotraa, dobb, hghtt, colorrr, eduu, jobbb, hobbyy, email, phonee, addrr, rbm, rbf;\n\n\n                namee = name.getText().toString();\n                fnamee = fname.getText().toString();\n                gotraa = gotra.getText().toString();\n                dobb = dob.getText().toString();\n                hghtt = hght.getText().toString();\n                colorrr = colorr.getText().toString();\n                eduu = edu.getText().toString();\n                jobbb = job.getText().toString();\n                hobbyy = hobby.getText().toString();\n                email = mail.getText().toString();\n                phonee = phone.getText().toString();\n                addrr = addr.getText().toString();\n                rbm = male.getText().toString();\n                rbf = fmale.getText().toString();\n\n                id = phonee;\n\n\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;name&quot;).setValue(namee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;father&quot;).setValue(fnamee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gotra&quot;).setValue(gotraa);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;dob&quot;).setValue(dobb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;height&quot;).setValue(hghtt);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;color&quot;).setValue(colorrr);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;education&quot;).setValue(eduu);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;job&quot;).setValue(jobbb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;hobby&quot;).setValue(hobbyy);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;email&quot;).setValue(email);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;phone&quot;).setValue(phonee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;address&quot;).setValue(addrr);\n\n                if (male.isChecked()) {\n                    members.setGender(rbm);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbm);\n\n                } else {\n                    members.setGender(rbf);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbf);\n                }\n\n                mDatabase.addChildEventListener(new ChildEventListener() {\n                    @Override\n                    public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n//                        if (snapshot.hasChild(&quot;message&quot;)){\n//                            clearForm();\n//                        }\n                    }\n\n                    @Override\n                    public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onChildRemoved(@NonNull DataSnapshot snapshot) {\n\n                    }\n\n                    @Override\n                    public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n\n                    }\n                });\n\n\n            }\n        });\n\n\n\n\n    }\n\n//    public  void  clearForm() {\n//\n//        ViewGroup group = (ViewGroup) findViewById(R.id.parent_group);\n//        for (int i = 0, count = group.getChildCount(); i &lt; count; ++i) {\n//            View view = group.getChildAt(i);\n//            if (view instanceof EditText) {\n//                ((EditText) view).setText(null);\n//            }\n//        }\n\n}\n</code></pre>\n<p>I hope this information is enough for you to help solve my issue.</p>\n"},{"tags":["java","android","gps"],"comments":[{"owner":{"account_id":25256741,"reputation":67,"user_id":19088347,"display_name":"imad.nyc"},"score":0,"creation_date":1684338130,"post_id":76273864,"comment_id":134504614,"body_markdown":"Could you add more tags to add more information? What language is this, what framework, if any, are you using? There&#39;s a ton of ways to make android apps now so just saying it&#39;s an android question isn&#39;t specific.","body":"Could you add more tags to add more information? What language is this, what framework, if any, are you using? There&#39;s a ton of ways to make android apps now so just saying it&#39;s an android question isn&#39;t specific."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684338417,"post_id":76273864,"comment_id":134504691,"body_markdown":"`NullPointerException`","body":"<code>NullPointerException</code>"},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684338439,"post_id":76273864,"comment_id":134504700,"body_markdown":"Tell me what you need to know. Because I don&#180;t know whatyou need @imad.nyc","body":"Tell me what you need to know. Because I don&#180;t know whatyou need @imad.nyc"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684338722,"post_id":76273864,"comment_id":134504782,"body_markdown":"`try to do: currentLocation.getLongitude(); ` ? That is nowhere in your code.","body":"<code>try to do: currentLocation.getLongitude(); </code> ? That is nowhere in your code."},{"owner":{"account_id":25256741,"reputation":67,"user_id":19088347,"display_name":"imad.nyc"},"score":0,"creation_date":1684339009,"post_id":76273864,"comment_id":134504857,"body_markdown":"@LuisDaniels, tags with the language you&#39;re using (Javascript, Kotlin, etc..) and framework (flutter, react, bazel) would be a good start. Right now it just looks like Javascript? though I&#39;m not sure, I&#39;m not familiar with Javascript.","body":"@LuisDaniels, tags with the language you&#39;re using (Javascript, Kotlin, etc..) and framework (flutter, react, bazel) would be a good start. Right now it just looks like Javascript? though I&#39;m not sure, I&#39;m not familiar with Javascript."},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684339059,"post_id":76273864,"comment_id":134504869,"body_markdown":"I do it in other part. And there is where I get the message @blackapps","body":"I do it in other part. And there is where I get the message @blackapps"},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684339099,"post_id":76273864,"comment_id":134504876,"body_markdown":"I&#180;m using java in android studio @imad.nyc","body":"I&#180;m using java in android studio @imad.nyc"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684344556,"post_id":76273864,"comment_id":134506051,"body_markdown":"You should of course post the code that produces the error. It makes no sense to post other code.","body":"You should of course post the code that produces the error. It makes no sense to post other code."}],"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684364570,"creation_date":1684338007,"question_id":76273864,"body_markdown":"Here&#39;s the thing. I want to get my current location using GPS. I have done it like the following:\r\n\r\nMy function to get coordinates:\r\n\r\n    private void obtenerCoordenadas() {\r\n            locationListener = new Course.MyLocationListener();\r\n    \r\n            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                // TODO: Consider calling\r\n                //    ActivityCompat#requestPermissions\r\n                // here to request the missing permissions, and then overriding\r\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                //                                          int[] grantResults)\r\n                // to handle the case where the user grants the permission. See the documentation\r\n                // for ActivityCompat#requestPermissions for more details.\r\n                return;\r\n            }\r\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\r\n            Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n    \r\n            if (location != null) {\r\n               /* Toast.makeText(getBaseContext(), &quot;Cambio de localizaci&#243;n&quot;, Toast.LENGTH_SHORT).show();\r\n                lat.setText(&quot;Longitud funcion:&quot; + location.getLongitude());\r\n                lon.setText(&quot;Latitud funcion:&quot; + location.getLatitude());\r\n                currentLocation=location;\r\n    \r\n                textView.setText(&quot;Distancia: &quot;+distance);\r\n                previousLocation=currentLocation;*/\r\n    \r\n            } else {\r\n                Toast.makeText(this, &quot;sin localizacion&quot;, Toast.LENGTH_SHORT).show();\r\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\r\n            }\r\n    \r\n    \r\n        }\r\nand my listener:\r\n\r\n    private class MyLocationListener implements LocationListener {\r\n            @Override\r\n            public void onLocationChanged(Location loc) {\r\n                if (loc != null) {\r\n                    // Toast.makeText(getBaseContext(), &quot;Location changed : Lat: &quot; + loc.getLatitude() + &quot; Lng: &quot; + loc.getLongitude(), Toast.LENGTH_SHORT).show();\r\n                   /* Toast.makeText(Prueba.this, &quot;Cambio de localizaci&#243;n&quot;, Toast.LENGTH_SHORT).show();\r\n                    lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\r\n                    lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\r\n    \r\n    \r\n    \r\n                    String longitude = &quot;Longitude: &quot; + loc.getLongitude();\r\n                    Log.v(TAG, longitude);\r\n                    String latitude = &quot;Latitude: &quot; + loc.getLatitude();\r\n                    Log.v(TAG, latitude);\r\n                    currentLocation=loc;\r\n                    distance= (int)currentLocation.distanceTo(previousLocation);\r\n                    /*textView.setText(&quot;Distancia: &quot;+distance);*/\r\n                    previousLocation=currentLocation;\r\n                   /* lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\r\n                    lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\r\n    \r\n                    /*----------to get City-Name from coordinates ------------- */\r\n                    String cityName = null;\r\n                    Geocoder gcd = new Geocoder(getBaseContext(),\r\n                            Locale.getDefault());\r\n                    List&lt;Address&gt; addresses;\r\n                    try {\r\n                        addresses = gcd.getFromLocation(loc.getLatitude(), loc\r\n                                .getLongitude(), 1);\r\n                        if (addresses.size() &gt; 0)\r\n                            System.out.println(addresses.get(0).getLocality());\r\n                        cityName = addresses.get(0).getLocality();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n    \r\n                /*String s = longitude + &quot;\\n&quot; + latitude +\r\n                        &quot;\\n\\nMy Currrent City is: &quot; + cityName;\r\n                textViewCiudad.setText(s);*/\r\n                } else {\r\n                    if (ActivityCompat.checkSelfPermission(Course.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(Course.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                        // TODO: Consider calling\r\n                        //    ActivityCompat#requestPermissions\r\n                        // here to request the missing permissions, and then overriding\r\n                        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                        //                                          int[] grantResults)\r\n                        // to handle the case where the user grants the permission. See the documentation\r\n                        // for ActivityCompat#requestPermissions for more details.\r\n                        return;\r\n                    }\r\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 00, locationListener);\r\n    \r\n                }\r\n    \r\n    \r\n            }\r\n    \r\n            @Override\r\n            public void onProviderDisabled(String provider) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n    \r\n            @Override\r\n            public void onProviderEnabled(String provider) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n    \r\n    \r\n            @Override\r\n            public void onStatusChanged(String provider,\r\n                                        int status, Bundle extras) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n        }\r\n\r\nI want to get the location in my &quot;currentLocation&quot; variable but the problem is that when the function &quot;obtenerCoordenadas&quot; is called, and then I try to do: `currentLocation.getLongitude();` I get this error: `Attempt to invoke virtual method &#39;double android.location.Location.getLongitude()&#39; on a null object reference`\r\n\r\nI don&#39;t know why that happens. \r\nAny idea?\r\nThank you.","title":"I want to get the current location in Android using GPS","body":"<p>Here's the thing. I want to get my current location using GPS. I have done it like the following:</p>\n<p>My function to get coordinates:</p>\n<pre><code>private void obtenerCoordenadas() {\n        locationListener = new Course.MyLocationListener();\n\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return;\n        }\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\n\n        if (location != null) {\n           /* Toast.makeText(getBaseContext(), &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n            lat.setText(&quot;Longitud funcion:&quot; + location.getLongitude());\n            lon.setText(&quot;Latitud funcion:&quot; + location.getLatitude());\n            currentLocation=location;\n\n            textView.setText(&quot;Distancia: &quot;+distance);\n            previousLocation=currentLocation;*/\n\n        } else {\n            Toast.makeText(this, &quot;sin localizacion&quot;, Toast.LENGTH_SHORT).show();\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        }\n\n\n    }\n</code></pre>\n<p>and my listener:</p>\n<pre><code>private class MyLocationListener implements LocationListener {\n        @Override\n        public void onLocationChanged(Location loc) {\n            if (loc != null) {\n                // Toast.makeText(getBaseContext(), &quot;Location changed : Lat: &quot; + loc.getLatitude() + &quot; Lng: &quot; + loc.getLongitude(), Toast.LENGTH_SHORT).show();\n               /* Toast.makeText(Prueba.this, &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n                lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n\n\n                String longitude = &quot;Longitude: &quot; + loc.getLongitude();\n                Log.v(TAG, longitude);\n                String latitude = &quot;Latitude: &quot; + loc.getLatitude();\n                Log.v(TAG, latitude);\n                currentLocation=loc;\n                distance= (int)currentLocation.distanceTo(previousLocation);\n                /*textView.setText(&quot;Distancia: &quot;+distance);*/\n                previousLocation=currentLocation;\n               /* lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n                /*----------to get City-Name from coordinates ------------- */\n                String cityName = null;\n                Geocoder gcd = new Geocoder(getBaseContext(),\n                        Locale.getDefault());\n                List&lt;Address&gt; addresses;\n                try {\n                    addresses = gcd.getFromLocation(loc.getLatitude(), loc\n                            .getLongitude(), 1);\n                    if (addresses.size() &gt; 0)\n                        System.out.println(addresses.get(0).getLocality());\n                    cityName = addresses.get(0).getLocality();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n            /*String s = longitude + &quot;\\n&quot; + latitude +\n                    &quot;\\n\\nMy Currrent City is: &quot; + cityName;\n            textViewCiudad.setText(s);*/\n            } else {\n                if (ActivityCompat.checkSelfPermission(Course.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(Course.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    // TODO: Consider calling\n                    //    ActivityCompat#requestPermissions\n                    // here to request the missing permissions, and then overriding\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                    //                                          int[] grantResults)\n                    // to handle the case where the user grants the permission. See the documentation\n                    // for ActivityCompat#requestPermissions for more details.\n                    return;\n                }\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 00, locationListener);\n\n            }\n\n\n        }\n\n        @Override\n        public void onProviderDisabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onProviderEnabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n\n        @Override\n        public void onStatusChanged(String provider,\n                                    int status, Bundle extras) {\n            // TODO Auto-generated method stub\n        }\n    }\n</code></pre>\n<p>I want to get the location in my &quot;currentLocation&quot; variable but the problem is that when the function &quot;obtenerCoordenadas&quot; is called, and then I try to do: <code>currentLocation.getLongitude();</code> I get this error: <code>Attempt to invoke virtual method 'double android.location.Location.getLongitude()' on a null object reference</code></p>\n<p>I don't know why that happens.\nAny idea?\nThank you.</p>\n"},{"tags":["java","java.util.scanner","charat","binomial-theorem"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1684347114,"post_id":76275028,"comment_id":134506602,"body_markdown":"I don&#39;t understand the purpose of your `error` variable which is only ever set to false.","body":"I don&#39;t understand the purpose of your <code>error</code> variable which is only ever set to false."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1684347439,"post_id":76275028,"comment_id":134506652,"body_markdown":"Save the input to a string, use a regular expression to parse it and capture the individual elements into groups. What exact input do you expect?","body":"Save the input to a string, use a regular expression to parse it and capture the individual elements into groups. What exact input do you expect?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684347455,"post_id":76275028,"comment_id":134506659,"body_markdown":"To clarify your question, you&#39;re requesting from the user to enter just 1 character and 1 number?","body":"To clarify your question, you&#39;re requesting from the user to enter just 1 character and 1 number?"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347554,"post_id":76275028,"comment_id":134506685,"body_markdown":"@khelwood it didn&#39;t get copied correctly wait","body":"@khelwood it didn&#39;t get copied correctly wait"},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1684347597,"post_id":76275028,"comment_id":134506693,"body_markdown":"First problem, you&#39;re using the parameter `x` as a limit in `for(long i = 1; i&lt;=x ; i++)`, but within the loop you&#39;re changing `x*=i`. `x` will increase faster than `i`, and the loop won&#39;t work. Use another variable (e.g. `var xf = x`) for the return value, and declare your parameter as `final long x` to ensure it&#39;s not changed.","body":"First problem, you&#39;re using the parameter <code>x</code> as a limit in <code>for(long i = 1; i&lt;=x ; i++)</code>, but within the loop you&#39;re changing <code>x*=i</code>. <code>x</code> will increase faster than <code>i</code>, and the loop won&#39;t work. Use another variable (e.g. <code>var xf = x</code>) for the return value, and declare your parameter as <code>final long x</code> to ensure it&#39;s not changed."},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347607,"post_id":76275028,"comment_id":134506697,"body_markdown":"@Reilas for now, only one number, space, and a single digit veriable","body":"@Reilas for now, only one number, space, and a single digit veriable"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347655,"post_id":76275028,"comment_id":134506703,"body_markdown":"@JohnBayko yup kk","body":"@JohnBayko yup kk"},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1684347732,"post_id":76275028,"comment_id":134506718,"body_markdown":"`error` isn&#39;t being used correctly. Get the base case working first, then add error handling.","body":"<code>error</code> isn&#39;t being used correctly. Get the base case working first, then add error handling."},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684348078,"post_id":76275028,"comment_id":134506796,"body_markdown":"@JohnBayko yea done","body":"@JohnBayko yea done"},{"owner":{"account_id":2555632,"reputation":101,"user_id":4430492,"display_name":"John Douma"},"score":0,"creation_date":1686170375,"post_id":76275028,"comment_id":134764235,"body_markdown":"You should initialize xf to be $1$ in your factorial program. It looks like this will return $(x!)x$","body":"You should initialize xf to be $1$ in your factorial program. It looks like this will return $(x!)x$"}],"answers":[{"tags":[],"owner":{"account_id":27486633,"reputation":150,"user_id":20972787,"display_name":"JustaNobody"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348308,"creation_date":1684347794,"answer_id":76275147,"question_id":76275028,"body_markdown":"You can read a string and then use stringtokenizer to seperate with black spaces. Then use nextToken() to get the integer and variable seperately.\r\n\r\n`Long.parseLong()` to convert string to long\r\n\r\n```\r\nimport java.util.*;\r\nclass test{\r\n\tpublic static void main(String args[]){\r\n\t\tString str = &quot;12 w&quot;;\r\n\t\tStringTokenizer st = new StringTokenizer(str,&quot; &quot;);\r\n\t\tint x = Integer.parseInt(st.nextToken());\r\n\t\tstr=st.nextToken();\r\n\t\tSystem.out.println(str+&quot;-&quot;+x);\r\n\t}\r\n}\r\n```\r\nHere I used int, you can use long aswell","title":"Finding character at particular location of String","body":"<p>You can read a string and then use stringtokenizer to seperate with black spaces. Then use nextToken() to get the integer and variable seperately.</p>\n<p><code>Long.parseLong()</code> to convert string to long</p>\n<pre><code>import java.util.*;\nclass test{\n    public static void main(String args[]){\n        String str = &quot;12 w&quot;;\n        StringTokenizer st = new StringTokenizer(str,&quot; &quot;);\n        int x = Integer.parseInt(st.nextToken());\n        str=st.nextToken();\n        System.out.println(str+&quot;-&quot;+x);\n    }\n}\n</code></pre>\n<p>Here I used int, you can use long aswell</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684362981,"creation_date":1684347966,"answer_id":76275167,"question_id":76275028,"body_markdown":"You&#39;ll only need one `Scanner` to get the input, which you do with `a = sc.nextLine()`.\r\n\r\nFrom there, find the index of the space, and use the `String.substring` method to derive each value.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in) ;\r\nboolean error = false ;\r\nString a = &quot;&quot; ;\r\ndo {\r\n    if(error)\r\n    {\r\n        System.out.println(&quot;Error; Please try again&quot;) ;\r\n        error = false ;\r\n    }\r\n    System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\r\n    a = sc.nextLine() ;\r\n} while(error) ;\r\n\r\nsc.close() ;\r\n\r\nint indexOf = a.indexOf(&#39; &#39;);\r\nlong number = Long.parseLong(a.substring(0, indexOf));\r\nchar variable = a.charAt(indexOf + 1);\r\n```","title":"Finding character at particular location of String","body":"<p>You'll only need one <code>Scanner</code> to get the input, which you do with <code>a = sc.nextLine()</code>.</p>\n<p>From there, find the index of the space, and use the <code>String.substring</code> method to derive each value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in) ;\nboolean error = false ;\nString a = &quot;&quot; ;\ndo {\n    if(error)\n    {\n        System.out.println(&quot;Error; Please try again&quot;) ;\n        error = false ;\n    }\n    System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n    a = sc.nextLine() ;\n} while(error) ;\n\nsc.close() ;\n\nint indexOf = a.indexOf(' ');\nlong number = Long.parseLong(a.substring(0, indexOf));\nchar variable = a.charAt(indexOf + 1);\n</code></pre>\n"}],"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76275167,"answer_count":2,"score":1,"last_activity_date":1684362981,"creation_date":1684346808,"question_id":76275028,"body_markdown":"As a part of a Binomial expansion program, I created a Scanner class (`sc`) on an entered **number + variable**, and another (`scan`)on the first *term* (*a* in **(a+b)&lt;sup&gt;n&lt;/sup&gt;**)\r\n\r\nHere&#39;s my program till now :\r\n\r\n\r\n``` java\r\nimport java.util.* ;\r\npublic class binomial_expansion\r\n{\r\n    public static long factorial(long x)\r\n    {\r\n        long xf = x ;\r\n        for(long i = 1; i&lt;=x ; i++)\r\n        {\r\n            xf*=i ;\r\n        }\r\n        return xf ;\r\n    }\r\n    \r\n    public static double C(long n, long r)\r\n    {\r\n        double c = factorial(n)/(factorial(n-r)*factorial(r)) ;\r\n        return c ;\r\n    }\r\n    \r\n    public static void main()\r\n    {\r\n        Scanner sc = new Scanner(System.in) ;\r\n        boolean error = false ;\r\n        String a = &quot;&quot; ;\r\n        do {\r\n            if(error)\r\n            {\r\n                System.out.println(&quot;Error; Please try again&quot;) ;\r\n                error = false ;\r\n            }\r\n            System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\r\n            a = sc.nextLine() ;\r\n            if(a==&quot;&quot;) error = true ;\r\n        } while(error) ;\r\n        \r\n        sc.close() ;\r\n        Scanner scan = new Scanner(a) ;\r\n        long x = scan.nextLong() ;\r\n        long x1 = scan.next().charAt(0) ;\r\n    }\r\n}\r\n```\r\n\r\n&lt;br&gt;\r\nThe problem with creating a character variable using `.next().charAt(index)` is that the index number of the character (the single variable) is not known in the string (the length of the integer is not known), and also that the blank space has to be omitted which was entered by the user to separate the integer literal and the character literal. How can the character variable containing the single-digit variable be made ?","title":"Finding character at particular location of String","body":"<p>As a part of a Binomial expansion program, I created a Scanner class (<code>sc</code>) on an entered <strong>number + variable</strong>, and another (<code>scan</code>)on the first <em>term</em> (<em>a</em> in <strong>(a+b)<sup>n</sup></strong>)</p>\n<p>Here's my program till now :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.* ;\npublic class binomial_expansion\n{\n    public static long factorial(long x)\n    {\n        long xf = x ;\n        for(long i = 1; i&lt;=x ; i++)\n        {\n            xf*=i ;\n        }\n        return xf ;\n    }\n    \n    public static double C(long n, long r)\n    {\n        double c = factorial(n)/(factorial(n-r)*factorial(r)) ;\n        return c ;\n    }\n    \n    public static void main()\n    {\n        Scanner sc = new Scanner(System.in) ;\n        boolean error = false ;\n        String a = &quot;&quot; ;\n        do {\n            if(error)\n            {\n                System.out.println(&quot;Error; Please try again&quot;) ;\n                error = false ;\n            }\n            System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n            a = sc.nextLine() ;\n            if(a==&quot;&quot;) error = true ;\n        } while(error) ;\n        \n        sc.close() ;\n        Scanner scan = new Scanner(a) ;\n        long x = scan.nextLong() ;\n        long x1 = scan.next().charAt(0) ;\n    }\n}\n</code></pre>\n<br>\nThe problem with creating a character variable using `.next().charAt(index)` is that the index number of the character (the single variable) is not known in the string (the length of the integer is not known), and also that the blank space has to be omitted which was entered by the user to separate the integer literal and the character literal. How can the character variable containing the single-digit variable be made ?\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1684351307,"post_id":76275529,"comment_id":134507447,"body_markdown":"I don&#39;t see any attempt at splitting. Are you looking for the `String.split()` method?","body":"I don&#39;t see any attempt at splitting. Are you looking for the <code>String.split()</code> method?"},{"owner":{"account_id":26242166,"reputation":11,"user_id":19916310,"display_name":"Gojo"},"score":0,"creation_date":1684351396,"post_id":76275529,"comment_id":134507464,"body_markdown":"yes not sure how to split as splitting is coming as &quot;[admin&quot;, &quot;user]&quot;","body":"yes not sure how to split as splitting is coming as &quot;[admin&quot;, &quot;user]&quot;"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684352386,"post_id":76275529,"comment_id":134507665,"body_markdown":"To clarify your question, `getRoles` is a list of comma-separated strings, each of which you&#39;d like to expand into one list, one value per index?","body":"To clarify your question, <code>getRoles</code> is a list of comma-separated strings, each of which you&#39;d like to expand into one list, one value per index?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684361629,"post_id":76275529,"comment_id":134509245,"body_markdown":"This sounds like an [XY](https://xyproblem.info/) problem.","body":"This sounds like an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY</a> problem."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684556757,"post_id":76275529,"comment_id":134537941,"body_markdown":"@Gojo, can you provide the `buildRolesList` method?","body":"@Gojo, can you provide the <code>buildRolesList</code> method?"}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684353588,"creation_date":1684352205,"answer_id":76275649,"question_id":76275529,"body_markdown":"Suppose you have a list of strings like `&quot;[admin, user]&quot;`. Then you do it almost right, just forget to split a string to individual roles.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    List&lt;String&gt; list = List.of(&quot;[admin, user]&quot;,\r\n                                &quot;[owner, developer]&quot;);\r\n\r\n    Set&lt;String&gt; roles = getRoles(list);\r\n    System.out.println(roles);  // [owner, admin, developer, user]\r\n}\r\n\r\npublic static Set&lt;String&gt; getRoles(List&lt;String&gt; list) {\r\n    return list.stream()\r\n               .map(String::toLowerCase)\r\n               .map(Foo::getRoles)\r\n               .flatMap(Set::stream)\r\n               .collect(Collectors.toSet());\r\n}\r\n\r\nprivate static Set&lt;String&gt; getRoles(String str) {\r\n    return Stream.of(str)\r\n                 .map(s -&gt; s.replace(&quot;[&quot;, &quot;&quot;))\r\n                 .map(s -&gt; s.replace(&quot;]&quot;, &quot;&quot;))\r\n                 .map(s -&gt; s.split(&quot;\\\\s*,\\\\s*&quot;))\r\n                 .flatMap(Arrays::stream)\r\n                 .collect(Collectors.toSet());\r\n}\r\n```","title":"how to split one list value to elements","body":"<p>Suppose you have a list of strings like <code>&quot;[admin, user]&quot;</code>. Then you do it almost right, just forget to split a string to individual roles.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    List&lt;String&gt; list = List.of(&quot;[admin, user]&quot;,\n                                &quot;[owner, developer]&quot;);\n\n    Set&lt;String&gt; roles = getRoles(list);\n    System.out.println(roles);  // [owner, admin, developer, user]\n}\n\npublic static Set&lt;String&gt; getRoles(List&lt;String&gt; list) {\n    return list.stream()\n               .map(String::toLowerCase)\n               .map(Foo::getRoles)\n               .flatMap(Set::stream)\n               .collect(Collectors.toSet());\n}\n\nprivate static Set&lt;String&gt; getRoles(String str) {\n    return Stream.of(str)\n                 .map(s -&gt; s.replace(&quot;[&quot;, &quot;&quot;))\n                 .map(s -&gt; s.replace(&quot;]&quot;, &quot;&quot;))\n                 .map(s -&gt; s.split(&quot;\\\\s*,\\\\s*&quot;))\n                 .flatMap(Arrays::stream)\n                 .collect(Collectors.toSet());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684362898,"creation_date":1684361071,"answer_id":76276478,"question_id":76275529,"body_markdown":"&gt;how to split one list value to elements\r\n\r\nIt looks like you have a list of roles in pairs and want to break that up into separate lists of size 2. `List.toString()` So can&#39;t you instead return a `List&lt;String&gt;` of all the roles and just copy in pairs.  Here is how it would work.\r\n```\r\nList&lt;List&lt;String&gt;&gt; roles = List.of(&quot;admin&quot;, &quot;user&quot;, \r\n                                   &quot;steno&quot;,&quot;typist&quot;));\r\n\r\nList&lt;List&lt;String&gt;&gt; roleLists = new ArrayList&lt;&gt;();\r\n\r\nif (roles.size()%2 != 0) {\r\n     System.out.println(&quot;Roles must be in pairs&quot;);\r\n} else {\r\n     for (int i = 0; i &lt; roles.size(); i+=2) {\r\n        roleLists.add(new ArrayList&lt;&gt;(List.of(roles.get(i),roles.get(i+1))));\r\n     }\r\n}\r\n```\r\nThen when you get the list of lists you can retrieve the values as follows:\r\n```\r\nfor(List&lt;String&gt; lst : roles) {\r\n    System.out.println(&quot;List -&gt; &quot; + lst);\r\n    for(int i = 0; i &lt; lst.size(); i++) {\r\n         System.out.printf(&quot;   %d -&gt; %s%n&quot;, i, lst.get(i));\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\nList -&gt; [admin, user]\r\n   0 -&gt; admin\r\n   1 -&gt; user\r\nList -&gt; [steno, typist]\r\n   0 -&gt; steno\r\n   1 -&gt; typist\r\n\r\n```\r\nOtherwise, just do the following:\r\n```\r\nString s = &quot;[admin, user]&quot;;\r\n\r\nString[] result = s.replaceAll(&quot;[\\\\[\\\\]\\\\s+]+&quot;,&quot;&quot;).split(&quot;,&quot;);\r\nfor (int i = 0; i &lt; result.length; i++) {\r\n    System.out.printf(&quot;%d -&gt; %s%n&quot;, i, result[i]);\r\n}\r\n```\r\nprints\r\n```\r\n0 -&gt; admin\r\n1 -&gt; user\r\n","title":"how to split one list value to elements","body":"<blockquote>\n<p>how to split one list value to elements</p>\n</blockquote>\n<p>It looks like you have a list of roles in pairs and want to break that up into separate lists of size 2. <code>List.toString()</code> So can't you instead return a <code>List&lt;String&gt;</code> of all the roles and just copy in pairs.  Here is how it would work.</p>\n<pre><code>List&lt;List&lt;String&gt;&gt; roles = List.of(&quot;admin&quot;, &quot;user&quot;, \n                                   &quot;steno&quot;,&quot;typist&quot;));\n\nList&lt;List&lt;String&gt;&gt; roleLists = new ArrayList&lt;&gt;();\n\nif (roles.size()%2 != 0) {\n     System.out.println(&quot;Roles must be in pairs&quot;);\n} else {\n     for (int i = 0; i &lt; roles.size(); i+=2) {\n        roleLists.add(new ArrayList&lt;&gt;(List.of(roles.get(i),roles.get(i+1))));\n     }\n}\n</code></pre>\n<p>Then when you get the list of lists you can retrieve the values as follows:</p>\n<pre><code>for(List&lt;String&gt; lst : roles) {\n    System.out.println(&quot;List -&gt; &quot; + lst);\n    for(int i = 0; i &lt; lst.size(); i++) {\n         System.out.printf(&quot;   %d -&gt; %s%n&quot;, i, lst.get(i));\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>List -&gt; [admin, user]\n   0 -&gt; admin\n   1 -&gt; user\nList -&gt; [steno, typist]\n   0 -&gt; steno\n   1 -&gt; typist\n\n</code></pre>\n<p>Otherwise, just do the following:</p>\n<pre><code>String s = &quot;[admin, user]&quot;;\n\nString[] result = s.replaceAll(&quot;[\\\\[\\\\]\\\\s+]+&quot;,&quot;&quot;).split(&quot;,&quot;);\nfor (int i = 0; i &lt; result.length; i++) {\n    System.out.printf(&quot;%d -&gt; %s%n&quot;, i, result[i]);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>0 -&gt; admin\n1 -&gt; user\n</code></pre>\n"}],"owner":{"account_id":26242166,"reputation":11,"user_id":19916310,"display_name":"Gojo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684362898,"creation_date":1684351089,"question_id":76275529,"body_markdown":"How to get elements from the below list:\r\n```\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\r\nList&lt;String&gt; getRoles = \r\nbuildRolesList(list, role).stream()\r\n    .map(String::trim)\r\n    .map(String::toLowerCase)\r\n    .map(str-&gt;str.replace ( &quot;[&quot;,&quot;&quot; ))\r\n    .map(str-&gt;str.replace ( &quot;]&quot;,&quot;&quot; ))\r\n    .collect( Collectors.toCollection ( ArrayList::new ) );\r\n```\r\n`getRoles = &quot;[admin, user]&quot;` ---this is the list I am getting, but the list wanted is `[&quot;admin&quot;,&quot;user&quot;]` splitted\r\n\r\nHow to achieve the list values as `[0---&gt;&quot;admin&quot;,1---&gt;&quot;user&quot;]`\r\n\r\nThe above result is coming in size 1 but wanted it to be size 2","title":"how to split one list value to elements","body":"<p>How to get elements from the below list:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\nList&lt;String&gt; getRoles = \nbuildRolesList(list, role).stream()\n    .map(String::trim)\n    .map(String::toLowerCase)\n    .map(str-&gt;str.replace ( &quot;[&quot;,&quot;&quot; ))\n    .map(str-&gt;str.replace ( &quot;]&quot;,&quot;&quot; ))\n    .collect( Collectors.toCollection ( ArrayList::new ) );\n</code></pre>\n<p><code>getRoles = &quot;[admin, user]&quot;</code> ---this is the list I am getting, but the list wanted is <code>[&quot;admin&quot;,&quot;user&quot;]</code> splitted</p>\n<p>How to achieve the list values as <code>[0---&gt;&quot;admin&quot;,1---&gt;&quot;user&quot;]</code></p>\n<p>The above result is coming in size 1 but wanted it to be size 2</p>\n"},{"tags":["java","oop","program-entry-point"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1684359638,"post_id":76276343,"comment_id":134508975,"body_markdown":"Where is your `PrivateMain.class` file located and why is your `PrivateMain.java` file not located inside a directory `sample/`?","body":"Where is your <code>PrivateMain.class</code> file located and why is your <code>PrivateMain.java</code> file not located inside a directory <code>sample&#47;</code>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684360391,"post_id":76276343,"comment_id":134509086,"body_markdown":"`javac -d . PrivateMain.java;java sample.PrivateMain`","body":"<code>javac -d . PrivateMain.java;java sample.PrivateMain</code>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684362436,"creation_date":1684362436,"answer_id":76276570,"question_id":76276343,"body_markdown":"## `java PrivateMain` does not work\r\n\r\nThat&#39;s because your class isn&#39;t called that. It&#39;s called `sample.PrivateMain`. If you use `java` in a &#39;I shall give you the name of my class&#39; mode (i.e. not via the `-jar` or `-jmod` launch options), it __has to be__ fully qualified.\r\n\r\n## `java sample.PrivateMain` does not work\r\n\r\nclass names are turned into paths by turning dots into slashes and appending `.class`. In other words, if you run `java sample.PrivateMain`, java starts, and checks every dir in the classpath by __appending `sample/PrivateMain.class` to it__. This doesn&#39;t find your class because your class isn&#39;t in sample/PrivateMain - it&#39;s in ./PrivateMain which isn&#39;t where java is going to look at all.\r\n\r\n## How to fix it\r\n\r\nFor throwaway projects like this, get rid of the `package` declaration. While you&#39;re at it, you can just run `java MyMain.java` - no need to involve `javac`. Once you graduate to more serious projects with multiple source files, and especially, multiple packages, ditch this command line `javac` and `java` stuff and use a build system such as maven or gradle.\r\n\r\nIf you must, for some strange reason, use a package statement, set up your project like so:\r\n\r\n```\r\ncd G:\\javaPract\r\nmkdir sample\r\ncd sample\r\n# put your PrivateMain.java file here\r\njavac PrivateMain.java\r\ncd ..\r\njava -cp . sample.PrivateMain\r\n```\r\n\r\nkey point is, file has to be in `G:\\javaPract\\sample\\PrivateMain.class`, and `G:\\javaPract` (__not__ `G:\\javaPract\\sample`!) has to be on the classpath. Then run `java sample.PrivateMain`.\r\n\r\nGenerally, do not use `CLASSPATH`, just specify with the `-cp` parameter. `CLASSPATH` is a global variable and as a general rule it&#39;s bizarre to limit your computer to only run one java application ever.\r\n\r\n","title":"Unable to execute simple java file from windows command line","body":"<h2><code>java PrivateMain</code> does not work</h2>\n<p>That's because your class isn't called that. It's called <code>sample.PrivateMain</code>. If you use <code>java</code> in a 'I shall give you the name of my class' mode (i.e. not via the <code>-jar</code> or <code>-jmod</code> launch options), it <strong>has to be</strong> fully qualified.</p>\n<h2><code>java sample.PrivateMain</code> does not work</h2>\n<p>class names are turned into paths by turning dots into slashes and appending <code>.class</code>. In other words, if you run <code>java sample.PrivateMain</code>, java starts, and checks every dir in the classpath by <strong>appending <code>sample/PrivateMain.class</code> to it</strong>. This doesn't find your class because your class isn't in sample/PrivateMain - it's in ./PrivateMain which isn't where java is going to look at all.</p>\n<h2>How to fix it</h2>\n<p>For throwaway projects like this, get rid of the <code>package</code> declaration. While you're at it, you can just run <code>java MyMain.java</code> - no need to involve <code>javac</code>. Once you graduate to more serious projects with multiple source files, and especially, multiple packages, ditch this command line <code>javac</code> and <code>java</code> stuff and use a build system such as maven or gradle.</p>\n<p>If you must, for some strange reason, use a package statement, set up your project like so:</p>\n<pre><code>cd G:\\javaPract\nmkdir sample\ncd sample\n# put your PrivateMain.java file here\njavac PrivateMain.java\ncd ..\njava -cp . sample.PrivateMain\n</code></pre>\n<p>key point is, file has to be in <code>G:\\javaPract\\sample\\PrivateMain.class</code>, and <code>G:\\javaPract</code> (<strong>not</strong> <code>G:\\javaPract\\sample</code>!) has to be on the classpath. Then run <code>java sample.PrivateMain</code>.</p>\n<p>Generally, do not use <code>CLASSPATH</code>, just specify with the <code>-cp</code> parameter. <code>CLASSPATH</code> is a global variable and as a general rule it's bizarre to limit your computer to only run one java application ever.</p>\n"}],"owner":{"account_id":1472673,"reputation":33,"user_id":1383816,"accept_rate":20,"display_name":"sampath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684373714,"answer_count":1,"score":0,"last_activity_date":1684362436,"creation_date":1684359144,"question_id":76276343,"body_markdown":"Unable to execute this code from windows command line\r\n1) I wrote the code as :\r\n\r\n```\r\npackage sample;\r\n\r\npublic class PrivateMain{\r\n\tpublic static void main(String[] args){\r\n\t\tSystem.out.println(&quot;This is from  main&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n2) I have set the classpath using below commands, but still receiving error as &quot;Could not find or load main class&quot;. Am i missing any steps?\r\n\r\n```\r\nG:\\javaPract&gt;javac PrivateMain.java  \r\n\r\nG:\\javaPract&gt;java PrivateMain      \r\nError: Could not find or load main class PrivateMain\r\n\r\nG:\\javaPract&gt;java sample.PrivateMain \r\nError: Could not find or load main class sample.PrivateMain\r\n\r\nG:\\javaPract&gt;set CLASSPATH=%CLASSPATH%;.\r\n\r\nG:\\javaPract&gt;echo %CLASSPATH%\r\nG:\\javaPract;.\r\n\r\nG:\\javaPract&gt;javac PrivateMain.java \r\n\r\nG:\\javaPract&gt;java PrivateMain      \r\nError: Could not find or load main class PrivateMain\r\n\r\nG:\\javaPract&gt;java sample.PrivateMain \r\nError: Could not find or load main class sample.PrivateMain\r\n\r\nG:\\javaPract&gt;\r\n```\r\n3) file contents on G:\\javaPract directory:\r\n\r\n```\r\nG:\\javaPract&gt;dir\r\n Volume in drive G is Learning\r\n Volume Serial Number is 008F-C257\r\n\r\n Directory of G:\\javaPract\r\n\r\n03/21/2023  08:04 AM    &lt;DIR&gt;          .\r\n03/21/2023  08:04 AM    &lt;DIR&gt;          ..\r\n05/17/2023  04:35 PM               280 PrivateMain.java\r\n05/17/2023  04:36 PM               688 PrivateMain.class\r\n```\r\n\r\n\r\n","title":"Unable to execute simple java file from windows command line","body":"<p>Unable to execute this code from windows command line</p>\n<ol>\n<li>I wrote the code as :</li>\n</ol>\n<pre><code>package sample;\n\npublic class PrivateMain{\n    public static void main(String[] args){\n        System.out.println(&quot;This is from  main&quot;);\n    }\n\n}\n</code></pre>\n<ol start=\"2\">\n<li>I have set the classpath using below commands, but still receiving error as &quot;Could not find or load main class&quot;. Am i missing any steps?</li>\n</ol>\n<pre><code>G:\\javaPract&gt;javac PrivateMain.java  \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;set CLASSPATH=%CLASSPATH%;.\n\nG:\\javaPract&gt;echo %CLASSPATH%\nG:\\javaPract;.\n\nG:\\javaPract&gt;javac PrivateMain.java \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;\n</code></pre>\n<ol start=\"3\">\n<li>file contents on G:\\javaPract directory:</li>\n</ol>\n<pre><code>G:\\javaPract&gt;dir\n Volume in drive G is Learning\n Volume Serial Number is 008F-C257\n\n Directory of G:\\javaPract\n\n03/21/2023  08:04 AM    &lt;DIR&gt;          .\n03/21/2023  08:04 AM    &lt;DIR&gt;          ..\n05/17/2023  04:35 PM               280 PrivateMain.java\n05/17/2023  04:36 PM               688 PrivateMain.class\n</code></pre>\n"},{"tags":["java","javafx","java-8","javafx-2","javafx-8"],"comments":[{"owner":{"account_id":1346923,"reputation":56,"user_id":1287474,"display_name":"Majed"},"score":0,"creation_date":1449054620,"post_id":34036207,"comment_id":55837059,"body_markdown":"Are you using maven resource filtering? I&#39;ve just faced the same issue and it turns out to be caused by maven filtering, as I forgot to exclude them from filtering.","body":"Are you using maven resource filtering? I&#39;ve just faced the same issue and it turns out to be caused by maven filtering, as I forgot to exclude them from filtering."},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449081524,"post_id":34036207,"comment_id":55855370,"body_markdown":"@MajedAbdulaziz Thanks a lot for the reply, but I&#39;m not using maven, I don&#39;t think this is the cause in my case.","body":"@MajedAbdulaziz Thanks a lot for the reply, but I&#39;m not using maven, I don&#39;t think this is the cause in my case."},{"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"score":0,"creation_date":1449149658,"post_id":34036207,"comment_id":55887670,"body_markdown":"Where in relation to your source file and the compiled class file is the `Roboto-Thin.ttf` located?","body":"Where in relation to your source file and the compiled class file is the <code>Roboto-Thin.ttf</code> located?"},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449156636,"post_id":34036207,"comment_id":55892773,"body_markdown":"@hotzst They are all in the same folder `out&gt;production&gt;TeamViewer&gt;sample&gt;Main.class` and `out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf`","body":"@hotzst They are all in the same folder <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Main.class</code> and <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf</code>"},{"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"score":1,"creation_date":1449742356,"post_id":34036207,"comment_id":56143255,"body_markdown":"If you move the project to a different location, which does not have a path containing a space (`Java8%20projects`) does that make a difference? What if you package the application in a jar file and run that one?","body":"If you move the project to a different location, which does not have a path containing a space (<code>Java8%20projects</code>) does that make a difference? What if you package the application in a jar file and run that one?"},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449757257,"post_id":34036207,"comment_id":56152878,"body_markdown":"@hotzst Thanks a lot, removing the space from `Java8%20projects` to `Java8projects` tends to solve the problem.","body":"@hotzst Thanks a lot, removing the space from <code>Java8%20projects</code> to <code>Java8projects</code> tends to solve the problem."}],"answers":[{"tags":[],"owner":{"account_id":4400755,"reputation":1015,"user_id":3586536,"display_name":"Prometheus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449268035,"creation_date":1449268035,"answer_id":34098531,"question_id":34036207,"body_markdown":"I&#39;m using the e(fx)clipse plugin for Eclipse, which does not recognize your CSS file as valid JavaFX CSS. I do not get the exception when I start the program however, it simply uses the default font.\r\n\r\nWith the following changes, the font is being loaded and displayed.\r\n\r\n    /**/\r\n    @font-face {\r\n        font-family: Roboto; /* removed &#39;&#39; */\r\n        src: url(&quot;Roboto-Thin.ttf&quot;);\r\n    }\r\n    #sampleLabel{\r\n        -fx-font-family: Roboto ; /* added -fx- prefix */\r\n    }","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I'm using the e(fx)clipse plugin for Eclipse, which does not recognize your CSS file as valid JavaFX CSS. I do not get the exception when I start the program however, it simply uses the default font.</p>\n\n<p>With the following changes, the font is being loaded and displayed.</p>\n\n<pre><code>/**/\n@font-face {\n    font-family: Roboto; /* removed '' */\n    src: url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ; /* added -fx- prefix */\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":64048,"reputation":952,"user_id":189280,"accept_rate":70,"display_name":"Terje Dahl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1454343190,"creation_date":1454343190,"answer_id":35135133,"question_id":34036207,"body_markdown":"I found the possible cause and a work-around:\r\nUnder the hood the css-loader uses the function `Font.loadFont` to load the font-face in your CSS.\r\n`Font.loadFont` simply returns `null` if it fails, which give the &quot;warning&quot;.\r\n\r\nIt seems that this function does not work with `%20` it its path/url-string.\r\nSo you need to resolve the path and then replace it with a space.\r\nThat means you will have to load your fonts with code in stead of with CSS (for now).\r\n\r\nIn Clojure my work-around looks like this:\r\n\r\n    (require &#39;[clojure.java.io :as cio])\r\n    (require &#39;[clojure.string :as s])\r\n    (-&gt; &quot;fonts/SourceCodePro-Regular.ttf&quot; \r\n      cio/resource \r\n      str \r\n      (s/replace &quot;%20&quot; &quot; &quot;) \r\n      (javafx.scene.text.Font/loadFont  10.))\r\n;-)\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I found the possible cause and a work-around:\nUnder the hood the css-loader uses the function <code>Font.loadFont</code> to load the font-face in your CSS.\n<code>Font.loadFont</code> simply returns <code>null</code> if it fails, which give the \"warning\".</p>\n\n<p>It seems that this function does not work with <code>%20</code> it its path/url-string.\nSo you need to resolve the path and then replace it with a space.\nThat means you will have to load your fonts with code in stead of with CSS (for now).</p>\n\n<p>In Clojure my work-around looks like this:</p>\n\n<pre><code>(require '[clojure.java.io :as cio])\n(require '[clojure.string :as s])\n(-&gt; \"fonts/SourceCodePro-Regular.ttf\" \n  cio/resource \n  str \n  (s/replace \"%20\" \" \") \n  (javafx.scene.text.Font/loadFont  10.))\n</code></pre>\n\n<p>;-)</p>\n"},{"tags":[],"owner":{"account_id":64048,"reputation":952,"user_id":189280,"accept_rate":70,"display_name":"Terje Dahl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514746427,"creation_date":1514723843,"answer_id":48042484,"question_id":34036207,"body_markdown":"So, almost 2 years later, and I came across my own response to the same problem I still have.\r\n\r\nBut now I have a cooler and more elegant solution, after studying the source code for `com.sun.javafx.css.StyleManager` : Simply parse the stylesheets myself and load the fonts.\r\n\r\nSee relevant source code here: [lines 932-662][1]\r\n\r\n(Yes, this is all in Clojure, but I am sure you can figure it out.)\r\n\r\nI start with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn add-stylesheet [^Scene scene path]\r\n      (let [logger (Logging/getCSSLogger)\r\n            level (.level logger)]\r\n        (.setLevel logger PlatformLogger$Level/OFF)  ;; turn off logger\r\n        (-&gt; scene .getStylesheets (.add path))  ;; set stylesheet\r\n        (.setLevel logger level) ;; turn logger back on\r\n        (-&gt; path stylesheet-parsed load-fonts))) ;; parse and load fonts\r\n\r\n(Turning off logging doesn&#39;t work, for some reason).\r\n\r\nThe stylesheet is parsed with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn stylesheet-parsed [path]\r\n      (.parse (CSSParser.) (cio/resource path)))\r\n\r\nAnd finally the fonts are loaded with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn- load-fonts [^Stylesheet stylesheet]\r\n      (doseq [^FontFace fontface (.getFontFaces stylesheet)]\r\n        (doseq [^FontFace$FontFaceSrc ffsrc (.getSources fontface)]\r\n          (let [src (-&gt; ffsrc .getSrc (cs/replace &quot;%20&quot; &quot; &quot;))] ;; &lt;- sanitizing path for Font/getFont\r\n            (println &quot;Loading font:&quot; src)\r\n            (let [f (Font/loadFont src 10.)]\r\n              (println &quot;Font loaded:&quot; f))))))\r\n\r\nThis works just fine, and looks a lot like the original. An advantage is that here we don&#39;t check for type URL only, so we could theoretically extend it to handle @font-face more extensively.\r\n\r\nHere is a more Clojure-y implementation of `load-fonts` which returns a list of all fonts loaded:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn- load-fontface-src [^FontFace$FontFaceSrc ffsrc]\r\n      (-&gt; ffsrc .getSrc (cs/replace &quot;%20&quot; &quot; &quot;) (Font/loadFont 10.)))\r\n    \r\n    (defn- load-fontface [^FontFace ff]\r\n      (map load-fontface-src (.getSources ff)))\r\n    \r\n    (defn- load-fonts [^Stylesheet stylesheet]\r\n      (vec (flatten (map load-fontface (.getFontFaces stylesheet)))))\r\n\r\nAnd the imports needed:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (import\r\n      &#39;[com.sun.javafx.css.parser CSSParser]\r\n      &#39;[com.sun.javafx.css Stylesheet FontFace FontFace$FontFaceSrc]\r\n      &#39;[com.sun.javafx.util Logging]\r\n      &#39;[sun.util.logging PlatformLogger$Level])\r\n\r\nTODO:  \r\n1. Turn of logging. (It is annoying, though only a problem in development.)  \r\n2. Test to see if any fonts were not loaded, and only then to the alternative parsing and loading.  But probably the simply checking would require as much processing as actually loading the fonts an extra time.\r\n\r\nFIX:\r\nadded `vec` to the left of `flatten`, to ensure that lazy seqs are realized.\r\n\r\n  [1]: http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/javafx/css/StyleManager.java#932\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>So, almost 2 years later, and I came across my own response to the same problem I still have.</p>\n\n<p>But now I have a cooler and more elegant solution, after studying the source code for <code>com.sun.javafx.css.StyleManager</code> : Simply parse the stylesheets myself and load the fonts.</p>\n\n<p>See relevant source code here: <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/javafx/css/StyleManager.java#932\" rel=\"nofollow noreferrer\">lines 932-662</a></p>\n\n<p>(Yes, this is all in Clojure, but I am sure you can figure it out.)</p>\n\n<p>I start with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn add-stylesheet [^Scene scene path]\n  (let [logger (Logging/getCSSLogger)\n        level (.level logger)]\n    (.setLevel logger PlatformLogger$Level/OFF)  ;; turn off logger\n    (-&gt; scene .getStylesheets (.add path))  ;; set stylesheet\n    (.setLevel logger level) ;; turn logger back on\n    (-&gt; path stylesheet-parsed load-fonts))) ;; parse and load fonts\n</code></pre>\n\n<p>(Turning off logging doesn't work, for some reason).</p>\n\n<p>The stylesheet is parsed with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn stylesheet-parsed [path]\n  (.parse (CSSParser.) (cio/resource path)))\n</code></pre>\n\n<p>And finally the fonts are loaded with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fonts [^Stylesheet stylesheet]\n  (doseq [^FontFace fontface (.getFontFaces stylesheet)]\n    (doseq [^FontFace$FontFaceSrc ffsrc (.getSources fontface)]\n      (let [src (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \"))] ;; &lt;- sanitizing path for Font/getFont\n        (println \"Loading font:\" src)\n        (let [f (Font/loadFont src 10.)]\n          (println \"Font loaded:\" f))))))\n</code></pre>\n\n<p>This works just fine, and looks a lot like the original. An advantage is that here we don't check for type URL only, so we could theoretically extend it to handle @font-face more extensively.</p>\n\n<p>Here is a more Clojure-y implementation of <code>load-fonts</code> which returns a list of all fonts loaded:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fontface-src [^FontFace$FontFaceSrc ffsrc]\n  (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \") (Font/loadFont 10.)))\n\n(defn- load-fontface [^FontFace ff]\n  (map load-fontface-src (.getSources ff)))\n\n(defn- load-fonts [^Stylesheet stylesheet]\n  (vec (flatten (map load-fontface (.getFontFaces stylesheet)))))\n</code></pre>\n\n<p>And the imports needed:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(import\n  '[com.sun.javafx.css.parser CSSParser]\n  '[com.sun.javafx.css Stylesheet FontFace FontFace$FontFaceSrc]\n  '[com.sun.javafx.util Logging]\n  '[sun.util.logging PlatformLogger$Level])\n</code></pre>\n\n<p>TODO:<br>\n1. Turn of logging. (It is annoying, though only a problem in development.)<br>\n2. Test to see if any fonts were not loaded, and only then to the alternative parsing and loading.  But probably the simply checking would require as much processing as actually loading the fonts an extra time.</p>\n\n<p>FIX:\nadded <code>vec</code> to the left of <code>flatten</code>, to ensure that lazy seqs are realized.</p>\n"},{"tags":[],"owner":{"account_id":15913138,"reputation":137,"user_id":11482560,"display_name":"Fay Boisam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578828197,"creation_date":1578828197,"answer_id":59703303,"question_id":34036207,"body_markdown":"For those who - like me - still have this issue and do not want or know how to use Clojure, here is how to do it in Java only: &lt;br&gt;\r\nBevore adding the stylesheet(s) to your scene, use &lt;code&gt;Font.loadFont(getClass().getResourceAsStream([fontpath...]), [Some font-size, for example 12]);&lt;/code&gt;&lt;br&gt;The font will then be registered in JavaFX and you can use the &lt;code&gt;-fx-font-family&lt;/code&gt; css-Property with the loaded font.\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>For those who - like me - still have this issue and do not want or know how to use Clojure, here is how to do it in Java only: <br>\nBevore adding the stylesheet(s) to your scene, use <code>Font.loadFont(getClass().getResourceAsStream([fontpath...]), [Some font-size, for example 12]);</code><br>The font will then be registered in JavaFX and you can use the <code>-fx-font-family</code> css-Property with the loaded font.</p>\n"},{"tags":[],"owner":{"account_id":5279842,"reputation":21,"user_id":4215582,"display_name":"Adrian Romero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607005851,"creation_date":1607005851,"answer_id":65127949,"question_id":34036207,"body_markdown":"\r\nIn my case this is produced by the &#39;-&#39; character in the font file name, replace this with a &#39;_&#39; and it works.\r\n\r\ni identify that the font family must be the same file name but replacing all special characters &#39; &#39; (a blank space) and split the camel case words. \r\n\r\nso:\r\n\r\nbefore (no working):\r\n\r\n    @font-face {\r\n        font-family: &#39;RifficFree Bold&#39;;\r\n        src: url(&quot;../fonts/RifficFree-Bold.ttf&quot;);\r\n    }\r\n    .bingo-number, .label{\r\n        -fx-font-family: &#39;RifficFree Bold&#39;;\r\n    }\r\n\r\nafter (working):\r\n\r\n    @font-face {\r\n        font-family: &#39;Riffic Free Bold&#39;;\r\n        src: url(&quot;../fonts/RifficFree_Bold.ttf&quot;);\r\n    }\r\n    .bingo-number, .label{\r\n        -fx-font-family: &#39;Riffic Free Bold&#39;;\r\n    }","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>In my case this is produced by the '-' character in the font file name, replace this with a '_' and it works.</p>\n<p>i identify that the font family must be the same file name but replacing all special characters ' ' (a blank space) and split the camel case words.</p>\n<p>so:</p>\n<p>before (no working):</p>\n<pre><code>@font-face {\n    font-family: 'RifficFree Bold';\n    src: url(&quot;../fonts/RifficFree-Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'RifficFree Bold';\n}\n</code></pre>\n<p>after (working):</p>\n<pre><code>@font-face {\n    font-family: 'Riffic Free Bold';\n    src: url(&quot;../fonts/RifficFree_Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'Riffic Free Bold';\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28319527,"reputation":1,"user_id":21655562,"display_name":"Yasin Ali Marouga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684361663,"creation_date":1684361591,"answer_id":76276518,"question_id":34036207,"body_markdown":"I found a solution on Reddit that worked for me. Here&#39;s the link: [Reddit post][1]\r\n\r\nWhen defining the font family in the CSS stylesheet, make sure to use the exact name mentioned on the first line of the font file.\r\n\r\nFor example, if the first line says &quot;Pixeloid Sans&quot;, the font family should be specified as follows:\r\n\r\n\r\n`-fx-font-family: &quot;Pixeloid Sans&quot;;`\r\n\r\nI also removed the `@font-face` declaration, as it was unnecessary.\r\n\r\nLastly, I should mention that all of my .tff files are located in a folder within /resources.\r\n\r\n\r\n  [1]: https://www.reddit.com/r/javahelp/comments/3pxmkc/javafx_fontface_css_not_working/","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I found a solution on Reddit that worked for me. Here's the link: <a href=\"https://www.reddit.com/r/javahelp/comments/3pxmkc/javafx_fontface_css_not_working/\" rel=\"nofollow noreferrer\">Reddit post</a></p>\n<p>When defining the font family in the CSS stylesheet, make sure to use the exact name mentioned on the first line of the font file.</p>\n<p>For example, if the first line says &quot;Pixeloid Sans&quot;, the font family should be specified as follows:</p>\n<p><code>-fx-font-family: &quot;Pixeloid Sans&quot;;</code></p>\n<p>I also removed the <code>@font-face</code> declaration, as it was unnecessary.</p>\n<p>Lastly, I should mention that all of my .tff files are located in a folder within /resources.</p>\n"}],"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7945,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":35135133,"answer_count":6,"score":11,"last_activity_date":1684361663,"creation_date":1449037539,"question_id":34036207,"body_markdown":"I had already asked a similar question &lt;a href=&quot;https://stackoverflow.com/questions/33973921/javafx-font-face-css-error-loadstylesheetunprivileged&quot;&gt;here&lt;/a&gt; but it seems It wasn&#39;t clear since I had a lot of code in the project and couldn&#39;t post it here So **please** don&#39;t mark as duplicate. \r\n\r\nBecause of that, I then decided to create a new project with just a **Label** in it to make the code small and clean and also to eliminate other **potential suspects** of the error I&#39;m getting.\r\n\r\nSo here is my **Java Source code**\r\n\r\n\tpublic class Main extends Application {\r\n\t\r\n\t\t@Override\r\n\t\tpublic void start(Stage primaryStage) throws Exception {\r\n\t\t\tGroup root = new Group();\r\n\t\r\n\t\t\tLabel label = new Label(&quot;Sample Label&quot;);\r\n\t\t\tlabel.setId(&quot;sampleLabel&quot;);\r\n\t\t\troot.getChildren().add(label);\r\n\t\r\n\t\t\tScene scene = new Scene(root, 300, 275);\r\n\t\t\tscene.getStylesheets().add(getClass().getResource(&quot;applicationStyles.css&quot;).toExternalForm());\r\n\t\t\tprimaryStage.setTitle(&quot;Hello World&quot;);\r\n\t\t\tprimaryStage.setScene(scene);\r\n\t\t\tprimaryStage.show();\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tlaunch(args);\r\n\t\t}\r\n\t}\r\n\r\nAnd this is my **css file**\r\n\r\n    /**/\r\n    @font-face {\r\n        font-family:&#39;Roboto&#39;;\r\n        src:url(&quot;Roboto-Thin.ttf&quot;);\r\n    }\r\n    #sampleLabel{\r\n        -fx-font-family: Roboto ;\r\n    }\r\n\r\nThis is the error I&#39;m getting in Intellij Idea\r\n\r\n    Dec 02, 2015 9:16:34 AM com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\r\n    INFO: Could not load @font-face font [file:/C:/Users/UserName/Desktop/Java8%20projects/TeamViewer/out/production/TeamViewer/sample/Roboto-Thin.ttf]\r\n\r\n&gt; All the project files are in one package and the font file is also present in the out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf. I also upgraded from jdk-8u65 to jdk-8u66\r\n\r\nThanks, any help is greatly appreciated.","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I had already asked a similar question <a href=\"https://stackoverflow.com/questions/33973921/javafx-font-face-css-error-loadstylesheetunprivileged\">here</a> but it seems It wasn't clear since I had a lot of code in the project and couldn't post it here So <strong>please</strong> don't mark as duplicate. </p>\n\n<p>Because of that, I then decided to create a new project with just a <strong>Label</strong> in it to make the code small and clean and also to eliminate other <strong>potential suspects</strong> of the error I'm getting.</p>\n\n<p>So here is my <strong>Java Source code</strong></p>\n\n<pre><code>public class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Group root = new Group();\n\n        Label label = new Label(\"Sample Label\");\n        label.setId(\"sampleLabel\");\n        root.getChildren().add(label);\n\n        Scene scene = new Scene(root, 300, 275);\n        scene.getStylesheets().add(getClass().getResource(\"applicationStyles.css\").toExternalForm());\n        primaryStage.setTitle(\"Hello World\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n\n<p>And this is my <strong>css file</strong></p>\n\n<pre><code>/**/\n@font-face {\n    font-family:'Roboto';\n    src:url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ;\n}\n</code></pre>\n\n<p>This is the error I'm getting in Intellij Idea</p>\n\n<pre><code>Dec 02, 2015 9:16:34 AM com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\nINFO: Could not load @font-face font [file:/C:/Users/UserName/Desktop/Java8%20projects/TeamViewer/out/production/TeamViewer/sample/Roboto-Thin.ttf]\n</code></pre>\n\n<blockquote>\n  <p>All the project files are in one package and the font file is also present in the out>production>TeamViewer>sample>Roboto-Thin.ttf. I also upgraded from jdk-8u65 to jdk-8u66</p>\n</blockquote>\n\n<p>Thanks, any help is greatly appreciated.</p>\n"},{"tags":["java","character","emoji","grapheme"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480471390,"post_id":40878804,"comment_id":68972886,"body_markdown":"Interesting topic. I tried to find out what kind of character this is (your first example) and I&#39;m wondering if the combinations that are considered these combined emojis are real unicode standards or conventions adopted by vendors. Your first example is a combination of the unicode characters for Woman, Woman, Boy, Boy combined with Zero-width joiners. http://emojipedia.org/emoji/%F0%9F%91%A9%E2%80%8D%F0%9F%91%A9%E2%80%8D%F0%9F%91%A6%E2%80%8D%F0%9F%91%A6/","body":"Interesting topic. I tried to find out what kind of character this is (your first example) and I&#39;m wondering if the combinations that are considered these combined emojis are real unicode standards or conventions adopted by vendors. Your first example is a combination of the unicode characters for Woman, Woman, Boy, Boy combined with Zero-width joiners. <a href=\"http://emojipedia.org/emoji/%F0%9F%91%A9%E2%80%8D%F0%9F%91%A9%E2%80%8D%F0%9F%91%A6%E2%80%8D%F0%9F%91%A6/\" rel=\"nofollow noreferrer\">emojipedia.org/emoji/&hellip;</a>"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480475149,"post_id":40878804,"comment_id":68973868,"body_markdown":"One way of combining characters into emojis is using the zero-width-joiner codepoint (ZWJ/ U+200D). So one way to get the count of visible characters is to go over all unicode codepoints and whenever you encounter the ZWJ, you substract two (for the ZWJ and for the next character which is merged into the previous character). However there are more ways to compose emojis (and unicode characters) so your best bet is to wait for emoji4j to update or to do it yourself.","body":"One way of combining characters into emojis is using the zero-width-joiner codepoint (ZWJ/ U+200D). So one way to get the count of visible characters is to go over all unicode codepoints and whenever you encounter the ZWJ, you substract two (for the ZWJ and for the next character which is merged into the previous character). However there are more ways to compose emojis (and unicode characters) so your best bet is to wait for emoji4j to update or to do it yourself."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480481939,"post_id":40878804,"comment_id":68975726,"body_markdown":"Possible duplicate of [What&#39;s the correct algorithm to determine number of user-perceived-characters?](http://stackoverflow.com/questions/9097572/whats-the-correct-algorithm-to-determine-number-of-user-perceived-characters)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/9097572/whats-the-correct-algorithm-to-determine-number-of-user-perceived-characters\">What&#39;s the correct algorithm to determine number of user-perceived-characters?</a>"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480481975,"post_id":40878804,"comment_id":68975731,"body_markdown":"Doesn&#39;t look like Java supports counting Grapheme Clusters (perceived characters). So the above question/answer should still be valid.","body":"Doesn&#39;t look like Java supports counting Grapheme Clusters (perceived characters). So the above question/answer should still be valid."},{"owner":{"account_id":31954,"reputation":31434,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"score":0,"creation_date":1480512144,"post_id":40878804,"comment_id":68992578,"body_markdown":"It&#39;s a bit different - that question (and some of the comments on it) are avoiding the use of any higher-level functions or third-party bits like the ICU library. (They want to go from `int[]` to emoji count.) I&#39;m just working with Strings and happy to use whatever resources are available. In preliminary testing it looks like the ICU library might work - I&#39;ll make sure then add an answer.","body":"It&#39;s a bit different - that question (and some of the comments on it) are avoiding the use of any higher-level functions or third-party bits like the ICU library. (They want to go from <code>int[]</code> to emoji count.) I&#39;m just working with Strings and happy to use whatever resources are available. In preliminary testing it looks like the ICU library might work - I&#39;ll make sure then add an answer."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480515798,"post_id":40878804,"comment_id":68995213,"body_markdown":"I tried - didn&#39;t know about the ICU library - and it works, you can just use your code above that uses BreakIterator, as long as use ICU&#39;s version of BreakIterator rather than the java API version. Surprising. I&#39;m reading that even JDK9 is planned to support only Unicode version 8 rather than 9 which is the newest version. So ICU is the way forward.","body":"I tried - didn&#39;t know about the ICU library - and it works, you can just use your code above that uses BreakIterator, as long as use ICU&#39;s version of BreakIterator rather than the java API version. Surprising. I&#39;m reading that even JDK9 is planned to support only Unicode version 8 rather than 9 which is the newest version. So ICU is the way forward."}],"answers":[{"tags":[],"owner":{"account_id":31954,"reputation":31434,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1482151098,"creation_date":1482151098,"answer_id":41222783,"question_id":40878804,"body_markdown":"I ended up using the [ICU library][1], which worked much better. No changes (aside from import statements) were needed from my original codeblock, as it simply provides a different implementation of `BreakIterator`.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.ibm.icu/icu4j","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>I ended up using the <a href=\"https://mvnrepository.com/artifact/com.ibm.icu/icu4j\" rel=\"noreferrer\">ICU library</a>, which worked much better. No changes (aside from import statements) were needed from my original codeblock, as it simply provides a different implementation of <code>BreakIterator</code>.</p>\n"},{"tags":[],"owner":{"account_id":2733131,"reputation":3771,"user_id":2402790,"accept_rate":0,"display_name":"Michael Allan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682584891,"creation_date":1665831841,"answer_id":74078861,"question_id":40878804,"body_markdown":"JDK 15 [added support](https://bugs.openjdk.org/browse/JDK-8243579) for [extended grapheme clusters](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries) to the `java.util.regex` package.  Here’s a solution based on that:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    /** Returns the number of grapheme clusters within `text` between positions\r\n      * `start` and `end`.  Omits any partial cluster at the end of the span.\r\n      */\r\n    int columnarSpan( String text, int start, int end ) {\r\n        return columnarSpan( text, start, end, /*wholeOnly*/true ); }\r\n\r\n\r\n    /** @param wholeOnly Whether to omit any partial cluster at the end\r\n      *   of the span.  Iff `true` and `end` bisects the final cluster,\r\n      *   then the final cluster is omitted from the count.\r\n      */\r\n    int columnarSpan( final String text, final int start, final int end,\r\n          final boolean wholeOnly ) {\r\n        graphemeMatcher.reset( text ).region( start, end );\r\n        int count = 0;\r\n        while( graphemeMatcher.find() ) ++count;\r\n        if( wholeOnly  &amp;&amp;  count &gt; 0  &amp;&amp;  end &lt; text.length() ) {\r\n            final int countNext = columnarSpan( text, start, end + 1, false );\r\n            if( countNext == count ) --count; } /* The character at `end` bisects\r\n              the final cluster, which therefore lies partly outside the span.\r\n              Therefore exclude it from the count. */\r\n        return count; }\r\n\r\n\r\n    final Matcher graphemeMatcher = graphemePattern.matcher( &quot;&quot; );\r\n\r\n\r\n    /** The pattern of a grapheme cluster.\r\n      */\r\n    public static final Pattern graphemePattern = Pattern.compile( &quot;\\\\X&quot; ); } /*\r\n      An alternative means of cluster discovery is `java.txt.BreakIterator`.\r\n      Long outdated in this regard,  [https://bugs.openjdk.org/browse/JDK-8174266]\r\n      it was updated for JDK 20.  [https://stackoverflow.com/a/76109241/2402790] */\r\n\r\nCall it like this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    String emoji = &quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;;\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() );\r\n    System.out.println( count );\r\n\r\n    ⇒ 2\r\n\r\nNote that it counts whole clusters only. If the given `end` bisects the final cluster — the character at position `end` being part of the same extended cluster as the preceding character — then the final cluster is omitted from the count. For example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1 );\r\n    System.out.println( count );\r\n\r\n    ⇒ 1\r\n\r\nThis is generally the behaviour you want in order to print a line of text with a character pointer positioned beneath it (e.g. ‘`^`’) pointing *into the cluster* of the character at the given index. To defeat this behaviour (pointing *after the cluster*), call the base method as follows.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1, false );\r\n    System.out.println( count );\r\n\r\n    ⇒ 2\r\n\r\n*(Updated as per Skomisa’s comment.)*","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>JDK 15 <a href=\"https://bugs.openjdk.org/browse/JDK-8243579\" rel=\"nofollow noreferrer\">added support</a> for <a href=\"https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">extended grapheme clusters</a> to the <code>java.util.regex</code> package.  Here’s a solution based on that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Returns the number of grapheme clusters within `text` between positions\n  * `start` and `end`.  Omits any partial cluster at the end of the span.\n  */\nint columnarSpan( String text, int start, int end ) {\n    return columnarSpan( text, start, end, /*wholeOnly*/true ); }\n\n\n/** @param wholeOnly Whether to omit any partial cluster at the end\n  *   of the span.  Iff `true` and `end` bisects the final cluster,\n  *   then the final cluster is omitted from the count.\n  */\nint columnarSpan( final String text, final int start, final int end,\n      final boolean wholeOnly ) {\n    graphemeMatcher.reset( text ).region( start, end );\n    int count = 0;\n    while( graphemeMatcher.find() ) ++count;\n    if( wholeOnly  &amp;&amp;  count &gt; 0  &amp;&amp;  end &lt; text.length() ) {\n        final int countNext = columnarSpan( text, start, end + 1, false );\n        if( countNext == count ) --count; } /* The character at `end` bisects\n          the final cluster, which therefore lies partly outside the span.\n          Therefore exclude it from the count. */\n    return count; }\n\n\nfinal Matcher graphemeMatcher = graphemePattern.matcher( &quot;&quot; );\n\n\n/** The pattern of a grapheme cluster.\n  */\npublic static final Pattern graphemePattern = Pattern.compile( &quot;\\\\X&quot; ); } /*\n  An alternative means of cluster discovery is `java.txt.BreakIterator`.\n  Long outdated in this regard,  [https://bugs.openjdk.org/browse/JDK-8174266]\n  it was updated for JDK 20.  [https://stackoverflow.com/a/76109241/2402790] */\n</code></pre>\n<p>Call it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String emoji = &quot;👻👩‍👩‍👦‍👦&quot;;\nint count = columnarSpan( emoji, 0, /*end*/emoji.length() );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p>Note that it counts whole clusters only. If the given <code>end</code> bisects the final cluster — the character at position <code>end</code> being part of the same extended cluster as the preceding character — then the final cluster is omitted from the count. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1 );\nSystem.out.println( count );\n\n⇒ 1\n</code></pre>\n<p>This is generally the behaviour you want in order to print a line of text with a character pointer positioned beneath it (e.g. ‘<code>^</code>’) pointing <em>into the cluster</em> of the character at the given index. To defeat this behaviour (pointing <em>after the cluster</em>), call the base method as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1, false );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p><em>(Updated as per Skomisa’s comment.)</em></p>\n"},{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684360343,"creation_date":1682501660,"answer_id":76109241,"question_id":40878804,"body_markdown":"More than six years after this question was asked, an enhancement to properly process grapheme clusters within a `String` was finally implemented in Java 20, which was released a few weeks ago. See [JDK-8291660 Grapheme support in BreakIterator](https://bugs.openjdk.org/browse/JDK-8291660).\r\n\r\nThere is no change to the API of [the BreakIterator class](https://bugs.openjdk.org/browse/JDK-8291660), but its underlying code now correctly treats a grapheme cluster as a single unit rather than multiple characters.\r\n\r\nHere is a sample application, using the method and data provided in the question without any changes:\r\n\r\n    import java.nio.charset.Charset;\r\n    import java.text.BreakIterator;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws java.io.UnsupportedEncodingException {\r\n            System.out.println(&quot;System.getProperty(\\&quot;java.version\\&quot;): &quot; + System.getProperty(&quot;java.version&quot;));\r\n            System.out.println(&quot;Charset.defaultCharset():&quot; + Charset.defaultCharset());\r\n            Main.printStringInfo(&quot;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;);\r\n            Main.printStringInfo(&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;);\r\n        }\r\n    \r\n        static void printStringInfo(String s) {\r\n            System.out.print(&quot;\\nCode points for the String &quot; + s + &quot;:&quot;);\r\n            s.codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));\r\n            System.out.println(&quot;\\nThe length of the String &quot; + s + &quot; using String.length() is &quot; + s.length());\r\n            System.out.println(&quot;The length of the String &quot; + s + &quot; using BreakIterator is &quot; + Main.getLength(s));\r\n        }\r\n    \r\n        // Returns the correct number of perceived characters in a String.\r\n        // Requires JDK 20+ to work correctly.\r\n        // Earlier Java releases will incorrectly just count the code points instead.\r\n        // JDK-8291660 &quot;Grapheme support in BreakIterator&quot; (https://bugs.openjdk.org/browse/JDK-8291660) refers.\r\n        public static int getLength(String emoji) {\r\n            BreakIterator it = BreakIterator.getCharacterInstance();\r\n            it.setText(emoji);\r\n            int count = 0;\r\n            while (it.next() != BreakIterator.DONE) {\r\n                count++;\r\n            }\r\n            return count;\r\n        }\r\n    }\r\n\r\nHere is the output, showing the correct grapheme counts (1 and 2) when using JDK 20:\r\n\r\n    C:\\Java\\jdk-20\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53642:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\r\n    System.getProperty(&quot;java.version&quot;): 20-ea\r\n    Charset.defaultCharset():UTF-8\r\n    \r\n    Code points for the String &#128105;‍&#128105;‍&#128102;‍&#128102;:1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 11\r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 1\r\n    \r\n    Code points for the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 13\r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 2\r\n    \r\n    Process finished with exit code 0\r\n\r\n\r\nAnd here is the output for the identical code showing incorrect grapheme counts (7 and 8) when using JDK 17:\r\n\r\n    C:\\Java\\jdk-17.0.2\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53775:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\r\n    System.getProperty(&quot;java.version&quot;): 17.0.2\r\n    Charset.defaultCharset():UTF-8\r\n    \r\n    Code points for the String &#128105;‍&#128105;‍&#128102;‍&#128102;:1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 11\r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 7\r\n    \r\n    Code points for the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 13\r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 8\r\n    \r\n    Process finished with exit code 0\r\n\r\nI tested this in _Intellij IDEA 2023.1.1 Preview_ using _[Oracle OpenJDK version 20.0.1](https://jdk.java.net/20/)_ and [Oracle OpenJDK version 17.0.2](https://www.oracle.com/java/technologies/javase/17-0-2-relnotes.html)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>More than six years after this question was asked, an enhancement to properly process grapheme clusters within a <code>String</code> was finally implemented in Java 20, which was released a few weeks ago. See <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">JDK-8291660 Grapheme support in BreakIterator</a>.</p>\n<p>There is no change to the API of <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">the BreakIterator class</a>, but its underlying code now correctly treats a grapheme cluster as a single unit rather than multiple characters.</p>\n<p>Here is a sample application, using the method and data provided in the question without any changes:</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.text.BreakIterator;\n\npublic class Main {\n\n    public static void main(String[] args) throws java.io.UnsupportedEncodingException {\n        System.out.println(&quot;System.getProperty(\\&quot;java.version\\&quot;): &quot; + System.getProperty(&quot;java.version&quot;));\n        System.out.println(&quot;Charset.defaultCharset():&quot; + Charset.defaultCharset());\n        Main.printStringInfo(&quot;👩‍👩‍👦‍👦&quot;);\n        Main.printStringInfo(&quot;👻👩‍👩‍👦‍👦&quot;);\n    }\n\n    static void printStringInfo(String s) {\n        System.out.print(&quot;\\nCode points for the String &quot; + s + &quot;:&quot;);\n        s.codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));\n        System.out.println(&quot;\\nThe length of the String &quot; + s + &quot; using String.length() is &quot; + s.length());\n        System.out.println(&quot;The length of the String &quot; + s + &quot; using BreakIterator is &quot; + Main.getLength(s));\n    }\n\n    // Returns the correct number of perceived characters in a String.\n    // Requires JDK 20+ to work correctly.\n    // Earlier Java releases will incorrectly just count the code points instead.\n    // JDK-8291660 &quot;Grapheme support in BreakIterator&quot; (https://bugs.openjdk.org/browse/JDK-8291660) refers.\n    public static int getLength(String emoji) {\n        BreakIterator it = BreakIterator.getCharacterInstance();\n        it.setText(emoji);\n        int count = 0;\n        while (it.next() != BreakIterator.DONE) {\n            count++;\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>Here is the output, showing the correct grapheme counts (1 and 2) when using JDK 20:</p>\n<pre><code>C:\\Java\\jdk-20\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53642:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 20-ea\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 1\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 2\n\nProcess finished with exit code 0\n</code></pre>\n<p>And here is the output for the identical code showing incorrect grapheme counts (7 and 8) when using JDK 17:</p>\n<pre><code>C:\\Java\\jdk-17.0.2\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53775:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 17.0.2\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 7\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 8\n\nProcess finished with exit code 0\n</code></pre>\n<p>I tested this in <em>Intellij IDEA 2023.1.1 Preview</em> using <em><a href=\"https://jdk.java.net/20/\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 20.0.1</a></em> and <a href=\"https://www.oracle.com/java/technologies/javase/17-0-2-relnotes.html\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 17.0.2</a></p>\n"}],"owner":{"account_id":31954,"reputation":31434,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4239,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":41222783,"answer_count":3,"score":19,"last_activity_date":1684360343,"creation_date":1480469656,"question_id":40878804,"body_markdown":"I&#39;m looking to count the number of perceived emoji characters in a provided Java string. I&#39;m currently using the [emoji4j][1] library, but it doesn&#39;t work for grapheme clusters like this one: &#128105;‍&#128105;‍&#128102;‍&#128102;\r\n\r\nCalling `EmojiUtil.getLength(&quot;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;)` returns `4` instead of `1`, and similarly calling `EmojiUtil.getLength(&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;)` returns `5` instead of `2`.\r\n\r\nAre there any APIs or methods on `String` in Java that make it easy to count grapheme clusters?\r\n\r\nI&#39;ve been hunting around but understandably the `codePoints()` method on a `String` includes not only the visible emojis, but also the zero width joiners.\r\n\r\nI also attempted this using the `BreakIterator`:\r\n\r\n    public static int getLength(String emoji) {\r\n        BreakIterator it = BreakIterator.getCharacterInstance();\r\n        it.setText(emoji);\r\n        int emojiCount = 0;\r\n        while (it.next() != BreakIterator.DONE) {\r\n            emojiCount++;\r\n        }\r\n        return emojiCount;\r\n    }\r\n\r\nBut it seems to behave identically to the `codePoints()` method, returning `8` for something like `&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;`.\r\n\r\n  [1]: https://github.com/kcthota/emoji4j","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>I'm looking to count the number of perceived emoji characters in a provided Java string. I'm currently using the <a href=\"https://github.com/kcthota/emoji4j\" rel=\"noreferrer\">emoji4j</a> library, but it doesn't work for grapheme clusters like this one: 👩‍👩‍👦‍👦</p>\n\n<p>Calling <code>EmojiUtil.getLength(\"👩‍👩‍👦‍👦\")</code> returns <code>4</code> instead of <code>1</code>, and similarly calling <code>EmojiUtil.getLength(\"👻👩‍👩‍👦‍👦\")</code> returns <code>5</code> instead of <code>2</code>.</p>\n\n<p>Are there any APIs or methods on <code>String</code> in Java that make it easy to count grapheme clusters?</p>\n\n<p>I've been hunting around but understandably the <code>codePoints()</code> method on a <code>String</code> includes not only the visible emojis, but also the zero width joiners.</p>\n\n<p>I also attempted this using the <code>BreakIterator</code>:</p>\n\n<pre><code>public static int getLength(String emoji) {\n    BreakIterator it = BreakIterator.getCharacterInstance();\n    it.setText(emoji);\n    int emojiCount = 0;\n    while (it.next() != BreakIterator.DONE) {\n        emojiCount++;\n    }\n    return emojiCount;\n}\n</code></pre>\n\n<p>But it seems to behave identically to the <code>codePoints()</code> method, returning <code>8</code> for something like <code>\"👻👩‍👩‍👦‍👦\"</code>.</p>\n"},{"tags":["java","swing","log4j","log4j2"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684333920,"post_id":76273208,"comment_id":134503457,"body_markdown":"Why not just open the actual log file in your text area?","body":"Why not just open the actual log file in your text area?"},{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":1,"creation_date":1684333924,"post_id":76273208,"comment_id":134503458,"body_markdown":"Does this answer your question? [How to output logs to a JTextArea using Log4j2](https://stackoverflow.com/questions/24005748/how-to-output-logs-to-a-jtextarea-using-log4j2)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24005748/how-to-output-logs-to-a-jtextarea-using-log4j2\">How to output logs to a JTextArea using Log4j2</a>"},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334151,"post_id":76273208,"comment_id":134503522,"body_markdown":"@g00se Because it&#39;s set up to use a new file name each time, based on the date and time of the program being started. I&#39;m not sure how I&#39;d be able to easily identify the newest file.","body":"@g00se Because it&#39;s set up to use a new file name each time, based on the date and time of the program being started. I&#39;m not sure how I&#39;d be able to easily identify the newest file."},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334199,"post_id":76273208,"comment_id":134503535,"body_markdown":"@jonhanson Whilst I could do that, it involves creating a new Appender, something I&#39;d rather not do.","body":"@jonhanson Whilst I could do that, it involves creating a new Appender, something I&#39;d rather not do."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684334500,"post_id":76273208,"comment_id":134503626,"body_markdown":"*it&#39;s set up to use a new file name each time* Example name?","body":"<i>it&#39;s set up to use a new file name each time</i> Example name?"},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334711,"post_id":76273208,"comment_id":134503685,"body_markdown":"@g00se It&#39;s in the format `dd MMM yyyy HH.mm.ss`, so, for example: `17 May 2023 15.44.31.log`","body":"@g00se It&#39;s in the format <code>dd MMM yyyy HH.mm.ss</code>, so, for example: <code>17 May 2023 15.44.31.log</code>"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684359832,"creation_date":1684336033,"answer_id":76273554,"question_id":76273208,"body_markdown":"Maybe try something like (quick and dirty - you&#39;d definitely want to guard against endless looping):\r\n\r\n    import java.time.format.*;\r\n    import java.time.*;\r\n    import java.util.Comparator;\r\n    import java.nio.file.*;\r\n    import java.io.IOException;\r\n    \r\n    public class FName {\r\n        public static void main(String[] args) {\r\n            try {\r\n                //System.out.println(FName.getLatestLogFileName(Path.of(&quot;/tmp&quot;)));\r\n                System.out.println(FName.findLatestLogFileName(Path.of(&quot;/tmp&quot;)));\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public static Path findLatestLogFileName(Path logsDir) throws Exception {\r\n            // Tighten this pattern up as necessary\r\n            final String LOGFILE_PAT =&quot;.*\\\\.log&quot;;\r\n            return Files.find(logsDir, 1, (p, attr) -&gt;p.getFileName().toString().matches(LOGFILE_PAT)).\r\n                sorted(Comparator.comparingLong(p -&gt;p.toFile().lastModified())).\r\n                reduce((first, second) -&gt; second).\r\n                orElse(null);\r\n        }\r\n    \r\n        public static Path getLatestLogFileName(Path logsDir) {\r\n            Path result = null;\r\n            LocalDateTime ldt = LocalDateTime.now();\r\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MMMM uuuu HH.mm.ss&quot;);\r\n            boolean foundLogFile = false;\r\n            while (result == null) {\r\n                Path test = logsDir.resolve(Path.of(dtf.format(ldt) + &quot;.log&quot;));\r\n                if (Files.exists(test)) {\r\n                    result = test;\r\n                } else {\r\n                    ldt = ldt.minusSeconds(1);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n","title":"Print Log4j2 output into JTextArea","body":"<p>Maybe try something like (quick and dirty - you'd definitely want to guard against endless looping):</p>\n<pre><code>import java.time.format.*;\nimport java.time.*;\nimport java.util.Comparator;\nimport java.nio.file.*;\nimport java.io.IOException;\n\npublic class FName {\n    public static void main(String[] args) {\n        try {\n            //System.out.println(FName.getLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n            System.out.println(FName.findLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n    public static Path findLatestLogFileName(Path logsDir) throws Exception {\n        // Tighten this pattern up as necessary\n        final String LOGFILE_PAT =&quot;.*\\\\.log&quot;;\n        return Files.find(logsDir, 1, (p, attr) -&gt;p.getFileName().toString().matches(LOGFILE_PAT)).\n            sorted(Comparator.comparingLong(p -&gt;p.toFile().lastModified())).\n            reduce((first, second) -&gt; second).\n            orElse(null);\n    }\n\n    public static Path getLatestLogFileName(Path logsDir) {\n        Path result = null;\n        LocalDateTime ldt = LocalDateTime.now();\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MMMM uuuu HH.mm.ss&quot;);\n        boolean foundLogFile = false;\n        while (result == null) {\n            Path test = logsDir.resolve(Path.of(dtf.format(ldt) + &quot;.log&quot;));\n            if (Files.exists(test)) {\n                result = test;\n            } else {\n                ldt = ldt.minusSeconds(1);\n            }\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273554,"answer_count":1,"score":0,"last_activity_date":1684359832,"creation_date":1684333653,"question_id":76273208,"body_markdown":"I have a `JTextArea` in my program which I would like to display the program&#39;s logs. I&#39;ve done some digging and found `OutputStreamAppender` in the Log4j2 documentation, which I assume I could use to output logs to an `OutputStream` which I could then pipe into the `JTextArea`. Unfortunately there isn&#39;t much documentation (at least that I could find) on this. Am I on the right track here? If so, how do I use `OutputStreamAppender`? If not, what should I be doing? I&#39;d rather not create my own Appender.\r\n\r\nThanks","title":"Print Log4j2 output into JTextArea","body":"<p>I have a <code>JTextArea</code> in my program which I would like to display the program's logs. I've done some digging and found <code>OutputStreamAppender</code> in the Log4j2 documentation, which I assume I could use to output logs to an <code>OutputStream</code> which I could then pipe into the <code>JTextArea</code>. Unfortunately there isn't much documentation (at least that I could find) on this. Am I on the right track here? If so, how do I use <code>OutputStreamAppender</code>? If not, what should I be doing? I'd rather not create my own Appender.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","maven","spring-mvc","model-view-controller"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1684406961,"post_id":76276311,"comment_id":134514634,"body_markdown":"Railway url is invaild , pls provide one another accessable url","body":"Railway url is invaild , pls provide one another accessable url"},{"owner":{"account_id":17458032,"reputation":19,"user_id":12656364,"display_name":"krzysztofskul"},"score":0,"creation_date":1684411064,"post_id":76276311,"comment_id":134515339,"body_markdown":"I generated this url on railway&#39;s dashboard. Any url I create doesn&#39;t work. But when I use  SprongBOOT configuration in my pom.xml everything works fine.","body":"I generated this url on railway&#39;s dashboard. Any url I create doesn&#39;t work. But when I use  SprongBOOT configuration in my pom.xml everything works fine."}],"owner":{"account_id":17458032,"reputation":19,"user_id":12656364,"display_name":"krzysztofskul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684358810,"creation_date":1684358810,"question_id":76276311,"body_markdown":"I try to deploy Java Spring MVC web app which works fine on my localhost with Tomcat, but when deploy on railway.app, it crashes or find nothing when try to use any controller path/address. My webapp configuration files:\r\n\r\npom.xml\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;pl.krzysztofskul&lt;/groupId&gt;\r\n  &lt;artifactId&gt;sensit5&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;name&gt;sensit5&lt;/name&gt;\r\n  &lt;description&gt;A simple sensit5.&lt;/description&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n\t&lt;maven-compiler-pluging.version&gt;3.10.1&lt;/maven-compiler-pluging.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\t&lt;!-- E-MAIL --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n\t    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t\t    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n&lt;!--        &lt;version&gt;5.1.8.RELEASE&lt;/version&gt;--&gt;\r\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${maven-compiler-pluging.version}&lt;/version&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t    &lt;source&gt;${java.version}&lt;/source&gt;\r\n\t\t\t    &lt;target&gt;${java.version}&lt;/target&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t&lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t     &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t     &lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t     &lt;configuration&gt;\r\n\t\t       &lt;archive&gt;\r\n\t\t         &lt;manifest&gt;\r\n\t\t           &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t           &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n\t\t           &lt;mainClass&gt;pl.krzysztofskul.sensit5.App&lt;/mainClass&gt;\r\n\t\t         &lt;/manifest&gt;\r\n\t\t       &lt;/archive&gt;\r\n\t\t     &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nApp.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport javax.servlet.Filter;\r\n\r\nimport org.springframework.web.filter.CharacterEncodingFilter;\r\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n\r\npublic class App extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n\t\r\n    public static void main( String[] args )\r\n    {\r\n        System.out.println( &quot;Hello World sensit5!&quot; );\r\n    }\r\n    \r\n    @Override\r\n    protected Class&lt;?&gt;[] getRootConfigClasses() { return null; }\r\n\r\n    @Override\r\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n        return new Class[]{AppConfig.class};\r\n    }\r\n\r\n    @Override\r\n    protected String[] getServletMappings() {\r\n        return new String[]{&quot;/&quot;};\r\n    }\r\n\r\n    @Override\r\n    protected Filter[] getServletFilters() {\r\n        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();\r\n        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);\r\n        return new Filter[] { characterEncodingFilter };\r\n    }\r\n    \r\n}\r\n```\r\nAppConfig.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport java.util.Locale;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.LocaleContextResolver;\r\nimport org.springframework.web.servlet.ViewResolver;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\r\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\r\nimport org.springframework.web.servlet.view.JstlView;\r\n\r\n@Configuration\r\n@EnableWebMvc\r\n@ComponentScan(basePackages = &quot;pl.krzysztofskul.sensit5&quot;)\r\npublic class AppConfig implements WebMvcConfigurer {\r\n\r\n    @Bean\r\n    public ViewResolver internalResourceViewResolver() {\r\n        InternalResourceViewResolver bean = new InternalResourceViewResolver();\r\n        bean.setViewClass(JstlView.class);\r\n        bean.setPrefix(&quot;/WEB-INF/views/&quot;);\r\n        bean.setSuffix(&quot;.jsp&quot;);\r\n        return bean;\r\n    }\r\n\r\n    @Bean(name=&quot;localeResolver&quot;)\r\n    public LocaleContextResolver getLocaleContextResolver() {\r\n        SessionLocaleResolver localeResolver = new SessionLocaleResolver();\r\n        localeResolver.setDefaultLocale(new Locale(&quot;pl&quot;,&quot;PL&quot;));\r\n        return localeResolver;\r\n    }\r\n  \r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry handlerRegistry) {\r\n        handlerRegistry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\r\n    }\r\n\t\r\n}\r\n```\r\n\r\nHomePageController.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n@Controller\r\npublic class HomePageController {\r\n\r\n\t@GetMapping({&quot;/home&quot;, &quot;/&quot;})\r\n\tpublic String home() {\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/test/home&quot;)\r\n\t@ResponseBody\r\n\tpublic String testHome() {\r\n\t\treturn &quot;test home sensit5&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n\r\nGihub: https://github.com/krzysztofskul/sensit5.git\r\nRailway: https://sensit5-test.up.railway.app","title":"Java Spring MVC web app crashes after deploy on railway.app","body":"<p>I try to deploy Java Spring MVC web app which works fine on my localhost with Tomcat, but when deploy on railway.app, it crashes or find nothing when try to use any controller path/address. My webapp configuration files:</p>\n<p>pom.xml</p>\n<pre><code>\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;pl.krzysztofskul&lt;/groupId&gt;\n  &lt;artifactId&gt;sensit5&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;name&gt;sensit5&lt;/name&gt;\n  &lt;description&gt;A simple sensit5.&lt;/description&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;8&lt;/java.version&gt;\n    &lt;maven-compiler-pluging.version&gt;3.10.1&lt;/maven-compiler-pluging.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- E-MAIL --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n&lt;!--        &lt;version&gt;5.1.8.RELEASE&lt;/version&gt;--&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-compiler-pluging.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.3.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n             &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n             &lt;version&gt;3.1.0&lt;/version&gt;\n             &lt;configuration&gt;\n               &lt;archive&gt;\n                 &lt;manifest&gt;\n                   &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                   &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                   &lt;mainClass&gt;pl.krzysztofskul.sensit5.App&lt;/mainClass&gt;\n                 &lt;/manifest&gt;\n               &lt;/archive&gt;\n             &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n&lt;/project&gt;\n</code></pre>\n<p>App.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport javax.servlet.Filter;\n\nimport org.springframework.web.filter.CharacterEncodingFilter;\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n\npublic class App extends AbstractAnnotationConfigDispatcherServletInitializer {\n    \n    public static void main( String[] args )\n    {\n        System.out.println( &quot;Hello World sensit5!&quot; );\n    }\n    \n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() { return null; }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{AppConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{&quot;/&quot;};\n    }\n\n    @Override\n    protected Filter[] getServletFilters() {\n        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();\n        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);\n        return new Filter[] { characterEncodingFilter };\n    }\n    \n}\n</code></pre>\n<p>AppConfig.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport java.util.Locale;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.LocaleContextResolver;\nimport org.springframework.web.servlet.ViewResolver;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\nimport org.springframework.web.servlet.view.JstlView;\n\n@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = &quot;pl.krzysztofskul.sensit5&quot;)\npublic class AppConfig implements WebMvcConfigurer {\n\n    @Bean\n    public ViewResolver internalResourceViewResolver() {\n        InternalResourceViewResolver bean = new InternalResourceViewResolver();\n        bean.setViewClass(JstlView.class);\n        bean.setPrefix(&quot;/WEB-INF/views/&quot;);\n        bean.setSuffix(&quot;.jsp&quot;);\n        return bean;\n    }\n\n    @Bean(name=&quot;localeResolver&quot;)\n    public LocaleContextResolver getLocaleContextResolver() {\n        SessionLocaleResolver localeResolver = new SessionLocaleResolver();\n        localeResolver.setDefaultLocale(new Locale(&quot;pl&quot;,&quot;PL&quot;));\n        return localeResolver;\n    }\n  \n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry handlerRegistry) {\n        handlerRegistry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\n    }\n    \n}\n</code></pre>\n<p>HomePageController.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class HomePageController {\n\n    @GetMapping({&quot;/home&quot;, &quot;/&quot;})\n    public String home() {\n        return &quot;index&quot;;\n    }\n    \n    @GetMapping(&quot;/test/home&quot;)\n    @ResponseBody\n    public String testHome() {\n        return &quot;test home sensit5&quot;;\n    }\n    \n}\n</code></pre>\n<p>Gihub: <a href=\"https://github.com/krzysztofskul/sensit5.git\" rel=\"nofollow noreferrer\">https://github.com/krzysztofskul/sensit5.git</a>\nRailway: <a href=\"https://sensit5-test.up.railway.app\" rel=\"nofollow noreferrer\">https://sensit5-test.up.railway.app</a></p>\n"},{"tags":["java","spring-boot","jpa","design-patterns","dry"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1579075479,"post_id":59747099,"comment_id":105641420,"body_markdown":"Whoever told you there would be multiple DB calls is... misinformed. The _entire point_ of `@MappedSuperclass` is that it&#39;s copied inline into each subclass&#39;s table. (As a note, it&#39;s customary in Java for the backing field to just be named `deleted`.)","body":"Whoever told you there would be multiple DB calls is... misinformed. The <i>entire point</i> of <code>@MappedSuperclass</code> is that it&#39;s copied inline into each subclass&#39;s table. (As a note, it&#39;s customary in Java for the backing field to just be named <code>deleted</code>.)"},{"owner":{"account_id":6811028,"reputation":415,"user_id":6376299,"display_name":"dryleaf"},"score":0,"creation_date":1579075768,"post_id":59747099,"comment_id":105641539,"body_markdown":"Checkout `@Embeddable` and `@Embedded` annotations in spring boot. They can accomplish the same thing without any entity leak.","body":"Checkout <code>@Embeddable</code> and <code>@Embedded</code> annotations in spring boot. They can accomplish the same thing without any entity leak."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579076505,"post_id":59747099,"comment_id":105641808,"body_markdown":"Thank you guys for helping me out. @chrylis -on strike- Can you explain a bit what you meant by &quot;backing field&quot; please.","body":"Thank you guys for helping me out. @chrylis -on strike- Can you explain a bit what you meant by &quot;backing field&quot; please."},{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1579104894,"post_id":59747099,"comment_id":105656937,"body_markdown":"The drawback may be coupling between your services. If you modify `BaseEntity`, are you then forced to update and redeploy each service depending on it? That kind of coupling would violate the idea of micro-services.","body":"The drawback may be coupling between your services. If you modify <code>BaseEntity</code>, are you then forced to update and redeploy each service depending on it? That kind of coupling would violate the idea of micro-services."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579159020,"post_id":59747099,"comment_id":105673690,"body_markdown":"Thank you for yours kind concern @jaco0646, If I modify my base entity, then it would mean that my business requirement requires that modification to be reflected across all micro-service&#39;s entity. Modification will be only done in my base class if that requires to be reflected across entire eco-system, else the modification will be local to entities of individual micro-services. Also can you please tell me more how this is violating the micro-service principles please? My current development is CQRS based granular micro-service, where a single service should have a single concern.","body":"Thank you for yours kind concern @jaco0646, If I modify my base entity, then it would mean that my business requirement requires that modification to be reflected across all micro-service&#39;s entity. Modification will be only done in my base class if that requires to be reflected across entire eco-system, else the modification will be local to entities of individual micro-services. Also can you please tell me more how this is violating the micro-service principles please? My current development is CQRS based granular micro-service, where a single service should have a single concern."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579162039,"post_id":59747099,"comment_id":105674906,"body_markdown":"@jaco0646, Also I would request you to please explain, if using a common jar as shared library where I have common reusable utilities and functionalities is a bad idea in micro-service world? I have used this shared library concept to define the Base entity. Then how should I structure common codes for interfaces,base classes and utility functions like encryption helpers etc?\nThank you for yours kind attention","body":"@jaco0646, Also I would request you to please explain, if using a common jar as shared library where I have common reusable utilities and functionalities is a bad idea in micro-service world? I have used this shared library concept to define the Base entity. Then how should I structure common codes for interfaces,base classes and utility functions like encryption helpers etc? Thank you for yours kind attention"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684358737,"creation_date":1579078073,"answer_id":59747762,"question_id":59747099,"body_markdown":"I don&#39;t see any problems since your entity does not have any fields that can navigate to other entities (i.e does not have field that is mapped with `@OneToMany` / `@ManyToOne`) , so all of its fields are mapped to the same DB table and there is no reasons it will lead to separate database calls to load an entity. \r\n\r\n[tag:spring-data-jpa] also provides a base entity [`AbstractAuditable`][1] which developer can choose to use it rather than create by their own (though using it will increase the coupling of the entity to Spring Data) , so making the base entity as a separate shared JAR and let other projects to use is very common. It is even a good practise if your company have some rules that all entities must have certain set of fields like id , createdBy etc. mainly because it can make the codes DRY as said by you.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-jpa/blob/850aaac3710e2d9c12744a538964c27e0c18ba78/spring-data-jpa/src/main/java/org/springframework/data/jpa/domain/AbstractAuditable.java#L42","title":"Drawbacks of creating base class for JPA Entity(domain type object) in a shared library","body":"<p>I don't see any problems since your entity does not have any fields that can navigate to other entities (i.e does not have field that is mapped with <code>@OneToMany</code> / <code>@ManyToOne</code>) , so all of its fields are mapped to the same DB table and there is no reasons it will lead to separate database calls to load an entity.</p>\n<p><a href=\"/questions/tagged/spring-data-jpa\" class=\"post-tag\" title=\"show questions tagged &#39;spring-data-jpa&#39;\" aria-label=\"show questions tagged &#39;spring-data-jpa&#39;\" rel=\"tag\" aria-labelledby=\"tag-spring-data-jpa-tooltip-container\">spring-data-jpa</a> also provides a base entity <a href=\"https://github.com/spring-projects/spring-data-jpa/blob/850aaac3710e2d9c12744a538964c27e0c18ba78/spring-data-jpa/src/main/java/org/springframework/data/jpa/domain/AbstractAuditable.java#L42\" rel=\"nofollow noreferrer\"><code>AbstractAuditable</code></a> which developer can choose to use it rather than create by their own (though using it will increase the coupling of the entity to Spring Data) , so making the base entity as a separate shared JAR and let other projects to use is very common. It is even a good practise if your company have some rules that all entities must have certain set of fields like id , createdBy etc. mainly because it can make the codes DRY as said by you.</p>\n"}],"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6003,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":59747762,"answer_count":1,"score":2,"last_activity_date":1684358737,"creation_date":1579074939,"question_id":59747099,"body_markdown":"I&#39;m an experienced .net developer recently shifted to java development. I&#39;m working on micro-service using spring boot/cloud. For my work I have created a common jar(shared library) where I&#39;m placing those functionalities and helper methods which are to be reused across different micro-services. \r\n\r\nI&#39;m calling the shared library in my each spring boot micro-service application by adding it their pom file.This is all working great and I&#39;m able to use the shared library in my every micro-service as intended.      \r\n\r\nNow..\r\nI&#39;m using JPA for saving data and hence each micro-service application requires to have an entity class which is using code first way to create persistence in their respective data store.\r\n\r\nSince there are few common fields required in most micro-services I thought the idea of creating a base Entity class in my common jar(shared library) and make entities in my micro-services inherit the base Entity class.\r\n\r\nThis is the base Entity class that I created in my shared library\r\n\r\n    package com.microservice.xcloud.common.entity;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.MappedSuperclass;\r\n    \r\n    @MappedSuperclass\r\n    public class BaseEntity {\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.AUTO)\r\n    \tLong id;\r\n    \r\n    \t...\r\n    \t\r\n    \t@Column(nullable = true , name = &quot;isDeleted&quot;)\r\n    \tprivate boolean isDeleted;\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \t...\r\n    \r\n    \tpublic boolean isDeleted() {\r\n    \t\treturn isDeleted;\r\n    \t}\r\n    \r\n    \tpublic void setDeleted(boolean isDeleted) {\r\n    \t\tthis.isDeleted = isDeleted;\r\n    \t}\t\r\n    \t\r\n    }\r\n\r\nNow in my different micro-services I&#39;m inheriting from this class in order to have those fields without writing them again and again.(**DRY** princliple).\r\n\r\nI&#39;ve used this way while working with .net and EF also and found it to be working perfectly well. I would place the base entity in a shared dll and inherit from it in my application.\r\nSo I though of using the same thing for java and I did this in my micro-service application&#39;s Entity class.\r\n\r\n    package com.microservice.xcloud.companyservice.entity;\r\n    \r\n    \r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Table;\r\n    \r\n    import com.microservice.xcloud.common.entity.BaseEntity;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;companymaster&quot;)\r\n    public class CompanyMaster extends BaseEntity{\r\n    \t\r\n    \t\r\n    \t\r\n    \t@Column(nullable = false , name = &quot;companyName&quot;)\r\n    \tprivate String companyName;\r\n    \r\n    \t@Column(nullable = true , name = &quot;description&quot;)\r\n    \tprivate String description;\r\n    \r\n    \t\r\n    \r\n    \tpublic String getCompanyName() {\r\n    \t\treturn companyName;\r\n    \t}\r\n    \r\n    \tpublic void setCompanyName(String companyName) {\r\n    \t\tthis.companyName = companyName;\r\n    \t}\r\n    \r\n    \tpublic String getDescription() {\r\n    \t\treturn description;\r\n    \t}\r\n    \r\n    \tpublic void setDescription(String description) {\r\n    \t\tthis.description = description;\r\n    \t}\r\n    \r\n    \tpublic CompanyMaster() {\r\n    \t\tsuper();\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nPlease note that I have two different applications, \r\n1. Shared java library called common\r\n2. Micro-service application called company-service using the shared library through pom\r\n\r\n    \r\n\r\n    &lt;!-- Shared library --&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.microservice.xcloud&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;common&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${project.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI was told that this is a bad architecture and should not be done this way. Also I was told that this would led to two separate calls to db, one for shared library&#39;s base entity and another for micro-service&#39;s entity class. This is something I never heard about in .net world. Since I&#39;m new to java I need your expert advise.\r\nAs far as I know , in .net world since a shared library is a dll and it can not run seperately and needs to be attached to the application, this is totally out of question.\r\nMy shared library(created using spring boot) has no main method and hence should be attached to the calling micro-service like a dll type jar attaching to exe type of jar.\r\n\r\nThanking you for yours expertise and kind attention\r\n\t\t&lt;!-- ************************************************* --&gt;\r\n\r\n\r\n","title":"Drawbacks of creating base class for JPA Entity(domain type object) in a shared library","body":"<p>I'm an experienced .net developer recently shifted to java development. I'm working on micro-service using spring boot/cloud. For my work I have created a common jar(shared library) where I'm placing those functionalities and helper methods which are to be reused across different micro-services. </p>\n\n<p>I'm calling the shared library in my each spring boot micro-service application by adding it their pom file.This is all working great and I'm able to use the shared library in my every micro-service as intended.      </p>\n\n<p>Now..\nI'm using JPA for saving data and hence each micro-service application requires to have an entity class which is using code first way to create persistence in their respective data store.</p>\n\n<p>Since there are few common fields required in most micro-services I thought the idea of creating a base Entity class in my common jar(shared library) and make entities in my micro-services inherit the base Entity class.</p>\n\n<p>This is the base Entity class that I created in my shared library</p>\n\n<pre><code>package com.microservice.xcloud.common.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\n\n@MappedSuperclass\npublic class BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    Long id;\n\n    ...\n\n    @Column(nullable = true , name = \"isDeleted\")\n    private boolean isDeleted;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n    ...\n\n    public boolean isDeleted() {\n        return isDeleted;\n    }\n\n    public void setDeleted(boolean isDeleted) {\n        this.isDeleted = isDeleted;\n    }   \n\n}\n</code></pre>\n\n<p>Now in my different micro-services I'm inheriting from this class in order to have those fields without writing them again and again.(<strong>DRY</strong> princliple).</p>\n\n<p>I've used this way while working with .net and EF also and found it to be working perfectly well. I would place the base entity in a shared dll and inherit from it in my application.\nSo I though of using the same thing for java and I did this in my micro-service application's Entity class.</p>\n\n<pre><code>package com.microservice.xcloud.companyservice.entity;\n\n\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\nimport com.microservice.xcloud.common.entity.BaseEntity;\n\n@Entity\n@Table(name = \"companymaster\")\npublic class CompanyMaster extends BaseEntity{\n\n\n\n    @Column(nullable = false , name = \"companyName\")\n    private String companyName;\n\n    @Column(nullable = true , name = \"description\")\n    private String description;\n\n\n\n    public String getCompanyName() {\n        return companyName;\n    }\n\n    public void setCompanyName(String companyName) {\n        this.companyName = companyName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public CompanyMaster() {\n        super();\n\n    }\n}\n</code></pre>\n\n<p>Please note that I have two different applications, \n1. Shared java library called common\n2. Micro-service application called company-service using the shared library through pom</p>\n\n<pre><code>&lt;!-- Shared library --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microservice.xcloud&lt;/groupId&gt;\n    &lt;artifactId&gt;common&lt;/artifactId&gt;\n    &lt;version&gt;${project.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I was told that this is a bad architecture and should not be done this way. Also I was told that this would led to two separate calls to db, one for shared library's base entity and another for micro-service's entity class. This is something I never heard about in .net world. Since I'm new to java I need your expert advise.\nAs far as I know , in .net world since a shared library is a dll and it can not run seperately and needs to be attached to the application, this is totally out of question.\nMy shared library(created using spring boot) has no main method and hence should be attached to the calling micro-service like a dll type jar attaching to exe type of jar.</p>\n\n<p>Thanking you for yours expertise and kind attention\n        </p>\n"},{"tags":["java","jpa","jackson"],"comments":[{"owner":{"account_id":14999839,"reputation":138,"user_id":10827862,"display_name":"smileis2333"},"score":0,"creation_date":1684487330,"post_id":76276299,"comment_id":134527679,"body_markdown":"could u post the test code about these","body":"could u post the test code about these"}],"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684358706,"creation_date":1684358706,"question_id":76276299,"body_markdown":"I have a JPA entity with circular references to other entities. To solve the serialization issue this causes I have added the @JsonIdentityInfo annotation, like so:\r\n\r\n```\r\nprivate class Child {\r\n\r\n  private long id;\r\n\r\n  @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n  private Parent parent;\r\n}\r\n\r\n```\r\n\r\nThis results in the following serialization:\r\n\r\n```\r\n{\r\n  &quot;id&quot;: 1,\r\n  &quot;parent&quot;: 1\r\n}\r\n```\r\n\r\nThis would be fine normally, however I have a custom JsonSerializer on Parent.id attibute to encode its long id into a String. I would like this custom Serializer to be used by @JsonIdentityInfo.\r\n\r\nHow can I do that?\r\n\r\nI have tried implementing a custom ObjectIdGenerator, but I can&#39;t figure out how to do it or if that&#39;s the way to go about this.","title":"How to use @JsonIdentityInfo with custom attribute serializer","body":"<p>I have a JPA entity with circular references to other entities. To solve the serialization issue this causes I have added the @JsonIdentityInfo annotation, like so:</p>\n<pre><code>private class Child {\n\n  private long id;\n\n  @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\n  private Parent parent;\n}\n\n</code></pre>\n<p>This results in the following serialization:</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;parent&quot;: 1\n}\n</code></pre>\n<p>This would be fine normally, however I have a custom JsonSerializer on Parent.id attibute to encode its long id into a String. I would like this custom Serializer to be used by @JsonIdentityInfo.</p>\n<p>How can I do that?</p>\n<p>I have tried implementing a custom ObjectIdGenerator, but I can't figure out how to do it or if that's the way to go about this.</p>\n"},{"tags":["java","image","netbeans","imageicon","gui-builder"],"comments":[{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1338788653,"post_id":10876742,"comment_id":14173933,"body_markdown":"Could you add the source code where you instantiate the `ImageIcon`?","body":"Could you add the source code where you instantiate the <code>ImageIcon</code>?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1338788835,"post_id":10876742,"comment_id":14173956,"body_markdown":"to change 156th line in FrameView from setVisible(false) to setVisible(true), rest of changes I can&#39;t see from my magic globe (low baterry), for better help sooner post an [SSCCE](http://sscce.org/)","body":"to change 156th line in FrameView from setVisible(false) to setVisible(true), rest of changes I can&#39;t see from my magic globe (low baterry), for better help sooner post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>"},{"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"score":0,"creation_date":1338790040,"post_id":10876742,"comment_id":14174193,"body_markdown":"The NetBeans GUIBuilder makes its own source code, but here you go anyway:\n`jLabel1.setIcon(new javax.swing.ImageIcon(&quot;C:\\\\NoSpace\\\\Minesweeper\\\\Minesweeper graphics\\\\one.png&quot;));`","body":"The NetBeans GUIBuilder makes its own source code, but here you go anyway: <code>jLabel1.setIcon(new javax.swing.ImageIcon(&quot;C:\\\\NoSpace\\\\Minesweeper\\\\Minesweeper graphics\\\\one.png&quot;));</code>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1338790501,"post_id":10876742,"comment_id":14174276,"body_markdown":"1) Don&#39;t use a `File` to load an embedded resource. (WAG) 2) For better help sooner, post an [SSCCE](http://sscce.org/). (Excellent generic advice)","body":"1) Don&#39;t use a <code>File</code> to load an embedded resource. (WAG) 2) For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>. (Excellent generic advice)"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1338790748,"post_id":10876742,"comment_id":14174332,"body_markdown":"@LastStar007  That is exceptionally poor advice, even for a comment.  1) Using a `String` that represents a `File` for an application Icon. 2) Using an absolute path for same. 3) Making it platform specific in the path separator.","body":"@LastStar007  That is exceptionally poor advice, even for a comment.  1) Using a <code>String</code> that represents a <code>File</code> for an application Icon. 2) Using an absolute path for same. 3) Making it platform specific in the path separator."},{"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"score":0,"creation_date":1338815639,"post_id":10876742,"comment_id":14181843,"body_markdown":"Have you tried creating a new package in your src folder, adding the icon there and then using &quot;Image within project&quot;?","body":"Have you tried creating a new package in your src folder, adding the icon there and then using &quot;Image within project&quot;?"},{"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"score":0,"creation_date":1338816085,"post_id":10876742,"comment_id":14182035,"body_markdown":"Yes. I&#39;ve also tried importing the image to the same package as the JLabel, to no avail.","body":"Yes. I&#39;ve also tried importing the image to the same package as the JLabel, to no avail."},{"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"score":0,"creation_date":1338989184,"post_id":10876742,"comment_id":14234550,"body_markdown":"@LastStar007 Did you try in an empty Form? I&#39;ve reproduced your description and it works well! So if your Form is empty I agree there is a problem. If not the image doesn&#39;t show probably because there is a mistake elsewhere. If so consider posting an sscce. You can also try to use Clean and Build before running, maybe you have a pb with netbeans Ant script and he doesn&#39;t update itself to use the new image... To conclude I&#39;ll suggest to use &quot;image within project or &quot;&quot;custom code&quot;  instead of &quot;image chooser&quot; and &quot;external file&quot;. It will be better for portability.","body":"@LastStar007 Did you try in an empty Form? I&#39;ve reproduced your description and it works well! So if your Form is empty I agree there is a problem. If not the image doesn&#39;t show probably because there is a mistake elsewhere. If so consider posting an sscce. You can also try to use Clean and Build before running, maybe you have a pb with netbeans Ant script and he doesn&#39;t update itself to use the new image... To conclude I&#39;ll suggest to use &quot;image within project or &quot;&quot;custom code&quot;  instead of &quot;image chooser&quot; and &quot;external file&quot;. It will be better for portability."},{"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"score":0,"creation_date":1338989299,"post_id":10876742,"comment_id":14234608,"body_markdown":"This is a nice tutorial -&gt; http://netbeans.org/kb/docs/java/gui-image-display.html","body":"This is a nice tutorial -&gt; <a href=\"http://netbeans.org/kb/docs/java/gui-image-display.html\" rel=\"nofollow noreferrer\">netbeans.org/kb/docs/java/gui-image-display.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338978034,"creation_date":1338978034,"answer_id":10912305,"question_id":10876742,"body_markdown":"I found out the hard way that relying on Netbeans GUI builder to do everything for you is a mistake. \r\n\r\nJust create an icon fetching class like the one below, put the icons in it&#39;s package, and use &quot;Custom code&quot; instead of &quot;Image chooser&quot;. Sure the icons will not be visible inside NB. But if they show up when the app is running, who cares about that.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.example.resource.icons;\r\n\r\n    import javax.swing.ImageIcon;\r\n\r\n    public class IconFetch {\r\n\r\n        private static IconFetch instance;\r\n\r\n        private IconFetch(){\r\n        }\r\n\r\n        public static IconFetch getInstance() {\r\n            if (instance == null)\r\n                instance = new IconFetch();\r\n            return instance;\r\n        }\r\n\r\n        public ImageIcon getIcon(String iconName) {\r\n            java.net.URL imgUrl = getClass().getResource(iconName);\r\n            if (imgUrl != null) {\r\n                return new ImageIcon(imgUrl);\r\n            } else {\r\n                throw new IllegalArgumentException(&quot;This icon file does not exist&quot;);\r\n            }\r\n        }\r\n\r\n        public static final String MINESWEEPER_ONE = &quot;one.png&quot;;\r\n    }\r\n\r\nUsage:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE);\r\n\r\nIf the icon still doesn&#39;t show up after trying this, then something might be wrong with the way you layed out components in your form (the label is there but you can&#39;t see it).\r\n\r\nHope this helps even though it&#39;s a long shot.","title":"Netbeans ImageIcon not displaying","body":"<p>I found out the hard way that relying on Netbeans GUI builder to do everything for you is a mistake. </p>\n\n<p>Just create an icon fetching class like the one below, put the icons in it's package, and use \"Custom code\" instead of \"Image chooser\". Sure the icons will not be visible inside NB. But if they show up when the app is running, who cares about that.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.resource.icons;\n\nimport javax.swing.ImageIcon;\n\npublic class IconFetch {\n\n    private static IconFetch instance;\n\n    private IconFetch(){\n    }\n\n    public static IconFetch getInstance() {\n        if (instance == null)\n            instance = new IconFetch();\n        return instance;\n    }\n\n    public ImageIcon getIcon(String iconName) {\n        java.net.URL imgUrl = getClass().getResource(iconName);\n        if (imgUrl != null) {\n            return new ImageIcon(imgUrl);\n        } else {\n            throw new IllegalArgumentException(\"This icon file does not exist\");\n        }\n    }\n\n    public static final String MINESWEEPER_ONE = \"one.png\";\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE);\n</code></pre>\n\n<p>If the icon still doesn't show up after trying this, then something might be wrong with the way you layed out components in your form (the label is there but you can't see it).</p>\n\n<p>Hope this helps even though it's a long shot.</p>\n"},{"tags":[],"owner":{"account_id":4874736,"reputation":331,"user_id":3930191,"accept_rate":50,"display_name":"focus1691"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489137327,"creation_date":1489137327,"answer_id":42714497,"question_id":10876742,"body_markdown":"I had the same problem, and predi&#39;s solution wasn&#39;t working either. Then I created a package instead of a folder, and added the images there, and it works now.","title":"Netbeans ImageIcon not displaying","body":"<p>I had the same problem, and predi's solution wasn't working either. Then I created a package instead of a folder, and added the images there, and it works now.</p>\n"},{"tags":[],"owner":{"account_id":5138923,"reputation":11,"user_id":4116884,"display_name":"Lorenzo Prempratya Premvijit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623056501,"creation_date":1623056501,"answer_id":67868757,"question_id":10876742,"body_markdown":"I do have a same problem also. But I found the solution.\r\n\r\n1. I create the package in project and put the images inside there.\r\n2. When I build the project, Netbeans will create &#39;target&#39; folder and build .class files.\r\n3. I found that the images that I copied to the package, did not transfer to the &#39;target&#39; folder.\r\n\r\n**Interim solution.**\r\n4. I copy all image to target folder with the same structure. Then I can run the project directly from Netbeans.\r\n5. Incase you clean the project. Do no.4 again.","title":"Netbeans ImageIcon not displaying","body":"<p>I do have a same problem also. But I found the solution.</p>\n<ol>\n<li>I create the package in project and put the images inside there.</li>\n<li>When I build the project, Netbeans will create 'target' folder and build .class files.</li>\n<li>I found that the images that I copied to the package, did not transfer to the 'target' folder.</li>\n</ol>\n<p><strong>Interim solution.</strong>\n4. I copy all image to target folder with the same structure. Then I can run the project directly from Netbeans.\n5. Incase you clean the project. Do no.4 again.</p>\n"}],"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9657,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1684358705,"creation_date":1338788521,"question_id":10876742,"body_markdown":"I am using the NetBeans GUIBuilder to make a JPanel Form. I added a JLabel and used NetBeans&#39; interface to give it an icon from an external image (.png). The path is verified and the image shows up on the GUIBuilder screen. It even shows up when I click the &quot;Preview Design&quot; button. It DOES NOT show up when I RUN the project. The rest of the GUI appears as it should. Do any of you know why this happening and/or how to fix it?\r\n\r\nA lot of you have been asking for an SSCCE. Since the code is generated by the NetBeans Form Builder, I have instead included the steps I took to make the JLabel. The areas of focus are circled in red.\r\n\r\n1. Drag and drop a JLabel into the Form Builder.\r\n![Drag and drop a JLabel into the Form Builder.][1]\r\n\r\n2. Open up the JLabel&#39;s properties menu. Enter the empty string (&quot;&quot;) for the `text` field. Click the ellipsis next to `icon`.\r\n![Open up the JLabel&#39;s properties menu. Click the ellipsis next to icon.][2]\r\n\r\n3. Select External Image and click the ellipsis. \r\n![Select External Image and click the ellipsis.][3]\r\n\r\n4. Select the image of choice. In my case it&#39;s a .png.\r\n![Select the image of choice.][4]\r\n\r\n5. Notice that the image appears in the icon preview.\r\n![Notice that the image appears in the icon preview.][5]\r\n\r\n6. Close the icon menu and the properties menu, and notice that the image appears as the JLabel&#39;s icon on the Form Builder. \r\n![Close the icon menu and the properties menu, and notice that the image appears on the Form Builder.][6]\r\n\r\nThank you for accepting an unorthodox SSCCE and thank you in advance for your help.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/71xH4.jpg\r\n  [2]: http://i.stack.imgur.com/Qa8PJ.jpg\r\n  [3]: http://i.stack.imgur.com/2WA54.jpg\r\n  [4]: http://i.stack.imgur.com/GOfHx.jpg\r\n  [5]: http://i.stack.imgur.com/2wKka.jpg\r\n  [6]: http://i.stack.imgur.com/hRTj3.jpg","title":"Netbeans ImageIcon not displaying","body":"<p>I am using the NetBeans GUIBuilder to make a JPanel Form. I added a JLabel and used NetBeans' interface to give it an icon from an external image (.png). The path is verified and the image shows up on the GUIBuilder screen. It even shows up when I click the \"Preview Design\" button. It DOES NOT show up when I RUN the project. The rest of the GUI appears as it should. Do any of you know why this happening and/or how to fix it?</p>\n\n<p>A lot of you have been asking for an SSCCE. Since the code is generated by the NetBeans Form Builder, I have instead included the steps I took to make the JLabel. The areas of focus are circled in red.</p>\n\n<ol>\n<li><p>Drag and drop a JLabel into the Form Builder.\n<img src=\"https://i.stack.imgur.com/71xH4.jpg\" alt=\"Drag and drop a JLabel into the Form Builder.\"></p></li>\n<li><p>Open up the JLabel's properties menu. Enter the empty string (\"\") for the <code>text</code> field. Click the ellipsis next to <code>icon</code>.\n<img src=\"https://i.stack.imgur.com/Qa8PJ.jpg\" alt=\"Open up the JLabel&#39;s properties menu. Click the ellipsis next to icon.\"></p></li>\n<li><p>Select External Image and click the ellipsis. \n<img src=\"https://i.stack.imgur.com/2WA54.jpg\" alt=\"Select External Image and click the ellipsis.\"></p></li>\n<li><p>Select the image of choice. In my case it's a .png.\n<img src=\"https://i.stack.imgur.com/GOfHx.jpg\" alt=\"Select the image of choice.\"></p></li>\n<li><p>Notice that the image appears in the icon preview.\n<img src=\"https://i.stack.imgur.com/2wKka.jpg\" alt=\"Notice that the image appears in the icon preview.\"></p></li>\n<li><p>Close the icon menu and the properties menu, and notice that the image appears as the JLabel's icon on the Form Builder. \n<img src=\"https://i.stack.imgur.com/hRTj3.jpg\" alt=\"Close the icon menu and the properties menu, and notice that the image appears on the Form Builder.\"></p></li>\n</ol>\n\n<p>Thank you for accepting an unorthodox SSCCE and thank you in advance for your help.</p>\n"},{"tags":["java","android","c++","android-ndk"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1684363492,"post_id":76276288,"comment_id":134509497,"body_markdown":"JNIEnv * env = 0; \nJNIEnv ** envptr = &amp;env;   So you&#39;re making a null pointer, then a pointer to a null pointer?  That&#39;s not right, and I&#39;m shocked it didn&#39;t crash.","body":"JNIEnv * env = 0;  JNIEnv ** envptr = &amp;env;   So you&#39;re making a null pointer, then a pointer to a null pointer?  That&#39;s not right, and I&#39;m shocked it didn&#39;t crash."},{"owner":{"account_id":16512724,"reputation":67,"user_id":11931029,"display_name":"dan123123"},"score":0,"creation_date":1684365362,"post_id":76276288,"comment_id":134509715,"body_markdown":"doing that is fine (it is taking the address of the variable `env` which is not what is null...) where I am having difficulty is elsewhere in the code sample. Might you have insights into that? That code to get `env` is used elsewhere in the codebase and functions ok.","body":"doing that is fine (it is taking the address of the variable <code>env</code> which is not what is null...) where I am having difficulty is elsewhere in the code sample. Might you have insights into that? That code to get <code>env</code> is used elsewhere in the codebase and functions ok."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684365545,"post_id":76276288,"comment_id":134509738,"body_markdown":"Unrelated but assigning 0 to a pointer is a bad practice. Use `nullptr` if your compiler supports it or at least `NULL`.","body":"Unrelated but assigning 0 to a pointer is a bad practice. Use <code>nullptr</code> if your compiler supports it or at least <code>NULL</code>."},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1684368066,"post_id":76276288,"comment_id":134510019,"body_markdown":"Reminder:  Java has garbage collection.  There is no guarantee when or if the garbage collector runs.  This is usually bad for embedded systems.","body":"Reminder:  Java has garbage collection.  There is no guarantee when or if the garbage collector runs.  This is usually bad for embedded systems."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684380622,"post_id":76276288,"comment_id":134510941,"body_markdown":"You should check the result of every JNI operation. And why assign (*envptr) to env? Makes no sense","body":"You should check the result of every JNI operation. And why assign (*envptr) to env? Makes no sense"}],"owner":{"account_id":16512724,"reputation":67,"user_id":11931029,"display_name":"dan123123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684917936,"answer_count":0,"score":1,"last_activity_date":1684358592,"creation_date":1684358592,"question_id":76276288,"body_markdown":"I&#39;m working on an Android application that is currently written fully in C++, implemented as a Native Activity and using CMake to build the project.\r\n\r\nCurrently, I&#39;m looking at trying to call methods in a Java derived WebView class from C++, but am having difficulties with how to use build/use this class with the Native Activity.\r\n\r\nMy `build.gradle` is located in the root of the project, and all of the C++ code is in `src/`. Simply adding the Java file to the project, under `src/main/java/com/my/app/CustomWebView.java`.\r\n\r\nand calling:\r\n\r\n```c++\r\nJNIEnv * env = 0; \r\nJNIEnv ** envptr = &amp;env; \r\nJavaVM * jniiptr = gapp-&gt;activity-&gt;vm; \r\njniiptr-&gt;AttachCurrentThread( (JNIEnv**)&amp;env, 0 ); \r\nenv = (*envptr);\r\njclass customWebViewClass = env-&gt;FindClass(&quot;com/my/app/CustomWebView&quot;);\r\n```\r\n\r\nResults in `customWebViewClass` being null.\r\n\r\nI am unsure on what I need to do for this to be found correctly. I haven&#39;t yet modified any build or manifest files (such as `build.gradle` or `AndroidManifest.xml`), and was wondering if I needed to for this java class to be found correctly?\r\n","title":"Using Java classes from native activity android","body":"<p>I'm working on an Android application that is currently written fully in C++, implemented as a Native Activity and using CMake to build the project.</p>\n<p>Currently, I'm looking at trying to call methods in a Java derived WebView class from C++, but am having difficulties with how to use build/use this class with the Native Activity.</p>\n<p>My <code>build.gradle</code> is located in the root of the project, and all of the C++ code is in <code>src/</code>. Simply adding the Java file to the project, under <code>src/main/java/com/my/app/CustomWebView.java</code>.</p>\n<p>and calling:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>JNIEnv * env = 0; \nJNIEnv ** envptr = &amp;env; \nJavaVM * jniiptr = gapp-&gt;activity-&gt;vm; \njniiptr-&gt;AttachCurrentThread( (JNIEnv**)&amp;env, 0 ); \nenv = (*envptr);\njclass customWebViewClass = env-&gt;FindClass(&quot;com/my/app/CustomWebView&quot;);\n</code></pre>\n<p>Results in <code>customWebViewClass</code> being null.</p>\n<p>I am unsure on what I need to do for this to be found correctly. I haven't yet modified any build or manifest files (such as <code>build.gradle</code> or <code>AndroidManifest.xml</code>), and was wondering if I needed to for this java class to be found correctly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1684356723,"post_id":76276089,"comment_id":134508448,"body_markdown":"Why would it preserve the variable name?","body":"Why would it preserve the variable name?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":6,"creation_date":1684356734,"post_id":76276089,"comment_id":134508452,"body_markdown":"Variable names are lost during compilation, they are not needed for the bytecode and hence dropped. The decompiler you used just guessed some names for you.","body":"Variable names are lost during compilation, they are not needed for the bytecode and hence dropped. The decompiler you used just guessed some names for you."},{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":3,"creation_date":1684357038,"post_id":76276089,"comment_id":134508509,"body_markdown":"This question is related https://stackoverflow.com/questions/5746894/what-does-the-javac-debugging-information-option-gvars-do","body":"This question is related <a href=\"https://stackoverflow.com/questions/5746894/what-does-the-javac-debugging-information-option-gvars-do\" title=\"what does the javac debugging information option gvars do\">stackoverflow.com/questions/5746894/&hellip;</a>"},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1684359803,"post_id":76276089,"comment_id":134508999,"body_markdown":"@shmosel – Because the decompiled code would look nicer? Ok, I could not imagine any other reason …","body":"@shmosel – Because the decompiled code would look nicer? Ok, I could not imagine any other reason …"}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1684356778,"creation_date":1684356778,"answer_id":76276119,"question_id":76276089,"body_markdown":"At the JVM level, a class method is stored as a [`method_info`](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6) struct instance.\r\n\r\n&gt; ```\r\n&gt; method_info {\r\n&gt;     u2             access_flags;\r\n&gt;     u2             name_index;\r\n&gt;     u2             descriptor_index;\r\n&gt;     u2             attributes_count;\r\n&gt;     attribute_info attributes[attributes_count];\r\n&gt; }\r\n&gt; ```\r\n\r\n* `access_flags` stores modifiers like `public` and `final` as bitflags.\r\n* `name_index` stores the name of the method.\r\n* `descriptor_index` stores the [method descriptor](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3), which is its return type and all parameter types.\r\n* `attributes_count` and `attributes` are the runtime-available attributes such as `@Deprecated` that are declared on the method.\r\n\r\nThat&#39;s it. Everything else is gone. The `.class` file doesn&#39;t know the name of your function&#39;s parameter because that name stopped existing the moment it became a `.class` file. The decompiler is reconstructing your method, so it&#39;s using a placeholder name for variables that don&#39;t have names in the JVM instructions.","title":"Why variable in .class files appear as var?","body":"<p>At the JVM level, a class method is stored as a <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6\" rel=\"noreferrer\"><code>method_info</code></a> struct instance.</p>\n<blockquote>\n<pre><code>method_info {\n    u2             access_flags;\n    u2             name_index;\n    u2             descriptor_index;\n    u2             attributes_count;\n    attribute_info attributes[attributes_count];\n}\n</code></pre>\n</blockquote>\n<ul>\n<li><code>access_flags</code> stores modifiers like <code>public</code> and <code>final</code> as bitflags.</li>\n<li><code>name_index</code> stores the name of the method.</li>\n<li><code>descriptor_index</code> stores the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\" rel=\"noreferrer\">method descriptor</a>, which is its return type and all parameter types.</li>\n<li><code>attributes_count</code> and <code>attributes</code> are the runtime-available attributes such as <code>@Deprecated</code> that are declared on the method.</li>\n</ul>\n<p>That's it. Everything else is gone. The <code>.class</code> file doesn't know the name of your function's parameter because that name stopped existing the moment it became a <code>.class</code> file. The decompiler is reconstructing your method, so it's using a placeholder name for variables that don't have names in the JVM instructions.</p>\n"}],"owner":{"account_id":27368539,"reputation":21,"user_id":20874980,"display_name":"Artyom"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76276119,"answer_count":1,"score":0,"last_activity_date":1684358346,"creation_date":1684356418,"question_id":76276089,"body_markdown":"I was curious about .class files and the code inside and realised that variables in one of the classes that I compiled is named as ***var0*** which is very interesting.\r\n\r\nI am wondering if someone could explain why.\r\n\r\nJava Code (.java file):\r\n\r\n``` java\r\npublic class StackOverflowExample {\r\n    public static void main(String[] args) {\r\n        loop(50_000);\r\n        System.out.println(&quot;Success!&quot;);\r\n    }\r\n\r\n    public static void loop(int repeats) {\r\n        if (repeats &gt; 0) {\r\n            loop(repeats - 1);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDecompiled Code (.class file):\r\n\r\n``` java\r\npublic class StackOverflowExample {\r\n    public StackOverflowExample() {\r\n    }\r\n\r\n    public static void main(String[] var0) {\r\n        loop(50000);\r\n        System.out.println(&quot;Success!&quot;);\r\n    }\r\n\r\n    public static void loop(int var0) {\r\n        if (var0 &gt; 0) {\r\n            loop(var0 - 1);\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"Why variable in .class files appear as var?","body":"<p>I was curious about .class files and the code inside and realised that variables in one of the classes that I compiled is named as <em><strong>var0</strong></em> which is very interesting.</p>\n<p>I am wondering if someone could explain why.</p>\n<p>Java Code (.java file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public static void main(String[] args) {\n        loop(50_000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int repeats) {\n        if (repeats &gt; 0) {\n            loop(repeats - 1);\n        }\n    }\n}\n</code></pre>\n<p>Decompiled Code (.class file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public StackOverflowExample() {\n    }\n\n    public static void main(String[] var0) {\n        loop(50000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int var0) {\n        if (var0 &gt; 0) {\n            loop(var0 - 1);\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1565042976,"creation_date":1565040532,"answer_id":57366300,"question_id":57366190,"body_markdown":"In your `json` you are missing the `BTRFSPhysicalLocationItem` - just think about it - how Jackson should know what implementation do you expect?\r\n\r\nIt should look like \r\n \r\n    [\r\n        {\r\n            &quot;BTRFSPhysicalLocationItem&quot;: &quot;Subvolume&quot;,\r\n            &quot;name&quot;: &quot;WanderingEcho&quot;,\r\n            &quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;\r\n        }\r\n    ]\r\n\r\nif you want Jackson to include the type when serializing the object you also need to add `JsonTypeInfo.As.PROPERTY` as `include` as a parameter of `@JsonTypeInfo` annotation like\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;BTRFSPhysicalLocationItem&quot;)\r\n\r\n----\r\n\r\n**EDIT** ok seems that I figured this out - your problem with not generating properties is connected to Java type erasure and well described [here][1]. \r\n\r\ntldr; Jackson has problem with underestanding type - seems `List&lt;Subvolume&gt;` for him does not providing the type of elements. Because he doesn&#39;t know the type he won&#39;t serialize it \r\n\r\nThe solution is to create a helper class that will extends `ArrayList&lt;Subvolume&gt;` like\r\n\r\n    public class SubvolumeList extends ArrayList&lt;Subvolume&gt; {}\r\n\r\n----\r\n\r\nAdditionaly you have a few issues in your code - one is that you should use `use = JsonTypeInfo.Id.NAME` in `@JsonTypeInfo` if you want to deserialize by property value (like `Subvolume`) not by package/class string literal\r\n\r\nSecond is that you should name `@JsonProperty` on `@JsonCreator` parameter list like `@JsonProperty(value = &quot;location&quot;)`\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind/issues/336","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>In your <code>json</code> you are missing the <code>BTRFSPhysicalLocationItem</code> - just think about it - how Jackson should know what implementation do you expect?</p>\n\n<p>It should look like </p>\n\n<pre><code>[\n    {\n        \"BTRFSPhysicalLocationItem\": \"Subvolume\",\n        \"name\": \"WanderingEcho\",\n        \"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"\n    }\n]\n</code></pre>\n\n<p>if you want Jackson to include the type when serializing the object you also need to add <code>JsonTypeInfo.As.PROPERTY</code> as <code>include</code> as a parameter of <code>@JsonTypeInfo</code> annotation like</p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = \"BTRFSPhysicalLocationItem\")\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong> ok seems that I figured this out - your problem with not generating properties is connected to Java type erasure and well described <a href=\"https://github.com/FasterXML/jackson-databind/issues/336\" rel=\"noreferrer\">here</a>. </p>\n\n<p>tldr; Jackson has problem with underestanding type - seems <code>List&lt;Subvolume&gt;</code> for him does not providing the type of elements. Because he doesn't know the type he won't serialize it </p>\n\n<p>The solution is to create a helper class that will extends <code>ArrayList&lt;Subvolume&gt;</code> like</p>\n\n<pre><code>public class SubvolumeList extends ArrayList&lt;Subvolume&gt; {}\n</code></pre>\n\n<hr>\n\n<p>Additionaly you have a few issues in your code - one is that you should use <code>use = JsonTypeInfo.Id.NAME</code> in <code>@JsonTypeInfo</code> if you want to deserialize by property value (like <code>Subvolume</code>) not by package/class string literal</p>\n\n<p>Second is that you should name <code>@JsonProperty</code> on <code>@JsonCreator</code> parameter list like <code>@JsonProperty(value = \"location\")</code></p>\n"},{"tags":[],"owner":{"account_id":6896115,"reputation":413,"user_id":5298002,"display_name":"coder34"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684358238,"creation_date":1684358238,"answer_id":76276263,"question_id":57366190,"body_markdown":"When I stumbled on this post, I was having a similar problem. I had\r\n\r\n```\r\n@JsonTypeInfo(\r\n  use = Id.MINIMAL_CLASS,\r\n  property = &quot;@class&quot;\r\n)\r\npublic class MyClass {\r\n  public int myInt;\r\n}\r\n```\r\nand then\r\n```\r\npublic class MyIntWrapper {\r\n  public Optional&lt;MyInt&gt; maybeMyInt;\r\n}\r\n```\r\n\r\nI wanted to send `MyIntWrapper` over the wire. It was serializing the instances correctly into the JSON, but there was a deserialization issue. I was seeing\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.coder34.MyIntWrapper$Json]: missing type id property &#39;@class&#39; (for POJO property &#39;#temporary-name&#39;)\r\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.coder34.MyIntWrapper$Json[&quot;maybeMyInt&quot;]) \r\n```\r\n\r\nFollowing @m.antkowicz link about type erasure, I tried adding it to the field. So I removed the annotation from `MyClass` and added it to the field `maybeMyInt` -\r\n```\r\npublic class MyClass {\r\n  public int myInt;\r\n}\r\n```\r\n```\r\npublic class MyIntWrapper {\r\n  @JsonTypeInfo(\r\n    use = Id.MINIMAL_CLASS,\r\n    property = &quot;@class&quot;\r\n  )\r\n  public Optional&lt;MyInt&gt; maybeMyInt;\r\n}\r\n```\r\nand it worked.","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>When I stumbled on this post, I was having a similar problem. I had</p>\n<pre><code>@JsonTypeInfo(\n  use = Id.MINIMAL_CLASS,\n  property = &quot;@class&quot;\n)\npublic class MyClass {\n  public int myInt;\n}\n</code></pre>\n<p>and then</p>\n<pre><code>public class MyIntWrapper {\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>I wanted to send <code>MyIntWrapper</code> over the wire. It was serializing the instances correctly into the JSON, but there was a deserialization issue. I was seeing</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.coder34.MyIntWrapper$Json]: missing type id property '@class' (for POJO property '#temporary-name')\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.coder34.MyIntWrapper$Json[&quot;maybeMyInt&quot;]) \n</code></pre>\n<p>Following @m.antkowicz link about type erasure, I tried adding it to the field. So I removed the annotation from <code>MyClass</code> and added it to the field <code>maybeMyInt</code> -</p>\n<pre><code>public class MyClass {\n  public int myInt;\n}\n</code></pre>\n<pre><code>public class MyIntWrapper {\n  @JsonTypeInfo(\n    use = Id.MINIMAL_CLASS,\n    property = &quot;@class&quot;\n  )\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>and it worked.</p>\n"}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43359,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57366300,"answer_count":2,"score":4,"last_activity_date":1684358238,"creation_date":1565039795,"question_id":57366190,"body_markdown":"I have a concrete object of an abstract class that I&#39;ve made.\r\n\r\nI&#39;m using annotations on the abstract class and the daughter class, but the JSON output doesn&#39;t look right and I keep getting an exception on deserialiation.\r\n\r\nI&#39;m still learning Jackson, and unfortunatly a lot of the tutorials on the subject are outdated.\r\n\r\nHere are the classes with my object mapper at the bottom:\r\n\r\n**Abstract Class:**\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = &quot;BTRFSPhysicalLocationItem&quot;)\r\n    @JsonSubTypes({\r\n        @Type(name = &quot;Snapshot&quot;, value = Snapshot.class),\r\n        @Type(name = &quot;Backup&quot;, value = Backup.class),\r\n        @Type(name = &quot;Subvolume&quot;, value = Subvolume.class)})\r\n    public abstract class BTRFSPhysicalLocationItem {\r\n    \r\n        private final String name;\r\n        @JsonProperty\r\n        private final Path location;\r\n    \r\n        /**\r\n         * Makes a new subvolume instance with the specified location. May or may\r\n         * not actually exist.\r\n         *\r\n         * @param location The location of the subvolume\r\n         */\r\n        @JsonCreator\r\n        protected BTRFSPhysicalLocationItem(@JsonProperty(value = &quot;location&quot;) Path location) {\r\n            this.location = location;\r\n            this.name = location.getFileName().toString();\r\n        }\r\n\r\n\r\n\r\n**Concrete Class:**\r\n\r\n    public class Subvolume extends BTRFSPhysicalLocationItem {\r\n    \r\n        /**\r\n         * Creates a new subvolume with the specified path.The subvolume may or may\r\n         * not exist at this point.\r\n         *\r\n         * @param location\r\n         */\r\n        @JsonCreator\r\n        public Subvolume(@JsonProperty Path location) {\r\n            super(location);\r\n        }\r\n\r\n**Objectmapper block:**\r\n\r\n    ObjectMapper MAPPER = new ObjectMapper();\r\n    List&lt;Subvolume&gt; SUBVOLUME_LIST = new ArrayList&lt;&gt;();\r\n    //Subvolume is populated by other methods it&#39;s not worth showing them here\r\n    System.out.println(&quot;\\n\\n&quot;);\r\n                    MAPPER.writeValue(System.out, SUBVOLUME_LIST);\r\n                    System.out.println(&quot;\\n\\n\\n&quot;);\r\n                    var s = MAPPER.writeValueAsString(SUBVOLUME_LIST);\r\n                    List&lt;Subvolume&gt; list = MAPPER.readValue(s, new TypeReference&lt;List&lt;Subvolume&gt;&gt;() {\r\n                    });\r\n\r\n**Output JSON:** `[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;}]`\r\n\r\nException:\r\n\r\n    Aug 05, 2019 4:55:14 PM com.protonmail.sarahszabo.wanderingecho.btrfs.BTRFS &lt;clinit&gt;\r\n    SEVERE: null\r\n    com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class com.protonmail.sarahszabo.wanderingecho.btrfs.subvolume.Subvolume]: missing type id property &#39;BTRFSPhysicalLocationItem&#39;\r\n     at [Source: (String)&quot;[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;}]&quot;; line: 1, column: 89] (through reference chain: java.util.ArrayList[0])\r\n\r\nOther answers such as https://stackoverflow.com/questions/22609032/jackson-deserialization-of-polymorphic-types suggest using the `ObjectMapper` methods, but according to the tutorials I&#39;ve read, this shouldn&#39;t be necessary.\r\n\r\nNot sure what I&#39;m doing wrong with the annotations.","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>I have a concrete object of an abstract class that I've made.</p>\n\n<p>I'm using annotations on the abstract class and the daughter class, but the JSON output doesn't look right and I keep getting an exception on deserialiation.</p>\n\n<p>I'm still learning Jackson, and unfortunatly a lot of the tutorials on the subject are outdated.</p>\n\n<p>Here are the classes with my object mapper at the bottom:</p>\n\n<p><strong>Abstract Class:</strong></p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = \"BTRFSPhysicalLocationItem\")\n@JsonSubTypes({\n    @Type(name = \"Snapshot\", value = Snapshot.class),\n    @Type(name = \"Backup\", value = Backup.class),\n    @Type(name = \"Subvolume\", value = Subvolume.class)})\npublic abstract class BTRFSPhysicalLocationItem {\n\n    private final String name;\n    @JsonProperty\n    private final Path location;\n\n    /**\n     * Makes a new subvolume instance with the specified location. May or may\n     * not actually exist.\n     *\n     * @param location The location of the subvolume\n     */\n    @JsonCreator\n    protected BTRFSPhysicalLocationItem(@JsonProperty(value = \"location\") Path location) {\n        this.location = location;\n        this.name = location.getFileName().toString();\n    }\n</code></pre>\n\n<p><strong>Concrete Class:</strong></p>\n\n<pre><code>public class Subvolume extends BTRFSPhysicalLocationItem {\n\n    /**\n     * Creates a new subvolume with the specified path.The subvolume may or may\n     * not exist at this point.\n     *\n     * @param location\n     */\n    @JsonCreator\n    public Subvolume(@JsonProperty Path location) {\n        super(location);\n    }\n</code></pre>\n\n<p><strong>Objectmapper block:</strong></p>\n\n<pre><code>ObjectMapper MAPPER = new ObjectMapper();\nList&lt;Subvolume&gt; SUBVOLUME_LIST = new ArrayList&lt;&gt;();\n//Subvolume is populated by other methods it's not worth showing them here\nSystem.out.println(\"\\n\\n\");\n                MAPPER.writeValue(System.out, SUBVOLUME_LIST);\n                System.out.println(\"\\n\\n\\n\");\n                var s = MAPPER.writeValueAsString(SUBVOLUME_LIST);\n                List&lt;Subvolume&gt; list = MAPPER.readValue(s, new TypeReference&lt;List&lt;Subvolume&gt;&gt;() {\n                });\n</code></pre>\n\n<p><strong>Output JSON:</strong> <code>[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]</code></p>\n\n<p>Exception:</p>\n\n<pre><code>Aug 05, 2019 4:55:14 PM com.protonmail.sarahszabo.wanderingecho.btrfs.BTRFS &lt;clinit&gt;\nSEVERE: null\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class com.protonmail.sarahszabo.wanderingecho.btrfs.subvolume.Subvolume]: missing type id property 'BTRFSPhysicalLocationItem'\n at [Source: (String)\"[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]\"; line: 1, column: 89] (through reference chain: java.util.ArrayList[0])\n</code></pre>\n\n<p>Other answers such as <a href=\"https://stackoverflow.com/questions/22609032/jackson-deserialization-of-polymorphic-types\">Jackson deserialization of polymorphic types</a> suggest using the <code>ObjectMapper</code> methods, but according to the tutorials I've read, this shouldn't be necessary.</p>\n\n<p>Not sure what I'm doing wrong with the annotations.</p>\n"},{"tags":["java","eclipse","sts-springsourcetoolsuite","pivotal-tc"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684253868,"post_id":76264982,"comment_id":134490046,"body_markdown":"A workaround could be to clone the run configuration, remove the option and manually start it","body":"A workaround could be to clone the run configuration, remove the option and manually start it"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":0,"creation_date":1684344241,"post_id":76264982,"comment_id":134505981,"body_markdown":"@LMC, how do I &#39;manually&#39; start it?  If I edit the configuration (original or clone), and apply then click &#39;run&#39;, it immediately adds it back into the configuration as it starts up.","body":"@LMC, how do I &#39;manually&#39; start it?  If I edit the configuration (original or clone), and apply then click &#39;run&#39;, it immediately adds it back into the configuration as it starts up."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684352356,"post_id":76264982,"comment_id":134507662,"body_markdown":"Double check the option is not added by another mechanism: settings.gradle, [JAVA_TOOL_OPTIONS, _JAVA_OPTIONS](https://stackoverflow.com/a/40736904/2834978) env var","body":"Double check the option is not added by another mechanism: settings.gradle, <a href=\"https://stackoverflow.com/a/40736904/2834978\">JAVA_TOOL_OPTIONS, _JAVA_OPTIONS</a> env var"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":1,"creation_date":1684353783,"post_id":76264982,"comment_id":134507917,"body_markdown":"@LMC unfortunately, no.  In fact, I have found the code in the eclipse-integration-tcserver code base that checks for the param and if not found, adds it back in.  I have added an issue on that project.  Still hoping someone might know of some sort of workaround.","body":"@LMC unfortunately, no.  In fact, I have found the code in the eclipse-integration-tcserver code base that checks for the param and if not found, adds it back in.  I have added an issue on that project.  Still hoping someone might know of some sort of workaround."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684358405,"post_id":76264982,"comment_id":134508773,"body_markdown":"As a workaround, try adding `-XX:MaxMetaspaceSize=&lt;value&gt;`","body":"As a workaround, try adding <code>-XX:MaxMetaspaceSize=&lt;value&gt;</code>"}],"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684357460,"creation_date":1684252448,"question_id":76264982,"body_markdown":"I am running Spring Tool Suite 4 and have been using pivotal tc server for my local development server.  The pivotal tc server has been displaying a warning for a while that MaxPermSize is deprecated, which hasn&#39;t been a big issue since it is only a warning.\r\n\r\nHowever, I am not attempting to upgrade from Java 11 to Java 17, and now the server will not start up because of the error `Unrecognized VM option &#39;MaxPermSize=256m&#39;`.  Unfortunately, if I attempt to edit the server run configuration and remove the `-XX:MaxPermSize=256m` VM argument, it is automatically added back in.  I assume it is the **Pivotal tc Server Integration for Eclipse** that is adding the argument back in.\r\n\r\nDoes anyone know how to get it to not add the argument back in, since it is preventing the server from starting?\r\n\r\n - STS version: **4.13.0.RELEASE**\r\n - Pivotal tc Server Integration for\r\n   Eclipse version: **4.1.1.202008171738-RELEASE** \r\n - pivotal tc server version: **4.0.2.RELEASE**","title":"Can&#39;t remove MaxPermSize argument from pivotal tc server Eclipse run configuration","body":"<p>I am running Spring Tool Suite 4 and have been using pivotal tc server for my local development server.  The pivotal tc server has been displaying a warning for a while that MaxPermSize is deprecated, which hasn't been a big issue since it is only a warning.</p>\n<p>However, I am not attempting to upgrade from Java 11 to Java 17, and now the server will not start up because of the error <code>Unrecognized VM option 'MaxPermSize=256m'</code>.  Unfortunately, if I attempt to edit the server run configuration and remove the <code>-XX:MaxPermSize=256m</code> VM argument, it is automatically added back in.  I assume it is the <strong>Pivotal tc Server Integration for Eclipse</strong> that is adding the argument back in.</p>\n<p>Does anyone know how to get it to not add the argument back in, since it is preventing the server from starting?</p>\n<ul>\n<li>STS version: <strong>4.13.0.RELEASE</strong></li>\n<li>Pivotal tc Server Integration for\nEclipse version: <strong>4.1.1.202008171738-RELEASE</strong></li>\n<li>pivotal tc server version: <strong>4.0.2.RELEASE</strong></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","web-services","soap"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684305588,"post_id":76267932,"comment_id":134496984,"body_markdown":"`@XmlType` is Jaxb, so why wouldn&#39;t it be possible to us JAXB as you already have it.","body":"<code>@XmlType</code> is Jaxb, so why wouldn&#39;t it be possible to us JAXB as you already have it."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684333619,"post_id":76267932,"comment_id":134503360,"body_markdown":"I&#39;m getting javax.xml.bind.MarshalException\n - with linked exception:\n[com.sun.istack.SAXException2: unable to marshal type &quot;com.test.cxfws.PersonActivityList&quot; as an element because it is missing an @XmlRootElement annotation].","body":"I&#39;m getting javax.xml.bind.MarshalException  - with linked exception: [com.sun.istack.SAXException2: unable to marshal type &quot;com.test.cxfws.PersonActivityList&quot; as an element because it is missing an @XmlRootElement annotation]."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684333946,"post_id":76267932,"comment_id":134503463,"body_markdown":"You get this because there is no `@XmlRootElement` on your xml classes. If you used the proper plugins there will be an `ObjectFactory` which you can use to wrap your element into a `JaxbElement` (there is some `create*` method for that) you can use this to send your object. The same probably applies for the unmarshalling again.","body":"You get this because there is no <code>@XmlRootElement</code> on your xml classes. If you used the proper plugins there will be an <code>ObjectFactory</code> which you can use to wrap your element into a <code>JaxbElement</code> (there is some <code>create*</code> method for that) you can use this to send your object. The same probably applies for the unmarshalling again."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684334710,"post_id":76267932,"comment_id":134503683,"body_markdown":"May I know the plugin and some sample code on it?","body":"May I know the plugin and some sample code on it?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345510,"post_id":76267932,"comment_id":134506253,"body_markdown":"You state you already generated the code, so why would you need an additional plugin? All the needed classes are already in the generated code.","body":"You state you already generated the code, so why would you need an additional plugin? All the needed classes are already in the generated code."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684351605,"post_id":76267932,"comment_id":134507518,"body_markdown":"I have below methods but I&#39;m confused how to use these to wrap the element before sending to SOAP service. public PersonActivityList createPersonActivityList() {return new PersonActivityList();}\n    @XmlElementDecl(\n        namespace = &quot;http://cxfws.jee.test.com/&quot;,\n        name = “personActivityList&quot;\n    )\n    public JAXBElement&lt;PersonActivityList&gt; createPersonActivityList(PersonActivityList var1) {\n        return new JAXBElement(_PersonActivityList_QNAME, PersonActivityList.class, (Class)null, var1);\n    }","body":"I have below methods but I&#39;m confused how to use these to wrap the element before sending to SOAP service. public PersonActivityList createPersonActivityList() {return new PersonActivityList();}     @XmlElementDecl(         namespace = &quot;<a href=\"http://cxfws.jee.test.com/\" rel=\"nofollow noreferrer\">cxfws.jee.test.com</a>&quot;,         name = “personActivityList&quot;     )     public JAXBElement&lt;PersonActivityList&gt; createPersonActivityList(PersonActivityList var1) {         return new JAXBElement(_PersonActivityList_QNAME, PersonActivityList.class, (Class)null, var1);     }"},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684356298,"post_id":76267932,"comment_id":134508385,"body_markdown":"I resolved using below code. \npublic class PublicActivity{\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n    \n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n  \nJAXBElement&lt; PersonActivityList &gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\nJAXBElement&lt;PersonActivityListResponse&gt; response =\n        (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\nreturn response.getValue();\n\n\n    }\n}","body":"I resolved using below code.  public class PublicActivity{     @Autowired     private WebServiceTemplate PersonWebServiceTemplate;          public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {    JAXBElement&lt; PersonActivityList &gt; jaxbElement = new ObjectFactory().createPersonActivityList(request); JAXBElement&lt;PersonActivityListResponse&gt; response =         (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement); return response.getValue();       } }"}],"answers":[{"tags":[],"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684356475,"creation_date":1684356475,"answer_id":76276093,"question_id":76267932,"body_markdown":"I used below code and it worked.\r\n\r\n    @Service\r\n    public class PublicActivity {\r\n        @Autowired\r\n        private WebServiceTemplate PersonWebServiceTemplate;\r\n    \r\n        public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\r\n    \r\n            JAXBElement&lt;PersonActivityList&gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\r\n            JAXBElement&lt;PersonActivityListResponse&gt; response =\r\n                    (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\r\n            return response.getValue();\r\n    \r\n    \r\n        }\r\n    }","title":"How to call SOAP service from Spring Boot without marshalling and unmarshalling using JAXB?","body":"<p>I used below code and it worked.</p>\n<pre><code>@Service\npublic class PublicActivity {\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n\n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n\n        JAXBElement&lt;PersonActivityList&gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\n        JAXBElement&lt;PersonActivityListResponse&gt; response =\n                (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\n        return response.getValue();\n\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76276093,"answer_count":1,"score":0,"last_activity_date":1684356475,"creation_date":1684285007,"question_id":76267932,"body_markdown":"I have a .jar package that I have generated from WSDL of the SOAP service war package. SOAP service doesn&#39;t have an equivalent JAXB-compatible package to use JAXB for marshalling and unmarshalling with WebServiceTemplate.\r\n\r\nI am using the following code to call SOAP service with an equivalent JAXB package but right now I don&#39;t have JAXB equivalent SOAP service package to call in the SOAP client application then how to call SOAP service?\r\n\r\nPersonActivityList.class\r\n\r\n    package com.test.jee.cxfws;\r\n    \r\n    @XmlAccessorType(XmlAccessorType.Field)\r\n    @XmlType(name = &quot;personActivityList&quot;, proOrder = {&quot;request&quot;})\r\n    \r\n    public class PersonActivityList{\r\n    \tprotected PersonActionRequest request;\r\n    \t\r\n    \tpublic PersonActivityList(){}\r\n    \t\r\n    \tpublic PersonActionRequest getRequest() {return this.request;}\r\n    \t\r\n    \tpublic void setRequest(PersonActionRequest var1) {this.request = var1;}\r\n    }\r\n\r\n\r\napp.yml\r\n\r\n    personactivity:\r\n    uri: https:test.com/personactivity/V4\r\n    schema-path: &quot;com.test.jee.cxfws&quot;\r\n    wsdlVersion: 4.0\r\n    appId: pdv\r\n\r\n\r\nPersonConfig.java\r\n\r\n    @Configuration\r\n    public class PersonConfig {\r\n    \r\n        @Value(&quot;${personactivity.uri}&quot;)\r\n        String defaultUri;\r\n    \r\n        @Value(&quot;${personactivity.schema-path}&quot;)\r\n        String schemaPath;\r\n    \r\n    \t// specifically the HTTP message sending functionality\r\n    \t// sets up the HTTP client with appropriate connection settings, including timeouts and SSL/TLS configuration\r\n        @Autowired\r\n        TestConfig testConfig;\r\n    \r\n    \t// is an implementation of a client interceptor\r\n    \t// this interceptor is responsible for adding custom headers to the outgoing requests in a web service client based on the values provided in the appId and userId properties.\r\n        @Autowired\r\n        TESTHeaderInterceptor headerInterceptor;\r\n    \r\n    \tJaxb2Marshaller getJaxb2Marshaller() {\r\n            Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\r\n            jaxb2Marshaller.setContextPath(schemaPath);\r\n            return jaxb2Marshaller;\r\n        }\r\n        \r\n        @Bean (&quot;PersonWebServiceTemplate&quot;)\r\n        public WebServiceTemplate updateWebServiceTemplate() throws Exception {\r\n            SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(MessageFactory.newInstance());\r\n            messageFactory.afterPropertiesSet();\r\n            WebServiceTemplate updateWebServiceTemplate = new WebServiceTemplate(messageFactory);\r\n    \t\t updateWebServiceTemplate.setMarshaller(getJaxb2Marshaller());\r\n            updateWebServiceTemplate.setUnmarshaller(getJaxb2Marshaller());\r\n            updateWebServiceTemplate.setDefaultUri(defaultUri);\r\n            updateWebServiceTemplate.setMessageSender(testConfig.createMessageSender());\r\n            updateWebServiceTemplate.afterPropertiesSet();\r\n            updateWebServiceTemplate.setInterceptors(new ClientInterceptor[]{headerInterceptor});\r\n            return updateWebServiceTemplate;\r\n        }\r\n    \r\n        public String getDefaultUri() {\r\n            return defaultUri;\r\n        }\r\n    }\r\n\r\nPersonActivity.java\r\n\r\n    @Service\r\n    public class PublicActivity{\r\n    \t@Autowired\r\n    \tprivate WebServiceTemplate PersonWebServiceTemplate;\r\n    \t\r\n    \tpublic PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\r\n    \t        PersonActivityListResponse response = (PersonActivityListResponse) PersonWebServiceTemplate.marshalSendAndReceive(request);\r\n    \t\t\treturn response;\r\n    \r\n    \t}\r\n    }\r\n\r\nHow to write the equivalent code to call SOAP service without using JAXB?\r\n\r\n\r\n","title":"How to call SOAP service from Spring Boot without marshalling and unmarshalling using JAXB?","body":"<p>I have a .jar package that I have generated from WSDL of the SOAP service war package. SOAP service doesn't have an equivalent JAXB-compatible package to use JAXB for marshalling and unmarshalling with WebServiceTemplate.</p>\n<p>I am using the following code to call SOAP service with an equivalent JAXB package but right now I don't have JAXB equivalent SOAP service package to call in the SOAP client application then how to call SOAP service?</p>\n<p>PersonActivityList.class</p>\n<pre><code>package com.test.jee.cxfws;\n\n@XmlAccessorType(XmlAccessorType.Field)\n@XmlType(name = &quot;personActivityList&quot;, proOrder = {&quot;request&quot;})\n\npublic class PersonActivityList{\n    protected PersonActionRequest request;\n    \n    public PersonActivityList(){}\n    \n    public PersonActionRequest getRequest() {return this.request;}\n    \n    public void setRequest(PersonActionRequest var1) {this.request = var1;}\n}\n</code></pre>\n<p>app.yml</p>\n<pre><code>personactivity:\nuri: https:test.com/personactivity/V4\nschema-path: &quot;com.test.jee.cxfws&quot;\nwsdlVersion: 4.0\nappId: pdv\n</code></pre>\n<p>PersonConfig.java</p>\n<pre><code>@Configuration\npublic class PersonConfig {\n\n    @Value(&quot;${personactivity.uri}&quot;)\n    String defaultUri;\n\n    @Value(&quot;${personactivity.schema-path}&quot;)\n    String schemaPath;\n\n    // specifically the HTTP message sending functionality\n    // sets up the HTTP client with appropriate connection settings, including timeouts and SSL/TLS configuration\n    @Autowired\n    TestConfig testConfig;\n\n    // is an implementation of a client interceptor\n    // this interceptor is responsible for adding custom headers to the outgoing requests in a web service client based on the values provided in the appId and userId properties.\n    @Autowired\n    TESTHeaderInterceptor headerInterceptor;\n\n    Jaxb2Marshaller getJaxb2Marshaller() {\n        Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\n        jaxb2Marshaller.setContextPath(schemaPath);\n        return jaxb2Marshaller;\n    }\n    \n    @Bean (&quot;PersonWebServiceTemplate&quot;)\n    public WebServiceTemplate updateWebServiceTemplate() throws Exception {\n        SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(MessageFactory.newInstance());\n        messageFactory.afterPropertiesSet();\n        WebServiceTemplate updateWebServiceTemplate = new WebServiceTemplate(messageFactory);\n         updateWebServiceTemplate.setMarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setUnmarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setDefaultUri(defaultUri);\n        updateWebServiceTemplate.setMessageSender(testConfig.createMessageSender());\n        updateWebServiceTemplate.afterPropertiesSet();\n        updateWebServiceTemplate.setInterceptors(new ClientInterceptor[]{headerInterceptor});\n        return updateWebServiceTemplate;\n    }\n\n    public String getDefaultUri() {\n        return defaultUri;\n    }\n}\n</code></pre>\n<p>PersonActivity.java</p>\n<pre><code>@Service\npublic class PublicActivity{\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n    \n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n            PersonActivityListResponse response = (PersonActivityListResponse) PersonWebServiceTemplate.marshalSendAndReceive(request);\n            return response;\n\n    }\n}\n</code></pre>\n<p>How to write the equivalent code to call SOAP service without using JAXB?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684365376,"post_id":76273311,"comment_id":134509719,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684356152,"creation_date":1684356152,"answer_id":76276059,"question_id":76273311,"body_markdown":"I don&#39;t think any serious application will hard code an user name and a password in their `application.properties` configuration file without providing a way to provide your own. And they should clearly document how to do this.\r\n\r\nWhat you can do is to unzip their jar and have a look at `application.properties` file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from `application.properties` might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc\r\n\r\nUltimately you should come in touch with the third party provider and ask for support.\r\n\r\nHope some of the above ideas will help.   ","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I don't think any serious application will hard code an user name and a password in their <code>application.properties</code> configuration file without providing a way to provide your own. And they should clearly document how to do this.</p>\n<p>What you can do is to unzip their jar and have a look at <code>application.properties</code> file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from <code>application.properties</code> might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc</p>\n<p>Ultimately you should come in touch with the third party provider and ask for support.</p>\n<p>Hope some of the above ideas will help.</p>\n"}],"owner":{"account_id":28621116,"reputation":1,"user_id":21914149,"display_name":"codestuck"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684356152,"creation_date":1684334324,"question_id":76273311,"body_markdown":"I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.\r\n\r\nI tried using the jar as a dependency but since it is an executable jar, it doesn&#39;t work.","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.</p>\n<p>I tried using the jar as a dependency but since it is an executable jar, it doesn't work.</p>\n"},{"tags":["java","exception","try-catch"],"comments":[{"owner":{"account_id":1432485,"reputation":10153,"user_id":1354590,"accept_rate":100,"display_name":"kuporific"},"score":5,"creation_date":1430687533,"post_id":30019453,"comment_id":48156238,"body_markdown":"Why not put it in the `try` block below the exception throwing call?","body":"Why not put it in the <code>try</code> block below the exception throwing call?"}],"answers":[{"tags":[],"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1430688265,"creation_date":1430687622,"answer_id":30019480,"question_id":30019453,"body_markdown":"    try {\r\n        doSomething();\r\n        doSomething2();\r\n    } catch (Exception e) {\r\n        doSomething3();\r\n    }\r\n\r\n\r\nIn this example, `doSomething2()` will only be executed if no exception is thrown by `doSomething()`.\r\n\r\nIf an exception is thrown by `doSomething()`, `doSomething2();` will be skipped and execution will jump to `doSomething3();`\r\n\r\nAlso note, `doSomething3()` will be executed if there is an exception thrown by `doSomething2();`\r\n\r\nIf no exception is thrown, `doSomething3();` will not be executed.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<pre><code>try {\n    doSomething();\n    doSomething2();\n} catch (Exception e) {\n    doSomething3();\n}\n</code></pre>\n\n<p>In this example, <code>doSomething2()</code> will only be executed if no exception is thrown by <code>doSomething()</code>.</p>\n\n<p>If an exception is thrown by <code>doSomething()</code>, <code>doSomething2();</code> will be skipped and execution will jump to <code>doSomething3();</code></p>\n\n<p>Also note, <code>doSomething3()</code> will be executed if there is an exception thrown by <code>doSomething2();</code></p>\n\n<p>If no exception is thrown, <code>doSomething3();</code> will not be executed.</p>\n"},{"tags":[],"owner":{"account_id":338170,"reputation":3057,"user_id":666884,"display_name":"pathfinderelite"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522409605,"creation_date":1430687679,"answer_id":30019496,"question_id":30019453,"body_markdown":"Just put the code in the `try` block.  If an exception is thrown, it will skip to the `catch` block.  If no exception is thrown, the code will just run.\r\n\r\n    try {\r\n        someMethodThatMayThrowException();\r\n        codeThatShouldBeRunIfNoExceptionThrown();\r\n    } catch (Exception e) {...}","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Just put the code in the <code>try</code> block.  If an exception is thrown, it will skip to the <code>catch</code> block.  If no exception is thrown, the code will just run.</p>\n\n<pre><code>try {\n    someMethodThatMayThrowException();\n    codeThatShouldBeRunIfNoExceptionThrown();\n} catch (Exception e) {...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1556313,"reputation":13459,"user_id":1447296,"accept_rate":100,"display_name":"adjan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430688187,"creation_date":1430687707,"answer_id":30019503,"question_id":30019453,"body_markdown":"Exceptions for flow control is kind of a bad practice. If you insist, use a `boolean` variable.\r\n\r\n\r\n    boolean thrown = false;\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {\r\n       thrown = true;\r\n    }\r\n\r\n    //do something only if nothing was thrown\r\n\r\n    if (!thrown) { \r\n        // do stuff\r\n    }","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Exceptions for flow control is kind of a bad practice. If you insist, use a <code>boolean</code> variable.</p>\n\n<pre><code>boolean thrown = false;\n\ntry {\n   //do something\n} catch (Exception e) {\n   thrown = true;\n}\n\n//do something only if nothing was thrown\n\nif (!thrown) { \n    // do stuff\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":1,"up_vote_count":64,"is_accepted":true,"score":63,"last_activity_date":1522329988,"creation_date":1430687724,"answer_id":30019506,"question_id":30019453,"body_markdown":"Here are two ways:\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nOr if you want your second block of code to be outside the `try` block:\r\n    \r\n    boolean success = false;\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        success = true;\r\n    } catch (...) {\r\n        ...\r\n    }\r\n    if (success) {\r\n        somethingElseAfterwards();\r\n    }\r\n\r\nYou could also put the `if` statement in a `finally` block, but there is not enough information in your question to tell if that would be preferable or not.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Here are two ways:</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>Or if you want your second block of code to be outside the <code>try</code> block:</p>\n\n<pre><code>boolean success = false;\ntry {\n    somethingThatMayThrowAnException();\n    success = true;\n} catch (...) {\n    ...\n}\nif (success) {\n    somethingElseAfterwards();\n}\n</code></pre>\n\n<p>You could also put the <code>if</code> statement in a <code>finally</code> block, but there is not enough information in your question to tell if that would be preferable or not.</p>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522330289,"creation_date":1522330289,"answer_id":49557427,"question_id":30019453,"body_markdown":"An enhancement to the proposed\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nfrom the accepted answer. What you should do is:\r\n\r\n    void foo() {\r\n      try {\r\n        doStuff();\r\n      } catch (...) {\r\n        handleException();\r\n      }\r\n    }\r\n\r\nThe above feels like overkill to someone who hasn&#39;t been exposed to &quot;clean code thinking&quot;. \r\n\r\nBut the point here: you do **not** want to mix different abstractions within one method. In other words: you don&#39;t have one try block, and more code following behind that within the same method. \r\n\r\nYou make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading *such* kind of code you will find that it takes you dramatically less time to understand your code. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>An enhancement to the proposed</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>from the accepted answer. What you should do is:</p>\n\n<pre><code>void foo() {\n  try {\n    doStuff();\n  } catch (...) {\n    handleException();\n  }\n}\n</code></pre>\n\n<p>The above feels like overkill to someone who hasn't been exposed to \"clean code thinking\". </p>\n\n<p>But the point here: you do <strong>not</strong> want to mix different abstractions within one method. In other words: you don't have one try block, and more code following behind that within the same method. </p>\n\n<p>You make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading <em>such</em> kind of code you will find that it takes you dramatically less time to understand your code. </p>\n"},{"tags":[],"owner":{"account_id":5418293,"reputation":26,"user_id":4312815,"display_name":"Mobus Dorphin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592020302,"creation_date":1592020302,"answer_id":62355310,"question_id":30019453,"body_markdown":"I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  \r\n\r\nI wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don&#39;t want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  \r\n\r\nIt seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you&#39;re in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  </p>\n\n<p>I wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don't want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  </p>\n\n<p>It seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you're in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. </p>\n"},{"tags":[],"owner":{"account_id":17017620,"reputation":185,"user_id":12311071,"display_name":"Harry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684355950,"creation_date":1684355950,"answer_id":76276034,"question_id":30019453,"body_markdown":"In my opinion the cleanest way to solve this, if you don&#39;t need the function to anything extra if an exception was raised, is return.\r\n```java\r\ntry  {\r\n    doSomthing();\r\n}\r\ncatch (Exception e) {\r\n    handleException();\r\n    return;\r\n}\r\n\r\nonlyIfSuccess();\r\n```","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>In my opinion the cleanest way to solve this, if you don't need the function to anything extra if an exception was raised, is return.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try  {\n    doSomthing();\n}\ncatch (Exception e) {\n    handleException();\n    return;\n}\n\nonlyIfSuccess();\n</code></pre>\n"}],"owner":{"account_id":1388354,"reputation":17373,"user_id":1319799,"accept_rate":46,"display_name":"Muhammad Umer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61866,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":30019506,"answer_count":7,"score":36,"last_activity_date":1684355950,"creation_date":1430687444,"question_id":30019453,"body_markdown":"How do I make it so the code runs only if there was no exception thrown?\r\n\r\nWith finally code runs whether there was an exception or not.\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {}\r\n    //do something only if nothing was thrown\r\n","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>How do I make it so the code runs only if there was no exception thrown?</p>\n\n<p>With finally code runs whether there was an exception or not.</p>\n\n<pre><code>try {\n   //do something\n} catch (Exception e) {}\n//do something only if nothing was thrown\n</code></pre>\n"},{"tags":["java","project-reactor","nonblocking","reactive-streams"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348416,"post_id":76275150,"comment_id":134506849,"body_markdown":"Don&#39;t use `sleep`, that will halt the reactor thread. If you want to pause use `delayElement`.","body":"Don&#39;t use <code>sleep</code>, that will halt the reactor thread. If you want to pause use <code>delayElement</code>."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1684349678,"post_id":76275150,"comment_id":134507084,"body_markdown":"use `Mono.fromCallable(this::getString)`","body":"use <code>Mono.fromCallable(this::getString)</code>"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":2,"creation_date":1684350360,"post_id":76275150,"comment_id":134507240,"body_markdown":"You block it _before_ the Mono even started, when you call `getString` to pass the resulting into the Mono. Just call it from the inside of a Mono, like `fromCallable`","body":"You block it <i>before</i> the Mono even started, when you call <code>getString</code> to pass the resulting into the Mono. Just call it from the inside of a Mono, like <code>fromCallable</code>"},{"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"score":0,"creation_date":1684357519,"post_id":76275150,"comment_id":134508608,"body_markdown":"Thank you all for the answer!\nI have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?","body":"Thank you all for the answer! I have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":1,"creation_date":1684358809,"post_id":76275150,"comment_id":134508846,"body_markdown":"Flux is a version of a Publisher with multiple elements, while a `Callable` result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do `Flux.from(Mono.fromCallable {})`","body":"Flux is a version of a Publisher with multiple elements, while a <code>Callable</code> result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do <code>Flux.from(Mono.fromCallable {})</code>"}],"answers":[{"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684355553,"creation_date":1684355553,"answer_id":76275996,"question_id":76275150,"body_markdown":"First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the `Mono` or `Flux`, the thread is still will be blocked. \r\n\r\nAs for your second example, with sleep in the `getString` method. There are two points to pay attention at:\r\n\r\n**The first one**: you use `Mono.just`. The important thing is that it is usually used to provide a known value immediately. It means that the `getString` calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That&#39;s why you see &quot;sequential&quot; behavior. If you replace it with `Mono.fromCallable`, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples. \r\n\r\n**The second one**: It&#39;s important to note, that wrapping your `getString` method to the `Mono.fromCallable` does not make your code non-blocking. Your `sleep` still halts the threads of the parallel scheduler. In your production code, your `getString` method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use `delayElement` instead of `sleep`, it works in a non-blocking way. Here is an example:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    for (int i = 0; i &lt; 3; i++) {\r\n        getString()\r\n            .map(s -&gt; {\r\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                return s.length();\r\n            })\r\n            .subscribeOn(Schedulers.parallel())\r\n            .subscribe();\r\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n    }\r\n\r\n    TimeUnit.SECONDS.sleep(10);\r\n}\r\n\r\npublic static Mono&lt;String&gt; getString() {\r\n    return Mono.delay(Duration.ofSeconds(3))\r\n        .map(it -&gt; &quot;hello world&quot;);\r\n}\r\n```\r\n\r\nIt prints\r\n```java\r\n2023-05-17T20:31:12.099464Z Loop: 0 after MONO\r\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\r\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\r\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\r\n```\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the <code>Mono</code> or <code>Flux</code>, the thread is still will be blocked.</p>\n<p>As for your second example, with sleep in the <code>getString</code> method. There are two points to pay attention at:</p>\n<p><strong>The first one</strong>: you use <code>Mono.just</code>. The important thing is that it is usually used to provide a known value immediately. It means that the <code>getString</code> calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That's why you see &quot;sequential&quot; behavior. If you replace it with <code>Mono.fromCallable</code>, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples.</p>\n<p><strong>The second one</strong>: It's important to note, that wrapping your <code>getString</code> method to the <code>Mono.fromCallable</code> does not make your code non-blocking. Your <code>sleep</code> still halts the threads of the parallel scheduler. In your production code, your <code>getString</code> method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use <code>delayElement</code> instead of <code>sleep</code>, it works in a non-blocking way. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 3; i++) {\n        getString()\n            .map(s -&gt; {\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                return s.length();\n            })\n            .subscribeOn(Schedulers.parallel())\n            .subscribe();\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n    }\n\n    TimeUnit.SECONDS.sleep(10);\n}\n\npublic static Mono&lt;String&gt; getString() {\n    return Mono.delay(Duration.ofSeconds(3))\n        .map(it -&gt; &quot;hello world&quot;);\n}\n</code></pre>\n<p>It prints</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-05-17T20:31:12.099464Z Loop: 0 after MONO\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\n</code></pre>\n"}],"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684355553,"creation_date":1684347806,"question_id":76275150,"body_markdown":"I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.\r\n\r\nIn my first test, I emitted a String directly, but made it blocking in map().\r\n```\r\n    @Test\r\n    public void testMono() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(&quot;Hello World&quot;)\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n```\r\n\r\nAnd the result is expected as non-blocking, since all the outputs `System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);` show up together at the same time.\r\n\r\nHowever, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I&#39;d like to simulate the scenario that it&#39;s taking time to get the emitted element. \r\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.  \r\n```\r\n    @Test\r\n    public void testMono2() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(getString())\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n\r\n    public String getString(){\r\n        try {\r\n            sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return &quot;Hello world&quot;;\r\n    }\r\n```\r\n\r\nAnd in the third test, it&#39;s also acting as non-blocking.\r\n```\r\n    int count = 0;\r\n\r\n    @Test\r\n    public void testFluxSink() throws InterruptedException {\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            System.out.println(&quot;Start Loop: &quot; + i);\r\n            int curLoop = count++;\r\n            Flux.create(fluxSink -&gt; {\r\n                try {\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\r\n                    sleep(5000);\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\r\n                    fluxSink.next(onNext());\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\r\n                System.out.println(Thread.currentThread());\r\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\r\n            });\r\n        }\r\n        sleep(100000);\r\n    }\r\n\r\n    public String onNext() throws InterruptedException {\r\n        sleep(5000);\r\n        return &quot;onNext&quot;;\r\n    }\r\n```\r\n\r\n\r\nWondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.</p>\n<p>In my first test, I emitted a String directly, but made it blocking in map().</p>\n<pre><code>    @Test\n    public void testMono() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(&quot;Hello World&quot;)\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n</code></pre>\n<p>And the result is expected as non-blocking, since all the outputs <code>System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);</code> show up together at the same time.</p>\n<p>However, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I'd like to simulate the scenario that it's taking time to get the emitted element.\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.</p>\n<pre><code>    @Test\n    public void testMono2() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(getString())\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n\n    public String getString(){\n        try {\n            sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return &quot;Hello world&quot;;\n    }\n</code></pre>\n<p>And in the third test, it's also acting as non-blocking.</p>\n<pre><code>    int count = 0;\n\n    @Test\n    public void testFluxSink() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Start Loop: &quot; + i);\n            int curLoop = count++;\n            Flux.create(fluxSink -&gt; {\n                try {\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\n                    sleep(5000);\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\n                    fluxSink.next(onNext());\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\n                System.out.println(Thread.currentThread());\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\n            });\n        }\n        sleep(100000);\n    }\n\n    public String onNext() throws InterruptedException {\n        sleep(5000);\n        return &quot;onNext&quot;;\n    }\n</code></pre>\n<p>Wondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832232,"post_id":21383139,"comment_id":32248997,"body_markdown":"Which java version are you using?","body":"Which java version are you using?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1390832252,"post_id":21383139,"comment_id":32249016,"body_markdown":"@Mason It must be Java 7+ because of the `&lt;&gt;`.","body":"@Mason It must be Java 7+ because of the <code>&lt;&gt;</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1390832288,"post_id":21383139,"comment_id":32249042,"body_markdown":"possible duplicate of [java generic and wild card](http://stackoverflow.com/questions/7344330/java-generic-and-wild-card)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7344330/java-generic-and-wild-card\">java generic and wild card</a>"},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832384,"post_id":21383139,"comment_id":32249119,"body_markdown":"@Radiodef Never know could have had an error with his initialization of the List.","body":"@Radiodef Never know could have had an error with his initialization of the List."},{"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"score":0,"creation_date":1390832418,"post_id":21383139,"comment_id":32249139,"body_markdown":"Just make it `List&lt;Number&gt;` instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error.","body":"Just make it <code>List&lt;Number&gt;</code> instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1390832469,"post_id":21383139,"comment_id":32249172,"body_markdown":"@Mason That said, I am actually not sure why this would compile because `&lt;&gt;` implies type inference. You cannot do `new ArrayList&lt;? extends Number&gt;` so I don&#39;t know why the `&lt;&gt;` would be allowed. I am not sure what Java 7 would infer in that case.","body":"@Mason That said, I am actually not sure why this would compile because <code>&lt;&gt;</code> implies type inference. You cannot do <code>new ArrayList&lt;? extends Number&gt;</code> so I don&#39;t know why the <code>&lt;&gt;</code> would be allowed. I am not sure what Java 7 would infer in that case."},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832549,"post_id":21383139,"comment_id":32249238,"body_markdown":"@Radiodef good point, I need to test.","body":"@Radiodef good point, I need to test."}],"answers":[{"tags":[],"owner":{"account_id":1559142,"reputation":4127,"user_id":3084258,"accept_rate":100,"display_name":"Filipp Voronov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390832266,"creation_date":1390832266,"answer_id":21383175,"question_id":21383139,"body_markdown":"Because `List&lt;? extends Number&gt;` means that your variable `l` holds a value of type `List` with **concrete** (but unknown!) type argument that extends `Number`.\r\n\r\nYou can add only `null`, because `l` can hold a `List&lt;MyClass&gt;` for example, where `MyClass` is your class that extends `Number`, but nor `Integer`, nor `Double` value can be casted to `MyClass`.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Because <code>List&lt;? extends Number&gt;</code> means that your variable <code>l</code> holds a value of type <code>List</code> with <strong>concrete</strong> (but unknown!) type argument that extends <code>Number</code>.</p>\n\n<p>You can add only <code>null</code>, because <code>l</code> can hold a <code>List&lt;MyClass&gt;</code> for example, where <code>MyClass</code> is your class that extends <code>Number</code>, but nor <code>Integer</code>, nor <code>Double</code> value can be casted to <code>MyClass</code>.</p>\n"},{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1539674773,"creation_date":1390832562,"answer_id":21383293,"question_id":21383139,"body_markdown":"`List&lt;? extends Number&gt;` does not mean &quot;a list that can hold all objects of subclasses of `Number`&quot;, it means &quot;a list parameterized to one concrete class that extends `Number`&quot;. It&#39;s not the contents of the list itself you are defining, it&#39;s what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )\r\n\r\nSo, you can do:\r\n\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\r\n\r\nIf you want a list that is able to hold any object of class Number or its subclasses, just do this:\r\n\r\n    List&lt;Number&gt; l = new ArrayList&lt;&gt;();\r\n\r\n    l.add(new Integer(33));\r\n    l.add(new Double(33.3d));\r\n\r\n(The boxing of the values inserted is unnecessary, but there for clarity..)","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p><code>List&lt;? extends Number&gt;</code> does not mean \"a list that can hold all objects of subclasses of <code>Number</code>\", it means \"a list parameterized to one concrete class that extends <code>Number</code>\". It's not the contents of the list itself you are defining, it's what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )</p>\n\n<p>So, you can do:</p>\n\n<pre><code>List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\nList&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p>If you want a list that is able to hold any object of class Number or its subclasses, just do this:</p>\n\n<pre><code>List&lt;Number&gt; l = new ArrayList&lt;&gt;();\n\nl.add(new Integer(33));\nl.add(new Double(33.3d));\n</code></pre>\n\n<p>(The boxing of the values inserted is unnecessary, but there for clarity..)</p>\n"},{"tags":[],"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390833018,"creation_date":1390833018,"answer_id":21383465,"question_id":21383139,"body_markdown":"I will add one more way to add the subtypes of `Number` to this list. i.e\r\n\r\n    List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //OK\r\n     l.add(new Double(3.3)); //OK\r\n\r\nThis is allowed since the list is parameterized to be any *unknown supertype* of `Number` class. so, compiler allows the known subtype of `Number`. i.e `Integer` and `Double` types\r\n\r\n\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I will add one more way to add the subtypes of <code>Number</code> to this list. i.e</p>\n\n<pre><code>List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //OK\n l.add(new Double(3.3)); //OK\n</code></pre>\n\n<p>This is allowed since the list is parameterized to be any <em>unknown supertype</em> of <code>Number</code> class. so, compiler allows the known subtype of <code>Number</code>. i.e <code>Integer</code> and <code>Double</code> types</p>\n"},{"tags":[],"owner":{"account_id":938724,"reputation":35,"user_id":967193,"display_name":"punitusingh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400519229,"creation_date":1400519229,"answer_id":23743411,"question_id":21383139,"body_markdown":"Yes in case of \r\n\r\n    List&lt;? extends Number&gt; \r\n\r\nthis is just a reference, may be the actual object will be \r\n\r\n    List&lt;Integer&gt;\r\n\r\nso you should not be allowed to add new Double(5.0) in a list of Integer.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Yes in case of </p>\n\n<pre><code>List&lt;? extends Number&gt; \n</code></pre>\n\n<p>this is just a reference, may be the actual object will be </p>\n\n<pre><code>List&lt;Integer&gt;\n</code></pre>\n\n<p>so you should not be allowed to add new Double(5.0) in a list of Integer.</p>\n"},{"tags":[],"owner":{"account_id":7769028,"reputation":327,"user_id":5879277,"display_name":"Test1 Test2"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1512161377,"creation_date":1512093022,"answer_id":47585485,"question_id":21383139,"body_markdown":"Upper bounded and unbounded wildcard collections are immutable. \r\n\r\nFor example, you cannot do:\r\n\r\n    List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\r\n    myList.add(new Integer(3)); //will not compile\r\nThis fails to compile because java does not know what type of List `List&lt;? extends Number&gt;` is at compilation time. \r\n\r\nSo the example above, at compile time,  `myList` could be `List&lt;Double&gt;`or `List&lt;Integer&gt;` or a `List` of any subclass of `Number`. And since you cannot add a `Double` to a `List&lt;Integer&gt;` or vise-versa, the compilation fails.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Upper bounded and unbounded wildcard collections are immutable. </p>\n\n<p>For example, you cannot do:</p>\n\n<pre><code>List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\nmyList.add(new Integer(3)); //will not compile\n</code></pre>\n\n<p>This fails to compile because java does not know what type of List <code>List&lt;? extends Number&gt;</code> is at compilation time. </p>\n\n<p>So the example above, at compile time,  <code>myList</code> could be <code>List&lt;Double&gt;</code>or <code>List&lt;Integer&gt;</code> or a <code>List</code> of any subclass of <code>Number</code>. And since you cannot add a <code>Double</code> to a <code>List&lt;Integer&gt;</code> or vise-versa, the compilation fails.</p>\n"},{"tags":[],"owner":{"account_id":10793477,"reputation":81,"user_id":7940105,"display_name":"flounder"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1582543663,"creation_date":1582543663,"answer_id":60374978,"question_id":21383139,"body_markdown":"The problem with upper-bounded generics is that the compiler doesn&#39;t know the exact type that is going to be used, for example:\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded = new ArrayList&lt;Double&gt;();\r\n```\r\n`upperBounded` can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded.add(1.0); // compile-time error\r\n```\r\nGood thing that Java prevents us from doing that because this would introduce a lot of bugs.\r\n\r\nThe same applies to the unbounded generic types.\r\n\r\nNow what about the lower-bounded generics?\r\n\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\r\nlowerBounded.add(0);\r\n```\r\nThis is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(0);\r\n```\r\nHere we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).\r\n\r\nIt may be surprising, but you can&#39;t add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(1.0); // compile-time error\r\n```\r\nAs the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.\r\n\r\nHope that helps.\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>The problem with upper-bounded generics is that the compiler doesn't know the exact type that is going to be used, for example:</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p><code>upperBounded</code> can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>Good thing that Java prevents us from doing that because this would introduce a lot of bugs.</p>\n\n<p>The same applies to the unbounded generic types.</p>\n\n<p>Now what about the lower-bounded generics?</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>This is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>Here we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).</p>\n\n<p>It may be surprising, but you can't add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>As the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.</p>\n\n<p>Hope that helps.</p>\n"}],"owner":{"account_id":3189208,"reputation":2492,"user_id":2693979,"accept_rate":50,"display_name":"user2693979"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5354,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":6,"score":22,"last_activity_date":1684355235,"creation_date":1390832139,"question_id":21383139,"body_markdown":"I have a list with upper bound generics.\r\n\r\n     List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //ERROR\r\n     l.add(new Double(3.3)); // ERROR\r\n\r\nI don&#39;t understand the problem, because Integer and Double extend Number.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I have a list with upper bound generics.</p>\n\n<pre><code> List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //ERROR\n l.add(new Double(3.3)); // ERROR\n</code></pre>\n\n<p>I don't understand the problem, because Integer and Double extend Number.</p>\n"},{"tags":["java","android","flutter","dart","wifi"],"owner":{"account_id":8260582,"reputation":131,"user_id":6212158,"display_name":"Ababwa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684355153,"creation_date":1684355153,"question_id":76275958,"body_markdown":"I have a device emitting a Wi-Fi access point with a known SSID and password. I&#39;m trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I&#39;m sure I have the right SSID and password and that the network is up. I&#39;m using Flutter and a MethodChannel to talk to Java from Flutter.\r\n\r\nHere&#39;s my Java-side code:\r\n```\r\npublic class MainActivity extends FlutterActivity {\r\n\tprivate static final String CHANNEL = &quot;wifi&quot;;\r\n\tprivate static final int TIMEOUT = 60000;\r\n\t\r\n\tprivate static ConnectivityManager.NetworkCallback callback;\r\n\t\r\n\t@Override\r\n\tpublic void configureFlutterEngine(FlutterEngine flutterEngine) {\r\n\t\tsuper.configureFlutterEngine(flutterEngine);\r\n\t\tnew MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\r\n\t\t\t.setMethodCallHandler((call, result) -&gt; {\r\n\t\t\t\tConnectivityManager cm = (ConnectivityManager)getApplicationContext()\r\n\t\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t\t\tif(call.method.equals(&quot;request&quot;)) {\r\n\t\t\t\t\tString ssid = call.argument(&quot;ssid&quot;);\r\n\t\t\t\t\tString pass = call.argument(&quot;password&quot;);\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback = new ConnectivityManager.NetworkCallback() {\r\n\t\t\t\t\t\tboolean first = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onAvailable(Network network) {\r\n\t\t\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\t\t\tfirst = false;\r\n\t\t\t\t\t\t\t\tresult.success(cm.bindProcessToNetwork(network));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onUnavailable() {\r\n\t\t\t\t\t\t\tcallback = null;\r\n\t\t\t\t\t\t\tresult.success(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tWifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\r\n\t\t\t\t\t\t.setSsid(ssid)\r\n\t\t\t\t\t\t.setWpa2Passphrase(pass)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tNetworkRequest netReq = new NetworkRequest.Builder()\r\n\t\t\t\t\t\t.addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n\t\t\t\t\t\t.setNetworkSpecifier(wfNetSpec)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tcm.requestNetwork(netReq, callback, TIMEOUT);\r\n\t\t\t\t} else if(call.method.equals(&quot;release&quot;)) {\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcm.bindProcessToNetwork(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}\r\n```\r\nHere is my Flutter-side Dart code:\r\n```\r\nconst MethodChannel _channel = MethodChannel(&#39;wifi&#39;);\r\n\r\nFuture&lt;bool&gt; request(String ssid, String password) async {\r\n  return await _channel.invokeMethod&lt;bool&gt;(&#39;request&#39;, {\r\n    &#39;ssid&#39;: ssid,\r\n    &#39;password&#39;: password,\r\n  }) == true;\r\n}\r\n\r\nvoid release() {\r\n  _channel.invokeMethod(&#39;release&#39;);\r\n}\r\n```\r\nThis approach was inspired by the questions below, yet `onAvailable` is never called in my code:\r\n\r\nhttps://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\r\n\r\nhttps://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\r\n\r\nWhat is the problem with this approach?\r\n\r\nI&#39;m using a Pixel 4a with Android 13.\r\n\r\nAdditionally, when I call the Dart `request` function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it&#39;s an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?","title":"Android Network Request Fails","body":"<p>I have a device emitting a Wi-Fi access point with a known SSID and password. I'm trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I'm sure I have the right SSID and password and that the network is up. I'm using Flutter and a MethodChannel to talk to Java from Flutter.</p>\n<p>Here's my Java-side code:</p>\n<pre><code>public class MainActivity extends FlutterActivity {\n    private static final String CHANNEL = &quot;wifi&quot;;\n    private static final int TIMEOUT = 60000;\n    \n    private static ConnectivityManager.NetworkCallback callback;\n    \n    @Override\n    public void configureFlutterEngine(FlutterEngine flutterEngine) {\n        super.configureFlutterEngine(flutterEngine);\n        new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\n            .setMethodCallHandler((call, result) -&gt; {\n                ConnectivityManager cm = (ConnectivityManager)getApplicationContext()\n                    .getSystemService(Context.CONNECTIVITY_SERVICE);\n                if(call.method.equals(&quot;request&quot;)) {\n                    String ssid = call.argument(&quot;ssid&quot;);\n                    String pass = call.argument(&quot;password&quot;);\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    callback = new ConnectivityManager.NetworkCallback() {\n                        boolean first = true;\n                        \n                        @Override\n                        public void onAvailable(Network network) {\n                            if(first) {\n                                first = false;\n                                result.success(cm.bindProcessToNetwork(network));\n                            }\n                        }\n                        \n                        @Override\n                        public void onUnavailable() {\n                            callback = null;\n                            result.success(false);\n                        }\n                    };\n                    WifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\n                        .setSsid(ssid)\n                        .setWpa2Passphrase(pass)\n                        .build();\n                    NetworkRequest netReq = new NetworkRequest.Builder()\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                        .setNetworkSpecifier(wfNetSpec)\n                        .build();\n                    cm.requestNetwork(netReq, callback, TIMEOUT);\n                } else if(call.method.equals(&quot;release&quot;)) {\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    cm.bindProcessToNetwork(null);\n                }\n            }\n        );\n    }\n}\n</code></pre>\n<p>Here is my Flutter-side Dart code:</p>\n<pre><code>const MethodChannel _channel = MethodChannel('wifi');\n\nFuture&lt;bool&gt; request(String ssid, String password) async {\n  return await _channel.invokeMethod&lt;bool&gt;('request', {\n    'ssid': ssid,\n    'password': password,\n  }) == true;\n}\n\nvoid release() {\n  _channel.invokeMethod('release');\n}\n</code></pre>\n<p>This approach was inspired by the questions below, yet <code>onAvailable</code> is never called in my code:</p>\n<p><a href=\"https://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\">Ask user to connect to a specific WiFi flutter</a></p>\n<p><a href=\"https://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\">after called BindProcessToNetwork(network). APP never connect to internet through mobile data</a></p>\n<p>What is the problem with this approach?</p>\n<p>I'm using a Pixel 4a with Android 13.</p>\n<p>Additionally, when I call the Dart <code>request</code> function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it's an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?</p>\n"},{"tags":["java","spring-boot","graphql","graphql-java","scalar"],"comments":[{"owner":{"account_id":5771601,"reputation":742,"user_id":4554899,"display_name":"Vinay"},"score":1,"creation_date":1684096556,"post_id":76249529,"comment_id":134463110,"body_markdown":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query.","body":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query."},{"owner":{"account_id":3338251,"reputation":19359,"user_id":2805154,"accept_rate":75,"display_name":"Michel Floyd"},"score":0,"creation_date":1684197863,"post_id":76249529,"comment_id":134479112,"body_markdown":"Use *query variables* and stringify the JSON before passing it.","body":"Use <i>query variables</i> and stringify the JSON before passing it."},{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684217603,"post_id":76249529,"comment_id":134481038,"body_markdown":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself.","body":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself."}],"answers":[{"tags":[],"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354437,"creation_date":1684098461,"answer_id":76249685,"question_id":76249529,"body_markdown":"to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\r\nI tried your code and this works for me:\r\n\r\n    import { gql } from &#39;@apollo/client&#39;;\r\n    \r\n    const CREATE_PRODUCT_MUTATION = gql`\r\n      mutation CreateProduct($productRequest: ProductInput!) {\r\n        createProduct(ProductRequest: $productRequest) {\r\n          id\r\n          name\r\n          attributes\r\n        }\r\n      }\r\n    `;\r\n    \r\n    const productRequest = {\r\n      id: 1,\r\n      name: &quot;ABC&quot;,\r\n      attributes: {\r\n        Key1: &quot;Value1&quot;,\r\n        Key2: &quot;Value2&quot;,\r\n        Key3: &quot;Value3&quot;\r\n      }\r\n    };\r\n    \r\n    client.mutate({\r\n      mutation: CREATE_PRODUCT_MUTATION,\r\n      variables: {\r\n        productRequest: productRequest\r\n      }\r\n    }).then(result =&gt; {\r\n      console.log(result.data.createProduct);\r\n    }).catch(error =&gt; {\r\n      console.error(error);\r\n    });\r\n\r\n\r\n\r\nIn this piece of code , I&#39;m passing a JSON string as the value for the attributes field. Which should fix your problem.\r\n","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\nI tried your code and this works for me:</p>\n<pre><code>import { gql } from '@apollo/client';\n\nconst CREATE_PRODUCT_MUTATION = gql`\n  mutation CreateProduct($productRequest: ProductInput!) {\n    createProduct(ProductRequest: $productRequest) {\n      id\n      name\n      attributes\n    }\n  }\n`;\n\nconst productRequest = {\n  id: 1,\n  name: &quot;ABC&quot;,\n  attributes: {\n    Key1: &quot;Value1&quot;,\n    Key2: &quot;Value2&quot;,\n    Key3: &quot;Value3&quot;\n  }\n};\n\nclient.mutate({\n  mutation: CREATE_PRODUCT_MUTATION,\n  variables: {\n    productRequest: productRequest\n  }\n}).then(result =&gt; {\n  console.log(result.data.createProduct);\n}).catch(error =&gt; {\n  console.error(error);\n});\n</code></pre>\n<p>In this piece of code , I'm passing a JSON string as the value for the attributes field. Which should fix your problem.</p>\n"}],"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":760,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684354437,"creation_date":1684095824,"question_id":76249529,"body_markdown":"Using the Extended graphQL scalars we can display the &quot;`Map&lt;String, String&gt;`&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?\r\n\r\nThe schema :\r\n\r\n```\r\nType Mutation{\r\n               createProduct(ProductRequest: ProductInput) : Product\r\n             }\r\n\r\ninput ProductInput{\r\n\tid : Int\r\n\tname: String\r\n\tattributes: JSON\r\n}\r\n```\r\n\r\nThe Query :\r\n\r\n```\r\nmutation {\r\n  createProduct(ProductRequest: {\r\n        id:1,\r\n        name:&quot;ABC&quot;\r\n  attributes:{\r\n    Key: &quot;Value&quot;\r\n  }\r\n  })\r\n  {\r\n    id\r\n    name\r\n    attributes\r\n  }\r\n}\r\n\r\n```\r\n\r\nIf I pass like this, for &quot;Attributes&quot; it&#39;s taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know. \r\n\r\nI tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>Using the Extended graphQL scalars we can display the &quot;<code>Map&lt;String, String&gt;</code>&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?</p>\n<p>The schema :</p>\n<pre><code>Type Mutation{\n               createProduct(ProductRequest: ProductInput) : Product\n             }\n\ninput ProductInput{\n    id : Int\n    name: String\n    attributes: JSON\n}\n</code></pre>\n<p>The Query :</p>\n<pre><code>mutation {\n  createProduct(ProductRequest: {\n        id:1,\n        name:&quot;ABC&quot;\n  attributes:{\n    Key: &quot;Value&quot;\n  }\n  })\n  {\n    id\n    name\n    attributes\n  }\n}\n\n</code></pre>\n<p>If I pass like this, for &quot;Attributes&quot; it's taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know.</p>\n<p>I tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684343925,"post_id":76274587,"comment_id":134505917,"body_markdown":"Just a typo, I edited it","body":"Just a typo, I edited it"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684344060,"post_id":76274587,"comment_id":134505944,"body_markdown":"please add how you create the mock service and the class of it","body":"please add how you create the mock service and the class of it"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1684347402,"post_id":76274587,"comment_id":134506645,"body_markdown":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?","body":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?"}],"answers":[{"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344020,"creation_date":1684344020,"answer_id":76274672,"question_id":76274587,"body_markdown":"you can use use Mockito argument matchers eq() method like below,\r\n\r\nimport the org.mockito.ArgumentMatchers \r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>you can use use Mockito argument matchers eq() method like below,</p>\n<p>import the org.mockito.ArgumentMatchers</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684353232,"creation_date":1684353232,"answer_id":76275747,"question_id":76274587,"body_markdown":"You cannot use a mock with literal arguments.\r\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors\r\n\r\nTake a look at this link\r\nhttps://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\r\n\r\nIn your case you should do something like\r\n\r\n```\r\n@Test\r\npublic void firstTest() {\r\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\r\n    Mockito.when(service.getValue(acString.capture()))\r\n        .thenReturn(chooseReturn(acString.value));\r\n\r\n    // run code ...\r\n    // assert ...\r\n}\r\n\r\nprivate int chooseReturn(String arg) {\r\n    if (arg.equals(&quot;parameter1&quot;)) {\r\n        return 1;\r\n    } else if (arg.equals(&quot;parameter2&quot;)) {\r\n        return 2;\r\n    } else {\r\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\r\n    }\r\n}\r\n```","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>You cannot use a mock with literal arguments.\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors</p>\n<p>Take a look at this link\n<a href=\"https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation</a></p>\n<p>In your case you should do something like</p>\n<pre><code>@Test\npublic void firstTest() {\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\n    Mockito.when(service.getValue(acString.capture()))\n        .thenReturn(chooseReturn(acString.value));\n\n    // run code ...\n    // assert ...\n}\n\nprivate int chooseReturn(String arg) {\n    if (arg.equals(&quot;parameter1&quot;)) {\n        return 1;\n    } else if (arg.equals(&quot;parameter2&quot;)) {\n        return 2;\n    } else {\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354233,"creation_date":1684354233,"answer_id":76275874,"question_id":76274587,"body_markdown":"If your tests are literally as shown:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nThen the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.\r\n\r\nAdd to your tests to actually do something and verify behavior:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    \r\n        // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\r\n    \r\n        assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>If your tests are literally as shown:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>Then the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.</p>\n<p>Add to your tests to actually do something and verify behavior:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n\n    // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\n\n    assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\n}\n</code></pre>\n"}],"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1684354233,"creation_date":1684343360,"question_id":76274587,"body_markdown":"I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n\r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nI get an error:\r\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\r\n[MockitoHint]  ...args ok? -&gt; at path...\r\n\r\nCan someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...\r\n\r\nMock class:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n    public class MyTest {\r\n\r\n    @Mock\r\n    private MyService myService;\r\n    \r\n    ...\r\n    \r\n    @InjectMocks\r\n    private TestingService testingService = new TestingService();\r\n    }\r\n\r\n\r\n\r\n","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>I get an error:\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\n[MockitoHint]  ...args ok? -&gt; at path...</p>\n<p>Can someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...</p>\n<p>Mock class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n\npublic class MyTest {\n\n@Mock\nprivate MyService myService;\n\n...\n\n@InjectMocks\nprivate TestingService testingService = new TestingService();\n}\n</code></pre>\n"},{"tags":["java","multithreading","executorservice","thread-sleep","forkjoinpool"],"comments":[{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1642537807,"post_id":70761704,"comment_id":125096218,"body_markdown":"What version of Java? It&#39;s like you expect fibers to be implemented?","body":"What version of Java? It&#39;s like you expect fibers to be implemented?"},{"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"score":0,"creation_date":1642538332,"post_id":70761704,"comment_id":125096373,"body_markdown":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html","body":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. <a href=\"https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642537888,"creation_date":1642537888,"answer_id":70762022,"question_id":70761704,"body_markdown":"&gt; If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.\r\n\r\nThis is not how threads behave.  A thread represents an inflight execution.  It can&#39;t arbitrarily jump to another `Runnable`.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, _unless_ the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).\r\n\r\nIn other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.\r\n\r\nBlocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.\r\n\r\nTo my knowledge the ```ForkJoinPool``` is not reactive, it hands Runnables to threads, that&#39;s it.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<blockquote>\n<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.</p>\n</blockquote>\n<p>This is not how threads behave.  A thread represents an inflight execution.  It can't arbitrarily jump to another <code>Runnable</code>.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, <em>unless</em> the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).</p>\n<p>In other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.</p>\n<p>Blocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.</p>\n<p>To my knowledge the <code>ForkJoinPool</code> is not reactive, it hands Runnables to threads, that's it.</p>\n"},{"tags":[],"owner":{"account_id":23985085,"reputation":16,"user_id":17971986,"display_name":"Alwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642579852,"creation_date":1642579852,"answer_id":70767204,"question_id":70761704,"body_markdown":"ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent&#39;s ForkJoinPool to use Virtual Threads.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent's ForkJoinPool to use Virtual Threads.</p>\n"},{"tags":[],"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354161,"creation_date":1684354161,"answer_id":76275864,"question_id":70761704,"body_markdown":"The `ForkJoinPool` cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.\r\n\r\nSo are work item that is waiting for something has to explicitly tell the `ForkJoinPool` that it should start other tasks to maintain the parallelism.\r\n\r\nTo achieve this you have to use `ForkJoinPool#managedBlock` or any API that uses it underneath.\r\n\r\nIf you for example use `CompletableFuture#join` or `CompletableFuture#get`, then these methods under the hood use `ForkJoinPool#managedBlock` and thus would allow the `ForkJoinPool` to start other tasks to maintain intended parallelism.\r\n\r\nA simple `Thread.sleep` is not working for this.\r\n\r\nIf you replace in your example the `Thread.sleep(10000);` by `CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();`, then you get exactly the behavior you intended.\r\n\r\n","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>The <code>ForkJoinPool</code> cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.</p>\n<p>So are work item that is waiting for something has to explicitly tell the <code>ForkJoinPool</code> that it should start other tasks to maintain the parallelism.</p>\n<p>To achieve this you have to use <code>ForkJoinPool#managedBlock</code> or any API that uses it underneath.</p>\n<p>If you for example use <code>CompletableFuture#join</code> or <code>CompletableFuture#get</code>, then these methods under the hood use <code>ForkJoinPool#managedBlock</code> and thus would allow the <code>ForkJoinPool</code> to start other tasks to maintain intended parallelism.</p>\n<p>A simple <code>Thread.sleep</code> is not working for this.</p>\n<p>If you replace in your example the <code>Thread.sleep(10000);</code> by <code>CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();</code>, then you get exactly the behavior you intended.</p>\n"}],"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70767204,"answer_count":3,"score":0,"last_activity_date":1684354161,"creation_date":1642536001,"question_id":70761704,"body_markdown":"If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using ```Thread.sleep(10000)```) , it should pick up another task which is not causing blocking IO.\r\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don&#39;t match it. The Thread doesn&#39;t relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ). \r\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)\r\n\r\nWhat is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?\r\n\r\n    \tForkJoinPool pool = new  ForkJoinPool(1);\r\n    \t\r\n    \tList&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\r\n    \t\r\n\r\n        //Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\r\n    \t//Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\r\n    \t//Non Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\r\n    \t\r\n    \r\n    \t\r\n    \tint i=0;\r\n    \tSystem.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\r\n    \tSystem.out.println(&quot;waiting&quot;);\r\n    \t\r\n    \tString str1 = tasks.get(0).get();\r\n    \tString str2 = tasks.get(1).get();\r\n    \tString str3 = tasks.get(2).get();\r\n    \t\r\n    \tSystem.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\r\n    \t\r\n    \tSystem.out.println(&quot;done&quot;);\r\n    \r\nResults :  \r\n\r\n&gt;//Pool size = 2    \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\n&gt;//Pool size = 1   \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\nAnother observation:  \r\nWhen we submit Task 3( non blocking ) first then only it is invoked first.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using <code>Thread.sleep(10000)</code>) , it should pick up another task which is not causing blocking IO.\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don't match it. The Thread doesn't relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ).\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)</p>\n<p>What is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?</p>\n<pre><code>    ForkJoinPool pool = new  ForkJoinPool(1);\n    \n    List&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\n    \n\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\n    //Non Blocking\n    tasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\n    \n\n    \n    int i=0;\n    System.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\n    System.out.println(&quot;waiting&quot;);\n    \n    String str1 = tasks.get(0).get();\n    String str2 = tasks.get(1).get();\n    String str3 = tasks.get(2).get();\n    \n    System.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\n    \n    System.out.println(&quot;done&quot;);\n</code></pre>\n<p>Results :</p>\n<blockquote>\n<p>//Pool size = 2<br />\nTask 2 woke uptrue<br />\nTask 1 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<blockquote>\n<p>//Pool size = 1<br />\nTask 1 woke uptrue<br />\nTask 2 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<p>Another observation:<br />\nWhen we submit Task 3( non blocking ) first then only it is invoked first.</p>\n"},{"tags":["java","bitmap","unsigned","bitboard"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1684351626,"post_id":76275571,"comment_id":134507522,"body_markdown":"You can use Java type `long`, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, `1L &lt;&lt; 63` is well-defined in Java.","body":"You can use Java type <code>long</code>, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, <code>1L &lt;&lt; 63</code> is well-defined in Java."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1684351982,"post_id":76275571,"comment_id":134507586,"body_markdown":"Side note: there is one unsigned primitive type in Java: `char` is a 16-bit unsigned integer.  Not that I think that helps you.","body":"Side note: there is one unsigned primitive type in Java: <code>char</code> is a 16-bit unsigned integer.  Not that I think that helps you."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1684352257,"post_id":76275571,"comment_id":134507642,"body_markdown":"There are also classes like [`BitSet`](https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html) that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens `0xFF` to a full 32bit int","body":"There are also classes like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens <code>0xFF</code> to a full 32bit int"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1684352403,"post_id":76275571,"comment_id":134507667,"body_markdown":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums.","body":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1684352797,"post_id":76275571,"comment_id":134507742,"body_markdown":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And `EnumSet` &amp; `EnumMap` can very efficiently store a collection of enum objects.","body":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And <code>EnumSet</code> &amp; <code>EnumMap</code> can very efficiently store a collection of enum objects."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684352862,"post_id":76275571,"comment_id":134507755,"body_markdown":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers.","body":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359109,"post_id":76275571,"comment_id":134508890,"body_markdown":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it.","body":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359182,"post_id":76275571,"comment_id":134508899,"body_markdown":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on.","body":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684361521,"post_id":76275571,"comment_id":134509231,"body_markdown":"The last bit works exactly like all the other bits, you just have to use `&gt;&gt;&gt;` instead of `&gt;&gt;`.","body":"The last bit works exactly like all the other bits, you just have to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1684370742,"post_id":76275571,"comment_id":134510222,"body_markdown":"Off-topic:  Although Java doesn&#39;t  have an `unsigned` type, it does have some support. Check out the methods in the [Long API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html) .  There is a brief [bitwise operators tutorial](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html) .","body":"Off-topic:  Although Java doesn&#39;t  have an <code>unsigned</code> type, it does have some support. Check out the methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html\" rel=\"nofollow noreferrer\">Long API</a> .  There is a brief <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">bitwise operators tutorial</a> ."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684352942,"creation_date":1684352942,"answer_id":76275719,"question_id":76275571,"body_markdown":"Signedness doesn&#39;t actually make a significant difference to using numbers as bit masks -- at least, not in Java.\r\n\r\nYou can use a `long` just fine, even though it is signed.  `1L &lt;&lt; 63` works.  Just note that you will want to use `&gt;&gt;&gt;` instead of `&gt;&gt;` to when shifting your mask right.\r\n\r\nNote that if you want to store _more_ than 64 bits, you may wish to use `java.util.BitSet`, which is designed specifically as a bitmap that scales as necessary.","title":"Bitmaps/bitboards in Java","body":"<p>Signedness doesn't actually make a significant difference to using numbers as bit masks -- at least, not in Java.</p>\n<p>You can use a <code>long</code> just fine, even though it is signed.  <code>1L &lt;&lt; 63</code> works.  Just note that you will want to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code> to when shifting your mask right.</p>\n<p>Note that if you want to store <em>more</em> than 64 bits, you may wish to use <code>java.util.BitSet</code>, which is designed specifically as a bitmap that scales as necessary.</p>\n"}],"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684352942,"creation_date":1684351494,"question_id":76275571,"body_markdown":"I&#39;m programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?\r\n\r\nI tried everything I was able to think of","title":"Bitmaps/bitboards in Java","body":"<p>I'm programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?</p>\n<p>I tried everything I was able to think of</p>\n"},{"tags":["java","sap-cloud-foundry"],"comments":[{"owner":{"account_id":2299521,"reputation":619,"user_id":2020124,"display_name":"Apache"},"score":0,"creation_date":1579203074,"post_id":59776499,"comment_id":105697224,"body_markdown":"Hi, welcome to Stack Overflow. Please see this example of [how to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Hi, welcome to Stack Overflow. Please see this example of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to create a Minimal, Reproducible Example</a>"}],"answers":[{"tags":[],"owner":{"account_id":2904628,"reputation":6707,"user_id":2490343,"accept_rate":100,"display_name":"Shiva"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579588553,"creation_date":1579588553,"answer_id":59835417,"question_id":59776499,"body_markdown":"There are a few ways in which you can pass `Environment Variables` in a cloud foundry \r\n\r\n 1. Using the set-env variable command using cf commandline: The general syntax is `cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE`\r\n 2. Using Manifest file: If you are using manifest file with `cf push` you can set the environamet valriables in it like so. Official documenttaion can be found [here][1]\r\n\r\n    `env:\r\n        ENV_VARIABLE1: value1\r\n        ENV_VARIABLE1: value2`\r\n\r\n 3. Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as `mtar`, in the mtar deployment descriptor, you can set the `PROPERTIES` field in under the deployment section to add additional env varables. Additional documentation can be found [here][2]. e.g.\r\n\r\n\r\n    `properties:\r\n          POPULATE_ALBUM_REPOSITORY: true`\r\n\r\n\r\n  [1]: https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\r\n  [2]: https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>There are a few ways in which you can pass <code>Environment Variables</code> in a cloud foundry </p>\n\n<ol>\n<li>Using the set-env variable command using cf commandline: The general syntax is <code>cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE</code></li>\n<li><p>Using Manifest file: If you are using manifest file with <code>cf push</code> you can set the environamet valriables in it like so. Official documenttaion can be found <a href=\"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>env:\n    ENV_VARIABLE1: value1\n    ENV_VARIABLE1: value2</code></p></li>\n<li><p>Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as <code>mtar</code>, in the mtar deployment descriptor, you can set the <code>PROPERTIES</code> field in under the deployment section to add additional env varables. Additional documentation can be found <a href=\"https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor\" rel=\"nofollow noreferrer\">here</a>. e.g.</p>\n\n<p><code>properties:\n      POPULATE_ALBUM_REPOSITORY: true</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":575816,"reputation":21,"user_id":229797,"display_name":"Mike Mountrakis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684352557,"creation_date":1684352557,"answer_id":76275673,"question_id":59776499,"body_markdown":"Adding to the answer above you can use also:\r\n```\r\ncf set-env myapplication env1=val1 env2=val2 env3=val3 ...\r\n```\r\nwhere `...` is another set of `env=val` to set more than one variable in the same line\r\n\r\nFor large JSON variables you can use:\r\n```\r\nexport MYVAR=`cat mylarge.json`\r\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\r\n```\r\n\r\nFinally, in order to rewrite the entire configuration you can use the following example:\r\n\r\n```\r\ncf curl -X PUT /v2/apps/&lt;app-guid&gt; -d &#39;{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}&#39;\r\n```\r\nThat overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you&#39;d have to include those as well as the new ones you want to set.","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>Adding to the answer above you can use also:</p>\n<pre><code>cf set-env myapplication env1=val1 env2=val2 env3=val3 ...\n</code></pre>\n<p>where <code>...</code> is another set of <code>env=val</code> to set more than one variable in the same line</p>\n<p>For large JSON variables you can use:</p>\n<pre><code>export MYVAR=`cat mylarge.json`\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\n</code></pre>\n<p>Finally, in order to rewrite the entire configuration you can use the following example:</p>\n<pre><code>cf curl -X PUT /v2/apps/&lt;app-guid&gt; -d '{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}'\n</code></pre>\n<p>That overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you'd have to include those as well as the new ones you want to set.</p>\n"}],"owner":{"account_id":17545520,"reputation":1,"user_id":12726900,"display_name":"Nikita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684352557,"creation_date":1579202667,"question_id":59776499,"body_markdown":"I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. \r\n\r\nI tried passing in .profile file but it did not work. In this file I provide export variablename=&quot;{jsonObject}&quot; \r\n\r\nAny help will be appreciated.\r\n\r\nThank you","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. </p>\n\n<p>I tried passing in .profile file but it did not work. In this file I provide export variablename=\"{jsonObject}\" </p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1684317246,"post_id":76270769,"comment_id":134499560,"body_markdown":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. *What* should it do? Where is your code? What is expected and what is actually happening?","body":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. <i>What</i> should it do? Where is your code? What is expected and what is actually happening?"},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684317729,"post_id":76270769,"comment_id":134499664,"body_markdown":"Sorry first time here","body":"Sorry first time here"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684320376,"post_id":76270769,"comment_id":134500219,"body_markdown":"*&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;* - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ...","body":"<i>&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;</i> - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ..."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1684321551,"post_id":76270769,"comment_id":134500482,"body_markdown":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th.","body":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th."},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684322410,"post_id":76270769,"comment_id":134500643,"body_markdown":"The easter sunday of the Western world. I`m in europe.","body":"The easter sunday of the Western world. I`m in europe."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684327062,"post_id":76270769,"comment_id":134501661,"body_markdown":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names.","body":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1684331856,"post_id":76270769,"comment_id":134502919,"body_markdown":"@WJS I think at least some of the variables are taken from [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) or the ones that follow it.","body":"@WJS I think at least some of the variables are taken from <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> or the ones that follow it."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684343366,"post_id":76270769,"comment_id":134505805,"body_markdown":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using `isBefore` and `isAfter` to check for differences which also include the year.  The OP only wants day of year differences.","body":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using <code>isBefore</code> and <code>isAfter</code> to check for differences which also include the year.  The OP only wants day of year differences."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684351843,"creation_date":1684336326,"answer_id":76273603,"question_id":76270769,"body_markdown":"One problem is that you are incrementing years. And using the `isBefore` and `isAfter` methods also include the year which is incorrectly reporting `min` and `max` dates for Easter. Example. `2023-04-09 isBefore 2024-03-31` from a date perspective but not from a `month/day` perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn&#39;t obvious to me.  *Print statements are your friend when it comes to debugging*.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.\r\n\r\n- define a comparator to compare month and day using the day of year.\r\n- initialize your `min` and `max` to the current year date for Easter.\r\n- then starting with &#39;1&#39;, increment your years.\r\n```\r\nint x = 20;\r\n\r\nint currentYear = 2023;\r\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\r\n\r\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\r\nLocalDate sp&#228;testerOstersonntag = ostersonntag;\r\nLocalDate fr&#252;hesterOstersonntag = ostersonntag;\r\n\r\n    for (int i = 0; i &lt; x; i++) {\r\n       ostersonntag = berechneOstersonntag(currentYear + \r\n    i);\r\n\r\n        if (comp.compare(ostersonntag, sp&#228;testerOstersonntag) &gt; 0) {\r\n            sp&#228;testerOstersonntag = ostersonntag;\r\n        } else if (comp.compare(ostersonntag, fr&#252;hesterOstersonntag) &lt; 0) {\r\n            fr&#252;hesterOstersonntag = ostersonntag;\r\n        }\r\n    }\r\n\r\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n    sp&#228;testerOstersonntag);\r\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n    fr&#252;hesterOstersonntag);     \r\n}\r\n```\r\nprints\r\n```\r\nSpaetester Ostersonntag: 2038-04-25\r\nFruehester Ostersonntag: 2035-03-25\r\n```\r\nNote:  Another issue is that you and I are using different calculations to determine Easter. I used [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) posted by @VGR.  I verified the above using [Easter Dates]( https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717)","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>One problem is that you are incrementing years. And using the <code>isBefore</code> and <code>isAfter</code> methods also include the year which is incorrectly reporting <code>min</code> and <code>max</code> dates for Easter. Example. <code>2023-04-09 isBefore 2024-03-31</code> from a date perspective but not from a <code>month/day</code> perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn't obvious to me.  <em>Print statements are your friend when it comes to debugging</em>.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.</p>\n<ul>\n<li>define a comparator to compare month and day using the day of year.</li>\n<li>initialize your <code>min</code> and <code>max</code> to the current year date for Easter.</li>\n<li>then starting with '1', increment your years.</li>\n</ul>\n<pre><code>int x = 20;\n\nint currentYear = 2023;\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\n\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\nLocalDate spätesterOstersonntag = ostersonntag;\nLocalDate frühesterOstersonntag = ostersonntag;\n\n    for (int i = 0; i &lt; x; i++) {\n       ostersonntag = berechneOstersonntag(currentYear + \n    i);\n\n        if (comp.compare(ostersonntag, spätesterOstersonntag) &gt; 0) {\n            spätesterOstersonntag = ostersonntag;\n        } else if (comp.compare(ostersonntag, frühesterOstersonntag) &lt; 0) {\n            frühesterOstersonntag = ostersonntag;\n        }\n    }\n\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n    spätesterOstersonntag);\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n    frühesterOstersonntag);     \n}\n</code></pre>\n<p>prints</p>\n<pre><code>Spaetester Ostersonntag: 2038-04-25\nFruehester Ostersonntag: 2035-03-25\n</code></pre>\n<p>Note:  Another issue is that you and I are using different calculations to determine Easter. I used <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss%27s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> posted by @VGR.  I verified the above using <a href=\"https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717\" rel=\"nofollow noreferrer\">Easter Dates</a></p>\n"}],"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76273603,"answer_count":1,"score":0,"last_activity_date":1684351843,"creation_date":1684317078,"question_id":76270769,"body_markdown":"&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.\r\n\r\nUnfortunately, my code doesn&#39;t seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;\r\n\r\n````\r\n        import java.time.LocalDate;\r\n        import java.util.Scanner;\r\n\r\n        public class Ostersonntag3 {\r\n        public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\r\n        int x = scanner.nextInt();\r\n\r\n        LocalDate sp&#228;testerOstersonntag = LocalDate.MAX;\r\n        LocalDate fr&#252;hesterOstersonntag = LocalDate.MIN;\r\n\r\n        int currentYear = 2023;\r\n\r\n        for (int i = 0; i &lt; x; i++) {\r\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \r\n        i);\r\n\r\n            if (ostersonntag.isBefore(sp&#228;testerOstersonntag)) {\r\n            \tsp&#228;testerOstersonntag = ostersonntag;\r\n            }\r\n\r\n            if (ostersonntag.isAfter(fr&#252;hesterOstersonntag)) {\r\n            \tfr&#252;hesterOstersonntag = ostersonntag;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n        sp&#228;testerOstersonntag);\r\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n        fr&#252;hesterOstersonntag);\r\n\r\n        scanner.close();\r\n        }\r\n \r\n        private static LocalDate berechneOstersonntag(int jahr) {\r\n        int a = jahr % 19;\r\n        int b = jahr % 4;\r\n        int c = jahr % 7;\r\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\r\n        int s = jahr / 100 - jahr / 400 - 2;\r\n        int n = (6 + s) % 7;\r\n        int d = (m + 19 * a) % 30;\r\n\r\n        if (d == 29) {\r\n            d = 28;\r\n        }\r\n\r\n        if (d == 28 &amp;&amp; a &gt;= 11) {\r\n            d = 27;\r\n        }\r\n\r\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\r\n\r\n        int tag = 21 + d + e + 1;\r\n        int monat;\r\n\r\n        if (tag &gt; 31) {\r\n            tag = tag % 31;\r\n            monat = 4;\r\n        } else {\r\n            monat = 3;\r\n        }\r\n\r\n        return LocalDate.of(jahr, monat, tag);\r\n        }\r\n        }\r\n````\r\n\r\nThe Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in. \r\nBut the Output does not seem to be giving me the correct dates:\r\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\r\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\r\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\r\nThis does not make sense for me like at all??","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.</p>\n<p>Unfortunately, my code doesn't seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn't seem to work.&quot;</p>\n<pre><code>        import java.time.LocalDate;\n        import java.util.Scanner;\n\n        public class Ostersonntag3 {\n        public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\n        int x = scanner.nextInt();\n\n        LocalDate spätesterOstersonntag = LocalDate.MAX;\n        LocalDate frühesterOstersonntag = LocalDate.MIN;\n\n        int currentYear = 2023;\n\n        for (int i = 0; i &lt; x; i++) {\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \n        i);\n\n            if (ostersonntag.isBefore(spätesterOstersonntag)) {\n                spätesterOstersonntag = ostersonntag;\n            }\n\n            if (ostersonntag.isAfter(frühesterOstersonntag)) {\n                frühesterOstersonntag = ostersonntag;\n            }\n        }\n\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n        spätesterOstersonntag);\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n        frühesterOstersonntag);\n\n        scanner.close();\n        }\n \n        private static LocalDate berechneOstersonntag(int jahr) {\n        int a = jahr % 19;\n        int b = jahr % 4;\n        int c = jahr % 7;\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\n        int s = jahr / 100 - jahr / 400 - 2;\n        int n = (6 + s) % 7;\n        int d = (m + 19 * a) % 30;\n\n        if (d == 29) {\n            d = 28;\n        }\n\n        if (d == 28 &amp;&amp; a &gt;= 11) {\n            d = 27;\n        }\n\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\n\n        int tag = 21 + d + e + 1;\n        int monat;\n\n        if (tag &gt; 31) {\n            tag = tag % 31;\n            monat = 4;\n        } else {\n            monat = 3;\n        }\n\n        return LocalDate.of(jahr, monat, tag);\n        }\n        }\n</code></pre>\n<p>The Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in.\nBut the Output does not seem to be giving me the correct dates:\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\nThis does not make sense for me like at all??</p>\n"},{"tags":["java","validation"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1684365351,"post_id":76275480,"comment_id":134509712,"body_markdown":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a `boolean allowNull` attribute to the validation annotation and implement it? Or perhaps make optional fields `Optional&lt;String&gt;`, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well).","body":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a <code>boolean allowNull</code> attribute to the validation annotation and implement it? Or perhaps make optional fields <code>Optional&lt;String&gt;</code>, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well)."}],"owner":{"account_id":17814639,"reputation":63,"user_id":12938483,"display_name":"PoCiTo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684350669,"creation_date":1684350669,"question_id":76275480,"body_markdown":"I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.\r\n\r\nexample:\r\n\r\n```\r\nclass Test{\r\n    @CustomValidation1\r\n    private String alwaysValidatedField;\r\n\r\n    @CustomValidation2(groups = A.class)\r\n    private String mandatoryFieldForGroupA;\r\n    \r\n    @CustomValidation2(groups = {B.class, C.class})\r\n    private String optionalFieldForGroupB_C;\r\n    \r\n    interface A{}\r\n    interface B{}\r\n    interface C{}\r\n}\r\n```\r\n\r\nIs there any way other than creating additional custom validations that do the same but allows null values? ","title":"Java bean validation with optional fields and groups","body":"<p>I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.</p>\n<p>example:</p>\n<pre><code>class Test{\n    @CustomValidation1\n    private String alwaysValidatedField;\n\n    @CustomValidation2(groups = A.class)\n    private String mandatoryFieldForGroupA;\n    \n    @CustomValidation2(groups = {B.class, C.class})\n    private String optionalFieldForGroupB_C;\n    \n    interface A{}\n    interface B{}\n    interface C{}\n}\n</code></pre>\n<p>Is there any way other than creating additional custom validations that do the same but allows null values?</p>\n"},{"tags":["java","jar","helidon"],"comments":[{"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"score":0,"creation_date":1684340905,"post_id":76274101,"comment_id":134505303,"body_markdown":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:\n\nhttps://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\n\nSo it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand.","body":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:  <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">modules.readthedocs.io/en/stable/&hellip;</a>  So it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand."}],"answers":[{"tags":[],"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684344114,"creation_date":1684344114,"answer_id":76274685,"question_id":76274101,"body_markdown":"`MODULES_SILENT_SHELL_DEBUG` appears to be an [environment variable][1] defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;`${IFS+x}`&quot; which matches the syntax of [token expected by Helidon][2]. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)\r\n\r\nIf this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.   \r\n\r\nMeanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.\r\n\r\n\r\n  [1]: https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\r\n  [2]: https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p><code>MODULES_SILENT_SHELL_DEBUG</code> appears to be an <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">environment variable</a> defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;<code>${IFS+x}</code>&quot; which matches the syntax of <a href=\"https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides\" rel=\"nofollow noreferrer\">token expected by Helidon</a>. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)</p>\n<p>If this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.</p>\n<p>Meanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.</p>\n"},{"tags":[],"owner":{"account_id":1824964,"reputation":468,"user_id":1658022,"display_name":"Romain Grecourt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684350553,"creation_date":1684350553,"answer_id":76275464,"question_id":76274101,"body_markdown":"It seems that you have some exported shell function in your environment.\r\n\r\nYou can try to remove environment variables with names like `BASH_FUNC_`, either manually, one by one or with something like this:\r\n\r\n`unset -f $(env | cut -d &#39;=&#39; -f1 | grep BASH_FUNC_)`\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>It seems that you have some exported shell function in your environment.</p>\n<p>You can try to remove environment variables with names like <code>BASH_FUNC_</code>, either manually, one by one or with something like this:</p>\n<p><code>unset -f $(env | cut -d '=' -f1 | grep BASH_FUNC_)</code></p>\n"}],"owner":{"account_id":28621788,"reputation":21,"user_id":21914682,"display_name":"apoorva vejarla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684350553,"creation_date":1684339714,"question_id":76274101,"body_markdown":"I have a helidon MP java project with helidon 3.1.0 and I&#39;m facing the issue below when I&#39;m trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\r\njava version: 17.0.6\r\nhelidon version: 3.1.0\r\nOS : Oracle linux 8\r\nThanks for your support in advance.\r\n```\r\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\r\nException 0 :\r\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\n\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\t... 8 more\r\n\tSuppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\t\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\t\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\t\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\t\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\t\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\t\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\t\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\t\t... 19 more```\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>I have a helidon MP java project with helidon 3.1.0 and I'm facing the issue below when I'm trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\njava version: 17.0.6\nhelidon version: 3.1.0\nOS : Oracle linux 8\nThanks for your support in advance.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\nException 0 :\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n    at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n    at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n    at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n    at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n    at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n    at java.base/java.util.Optional.map(Optional.java:260)\n    at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n    at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n    at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n    at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n    at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n    at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n    at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n    at org.jboss.weld.util.Observers.notify(Observers.java:166)\n    at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n    at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n    at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\n\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    ... 8 more\n    Suppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n        at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n        at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n        at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n        at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n        at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n        at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n        at java.base/java.util.Optional.map(Optional.java:260)\n        at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n        at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n        at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n        at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n        at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n        at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n        at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n        at org.jboss.weld.util.Observers.notify(Observers.java:166)\n        at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n        at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n        at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n        at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n        ... 19 more```\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1684348165,"post_id":76275130,"comment_id":134506811,"body_markdown":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. `book.endDate * 1000` might fix your issue. E.g. `1684159940` when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see https://currentmillis.com/ for example)","body":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. <code>book.endDate * 1000</code> might fix your issue. E.g. <code>1684159940</code> when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see <a href=\"https://currentmillis.com/\" rel=\"nofollow noreferrer\">currentmillis.com</a> for example)"},{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684350205,"post_id":76275130,"comment_id":134507200,"body_markdown":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time.","body":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348177,"creation_date":1684348177,"answer_id":76275195,"question_id":76275130,"body_markdown":"The date from the book -which is really a timestamp- doesn&#39;t include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>The date from the book -which is really a timestamp- doesn't include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684349925,"creation_date":1684349925,"answer_id":76275399,"question_id":76275130,"body_markdown":"It appears that `book.endDate` is returning an incorrectly computed value.\r\n\r\n```java\r\nlong endDateMillis = book.endDate;\r\n```\r\n&gt; I/System.out: End Date: 1684159940\r\n\r\nEssentially, it is off by a multiple of 1000.\r\n\r\nYou can fix this either within the `book` object class, or simply multiply `endDateMillis` by 1000.\r\n\r\n```java\r\nlong endDateMillis = book.endDate * 1000L;\r\n```","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>It appears that <code>book.endDate</code> is returning an incorrectly computed value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate;\n</code></pre>\n<blockquote>\n<p>I/System.out: End Date: 1684159940</p>\n</blockquote>\n<p>Essentially, it is off by a multiple of 1000.</p>\n<p>You can fix this either within the <code>book</code> object class, or simply multiply <code>endDateMillis</code> by 1000.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate * 1000L;\n</code></pre>\n"}],"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76275399,"answer_count":2,"score":1,"last_activity_date":1684349925,"creation_date":1684347690,"question_id":76275130,"body_markdown":"I am working on a project where the user adds a completion date when adding a book. I save it in an object called `FinishedBooks` with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:\r\n\r\n```java\r\nprivate void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\r\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\r\n\r\n    // take now time\r\n    long currentTimeMillis = System.currentTimeMillis();\r\n\r\n    // Calculate the time one week ago\r\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\r\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\r\n\r\n    // Check each item in the list\r\n    for (FinishedBooks book : finishedBooks) {\r\n        long endDateMillis = book.endDate;\r\n\r\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\r\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\r\n        System.out.println(&quot;******************************&quot;);\r\n\r\n        // If the due date falls within the last 1 week, add the item to the filteredList\r\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\r\n            lastWeekList.add(book);\r\n        }\r\n    }\r\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\r\n}\r\n```\r\n\r\nMy code didn&#39;t work as I wanted, it never enters the if block. So I used a `System.out.println();` to see if the values meet the if conditions. Here&#39;s my logcat output:\r\n\r\n```\r\nI/System.out: End Date: 1684159940\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\nI/System.out: End Date: 1683987159\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\n```\r\n\r\nAlthough my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. `lastWeekList.size()` returns 0.\r\n\r\nI am grateful for your help in advance.\r\n\r\nI was expecting the conditions to be met and these objects to be listed, but the list remains empty.\r\n","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>I am working on a project where the user adds a completion date when adding a book. I save it in an object called <code>FinishedBooks</code> with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\n\n    // take now time\n    long currentTimeMillis = System.currentTimeMillis();\n\n    // Calculate the time one week ago\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\n\n    // Check each item in the list\n    for (FinishedBooks book : finishedBooks) {\n        long endDateMillis = book.endDate;\n\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\n        System.out.println(&quot;******************************&quot;);\n\n        // If the due date falls within the last 1 week, add the item to the filteredList\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\n            lastWeekList.add(book);\n        }\n    }\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\n}\n</code></pre>\n<p>My code didn't work as I wanted, it never enters the if block. So I used a <code>System.out.println();</code> to see if the values meet the if conditions. Here's my logcat output:</p>\n<pre><code>I/System.out: End Date: 1684159940\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\nI/System.out: End Date: 1683987159\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\n</code></pre>\n<p>Although my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. <code>lastWeekList.size()</code> returns 0.</p>\n<p>I am grateful for your help in advance.</p>\n<p>I was expecting the conditions to be met and these objects to be listed, but the list remains empty.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":24418385,"reputation":731,"user_id":18632985,"display_name":"Hoang Minh Quang FX15045"},"score":0,"creation_date":1684288424,"post_id":76266757,"comment_id":134495163,"body_markdown":"So basically you want a way to compare 2 Columns with Map type?","body":"So basically you want a way to compare 2 Columns with Map type?"},{"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"score":0,"creation_date":1684348928,"post_id":76266757,"comment_id":134506952,"body_markdown":"Yes @HoangMinhQuangFX15045","body":"Yes @HoangMinhQuangFX15045"}],"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348981,"creation_date":1684268055,"question_id":76266757,"body_markdown":"I have two datasets (baseline and dataset) in this Structure:\r\n\r\n```\r\npublic static final StructType SCHEMA =  new StructType()\r\n.add(KEY, StringType, false)\r\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\r\n\r\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\r\nDataset&lt;Row&gt; joined = dataset\r\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\r\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\r\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\r\n.drop(baselineData.col(DATASETS))\r\n.drop(dataset.col(DATASETS));\r\n```\r\n\r\nI couldn&#39;t do datasets_baseline.notEqualTo(datasets_new) because it is a map type.\r\n\r\nIs there any other option to get what I am looking for ?\r\n\r\nTried this :\r\n\r\n```\r\nDataset&lt;Row&gt; newRows = joined     \r\n.select(col(KEY), \r\nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \r\n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\r\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\r\n.select(dataset.col(KEY), dataset.col(DATASETS)); \r\n```\r\nbut different values implies different in order inside the list (map&#39;s value) so this doesn&#39;t work for me.","title":"How to compare two dataset with complex value if they are different or not in spark","body":"<p>I have two datasets (baseline and dataset) in this Structure:</p>\n<pre><code>public static final StructType SCHEMA =  new StructType()\n.add(KEY, StringType, false)\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\n\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\nDataset&lt;Row&gt; joined = dataset\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\n.drop(baselineData.col(DATASETS))\n.drop(dataset.col(DATASETS));\n</code></pre>\n<p>I couldn't do datasets_baseline.notEqualTo(datasets_new) because it is a map type.</p>\n<p>Is there any other option to get what I am looking for ?</p>\n<p>Tried this :</p>\n<pre><code>Dataset&lt;Row&gt; newRows = joined     \n.select(col(KEY), \nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\n.select(dataset.col(KEY), dataset.col(DATASETS)); \n</code></pre>\n<p>but different values implies different in order inside the list (map's value) so this doesn't work for me.</p>\n"},{"tags":["java","javascript","currency","currency-formatting"],"comments":[{"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"score":0,"creation_date":1403235161,"post_id":24319420,"comment_id":37589639,"body_markdown":"http://www.oracle.com/technetwork/java/javase/locales-137662.html","body":"<a href=\"http://www.oracle.com/technetwork/java/javase/locales-137662.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/locales-137662.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1403235611,"creation_date":1403235611,"answer_id":24319555,"question_id":24319420,"body_markdown":"Try this:   \r\n\r\n    NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(&quot;pt_BR&quot;));\r\n\r\n ","title":"Currency Locale- How to get the locale for the different countries","body":"<p>Try this:   </p>\n\n<pre><code>NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(\"pt_BR\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14340865,"reputation":23,"user_id":10359104,"display_name":"Giulio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348824,"creation_date":1684348824,"answer_id":76275263,"question_id":24319420,"body_markdown":"UPDATING 2023 (KOTLIN):\r\n\r\nWhen I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn&#39;t work for me, it&#39;s not formatting correctly and it&#39;s showing an unknown character: \r\n\r\n[![unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)][1]][1]\r\n\r\n\r\nSo I googled and used the following code and it worked:\r\n```\r\nval brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\r\n```\r\n\r\n[![Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sngK5.png\r\n  [2]: https://i.stack.imgur.com/uHulP.png","title":"Currency Locale- How to get the locale for the different countries","body":"<p>UPDATING 2023 (KOTLIN):</p>\n<p>When I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn't work for me, it's not formatting correctly and it's showing an unknown character:</p>\n<p><a href=\"https://i.stack.imgur.com/sngK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sngK5.png\" alt=\"unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)\" /></a></p>\n<p>So I googled and used the following code and it worked:</p>\n<pre><code>val brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uHulP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uHulP.png\" alt=\"Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)\" /></a></p>\n"}],"owner":{"account_id":4623031,"reputation":33,"user_id":3747555,"accept_rate":40,"display_name":"pretzels04"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":825,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":24319555,"answer_count":2,"score":0,"last_activity_date":1684348824,"creation_date":1403234378,"question_id":24319420,"body_markdown":"    public  double showinbrl(double amount, double rate) {\r\n    \t\tdouble amountinbrl = amount * rate; \r\n    \t\tNumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \r\n    \t\tbrl.format(amountinbrl);\r\n    \t\treturn amountinbrl;\r\n    \t}\r\n\r\n\r\nhow to get the locale for the different countries... i cant find locale for brazil..","title":"Currency Locale- How to get the locale for the different countries","body":"<pre><code>public  double showinbrl(double amount, double rate) {\n        double amountinbrl = amount * rate; \n        NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \n        brl.format(amountinbrl);\n        return amountinbrl;\n    }\n</code></pre>\n\n<p>how to get the locale for the different countries... i cant find locale for brazil..</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348574,"post_id":76275013,"comment_id":134506883,"body_markdown":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore.","body":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1684349681,"post_id":76275013,"comment_id":134507085,"body_markdown":"Adding an annotation to include the package in the search path fron https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages did not help. I think I still have to remove the duplicate dependency","body":"Adding an annotation to include the package in the search path fron <a href=\"https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages\" title=\"spring data entities in different packages\">stackoverflow.com/questions/39539508/&hellip;</a> did not help. I think I still have to remove the duplicate dependency"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684739522,"post_id":76275013,"comment_id":134555150,"body_markdown":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation.","body":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation."}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348014,"creation_date":1684346687,"question_id":76275013,"body_markdown":"In relation to [this][1] question, I have encountered a problem. \r\n\r\nI have two projects, a `authlib` and a `server`. `server` is a spring boot 2.4.4 project with java, and `authlib` is a Kotlin project meant to be used as a library to facilitate web requests to the `server`.\r\n\r\nI decided to move the entity classes from the `server` to the `authlib`, so I could use them directly when handling the web requests and didn&#39;t have to define basically duplicate classes. I use `javax.persistence` for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:\r\n\r\n```\r\ndependencies {\r\n    implementation(kotlin(&quot;stdlib&quot;))\r\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\r\n\r\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\r\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\r\n}\r\n```\r\n\r\nThe `server` uses the `authlib` project like this:\r\n\r\n```\r\ndependencies {\r\n    implementation(project(&quot;:authlib&quot;))\r\n\r\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\r\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\r\n\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\r\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\r\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\r\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\r\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\r\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\r\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\r\n\r\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\r\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\r\n\r\n\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\r\n}\r\n```\r\n\r\nThis seemed all fine and dandy to me, except for the fact I had to provide a version number to the `javax.persistence` in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:\r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\r\n\r\nThe following method did not exist:\r\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\r\n\r\nThe method&#39;s class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\r\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n\r\nThe class hierarchy was loaded from the following locations:\r\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\r\n\r\n```\r\n\r\nI understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency `javax.persistence` from my `implementation(project(&quot;:authlib&quot;))`? Or is there some other way to prevent this from happening?\r\n\r\nEDIT:\r\n\r\nI decided to try to include the exact version of the jakarta.persistence api in my `authlib` and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean\r\n with name &#39;entityManagerFactory&#39; defined in class path resource \r\n[org/springframework/boot/autoconfigure/orm/jpa\r\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \r\nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \r\nnet.xxx.auth.entity.UserSession.user references an unknown entity: \r\nnet.xxx.authlib.entity.User\r\n\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr","title":"Remove javax.persistence as duplicate dependency in two part spring boot project","body":"<p>In relation to <a href=\"https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr\">this</a> question, I have encountered a problem.</p>\n<p>I have two projects, a <code>authlib</code> and a <code>server</code>. <code>server</code> is a spring boot 2.4.4 project with java, and <code>authlib</code> is a Kotlin project meant to be used as a library to facilitate web requests to the <code>server</code>.</p>\n<p>I decided to move the entity classes from the <code>server</code> to the <code>authlib</code>, so I could use them directly when handling the web requests and didn't have to define basically duplicate classes. I use <code>javax.persistence</code> for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:</p>\n<pre><code>dependencies {\n    implementation(kotlin(&quot;stdlib&quot;))\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\n\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\n}\n</code></pre>\n<p>The <code>server</code> uses the <code>authlib</code> project like this:</p>\n<pre><code>dependencies {\n    implementation(project(&quot;:authlib&quot;))\n\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\n}\n</code></pre>\n<p>This seemed all fine and dandy to me, except for the fact I had to provide a version number to the <code>javax.persistence</code> in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\n\nThe following method did not exist:\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\n\nThe method's class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n\nThe class hierarchy was loaded from the following locations:\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\n\n</code></pre>\n<p>I understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency <code>javax.persistence</code> from my <code>implementation(project(&quot;:authlib&quot;))</code>? Or is there some other way to prevent this from happening?</p>\n<p>EDIT:</p>\n<p>I decided to try to include the exact version of the jakarta.persistence api in my <code>authlib</code> and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean\n with name 'entityManagerFactory' defined in class path resource \n[org/springframework/boot/autoconfigure/orm/jpa\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \nnet.xxx.auth.entity.UserSession.user references an unknown entity: \nnet.xxx.authlib.entity.User\n\n</code></pre>\n"},{"tags":["java","github","jgit"],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684347936,"creation_date":1684342111,"question_id":76274433,"body_markdown":"My program needs to add files to a github repo. I&#39;ve looked into JGit, but it&#39;s been extremely confusing. I just want to:\r\nGive the program the url of my repository.\r\nCreate a file with a certain name with some contents.\r\nCommit the file to the repository.\r\n\r\nHow do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn&#39;t even get the clone command to work!","title":"How to create a file in an existing github repo (that is on the github website; it&#39;s not local!) using a Java program?","body":"<p>My program needs to add files to a github repo. I've looked into JGit, but it's been extremely confusing. I just want to:\nGive the program the url of my repository.\nCreate a file with a certain name with some contents.\nCommit the file to the repository.</p>\n<p>How do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn't even get the clone command to work!</p>\n"},{"tags":["java","qr-code","zxing"],"answers":[{"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670505845,"creation_date":1670505845,"answer_id":74730965,"question_id":74729019,"body_markdown":"QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at [this StackOverflow answer](https://stackoverflow.com/a/11968724/5736633) to see how this can be specified in Z-Xing.","title":"Different pattern between qrcode image","body":"<p>QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at <a href=\"https://stackoverflow.com/a/11968724/5736633\">this StackOverflow answer</a> to see how this can be specified in Z-Xing.</p>\n"},{"tags":[],"owner":{"account_id":461214,"reputation":73,"user_id":3814773,"display_name":"oki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670545504,"creation_date":1670545504,"answer_id":74737723,"question_id":74729019,"body_markdown":"If I checked your expected QR Code have size 41x41 modules which is using version 6.\r\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\r\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\r\nI suggest you to try to compress your data to lower your size of data.\r\n[Version 6 Size Description source: https://www.qrcode.com/en/about/version.html][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YVrGQ.png","title":"Different pattern between qrcode image","body":"<p>If I checked your expected QR Code have size 41x41 modules which is using version 6.\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\nI suggest you to try to compress your data to lower your size of data.\n<a href=\"https://i.stack.imgur.com/YVrGQ.png\" rel=\"nofollow noreferrer\">Version 6 Size Description source: https://www.qrcode.com/en/about/version.html</a></p>\n"}],"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684347425,"creation_date":1670496211,"question_id":74729019,"body_markdown":"I need to implement an old system that doesn&#39;t have source code.\r\nThe system prints labels with the following qrcode output: (QR version 6 41x41, **alignment patterns** only 1)\r\n\r\n[![Version 1][1]][1]\r\n\r\nI tried to make the program in Java using the Zxing library.\r\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,**alignment patterns** = 6)\r\n\r\n[![Version 2][2]][2]\r\n\r\nEven if both reading scanners will produce the same output and character length (154@char)\r\n\r\n    &quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\r\n\r\nMaybe, it seems related to the qr lower version.\r\nI tried to make a lower qr.version but got the following error:\r\n\r\n    com.google.zxing.WriterException: Data too big for requested version\r\n        at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\r\n        at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\r\n\r\n\r\nCan anyone help me how to make qrcode output same as version 1 (**alignment patterns** only 1) ?\r\n\r\nThank you for your support.\r\n\r\n  [1]: https://i.stack.imgur.com/9OJv0.png?s=128\r\n  [2]: https://i.stack.imgur.com/z1PTw.png?s=175","title":"Different pattern between qrcode image","body":"<p>I need to implement an old system that doesn't have source code.\nThe system prints labels with the following qrcode output: (QR version 6 41x41, <strong>alignment patterns</strong> only 1)</p>\n<p><a href=\"https://i.stack.imgur.com/9OJv0.png?s=128\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9OJv0.png?s=128\" alt=\"Version 1\" /></a></p>\n<p>I tried to make the program in Java using the Zxing library.\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,<strong>alignment patterns</strong> = 6)</p>\n<p><a href=\"https://i.stack.imgur.com/z1PTw.png?s=175\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z1PTw.png?s=175\" alt=\"Version 2\" /></a></p>\n<p>Even if both reading scanners will produce the same output and character length (154@char)</p>\n<pre><code>&quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\n</code></pre>\n<p>Maybe, it seems related to the qr lower version.\nI tried to make a lower qr.version but got the following error:</p>\n<pre><code>com.google.zxing.WriterException: Data too big for requested version\n    at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\n    at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\n</code></pre>\n<p>Can anyone help me how to make qrcode output same as version 1 (<strong>alignment patterns</strong> only 1) ?</p>\n<p>Thank you for your support.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":2,"up_vote_count":71,"is_accepted":true,"score":69,"last_activity_date":1343869006,"creation_date":1311483747,"answer_id":6805035,"question_id":6805028,"body_markdown":"In java, use this:\r\n\r\n    str = str.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n\r\nNote that the regex version of replace, ie [`replaceAll()`][1], is not required here; [`replace()`][2] still replaces all occurrences of the search term, but it searches for *literal* Strings, not regex matches.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29","title":"How to replace backward slash to forward slash using java?","body":"<p>In java, use this:</p>\n\n<pre><code>str = str.replace(\"\\\\\", \"/\");\n</code></pre>\n\n<p>Note that the regex version of replace, ie <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>replaceAll()</code></a>, is not required here; <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\"><code>replace()</code></a> still replaces all occurrences of the search term, but it searches for <em>literal</em> Strings, not regex matches.</p>\n"},{"tags":[],"owner":{"account_id":403973,"reputation":140174,"user_id":772035,"accept_rate":95,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1311484288,"creation_date":1311483909,"answer_id":6805045,"question_id":6805028,"body_markdown":"If you have:\r\n\r\n`String s = &quot;c:\\\\upload\\\\date\\\\csv\\\\sample.csv&quot;;`\r\n\r\nIn Java, you can just use:\r\n\r\n`s = s.replace(&quot;\\\\&quot;, &quot;/&quot;);`\r\n\r\nWhich will make s equal to:\r\n\r\n`c:/upload/date/csv/sample.csv`","title":"How to replace backward slash to forward slash using java?","body":"<p>If you have:</p>\n\n<p><code>String s = \"c:\\\\upload\\\\date\\\\csv\\\\sample.csv\";</code></p>\n\n<p>In Java, you can just use:</p>\n\n<p><code>s = s.replace(\"\\\\\", \"/\");</code></p>\n\n<p>Which will make s equal to:</p>\n\n<p><code>c:/upload/date/csv/sample.csv</code></p>\n"},{"tags":[],"owner":{"account_id":48093,"reputation":2175,"user_id":142716,"display_name":"Raze"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1311484710,"creation_date":1311484710,"answer_id":6805072,"question_id":6805028,"body_markdown":"The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won&#39;t have a noticeable speed difference, its better to do such optimisations where possible.\r\n\r\n    String replacedStr = str.replace(&#39;\\\\&#39;, &#39;/&#39;);","title":"How to replace backward slash to forward slash using java?","body":"<p>The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won't have a noticeable speed difference, its better to do such optimisations where possible.</p>\n\n<pre><code>String replacedStr = str.replace('\\\\', '/');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7113794,"reputation":141,"user_id":5440798,"display_name":"Vibhu Vikram Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684347353,"creation_date":1684347353,"answer_id":76275091,"question_id":6805028,"body_markdown":"For double back slash (&quot;\\\\\\\\&quot;)\r\n\r\nFor Java you can use string.replaceAll(&quot;\\\\\\\\\\\\\\\\&quot;,&quot;/&quot;)\r\n\r\n&amp;\r\n\r\nFor Kotlin you can use string.replace(&quot;\\\\\\\\\\\\\\\\&quot;.toRegex(),&quot;/&quot;)","title":"How to replace backward slash to forward slash using java?","body":"<p>For double back slash (&quot;\\\\&quot;)</p>\n<p>For Java you can use string.replaceAll(&quot;\\\\\\\\&quot;,&quot;/&quot;)</p>\n<p>&amp;</p>\n<p>For Kotlin you can use string.replace(&quot;\\\\\\\\&quot;.toRegex(),&quot;/&quot;)</p>\n"}],"owner":{"account_id":186312,"reputation":9244,"user_id":423620,"accept_rate":88,"display_name":"Sameek Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104274,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":6805035,"answer_count":4,"score":37,"last_activity_date":1684347353,"creation_date":1311483642,"question_id":6805028,"body_markdown":"I&#39;m importing a CSV file to MySQL database. This can be done using `java.mysql` support for forward slash in file path. If user gives the path \r\n\r\n    c:\\upload\\date\\csv\\sample.csv\r\n\r\nMySQL doesn&#39;t support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:\r\n\r\n      c:/upload/date/csv/sample.csv\r\n\r\nHow is that done?","title":"How to replace backward slash to forward slash using java?","body":"<p>I'm importing a CSV file to MySQL database. This can be done using <code>java.mysql</code> support for forward slash in file path. If user gives the path </p>\n\n<pre><code>c:\\upload\\date\\csv\\sample.csv\n</code></pre>\n\n<p>MySQL doesn't support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:</p>\n\n<pre><code>  c:/upload/date/csv/sample.csv\n</code></pre>\n\n<p>How is that done?</p>\n"},{"tags":["java","arrays","oracle","jdbc","plsql"],"answers":[{"tags":[],"owner":{"account_id":28606093,"reputation":1,"user_id":21902007,"display_name":"Dan Sievewright"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684346612,"creation_date":1684338732,"answer_id":76273977,"question_id":56634669,"body_markdown":"That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.  \r\n\r\n```plsql\r\n    create or replace package pkg_test\r\n    as \r\n        type t_indices is table of pls_integer index by pls_integer;\r\n    end;\r\n```\r\n\r\nThen the call would go through something like\r\n\r\n```java\r\n    void exampleCall() {\r\n\r\n        // set up connection\r\n\r\n        //inputs\r\n        int[] values = {1, 2, 3};\r\n  \r\n        // I&#39;m assuming you&#39;d probably just call a procedure instead of \r\n        // running an anonymous block, but idea is the same.\r\n        OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare \\n&quot; +\r\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n\r\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\r\n\r\n        procin.execute();\r\n    }\r\n```\r\n\r\nI will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a `Map&lt;Integer, Integer&gt;` and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use `Map&lt;String, Integer&gt;` as your values.\r\n\r\nHere&#39;s the docs for more details\r\nhttps://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html","title":"Pass array of int from Java to Oracle PlSql","body":"<p>That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    create or replace package pkg_test\n    as \n        type t_indices is table of pls_integer index by pls_integer;\n    end;\n</code></pre>\n<p>Then the call would go through something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void exampleCall() {\n\n        // set up connection\n\n        //inputs\n        int[] values = {1, 2, 3};\n  \n        // I'm assuming you'd probably just call a procedure instead of \n        // running an anonymous block, but idea is the same.\n        OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(&quot;declare \\n&quot; +\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\n                           &quot;begin\\n&quot; +\n                           &quot;  a_indices := ?;\\n&quot; +\n                           &quot;end;&quot;\n                          );\n\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\n\n        procin.execute();\n    }\n</code></pre>\n<p>I will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a <code>Map&lt;Integer, Integer&gt;</code> and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use <code>Map&lt;String, Integer&gt;</code> as your values.</p>\n<p>Here's the docs for more details\n<a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html</a></p>\n"}],"owner":{"account_id":16150634,"reputation":21,"user_id":11659178,"display_name":"Arjen van Eerde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684346612,"creation_date":1560786059,"question_id":56634669,"body_markdown":"When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it&#39;s not working.\r\n\r\nI&#39;m using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.\r\n\r\n```java\r\n  @Test\r\n  void flush() {\r\n    try {\r\n      final Driver     oraDriver    = new OracleDriver();\r\n      System.out.println(&quot;Driver Major version is &quot;+oraDriver.getMajorVersion());\r\n      final Properties myProperties = new Properties();\r\n      myProperties.setProperty(&quot;user&quot;, &quot;kafka&quot;);\r\n      myProperties.setProperty(&quot;password&quot;, &quot;kafka&quot;);\r\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\r\n      OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare type t_indices is table of pls_integer index by pls_integer;\\n&quot; +\r\n                           &quot;a_indices   t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n// Associative Array bind value\r\n      int[] values = {1, 2, 3};\r\n\r\n// maximum length of the Associative Array bind value. This\r\n// value defines the maximum possible &quot;currentLen&quot; for batch\r\n// updates. For standalone binds, &quot;maxLen&quot; should be the\r\n// same as &quot;currentLen&quot;.\r\n      int maxLen = values.length;\r\n\r\n// actual size of the Associative Array bind value\r\n      int currentLen = values.length;\r\n\r\n// Associative Array element type\r\n      int elemSqlType = OracleTypes.NUMBER;\r\n\r\n// Associative Array element length in case the element type\r\n// is CHAR, VARCHAR or RAW. This value is ignored for other\r\n// types.\r\n      int elemMaxLen = 0;\r\n\r\n// set the value\r\n      procin.setPlsqlIndexTable(1, values,\r\n                                maxLen, currentLen,\r\n                                elemSqlType, elemMaxLen);\r\n\r\n// execute the call\r\n      procin.execute();\r\n    }\r\n    catch (Exception e) {\r\n      throw new ConnectException(e);\r\n    }\r\n  }\r\n```\r\nThis is based on the example in, chapter &quot;Accessing PL/SQL Associative Arrays&quot;. https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179 .\r\n\r\nThe output / error text is below. I expected no error. What is the solution?\r\n```text\r\nC:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\r\nDriver Major version is 18\r\n\r\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\r\n\tat oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\r\n\t... 51 more\r\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := :1 ;\r\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := ?;\r\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\r\n\t... 66 more\r\n\r\n\r\nProcess finished with exit code -1\r\n```","title":"Pass array of int from Java to Oracle PlSql","body":"<p>When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it's not working.</p>\n\n<p>I'm using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void flush() {\n    try {\n      final Driver     oraDriver    = new OracleDriver();\n      System.out.println(\"Driver Major version is \"+oraDriver.getMajorVersion());\n      final Properties myProperties = new Properties();\n      myProperties.setProperty(\"user\", \"kafka\");\n      myProperties.setProperty(\"password\", \"kafka\");\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\n      OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(\"declare type t_indices is table of pls_integer index by pls_integer;\\n\" +\n                           \"a_indices   t_indices;\\n\" +\n                           \"begin\\n\" +\n                           \"  a_indices := ?;\\n\" +\n                           \"end;\"\n                          );\n// Associative Array bind value\n      int[] values = {1, 2, 3};\n\n// maximum length of the Associative Array bind value. This\n// value defines the maximum possible \"currentLen\" for batch\n// updates. For standalone binds, \"maxLen\" should be the\n// same as \"currentLen\".\n      int maxLen = values.length;\n\n// actual size of the Associative Array bind value\n      int currentLen = values.length;\n\n// Associative Array element type\n      int elemSqlType = OracleTypes.NUMBER;\n\n// Associative Array element length in case the element type\n// is CHAR, VARCHAR or RAW. This value is ignored for other\n// types.\n      int elemMaxLen = 0;\n\n// set the value\n      procin.setPlsqlIndexTable(1, values,\n                                maxLen, currentLen,\n                                elemSqlType, elemMaxLen);\n\n// execute the call\n      procin.execute();\n    }\n    catch (Exception e) {\n      throw new ConnectException(e);\n    }\n  }\n</code></pre>\n\n<p>This is based on the example in, chapter \"Accessing PL/SQL Associative Arrays\". <a href=\"https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179</a> .</p>\n\n<p>The output / error text is below. I expected no error. What is the solution?</p>\n\n<pre><code>C:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\nDriver Major version is 18\n\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\n    at oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\n    at oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\n    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\n    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\n    ... 51 more\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := :1 ;\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := ?;\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\n    ... 66 more\n\n\nProcess finished with exit code -1\n</code></pre>\n"},{"tags":["java","docker","gradle","apache-kafka"],"comments":[{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":0,"creation_date":1684322563,"post_id":76271198,"comment_id":134500671,"body_markdown":"Can you try running without Docker? Do you have the same issue?","body":"Can you try running without Docker? Do you have the same issue?"},{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":1,"creation_date":1684322630,"post_id":76271198,"comment_id":134500688,"body_markdown":"I don&#39;t understand why you&#39;re using `RUN bash -c &#39;touch /parallel.jar&#39;`. What are you aiming for?","body":"I don&#39;t understand why you&#39;re using <code>RUN bash -c &#39;touch &#47;parallel.jar&#39;</code>. What are you aiming for?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684345964,"creation_date":1684345964,"answer_id":76274929,"question_id":76271198,"body_markdown":"Gradle doesn&#39;t include dependencies, by default. You&#39;d get the same error when running `java jar` outside of the container.\r\n\r\nYou need to use shadow plugin to get dependencies packaged in your JAR.  \r\n\r\nAlternatively, don&#39;t write a Dockerfile manually... Use `jib-gradle-plugin`. Plus, it&#39;ll create a more optimized Docker image, which doesn&#39;t create an Uber JAR like the shadow plugin would. ","title":"Error while running the docker image | JNI error","body":"<p>Gradle doesn't include dependencies, by default. You'd get the same error when running <code>java jar</code> outside of the container.</p>\n<p>You need to use shadow plugin to get dependencies packaged in your JAR.</p>\n<p>Alternatively, don't write a Dockerfile manually... Use <code>jib-gradle-plugin</code>. Plus, it'll create a more optimized Docker image, which doesn't create an Uber JAR like the shadow plugin would.</p>\n"}],"owner":{"account_id":1889504,"reputation":2560,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76274929,"answer_count":1,"score":0,"last_activity_date":1684345964,"creation_date":1684319994,"question_id":76271198,"body_markdown":"I am getting an error while running a docker image. I have created a core java application using gradle.\r\n\r\nusing `docker build` command to create the docker image and while running the docker image I am getting the following error\r\n\r\n    Error: A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\r\n            at java.lang.Class.getDeclaredMethods0(Native Method)\r\n            at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n            at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n            at java.lang.Class.getMethod0(Class.java:3018)\r\n            at java.lang.Class.getMethod(Class.java:1784)\r\n            at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\r\n            at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            ... 7 more\r\n\r\nI can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.\r\n\r\nHere is the dockerfile\r\n\r\n    FROM openjdk:8\r\n    ADD build/libs/*.jar parallel.jar\r\n    \r\n    RUN bash -c &#39;touch /parallel.jar&#39;\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\r\n\r\nBefore I ran the `docker build` command, I made sure to run the `gradle clean build` command.\r\n\r\nHere are the dependencies I have used in `build.gradle`\r\n\r\n        implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\r\n        implementation &quot;org.apache.avro:avro:1.11.1&quot;\r\n        implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\r\n        implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\r\n        implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\r\n        implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\r\n        implementation &quot;me.tongfei:progressbar:0.9.3&quot;\r\n        implementation &#39;org.awaitility:awaitility:4.2.0&#39;\r\n        implementation(&quot;log4j:log4j:1.2.17&quot;)\r\n\r\n","title":"Error while running the docker image | JNI error","body":"<p>I am getting an error while running a docker image. I have created a core java application using gradle.</p>\n<p>using <code>docker build</code> command to create the docker image and while running the docker image I am getting the following error</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n        at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n        at java.lang.Class.getMethod0(Class.java:3018)\n        at java.lang.Class.getMethod(Class.java:1784)\n        at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\nCaused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 7 more\n</code></pre>\n<p>I can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.</p>\n<p>Here is the dockerfile</p>\n<pre><code>FROM openjdk:8\nADD build/libs/*.jar parallel.jar\n\nRUN bash -c 'touch /parallel.jar'\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\n</code></pre>\n<p>Before I ran the <code>docker build</code> command, I made sure to run the <code>gradle clean build</code> command.</p>\n<p>Here are the dependencies I have used in <code>build.gradle</code></p>\n<pre><code>    implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\n    implementation &quot;org.apache.avro:avro:1.11.1&quot;\n    implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\n    implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\n    implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\n    implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\n    implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\n    implementation &quot;me.tongfei:progressbar:0.9.3&quot;\n    implementation 'org.awaitility:awaitility:4.2.0'\n    implementation(&quot;log4j:log4j:1.2.17&quot;)\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1684235641,"post_id":76262339,"comment_id":134485025,"body_markdown":"What queries does it fire ? Can you provide a bit more information ?","body":"What queries does it fire ? Can you provide a bit more information ?"},{"owner":{"account_id":3701688,"reputation":3358,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1684235779,"post_id":76262339,"comment_id":134485053,"body_markdown":"`userRepository.findById(userId)` should only execute 1 query - something like `SELECT * FROM table WHERE id = userId`.","body":"<code>userRepository.findById(userId)</code> should only execute 1 query - something like <code>SELECT * FROM table WHERE id = userId</code>."},{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1684235957,"post_id":76262339,"comment_id":134485089,"body_markdown":"please update question with query logs.","body":"please update question with query logs."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684237444,"post_id":76262339,"comment_id":134485411,"body_markdown":"`findById` isn&#39;t the problem, your mapping is the problem and the fact that you are using `Lombok`. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found [here](https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/). If you want to use lombok only use `@Getter`/`@Setter` but not `@Data`.","body":"<code>findById</code> isn&#39;t the problem, your mapping is the problem and the fact that you are using <code>Lombok</code>. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found <a href=\"https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">here</a>. If you want to use lombok only use <code>@Getter</code>/<code>@Setter</code> but not <code>@Data</code>."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1684257685,"post_id":76262339,"comment_id":134490932,"body_markdown":"Please provide the generated SQL and `SHOW CREATE TABLE`.","body":"Please provide the generated SQL and <code>SHOW CREATE TABLE</code>."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345909,"post_id":76262339,"comment_id":134506363,"body_markdown":"Please show the code that is using this (so the controller, service etc.).","body":"Please show the code that is using this (so the controller, service etc.)."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345689,"creation_date":1684238253,"answer_id":76262778,"question_id":76262339,"body_markdown":"First stop using `@Data` (or better Lombok all together) with JPA entities. When using `@Data` it will generate an `equals`/`hashCode`/`toString` method including all collections (which are lazy) in your entity. (I wrote [a blog][1] about it about 4 years ago and yet we still haven&#39;t learned). \r\n\r\nThose `hashCode` and `equals` method are important as those are used to determine if an object is already in the cache or not. Now to calculate the `hashCode` what do you think will happen.... Exactly queries, queries and some more queries. \r\n\r\nI would suggest to create a `BaseEntity` which include a regular `hashCode`, `equals` and basic `toString` method. Then let all your entities extend this base class. \r\n\r\nNext replace the `@Data` with only `@Getter`/`@Setter` to generate the getters/setters. \r\n\r\n```java\r\n@MappedSuperclass\r\n@Getter\r\npublic abstract BaseEntity {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return getClass().hashCode();\r\n  }\r\n  \r\n  @Override\r\n  public boolean equals(Object o) {\r\n    if (this == o) return true;\r\n \r\n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\r\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\r\n  }  \r\n}\r\n```\r\n\r\nNow for example let your `Comment` class extend this and drop the usage of `@Data`. \r\n\r\n```\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment extends BaseEntity {\r\n\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\nThis should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the `Issue` in the `Comment` (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.\r\n\r\n[1]: https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/","title":"Too many queries problem with JPA using Mysql","body":"<p>First stop using <code>@Data</code> (or better Lombok all together) with JPA entities. When using <code>@Data</code> it will generate an <code>equals</code>/<code>hashCode</code>/<code>toString</code> method including all collections (which are lazy) in your entity. (I wrote <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">a blog</a> about it about 4 years ago and yet we still haven't learned).</p>\n<p>Those <code>hashCode</code> and <code>equals</code> method are important as those are used to determine if an object is already in the cache or not. Now to calculate the <code>hashCode</code> what do you think will happen.... Exactly queries, queries and some more queries.</p>\n<p>I would suggest to create a <code>BaseEntity</code> which include a regular <code>hashCode</code>, <code>equals</code> and basic <code>toString</code> method. Then let all your entities extend this base class.</p>\n<p>Next replace the <code>@Data</code> with only <code>@Getter</code>/<code>@Setter</code> to generate the getters/setters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@Getter\npublic abstract BaseEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @Override\n  public int hashCode() {\n    return getClass().hashCode();\n  }\n  \n  @Override\n  public boolean equals(Object o) {\n    if (this == o) return true;\n \n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\n    }\n    return false;\n  }\n\n  @Override\n  public String toString() {\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\n  }  \n}\n</code></pre>\n<p>Now for example let your <code>Comment</code> class extend this and drop the usage of <code>@Data</code>.</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@Setter\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment extends BaseEntity {\n\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>This should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the <code>Issue</code> in the <code>Comment</code> (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.</p>\n"}],"owner":{"account_id":28611909,"reputation":3,"user_id":21906718,"display_name":"Codephetamine"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76262778,"answer_count":1,"score":0,"last_activity_date":1684345689,"creation_date":1684235441,"question_id":76262339,"body_markdown":"I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:\r\n\r\nUser Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\n@Builder\r\n@Entity\r\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\r\n@JsonIgnoreProperties({&quot;comments&quot;})\r\npublic class User implements UserDetails {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @Email(message = &quot;Not a valid email&quot;)\r\n    private String email;\r\n\r\n    @NotEmpty\r\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\r\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\r\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Role role;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;,\r\n            cascade = CascadeType.ALL)\r\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\r\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;voters&quot;)\r\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;members&quot;)\r\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\r\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\r\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nIssue Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name=&quot;issue&quot;)\r\npublic class Issue {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String title;\r\n    private String description;\r\n    private LocalDate dateCreated;\r\n    private boolean isOpen;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;community_id&quot;)\r\n    private Community community;\r\n\r\n}\r\n```\r\n\r\n\r\nComment Entity\r\n```\r\n\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\n\r\nRole Enum\r\n\r\n```\r\npublic enum Role {\r\n    CUSTOMER(&quot;CUSTOMER&quot;),\r\n    EXPERT(&quot;EXPERT&quot;),\r\n    ADMIN(&quot;ADMIN&quot;);\r\n\r\n    private String role;\r\n\r\n    Role(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getRoleName() {\r\n        return role;\r\n    }\r\n}\r\n```\r\n\r\nWhen I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :\r\n\r\n    2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\r\n    2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \r\n\r\n**I am expecting just one or two select queries.**\r\n","title":"Too many queries problem with JPA using Mysql","body":"<p>I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:</p>\n<p>User Entity</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Builder\n@Entity\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\n@JsonIgnoreProperties({&quot;comments&quot;})\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Email(message = &quot;Not a valid email&quot;)\n    private String email;\n\n    @NotEmpty\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @OneToMany(mappedBy = &quot;user&quot;,\n            cascade = CascadeType.ALL)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;voters&quot;)\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;members&quot;)\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p>Issue Entity</p>\n<pre><code>@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name=&quot;issue&quot;)\npublic class Issue {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    private String description;\n    private LocalDate dateCreated;\n    private boolean isOpen;\n\n    @ManyToOne\n    private User user;\n\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\n\n    @ManyToOne\n    @JoinColumn(name = &quot;community_id&quot;)\n    private Community community;\n\n}\n</code></pre>\n<p>Comment Entity</p>\n<pre><code>\n@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>Role Enum</p>\n<pre><code>public enum Role {\n    CUSTOMER(&quot;CUSTOMER&quot;),\n    EXPERT(&quot;EXPERT&quot;),\n    ADMIN(&quot;ADMIN&quot;);\n\n    private String role;\n\n    Role(String role) {\n        this.role = role;\n    }\n\n    public String getRoleName() {\n        return role;\n    }\n}\n</code></pre>\n<p>When I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :</p>\n<pre><code>2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\n2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \n</code></pre>\n<p><strong>I am expecting just one or two select queries.</strong></p>\n"},{"tags":["java","minecraft-fabric"],"answers":[{"tags":[],"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345514,"creation_date":1684345514,"answer_id":76274875,"question_id":76138601,"body_markdown":"You can&#39;t make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.\r\n\r\nFor example, the game only calls your block&#39;s `canReplace` function when *your block* is replaced. It doesn&#39;t call it if the player replaces the air block on top of your block because that&#39;s not your block. So you have to put one of your blocks in that spot and not try to pretend there&#39;s one when there isn&#39;t.\r\n\r\nYour block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>You can't make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.</p>\n<p>For example, the game only calls your block's <code>canReplace</code> function when <em>your block</em> is replaced. It doesn't call it if the player replaces the air block on top of your block because that's not your block. So you have to put one of your blocks in that spot and not try to pretend there's one when there isn't.</p>\n<p>Your block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.</p>\n"}],"owner":{"account_id":17747824,"reputation":15,"user_id":12886716,"display_name":"Captain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76274875,"answer_count":1,"score":1,"last_activity_date":1684345514,"creation_date":1682805032,"question_id":76138601,"body_markdown":"Thank you for any help in advance and sorry if this way to simple.\r\n\r\nVersioning: MC 1.19.3, Fabric\r\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half\r\n\r\nSo i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it&#39;s still rendering only and not interactable/eats Blocks when placed from above.\r\n\r\nI have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue. \r\n\r\nMy current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.\r\n\r\n\r\n```\r\npublic class VendingMachineBlock extends Block {\r\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\r\n\r\n    public VendingMachineBlock() {\r\n        super(Settings.of(Material.METAL)\r\n                .nonOpaque()\r\n                .strength(4.0f)\r\n                .requiresTool()\r\n                .sounds(BlockSoundGroup.METAL)\r\n        );\r\n    }\r\n\r\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    @Override\r\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\r\n        BlockPos pos = context.getBlockPos();\r\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\r\n            // Prevent block placement in the top part of the VendingMachineBlock\r\n            return false;\r\n        }\r\n        return super.canReplace(state, context);\r\n    }\r\n\r\n    @Override\r\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\r\n        double relativeHitY = hit.getPos().y - pos.getY();\r\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\r\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\r\n            if (!world.isClient) {\r\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\r\n            }\r\n            return ActionResult.SUCCESS;\r\n        }\r\n        return super.onUse(state, world, pos, player, hand, hit);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.\r\n\r\nThanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.\r\n\r\nAll the best,\r\nCap","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>Thank you for any help in advance and sorry if this way to simple.</p>\n<p>Versioning: MC 1.19.3, Fabric\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half</p>\n<p>So i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it's still rendering only and not interactable/eats Blocks when placed from above.</p>\n<p>I have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue.</p>\n<p>My current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.</p>\n<pre><code>public class VendingMachineBlock extends Block {\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\n\n    public VendingMachineBlock() {\n        super(Settings.of(Material.METAL)\n                .nonOpaque()\n                .strength(4.0f)\n                .requiresTool()\n                .sounds(BlockSoundGroup.METAL)\n        );\n    }\n\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    @Override\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\n        BlockPos pos = context.getBlockPos();\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\n            // Prevent block placement in the top part of the VendingMachineBlock\n            return false;\n        }\n        return super.canReplace(state, context);\n    }\n\n    @Override\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\n        double relativeHitY = hit.getPos().y - pos.getY();\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\n            if (!world.isClient) {\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\n            }\n            return ActionResult.SUCCESS;\n        }\n        return super.onUse(state, world, pos, player, hand, hit);\n    }\n}\n</code></pre>\n<p>I have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.</p>\n<p>Thanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.</p>\n<p>All the best,\nCap</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"score":0,"creation_date":1649570209,"post_id":71813844,"comment_id":126906088,"body_markdown":"why you insert `XHeaderAuthenticationFilter` one time using `FilterRegistrationBean` and another time using `addFilterBefore`?","body":"why you insert <code>XHeaderAuthenticationFilter</code> one time using <code>FilterRegistrationBean</code> and another time using <code>addFilterBefore</code>?"},{"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"score":0,"creation_date":1649570443,"post_id":71813844,"comment_id":126906118,"body_markdown":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times.","body":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times."}],"answers":[{"tags":[],"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649571126,"creation_date":1649570793,"answer_id":71814175,"question_id":71813844,"body_markdown":"The way you register `XHeaderAuthenticationFilter` in `FilterRegistrationBean` causes the problem because you yourself create the `XHeaderAuthenticationFilter` with `new` not `Spring` with all resolving DI stuff. change your code like:\r\n\r\n    @Autowired\r\n    XHeaderAuthenticationFilter xHeaderAuthenticationFilter;\r\n    \r\n    @Bean\r\n    public FilterRegistrationBean filterRegistrationBean() {\r\n    \tFilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    \tregistrationBean.setFilter(xHeaderAuthenticationFilter);\r\n    \treturn registrationBean;\r\n    }\r\n\r\nSame applies if you want to register `XHeaderAuthenticationFilter` using `addFilterBefore`","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>The way you register <code>XHeaderAuthenticationFilter</code> in <code>FilterRegistrationBean</code> causes the problem because you yourself create the <code>XHeaderAuthenticationFilter</code> with <code>new</code> not <code>Spring</code> with all resolving DI stuff. change your code like:</p>\n<pre><code>@Autowired\nXHeaderAuthenticationFilter xHeaderAuthenticationFilter;\n\n@Bean\npublic FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(xHeaderAuthenticationFilter);\n    return registrationBean;\n}\n</code></pre>\n<p>Same applies if you want to register <code>XHeaderAuthenticationFilter</code> using <code>addFilterBefore</code></p>\n"},{"tags":[],"owner":{"account_id":18253860,"reputation":418,"user_id":13288265,"display_name":"jksevend"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684345454,"creation_date":1684345454,"answer_id":76274861,"question_id":71813844,"body_markdown":"I don&#39;t know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean. \r\n\r\nWe had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I don't know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean.</p>\n<p>We had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.</p>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1398,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":71814175,"answer_count":2,"score":2,"last_activity_date":1684345454,"creation_date":1649566262,"question_id":71813844,"body_markdown":"I&#39;m not being able to inject beans into my `OncePerRequestFilter`. Here&#39;s the `XHeaderAuthenticationFilter`:\r\n```java\r\n\r\n@Component\r\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n  public XHeaderAuthenticationFilter() {\r\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n  }\r\n\r\n  @Autowired private JwtUtils jwtUtils; // null\r\n  @Autowired private UserService userService; // null\r\n\r\n  @Override\r\n  @SneakyThrows\r\n  protected void doFilterInternal(\r\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\r\n\r\n    String path = request.getRequestURI();\r\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\r\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\r\n      filterChain.doFilter(request, response);\r\n      return;\r\n    }\r\n\r\n    String jwt = parseJwt(request);\r\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\r\n\r\n    // ...\r\n\r\n    filterChain.doFilter(request, response);\r\n  }\r\n}\r\n\r\n```\r\nAnd here the registration part:\r\n```java\r\n  @Bean\r\n  public FilterRegistrationBean filterRegistrationBean() {\r\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\r\n    registrationBean.setEnabled(false);\r\n    return registrationBean;\r\n  }\r\n```\r\nI set `enabled` to false as the filter was getting called multiple times. I&#39;m new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:\r\n```java\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception {\r\n    http.cors()\r\n        .and()\r\n        .csrf()\r\n        .disable()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/getToken&quot;)\r\n        .permitAll()\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .exceptionHandling()\r\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\r\n        .and()\r\n        .addFilterBefore(\r\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n  }\r\n```\r\n\r\nThere are a lot of fixes for this issue but none worked for me. I don&#39;t know where I&#39;m going wrong.\r\n\r\n## Update 1 ##\r\n\r\nIncluding JwtUtils:\r\n```java\r\n@Component\r\npublic class JwtUtils {\r\n\r\n  @Value(&quot;${security.jwtSecret}&quot;)\r\n  private String jwtSecret;\r\n\r\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\r\n  private int jwtExpirationMs;\r\n\r\n  public String getJWTToken(String username) {}\r\n\r\n  public boolean validateJwtToken(String authToken) {}\r\n\r\n  public Claims getAllClaimsFromToken(String token) {}\r\n}\r\n\r\n```\r\nand UserService:\r\n```java\r\n@Service\r\npublic class UserServiceImpl implements UserService {\r\n\r\n  @Autowired private UserRepository userRepository;\r\n\r\n  @Override\r\n  public User saveUser(UserModel userModel) {}\r\n\r\n  @Override\r\n  public UserModel findUserByEmail(String email) {}\r\n\r\n  @Override\r\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\r\n\r\n  @Override\r\n  public UserModel deleteUser(String email) {}\r\n\r\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\r\n\r\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\r\n```","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I'm not being able to inject beans into my <code>OncePerRequestFilter</code>. Here's the <code>XHeaderAuthenticationFilter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Component\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\n\n  public XHeaderAuthenticationFilter() {\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n  }\n\n  @Autowired private JwtUtils jwtUtils; // null\n  @Autowired private UserService userService; // null\n\n  @Override\n  @SneakyThrows\n  protected void doFilterInternal(\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n\n    String path = request.getRequestURI();\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\n      filterChain.doFilter(request, response);\n      return;\n    }\n\n    String jwt = parseJwt(request);\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\n\n    // ...\n\n    filterChain.doFilter(request, response);\n  }\n}\n\n</code></pre>\n<p>And here the registration part:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Bean\n  public FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\n    registrationBean.setEnabled(false);\n    return registrationBean;\n  }\n</code></pre>\n<p>I set <code>enabled</code> to false as the filter was getting called multiple times. I'm new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.cors()\n        .and()\n        .csrf()\n        .disable()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n        .antMatchers(&quot;/getToken&quot;)\n        .permitAll()\n        .anyRequest()\n        .authenticated()\n        .and()\n        .exceptionHandling()\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n        .and()\n        .addFilterBefore(\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n  }\n</code></pre>\n<p>There are a lot of fixes for this issue but none worked for me. I don't know where I'm going wrong.</p>\n<h2>Update 1</h2>\n<p>Including JwtUtils:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtUtils {\n\n  @Value(&quot;${security.jwtSecret}&quot;)\n  private String jwtSecret;\n\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\n  private int jwtExpirationMs;\n\n  public String getJWTToken(String username) {}\n\n  public boolean validateJwtToken(String authToken) {}\n\n  public Claims getAllClaimsFromToken(String token) {}\n}\n\n</code></pre>\n<p>and UserService:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserServiceImpl implements UserService {\n\n  @Autowired private UserRepository userRepository;\n\n  @Override\n  public User saveUser(UserModel userModel) {}\n\n  @Override\n  public UserModel findUserByEmail(String email) {}\n\n  @Override\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\n\n  @Override\n  public UserModel deleteUser(String email) {}\n\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\n\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\n</code></pre>\n"},{"tags":["java","math","angle","trigonometry"],"comments":[{"owner":{"account_id":973998,"reputation":138700,"user_id":995876,"display_name":"Esailija"},"score":3,"creation_date":1351340859,"post_id":13100144,"comment_id":17804599,"body_markdown":"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"},{"owner":{"account_id":1867252,"reputation":1795,"user_id":1690481,"accept_rate":93,"display_name":"Nitesh Verma"},"score":1,"creation_date":1375440619,"post_id":13100144,"comment_id":26345887,"body_markdown":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));","body":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1684439488,"post_id":13100144,"comment_id":134521727,"body_markdown":"I’m voting to close this question because this is how floating point arithmetic works.  https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"I’m voting to close this question because this is how floating point arithmetic works.  <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":633608,"reputation":32281,"user_id":391554,"accept_rate":93,"display_name":"Dan D."},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1351343440,"creation_date":1351340818,"answer_id":13100168,"question_id":13100144,"body_markdown":"The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1351340915,"creation_date":1351340915,"answer_id":13100182,"question_id":13100144,"body_markdown":"See the Javadoc. &quot;The conversion from degrees to radians is generally inexact.&quot;","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>See the Javadoc. \"The conversion from degrees to radians is generally inexact.\"</p>\n"},{"tags":[],"owner":{"account_id":1900362,"reputation":19274,"user_id":1716339,"display_name":"Aki Suihkonen"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1351341292,"creation_date":1351341292,"answer_id":13100229,"question_id":13100144,"body_markdown":"From trigonometry:\r\n\r\n    sin x ~= x, for small values of x\r\n    sin x = cos x+pi/2\r\n\r\nBecause pi/2 can&#39;t be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.\r\n\r\nIn this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\r\nSo, it&#39;s a rather good result...\r\n\r\n\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>From trigonometry:</p>\n\n<pre><code>sin x ~= x, for small values of x\nsin x = cos x+pi/2\n</code></pre>\n\n<p>Because pi/2 can't be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.</p>\n\n<p>In this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\nSo, it's a rather good result...</p>\n"},{"tags":[],"owner":{"display_name":"user85109"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1351348615,"creation_date":1351348615,"answer_id":13101100,"question_id":13100144,"body_markdown":"Standing temporarily on a soapbox, I think people are confused about the concepts of [accuracy versus precision][1]. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?\r\n\r\n90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.\r\n\r\nNext, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don&#39;t get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can&#39;t represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.\r\n\r\n  [1]: http://www.mathsisfun.com/accuracy-precision.html","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>Standing temporarily on a soapbox, I think people are confused about the concepts of <a href=\"http://www.mathsisfun.com/accuracy-precision.html\" rel=\"nofollow\">accuracy versus precision</a>. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?</p>\n\n<p>90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.</p>\n\n<p>Next, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don't get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can't represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.</p>\n"},{"tags":[],"owner":{"account_id":28622205,"reputation":1,"user_id":21915007,"display_name":"Rajiv Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344199,"creation_date":1684344199,"answer_id":76274696,"question_id":13100144,"body_markdown":"As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      \r\n      double b1=Math.cos(Math.toRadians(90));\r\n      //approximate value \r\n      System.out.println(b1);\r\n      //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\r\n      // I recommend you to using it upto 15f for precisely value\r\n      double b2=Math.sin(Math.toRadians(30));\r\n      //approximate value \r\n      System.out.println(b2);\r\n      //exact value\r\n      System.out.println(String.format(&quot;%.15f&quot;,b2));\r\n    }\r\n}","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:</p>\n<p>public class MyClass {\npublic static void main(String args[]) {</p>\n<pre><code>  double b1=Math.cos(Math.toRadians(90));\n  //approximate value \n  System.out.println(b1);\n  //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\n  // I recommend you to using it upto 15f for precisely value\n  double b2=Math.sin(Math.toRadians(30));\n  //approximate value \n  System.out.println(b2);\n  //exact value\n  System.out.println(String.format(&quot;%.15f&quot;,b2));\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1536892,"reputation":17,"user_id":1432679,"accept_rate":100,"display_name":"user1432679"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5628,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":13100229,"answer_count":5,"score":-1,"last_activity_date":1684344199,"creation_date":1351340591,"question_id":13100144,"body_markdown":"I&#39;ve got a little Problem with the `Math.cos()` method. I know, I have to convert the angle to Radians before using `Math.cos()`. But if I just do:\r\n\r\n    System.out.println(Math.cos(Math.toRadians(90));\r\n\r\nIt outputs: 6.123233995736766E-17\r\n\r\n`Math.sin()` is working well.","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>I've got a little Problem with the <code>Math.cos()</code> method. I know, I have to convert the angle to Radians before using <code>Math.cos()</code>. But if I just do:</p>\n\n<pre><code>System.out.println(Math.cos(Math.toRadians(90));\n</code></pre>\n\n<p>It outputs: 6.123233995736766E-17</p>\n\n<p><code>Math.sin()</code> is working well.</p>\n"},{"tags":["java","sorting","arraylist"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1684341660,"post_id":76274356,"comment_id":134505449,"body_markdown":"Please explain clearly what you are trying to do. What is the exact problem description?","body":"Please explain clearly what you are trying to do. What is the exact problem description?"},{"owner":{"account_id":1976379,"reputation":608,"user_id":1774084,"display_name":"M. Yousfi"},"score":1,"creation_date":1684341780,"post_id":76274356,"comment_id":134505468,"body_markdown":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve.","body":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342685,"post_id":76274356,"comment_id":134505664,"body_markdown":"You&#39;re using `k &lt; list.size() - 1` as the condition of your for-loop, are you sure you want the `- 1`?","body":"You&#39;re using <code>k &lt; list.size() - 1</code> as the condition of your for-loop, are you sure you want the <code>- 1</code>?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684342825,"post_id":76274356,"comment_id":134505698,"body_markdown":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;.\nat the end of a round i have to remove the winning player and let other player keep doing a last round, following the order","body":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;. at the end of a round i have to remove the winning player and let other player keep doing a last round, following the order"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342906,"post_id":76274356,"comment_id":134505714,"body_markdown":"So, you&#39;re looking to place any players before the removed player, to the end of the list?","body":"So, you&#39;re looking to place any players before the removed player, to the end of the list?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684343027,"post_id":76274356,"comment_id":134505732,"body_markdown":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)","body":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)"}],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684343303,"creation_date":1684343303,"answer_id":76274579,"question_id":76274356,"body_markdown":"Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:\r\n\r\n```\r\nList&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\r\nInteger objToRemove = 5;\r\nint removeObjectIndex = integerList.indexOf(objToRemove);\r\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\r\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\r\nSystem.out.println(finalList);\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:</p>\n<pre><code>List&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\nInteger objToRemove = 5;\nint removeObjectIndex = integerList.indexOf(objToRemove);\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\nSystem.out.println(finalList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344039,"creation_date":1684344039,"answer_id":76274675,"question_id":76274356,"body_markdown":"This will remove the specified player, and place any players that were before that player, to the end of the list.\r\n\r\nKeep in mind, this presumes that `player` exists.\r\n\r\n```java\r\nvoid removePlayer(Players player) {\r\n    int indexOf = list.indexOf(player);\r\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\r\n    remainingList = new ArrayList&lt;&gt;(list);\r\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\r\n    int index = 0;\r\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\r\n        iterator.next();\r\n        iterator.remove();\r\n        index++;\r\n    }\r\n    remainingList.addAll(sublist);\r\n}\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>This will remove the specified player, and place any players that were before that player, to the end of the list.</p>\n<p>Keep in mind, this presumes that <code>player</code> exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removePlayer(Players player) {\n    int indexOf = list.indexOf(player);\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\n    remainingList = new ArrayList&lt;&gt;(list);\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\n    int index = 0;\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\n        iterator.next();\n        iterator.remove();\n        index++;\n    }\n    remainingList.addAll(sublist);\n}\n</code></pre>\n"}],"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1684344039,"creation_date":1684341551,"question_id":76274356,"body_markdown":"i need to sort the elements of an ArrayList&lt;Object&gt; oredering from the elements who is next to the removed one.\r\n\r\nsomethink like this:\r\n\r\nif i have\r\nArraylist&lt;Object&gt; list = [ obj1 , obj2 , obj3, obj4 ]\r\n\r\nand i remove from the list obj2, i have to remain with a list ordered like this:\r\n\r\nArraylist&lt;Object&gt; remainingList = [ obj3, obj4, obj1  ]\r\n\r\ni tryed a for cycle with 2 variables that iterates list.size()-1 times\r\nobj is the element i dont need in remainingLIst \r\n\r\n\t\r\n\r\n       for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\r\n\t\t{\r\n\t\t\tif (i==giocatori.size()) i=0;\r\n\t\t\telse i++;\r\n\t\t\tremainingList.add(List.get(i));\r\n\t\t}\r\n\r\n\r\n\r\nis there a more efficent way to to this?\r\n\t\t","title":"ArrayList sorting after remove a specific item","body":"<p>i need to sort the elements of an ArrayList oredering from the elements who is next to the removed one.</p>\n<p>somethink like this:</p>\n<p>if i have\nArraylist list = [ obj1 , obj2 , obj3, obj4 ]</p>\n<p>and i remove from the list obj2, i have to remain with a list ordered like this:</p>\n<p>Arraylist remainingList = [ obj3, obj4, obj1  ]</p>\n<p>i tryed a for cycle with 2 variables that iterates list.size()-1 times\nobj is the element i dont need in remainingLIst</p>\n<pre><code>   for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\n    {\n        if (i==giocatori.size()) i=0;\n        else i++;\n        remainingList.add(List.get(i));\n    }\n</code></pre>\n<p>is there a more efficent way to to this?</p>\n"},{"tags":["java","spring","spring-boot","configuration-files"],"comments":[{"owner":{"account_id":357760,"reputation":1492,"user_id":2304483,"display_name":"user2304483"},"score":0,"creation_date":1684466940,"post_id":76274551,"comment_id":134524893,"body_markdown":"I can&#39;t understand what you want to do, you have properties file with values and you want to access these properties in the code ?","body":"I can&#39;t understand what you want to do, you have properties file with values and you want to access these properties in the code ?"},{"owner":{"account_id":8415969,"reputation":45,"user_id":6316404,"display_name":"Kostov"},"score":0,"creation_date":1684743140,"post_id":76274551,"comment_id":134555872,"body_markdown":"Hi, thanks for the response!\nWhat I&#39;m trying to do is to keep my application.properties absolutely clean, without any properties there. With most of the cases until now, I&#39;m able to find a way to expose the specific configuration bean, instead of writing into the properties file, but I found it very difficult for some conf beans, as I&#39;m unable to &#39;browse&#39; all of the spring beans. So I&#39;m searching a universal way to configure these properties, without adding them to app.properties file. \nThanks!","body":"Hi, thanks for the response! What I&#39;m trying to do is to keep my application.properties absolutely clean, without any properties there. With most of the cases until now, I&#39;m able to find a way to expose the specific configuration bean, instead of writing into the properties file, but I found it very difficult for some conf beans, as I&#39;m unable to &#39;browse&#39; all of the spring beans. So I&#39;m searching a universal way to configure these properties, without adding them to app.properties file.  Thanks!"}],"owner":{"account_id":8415969,"reputation":45,"user_id":6316404,"display_name":"Kostov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684343058,"creation_date":1684343058,"question_id":76274551,"body_markdown":"In our team, we agreed that we are gonna use all of the configurations as a code (let&#39;s Say AppConfiguration class) i.e :\r\n```\r\n@Value(&quot;${spring.datasource.url:jdbc:postgresql://localhost:5432/postgres}&quot;);\r\nprivate String jdbcUrl;\r\n```\r\nand later use them to configure beans with this value:\r\n```\r\n@Bean\r\n@Primary\r\n@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\r\npublic DataSource teamDataSource() {\r\n        return dataSourceProperties().initializeDataSourceBuilder().build();\r\n}\r\n\r\n@Bean\r\n@Primary\r\npublic DataSourceProperties telemetryControlServiceDataSourceProperties() {\r\n    DataSourceProperties dataSourceProperties = new DataSourceProperties();\r\n    dataSourceProperties.setUrl(appConfig.getJdbcUrl());\r\n....\r\n    return dataSourceProperties;\r\n}\r\n```\r\n\r\n\r\n**My Question:**\r\nAs configuration properties rise, I can&#39;t put anything in application.properties files per our agreement, and I have to search for pojos for @ConfigurationProperties which I could not find sometimes. Is there a general/universal way for exposing all kinds of configuration properties from applications.properties?\r\nI.e I&#39;m able to find some of the actuator properties, but most of them I cannot:\r\n\r\n```\r\nmanagement.endpoints.web.base-path=/debug\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.endpoints.web.exposure.exclude=env,beans\r\nmanagement.endpoint.health.show-details=always\r\nmanagement.endpoint.metrics.enabled=true\r\nmanagement.endpoint.prometheus.enabled=true\r\nmanagement.endpoint.loggers.enabled=true\r\n```","title":"How to replace application.properties entries and expose them as a code or bean","body":"<p>In our team, we agreed that we are gonna use all of the configurations as a code (let's Say AppConfiguration class) i.e :</p>\n<pre><code>@Value(&quot;${spring.datasource.url:jdbc:postgresql://localhost:5432/postgres}&quot;);\nprivate String jdbcUrl;\n</code></pre>\n<p>and later use them to configure beans with this value:</p>\n<pre><code>@Bean\n@Primary\n@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\npublic DataSource teamDataSource() {\n        return dataSourceProperties().initializeDataSourceBuilder().build();\n}\n\n@Bean\n@Primary\npublic DataSourceProperties telemetryControlServiceDataSourceProperties() {\n    DataSourceProperties dataSourceProperties = new DataSourceProperties();\n    dataSourceProperties.setUrl(appConfig.getJdbcUrl());\n....\n    return dataSourceProperties;\n}\n</code></pre>\n<p><strong>My Question:</strong>\nAs configuration properties rise, I can't put anything in application.properties files per our agreement, and I have to search for pojos for @ConfigurationProperties which I could not find sometimes. Is there a general/universal way for exposing all kinds of configuration properties from applications.properties?\nI.e I'm able to find some of the actuator properties, but most of them I cannot:</p>\n<pre><code>management.endpoints.web.base-path=/debug\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoints.web.exposure.exclude=env,beans\nmanagement.endpoint.health.show-details=always\nmanagement.endpoint.metrics.enabled=true\nmanagement.endpoint.prometheus.enabled=true\nmanagement.endpoint.loggers.enabled=true\n</code></pre>\n"},{"tags":["java","object","inheritance"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1684342719,"post_id":76274470,"comment_id":134505672,"body_markdown":"because that is one of the main features of Object Oriented programming - since `Derived` is extending `Base`, it has all members of `Base` (and eventually some more), so it can be used as `Base`. (Maybe better example `Cat` extends `Animal` , so I can assign an instance of `Cat` to a variable of type `Animal` - a `Cat` is an `Animal` (and some more specific characteristics)","body":"because that is one of the main features of Object Oriented programming - since <code>Derived</code> is extending <code>Base</code>, it has all members of <code>Base</code> (and eventually some more), so it can be used as <code>Base</code>. (Maybe better example <code>Cat</code> extends <code>Animal</code> , so I can assign an instance of <code>Cat</code> to a variable of type <code>Animal</code> - a <code>Cat</code> is an <code>Animal</code> (and some more specific characteristics)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1684343818,"post_id":76274470,"comment_id":134505898,"body_markdown":"&quot;Why is java allowing me to assign a reference of child to base class&quot;  Because you&#39;re allowed to do this in Java.","body":"&quot;Why is java allowing me to assign a reference of child to base class&quot;  Because you&#39;re allowed to do this in Java."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684429475,"post_id":76274470,"comment_id":134519711,"body_markdown":"Your final example won&#39;t compile, you cannot call `b.poo();` via `Base b`","body":"Your final example won&#39;t compile, you cannot call <code>b.poo();</code> via <code>Base b</code>"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684342906,"creation_date":1684342906,"answer_id":76274536,"question_id":76274470,"body_markdown":"This is called [polymorphism](https://en.wikipedia.org/wiki/Polymorphism_(computer_science)). Any derived class can necessarily be considered an instance of a parent class (without explicit casting). \r\n\r\nThe methods you can call and fields you can access depend on the static type of the object. In the case of `Base b = new Derived();`, the static type of `b` is `Base`, so you can only call methods visible on `Base`. New methods defined in `Derived` cannot be used.","title":"Why is the compiler not throwing error when Assigning object of sub class to parent reference","body":"<p>This is called <a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">polymorphism</a>. Any derived class can necessarily be considered an instance of a parent class (without explicit casting).</p>\n<p>The methods you can call and fields you can access depend on the static type of the object. In the case of <code>Base b = new Derived();</code>, the static type of <code>b</code> is <code>Base</code>, so you can only call methods visible on <code>Base</code>. New methods defined in <code>Derived</code> cannot be used.</p>\n"}],"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76274536,"answer_count":1,"score":0,"last_activity_date":1684342906,"creation_date":1684342412,"question_id":76274470,"body_markdown":"```\r\nclass Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Base class show() method called&quot;);\r\n\t}\r\n}\r\n\r\nclass Derived extends Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Derived class show () method called&quot;);\r\n\t}\r\n}\r\n\r\npublic class Main {\r\npublic static void main(String[] args) {\r\n\tBase b = new Derived();//why is java allowing me to create an object of child class\r\n\tb.show();              //how can the Base class hold and use the reference of child\r\n\t}                              \r\n}\r\n```\r\n\r\n\r\nWhat if I create an new method in the child class ??\r\nWill the parent class still be able to access the new method ??\r\n\r\n```\r\nclass Derived extends Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Derived class show () method called&quot;);\r\n\t}\r\n\tpublic void poo() {\r\n\t\tSystem.out.println(&quot;take a poo&quot;);\r\n\t}\r\n}\r\n\r\npublic class Main {\r\npublic static void main(String[] args) {\r\n\tBase b = new Derived();\r\n\tb.show();   \r\n        b.poo(); \r\n\t}                              \r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWhy is java allowing me to assign a reference of child to base class and not throwing any warnings or errors.","title":"Why is the compiler not throwing error when Assigning object of sub class to parent reference","body":"<pre><code>class Base {\n    public void show() {\n        System.out.println(&quot;Base class show() method called&quot;);\n    }\n}\n\nclass Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();//why is java allowing me to create an object of child class\n    b.show();              //how can the Base class hold and use the reference of child\n    }                              \n}\n</code></pre>\n<p>What if I create an new method in the child class ??\nWill the parent class still be able to access the new method ??</p>\n<pre><code>class Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n    public void poo() {\n        System.out.println(&quot;take a poo&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();\n    b.show();   \n        b.poo(); \n    }                              \n}\n</code></pre>\n<p>Why is java allowing me to assign a reference of child to base class and not throwing any warnings or errors.</p>\n"},{"tags":["java","arrays","oop","object"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1491495993,"post_id":43260752,"comment_id":73590219,"body_markdown":"Pretty much you have to iterate.  You can use streams but for small lists they are not efficient.","body":"Pretty much you have to iterate.  You can use streams but for small lists they are not efficient."},{"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"score":3,"creation_date":1491496145,"post_id":43260752,"comment_id":73590327,"body_markdown":"You are using an imperative language. Therefore, explicit iterations are the way to go. If you don&#39;t like writing loops, go with a functional language such as Scala. There you could use a simple one-liner and have it.","body":"You are using an imperative language. Therefore, explicit iterations are the way to go. If you don&#39;t like writing loops, go with a functional language such as Scala. There you could use a simple one-liner and have it."},{"owner":{"display_name":"user7158855"},"score":0,"creation_date":1491496253,"post_id":43260752,"comment_id":73590395,"body_markdown":"Could you elaborate more on the difference between the two, perhaps as an answer?","body":"Could you elaborate more on the difference between the two, perhaps as an answer?"},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":0,"creation_date":1491496534,"post_id":43260752,"comment_id":73590590,"body_markdown":"@MatthiasFax, you do not need to explicitly iterate if using Java 8&#39;s streaming API, which is functional in nature.","body":"@MatthiasFax, you do not need to explicitly iterate if using Java 8&#39;s streaming API, which is functional in nature."},{"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"score":0,"creation_date":1491496888,"post_id":43260752,"comment_id":73590810,"body_markdown":"@jrahhali Yes, you can use streams, but they are not performant. Java is not made for it, the Streaming API is just built &quot;around&quot;, not from the bottom up. They are not performant and in my view also ugly and difficult to read.","body":"@jrahhali Yes, you can use streams, but they are not performant. Java is not made for it, the Streaming API is just built &quot;around&quot;, not from the bottom up. They are not performant and in my view also ugly and difficult to read."},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":1,"creation_date":1491497146,"post_id":43260752,"comment_id":73590990,"body_markdown":"@MatthiasFax, I agree with you that the streaming API is built around the core language and not from the bottom up, but it does allow you to use functional idioms, and therefore, not have to explicit iterate.  The &#39;explicit iterating&#39; was the only point I was addressing.","body":"@MatthiasFax, I agree with you that the streaming API is built around the core language and not from the bottom up, but it does allow you to use functional idioms, and therefore, not have to explicit iterate.  The &#39;explicit iterating&#39; was the only point I was addressing."}],"answers":[{"tags":[],"owner":{"account_id":6975617,"reputation":676,"user_id":5350482,"accept_rate":75,"display_name":"ZhenyaM"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1491496133,"creation_date":1491496133,"answer_id":43260835,"question_id":43260752,"body_markdown":"java 8:\r\n \r\n    String[] names = Arrays.asStream(people).map(Person::getName).asArray(String[]::new);","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>java 8:</p>\n\n<pre><code>String[] names = Arrays.asStream(people).map(Person::getName).asArray(String[]::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6854823,"reputation":6150,"user_id":5270744,"accept_rate":76,"display_name":"m_callens"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1491497857,"creation_date":1491496425,"answer_id":43260942,"question_id":43260752,"body_markdown":"Two options:\r\n\r\n1. Iteration\r\n2. Streams (*Java 8*)\r\n\r\n*__Iteration__*\r\n\r\n    List&lt;String&gt; names = new ArrayList&lt;&gt;();\r\n    for (Person p : people) {\r\n        names.add(p.name);\r\n    }\r\n\r\n*__Streams__*\r\n\r\n    String[] names = Arrays.stream(people).map(p -&gt; p.name).toArray(size -&gt; new String[people.length]);","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>Two options:</p>\n\n<ol>\n<li>Iteration</li>\n<li>Streams (<em>Java 8</em>)</li>\n</ol>\n\n<p><em><strong>Iteration</strong></em></p>\n\n<pre><code>List&lt;String&gt; names = new ArrayList&lt;&gt;();\nfor (Person p : people) {\n    names.add(p.name);\n}\n</code></pre>\n\n<p><em><strong>Streams</strong></em></p>\n\n<pre><code>String[] names = Arrays.stream(people).map(p -&gt; p.name).toArray(size -&gt; new String[people.length]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1491499535,"creation_date":1491498973,"answer_id":43261794,"question_id":43260752,"body_markdown":"You are seeking a functional feature in an initially imperative-only language Java. As already mentioned in other answers, since Java 8, you also have functional elements (e.g., streams). However, they are not yet recommended to be used. This [blog post][1] explains the disadvantages of streams over loops (i.e., performance, readability, maintainability).\r\n\r\nIf you are looking for functional and safe code without such major implications, try Scala:\r\n\r\n    case class Person(name: String)\r\n    val persons = Array(Person(&quot;george&quot;), Person(&quot;michael&quot;), Person(&quot;dexter&quot;))\r\n    val personNames = persons.map(_.name)\r\n\r\nThe main difference is that this Scala code is simple to read and it is comparably performant as a Java code that uses a loop because the translated Scala-to-Java code uses a while loop internally.\r\n\r\n  [1]: https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>You are seeking a functional feature in an initially imperative-only language Java. As already mentioned in other answers, since Java 8, you also have functional elements (e.g., streams). However, they are not yet recommended to be used. This <a href=\"https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/\" rel=\"nofollow noreferrer\">blog post</a> explains the disadvantages of streams over loops (i.e., performance, readability, maintainability).</p>\n\n<p>If you are looking for functional and safe code without such major implications, try Scala:</p>\n\n<pre><code>case class Person(name: String)\nval persons = Array(Person(\"george\"), Person(\"michael\"), Person(\"dexter\"))\nval personNames = persons.map(_.name)\n</code></pre>\n\n<p>The main difference is that this Scala code is simple to read and it is comparably performant as a Java code that uses a loop because the translated Scala-to-Java code uses a while loop internally.</p>\n"},{"tags":[],"owner":{"account_id":1829075,"reputation":1414,"user_id":2502267,"accept_rate":0,"display_name":"fjkjava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684342778,"creation_date":1684342778,"answer_id":76274522,"question_id":43260752,"body_markdown":"    List&lt;Integer&gt; vendorIdList = ledgersList.stream().map(Ledger::getVendorId).collect(Collectors.toList());","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<pre><code>List&lt;Integer&gt; vendorIdList = ledgersList.stream().map(Ledger::getVendorId).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"display_name":"user7158855"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16676,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":43260942,"answer_count":4,"score":10,"last_activity_date":1684342778,"creation_date":1491495889,"question_id":43260752,"body_markdown":"Say I have a person object with properties such as `name`, `hair color`, and `eye color`. I have the following array `Person[] people` that contains instances of person objects.\r\n\r\nI know I can get the `name` property of one the `Person` objects with \r\n\r\n    // create a new instance of Person\r\n    Person george = new Person(&#39;george&#39;,&#39;brown&#39;,&#39;blue&#39;);\r\n    // &lt;&lt;&lt; make a people array that contains the george instance here... &gt;&gt;&gt;\r\n    // access the name property\r\n    String georgesName = people[0].name;\r\n\r\nBut what if I want to access the `name` property of everyone without using indexes? For example, to create an array or list of just names or hair color? Do I have to manually iterate through my `people` array? Or is there something cool in Java like `String[] peopleNames = people.name`?","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>Say I have a person object with properties such as <code>name</code>, <code>hair color</code>, and <code>eye color</code>. I have the following array <code>Person[] people</code> that contains instances of person objects.</p>\n\n<p>I know I can get the <code>name</code> property of one the <code>Person</code> objects with </p>\n\n<pre><code>// create a new instance of Person\nPerson george = new Person('george','brown','blue');\n// &lt;&lt;&lt; make a people array that contains the george instance here... &gt;&gt;&gt;\n// access the name property\nString georgesName = people[0].name;\n</code></pre>\n\n<p>But what if I want to access the <code>name</code> property of everyone without using indexes? For example, to create an array or list of just names or hair color? Do I have to manually iterate through my <code>people</code> array? Or is there something cool in Java like <code>String[] peopleNames = people.name</code>?</p>\n"},{"tags":["java","android","ms-office","openoffice.org"],"comments":[{"owner":{"account_id":238730,"reputation":46651,"user_id":507810,"accept_rate":82,"display_name":"FoamyGuy"},"score":0,"creation_date":1296503796,"post_id":4854947,"comment_id":5393935,"body_markdown":"Some devices come with a doc viewer. Galaxy Tab does, I am not sure how many of the total devices out there do though.","body":"Some devices come with a doc viewer. Galaxy Tab does, I am not sure how many of the total devices out there do though."}],"answers":[{"tags":[],"owner":{"account_id":68136,"reputation":5468,"user_id":198996,"accept_rate":83,"display_name":"TomTasche"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1319808155,"creation_date":1296503069,"answer_id":4855286,"question_id":4854947,"body_markdown":"Most of the Microsoft Document viewers are heavy and expensive.\r\n\r\nIf you want to create a viewer yourself, you should take a look at [Apache POI][1].\r\n\r\n\r\n  [1]: https://poi.apache.org/","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Most of the Microsoft Document viewers are heavy and expensive.</p>\n\n<p>If you want to create a viewer yourself, you should take a look at <a href=\"https://poi.apache.org/\" rel=\"noreferrer\">Apache POI</a>.</p>\n"},{"tags":[],"owner":{"account_id":120646,"reputation":1714,"user_id":313207,"accept_rate":88,"display_name":"matheeeny"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1299794956,"creation_date":1299794956,"answer_id":5266527,"question_id":4854947,"body_markdown":"Since most of the documents we need to display are already hosted on the web, we opted to use an embedded web view that opens the document using [google docs viewer][1].  \r\n\r\nWe still have a few locally stored documents though that this approach doesn&#39;t work with.  For these, our solution was to rely on the support of existing apps. After spending some more time with Android, It seems that most devices come equipped with some sort of document/pdf reading capability installed fresh out of the box.  In the event that they don&#39;t have a capable app, we direct them to a market search for a free reader.  \r\n\r\n\r\n\r\n  [1]: http://docs.google.com/viewer","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Since most of the documents we need to display are already hosted on the web, we opted to use an embedded web view that opens the document using <a href=\"http://docs.google.com/viewer\" rel=\"noreferrer\">google docs viewer</a>.  </p>\n\n<p>We still have a few locally stored documents though that this approach doesn't work with.  For these, our solution was to rely on the support of existing apps. After spending some more time with Android, It seems that most devices come equipped with some sort of document/pdf reading capability installed fresh out of the box.  In the event that they don't have a capable app, we direct them to a market search for a free reader.  </p>\n"},{"tags":[],"owner":{"account_id":110410,"reputation":37243,"user_id":292166,"accept_rate":77,"display_name":"JosephH"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1684342710,"creation_date":1451529913,"answer_id":34540302,"question_id":4854947,"body_markdown":"Unfortunately there&#39;s no built in Android control to edit MS Office files, or even to display them! It&#39;s a pretty big omission given iOS has built in support for displaying Office files (albeit the iOS one often displays more complex documents incorrectly). There don&#39;t seem to be viewer app consistently enough available to rely on (and they may not provide the kind of user experience you&#39;re hoping for either).\r\n\r\nIf you want to display or edit docx etc **within** your android application, you have to embed some third party code that adds this functionality. I&#39;m not aware of any pre-packaged open source code that can do this, so unless you want to build/port a solution yourself you will need to commercially license something. \r\n\r\nAs others have noted, there are some open source projects in this area, but they&#39;re not packaged/ported to Android. If you did manage to get them ported and integrated, they&#39;d add a huge overhead to your Android app download (eg. 80+ megabytes) and you&#39;d need to then add a mobile suitable UI for them (see https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB for an example of a port with ui that I personally think is not suitable/user friendly for an Android application.)\r\n\r\nOne such SDK that I&#39;m familiar with which solves this problem is based on the SmartOffice application:\r\n\r\nhttps://artifex.com/products-smart-office-overview/\r\n\r\nIt&#39;s available as an secure embeddable library that supports both display and (optionally) editing of Office documents. You can contact sosales@artifex.com for licensing information.\r\n\r\nDisclosure: One of my jobs involves working on the SmartOffice code.","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Unfortunately there's no built in Android control to edit MS Office files, or even to display them! It's a pretty big omission given iOS has built in support for displaying Office files (albeit the iOS one often displays more complex documents incorrectly). There don't seem to be viewer app consistently enough available to rely on (and they may not provide the kind of user experience you're hoping for either).</p>\n<p>If you want to display or edit docx etc <strong>within</strong> your android application, you have to embed some third party code that adds this functionality. I'm not aware of any pre-packaged open source code that can do this, so unless you want to build/port a solution yourself you will need to commercially license something.</p>\n<p>As others have noted, there are some open source projects in this area, but they're not packaged/ported to Android. If you did manage to get them ported and integrated, they'd add a huge overhead to your Android app download (eg. 80+ megabytes) and you'd need to then add a mobile suitable UI for them (see <a href=\"https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB</a> for an example of a port with ui that I personally think is not suitable/user friendly for an Android application.)</p>\n<p>One such SDK that I'm familiar with which solves this problem is based on the SmartOffice application:</p>\n<p><a href=\"https://artifex.com/products-smart-office-overview/\" rel=\"nofollow noreferrer\">https://artifex.com/products-smart-office-overview/</a></p>\n<p>It's available as an secure embeddable library that supports both display and (optionally) editing of Office documents. You can contact sosales@artifex.com for licensing information.</p>\n<p>Disclosure: One of my jobs involves working on the SmartOffice code.</p>\n"},{"tags":[],"owner":{"account_id":7405824,"reputation":2593,"user_id":5634798,"display_name":"Gundu Bandgar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451539832,"creation_date":1451539103,"answer_id":34541409,"question_id":4854947,"body_markdown":"    You can use this example for read MS word document file in android application.\r\n    I give a link below, you follow this for example.\r\n     &lt;https://github.com/AsposeShowcase/Document_Viewer_and_Converter_for_Android&gt;\r\n\r\n    And follow below link for Aspose Word library for android.\r\n     &lt;http://www.aspose.com/android/word-component.aspx&gt;\r\n  \r\n    **You Mostly use for this to Read Ms word document.**\r\n    I hope, you will using these Library and make you application better.\r\n    Best of Luck.\r\n\r\n\r\n    [1]: http://www.aspose.com/android/word-component.aspx","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<pre><code>You can use this example for read MS word document file in android application.\nI give a link below, you follow this for example.\n &lt;https://github.com/AsposeShowcase/Document_Viewer_and_Converter_for_Android&gt;\n\nAnd follow below link for Aspose Word library for android.\n &lt;http://www.aspose.com/android/word-component.aspx&gt;\n\n**You Mostly use for this to Read Ms word document.**\nI hope, you will using these Library and make you application better.\nBest of Luck.\n\n\n[1]: http://www.aspose.com/android/word-component.aspx\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4931798,"reputation":116,"user_id":3971337,"display_name":"masoud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459174423,"creation_date":1459173062,"answer_id":36263759,"question_id":4854947,"body_markdown":"A suitable solution might be using Jword in the link below. It&#39;s not free but easy to use.\r\nhttp://www.independentsoft.de/jword/index.html\r\n\r\nUsing the library is as simple as this sample code\r\n\r\n    private String docxRead(String filePath) {\r\n\t\ttry {\r\n        \tWordDocument doc = new WordDocument(filePath);\r\n        \tString text = doc.toText();\r\n        \treturn text;\r\n        }\r\n        catch (Exception e) {\r\n            Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            e.printStackTrace();\r\n        }\r\n\t\treturn &quot;&quot;;\r\n\t}    \r\n","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>A suitable solution might be using Jword in the link below. It's not free but easy to use.\n<a href=\"http://www.independentsoft.de/jword/index.html\" rel=\"nofollow\">http://www.independentsoft.de/jword/index.html</a></p>\n\n<p>Using the library is as simple as this sample code</p>\n\n<pre><code>private String docxRead(String filePath) {\n    try {\n        WordDocument doc = new WordDocument(filePath);\n        String text = doc.toText();\n        return text;\n    }\n    catch (Exception e) {\n        Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\n        e.printStackTrace();\n    }\n    return \"\";\n}    \n</code></pre>\n"}],"owner":{"account_id":120646,"reputation":1714,"user_id":313207,"accept_rate":88,"display_name":"matheeeny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35485,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"closed_date":1459183031,"accepted_answer_id":5266527,"answer_count":5,"score":29,"last_activity_date":1684342710,"creation_date":1296500860,"question_id":4854947,"body_markdown":"Does anyone know of a good Java Microsoft Office API capable or running on an Android?  I know there is an OpenOffice Java API, but I haven&#39;t heard of anyone using it on Android.\r\n\r\nI know that using intents is another option, but how common are pre-installed office viewers on the varying Android distributions?  Would it be reasonable for a developer to expect the user to have one of these viewers installed?  Is it reasonable to request that they install one of these applications if they don&#39;t already have one?","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Does anyone know of a good Java Microsoft Office API capable or running on an Android?  I know there is an OpenOffice Java API, but I haven't heard of anyone using it on Android.</p>\n\n<p>I know that using intents is another option, but how common are pre-installed office viewers on the varying Android distributions?  Would it be reasonable for a developer to expect the user to have one of these viewers installed?  Is it reasonable to request that they install one of these applications if they don't already have one?</p>\n"},{"tags":["java","reflection","implementation"],"comments":[{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1386554819,"post_id":20461851,"comment_id":30575099,"body_markdown":"Pretty much smoke and mirrors.  Lots of `native` methods that dork around in the innards of objects.  A `native` method pretty much can do anything it wants.","body":"Pretty much smoke and mirrors.  Lots of <code>native</code> methods that dork around in the innards of objects.  A <code>native</code> method pretty much can do anything it wants."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1386556063,"creation_date":1386555567,"answer_id":20462012,"question_id":20461851,"body_markdown":"The main entry point of any Reflection activity is the `Class` class. From it you can get `Method`, `Field`, `Class`, `Constructor`, and `Annotation` instances.\r\n\r\nIf you look at the source code, you will notice that to retrieve any of the above, Java has to make a [`native`][1] call. For example,\r\n\r\n    private native Field[]       getDeclaredFields0(boolean publicOnly);\r\n    private native Method[]      getDeclaredMethods0(boolean publicOnly);\r\n    private native Constructor&lt;T&gt;[] getDeclaredConstructors0(boolean publicOnly);\r\n    private native Class&lt;?&gt;[]   getDeclaredClasses0();\r\n    private native byte[] getRawAnnotations(); // get converted to Annotation instances later\r\n\r\nThe implementation is done in native C code (and/or C++). Each JDK might differ, but you can look up the source code if it&#39;s available and you have patience. Details on the OpenJDK source code can be found [in this question][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\r\n  [2]: https://stackoverflow.com/questions/12594046/java-native-method-source-code","title":"How is Reflection Implemented in Java?","body":"<p>The main entry point of any Reflection activity is the <code>Class</code> class. From it you can get <code>Method</code>, <code>Field</code>, <code>Class</code>, <code>Constructor</code>, and <code>Annotation</code> instances.</p>\n\n<p>If you look at the source code, you will notice that to retrieve any of the above, Java has to make a <a href=\"https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\"><code>native</code></a> call. For example,</p>\n\n<pre><code>private native Field[]       getDeclaredFields0(boolean publicOnly);\nprivate native Method[]      getDeclaredMethods0(boolean publicOnly);\nprivate native Constructor&lt;T&gt;[] getDeclaredConstructors0(boolean publicOnly);\nprivate native Class&lt;?&gt;[]   getDeclaredClasses0();\nprivate native byte[] getRawAnnotations(); // get converted to Annotation instances later\n</code></pre>\n\n<p>The implementation is done in native C code (and/or C++). Each JDK might differ, but you can look up the source code if it's available and you have patience. Details on the OpenJDK source code can be found <a href=\"https://stackoverflow.com/questions/12594046/java-native-method-source-code\">in this question</a>.</p>\n"}],"owner":{"account_id":2698695,"reputation":5321,"user_id":2329988,"accept_rate":73,"display_name":"en_Knight"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1445,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":20462012,"answer_count":1,"score":4,"last_activity_date":1684342327,"creation_date":1386554467,"question_id":20461851,"body_markdown":"The Java 7 Language Specifications say pretty early on:\r\n\r\n&gt; &quot;this specification does not describe reflection in any detail.&quot;\r\n\r\nI&#39;m wondering just that: how is Reflection implemented in Java? \r\n\r\nI&#39;m not asking how it&#39;s used, and I understand there might not be as specific an answer I&#39;m looking for, but any information would be much appreciated.\r\n\r\nI&#39;ve found this on Stackoverflow, the analogous question about C#: https://stackoverflow.com/questions/15105575/how-is-reflection-implemented-in-c","title":"How is Reflection Implemented in Java?","body":"<p>The Java 7 Language Specifications say pretty early on:</p>\n\n<blockquote>\n  <p>\"this specification does not describe reflection in any detail.\"</p>\n</blockquote>\n\n<p>I'm wondering just that: how is Reflection implemented in Java? </p>\n\n<p>I'm not asking how it's used, and I understand there might not be as specific an answer I'm looking for, but any information would be much appreciated.</p>\n\n<p>I've found this on Stackoverflow, the analogous question about C#: <a href=\"https://stackoverflow.com/questions/15105575/how-is-reflection-implemented-in-c\">How is reflection implemented in C#?</a></p>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1684270480,"post_id":76266902,"comment_id":134493300,"body_markdown":"The endpoints look aligned on the domain; they look offset on the range by about what I&#39;d expect for a stacked renderer.","body":"The endpoints look aligned on the domain; they look offset on the range by about what I&#39;d expect for a stacked renderer."},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1684270700,"post_id":76266902,"comment_id":134493345,"body_markdown":"So, you guess the problem is the range of the renderers? Will check it out","body":"So, you guess the problem is the range of the renderers? Will check it out"},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":1,"creation_date":1684340601,"post_id":76266902,"comment_id":134505221,"body_markdown":"So, your tip did the trick. If you please, post it as an answer so I can accept it, and then I will post the code editing the question. Thank you @trashgod","body":"So, your tip did the trick. If you please, post it as an answer so I can accept it, and then I will post the code editing the question. Thank you @trashgod"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684342294,"creation_date":1684340923,"answer_id":76274276,"question_id":76266902,"body_markdown":"In the chart [shown][1], the endpoints look aligned on the domain, but they appear offset on the range by about what I&#39;d expect for a stacked renderer. The exact solution, seen [here][2], modifies a second axis, also seen [here][3]. Also consider a `CombinedDomainCategoryPlot`, mentioned [here][4].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zyLgY.png\r\n  [2]: https://stackoverflow.com/q/76266902/230513\r\n  [3]: https://stackoverflow.com/a/13362809/230513\r\n  [4]: https://stackoverflow.com/search?q=user%3A230513%20CombinedDomainCategoryPlot","title":"JFreeChart - Lines with same starting value not in the same initial position","body":"<p>In the chart <a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\">shown</a>, the endpoints look aligned on the domain, but they appear offset on the range by about what I'd expect for a stacked renderer. The exact solution, seen <a href=\"https://stackoverflow.com/q/76266902/230513\">here</a>, modifies a second axis, also seen <a href=\"https://stackoverflow.com/a/13362809/230513\">here</a>. Also consider a <code>CombinedDomainCategoryPlot</code>, mentioned <a href=\"https://stackoverflow.com/search?q=user%3A230513%20CombinedDomainCategoryPlot\">here</a>.</p>\n"}],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76274276,"answer_count":1,"score":1,"last_activity_date":1684342294,"creation_date":1684269683,"question_id":76266902,"body_markdown":"I am developing a graphic representation of some info.\r\nThe two lines have the same starting value, so they should be starting in the same position on the chart. But, one of them is starting a lot below the other.\r\nI don&#180;t know what I am missing here. Can someone please give a hand?\r\nThanks in advance.\r\n(The values / datasets are coming from another method, just asume that the lines have the same initial value)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe snippet of code where the lines (and bars) are rendered.\r\n\r\n    private JFreeChart createChart(List&lt;SpartaConsolidadoDistribuidora&gt; listCons, int idCenario, String usina) {\r\n        //Cria o Renderer das StackBars.\r\n        GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();\r\n        KeyToGroupMap map = new KeyToGroupMap(&quot;G1&quot;);\r\n        \r\n        int g = 1;\r\n        for (int j = 0; j &lt; 5; j++) {\r\n        \tfor (int i = 0; i &lt; contratos.size(); i++) {\r\n            \tmap.mapKeyToGroup(contratos.get(i), &quot;G&quot; + g);\r\n            }\r\n        \tg++;\r\n    \t}\r\n        \r\n        renderer.setSeriesToGroupMap(map);\r\n        \r\n        renderer.setItemMargin(0.0);\r\n        Paint p1 = new GradientPaint(0.0f, 0.0f, azul, 0.0f, 0.0f, azul);\r\n        renderer.setSeriesPaint(0, p1);\r\n        renderer.setSeriesPaint(7, p1);\r\n        renderer.setSeriesPaint(14, p1);\r\n        renderer.setSeriesPaint(21, p1);\r\n        renderer.setSeriesPaint(28, p1);\r\n        renderer.setSeriesPaint(35, p1);\r\n        renderer.setSeriesPaint(42, p1);\r\n         \r\n        Paint p2 = new GradientPaint(0.0f, 0.0f, roxo, 0.0f, 0.0f, roxo);\r\n        renderer.setSeriesPaint(1, p2);\r\n        renderer.setSeriesPaint(8, p2);\r\n        renderer.setSeriesPaint(15, p2);\r\n        renderer.setSeriesPaint(22, p2);\r\n        renderer.setSeriesPaint(29, p2);\r\n        renderer.setSeriesPaint(36, p2);\r\n        renderer.setSeriesPaint(43, p2);\r\n        \r\n        Paint p3 = new GradientPaint(0.0f, 0.0f, verde, 0.0f, 0.0f, verde);\r\n        renderer.setSeriesPaint(2, p3);\r\n        renderer.setSeriesPaint(9, p3);\r\n        renderer.setSeriesPaint(16, p3);\r\n        renderer.setSeriesPaint(23, p3);\r\n        renderer.setSeriesPaint(30, p3);\r\n        renderer.setSeriesPaint(37, p3);\r\n        renderer.setSeriesPaint(44, p3);\r\n\r\n        Paint p4 = new GradientPaint(0.0f, 0.0f, rosa, 0.0f, 0.0f, rosa);\r\n        renderer.setSeriesPaint(3, p4);\r\n        renderer.setSeriesPaint(10, p4);\r\n        renderer.setSeriesPaint(17, p4);\r\n        renderer.setSeriesPaint(24, p4);\r\n        renderer.setSeriesPaint(31, p4);\r\n        renderer.setSeriesPaint(38, p4);\r\n        renderer.setSeriesPaint(45, p4);\r\n        \r\n        Paint p5 = new GradientPaint(0.0f, 0.0f, amarelo, 0.0f, 0.0f, amarelo);\r\n        renderer.setSeriesPaint(4, p5);\r\n        renderer.setSeriesPaint(11, p5);\r\n        renderer.setSeriesPaint(18, p5);\r\n        renderer.setSeriesPaint(25, p5);\r\n        renderer.setSeriesPaint(32, p5);\r\n        renderer.setSeriesPaint(39, p5);\r\n        renderer.setSeriesPaint(46, p5);\r\n        \r\n        Paint p6 = new GradientPaint(0.0f, 0.0f, azulClaro, 0.0f, 0.0f, azulClaro);\r\n        renderer.setSeriesPaint(5, p6);\r\n        renderer.setSeriesPaint(12, p6);\r\n        renderer.setSeriesPaint(19, p6);\r\n        renderer.setSeriesPaint(26, p6);\r\n        renderer.setSeriesPaint(33, p6);\r\n        renderer.setSeriesPaint(40, p6);\r\n        renderer.setSeriesPaint(47, p6);\r\n        \r\n        Paint p7 = new GradientPaint(0.0f, 0.0f, azulEscuro, 0.0f, 0.0f, azulEscuro);\r\n        renderer.setSeriesPaint(6, p7);\r\n        renderer.setSeriesPaint(13, p7);\r\n        renderer.setSeriesPaint(20, p7);\r\n        renderer.setSeriesPaint(27, p7);\r\n        renderer.setSeriesPaint(34, p7);\r\n        renderer.setSeriesPaint(41, p7);\r\n        renderer.setSeriesPaint(49, p7);\r\n\r\n        renderer.setGradientPaintTransformer(new StandardGradientPaintTransformer(GradientPaintTransformType.HORIZONTAL));\r\n        \r\n        SubCategoryAxis domainAxis = new SubCategoryAxis(&quot;&quot;);\r\n        \r\n        List&lt;CategoryDataset&gt; listDS = createDatasets(listCons, idCenario);\r\n        \r\n        CategoryPlot plot = new CategoryPlot();\r\n        \r\n        plot.setDataset(listDS.get(0));\r\n        plot.setRenderer(renderer);\r\n        plot.setDomainAxis(domainAxis);\r\n        \r\n        NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\r\n        nAxis.setAutoRange(true);\r\n        nAxis.setTickUnit(new NumberTickUnit(100000));\r\n        plot.setRangeAxis(nAxis);\r\n        plot.setFixedLegendItems(createLegendItems());\r\n        \r\n        plot.setOrientation(PlotOrientation.VERTICAL);\r\n        plot.setRangeGridlinesVisible(true);\r\n        plot.setDomainGridlinesVisible(true);\r\n                \r\n        //Agora crio o segundo renderer - Line - LINE 1 RENDER\r\n        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\r\n        renderer2.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer2.setSeriesPaint(0, preto);\r\n        plot.setDataset(1, listDS.get(1));\r\n        plot.setRenderer(1, renderer2);\r\n        \r\n        final ValueAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\r\n        rangeAxis2.setTickLabelsVisible(false);\r\n        plot.setRangeAxis(1, rangeAxis2);\r\n        plot.getRangeAxis().setAutoRange(true);\r\n        \r\n        //Agora crio o terceiro renderer - Line - LINE 2 RENDER\r\n        CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\r\n        renderer3.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer3.setSeriesPaint(0, vermelho);\r\n        plot.setDataset(2, listDS.get(2));\r\n        plot.setRenderer(2, renderer3);\r\n        plot.mapDatasetToRangeAxis(2, 1);\r\n        \r\n        plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\r\n        \r\n        final JFreeChart chart = new JFreeChart(plot);\r\n        chart.setTitle(usina);\r\n        \r\n        return chart;\r\n    }\r\n\r\n\r\n**EDIT:**\r\n\r\nAs the tip provided by @trashgod in the comments, here is the snippet that did the trick:\r\n\r\n    NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\r\n        nAxis.setAutoRange(true);\r\n        nAxis.setLabelFont(new Font(&quot;Arial Black&quot;,0, 18));\r\n        nAxis.setTickUnit(tickUnit);\r\n        nAxis.setTickLabelsVisible(true);\r\n        \r\n        plot.setRangeAxis(nAxis);\r\n        plot.setFixedLegendItems(createLegendItems());\r\n                \r\n        //Agora crio o segundo renderer - Line\r\n        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\r\n        renderer2.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer2.setSeriesPaint(0, vermelho);\r\n        \r\n        plot.setDataset(1, listDS.get(1));\r\n        plot.setRenderer(1, renderer2);\r\n        \r\n        NumberAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\r\n        rangeAxis2.setAutoRange(true);\r\n        rangeAxis2.setTickUnit(tickUnit);\r\n        rangeAxis2.setTickUnit(new NumberTickUnit(1000000), false, false);\r\n        rangeAxis2.setAutoTickUnitSelection(true);\r\n        rangeAxis2.setTickLabelsVisible(false);\r\n        \r\n        plot.setRangeAxis(1, rangeAxis2);\r\n        \r\n        //Agora crio o terceiro renderer - Line\r\n        CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\r\n        renderer3.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer3.setSeriesPaint(0, preto);\r\n        \r\n        plot.setDataset(2, listDS.get(2));\r\n        plot.setRenderer(2, renderer3);\r\n\r\n  [1]: https://i.stack.imgur.com/zyLgY.png","title":"JFreeChart - Lines with same starting value not in the same initial position","body":"<p>I am developing a graphic representation of some info.\nThe two lines have the same starting value, so they should be starting in the same position on the chart. But, one of them is starting a lot below the other.\nI don´t know what I am missing here. Can someone please give a hand?\nThanks in advance.\n(The values / datasets are coming from another method, just asume that the lines have the same initial value)</p>\n<p><a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zyLgY.png\" alt=\"enter image description here\" /></a></p>\n<p>The snippet of code where the lines (and bars) are rendered.</p>\n<pre><code>private JFreeChart createChart(List&lt;SpartaConsolidadoDistribuidora&gt; listCons, int idCenario, String usina) {\n    //Cria o Renderer das StackBars.\n    GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();\n    KeyToGroupMap map = new KeyToGroupMap(&quot;G1&quot;);\n    \n    int g = 1;\n    for (int j = 0; j &lt; 5; j++) {\n        for (int i = 0; i &lt; contratos.size(); i++) {\n            map.mapKeyToGroup(contratos.get(i), &quot;G&quot; + g);\n        }\n        g++;\n    }\n    \n    renderer.setSeriesToGroupMap(map);\n    \n    renderer.setItemMargin(0.0);\n    Paint p1 = new GradientPaint(0.0f, 0.0f, azul, 0.0f, 0.0f, azul);\n    renderer.setSeriesPaint(0, p1);\n    renderer.setSeriesPaint(7, p1);\n    renderer.setSeriesPaint(14, p1);\n    renderer.setSeriesPaint(21, p1);\n    renderer.setSeriesPaint(28, p1);\n    renderer.setSeriesPaint(35, p1);\n    renderer.setSeriesPaint(42, p1);\n     \n    Paint p2 = new GradientPaint(0.0f, 0.0f, roxo, 0.0f, 0.0f, roxo);\n    renderer.setSeriesPaint(1, p2);\n    renderer.setSeriesPaint(8, p2);\n    renderer.setSeriesPaint(15, p2);\n    renderer.setSeriesPaint(22, p2);\n    renderer.setSeriesPaint(29, p2);\n    renderer.setSeriesPaint(36, p2);\n    renderer.setSeriesPaint(43, p2);\n    \n    Paint p3 = new GradientPaint(0.0f, 0.0f, verde, 0.0f, 0.0f, verde);\n    renderer.setSeriesPaint(2, p3);\n    renderer.setSeriesPaint(9, p3);\n    renderer.setSeriesPaint(16, p3);\n    renderer.setSeriesPaint(23, p3);\n    renderer.setSeriesPaint(30, p3);\n    renderer.setSeriesPaint(37, p3);\n    renderer.setSeriesPaint(44, p3);\n\n    Paint p4 = new GradientPaint(0.0f, 0.0f, rosa, 0.0f, 0.0f, rosa);\n    renderer.setSeriesPaint(3, p4);\n    renderer.setSeriesPaint(10, p4);\n    renderer.setSeriesPaint(17, p4);\n    renderer.setSeriesPaint(24, p4);\n    renderer.setSeriesPaint(31, p4);\n    renderer.setSeriesPaint(38, p4);\n    renderer.setSeriesPaint(45, p4);\n    \n    Paint p5 = new GradientPaint(0.0f, 0.0f, amarelo, 0.0f, 0.0f, amarelo);\n    renderer.setSeriesPaint(4, p5);\n    renderer.setSeriesPaint(11, p5);\n    renderer.setSeriesPaint(18, p5);\n    renderer.setSeriesPaint(25, p5);\n    renderer.setSeriesPaint(32, p5);\n    renderer.setSeriesPaint(39, p5);\n    renderer.setSeriesPaint(46, p5);\n    \n    Paint p6 = new GradientPaint(0.0f, 0.0f, azulClaro, 0.0f, 0.0f, azulClaro);\n    renderer.setSeriesPaint(5, p6);\n    renderer.setSeriesPaint(12, p6);\n    renderer.setSeriesPaint(19, p6);\n    renderer.setSeriesPaint(26, p6);\n    renderer.setSeriesPaint(33, p6);\n    renderer.setSeriesPaint(40, p6);\n    renderer.setSeriesPaint(47, p6);\n    \n    Paint p7 = new GradientPaint(0.0f, 0.0f, azulEscuro, 0.0f, 0.0f, azulEscuro);\n    renderer.setSeriesPaint(6, p7);\n    renderer.setSeriesPaint(13, p7);\n    renderer.setSeriesPaint(20, p7);\n    renderer.setSeriesPaint(27, p7);\n    renderer.setSeriesPaint(34, p7);\n    renderer.setSeriesPaint(41, p7);\n    renderer.setSeriesPaint(49, p7);\n\n    renderer.setGradientPaintTransformer(new StandardGradientPaintTransformer(GradientPaintTransformType.HORIZONTAL));\n    \n    SubCategoryAxis domainAxis = new SubCategoryAxis(&quot;&quot;);\n    \n    List&lt;CategoryDataset&gt; listDS = createDatasets(listCons, idCenario);\n    \n    CategoryPlot plot = new CategoryPlot();\n    \n    plot.setDataset(listDS.get(0));\n    plot.setRenderer(renderer);\n    plot.setDomainAxis(domainAxis);\n    \n    NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setTickUnit(new NumberTickUnit(100000));\n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n    \n    plot.setOrientation(PlotOrientation.VERTICAL);\n    plot.setRangeGridlinesVisible(true);\n    plot.setDomainGridlinesVisible(true);\n            \n    //Agora crio o segundo renderer - Line - LINE 1 RENDER\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, preto);\n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    final ValueAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setTickLabelsVisible(false);\n    plot.setRangeAxis(1, rangeAxis2);\n    plot.getRangeAxis().setAutoRange(true);\n    \n    //Agora crio o terceiro renderer - Line - LINE 2 RENDER\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, vermelho);\n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n    plot.mapDatasetToRangeAxis(2, 1);\n    \n    plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\n    \n    final JFreeChart chart = new JFreeChart(plot);\n    chart.setTitle(usina);\n    \n    return chart;\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>As the tip provided by @trashgod in the comments, here is the snippet that did the trick:</p>\n<pre><code>NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setLabelFont(new Font(&quot;Arial Black&quot;,0, 18));\n    nAxis.setTickUnit(tickUnit);\n    nAxis.setTickLabelsVisible(true);\n    \n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n            \n    //Agora crio o segundo renderer - Line\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, vermelho);\n    \n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    NumberAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setAutoRange(true);\n    rangeAxis2.setTickUnit(tickUnit);\n    rangeAxis2.setTickUnit(new NumberTickUnit(1000000), false, false);\n    rangeAxis2.setAutoTickUnitSelection(true);\n    rangeAxis2.setTickLabelsVisible(false);\n    \n    plot.setRangeAxis(1, rangeAxis2);\n    \n    //Agora crio o terceiro renderer - Line\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, preto);\n    \n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1684342713,"post_id":76274408,"comment_id":134505670,"body_markdown":"Have you modified the eclipse.ini file? -1 usually means invalid arguments, and `--add-modules=ALL-SYSTEM` is not a valid argument for Java 1.8.","body":"Have you modified the eclipse.ini file? -1 usually means invalid arguments, and <code>--add-modules=ALL-SYSTEM</code> is not a valid argument for Java 1.8."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1684425878,"post_id":76274408,"comment_id":134518902,"body_markdown":"What exactly prevents you from upgrading?","body":"What exactly prevents you from upgrading?"}],"owner":{"account_id":28132203,"reputation":1,"user_id":21496538,"display_name":"Manasak Aongsirimongkon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341938,"creation_date":1684341938,"question_id":76274408,"body_markdown":"I need to use eclipse-java-2019-03-R-win32-x86_64 with WebSphere 8.5.\r\nwhen open eclipse it show error &quot;java virtual machine launcher&quot;\r\nI follow up solve method from google 3 method is still unable.\r\n\r\n1.Insert variable \r\nVariable name (1): _JAVA_OPTIONS\r\nVariable name (2):  –Xmx512M\r\n\r\n2.Run JAVA on Administator\r\n\r\n3.Re-install JAVA\r\n\r\nPlease see error below picture\r\n[enter image description here](https://i.stack.imgur.com/WGm25.png)\r\n\r\nRemark:Eclipse 2023 is can be used normally.\r\n\r\nI want to use Eclipse 2019-03R in normally","title":"I couldn&#39;t open Eclipse and show error java virtual machine launcher","body":"<p>I need to use eclipse-java-2019-03-R-win32-x86_64 with WebSphere 8.5.\nwhen open eclipse it show error &quot;java virtual machine launcher&quot;\nI follow up solve method from google 3 method is still unable.</p>\n<p>1.Insert variable\nVariable name (1): _JAVA_OPTIONS\nVariable name (2):  –Xmx512M</p>\n<p>2.Run JAVA on Administator</p>\n<p>3.Re-install JAVA</p>\n<p>Please see error below picture\n<a href=\"https://i.stack.imgur.com/WGm25.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Remark:Eclipse 2023 is can be used normally.</p>\n<p>I want to use Eclipse 2019-03R in normally</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1684337936,"post_id":76273811,"comment_id":134504572,"body_markdown":"`replaceAll(&quot;\\r\\n&quot;, &quot;&quot;);` has a limited scope - basically Windows line separators that are &#39;error free&#39;. `replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);` would be better","body":"<code>replaceAll(&quot;\\r\\n&quot;, &quot;&quot;);</code> has a limited scope - basically Windows line separators that are &#39;error free&#39;. <code>replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);</code> would be better"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684338076,"post_id":76273811,"comment_id":134504594,"body_markdown":"Changing any character after signing may break the signature.","body":"Changing any character after signing may break the signature."},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684338291,"post_id":76273811,"comment_id":134504654,"body_markdown":"Thanks for your answer. I did it but  it still throws invalid signature  when i try to to validate the file.","body":"Thanks for your answer. I did it but  it still throws invalid signature  when i try to to validate the file."},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684338702,"post_id":76273811,"comment_id":134504776,"body_markdown":"thanks @aled i deleted all the  changes after signing but still  invalid","body":"thanks @aled i deleted all the  changes after signing but still  invalid"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684340162,"post_id":76273811,"comment_id":134505117,"body_markdown":"You haven&#39;t told us *how* you&#39;re testing the signature","body":"You haven&#39;t told us <i>how</i> you&#39;re testing the signature"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684340942,"post_id":76273811,"comment_id":134505315,"body_markdown":"I have to send the  signed XML to the server of the entity  that  gave me the  certificate but i want to know if  my  code meet all of the criteria that  the entity told me that they need for this  to be valid   because  I&#39;m a c# developer and  i did it on c# and worked perfectly   but in java  with the same XML  I&#39;m generating different SignatureValue and DigestValue.","body":"I have to send the  signed XML to the server of the entity  that  gave me the  certificate but i want to know if  my  code meet all of the criteria that  the entity told me that they need for this  to be valid   because  I&#39;m a c# developer and  i did it on c# and worked perfectly   but in java  with the same XML  I&#39;m generating different SignatureValue and DigestValue."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684341416,"post_id":76273811,"comment_id":134505405,"body_markdown":"Wouldn&#39;t hurt to post the C#. There are many things that could break it - right from the start, e.g. the encoding with which it&#39;s read","body":"Wouldn&#39;t hurt to post the C#. There are many things that could break it - right from the start, e.g. the encoding with which it&#39;s read"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684342486,"post_id":76273811,"comment_id":134505610,"body_markdown":"That doesn&#39;t help me but might help someone else ;)","body":"That doesn&#39;t help me but might help someone else ;)"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684342644,"post_id":76273811,"comment_id":134505653,"body_markdown":"It&#39;s okey thanks for your help @g00se","body":"It&#39;s okey thanks for your help @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684343570,"post_id":76273811,"comment_id":134505849,"body_markdown":"Have you inspected in detail the differences in the C# and Java output?","body":"Have you inspected in detail the differences in the C# and Java output?"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684346891,"post_id":76273811,"comment_id":134506563,"body_markdown":"The only difference in the output file generated is the SignatureValue and DigestValue.","body":"The only difference in the output file generated is the SignatureValue and DigestValue."}],"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684341883,"creation_date":1684337638,"question_id":76273811,"body_markdown":"I have this java code with which I can sign an XML file with a .p12 certificate. \r\n\r\nThe requirements for this signature are the signatureMethod and the digetsMethod need to use sha256 as the encryption algorithm. \r\n\r\nThe DigestValue should be the Property that contains the value encoded in Base 64 format of the summary of the object described by the Uri property in the reference tag.\r\n\r\nIn this case, what changes should we make in order to meet all of this requirements. Also the requirement needs that the xml does not preserve white spaces.\r\n\r\nCurrently I am getting invalid signature when I test the signed XML.\r\n\r\nHere is my code bellow so far: \r\n\r\n```\r\npackage xmlCreateSignature;\r\nimport java.io.*;\r\nimport java.security.*;\r\nimport java.security.cert.Certificate;\r\nimport java.security.cert.CertificateException;\r\nimport java.util.Collections;\r\nimport javax.xml.XMLConstants;\r\nimport javax.xml.crypto.*;\r\nimport javax.xml.crypto.dom.*;\r\nimport javax.xml.crypto.dsig.*;\r\nimport javax.xml.crypto.dsig.dom.*;\r\nimport javax.xml.crypto.dsig.keyinfo.*;\r\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\r\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\r\nimport javax.xml.parsers.*;\r\nimport javax.xml.transform.*;\r\nimport javax.xml.transform.dom.*;\r\nimport javax.xml.transform.stream.*;\r\nimport org.w3c.dom.Element;\r\nimport org.w3c.dom.Node;\r\n\r\npublic class testesas {\t\r\n  public static  void main(String[] args) throws Exception {\r\n\t  \r\n System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\r\n String pass =&quot;pass&quot; ;\r\n // Load the XML document\r\n DocumentBuilderFactory dbf =  DocumentBuilderFactory.newInstance( );\r\n  \r\n dbf.setIgnoringElementContentWhitespace(true);\r\n// dbf.setNamespaceAware(false);\r\n dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n DocumentBuilder builder = dbf.newDocumentBuilder();\r\n\r\n org.w3c.dom.Document doc = builder.parse(new File(&quot;./documents/request.xml&quot;));\r\n doc.getDocumentElement().normalize();\r\n\r\n // Load the certificate and private key from the .p12 file\r\n String providerName=&quot;SunJSSE&quot;;\r\n KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, providerName);\r\n ks.load(new FileInputStream(&quot;./documents/4300648_identity.p12&quot;), pass.toCharArray());\r\n String alias = (String) ks.aliases().nextElement();\r\n PrivateKey privateKey = (PrivateKey) ks.getKey(alias, pass.toCharArray());\r\n Certificate cert = ks.getCertificate(alias);\r\n\r\n // Create a DOM XMLSignatureFactory that will be used to generate the signature\r\n XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\r\n\r\n  // Create a Reference to the whole document, using SHA256 digest algorithm\r\n  Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null),\r\n Collections.singletonList(\r\n\t\t fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\r\n\r\n // Create a SignedInfo with the above Reference\r\n SignedInfo si = fac.newSignedInfo( \r\n fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE,\r\n(C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256 , null),\r\nCollections.singletonList(ref));\r\n\r\n // Create a KeyInfo with the certificate information\r\n KeyInfoFactory kif = fac.getKeyInfoFactory();\r\n\r\n X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\r\n KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\r\n\r\n // Create a new XML signature and sign the document with the private key\r\n DOMSignContext dsc = new DOMSignContext(privateKey, doc.getDocumentElement());\r\n XMLSignature signature = fac.newXMLSignature(si, ki);\r\n \r\n signature.sign(dsc);\r\n\r\n // Save the signed document to a file\r\n TransformerFactory tf = TransformerFactory.newInstance();\r\n Transformer trans = tf.newTransformer();\r\n\r\n StreamResult result = new StreamResult(new FileOutputStream(&quot;./documents/response.xml&quot;));\r\n \r\n\r\n trans.transform(new DOMSource(doc), result);\r\n System.out.println(&quot;XML document signed successfully.&quot;);\r\n  \r\n  } \r\n}\r\n```\r\n\r\n**Bellow code is a fully functional C# code that is  generating valid signatures but for this case I need this to be generated on java**\r\n\r\n```\r\n//this is the class that generates the XML signed\r\n  using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Runtime.Intrinsics.X86;\r\nusing System.Security.Cryptography.X509Certificates;\r\nusing System.Security.Cryptography.Xml;\r\nusing System.Text;\r\nusing System.Threading.Tasks;\r\nusing System.Xml;\r\n\r\nnamespace ConsoleApp2\r\n{\r\n     class xmlSign\r\n    {\r\n\r\n\r\n      \r\n\r\n        public XmlDocument SignXmlWithP12(XmlDocument? xmlDoc, X509Certificate2 cert)\r\n        {\r\n            //Obtenemos la llave privada del certificado\r\n            var llavePrivada = cert.PrivateKey;\r\n            //Creamos un SignedXml object que contendr&#225; el documento.\r\n            SignedXml xmlFirmado = new SignedXml(xmlDoc);\r\n            //Atachamos la llave privada al SignedXml document.\r\n            xmlFirmado.SigningKey = llavePrivada;\r\n            //Creamos una referencia del documento a ser firmado.\r\n            Reference reference = new Reference(); \r\n            reference.Uri   = &quot;&quot;; //Todo el documento\r\n                  //Agregamos un enveloped transformation a la referencia.\r\n            XmlDsigEnvelopedSignatureTransform env = new\r\n            XmlDsigEnvelopedSignatureTransform(true);\r\n            reference.AddTransform(env);\r\n            //Agregamos la referencia al SignedXml object.\r\n            xmlFirmado.AddReference(reference);\r\n            //Creamos un KeyInfo object.\r\n            KeyInfo keyInfo = new KeyInfo();\r\n            //Cargamos el certificado dentro de un KeyInfoX509Data object\r\n            //y luego lo a&#241;adimos al KeyInfo object.\r\n            KeyInfoX509Data clause = new KeyInfoX509Data();\r\n            //Opcionalmente se podr&#237;a agregar el Subject del certificado\r\n            //clause.AddSubjectName(cert.Subject);\r\n            clause.AddCertificate(cert);\r\n            keyInfo.AddClause(clause);\r\n            //Asignamos el KeyInfo object al SignedXml object.\r\n            xmlFirmado.KeyInfo = keyInfo; //Procedemos a\r\n            //computar la firma.\r\n                xmlFirmado.ComputeSignature();\r\n            //Obtenemos la representaci&#243;n del XML firmado y la guardamos en un\r\n          //  XmlElement object\r\n            XmlElement xmlFirmaDigital = xmlFirmado.GetXml();\r\n            //Adicionamos el elemento de la firma al documento XML.\r\n            xmlDoc.DocumentElement.AppendChild(xmlDoc.ImportNode(xmlFirmaDigital, true));\r\n            \r\n            return xmlDoc;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n\r\n\r\n    }\r\n}\r\n\r\n \r\n\r\n\r\n// this is the main class\r\n\r\n\r\nusing ConsoleApp2;\r\nusing System.Security.Cryptography.X509Certificates;\r\nusing System.Xml;\r\n\r\nxmlSign xmlsignedDOC= new xmlSign();\r\nXmlDocument doc = new XmlDocument(  );\r\n\r\ndoc.PreserveWhitespace = false;\r\ndoc.Load(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\r\n\r\n\r\n\r\nX509Certificate2 cert =\r\n\r\n    new X509Certificate2(\r\n\r\n\r\n        fileName: &quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\4300648_identity.p12&quot;,\r\n        password:\r\n\r\n        &quot;pass&quot;\r\n\r\n        );\r\n   \r\n\r\ndoc = xmlsignedDOC.SignXmlWithP12(doc, cert) ;\r\n\r\n\r\ndoc.Save(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\r\n\r\n```\r\nI am able to generate the signed xml, but the digestValue and the SignatureValue are different that what are expected to be, and this results in invalid signature when I test it. \r\n\r\n","title":"Invalid XML sign response with java signature method","body":"<p>I have this java code with which I can sign an XML file with a .p12 certificate.</p>\n<p>The requirements for this signature are the signatureMethod and the digetsMethod need to use sha256 as the encryption algorithm.</p>\n<p>The DigestValue should be the Property that contains the value encoded in Base 64 format of the summary of the object described by the Uri property in the reference tag.</p>\n<p>In this case, what changes should we make in order to meet all of this requirements. Also the requirement needs that the xml does not preserve white spaces.</p>\n<p>Currently I am getting invalid signature when I test the signed XML.</p>\n<p>Here is my code bellow so far:</p>\n<pre><code>package xmlCreateSignature;\nimport java.io.*;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.util.Collections;\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.*;\nimport javax.xml.crypto.dom.*;\nimport javax.xml.crypto.dsig.*;\nimport javax.xml.crypto.dsig.dom.*;\nimport javax.xml.crypto.dsig.keyinfo.*;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.*;\nimport javax.xml.transform.stream.*;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\n\npublic class testesas { \n  public static  void main(String[] args) throws Exception {\n      \n System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\n String pass =&quot;pass&quot; ;\n // Load the XML document\n DocumentBuilderFactory dbf =  DocumentBuilderFactory.newInstance( );\n  \n dbf.setIgnoringElementContentWhitespace(true);\n// dbf.setNamespaceAware(false);\n dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n DocumentBuilder builder = dbf.newDocumentBuilder();\n\n org.w3c.dom.Document doc = builder.parse(new File(&quot;./documents/request.xml&quot;));\n doc.getDocumentElement().normalize();\n\n // Load the certificate and private key from the .p12 file\n String providerName=&quot;SunJSSE&quot;;\n KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, providerName);\n ks.load(new FileInputStream(&quot;./documents/4300648_identity.p12&quot;), pass.toCharArray());\n String alias = (String) ks.aliases().nextElement();\n PrivateKey privateKey = (PrivateKey) ks.getKey(alias, pass.toCharArray());\n Certificate cert = ks.getCertificate(alias);\n\n // Create a DOM XMLSignatureFactory that will be used to generate the signature\n XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n\n  // Create a Reference to the whole document, using SHA256 digest algorithm\n  Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null),\n Collections.singletonList(\n         fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\n\n // Create a SignedInfo with the above Reference\n SignedInfo si = fac.newSignedInfo( \n fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE,\n(C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256 , null),\nCollections.singletonList(ref));\n\n // Create a KeyInfo with the certificate information\n KeyInfoFactory kif = fac.getKeyInfoFactory();\n\n X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\n KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\n\n // Create a new XML signature and sign the document with the private key\n DOMSignContext dsc = new DOMSignContext(privateKey, doc.getDocumentElement());\n XMLSignature signature = fac.newXMLSignature(si, ki);\n \n signature.sign(dsc);\n\n // Save the signed document to a file\n TransformerFactory tf = TransformerFactory.newInstance();\n Transformer trans = tf.newTransformer();\n\n StreamResult result = new StreamResult(new FileOutputStream(&quot;./documents/response.xml&quot;));\n \n\n trans.transform(new DOMSource(doc), result);\n System.out.println(&quot;XML document signed successfully.&quot;);\n  \n  } \n}\n</code></pre>\n<p><strong>Bellow code is a fully functional C# code that is  generating valid signatures but for this case I need this to be generated on java</strong></p>\n<pre><code>//this is the class that generates the XML signed\n  using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Intrinsics.X86;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Security.Cryptography.Xml;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Xml;\n\nnamespace ConsoleApp2\n{\n     class xmlSign\n    {\n\n\n      \n\n        public XmlDocument SignXmlWithP12(XmlDocument? xmlDoc, X509Certificate2 cert)\n        {\n            //Obtenemos la llave privada del certificado\n            var llavePrivada = cert.PrivateKey;\n            //Creamos un SignedXml object que contendrá el documento.\n            SignedXml xmlFirmado = new SignedXml(xmlDoc);\n            //Atachamos la llave privada al SignedXml document.\n            xmlFirmado.SigningKey = llavePrivada;\n            //Creamos una referencia del documento a ser firmado.\n            Reference reference = new Reference(); \n            reference.Uri   = &quot;&quot;; //Todo el documento\n                  //Agregamos un enveloped transformation a la referencia.\n            XmlDsigEnvelopedSignatureTransform env = new\n            XmlDsigEnvelopedSignatureTransform(true);\n            reference.AddTransform(env);\n            //Agregamos la referencia al SignedXml object.\n            xmlFirmado.AddReference(reference);\n            //Creamos un KeyInfo object.\n            KeyInfo keyInfo = new KeyInfo();\n            //Cargamos el certificado dentro de un KeyInfoX509Data object\n            //y luego lo añadimos al KeyInfo object.\n            KeyInfoX509Data clause = new KeyInfoX509Data();\n            //Opcionalmente se podría agregar el Subject del certificado\n            //clause.AddSubjectName(cert.Subject);\n            clause.AddCertificate(cert);\n            keyInfo.AddClause(clause);\n            //Asignamos el KeyInfo object al SignedXml object.\n            xmlFirmado.KeyInfo = keyInfo; //Procedemos a\n            //computar la firma.\n                xmlFirmado.ComputeSignature();\n            //Obtenemos la representación del XML firmado y la guardamos en un\n          //  XmlElement object\n            XmlElement xmlFirmaDigital = xmlFirmado.GetXml();\n            //Adicionamos el elemento de la firma al documento XML.\n            xmlDoc.DocumentElement.AppendChild(xmlDoc.ImportNode(xmlFirmaDigital, true));\n            \n            return xmlDoc;\n        }\n\n\n\n\n\n\n      \n\n\n    }\n}\n\n \n\n\n// this is the main class\n\n\nusing ConsoleApp2;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Xml;\n\nxmlSign xmlsignedDOC= new xmlSign();\nXmlDocument doc = new XmlDocument(  );\n\ndoc.PreserveWhitespace = false;\ndoc.Load(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n\n\nX509Certificate2 cert =\n\n    new X509Certificate2(\n\n\n        fileName: &quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\4300648_identity.p12&quot;,\n        password:\n\n        &quot;pass&quot;\n\n        );\n   \n\ndoc = xmlsignedDOC.SignXmlWithP12(doc, cert) ;\n\n\ndoc.Save(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n</code></pre>\n<p>I am able to generate the signed xml, but the digestValue and the SignatureValue are different that what are expected to be, and this results in invalid signature when I test it.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1684342100,"post_id":76273769,"comment_id":134505535,"body_markdown":"What version of Spring Boot do you use?","body":"What version of Spring Boot do you use?"},{"owner":{"account_id":28621417,"reputation":1,"user_id":21914390,"display_name":"ksushagolubeffa"},"score":0,"creation_date":1684425050,"post_id":76273769,"comment_id":134518702,"body_markdown":"I found a problem. Instead of &quot;public&quot; modificator on Controller&#39;‎s methods I used &quot;private&quot;. So it didn&#39;‎t work.","body":"I found a problem. Instead of &quot;public&quot; modificator on Controller&#39;‎s methods I used &quot;private&quot;. So it didn&#39;‎t work."}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684337996,"creation_date":1684337996,"answer_id":76273861,"question_id":76273769,"body_markdown":"The service needs to be injected before using\r\n\r\n    @Autowired\r\n    private final MediaContentServiceImpl service;\r\n\r\nThe same applies to the other dependencies, e.g. repositories","title":"Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null","body":"<p>The service needs to be injected before using</p>\n<pre><code>@Autowired\nprivate final MediaContentServiceImpl service;\n</code></pre>\n<p>The same applies to the other dependencies, e.g. repositories</p>\n"}],"owner":{"account_id":28621417,"reputation":1,"user_id":21914390,"display_name":"ksushagolubeffa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684341730,"creation_date":1684337351,"question_id":76273769,"body_markdown":"I am creating Spring Boot App. \r\nThere I have MediaContent Entity:\r\n\r\n```\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\n@Table(name = &quot;media_content&quot;)\r\npublic class MediaContent extends AbstractEntity{\r\n\r\n    @Column(unique = true)\r\n    private String name;\r\n    @Column\r\n    @Lob\r\n    private byte[] video;\r\n    @Column\r\n    @Lob\r\n    private byte[] previewImage;\r\n    @Column\r\n    private String description;\r\n    @Column\r\n    @Enumerated(value = EnumType.STRING)\r\n    private Status status;\r\n\r\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\r\n    @JoinColumn\r\n    private User user;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\r\n    private List&lt;Like&gt; likes = new ArrayList&lt;&gt;();\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\r\n    private List&lt;MediaComments&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n    public enum Status{\r\n        ACCEPTED, REJECTED, UNDER_REVIEW\r\n        }\r\n}\r\n```\r\n\r\nAlso I have MediaConentRepository, Service and Service Implementation\r\n\r\n```\r\npublic interface MediaContentRepository extends JpaRepository&lt;MediaContent, UUID&gt; {\r\n    MediaContent findMediaContentByName(String name);\r\n}\r\n```\r\n\r\n```\r\npublic interface MediaContentService {\r\n\r\n    List&lt;MediaContent&gt; findAllContent();\r\n\r\n    List&lt;MediaComments&gt; findAllComments(MediaContent content);\r\n\r\n    Integer getAllLikes(MediaContent content);\r\n\r\n    boolean isLiked(MediaContent content, Principal principal);\r\n\r\n    User getUserByPrincipal(Principal principal);\r\n\r\n    MediaContent findContentById(UUID id);\r\n\r\n    void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\r\n\r\n    void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\r\n\r\n    boolean deleteMediaContent(User user, UUID id);\r\n}\r\n```\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MediaContentServiceImpl implements MediaContentService {\r\n\r\n    private final MediaContentRepository repository;\r\n    private final UserRepository userRepository;\r\n    private final MediaCommentsRepository commentsRepository;\r\n\r\n    @Override\r\n    public List&lt;MediaContent&gt; findAllContent() {\r\n        return repository.findAll().stream().filter(content -&gt; content.getStatus()== MediaContent.Status.ACCEPTED).collect(Collectors.toList());\r\n    }\r\n\r\n    @Override\r\n    public List&lt;MediaComments&gt; findAllComments(MediaContent content) {\r\n        List&lt;MediaComments&gt; commentList = new ArrayList&lt;&gt;();\r\n        commentsRepository.findAll().forEach(comments -&gt; {\r\n            if(comments.getMediaID().equals(content.getUuid())){\r\n                commentList.add(comments);\r\n            }\r\n        });\r\n        return commentList;\r\n    }\r\n\r\n    @Override\r\n    public Integer getAllLikes(MediaContent content) {\r\n        return content.getLikes().size();\r\n    }\r\n\r\n    @Override\r\n    public boolean isLiked(MediaContent content, Principal principal) {\r\n        User user = userRepository.findUserByUsername(principal.getName());\r\n        if(content.getLikes().stream().filter(like-&gt;like.getUser()==user).count() == 1){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public MediaContent findContentById(UUID id) {\r\n        return repository.findById(id).orElse(null);\r\n    }\r\n\r\n    @Override\r\n    public void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\r\n        MediaContent content1 = repository.findById(content.getUuid()).orElse(null);\r\n        if(content1!=null){\r\n            byte[] imageBytes = imageFile.getBytes();\r\n            content.setPreviewImage(imageBytes);\r\n            byte[] videoBytes = videoFile.getBytes();\r\n            content.setVideo(videoBytes);\r\n            content.setStatus(MediaContent.Status.UNDER_REVIEW);\r\n            repository.delete(content1);\r\n            repository.save(content);\r\n        } else{\r\n            log.error(&quot;not such content1 in database&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\r\n        User user = getUserByPrincipal(principal);\r\n        if(user.getRole() == User.Role.ADMIN){\r\n            content.setStatus(MediaContent.Status.ACCEPTED);\r\n        }\r\n        content.setUser(user);\r\n        byte[] imageBytes = imageFile.getBytes();\r\n        byte[] videoBytes = videoFile.getBytes();\r\n        content.setVideo(videoBytes);\r\n        content.setPreviewImage(imageBytes);\r\n        repository.save(content);\r\n    }\r\n\r\n    @Override\r\n    public User getUserByPrincipal(Principal principal) {\r\n        if (principal == null) return new User();\r\n        return userRepository.findUserByUsername(principal.getName());\r\n    }\r\n\r\n    @Override\r\n    public boolean deleteMediaContent(User user, UUID id) {\r\n        MediaContent content = repository.findById(id).orElse(null);\r\n        if(content!=null){\r\n            if(content.getUser().getUuid().equals(user.getUuid())){\r\n                repository.delete(content);\r\n                return true;\r\n            }\r\n            log.error(&quot;Media content with id = {} is not found&quot;, id);\r\n\r\n        } else{\r\n            log.error(&quot;not such content in database&quot;);\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nI want to get all my media content. I wrote 2 different methods for RestController:\r\n\r\n```\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class MediaContentController {\r\n    private final MediaContentServiceImpl service;\r\n\r\n    @PermitAll\r\n    @GetMapping(&quot;/media&quot;)\r\n    @ResponseBody\r\n    private List&lt;MediaContentResponse&gt; getAllMediaContents(){\r\n        List&lt;MediaContent&gt; contentList = service.findAllContent();\r\n        List&lt;MediaContentResponse&gt; list = new ArrayList&lt;&gt;();\r\n        contentList.forEach(content -&gt; {\r\n            list.add(new MediaContentResponse(\r\n                    content.getUuid(), content.getName(), content.getDescription(), content.getUser()\r\n            ));\r\n        });\r\n        return list;\r\n    }\r\n\r\n    @PermitAll\r\n    @GetMapping(&quot;/media&quot;)\r\n    public ResponseEntity&lt;List&lt;MediaContent&gt;&gt; getAll(){\r\n        List&lt;MediaContent&gt; mediaContents = service.findAllContent();\r\n        return ResponseEntity.ok(mediaContents);\r\n    }\r\n}\r\n```\r\n\r\nbut in first case I have this exception &quot;Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null&quot;. when I use the second one, I get data\r\n\r\nPlease, help me, where is the problem? I have exception like this in my other controllers. I tried to remove some annotations, change RestController to Controller, but all this didn`t help me.`your text`","title":"Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null","body":"<p>I am creating Spring Boot App.\nThere I have MediaContent Entity:</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Table(name = &quot;media_content&quot;)\npublic class MediaContent extends AbstractEntity{\n\n    @Column(unique = true)\n    private String name;\n    @Column\n    @Lob\n    private byte[] video;\n    @Column\n    @Lob\n    private byte[] previewImage;\n    @Column\n    private String description;\n    @Column\n    @Enumerated(value = EnumType.STRING)\n    private Status status;\n\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\n    @JoinColumn\n    private User user;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;Like&gt; likes = new ArrayList&lt;&gt;();\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;MediaComments&gt; comments = new ArrayList&lt;&gt;();\n\n    public enum Status{\n        ACCEPTED, REJECTED, UNDER_REVIEW\n        }\n}\n</code></pre>\n<p>Also I have MediaConentRepository, Service and Service Implementation</p>\n<pre><code>public interface MediaContentRepository extends JpaRepository&lt;MediaContent, UUID&gt; {\n    MediaContent findMediaContentByName(String name);\n}\n</code></pre>\n<pre><code>public interface MediaContentService {\n\n    List&lt;MediaContent&gt; findAllContent();\n\n    List&lt;MediaComments&gt; findAllComments(MediaContent content);\n\n    Integer getAllLikes(MediaContent content);\n\n    boolean isLiked(MediaContent content, Principal principal);\n\n    User getUserByPrincipal(Principal principal);\n\n    MediaContent findContentById(UUID id);\n\n    void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    boolean deleteMediaContent(User user, UUID id);\n}\n</code></pre>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class MediaContentServiceImpl implements MediaContentService {\n\n    private final MediaContentRepository repository;\n    private final UserRepository userRepository;\n    private final MediaCommentsRepository commentsRepository;\n\n    @Override\n    public List&lt;MediaContent&gt; findAllContent() {\n        return repository.findAll().stream().filter(content -&gt; content.getStatus()== MediaContent.Status.ACCEPTED).collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;MediaComments&gt; findAllComments(MediaContent content) {\n        List&lt;MediaComments&gt; commentList = new ArrayList&lt;&gt;();\n        commentsRepository.findAll().forEach(comments -&gt; {\n            if(comments.getMediaID().equals(content.getUuid())){\n                commentList.add(comments);\n            }\n        });\n        return commentList;\n    }\n\n    @Override\n    public Integer getAllLikes(MediaContent content) {\n        return content.getLikes().size();\n    }\n\n    @Override\n    public boolean isLiked(MediaContent content, Principal principal) {\n        User user = userRepository.findUserByUsername(principal.getName());\n        if(content.getLikes().stream().filter(like-&gt;like.getUser()==user).count() == 1){\n            return true;\n        }\n        return false;\n    }\n\n    @Override\n    public MediaContent findContentById(UUID id) {\n        return repository.findById(id).orElse(null);\n    }\n\n    @Override\n    public void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        MediaContent content1 = repository.findById(content.getUuid()).orElse(null);\n        if(content1!=null){\n            byte[] imageBytes = imageFile.getBytes();\n            content.setPreviewImage(imageBytes);\n            byte[] videoBytes = videoFile.getBytes();\n            content.setVideo(videoBytes);\n            content.setStatus(MediaContent.Status.UNDER_REVIEW);\n            repository.delete(content1);\n            repository.save(content);\n        } else{\n            log.error(&quot;not such content1 in database&quot;);\n        }\n    }\n\n    @Override\n    public void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        User user = getUserByPrincipal(principal);\n        if(user.getRole() == User.Role.ADMIN){\n            content.setStatus(MediaContent.Status.ACCEPTED);\n        }\n        content.setUser(user);\n        byte[] imageBytes = imageFile.getBytes();\n        byte[] videoBytes = videoFile.getBytes();\n        content.setVideo(videoBytes);\n        content.setPreviewImage(imageBytes);\n        repository.save(content);\n    }\n\n    @Override\n    public User getUserByPrincipal(Principal principal) {\n        if (principal == null) return new User();\n        return userRepository.findUserByUsername(principal.getName());\n    }\n\n    @Override\n    public boolean deleteMediaContent(User user, UUID id) {\n        MediaContent content = repository.findById(id).orElse(null);\n        if(content!=null){\n            if(content.getUser().getUuid().equals(user.getUuid())){\n                repository.delete(content);\n                return true;\n            }\n            log.error(&quot;Media content with id = {} is not found&quot;, id);\n\n        } else{\n            log.error(&quot;not such content in database&quot;);\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>I want to get all my media content. I wrote 2 different methods for RestController:</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class MediaContentController {\n    private final MediaContentServiceImpl service;\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    @ResponseBody\n    private List&lt;MediaContentResponse&gt; getAllMediaContents(){\n        List&lt;MediaContent&gt; contentList = service.findAllContent();\n        List&lt;MediaContentResponse&gt; list = new ArrayList&lt;&gt;();\n        contentList.forEach(content -&gt; {\n            list.add(new MediaContentResponse(\n                    content.getUuid(), content.getName(), content.getDescription(), content.getUser()\n            ));\n        });\n        return list;\n    }\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    public ResponseEntity&lt;List&lt;MediaContent&gt;&gt; getAll(){\n        List&lt;MediaContent&gt; mediaContents = service.findAllContent();\n        return ResponseEntity.ok(mediaContents);\n    }\n}\n</code></pre>\n<p>but in first case I have this exception &quot;Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null&quot;. when I use the second one, I get data</p>\n<p>Please, help me, where is the problem? I have exception like this in my other controllers. I tried to remove some annotations, change RestController to Controller, but all this didn<code>t help me.</code>your text`</p>\n"},{"tags":["java","amazon-web-services","testcontainers","aws-secrets-manager","localstack"],"comments":[{"owner":{"account_id":4641623,"reputation":8831,"user_id":3761297,"accept_rate":94,"display_name":"committedandroider"},"score":0,"creation_date":1574105923,"post_id":58914341,"comment_id":104104795,"body_markdown":"&#39;How could I configure the LocalStackContainer to accept requests without any credentials validation going on?&#39;    - I don&#39;t think you can because you&#39;re trying to make requests to aws secretsmanager which requires valid aws credentials","body":"&#39;How could I configure the LocalStackContainer to accept requests without any credentials validation going on?&#39;    - I don&#39;t think you can because you&#39;re trying to make requests to aws secretsmanager which requires valid aws credentials"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616464196,"post_id":58914341,"comment_id":118005093,"body_markdown":"@Ira Re, I am also facing the same issue. did you find any solution?","body":"@Ira Re, I am also facing the same issue. did you find any solution?"},{"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"score":0,"creation_date":1616505597,"post_id":58914341,"comment_id":118018453,"body_markdown":"I don&#39;t exactly remember how the error was solved. I can see now that my LocalStackContainer has two other env vars:\n.withEnv(&quot;HOSTNAME&quot;, &quot;https://secretsmanager.eu-west-1.amazonaws.com&quot;)\n.withEnv(&quot;LOCALSTACK_HOSTNAME&quot;, &quot;https://secretsmanager.eu-west-1.amazonaws.com&quot;)\nNot sure though, if that&#39;s what I was missing.","body":"I don&#39;t exactly remember how the error was solved. I can see now that my LocalStackContainer has two other env vars: .withEnv(&quot;HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) .withEnv(&quot;LOCALSTACK_HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) Not sure though, if that&#39;s what I was missing."},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616594674,"post_id":58914341,"comment_id":118051425,"body_markdown":"Thanks for the quick reply. I have tried but still, I get the same error. Could you please have a look https://github.com/testcontainers/testcontainers-java/issues/3926.","body":"Thanks for the quick reply. I have tried but still, I get the same error. Could you please have a look <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3926\" rel=\"nofollow noreferrer\">github.com/testcontainers/testcontainers-java/issues/3926</a>."},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616602117,"post_id":58914341,"comment_id":118055604,"body_markdown":"@Ira Re instead of secretsmanager.eu-west-1.amazonaws.com I use localhost.. – unknown 2 hours ago   Delete","body":"@Ira Re instead of secretsmanager.eu-west-1.amazonaws.com I use localhost.. – unknown 2 hours ago   Delete"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616647253,"post_id":58914341,"comment_id":118069912,"body_markdown":"@Ira Re, it would be great if you post the answer here with a sample working code","body":"@Ira Re, it would be great if you post the answer here with a sample working code"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616762770,"post_id":58914341,"comment_id":118111373,"body_markdown":"you can find the working sample here https://stackoverflow.com/questions/66811893/localstack-throws-the-security-token-included-in-the-request-is-invalid","body":"you can find the working sample here <a href=\"https://stackoverflow.com/questions/66811893/localstack-throws-the-security-token-included-in-the-request-is-invalid\" title=\"localstack throws the security token included in the request is invalid\">stackoverflow.com/questions/66811893/&hellip;</a>"},{"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"score":0,"creation_date":1617275047,"post_id":58914341,"comment_id":118262014,"body_markdown":"Thanks for posting the answer here. Sorry, didn&#39;t have time to get to it earlier.","body":"Thanks for posting the answer here. Sorry, didn&#39;t have time to get to it earlier."}],"answers":[{"tags":[],"owner":{"account_id":15398959,"reputation":1,"user_id":11109107,"display_name":"Глеб Заборовский"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684341565,"creation_date":1640049937,"answer_id":70429727,"question_id":58914341,"body_markdown":"Assuming you prefer spring boot test and junit5 over alternatives, `@DynamicPropertySource` can be quite handy here\r\n```java\r\nprivate static final LocalStackContainer LOCALSTACK = ...;\r\n\r\n@DynamicPropertySource\r\nstatic void setCredentials(DynamicPropertyRegistry registry) {\r\n    var credentials = LOCALSTACK.getDefaultCredentialsProvider().getCredentials();\r\n    registry.add(&quot;cloud.aws.region.static&quot;, () -&gt; &quot;eu-central-1&quot;);\r\n    registry.add(&quot;cloud.aws.credentials.access-key&quot;, () -&gt; credentials.getAWSAccessKeyId());\r\n    registry.add(&quot;cloud.aws.credentials.secret-key&quot;, () -&gt; credentials.getAWSSecretKey());\r\n    registry.add(&quot;cloud.aws.s3.endpoint&quot;, () -&gt; LOCALSTACK.getEndpointOverride(S3));\r\n}\r\n```\r\nAlso please doublecheck you&#39;ve overridden the endpoints you rely on (s3 in my example), otherwise you may request real AWS API instead of the containerized one","title":"How to setup Localstack container not requiring credentials?","body":"<p>Assuming you prefer spring boot test and junit5 over alternatives, <code>@DynamicPropertySource</code> can be quite handy here</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final LocalStackContainer LOCALSTACK = ...;\n\n@DynamicPropertySource\nstatic void setCredentials(DynamicPropertyRegistry registry) {\n    var credentials = LOCALSTACK.getDefaultCredentialsProvider().getCredentials();\n    registry.add(&quot;cloud.aws.region.static&quot;, () -&gt; &quot;eu-central-1&quot;);\n    registry.add(&quot;cloud.aws.credentials.access-key&quot;, () -&gt; credentials.getAWSAccessKeyId());\n    registry.add(&quot;cloud.aws.credentials.secret-key&quot;, () -&gt; credentials.getAWSSecretKey());\n    registry.add(&quot;cloud.aws.s3.endpoint&quot;, () -&gt; LOCALSTACK.getEndpointOverride(S3));\n}\n</code></pre>\n<p>Also please doublecheck you've overridden the endpoints you rely on (s3 in my example), otherwise you may request real AWS API instead of the containerized one</p>\n"}],"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2949,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1684341565,"creation_date":1574079309,"question_id":58914341,"body_markdown":"I have following code snippet, that is supposed to run in a AWS Lambda function:\r\n\r\n    AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(AWS_REGION).build();\r\n    GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest().withSecretId(SECRET_NAME);\r\n    GetSecretValueResult secretValue = client.getSecretValue(getSecretValueRequest);\r\n\r\nAs the lambda function is going to be run in the same VPC as the secret manager I don&#39;t have to provide credentials (`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`) for it.\r\n\r\nI use Localstack with Testcontainers for integration tests and set up the secret in the test setup like this:\r\n\r\n    AWSSecretsManager secretsManager = AWSSecretsManagerClientBuilder.standard()\r\n            .withEndpointConfiguration(secretsmanager.getEndpointConfiguration(SECRETSMANAGER))\r\n            .withCredentials(secretsmanager.getDefaultCredentialsProvider())\r\n            .build();\r\n    String secretString = &quot;{&#39;engine&#39;:&#39;mysql&#39;,&#39;port&#39;:&quot; + mysql.getMappedPort(3306) + &quot;,&#39;host&#39;:&#39;&quot; + mysql.getContainerIpAddress() + &quot;&#39;}&quot;;\r\n    CreateSecretRequest request = new CreateSecretRequest().withName(&quot;aurora&quot;)\r\n            .withSecretString(secretString)\r\n            .withRequestCredentialsProvider(secretsmanager.getDefaultCredentialsProvider());\r\n    secretsManager.createSecret(request);\r\n\r\nNow the test crashes with an error:\r\n\r\n    com.amazonaws.services.secretsmanager.model.AWSSecretsManagerException: \r\n    The security token included in the request is invalid. \r\n    (Service: AWSSecretsManager; \r\n    Status Code: 400; Error Code: \r\n    UnrecognizedClientException; \r\n    Request ID: ...\r\n\r\nHere is also the definition of the localstack container used in the test:\r\n\r\n    @ClassRule\r\n    public static LocalStackContainer secretsmanager = new LocalStackContainer(&quot;0.10.4&quot;)\r\n        .withServices(LocalStackContainer.Service.SECRETSMANAGER)\r\n        .withEnv(&quot;DEFAULT_REGION&quot;, &quot;eu-west-1&quot;)\r\n        .withExposedPorts(4584);\r\n\r\nHow could I configure the LocalStackContainer to accept requests without any credentials validation going on?","title":"How to setup Localstack container not requiring credentials?","body":"<p>I have following code snippet, that is supposed to run in a AWS Lambda function:</p>\n\n<pre><code>AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(AWS_REGION).build();\nGetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest().withSecretId(SECRET_NAME);\nGetSecretValueResult secretValue = client.getSecretValue(getSecretValueRequest);\n</code></pre>\n\n<p>As the lambda function is going to be run in the same VPC as the secret manager I don't have to provide credentials (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>) for it.</p>\n\n<p>I use Localstack with Testcontainers for integration tests and set up the secret in the test setup like this:</p>\n\n<pre><code>AWSSecretsManager secretsManager = AWSSecretsManagerClientBuilder.standard()\n        .withEndpointConfiguration(secretsmanager.getEndpointConfiguration(SECRETSMANAGER))\n        .withCredentials(secretsmanager.getDefaultCredentialsProvider())\n        .build();\nString secretString = \"{'engine':'mysql','port':\" + mysql.getMappedPort(3306) + \",'host':'\" + mysql.getContainerIpAddress() + \"'}\";\nCreateSecretRequest request = new CreateSecretRequest().withName(\"aurora\")\n        .withSecretString(secretString)\n        .withRequestCredentialsProvider(secretsmanager.getDefaultCredentialsProvider());\nsecretsManager.createSecret(request);\n</code></pre>\n\n<p>Now the test crashes with an error:</p>\n\n<pre><code>com.amazonaws.services.secretsmanager.model.AWSSecretsManagerException: \nThe security token included in the request is invalid. \n(Service: AWSSecretsManager; \nStatus Code: 400; Error Code: \nUnrecognizedClientException; \nRequest ID: ...\n</code></pre>\n\n<p>Here is also the definition of the localstack container used in the test:</p>\n\n<pre><code>@ClassRule\npublic static LocalStackContainer secretsmanager = new LocalStackContainer(\"0.10.4\")\n    .withServices(LocalStackContainer.Service.SECRETSMANAGER)\n    .withEnv(\"DEFAULT_REGION\", \"eu-west-1\")\n    .withExposedPorts(4584);\n</code></pre>\n\n<p>How could I configure the LocalStackContainer to accept requests without any credentials validation going on?</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684341394,"creation_date":1684208840,"answer_id":76259274,"question_id":76248485,"body_markdown":"Simple way to convert a for loop into Stream is to use IntStream with forEach method. The solution defers based on the version of JSON Library that you are using. Older version throws exception that needs to be handled within the Lambda, something like below:\r\n\r\n```\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nIntStream.range(0, notification.length()).forEach(index -&gt; {\r\n\ttry {\r\n\t\tnameJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;name&quot;).toString());\r\n\t\tsectionJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;section&quot;).toString());\r\n\t} catch (JSONException e) {\r\n\t\tthrow new RuntimeException(e);\r\n\t}\r\n});\r\n\r\n``` \r\n\r\nNewer version of the JSON Library does not throw Exception on get method, sample code that works with org.json:json:20230227 version looks like below:\r\n\r\n```\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nIntStream.range(0, notification.length()).mapToObj(notification::getJSONObject).forEach(jsonObject -&gt; {\r\n\tnameJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;name&quot;));\r\n\tsectionJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;section&quot;));\r\n});\r\n```\r\n\r\n\r\nFor performing reverse, assuming that you have nameJson and sectionJson objects handy you can try something like (works with latest version of org.json:json):\r\n\r\n```\r\nList&lt;JSONObject&gt; jsonObjectList = nameJson.keySet().stream().map(language -&gt; {\r\n\tJSONObject notificationJson = new JSONObject();\r\n\tnotificationJson.put(&quot;name&quot;, nameJson.getString(language));\r\n\tnotificationJson.put(&quot;section&quot;, sectionJson.getString(language));\r\n\treturn notificationJson.put(&quot;language&quot;, language);\r\n}).collect(Collectors.toList());\r\nJSONArray notificationsJson = new JSONArray().putAll(jsonObjectList);\r\n```","title":"How to write lambda streams function to work with jsonobject with different keys and json array","body":"<p>Simple way to convert a for loop into Stream is to use IntStream with forEach method. The solution defers based on the version of JSON Library that you are using. Older version throws exception that needs to be handled within the Lambda, something like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).forEach(index -&gt; {\n    try {\n        nameJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;name&quot;).toString());\n        sectionJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;section&quot;).toString());\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n});\n\n</code></pre>\n<p>Newer version of the JSON Library does not throw Exception on get method, sample code that works with org.json:json:20230227 version looks like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).mapToObj(notification::getJSONObject).forEach(jsonObject -&gt; {\n    nameJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;name&quot;));\n    sectionJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;section&quot;));\n});\n</code></pre>\n<p>For performing reverse, assuming that you have nameJson and sectionJson objects handy you can try something like (works with latest version of org.json:json):</p>\n<pre><code>List&lt;JSONObject&gt; jsonObjectList = nameJson.keySet().stream().map(language -&gt; {\n    JSONObject notificationJson = new JSONObject();\n    notificationJson.put(&quot;name&quot;, nameJson.getString(language));\n    notificationJson.put(&quot;section&quot;, sectionJson.getString(language));\n    return notificationJson.put(&quot;language&quot;, language);\n}).collect(Collectors.toList());\nJSONArray notificationsJson = new JSONArray().putAll(jsonObjectList);\n</code></pre>\n"}],"owner":{"account_id":13944236,"reputation":13,"user_id":10069344,"display_name":"sowmya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76259274,"answer_count":1,"score":0,"last_activity_date":1684341394,"creation_date":1684080843,"question_id":76248485,"body_markdown":"I&#39;m very new to Java 8 lambdas... I want to write a lambda function that takes a JSONArray, goes over its JSONObjects and creates a Json object of certain field.\r\n\r\nFor example, a function that takes the JSONArray:\r\n\r\n   \r\n\r\n    &quot;students&quot;: [\r\n        {\r\n                &quot;name&quot;: &quot;tom&quot;,\r\n                &quot;section&quot;: &quot;A&quot;,\r\n                &quot;language&quot;:&quot;english&quot;\r\n            \r\n        },\r\n        {\r\n                &quot;name&quot;: &quot;john&quot;,\r\n                &quot;section&quot;: &quot;B&quot;,\r\n                &quot;language&quot;:&quot;dutch&quot;\r\n        },\r\n        {\r\n               &quot;name&quot;: &quot;sam&quot;,\r\n                &quot;section&quot;: &quot;C&quot;,\r\n                &quot;language&quot;:&quot;spanish&quot;\r\n        }]\r\n\r\nMy output should be like-\r\n\r\n    nameJson : {&quot;english&quot;:&quot;tom&quot;,&quot;dutch&quot;:&quot;john&quot;,&quot;spanish&quot;:&quot;sam&quot;}\r\n    sectionJson: {&quot;english&quot;:&quot;A&quot;,&quot;dutch&quot;:&quot;B&quot;,&quot;spanish&quot;:&quot;C&quot;}\r\n\r\n```\r\nJSONArray notification=json.optJSONArray(&quot;studentData&quot;);\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nfor (int i=0;i&lt;notification.length();i++){\r\n    nameJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).get(&quot;name&quot;).toString());\r\n    sectionJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).getString(&quot;section&quot;).toString());\r\n    \r\n}\r\n```\r\n\r\nPlease help me out to write using lambda and streams\r\n","title":"How to write lambda streams function to work with jsonobject with different keys and json array","body":"<p>I'm very new to Java 8 lambdas... I want to write a lambda function that takes a JSONArray, goes over its JSONObjects and creates a Json object of certain field.</p>\n<p>For example, a function that takes the JSONArray:</p>\n<pre><code>&quot;students&quot;: [\n    {\n            &quot;name&quot;: &quot;tom&quot;,\n            &quot;section&quot;: &quot;A&quot;,\n            &quot;language&quot;:&quot;english&quot;\n        \n    },\n    {\n            &quot;name&quot;: &quot;john&quot;,\n            &quot;section&quot;: &quot;B&quot;,\n            &quot;language&quot;:&quot;dutch&quot;\n    },\n    {\n           &quot;name&quot;: &quot;sam&quot;,\n            &quot;section&quot;: &quot;C&quot;,\n            &quot;language&quot;:&quot;spanish&quot;\n    }]\n</code></pre>\n<p>My output should be like-</p>\n<pre><code>nameJson : {&quot;english&quot;:&quot;tom&quot;,&quot;dutch&quot;:&quot;john&quot;,&quot;spanish&quot;:&quot;sam&quot;}\nsectionJson: {&quot;english&quot;:&quot;A&quot;,&quot;dutch&quot;:&quot;B&quot;,&quot;spanish&quot;:&quot;C&quot;}\n</code></pre>\n<pre><code>JSONArray notification=json.optJSONArray(&quot;studentData&quot;);\nJSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nfor (int i=0;i&lt;notification.length();i++){\n    nameJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).get(&quot;name&quot;).toString());\n    sectionJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).getString(&quot;section&quot;).toString());\n    \n}\n</code></pre>\n<p>Please help me out to write using lambda and streams</p>\n"},{"tags":["java","android","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":10647346,"reputation":5549,"user_id":7839518,"display_name":"Tonnie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684341333,"creation_date":1684341333,"answer_id":76274329,"question_id":67998260,"body_markdown":"I was having the same error on a **`Multi-Modular`** Android Project.\r\n\r\nI had the app module with 3 other modules.\r\n\r\nIn each module I had specified **`coreLibraryDesugaringEnabled true`** on the compile options - see last line on this snippet.\r\n\r\n    compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_18\r\n            targetCompatibility JavaVersion.VERSION_18\r\n            coreLibraryDesugaringEnabled true\r\n        }\r\n\r\nThe way to get around this error in a Multi-Modular Project is to leave `coreLibraryDesugaringEnabled true` just on the app module file.\r\n\r\nYou should remove it in all other modules together with dependencies implementation.","title":"Android Build Error - MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26) (apache poi)","body":"<p>I was having the same error on a <strong><code>Multi-Modular</code></strong> Android Project.</p>\n<p>I had the app module with 3 other modules.</p>\n<p>In each module I had specified <strong><code>coreLibraryDesugaringEnabled true</code></strong> on the compile options - see last line on this snippet.</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_18\n        targetCompatibility JavaVersion.VERSION_18\n        coreLibraryDesugaringEnabled true\n    }\n</code></pre>\n<p>The way to get around this error in a Multi-Modular Project is to leave <code>coreLibraryDesugaringEnabled true</code> just on the app module file.</p>\n<p>You should remove it in all other modules together with dependencies implementation.</p>\n"}],"owner":{"account_id":21962882,"reputation":21,"user_id":16240539,"display_name":"justSalkin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":561,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684341333,"creation_date":1623828751,"question_id":67998260,"body_markdown":"i&#39;m getting the following error message.\r\nTrying to read a xls file using apache poi (version 5.0.0).\r\nI&#39;m quit new working with java and android studio so maybe i am just to dumb to see, what went wrong. \r\n\r\nhope someone can help me. ^^\r\n\r\n(if you need more infos, code or something like this, just ask for it. I&#39;m not sure, what you need to solve my problem.)\r\n\r\n**Error**\r\n\r\n``` \r\n&gt; Transform artifact poi-5.0.0.jar (project :poi-5.0.0) with DexingWithClasspathTransform\r\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;com.android.tools.r8.a: MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26)&quot;,&quot;sources&quot;:[{&quot;file&quot;:&quot;C:\\\\Users\\\\nikla\\\\AndroidStudioProjects\\\\controlling_szenario\\\\poi-5.0.0\\\\build\\\\.transforms\\\\74c17dc26c0bf73dd6362c9c309eb5e9\\\\jetified-poi-5.0.0.jar&quot;}],&quot;tool&quot;:&quot;D8&quot;}\r\n\r\n&gt; Task :app:mergeLibDexDebug FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:mergeLibDexDebug&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Failed to transform poi-5.0.0.jar (project :poi-5.0.0) to match attributes {artifactType=android-dex, dexing-enable-desugaring=true, dexing-incremental-transform=false, dexing-is-debuggable=true, dexing-min-sdk=23, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\r\n      &gt; Execution failed for DexingWithClasspathTransform: C:\\Users\\nikla\\AndroidStudioProjects\\controlling_szenario\\poi-5.0.0\\build\\.transforms\\74c17dc26c0bf73dd6362c9c309eb5e9\\jetified-poi-5.0.0.jar.\r\n         &gt; Error while dexing.\r\n``` \r\n**build.gradle**\r\n``` \r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.controlling_szenario&quot;\r\n        minSdkVersion 26\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        multiDexEnabled true\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.3.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.3.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n    implementation project(path: &#39;:poi-5.0.0&#39;)\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n\timplementation &#39;com.aldebaran:qisdk:1.7.5&#39;\r\n\timplementation &#39;com.aldebaran:qisdk-design:1.7.5&#39;\r\n\r\n}","title":"Android Build Error - MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26) (apache poi)","body":"<p>i'm getting the following error message.\nTrying to read a xls file using apache poi (version 5.0.0).\nI'm quit new working with java and android studio so maybe i am just to dumb to see, what went wrong.</p>\n<p>hope someone can help me. ^^</p>\n<p>(if you need more infos, code or something like this, just ask for it. I'm not sure, what you need to solve my problem.)</p>\n<p><strong>Error</strong></p>\n<pre><code>&gt; Transform artifact poi-5.0.0.jar (project :poi-5.0.0) with DexingWithClasspathTransform\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;com.android.tools.r8.a: MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26)&quot;,&quot;sources&quot;:[{&quot;file&quot;:&quot;C:\\\\Users\\\\nikla\\\\AndroidStudioProjects\\\\controlling_szenario\\\\poi-5.0.0\\\\build\\\\.transforms\\\\74c17dc26c0bf73dd6362c9c309eb5e9\\\\jetified-poi-5.0.0.jar&quot;}],&quot;tool&quot;:&quot;D8&quot;}\n\n&gt; Task :app:mergeLibDexDebug FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:mergeLibDexDebug'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform poi-5.0.0.jar (project :poi-5.0.0) to match attributes {artifactType=android-dex, dexing-enable-desugaring=true, dexing-incremental-transform=false, dexing-is-debuggable=true, dexing-min-sdk=23, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for DexingWithClasspathTransform: C:\\Users\\nikla\\AndroidStudioProjects\\controlling_szenario\\poi-5.0.0\\build\\.transforms\\74c17dc26c0bf73dd6362c9c309eb5e9\\jetified-poi-5.0.0.jar.\n         &gt; Error while dexing.\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.example.controlling_szenario&quot;\n        minSdkVersion 26\n        targetSdkVersion 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.3.0'\n    implementation 'com.google.android.material:material:1.3.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    implementation project(path: ':poi-5.0.0')\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.aldebaran:qisdk:1.7.5'\n    implementation 'com.aldebaran:qisdk-design:1.7.5'\n\n}\n</code></pre>\n"},{"tags":["java","swing","outlook","drag-and-drop"],"comments":[{"owner":{"account_id":131793,"reputation":64005,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684345011,"post_id":76274302,"comment_id":134506142,"body_markdown":"I am not sure I understand the requirement - you want to drag **to** Outlook, but you don&#39;t want to open/use Outlook. How is that possible?","body":"I am not sure I understand the requirement - you want to drag <b>to</b> Outlook, but you don&#39;t want to open/use Outlook. How is that possible?"},{"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"score":0,"creation_date":1684349825,"post_id":76274302,"comment_id":134507117,"body_markdown":"@DmitryStreblechenko I&#39;m looking for a way to drag/drop attachments to an area of the enterprise application and let an ActiveX control send an email with attachment without opening the desktop client.  The web client should be fine though.","body":"@DmitryStreblechenko I&#39;m looking for a way to drag/drop attachments to an area of the enterprise application and let an ActiveX control send an email with attachment without opening the desktop client.  The web client should be fine though."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1684352032,"post_id":76274302,"comment_id":134507599,"body_markdown":"[Sending Emails with Java](https://www.baeldung.com/java-email)","body":"<a href=\"https://www.baeldung.com/java-email\" rel=\"nofollow noreferrer\">Sending Emails with Java</a>"},{"owner":{"account_id":131793,"reputation":64005,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684354275,"post_id":76274302,"comment_id":134508034,"body_markdown":"So you don&#39;t want to use Outlook, you only want to send a message with attachment to some Exchange mailbox, right? You can use EWS or Graph for that.","body":"So you don&#39;t want to use Outlook, you only want to send a message with attachment to some Exchange mailbox, right? You can use EWS or Graph for that."},{"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"score":0,"creation_date":1684425610,"post_id":76274302,"comment_id":134518836,"body_markdown":"@DmitryStreblechenko thank you - this looks exactly like what i am needing.","body":"@DmitryStreblechenko thank you - this looks exactly like what i am needing."},{"owner":{"account_id":131793,"reputation":64005,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684427476,"post_id":76274302,"comment_id":134519239,"body_markdown":"Keep in mind that sending though SMTP and an Office 365 server won&#39;t work unless you enable Basic auth for the tenant.","body":"Keep in mind that sending though SMTP and an Office 365 server won&#39;t work unless you enable Basic auth for the tenant."}],"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341119,"creation_date":1684341119,"question_id":76274302,"body_markdown":"I am investigating the feasibility of drag/drop files **into** outlook email from a Java Swing application.  I have found several examples of dragging **from** outlook, but I want to do the opposite. Currently, the application relies on the Outlook desktop client for this.  I would like to replace this functionality with a drag/drop ActiveX control (yes, this is an old legacy application) or something similar.  The current solution relies on Outlook seat licenses for the desktop client, and that is the part that I am wanting to replace without opening the desktop client.  \r\n\r\nSo far I am in the exploratory phase of this project.  What I want to do may not even be an option within the parameters of the application.\r\n\r\nAny ideas/experience is much appreciated.\r\n","title":"Way to drag/drop attachment files from Java Swing application to Outlook without invoking Outlook client application","body":"<p>I am investigating the feasibility of drag/drop files <strong>into</strong> outlook email from a Java Swing application.  I have found several examples of dragging <strong>from</strong> outlook, but I want to do the opposite. Currently, the application relies on the Outlook desktop client for this.  I would like to replace this functionality with a drag/drop ActiveX control (yes, this is an old legacy application) or something similar.  The current solution relies on Outlook seat licenses for the desktop client, and that is the part that I am wanting to replace without opening the desktop client.</p>\n<p>So far I am in the exploratory phase of this project.  What I want to do may not even be an option within the parameters of the application.</p>\n<p>Any ideas/experience is much appreciated.</p>\n"},{"tags":["java","memory","jvm","java-11","jcmd"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1677513343,"post_id":75581702,"comment_id":133347868,"body_markdown":"For G1 memory use (as reported by the OS), this may also be relevant: https://openjdk.org/jeps/346","body":"For G1 memory use (as reported by the OS), this may also be relevant: <a href=\"https://openjdk.org/jeps/346\" rel=\"nofollow noreferrer\">openjdk.org/jeps/346</a>"},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":1,"creation_date":1677520130,"post_id":75581702,"comment_id":133350063,"body_markdown":"For better understanding JVM&#39;s memory usage I recommend the following excellent post: https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438","body":"For better understanding JVM&#39;s memory usage I recommend the following excellent post: <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438\" title=\"java using much more memory than heap size or size correctly docker memory limi\">stackoverflow.com/questions/53451103/&hellip;</a>"},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677573162,"post_id":75581702,"comment_id":133359657,"body_markdown":"@JornVernee After re-reading JEP 346 I&#39;m still unclear how it applies (or if at all). Yes, 6 GB heap are fully committed, confirmed by jcmd. So apparently no heap mem has been returned to the OS. But there are ~4 GB unaccounted for. How could JEP 346 play a role in this?","body":"@JornVernee After re-reading JEP 346 I&#39;m still unclear how it applies (or if at all). Yes, 6 GB heap are fully committed, confirmed by jcmd. So apparently no heap mem has been returned to the OS. But there are ~4 GB unaccounted for. How could JEP 346 play a role in this?"},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677573596,"post_id":75581702,"comment_id":133359770,"body_markdown":"Thanks @JurajMartinka , excellent overview indeed, I&#39;ll research further starting from there","body":"Thanks @JurajMartinka , excellent overview indeed, I&#39;ll research further starting from there"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1677593725,"post_id":75581702,"comment_id":133365832,"body_markdown":"If you look at the JEP, it states that it was delivered in Java 12, you are using Java 11. Still, the JEP describes the behavior before, which does apply to you.","body":"If you look at the JEP, it states that it was delivered in Java 12, you are using Java 11. Still, the JEP describes the behavior before, which does apply to you."},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677655815,"post_id":75581702,"comment_id":133378694,"body_markdown":"@JohannesKuhn I agree that JEP 346 describes potentially relevant G1 GC behavior in Java 11. However, I fail to understand how it helps explaining the observed difference in reported memory usage. I think (and perhaps this is incorrect?) that as long as the GC does not return committed memory to the OS, the JVM still has it and jcmd should report it.","body":"@JohannesKuhn I agree that JEP 346 describes potentially relevant G1 GC behavior in Java 11. However, I fail to understand how it helps explaining the observed difference in reported memory usage. I think (and perhaps this is incorrect?) that as long as the GC does not return committed memory to the OS, the JVM still has it and jcmd should report it."}],"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341003,"creation_date":1677507919,"question_id":75581702,"body_markdown":"I&#39;m at a loss regarding the reported memory usage of my Java application (deployed on JBoss EAP) when under load. The ```java.exe``` process memory as shown by **Windows Resource Monitor** is much higher than what is reported by ```jcmd VM.native_memory```.\r\n\r\nHow can I investigate the difference?\r\n\r\n### Example ###\r\n- jcmd: Total: reserved=8417542KB, committed=7308422KB\r\n- Windows Resource Monitor: Commit (&quot;zugesichert&quot;) 12270304 KB\r\n[![java.exe as reported by Windows Resource Monitor][1]][1]\r\n\r\n### Environment ###\r\n\r\n - Oracle JDK 11.0.18\r\n   - Heap size (Xmx) 6 GB [fully committed according to jcmd]\r\n   - G1 GC\r\n - JBoss EAP 7.4.8\r\n - Windows Server 2016\r\n - The machine is a Hyper-V hosted VM with 8 GB RAM\r\n\r\n\r\n### Further observations #####\r\n\r\nMemory usage as per Resource Monitor keeps growing continually while under load whereas the values reported by ```jcmd``` seem to stabilize around 8.5 GB reserved and 7ish GB committed.\r\n\r\n  [1]: https://i.stack.imgur.com/ZR9Jr.png","title":"Java process memory usage: jcmd vs Windows Resource Monitor","body":"<p>I'm at a loss regarding the reported memory usage of my Java application (deployed on JBoss EAP) when under load. The <code>java.exe</code> process memory as shown by <strong>Windows Resource Monitor</strong> is much higher than what is reported by <code>jcmd VM.native_memory</code>.</p>\n<p>How can I investigate the difference?</p>\n<h3>Example</h3>\n<ul>\n<li>jcmd: Total: reserved=8417542KB, committed=7308422KB</li>\n<li>Windows Resource Monitor: Commit (&quot;zugesichert&quot;) 12270304 KB\n<a href=\"https://i.stack.imgur.com/ZR9Jr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZR9Jr.png\" alt=\"java.exe as reported by Windows Resource Monitor\" /></a></li>\n</ul>\n<h3>Environment</h3>\n<ul>\n<li>Oracle JDK 11.0.18\n<ul>\n<li>Heap size (Xmx) 6 GB [fully committed according to jcmd]</li>\n<li>G1 GC</li>\n</ul>\n</li>\n<li>JBoss EAP 7.4.8</li>\n<li>Windows Server 2016</li>\n<li>The machine is a Hyper-V hosted VM with 8 GB RAM</li>\n</ul>\n<h3>Further observations</h3>\n<p>Memory usage as per Resource Monitor keeps growing continually while under load whereas the values reported by <code>jcmd</code> seem to stabilize around 8.5 GB reserved and 7ish GB committed.</p>\n"},{"tags":["java","spring","spring-transactions","transactional"],"answers":[{"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"down_vote_count":1,"up_vote_count":171,"is_accepted":false,"score":170,"last_activity_date":1684340965,"creation_date":1307071029,"answer_id":6222624,"question_id":6222600,"body_markdown":"When you call a method without `@Transactional` within a transaction block, the parent transaction will propagate to the new method. It will use the same connection from the parent method (with `@Transactional`) and any exception caused in the called method (without `@Transactional`) will cause the transaction to rollback as configured in the transaction definition.\r\n\r\nIf you call a method with a `@Transactional` annotation from a method with `@Transactional` belonging to the same Spring Bean, then the called method&#39;s transactional behavior will not have any impact on the transaction. But if you call a method with a transaction definition from another method with a transaction definition, and they belong to different Spring Beans, then the code in the called method will follow its own transaction definitions.\r\n\r\nYou can find more details in the section *Declarative transaction management* of [Spring Transaction Management documentation][1].\r\n\r\nSpring declarative transaction model uses an AOP proxy, so the AOP proxy is responsible for the creation of the transactions. The AOP proxy will be active only if the called method belongs to a different Spring `Bean` than the caller one.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/data-access.html#transaction-declarative","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>When you call a method without <code>@Transactional</code> within a transaction block, the parent transaction will propagate to the new method. It will use the same connection from the parent method (with <code>@Transactional</code>) and any exception caused in the called method (without <code>@Transactional</code>) will cause the transaction to rollback as configured in the transaction definition.</p>\n<p>If you call a method with a <code>@Transactional</code> annotation from a method with <code>@Transactional</code> belonging to the same Spring Bean, then the called method's transactional behavior will not have any impact on the transaction. But if you call a method with a transaction definition from another method with a transaction definition, and they belong to different Spring Beans, then the code in the called method will follow its own transaction definitions.</p>\n<p>You can find more details in the section <em>Declarative transaction management</em> of <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/data-access.html#transaction-declarative\" rel=\"noreferrer\">Spring Transaction Management documentation</a>.</p>\n<p>Spring declarative transaction model uses an AOP proxy, so the AOP proxy is responsible for the creation of the transactions. The AOP proxy will be active only if the called method belongs to a different Spring <code>Bean</code> than the caller one.</p>\n"},{"tags":[],"owner":{"account_id":53073,"reputation":24000,"user_id":158658,"accept_rate":75,"display_name":"sourcedelica"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1684340559,"creation_date":1307103453,"answer_id":6226981,"question_id":6222600,"body_markdown":"`@Transactional` marks the transaction boundary (begin/end), but the transaction itself is bound to the thread. Once a transaction starts, it propagates across method calls until the original method returns and the transaction commits/rolls back.\r\n\r\nIf another method is called that has a `@Transactional` annotation, then the propagation depends on the propagation attribute of that annotation.\r\n\r\n","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p><code>@Transactional</code> marks the transaction boundary (begin/end), but the transaction itself is bound to the thread. Once a transaction starts, it propagates across method calls until the original method returns and the transaction commits/rolls back.</p>\n<p>If another method is called that has a <code>@Transactional</code> annotation, then the propagation depends on the propagation attribute of that annotation.</p>\n"},{"tags":[],"owner":{"account_id":73352,"reputation":22219,"user_id":211277,"accept_rate":78,"display_name":"tolitius"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1326839929,"creation_date":1326839929,"answer_id":8902699,"question_id":6222600,"body_markdown":"* _Does that mean the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?_\r\n\r\nThat depends on a [propagation level](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation). Here are all the possible level [values](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html).\r\n\r\nFor example in case a propagation level is [NESTED](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NESTED) a current transaction will &quot;suspend&quot; and a new transaction will be created ( _note: actual creation of a nested transaction will only work on specific transaction managers_ )\r\n\r\n* _What&#39;s the default behavior for a method without any annotations that is called by another method with @Transactional annotation?_\r\n\r\nThe default propagation level ( what you call &quot;behavior&quot; ) is [REQUIRED](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#REQUIRED). In case an &quot;inner&quot; method is called that has a `@Transactional` annotation on it ( or transacted declaratively via XML ), it will execute within the **same transaction**, e.g. &quot;nothing new&quot; is created.","title":"@Transactional method calling another method without @Transactional anotation?","body":"<ul>\n<li><em>Does that mean the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</em></li>\n</ul>\n\n<p>That depends on a <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation\" rel=\"noreferrer\">propagation level</a>. Here are all the possible level <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html\" rel=\"noreferrer\">values</a>.</p>\n\n<p>For example in case a propagation level is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NESTED\" rel=\"noreferrer\">NESTED</a> a current transaction will \"suspend\" and a new transaction will be created ( <em>note: actual creation of a nested transaction will only work on specific transaction managers</em> )</p>\n\n<ul>\n<li><em>What's the default behavior for a method without any annotations that is called by another method with @Transactional annotation?</em></li>\n</ul>\n\n<p>The default propagation level ( what you call \"behavior\" ) is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#REQUIRED\" rel=\"noreferrer\">REQUIRED</a>. In case an \"inner\" method is called that has a <code>@Transactional</code> annotation on it ( or transacted declaratively via XML ), it will execute within the <strong>same transaction</strong>, e.g. \"nothing new\" is created.</p>\n"},{"tags":[],"owner":{"account_id":4308682,"reputation":12613,"user_id":3520404,"display_name":"saran3h"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1684340766,"creation_date":1554483320,"answer_id":55540186,"question_id":6222600,"body_markdown":"The inner method will affect the outer method if the inner method is not annotated with `@Transactional`.\r\n\r\nIn case the inner method is also annotated with `@Transactional` with `Propagation.REQUIRES_NEW`, the following will happen.\r\n\r\n    ...\r\n    @Autowired\r\n    private TestDAO testDAO;\r\n    \r\n    @Autowired\r\n    private SomeBean someBean;\r\n    \r\n    @Override\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    public void outerMethod(User user) {\r\n      testDAO.insertUser(user);\r\n\r\n      try {\r\n        someBean.innerMethod();\r\n      } catch(RuntimeException e) {\r\n        // handle exception\r\n      }\r\n    }\r\n\r\n\r\n    @Override\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    public void innerMethod() {\r\n      throw new RuntimeException(&quot;Rollback this transaction!&quot;);\r\n    }\r\n\r\n\r\nThe inner method is annotated with `REQUIRES_NEW` and throws a `RuntimeException`, so it will set its transaction to rollback but WILL NOT EFFECT the outer transaction. The outer transaction is PAUSED when the inner transaction starts and then RESUMES AFTER the inner transaction is concluded. They run independently of each other, so the outer transaction MAY commit successfully.","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>The inner method will affect the outer method if the inner method is not annotated with <code>@Transactional</code>.</p>\n<p>In case the inner method is also annotated with <code>@Transactional</code> with <code>Propagation.REQUIRES_NEW</code>, the following will happen.</p>\n<pre><code>...\n@Autowired\nprivate TestDAO testDAO;\n\n@Autowired\nprivate SomeBean someBean;\n\n@Override\n@Transactional(propagation = Propagation.REQUIRED)\npublic void outerMethod(User user) {\n  testDAO.insertUser(user);\n\n  try {\n    someBean.innerMethod();\n  } catch(RuntimeException e) {\n    // handle exception\n  }\n}\n\n\n@Override\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void innerMethod() {\n  throw new RuntimeException(&quot;Rollback this transaction!&quot;);\n}\n</code></pre>\n<p>The inner method is annotated with <code>REQUIRES_NEW</code> and throws a <code>RuntimeException</code>, so it will set its transaction to rollback but WILL NOT EFFECT the outer transaction. The outer transaction is PAUSED when the inner transaction starts and then RESUMES AFTER the inner transaction is concluded. They run independently of each other, so the outer transaction MAY commit successfully.</p>\n"}],"owner":{"account_id":679279,"reputation":1321,"user_id":782123,"display_name":"goe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117794,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"answer_count":4,"score":132,"last_activity_date":1684340965,"creation_date":1307070848,"question_id":6222600,"body_markdown":"I&#39;ve seen a method in a Service class that was marked as `@Transactional`, but it was also calling some other methods in that same class which were not marked as `@Transactional`.\r\n\r\nDoes it mean that the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?\r\n\r\nWhat&#39;s the default behavior for a method without any annotations which is called by another method with `@Transactional` annotation?","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>I've seen a method in a Service class that was marked as <code>@Transactional</code>, but it was also calling some other methods in that same class which were not marked as <code>@Transactional</code>.</p>\n\n<p>Does it mean that the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</p>\n\n<p>What's the default behavior for a method without any annotations which is called by another method with <code>@Transactional</code> annotation?</p>\n"},{"tags":["java","try-catch","finally"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1684331599,"post_id":76272878,"comment_id":134502850,"body_markdown":"And what would that implicit finally block do? In case of try with resources it is clear that it closes the resources, but I am having trouble thinking of something that could generally done with any try block and therefor provide a basis for a need of an implicit finally.","body":"And what would that implicit finally block do? In case of try with resources it is clear that it closes the resources, but I am having trouble thinking of something that could generally done with any try block and therefor provide a basis for a need of an implicit finally."}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684339975,"creation_date":1684338003,"answer_id":76273863,"question_id":76272878,"body_markdown":"No. The closest thing i can think of like &quot;implicit closing functionality&quot; is finalization: Some classes may have a finalize method implemented that executes at some later time, whenever the object is garbage collected. That would have to have the close method called so not sure implicit is the right word. There was no Closeable interface to indicate things that needed closing before 1.7 and try-with-resources, there was no interface you could tag a class with to tell the jvm it needed closing. And that has nothing to do with any kind of try block. \r\n\r\n\r\nThe try block came first and is entirely explicit. Try-with-resources came along later, it addresses exception masking issues that can happen when using try-finally blocks. This is [my explanation of why try-with-resources was created](https://stackoverflow.com/a/26516323/217324).","title":"Is implicit finally block being applied for try statements other than try-with-resources?","body":"<p>No. The closest thing i can think of like &quot;implicit closing functionality&quot; is finalization: Some classes may have a finalize method implemented that executes at some later time, whenever the object is garbage collected. That would have to have the close method called so not sure implicit is the right word. There was no Closeable interface to indicate things that needed closing before 1.7 and try-with-resources, there was no interface you could tag a class with to tell the jvm it needed closing. And that has nothing to do with any kind of try block.</p>\n<p>The try block came first and is entirely explicit. Try-with-resources came along later, it addresses exception masking issues that can happen when using try-finally blocks. This is <a href=\"https://stackoverflow.com/a/26516323/217324\">my explanation of why try-with-resources was created</a>.</p>\n"}],"owner":{"account_id":15903012,"reputation":191,"user_id":11521880,"display_name":"bridgemnc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76273863,"answer_count":1,"score":1,"last_activity_date":1684339975,"creation_date":1684331464,"question_id":76272878,"body_markdown":"Does implicit finally block exist for all try statements (try, try-finally, try-catch-finally) or only for try-with-resources?","title":"Is implicit finally block being applied for try statements other than try-with-resources?","body":"<p>Does implicit finally block exist for all try statements (try, try-finally, try-catch-finally) or only for try-with-resources?</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":38772,"reputation":7239,"user_id":111495,"accept_rate":86,"display_name":"ctford"},"score":0,"creation_date":1255088587,"post_id":1543268,"comment_id":1399870,"body_markdown":"You might want to mention which language you are using. The answer will probably be the same across the C/C++/C#/Java family, but there&#39;s a chance that it might not be.","body":"You might want to mention which language you are using. The answer will probably be the same across the C/C++/C#/Java family, but there&#39;s a chance that it might not be."}],"answers":[{"tags":[],"owner":{"account_id":23033,"reputation":168092,"user_id":57428,"accept_rate":72,"display_name":"sharptooth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1255088378,"creation_date":1255088378,"answer_id":1543279,"question_id":1543268,"body_markdown":"In this very case the effect is the same, but an instance of the class in the first snippet will occupy more memory.\r\n\r\nOther than that in the first case it&#39;s a variable with the same address on each call and it retains the value, but in the second case it&#39;s not necessarily a variable with the same address - it is reallocated and reinitialized on each call.\r\n\r\nSince you actually don&#39;t ever change `i` variable value you should declare it as `const` - this will give more clear code.","title":"Declaration of variables?","body":"<p>In this very case the effect is the same, but an instance of the class in the first snippet will occupy more memory.</p>\n\n<p>Other than that in the first case it's a variable with the same address on each call and it retains the value, but in the second case it's not necessarily a variable with the same address - it is reallocated and reinitialized on each call.</p>\n\n<p>Since you actually don't ever change <code>i</code> variable value you should declare it as <code>const</code> - this will give more clear code.</p>\n"},{"tags":[],"owner":{"account_id":19343,"reputation":67135,"user_id":45249,"accept_rate":75,"display_name":"mouviciel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1255093615,"creation_date":1255093615,"answer_id":1543636,"question_id":1543268,"body_markdown":"In first case `i` exists outside of any method\r\n\r\nIn second case `i` exists only when `display()` method is called. If you want to give it persistence you can declare it as `static`.\r\n","title":"Declaration of variables?","body":"<p>In first case <code>i</code> exists outside of any method</p>\n\n<p>In second case <code>i</code> exists only when <code>display()</code> method is called. If you want to give it persistence you can declare it as <code>static</code>.</p>\n"},{"tags":[],"owner":{"account_id":53717,"reputation":582,"user_id":160653,"accept_rate":83,"display_name":"H2O"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255095367,"creation_date":1255095367,"answer_id":1543794,"question_id":1543268,"body_markdown":"In first case i is a part of the object. When u create an object from class A, the object allocates memory for the variable &quot;i&quot;. And it will remain until the object deleted. \r\n\r\nBut in the second way when you create the object from class B, there will be no memory allocation for the variable i. But only when you call the display function -in class B- memory variable &quot;i&quot; will be allocated temporarily. (When function&#39;s work is done all local variables will free)\r\n","title":"Declaration of variables?","body":"<p>In first case i is a part of the object. When u create an object from class A, the object allocates memory for the variable \"i\". And it will remain until the object deleted. </p>\n\n<p>But in the second way when you create the object from class B, there will be no memory allocation for the variable i. But only when you call the display function -in class B- memory variable \"i\" will be allocated temporarily. (When function's work is done all local variables will free)</p>\n"}],"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":1543279,"answer_count":3,"score":0,"last_activity_date":1684339584,"creation_date":1255088212,"question_id":1543268,"body_markdown":"Case:1\r\n\r\n        class A\r\n        {\r\n            private int i=0;\r\n\r\n            public void display()\r\n            {\r\n                this.getValue();\r\n            }\r\n\r\n            private int getValue()\r\n            {\r\n                return i+2;\r\n            }\r\n\r\n        }\r\n\r\nCase:2\r\n\r\n        class B\r\n        {\r\n            public void display()\r\n            {\r\n                int i=0;\r\n                this. getValue(i);\r\n            }\r\n    \r\n            private int getValue(int i)\r\n            {\r\n                return i+2;\r\n            }\r\n        }\r\n\r\nDoes the declaration of &quot;i&quot; in both cases have any great \r\ndifference (other than the global access) whenever I call \r\ndisplay() ?\r\n","title":"Declaration of variables?","body":"<p>Case:1</p>\n<pre><code>    class A\n    {\n        private int i=0;\n\n        public void display()\n        {\n            this.getValue();\n        }\n\n        private int getValue()\n        {\n            return i+2;\n        }\n\n    }\n</code></pre>\n<p>Case:2</p>\n<pre><code>    class B\n    {\n        public void display()\n        {\n            int i=0;\n            this. getValue(i);\n        }\n\n        private int getValue(int i)\n        {\n            return i+2;\n        }\n    }\n</code></pre>\n<p>Does the declaration of &quot;i&quot; in both cases have any great\ndifference (other than the global access) whenever I call\ndisplay() ?</p>\n"},{"tags":["java","variables"],"answers":[{"tags":[],"owner":{"account_id":25297,"reputation":34832,"user_id":64960,"accept_rate":55,"display_name":"aJ."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1259813974,"creation_date":1259813722,"answer_id":1837596,"question_id":1837577,"body_markdown":"something like this: \r\n\r\n    int  opcode = 0;\r\n\r\nopcode  is a local variable and hence, you should initialize within the function.\r\n","title":"variable initialization","body":"<p>something like this: </p>\n\n<pre><code>int  opcode = 0;\n</code></pre>\n\n<p>opcode  is a local variable and hence, you should initialize within the function.</p>\n"}],"owner":{"account_id":78503,"reputation":129,"user_id":223392,"accept_rate":59,"display_name":"Alpdog14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":1837596,"answer_count":1,"score":0,"last_activity_date":1684339522,"creation_date":1259813412,"question_id":1837577,"body_markdown":"If I am getting an error on a function that a variable *opcode* may not have been initialized, should this be done inside this method or in the beginning of the class.\r\n\r\n    private void compileDo() {\r\n            int endLabel, endLabelLoc, topLabel, opcode;\r\n            accept(&quot;do&quot;);\r\n            accept(&quot;(&quot;);\r\n            compileExpr();\r\n            accept(&quot;)&quot;);\r\n            topLabel = cs.getPos();\r\n            endLabelLoc = cs.emit(opcode, topLabel); \r\n            compileStatement();\r\n            \r\n        }\r\nAny help would be most appreciated.","title":"variable initialization","body":"<p>If I am getting an error on a function that a variable <em>opcode</em> may not have been initialized, should this be done inside this method or in the beginning of the class.</p>\n\n<pre><code>private void compileDo() {\n        int endLabel, endLabelLoc, topLabel, opcode;\n        accept(\"do\");\n        accept(\"(\");\n        compileExpr();\n        accept(\")\");\n        topLabel = cs.getPos();\n        endLabelLoc = cs.emit(opcode, topLabel); \n        compileStatement();\n\n    }\n</code></pre>\n\n<p>Any help would be most appreciated.</p>\n"},{"tags":["java","return-type"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1684328916,"post_id":76272449,"comment_id":134502140,"body_markdown":"Yes, you *can* use `Object`, that&#39;s how all collections worked before generics were added to Java. Yes, it *does* get annoying and is a potential source for problems. If you can&#39;t change your design to be able to give a specific type for each method return value, then this might be the best you can do.","body":"Yes, you <i>can</i> use <code>Object</code>, that&#39;s how all collections worked before generics were added to Java. Yes, it <i>does</i> get annoying and is a potential source for problems. If you can&#39;t change your design to be able to give a specific type for each method return value, then this might be the best you can do."},{"owner":{"account_id":184203,"reputation":3430,"user_id":420096,"accept_rate":71,"display_name":"Sombriks"},"score":0,"creation_date":1684328939,"post_id":76272449,"comment_id":134502146,"body_markdown":"you can, but you lose static type analysis which is one of keystones of java programming","body":"you can, but you lose static type analysis which is one of keystones of java programming"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1684328942,"post_id":76272449,"comment_id":134502147,"body_markdown":"Which are the 2 different datatypes? To those have a common superclass other than `Object`? Can you make them implement the same interface maybe? Otherwise you might be stuck with `Queue&lt;T extends Object&gt;`","body":"Which are the 2 different datatypes? To those have a common superclass other than <code>Object</code>? Can you make them implement the same interface maybe? Otherwise you might be stuck with <code>Queue&lt;T extends Object&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684332972,"creation_date":1684329579,"answer_id":76272566,"question_id":76272449,"body_markdown":"Declaring a method to return `Object` in and of itself is not &quot;dangerous&quot;. However, if the caller casts the returned `Object` to a type which it isn&#39;t, an exception would be thrown, and that can be considered dangerous.\r\n\r\nIf you want to prevent the caller from doing that, you can design the API so that it is safer for the caller by implementing different methods that deals with `T` and `U` specifically.\r\n\r\n```\r\nclass DualQueue&lt;T, U&gt;{\r\n\r\n    private final Class&lt;T&gt; tClass;\r\n    private final Class&lt;U&gt; uClass;\r\n\r\n    private final Queue&lt;Object&gt; queue;\r\n\r\n    public DualQueue(Class&lt;T&gt; tClass, Class&lt;U&gt; uClass){\r\n        this.tClass = tClass;\r\n        this.uClass = uClass;\r\n        queue = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public void enqueueT(T item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public void enqueueU(U item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public T dequeueT() {\r\n        if (peekT() != null) {\r\n            return tClass.cast(queue.poll());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public U dequeueU() {\r\n        if (peekU() != null) {\r\n            return uClass.cast(queue.poll());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public T peekT() {\r\n        var t =  queue.peek();\r\n        if (tClass.isInstance(t)) {\r\n            return tClass.cast(t);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public U peekU() {\r\n        var u =  queue.peek();\r\n        if (uClass.isInstance(u)) {\r\n            return uClass.cast(u);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public boolean queueIsEmpty() {\r\n        return queue.isEmpty();\r\n    }\r\n}\r\n```\r\n\r\n`dequeueT`, `dequeueU`, `peekT`, `peekU` will all return null if the next item in the queue isn&#39;t that type.","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>Declaring a method to return <code>Object</code> in and of itself is not &quot;dangerous&quot;. However, if the caller casts the returned <code>Object</code> to a type which it isn't, an exception would be thrown, and that can be considered dangerous.</p>\n<p>If you want to prevent the caller from doing that, you can design the API so that it is safer for the caller by implementing different methods that deals with <code>T</code> and <code>U</code> specifically.</p>\n<pre><code>class DualQueue&lt;T, U&gt;{\n\n    private final Class&lt;T&gt; tClass;\n    private final Class&lt;U&gt; uClass;\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(Class&lt;T&gt; tClass, Class&lt;U&gt; uClass){\n        this.tClass = tClass;\n        this.uClass = uClass;\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public T dequeueT() {\n        if (peekT() != null) {\n            return tClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public U dequeueU() {\n        if (peekU() != null) {\n            return uClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public T peekT() {\n        var t =  queue.peek();\n        if (tClass.isInstance(t)) {\n            return tClass.cast(t);\n        }\n        return null;\n    }\n\n    public U peekU() {\n        var u =  queue.peek();\n        if (uClass.isInstance(u)) {\n            return uClass.cast(u);\n        }\n        return null;\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n<p><code>dequeueT</code>, <code>dequeueU</code>, <code>peekT</code>, <code>peekU</code> will all return null if the next item in the queue isn't that type.</p>\n"},{"tags":[],"owner":{"account_id":28620637,"reputation":3,"user_id":21913765,"display_name":"Foolix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684332430,"creation_date":1684332430,"answer_id":76273013,"question_id":76272449,"body_markdown":"Are the types you want to add to the queue defined by you? In that case you could create an interface and have the two classes implement it. That way you can add them to the queue. It can also be a generic interface kind-of-a-wrapper, e.g.:\r\n\r\n        interface QueueAddable {\r\n            &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\r\n        }\r\n\r\nThis is something I may do - honestly I don&#39;t know it that is a good solution, but it&#39;s definitely a way to put different types in your queue with typesafe casts to get them out. A little example of what I mean.\r\n\r\n    public class MyClass {\r\n    \r\n        interface QueueAddable {\r\n            &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\r\n        }\r\n    \r\n        public static class MyOtherClass implements QueueAddable {\r\n            public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\r\n                return type.cast(this);\r\n            }\r\n        }\r\n    \r\n        public static class MyThirdClass implements QueueAddable {\r\n            public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\r\n                return type.cast(this);\r\n            }\r\n        }\r\n    \r\n        public static void main(String args[]) {\r\n            Queue&lt;QueueAddable&gt; queue = new LinkedList&lt;&gt;();\r\n            queue.add(new MyOtherClass());\r\n            queue.add(new MyThirdClass());\r\n    \r\n            QueueAddable a = queue.poll();\r\n            if (a instanceof MyOtherClass) {\r\n                MyOtherClass object = a.get(MyOtherClass.class);\r\n            }\r\n    \r\n            if (a instanceof MyThirdClass) {\r\n                MyThirdClass object = a.get(MyThirdClass.class);\r\n            }\r\n        }\r\n    }","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>Are the types you want to add to the queue defined by you? In that case you could create an interface and have the two classes implement it. That way you can add them to the queue. It can also be a generic interface kind-of-a-wrapper, e.g.:</p>\n<pre><code>    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n</code></pre>\n<p>This is something I may do - honestly I don't know it that is a good solution, but it's definitely a way to put different types in your queue with typesafe casts to get them out. A little example of what I mean.</p>\n<pre><code>public class MyClass {\n\n    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n\n    public static class MyOtherClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static class MyThirdClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static void main(String args[]) {\n        Queue&lt;QueueAddable&gt; queue = new LinkedList&lt;&gt;();\n        queue.add(new MyOtherClass());\n        queue.add(new MyThirdClass());\n\n        QueueAddable a = queue.poll();\n        if (a instanceof MyOtherClass) {\n            MyOtherClass object = a.get(MyOtherClass.class);\n        }\n\n        if (a instanceof MyThirdClass) {\n            MyThirdClass object = a.get(MyThirdClass.class);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684339393,"creation_date":1684338443,"answer_id":76273937,"question_id":76272449,"body_markdown":"The simple answer is, the task you&#39;re looking to do isn&#39;t necessarily possible in a statically-typed language, like Java.\r\n\r\nYou&#39;re essentially telling the compiler to infer the data type, which is not its abstraction.\r\n\r\nSo, there are a few work arounds.  Many will say to simply use the `Object` class, although this is not recommended by the Java implementors, for several reasons.\r\n\r\nMy first recommendation is, if you&#39;re storing `String` values and numbers, then just store the numbers as `String` values also.\r\n\r\nAnother approach would be to create an empty `interface`.\r\n\r\n    interface Example { }\r\n\r\nAnd, then create an implementation for each type of value.\r\n\r\n    class ValueA implements Example {\r\n        String string;\r\n    \r\n        ValueA(String string) {\r\n            this.string = string;\r\n        }\r\n    }\r\n    \r\n    class ValueB implements Example {\r\n        int integer;\r\n    \r\n        ValueB(int integer) {\r\n            this.integer = integer;\r\n        }\r\n    }\r\n\r\nAnd, then use the following `DualQueue` implementation.\r\n\r\n    private static class DualQueue {\r\n    \r\n        private final Queue&lt;Example&gt; queue;\r\n    \r\n        public DualQueue() {\r\n            queue = new LinkedList&lt;&gt;();\r\n        }\r\n    \r\n        public void enqueueT(ValueA item) {\r\n            queue.add(item);\r\n        }\r\n    \r\n        public void enqueueU(ValueB item) {\r\n            queue.add(item);\r\n        }\r\n    \r\n        public Example dequeue() {\r\n            return queue.poll();\r\n        }\r\n    \r\n        public Example peek() {\r\n            return queue.peek();\r\n        }\r\n    \r\n        public boolean queueIsEmpty() {\r\n            return queue.isEmpty();\r\n        }\r\n    }","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>The simple answer is, the task you're looking to do isn't necessarily possible in a statically-typed language, like Java.</p>\n<p>You're essentially telling the compiler to infer the data type, which is not its abstraction.</p>\n<p>So, there are a few work arounds.  Many will say to simply use the <code>Object</code> class, although this is not recommended by the Java implementors, for several reasons.</p>\n<p>My first recommendation is, if you're storing <code>String</code> values and numbers, then just store the numbers as <code>String</code> values also.</p>\n<p>Another approach would be to create an empty <code>interface</code>.</p>\n<pre><code>interface Example { }\n</code></pre>\n<p>And, then create an implementation for each type of value.</p>\n<pre><code>class ValueA implements Example {\n    String string;\n\n    ValueA(String string) {\n        this.string = string;\n    }\n}\n\nclass ValueB implements Example {\n    int integer;\n\n    ValueB(int integer) {\n        this.integer = integer;\n    }\n}\n</code></pre>\n<p>And, then use the following <code>DualQueue</code> implementation.</p>\n<pre><code>private static class DualQueue {\n\n    private final Queue&lt;Example&gt; queue;\n\n    public DualQueue() {\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(ValueA item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(ValueB item) {\n        queue.add(item);\n    }\n\n    public Example dequeue() {\n        return queue.poll();\n    }\n\n    public Example peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26672298,"reputation":29,"user_id":20283575,"display_name":"Boosen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1684339393,"creation_date":1684328786,"question_id":76272449,"body_markdown":"During a project the need for a queue supporting two different datatypes arose. I solved this by creating a java.util linked list using java.util queue interface. I do however need to use the return type Object\r\n\r\n```\r\npublic Object dequeue(){\r\n    return queue.poll();\r\n}\r\n```\r\nReturning &quot;Object&quot; feels weird and feels like it could cause a lot of errors.\r\nMy question is really, is this okay? Is there a better solution to solve my problem?\r\n\r\nI&#39;m including the full code below.\r\n\r\n```\r\nprivate static class DualQueue&lt;T, U&gt;{\r\n\r\n    private final Queue&lt;Object&gt; queue;\r\n\r\n    public DualQueue(){\r\n        queue = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public void enqueueT(T item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public void enqueueU(U item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public Object dequeue() {\r\n        return queue.poll();\r\n    }\r\n\r\n    public Object peek() {\r\n        return queue.peek();\r\n    }\r\n\r\n    public boolean queueIsEmpty() {\r\n        return queue.isEmpty();\r\n    }\r\n}\r\n```\r\n","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>During a project the need for a queue supporting two different datatypes arose. I solved this by creating a java.util linked list using java.util queue interface. I do however need to use the return type Object</p>\n<pre><code>public Object dequeue(){\n    return queue.poll();\n}\n</code></pre>\n<p>Returning &quot;Object&quot; feels weird and feels like it could cause a lot of errors.\nMy question is really, is this okay? Is there a better solution to solve my problem?</p>\n<p>I'm including the full code below.</p>\n<pre><code>private static class DualQueue&lt;T, U&gt;{\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(){\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public Object dequeue() {\n        return queue.poll();\n    }\n\n    public Object peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","linkedblockingqueue"],"comments":[{"owner":{"account_id":3011925,"reputation":161,"user_id":2555212,"accept_rate":12,"display_name":"user2555212"},"score":0,"creation_date":1684342682,"post_id":76274046,"comment_id":134505663,"body_markdown":"i am thinking, if i can avoid latch to understand if the threadpool is finished. that also works","body":"i am thinking, if i can avoid latch to understand if the threadpool is finished. that also works"}],"owner":{"account_id":3011925,"reputation":161,"user_id":2555212,"accept_rate":12,"display_name":"user2555212"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684339241,"creation_date":1684339241,"question_id":76274046,"body_markdown":"Hi I have multithread environment.\r\nIts like a producer and subscriber problem.\r\nbut the challenge is i will have multiple producers and consumers also in multi number.\r\nI tried two approaches. Approach1 with BlockingQueue and approach2 with Synchronized List.\r\napproach2 is giving me faster results where as i need to get the approach1 faster.\r\nI found the problem as well. In approach2 i am waiting for the producer to finish producing first. and started consuming it. as i have a full prepared list, i have freedom to process list in partition and i am processing 2 items at a time. \r\nwhere as in BlockingQueue approach, which is ideal for these problems, i can take one item at a time, hence processing is slow.\r\n\r\napproach1 is taking 15310 milli seconds where as approach2 is taking 9755 only\r\ni tried calling take method twice in BlockingQueue approach, but realized latch.countDown wont work perfectly with that.\r\n\r\nCan some one help me approach1 much better than approach2, i have put time outs based on my real scenarios.\r\n\r\nCode i tried here \r\n    \r\n```\r\npackage testjavathread;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.CountDownLatch;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ForkJoinPool;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\n\r\nclass Consumer {\r\n\r\n\tprivate BlockingQueue&lt;Integer&gt; sharedQueue;\r\n\r\n\tprivate int numThreads;\r\n\r\n\tprivate ExecutorService executor;\r\n\r\n\tprivate CountDownLatch latch;\r\n\r\n\tpublic void consume() {\r\n\t\tfor (int i = 0; i &lt; numThreads; i++) {\r\n\t\t\texecutor.submit(() -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\tInteger integer = sharedQueue.take();\r\n//\t\t\t\t\t\tif(!sharedQueue.isEmpty()) {\r\n//\t\t\t\t\t\t\tInteger integer2 = sharedQueue.take();\r\n//\t\t\t\t\t\t\tlatch.countDown();\r\n//\t\t\t\t\t\t}\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + integer);\r\n\t\t\t\t\t\tThread.sleep(3000);\r\n\t\t\t\t\t\tlatch.countDown();\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ExecutorService getExecutor() {\r\n\t\treturn executor;\r\n\t}\r\n\r\n\tpublic void setExecutor(ExecutorService executor) {\r\n\t\tthis.executor = executor;\r\n\t}\r\n\r\n\tpublic int getNumThreads() {\r\n\t\treturn numThreads;\r\n\t}\r\n\r\n\tpublic void setNumThreads(int numThreads) {\r\n\t\tthis.numThreads = numThreads;\r\n\t}\r\n\r\n\tpublic BlockingQueue&lt;Integer&gt; getSharedQueue() {\r\n\t\treturn sharedQueue;\r\n\t}\r\n\r\n\tpublic void setSharedQueue(BlockingQueue&lt;Integer&gt; sharedQueue) {\r\n\t\tthis.sharedQueue = sharedQueue;\r\n\t}\r\n\r\n\tpublic CountDownLatch getLatch() {\r\n\t\treturn latch;\r\n\t}\r\n\r\n\tpublic void setLatch(CountDownLatch latch) {\r\n\t\tthis.latch = latch;\r\n\t}\r\n}\r\n\r\npublic class BlockingQueueTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tBlockingQueueTest testThread = new BlockingQueueTest();\r\n\r\n\t\ttestThread.test();\r\n\r\n\t}\r\n\r\n\tpublic void test() {\r\n\t\tlong startTime = System.currentTimeMillis();\r\n\r\n\t\tList&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 1; i &lt;= 100; i++) {\r\n\t\t\tinputNumbers.add(i);\r\n\t\t}\r\n\r\n\t\tBlockingQueue&lt;Integer&gt; insertData = new LinkedBlockingQueue&lt;Integer&gt;();\r\n\t\tint threadCount = 20;\r\n\t\tCountDownLatch latch = new CountDownLatch(inputNumbers.size());\r\n\r\n\t\t// Consumer started first\r\n\t\tConsumer consumer = new Consumer();\r\n\t\tconsumer.setSharedQueue(insertData);\r\n\t\tconsumer.setNumThreads(threadCount);\r\n\t\tconsumer.setExecutor(Executors.newFixedThreadPool(threadCount));\r\n\t\tconsumer.setLatch(latch);\r\n\t\tconsumer.consume();\r\n\r\n\t\t// Producing the data\r\n\r\n\t\tif (!inputNumbers.isEmpty()) {\r\n\t\t\tfinal int parallelism = 40;\r\n\t\t\tForkJoinPool forkJoinPool = null;\r\n\t\t\ttry {\r\n\t\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\t\tfinal List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t\t.submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\r\n\t\t\t\t\t\t\tproduce(inputNumber, insertData);\r\n\t\t\t\t\t\t})).get();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t} finally {\r\n\t\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlatch.await();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\r\n\t\tSystem.out.println(System.currentTimeMillis() - startTime);\r\n\r\n\t}\r\n\r\n\tpublic void produce(Integer inputNumber, BlockingQueue&lt;Integer&gt; insertData) {\r\n\t\ttry {\r\n\t\t\tThread.sleep(200);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Producer &quot; + inputNumber);\r\n\t\tinsertData.add(inputNumber);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\nother approach\r\n\r\n\r\n```\r\npackage testjavathread;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.concurrent.ForkJoinPool;\r\n\r\nimport com.google.common.collect.Lists;\r\n\r\npublic class TestThreadWithList {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tTestThreadWithList testThread = new TestThreadWithList();\r\n\r\n\t\ttestThread.test();\r\n\r\n\t}\r\n\r\n\tprivate void test() {\r\n\t\tlong startTime = System.currentTimeMillis();\r\n\r\n\t\tList&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 1; i &lt;= 100; i++) {\r\n\t\t\tinputNumbers.add(i);\r\n\t\t}\r\n\r\n\t\tList&lt;Integer&gt; insertData = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n\t\t// Producing the data\r\n\r\n\t\tif (!inputNumbers.isEmpty()) {\r\n\t\t\tfinal int parallelism = 40;\r\n\t\t\tForkJoinPool forkJoinPool = null;\r\n\t\t\ttry {\r\n\t\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\t\tfinal List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t\t.submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\r\n\t\t\t\t\t\t\tproduce(inputNumber, insertData);\r\n\t\t\t\t\t\t})).get();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t} finally {\r\n\t\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Consumer\r\n\r\n\t\tfinal int parallelism = 20;\r\n\t\tForkJoinPool forkJoinPool = null;\r\n\t\ttry {\r\n\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\tList&lt;Boolean&gt; finalListOutput = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t.submit(() -&gt; Lists.partition(insertData, 2).parallelStream().forEach(eachNumber -&gt; {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + eachNumber.get(0));\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + eachNumber.get(1));\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tThread.sleep(3000);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})).get();\r\n\t\t} catch (Exception e) {\r\n\t\t} finally {\r\n\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSystem.out.println(System.currentTimeMillis() - startTime);\r\n\t}\r\n\r\n\tprivate void produce(Integer inputNumber, List&lt;Integer&gt; insertData) {\r\n\t\ttry {\r\n\t\t\tThread.sleep(200);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Producer &quot; + inputNumber);\r\n\t\tinsertData.add(inputNumber);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n","title":"Take two items from BlockingQueue with latch countDown","body":"<p>Hi I have multithread environment.\nIts like a producer and subscriber problem.\nbut the challenge is i will have multiple producers and consumers also in multi number.\nI tried two approaches. Approach1 with BlockingQueue and approach2 with Synchronized List.\napproach2 is giving me faster results where as i need to get the approach1 faster.\nI found the problem as well. In approach2 i am waiting for the producer to finish producing first. and started consuming it. as i have a full prepared list, i have freedom to process list in partition and i am processing 2 items at a time.\nwhere as in BlockingQueue approach, which is ideal for these problems, i can take one item at a time, hence processing is slow.</p>\n<p>approach1 is taking 15310 milli seconds where as approach2 is taking 9755 only\ni tried calling take method twice in BlockingQueue approach, but realized latch.countDown wont work perfectly with that.</p>\n<p>Can some one help me approach1 much better than approach2, i have put time outs based on my real scenarios.</p>\n<p>Code i tried here</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ForkJoinPool;\nimport java.util.concurrent.LinkedBlockingQueue;\n\nclass Consumer {\n\n    private BlockingQueue&lt;Integer&gt; sharedQueue;\n\n    private int numThreads;\n\n    private ExecutorService executor;\n\n    private CountDownLatch latch;\n\n    public void consume() {\n        for (int i = 0; i &lt; numThreads; i++) {\n            executor.submit(() -&gt; {\n                try {\n                    while (true) {\n                        Integer integer = sharedQueue.take();\n//                      if(!sharedQueue.isEmpty()) {\n//                          Integer integer2 = sharedQueue.take();\n//                          latch.countDown();\n//                      }\n                        System.out.println(&quot;Consumer &quot; + integer);\n                        Thread.sleep(3000);\n                        latch.countDown();\n                    }\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            });\n        }\n    }\n\n    public ExecutorService getExecutor() {\n        return executor;\n    }\n\n    public void setExecutor(ExecutorService executor) {\n        this.executor = executor;\n    }\n\n    public int getNumThreads() {\n        return numThreads;\n    }\n\n    public void setNumThreads(int numThreads) {\n        this.numThreads = numThreads;\n    }\n\n    public BlockingQueue&lt;Integer&gt; getSharedQueue() {\n        return sharedQueue;\n    }\n\n    public void setSharedQueue(BlockingQueue&lt;Integer&gt; sharedQueue) {\n        this.sharedQueue = sharedQueue;\n    }\n\n    public CountDownLatch getLatch() {\n        return latch;\n    }\n\n    public void setLatch(CountDownLatch latch) {\n        this.latch = latch;\n    }\n}\n\npublic class BlockingQueueTest {\n\n    public static void main(String[] args) {\n        BlockingQueueTest testThread = new BlockingQueueTest();\n\n        testThread.test();\n\n    }\n\n    public void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        BlockingQueue&lt;Integer&gt; insertData = new LinkedBlockingQueue&lt;Integer&gt;();\n        int threadCount = 20;\n        CountDownLatch latch = new CountDownLatch(inputNumbers.size());\n\n        // Consumer started first\n        Consumer consumer = new Consumer();\n        consumer.setSharedQueue(insertData);\n        consumer.setNumThreads(threadCount);\n        consumer.setExecutor(Executors.newFixedThreadPool(threadCount));\n        consumer.setLatch(latch);\n        consumer.consume();\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        try {\n            latch.await();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n\n    }\n\n    public void produce(Integer inputNumber, BlockingQueue&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n<p>other approach</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.concurrent.ForkJoinPool;\n\nimport com.google.common.collect.Lists;\n\npublic class TestThreadWithList {\n\n    public static void main(String[] args) {\n\n        TestThreadWithList testThread = new TestThreadWithList();\n\n        testThread.test();\n\n    }\n\n    private void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        List&lt;Integer&gt; insertData = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        // Consumer\n\n        final int parallelism = 20;\n        ForkJoinPool forkJoinPool = null;\n        try {\n            forkJoinPool = new ForkJoinPool(parallelism);\n            List&lt;Boolean&gt; finalListOutput = (List&lt;Boolean&gt;) forkJoinPool\n                    .submit(() -&gt; Lists.partition(insertData, 2).parallelStream().forEach(eachNumber -&gt; {\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(0));\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(1));\n\n                        try {\n                            Thread.sleep(3000);\n                        } catch (InterruptedException e) {\n                            // TODO Auto-generated catch block\n                            e.printStackTrace();\n                        }\n                    })).get();\n        } catch (Exception e) {\n        } finally {\n            if (forkJoinPool != null) {\n                forkJoinPool.shutdown();\n            }\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n    }\n\n    private void produce(Integer inputNumber, List&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","android","variables"],"comments":[{"owner":{"account_id":7562599,"reputation":6043,"user_id":6083675,"accept_rate":29,"display_name":"Laurel"},"score":0,"creation_date":1684357000,"post_id":11037643,"comment_id":134508505,"body_markdown":"Does this answer your question? [How do I pass data between Activities in Android application?](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application\">How do I pass data between Activities in Android application?</a>"}],"owner":{"account_id":1525820,"reputation":61,"user_id":1424296,"display_name":"user1424296"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13130,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1684339183,"creation_date":1339692154,"question_id":11037643,"body_markdown":"I have a screen where I store a phone number then go to another screen and launch the main part of the activity where I send a text massage where I am trying to get the number I entered in the first activity. I have all the code in to send message but it will not get the number from the previous activity. Here is my code form the first activity:\r\n\r\n \r\n\r\n    public class StoreNumberActivity extends Host_Setting_PageActivity {\r\n    \t /** Called when the activity is first created. */\r\n        @Override\r\n       \r\n    \r\n         public void onCreate(Bundle savedInstanceState) {\r\n                super.on``Create(savedInstanceState);\r\n                setContentView(R.layout.notificationsettings);\r\n                \r\n                final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);\r\n                \r\n                 //Juston class to schedule edit\r\n                Button Save = (Button) findViewById(R.id.SaveBtn);\r\n                Save.setOnClickListener(new View.OnClickListener() {\r\n                    public void onClick(View view) {\r\n                    \tToast.makeText(StoreNumberActivity.this, &quot;Number was Saved Successfully&quot;, Toast.LENGTH_LONG).show();\r\n                  \r\n                    }\r\n                });\r\n                 Button Send = (Button) findViewById(R.id.SendBtn);\r\n                  Send.setOnClickListener(new View.OnClickListener() {\r\n                      public void onClick(View view) {\r\n                    \t  String Number  =  editText.getText().toString();\r\n                          Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);\r\n                          myIntent.putExtra(&quot;Phone Num&quot;, Number);\r\n                          startActivity(myIntent);\r\n                      }\r\n        \r\n    \r\nand my code from the second activity:\r\n    \r\n   \r\n\r\n     public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        \r\n        \r\n        /** setting the view of the activity to xml */\r\n        setContentView(R.layout.messageme);\r\n        final Bundle bundle = getIntent().getExtras();\r\n        \r\n        final EditText editText= (EditText) findViewById(R.id.yourname);\r\n        final EditText phonenumber= (EditText) findViewById(R.id.phone);\r\n        final EditText emailaddress= (EditText) findViewById(R.id.email);\r\n        final EditText messagebox= (EditText) findViewById(R.id.messages);\r\n        final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);\r\n        \r\n        button= (Button) findViewById(R.id.btn);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n         \r\n        public void onClick(View v) {\r\n        // TODO Auto-generated method stub\r\n        \tIntent myIntent = getIntent(); // this is just for example purpose\r\n        \tmyIntent.getStringExtra(&quot;PhoneNum&quot;);\r\n        \tString Number = bundle.getString(&quot;Phone Num&quot;);\r\n        \tString Name  =  editText.getText().toString();\r\n        \tString Phone  = phonenumber.getText().toString();\r\n        \tString Email  = emailaddress.getText().toString();\r\n        \tString Message  = messagebox.getText().toString();\r\n        \r\n        \t\r\n        \t\r\n        \tsendSMS(Number, &quot;Name: &quot; + Name + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Email: &quot; + Email + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Phone: &quot; + Phone + &quot;\\n&quot; + &quot;\\n&quot; + Message);\r\n        }\r\n\r\n","title":"Send Variable from one activity to another one","body":"<p>I have a screen where I store a phone number then go to another screen and launch the main part of the activity where I send a text massage where I am trying to get the number I entered in the first activity. I have all the code in to send message but it will not get the number from the previous activity. Here is my code form the first activity:</p>\n<pre><code>public class StoreNumberActivity extends Host_Setting_PageActivity {\n     /** Called when the activity is first created. */\n    @Override\n   \n\n     public void onCreate(Bundle savedInstanceState) {\n            super.on``Create(savedInstanceState);\n            setContentView(R.layout.notificationsettings);\n            \n            final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);\n            \n             //Juston class to schedule edit\n            Button Save = (Button) findViewById(R.id.SaveBtn);\n            Save.setOnClickListener(new View.OnClickListener() {\n                public void onClick(View view) {\n                    Toast.makeText(StoreNumberActivity.this, &quot;Number was Saved Successfully&quot;, Toast.LENGTH_LONG).show();\n              \n                }\n            });\n             Button Send = (Button) findViewById(R.id.SendBtn);\n              Send.setOnClickListener(new View.OnClickListener() {\n                  public void onClick(View view) {\n                      String Number  =  editText.getText().toString();\n                      Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);\n                      myIntent.putExtra(&quot;Phone Num&quot;, Number);\n                      startActivity(myIntent);\n                  }\n    \n</code></pre>\n<p>and my code from the second activity:</p>\n<pre><code> public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    \n    \n    /** setting the view of the activity to xml */\n    setContentView(R.layout.messageme);\n    final Bundle bundle = getIntent().getExtras();\n    \n    final EditText editText= (EditText) findViewById(R.id.yourname);\n    final EditText phonenumber= (EditText) findViewById(R.id.phone);\n    final EditText emailaddress= (EditText) findViewById(R.id.email);\n    final EditText messagebox= (EditText) findViewById(R.id.messages);\n    final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);\n    \n    button= (Button) findViewById(R.id.btn);\n    button.setOnClickListener(new View.OnClickListener() {\n     \n    public void onClick(View v) {\n    // TODO Auto-generated method stub\n        Intent myIntent = getIntent(); // this is just for example purpose\n        myIntent.getStringExtra(&quot;PhoneNum&quot;);\n        String Number = bundle.getString(&quot;Phone Num&quot;);\n        String Name  =  editText.getText().toString();\n        String Phone  = phonenumber.getText().toString();\n        String Email  = emailaddress.getText().toString();\n        String Message  = messagebox.getText().toString();\n    \n        \n        \n        sendSMS(Number, &quot;Name: &quot; + Name + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Email: &quot; + Email + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Phone: &quot; + Phone + &quot;\\n&quot; + &quot;\\n&quot; + Message);\n    }\n</code></pre>\n"},{"tags":["java","spring-security","vaadin","spring-graphql","vaadin24"],"comments":[{"owner":{"account_id":7372513,"reputation":951,"user_id":5612275,"display_name":"Marco C"},"score":0,"creation_date":1684313661,"post_id":76270077,"comment_id":134498728,"body_markdown":"Is the application using PUSH with LONG_POLLING transport?","body":"Is the application using PUSH with LONG_POLLING transport?"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1684323023,"post_id":76270077,"comment_id":134500768,"body_markdown":"When you say &quot;Locally this works 100%&quot;: have you tried to stress this\nclaim?   Or in other words, what kind of load triggers this error?  Can\nyou already reproduce with two browser windows open - or do you need\na load tester to make it finally tip over?","body":"When you say &quot;Locally this works 100%&quot;: have you tried to stress this claim?   Or in other words, what kind of load triggers this error?  Can you already reproduce with two browser windows open - or do you need a load tester to make it finally tip over?"},{"owner":{"account_id":25748579,"reputation":45,"user_id":19501464,"display_name":"Sebastian L&#252;tge"},"score":0,"creation_date":1684329545,"post_id":76270077,"comment_id":134502274,"body_markdown":"I switched the polling transport mode to LONG_POLLING, but the issue still occurs. It might be slightly less often, I&#39;m not sure.\nThe error also occurs with just me on the test server, not even using more than 1 browser. I increased the memory of the instance, in case it was very aggressive garbage collection, but this also did not help.","body":"I switched the polling transport mode to LONG_POLLING, but the issue still occurs. It might be slightly less often, I&#39;m not sure. The error also occurs with just me on the test server, not even using more than 1 browser. I increased the memory of the instance, in case it was very aggressive garbage collection, but this also did not help."}],"owner":{"account_id":25748579,"reputation":45,"user_id":19501464,"display_name":"Sebastian L&#252;tge"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":590,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684338965,"creation_date":1684312507,"question_id":76270077,"body_markdown":"I have the following view, which loads its data asynchronously:\r\n```\r\n@Route(value = NewsAdminView.ROUTE)\r\n@RequiredArgsConstructor\r\npublic class NewsAdminView extends VerticalLayout {\r\n    public static final String ROUTE = &quot;&quot;;\r\n    private final Grid&lt;News&gt; grid = new Grid&lt;&gt;(News.class);\r\n    private final NewsService service;\r\n\r\n    @Override\r\n    protected void onAttach(final AttachEvent attachEvent) {\r\n        if (attachEvent.isInitialAttach()) {\r\n            addComponents();\r\n\r\n            final UI ui = attachEvent.getUI();\r\n            service.getNews().subscribe(items -&gt; updateItems(ui, items), t -&gt; GenericNotifications.graphQlError(ui, t));\r\n        }\r\n    }\r\n\r\n    private void updateItems(final UI ui, final List&lt;News&gt; news) {\r\n        ui.access(() -&gt; {\r\n            grid.setItems(this.newsList);\r\n            grid.setEnabled(true);\r\n        });\r\n    }\r\n}\r\n```\r\nThe service simply passes the correct query to my GraphQL client:\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class NewsService {\r\n    private final GraphQlService graphQlService;\r\n\r\n    public Mono&lt;List&lt;News&gt;&gt; getNews() {\r\n        final String query = &quot;&quot;&quot;\r\n            query NewsQuery {\r\n                allNews {\r\n                    author\r\n                    body\r\n                    title\r\n                }\r\n            }&quot;&quot;&quot;;\r\n\r\n        return graphQlService.queryList(query, &quot;allNews&quot;, News.class);\r\n    }\r\n}\r\n```\r\nAnd the GraphQlService finally sends the request via a Spring HttpGraphQlClient. This client needs to be configured for OAuth2 authentication, as the GraphQL endpoint is protected as a resource server.\r\n```\r\n@Service\r\npublic class GraphQlService {\r\n    private final HttpGraphQlClient client;\r\n\r\n    public GraphQlService(final WebClient.Builder webClientBuilder,\r\n        final ClientRegistrationRepository clientRegistrationRepository,\r\n        final OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository,\r\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\r\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n            clientRegistrationRepository, oAuth2AuthorizedClientRepository);\r\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\r\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\r\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\r\n    }\r\n\r\n    @NotNull\r\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\r\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\r\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\r\n    }\r\n}\r\n```\r\nLocally this works 100% of the time, but on our test servers it randomly, maybe about 50% of the time, produces this exception:\r\n```\r\nDEBUG 13997 --- [io-10112-exec-2] service.GraphQlService          : Running GraphQL list query for allNews, expecting News objects\r\nERROR 13997 --- [oundedElastic-2] reactor.core.publisher.Operators: Operator called default onErrorDropped\r\n\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated wi\r\nth this facade\r\nCaused by: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated with this facade\r\n        at org.springframework.graphql.client.DefaultGraphQlClient$DefaultRequestSpec.lambda$execute$1(DefaultGraphQlClient.java:161) ~[spring-graphql-1.1.3.jar!/:1.1.3]\r\n        at reactor.core.publisher.Mono.lambda$onErrorResume$29(Mono.java:3849) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onError(FluxContextWrite.java:121) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onError(FluxDoFinally.java:119) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onError(FluxPeekFuseable.java:903) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onError(FluxOnAssembly.java:544) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMap$MapSubscriber.onError(FluxMap.java:134) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:241) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:315) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:230) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\r\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\r\n        at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\nError has been observed at the following site(s):\r\n        *__checkpoint ⇢ Request to POST null [DefaultWebClient]\r\nOriginal Stack Trace:\r\n                at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:304) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getParameter(StrictHttpFirewall.java:769) ~[spring-security-web-6.0.3.jar!/:6.0.3]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:298) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:291) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.lambda$authorize$2(DefaultOAuth2AuthorizedClientManager.java:168) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.OAuth2AuthorizationContext$Builder.attributes(OAuth2AuthorizationContext.java:185) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.authorize(DefaultOAuth2AuthorizedClientManager.java:167) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.reactive.function.client.ServletOAuth2AuthorizedClientExchangeFilterFunction.lambda$authorizeClient$22(ServletOAuth2AuthorizedClientExchangeFilterFunction.java:485) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\r\n                at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n```\r\nI suspect some kind of race condition between the GraphQL query being sent and the HTTP request being cleaned up. But I can&#39;t figure out how to prevent the HTTP request from being recycled.\r\n\r\nI compared my code to this Webinar on YouTube: https://www.youtube.com/watch?v=7Mr_pQc_rxA and its corresponding code base here: https://github.com/eriklumme/reactive-vaadin-demo. It is a little bit older, but seems to be basically identical (sans the OAuth2 authentication and usage of GraphQL, but which is based on reactive Monos).\r\n\r\nI have aslo tried a GraphQlService that does not rely on HTTP requests, which works for this error, but prevents the automatic renewal of OAuth2 access tokens:\r\n```\r\n@Service\r\npublic class NoHttpRequestGraphQlService {\r\n    private final HttpGraphQlClient client;\r\n\r\n    public NoHttpRequestGraphQlService(final WebClient.Builder webClientBuilder,\r\n        final ClientRegistrationRepository clientRegistrationRepository,\r\n        final OAuth2AuthorizedClientService oAuth2AuthorizedClientService,\r\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\r\n        final var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\r\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        final var authorizationFailureHandler = new RemoveAuthorizedClientOAuth2AuthorizationFailureHandler(\r\n                (clientRegistrationId, principal, attributes) -&gt; oAuth2AuthorizedClientService.removeAuthorizedClient(clientRegistrationId, principal.getName()));\r\n        authorizedClientManager.setAuthorizationFailureHandler(authorizationFailureHandler);\r\n        oauth2Client.setAuthorizationFailureHandler(authorizationFailureHandler);\r\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\r\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\r\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\r\n    }\r\n\r\n    @NotNull\r\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\r\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\r\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\r\n    }\r\n}\r\n```\r\nI would prefer the HTTP request based version (as that is the actual environment where this code runs), but I would settle for the access token renewal working with my workaround.\r\n\r\nEDIT: After looking into this further, I believe the OAuth2 authorization process is requesting the OAuth2 scope parameter from a stale request. I replaced the default implementation `DefaultOAuth2AuthorizedClientManager.DefaultContextAttributesMapper` with an empty one (as we are not using scopes at the moment). There seem to be no further calls to the stored request, so this might work for us. I&#39;ll investigate further and/or improve the &#39;dirty hack&#39; solution I have now. Due to the long weekend here I&#39;ll only be back on monday.","title":"Asynchronous requests sometimes fail because the RequestFacade is recycled","body":"<p>I have the following view, which loads its data asynchronously:</p>\n<pre><code>@Route(value = NewsAdminView.ROUTE)\n@RequiredArgsConstructor\npublic class NewsAdminView extends VerticalLayout {\n    public static final String ROUTE = &quot;&quot;;\n    private final Grid&lt;News&gt; grid = new Grid&lt;&gt;(News.class);\n    private final NewsService service;\n\n    @Override\n    protected void onAttach(final AttachEvent attachEvent) {\n        if (attachEvent.isInitialAttach()) {\n            addComponents();\n\n            final UI ui = attachEvent.getUI();\n            service.getNews().subscribe(items -&gt; updateItems(ui, items), t -&gt; GenericNotifications.graphQlError(ui, t));\n        }\n    }\n\n    private void updateItems(final UI ui, final List&lt;News&gt; news) {\n        ui.access(() -&gt; {\n            grid.setItems(this.newsList);\n            grid.setEnabled(true);\n        });\n    }\n}\n</code></pre>\n<p>The service simply passes the correct query to my GraphQL client:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class NewsService {\n    private final GraphQlService graphQlService;\n\n    public Mono&lt;List&lt;News&gt;&gt; getNews() {\n        final String query = &quot;&quot;&quot;\n            query NewsQuery {\n                allNews {\n                    author\n                    body\n                    title\n                }\n            }&quot;&quot;&quot;;\n\n        return graphQlService.queryList(query, &quot;allNews&quot;, News.class);\n    }\n}\n</code></pre>\n<p>And the GraphQlService finally sends the request via a Spring HttpGraphQlClient. This client needs to be configured for OAuth2 authentication, as the GraphQL endpoint is protected as a resource server.</p>\n<pre><code>@Service\npublic class GraphQlService {\n    private final HttpGraphQlClient client;\n\n    public GraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n            clientRegistrationRepository, oAuth2AuthorizedClientRepository);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>Locally this works 100% of the time, but on our test servers it randomly, maybe about 50% of the time, produces this exception:</p>\n<pre><code>DEBUG 13997 --- [io-10112-exec-2] service.GraphQlService          : Running GraphQL list query for allNews, expecting News objects\nERROR 13997 --- [oundedElastic-2] reactor.core.publisher.Operators: Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated wi\nth this facade\nCaused by: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated with this facade\n        at org.springframework.graphql.client.DefaultGraphQlClient$DefaultRequestSpec.lambda$execute$1(DefaultGraphQlClient.java:161) ~[spring-graphql-1.1.3.jar!/:1.1.3]\n        at reactor.core.publisher.Mono.lambda$onErrorResume$29(Mono.java:3849) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onError(FluxContextWrite.java:121) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onError(FluxDoFinally.java:119) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onError(FluxPeekFuseable.java:903) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onError(FluxOnAssembly.java:544) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onError(FluxMap.java:134) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:241) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:315) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:230) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\n        at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n        *__checkpoint ⇢ Request to POST null [DefaultWebClient]\nOriginal Stack Trace:\n                at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:304) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getParameter(StrictHttpFirewall.java:769) ~[spring-security-web-6.0.3.jar!/:6.0.3]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:298) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:291) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.lambda$authorize$2(DefaultOAuth2AuthorizedClientManager.java:168) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.OAuth2AuthorizationContext$Builder.attributes(OAuth2AuthorizationContext.java:185) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.authorize(DefaultOAuth2AuthorizedClientManager.java:167) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.reactive.function.client.ServletOAuth2AuthorizedClientExchangeFilterFunction.lambda$authorizeClient$22(ServletOAuth2AuthorizedClientExchangeFilterFunction.java:485) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n                at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\n</code></pre>\n<p>I suspect some kind of race condition between the GraphQL query being sent and the HTTP request being cleaned up. But I can't figure out how to prevent the HTTP request from being recycled.</p>\n<p>I compared my code to this Webinar on YouTube: <a href=\"https://www.youtube.com/watch?v=7Mr_pQc_rxA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7Mr_pQc_rxA</a> and its corresponding code base here: <a href=\"https://github.com/eriklumme/reactive-vaadin-demo\" rel=\"nofollow noreferrer\">https://github.com/eriklumme/reactive-vaadin-demo</a>. It is a little bit older, but seems to be basically identical (sans the OAuth2 authentication and usage of GraphQL, but which is based on reactive Monos).</p>\n<p>I have aslo tried a GraphQlService that does not rely on HTTP requests, which works for this error, but prevents the automatic renewal of OAuth2 access tokens:</p>\n<pre><code>@Service\npublic class NoHttpRequestGraphQlService {\n    private final HttpGraphQlClient client;\n\n    public NoHttpRequestGraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientService oAuth2AuthorizedClientService,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        final var authorizationFailureHandler = new RemoveAuthorizedClientOAuth2AuthorizationFailureHandler(\n                (clientRegistrationId, principal, attributes) -&gt; oAuth2AuthorizedClientService.removeAuthorizedClient(clientRegistrationId, principal.getName()));\n        authorizedClientManager.setAuthorizationFailureHandler(authorizationFailureHandler);\n        oauth2Client.setAuthorizationFailureHandler(authorizationFailureHandler);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>I would prefer the HTTP request based version (as that is the actual environment where this code runs), but I would settle for the access token renewal working with my workaround.</p>\n<p>EDIT: After looking into this further, I believe the OAuth2 authorization process is requesting the OAuth2 scope parameter from a stale request. I replaced the default implementation <code>DefaultOAuth2AuthorizedClientManager.DefaultContextAttributesMapper</code> with an empty one (as we are not using scopes at the moment). There seem to be no further calls to the stored request, so this might work for us. I'll investigate further and/or improve the 'dirty hack' solution I have now. Due to the long weekend here I'll only be back on monday.</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":3046327,"reputation":10175,"user_id":2581872,"accept_rate":90,"display_name":"hichris123"},"score":1,"creation_date":1386640233,"post_id":20484542,"comment_id":30615320,"body_markdown":"What language is this?","body":"What language is this?"},{"owner":{"account_id":3677426,"reputation":31,"user_id":3063201,"accept_rate":20,"display_name":"user3063201"},"score":0,"creation_date":1386640636,"post_id":20484542,"comment_id":30615428,"body_markdown":"java, sorry for not mentioning","body":"java, sorry for not mentioning"}],"answers":[{"tags":[],"owner":{"account_id":3077175,"reputation":1125,"user_id":2606227,"accept_rate":33,"display_name":"Shamnad P S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386640690,"creation_date":1386640690,"answer_id":20484609,"question_id":20484542,"body_markdown":"Try this,\r\n\r\n    if (x == (int)x)\r\n    {\r\n       // Number is integer\r\n    }","title":"Exception for the variable type user input","body":"<p>Try this,</p>\n\n<pre><code>if (x == (int)x)\n{\n   // Number is integer\n}\n</code></pre>\n"}],"owner":{"account_id":3677426,"reputation":31,"user_id":3063201,"accept_rate":20,"display_name":"user3063201"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1684338555,"creation_date":1386640176,"question_id":20484542,"body_markdown":"I&#39;ve got an if statement which accepts integers and i want to use an exception for when the input is anything but an integer value, so basically the users can&#39;t enter text when it requires a number. Does anyone know how to do this, would be appreciated! :D I know how to do the exception, just not for checking the variable type\r\nJAVA!","title":"Exception for the variable type user input","body":"<p>I've got an if statement which accepts integers and i want to use an exception for when the input is anything but an integer value, so basically the users can't enter text when it requires a number. Does anyone know how to do this, would be appreciated! :D I know how to do the exception, just not for checking the variable type\nJAVA!</p>\n"},{"tags":["java","pdf","itext","pdf-generation","digital-signature"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684337878,"post_id":76273283,"comment_id":134504556,"body_markdown":"Please clarify which kinds of signature you want to remove. First of all it looks like you want to remove _digital signatures_, not simple electronic ones consisting just of e.g. an image of an ink signature. But there are different kinds of digital signatures, some kinds are specified as _interoperable signatures_ in the PDF specification but the spec also allows for other, custom kinds. Thus, which do you want to remove?","body":"Please clarify which kinds of signature you want to remove. First of all it looks like you want to remove <i>digital signatures</i>, not simple electronic ones consisting just of e.g. an image of an ink signature. But there are different kinds of digital signatures, some kinds are specified as <i>interoperable signatures</i> in the PDF specification but the spec also allows for other, custom kinds. Thus, which do you want to remove?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684338251,"post_id":76273283,"comment_id":134504649,"body_markdown":"That being asked, please be aware that the **Type** *Sig* and the **Type** *Annot* are optional. Furthermore, **FT** *Sig* and **Subtype** *Widget* only are in the same dictionary if field dictionary and widget dictionary are merged - they indeed often are merged but not always. And _usage rights_ signatures are not necessarily indirect objects, so you won&#39;t necessarily find them directly by walking the cross references.","body":"That being asked, please be aware that the <b>Type</b> <i>Sig</i> and the <b>Type</b> <i>Annot</i> are optional. Furthermore, <b>FT</b> <i>Sig</i> and <b>Subtype</b> <i>Widget</i> only are in the same dictionary if field dictionary and widget dictionary are merged - they indeed often are merged but not always. And <i>usage rights</i> signatures are not necessarily indirect objects, so you won&#39;t necessarily find them directly by walking the cross references."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684342722,"post_id":76273283,"comment_id":134505673,"body_markdown":"Any digital signature, i work with a large pdfs flow in my app, i need to remove all signatures before the user upload the pdf file in my app, because when he sign on my app, can have signature conflicts. This conflict will appears when i will create a new hash, above older broken signature, so i remove all the signatures before upload on my app. The second implementation will compose the remove signature method, with the first implementation. Only the first implementation   works well, but not for all cases.","body":"Any digital signature, i work with a large pdfs flow in my app, i need to remove all signatures before the user upload the pdf file in my app, because when he sign on my app, can have signature conflicts. This conflict will appears when i will create a new hash, above older broken signature, so i remove all the signatures before upload on my app. The second implementation will compose the remove signature method, with the first implementation. Only the first implementation   works well, but not for all cases."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684342739,"post_id":76273283,"comment_id":134505676,"body_markdown":"Do you know if exists more than this two dictionary patterns for signatures?","body":"Do you know if exists more than this two dictionary patterns for signatures?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684403739,"post_id":76273283,"comment_id":134514083,"body_markdown":"If you create an app for pdf signing, you surely have read the relevant sections of the pdf specification, haven&#39;t you? That should make clear all about interoperable signature structures... *&quot;because when he sign on my app, can have signature conflicts.&quot;* - this sounds like you either forgot to apply changes as incremental updates or you apply changes that aren&#39;t allowed to signed documents. Or you attempt to sign pdfs a previous signer did not intend to signed by others.","body":"If you create an app for pdf signing, you surely have read the relevant sections of the pdf specification, haven&#39;t you? That should make clear all about interoperable signature structures... <i>&quot;because when he sign on my app, can have signature conflicts.&quot;</i> - this sounds like you either forgot to apply changes as incremental updates or you apply changes that aren&#39;t allowed to signed documents. Or you attempt to sign pdfs a previous signer did not intend to signed by others."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684428530,"post_id":76273283,"comment_id":134519494,"body_markdown":"Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?","body":"Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684449015,"post_id":76273283,"comment_id":134523302,"body_markdown":"*&quot;Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?&quot;* - No, obviously not. How should your code recognize simple electronic signatures like images of ink signatures? And your methods don&#39;t even find all interoperative digital signatures, see my remarks on optional entries above.","body":"<i>&quot;Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?&quot;</i> - No, obviously not. How should your code recognize simple electronic signatures like images of ink signatures? And your methods don&#39;t even find all interoperative digital signatures, see my remarks on optional entries above."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684518385,"post_id":76273283,"comment_id":134534138,"body_markdown":"But the first method can remove several tipes of signatures, the second can remove unusal signatures, it have works for me. \nHave you ever worked with PDF on a large scale or just read the documentation or ISO? Can you tell me where I can find these patterns? Do you have any publications or could you help me with this?","body":"But the first method can remove several tipes of signatures, the second can remove unusal signatures, it have works for me.  Have you ever worked with PDF on a large scale or just read the documentation or ISO? Can you tell me where I can find these patterns? Do you have any publications or could you help me with this?"}],"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684338442,"creation_date":1684334142,"question_id":76273283,"body_markdown":"I have find problems when i tried to remove signatures from PDF&#39;s With Itext 5.1. \r\n\r\nThis is my Method:\r\n\r\n```\r\nPdfStamper stamper = new PdfStamper(reader, os);\r\nAcroFields acroFields = reader.getAcroFields();\r\nfor (String name : acroFields.getSignatureNames()) {\r\n    acroFields.removeField(name);\r\n}\r\nstamper.close();\r\noutput = os.toByteArray();\r\n```\r\n\r\nThis method works, but not for all PDFs, some PDFs does not find the signatures with this.\r\n\r\nThen i found objects on the PDF that flaged SIG, so i created a new method to complement the signature cleanup method:\r\n\r\n```\r\nprivate void removeSignatureObjects(PdfReader reader) {\r\n    for (int i = 1; i &lt;= reader.getXrefSize(); i++) {\r\n        PdfObject object = reader.getPdfObject(i);\r\n        if (object != null) {\r\n            if (object.isDictionary()) {\r\n                PdfDictionary dict = (PdfDictionary) object;\r\n                if (validateObjectSign(dict)) {\r\n                    dict.clear();\r\n                    reader.resetReleasePage();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nprivate boolean validateObjectSign(PdfDictionary dict) {\r\n    return PdfName.SIG.equals(dict.get(PdfName.TYPE))\r\n            ||\r\n            (PdfName.ANNOT.equals(dict.get(PdfName.TYPE)) &amp;&amp; PdfName.WIDGET.equals(dict.get(PdfName.SUBTYPE)) &amp;&amp;\r\n            PdfName.SIG.equals(dict.getAsName(PdfName.FT)));\r\n}\r\n```\r\n\r\nIt works from objects i&#39;ve tested it, but now i don&#39;t know if this covers all the pdf signature objects. \r\n\r\nI need help to knowing, what is the pattern of signature objects in PDFs?\r\n","title":"Remove Signatures From PDF File In Java With Itext","body":"<p>I have find problems when i tried to remove signatures from PDF's With Itext 5.1.</p>\n<p>This is my Method:</p>\n<pre><code>PdfStamper stamper = new PdfStamper(reader, os);\nAcroFields acroFields = reader.getAcroFields();\nfor (String name : acroFields.getSignatureNames()) {\n    acroFields.removeField(name);\n}\nstamper.close();\noutput = os.toByteArray();\n</code></pre>\n<p>This method works, but not for all PDFs, some PDFs does not find the signatures with this.</p>\n<p>Then i found objects on the PDF that flaged SIG, so i created a new method to complement the signature cleanup method:</p>\n<pre><code>private void removeSignatureObjects(PdfReader reader) {\n    for (int i = 1; i &lt;= reader.getXrefSize(); i++) {\n        PdfObject object = reader.getPdfObject(i);\n        if (object != null) {\n            if (object.isDictionary()) {\n                PdfDictionary dict = (PdfDictionary) object;\n                if (validateObjectSign(dict)) {\n                    dict.clear();\n                    reader.resetReleasePage();\n                }\n            }\n        }\n    }\n}\n\nprivate boolean validateObjectSign(PdfDictionary dict) {\n    return PdfName.SIG.equals(dict.get(PdfName.TYPE))\n            ||\n            (PdfName.ANNOT.equals(dict.get(PdfName.TYPE)) &amp;&amp; PdfName.WIDGET.equals(dict.get(PdfName.SUBTYPE)) &amp;&amp;\n            PdfName.SIG.equals(dict.getAsName(PdfName.FT)));\n}\n</code></pre>\n<p>It works from objects i've tested it, but now i don't know if this covers all the pdf signature objects.</p>\n<p>I need help to knowing, what is the pattern of signature objects in PDFs?</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":13566,"reputation":48835,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":0,"creation_date":1399482973,"post_id":23523539,"comment_id":36084081,"body_markdown":"The compiler doesn&#39;t know that your if statement covers all possible cases. If you remove the `if(x&gt;=0.67)` it should do the same thing and will compile.","body":"The compiler doesn&#39;t know that your if statement covers all possible cases. If you remove the <code>if(x&gt;=0.67)</code> it should do the same thing and will compile."}],"answers":[{"tags":[],"owner":{"account_id":2141010,"reputation":118229,"user_id":1899640,"display_name":"that other guy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1399481753,"creation_date":1399481401,"answer_id":23523708,"question_id":23523539,"body_markdown":"`javac` is not smart enough to realize that the way your conditions are constructed, one of them will always be true.\r\n\r\nYou can rewrite your if-statements to make `javac` realize one branch will always be triggered:\r\n\r\n    int y;\r\n    if(x&lt;=0.33)\r\n    {\r\n        y=1;\r\n    }\r\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n    {\r\n        y=2;\r\n    }\r\n    else // This only triggers when x &gt;= 0.67, so no need to check\r\n    {\r\n        y=3;\r\n    }\r\n\r\nNow `javac` sees that if the first two don&#39;t trigger, the last will, so `y` will always have a value.\r\n\r\nYou can alternatively add an `else` branch with an error, in case someone breaks the conditions:\r\n\r\n    int y;\r\n    if(x&lt;=0.33)\r\n    {\r\n        y=1;\r\n    }\r\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n    {\r\n        y=2;\r\n    }\r\n    else if(x &gt;= 0.67)\r\n    {\r\n        y=3;\r\n    }\r\n    else \r\n    {\r\n        // This should never happen\r\n        throw new IllegalArgumentException(&quot;Something&#39;s gone terribly wrong for &quot; + x);\r\n    }\r\n\r\nThis also compiles, and if someone later decides to skew the numbers and turns the first condition into `x &lt;= 0.2` but forgets to update the other condition, you&#39;ll get an exception at runtime.","title":"Variable y might not have been initialised in the if&#39;s in the loop","body":"<p><code>javac</code> is not smart enough to realize that the way your conditions are constructed, one of them will always be true.</p>\n\n<p>You can rewrite your if-statements to make <code>javac</code> realize one branch will always be triggered:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse // This only triggers when x &gt;= 0.67, so no need to check\n{\n    y=3;\n}\n</code></pre>\n\n<p>Now <code>javac</code> sees that if the first two don't trigger, the last will, so <code>y</code> will always have a value.</p>\n\n<p>You can alternatively add an <code>else</code> branch with an error, in case someone breaks the conditions:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse if(x &gt;= 0.67)\n{\n    y=3;\n}\nelse \n{\n    // This should never happen\n    throw new IllegalArgumentException(\"Something's gone terribly wrong for \" + x);\n}\n</code></pre>\n\n<p>This also compiles, and if someone later decides to skew the numbers and turns the first condition into <code>x &lt;= 0.2</code> but forgets to update the other condition, you'll get an exception at runtime.</p>\n"}],"owner":{"account_id":4437706,"reputation":1,"user_id":3613093,"display_name":"Roasted Legend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":23523708,"answer_count":1,"score":-3,"last_activity_date":1684338297,"creation_date":1399480857,"question_id":23523539,"body_markdown":"    import java.util.Scanner;\r\n    public class RPS\r\n    {\r\n    public void show()\r\n    {\r\n        int i;\r\n        System.out.println(&quot;1 - Rock          2 - Paper        3 - Scissor&quot;);\r\n        Scanner in = new Scanner(System.in);\r\n        i = in.nextInt();\r\n        double x = Math.random();\r\n        int y;\r\n        if(x&lt;=0.33)\r\n        {\r\n            y=1;\r\n        }\r\n        else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n        {\r\n            y=2;\r\n        }\r\n        else if(x&gt;=0.67)\r\n        {\r\n            y=3;\r\n        }\r\n        for(;;)    \r\n        {\r\n            if(i==y)\r\n            System.out.println(&quot;It&#39;s a draw!&quot;);\r\n            else if(i==1 &amp;&amp; y==2)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==1 &amp;&amp; y==3)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else if(i==2 &amp;&amp; y==1)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else if(i==2 &amp;&amp; y==3)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==3 &amp;&amp; y==1)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==3 &amp;&amp; y==2)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else\r\n            System.out.println(&quot;Error!&quot;);\r\n        }\r\n        }\r\n     }\r\nWhats wrong?\r\nIt gives an error that variable y might not have been intialised in the if&#39;s in the for loop.\r\nI have assigned a value to y in the previous if-else section.\r\nso why isnt it getting intialised?","title":"Variable y might not have been initialised in the if&#39;s in the loop","body":"<pre><code>import java.util.Scanner;\npublic class RPS\n{\npublic void show()\n{\n    int i;\n    System.out.println(\"1 - Rock          2 - Paper        3 - Scissor\");\n    Scanner in = new Scanner(System.in);\n    i = in.nextInt();\n    double x = Math.random();\n    int y;\n    if(x&lt;=0.33)\n    {\n        y=1;\n    }\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n    {\n        y=2;\n    }\n    else if(x&gt;=0.67)\n    {\n        y=3;\n    }\n    for(;;)    \n    {\n        if(i==y)\n        System.out.println(\"It's a draw!\");\n        else if(i==1 &amp;&amp; y==2)\n        System.out.println(\"Computer wins!\");\n        else if(i==1 &amp;&amp; y==3)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==1)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==3)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==1)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==2)\n        System.out.println(\"You win!\");\n        else\n        System.out.println(\"Error!\");\n    }\n    }\n }\n</code></pre>\n\n<p>Whats wrong?\nIt gives an error that variable y might not have been intialised in the if's in the for loop.\nI have assigned a value to y in the previous if-else section.\nso why isnt it getting intialised?</p>\n"},{"tags":["java","inheritance","abstract-class"],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1684338090,"creation_date":1684338090,"answer_id":76273886,"question_id":76273822,"body_markdown":"It is okay for `B.someFunction()` to return a class more derived than `A.someFunction()`. It is still the same method, and the override works.\r\n\r\nHowever, it is not okay for `B.someFunction()` to ***accept a parameter*** of a class more derived than `A.someFunction()`.  When you try to do that, the override breaks.\r\n\r\nThink of it this way: someone may have a reference to an `A` which is in fact an instance of `B`.  They may invoke it passing it an actual `A`. However, `B.someFunction()` expects an instance of `B`, and it will try to invoke methods of `B` which do not exist in the `A` that was passed. That would not work.","title":"Abstract method is not considered implemented when using Child class as return types","body":"<p>It is okay for <code>B.someFunction()</code> to return a class more derived than <code>A.someFunction()</code>. It is still the same method, and the override works.</p>\n<p>However, it is not okay for <code>B.someFunction()</code> to <em><strong>accept a parameter</strong></em> of a class more derived than <code>A.someFunction()</code>.  When you try to do that, the override breaks.</p>\n<p>Think of it this way: someone may have a reference to an <code>A</code> which is in fact an instance of <code>B</code>.  They may invoke it passing it an actual <code>A</code>. However, <code>B.someFunction()</code> expects an instance of <code>B</code>, and it will try to invoke methods of <code>B</code> which do not exist in the <code>A</code> that was passed. That would not work.</p>\n"}],"owner":{"account_id":14838274,"reputation":347,"user_id":10715700,"display_name":"BBloggsbott"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76273886,"answer_count":1,"score":2,"last_activity_date":1684338090,"creation_date":1684337720,"question_id":76273822,"body_markdown":"I have the classes\r\n```java\r\nabstract class A&lt;T&gt; {\r\n\r\n    public abstract A&lt;T&gt; someFunction(A&lt;?&gt; obj);\r\n}\r\n\r\npublic class B extends A&lt;Integer&gt;{\r\n\r\n    public B someFunction(B obj){...}\r\n}\r\n```\r\n\r\nI get an error that says `Class B must be declared abstract or must implement the abstract method someFunction(A&lt;?&gt; obj) in A`. My return type and parameter type are children of A. I don&#39;t understand why I am still getting this error.\r\n\r\n[This](https://stackoverflow.com/questions/40072186/how-to-use-abstract-class-child-type-as-the-type-of-an-abstract-methods-parame) is one solution I see where I can change `A` to something like `A&lt;T, ChildName&gt;` and use `ChildName` as the abstract function&#39;s parameter type. Is there a different way of doing this?","title":"Abstract method is not considered implemented when using Child class as return types","body":"<p>I have the classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class A&lt;T&gt; {\n\n    public abstract A&lt;T&gt; someFunction(A&lt;?&gt; obj);\n}\n\npublic class B extends A&lt;Integer&gt;{\n\n    public B someFunction(B obj){...}\n}\n</code></pre>\n<p>I get an error that says <code>Class B must be declared abstract or must implement the abstract method someFunction(A&lt;?&gt; obj) in A</code>. My return type and parameter type are children of A. I don't understand why I am still getting this error.</p>\n<p><a href=\"https://stackoverflow.com/questions/40072186/how-to-use-abstract-class-child-type-as-the-type-of-an-abstract-methods-parame\">This</a> is one solution I see where I can change <code>A</code> to something like <code>A&lt;T, ChildName&gt;</code> and use <code>ChildName</code> as the abstract function's parameter type. Is there a different way of doing this?</p>\n"},{"tags":["java","rx-java2"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1531833876,"post_id":51382154,"comment_id":89736899,"body_markdown":"Not sure what you try to achieve here. Do you want a keep-alive like event which is merged into the main flow? Do you want to execute an action after the source didn&#39;t produce an item without cancelling the source?","body":"Not sure what you try to achieve here. Do you want a keep-alive like event which is merged into the main flow? Do you want to execute an action after the source didn&#39;t produce an item without cancelling the source?"},{"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"score":0,"creation_date":1531834159,"post_id":51382154,"comment_id":89737124,"body_markdown":"@akarnokd, the main criteria is described in the question. I don&#39;t care about the source, and I don&#39;t want to keep anything alive.","body":"@akarnokd, the main criteria is described in the question. I don&#39;t care about the source, and I don&#39;t want to keep anything alive."},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1531834871,"post_id":51382154,"comment_id":89737652,"body_markdown":"Sounds like you need [`Observable.ambArray()`](http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-).","body":"Sounds like you need <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\"><code>Observable.ambArray()</code></a>."},{"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"score":0,"creation_date":1531838761,"post_id":51382154,"comment_id":89740599,"body_markdown":"@akarnokd, looks like it will fit, thanks","body":"@akarnokd, looks like it will fit, thanks"}],"answers":[{"tags":[],"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684338063,"creation_date":1684338063,"answer_id":76273880,"question_id":51382154,"body_markdown":"I ended up using [Observable.ambArray()][1]. \r\n\r\n\r\nThanks to the @akarnokd comment\r\n\r\n  [1]: http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-","title":"RX2. How to react on nothing emitted after x seconds?","body":"<p>I ended up using <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\">Observable.ambArray()</a>.</p>\n<p>Thanks to the @akarnokd comment</p>\n"}],"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273880,"answer_count":1,"score":0,"last_activity_date":1684338063,"creation_date":1531832691,"question_id":51382154,"body_markdown":"Despite that my question seems very common I haven&#39;t found any *nice* solution to this. The situation, of course, is solvable, but I want to solve it in more RX way, if you know what I mean.\r\n\r\n**The situation**\r\n\r\nI have an `Observable` that emits some events. What I want is to subscribe for next upcoming event, and do something, **if** there will be no events emitted for 1 second. So, if something is emitted - call method `doSomething()`. If nothing was emitted during 1 second, call method `doSomething()`.\r\n\r\n**Possible solution**\r\n\r\nOne of the possible solutions is to create `Completable.timer(1000)`, subscribe for both, and wait for first to emit / complete. Something like `Observable.combineLatest` except I don&#39;t have to wait both, but just first event to arrive. But I haven&#39;t found such functionality in RX2 also.\r\n\r\n**Please advice**\r\n\r\nPlease advice solution for both situations, if possible, is there a way to set a waiting delay for next emitted item, or to pick first emitted from several observables?\r\n\r\nThanks!","title":"RX2. How to react on nothing emitted after x seconds?","body":"<p>Despite that my question seems very common I haven't found any <em>nice</em> solution to this. The situation, of course, is solvable, but I want to solve it in more RX way, if you know what I mean.</p>\n\n<p><strong>The situation</strong></p>\n\n<p>I have an <code>Observable</code> that emits some events. What I want is to subscribe for next upcoming event, and do something, <strong>if</strong> there will be no events emitted for 1 second. So, if something is emitted - call method <code>doSomething()</code>. If nothing was emitted during 1 second, call method <code>doSomething()</code>.</p>\n\n<p><strong>Possible solution</strong></p>\n\n<p>One of the possible solutions is to create <code>Completable.timer(1000)</code>, subscribe for both, and wait for first to emit / complete. Something like <code>Observable.combineLatest</code> except I don't have to wait both, but just first event to arrive. But I haven't found such functionality in RX2 also.</p>\n\n<p><strong>Please advice</strong></p>\n\n<p>Please advice solution for both situations, if possible, is there a way to set a waiting delay for next emitted item, or to pick first emitted from several observables?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","swagger","jax-rs","openapi"],"answers":[{"tags":[],"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684338043,"creation_date":1684338043,"answer_id":76273877,"question_id":76266845,"body_markdown":"This seems like a mediocre solution to what seems like a common problem, but it does work. Enable this `filterClass` in the swagger config:\r\n\r\n```\r\npackage com.example;\r\n\r\nimport io.swagger.v3.core.filter.AbstractSpecFilter;\r\nimport io.swagger.v3.oas.models.OpenAPI;\r\nimport io.swagger.v3.oas.models.PathItem;\r\nimport io.swagger.v3.oas.models.Paths;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Optional;\r\n\r\npublic class PathSpecFilter extends AbstractSpecFilter {\r\n\tprivate static final String PUBLIC_PATH = &quot;/thePublicApiPrefix&quot;;\r\n\r\n\t@Override\r\n\tpublic Optional&lt;OpenAPI&gt; filterOpenAPI(final OpenAPI openAPI, final Map&lt;String, List&lt;String&gt;&gt; params, final Map&lt;String, String&gt; cookies, final Map&lt;String, List&lt;String&gt;&gt; headers) {\r\n\t\tfinal Optional&lt;OpenAPI&gt; opt = super.filterOpenAPI(openAPI, params, cookies, headers);\r\n\t\treturn opt.map(openapi -&gt; {\r\n\t\t\topenapi.setPaths(fix(openapi.getPaths()));\r\n\t\t\treturn openapi;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate Paths fix(final Paths paths) {\r\n\t\tfinal Paths next = new Paths();\r\n\r\n\t\tfor (final Entry&lt;String, PathItem&gt; entry : paths.entrySet()) {\r\n\t\t\tfinal String key = entry.getKey().startsWith(PUBLIC_PATH)\r\n\t\t\t\t\t? entry.getKey().substring(PUBLIC_PATH.length())\r\n\t\t\t\t\t: entry.getKey();\r\n\t\t\tnext.put(key, entry.getValue());\r\n\t\t}\r\n\r\n\t\treturn next;\r\n\t}\r\n}\r\n```\r\n","title":"Can we remove or hide path elements from swagger documentation?","body":"<p>This seems like a mediocre solution to what seems like a common problem, but it does work. Enable this <code>filterClass</code> in the swagger config:</p>\n<pre><code>package com.example;\n\nimport io.swagger.v3.core.filter.AbstractSpecFilter;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.PathItem;\nimport io.swagger.v3.oas.models.Paths;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Optional;\n\npublic class PathSpecFilter extends AbstractSpecFilter {\n    private static final String PUBLIC_PATH = &quot;/thePublicApiPrefix&quot;;\n\n    @Override\n    public Optional&lt;OpenAPI&gt; filterOpenAPI(final OpenAPI openAPI, final Map&lt;String, List&lt;String&gt;&gt; params, final Map&lt;String, String&gt; cookies, final Map&lt;String, List&lt;String&gt;&gt; headers) {\n        final Optional&lt;OpenAPI&gt; opt = super.filterOpenAPI(openAPI, params, cookies, headers);\n        return opt.map(openapi -&gt; {\n            openapi.setPaths(fix(openapi.getPaths()));\n            return openapi;\n        });\n    }\n\n    private Paths fix(final Paths paths) {\n        final Paths next = new Paths();\n\n        for (final Entry&lt;String, PathItem&gt; entry : paths.entrySet()) {\n            final String key = entry.getKey().startsWith(PUBLIC_PATH)\n                    ? entry.getKey().substring(PUBLIC_PATH.length())\n                    : entry.getKey();\n            next.put(key, entry.getValue());\n        }\n\n        return next;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684338043,"creation_date":1684268995,"question_id":76266845,"body_markdown":"My public API is served by my main web application but on a different domain. So that the paths don&#39;t conflict with my normal webapp paths, the public API endpoints have a hidden prefix. That is, when someone visits `https://api.example.com/foo` they are internally forwarded to `/publicApi/foo`; requests to `https://www.example.com/foo` are processed normally.\r\n\r\nOf course this means the JAX-RS classes for my API are all annotated like this:\r\n\r\n    @Path(&quot;/publicApi&quot;)\r\n    public class PublicApiFooResource {\r\n        @Path(&quot;/foo&quot;)\r\n        public Foo getFoo() {...}\r\n    }\r\n\r\nUsing `swagger-jaxrs2` (v2.2.7), this generates an openapi document that includes `/publicApi`:\r\n\r\n    paths: {\r\n        /publicApi/foo: {\r\n            get: { ... } etc\r\n\r\nHow can I get swagger-jaxrs2 to ignore the hidden leading part of the path? The path, from the world&#39;s perspective, is `/foo`; the internal forward shouldn&#39;t leak into the documentation.","title":"Can we remove or hide path elements from swagger documentation?","body":"<p>My public API is served by my main web application but on a different domain. So that the paths don't conflict with my normal webapp paths, the public API endpoints have a hidden prefix. That is, when someone visits <code>https://api.example.com/foo</code> they are internally forwarded to <code>/publicApi/foo</code>; requests to <code>https://www.example.com/foo</code> are processed normally.</p>\n<p>Of course this means the JAX-RS classes for my API are all annotated like this:</p>\n<pre><code>@Path(&quot;/publicApi&quot;)\npublic class PublicApiFooResource {\n    @Path(&quot;/foo&quot;)\n    public Foo getFoo() {...}\n}\n</code></pre>\n<p>Using <code>swagger-jaxrs2</code> (v2.2.7), this generates an openapi document that includes <code>/publicApi</code>:</p>\n<pre><code>paths: {\n    /publicApi/foo: {\n        get: { ... } etc\n</code></pre>\n<p>How can I get swagger-jaxrs2 to ignore the hidden leading part of the path? The path, from the world's perspective, is <code>/foo</code>; the internal forward shouldn't leak into the documentation.</p>\n"},{"tags":["java","class","oop","design-patterns","interface"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1684335664,"post_id":76273468,"comment_id":134503944,"body_markdown":"There&#39;s no generic answer to this. If it&#39;s a method only applicable to `DataAdapterImplF` then that&#39;s where it should live. If the `DataAdapter`s live in a list and you need to be able call it regardless of implementation then it should be in the interface, with the caveat that calling in on non-`DAIF`s will always be non-sensical--you could implement a default no-op, but this leads to cognitive overhead because it may not be obvious it&#39;s a no-op for everything except the `F`s.","body":"There&#39;s no generic answer to this. If it&#39;s a method only applicable to <code>DataAdapterImplF</code> then that&#39;s where it should live. If the <code>DataAdapter</code>s live in a list and you need to be able call it regardless of implementation then it should be in the interface, with the caveat that calling in on non-<code>DAIF</code>s will always be non-sensical--you could implement a default no-op, but this leads to cognitive overhead because it may not be obvious it&#39;s a no-op for everything except the <code>F</code>s."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684339956,"post_id":76273468,"comment_id":134505068,"body_markdown":"My doubt is that how come the `DataAdapterImplF` is not declared abstract? If the arguments are your problem then you can better encapsulate them into a class and use its reference as the method argument. Inside each implementation you can decide which and all attributes to be used.","body":"My doubt is that how come the <code>DataAdapterImplF</code> is not declared abstract? If the arguments are your problem then you can better encapsulate them into a class and use its reference as the method argument. Inside each implementation you can decide which and all attributes to be used."}],"answers":[{"tags":[],"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684337842,"creation_date":1684337842,"answer_id":76273842,"question_id":76273468,"body_markdown":"So I think the problem lays in the question you have asked. Interfaces are a very explicit contract, and in your case the contract is: \r\n\r\n&quot;*You give me three integers and I can calculate you some solution which will also be an integer.*&quot;\r\n\r\nThus, it does not make sense to ask how one would adapt some operation that only takes two integers to this interface. Those are just different things. What you could do is redefine your contract and say:\r\n\r\n &quot;*You give me two integers a, b and a third optional integer c, and I can calculate you some solution which will also be an integer.*&quot;\r\n\r\nThis contract would then look like this:\r\n\r\n    public interface DataAdapter {\r\n    \r\n        int solve(int a, int b, Optional&lt;Integer&gt; c)\r\n    }\r\n\r\n","title":"Best practice on adding a new method in a class implementing an interface with less parameters required","body":"<p>So I think the problem lays in the question you have asked. Interfaces are a very explicit contract, and in your case the contract is:</p>\n<p>&quot;<em>You give me three integers and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>Thus, it does not make sense to ask how one would adapt some operation that only takes two integers to this interface. Those are just different things. What you could do is redefine your contract and say:</p>\n<p>&quot;<em>You give me two integers a, b and a third optional integer c, and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>This contract would then look like this:</p>\n<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, Optional&lt;Integer&gt; c)\n}\n</code></pre>\n"}],"owner":{"account_id":12000414,"reputation":27,"user_id":8780539,"display_name":"ASHOK KUMAR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684337842,"creation_date":1684335334,"question_id":76273468,"body_markdown":"```\r\npublic interface DataAdapter {\r\n\r\n    int solve(int a, int b, int c)\r\n}\r\n\r\n```\r\n\r\nNow i have multiple classes which implements this interface something like :\r\n\r\n```\r\npublic class DataAdapterImplA implements DataAdapter {\r\n\r\n    int solve(int a, int b, int c) {\r\n\r\n        return ...\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\npublic class DataAdapterImplB implements DataAdapter {\r\n\r\n    int solve(int a, int b, int c) {\r\n\r\n        return ...\r\n    }\r\n}\r\n\r\n```\r\n\r\nand similarly multiple others ...\r\n\r\nNow i am adding one more implementing class but with one less parameter in the existing method signature ..something like below :\r\n\r\n```\r\npublic class DataAdapterImplF implements DataAdapter {\r\n\r\n    int solve(int a, int b) {\r\n\r\n        return ...\r\n    }\r\n}\r\n```\r\n\r\nSo , question here is how to go about this :\r\n\r\n 1. Should i override the existing `solve(int, int, int)` method only &amp; in my method body i can ignore this and won&#39;t use it at all ?\r\n\r\n 2. should i create a `default` method `solve(int, int)` in the interface &amp; override that in my new implementation class ?\r\n\r\n or any other better &amp; clean solution ?","title":"Best practice on adding a new method in a class implementing an interface with less parameters required","body":"<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, int c)\n}\n\n</code></pre>\n<p>Now i have multiple classes which implements this interface something like :</p>\n<pre><code>public class DataAdapterImplA implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<pre><code>public class DataAdapterImplB implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<p>and similarly multiple others ...</p>\n<p>Now i am adding one more implementing class but with one less parameter in the existing method signature ..something like below :</p>\n<pre><code>public class DataAdapterImplF implements DataAdapter {\n\n    int solve(int a, int b) {\n\n        return ...\n    }\n}\n</code></pre>\n<p>So , question here is how to go about this :</p>\n<ol>\n<li><p>Should i override the existing <code>solve(int, int, int)</code> method only &amp; in my method body i can ignore this and won't use it at all ?</p>\n</li>\n<li><p>should i create a <code>default</code> method <code>solve(int, int)</code> in the interface &amp; override that in my new implementation class ?</p>\n</li>\n</ol>\n<p>or any other better &amp; clean solution ?</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":8,"creation_date":1684136859,"post_id":76251872,"comment_id":134466996,"body_markdown":"`JAVA_HOME` is frequently misunderstood. The *tl;dr* is that Java itself doesn&#39;t care about that value. Some applications that *use* Java might look at it to decide what Java version to launch, but if you simply run `java` then only what is on your `PATH` matters.","body":"<code>JAVA_HOME</code> is frequently misunderstood. The <i>tl;dr</i> is that Java itself doesn&#39;t care about that value. Some applications that <i>use</i> Java might look at it to decide what Java version to launch, but if you simply run <code>java</code> then only what is on your <code>PATH</code> matters."}],"answers":[{"tags":[],"owner":{"account_id":16082845,"reputation":1,"user_id":11608309,"display_name":"Pisces"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1684137891,"creation_date":1684137891,"answer_id":76252036,"question_id":76251872,"body_markdown":"execute the source command  /etc/profile","title":"Unable to change Java version in Ubuntu Linux","body":"<p>execute the source command  /etc/profile</p>\n"},{"tags":[],"owner":{"account_id":69659,"reputation":9188,"user_id":202553,"accept_rate":71,"display_name":"knb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684147977,"creation_date":1684147977,"answer_id":76253348,"question_id":76251872,"body_markdown":"In Ubuntu you can run\r\n\r\n`update-alternatives --list java`\r\n\r\nthen you will get a listing of properly installed JDKs/JREs the operating system knows about.\r\n\r\n```text\r\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n/usr/lib/jvm/java-7-oracle/jre/bin/java\r\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\r\n```\r\n\r\nthen run  \r\n`update-alternatives --set &lt;one of the list items&gt;` to switch to a different one.\r\n","title":"Unable to change Java version in Ubuntu Linux","body":"<p>In Ubuntu you can run</p>\n<p><code>update-alternatives --list java</code></p>\n<p>then you will get a listing of properly installed JDKs/JREs the operating system knows about.</p>\n<pre><code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-7-oracle/jre/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n</code></pre>\n<p>then run<br />\n<code>update-alternatives --set &lt;one of the list items&gt;</code> to switch to a different one.</p>\n"}],"owner":{"account_id":1374590,"reputation":3325,"user_id":1308850,"accept_rate":37,"display_name":"FractalBob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684217359,"answer_count":2,"score":1,"last_activity_date":1684337264,"creation_date":1684136626,"question_id":76251872,"body_markdown":"I set JAVA_HOME in .bashrc on my Ubuntu 22.04.2 LTS system, but when I check the version, it&#39;s still the old one:\r\n\r\n    ruomini@ruomini-XPS-13-9370:~$ echo $JAVA_HOME\r\n    /home/ruomini/jdk-17.0.7\r\n    ruomini@ruomini-XPS-13-9370:~$ java -version\r\n    openjdk version &quot;11.0.18&quot; 2023-01-17\r\n    OpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\r\n    OpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed \r\n    mode, sharing)\r\n    ruomini@ruomini-XPS-13-9370:~$ \r\n\r\nUPDATE: I tried what was suggested below but for some reason, it didn&#39;t help: Java 17 doesn&#39;t appear, even though I installed it in /usr/lib/jvm:\r\n\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ update- \r\n    alternatives --list java\r\n\r\n    /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n    /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ ls -al \r\n    /usr/lib/jvm\r\n    total 40\r\n    drwxr-xr-x   5 root root  4096 May 15 09:31 .\r\n    drwxr-xr-x 159 root root 16384 Feb 23 18:18 ..\r\n    lrwxrwxrwx   1 root root    10 May 15 09:16 default-java -&gt; jdk-17.0.7\r\n    lrwxrwxrwx   1 root root    21 Jul 18  2019 java-1.11.0- \r\n    openjdk-amd64 -&gt; java-11-openjdk-amd64\r\n    -rw-r--r--   1 root root  2047 Jan 20 10:07 .java-1.11.0- \r\n    openjdk-amd64.jinfo\r\n    drwxr-xr-x   9 root root  4096 Mar  1 06:01 java-11- \r\n    openjdk-amd64\r\n    lrwxrwxrwx   1 root root    20 Mar 12  2018 java-1.8.0- \r\n    openjdk-amd64 -&gt; java-8-openjdk-amd64\r\n    -rw-r--r--   1 root root  2764 Jan 24 20:02 .java-1.8.0- \r\n    openjdk-amd64.jinfo\r\n    drwxr-xr-x   5 root root  4096 Jun 24  2016 java-8- \r\n    openjdk-amd64\r\n    drwxr-xr-x   9 root root  4096 May 15 09:09 jdk-17.0.7\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ \r\n\r\n**UPDATE** It turns out that I hadn&#39;t properly installed the Java SDK. Once it was installed correctly, the problem went away.\r\n\r\n\r\n","title":"Unable to change Java version in Ubuntu Linux","body":"<p>I set JAVA_HOME in .bashrc on my Ubuntu 22.04.2 LTS system, but when I check the version, it's still the old one:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~$ echo $JAVA_HOME\n/home/ruomini/jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~$ java -version\nopenjdk version &quot;11.0.18&quot; 2023-01-17\nOpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\nOpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed \nmode, sharing)\nruomini@ruomini-XPS-13-9370:~$ \n</code></pre>\n<p>UPDATE: I tried what was suggested below but for some reason, it didn't help: Java 17 doesn't appear, even though I installed it in /usr/lib/jvm:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ update- \nalternatives --list java\n\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ ls -al \n/usr/lib/jvm\ntotal 40\ndrwxr-xr-x   5 root root  4096 May 15 09:31 .\ndrwxr-xr-x 159 root root 16384 Feb 23 18:18 ..\nlrwxrwxrwx   1 root root    10 May 15 09:16 default-java -&gt; jdk-17.0.7\nlrwxrwxrwx   1 root root    21 Jul 18  2019 java-1.11.0- \nopenjdk-amd64 -&gt; java-11-openjdk-amd64\n-rw-r--r--   1 root root  2047 Jan 20 10:07 .java-1.11.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   9 root root  4096 Mar  1 06:01 java-11- \nopenjdk-amd64\nlrwxrwxrwx   1 root root    20 Mar 12  2018 java-1.8.0- \nopenjdk-amd64 -&gt; java-8-openjdk-amd64\n-rw-r--r--   1 root root  2764 Jan 24 20:02 .java-1.8.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   5 root root  4096 Jun 24  2016 java-8- \nopenjdk-amd64\ndrwxr-xr-x   9 root root  4096 May 15 09:09 jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ \n</code></pre>\n<p><strong>UPDATE</strong> It turns out that I hadn't properly installed the Java SDK. Once it was installed correctly, the problem went away.</p>\n"},{"tags":["java","android","xml","kotlin","imageview"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336645,"creation_date":1684336645,"question_id":76273657,"body_markdown":"This is the effect I would like to have:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have the following image:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  \r\n[1]: https://i.stack.imgur.com/tOA2t.gif\r\n\r\n[3]: https://i.stack.imgur.com/vaP3b.png\r\n\r\nI have to use this image (loading.xml) in a widget specifically it would be an element of the listview, I have to animate it as seen in the gif.\r\n\r\nThis is the code I use:\r\n\r\n```kotlin\r\noverride fun getViewAt(position: Int): RemoteViews? {\r\n        val remoteView = RemoteViews(context!!.packageName, R.layout.list_row)\r\n        val listItem = listItemList[position]\r\n\r\n        if (listItem.reached!!)\r\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.check)\r\n        else\r\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.loading)\r\n        return remoteView\r\n\r\n}\r\n```\r\n\r\nlist_row.xml\r\n```xml\r\n...\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/iv_circle&quot;\r\n            android:layout_width=&quot;30dp&quot;\r\n            android:layout_height=&quot;30dp&quot;\r\n            android:paddingLeft=&quot;2dp&quot;\r\n            android:src=&quot;@drawable/loading&quot; /&gt;\r\n...\r\n```\r\n\r\nloading.xml\r\n\r\n```xml\r\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:width=&quot;16dp&quot;\r\n    android:height=&quot;16dp&quot;\r\n    android:viewportWidth=&quot;16&quot;\r\n    android:viewportHeight=&quot;16&quot;&gt;\r\n    &lt;path\r\n        android:fillAlpha=&quot;0.2&quot;\r\n        android:fillColor=&quot;#F5AF45&quot;\r\n        android:pathData=&quot;m8,1.5a6.5,6.5 0 1 0 0,13a6.5,6.5 0 0 0 0,-13zm-8,6.5a8,8 0 1 1 16,0a8,8 0 0 1 -16,0z&quot; /&gt;\r\n    &lt;path\r\n        android:fillColor=&quot;#F5AF45&quot;\r\n        android:pathData=&quot;m7.25,0.75a0.75,0.75 0 0 1 0.75,-0.75a8,8 0 0 1 8,8a0.75,0.75 0 0 1 -1.5,0a6.5,6.5 0 0 0 -6.5,-6.5a0.75,0.75 0 0 1 -0.75,-0.75z&quot; /&gt;\r\n\r\n&lt;/vector&gt;\r\n```\r\n\r\nI tried looking in the documentation:\r\n\r\nhttps://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin\r\n\r\nhttps://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable\r\n\r\nhttps://developer.android.com/reference/android/graphics/drawable/AnimationDrawable\r\n\r\nBut I haven&#39;t found a way to animate it.\r\n\r\nI think that even a rotation of the image is enough to get the result.\r\n\r\nBut I think it should be done only on the xml side, because the `kotlin` code side for the widgets is very limited.\r\n\r\nImage I need to animate is in a `listview`.\r\n\r\nSee code above `getViewAt()` to see how the image is inserted.\r\n\r\nCan you give me a hand?","title":"Android Kotlin Widget animate a vector xml image in listview","body":"<p>This is the effect I would like to have:</p>\n<p><a href=\"https://i.stack.imgur.com/tOA2t.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOA2t.gif\" alt=\"enter image description here\" /></a></p>\n<p>I have the following image:</p>\n<p><a href=\"https://i.stack.imgur.com/vaP3b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vaP3b.png\" alt=\"enter image description here\" /></a></p>\n<p>I have to use this image (loading.xml) in a widget specifically it would be an element of the listview, I have to animate it as seen in the gif.</p>\n<p>This is the code I use:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun getViewAt(position: Int): RemoteViews? {\n        val remoteView = RemoteViews(context!!.packageName, R.layout.list_row)\n        val listItem = listItemList[position]\n\n        if (listItem.reached!!)\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.check)\n        else\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.loading)\n        return remoteView\n\n}\n</code></pre>\n<p>list_row.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n        &lt;ImageView\n            android:id=&quot;@+id/iv_circle&quot;\n            android:layout_width=&quot;30dp&quot;\n            android:layout_height=&quot;30dp&quot;\n            android:paddingLeft=&quot;2dp&quot;\n            android:src=&quot;@drawable/loading&quot; /&gt;\n...\n</code></pre>\n<p>loading.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:width=&quot;16dp&quot;\n    android:height=&quot;16dp&quot;\n    android:viewportWidth=&quot;16&quot;\n    android:viewportHeight=&quot;16&quot;&gt;\n    &lt;path\n        android:fillAlpha=&quot;0.2&quot;\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m8,1.5a6.5,6.5 0 1 0 0,13a6.5,6.5 0 0 0 0,-13zm-8,6.5a8,8 0 1 1 16,0a8,8 0 0 1 -16,0z&quot; /&gt;\n    &lt;path\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m7.25,0.75a0.75,0.75 0 0 1 0.75,-0.75a8,8 0 0 1 8,8a0.75,0.75 0 0 1 -1.5,0a6.5,6.5 0 0 0 -6.5,-6.5a0.75,0.75 0 0 1 -0.75,-0.75z&quot; /&gt;\n\n&lt;/vector&gt;\n</code></pre>\n<p>I tried looking in the documentation:</p>\n<p><a href=\"https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable</a></p>\n<p>But I haven't found a way to animate it.</p>\n<p>I think that even a rotation of the image is enough to get the result.</p>\n<p>But I think it should be done only on the xml side, because the <code>kotlin</code> code side for the widgets is very limited.</p>\n<p>Image I need to animate is in a <code>listview</code>.</p>\n<p>See code above <code>getViewAt()</code> to see how the image is inserted.</p>\n<p>Can you give me a hand?</p>\n"},{"tags":["java","image","swing","jframe","jlabel"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1684337220,"post_id":76273651,"comment_id":134504381,"body_markdown":"Don&#39;t put images in the src folder.  [Location-Independent Access to Resources](https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html).","body":"Don&#39;t put images in the src folder.  <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html\" rel=\"nofollow noreferrer\">Location-Independent Access to Resources</a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1684337305,"post_id":76273651,"comment_id":134504406,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/label.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684337379,"post_id":76273651,"comment_id":134504428,"body_markdown":"Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"}],"owner":{"account_id":26709907,"reputation":1,"user_id":20315473,"display_name":"nohjilk vanderlust"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336610,"creation_date":1684336610,"question_id":76273651,"body_markdown":"so I have an image in the folder of my project and I want to upload it on a label in a JFrame so the image will be show in the user interface, but when I run the project I only get the grey screen the picture is not being showed. this is the entire code, thank you eberyone.\r\n\r\n\r\n\r\n\r\n```\r\n\r\n//Main part of Java Eat//\r\npackage programming.javaeat;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.ImageIcon;\r\n\r\npublic class JavaEat {\r\n\r\n    public static void main(String[] args) {\r\n    JFrame frame = new JFrame();\r\n    int ancho = 700;\r\n    int largo = 600;\r\n    frame.setSize(ancho,largo);\r\n    \r\n    //Creaci&#243;n del label//\r\n   \r\n    JLabel label = new JLabel();\r\n    \r\n    // im&#225;gen en el label//\r\n    ImageIcon imagen = new ImageIcon(&quot;fondo.jpg&quot;);\r\n        label.setIcon(imagen);\r\n        \r\n    //agregar el label al frame//\r\n     frame.add(label);  \r\n     \r\n     //Mostrar el frame junto con el label//\r\n      frame.setVisible(true);\r\n        \r\n        \r\n    \r\n    }\r\n}\r\n```\r\n\r\n\r\nI have tried everything, using the design and the palette from the JFrame, coding it in another way...","title":"problem with adding an image on a JFrame with a label","body":"<p>so I have an image in the folder of my project and I want to upload it on a label in a JFrame so the image will be show in the user interface, but when I run the project I only get the grey screen the picture is not being showed. this is the entire code, thank you eberyone.</p>\n<pre><code>\n//Main part of Java Eat//\npackage programming.javaeat;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.ImageIcon;\n\npublic class JavaEat {\n\n    public static void main(String[] args) {\n    JFrame frame = new JFrame();\n    int ancho = 700;\n    int largo = 600;\n    frame.setSize(ancho,largo);\n    \n    //Creación del label//\n   \n    JLabel label = new JLabel();\n    \n    // imágen en el label//\n    ImageIcon imagen = new ImageIcon(&quot;fondo.jpg&quot;);\n        label.setIcon(imagen);\n        \n    //agregar el label al frame//\n     frame.add(label);  \n     \n     //Mostrar el frame junto con el label//\n      frame.setVisible(true);\n        \n        \n    \n    }\n}\n</code></pre>\n<p>I have tried everything, using the design and the palette from the JFrame, coding it in another way...</p>\n"},{"tags":["java","visual-studio-code","compiler-errors"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1652955586,"post_id":72302801,"comment_id":127735284,"body_markdown":"file containing your public class has to be named after that public class name.","body":"file containing your public class has to be named after that public class name."},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":3,"creation_date":1652955626,"post_id":72302801,"comment_id":127735291,"body_markdown":"The _file name_ of your `class main` currently is `tempCodeRunnerFile`. The class name of a public class has to be identical to the file name. So either rename the _class_ to `public class tempCodeRunnerFile` (however it should start uppercase due to java naming conventions but that&#39;s another topic) or rename the _file_ to `main.java`.","body":"The <i>file name</i> of your <code>class main</code> currently is <code>tempCodeRunnerFile</code>. The class name of a public class has to be identical to the file name. So either rename the <i>class</i> to <code>public class tempCodeRunnerFile</code> (however it should start uppercase due to java naming conventions but that&#39;s another topic) or rename the <i>file</i> to <code>main.java</code>."},{"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"score":1,"creation_date":1652955755,"post_id":72302801,"comment_id":127735340,"body_markdown":"so i need to save the file as main.java ?","body":"so i need to save the file as main.java ?"},{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":0,"creation_date":1652955796,"post_id":72302801,"comment_id":127735356,"body_markdown":"@AliOsseili Yes, that&#39;s what the error message tells you. &quot;[it] _should be declared in a file named main.java_&quot;","body":"@AliOsseili Yes, that&#39;s what the error message tells you. &quot;[it] <i>should be declared in a file named main.java</i>&quot;"},{"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"score":0,"creation_date":1652955837,"post_id":72302801,"comment_id":127735367,"body_markdown":"@maloomeister thanks man! how do i upvote u?","body":"@maloomeister thanks man! how do i upvote u?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1652957056,"post_id":72302801,"comment_id":127735772,"body_markdown":"Doesn&#39;t the error message tell you exactly what is wrong? In the future, you will probably want to do a decent search for [similar questions](https://www.google.com/search?q=site%3Astackoverflow.com+java+error%3A+class+is+public+should+be+declared+in+a+file+named) (please check the link here for an example) and review them before asking. Otherwise, if you ask multiple questions that are considered by the site to be low-quality, you could harm your ability to ask further questions (the site can automatically restrict you), and you will want to avoid that.","body":"Doesn&#39;t the error message tell you exactly what is wrong? In the future, you will probably want to do a decent search for <a href=\"https://www.google.com/search?q=site%3Astackoverflow.com+java+error%3A+class+is+public+should+be+declared+in+a+file+named\" rel=\"nofollow noreferrer\">similar questions</a> (please check the link here for an example) and review them before asking. Otherwise, if you ask multiple questions that are considered by the site to be low-quality, you could harm your ability to ask further questions (the site can automatically restrict you), and you will want to avoid that."}],"answers":[{"tags":[],"owner":{"account_id":13994563,"reputation":67,"user_id":10107721,"display_name":"HTTRCH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652955679,"creation_date":1652955679,"answer_id":72302838,"question_id":72302801,"body_markdown":"try naming your file, &quot;main.java&quot;","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>try naming your file, &quot;main.java&quot;</p>\n"},{"tags":[],"owner":{"account_id":25113175,"reputation":321,"user_id":18962551,"display_name":"Eskapone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1652955725,"creation_date":1652955725,"answer_id":72302850,"question_id":72302801,"body_markdown":"basically the compiler tells you whats wrong. It says, &quot;class main is public, should be declared in a file named main.java&quot;.\r\nJava has a naming rule, that a class inside a java file needs to match that file name.\r\nExample 1:\r\n\r\n  Filename -&gt; File.java\r\n\r\ninside that file:\r\n```\r\npublic class Main{\r\n...\r\n```\r\ndoes violate that rule (class name does not equal the file name)\r\n\r\nExample 2:\r\n\r\n  Filename -&gt; Main.java\r\n\r\ninside that file:\r\n```\r\npublic class Main{\r\n...\r\n```\r\nfollows that rule (class name does equal the file name)\r\n\r\nAlso for beginners:\r\nThis is a good quick read for basic code / naming conventions.\r\nhttps://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>basically the compiler tells you whats wrong. It says, &quot;class main is public, should be declared in a file named main.java&quot;.\nJava has a naming rule, that a class inside a java file needs to match that file name.\nExample 1:</p>\n<p>Filename -&gt; File.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>does violate that rule (class name does not equal the file name)</p>\n<p>Example 2:</p>\n<p>Filename -&gt; Main.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>follows that rule (class name does equal the file name)</p>\n<p>Also for beginners:\nThis is a good quick read for basic code / naming conventions.\n<a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html</a></p>\n"}],"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1652956571,"accepted_answer_id":72302850,"answer_count":2,"score":-5,"last_activity_date":1684336599,"creation_date":1652955492,"question_id":72302801,"body_markdown":"This is the code I have tried running\r\n\r\n``` \r\n    public class main\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        System.out.println(&quot;Hello, world!&quot;);\r\n    }\r\n}\r\n```\r\n  and it gives me this error:\r\n\r\ntempCodeRunnerFile.java:1: error: class main is public, should be declared in a file named main.java\r\npublic class main\r\n\r\nI don&#39;t know what&#39;s wrong tbh I have tried modifying and it looks similar to me like the example they gave..\r\n\r\n\r\n","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>This is the code I have tried running</p>\n<pre><code>    public class main\n{\n    public static void main(String[] args)\n    {\n        System.out.println(&quot;Hello, world!&quot;);\n    }\n}\n</code></pre>\n<p>and it gives me this error:</p>\n<p>tempCodeRunnerFile.java:1: error: class main is public, should be declared in a file named main.java\npublic class main</p>\n<p>I don't know what's wrong tbh I have tried modifying and it looks similar to me like the example they gave..</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-eks","aws-fargate"],"owner":{"account_id":27678502,"reputation":1,"user_id":21127798,"display_name":"Aditya Parikh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336418,"creation_date":1684336418,"question_id":76273620,"body_markdown":"We recently migrated a service running in EC2 instances to EKS Fargate. During testing we found some intermittent connection reset exception when trying to connect the the service using a load balancer(NLB).\r\n\r\n```\r\norg.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://go.xxxxxxxxxxx.com/api/push&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:437) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.airship.services.RestService.postObject(RestService.java:49) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat com.venuetize.airship.services.AirshipIntegrationService.sendNotification(AirshipIntegrationService.java:312) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat com.venuetize.airship.controllers.NotificationController.sendNotification(NotificationController.java:47) [classes!/:0.0.1-SNAPSHOT]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: java.net.SocketException: Connection reset\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:186) ~[?:?]\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:484) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:478) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1455) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066) ~[?:?]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.BufferingClientHttpRequestWrapper.executeInternal(BufferingClientHttpRequestWrapper.java:63) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.airship.utils.VzRequestResponseLoggingInterceptor.intercept(VzRequestResponseLoggingInterceptor.java:24) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.xtrace.interceptor.XTraceIdForwardingInterceptor.intercept(XTraceIdForwardingInterceptor.java:77) ~[xtrace-0.5.1.jar!/:?]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\t... 57 more\r\n```\r\n\r\n\r\n\r\nThe only observable pattern with multiple days of testing is, if I wait few hours or days between testing I&#39;ll see this exception but then the subsequent calls work fine. So it seems to be some networking issue and would like some guidance into this.","title":"Java-Springboot service running in EKS Fargate throws java.net.SocketException: Connection reset on the first call","body":"<p>We recently migrated a service running in EC2 instances to EKS Fargate. During testing we found some intermittent connection reset exception when trying to connect the the service using a load balancer(NLB).</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://go.xxxxxxxxxxx.com/api/push&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:437) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.services.RestService.postObject(RestService.java:49) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.services.AirshipIntegrationService.sendNotification(AirshipIntegrationService.java:312) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.controllers.NotificationController.sendNotification(NotificationController.java:47) [classes!/:0.0.1-SNAPSHOT]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.53.jar!/:?]\n    at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: java.net.SocketException: Connection reset\n    at java.net.SocketInputStream.read(SocketInputStream.java:186) ~[?:?]\n    at java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:484) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:478) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1455) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066) ~[?:?]\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.BufferingClientHttpRequestWrapper.executeInternal(BufferingClientHttpRequestWrapper.java:63) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.utils.VzRequestResponseLoggingInterceptor.intercept(VzRequestResponseLoggingInterceptor.java:24) ~[classes!/:0.0.1-SNAPSHOT]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.xtrace.interceptor.XTraceIdForwardingInterceptor.intercept(XTraceIdForwardingInterceptor.java:77) ~[xtrace-0.5.1.jar!/:?]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.10.jar!/:5.3.10]\n    ... 57 more\n</code></pre>\n<p>The only observable pattern with multiple days of testing is, if I wait few hours or days between testing I'll see this exception but then the subsequent calls work fine. So it seems to be some networking issue and would like some guidance into this.</p>\n"},{"tags":["java","apache-tika","lucee"],"answers":[{"tags":[],"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653130232,"creation_date":1652975548,"answer_id":72307594,"question_id":72302812,"body_markdown":"I think the problem is a class clash: The Lucee core engine already loads a version of Tika meaning the one you point to is ignored. But the loaded version doesn&#39;t behave as expected, returning empty strings as you&#39;ve seen.\r\n\r\nI&#39;ve solved this by using OSGi to load the desired Tika version. This involves editing the Manifest of the tika-app jar to include basic OSGi metadata and then loading it via my [osgiLoader][1]\r\n\r\nThere is a pre-built [Tika bundle][2] available but I haven&#39;t been able to get it to work with Lucee.\r\n\r\nHere&#39;s how to convert the latest `tika-app` jar to OSGi:\r\n\r\n1. open the &quot;tika-app-1.28.2.jar&quot; with 7-zip\r\n2. open META-INF then select MANIFEST.MF and press F4 to open it in a text editor\r\n3. add the following to the end of the file:\r\n```\r\nBundle-Name: Apache Tika App Bundle\r\nBundle-SymbolicName: apache-tika-app-bundle\r\nBundle-Description: Apache Tika App jar converted to an OSGi bundle\r\nBundle-ManifestVersion: 2\r\nBundle-Version: 1.28.2\r\nBundle-ClassPath: .,tika-app-1.28.2.jar\r\n```\r\n4. Save choosing to update when prompted.\r\n\r\nYou can then call the jar using osgiLoader as follows:\r\n\r\n**extractor.cfc**\r\n```\r\ncomponent{\r\n\r\n\tproperty name=&quot;loader&quot; type=&quot;object&quot;;\r\n\tproperty name=&quot;tikaBundle&quot; type=&quot;struct&quot;;\r\n\r\n\tpublic extractor function init( required object loader, required struct tikaBundle ){\r\n\t\tvariables.loader = arguments.loader\r\n\t\tvariables.tikaBundle = arguments.tikaBundle\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic string function parseToString( required string filePath ){\r\n\t\ttry{\r\n\t\t\tvar fileStream = CreateObject( &quot;java&quot;, &quot;java.io.FileInputStream&quot; ).init( JavaCast( &quot;string&quot;, arguments.filePath ) )\r\n\t\t\tvar tikaObject = loader.loadClass( &quot;org.apache.tika.Tika&quot;, tikaBundle.path, tikaBundle.name, tikaBundle.version )\r\n\t\t\tvar result = tikaObject.parseToString( fileStream )\r\n\t\t}\r\n\t\tfinally{\r\n\t\t\tfileStream.close()\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n}\r\n```\r\n(The following script assumes `extractor.cfc`, the modified Tika jar, the [`osgiLoader.cfc`][3] and the document to be processed are in the same directory.)\r\n\r\n**index.cfm**\r\n```\r\n&lt;cfscript&gt;\r\ndocPath = ExpandPath( &quot;test.pdf&quot; )\r\nloader = New osgiLoader()\r\ntikaBundle = {\r\n\tversion: &quot;1.28.2&quot;\r\n\t,name: &quot;apache-tika-app-bundle&quot;\r\n\t,path: ExpandPath( &quot;tika-app-1.28.2.jar&quot; )\r\n}\r\nextractor = New extractor( loader, tikaBundle )\r\nresult = extractor.parseToString( docPath )\r\ndump( result )\r\n&lt;/cfscript&gt;\r\n```\r\n\r\nAnother way to get the right version loaded is to use [JavaLoader][4]. For some reason I couldn&#39;t get it to work with the latest `tika-app` jar (`1.28.2`), but `1.19.1` does seem to work.\r\n\r\nHacking the existing extension\r\n------------------------------\r\nI would advise you to raise an issue with Preside to change their extension to avoid the clash, but as a temporary hack you could try amending it yourself as follows:\r\n\r\nFirst, add your modified Tika bundle and the `osgiLoader.cfc` to the `/preside-ext-tika/services/` directory.\r\n\r\nNext, change line 14 of `DocumentMetadataService.cfc` so the name of the Tika jar path matches your modified bundle.\r\n```\r\n_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.28.2.jar&quot; );\r\n```\r\n\r\nThen, modify lines 33-35 of the same cfc to replace:\r\n```\r\nvar parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\r\nvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\r\nvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\r\n```\r\nwith the following:\r\n```\r\nvar loader = New osgiLoader();\r\nvar tikaBundle = { version: &quot;1.28.2&quot;, name: &quot;apache-tika-app-bundle&quot; };\r\n\r\nvar parser = loader.loadClass( &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath, tikaBundle.name, tikaBundle.version )\r\nvar ch     = loader.loadClass( &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath, tikaBundle.name, tikaBundle.version ).init(-1)\r\nvar md     = loader.loadClass( &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath, tikaBundle.name, tikaBundle.version ).init()\r\n```\r\nNB: I don&#39;t have Preside so can&#39;t test it in context.\r\n\r\n  [1]: https://github.com/cfsimplicity/luceeOsgiLoader\r\n  [2]: https://mvnrepository.com/artifact/org.apache.tika/tika-bundle\r\n  [3]: https://github.com/cfsimplicity/luceeOsgiLoader/blob/main/osgiLoader.cfc\r\n  [4]: https://github.com/markmandel/JavaLoader","title":"Why am I unable to extract text via Apache Tika using Lucee?","body":"<p>I think the problem is a class clash: The Lucee core engine already loads a version of Tika meaning the one you point to is ignored. But the loaded version doesn't behave as expected, returning empty strings as you've seen.</p>\n<p>I've solved this by using OSGi to load the desired Tika version. This involves editing the Manifest of the tika-app jar to include basic OSGi metadata and then loading it via my <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader\" rel=\"nofollow noreferrer\">osgiLoader</a></p>\n<p>There is a pre-built <a href=\"https://mvnrepository.com/artifact/org.apache.tika/tika-bundle\" rel=\"nofollow noreferrer\">Tika bundle</a> available but I haven't been able to get it to work with Lucee.</p>\n<p>Here's how to convert the latest <code>tika-app</code> jar to OSGi:</p>\n<ol>\n<li>open the &quot;tika-app-1.28.2.jar&quot; with 7-zip</li>\n<li>open META-INF then select MANIFEST.MF and press F4 to open it in a text editor</li>\n<li>add the following to the end of the file:</li>\n</ol>\n<pre><code>Bundle-Name: Apache Tika App Bundle\nBundle-SymbolicName: apache-tika-app-bundle\nBundle-Description: Apache Tika App jar converted to an OSGi bundle\nBundle-ManifestVersion: 2\nBundle-Version: 1.28.2\nBundle-ClassPath: .,tika-app-1.28.2.jar\n</code></pre>\n<ol start=\"4\">\n<li>Save choosing to update when prompted.</li>\n</ol>\n<p>You can then call the jar using osgiLoader as follows:</p>\n<p><strong>extractor.cfc</strong></p>\n<pre><code>component{\n\n    property name=&quot;loader&quot; type=&quot;object&quot;;\n    property name=&quot;tikaBundle&quot; type=&quot;struct&quot;;\n\n    public extractor function init( required object loader, required struct tikaBundle ){\n        variables.loader = arguments.loader\n        variables.tikaBundle = arguments.tikaBundle\n        return this\n    }\n\n    public string function parseToString( required string filePath ){\n        try{\n            var fileStream = CreateObject( &quot;java&quot;, &quot;java.io.FileInputStream&quot; ).init( JavaCast( &quot;string&quot;, arguments.filePath ) )\n            var tikaObject = loader.loadClass( &quot;org.apache.tika.Tika&quot;, tikaBundle.path, tikaBundle.name, tikaBundle.version )\n            var result = tikaObject.parseToString( fileStream )\n        }\n        finally{\n            fileStream.close()\n        }\n        return result\n    }\n\n}\n</code></pre>\n<p>(The following script assumes <code>extractor.cfc</code>, the modified Tika jar, the <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader/blob/main/osgiLoader.cfc\" rel=\"nofollow noreferrer\"><code>osgiLoader.cfc</code></a> and the document to be processed are in the same directory.)</p>\n<p><strong>index.cfm</strong></p>\n<pre><code>&lt;cfscript&gt;\ndocPath = ExpandPath( &quot;test.pdf&quot; )\nloader = New osgiLoader()\ntikaBundle = {\n    version: &quot;1.28.2&quot;\n    ,name: &quot;apache-tika-app-bundle&quot;\n    ,path: ExpandPath( &quot;tika-app-1.28.2.jar&quot; )\n}\nextractor = New extractor( loader, tikaBundle )\nresult = extractor.parseToString( docPath )\ndump( result )\n&lt;/cfscript&gt;\n</code></pre>\n<p>Another way to get the right version loaded is to use <a href=\"https://github.com/markmandel/JavaLoader\" rel=\"nofollow noreferrer\">JavaLoader</a>. For some reason I couldn't get it to work with the latest <code>tika-app</code> jar (<code>1.28.2</code>), but <code>1.19.1</code> does seem to work.</p>\n<h2>Hacking the existing extension</h2>\n<p>I would advise you to raise an issue with Preside to change their extension to avoid the clash, but as a temporary hack you could try amending it yourself as follows:</p>\n<p>First, add your modified Tika bundle and the <code>osgiLoader.cfc</code> to the <code>/preside-ext-tika/services/</code> directory.</p>\n<p>Next, change line 14 of <code>DocumentMetadataService.cfc</code> so the name of the Tika jar path matches your modified bundle.</p>\n<pre><code>_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.28.2.jar&quot; );\n</code></pre>\n<p>Then, modify lines 33-35 of the same cfc to replace:</p>\n<pre><code>var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\nvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\nvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n</code></pre>\n<p>with the following:</p>\n<pre><code>var loader = New osgiLoader();\nvar tikaBundle = { version: &quot;1.28.2&quot;, name: &quot;apache-tika-app-bundle&quot; };\n\nvar parser = loader.loadClass( &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath, tikaBundle.name, tikaBundle.version )\nvar ch     = loader.loadClass( &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath, tikaBundle.name, tikaBundle.version ).init(-1)\nvar md     = loader.loadClass( &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath, tikaBundle.name, tikaBundle.version ).init()\n</code></pre>\n<p>NB: I don't have Preside so can't test it in context.</p>\n"}],"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72307594,"answer_count":1,"score":0,"last_activity_date":1684336353,"creation_date":1652955541,"question_id":72302812,"body_markdown":"I would like to extract text from pdf, docx etc via Lucee 5+ (5.2.9), but unfortunately I get empty result set. I have used several [Apache Tika versions][1] (runnable jar with Java 1.8.0) that might fit to my specific Lucee and Java requirements, but the result set always remains empty.   \r\n\r\n**exract.cfc**\r\n\r\n    component {\r\n        \r\n        public any function init() {\r\n    \r\n        \t_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.19.1.jar&quot; );\r\n    \r\n            return this;\r\n    \r\n        }\r\n    \r\n    \r\n        private struct function doParse( required any fileContent, boolean includeMeta=true, boolean includeText=true ) {\r\n    \t\tvar result  = {};\r\n    \t\tvar is      = &quot;&quot;;\r\n    \t\tvar jarPath = _getTikaJarPath();\r\n    \r\n    \t\tif ( IsBinary( arguments.fileContent ) ) {\r\n    \t\t\tis = CreateObject( &quot;java&quot;, &quot;java.io.ByteArrayInputStream&quot; ).init( arguments.fileContent );\r\n    \t\t} else {\r\n    \t\t\t// TODO, support plain string input (i.e. html)\r\n    \t\t\treturn {};\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tvar parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\r\n    \t\t\tvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\r\n    \t\t\tvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\r\n    \r\n    \t\t\tparser.parse( is, ch, md );\r\n    \r\n    \t\t\tif ( arguments.includeMeta ) {\r\n    \t\t\t\tresult.metadata = {};\r\n    \r\n    \t\t\t\tfor( var key in md.names() ) {\r\n    \t\t\t\t\tvar mdval = md.get( key );\r\n    \t\t\t\t\tif ( !isNull( mdval ) ) {\r\n    \t\t\t\t\t\tresult.metadata[ key ] = _removeNonUnicodeChars( mdval );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tif ( arguments.includeText ) {\r\n    \t\t\t\tresult.text = _removeNonUnicodeChars( ch.toString() );\r\n    \t\t\t}\r\n    \r\n    \t\t} catch( any e ) {\r\n    \t\t\tresult = { error = e };\r\n    \t\t}\r\n    \r\n    \t\treturn result;\r\n    }\r\n    \r\n    \r\n        public function read(required string filename) {\r\n    \t\tvar result = {};\r\n    \r\n    \t\tif(!fileExists(filename)) {\r\n    \t\t\tresult.error = &quot;#filename# does not exist.&quot;;\r\n    \t\t\treturn result;\r\n    \t\t};\r\n    \r\n    \t\tvar f = createObject(&quot;java&quot;, &quot;java.io.File&quot;).init(filename);\r\n    \t\tvar fis = createObject(&quot;java&quot;,&quot;java.io.FileInputStream&quot;).init(f);\r\n    \r\n    \t\ttry {\r\n    \t\t\tresult = doParse(fis);\r\n    \t\t} catch(any e) {\r\n    \t\t\tresult.error = e;\r\n    \t\t}\r\n    \t\tfis.close();\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \tprivate string function _removeNonUnicodeChars( required string potentiallyDirtyString ) {\r\n    \t\treturn ReReplace( arguments.potentiallyDirtyString, &quot;[^\\x20-\\x7E]&quot;, &quot;&quot;, &quot;all&quot; );\r\n    \t}\r\n    \r\n    // GETTERS AND SETTERS\r\n    \tprivate string function _getTikaJarPath() {\r\n    \t\treturn _tikaJarPath;\r\n    \t}\r\n    \tprivate void function _setTikaJarPath( required string tikaJarPath ) {\r\n    \t\t_tikaJarPath = arguments.tikaJarPath;\r\n    }\r\n    \r\n    \r\n    }\r\n\r\nand the code that i use to run it\r\n\r\n    &lt;cfset takis = new exract()&gt;\r\n    &lt;cfset files = directoryList(expandPath(&quot;./sources&quot;))&gt;\r\n    &lt;cfloop index=&quot;f&quot; array=&quot;#files#&quot;&gt;\r\n    \t&lt;cfif not findNoCase(&quot;.DS_Store&quot;,f)&gt;\r\n    \t\t&lt;cfdump var=&quot;#takis.read(f)#&quot; label=&quot;#f#&quot;&gt;\r\n    \t&lt;/cfif&gt;\r\n    &lt;/cfloop&gt;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://repo1.maven.org/maven2/org/apache/tika/tika-app/\r\n  [2]: https://i.stack.imgur.com/cyI9W.png","title":"Why am I unable to extract text via Apache Tika using Lucee?","body":"<p>I would like to extract text from pdf, docx etc via Lucee 5+ (5.2.9), but unfortunately I get empty result set. I have used several <a href=\"https://repo1.maven.org/maven2/org/apache/tika/tika-app/\" rel=\"nofollow noreferrer\">Apache Tika versions</a> (runnable jar with Java 1.8.0) that might fit to my specific Lucee and Java requirements, but the result set always remains empty.</p>\n<p><strong>exract.cfc</strong></p>\n<pre><code>component {\n    \n    public any function init() {\n\n        _setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.19.1.jar&quot; );\n\n        return this;\n\n    }\n\n\n    private struct function doParse( required any fileContent, boolean includeMeta=true, boolean includeText=true ) {\n        var result  = {};\n        var is      = &quot;&quot;;\n        var jarPath = _getTikaJarPath();\n\n        if ( IsBinary( arguments.fileContent ) ) {\n            is = CreateObject( &quot;java&quot;, &quot;java.io.ByteArrayInputStream&quot; ).init( arguments.fileContent );\n        } else {\n            // TODO, support plain string input (i.e. html)\n            return {};\n        }\n\n        try {\n            var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\n            var ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\n            var md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n\n            parser.parse( is, ch, md );\n\n            if ( arguments.includeMeta ) {\n                result.metadata = {};\n\n                for( var key in md.names() ) {\n                    var mdval = md.get( key );\n                    if ( !isNull( mdval ) ) {\n                        result.metadata[ key ] = _removeNonUnicodeChars( mdval );\n                    }\n                }\n            }\n\n            if ( arguments.includeText ) {\n                result.text = _removeNonUnicodeChars( ch.toString() );\n            }\n\n        } catch( any e ) {\n            result = { error = e };\n        }\n\n        return result;\n}\n\n\n    public function read(required string filename) {\n        var result = {};\n\n        if(!fileExists(filename)) {\n            result.error = &quot;#filename# does not exist.&quot;;\n            return result;\n        };\n\n        var f = createObject(&quot;java&quot;, &quot;java.io.File&quot;).init(filename);\n        var fis = createObject(&quot;java&quot;,&quot;java.io.FileInputStream&quot;).init(f);\n\n        try {\n            result = doParse(fis);\n        } catch(any e) {\n            result.error = e;\n        }\n        fis.close();\n        return result;\n    }\n\n    private string function _removeNonUnicodeChars( required string potentiallyDirtyString ) {\n        return ReReplace( arguments.potentiallyDirtyString, &quot;[^\\x20-\\x7E]&quot;, &quot;&quot;, &quot;all&quot; );\n    }\n\n// GETTERS AND SETTERS\n    private string function _getTikaJarPath() {\n        return _tikaJarPath;\n    }\n    private void function _setTikaJarPath( required string tikaJarPath ) {\n        _tikaJarPath = arguments.tikaJarPath;\n}\n\n\n}\n</code></pre>\n<p>and the code that i use to run it</p>\n<pre><code>&lt;cfset takis = new exract()&gt;\n&lt;cfset files = directoryList(expandPath(&quot;./sources&quot;))&gt;\n&lt;cfloop index=&quot;f&quot; array=&quot;#files#&quot;&gt;\n    &lt;cfif not findNoCase(&quot;.DS_Store&quot;,f)&gt;\n        &lt;cfdump var=&quot;#takis.read(f)#&quot; label=&quot;#f#&quot;&gt;\n    &lt;/cfif&gt;\n&lt;/cfloop&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cyI9W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cyI9W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":12445560,"reputation":231,"user_id":9061851,"display_name":"Pavel D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684336127,"creation_date":1684334384,"answer_id":76273317,"question_id":76272961,"body_markdown":"Your first solution with a single `@Transactional` method called from an async thread is actually a good solution, since all the operations performed in a single transaction.\r\nAs a side note, you don&#39;t need to call `residentsRepository.saveAll(residents)` when modifying exiting entity instances fetched by Hibernate inside a transaction. `save` is for new or &quot;detached&quot; entity instances (fetched previously, outside current transaction). See: https://stackoverflow.com/a/46708295\r\n\r\nEnabling batching in properties as you did is also very important. Batch size usually can be larger. I use these setting:\r\n```\r\nspring.jpa.properties.hibernate.jdbc.batch_size=200\r\nspring.jpa.properties.hibernate.order_inserts=true\r\nspring.jpa.properties.hibernate.order_updates=true\r\nspring.jpa.properties.hibernate.batch_versioned_data=true\r\n```\r\n\r\nYou don&#39;t show the logic inside `updateResidents()`. If this logic is simple enough, e.g. increment counter column for each, or set some constant value in each etc., you can get much better performance by using an update query in the repository, either JPQL or native. Something like this:\r\n```\r\n@Modifying\r\n@Query(&quot;update Resident r set r.someCounter = r.someCounter + 1, r.lastUpdate =:timestamp where r.cityId =:cityId&quot;)\r\nvoid updateResident(@Param(&quot;cityId&quot;) String cityId, @Param(&quot;timestamp&quot;) long timestamp);\r\n```","title":"Strategies to fetch and update entities using CompletableFuture in spring boot with hibernate","body":"<p>Your first solution with a single <code>@Transactional</code> method called from an async thread is actually a good solution, since all the operations performed in a single transaction.\nAs a side note, you don't need to call <code>residentsRepository.saveAll(residents)</code> when modifying exiting entity instances fetched by Hibernate inside a transaction. <code>save</code> is for new or &quot;detached&quot; entity instances (fetched previously, outside current transaction). See: <a href=\"https://stackoverflow.com/a/46708295\">https://stackoverflow.com/a/46708295</a></p>\n<p>Enabling batching in properties as you did is also very important. Batch size usually can be larger. I use these setting:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=200\nspring.jpa.properties.hibernate.order_inserts=true\nspring.jpa.properties.hibernate.order_updates=true\nspring.jpa.properties.hibernate.batch_versioned_data=true\n</code></pre>\n<p>You don't show the logic inside <code>updateResidents()</code>. If this logic is simple enough, e.g. increment counter column for each, or set some constant value in each etc., you can get much better performance by using an update query in the repository, either JPQL or native. Something like this:</p>\n<pre><code>@Modifying\n@Query(&quot;update Resident r set r.someCounter = r.someCounter + 1, r.lastUpdate =:timestamp where r.cityId =:cityId&quot;)\nvoid updateResident(@Param(&quot;cityId&quot;) String cityId, @Param(&quot;timestamp&quot;) long timestamp);\n</code></pre>\n"}],"owner":{"account_id":28620727,"reputation":3,"user_id":21913831,"display_name":"Tal Niv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273317,"answer_count":1,"score":0,"last_activity_date":1684336127,"creation_date":1684332075,"question_id":76272961,"body_markdown":"I have a spring boot application running with hibernate. In my scheme I have City which can have multiple Resident(s).\r\nI have the following method to update the residents of a city:\r\n\r\n```\r\npublic void updateResidentsInCity(long cityId) {\r\n        CompletableFuture\r\n                .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))\r\n                .thenApply(residents -&gt; {\r\n                    // update fields of the resident objects\r\n                    updateResidents(residents);\r\n                    return residents;\r\n                })\r\n                .thenAccept(residents -&gt; residentsRepository.saveAll(residents));\r\n}\r\n```\r\n\r\nBut this cause really bad performance issues, because the update running on a different thread, so the hibernate session is expired and when i call `residentsRepository.saveAll(residents)` hibernate needs to fetch all the entities again.\r\n\r\nI thought about two approaches to fix this issue and i&#39;m wondering what is best (or maybe there are another approaches, of course):\r\n\r\n1. Just give up the multiple CompletableFuture(s)- putting all the operations under one `@Transactional` and make blocking calls:\r\n\r\n```\r\n@Transactional\r\npublic void updateResidentsInCity(long cityId) {\r\n        final List&lt;Resident&gt; residents = residentsRepository.findAllByCityId(cityId);\r\n        updateResidents(residents);\r\n        residentsRepository.saveAll(residents);\r\n}\r\n```\r\n\r\nNow I can just call `updateResidentsInCity()` in a different thread:\r\n\r\n```\r\nCompletableFuture.runAsync(() -&gt; updateResidentsInCity(123))\r\n```\r\n\r\nIn addition, allow hibernate to make batch update by adding those properties:\r\n\r\n```\r\nspring.jpa.properties.hibernate.jdbc.batch_size=50\r\nspring.jpa.properties.hibernate.order_updates=true\r\n```\r\n\r\n2. keep the same code with CompletableFuture(s), but make `residentsRepository.findAllByCityId()` a `readOnly` transaction, and implement my own single native query for batch update:\r\n\r\n```\r\npublic void updateResidentsInCity(long cityId) {\r\n    CompletableFuture\r\n        .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))  // readOnly transaction\r\n        .thenApply(residents -&gt; {\r\n             updateResidents(residents);\r\n             return residents;\r\n         })\r\n         .thenAccept(residents -&gt; residentsRepository.batchUpdate(residents));  // new transaction, one native query\r\n}\r\n```\r\n\r\nI will be glad to get some insights about which approach is better, and maybe another approaches I didn&#39;t think of.\r\n**Please note that my application potentially should update many cities in the same time.**","title":"Strategies to fetch and update entities using CompletableFuture in spring boot with hibernate","body":"<p>I have a spring boot application running with hibernate. In my scheme I have City which can have multiple Resident(s).\nI have the following method to update the residents of a city:</p>\n<pre><code>public void updateResidentsInCity(long cityId) {\n        CompletableFuture\n                .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))\n                .thenApply(residents -&gt; {\n                    // update fields of the resident objects\n                    updateResidents(residents);\n                    return residents;\n                })\n                .thenAccept(residents -&gt; residentsRepository.saveAll(residents));\n}\n</code></pre>\n<p>But this cause really bad performance issues, because the update running on a different thread, so the hibernate session is expired and when i call <code>residentsRepository.saveAll(residents)</code> hibernate needs to fetch all the entities again.</p>\n<p>I thought about two approaches to fix this issue and i'm wondering what is best (or maybe there are another approaches, of course):</p>\n<ol>\n<li>Just give up the multiple CompletableFuture(s)- putting all the operations under one <code>@Transactional</code> and make blocking calls:</li>\n</ol>\n<pre><code>@Transactional\npublic void updateResidentsInCity(long cityId) {\n        final List&lt;Resident&gt; residents = residentsRepository.findAllByCityId(cityId);\n        updateResidents(residents);\n        residentsRepository.saveAll(residents);\n}\n</code></pre>\n<p>Now I can just call <code>updateResidentsInCity()</code> in a different thread:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; updateResidentsInCity(123))\n</code></pre>\n<p>In addition, allow hibernate to make batch update by adding those properties:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=50\nspring.jpa.properties.hibernate.order_updates=true\n</code></pre>\n<ol start=\"2\">\n<li>keep the same code with CompletableFuture(s), but make <code>residentsRepository.findAllByCityId()</code> a <code>readOnly</code> transaction, and implement my own single native query for batch update:</li>\n</ol>\n<pre><code>public void updateResidentsInCity(long cityId) {\n    CompletableFuture\n        .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))  // readOnly transaction\n        .thenApply(residents -&gt; {\n             updateResidents(residents);\n             return residents;\n         })\n         .thenAccept(residents -&gt; residentsRepository.batchUpdate(residents));  // new transaction, one native query\n}\n</code></pre>\n<p>I will be glad to get some insights about which approach is better, and maybe another approaches I didn't think of.\n<strong>Please note that my application potentially should update many cities in the same time.</strong></p>\n"},{"tags":["java","hibernate","generics","regression"],"comments":[{"owner":{"account_id":13732484,"reputation":158,"user_id":9909690,"display_name":"David Wolff"},"score":0,"creation_date":1674756162,"post_id":75169414,"comment_id":132786641,"body_markdown":"I&#39;m seeing this generics problem as well.  It&#39;s definitely a blocker for my migration up to Hibernate 6/Spring Boot 3.","body":"I&#39;m seeing this generics problem as well.  It&#39;s definitely a blocker for my migration up to Hibernate 6/Spring Boot 3."},{"owner":{"account_id":2126302,"reputation":2580,"user_id":1888372,"accept_rate":83,"display_name":"Albert Lazaro de Lara"},"score":0,"creation_date":1684335036,"post_id":75169414,"comment_id":134503790,"body_markdown":"Did you solved the problem? I have the same problem and, in my case, I think the problem is this line `builder.in(laboratori.get(&quot;id&quot;)).value(subqueryLaboratori)` where the value is a `Subquery` object instead of a String, Integer, Long... \nWith Spring 2.7.2 it worked but after the migration to 3.0.6 it breaks.","body":"Did you solved the problem? I have the same problem and, in my case, I think the problem is this line <code>builder.in(laboratori.get(&quot;id&quot;)).value(subqueryLaboratori)</code> where the value is a <code>Subquery</code> object instead of a String, Integer, Long...  With Spring 2.7.2 it worked but after the migration to 3.0.6 it breaks."},{"owner":{"account_id":2126302,"reputation":2580,"user_id":1888372,"accept_rate":83,"display_name":"Albert Lazaro de Lara"},"score":0,"creation_date":1684402398,"post_id":75169414,"comment_id":134513850,"body_markdown":"I found the solution to my problem in the migration guides https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html and https://docs.jboss.org/hibernate/orm/6.1/migration-guide/migration-guide.html. Read carefully because they are long, but provide all the necessary information.","body":"I found the solution to my problem in the migration guides <a href=\"https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.0/migration-guide/&hellip;</a> and <a href=\"https://docs.jboss.org/hibernate/orm/6.1/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.1/migration-guide/&hellip;</a>. Read carefully because they are long, but provide all the necessary information."}],"answers":[{"tags":[],"owner":{"account_id":3252792,"reputation":1390,"user_id":2742642,"accept_rate":75,"display_name":"Uli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675085546,"creation_date":1675085546,"answer_id":75285153,"question_id":75169414,"body_markdown":"The solution is to use the cast method for the generic field:\r\n\r\n```java\r\ncr.select(person.get(&quot;name&quot;).as(String.class));\r\n```","title":"Hibernate 6 regression with generics","body":"<p>The solution is to use the cast method for the generic field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cr.select(person.get(&quot;name&quot;).as(String.class));\n</code></pre>\n"}],"owner":{"account_id":3252792,"reputation":1390,"user_id":2742642,"accept_rate":75,"display_name":"Uli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75285153,"answer_count":1,"score":3,"last_activity_date":1684336091,"creation_date":1674116525,"question_id":75169414,"body_markdown":"I tried to migrate my application from Hibernate `5.4.30.Final` to `6.1.6.Final`, database H2 2.1.214. I observed a different behaviour regarding generics when using a `CriteriaQuery`. I have stripped it down to a testcase (which does not make any sense but shows the problem). In Hibernate 5 the following query to a generic field `name` runs fine whereas Hibernate 6 throws an Exception.\r\n\r\n```java\r\nCriteriaBuilder cb = eMgr.getCriteriaBuilder();\r\nCriteriaQuery&lt;String&gt; cr = cb.createQuery(String.class);\r\nRoot&lt;Person&gt; person = cr.from(Person.class);\r\ncr.select(person.&lt;String&gt; get(&quot;name&quot;));\r\nTypedQuery&lt;String&gt; query = eMgr.createQuery(cr);\r\n```\r\n\r\nException:\r\n\r\n    Converting `org.hibernate.query.QueryTypeMismatchException` to JPA `PersistenceException` : Specified result type [java.lang.String] did not match Query selection type [java.lang.Object] - multiple selections: use Tuple or array\r\n\r\nHere are my sample class definitions:\r\n\r\n```java\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.Id;\r\n\r\n@Entity\r\npublic class GenericPerson&lt;T&gt;\r\n{\r\n\t@Id\r\n\t@GeneratedValue(generator = &quot;increment&quot;)\r\n\tprivate long id;\r\n\tprivate T name;\r\n\r\n\tpublic GenericPerson()\t{\t}\r\n\tpublic GenericPerson(T name)\t{ this.name = name;}\r\n\r\n\tpublic T getName() { return this.name; }\r\n\tpublic void setName(T name) {\tthis.name = name;\t}\r\n\r\n\tpublic long getId() { return this.id;}\r\n\tpublic void setId(long id) { this.id = id; }\r\n}\r\n\r\n@Entity\r\npublic class Person\textends GenericPerson&lt;String&gt;\r\n{\r\n\tpublic Person() { }\r\n\tpublic Person(String name) {\tsuper(name);\t}\r\n}\r\n```\r\n\r\nHibernate 5 seems to handle generics differently to Hibernate 6 but I could not find any hint in the migration document. Why fails the test case with Hibernate 6?\r\n","title":"Hibernate 6 regression with generics","body":"<p>I tried to migrate my application from Hibernate <code>5.4.30.Final</code> to <code>6.1.6.Final</code>, database H2 2.1.214. I observed a different behaviour regarding generics when using a <code>CriteriaQuery</code>. I have stripped it down to a testcase (which does not make any sense but shows the problem). In Hibernate 5 the following query to a generic field <code>name</code> runs fine whereas Hibernate 6 throws an Exception.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = eMgr.getCriteriaBuilder();\nCriteriaQuery&lt;String&gt; cr = cb.createQuery(String.class);\nRoot&lt;Person&gt; person = cr.from(Person.class);\ncr.select(person.&lt;String&gt; get(&quot;name&quot;));\nTypedQuery&lt;String&gt; query = eMgr.createQuery(cr);\n</code></pre>\n<p>Exception:</p>\n<pre><code>Converting `org.hibernate.query.QueryTypeMismatchException` to JPA `PersistenceException` : Specified result type [java.lang.String] did not match Query selection type [java.lang.Object] - multiple selections: use Tuple or array\n</code></pre>\n<p>Here are my sample class definitions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class GenericPerson&lt;T&gt;\n{\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    private long id;\n    private T name;\n\n    public GenericPerson()  {   }\n    public GenericPerson(T name)    { this.name = name;}\n\n    public T getName() { return this.name; }\n    public void setName(T name) {   this.name = name;   }\n\n    public long getId() { return this.id;}\n    public void setId(long id) { this.id = id; }\n}\n\n@Entity\npublic class Person extends GenericPerson&lt;String&gt;\n{\n    public Person() { }\n    public Person(String name) {    super(name);    }\n}\n</code></pre>\n<p>Hibernate 5 seems to handle generics differently to Hibernate 6 but I could not find any hint in the migration document. Why fails the test case with Hibernate 6?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9565,"page":427,"page_size":100}
