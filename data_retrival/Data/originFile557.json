{"items":[{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5559246,"reputation":3573,"user_id":4409319,"accept_rate":70,"display_name":"JSelser"},"score":0,"creation_date":1679423691,"post_id":75804605,"comment_id":133718897,"body_markdown":"interesting, there is no `ThreadID()` method in java tho. Im assuming you are creating two server objects by just doing `new Server()`?","body":"interesting, there is no <code>ThreadID()</code> method in java tho. Im assuming you are creating two server objects by just doing <code>new Server()</code>?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1679438383,"post_id":75804605,"comment_id":133722066,"body_markdown":"As JSelser pointed out, the code in the question doesn&#39;t compile. It&#39;s also missing the code that creates the `Server` objects. I tried to reproduce by changing `ThreadID` to `getId`, and added a `main` method to `Server` that creates two instances and runs them. That produced two different thread IDs. Please read [How to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) and edit your question with a working reproduction.","body":"As JSelser pointed out, the code in the question doesn&#39;t compile. It&#39;s also missing the code that creates the <code>Server</code> objects. I tried to reproduce by changing <code>ThreadID</code> to <code>getId</code>, and added a <code>main</code> method to <code>Server</code> that creates two instances and runs them. That produced two different thread IDs. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a> and edit your question with a working reproduction."},{"owner":{"account_id":18510547,"reputation":33,"user_id":13485856,"display_name":"PM25"},"score":0,"creation_date":1679443306,"post_id":75804605,"comment_id":133722757,"body_markdown":"Hey thanks for the helpful comments, I updated the question with more context that should hopefully make things more clear.","body":"Hey thanks for the helpful comments, I updated the question with more context that should hopefully make things more clear."}],"owner":{"account_id":18510547,"reputation":33,"user_id":13485856,"display_name":"PM25"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679443265,"creation_date":1679420145,"question_id":75804605,"body_markdown":"I have a Java program in which I am creating a distributed key-value store. For context, I have 2 objects, a Server and a ReplicaPoller, each of which are Runnable. In the Server object I have,\r\n```\r\npublic class Server implements Runnable {\r\n    boolean createdPoller = false;\r\n    // ...\r\n    \r\n    public void run() {\r\n        // ...\r\n        if (!createdPoller) {\r\n            ReplicaPoller replicaPoller = new ReplicaPoller();\r\n            Thread replicaPollerThread = new Thread(replicaPoller);\r\n            replicaPollerThread.start();\r\n            createdPoller = true;\r\n        }\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nAnd in ReplicaPoller I have, \r\n```\r\npublic class ReplicaPoller implements Runnable {\r\n    // ...\r\n\r\n    public void run() {\r\n        logger.info(hostServer.name + &quot; &quot; + Thread.currentThread().threadId());\r\n());\r\n        // hostServer is the server that created this instance of Replica Poller.\r\n        // ...\r\n    }\r\n}\r\n```\r\nHowever when I create 2 Server objects, their corresponding ReplicaPoller&#39;s log the same thread ID. Any intracasy I seem to be missing? I&#39;m creating new instances of the ReplicaPollers&#39; threads in the Server object, so I&#39;m not sure why they&#39;re using the same thread.\r\n\r\n**Edit:** For additional context, I have an external configuration service that will create the servers by executing, `Runtime.getRunTime().exec(&quot;java -jar server.jar -p port -n name&quot;)`. Where `-p` parameter is the port the server listens on and `-n` is a unique identifier for the server (serverAddress:port). Furthermore, I&#39;m using log4j for logging purposes, in which all created servers and ReplicaPollers share the same root logger and log to a file: server.log. It is in this file where I am seeing the same thread log the following:\r\n```\r\n2023-03-21 13:21:33,447 INFO  [Thread-2] 127.0.0.1:8029: 127.0.0.1:8029 25\r\n``` \r\nAND\r\n\r\n```\r\n2023-03-21 13:21:37,648 INFO  [Thread-2] 127.0.0.1:8062: 127.0.0.1:8062 25\r\n```\r\n\r\nFYI I&#39;m not sure why some are saying they are getting compiler errors with the `threadId()` method call because it works for me, and the reason why I don&#39;t use `getId()` is because my IDE (Idea) said it was deprecated ... (Using Java JDK 19).","title":"Distinct Child Threads not Being Created","body":"<p>I have a Java program in which I am creating a distributed key-value store. For context, I have 2 objects, a Server and a ReplicaPoller, each of which are Runnable. In the Server object I have,</p>\n<pre><code>public class Server implements Runnable {\n    boolean createdPoller = false;\n    // ...\n    \n    public void run() {\n        // ...\n        if (!createdPoller) {\n            ReplicaPoller replicaPoller = new ReplicaPoller();\n            Thread replicaPollerThread = new Thread(replicaPoller);\n            replicaPollerThread.start();\n            createdPoller = true;\n        }\n        // ...\n    }\n}\n</code></pre>\n<p>And in ReplicaPoller I have,</p>\n<pre><code>public class ReplicaPoller implements Runnable {\n    // ...\n\n    public void run() {\n        logger.info(hostServer.name + &quot; &quot; + Thread.currentThread().threadId());\n());\n        // hostServer is the server that created this instance of Replica Poller.\n        // ...\n    }\n}\n</code></pre>\n<p>However when I create 2 Server objects, their corresponding ReplicaPoller's log the same thread ID. Any intracasy I seem to be missing? I'm creating new instances of the ReplicaPollers' threads in the Server object, so I'm not sure why they're using the same thread.</p>\n<p><strong>Edit:</strong> For additional context, I have an external configuration service that will create the servers by executing, <code>Runtime.getRunTime().exec(&quot;java -jar server.jar -p port -n name&quot;)</code>. Where <code>-p</code> parameter is the port the server listens on and <code>-n</code> is a unique identifier for the server (serverAddress:port). Furthermore, I'm using log4j for logging purposes, in which all created servers and ReplicaPollers share the same root logger and log to a file: server.log. It is in this file where I am seeing the same thread log the following:</p>\n<pre><code>2023-03-21 13:21:33,447 INFO  [Thread-2] 127.0.0.1:8029: 127.0.0.1:8029 25\n</code></pre>\n<p>AND</p>\n<pre><code>2023-03-21 13:21:37,648 INFO  [Thread-2] 127.0.0.1:8062: 127.0.0.1:8062 25\n</code></pre>\n<p>FYI I'm not sure why some are saying they are getting compiler errors with the <code>threadId()</code> method call because it works for me, and the reason why I don't use <code>getId()</code> is because my IDE (Idea) said it was deprecated ... (Using Java JDK 19).</p>\n"},{"tags":["java","json","graphql","mocking","faker"],"owner":{"account_id":12965362,"reputation":1,"user_id":9373098,"display_name":"Rk12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679443001,"creation_date":1679440584,"question_id":75807174,"body_markdown":"Are there any open source libraries that I can use to generate meaningful fake data for internal testing?\r\nFor example Given the schema,\r\n```\r\ntype Actor {\r\n firstName: String\r\n Address: String\r\n blogUrl: String\r\n}\r\n```\r\n\r\nI want it to return meaningful data for above fields. I found some libraries which does it based on the types (i.e. String, Int etc) but it doesn&#39;t make sense when a String field could be name, address, url or something else.\r\n\r\n\r\n\r\n\r\nI have a huge graphql schema so solutions like below are ideal for me.\r\n1. Can categorize these fields and set some static value based on categories.\r\n2. Annotate these fields and based on it generate the data.","title":"Generate meaningful fake data based on graphql type or field names","body":"<p>Are there any open source libraries that I can use to generate meaningful fake data for internal testing?\nFor example Given the schema,</p>\n<pre><code>type Actor {\n firstName: String\n Address: String\n blogUrl: String\n}\n</code></pre>\n<p>I want it to return meaningful data for above fields. I found some libraries which does it based on the types (i.e. String, Int etc) but it doesn't make sense when a String field could be name, address, url or something else.</p>\n<p>I have a huge graphql schema so solutions like below are ideal for me.</p>\n<ol>\n<li>Can categorize these fields and set some static value based on categories.</li>\n<li>Annotate these fields and based on it generate the data.</li>\n</ol>\n"},{"tags":["java","spring","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562352982,"post_id":56898864,"comment_id":100360680,"body_markdown":"you have several bad things in your code, you NEVER subscribe in a webflux application so all `subscribe` needs to be removed. And i have no idea what your question is. It when people call your service, or when your service calls another service?","body":"you have several bad things in your code, you NEVER subscribe in a webflux application so all <code>subscribe</code> needs to be removed. And i have no idea what your question is. It when people call your service, or when your service calls another service?"},{"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"score":0,"creation_date":1562360369,"post_id":56898864,"comment_id":100362813,"body_markdown":"Thank you for your reply.  You mean which part of my source has BAD thing? Router or WebClient? Kindly inform me the reference site as well as the my mistakes.","body":"Thank you for your reply.  You mean which part of my source has BAD thing? Router or WebClient? Kindly inform me the reference site as well as the my mistakes."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562360746,"post_id":56898864,"comment_id":100362890,"body_markdown":"your service is a `publisher`, all clients calling it are `subscribers`. So you should not use `subscribe`","body":"your service is a <code>publisher</code>, all clients calling it are <code>subscribers</code>. So you should not use <code>subscribe</code>"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562360856,"post_id":56898864,"comment_id":100362912,"body_markdown":"you should never `/route/user/login/{username}/{password}` this will send usernames and passwords over the internet free for everyone to see https://security.stackexchange.com/questions/142695/is-a-plain-password-in-the-url-a-potential-security-threat","body":"you should never <code>&#47;route&#47;user&#47;login&#47;{username}&#47;{password}</code> this will send usernames and passwords over the internet free for everyone to see <a href=\"https://security.stackexchange.com/questions/142695/is-a-plain-password-in-the-url-a-potential-security-threat\" title=\"is a plain password in the url a potential security threat\">security.stackexchange.com/questions/142695/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1712006,"reputation":2649,"user_id":8951344,"display_name":"MuratOzkan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1562361514,"creation_date":1562361514,"answer_id":56909333,"question_id":56898864,"body_markdown":"HTTP Basic authentication expects the username and password encoded in Base64 format in `Authorization` header. Also, you don&#39;t need to have a login endpoint since this information should be sent with every request.\r\n\r\nAdd the Basic Auth header to each call in your client like the following:\r\n\r\n    String basicAuthHeader = &quot;basic &quot; + Base64Utils.encodeToString((username + &quot;:&quot; + password).getBytes())\r\n\r\n    client.get().uri(&quot;/route/user/all&quot;)\r\n          .accept(MediaType.APPLICATION_JSON)\r\n          .header(HttpHeaders.AUTHORIZATION, basicAuthHeader)\r\n          .exchange()\r\n          .flatMapMany(response -&gt; response.bodyToFlux(User.class))\r\n          .subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>HTTP Basic authentication expects the username and password encoded in Base64 format in <code>Authorization</code> header. Also, you don't need to have a login endpoint since this information should be sent with every request.</p>\n\n<p>Add the Basic Auth header to each call in your client like the following:</p>\n\n<pre><code>String basicAuthHeader = \"basic \" + Base64Utils.encodeToString((username + \":\" + password).getBytes())\n\nclient.get().uri(\"/route/user/all\")\n      .accept(MediaType.APPLICATION_JSON)\n      .header(HttpHeaders.AUTHORIZATION, basicAuthHeader)\n      .exchange()\n      .flatMapMany(response -&gt; response.bodyToFlux(User.class))\n      .subscribe(u -&gt; System.out.println(\"All Users : \" + u.getUsername() + \":\" + u.getEmail() + \":\" + u.getFullname()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2588244,"reputation":71,"user_id":2243444,"display_name":"Anton Bogdan"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1589025900,"creation_date":1589025900,"answer_id":61696434,"question_id":56898864,"body_markdown":"Spring provides API for supplying basic authentication parameters to your WebClient via [ClientFilters](https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-filter).\r\n\r\nYou can achieve the same result of having `Authorization` header set up with less custom coding.\r\n\r\nPlease see code snippet below from spring docs:\r\n\r\n   \r\n\r\n    import static org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;\r\n        \r\n        WebClient client = WebClient.builder()\r\n                .filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;))\r\n                .build();","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>Spring provides API for supplying basic authentication parameters to your WebClient via <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-filter\" rel=\"noreferrer\">ClientFilters</a>.</p>\n\n<p>You can achieve the same result of having <code>Authorization</code> header set up with less custom coding.</p>\n\n<p>Please see code snippet below from spring docs:</p>\n\n<pre><code>import static org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;\n\n    WebClient client = WebClient.builder()\n            .filter(basicAuthentication(\"user\", \"password\"))\n            .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107251,"reputation":11844,"user_id":285288,"accept_rate":64,"display_name":"James"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1601381692,"creation_date":1595105595,"answer_id":62973691,"question_id":56898864,"body_markdown":"Since spring 5.1 you should set basic authentication with [`HttpHeaders#setBasicAuth`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html#setBasicAuth-java.lang.String-java.lang.String-), like this:\r\n```\r\nwebClient\r\n    .get()\r\n    .uri(&quot;https://example.com&quot;)\r\n    .headers(headers -&gt; headers.setBasicAuth(&quot;username&quot;, &quot;password&quot;))\r\n    .exchange()\r\n    ....\r\n```\r\nthe previous approach, of using [`.filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;)`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunctions.html#basicAuthentication-java.lang.String-java.lang.String-), is now deprecated.\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>Since spring 5.1 you should set basic authentication with <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html#setBasicAuth-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>HttpHeaders#setBasicAuth</code></a>, like this:</p>\n<pre><code>webClient\n    .get()\n    .uri(&quot;https://example.com&quot;)\n    .headers(headers -&gt; headers.setBasicAuth(&quot;username&quot;, &quot;password&quot;))\n    .exchange()\n    ....\n</code></pre>\n<p>the previous approach, of using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunctions.html#basicAuthentication-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>.filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;)</code></a>, is now deprecated.</p>\n"}],"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19848,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":56909333,"answer_count":3,"score":10,"last_activity_date":1679442899,"creation_date":1562313328,"question_id":56898864,"body_markdown":"I try to make Spring WebFlux security application with router and handler classes. First, below codes are the configuration codes of WebFlux security.\r\n\r\n```lang-java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class BlogWebFluxSecurityConfig {\r\n\t\r\n\t@Bean\r\n\tpublic MapReactiveUserDetailsService userDetailsService() {\r\n\t\t\r\n\t\tUserDetails userWebFlux = User.withUsername(&quot;joseph&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;).build();\r\n\t\treturn new MapReactiveUserDetailsService(userWebFlux);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n\t\thttp\r\n\t\t.authorizeExchange()\r\n\t\t.pathMatchers(&quot;/route/user/all&quot;, &quot;/route/post/all&quot;).permitAll()\r\n\t    .pathMatchers(HttpMethod.GET, &quot;/route/user/**&quot;, &quot;/route/post/**&quot;).hasRole(&quot;USER&quot;)\r\n\t    .anyExchange().authenticated()\r\n\t    .and()\r\n\t    .httpBasic();\r\n\t\t\r\n\t\treturn http.build();\r\n\t} \r\n}\r\n```\r\n\r\nAnd the next codes are about the router class:\r\n\r\n```lang-java\r\n@Configuration\r\n@EnableWebFlux\r\npublic class BlogWebFluxEndpointRouter {\r\n\r\n\t@Bean\r\n\tpublic RouterFunction&lt;ServerResponse&gt; routesUser(UserHandler handler) {\r\n\t\t\r\n\t\treturn RouterFunctions.route(RequestPredicates.GET(&quot;/route/user/all&quot;), handler::findAll)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/id/{id}&quot;), handler::findById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/username/{username}&quot;), handler::findByUsername)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/email/{email}&quot;), handler::findByEmail)\r\n\t\t\t\t\t.andRoute(RequestPredicates.POST(&quot;/route/user/create&quot;), handler::register)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/login/{username}/{password}&quot;), handler::authenticate);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic RouterFunction&lt;ServerResponse&gt; routesPost(PostHandler handler) {\r\n\t\t\r\n\t\treturn RouterFunctions.route(RequestPredicates.GET(&quot;/route/post/all&quot;), handler::findAll)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/post/id/{id}&quot;), handler::findById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/post/delete/{id}&quot;), handler::deleteById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.POST(&quot;/route/post/create&quot;), handler::create)\r\n\t\t\t\t\t.andRoute(RequestPredicates.PUT(&quot;/route/post/{id}/{content}&quot;), handler::edit);\r\n\t}\r\n}\r\n```\r\n\r\nEven the network is REST web service, But I use `WebClient` class of WebFlux.\r\n\r\n```lang-java\r\npublic void functionOnUserDocument() { \r\n\tclient.get().uri(&quot;/route/user/all&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMapMany(response -&gt; response.bodyToFlux(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/id/{id}&quot;, &quot;0002&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;GET by Id : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/username/{username}&quot;, &quot;jina&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;Get by username : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\r\n\tclient.get().uri(&quot;/route/user/email/{email}&quot;, &quot;myson@college.ac.kr&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;Get By Email : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/login/{username}/{password}&quot;, &quot;julian&quot;, &quot;password&quot;).exchange()\r\n\t\t\t.map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;Login : &quot; + response.getReasonPhrase()));\r\n\t\r\n\tUser user = new User(&quot;0005&quot;, 4L, &quot;jane&quot;, &quot;password&quot;, &quot;aaa@bbb.com&quot;, &quot;누나&quot;, &quot;USER&quot;);\r\n\r\n\tclient.post().uri(&quot;/route/user/create&quot;).body(Mono.just(user), User.class).exchange() \r\n\t\t\t.map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;User Creation: &quot; + response.getReasonPhrase()));\r\n}\r\n```\r\n\r\n \r\nBecause I make the WebFlux security configuration, definitely some `WebClient` can not be executed and forbidden like below:\r\n\r\n```lang-none\r\nLogin : Unauthorized\r\nUser Creation: Forbidden\r\n```\r\n\r\nI do not use cURL. So what I want to know is what my `WebClient` methods are to be, where username and password have to be located and transferred to `WebClient` class.\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>I try to make Spring WebFlux security application with router and handler classes. First, below codes are the configuration codes of WebFlux security.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\npublic class BlogWebFluxSecurityConfig {\n    \n    @Bean\n    public MapReactiveUserDetailsService userDetailsService() {\n        \n        UserDetails userWebFlux = User.withUsername(&quot;joseph&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;).build();\n        return new MapReactiveUserDetailsService(userWebFlux);\n    }\n    \n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http\n        .authorizeExchange()\n        .pathMatchers(&quot;/route/user/all&quot;, &quot;/route/post/all&quot;).permitAll()\n        .pathMatchers(HttpMethod.GET, &quot;/route/user/**&quot;, &quot;/route/post/**&quot;).hasRole(&quot;USER&quot;)\n        .anyExchange().authenticated()\n        .and()\n        .httpBasic();\n        \n        return http.build();\n    } \n}\n</code></pre>\n<p>And the next codes are about the router class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFlux\npublic class BlogWebFluxEndpointRouter {\n\n    @Bean\n    public RouterFunction&lt;ServerResponse&gt; routesUser(UserHandler handler) {\n        \n        return RouterFunctions.route(RequestPredicates.GET(&quot;/route/user/all&quot;), handler::findAll)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/id/{id}&quot;), handler::findById)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/username/{username}&quot;), handler::findByUsername)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/email/{email}&quot;), handler::findByEmail)\n                    .andRoute(RequestPredicates.POST(&quot;/route/user/create&quot;), handler::register)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/login/{username}/{password}&quot;), handler::authenticate);\n    }\n    \n    @Bean\n    public RouterFunction&lt;ServerResponse&gt; routesPost(PostHandler handler) {\n        \n        return RouterFunctions.route(RequestPredicates.GET(&quot;/route/post/all&quot;), handler::findAll)\n                    .andRoute(RequestPredicates.GET(&quot;/route/post/id/{id}&quot;), handler::findById)\n                    .andRoute(RequestPredicates.GET(&quot;/route/post/delete/{id}&quot;), handler::deleteById)\n                    .andRoute(RequestPredicates.POST(&quot;/route/post/create&quot;), handler::create)\n                    .andRoute(RequestPredicates.PUT(&quot;/route/post/{id}/{content}&quot;), handler::edit);\n    }\n}\n</code></pre>\n<p>Even the network is REST web service, But I use <code>WebClient</code> class of WebFlux.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void functionOnUserDocument() { \n    client.get().uri(&quot;/route/user/all&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMapMany(response -&gt; response.bodyToFlux(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/id/{id}&quot;, &quot;0002&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;GET by Id : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/username/{username}&quot;, &quot;jina&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;Get by username : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n\n    client.get().uri(&quot;/route/user/email/{email}&quot;, &quot;myson@college.ac.kr&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;Get By Email : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/login/{username}/{password}&quot;, &quot;julian&quot;, &quot;password&quot;).exchange()\n            .map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;Login : &quot; + response.getReasonPhrase()));\n    \n    User user = new User(&quot;0005&quot;, 4L, &quot;jane&quot;, &quot;password&quot;, &quot;aaa@bbb.com&quot;, &quot;누나&quot;, &quot;USER&quot;);\n\n    client.post().uri(&quot;/route/user/create&quot;).body(Mono.just(user), User.class).exchange() \n            .map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;User Creation: &quot; + response.getReasonPhrase()));\n}\n</code></pre>\n<p>Because I make the WebFlux security configuration, definitely some <code>WebClient</code> can not be executed and forbidden like below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Login : Unauthorized\nUser Creation: Forbidden\n</code></pre>\n<p>I do not use cURL. So what I want to know is what my <code>WebClient</code> methods are to be, where username and password have to be located and transferred to <code>WebClient</code> class.</p>\n"},{"tags":["java","java-8","java-stream","iterable"],"comments":[{"owner":{"account_id":1961505,"reputation":15719,"user_id":1762944,"accept_rate":68,"display_name":"Afzaal Ahmad Zeeshan"},"score":2,"creation_date":1401362294,"post_id":23932061,"comment_id":36859146,"body_markdown":"If you can iterate, why not simly use a loop to check its condition or value or what so ever?","body":"If you can iterate, why not simly use a loop to check its condition or value or what so ever?"},{"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"score":34,"creation_date":1401362347,"post_id":23932061,"comment_id":36859175,"body_markdown":"@AfzaalAhmadZeeshan because streams are much better","body":"@AfzaalAhmadZeeshan because streams are much better"},{"owner":{"account_id":95715,"reputation":20966,"user_id":260511,"accept_rate":81,"display_name":"rayman"},"score":2,"creation_date":1401362367,"post_id":23932061,"comment_id":36859193,"body_markdown":"As I said, I need to do some maniuplations on that list (filters, mapping). I would like to use the new Java 8 JDK API - &gt; Stream. but Iterable isnot &quot;SteamAble&quot;","body":"As I said, I need to do some maniuplations on that list (filters, mapping). I would like to use the new Java 8 JDK API - &gt; Stream. but Iterable isnot &quot;SteamAble&quot;"},{"owner":{"account_id":156734,"reputation":26697,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":1,"creation_date":1529072104,"post_id":23932061,"comment_id":88756684,"body_markdown":"Seems weird that `myIterable.stream()` does not exist!","body":"Seems weird that <code>myIterable.stream()</code> does not exist!"},{"owner":{"account_id":10694047,"reputation":1,"user_id":7871899,"display_name":"Guillaume"},"score":0,"creation_date":1530300288,"post_id":23932061,"comment_id":89207043,"body_markdown":"In 2018 we also have Stream.of(iterable)","body":"In 2018 we also have Stream.of(iterable)"},{"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"score":14,"creation_date":1538669798,"post_id":23932061,"comment_id":92234308,"body_markdown":"@Guillaume: Yes, but `Stream.of(iterable)` produces `Stream&lt;Iterable&lt;Object&gt;&gt;`.","body":"@Guillaume: Yes, but <code>Stream.of(iterable)</code> produces <code>Stream&lt;Iterable&lt;Object&gt;&gt;</code>."}],"answers":[{"tags":[],"owner":{"account_id":1370027,"reputation":49110,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"down_vote_count":5,"up_vote_count":29,"is_accepted":false,"score":24,"last_activity_date":1423403639,"creation_date":1401362762,"answer_id":23932216,"question_id":23932061,"body_markdown":"You can easily create a `Stream` out of an `Iterable` or `Iterator`:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\r\n        return StreamSupport.stream(\r\n\t\t\tSpliterators.spliteratorUnknownSize(\r\n\t\t\t\titerable.iterator(),\r\n\t\t\t\tSpliterator.ORDERED\r\n\t\t\t),\r\n\t\t\tfalse\r\n\t\t);\r\n    }","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>You can easily create a <code>Stream</code> out of an <code>Iterable</code> or <code>Iterator</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\n    return StreamSupport.stream(\n        Spliterators.spliteratorUnknownSize(\n            iterable.iterator(),\n            Spliterator.ORDERED\n        ),\n        false\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":2,"up_vote_count":697,"is_accepted":true,"score":695,"last_activity_date":1538670206,"creation_date":1401376555,"answer_id":23936723,"question_id":23932061,"body_markdown":"There&#39;s a much better answer than using `spliteratorUnknownSize` directly, which is both easier and gets a better result.  `Iterable` has a `spliterator()` method, so you should just use that to get your spliterator.  In the worst case, it&#39;s the same code (the default implementation uses `spliteratorUnknownSize`), but in the more common case, where your `Iterable` is already a collection, you&#39;ll get a better spliterator, and therefore better stream performance (maybe even good parallelism).  It&#39;s also less code:\r\n\r\n    StreamSupport.stream(iterable.spliterator(), false)\r\n                 .filter(...)\r\n                 .moreStreamOps(...);\r\n\r\nAs you can see, getting a stream from an `Iterable` (see also [this question]( https://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods?rq=1)) is not very painful.\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>There's a much better answer than using <code>spliteratorUnknownSize</code> directly, which is both easier and gets a better result.  <code>Iterable</code> has a <code>spliterator()</code> method, so you should just use that to get your spliterator.  In the worst case, it's the same code (the default implementation uses <code>spliteratorUnknownSize</code>), but in the more common case, where your <code>Iterable</code> is already a collection, you'll get a better spliterator, and therefore better stream performance (maybe even good parallelism).  It's also less code:</p>\n\n<pre><code>StreamSupport.stream(iterable.spliterator(), false)\n             .filter(...)\n             .moreStreamOps(...);\n</code></pre>\n\n<p>As you can see, getting a stream from an <code>Iterable</code> (see also <a href=\"https://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods?rq=1\">this question</a>) is not very painful.</p>\n"},{"tags":[],"owner":{"account_id":1443877,"reputation":15264,"user_id":1363110,"display_name":"Shaggie"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1594496367,"creation_date":1446740305,"answer_id":33549645,"question_id":23932061,"body_markdown":"I would like to suggest using [JOOL](https://github.com/jOOQ/jOOL) library, it hides spliterator magic behind the `Seq.seq(iterable)` call and also provides a whole bunch of additional useful functionality.","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I would like to suggest using <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">JOOL</a> library, it hides spliterator magic behind the <code>Seq.seq(iterable)</code> call and also provides a whole bunch of additional useful functionality.</p>\n"},{"tags":[],"owner":{"account_id":1851947,"reputation":1465,"user_id":1678314,"display_name":"g-t"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1461234709,"creation_date":1461234709,"answer_id":36766889,"question_id":23932061,"body_markdown":"I&#39;ve created this class:\r\n\r\n    public class Streams {\r\n        /**\r\n         * Converts Iterable to stream\r\n         */\r\n        public static &lt;T&gt; Stream&lt;T&gt;  streamOf(final Iterable&lt;T&gt; iterable) {\r\n            return toStream(iterable, false);\r\n        }\r\n    \r\n        /**\r\n         * Converts Iterable to parallel stream\r\n         */\r\n        public static &lt;T&gt; Stream&lt;T&gt; parallelStreamOf(final Iterable&lt;T&gt; iterable) {\r\n            return toStream(iterable, true);\r\n        }\r\n    \r\n        private static &lt;T&gt; Stream&lt;T&gt; toStream(final Iterable&lt;T&gt; iterable, final boolean isParallel) {\r\n            return StreamSupport.stream(iterable.spliterator(), isParallel);\r\n        }\r\n    }\r\n\r\nI think it&#39;s perfectly readable because you don&#39;t have to think about spliterators and booleans (isParallel).","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I've created this class:</p>\n\n<pre><code>public class Streams {\n    /**\n     * Converts Iterable to stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt;  streamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, false);\n    }\n\n    /**\n     * Converts Iterable to parallel stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt; parallelStreamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, true);\n    }\n\n    private static &lt;T&gt; Stream&lt;T&gt; toStream(final Iterable&lt;T&gt; iterable, final boolean isParallel) {\n        return StreamSupport.stream(iterable.spliterator(), isParallel);\n    }\n}\n</code></pre>\n\n<p>I think it's perfectly readable because you don't have to think about spliterators and booleans (isParallel).</p>\n"},{"tags":[],"owner":{"account_id":4243811,"reputation":4011,"user_id":3473046,"accept_rate":20,"display_name":"num&#233;ro6"},"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1484557878,"creation_date":1484557878,"answer_id":41672801,"question_id":23932061,"body_markdown":"If you can use Guava library, since version 21, you can use\r\n\r\n    Streams.stream(iterable)","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>If you can use Guava library, since version 21, you can use</p>\n\n<pre><code>Streams.stream(iterable)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1502274465,"creation_date":1491823912,"answer_id":43322051,"question_id":23932061,"body_markdown":"A very simple work-around for this issue is to create a `Streamable&lt;T&gt;` interface extending `Iterable&lt;T&gt;` that holds a `default &lt;T&gt; stream()` method.\r\n\r\n    interface Streamable&lt;T&gt; extends Iterable&lt;T&gt; {\r\n        default Stream&lt;T&gt; stream() {\r\n            return StreamSupport.stream(spliterator(), false);\r\n        }\r\n    }\r\n\r\nNow any of your `Iterable&lt;T&gt;`s can be trivially made streamable just by declaring them `implements Streamable&lt;T&gt;` instead of `Iterable&lt;T&gt;`.\r\n\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>A very simple work-around for this issue is to create a <code>Streamable&lt;T&gt;</code> interface extending <code>Iterable&lt;T&gt;</code> that holds a <code>default &lt;T&gt; stream()</code> method.</p>\n\n<pre><code>interface Streamable&lt;T&gt; extends Iterable&lt;T&gt; {\n    default Stream&lt;T&gt; stream() {\n        return StreamSupport.stream(spliterator(), false);\n    }\n}\n</code></pre>\n\n<p>Now any of your <code>Iterable&lt;T&gt;</code>s can be trivially made streamable just by declaring them <code>implements Streamable&lt;T&gt;</code> instead of <code>Iterable&lt;T&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501003853,"creation_date":1501003853,"answer_id":45310076,"question_id":23932061,"body_markdown":"If you happen to use Vavr(formerly known as Javaslang), this can be as easy as:\r\n\r\n    Iterable i = //...\r\n    Stream.ofAll(i);","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>If you happen to use Vavr(formerly known as Javaslang), this can be as easy as:</p>\n\n<pre><code>Iterable i = //...\nStream.ofAll(i);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":476761,"reputation":24593,"user_id":887836,"accept_rate":96,"display_name":"Alexander Oh"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1509710993,"creation_date":1509710574,"answer_id":47095341,"question_id":23932061,"body_markdown":"So as another answer mentioned Guava has support for this by using:\r\n\r\n    Streams.stream(iterable);\r\n\r\nI want to highlight that the implementation does something slightly different than other answers suggested. If the `Iterable` is of type `Collection` they cast it.\r\n\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\r\n      return (iterable instanceof Collection)\r\n        ? ((Collection&lt;T&gt;) iterable).stream()\r\n        : StreamSupport.stream(iterable.spliterator(), false);\r\n    }\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterator&lt;T&gt; iterator) {\r\n      return StreamSupport.stream(\r\n        Spliterators.spliteratorUnknownSize(iterator, 0),\r\n        false\r\n      );\r\n    }\r\n\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>So as another answer mentioned Guava has support for this by using:</p>\n\n<pre><code>Streams.stream(iterable);\n</code></pre>\n\n<p>I want to highlight that the implementation does something slightly different than other answers suggested. If the <code>Iterable</code> is of type <code>Collection</code> they cast it.</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\n  return (iterable instanceof Collection)\n    ? ((Collection&lt;T&gt;) iterable).stream()\n    : StreamSupport.stream(iterable.spliterator(), false);\n}\n\npublic static &lt;T&gt; Stream&lt;T&gt; stream(Iterator&lt;T&gt; iterator) {\n  return StreamSupport.stream(\n    Spliterators.spliteratorUnknownSize(iterator, 0),\n    false\n  );\n}\n</code></pre>\n"}],"owner":{"account_id":95715,"reputation":20966,"user_id":260511,"accept_rate":81,"display_name":"rayman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158898,"favorite_count":0,"down_vote_count":0,"up_vote_count":510,"accepted_answer_id":23936723,"answer_count":8,"score":510,"last_activity_date":1679442482,"creation_date":1401362188,"question_id":23932061,"body_markdown":"I have an interface which returns `java.lang.Iterable&lt;T&gt;`.\r\n\r\nI would like to manipulate that result using the Java 8 Stream API.\r\n\r\nHowever Iterable can&#39;t &quot;stream&quot;.\r\n\r\nAny idea how to use the Iterable as a Stream without converting it to List?\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I have an interface which returns <code>java.lang.Iterable&lt;T&gt;</code>.</p>\n\n<p>I would like to manipulate that result using the Java 8 Stream API.</p>\n\n<p>However Iterable can't \"stream\".</p>\n\n<p>Any idea how to use the Iterable as a Stream without converting it to List?</p>\n"},{"tags":["python","java","android","sockets","p2p"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1678142272,"post_id":75656454,"comment_id":133473069,"body_markdown":"When you connect without internet it&#39;s called a LAN. https://www.techtarget.com/searchnetworking/feature/Whats-the-difference-between-internet-and-Ethernet","body":"When you connect without internet it&#39;s called a LAN. <a href=\"https://www.techtarget.com/searchnetworking/feature/Whats-the-difference-between-internet-and-Ethernet\" rel=\"nofollow noreferrer\">techtarget.com/searchnetworking/feature/&hellip;</a>"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1678142507,"post_id":75656454,"comment_id":133473104,"body_markdown":"Alternately, for a homebrew (and also still some industrial projects) serial communication might be an option.    https://www.seeedstudio.com/blog/2019/12/06/what-is-rs485-and-its-difference-between-rs232/ (And for even more homebrew, I&#39;ve also seen people connect op-amps directly to digital output to make their own serial bus. All depends on your requirements.)","body":"Alternately, for a homebrew (and also still some industrial projects) serial communication might be an option.    <a href=\"https://www.seeedstudio.com/blog/2019/12/06/what-is-rs485-and-its-difference-between-rs232/\" rel=\"nofollow noreferrer\">seeedstudio.com/blog/2019/12/06/&hellip;</a> (And for even more homebrew, I&#39;ve also seen people connect op-amps directly to digital output to make their own serial bus. All depends on your requirements.)"}],"owner":{"account_id":27951702,"reputation":1,"user_id":21345374,"display_name":"Amir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679442441,"creation_date":1678141985,"question_id":75656454,"body_markdown":"I currently have a python application running on a raspberry pi, that has a tablet connected running an android application. Neither of them have an internet connection, and I was wondering if I can use sockets to allow both of them to communicate (P2P) and how to go about it. Im currently trying to have the java program send out two message then wait for a variable number of responses from the python program.\r\n\r\nI haven&#39;t found any useful guides online about how to set up communication using the tablet as a USB accessory. This is a very small project, the messages being transferred would be just a line or two of text so if there are any other alternatives that would be easier would also be greatly beneficial.","title":"How can I set up communication between an android app and a python program?","body":"<p>I currently have a python application running on a raspberry pi, that has a tablet connected running an android application. Neither of them have an internet connection, and I was wondering if I can use sockets to allow both of them to communicate (P2P) and how to go about it. Im currently trying to have the java program send out two message then wait for a variable number of responses from the python program.</p>\n<p>I haven't found any useful guides online about how to set up communication using the tablet as a USB accessory. This is a very small project, the messages being transferred would be just a line or two of text so if there are any other alternatives that would be easier would also be greatly beneficial.</p>\n"},{"tags":["java","spring","lazy-initialization"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1592809089,"post_id":62508723,"comment_id":110545937,"body_markdown":"Annotate the method argument in the configuration with `@Lazy` not the `@Bean` method.","body":"Annotate the method argument in the configuration with <code>@Lazy</code> not the <code>@Bean</code> method."}],"answers":[{"tags":[],"owner":{"account_id":4103696,"reputation":129,"user_id":3368460,"display_name":"Getodac"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679441946,"creation_date":1592809505,"answer_id":62509073,"question_id":62508723,"body_markdown":"You must annotate your `PurchaseService` with `@Lazy` in both places - where you create them and when you autowire them. \r\n\r\nSee the [A Quick Guide to the Spring @Lazy Annotation](https://www.baeldung.com/spring-lazy-annotation) post, in the [2.2. With @Autowired](https://www.baeldung.com/spring-lazy-annotation#2-with-autowired) section exists the comment: \r\n\r\n&gt; **Note, that the @Lazy is mandatory in both places.**","title":"Spring lazy initialization in configuration with constructor","body":"<p>You must annotate your <code>PurchaseService</code> with <code>@Lazy</code> in both places - where you create them and when you autowire them.</p>\n<p>See the <a href=\"https://www.baeldung.com/spring-lazy-annotation\" rel=\"nofollow noreferrer\">A Quick Guide to the Spring @Lazy Annotation</a> post, in the <a href=\"https://www.baeldung.com/spring-lazy-annotation#2-with-autowired\" rel=\"nofollow noreferrer\">2.2. With @Autowired</a> section exists the comment:</p>\n<blockquote>\n<p><strong>Note, that the @Lazy is mandatory in both places.</strong></p>\n</blockquote>\n"}],"owner":{"account_id":4757124,"reputation":9055,"user_id":3845604,"accept_rate":95,"display_name":"Praveen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679441946,"creation_date":1592807977,"question_id":62508723,"body_markdown":"I have a component\r\n\r\n    @Component\r\n    public class ExpenseCalculator {\r\n    \t@Autowired\r\n    \tprivate TaxService taxService;\r\n    \r\n    \t@Autowired\r\n    \tprivate EmployeeService employeeService;\r\n    \r\n    \t@Autowired\r\n    \t@Lazy\r\n    \tprivate PurchaseService purchaseService;\r\n    }\r\n\r\nHere `PurchaseService` is initialized only when any part of the code that uses `purchaseService` is invoked (?).&lt;br&gt;\r\n\r\nNow I have to move`ExpenseCalculator` a configuration class (it doesn&#39;t have `@Component` annotation)\r\n\r\n    @Configuration\r\n    public class ExpenseConfig {\r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic ExpenseCalculator getExpenseCalculator(\r\n    \t\tTaxService taxService, \r\n    \t\tEmployeeService employeeService,\r\n    \t\tPurchaseService purchaseService\r\n    \t) {\r\n    \t\treturn new ExpenseCalculator(taxService, employeeService, purchaseService);\r\n    \t}\r\n    } \r\n\r\nBut `purchaseService` is no more a `@Lazy` component when ever `ExpenseCalculator` is initialized, `purchaseService` get initialized.\r\n\r\nIs there any way to get lazy initialization of `purchaseService` using `configuration`?","title":"Spring lazy initialization in configuration with constructor","body":"<p>I have a component</p>\n<pre><code>@Component\npublic class ExpenseCalculator {\n    @Autowired\n    private TaxService taxService;\n\n    @Autowired\n    private EmployeeService employeeService;\n\n    @Autowired\n    @Lazy\n    private PurchaseService purchaseService;\n}\n</code></pre>\n<p>Here <code>PurchaseService</code> is initialized only when any part of the code that uses <code>purchaseService</code> is invoked (?).<br></p>\n<p>Now I have to move<code>ExpenseCalculator</code> a configuration class (it doesn't have <code>@Component</code> annotation)</p>\n<pre><code>@Configuration\npublic class ExpenseConfig {\n    @Bean\n    @Lazy\n    public ExpenseCalculator getExpenseCalculator(\n        TaxService taxService, \n        EmployeeService employeeService,\n        PurchaseService purchaseService\n    ) {\n        return new ExpenseCalculator(taxService, employeeService, purchaseService);\n    }\n} \n</code></pre>\n<p>But <code>purchaseService</code> is no more a <code>@Lazy</code> component when ever <code>ExpenseCalculator</code> is initialized, <code>purchaseService</code> get initialized.</p>\n<p>Is there any way to get lazy initialization of <code>purchaseService</code> using <code>configuration</code>?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1679186689,"post_id":75776068,"comment_id":133676524,"body_markdown":"you can start by reading the spring security documentation and implement the handling of JWTs in accordance with the official documentation instead of implementing something custom from possibly some random bad blogpost. Spring has had built in support for JWTs since 2017 https://docs.spring.io/spring-security/reference/5.8/servlet/oauth2/resource-server/index.html its impossible for us to help you if havn&#39;t followed the official docs. So start by reading them","body":"you can start by reading the spring security documentation and implement the handling of JWTs in accordance with the official documentation instead of implementing something custom from possibly some random bad blogpost. Spring has had built in support for JWTs since 2017 <a href=\"https://docs.spring.io/spring-security/reference/5.8/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/servlet/oauth2/&zwnj;&#8203;&hellip;</a> its impossible for us to help you if havn&#39;t followed the official docs. So start by reading them"},{"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679707424,"post_id":75776068,"comment_id":133774571,"body_markdown":"Hi @Toerktumlare if you need Spring Security in one of your future Spring Boot projects, I can confirm that Andrey&#39;s `AbstractHttpConfigurer`-based solution below works for me perfectly, he&#39;s been a true **life saver**!","body":"Hi @Toerktumlare if you need Spring Security in one of your future Spring Boot projects, I can confirm that Andrey&#39;s <code>AbstractHttpConfigurer</code>-based solution below works for me perfectly, he&#39;s been a true <b>life saver</b>!"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1679710805,"post_id":75776068,"comment_id":133774816,"body_markdown":"both of your solutions are overly complex and not following any of the rfc&#39;s for security. Custom security is bad practice, and just because something &quot;works&quot; does not mean it is correct. Good luck with your custom security solution.","body":"both of your solutions are overly complex and not following any of the rfc&#39;s for security. Custom security is bad practice, and just because something &quot;works&quot; does not mean it is correct. Good luck with your custom security solution."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679441567,"creation_date":1679325392,"answer_id":75792090,"question_id":75776068,"body_markdown":"We are doing something like:\r\n\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n    .userDetailsService(realmService)\r\n    .passwordEncoder(passwordEncoder);\r\n\r\n...\r\n\r\n  httpSecurity.addFilter(apiAuthenticationFilter(ctx -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\r\n\r\n...\r\n\r\n}\r\n\r\npublic ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManagerResolver&lt;?&gt; authenticationManagerResolver) {\r\n  return new ApiAuthenticationFilter(\r\n    authenticationManagerResolver, \r\n    tokenService, \r\n    objectMapper, \r\n    authenticationFactory\r\n  );\r\n}\r\n```\r\n\r\nSince instance of `AuthenticationManager` is required in runtime only, that is enough to pass supplier to filter during configuration phase\r\n\r\n\r\n----------\r\n\r\nUPD.\r\n\r\nWell, now it is clear why you need a reference to `AuthenticationManager`.\r\n\r\n\r\n**First option**: \r\n\r\nIn case of `ApiAuthorizationFilter` you are actually do not need to extend `BasicAuthenticationFilter` - just let `spring-security` to do it&#39;s job and enable basic authentication via `httpSecurity.httpBasic()`. For `ApiAuthenticationFilter` it is possible to pass `AuthenticationManagerResolver` or `Supplier&lt;AuthenticationManager&gt;` to it:\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n    .userDetailsService(realmService)\r\n    .passwordEncoder(passwordEncoder);\r\n\r\n...\r\n\r\n  httpSecurity.addFilter(apiAuthenticationFilter(() -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\r\n\r\n...\r\n\r\n}\r\n\r\npublic ApiAuthenticationFilter apiAuthenticationFilter(Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier) {\r\n  return new ApiAuthenticationFilter(\r\n    authenticationManagerSupplier, \r\n    tokenService, \r\n    objectMapper, \r\n    authenticationFactory\r\n  );\r\n}\r\n\r\n```\r\n\r\n```java\r\npublic class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    private AuthenticationManager authenticationManager;\r\n    private Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier;\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    public ApiAuthenticationFilter(\r\n            Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier,\r\n            TokenService tokenService,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory) {\r\n\r\n        super();\r\n        this.tokenService = tokenService;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n\r\n        init();\r\n\r\n    }\r\n\r\n    private void init() {\r\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\r\n    }\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response) throws AuthenticationException {\r\n\r\n        try {\r\n\r\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\r\n\r\n            Authentication authentication = authenticationFactory\r\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\r\n\r\n            // perform authentication and -- if successful -- populate granted authorities\r\n            return getAuthenticationManager().authenticate(authentication);\r\n\r\n        } catch (IOException e) {\r\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(\r\n            HttpServletRequest  request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain,\r\n            Authentication authentication) {\r\n\r\n        // called if-and-only-if the attemptAuthentication method above is successful\r\n\r\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\r\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\r\n        response.setStatus(HttpServletResponse.SC_OK);\r\n        try {\r\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\r\n        } catch (IOException e) {\r\n            throw new ApiServiceException(e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n\tprotected AuthenticationManager getAuthenticationManager() {\r\n\t\tif (this.authenticationManager == null) {\r\n            this.authenticationManager = authenticationManagerSupplier.get();\r\n        }\r\n        return this.authenticationManager;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**Second option**\r\n\r\nWrite your own implementation of `AbstractHttpConfigurer`, should look like:\r\n\r\n```java\r\npublic class ApiSecurityBuilderConfigurer&lt;H extends HttpSecurityBuilder&lt;H&gt;&gt;\r\n        extends AbstractHttpConfigurer&lt;ApiSecurityBuilderConfigurer&lt;H&gt;, H&gt; {\r\n\r\n    private TokenService tokenService;\r\n\r\n    private ObjectMapper objectMapper;\r\n\r\n    private ApiAuthenticationFactory apiAuthenticationFactory;\r\n    \r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; tokenService(TokenService tokenService) {\r\n        this.tokenService = tokenService;\r\n        return this;\r\n    }\r\n\r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; objectMapper(ObjectMapper objectMapper) {\r\n        this.objectMapper = objectMapper;\r\n        return this;\r\n    }\r\n\r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; apiAuthenticationFactory(ApiAuthenticationFactory ApiAuthenticationFactory) {\r\n        this.ApiAuthenticationFactory = ApiAuthenticationFactory;\r\n        return this;\r\n    }\r\n\r\n    @Override\r\n    public void configure(H builder) throws Exception {\r\n        AuthenticationManager authenticationManager = builder.getSharedObject(AuthenticationManager.class);\r\n        builder.addFilter(apiAuthenticationFilter(authenticationManager));\r\n    }\r\n\r\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\r\n        return new ApiAuthenticationFilter(authenticationManager, tokenService, objectMapper, authenticationFactory);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  httpSecurity.apply(new ApiSecurityBuilderConfigurer())\r\n    .tokenService(tokenService)\r\n    .objectMapper(objectMapper)\r\n    .apiAuthenticationFactory(apiAuthenticationFactory);\r\n\r\n...\r\n\r\n}\r\n```","title":"Spring Security 5+: Obtaining an AuthenticationManager without having to build HttpSecurity","body":"<p>We are doing something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n    .userDetailsService(realmService)\n    .passwordEncoder(passwordEncoder);\n\n...\n\n  httpSecurity.addFilter(apiAuthenticationFilter(ctx -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\n\n...\n\n}\n\npublic ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManagerResolver&lt;?&gt; authenticationManagerResolver) {\n  return new ApiAuthenticationFilter(\n    authenticationManagerResolver, \n    tokenService, \n    objectMapper, \n    authenticationFactory\n  );\n}\n</code></pre>\n<p>Since instance of <code>AuthenticationManager</code> is required in runtime only, that is enough to pass supplier to filter during configuration phase</p>\n<hr />\n<p>UPD.</p>\n<p>Well, now it is clear why you need a reference to <code>AuthenticationManager</code>.</p>\n<p><strong>First option</strong>:</p>\n<p>In case of <code>ApiAuthorizationFilter</code> you are actually do not need to extend <code>BasicAuthenticationFilter</code> - just let <code>spring-security</code> to do it's job and enable basic authentication via <code>httpSecurity.httpBasic()</code>. For <code>ApiAuthenticationFilter</code> it is possible to pass <code>AuthenticationManagerResolver</code> or <code>Supplier&lt;AuthenticationManager&gt;</code> to it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n    .userDetailsService(realmService)\n    .passwordEncoder(passwordEncoder);\n\n...\n\n  httpSecurity.addFilter(apiAuthenticationFilter(() -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\n\n...\n\n}\n\npublic ApiAuthenticationFilter apiAuthenticationFilter(Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier) {\n  return new ApiAuthenticationFilter(\n    authenticationManagerSupplier, \n    tokenService, \n    objectMapper, \n    authenticationFactory\n  );\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private AuthenticationManager authenticationManager;\n    private Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier;\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    public ApiAuthenticationFilter(\n            Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier,\n            TokenService tokenService,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory) {\n\n        super();\n        this.tokenService = tokenService;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n\n        init();\n\n    }\n\n    private void init() {\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(\n            HttpServletRequest request,\n            HttpServletResponse response) throws AuthenticationException {\n\n        try {\n\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\n\n            Authentication authentication = authenticationFactory\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\n\n            // perform authentication and -- if successful -- populate granted authorities\n            return getAuthenticationManager().authenticate(authentication);\n\n        } catch (IOException e) {\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\n        }\n\n    }\n\n    @Override\n    protected void successfulAuthentication(\n            HttpServletRequest  request,\n            HttpServletResponse response,\n            FilterChain filterChain,\n            Authentication authentication) {\n\n        // called if-and-only-if the attemptAuthentication method above is successful\n\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\n        response.setStatus(HttpServletResponse.SC_OK);\n        try {\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\n        } catch (IOException e) {\n            throw new ApiServiceException(e);\n        }\n\n    }\n\n    @Override\n    protected AuthenticationManager getAuthenticationManager() {\n        if (this.authenticationManager == null) {\n            this.authenticationManager = authenticationManagerSupplier.get();\n        }\n        return this.authenticationManager;\n    }\n\n}\n</code></pre>\n<p><strong>Second option</strong></p>\n<p>Write your own implementation of <code>AbstractHttpConfigurer</code>, should look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiSecurityBuilderConfigurer&lt;H extends HttpSecurityBuilder&lt;H&gt;&gt;\n        extends AbstractHttpConfigurer&lt;ApiSecurityBuilderConfigurer&lt;H&gt;, H&gt; {\n\n    private TokenService tokenService;\n\n    private ObjectMapper objectMapper;\n\n    private ApiAuthenticationFactory apiAuthenticationFactory;\n    \n    public ApiSecurityBuilderConfigurer&lt;H&gt; tokenService(TokenService tokenService) {\n        this.tokenService = tokenService;\n        return this;\n    }\n\n    public ApiSecurityBuilderConfigurer&lt;H&gt; objectMapper(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n        return this;\n    }\n\n    public ApiSecurityBuilderConfigurer&lt;H&gt; apiAuthenticationFactory(ApiAuthenticationFactory ApiAuthenticationFactory) {\n        this.ApiAuthenticationFactory = ApiAuthenticationFactory;\n        return this;\n    }\n\n    @Override\n    public void configure(H builder) throws Exception {\n        AuthenticationManager authenticationManager = builder.getSharedObject(AuthenticationManager.class);\n        builder.addFilter(apiAuthenticationFilter(authenticationManager));\n    }\n\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\n        return new ApiAuthenticationFilter(authenticationManager, tokenService, objectMapper, authenticationFactory);\n    }\n\n}\n</code></pre>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  httpSecurity.apply(new ApiSecurityBuilderConfigurer())\n    .tokenService(tokenService)\n    .objectMapper(objectMapper)\n    .apiAuthenticationFactory(apiAuthenticationFactory);\n\n...\n\n}\n</code></pre>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":711,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":75792090,"answer_count":1,"score":6,"last_activity_date":1679441567,"creation_date":1679144583,"question_id":75776068,"body_markdown":"Java 11 and Spring Security 2.7.x here. I am trying to upgrade my config _away_ from the (deprecated) `WebSecurityConfigurerAdapter`-based implementation to one using `SecurityFilterChain`.\r\n\r\nWhat&#39;s important about my implementation is that I have the ability to define and configure/wire up my own:\r\n\r\n- Authentication Filter (`UsernamePasswordAuthenticationFilter` impl)\r\n- Authorization Filter (`BasicAuthenticationFilter` impl)\r\n- Custom authentication error handler (`AuthenticationEntryPoint` impl)\r\n- Custom authorization error handler (`AccessDeniedHandler` impl)\r\n\r\nHere&#39;s my current setup based on reading a bunch of blogs and articles:\r\n```\r\npublic class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    private AuthenticationManager authenticationManager;\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    public ApiAuthenticationFilter(\r\n            AuthenticationManager authenticationManager,\r\n            TokenService tokenService,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory) {\r\n\r\n        super(authenticationManager);\r\n        this.tokenService = tokenService;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n\r\n        init();\r\n\r\n    }\r\n\r\n    private void init() {\r\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\r\n    }\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response) throws AuthenticationException {\r\n\r\n        try {\r\n\r\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\r\n\r\n            Authentication authentication = authenticationFactory\r\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\r\n\r\n            // perform authentication and -- if successful -- populate granted authorities\r\n            return authenticationManager.authenticate(authentication);\r\n\r\n        } catch (IOException e) {\r\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(\r\n            HttpServletRequest  request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain,\r\n            Authentication authentication) {\r\n\r\n        // called if-and-only-if the attemptAuthentication method above is successful\r\n\r\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\r\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\r\n        response.setStatus(HttpServletResponse.SC_OK);\r\n        try {\r\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\r\n        } catch (IOException e) {\r\n            throw new ApiServiceException(e);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\npublic class ApiAuthorizationFilter extends BasicAuthenticationFilter implements SecurityConstants {\r\n\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private AuthenticationService authenticationService;\r\n    private String jwtSecret;\r\n\r\n    public ApiAuthorizationFilter(\r\n            AuthenticationManager authenticationManager,\r\n            ApiAuthenticationFactory authenticationFactory,\r\n            AuthenticationService authenticationService,\r\n            @Value(&quot;${myapp.jwt-secret}&quot;) String jwtSecret) {\r\n\r\n        super(authenticationManager);\r\n        this.authenticationFactory = authenticationFactory;\r\n        this.authenticationService = authenticationService;\r\n        this.jwtSecret = jwtSecret;\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain) throws IOException, ServletException {\r\n\r\n        String authHeader = request.getHeader(AUTHORIZATION_HEADER);\r\n\r\n        // allow the request through if no valid auth header is set; spring security\r\n        // will throw access denied exceptions downstream if the request is for an\r\n        // authenticated url\r\n        if (authHeader == null || !authHeader.startsWith(BEARER_TOKEN_PREFIX)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        // otherwise an auth header was specified so lets take a look at it and grant access based\r\n        // on what we find\r\n        try {\r\n\r\n            DecodedJWT decodedJWT = JwtUtils.verifyToken(authHeader.replace(BEARER_TOKEN_PREFIX, &quot;&quot;), jwtSecret);\r\n            String subject = decodedJWT.getSubject();\r\n            ApiAuthentication authentication = authenticationFactory.createAuthentication(subject, null);\r\n\r\n            // TODO: I believe I need to look up granted authorities here and set them\r\n\r\n            authenticationService.setCurrentAuthentication(authentication);\r\n            filterChain.doFilter(request, response);\r\n\r\n        } catch (JWTVerificationException jwtVerificationEx) {\r\n            throw new AccessDeniedException(&quot;access denied&quot;, jwtVerificationEx);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class SecurityConfigV2 {\r\n\r\n    private boolean securityDebug;\r\n\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    private AuthenticationService authenticationService;\r\n    private String jwtSecret;\r\n    private ApiUnauthorizedHandler unauthorizedHandler;\r\n    private ApiSignInFailureHandler signInFailureHandler;\r\n\r\n    private BCryptPasswordEncoder passwordEncoder;\r\n    private RealmService realmService;\r\n\r\n    @Autowired\r\n    public SecurityConfigV2(\r\n            @Value(&quot;${spring.security.debug:false}&quot;) boolean securityDebug,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory,\r\n            TokenService tokenService,\r\n            AuthenticationService authenticationService,\r\n            @Value(&quot;${myapp.authentication.jwt-secret}&quot;) String jwtSecret,\r\n            ApiUnauthorizedHandler unauthorizedHandler,\r\n            ApiSignInFailureHandler signInFailureHandler,\r\n            BCryptPasswordEncoder passwordEncoder,\r\n            RealmService realmService) {\r\n        this.securityDebug = securityDebug;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n        this.tokenService = tokenService;\r\n        this.authenticationService = authenticationService;\r\n        this.jwtSecret = jwtSecret;\r\n        this.unauthorizedHandler = unauthorizedHandler;\r\n        this.signInFailureHandler = signInFailureHandler;\r\n        this.passwordEncoder = passwordEncoder;\r\n        this.realmService = realmService;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n        // build authentication manager\r\n        AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n            .userDetailsService(realmService)\r\n            .passwordEncoder(passwordEncoder)\r\n            .and()\r\n            .build();   // &lt;-- calling it once up here, to get an AuthenticationManager instance\r\n\r\n        // enable CSRF\r\n        // TODO: enable once you are ready to provide &#39;CSRF tokens&#39;\r\n        //  https://stackoverflow.com/a/75646727/5235665\r\n        httpSecurity.csrf().disable();\r\n\r\n        // add CORS filter\r\n        httpSecurity.cors();\r\n\r\n        // add anonoymous/permitted paths (that is: what paths are allowed to bypass authentication)\r\n        httpSecurity.authorizeRequests()\r\n            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\r\n            .antMatchers(HttpMethod.POST, &quot;/v*/tokens/refresh&quot;).permitAll();\r\n\r\n        // restrict all other paths and set them to authenticated\r\n        httpSecurity.authorizeRequests().anyRequest().authenticated();\r\n\r\n        // add authn + authz filters -- using AuthenticationManager instance here\r\n        httpSecurity.addFilter(apiAuthenticationFilter(authenticationManager));\r\n        httpSecurity.addFilter(apiAuthorizationFilter(authenticationManager));\r\n\r\n        // configure exception-handling for authn and authz\r\n        httpSecurity.exceptionHandling().accessDeniedHandler(unauthorizedHandler);\r\n        httpSecurity.exceptionHandling().authenticationEntryPoint(signInFailureHandler);\r\n\r\n        // configure stateless http sessions (appropriate for RESTful web services)\r\n        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        // and building it a 2nd time here, to complete the filter\r\n        // but I believe this is what causes the error\r\n        return httpSecurity.build();\r\n    }\r\n\r\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\r\n\r\n        ApiAuthenticationFilter authenticationFilter = new ApiAuthenticationFilter(\r\n                authenticationManager, tokenService, objectMapper, authenticationFactory);\r\n        return authenticationFilter;\r\n\r\n    }\r\n\r\n    public ApiAuthorizationFilter apiAuthorizationFilter(AuthenticationManager authenticationManager) {\r\n\r\n        ApiAuthorizationFilter authorizationFilter = new ApiAuthorizationFilter(\r\n            authenticationManager,\r\n            authenticationFactory,\r\n            authenticationService,\r\n            jwtSecret);\r\n\r\n        return authorizationFilter;\r\n\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.debug(securityDebug)\r\n            .ignoring()\r\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/lib/**&quot;, &quot;/favicon.ico&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n\r\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\r\n        corsConfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n        corsConfiguration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\r\n\r\n        UrlBasedCorsConfigurationSource corsConfigurationSource = new UrlBasedCorsConfigurationSource();\r\n        corsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\r\n\r\n        return corsConfigurationSource;\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen I start up my app I am getting:\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name \r\n&#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: \r\nUnsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is \r\norg.springframework.beans.factory.BeanCreationException: \r\nError creating bean with name &#39;filterChain&#39; defined \r\nin class path resource [myapp/ws/security/v2/SecurityConfigV2.class]: \r\nBean instantiation via factory method failed; nested exception is \r\norg.springframework.beans.BeanInstantiationException: \r\nFailed to instantiate [org.springframework.security.web.SecurityFilterChain]: \r\nFactory method &#39;filterChain&#39; threw exception; \r\nnested exception is org.springframework.security.config.annotation.AlreadyBuiltException: \r\nThis object has already been built\r\n```\r\n\r\nThe Google Gods say this is because I&#39;m calling `httpSecurity.build()` **twice** which is not allowed. However:\r\n\r\n- My authn and authz filter require an `AuthenticationManager` instance; and\r\n- It seems that the only way (please tell me if I&#39;m wrong!) to get an `AuthenticationManager` instance is to run `httpSecurity.build()`; **but**\r\n- I need the authn/authz filter _before_ I can call `httpSecurity.build()`\r\n\r\nCan anyone help nudge me across the finish line here? Thanks for any and all help!","title":"Spring Security 5+: Obtaining an AuthenticationManager without having to build HttpSecurity","body":"<p>Java 11 and Spring Security 2.7.x here. I am trying to upgrade my config <em>away</em> from the (deprecated) <code>WebSecurityConfigurerAdapter</code>-based implementation to one using <code>SecurityFilterChain</code>.</p>\n<p>What's important about my implementation is that I have the ability to define and configure/wire up my own:</p>\n<ul>\n<li>Authentication Filter (<code>UsernamePasswordAuthenticationFilter</code> impl)</li>\n<li>Authorization Filter (<code>BasicAuthenticationFilter</code> impl)</li>\n<li>Custom authentication error handler (<code>AuthenticationEntryPoint</code> impl)</li>\n<li>Custom authorization error handler (<code>AccessDeniedHandler</code> impl)</li>\n</ul>\n<p>Here's my current setup based on reading a bunch of blogs and articles:</p>\n<pre><code>public class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private AuthenticationManager authenticationManager;\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    public ApiAuthenticationFilter(\n            AuthenticationManager authenticationManager,\n            TokenService tokenService,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory) {\n\n        super(authenticationManager);\n        this.tokenService = tokenService;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n\n        init();\n\n    }\n\n    private void init() {\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(\n            HttpServletRequest request,\n            HttpServletResponse response) throws AuthenticationException {\n\n        try {\n\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\n\n            Authentication authentication = authenticationFactory\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\n\n            // perform authentication and -- if successful -- populate granted authorities\n            return authenticationManager.authenticate(authentication);\n\n        } catch (IOException e) {\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\n        }\n\n    }\n\n    @Override\n    protected void successfulAuthentication(\n            HttpServletRequest  request,\n            HttpServletResponse response,\n            FilterChain filterChain,\n            Authentication authentication) {\n\n        // called if-and-only-if the attemptAuthentication method above is successful\n\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\n        response.setStatus(HttpServletResponse.SC_OK);\n        try {\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\n        } catch (IOException e) {\n            throw new ApiServiceException(e);\n        }\n\n    }\n\n}\n\npublic class ApiAuthorizationFilter extends BasicAuthenticationFilter implements SecurityConstants {\n\n    private ApiAuthenticationFactory authenticationFactory;\n    private AuthenticationService authenticationService;\n    private String jwtSecret;\n\n    public ApiAuthorizationFilter(\n            AuthenticationManager authenticationManager,\n            ApiAuthenticationFactory authenticationFactory,\n            AuthenticationService authenticationService,\n            @Value(&quot;${myapp.jwt-secret}&quot;) String jwtSecret) {\n\n        super(authenticationManager);\n        this.authenticationFactory = authenticationFactory;\n        this.authenticationService = authenticationService;\n        this.jwtSecret = jwtSecret;\n\n    }\n\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain) throws IOException, ServletException {\n\n        String authHeader = request.getHeader(AUTHORIZATION_HEADER);\n\n        // allow the request through if no valid auth header is set; spring security\n        // will throw access denied exceptions downstream if the request is for an\n        // authenticated url\n        if (authHeader == null || !authHeader.startsWith(BEARER_TOKEN_PREFIX)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        // otherwise an auth header was specified so lets take a look at it and grant access based\n        // on what we find\n        try {\n\n            DecodedJWT decodedJWT = JwtUtils.verifyToken(authHeader.replace(BEARER_TOKEN_PREFIX, &quot;&quot;), jwtSecret);\n            String subject = decodedJWT.getSubject();\n            ApiAuthentication authentication = authenticationFactory.createAuthentication(subject, null);\n\n            // TODO: I believe I need to look up granted authorities here and set them\n\n            authenticationService.setCurrentAuthentication(authentication);\n            filterChain.doFilter(request, response);\n\n        } catch (JWTVerificationException jwtVerificationEx) {\n            throw new AccessDeniedException(&quot;access denied&quot;, jwtVerificationEx);\n        }\n\n    }\n\n}\n\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class SecurityConfigV2 {\n\n    private boolean securityDebug;\n\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    private AuthenticationService authenticationService;\n    private String jwtSecret;\n    private ApiUnauthorizedHandler unauthorizedHandler;\n    private ApiSignInFailureHandler signInFailureHandler;\n\n    private BCryptPasswordEncoder passwordEncoder;\n    private RealmService realmService;\n\n    @Autowired\n    public SecurityConfigV2(\n            @Value(&quot;${spring.security.debug:false}&quot;) boolean securityDebug,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory,\n            TokenService tokenService,\n            AuthenticationService authenticationService,\n            @Value(&quot;${myapp.authentication.jwt-secret}&quot;) String jwtSecret,\n            ApiUnauthorizedHandler unauthorizedHandler,\n            ApiSignInFailureHandler signInFailureHandler,\n            BCryptPasswordEncoder passwordEncoder,\n            RealmService realmService) {\n        this.securityDebug = securityDebug;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n        this.tokenService = tokenService;\n        this.authenticationService = authenticationService;\n        this.jwtSecret = jwtSecret;\n        this.unauthorizedHandler = unauthorizedHandler;\n        this.signInFailureHandler = signInFailureHandler;\n        this.passwordEncoder = passwordEncoder;\n        this.realmService = realmService;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n\n        // build authentication manager\n        AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n            .userDetailsService(realmService)\n            .passwordEncoder(passwordEncoder)\n            .and()\n            .build();   // &lt;-- calling it once up here, to get an AuthenticationManager instance\n\n        // enable CSRF\n        // TODO: enable once you are ready to provide 'CSRF tokens'\n        //  https://stackoverflow.com/a/75646727/5235665\n        httpSecurity.csrf().disable();\n\n        // add CORS filter\n        httpSecurity.cors();\n\n        // add anonoymous/permitted paths (that is: what paths are allowed to bypass authentication)\n        httpSecurity.authorizeRequests()\n            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\n            .antMatchers(HttpMethod.POST, &quot;/v*/tokens/refresh&quot;).permitAll();\n\n        // restrict all other paths and set them to authenticated\n        httpSecurity.authorizeRequests().anyRequest().authenticated();\n\n        // add authn + authz filters -- using AuthenticationManager instance here\n        httpSecurity.addFilter(apiAuthenticationFilter(authenticationManager));\n        httpSecurity.addFilter(apiAuthorizationFilter(authenticationManager));\n\n        // configure exception-handling for authn and authz\n        httpSecurity.exceptionHandling().accessDeniedHandler(unauthorizedHandler);\n        httpSecurity.exceptionHandling().authenticationEntryPoint(signInFailureHandler);\n\n        // configure stateless http sessions (appropriate for RESTful web services)\n        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        // and building it a 2nd time here, to complete the filter\n        // but I believe this is what causes the error\n        return httpSecurity.build();\n    }\n\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\n\n        ApiAuthenticationFilter authenticationFilter = new ApiAuthenticationFilter(\n                authenticationManager, tokenService, objectMapper, authenticationFactory);\n        return authenticationFilter;\n\n    }\n\n    public ApiAuthorizationFilter apiAuthorizationFilter(AuthenticationManager authenticationManager) {\n\n        ApiAuthorizationFilter authorizationFilter = new ApiAuthorizationFilter(\n            authenticationManager,\n            authenticationFactory,\n            authenticationService,\n            jwtSecret);\n\n        return authorizationFilter;\n\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.debug(securityDebug)\n            .ignoring()\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/lib/**&quot;, &quot;/favicon.ico&quot;);\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\n        corsConfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        corsConfiguration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\n\n        UrlBasedCorsConfigurationSource corsConfigurationSource = new UrlBasedCorsConfigurationSource();\n        corsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\n\n        return corsConfigurationSource;\n\n    }\n\n}\n</code></pre>\n<p>When I start up my app I am getting:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name \n'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': \nUnsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is \norg.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'filterChain' defined \nin class path resource [myapp/ws/security/v2/SecurityConfigV2.class]: \nBean instantiation via factory method failed; nested exception is \norg.springframework.beans.BeanInstantiationException: \nFailed to instantiate [org.springframework.security.web.SecurityFilterChain]: \nFactory method 'filterChain' threw exception; \nnested exception is org.springframework.security.config.annotation.AlreadyBuiltException: \nThis object has already been built\n</code></pre>\n<p>The Google Gods say this is because I'm calling <code>httpSecurity.build()</code> <strong>twice</strong> which is not allowed. However:</p>\n<ul>\n<li>My authn and authz filter require an <code>AuthenticationManager</code> instance; and</li>\n<li>It seems that the only way (please tell me if I'm wrong!) to get an <code>AuthenticationManager</code> instance is to run <code>httpSecurity.build()</code>; <strong>but</strong></li>\n<li>I need the authn/authz filter <em>before</em> I can call <code>httpSecurity.build()</code></li>\n</ul>\n<p>Can anyone help nudge me across the finish line here? Thanks for any and all help!</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1679441426,"creation_date":1521738530,"answer_id":49434556,"question_id":49433935,"body_markdown":"Yes, this is equivalent.   \r\n\r\nThe [`@Lazy` javadoc][1] states :   \r\n\r\n&gt; In addition to its role for component initialization, this annotation\r\n&gt; may also be placed on injection points marked with\r\n&gt; `org.springframework.beans.factory.annotation.Autowired` or\r\n&gt; `javax.inject.Inject`: In that context, it leads to the creation of a\r\n&gt; lazy-resolution proxy for all affected dependencies, as an alternative\r\n&gt; to `using org.springframework.beans.factory.ObjectFactory` or\r\n&gt; `javax.inject.Provider`.\r\n\r\nThe important part is :\r\n\r\n&gt;  **it leads to the creation of a lazy-resolution proxy for all affected\r\n&gt; dependencies**\r\n\r\nin terms of dependencies your `DogService` bean has two of them autowired in any case : `CatService catService` and `MouseService mouseService`.  \r\nSo annotating the constructor or all parameters individually will produce the same result : the two dependencies will be lazy loaded.\r\n\r\n**Note**: I have tested them and the behavior is exactly the same in both cases.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Lazy.html","title":"Is using `@Lazy` on a component constructor equal to annotating every argument?","body":"<p>Yes, this is equivalent.</p>\n<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Lazy.html\" rel=\"nofollow noreferrer\"><code>@Lazy</code> javadoc</a> states :</p>\n<blockquote>\n<p>In addition to its role for component initialization, this annotation\nmay also be placed on injection points marked with\n<code>org.springframework.beans.factory.annotation.Autowired</code> or\n<code>javax.inject.Inject</code>: In that context, it leads to the creation of a\nlazy-resolution proxy for all affected dependencies, as an alternative\nto <code>using org.springframework.beans.factory.ObjectFactory</code> or\n<code>javax.inject.Provider</code>.</p>\n</blockquote>\n<p>The important part is :</p>\n<blockquote>\n<p><strong>it leads to the creation of a lazy-resolution proxy for all affected\ndependencies</strong></p>\n</blockquote>\n<p>in terms of dependencies your <code>DogService</code> bean has two of them autowired in any case : <code>CatService catService</code> and <code>MouseService mouseService</code>.<br />\nSo annotating the constructor or all parameters individually will produce the same result : the two dependencies will be lazy loaded.</p>\n<p><strong>Note</strong>: I have tested them and the behavior is exactly the same in both cases.</p>\n"}],"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10193,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":49434556,"answer_count":1,"score":16,"last_activity_date":1679441426,"creation_date":1521736481,"question_id":49433935,"body_markdown":"In Spring, consider a `@Service` class, that has the following autowired constructor:\r\n\r\n    public DogService(@Lazy CatService catService, @Lazy MouseService mouseService) {\r\n      this.catService = catService;\r\n      this.mouseService = mouseService;\r\n    }\r\n\r\nis this equivalent to?\r\n\r\n    @Lazy\r\n    public DogService(CatService catService, MouseService mouseService) {\r\n      this.catService = catService;\r\n      this.mouseService = mouseService;\r\n    }","title":"Is using `@Lazy` on a component constructor equal to annotating every argument?","body":"<p>In Spring, consider a <code>@Service</code> class, that has the following autowired constructor:</p>\n\n<pre><code>public DogService(@Lazy CatService catService, @Lazy MouseService mouseService) {\n  this.catService = catService;\n  this.mouseService = mouseService;\n}\n</code></pre>\n\n<p>is this equivalent to?</p>\n\n<pre><code>@Lazy\npublic DogService(CatService catService, MouseService mouseService) {\n  this.catService = catService;\n  this.mouseService = mouseService;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","web","jetty"],"answers":[{"tags":[],"owner":{"account_id":2340029,"reputation":154,"user_id":2051532,"display_name":"Ramkumar Pillai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679390199,"creation_date":1679390199,"answer_id":75799251,"question_id":75790960,"body_markdown":"add all your static files under resources/static/ as below\r\n\r\n[![SB-web folder Structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mweV1.png\r\n\r\nyou can access the files as below\r\n\r\nhttp://localhost:8080/ or http://localhost:8080/index.html\r\n\r\nhttp://localhost:8080/hello.html\r\n\r\nuse the below CURL to get the sample SB Project \r\n\r\n    curl https://start.spring.io/starter.tgz -d dependencies=web -d type=maven-project | tar -xzvf -","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>add all your static files under resources/static/ as below</p>\n<p><a href=\"https://i.stack.imgur.com/mweV1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mweV1.png\" alt=\"SB-web folder Structure\" /></a></p>\n<p>you can access the files as below</p>\n<p>http://localhost:8080/ or http://localhost:8080/index.html</p>\n<p>http://localhost:8080/hello.html</p>\n<p>use the below CURL to get the sample SB Project</p>\n<pre><code>curl https://start.spring.io/starter.tgz -d dependencies=web -d type=maven-project | tar -xzvf -\n</code></pre>\n"},{"tags":[],"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679441162,"creation_date":1679441162,"answer_id":75807213,"question_id":75790960,"body_markdown":"You have to enable Spring to serve up static files. All you did was tell Spring to return a &quot;view&quot; called &quot;/html/htmlHello.html&quot;. \r\n\r\nYou don&#39;t say what version of Spring you&#39;re using, but for instance with the latest: https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources\r\n\r\nHere&#39;s the XML-based setup we use:\r\n\r\n```xml\r\n    &lt;!-- Allows for mapping the DispatcherServlet to &quot;/&quot; by forwarding static\r\n        resource requests to the container&#39;s default Servlet --&gt;\r\n    &lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/htdocs/&quot;/&gt;\r\n    &lt;mvc:default-servlet-handler /&gt;\r\n```","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>You have to enable Spring to serve up static files. All you did was tell Spring to return a &quot;view&quot; called &quot;/html/htmlHello.html&quot;.</p>\n<p>You don't say what version of Spring you're using, but for instance with the latest: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources</a></p>\n<p>Here's the XML-based setup we use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;!-- Allows for mapping the DispatcherServlet to &quot;/&quot; by forwarding static\n        resource requests to the container's default Servlet --&gt;\n    &lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/htdocs/&quot;/&gt;\n    &lt;mvc:default-servlet-handler /&gt;\n</code></pre>\n"}],"owner":{"account_id":4788690,"reputation":877,"user_id":3868454,"accept_rate":60,"display_name":"Nick Legend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75807213,"answer_count":2,"score":1,"last_activity_date":1679441162,"creation_date":1679319483,"question_id":75790960,"body_markdown":"I have a simple Jetty server installation and run a WAR file compiled with Spring MVC. The WAR file is located in the `$JETTY_BASE` directory. `jsp` module is installed (`java -jar $JETTY_HOME/start.jar --add-to-start=jsp`) and JSP files are served well from inside the WAR file. But when I create a controller:\r\n\r\n````\r\n@Controller\r\n@RequestMapping(&quot;/html&quot;)\r\npublic class HtmlHelloController {\r\n\r\n    @RequestMapping(&quot;/hello&quot;)\r\n    public String getHtmlHello() {\r\n        return &quot;/html/htmlHello.html&quot;;\r\n    }\r\n}\r\n````\r\n\r\nAnd try to use it with `http://localhost:8080/web-app-spring/html/hello` I get:\r\n\r\n````\r\nMar 20, 2023 2:06:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\r\nWARNING: No mapping for GET /web-app-spring/html/htmlHello.html\r\n````\r\n\r\nThe file `html/htmlHello.html` is present in my `webapp` directory.\r\n\r\nIs there a (preferably simple) way to serve this `html/htmlHello.html` file from inside my WAR file in Jetty?","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>I have a simple Jetty server installation and run a WAR file compiled with Spring MVC. The WAR file is located in the <code>$JETTY_BASE</code> directory. <code>jsp</code> module is installed (<code>java -jar $JETTY_HOME/start.jar --add-to-start=jsp</code>) and JSP files are served well from inside the WAR file. But when I create a controller:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/html&quot;)\npublic class HtmlHelloController {\n\n    @RequestMapping(&quot;/hello&quot;)\n    public String getHtmlHello() {\n        return &quot;/html/htmlHello.html&quot;;\n    }\n}\n</code></pre>\n<p>And try to use it with <code>http://localhost:8080/web-app-spring/html/hello</code> I get:</p>\n<pre><code>Mar 20, 2023 2:06:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\nWARNING: No mapping for GET /web-app-spring/html/htmlHello.html\n</code></pre>\n<p>The file <code>html/htmlHello.html</code> is present in my <code>webapp</code> directory.</p>\n<p>Is there a (preferably simple) way to serve this <code>html/htmlHello.html</code> file from inside my WAR file in Jetty?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":1,"creation_date":1679439171,"post_id":75806942,"comment_id":133722200,"body_markdown":"On Android 10+, no permission is allowed to public storage without making the user intentionally select those files","body":"On Android 10+, no permission is allowed to public storage without making the user intentionally select those files"}],"owner":{"account_id":11269956,"reputation":401,"user_id":10536551,"display_name":"OliverDamon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679441105,"creation_date":1679438268,"question_id":75806942,"body_markdown":"I&#39;m trying to implement some solutions to delete a screenshot I took on the device, but nothing works.\r\n\r\nThe last one I tried was this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n     val file = File(&quot;/storage/emulated/0/DCIM/Screenshots/Screenshot_2023-03-21-19-26-23-933_com.mi.android.globallauncher.jpg&quot;)\r\n                    Uri.fromFile(file)\r\n                    file.setWritable(true)\r\n                    if (file.canWrite()) {\r\n                        file.delete()\r\n                    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How can I delete a screenshot from the device through the app(Android)","body":"<p>I'm trying to implement some solutions to delete a screenshot I took on the device, but nothing works.</p>\n<p>The last one I tried was this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> val file = File(\"/storage/emulated/0/DCIM/Screenshots/Screenshot_2023-03-21-19-26-23-933_com.mi.android.globallauncher.jpg\")\n                Uri.fromFile(file)\n                file.setWritable(true)\n                if (file.canWrite()) {\n                    file.delete()\n                }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","object","casting","polymorphism","compareto"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1679441041,"post_id":75807172,"comment_id":133722472,"body_markdown":"Welcome to Stack Overflow. In your own words, what should happen if you try to compare an Object to a Rational, and you ask the Object class for the code that explains the comparison? Do Objects know how to be compared to Rationals? In your own words, if you write `(r2).compareTo(r1)`, and the **variable** `r2` has the type `Object`, what class do you think will be used to find the `compareTo` code? Why?","body":"Welcome to Stack Overflow. In your own words, what should happen if you try to compare an Object to a Rational, and you ask the Object class for the code that explains the comparison? Do Objects know how to be compared to Rationals? In your own words, if you write <code>(r2).compareTo(r1)</code>, and the <b>variable</b> <code>r2</code> has the type <code>Object</code>, what class do you think will be used to find the <code>compareTo</code> code? Why?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1679442428,"post_id":75807172,"comment_id":133722647,"body_markdown":"Hello. For future reference, when the question is about an error message, please include, as text, a copy of the error message in the question body. When the question references line numbers in the code, the question body should indicate which are the line numbers being referred to.  It may help to include, as text, example input and output.","body":"Hello. For future reference, when the question is about an error message, please include, as text, a copy of the error message in the question body. When the question references line numbers in the code, the question body should indicate which are the line numbers being referred to.  It may help to include, as text, example input and output."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1679444436,"post_id":75807172,"comment_id":133722899,"body_markdown":"First and foremost, ***never*** try to run code that doesn&#39;t compile, as you are doing.","body":"First and foremost, <b><i>never</i></b> try to run code that doesn&#39;t compile, as you are doing."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679440694,"creation_date":1679440694,"answer_id":75807181,"question_id":75807172,"body_markdown":"`Object` does not declare a method with the name `compareTo`, thus you cannot call it. Typically, classes that provide a sorting order implement `Comparable`, so this is the type you should use for just a guarantee of being able to compare two objects.","title":"Why is compareTo() receiving runtime error when comparing two objects?","body":"<p><code>Object</code> does not declare a method with the name <code>compareTo</code>, thus you cannot call it. Typically, classes that provide a sorting order implement <code>Comparable</code>, so this is the type you should use for just a guarantee of being able to compare two objects.</p>\n"}],"owner":{"account_id":28069606,"reputation":21,"user_id":21442437,"display_name":"ProgrammingStudent"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75807181,"answer_count":1,"score":-2,"last_activity_date":1679440694,"creation_date":1679440568,"question_id":75807172,"body_markdown":"When referencing the object &quot;r2&quot; at line 12, there is a runtime error. Why is this?\r\n\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tRational r1 = new Rational(-2, 6);\r\n\t\tSystem.out.println(r1.getNumerator());\r\n\t\tSystem.out.println(r1.getDenominator());\r\n\t\tSystem.out.println(r1.intValue());\r\n\t\tSystem.out.println(r1.doubleValue() + &quot;\\n&quot;);\r\n\t\t\r\n\t\tObject r2 = new Rational(1,45);\r\n\t\tSystem.out.println((r2).compareTo(r1));\r\n\t\t\r\n\t}\r\n\r\n\r\nIn line 11, I changed the object class to Rational and the code works but it does not work with **Object r2**. I&#39;m just curious as to the underlying reason this doesn&#39;t work with **Object r2**.","title":"Why is compareTo() receiving runtime error when comparing two objects?","body":"<p>When referencing the object &quot;r2&quot; at line 12, there is a runtime error. Why is this?</p>\n<pre><code>public static void main(String[] args) {\n    \n    Rational r1 = new Rational(-2, 6);\n    System.out.println(r1.getNumerator());\n    System.out.println(r1.getDenominator());\n    System.out.println(r1.intValue());\n    System.out.println(r1.doubleValue() + &quot;\\n&quot;);\n    \n    Object r2 = new Rational(1,45);\n    System.out.println((r2).compareTo(r1));\n    \n}\n</code></pre>\n<p>In line 11, I changed the object class to Rational and the code works but it does not work with <strong>Object r2</strong>. I'm just curious as to the underlying reason this doesn't work with <strong>Object r2</strong>.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1679401521,"post_id":75801105,"comment_id":133711829,"body_markdown":"Refer this if it helps - https://stackoverflow.com/questions/18225997/stale-element-reference-element-is-not-attached-to-the-page-document","body":"Refer this if it helps - <a href=\"https://stackoverflow.com/questions/18225997/stale-element-reference-element-is-not-attached-to-the-page-document\" title=\"stale element reference element is not attached to the page document\">stackoverflow.com/questions/18225997/&hellip;</a>"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1679422175,"post_id":75801105,"comment_id":133718494,"body_markdown":"once you click the DOM is probably going to update which will make your &quot;listofItems&quot; element references all go stale.","body":"once you click the DOM is probably going to update which will make your &quot;listofItems&quot; element references all go stale."}],"answers":[{"tags":[],"owner":{"account_id":28049622,"reputation":460,"user_id":21425739,"display_name":"howard_9"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679440543,"creation_date":1679440543,"answer_id":75807169,"question_id":75801105,"body_markdown":"A few ideas:\r\n***\r\nFirst, try using an explicit wait instead of implicit wait.  Sometimes, that helps.\r\n\r\nIf an explicit wait of 20 seconds works, then you would gradually reduce the wait down to 15 seconds, 10 seconds, 5 seconds, ... until you find the shortest working wait time.\r\n***\r\nSecond, if the above doesn&#39;t work, what I would normally do is to locate the parent DOM element of the target, and work downward from there. (And, if the parent element doesn&#39;t work, try the grandparent element, etc). Target the descendant with css selector &quot;#idOfAncestor *&quot;.\r\n\r\nWebpages are built using dynamic Javascript nowadays, so there are many ways for an element to become &quot;hidden&quot; or &quot;removed&quot; (or, even worse, become &quot;visible but uninteractable&quot;.) Sometimes, it helps to locate the stale elements from the ancestor elements.\r\n***\r\nIf the above two appraoches don&#39;t work, sometimes it helps to use other Selenium methods to locate the element, such as:\r\n* [presenceOfElement](https://stackoverflow.com/questions/20903231/how-to-make-selenium-wait-until-an-element-is-present)\r\n* [visibilityOfElementLocated](https://stackoverflow.com/questions/10941184/equivalent-of-waitforvisible-waitforelementpresent-in-selenium-webdriver-tests-u)\r\n* [elementToBeClickable](https://stackoverflow.com/questions/38327049/check-if-element-is-clickable-in-selenium-java)\r\n***\r\nBy the way, do you have any username/password for your https://www.saucedemo.com website? (so that I can try to log in and help) Thanks!","title":"Error: org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document","body":"<p>A few ideas:</p>\n<hr />\n<p>First, try using an explicit wait instead of implicit wait.  Sometimes, that helps.</p>\n<p>If an explicit wait of 20 seconds works, then you would gradually reduce the wait down to 15 seconds, 10 seconds, 5 seconds, ... until you find the shortest working wait time.</p>\n<hr />\n<p>Second, if the above doesn't work, what I would normally do is to locate the parent DOM element of the target, and work downward from there. (And, if the parent element doesn't work, try the grandparent element, etc). Target the descendant with css selector &quot;#idOfAncestor *&quot;.</p>\n<p>Webpages are built using dynamic Javascript nowadays, so there are many ways for an element to become &quot;hidden&quot; or &quot;removed&quot; (or, even worse, become &quot;visible but uninteractable&quot;.) Sometimes, it helps to locate the stale elements from the ancestor elements.</p>\n<hr />\n<p>If the above two appraoches don't work, sometimes it helps to use other Selenium methods to locate the element, such as:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/20903231/how-to-make-selenium-wait-until-an-element-is-present\">presenceOfElement</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10941184/equivalent-of-waitforvisible-waitforelementpresent-in-selenium-webdriver-tests-u\">visibilityOfElementLocated</a></li>\n<li><a href=\"https://stackoverflow.com/questions/38327049/check-if-element-is-clickable-in-selenium-java\">elementToBeClickable</a></li>\n</ul>\n<hr />\n<p>By the way, do you have any username/password for your <a href=\"https://www.saucedemo.com\" rel=\"nofollow noreferrer\">https://www.saucedemo.com</a> website? (so that I can try to log in and help) Thanks!</p>\n"}],"owner":{"account_id":28037235,"reputation":1,"user_id":21415402,"display_name":"joao victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679440543,"creation_date":1679401069,"question_id":75801105,"body_markdown":"My code is giving the following error &quot;org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document&quot; .It runs once, but when it goes to the second item, the error happens.\r\n\r\n\r\n\r\n        /**\r\n         * CONSEGUI CAPTURAR OS ITENS A SER COMPRADOS ATRAVES DO PRIMEIRO WEBELEMENT\r\n         * que basicamente fez um elemento web com a div que contem os itens\r\n         * E DEPOIS FIZ UMA LISTA DESSE PRIMEIRO WEBELEMENT\r\n         * aonde filtrei pelo ids que continham a string &quot;add-to-cart-&quot;\r\n         */\r\n        WebElement prod=driver.findElement(By.id(&quot;inventory_container&quot;));\r\n        List &lt;WebElement&gt; listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,&#39;add-to-cart-&#39;)]&quot;));\r\n        for(WebElement product : listofItems){\r\n\r\n            prod=driver.findElement(By.id(&quot;inventory_container&quot;));\r\n            listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,&#39;add-to-cart-&#39;)]&quot;));\r\n            \r\n            \r\n            driver.findElement(By.xpath(&quot;//button[@id=&#39;add-to-cart-sauce-labs-fleece-jacket&#39;]&quot;)).click();\r\n            product.click();\r\n            driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\r\n            driver.findElement(By.xpath(&quot;//*[contains(@class, &#39;shopping_cart_container&#39;)]&quot;)).click(); \r\n            driver.findElement(By.xpath(&quot;//button[@id=&#39;checkout&#39;]&quot;)).click(); \r\n            \r\n\r\n            CadastraComprador(&quot;joao&quot;, &quot;costa&quot;, &quot;35510&quot;);\r\n            driver.findElement(By.xpath(&quot;//*[contains(@class, &#39;submit-button btn btn_primary cart_button btn_action&#39;)]&quot;)).click();\r\n            \r\n\r\n            comparaPrecoTotal(&quot;Item total: $65.98&quot;);\r\n            buttonFinish.click();\r\n            driver.navigate().to(&quot;https://www.saucedemo.com/inventory.html&quot;);\r\n        \r\n\r\n\r\n        }\r\n   ","title":"Error: org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document","body":"<p>My code is giving the following error &quot;org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document&quot; .It runs once, but when it goes to the second item, the error happens.</p>\n<pre><code>    /**\n     * CONSEGUI CAPTURAR OS ITENS A SER COMPRADOS ATRAVES DO PRIMEIRO WEBELEMENT\n     * que basicamente fez um elemento web com a div que contem os itens\n     * E DEPOIS FIZ UMA LISTA DESSE PRIMEIRO WEBELEMENT\n     * aonde filtrei pelo ids que continham a string &quot;add-to-cart-&quot;\n     */\n    WebElement prod=driver.findElement(By.id(&quot;inventory_container&quot;));\n    List &lt;WebElement&gt; listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,'add-to-cart-')]&quot;));\n    for(WebElement product : listofItems){\n\n        prod=driver.findElement(By.id(&quot;inventory_container&quot;));\n        listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,'add-to-cart-')]&quot;));\n        \n        \n        driver.findElement(By.xpath(&quot;//button[@id='add-to-cart-sauce-labs-fleece-jacket']&quot;)).click();\n        product.click();\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n\n        driver.findElement(By.xpath(&quot;//*[contains(@class, 'shopping_cart_container')]&quot;)).click(); \n        driver.findElement(By.xpath(&quot;//button[@id='checkout']&quot;)).click(); \n        \n\n        CadastraComprador(&quot;joao&quot;, &quot;costa&quot;, &quot;35510&quot;);\n        driver.findElement(By.xpath(&quot;//*[contains(@class, 'submit-button btn btn_primary cart_button btn_action')]&quot;)).click();\n        \n\n        comparaPrecoTotal(&quot;Item total: $65.98&quot;);\n        buttonFinish.click();\n        driver.navigate().to(&quot;https://www.saucedemo.com/inventory.html&quot;);\n    \n\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","azure-form-recognizer"],"owner":{"account_id":26936763,"reputation":1,"user_id":20508281,"display_name":"Hallo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679439906,"creation_date":1678565311,"question_id":75709228,"body_markdown":"I&#39;m making a project that takes some information from a physical ID (ex. firstName, lastName, birthDate) and fills them into a form. It&#39;s a Spring Boot project and for the recognition feature, I&#39;m using Azure Form Recognition.\r\n\r\nThe question is, how can I implement Form Recognition in Spring? I didn&#39;t find that much information about this topic.\r\n\r\nI tried to find some repositories but all that I found was about receipt scanning or wasn&#39;t helping at all.","title":"Azure Form Recognition and Spring Boot Implementation","body":"<p>I'm making a project that takes some information from a physical ID (ex. firstName, lastName, birthDate) and fills them into a form. It's a Spring Boot project and for the recognition feature, I'm using Azure Form Recognition.</p>\n<p>The question is, how can I implement Form Recognition in Spring? I didn't find that much information about this topic.</p>\n<p>I tried to find some repositories but all that I found was about receipt scanning or wasn't helping at all.</p>\n"},{"tags":["java","security","ssl"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1411798562,"post_id":26071429,"comment_id":40849525,"body_markdown":"A KeyStore file is not a text file.","body":"A KeyStore file is not a text file."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1489719664,"post_id":26071429,"comment_id":72804953,"body_markdown":"In fact a key is not a key store; a text file is not a key store; and a key can&#39;t be stored in a text file.","body":"In fact a key is not a key store; a text file is not a key store; and a key can&#39;t be stored in a text file."}],"answers":[{"tags":[],"owner":{"account_id":111411,"reputation":1050,"user_id":294320,"accept_rate":38,"display_name":"VGe0rge"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1411794445,"creation_date":1411794445,"answer_id":26071504,"question_id":26071429,"body_markdown":"Your file is invalid. You have to import a JKS keystore file and not a txt one. You have to use the [keytool](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html) to create your keystore file and then import this file.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>Your file is invalid. You have to import a JKS keystore file and not a txt one. You have to use the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html\" rel=\"noreferrer\">keytool</a> to create your keystore file and then import this file.</p>\n"},{"tags":[],"owner":{"account_id":8277997,"reputation":1415,"user_id":6223518,"accept_rate":58,"display_name":"Dave Pateral"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1489722404,"creation_date":1489719341,"answer_id":42848413,"question_id":26071429,"body_markdown":"I faced with the same problem when `load keystore` with the following code:\r\n\r\n    KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    Resource resource = new ClassPathResource(file);\r\n    trustStore.load(resource.getInputStream(), password.toCharArray());\r\n\r\nIt turned out to be the JDK issue, it doesn&#39;t work with  `jre1.8.0_25`. when I upgrade JDK version to the latest `jre1.8.0_121`, it works.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I faced with the same problem when <code>load keystore</code> with the following code:</p>\n\n<pre><code>KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\nResource resource = new ClassPathResource(file);\ntrustStore.load(resource.getInputStream(), password.toCharArray());\n</code></pre>\n\n<p>It turned out to be the JDK issue, it doesn't work with  <code>jre1.8.0_25</code>. when I upgrade JDK version to the latest <code>jre1.8.0_121</code>, it works.</p>\n"},{"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1524858161,"creation_date":1524858161,"answer_id":50069288,"question_id":26071429,"body_markdown":"I was seeing this exception:\r\n\r\nInvalid keystore format\r\n\r\nwhile running a java application using JRE-1.8.0_40 on CentOS 6.6 64-bit linux.\r\n\r\nOn using JRE-1.8.0_172, the exception went away.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I was seeing this exception:</p>\n\n<p>Invalid keystore format</p>\n\n<p>while running a java application using JRE-1.8.0_40 on CentOS 6.6 64-bit linux.</p>\n\n<p>On using JRE-1.8.0_172, the exception went away.</p>\n"},{"tags":[],"owner":{"account_id":1999992,"reputation":879,"user_id":1791268,"display_name":"acaruci"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1542730475,"creation_date":1542730475,"answer_id":53397146,"question_id":26071429,"body_markdown":"I had exactly the same issue. Indeed, the keystore file was invalid and not related to the JDK//JRE version. The problem in my case was caused by Maven. I was using the following option in my pom file:\r\n\r\n    &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;true&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n\r\nThe &quot;true&quot; value in the filtering was messing with the key file. Therefore, the keyfile that was available in my classpath when Spring run was not exactly the same I had under my directory &quot;src/main/resources&quot; and that caused the Invalid Keystore Format exception. When I tested with keytool I was using the one under the &quot;resources&quot; folder so that was misleading the real issue. \r\n\r\nSolving the issue: in your pom.xml file, change the value for &quot;filtering&quot; to &quot;false&quot;.\r\nAnother way of solving the issue was to specify explicitly the location of the keystore in the application.properties file. So instead of:\r\n\r\n    server.ssl.key-store: classpath:keystore.jks\r\nI used\r\n\r\n    server.ssl.key-store: keystore/keystore.jks","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I had exactly the same issue. Indeed, the keystore file was invalid and not related to the JDK//JRE version. The problem in my case was caused by Maven. I was using the following option in my pom file:</p>\n\n<pre><code>&lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<p>The \"true\" value in the filtering was messing with the key file. Therefore, the keyfile that was available in my classpath when Spring run was not exactly the same I had under my directory \"src/main/resources\" and that caused the Invalid Keystore Format exception. When I tested with keytool I was using the one under the \"resources\" folder so that was misleading the real issue. </p>\n\n<p>Solving the issue: in your pom.xml file, change the value for \"filtering\" to \"false\".\nAnother way of solving the issue was to specify explicitly the location of the keystore in the application.properties file. So instead of:</p>\n\n<pre><code>server.ssl.key-store: classpath:keystore.jks\n</code></pre>\n\n<p>I used</p>\n\n<pre><code>server.ssl.key-store: keystore/keystore.jks\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9484804,"reputation":31,"user_id":7051466,"display_name":"Zak Aroui"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576185744,"creation_date":1576185744,"answer_id":59312913,"question_id":26071429,"body_markdown":"How did you generate the JKS file? I tried all suggested solutions but none worked for me.  I was getting the same error when trying to read (in my code) a JKS file that I generated using OpenJDK Zulu 11&#39;s keytool. \r\n\r\nI fixed this by instead generating the JKS file using the &quot;KeyStore Explorer&quot; tool, which I believe uses oracle JDK internally. Using the tool, I basically created a JKS file and added my trusted certificate to it. \r\n\r\nI hope this helps.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>How did you generate the JKS file? I tried all suggested solutions but none worked for me.  I was getting the same error when trying to read (in my code) a JKS file that I generated using OpenJDK Zulu 11's keytool. </p>\n\n<p>I fixed this by instead generating the JKS file using the \"KeyStore Explorer\" tool, which I believe uses oracle JDK internally. Using the tool, I basically created a JKS file and added my trusted certificate to it. </p>\n\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":2869356,"reputation":770,"user_id":2463026,"accept_rate":22,"display_name":"CSR"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1632234877,"creation_date":1632234877,"answer_id":69270811,"question_id":26071429,"body_markdown":"For my case i have used different versions of keytool and java, once i switched to same jdk they got fixed.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>For my case i have used different versions of keytool and java, once i switched to same jdk they got fixed.</p>\n"},{"tags":[],"owner":{"account_id":24720472,"reputation":1,"user_id":18609643,"display_name":"UMehta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650904178,"creation_date":1650904178,"answer_id":72002803,"question_id":26071429,"body_markdown":"I recently had the same problem even though I was using a valid .jks file... the code used to work fine but suddenly it started giving &quot;Invalid keystore format&quot;\r\n\r\nThe answer given earlier to set the pom.xml resource filtering value to &quot;false&quot; worked for me too e.g.,\r\n\r\n     &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;false&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I recently had the same problem even though I was using a valid .jks file... the code used to work fine but suddenly it started giving &quot;Invalid keystore format&quot;</p>\n<p>The answer given earlier to set the pom.xml resource filtering value to &quot;false&quot; worked for me too e.g.,</p>\n<pre><code> &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;false&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4523377,"reputation":2744,"user_id":3675925,"display_name":"Hamid Zandi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655905583,"creation_date":1655905583,"answer_id":72716704,"question_id":26071429,"body_markdown":"**mac** users\r\n\r\nupdating **JDK** in `System Preferences -&gt; JAVA -&gt; JAVA Control Panel -&gt; Update tab`\r\n\r\nfrom java version **&quot;1.8.0_231&quot;** to **&quot;1.8.0_333&quot;** fixed the issue\r\n","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p><strong>mac</strong> users</p>\n<p>updating <strong>JDK</strong> in <code>System Preferences -&gt; JAVA -&gt; JAVA Control Panel -&gt; Update tab</code></p>\n<p>from java version <strong>&quot;1.8.0_231&quot;</strong> to <strong>&quot;1.8.0_333&quot;</strong> fixed the issue</p>\n"},{"tags":[],"owner":{"account_id":2635164,"reputation":1119,"user_id":2280067,"display_name":"SJX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675350325,"creation_date":1675350325,"answer_id":75325110,"question_id":26071429,"body_markdown":"If you use openjdk:&lt;br&gt;\r\nUse openjdk version &quot;11.0.17&quot; or a newer one.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>If you use openjdk:<br>\nUse openjdk version &quot;11.0.17&quot; or a newer one.</p>\n"},{"tags":[],"owner":{"account_id":14792752,"reputation":11,"user_id":10683169,"display_name":"Abusha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679439491,"creation_date":1679439491,"answer_id":75807074,"question_id":26071429,"body_markdown":"\r\nFor me i used the absolute path with the `file:` prefix to make it work. when I used only the name of the file it was giving me invalid keystore format error. \r\n\r\nI hope this helps.  \r\n```\r\n  KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext();\r\n    Resource res = applicationContext.getResource(&quot;file:///Users/blibanos/Downloads/peoplefiles.jks&quot;);\r\n    try (InputStream in = res.getInputStream()) {\r\n        keyStore.load(in, password);\r\n    }\r\n    ```","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>For me i used the absolute path with the <code>file:</code> prefix to make it work. when I used only the name of the file it was giving me invalid keystore format error.</p>\n<p>I hope this helps.</p>\n<pre><code>  KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext();\n    Resource res = applicationContext.getResource(&quot;file:///Users/blibanos/Downloads/peoplefiles.jks&quot;);\n    try (InputStream in = res.getInputStream()) {\n        keyStore.load(in, password);\n    }\n    ```\n</code></pre>\n"}],"owner":{"account_id":3934345,"reputation":552,"user_id":3251360,"accept_rate":80,"display_name":"Java Is Cool"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121286,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":26071504,"answer_count":10,"score":16,"last_activity_date":1679439491,"creation_date":1411793635,"question_id":26071429,"body_markdown":"I am testing SSL in java with SSLServerSocket and other classes in the java.ssl package. When I run the following code, I get the exception java.io.IOException: Invalid keystore format. My code:\r\n\r\n    package testing;\r\n    import java.io.BufferedReader;\r\n    import java.io.FileInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.net.Socket;\r\n    import java.security.KeyStore;\r\n    \r\n    import javax.net.ServerSocketFactory;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLServerSocket;\r\n    import javax.net.ssl.TrustManager;\r\n    \r\n    public class SSLServerTest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\tint port = 3000;\r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n    \t\t\tKeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    \t\t\tInputStream ksIs = new FileInputStream(&quot;key.txt&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tks.load(ksIs, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\t} finally {\r\n    \t\t\t\tif (ksIs != null) {\r\n    \t\t\t\t\tksIs.close();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t\tkmf.init(ks, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\tsc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\r\n    \t\t\tServerSocketFactory ssocketFactory = sc.getServerSocketFactory();\r\n    \t\t\tSSLServerSocket ssocket = (SSLServerSocket) ssocketFactory\r\n    \t\t\t\t\t.createServerSocket(port);\r\n    \t\t\tssocket.setEnabledProtocols(new String[] { &quot;SSLv3&quot; });\r\n    \t\t\tSocket socket = ssocket.accept();\r\n    \t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(\r\n    \t\t\t\t\tsocket.getInputStream()));\r\n    \t\t\tPrintWriter out = new PrintWriter(socket.getOutputStream());\r\n    \t\t\tout.println(&quot;Hello, Securly!&quot;);\r\n    \t\t\tout.close();\r\n    \t\t\tin.close();\r\n    \t\t\tout.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nFile key.txt:\r\n1268312345812304612348712634283427346\r\nI am guessing I should put something else in the key.txt file, but I do not know what to put in it. Probably a searilized object.\r\n\r\n**EDIT: Client Code:**\r\n\r\n    package testing;\r\n    import java.io.BufferedReader;\r\n    import java.io.FileInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.security.KeyStore;\r\n    \r\n    import javax.net.SocketFactory;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSocket;\r\n    import javax.net.ssl.TrustManager;\r\n    \r\n    public class SSLClientTest {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tint port = 3000;\r\n    \t\tString host = &quot;localhost&quot;;\r\n    \r\n    \t\ttry {\r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n    \t\t\tKeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    \t\t\tInputStream ksIs = new FileInputStream(&quot;key.txt&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tks.load(ksIs, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\t} finally {\r\n    \t\t\t\tif (ksIs != null) {\r\n    \t\t\t\t\tksIs.close();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t\tkmf.init(ks, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\tsc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\r\n    \t\t\tSocketFactory factory = sc.getSocketFactory();\r\n    \t\t\tSSLSocket socket = (SSLSocket) factory.createSocket(host, port);\r\n    \t\t\tsocket.startHandshake();\r\n    \t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(\r\n    \t\t\t\t\tsocket.getInputStream()));\r\n    \t\t\tString str = &quot;&quot;;\r\n    \t\t\twhile ((str = in.readLine()) != null)\r\n    \t\t\t\tSystem.out.println(str);\r\n    \t\t\tin.close();\r\n    \t\t\tsocket.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I am testing SSL in java with SSLServerSocket and other classes in the java.ssl package. When I run the following code, I get the exception java.io.IOException: Invalid keystore format. My code:</p>\n\n<pre><code>package testing;\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.security.KeyStore;\n\nimport javax.net.ServerSocketFactory;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLServerSocket;\nimport javax.net.ssl.TrustManager;\n\npublic class SSLServerTest {\n    public static void main(String[] args) {\n        try {\n            int port = 3000;\n            SSLContext sc = SSLContext.getInstance(\"TLSv1.2\");\n            KeyStore ks = KeyStore.getInstance(\"JKS\");\n            InputStream ksIs = new FileInputStream(\"key.txt\");\n            try {\n                ks.load(ksIs, \"Bennett556\".toCharArray());\n            } finally {\n                if (ksIs != null) {\n                    ksIs.close();\n                }\n            }\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n            kmf.init(ks, \"Bennett556\".toCharArray());\n            sc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\n            ServerSocketFactory ssocketFactory = sc.getServerSocketFactory();\n            SSLServerSocket ssocket = (SSLServerSocket) ssocketFactory\n                    .createServerSocket(port);\n            ssocket.setEnabledProtocols(new String[] { \"SSLv3\" });\n            Socket socket = ssocket.accept();\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                    socket.getInputStream()));\n            PrintWriter out = new PrintWriter(socket.getOutputStream());\n            out.println(\"Hello, Securly!\");\n            out.close();\n            in.close();\n            out.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>File key.txt:\n1268312345812304612348712634283427346\nI am guessing I should put something else in the key.txt file, but I do not know what to put in it. Probably a searilized object.</p>\n\n<p><strong>EDIT: Client Code:</strong></p>\n\n<pre><code>package testing;\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.KeyStore;\n\nimport javax.net.SocketFactory;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSocket;\nimport javax.net.ssl.TrustManager;\n\npublic class SSLClientTest {\n    public static void main(String[] args) {\n\n        int port = 3000;\n        String host = \"localhost\";\n\n        try {\n            SSLContext sc = SSLContext.getInstance(\"TLSv1.2\");\n            KeyStore ks = KeyStore.getInstance(\"JKS\");\n            InputStream ksIs = new FileInputStream(\"key.txt\");\n            try {\n                ks.load(ksIs, \"Bennett556\".toCharArray());\n            } finally {\n                if (ksIs != null) {\n                    ksIs.close();\n                }\n            }\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n            kmf.init(ks, \"Bennett556\".toCharArray());\n            sc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\n            SocketFactory factory = sc.getSocketFactory();\n            SSLSocket socket = (SSLSocket) factory.createSocket(host, port);\n            socket.startHandshake();\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                    socket.getInputStream()));\n            String str = \"\";\n            while ((str = in.readLine()) != null)\n                System.out.println(str);\n            in.close();\n            socket.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","runtime"],"comments":[{"owner":{"account_id":2153838,"reputation":1042,"user_id":1909501,"display_name":"janith1024"},"score":0,"creation_date":1679465230,"post_id":75807061,"comment_id":133725085,"body_markdown":"Too much codes and other things in this question. Please ask the specific problem that you face while do the coding. Then it is easy to give solution.","body":"Too much codes and other things in this question. Please ask the specific problem that you face while do the coding. Then it is easy to give solution."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679465256,"post_id":75807061,"comment_id":133725094,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":24803683,"reputation":11,"user_id":18685873,"display_name":"cocojambo01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679439310,"creation_date":1679439310,"question_id":75807061,"body_markdown":"so I am trying to pass data from one fragment to another.\r\nThe navigation would be the following:\r\nfragment1 -\\&gt; fragment2 -\\&gt; fragment1\r\nessentially I am sending some data from fragment1 to fragment2 and after the user completes the data I want to send back, I am sending the completed data from fragment2 back to fragment1.\r\n\r\nTo send data from fragment1 to fragment2 I am using(working code, data is recieved in fragment2):\r\n\r\n```\r\n                        //package image uri\r\n                        Bundle bundle = new Bundle();\r\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\r\n\r\n                        //navigate to image display and set title with parceled uri\r\n                        NavController navController = Navigation.findNavController(view);\r\n                        navController.navigate(R.id.pickedImageFragment, bundle);\r\n```\r\n\r\nTo send data back from fragment2 to fragment1(not working code):\r\n\r\n```\r\n                //create the gotten image class\r\n                String photoName = binding.photoDescription.getText().toString().trim();\r\n                String imageID = UUID.randomUUID().toString();\r\n                Image myImage = new Image(imageID, photoName, imageUri);\r\n\r\n                //bundle it\r\n                Gson gson = new Gson();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\r\n\r\n                //send the bundled image on it&#39;s way\r\n                NavController navController = Navigation.findNavController(view);\r\n                navController.navigate(R.id.ThirdFragment, bundle);\r\n```\r\n\r\nAnd on he recieving end I have:\r\n\r\n```\r\n                Gson gson = new Gson();\r\n            \r\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\r\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\r\n                    Log.d(&quot;test&quot;, myImage.getImageName());\r\n                    Log.d(&quot;test&quot;, myImage.getId());\r\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\r\n                }\r\n```\r\n\r\nI have also tried to use serialiseble for the Image class, still no result.\r\n\r\ncomplete code:\r\n\r\nfragment1:\r\n\r\n```\r\npackage com.example.briefingaboutitapp;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.fragment.NavHostFragment;\r\n\r\nimport com.example.briefingaboutitapp.databinding.FragmentThirdBinding;\r\nimport com.google.gson.Gson;\r\n\r\nimport Entities.Image;\r\n\r\npublic class ThirdFragment extends Fragment {\r\n\r\n    private FragmentThirdBinding binding;\r\n\r\n    private ActivityResultLauncher&lt;String&gt; galleryLauncher;\r\n\r\n    @Override\r\n    public View onCreateView(\r\n            @NonNull LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n\r\n        binding = FragmentThirdBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        try {\r\n            Gson gson = new Gson();\r\n\r\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\r\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\r\n                    Log.d(&quot;test&quot;, myImage.getImageName());\r\n                    Log.d(&quot;test&quot;, myImage.getId());\r\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\r\n                }\r\n\r\n        }\r\n        catch (Exception e){\r\n            Log.d(&quot;test&quot;, &quot;image still null&quot;);\r\n        }\r\n\r\n        binding.returnToEditText.setOnClickListener(view1 -&gt; NavHostFragment.findNavController(ThirdFragment.this)\r\n                .navigate(R.id.action_ThirdFragment_to_SecondFragment));\r\n\r\n        Button photoPickerButton = view.findViewById(R.id.photo_picker_button);\r\n        galleryLauncher = registerForActivityResult(new ActivityResultContracts.GetContent(),\r\n                result -&gt; {\r\n                    if(result!= null){\r\n\r\n                        //package image uri\r\n                        Bundle bundle = new Bundle();\r\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\r\n\r\n                        //navigate to image display and set title with parceled uri\r\n                        NavController navController = Navigation.findNavController(view);\r\n                        navController.navigate(R.id.pickedImageFragment, bundle);\r\n                    }\r\n                    else{\r\n                        Toast.makeText(getContext(), &quot;Please select an image!&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n        photoPickerButton.setOnClickListener(view12 -&gt; galleryLauncher.launch(&quot;image/*&quot;));\r\n\r\n        binding.submitForm.setOnClickListener(view1 -&gt; {\r\n            Intent goToMainActivity = new Intent(getContext(), MainActivity.class);\r\n            this.startActivity(goToMainActivity);\r\n            Toast.makeText(this.getContext(),&quot;Article submitted successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nfragment2:\r\n\r\n```\r\npackage com.example.briefingaboutitapp;\r\n\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\n\r\nimport com.example.briefingaboutitapp.databinding.FragmentPickedImageBinding;\r\nimport com.google.gson.Gson;\r\n\r\nimport java.util.UUID;\r\n\r\nimport Entities.Image;\r\n\r\npublic class PickedImageFragment extends Fragment {\r\n    private FragmentPickedImageBinding binding;\r\n    private Uri imageUri;\r\n\r\n    @Override\r\n    public View onCreateView(\r\n            @NonNull LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n\r\n        binding = FragmentPickedImageBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n\r\n\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        this.imageUri = Uri.parse(requireArguments().getString(&quot;imageURI&quot;));\r\n\r\n        //get passed image\r\n        ImageView imageView = view.findViewById(R.id.image_view);\r\n        imageView.setImageURI(this.imageUri);\r\n\r\n\r\n        binding.submitMyPhotoButton.setOnClickListener(view1 -&gt; {\r\n            if(binding.photoDescription.getText().toString().trim().equals(&quot;&quot;)){\r\n                Toast.makeText(getContext(), &quot;Pick title/description for photo!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            else{\r\n                //create the gotten image class\r\n                String photoName = binding.photoDescription.getText().toString().trim();\r\n                String imageID = UUID.randomUUID().toString();\r\n                Image myImage = new Image(imageID, photoName, imageUri);\r\n\r\n                //bundle it\r\n                Gson gson = new Gson();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\r\n\r\n                //send the bundled image on it&#39;s way\r\n                NavController navController = Navigation.findNavController(view);\r\n                navController.navigate(R.id.ThirdFragment, bundle);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n}\r\n```\r\n\r\nImage class\r\n\r\n```\r\npackage Entities;\r\n\r\nimport android.net.Uri;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class Image implements Serializable{\r\n    private final String id;\r\n    private final Uri photo;\r\n    private final String imageName;\r\n\r\n    public Image(String id, String imageName, Uri photo) {\r\n        this.id = id;\r\n        this.imageName = imageName;\r\n        this.photo = photo;\r\n    }\r\n\r\n    public Uri getPhoto() {\r\n        return photo;\r\n    }\r\n\r\n    public String getImageName() {\r\n        return imageName;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n}\r\n```","title":"How to send data to already existing fragment","body":"<p>so I am trying to pass data from one fragment to another.\nThe navigation would be the following:\nfragment1 -&gt; fragment2 -&gt; fragment1\nessentially I am sending some data from fragment1 to fragment2 and after the user completes the data I want to send back, I am sending the completed data from fragment2 back to fragment1.</p>\n<p>To send data from fragment1 to fragment2 I am using(working code, data is recieved in fragment2):</p>\n<pre><code>                        //package image uri\n                        Bundle bundle = new Bundle();\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\n\n                        //navigate to image display and set title with parceled uri\n                        NavController navController = Navigation.findNavController(view);\n                        navController.navigate(R.id.pickedImageFragment, bundle);\n</code></pre>\n<p>To send data back from fragment2 to fragment1(not working code):</p>\n<pre><code>                //create the gotten image class\n                String photoName = binding.photoDescription.getText().toString().trim();\n                String imageID = UUID.randomUUID().toString();\n                Image myImage = new Image(imageID, photoName, imageUri);\n\n                //bundle it\n                Gson gson = new Gson();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\n\n                //send the bundled image on it's way\n                NavController navController = Navigation.findNavController(view);\n                navController.navigate(R.id.ThirdFragment, bundle);\n</code></pre>\n<p>And on he recieving end I have:</p>\n<pre><code>                Gson gson = new Gson();\n            \n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\n                    Log.d(&quot;test&quot;, myImage.getImageName());\n                    Log.d(&quot;test&quot;, myImage.getId());\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\n                }\n</code></pre>\n<p>I have also tried to use serialiseble for the Image class, still no result.</p>\n<p>complete code:</p>\n<p>fragment1:</p>\n<pre><code>package com.example.briefingaboutitapp;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.fragment.NavHostFragment;\n\nimport com.example.briefingaboutitapp.databinding.FragmentThirdBinding;\nimport com.google.gson.Gson;\n\nimport Entities.Image;\n\npublic class ThirdFragment extends Fragment {\n\n    private FragmentThirdBinding binding;\n\n    private ActivityResultLauncher&lt;String&gt; galleryLauncher;\n\n    @Override\n    public View onCreateView(\n            @NonNull LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n\n        binding = FragmentThirdBinding.inflate(inflater, container, false);\n        return binding.getRoot();\n\n    }\n\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        try {\n            Gson gson = new Gson();\n\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\n                    Log.d(&quot;test&quot;, myImage.getImageName());\n                    Log.d(&quot;test&quot;, myImage.getId());\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\n                }\n\n        }\n        catch (Exception e){\n            Log.d(&quot;test&quot;, &quot;image still null&quot;);\n        }\n\n        binding.returnToEditText.setOnClickListener(view1 -&gt; NavHostFragment.findNavController(ThirdFragment.this)\n                .navigate(R.id.action_ThirdFragment_to_SecondFragment));\n\n        Button photoPickerButton = view.findViewById(R.id.photo_picker_button);\n        galleryLauncher = registerForActivityResult(new ActivityResultContracts.GetContent(),\n                result -&gt; {\n                    if(result!= null){\n\n                        //package image uri\n                        Bundle bundle = new Bundle();\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\n\n                        //navigate to image display and set title with parceled uri\n                        NavController navController = Navigation.findNavController(view);\n                        navController.navigate(R.id.pickedImageFragment, bundle);\n                    }\n                    else{\n                        Toast.makeText(getContext(), &quot;Please select an image!&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n        photoPickerButton.setOnClickListener(view12 -&gt; galleryLauncher.launch(&quot;image/*&quot;));\n\n        binding.submitForm.setOnClickListener(view1 -&gt; {\n            Intent goToMainActivity = new Intent(getContext(), MainActivity.class);\n            this.startActivity(goToMainActivity);\n            Toast.makeText(this.getContext(),&quot;Article submitted successfully!&quot;,Toast.LENGTH_SHORT).show();\n\n        });\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n\n\n}\n</code></pre>\n<p>fragment2:</p>\n<pre><code>package com.example.briefingaboutitapp;\n\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\n\nimport com.example.briefingaboutitapp.databinding.FragmentPickedImageBinding;\nimport com.google.gson.Gson;\n\nimport java.util.UUID;\n\nimport Entities.Image;\n\npublic class PickedImageFragment extends Fragment {\n    private FragmentPickedImageBinding binding;\n    private Uri imageUri;\n\n    @Override\n    public View onCreateView(\n            @NonNull LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n\n        binding = FragmentPickedImageBinding.inflate(inflater, container, false);\n        return binding.getRoot();\n\n\n    }\n\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        this.imageUri = Uri.parse(requireArguments().getString(&quot;imageURI&quot;));\n\n        //get passed image\n        ImageView imageView = view.findViewById(R.id.image_view);\n        imageView.setImageURI(this.imageUri);\n\n\n        binding.submitMyPhotoButton.setOnClickListener(view1 -&gt; {\n            if(binding.photoDescription.getText().toString().trim().equals(&quot;&quot;)){\n                Toast.makeText(getContext(), &quot;Pick title/description for photo!&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else{\n                //create the gotten image class\n                String photoName = binding.photoDescription.getText().toString().trim();\n                String imageID = UUID.randomUUID().toString();\n                Image myImage = new Image(imageID, photoName, imageUri);\n\n                //bundle it\n                Gson gson = new Gson();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\n\n                //send the bundled image on it's way\n                NavController navController = Navigation.findNavController(view);\n                navController.navigate(R.id.ThirdFragment, bundle);\n            }\n        });\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n}\n</code></pre>\n<p>Image class</p>\n<pre><code>package Entities;\n\nimport android.net.Uri;\n\nimport java.io.Serializable;\n\npublic class Image implements Serializable{\n    private final String id;\n    private final Uri photo;\n    private final String imageName;\n\n    public Image(String id, String imageName, Uri photo) {\n        this.id = id;\n        this.imageName = imageName;\n        this.photo = photo;\n    }\n\n    public Uri getPhoto() {\n        return photo;\n    }\n\n    public String getImageName() {\n        return imageName;\n    }\n\n    public String getId() {\n        return id;\n    }\n}\n</code></pre>\n"},{"tags":["java","sorting","collections"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1355269189,"post_id":13830309,"comment_id":19034215,"body_markdown":"You don&#39;t have two threads; there&#39;s no concurrency (which is *really* what that exception was meant to guard). Even then ... *Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a best-effort basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness: the fail-fast behavior of iterators should be used only to detect bugs.*","body":"You don&#39;t have two threads; there&#39;s no concurrency (which is <i>really</i> what that exception was meant to guard). Even then ... <i>Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a best-effort basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness: the fail-fast behavior of iterators should be used only to detect bugs.</i>"},{"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"score":0,"creation_date":1355270098,"post_id":13830309,"comment_id":19034453,"body_markdown":"well you do get that Exception if you add an element to the list (in the same thread). It does not make sense to me why one would adding elements to the list an illegal operation, but chaning the list is not...","body":"well you do get that Exception if you add an element to the list (in the same thread). It does not make sense to me why one would adding elements to the list an illegal operation, but chaning the list is not..."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1355270957,"post_id":13830309,"comment_id":19034683,"body_markdown":"Because it isn&#39;t *structurally modifying* the `List`, the nodes that make up the list are all still there and they haven&#39;t even changed order. Your iterator isn&#39;t affected by a value(s) contained in the nodes changing. In short, it&#39;s  really not meant to protect you from yourself.","body":"Because it isn&#39;t <i>structurally modifying</i> the <code>List</code>, the nodes that make up the list are all still there and they haven&#39;t even changed order. Your iterator isn&#39;t affected by a value(s) contained in the nodes changing. In short, it&#39;s  really not meant to protect you from yourself."},{"owner":{"account_id":7059566,"reputation":303,"user_id":5405434,"display_name":"Philippe Cloutier"},"score":0,"creation_date":1679436342,"post_id":13830309,"comment_id":133721670,"body_markdown":"The behavior you describe is implementation-specific. You should indicate the JRE you were using (probably Java 6).","body":"The behavior you describe is implementation-specific. You should indicate the JRE you were using (probably Java 6)."}],"answers":[{"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1679439190,"creation_date":1355269027,"answer_id":13830344,"question_id":13830309,"body_markdown":"**Update: This answer was written for Java 6. With [JDK 8u20&#39;s Collection.sort now deferring to List.sort][1], Java 8+ now *does* throw an exception, although as pointed out by Brian Roach, it still doesn&#39;t provide any guarantee to that effect.**\r\n\r\nWhy would it throw `ConcurrentModificationException` when you are not adding/removing elements from your collection while iterating?\r\n\r\nNote that `ConcurrentModificationException` would only occur when a new element is added in to your collection or remove from your collection while iterating. i.e., when your Collection is Structurally modified.\r\n\r\n&gt; (Structural modifications are those that change the size of this list,\r\n&gt; or otherwise perturb it in such a fashion that iterations in progress\r\n&gt; may yield incorrect results.)\r\n\r\nsort wouldn&#39;t structurally modify your Collection, all it does is modify the order.\r\nBelow code would throw `ConcurrentModificationException` as it add&#39;s an extra element into the collection while iterating.\r\n\r\n    for(Integer num : my_list) {\r\n        my_list.add(12);\r\n        }\r\n\r\nIf you look at the source of the `sort` method in the [Collections][2] class, it&#39;s not throwing `ConcurrentModificationException`.\r\n\r\n&gt; This implementation dumps the specified list into an array, sorts the\r\n&gt; array, and iterates over the list resetting each element from the\r\n&gt; corresponding position in the array. This avoids the n2 log(n)\r\n&gt; performance that would result from attempting to sort a linked list in\r\n&gt; place.\r\n\r\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list) {\r\n            Object[] a = list.toArray();\r\n            Arrays.sort(a);\r\n            ListIterator&lt;T&gt; i = list.listIterator();\r\n            for (int j=0; j&lt;a.length; j++) {\r\n                i.next();\r\n                i.set((T)a[j]);\r\n            }\r\n        }\r\n\r\nExtract from the book [java Generics and Collections][3]:\r\n----------------------------------------------------\r\n\r\n \r\n\r\n&gt; The policy of the iterators for the Java 2 collections is to fail\r\n&gt; fast, as described in Section 11.1: every time they access the backing\r\n&gt; collection, they check it for structural modification (which, in\r\n&gt; general, means that elements have been added or removed from the\r\n&gt; collection). If they detect structural modification, they fail\r\n&gt; immediately, throwing ConcurrentModificationException rather than\r\n&gt; continuing to attempt to iterate over the modified collection with\r\n&gt; unpredictable results.\r\n\r\n\r\n  [1]: https://medium.com/@edouard.kaiser/collections-sort-the-java8u20-modification-d6a9acf96861\r\n  [2]: https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Collections.java#L153\r\n  [3]: http://shop.oreilly.com/product/9780596527754.do","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p><strong>Update: This answer was written for Java 6. With <a href=\"https://medium.com/@edouard.kaiser/collections-sort-the-java8u20-modification-d6a9acf96861\" rel=\"nofollow noreferrer\">JDK 8u20's Collection.sort now deferring to List.sort</a>, Java 8+ now <em>does</em> throw an exception, although as pointed out by Brian Roach, it still doesn't provide any guarantee to that effect.</strong></p>\n<p>Why would it throw <code>ConcurrentModificationException</code> when you are not adding/removing elements from your collection while iterating?</p>\n<p>Note that <code>ConcurrentModificationException</code> would only occur when a new element is added in to your collection or remove from your collection while iterating. i.e., when your Collection is Structurally modified.</p>\n<blockquote>\n<p>(Structural modifications are those that change the size of this list,\nor otherwise perturb it in such a fashion that iterations in progress\nmay yield incorrect results.)</p>\n</blockquote>\n<p>sort wouldn't structurally modify your Collection, all it does is modify the order.\nBelow code would throw <code>ConcurrentModificationException</code> as it add's an extra element into the collection while iterating.</p>\n<pre><code>for(Integer num : my_list) {\n    my_list.add(12);\n    }\n</code></pre>\n<p>If you look at the source of the <code>sort</code> method in the <a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Collections.java#L153\" rel=\"nofollow noreferrer\">Collections</a> class, it's not throwing <code>ConcurrentModificationException</code>.</p>\n<blockquote>\n<p>This implementation dumps the specified list into an array, sorts the\narray, and iterates over the list resetting each element from the\ncorresponding position in the array. This avoids the n2 log(n)\nperformance that would result from attempting to sort a linked list in\nplace.</p>\n</blockquote>\n<pre><code>public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list) {\n        Object[] a = list.toArray();\n        Arrays.sort(a);\n        ListIterator&lt;T&gt; i = list.listIterator();\n        for (int j=0; j&lt;a.length; j++) {\n            i.next();\n            i.set((T)a[j]);\n        }\n    }\n</code></pre>\n<h2>Extract from the book <a href=\"http://shop.oreilly.com/product/9780596527754.do\" rel=\"nofollow noreferrer\">java Generics and Collections</a>:</h2>\n<blockquote>\n<p>The policy of the iterators for the Java 2 collections is to fail\nfast, as described in Section 11.1: every time they access the backing\ncollection, they check it for structural modification (which, in\ngeneral, means that elements have been added or removed from the\ncollection). If they detect structural modification, they fail\nimmediately, throwing ConcurrentModificationException rather than\ncontinuing to attempt to iterate over the modified collection with\nunpredictable results.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1355271875,"creation_date":1355271016,"answer_id":13830695,"question_id":13830309,"body_markdown":"Speaking of functionality I don&#39;t see why it should not throw `ConcurrentModificationException`. But according to documentation the iterator throws the exception when it notices structural modification and structural modification is [defined][1] as:\r\n\r\n&gt; Structural modifications are those that change the size of the list,\r\n&gt; or otherwise perturb it in such a fashion that iterations in progress\r\n&gt; may yield incorrect results.\r\n\r\nI think there is an argument for claiming that `sort` rearranging the elements causes the iterator to yield wrong results, but I haven&#39;t checked what are right results for iterator defined to be.\r\n\r\nSpeaking of implementation, it is easy to see why it does not: See the source for [ArrayList] [2] and [Collections][3]:\r\n\r\n- `ArrayList.modCount` changes with the so called structural modifications\r\n- `ListItr` methods make a copy of its value in `init` and check that it hasn&#39;t changed in its methods\r\n- `Collections.sort` calls `ListItr.set` which calls `ArratList.set`. This last method does not increment `modCount`\r\n\r\nSo `ListItr.next()` sees the same `modCount` and no exception is thrown. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#modCount\r\n  [2]: http://www.docjar.com/html/api/java/util/ArrayList.java.html\r\n  [3]: http://www.docjar.com/html/api/java/util/Collections.java.html","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>Speaking of functionality I don't see why it should not throw <code>ConcurrentModificationException</code>. But according to documentation the iterator throws the exception when it notices structural modification and structural modification is <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#modCount\" rel=\"nofollow\">defined</a> as:</p>\n\n<blockquote>\n  <p>Structural modifications are those that change the size of the list,\n  or otherwise perturb it in such a fashion that iterations in progress\n  may yield incorrect results.</p>\n</blockquote>\n\n<p>I think there is an argument for claiming that <code>sort</code> rearranging the elements causes the iterator to yield wrong results, but I haven't checked what are right results for iterator defined to be.</p>\n\n<p>Speaking of implementation, it is easy to see why it does not: See the source for <a href=\"http://www.docjar.com/html/api/java/util/ArrayList.java.html\" rel=\"nofollow\">ArrayList</a> and <a href=\"http://www.docjar.com/html/api/java/util/Collections.java.html\" rel=\"nofollow\">Collections</a>:</p>\n\n<ul>\n<li><code>ArrayList.modCount</code> changes with the so called structural modifications</li>\n<li><code>ListItr</code> methods make a copy of its value in <code>init</code> and check that it hasn't changed in its methods</li>\n<li><code>Collections.sort</code> calls <code>ListItr.set</code> which calls <code>ArratList.set</code>. This last method does not increment <code>modCount</code></li>\n</ul>\n\n<p>So <code>ListItr.next()</code> sees the same <code>modCount</code> and no exception is thrown. </p>\n"},{"tags":[],"owner":{"account_id":5182587,"reputation":8980,"user_id":4147849,"accept_rate":50,"display_name":"Muntashir Akon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595236772,"creation_date":1595236772,"answer_id":62992301,"question_id":13830309,"body_markdown":"For Android, it depends on API versions. From API 26, `Collections#sort(List&lt;T&gt;, Comparator&lt;? super T&gt;)` actually calls `List#sort(Comparator&lt;? super E&gt;)`. So, if you sort `ArrayList`, you can get **ConcurrentModificationException** depending on whether you&#39;ve modified the list in another thread. Here&#39;s the source code from `java/util/ArrayList.java` that throws the exception:\r\n\r\n\r\n    public void sort(Comparator&lt;? super E&gt; c) {\r\n        final int expectedModCount = modCount;\r\n        Arrays.sort((E[]) elementData, 0, size, c);\r\n        if (modCount != expectedModCount) {\r\n            throw new ConcurrentModificationException();\r\n        }\r\n        modCount++;\r\n    }\r\n","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>For Android, it depends on API versions. From API 26, <code>Collections#sort(List&lt;T&gt;, Comparator&lt;? super T&gt;)</code> actually calls <code>List#sort(Comparator&lt;? super E&gt;)</code>. So, if you sort <code>ArrayList</code>, you can get <strong>ConcurrentModificationException</strong> depending on whether you've modified the list in another thread. Here's the source code from <code>java/util/ArrayList.java</code> that throws the exception:</p>\n<pre><code>public void sort(Comparator&lt;? super E&gt; c) {\n    final int expectedModCount = modCount;\n    Arrays.sort((E[]) elementData, 0, size, c);\n    if (modCount != expectedModCount) {\n        throw new ConcurrentModificationException();\n    }\n    modCount++;\n}\n</code></pre>\n"}],"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4669,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":13830344,"answer_count":3,"score":7,"last_activity_date":1679439190,"creation_date":1355268860,"question_id":13830309,"body_markdown":"I stumbled over this odd bug. Seems like `Collections.sort()` does not modify the sorted list in a way that enables a detection of concurrent modifications when also iterating over the same list. Example code:\r\n\r\n\t\tList&lt;Integer&gt; my_list = new ArrayList&lt;Integer&gt;();\r\n\r\n\t\tmy_list.add(2);\r\n\t\tmy_list.add(1);\r\n\r\n\t\tfor (Integer num : my_list) {\r\n\r\n\t\t\t/*\r\n\t\t\t * print list\r\n\t\t\t */\r\n\t\t\tStringBuilder sb = new StringBuilder();\r\n\t\t\tfor (Integer i : my_list)\r\n\t\t\t\tsb.append(i).append(&quot;,&quot;);\r\n\t\t\tSystem.out.println(&quot;List: &quot; + sb.toString());\r\n\r\n\t\t\t/*\r\n\t\t\t * sort list\r\n\t\t\t */\r\n\t\t\tSystem.out.println(&quot;CurrentElement: &quot; + num);\r\n\t\t\tCollections.sort(my_list);\r\n\t\t}\r\n\r\n\r\noutputs\r\n\r\n    List: 2,1,\r\n    CurrentElement: 2\r\n    List: 1,2,\r\n    CurrentElement: 2\r\n\r\nOne would expect a `ConcurrentModificationException`, but it is not being raised and the code works although it shouldn&#39;t.\r\n","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>I stumbled over this odd bug. Seems like <code>Collections.sort()</code> does not modify the sorted list in a way that enables a detection of concurrent modifications when also iterating over the same list. Example code:</p>\n\n<pre><code>    List&lt;Integer&gt; my_list = new ArrayList&lt;Integer&gt;();\n\n    my_list.add(2);\n    my_list.add(1);\n\n    for (Integer num : my_list) {\n\n        /*\n         * print list\n         */\n        StringBuilder sb = new StringBuilder();\n        for (Integer i : my_list)\n            sb.append(i).append(\",\");\n        System.out.println(\"List: \" + sb.toString());\n\n        /*\n         * sort list\n         */\n        System.out.println(\"CurrentElement: \" + num);\n        Collections.sort(my_list);\n    }\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>List: 2,1,\nCurrentElement: 2\nList: 1,2,\nCurrentElement: 2\n</code></pre>\n\n<p>One would expect a <code>ConcurrentModificationException</code>, but it is not being raised and the code works although it shouldn't.</p>\n"},{"tags":["java","awaitility"],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679438990,"creation_date":1679438990,"answer_id":75807022,"question_id":75806721,"body_markdown":"This is a misunderstanding of the API.\r\n\r\nThe [documentation for `atLeast`](https://github.com/awaitility/awaitility/wiki/Usage#at-least) says:\r\n\r\n&gt; In case the condition is fulfilled before the duration specified by `atLeast` an exception is thrown indicating that the condition shouldn&#39;t be completed earlier than the specified duration.\r\n\r\nIn other words, this test asserts that the condition shouldn&#39;t return `true` before 500 milliseconds have passed — that it should take _more than_ half a second to run — but the condition returns `true` immediately.\r\n\r\nIf you&#39;re trying to assert that the condition returns true in _less than_ 500 milliseconds (the much more common case) you want to use `atMost` instead of `atLeast`.\r\n\r\nIf you&#39;re simply trying to insert a 500ms pause, `Thread.sleep` is a perfectly fine way to do it.","title":"Not waiting the minimum stipulated wait time","body":"<p>This is a misunderstanding of the API.</p>\n<p>The <a href=\"https://github.com/awaitility/awaitility/wiki/Usage#at-least\" rel=\"nofollow noreferrer\">documentation for <code>atLeast</code></a> says:</p>\n<blockquote>\n<p>In case the condition is fulfilled before the duration specified by <code>atLeast</code> an exception is thrown indicating that the condition shouldn't be completed earlier than the specified duration.</p>\n</blockquote>\n<p>In other words, this test asserts that the condition shouldn't return <code>true</code> before 500 milliseconds have passed — that it should take <em>more than</em> half a second to run — but the condition returns <code>true</code> immediately.</p>\n<p>If you're trying to assert that the condition returns true in <em>less than</em> 500 milliseconds (the much more common case) you want to use <code>atMost</code> instead of <code>atLeast</code>.</p>\n<p>If you're simply trying to insert a 500ms pause, <code>Thread.sleep</code> is a perfectly fine way to do it.</p>\n"}],"owner":{"account_id":3383678,"reputation":4957,"user_id":2840178,"accept_rate":88,"display_name":"kar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679438990,"creation_date":1679436221,"question_id":75806721,"body_markdown":"The following test works when I use `Thread.sleep()`.\r\n\r\n      @Test\r\n      public void closeableTimer() throws InterruptedException {\r\n        Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\r\n        Assertions.assertThat(timer.count()).isEqualTo(0);\r\n        Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\r\n        try (Timer.Timed sample = timer.start()) {\r\n          Thread.sleep(500L);\r\n        }\r\n        Assertions.assertThat(timer.count()).isEqualTo(1);\r\n        Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\r\n      } \r\n\r\nBut if I use `Awaitility` instead for same test, it throws following error. Why? The code using `Awaitility` is using `atLeast(500 ms)`.\r\n\r\n&gt;   Condition was evaluated in 108 milliseconds which is earlier than\r\n&gt; expected minimum timeout 500 milliseconds   \r\n&gt; org.awaitility.core.ConditionTimeoutException\r\n\r\n      @Test\r\n      public void closeableTimer() {\r\n        Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\r\n        Assertions.assertThat(timer.count()).isEqualTo(0);\r\n        Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\r\n        try (Timer.Timed ignored = timer.start()) {\r\n          await().atLeast(Duration.ofMillis(500L)).until(() -&gt; true);\r\n        }\r\n        Assertions.assertThat(timer.count()).isEqualTo(1);\r\n        Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\r\n      }","title":"Not waiting the minimum stipulated wait time","body":"<p>The following test works when I use <code>Thread.sleep()</code>.</p>\n<pre><code>  @Test\n  public void closeableTimer() throws InterruptedException {\n    Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\n    Assertions.assertThat(timer.count()).isEqualTo(0);\n    Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\n    try (Timer.Timed sample = timer.start()) {\n      Thread.sleep(500L);\n    }\n    Assertions.assertThat(timer.count()).isEqualTo(1);\n    Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\n  } \n</code></pre>\n<p>But if I use <code>Awaitility</code> instead for same test, it throws following error. Why? The code using <code>Awaitility</code> is using <code>atLeast(500 ms)</code>.</p>\n<blockquote>\n<p>Condition was evaluated in 108 milliseconds which is earlier than\nexpected minimum timeout 500 milliseconds<br />\norg.awaitility.core.ConditionTimeoutException</p>\n</blockquote>\n<pre><code>  @Test\n  public void closeableTimer() {\n    Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\n    Assertions.assertThat(timer.count()).isEqualTo(0);\n    Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\n    try (Timer.Timed ignored = timer.start()) {\n      await().atLeast(Duration.ofMillis(500L)).until(() -&gt; true);\n    }\n    Assertions.assertThat(timer.count()).isEqualTo(1);\n    Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\n  }\n</code></pre>\n"},{"tags":["java","chronicle-queue"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679438856,"creation_date":1679438856,"answer_id":75807009,"question_id":73931234,"body_markdown":"1. In simple cases, using a Chronicle Map is fine.\r\n\r\n2. You can periodically look at the last modified date or read the date in the file name to check if a file can be deleted. The listener is more useful if you want to act as soon as possible.\r\n\r\n3. You can remove excerpts from a file by copying the excerpts you want to keep and replacing the original file. You can remove write or read access from the file. \r\nIt is probably simpler to wait until you can delete it.","title":"Queries for chronical queues when used as audit log","body":"<ol>\n<li><p>In simple cases, using a Chronicle Map is fine.</p>\n</li>\n<li><p>You can periodically look at the last modified date or read the date in the file name to check if a file can be deleted. The listener is more useful if you want to act as soon as possible.</p>\n</li>\n<li><p>You can remove excerpts from a file by copying the excerpts you want to keep and replacing the original file. You can remove write or read access from the file.\nIt is probably simpler to wait until you can delete it.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":9563776,"reputation":145,"user_id":7103688,"accept_rate":17,"display_name":"RGoyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679438856,"creation_date":1664772945,"question_id":73931234,"body_markdown":"I am evaluating option of using chronicle-queues for storing the audit events and  relaying events.\r\n\r\nApplication should have functionality to replay data from any random point with in a given file, and read relevant data and close he trailer itself.\r\n\r\nApplication can have multiple trailers at any given time depending on criteria.\r\n\r\n\r\n1) While writing the data to appender, we get index using \r\n\r\n       try (DocumentContext dc = appender.writingDocument()) {\r\n\r\n                    dc.wire().write(&quot;hello&quot;).text(&quot;world &quot; + (i++));\r\n\r\n                    long indexWritten = dc.index();\r\n\r\n                    System.out.println(&quot;indexWritten = &quot; + indexWritten);\r\n\r\n       }\r\n\r\n   I can store these indices in chronical map or some shared storage.\r\nIs there any better way to retrieve index for any data ?\r\n\r\n2) I wanted to delete files after certain duration, and we can use StoreListener or FileStore for calculating the file.\r\nCan someone please provide concrete example for the same or is there any better approach that can be used ?\r\n\r\n3) Instead of removing full file, is there any way to remove some data from file or mark it as unreadable \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Queries for chronical queues when used as audit log","body":"<p>I am evaluating option of using chronicle-queues for storing the audit events and  relaying events.</p>\n<p>Application should have functionality to replay data from any random point with in a given file, and read relevant data and close he trailer itself.</p>\n<p>Application can have multiple trailers at any given time depending on criteria.</p>\n<ol>\n<li><p>While writing the data to appender, we get index using</p>\n<pre><code>try (DocumentContext dc = appender.writingDocument()) {\n\n             dc.wire().write(&quot;hello&quot;).text(&quot;world &quot; + (i++));\n\n             long indexWritten = dc.index();\n\n             System.out.println(&quot;indexWritten = &quot; + indexWritten);\n\n}\n</code></pre>\n<p>I can store these indices in chronical map or some shared storage.\nIs there any better way to retrieve index for any data ?</p>\n</li>\n<li><p>I wanted to delete files after certain duration, and we can use StoreListener or FileStore for calculating the file.\nCan someone please provide concrete example for the same or is there any better approach that can be used ?</p>\n</li>\n<li><p>Instead of removing full file, is there any way to remove some data from file or mark it as unreadable</p>\n</li>\n</ol>\n"},{"tags":["java","ssl","handshake","jsse","socketchannel"],"comments":[{"owner":{"account_id":2270349,"reputation":1219,"user_id":1997949,"accept_rate":83,"display_name":"Michael"},"score":0,"creation_date":1679590504,"post_id":75806996,"comment_id":133752712,"body_markdown":"Can you explain about why are you trying to implement this?","body":"Can you explain about why are you trying to implement this?"}],"owner":{"account_id":26169178,"reputation":21,"user_id":21033616,"display_name":"Theodore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679438756,"creation_date":1679438756,"question_id":75806996,"body_markdown":"I&#39;m struggling to understand how to establish secure communication (the handshake) between a client and server using the JSSE library. \r\n\r\nI&#39;ve read the documentation and have understood the first few parts partially:\r\n\r\n1) create an SSLContext - understood\r\n\r\n2) use the SSLContext to construct an SSLEngine - also understood\r\n\r\n3) using the SSLEngine, begin handshake - this is where I am having problems.\r\n\r\nNow I understand that there are two variables whose cases we have to go through in order to go through the steps of the handshake (the SSLEngineResult.Status, and the SSLEngineResult.HandshakeStatus.)\r\n\r\nI understand how to handle the cases for SSLEngineResult.Status but I am having a hard time understanding how to handle the various cases for the Handshake status. \r\n\r\nFor example, when the handshake status case is NEED_WRAP, I understand that some data needs to be wrapped and sent over to the peer, however, what I am struggling to understand is what data needs to be wrapped to be sent over to the peer. \r\n\r\nHere is the code example that the documentation provides, \r\n\r\n```\r\ncase NEED_WRAP :\r\n// Empty the local network packet buffer.\r\nmyNetData.clear();\r\n\r\n// Generate handshaking data\r\nres = engine.wrap(myAppData, myNetData);\r\nhs = res.getHandshakeStatus();\r\n\r\n// Check status\r\nswitch (res.getStatus()) {\r\ncase OK :\r\nmyNetData.flip();\r\n\r\n// Send the handshaking data to peer\r\nwhile (myNetData.hasRemaining()) {\r\nsocketChannel.write(myNetData);\r\n}\r\nbreak;\r\n\r\n// Handle other status:  BUFFER_OVERFLOW, BUFFER_UNDERFLOW, CLOSED\r\n...\r\n}\r\nbreak;\r\n```\r\n\r\nMy question is, for the commented line &quot;//Generate handshaking data&quot; what data do I have to provide so that the handshake may continue?\r\n\r\nThe line engine.wrap(myAppData, myNetData); is essentially doing nothing in this particular snippet of code assuming the myAppData ByteBuffer is empty (which it is), so what do I need to populate the myAppData ByteBuffer with in order for the handshake to continue? \r\n\r\nMy intuition is telling me that running this code without having any data passed into the myAppData ByteBuffer will result in the handshake never completing. Is it possible that I don&#39;t need to pass any data at all and that the handshaking data is automatically passed even with an empty Byteb\\Buffer being used in the wrap method as a source? \r\n\r\n\r\n","title":"How to properly handshake in java using nonblocking socketchannels from the JSSE library?","body":"<p>I'm struggling to understand how to establish secure communication (the handshake) between a client and server using the JSSE library.</p>\n<p>I've read the documentation and have understood the first few parts partially:</p>\n<ol>\n<li><p>create an SSLContext - understood</p>\n</li>\n<li><p>use the SSLContext to construct an SSLEngine - also understood</p>\n</li>\n<li><p>using the SSLEngine, begin handshake - this is where I am having problems.</p>\n</li>\n</ol>\n<p>Now I understand that there are two variables whose cases we have to go through in order to go through the steps of the handshake (the SSLEngineResult.Status, and the SSLEngineResult.HandshakeStatus.)</p>\n<p>I understand how to handle the cases for SSLEngineResult.Status but I am having a hard time understanding how to handle the various cases for the Handshake status.</p>\n<p>For example, when the handshake status case is NEED_WRAP, I understand that some data needs to be wrapped and sent over to the peer, however, what I am struggling to understand is what data needs to be wrapped to be sent over to the peer.</p>\n<p>Here is the code example that the documentation provides,</p>\n<pre><code>case NEED_WRAP :\n// Empty the local network packet buffer.\nmyNetData.clear();\n\n// Generate handshaking data\nres = engine.wrap(myAppData, myNetData);\nhs = res.getHandshakeStatus();\n\n// Check status\nswitch (res.getStatus()) {\ncase OK :\nmyNetData.flip();\n\n// Send the handshaking data to peer\nwhile (myNetData.hasRemaining()) {\nsocketChannel.write(myNetData);\n}\nbreak;\n\n// Handle other status:  BUFFER_OVERFLOW, BUFFER_UNDERFLOW, CLOSED\n...\n}\nbreak;\n</code></pre>\n<p>My question is, for the commented line &quot;//Generate handshaking data&quot; what data do I have to provide so that the handshake may continue?</p>\n<p>The line engine.wrap(myAppData, myNetData); is essentially doing nothing in this particular snippet of code assuming the myAppData ByteBuffer is empty (which it is), so what do I need to populate the myAppData ByteBuffer with in order for the handshake to continue?</p>\n<p>My intuition is telling me that running this code without having any data passed into the myAppData ByteBuffer will result in the handshake never completing. Is it possible that I don't need to pass any data at all and that the handshaking data is automatically passed even with an empty Byteb\\Buffer being used in the wrap method as a source?</p>\n"},{"tags":["java","android","kotlin","button","modifier"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1679422211,"post_id":75804900,"comment_id":133718506,"body_markdown":"Can you post the exact error message you&#39;re getting and where?","body":"Can you post the exact error message you&#39;re getting and where?"},{"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"score":0,"creation_date":1679422336,"post_id":75804900,"comment_id":133718537,"body_markdown":"None of the following functions can be called with the arguments supplied.\nModifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.ColumnScopeInstance\nModifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.RowScopeInstance","body":"None of the following functions can be called with the arguments supplied. Modifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.ColumnScopeInstance Modifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.RowScopeInstance"},{"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"score":0,"creation_date":1679422515,"post_id":75804900,"comment_id":133718587,"body_markdown":"This error occurs in the ButtonMain() method. with the weight modifier","body":"This error occurs in the ButtonMain() method. with the weight modifier"}],"answers":[{"tags":[],"owner":{"account_id":17897467,"reputation":389,"user_id":13002482,"display_name":"Serge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679437803,"creation_date":1679437803,"answer_id":75806902,"question_id":75804900,"body_markdown":"The weight modifier you&#39;re using in ButtonMain is only available in ColumnScope or RowScope. What you need to do is pass the scope to ButtonMain. You can do that easily by making it an extension function of the ColumnScope, like so:\r\n\r\n    @Composable\r\n    fun ColumnScope.ButtonMain() {\r\n        ...\r\n    }","title":"None of the following functions can be called with the arguments supplied. Compose","body":"<p>The weight modifier you're using in ButtonMain is only available in ColumnScope or RowScope. What you need to do is pass the scope to ButtonMain. You can do that easily by making it an extension function of the ColumnScope, like so:</p>\n<pre><code>@Composable\nfun ColumnScope.ButtonMain() {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1679437803,"creation_date":1679422044,"question_id":75804900,"body_markdown":"I can&#39;t figure out what the problem is. I&#39;m trying to create a button, but one of the modifier attributes doesn&#39;t work, I tried wrapping it in a column, but it doesn&#39;t help.\r\n\r\n```\r\nclass MainActivity : ComponentActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContent {\r\n\r\n        }\r\n    }\r\n}\r\n\r\n@Preview\r\n@Composable\r\nfun Greeting() {\r\n    val context = LocalContext.current\r\n\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.Blue)\r\n            .padding(0.dp, 0.dp, 0.dp, 28.dp),\r\n        verticalArrangement = Arrangement.SpaceEvenly\r\n    ) {\r\n\r\n        TextPlayList(str = R.string.main_text_Playlist_Maker)\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SearchMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 0.dp, 15.dp, 8.dp)\r\n        )\r\n\r\n        {\r\n            IconButton(R.drawable.ic_search_main)\r\n            TextButton(str = R.string.main_button_search)\r\n        }\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, MediaActivity::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 8.dp, 15.dp, 8.dp)\r\n        )\r\n        {\r\n            IconButton(R.drawable.ic_media_main)\r\n            TextButton(str = R.string.main_button_media)\r\n        }\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\r\n        )\r\n        {\r\n            IconButton(R.drawable.ic_setting_main)\r\n            TextButton(str = R.string.main_button_setting)\r\n\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n@Composable\r\nfun ButtonMain() {\r\n    val context = LocalContext.current\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .weight(1f, false)\r\n                .fillMaxWidth()\r\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\r\n        ) {\r\n            IconButton(draw = R.drawable.ic_setting_main)\r\n            TextButton(str = R.string.main_button_setting)\r\n        }\r\n\r\n}\r\n\r\n\r\n@Composable\r\nfun IconButton(draw: Int) {\r\n    Icon(\r\n        painter = painterResource(id = draw),\r\n        &quot;Setting&quot;,\r\n        Modifier.padding(10.dp),\r\n        tint = Color.Black\r\n    )\r\n}\r\n\r\n@Composable\r\nfun TextButton(str: Int) {\r\n    Text(\r\n        text = stringResource(id = str),\r\n        fontSize = 22.sp, color = Color.Black\r\n    )\r\n}\r\n\r\n@Composable\r\nfun TextPlayList(str: Int) {\r\n    Text(\r\n        text = stringResource(id = str),\r\n        fontSize = 22.sp,\r\n        color = Color.White,\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .padding(16.dp, 14.dp, 210.dp, 40.dp)\r\n    )\r\n}\r\n\r\n```\r\n\r\n\r\nI tried to solve the problem like this, but it turns out not what I need.\r\nhttps://stackoverflow.com/questions/73271265/modifier-weight-not-available-in-jetpack-compose-1-1-1","title":"None of the following functions can be called with the arguments supplied. Compose","body":"<p>I can't figure out what the problem is. I'm trying to create a button, but one of the modifier attributes doesn't work, I tried wrapping it in a column, but it doesn't help.</p>\n<pre><code>class MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n\n        }\n    }\n}\n\n@Preview\n@Composable\nfun Greeting() {\n    val context = LocalContext.current\n\n    Column(\n        modifier = Modifier\n            .fillMaxSize()\n            .background(Color.Blue)\n            .padding(0.dp, 0.dp, 0.dp, 28.dp),\n        verticalArrangement = Arrangement.SpaceEvenly\n    ) {\n\n        TextPlayList(str = R.string.main_text_Playlist_Maker)\n\n        Button(\n            onClick = { context.startActivity(Intent(context, SearchMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 0.dp, 15.dp, 8.dp)\n        )\n\n        {\n            IconButton(R.drawable.ic_search_main)\n            TextButton(str = R.string.main_button_search)\n        }\n\n        Button(\n            onClick = { context.startActivity(Intent(context, MediaActivity::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 8.dp, 15.dp, 8.dp)\n        )\n        {\n            IconButton(R.drawable.ic_media_main)\n            TextButton(str = R.string.main_button_media)\n        }\n\n        Button(\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\n        )\n        {\n            IconButton(R.drawable.ic_setting_main)\n            TextButton(str = R.string.main_button_setting)\n\n        }\n    }\n\n}\n\n\n@Composable\nfun ButtonMain() {\n    val context = LocalContext.current\n        Button(\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .weight(1f, false)\n                .fillMaxWidth()\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\n        ) {\n            IconButton(draw = R.drawable.ic_setting_main)\n            TextButton(str = R.string.main_button_setting)\n        }\n\n}\n\n\n@Composable\nfun IconButton(draw: Int) {\n    Icon(\n        painter = painterResource(id = draw),\n        &quot;Setting&quot;,\n        Modifier.padding(10.dp),\n        tint = Color.Black\n    )\n}\n\n@Composable\nfun TextButton(str: Int) {\n    Text(\n        text = stringResource(id = str),\n        fontSize = 22.sp, color = Color.Black\n    )\n}\n\n@Composable\nfun TextPlayList(str: Int) {\n    Text(\n        text = stringResource(id = str),\n        fontSize = 22.sp,\n        color = Color.White,\n        modifier = Modifier\n            .fillMaxWidth()\n            .padding(16.dp, 14.dp, 210.dp, 40.dp)\n    )\n}\n\n</code></pre>\n<p>I tried to solve the problem like this, but it turns out not what I need.\n<a href=\"https://stackoverflow.com/questions/73271265/modifier-weight-not-available-in-jetpack-compose-1-1-1\">Modifier weight not available in jetpack compose 1.1.1</a></p>\n"},{"tags":["java","javafx","netbeans"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1679409253,"post_id":75802500,"comment_id":133714376,"body_markdown":"have a look at the javafx tag wiki, it has a whole block of FAQs on how to deploy","body":"have a look at the javafx tag wiki, it has a whole block of FAQs on how to deploy"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1679425957,"post_id":75802500,"comment_id":133719536,"body_markdown":"Specifically see the [packaging section](https://stackoverflow.com/tags/javafx/info).","body":"Specifically see the <a href=\"https://stackoverflow.com/tags/javafx/info\">packaging section</a>."}],"owner":{"account_id":28076249,"reputation":1,"user_id":21448057,"display_name":"Andrea DWS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679437714,"creation_date":1679408933,"question_id":75802500,"body_markdown":"I&#39;ve been developing a JavaFX project ( version 15 ) with Maven inside Netbeans version 16.\r\nWhen I build my project a jar file is created in the target folder, but I cannot open the JAR file.\r\n\r\n[Result folder after build](https://i.stack.imgur.com/v0kpV.png)\r\n\r\nHere it is my pom.fxl file:\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.desktop&lt;/groupId&gt;\r\n    &lt;artifactId&gt;MyProject&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;15&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\r\n            &lt;version&gt;11.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;3.40.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;19-ea+8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;15&lt;/release&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.4&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.desktop.healtydesk.App&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running --&gt;\r\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for manual attach debugging --&gt;\r\n                        &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\r\n                        &lt;id&gt;debug&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for automatic IDE debugging --&gt;\r\n                        &lt;id&gt;ide-debug&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for automatic IDE profiling --&gt;\r\n                        &lt;id&gt;ide-profile&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;         \r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThe jar doesn&#39;t run no matter how I run it, I&#39;ve tried to build a &quot;fat jar&quot; but still, I have the same issue.","title":"How to build and release a JavaFX maven project inside NetBeans?","body":"<p>I've been developing a JavaFX project ( version 15 ) with Maven inside Netbeans version 16.\nWhen I build my project a jar file is created in the target folder, but I cannot open the JAR file.</p>\n<p><a href=\"https://i.stack.imgur.com/v0kpV.png\" rel=\"nofollow noreferrer\">Result folder after build</a></p>\n<p>Here it is my pom.fxl file:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.desktop&lt;/groupId&gt;\n    &lt;artifactId&gt;MyProject&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;15&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\n            &lt;version&gt;11.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.40.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;19-ea+8&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;15&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.desktop.healtydesk.App&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for manual attach debugging --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\n                        &lt;id&gt;debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE debugging --&gt;\n                        &lt;id&gt;ide-debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE profiling --&gt;\n                        &lt;id&gt;ide-profile&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;         \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The jar doesn't run no matter how I run it, I've tried to build a &quot;fat jar&quot; but still, I have the same issue.</p>\n"},{"tags":["java","querydsl"],"answers":[{"tags":[],"owner":{"account_id":27604979,"reputation":54,"user_id":21069312,"display_name":"Reza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679437517,"creation_date":1679437517,"answer_id":75806870,"question_id":75806464,"body_markdown":"I am not an expert with QueryDSL but I believe something like this or similar using JPAQueryFactory could do it.\r\n\r\n    Map&lt;Long, Long&gt; entityMap = new JPAQueryFactory(entityManager)\r\n    .select(qE2.qE1.id, qE2.count())\r\n    .from(qE2)\r\n    .join(qE2.qE1)\r\n    .where(qE1_exp)\r\n    .groupBy(qE2.qE1.id)\r\n    .fetch()\r\n    .stream()\r\n    .collect(Collectors.toMap(\r\n        tuple -&gt; tuple.get(qE2.qE1.id),\r\n        tuple -&gt; tuple.get(qE2.count())\r\n    ));","title":"How with QueryDSL get the map of ids of one entity and the numbers of associated entities","body":"<p>I am not an expert with QueryDSL but I believe something like this or similar using JPAQueryFactory could do it.</p>\n<pre><code>Map&lt;Long, Long&gt; entityMap = new JPAQueryFactory(entityManager)\n.select(qE2.qE1.id, qE2.count())\n.from(qE2)\n.join(qE2.qE1)\n.where(qE1_exp)\n.groupBy(qE2.qE1.id)\n.fetch()\n.stream()\n.collect(Collectors.toMap(\n    tuple -&gt; tuple.get(qE2.qE1.id),\n    tuple -&gt; tuple.get(qE2.count())\n));\n</code></pre>\n"}],"owner":{"account_id":3362570,"reputation":421,"user_id":2824059,"accept_rate":79,"display_name":"slider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75806870,"answer_count":1,"score":0,"last_activity_date":1679437517,"creation_date":1679433819,"question_id":75806464,"body_markdown":"How to get the map of ids of one entity (key) and the numbers of associated entities (value). Without transfer entities. \r\nSomething like this:\r\n\r\n    from(qE1)\r\n       .join(qE2).on(qE2.qE1_id.eq(qE1.id))\r\n       .where(qE1_exp)\r\n       .transform(GroupBy.groupBy(qE2.id).as(qE1.count())) // ?\r\n\r\nQueryDSL-4.2.1.","title":"How with QueryDSL get the map of ids of one entity and the numbers of associated entities","body":"<p>How to get the map of ids of one entity (key) and the numbers of associated entities (value). Without transfer entities.\nSomething like this:</p>\n<pre><code>from(qE1)\n   .join(qE2).on(qE2.qE1_id.eq(qE1.id))\n   .where(qE1_exp)\n   .transform(GroupBy.groupBy(qE2.id).as(qE1.count())) // ?\n</code></pre>\n<p>QueryDSL-4.2.1.</p>\n"},{"tags":["java","rsyslog","logrotate","log-rotation"],"comments":[{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":1,"creation_date":1651569325,"post_id":72095695,"comment_id":127388891,"body_markdown":"@Dan I have added it with my question.","body":"@Dan I have added it with my question."},{"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"score":0,"creation_date":1651653110,"post_id":72095695,"comment_id":127411806,"body_markdown":"Please add the content of `/etc/log_rotation_script` to your question.","body":"Please add the content of <code>&#47;etc&#47;log_rotation_script</code> to your question."},{"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"score":0,"creation_date":1651653529,"post_id":72095695,"comment_id":127411954,"body_markdown":"Also the file size (3000) inside your logrotation statement is defined in **bytes**. So it would rotate the file after the file size reaches **3000 Bytes** or **3 KB**.","body":"Also the file size (3000) inside your logrotation statement is defined in <b>bytes</b>. So it would rotate the file after the file size reaches <b>3000 Bytes</b> or <b>3 KB</b>."},{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":0,"creation_date":1651735617,"post_id":72095695,"comment_id":127434827,"body_markdown":"@eDonkey the script added above is /etc/log_rotation_script. Also, the file is not getting rotated after 3kb size and more data is getting dumped into the same file.","body":"@eDonkey the script added above is /etc/log_rotation_script. Also, the file is not getting rotated after 3kb size and more data is getting dumped into the same file."},{"owner":{"account_id":8848072,"reputation":1890,"user_id":6608257,"accept_rate":96,"display_name":"dmx"},"score":0,"creation_date":1653339357,"post_id":72095695,"comment_id":127823743,"body_markdown":"@KumarRounak I have the exact issue, did you fine a working solution ?","body":"@KumarRounak I have the exact issue, did you fine a working solution ?"},{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":0,"creation_date":1653478920,"post_id":72095695,"comment_id":127861174,"body_markdown":"@dmx no bro, the problem still persists","body":"@dmx no bro, the problem still persists"}],"answers":[{"tags":[],"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657694931,"creation_date":1651738175,"answer_id":72123943,"question_id":72095695,"body_markdown":"First of all, I think you misunderstood something there and should read the documentation again. \r\n\r\nThe log rotation is not working because the content you currently have in `/etc/log_rotation_script` should be in `/etc/rsyslog.conf` or `/etc/rsydlog.d/filename.conf`, as the configuration of rsyslog is handled in there. \r\n\r\nThe only purpose of the `/etc/log_rotation_script` is to move a &quot;full&quot; (when the limit of currently 3KB is hit) file to another file/location.\r\n\r\n\r\nThe **`/etc/rsyslog.conf`** (simplified) would then look something like the following:\r\n\r\n    # Load modules\r\n    module(load=&quot;imudp&quot;)\r\n\r\n    # Set the default permissions for all log files\r\n    module(load=&quot;builtin:omfile&quot;\r\n\t    fileOwner=&quot;root&quot;\r\n\t    fileGroup=&quot;adm&quot;\r\n\t    fileCreateMode=&quot;0777&quot;\r\n\t    dirCreateMode=&quot;0777&quot;)\r\n\r\n    # Receive logs over udp from somewhere\r\n    input(type=&quot;imudp&quot; address=&quot;127.0.0.1&quot; port=&quot;514&quot;)\r\n\r\n    # log everything to /logs/prismaudit.log by using the output channel\r\n    *.* :omfile:$log_rotation\r\n\r\n    # If max file size (50MB) is reached execute /path/to/log_rotation_script\r\n    $outchannel log_rotation,/logs/prismaudit.log, 52428800,/path/to/log_rotation_script\r\n\r\n\r\n----------\r\n\r\nThe script which is executed when the max file size is reached, could then just move the file: \r\n\r\n**`/path/to/log_rotation_script`**\r\n\r\n    # move original log to (a kind of) backup log file\r\n    mv -f /logs/prismaudit.log /logs/prismaudit.log.1","title":"Enable log rotation in rsyslog","body":"<p>First of all, I think you misunderstood something there and should read the documentation again.</p>\n<p>The log rotation is not working because the content you currently have in <code>/etc/log_rotation_script</code> should be in <code>/etc/rsyslog.conf</code> or <code>/etc/rsydlog.d/filename.conf</code>, as the configuration of rsyslog is handled in there.</p>\n<p>The only purpose of the <code>/etc/log_rotation_script</code> is to move a &quot;full&quot; (when the limit of currently 3KB is hit) file to another file/location.</p>\n<p>The <strong><code>/etc/rsyslog.conf</code></strong> (simplified) would then look something like the following:</p>\n<pre><code># Load modules\nmodule(load=&quot;imudp&quot;)\n\n# Set the default permissions for all log files\nmodule(load=&quot;builtin:omfile&quot;\n    fileOwner=&quot;root&quot;\n    fileGroup=&quot;adm&quot;\n    fileCreateMode=&quot;0777&quot;\n    dirCreateMode=&quot;0777&quot;)\n\n# Receive logs over udp from somewhere\ninput(type=&quot;imudp&quot; address=&quot;127.0.0.1&quot; port=&quot;514&quot;)\n\n# log everything to /logs/prismaudit.log by using the output channel\n*.* :omfile:$log_rotation\n\n# If max file size (50MB) is reached execute /path/to/log_rotation_script\n$outchannel log_rotation,/logs/prismaudit.log, 52428800,/path/to/log_rotation_script\n</code></pre>\n<hr />\n<p>The script which is executed when the max file size is reached, could then just move the file:</p>\n<p><strong><code>/path/to/log_rotation_script</code></strong></p>\n<pre><code># move original log to (a kind of) backup log file\nmv -f /logs/prismaudit.log /logs/prismaudit.log.1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4397955,"reputation":93,"user_id":3584447,"display_name":"CoDeC__"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679437207,"creation_date":1679437207,"answer_id":75806838,"question_id":72095695,"body_markdown":"currently I use *Template* feature for sort the different sources that RSyslog receives:\r\n\r\n    $template mylogs,&quot;/disk2/syslog/%$YEAR%%$MONTH%%$DAY%/%FROMHOST-IP%.log&quot;\r\n\r\nwith this I have my logs sorted. Like you see I use *RSyslog Propierties*.\r\n\r\nNow, I want apply the rotation by size. Currently, I use logrotate but I don&#39;t like and I&#39;ve found that RSyslog have the *Output Channels* feature. \r\n\r\nI have read that *RSyslog Propierties* only can be used in Templates and Conditional Statements and then seem that the field filename of *Output Channels* must to be static. \r\n\r\nDo you know if it is feasible to get the same that I have with Template with Output Channels?\r\n\r\nthanks","title":"Enable log rotation in rsyslog","body":"<p>currently I use <em>Template</em> feature for sort the different sources that RSyslog receives:</p>\n<pre><code>$template mylogs,&quot;/disk2/syslog/%$YEAR%%$MONTH%%$DAY%/%FROMHOST-IP%.log&quot;\n</code></pre>\n<p>with this I have my logs sorted. Like you see I use <em>RSyslog Propierties</em>.</p>\n<p>Now, I want apply the rotation by size. Currently, I use logrotate but I don't like and I've found that RSyslog have the <em>Output Channels</em> feature.</p>\n<p>I have read that <em>RSyslog Propierties</em> only can be used in Templates and Conditional Statements and then seem that the field filename of <em>Output Channels</em> must to be static.</p>\n<p>Do you know if it is feasible to get the same that I have with Template with Output Channels?</p>\n<p>thanks</p>\n"}],"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9545,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1679437207,"creation_date":1651560495,"question_id":72095695,"body_markdown":"How to enable log rotation in rsyslog configuration. The method described in the official documentation of rsyslog using output channels is not working for me.\r\n\r\nThe script given in the official documentation of rsyslog for output channel is available here: https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    module(load=&quot;imudp&quot; TimeRequery=&quot;500&quot;)\r\n\r\n    module(load=&quot;omstdout&quot;)\r\n    module(load=&quot;omelasticsearch&quot;)\r\n\r\n    module(load=&quot;mmjsonparse&quot;)\r\n    module(load=&quot;mmutf8fix&quot;)\r\n\r\n    ruleset(name=&quot;prismaudit_rs&quot;) {\r\n          action(type=&quot;omfile&quot; dirCreateMode=&quot;0777&quot; fileCreateMode=&quot;0777&quot; file=&quot;/logs/prismaudit.log&quot;)\r\n    }\r\n\r\n    $outchannel log_rotation,/logs/prismaudit.log, 3000,/etc/log_rotation_script\r\n    *.* :omfile:$log_rotation\r\n\r\n    #input(type=&quot;imptcp&quot; port=&quot;514&quot;)\r\n    input(type=&quot;imudp&quot; port=&quot;514&quot; ruleset=&quot;prismaudit_rs&quot;)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThis is the snippet of code I am using. I have also tried adding the outputchannel part of code inside the ruleset(after action statement).\r\n\r\n\r\nMy log rotation script:\r\nmv -f /logs/prismaudit.log /logs/log_rotation.log.1","title":"Enable log rotation in rsyslog","body":"<p>How to enable log rotation in rsyslog configuration. The method described in the official documentation of rsyslog using output channels is not working for me.</p>\n<p>The script given in the official documentation of rsyslog for output channel is available here: <a href=\"https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html\" rel=\"noreferrer\">https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>module(load=\"imudp\" TimeRequery=\"500\")\n\nmodule(load=\"omstdout\")\nmodule(load=\"omelasticsearch\")\n\nmodule(load=\"mmjsonparse\")\nmodule(load=\"mmutf8fix\")\n\nruleset(name=\"prismaudit_rs\") {\n      action(type=\"omfile\" dirCreateMode=\"0777\" fileCreateMode=\"0777\" file=\"/logs/prismaudit.log\")\n}\n\n$outchannel log_rotation,/logs/prismaudit.log, 3000,/etc/log_rotation_script\n*.* :omfile:$log_rotation\n\n#input(type=\"imptcp\" port=\"514\")\ninput(type=\"imudp\" port=\"514\" ruleset=\"prismaudit_rs\")</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>This is the snippet of code I am using. I have also tried adding the outputchannel part of code inside the ruleset(after action statement).</p>\n<p>My log rotation script:\nmv -f /logs/prismaudit.log /logs/log_rotation.log.1</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1533043852,"post_id":51614284,"comment_id":90194455,"body_markdown":"unfortunately this error is reported too many times in the wrong place","body":"unfortunately this error is reported too many times in the wrong place"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533049258,"post_id":51614284,"comment_id":90198288,"body_markdown":"That&#39;s interesting point @Eugene.","body":"That&#39;s interesting point @Eugene."},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533049463,"post_id":51614284,"comment_id":90198416,"body_markdown":"Emdee, can you post full code?","body":"Emdee, can you post full code?"}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533043629,"creation_date":1533042958,"answer_id":51614312,"question_id":51614284,"body_markdown":"[The value mapper should be a function][1], i.e.:\r\n\r\n\r\n    .collect(Collectors.toMap(Student::getFirstName, s -&gt; 1));\r\n\r\nThe function `s -&gt; 1` essentially takes a student as input and returns `1` in this specific case for the map values. \r\n\r\nThe below code is not valid as the literal value `1` is not a function.\r\n\r\n    .collect(Collectors.toMap(Student::getFirstName, 1));\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"nofollow noreferrer\">The value mapper should be a function</a>, i.e.:</p>\n\n<pre><code>.collect(Collectors.toMap(Student::getFirstName, s -&gt; 1));\n</code></pre>\n\n<p>The function <code>s -&gt; 1</code> essentially takes a student as input and returns <code>1</code> in this specific case for the map values. </p>\n\n<p>The below code is not valid as the literal value <code>1</code> is not a function.</p>\n\n<pre><code>.collect(Collectors.toMap(Student::getFirstName, 1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533097640,"creation_date":1533047135,"answer_id":51615733,"question_id":51614284,"body_markdown":"Firstly, you are accessing `getFirstName` using a class name -`Student`(as if its a static memeber) rather than using object reference. [Java tutorial - Method Refrences][1].&lt;br&gt;\r\nSecondly, second parameter of `toMap` method must be a [`Function`][2] type.\r\n\r\nSo, the correct statement is:&lt;br&gt;\r\n`someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1 ) );`\r\n\r\n**Edit:**&lt;br&gt;\r\nOr, it can also be as posted by @Aomine. Both answers are correct. For more info, refer to comments on @Aomine&#39;s answers.\r\n\r\n**Edit 2:**&lt;br&gt;\r\nThough, @Aomine&#39;s and this answer give expected result, note difference in first parameter.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>Firstly, you are accessing <code>getFirstName</code> using a class name -<code>Student</code>(as if its a static memeber) rather than using object reference. <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">Java tutorial - Method Refrences</a>.<br>\nSecondly, second parameter of <code>toMap</code> method must be a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Function</code></a> type.</p>\n\n<p>So, the correct statement is:<br>\n<code>someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1 ) );</code></p>\n\n<p><strong>Edit:</strong><br>\nOr, it can also be as posted by @Aomine. Both answers are correct. For more info, refer to comments on @Aomine's answers.</p>\n\n<p><strong>Edit 2:</strong><br>\nThough, @Aomine's and this answer give expected result, note difference in first parameter.</p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679437195,"creation_date":1679437195,"answer_id":75806837,"question_id":51614284,"body_markdown":"The issue here is that first of all, this message is very misleading and that seems to be a java bug.\r\nSecond, you are providing an int value in place of a function reference.\r\nCorrect is this:\r\n\r\n\r\n    final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n            Collectors.toMap(Student::getFirstName, val -&gt; 1));\r\n\r\nHere `val -&gt; 1` is a function which for any `val` will always return 1.\r\n\r\nAnother situation where you would get the same error would be this:\r\n\r\n     final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n                Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\nIf `someStudents` is of type `Map&lt;String, String&gt;` but map is `Map&lt;String, Integer&gt;` you would get the same:\r\n\r\n`non-static method Map.Entry::getValue cannot be referenced from a static context`\r\n","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>The issue here is that first of all, this message is very misleading and that seems to be a java bug.\nSecond, you are providing an int value in place of a function reference.\nCorrect is this:</p>\n<pre><code>final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n        Collectors.toMap(Student::getFirstName, val -&gt; 1));\n</code></pre>\n<p>Here <code>val -&gt; 1</code> is a function which for any <code>val</code> will always return 1.</p>\n<p>Another situation where you would get the same error would be this:</p>\n<pre><code> final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n            Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n<p>If <code>someStudents</code> is of type <code>Map&lt;String, String&gt;</code> but map is <code>Map&lt;String, Integer&gt;</code> you would get the same:</p>\n<p><code>non-static method Map.Entry::getValue cannot be referenced from a static context</code></p>\n"}],"owner":{"account_id":6144018,"reputation":1699,"user_id":4790468,"accept_rate":48,"display_name":"Emdee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14247,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1679437195,"creation_date":1533042862,"question_id":51614284,"body_markdown":"I have a list of Students which I want to convert into a `Map&lt;String, Integer&gt;`, where the map key should be the first name of the student. To keep the code sample simple, I specified the map value as `1`:\r\n\r\n    final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n            Collectors.toMap(Student::getFirstName, 1));\r\n\r\nThe compiler complains about:\r\n\r\n&gt; non-static method getFirstName() cannot be referenced from a static context\r\n\r\nAny idea? I am confused because many examples use the same approach of passing a reference to the non-static method. Why does the compiler see a static context here?","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>I have a list of Students which I want to convert into a <code>Map&lt;String, Integer&gt;</code>, where the map key should be the first name of the student. To keep the code sample simple, I specified the map value as <code>1</code>:</p>\n\n<pre><code>final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n        Collectors.toMap(Student::getFirstName, 1));\n</code></pre>\n\n<p>The compiler complains about:</p>\n\n<blockquote>\n  <p>non-static method getFirstName() cannot be referenced from a static context</p>\n</blockquote>\n\n<p>Any idea? I am confused because many examples use the same approach of passing a reference to the non-static method. Why does the compiler see a static context here?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679436996,"creation_date":1679427160,"question_id":75805643,"body_markdown":"I have a custom **example.json** in **/resources** folder, where I keep values of my POJOs, for example \r\n```\r\n[\r\n  {\r\n    &quot;name&quot;: &quot;Max&quot;,\r\n    &quot;lastname&quot;: &quot;Mad&quot;\r\n  },\r\n...\r\n]\r\n```\r\nAnd I want to get them in Spring&#39;s BeanFactoryPostProcessor. I can&#39;t use `@Value` or `@Autowired` there, I only have access to `Environment`. Now I am using **example.properties** and Spring&#39;s Binder to obtain my array of objects, but is there are an easier and more convinient way? ","title":"How to create a Java object from custom properites in json format using Spring Environment?","body":"<p>I have a custom <strong>example.json</strong> in <strong>/resources</strong> folder, where I keep values of my POJOs, for example</p>\n<pre><code>[\n  {\n    &quot;name&quot;: &quot;Max&quot;,\n    &quot;lastname&quot;: &quot;Mad&quot;\n  },\n...\n]\n</code></pre>\n<p>And I want to get them in Spring's BeanFactoryPostProcessor. I can't use <code>@Value</code> or <code>@Autowired</code> there, I only have access to <code>Environment</code>. Now I am using <strong>example.properties</strong> and Spring's Binder to obtain my array of objects, but is there are an easier and more convinient way?</p>\n"},{"tags":["java","swing","imageicon"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1679423508,"post_id":75805119,"comment_id":133718838,"body_markdown":"The path would be correct if your program ran from the src folder. It does not.","body":"The path would be correct if your program ran from the src folder. It does not."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679423558,"post_id":75805119,"comment_id":133718859,"body_markdown":"Images are *resources* : Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"Images are <i>resources</i> : Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423652,"post_id":75805119,"comment_id":133718884,"body_markdown":"g00se When you mean source, are you talking about the directly decoded image?","body":"g00se When you mean source, are you talking about the directly decoded image?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1679423655,"post_id":75805119,"comment_id":133718886,"body_markdown":"The [current directory](https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java)\nis a concept you need to know","body":"The <a href=\"https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java\" rel=\"nofollow noreferrer\">current directory</a> is a concept you need to know"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679423755,"post_id":75805119,"comment_id":133718920,"body_markdown":"I didn&#39;t understand your comment question btw","body":"I didn&#39;t understand your comment question btw"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423830,"post_id":75805119,"comment_id":133718943,"body_markdown":"The current directory I found is: &quot;eclipse-workspace\\JavaLessons&quot; so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);&quot; but still no picture. The error is still the same.","body":"The current directory I found is: &quot;eclipse-workspace\\JavaLessons&quot; so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);&quot; but still no picture. The error is still the same."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679423852,"post_id":75805119,"comment_id":133718950,"body_markdown":"See: [Loading Images Using getResource](https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource). The file must then be found on your &quot;classpath&quot;.","body":"See: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource\" rel=\"nofollow noreferrer\">Loading Images Using getResource</a>. The file must then be found on your &quot;classpath&quot;."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423927,"post_id":75805119,"comment_id":133718976,"body_markdown":"camickr I tried this before. &quot;getClass().getResorce(&quot;bla bla&quot;)&quot; didn&#39;t work, still gave the same error.","body":"camickr I tried this before. &quot;getClass().getResorce(&quot;bla bla&quot;)&quot; didn&#39;t work, still gave the same error."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679424005,"post_id":75805119,"comment_id":133719012,"body_markdown":"*so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);* Well I wasn&#39;t actually suggesting that as a solution. It should be done with `getResource`. Real programs don&#39;t run from IDEs, for one thing","body":"<i>so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);</i> Well I wasn&#39;t actually suggesting that as a solution. It should be done with <code>getResource</code>. Real programs don&#39;t run from IDEs, for one thing"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679424062,"post_id":75805119,"comment_id":133719034,"body_markdown":"`getClass().getResource(&quot;/icon.png&quot;);`","body":"<code>getClass().getResource(&quot;&#47;icon.png&quot;);</code>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679424128,"post_id":75805119,"comment_id":133719053,"body_markdown":"Is your &quot;classpath&quot; set up correctly? You need to have your &quot;bin&quot; directory on the classpath. I don&#39;t use an IDE so I don&#39;t know how to do it in Eclipse","body":"Is your &quot;classpath&quot; set up correctly? You need to have your &quot;bin&quot; directory on the classpath. I don&#39;t use an IDE so I don&#39;t know how to do it in Eclipse"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424190,"post_id":75805119,"comment_id":133719068,"body_markdown":"camickr Correct, Thanks for the information, but I&#39;m not doing a serious project, I&#39;m testing.","body":"camickr Correct, Thanks for the information, but I&#39;m not doing a serious project, I&#39;m testing."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424348,"post_id":75805119,"comment_id":133719117,"body_markdown":"I&#39;ve been struggling for 2 days now and I just had a look and this time it happened. I don&#39;t know what caused it, but it&#39;s probably &quot;The path would be correct if your program ran from the src folder. It does not.&quot; i fixed my code based on this comment. So it worked, so solution: &quot; new File(&quot;src/icon.png&quot;);&quot; I didn&#39;t add src/ before.","body":"I&#39;ve been struggling for 2 days now and I just had a look and this time it happened. I don&#39;t know what caused it, but it&#39;s probably &quot;The path would be correct if your program ran from the src folder. It does not.&quot; i fixed my code based on this comment. So it worked, so solution: &quot; new File(&quot;src/icon.png&quot;);&quot; I didn&#39;t add src/ before."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679424388,"post_id":75805119,"comment_id":133719133,"body_markdown":"Actually, just noticed your code is attempting to access &quot;icon.jpg&quot; but you questions shows the file name is &quot;icon.png&quot;.","body":"Actually, just noticed your code is attempting to access &quot;icon.jpg&quot; but you questions shows the file name is &quot;icon.png&quot;."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424475,"post_id":75805119,"comment_id":133719150,"body_markdown":"Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it. Thank you to everyone who replied.","body":"Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it. Thank you to everyone who replied."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1679424693,"post_id":75805119,"comment_id":133719211,"body_markdown":"(1-) No, you should not be using &quot;src&quot;. The image is also located in the &quot;bin&quot; director with all your other class files. Did you not read the tutorial link I provided? It shows common directory structures to use so you don&#39;t have a problem. The image belong in a directory structure with your class files.","body":"(1-) No, you should not be using &quot;src&quot;. The image is also located in the &quot;bin&quot; director with all your other class files. Did you not read the tutorial link I provided? It shows common directory structures to use so you don&#39;t have a problem. The image belong in a directory structure with your class files."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":4,"creation_date":1679425127,"post_id":75805119,"comment_id":133719322,"body_markdown":"**There is no guarantee that icon.png exists,** because you don’t know what the [current working directory](https://en.wikipedia.org/wiki/Working_directory) of your Java process will be.  Your code is broken because it relies on an unsafe assumption about the current directory.  The Class.getResource method is designed to address this safely and reliably.","body":"<b>There is no guarantee that icon.png exists,</b> because you don’t know what the <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">current working directory</a> of your Java process will be.  Your code is broken because it relies on an unsafe assumption about the current directory.  The Class.getResource method is designed to address this safely and reliably."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1679434250,"post_id":75805119,"comment_id":133721295,"body_markdown":"*&quot;Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it&quot;* - No, it&#39;s just masked the bigger problem.  Don&#39;t use `File`, in your context, it&#39;s looking for a file in the CURRENT WORKING DIRECTORY, which IS NOT you &quot;src&quot; directory AND your &quot;src&quot; directory will NOT exist when your export the program.  Your image is now an EMBEDDED image, you MUST use `Class#getResource` to load it.","body":"<i>&quot;Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it&quot;</i> - No, it&#39;s just masked the bigger problem.  Don&#39;t use <code>File</code>, in your context, it&#39;s looking for a file in the CURRENT WORKING DIRECTORY, which IS NOT you &quot;src&quot; directory AND your &quot;src&quot; directory will NOT exist when your export the program.  Your image is now an EMBEDDED image, you MUST use <code>Class#getResource</code> to load it."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1679434283,"post_id":75805119,"comment_id":133721303,"body_markdown":"When you post your next question about why you can&#39;t load your images when your program is exported out to a jar, we will point you back to this question","body":"When you post your next question about why you can&#39;t load your images when your program is exported out to a jar, we will point you back to this question"}],"answers":[{"tags":[],"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679436405,"creation_date":1679435606,"answer_id":75806656,"question_id":75805119,"body_markdown":"First mistake:  \r\nYour screenshot shows the file name &quot;icon.**png**&quot;,\r\nbut in your Java code you try to load &quot;icon.**jpg**&quot;.\r\n\r\nSecond mistake:  \r\nWhen you specify\r\n\r\n    File imageFile = new File(&quot;icon.png&quot;)\r\n\r\nthen the file is assumed to be in the *current* directory,\r\nwhich in your case is your project directory\r\n(i.e. the directory also containing your `src` and `bin` folder).\r\nBut that is not where your image file actually is.\r\n\r\nA safe way to load the image file from the same directory\r\nwhere your `.class`file is (i.e. the `bin` folder), is like this: \r\n\r\n    URL imageUrl = main.class.getResource(&quot;icon.png&quot;);\r\n    BufferedImage image = ImageIO.read(imageUrl);\r\n\r\nAnd be aware calling `getResource(...)` will give `null`\r\nif the file is not found.","title":"Java SwingGUI is broken","body":"<p>First mistake:<br />\nYour screenshot shows the file name &quot;icon.<strong>png</strong>&quot;,\nbut in your Java code you try to load &quot;icon.<strong>jpg</strong>&quot;.</p>\n<p>Second mistake:<br />\nWhen you specify</p>\n<pre><code>File imageFile = new File(&quot;icon.png&quot;)\n</code></pre>\n<p>then the file is assumed to be in the <em>current</em> directory,\nwhich in your case is your project directory\n(i.e. the directory also containing your <code>src</code> and <code>bin</code> folder).\nBut that is not where your image file actually is.</p>\n<p>A safe way to load the image file from the same directory\nwhere your <code>.class</code>file is (i.e. the <code>bin</code> folder), is like this:</p>\n<pre><code>URL imageUrl = main.class.getResource(&quot;icon.png&quot;);\nBufferedImage image = ImageIO.read(imageUrl);\n</code></pre>\n<p>And be aware calling <code>getResource(...)</code> will give <code>null</code>\nif the file is not found.</p>\n"}],"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"answer_count":1,"score":-5,"last_activity_date":1679436405,"creation_date":1679423444,"question_id":75805119,"body_markdown":"My code is very simple, really there is no problem in writing my code. I&#39;m getting the file not found error as an error, but I&#39;m 100% sure the file path is correct, I&#39;ve checked hundreds of times. There are no other errors. Some different image upload methods give no error but as a result, the image never appears.\r\n\r\nChatGPT: can&#39;t fix.\r\n\r\nImage: 16x16, .png, 1.72KB              \r\nCompiler IDE: Eclipse\r\n```\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Color;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\n\r\npublic class main {\r\n    public static void main(String[] args) {\r\n        JFrame window = new JFrame(&quot;JavaTests&quot;);\r\n        window.setVisible(true);\r\n        window.setResizable(true);\r\n        window.setSize(800,600);\r\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        window.getContentPane().setBackground(Color.PINK);\r\n\r\n        try {\r\n            File imageFile = new File(&quot;icon.jpg&quot;);\r\n            BufferedImage image = ImageIO.read(imageFile);\r\n            JLabel label = new JLabel(new ImageIcon(image));\r\n            label.setSize(image.getWidth(), image.getHeight());\r\n            label.setBackground(Color.BLACK);\r\n            label.setOpaque(false);\r\n            window.add(label);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;LOG: &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nPath File:\r\n[![PATH FILES][1]][1]\r\n\r\nError Code\r\n[![ERROR CODE][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QXFTY.png\r\n  [2]: https://i.stack.imgur.com/yXc66.png","title":"Java SwingGUI is broken","body":"<p>My code is very simple, really there is no problem in writing my code. I'm getting the file not found error as an error, but I'm 100% sure the file path is correct, I've checked hundreds of times. There are no other errors. Some different image upload methods give no error but as a result, the image never appears.</p>\n<p>ChatGPT: can't fix.</p>\n<p>Image: 16x16, .png, 1.72KB<br />\nCompiler IDE: Eclipse</p>\n<pre><code>import javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\n\npublic class main {\n    public static void main(String[] args) {\n        JFrame window = new JFrame(&quot;JavaTests&quot;);\n        window.setVisible(true);\n        window.setResizable(true);\n        window.setSize(800,600);\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.getContentPane().setBackground(Color.PINK);\n\n        try {\n            File imageFile = new File(&quot;icon.jpg&quot;);\n            BufferedImage image = ImageIO.read(imageFile);\n            JLabel label = new JLabel(new ImageIcon(image));\n            label.setSize(image.getWidth(), image.getHeight());\n            label.setBackground(Color.BLACK);\n            label.setOpaque(false);\n            window.add(label);\n        } catch (Exception e) {\n            System.out.println(&quot;LOG: &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Path File:\n<a href=\"https://i.stack.imgur.com/QXFTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QXFTY.png\" alt=\"PATH FILES\" /></a></p>\n<p>Error Code\n<a href=\"https://i.stack.imgur.com/yXc66.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXc66.png\" alt=\"ERROR CODE\" /></a></p>\n"},{"tags":["java","keycloak","keycloak-services"],"answers":[{"tags":[],"owner":{"account_id":1449510,"reputation":48172,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1679435963,"creation_date":1616835175,"answer_id":66829548,"question_id":66822016,"body_markdown":"Typically, what you can do is to first look at [Rest API Documentation][1] and the [Keycloak API][2]. \r\n\r\nAlternatively, and this *almost* always work, you just create the protocol Mapper using the Keycloak Admin API, for instance:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThen before clicking `Save`, open your browser developer network console and look at the network requests. Then click `save`:\r\n\r\nYou will have two post request, one for the token, another for the creation of the mapper:\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nLook at the request payload, you will see something as:\r\n\r\n```json\r\n{\r\n  &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n  &quot;config&quot;: {\r\n    &quot;multivalued&quot;: &quot;true&quot;,\r\n    &quot;id.token.claim&quot;: &quot;true&quot;,\r\n    &quot;access.token.claim&quot;: &quot;true&quot;,\r\n    &quot;userinfo.token.claim&quot;: &quot;true&quot;,\r\n    &quot;claim.name&quot;: &quot;asdas&quot;\r\n  },\r\n  &quot;name&quot;: &quot;asdas&quot;,\r\n  &quot;protocolMapper&quot;: &quot;oidc-usermodel-realm-role-mapper&quot;\r\n}\r\n```\r\n\r\nNow you can infer the options from there. Not ideal I know.\r\n\r\n\r\n  [1]: https://www.keycloak.org/docs-api/21.0.1/rest-api/index.html#_protocol_mappers_resource\r\n  [2]: https://www.keycloak.org/docs-api/21.0.1/javadocs/org/keycloak/representations/idm/ProtocolMapperRepresentation.html\r\n  [3]: https://i.stack.imgur.com/PCnSy.png\r\n  [4]: https://i.stack.imgur.com/2bNM7.png\r\n  [5]: https://i.stack.imgur.com/RYlf7.png","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>Typically, what you can do is to first look at <a href=\"https://www.keycloak.org/docs-api/21.0.1/rest-api/index.html#_protocol_mappers_resource\" rel=\"nofollow noreferrer\">Rest API Documentation</a> and the <a href=\"https://www.keycloak.org/docs-api/21.0.1/javadocs/org/keycloak/representations/idm/ProtocolMapperRepresentation.html\" rel=\"nofollow noreferrer\">Keycloak API</a>.</p>\n<p>Alternatively, and this <em>almost</em> always work, you just create the protocol Mapper using the Keycloak Admin API, for instance:</p>\n<p><a href=\"https://i.stack.imgur.com/PCnSy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCnSy.png\" alt=\"enter image description here\" /></a></p>\n<p>Then before clicking <code>Save</code>, open your browser developer network console and look at the network requests. Then click <code>save</code>:</p>\n<p>You will have two post request, one for the token, another for the creation of the mapper:</p>\n<p><a href=\"https://i.stack.imgur.com/2bNM7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2bNM7.png\" alt=\"enter image description here\" /></a></p>\n<p>Look at the request payload, you will see something as:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;protocol&quot;: &quot;openid-connect&quot;,\n  &quot;config&quot;: {\n    &quot;multivalued&quot;: &quot;true&quot;,\n    &quot;id.token.claim&quot;: &quot;true&quot;,\n    &quot;access.token.claim&quot;: &quot;true&quot;,\n    &quot;userinfo.token.claim&quot;: &quot;true&quot;,\n    &quot;claim.name&quot;: &quot;asdas&quot;\n  },\n  &quot;name&quot;: &quot;asdas&quot;,\n  &quot;protocolMapper&quot;: &quot;oidc-usermodel-realm-role-mapper&quot;\n}\n</code></pre>\n<p>Now you can infer the options from there. Not ideal I know.</p>\n"},{"tags":[],"owner":{"account_id":267838,"reputation":368,"user_id":556252,"display_name":"J&#233;r&#233;mie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641467951,"creation_date":1641467951,"answer_id":70606333,"question_id":66822016,"body_markdown":"The list for Keycloak 15 is the following (missing only the Pairwise Subject Identifier):\r\n\r\n- oidc-usersessionmodel-note-mapper  \r\n- oidc-group-membership-mapper       \r\n- oidc-usermodel-attribute-mapper    \r\n- oidc-usermodel-realm-role-mapper   \r\n- oidc-audience-mapper               \r\n- oidc-usermodel-property-mapper     \r\n- oidc-hardcoded-claim-mapper        \r\n- oidc-hardcoded-role-mapper         \r\n- oidc-allowed-origins-mapper        \r\n- oidc-audience-resolve-mapper       \r\n- oidc-claims-param-token-mapper     \r\n- oidc-usermodel-client-role-mapper  \r\n- oidc-full-name-mapper              \r\n- oidc-address-mapper                \r\n- oidc-role-name-mapper              \r\n","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>The list for Keycloak 15 is the following (missing only the Pairwise Subject Identifier):</p>\n<ul>\n<li>oidc-usersessionmodel-note-mapper</li>\n<li>oidc-group-membership-mapper</li>\n<li>oidc-usermodel-attribute-mapper</li>\n<li>oidc-usermodel-realm-role-mapper</li>\n<li>oidc-audience-mapper</li>\n<li>oidc-usermodel-property-mapper</li>\n<li>oidc-hardcoded-claim-mapper</li>\n<li>oidc-hardcoded-role-mapper</li>\n<li>oidc-allowed-origins-mapper</li>\n<li>oidc-audience-resolve-mapper</li>\n<li>oidc-claims-param-token-mapper</li>\n<li>oidc-usermodel-client-role-mapper</li>\n<li>oidc-full-name-mapper</li>\n<li>oidc-address-mapper</li>\n<li>oidc-role-name-mapper</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":26202117,"reputation":33,"user_id":19882324,"display_name":"Cheryl Danner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669042320,"creation_date":1669042320,"answer_id":74520778,"question_id":66822016,"body_markdown":"I found myself here as I was looking for documentation about the different Keycloak protocol mapper types, and for anyone else who is doing the same, I can confirm that it&#39;s difficult.\r\n\r\nThe [protocol mappers section][1] in the Keycloak Server Admin guide is pretty clear that it is not going to walk users through all of the details. See the excerpt below (emphasis mine).\r\n\r\n&gt; Protocol mappers map items (such as an email address, for example) to\r\n&gt; a specific claim in the identity and access token. **The function of a\r\n&gt; mapper should be self-explanatory from its name.** You add\r\n&gt; pre-configured mappers by clicking Add Builtin.\r\n&gt; \r\n&gt; Each mapper has a set of common settings. Additional settings are\r\n&gt; available, depending on the mapper type. Click Edit next to a mapper\r\n&gt; to access the configuration screen to adjust these settings.\r\n\r\n[This][2] is the closest thing I&#39;ve found to documentation of the different protocol mapper types. \r\n\r\nI like @dreamcrash&#39;s approach to the problem.\r\n\r\n  [1]: https://www.keycloak.org/docs/latest/server_admin/#_protocol-mappers\r\n  [2]: https://www.keycloak.org/docs-api/20.0.1/javadocs/org/keycloak/protocol/oidc/mappers/package-summary.html","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>I found myself here as I was looking for documentation about the different Keycloak protocol mapper types, and for anyone else who is doing the same, I can confirm that it's difficult.</p>\n<p>The <a href=\"https://www.keycloak.org/docs/latest/server_admin/#_protocol-mappers\" rel=\"nofollow noreferrer\">protocol mappers section</a> in the Keycloak Server Admin guide is pretty clear that it is not going to walk users through all of the details. See the excerpt below (emphasis mine).</p>\n<blockquote>\n<p>Protocol mappers map items (such as an email address, for example) to\na specific claim in the identity and access token. <strong>The function of a\nmapper should be self-explanatory from its name.</strong> You add\npre-configured mappers by clicking Add Builtin.</p>\n<p>Each mapper has a set of common settings. Additional settings are\navailable, depending on the mapper type. Click Edit next to a mapper\nto access the configuration screen to adjust these settings.</p>\n</blockquote>\n<p><a href=\"https://www.keycloak.org/docs-api/20.0.1/javadocs/org/keycloak/protocol/oidc/mappers/package-summary.html\" rel=\"nofollow noreferrer\">This</a> is the closest thing I've found to documentation of the different protocol mapper types.</p>\n<p>I like @dreamcrash's approach to the problem.</p>\n"}],"owner":{"account_id":7167552,"reputation":869,"user_id":5476186,"display_name":"Austin Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7250,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":66829548,"answer_count":3,"score":5,"last_activity_date":1679435963,"creation_date":1616781261,"question_id":66822016,"body_markdown":"I&#39;m using Keycloak&#39;s Java `keycloak-admin-client` and I&#39;m wanting to set up some protocol mappers for my realm&#39;s client.\r\n\r\nThe Java API exposes this class to create a protocol mapper and then the following method to set the config options:\r\n``` lang-java\r\n    ProtocolMapperRepresentation protocolMapperRep = new ProtocolMapperRepresentation();\r\n    protocolMapperRep.setConfig(Map.of(&quot;some.mapper.config.option&quot;, &quot;mapper-value&quot;));\r\n```\r\n\r\nI&#39;ve looked at the javadoc documentation and it&#39;s, well, completely useless unfortunately. :( I have not looked at the rest-api documentation, but I just looked at it and it doesn&#39;t do anything to enumerate the config options for the protocol mapper representation: https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation\r\n\r\nI saw a few options from another StackOverflow question here: https://stackoverflow.com/questions/47158634/add-protocol-mapper-to-keycloak-using-kcadm-sh\r\n\r\nHowever, there *has* to be a better place where these are documented.","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>I'm using Keycloak's Java <code>keycloak-admin-client</code> and I'm wanting to set up some protocol mappers for my realm's client.</p>\n<p>The Java API exposes this class to create a protocol mapper and then the following method to set the config options:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    ProtocolMapperRepresentation protocolMapperRep = new ProtocolMapperRepresentation();\n    protocolMapperRep.setConfig(Map.of(&quot;some.mapper.config.option&quot;, &quot;mapper-value&quot;));\n</code></pre>\n<p>I've looked at the javadoc documentation and it's, well, completely useless unfortunately. :( I have not looked at the rest-api documentation, but I just looked at it and it doesn't do anything to enumerate the config options for the protocol mapper representation: <a href=\"https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation\" rel=\"nofollow noreferrer\">https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation</a></p>\n<p>I saw a few options from another StackOverflow question here: <a href=\"https://stackoverflow.com/questions/47158634/add-protocol-mapper-to-keycloak-using-kcadm-sh\">Add protocol-mapper to keycloak using kcadm.sh</a></p>\n<p>However, there <em>has</em> to be a better place where these are documented.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"owner":{"account_id":28080291,"reputation":1,"user_id":21451488,"display_name":"Callum Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679435545,"creation_date":1679435501,"question_id":75806643,"body_markdown":"New to spring boot and having a go at building a REST API. Using a model - repository - service - controller pattern. I am currently getting only the &quot;id&quot; field returned in the response to the get request, but can see clearly in the debug that all fields are getting returned as a object. What am i missing in the UserModel?\r\n\r\nUser\r\n\r\n```\r\npackage com.example.models;\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    private String firstName;\r\n    private String lastName;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(int id, String firstName, String lastName) {\r\n        this.id = id;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n}\r\n\r\n```\r\n\r\nUserController.java\r\n\r\n\r\n```\r\npackage com.example.controllers;\r\nimport com.example.models.User;\r\nimport com.example.services.UserService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\nimport java.util.NoSuchElementException;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/users&quot;)\r\npublic class UserController {\r\n    @Autowired\r\n    UserService userService;\r\n\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;User&gt; list() {\r\n        List&lt;User&gt; test = userService.listAllUser();\r\n        return userService.listAllUser();\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;User&gt; get(@PathVariable Integer id) {\r\n        try {\r\n            User user = userService.getUser(id);\r\n            return new ResponseEntity&lt;User&gt;(user, HttpStatus.OK);\r\n        } catch (NoSuchElementException e) {\r\n            return new ResponseEntity&lt;User&gt;(HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n    @PostMapping(&quot;/&quot;)\r\n    public void add(@RequestBody User user) {\r\n        userService.saveUser(user);\r\n    }\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;?&gt; update(@RequestBody User user, @PathVariable Integer id) {\r\n        try {\r\n            User existUser = userService.getUser(id);\r\n            userService.saveUser(user);\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n        } catch (NoSuchElementException e) {\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n    @DeleteMapping(&quot;/{id}&quot;)\r\n    public void delete(@PathVariable Integer id) {\r\n        userService.deleteUser(id);\r\n    }\r\n\r\n```\r\n\r\nUser Service\r\n\r\n\r\n```\r\npackage com.example.services;\r\nimport com.example.models.User;\r\nimport com.example.repositorys.UserRepository;\r\nimport jakarta.transaction.Transactional;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n@Service\r\n@Transactional\r\npublic class UserService {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    public List&lt;User&gt; listAllUser() {\r\n        return userRepository.findAll();\r\n    }\r\n\r\n    public void saveUser(User user) {\r\n        userRepository.save(user);\r\n    }\r\n\r\n    public User getUser(Integer id) {\r\n        return userRepository.findById(id).get();\r\n    }\r\n\r\n    public void deleteUser(Integer id) {\r\n        userRepository.deleteById(id);\r\n    }\r\n}\r\n```\r\n\r\n[intellij debug](https://i.stack.imgur.com/eeILh.png)\r\n[postman response](https://i.stack.imgur.com/mdFeQ.png)\r\n\r\n\r\n\r\n\r\nWas expecting all fields &quot;id, firstname, lastname&quot; to be returned","title":"JSON returned from controller only showing ID field","body":"<p>New to spring boot and having a go at building a REST API. Using a model - repository - service - controller pattern. I am currently getting only the &quot;id&quot; field returned in the response to the get request, but can see clearly in the debug that all fields are getting returned as a object. What am i missing in the UserModel?</p>\n<p>User</p>\n<pre><code>package com.example.models;\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String firstName;\n    private String lastName;\n\n    public User() {\n    }\n\n    public User(int id, String firstName, String lastName) {\n        this.id = id;\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n}\n\n</code></pre>\n<p>UserController.java</p>\n<pre><code>package com.example.controllers;\nimport com.example.models.User;\nimport com.example.services.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.NoSuchElementException;\n\n@RestController\n@RequestMapping(&quot;/api/users&quot;)\npublic class UserController {\n    @Autowired\n    UserService userService;\n\n    @GetMapping(&quot;&quot;)\n    public List&lt;User&gt; list() {\n        List&lt;User&gt; test = userService.listAllUser();\n        return userService.listAllUser();\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;User&gt; get(@PathVariable Integer id) {\n        try {\n            User user = userService.getUser(id);\n            return new ResponseEntity&lt;User&gt;(user, HttpStatus.OK);\n        } catch (NoSuchElementException e) {\n            return new ResponseEntity&lt;User&gt;(HttpStatus.NOT_FOUND);\n        }\n    }\n    @PostMapping(&quot;/&quot;)\n    public void add(@RequestBody User user) {\n        userService.saveUser(user);\n    }\n    @PutMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;?&gt; update(@RequestBody User user, @PathVariable Integer id) {\n        try {\n            User existUser = userService.getUser(id);\n            userService.saveUser(user);\n            return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n        } catch (NoSuchElementException e) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\n        }\n    }\n    @DeleteMapping(&quot;/{id}&quot;)\n    public void delete(@PathVariable Integer id) {\n        userService.deleteUser(id);\n    }\n\n</code></pre>\n<p>User Service</p>\n<pre><code>package com.example.services;\nimport com.example.models.User;\nimport com.example.repositorys.UserRepository;\nimport jakarta.transaction.Transactional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n@Service\n@Transactional\npublic class UserService {\n    @Autowired\n    private UserRepository userRepository;\n    public List&lt;User&gt; listAllUser() {\n        return userRepository.findAll();\n    }\n\n    public void saveUser(User user) {\n        userRepository.save(user);\n    }\n\n    public User getUser(Integer id) {\n        return userRepository.findById(id).get();\n    }\n\n    public void deleteUser(Integer id) {\n        userRepository.deleteById(id);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/eeILh.png\" rel=\"nofollow noreferrer\">intellij debug</a>\n<a href=\"https://i.stack.imgur.com/mdFeQ.png\" rel=\"nofollow noreferrer\">postman response</a></p>\n<p>Was expecting all fields &quot;id, firstname, lastname&quot; to be returned</p>\n"},{"tags":["java","testing","mockito","quarkus"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1679415464,"post_id":75802872,"comment_id":133716481,"body_markdown":"this call `when(service.get(anyString())` is missing the `anyInt()` parameters","body":"this call <code>when(service.get(anyString())</code> is missing the <code>anyInt()</code> parameters"},{"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"score":0,"creation_date":1679421654,"post_id":75802872,"comment_id":133718370,"body_markdown":"Yes. Changed. Just typo when created post","body":"Yes. Changed. Just typo when created post"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1679435464,"post_id":75802872,"comment_id":133721513,"body_markdown":"It should complain that you can&#39;t use `when()` on your service because that&#39;s not a mock in the first place, and shouldn&#39;t be because that&#39;s your subject under test.","body":"It should complain that you can&#39;t use <code>when()</code> on your service because that&#39;s not a mock in the first place, and shouldn&#39;t be because that&#39;s your subject under test."}],"answers":[{"tags":[],"owner":{"account_id":1642943,"reputation":19407,"user_id":1515052,"accept_rate":90,"display_name":"Simulant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679435093,"creation_date":1679435093,"answer_id":75806596,"question_id":75802872,"body_markdown":"A mock, which you are using for your service, overwrites per default all methods with an empty method body and returns a default value e.g. `null`. So the mock of your *get()*  method works, but your *sendRequest* method never calls it, as it is overwritten by an empty method. So this is what happens when you call `sendRequest` on your mock.\r\n\r\nWhat you can do to fix this is to configure the mock to call the actual implementation of your class: \r\n\r\n    when(service.sendRequest(1, &quot;name&quot;)).thenCallRealMethod()","title":"Quarkus. How to mock method inside the method","body":"<p>A mock, which you are using for your service, overwrites per default all methods with an empty method body and returns a default value e.g. <code>null</code>. So the mock of your <em>get()</em>  method works, but your <em>sendRequest</em> method never calls it, as it is overwritten by an empty method. So this is what happens when you call <code>sendRequest</code> on your mock.</p>\n<p>What you can do to fix this is to configure the mock to call the actual implementation of your class:</p>\n<pre><code>when(service.sendRequest(1, &quot;name&quot;)).thenCallRealMethod()\n</code></pre>\n"}],"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":484,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75806596,"answer_count":1,"score":1,"last_activity_date":1679435262,"creation_date":1679410923,"question_id":75802872,"body_markdown":"The question is how to mock the method inside another method in the class.  \r\nFor example I have service:\r\n\r\n    @Getter\r\n    @ApplicationScoped\r\n    public class Service{\r\n      public byte[] sendRequest(Integer id, String name){\r\n        try {\r\n          return get(id, name);\r\n        } catch (Exteption exception) {\r\n          throw new MyException(&quot;Error during get data &quot; + exception.getMEssage());\r\n        }  \r\n      }\r\n\r\n      public byte[] get(Integer id, String name){\r\n        ...some code...\r\n      }\r\n    }\r\n\r\nand test class\r\n\r\n    @QuakrusTest\r\n    public class ServiceTest{\r\n      \r\n      @InjectMock\r\n      Service service;\r\n    \r\n      @Test\r\n      void test(){\r\n        when(service.get(anyInt(), anyString())).thenThrow(new RuntimeException(&quot;MyError&quot;);\r\n        MyException myExpection = assertThrows(MyException .class, () -&gt; service.sendRequest(1, &quot;name&quot;));\r\n        assertEquals(&quot;Error during get data MyError&quot;, myExpection.getMessage());\r\n      }\r\n    }\r\n\r\nSo I need to mock the *get()* method to throw an expection to check if it is caught by my try/catch-block inside `sendRequest` and that the message of MyException is correct. \r\nBut my main problem is that *when(service.get(anyString())* doesn&#39;t work. \r\n\r\nThe ressult is \r\n\r\n&gt; Expected MyException to be thrown but nothing was thrown.","title":"Quarkus. How to mock method inside the method","body":"<p>The question is how to mock the method inside another method in the class.<br />\nFor example I have service:</p>\n<pre><code>@Getter\n@ApplicationScoped\npublic class Service{\n  public byte[] sendRequest(Integer id, String name){\n    try {\n      return get(id, name);\n    } catch (Exteption exception) {\n      throw new MyException(&quot;Error during get data &quot; + exception.getMEssage());\n    }  \n  }\n\n  public byte[] get(Integer id, String name){\n    ...some code...\n  }\n}\n</code></pre>\n<p>and test class</p>\n<pre><code>@QuakrusTest\npublic class ServiceTest{\n  \n  @InjectMock\n  Service service;\n\n  @Test\n  void test(){\n    when(service.get(anyInt(), anyString())).thenThrow(new RuntimeException(&quot;MyError&quot;);\n    MyException myExpection = assertThrows(MyException .class, () -&gt; service.sendRequest(1, &quot;name&quot;));\n    assertEquals(&quot;Error during get data MyError&quot;, myExpection.getMessage());\n  }\n}\n</code></pre>\n<p>So I need to mock the <em>get()</em> method to throw an expection to check if it is caught by my try/catch-block inside <code>sendRequest</code> and that the message of MyException is correct.\nBut my main problem is that <em>when(service.get(anyString())</em> doesn't work.</p>\n<p>The ressult is</p>\n<blockquote>\n<p>Expected MyException to be thrown but nothing was thrown.</p>\n</blockquote>\n"},{"tags":["java","list","object","return-type","object-type"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679433827,"post_id":75806359,"comment_id":133721197,"body_markdown":"I think there&#39;s a problem with the definition of `tasks`.  Can you show us that variable definition?","body":"I think there&#39;s a problem with the definition of <code>tasks</code>.  Can you show us that variable definition?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679433875,"post_id":75806359,"comment_id":133721214,"body_markdown":"Alternately, after the final brace of the `for` loop, you should return `null` if no object is found.","body":"Alternately, after the final brace of the <code>for</code> loop, you should return <code>null</code> if no object is found."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1679434569,"post_id":75806359,"comment_id":133721362,"body_markdown":"The problem is that your method **must** return something every time it is called. The way it is currently written it doesn&#39;t return anything if no task with the specific `taskID` that you pass as parameter is in the list - but even then your method **must** return something (or throw an exception).","body":"The problem is that your method <b>must</b> return something every time it is called. The way it is currently written it doesn&#39;t return anything if no task with the specific <code>taskID</code> that you pass as parameter is in the list - but even then your method <b>must</b> return something (or throw an exception)."}],"answers":[{"tags":[],"owner":{"account_id":28080092,"reputation":66,"user_id":21451316,"display_name":"Mitsuo Mori"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679434025,"creation_date":1679434025,"answer_id":75806483,"question_id":75806359,"body_markdown":"Instead of using &#39;==&#39; to compare strings, you can use the equals() method.\r\nThis is because &#39;==&#39; compares object references, not the contents of the strings themselves.\r\n\r\n    public Task getTask(String taskID) {\r\n        for (Task item : tasks) {\r\n            if (item.getTaskID().equals(taskID)) {\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"How can I make a java method return an object found in a list of objects?","body":"<p>Instead of using '==' to compare strings, you can use the equals() method.\nThis is because '==' compares object references, not the contents of the strings themselves.</p>\n<pre><code>public Task getTask(String taskID) {\n    for (Task item : tasks) {\n        if (item.getTaskID().equals(taskID)) {\n            return item;\n        }\n    }\n    return null;\n}\n</code></pre>\n"}],"owner":{"account_id":10185517,"reputation":3,"user_id":16409542,"display_name":"Fooze666"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679434794,"accepted_answer_id":75806483,"answer_count":1,"score":0,"last_activity_date":1679434025,"creation_date":1679432851,"question_id":75806359,"body_markdown":"I have this code:\r\n\r\n\r\n```\r\n\tpublic Task getTask(String taskID) {\r\n\t\t\r\n\t\tfor (Task item : tasks) {\r\n\t\t\tif (item.getTaskID() == taskID) {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nTask is an object type, and &quot;tasks&quot; is a list containting all objects of type Task.\r\n\r\nI want to iterate through the list and find the object where the taskID matches. This seems to work, but when I try to test or run, Eclipse tells me that this method &quot;must return an a result of type Task&quot;.\r\n\r\nI&#39;m not sure what I have wrong. If each &quot;item&quot; is an item in the list, shouldn&#39;t it be of type Task?\r\n\r\nI&#39;ve tried iterating through the list by index numbers as well and that doesn&#39;t seem to work either.","title":"How can I make a java method return an object found in a list of objects?","body":"<p>I have this code:</p>\n<pre><code>    public Task getTask(String taskID) {\n        \n        for (Task item : tasks) {\n            if (item.getTaskID() == taskID) {\n                return item;\n            }\n        }\n    }\n</code></pre>\n<p>Task is an object type, and &quot;tasks&quot; is a list containting all objects of type Task.</p>\n<p>I want to iterate through the list and find the object where the taskID matches. This seems to work, but when I try to test or run, Eclipse tells me that this method &quot;must return an a result of type Task&quot;.</p>\n<p>I'm not sure what I have wrong. If each &quot;item&quot; is an item in the list, shouldn't it be of type Task?</p>\n<p>I've tried iterating through the list by index numbers as well and that doesn't seem to work either.</p>\n"},{"tags":["java","maven","java-8","maven-3"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":6,"creation_date":1578312250,"post_id":59611777,"comment_id":105386587,"body_markdown":"Please show your pom file: `-parameters` this seemed to be an issue..?","body":"Please show your pom file: <code>-parameters</code> this seemed to be an issue..?"}],"answers":[{"tags":[],"owner":{"account_id":3504923,"reputation":377,"user_id":2930657,"display_name":"ARPAN CHAKARVARTY"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578314354,"creation_date":1578314354,"answer_id":59612291,"question_id":59611777,"body_markdown":"You have not set the **JAVA_HOME**. Please set the **JAVA_HOME** first and than execute the same command. ","title":"mvn clean install failed","body":"<p>You have not set the <strong>JAVA_HOME</strong>. Please set the <strong>JAVA_HOME</strong> first and than execute the same command. </p>\n"},{"tags":[],"owner":{"account_id":1511115,"reputation":2926,"user_id":1413222,"display_name":"devwebcl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1578332913,"creation_date":1578317545,"answer_id":59613042,"question_id":59611777,"body_markdown":"All points to be something is wrong in your JDK 1.8. (it is being compiled with JDK7 or older)\r\n\r\nA simple test with JDK 7 &amp; 8 respectively:\r\n\r\n(look the output in version 7:  **javac: invalid flag: -parameters**)\r\n\r\n    $ javac -version\r\n    javac 1.7.0_201\r\n    $ javac -parameters\r\n    javac: invalid flag: -parameters\r\n    Usage: javac &lt;options&gt; &lt;source files&gt;\r\n    use -help for a list of possible options\r\n\r\n\r\n    $ javac -version\r\n    javac 1.8.0_191\r\n    $ javac -parameters\r\n    javac: no source files\r\n    Usage: javac &lt;options&gt; &lt;source files&gt;\r\n    use -help for a list of possible options\r\n\r\n\r\n\r\n","title":"mvn clean install failed","body":"<p>All points to be something is wrong in your JDK 1.8. (it is being compiled with JDK7 or older)</p>\n\n<p>A simple test with JDK 7 &amp; 8 respectively:</p>\n\n<p>(look the output in version 7:  <strong>javac: invalid flag: -parameters</strong>)</p>\n\n<pre><code>$ javac -version\njavac 1.7.0_201\n$ javac -parameters\njavac: invalid flag: -parameters\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse -help for a list of possible options\n\n\n$ javac -version\njavac 1.8.0_191\n$ javac -parameters\njavac: no source files\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse -help for a list of possible options\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14543237,"reputation":49,"user_id":10504247,"display_name":"Apolinaire Nguemo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679433968,"creation_date":1679341953,"answer_id":75794717,"question_id":59611777,"body_markdown":"You must verify your java version and configuration\r\n\r\nin linux system execut this command : java --version","title":"mvn clean install failed","body":"<p>You must verify your java version and configuration</p>\n<p>in linux system execut this command : java --version</p>\n"}],"owner":{"account_id":6850437,"reputation":1477,"user_id":5267773,"accept_rate":43,"display_name":"Shalika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2064,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59613042,"answer_count":3,"score":0,"last_activity_date":1679433968,"creation_date":1578312184,"question_id":59611777,"body_markdown":"This is the pom file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.acs&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;acs2.0&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;acs2.0&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;java-jwt.version&gt;3.4.0&lt;/java-jwt.version&gt;\r\n    \t\t&lt;jackson.version&gt;2.9.7&lt;/jackson.version&gt;\r\n    \t\t&lt;gson.version&gt;2.8.5&lt;/gson.version&gt;\r\n    \t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.16.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.60&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${java-jwt.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n                &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.0.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.5.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.7&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n    \r\nThis is the error message.\r\n\r\n    [INFO] ---------------------------&lt; com.acs:acs2.0 &gt;---------------------------\r\n    [INFO] Building acs2.0 0.0.1-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO]\r\n    [INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ acs2.0 ---\r\n    [INFO] Deleting D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\r\n    [INFO]\r\n    [INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ acs2.0 ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 1 resource\r\n    [INFO] Copying 3 resources\r\n    [INFO]\r\n    [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ acs2.0 ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 139 source files to D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\\classes\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  3.477 s\r\n    [INFO] Finished at: 2020-01-06T17:23:09+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project acs2.0: Fatal error compiling: invalid flag: -parameters -&gt; [\r\n    Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n       \r\n\r\nIn above i added the pom.xml file and error message.\r\nI have use java 1.8 with maven 3.6.1 version.I have set the JAVA_HOME to 1.8 .The project build failed with following error.\r\nIs any one can describe how to fix this issue. it will be great helpful. Thanks in advance.\r\n","title":"mvn clean install failed","body":"<p>This is the pom file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.acs&lt;/groupId&gt;\n    &lt;artifactId&gt;acs2.0&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;acs2.0&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;java-jwt.version&gt;3.4.0&lt;/java-jwt.version&gt;\n        &lt;jackson.version&gt;2.9.7&lt;/jackson.version&gt;\n        &lt;gson.version&gt;2.8.5&lt;/gson.version&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;6.0.16.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n            &lt;version&gt;1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.60&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;${gson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;${java-jwt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;9.0.10&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n            &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n            &lt;version&gt;5.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\n            &lt;version&gt;6.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;3.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This is the error message.</p>\n\n<pre><code>[INFO] ---------------------------&lt; com.acs:acs2.0 &gt;---------------------------\n[INFO] Building acs2.0 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ acs2.0 ---\n[INFO] Deleting D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\n[INFO]\n[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ acs2.0 ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] Copying 3 resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ acs2.0 ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 139 source files to D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\\classes\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.477 s\n[INFO] Finished at: 2020-01-06T17:23:09+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project acs2.0: Fatal error compiling: invalid flag: -parameters -&gt; [\nHelp 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n\n<p>In above i added the pom.xml file and error message.\nI have use java 1.8 with maven 3.6.1 version.I have set the JAVA_HOME to 1.8 .The project build failed with following error.\nIs any one can describe how to fix this issue. it will be great helpful. Thanks in advance.</p>\n"},{"tags":["java","spring-boot","heroku"],"owner":{"account_id":28079768,"reputation":1,"user_id":21451036,"display_name":"Grzechu7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679432412,"creation_date":1679432412,"question_id":75806285,"body_markdown":"When I try load java kod from github to Heroku I have this error : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project curtainRod: Fatal error compiling: invalid target release: 17.\r\n\r\nMy  mvn --version is\r\nApache Maven 3.8.6 (...)\r\nMaven home: C:\\\\A\\_\\\\Java\\\\Maven\\\\apache-maven-3.8.6\r\nJava version: 17.0.6, vendor: Oracle Corporation, runtime: C:\\\\Program Files\\\\Java\\\\jdk-17\r\n\r\nplase help to solve this problem\r\nGrzegorz :-)\r\n\r\nmy pom.xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\nI change my java version from 16 to 17 and add to pom.xml plugin  org.apache.maven.plugins\r\n\r\n Heroku support java version 17.0.6\r\n\r\nbut I still have this problem, place help to solve this","title":"Failed to execute goal org.apache.maven.plugins: invalid target release: 17","body":"<p>When I try load java kod from github to Heroku I have this error : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project curtainRod: Fatal error compiling: invalid target release: 17.</p>\n<p>My  mvn --version is\nApache Maven 3.8.6 (...)\nMaven home: C:\\A_\\Java\\Maven\\apache-maven-3.8.6\nJava version: 17.0.6, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-17</p>\n<p>plase help to solve this problem\nGrzegorz :-)</p>\n<p>my pom.xml</p>\n\n<p>I change my java version from 16 to 17 and add to pom.xml plugin  org.apache.maven.plugins</p>\n<p>Heroku support java version 17.0.6</p>\n<p>but I still have this problem, place help to solve this</p>\n"},{"tags":["java","gradle","mp3","mp3agic"],"answers":[{"tags":[],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679432307,"creation_date":1679432307,"answer_id":75806274,"question_id":75771568,"body_markdown":"Fixed it:\r\n\r\n```\r\nimplementation &#39;org:jaudiotagger:2.0.3&#39;\r\n```\r\n\r\n```\r\n    public void upload(MultipartFile file){\r\n        // ....\r\n        String fileName = file.getOriginalFilename();\r\n        if (&quot;mp3&quot;.equals(extension)) {\r\n            try {\r\n                File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.mp3&quot;);\r\n                file.transferTo(tempFile);\r\n                AudioFile audioFile = AudioFileIO.read(tempFile);\r\n                sampleRate = audioFile.getAudioHeader().getSampleRateAsNumber();\r\n                duration = audioFile.getAudioHeader().getTrackLength();\r\n            } catch (Exception e) {\r\n                throw new Mp3Exception(&quot;Couldn&#39;t get mp3 fields: &quot; + e.getMessage())\r\n            }\r\n        }\r\n        // ....\r\n    }\r\n```","title":"mp3agic library java.io.IOException: Cannot delete temporary mp3 file from \\Tomcat\\localhost\\ROOT\\file.tmp","body":"<p>Fixed it:</p>\n<pre><code>implementation 'org:jaudiotagger:2.0.3'\n</code></pre>\n<pre><code>    public void upload(MultipartFile file){\n        // ....\n        String fileName = file.getOriginalFilename();\n        if (&quot;mp3&quot;.equals(extension)) {\n            try {\n                File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.mp3&quot;);\n                file.transferTo(tempFile);\n                AudioFile audioFile = AudioFileIO.read(tempFile);\n                sampleRate = audioFile.getAudioHeader().getSampleRateAsNumber();\n                duration = audioFile.getAudioHeader().getTrackLength();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n        }\n        // ....\n    }\n</code></pre>\n"}],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75806274,"answer_count":1,"score":1,"last_activity_date":1679432307,"creation_date":1679081791,"question_id":75771568,"body_markdown":"The code **works completly fine** but I get this exception:\r\n\r\n```\r\nCaused by: java.io.IOException: Cannot delete \r\nC:\\Users\\noob234\\AppData\\Local\\Temp\\tomcat.8080.5659248991534133251\\work\\Tomcat\\localhost\\ROOT\\upload_1723fa92_3db6_497a_9bdc_ac298b991fc8_00000000.tmp\r\n```\r\n\r\nI tried to somehow delete it or just add a sleep for one second, but unfortunatley I can&#39;t get rid of it.\r\n\r\nI am trying to get some fields from a multipart file. That multipart file is a mp3 file.\r\nHere is a snippet of the code:\r\n\r\n```\r\npublic void upload (MultipartFile file){\r\n// ....\r\n\r\nString fileName = file.getOriginalFilename();\r\nif (&quot;mp3&quot;.equals(extension)) {\r\n            try {\r\n                Mp3File mp3file = new Mp3File(fileName);\r\n                sampleRate = mp3file.getSampleRate();\r\n            } catch (Exception e) {\r\n                throw new Mp3Exception(&quot;Couldn&#39;t get mp3 fields: &quot; + e.getMessage())\r\n            }\r\n    }\r\n\r\n// ....\r\n```\r\n\r\nPlease keep in mind that I use in this project Java 8 and Gradle. Here is the dependency that I use:\r\n\r\n```\r\n\timplementation &#39;com.mpatric:mp3agic:0.9.1&#39;\r\n```\r\n\r\n","title":"mp3agic library java.io.IOException: Cannot delete temporary mp3 file from \\Tomcat\\localhost\\ROOT\\file.tmp","body":"<p>The code <strong>works completly fine</strong> but I get this exception:</p>\n<pre><code>Caused by: java.io.IOException: Cannot delete \nC:\\Users\\noob234\\AppData\\Local\\Temp\\tomcat.8080.5659248991534133251\\work\\Tomcat\\localhost\\ROOT\\upload_1723fa92_3db6_497a_9bdc_ac298b991fc8_00000000.tmp\n</code></pre>\n<p>I tried to somehow delete it or just add a sleep for one second, but unfortunatley I can't get rid of it.</p>\n<p>I am trying to get some fields from a multipart file. That multipart file is a mp3 file.\nHere is a snippet of the code:</p>\n<pre><code>public void upload (MultipartFile file){\n// ....\n\nString fileName = file.getOriginalFilename();\nif (&quot;mp3&quot;.equals(extension)) {\n            try {\n                Mp3File mp3file = new Mp3File(fileName);\n                sampleRate = mp3file.getSampleRate();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n    }\n\n// ....\n</code></pre>\n<p>Please keep in mind that I use in this project Java 8 and Gradle. Here is the dependency that I use:</p>\n<pre><code>    implementation 'com.mpatric:mp3agic:0.9.1'\n</code></pre>\n"},{"tags":["java","concurrency","completable-future"],"comments":[{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":2,"creation_date":1426174294,"post_id":29013831,"comment_id":46272671,"body_markdown":"I wonder if we can implement something like its static method supplyAsync but with some additional logic that will check if its completed or cancled will interrupt the thread it was executing for this task...","body":"I wonder if we can implement something like its static method supplyAsync but with some additional logic that will check if its completed or cancled will interrupt the thread it was executing for this task..."},{"owner":{"account_id":7334204,"reputation":199,"user_id":5586158,"display_name":"Valery Silaev"},"score":0,"creation_date":1463665116,"post_id":29013831,"comment_id":111989477,"body_markdown":"Please see my answer to related question:\nhttps://stackoverflow.com/questions/23301598/transform-java-future-into-a-completablefuture/37324409#37324409 In the code mentioned there, the CompletionStage behavior is added to RunnableFuture subclass (used by ExecutorService implementations), so you may interrupt it in the right way.","body":"Please see my answer to related question: <a href=\"https://stackoverflow.com/questions/23301598/transform-java-future-into-a-completablefuture/37324409#37324409\" title=\"transform java future into a completablefuture\">stackoverflow.com/questions/23301598/&hellip;</a> In the code mentioned there, the CompletionStage behavior is added to RunnableFuture subclass (used by ExecutorService implementations), so you may interrupt it in the right way."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1485008284,"creation_date":1426174913,"answer_id":29014156,"question_id":29013831,"body_markdown":"A [`CompletableFuture`][1] is not related to the asynchronous action that may eventually complete it.\r\n\r\n&gt; Since (unlike `FutureTask`) this class has no direct control over the\r\n&gt; computation that causes it to be completed, cancellation is treated as\r\n&gt; just another form of exceptional completion. Method `cancel` has the\r\n&gt; same effect as `completeExceptionally(new CancellationException())`.\r\n\r\nThere may not even _be_ a separate thread working on completing it (there may even be _many_ threads working on it). Even if there is, there&#39;s no link from a `CompletableFuture` to any thread that has a reference to it.\r\n\r\nAs such, there&#39;s nothing you can do through `CompletableFuture` to interrupt any thread that may be running some task that will complete it. You&#39;ll have to write your own logic which tracks any `Thread` instances which acquire a reference to the `CompletableFuture` with the intention to complete it.\r\n\r\n\r\n----------\r\n\r\nHere&#39;s an example of the type of execution I think you could get away with.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        ExecutorService service = Executors.newFixedThreadPool(1);\r\n        CompletableFuture&lt;String&gt; completable = new CompletableFuture&lt;&gt;();\r\n        Future&lt;?&gt; future = service.submit(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    if (Thread.interrupted()) {\r\n                        return; // remains uncompleted\r\n                    }\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException e) {\r\n                        return; // remains uncompleted\r\n                    }\r\n                }\r\n                completable.complete(&quot;done&quot;);\r\n            }\r\n        });\r\n\r\n        Thread.sleep(2000);\r\n\r\n        // not atomic across the two\r\n        boolean cancelled = future.cancel(true);\r\n        if (cancelled)\r\n            completable.cancel(true); // may not have been cancelled if execution has already completed\r\n        if (completable.isCancelled()) {\r\n            System.out.println(&quot;cancelled&quot;);\r\n        } else if (completable.isCompletedExceptionally()) {\r\n            System.out.println(&quot;exception&quot;);\r\n        } else {\r\n            System.out.println(&quot;success&quot;);\r\n        }\r\n        service.shutdown();\r\n    }\r\n\r\nThis assumes that the task being executed is setup to handle interruptions correctly.\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\"><code>CompletableFuture</code></a> is not related to the asynchronous action that may eventually complete it.</p>\n\n<blockquote>\n  <p>Since (unlike <code>FutureTask</code>) this class has no direct control over the\n  computation that causes it to be completed, cancellation is treated as\n  just another form of exceptional completion. Method <code>cancel</code> has the\n  same effect as <code>completeExceptionally(new CancellationException())</code>.</p>\n</blockquote>\n\n<p>There may not even <em>be</em> a separate thread working on completing it (there may even be <em>many</em> threads working on it). Even if there is, there's no link from a <code>CompletableFuture</code> to any thread that has a reference to it.</p>\n\n<p>As such, there's nothing you can do through <code>CompletableFuture</code> to interrupt any thread that may be running some task that will complete it. You'll have to write your own logic which tracks any <code>Thread</code> instances which acquire a reference to the <code>CompletableFuture</code> with the intention to complete it.</p>\n\n<hr>\n\n<p>Here's an example of the type of execution I think you could get away with.</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    ExecutorService service = Executors.newFixedThreadPool(1);\n    CompletableFuture&lt;String&gt; completable = new CompletableFuture&lt;&gt;();\n    Future&lt;?&gt; future = service.submit(new Runnable() {\n        @Override\n        public void run() {\n            for (int i = 0; i &lt; 10; i++) {\n                if (Thread.interrupted()) {\n                    return; // remains uncompleted\n                }\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    return; // remains uncompleted\n                }\n            }\n            completable.complete(\"done\");\n        }\n    });\n\n    Thread.sleep(2000);\n\n    // not atomic across the two\n    boolean cancelled = future.cancel(true);\n    if (cancelled)\n        completable.cancel(true); // may not have been cancelled if execution has already completed\n    if (completable.isCancelled()) {\n        System.out.println(\"cancelled\");\n    } else if (completable.isCompletedExceptionally()) {\n        System.out.println(\"exception\");\n    } else {\n        System.out.println(\"success\");\n    }\n    service.shutdown();\n}\n</code></pre>\n\n<p>This assumes that the task being executed is setup to handle interruptions correctly.</p>\n"},{"tags":[],"owner":{"account_id":2232407,"reputation":4006,"user_id":1969663,"display_name":"Ruben"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1426278925,"creation_date":1426278925,"answer_id":29041496,"question_id":29013831,"body_markdown":"What about this?\r\n\r\n\tpublic static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(final Supplier&lt;T&gt; supplier) {\r\n\r\n\t\tfinal ExecutorService executorService = Executors.newFixedThreadPool(1);\r\n\r\n\t\tfinal CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;T&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic boolean complete(T value) {\r\n\t\t\t\tif (isDone()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\texecutorService.shutdownNow();\r\n\t\t\t\treturn super.complete(value);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean completeExceptionally(Throwable ex) {\r\n\t\t\t\tif (isDone()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\texecutorService.shutdownNow();\r\n\t\t\t\treturn super.completeExceptionally(ex);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// submit task\r\n\t\texecutorService.submit(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tcf.complete(supplier.get());\r\n\t\t\t} catch (Throwable ex) {\r\n\t\t\t\tcf.completeExceptionally(ex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn cf;\r\n\t}\r\n\r\nSimple Test:\r\n\r\n\t\tCompletableFuture&lt;String&gt; cf = supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000L);\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tSystem.out.println(&quot;got interrupted&quot;);\r\n\t\t\t\treturn &quot;got interrupted&quot;;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;normal complete&quot;);\r\n\t\t\treturn &quot;normal complete&quot;;\r\n\t\t});\r\n\r\n\t\tcf.complete(&quot;manual complete&quot;);\r\n\t\tSystem.out.println(cf.get());\r\n\r\nI don&#39;t like the idea of having to create an Executor service every time, but maybe you can find a way to reuse the ForkJoinPool.","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>What about this?</p>\n\n<pre><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(final Supplier&lt;T&gt; supplier) {\n\n    final ExecutorService executorService = Executors.newFixedThreadPool(1);\n\n    final CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;T&gt;() {\n        @Override\n        public boolean complete(T value) {\n            if (isDone()) {\n                return false;\n            }\n            executorService.shutdownNow();\n            return super.complete(value);\n        }\n\n        @Override\n        public boolean completeExceptionally(Throwable ex) {\n            if (isDone()) {\n                return false;\n            }\n            executorService.shutdownNow();\n            return super.completeExceptionally(ex);\n        }\n    };\n\n    // submit task\n    executorService.submit(() -&gt; {\n        try {\n            cf.complete(supplier.get());\n        } catch (Throwable ex) {\n            cf.completeExceptionally(ex);\n        }\n    });\n\n    return cf;\n}\n</code></pre>\n\n<p>Simple Test:</p>\n\n<pre><code>    CompletableFuture&lt;String&gt; cf = supplyAsync(() -&gt; {\n        try {\n            Thread.sleep(1000L);\n        } catch (Exception e) {\n            System.out.println(\"got interrupted\");\n            return \"got interrupted\";\n        }\n        System.out.println(\"normal complete\");\n        return \"normal complete\";\n    });\n\n    cf.complete(\"manual complete\");\n    System.out.println(cf.get());\n</code></pre>\n\n<p>I don't like the idea of having to create an Executor service every time, but maybe you can find a way to reuse the ForkJoinPool.</p>\n"},{"tags":[],"owner":{"account_id":8713987,"reputation":169,"user_id":6519354,"display_name":"user6519354"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1541803819,"creation_date":1541803819,"answer_id":53234266,"question_id":29013831,"body_markdown":"What about?\r\n\r\n    /** @return {@link CompletableFuture} which when cancelled will interrupt the supplier\r\n     */\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsyncInterruptibly(Supplier&lt;T&gt; supplier, Executor executor) {\r\n        return produceInterruptibleCompletableFuture((s) -&gt; CompletableFuture.supplyAsync(s, executor), supplier);\r\n    }\r\n\r\n    // in case we want to do the same for similar methods later\r\n    private static &lt;T&gt; CompletableFuture&lt;T&gt; produceInterruptibleCompletableFuture(\r\n            Function&lt;Supplier&lt;T&gt;,CompletableFuture&lt;T&gt;&gt; completableFutureAsyncSupplier, Supplier&lt;T&gt; action) {\r\n        FutureTask&lt;T&gt; task = new FutureTask&lt;&gt;(action::get);\r\n        return addCancellationAction(completableFutureAsyncSupplier.apply(asSupplier(task)), () -&gt;\r\n                task.cancel(true));\r\n    }\r\n\r\n    /** Ensures the specified action is executed if the given {@link CompletableFuture} is cancelled.\r\n     */\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; addCancellationAction(CompletableFuture&lt;T&gt; completableFuture,\r\n                                                                 @NonNull Runnable onCancellationAction) {\r\n        completableFuture.whenComplete((result, throwable) -&gt; {\r\n            if (completableFuture.isCancelled()) {\r\n                onCancellationAction.run();\r\n            }\r\n        });\r\n        return completableFuture;  // return original CompletableFuture\r\n    }\r\n\r\n    /** @return {@link Supplier} wrapper for the given {@link RunnableFuture} which calls {@link RunnableFuture#run()}\r\n     *          followed by {@link RunnableFuture#get()}.\r\n     */\r\n    public static &lt;T&gt; Supplier&lt;T&gt; asSupplier(RunnableFuture&lt;T&gt; futureTask) throws CompletionException {\r\n        return () -&gt; {\r\n            try {\r\n                futureTask.run();\r\n                try {\r\n                    return futureTask.get();\r\n                } catch (ExecutionException e) {  // unwrap ExecutionExceptions\r\n                    final Throwable cause = e.getCause();\r\n                    throw (cause != null) ? cause : e;\r\n                }\r\n            } catch (CompletionException e) {\r\n                throw e;\r\n            } catch (Throwable t) {\r\n                throw new CompletionException(t);\r\n            }\r\n        };\r\n    }\r\n","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>What about?</p>\n\n<pre><code>/** @return {@link CompletableFuture} which when cancelled will interrupt the supplier\n */\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsyncInterruptibly(Supplier&lt;T&gt; supplier, Executor executor) {\n    return produceInterruptibleCompletableFuture((s) -&gt; CompletableFuture.supplyAsync(s, executor), supplier);\n}\n\n// in case we want to do the same for similar methods later\nprivate static &lt;T&gt; CompletableFuture&lt;T&gt; produceInterruptibleCompletableFuture(\n        Function&lt;Supplier&lt;T&gt;,CompletableFuture&lt;T&gt;&gt; completableFutureAsyncSupplier, Supplier&lt;T&gt; action) {\n    FutureTask&lt;T&gt; task = new FutureTask&lt;&gt;(action::get);\n    return addCancellationAction(completableFutureAsyncSupplier.apply(asSupplier(task)), () -&gt;\n            task.cancel(true));\n}\n\n/** Ensures the specified action is executed if the given {@link CompletableFuture} is cancelled.\n */\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; addCancellationAction(CompletableFuture&lt;T&gt; completableFuture,\n                                                             @NonNull Runnable onCancellationAction) {\n    completableFuture.whenComplete((result, throwable) -&gt; {\n        if (completableFuture.isCancelled()) {\n            onCancellationAction.run();\n        }\n    });\n    return completableFuture;  // return original CompletableFuture\n}\n\n/** @return {@link Supplier} wrapper for the given {@link RunnableFuture} which calls {@link RunnableFuture#run()}\n *          followed by {@link RunnableFuture#get()}.\n */\npublic static &lt;T&gt; Supplier&lt;T&gt; asSupplier(RunnableFuture&lt;T&gt; futureTask) throws CompletionException {\n    return () -&gt; {\n        try {\n            futureTask.run();\n            try {\n                return futureTask.get();\n            } catch (ExecutionException e) {  // unwrap ExecutionExceptions\n                final Throwable cause = e.getCause();\n                throw (cause != null) ? cause : e;\n            }\n        } catch (CompletionException e) {\n            throw e;\n        } catch (Throwable t) {\n            throw new CompletionException(t);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":259109,"reputation":2800,"user_id":541755,"accept_rate":71,"display_name":"jontejj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553000443,"creation_date":1553000443,"answer_id":55241692,"question_id":29013831,"body_markdown":"If you use\r\n\r\n    cf.get();\r\n\r\ninstead of\r\n\r\n    cf.join();\r\n\r\nThe thread waiting on the completion can be interrupted. This bit me in the a**, so I&#39;m just putting it out there. You&#39;d then need to propagate this interruption further / use cf.cancel(...) to really finish the execution.","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>If you use</p>\n\n<pre><code>cf.get();\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>cf.join();\n</code></pre>\n\n<p>The thread waiting on the completion can be interrupted. This bit me in the a**, so I'm just putting it out there. You'd then need to propagate this interruption further / use cf.cancel(...) to really finish the execution.</p>\n"},{"tags":[],"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611157973,"creation_date":1611157973,"answer_id":65812966,"question_id":29013831,"body_markdown":"I had similar issue wherein I needed to simulate a InterruptedException.\r\n\r\nI mocked the method call that is supposed to return the CompletetableFuture, and I put a spy on return value such that `CompletableFuture#get` will throw the exception.\r\n\r\nIt worked as I expected, and I was able to test that code handled the exception correctly.\r\n\r\n```\r\n        CompletableFuture spiedFuture = spy(CompletableFuture.completedFuture(null));\r\n        when(spiedFuture .get()).thenThrow(new InterruptedException());\r\n\r\n        when(servuce.getById(anyString())).thenReturn(spiedFuture );\r\n```\r\n","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>I had similar issue wherein I needed to simulate a InterruptedException.</p>\n<p>I mocked the method call that is supposed to return the CompletetableFuture, and I put a spy on return value such that <code>CompletableFuture#get</code> will throw the exception.</p>\n<p>It worked as I expected, and I was able to test that code handled the exception correctly.</p>\n<pre><code>        CompletableFuture spiedFuture = spy(CompletableFuture.completedFuture(null));\n        when(spiedFuture .get()).thenThrow(new InterruptedException());\n\n        when(servuce.getById(anyString())).thenReturn(spiedFuture );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616878994,"creation_date":1616878994,"answer_id":66836057,"question_id":29013831,"body_markdown":"Here is a ultra-short version to create a `Future` task that can be cancelled:\r\n\r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; operation) {\r\n    \tCompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;();\r\n    \treturn future.completeAsync(() -&gt; operation.apply(future));\r\n    }\r\n\r\nThe `CompletableFuture` is passed to the operation `Function` to be able to check the cancel status of the `Future`:\r\n\r\n    Future&lt;Result&gt; future = supplyAsync(task -&gt; {\r\n       while (!task.isCancelled()) {\r\n    \t   // computation\r\n       }\r\n       return result;\r\n    });\r\n    // later you may cancel\r\n    future.cancel(false);\r\n    // or retrieve the result\r\n    Result result = future.get(5, TimeUnit.SECONDS);\r\n\r\nThis however does not interrupt the `Thread` running the operation. If you also want to be able to interrupt the `Thread`, then you have to store a reference to it and override `Future.cancel(..)` to interrupt it.\r\n\r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action) {\r\n    \treturn supplyAsync(action, r -&gt; new Thread(r).start());\r\n    }\r\n    \r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action, Executor executor) {\r\n    \r\n    \tAtomicReference&lt;Thread&gt; interruptThread = new AtomicReference&lt;&gt;();\r\n    \tCompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;() {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic boolean cancel(boolean mayInterruptIfRunning) {\r\n    \t\t\tif (!interruptThread.compareAndSet(null, Thread.currentThread()) \r\n                       &amp;&amp; mayInterruptIfRunning) {\r\n    \t\t\t\tinterruptThread.get().interrupt();\r\n    \t\t\t}\r\n    \t\t\treturn super.cancel(mayInterruptIfRunning);\r\n    \t\t}\r\n    \t};\r\n    \r\n    \texecutor.execute(() -&gt; {\r\n    \t\tif (interruptThread.compareAndSet(null, Thread.currentThread())) try {\r\n    \t\t\tfuture.complete(action.apply(future));\r\n    \t\t} catch (Throwable e) {\r\n    \t\t\tfuture.completeExceptionally(e);\r\n    \t\t}\r\n    \t});\r\n    \r\n    \treturn future;\r\n    }\r\n\r\nThe following test checks that the `Thread` executing our `Function` got interrupted:\r\n\r\n    @Test\r\n    void supplyAsyncWithCancelOnInterrupt() throws Exception {\r\n        Object lock = new Object();\r\n        CountDownLatch done = new CountDownLatch(1);\r\n        CountDownLatch started = new CountDownLatch(1);\r\n\r\n        Future&lt;Object&gt; future = supplyAsync(m -&gt; {\r\n            started.countDown();\r\n            synchronized (lock) {\r\n                try {\r\n                    lock.wait(); // let&#39;s get interrupted\r\n                } catch (InterruptedException e) {\r\n                    done.countDown();\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n\r\n        assertFalse(future.isCancelled());\r\n        assertFalse(future.isDone());\r\n\r\n        assertTrue(started.await(5, TimeUnit.SECONDS));\r\n        assertTrue(future.cancel(true));\r\n\r\n        assertTrue(future.isCancelled());\r\n        assertTrue(future.isDone());\r\n        assertThrows(CancellationException.class, () -&gt; future.get());\r\n        assertTrue(done.await(5, TimeUnit.SECONDS));\r\n    }","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>Here is a ultra-short version to create a <code>Future</code> task that can be cancelled:</p>\n<pre><code>public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; operation) {\n    CompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;();\n    return future.completeAsync(() -&gt; operation.apply(future));\n}\n</code></pre>\n<p>The <code>CompletableFuture</code> is passed to the operation <code>Function</code> to be able to check the cancel status of the <code>Future</code>:</p>\n<pre><code>Future&lt;Result&gt; future = supplyAsync(task -&gt; {\n   while (!task.isCancelled()) {\n       // computation\n   }\n   return result;\n});\n// later you may cancel\nfuture.cancel(false);\n// or retrieve the result\nResult result = future.get(5, TimeUnit.SECONDS);\n</code></pre>\n<p>This however does not interrupt the <code>Thread</code> running the operation. If you also want to be able to interrupt the <code>Thread</code>, then you have to store a reference to it and override <code>Future.cancel(..)</code> to interrupt it.</p>\n<pre><code>public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action) {\n    return supplyAsync(action, r -&gt; new Thread(r).start());\n}\n\npublic static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action, Executor executor) {\n\n    AtomicReference&lt;Thread&gt; interruptThread = new AtomicReference&lt;&gt;();\n    CompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;() {\n\n        @Override\n        public boolean cancel(boolean mayInterruptIfRunning) {\n            if (!interruptThread.compareAndSet(null, Thread.currentThread()) \n                   &amp;&amp; mayInterruptIfRunning) {\n                interruptThread.get().interrupt();\n            }\n            return super.cancel(mayInterruptIfRunning);\n        }\n    };\n\n    executor.execute(() -&gt; {\n        if (interruptThread.compareAndSet(null, Thread.currentThread())) try {\n            future.complete(action.apply(future));\n        } catch (Throwable e) {\n            future.completeExceptionally(e);\n        }\n    });\n\n    return future;\n}\n</code></pre>\n<p>The following test checks that the <code>Thread</code> executing our <code>Function</code> got interrupted:</p>\n<pre><code>@Test\nvoid supplyAsyncWithCancelOnInterrupt() throws Exception {\n    Object lock = new Object();\n    CountDownLatch done = new CountDownLatch(1);\n    CountDownLatch started = new CountDownLatch(1);\n\n    Future&lt;Object&gt; future = supplyAsync(m -&gt; {\n        started.countDown();\n        synchronized (lock) {\n            try {\n                lock.wait(); // let's get interrupted\n            } catch (InterruptedException e) {\n                done.countDown();\n            }\n        }\n        return null;\n    });\n\n    assertFalse(future.isCancelled());\n    assertFalse(future.isDone());\n\n    assertTrue(started.await(5, TimeUnit.SECONDS));\n    assertTrue(future.cancel(true));\n\n    assertTrue(future.isCancelled());\n    assertTrue(future.isDone());\n    assertThrows(CancellationException.class, () -&gt; future.get());\n    assertTrue(done.await(5, TimeUnit.SECONDS));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5686053,"reputation":41,"user_id":4495592,"display_name":"Arturo Bernal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679432188,"creation_date":1679432188,"answer_id":75806262,"question_id":29013831,"body_markdown":"If you want to interrupt the underlying execution of a CompletableFuture, you can use the completeExceptionally method to complete the future with an exception. When you do this, any dependent CompletableFuture will be notified with the same exception, and any callback that you have set up with the whenComplete method will be called with the exception.\r\n\r\nFor example, let&#39;s say you have a CompletableFuture that represents a long-running computation:\r\n\r\n    CompletableFuture&lt;String&gt; computation = CompletableFuture.supplyAsync(() -&gt; {\r\n    // long-running computation here\r\n    return &quot;result&quot;;});\r\n\r\nIf you want to interrupt this computation when the CompletableFuture is canceled, you can add a callback to the CompletableFuture like this:\r\n\r\n    computation.whenComplete((result, exception) -&gt; {\r\n    if (exception instanceof CancellationException) {\r\n        // interrupt the computation here\r\n   }});\r\n\r\nInside the callback, you can check if the exception is a CancellationException, which is thrown when the CompletableFuture is canceled. If it is, you can interrupt the computation in whatever way is appropriate.\r\n\r\nAlternatively, you can complete the CompletableFuture with an exception like this:\r\n\r\n    computation.completeExceptionally(new CancellationException());","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>If you want to interrupt the underlying execution of a CompletableFuture, you can use the completeExceptionally method to complete the future with an exception. When you do this, any dependent CompletableFuture will be notified with the same exception, and any callback that you have set up with the whenComplete method will be called with the exception.</p>\n<p>For example, let's say you have a CompletableFuture that represents a long-running computation:</p>\n<pre><code>CompletableFuture&lt;String&gt; computation = CompletableFuture.supplyAsync(() -&gt; {\n// long-running computation here\nreturn &quot;result&quot;;});\n</code></pre>\n<p>If you want to interrupt this computation when the CompletableFuture is canceled, you can add a callback to the CompletableFuture like this:</p>\n<pre><code>computation.whenComplete((result, exception) -&gt; {\nif (exception instanceof CancellationException) {\n    // interrupt the computation here\n</code></pre>\n<p>}});</p>\n<p>Inside the callback, you can check if the exception is a CancellationException, which is thrown when the CompletableFuture is canceled. If it is, you can interrupt the computation in whatever way is appropriate.</p>\n<p>Alternatively, you can complete the CompletableFuture with an exception like this:</p>\n<pre><code>computation.completeExceptionally(new CancellationException());\n</code></pre>\n"}],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26266,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":29014156,"answer_count":7,"score":34,"last_activity_date":1679432188,"creation_date":1426174051,"question_id":29013831,"body_markdown":"I know that `CompletableFuture` design does not control its execution with interruptions, but I suppose some of you might have this problem. `CompletableFuture`s are very good way to compose async execution, but given the case when you want the underlying execution to be interrupted or stopped when future is canceled, how do we do that? Or we must just accept that any canceled or manually completed `CompletableFuture` will not impact the thread working out there to complete it?\r\n\r\nThat is, in my opinion, obviously a useless work that takes time of executor worker. I wonder what approach or design might help in this case?\r\n\r\n**UPDATE** \r\n\r\nHere is a simple test for this\r\n\r\n    public class SimpleTest {\r\n    \r\n      @Test\r\n      public void testCompletableFuture() throws Exception {\r\n        CompletableFuture&lt;Void&gt; cf = CompletableFuture.runAsync(()-&gt;longOperation());\r\n    \r\n        bearSleep(1);\r\n    \r\n        //cf.cancel(true);\r\n        cf.complete(null);\r\n        \r\n        System.out.println(&quot;it should die now already&quot;);\r\n        bearSleep(7);\r\n      }\r\n    \r\n      public static void longOperation(){\r\n        System.out.println(&quot;started&quot;);\r\n        bearSleep(5);\r\n        System.out.println(&quot;completed&quot;);\r\n      }\r\n    \r\n      private static void bearSleep(long seconds){\r\n        try {\r\n          TimeUnit.SECONDS.sleep(seconds);\r\n        } catch (InterruptedException e) {\r\n          System.out.println(&quot;OMG!!! Interrupt!!!&quot;);\r\n        }\r\n      }\r\n    }","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>I know that <code>CompletableFuture</code> design does not control its execution with interruptions, but I suppose some of you might have this problem. <code>CompletableFuture</code>s are very good way to compose async execution, but given the case when you want the underlying execution to be interrupted or stopped when future is canceled, how do we do that? Or we must just accept that any canceled or manually completed <code>CompletableFuture</code> will not impact the thread working out there to complete it?</p>\n\n<p>That is, in my opinion, obviously a useless work that takes time of executor worker. I wonder what approach or design might help in this case?</p>\n\n<p><strong>UPDATE</strong> </p>\n\n<p>Here is a simple test for this</p>\n\n<pre><code>public class SimpleTest {\n\n  @Test\n  public void testCompletableFuture() throws Exception {\n    CompletableFuture&lt;Void&gt; cf = CompletableFuture.runAsync(()-&gt;longOperation());\n\n    bearSleep(1);\n\n    //cf.cancel(true);\n    cf.complete(null);\n\n    System.out.println(\"it should die now already\");\n    bearSleep(7);\n  }\n\n  public static void longOperation(){\n    System.out.println(\"started\");\n    bearSleep(5);\n    System.out.println(\"completed\");\n  }\n\n  private static void bearSleep(long seconds){\n    try {\n      TimeUnit.SECONDS.sleep(seconds);\n    } catch (InterruptedException e) {\n      System.out.println(\"OMG!!! Interrupt!!!\");\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","gradle","build.gradle","properties-file","system-properties"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679431914,"creation_date":1679431914,"answer_id":75806242,"question_id":75806033,"body_markdown":"You can&#39;t use the `getResourceAsStream` method then.  This can&#39;t be overridden with system properties as you show in your example.\r\n\r\nIt&#39;s not clear what your overall environment is but systems like Quarkus include a [configuration subsystem](https://quarkus.io/guides/config) to help you do exactly this.  You can use system properties, environment variables, and files.\r\n\r\nFor smaller command line type applications I&#39;ve used [Apache Commons configuration](https://commons.apache.org/proper/commons-configuration/) that also can read from a variety of places.  It&#39;s simple and has a very large number of sources.","title":"How to update java project properties with gradle commandline","body":"<p>You can't use the <code>getResourceAsStream</code> method then.  This can't be overridden with system properties as you show in your example.</p>\n<p>It's not clear what your overall environment is but systems like Quarkus include a <a href=\"https://quarkus.io/guides/config\" rel=\"nofollow noreferrer\">configuration subsystem</a> to help you do exactly this.  You can use system properties, environment variables, and files.</p>\n<p>For smaller command line type applications I've used <a href=\"https://commons.apache.org/proper/commons-configuration/\" rel=\"nofollow noreferrer\">Apache Commons configuration</a> that also can read from a variety of places.  It's simple and has a very large number of sources.</p>\n"}],"owner":{"account_id":14310566,"reputation":15,"user_id":10336969,"display_name":"leblanc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75806242,"answer_count":1,"score":0,"last_activity_date":1679431914,"creation_date":1679430209,"question_id":75806033,"body_markdown":"I&#39;m working on a java project and currently loading properties by:\r\n\r\n```\r\n properties.load(ConfigProperty.class.getClassLoader().getResourceAsStream(&quot;project.properties&quot;));\r\n```\r\nBut sometimes I also need to run from command line and pass values to override the values in project.properties.\r\n\r\nI tried something like this(user is a key in properties), but doesn&#39;t really work. \r\n\r\n```\r\ngradle gatlingRun -Duser=1\r\n\r\n```\r\nWhat should be the proper way to do it?\r\n\r\nIs it the way properties.load limiting it to only read from file? Should change this part?","title":"How to update java project properties with gradle commandline","body":"<p>I'm working on a java project and currently loading properties by:</p>\n<pre><code> properties.load(ConfigProperty.class.getClassLoader().getResourceAsStream(&quot;project.properties&quot;));\n</code></pre>\n<p>But sometimes I also need to run from command line and pass values to override the values in project.properties.</p>\n<p>I tried something like this(user is a key in properties), but doesn't really work.</p>\n<pre><code>gradle gatlingRun -Duser=1\n\n</code></pre>\n<p>What should be the proper way to do it?</p>\n<p>Is it the way properties.load limiting it to only read from file? Should change this part?</p>\n"},{"tags":["java","ip","inetaddress"],"comments":[{"owner":{"account_id":356126,"reputation":2934,"user_id":695457,"accept_rate":84,"display_name":"rob"},"score":0,"creation_date":1302122619,"post_id":5571744,"comment_id":6339822,"body_markdown":"Didn&#39;t find this one, it is indeed the same problem.","body":"Didn&#39;t find this one, it is indeed the same problem."}],"answers":[{"tags":[],"owner":{"account_id":355051,"reputation":3995,"user_id":693765,"display_name":"Justin Waugh"},"down_vote_count":5,"up_vote_count":193,"is_accepted":true,"score":188,"last_activity_date":1679431805,"creation_date":1302117707,"answer_id":5571816,"question_id":5571744,"body_markdown":"Simply call [`InetAddress.getByName(String host)`][1] passing in your textual IP address.\r\n\r\nFrom the javadoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\r\n","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<p>Simply call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>InetAddress.getByName(String host)</code></a> passing in your textual IP address.</p>\n<p>From the javadoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.</p>\n"},{"tags":[],"owner":{"account_id":25166,"reputation":29119,"user_id":64495,"accept_rate":67,"display_name":"Bj&#246;rn"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1679431739,"creation_date":1302117736,"answer_id":5571823,"question_id":5571744,"body_markdown":"From the documentation of [`InetAddress.getByName(String host)`][1]:\r\n\r\n&gt; The host name can either be a machine\r\n&gt; name, such as &quot;java.sun.com&quot;, or a\r\n&gt; textual representation of its IP\r\n&gt; address. If a literal IP address is\r\n&gt; supplied, only the validity of the\r\n&gt; address format is checked.\r\n\r\nSo you can use it.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<p>From the documentation of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>InetAddress.getByName(String host)</code></a>:</p>\n<blockquote>\n<p>The host name can either be a machine\nname, such as &quot;java.sun.com&quot;, or a\ntextual representation of its IP\naddress. If a literal IP address is\nsupplied, only the validity of the\naddress format is checked.</p>\n</blockquote>\n<p>So you can use it.</p>\n"}],"owner":{"account_id":356126,"reputation":2934,"user_id":695457,"accept_rate":84,"display_name":"rob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181143,"favorite_count":0,"down_vote_count":0,"up_vote_count":99,"closed_date":1338001510,"accepted_answer_id":5571816,"answer_count":2,"score":99,"last_activity_date":1679431805,"creation_date":1302117343,"question_id":5571744,"body_markdown":"&gt; **Possible Duplicate:**  \n&gt; [Is there an easy way to convert String to Inetaddress in Java?](https://stackoverflow.com/questions/2309049/is-there-an-easy-way-to-convert-string-to-inetaddress-in-java)  \n\n&lt;!-- End of automatically inserted text --&gt;\n\nI&#39;m  trying to convert a string(representing an IP address, e.g. `10.0.2.50`) into an `InetAddress` obj. \r\n\r\nAccording to the API it is possible to create an Object providing a String representing a hostname (e.g. `www.google.ch`). This is not an option for me since I do not have the hostname for each InetAddress object I want to create(besides that it takes too long).\r\n\r\nIs it possible to convert a String (e.g. `10.0.2.50`) into an `InetAddress` obj.? (according to the api it is possible to do so if you have the IP as `byte[]`, but how do I convert a `String` containing an IP into `byte[]`?)","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"https://stackoverflow.com/questions/2309049/is-there-an-easy-way-to-convert-string-to-inetaddress-in-java\">Is there an easy way to convert String to Inetaddress in Java?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm  trying to convert a string(representing an IP address, e.g. <code>10.0.2.50</code>) into an <code>InetAddress</code> obj. </p>\n\n<p>According to the API it is possible to create an Object providing a String representing a hostname (e.g. <code>www.google.ch</code>). This is not an option for me since I do not have the hostname for each InetAddress object I want to create(besides that it takes too long).</p>\n\n<p>Is it possible to convert a String (e.g. <code>10.0.2.50</code>) into an <code>InetAddress</code> obj.? (according to the api it is possible to do so if you have the IP as <code>byte[]</code>, but how do I convert a <code>String</code> containing an IP into <code>byte[]</code>?)</p>\n"},{"tags":["java","compilation","visual-studio-code"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1521758337,"post_id":49439522,"comment_id":85881122,"body_markdown":"Read the documentation for VSCode and the Java pack?  BTW,t he link you gave for the Java pack is invalid.","body":"Read the documentation for VSCode and the Java pack?  BTW,t he link you gave for the Java pack is invalid."}],"answers":[{"tags":[],"owner":{"account_id":6263340,"reputation":374,"user_id":4869825,"display_name":"Martin Aeschlimann"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1521883919,"creation_date":1521883919,"answer_id":49463190,"question_id":49439522,"body_markdown":"As a first step, try to compile your programm from te command line. E.g.\r\nhttps://stackoverflow.com/questions/16137713/how-do-i-run-a-java-program-from-the-command-line-on-windows is a good start. You can run the commands directly in VSCode&#39;s integrated terminal.\r\nOptionally, create a VS Code build task from that command to run builds with the build command.\r\n\r\n    {\r\n        &quot;version&quot;: &quot;2.0.0&quot;,\r\n        &quot;tasks&quot;: [\r\n            {\r\n                &quot;label&quot;: &quot;Build Foo&quot;,\r\n                &quot;type&quot;: &quot;shell&quot;,\r\n                &quot;command&quot;: &quot;javac foo.java&quot;,\r\n                &quot;problemMatcher&quot;: []\r\n            }\r\n        ]\r\n    }\r\n\r\n\r\nTo run/debug, create a launch config in the debug viewlet, for example:\r\n\r\n \r\n\r\n       // Use IntelliSense to learn about possible attributes.\r\n        // Hover to view descriptions of existing attributes.\r\n        // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\r\n        &quot;version&quot;: &quot;0.2.0&quot;,\r\n        &quot;configurations&quot;: [\r\n            {\r\n                &quot;type&quot;: &quot;java&quot;,\r\n                &quot;name&quot;: &quot;Debug (Launch)-Foo&quot;,\r\n                &quot;request&quot;: &quot;launch&quot;,\r\n                &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,\r\n                &quot;console&quot;: &quot;internalConsole&quot;,\r\n                &quot;stopOnEntry&quot;: false,\r\n                &quot;mainClass&quot;: &quot;Foo&quot;,\r\n                &quot;args&quot;: &quot;&quot;\r\n            },\r\n            {\r\n                &quot;type&quot;: &quot;java&quot;,\r\n                &quot;name&quot;: &quot;Debug (Attach)&quot;,\r\n                &quot;request&quot;: &quot;attach&quot;,\r\n                &quot;hostName&quot;: &quot;localhost&quot;,\r\n                &quot;port&quot;: 0\r\n            }\r\n        ]\r\n    }\r\n\r\n","title":"How to compile and run Java code in Visual Studio Code","body":"<p>As a first step, try to compile your programm from te command line. E.g.\n<a href=\"https://stackoverflow.com/questions/16137713/how-do-i-run-a-java-program-from-the-command-line-on-windows\">How do I run a Java program from the command line on Windows?</a> is a good start. You can run the commands directly in VSCode's integrated terminal.\nOptionally, create a VS Code build task from that command to run builds with the build command.</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"Build Foo\",\n            \"type\": \"shell\",\n            \"command\": \"javac foo.java\",\n            \"problemMatcher\": []\n        }\n    ]\n}\n</code></pre>\n\n<p>To run/debug, create a launch config in the debug viewlet, for example:</p>\n\n<pre><code>   // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Launch)-Foo\",\n            \"request\": \"launch\",\n            \"cwd\": \"${workspaceFolder}\",\n            \"console\": \"internalConsole\",\n            \"stopOnEntry\": false,\n            \"mainClass\": \"Foo\",\n            \"args\": \"\"\n        },\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Attach)\",\n            \"request\": \"attach\",\n            \"hostName\": \"localhost\",\n            \"port\": 0\n        }\n    ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":368965,"reputation":929,"user_id":716073,"display_name":"Fergara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658812591,"creation_date":1559602412,"answer_id":56435454,"question_id":49439522,"body_markdown":"Here are the overall steps:\r\n\r\n - Install the Java Extension Pack --&gt; you did this already\r\n - Create a Java project: `Ctrl + Shift + P` and type &quot;Java&quot;. Choose the option &quot;Java: Create Java Project&quot;\r\n - Modify the App.java class and save it: `Ctrl + S`\r\n \r\nWhen you save it, VS Code automatically compiles the java files for you. In the **bin/app** directory you&#39;ll see a file called &quot;App.class&quot;. That&#39;s the confirmation you need.\r\n\r\n**Edit**: Running the project:\r\nTo run the project, hit F5. VSCode will ask if you want to add a configuration. Choose &quot;Java: Launch Program&quot;. Make sure you have App.java opened and hit F5 one more time. That&#39;s it.\r\n\r\nI noticed that VSCode does not deal well with packages, but that is for another question.","title":"How to compile and run Java code in Visual Studio Code","body":"<p>Here are the overall steps:</p>\n<ul>\n<li>Install the Java Extension Pack --&gt; you did this already</li>\n<li>Create a Java project: <code>Ctrl + Shift + P</code> and type &quot;Java&quot;. Choose the option &quot;Java: Create Java Project&quot;</li>\n<li>Modify the App.java class and save it: <code>Ctrl + S</code></li>\n</ul>\n<p>When you save it, VS Code automatically compiles the java files for you. In the <strong>bin/app</strong> directory you'll see a file called &quot;App.class&quot;. That's the confirmation you need.</p>\n<p><strong>Edit</strong>: Running the project:\nTo run the project, hit F5. VSCode will ask if you want to add a configuration. Choose &quot;Java: Launch Program&quot;. Make sure you have App.java opened and hit F5 one more time. That's it.</p>\n<p>I noticed that VSCode does not deal well with packages, but that is for another question.</p>\n"}],"owner":{"account_id":13205515,"reputation":53,"user_id":9537405,"display_name":"hgd6o"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43592,"favorite_count":0,"down_vote_count":3,"up_vote_count":5,"accepted_answer_id":49463190,"answer_count":2,"score":2,"last_activity_date":1679431584,"creation_date":1521758042,"question_id":49439522,"body_markdown":"I downloaded Visual Studio Code and installed the &quot;[Java Extension Pack][1]&quot; by Microsoft.\r\n\r\nAfterwards I downloaded the jdk1.8.0_161 and created the required environment variables as described in the &quot;Java Extension Pack&quot; documentation.\r\n\r\nI then created a new file with .java ending and wrote a simple &quot;Hello World&quot; test program.\r\n\r\nBut how can I now compile and run the code?\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack","title":"How to compile and run Java code in Visual Studio Code","body":"<p>I downloaded Visual Studio Code and installed the \"<a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"noreferrer\">Java Extension Pack</a>\" by Microsoft.</p>\n\n<p>Afterwards I downloaded the jdk1.8.0_161 and created the required environment variables as described in the \"Java Extension Pack\" documentation.</p>\n\n<p>I then created a new file with .java ending and wrote a simple \"Hello World\" test program.</p>\n\n<p>But how can I now compile and run the code?</p>\n"},{"tags":["java","algorithm","exception","math","bigint"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1679405665,"post_id":75801139,"comment_id":133713170,"body_markdown":"You cannot gain precision from an existing value that is not *already there*, simply by changing the type. If you compute `int x = 1000000000 * 1000000000`, the result will overflow a 32-bit integer, and there is **no calculation you can do with** the resulting `int` that will give you the correct result, for the simple reason that there are **many other values** that would overflow to **the same result**. You can&#39;t turn a pile of hamburgers into a cow.","body":"You cannot gain precision from an existing value that is not <i>already there</i>, simply by changing the type. If you compute <code>int x = 1000000000 * 1000000000</code>, the result will overflow a 32-bit integer, and there is <b>no calculation you can do with</b> the resulting <code>int</code> that will give you the correct result, for the simple reason that there are <b>many other values</b> that would overflow to <b>the same result</b>. You can&#39;t turn a pile of hamburgers into a cow."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679406261,"post_id":75801139,"comment_id":133713370,"body_markdown":"@KarlKnechtel yes, I know and agree with you. The best would be some mathematical method to preserve the value in order of magnitude. I would be particularly interested to know what others do at such situations. Maybe they transform the input numbers somehow to get a similar result in order of magnitude. Would be great to know.","body":"@KarlKnechtel yes, I know and agree with you. The best would be some mathematical method to preserve the value in order of magnitude. I would be particularly interested to know what others do at such situations. Maybe they transform the input numbers somehow to get a similar result in order of magnitude. Would be great to know."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1679406356,"post_id":75801139,"comment_id":133713400,"body_markdown":"Are you looking for the actual mathematical algorithm? Do you need an exact result? If so, exactly how is this a *programming* question, and not a *math* question?","body":"Are you looking for the actual mathematical algorithm? Do you need an exact result? If so, exactly how is this a <i>programming</i> question, and not a <i>math</i> question?"},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679406819,"post_id":75801139,"comment_id":133713570,"body_markdown":"@KarlKnechtel I don&#39;t need the exact number, but I have to prepare the code to give similar magnitude of results when using different number pairs. For example, in some situations I have to calculate 3 choose 2, in another situation I have to calculate 3000 choose 20. The magnitude of the result should be considered.","body":"@KarlKnechtel I don&#39;t need the exact number, but I have to prepare the code to give similar magnitude of results when using different number pairs. For example, in some situations I have to calculate 3 choose 2, in another situation I have to calculate 3000 choose 20. The magnitude of the result should be considered."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1679422378,"post_id":75801139,"comment_id":133718551,"body_markdown":"It sounds like you don&#39;t need an exact result. If so, you can write out the binomial as a ratio of factorials and use Stirling&#39;s approximation to approximate the factorials. Another approach is to work with the logarithm of the binomial coefficient -- look for a log-gamma function and compute log(binomial) in terms of that, or just compute log(binomial) in terms of a difference of summation over log(something) terms.","body":"It sounds like you don&#39;t need an exact result. If so, you can write out the binomial as a ratio of factorials and use Stirling&#39;s approximation to approximate the factorials. Another approach is to work with the logarithm of the binomial coefficient -- look for a log-gamma function and compute log(binomial) in terms of that, or just compute log(binomial) in terms of a difference of summation over log(something) terms."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1679422476,"post_id":75801139,"comment_id":133718574,"body_markdown":"@KarlKnechtel I don&#39;t know if you&#39;re aware of it, but your comments have an antagonistic tone which is not moving the discussion towards a constructive conclusion.","body":"@KarlKnechtel I don&#39;t know if you&#39;re aware of it, but your comments have an antagonistic tone which is not moving the discussion towards a constructive conclusion."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":0,"creation_date":1679433653,"post_id":75801139,"comment_id":133721166,"body_markdown":"@Thend Looks like there are methods in that class which return a double instead of an integer and the logarithm of the binomial coefficient. Maybe you can make use of those instead of rolling your own, just a thought.","body":"@Thend Looks like there are methods in that class which return a double instead of an integer and the logarithm of the binomial coefficient. Maybe you can make use of those instead of rolling your own, just a thought."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679477697,"post_id":75801139,"comment_id":133727586,"body_markdown":"@RobertDodier I have tried log(binomial) and seems working :), I will try with my whole code let&#39;s see. Thank you for your comments, I really appreciate it.","body":"@RobertDodier I have tried log(binomial) and seems working :), I will try with my whole code let&#39;s see. Thank you for your comments, I really appreciate it."}],"answers":[{"tags":[],"owner":{"account_id":2326766,"reputation":8079,"user_id":2041077,"accept_rate":40,"display_name":"Dave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679431357,"creation_date":1679408437,"answer_id":75802412,"question_id":75801139,"body_markdown":"Since all you need is the magnitude, this might help.\r\n\r\nceiling(log(n)) is the number of digits in n &gt; 1\r\n\r\nSo the number of digits in n! is about ceiling(log(n) + log(n-1) + ...)\r\n\r\nSo for the number of digits in choose(n,k):\r\n\r\nI&#39;ll let r = n-k and assume k &gt;= r.\r\n\r\ndigits in choose(n, k) ~ ceiling(log(n) + log(n-1) + ... + log(k+1) - log(r) - log(r-1) - ... - log(2))\r\n\r\n^^ From n down to k+1 we have numbers that are only in the numerator of choose(n, k). From k down to r+1 we have numbers that are in the denominator once (so cancel with the numerator) and from r on down we have numbers in the denominator twice (so net division).\r\n\r\nHere&#39;s Ruby implementation:\r\n\r\n    def choose_est(n, k)\r\n      r = n - k\r\n      coefficient = 1.0\r\n      logsum = 0.0\r\n      n.downto(k+1) do |val|\r\n        logsum += Math.log(val, 10)\r\n        coefficient *= val\r\n        coefficient /= 10**(Math.log(coefficient,10).floor)\r\n      end\r\n      r.downto(2) do |val|\r\n        logsum -= Math.log(val, 10)\r\n        coefficient /= val\r\n        coefficient /= 10**(Math.log(coefficient,10).floor)\r\n      end\r\n      coefficient /= 10**(Math.log(coefficient, 10).floor)\r\n      puts &quot;coefficient = #{coefficient}, digits = #{logsum.ceil}, exact = #{choose(n, k)}&quot;\r\n    end\r\n\r\nA few example results:\r\n\r\n    &gt; choose_est(25, 10)\r\n    coefficient = 3.2687599999999963, digits = 7, exact = 3268760\r\n    \r\n    &gt; choose_est(334, 179)\r\n    coefficient = 6.457698552681728, digits = 99, exact = 645769855268174723155002700285292878609673825371233277541117250760336409272009018138269061870226976\r\n\r\n    &gt;choose_est(10000, 444)\r\n    coefficient = 2.1387299915901736, digits = 788\r\n\r\n\r\nJava code for the same:\r\n\r\n    import java.lang.Math;\r\n    \r\n    public class ChooseEstimator {\r\n        public static void chooseEst(int n, int k) {\r\n            int r = n - k;\r\n            double coefficient = 1.0;\r\n            double logsum = 0.0;\r\n            for (int val = n; val &gt; k; val--) {\r\n                logsum += Math.log10(val);\r\n                coefficient *= val;\r\n                coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            }\r\n            for (int val = r; val &gt;= 2; val--) {\r\n                logsum -= Math.log10(val);\r\n                coefficient /= val;\r\n                coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            }\r\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            System.out.println(&quot;coefficient = &quot; + coefficient + &quot;, digits = &quot; + (int)Math.ceil(logsum));\r\n        }\r\n    \r\n        \r\n        public static void main(String[] args) {\r\n            chooseEst(25, 10);\r\n        }\r\n    }","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>Since all you need is the magnitude, this might help.</p>\n<p>ceiling(log(n)) is the number of digits in n &gt; 1</p>\n<p>So the number of digits in n! is about ceiling(log(n) + log(n-1) + ...)</p>\n<p>So for the number of digits in choose(n,k):</p>\n<p>I'll let r = n-k and assume k &gt;= r.</p>\n<p>digits in choose(n, k) ~ ceiling(log(n) + log(n-1) + ... + log(k+1) - log(r) - log(r-1) - ... - log(2))</p>\n<p>^^ From n down to k+1 we have numbers that are only in the numerator of choose(n, k). From k down to r+1 we have numbers that are in the denominator once (so cancel with the numerator) and from r on down we have numbers in the denominator twice (so net division).</p>\n<p>Here's Ruby implementation:</p>\n<pre><code>def choose_est(n, k)\n  r = n - k\n  coefficient = 1.0\n  logsum = 0.0\n  n.downto(k+1) do |val|\n    logsum += Math.log(val, 10)\n    coefficient *= val\n    coefficient /= 10**(Math.log(coefficient,10).floor)\n  end\n  r.downto(2) do |val|\n    logsum -= Math.log(val, 10)\n    coefficient /= val\n    coefficient /= 10**(Math.log(coefficient,10).floor)\n  end\n  coefficient /= 10**(Math.log(coefficient, 10).floor)\n  puts &quot;coefficient = #{coefficient}, digits = #{logsum.ceil}, exact = #{choose(n, k)}&quot;\nend\n</code></pre>\n<p>A few example results:</p>\n<pre><code>&gt; choose_est(25, 10)\ncoefficient = 3.2687599999999963, digits = 7, exact = 3268760\n\n&gt; choose_est(334, 179)\ncoefficient = 6.457698552681728, digits = 99, exact = 645769855268174723155002700285292878609673825371233277541117250760336409272009018138269061870226976\n\n&gt;choose_est(10000, 444)\ncoefficient = 2.1387299915901736, digits = 788\n</code></pre>\n<p>Java code for the same:</p>\n<pre><code>import java.lang.Math;\n\npublic class ChooseEstimator {\n    public static void chooseEst(int n, int k) {\n        int r = n - k;\n        double coefficient = 1.0;\n        double logsum = 0.0;\n        for (int val = n; val &gt; k; val--) {\n            logsum += Math.log10(val);\n            coefficient *= val;\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        }\n        for (int val = r; val &gt;= 2; val--) {\n            logsum -= Math.log10(val);\n            coefficient /= val;\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        }\n        coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        System.out.println(&quot;coefficient = &quot; + coefficient + &quot;, digits = &quot; + (int)Math.ceil(logsum));\n    }\n\n    \n    public static void main(String[] args) {\n        chooseEst(25, 10);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679418944,"creation_date":1679418944,"answer_id":75804408,"question_id":75801139,"body_markdown":"Here is a simple approach that does the calculation while constantly multiplying and dividing to remain (hopefully) in the range of a `double`.\r\n\r\n    public static double binomialApproximation(int n, int m) {\r\n        double k = m;\r\n        if (n - m &lt; m) {\r\n            k = n - m;\r\n        }\r\n        \r\n        double answer = 1.0;\r\n        while (0 &lt; k) {\r\n            answer *= n / k;\r\n            n--;\r\n            k--;\r\n        }\r\n        return answer;\r\n    }\r\n\r\nNote that the maximum `double` is `1.79769313486231570e+308d`.  If you wind up needing bigger numbers than that, then you need to use something like `BigDouble` or `BigDecimal` and be careful about precision, etc.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>Here is a simple approach that does the calculation while constantly multiplying and dividing to remain (hopefully) in the range of a <code>double</code>.</p>\n<pre><code>public static double binomialApproximation(int n, int m) {\n    double k = m;\n    if (n - m &lt; m) {\n        k = n - m;\n    }\n    \n    double answer = 1.0;\n    while (0 &lt; k) {\n        answer *= n / k;\n        n--;\n        k--;\n    }\n    return answer;\n}\n</code></pre>\n<p>Note that the maximum <code>double</code> is <code>1.79769313486231570e+308d</code>.  If you wind up needing bigger numbers than that, then you need to use something like <code>BigDouble</code> or <code>BigDecimal</code> and be careful about precision, etc.</p>\n"}],"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1679431357,"creation_date":1679401238,"question_id":75801139,"body_markdown":"When I try to calculate the combination of large numbers, **e.g. 334 choose 179**, using the Java Apache Math3 `CombinatoricsUtils.binomialCoefficient()` method, I receive an `Exception in thread &quot;main&quot; org.apache.commons.math3.exception.MathArithmeticException: arithmetic exception`\r\n\r\nI&#39;m aware that this is due to large numbers (most probably), so I have checked several StackOverflow post to fix it, however without success.\r\n\r\nMy original code:\r\n\r\n    public static void testCombinations(){\r\n        long test = CombinatoricsUtils.binomialCoefficient(334, 179);\r\n        System.out.println(test);\r\n    }\r\n\r\nI modified it to suit big numbers:\r\n\r\n    public static void testCombinations(){\r\n        BigInteger test = BigInteger.valueOf(CombinatoricsUtils.binomialCoefficient(334, 179));\r\n        System.out.println(test);\r\n    }\r\n\r\nHowever this doesn&#39;t solve the problem. I have checked the value of this example using a standard calculator, with &lt;sup&gt;n&lt;/sup&gt;C&lt;sub&gt;r&lt;/sub&gt;(334,179), and it is **6.45769855268175x10^98**. I don&#39;t need such a long number maybe the beginning of the number, maybe the first 5 or 10 character should be enough. But probably the error generated during the calculation. How should I deal with this issue?\r\n\r\n**UPDATE:**\r\n\r\nI further modified my code:\r\n\r\n&gt;     public static void testCombinations(){\r\n&gt;         int n = 344;\r\n&gt;         int k = 179;\r\n&gt;         double test;\r\n&gt;         test = (long) CombinatoricsUtils.binomialCoefficientDouble(n, k);\r\n&gt;         System.out.println(test);\r\n&gt;     }\r\n\r\nHowever, this only capable of not throwing the exception. The resulting value (**9.223372036854776E18**) is always the same, even with a similarly large number, e.g. 358 choose 179. I assume this value is the maximum of long. So, no solution yet.","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>When I try to calculate the combination of large numbers, <strong>e.g. 334 choose 179</strong>, using the Java Apache Math3 <code>CombinatoricsUtils.binomialCoefficient()</code> method, I receive an <code>Exception in thread &quot;main&quot; org.apache.commons.math3.exception.MathArithmeticException: arithmetic exception</code></p>\n<p>I'm aware that this is due to large numbers (most probably), so I have checked several StackOverflow post to fix it, however without success.</p>\n<p>My original code:</p>\n<pre><code>public static void testCombinations(){\n    long test = CombinatoricsUtils.binomialCoefficient(334, 179);\n    System.out.println(test);\n}\n</code></pre>\n<p>I modified it to suit big numbers:</p>\n<pre><code>public static void testCombinations(){\n    BigInteger test = BigInteger.valueOf(CombinatoricsUtils.binomialCoefficient(334, 179));\n    System.out.println(test);\n}\n</code></pre>\n<p>However this doesn't solve the problem. I have checked the value of this example using a standard calculator, with <sup>n</sup>C<sub>r</sub>(334,179), and it is <strong>6.45769855268175x10^98</strong>. I don't need such a long number maybe the beginning of the number, maybe the first 5 or 10 character should be enough. But probably the error generated during the calculation. How should I deal with this issue?</p>\n<p><strong>UPDATE:</strong></p>\n<p>I further modified my code:</p>\n<blockquote>\n<pre><code>public static void testCombinations(){\n    int n = 344;\n    int k = 179;\n    double test;\n    test = (long) CombinatoricsUtils.binomialCoefficientDouble(n, k);\n    System.out.println(test);\n}\n</code></pre>\n</blockquote>\n<p>However, this only capable of not throwing the exception. The resulting value (<strong>9.223372036854776E18</strong>) is always the same, even with a similarly large number, e.g. 358 choose 179. I assume this value is the maximum of long. So, no solution yet.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1679429947,"post_id":75805961,"comment_id":133720393,"body_markdown":"Because `finally` blocks **must** evaluate after their associated `try`s; regardless of exceptions - and no, it can&#39;t jump back to an enclosed `try` to do so, it&#39;s always in the local call stack. Here it should probably be using a `try-with-Resources`.","body":"Because <code>finally</code> blocks <b>must</b> evaluate after their associated <code>try</code>s; regardless of exceptions - and no, it can&#39;t jump back to an enclosed <code>try</code> to do so, it&#39;s always in the local call stack. Here it should probably be using a <code>try-with-Resources</code>."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1679429984,"post_id":75805961,"comment_id":133720399,"body_markdown":"By design. Why do you expect that the outer `catch` block is executed first and then goes back into the inner code block (it just left) to call its `finally` block?","body":"By design. Why do you expect that the outer <code>catch</code> block is executed first and then goes back into the inner code block (it just left) to call its <code>finally</code> block?"},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679430050,"post_id":75805961,"comment_id":133720417,"body_markdown":"Yes, that&#39;s what I expect. A &quot;finally&quot; is something that&#39;s *final* . I was always taught it happens at the very end, regardless of what comes before.","body":"Yes, that&#39;s what I expect. A &quot;finally&quot; is something that&#39;s <i>final</i> . I was always taught it happens at the very end, regardless of what comes before."},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679430414,"post_id":75805961,"comment_id":133720488,"body_markdown":"Correct. In my understanding a `finally` is something that&#39;s final and should execute after the appropriate catch handler.","body":"Correct. In my understanding a <code>finally</code> is something that&#39;s final and should execute after the appropriate catch handler."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1679430447,"post_id":75805961,"comment_id":133720497,"body_markdown":"yes, it is final in the called method, not in the calling method (since it is declared in the called method and not in the calling one) - also consider that the method chain can be much longer, varios methods being called,  and some `catch` block could (in your scenario) destroy (release resources, close connections, closing GUI, ....) something needed in the `finally` block of the called method","body":"yes, it is final in the called method, not in the calling method (since it is declared in the called method and not in the calling one) - also consider that the method chain can be much longer, varios methods being called,  and some <code>catch</code> block could (in your scenario) destroy (release resources, close connections, closing GUI, ....) something needed in the <code>finally</code> block of the called method"}],"answers":[{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679431102,"creation_date":1679430481,"answer_id":75806064,"question_id":75805961,"body_markdown":"This makes sense because of how `finally` blocks are determined to be executed [by the language standard](https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2).  For your example, this also happens in two separate calls, so semantics are typically `try-catch-finally` in each frame in the call stack.\r\n\r\nThe most relevant parts are here:\r\n\r\n&gt; A try statement with a finally block is executed by first executing\r\n&gt; the try block. Then there is a choice:\r\n&gt; \r\n&gt; - If execution of the try block completes normally, then the finally block is executed, and then there is a choice:\r\n&gt; \r\n&gt;   - If the finally block completes normally, then the try statement completes normally.\r\n&gt; \r\n&gt;   - If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S.\r\n&gt; \r\n&gt;\r\n&gt; ... (There&#39;s a part here about if the try block completes abnormally because you intentionally declared a `throw`, but that&#39;s not needed for this discussion.)\r\n&gt;\r\n&gt; - If execution of the try block completes abruptly for any other reason R, then the finally block is executed, and then there is a choice:\r\n&gt;\r\n&gt;   -  If the finally block completes normally, then the try statement completes abruptly for reason R.\r\n&gt; \r\n&gt;   - If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S (and reason R is discarded).\r\n\r\nIn **all** cases, the `finally` block is executed after the `try` block for which it is declared after.\r\n\r\nThis also means if your `finally` block encounters an exception, it will bubble up the exception through the call chain to a suitable `catch` block (or all the way up if no such `catch` exists).\r\n\r\nTo bring the example closer, the big thing to note is that your calls are as follows:\r\n\r\n - try\r\n   - try\r\n   - finally\r\n - catch\r\n\r\nYour nested try-finally statement will always conclude - either normally or abruptly for any given reason - before any exception is bubbled back to the previous call in the stack.","title":"Sub-method&#39;s finally{..} is performed before calling parent method&#39;s catch()","body":"<p>This makes sense because of how <code>finally</code> blocks are determined to be executed <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2\" rel=\"nofollow noreferrer\">by the language standard</a>.  For your example, this also happens in two separate calls, so semantics are typically <code>try-catch-finally</code> in each frame in the call stack.</p>\n<p>The most relevant parts are here:</p>\n<blockquote>\n<p>A try statement with a finally block is executed by first executing\nthe try block. Then there is a choice:</p>\n<ul>\n<li><p>If execution of the try block completes normally, then the finally block is executed, and then there is a choice:</p>\n<ul>\n<li><p>If the finally block completes normally, then the try statement completes normally.</p>\n</li>\n<li><p>If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>... (There's a part here about if the try block completes abnormally because you intentionally declared a <code>throw</code>, but that's not needed for this discussion.)</p>\n<ul>\n<li><p>If execution of the try block completes abruptly for any other reason R, then the finally block is executed, and then there is a choice:</p>\n<ul>\n<li><p>If the finally block completes normally, then the try statement completes abruptly for reason R.</p>\n</li>\n<li><p>If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S (and reason R is discarded).</p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>In <strong>all</strong> cases, the <code>finally</code> block is executed after the <code>try</code> block for which it is declared after.</p>\n<p>This also means if your <code>finally</code> block encounters an exception, it will bubble up the exception through the call chain to a suitable <code>catch</code> block (or all the way up if no such <code>catch</code> exists).</p>\n<p>To bring the example closer, the big thing to note is that your calls are as follows:</p>\n<ul>\n<li>try\n<ul>\n<li>try</li>\n<li>finally</li>\n</ul>\n</li>\n<li>catch</li>\n</ul>\n<p>Your nested try-finally statement will always conclude - either normally or abruptly for any given reason - before any exception is bubbled back to the previous call in the stack.</p>\n"}],"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679431102,"creation_date":1679429603,"question_id":75805961,"body_markdown":"I have an outer method that tries and catches exceptions coming from an inner method,\r\n\r\n    try {\r\n       process();\r\n    } catch (Exception e) {\r\n      //...\r\n    }\r\n\r\nThe inner method `throws Exception` to the parent, but also has a `finally{..}` because it needs to close some connections. It does not have a `catch` block itself.\r\n\r\n        public void process() throws Exception {\r\n            try {\r\n               // Open connections, etc.\r\n            }\r\n            finally {  \r\n               // Method has no catch() but a finally{..} is required to close connections\r\n               if (ftpConn != null) {\r\n                   ftpConn.close();\r\n               }\r\n               // etc.\r\n            }\r\n        }\r\n\r\nI see in the debugger that if `process()` has an exception, its `finally` is executed **first** before getting to the outer caller&#39;s `catch`. This is counterintuitive to me because I expected the outer caller&#39;s `catch()` to be executed first, and then the inner method&#39;s `finally`. Just wanted to verify why this happens. In a regular try/catch/finally sequence, `catch` always happens first, and `finally` last.","title":"Sub-method&#39;s finally{..} is performed before calling parent method&#39;s catch()","body":"<p>I have an outer method that tries and catches exceptions coming from an inner method,</p>\n<pre><code>try {\n   process();\n} catch (Exception e) {\n  //...\n}\n</code></pre>\n<p>The inner method <code>throws Exception</code> to the parent, but also has a <code>finally{..}</code> because it needs to close some connections. It does not have a <code>catch</code> block itself.</p>\n<pre><code>    public void process() throws Exception {\n        try {\n           // Open connections, etc.\n        }\n        finally {  \n           // Method has no catch() but a finally{..} is required to close connections\n           if (ftpConn != null) {\n               ftpConn.close();\n           }\n           // etc.\n        }\n    }\n</code></pre>\n<p>I see in the debugger that if <code>process()</code> has an exception, its <code>finally</code> is executed <strong>first</strong> before getting to the outer caller's <code>catch</code>. This is counterintuitive to me because I expected the outer caller's <code>catch()</code> to be executed first, and then the inner method's <code>finally</code>. Just wanted to verify why this happens. In a regular try/catch/finally sequence, <code>catch</code> always happens first, and <code>finally</code> last.</p>\n"},{"tags":["java","jpa","jpql"],"comments":[{"owner":{"account_id":953294,"reputation":2389,"user_id":1090666,"display_name":"Mike Ryan"},"score":0,"creation_date":1532723160,"post_id":4378824,"comment_id":90097069,"body_markdown":"This is a duplicate of https://stackoverflow.com/questions/1557085/setting-a-parameter-as-a-list-for-an-in-expression#7967570 but this thread provides useful answers.","body":"This is a duplicate of <a href=\"https://stackoverflow.com/questions/1557085/setting-a-parameter-as-a-list-for-an-in-expression#7967570\" title=\"setting a parameter as a list for an in expression%237967570\">stackoverflow.com/questions/1557085/&hellip;</a> but this thread provides useful answers."}],"answers":[{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":0,"up_vote_count":219,"is_accepted":true,"score":219,"last_activity_date":1291739352,"creation_date":1291739352,"answer_id":4379008,"question_id":4378824,"body_markdown":"When using `IN` with a collection-valued parameter you  don&#39;t need `(...)`:\r\n\r\n    @NamedQuery(name = &quot;EventLog.viewDatesInclude&quot;, \r\n        query = &quot;SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND &quot; \r\n        + &quot;el.timeMark &lt;= :dateTo AND &quot; \r\n        + &quot;el.name IN :inclList&quot;) \r\n","title":"Adding IN clause List to a JPA Query","body":"<p>When using <code>IN</code> with a collection-valued parameter you  don't need <code>(...)</code>:</p>\n\n<pre><code>@NamedQuery(name = \"EventLog.viewDatesInclude\", \n    query = \"SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND \" \n    + \"el.timeMark &lt;= :dateTo AND \" \n    + \"el.name IN :inclList\") \n</code></pre>\n"},{"tags":[],"owner":{"account_id":915105,"reputation":598,"user_id":1114134,"display_name":"user1114134"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1324691746,"creation_date":1324684967,"answer_id":8621706,"question_id":4378824,"body_markdown":"    public List&lt;DealInfo&gt; getDealInfos(List&lt;String&gt; dealIds) {\r\n    \t\tString queryStr = &quot;SELECT NEW com.admin.entity.DealInfo(deal.url, deal.url, deal.url, deal.url, deal.price, deal.value) &quot; + &quot;FROM Deal AS deal where deal.id in :inclList&quot;;\r\n    \t\tTypedQuery&lt;DealInfo&gt; query = em.createQuery(queryStr, DealInfo.class);\r\n    \t\tquery.setParameter(&quot;inclList&quot;, dealIds);\r\n    \t\treturn query.getResultList();\r\n    \t}\r\n\r\nWorks for me with JPA 2, Jboss 7.0.2\r\n","title":"Adding IN clause List to a JPA Query","body":"<pre><code>public List&lt;DealInfo&gt; getDealInfos(List&lt;String&gt; dealIds) {\n        String queryStr = \"SELECT NEW com.admin.entity.DealInfo(deal.url, deal.url, deal.url, deal.url, deal.price, deal.value) \" + \"FROM Deal AS deal where deal.id in :inclList\";\n        TypedQuery&lt;DealInfo&gt; query = em.createQuery(queryStr, DealInfo.class);\n        query.setParameter(\"inclList\", dealIds);\n        return query.getResultList();\n    }\n</code></pre>\n\n<p>Works for me with JPA 2, Jboss 7.0.2</p>\n"},{"tags":[],"owner":{"account_id":3907007,"reputation":1228,"user_id":3233440,"display_name":"Jose Ferrer"},"down_vote_count":0,"up_vote_count":106,"is_accepted":false,"score":106,"last_activity_date":1409126639,"creation_date":1390594445,"answer_id":21341663,"question_id":4378824,"body_markdown":"The proper JPA query format would be:\r\n\r\n    el.name IN :inclList\r\n\r\nIf you&#39;re using an older version of Hibernate as your provider you have to write:\r\n\r\n    el.name IN (:inclList)\r\n\r\nbut that is a bug ([HHH-5126](https://hibernate.atlassian.net/browse/HHH-5126)) (EDIT: which has been resolved by now).","title":"Adding IN clause List to a JPA Query","body":"<p>The proper JPA query format would be:</p>\n\n<pre><code>el.name IN :inclList\n</code></pre>\n\n<p>If you're using an older version of Hibernate as your provider you have to write:</p>\n\n<pre><code>el.name IN (:inclList)\n</code></pre>\n\n<p>but that is a bug (<a href=\"https://hibernate.atlassian.net/browse/HHH-5126\" rel=\"noreferrer\">HHH-5126</a>) (EDIT: which has been resolved by now).</p>\n"},{"tags":[],"owner":{"account_id":7477791,"reputation":311,"user_id":5683647,"display_name":"Wesley Rocha"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1679431093,"creation_date":1450208297,"answer_id":34297903,"question_id":4378824,"body_markdown":"You should convert to `List` as shown below:\r\n\r\n\t\tString[] valores = hierarquia.split(&quot;.&quot;);\t\t\r\n\t\tList&lt;String&gt; lista =  Arrays.asList(valores);\r\n\t\t\r\n\t\tString jpqlQuery = &quot;SELECT a &quot; +\r\n\t\t\t\t&quot;FROM AcessoScr a &quot; +\r\n\t\t\t\t&quot;WHERE a.scr IN :param &quot;;\r\n\t\t\r\n\t\tQuery query = getEntityManager().createQuery(jpqlQuery, AcessoScr.class);\t\t\t\t\t\r\n\t\tquery.setParameter(&quot;param&quot;, lista);\t\t\r\n\t\tList&lt;AcessoScr&gt; acessos = query.getResultList();","title":"Adding IN clause List to a JPA Query","body":"<p>You should convert to <code>List</code> as shown below:</p>\n<pre><code>    String[] valores = hierarquia.split(&quot;.&quot;);       \n    List&lt;String&gt; lista =  Arrays.asList(valores);\n    \n    String jpqlQuery = &quot;SELECT a &quot; +\n            &quot;FROM AcessoScr a &quot; +\n            &quot;WHERE a.scr IN :param &quot;;\n    \n    Query query = getEntityManager().createQuery(jpqlQuery, AcessoScr.class);                   \n    query.setParameter(&quot;param&quot;, lista);     \n    List&lt;AcessoScr&gt; acessos = query.getResultList();\n</code></pre>\n"}],"owner":{"account_id":250629,"reputation":9713,"user_id":527470,"accept_rate":76,"display_name":"AlanObject"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372899,"favorite_count":0,"down_vote_count":0,"up_vote_count":161,"accepted_answer_id":4379008,"answer_count":4,"score":161,"last_activity_date":1679431093,"creation_date":1291738335,"question_id":4378824,"body_markdown":"I have built a NamedQuery that looks like this:\r\n\r\n    @NamedQuery(name = &quot;EventLog.viewDatesInclude&quot;,\r\n            query = &quot;SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND &quot;\r\n            + &quot;el.timeMark &lt;= :dateTo AND &quot;\r\n            + &quot;el.name IN (:inclList)&quot;)\r\n\r\nWhat I want to do is fill in the parameter :inclList with a list of items instead of one item.  For example if I have a `new List&lt;String&gt;() { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }` how do I get that in the :inclList parameter?  It only lets me codify one string.   For example:\r\n\r\n    setParameter(&quot;inclList&quot;, &quot;a&quot;) // works\r\n    \r\n    setParameter(&quot;inclList&quot;, &quot;a, b&quot;) // does not work\r\n    \r\n    setParameter(&quot;inclList&quot;, &quot;&#39;a&#39;, &#39;b&#39;&quot;) // does not work\r\n    \r\n    setParameter(&quot;inclList&quot;, list) // throws an exception\r\n\r\nI know I could just build a string and build the whole Query from that, but I wanted to avoid the overhead.   Is there a better way of doing this?\r\n\r\nRelated question: if the List is very large, is there any good way of building query like that? ","title":"Adding IN clause List to a JPA Query","body":"<p>I have built a NamedQuery that looks like this:</p>\n\n<pre><code>@NamedQuery(name = \"EventLog.viewDatesInclude\",\n        query = \"SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND \"\n        + \"el.timeMark &lt;= :dateTo AND \"\n        + \"el.name IN (:inclList)\")\n</code></pre>\n\n<p>What I want to do is fill in the parameter :inclList with a list of items instead of one item.  For example if I have a <code>new List&lt;String&gt;() { \"a\", \"b\", \"c\" }</code> how do I get that in the :inclList parameter?  It only lets me codify one string.   For example:</p>\n\n<pre><code>setParameter(\"inclList\", \"a\") // works\n\nsetParameter(\"inclList\", \"a, b\") // does not work\n\nsetParameter(\"inclList\", \"'a', 'b'\") // does not work\n\nsetParameter(\"inclList\", list) // throws an exception\n</code></pre>\n\n<p>I know I could just build a string and build the whole Query from that, but I wanted to avoid the overhead.   Is there a better way of doing this?</p>\n\n<p>Related question: if the List is very large, is there any good way of building query like that? </p>\n"},{"tags":["java","windows","jna","advapi32"],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679431012,"creation_date":1679431012,"answer_id":75806127,"question_id":75787339,"body_markdown":"The fact that you&#39;re using JNA to interact with the Windows API isn&#39;t really relevant here.  Ultimately you&#39;re just using the [LogonUserW][1] function.\r\n\r\nThe return value from that, `phToken`, is a pointer to a `HANDLE`.  This handle is just a 64-bit value which represents the actual user logon token, but you&#39;re only working with a process-local copy of it.  You also don&#39;t directly interact with the token, but only use a set of API methods using that handle (or a pointer to it) to manipulate it. \r\n\r\nThe API specifies that you should close the handle when you&#39;re done with it, otherwise you&#39;d leak resources.  And once it&#39;s closed, that 64-bit value has no meaning.  If you request another handle, it very well may be a different 64-bit number.\r\n\r\nOnce the current process ends, the handle would be automatically closed anyway.\r\n\r\nSo ultimately, if you want to store that 64-bit number in a database somewhere, you&#39;re welcome to do so.  It would only be usable by the same process that created it, as long as that handle wasn&#39;t closed, in which case there is likely no need for external storage.\r\n\r\nIf you do have such a use case, you would simply recreate the `HANDLE` (the token representation) which you could use to instantiate a `HANDLEByReference` if needed.  You can create the handle from a `Pointer` which you can set the peer value to the 64-bit number you retrieved earlier.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-logonuserw","title":"how to persist or re-use impersonate token in windows?","body":"<p>The fact that you're using JNA to interact with the Windows API isn't really relevant here.  Ultimately you're just using the <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-logonuserw\" rel=\"nofollow noreferrer\">LogonUserW</a> function.</p>\n<p>The return value from that, <code>phToken</code>, is a pointer to a <code>HANDLE</code>.  This handle is just a 64-bit value which represents the actual user logon token, but you're only working with a process-local copy of it.  You also don't directly interact with the token, but only use a set of API methods using that handle (or a pointer to it) to manipulate it.</p>\n<p>The API specifies that you should close the handle when you're done with it, otherwise you'd leak resources.  And once it's closed, that 64-bit value has no meaning.  If you request another handle, it very well may be a different 64-bit number.</p>\n<p>Once the current process ends, the handle would be automatically closed anyway.</p>\n<p>So ultimately, if you want to store that 64-bit number in a database somewhere, you're welcome to do so.  It would only be usable by the same process that created it, as long as that handle wasn't closed, in which case there is likely no need for external storage.</p>\n<p>If you do have such a use case, you would simply recreate the <code>HANDLE</code> (the token representation) which you could use to instantiate a <code>HANDLEByReference</code> if needed.  You can create the handle from a <code>Pointer</code> which you can set the peer value to the 64-bit number you retrieved earlier.</p>\n"}],"owner":{"account_id":5684060,"reputation":1093,"user_id":4494166,"accept_rate":0,"display_name":"Ravi Soni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679431012,"creation_date":1679295538,"question_id":75787339,"body_markdown":"I&#39;m using\r\n\r\nDependency: implementation group: &quot;net.java.dev.jna&quot;, name: &quot;jna&quot;\r\n\r\nCode:\r\n\r\n    PointerByReference phToken = new PointerByReference();\r\n    advapi32.LogonUserW(new WString(username), new WString(domain), new WString(password), 3, 0, phToken);\r\n\r\nNow i need to re-use the phToken, so that i don&#39;t need to login again. I was thinking to extract out the token, and persist that in db, and then re-use as per need. but, i was not able to extract out the token, hence facing difficulty in that. Please guide me, how to re-use the token. Also, this token i can&#39;t persist/save in windows, it will be another service, so will have to send this as json to another service.\r\n\r\n","title":"how to persist or re-use impersonate token in windows?","body":"<p>I'm using</p>\n<p>Dependency: implementation group: &quot;net.java.dev.jna&quot;, name: &quot;jna&quot;</p>\n<p>Code:</p>\n<pre><code>PointerByReference phToken = new PointerByReference();\nadvapi32.LogonUserW(new WString(username), new WString(domain), new WString(password), 3, 0, phToken);\n</code></pre>\n<p>Now i need to re-use the phToken, so that i don't need to login again. I was thinking to extract out the token, and persist that in db, and then re-use as per need. but, i was not able to extract out the token, hence facing difficulty in that. Please guide me, how to re-use the token. Also, this token i can't persist/save in windows, it will be another service, so will have to send this as json to another service.</p>\n"},{"tags":["java","url","syntax","uri","protocols"],"owner":{"account_id":25527246,"reputation":11,"user_id":19316063,"display_name":"Nevras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679430633,"creation_date":1679430633,"question_id":75806079,"body_markdown":"Let&#39;s say we have three URLs as Strings:\r\n```\r\nString urlString1 = &quot;https://syntaxsyntax&quot;;\r\nString urlString2 = &quot;https:/syntaxsyntax&quot;;\r\nString urlString3 = &quot;https:///////google.com/&quot;;\r\n```\r\n\r\nWhen we create a `new URL` based on each String above, after the \r\n```\r\nString host = url.getHost(); \r\n```\r\nwe will get `host == &quot;&quot;` (empty String). As a result, after next step\r\n```\r\nnew Inet(InetAdress.getByName(host).getHostAddress())\r\n```\r\nI get null or a local address.\r\n\r\nFor example, we know that the first two Strings are incorrect as URL and I should somehow be able to verify them before processing further code. But the third String is correct-ish - or at least the browser opens the page correctly when inserted into the address bar.\r\n\r\nI tried creating URL and URI, catch exceptions from them - yet all passed. \r\n\r\nI tried `uri.normalize()` - yet it doesn&#39;t change anything\r\n\r\nBy the way, can someone explain me, why `uri.normalize()` would change `https:////xyz` into `https:/xyz` instead of `https://xyz`? Why it wouldn&#39;t also add missing slash after protocol `https:/qwerty` ?\r\n\r\nIs there an option to verify URLs like above without using syntax patterns?","title":"Java - verify url with improper syntax, i.e. one leaving getHost == &quot;&quot;","body":"<p>Let's say we have three URLs as Strings:</p>\n<pre><code>String urlString1 = &quot;https://syntaxsyntax&quot;;\nString urlString2 = &quot;https:/syntaxsyntax&quot;;\nString urlString3 = &quot;https:///////google.com/&quot;;\n</code></pre>\n<p>When we create a <code>new URL</code> based on each String above, after the</p>\n<pre><code>String host = url.getHost(); \n</code></pre>\n<p>we will get <code>host == &quot;&quot;</code> (empty String). As a result, after next step</p>\n<pre><code>new Inet(InetAdress.getByName(host).getHostAddress())\n</code></pre>\n<p>I get null or a local address.</p>\n<p>For example, we know that the first two Strings are incorrect as URL and I should somehow be able to verify them before processing further code. But the third String is correct-ish - or at least the browser opens the page correctly when inserted into the address bar.</p>\n<p>I tried creating URL and URI, catch exceptions from them - yet all passed.</p>\n<p>I tried <code>uri.normalize()</code> - yet it doesn't change anything</p>\n<p>By the way, can someone explain me, why <code>uri.normalize()</code> would change <code>https:////xyz</code> into <code>https:/xyz</code> instead of <code>https://xyz</code>? Why it wouldn't also add missing slash after protocol <code>https:/qwerty</code> ?</p>\n<p>Is there an option to verify URLs like above without using syntax patterns?</p>\n"},{"tags":["java","docker","performance","tomcat","jvm-arguments"],"comments":[{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":1,"creation_date":1679494172,"post_id":75806002,"comment_id":133732097,"body_markdown":"Take thread dumps to see where the time is spent. A jsp page is not a static resource. By default, a JSP is converted to a servlet and is compiled at the first invocation. This could explain your response time.","body":"Take thread dumps to see where the time is spent. A jsp page is not a static resource. By default, a JSP is converted to a servlet and is compiled at the first invocation. This could explain your response time."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679495060,"post_id":75806002,"comment_id":133732395,"body_markdown":"keyword: `pre-compiling JSPs` (https://tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html)  / Web Application Compilation.","body":"keyword: <code>pre-compiling JSPs</code> (<a href=\"https://tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html</a>)  / Web Application Compilation."},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1680195132,"post_id":75806002,"comment_id":133860916,"body_markdown":"DNS resolution (failure/timeout) is often the cause of unexplained delays such as this. Server and application startup are sometimes delayed by random-number seeding blocking on entropy. A thread dump will prove whether or not either of these is the true cause.","body":"DNS resolution (failure/timeout) is often the cause of unexplained delays such as this. Server and application startup are sometimes delayed by random-number seeding blocking on entropy. A thread dump will prove whether or not either of these is the true cause."}],"owner":{"account_id":19055538,"reputation":61,"user_id":13912797,"display_name":"Vienna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679429981,"creation_date":1679429981,"question_id":75806002,"body_markdown":"When I run a tomcat docker container to serve a war file, initial load takes a lot of time, after the first load, if I load the page even from incognito it loads immediately. \r\n\r\nOn first load\r\n[![enter image description here](https://i.stack.imgur.com/VUTe6.png)](https://i.stack.imgur.com/VUTe6.png)\r\n\r\nAfter first load:\r\n[![enter image description here](https://i.stack.imgur.com/gTY6K.png)](https://i.stack.imgur.com/gTY6K.png)\r\n\r\ndocker stats output before first load:\r\n[![enter image description here](https://i.stack.imgur.com/kNMKR.png)](https://i.stack.imgur.com/kNMKR.png)\r\n\r\ndocker stats output after first load:\r\n[![enter image description here](https://i.stack.imgur.com/qYqcY.png)](https://i.stack.imgur.com/qYqcY.png)\r\n\r\n\r\n\r\nI searched for solutions, they suggest to tweak `initialHeapSize`, `initialRamPercentage`, tried everything but it doesn&#39;t work.","title":"tomcat + docker +java taking a lot of time to serve static page on initial load","body":"<p>When I run a tomcat docker container to serve a war file, initial load takes a lot of time, after the first load, if I load the page even from incognito it loads immediately.</p>\n<p>On first load\n<a href=\"https://i.stack.imgur.com/VUTe6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VUTe6.png\" alt=\"enter image description here\" /></a></p>\n<p>After first load:\n<a href=\"https://i.stack.imgur.com/gTY6K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gTY6K.png\" alt=\"enter image description here\" /></a></p>\n<p>docker stats output before first load:\n<a href=\"https://i.stack.imgur.com/kNMKR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kNMKR.png\" alt=\"enter image description here\" /></a></p>\n<p>docker stats output after first load:\n<a href=\"https://i.stack.imgur.com/qYqcY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qYqcY.png\" alt=\"enter image description here\" /></a></p>\n<p>I searched for solutions, they suggest to tweak <code>initialHeapSize</code>, <code>initialRamPercentage</code>, tried everything but it doesn't work.</p>\n"},{"tags":["java","maven","swing","intellij-idea","fatjar"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679252903,"post_id":75784143,"comment_id":133684068,"body_markdown":"Can you please add one of your `pom.xml ` experiments that didn&#39;t work? The one that looked &quot;most promising&quot; maybe? So we can give on-point hints. The key to your success will be the correct usage of the maven-assembly-plugin.","body":"Can you please add one of your <code>pom.xml </code> experiments that didn&#39;t work? The one that looked &quot;most promising&quot; maybe? So we can give on-point hints. The key to your success will be the correct usage of the maven-assembly-plugin."},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679262265,"post_id":75784143,"comment_id":133685411,"body_markdown":"Thanks so much cyberbrain, I am more than happy to do that....see code above. I am pretty sure there is some bs written, sorry for that...background is: with the help of Intellij I find java so nice, elegant and kind of straight-forward to programm, but as concerns a deeper understanding of maven, xml and Intellij configurations apart from the obvious I am kind of lost at the moment. Surely appreciate your help!!","body":"Thanks so much cyberbrain, I am more than happy to do that....see code above. I am pretty sure there is some bs written, sorry for that...background is: with the help of Intellij I find java so nice, elegant and kind of straight-forward to programm, but as concerns a deeper understanding of maven, xml and Intellij configurations apart from the obvious I am kind of lost at the moment. Surely appreciate your help!!"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679262590,"post_id":75784143,"comment_id":133685453,"body_markdown":"My Main-Class is currently under src/main/java/ dir, if that is of importance...for path adjustment or something","body":"My Main-Class is currently under src/main/java/ dir, if that is of importance...for path adjustment or something"},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679282525,"post_id":75784143,"comment_id":133687551,"body_markdown":"After running the `mvn clean pacakge`, there should be a `my-project-name-jar-with-dependencies.jar` in your project target file. Can you find that jar in that folder?","body":"After running the <code>mvn clean pacakge</code>, there should be a <code>my-project-name-jar-with-dependencies.jar</code> in your project target file. Can you find that jar in that folder?"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679305205,"post_id":75784143,"comment_id":133691211,"body_markdown":"@LJ replica : Thanks for your question. Yes, I generate two jar files in the target folder named my-project-name.jar and my-project-name-jar-with-dependencies.jar when running the &quot;clean package&quot; command. Both of them just do nothing when double-clicking on them. So there is no error message, but the jars behave like they were empty. The my-project-name.jar has 18kb, the my-project-name-jar-with-dependencies.jar is 0kb.","body":"@LJ replica : Thanks for your question. Yes, I generate two jar files in the target folder named my-project-name.jar and my-project-name-jar-with-dependencies.jar when running the &quot;clean package&quot; command. Both of them just do nothing when double-clicking on them. So there is no error message, but the jars behave like they were empty. The my-project-name.jar has 18kb, the my-project-name-jar-with-dependencies.jar is 0kb."},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679307323,"post_id":75784143,"comment_id":133691864,"body_markdown":"@Nose1 The 0kb is odd here as I use your pom.xml and it could generate a non 0kb jar. Try checking if any errors in output when running `mvn clean package`. If this does not help, you may try the IDEA artifact feature to package the flat jar: https://www.jetbrains.com/help/idea/working-with-artifacts.html#configure_artifact","body":"@Nose1 The 0kb is odd here as I use your pom.xml and it could generate a non 0kb jar. Try checking if any errors in output when running <code>mvn clean package</code>. If this does not help, you may try the IDEA artifact feature to package the flat jar: <a href=\"https://www.jetbrains.com/help/idea/working-with-artifacts.html#configure_artifact\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679314702,"post_id":75784143,"comment_id":133693788,"body_markdown":"can you please try install your own version of maven (effectively its a download and unzip) and then use that from a commandline to execute the `mvn clean package` ? Just to be sure from which side the issue comes (maven config vs. IDEA config)","body":"can you please try install your own version of maven (effectively its a download and unzip) and then use that from a commandline to execute the <code>mvn clean package</code> ? Just to be sure from which side the issue comes (maven config vs. IDEA config)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679314819,"post_id":75784143,"comment_id":133693829,"body_markdown":"Also important: can you please show the edit screen of the &quot;Current File&quot; configuration of IDEA? We don&#39;t know of your `Main` class even contains the right `main` method and if it is the class that should be started. And what happens when you start the jar-with-dependencies with `java -jar my-project-name-jar-with-dependencies.jar` from the commandline? Any error messages there?","body":"Also important: can you please show the edit screen of the &quot;Current File&quot; configuration of IDEA? We don&#39;t know of your <code>Main</code> class even contains the right <code>main</code> method and if it is the class that should be started. And what happens when you start the jar-with-dependencies with <code>java -jar my-project-name-jar-with-dependencies.jar</code> from the commandline? Any error messages there?"},{"owner":{"account_id":1506530,"reputation":1001,"user_id":1409784,"display_name":"Nigel Savage"},"score":0,"creation_date":1679411660,"post_id":75784143,"comment_id":133715173,"body_markdown":"you have 2 builds here intelij and maven, suggest you get it to build with maven separate to intellij, suggest you add the debug output to the maven build see section 6.1.9 here https://books.sonatype.com/mvnref-book/reference/running-sect-options.html , suggest add the archive element to the configuration section of assembly plugin as outlined here https://maven.apache.org/plugins/maven-assembly-plugin/usage.html","body":"you have 2 builds here intelij and maven, suggest you get it to build with maven separate to intellij, suggest you add the debug output to the maven build see section 6.1.9 here <a href=\"https://books.sonatype.com/mvnref-book/reference/running-sect-options.html\" rel=\"nofollow noreferrer\">books.sonatype.com/mvnref-book/reference/&hellip;</a> , suggest add the archive element to the configuration section of assembly plugin as outlined here <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/usage.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/usage.html</a>"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679427592,"post_id":75784143,"comment_id":133719857,"body_markdown":"Sorry people, &lt;br/&gt;\ntook me a while to configure everything in the right way, I recognized a mvn-associated problem.  &lt;br/&gt;\nNow I can answer your questions: &lt;br/&gt;\nWhen I execute the &quot;mvn clean package&quot; command in the Intellij terminal, it gives me this: &lt;br/&gt;\n-&gt; see fig01 above &lt;br/&gt;\nThe jar-files are now of a &quot;more healthy size&quot;, but still not at all executable: &lt;br/&gt;\n-&gt; see fig02 above &lt;br/&gt;\nI am not sure if the following can even work, but just for completeness: &lt;br/&gt;\n-&gt; see fig03 above &lt;br/&gt;","body":"Sorry people, &lt;br/&gt; took me a while to configure everything in the right way, I recognized a mvn-associated problem.  &lt;br/&gt; Now I can answer your questions: &lt;br/&gt; When I execute the &quot;mvn clean package&quot; command in the Intellij terminal, it gives me this: &lt;br/&gt; -&gt; see fig01 above &lt;br/&gt; The jar-files are now of a &quot;more healthy size&quot;, but still not at all executable: &lt;br/&gt; -&gt; see fig02 above &lt;br/&gt; I am not sure if the following can even work, but just for completeness: &lt;br/&gt; -&gt; see fig03 above &lt;br/&gt;"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679428233,"post_id":75784143,"comment_id":133720005,"body_markdown":"As concerns die &quot;edit configurations&quot;-configuration of Intellij -&gt; see fig04 above","body":"As concerns die &quot;edit configurations&quot;-configuration of Intellij -&gt; see fig04 above"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679430071,"post_id":75784143,"comment_id":133720423,"body_markdown":"@LJ replica: I have followed the instructions given by your link -&gt; see fig05 above. However, the Intellij terminal gives me this:        &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; -Dfile.encoding=windows-1252 -Dsun.stdout.encoding=windows-1252 -Dsun.stderr.encoding=windows-1252 -jar ......\\target\\my-project-name.jar\nError: Unable to initialize main class Main\nCaused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf\n\nProcess finished with exit code 1","body":"@LJ replica: I have followed the instructions given by your link -&gt; see fig05 above. However, the Intellij terminal gives me this:        &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; -Dfile.encoding=windows-1252 -Dsun.stdout.encoding=windows-1252 -Dsun.stderr.encoding=windows-1252 -jar ......\\target\\my-project-name.jar Error: Unable to initialize main class Main Caused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf  Process finished with exit code 1"},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679453418,"post_id":75784143,"comment_id":133723941,"body_markdown":"@Nose1 Try this https://stackoverflow.com/a/45902851 to fix the `no main manifest attribute` issue and package it again to see if it helps.","body":"@Nose1 Try this <a href=\"https://stackoverflow.com/a/45902851\">stackoverflow.com/a/45902851</a> to fix the <code>no main manifest attribute</code> issue and package it again to see if it helps."},{"owner":{"account_id":1506530,"reputation":1001,"user_id":1409784,"display_name":"Nigel Savage"},"score":0,"creation_date":1680109360,"post_id":75784143,"comment_id":133843058,"body_markdown":"In the maven-jar-plugin you have declared the mainClass as  &quot;Main&quot; usually we use a package and then use the fully qualified class name like some.package.Main for the mainClass","body":"In the maven-jar-plugin you have declared the mainClass as  &quot;Main&quot; usually we use a package and then use the fully qualified class name like some.package.Main for the mainClass"}],"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679429906,"creation_date":1679250581,"question_id":75784143,"body_markdown":"I am relatively new in Java programming and try to set up a Swing-based GUI with some action buttons (including ActionListener and ActionPerformed sections) as a first project. So far, I managed to create some buttons and assign some functions to them. Applying the standard play button on the main.java, which is then supposed to be my &quot;current file&quot;, &lt;br&gt;\r\n\r\n[Intellij screenshot](https://i.stack.imgur.com/Uf9K2.png) &lt;br&gt;\r\nthe output is working perfectly well: &lt;br&gt;\r\n[Swingbutton-panel](https://i.stack.imgur.com/zwVTc.png) &lt;br&gt;\r\nThe functions are further defined using a spread sheet file.\r\n\r\nMy problem now is how to use the maven pom.xml file and the Intellij IDE properly in order to create a (fat) jar file, which by doupleclicking will give me the programmed interface shown above.\r\nI have tried many things and checked out a lot of websites and youtube tutorials. The most helpful was propably this one so far:\r\nhttps://jenkov.com/tutorials/maven/maven-build-fat-jar.html\r\n\r\nFurthermore, I use the Maven &quot;clean package&quot; command trying to build the file. The only things I could acchieve in this respect was to build non-functional jar files or &quot;slim&quot; jars on minimal examples, which just print a &quot;hello world&quot; in the shell when using &quot;java -jre test.jar&quot; command.\r\n\r\nCan anyone help? Please pay attention to the &quot;special combination&quot; of Maven, fat-jar-building, the Swing-package and Intellij. Thanks so much in advance, I am excited to take your comments!\r\n\r\n\r\n    &lt;!--&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;--&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n       http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.jenkov.myprojectname&lt;/groupId&gt;\r\n        &lt;artifactId&gt;my-project-name&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1.0&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n        &lt;name&gt;My Project Name&lt;/name&gt;\r\n        &lt;!--\r\n            &lt;properties&gt;\r\n                &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n                &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n                &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;/properties&gt;\r\n            --&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n                &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n                &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.19.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.19.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\r\n                &lt;artifactId&gt;rc&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/com.seaglasslookandfeel/seaglasslookandfeel --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.seaglasslookandfeel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;seaglasslookandfeel&lt;/artifactId&gt;\r\n                &lt;version&gt;0.2.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flatlaf-intellij-themes&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;!-- Thanks for using https://jar-download.com --&gt;\r\n    \r\n        &lt;!-- https://jenkov.com/tutorials/maven/maven-build-fat-jar.html --&gt;\r\n        &lt;build&gt;\r\n            &lt;finalName&gt;my-project-name&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.6.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                &lt;mainClass&gt;Main&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.1&lt;/version&gt;\r\n    \r\n                    &lt;configuration&gt;\r\n                        &lt;descriptorRefs&gt;\r\n                            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                        &lt;/descriptorRefs&gt;\r\n                    &lt;/configuration&gt;\r\n    \r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;make-assembly&lt;/id&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n[fig01][1]\r\n\r\n[fig02][2]\r\n\r\n[fig03][3]\r\n\r\n[fig04][4]\r\n\r\n[fig05][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m1bOa.png\r\n  [2]: https://i.stack.imgur.com/ka5cI.png\r\n  [3]: https://i.stack.imgur.com/WgMFE.png\r\n  [4]: https://i.stack.imgur.com/dvpdC.png\r\n  [5]: https://i.stack.imgur.com/g2HWa.png","title":"Building executable FatJar file using Maven, the Swing GUI Toolkit and Intellij as development IDE","body":"<p>I am relatively new in Java programming and try to set up a Swing-based GUI with some action buttons (including ActionListener and ActionPerformed sections) as a first project. So far, I managed to create some buttons and assign some functions to them. Applying the standard play button on the main.java, which is then supposed to be my &quot;current file&quot;, <br></p>\n<p><a href=\"https://i.stack.imgur.com/Uf9K2.png\" rel=\"nofollow noreferrer\">Intellij screenshot</a> <br>\nthe output is working perfectly well: <br>\n<a href=\"https://i.stack.imgur.com/zwVTc.png\" rel=\"nofollow noreferrer\">Swingbutton-panel</a> <br>\nThe functions are further defined using a spread sheet file.</p>\n<p>My problem now is how to use the maven pom.xml file and the Intellij IDE properly in order to create a (fat) jar file, which by doupleclicking will give me the programmed interface shown above.\nI have tried many things and checked out a lot of websites and youtube tutorials. The most helpful was propably this one so far:\n<a href=\"https://jenkov.com/tutorials/maven/maven-build-fat-jar.html\" rel=\"nofollow noreferrer\">https://jenkov.com/tutorials/maven/maven-build-fat-jar.html</a></p>\n<p>Furthermore, I use the Maven &quot;clean package&quot; command trying to build the file. The only things I could acchieve in this respect was to build non-functional jar files or &quot;slim&quot; jars on minimal examples, which just print a &quot;hello world&quot; in the shell when using &quot;java -jre test.jar&quot; command.</p>\n<p>Can anyone help? Please pay attention to the &quot;special combination&quot; of Maven, fat-jar-building, the Swing-package and Intellij. Thanks so much in advance, I am excited to take your comments!</p>\n<pre><code>&lt;!--&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;--&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n   http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.jenkov.myprojectname&lt;/groupId&gt;\n    &lt;artifactId&gt;my-project-name&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;My Project Name&lt;/name&gt;\n    &lt;!--\n        &lt;properties&gt;\n            &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n            &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;/properties&gt;\n        --&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\n            &lt;artifactId&gt;rc&lt;/artifactId&gt;\n            &lt;version&gt;1.2.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.seaglasslookandfeel/seaglasslookandfeel --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.seaglasslookandfeel&lt;/groupId&gt;\n            &lt;artifactId&gt;seaglasslookandfeel&lt;/artifactId&gt;\n            &lt;version&gt;0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf-intellij-themes&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n    &lt;!-- Thanks for using https://jar-download.com --&gt;\n\n    &lt;!-- https://jenkov.com/tutorials/maven/maven-build-fat-jar.html --&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;my-project-name&lt;/finalName&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/m1bOa.png\" rel=\"nofollow noreferrer\">fig01</a></p>\n<p><a href=\"https://i.stack.imgur.com/ka5cI.png\" rel=\"nofollow noreferrer\">fig02</a></p>\n<p><a href=\"https://i.stack.imgur.com/WgMFE.png\" rel=\"nofollow noreferrer\">fig03</a></p>\n<p><a href=\"https://i.stack.imgur.com/dvpdC.png\" rel=\"nofollow noreferrer\">fig04</a></p>\n<p><a href=\"https://i.stack.imgur.com/g2HWa.png\" rel=\"nofollow noreferrer\">fig05</a></p>\n"},{"tags":["java","clojure"],"answers":[{"tags":[],"owner":{"account_id":510727,"reputation":3230,"user_id":1062189,"display_name":"erdos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679429192,"creation_date":1679429192,"answer_id":75805911,"question_id":75805022,"body_markdown":"The problem with the approach in the question is that you want to using the same thread pool for multiple different tasks:\r\n\r\n1. querying the database with a blocking operation, and then\r\n2. waiting for 1. to finish and then combine the response\r\n\r\nSince you have recursion, the lifecycle of 2. is long and these tasks will eat up all the threads in your executor, until 1. can no longer be executed, thus starving 1. indefinitely.\r\n\r\nHowever, 2. does not actually need to be _blocking_ a thread. It can be implemented with lightweight processes using [core.async](https://clojure.org/guides/core_async_go) so waiting for the query results would be just _parking_ instead. Rewriting the code in the original question would look something like the following:\r\n\r\n1. First, make the functions that are using the database return a channel instead of lazy sequences.\r\n\r\n```\r\n(defn resolve-eids [ctx form]\r\n  (clojure.core.async/thread ....))\r\n\r\n(defn obj-node [ctx eid]\r\n  (clojure.core.async/thread (DO-BLOCKING-SQL-QUERY-HERE)))\r\n\r\n(defn query-one [ctx form]\r\n  (clojure.core.async/thread ...))\r\n```\r\n\r\nRemember that you should not use `go` blocks for blocking operations (IO) as these will bring you back to the original problem. Instead, just use `clojure.core.async/thread` or something similar to use a dedicated thread pool that can be blocked safely.\r\n\r\n2. Then your query function should return a channel that is implemented with the `go` block and is using `(&lt;!)` for parking the process while waiting for the queries to complete.\r\n\r\n(Go blocks are relatively cheap, so the bottleneck now is the thread pool used for the actually IO blocking operatitions.)\r\n\r\n```\r\n(defn- query [ctx form]\r\n  (go\r\n    (let [[where-view eids] (&lt;! (resolve-eids ctx form))\r\n          obj-nodes         (obj-node ctx eids)\r\n          child-form-nodes  (query-one ctx (child-forms forms eids))]\r\n      (-&gt; (make-node where-view)\r\n          (add-children (&lt;! obj-nodes))\r\n          (add-children (&lt;! child-form-nodes))))))\r\n```\r\n\r\nAnd since `query` returns a channel now, you will have to call it like the following to actually get the result of the call: `(&lt;!! (query ... ...))`","title":"Thread pool for recursive calls to JDBC in Clojure","body":"<p>The problem with the approach in the question is that you want to using the same thread pool for multiple different tasks:</p>\n<ol>\n<li>querying the database with a blocking operation, and then</li>\n<li>waiting for 1. to finish and then combine the response</li>\n</ol>\n<p>Since you have recursion, the lifecycle of 2. is long and these tasks will eat up all the threads in your executor, until 1. can no longer be executed, thus starving 1. indefinitely.</p>\n<p>However, 2. does not actually need to be <em>blocking</em> a thread. It can be implemented with lightweight processes using <a href=\"https://clojure.org/guides/core_async_go\" rel=\"nofollow noreferrer\">core.async</a> so waiting for the query results would be just <em>parking</em> instead. Rewriting the code in the original question would look something like the following:</p>\n<ol>\n<li>First, make the functions that are using the database return a channel instead of lazy sequences.</li>\n</ol>\n<pre><code>(defn resolve-eids [ctx form]\n  (clojure.core.async/thread ....))\n\n(defn obj-node [ctx eid]\n  (clojure.core.async/thread (DO-BLOCKING-SQL-QUERY-HERE)))\n\n(defn query-one [ctx form]\n  (clojure.core.async/thread ...))\n</code></pre>\n<p>Remember that you should not use <code>go</code> blocks for blocking operations (IO) as these will bring you back to the original problem. Instead, just use <code>clojure.core.async/thread</code> or something similar to use a dedicated thread pool that can be blocked safely.</p>\n<ol start=\"2\">\n<li>Then your query function should return a channel that is implemented with the <code>go</code> block and is using <code>(&lt;!)</code> for parking the process while waiting for the queries to complete.</li>\n</ol>\n<p>(Go blocks are relatively cheap, so the bottleneck now is the thread pool used for the actually IO blocking operatitions.)</p>\n<pre><code>(defn- query [ctx form]\n  (go\n    (let [[where-view eids] (&lt;! (resolve-eids ctx form))\n          obj-nodes         (obj-node ctx eids)\n          child-form-nodes  (query-one ctx (child-forms forms eids))]\n      (-&gt; (make-node where-view)\n          (add-children (&lt;! obj-nodes))\n          (add-children (&lt;! child-form-nodes))))))\n</code></pre>\n<p>And since <code>query</code> returns a channel now, you will have to call it like the following to actually get the result of the call: <code>(&lt;!! (query ... ...))</code></p>\n"}],"owner":{"account_id":1353857,"reputation":2637,"user_id":1292663,"accept_rate":98,"display_name":"Stepan Parunashvili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75805911,"answer_count":1,"score":0,"last_activity_date":1679429192,"creation_date":1679422863,"question_id":75805022,"body_markdown":"**Context**\r\n\r\nI have a database connection pool, of size 20. I am writing a function, which makes a bunch of queries to the database, in a recursive manner \r\n\r\n```\r\n  Node\r\n    - db query: get ids\r\n      - for each id: \r\n         - db query: get attributes\r\n         - recurse if there are subqueries\r\n\r\n(I am aware this is an N+1 query, but bear with me that this is required)\r\n```\r\n\r\n**Goal**\r\n\r\nI want to achieve as much parallelism as I can. \r\n\r\n**Plan**\r\n\r\nI initially thought I would use a fixed-sized thread pool, which is the same length as the connection-pool-size. (Since the parallelism here is bound by the jdbc connection pool). \r\n\r\nThen I could write a function like so:\r\n\r\n```\r\n(defn- query\r\n  [{:keys [pool] :as ctx} form]\r\n  (let [[where-view eids] (resolve-eids ctx form)\r\n        [obj-nodes child-form-nodes]\r\n        (cp/pvalues pool\r\n                    (cp/upmap pool (partial obj-node ctx) eids)\r\n                    (cp/upmap (partial query-one ctx) (child-forms forms eids)))]\r\n    (-&gt; (make-node where-view)\r\n        (add-children obj-nodes)\r\n        (add-children child-form-nodes))))\r\n```\r\n\r\n\r\n**Problem**\r\n\r\nThe recursion here could starve the thread-pool, and cause it to hang. \r\n\r\n**Potential solutions**\r\n\r\nFrom research I thought maybe I could use `Fork/Join` pools. But I see here https://stackoverflow.com/questions/8206318/is-javas-fork-and-join-thread-pool-is-good-for-executing-io-bound-task that these are not quite meant for IO-bound tasks. \r\n\r\nWhat would be the best way for me to achieve this?","title":"Thread pool for recursive calls to JDBC in Clojure","body":"<p><strong>Context</strong></p>\n<p>I have a database connection pool, of size 20. I am writing a function, which makes a bunch of queries to the database, in a recursive manner</p>\n<pre><code>  Node\n    - db query: get ids\n      - for each id: \n         - db query: get attributes\n         - recurse if there are subqueries\n\n(I am aware this is an N+1 query, but bear with me that this is required)\n</code></pre>\n<p><strong>Goal</strong></p>\n<p>I want to achieve as much parallelism as I can.</p>\n<p><strong>Plan</strong></p>\n<p>I initially thought I would use a fixed-sized thread pool, which is the same length as the connection-pool-size. (Since the parallelism here is bound by the jdbc connection pool).</p>\n<p>Then I could write a function like so:</p>\n<pre><code>(defn- query\n  [{:keys [pool] :as ctx} form]\n  (let [[where-view eids] (resolve-eids ctx form)\n        [obj-nodes child-form-nodes]\n        (cp/pvalues pool\n                    (cp/upmap pool (partial obj-node ctx) eids)\n                    (cp/upmap (partial query-one ctx) (child-forms forms eids)))]\n    (-&gt; (make-node where-view)\n        (add-children obj-nodes)\n        (add-children child-form-nodes))))\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>The recursion here could starve the thread-pool, and cause it to hang.</p>\n<p><strong>Potential solutions</strong></p>\n<p>From research I thought maybe I could use <code>Fork/Join</code> pools. But I see here <a href=\"https://stackoverflow.com/questions/8206318/is-javas-fork-and-join-thread-pool-is-good-for-executing-io-bound-task\">Is Java&#39;s fork-and-join thread pool is good for executing IO bound task?</a> that these are not quite meant for IO-bound tasks.</p>\n<p>What would be the best way for me to achieve this?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":21708913,"reputation":355,"user_id":16020851,"display_name":"ToxicFlame427"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679429156,"creation_date":1679428465,"answer_id":75805816,"question_id":75805231,"body_markdown":"This is because your `VorlageTerif` activity class is attempted be be opened (via `Intent`) without passing both doubles (A and G) parameters that your activity requires.\r\n\r\nReplace this in MainActivity:...\r\n\r\n    val vor = Intent(this, VorlageTarif::class.java)\r\n    startActivity(Vor)\r\n\r\n...with this:\r\n\r\n    // Make sure your variable name does not start with an uppercase letter\r\n    val vor = Intent(this, VorlageTarif::class.java)\r\n    startActivity(vor)\r\n        .putExtra(VorlageTerif.A, A.toDouble()))\r\n        .putExtra(VorlageTerif.G, G.toDouble()))\r\n    // Pass the double variables you want in this case it would be A and G variables initialized in MainActivity, make sure to convert them to double instead of a string!\r\n\r\nWithout giving your second activity it&#39;s required data (in this case, a null parameter), the app will crash as a result when the null data is being used for calculations, even when there is no clear data present. This may not throw an error, just like in your case.","title":"Problem at changing the Activity, Android Studio","body":"<p>This is because your <code>VorlageTerif</code> activity class is attempted be be opened (via <code>Intent</code>) without passing both doubles (A and G) parameters that your activity requires.</p>\n<p>Replace this in MainActivity:...</p>\n<pre><code>val vor = Intent(this, VorlageTarif::class.java)\nstartActivity(Vor)\n</code></pre>\n<p>...with this:</p>\n<pre><code>// Make sure your variable name does not start with an uppercase letter\nval vor = Intent(this, VorlageTarif::class.java)\nstartActivity(vor)\n    .putExtra(VorlageTerif.A, A.toDouble()))\n    .putExtra(VorlageTerif.G, G.toDouble()))\n// Pass the double variables you want in this case it would be A and G variables initialized in MainActivity, make sure to convert them to double instead of a string!\n</code></pre>\n<p>Without giving your second activity it's required data (in this case, a null parameter), the app will crash as a result when the null data is being used for calculations, even when there is no clear data present. This may not throw an error, just like in your case.</p>\n"}],"owner":{"account_id":28079040,"reputation":13,"user_id":21450429,"display_name":"Benjamin Cisek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75805816,"answer_count":1,"score":1,"last_activity_date":1679429156,"creation_date":1679424124,"question_id":75805231,"body_markdown":"Hi Im coding an Math App for fun and have som problems with it in Kotlin, i treid search in the Internet but couldnt find anything,\r\n\r\nI have this two Activitys\r\n\r\n```\r\nclass VorlageTarif(var A: Double, var G: Double) : AppCompatActivity() ,  AdapterView.OnItemSelectedListener, OnClickListener {\r\n\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n\r\n\r\n        val spinner: Spinner = findViewById(R.id.Auswahl)\r\n        ArrayAdapter.createFromResource(\r\n            this,\r\n            R.array.planets_array,\r\n            android.R.layout.simple_spinner_item\r\n        ).also { adapter -&gt;\r\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\r\n            val spinner: Spinner = findViewById(R.id.Auswahl)\r\n            spinner.onItemSelectedListener = this\r\n            spinner.adapter = adapter\r\n        }\r\n\r\n        rbtn.setOnClickListener(this);\r\n        ChangeBTN.setOnClickListener(this)\r\n    }\r\n    \r\n\r\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\r\n\r\n        var Text: String = parent.getItemAtPosition(pos).toString();\r\n\r\n        if (Text == &quot;Starcong&quot;) {\r\n            A = 0.06\r\n            G = 6.0\r\n        }else if (Text == &quot;Basic&quot;) {\r\n            A = 0.09\r\n            G = 3.0\r\n        }else if (Text == &quot;Prepaid&quot;) {\r\n            A = 0.08\r\n            G= 0.0\r\n        } else if (Text == &quot;Sorglos&quot;) {\r\n            A = 1.0\r\n            G = 0.0\r\n        }\r\n    }\r\n\r\n    override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {\r\n\r\n    }\r\n\r\n    override fun onClick(p0: View?) {\r\n        when (p0?.id) {\r\n            R.id.rbtn -&gt; {\r\n\r\n\r\n\r\n                var X = XInput.text;\r\n                var X2 = X.toString()\r\n\r\n                var R: Double = X2.toDouble() * A + G\r\n                ET.text = R.toString()\r\n            }\r\n\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nand tahn this for the other Activity\r\n\r\n```\r\npackage com.example.handytarife\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.os.Debug\r\nimport android.text.Editable\r\nimport android.view.View\r\nimport android.view.View.OnClickListener\r\nimport kotlinx.android.synthetic.main.activity_main.*\r\n\r\nclass MainActivity : AppCompatActivity(), OnClickListener {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        rbtn.setOnClickListener(this);\r\n        ChangeBTN.setOnClickListener(this)\r\n\r\n    }\r\n\r\n    override fun onClick(p0: View?) {\r\n        when (p0?.id) {\r\n            R.id.rbtn -&gt; {\r\n\r\n                var X = XInput.text;\r\n                 var X2 = X.toString()\r\n                 var A = KInput.text.toString();\r\n                 var G = GInput.text.toString();\r\n                 var R: Double = X2.toDouble() * A.toDouble() + G.toDouble()\r\n                 ET.text = R.toString()\r\n            }\r\n\r\n            R.id.ChangeBTN -&gt; {\r\n                val Vor = Intent(this, VorlageTarif::class.java)\r\n                startActivity(Vor)\r\n                finish()\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    }\r\n```\r\n\r\nthey dont show any error but then i start my Apllication and press the Button to switch my Activity then it closing itself. I tried to lock at the Internet but dont find an Answer, please help me.","title":"Problem at changing the Activity, Android Studio","body":"<p>Hi Im coding an Math App for fun and have som problems with it in Kotlin, i treid search in the Internet but couldnt find anything,</p>\n<p>I have this two Activitys</p>\n<pre><code>class VorlageTarif(var A: Double, var G: Double) : AppCompatActivity() ,  AdapterView.OnItemSelectedListener, OnClickListener {\n\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n\n\n        val spinner: Spinner = findViewById(R.id.Auswahl)\n        ArrayAdapter.createFromResource(\n            this,\n            R.array.planets_array,\n            android.R.layout.simple_spinner_item\n        ).also { adapter -&gt;\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n            val spinner: Spinner = findViewById(R.id.Auswahl)\n            spinner.onItemSelectedListener = this\n            spinner.adapter = adapter\n        }\n\n        rbtn.setOnClickListener(this);\n        ChangeBTN.setOnClickListener(this)\n    }\n    \n\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\n\n        var Text: String = parent.getItemAtPosition(pos).toString();\n\n        if (Text == &quot;Starcong&quot;) {\n            A = 0.06\n            G = 6.0\n        }else if (Text == &quot;Basic&quot;) {\n            A = 0.09\n            G = 3.0\n        }else if (Text == &quot;Prepaid&quot;) {\n            A = 0.08\n            G= 0.0\n        } else if (Text == &quot;Sorglos&quot;) {\n            A = 1.0\n            G = 0.0\n        }\n    }\n\n    override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {\n\n    }\n\n    override fun onClick(p0: View?) {\n        when (p0?.id) {\n            R.id.rbtn -&gt; {\n\n\n\n                var X = XInput.text;\n                var X2 = X.toString()\n\n                var R: Double = X2.toDouble() * A + G\n                ET.text = R.toString()\n            }\n\n\n\n        }\n    }\n\n\n}\n</code></pre>\n<p>and tahn this for the other Activity</p>\n<pre><code>package com.example.handytarife\n\nimport android.content.Intent\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.Debug\nimport android.text.Editable\nimport android.view.View\nimport android.view.View.OnClickListener\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity(), OnClickListener {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        rbtn.setOnClickListener(this);\n        ChangeBTN.setOnClickListener(this)\n\n    }\n\n    override fun onClick(p0: View?) {\n        when (p0?.id) {\n            R.id.rbtn -&gt; {\n\n                var X = XInput.text;\n                 var X2 = X.toString()\n                 var A = KInput.text.toString();\n                 var G = GInput.text.toString();\n                 var R: Double = X2.toDouble() * A.toDouble() + G.toDouble()\n                 ET.text = R.toString()\n            }\n\n            R.id.ChangeBTN -&gt; {\n                val Vor = Intent(this, VorlageTarif::class.java)\n                startActivity(Vor)\n                finish()\n            }\n\n        }\n\n    }\n\n\n\n\n    }\n</code></pre>\n<p>they dont show any error but then i start my Apllication and press the Button to switch my Activity then it closing itself. I tried to lock at the Internet but dont find an Answer, please help me.</p>\n"},{"tags":["java","github"],"answers":[{"tags":[],"owner":{"account_id":8539404,"reputation":86,"user_id":6400008,"display_name":"R. Daumann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520327586,"creation_date":1520327586,"answer_id":49127164,"question_id":49127019,"body_markdown":"I am not aware of what you mean with PR but here is the documentation from github:\r\n\r\nhttps://developer.github.com/v3/guides/managing-deploy-keys/","title":"How to use deploy key of github in java git library","body":"<p>I am not aware of what you mean with PR but here is the documentation from github:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/</a></p>\n"},{"tags":[],"owner":{"account_id":10941923,"reputation":6757,"user_id":8041461,"accept_rate":60,"display_name":"jrtapsell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520329832,"creation_date":1520329832,"answer_id":49127854,"question_id":49127019,"body_markdown":"According to this:\r\n\r\n  https://developer.github.com/v3/guides/managing-deploy-keys/\r\n \r\ndeploy keys cannot be used for the API (only OAUTH keys can)\r\n\r\nHowever, you can clone a repo with an OAUTH key according to this:\r\n\r\nhttps://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens\r\n\r\nThe only issue with this would be that the scope would be less restricted.","title":"How to use deploy key of github in java git library","body":"<p>According to this:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/</a></p>\n\n<p>deploy keys cannot be used for the API (only OAUTH keys can)</p>\n\n<p>However, you can clone a repo with an OAUTH key according to this:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens</a></p>\n\n<p>The only issue with this would be that the scope would be less restricted.</p>\n"},{"tags":[],"owner":{"account_id":2439913,"reputation":139,"user_id":2128734,"display_name":"Anne van Leyden"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679428309,"creation_date":1679428309,"answer_id":75805793,"question_id":49127019,"body_markdown":"Note: I used a custom ssh dir `.ssh_github` to experiment freely without compromising my real ssh config.\r\n\r\n**ssh config**\r\n```\r\n$ mkdir ~/.ssh_github\r\n$ cp ~/.ssh/known_hosts ~/.ssh_github\r\n$ cp ~/.ssh/config ~/.ssh_github\r\n$ cd ~/.ssh_github\r\n$ ssh-keygen -t rsa -b 4096 -C whatever@email.com\r\nGenerating public/private rsa key pair.\r\nEnter file in which to save the key (/home/anne-ah/.ssh/id_rsa): id_rsa\r\n```\r\nIf you just enter just the file name, the public/private key files will be generated in the current dir. You can enter a passphrase if you like, but can also leave it empty.\r\n\r\nGet the public key...\r\n```\r\n$ cat id_rsa.pub\r\n```\r\n... and use it as the Github deploy key (you can leave the email address off, it doesn&#39;t matter)\r\n\r\nIt is important to have the github.com server key fingerprints in your `known_hosts` file. You can get them here: https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints . Simply append them all to the `known_hosts` file. \r\n\r\n**Libraries**\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;\r\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.jgit.ssh.apache&lt;/artifactId&gt;\r\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**Java code**\r\n```\r\nimport org.eclipse.jgit.api.TransportConfigCallback;\r\nimport org.eclipse.jgit.transport.SshTransport;\r\nimport org.eclipse.jgit.transport.Transport;\r\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactory;\r\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactoryBuilder;\r\nimport java.io.File;\r\n\r\nclass SshTransportConfigCallback implements TransportConfigCallback {\r\n    SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\r\n        .setHomeDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\r\n        .setSshDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\r\n        .build(null);\r\n\r\n    @Override\r\n    public void configure(Transport transport) {\r\n        SshTransport sshTransport = (SshTransport) transport;\r\n        sshTransport.setSshSessionFactory(sshSessionFactory);\r\n    }\r\n}\r\n```\r\nGet the ssh url for your repository and then you should be able to clone it:\r\n```\r\nGit.cloneRepository()\r\n    .setDirectory(Files.createTempDirectory(&quot;my-repo&quot;).toFile())\r\n    .setTransportConfigCallback(new SshTransportConfigCallback())\r\n    .setURI(&quot;org-28603984@github.com:MyCompany/my-repo.git&quot;)\r\n    .call();\r\n```\r\n\r\nIt is not that hard, but it can be fiddly. And the sometimes vague and/or generic error messages do not help troubleshooting.","title":"How to use deploy key of github in java git library","body":"<p>Note: I used a custom ssh dir <code>.ssh_github</code> to experiment freely without compromising my real ssh config.</p>\n<p><strong>ssh config</strong></p>\n<pre><code>$ mkdir ~/.ssh_github\n$ cp ~/.ssh/known_hosts ~/.ssh_github\n$ cp ~/.ssh/config ~/.ssh_github\n$ cd ~/.ssh_github\n$ ssh-keygen -t rsa -b 4096 -C whatever@email.com\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/anne-ah/.ssh/id_rsa): id_rsa\n</code></pre>\n<p>If you just enter just the file name, the public/private key files will be generated in the current dir. You can enter a passphrase if you like, but can also leave it empty.</p>\n<p>Get the public key...</p>\n<pre><code>$ cat id_rsa.pub\n</code></pre>\n<p>... and use it as the Github deploy key (you can leave the email address off, it doesn't matter)</p>\n<p>It is important to have the github.com server key fingerprints in your <code>known_hosts</code> file. You can get them here: <a href=\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints\" rel=\"nofollow noreferrer\">https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints</a> . Simply append them all to the <code>known_hosts</code> file.</p>\n<p><strong>Libraries</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.jgit.ssh.apache&lt;/artifactId&gt;\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Java code</strong></p>\n<pre><code>import org.eclipse.jgit.api.TransportConfigCallback;\nimport org.eclipse.jgit.transport.SshTransport;\nimport org.eclipse.jgit.transport.Transport;\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactory;\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactoryBuilder;\nimport java.io.File;\n\nclass SshTransportConfigCallback implements TransportConfigCallback {\n    SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\n        .setHomeDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\n        .setSshDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\n        .build(null);\n\n    @Override\n    public void configure(Transport transport) {\n        SshTransport sshTransport = (SshTransport) transport;\n        sshTransport.setSshSessionFactory(sshSessionFactory);\n    }\n}\n</code></pre>\n<p>Get the ssh url for your repository and then you should be able to clone it:</p>\n<pre><code>Git.cloneRepository()\n    .setDirectory(Files.createTempDirectory(&quot;my-repo&quot;).toFile())\n    .setTransportConfigCallback(new SshTransportConfigCallback())\n    .setURI(&quot;org-28603984@github.com:MyCompany/my-repo.git&quot;)\n    .call();\n</code></pre>\n<p>It is not that hard, but it can be fiddly. And the sometimes vague and/or generic error messages do not help troubleshooting.</p>\n"}],"owner":{"account_id":4608650,"reputation":1,"user_id":3737413,"display_name":"Prince Rachit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679428309,"creation_date":1520327158,"question_id":49127019,"body_markdown":"I am trying Jgit and Egit to raise PR using deploy key on github.com but I am unable to find a way to do it. There are no relevant documents present.\r\nCan somebody point me to documentation or suggest some other java library to do it?","title":"How to use deploy key of github in java git library","body":"<p>I am trying Jgit and Egit to raise PR using deploy key on github.com but I am unable to find a way to do it. There are no relevant documents present.\nCan somebody point me to documentation or suggest some other java library to do it?</p>\n"},{"tags":["java","selenium-webdriver","testng"],"comments":[{"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"score":0,"creation_date":1679337134,"post_id":75784495,"comment_id":133700474,"body_markdown":"@JeffC I have updated the post with my question and I hope it&#39;s more clear now.\n\nUpdate: &quot;I wanted to know if there&#39;s a way for me to pass the value from the **selectDriver** method to the **browser** parameter that I am using within the **TestSuite.xml**&quot;","body":"@JeffC I have updated the post with my question and I hope it&#39;s more clear now.  Update: &quot;I wanted to know if there&#39;s a way for me to pass the value from the <b>selectDriver</b> method to the <b>browser</b> parameter that I am using within the <b>TestSuite.xml</b>&quot;"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1679343132,"post_id":75784495,"comment_id":133701915,"body_markdown":"TestSuite.xml is just one way to pass in a driver. You can just write code that processes the input from Scanner(), creates a driver of that flavor, and runs the test/suite.","body":"TestSuite.xml is just one way to pass in a driver. You can just write code that processes the input from Scanner(), creates a driver of that flavor, and runs the test/suite."},{"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"score":0,"creation_date":1679426140,"post_id":75784495,"comment_id":133719573,"body_markdown":"@JeffC I have tried to implement the **selectDriver** method within my **webDriver** method that has the **@BeforeClass** annotation while also removing the **browser** parameter. However, I am given a read-only console when running the tests. Any idea of what the issue is or how should I proceed with the implementation?","body":"@JeffC I have tried to implement the <b>selectDriver</b> method within my <b>webDriver</b> method that has the <b>@BeforeClass</b> annotation while also removing the <b>browser</b> parameter. However, I am given a read-only console when running the tests. Any idea of what the issue is or how should I proceed with the implementation?"}],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679428147,"creation_date":1679428147,"answer_id":75805770,"question_id":75784495,"body_markdown":"I think you&#39;re going about it the wrong way. I think the ideal way is to set up a release in whatever system you are using to trigger tests. Each release would specify all the expected settings... driver, resolutions, etc. and then if someone wants to start a run, they trigger the release corresponding to the driver/settings they want run.","title":"WebDriver chosen by user input for Selenium Tests using TestNG suites","body":"<p>I think you're going about it the wrong way. I think the ideal way is to set up a release in whatever system you are using to trigger tests. Each release would specify all the expected settings... driver, resolutions, etc. and then if someone wants to start a run, they trigger the release corresponding to the driver/settings they want run.</p>\n"}],"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679428147,"creation_date":1679254438,"question_id":75784495,"body_markdown":"I am trying to integrate `Scanner()` class within my existing Selenium test cases so the users can choose the WebDriver to run the tests on and the value I believe would need to be passed to the TestNG suite.\r\n\r\nI wanted to know if there&#39;s a way for me to pass the value from the **selectDriver** Java method to the **browser** parameter that I am using within the **TestSuite.xml**\r\n\r\nBelow is what I already have in place and also what I have tried implementing:\r\n\r\n**selectDriver**\r\n\r\n    public static String selectDriver() {\r\n\r\n        Scanner reader = new Scanner(System.in);\r\n        System.out.println(&quot;Please select a platform and a device to run the tests on:\\n&quot; +\r\n                &quot;Windows\\n&quot; +\r\n                &quot;\\t1. Google Chrome\\n&quot; +\r\n                &quot;\\t2. Firefox\\n&quot; +\r\n                &quot;\\t3. Microsoft Edge\\n\\n&quot; +\r\n                &quot;Android\\n&quot; +\r\n                &quot;\\t4. Google Chrome&quot;);\r\n\r\n        int driverSelection = reader.nextInt();\r\n\r\n        if (driverSelection == 1) {\r\n            return &quot;chromeWindows&quot;;\r\n        } else if (driverSelection == 2) {\r\n            return &quot;firefoxWindows&quot;;\r\n        } else if (driverSelection == 3) {\r\n            return &quot;edgeWindows&quot;;\r\n        } else if (driverSelection == 4) {\r\n            return &quot;chromeAndroid&quot;;\r\n        }\r\n        reader.close();\r\n        return null;\r\n    }\r\n\r\n**webDriver**\r\n\r\n    @Parameters(&quot;browser&quot;)\r\n    @BeforeClass\r\n    public void webDriver(String browser) throws IOException {\r\n\r\n        if (browser.equalsIgnoreCase(&quot;chromeWindows&quot;)) {\r\n\r\n            List&lt;String&gt; driverArguments = List.of(&quot;start-maximized&quot;, &quot;remote-debugging-port=9222&quot;, &quot;disable-popup-blocking&quot;, &quot;disable-notifications&quot;, &quot;--remote-allow-origins=*&quot;); \r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, currentUserDirectory + Config.config(&quot;chromeDriverPath&quot;));\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, new String[]{&quot;enable-automation&quot;});\r\n            options.addArguments(driverArguments);\r\n            setWebDriver(new ChromeDriver(options));\r\n\r\n**TestSuite.xml**\r\n\r\n        !DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;\r\n    suite name=&quot;Desktop - Selenium Tests&quot;\r\n    \r\n        parameter name=&quot;browser&quot; value=&quot;chrome&quot;/\r\n    \r\n        &lt;test name=&quot;Test1&quot; &gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;tests.desktop.homePageTest&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\n\r\nIf there&#39;s no easier way to achieve that, I&#39;ll have to take a look into editing an XML file based on the user&#39;s input to provide the **browser** value.","title":"WebDriver chosen by user input for Selenium Tests using TestNG suites","body":"<p>I am trying to integrate <code>Scanner()</code> class within my existing Selenium test cases so the users can choose the WebDriver to run the tests on and the value I believe would need to be passed to the TestNG suite.</p>\n<p>I wanted to know if there's a way for me to pass the value from the <strong>selectDriver</strong> Java method to the <strong>browser</strong> parameter that I am using within the <strong>TestSuite.xml</strong></p>\n<p>Below is what I already have in place and also what I have tried implementing:</p>\n<p><strong>selectDriver</strong></p>\n<pre><code>public static String selectDriver() {\n\n    Scanner reader = new Scanner(System.in);\n    System.out.println(&quot;Please select a platform and a device to run the tests on:\\n&quot; +\n            &quot;Windows\\n&quot; +\n            &quot;\\t1. Google Chrome\\n&quot; +\n            &quot;\\t2. Firefox\\n&quot; +\n            &quot;\\t3. Microsoft Edge\\n\\n&quot; +\n            &quot;Android\\n&quot; +\n            &quot;\\t4. Google Chrome&quot;);\n\n    int driverSelection = reader.nextInt();\n\n    if (driverSelection == 1) {\n        return &quot;chromeWindows&quot;;\n    } else if (driverSelection == 2) {\n        return &quot;firefoxWindows&quot;;\n    } else if (driverSelection == 3) {\n        return &quot;edgeWindows&quot;;\n    } else if (driverSelection == 4) {\n        return &quot;chromeAndroid&quot;;\n    }\n    reader.close();\n    return null;\n}\n</code></pre>\n<p><strong>webDriver</strong></p>\n<pre><code>@Parameters(&quot;browser&quot;)\n@BeforeClass\npublic void webDriver(String browser) throws IOException {\n\n    if (browser.equalsIgnoreCase(&quot;chromeWindows&quot;)) {\n\n        List&lt;String&gt; driverArguments = List.of(&quot;start-maximized&quot;, &quot;remote-debugging-port=9222&quot;, &quot;disable-popup-blocking&quot;, &quot;disable-notifications&quot;, &quot;--remote-allow-origins=*&quot;); \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, currentUserDirectory + Config.config(&quot;chromeDriverPath&quot;));\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, new String[]{&quot;enable-automation&quot;});\n        options.addArguments(driverArguments);\n        setWebDriver(new ChromeDriver(options));\n</code></pre>\n<p><strong>TestSuite.xml</strong></p>\n<pre><code>    !DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;\nsuite name=&quot;Desktop - Selenium Tests&quot;\n\n    parameter name=&quot;browser&quot; value=&quot;chrome&quot;/\n\n    &lt;test name=&quot;Test1&quot; &gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;tests.desktop.homePageTest&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>If there's no easier way to achieve that, I'll have to take a look into editing an XML file based on the user's input to provide the <strong>browser</strong> value.</p>\n"},{"tags":["java","javafx","spinner"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1679426421,"post_id":75805024,"comment_id":133719630,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679428124,"creation_date":1679428124,"answer_id":75805768,"question_id":75805024,"body_markdown":"Simply setting the repeat delay to `Duration.INDEFINITE` seems to work:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Spinner;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Duration;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(0,100,1);\r\n\r\n            spinner.setRepeatDelay(Duration.INDEFINITE);\r\n\r\n            BorderPane root = new BorderPane(spinner);\r\n            Scene scene = new Scene(root, 320, 180);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }","title":"JavaFX Spinner should only decrement/increment by one value when holding the mouse pressed","body":"<p>Simply setting the repeat delay to <code>Duration.INDEFINITE</code> seems to work:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(0,100,1);\n\n        spinner.setRepeatDelay(Duration.INDEFINITE);\n\n        BorderPane root = new BorderPane(spinner);\n        Scene scene = new Scene(root, 320, 180);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23307629,"reputation":11,"user_id":17387377,"display_name":"AnonymousBoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1679444859,"answer_count":1,"score":0,"last_activity_date":1679428124,"creation_date":1679422888,"question_id":75805024,"body_markdown":"When I hold the increment/decrement buttons of the spinner, the value inside the Spinner is incrementing/decrementing very fast, but I only want it to increment/decrement one time (one Integer down/up) every time I hold the arrows of the Spinner.\r\n\r\nI want that holding the arrows should behave the same as clicking the arrows of the Spinner.\r\n\r\nIs there a solution to this?\r\n\r\nI already tried the &quot;On Mouse Clicked&quot; and the &quot;On Mouse Pressed&quot; Events.","title":"JavaFX Spinner should only decrement/increment by one value when holding the mouse pressed","body":"<p>When I hold the increment/decrement buttons of the spinner, the value inside the Spinner is incrementing/decrementing very fast, but I only want it to increment/decrement one time (one Integer down/up) every time I hold the arrows of the Spinner.</p>\n<p>I want that holding the arrows should behave the same as clicking the arrows of the Spinner.</p>\n<p>Is there a solution to this?</p>\n<p>I already tried the &quot;On Mouse Clicked&quot; and the &quot;On Mouse Pressed&quot; Events.</p>\n"},{"tags":["java","libreoffice","openoffice.org","odt","opendocument"],"answers":[{"tags":[],"owner":{"account_id":77937,"reputation":25992,"user_id":222159,"accept_rate":94,"display_name":"Adnan"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1675177504,"creation_date":1295945163,"answer_id":4791419,"question_id":4791389,"body_markdown":"Take a look at [ODFDOM - the OpenDocument API][1]\r\n\r\n&gt; ODFDOM is a free OpenDocument Format\r\n&gt; (ODF) library. Its purpose is to\r\n&gt; provide an easy common way to create,\r\n&gt; access and manipulate ODF files,\r\n&gt; without requiring detailed knowledge\r\n&gt; of the ODF specification. It is\r\n&gt; designed to provide the ODF developer\r\n&gt; community with an easy lightwork\r\n&gt; programming API portable to any\r\n&gt; object-oriented language.\r\n&gt; \r\n&gt; The current reference implementation\r\n&gt; is written in Java.\r\n\r\n    // Create a text document from a standard template (empty documents within the JAR)\r\n    OdfTextDocument odt = OdfTextDocument.newTextDocument();\r\n    \r\n    // Append text to the end of the document. \r\n    odt.addText(&quot;This is my very first ODF test&quot;);\r\n    \r\n    // Save document\r\n    odt.save(&quot;MyFilename.odt&quot;);\r\n\r\n***later***\r\n\r\nAs of this writing (2016-02), we are told that these classes are deprecated... big time, and the `OdfTextDocument` API documentation tells you:\r\n\r\n&gt; As of release 0.8.8, replaced by org.odftoolkit.simple.TextDocument in\r\n&gt; Simple API.\r\n\r\nThis means you still include the same active .jar file in your project, `simple-odf-0.8.1-incubating-jar-with-dependencies.jar`, but you want to be unpacking the following .jar to get the documentation: `simple-odf-0.8.1-incubating-javadoc.jar`, rather than `odfdom-java-0.8.10-incubating-javadoc.jar`.\r\n\r\nIncidentally, the documentation link downloads a bunch of jar files inside a .zip which says &quot;0.6.1&quot;... but most of the stuff inside appears to be more like 0.8.1.  I have no idea why they say &quot;as of 0.8.8&quot; in the documentation for the &quot;deprecated&quot; classes: just about everything is already marked deprecated.\r\n\r\nThe equivalent simple code to the above is then:\r\n\r\n    odt_doc = org.odftoolkit.simple.TextDocument.newTextDocument()\r\n    para = odt_doc.getParagraphByIndex( 0, False )\r\n    para.appendTextContent( &#39;stuff and nonsense&#39; )\r\n    odt_doc.save( &#39;mySpankingNewFile.odt&#39; )\r\n\r\nPS am using Jython, but the Java should be obvious.\r\n\r\n\r\n  [1]: https://odftoolkit.org/odfdom/\r\n","title":"how to create an odt file programmatically with java?","body":"<p>Take a look at <a href=\"https://odftoolkit.org/odfdom/\" rel=\"nofollow noreferrer\">ODFDOM - the OpenDocument API</a></p>\n<blockquote>\n<p>ODFDOM is a free OpenDocument Format\n(ODF) library. Its purpose is to\nprovide an easy common way to create,\naccess and manipulate ODF files,\nwithout requiring detailed knowledge\nof the ODF specification. It is\ndesigned to provide the ODF developer\ncommunity with an easy lightwork\nprogramming API portable to any\nobject-oriented language.</p>\n<p>The current reference implementation\nis written in Java.</p>\n</blockquote>\n<pre><code>// Create a text document from a standard template (empty documents within the JAR)\nOdfTextDocument odt = OdfTextDocument.newTextDocument();\n\n// Append text to the end of the document. \nodt.addText(&quot;This is my very first ODF test&quot;);\n\n// Save document\nodt.save(&quot;MyFilename.odt&quot;);\n</code></pre>\n<p><em><strong>later</strong></em></p>\n<p>As of this writing (2016-02), we are told that these classes are deprecated... big time, and the <code>OdfTextDocument</code> API documentation tells you:</p>\n<blockquote>\n<p>As of release 0.8.8, replaced by org.odftoolkit.simple.TextDocument in\nSimple API.</p>\n</blockquote>\n<p>This means you still include the same active .jar file in your project, <code>simple-odf-0.8.1-incubating-jar-with-dependencies.jar</code>, but you want to be unpacking the following .jar to get the documentation: <code>simple-odf-0.8.1-incubating-javadoc.jar</code>, rather than <code>odfdom-java-0.8.10-incubating-javadoc.jar</code>.</p>\n<p>Incidentally, the documentation link downloads a bunch of jar files inside a .zip which says &quot;0.6.1&quot;... but most of the stuff inside appears to be more like 0.8.1.  I have no idea why they say &quot;as of 0.8.8&quot; in the documentation for the &quot;deprecated&quot; classes: just about everything is already marked deprecated.</p>\n<p>The equivalent simple code to the above is then:</p>\n<pre><code>odt_doc = org.odftoolkit.simple.TextDocument.newTextDocument()\npara = odt_doc.getParagraphByIndex( 0, False )\npara.appendTextContent( 'stuff and nonsense' )\nodt_doc.save( 'mySpankingNewFile.odt' )\n</code></pre>\n<p>PS am using Jython, but the Java should be obvious.</p>\n"},{"tags":[],"owner":{"account_id":39267,"reputation":16578,"user_id":113158,"accept_rate":88,"display_name":"Jean Hominal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1295945179,"creation_date":1295945179,"answer_id":4791423,"question_id":4791389,"body_markdown":"I have not tried it, but using [JOpenDocument](http://www.jopendocument.org/) may be an option. (It seems to be a pure Java library to generate OpenDocument files.)","title":"how to create an odt file programmatically with java?","body":"<p>I have not tried it, but using <a href=\"http://www.jopendocument.org/\" rel=\"noreferrer\">JOpenDocument</a> may be an option. (It seems to be a pure Java library to generate OpenDocument files.)</p>\n"},{"tags":[],"owner":{"account_id":544830,"reputation":2561,"user_id":914404,"accept_rate":100,"display_name":"Marc de Verdelhan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679428039,"creation_date":1354612958,"answer_id":13699578,"question_id":4791389,"body_markdown":"A complement of previously given solutions would be [JODReports][1], which allows creating office documents and reports in ODT format (from templates, composed using the LibreOffice/OpenOffice.org Writer word processor).\r\n\r\n    DocumentTemplateFactory templateFactory = new DocumentTemplateFactory();\r\n    DocumentTemplate template = templateFactory .getTemplate(new File(&quot;template.odt&quot;));\r\n    Map data = new HashMap();\r\n    data.put(&quot;title&quot;, &quot;Title of my doc&quot;);\r\n    data.put(&quot;picture&quot;, new RenderedImageSource(ImageIO.read(new File(&quot;/tmp/lena.png&quot;))));\r\n    data.put(&quot;answer&quot;, &quot;42&quot;);\r\n    //...\r\n    template.createDocument(data, new FileOutputStream(&quot;output.odt&quot;));\r\n\r\n\r\nOptionally the documents can then be converted to PDF, Word, RTF, etc. with [JODConverter][2].\r\n\r\nEdit/update\r\n-----------\r\nOn GitHub, [ansgarkonermann/jodreports-examples][3] is a sample project using JODReports (with non-trivial formatting cases).\r\n\r\n\r\n  [1]: http://jodreports.sourceforge.net/\r\n  [2]: http://code.google.com/p/jodconverter/\r\n  [3]: https://github.com/ansgarkonermann/jodreports-examples","title":"how to create an odt file programmatically with java?","body":"<p>A complement of previously given solutions would be <a href=\"http://jodreports.sourceforge.net/\" rel=\"nofollow noreferrer\">JODReports</a>, which allows creating office documents and reports in ODT format (from templates, composed using the LibreOffice/OpenOffice.org Writer word processor).</p>\n<pre><code>DocumentTemplateFactory templateFactory = new DocumentTemplateFactory();\nDocumentTemplate template = templateFactory .getTemplate(new File(&quot;template.odt&quot;));\nMap data = new HashMap();\ndata.put(&quot;title&quot;, &quot;Title of my doc&quot;);\ndata.put(&quot;picture&quot;, new RenderedImageSource(ImageIO.read(new File(&quot;/tmp/lena.png&quot;))));\ndata.put(&quot;answer&quot;, &quot;42&quot;);\n//...\ntemplate.createDocument(data, new FileOutputStream(&quot;output.odt&quot;));\n</code></pre>\n<p>Optionally the documents can then be converted to PDF, Word, RTF, etc. with <a href=\"http://code.google.com/p/jodconverter/\" rel=\"nofollow noreferrer\">JODConverter</a>.</p>\n<h2>Edit/update</h2>\n<p>On GitHub, <a href=\"https://github.com/ansgarkonermann/jodreports-examples\" rel=\"nofollow noreferrer\">ansgarkonermann/jodreports-examples</a> is a sample project using JODReports (with non-trivial formatting cases).</p>\n"},{"tags":[],"owner":{"display_name":"user67416"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371838162,"creation_date":1371837756,"answer_id":17241582,"question_id":4791389,"body_markdown":"I have written a jruby DSL for programmatically manipulating ODF documents.\r\n\r\nhttps://github.com/noah/ocelot\r\n\r\nIt&#39;s not strictly java, but it aims to be much simpler to use than the ODFDOM.\r\n\r\nCreating a hello world document is as easy as:\r\n\r\n    % cat examples/hello.rb\r\n    include OCELOT\r\n\r\n    Text::create &quot;hello&quot; do\r\n      paragraph &quot;Hello, world!&quot;\r\n    end\r\n\r\nThere are a few more examples (including a spreadsheet example or two) [here][1].\r\n\r\n\r\n  [1]: https://github.com/noah/ocelot/tree/master/examples","title":"how to create an odt file programmatically with java?","body":"<p>I have written a jruby DSL for programmatically manipulating ODF documents.</p>\n\n<p><a href=\"https://github.com/noah/ocelot\" rel=\"nofollow\">https://github.com/noah/ocelot</a></p>\n\n<p>It's not strictly java, but it aims to be much simpler to use than the ODFDOM.</p>\n\n<p>Creating a hello world document is as easy as:</p>\n\n<pre><code>% cat examples/hello.rb\ninclude OCELOT\n\nText::create \"hello\" do\n  paragraph \"Hello, world!\"\nend\n</code></pre>\n\n<p>There are a few more examples (including a spreadsheet example or two) <a href=\"https://github.com/noah/ocelot/tree/master/examples\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380616617,"creation_date":1380616617,"answer_id":19111553,"question_id":4791389,"body_markdown":"You can try using **[JasperReports][1]** to generate your reports, then [**export it to ODS**](http://www.ramkitech.com/2011/11/jsf-jpa-jasperreports-ireport.html). The nice thing about this approach is \r\n\r\n 1. you get broad support for all JasperReports output formats, e.g. PDF, XLS, HTML, etc.\r\n 2. [**Jasper Studio**](jasperforge.org/projects/jaspersoftstudio) makes it easy to design your reports\r\n\r\n\r\n  [1]: http://jasperforge.org","title":"how to create an odt file programmatically with java?","body":"<p>You can try using <strong><a href=\"http://jasperforge.org\" rel=\"nofollow\">JasperReports</a></strong> to generate your reports, then <a href=\"http://www.ramkitech.com/2011/11/jsf-jpa-jasperreports-ireport.html\" rel=\"nofollow\"><strong>export it to ODS</strong></a>. The nice thing about this approach is </p>\n\n<ol>\n<li>you get broad support for all JasperReports output formats, e.g. PDF, XLS, HTML, etc.</li>\n<li><strong>Jasper Studio</strong> makes it easy to design your reports</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2621174,"reputation":229,"user_id":2971524,"display_name":"aibrahim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442311451,"creation_date":1441973349,"answer_id":32523198,"question_id":4791389,"body_markdown":"I have been searching for an answer about this question for myself. I am working on a project for generating documents with different formats and I was in a bad need for library to generate ODT files.\r\nI finally can say the that ODFToolkit with the latest version of the simple-odf library is the answer for generating text documents. \r\nYou can find the the official page here :\r\n[Apache ODF Toolkit(Incubating) - Simple API ][1]\r\nHere is  [a page to download version 0.8.1 (the latest version of Simple API)][2] as I didn&#39;t find the latest version at the official page, only version 0.6.1\r\n\r\nAnd here you can find [Apache ODF Toolkit (incubating) cookbook][3]\r\n\r\n\r\n  [1]: https://incubator.apache.org/odftoolkit/simple/index.html\r\n  [2]: http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.odftoolkit/simple-odf/0.8.1-incubating\r\n  [3]: http://incubator.apache.org/odftoolkit/simple/document/cookbook/index.html","title":"how to create an odt file programmatically with java?","body":"<p>I have been searching for an answer about this question for myself. I am working on a project for generating documents with different formats and I was in a bad need for library to generate ODT files.\nI finally can say the that ODFToolkit with the latest version of the simple-odf library is the answer for generating text documents. \nYou can find the the official page here :\n<a href=\"https://incubator.apache.org/odftoolkit/simple/index.html\" rel=\"nofollow\">Apache ODF Toolkit(Incubating) - Simple API </a>\nHere is  <a href=\"http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.odftoolkit/simple-odf/0.8.1-incubating\" rel=\"nofollow\">a page to download version 0.8.1 (the latest version of Simple API)</a> as I didn't find the latest version at the official page, only version 0.6.1</p>\n\n<p>And here you can find <a href=\"http://incubator.apache.org/odftoolkit/simple/document/cookbook/index.html\" rel=\"nofollow\">Apache ODF Toolkit (incubating) cookbook</a></p>\n"},{"tags":[],"owner":{"account_id":16667817,"reputation":1,"user_id":12046056,"display_name":"DevVladan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1568192922,"creation_date":1568109720,"answer_id":57868401,"question_id":4791389,"body_markdown":"the solution may be JODF Java API Independentsoft company.\r\nFor example, if we want to create an Open Document file using this Java API  we could do the following:\r\n\r\n```\r\nimport com.independentsoft.office.odf.Paragraph;\r\nimport com.independentsoft.office.odf.TextDocument;\r\n\r\npublic class Example {\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        try\r\n        {\r\n            TextDocument doc = new TextDocument();\r\n            \r\n            Paragraph p1 = new Paragraph();\r\n            p1.add(&quot;Hello World&quot;);\r\n\r\n            doc.getBody().add(p1);\r\n\r\n            doc.save(&quot;c:\\\\test\\\\output.odt&quot;, true);\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n``` \r\nThere are also .NET solutions for this API.","title":"how to create an odt file programmatically with java?","body":"<p>the solution may be JODF Java API Independentsoft company.\nFor example, if we want to create an Open Document file using this Java API  we could do the following:</p>\n\n<pre><code>import com.independentsoft.office.odf.Paragraph;\nimport com.independentsoft.office.odf.TextDocument;\n\npublic class Example {\n\n    public static void main(String[] args)\n    {\n        try\n        {\n            TextDocument doc = new TextDocument();\n\n            Paragraph p1 = new Paragraph();\n            p1.add(\"Hello World\");\n\n            doc.getBody().add(p1);\n\n            doc.save(\"c:\\\\test\\\\output.odt\", true);\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n\n<p>There are also .NET solutions for this API.</p>\n"},{"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647103995,"creation_date":1647103676,"answer_id":71451511,"question_id":4791389,"body_markdown":"[The ODF Toolkit][1] project (code hosted at [Github][2]) is the new home of the former ODFDOM project, which was until 2018-11-27 a [Apache Incubator project][3]. \r\n\r\n\r\n  [1]: https://odftoolkit.org/\r\n  [2]: https://github.com/tdf/odftoolkit\r\n  [3]: https://incubator.apache.org/projects/odftoolkit.html","title":"how to create an odt file programmatically with java?","body":"<p><a href=\"https://odftoolkit.org/\" rel=\"nofollow noreferrer\">The ODF Toolkit</a> project (code hosted at <a href=\"https://github.com/tdf/odftoolkit\" rel=\"nofollow noreferrer\">Github</a>) is the new home of the former ODFDOM project, which was until 2018-11-27 a <a href=\"https://incubator.apache.org/projects/odftoolkit.html\" rel=\"nofollow noreferrer\">Apache Incubator project</a>.</p>\n"}],"owner":{"account_id":700028,"reputation":261,"user_id":588719,"display_name":"baris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38204,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"answer_count":8,"score":26,"last_activity_date":1679428039,"creation_date":1295944864,"question_id":4791389,"body_markdown":"How can I create an odt (LibreOffice/OpenOffice Writer) file with Java programmatically? A &quot;hello world&quot; example will be sufficient. I looked at the OpenOffice website but the documentation wasn&#39;t clear.","title":"how to create an odt file programmatically with java?","body":"<p>How can I create an odt (LibreOffice/OpenOffice Writer) file with Java programmatically? A \"hello world\" example will be sufficient. I looked at the OpenOffice website but the documentation wasn't clear.</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1468732855,"creation_date":1468732855,"answer_id":38418154,"question_id":38418050,"body_markdown":"You can&#39;t call any methods of your `Threads` class, because you don&#39;t have a reference to the object of that type.\r\n\r\nChange your code to:\r\n\r\n    Threads R1 = new Threads(&quot;Thread 1&quot;);\r\n    Thread thread = new Thread(R1);\r\n    thread.start();\r\n\r\n    Thread.sleep(1000);\r\n    R1.setoff();\r\n\r\n---\r\n\r\nAlso, `if(this.running ==false)` should be written `if (! this.running)`.\r\n\r\nOr better yet, that line should be removed. The *only* way for that line to be executed, is for the preceding `while` loop to exit, which only happens when `this.running` is false, so the test in the `if` statement is redundant.","title":"Unable to access method of thread class?","body":"<p>You can't call any methods of your <code>Threads</code> class, because you don't have a reference to the object of that type.</p>\n\n<p>Change your code to:</p>\n\n<pre><code>Threads R1 = new Threads(\"Thread 1\");\nThread thread = new Thread(R1);\nthread.start();\n\nThread.sleep(1000);\nR1.setoff();\n</code></pre>\n\n<hr>\n\n<p>Also, <code>if(this.running ==false)</code> should be written <code>if (! this.running)</code>.</p>\n\n<p>Or better yet, that line should be removed. The <em>only</em> way for that line to be executed, is for the preceding <code>while</code> loop to exit, which only happens when <code>this.running</code> is false, so the test in the <code>if</code> statement is redundant.</p>\n"},{"tags":[],"owner":{"account_id":3815702,"reputation":131,"user_id":3165132,"accept_rate":36,"display_name":"Pengiuns"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468733167,"creation_date":1468733167,"answer_id":38418172,"question_id":38418050,"body_markdown":"Nevermind, got it working after;\r\n\r\n    Threads mythread = new Threads(&quot;222&quot;);\r\n    Thread R1 = new Thread(mythread);\r\n    mythread.seton();\r\n    R1.start();","title":"Unable to access method of thread class?","body":"<p>Nevermind, got it working after;</p>\n\n<pre><code>Threads mythread = new Threads(\"222\");\nThread R1 = new Thread(mythread);\nmythread.seton();\nR1.start();\n</code></pre>\n"}],"owner":{"account_id":3815702,"reputation":131,"user_id":3165132,"accept_rate":36,"display_name":"Pengiuns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":38418154,"answer_count":2,"score":0,"last_activity_date":1679427948,"creation_date":1468731579,"question_id":38418050,"body_markdown":"I&#39;m unable to call any functions of R1 from my main class? (seton(), setoff(), etc.)\r\n\r\n    public class Threads implements Runnable {\r\n      public String threadName;\r\n      private volatile boolean running = true;\r\n    \r\n      public Threads( String name) {\r\n        threadName = name;\r\n      }\r\n    \r\n      public void setoff() {\r\n        running = false; //this.running = false;\r\n      }\r\n    \r\n      public void seton() {\r\n        running = true; //this.running = true;\r\n      }\r\n    \r\n      public void run() {\r\n        while(this.running) {\r\n          System.out.println(&quot;running&quot;);\r\n        }\r\n        if(this.running ==false) {\r\n          System.out.println(&quot;stopped&quot;);\r\n        }\r\n        System.out.println(&quot;Thread &quot; +  threadName + &quot; exiting.&quot;);\r\n      }\r\n    }\r\n\r\n    \r\n--end class\r\n\r\n    public class MainFrame extends javax.swing.JFrame {  \r\n      Thread R1 = null;\r\n    \r\n      public MainFrame() {\r\n        initComponents();\r\n      }\r\n\r\n      private void jbtnstartActionPerformed(java.awt.event.ActionEvent evt) {                                          \r\n        R1 = new Thread(new Threads(&quot;Thread 1&quot;));\r\n        R1.start();\r\n      }       \r\n    }\r\n\r\n\r\n","title":"Unable to access method of thread class?","body":"<p>I'm unable to call any functions of R1 from my main class? (seton(), setoff(), etc.)</p>\n<pre><code>public class Threads implements Runnable {\n  public String threadName;\n  private volatile boolean running = true;\n\n  public Threads( String name) {\n    threadName = name;\n  }\n\n  public void setoff() {\n    running = false; //this.running = false;\n  }\n\n  public void seton() {\n    running = true; //this.running = true;\n  }\n\n  public void run() {\n    while(this.running) {\n      System.out.println(&quot;running&quot;);\n    }\n    if(this.running ==false) {\n      System.out.println(&quot;stopped&quot;);\n    }\n    System.out.println(&quot;Thread &quot; +  threadName + &quot; exiting.&quot;);\n  }\n}\n</code></pre>\n<p>--end class</p>\n<pre><code>public class MainFrame extends javax.swing.JFrame {  \n  Thread R1 = null;\n\n  public MainFrame() {\n    initComponents();\n  }\n\n  private void jbtnstartActionPerformed(java.awt.event.ActionEvent evt) {                                          \n    R1 = new Thread(new Threads(&quot;Thread 1&quot;));\n    R1.start();\n  }       \n}\n</code></pre>\n"},{"tags":["java","double","bigdecimal"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1347480402,"post_id":12395281,"comment_id":16655346,"body_markdown":"Note: BigDecimal will also sometimes use the scientific notation (I believe for number &lt; 10^-6)","body":"Note: BigDecimal will also sometimes use the scientific notation (I believe for number &lt; 10^-6)"}],"answers":[{"tags":[],"owner":{"account_id":997788,"reputation":5141,"user_id":1013327,"accept_rate":89,"display_name":"Gilberto Torrezan"},"down_vote_count":6,"up_vote_count":73,"is_accepted":true,"score":67,"last_activity_date":1347480172,"creation_date":1347479872,"answer_id":12395405,"question_id":12395281,"body_markdown":"It prints 47.48000 if you use another [MathContext][1]:\r\n\r\n    BigDecimal b = new BigDecimal(d, MathContext.DECIMAL64);\r\n\r\nJust pick the context you need.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/math/MathContext.html","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>It prints 47.48000 if you use another <a href=\"http://docs.oracle.com/javase/6/docs/api/java/math/MathContext.html\">MathContext</a>:</p>\n\n<pre><code>BigDecimal b = new BigDecimal(d, MathContext.DECIMAL64);\n</code></pre>\n\n<p>Just pick the context you need.</p>\n"},{"tags":[],"owner":{"account_id":1586829,"reputation":1048,"user_id":1470963,"display_name":"Jonathan Paulson"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1347480098,"creation_date":1347480022,"answer_id":12395430,"question_id":12395281,"body_markdown":"You want to try `String.format(&quot;%f&quot;, d)`, which will print your double in decimal notation. Don&#39;t use `BigDecimal` at all.\r\n\r\nRegarding the precision issue: You are first storing `47.48` in the `double c`, then making a new `BigDecimal` from that `double`. The loss of precision is in assigning to `c`. You could do\r\n\r\n    BigDecimal b = new BigDecimal(&quot;47.48&quot;)\r\n\r\n to avoid losing any precision.","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>You want to try <code>String.format(\"%f\", d)</code>, which will print your double in decimal notation. Don't use <code>BigDecimal</code> at all.</p>\n\n<p>Regarding the precision issue: You are first storing <code>47.48</code> in the <code>double c</code>, then making a new <code>BigDecimal</code> from that <code>double</code>. The loss of precision is in assigning to <code>c</code>. You could do</p>\n\n<pre><code>BigDecimal b = new BigDecimal(\"47.48\")\n</code></pre>\n\n<p>to avoid losing any precision.</p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1347480464,"creation_date":1347480464,"answer_id":12395505,"question_id":12395281,"body_markdown":"It&#39;s printing out the actual, exact value of the `double`.\r\n\r\n`Double.toString()`, which converts `double`s to `String`s, does _not_ print the exact decimal value of the input -- if `x` is your double value, it prints out exactly enough digits that `x` is the closest `double` to the value it printed.\r\n\r\nThe point is that there _is no such `double`_ as 47.48 exactly.  Doubles store values as _binary_ fractions, not as decimals, so it can&#39;t store exact decimal values.  (That&#39;s what `BigDecimal` is for!)","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>It's printing out the actual, exact value of the <code>double</code>.</p>\n\n<p><code>Double.toString()</code>, which converts <code>double</code>s to <code>String</code>s, does <em>not</em> print the exact decimal value of the input -- if <code>x</code> is your double value, it prints out exactly enough digits that <code>x</code> is the closest <code>double</code> to the value it printed.</p>\n\n<p>The point is that there <em>is no such <code>double</code></em> as 47.48 exactly.  Doubles store values as <em>binary</em> fractions, not as decimals, so it can't store exact decimal values.  (That's what <code>BigDecimal</code> is for!)</p>\n"},{"tags":[],"owner":{"account_id":2329713,"reputation":45,"user_id":2043433,"display_name":"kk yadav"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1388950413,"creation_date":1362642653,"answer_id":15265817,"question_id":12395281,"body_markdown":"**The String.format syntax helps us convert doubles and BigDecimals to strings of whatever precision.**\r\n\r\nThis java code:\r\n\r\n    double dennis = 0.00000008880000d;\r\n    System.out.println(dennis);\r\n    System.out.println(String.format(&quot;%.7f&quot;, dennis));\r\n    System.out.println(String.format(&quot;%.9f&quot;, new BigDecimal(dennis)));\r\n    System.out.println(String.format(&quot;%.19f&quot;, new BigDecimal(dennis)));\r\n\r\nPrints:\r\n\r\n    8.88E-8\r\n    0.0000001\r\n    0.000000089\r\n    0.0000000888000000000\r\n\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p><strong>The String.format syntax helps us convert doubles and BigDecimals to strings of whatever precision.</strong></p>\n\n<p>This java code:</p>\n\n<pre><code>double dennis = 0.00000008880000d;\nSystem.out.println(dennis);\nSystem.out.println(String.format(\"%.7f\", dennis));\nSystem.out.println(String.format(\"%.9f\", new BigDecimal(dennis)));\nSystem.out.println(String.format(\"%.19f\", new BigDecimal(dennis)));\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>8.88E-8\n0.0000001\n0.000000089\n0.0000000888000000000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":281486,"reputation":8971,"user_id":577812,"accept_rate":86,"display_name":"omnomnom"},"down_vote_count":0,"up_vote_count":160,"is_accepted":false,"score":160,"last_activity_date":1369661688,"creation_date":1369661074,"answer_id":16774279,"question_id":12395281,"body_markdown":"The reason of such behaviour is that the string that is printed is the exact value - probably not what you expected, but that&#39;s the real value stored in memory - it&#39;s just a limitation of floating point representation.\r\n\r\nAccording to javadoc, BigDecimal(double val) constructor behaviour can be unexpected if you don&#39;t take into consideration this limitation:\r\n\r\n&gt; The results of this constructor can be somewhat unpredictable. One\r\n&gt; might assume that writing new BigDecimal(0.1) in Java creates a\r\n&gt; BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with\r\n&gt; a scale of 1), but it is actually equal to\r\n&gt; 0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that\r\n&gt; matter, as a binary fraction of any finite length). Thus, the value\r\n&gt; that is being passed in to the constructor is not exactly equal to\r\n&gt; 0.1, appearances notwithstanding.\r\n\r\n\r\nSo in your case, instead of using\r\n\r\n    double val = 77.48;\r\n    new BigDecimal(val);\r\n\r\nuse\r\n\r\n    BigDecimal.valueOf(val);\r\n\r\nValue that is returned by BigDecimal.valueOf is equal to that resulting from invocation of `Double.toString(double)`.","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>The reason of such behaviour is that the string that is printed is the exact value - probably not what you expected, but that's the real value stored in memory - it's just a limitation of floating point representation.</p>\n\n<p>According to javadoc, BigDecimal(double val) constructor behaviour can be unexpected if you don't take into consideration this limitation:</p>\n\n<blockquote>\n  <p>The results of this constructor can be somewhat unpredictable. One\n  might assume that writing new BigDecimal(0.1) in Java creates a\n  BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with\n  a scale of 1), but it is actually equal to\n  0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that\n  matter, as a binary fraction of any finite length). Thus, the value\n  that is being passed in to the constructor is not exactly equal to\n  0.1, appearances notwithstanding.</p>\n</blockquote>\n\n<p>So in your case, instead of using</p>\n\n<pre><code>double val = 77.48;\nnew BigDecimal(val);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>BigDecimal.valueOf(val);\n</code></pre>\n\n<p>Value that is returned by BigDecimal.valueOf is equal to that resulting from invocation of <code>Double.toString(double)</code>.</p>\n"},{"tags":[],"owner":{"account_id":5468872,"reputation":1037,"user_id":4820675,"display_name":"urOutsourced"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1516131099,"creation_date":1476948109,"answer_id":40147944,"question_id":12395281,"body_markdown":"Why not :\r\n\r\n    b = b.setScale(2, RoundingMode.HALF_UP);","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>Why not :</p>\n\n<pre><code>b = b.setScale(2, RoundingMode.HALF_UP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10367771,"reputation":21,"user_id":7646317,"display_name":"Leaxus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493952137,"creation_date":1493950715,"answer_id":43795453,"question_id":12395281,"body_markdown":"\tBigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<pre><code>BigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9787696,"reputation":621,"user_id":7253471,"display_name":"jbilander"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512136795,"creation_date":1512136795,"answer_id":47595036,"question_id":12395281,"body_markdown":"In Java 9 the following is deprecated:\r\n\r\n`BigDecimal.valueOf(d).`&lt;strike&gt;setScale&lt;/strike&gt;`(2, BigDecimal.`&lt;strike&gt;ROUND_HALF_UP&lt;/strike&gt;`);`\r\n\r\ninstead use:\r\n\r\n    BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\r\n\r\nExample:\r\n\r\n        double d = 47.48111;\r\n\r\n        System.out.println(BigDecimal.valueOf(d)); //Prints: 47.48111\r\n\r\n        BigDecimal bigDecimal = BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\r\n        System.out.println(bigDecimal); //Prints: 47.48","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>In Java 9 the following is deprecated:</p>\n\n<p><code>BigDecimal.valueOf(d).</code><strike>setScale</strike><code>(2, BigDecimal.</code><strike>ROUND_HALF_UP</strike><code>);</code></p>\n\n<p>instead use:</p>\n\n<pre><code>BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>    double d = 47.48111;\n\n    System.out.println(BigDecimal.valueOf(d)); //Prints: 47.48111\n\n    BigDecimal bigDecimal = BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\n    System.out.println(bigDecimal); //Prints: 47.48\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7570973,"reputation":295,"user_id":5744897,"display_name":"paritosh mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679427893,"creation_date":1677382916,"answer_id":75569881,"question_id":12395281,"body_markdown":"Wrap using ```BigDecimal.valueOf()```:\r\n```Java\r\ndouble d = 47.48111;\r\nBigDecimal.valueOf(d)\r\n```","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>Wrap using <code>BigDecimal.valueOf()</code>:</p>\n<pre><code>double d = 47.48111;\nBigDecimal.valueOf(d)\n</code></pre>\n"}],"owner":{"account_id":284018,"reputation":9607,"user_id":581866,"accept_rate":89,"display_name":"c12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340460,"favorite_count":0,"down_vote_count":0,"up_vote_count":103,"accepted_answer_id":12395405,"answer_count":9,"score":103,"last_activity_date":1679427893,"creation_date":1347479405,"question_id":12395281,"body_markdown":"In Java, I want to take a double value and convert it to a `BigDecimal` and print out its String value to a certain precision.  \r\n\r\n    import java.math.BigDecimal;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            double d=-.00012;\r\n            System.out.println(d+&quot;&quot;); //This prints -1.2E-4\r\n           \r\n            double c=47.48000;\r\n            BigDecimal b = new BigDecimal(c);\r\n            System.out.println(b.toString()); \r\n            //This prints 47.47999999999999687361196265555918216705322265625 \r\n        }\r\n    }\r\n\r\nIt prints this huge thing:\r\n\r\n&gt; 47.47999999999999687361196265555918216705322265625\r\n\r\nand not\r\n\r\n&gt;47.48\r\n\r\nThe reason I&#39;m doing the `BigDecimal` conversion is sometimes the double value will contain a lot of decimal places (i.e. `-.000012`) and the when converting the double to a String will produce scientific notation `-1.2E-4`.  I want to store the String value in non-scientific notation. \r\n\r\nI want to have BigDecimal always have two units of precision like this: &quot;47.48&quot;.  Can BigDecimal restrict precision on conversion to string?\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>In Java, I want to take a double value and convert it to a <code>BigDecimal</code> and print out its String value to a certain precision.  </p>\n\n<pre><code>import java.math.BigDecimal;\npublic class Main {\n    public static void main(String[] args) {\n        double d=-.00012;\n        System.out.println(d+\"\"); //This prints -1.2E-4\n\n        double c=47.48000;\n        BigDecimal b = new BigDecimal(c);\n        System.out.println(b.toString()); \n        //This prints 47.47999999999999687361196265555918216705322265625 \n    }\n}\n</code></pre>\n\n<p>It prints this huge thing:</p>\n\n<blockquote>\n  <p>47.47999999999999687361196265555918216705322265625</p>\n</blockquote>\n\n<p>and not</p>\n\n<blockquote>\n  <p>47.48</p>\n</blockquote>\n\n<p>The reason I'm doing the <code>BigDecimal</code> conversion is sometimes the double value will contain a lot of decimal places (i.e. <code>-.000012</code>) and the when converting the double to a String will produce scientific notation <code>-1.2E-4</code>.  I want to store the String value in non-scientific notation. </p>\n\n<p>I want to have BigDecimal always have two units of precision like this: \"47.48\".  Can BigDecimal restrict precision on conversion to string?</p>\n"},{"tags":["java","spring-boot","spring-security","integration-testing"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679095947,"post_id":75772262,"comment_id":133665881,"body_markdown":"A 404 _usually_ means that the credentials are good. Can you add the controller code to the question so we can see the paths?","body":"A 404 <i>usually</i> means that the credentials are good. Can you add the controller code to the question so we can see the paths?"},{"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"score":0,"creation_date":1679332156,"post_id":75772262,"comment_id":133699164,"body_markdown":"I did miss that part of the controller, where there was a base-mapping.  I have added that in now as part of the controller code and updated the previous code to reflect that.   I am now getting an HTTP 403 error.  I looked up this specific error, and I think I am on the right track.","body":"I did miss that part of the controller, where there was a base-mapping.  I have added that in now as part of the controller code and updated the previous code to reflect that.   I am now getting an HTTP 403 error.  I looked up this specific error, and I think I am on the right track."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679333493,"post_id":75772262,"comment_id":133699556,"body_markdown":"Yes, you are on the right track. You are _probably_ finding the path. However, Spring can give a 403 when a path is not found to _hide_ the fact that the path exists. More likely the ROLE needed for access the controller method is not linked to the user - that is the natural meaning of 403.","body":"Yes, you are on the right track. You are <i>probably</i> finding the path. However, Spring can give a 403 when a path is not found to <i>hide</i> the fact that the path exists. More likely the ROLE needed for access the controller method is not linked to the user - that is the natural meaning of 403."},{"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"score":0,"creation_date":1679425273,"post_id":75772262,"comment_id":133719371,"body_markdown":"@JohnWilliams are you telling me I need a real username, I didn&#39;t think we did.  I think if I could just test with the role/authority, that would be fine.   Let me add more to the Okta Security Configuration we have.","body":"@JohnWilliams are you telling me I need a real username, I didn&#39;t think we did.  I think if I could just test with the role/authority, that would be fine.   Let me add more to the Okta Security Configuration we have."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679427003,"post_id":75772262,"comment_id":133719739,"body_markdown":"I would expect that the 403 is because the authenticated user does not have a required AUTHORITY or ROLE.","body":"I would expect that the 403 is because the authenticated user does not have a required AUTHORITY or ROLE."}],"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1679426822,"creation_date":1679087491,"question_id":75772262,"body_markdown":"I am using a Spring Boot 2.3.7 application, and the application works, and it&#39;s deployed.  But, when it was built, no developer did any Unit Tests or Integration Tests with it.  So, now I am adding unit and integration tests.   I got the repository tests working, and then I decided to tackle the API endpoints which are definitely secured.\r\n\r\nSo, let me start showing you the Integration Test code:\r\n\r\n    @WebMvcTest(value = MyCountsController.class)\r\n    @AutoConfigureMockMvc\r\n    @ContextConfiguration(classes = \r\n           {ESITRequest.class, OktaWebSecurityConfig.class})\r\n    public class MyCountControllerIT {\r\n\r\n        @Autowired\r\n\t    private MockMvc mvc;\r\n\r\n        private String baseUrl = &quot;/my-link&quot;;\r\n\r\n\t    @Test\r\n\t    @WithMockUser(&quot;spring&quot;)\r\n\t    public void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(\r\n    get(baseUrl + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\r\n    .with(csrf())\t\t\t\r\n    .contentType(&quot;application/json&quot;))\r\n    .andExpect(status().isOk());\r\n\t    }\r\n    }\r\n\r\nSo, I spent most of day traversing the internet and lots of StackOverflow posts to see if I could pull together a working unit test.  This unit test does work, but I always get a 403 error.   \r\n\r\nI have another test that is very similar, and it works as expected.\r\n\r\n    @Test\r\n\t@WithMockUser(username = &quot;user&quot;, password = &quot;password&quot;, roles = { &quot;somerole&quot; })\r\n\tpublic void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(get(baseUrl \r\n    + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\t\r\n       .with(csrf())\t\t\t\r\n       .contentType(&quot;application/json&quot;))\r\n       .andExpect(status()\r\n       .is4xxClientError());\r\n\t}\r\n\r\nAs expected, yes, I want a 4xx error here so that works fine.\r\n\r\nThis test does NOT work, and I was hoping it would:\r\n\r\n    @Test\r\n\t@WithMockUser(roles = { &quot;admin&quot; })\r\n\tpublic void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(get(baseUrl \r\n        + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\t\r\n        .with(csrf())\t\t\t \r\n        .contentType(&quot;application/json&quot;))\r\n        .andExpect(status().isOk());\r\n    }\r\n\r\nNow, this should work, but I am unsure, does the username and password have to be correct?  Because the role is a correct role, so I want this test to work.  Right now, I get an HTTP 403 Error.\r\n\r\nHere is the console output:\r\n\r\n    MockHttpServletRequest:\r\n      HTTP Method = GET\r\n      Request URI = /my-link/17/sites/213/my-counts\r\n       Parameters = {_csrf=[5f7524e3-ea9f-4a2a-8de0-e4d914d78b2f]}\r\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;]\r\n             Body = null\r\n    Session Attrs ={SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@766e80d2: \r\n    Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@766e80d2: \r\n    Principal: org.springframework.security.core.userdetails.User@36ebcb: \r\n    Username: user; \r\n    Password: [PROTECTED]; \r\n    Enabled: true; \r\n    AccountNonExpired: true; credentialsNonExpired: true; \r\n    AccountNonLocked: true; \r\n    Granted Authorities: ROLE_admin; \r\n    Credentials: [PROTECTED]; \r\n    Authenticated: true; \r\n    Details: null; \r\n    Granted Authorities: ROLE_admin}\r\n\r\n    Handler:\r\n             Type = null\r\n    \r\n    Async:\r\n        Async started = false\r\n        Async result = null\r\n    \r\n    Resolved Exception:\r\n             Type = null\r\n    \r\n    ModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n    \r\n    FlashMap:\r\n       Attributes = null\r\n\r\n    MockHttpServletResponse:\r\n           Status = 403\r\n    Error message = null\r\n          Headers = [Vary:&quot;Origin&quot;, \r\n    &quot;Access-Control-Request-Method&quot;, \r\n    &quot;Access-Control-Request-Headers&quot;, \r\n    WWW-Authenticate:&quot;Bearer&quot;, \r\n    X-Content-Type-Options:&quot;nosniff&quot;, \r\n    X-XSS-Protection:&quot;1; mode=block&quot;, \r\n    Cache-Control:&quot;no-cache, no-store, \r\n    max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, \r\n    Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n    Redirected URL = null\r\n          Cookies = []\r\n\r\nWithin my application, we do have a class:\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class OktaWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\nwith two methods:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n    http.authorizeRequests()\r\n        .antMatchers(\r\n            &quot;/my-link/{id}&quot;,\r\n            &quot;/my-link/**&quot;,\r\n            &quot;/my-link/{id}/**&quot;)\r\n        .access(&quot;hasAuthority(&#39;admin&#39;)&quot;)\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .oauth2ResourceServer()\r\n        .jwt();\r\n      http.cors();\r\n    }\r\n\r\nand:\r\n\r\n    @Override\r\n    // APIs to not secure\r\n    public void configure(WebSecurity web) {\r\n      web.ignoring()\r\n        .antMatchers(...\r\n\r\nI don&#39;t want to disable security altogether, I really do like the idea of testing out API&#39;s with different users and different roles.  If anyone can help me out, that would be great! \r\n\r\nUPDATE 1:\r\n\r\nAs requested, I am adding the part of the controller.  This made me fix the following tests and I have updated those above.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/my-link&quot;)\r\n    @Slf4j\r\n    public class MyCountsController {\r\n\r\n    @GetMapping(&quot;/{id}/sites/{siteId}/my-counts&quot;)\r\n    public ResponseEntity&lt;List&lt;MyCountData&gt;&gt; getMyCounts(\r\n\r\nUPDATE 2:\r\n\r\nAs you can see I added some more code to the &quot;antMatchers&quot; in the Security Configuration.\r\n\r\nMy question is how much do we have to match what is in the OktaConfig.  If we have a link we want to test as we saw:\r\n\r\n    /my-link/17/sites/213/my-counts\r\n\r\nDoesn&#39;t the &#39;antmatcher&#39; cover this with what we have like:\r\n\r\n    /my-link/** or\r\n    /my-link/{id}/**\r\n   \r\nI&#39;ve tried many more tests with this one link as follows:\r\n\r\n    @WithMockUser(roles = {&quot;admin&quot;})       // 403\r\n    @WithMockUser(roles = {&quot;ADMIN&quot;})       // 403, does case matter?\r\n    @WithMockUser(roles = {&quot;ROLE_admin&quot;})  // this is an error\r\n    @WithMockUser(roles = {&quot;ROLE_ADMIN&quot;})  // this is an error\r\n    @WithMockUser(authorities = {&quot;admin&quot;})       // 404 &lt;- odd\r\n    @WithMockUser(authorities = {&quot;ADMIN&quot;})       // 403\r\n    @WithMockUser(authorities = {&quot;ROLE_admin&quot;})  // 403\r\n    @WithMockUser(authorities = {&quot;ROLE_ADMIN&quot;})  // 403\r\n\r\nAnd this is just to test ONE api, and I have many more to test, so if I can get the first one working, then I have a template for the rest.\r\n","title":"Spring Boot Integration Test with Secured APIs","body":"<p>I am using a Spring Boot 2.3.7 application, and the application works, and it's deployed.  But, when it was built, no developer did any Unit Tests or Integration Tests with it.  So, now I am adding unit and integration tests.   I got the repository tests working, and then I decided to tackle the API endpoints which are definitely secured.</p>\n<p>So, let me start showing you the Integration Test code:</p>\n<pre><code>@WebMvcTest(value = MyCountsController.class)\n@AutoConfigureMockMvc\n@ContextConfiguration(classes = \n       {ESITRequest.class, OktaWebSecurityConfig.class})\npublic class MyCountControllerIT {\n\n    @Autowired\n    private MockMvc mvc;\n\n    private String baseUrl = &quot;/my-link&quot;;\n\n    @Test\n    @WithMockUser(&quot;spring&quot;)\n    public void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(\nget(baseUrl + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\n.with(csrf())           \n.contentType(&quot;application/json&quot;))\n.andExpect(status().isOk());\n    }\n}\n</code></pre>\n<p>So, I spent most of day traversing the internet and lots of StackOverflow posts to see if I could pull together a working unit test.  This unit test does work, but I always get a 403 error.</p>\n<p>I have another test that is very similar, and it works as expected.</p>\n<pre><code>@Test\n@WithMockUser(username = &quot;user&quot;, password = &quot;password&quot;, roles = { &quot;somerole&quot; })\npublic void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(get(baseUrl \n+ &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId) \n   .with(csrf())            \n   .contentType(&quot;application/json&quot;))\n   .andExpect(status()\n   .is4xxClientError());\n}\n</code></pre>\n<p>As expected, yes, I want a 4xx error here so that works fine.</p>\n<p>This test does NOT work, and I was hoping it would:</p>\n<pre><code>@Test\n@WithMockUser(roles = { &quot;admin&quot; })\npublic void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(get(baseUrl \n    + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId) \n    .with(csrf())            \n    .contentType(&quot;application/json&quot;))\n    .andExpect(status().isOk());\n}\n</code></pre>\n<p>Now, this should work, but I am unsure, does the username and password have to be correct?  Because the role is a correct role, so I want this test to work.  Right now, I get an HTTP 403 Error.</p>\n<p>Here is the console output:</p>\n<pre><code>MockHttpServletRequest:\n  HTTP Method = GET\n  Request URI = /my-link/17/sites/213/my-counts\n   Parameters = {_csrf=[5f7524e3-ea9f-4a2a-8de0-e4d914d78b2f]}\n      Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;]\n         Body = null\nSession Attrs ={SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@766e80d2: \nAuthentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@766e80d2: \nPrincipal: org.springframework.security.core.userdetails.User@36ebcb: \nUsername: user; \nPassword: [PROTECTED]; \nEnabled: true; \nAccountNonExpired: true; credentialsNonExpired: true; \nAccountNonLocked: true; \nGranted Authorities: ROLE_admin; \nCredentials: [PROTECTED]; \nAuthenticated: true; \nDetails: null; \nGranted Authorities: ROLE_admin}\n\nHandler:\n         Type = null\n\nAsync:\n    Async started = false\n    Async result = null\n\nResolved Exception:\n         Type = null\n\nModelAndView:\n    View name = null\n         View = null\n        Model = null\n\nFlashMap:\n   Attributes = null\n\nMockHttpServletResponse:\n       Status = 403\nError message = null\n      Headers = [Vary:&quot;Origin&quot;, \n&quot;Access-Control-Request-Method&quot;, \n&quot;Access-Control-Request-Headers&quot;, \nWWW-Authenticate:&quot;Bearer&quot;, \nX-Content-Type-Options:&quot;nosniff&quot;, \nX-XSS-Protection:&quot;1; mode=block&quot;, \nCache-Control:&quot;no-cache, no-store, \nmax-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, \nExpires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n Content type = null\n         Body = \nForwarded URL = null\nRedirected URL = null\n      Cookies = []\n</code></pre>\n<p>Within my application, we do have a class:</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class OktaWebSecurityConfig extends WebSecurityConfigurerAdapter {\n</code></pre>\n<p>with two methods:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\nhttp.authorizeRequests()\n    .antMatchers(\n        &quot;/my-link/{id}&quot;,\n        &quot;/my-link/**&quot;,\n        &quot;/my-link/{id}/**&quot;)\n    .access(&quot;hasAuthority('admin')&quot;)\n    .anyRequest()\n    .authenticated()\n    .and()\n    .oauth2ResourceServer()\n    .jwt();\n  http.cors();\n}\n</code></pre>\n<p>and:</p>\n<pre><code>@Override\n// APIs to not secure\npublic void configure(WebSecurity web) {\n  web.ignoring()\n    .antMatchers(...\n</code></pre>\n<p>I don't want to disable security altogether, I really do like the idea of testing out API's with different users and different roles.  If anyone can help me out, that would be great!</p>\n<p>UPDATE 1:</p>\n<p>As requested, I am adding the part of the controller.  This made me fix the following tests and I have updated those above.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/my-link&quot;)\n@Slf4j\npublic class MyCountsController {\n\n@GetMapping(&quot;/{id}/sites/{siteId}/my-counts&quot;)\npublic ResponseEntity&lt;List&lt;MyCountData&gt;&gt; getMyCounts(\n</code></pre>\n<p>UPDATE 2:</p>\n<p>As you can see I added some more code to the &quot;antMatchers&quot; in the Security Configuration.</p>\n<p>My question is how much do we have to match what is in the OktaConfig.  If we have a link we want to test as we saw:</p>\n<pre><code>/my-link/17/sites/213/my-counts\n</code></pre>\n<p>Doesn't the 'antmatcher' cover this with what we have like:</p>\n<pre><code>/my-link/** or\n/my-link/{id}/**\n</code></pre>\n<p>I've tried many more tests with this one link as follows:</p>\n<pre><code>@WithMockUser(roles = {&quot;admin&quot;})       // 403\n@WithMockUser(roles = {&quot;ADMIN&quot;})       // 403, does case matter?\n@WithMockUser(roles = {&quot;ROLE_admin&quot;})  // this is an error\n@WithMockUser(roles = {&quot;ROLE_ADMIN&quot;})  // this is an error\n@WithMockUser(authorities = {&quot;admin&quot;})       // 404 &lt;- odd\n@WithMockUser(authorities = {&quot;ADMIN&quot;})       // 403\n@WithMockUser(authorities = {&quot;ROLE_admin&quot;})  // 403\n@WithMockUser(authorities = {&quot;ROLE_ADMIN&quot;})  // 403\n</code></pre>\n<p>And this is just to test ONE api, and I have many more to test, so if I can get the first one working, then I have a template for the rest.</p>\n"},{"tags":["java","azure","junit","mockito"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661200925,"post_id":73448694,"comment_id":129711344,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":481006,"reputation":31216,"user_id":894565,"accept_rate":76,"display_name":"Jatin"},"score":0,"creation_date":1661430715,"post_id":73448694,"comment_id":129774055,"body_markdown":"Can you please share the code that you are using? Looks like the problem with `DefaultAzureCredentialBuilder`","body":"Can you please share the code that you are using? Looks like the problem with <code>DefaultAzureCredentialBuilder</code>"}],"answers":[{"tags":[],"owner":{"account_id":1096566,"reputation":152,"user_id":1090040,"display_name":"jptrue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679426800,"creation_date":1679426800,"answer_id":75805605,"question_id":73448694,"body_markdown":"My guess would be that you are passing in the string &#39;tenant.id&#39; and not the actual Tenant ID, which is typically a GUID.","title":"How do I resolve this exception: com.microsoft.aad.msal4j.MsalServiceException: AADSTS90002: Tenant &#39;tenant.id&#39; not found?","body":"<p>My guess would be that you are passing in the string 'tenant.id' and not the actual Tenant ID, which is typically a GUID.</p>\n"}],"owner":{"account_id":16330942,"reputation":3,"user_id":11794298,"display_name":"Jermaine Tucker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679426800,"creation_date":1661187977,"question_id":73448694,"body_markdown":" - programming language:Java\r\n - Context: I writing a junit test for a method that uses BlobClient uploadWithResponse method, but the method keeps throwing this exception. And I don&#39;t know how to resolve it.\r\n - if anyone has resolved this problem, please help.\r\n\r\n**com.microsoft.aad.msal4j.MsalServiceException:** \r\nAADSTS90002: Tenant &#39;tenant.id&#39; not found. Check to make sure you have the correct tenant ID and are signing into the correct cloud. Check with your subscription administrator, this may happen if there are no active subscriptions for the tenant.","title":"How do I resolve this exception: com.microsoft.aad.msal4j.MsalServiceException: AADSTS90002: Tenant &#39;tenant.id&#39; not found?","body":"<ul>\n<li>programming language:Java</li>\n<li>Context: I writing a junit test for a method that uses BlobClient uploadWithResponse method, but the method keeps throwing this exception. And I don't know how to resolve it.</li>\n<li>if anyone has resolved this problem, please help.</li>\n</ul>\n<p><strong>com.microsoft.aad.msal4j.MsalServiceException:</strong>\nAADSTS90002: Tenant 'tenant.id' not found. Check to make sure you have the correct tenant ID and are signing into the correct cloud. Check with your subscription administrator, this may happen if there are no active subscriptions for the tenant.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3537420,"reputation":400,"user_id":2955337,"display_name":"sleepyhead"},"score":0,"creation_date":1679430075,"post_id":75805589,"comment_id":133720424,"body_markdown":"In your IF statement you first have a check if it is a user. Assuming your admin has also the user role hat is the first match and you&#39;ll be always redirected to /user","body":"In your IF statement you first have a check if it is a user. Assuming your admin has also the user role hat is the first match and you&#39;ll be always redirected to /user"},{"owner":{"account_id":28079277,"reputation":1,"user_id":21450631,"display_name":"Sonya"},"score":0,"creation_date":1679430984,"post_id":75805589,"comment_id":133720613,"body_markdown":"didn&#39;t thought about this moment, thanks a lot!!","body":"didn&#39;t thought about this moment, thanks a lot!!"}],"owner":{"account_id":28079277,"reputation":1,"user_id":21450631,"display_name":"Sonya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679426666,"creation_date":1679426666,"question_id":75805589,"body_markdown":"I added two roles(ROLE_ADMIN, ROLE_USER) for one user and after succesful login I need it to redirect to /admin form, but keep getting /user form. \r\n\r\n\r\nI tried adding RoleHierarchy, but result stays the same.\r\n```\r\n@Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .expressionHandler(expressionHandler())\r\n                .antMatchers(&quot;/&quot;).permitAll()\r\n                .antMatchers(&quot;/admin/**&quot;)\r\n                .hasRole(&quot;ADMIN&quot;)\r\n                .antMatchers(&quot;/user&quot;)\r\n                .hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\r\n                .and()\r\n                .formLogin()\r\n                .successHandler(successUserHandler)\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .logoutSuccessUrl(&quot;/&quot;);\r\n    }\r\n@Component\r\npublic class SuccessUserHandler implements AuthenticationSuccessHandler {\r\n    @Override\r\n    public void onAuthenticationSuccess(HttpServletRequest httpServletRequest,\r\n                                        HttpServletResponse httpServletResponse,\r\n                                        Authentication authentication) throws IOException {\r\n        Set&lt;String&gt; roles = AuthorityUtils\r\n                .authorityListToSet(authentication.getAuthorities());\r\n        if (roles.contains(&quot;ROLE_USER&quot;)) {\r\n            httpServletResponse.sendRedirect(&quot;/user&quot;);\r\n        } else if(roles.contains(&quot;ROLE_ADMIN&quot;)){\r\n            httpServletResponse.sendRedirect(&quot;/admin&quot;);\r\n        } else {\r\n            httpServletResponse.sendRedirect(&quot;/&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"one user has two roles, need to redirect to /admin, but redirects to /user","body":"<p>I added two roles(ROLE_ADMIN, ROLE_USER) for one user and after succesful login I need it to redirect to /admin form, but keep getting /user form.</p>\n<p>I tried adding RoleHierarchy, but result stays the same.</p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .expressionHandler(expressionHandler())\n                .antMatchers(&quot;/&quot;).permitAll()\n                .antMatchers(&quot;/admin/**&quot;)\n                .hasRole(&quot;ADMIN&quot;)\n                .antMatchers(&quot;/user&quot;)\n                .hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\n                .and()\n                .formLogin()\n                .successHandler(successUserHandler)\n                .permitAll()\n                .and()\n                .logout()\n                .logoutSuccessUrl(&quot;/&quot;);\n    }\n@Component\npublic class SuccessUserHandler implements AuthenticationSuccessHandler {\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest httpServletRequest,\n                                        HttpServletResponse httpServletResponse,\n                                        Authentication authentication) throws IOException {\n        Set&lt;String&gt; roles = AuthorityUtils\n                .authorityListToSet(authentication.getAuthorities());\n        if (roles.contains(&quot;ROLE_USER&quot;)) {\n            httpServletResponse.sendRedirect(&quot;/user&quot;);\n        } else if(roles.contains(&quot;ROLE_ADMIN&quot;)){\n            httpServletResponse.sendRedirect(&quot;/admin&quot;);\n        } else {\n            httpServletResponse.sendRedirect(&quot;/&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679426625,"creation_date":1679426106,"answer_id":75805499,"question_id":75805137,"body_markdown":"There is an overload of antMatcher that [takes the http method as first param][1], try:\r\n\r\n    antMatcher(HttpMethod.GET, &quot;/users&quot;).permitAll()\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/AntPathRequestMatcher.html#antMatcher(org.springframework.http.HttpMethod,java.lang.String)","title":"Allow unauthenticated access to a single endpoint without .antMatchers","body":"<p>There is an overload of antMatcher that <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/AntPathRequestMatcher.html#antMatcher(org.springframework.http.HttpMethod,java.lang.String)\" rel=\"nofollow noreferrer\">takes the http method as first param</a>, try:</p>\n<pre><code>antMatcher(HttpMethod.GET, &quot;/users&quot;).permitAll()\n</code></pre>\n"}],"owner":{"account_id":15577223,"reputation":491,"user_id":11238034,"display_name":"Lucas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75805499,"answer_count":1,"score":-1,"last_activity_date":1679426625,"creation_date":1679423539,"question_id":75805137,"body_markdown":"So, is there a way of allowing unauthenticated access to a single endpoint?\r\nI have a Spring Security Configuration class like this:\r\n```Java\r\npublic class WebSecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nAnd a controller that looks like this:\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(path = &quot;/users&quot;)\r\npublic class ExampleController {\r\n\r\n    @GetMapping\r\n    public List&lt;Users&gt; getUserList(@PathVariable String userId) {\r\n        return this.userService.getUserList(userId);\r\n    }\r\n\r\n    @PostMapping\r\n    public void createUser(@RequestBody User user) {\r\n        this.userService.createUser(user);\r\n    }\r\n\r\n}\r\n```\r\n\r\nTherefore, using `antMatchers` inside my config probably won&#39;t do the job, as both my `GET` and `POST` have the same path... Is there a way I can disable security on a single endpoint, like a decorator on something like that?\r\n\r\nBtw, I&#39;m working with Java 19 and Spring&#39;s latest stable version as of March/2023","title":"Allow unauthenticated access to a single endpoint without .antMatchers","body":"<p>So, is there a way of allowing unauthenticated access to a single endpoint?\nI have a Spring Security Configuration class like this:</p>\n<pre><code>public class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .anyRequest().authenticated()\n                )\n                .httpBasic(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>And a controller that looks like this:</p>\n<pre><code>@RestController\n@RequestMapping(path = &quot;/users&quot;)\npublic class ExampleController {\n\n    @GetMapping\n    public List&lt;Users&gt; getUserList(@PathVariable String userId) {\n        return this.userService.getUserList(userId);\n    }\n\n    @PostMapping\n    public void createUser(@RequestBody User user) {\n        this.userService.createUser(user);\n    }\n\n}\n</code></pre>\n<p>Therefore, using <code>antMatchers</code> inside my config probably won't do the job, as both my <code>GET</code> and <code>POST</code> have the same path... Is there a way I can disable security on a single endpoint, like a decorator on something like that?</p>\n<p>Btw, I'm working with Java 19 and Spring's latest stable version as of March/2023</p>\n"},{"tags":["java","connection-pooling"],"answers":[{"tags":[],"owner":{"account_id":34011,"reputation":5855,"user_id":95674,"display_name":"Barett"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679426363,"creation_date":1679426363,"answer_id":75805540,"question_id":68835163,"body_markdown":"Try updating to the 19c drivers of ojdbc8. (19.18.0.0 or above)\r\n\r\nThere are many releases of ojdbc8 and many of the older ones will not support server v19c.\r\n\r\nLink (unfold section for 19c): https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html\r\n","title":"getting error when trying to use OracleDataSource to get connection in 19c DB","body":"<p>Try updating to the 19c drivers of ojdbc8. (19.18.0.0 or above)</p>\n<p>There are many releases of ojdbc8 and many of the older ones will not support server v19c.</p>\n<p>Link (unfold section for 19c): <a href=\"https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html</a></p>\n"}],"owner":{"account_id":5686216,"reputation":21,"user_id":4495705,"display_name":"Prakash Panchadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679426363,"creation_date":1629300165,"question_id":68835163,"body_markdown":"Can someone help me with the below code. It is working fine when i am connecting to Oracle 11g DB but it is failing with the error **Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException** when i switch to Oracle 19c DB. I am using ojdbc8.jar and  Java 8 for running the below code. In 19c database we are using the Technical account to connect to database instead of normal user account, i am not sure if that has something to do with the error as well.\r\n\r\n```\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.Statement;\r\n    import java.util.Properties;\r\n    \r\n    \r\n    import oracle.jdbc.pool.OracleDataSource;\r\n    \r\n    public class OracleDataSourceTest {\r\n    \r\n    \tfinal static String DB_URL = &quot;jdbc:oracle:thin:xxxxxxx&quot;;\r\n    \tfinal static String DB_USER = &quot;XXX&quot;;\r\n    \tfinal static String DB_PASSWORD = &quot;XXX&quot;;\r\n    \t\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t * @throws Exception \r\n    \t */\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tOracleDataSource dataSource = new OracleDataSource();\r\n            dataSource.setConnectionCachingEnabled(true);\r\n    \r\n            dataSource.setUser(DB_USER);\r\n            dataSource.setPassword(DB_PASSWORD);\r\n            dataSource.setURL(DB_URL);\r\n            Properties jdbcProperties = new Properties();\r\n            jdbcProperties.setProperty(&quot;oracle.jdbc.thinLogonCapability&quot;, &quot;o3&quot;);\r\n            dataSource.setConnectionProperties(jdbcProperties);\r\n            Properties connectionProperties = new Properties();\r\n            connectionProperties.setProperty(&quot;MinLimit&quot;, &quot;1&quot;);\r\n            connectionProperties.setProperty(&quot;MaxLimit&quot;, &quot;50&quot;);\r\n            connectionProperties.setProperty(&quot;ConnectionWaitTimeout&quot;, &quot;0&quot;);\r\n            connectionProperties.setProperty(&quot;ValidateConnection&quot;, &quot;true&quot;);\r\n            dataSource.setConnectionCacheProperties(connectionProperties);\r\n    \r\n    \t\tConnection conn = dataSource.getConnection();\r\n            \r\n            System.out.println(&quot;Connection obtained&quot;);\r\n                    \r\n            //do some work with the connection.\r\n            Statement stmt = conn.createStatement();\r\n            System.out.println(&quot;Executed Stmt &quot; + stmt.execute(&quot;select * from dual&quot;));\r\n            \r\n            //Close the Connection.\r\n            \r\n            conn.close();\r\n    \t}\r\n    }\r\n\r\n```\r\n\r\nThe following is the full stacktrace of the error \r\n&lt;pre&gt;\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException\r\n    \tat oracle.security.o3logon.a.a(Unknown Source)\r\n    \tat oracle.security.o3logon.b.g(Unknown Source)\r\n    \tat oracle.security.o3logon.O3LoginClientHelper.getEPasswd(Unknown Source)\r\n    \tat oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1238)\r\n    \tat oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1025)\r\n    \tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:743)\r\n    \tat oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:793)\r\n    \tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:57)\r\n    \tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:747)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:406)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:291)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:206)\r\n    \tat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:148)\r\n    \tat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:91)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1610)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:517)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.getCacheConnection(OracleImplicitConnectionCache.java:477)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.getConnection(OracleImplicitConnectionCache.java:363)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:513)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:202)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:184)\r\n    \tat com.ubs.jdbc.connectionpool.test.OracleDataSourceTest.main(OracleDataSourceTest.java:37)\r\n    Caused by: java.lang.ArrayIndexOutOfBoundsException\r\n    \tat java.lang.System.arraycopy(Native Method)\r\n    \t... 22 more\r\n\r\n&lt;/pre&gt;","title":"getting error when trying to use OracleDataSource to get connection in 19c DB","body":"<p>Can someone help me with the below code. It is working fine when i am connecting to Oracle 11g DB but it is failing with the error <strong>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException</strong> when i switch to Oracle 19c DB. I am using ojdbc8.jar and  Java 8 for running the below code. In 19c database we are using the Technical account to connect to database instead of normal user account, i am not sure if that has something to do with the error as well.</p>\n<pre><code>\n    import java.sql.Connection;\n    import java.sql.Statement;\n    import java.util.Properties;\n    \n    \n    import oracle.jdbc.pool.OracleDataSource;\n    \n    public class OracleDataSourceTest {\n    \n        final static String DB_URL = &quot;jdbc:oracle:thin:xxxxxxx&quot;;\n        final static String DB_USER = &quot;XXX&quot;;\n        final static String DB_PASSWORD = &quot;XXX&quot;;\n        \n    \n        /**\n         * @param args\n         * @throws Exception \n         */\n        public static void main(String[] args) throws Exception {\n            OracleDataSource dataSource = new OracleDataSource();\n            dataSource.setConnectionCachingEnabled(true);\n    \n            dataSource.setUser(DB_USER);\n            dataSource.setPassword(DB_PASSWORD);\n            dataSource.setURL(DB_URL);\n            Properties jdbcProperties = new Properties();\n            jdbcProperties.setProperty(&quot;oracle.jdbc.thinLogonCapability&quot;, &quot;o3&quot;);\n            dataSource.setConnectionProperties(jdbcProperties);\n            Properties connectionProperties = new Properties();\n            connectionProperties.setProperty(&quot;MinLimit&quot;, &quot;1&quot;);\n            connectionProperties.setProperty(&quot;MaxLimit&quot;, &quot;50&quot;);\n            connectionProperties.setProperty(&quot;ConnectionWaitTimeout&quot;, &quot;0&quot;);\n            connectionProperties.setProperty(&quot;ValidateConnection&quot;, &quot;true&quot;);\n            dataSource.setConnectionCacheProperties(connectionProperties);\n    \n            Connection conn = dataSource.getConnection();\n            \n            System.out.println(&quot;Connection obtained&quot;);\n                    \n            //do some work with the connection.\n            Statement stmt = conn.createStatement();\n            System.out.println(&quot;Executed Stmt &quot; + stmt.execute(&quot;select * from dual&quot;));\n            \n            //Close the Connection.\n            \n            conn.close();\n        }\n    }\n\n</code></pre>\n<p>The following is the full stacktrace of the error</p>\n<pre>\n\n    Exception in thread \"main\" java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException\n        at oracle.security.o3logon.a.a(Unknown Source)\n        at oracle.security.o3logon.b.g(Unknown Source)\n        at oracle.security.o3logon.O3LoginClientHelper.getEPasswd(Unknown Source)\n        at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1238)\n        at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1025)\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:743)\n        at oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:793)\n        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:57)\n        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:747)\n        at oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:406)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:291)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:206)\n        at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:148)\n        at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:91)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1610)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:517)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.getCacheConnection(OracleImplicitConnectionCache.java:477)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.getConnection(OracleImplicitConnectionCache.java:363)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:513)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:202)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:184)\n        at com.ubs.jdbc.connectionpool.test.OracleDataSourceTest.main(OracleDataSourceTest.java:37)\n    Caused by: java.lang.ArrayIndexOutOfBoundsException\n        at java.lang.System.arraycopy(Native Method)\n        ... 22 more\n\n</pre>\n"},{"tags":["java","c","kerberos"],"owner":{"account_id":7572082,"reputation":31,"user_id":5745618,"display_name":"Roxana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679425628,"creation_date":1679339738,"question_id":75794413,"body_markdown":"could you please help to figure out what is wrong in my code:\r\n\r\nSo I need to get the list of principals in KDC and I want to use [krb5](https://github.com/krb5/krb5) library. And in the beginning I need to initialize context and session with keytab and I use `kadm5_init_krb5_context` and `kadm5_init_with_skey` functions for this ([here](https://github.com/krb5/krb5/blob/849b7056e703bd3724d909263769ce190db59acc/src/lib/kadm5/srv/server_init.c)) And I&#39;m using jdk17 and jdk.incubator.foreign.\r\n\r\nMy code:\r\n\r\n```\r\nprivate static void kadminInitWithKeytab(MemorySegment segmentForkadm5ServerHandle) throws Throwable {\r\n    var linker = CLinker.getInstance();\r\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\r\n    var loaderLookup = SymbolLookup.loaderLookup();\r\n\r\n    ResourceScope scope = ResourceScope.newImplicitScope()\r\n    MemorySegment segmentForContext = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope()); // segment for context\r\n    MemoryAddress addressSegmentForContext = segmentForContext.address();\r\n\r\n    initContext(addressSegmentForContext); // Initialize context\r\n\r\n    MemorySegment segmentForConfigParams = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope());\r\n\r\n    MemorySegment segmentForDbArgs = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope());\r\n\r\n    int kadmStructVersion1 = 0x01;\r\n    int apiVersion = 0x04;\r\n\r\n    String clientName = &quot;client/admin@SOME_REALM&quot;;\r\n    MemorySegment cClientName = CLinker.toCString(clientName, scope);\r\n\r\n    String keytabName = &quot;/some_path_to_keytab.keytab&quot;;\r\n    MemorySegment ckeytabName = CLinker.toCString(keytabName, scope);\r\n\r\n    String serviceName = &quot;some_service_name&quot;;\r\n    MemorySegment cServiceName = CLinker.toCString(serviceName, scope);\r\n\r\n    MemoryAddress kadminInitWithKeytabFunction = loaderLookup.lookup(&quot;kadm5_init_with_skey&quot;).get();\r\n    MethodHandle kadminInitWithKeytabHandle = linker.downcallHandle(kadminInitWithKeytabFunction,\r\n      MethodType.methodType(\r\n        long.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        int.class,\r\n        int.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class),\r\n      FunctionDescriptor.of(\r\n        CLinker.C_LONG,          // return type\r\n        CLinker.C_POINTER,       // context\r\n        CLinker.C_POINTER,       // client_name argument\r\n        CLinker.C_POINTER,       // keytab argument\r\n        CLinker.C_POINTER,       // service_name argument\r\n        CLinker.C_POINTER,       // params argument\r\n        CLinker.C_INT,           // struct_version argument\r\n        CLinker.C_INT,           // api_version argument\r\n        CLinker.C_POINTER,      // db_args argument\r\n        CLinker.C_POINTER        // server_handle_out argument\r\n      ));\r\n\r\n      var result = kadminInitWithKeytabHandle.invoke( // this result is 43787552 instead of 0\r\n        addressSegmentForContext.address(),\r\n        cClientName.address(),\r\n        ckeytabName.address(),\r\n        cServiceName.address(),\r\n        segmentForConfigParams.address(),\r\n        kadmStructVersion1,\r\n        apiVersion,\r\n        segmentForDbArgs.address(),\r\n        segmentForkadm5ServerHandle.address());\r\n}\r\n\r\n private static void initContext(MemoryAddress addressForContext) throws Throwable {\r\n    var linker = CLinker.getInstance();\r\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\r\n    var loaderLookup  = SymbolLookup.loaderLookup();\r\n\r\n    MemoryAddress initContextFunction = loaderLookup.lookup(&quot;kadm5_init_krb5_context&quot;).get();\r\n    MethodHandle initContextHandle = linker.downcallHandle(initContextFunction,\r\n      MethodType.methodType(long.class, MemoryAddress.class),\r\n      FunctionDescriptor.of(CLinker.C_LONG, CLinker.C_POINTER)\r\n    );\r\n    var result = initContextHandle.invoke(addressForContext.address()); //here result is 0 as expected\r\n  }\r\n```\r\n\r\nSo the expected result of `kadminInitWithKeytabHandle.invoke` should be 0 but now it&#39;s 43787552 which means that some error occurred but seems that 43787552 is not kerberos error. Maybe someone knows what could be the reason or what I should pay attention at? And how I can figure out what kind of error it is? ","title":"Using jdk.incubator.foreign for krb5 library. Calling kadm5_init_with_skey returns 43787552 value","body":"<p>could you please help to figure out what is wrong in my code:</p>\n<p>So I need to get the list of principals in KDC and I want to use <a href=\"https://github.com/krb5/krb5\" rel=\"nofollow noreferrer\">krb5</a> library. And in the beginning I need to initialize context and session with keytab and I use <code>kadm5_init_krb5_context</code> and <code>kadm5_init_with_skey</code> functions for this (<a href=\"https://github.com/krb5/krb5/blob/849b7056e703bd3724d909263769ce190db59acc/src/lib/kadm5/srv/server_init.c\" rel=\"nofollow noreferrer\">here</a>) And I'm using jdk17 and jdk.incubator.foreign.</p>\n<p>My code:</p>\n<pre><code>private static void kadminInitWithKeytab(MemorySegment segmentForkadm5ServerHandle) throws Throwable {\n    var linker = CLinker.getInstance();\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\n    var loaderLookup = SymbolLookup.loaderLookup();\n\n    ResourceScope scope = ResourceScope.newImplicitScope()\n    MemorySegment segmentForContext = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope()); // segment for context\n    MemoryAddress addressSegmentForContext = segmentForContext.address();\n\n    initContext(addressSegmentForContext); // Initialize context\n\n    MemorySegment segmentForConfigParams = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope());\n\n    MemorySegment segmentForDbArgs = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope());\n\n    int kadmStructVersion1 = 0x01;\n    int apiVersion = 0x04;\n\n    String clientName = &quot;client/admin@SOME_REALM&quot;;\n    MemorySegment cClientName = CLinker.toCString(clientName, scope);\n\n    String keytabName = &quot;/some_path_to_keytab.keytab&quot;;\n    MemorySegment ckeytabName = CLinker.toCString(keytabName, scope);\n\n    String serviceName = &quot;some_service_name&quot;;\n    MemorySegment cServiceName = CLinker.toCString(serviceName, scope);\n\n    MemoryAddress kadminInitWithKeytabFunction = loaderLookup.lookup(&quot;kadm5_init_with_skey&quot;).get();\n    MethodHandle kadminInitWithKeytabHandle = linker.downcallHandle(kadminInitWithKeytabFunction,\n      MethodType.methodType(\n        long.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        int.class,\n        int.class,\n        MemoryAddress.class,\n        MemoryAddress.class),\n      FunctionDescriptor.of(\n        CLinker.C_LONG,          // return type\n        CLinker.C_POINTER,       // context\n        CLinker.C_POINTER,       // client_name argument\n        CLinker.C_POINTER,       // keytab argument\n        CLinker.C_POINTER,       // service_name argument\n        CLinker.C_POINTER,       // params argument\n        CLinker.C_INT,           // struct_version argument\n        CLinker.C_INT,           // api_version argument\n        CLinker.C_POINTER,      // db_args argument\n        CLinker.C_POINTER        // server_handle_out argument\n      ));\n\n      var result = kadminInitWithKeytabHandle.invoke( // this result is 43787552 instead of 0\n        addressSegmentForContext.address(),\n        cClientName.address(),\n        ckeytabName.address(),\n        cServiceName.address(),\n        segmentForConfigParams.address(),\n        kadmStructVersion1,\n        apiVersion,\n        segmentForDbArgs.address(),\n        segmentForkadm5ServerHandle.address());\n}\n\n private static void initContext(MemoryAddress addressForContext) throws Throwable {\n    var linker = CLinker.getInstance();\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\n    var loaderLookup  = SymbolLookup.loaderLookup();\n\n    MemoryAddress initContextFunction = loaderLookup.lookup(&quot;kadm5_init_krb5_context&quot;).get();\n    MethodHandle initContextHandle = linker.downcallHandle(initContextFunction,\n      MethodType.methodType(long.class, MemoryAddress.class),\n      FunctionDescriptor.of(CLinker.C_LONG, CLinker.C_POINTER)\n    );\n    var result = initContextHandle.invoke(addressForContext.address()); //here result is 0 as expected\n  }\n</code></pre>\n<p>So the expected result of <code>kadminInitWithKeytabHandle.invoke</code> should be 0 but now it's 43787552 which means that some error occurred but seems that 43787552 is not kerberos error. Maybe someone knows what could be the reason or what I should pay attention at? And how I can figure out what kind of error it is?</p>\n"},{"tags":["java","tinylog"],"answers":[{"tags":[],"owner":{"account_id":4886037,"reputation":119,"user_id":7340677,"display_name":"Betalord"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679425370,"creation_date":1679425370,"answer_id":75805404,"question_id":75776644,"body_markdown":"I solved the problem myself, not sure if my solution is the best, but anyway. I introduced these two methods:\r\n\r\n```java\r\n\t/** Redirects all writing to System.out stream to the logger (logging messages at INFO level). */\r\n    public static void redirectSystemOut() {\r\n    \tSystem.setOut(new PrintStream(new LineReadingOutputStream(Logger::info), true));\r\n    }\r\n    \r\n    /** Redirects all writing to System.err stream to the logger (logging messages at ERROR level). */\r\n    public static void redirectSystemErr() {\r\n    \tSystem.setErr(new PrintStream(new LineReadingOutputStream(Logger::error), true));\r\n    }\r\n```\r\n\r\nAs far as LineReadingOutputStream class goes, I found it here: [https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings][1]\r\n\r\nOne final element of this solution is creation of custom console writer, since the default one outputs everything to System.out / System.err, and that would create an infinite loop. The trick is to wrap the two streams and send strings to them. This is the code of my class that I call &quot;IsolatedConsoleWriter&quot; and has to be registered via META-INF (as described in the tinylog docs):\r\n\r\n```java\r\npackage com.betalord.sgx.core;\r\n\r\nimport org.tinylog.Level;\r\nimport org.tinylog.core.ConfigurationParser;\r\nimport org.tinylog.core.LogEntry;\r\nimport org.tinylog.core.LogEntryValue;\r\nimport org.tinylog.provider.InternalLogger;\r\nimport org.tinylog.writers.AbstractFormatPatternWriter;\r\n\r\nimport java.io.FileDescriptor;\r\nimport java.io.FileOutputStream;\r\nimport java.io.PrintStream;\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.Map;\r\n\r\n/**\r\n * Console writer based on org.tinylog.writers.ConsoleWriter class, with one difference: this one\r\n * doesn&#39;t write logs to System.out/err but rather to our own streams, that output to the same system\r\n * streams but wrapped. This enables us to redirect System.out/err to the logger (if we were to use\r\n * normal console writer, we would create an infinite loop upon writing to System.out(err).\r\n *\r\n * Comes as a solution to this problem:\r\n * &lt;a href=&quot;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&quot;&gt;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&lt;/a&gt;\r\n *\r\n * @author Betalord\r\n */\r\npublic class IsolatedConsoleWriter extends AbstractFormatPatternWriter {\r\n\tprivate final Level errorLevel;\r\n\tprivate final PrintStream outStream, errStream;\r\n\t\r\n\tpublic IsolatedConsoleWriter() {\r\n\t\tthis(Collections.&lt;String, String&gt;emptyMap());\r\n\t}\r\n\t\r\n\tpublic IsolatedConsoleWriter(final Map&lt;String, String&gt; properties) {\r\n\t\tsuper(properties);\r\n\t\t\r\n\t\t// Set the default level for stderr logging\r\n\t\tLevel levelStream = Level.WARN;\r\n\t\t\r\n\t\t// Check stream property\r\n\t\tString stream = getStringValue(&quot;stream&quot;);\r\n\t\tif (stream != null) {\r\n\t\t\t// Check whether we have the err@LEVEL syntax\r\n\t\t\tString[] streams = stream.split(&quot;@&quot;, 2);\r\n\t\t\tif (streams.length == 2) {\r\n\t\t\t\tlevelStream = ConfigurationParser.parse(streams[1], levelStream);\r\n\t\t\t\tif (!streams[0].equals(&quot;err&quot;)) {\r\n\t\t\t\t\tInternalLogger.log(Level.ERROR, &quot;Stream with level must be \\&quot;err\\&quot;, \\&quot;&quot; + streams[0] + &quot;\\&quot; is an invalid name&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tstream = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (stream == null) {\r\n\t\t\terrorLevel = levelStream;\r\n\t\t} else if (&quot;err&quot;.equalsIgnoreCase(stream)) {\r\n\t\t\terrorLevel = Level.TRACE;\r\n\t\t} else if (&quot;out&quot;.equalsIgnoreCase(stream)) {\r\n\t\t\terrorLevel = Level.OFF;\r\n\t\t} else {\r\n\t\t\tInternalLogger.log(Level.ERROR, &quot;Stream must be \\&quot;out\\&quot; or \\&quot;err\\&quot;, \\&quot;&quot; + stream + &quot;\\&quot; is an invalid stream name&quot;);\r\n\t\t\terrorLevel = levelStream;\r\n\t\t}\r\n\t\t\r\n\t\toutStream = new PrintStream(new FileOutputStream(FileDescriptor.out), true);\r\n\t\terrStream = new PrintStream(new FileOutputStream(FileDescriptor.err), true);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Collection&lt;LogEntryValue&gt; getRequiredLogEntryValues() {\r\n\t\tCollection&lt;LogEntryValue&gt; logEntryValues = super.getRequiredLogEntryValues();\r\n\t\tlogEntryValues.add(LogEntryValue.LEVEL);\r\n\t\treturn logEntryValues;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void write(final LogEntry logEntry) {\r\n\t\tif (logEntry.getLevel().ordinal() &lt; errorLevel.ordinal()) {\r\n\t\t\toutStream.print(render(logEntry));\r\n\t\t} else {\r\n\t\t\terrStream.print(render(logEntry));\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void flush() {\r\n\t\toutStream.flush();\r\n\t\terrStream.flush();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void close() {\r\n\t\toutStream.close();\r\n\t\terrStream.close();\r\n\t}\r\n}\r\n```\r\n\r\nSo this writer is exact copy of ConsoleWriter, it add only two fields: errStream and outStream.\r\nSo, putting all of these elements together, I managed to achieve what I wanted - all System.out.println() and similar calls are rerouted to my logger, which formats all the data according to the defined rules (I actually use several writers - isolated console, as shown here, then the rolling file one, the &quot;normal&quot; file one, and also logcat, when I run my app under android).\r\n\r\nIf anyone comes up with a better solution, please let me know.\r\nHowever I believe that the functionality that achieves what I want should be part of the tinylog library itself (rather than using custom hacks like this one).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings","title":"How to redirect System.out and System.err to tinylog logger?","body":"<p>I solved the problem myself, not sure if my solution is the best, but anyway. I introduced these two methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /** Redirects all writing to System.out stream to the logger (logging messages at INFO level). */\n    public static void redirectSystemOut() {\n        System.setOut(new PrintStream(new LineReadingOutputStream(Logger::info), true));\n    }\n    \n    /** Redirects all writing to System.err stream to the logger (logging messages at ERROR level). */\n    public static void redirectSystemErr() {\n        System.setErr(new PrintStream(new LineReadingOutputStream(Logger::error), true));\n    }\n</code></pre>\n<p>As far as LineReadingOutputStream class goes, I found it here: <a href=\"https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings\">Java OutputStream reading lines of strings</a></p>\n<p>One final element of this solution is creation of custom console writer, since the default one outputs everything to System.out / System.err, and that would create an infinite loop. The trick is to wrap the two streams and send strings to them. This is the code of my class that I call &quot;IsolatedConsoleWriter&quot; and has to be registered via META-INF (as described in the tinylog docs):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.betalord.sgx.core;\n\nimport org.tinylog.Level;\nimport org.tinylog.core.ConfigurationParser;\nimport org.tinylog.core.LogEntry;\nimport org.tinylog.core.LogEntryValue;\nimport org.tinylog.provider.InternalLogger;\nimport org.tinylog.writers.AbstractFormatPatternWriter;\n\nimport java.io.FileDescriptor;\nimport java.io.FileOutputStream;\nimport java.io.PrintStream;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Map;\n\n/**\n * Console writer based on org.tinylog.writers.ConsoleWriter class, with one difference: this one\n * doesn't write logs to System.out/err but rather to our own streams, that output to the same system\n * streams but wrapped. This enables us to redirect System.out/err to the logger (if we were to use\n * normal console writer, we would create an infinite loop upon writing to System.out(err).\n *\n * Comes as a solution to this problem:\n * &lt;a href=&quot;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&quot;&gt;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&lt;/a&gt;\n *\n * @author Betalord\n */\npublic class IsolatedConsoleWriter extends AbstractFormatPatternWriter {\n    private final Level errorLevel;\n    private final PrintStream outStream, errStream;\n    \n    public IsolatedConsoleWriter() {\n        this(Collections.&lt;String, String&gt;emptyMap());\n    }\n    \n    public IsolatedConsoleWriter(final Map&lt;String, String&gt; properties) {\n        super(properties);\n        \n        // Set the default level for stderr logging\n        Level levelStream = Level.WARN;\n        \n        // Check stream property\n        String stream = getStringValue(&quot;stream&quot;);\n        if (stream != null) {\n            // Check whether we have the err@LEVEL syntax\n            String[] streams = stream.split(&quot;@&quot;, 2);\n            if (streams.length == 2) {\n                levelStream = ConfigurationParser.parse(streams[1], levelStream);\n                if (!streams[0].equals(&quot;err&quot;)) {\n                    InternalLogger.log(Level.ERROR, &quot;Stream with level must be \\&quot;err\\&quot;, \\&quot;&quot; + streams[0] + &quot;\\&quot; is an invalid name&quot;);\n                }\n                stream = null;\n            }\n        }\n        \n        if (stream == null) {\n            errorLevel = levelStream;\n        } else if (&quot;err&quot;.equalsIgnoreCase(stream)) {\n            errorLevel = Level.TRACE;\n        } else if (&quot;out&quot;.equalsIgnoreCase(stream)) {\n            errorLevel = Level.OFF;\n        } else {\n            InternalLogger.log(Level.ERROR, &quot;Stream must be \\&quot;out\\&quot; or \\&quot;err\\&quot;, \\&quot;&quot; + stream + &quot;\\&quot; is an invalid stream name&quot;);\n            errorLevel = levelStream;\n        }\n        \n        outStream = new PrintStream(new FileOutputStream(FileDescriptor.out), true);\n        errStream = new PrintStream(new FileOutputStream(FileDescriptor.err), true);\n    }\n    \n    @Override\n    public Collection&lt;LogEntryValue&gt; getRequiredLogEntryValues() {\n        Collection&lt;LogEntryValue&gt; logEntryValues = super.getRequiredLogEntryValues();\n        logEntryValues.add(LogEntryValue.LEVEL);\n        return logEntryValues;\n    }\n    \n    @Override\n    public void write(final LogEntry logEntry) {\n        if (logEntry.getLevel().ordinal() &lt; errorLevel.ordinal()) {\n            outStream.print(render(logEntry));\n        } else {\n            errStream.print(render(logEntry));\n        }\n    }\n    \n    @Override\n    public void flush() {\n        outStream.flush();\n        errStream.flush();\n    }\n    \n    @Override\n    public void close() {\n        outStream.close();\n        errStream.close();\n    }\n}\n</code></pre>\n<p>So this writer is exact copy of ConsoleWriter, it add only two fields: errStream and outStream.\nSo, putting all of these elements together, I managed to achieve what I wanted - all System.out.println() and similar calls are rerouted to my logger, which formats all the data according to the defined rules (I actually use several writers - isolated console, as shown here, then the rolling file one, the &quot;normal&quot; file one, and also logcat, when I run my app under android).</p>\n<p>If anyone comes up with a better solution, please let me know.\nHowever I believe that the functionality that achieves what I want should be part of the tinylog library itself (rather than using custom hacks like this one).</p>\n"}],"owner":{"account_id":4886037,"reputation":119,"user_id":7340677,"display_name":"Betalord"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679425370,"creation_date":1679151489,"question_id":75776644,"body_markdown":"I am trying to use [tinylog](https://tinylog.org/v2/) but can&#39;t figure out how to redirect System.out and System.err to the logger. With log4j2, I did it like this (from java code):\r\n\r\n```\r\nSystem.setErr(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.ERROR).buildPrintStream());\r\nSystem.setOut(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.INFO).buildPrintStream());\r\n```\r\nI assume I should use same mechanism (System.setOut and setErr), however I&#39;m not sure what is the right way to do it. I&#39;ve read the online documentation but could not find any answer to my question (which is strange, since this is such a basic functionality that any logger must support in my opinion).\r\n\r\nAny ideas?","title":"How to redirect System.out and System.err to tinylog logger?","body":"<p>I am trying to use <a href=\"https://tinylog.org/v2/\" rel=\"nofollow noreferrer\">tinylog</a> but can't figure out how to redirect System.out and System.err to the logger. With log4j2, I did it like this (from java code):</p>\n<pre><code>System.setErr(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.ERROR).buildPrintStream());\nSystem.setOut(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.INFO).buildPrintStream());\n</code></pre>\n<p>I assume I should use same mechanism (System.setOut and setErr), however I'm not sure what is the right way to do it. I've read the online documentation but could not find any answer to my question (which is strange, since this is such a basic functionality that any logger must support in my opinion).</p>\n<p>Any ideas?</p>\n"},{"tags":["java","avro"],"comments":[{"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"score":0,"creation_date":1679412735,"post_id":75801609,"comment_id":133715580,"body_markdown":"So far, I can say that .withShardNameTemplate(&quot;ssss-of-nnnn&quot;) causes issues for name uniqueness. if I reduce the number of chards &amp; increase the window size, I can get files containing more than 1 avro object.","body":"So far, I can say that .withShardNameTemplate(&quot;ssss-of-nnnn&quot;) causes issues for name uniqueness. if I reduce the number of chards &amp; increase the window size, I can get files containing more than 1 avro object."},{"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"score":0,"creation_date":1679425048,"post_id":75801609,"comment_id":133719297,"body_markdown":"So, my recommendation, do not use\n.withNumShards(20) &amp;\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));","body":"So, my recommendation, do not use .withNumShards(20) &amp; .withShardNameTemplate(&quot;ssss-of-nnnn&quot;));"}],"answers":[{"tags":[],"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679425338,"creation_date":1679425338,"answer_id":75805401,"question_id":75801609,"body_markdown":"Avro will handle itself the amount of data created and sent to the bucket, along with appending data, as long as you don&#39;t mess with its file naming convention. Also you need enough data in order to do your tests.","title":"Is AvroIO.writeGenericRecords(schema) capable to append to existing files in java?","body":"<p>Avro will handle itself the amount of data created and sent to the bucket, along with appending data, as long as you don't mess with its file naming convention. Also you need enough data in order to do your tests.</p>\n"}],"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679425338,"creation_date":1679403874,"question_id":75801609,"body_markdown":"I have been scratching my head around this question for a while, I&#39;m using java with Avro, writing files with windowed writes, shards, &amp; shard template &quot;W-P-sssss-of-nnnnn&quot;, but now the requirement ask for appending the content to the existing amount of shards.\r\n\r\n```\r\nPCollection&lt;GenericRecord&gt; collection = ...\r\ncollection.apply(&quot;write to bucket&quot;, \r\nAvroIO.writeGenericRecords(schema)\r\n.to(&quot;gs://my-bucket/folder&quot;)\r\n.withWindowedWrites()\r\n.withNumShards(20)\r\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));\r\n```\r\nI understand that shard number will attempt to create 20 files, but those will increase if more data is present. I has been trying to append to existing content, but I only get files being overwritten.\r\n\r\nOf course, if we set a more unique shard template, like &quot;W-P-sssss-of-nnnnn&quot; we get more files, avoiding the files being overwritten, but, how to append data to existing 20 shards?\r\nIs that possible?\r\n\r\nI tried using with Dynamic Destinations, and Value providers, but that allowed me to manipulate the folder destination, or the file naming policy, but this don&#39;t put me closer to defining how to append instead of overwriting files.","title":"Is AvroIO.writeGenericRecords(schema) capable to append to existing files in java?","body":"<p>I have been scratching my head around this question for a while, I'm using java with Avro, writing files with windowed writes, shards, &amp; shard template &quot;W-P-sssss-of-nnnnn&quot;, but now the requirement ask for appending the content to the existing amount of shards.</p>\n<pre><code>PCollection&lt;GenericRecord&gt; collection = ...\ncollection.apply(&quot;write to bucket&quot;, \nAvroIO.writeGenericRecords(schema)\n.to(&quot;gs://my-bucket/folder&quot;)\n.withWindowedWrites()\n.withNumShards(20)\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));\n</code></pre>\n<p>I understand that shard number will attempt to create 20 files, but those will increase if more data is present. I has been trying to append to existing content, but I only get files being overwritten.</p>\n<p>Of course, if we set a more unique shard template, like &quot;W-P-sssss-of-nnnnn&quot; we get more files, avoiding the files being overwritten, but, how to append data to existing 20 shards?\nIs that possible?</p>\n<p>I tried using with Dynamic Destinations, and Value providers, but that allowed me to manipulate the folder destination, or the file naming policy, but this don't put me closer to defining how to append instead of overwriting files.</p>\n"},{"tags":["java","pdf","text","hyperlink","pdfbox"],"answers":[{"tags":[],"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1514242951,"creation_date":1469540484,"answer_id":38591541,"question_id":38587567,"body_markdown":"Use this code from the [PrintURLs sample code][1] from the source code download:\r\n\r\n    for( PDPage page : doc.getPages() )\r\n    {\r\n        pageNum++;\r\n        PDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n        List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n        //first setup text extraction regions\r\n        for( int j=0; j&lt;annotations.size(); j++ )\r\n        {\r\n            PDAnnotation annot = annotations.get(j);\r\n            if( annot instanceof PDAnnotationLink )\r\n            {\r\n                PDAnnotationLink link = (PDAnnotationLink)annot;\r\n                PDRectangle rect = link.getRectangle();\r\n                //need to reposition link rectangle to match text space\r\n                float x = rect.getLowerLeftX();\r\n                float y = rect.getUpperRightY();\r\n                float width = rect.getWidth();\r\n                float height = rect.getHeight();\r\n                int rotation = page.getRotation();\r\n                if( rotation == 0 )\r\n                {\r\n                    PDRectangle pageSize = page.getMediaBox();\r\n                    y = pageSize.getHeight() - y;\r\n                }\r\n                else if( rotation == 90 )\r\n                {\r\n                    //do nothing\r\n                }\r\n\r\n                Rectangle2D.Float awtRect = new Rectangle2D.Float( x,y,width,height );\r\n                stripper.addRegion( &quot;&quot; + j, awtRect );\r\n            }\r\n        }\r\n\r\n        stripper.extractRegions( page );\r\n\r\n        for( int j=0; j&lt;annotations.size(); j++ )\r\n        {\r\n            PDAnnotation annot = annotations.get(j);\r\n            if( annot instanceof PDAnnotationLink )\r\n            {\r\n                PDAnnotationLink link = (PDAnnotationLink)annot;\r\n                PDAction action = link.getAction();\r\n                String urlText = stripper.getTextForRegion( &quot;&quot; + j );\r\n                if( action instanceof PDActionURI )\r\n                {\r\n                    PDActionURI uri = (PDActionURI)action;\r\n                    System.out.println( &quot;Page &quot; + pageNum +&quot;:&#39;&quot; + urlText.trim() + &quot;&#39;=&quot; + uri.getURI() );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIt works in two parts, one is getting the URL which is easy, the other is getting the URL text, which is done with a text extraction at the rectangle of the annotation.\r\n\r\n  [1]: https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/pdmodel/PrintURLs.java","title":"How to extract hyperlink information PDFBox","body":"<p>Use this code from the <a href=\"https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/pdmodel/PrintURLs.java\" rel=\"noreferrer\">PrintURLs sample code</a> from the source code download:</p>\n\n<pre><code>for( PDPage page : doc.getPages() )\n{\n    pageNum++;\n    PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n    //first setup text extraction regions\n    for( int j=0; j&lt;annotations.size(); j++ )\n    {\n        PDAnnotation annot = annotations.get(j);\n        if( annot instanceof PDAnnotationLink )\n        {\n            PDAnnotationLink link = (PDAnnotationLink)annot;\n            PDRectangle rect = link.getRectangle();\n            //need to reposition link rectangle to match text space\n            float x = rect.getLowerLeftX();\n            float y = rect.getUpperRightY();\n            float width = rect.getWidth();\n            float height = rect.getHeight();\n            int rotation = page.getRotation();\n            if( rotation == 0 )\n            {\n                PDRectangle pageSize = page.getMediaBox();\n                y = pageSize.getHeight() - y;\n            }\n            else if( rotation == 90 )\n            {\n                //do nothing\n            }\n\n            Rectangle2D.Float awtRect = new Rectangle2D.Float( x,y,width,height );\n            stripper.addRegion( \"\" + j, awtRect );\n        }\n    }\n\n    stripper.extractRegions( page );\n\n    for( int j=0; j&lt;annotations.size(); j++ )\n    {\n        PDAnnotation annot = annotations.get(j);\n        if( annot instanceof PDAnnotationLink )\n        {\n            PDAnnotationLink link = (PDAnnotationLink)annot;\n            PDAction action = link.getAction();\n            String urlText = stripper.getTextForRegion( \"\" + j );\n            if( action instanceof PDActionURI )\n            {\n                PDActionURI uri = (PDActionURI)action;\n                System.out.println( \"Page \" + pageNum +\":'\" + urlText.trim() + \"'=\" + uri.getURI() );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It works in two parts, one is getting the URL which is easy, the other is getting the URL text, which is done with a text extraction at the rectangle of the annotation.</p>\n"},{"tags":[],"owner":{"account_id":7493363,"reputation":1061,"user_id":5694338,"accept_rate":50,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1470734465,"creation_date":1470734465,"answer_id":38846776,"question_id":38587567,"body_markdown":"We must get hyperlink information and internal link(ex. move page....). I using code below:\r\n           \r\n\r\n \r\n\r\n    int pageNum = 0;\r\n                for (PDPage page : originalPDF.getPages()) {\r\n                    pageNum++;\r\n                    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n                    for (PDAnnotation annot : annotations) {\r\n                        if (annot instanceof PDAnnotationLink) {\r\n                            // get dimension of annottations\r\n                            PDAnnotationLink link = (PDAnnotationLink) annot;\r\n                            // get link action include link url and internal link\r\n                            PDAction action = link.getAction();\r\n                            // get link internal some case specal\r\n                            PDDestination pDestination = link.getDestination();\r\n    \r\n                            if (action != null) {\r\n                                if (action instanceof PDActionURI || action instanceof PDActionGoTo) {\r\n                                    if (action instanceof PDActionURI) {\r\n                                        // get uri link\r\n                                        PDActionURI uri = (PDActionURI) action;\r\n                                        System.out.println(&quot;uri link:&quot; + uri.getURI());\r\n                                    } else {\r\n                                        if (action instanceof PDActionGoTo) {\r\n                                            // get internal link\r\n                                            PDDestination destination = ((PDActionGoTo) action).getDestination();\r\n                                            PDPageDestination pageDestination;\r\n                                            if (destination instanceof PDPageDestination) {\r\n                                                pageDestination = (PDPageDestination) destination;\r\n                                            } else {\r\n                                                if (destination instanceof PDNamedDestination) {\r\n                                                    pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) destination);\r\n                                                } else {\r\n                                                    // error handling\r\n                                                    break;\r\n                                                }\r\n                                            }\r\n    \r\n                                            if (pageDestination != null) {\r\n                                                System.out.println(&quot;page move: &quot; + (pageDestination.retrievePageNumber() + 1));\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (pDestination != null) {\r\n                                    PDPageDestination pageDestination;\r\n                                    if (pDestination instanceof PDPageDestination) {\r\n                                        pageDestination = (PDPageDestination) pDestination;\r\n                                    } else {\r\n                                        if (pDestination instanceof PDNamedDestination) {\r\n                                            pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) pDestination);\r\n                                        } else {\r\n                                            // error handling\r\n                                            break;\r\n                                        }\r\n                                    }\r\n    \r\n                                    if (pageDestination != null) {\r\n                                        System.out.println(&quot;page move: &quot; + (pageDestination.retrievePageNumber() + 1));\r\n                                    }\r\n                                } else {\r\n                                    //    \r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n    \r\n                }","title":"How to extract hyperlink information PDFBox","body":"<p>We must get hyperlink information and internal link(ex. move page....). I using code below:</p>\n\n<pre><code>int pageNum = 0;\n            for (PDPage page : originalPDF.getPages()) {\n                pageNum++;\n                List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n                for (PDAnnotation annot : annotations) {\n                    if (annot instanceof PDAnnotationLink) {\n                        // get dimension of annottations\n                        PDAnnotationLink link = (PDAnnotationLink) annot;\n                        // get link action include link url and internal link\n                        PDAction action = link.getAction();\n                        // get link internal some case specal\n                        PDDestination pDestination = link.getDestination();\n\n                        if (action != null) {\n                            if (action instanceof PDActionURI || action instanceof PDActionGoTo) {\n                                if (action instanceof PDActionURI) {\n                                    // get uri link\n                                    PDActionURI uri = (PDActionURI) action;\n                                    System.out.println(\"uri link:\" + uri.getURI());\n                                } else {\n                                    if (action instanceof PDActionGoTo) {\n                                        // get internal link\n                                        PDDestination destination = ((PDActionGoTo) action).getDestination();\n                                        PDPageDestination pageDestination;\n                                        if (destination instanceof PDPageDestination) {\n                                            pageDestination = (PDPageDestination) destination;\n                                        } else {\n                                            if (destination instanceof PDNamedDestination) {\n                                                pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) destination);\n                                            } else {\n                                                // error handling\n                                                break;\n                                            }\n                                        }\n\n                                        if (pageDestination != null) {\n                                            System.out.println(\"page move: \" + (pageDestination.retrievePageNumber() + 1));\n                                        }\n                                    }\n                                }\n                            }\n                        } else {\n                            if (pDestination != null) {\n                                PDPageDestination pageDestination;\n                                if (pDestination instanceof PDPageDestination) {\n                                    pageDestination = (PDPageDestination) pDestination;\n                                } else {\n                                    if (pDestination instanceof PDNamedDestination) {\n                                        pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) pDestination);\n                                    } else {\n                                        // error handling\n                                        break;\n                                    }\n                                }\n\n                                if (pageDestination != null) {\n                                    System.out.println(\"page move: \" + (pageDestination.retrievePageNumber() + 1));\n                                }\n                            } else {\n                                //    \n                            }\n                        }\n                    }\n                }\n\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25858612,"reputation":1,"user_id":19591426,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679424707,"creation_date":1679424707,"answer_id":75805315,"question_id":38587567,"body_markdown":"    03/21/2023\r\n    I have Just tested today and it work. but there are couple of set up need to do. this is how i did it.\r\n    [dependency]\r\n        &lt;dependency&gt;\r\n    \t    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;2.0.27&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    Imports:-\r\n    import java.awt.geom.Rectangle2D;\r\n    import java.io.BufferedInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.URL;\r\n    import java.util.List;\r\n    \r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDPage;\r\n    import org.apache.pdfbox.pdmodel.common.PDRectangle;\r\n    import org.apache.pdfbox.pdmodel.interactive.action.PDAction;\r\n    import org.apache.pdfbox.pdmodel.interactive.action.PDActionURI;\r\n    import org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotation;\r\n    import org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationLink;\r\n    import org.apache.pdfbox.text.PDFTextStripperByArea;\r\n    \r\n    public class Test_newSome {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    // File path = open pdf file on MSEdge and copy url \r\n    \t\tURL url = new URL(&quot;file:///C:/Users/PcuserName/Downloads/Credentials%20Email%20-%20Mar21FN%20Mar21094806LN.pdf&quot;);\r\n    \t\tInputStream is = url.openStream();\r\n    \t\tBufferedInputStream filePase = new BufferedInputStream(is);\r\n    \t\tPDDocument doc = null;\r\n    \r\n    \t\tdoc = PDDocument.load(filePase);\r\n    \r\n    \t\tfor (PDPage page : doc.getPages()) {\r\n    \t\t\tint pageNum = 0;\r\n    \t\t\tpageNum++;\r\n    \t\t\tPDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n    \t\t\tList&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n    \t\t\t// first setup text extraction regions\r\n    \t\t\tfor (int j = 0; j &lt; annotations.size(); j++) {\r\n    \t\t\t\tPDAnnotation annot = annotations.get(j);\r\n    \t\t\t\tif (annot instanceof PDAnnotationLink) {\r\n    \t\t\t\t\tPDAnnotationLink link = (PDAnnotationLink) annot;\r\n    \t\t\t\t\tPDRectangle rect = link.getRectangle();\r\n    \t\t\t\t\t// need to reposition link rectangle to match text space\r\n    \t\t\t\t\tfloat x = rect.getLowerLeftX();\r\n    \t\t\t\t\tfloat y = rect.getUpperRightY();\r\n    \t\t\t\t\tfloat width = rect.getWidth();\r\n    \t\t\t\t\tfloat height = rect.getHeight();\r\n    \t\t\t\t\tint rotation = page.getRotation();\r\n    \t\t\t\t\tif (rotation == 0) {\r\n    \t\t\t\t\t\tPDRectangle pageSize = page.getMediaBox();\r\n    \t\t\t\t\t\ty = pageSize.getHeight() - y;\r\n    \t\t\t\t\t} else if (rotation == 90) {\r\n    \t\t\t\t\t\t// do nothing\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tRectangle2D.Float awtRect = new Rectangle2D.Float(x, y, width, height);\r\n    \t\t\t\t\tstripper.addRegion(&quot;&quot; + j, awtRect);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tstripper.extractRegions(page);\r\n    \r\n    \t\t\tfor (int j = 0; j &lt; annotations.size(); j++) {\r\n    \t\t\t\tPDAnnotation annot = annotations.get(j);\r\n    \t\t\t\tif (annot instanceof PDAnnotationLink) {\r\n    \t\t\t\t\tPDAnnotationLink link = (PDAnnotationLink) annot;\r\n    \t\t\t\t\tPDAction action = link.getAction();\r\n    \t\t\t\t\tString urlText = stripper.getTextForRegion(&quot;&quot; + j);\r\n    \t\t\t\t\tif (action instanceof PDActionURI) {\r\n    \t\t\t\t\t\tPDActionURI uri = (PDActionURI) action;\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Page &quot; + pageNum + &quot;:&#39;&quot; + urlText.trim() + &quot;&#39;=&quot; + uri.getURI());\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to extract hyperlink information PDFBox","body":"<pre><code>03/21/2023\nI have Just tested today and it work. but there are couple of set up need to do. this is how i did it.\n[dependency]\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.27&lt;/version&gt;\n    &lt;/dependency&gt;\n\nImports:-\nimport java.awt.geom.Rectangle2D;\nimport java.io.BufferedInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URL;\nimport java.util.List;\n\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.common.PDRectangle;\nimport org.apache.pdfbox.pdmodel.interactive.action.PDAction;\nimport org.apache.pdfbox.pdmodel.interactive.action.PDActionURI;\nimport org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotation;\nimport org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationLink;\nimport org.apache.pdfbox.text.PDFTextStripperByArea;\n\npublic class Test_newSome {\n\n    public static void main(String[] args) throws IOException {\n// File path = open pdf file on MSEdge and copy url \n        URL url = new URL(&quot;file:///C:/Users/PcuserName/Downloads/Credentials%20Email%20-%20Mar21FN%20Mar21094806LN.pdf&quot;);\n        InputStream is = url.openStream();\n        BufferedInputStream filePase = new BufferedInputStream(is);\n        PDDocument doc = null;\n\n        doc = PDDocument.load(filePase);\n\n        for (PDPage page : doc.getPages()) {\n            int pageNum = 0;\n            pageNum++;\n            PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n            List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n            // first setup text extraction regions\n            for (int j = 0; j &lt; annotations.size(); j++) {\n                PDAnnotation annot = annotations.get(j);\n                if (annot instanceof PDAnnotationLink) {\n                    PDAnnotationLink link = (PDAnnotationLink) annot;\n                    PDRectangle rect = link.getRectangle();\n                    // need to reposition link rectangle to match text space\n                    float x = rect.getLowerLeftX();\n                    float y = rect.getUpperRightY();\n                    float width = rect.getWidth();\n                    float height = rect.getHeight();\n                    int rotation = page.getRotation();\n                    if (rotation == 0) {\n                        PDRectangle pageSize = page.getMediaBox();\n                        y = pageSize.getHeight() - y;\n                    } else if (rotation == 90) {\n                        // do nothing\n                    }\n\n                    Rectangle2D.Float awtRect = new Rectangle2D.Float(x, y, width, height);\n                    stripper.addRegion(&quot;&quot; + j, awtRect);\n                }\n            }\n\n            stripper.extractRegions(page);\n\n            for (int j = 0; j &lt; annotations.size(); j++) {\n                PDAnnotation annot = annotations.get(j);\n                if (annot instanceof PDAnnotationLink) {\n                    PDAnnotationLink link = (PDAnnotationLink) annot;\n                    PDAction action = link.getAction();\n                    String urlText = stripper.getTextForRegion(&quot;&quot; + j);\n                    if (action instanceof PDActionURI) {\n                        PDActionURI uri = (PDActionURI) action;\n                        System.out.println(&quot;Page &quot; + pageNum + &quot;:'&quot; + urlText.trim() + &quot;'=&quot; + uri.getURI());\n\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3592597,"reputation":1049,"user_id":2998265,"accept_rate":91,"display_name":"kabeersvohra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5601,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":38591541,"answer_count":3,"score":10,"last_activity_date":1679424707,"creation_date":1469529469,"question_id":38587567,"body_markdown":"I am trying to extract the hyperlink information from a PDF using PDFBox but I am unsure how to get \r\n\r\n    for( Object p : pages ) {\r\n        PDPage page = (PDPage)p;\r\n\r\n        List&lt;?&gt; annotations = page.getAnnotations();\r\n        for( Object a : annotations ) {\r\n            PDAnnotation annotation = (PDAnnotation)a;\r\n\r\n            if( annotation instanceof PDAnnotationLink ) {\r\n                PDAnnotationLink link = (PDAnnotationLink)annotation;\r\n                System.out.println(link.toString());\r\n                System.out.println(link.getDestination());\r\n                \r\n            }\r\n        }\r\n\r\n    }\r\n\r\nI want to extract the url of the hyperlink destination and the text of the hyperlink. How can one do this?\r\n\r\nThanks","title":"How to extract hyperlink information PDFBox","body":"<p>I am trying to extract the hyperlink information from a PDF using PDFBox but I am unsure how to get </p>\n\n<pre><code>for( Object p : pages ) {\n    PDPage page = (PDPage)p;\n\n    List&lt;?&gt; annotations = page.getAnnotations();\n    for( Object a : annotations ) {\n        PDAnnotation annotation = (PDAnnotation)a;\n\n        if( annotation instanceof PDAnnotationLink ) {\n            PDAnnotationLink link = (PDAnnotationLink)annotation;\n            System.out.println(link.toString());\n            System.out.println(link.getDestination());\n\n        }\n    }\n\n}\n</code></pre>\n\n<p>I want to extract the url of the hyperlink destination and the text of the hyperlink. How can one do this?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","push-notification","notifications","broadcastreceiver"],"owner":{"account_id":26014580,"reputation":1,"user_id":19723061,"display_name":"rcswanson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679424315,"creation_date":1679423967,"question_id":75805202,"body_markdown":"My android app stores Terms, Courses, and Assessments for those courses in a Room database structure. The Courses and Assessments each have getters for their start and end dates / due dates.\r\n\r\nThe app does not seem to run the OnReceive method as I&#39;ve checked the Logcat while running a log code.\r\n\r\nI have the correct user permissions and i have the broadcast receiver in the Manifest file.\r\n\r\nThis is my code that I have for notifications:\r\n\r\n\r\n```\r\n\r\npublic class NotificationReceiver extends BroadcastReceiver {\r\n\r\n    private static final String CHANNEL_ID = &quot;Alerts&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        // Retrieve the title and message from the intent extras\r\n        String title = intent.getStringExtra(&quot;title&quot;);\r\n        String message = intent.getStringExtra(&quot;message&quot;);\r\n\r\n        // Set the desired notification time\r\n        Calendar desiredCalendar = Calendar.getInstance();\r\n        desiredCalendar.set(Calendar.HOUR_OF_DAY, 13);\r\n        desiredCalendar.set(Calendar.MINUTE, 30);\r\n        desiredCalendar.set(Calendar.SECOND, 0);\r\n\r\n// Create the PendingIntent for the notification broadcast\r\n        Intent notificationIntent = new Intent(context, NotificationReceiver.class);\r\n        notificationIntent.putExtra(&quot;title&quot;, &quot;My Notification Title&quot;);\r\n        notificationIntent.putExtra(&quot;message&quot;, &quot;My Notification Message&quot;);\r\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n// Schedule the notification using AlarmManager\r\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, desiredCalendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\r\n\r\n\r\n        // Check if the current time matches the desired time\r\n        Calendar calendar = Calendar.getInstance();\r\n        int currentHour = calendar.get(Calendar.HOUR_OF_DAY);\r\n        int currentMinute = calendar.get(Calendar.MINUTE);\r\n    if (currentHour != desiredCalendar.get(Calendar.HOUR_OF_DAY) || currentMinute != desiredCalendar.get(Calendar.MINUTE)) {\r\n            return; // Do not show notification if current time does not match desired time\r\n        }\r\n\r\n        // Retrieve all courses from the database\r\n        AppDatabase db = AppDatabase.getInstance(context);\r\n        CourseDAO courseDao = db.courseDAO();\r\n        AssessmentDAO assessmentDao = db.assessmentDAO();\r\n        List&lt;CourseTable&gt; courses = courseDao.getAllCourses();\r\n        List&lt;AssessmentTable&gt; assessments = assessmentDao.getAllAssessments();\r\n\r\n        // Iterate over each course to check start and end dates\r\n        for (CourseTable course : courses) {\r\n            Date currentDate = new Date();\r\n            String startDateString = course.getStartDate();\r\n            String endDateString = course.getEndDate();\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n            try {\r\n                Date startDate = dateFormat.parse(startDateString);\r\n                Date endDate = dateFormat.parse(endDateString);\r\n                if (!currentDate.equals(startDate) &amp;&amp; !currentDate.equals(endDate)) {\r\n                    continue; // If current date does not match start or end date of course, skip to next course\r\n                }\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n                continue; // If there is a parse exception, skip to next course\r\n            }\r\n            // If current date matches start or end date of course, show notification\r\n            showNotification(context, course.getCourseTitle(), &quot;Course &quot; + course.getCourseTitle() + &quot; starts or ends today&quot;);\r\n        }\r\n\r\n        for (AssessmentTable assessment : assessments) {\r\n            Date currentDate = new Date();\r\n            String dueDateString = assessment.getDueDate();\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n            try {\r\n                Date dueDate = dateFormat.parse(dueDateString);\r\n                if (!currentDate.equals(dueDate)) {\r\n                    continue; // If current date does not match start or end date of course, skip to next course\r\n                }\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n                continue; // If there is a parse exception, skip to next course\r\n            }\r\n            // If current date matches start or end date of course, show notification\r\n            showNotification(context, assessment.getTitle(), &quot;Assessment &quot; + assessment.getTitle() + &quot; is due today&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    private void showNotification(Context context, String title, String message) {\r\n        // Create the notification\r\n        createNotificationChannel(context);\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context, CHANNEL_ID)\r\n                .setSmallIcon(R.drawable.notification)\r\n                .setContentTitle(title)\r\n                .setContentText(message)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT);\r\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\r\n        notificationManager.notify(0, builder.build());\r\n    }\r\n\r\n    private void createNotificationChannel(Context context) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            CharSequence name = context.getString(R.string.channel_name);\r\n            String description = context.getString(R.string.channel_description);\r\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\r\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\r\n            channel.setDescription(description);\r\n            NotificationManager notificationManager = context.getSystemService(NotificationManager.class);\r\n            notificationManager.createNotificationChannel(channel);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"How can I get my android app to send notifications from an app that works whether the app is closed or not?","body":"<p>My android app stores Terms, Courses, and Assessments for those courses in a Room database structure. The Courses and Assessments each have getters for their start and end dates / due dates.</p>\n<p>The app does not seem to run the OnReceive method as I've checked the Logcat while running a log code.</p>\n<p>I have the correct user permissions and i have the broadcast receiver in the Manifest file.</p>\n<p>This is my code that I have for notifications:</p>\n<pre><code>\npublic class NotificationReceiver extends BroadcastReceiver {\n\n    private static final String CHANNEL_ID = &quot;Alerts&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n        // Retrieve the title and message from the intent extras\n        String title = intent.getStringExtra(&quot;title&quot;);\n        String message = intent.getStringExtra(&quot;message&quot;);\n\n        // Set the desired notification time\n        Calendar desiredCalendar = Calendar.getInstance();\n        desiredCalendar.set(Calendar.HOUR_OF_DAY, 13);\n        desiredCalendar.set(Calendar.MINUTE, 30);\n        desiredCalendar.set(Calendar.SECOND, 0);\n\n// Create the PendingIntent for the notification broadcast\n        Intent notificationIntent = new Intent(context, NotificationReceiver.class);\n        notificationIntent.putExtra(&quot;title&quot;, &quot;My Notification Title&quot;);\n        notificationIntent.putExtra(&quot;message&quot;, &quot;My Notification Message&quot;);\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n// Schedule the notification using AlarmManager\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, desiredCalendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\n\n\n        // Check if the current time matches the desired time\n        Calendar calendar = Calendar.getInstance();\n        int currentHour = calendar.get(Calendar.HOUR_OF_DAY);\n        int currentMinute = calendar.get(Calendar.MINUTE);\n    if (currentHour != desiredCalendar.get(Calendar.HOUR_OF_DAY) || currentMinute != desiredCalendar.get(Calendar.MINUTE)) {\n            return; // Do not show notification if current time does not match desired time\n        }\n\n        // Retrieve all courses from the database\n        AppDatabase db = AppDatabase.getInstance(context);\n        CourseDAO courseDao = db.courseDAO();\n        AssessmentDAO assessmentDao = db.assessmentDAO();\n        List&lt;CourseTable&gt; courses = courseDao.getAllCourses();\n        List&lt;AssessmentTable&gt; assessments = assessmentDao.getAllAssessments();\n\n        // Iterate over each course to check start and end dates\n        for (CourseTable course : courses) {\n            Date currentDate = new Date();\n            String startDateString = course.getStartDate();\n            String endDateString = course.getEndDate();\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n            try {\n                Date startDate = dateFormat.parse(startDateString);\n                Date endDate = dateFormat.parse(endDateString);\n                if (!currentDate.equals(startDate) &amp;&amp; !currentDate.equals(endDate)) {\n                    continue; // If current date does not match start or end date of course, skip to next course\n                }\n            } catch (ParseException e) {\n                e.printStackTrace();\n                continue; // If there is a parse exception, skip to next course\n            }\n            // If current date matches start or end date of course, show notification\n            showNotification(context, course.getCourseTitle(), &quot;Course &quot; + course.getCourseTitle() + &quot; starts or ends today&quot;);\n        }\n\n        for (AssessmentTable assessment : assessments) {\n            Date currentDate = new Date();\n            String dueDateString = assessment.getDueDate();\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n            try {\n                Date dueDate = dateFormat.parse(dueDateString);\n                if (!currentDate.equals(dueDate)) {\n                    continue; // If current date does not match start or end date of course, skip to next course\n                }\n            } catch (ParseException e) {\n                e.printStackTrace();\n                continue; // If there is a parse exception, skip to next course\n            }\n            // If current date matches start or end date of course, show notification\n            showNotification(context, assessment.getTitle(), &quot;Assessment &quot; + assessment.getTitle() + &quot; is due today&quot;);\n        }\n    }\n\n\n    @SuppressLint(&quot;MissingPermission&quot;)\n    private void showNotification(Context context, String title, String message) {\n        // Create the notification\n        createNotificationChannel(context);\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context, CHANNEL_ID)\n                .setSmallIcon(R.drawable.notification)\n                .setContentTitle(title)\n                .setContentText(message)\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT);\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\n        notificationManager.notify(0, builder.build());\n    }\n\n    private void createNotificationChannel(Context context) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            CharSequence name = context.getString(R.string.channel_name);\n            String description = context.getString(R.string.channel_description);\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\n            channel.setDescription(description);\n            NotificationManager notificationManager = context.getSystemService(NotificationManager.class);\n            notificationManager.createNotificationChannel(channel);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","maven","pom.xml","junit5"],"comments":[{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":0,"creation_date":1679465189,"post_id":75805248,"comment_id":133725078,"body_markdown":"I recommend you go with the setup in https://github.com/junit-team/junit5-samples/blob/r5.9.2/junit5-jupiter-starter-maven/pom.xml. It’s simpler and using the latest versions.","body":"I recommend you go with the setup in <a href=\"https://github.com/junit-team/junit5-samples/blob/r5.9.2/junit5-jupiter-starter-maven/pom.xml\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5-samples/blob/r5.9.2/&hellip;</a>. It’s simpler and using the latest versions."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1679469241,"post_id":75805248,"comment_id":133725641,"body_markdown":"Your cropped screenshot shows JUnit JARs that are not added via Maven but via Eclipse directly. Does right-clicking the project and choosing _Maven &gt; Update Project..._ fix your issue (there should be then a _Maven Dependencies_ node). Otherwise, show an uncropped screenshot and your full `pom.xml` and your `.classpath` file.","body":"Your cropped screenshot shows JUnit JARs that are not added via Maven but via Eclipse directly. Does right-clicking the project and choosing <i>Maven &gt; Update Project...</i> fix your issue (there should be then a <i>Maven Dependencies</i> node). Otherwise, show an uncropped screenshot and your full <code>pom.xml</code> and your <code>.classpath</code> file."},{"owner":{"account_id":27574219,"reputation":1,"user_id":21044784,"display_name":"Lucas"},"score":0,"creation_date":1679568590,"post_id":75805248,"comment_id":133746381,"body_markdown":"Ah I see! Thank you very much for both of your suggestions; I&#39;ll try later and see if I can get it working.","body":"Ah I see! Thank you very much for both of your suggestions; I&#39;ll try later and see if I can get it working."}],"owner":{"account_id":27574219,"reputation":1,"user_id":21044784,"display_name":"Lucas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679424207,"creation_date":1679424207,"question_id":75805248,"body_markdown":"For context, this is a Java project in Eclipse, using Maven and JUnit5.\r\n\r\nSo, I have the dependencies listed in my pom:\r\n```\r\n &lt;dependencies&gt;\r\n    &lt;!--  Junit5 --&gt; \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n      &lt;version&gt;5.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-platform-runner&lt;/artifactId&gt;\r\n      &lt;version&gt;1.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n      &lt;version&gt;5.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n  &lt;/dependencies&gt;\r\n  \r\n  &lt;build&gt;\r\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n    \r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.0&lt;/version&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n              &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\r\n              &lt;version&gt;1.2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;configuration&gt;\r\n          &lt;additionalClasspathElements&gt;\r\n            &lt;additionalClasspathElement&gt;src/test/java/&lt;/additionalClasspathElement&gt;\r\n          &lt;/additionalClasspathElements&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    \r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;release&gt;14&lt;/release&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  \r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.0&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n```\r\n\r\nBut its still complaining that the API doesn&#39;t exist when I try running mvn test. My JUnit5 folder looks like:\r\n[JUnit5 Folder](https://i.stack.imgur.com/dAYcP.png)\r\n\r\nSo its definitely there, and I think the versions are all in order with what I have in the pom. Its not having any issues with the others, only with the API.\r\n\r\nAny help would be much appreciated.\r\nThank you very much.","title":"Maven &quot;package org.junit.jupiter.api does not exist&quot;","body":"<p>For context, this is a Java project in Eclipse, using Maven and JUnit5.</p>\n<p>So, I have the dependencies listed in my pom:</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;!--  Junit5 --&gt; \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n      &lt;version&gt;5.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-platform-runner&lt;/artifactId&gt;\n      &lt;version&gt;1.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n      &lt;version&gt;5.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n  &lt;/dependencies&gt;\n  \n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n    \n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.0&lt;/version&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n              &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n              &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\n              &lt;version&gt;1.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n        &lt;configuration&gt;\n          &lt;additionalClasspathElements&gt;\n            &lt;additionalClasspathElement&gt;src/test/java/&lt;/additionalClasspathElement&gt;\n          &lt;/additionalClasspathElements&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    \n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;14&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  \n  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.0&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n</code></pre>\n<p>But its still complaining that the API doesn't exist when I try running mvn test. My JUnit5 folder looks like:\n<a href=\"https://i.stack.imgur.com/dAYcP.png\" rel=\"nofollow noreferrer\">JUnit5 Folder</a></p>\n<p>So its definitely there, and I think the versions are all in order with what I have in the pom. Its not having any issues with the others, only with the API.</p>\n<p>Any help would be much appreciated.\nThank you very much.</p>\n"},{"tags":["java","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":14946817,"reputation":91,"user_id":10791845,"display_name":"atakansaltik"},"score":1,"creation_date":1656511003,"post_id":72789425,"comment_id":128591022,"body_markdown":"Take a look at this [link](https://stackoverflow.com/questions/4075991/post-request-via-resttemplate-in-json) I think this approach could work for your case","body":"Take a look at this <a href=\"https://stackoverflow.com/questions/4075991/post-request-via-resttemplate-in-json\">link</a> I think this approach could work for your case"}],"answers":[{"tags":[],"owner":{"account_id":28065380,"reputation":1,"user_id":21438846,"display_name":"RITICK SAINI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679315578,"creation_date":1679314917,"answer_id":75790212,"question_id":72789425,"body_markdown":"    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n            \r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(requestJson, \r\n    headers);\r\n    ResponseEntity&lt;String&gt; response = restTemplate.put(url, entity);","title":"How to wrap a String body and headers into a HttpEntity object for POST request in Spring Boot?","body":"<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_JSON);\n        \nHttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(requestJson, \nheaders);\nResponseEntity&lt;String&gt; response = restTemplate.put(url, entity);\n</code></pre>\n"}],"owner":{"account_id":11493427,"reputation":147,"user_id":10156536,"display_name":"Aditi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":541,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679424094,"creation_date":1656430647,"question_id":72789425,"body_markdown":"Here , what I am trying to achieve is the following \r\n\r\n1. I have already got the body of the request to be made using the @RequestBody annotation .. which is in a String Format\r\n2. The body contains many nested parameters .. it is also pretty huge .. something like\r\n\r\n  \r\n```\r\n{\r\n  name : XYZ\r\n  age : 21 \r\n  education : {\r\n    primaryschool : XYZ-ABC\r\n    secondary school : ABC-123\r\n    SubjectsChosen : {Science,Maths}\r\n}}\r\n```\r\nthis is still an oversimplification , the whole request body contains many nested parameters too\r\n\r\nWhat I am trying to achieve is to wrap up the String body along with Headers into a HttpRequestEntity, that I can send along with PostForObject.\r\n\r\nIs there a way to achieve this to directly convert the String .. without creating an explicit java class for each of the variables in the body as the body is quite huge ?\r\n","title":"How to wrap a String body and headers into a HttpEntity object for POST request in Spring Boot?","body":"<p>Here , what I am trying to achieve is the following</p>\n<ol>\n<li>I have already got the body of the request to be made using the @RequestBody annotation .. which is in a String Format</li>\n<li>The body contains many nested parameters .. it is also pretty huge .. something like</li>\n</ol>\n<pre><code>{\n  name : XYZ\n  age : 21 \n  education : {\n    primaryschool : XYZ-ABC\n    secondary school : ABC-123\n    SubjectsChosen : {Science,Maths}\n}}\n</code></pre>\n<p>this is still an oversimplification , the whole request body contains many nested parameters too</p>\n<p>What I am trying to achieve is to wrap up the String body along with Headers into a HttpRequestEntity, that I can send along with PostForObject.</p>\n<p>Is there a way to achieve this to directly convert the String .. without creating an explicit java class for each of the variables in the body as the body is quite huge ?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1679423736,"post_id":75805117,"comment_id":133718914,"body_markdown":"I&#39;m unclear on what you&#39;re asking, but I don&#39;t think `forEach` is relevant here. You could re-write this and have the exact same behavior with `for( x : myList )`.","body":"I&#39;m unclear on what you&#39;re asking, but I don&#39;t think <code>forEach</code> is relevant here. You could re-write this and have the exact same behavior with <code>for( x : myList )</code>."},{"owner":{"account_id":7611818,"reputation":637,"user_id":5772425,"display_name":"Sayyed Dawood"},"score":0,"creation_date":1679423872,"post_id":75805117,"comment_id":133718959,"body_markdown":"I have question about the definition of forEach as it can only take Consumer &lt;? super Integer&gt; however, in my code, it take a Consumer&lt;String&gt; which is not super of Integer.","body":"I have question about the definition of forEach as it can only take Consumer &lt;? super Integer&gt; however, in my code, it take a Consumer&lt;String&gt; which is not super of Integer."},{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":4,"creation_date":1679423946,"post_id":75805117,"comment_id":133718986,"body_markdown":"That `Consumer` is actually a `Consumer&lt;Integer&gt;`. It just converts `Integer x` to a `String` via `x.toString()` when adding each one to a `List&lt;String&gt;`.","body":"That <code>Consumer</code> is actually a <code>Consumer&lt;Integer&gt;</code>. It just converts <code>Integer x</code> to a <code>String</code> via <code>x.toString()</code> when adding each one to a <code>List&lt;String&gt;</code>."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1679424026,"post_id":75805117,"comment_id":133719020,"body_markdown":"Where exactly are you seeing `x` is not `Integer` at `ints.forEach(x -&gt;`?","body":"Where exactly are you seeing <code>x</code> is not <code>Integer</code> at <code>ints.forEach(x -&gt;</code>?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1679424134,"post_id":75805117,"comment_id":133719056,"body_markdown":"`x` in `ints.forEach` is an `Integer`, whereas `x` in the other is `String`.","body":"<code>x</code> in <code>ints.forEach</code> is an <code>Integer</code>, whereas <code>x</code> in the other is <code>String</code>."},{"owner":{"account_id":7611818,"reputation":637,"user_id":5772425,"display_name":"Sayyed Dawood"},"score":0,"creation_date":1679424324,"post_id":75805117,"comment_id":133719108,"body_markdown":"@Zircon so `x -&gt; {if(x != null) ... }` is the accept method for Consumer interface &lt;Integer&gt; taking `x` as int into `accept` method ? It is clear now, thank you.","body":"@Zircon so <code>x -&gt; {if(x != null) ... }</code> is the accept method for Consumer interface &lt;Integer&gt; taking <code>x</code> as int into <code>accept</code> method ? It is clear now, thank you."},{"owner":{"account_id":7611818,"reputation":637,"user_id":5772425,"display_name":"Sayyed Dawood"},"score":0,"creation_date":1679424482,"post_id":75805117,"comment_id":133719152,"body_markdown":"@OneCricketeer I had confusion as if forEach is taking String conumer in a list of Integer. It is clear now.","body":"@OneCricketeer I had confusion as if forEach is taking String conumer in a list of Integer. It is clear now."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1679424631,"post_id":75805117,"comment_id":133719191,"body_markdown":"You can replace the lambda to `new Consumer&lt;Integer&gt; void accept(Integer x)` to make it more clear","body":"You can replace the lambda to <code>new Consumer&lt;Integer&gt; void accept(Integer x)</code> to make it more clear"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1679430012,"post_id":75805117,"comment_id":133720410,"body_markdown":"@OneCricketeer Yes, or just use `ints.forEach((Integer x) -&gt; `...","body":"@OneCricketeer Yes, or just use <code>ints.forEach((Integer x) -&gt; </code>..."}],"owner":{"account_id":7611818,"reputation":637,"user_id":5772425,"display_name":"Sayyed Dawood"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679424059,"creation_date":1679423437,"question_id":75805117,"body_markdown":"I have a program about generics and the ? super wildcard. So forEach as per oracle has the definition as\r\n\r\n&gt; default void forEach(Consumer&lt;? super T&gt; action)\r\n\r\nNow in the code below, why would the forEach for ints take String list as String is not super of Integer.\r\n\r\n \r\n\r\n    import java.util.*;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; nonNullStrings = new ArrayList&lt;&gt;();\r\n            List&lt;Integer&gt; ints = Arrays.asList(1, 2, 3);\r\n            List&lt;String&gt; strings = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\r\n            \r\n            ints.forEach(x -&gt; {\r\n                if (x != null) nonNullStrings.add(x.toString());\r\n            }); \r\n            strings.forEach(x -&gt; {\r\n                if(x != null) nonNullStrings.add(x);\r\n            });\r\n    \r\n            System.out.println(nonNullStrings);\r\n        }\r\n    }\r\n\r\nMy question is about the definition of forEach as it can only take `Consumer&lt;? super Integer&gt;` for `ints.forEach` however, in my code, `ints.forEach` takes a `Consumer&lt;String&gt;` which is not super of `Integer`.\r\n","title":"forEach for a list&lt;Integer&gt; takes a consumer of type list&lt;String&gt;, however forEach must only take super of Integer as a consumer?","body":"<p>I have a program about generics and the ? super wildcard. So forEach as per oracle has the definition as</p>\n<blockquote>\n<p>default void forEach(Consumer&lt;? super T&gt; action)</p>\n</blockquote>\n<p>Now in the code below, why would the forEach for ints take String list as String is not super of Integer.</p>\n<pre><code>import java.util.*;\n\npublic class App {\n    public static void main(String[] args) {\n        List&lt;String&gt; nonNullStrings = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; ints = Arrays.asList(1, 2, 3);\n        List&lt;String&gt; strings = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n        \n        ints.forEach(x -&gt; {\n            if (x != null) nonNullStrings.add(x.toString());\n        }); \n        strings.forEach(x -&gt; {\n            if(x != null) nonNullStrings.add(x);\n        });\n\n        System.out.println(nonNullStrings);\n    }\n}\n</code></pre>\n<p>My question is about the definition of forEach as it can only take <code>Consumer&lt;? super Integer&gt;</code> for <code>ints.forEach</code> however, in my code, <code>ints.forEach</code> takes a <code>Consumer&lt;String&gt;</code> which is not super of <code>Integer</code>.</p>\n"},{"tags":["java","android","dart","flutter"],"answers":[{"tags":[],"owner":{"account_id":879403,"reputation":632265,"user_id":217408,"accept_rate":97,"display_name":"G&#252;nter Z&#246;chbauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1548423005,"creation_date":1548423005,"answer_id":54366286,"question_id":54365439,"body_markdown":"You can not pass a function. \r\n\r\nYou can create a map from a function name to a function reference and then pass the function name and look up the function in by name in the map and call it.\r\n\r\nYou also can&#39;t pass a POJO.\r\n\r\nYou need to serialize it to JSON (or some other supported format) and deserialize it on the other side of the channel. For that you need to have to POJO class implemented in Dart and in Java.\r\n\r\nPackages like protobuf or flatbuffer allow to geneerate code for different languages based on an reduced language to specify the data structure.","title":"How to pass functions as arguments from Dart/Flutter to Android native code?","body":"<p>You can not pass a function. </p>\n\n<p>You can create a map from a function name to a function reference and then pass the function name and look up the function in by name in the map and call it.</p>\n\n<p>You also can't pass a POJO.</p>\n\n<p>You need to serialize it to JSON (or some other supported format) and deserialize it on the other side of the channel. For that you need to have to POJO class implemented in Dart and in Java.</p>\n\n<p>Packages like protobuf or flatbuffer allow to geneerate code for different languages based on an reduced language to specify the data structure.</p>\n"}],"owner":{"account_id":2250781,"reputation":7105,"user_id":1983072,"accept_rate":41,"display_name":"bbozo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2375,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54366286,"answer_count":1,"score":2,"last_activity_date":1679423855,"creation_date":1548419652,"question_id":54365439,"body_markdown":"I&#39;d like to create a Java-based SDK that can be invoked from Flutter, the Flutter side needs to plug into the SDK by providing callbacks to be executed at different stages of the processing, ideally something like:\r\n\r\n    Future&lt;Result&gt; = doPayment(\r\n      amount: 100.00, \r\n      currency: &#39;USD&#39;, \r\n      onPasscodeEntry: () =&gt; _renderInputBox(), \r\n      onValidation: () =&gt; _doValidation()\r\n    );\r\n\r\nthe processing itself takes some time etc so a `Future&lt;PaymentResult&gt;` pattern makes sense, the application should react to some points of the processing, so it makes sense to pass in callbacks.\r\n\r\nProblems:\r\n\r\n1. how to pass functions to Java code? [As far as I can tell all the Java-passable method arguments in Flutter are serializable-ish objects](https://github.com/flutter/engine/blob/master/shell/platform/android/io/flutter/plugin/common/MethodCall.java#L66)\r\n\r\n2. (less critical/optional) how to return a POJO and handle it in Dart? Judging from [the specs](https://docs.flutter.io/flutter/services/StandardMessageCodec-class.html) I should encode (within Java) the result in a `ArrayList`/`HashMap` or as a `JSON` string and then create the equivalent constructor in Dart that takes in `List`/`Map` ? This seems a bit unwieldy, so I&#39;m asking if there&#39;s a simpler way, preferably without maintaining a Java &amp; Dart variants of the same object\r\n","title":"How to pass functions as arguments from Dart/Flutter to Android native code?","body":"<p>I'd like to create a Java-based SDK that can be invoked from Flutter, the Flutter side needs to plug into the SDK by providing callbacks to be executed at different stages of the processing, ideally something like:</p>\n\n<pre><code>Future&lt;Result&gt; = doPayment(\n  amount: 100.00, \n  currency: 'USD', \n  onPasscodeEntry: () =&gt; _renderInputBox(), \n  onValidation: () =&gt; _doValidation()\n);\n</code></pre>\n\n<p>the processing itself takes some time etc so a <code>Future&lt;PaymentResult&gt;</code> pattern makes sense, the application should react to some points of the processing, so it makes sense to pass in callbacks.</p>\n\n<p>Problems:</p>\n\n<ol>\n<li><p>how to pass functions to Java code? <a href=\"https://github.com/flutter/engine/blob/master/shell/platform/android/io/flutter/plugin/common/MethodCall.java#L66\" rel=\"nofollow noreferrer\">As far as I can tell all the Java-passable method arguments in Flutter are serializable-ish objects</a></p></li>\n<li><p>(less critical/optional) how to return a POJO and handle it in Dart? Judging from <a href=\"https://docs.flutter.io/flutter/services/StandardMessageCodec-class.html\" rel=\"nofollow noreferrer\">the specs</a> I should encode (within Java) the result in a <code>ArrayList</code>/<code>HashMap</code> or as a <code>JSON</code> string and then create the equivalent constructor in Dart that takes in <code>List</code>/<code>Map</code> ? This seems a bit unwieldy, so I'm asking if there's a simpler way, preferably without maintaining a Java &amp; Dart variants of the same object</p></li>\n</ol>\n"},{"tags":["java","jackson","jackson-databind","jackson-dataformat-xml","jackson-modules"],"owner":{"account_id":16687316,"reputation":1,"user_id":12060832,"display_name":"Cam Milach"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679423852,"creation_date":1679423852,"question_id":75805182,"body_markdown":"I have an abstract Java class `AppSegment` and two subclasses `DnAppSegment` and `IpAppSegment`. The base class has a member `Set&lt;Integer&gt; ports`. Using Jackson libraries to (de)serialize to and from XML, when deserializing the XML string, I&#39;m hitting exceptions for AppSegment objects that have one or more ports defined:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: \r\nCannot deserialize value of type `java.util.HashSet&lt;java.lang.Integer&gt;` from Object value (token `JsonToken.START_OBJECT`)\r\nat [Source: (StringReader); line: 1, column: 57] (through reference chain: &lt;package&gt;.DnAppSegment[&quot;port&quot;])\r\n```\r\nI&#39;m hoping someone can advise that I&#39;m missing something. Based on the exception output, it appears that Deduction is correctly identifying the subtype to use. \r\nBase class:\r\n```\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\r\n@JsonSubTypes({\r\n    @JsonSubTypes.Type(IpAppSegment.class),\r\n    @JsonSubTypes.Type(DnAppSegment.class)\r\n})\r\n@JacksonXmlRootElement(localName = &quot;segment&quot;)\r\npublic abstract class AppSegment {\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    @JacksonXmlProperty(localName = &quot;port&quot;)\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    private Set&lt;Integer&gt; ports;\r\n\r\n    protected transient SegmentType type;\r\n\r\n    protected AppSegment() {}\r\n\r\n    public String toXmlString() throws JsonProcessingException {\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        xmlMapper.configure(MapperFeature.PROPAGATE_TRANSIENT_MARKER, true);\r\n        return xmlMapper.writeValueAsString(this);\r\n    }\r\n\r\n    public static AppSegment fromXmlString(String xml) throws JsonProcessingException {\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        return xmlMapper.readValue(xml, AppSegment.class);\r\n    }\r\n}\r\n```\r\nSubclasses:\r\n\r\n```\r\npublic class DnAppSegment extends AppSegment {\r\n    @JacksonXmlProperty(localName = &quot;dn&quot;)\r\n    private String host;\r\n\r\n    private DnAppSegment() {\r\n        this.type = SegmentType.DN;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class IpAppSegment extends AppSegment {\r\n    @JacksonXmlProperty(localName = &quot;addr&quot;)\r\n    private String address;\r\n\r\n    private IpAppSegment() {\r\n        this.type = SegmentType.IP;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nWhen deserializing the following XML string, I hit the exception above:\r\n```\r\n&lt;segment&gt;&lt;port&gt;8443&lt;/port&gt;&lt;port&gt;443&lt;/port&gt;&lt;dn&gt;*nmwco.com&lt;/dn&gt;&lt;/segment&gt;\r\n```\r\nIf I remove the `JsonTypeInfo` and `JsonSubTypes` annotations and replace `fromXmlString` method as follows, the object deserializes correctly with no problem:\r\n```\r\n    public static AppSegment fromXmlString(String xml) throws JsonProcessingException {\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        JsonNode tree = xmlMapper.readTree(xml);\r\n        if (tree.has(&quot;dn&quot;)) {\r\n            return xmlMapper.readValue(xml, DnAppSegment.class);\r\n        } else if (tree.has(&quot;addr&quot;)) {\r\n            return xmlMapper.readValue(xml, IpAppSegment.class);\r\n        }\r\n        return xmlMapper.readValue(xml, AppSegment.class);\r\n    }\r\n```\r\nThis feels like a bug to me, but I&#39;m hoping someone here can help me spot the dumb thing I did before raising it with Jackson. Note: also occurs when XML wrapping is not disabled on the ports node.","title":"Java: Advice using deduction for type info when deserializing XML of polymorphic types with Jackson libraries","body":"<p>I have an abstract Java class <code>AppSegment</code> and two subclasses <code>DnAppSegment</code> and <code>IpAppSegment</code>. The base class has a member <code>Set&lt;Integer&gt; ports</code>. Using Jackson libraries to (de)serialize to and from XML, when deserializing the XML string, I'm hitting exceptions for AppSegment objects that have one or more ports defined:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.MismatchedInputException: \nCannot deserialize value of type `java.util.HashSet&lt;java.lang.Integer&gt;` from Object value (token `JsonToken.START_OBJECT`)\nat [Source: (StringReader); line: 1, column: 57] (through reference chain: &lt;package&gt;.DnAppSegment[&quot;port&quot;])\n</code></pre>\n<p>I'm hoping someone can advise that I'm missing something. Based on the exception output, it appears that Deduction is correctly identifying the subtype to use.\nBase class:</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\n@JsonSubTypes({\n    @JsonSubTypes.Type(IpAppSegment.class),\n    @JsonSubTypes.Type(DnAppSegment.class)\n})\n@JacksonXmlRootElement(localName = &quot;segment&quot;)\npublic abstract class AppSegment {\n    @JacksonXmlElementWrapper(useWrapping = false)\n    @JacksonXmlProperty(localName = &quot;port&quot;)\n    @JsonInclude(JsonInclude.Include.NON_NULL)\n    private Set&lt;Integer&gt; ports;\n\n    protected transient SegmentType type;\n\n    protected AppSegment() {}\n\n    public String toXmlString() throws JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        xmlMapper.configure(MapperFeature.PROPAGATE_TRANSIENT_MARKER, true);\n        return xmlMapper.writeValueAsString(this);\n    }\n\n    public static AppSegment fromXmlString(String xml) throws JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        return xmlMapper.readValue(xml, AppSegment.class);\n    }\n}\n</code></pre>\n<p>Subclasses:</p>\n<pre><code>public class DnAppSegment extends AppSegment {\n    @JacksonXmlProperty(localName = &quot;dn&quot;)\n    private String host;\n\n    private DnAppSegment() {\n        this.type = SegmentType.DN;\n    }\n}\n</code></pre>\n<pre><code>public class IpAppSegment extends AppSegment {\n    @JacksonXmlProperty(localName = &quot;addr&quot;)\n    private String address;\n\n    private IpAppSegment() {\n        this.type = SegmentType.IP;\n    }\n}\n</code></pre>\n<p>When deserializing the following XML string, I hit the exception above:</p>\n<pre><code>&lt;segment&gt;&lt;port&gt;8443&lt;/port&gt;&lt;port&gt;443&lt;/port&gt;&lt;dn&gt;*nmwco.com&lt;/dn&gt;&lt;/segment&gt;\n</code></pre>\n<p>If I remove the <code>JsonTypeInfo</code> and <code>JsonSubTypes</code> annotations and replace <code>fromXmlString</code> method as follows, the object deserializes correctly with no problem:</p>\n<pre><code>    public static AppSegment fromXmlString(String xml) throws JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        JsonNode tree = xmlMapper.readTree(xml);\n        if (tree.has(&quot;dn&quot;)) {\n            return xmlMapper.readValue(xml, DnAppSegment.class);\n        } else if (tree.has(&quot;addr&quot;)) {\n            return xmlMapper.readValue(xml, IpAppSegment.class);\n        }\n        return xmlMapper.readValue(xml, AppSegment.class);\n    }\n</code></pre>\n<p>This feels like a bug to me, but I'm hoping someone here can help me spot the dumb thing I did before raising it with Jackson. Note: also occurs when XML wrapping is not disabled on the ports node.</p>\n"},{"tags":["java","java-8","spring-jdbc","jdbctemplate","namedparameterjdbctemplate"],"owner":{"account_id":397301,"reputation":544,"user_id":761348,"accept_rate":71,"display_name":"Jayavinoth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679423149,"creation_date":1679423149,"question_id":75805062,"body_markdown":"How to combine 2 MapSqlParameterSource in Spring boot Java?\r\n\r\n**Not Working:**\r\n\r\n    private MapSqlParameterSource mapFn1(Object A) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapSql.addValue(&quot;name&quot;, A.getName);\r\n      mapSql.addValue(&quot;age&quot;, A.getAge);\r\n      retrun mapSql;\r\n    }\r\n    \r\n    private MapSqlParameterSource mapFn2(Object B) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapSql.addValue(&quot;education&quot;, B.getEducation);\r\n      mapSql.addValue(&quot;address&quot;, B.getAddress);\r\n      retrun mapSql;\r\n    }\r\n    \r\n    private MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapSql = mapFn1(A);\r\n      mapSql = mapFn2(B);\r\n      return mapSql;\r\n    }\r\n\r\n**Solution 1:**\r\n    \r\n    private MapSqlParameterSource mapFn1(Object A, MapSqlParameterSource mapSql) {\r\n      mapSql.addValue(&quot;name&quot;, A.getName);\r\n      mapSql.addValue(&quot;age&quot;, A.getAge);\r\n      retrun mapSql;\r\n    }\r\n    \r\n    private MapSqlParameterSource mapFn2(Object B, MapSqlParameterSource mapSql) {\r\n      mapSql.addValue(&quot;education&quot;, B.getEducation);\r\n      mapSql.addValue(&quot;address&quot;, B.getAddress);\r\n      retrun mapSql;\r\n    }\r\n    \r\n    private MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapFn1(A, mapSql);\r\n      mapFn2(B, mapSql);\r\n      return mapSql;\r\n    }\r\n\r\n**Solution 2:**\r\n    \r\n    private MapSqlParameterSource mapFn1(Object A, Object B) {\r\n      if (A != null) {\r\n        mapSql.addValue(&quot;name&quot;, A.getName);\r\n        mapSql.addValue(&quot;age&quot;, A.getAge);\r\n      }\r\n      if (B != null) {\r\n        mapSql.addValue(&quot;education&quot;, B.getEducation);\r\n        mapSql.addValue(&quot;address&quot;, B.getAddress);\r\n        retrun mapSql;\r\n      }\r\n    }\r\n    \r\n    private MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapFn1(A, B);\r\n      return mapSql;\r\n    }\r\n    \r\n    private MapSqlParameterSource getMapFn1Fn2(Object A) {\r\n      MapSqlParameterSource mapSql = new MapSqlParameterSource();\r\n      mapFn1(A, null);\r\n      return mapSql;\r\n    }\r\n\r\nBoth solution 1 and 2 are working as expected but not sure whether its a recommended way to implement. Please suggest any better solution or recommend Solution 1 or 2 is better.\r\n        \r\n        \r\n\r\n","title":"Combine 2 MapSqlParameterSource in Spring boot Java","body":"<p>How to combine 2 MapSqlParameterSource in Spring boot Java?</p>\n<p><strong>Not Working:</strong></p>\n<pre><code>private MapSqlParameterSource mapFn1(Object A) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapSql.addValue(&quot;name&quot;, A.getName);\n  mapSql.addValue(&quot;age&quot;, A.getAge);\n  retrun mapSql;\n}\n\nprivate MapSqlParameterSource mapFn2(Object B) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapSql.addValue(&quot;education&quot;, B.getEducation);\n  mapSql.addValue(&quot;address&quot;, B.getAddress);\n  retrun mapSql;\n}\n\nprivate MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapSql = mapFn1(A);\n  mapSql = mapFn2(B);\n  return mapSql;\n}\n</code></pre>\n<p><strong>Solution 1:</strong></p>\n<pre><code>private MapSqlParameterSource mapFn1(Object A, MapSqlParameterSource mapSql) {\n  mapSql.addValue(&quot;name&quot;, A.getName);\n  mapSql.addValue(&quot;age&quot;, A.getAge);\n  retrun mapSql;\n}\n\nprivate MapSqlParameterSource mapFn2(Object B, MapSqlParameterSource mapSql) {\n  mapSql.addValue(&quot;education&quot;, B.getEducation);\n  mapSql.addValue(&quot;address&quot;, B.getAddress);\n  retrun mapSql;\n}\n\nprivate MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapFn1(A, mapSql);\n  mapFn2(B, mapSql);\n  return mapSql;\n}\n</code></pre>\n<p><strong>Solution 2:</strong></p>\n<pre><code>private MapSqlParameterSource mapFn1(Object A, Object B) {\n  if (A != null) {\n    mapSql.addValue(&quot;name&quot;, A.getName);\n    mapSql.addValue(&quot;age&quot;, A.getAge);\n  }\n  if (B != null) {\n    mapSql.addValue(&quot;education&quot;, B.getEducation);\n    mapSql.addValue(&quot;address&quot;, B.getAddress);\n    retrun mapSql;\n  }\n}\n\nprivate MapSqlParameterSource getMapFn1Fn2(Object A, Object B) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapFn1(A, B);\n  return mapSql;\n}\n\nprivate MapSqlParameterSource getMapFn1Fn2(Object A) {\n  MapSqlParameterSource mapSql = new MapSqlParameterSource();\n  mapFn1(A, null);\n  return mapSql;\n}\n</code></pre>\n<p>Both solution 1 and 2 are working as expected but not sure whether its a recommended way to implement. Please suggest any better solution or recommend Solution 1 or 2 is better.</p>\n"},{"tags":["java"],"owner":{"account_id":28078758,"reputation":13,"user_id":21450184,"display_name":"Muhammed Temur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679423129,"answer_count":0,"score":0,"last_activity_date":1679423038,"creation_date":1679423038,"question_id":75805045,"body_markdown":"I need to use the input which is a string to &quot;identify&quot; an already declared variable. If &quot;tripple&quot; is inputted than java need to somehow get that the variable tripple is meaned by the input &quot;tripple&quot;. I am doing that because I need to add its value(3, because int tripple = 3) to another variable(Integer). \r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    Scanner scan = new Scanner();\r\n    int double = 2\r\n    int tripple = 3\r\n    int startpos = 0 \r\n\r\n    String inputting = scan.next();  //input is for example ---&gt; tripple \r\n    startpos = startpos + (???)\r\n    \r\n    //After inputting &quot;tripple&quot;, startpos should be 3\r\n    \r\n    System.out.println(startpos); //---&gt; 3 \r\n  }\r\n}\r\n```\r\n\r\n\r\nI tried to get an input and adress the variable that has the same name as the input which is a string. I didn&#39;t know what to do, so I asked my teacher and she also do not know what to do so I am asking it to you.","title":"How does Java compare an inputted string with the name of a variable?","body":"<p>I need to use the input which is a string to &quot;identify&quot; an already declared variable. If &quot;tripple&quot; is inputted than java need to somehow get that the variable tripple is meaned by the input &quot;tripple&quot;. I am doing that because I need to add its value(3, because int tripple = 3) to another variable(Integer).</p>\n<pre><code>import java.util.Scanner;\n\nclass Main {\n  public static void main(String[] args) {\n    Scanner scan = new Scanner();\n    int double = 2\n    int tripple = 3\n    int startpos = 0 \n\n    String inputting = scan.next();  //input is for example ---&gt; tripple \n    startpos = startpos + (???)\n    \n    //After inputting &quot;tripple&quot;, startpos should be 3\n    \n    System.out.println(startpos); //---&gt; 3 \n  }\n}\n</code></pre>\n<p>I tried to get an input and adress the variable that has the same name as the input which is a string. I didn't know what to do, so I asked my teacher and she also do not know what to do so I am asking it to you.</p>\n"},{"tags":["java","angular","maven","spring-boot","cors"],"comments":[{"owner":{"account_id":197590,"reputation":83537,"user_id":441757,"accept_rate":100,"display_name":"sideshowbarker"},"score":1,"creation_date":1560342515,"post_id":56560927,"comment_id":99703905,"body_markdown":"Change your SimpleCORSFilter.java code to have `response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization, Content-Type, Accept, X-Requested-With, remember-me&quot;)`. That, add `Authorization` to the value. The error message, *“Request header field authorization is not allowed by Access-Control-Allow-Headers in preflight response”* is exactly caused by the fact the code doesn’t include `Authorization` in the value it’s setting for the Access-Control-Allow-Headers response header.","body":"Change your SimpleCORSFilter.java code to have <code>response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization, Content-Type, Accept, X-Requested-With, remember-me&quot;)</code>. That, add <code>Authorization</code> to the value. The error message, <i>“Request header field authorization is not allowed by Access-Control-Allow-Headers in preflight response”</i> is exactly caused by the fact the code doesn’t include <code>Authorization</code> in the value it’s setting for the Access-Control-Allow-Headers response header."},{"owner":{"account_id":12071204,"reputation":145,"user_id":8826507,"display_name":"Sophia"},"score":0,"creation_date":1560401267,"post_id":56560927,"comment_id":99725145,"body_markdown":"@sideshowbarker yes, it worked. Thanks a lot!","body":"@sideshowbarker yes, it worked. Thanks a lot!"}],"answers":[{"tags":[],"owner":{"account_id":9635952,"reputation":5693,"user_id":7152019,"display_name":"Vikas Sachdeva"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560340020,"creation_date":1560340020,"answer_id":56561516,"question_id":56560927,"body_markdown":"This error is coming because request contains some additional headers which are not mentioned in your CORS filter configuration.\r\n\r\nFor adding CORS support during development, I generally prefer adding below spring configuration file. You need to have `app.cors.enabled` key with value `true` in your application configuration file (application.properties) also to make it work.\r\n\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.CorsRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    @ConditionalOnProperty(name = &quot;app.cors.enabled&quot;)\r\n    /**\r\n    * If the value of the key &quot;app.cors.enabled&quot; is true in application.properties file,\r\n    * then only this configuration will be enabled.\r\n    * \r\n    */\r\n    public class SpringConfig {\r\n    \r\n    \t@Bean\r\n    \tpublic WebMvcConfigurer corsConfigurer() {\r\n    \t\treturn new WebMvcConfigurer() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n    \t\t\t\tregistry.addMapping(&quot;/*&quot;).allowedHeaders(&quot;*&quot;).allowedOrigins(&quot;*&quot;).allowedMethods(&quot;*&quot;)\r\n    \t\t\t\t\t\t.allowCredentials(true);\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    }\r\n\r\nMake sure for production environment, you remove `app.cors.enabled` key from your configuration file or set its value to `false`. If you need CORS support in production environment also, make sure you use fixed values instead of allowing all values using `*`\r\n\r\nOnce you do that, there is no need of `@CrossOrigin` annotation on your controller.","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>This error is coming because request contains some additional headers which are not mentioned in your CORS filter configuration.</p>\n\n<p>For adding CORS support during development, I generally prefer adding below spring configuration file. You need to have <code>app.cors.enabled</code> key with value <code>true</code> in your application configuration file (application.properties) also to make it work.</p>\n\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\n@ConditionalOnProperty(name = \"app.cors.enabled\")\n/**\n* If the value of the key \"app.cors.enabled\" is true in application.properties file,\n* then only this configuration will be enabled.\n* \n*/\npublic class SpringConfig {\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(\"/*\").allowedHeaders(\"*\").allowedOrigins(\"*\").allowedMethods(\"*\")\n                        .allowCredentials(true);\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Make sure for production environment, you remove <code>app.cors.enabled</code> key from your configuration file or set its value to <code>false</code>. If you need CORS support in production environment also, make sure you use fixed values instead of allowing all values using <code>*</code></p>\n\n<p>Once you do that, there is no need of <code>@CrossOrigin</code> annotation on your controller.</p>\n"},{"tags":[],"owner":{"account_id":9725157,"reputation":2553,"user_id":7212399,"accept_rate":100,"display_name":"Pratik Ambani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1560340903,"creation_date":1560340583,"answer_id":56561689,"question_id":56560927,"body_markdown":"When you are using Spring Boot, I would suggest you to add a **CorsFilter** bean in your configurations instead of introducing a CORS filter. Let me know if this helps. \r\n\r\n\r\n    @Bean\r\n        public CorsFilter corsFilter() {\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.addAllowedOrigin(&quot;*&quot;);\r\n            config.addAllowedHeader(&quot;*&quot;);\r\n            config.addAllowedMethod(&quot;OPTIONS&quot;);\r\n            config.addAllowedMethod(&quot;GET&quot;);\r\n            config.addAllowedMethod(&quot;POST&quot;);\r\n            config.addAllowedMethod(&quot;PUT&quot;);\r\n            config.addAllowedMethod(&quot;DELETE&quot;);\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            return new CorsFilter(source);\r\n        }\r\n     \r\n\r\n&gt; Happy Coding :)","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>When you are using Spring Boot, I would suggest you to add a <strong>CorsFilter</strong> bean in your configurations instead of introducing a CORS filter. Let me know if this helps. </p>\n\n<pre><code>@Bean\n    public CorsFilter corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(\"*\");\n        config.addAllowedHeader(\"*\");\n        config.addAllowedMethod(\"OPTIONS\");\n        config.addAllowedMethod(\"GET\");\n        config.addAllowedMethod(\"POST\");\n        config.addAllowedMethod(\"PUT\");\n        config.addAllowedMethod(\"DELETE\");\n        source.registerCorsConfiguration(\"/**\", config);\n        return new CorsFilter(source);\n    }\n</code></pre>\n\n<blockquote>\n  <p>Happy Coding :)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4569994,"reputation":1447,"user_id":3709922,"accept_rate":33,"display_name":"Jignesh M. Khatri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560342041,"creation_date":1560342041,"answer_id":56562110,"question_id":56560927,"body_markdown":"Issue is with the ordering of filters with spring boot. Add this annotation on your `CORSFilter`: `@Order(Ordered.HIGHEST_PRECEDENCE)`.\r\n\r\nThis will make sure that your `CORSFilter` has highest precendence of execution (most prior).","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>Issue is with the ordering of filters with spring boot. Add this annotation on your <code>CORSFilter</code>: <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code>.</p>\n\n<p>This will make sure that your <code>CORSFilter</code> has highest precendence of execution (most prior).</p>\n"},{"tags":[],"owner":{"account_id":14036119,"reputation":47,"user_id":10138772,"display_name":"Anupam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598363577,"creation_date":1598363249,"answer_id":63580284,"question_id":56560927,"body_markdown":"Please add a servlet filter and add the following code. \r\nIt should work.\r\nAdding **&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;** is mandatory.\r\nCreation of **proxy.conf.json** is not needed.\r\n\r\n    @Component\r\n@Order(1)\r\npublic class MyProjectFilter implements Filter {\r\n\r\n\t@Override\r\n\tpublic void doFilter(ServletRequest req, ServletResponse res,\r\n\t\t\tFilterChain chain) throws IOException, ServletException {\r\n\t\tHttpServletResponse response = (HttpServletResponse) res;\r\n\t\tresponse.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n\t\tresponse.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;Content-Disposition&quot;);\r\n\t\tresponse.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET,POST,PATCH,DELETE,PUT,OPTIONS&quot;);\r\n\t\tresponse.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\r\n\t\tresponse.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;86400&quot;);\r\n\t\tchain.doFilter(req, res);\r\n\t}\r\n\r\n}","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>Please add a servlet filter and add the following code.\nIt should work.\nAdding <strong>&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;</strong> is mandatory.\nCreation of <strong>proxy.conf.json</strong> is not needed.</p>\n<pre><code>@Component\n</code></pre>\n<p>@Order(1)\npublic class MyProjectFilter implements Filter {</p>\n<pre><code>@Override\npublic void doFilter(ServletRequest req, ServletResponse res,\n        FilterChain chain) throws IOException, ServletException {\n    HttpServletResponse response = (HttpServletResponse) res;\n    response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n    response.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;Content-Disposition&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET,POST,PATCH,DELETE,PUT,OPTIONS&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n    response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;86400&quot;);\n    chain.doFilter(req, res);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":22091685,"reputation":251,"user_id":16349670,"display_name":"Nimasha Madhushani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667691542,"creation_date":1667691542,"answer_id":74332244,"question_id":56560927,"body_markdown":"Because of the spring security, this might happen. You can build a class and include the below-mentioned code. \r\n\r\n        package com.myapp.springboot.configs;\r\n        import org.springframework.context.annotation.Configuration;\r\n        import org.springframework.web.servlet.config.annotation.CorsRegistry;\r\n        import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n        \r\n        @Configuration\r\n        public class WebMvcConfiguration implements WebMvcConfigurer {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/*&quot;).\r\n                allowedOrigins(&quot;*&quot;).\r\n                allowedMethods(&quot;*&quot;).\r\n                allowedHeaders(&quot;*&quot;).\r\n                allowCredentials(true);\r\n            }\r\n        }","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>Because of the spring security, this might happen. You can build a class and include the below-mentioned code.</p>\n<pre><code>    package com.myapp.springboot.configs;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.web.servlet.config.annotation.CorsRegistry;\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n    \n    @Configuration\n    public class WebMvcConfiguration implements WebMvcConfigurer {\n        @Override\n        public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/*&quot;).\n            allowedOrigins(&quot;*&quot;).\n            allowedMethods(&quot;*&quot;).\n            allowedHeaders(&quot;*&quot;).\n            allowCredentials(true);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26342492,"reputation":1,"user_id":20001379,"display_name":"Willy Kipchumba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679422549,"creation_date":1679422549,"answer_id":75804981,"question_id":56560927,"body_markdown":"    @Bean\r\n    public WebMvcConfigurer corsConfigurer()\r\n    {\r\n       String[] allowDomains = new String[2];\r\n       allowDomains[0] = &quot;http://localhost:4200&quot;;\r\n       allowDomains[1] = &quot;http://localhost:8080&quot;;\r\n    \r\n       System.out.println(&quot;CORS configuration....&quot;);\r\n       return new WebMvcConfigurer() {\r\n          @Override\r\n          public void addCorsMappings(CorsRegistry registry) {\r\n             registry.addMapping(&quot;/**&quot;).allowedOrigins(allowDomains);\r\n          }\r\n       };\r\n    }","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<pre><code>@Bean\npublic WebMvcConfigurer corsConfigurer()\n{\n   String[] allowDomains = new String[2];\n   allowDomains[0] = &quot;http://localhost:4200&quot;;\n   allowDomains[1] = &quot;http://localhost:8080&quot;;\n\n   System.out.println(&quot;CORS configuration....&quot;);\n   return new WebMvcConfigurer() {\n      @Override\n      public void addCorsMappings(CorsRegistry registry) {\n         registry.addMapping(&quot;/**&quot;).allowedOrigins(allowDomains);\n      }\n   };\n}\n</code></pre>\n"}],"owner":{"account_id":12071204,"reputation":145,"user_id":8826507,"display_name":"Sophia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8432,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":56561689,"answer_count":6,"score":5,"last_activity_date":1679422549,"creation_date":1560338290,"question_id":56560927,"body_markdown":"I am trying to connect angular 6 project with spring boot application. When I run angular project, it constantly gives this error, although I have installed all the dependencies and imports.\r\n\r\nI have used following line of code in controller class.\r\n\r\n&gt; @CrossOrigin(origins = &quot;http://localhost:4200/&quot;, maxAge = 3600)\r\n\r\nI have also included this SimpleCORSFilter.java file in java folder:\r\n```\r\npackage com.oms;\r\n\r\nimport java.io.IOException;\r\nimport javax.servlet.Filter;\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.FilterConfig;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.ServletRequest;\r\nimport javax.servlet.ServletResponse;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class SimpleCORSFilter implements Filter {\r\n\r\nprivate final Logger log = LoggerFactory.getLogger(SimpleCORSFilter.class);\r\n\r\npublic SimpleCORSFilter() {\r\n    log.info(&quot;SimpleCORSFilter init&quot;);\r\n}\r\n\r\n@Override\r\npublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n\r\n    HttpServletRequest request = (HttpServletRequest) req;\r\n    HttpServletResponse response = (HttpServletResponse) res;\r\n\r\n    response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n    response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n    response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, DELETE&quot;);\r\n    response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n    response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Accept, X-Requested-With, remember-me&quot;);\r\n\r\n    chain.doFilter(req, res);\r\n}\r\n\r\n@Override\r\npublic void init(FilterConfig filterConfig) {\r\n}\r\n\r\n@Override\r\npublic void destroy() {\r\n}\r\n\r\n}\r\n```\r\nAlso I have created proxy.conf.json file in angular project:\r\n```\r\n{\r\n    &quot;/api&quot;: {\r\n      &quot;target&quot;: &quot;http://localhost:8080&quot;,\r\n      &quot;secure&quot;: false\r\n    }\r\n  }\r\n```\r\nThis file is included like this  in angular.json:\r\n\r\n&gt; &quot;start&quot;: &quot;ng serve --proxy-config proxy.conf.json&quot;,\r\n\r\nStill I am getting this error:\r\n\r\n&gt; Access to XMLHttpRequest at\r\n&gt; &#39;http://localhost:8080/fetchAll&#39; from origin\r\n&gt; &#39;http://localhost:4200&#39; has been blocked by CORS policy: Request\r\n&gt; header field authorization is not allowed by\r\n&gt; Access-Control-Allow-Headers in preflight response.**\r\n\r\nI referred such type of queries, but could not get the exact solution.\r\n\r\nI am really confused, if there is any error in code? What steps should be taken to resolve this issue?","title":"Angular 6 + Spring Boot: Error: &quot;from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy&quot;","body":"<p>I am trying to connect angular 6 project with spring boot application. When I run angular project, it constantly gives this error, although I have installed all the dependencies and imports.</p>\n\n<p>I have used following line of code in controller class.</p>\n\n<blockquote>\n  <p>@CrossOrigin(origins = \"<a href=\"http://localhost:4200/\" rel=\"noreferrer\">http://localhost:4200/</a>\", maxAge = 3600)</p>\n</blockquote>\n\n<p>I have also included this SimpleCORSFilter.java file in java folder:</p>\n\n<pre><code>package com.oms;\n\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class SimpleCORSFilter implements Filter {\n\nprivate final Logger log = LoggerFactory.getLogger(SimpleCORSFilter.class);\n\npublic SimpleCORSFilter() {\n    log.info(\"SimpleCORSFilter init\");\n}\n\n@Override\npublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n\n    HttpServletRequest request = (HttpServletRequest) req;\n    HttpServletResponse response = (HttpServletResponse) res;\n\n    response.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    response.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n    response.setHeader(\"Access-Control-Allow-Methods\", \"POST, GET, OPTIONS, DELETE\");\n    response.setHeader(\"Access-Control-Max-Age\", \"3600\");\n    response.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Accept, X-Requested-With, remember-me\");\n\n    chain.doFilter(req, res);\n}\n\n@Override\npublic void init(FilterConfig filterConfig) {\n}\n\n@Override\npublic void destroy() {\n}\n\n}\n</code></pre>\n\n<p>Also I have created proxy.conf.json file in angular project:</p>\n\n<pre><code>{\n    \"/api\": {\n      \"target\": \"http://localhost:8080\",\n      \"secure\": false\n    }\n  }\n</code></pre>\n\n<p>This file is included like this  in angular.json:</p>\n\n<blockquote>\n  <p>\"start\": \"ng serve --proxy-config proxy.conf.json\",</p>\n</blockquote>\n\n<p>Still I am getting this error:</p>\n\n<blockquote>\n  <p>Access to XMLHttpRequest at\n  '<a href=\"http://localhost:8080/fetchAll\" rel=\"noreferrer\">http://localhost:8080/fetchAll</a>' from origin\n  '<a href=\"http://localhost:4200\" rel=\"noreferrer\">http://localhost:4200</a>' has been blocked by CORS policy: Request\n  header field authorization is not allowed by\n  Access-Control-Allow-Headers in preflight response.**</p>\n</blockquote>\n\n<p>I referred such type of queries, but could not get the exact solution.</p>\n\n<p>I am really confused, if there is any error in code? What steps should be taken to resolve this issue?</p>\n"},{"tags":["java","apache-spark","dataset"],"answers":[{"tags":[],"owner":{"account_id":12822272,"reputation":1463,"user_id":19625832,"display_name":"vilalabinot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679395252,"creation_date":1679395252,"answer_id":75800134,"question_id":75799714,"body_markdown":"You could try to use `join` with `filter`; first, you get a distinct list of `name` who have at least one `score` over `20`, as:\r\n\r\n```scala\r\nval filteredData = dataset\r\n  .filter(col(&quot;score&quot;).gt(20))\r\n  .selectExpr(&quot;name as r_name&quot;).distinct()\r\n```\r\n\r\nThen, you can use `inner` join to keep only the data you want:\r\n\r\n```scala\r\nval finalDS = dataset\r\n  .join(filteredData, dataset.col(&quot;name&quot;) === filteredData.col(&quot;r_name&quot;), &quot;inner&quot;)\r\n  .select(&quot;name&quot;, &quot;score&quot;)\r\n```\r\n\r\nFinal result:\r\n```\r\n+----+-----+\r\n|name|score|\r\n+----+-----+\r\n|A   |17   |\r\n|A   |19   |\r\n|A   |21   |\r\n+----+-----+\r\n```\r\n\r\nGood luck!","title":"Spark java group by and filter on custom condition","body":"<p>You could try to use <code>join</code> with <code>filter</code>; first, you get a distinct list of <code>name</code> who have at least one <code>score</code> over <code>20</code>, as:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val filteredData = dataset\n  .filter(col(&quot;score&quot;).gt(20))\n  .selectExpr(&quot;name as r_name&quot;).distinct()\n</code></pre>\n<p>Then, you can use <code>inner</code> join to keep only the data you want:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val finalDS = dataset\n  .join(filteredData, dataset.col(&quot;name&quot;) === filteredData.col(&quot;r_name&quot;), &quot;inner&quot;)\n  .select(&quot;name&quot;, &quot;score&quot;)\n</code></pre>\n<p>Final result:</p>\n<pre><code>+----+-----+\n|name|score|\n+----+-----+\n|A   |17   |\n|A   |19   |\n|A   |21   |\n+----+-----+\n</code></pre>\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679421886,"creation_date":1679410849,"answer_id":75802857,"question_id":75799714,"body_markdown":"You can do that with a window partitioned by Name like this:\r\n```java\r\ndf\r\n    .withColumn(&quot;max_score&quot;, max(&quot;Score&quot;).over(Window.partitionBy(&quot;Name&quot;)))\r\n    .where(col(&quot;max_score&quot;).geq(20))\r\n    .show(false);\r\n```","title":"Spark java group by and filter on custom condition","body":"<p>You can do that with a window partitioned by Name like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>df\n    .withColumn(&quot;max_score&quot;, max(&quot;Score&quot;).over(Window.partitionBy(&quot;Name&quot;)))\n    .where(col(&quot;max_score&quot;).geq(20))\n    .show(false);\n</code></pre>\n"}],"owner":{"account_id":7805564,"reputation":145,"user_id":5903559,"display_name":"shubham pagui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1679421886,"creation_date":1679392836,"question_id":75799714,"body_markdown":"I have a problem statement similar to the following and I want to write it in spark job in java.\r\n\r\nThe input is like following where There is name of a person and their score\r\n\r\n| Name | Score  |\r\n|:---- |:------:|\r\n| A    | 17     |\r\n| A    | 19     |\r\n| A    | 22     |\r\n| B    | 17     |\r\n| B    | 15     |\r\n\r\nI want the output where if a person has score more than 20 then all the records of that person should be in the output. Since only person **A** has scored record of that person is in the output.\r\n\r\n| Name | Score  |\r\n|:---- |:------:|\r\n| A    | 17     |\r\n| A    | 19     |\r\n| A    | 22     |\r\n\r\n\r\nSo far I have tried this code, but I am looking for a simpler way to achieve it.\r\n\r\n```\r\n sparkSession.read()\r\n    .csv(&quot;scores.csv&quot;)\r\n    .toDF(&quot;Name&quot;, &quot;Score&quot;)\r\n    .groupBy(&quot;Name&quot;)\r\n    .agg(collect_list(&quot;Score&quot;).as(&quot;Score&quot;))\r\n    .filter((FilterFunction&lt;Row&gt;) row -&gt; {\r\n\t    WrappedArray&lt;String&gt; scores = (WrappedArray&lt;String&gt;) row.get(1);\r\n\t    return scores.exists(v1 -&gt; Long.parseLong(v1) &gt; 20);\r\n    })\r\n    .withColumn(&quot;Score&quot;, explode(col(&quot;Score&quot;)))\r\n    .show(false);\r\n```\r\n\r\nI am hoping to optimise this filter function. In my original problem, the structure of row is complex and I want to use simpler sql conditional expressions like ```any element with score &gt; 20```.\r\n\r\nIs there a way this can be simplified.","title":"Spark java group by and filter on custom condition","body":"<p>I have a problem statement similar to the following and I want to write it in spark job in java.</p>\n<p>The input is like following where There is name of a person and their score</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">Name</th>\n<th style=\"text-align: center;\">Score</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">17</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">19</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">22</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">B</td>\n<td style=\"text-align: center;\">17</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">B</td>\n<td style=\"text-align: center;\">15</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I want the output where if a person has score more than 20 then all the records of that person should be in the output. Since only person <strong>A</strong> has scored record of that person is in the output.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">Name</th>\n<th style=\"text-align: center;\">Score</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">17</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">19</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A</td>\n<td style=\"text-align: center;\">22</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>So far I have tried this code, but I am looking for a simpler way to achieve it.</p>\n<pre><code> sparkSession.read()\n    .csv(&quot;scores.csv&quot;)\n    .toDF(&quot;Name&quot;, &quot;Score&quot;)\n    .groupBy(&quot;Name&quot;)\n    .agg(collect_list(&quot;Score&quot;).as(&quot;Score&quot;))\n    .filter((FilterFunction&lt;Row&gt;) row -&gt; {\n        WrappedArray&lt;String&gt; scores = (WrappedArray&lt;String&gt;) row.get(1);\n        return scores.exists(v1 -&gt; Long.parseLong(v1) &gt; 20);\n    })\n    .withColumn(&quot;Score&quot;, explode(col(&quot;Score&quot;)))\n    .show(false);\n</code></pre>\n<p>I am hoping to optimise this filter function. In my original problem, the structure of row is complex and I want to use simpler sql conditional expressions like <code>any element with score &gt; 20</code>.</p>\n<p>Is there a way this can be simplified.</p>\n"},{"tags":["java","eclipse","swing","jdialog"],"comments":[{"owner":{"account_id":12573569,"reputation":142,"user_id":9146825,"display_name":"Blue Dev"},"score":0,"creation_date":1679336275,"post_id":75793667,"comment_id":133700277,"body_markdown":"Can you show your main class? We need to know how your JFrame classes are accessing each other. \nAlso, for the record, it is less confusing if the various classes/variables are not named &quot;Class1, Class2, Class3&quot; and instead named things like &quot;SettingsWindow, PrimaryWindow, CatPicsWindow&quot; or whatever. Helps your readers keep better track of what&#39;s going on.","body":"Can you show your main class? We need to know how your JFrame classes are accessing each other.  Also, for the record, it is less confusing if the various classes/variables are not named &quot;Class1, Class2, Class3&quot; and instead named things like &quot;SettingsWindow, PrimaryWindow, CatPicsWindow&quot; or whatever. Helps your readers keep better track of what&#39;s going on."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1679338484,"post_id":75793667,"comment_id":133700778,"body_markdown":"&quot;*Class2 and Class3 both create JFrame&#39;s*&quot; maybe instead of having many JFrames create one and use something like [Tabbed Panes](https://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html) to show only one panel at a time. The other classes may simply be JPanes which will be assigned to different tabs.","body":"&quot;<i>Class2 and Class3 both create JFrame&#39;s</i>&quot; maybe instead of having many JFrames create one and use something like <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html\" rel=\"nofollow noreferrer\">Tabbed Panes</a> to show only one panel at a time. The other classes may simply be JPanes which will be assigned to different tabs."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679339091,"post_id":75793667,"comment_id":133700918,"body_markdown":"An application should only have a single JFrame. If you need child windows then you can use a JDialog.","body":"An application should only have a single JFrame. If you need child windows then you can use a JDialog."},{"owner":{"account_id":28068124,"reputation":45,"user_id":21441223,"display_name":"Evan"},"score":0,"creation_date":1679343230,"post_id":75793667,"comment_id":133701945,"body_markdown":"@BlueDev Thank You for the response! I used simpler names to help people who could awnser understand but now I see in reality it just made it more vague. Im starting a new project, and usually I would use the same class but for a potentially bigger project i split it up and am finding difficulty.  I am making a starting screen that displays an app titile and signin/signup buttons. Right now I used eclipse to make all my JFrames so the visuals are fine. Any suggestions on how to actually transition from my start screen to my sign up screen using an action listener?","body":"@BlueDev Thank You for the response! I used simpler names to help people who could awnser understand but now I see in reality it just made it more vague. Im starting a new project, and usually I would use the same class but for a potentially bigger project i split it up and am finding difficulty.  I am making a starting screen that displays an app titile and signin/signup buttons. Right now I used eclipse to make all my JFrames so the visuals are fine. Any suggestions on how to actually transition from my start screen to my sign up screen using an action listener?"},{"owner":{"account_id":28068124,"reputation":45,"user_id":21441223,"display_name":"Evan"},"score":0,"creation_date":1679343280,"post_id":75793667,"comment_id":133701961,"body_markdown":"@BlueDev That is essentially my main classes code, (with diffrent varriables) my other classes just set up my swing components for the visuals.","body":"@BlueDev That is essentially my main classes code, (with diffrent varriables) my other classes just set up my swing components for the visuals."}],"answers":[{"tags":[],"owner":{"account_id":12573569,"reputation":142,"user_id":9146825,"display_name":"Blue Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679421760,"creation_date":1679421760,"answer_id":75804870,"question_id":75793667,"body_markdown":"Part of your problem is caused by a lack of understanding in terms of variable scope. The other part of your problem is just in approaching this the wrong way. \r\n\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n\r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    public class Class1 extends JFrame implements ActionListener\r\n    {\r\n        //This is a method. Every variable declared within this method, \r\n        //is only accessible from within this method. \r\n        public static void main(String[] args) {\r\n            //That includes this one. \r\n            Class2 frameFromclass2 = new Class2();\r\n            //You&#39;ve used it here, but not only is it then abandoned, but it\r\n            //cannot be used anywhere else. It is contained in a cage of curly braces. \r\n            frameFromclass2.setVisible(true);\r\n        }       \r\n        Class2 buttonMovetoclass3 = new Class2();\r\n\r\n        public void actionPerformed(ActionEvent e) {\r\n\r\n            if (buttonMovetoclass3 == e.getSource()) {   \r\n                //Here you create a NEW Class2 object and give it the same\r\n                //name you gave the other, then you hide it.\r\n                Class2 frameFromclass2 = new Class2();\r\n\r\n                frameFromclass2.setVisible(false);\r\n                //And then you do the same thing here, but with Class3; then you show it. \r\n                Class3 frameFromclass3 = new Class3();\r\n\r\n                frameFromclass3.setVisible(true);\r\n            }\r\n        }   \r\n    }\r\nWe aren&#39;t able to see what your other classes have in their constructors, so I can&#39;t say whether or not there&#39;s also a problem happening there. I can, however, offer better alternatives. \r\n\r\nGenerally you want to keep 1 `JFrame`, even if you have popup windows or multiple &quot;pages&quot; that can be used. Consider using multiple `JPanels`, one per layout. Alternatively you can use a [`JTabbedPane`][1], and have different information on each tab. For login purposes, a common option is the [`JOptionPane`][2] or a [`JDialog`][3]. If you insist on using multiple `JFrames` and you want to move components between them, variables within your class (not a method) should be used to store information, then use public methods to access those variables from the other classes. Once a window is done being used, however, you should destroy it instead of hide it. [Here&#39;s a great resource][4] on various ways to do that. \r\n\r\n\r\n  [1]: https://www.javatpoint.com/java-jtabbedpane\r\n  [2]: https://www.javatpoint.com/java-joptionpane\r\n  [3]: https://www.javatpoint.com/java-jdialog\r\n  [4]: https://stackoverflow.com/questions/1234912/how-to-programmatically-close-a-jframe#:~:text=Best%20way%20to%20close%20a,to%20do%20nothing%20(DO_NOTHING_ON_CLOSE).","title":"How do I use a Main class to implement Swing Components from other classes in my project?","body":"<p>Part of your problem is caused by a lack of understanding in terms of variable scope. The other part of your problem is just in approaching this the wrong way.</p>\n<pre><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class Class1 extends JFrame implements ActionListener\n{\n    //This is a method. Every variable declared within this method, \n    //is only accessible from within this method. \n    public static void main(String[] args) {\n        //That includes this one. \n        Class2 frameFromclass2 = new Class2();\n        //You've used it here, but not only is it then abandoned, but it\n        //cannot be used anywhere else. It is contained in a cage of curly braces. \n        frameFromclass2.setVisible(true);\n    }       \n    Class2 buttonMovetoclass3 = new Class2();\n\n    public void actionPerformed(ActionEvent e) {\n\n        if (buttonMovetoclass3 == e.getSource()) {   \n            //Here you create a NEW Class2 object and give it the same\n            //name you gave the other, then you hide it.\n            Class2 frameFromclass2 = new Class2();\n\n            frameFromclass2.setVisible(false);\n            //And then you do the same thing here, but with Class3; then you show it. \n            Class3 frameFromclass3 = new Class3();\n\n            frameFromclass3.setVisible(true);\n        }\n    }   \n}\n</code></pre>\n<p>We aren't able to see what your other classes have in their constructors, so I can't say whether or not there's also a problem happening there. I can, however, offer better alternatives.</p>\n<p>Generally you want to keep 1 <code>JFrame</code>, even if you have popup windows or multiple &quot;pages&quot; that can be used. Consider using multiple <code>JPanels</code>, one per layout. Alternatively you can use a <a href=\"https://www.javatpoint.com/java-jtabbedpane\" rel=\"nofollow noreferrer\"><code>JTabbedPane</code></a>, and have different information on each tab. For login purposes, a common option is the <a href=\"https://www.javatpoint.com/java-joptionpane\" rel=\"nofollow noreferrer\"><code>JOptionPane</code></a> or a <a href=\"https://www.javatpoint.com/java-jdialog\" rel=\"nofollow noreferrer\"><code>JDialog</code></a>. If you insist on using multiple <code>JFrames</code> and you want to move components between them, variables within your class (not a method) should be used to store information, then use public methods to access those variables from the other classes. Once a window is done being used, however, you should destroy it instead of hide it. <a href=\"https://stackoverflow.com/questions/1234912/how-to-programmatically-close-a-jframe#:%7E:text=Best%20way%20to%20close%20a,to%20do%20nothing%20(DO_NOTHING_ON_CLOSE).\">Here's a great resource</a> on various ways to do that.</p>\n"}],"owner":{"account_id":28068124,"reputation":45,"user_id":21441223,"display_name":"Evan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1679432993,"accepted_answer_id":75804870,"answer_count":1,"score":-1,"last_activity_date":1679421760,"creation_date":1679334679,"question_id":75793667,"body_markdown":"Im developing a project in which I have &quot;Class1&quot;, &quot;Class2&quot;, and &quot;Class3&quot;.\r\nClass2 and Class3 both create JFrame&#39;s, each containing various JButton&#39;s, JLabel&#39;s, and other swing components. How do i make so **in Class1** I can reffrence the JButton from Class2 and use an action listener to set the Class2&#39;s visibilty to false and Class3&#39;s visibilty to true.\r\n\r\nI Tried This: Setting Class2 to visbile in my main method was no issue, but once i started to implement Class3 things didint work. \r\n\r\nSummary: Having Issues initiating a jbutton from an other class and using an action listener that refrences that jbutton.    \r\n\r\n\r\n``` lang-java\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class Class1 extends JFrame implements ActionListener\r\n{\r\n\r\n    public static void main(String[] args) {\r\n        Class2 frameFromclass2 = new Class2();\r\n\r\n        frameFromclass2.setVisible(true);\r\n    }       \r\n    Class2 buttonMovetoclass3 = new Class2();\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n\r\n        if (buttonMovetoclass3 == e.getSource()) {   \r\n            Class2 frameFromclass2 = new Class2();\r\n\r\n            frameFromclass2.setVisible(false);\r\n\r\n            Class3 frameFromclass3 = new Class3();\r\n\r\n            frameFromclass3.setVisible(true);\r\n\r\n                    \t\r\n        }\r\n    }\t\r\n\t\r\n}\r\n```\r\n","title":"How do I use a Main class to implement Swing Components from other classes in my project?","body":"<p>Im developing a project in which I have &quot;Class1&quot;, &quot;Class2&quot;, and &quot;Class3&quot;.\nClass2 and Class3 both create JFrame's, each containing various JButton's, JLabel's, and other swing components. How do i make so <strong>in Class1</strong> I can reffrence the JButton from Class2 and use an action listener to set the Class2's visibilty to false and Class3's visibilty to true.</p>\n<p>I Tried This: Setting Class2 to visbile in my main method was no issue, but once i started to implement Class3 things didint work.</p>\n<p>Summary: Having Issues initiating a jbutton from an other class and using an action listener that refrences that jbutton.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class Class1 extends JFrame implements ActionListener\n{\n\n    public static void main(String[] args) {\n        Class2 frameFromclass2 = new Class2();\n\n        frameFromclass2.setVisible(true);\n    }       \n    Class2 buttonMovetoclass3 = new Class2();\n\n    public void actionPerformed(ActionEvent e) {\n\n        if (buttonMovetoclass3 == e.getSource()) {   \n            Class2 frameFromclass2 = new Class2();\n\n            frameFromclass2.setVisible(false);\n\n            Class3 frameFromclass3 = new Class3();\n\n            frameFromclass3.setVisible(true);\n\n                        \n        }\n    }   \n    \n}\n</code></pre>\n"},{"tags":["java","spring-boot","ssl"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1679341924,"post_id":75794674,"comment_id":133701586,"body_markdown":"In real-world scenario, TLS is typically handled by an external proxy / API Gateway, rather than within server code itself. Client certificates will still be needed, however. But, is your question about the server or the client? You can find plenty of public HTTPS APIs available to use for a client.","body":"In real-world scenario, TLS is typically handled by an external proxy / API Gateway, rather than within server code itself. Client certificates will still be needed, however. But, is your question about the server or the client? You can find plenty of public HTTPS APIs available to use for a client."},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1679342038,"post_id":75794674,"comment_id":133701614,"body_markdown":"I&#39;m referring to the client. The server will be a much more complex application (Prometheus) that I will attempt to make RESTful calls to.","body":"I&#39;m referring to the client. The server will be a much more complex application (Prometheus) that I will attempt to make RESTful calls to."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1679342131,"post_id":75794674,"comment_id":133701649,"body_markdown":"Okay, I was confused on `server.port: 8082` if you don&#39;t have two servers, then","body":"Okay, I was confused on <code>server.port: 8082</code> if you don&#39;t have two servers, then"},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1679342229,"post_id":75794674,"comment_id":133701676,"body_markdown":"Yeah, I couldn&#39;t quite get the point of port 8082. Why not use 80 or 8080? In this instance, I guess it doesn&#39;t really matter.","body":"Yeah, I couldn&#39;t quite get the point of port 8082. Why not use 80 or 8080? In this instance, I guess it doesn&#39;t really matter."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1679343513,"post_id":75794674,"comment_id":133702008,"body_markdown":"You can disable the SpringBoot server if you only want to use Boot Configuration for a client application. In any case, do you get a specific error when you try to make requests to the server?","body":"You can disable the SpringBoot server if you only want to use Boot Configuration for a client application. In any case, do you get a specific error when you try to make requests to the server?"}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679421609,"creation_date":1679351819,"answer_id":75795924,"question_id":75794674,"body_markdown":"In simple terms, a party (client or server) will trust another party (server or client) if the other party’s certificate chain as provided on the wire can be traced back (recursively via signers) to the CACERTS stored in the original party’s JRE. (or is in the original party’s truststore)\r\n\r\nIt is fairly unusual to use mutually authenticated TLS so client side certificates are rare. In most cases authentication of a client is done with user credentials, api keys, etc. Anyway, it looks like you have the client cert setup correctly.\r\n\r\nIf the server certificate is signed by a Intermediate CA that has a cert held in the client’s CACERTS then no client side intervention is necessary. On the server a keychain from a CACERTS cert down to the server cert needs to be configured via application.yaml, as you correctly show in your question.\r\n\r\nIf the Intermediate CA’s signing cert is not registered in the official Java CACERTS in the client’s JRE then it must be added like [this][1]. I find it easier to add untrusted Intermediate CA certs to CACERTS rather than adding the server cert to the client truststore (as you correctly show) because that allows multiple servers to be trusted (because, in a typical corporate environment, they will all have certs signed by the Intermediate CA)\r\n\r\nIf a client can’t build a trusted cert chain to the cert provided by a server an SSL connection will fail with the dreaded “PKIX path building failed” error.\r\n\r\nI find it helpful to load a server GET path (eg `/welcome`) in a browser to get a look at what cert the server is passing back.\r\n\r\n  [1]: https://learn.capstorm.com/copystorm/frequently-asked-questions/installation/help-i-am-getting-a-certificate-error-pkix-path/#:~:text=This%20type%20of%20error%20typically,trusted%20store%20file%20%E2%80%9Ccacerts%E2%80%9D.","title":"Java/Spring Boot - how to connect with server using https","body":"<p>In simple terms, a party (client or server) will trust another party (server or client) if the other party’s certificate chain as provided on the wire can be traced back (recursively via signers) to the CACERTS stored in the original party’s JRE. (or is in the original party’s truststore)</p>\n<p>It is fairly unusual to use mutually authenticated TLS so client side certificates are rare. In most cases authentication of a client is done with user credentials, api keys, etc. Anyway, it looks like you have the client cert setup correctly.</p>\n<p>If the server certificate is signed by a Intermediate CA that has a cert held in the client’s CACERTS then no client side intervention is necessary. On the server a keychain from a CACERTS cert down to the server cert needs to be configured via application.yaml, as you correctly show in your question.</p>\n<p>If the Intermediate CA’s signing cert is not registered in the official Java CACERTS in the client’s JRE then it must be added like <a href=\"https://learn.capstorm.com/copystorm/frequently-asked-questions/installation/help-i-am-getting-a-certificate-error-pkix-path/#:%7E:text=This%20type%20of%20error%20typically,trusted%20store%20file%20%E2%80%9Ccacerts%E2%80%9D.\" rel=\"nofollow noreferrer\">this</a>. I find it easier to add untrusted Intermediate CA certs to CACERTS rather than adding the server cert to the client truststore (as you correctly show) because that allows multiple servers to be trusted (because, in a typical corporate environment, they will all have certs signed by the Intermediate CA)</p>\n<p>If a client can’t build a trusted cert chain to the cert provided by a server an SSL connection will fail with the dreaded “PKIX path building failed” error.</p>\n<p>I find it helpful to load a server GET path (eg <code>/welcome</code>) in a browser to get a look at what cert the server is passing back.</p>\n"}],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75795924,"answer_count":1,"score":1,"last_activity_date":1679421609,"creation_date":1679341676,"question_id":75794674,"body_markdown":"Full disclosure: I am still trying to understand how the whole security certificate ecosystem works. There is much I still don&#39;t have a good handle on.\r\n\r\nI want to be able to connect/interact with a web application REST API that is using SSL/TLS (HTTPS). The server has a security certificate in its trust store that presumably it will provide when my app attempts to establish a secure connection. To my knowledge, there is no need for mutual authentication. I don&#39;t know if this is helpful, but the certificate was created and signed by an intermediate CA.\r\n\r\nMy application is written in the Java language and utilizes Spring Boot for the many features and capabilties that framework provides. Initially to keep things simple, my code consists of a very simple server and client.\r\n\r\nI&#39;m trying to understand what needs to be done for secured HTTPS communications to occur between these two apps, specifically with the certificate I have described. What I have found so far seems to involve the JDK keytool utility, but I&#39;m not sure in what way I need to use it - or even if it needs to be involved. I don&#39;t know what security &quot;data&quot; I may need to provide in this process, or in what form it may need to be in. I am also unsure what needs to be done in software to make this all work correctly.\r\n\r\n**Note**: The settings in the `application.yaml` files reflects what I tried to use from a source on the Internet (https://www.baeldung.com/spring-resttemplate-secure-https-service). I could not get that to work.\r\n\r\nHere is the simple server and client application code.\r\n\r\n**Server**:\r\n\r\nServerApp.java:\r\n\r\n\t@SpringBootApplication\r\n\tpublic class ServerApp {\r\n\t  public static void main(String[] args) {\r\n\t\tSpringApplication.run(ServerApp.class, args);\r\n\t  }\r\n\t}\r\n\r\nWelcomeController.java:\r\n\r\n\t@RestController\r\n\tpublic class WelcomeController {\r\n\t  @GetMapping(value = &quot;/welcome&quot;)\r\n\t  public String welcome() {\r\n\t\treturn &quot;Welcome To Secured REST Service&quot;;\r\n\t  }\r\n\t}\r\n\r\napplication.yaml:\r\n\r\n\t---\r\n\tserver:\r\n\t  port: 8443\r\n\t  servlet:\r\n\t\tcontext-path: /\r\n\t  ssl:\r\n\t\tkey-store-type: PKCS12\r\n\t\tkey-store: classpath:keystore/&lt;cert file&gt;\r\n\t\tkey-store-password: &lt;password&gt;\r\n\t\tkey-alias: &lt;alias&gt;\r\n\r\n\r\n**Client**:\r\n\r\nClientApp.java:\r\n\r\n\t@SpringBootApplication\r\n\tpublic class ClientApp {\r\n\t  public static void main(String[] args) {\r\n\t\tSpringApplication.run(ClientApp.class, args);\r\n\t  }\r\n\t}\r\n\r\nClientController.java:\r\n\r\n\t@RestController\r\n\tpublic class ClientController {\r\n\t  private static final String WELCOME_URL = &quot;https://localhost:8443/welcome&quot;;\r\n\r\n\t  @Autowired\r\n\t  private RestTemplate        restTemplate;\r\n\r\n\t  @GetMapping(&quot;/welcomeclient&quot;)\r\n\t  public String greetMessage() {\r\n\t\tString response = restTemplate.getForObject(WELCOME_URL, String.class);\r\n\t\treturn response;\r\n\t  }\r\n\t}\r\n\r\nCustomRestTemplateConfiguration.java:\r\n\r\n\t@Configuration\r\n\tpublic class CustomRestTemplateConfiguration {\r\n\t  @Value(&quot;${trust.store}&quot;)\r\n\t  private Resource trustStore;\r\n\r\n\t  @Value(&quot;${trust.password}&quot;)\r\n\t  private String   trustStorePassword;\r\n\r\n\t  @Bean\r\n\t  public RestTemplate restTemplate() throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException,\r\n\t\t  CertificateException, MalformedURLException, IOException {\r\n\t\tSSLContext sslContext = new SSLContextBuilder()\r\n\t\t\t.loadTrustMaterial(trustStore.getURL(), trustStorePassword.toCharArray())\r\n\t\t\t.build();\r\n\t\t\r\n\t\tSSLConnectionSocketFactory sslConFactory = new SSLConnectionSocketFactory(sslContext);\r\n\r\n\t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n\t\t\t.setSSLSocketFactory(sslConFactory)\r\n\t\t\t.build();\r\n\t\t\r\n\t\tClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\r\n\t\t\r\n\t\treturn new RestTemplate(requestFactory);\r\n\t  }\r\n\t}\r\n\r\napplication.yaml:\r\n\r\n\t---\r\n\tserver:\r\n\t  port: 8082\r\n\r\n\ttrust:\r\n\t  store: classpath:keystore/&lt;cert file&gt;\r\n\t  password: &lt;password&gt;\r\n\r\n","title":"Java/Spring Boot - how to connect with server using https","body":"<p>Full disclosure: I am still trying to understand how the whole security certificate ecosystem works. There is much I still don't have a good handle on.</p>\n<p>I want to be able to connect/interact with a web application REST API that is using SSL/TLS (HTTPS). The server has a security certificate in its trust store that presumably it will provide when my app attempts to establish a secure connection. To my knowledge, there is no need for mutual authentication. I don't know if this is helpful, but the certificate was created and signed by an intermediate CA.</p>\n<p>My application is written in the Java language and utilizes Spring Boot for the many features and capabilties that framework provides. Initially to keep things simple, my code consists of a very simple server and client.</p>\n<p>I'm trying to understand what needs to be done for secured HTTPS communications to occur between these two apps, specifically with the certificate I have described. What I have found so far seems to involve the JDK keytool utility, but I'm not sure in what way I need to use it - or even if it needs to be involved. I don't know what security &quot;data&quot; I may need to provide in this process, or in what form it may need to be in. I am also unsure what needs to be done in software to make this all work correctly.</p>\n<p><strong>Note</strong>: The settings in the <code>application.yaml</code> files reflects what I tried to use from a source on the Internet (<a href=\"https://www.baeldung.com/spring-resttemplate-secure-https-service\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-resttemplate-secure-https-service</a>). I could not get that to work.</p>\n<p>Here is the simple server and client application code.</p>\n<p><strong>Server</strong>:</p>\n<p>ServerApp.java:</p>\n<pre><code>@SpringBootApplication\npublic class ServerApp {\n  public static void main(String[] args) {\n    SpringApplication.run(ServerApp.class, args);\n  }\n}\n</code></pre>\n<p>WelcomeController.java:</p>\n<pre><code>@RestController\npublic class WelcomeController {\n  @GetMapping(value = &quot;/welcome&quot;)\n  public String welcome() {\n    return &quot;Welcome To Secured REST Service&quot;;\n  }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>---\nserver:\n  port: 8443\n  servlet:\n    context-path: /\n  ssl:\n    key-store-type: PKCS12\n    key-store: classpath:keystore/&lt;cert file&gt;\n    key-store-password: &lt;password&gt;\n    key-alias: &lt;alias&gt;\n</code></pre>\n<p><strong>Client</strong>:</p>\n<p>ClientApp.java:</p>\n<pre><code>@SpringBootApplication\npublic class ClientApp {\n  public static void main(String[] args) {\n    SpringApplication.run(ClientApp.class, args);\n  }\n}\n</code></pre>\n<p>ClientController.java:</p>\n<pre><code>@RestController\npublic class ClientController {\n  private static final String WELCOME_URL = &quot;https://localhost:8443/welcome&quot;;\n\n  @Autowired\n  private RestTemplate        restTemplate;\n\n  @GetMapping(&quot;/welcomeclient&quot;)\n  public String greetMessage() {\n    String response = restTemplate.getForObject(WELCOME_URL, String.class);\n    return response;\n  }\n}\n</code></pre>\n<p>CustomRestTemplateConfiguration.java:</p>\n<pre><code>@Configuration\npublic class CustomRestTemplateConfiguration {\n  @Value(&quot;${trust.store}&quot;)\n  private Resource trustStore;\n\n  @Value(&quot;${trust.password}&quot;)\n  private String   trustStorePassword;\n\n  @Bean\n  public RestTemplate restTemplate() throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException,\n      CertificateException, MalformedURLException, IOException {\n    SSLContext sslContext = new SSLContextBuilder()\n        .loadTrustMaterial(trustStore.getURL(), trustStorePassword.toCharArray())\n        .build();\n    \n    SSLConnectionSocketFactory sslConFactory = new SSLConnectionSocketFactory(sslContext);\n\n    CloseableHttpClient httpClient = HttpClients.custom()\n        .setSSLSocketFactory(sslConFactory)\n        .build();\n    \n    ClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\n    \n    return new RestTemplate(requestFactory);\n  }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>---\nserver:\n  port: 8082\n\ntrust:\n  store: classpath:keystore/&lt;cert file&gt;\n  password: &lt;password&gt;\n</code></pre>\n"},{"tags":["java","json","google-api","protobuf-c"],"answers":[{"tags":[],"owner":{"account_id":22388509,"reputation":36,"user_id":16600986,"display_name":"Makabeusz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679421490,"creation_date":1679421490,"answer_id":75804825,"question_id":75803810,"body_markdown":"In case anyone needed it, the solution is provide this dependency:\r\n\r\n    implementation &#39;com.google.protobuf:protobuf-java-util:3.22.2&#39;\r\n\r\nAnd parse product object to JSON with\r\n\r\n    com.google.protobuf.util.JsonFormat.printer().print(product);","title":"How to parse com.google.cloud.retail.v2.Product object to JSON?","body":"<p>In case anyone needed it, the solution is provide this dependency:</p>\n<pre><code>implementation 'com.google.protobuf:protobuf-java-util:3.22.2'\n</code></pre>\n<p>And parse product object to JSON with</p>\n<pre><code>com.google.protobuf.util.JsonFormat.printer().print(product);\n</code></pre>\n"}],"owner":{"account_id":22388509,"reputation":36,"user_id":16600986,"display_name":"Makabeusz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679421490,"creation_date":1679415735,"question_id":75803810,"body_markdown":"I am implementing Google Retail Search into the project. Google API require me to provide [Product](https://cloud.google.com/retail/docs/reference/rest/v2/projects.locations.catalogs.branches.products#Product) object in given JSON format. JSON representation of Product with minimum number of fields populated look like following:\r\n\r\n    {\r\n        &quot;id&quot;: &quot;1234&quot;,\r\n        &quot;categories&quot;: &quot;Apparel &amp; Accessories &gt; Shoes&quot;,\r\n        &quot;title&quot;: &quot;ABC sneakers&quot;\r\n    }\r\n\r\nCorresponding Product object:\r\n\r\n    Product product = Product.newBuilder()\r\n        .setId(&quot;1234&quot;)\r\n        .addCategories(&quot;Apparel &amp; Accessories &gt; Shoes&quot;)\r\n        .setTitle(&quot;ABC sneakers&quot;)\r\n        .build();\r\n\r\nWhen I try to parse the Product object to JSON using Gson library I receive following result:\r\n\r\n    {\r\n        &quot;expirationCase_&quot;: 0,\r\n        &quot;name_&quot;: &quot;&quot;,\r\n        &quot;id_&quot;: &quot;1234&quot;,\r\n        &quot;type_&quot;: 0,\r\n        &quot;primaryProductId_&quot;: &quot;&quot;,\r\n        &quot;collectionMemberIds_&quot;: [],\r\n        &quot;gtin_&quot;: &quot;&quot;,\r\n        &quot;categories_&quot;: [\r\n          &quot;Apparel &amp; Accessories &gt; Shoes&quot;\r\n        ],\r\n        &quot;title_&quot;: &quot;ABC sneakers&quot;,\r\n        &quot;brands_&quot;: [],\r\n        &quot;description_&quot;: &quot;&quot;,\r\n        &quot;languageCode_&quot;: &quot;&quot;,\r\n        &quot;tags_&quot;: [],\r\n        &quot;availability_&quot;: 0,\r\n        &quot;fulfillmentInfo_&quot;: [],\r\n        &quot;uri_&quot;: &quot;&quot;,\r\n        &quot;images_&quot;: [],\r\n        &quot;sizes_&quot;: [],\r\n        &quot;materials_&quot;: [],\r\n        &quot;patterns_&quot;: [],\r\n        &quot;conditions_&quot;: [],\r\n        &quot;promotions_&quot;: [],\r\n        &quot;variants_&quot;: [],\r\n        &quot;localInventories_&quot;: [],\r\n        &quot;memoizedIsInitialized&quot;: 1,\r\n        &quot;unknownFields&quot;: {\r\n          &quot;fields&quot;: {}\r\n        },\r\n        &quot;memoizedSize&quot;: -1,\r\n        &quot;memoizedHashCode&quot;: 0\r\n    }\r\n\r\nHow can I parse com.google.cloud.retail.v2.Product objects to its correct JSON representation? Is there any Google provided solution or should I create my own Product?\r\n\r\nI feel helpless on that.\r\n\r\nI tried to use following Gson for parsing and have no idea what can I change here.\r\n\r\n`Gson gson2 = new GsonBuilder().disableHtmlEscaping().create();`","title":"How to parse com.google.cloud.retail.v2.Product object to JSON?","body":"<p>I am implementing Google Retail Search into the project. Google API require me to provide <a href=\"https://cloud.google.com/retail/docs/reference/rest/v2/projects.locations.catalogs.branches.products#Product\" rel=\"nofollow noreferrer\">Product</a> object in given JSON format. JSON representation of Product with minimum number of fields populated look like following:</p>\n<pre><code>{\n    &quot;id&quot;: &quot;1234&quot;,\n    &quot;categories&quot;: &quot;Apparel &amp; Accessories &gt; Shoes&quot;,\n    &quot;title&quot;: &quot;ABC sneakers&quot;\n}\n</code></pre>\n<p>Corresponding Product object:</p>\n<pre><code>Product product = Product.newBuilder()\n    .setId(&quot;1234&quot;)\n    .addCategories(&quot;Apparel &amp; Accessories &gt; Shoes&quot;)\n    .setTitle(&quot;ABC sneakers&quot;)\n    .build();\n</code></pre>\n<p>When I try to parse the Product object to JSON using Gson library I receive following result:</p>\n<pre><code>{\n    &quot;expirationCase_&quot;: 0,\n    &quot;name_&quot;: &quot;&quot;,\n    &quot;id_&quot;: &quot;1234&quot;,\n    &quot;type_&quot;: 0,\n    &quot;primaryProductId_&quot;: &quot;&quot;,\n    &quot;collectionMemberIds_&quot;: [],\n    &quot;gtin_&quot;: &quot;&quot;,\n    &quot;categories_&quot;: [\n      &quot;Apparel &amp; Accessories &gt; Shoes&quot;\n    ],\n    &quot;title_&quot;: &quot;ABC sneakers&quot;,\n    &quot;brands_&quot;: [],\n    &quot;description_&quot;: &quot;&quot;,\n    &quot;languageCode_&quot;: &quot;&quot;,\n    &quot;tags_&quot;: [],\n    &quot;availability_&quot;: 0,\n    &quot;fulfillmentInfo_&quot;: [],\n    &quot;uri_&quot;: &quot;&quot;,\n    &quot;images_&quot;: [],\n    &quot;sizes_&quot;: [],\n    &quot;materials_&quot;: [],\n    &quot;patterns_&quot;: [],\n    &quot;conditions_&quot;: [],\n    &quot;promotions_&quot;: [],\n    &quot;variants_&quot;: [],\n    &quot;localInventories_&quot;: [],\n    &quot;memoizedIsInitialized&quot;: 1,\n    &quot;unknownFields&quot;: {\n      &quot;fields&quot;: {}\n    },\n    &quot;memoizedSize&quot;: -1,\n    &quot;memoizedHashCode&quot;: 0\n}\n</code></pre>\n<p>How can I parse com.google.cloud.retail.v2.Product objects to its correct JSON representation? Is there any Google provided solution or should I create my own Product?</p>\n<p>I feel helpless on that.</p>\n<p>I tried to use following Gson for parsing and have no idea what can I change here.</p>\n<p><code>Gson gson2 = new GsonBuilder().disableHtmlEscaping().create();</code></p>\n"},{"tags":["java","swing","awt","screenshot","x11"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":2,"creation_date":1678955446,"post_id":75752931,"comment_id":133633912,"body_markdown":"check your jdk is headless or full ?","body":"check your jdk is headless or full ?"},{"owner":{"account_id":28029801,"reputation":1,"user_id":21409171,"display_name":"nimesh"},"score":0,"creation_date":1679286683,"post_id":75752931,"comment_id":133687912,"body_markdown":"jdk installation is full not a headless.","body":"jdk installation is full not a headless."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679291234,"post_id":75752931,"comment_id":133688390,"body_markdown":"(0)  Test Environment: `Ubuntu 20.04` , JDK: `OpenJDK Runtime Environment Temurin-17.0.6+10 (build 17.0.6+10)` , IDE: IDEA `IntelliJ IDEA 2022.3.2 (Community Edition)`\n(1) Run your code: WORK, get screenshot.png (2) Run your code with  `System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;);` , WORK, get creenshot.png (3) Run your code with  `System.setProperty(&quot;java.awt.headless&quot;, &quot;true&quot;);` , get ERROR  `Exception in thread &quot;main&quot; java.awt.AWTException: headless environment` YES, Beacuse I set `headless`is `true`, (4)  I can&#39;t reproduce your error, on my environment.","body":"(0)  Test Environment: <code>Ubuntu 20.04</code> , JDK: <code>OpenJDK Runtime Environment Temurin-17.0.6+10 (build 17.0.6+10)</code> , IDE: IDEA <code>IntelliJ IDEA 2022.3.2 (Community Edition)</code> (1) Run your code: WORK, get screenshot.png (2) Run your code with  <code>System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;);</code> , WORK, get creenshot.png (3) Run your code with  <code>System.setProperty(&quot;java.awt.headless&quot;, &quot;true&quot;);</code> , get ERROR  <code>Exception in thread &quot;main&quot; java.awt.AWTException: headless environment</code> YES, Beacuse I set <code>headless</code>is <code>true</code>, (4)  I can&#39;t reproduce your error, on my environment."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679303838,"post_id":75752931,"comment_id":133690814,"body_markdown":"If set `System.setProperty(&quot;java.awt.headless&quot;, &quot;true&quot;);` , will get `Exception in thread &quot;main&quot; java.awt.AWTException: headless environment` , NOT  YOUR EXCEPTION`java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment`","body":"If set <code>System.setProperty(&quot;java.awt.headless&quot;, &quot;true&quot;);</code> , will get <code>Exception in thread &quot;main&quot; java.awt.AWTException: headless environment</code> , NOT  YOUR EXCEPTION<code>java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment</code>"},{"owner":{"account_id":28029801,"reputation":1,"user_id":21409171,"display_name":"nimesh"},"score":0,"creation_date":1679382030,"post_id":75752931,"comment_id":133706987,"body_markdown":"Now i am getting error like :\n Handler dispatch failed; nested exception is java.awt.AWTError: Can&#39;t connect to X11 window server using &#39;:0.0&#39; as the value of the DISPLAY variable","body":"Now i am getting error like :  Handler dispatch failed; nested exception is java.awt.AWTError: Can&#39;t connect to X11 window server using &#39;:0.0&#39; as the value of the DISPLAY variable"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679385550,"post_id":75752931,"comment_id":133707678,"body_markdown":"I guess you should first confirm whether your AWS Server has a GUI (Desktop) installed?","body":"I guess you should first confirm whether your AWS Server has a GUI (Desktop) installed?"},{"owner":{"account_id":28029801,"reputation":1,"user_id":21409171,"display_name":"nimesh"},"score":0,"creation_date":1679474087,"post_id":75752931,"comment_id":133726664,"body_markdown":"Desktop is not installed.","body":"Desktop is not installed."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679480819,"post_id":75752931,"comment_id":133728338,"body_markdown":"You must install the Linux GUI `xorg` libraries. then add `-Djava.awt.headless=true`","body":"You must install the Linux GUI <code>xorg</code> libraries. then add <code>-Djava.awt.headless=true</code>"},{"owner":{"account_id":28029801,"reputation":1,"user_id":21409171,"display_name":"nimesh"},"score":0,"creation_date":1679542595,"post_id":75752931,"comment_id":133741742,"body_markdown":"-Djava.awt.headless=true gives java.awt.AWTException: headless environment exception.","body":"-Djava.awt.headless=true gives java.awt.AWTException: headless environment exception."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679543792,"post_id":75752931,"comment_id":133741858,"body_markdown":"then REMOVE this `-Djava.awt.headless=true`","body":"then REMOVE this <code>-Djava.awt.headless=true</code>"}],"owner":{"account_id":28029801,"reputation":1,"user_id":21409171,"display_name":"nimesh"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679421047,"creation_date":1678949602,"question_id":75752931,"body_markdown":"I am using AWS linux server but i get error like :  java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment \r\n\r\nI take a screenshot using java.awt.robot class \r\n\r\nHere is my code : \r\n\r\n```\r\nimport java.awt.Rectangle;\r\nimport java.awt.Robot;\r\nimport java.awt.Toolkit;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport javax.imageio.ImageIO;&#160;public class DesktopScreenshot {\r\n&#160;&#160;&#160; public static void main(String[] args) throws Exception {\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; Robot robot = new Robot();\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; Rectangle screenShot = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; BufferedImage screenFullImage = robot.createScreenCapture(screenShot);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; File screenshotFile = new File(&quot;screenshot.png&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; ImageIO.write(screenFullImage, &quot;png&quot;, screenshotFile);\r\n&#160;&#160;&#160; }\r\n}\r\n```\r\n\r\nSet headless Property :  System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;)\r\nthen i get java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment \r\n\r\nand when i set this Property this to true it gives &quot;headless environment exception&quot;\r\n\r\nHere i try some solution :\r\n\r\nset environment Variable : -Djava.awt.headless=false\r\n\r\nInstall X11 server on linux server and add dependencies \r\n\r\nset DISPLAY variable : export DISPLAY=0.0 and also try export DISPLAY&lt;ip-address&gt;=0.0 and also unser Display varible\r\n\r\nAlso add dependency and library for sun.awt.X11GraphicsEnvironment \r\n\r\nNothing works out.\r\n\r\nAnybody has solution or knowledge about this problem?\r\n","title":"How to Use sun.awt.X11GraphicsEnvironment on linux server?","body":"<p>I am using AWS linux server but i get error like :  java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment</p>\n<p>I take a screenshot using java.awt.robot class</p>\n<p>Here is my code :</p>\n<pre><code>import java.awt.Rectangle;\nimport java.awt.Robot;\nimport java.awt.Toolkit;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.imageio.ImageIO; public class DesktopScreenshot {\n    public static void main(String[] args) throws Exception {\n        Robot robot = new Robot();\n        Rectangle screenShot = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());\n        BufferedImage screenFullImage = robot.createScreenCapture(screenShot);\n        File screenshotFile = new File(&quot;screenshot.png&quot;);\n        ImageIO.write(screenFullImage, &quot;png&quot;, screenshotFile);\n    }\n}\n</code></pre>\n<p>Set headless Property :  System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;)\nthen i get java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment</p>\n<p>and when i set this Property this to true it gives &quot;headless environment exception&quot;</p>\n<p>Here i try some solution :</p>\n<p>set environment Variable : -Djava.awt.headless=false</p>\n<p>Install X11 server on linux server and add dependencies</p>\n<p>set DISPLAY variable : export DISPLAY=0.0 and also try export DISPLAY=0.0 and also unser Display varible</p>\n<p>Also add dependency and library for sun.awt.X11GraphicsEnvironment</p>\n<p>Nothing works out.</p>\n<p>Anybody has solution or knowledge about this problem?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":25618515,"reputation":11,"user_id":19590809,"display_name":"Meruem"},"score":0,"creation_date":1679359284,"post_id":75796420,"comment_id":133704560,"body_markdown":"You can use the Collectors.groupingBy() collector along with the Collectors.summingInt() collector\n\nExample:\n\n      Map&lt;String, Integer&gt; countryToNumStudents = allSchools.collect(\n        Collectors.groupingBy(School::getCountry,\n        Collectors.summingInt(School::getNumStudents)));","body":"You can use the Collectors.groupingBy() collector along with the Collectors.summingInt() collector  Example:        Map&lt;String, Integer&gt; countryToNumStudents = allSchools.collect(         Collectors.groupingBy(School::getCountry,         Collectors.summingInt(School::getNumStudents)));"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":2,"creation_date":1679359304,"post_id":75796420,"comment_id":133704561,"body_markdown":"Could you set up some scaffolding code with sample classes and object lists? That&#39;ll save answerers some time.","body":"Could you set up some scaffolding code with sample classes and object lists? That&#39;ll save answerers some time."}],"answers":[{"tags":[],"owner":{"account_id":24548949,"reputation":977,"user_id":18458353,"display_name":"Charfeddine Mohamed Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679359367,"creation_date":1679359367,"answer_id":75796465,"question_id":75796420,"body_markdown":"you can use the Stream API to group the schools by country and sum the number of students for each country.\r\n\r\n    Map&lt;String, Integer&gt; countryToNumStudents = allSchools\r\n        .collect(Collectors.groupingBy(School::getCountry, Collectors.summingInt(School::getNumStudents)))\r\n\r\nIf you don&#39;t want to use the sream API \r\n\r\n    Map&lt;String, Integer&gt; countryToNumStudents = new HashMap&lt;&gt;();\r\n    for (School school : allSchools) {\r\n        String country = school.getCountry();\r\n        int numStudents = school.getNumStudents();\r\n        if (countryToNumStudents.containsKey(country)) {\r\n            int currentNumStudents = countryToNumStudents.get(country);\r\n            countryToNumStudents.put(country, currentNumStudents + numStudents);\r\n        } else {\r\n            countryToNumStudents.put(country, numStudents);\r\n        }\r\n    }","title":"How to use stream to map the values of an object?","body":"<p>you can use the Stream API to group the schools by country and sum the number of students for each country.</p>\n<pre><code>Map&lt;String, Integer&gt; countryToNumStudents = allSchools\n    .collect(Collectors.groupingBy(School::getCountry, Collectors.summingInt(School::getNumStudents)))\n</code></pre>\n<p>If you don't want to use the sream API</p>\n<pre><code>Map&lt;String, Integer&gt; countryToNumStudents = new HashMap&lt;&gt;();\nfor (School school : allSchools) {\n    String country = school.getCountry();\n    int numStudents = school.getNumStudents();\n    if (countryToNumStudents.containsKey(country)) {\n        int currentNumStudents = countryToNumStudents.get(country);\n        countryToNumStudents.put(country, currentNumStudents + numStudents);\n    } else {\n        countryToNumStudents.put(country, numStudents);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679421038,"creation_date":1679360816,"answer_id":75796566,"question_id":75796420,"body_markdown":"If  you don&#39;t want to use the stream, here is another way.\r\n- Here [Map.compute](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#compute(K,java.util.function.BiFunction)) will set the initial value if absent, or sum the next value to the existing one.\r\n```\r\nMap&lt;String, Long&gt; studentsPerCountry = new HashMap&lt;&gt;();\r\nfor(School school : schools) {\r\n    studentsPerCountry.compute(school.getCountry(), (k,v)-&gt;v == null\r\n            ? school.getNumStudents()\r\n                    : v + school.getNumStudents());\r\n}\r\n```\r\nAnd a simpler method than `Map.compute`, as pointed out in the comments by @VGR and @Holger is to use [Map.merge](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)).  Here is an example.\r\n```\r\nMap&lt;String, Integer&gt; studentsPerCountry = new HashMap&lt;&gt;();\r\nfor(School school : schools) {\r\n    studentsPerCountry.merge(school.getCountry(),\r\n                school.getNumStudents(),  Integer::sum);\r\n}","title":"How to use stream to map the values of an object?","body":"<p>If  you don't want to use the stream, here is another way.</p>\n<ul>\n<li>Here <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#compute(K,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Map.compute</a> will set the initial value if absent, or sum the next value to the existing one.</li>\n</ul>\n<pre><code>Map&lt;String, Long&gt; studentsPerCountry = new HashMap&lt;&gt;();\nfor(School school : schools) {\n    studentsPerCountry.compute(school.getCountry(), (k,v)-&gt;v == null\n            ? school.getNumStudents()\n                    : v + school.getNumStudents());\n}\n</code></pre>\n<p>And a simpler method than <code>Map.compute</code>, as pointed out in the comments by @VGR and @Holger is to use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Map.merge</a>.  Here is an example.</p>\n<pre><code>Map&lt;String, Integer&gt; studentsPerCountry = new HashMap&lt;&gt;();\nfor(School school : schools) {\n    studentsPerCountry.merge(school.getCountry(),\n                school.getNumStudents(),  Integer::sum);\n}\n</code></pre>\n"}],"owner":{"account_id":27971310,"reputation":21,"user_id":21360971,"display_name":"Kevin Li"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1679421038,"creation_date":1679358620,"question_id":75796420,"body_markdown":"Let&#39;s say I have a class named `School`, and objects of this class have `Country` and `numStudents` instance variables. It doesn&#39;t really matter what they are beyond having those qualities, just assume they have a categorical and numerical variable that can be accessed with accessor methods (`getCountry(), getNumStudents()`).\r\n\r\nThe problem is that I want to map all `Country` to `numStudents`.\r\n\r\n```\r\nStream&lt;School&gt; allSchools = {Yale, UCSD, Taipei, ...};\r\n\r\n```\r\nFor example, if `Yale` and `UCSD` both have `USA` as their country, their students would be counted together. The map would look like this:\r\n\r\n`{&#39;USA&#39; : 20000, &#39;Taiwan&#39; : 10000, ...}`\r\n\r\nI know how to use stream to make a frequency map if we are counting duplicates (i.e. map frequency of {A, A, O, B, B}), but I don&#39;t know how to change it around so that it will give me what I want for this application. \r\n","title":"How to use stream to map the values of an object?","body":"<p>Let's say I have a class named <code>School</code>, and objects of this class have <code>Country</code> and <code>numStudents</code> instance variables. It doesn't really matter what they are beyond having those qualities, just assume they have a categorical and numerical variable that can be accessed with accessor methods (<code>getCountry(), getNumStudents()</code>).</p>\n<p>The problem is that I want to map all <code>Country</code> to <code>numStudents</code>.</p>\n<pre><code>Stream&lt;School&gt; allSchools = {Yale, UCSD, Taipei, ...};\n\n</code></pre>\n<p>For example, if <code>Yale</code> and <code>UCSD</code> both have <code>USA</code> as their country, their students would be counted together. The map would look like this:</p>\n<p><code>{'USA' : 20000, 'Taiwan' : 10000, ...}</code></p>\n<p>I know how to use stream to make a frequency map if we are counting duplicates (i.e. map frequency of {A, A, O, B, B}), but I don't know how to change it around so that it will give me what I want for this application.</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":12205661,"reputation":332,"user_id":8908834,"display_name":"Mauricio Buffon"},"score":0,"creation_date":1679399482,"post_id":75795374,"comment_id":133711279,"body_markdown":"Which database are you using?","body":"Which database are you using?"},{"owner":{"account_id":24931076,"reputation":55,"user_id":18798172,"display_name":"vbnm"},"score":1,"creation_date":1679400020,"post_id":75795374,"comment_id":133711432,"body_markdown":"@MauricioBuffon MySQL","body":"@MauricioBuffon MySQL"},{"owner":{"account_id":12205661,"reputation":332,"user_id":8908834,"display_name":"Mauricio Buffon"},"score":0,"creation_date":1679401826,"post_id":75795374,"comment_id":133711914,"body_markdown":"Ok, I had a similar issue in the past. If I remember correctly, it happened because the database didn&#39;t accept identity columns. But this is not the case with MySQL. My suggestion is to specify the dialect for the persistence provider. If you are using Hibernate, this is done by adding `&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;` on `persistence.xml` file.","body":"Ok, I had a similar issue in the past. If I remember correctly, it happened because the database didn&#39;t accept identity columns. But this is not the case with MySQL. My suggestion is to specify the dialect for the persistence provider. If you are using Hibernate, this is done by adding <code>&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; &#47;&gt;</code> on <code>persistence.xml</code> file."}],"answers":[{"tags":[],"owner":{"account_id":18764744,"reputation":15,"user_id":13682889,"display_name":"Milan Dol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679347389,"creation_date":1679347389,"answer_id":75795438,"question_id":75795374,"body_markdown":"You can try to use: \r\n```\r\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_gen_name&quot;)\r\n@SequenceGenerator(name = &quot;seq_gen_name&quot;, sequenceName = &quot;my_sequence&quot;, initialValue = 1000, allocationSize = 1)\r\n```\r\nIn this example name is the name of the sequence generator,\r\nsequenceName is the name of the database sequence to use,\r\ninitialValue is the initial value of the sequence and\r\nallocationSize is the increment size of the sequence.\r\n\r\nNote: The SEQUENCE strategy requires a database sequence to be created, so you&#39;ll need to ensure that your database supports sequences and that the sequence is created before running your (JPA) application.","title":"JPA autogenerate id from a starting point without creating that separate id table","body":"<p>You can try to use:</p>\n<pre><code>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_gen_name&quot;)\n@SequenceGenerator(name = &quot;seq_gen_name&quot;, sequenceName = &quot;my_sequence&quot;, initialValue = 1000, allocationSize = 1)\n</code></pre>\n<p>In this example name is the name of the sequence generator,\nsequenceName is the name of the database sequence to use,\ninitialValue is the initial value of the sequence and\nallocationSize is the increment size of the sequence.</p>\n<p>Note: The SEQUENCE strategy requires a database sequence to be created, so you'll need to ensure that your database supports sequences and that the sequence is created before running your (JPA) application.</p>\n"},{"tags":[],"owner":{"account_id":12205661,"reputation":332,"user_id":8908834,"display_name":"Mauricio Buffon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679420402,"creation_date":1679420402,"answer_id":75804658,"question_id":75795374,"body_markdown":"I&#39;m not an expert in MySQL, but searching the web it seems that MySQL doesn&#39;t support sequences - at least, stricto sensu. So either you use `GenerationType.IDENTITY` or `GenerationType.TABLE`.\r\n\r\nIn order to prove the concept, let&#39;s code a little. In the following examples, I will show the entity class, its metadata, and the SQL the persistence provider generated based on them.\r\n\r\nGenerationType.IDENTITY\r\n-----------------------\r\n\r\nThe entity class:\r\n\r\n```java\r\n@Entity\r\npublic class EntityOne {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n}\r\n```\r\n\r\nThe generated SQL:\r\n\r\n```sql\r\ncreate table EntityOne (id integer not null auto_increment, primary key (id)) engine=InnoDB;\r\n```\r\n\r\nIf you need to start the `AUTO_INCREMENT` column from a specific value, as per the [documentation](https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html), a possible solution is to insert a row with that value and then delete it.\r\n\r\n\r\nGenerationType.SEQUENCE\r\n-----------------------\r\n\r\nThe entity class:\r\n\r\n```java\r\n@Entity\r\npublic class EntityTwo {\r\n\r\n    @Id\r\n    @SequenceGenerator(name = &quot;EntityTwoSequence&quot;, initialValue = 1000)\r\n    @GeneratedValue(generator = &quot;EntityTwoSequence&quot;)\r\n    private Integer id;\r\n}\r\n```\r\n\r\nThe generated SQL:\r\n\r\n```sql\r\ncreate table EntityTwo (id integer not null, primary key (id)) engine=InnoDB;\r\ncreate table EntityTwoSequence (next_val bigint) engine=InnoDB;\r\ninsert into EntityTwoSequence values ( 1000 );\r\n```\r\n\r\nAgain, this is because MySQL does not support sequences. If the database used were one that supports sequences, a sequence creation would be seen above.\r\n\r\nGenerationType.TABLE\r\n--------------------\r\n\r\nThe entity class:\r\n\r\n```java\r\n@Entity\r\n@TableGenerator(name = &quot;MySequenceGenerator&quot;)\r\npublic class EntityThree {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;MySequenceGenerator&quot;)\r\n    private Integer id;\r\n}\r\n```\r\n\r\nThe generated SQL:\r\n\r\n```sql\r\ncreate table EntityThree (id integer not null, primary key (id)) engine=InnoDB;\r\ncreate table MySequenceGenerator (sequence_name varchar(255) not null, next_val bigint, primary key (sequence_name)) engine=InnoDB;\r\ninsert into MySequenceGenerator(sequence_name, next_val) values (&#39;EntityThree&#39;,0);\r\n```\r\n\r\nIt looks like the difference between `@SequenceGenerator` and `@TableGenerator` in MySQL is that `@TableGenerator` creates only one table with multiple rows to manage all the ids that reference it (the expected behavior, by the way), while `@SequenceGenerator` creates a table for each annotation.\r\n\r\nGenerationType.UUID\r\n-------------------\r\n\r\nI decided - why not?, to see what happens when using the UUID generation type.\r\n\r\nThe entity class:\r\n\r\n```java\r\n@Entity\r\npublic class EntityFour {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private UUID id;\r\n}\r\n```\r\n\r\nThe generated SQL:\r\n\r\n```sql\r\ncreate table EntityFour (id binary(16) not null, primary key (id)) engine=InnoDB;\r\n```\r\n\r\nOnly the table is created. This suggests that the id generation, in this case, is managed by the persistence provider - which is actually what the [specification says](https://jakarta.ee/specifications/persistence/3.1/jakarta-persistence-spec-3.1.html#a14790).\r\n\r\nIMPORTANT\r\n---------\r\n\r\n1. I suggest you to set the dialect property of your persistence provider. Normally, this is done in the `persistence.xml` file. If you are using Hibernate, you should add the following line:\r\n\r\n```xml\r\n&lt;persistence ...&gt;\r\n    ...\r\n    &lt;persistence-unit ...&gt;\r\n        ...\r\n        &lt;properties&gt;\r\n            ...\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\n2. To enable the SQL script schema generation, you have to set in `persistence.xml` file the properties `jakarta.persistence.schema-generation.scripts.action` and `jakarta.persistence.schema-generation.scripts.create-target`.\r\n\r\n3. Note that the `next_val` columns are defined as `bigint`. So, if you are going to use a sequence or table generator, I suggest you to set the entity id field as a Long.\r\n","title":"JPA autogenerate id from a starting point without creating that separate id table","body":"<p>I'm not an expert in MySQL, but searching the web it seems that MySQL doesn't support sequences - at least, stricto sensu. So either you use <code>GenerationType.IDENTITY</code> or <code>GenerationType.TABLE</code>.</p>\n<p>In order to prove the concept, let's code a little. In the following examples, I will show the entity class, its metadata, and the SQL the persistence provider generated based on them.</p>\n<h2>GenerationType.IDENTITY</h2>\n<p>The entity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class EntityOne {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n}\n</code></pre>\n<p>The generated SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table EntityOne (id integer not null auto_increment, primary key (id)) engine=InnoDB;\n</code></pre>\n<p>If you need to start the <code>AUTO_INCREMENT</code> column from a specific value, as per the <a href=\"https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html\" rel=\"nofollow noreferrer\">documentation</a>, a possible solution is to insert a row with that value and then delete it.</p>\n<h2>GenerationType.SEQUENCE</h2>\n<p>The entity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class EntityTwo {\n\n    @Id\n    @SequenceGenerator(name = &quot;EntityTwoSequence&quot;, initialValue = 1000)\n    @GeneratedValue(generator = &quot;EntityTwoSequence&quot;)\n    private Integer id;\n}\n</code></pre>\n<p>The generated SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table EntityTwo (id integer not null, primary key (id)) engine=InnoDB;\ncreate table EntityTwoSequence (next_val bigint) engine=InnoDB;\ninsert into EntityTwoSequence values ( 1000 );\n</code></pre>\n<p>Again, this is because MySQL does not support sequences. If the database used were one that supports sequences, a sequence creation would be seen above.</p>\n<h2>GenerationType.TABLE</h2>\n<p>The entity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@TableGenerator(name = &quot;MySequenceGenerator&quot;)\npublic class EntityThree {\n\n    @Id\n    @GeneratedValue(generator = &quot;MySequenceGenerator&quot;)\n    private Integer id;\n}\n</code></pre>\n<p>The generated SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table EntityThree (id integer not null, primary key (id)) engine=InnoDB;\ncreate table MySequenceGenerator (sequence_name varchar(255) not null, next_val bigint, primary key (sequence_name)) engine=InnoDB;\ninsert into MySequenceGenerator(sequence_name, next_val) values ('EntityThree',0);\n</code></pre>\n<p>It looks like the difference between <code>@SequenceGenerator</code> and <code>@TableGenerator</code> in MySQL is that <code>@TableGenerator</code> creates only one table with multiple rows to manage all the ids that reference it (the expected behavior, by the way), while <code>@SequenceGenerator</code> creates a table for each annotation.</p>\n<h2>GenerationType.UUID</h2>\n<p>I decided - why not?, to see what happens when using the UUID generation type.</p>\n<p>The entity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class EntityFour {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n}\n</code></pre>\n<p>The generated SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table EntityFour (id binary(16) not null, primary key (id)) engine=InnoDB;\n</code></pre>\n<p>Only the table is created. This suggests that the id generation, in this case, is managed by the persistence provider - which is actually what the <a href=\"https://jakarta.ee/specifications/persistence/3.1/jakarta-persistence-spec-3.1.html#a14790\" rel=\"nofollow noreferrer\">specification says</a>.</p>\n<h2>IMPORTANT</h2>\n<ol>\n<li>I suggest you to set the dialect property of your persistence provider. Normally, this is done in the <code>persistence.xml</code> file. If you are using Hibernate, you should add the following line:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;persistence ...&gt;\n    ...\n    &lt;persistence-unit ...&gt;\n        ...\n        &lt;properties&gt;\n            ...\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<ol start=\"2\">\n<li><p>To enable the SQL script schema generation, you have to set in <code>persistence.xml</code> file the properties <code>jakarta.persistence.schema-generation.scripts.action</code> and <code>jakarta.persistence.schema-generation.scripts.create-target</code>.</p>\n</li>\n<li><p>Note that the <code>next_val</code> columns are defined as <code>bigint</code>. So, if you are going to use a sequence or table generator, I suggest you to set the entity id field as a Long.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":24931076,"reputation":55,"user_id":18798172,"display_name":"vbnm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1023,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75804658,"answer_count":2,"score":1,"last_activity_date":1679420402,"creation_date":1679346873,"question_id":75795374,"body_markdown":"In JPA I want to autogenerate an integer primary key where the generation should start from, say, 1000. I&#39;m new to JPA and I have used IDENTITY type earlier to avoid those extra id tables that JPA otherwise generates. I&#39;ve tried using SEQUENCE but it generates a seperate id table as well. \r\n\r\nEarlier code:\r\n\r\n    @Id\r\n    @Column(length = 4)\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Integer reservationId;\r\n\r\nFor what I can see, you can&#39;t get IDENTITY to increment from a specified starting point.\r\n\r\nIs there any way I can use JPA to increment from a starting point and not get extra id tables? ","title":"JPA autogenerate id from a starting point without creating that separate id table","body":"<p>In JPA I want to autogenerate an integer primary key where the generation should start from, say, 1000. I'm new to JPA and I have used IDENTITY type earlier to avoid those extra id tables that JPA otherwise generates. I've tried using SEQUENCE but it generates a seperate id table as well.</p>\n<p>Earlier code:</p>\n<pre><code>@Id\n@Column(length = 4)\n@GeneratedValue (strategy = GenerationType.IDENTITY)\nprivate Integer reservationId;\n</code></pre>\n<p>For what I can see, you can't get IDENTITY to increment from a specified starting point.</p>\n<p>Is there any way I can use JPA to increment from a starting point and not get extra id tables?</p>\n"},{"tags":["java","sql","jpa","jpql"],"comments":[{"owner":{"account_id":12205661,"reputation":332,"user_id":8908834,"display_name":"Mauricio Buffon"},"score":0,"creation_date":1679460120,"post_id":75804302,"comment_id":133724575,"body_markdown":"Just to validate my understanding: you&#39;re expecting that all elements in `AWSPriceSheet @OneToMany List` in the `AWSUtilization` entity obey the filters specified in the WHERE clause of the JPQL? If so, it won&#39;t. You&#39;re retrieving `AWSUtilization` entities. Suppose that one `AWSUtilization` entity has 4 `AWSPriceSheet` entities and just one of them satisfy the query filters; well, the entity will be returned - and with it, all the others entities it relates to.","body":"Just to validate my understanding: you&#39;re expecting that all elements in <code>AWSPriceSheet @OneToMany List</code> in the <code>AWSUtilization</code> entity obey the filters specified in the WHERE clause of the JPQL? If so, it won&#39;t. You&#39;re retrieving <code>AWSUtilization</code> entities. Suppose that one <code>AWSUtilization</code> entity has 4 <code>AWSPriceSheet</code> entities and just one of them satisfy the query filters; well, the entity will be returned - and with it, all the others entities it relates to."}],"owner":{"account_id":19578254,"reputation":43,"user_id":14327899,"display_name":"Colin Harker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679420165,"creation_date":1679418419,"question_id":75804302,"body_markdown":"I have the following Query,\r\n```sql\r\n@Query(&quot;SELECT DISTINCT a FROM AWSUtilization a&quot; +\r\n\t\t\t&quot; JOIN fetch a.cloudAccount c LEFT JOIN a.returnedReservationOrder r JOIN a.awsPriceSheets aps&quot; +\r\n\t\t\t&quot; WHERE c.costCenterId in (:costCenterId)&quot; +\r\n\t\t\t&quot; AND c.type=&#39;AWS&#39;&quot; +\r\n\t\t\t&quot; AND c.status=&#39;ACTIVE&#39;&quot; +\r\n\t\t\t&quot; AND a.riUtilization&lt;=:riUtilization&quot; +\r\n\t\t\t&quot; AND a.offeringType=&#39;Convertible&#39;&quot; +\r\n\t\t\t&quot; AND a.period=:period&quot; +\r\n\t\t\t&quot; AND a.state=&#39;active&#39; AND (r.riStatus IS NULL OR r.riStatus NOT IN (&#39;Completed&#39;, &#39;Pending&#39;))&quot; +\r\n\t\t\t&quot; AND aps.licenseModel=&#39;No License required&#39;&quot; +\r\n\t\t\t&quot; AND aps.operatingSystem IN (SELECT DISTINCT apm.propertyName FROM a.awsPropertyNameMappings apm WHERE apm.propertyType = &#39;OS&#39; AND a.platform = apm.propertyName)&quot; +\r\n\t\t\t&quot; AND aps.preInstalled IN (SELECT DISTINCT apm.propertyName FROM a.awsPropertyNameMappings apm WHERE apm.propertyType = &#39;PRE_INSTALLED&#39; AND a.platform = apm.propertyName)&quot; +\r\n\t\t\t&quot; AND aps.offeringClass=&#39;convertible&#39;&quot; +\r\n\t\t\t&quot; AND CONCAT(CAST(a.term AS string), &#39;yr&#39;) = aps.leaseContractLength&quot;)\r\n```\r\n\r\nThis returns a list of AWSUtilization objects, here is the important information from the class.\r\n\r\n```java\r\npublic class AWSUtilization implements Serializable {\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(\r\n        name = &quot;account_id&quot;,\r\n        referencedColumnName = &quot;account_id&quot;,insertable=false,updatable=false\r\n    )\r\n\tprivate CloudAccount cloudAccount;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY)\r\n\t@JoinColumn(\r\n\t\t\tname = &quot;reservation_id&quot;,\r\n\t\t\treferencedColumnName = &quot;reservation_id&quot;,insertable=false,updatable=false\r\n\t)\r\n\tprivate List&lt;ReturnedReservationOrder&gt; returnedReservationOrder;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY)\r\n\t@JoinColumn(\r\n\t\t\tname = &quot;property_name&quot;,\r\n\t\t\treferencedColumnName = &quot;platform&quot;, insertable = false, updatable = false\r\n\t)\r\n\tprivate List&lt;AWSPropertyNameMapping&gt; awsPropertyNameMappings;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;instance_type&quot;, referencedColumnName = &quot;instance_type&quot;,insertable=false,updatable=false)\r\n\t@JoinColumn(name = &quot;region&quot;, referencedColumnName = &quot;region&quot;,insertable=false,updatable=false)\r\n\t@JoinColumn(name = &quot;tenancy&quot;, referencedColumnName = &quot;tenancy&quot;,insertable=false,updatable=false)\r\n\t@JoinColumn(name = &quot;purchase_option&quot;, referencedColumnName = &quot;payment_option&quot;,insertable=false,updatable=false)\r\n\tprivate List&lt;AWSPriceSheet&gt; awsPriceSheets;\r\n```\r\n\r\nThe issue I have with the query is that it is not filtering anything that I specified in the query for the AWSPriceSheet objects which are marked with the @OneToMany relationship.\r\n\r\nThe result from the following is the same as the result from the intended query. Is there something I am missing when trying to narrow the results from @OneToMany relationship?\r\n```sql\r\n@Query(&quot;SELECT DISTINCT a FROM AWSUtilization a&quot; +\r\n            &quot; JOIN fetch a.cloudAccount c LEFT JOIN a.returnedReservationOrder r JOIN a.awsPriceSheets aps&quot; +\r\n            &quot; WHERE c.costCenterId in (:costCenterId)&quot; +\r\n            &quot; AND c.type=&#39;AWS&#39;&quot; +\r\n            &quot; AND c.status=&#39;ACTIVE&#39;&quot; +\r\n            &quot; AND a.riUtilization&lt;=:riUtilization&quot; +\r\n            &quot; AND a.offeringType=&#39;Convertible&#39;&quot; +\r\n            &quot; AND a.period=:period&quot; +\r\n            &quot; AND a.state=&#39;active&#39; AND (r.riStatus IS NULL OR r.riStatus NOT IN (&#39;Completed&#39;, &#39;Pending&#39;))&quot; +\r\n```","title":"JPQL Query not working for @OneToMany Mapping","body":"<p>I have the following Query,</p>\n<pre class=\"lang-sql prettyprint-override\"><code>@Query(&quot;SELECT DISTINCT a FROM AWSUtilization a&quot; +\n            &quot; JOIN fetch a.cloudAccount c LEFT JOIN a.returnedReservationOrder r JOIN a.awsPriceSheets aps&quot; +\n            &quot; WHERE c.costCenterId in (:costCenterId)&quot; +\n            &quot; AND c.type='AWS'&quot; +\n            &quot; AND c.status='ACTIVE'&quot; +\n            &quot; AND a.riUtilization&lt;=:riUtilization&quot; +\n            &quot; AND a.offeringType='Convertible'&quot; +\n            &quot; AND a.period=:period&quot; +\n            &quot; AND a.state='active' AND (r.riStatus IS NULL OR r.riStatus NOT IN ('Completed', 'Pending'))&quot; +\n            &quot; AND aps.licenseModel='No License required'&quot; +\n            &quot; AND aps.operatingSystem IN (SELECT DISTINCT apm.propertyName FROM a.awsPropertyNameMappings apm WHERE apm.propertyType = 'OS' AND a.platform = apm.propertyName)&quot; +\n            &quot; AND aps.preInstalled IN (SELECT DISTINCT apm.propertyName FROM a.awsPropertyNameMappings apm WHERE apm.propertyType = 'PRE_INSTALLED' AND a.platform = apm.propertyName)&quot; +\n            &quot; AND aps.offeringClass='convertible'&quot; +\n            &quot; AND CONCAT(CAST(a.term AS string), 'yr') = aps.leaseContractLength&quot;)\n</code></pre>\n<p>This returns a list of AWSUtilization objects, here is the important information from the class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AWSUtilization implements Serializable {\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(\n        name = &quot;account_id&quot;,\n        referencedColumnName = &quot;account_id&quot;,insertable=false,updatable=false\n    )\n    private CloudAccount cloudAccount;\n\n    @OneToMany(fetch = FetchType.LAZY)\n    @JoinColumn(\n            name = &quot;reservation_id&quot;,\n            referencedColumnName = &quot;reservation_id&quot;,insertable=false,updatable=false\n    )\n    private List&lt;ReturnedReservationOrder&gt; returnedReservationOrder;\n\n    @OneToMany(fetch = FetchType.LAZY)\n    @JoinColumn(\n            name = &quot;property_name&quot;,\n            referencedColumnName = &quot;platform&quot;, insertable = false, updatable = false\n    )\n    private List&lt;AWSPropertyNameMapping&gt; awsPropertyNameMappings;\n\n    @OneToMany(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;instance_type&quot;, referencedColumnName = &quot;instance_type&quot;,insertable=false,updatable=false)\n    @JoinColumn(name = &quot;region&quot;, referencedColumnName = &quot;region&quot;,insertable=false,updatable=false)\n    @JoinColumn(name = &quot;tenancy&quot;, referencedColumnName = &quot;tenancy&quot;,insertable=false,updatable=false)\n    @JoinColumn(name = &quot;purchase_option&quot;, referencedColumnName = &quot;payment_option&quot;,insertable=false,updatable=false)\n    private List&lt;AWSPriceSheet&gt; awsPriceSheets;\n</code></pre>\n<p>The issue I have with the query is that it is not filtering anything that I specified in the query for the AWSPriceSheet objects which are marked with the @OneToMany relationship.</p>\n<p>The result from the following is the same as the result from the intended query. Is there something I am missing when trying to narrow the results from @OneToMany relationship?</p>\n<pre class=\"lang-sql prettyprint-override\"><code>@Query(&quot;SELECT DISTINCT a FROM AWSUtilization a&quot; +\n            &quot; JOIN fetch a.cloudAccount c LEFT JOIN a.returnedReservationOrder r JOIN a.awsPriceSheets aps&quot; +\n            &quot; WHERE c.costCenterId in (:costCenterId)&quot; +\n            &quot; AND c.type='AWS'&quot; +\n            &quot; AND c.status='ACTIVE'&quot; +\n            &quot; AND a.riUtilization&lt;=:riUtilization&quot; +\n            &quot; AND a.offeringType='Convertible'&quot; +\n            &quot; AND a.period=:period&quot; +\n            &quot; AND a.state='active' AND (r.riStatus IS NULL OR r.riStatus NOT IN ('Completed', 'Pending'))&quot; +\n</code></pre>\n"},{"tags":["java","reflection","module-info","project-loom","virtual-threads"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1679139638,"post_id":75775492,"comment_id":133670031,"body_markdown":"Consider creating a multi-release JAR instead, with specific code for Java 19, and alternative code for Java 17. Though to be honest, I&#39;m not sure that will work, because virtual threads are a preview feature.","body":"Consider creating a multi-release JAR instead, with specific code for Java 19, and alternative code for Java 17. Though to be honest, I&#39;m not sure that will work, because virtual threads are a preview feature."}],"answers":[{"tags":[],"owner":{"account_id":4844356,"reputation":462,"user_id":5852531,"display_name":"Thiago Henrique Hupner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679319768,"creation_date":1679319768,"answer_id":75791015,"question_id":75775492,"body_markdown":"You can use the Expression class from java.beans package (from java.desktop module)\r\n     \r\n     import java.beans.Expression;\r\n     var builder = new Expression(Thread.class, &quot;ofVirtual&quot;, null).getValue();\r\n     builder = new Expression(builder, &quot;name&quot;, new Object[] {&quot;ABC&quot;}).getValue();\r\n     var factory = new Expression(builder, &quot;factory&quot;, null).getValue();","title":"How to detect virtual threads on java 19","body":"<p>You can use the Expression class from java.beans package (from java.desktop module)</p>\n<pre><code> import java.beans.Expression;\n var builder = new Expression(Thread.class, &quot;ofVirtual&quot;, null).getValue();\n builder = new Expression(builder, &quot;name&quot;, new Object[] {&quot;ABC&quot;}).getValue();\n var factory = new Expression(builder, &quot;factory&quot;, null).getValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679420018,"creation_date":1679391433,"answer_id":75799462,"question_id":75775492,"body_markdown":"You can [use `Expression` from the `java.beans` package] if you don’t mind creating a dependency to the `java.desktop` module, but it’s worth highlighting what it does different than your approach.\r\n\r\nYou issue is not specific to the module system, but a widespread wrong use of the Reflection API. When you use `getClass()`, you get the actual (implementation) class of an object and it’s possible that this class is not `public` and hence, the methods you get with `getClass().getMethod(…)` are inaccessible despite overriding or implementing a `public`, accessible API.\r\n\r\nInstead of trying to hotfix this by calling `setAccessible(true)` on the method, you should try to navigate to the right API class, either via `getSuperclass()` or `getInterfaces()`. In this specific case, we want the [`Thread.Builder.OfVirtual` interface] which matches the declared return type of [`Thread.ofVirtual()`]:\r\n\r\n```java\r\nprivate static ThreadFactory tf() {\r\n    Optional&lt;Method&gt; virtual = Arrays.stream(Thread.class.getMethods())\r\n        .filter(m -&gt; m.getParameterCount() == 0 &amp;&amp; m.getName().equals(&quot;ofVirtual&quot;))\r\n        .findAny();\r\n\r\n    if(virtual.isPresent()) {\r\n        try {\r\n            Method method = virtual.orElseThrow();\r\n            Object b = method.invoke(null);\r\n         // matches b.getClass().getInterfaces()[0]\r\n         //   but method.getReturnType() is more reliable\r\n            Class&lt;?&gt; factoryClass = method.getReturnType();\r\n            b = factoryClass.getMethod(&quot;name&quot;, String.class, long.class)\r\n                .invoke(b, &quot;prefix-&quot;, 1L);\r\n            return (ThreadFactory)factoryClass.getMethod(&quot;factory&quot;).invoke(b);\r\n        }\r\n        catch(ReflectiveOperationException t) {\r\n            throw new RuntimeException(t);\r\n        }\r\n    }\r\n    else {\r\n        return Thread::new;\r\n    }\r\n}\r\n```\r\n\r\n[use `Expression` from the `java.beans` package]: https://stackoverflow.com/a/75791015/2711488\r\n[`Thread.Builder.OfVirtual` interface]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Thread.Builder.OfVirtual.html\r\n[`Thread.ofVirtual()`]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Thread.html#ofVirtual()","title":"How to detect virtual threads on java 19","body":"<p>You can <a href=\"https://stackoverflow.com/a/75791015/2711488\">use <code>Expression</code> from the <code>java.beans</code> package</a> if you don’t mind creating a dependency to the <code>java.desktop</code> module, but it’s worth highlighting what it does different than your approach.</p>\n<p>You issue is not specific to the module system, but a widespread wrong use of the Reflection API. When you use <code>getClass()</code>, you get the actual (implementation) class of an object and it’s possible that this class is not <code>public</code> and hence, the methods you get with <code>getClass().getMethod(…)</code> are inaccessible despite overriding or implementing a <code>public</code>, accessible API.</p>\n<p>Instead of trying to hotfix this by calling <code>setAccessible(true)</code> on the method, you should try to navigate to the right API class, either via <code>getSuperclass()</code> or <code>getInterfaces()</code>. In this specific case, we want the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Thread.Builder.OfVirtual.html\" rel=\"nofollow noreferrer\"><code>Thread.Builder.OfVirtual</code> interface</a> which matches the declared return type of <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Thread.html#ofVirtual()\" rel=\"nofollow noreferrer\"><code>Thread.ofVirtual()</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static ThreadFactory tf() {\n    Optional&lt;Method&gt; virtual = Arrays.stream(Thread.class.getMethods())\n        .filter(m -&gt; m.getParameterCount() == 0 &amp;&amp; m.getName().equals(&quot;ofVirtual&quot;))\n        .findAny();\n\n    if(virtual.isPresent()) {\n        try {\n            Method method = virtual.orElseThrow();\n            Object b = method.invoke(null);\n         // matches b.getClass().getInterfaces()[0]\n         //   but method.getReturnType() is more reliable\n            Class&lt;?&gt; factoryClass = method.getReturnType();\n            b = factoryClass.getMethod(&quot;name&quot;, String.class, long.class)\n                .invoke(b, &quot;prefix-&quot;, 1L);\n            return (ThreadFactory)factoryClass.getMethod(&quot;factory&quot;).invoke(b);\n        }\n        catch(ReflectiveOperationException t) {\n            throw new RuntimeException(t);\n        }\n    }\n    else {\n        return Thread::new;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6412021,"reputation":1101,"user_id":4971476,"display_name":"Dave Ankin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75791015,"answer_count":2,"score":1,"last_activity_date":1679420018,"creation_date":1679138126,"question_id":75775492,"body_markdown":"Lets say I want to ship a program that runs on java 17 as that is what is available widely, but use reflection to detect if im running on a vm with the ability to produce a thread factory via `Thread.ofVirtual().name(&quot;abc&quot;).factory()`. Java prohibits reflective access to its internals when they are not properly configured with modules. How do I configure my program to be able to access this method reflectively? The reason for reflective access is to continue compiling into &lt;jdk19 bytecode, but use reflection to use jdk19 features if they are present. Is there a combination of arguments or `module-info.java` contents that can achieve this goal, or is this not possible?\r\n\r\nwhen you try this in jshell, here is what you get:\r\n\r\n```console\r\njshell --enable-preview\r\n|  Welcome to JShell -- Version 19.0.2\r\n|  For an introduction type: /help intro\r\n\r\njshell&gt; Thread.class.getMethod(&quot;ofVirtual&quot;)\r\n   ...&gt;                 .invoke(null)\r\n   ...&gt;                 .getClass()\r\n   ...&gt;                 .getMethod(&quot;name&quot;, String.class, Long.TYPE)\r\n   ...&gt;                 .setAccessible(true)\r\n|  Exception java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Thread$Builder$OfVirtual java.lang.ThreadBuilders$VirtualThreadBuilder.name(java.lang.String,long) accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @30dae81\r\n|        at AccessibleObject.throwInaccessibleObjectException (AccessibleObject.java:387)\r\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:363)\r\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:311)\r\n|        at Method.checkCanSetAccessible (Method.java:201)\r\n|        at Method.setAccessible (Method.java:195)\r\n|        at (#1:5)\r\n\r\n```\r\n\r\n&gt; Exception java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Thread$Builder$OfVirtual java.lang.ThreadBuilders$VirtualThreadBuilder.name(java.lang.String,long) accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @30dae81\r\n\r\nadding `required java.base;` into the `module-info.java` does not seem to change the outcome either:\r\n\r\n```java\r\n// src/main/java/module-info.java\r\nmodule test_20230518_ {\r\n    requires java.base;\r\n}\r\n```\r\n\r\n```java\r\n// src/main/java/a/A.java\r\n\r\npackage a;\r\n\r\nimport java.lang.reflect.Method;\r\nimport java.util.Arrays;\r\nimport java.util.concurrent.ThreadFactory;\r\n\r\npublic class A {\r\n    public static void main(String[] args) {\r\n        ThreadFactory threadFactory = tf();\r\n        threadFactory.newThread(() -&gt;\r\n                System.out.println(&quot;hi from &quot; +\r\n                        Thread.currentThread().getName()));\r\n    }\r\n\r\n    private static ThreadFactory tf() {\r\n        Method[] methods = Thread.class.getMethods();\r\n        boolean haveVirtual = Arrays.stream(methods)\r\n                .anyMatch(m -&gt; m.getName().equals(&quot;ofVirtual&quot;) &amp;&amp;\r\n                        m.getParameterCount() == 0);\r\n\r\n        if (haveVirtual) {\r\n            try {\r\n                Object b = Thread.class.getMethod(&quot;ofVirtual&quot;)\r\n                        .invoke(null);\r\n                b = b.getClass().getMethod(&quot;name&quot;, String.class, Long.TYPE)\r\n                        .invoke(b, &quot;prefix-&quot;, (long) 1);\r\n                b = b.getClass().getMethod(&quot;factory&quot;)\r\n                        .invoke(b);\r\n                return (ThreadFactory) b;\r\n            } catch (Throwable t) {\r\n                throw new RuntimeException(t);\r\n            }\r\n        } else {\r\n            return Thread::new;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nstill produces:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.RuntimeException: java.lang.IllegalAccessException: class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;\r\n\tat a.A.tf(A.java:31)\r\n\tat a.A.main(A.java:9)\r\nCaused by: java.lang.IllegalAccessException: class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;\r\n\tat java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:420)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:709)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat a.A.tf(A.java:26)\r\n\t... 1 more\r\n```\r\n\r\n&gt; class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;","title":"How to detect virtual threads on java 19","body":"<p>Lets say I want to ship a program that runs on java 17 as that is what is available widely, but use reflection to detect if im running on a vm with the ability to produce a thread factory via <code>Thread.ofVirtual().name(&quot;abc&quot;).factory()</code>. Java prohibits reflective access to its internals when they are not properly configured with modules. How do I configure my program to be able to access this method reflectively? The reason for reflective access is to continue compiling into &lt;jdk19 bytecode, but use reflection to use jdk19 features if they are present. Is there a combination of arguments or <code>module-info.java</code> contents that can achieve this goal, or is this not possible?</p>\n<p>when you try this in jshell, here is what you get:</p>\n<pre><code>jshell --enable-preview\n|  Welcome to JShell -- Version 19.0.2\n|  For an introduction type: /help intro\n\njshell&gt; Thread.class.getMethod(&quot;ofVirtual&quot;)\n   ...&gt;                 .invoke(null)\n   ...&gt;                 .getClass()\n   ...&gt;                 .getMethod(&quot;name&quot;, String.class, Long.TYPE)\n   ...&gt;                 .setAccessible(true)\n|  Exception java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Thread$Builder$OfVirtual java.lang.ThreadBuilders$VirtualThreadBuilder.name(java.lang.String,long) accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @30dae81\n|        at AccessibleObject.throwInaccessibleObjectException (AccessibleObject.java:387)\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:363)\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:311)\n|        at Method.checkCanSetAccessible (Method.java:201)\n|        at Method.setAccessible (Method.java:195)\n|        at (#1:5)\n\n</code></pre>\n<blockquote>\n<p>Exception java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Thread$Builder$OfVirtual java.lang.ThreadBuilders$VirtualThreadBuilder.name(java.lang.String,long) accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @30dae81</p>\n</blockquote>\n<p>adding <code>required java.base;</code> into the <code>module-info.java</code> does not seem to change the outcome either:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// src/main/java/module-info.java\nmodule test_20230518_ {\n    requires java.base;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// src/main/java/a/A.java\n\npackage a;\n\nimport java.lang.reflect.Method;\nimport java.util.Arrays;\nimport java.util.concurrent.ThreadFactory;\n\npublic class A {\n    public static void main(String[] args) {\n        ThreadFactory threadFactory = tf();\n        threadFactory.newThread(() -&gt;\n                System.out.println(&quot;hi from &quot; +\n                        Thread.currentThread().getName()));\n    }\n\n    private static ThreadFactory tf() {\n        Method[] methods = Thread.class.getMethods();\n        boolean haveVirtual = Arrays.stream(methods)\n                .anyMatch(m -&gt; m.getName().equals(&quot;ofVirtual&quot;) &amp;&amp;\n                        m.getParameterCount() == 0);\n\n        if (haveVirtual) {\n            try {\n                Object b = Thread.class.getMethod(&quot;ofVirtual&quot;)\n                        .invoke(null);\n                b = b.getClass().getMethod(&quot;name&quot;, String.class, Long.TYPE)\n                        .invoke(b, &quot;prefix-&quot;, (long) 1);\n                b = b.getClass().getMethod(&quot;factory&quot;)\n                        .invoke(b);\n                return (ThreadFactory) b;\n            } catch (Throwable t) {\n                throw new RuntimeException(t);\n            }\n        } else {\n            return Thread::new;\n        }\n    }\n}\n</code></pre>\n<p>still produces:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.IllegalAccessException: class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;\n    at a.A.tf(A.java:31)\n    at a.A.main(A.java:9)\nCaused by: java.lang.IllegalAccessException: class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;\n    at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:420)\n    at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:709)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:569)\n    at a.A.tf(A.java:26)\n    ... 1 more\n</code></pre>\n<blockquote>\n<p>class a.A cannot access a member of class java.lang.ThreadBuilders$VirtualThreadBuilder (in module java.base) with modifiers &quot;public volatile&quot;</p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":16344824,"reputation":11,"user_id":11804859,"display_name":"priyanka"},"score":0,"creation_date":1679419555,"post_id":75804504,"comment_id":133717748,"body_markdown":"It will be helpful if anybody will help me to know what is Temurin version of Open JDK Runtimeenvironment.","body":"It will be helpful if anybody will help me to know what is Temurin version of Open JDK Runtimeenvironment."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1679419627,"post_id":75804504,"comment_id":133717767,"body_markdown":"Try `where java`. That should give you a path.","body":"Try <code>where java</code>. That should give you a path."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1679419675,"post_id":75804504,"comment_id":133717781,"body_markdown":"You installed Eclipse&#39;s JDK, so look for `Eclipse Adoptium` in your `Program Files`.","body":"You installed Eclipse&#39;s JDK, so look for <code>Eclipse Adoptium</code> in your <code>Program Files</code>."},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":1,"creation_date":1679419689,"post_id":75804504,"comment_id":133717787,"body_markdown":"If you&#39;re able to run `java -version` from anywhere in your terminal, that&#39;s already set in your `PATH`, I don&#39;t have a Windows PC to try any commands, but you could check that environment variable to check the value and get the path from there","body":"If you&#39;re able to run <code>java -version</code> from anywhere in your terminal, that&#39;s already set in your <code>PATH</code>, I don&#39;t have a Windows PC to try any commands, but you could check that environment variable to check the value and get the path from there"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1679419901,"post_id":75804504,"comment_id":133717846,"body_markdown":"@Frakcool I think they want to export `%JAVA_HOME%` for something like Maven. Just because the Java `bin/` directory is on the path does not mean `JAVA_HOME` is set.","body":"@Frakcool I think they want to export <code>%JAVA_HOME%</code> for something like Maven. Just because the Java <code>bin&#47;</code> directory is on the path does not mean <code>JAVA_HOME</code> is set."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1679419920,"post_id":75804504,"comment_id":133717853,"body_markdown":"Type on the prompt &quot;echo %java%&quot;","body":"Type on the prompt &quot;echo %java%&quot;"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":0,"creation_date":1679419941,"post_id":75804504,"comment_id":133717858,"body_markdown":"@Mr.Polywhirl, I know, but I&#39;m just saying they can grab that value from `%PATH%`, just another way to look for it, then they can set `%JAVA_HOME%` using that value","body":"@Mr.Polywhirl, I know, but I&#39;m just saying they can grab that value from <code>%PATH%</code>, just another way to look for it, then they can set <code>%JAVA_HOME%</code> using that value"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1679420240,"post_id":75804504,"comment_id":133717944,"body_markdown":"I have more than one version on my path, ...course the first one it always uses until it cannot find that one (implicitly) because the folder is temp renamed or dropped temporarily into another folder for safe purity sake.","body":"I have more than one version on my path, ...course the first one it always uses until it cannot find that one (implicitly) because the folder is temp renamed or dropped temporarily into another folder for safe purity sake."}],"answers":[{"tags":[],"owner":{"account_id":1889834,"reputation":1396,"user_id":1708230,"display_name":"bviktor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679419917,"creation_date":1679419917,"answer_id":75804564,"question_id":75804504,"body_markdown":"In Windows Batch (`cmd.exe`):\r\n\r\n```\r\nwhere java\r\n```\r\n\r\nIn PowerShell:\r\n\r\n```\r\n(Get-Command java).Source\r\n```\r\n\r\n[Get-Command](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/get-command) gets information about the given executable, and `Source` is the property that tells you the path you&#39;re looking for.","title":"Not able to find Java folder in windows OS","body":"<p>In Windows Batch (<code>cmd.exe</code>):</p>\n<pre><code>where java\n</code></pre>\n<p>In PowerShell:</p>\n<pre><code>(Get-Command java).Source\n</code></pre>\n<p><a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/get-command\" rel=\"nofollow noreferrer\">Get-Command</a> gets information about the given executable, and <code>Source</code> is the property that tells you the path you're looking for.</p>\n"}],"owner":{"account_id":16344824,"reputation":11,"user_id":11804859,"display_name":"priyanka"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679419917,"creation_date":1679419484,"question_id":75804504,"body_markdown":"I searched below Java version is present in my system, but I am not able to find the Java folder in porgram files, can anybody help me to know where this version is intsalled in my local.\r\n\r\nI want to configure `JAVA_HOME` and `PATH` variable to include binary files.\r\n\r\n    C:\\User1&gt;java -version\r\n    openjdk version &quot;1.8.0_352&quot;\r\n    OpenJDK Runtime Environment (Temurin)(build 1.8.0_352-b08)\r\n    OpenJDK 64-Bit Server VM (Temurin)(build 25.352-b08, mixed mode)","title":"Not able to find Java folder in windows OS","body":"<p>I searched below Java version is present in my system, but I am not able to find the Java folder in porgram files, can anybody help me to know where this version is intsalled in my local.</p>\n<p>I want to configure <code>JAVA_HOME</code> and <code>PATH</code> variable to include binary files.</p>\n<pre><code>C:\\User1&gt;java -version\nopenjdk version &quot;1.8.0_352&quot;\nOpenJDK Runtime Environment (Temurin)(build 1.8.0_352-b08)\nOpenJDK 64-Bit Server VM (Temurin)(build 25.352-b08, mixed mode)\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1675704677,"post_id":75364283,"comment_id":132982020,"body_markdown":"To access env varables at annotation level try ```#{systemEnvironment[&#39;MYENV&#39;]```","body":"To access env varables at annotation level try <code>#{systemEnvironment[&#39;MYENV&#39;]</code>"}],"answers":[{"tags":[],"owner":{"account_id":19111621,"reputation":149,"user_id":13957509,"display_name":"cknelle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679419669,"creation_date":1679419669,"answer_id":75804528,"question_id":75364283,"body_markdown":"thanx to https://stackoverflow.com/questions/26387645/how-to-use-system-environment-variable-as-part-of-propertysource-value link\r\nI found out my answer using `@PropertySource(&quot;file:${MYENV}/config/my.properties&quot;)`","title":"How can I set my own property file and log file location in spring boot through my own environment variable?","body":"<p>thanx to <a href=\"https://stackoverflow.com/questions/26387645/how-to-use-system-environment-variable-as-part-of-propertysource-value\">How to use system environment variable as part of @PropertySource value?</a> link\nI found out my answer using <code>@PropertySource(&quot;file:${MYENV}/config/my.properties&quot;)</code></p>\n"}],"owner":{"account_id":19111621,"reputation":149,"user_id":13957509,"display_name":"cknelle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75804528,"answer_count":1,"score":0,"last_activity_date":1679419669,"creation_date":1675702397,"question_id":75364283,"body_markdown":"I want to set both property file (`myproperty.properties`) and log file location (`myLogFile.log`) through my own environment variable name (`MYENV` for example).\r\nproperty file name must be different from spring boot `application.properties` name and log file has its own name also.\r\nDo not want to use `spring.config.name` and `spring.config.location`.\r\n\r\n`MYENV` will be set to `&quot;/locationFiles&quot;` value for example. `myproperty.properties` file location is `&quot;/locationFiles/config&quot; `\r\nand `myLogFile.log` file location is `&quot;/locationFiles/log&quot;`.\r\n\r\nI know that I can use the following code snippet for reading my environment variable.\r\nBut How do I use `propertiesLocation` below to read the properties data in a simple Spring boot way?\r\nI do not know how to define a corresponding java configuration class as It seems that configuration ppties file path cannot be set in a variable.\r\n\r\n```\r\nimport org.springframework.core.env.Environment;\r\n\r\npublic class MyClass {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n\tString propertiesLocation;\r\n\t\r\n\tprivate void propertyLocation() {\r\n\tthis.propertiesLocation = env.getProperty(&quot;MYENV&quot;)+&quot;/config/&quot;;\r\n\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nThe following code snippet does not match with what I want to do as I cannot\r\nwrite something like that : `@PropertySource(env.getProperty(&quot;MYENV&quot;)+&quot;/config/&quot;)`\r\n\r\n```\r\n@SpringBootApplication\r\n@PropertySource(&quot;classpath:myproperty.properties&quot;)\r\npublic class MyApplication {\r\n\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(MyApplication.class, args);\r\n  }\r\n\r\n}\r\n```\r\n\r\nI saw &lt;https://stackoverflow.com/questions/32196451/environment-specific-application-properties-file-in-spring-boot-application&gt; but I does not match exactly with what I&#39;ve described above.\r\nAs I want to define my own environment variable name and file names. \r\nAnd I&#39;m also looking for another way than using ```java -jar -Dspring.config.location=&lt;path-to-file&gt; myBootProject.jar``` as defined in &lt;https://stackoverflow.com/questions/41754459/spring-boot-how-to-read-properties-file-outside-jar&gt;.\r\nI want to know if there is an alternative way to this method.","title":"How can I set my own property file and log file location in spring boot through my own environment variable?","body":"<p>I want to set both property file (<code>myproperty.properties</code>) and log file location (<code>myLogFile.log</code>) through my own environment variable name (<code>MYENV</code> for example).\nproperty file name must be different from spring boot <code>application.properties</code> name and log file has its own name also.\nDo not want to use <code>spring.config.name</code> and <code>spring.config.location</code>.</p>\n<p><code>MYENV</code> will be set to <code>&quot;/locationFiles&quot;</code> value for example. <code>myproperty.properties</code> file location is <code>&quot;/locationFiles/config&quot; </code>\nand <code>myLogFile.log</code> file location is <code>&quot;/locationFiles/log&quot;</code>.</p>\n<p>I know that I can use the following code snippet for reading my environment variable.\nBut How do I use <code>propertiesLocation</code> below to read the properties data in a simple Spring boot way?\nI do not know how to define a corresponding java configuration class as It seems that configuration ppties file path cannot be set in a variable.</p>\n<pre><code>import org.springframework.core.env.Environment;\n\npublic class MyClass {\n\n    @Autowired\n    private Environment env;\n    \n    String propertiesLocation;\n    \n    private void propertyLocation() {\n    this.propertiesLocation = env.getProperty(&quot;MYENV&quot;)+&quot;/config/&quot;;\n\n    }\n    \n}\n</code></pre>\n<p>The following code snippet does not match with what I want to do as I cannot\nwrite something like that : <code>@PropertySource(env.getProperty(&quot;MYENV&quot;)+&quot;/config/&quot;)</code></p>\n<pre><code>@SpringBootApplication\n@PropertySource(&quot;classpath:myproperty.properties&quot;)\npublic class MyApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(MyApplication.class, args);\n  }\n\n}\n</code></pre>\n<p>I saw <a href=\"https://stackoverflow.com/questions/32196451/environment-specific-application-properties-file-in-spring-boot-application\">Environment Specific application.properties file in Spring Boot application</a> but I does not match exactly with what I've described above.\nAs I want to define my own environment variable name and file names.\nAnd I'm also looking for another way than using <code>java -jar -Dspring.config.location=&lt;path-to-file&gt; myBootProject.jar</code> as defined in <a href=\"https://stackoverflow.com/questions/41754459/spring-boot-how-to-read-properties-file-outside-jar\">Spring boot how to read properties file outside jar</a>.\nI want to know if there is an alternative way to this method.</p>\n"},{"tags":["java","java-time","jsr310"],"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":1,"creation_date":1600346359,"post_id":63934816,"comment_id":113062868,"body_markdown":"So it is a feature similar to what I have already realized in my lib [Time4J](http://time4j.net/javadoc-en/net/time4j/WallTimeElement.html#setToNext-net.time4j.PlainTime-) Well, you have to write your own adjuster in JSR 310...","body":"So it is a feature similar to what I have already realized in my lib <a href=\"http://time4j.net/javadoc-en/net/time4j/WallTimeElement.html#setToNext-net.time4j.PlainTime-\" rel=\"nofollow noreferrer\">Time4J</a> Well, you have to write your own adjuster in JSR 310..."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1600473909,"creation_date":1600334856,"answer_id":63935104,"question_id":63934816,"body_markdown":"If you just want this to work with `LocalDateTime`s and `LocalTime`s, or any other type of `Temporal` that has a 24-hour day, the logic is quite simple:\r\n\r\n\tpublic static TemporalAdjuster nextTime(LocalTime time) {\r\n\t    return temporal -&gt; {\r\n\t        LocalTime lt = LocalTime.from(temporal);\r\n\t        if (lt.isBefore(time)) {\r\n\t            return temporal.with(time);\r\n\t        } else {\r\n\t            return temporal.plus(Duration.ofHours(24)).with(time);\r\n\t        }\r\n\t    };\r\n\t}\r\n\r\nBut doing this for all `Temporal`s that have a time component is actually quite hard. Think about what you&#39;d have to do for `ZonedDateTime`. Rather than adding 24 hours, we might need to add 23 or 25 hours because DST transitions make a &quot;day&quot; shorter or longer. You can somewhat deal with this by adding a &quot;day&quot; instead:\r\n\r\n\tpublic static TemporalAdjuster nextTime(LocalTime time) {\r\n\t    return temporal -&gt; {\r\n\t        LocalTime lt = LocalTime.from(temporal);\r\n\t        if (lt.isBefore(time) || !temporal.isSupported(ChronoUnit.DAYS)) {\r\n\t            return temporal.with(time);\r\n\t        } else {\r\n\t\t        return temporal.plus(1, ChronoUnit.DAYS).with(time);\r\n\t        }\r\n\t    };\r\n\t}\r\n\r\nHowever, it still doesn’t _always_ handle gaps and overlaps correctly. For example, when we are asking for the next 01:30 since 01:31, and there is an overlap transition of 1 hour at 02:00, i.e. the clock goes back an hour at 02:00. The correct answer is to add 59 minutes, but the above code will give us a date time in the next day. To handle this case you&#39;d need to do something complicated like in Andreas&#39; answer.\r\n\r\nIf you look at the other built in temporal adjusters, they are all pretty simple, so I guess they just didn&#39;t want to put in this complexity.","title":"Find next occurrence of a time, like TemporalAdjuster","body":"<p>If you just want this to work with <code>LocalDateTime</code>s and <code>LocalTime</code>s, or any other type of <code>Temporal</code> that has a 24-hour day, the logic is quite simple:</p>\n<pre><code>public static TemporalAdjuster nextTime(LocalTime time) {\n    return temporal -&gt; {\n        LocalTime lt = LocalTime.from(temporal);\n        if (lt.isBefore(time)) {\n            return temporal.with(time);\n        } else {\n            return temporal.plus(Duration.ofHours(24)).with(time);\n        }\n    };\n}\n</code></pre>\n<p>But doing this for all <code>Temporal</code>s that have a time component is actually quite hard. Think about what you'd have to do for <code>ZonedDateTime</code>. Rather than adding 24 hours, we might need to add 23 or 25 hours because DST transitions make a &quot;day&quot; shorter or longer. You can somewhat deal with this by adding a &quot;day&quot; instead:</p>\n<pre><code>public static TemporalAdjuster nextTime(LocalTime time) {\n    return temporal -&gt; {\n        LocalTime lt = LocalTime.from(temporal);\n        if (lt.isBefore(time) || !temporal.isSupported(ChronoUnit.DAYS)) {\n            return temporal.with(time);\n        } else {\n            return temporal.plus(1, ChronoUnit.DAYS).with(time);\n        }\n    };\n}\n</code></pre>\n<p>However, it still doesn’t <em>always</em> handle gaps and overlaps correctly. For example, when we are asking for the next 01:30 since 01:31, and there is an overlap transition of 1 hour at 02:00, i.e. the clock goes back an hour at 02:00. The correct answer is to add 59 minutes, but the above code will give us a date time in the next day. To handle this case you'd need to do something complicated like in Andreas' answer.</p>\n<p>If you look at the other built in temporal adjusters, they are all pretty simple, so I guess they just didn't want to put in this complexity.</p>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1600705107,"creation_date":1600446899,"answer_id":63959570,"question_id":63934816,"body_markdown":"An adjuster like `next(LocalTime time)` only makes sense for types with both a date and a time.\r\n\r\nJava&#39;s Time API comes with 4 types like that: `LocalDateTime`, `OffsetDateTime`, `ZonedDateTime`, and `Instant`.\r\n\r\nTo fully support all 4, the code need special handling for `Instant`, since `Instant` and `LocalTime` are not directly relatable, and for `ZonedDateTime`, to handle DST overlap.\r\n\r\nThis implementation can handle all that:\r\n\r\n```lang-java\r\npublic static TemporalAdjuster next(LocalTime time) {\r\n\treturn temporal -&gt; {\r\n\t\tif (temporal instanceof Instant) {\r\n\t\t\tOffsetDateTime utcDateTime = ((Instant) temporal).atOffset(ZoneOffset.UTC);\r\n\t\t\treturn next(utcDateTime, time).toInstant();\r\n\t\t}\r\n\t\treturn next(temporal, time);\r\n\t};\r\n}\r\n\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\nprivate static &lt;T extends Temporal&gt; T next(T refDateTime, LocalTime targetTime) {\r\n\tT adjusted = (T) refDateTime.with(targetTime);\r\n\tif (refDateTime.until(adjusted, ChronoUnit.NANOS) &gt; 0)\r\n\t\treturn adjusted;\r\n\tif (adjusted instanceof ChronoZonedDateTime&lt;?&gt;) {\r\n\t\tChronoZonedDateTime&lt;?&gt; laterOffset = ((ChronoZonedDateTime&lt;?&gt;) adjusted).withLaterOffsetAtOverlap();\r\n\t\tif (laterOffset != adjusted &amp;&amp; refDateTime.until(laterOffset, ChronoUnit.NANOS) &gt; 0)\r\n\t\t\treturn (T) laterOffset;\r\n\t}\r\n\treturn (T) refDateTime.plus(1, ChronoUnit.DAYS).with(targetTime);\r\n}\r\n```\r\n\r\n*Test (with `now()` being 2020-09-18 at some time after 10 AM)*\r\n\r\n```lang-java\r\nSystem.out.println(LocalDateTime.now().with(next(LocalTime.of(10, 0))));\r\nSystem.out.println(OffsetDateTime.now().with(next(LocalTime.of(10, 0))));\r\nSystem.out.println(ZonedDateTime.now().with(next(LocalTime.of(10, 0))));\r\nSystem.out.println(Instant.now().with(next(LocalTime.of(10, 0))));\r\n```\r\n\r\n*Output*\r\n\r\n```lang-none\r\n2020-09-19T10:00\r\n2020-09-19T10:00-04:00\r\n2020-09-19T10:00-04:00[America/New_York]\r\n2020-09-19T10:00:00Z\r\n```\r\n\r\n*Test Overlap*\r\n\r\nFor US Eastern time zone, DST ends at 2:00 AM on Sunday, November 1, 2020.\r\n\r\n```lang-java\r\n// We start at 1:45 AM EDT on November 1, 2020\r\nZoneId usEastern = ZoneId.of(&quot;America/New_York&quot;);\r\nZonedDateTime earlierOffset = ZonedDateTime.of(2020, 11, 1, 1, 45, 0, 0, usEastern);\r\nSystem.out.println(earlierOffset);\r\n// Now we look for next 1:20 AM after the 1:45 AM, and will find 1:20 AM EST\r\nSystem.out.println(earlierOffset.with(next(LocalTime.of(1, 20))));\r\n```\r\n\r\n*Output*\r\n\r\n```lang-none\r\n2020-11-01T01:45-04:00[America/New_York]\r\n2020-11-01T01:20-05:00[America/New_York]\r\n```\r\n\r\nEven though the time of day appears earlier (1:20 &lt; 1:45), it is actually a later time.","title":"Find next occurrence of a time, like TemporalAdjuster","body":"<p>An adjuster like <code>next(LocalTime time)</code> only makes sense for types with both a date and a time.</p>\n<p>Java's Time API comes with 4 types like that: <code>LocalDateTime</code>, <code>OffsetDateTime</code>, <code>ZonedDateTime</code>, and <code>Instant</code>.</p>\n<p>To fully support all 4, the code need special handling for <code>Instant</code>, since <code>Instant</code> and <code>LocalTime</code> are not directly relatable, and for <code>ZonedDateTime</code>, to handle DST overlap.</p>\n<p>This implementation can handle all that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static TemporalAdjuster next(LocalTime time) {\n    return temporal -&gt; {\n        if (temporal instanceof Instant) {\n            OffsetDateTime utcDateTime = ((Instant) temporal).atOffset(ZoneOffset.UTC);\n            return next(utcDateTime, time).toInstant();\n        }\n        return next(temporal, time);\n    };\n}\n\n@SuppressWarnings(&quot;unchecked&quot;)\nprivate static &lt;T extends Temporal&gt; T next(T refDateTime, LocalTime targetTime) {\n    T adjusted = (T) refDateTime.with(targetTime);\n    if (refDateTime.until(adjusted, ChronoUnit.NANOS) &gt; 0)\n        return adjusted;\n    if (adjusted instanceof ChronoZonedDateTime&lt;?&gt;) {\n        ChronoZonedDateTime&lt;?&gt; laterOffset = ((ChronoZonedDateTime&lt;?&gt;) adjusted).withLaterOffsetAtOverlap();\n        if (laterOffset != adjusted &amp;&amp; refDateTime.until(laterOffset, ChronoUnit.NANOS) &gt; 0)\n            return (T) laterOffset;\n    }\n    return (T) refDateTime.plus(1, ChronoUnit.DAYS).with(targetTime);\n}\n</code></pre>\n<p><em>Test (with <code>now()</code> being 2020-09-18 at some time after 10 AM)</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(LocalDateTime.now().with(next(LocalTime.of(10, 0))));\nSystem.out.println(OffsetDateTime.now().with(next(LocalTime.of(10, 0))));\nSystem.out.println(ZonedDateTime.now().with(next(LocalTime.of(10, 0))));\nSystem.out.println(Instant.now().with(next(LocalTime.of(10, 0))));\n</code></pre>\n<p><em>Output</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>2020-09-19T10:00\n2020-09-19T10:00-04:00\n2020-09-19T10:00-04:00[America/New_York]\n2020-09-19T10:00:00Z\n</code></pre>\n<p><em>Test Overlap</em></p>\n<p>For US Eastern time zone, DST ends at 2:00 AM on Sunday, November 1, 2020.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// We start at 1:45 AM EDT on November 1, 2020\nZoneId usEastern = ZoneId.of(&quot;America/New_York&quot;);\nZonedDateTime earlierOffset = ZonedDateTime.of(2020, 11, 1, 1, 45, 0, 0, usEastern);\nSystem.out.println(earlierOffset);\n// Now we look for next 1:20 AM after the 1:45 AM, and will find 1:20 AM EST\nSystem.out.println(earlierOffset.with(next(LocalTime.of(1, 20))));\n</code></pre>\n<p><em>Output</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>2020-11-01T01:45-04:00[America/New_York]\n2020-11-01T01:20-05:00[America/New_York]\n</code></pre>\n<p>Even though the time of day appears earlier (1:20 &lt; 1:45), it is actually a later time.</p>\n"},{"tags":[],"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679419584,"creation_date":1679419584,"answer_id":75804516,"question_id":63934816,"body_markdown":"If you use `ZonedDateTime` as `refDateTime`, @Andreas&#39;s answer amounts to this,\r\n```\r\nfun ZonedDateTime.next2(targetTime: LocalTime): ZonedDateTime {\r\n  val adjusted = with(targetTime)\r\n  if (isBefore(adjusted)) {\r\n    return adjusted\r\n  }\r\n  return plus(1, ChronoUnit.DAYS).with(targetTime)\r\n}\r\n```\r\n\r\n\r\nI tested with the current time (`refDateTime`) equal to every day between 2020 and 2026, and with the target time set to every hour and minute in the day, and the above returns the same result as @Andreas&#39;s answer.\r\n\r\nThe only caveat (with both solutions) here is that we can&#39;t return times that don&#39;t exist. E.g. if you ask it for the next occurrence of the time 02:30 on \r\n the day before DST start (after 02:30), you get 03:30 on DST start, because 02:30 on DST start doesn&#39;t exist (and is actually the &quot;same&quot; time as 03:30 anyway).","title":"Find next occurrence of a time, like TemporalAdjuster","body":"<p>If you use <code>ZonedDateTime</code> as <code>refDateTime</code>, @Andreas's answer amounts to this,</p>\n<pre><code>fun ZonedDateTime.next2(targetTime: LocalTime): ZonedDateTime {\n  val adjusted = with(targetTime)\n  if (isBefore(adjusted)) {\n    return adjusted\n  }\n  return plus(1, ChronoUnit.DAYS).with(targetTime)\n}\n</code></pre>\n<p>I tested with the current time (<code>refDateTime</code>) equal to every day between 2020 and 2026, and with the target time set to every hour and minute in the day, and the above returns the same result as @Andreas's answer.</p>\n<p>The only caveat (with both solutions) here is that we can't return times that don't exist. E.g. if you ask it for the next occurrence of the time 02:30 on\nthe day before DST start (after 02:30), you get 03:30 on DST start, because 02:30 on DST start doesn't exist (and is actually the &quot;same&quot; time as 03:30 anyway).</p>\n"}],"owner":{"account_id":128226,"reputation":10041,"user_id":325900,"accept_rate":78,"display_name":"DaveyDaveDave"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":644,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63935104,"answer_count":3,"score":3,"last_activity_date":1679419584,"creation_date":1600333793,"question_id":63934816,"body_markdown":"Is there anything in JSR-310 for finding the next occurrence of a given time? I&#39;m really looking for the same thing as [this question](https://stackoverflow.com/questions/21242809/find-next-occurrence-of-a-day-of-week-in-jsr-310) but for times instead of days.\r\n\r\nFor example, starting with a date of 2020-09-17 at 06:30 UTC, I&#39;d like to find the next occurrence of 05:30:\r\n\r\n```java\r\nLocalTime time = LocalTime.of(5, 30);\r\nZonedDateTime startDateTime = ZonedDateTime.of(2020, 9, 17, 6, 30, 0, 0, ZoneId.of(&quot;UTC&quot;));\r\n\r\nZonedDateTime nextTime = startDateTime.with(TemporalAdjusters.next(time)); // This doesn&#39;t exist\r\n```\r\n\r\nin the above, I&#39;d like `nextTime` to represent 2020-09-18 at 05:30 UTC, i.e. 05:30 the following morning.\r\n\r\nTo clarify my expectations, all with a time of 05:30:\r\n\r\n```\r\n----------------------------------------\r\n| startDateTime    | expected nextTime |\r\n| 2020-09-07 06:30 | 2020-09-08 05:30  |\r\n| 2020-09-07 05:00 | 2020-09-07 05:30  |\r\n| 2020-09-07 05:30 | 2020-09-08 05:30  |\r\n----------------------------------------\r\n```\r\n\r\n","title":"Find next occurrence of a time, like TemporalAdjuster","body":"<p>Is there anything in JSR-310 for finding the next occurrence of a given time? I'm really looking for the same thing as <a href=\"https://stackoverflow.com/questions/21242809/find-next-occurrence-of-a-day-of-week-in-jsr-310\">this question</a> but for times instead of days.</p>\n<p>For example, starting with a date of 2020-09-17 at 06:30 UTC, I'd like to find the next occurrence of 05:30:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalTime time = LocalTime.of(5, 30);\nZonedDateTime startDateTime = ZonedDateTime.of(2020, 9, 17, 6, 30, 0, 0, ZoneId.of(&quot;UTC&quot;));\n\nZonedDateTime nextTime = startDateTime.with(TemporalAdjusters.next(time)); // This doesn't exist\n</code></pre>\n<p>in the above, I'd like <code>nextTime</code> to represent 2020-09-18 at 05:30 UTC, i.e. 05:30 the following morning.</p>\n<p>To clarify my expectations, all with a time of 05:30:</p>\n<pre><code>----------------------------------------\n| startDateTime    | expected nextTime |\n| 2020-09-07 06:30 | 2020-09-08 05:30  |\n| 2020-09-07 05:00 | 2020-09-07 05:30  |\n| 2020-09-07 05:30 | 2020-09-08 05:30  |\n----------------------------------------\n</code></pre>\n"},{"tags":["java","exception","runtime","nan"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1679411458,"post_id":75802905,"comment_id":133715107,"body_markdown":"If it was a practice exam then just code it and run it. You don&#39;t need us to tell you.","body":"If it was a practice exam then just code it and run it. You don&#39;t need us to tell you."},{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1679411470,"post_id":75802905,"comment_id":133715113,"body_markdown":"Seems like an opinion-based question.  The code shown *doesn&#39;t* produce an error, it produces the correct and documented output that it&#39;s expected to.  One might refer to it as a &quot;logical error&quot; but that implies additional logic upstream from this single line of code, which isn&#39;t known here.","body":"Seems like an opinion-based question.  The code shown <i>doesn&#39;t</i> produce an error, it produces the correct and documented output that it&#39;s expected to.  One might refer to it as a &quot;logical error&quot; but that implies additional logic upstream from this single line of code, which isn&#39;t known here."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":2,"creation_date":1679411510,"post_id":75802905,"comment_id":133715131,"body_markdown":"What it is is not a great test question. It&#39;s definitely not a syntax error. Whether NaN counts as a logical or a runtime error is somewhat subjective and we have no way to see into the test author&#39;s mind. Toss a coin.","body":"What it is is not a great test question. It&#39;s definitely not a syntax error. Whether NaN counts as a logical or a runtime error is somewhat subjective and we have no way to see into the test author&#39;s mind. Toss a coin."},{"owner":{"account_id":28077107,"reputation":1,"user_id":21448770,"display_name":"Oaj Gupta"},"score":0,"creation_date":1679412045,"post_id":75802905,"comment_id":133715324,"body_markdown":"Okay but..some sources online say that it is runtime error..","body":"Okay but..some sources online say that it is runtime error.."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1679412146,"post_id":75802905,"comment_id":133715361,"body_markdown":"The most important source that matters in this case is the official documentation of that class and method: https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#sqrt-double- - And here it says nothing about runtime errors. (Compare with the documentation of method negateExact where it clearly states when an exception will be thrown: https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#negateExact-int- )","body":"The most important source that matters in this case is the official documentation of that class and method: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#sqrt-double-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/&hellip;</a> - And here it says nothing about runtime errors. (Compare with the documentation of method negateExact where it clearly states when an exception will be thrown: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#negateExact-int-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/&hellip;</a> )"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1679412986,"post_id":75802905,"comment_id":133715686,"body_markdown":"sqrt is telling you at runtime that you have given it bad input, I am leaning more towards runtime error, but it&#39;s not a great example of one","body":"sqrt is telling you at runtime that you have given it bad input, I am leaning more towards runtime error, but it&#39;s not a great example of one"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679415346,"creation_date":1679415346,"answer_id":75803729,"question_id":75802905,"body_markdown":"If it were a runtime error I would expect it to throw a `RuntimeErrorException` or perhaps just a `RuntimeException`.  These are `unchecked exceptions` and do not need to be caught.  Since the `Math.sqrt()` does not throw any exception `(nor does Math.log(0))` I do not consider them errors from the standpoint of Java.  But depending on the method, the results can still be compared to existing constants such as `Double.NaN`, `Double.NEGATIVE_INFINITY`, and `Double.POSITIVE_INFINITY`. How the values are to be used later in subsequent calculations and if they cause incorrect computations, some (as I do ), might consider them logic errors.  But without more information it is not clear what the test question had in mind.","title":"Java : Is &#39;Square root of a negative number&#39; a logical error or a runtime error?","body":"<p>If it were a runtime error I would expect it to throw a <code>RuntimeErrorException</code> or perhaps just a <code>RuntimeException</code>.  These are <code>unchecked exceptions</code> and do not need to be caught.  Since the <code>Math.sqrt()</code> does not throw any exception <code>(nor does Math.log(0))</code> I do not consider them errors from the standpoint of Java.  But depending on the method, the results can still be compared to existing constants such as <code>Double.NaN</code>, <code>Double.NEGATIVE_INFINITY</code>, and <code>Double.POSITIVE_INFINITY</code>. How the values are to be used later in subsequent calculations and if they cause incorrect computations, some (as I do ), might consider them logic errors.  But without more information it is not clear what the test question had in mind.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679417580,"creation_date":1679417119,"answer_id":75804053,"question_id":75802905,"body_markdown":"&gt; Which of the following errors will the snippet produce - \r\n&gt;\r\n&gt;      System.out.println(Math.sqrt(24-25)); \r\n&gt;\r\n&gt; Logical, Runtime, Syntax.\r\n\r\nThis won&#39;t produce a syntax error or any other kind of compilation error&lt;sup&gt;1&lt;/sup&gt;. \r\n\r\nThis won&#39;t produce a runtime error in the sense that that term is used in Java; i.e. no exception will be thrown.  The `sqrt` call terminates *normally* and returns a `NaN` value.  `NaN` is a well-defined value, per the Java Language spec and IEE floating point spec.\r\n\r\nIs it a logical error?  That depends on the specification of your program.  But on the face of it, outputting &quot;NaN&quot; as the square root of -1 is a reasonable thing to do.\r\n\r\nSo, in the absence of a specification, I would be inclined to say that there is no error here at all. \r\n\r\nHowever, in other contexts using a `NaN` generated by `sqrt` *could* be a logical error, and *could* indirectly give rise to runtime errors (in the Java sense).\r\n\r\nThe lesson is that it is not possible to classify errors without considering the context.  Even the meaning of the *types* of errors is context dependent&lt;sup&gt;2&lt;/sup&gt;.\r\n\r\n-------------\r\n\r\n&lt;sup&gt;1 - ... unless you shadow the standard `java.lang.Math` class.&lt;br&gt;\r\n2 - For instance, it depends on the precise definitions of &quot;Logical error&quot;, &quot;Runtime error&quot;, &quot;Syntax error&quot; and so on that you have been taught. Or the programming language you are using.&lt;/sup&gt;\r\n","title":"Java : Is &#39;Square root of a negative number&#39; a logical error or a runtime error?","body":"<blockquote>\n<p>Which of the following errors will the snippet produce -</p>\n<pre><code> System.out.println(Math.sqrt(24-25)); \n</code></pre>\n<p>Logical, Runtime, Syntax.</p>\n</blockquote>\n<p>This won't produce a syntax error or any other kind of compilation error<sup>1</sup>.</p>\n<p>This won't produce a runtime error in the sense that that term is used in Java; i.e. no exception will be thrown.  The <code>sqrt</code> call terminates <em>normally</em> and returns a <code>NaN</code> value.  <code>NaN</code> is a well-defined value, per the Java Language spec and IEE floating point spec.</p>\n<p>Is it a logical error?  That depends on the specification of your program.  But on the face of it, outputting &quot;NaN&quot; as the square root of -1 is a reasonable thing to do.</p>\n<p>So, in the absence of a specification, I would be inclined to say that there is no error here at all.</p>\n<p>However, in other contexts using a <code>NaN</code> generated by <code>sqrt</code> <em>could</em> be a logical error, and <em>could</em> indirectly give rise to runtime errors (in the Java sense).</p>\n<p>The lesson is that it is not possible to classify errors without considering the context.  Even the meaning of the <em>types</em> of errors is context dependent<sup>2</sup>.</p>\n<hr />\n<p><sup>1 - ... unless you shadow the standard <code>java.lang.Math</code> class.<br>\n2 - For instance, it depends on the precise definitions of &quot;Logical error&quot;, &quot;Runtime error&quot;, &quot;Syntax error&quot; and so on that you have been taught. Or the programming language you are using.</sup></p>\n"}],"owner":{"account_id":28077107,"reputation":1,"user_id":21448770,"display_name":"Oaj Gupta"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":559,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"closed_date":1679467185,"accepted_answer_id":75804053,"answer_count":2,"score":-6,"last_activity_date":1679419567,"creation_date":1679411069,"question_id":75802905,"body_markdown":"I was solving a practice examination paper, and it had the question - \r\n*Which of the following errors will the snippet produce ?* - \r\n```\r\nSystem.out.println(Math.sqrt(24-25));\r\n```\r\n*Logical, Runtime, Syntax*\r\n\r\n\r\nI know it will give `NaN`, but can someone confirm what type it will be included in?\r\nThank you.","title":"Java : Is &#39;Square root of a negative number&#39; a logical error or a runtime error?","body":"<p>I was solving a practice examination paper, and it had the question -\n<em>Which of the following errors will the snippet produce ?</em> -</p>\n<pre><code>System.out.println(Math.sqrt(24-25));\n</code></pre>\n<p><em>Logical, Runtime, Syntax</em></p>\n<p>I know it will give <code>NaN</code>, but can someone confirm what type it will be included in?\nThank you.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5383905,"reputation":885,"user_id":4288430,"accept_rate":57,"display_name":"Ram"},"score":0,"creation_date":1679409896,"post_id":75794609,"comment_id":133714596,"body_markdown":"@dariosicily, This works. Thank you. If you post it as an answer, I am happy to accept it.","body":"@dariosicily, This works. Thank you. If you post it as an answer, I am happy to accept it."},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1679419053,"post_id":75794609,"comment_id":133717596,"body_markdown":"Glad to have helped, I posted my answer below.","body":"Glad to have helped, I posted my answer below."}],"answers":[{"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679419017,"creation_date":1679419017,"answer_id":75804422,"question_id":75794609,"body_markdown":"You can enable the [`DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT`](https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/DeserializationFeature.html#ACCEPT_EMPTY_STRING_AS_NULL_OBJECT) feature to allow JSON empty String value (&quot;&quot;) to be bound as `null` for POJOs and other structured values (Maps, Collections). So the value will be converted either to a non empty list or an empty list like below:\r\n\r\n~~~\r\n@Data\r\npublic class Student {\r\n    private List&lt;String&gt; courseNames;\r\n}\r\n\r\nObjectMapper mapper = new ObjectMapper();\r\nmapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\r\n//a non empty courseNames array \r\nString courseNames = &quot;{\\&quot;courseNames\\&quot;: [\\&quot;abc\\&quot;, \\&quot;xyz\\&quot;]}&quot;;\r\nStudent student = mapper.readValue(courseNames, Student.class);\r\n//ok, it prints {&quot;courseNames&quot;:[&quot;abc&quot;,&quot;xyz&quot;]}\r\nSystem.out.println(mapper.writeValueAsString(student));\r\n//an empty courseNames array\r\ncourseNames = &quot;{\\&quot;courseNames\\&quot;: []}&quot;;\r\nstudent = mapper.readValue(courseNames, Student.class);\r\n//ok, it prints the empty courseNames array\r\nSystem.out.println(mapper.writeValueAsString(student));\r\n~~~","title":"Read empty string from JSON to empty List&lt;...&gt;","body":"<p>You can enable the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/DeserializationFeature.html#ACCEPT_EMPTY_STRING_AS_NULL_OBJECT\" rel=\"nofollow noreferrer\"><code>DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT</code></a> feature to allow JSON empty String value (&quot;&quot;) to be bound as <code>null</code> for POJOs and other structured values (Maps, Collections). So the value will be converted either to a non empty list or an empty list like below:</p>\n<pre><code>@Data\npublic class Student {\n    private List&lt;String&gt; courseNames;\n}\n\nObjectMapper mapper = new ObjectMapper();\nmapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\n//a non empty courseNames array \nString courseNames = &quot;{\\&quot;courseNames\\&quot;: [\\&quot;abc\\&quot;, \\&quot;xyz\\&quot;]}&quot;;\nStudent student = mapper.readValue(courseNames, Student.class);\n//ok, it prints {&quot;courseNames&quot;:[&quot;abc&quot;,&quot;xyz&quot;]}\nSystem.out.println(mapper.writeValueAsString(student));\n//an empty courseNames array\ncourseNames = &quot;{\\&quot;courseNames\\&quot;: []}&quot;;\nstudent = mapper.readValue(courseNames, Student.class);\n//ok, it prints the empty courseNames array\nSystem.out.println(mapper.writeValueAsString(student));\n</code></pre>\n"}],"owner":{"account_id":5383905,"reputation":885,"user_id":4288430,"accept_rate":57,"display_name":"Ram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75804422,"answer_count":1,"score":1,"last_activity_date":1679419017,"creation_date":1679341259,"question_id":75794609,"body_markdown":"I have a List&lt;String&gt; field in my POJO. List so:\r\n\r\n    public class Student {\r\n        private List&lt;String&gt; courseNames;\r\n        ...\r\n    }\r\n\r\nWhen the in-coming JSON (from 3rd-party) contains an array (like the following), it is not an issue.\r\n\r\n    {\r\n        &quot;courseNames&quot;: [&quot;abc&quot;, &quot;xyz&quot;]\r\n    }\r\n\r\nBut the 3rd party app sometimes sends an empty array. Like so:\r\n\r\n    {\r\n        &quot;courseNames&quot;: &quot;&quot;\r\n    }\r\n\r\nIn this case, I like to have my `courseNames` field populated as an empty list.\r\n\r\nLooking at [this post][1], I figured implementing a custom JsonDeserializer is one way to achieve this.\r\n\r\nSo I partially implemented it:\r\n\r\n    public class StringToEmptyListJsonDeserializer extends JsonDeserializer&lt;List&lt;String&gt;&gt; {\r\n    \r\n        @Override\r\n        public List&lt;String&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\r\n            if(jsonParser.getCurrentToken() != JsonToken.START_ARRAY) {\r\n                return new ArrayList&lt;&gt;();\r\n            }\r\n            return // What to do here?\r\n        }\r\n    }\r\n\r\n\r\nAre there any suggestions on how to delegate to the default List&lt;...&gt; JsonDeserializer? Or are there better solutions?\r\n\r\n  [1]: https://stackoverflow.com/questions/64187002/how-to-instruct-jackson-objectmapper-to-not-convert-number-field-value-into-a-st\r\n","title":"Read empty string from JSON to empty List&lt;...&gt;","body":"<p>I have a List field in my POJO. List so:</p>\n<pre><code>public class Student {\n    private List&lt;String&gt; courseNames;\n    ...\n}\n</code></pre>\n<p>When the in-coming JSON (from 3rd-party) contains an array (like the following), it is not an issue.</p>\n<pre><code>{\n    &quot;courseNames&quot;: [&quot;abc&quot;, &quot;xyz&quot;]\n}\n</code></pre>\n<p>But the 3rd party app sometimes sends an empty array. Like so:</p>\n<pre><code>{\n    &quot;courseNames&quot;: &quot;&quot;\n}\n</code></pre>\n<p>In this case, I like to have my <code>courseNames</code> field populated as an empty list.</p>\n<p>Looking at <a href=\"https://stackoverflow.com/questions/64187002/how-to-instruct-jackson-objectmapper-to-not-convert-number-field-value-into-a-st\">this post</a>, I figured implementing a custom JsonDeserializer is one way to achieve this.</p>\n<p>So I partially implemented it:</p>\n<pre><code>public class StringToEmptyListJsonDeserializer extends JsonDeserializer&lt;List&lt;String&gt;&gt; {\n\n    @Override\n    public List&lt;String&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\n        if(jsonParser.getCurrentToken() != JsonToken.START_ARRAY) {\n            return new ArrayList&lt;&gt;();\n        }\n        return // What to do here?\n    }\n}\n</code></pre>\n<p>Are there any suggestions on how to delegate to the default List&lt;...&gt; JsonDeserializer? Or are there better solutions?</p>\n"},{"tags":["java","json","gson","bukkit"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1679419171,"post_id":75803696,"comment_id":133717629,"body_markdown":"I go for @AllaArgsConstructor and the fact that rank class does not appear to have a variable for &quot;prefix&quot;:&quot;&quot;, apart no value.","body":"I go for @AllaArgsConstructor and the fact that rank class does not appear to have a variable for &quot;prefix&quot;:&quot;&quot;, apart no value."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1679434296,"post_id":75803696,"comment_id":133721305,"body_markdown":"Is the JSON data possibly itself inside a JSON string, i.e. `&quot;[{\\&quot;id\\&quot;:\\&quot;default\\&quot;,\\&quot;displayName\\&quot;, ...`?","body":"Is the JSON data possibly itself inside a JSON string, i.e. <code>&quot;[{\\&quot;id\\&quot;:\\&quot;default\\&quot;,\\&quot;displayName\\&quot;, ...</code>?"},{"owner":{"account_id":19710145,"reputation":118,"user_id":14430875,"display_name":"daysling"},"score":0,"creation_date":1680180615,"post_id":75803696,"comment_id":133856598,"body_markdown":"Try marking Rank class Seralizable by adding @Seralizable annotation","body":"Try marking Rank class Seralizable by adding @Seralizable annotation"}],"answers":[{"tags":[],"owner":{"account_id":17023165,"reputation":1,"user_id":12315154,"display_name":"Alex_Ts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679418421,"creation_date":1679418421,"answer_id":75804303,"question_id":75803696,"body_markdown":"Firstly the json strng you provided does not contain `inheritFromId` value which might be needed for deserializarion.\r\n\r\nThe problem might also be caused by `color` field which is written to be an object of the type `ChatColor` while represented as a `String` in json.","title":"Getting an error when trying to assign a List&lt;Rank&gt;","body":"<p>Firstly the json strng you provided does not contain <code>inheritFromId</code> value which might be needed for deserializarion.</p>\n<p>The problem might also be caused by <code>color</code> field which is written to be an object of the type <code>ChatColor</code> while represented as a <code>String</code> in json.</p>\n"}],"owner":{"account_id":28076659,"reputation":11,"user_id":21448400,"display_name":"ma1de"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679418421,"creation_date":1679415164,"question_id":75803696,"body_markdown":"I have tried to parse a JSON formatted text from my Web API into an ArrayList of Rank.class, but I have been getting a [ClassCastException](https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html) error with message\r\n\r\n&gt; Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject\r\n\r\nHere&#39;s some of my code:\r\n\r\n```\r\n# RankHandler.refresh()\r\n\r\nthis.ranks = new Gson().fromJson(Juke.INSTANCE.getApiHandler().request(&quot;/ranks&quot;).getJsonResponse(), new TypeToken&lt;List&lt;Rank&gt;&gt;() {}.getType());\r\n```\r\n\r\n```\r\n# Rank.class\r\n\r\n@Getter @AllArgsConstructor\r\npublic class Rank {\r\n    private String id, displayName, prefix, inheritFromId;\r\n    private ChatColor color;\r\n    private List&lt;String&gt; permissions;\r\n    private int weight;\r\n    private boolean staff;\r\n}\r\n```\r\n\r\n```\r\n# Exception:\r\n\r\n[19:11:59 WARN]: java.lang.ClassCastException: Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject\r\n[19:11:59 WARN]:        at java.lang.Class.cast(Unknown Source)\r\n[19:11:59 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:690)\r\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIRequest.getJsonResponse(APIRequest.java:54)\r\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:27)\r\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:52)\r\n[19:11:59 WARN]:        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\r\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\r\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\r\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n[19:11:59 WARN]:        at java.lang.Thread.run(Unknown Source)\r\n[19:11:59 WARN]: Exception in thread &quot;Craft Scheduler Thread - 48&quot;\r\n[19:11:59 WARN]: org.apache.commons.lang.UnhandledException: Plugin juke-bukkit v1.0-SNAPSHOT generated an exception while executing task 2\r\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:56)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NullPointerException\r\n        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\r\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\r\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\r\n        ... 3 more\r\n```\r\n\r\n```\r\n# What I am trying to parse as an array list of Rank.class\r\n\r\n[{&quot;id&quot;:&quot;default&quot;,&quot;displayName&quot;:&quot;Default&quot;,&quot;prefix&quot;:&quot;&quot;,&quot;color&quot;:&quot;WHITE&quot;,&quot;permissions&quot;:[],&quot;weight&quot;:0,&quot;staff&quot;:false}]\r\n```\r\n\r\n```\r\n# Dependencies\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.8-R0.1-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.26&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;me.ma1de.juke.shared&lt;/groupId&gt;\r\n            &lt;artifactId&gt;Shared&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;31.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n            &lt;version&gt;4.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nI have tried switching gson&#39;s version from [2.10.1](https://github.com/google/gson/releases/tag/gson-parent-2.10.1) to [2.8.6](https://github.com/google/gson/releases/tag/gson-parent-2.8.6), thought that downgrading gson would not cause this error, but it happened again.","title":"Getting an error when trying to assign a List&lt;Rank&gt;","body":"<p>I have tried to parse a JSON formatted text from my Web API into an ArrayList of Rank.class, but I have been getting a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html\" rel=\"nofollow noreferrer\">ClassCastException</a> error with message</p>\n<blockquote>\n<p>Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject</p>\n</blockquote>\n<p>Here's some of my code:</p>\n<pre><code># RankHandler.refresh()\n\nthis.ranks = new Gson().fromJson(Juke.INSTANCE.getApiHandler().request(&quot;/ranks&quot;).getJsonResponse(), new TypeToken&lt;List&lt;Rank&gt;&gt;() {}.getType());\n</code></pre>\n<pre><code># Rank.class\n\n@Getter @AllArgsConstructor\npublic class Rank {\n    private String id, displayName, prefix, inheritFromId;\n    private ChatColor color;\n    private List&lt;String&gt; permissions;\n    private int weight;\n    private boolean staff;\n}\n</code></pre>\n<pre><code># Exception:\n\n[19:11:59 WARN]: java.lang.ClassCastException: Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject\n[19:11:59 WARN]:        at java.lang.Class.cast(Unknown Source)\n[19:11:59 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:690)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIRequest.getJsonResponse(APIRequest.java:54)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:27)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:52)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n[19:11:59 WARN]:        at java.lang.Thread.run(Unknown Source)\n[19:11:59 WARN]: Exception in thread &quot;Craft Scheduler Thread - 48&quot;\n[19:11:59 WARN]: org.apache.commons.lang.UnhandledException: Plugin juke-bukkit v1.0-SNAPSHOT generated an exception while executing task 2\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:56)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\n        ... 3 more\n</code></pre>\n<pre><code># What I am trying to parse as an array list of Rank.class\n\n[{&quot;id&quot;:&quot;default&quot;,&quot;displayName&quot;:&quot;Default&quot;,&quot;prefix&quot;:&quot;&quot;,&quot;color&quot;:&quot;WHITE&quot;,&quot;permissions&quot;:[],&quot;weight&quot;:0,&quot;staff&quot;:false}]\n</code></pre>\n<pre><code># Dependencies\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\n            &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\n            &lt;version&gt;1.8.8-R0.1-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;me.ma1de.juke.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;Shared&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.8.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;31.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>I have tried switching gson's version from <a href=\"https://github.com/google/gson/releases/tag/gson-parent-2.10.1\" rel=\"nofollow noreferrer\">2.10.1</a> to <a href=\"https://github.com/google/gson/releases/tag/gson-parent-2.8.6\" rel=\"nofollow noreferrer\">2.8.6</a>, thought that downgrading gson would not cause this error, but it happened again.</p>\n"},{"tags":["java","json","jolt","fixed-length-file"],"comments":[{"owner":{"account_id":27862574,"reputation":19,"user_id":21274759,"display_name":"Aziz R."},"score":1,"creation_date":1679417801,"post_id":75804049,"comment_id":133717236,"body_markdown":"oops that was an accident, but later on I would like to have a field that takes the initial, rather than the name.. not right now though. it should be LITA as in the input.","body":"oops that was an accident, but later on I would like to have a field that takes the initial, rather than the name.. not right now though. it should be LITA as in the input."}],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679417868,"creation_date":1679417868,"answer_id":75804205,"question_id":75804049,"body_markdown":"You had better using a **modify-overwrite** transformation and then get rid of the redundant attributes by **remove** spec such as\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;MAIN-TOWN&quot;: &quot;=firstElement(@(1,TOWN))&quot;,\r\n      &quot;MAIN_FORENM&quot;: &quot;=firstElement(@(1,FORENM))&quot;,\r\n      &quot;MAIN_SURNAME&quot;: &quot;=firstElement(@(1,SURNAME))&quot;,\r\n      &quot;ALT-TOWN&quot;: &quot;=elementAt(4,@(1,TOWN))&quot;,\r\n      &quot;ALT_FORENM&quot;: &quot;=lastElement(@(1,FORENM))&quot;,\r\n      &quot;ALT_SURNAME&quot;: &quot;=lastElement(@(1,SURNAME))&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;remove&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;FORENM|SURNAME|TOWN&quot;: &quot;&quot;\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bEN0K.jpg","title":"Can I use JOLT &#39;shift&#39; to achieve this and how? Array to map (list to dict) using JOLT","body":"<p>You had better using a <strong>modify-overwrite</strong> transformation and then get rid of the redundant attributes by <strong>remove</strong> spec such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;MAIN-TOWN&quot;: &quot;=firstElement(@(1,TOWN))&quot;,\n      &quot;MAIN_FORENM&quot;: &quot;=firstElement(@(1,FORENM))&quot;,\n      &quot;MAIN_SURNAME&quot;: &quot;=firstElement(@(1,SURNAME))&quot;,\n      &quot;ALT-TOWN&quot;: &quot;=elementAt(4,@(1,TOWN))&quot;,\n      &quot;ALT_FORENM&quot;: &quot;=lastElement(@(1,FORENM))&quot;,\n      &quot;ALT_SURNAME&quot;: &quot;=lastElement(@(1,SURNAME))&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;remove&quot;,\n    &quot;spec&quot;: {\n      &quot;FORENM|SURNAME|TOWN&quot;: &quot;&quot;\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is</p>\n<p><a href=\"https://i.stack.imgur.com/bEN0K.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bEN0K.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":27862574,"reputation":19,"user_id":21274759,"display_name":"Aziz R."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75804205,"answer_count":1,"score":0,"last_activity_date":1679418124,"creation_date":1679417083,"question_id":75804049,"body_markdown":"I am transforming a large JSON into a fixed-length csv file, at this stage I&#39;ve cut down the json with a JOLT Remove and I have used a JOLT Shift to put the remaining parameters into the input provided.\r\n\r\n\r\n**I have the output from a previous JOLT &#39;shift&#39; resembling the following:**\r\n**This will form the input for a JOLT &quot;shift&quot;**\r\n\r\n```json\r\n{\r\n  &quot;TIME&quot;: &quot;2023-02-27T16:26:25Z&quot;,\r\n  &quot;FORENM&quot;: [\r\n    &quot;JILL&quot;,\r\n    &quot;LITA&quot;\r\n  ],\r\n  &quot;SURNAME&quot;: [\r\n    &quot;JaCK&quot;,\r\n    &quot;HANCOCK&quot;\r\n  ],\r\n  &quot;TOWN&quot;: [\r\n    &quot;CHRISTCHURCH&quot;,\r\n    &quot;GLASGOW&quot;,\r\n    &quot;LAZYTOWN&quot;,\r\n    null,\r\n    &quot;TELETUBBYHILL&quot;,\r\n    &quot;BALAMORY&quot;\r\n  ]\r\n}\r\n```\r\n\r\n**I want the output to resemble the following:**\r\n\r\n```json\r\n{\r\n  &quot;MAIN-TOWN&quot;: &quot;CHRISTCHURCH&quot;,\r\n  &quot;MAIN_FORENM&quot;: &quot;JILL&quot;,\r\n  &quot;MAIN_SURNAME&quot;: &quot;JaCK&quot;,\r\n  &quot;TIME&quot;: &quot;2023-02-27T16:26:25Z&quot;,\r\n  &quot;ALT-TOWN&quot;: &quot;TELETUBBYHILL&quot;,\r\n  &quot;ALT_FORENM&quot;: &quot;LITA&quot;,\r\n  &quot;ALT_SURNAME&quot;: &quot;HANCOCK&quot;\r\n}\r\n```\r\n\r\n**Is this possible? If so, can I do it with a **shift** transform? Could someone show me to I would be able to map a certain index from an array in the input. For example, from the town array I want to map **`&quot;MAIN-TOWN&quot;`** to index 0 of the **`&quot;TOWN&quot;`** array from the input and index 4 to **`&quot;ALT-TOWN&quot;`**.**\r\n\r\n","title":"Can I use JOLT &#39;shift&#39; to achieve this and how? Array to map (list to dict) using JOLT","body":"<p>I am transforming a large JSON into a fixed-length csv file, at this stage I've cut down the json with a JOLT Remove and I have used a JOLT Shift to put the remaining parameters into the input provided.</p>\n<p><strong>I have the output from a previous JOLT 'shift' resembling the following:</strong>\n<strong>This will form the input for a JOLT &quot;shift&quot;</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;TIME&quot;: &quot;2023-02-27T16:26:25Z&quot;,\n  &quot;FORENM&quot;: [\n    &quot;JILL&quot;,\n    &quot;LITA&quot;\n  ],\n  &quot;SURNAME&quot;: [\n    &quot;JaCK&quot;,\n    &quot;HANCOCK&quot;\n  ],\n  &quot;TOWN&quot;: [\n    &quot;CHRISTCHURCH&quot;,\n    &quot;GLASGOW&quot;,\n    &quot;LAZYTOWN&quot;,\n    null,\n    &quot;TELETUBBYHILL&quot;,\n    &quot;BALAMORY&quot;\n  ]\n}\n</code></pre>\n<p><strong>I want the output to resemble the following:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;MAIN-TOWN&quot;: &quot;CHRISTCHURCH&quot;,\n  &quot;MAIN_FORENM&quot;: &quot;JILL&quot;,\n  &quot;MAIN_SURNAME&quot;: &quot;JaCK&quot;,\n  &quot;TIME&quot;: &quot;2023-02-27T16:26:25Z&quot;,\n  &quot;ALT-TOWN&quot;: &quot;TELETUBBYHILL&quot;,\n  &quot;ALT_FORENM&quot;: &quot;LITA&quot;,\n  &quot;ALT_SURNAME&quot;: &quot;HANCOCK&quot;\n}\n</code></pre>\n<p><strong>Is this possible? If so, can I do it with a <strong>shift</strong> transform? Could someone show me to I would be able to map a certain index from an array in the input. For example, from the town array I want to map <strong><code>&quot;MAIN-TOWN&quot;</code></strong> to index 0 of the <strong><code>&quot;TOWN&quot;</code></strong> array from the input and index 4 to <strong><code>&quot;ALT-TOWN&quot;</code></strong>.</strong></p>\n"},{"tags":["java","algorithm","floating-point","double","precision"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1678918312,"post_id":75750443,"comment_id":133628581,"body_markdown":"Please describe exactly what you mean by &quot;precision loss&quot;, what you are expecting and what is &quot;not good&quot; about what you&#39;re getting.","body":"Please describe exactly what you mean by &quot;precision loss&quot;, what you are expecting and what is &quot;not good&quot; about what you&#39;re getting."},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":3,"creation_date":1678922122,"post_id":75750443,"comment_id":133629183,"body_markdown":"You say &quot;I have a service which receives doubles from outer world&quot;.  Does it receive them as strings, or as doubles?  If it receives them as strings, then you want to (somehow) convert them to scaled integers *without* converting to `double` first.  But if it receives them as `double`, then you definitely need to round after multiplying, and RaffleBuffle&#39;s answer applies.","body":"You say &quot;I have a service which receives doubles from outer world&quot;.  Does it receive them as strings, or as doubles?  If it receives them as strings, then you want to (somehow) convert them to scaled integers <i>without</i> converting to <code>double</code> first.  But if it receives them as <code>double</code>, then you definitely need to round after multiplying, and RaffleBuffle&#39;s answer applies."},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":3,"creation_date":1678922317,"post_id":75750443,"comment_id":133629207,"body_markdown":"But the fundamental issue is that if you&#39;re actually receiving them as `double`, your statement &quot;1.2345 comes to me, I know that 1.23456789 cannot come&quot; is meaningless.  You&#39;ll never get 1.2345; instead you&#39;re going to actually get 1.234499999999 (and about 40 more nonzero digits after that).","body":"But the fundamental issue is that if you&#39;re actually receiving them as <code>double</code>, your statement &quot;1.2345 comes to me, I know that 1.23456789 cannot come&quot; is meaningless.  You&#39;ll never get 1.2345; instead you&#39;re going to actually get 1.234499999999 (and about 40 more nonzero digits after that)."},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":2,"creation_date":1678923322,"post_id":75750443,"comment_id":133629380,"body_markdown":"*No division and multiplication involved...* **Except** for that multiplication by 10000.  No joke: that&#39;s your problem.","body":"<i>No division and multiplication involved...</i> <b>Except</b> for that multiplication by 10000.  No joke: that&#39;s your problem."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1678923679,"post_id":75750443,"comment_id":133629438,"body_markdown":"If you want accuracy rather than speed, use `BigDecimal` rather than `double`. Your service should return text which you parse as `BigDecimal`.","body":"If you want accuracy rather than speed, use <code>BigDecimal</code> rather than <code>double</code>. Your service should return text which you parse as <code>BigDecimal</code>."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1678963644,"post_id":75750443,"comment_id":133636286,"body_markdown":"What is the largest any of the numbers can be?","body":"What is the largest any of the numbers can be?"},{"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"score":0,"creation_date":1679129246,"post_id":75750443,"comment_id":133668558,"body_markdown":"@SteveSummit, \nService receives data as doubles. \nI know that double representation is not showing all the digits after decimal point. Its probably better to say that rounding 1.234499999999 to 1.2345 works perfectly for me.\nMultiplication by 10000 is something I have added to keep precision. I am trying to say that in a number which comes only first 5 digits are important for me. Nothing else matters. Thats why I want to x 10000 to make it integer and work without losing precision.","body":"@SteveSummit,  Service receives data as doubles.  I know that double representation is not showing all the digits after decimal point. Its probably better to say that rounding 1.234499999999 to 1.2345 works perfectly for me. Multiplication by 10000 is something I have added to keep precision. I am trying to say that in a number which comes only first 5 digits are important for me. Nothing else matters. Thats why I want to x 10000 to make it integer and work without losing precision."},{"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"score":0,"creation_date":1679129292,"post_id":75750443,"comment_id":133668563,"body_markdown":"@EricPostpischil All numbers are doubles roughly in 0.5 - 1.5 zone.","body":"@EricPostpischil All numbers are doubles roughly in 0.5 - 1.5 zone."},{"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"score":0,"creation_date":1679129962,"post_id":75750443,"comment_id":133668658,"body_markdown":"@SteveSummit, one more explanation. In the system which sends data to me the values are stored as integers, so there is no sense to use any data &quot;behind&quot; 5th digit.","body":"@SteveSummit, one more explanation. In the system which sends data to me the values are stored as integers, so there is no sense to use any data &quot;behind&quot; 5th digit."},{"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"score":0,"creation_date":1679130341,"post_id":75750443,"comment_id":133668718,"body_markdown":"@Bohemian, here I refer to precision loss which results from double nature of incoming numbers. I want to avoid it. If I were doing this operations manually on the paper I would easily succeed:\ntake 1.2345, write 12345, do the needful, get result 15432, return 1.5432","body":"@Bohemian, here I refer to precision loss which results from double nature of incoming numbers. I want to avoid it. If I were doing this operations manually on the paper I would easily succeed: take 1.2345, write 12345, do the needful, get result 15432, return 1.5432"},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1679138281,"post_id":75750443,"comment_id":133669830,"body_markdown":"If you are receiving only `double` values that are the `double` values nearest numbers in [0, 2) with four decimal digits after the decimal point, and you do only a few additions and subtractions with them, then you can get the desired results simply by rounding the final results with `Math.round(10000*x)/10000`. You can also get the desired results by converting each received value to an integer with `NewValue = Math.round(10000*OldValue)`, doing the arithmetic with integers, and producing the final values with `FinalValue = Result / 10000`.","body":"If you are receiving only <code>double</code> values that are the <code>double</code> values nearest numbers in [0, 2) with four decimal digits after the decimal point, and you do only a few additions and subtractions with them, then you can get the desired results simply by rounding the final results with <code>Math.round(10000*x)&#47;10000</code>. You can also get the desired results by converting each received value to an integer with <code>NewValue = Math.round(10000*OldValue)</code>, doing the arithmetic with integers, and producing the final values with <code>FinalValue = Result &#47; 10000</code>."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1679138388,"post_id":75750443,"comment_id":133669848,"body_markdown":"Note that proper Stack Overflow procedure would be for you to edit the new information into the question, including the range of the values, a bound on the number of operations performed, and a correct description of the input. It is fundamentally impossible to receive a `double` value that is 1.2345 because 1.2345 is not representable in `double`. It is important to understand what numbers `double` can represent and how to describe the input correctly.","body":"Note that proper Stack Overflow procedure would be for you to edit the new information into the question, including the range of the values, a bound on the number of operations performed, and a correct description of the input. It is fundamentally impossible to receive a <code>double</code> value that is 1.2345 because 1.2345 is not representable in <code>double</code>. It is important to understand what numbers <code>double</code> can represent and how to describe the input correctly."},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":0,"creation_date":1679141276,"post_id":75750443,"comment_id":133670243,"body_markdown":"There are two or three ways of looking at this: (1) If the sending system keeps these numbers as fixed-point decimal, but sends them to you as binary floating point, *that* represents a certain, fundamental amount of information loss right there, which you will never get around as long as transmission is via floating point.  If the sending system is using fixed point, and if you desire to use fixed point also, you really ought to be using a scheme which transmits data between systems using fixed point.  (But I realize that changing the transmission format may not be an option for you.)","body":"There are two or three ways of looking at this: (1) If the sending system keeps these numbers as fixed-point decimal, but sends them to you as binary floating point, <i>that</i> represents a certain, fundamental amount of information loss right there, which you will never get around as long as transmission is via floating point.  If the sending system is using fixed point, and if you desire to use fixed point also, you really ought to be using a scheme which transmits data between systems using fixed point.  (But I realize that changing the transmission format may not be an option for you.)"},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":0,"creation_date":1679141529,"post_id":75750443,"comment_id":133670291,"body_markdown":"(2) The &quot;information loss&quot; involved in converting decimal fractions to binary is, up to a point, reversible.  (That&#39;s why Eric Postpischil was asking you about the range of your numbers.)  As long as you don&#39;t &quot;run out of precision&quot; while working with your data in the floating point realm, and if certain other conditions are met, you can perfectly recover your decimal fractions again at the end, without precision loss or noise, but doing this faithfully necessarily involves rounding (not simple truncation).","body":"(2) The &quot;information loss&quot; involved in converting decimal fractions to binary is, up to a point, reversible.  (That&#39;s why Eric Postpischil was asking you about the range of your numbers.)  As long as you don&#39;t &quot;run out of precision&quot; while working with your data in the floating point realm, and if certain other conditions are met, you can perfectly recover your decimal fractions again at the end, without precision loss or noise, but doing this faithfully necessarily involves rounding (not simple truncation)."},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":0,"creation_date":1679141723,"post_id":75750443,"comment_id":133670322,"body_markdown":"So, as long as you round after multiplying by 10000, you should be fine.  But based on what you&#39;ve said, I believe you would be equally fine doing all your calculations using floating point, and rounding when printing or transmitting your final results.  That is, whatever &quot;precision loss&quot; it is that you&#39;re fighting, I do not believe that it&#39;s actually necessary to do all your work using integers in order to correct it.  But the arguments here do depend on the fact that, as you say, your manipulations of this data (after any initial multiplication) all involve simple additions and subtractions.","body":"So, as long as you round after multiplying by 10000, you should be fine.  But based on what you&#39;ve said, I believe you would be equally fine doing all your calculations using floating point, and rounding when printing or transmitting your final results.  That is, whatever &quot;precision loss&quot; it is that you&#39;re fighting, I do not believe that it&#39;s actually necessary to do all your work using integers in order to correct it.  But the arguments here do depend on the fact that, as you say, your manipulations of this data (after any initial multiplication) all involve simple additions and subtractions."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678966571,"creation_date":1678966571,"answer_id":75755729,"question_id":75750443,"body_markdown":"Use reference `Double` instead of primitive `double` for your input and convert to `BigDecimal` for accuracy. \r\n\r\n    public static void main(String args[]) {\r\n\r\n        Double[] n  = {1.3456, 6.0000, 1.9999, 7.0001};\r\n        int[] in    = new int[4];\r\n        double[] od = new double[4];\r\n\r\n        final BigDecimal tenK = BigDecimal.valueOf(10000);\r\n\r\n        for (int i=0;i&lt;4;i++) {\r\n            in[i] = BigDecimal.valueOf(n[i]).multiply(tenK).intValue();\r\n        }\r\n\r\n        for (int i=0;i&lt;4;i++) {\r\n            od[i] = in[i] / tenK.doubleValue();\r\n        }\r\n\r\n        System.out.println(Arrays.toString(n)); \r\n        System.out.println(Arrays.toString(in));\r\n        System.out.println(Arrays.toString(od));\r\n    }\r\n\r\nIf the transformation is a recurring task, it can be extracted into a function:\r\n\r\n    public static void main(String args[]) {\r\n\r\n        Double[] n  = {1.3456, 6.0000, 1.9999, 7.0001};\r\n        int[] in    = new int[4];\r\n        double[] od = new double[4];\r\n\r\n        final BigDecimal tenK = BigDecimal.valueOf(10000);\r\n\r\n        final DoubleToIntFunction multiplyBYTenK = d -&gt; BigDecimal.valueOf(d).multiply(tenK).intValue();\r\n        final IntToDoubleFunction divideByTenK   = i -&gt; i / tenK.doubleValue();\r\n\r\n        Arrays.setAll(in, i -&gt; multiplyBYTenK.applyAsInt(n[i]));\r\n        Arrays.setAll(od, i -&gt; divideByTenK.applyAsDouble(in[i]));\r\n\r\n        System.out.println(Arrays.toString(n)); //\r\n        System.out.println(Arrays.toString(in));\r\n        System.out.println(Arrays.toString(od));\r\n    }\r\n\r\n","title":"Keeping precision of integers, passed as doubles","body":"<p>Use reference <code>Double</code> instead of primitive <code>double</code> for your input and convert to <code>BigDecimal</code> for accuracy.</p>\n<pre><code>public static void main(String args[]) {\n\n    Double[] n  = {1.3456, 6.0000, 1.9999, 7.0001};\n    int[] in    = new int[4];\n    double[] od = new double[4];\n\n    final BigDecimal tenK = BigDecimal.valueOf(10000);\n\n    for (int i=0;i&lt;4;i++) {\n        in[i] = BigDecimal.valueOf(n[i]).multiply(tenK).intValue();\n    }\n\n    for (int i=0;i&lt;4;i++) {\n        od[i] = in[i] / tenK.doubleValue();\n    }\n\n    System.out.println(Arrays.toString(n)); \n    System.out.println(Arrays.toString(in));\n    System.out.println(Arrays.toString(od));\n}\n</code></pre>\n<p>If the transformation is a recurring task, it can be extracted into a function:</p>\n<pre><code>public static void main(String args[]) {\n\n    Double[] n  = {1.3456, 6.0000, 1.9999, 7.0001};\n    int[] in    = new int[4];\n    double[] od = new double[4];\n\n    final BigDecimal tenK = BigDecimal.valueOf(10000);\n\n    final DoubleToIntFunction multiplyBYTenK = d -&gt; BigDecimal.valueOf(d).multiply(tenK).intValue();\n    final IntToDoubleFunction divideByTenK   = i -&gt; i / tenK.doubleValue();\n\n    Arrays.setAll(in, i -&gt; multiplyBYTenK.applyAsInt(n[i]));\n    Arrays.setAll(od, i -&gt; divideByTenK.applyAsDouble(in[i]));\n\n    System.out.println(Arrays.toString(n)); //\n    System.out.println(Arrays.toString(in));\n    System.out.println(Arrays.toString(od));\n}\n</code></pre>\n"}],"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679418077,"creation_date":1678917519,"question_id":75750443,"body_markdown":"I have a service which receives doubles from outer world. I know for sure that all doubles have only 4 digits after decimal point. *It is important to emphasize, that original system which sends data to me works with 5 digit integers, so all data &quot;behind&quot; these 5 digits is meaningless and misleading.* To keep precision I want to convert incoming doubles to integers, work with integers, and then convert them back to doubles to return back. I see that in theory, knowing that inputs always have 4 digits after decimal point I should not be losing precision here at all, taking into account that ***I only apply addition / subtraction*** to these numbers. ***No division and multiplication involved.*** \r\n\r\ni.e. \r\n\r\n - A double like 1.2345 is received (I know that 1.23456789 cannot be received)\r\n - I multiply it by 10,000 and convert to integer\r\n - Now I can do exact integer calculations (addition and subtraction only) which means the result must be precise (opposed to addition and subtraction using doubles)\r\n - Before returning, I divide my result by 10,000 again to convert back to double\r\n\r\nUnfortunately I am already losing accuracy in the conversions. My following test code shows this:\r\n    \r\n    double[] examples = {1.3456, 6.0000, 1.9999, 7.0001};\r\n    int[] inInt = new int[4];\r\n    double[] outDouble = new double[4];\r\n\r\n    // Input conversion from double to int\r\n    for (int i = 0; i &lt; 4; i++) {\r\n        inInt[i] = (int) (examples[i] * 10_000);\r\n    }\r\n\r\n    // Integer calculations elided\r\n\r\n    // Output conversion back to double\r\n    for (int i = 0; i &lt; 4; i++) {\r\n        outDouble[i] = ((double) inInt[i] / 10_000.0);\r\n    }\r\n\r\n    // Show\r\n    System.out.println(Arrays.toString(examples));\r\n    System.out.println(Arrays.toString(inInt));\r\n    System.out.println(Arrays.toString(outDouble));\r\n\r\nThe above code gives me\r\n\r\n    [1.3456, 6.0, 1.9999, 7.0001]\r\n    [13455, 60000, 19999, 70001]\r\n    [1.3455, 6.0, 1.9999, 7.0001]\r\n\r\nSo you can see, while the 2nd to 4th example work, the `1.3456` lost precision when converting to int, as it became `13455` instead of `13456`. \r\n\r\nIs it possible to eliminate precision losses here completely?\r\n\r\nI see only one option: double &gt; string &gt; integer &gt; operations with integers &gt; construct string &gt; build double, but it&#39;s quite laborious. I am using Java, but I don&#39;t think that&#39;s important here.\r\n\r\nPS  \r\nBy &quot;precision loss&quot; here I mean any loss of precision which results from double nature of incoming data, i.e. calculation &quot;without precision loss&quot; for me is calculation made on integers, which are built from incoming data.\r\n","title":"Keeping precision of integers, passed as doubles","body":"<p>I have a service which receives doubles from outer world. I know for sure that all doubles have only 4 digits after decimal point. <em>It is important to emphasize, that original system which sends data to me works with 5 digit integers, so all data &quot;behind&quot; these 5 digits is meaningless and misleading.</em> To keep precision I want to convert incoming doubles to integers, work with integers, and then convert them back to doubles to return back. I see that in theory, knowing that inputs always have 4 digits after decimal point I should not be losing precision here at all, taking into account that <em><strong>I only apply addition / subtraction</strong></em> to these numbers. <em><strong>No division and multiplication involved.</strong></em></p>\n<p>i.e.</p>\n<ul>\n<li>A double like 1.2345 is received (I know that 1.23456789 cannot be received)</li>\n<li>I multiply it by 10,000 and convert to integer</li>\n<li>Now I can do exact integer calculations (addition and subtraction only) which means the result must be precise (opposed to addition and subtraction using doubles)</li>\n<li>Before returning, I divide my result by 10,000 again to convert back to double</li>\n</ul>\n<p>Unfortunately I am already losing accuracy in the conversions. My following test code shows this:</p>\n<pre><code>double[] examples = {1.3456, 6.0000, 1.9999, 7.0001};\nint[] inInt = new int[4];\ndouble[] outDouble = new double[4];\n\n// Input conversion from double to int\nfor (int i = 0; i &lt; 4; i++) {\n    inInt[i] = (int) (examples[i] * 10_000);\n}\n\n// Integer calculations elided\n\n// Output conversion back to double\nfor (int i = 0; i &lt; 4; i++) {\n    outDouble[i] = ((double) inInt[i] / 10_000.0);\n}\n\n// Show\nSystem.out.println(Arrays.toString(examples));\nSystem.out.println(Arrays.toString(inInt));\nSystem.out.println(Arrays.toString(outDouble));\n</code></pre>\n<p>The above code gives me</p>\n<pre><code>[1.3456, 6.0, 1.9999, 7.0001]\n[13455, 60000, 19999, 70001]\n[1.3455, 6.0, 1.9999, 7.0001]\n</code></pre>\n<p>So you can see, while the 2nd to 4th example work, the <code>1.3456</code> lost precision when converting to int, as it became <code>13455</code> instead of <code>13456</code>.</p>\n<p>Is it possible to eliminate precision losses here completely?</p>\n<p>I see only one option: double &gt; string &gt; integer &gt; operations with integers &gt; construct string &gt; build double, but it's quite laborious. I am using Java, but I don't think that's important here.</p>\n<p>PS<br />\nBy &quot;precision loss&quot; here I mean any loss of precision which results from double nature of incoming data, i.e. calculation &quot;without precision loss&quot; for me is calculation made on integers, which are built from incoming data.</p>\n"},{"tags":["java","java-11"],"comments":[{"owner":{"account_id":2574017,"reputation":4150,"user_id":2232127,"accept_rate":100,"display_name":"JensV"},"score":1,"creation_date":1628257970,"post_id":68682657,"comment_id":121379647,"body_markdown":"Guessing here: The `jdk.*` packages seem related to the actual compiler of the jdk. I think it&#39;s best to follow the advice from the given oracle link. If you use anything else than `java.`, `javax.` or `org.` you might run into issues when running on a different jvm (e.g. graalvm)","body":"Guessing here: The <code>jdk.*</code> packages seem related to the actual compiler of the jdk. I think it&#39;s best to follow the advice from the given oracle link. If you use anything else than <code>java.</code>, <code>javax.</code> or <code>org.</code> you might run into issues when running on a different jvm (e.g. graalvm)"}],"answers":[{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1628257928,"creation_date":1628257928,"answer_id":68682751,"question_id":68682657,"body_markdown":"You are misreading: these are not packages, but modules.\r\n\r\nYou should use `java.*` modules and avoid `jdk.*` because their access/api are not guaranteed to be stable. `sun` (and `com.sun.*`) are mostly moved into `jdk.*` modules.\r\n\r\nThis all boils down to the [JEPs](http://openjdk.java.net/jeps/200):\r\n\r\n&gt; The modular structure of the JDK implements the following principles:\r\n&gt; \r\n&gt; - Standard modules, whose specifications are governed by the JCP, have names starting with the string &quot;`java.`&quot;.\r\n&gt; \r\n&gt; - All other modules are merely part of the JDK, and have names starting with the string &quot;`jdk.`&quot;.\r\n\r\n\r\n\r\n\r\n\r\n","title":"When to use java.* and jdk.* packages","body":"<p>You are misreading: these are not packages, but modules.</p>\n<p>You should use <code>java.*</code> modules and avoid <code>jdk.*</code> because their access/api are not guaranteed to be stable. <code>sun</code> (and <code>com.sun.*</code>) are mostly moved into <code>jdk.*</code> modules.</p>\n<p>This all boils down to the <a href=\"http://openjdk.java.net/jeps/200\" rel=\"noreferrer\">JEPs</a>:</p>\n<blockquote>\n<p>The modular structure of the JDK implements the following principles:</p>\n<ul>\n<li><p>Standard modules, whose specifications are governed by the JCP, have names starting with the string &quot;<code>java.</code>&quot;.</p>\n</li>\n<li><p>All other modules are merely part of the JDK, and have names starting with the string &quot;<code>jdk.</code>&quot;.</p>\n</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":2730377,"reputation":1843,"user_id":2354302,"accept_rate":65,"display_name":"user2354302"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679417549,"creation_date":1628257538,"question_id":68682657,"body_markdown":"I&#39;m using IntelliJ and JDK 11. In the library packages, I see two types of package naming. `java.*` and `jdk.*` like shown in the below image:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nThe `jdk.*` packages have `sun.*` packages inside them. What does this mean to developers? Is the general advice to avoid using `jdk.*/sun.*` as written over here: https://www.oracle.com/java/technologies/faq-sun-packages.html ? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fb8L7.png","title":"When to use java.* and jdk.* packages","body":"<p>I'm using IntelliJ and JDK 11. In the library packages, I see two types of package naming. <code>java.*</code> and <code>jdk.*</code> like shown in the below image:</p>\n<p><a href=\"https://i.stack.imgur.com/fb8L7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fb8L7.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>jdk.*</code> packages have <code>sun.*</code> packages inside them. What does this mean to developers? Is the general advice to avoid using <code>jdk.*/sun.*</code> as written over here: <a href=\"https://www.oracle.com/java/technologies/faq-sun-packages.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/faq-sun-packages.html</a> ?</p>\n"},{"tags":["java","string","integer","number-formatting","parseint"],"answers":[{"tags":[],"owner":{"account_id":15278830,"reputation":1642,"user_id":11023821,"display_name":"Ralf Ulrich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679417541,"creation_date":1679417541,"answer_id":75804137,"question_id":75803980,"body_markdown":"Is the comma `,` mandatory in your data? Can&#39;t you leave it away? If the comma is really there, and those are really integers, just try `name.replace(&quot;,&quot;,&quot;&quot;)` to remove and then use `parseInt` on that. ","title":"How to convert string to integer when we have comma (,) in between word when used in java code","body":"<p>Is the comma <code>,</code> mandatory in your data? Can't you leave it away? If the comma is really there, and those are really integers, just try <code>name.replace(&quot;,&quot;,&quot;&quot;)</code> to remove and then use <code>parseInt</code> on that.</p>\n"}],"owner":{"account_id":28077853,"reputation":1,"user_id":21449430,"display_name":"srilatha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679417962,"answer_count":1,"score":0,"last_activity_date":1679417541,"creation_date":1679416731,"question_id":75803980,"body_markdown":"I am trying to convert a price amount 3,456 which is in string datatype to integer data type. But I&#39;m getting a number format exception error. I have tried `parseInt` method and `valueOf` but giving same error.\r\n\r\n    public static void main(String[] args) {\r\n\tString name=&quot;3,456&quot;;\r\n    int value= Integer.parseInt(name);\r\n        System.out.println(value);\r\n    }\r\n[here is the error in console after running the code](https://i.stack.imgur.com/Osiv5.png)","title":"How to convert string to integer when we have comma (,) in between word when used in java code","body":"<p>I am trying to convert a price amount 3,456 which is in string datatype to integer data type. But I'm getting a number format exception error. I have tried <code>parseInt</code> method and <code>valueOf</code> but giving same error.</p>\n<pre><code>public static void main(String[] args) {\nString name=&quot;3,456&quot;;\nint value= Integer.parseInt(name);\n    System.out.println(value);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Osiv5.png\" rel=\"nofollow noreferrer\">here is the error in console after running the code</a></p>\n"},{"tags":["java","java-11","com.sun.net.httpserver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1631018941,"post_id":69039167,"comment_id":122106235,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":3532691,"reputation":21,"user_id":2951756,"display_name":"user2951756"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1679417513,"creation_date":1630639952,"question_id":69039167,"body_markdown":"AuthCacheValue and AuthCacheImpl were present in sun.net package till jdk 1.8\r\nBut now while trying to use the same in jdk 11, it seems the package is no longer visible. Any leads would be highly appreciated if someone can suggest what exactly is the alternative of it or how this can be achieved","title":"What is the alternative of AuthCacheValue and AuthCacheImpl in Java11","body":"<p>AuthCacheValue and AuthCacheImpl were present in sun.net package till jdk 1.8\nBut now while trying to use the same in jdk 11, it seems the package is no longer visible. Any leads would be highly appreciated if someone can suggest what exactly is the alternative of it or how this can be achieved</p>\n"},{"tags":["java","performance","spring-boot","startup"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1417506361,"post_id":27230702,"comment_id":42963796,"body_markdown":"Post your code. Normally only the package the application runner is defined is is scanned. If you have other packages defined for `@ComponentScan` those are scanned as well. Another thing is to make sure you haven&#39;t enabled debug or trace logging as generally logging is slow, very slow.","body":"Post your code. Normally only the package the application runner is defined is is scanned. If you have other packages defined for <code>@ComponentScan</code> those are scanned as well. Another thing is to make sure you haven&#39;t enabled debug or trace logging as generally logging is slow, very slow."},{"owner":{"account_id":274366,"reputation":1144,"user_id":566556,"display_name":"Knut Forkalsrud"},"score":1,"creation_date":1426820925,"post_id":27230702,"comment_id":46537669,"body_markdown":"If you use Hibernate it also tends to eat significant time at application start.","body":"If you use Hibernate it also tends to eat significant time at application start."},{"owner":{"account_id":274366,"reputation":1144,"user_id":566556,"display_name":"Knut Forkalsrud"},"score":0,"creation_date":1426821010,"post_id":27230702,"comment_id":46537688,"body_markdown":"Spring&#39;s auto binding by type coupled with factory beans has the potential to be slow one you add a lot of beans and dependencies.","body":"Spring&#39;s auto binding by type coupled with factory beans has the potential to be slow one you add a lot of beans and dependencies."},{"owner":{"account_id":1727801,"reputation":3678,"user_id":1582089,"display_name":"Cassian"},"score":0,"creation_date":1426844857,"post_id":27230702,"comment_id":46546359,"body_markdown":"Or you can use caching, https://spring.io/guides/gs/caching/","body":"Or you can use caching, <a href=\"https://spring.io/guides/gs/caching/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/caching</a>"},{"owner":{"account_id":5135828,"reputation":2256,"user_id":4114631,"accept_rate":43,"display_name":"steady rain"},"score":3,"creation_date":1426853673,"post_id":27230702,"comment_id":46551063,"body_markdown":"Thanks all for the comments - I would not be able to post the code unfortunately (a lot of internal jars), however I&#39;m still looking for a way to debug this. Yes, I might be using A or B or doing X or Y, which slows it down. How do I determine this? If I add a dependency X, which has 15 transitive dependencies, how do I know which of those 16 slowed it down? If I can find out, is there anything I can do later to stop Spring from examining them? Pointers like that would be useful!","body":"Thanks all for the comments - I would not be able to post the code unfortunately (a lot of internal jars), however I&#39;m still looking for a way to debug this. Yes, I might be using A or B or doing X or Y, which slows it down. How do I determine this? If I add a dependency X, which has 15 transitive dependencies, how do I know which of those 16 slowed it down? If I can find out, is there anything I can do later to stop Spring from examining them? Pointers like that would be useful!"},{"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"score":0,"creation_date":1457982391,"post_id":27230702,"comment_id":59644488,"body_markdown":"Depending on your configured datasource, initializing your database schema takes a significant amount of time as well.","body":"Depending on your configured datasource, initializing your database schema takes a significant amount of time as well."},{"owner":{"account_id":2598,"reputation":2793,"user_id":3627,"accept_rate":50,"display_name":"royalghost"},"score":0,"creation_date":1522895144,"post_id":27230702,"comment_id":86336334,"body_markdown":"Can you share your POM file ?","body":"Can you share your POM file ?"},{"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"score":0,"creation_date":1586446011,"post_id":27230702,"comment_id":108136433,"body_markdown":"Personally, I use webpieces in cloud run since bootup time &#39;without&#39; hibernate is 1.5 seconds.  We needed something fast plus it does the playframework style of never needing to reboot the server to do development.  @steadyrain  of course, I am biased.","body":"Personally, I use webpieces in cloud run since bootup time &#39;without&#39; hibernate is 1.5 seconds.  We needed something fast plus it does the playframework style of never needing to reboot the server to do development.  @steadyrain  of course, I am biased."}],"answers":[{"tags":[],"owner":{"display_name":"user4415984"},"down_vote_count":10,"up_vote_count":0,"is_accepted":false,"score":-10,"last_activity_date":1427721326,"creation_date":1427721326,"answer_id":29347219,"question_id":27230702,"body_markdown":"To me it sounds like you&#39;re using a wrong configuration setting.\r\nStart by checking myContainer and possible conflicts.\r\nTo determine who is using the most resources you have to check the memory maps (see the amount of data!) for each dependency at a time - and that takes plenty of time, as well... (and SUDO privileges).\r\nBy the way: are you usually testing the code against the dependencies?","title":"Speed up Spring Boot startup time","body":"<p>To me it sounds like you're using a wrong configuration setting.\nStart by checking myContainer and possible conflicts.\nTo determine who is using the most resources you have to check the memory maps (see the amount of data!) for each dependency at a time - and that takes plenty of time, as well... (and SUDO privileges).\nBy the way: are you usually testing the code against the dependencies?</p>\n"},{"tags":[],"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"down_vote_count":2,"up_vote_count":82,"is_accepted":false,"score":80,"last_activity_date":1477891152,"creation_date":1457976296,"answer_id":35994135,"question_id":27230702,"body_markdown":"Spring Boot does a lot of auto-configuration that may not be needed. So you may want to narrow down only auto-configuration that is needed for your app. To see full list of auto-configuration included, just run logging of `org.springframework.boot.autoconfigure` in DEBUG mode (`logging.level.org.springframework.boot.autoconfigure=DEBUG` in `application.properties`). Another option is to run spring boot application with `--debug` option: `java -jar myproject-0.0.1-SNAPSHOT.jar --debug` \r\n\r\nThere would be something like this in output:\r\n\r\n    =========================\r\n    AUTO-CONFIGURATION REPORT\r\n    =========================\r\n\r\nInspect this list and include only autoconfigurations you need:\r\n\r\n    @Configuration\r\n    @Import({\r\n            DispatcherServletAutoConfiguration.class,\r\n            EmbeddedServletContainerAutoConfiguration.class,\r\n            ErrorMvcAutoConfiguration.class,\r\n            HttpEncodingAutoConfiguration.class,\r\n            HttpMessageConvertersAutoConfiguration.class,\r\n            JacksonAutoConfiguration.class,\r\n            ServerPropertiesAutoConfiguration.class,\r\n            PropertyPlaceholderAutoConfiguration.class,\r\n            ThymeleafAutoConfiguration.class,\r\n            WebMvcAutoConfiguration.class,\r\n            WebSocketAutoConfiguration.class,\r\n    })\r\n    public class SampleWebUiApplication {\r\n\r\nCode was copied from [this blog post][1].\r\n\r\n  [1]: http://www.alexecollins.com/spring-boot-performance/","title":"Speed up Spring Boot startup time","body":"<p>Spring Boot does a lot of auto-configuration that may not be needed. So you may want to narrow down only auto-configuration that is needed for your app. To see full list of auto-configuration included, just run logging of <code>org.springframework.boot.autoconfigure</code> in DEBUG mode (<code>logging.level.org.springframework.boot.autoconfigure=DEBUG</code> in <code>application.properties</code>). Another option is to run spring boot application with <code>--debug</code> option: <code>java -jar myproject-0.0.1-SNAPSHOT.jar --debug</code> </p>\n\n<p>There would be something like this in output:</p>\n\n<pre><code>=========================\nAUTO-CONFIGURATION REPORT\n=========================\n</code></pre>\n\n<p>Inspect this list and include only autoconfigurations you need:</p>\n\n<pre><code>@Configuration\n@Import({\n        DispatcherServletAutoConfiguration.class,\n        EmbeddedServletContainerAutoConfiguration.class,\n        ErrorMvcAutoConfiguration.class,\n        HttpEncodingAutoConfiguration.class,\n        HttpMessageConvertersAutoConfiguration.class,\n        JacksonAutoConfiguration.class,\n        ServerPropertiesAutoConfiguration.class,\n        PropertyPlaceholderAutoConfiguration.class,\n        ThymeleafAutoConfiguration.class,\n        WebMvcAutoConfiguration.class,\n        WebSocketAutoConfiguration.class,\n})\npublic class SampleWebUiApplication {\n</code></pre>\n\n<p>Code was copied from <a href=\"http://www.alexecollins.com/spring-boot-performance/\" rel=\"noreferrer\">this blog post</a>.</p>\n"},{"tags":[],"owner":{"account_id":2307261,"reputation":7757,"user_id":2026293,"display_name":"pczeus"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1483635650,"creation_date":1474555460,"answer_id":39642208,"question_id":27230702,"body_markdown":"As described in this question/answer, I think the best approach is to instead of adding only those you think you need, exclude the dependencies you know you don&#39;t need.\r\n\r\nSee: https://stackoverflow.com/questions/35709234/minimise-spring-boot-startup-time/35713866#35713866\r\n\r\nIn summary:\r\n\r\nYou can see what is going on under the covers and enable debug logging as simple as specifying --debug when starting the application from the command-line. You can also specify debug=true in your application.properties.\r\n\r\nAlso, you can set the logging level in application.properties as simple as:\r\n\r\nlogging.level.org.springframework.web: DEBUG\r\nlogging.level.org.hibernate: ERROR\r\n\r\nIf you detect an auto-configured module you don&#39;t want, it can be disabled. The docs for this can be found here: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-disabling-specific-auto-configuration\r\n\r\nAn example would look like:\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n    public class MyConfiguration {\r\n    }","title":"Speed up Spring Boot startup time","body":"<p>As described in this question/answer, I think the best approach is to instead of adding only those you think you need, exclude the dependencies you know you don't need.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/35709234/minimise-spring-boot-startup-time/35713866#35713866\">Minimise Spring Boot Startup Time</a></p>\n\n<p>In summary:</p>\n\n<p>You can see what is going on under the covers and enable debug logging as simple as specifying --debug when starting the application from the command-line. You can also specify debug=true in your application.properties.</p>\n\n<p>Also, you can set the logging level in application.properties as simple as:</p>\n\n<p>logging.level.org.springframework.web: DEBUG\nlogging.level.org.hibernate: ERROR</p>\n\n<p>If you detect an auto-configured module you don't want, it can be disabled. The docs for this can be found here: <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-disabling-specific-auto-configuration\" rel=\"noreferrer\">http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-disabling-specific-auto-configuration</a></p>\n\n<p>An example would look like:</p>\n\n<pre><code>@Configuration\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\npublic class MyConfiguration {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"down_vote_count":0,"up_vote_count":91,"is_accepted":false,"score":91,"last_activity_date":1673170170,"creation_date":1522894068,"answer_id":49663075,"question_id":27230702,"body_markdown":"The other answers don&#39;t go into the depth I like to see and provide no scientific evidence. The Spring Boot team went through an exercise for reducing startup time for Boot 2.0, and ticket [11226](https://github.com/spring-projects/spring-boot/issues/11226) contains a lot of useful information. There is also a ticket [7939](https://github.com/spring-projects/spring-boot/issues/7939) open to adding timing information to condition evaluation, but it doesn&#39;t seem to have a specific ETA.\r\n\r\nThe most useful, and methodical approach for debugging Boot startup has been done by Dave Syer. https://github.com/dsyer/spring-boot-startup-bench\r\n\r\nI had a similar use case as well, so I took Dave&#39;s approach of micro-benchmarking with JMH and ran with it. The result is the [boot-benchmark](https://github.com/asarkar/spring/tree/master/boot-benchmark) project. I designed it such that it can be used to measure startup time for any Spring Boot application, using the executable jar produced by `bootJar` (previously called `bootRepackage` in Boot 1.5) Gradle task. Feel free to use it and provide feedback.\r\n\r\nMy findings are as follows:\r\n\r\n 1. CPU matters. A lot. \r\n 2. Starting the JVM with [-Xverify:none](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html#BABHDABI) helps significantly.\r\n 3. Excluding unnecessary autoconfigurations helps.\r\n 4. Dave recommended JVM argument [-XX:TieredStopAtLevel=1](https://stackoverflow.com/questions/38721235/what-exactly-does-xx-tieredcompilation-do), but my tests didn&#39;t show significant improvement with that. Also, `-XX:TieredStopAtLevel=1` would probably slow down your first request.\r\n 5. There have been [reports](http://blog.noizwaves.io/2017/09/02/slow-spring-boot-startup.html) of hostname resolution being slow, but I didn&#39;t find it to be a problem for the apps I tested.\r\n","title":"Speed up Spring Boot startup time","body":"<p>The other answers don't go into the depth I like to see and provide no scientific evidence. The Spring Boot team went through an exercise for reducing startup time for Boot 2.0, and ticket <a href=\"https://github.com/spring-projects/spring-boot/issues/11226\" rel=\"noreferrer\">11226</a> contains a lot of useful information. There is also a ticket <a href=\"https://github.com/spring-projects/spring-boot/issues/7939\" rel=\"noreferrer\">7939</a> open to adding timing information to condition evaluation, but it doesn't seem to have a specific ETA.</p>\n<p>The most useful, and methodical approach for debugging Boot startup has been done by Dave Syer. <a href=\"https://github.com/dsyer/spring-boot-startup-bench\" rel=\"noreferrer\">https://github.com/dsyer/spring-boot-startup-bench</a></p>\n<p>I had a similar use case as well, so I took Dave's approach of micro-benchmarking with JMH and ran with it. The result is the <a href=\"https://github.com/asarkar/spring/tree/master/boot-benchmark\" rel=\"noreferrer\">boot-benchmark</a> project. I designed it such that it can be used to measure startup time for any Spring Boot application, using the executable jar produced by <code>bootJar</code> (previously called <code>bootRepackage</code> in Boot 1.5) Gradle task. Feel free to use it and provide feedback.</p>\n<p>My findings are as follows:</p>\n<ol>\n<li>CPU matters. A lot.</li>\n<li>Starting the JVM with <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html#BABHDABI\" rel=\"noreferrer\">-Xverify:none</a> helps significantly.</li>\n<li>Excluding unnecessary autoconfigurations helps.</li>\n<li>Dave recommended JVM argument <a href=\"https://stackoverflow.com/questions/38721235/what-exactly-does-xx-tieredcompilation-do\">-XX:TieredStopAtLevel=1</a>, but my tests didn't show significant improvement with that. Also, <code>-XX:TieredStopAtLevel=1</code> would probably slow down your first request.</li>\n<li>There have been <a href=\"http://blog.noizwaves.io/2017/09/02/slow-spring-boot-startup.html\" rel=\"noreferrer\">reports</a> of hostname resolution being slow, but I didn't find it to be a problem for the apps I tested.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":31617,"reputation":52341,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1544651093,"creation_date":1544651093,"answer_id":53751844,"question_id":27230702,"body_markdown":"If you&#39;re trying to optimize development turn-around for manual testing, I strongly recommend the use of [devtools](https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html).\r\n\r\n&gt; Applications that use spring-boot-devtools will automatically restart\r\n&gt; whenever files on the classpath change.\r\n\r\nJust recompile -- and the server will restart itself (for Groovy you only need to update the source file).  if you&#39;re using an IDE (e.g. &#39;vscode&#39;), it may automatically compile your java files, so just saving a java file can initiate a server restart, indirectly -- and Java becomes just as seamless as Groovy in this regard.\r\n\r\n*The beauty of this approach is that the incremental restart short-circuits some of the from-scratch startup steps -- so your service will be back up and running much more quickly!*\r\n\r\n----------\r\nUnfortunately, this doesn&#39;t help with startup times for deployment or automated unit testing.","title":"Speed up Spring Boot startup time","body":"<p>If you're trying to optimize development turn-around for manual testing, I strongly recommend the use of <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html\" rel=\"nofollow noreferrer\">devtools</a>.</p>\n\n<blockquote>\n  <p>Applications that use spring-boot-devtools will automatically restart\n  whenever files on the classpath change.</p>\n</blockquote>\n\n<p>Just recompile -- and the server will restart itself (for Groovy you only need to update the source file).  if you're using an IDE (e.g. 'vscode'), it may automatically compile your java files, so just saving a java file can initiate a server restart, indirectly -- and Java becomes just as seamless as Groovy in this regard.</p>\n\n<p><em>The beauty of this approach is that the incremental restart short-circuits some of the from-scratch startup steps -- so your service will be back up and running much more quickly!</em></p>\n\n<hr>\n\n<p>Unfortunately, this doesn't help with startup times for deployment or automated unit testing.</p>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1622190095,"creation_date":1546380309,"answer_id":53999302,"question_id":27230702,"body_markdown":"I find it strange nobody suggested these optimizations before. Here&#39;re some general tips on optimizing project build and startup when developing:\r\n\r\n- exclude development directories from antivirus scanner:\r\n    - project directory\r\n    - build output directory (if it&#39;s outside of project directory)\r\n    - IDE indices directory (e.g. ~/.IntelliJIdea2018.3)\r\n    - deployment directory (webapps in Tomcat)\r\n- upgrade hardware. use faster CPU and RAM, better internet connection (for downloading dependencies) and database connection, switch to SSD (today NVMe SSD is the most performant storage). a video card doesn&#39;t matter.\r\n- use latest Gradle and JVM versions. Source: [easy performance improvements][1].\r\n- parallel execution. By using more concurrent processes, parallel builds can reduce the overall build time significantly.\r\n\r\n**WARNINGS**\r\n\r\n1. the first option comes for the price of reduced security.\r\n2. the second option costs money (obviously).\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/performance.html#easy_improvements","title":"Speed up Spring Boot startup time","body":"<p>I find it strange nobody suggested these optimizations before. Here're some general tips on optimizing project build and startup when developing:</p>\n<ul>\n<li>exclude development directories from antivirus scanner:\n<ul>\n<li>project directory</li>\n<li>build output directory (if it's outside of project directory)</li>\n<li>IDE indices directory (e.g. ~/.IntelliJIdea2018.3)</li>\n<li>deployment directory (webapps in Tomcat)</li>\n</ul>\n</li>\n<li>upgrade hardware. use faster CPU and RAM, better internet connection (for downloading dependencies) and database connection, switch to SSD (today NVMe SSD is the most performant storage). a video card doesn't matter.</li>\n<li>use latest Gradle and JVM versions. Source: <a href=\"https://docs.gradle.org/current/userguide/performance.html#easy_improvements\" rel=\"nofollow noreferrer\">easy performance improvements</a>.</li>\n<li>parallel execution. By using more concurrent processes, parallel builds can reduce the overall build time significantly.</li>\n</ul>\n<p><strong>WARNINGS</strong></p>\n<ol>\n<li>the first option comes for the price of reduced security.</li>\n<li>the second option costs money (obviously).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1622190219,"creation_date":1546381661,"answer_id":53999437,"question_id":27230702,"body_markdown":"**WARNING:** If you don&#39;t use Hibernate DDL for automatic DB schema generation and you don&#39;t use L2 cache, this answer is NOT applicable to you. Scroll ahead.\r\n\r\nMy finding is that Hibernate adds significant time to application startup. Disabling L2 cache and [database initialization][1] results in faster Spring Boot app startup. Leave cache ON for production and disable it for your development environment.\r\n\r\napplication.yml:\r\n\r\n&lt;!-- language: lang-yml --&gt;\r\n\r\n    spring:\r\n      jpa:\r\n        generate-ddl: false\r\n        hibernate:\r\n          ddl-auto: none\r\n        properties:\r\n          hibernate:\r\n            cache:\r\n              use_second_level_cache: false\r\n              use_query_cache: false\r\n\r\nTest results:\r\n\r\n1. L2 cache is ON and `ddl-auto: update`: 54 seconds\r\n\r\n        INFO 5024 --- [restartedMain] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 23331 ms\r\n        INFO 5024 --- [restartedMain] b.n.spring.Application : Started Application in 54.251 seconds (JVM running for 63.766)\r\n\r\n2. L2 cache is OFF and `ddl-auto: none`: 32 seconds\r\n\r\n        INFO 10288 --- [restartedMain] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 9863 ms\r\n        INFO 10288 --- [restartedMain] b.n.spring.Application : Started Application in 32.058 seconds (JVM running for 37.625)\r\n\r\nGained 22 seconds!\r\n*Now I wonder what will I do with all this free time*\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html\r\n","title":"Speed up Spring Boot startup time","body":"<p><strong>WARNING:</strong> If you don't use Hibernate DDL for automatic DB schema generation and you don't use L2 cache, this answer is NOT applicable to you. Scroll ahead.</p>\n<p>My finding is that Hibernate adds significant time to application startup. Disabling L2 cache and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html\" rel=\"nofollow noreferrer\">database initialization</a> results in faster Spring Boot app startup. Leave cache ON for production and disable it for your development environment.</p>\n<p>application.yml:</p>\n<pre class=\"lang-yml prettyprint-override\"><code>spring:\n  jpa:\n    generate-ddl: false\n    hibernate:\n      ddl-auto: none\n    properties:\n      hibernate:\n        cache:\n          use_second_level_cache: false\n          use_query_cache: false\n</code></pre>\n<p>Test results:</p>\n<ol>\n<li><p>L2 cache is ON and <code>ddl-auto: update</code>: 54 seconds</p>\n<pre><code> INFO 5024 --- [restartedMain] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 23331 ms\n INFO 5024 --- [restartedMain] b.n.spring.Application : Started Application in 54.251 seconds (JVM running for 63.766)\n</code></pre>\n</li>\n<li><p>L2 cache is OFF and <code>ddl-auto: none</code>: 32 seconds</p>\n<pre><code> INFO 10288 --- [restartedMain] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 9863 ms\n INFO 10288 --- [restartedMain] b.n.spring.Application : Started Application in 32.058 seconds (JVM running for 37.625)\n</code></pre>\n</li>\n</ol>\n<p>Gained 22 seconds!\n<em>Now I wonder what will I do with all this free time</em></p>\n"},{"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1610907001,"creation_date":1553086831,"answer_id":55261352,"question_id":27230702,"body_markdown":"**Spring Boot 2.2.M1**  has added feature to support Lazy Initialization in Spring Boot. \r\n\r\nBy default, when an application context is being refreshed, every bean in the context is created and its dependencies are injected. By contrast, when a bean definition is configured to be initialized lazily it will not be created and its dependencies will not be injected until it’s needed.\r\n\r\n\r\n**Enabling Lazy Initialization** Set `spring.main.lazy-initialization` to **true**\r\n\r\n**When to Enable Lazy Initialization**\r\n\r\nlazy initialization can offer significant improvements in start up time but there are some notable downsides too and it’s important to enable it with care  \r\n\r\nFor more details please check [Doc][1]\r\n\r\n\r\n**Update:** \r\n\r\n**Spring Boot Spring Boot 2.4.0 - Startup Endpoint**\r\n\r\nSpring Boot 2.4.0 has added a new Startup endpoint that can be used to identify beans that are taking longer than expected to start.\r\nYou can get more details about the Application Startup tracking [here][2]\r\n\r\n\r\n  [1]: https://spring.io/blog/2019/03/14/lazy-initialization-in-spring-boot-2-2\r\n  [2]: https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/core.html#context-functionality-startup","title":"Speed up Spring Boot startup time","body":"<p><strong>Spring Boot 2.2.M1</strong>  has added feature to support Lazy Initialization in Spring Boot.</p>\n<p>By default, when an application context is being refreshed, every bean in the context is created and its dependencies are injected. By contrast, when a bean definition is configured to be initialized lazily it will not be created and its dependencies will not be injected until it’s needed.</p>\n<p><strong>Enabling Lazy Initialization</strong> Set <code>spring.main.lazy-initialization</code> to <strong>true</strong></p>\n<p><strong>When to Enable Lazy Initialization</strong></p>\n<p>lazy initialization can offer significant improvements in start up time but there are some notable downsides too and it’s important to enable it with care</p>\n<p>For more details please check <a href=\"https://spring.io/blog/2019/03/14/lazy-initialization-in-spring-boot-2-2\" rel=\"noreferrer\">Doc</a></p>\n<p><strong>Update:</strong></p>\n<p><strong>Spring Boot Spring Boot 2.4.0 - Startup Endpoint</strong></p>\n<p>Spring Boot 2.4.0 has added a new Startup endpoint that can be used to identify beans that are taking longer than expected to start.\nYou can get more details about the Application Startup tracking <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/core.html#context-functionality-startup\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":129495,"reputation":7313,"user_id":328121,"accept_rate":62,"display_name":"Przemek Nowak"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1578519160,"creation_date":1578519160,"answer_id":59654120,"question_id":27230702,"body_markdown":"Well there is entire list of possible actions described here: https://spring.io/blog/2018/12/12/how-fast-is-spring\r\n\r\nI will put the most important notes from Spring side (adjusted a little bit):\r\n\r\n- Classpath exclusions from Spring Boot web starters:\r\n - Hibernate Validator\r\n - Jackson (but Spring Boot actuators depend on it). Use Gson if you need JSON rendering (only works with MVC out of the box).\r\n - Logback: use slf4j-jdk14 instead\r\n- Use the spring-context-indexer. It’s not going to add much, but every little helps.\r\n- Don’t use actuators if you can afford not to.\r\n- Use Spring Boot 2.1 and Spring 5.1. Switch to 2.2 and 5.2 when they are available.\r\n- Fix the location of the Spring Boot config file(s) with `spring.config.location` (command line argument or System property etc.). Example for testing in IDE: `spring.config.location=file://./src/main/resources/application.properties`.\r\n- Switch off JMX if you don’t need it with `spring.jmx.enabled=false` (this is the default in Spring Boot 2.2)\r\n- Make bean definitions lazy by default. There’s a new flag `spring.main.lazy-initialization=true` in Spring Boot 2.2 (use `LazyInitBeanFactoryPostProcessor` for older Spring).\r\n- Unpack the fat jar and run with an explicit classpath.\r\n- Run the JVM with `-noverify`. Also consider `-XX:TieredStopAtLevel=1` (that will slow down the JIT later at the expense of the saved startup time).\r\n\r\nThe mentioned `LazyInitBeanFactoryPostProcessor` (you can use it for Spring 1.5 if you cannot apply flag `spring.main.lazy-initialization=true` available from Spring 2.2):\r\n\r\n    public class LazyInitBeanFactoryPostProcessor implements BeanFactoryPostProcessor {\r\n\r\n\t  @Override\r\n\t  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\r\n\t\t  for (String beanName : beanFactory.getBeanDefinitionNames()) {\r\n\t\t\tBeanDefinition definition = beanFactory.getBeanDefinition(beanName);\r\n\t\t\tdefinition.setLazyInit(true);\r\n\t\t  }\r\n\t  }\r\n    }\r\n\r\nYou can also use (or write your own - it&#39;s simple) something to analyse beans initialization time: https://github.com/lwaddicor/spring-startup-analysis\r\n\r\nHope it helps!","title":"Speed up Spring Boot startup time","body":"<p>Well there is entire list of possible actions described here: <a href=\"https://spring.io/blog/2018/12/12/how-fast-is-spring\" rel=\"noreferrer\">https://spring.io/blog/2018/12/12/how-fast-is-spring</a></p>\n\n<p>I will put the most important notes from Spring side (adjusted a little bit):</p>\n\n<ul>\n<li>Classpath exclusions from Spring Boot web starters:\n\n<ul>\n<li>Hibernate Validator</li>\n<li>Jackson (but Spring Boot actuators depend on it). Use Gson if you need JSON rendering (only works with MVC out of the box).</li>\n<li>Logback: use slf4j-jdk14 instead</li>\n</ul></li>\n<li>Use the spring-context-indexer. It’s not going to add much, but every little helps.</li>\n<li>Don’t use actuators if you can afford not to.</li>\n<li>Use Spring Boot 2.1 and Spring 5.1. Switch to 2.2 and 5.2 when they are available.</li>\n<li>Fix the location of the Spring Boot config file(s) with <code>spring.config.location</code> (command line argument or System property etc.). Example for testing in IDE: <code>spring.config.location=file://./src/main/resources/application.properties</code>.</li>\n<li>Switch off JMX if you don’t need it with <code>spring.jmx.enabled=false</code> (this is the default in Spring Boot 2.2)</li>\n<li>Make bean definitions lazy by default. There’s a new flag <code>spring.main.lazy-initialization=true</code> in Spring Boot 2.2 (use <code>LazyInitBeanFactoryPostProcessor</code> for older Spring).</li>\n<li>Unpack the fat jar and run with an explicit classpath.</li>\n<li>Run the JVM with <code>-noverify</code>. Also consider <code>-XX:TieredStopAtLevel=1</code> (that will slow down the JIT later at the expense of the saved startup time).</li>\n</ul>\n\n<p>The mentioned <code>LazyInitBeanFactoryPostProcessor</code> (you can use it for Spring 1.5 if you cannot apply flag <code>spring.main.lazy-initialization=true</code> available from Spring 2.2):</p>\n\n<pre><code>public class LazyInitBeanFactoryPostProcessor implements BeanFactoryPostProcessor {\n\n  @Override\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n      for (String beanName : beanFactory.getBeanDefinitionNames()) {\n        BeanDefinition definition = beanFactory.getBeanDefinition(beanName);\n        definition.setLazyInit(true);\n      }\n  }\n}\n</code></pre>\n\n<p>You can also use (or write your own - it's simple) something to analyse beans initialization time: <a href=\"https://github.com/lwaddicor/spring-startup-analysis\" rel=\"noreferrer\">https://github.com/lwaddicor/spring-startup-analysis</a></p>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":4186322,"reputation":19,"user_id":3430014,"display_name":"Daulet Kadirbekov"},"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1587443434,"creation_date":1587443434,"answer_id":61335982,"question_id":27230702,"body_markdown":"In my case, there was too much breakpoints. When I clicked &quot;Mute Breakpoints&quot; and restarted application in debug mode, application started in 10 times faster.","title":"Speed up Spring Boot startup time","body":"<p>In my case, there was too much breakpoints. When I clicked \"Mute Breakpoints\" and restarted application in debug mode, application started in 10 times faster.</p>\n"},{"tags":[],"owner":{"account_id":2218,"reputation":16624,"user_id":3050,"accept_rate":95,"display_name":"Paul Whelan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679417402,"creation_date":1679417402,"answer_id":75804112,"question_id":27230702,"body_markdown":"Checkout the Spring Boot Startup Report\r\n\r\nhttps://github.com/maciejwalkowiak/spring-boot-startup-report\r\n\r\nSpring Boot Startup Report library generates an interactive Spring Boot application startup report that lets you understand what contributes to the application startup time and perhaps helps to optimize it.\r\nstartup report available in runtime as an interactive HTML page\r\ngenerating startup reports in integration tests\r\nflame chart\r\nsearch by class or an annotation\r\n\r\nFeatures\r\n - startup report available in runtime as an interactive HTML page\r\n - generating startup reports in integration tests\r\n - flame chart\r\n - search by class or an annotation\r\n\r\nVery cool utility IMHO.","title":"Speed up Spring Boot startup time","body":"<p>Checkout the Spring Boot Startup Report</p>\n<p><a href=\"https://github.com/maciejwalkowiak/spring-boot-startup-report\" rel=\"nofollow noreferrer\">https://github.com/maciejwalkowiak/spring-boot-startup-report</a></p>\n<p>Spring Boot Startup Report library generates an interactive Spring Boot application startup report that lets you understand what contributes to the application startup time and perhaps helps to optimize it.\nstartup report available in runtime as an interactive HTML page\ngenerating startup reports in integration tests\nflame chart\nsearch by class or an annotation</p>\n<p>Features</p>\n<ul>\n<li>startup report available in runtime as an interactive HTML page</li>\n<li>generating startup reports in integration tests</li>\n<li>flame chart</li>\n<li>search by class or an annotation</li>\n</ul>\n<p>Very cool utility IMHO.</p>\n"}],"owner":{"account_id":5135828,"reputation":2256,"user_id":4114631,"accept_rate":43,"display_name":"steady rain"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157413,"favorite_count":0,"down_vote_count":0,"up_vote_count":176,"answer_count":11,"score":176,"last_activity_date":1679417402,"creation_date":1417444625,"question_id":27230702,"body_markdown":"I have a Spring Boot application. I&#39;ve added a lot of dependencies (unfortunately, looks I need all of them) and the startup time went up quite a lot. Just doing a `SpringApplication.run(source, args)` takes 10 seconds. \r\n\r\nWhile that might not be much compared to what are &quot;used&quot; to, I&#39;m unhappy that it takes that much, mostly because it breaks the development flow. The application itself is rather small at this point, so I assume most of the time is related to the added dependencies, not the app classes themselves.\r\n\r\nI assume the issue is classpath scanning, but I am not sure how to:\r\n\r\n- Confirm that is the issue (i.e. how to &quot;debug&quot; Spring Boot)\r\n- If it really is the cause, how can I limit it, so it gets faster? For example, if I know that some dependency or package does not contain anything that Spring should be scanning, is there a way to limit that? \r\n\r\nI assume that [enhancing Spring to have parallel bean initialization during startup](https://jira.spring.io/browse/SPR-8767) would speed up things, but that enhancement request has been open since 2011, without any progress. I see some other efforts in Spring Boot itself, such as [Investigate Tomcat JarScanning speed improvements](https://github.com/spring-projects/spring-boot/issues/1610), but that is Tomcat specific and has been abandoned.\r\n\r\nThis article:\r\n\r\n* http://www.nurkiewicz.com/2010/12/speeding-up-spring-integration-tests.html\r\n\r\nalthough aimed at integration tests, suggests using `lazy-init=true`, however I do not know how to apply this to all beans in Spring Boot using Java configuration - any pointers here?\r\n\r\nAny (other) suggestions would be welcome.","title":"Speed up Spring Boot startup time","body":"<p>I have a Spring Boot application. I've added a lot of dependencies (unfortunately, looks I need all of them) and the startup time went up quite a lot. Just doing a <code>SpringApplication.run(source, args)</code> takes 10 seconds. </p>\n\n<p>While that might not be much compared to what are \"used\" to, I'm unhappy that it takes that much, mostly because it breaks the development flow. The application itself is rather small at this point, so I assume most of the time is related to the added dependencies, not the app classes themselves.</p>\n\n<p>I assume the issue is classpath scanning, but I am not sure how to:</p>\n\n<ul>\n<li>Confirm that is the issue (i.e. how to \"debug\" Spring Boot)</li>\n<li>If it really is the cause, how can I limit it, so it gets faster? For example, if I know that some dependency or package does not contain anything that Spring should be scanning, is there a way to limit that? </li>\n</ul>\n\n<p>I assume that <a href=\"https://jira.spring.io/browse/SPR-8767\" rel=\"noreferrer\">enhancing Spring to have parallel bean initialization during startup</a> would speed up things, but that enhancement request has been open since 2011, without any progress. I see some other efforts in Spring Boot itself, such as <a href=\"https://github.com/spring-projects/spring-boot/issues/1610\" rel=\"noreferrer\">Investigate Tomcat JarScanning speed improvements</a>, but that is Tomcat specific and has been abandoned.</p>\n\n<p>This article:</p>\n\n<ul>\n<li><a href=\"http://www.nurkiewicz.com/2010/12/speeding-up-spring-integration-tests.html\" rel=\"noreferrer\">http://www.nurkiewicz.com/2010/12/speeding-up-spring-integration-tests.html</a></li>\n</ul>\n\n<p>although aimed at integration tests, suggests using <code>lazy-init=true</code>, however I do not know how to apply this to all beans in Spring Boot using Java configuration - any pointers here?</p>\n\n<p>Any (other) suggestions would be welcome.</p>\n"},{"tags":["java","spring-boot","backend","jhipster","import-csv"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1678711753,"post_id":75721984,"comment_id":133580932,"body_markdown":"what is &quot;siraReport&quot;? please provide the complete code, otherwise we can&#39;t help you.","body":"what is &quot;siraReport&quot;? please provide the complete code, otherwise we can&#39;t help you."},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678711889,"post_id":75721984,"comment_id":133580974,"body_markdown":"I apologize, it&#39;s a report and not siraReport. I fixed the code now.","body":"I apologize, it&#39;s a report and not siraReport. I fixed the code now."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678712046,"post_id":75721984,"comment_id":133581020,"body_markdown":"It looks to me like you have 8 header columns, yet 11 columns of data... A formatting error won&#39;t explain it, as the total fields amount to an odd number","body":"It looks to me like you have 8 header columns, yet 11 columns of data... A formatting error won&#39;t explain it, as the total fields amount to an odd number"},{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1678712115,"post_id":75721984,"comment_id":133581043,"body_markdown":"try running in debug mode: what is the length of &quot;csvRecords&quot;? what is the value of &quot;csvRecord.get(&quot;sensor_name&quot;)&quot; ? sensorErrors can only have one element, what is its contents? there is nothing &quot;wrong&quot; with your code, just debug it line by line and make sure everything goes to its right place.","body":"try running in debug mode: what is the length of &quot;csvRecords&quot;? what is the value of &quot;csvRecord.get(&quot;sensor_name&quot;)&quot; ? sensorErrors can only have one element, what is its contents? there is nothing &quot;wrong&quot; with your code, just debug it line by line and make sure everything goes to its right place."},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678712477,"post_id":75721984,"comment_id":133581154,"body_markdown":"@g00se , yes, this is what it has, however it has also tried to add corresponding header columns, however the result is that it will add the second SensorError information and not the first one anymore. when I create a JSON to save the Report with SensorError data it is created like this: &quot;&quot;sensorErrors&quot;: [{\n            &quot;sensorName&quot;:&quot;sensor1&quot;,\n            &quot;errorCode&quot;:&quot;404&quot;,\n            &quot;errorDetail&quot;:&quot;complete failure&quot;\n            },\n            {\n            &quot;sensorName&quot;:&quot;sensor2&quot;,\n            &quot;errorCode&quot;:&quot;400&quot;,\n            &quot;errorDetail&quot;:&quot;partial failure&quot;\n            }\n            ]&quot;","body":"@g00se , yes, this is what it has, however it has also tried to add corresponding header columns, however the result is that it will add the second SensorError information and not the first one anymore. when I create a JSON to save the Report with SensorError data it is created like this: &quot;&quot;sensorErrors&quot;: [{             &quot;sensorName&quot;:&quot;sensor1&quot;,             &quot;errorCode&quot;:&quot;404&quot;,             &quot;errorDetail&quot;:&quot;complete failure&quot;             },             {             &quot;sensorName&quot;:&quot;sensor2&quot;,             &quot;errorCode&quot;:&quot;400&quot;,             &quot;errorDetail&quot;:&quot;partial failure&quot;             }             ]&quot;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678712677,"post_id":75721984,"comment_id":133581208,"body_markdown":"*however it has also tried to add corresponding header columns* &quot;it&quot;? I don&#39;t really understand all that. Surely if the column headers do not correspond with the data, you are beginning with a corrupt csv file?","body":"<i>however it has also tried to add corresponding header columns</i> &quot;it&quot;? I don&#39;t really understand all that. Surely if the column headers do not correspond with the data, you are beginning with a corrupt csv file?"},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678713764,"post_id":75721984,"comment_id":133581563,"body_markdown":"@TomElias In debug mode csvRecords has size=1. After he adds the Report data to the line, he enters the if for verification of the SensorError object and does the csvRecord.get for each one and at the end sensorErrors.add(sensorError), the following information appears in the debug record: &quot;sensorError= &quot;SensorError{sensorName=&#39;sensor operator&#39;, errorCode=&#39;operand&#39;, errorDetail=&#39;partial failure&#39;}&quot; sensorErrors will have size=1 at the end of the debug, but only with the first line of SensorError information","body":"@TomElias In debug mode csvRecords has size=1. After he adds the Report data to the line, he enters the if for verification of the SensorError object and does the csvRecord.get for each one and at the end sensorErrors.add(sensorError), the following information appears in the debug record: &quot;sensorError= &quot;SensorError{sensorName=&#39;sensor operator&#39;, errorCode=&#39;operand&#39;, errorDetail=&#39;partial failure&#39;}&quot; sensorErrors will have size=1 at the end of the debug, but only with the first line of SensorError information"},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678714052,"post_id":75721984,"comment_id":133581656,"body_markdown":"@g00se Sorry for my inconclusive answer, I added the headers to have 11 too, like this: &quot;final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail, sensor_name, error_code, error_detail&quot;, this way would match with 11 columns of data, however the code will save the second SensorError information from the CSV file: &quot;&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;&quot; and no longer the first info: &quot;&quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;&quot; when there were only 8 headers.","body":"@g00se Sorry for my inconclusive answer, I added the headers to have 11 too, like this: &quot;final_state,datetime_begin,datetime_end,cutting_time,total_&zwnj;&#8203;time,sensor_name,err&zwnj;&#8203;or_code,error_detail&zwnj;&#8203;, sensor_name, error_code, error_detail&quot;, this way would match with 11 columns of data, however the code will save the second SensorError information from the CSV file: &quot;&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;&quot; and no longer the first info: &quot;&quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;&quot; when there were only 8 headers."},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678717579,"post_id":75721984,"comment_id":133582896,"body_markdown":"@g00se I think it&#39;s the way I&#39;m sending the data in the CSV that&#39;s weird. As for a single Report I can have several SensorError information, I believe that the CSV should have something similar to this format: &quot;final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail\nTESTESENSOR, 2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min,&quot;sensor operator&quot;,&quot;operating&quot;,&quot;partial failure&quot;\nTESTESENSOR, 2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min,&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;","body":"@g00se I think it&#39;s the way I&#39;m sending the data in the CSV that&#39;s weird. As for a single Report I can have several SensorError information, I believe that the CSV should have something similar to this format: &quot;final_state,datetime_begin,datetime_end,cutting_time,total_&zwnj;&#8203;time,sensor_name,err&zwnj;&#8203;or_code,error_detail TESTESENSOR, 2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min,&quot;senso&zwnj;&#8203;r operator&quot;,&quot;operating&quot;,&quot;partial failure&quot; TESTESENSOR, 2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min,&quot;senso&zwnj;&#8203;r navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678722675,"post_id":75721984,"comment_id":133584625,"body_markdown":"*As for a single Report I can have several SensorError information* But you&#39;re reading one csv record per Report. If you haven&#39;t even modeled your data correctly yet, it seems that the rest of the code, and this question, are premature","body":"<i>As for a single Report I can have several SensorError information</i> But you&#39;re reading one csv record per Report. If you haven&#39;t even modeled your data correctly yet, it seems that the rest of the code, and this question, are premature"},{"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"score":0,"creation_date":1678725167,"post_id":75721984,"comment_id":133585371,"body_markdown":"@g00se Indeed, you are correct. I could even in my question made prematurely, based on your answer, arrive at a possible solution. I will post it, because the way I was sending the CSV data and how the code was modeling it, it was doing the wrong thing for my purpose, as you correctly commented. Sometimes we need to be asked to be able to think better, something that happened thanks to your help.","body":"@g00se Indeed, you are correct. I could even in my question made prematurely, based on your answer, arrive at a possible solution. I will post it, because the way I was sending the CSV data and how the code was modeling it, it was doing the wrong thing for my purpose, as you correctly commented. Sometimes we need to be asked to be able to think better, something that happened thanks to your help."}],"answers":[{"tags":[],"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679416779,"creation_date":1678726469,"answer_id":75724771,"question_id":75721984,"body_markdown":"Well, due to the questions made here in this topic, I could observe that my error was initially, in how the data were being sent, because if for 1 Report I have several SensorError information, then I would have to duplicate the data lines of the Report and include information other than SensorError to look like this:\r\n\r\n&gt; final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail\r\nTESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;\r\nTESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;\r\n\r\nFrom there, I had to review my code due to questions from @g00se and @Tom Elias, arriving at this code that works:\r\n\r\n    public static List&lt;Report&gt; csvToReports(InputStream is, ReportRepository reportRepository, SensorErrorRepository sensorErrorRepository) {\r\n        try (\r\n            BufferedReader fileReader = new BufferedReader(new InputStreamReader(is, Charset.defaultCharset()));\r\n            CSVParser csvParser = new CSVParser(fileReader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());\r\n        ) {\r\n            Map&lt;String, Report&gt; reportMap = new HashMap&lt;&gt;();\r\n            List&lt;Report&gt; reports = new ArrayList&lt;&gt;();\r\n\r\n            Iterable&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\r\n\r\n            for (CSVRecord csvRecord : csvRecords) {\r\n                String datetimeBegin = csvRecord.get(&quot;datetime_begin&quot;);\r\n                String datetimeEnd = csvRecord.get(&quot;datetime_end&quot;);\r\n                String reportKey = datetimeBegin + datetimeEnd; // Create a new key using final_state and datetime_begin\r\n\r\n                Report report = reportMap.get(reportKey);\r\n\r\n                if (report == null) {\r\n                    report = new Report(\r\n                        csvRecord.get(&quot;final_state&quot;),\r\n                        Instant.parse(datetimeBegin),\r\n                        Instant.parse(datetimeEnd),\r\n                        csvRecord.get(&quot;cutting_time&quot;),\r\n                        csvRecord.get(&quot;total_time&quot;),\r\n                    );\r\n                }\r\n\r\n                // Check if sensor_name, error_code and error_detail fields have values\r\n                if (!csvRecord.get(&quot;sensor_name&quot;).isEmpty() || !csvRecord.get(&quot;error_code&quot;).isEmpty() || !csvRecord.get(&quot;error_detail&quot;).isEmpty()) {\r\n                    // Create a new SensorError object using the data from the CSVRecord\r\n                    SensorError sensorError = new SensorError(\r\n                        csvRecord.get(&quot;sensor_name&quot;),\r\n                        csvRecord.get(&quot;error_code&quot;),\r\n                        csvRecord.get(&quot;error_detail&quot;)\r\n                    );\r\n\r\n                    // Add the SensorError object to the Report\r\n                    report.addSensorError(sensorError);\r\n\r\n                    // Save the SensorError object to the database using the SensorErrorRepository\r\n                    sensorErrorRepository.save(sensorError);\r\n                }\r\n\r\n                // Save the Report object to the database using the ReportRepository\r\n                reportRepository.save(report);\r\n\r\n                // Add the Report object to the Map and List\r\n                reportMap.put(reportKey, report);\r\n                reports.add(report);\r\n            }\r\n\r\n            // Return the List of Reports\r\n            return reports;\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Failed to parse CSV file: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\nI had to create a method that performs an identification if the lines sent in the CSV refer to the same Report and add the SensorError information to the same Report object.\r\n\r\nSo now the code creates a new identifier using the datetime_begin and datetime_end field combination to check if there is an existing Report with the datetime_begin and datetime_end field combination. If there is no existing Report, it creates a new Report.\r\n\r\nIn summary, it will check the duplicated lines with Report information, if it is the same Report object and then it will register the different SensorError information for that Report object.\r\n\r\nI am aware that a better check would be by ID, but this is generated sequentially by the application.\r\n","title":"Problems when importing a CSV file and persisting information in a database using Java","body":"<p>Well, due to the questions made here in this topic, I could observe that my error was initially, in how the data were being sent, because if for 1 Report I have several SensorError information, then I would have to duplicate the data lines of the Report and include information other than SensorError to look like this:</p>\n<blockquote>\n<p>final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail\nTESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;\nTESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;</p>\n</blockquote>\n<p>From there, I had to review my code due to questions from @g00se and @Tom Elias, arriving at this code that works:</p>\n<pre><code>public static List&lt;Report&gt; csvToReports(InputStream is, ReportRepository reportRepository, SensorErrorRepository sensorErrorRepository) {\n    try (\n        BufferedReader fileReader = new BufferedReader(new InputStreamReader(is, Charset.defaultCharset()));\n        CSVParser csvParser = new CSVParser(fileReader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());\n    ) {\n        Map&lt;String, Report&gt; reportMap = new HashMap&lt;&gt;();\n        List&lt;Report&gt; reports = new ArrayList&lt;&gt;();\n\n        Iterable&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\n\n        for (CSVRecord csvRecord : csvRecords) {\n            String datetimeBegin = csvRecord.get(&quot;datetime_begin&quot;);\n            String datetimeEnd = csvRecord.get(&quot;datetime_end&quot;);\n            String reportKey = datetimeBegin + datetimeEnd; // Create a new key using final_state and datetime_begin\n\n            Report report = reportMap.get(reportKey);\n\n            if (report == null) {\n                report = new Report(\n                    csvRecord.get(&quot;final_state&quot;),\n                    Instant.parse(datetimeBegin),\n                    Instant.parse(datetimeEnd),\n                    csvRecord.get(&quot;cutting_time&quot;),\n                    csvRecord.get(&quot;total_time&quot;),\n                );\n            }\n\n            // Check if sensor_name, error_code and error_detail fields have values\n            if (!csvRecord.get(&quot;sensor_name&quot;).isEmpty() || !csvRecord.get(&quot;error_code&quot;).isEmpty() || !csvRecord.get(&quot;error_detail&quot;).isEmpty()) {\n                // Create a new SensorError object using the data from the CSVRecord\n                SensorError sensorError = new SensorError(\n                    csvRecord.get(&quot;sensor_name&quot;),\n                    csvRecord.get(&quot;error_code&quot;),\n                    csvRecord.get(&quot;error_detail&quot;)\n                );\n\n                // Add the SensorError object to the Report\n                report.addSensorError(sensorError);\n\n                // Save the SensorError object to the database using the SensorErrorRepository\n                sensorErrorRepository.save(sensorError);\n            }\n\n            // Save the Report object to the database using the ReportRepository\n            reportRepository.save(report);\n\n            // Add the Report object to the Map and List\n            reportMap.put(reportKey, report);\n            reports.add(report);\n        }\n\n        // Return the List of Reports\n        return reports;\n    } catch (IOException e) {\n        throw new RuntimeException(&quot;Failed to parse CSV file: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n<p>I had to create a method that performs an identification if the lines sent in the CSV refer to the same Report and add the SensorError information to the same Report object.</p>\n<p>So now the code creates a new identifier using the datetime_begin and datetime_end field combination to check if there is an existing Report with the datetime_begin and datetime_end field combination. If there is no existing Report, it creates a new Report.</p>\n<p>In summary, it will check the duplicated lines with Report information, if it is the same Report object and then it will register the different SensorError information for that Report object.</p>\n<p>I am aware that a better check would be by ID, but this is generated sequentially by the application.</p>\n"}],"owner":{"account_id":27123007,"reputation":3,"user_id":20666470,"display_name":"Tiago Severo"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75724771,"answer_count":1,"score":0,"last_activity_date":1679416779,"creation_date":1678711173,"question_id":75721984,"body_markdown":"I&#39;m having a problem with a CSV data import code into the database. I&#39;m using Java 11 with SpringBoot 2.7.3 REST API\r\n\r\nI have a Report class that has a Many-To-Many one-way relationship with the SensorError class, where only Report knows about SensorError and not the other way around:\r\n\r\n`   @ManyToMany\r\n    @JoinTable(\r\n        name = &quot;rel_report__sensor_error&quot;,\r\n        joinColumns = @JoinColumn(name = &quot;report_id&quot;),\r\n        inverseJoinColumns = @JoinColumn(name = &quot;sensor_error_id&quot;)\r\n    )\r\n    private Set&lt;SensorError&gt; sensorErrors = new HashSet&lt;&gt;();`\r\n\r\nI created a code to import CSV data:\r\n\r\n    public static List&lt;Report&gt; csvToReports(InputStream is, ReportRepository reportRepository,\r\n            SensorErrorRepository sensorErrorRepository) {\r\n        try (BufferedReader fileReader = new BufferedReader(new InputStreamReader(is, Charset.defaultCharset()));\r\n                CSVParser csvParser = new CSVParser(fileReader,\r\n                        CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());) {\r\n            // Create an empty list to hold the SiraReports that will be parsed from the CSV\r\n            // file\r\n            List&lt;Report&gt; reports = new ArrayList&lt;Report&gt;();\r\n    \r\n            // Parse the SensorError objects from the CSVRecord\r\n            Set&lt;SensorError&gt; sensorErrors = new HashSet&lt;&gt;();\r\n    \r\n            // Get an Iterable of CSVRecords from the CSVParser\r\n            Iterable&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\r\n    \r\n            for (CSVRecord csvRecord : csvRecords) {\r\n    \r\n                Report report = new Report(csvRecord.get(&quot;final_state&quot;), Instant.parse(csvRecord.get(&quot;datetime_begin&quot;)),\r\n                        Instant.parse(csvRecord.get(&quot;datetime_end&quot;)), csvRecord.get(&quot;cutting_time&quot;),\r\n                        csvRecord.get(&quot;total_time&quot;));\r\n    \r\n                // Check if sensor_name, error_code and error_detail fields have values\r\n                if (!csvRecord.get(&quot;sensor_name&quot;).isEmpty() || !csvRecord.get(&quot;error_code&quot;).isEmpty()\r\n                        || !csvRecord.get(&quot;error_detail&quot;).isEmpty()) {\r\n                    // Create a new SensorError object using the data from the CSVRecord\r\n                    SensorError sensorError = new SensorError(csvRecord.get(&quot;sensor_name&quot;), csvRecord.get(&quot;error_code&quot;),\r\n                            csvRecord.get(&quot;error_detail&quot;));\r\n    \r\n                    // Add the SensorError object to the Set\r\n                    sensorErrors.add(sensorError);\r\n                }\r\n    \r\n                // Set the SensorError objects for the SiraReport object\r\n                report.setSensorErrors(sensorErrors);\r\n    \r\n                // Save the SensorError objects to the database using the SensorErrorRepository\r\n                sensorErrorRepository.saveAll(sensorErrors);\r\n    \r\n                // Add the Report object to the List\r\n                reports.add(report);\r\n            }\r\n    \r\n            // Return the List of Reports\r\n            return reports;\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Failed to parse CSV file: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\nThis code works partially for my interest, in my CSV file:\r\n\r\n    final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail\r\n    TESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;,&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;\r\n\r\nThe code saves only the first SensorError Information inside a Report: &quot;&quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;&quot;, but not the second information: &quot;&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;&quot;.\r\n\r\n\r\nI already tried some things, like adding: Set&lt;SensorError&gt; sensorErrors = new HashSet&lt;&gt;();, inside the Loop, but then it saves the second SensorError Information and not the first one anymore. I also tried changing it to a List instead of Set, but it didn&#39;t solve the problem. \r\n\r\nHow to make it import more than one existing SensorError information in the CSV file to a single SiraReport?\r\n\r\n\r\n\r\n\r\n","title":"Problems when importing a CSV file and persisting information in a database using Java","body":"<p>I'm having a problem with a CSV data import code into the database. I'm using Java 11 with SpringBoot 2.7.3 REST API</p>\n<p>I have a Report class that has a Many-To-Many one-way relationship with the SensorError class, where only Report knows about SensorError and not the other way around:</p>\n<p><code>   @ManyToMany @JoinTable( name = &quot;rel_report__sensor_error&quot;, joinColumns = @JoinColumn(name = &quot;report_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;sensor_error_id&quot;) ) private Set&lt;SensorError&gt; sensorErrors = new HashSet&lt;&gt;();</code></p>\n<p>I created a code to import CSV data:</p>\n<pre><code>public static List&lt;Report&gt; csvToReports(InputStream is, ReportRepository reportRepository,\n        SensorErrorRepository sensorErrorRepository) {\n    try (BufferedReader fileReader = new BufferedReader(new InputStreamReader(is, Charset.defaultCharset()));\n            CSVParser csvParser = new CSVParser(fileReader,\n                    CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());) {\n        // Create an empty list to hold the SiraReports that will be parsed from the CSV\n        // file\n        List&lt;Report&gt; reports = new ArrayList&lt;Report&gt;();\n\n        // Parse the SensorError objects from the CSVRecord\n        Set&lt;SensorError&gt; sensorErrors = new HashSet&lt;&gt;();\n\n        // Get an Iterable of CSVRecords from the CSVParser\n        Iterable&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\n\n        for (CSVRecord csvRecord : csvRecords) {\n\n            Report report = new Report(csvRecord.get(&quot;final_state&quot;), Instant.parse(csvRecord.get(&quot;datetime_begin&quot;)),\n                    Instant.parse(csvRecord.get(&quot;datetime_end&quot;)), csvRecord.get(&quot;cutting_time&quot;),\n                    csvRecord.get(&quot;total_time&quot;));\n\n            // Check if sensor_name, error_code and error_detail fields have values\n            if (!csvRecord.get(&quot;sensor_name&quot;).isEmpty() || !csvRecord.get(&quot;error_code&quot;).isEmpty()\n                    || !csvRecord.get(&quot;error_detail&quot;).isEmpty()) {\n                // Create a new SensorError object using the data from the CSVRecord\n                SensorError sensorError = new SensorError(csvRecord.get(&quot;sensor_name&quot;), csvRecord.get(&quot;error_code&quot;),\n                        csvRecord.get(&quot;error_detail&quot;));\n\n                // Add the SensorError object to the Set\n                sensorErrors.add(sensorError);\n            }\n\n            // Set the SensorError objects for the SiraReport object\n            report.setSensorErrors(sensorErrors);\n\n            // Save the SensorError objects to the database using the SensorErrorRepository\n            sensorErrorRepository.saveAll(sensorErrors);\n\n            // Add the Report object to the List\n            reports.add(report);\n        }\n\n        // Return the List of Reports\n        return reports;\n    } catch (IOException e) {\n        throw new RuntimeException(&quot;Failed to parse CSV file: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n<p>This code works partially for my interest, in my CSV file:</p>\n<pre><code>final_state,datetime_begin,datetime_end,cutting_time,total_time,sensor_name,error_code,error_detail\nTESTESENSOR,2022-09-30T18:15:00Z,2022-09-30T18:35:00Z,30min,40min, &quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;,&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;\n</code></pre>\n<p>The code saves only the first SensorError Information inside a Report: &quot;&quot;sensor operador&quot;,&quot;operando&quot;,&quot;falha parcial&quot;&quot;, but not the second information: &quot;&quot;sensor navalha&quot;,&quot;erro mundial&quot;,&quot;falha total&quot;&quot;.</p>\n<p>I already tried some things, like adding: Set sensorErrors = new HashSet&lt;&gt;();, inside the Loop, but then it saves the second SensorError Information and not the first one anymore. I also tried changing it to a List instead of Set, but it didn't solve the problem.</p>\n<p>How to make it import more than one existing SensorError information in the CSV file to a single SiraReport?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","aws-credentials"],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679416189,"creation_date":1679415800,"answer_id":75803820,"question_id":75803684,"body_markdown":"I have the exact same use case. One difference is I am using [Amazon S3 Java V2][1] - which is the recommended SDK version to use. \r\n\r\n**My Controller**. \r\n\r\n      @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\r\n        @ResponseBody\r\n        public String singleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n            try {\r\n                byte[] bytes = file.getBytes();\r\n                String fileName = file.getOriginalFilename();\r\n                UUID uuid = UUID.randomUUID();\r\n                String unqueFileName = uuid + &quot;-&quot; + fileName;\r\n    \r\n                DynamoDBService dbService = new DynamoDBService();\r\n                S3Service s3Service = new S3Service();\r\n                AnalyzePhotos analyzePhotos = new AnalyzePhotos();\r\n                UploadEndpoint endpoint = new UploadEndpoint(analyzePhotos, dbService, s3Service);\r\n                endpoint.upload(bytes, fileName);\r\n                return &quot;You have uploaded &quot;+fileName;\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return &quot;File was not uploaded&quot;;\r\n        }\r\n\r\nNotice that i am getting the byte[] of the upload file. \r\n\r\nThe endpoint.upload() is here: \r\n\r\n    public void upload(byte[] bytes, String name) {\r\n      // Put the file into the bucket.\r\n      s3Service.putObject(bytes, PhotoApplicationResources.STORAGE_BUCKET, name);\r\n      this.tagAfterUpload(name);\r\n    }\r\n\r\nThe **s3Service.putObject()** is here: \r\n\r\n      // Places an image into a S3 bucket.\r\n        public void putObject(byte[] data, String bucketName, String objectKey) {\r\n            S3Client s3 = getClient();\r\n            try {\r\n                s3.putObject(PutObjectRequest.builder()\r\n                        .bucket(bucketName)\r\n                        .key(objectKey)\r\n                        .build(),\r\n                    RequestBody.fromBytes(data));\r\n            } catch (S3Exception e) {\r\n                System.err.println(e.getMessage());\r\n                e.printStackTrace();\r\n                throw e;\r\n            }\r\n        }\r\n\r\nThe getClient() is\r\n\r\n    private S3Client getClient() {\r\n            return S3Client.builder()\r\n                .region(PhotoApplicationResources.REGION)\r\n                .build();\r\n        }\r\n\r\n\r\nNow all of this works and can be invoked from Postman: \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nLooks like you have Spring Security Dependencies in your POM file (based on your screenshot of a forced login). You should remove them and see if your controller gets the file when setting a break point. You should see: \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\r\n  [2]: https://i.stack.imgur.com/Hz4m9.png\r\n  [3]: https://i.stack.imgur.com/SSl4o.png","title":"Spring Boot AWS credentials Unauthorized","body":"<p>I have the exact same use case. One difference is I am using <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">Amazon S3 Java V2</a> - which is the recommended SDK version to use.</p>\n<p><strong>My Controller</strong>.</p>\n<pre><code>  @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\n    @ResponseBody\n    public String singleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) {\n        try {\n            byte[] bytes = file.getBytes();\n            String fileName = file.getOriginalFilename();\n            UUID uuid = UUID.randomUUID();\n            String unqueFileName = uuid + &quot;-&quot; + fileName;\n\n            DynamoDBService dbService = new DynamoDBService();\n            S3Service s3Service = new S3Service();\n            AnalyzePhotos analyzePhotos = new AnalyzePhotos();\n            UploadEndpoint endpoint = new UploadEndpoint(analyzePhotos, dbService, s3Service);\n            endpoint.upload(bytes, fileName);\n            return &quot;You have uploaded &quot;+fileName;\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return &quot;File was not uploaded&quot;;\n    }\n</code></pre>\n<p>Notice that i am getting the byte[] of the upload file.</p>\n<p>The endpoint.upload() is here:</p>\n<pre><code>public void upload(byte[] bytes, String name) {\n  // Put the file into the bucket.\n  s3Service.putObject(bytes, PhotoApplicationResources.STORAGE_BUCKET, name);\n  this.tagAfterUpload(name);\n}\n</code></pre>\n<p>The <strong>s3Service.putObject()</strong> is here:</p>\n<pre><code>  // Places an image into a S3 bucket.\n    public void putObject(byte[] data, String bucketName, String objectKey) {\n        S3Client s3 = getClient();\n        try {\n            s3.putObject(PutObjectRequest.builder()\n                    .bucket(bucketName)\n                    .key(objectKey)\n                    .build(),\n                RequestBody.fromBytes(data));\n        } catch (S3Exception e) {\n            System.err.println(e.getMessage());\n            e.printStackTrace();\n            throw e;\n        }\n    }\n</code></pre>\n<p>The getClient() is</p>\n<pre><code>private S3Client getClient() {\n        return S3Client.builder()\n            .region(PhotoApplicationResources.REGION)\n            .build();\n    }\n</code></pre>\n<p>Now all of this works and can be invoked from Postman:</p>\n<p><a href=\"https://i.stack.imgur.com/Hz4m9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hz4m9.png\" alt=\"enter image description here\" /></a></p>\n<p>Looks like you have Spring Security Dependencies in your POM file (based on your screenshot of a forced login). You should remove them and see if your controller gets the file when setting a break point. You should see:</p>\n<p><a href=\"https://i.stack.imgur.com/SSl4o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SSl4o.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28077680,"reputation":13,"user_id":21449273,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75803820,"answer_count":1,"score":1,"last_activity_date":1679416677,"creation_date":1679415099,"question_id":75803684,"body_markdown":"I m working on a spring boot application and connecting it with Amazon S3 bucket. It is a simple application for uploading videos on aws.\r\n\r\n\r\nVideoService Class\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class VideoService {\r\n    \r\n        private final S3Service s3Service;\r\n        private final VideoRepository videoRepository;\r\n    \r\n    \r\n        public void uploadFile(MultipartFile file)\r\n        {\r\n            String videoURL = s3Service.uploadFile(file);\r\n    \r\n            var video = new Video();\r\n            video.setVideoUrl(videoURL);\r\n    \r\n            videoRepository.save(video);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\nService Class\r\n\r\n```\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class S3Service implements FileService{\r\n\r\n    public static final String BUCKET_NAME = &quot;****&quot;;\r\n\r\n    private final AmazonS3Client amazonS3Client;\r\n\r\n\r\n\r\n    @Override\r\n    public String uploadFile(MultipartFile file) {\r\n        var filenameExtension = StringUtils.getFilenameExtension(file.getOriginalFilename());\r\n\r\n        var key = UUID.randomUUID().toString() + &quot;.&quot; + filenameExtension;\r\n\r\n        var metadata = new ObjectMetadata();\r\n        metadata.setContentLength(file.getSize());\r\n        metadata.setContentType(file.getContentType());\r\n\r\n        try {\r\n            amazonS3Client.putObject(BUCKET_NAME, key, file.getInputStream(), metadata);\r\n        } catch (IOException ioException) {\r\n            throw new ResponseStatusException(HttpStatus.INTERNAL_SERVER_ERROR,\r\n                    &quot;An Exception occured while uploading the file&quot;);\r\n        }\r\n\r\n        amazonS3Client.setObjectAcl(BUCKET_NAME, key, CannedAccessControlList.PublicRead);\r\n\r\n        return amazonS3Client.getResourceUrl(BUCKET_NAME, key);\r\n    }\r\n}\r\n```\r\n\r\nController class:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/videos&quot;)\r\n@RequiredArgsConstructor\r\npublic class VideoController {\r\n\r\n\r\n    private final VideoService videoService;\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file)\r\n    {\r\n        videoService.uploadFile(file);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI already created s3 bucket and access key on aws\r\n\r\n\r\nThe access key and secrey key are stored in VM options:\r\n-Dcloud.aws.credentials.access-key=**** -Dcloud.aws.credentials.secret-key=*****\r\n\r\nthis is what I get in Postman:\r\n[Postman](https://i.stack.imgur.com/eRvxR.png)\r\n\r\nthis is shown in browser: \r\n[Browser localhost](https://i.stack.imgur.com/2mLnr.png)\r\n\r\n\r\nDid I miss something?\r\n\r\n\r\n\r\nI was following a tutorial and checked every single code with the completed repo and everything was the same. Instead of giving me 200 status it is giving me 401 status.","title":"Spring Boot AWS credentials Unauthorized","body":"<p>I m working on a spring boot application and connecting it with Amazon S3 bucket. It is a simple application for uploading videos on aws.</p>\n<p>VideoService Class</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class VideoService {\n\n    private final S3Service s3Service;\n    private final VideoRepository videoRepository;\n\n\n    public void uploadFile(MultipartFile file)\n    {\n        String videoURL = s3Service.uploadFile(file);\n\n        var video = new Video();\n        video.setVideoUrl(videoURL);\n\n        videoRepository.save(video);\n\n    }\n}\n</code></pre>\n<p>Service Class</p>\n<pre><code>\n@Service\n@RequiredArgsConstructor\npublic class S3Service implements FileService{\n\n    public static final String BUCKET_NAME = &quot;****&quot;;\n\n    private final AmazonS3Client amazonS3Client;\n\n\n\n    @Override\n    public String uploadFile(MultipartFile file) {\n        var filenameExtension = StringUtils.getFilenameExtension(file.getOriginalFilename());\n\n        var key = UUID.randomUUID().toString() + &quot;.&quot; + filenameExtension;\n\n        var metadata = new ObjectMetadata();\n        metadata.setContentLength(file.getSize());\n        metadata.setContentType(file.getContentType());\n\n        try {\n            amazonS3Client.putObject(BUCKET_NAME, key, file.getInputStream(), metadata);\n        } catch (IOException ioException) {\n            throw new ResponseStatusException(HttpStatus.INTERNAL_SERVER_ERROR,\n                    &quot;An Exception occured while uploading the file&quot;);\n        }\n\n        amazonS3Client.setObjectAcl(BUCKET_NAME, key, CannedAccessControlList.PublicRead);\n\n        return amazonS3Client.getResourceUrl(BUCKET_NAME, key);\n    }\n}\n</code></pre>\n<p>Controller class:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/videos&quot;)\n@RequiredArgsConstructor\npublic class VideoController {\n\n\n    private final VideoService videoService;\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file)\n    {\n        videoService.uploadFile(file);\n    }\n}\n</code></pre>\n<p>I already created s3 bucket and access key on aws</p>\n<p>The access key and secrey key are stored in VM options:\n-Dcloud.aws.credentials.access-key=**** -Dcloud.aws.credentials.secret-key=*****</p>\n<p>this is what I get in Postman:\n<a href=\"https://i.stack.imgur.com/eRvxR.png\" rel=\"nofollow noreferrer\">Postman</a></p>\n<p>this is shown in browser:\n<a href=\"https://i.stack.imgur.com/2mLnr.png\" rel=\"nofollow noreferrer\">Browser localhost</a></p>\n<p>Did I miss something?</p>\n<p>I was following a tutorial and checked every single code with the completed repo and everything was the same. Instead of giving me 200 status it is giving me 401 status.</p>\n"},{"tags":["java","spring-boot","jar"],"owner":{"account_id":17202794,"reputation":1,"user_id":12454060,"display_name":"Vitalijs V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679416258,"creation_date":1679415369,"question_id":75803732,"body_markdown":" **1. Problem:**\r\n\r\nI am having Spring Boot App.\r\nI use application.yml to setup datasource\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    url: jdbc:mysql://localhost:3306/erdeldb\r\n    username: root\r\n    password: root\r\n```\r\n\r\nI am able to run application from Intellij.\r\n\r\nI am building jar with shadowJar.\r\n\r\nWhen I run jar itself\r\n\r\n`java -jar supplier-service-0.0.1-all.jar`\r\n\r\nI am running into error:\r\n\r\n```\r\nCaused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n```\r\n\r\nbuild.gradle\r\n\r\n[dependencies](https://i.stack.imgur.com/sGc89.png)\r\n\r\n[dependencies](https://i.stack.imgur.com/J9Pvk.png)\r\n\r\n[jar](https://i.stack.imgur.com/0XEXG.png)\r\n\r\n **2. I have tried:**\r\n\r\nI have been adding `driver-class-name: com.mysql.cj.jdbc.Driver `to my yml file. \r\n\r\nNot working.\r\n\r\nI have been changing `application.yml` to `application.properties`. Not working.\r\n\r\nI have tried to run \r\n`java \r\n&quot;-Dspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/erdeldb&quot; \r\n-jar \r\nsupplier-service-0.0.1-all.jar` \r\n\r\nand error changed to \r\n\r\n`org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set`\r\n\r\nDoes this suggest when I run from terminal my application.yml file is not being seen by SpringBoot? Do I need to setup SpringBoot to read application.yml when run outside of IDE?\r\n","title":"Running Spring Boot App from terminal - Failed to determine a suitable driver class","body":"<p><strong>1. Problem:</strong></p>\n<p>I am having Spring Boot App.\nI use application.yml to setup datasource</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/erdeldb\n    username: root\n    password: root\n</code></pre>\n<p>I am able to run application from Intellij.</p>\n<p>I am building jar with shadowJar.</p>\n<p>When I run jar itself</p>\n<p><code>java -jar supplier-service-0.0.1-all.jar</code></p>\n<p>I am running into error:</p>\n<pre><code>Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n</code></pre>\n<p>build.gradle</p>\n<p><a href=\"https://i.stack.imgur.com/sGc89.png\" rel=\"nofollow noreferrer\">dependencies</a></p>\n<p><a href=\"https://i.stack.imgur.com/J9Pvk.png\" rel=\"nofollow noreferrer\">dependencies</a></p>\n<p><a href=\"https://i.stack.imgur.com/0XEXG.png\" rel=\"nofollow noreferrer\">jar</a></p>\n<p><strong>2. I have tried:</strong></p>\n<p>I have been adding <code>driver-class-name: com.mysql.cj.jdbc.Driver </code>to my yml file.</p>\n<p>Not working.</p>\n<p>I have been changing <code>application.yml</code> to <code>application.properties</code>. Not working.</p>\n<p>I have tried to run\n<code>java  &quot;-Dspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/erdeldb&quot;  -jar  supplier-service-0.0.1-all.jar</code></p>\n<p>and error changed to</p>\n<p><code>org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set</code></p>\n<p>Does this suggest when I run from terminal my application.yml file is not being seen by SpringBoot? Do I need to setup SpringBoot to read application.yml when run outside of IDE?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":379230,"reputation":9463,"user_id":732454,"accept_rate":73,"display_name":"stefan bachert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333975352,"creation_date":1333975352,"answer_id":10073344,"question_id":10073311,"body_markdown":"You can&#39;t include C/C++ headers into java source code.\r\n\r\nMaybe you want to define a native implementation for a java method. \r\n\r\nhttp://java.sun.com/docs/books/jni/","title":"How to include Header File (.h) in Java","body":"<p>You can't include C/C++ headers into java source code.</p>\n\n<p>Maybe you want to define a native implementation for a java method. </p>\n\n<p><a href=\"http://java.sun.com/docs/books/jni/\" rel=\"nofollow\">http://java.sun.com/docs/books/jni/</a></p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333975396,"creation_date":1333975396,"answer_id":10073358,"question_id":10073311,"body_markdown":"They seem to have a Java API, which you need to download and include in your classpath. You can&#39;t include a C header file in Java.","title":"How to include Header File (.h) in Java","body":"<p>They seem to have a Java API, which you need to download and include in your classpath. You can't include a C header file in Java.</p>\n"},{"tags":[],"owner":{"account_id":1385783,"reputation":1122,"user_id":1317883,"accept_rate":57,"display_name":"Kamal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333975461,"creation_date":1333975461,"answer_id":10073376,"question_id":10073311,"body_markdown":"you cannot do it directly in java. You have to include the header files in your C program and use JNI to call the functions that you want to use.\r\n\r\nRefer this : [JNI reference][1]\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jni/html/jniTOC.html","title":"How to include Header File (.h) in Java","body":"<p>you cannot do it directly in java. You have to include the header files in your C program and use JNI to call the functions that you want to use.</p>\n\n<p>Refer this : <a href=\"http://java.sun.com/docs/books/jni/html/jniTOC.html\" rel=\"nofollow\">JNI reference</a></p>\n"},{"tags":[],"owner":{"account_id":903400,"reputation":1513,"user_id":938899,"accept_rate":75,"display_name":"Alexey Berezkin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333975482,"creation_date":1333975482,"answer_id":10073383,"question_id":10073311,"body_markdown":"To run native code from Java, you need using JNI technology. Try http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html or http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html of google by keywords &quot;JNI, tutorial&quot;.","title":"How to include Header File (.h) in Java","body":"<p>To run native code from Java, you need using JNI technology. Try <a href=\"http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html\" rel=\"nofollow\">http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html</a> or <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html</a> of google by keywords \"JNI, tutorial\".</p>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1333975501,"creation_date":1333975501,"answer_id":10073385,"question_id":10073311,"body_markdown":"This might be more complicated than you think. The .h files are C language include files which usually  describe the methods and data structures of a C-library. You would have to Java Native Interface (JNI) in order to include these libraries in your java code. \r\n\r\nYou have basically two options\r\n\r\n- Go through a tutorial like [this](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html) \r\n\r\n- Or look for a java implementation.\r\n\r\nThere&#39;re already [java-bindings](http://sourceforge.net/projects/tokyocabinet/files/tokyocabinet-java/) available.","title":"How to include Header File (.h) in Java","body":"<p>This might be more complicated than you think. The .h files are C language include files which usually  describe the methods and data structures of a C-library. You would have to Java Native Interface (JNI) in order to include these libraries in your java code. </p>\n\n<p>You have basically two options</p>\n\n<ul>\n<li><p>Go through a tutorial like <a href=\"http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html\" rel=\"nofollow\">this</a> </p></li>\n<li><p>Or look for a java implementation.</p></li>\n</ul>\n\n<p>There're already <a href=\"http://sourceforge.net/projects/tokyocabinet/files/tokyocabinet-java/\" rel=\"nofollow\">java-bindings</a> available.</p>\n"},{"tags":[],"owner":{"account_id":379825,"reputation":3125,"user_id":733456,"accept_rate":84,"display_name":"Christian Schlichtherle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333975520,"creation_date":1333975520,"answer_id":10073388,"question_id":10073311,"body_markdown":"The page mentions that there is an API for Java available, but does not show it. You should ask them for the Java documentation. Preferrably, the API should be a JDBC driver.","title":"How to include Header File (.h) in Java","body":"<p>The page mentions that there is an API for Java available, but does not show it. You should ask them for the Java documentation. Preferrably, the API should be a JDBC driver.</p>\n"},{"tags":[],"owner":{"account_id":28077976,"reputation":1,"user_id":21449527,"display_name":"user21449527"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679416149,"creation_date":1679416149,"answer_id":75803876,"question_id":10073311,"body_markdown":"you will be programming a basic game that features a playable character and some simple mechanics such as collision detection.  \r\n\r\n \r\n\r\nCanvas \r\n\r\nThe canvas should be a square that is 700 pixels in width and 700 pixels in height. \r\n\r\n \r\n\r\nCharacter design \r\n\r\nYou will need to come up with a design for your playable character. In the demo the playable character is a spider which is drawn using multiple lines and an ellipse. You are free to design your character however you like (or copy the spider design from the demo). For full marks your character must be a complex shape drawn using at least 3 simple shapes. You must also use at least 2 different types of simple shapes. For example, a character that is drawn using 2 rectangles and a line OR a character drawn using two triangles and a circle would both suffice. The character’s overall dimensions should be approx. 70 pixels in width and 70 pixels in height. \r\n\r\n \r\n\r\nMovement \r\n\r\nHave the character be controlled using the arrow keys in the following manner:  \r\n\r\n✰ The UP arrow key moves the character up 70 pixels.  \r\n\r\n✰ DOWN moves the character down 70 pixels.  \r\n\r\n✰ LEFT moves the character to the left 70 pixels.  \r\n\r\n✰ RIGHT moves the character to the right 70 pixels.  \r\n\r\nThe character should be centered on the point (35, 35) at the start of the program. This is to ensure that the character moves correctly. Please refer to the demo video to see what moving correctly looks like.  \r\n\r\nNote that you cannot use the WASD keys to move the character, the character MUST be controlled using the arrow keys. \r\n\r\n \r\n\r\nBoundaries \r\n\r\nThe character must be prevented from moving off the canvas. For half marks, prevent the character from being moved beyond a canvas boundary.  \r\n\r\nwhen the character is moved beyond a canvas boundary have the character appear against the opposite boundary. This is a recreation of the same boundary mechanic used in Pac-Man. Please see the demo video for a visual depiction of this feature. \r\n\r\n \r\n\r\nTrail \r\n\r\nThere needs to be some kind of trail extending vertically from the character’s position to the top of the canvas. In the demo there is a white line extending vertically from the spider to the top of the canvas to represent the web the spider is swinging from. You are free to change the theme of this trail, but it must behave in the same way. That is, it must extend vertically from the character to the top of the canvas AND it must move as the character moves. \r\n\r\n \r\n\r\nObstacles \r\n\r\nHave two obstacles present somewhere on the canvas. Their positions should be randomly generated. This means that each time the program is run the obstacles will appear in different positions. You are free to design the obstacles however you like, but it’s best to keep them rectangular.  \r\n\r\nThere must be some visual indication that the game is over when the character collides with an obstacle. In the demo, the canvas is cleared and the text “game over” is displayed. You are free to design your own game over screen. \r\n\r\n \r\n\r\n3. Constraints \r\n\r\n✘ You cannot use any extra processing libraries or plugins.  \r\n\r\n✘ You cannot define your own classes.  \r\n\r\n✘ The only built-in java classes you can use are PVector and PShape. Although, we recommend not using them.  \r\n\r\n✘ You cannot use multiple tabs or multiple files.  \r\n\r\n✘ You cannot use transformations such as rotate, translate, scale etc.  \r\n\r\n✘ You cannot use images.  \r\n\r\n✘ You cannot import fonts.  \r\n\r\n✔ You must submit a single .pde file named exactly COMP1000.pde (not COMP 1000.pde, not COMP1000 (1).pde, not yudip1.pde...). ","title":"How to include Header File (.h) in Java","body":"<p>you will be programming a basic game that features a playable character and some simple mechanics such as collision detection.</p>\n<p>Canvas</p>\n<p>The canvas should be a square that is 700 pixels in width and 700 pixels in height.</p>\n<p>Character design</p>\n<p>You will need to come up with a design for your playable character. In the demo the playable character is a spider which is drawn using multiple lines and an ellipse. You are free to design your character however you like (or copy the spider design from the demo). For full marks your character must be a complex shape drawn using at least 3 simple shapes. You must also use at least 2 different types of simple shapes. For example, a character that is drawn using 2 rectangles and a line OR a character drawn using two triangles and a circle would both suffice. The character’s overall dimensions should be approx. 70 pixels in width and 70 pixels in height.</p>\n<p>Movement</p>\n<p>Have the character be controlled using the arrow keys in the following manner:</p>\n<p>✰ The UP arrow key moves the character up 70 pixels.</p>\n<p>✰ DOWN moves the character down 70 pixels.</p>\n<p>✰ LEFT moves the character to the left 70 pixels.</p>\n<p>✰ RIGHT moves the character to the right 70 pixels.</p>\n<p>The character should be centered on the point (35, 35) at the start of the program. This is to ensure that the character moves correctly. Please refer to the demo video to see what moving correctly looks like.</p>\n<p>Note that you cannot use the WASD keys to move the character, the character MUST be controlled using the arrow keys.</p>\n<p>Boundaries</p>\n<p>The character must be prevented from moving off the canvas. For half marks, prevent the character from being moved beyond a canvas boundary.</p>\n<p>when the character is moved beyond a canvas boundary have the character appear against the opposite boundary. This is a recreation of the same boundary mechanic used in Pac-Man. Please see the demo video for a visual depiction of this feature.</p>\n<p>Trail</p>\n<p>There needs to be some kind of trail extending vertically from the character’s position to the top of the canvas. In the demo there is a white line extending vertically from the spider to the top of the canvas to represent the web the spider is swinging from. You are free to change the theme of this trail, but it must behave in the same way. That is, it must extend vertically from the character to the top of the canvas AND it must move as the character moves.</p>\n<p>Obstacles</p>\n<p>Have two obstacles present somewhere on the canvas. Their positions should be randomly generated. This means that each time the program is run the obstacles will appear in different positions. You are free to design the obstacles however you like, but it’s best to keep them rectangular.</p>\n<p>There must be some visual indication that the game is over when the character collides with an obstacle. In the demo, the canvas is cleared and the text “game over” is displayed. You are free to design your own game over screen.</p>\n<ol start=\"3\">\n<li>Constraints</li>\n</ol>\n<p>✘ You cannot use any extra processing libraries or plugins.</p>\n<p>✘ You cannot define your own classes.</p>\n<p>✘ The only built-in java classes you can use are PVector and PShape. Although, we recommend not using them.</p>\n<p>✘ You cannot use multiple tabs or multiple files.</p>\n<p>✘ You cannot use transformations such as rotate, translate, scale etc.</p>\n<p>✘ You cannot use images.</p>\n<p>✘ You cannot import fonts.</p>\n<p>✔ You must submit a single .pde file named exactly COMP1000.pde (not COMP 1000.pde, not COMP1000 (1).pde, not yudip1.pde...).</p>\n"}],"owner":{"account_id":758612,"reputation":3850,"user_id":772399,"accept_rate":96,"display_name":"Arpssss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12382,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":10073385,"answer_count":7,"score":0,"last_activity_date":1679416149,"creation_date":1333975219,"question_id":10073311,"body_markdown":"I want to use [this][1] which says to use a particular method I have to include tcutil.h in my java code. Can anybody help me, how to do that ? Another point: we can easily create an header file and include it in to C code but why reverse is so hard (means lots of work have to do) ? May be stupid, but little bit hints will be helpful.\r\n\r\n\r\n  [1]: http://fallabs.com/tokyocabinet/spex-en.html#tcadbapi","title":"How to include Header File (.h) in Java","body":"<p>I want to use <a href=\"http://fallabs.com/tokyocabinet/spex-en.html#tcadbapi\" rel=\"nofollow\">this</a> which says to use a particular method I have to include tcutil.h in my java code. Can anybody help me, how to do that ? Another point: we can easily create an header file and include it in to C code but why reverse is so hard (means lots of work have to do) ? May be stupid, but little bit hints will be helpful.</p>\n"},{"tags":["java","reactjs","telegram"],"comments":[{"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"score":0,"creation_date":1679378471,"post_id":75797520,"comment_id":133706506,"body_markdown":"java &amp; reactjs &amp; python ? man, where&#39;s your exact problem? Please exclude unnecessary tags.","body":"java &amp; reactjs &amp; python ? man, where&#39;s your exact problem? Please exclude unnecessary tags."},{"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"score":0,"creation_date":1679378682,"post_id":75797520,"comment_id":133706525,"body_markdown":"sorryy...Java &amp; reactjs","body":"sorryy...Java &amp; reactjs"}],"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679415717,"creation_date":1679375632,"question_id":75797520,"body_markdown":"I&#39;m trying to send message to bot (from telegram webapp). That&#39;s successful, but I don&#39;t know how to get the message in bot.\r\n\r\nThis is my WebApp code. I want to know to get the &quot;WebApp message sent!&quot;\r\n```js\r\nonSubmitClick(e) {\r\n        const button = window.Telegram.WebApp.MainButton;\r\n        if (e === 0) {\r\n            button.text = &quot;submit&quot;;\r\n            button.onClick(this.send);\r\n        } else {\r\n            button.text = &quot;reject&quot;;\r\n        }\r\n        // button.text = &quot;test&quot;;\r\n        this.setState(() =&gt; ({\r\n            mainButton: button\r\n        }))\r\n        button.enable();\r\n        button.show();\r\n    }\r\n\r\n    send(){\r\n        alert(&quot;test oncilck!&quot;);\r\n        //i want get it ↓\r\n        window.Telegram.WebApp.sendData(&quot;WebApp message sent!&quot;);\r\n    }\r\n```\r\n\r\n\r\nHow can I get send() method&#39;s string.","title":"How can I recived data from Telegram WebApp keyboard button?","body":"<p>I'm trying to send message to bot (from telegram webapp). That's successful, but I don't know how to get the message in bot.</p>\n<p>This is my WebApp code. I want to know to get the &quot;WebApp message sent!&quot;</p>\n<pre class=\"lang-js prettyprint-override\"><code>onSubmitClick(e) {\n        const button = window.Telegram.WebApp.MainButton;\n        if (e === 0) {\n            button.text = &quot;submit&quot;;\n            button.onClick(this.send);\n        } else {\n            button.text = &quot;reject&quot;;\n        }\n        // button.text = &quot;test&quot;;\n        this.setState(() =&gt; ({\n            mainButton: button\n        }))\n        button.enable();\n        button.show();\n    }\n\n    send(){\n        alert(&quot;test oncilck!&quot;);\n        //i want get it ↓\n        window.Telegram.WebApp.sendData(&quot;WebApp message sent!&quot;);\n    }\n</code></pre>\n<p>How can I get send() method's string.</p>\n"},{"tags":["java","c++","exception"],"comments":[{"owner":{"account_id":5460139,"reputation":172996,"user_id":4342498,"accept_rate":50,"display_name":"NathanOliver"},"score":2,"creation_date":1679413392,"post_id":75803329,"comment_id":133715836,"body_markdown":"I don&#39;t know enough about Java to confirm but do note that in C++ the exception specification before C++11 used the same syntax, and might be why Java uses it.  You can read about how the old C++ way worked here: https://en.cppreference.com/w/cpp/language/except_spec","body":"I don&#39;t know enough about Java to confirm but do note that in C++ the exception specification before C++11 used the same syntax, and might be why Java uses it.  You can read about how the old C++ way worked here: <a href=\"https://en.cppreference.com/w/cpp/language/except_spec\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/except_spec</a>"},{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":2,"creation_date":1679413490,"post_id":75803329,"comment_id":133715866,"body_markdown":"I suppose you want first to learn about checked/unchecked https://www.baeldung.com/java-checked-unchecked-exceptions","body":"I suppose you want first to learn about checked/unchecked <a href=\"https://www.baeldung.com/java-checked-unchecked-exceptions\" rel=\"nofollow noreferrer\">baeldung.com/java-checked-unchecked-exceptions</a>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1679413927,"post_id":75803329,"comment_id":133716010,"body_markdown":"@teapot418 isn&#39;t the first part only the case for checked Exceptions?","body":"@teapot418 isn&#39;t the first part only the case for checked Exceptions?"},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679415551,"post_id":75803329,"comment_id":133716512,"body_markdown":"@IłyaBursov Yes, knowing the difference between both doesn&#39;t get any closer to answering the question. I knew about both before asking this.","body":"@IłyaBursov Yes, knowing the difference between both doesn&#39;t get any closer to answering the question. I knew about both before asking this."},{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":2,"creation_date":1679416100,"post_id":75803329,"comment_id":133716694,"body_markdown":"@FreelanceConsultant you just cannot compile code which tries to throw checked exception not mentioned in throws, and answer posted also tells the same `If not, you will get a compilation error.`","body":"@FreelanceConsultant you just cannot compile code which tries to throw checked exception not mentioned in throws, and answer posted also tells the same <code>If not, you will get a compilation error.</code>"},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679417636,"post_id":75803329,"comment_id":133717191,"body_markdown":"@IłyaBursov Ok that is the answer I was looking for. I didn&#39;t understand that part of the answer. Thanks","body":"@IłyaBursov Ok that is the answer I was looking for. I didn&#39;t understand that part of the answer. Thanks"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679554401,"post_id":75803329,"comment_id":133743086,"body_markdown":"Duplicate of  [Checked vs Unchecked exception](https://stackoverflow.com/questions/4639432/checked-vs-unchecked-exception)","body":"Duplicate of  <a href=\"https://stackoverflow.com/questions/4639432/checked-vs-unchecked-exception\">Checked vs Unchecked exception</a>"},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679564105,"post_id":75803329,"comment_id":133745201,"body_markdown":"@MarkRotteveel No it isn&#39;t","body":"@MarkRotteveel No it isn&#39;t"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679564595,"post_id":75803329,"comment_id":133745333,"body_markdown":"I think it does, because it explains what checked exceptions are, why you must use `throws` with checked exceptions, and that you get a compilation error otherwise if a checked exception can be thrown by code.","body":"I think it does, because it explains what checked exceptions are, why you must use <code>throws</code> with checked exceptions, and that you get a compilation error otherwise if a checked exception can be thrown by code."},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679564904,"post_id":75803329,"comment_id":133745430,"body_markdown":"@MarkRotteveel I knew the difference between checked and unchecked exceptions prior to asking this question, so that would make it somewhat pointless to have asked the question if it was indeed a duplicate.","body":"@MarkRotteveel I knew the difference between checked and unchecked exceptions prior to asking this question, so that would make it somewhat pointless to have asked the question if it was indeed a duplicate."},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679564958,"post_id":75803329,"comment_id":133745444,"body_markdown":"@MarkRotteveel I did not ask &quot;what is an unchecked or checked exception&quot; I asked what happens if you try to throw one or the other from a function which doesn&#39;t declare them with `throws`. It&#39;s a totally different question, even if they are about the same subject matter.","body":"@MarkRotteveel I did not ask &quot;what is an unchecked or checked exception&quot; I asked what happens if you try to throw one or the other from a function which doesn&#39;t declare them with <code>throws</code>. It&#39;s a totally different question, even if they are about the same subject matter."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679565104,"post_id":75803329,"comment_id":133745492,"body_markdown":"From the [topvoted answer](https://stackoverflow.com/a/4639560/466862): _&quot;Compiler will never force you to catch such exception or force you to declare it in the method using `throws` keyword.&quot;_.","body":"From the <a href=\"https://stackoverflow.com/a/4639560/466862\">topvoted answer</a>: <i>&quot;Compiler will never force you to catch such exception or force you to declare it in the method using <code>throws</code> keyword.&quot;</i>."},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679684401,"post_id":75803329,"comment_id":133771356,"body_markdown":"@MarkRotteveel Of what relevance is that","body":"@MarkRotteveel Of what relevance is that"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679736955,"post_id":75803329,"comment_id":133777024,"body_markdown":"You say you asked _&quot;[..] what happens if you try to throw one or the other from a function which doesn&#39;t declare them with throws.&quot;_ And the answer is that for unchecked exceptions the compiler doesn&#39;t force you to catch or declare `throws`, and for checked exception (for which I neglected to include a relevant quote from the duplicate in my previous comment), the compiler will force you to add `throws` or catch them. In other words, the duplicate does answer your question.","body":"You say you asked <i>&quot;[..] what happens if you try to throw one or the other from a function which doesn&#39;t declare them with throws.&quot;</i> And the answer is that for unchecked exceptions the compiler doesn&#39;t force you to catch or declare <code>throws</code>, and for checked exception (for which I neglected to include a relevant quote from the duplicate in my previous comment), the compiler will force you to add <code>throws</code> or catch them. In other words, the duplicate does answer your question."},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1679769698,"post_id":75803329,"comment_id":133781582,"body_markdown":"@MarkRotteveel Again, of what relevance is that? Two questions may be different but have similar, or even the same, answer","body":"@MarkRotteveel Again, of what relevance is that? Two questions may be different but have similar, or even the same, answer"}],"answers":[{"tags":[],"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679413564,"creation_date":1679413564,"answer_id":75803411,"question_id":75803329,"body_markdown":"In Java there are two types of exceptions - checked and unchecked. Checked exceptions are all the subclasses of `Exception` except those which are subclasses of `RuntimeException`.\r\n\r\nWhich means exceptions which are descendants of `RuntimeException` are unchecked exceptions.\r\n\r\nThe throws clause declares which checked exceptions the method is allowed to throw. It can throw any unchecked exception, but only checked exceptions which are declared in its throws clause (or their subclasses).\r\n\r\nIt has nothing to do with `noexcept`.\r\n\r\nSyntactically what you wrote is not correct, because you are supposed to write `throw new SomeDifferentExceptionType()` - you can&#39;t throw a class. But assuming that&#39;s what you meant, if `SomeDifferentExceptionType` is unchecked, it will also work well. If not, you will get a compilation error.","title":"Is Java &quot;throws&quot; like an inverse of C++ &quot;noexcept&quot;?","body":"<p>In Java there are two types of exceptions - checked and unchecked. Checked exceptions are all the subclasses of <code>Exception</code> except those which are subclasses of <code>RuntimeException</code>.</p>\n<p>Which means exceptions which are descendants of <code>RuntimeException</code> are unchecked exceptions.</p>\n<p>The throws clause declares which checked exceptions the method is allowed to throw. It can throw any unchecked exception, but only checked exceptions which are declared in its throws clause (or their subclasses).</p>\n<p>It has nothing to do with <code>noexcept</code>.</p>\n<p>Syntactically what you wrote is not correct, because you are supposed to write <code>throw new SomeDifferentExceptionType()</code> - you can't throw a class. But assuming that's what you meant, if <code>SomeDifferentExceptionType</code> is unchecked, it will also work well. If not, you will get a compilation error.</p>\n"}],"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"comment_count":15,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":7,"up_vote_count":2,"closed_date":1679467140,"answer_count":1,"score":-5,"last_activity_date":1679415629,"creation_date":1679413132,"question_id":75803329,"body_markdown":"I don&#39;t fully understand what the `throws` keyword in Java is for.\r\n\r\nIn particular, I can&#39;t seem to find clear information about what happens if I were to throw an exception type `T` from a Java function which declares that only exceptions of type `Y` can be thrown.\r\n\r\nFor example, something like this:\r\n```java\r\nvoid testFunction () throws SomeExceptionType {\r\n    throw new SomeDifferentExceptionType();\r\n}\r\n```\r\nIn this case I have attempted to illustrate that the expected exception type does not match the exception type which is actually thrown. Is this syntactically legal Java? If so, what happens at runtime?\r\n\r\n----\r\n\r\nI come from a C++ background, and in C++ we have the concept of `noexcept`. This keyword is used to mark functions as `noexcept` which means that they are not permitted to throw an exception. If a function marked `noexcept` *does* throw an exception, then `std::terminate` is immediately called, which borks program execution.\r\n\r\n`std::terminate` is effectively like a &quot;goto&quot; statement in that it takes you to the end of program execution, quitting the program runtime. It may also do some stack clean-up for RAII, [this is actually implementation defined][1], apparently.\r\n\r\nSo, is Java&#39;s `throws` statement equivalent to C++ `noexcept`, but inverted?\r\n\r\n\r\n  [1]: https://en.cppreference.com/w/cpp/error/terminate\r\n\r\n----\r\n\r\nAlthough there are lots of questions here which ask how to use `throws`, I haven&#39;t been able to find a clear answer to this specific question about what happens if you throw something different to the exception type specified with `throws`.\r\n\r\n----\r\n\r\nEdit: I understand that this is only really relevant to the concept of checked exception types, because unchecked exception types &quot;do not interact with&quot; the `throws` keyword. Knowing this doesn&#39;t however provide an answer to the question being asked.","title":"Is Java &quot;throws&quot; like an inverse of C++ &quot;noexcept&quot;?","body":"<p>I don't fully understand what the <code>throws</code> keyword in Java is for.</p>\n<p>In particular, I can't seem to find clear information about what happens if I were to throw an exception type <code>T</code> from a Java function which declares that only exceptions of type <code>Y</code> can be thrown.</p>\n<p>For example, something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void testFunction () throws SomeExceptionType {\n    throw new SomeDifferentExceptionType();\n}\n</code></pre>\n<p>In this case I have attempted to illustrate that the expected exception type does not match the exception type which is actually thrown. Is this syntactically legal Java? If so, what happens at runtime?</p>\n<hr />\n<p>I come from a C++ background, and in C++ we have the concept of <code>noexcept</code>. This keyword is used to mark functions as <code>noexcept</code> which means that they are not permitted to throw an exception. If a function marked <code>noexcept</code> <em>does</em> throw an exception, then <code>std::terminate</code> is immediately called, which borks program execution.</p>\n<p><code>std::terminate</code> is effectively like a &quot;goto&quot; statement in that it takes you to the end of program execution, quitting the program runtime. It may also do some stack clean-up for RAII, <a href=\"https://en.cppreference.com/w/cpp/error/terminate\" rel=\"nofollow noreferrer\">this is actually implementation defined</a>, apparently.</p>\n<p>So, is Java's <code>throws</code> statement equivalent to C++ <code>noexcept</code>, but inverted?</p>\n<hr />\n<p>Although there are lots of questions here which ask how to use <code>throws</code>, I haven't been able to find a clear answer to this specific question about what happens if you throw something different to the exception type specified with <code>throws</code>.</p>\n<hr />\n<p>Edit: I understand that this is only really relevant to the concept of checked exception types, because unchecked exception types &quot;do not interact with&quot; the <code>throws</code> keyword. Knowing this doesn't however provide an answer to the question being asked.</p>\n"},{"tags":["java","for-loop","multidimensional-array"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1679416363,"post_id":75803772,"comment_id":133716789,"body_markdown":"I looked at your code and honestly have  really hard time figuring out what you where even trying to do in that loop. If you want to check if if 4 consecutive elements in an array are 1 to 4 i would have expected code similar to something like `if(array[i] == 1 &amp;&amp; array[i+1] == 2 &amp;&amp; array[i+2] == 3 &amp;&amp; array[i+3] == 4)` inside the loop, but whatever it is you are trying to do really looks needlessly complicated.","body":"I looked at your code and honestly have  really hard time figuring out what you where even trying to do in that loop. If you want to check if if 4 consecutive elements in an array are 1 to 4 i would have expected code similar to something like <code>if(array[i] == 1 &amp;&amp; array[i+1] == 2 &amp;&amp; array[i+2] == 3 &amp;&amp; array[i+3] == 4)</code> inside the loop, but whatever it is you are trying to do really looks needlessly complicated."}],"owner":{"account_id":26841308,"reputation":13,"user_id":20427784,"display_name":"Rohith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679415547,"creation_date":1679415547,"question_id":75803772,"body_markdown":"For a project, I am trying to check a 2d array row by column to check if the row has the pattern 1,2,3,4 in a consecutive order. If the row did, then the method would return the first occurence of the consecutive element, in a string format.   \r\n\r\nThe 2d array was randomly populated with integers in range(1-4). I also set four elements to 1,2,3,4 to ensure that no matter how many times I run it, the pattern is always there. \r\n\r\nHowever, countless attempts to check the consecutive numbers unfortunately ended up failing. One of them involved using an if statement to check every element with a variable called checkTarget, which starts at 1 and if the element equals 1, the variable is incremented and the process is repeated until it hits 4. If all four of the checkTarget values match with the row elements in a consecutive order, then the string foundAt is concatenated with the position at [r][c-3] which returns the first occurence of the consecutive pattern. However that didn&#39;t work either.\r\n\r\nHere&#39;s one of my attempts that failed:\r\n\r\n```\r\n\r\n   private int[][] grid;\r\n  // constructor to populate the 2d array with random numbers between 1-4\r\n   // below is the method im trying to fix\r\n   public String findConsecInts() \r\n   { \r\n\t   int numConsec = 0;\r\n\t   String foundAt = &quot;&quot;;\r\n\t   int checkTarget = 1;\r\n\t   int cont = 0; // variable that continues if \r\n\t   \r\n\t   for(int r = 0; r &lt; grid.length; r++ ) {\r\n\t\t\t  for(int c = grid[0].length-1; c &gt;= 1; c--) {\r\n\t\t\t\t  if(grid[r][c+1] == grid[r][c] + 1 &amp;&amp;grid[r][c]==checkTarget) {\r\n\t\t\t\tif(grid[r][c]==checkTarget) {\r\n\t\t\t\t\tcont++; // \r\n\t\t\t\t\tcheckTarget++;\r\n\t\t\t\t}\r\n\t\t\t\tif(cont==1&amp;&amp;checkTarget==2&amp;&amp;grid[r][c-cont]==checkTarget) {\r\n\t\t\t\t\tcont++;\r\n\t\t\t\t\tcheckTarget++;\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcheckTarget = 1;\r\n\t\t\t\t\tcont=0;\r\n\t\t\t\t}\r\n\t\t\t\tif(cont==2&amp;&amp;checkTarget==3&amp;&amp;grid[r][c-cont]==checkTarget) {\r\n\t\t\t\t\tcont++;\r\n\t\t\t\t\tcheckTarget++;\r\n\t\t\t\t}\r\n\t\t\t\tif(cont==3&amp;&amp;checkTarget==4&amp;&amp;grid[r][c-cont]==checkTarget) {\r\n\t\t\t\t\tfoundAt = &quot;[&quot; + r + &quot;]&quot; + &quot;[&quot; + (c-3) + &quot;]&quot;;\r\n\t\t\t\t}\r\n\t\t\t\t}\r\n\t   }\t cont = 0;\r\n\t\t\t  checkTarget = 1;\r\n\t\t\t  \r\n\t\t\t  \r\n\t   \r\n\t//1. traverse grid\r\n\t//2. find the pattern 1, 2, 3, 4 anywhere on the grid and\r\n\t//   return a String of the row and col in [r][c] format of \r\n\t//   where the pattern starts (where the element 1 is located)\r\n\treturn foundAt;  \r\n   }\r\n\r\n```\r\n \r\n\r\nI kept running this multiple times, even by setting the pattern to guarantee that it exists in the grid.\r\n\r\n```\r\n\r\n\r\n       grid[3][3]= 1;\r\n\r\n       grid[3][4]= 2;\r\n\r\n       grid[3][5]= 3;\r\n\r\n       grid[3][6]= 4;\r\n```\r\n\r\n\r\nAll I got was nothing. It didn&#39;t return the position [3][3] when I tried to run the method.","title":"How can I check the row of a 2d array to see if it has the pattern 1,2,3,4?","body":"<p>For a project, I am trying to check a 2d array row by column to check if the row has the pattern 1,2,3,4 in a consecutive order. If the row did, then the method would return the first occurence of the consecutive element, in a string format.</p>\n<p>The 2d array was randomly populated with integers in range(1-4). I also set four elements to 1,2,3,4 to ensure that no matter how many times I run it, the pattern is always there.</p>\n<p>However, countless attempts to check the consecutive numbers unfortunately ended up failing. One of them involved using an if statement to check every element with a variable called checkTarget, which starts at 1 and if the element equals 1, the variable is incremented and the process is repeated until it hits 4. If all four of the checkTarget values match with the row elements in a consecutive order, then the string foundAt is concatenated with the position at [r][c-3] which returns the first occurence of the consecutive pattern. However that didn't work either.</p>\n<p>Here's one of my attempts that failed:</p>\n<pre><code>\n   private int[][] grid;\n  // constructor to populate the 2d array with random numbers between 1-4\n   // below is the method im trying to fix\n   public String findConsecInts() \n   { \n       int numConsec = 0;\n       String foundAt = &quot;&quot;;\n       int checkTarget = 1;\n       int cont = 0; // variable that continues if \n       \n       for(int r = 0; r &lt; grid.length; r++ ) {\n              for(int c = grid[0].length-1; c &gt;= 1; c--) {\n                  if(grid[r][c+1] == grid[r][c] + 1 &amp;&amp;grid[r][c]==checkTarget) {\n                if(grid[r][c]==checkTarget) {\n                    cont++; // \n                    checkTarget++;\n                }\n                if(cont==1&amp;&amp;checkTarget==2&amp;&amp;grid[r][c-cont]==checkTarget) {\n                    cont++;\n                    checkTarget++;\n                    \n                } else {\n                    checkTarget = 1;\n                    cont=0;\n                }\n                if(cont==2&amp;&amp;checkTarget==3&amp;&amp;grid[r][c-cont]==checkTarget) {\n                    cont++;\n                    checkTarget++;\n                }\n                if(cont==3&amp;&amp;checkTarget==4&amp;&amp;grid[r][c-cont]==checkTarget) {\n                    foundAt = &quot;[&quot; + r + &quot;]&quot; + &quot;[&quot; + (c-3) + &quot;]&quot;;\n                }\n                }\n       }     cont = 0;\n              checkTarget = 1;\n              \n              \n       \n    //1. traverse grid\n    //2. find the pattern 1, 2, 3, 4 anywhere on the grid and\n    //   return a String of the row and col in [r][c] format of \n    //   where the pattern starts (where the element 1 is located)\n    return foundAt;  \n   }\n\n</code></pre>\n<p>I kept running this multiple times, even by setting the pattern to guarantee that it exists in the grid.</p>\n<pre><code>\n\n       grid[3][3]= 1;\n\n       grid[3][4]= 2;\n\n       grid[3][5]= 3;\n\n       grid[3][6]= 4;\n</code></pre>\n<p>All I got was nothing. It didn't return the position [3][3] when I tried to run the method.</p>\n"},{"tags":["java","string","console","formatter"],"comments":[{"owner":{"account_id":374852,"reputation":5831,"user_id":725306,"accept_rate":97,"display_name":"Mohammad Faisal"},"score":2,"creation_date":1349762178,"post_id":12793593,"comment_id":17297595,"body_markdown":"@khachik: can you please describe how `String.format(%4s&quot;, ...)` works? and what is the second argument in `format()`?","body":"@khachik: can you please describe how <code>String.format(%4s&quot;, ...)</code> works? and what is the second argument in <code>format()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1349762707,"creation_date":1349762268,"answer_id":12793649,"question_id":12793593,"body_markdown":"You can use `format()` to format your output according to your need..\r\n\r\n        for(int i=1; i&lt;13; i++){\r\n            for(int j=1; j&lt;13; j++){\r\n                \r\n               System.out.format(&quot;%5d&quot;, i * j);\r\n            }\r\n            System.out.println();  // To move to the next line.\r\n        }\r\n\r\nOr, you can also use: - \r\n\r\n    System.out.print(String.format(&quot;%5d&quot;, i * j));\r\n\r\nin place of `System.out.format`..\r\n\r\nHere&#39;s is the explanation of **how `%5d` works**: - \r\n\r\n - First, since we are printing integer, we should use `%d` which is format specifier for integers..\r\n - `5` in `%5d` means the total width your output will take.. So, if your value is 5, it will be printed to cover 5 spaces like this: - `****5`\r\n - `%5d` is used to **align right**.. For **aligning left**, you can use `%-5d`. For a value `5`, this will print your output as: -      `5****`","title":"How to align String on console output","body":"<p>You can use <code>format()</code> to format your output according to your need..</p>\n\n<pre><code>    for(int i=1; i&lt;13; i++){\n        for(int j=1; j&lt;13; j++){\n\n           System.out.format(\"%5d\", i * j);\n        }\n        System.out.println();  // To move to the next line.\n    }\n</code></pre>\n\n<p>Or, you can also use: - </p>\n\n<pre><code>System.out.print(String.format(\"%5d\", i * j));\n</code></pre>\n\n<p>in place of <code>System.out.format</code>..</p>\n\n<p>Here's is the explanation of <strong>how <code>%5d</code> works</strong>: - </p>\n\n<ul>\n<li>First, since we are printing integer, we should use <code>%d</code> which is format specifier for integers..</li>\n<li><code>5</code> in <code>%5d</code> means the total width your output will take.. So, if your value is 5, it will be printed to cover 5 spaces like this: - <code>****5</code></li>\n<li><code>%5d</code> is used to <strong>align right</strong>.. For <strong>aligning left</strong>, you can use <code>%-5d</code>. For a value <code>5</code>, this will print your output as: -      <code>5****</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6093382,"reputation":117,"user_id":4754977,"accept_rate":100,"display_name":"Sunil Bhagwat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1437071265,"creation_date":1437071265,"answer_id":31461847,"question_id":12793593,"body_markdown":"In my example the array contains character string&#39;s with different length and due to that I was unable to arrange string and other strings of different arrays were mis-match on console. with a different concept I could arrange those\r\narrays on console my codes are as below.\r\n\r\n    package arrayformat;\r\n\r\n     /**\r\n     *\r\n     * @author Sunil\r\n     */\r\n     public class ArrayFormat {\r\n\r\n    \r\n   \r\n      /**\r\n      * @param args the command line arguments\r\n      */\r\n\r\n      public static void main(String[] args) {\r\n        \r\n      int[] productId = new int[]  \r\n     {1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,};\r\n       String[] productName= new String[]{&quot;Pepsi&quot;,&quot;kissan jam&quot;,&quot;Herbal \r\n     oil&quot;,&quot;Garnier man&#39;s&quot;,&quot;Lays chips&quot;,&quot;biscuits&quot;,&quot;Bournvita&quot;,&quot;Cadbury&quot;,&quot;Parker \r\n     Vector&quot;,&quot;Nescafe&quot;,};\r\n       String[] productType = new String[]{&quot;Cold Drink&quot;,&quot;Jam&quot;,&quot;Oil&quot;,&quot;Face \r\n     wash&quot;,&quot;chips&quot;,&quot;Biscuits&quot;,&quot;Health \r\n     Supplement&quot;,&quot;Chocolate&quot;,&quot;Stationary&quot;,&quot;Coffee&quot;,};\r\n        float[] productPrice = new float[]{24,65,30,79,10,20,140,20,150,80,}; \r\n         \r\n            \r\n           int productNameMaxlength=0;\r\n\t   int productTypeMaxlength=0;\r\n           \r\n\t   \r\n\r\n        for (String productName1 : productName) {\r\n            if (productNameMaxlength &lt; productName1.length()) {\r\n                productNameMaxlength = productName1.length();\r\n            }\r\n        }\r\n \r\n\r\n        for (String productType1 : productType) {\r\n            if (productTypeMaxlength &lt; productType1.length()) {\r\n                productTypeMaxlength = productType1.length();\r\n            }\r\n        }\r\n\r\n\t\r\n        \r\n\t   for(int i=0;i&lt;productType.length;i++)\r\n\r\n\t   { \r\n                  System.out.print(i);\r\n\r\n\t\t  System.out.print(&quot;\\t&quot;);\r\n               \r\n                  System.out.print(productId[i]);\r\n                  \r\n                  System.out.print(&quot;\\t&quot;);\r\n\t\t   \r\n                  System.out.print(productName[i]);\r\n\r\n\t\t   for(int j=0;j&lt;=productNameMaxlength-productName[i].length\r\n         ();j++)\r\n\r\n\t\t   {\r\n\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\r\n\t\t   }\r\n\r\n\t\t   System.out.print(&quot;\\t&quot;);\r\n\r\n\t\t   System.out.print(productType[i]);\r\n\r\n\t\t   for(int j=0;j&lt;=productTypeMaxlength-productType[i].length\r\n        ();j++)\r\n\r\n\t\t   {\r\n\t\t\t   System.out.print(&quot; &quot;);\r\n\t\t   }\r\n                   \r\n                   System.out.print(&quot;\\t&quot;);\r\n\t\t  \r\n\t\t   System.out.println(productPrice[i]);\r\n              }           \r\n          }\r\n    \r\n        }\r\n       and output is--\r\n      Sr.No\t ID\t    NAME            TYPE\t\t       PRICE\r\n       0\t1001\tCadbury       \tChocolate         \t20.0\r\n       1\t1002\tParker Vector \tStationary        \t150.0\r\n       2\t1003\tNescafe       \tCoffee            \t80.0\r\n       3\t1004\tkissan jam    \tJam               \t65.0\r\n       4\t1005\tHerbal oil    \tOil               \t30.0\r\n       5\t1006\tGarnier man&#39;s \tFace wash         \t79.0\r\n       6\t1007\tLays chips    \tchips             \t10.0\r\n       7\t1008\tbiscuits      \tBiscuits          \t20.0\r\n       8\t1009\tBournvita     \tHealth Supplement \t140.0\r\n       9\t1010\tPepsi         \tCold Drink        \t24.0\r\n\r\nSince I am unable to answer my question where I have ask my question because of block to ask question and answer I am quoting my answer and this was a different kind of array format I feel. ","title":"How to align String on console output","body":"<p>In my example the array contains character string's with different length and due to that I was unable to arrange string and other strings of different arrays were mis-match on console. with a different concept I could arrange those\narrays on console my codes are as below.</p>\n\n<pre><code>package arrayformat;\n\n /**\n *\n * @author Sunil\n */\n public class ArrayFormat {\n\n\n\n  /**\n  * @param args the command line arguments\n  */\n\n  public static void main(String[] args) {\n\n  int[] productId = new int[]  \n {1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,};\n   String[] productName= new String[]{\"Pepsi\",\"kissan jam\",\"Herbal \n oil\",\"Garnier man's\",\"Lays chips\",\"biscuits\",\"Bournvita\",\"Cadbury\",\"Parker \n Vector\",\"Nescafe\",};\n   String[] productType = new String[]{\"Cold Drink\",\"Jam\",\"Oil\",\"Face \n wash\",\"chips\",\"Biscuits\",\"Health \n Supplement\",\"Chocolate\",\"Stationary\",\"Coffee\",};\n    float[] productPrice = new float[]{24,65,30,79,10,20,140,20,150,80,}; \n\n\n       int productNameMaxlength=0;\n   int productTypeMaxlength=0;\n\n\n\n    for (String productName1 : productName) {\n        if (productNameMaxlength &lt; productName1.length()) {\n            productNameMaxlength = productName1.length();\n        }\n    }\n\n\n    for (String productType1 : productType) {\n        if (productTypeMaxlength &lt; productType1.length()) {\n            productTypeMaxlength = productType1.length();\n        }\n    }\n\n\n\n   for(int i=0;i&lt;productType.length;i++)\n\n   { \n              System.out.print(i);\n\n      System.out.print(\"\\t\");\n\n              System.out.print(productId[i]);\n\n              System.out.print(\"\\t\");\n\n              System.out.print(productName[i]);\n\n       for(int j=0;j&lt;=productNameMaxlength-productName[i].length\n     ();j++)\n\n       {\n\n        System.out.print(\" \");\n\n       }\n\n       System.out.print(\"\\t\");\n\n       System.out.print(productType[i]);\n\n       for(int j=0;j&lt;=productTypeMaxlength-productType[i].length\n    ();j++)\n\n       {\n           System.out.print(\" \");\n       }\n\n               System.out.print(\"\\t\");\n\n       System.out.println(productPrice[i]);\n          }           \n      }\n\n    }\n   and output is--\n  Sr.No  ID     NAME            TYPE               PRICE\n   0    1001    Cadbury         Chocolate           20.0\n   1    1002    Parker Vector   Stationary          150.0\n   2    1003    Nescafe         Coffee              80.0\n   3    1004    kissan jam      Jam                 65.0\n   4    1005    Herbal oil      Oil                 30.0\n   5    1006    Garnier man's   Face wash           79.0\n   6    1007    Lays chips      chips               10.0\n   7    1008    biscuits        Biscuits            20.0\n   8    1009    Bournvita       Health Supplement   140.0\n   9    1010    Pepsi           Cold Drink          24.0\n</code></pre>\n\n<p>Since I am unable to answer my question where I have ask my question because of block to ask question and answer I am quoting my answer and this was a different kind of array format I feel. </p>\n"},{"tags":[],"owner":{"account_id":2835239,"reputation":1221,"user_id":2435969,"accept_rate":7,"display_name":"Prabhat Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470737265,"creation_date":1470737265,"answer_id":38847834,"question_id":12793593,"body_markdown":"Formatting of output can be  done using the System.out.format(&quot;&quot;,&quot;&quot;) method this method contain two  input parameter  first define the formatting style and second  define value to be print.  Let us assume you want to the  n digit value right align. you will pass the first parameter &quot;%4d&quot;.          \r\n\r\n**For the left align use -ve %-nd** \r\n\r\n**For right align use +ve %nd** \r\n\r\n     for(int i=1; i&lt;13; i++){\r\n           for(int j=1; j&lt;13; j++){\r\n                System.out.format(&quot;%4d&quot;, i * j);  //each number formatted to a width of 4 so use %4d in the format method.\r\n        }\r\n        System.out.println();  // To move to the next line.\r\n    }","title":"How to align String on console output","body":"<p>Formatting of output can be  done using the System.out.format(\"\",\"\") method this method contain two  input parameter  first define the formatting style and second  define value to be print.  Let us assume you want to the  n digit value right align. you will pass the first parameter \"%4d\".          </p>\n\n<p><strong>For the left align use -ve %-nd</strong> </p>\n\n<p><strong>For right align use +ve %nd</strong> </p>\n\n<pre><code> for(int i=1; i&lt;13; i++){\n       for(int j=1; j&lt;13; j++){\n            System.out.format(\"%4d\", i * j);  //each number formatted to a width of 4 so use %4d in the format method.\n    }\n    System.out.println();  // To move to the next line.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23720399,"reputation":15,"user_id":17741027,"display_name":"v22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679415399,"creation_date":1679415399,"answer_id":75803740,"question_id":12793593,"body_markdown":"I made an OutputFormatter class which formats the Strings you give it:\r\n\r\n    OutputFormatter formatter = new OutputFormatter();\r\n    formatter.add(&quot;Asus&quot;, &quot;20000&quot;);\r\n    formatter.add(&quot;INTEL&quot;, &quot;45000&quot;);\r\n    formatter.add(&quot;Nvidia gtx 1050ti&quot;, &quot;17000&quot;);\r\n    formatter.add(&quot;Asus&quot;, &quot;18000&quot;);\r\n    formatter.add(&quot;Samsung&quot;, &quot;20000&quot;);\r\n    formatter.add(&quot;Coolermaster&quot;, &quot;20000&quot;);\r\n    formatter.add(&quot;Ortis&quot;, &quot;4000&quot;);\r\n    formatter.add(&quot;Asus&quot;, &quot;4000&quot;);\r\n    System.out.println(formatter.format());\r\n\r\nThe output looks like this:\r\n\r\n    Asus              20000\r\n    INTEL             45000\r\n    Nvidia gtx 1050ti 17000\r\n    Asus              18000\r\n    Samsung           20000\r\n    Coolermaster      20000\r\n    Ortis             4000 \r\n    Asus              4000 \r\n\r\nYou can give the `add()` method on the OutputFormatter as much Strings as you would like, it takes them all into account.\r\n\r\n\r\n----------\r\n\r\nThis is the OutputFormatter class:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class OutputFormatter {\r\n        private List&lt;String[]&gt; contents;\r\n\r\n        public OutputFormatter() {\r\n            contents = new ArrayList&lt;&gt;();\r\n        }\r\n\r\n        public void add(String... fields) {\r\n            contents.add(fields);\r\n        }\r\n\r\n        public void clear() {\r\n            contents.clear();\r\n        }\r\n\r\n        public String format() {\r\n            StringBuilder ret = new StringBuilder();\r\n            List&lt;Integer&gt; lengths = new ArrayList&lt;&gt;();\r\n            int maxContentLen = 0;\r\n            for (String[] row : contents) {\r\n                maxContentLen = Math.max(maxContentLen, row.length);\r\n            }\r\n\r\n            for (int i = 0; i &lt; maxContentLen; i++) {\r\n                int len = 1;\r\n                for (String[] row : contents) {\r\n                    try {\r\n                        len = Math.max(len, row[i].length());\r\n                    } catch (IndexOutOfBoundsException ignore) {}\r\n                }\r\n                lengths.add(len);\r\n            }\r\n\r\n            for (String[] row : contents) {\r\n                for (int i = 0; i &lt; row.length; i++) {\r\n                    ret.append(row[i] + &quot; &quot;.repeat(lengths.get(i) - row[i].length() + 1));\r\n                }\r\n                ret.append(System.lineSeparator());\r\n            }\r\n\r\n            return ret.toString();\r\n        }\r\n    }","title":"How to align String on console output","body":"<p>I made an OutputFormatter class which formats the Strings you give it:</p>\n<pre><code>OutputFormatter formatter = new OutputFormatter();\nformatter.add(&quot;Asus&quot;, &quot;20000&quot;);\nformatter.add(&quot;INTEL&quot;, &quot;45000&quot;);\nformatter.add(&quot;Nvidia gtx 1050ti&quot;, &quot;17000&quot;);\nformatter.add(&quot;Asus&quot;, &quot;18000&quot;);\nformatter.add(&quot;Samsung&quot;, &quot;20000&quot;);\nformatter.add(&quot;Coolermaster&quot;, &quot;20000&quot;);\nformatter.add(&quot;Ortis&quot;, &quot;4000&quot;);\nformatter.add(&quot;Asus&quot;, &quot;4000&quot;);\nSystem.out.println(formatter.format());\n</code></pre>\n<p>The output looks like this:</p>\n<pre><code>Asus              20000\nINTEL             45000\nNvidia gtx 1050ti 17000\nAsus              18000\nSamsung           20000\nCoolermaster      20000\nOrtis             4000 \nAsus              4000 \n</code></pre>\n<p>You can give the <code>add()</code> method on the OutputFormatter as much Strings as you would like, it takes them all into account.</p>\n<hr />\n<p>This is the OutputFormatter class:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class OutputFormatter {\n    private List&lt;String[]&gt; contents;\n\n    public OutputFormatter() {\n        contents = new ArrayList&lt;&gt;();\n    }\n\n    public void add(String... fields) {\n        contents.add(fields);\n    }\n\n    public void clear() {\n        contents.clear();\n    }\n\n    public String format() {\n        StringBuilder ret = new StringBuilder();\n        List&lt;Integer&gt; lengths = new ArrayList&lt;&gt;();\n        int maxContentLen = 0;\n        for (String[] row : contents) {\n            maxContentLen = Math.max(maxContentLen, row.length);\n        }\n\n        for (int i = 0; i &lt; maxContentLen; i++) {\n            int len = 1;\n            for (String[] row : contents) {\n                try {\n                    len = Math.max(len, row[i].length());\n                } catch (IndexOutOfBoundsException ignore) {}\n            }\n            lengths.add(len);\n        }\n\n        for (String[] row : contents) {\n            for (int i = 0; i &lt; row.length; i++) {\n                ret.append(row[i] + &quot; &quot;.repeat(lengths.get(i) - row[i].length() + 1));\n            }\n            ret.append(System.lineSeparator());\n        }\n\n        return ret.toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":374852,"reputation":5831,"user_id":725306,"accept_rate":97,"display_name":"Mohammad Faisal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70334,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":12793649,"answer_count":4,"score":17,"last_activity_date":1679415399,"creation_date":1349761926,"question_id":12793593,"body_markdown":"I&#39;ve to write code for:\r\n\r\n![Multiplication Tables  Description: Print out the grade school multiplication table upto 12*12][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/pmNEJ.png\r\n\r\nI&#39;d written the code:\r\n\r\n    public class tables {\r\n        public static void main(String[] args) {\r\n            //int[][] table = new int[12][12];\r\n            String table=&quot;&quot;;\r\n            for(int i=1; i&lt;13; i++){\r\n                for(int j=1; j&lt;13; j++){\r\n                    //table[i-1][j-1] = i*j;\r\n                    table+=(i*j)+&quot; &quot;;\r\n                }\r\n                System.out.println(table.trim());\r\n                table=&quot;&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\nBut the problem is with the output format. I need the output in a matrix like fashion, each number formatted to a width of 4 (the numbers are right-aligned and strip out leading/trailing spaces on each line). I&#39;d tried **google** but not find any good solution to my problem. Can anybody help me out?","title":"How to align String on console output","body":"<p>I've to write code for:</p>\n\n<p><img src=\"https://i.stack.imgur.com/pmNEJ.png\" alt=\"Multiplication Tables  Description: Print out the grade school multiplication table upto 12*12\"></p>\n\n<p>I'd written the code:</p>\n\n<pre><code>public class tables {\n    public static void main(String[] args) {\n        //int[][] table = new int[12][12];\n        String table=\"\";\n        for(int i=1; i&lt;13; i++){\n            for(int j=1; j&lt;13; j++){\n                //table[i-1][j-1] = i*j;\n                table+=(i*j)+\" \";\n            }\n            System.out.println(table.trim());\n            table=\"\";\n        }\n    }\n}\n</code></pre>\n\n<p>But the problem is with the output format. I need the output in a matrix like fashion, each number formatted to a width of 4 (the numbers are right-aligned and strip out leading/trailing spaces on each line). I'd tried <strong>google</strong> but not find any good solution to my problem. Can anybody help me out?</p>\n"},{"tags":["java","char","keylistener"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1679417669,"post_id":75803647,"comment_id":133717200,"body_markdown":"keyPressed events *never* return a valid character from getKeyChar().  Only keyTyped events will contain a character.  See [the KeyEvent documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/event/KeyEvent.html) for details.  That aside, the auto-repeat delay doesn’t matter if you just monitor the pressing and releasing of the key, rather than looking for typed characters.","body":"keyPressed events <i>never</i> return a valid character from getKeyChar().  Only keyTyped events will contain a character.  See <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/event/KeyEvent.html\" rel=\"nofollow noreferrer\">the KeyEvent documentation</a> for details.  That aside, the auto-repeat delay doesn’t matter if you just monitor the pressing and releasing of the key, rather than looking for typed characters."}],"owner":{"account_id":20813192,"reputation":1,"user_id":15286611,"display_name":"Albin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679414904,"creation_date":1679414904,"question_id":75803647,"body_markdown":"I just have a quick question about KeyListener in java. When you add a KeyListener to an object and for example tells it to just print out the pressed characters, if you hold down a button there isn&#39;t a constant flow in the console. I was just wandering if anyone know how to make the program read the character constantly without the pause after the first one.\r\n\r\nI found something online trying to say that you should not update it with the KeyEvent but instead with a different method, I tried something like this but pretty sure I didn&#39;t understand him correctly, this code doesn&#39;t work at all.\r\n\r\n```\r\npublic static void main(String[] args)\r\n\t{\r\n\t\tnew Key_List();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyPressed(KeyEvent k1)\r\n\t{\r\n\t\tchar movem = Character.toLowerCase(k1.getKeyChar());\r\n\t\tupdate(movem);\r\n\t}\r\n\r\n\tprivate void update(char movem)\r\n\t{\r\n\t\tSystem.out.println(movem);\t\r\n\t}\r\n```\r\n","title":"Log KeyChar without the initial pause","body":"<p>I just have a quick question about KeyListener in java. When you add a KeyListener to an object and for example tells it to just print out the pressed characters, if you hold down a button there isn't a constant flow in the console. I was just wandering if anyone know how to make the program read the character constantly without the pause after the first one.</p>\n<p>I found something online trying to say that you should not update it with the KeyEvent but instead with a different method, I tried something like this but pretty sure I didn't understand him correctly, this code doesn't work at all.</p>\n<pre><code>public static void main(String[] args)\n    {\n        new Key_List();\n    }\n\n    @Override\n    public void keyPressed(KeyEvent k1)\n    {\n        char movem = Character.toLowerCase(k1.getKeyChar());\n        update(movem);\n    }\n\n    private void update(char movem)\n    {\n        System.out.println(movem);  \n    }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9435,"page":557,"page_size":100}
