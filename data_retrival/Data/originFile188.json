{"items":[{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":226736,"reputation":2243,"user_id":487940,"accept_rate":79,"display_name":"harsimranb"},"score":0,"creation_date":1694490802,"post_id":77085994,"comment_id":135894067,"body_markdown":"If there was a way to ignore the byte-array size limits or save this in chunks, it could solve the problem.  But haven&#39;t found anything on this.","body":"If there was a way to ignore the byte-array size limits or save this in chunks, it could solve the problem.  But haven&#39;t found anything on this."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":2,"creation_date":1694514620,"post_id":77085994,"comment_id":135897719,"body_markdown":"Try forking POI and changing POIFSFileSystem to use a FileBackedDataSource instead of a ByteArrayBackedDataSource. Byte Arrays can only support 2Gb but files can support much larger data sets.","body":"Try forking POI and changing POIFSFileSystem to use a FileBackedDataSource instead of a ByteArrayBackedDataSource. Byte Arrays can only support 2Gb but files can support much larger data sets."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":1,"creation_date":1694517479,"post_id":77085994,"comment_id":135898318,"body_markdown":"POI already has TempFilePOIFSFileSystem - use this instead of POIFSFileSystem. It should support larger data than POIFSFileSystem.","body":"POI already has TempFilePOIFSFileSystem - use this instead of POIFSFileSystem. It should support larger data than POIFSFileSystem."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":1,"creation_date":1694517886,"post_id":77085994,"comment_id":135898399,"body_markdown":"So I found some history and it traces back to https://stackoverflow.com/questions/55658495/apache-poi-encrypting-xlsx-file-greater-than-2gb-fails - it seems like TempFilePOIFSFileSystem is not likely to be enough. POI uses ints to track size and these are likely to overflow when the data is too big.","body":"So I found some history and it traces back to <a href=\"https://stackoverflow.com/questions/55658495/apache-poi-encrypting-xlsx-file-greater-than-2gb-fails\" title=\"apache poi encrypting xlsx file greater than 2gb fails\">stackoverflow.com/questions/55658495/&hellip;</a> - it seems like TempFilePOIFSFileSystem is not likely to be enough. POI uses ints to track size and these are likely to overflow when the data is too big."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":1,"creation_date":1694518575,"post_id":77085994,"comment_id":135898556,"body_markdown":"There have been a few code changes since that previous issue - so it might still be worth trying TempFilePOIFSFileSystem to see if it works.","body":"There have been a few code changes since that previous issue - so it might still be worth trying TempFilePOIFSFileSystem to see if it works."},{"owner":{"account_id":226736,"reputation":2243,"user_id":487940,"accept_rate":79,"display_name":"harsimranb"},"score":0,"creation_date":1694533517,"post_id":77085994,"comment_id":135902222,"body_markdown":"Thank you! `TempFilePOIFSFileSystem` worked for file-size upwards of 3GB. You can add this as the answer.","body":"Thank you! <code>TempFilePOIFSFileSystem</code> worked for file-size upwards of 3GB. You can add this as the answer."}],"answers":[{"tags":[],"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694549342,"creation_date":1694549342,"answer_id":77092388,"question_id":77085994,"body_markdown":"POI 5.2.3 has TempFilePOIFSFileSystem - a subclass of POIFSFileSystem. TempFilePOIFSFileSystem should be used when encrypting very large files. POIFSFileSystem uses a byte array to process the data and this can only handle 2Gb of decompressed data.","title":"Apache POI Password-Protect Large 2GB PowerPoint File","body":"<p>POI 5.2.3 has TempFilePOIFSFileSystem - a subclass of POIFSFileSystem. TempFilePOIFSFileSystem should be used when encrypting very large files. POIFSFileSystem uses a byte array to process the data and this can only handle 2Gb of decompressed data.</p>\n"}],"owner":{"account_id":226736,"reputation":2243,"user_id":487940,"accept_rate":79,"display_name":"harsimranb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77092388,"answer_count":1,"score":0,"last_activity_date":1694549342,"creation_date":1694490706,"question_id":77085994,"body_markdown":"I am trying to password-encrypt very large PPTX files (2GB) using Apache POI.  How can I use Apache POI Standard Encryption to encrypt 2GB PPTX files (there are many videos embedded in the PowerPoint)?\r\n\r\nI&#39;ve set `IOUtils.setByteArrayMaxOverride(Integer.MAX_VALUE);` (to the maximum allowed value) and also played around with other [large file configurations](https://poi.apache.org/components/configuration.html):\r\n```\r\nZipSecureFile.setMinInflateRatio(-1.0);\r\nZipInputStreamZipEntrySource.setThresholdBytesForTempFiles(50000000);\r\nZipPackage.setUseTempFilePackageParts(true);\r\n```\r\nRegardless, I&#39;m getting the same **exception**:\r\n```\r\nException in thread &quot;main&quot; org.apache.poi.util.RecordFormatException: Can&#39;t allocate an array &gt; 2147483647\r\n        at org.apache.poi.util.IOUtils.safelyAllocateCheck(IOUtils.java:559)\r\n        at org.apache.poi.util.IOUtils.safelyAllocate(IOUtils.java:547)\r\n        at org.apache.poi.poifs.nio.ByteArrayBackedDataSource.extend(ByteArrayBackedDataSource.java:86)\r\n        at org.apache.poi.poifs.nio.ByteArrayBackedDataSource.write(ByteArrayBackedDataSource.java:63)\r\n        at org.apache.poi.poifs.filesystem.POIFSFileSystem.createBlockIfNeeded(POIFSFileSystem.java:493)\r\n        at org.apache.poi.poifs.filesystem.POIFSStream$StreamBlockByteBuffer.createBlockIfNeeded(POIFSStream.java:272)\r\n        at org.apache.poi.poifs.filesystem.POIFSStream$StreamBlockByteBuffer.write(POIFSStream.java:294)\r\n        at org.apache.poi.poifs.filesystem.DocumentOutputStream.write(DocumentOutputStream.java:144)\r\n        at org.apache.poi.poifs.filesystem.DocumentOutputStream.write(DocumentOutputStream.java:124)\r\n        at java.base/java.io.FilterOutputStream.write(FilterOutputStream.java:87)\r\n        at java.base/java.io.FilterOutputStream.write(FilterOutputStream.java:137)\r\n        at org.apache.poi.util.LittleEndianOutputStream.write(LittleEndianOutputStream.java:89)\r\n        at org.apache.poi.util.IOUtils.copy(IOUtils.java:410)\r\n        at org.apache.poi.util.IOUtils.copy(IOUtils.java:387)\r\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.processPOIFSWriterEvent(StandardEncryptor.java:201)\r\n        at org.apache.poi.poifs.filesystem.POIFSDocument.&lt;init&gt;(POIFSDocument.java:112)\r\n        at org.apache.poi.poifs.filesystem.DirectoryNode.createDocument(DirectoryNode.java:380)\r\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.writeToPOIFS(StandardEncryptor.java:185)\r\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.close(StandardEncryptor.java:175)\r\n        at Program.encryptPPTXFile(Program.java:108)\r\n```\r\n\r\n**Here is my code:**\r\n```\r\ntry(POIFSFileSystem fs = new POIFSFileSystem()) {\r\n    EncryptionInfo info = new EncryptionInfo(EncryptionMode.standard);\r\n    Encryptor encryptor = info.getEncryptor();\r\n    encryptor.confirmPassword(password);\r\n\r\n    // Read in an existing OOXML file and write to encrypted output stream\r\n    try (OPCPackage opc = OPCPackage.open(inputPath);\r\n        OutputStream os = encryptor.getDataStream(fs)) {\r\n        opc.save(os);\r\n    }\r\n\r\n    // Write out the encrypted version\r\n    try (FileOutputStream fos = new FileOutputStream(outputPath)) {\r\n        fs.writeFilesystem(fos);\r\n    }\r\n\r\n    System.out.println(&quot;Document successfully encrypted&quot;);\r\n\r\n} catch (IOException | GeneralSecurityException | InvalidFormatException e) {\r\n    e.printStackTrace();\r\n}\r\n```","title":"Apache POI Password-Protect Large 2GB PowerPoint File","body":"<p>I am trying to password-encrypt very large PPTX files (2GB) using Apache POI.  How can I use Apache POI Standard Encryption to encrypt 2GB PPTX files (there are many videos embedded in the PowerPoint)?</p>\n<p>I've set <code>IOUtils.setByteArrayMaxOverride(Integer.MAX_VALUE);</code> (to the maximum allowed value) and also played around with other <a href=\"https://poi.apache.org/components/configuration.html\" rel=\"nofollow noreferrer\">large file configurations</a>:</p>\n<pre><code>ZipSecureFile.setMinInflateRatio(-1.0);\nZipInputStreamZipEntrySource.setThresholdBytesForTempFiles(50000000);\nZipPackage.setUseTempFilePackageParts(true);\n</code></pre>\n<p>Regardless, I'm getting the same <strong>exception</strong>:</p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.poi.util.RecordFormatException: Can't allocate an array &gt; 2147483647\n        at org.apache.poi.util.IOUtils.safelyAllocateCheck(IOUtils.java:559)\n        at org.apache.poi.util.IOUtils.safelyAllocate(IOUtils.java:547)\n        at org.apache.poi.poifs.nio.ByteArrayBackedDataSource.extend(ByteArrayBackedDataSource.java:86)\n        at org.apache.poi.poifs.nio.ByteArrayBackedDataSource.write(ByteArrayBackedDataSource.java:63)\n        at org.apache.poi.poifs.filesystem.POIFSFileSystem.createBlockIfNeeded(POIFSFileSystem.java:493)\n        at org.apache.poi.poifs.filesystem.POIFSStream$StreamBlockByteBuffer.createBlockIfNeeded(POIFSStream.java:272)\n        at org.apache.poi.poifs.filesystem.POIFSStream$StreamBlockByteBuffer.write(POIFSStream.java:294)\n        at org.apache.poi.poifs.filesystem.DocumentOutputStream.write(DocumentOutputStream.java:144)\n        at org.apache.poi.poifs.filesystem.DocumentOutputStream.write(DocumentOutputStream.java:124)\n        at java.base/java.io.FilterOutputStream.write(FilterOutputStream.java:87)\n        at java.base/java.io.FilterOutputStream.write(FilterOutputStream.java:137)\n        at org.apache.poi.util.LittleEndianOutputStream.write(LittleEndianOutputStream.java:89)\n        at org.apache.poi.util.IOUtils.copy(IOUtils.java:410)\n        at org.apache.poi.util.IOUtils.copy(IOUtils.java:387)\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.processPOIFSWriterEvent(StandardEncryptor.java:201)\n        at org.apache.poi.poifs.filesystem.POIFSDocument.&lt;init&gt;(POIFSDocument.java:112)\n        at org.apache.poi.poifs.filesystem.DirectoryNode.createDocument(DirectoryNode.java:380)\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.writeToPOIFS(StandardEncryptor.java:185)\n        at org.apache.poi.poifs.crypt.standard.StandardEncryptor$StandardCipherOutputStream.close(StandardEncryptor.java:175)\n        at Program.encryptPPTXFile(Program.java:108)\n</code></pre>\n<p><strong>Here is my code:</strong></p>\n<pre><code>try(POIFSFileSystem fs = new POIFSFileSystem()) {\n    EncryptionInfo info = new EncryptionInfo(EncryptionMode.standard);\n    Encryptor encryptor = info.getEncryptor();\n    encryptor.confirmPassword(password);\n\n    // Read in an existing OOXML file and write to encrypted output stream\n    try (OPCPackage opc = OPCPackage.open(inputPath);\n        OutputStream os = encryptor.getDataStream(fs)) {\n        opc.save(os);\n    }\n\n    // Write out the encrypted version\n    try (FileOutputStream fos = new FileOutputStream(outputPath)) {\n        fs.writeFilesystem(fos);\n    }\n\n    System.out.println(&quot;Document successfully encrypted&quot;);\n\n} catch (IOException | GeneralSecurityException | InvalidFormatException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","sockets","io"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1694548151,"post_id":77092172,"comment_id":135904981,"body_markdown":"Have you considered having two threads for each client, one for reading from the socket and one for writing to it? The reader thread is normally blocking on a read.","body":"Have you considered having two threads for each client, one for reading from the socket and one for writing to it? The reader thread is normally blocking on a read."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1694548317,"post_id":77092172,"comment_id":135905024,"body_markdown":"@PresidentJamesK.Polk I have, but I still need to figure out how to avoid both checking the condition all the time and introducing synchronizers shared by clients and the server. When is it time to read?","body":"@PresidentJamesK.Polk I have, but I still need to figure out how to avoid both checking the condition all the time and introducing synchronizers shared by clients and the server. When is it time to read?"},{"owner":{"account_id":25589,"reputation":562121,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":0,"creation_date":1694551029,"post_id":77092172,"comment_id":135905505,"body_markdown":"Sockets operate in blocking mode by default.  So you could simply read from it unconditionally and let it block the calling thread until data arrives. If you don&#39;t want to block the calling thread, then you will have to use non-blocking/asynchronous I/O, such as via a `Selector`, to notify you when data is available to read.","body":"Sockets operate in blocking mode by default.  So you could simply read from it unconditionally and let it block the calling thread until data arrives. If you don&#39;t want to block the calling thread, then you will have to use non-blocking/asynchronous I/O, such as via a <code>Selector</code>, to notify you when data is available to read."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694564166,"post_id":77092172,"comment_id":135906983,"body_markdown":"&quot;How does that server know whether a client wrote something so that it can read from the socket&#39;s input stream?&quot;: *by reading from the input stream.* No doubt someone will suggest `InputStream.available()`, but that doesn&#39;t guarantee that a complete message is available, unless you magically know the length in advance, so it isn&#39;t a viable solution.","body":"&quot;How does that server know whether a client wrote something so that it can read from the socket&#39;s input stream?&quot;: <i>by reading from the input stream.</i> No doubt someone will suggest <code>InputStream.available()</code>, but that doesn&#39;t guarantee that a complete message is available, unless you magically know the length in advance, so it isn&#39;t a viable solution."}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694547130,"creation_date":1694547130,"question_id":77092172,"body_markdown":"I&#39;m trying to implement a ridiculously simplistic chat client and a chat server. My goal is to learn to get comfortable with `Socket`s rather than come up with a reasonable chat implementation. However, I want to ensure that common sense is respected too. This question is about server code\r\n\r\nSuppose, a connection was established (`accept()` returned) and now the server needs to service that particular client (using a separate thread as it should)\r\n```java\r\npublic class SimpleChatServer {\r\n    // possibly something else\r\n    private static final ExecutorService executorService = Executors.newCachedThreadPool();\r\n    private static final List&lt;OutputStream&gt; outputStreamList = new ArrayList&lt;&gt;();\r\n\r\n    public static void main(String[] args) {\r\n        start();\r\n    }\r\n\r\n    @SneakyThrows\r\n    private static void start() {\r\n        try (var serverSocket = new ServerSocket(5000)) {\r\n            while (true) {\r\n                Socket socket = serverSocket.accept();\r\n                executorService.submit(() -&gt; serviceClient(socket));\r\n            }\r\n        }\r\n    }\r\n```\r\nNow, I need a reasonable `serviceClient()` implementation. The first step is to register that socket&#39;s output stream because the server needs to read incoming strings and &quot;broadcast&quot; them to every connected client\r\n```java\r\n    private static void serviceClient(Socket socket) {\r\n        registerOutputStream(socket);\r\n        // some other code I haven&#39;t written yet\r\n    }\r\n```\r\n```java\r\n    private static void registerOutputStream(Socket socket) throws IOException {\r\n        // so that I &quot;foreach&quot; it once I receive a message to broadcast\r\n        outputStreamList.add(socket.getOutputStream());\r\n    }\r\n```\r\nNow I&#39;m at a loss. How does that server know whether a client wrote something so that it can read from the socket&#39;s input stream? I need the code that basically says, &quot;If the input stream has something, read and broadcast it to clients; if not, just keep on waiting till it does&quot;. Sounds a lot like an infinite loop with constant condition checks (inefficient). Or a client needs to be able to communicate to the server, &quot;I wrote, you can read&quot;. It could be implemented using concurrency synchronization mechanisms, but it&#39;s a weird design feature to have a client and a server to have shared synchronization objects (even for such a simplistic app). What is the reasonable solution to this?\r\n\r\nI don&#39;t think [&quot;have you looked asynchronous IO&quot;][1] may count for an adequate answer. If it&#39;s indeed what I should consider, can you provide some details (possibly simple code snippets)? I&#39;m not very familiar with that package\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/1941929/22186847","title":"Server reading from the socket&#39;s input stream only if it has data","body":"<p>I'm trying to implement a ridiculously simplistic chat client and a chat server. My goal is to learn to get comfortable with <code>Socket</code>s rather than come up with a reasonable chat implementation. However, I want to ensure that common sense is respected too. This question is about server code</p>\n<p>Suppose, a connection was established (<code>accept()</code> returned) and now the server needs to service that particular client (using a separate thread as it should)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimpleChatServer {\n    // possibly something else\n    private static final ExecutorService executorService = Executors.newCachedThreadPool();\n    private static final List&lt;OutputStream&gt; outputStreamList = new ArrayList&lt;&gt;();\n\n    public static void main(String[] args) {\n        start();\n    }\n\n    @SneakyThrows\n    private static void start() {\n        try (var serverSocket = new ServerSocket(5000)) {\n            while (true) {\n                Socket socket = serverSocket.accept();\n                executorService.submit(() -&gt; serviceClient(socket));\n            }\n        }\n    }\n</code></pre>\n<p>Now, I need a reasonable <code>serviceClient()</code> implementation. The first step is to register that socket's output stream because the server needs to read incoming strings and &quot;broadcast&quot; them to every connected client</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void serviceClient(Socket socket) {\n        registerOutputStream(socket);\n        // some other code I haven't written yet\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void registerOutputStream(Socket socket) throws IOException {\n        // so that I &quot;foreach&quot; it once I receive a message to broadcast\n        outputStreamList.add(socket.getOutputStream());\n    }\n</code></pre>\n<p>Now I'm at a loss. How does that server know whether a client wrote something so that it can read from the socket's input stream? I need the code that basically says, &quot;If the input stream has something, read and broadcast it to clients; if not, just keep on waiting till it does&quot;. Sounds a lot like an infinite loop with constant condition checks (inefficient). Or a client needs to be able to communicate to the server, &quot;I wrote, you can read&quot;. It could be implemented using concurrency synchronization mechanisms, but it's a weird design feature to have a client and a server to have shared synchronization objects (even for such a simplistic app). What is the reasonable solution to this?</p>\n<p>I don't think <a href=\"https://stackoverflow.com/a/1941929/22186847\">&quot;have you looked asynchronous IO&quot;</a> may count for an adequate answer. If it's indeed what I should consider, can you provide some details (possibly simple code snippets)? I'm not very familiar with that package</p>\n"},{"tags":["java","android","firebase","google-play-services"],"answers":[{"tags":[],"owner":{"account_id":3478782,"reputation":33,"user_id":2911379,"display_name":"Ataman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689889302,"creation_date":1689889302,"answer_id":76733888,"question_id":73790105,"body_markdown":"have you found a solution how to get GoogleSignInAccount from Google Play Games v2 sign in method? Actually we need only AuthCredential to pass in firebaseAuthWithPlayGames().\r\n\r\n    AuthCredential credential = PlayGamesAuthProvider.getCredential(googleSignInAccount.getServerAuthCode());\r\n\r\nBut how to get this GoogleSignInAccount?\r\nMay be GoogleSignIn.getLastSignedInAccount(appContext); will pass, I haven&#39;t checked it yet.","title":"How to get GoogleSignInAccount object when signing in with Google Play Games Services V2","body":"<p>have you found a solution how to get GoogleSignInAccount from Google Play Games v2 sign in method? Actually we need only AuthCredential to pass in firebaseAuthWithPlayGames().</p>\n<pre><code>AuthCredential credential = PlayGamesAuthProvider.getCredential(googleSignInAccount.getServerAuthCode());\n</code></pre>\n<p>But how to get this GoogleSignInAccount?\nMay be GoogleSignIn.getLastSignedInAccount(appContext); will pass, I haven't checked it yet.</p>\n"},{"tags":[],"owner":{"account_id":15920776,"reputation":1,"user_id":12985027,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694546561,"creation_date":1694546436,"answer_id":77092109,"question_id":73790105,"body_markdown":"You need only AuthCode from PlayGamesClient you can get it like this:\r\n   \r\n\r\n    val gamesSignInClient = PlayGames.getGamesSignInClient(this) /* Activity */\r\n        gamesSignInClient\r\n            .requestServerSideAccess(\r\n                getString(R.string.default_web_client_id),  /* Your web client id */\r\n                false\r\n            )\r\n            .addOnCompleteListener { task: Task&lt;String?&gt; -&gt;\r\n                if (task.isSuccessful) {\r\n                    val serverAuthToken = task.result\r\n                    if (serverAuthToken != null) {\r\n                        firebaseAuthWithPlayGames(serverAuthToken)\r\n                    }\r\n                    \r\n                } else {\r\n                    // Failed to retrieve authentication code.\r\n                    Toast.makeText(\r\n                        baseContext,\r\n                        &quot;Authentication failed.&quot;,\r\n                        Toast.LENGTH_SHORT,\r\n                    ).show()\r\n                }\r\n            }\r\n\r\n    private fun firebaseAuthWithPlayGames(serverAuthCode: String) {\r\n        val auth = Firebase.auth\r\n        val credential = PlayGamesAuthProvider.getCredential(serverAuthCode)\r\n        auth.signInWithCredential(credential)\r\n            .addOnCompleteListener(this) { task -&gt;\r\n                if (task.isSuccessful) {\r\n                    // Sign in success, update UI with the signed-in user&#39;s information\r\n                    Log.d(TAG, &quot;signInWithCredential:success&quot;)\r\n                    val user = auth.currentUser\r\n\r\n                } else {\r\n                    // If sign in fails, display a message to the user.\r\n                    Log.w(TAG, &quot;signInWithCredential:failure&quot;, task.exception)\r\n                    Toast.makeText(\r\n                        baseContext,\r\n                        &quot;Authentication failed.&quot;,\r\n                        Toast.LENGTH_SHORT,\r\n                    ).show()\r\n\r\n                }\r\n\r\n                // ...\r\n            }\r\n    }\r\n\r\n","title":"How to get GoogleSignInAccount object when signing in with Google Play Games Services V2","body":"<p>You need only AuthCode from PlayGamesClient you can get it like this:</p>\n<pre><code>val gamesSignInClient = PlayGames.getGamesSignInClient(this) /* Activity */\n    gamesSignInClient\n        .requestServerSideAccess(\n            getString(R.string.default_web_client_id),  /* Your web client id */\n            false\n        )\n        .addOnCompleteListener { task: Task&lt;String?&gt; -&gt;\n            if (task.isSuccessful) {\n                val serverAuthToken = task.result\n                if (serverAuthToken != null) {\n                    firebaseAuthWithPlayGames(serverAuthToken)\n                }\n                \n            } else {\n                // Failed to retrieve authentication code.\n                Toast.makeText(\n                    baseContext,\n                    &quot;Authentication failed.&quot;,\n                    Toast.LENGTH_SHORT,\n                ).show()\n            }\n        }\n\nprivate fun firebaseAuthWithPlayGames(serverAuthCode: String) {\n    val auth = Firebase.auth\n    val credential = PlayGamesAuthProvider.getCredential(serverAuthCode)\n    auth.signInWithCredential(credential)\n        .addOnCompleteListener(this) { task -&gt;\n            if (task.isSuccessful) {\n                // Sign in success, update UI with the signed-in user's information\n                Log.d(TAG, &quot;signInWithCredential:success&quot;)\n                val user = auth.currentUser\n\n            } else {\n                // If sign in fails, display a message to the user.\n                Log.w(TAG, &quot;signInWithCredential:failure&quot;, task.exception)\n                Toast.makeText(\n                    baseContext,\n                    &quot;Authentication failed.&quot;,\n                    Toast.LENGTH_SHORT,\n                ).show()\n\n            }\n\n            // ...\n        }\n}\n</code></pre>\n"}],"owner":{"account_id":24112402,"reputation":21,"user_id":18082814,"display_name":"AnMe3z"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694546561,"creation_date":1663692611,"question_id":73790105,"body_markdown":"I&#39;m building an android game with java and I&#39;m adding logging in my users with **Google Play Games Services V2** and **Firebase**. \r\n\r\nI have no problem integrating the code from the Play Games website (https://developers.google.com/games/services/android/signin#migrate_to_play_games_services_sign_in_v2) but when it comes to Firebases website (https://firebase.google.com/docs/auth/android/play-games) I&#39;m stuck. \r\n\r\nThere is a crucial method `firebaseAuthWithPlayGames()` and it requires GoogleSignInAccount object but I don&#39;t know how to get it.\r\n\r\nThanks!","title":"How to get GoogleSignInAccount object when signing in with Google Play Games Services V2","body":"<p>I'm building an android game with java and I'm adding logging in my users with <strong>Google Play Games Services V2</strong> and <strong>Firebase</strong>.</p>\n<p>I have no problem integrating the code from the Play Games website (<a href=\"https://developers.google.com/games/services/android/signin#migrate_to_play_games_services_sign_in_v2\" rel=\"nofollow noreferrer\">https://developers.google.com/games/services/android/signin#migrate_to_play_games_services_sign_in_v2</a>) but when it comes to Firebases website (<a href=\"https://firebase.google.com/docs/auth/android/play-games\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/auth/android/play-games</a>) I'm stuck.</p>\n<p>There is a crucial method <code>firebaseAuthWithPlayGames()</code> and it requires GoogleSignInAccount object but I don't know how to get it.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-security","upgrade","sha","password-encryption"],"answers":[{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694505573,"creation_date":1694439345,"answer_id":77082108,"question_id":77066736,"body_markdown":"I think you will find the answer in that post:\r\n\r\nhttps://stackoverflow.com/questions/19479116/how-to-use-spring-standardpasswordencode-and-get-salt-generate\r\n\r\n    public boolean matches(CharSequence rawPassword, String encodedPassword) {\r\n        byte[] digested = decode(encodedPassword);\r\n        byte[] salt = subArray(digested, 0, saltGenerator.getKeyLength());\r\n        return matches(digested, digest(rawPassword, salt));\r\n    }\r\n\r\nThis is not very clear in documentation https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/StandardPasswordEncoder.html :\r\n\r\n&gt; The digest algorithm is invoked on the concatenated bytes of the salt, secret and password.\r\n","title":"Migration of spring-security-core 3.2.4-RELEASE to spring-security-core 5.8.6. Facing issues with password encoding","body":"<p>I think you will find the answer in that post:</p>\n<p><a href=\"https://stackoverflow.com/questions/19479116/how-to-use-spring-standardpasswordencode-and-get-salt-generate\">How to use Spring StandardPasswordEncode and Get Salt Generate?</a></p>\n<pre><code>public boolean matches(CharSequence rawPassword, String encodedPassword) {\n    byte[] digested = decode(encodedPassword);\n    byte[] salt = subArray(digested, 0, saltGenerator.getKeyLength());\n    return matches(digested, digest(rawPassword, salt));\n}\n</code></pre>\n<p>This is not very clear in documentation <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/StandardPasswordEncoder.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/StandardPasswordEncoder.html</a> :</p>\n<blockquote>\n<p>The digest algorithm is invoked on the concatenated bytes of the salt, secret and password.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694546207,"creation_date":1694489540,"answer_id":77085929,"question_id":77066736,"body_markdown":"Firstly `ShaPasswordEncoder` is replaced by `LdapShaPasswordEncoder`. Think you can simply replace to use it to have a quick fix on your build problem.\r\n\r\nBut using `LdapShaPasswordEncoder` to encode password is considered to be insecure. Although there is no plan it will be removed based on its [javadoc][1], it is recommended to migrate using a more secure encoder such as bcrypt for encoding new users&#39; password and also think a strategy to migrate the existing users&#39; password to encode with this more secure encoder.\r\n\r\n[`DelegatingPasswordEncoder`][2] is designed to facilitate such migration. For example if you use :\r\n\r\n``` java  \r\nMap&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\r\nencoders.put(&quot;SSHA&quot;, new LdapShaPasswordEncoder());\r\nencoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\r\nPasswordEncoder  passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders); \r\n```\r\n\r\nThen the first parameter of `DelegatingPasswordEncoder` &#39;s constructor means it will use `BCryptPasswordEncoder`  to encode the password for the new users.  For matching to see if the provided password matched with the existing password (e.g. during login) , it will use `LdapShaPasswordEncoder` to decode the existing password if the password starts with the prefix `{SSHA}` which should be if you use `ShaPasswordEncoder` or `LdapShaPasswordEncoder` to encode it.\r\n\r\nFor the migration strategy of migrating the existing user to use a more secure password encoder,  you can refer to [this][3] for some ideas.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/LdapShaPasswordEncoder.html\r\n  [2]: https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe\r\n  [3]: https://stackoverflow.com/questions/17240744/spring-security-3-1-4-and-shapasswordencoder-deprecation","title":"Migration of spring-security-core 3.2.4-RELEASE to spring-security-core 5.8.6. Facing issues with password encoding","body":"<p>Firstly <code>ShaPasswordEncoder</code> is replaced by <code>LdapShaPasswordEncoder</code>. Think you can simply replace to use it to have a quick fix on your build problem.</p>\n<p>But using <code>LdapShaPasswordEncoder</code> to encode password is considered to be insecure. Although there is no plan it will be removed based on its <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/LdapShaPasswordEncoder.html\" rel=\"nofollow noreferrer\">javadoc</a>, it is recommended to migrate using a more secure encoder such as bcrypt for encoding new users' password and also think a strategy to migrate the existing users' password to encode with this more secure encoder.</p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe\" rel=\"nofollow noreferrer\"><code>DelegatingPasswordEncoder</code></a> is designed to facilitate such migration. For example if you use :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\nencoders.put(&quot;SSHA&quot;, new LdapShaPasswordEncoder());\nencoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\nPasswordEncoder  passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders); \n</code></pre>\n<p>Then the first parameter of <code>DelegatingPasswordEncoder</code> 's constructor means it will use <code>BCryptPasswordEncoder</code>  to encode the password for the new users.  For matching to see if the provided password matched with the existing password (e.g. during login) , it will use <code>LdapShaPasswordEncoder</code> to decode the existing password if the password starts with the prefix <code>{SSHA}</code> which should be if you use <code>ShaPasswordEncoder</code> or <code>LdapShaPasswordEncoder</code> to encode it.</p>\n<p>For the migration strategy of migrating the existing user to use a more secure password encoder,  you can refer to <a href=\"https://stackoverflow.com/questions/17240744/spring-security-3-1-4-and-shapasswordencoder-deprecation\">this</a> for some ideas.</p>\n"}],"owner":{"account_id":29394799,"reputation":31,"user_id":22522393,"display_name":"Pranav Siddhant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694546207,"creation_date":1694174665,"question_id":77066736,"body_markdown":"[I am getting this error on ant build ](https://i.stack.imgur.com/gY4cO.png)\r\nThis is my existing code --&gt;\r\n```\r\nimport org.springframework.security.authentication.encoding.ShaPasswordEncoder;\r\n\r\npublic static String encodePassword(String password, String salt) {\r\n\r\n        byte[] unencodedPassword = password.getBytes();\r\n       ShaPasswordEncoder encoder=new ShaPasswordEncoder();\r\n       String  encodedPwd= encoder.encodePassword(password,null);\r\n       encodedPwd = encoder.encodePassword(encodedPwd,salt);\r\n       return encodedPwd;\r\n}\r\n public static String changeEncodedPassword(String password, String salt) {\r\n       ShaPasswordEncoder encoder=new ShaPasswordEncoder();\r\n       \r\n       String encodedPwd = encoder.encodePassword(password,salt);\r\n       \r\n       return encodedPwd;\r\n     }\r\n public static String encodSH2Password(String password, String salt) {\r\n         ShaPasswordEncoder encoder=new ShaPasswordEncoder(256);\r\n         \r\n         String encodedPwd = encoder.encodePassword(password,salt);\r\n         \r\n         return encodedPwd;\r\n       } \r\n\r\n```\r\nNow, ShaPasswordEncoder has been deprecated in 5.8.6 jar \r\n\r\nSo, I searched through the internet and I found DelegatingPasswordEncoder should be used and an additional jar i.e. spring-security-crypto is to be imported. So, I wrote the following statement to change the encoding from previous version to recent one. \r\n```\r\nimport org.springframework.security.crypto.password.DelegatingPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.crypto.password.StandardPasswordEncoder;\r\n\r\n public static String encodePass() {\r\n\t\t \r\n\t\t String idForEncode = &quot;sha256&quot;;\r\n\t\t Map &lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\r\n\t\t encoders.put(&quot;sha256&quot;, new StandardPasswordEncoder());\r\n\t\t PasswordEncoder passwordEncoder = new DelegatingPasswordEncoder(idForEncode, encoders);\r\n\t\treturn idForEncode;\r\n\r\n\t }\r\n\r\n```\r\n\r\nSince we have used salt value in case of ShaPasswordEncoder but we can&#39;t use that in DelegatingPasswordEncoder ,so I want to know an approach how to write the migration code from previous version to new one.\r\nAlso, this StandardPasswordEncoder has been deprecated so what alternative should I use?\r\n","title":"Migration of spring-security-core 3.2.4-RELEASE to spring-security-core 5.8.6. Facing issues with password encoding","body":"<p><a href=\"https://i.stack.imgur.com/gY4cO.png\" rel=\"nofollow noreferrer\">I am getting this error on ant build </a>\nThis is my existing code --&gt;</p>\n<pre><code>import org.springframework.security.authentication.encoding.ShaPasswordEncoder;\n\npublic static String encodePassword(String password, String salt) {\n\n        byte[] unencodedPassword = password.getBytes();\n       ShaPasswordEncoder encoder=new ShaPasswordEncoder();\n       String  encodedPwd= encoder.encodePassword(password,null);\n       encodedPwd = encoder.encodePassword(encodedPwd,salt);\n       return encodedPwd;\n}\n public static String changeEncodedPassword(String password, String salt) {\n       ShaPasswordEncoder encoder=new ShaPasswordEncoder();\n       \n       String encodedPwd = encoder.encodePassword(password,salt);\n       \n       return encodedPwd;\n     }\n public static String encodSH2Password(String password, String salt) {\n         ShaPasswordEncoder encoder=new ShaPasswordEncoder(256);\n         \n         String encodedPwd = encoder.encodePassword(password,salt);\n         \n         return encodedPwd;\n       } \n\n</code></pre>\n<p>Now, ShaPasswordEncoder has been deprecated in 5.8.6 jar</p>\n<p>So, I searched through the internet and I found DelegatingPasswordEncoder should be used and an additional jar i.e. spring-security-crypto is to be imported. So, I wrote the following statement to change the encoding from previous version to recent one.</p>\n<pre><code>import org.springframework.security.crypto.password.DelegatingPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.crypto.password.StandardPasswordEncoder;\n\n public static String encodePass() {\n         \n         String idForEncode = &quot;sha256&quot;;\n         Map &lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\n         encoders.put(&quot;sha256&quot;, new StandardPasswordEncoder());\n         PasswordEncoder passwordEncoder = new DelegatingPasswordEncoder(idForEncode, encoders);\n        return idForEncode;\n\n     }\n\n</code></pre>\n<p>Since we have used salt value in case of ShaPasswordEncoder but we can't use that in DelegatingPasswordEncoder ,so I want to know an approach how to write the migration code from previous version to new one.\nAlso, this StandardPasswordEncoder has been deprecated so what alternative should I use?</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":688414,"reputation":82638,"user_id":542270,"accept_rate":86,"display_name":"Opal"},"score":0,"creation_date":1505927800,"post_id":46327736,"comment_id":79617140,"body_markdown":"What plugin are you using?","body":"What plugin are you using?"},{"owner":{"account_id":9298348,"reputation":482,"user_id":6904643,"display_name":"dosenfant"},"score":1,"creation_date":1505927883,"post_id":46327736,"comment_id":79617179,"body_markdown":"I&#39;m using `java`, `application` and `eclipse`.","body":"I&#39;m using <code>java</code>, <code>application</code> and <code>eclipse</code>."}],"answers":[{"tags":[],"owner":{"account_id":4902670,"reputation":13795,"user_id":3950370,"accept_rate":100,"display_name":"Lukas K&#246;rfer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1505950305,"creation_date":1505950305,"answer_id":46333199,"question_id":46327736,"body_markdown":"You don&#39;t want to care about the creation of the start scripts (the `startScripts` task), but about the creation of the zip file (the `distZip` task) to control where the files will be put. For this purpose, you could directly use the `distZip` task or the [`DistributionContainer`](https://docs.gradle.org/current/javadoc/org/gradle/api/distribution/DistributionContainer.html) from the Gradle Distribution plugin, which is automatically applied with the Gradle Application plugin. The `DistributionContainer` allows you to manage the creation of multiple distributions in your Gradle project and the Application plugin uses the `main` distribution by default.\r\n\r\n\tdistributions.main {\r\n\t\tcontents {\r\n\t\t\tfrom startScripts\r\n\t\t}\r\n\t}\r\n\r\nThis piece of code simply adds the outputs of the `startScripts` tasks to the `main` distribution contents. They will be placed in the root folder of this distribution, since you did not specify a child `CopySpec` with an `into` method.\r\n\r\nI assume that you want your start scripts **only** in the root folder, but not in the `bin` folder as well. Since you can only exclude files of a `Copy` task based on their source path and not on their destination path, you&#39;ll need to exclude them when they are copied, via the `eachFile` method (because then their destination is known):\r\n\r\n\tdistZip {\r\n\t\teachFile { file -&gt;\r\n\t\t\tif (file.path.contains(&#39;bin&#39;)) {\r\n\t\t\t\tfile.exclude()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nOf course, this piece of code will remove the whole `bin` directory from the zip file, so you could need to redescribe the condition in the closure for other use cases.","title":"Customize place of start scripts in gradle build","body":"<p>You don't want to care about the creation of the start scripts (the <code>startScripts</code> task), but about the creation of the zip file (the <code>distZip</code> task) to control where the files will be put. For this purpose, you could directly use the <code>distZip</code> task or the <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/api/distribution/DistributionContainer.html\" rel=\"noreferrer\"><code>DistributionContainer</code></a> from the Gradle Distribution plugin, which is automatically applied with the Gradle Application plugin. The <code>DistributionContainer</code> allows you to manage the creation of multiple distributions in your Gradle project and the Application plugin uses the <code>main</code> distribution by default.</p>\n\n<pre><code>distributions.main {\n    contents {\n        from startScripts\n    }\n}\n</code></pre>\n\n<p>This piece of code simply adds the outputs of the <code>startScripts</code> tasks to the <code>main</code> distribution contents. They will be placed in the root folder of this distribution, since you did not specify a child <code>CopySpec</code> with an <code>into</code> method.</p>\n\n<p>I assume that you want your start scripts <strong>only</strong> in the root folder, but not in the <code>bin</code> folder as well. Since you can only exclude files of a <code>Copy</code> task based on their source path and not on their destination path, you'll need to exclude them when they are copied, via the <code>eachFile</code> method (because then their destination is known):</p>\n\n<pre><code>distZip {\n    eachFile { file -&gt;\n        if (file.path.contains('bin')) {\n            file.exclude()\n        }\n    }\n}\n</code></pre>\n\n<p>Of course, this piece of code will remove the whole <code>bin</code> directory from the zip file, so you could need to redescribe the condition in the closure for other use cases.</p>\n"},{"tags":[],"owner":{"account_id":14484872,"reputation":25,"user_id":10463139,"display_name":"ashishbg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694546125,"creation_date":1694546125,"answer_id":77092081,"question_id":46327736,"body_markdown":"For Gradle v8 the scripts have changed a bit. So, to set the `APP_HOME` properly I had do this:\r\n```\r\nstartScripts {\r\n    doLast {\r\n        def windowsScriptFile = file getWindowsScript()\r\n        def unixScriptFile = file getUnixScript()\r\n\r\n        windowsScriptFile.text = windowsScriptFile.text.replace(&#39;set APP_HOME=%DIRNAME%..&#39;, &#39;set APP_HOME=%DIRNAME%&#39;)\r\n        unixScriptFile.text = unixScriptFile.text.replace(&#39;APP_HOME=$( cd &quot;${APP_HOME:-./}..&quot; &amp;&amp; pwd -P ) || exit&#39;, &#39;APP_HOME=$( cd &quot;${APP_HOME:-./}&quot; &amp;&amp; pwd -P ) || exit&#39;)\r\n    }\r\n}\r\n```","title":"Customize place of start scripts in gradle build","body":"<p>For Gradle v8 the scripts have changed a bit. So, to set the <code>APP_HOME</code> properly I had do this:</p>\n<pre><code>startScripts {\n    doLast {\n        def windowsScriptFile = file getWindowsScript()\n        def unixScriptFile = file getUnixScript()\n\n        windowsScriptFile.text = windowsScriptFile.text.replace('set APP_HOME=%DIRNAME%..', 'set APP_HOME=%DIRNAME%')\n        unixScriptFile.text = unixScriptFile.text.replace('APP_HOME=$( cd &quot;${APP_HOME:-./}..&quot; &amp;&amp; pwd -P ) || exit', 'APP_HOME=$( cd &quot;${APP_HOME:-./}&quot; &amp;&amp; pwd -P ) || exit')\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9298348,"reputation":482,"user_id":6904643,"display_name":"dosenfant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1676,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":46333199,"answer_count":2,"score":5,"last_activity_date":1694546125,"creation_date":1505926362,"question_id":46327736,"body_markdown":"I&#39;m new to gradle any trying to package a little project of mine. When building my distribution package, the structure is as follows:\r\n\r\n    my-project.zip\r\n    |\r\n    +- my-project\r\n       |\r\n       +- bin (containing start scripts)\r\n       +- lib\r\n       +- xyz (folders from src/dist)\r\n\r\nWhat I want to achieve is having the start scripts in the project root folder instead of the `bin` subfolder (I know that this is some kind of convention, but I also like to start my application from within the application folder):\r\n\r\n    my-project.zip\r\n    |\r\n    +- my-project\r\n       |\r\n       +- lib\r\n       +- xyz (folders from src/dist)\r\n       +- my-project.bat\r\n       +- my-project.sh\r\n\r\nIs this possible?\r\n\r\nI&#39;ve tried setting `tasks.startScripts.outputDir` but with no success (scripts were completely removed from the distribution package).\r\n\r\n**Update**\r\n\r\nIn addition to lu.koerfer&#39;s answer I had to modify the start scripts to take into account the changed APP_HOME:\r\n\r\n    startScripts {\r\n        startScripts.applicationName = artefactsBaseName\r\n        doLast {\r\n            def windowsScriptFile = file getWindowsScript()\r\n            def unixScriptFile = file getUnixScript()\r\n            windowsScriptFile.text = windowsScriptFile.text.replace(&#39;set APP_HOME=%DIRNAME%..&#39;, &#39;set APP_HOME=%DIRNAME%&#39;)\r\n            unixScriptFile.text = unixScriptFile.text.replace(&#39;cd &quot;`dirname \\&quot;$PRG\\&quot;`/..&quot; &gt;/dev/null&#39;, &#39;cd &quot;`dirname \\&quot;$PRG\\&quot;`&quot; &gt;/dev/null&#39;)\r\n        }\r\n    }","title":"Customize place of start scripts in gradle build","body":"<p>I'm new to gradle any trying to package a little project of mine. When building my distribution package, the structure is as follows:</p>\n\n<pre><code>my-project.zip\n|\n+- my-project\n   |\n   +- bin (containing start scripts)\n   +- lib\n   +- xyz (folders from src/dist)\n</code></pre>\n\n<p>What I want to achieve is having the start scripts in the project root folder instead of the <code>bin</code> subfolder (I know that this is some kind of convention, but I also like to start my application from within the application folder):</p>\n\n<pre><code>my-project.zip\n|\n+- my-project\n   |\n   +- lib\n   +- xyz (folders from src/dist)\n   +- my-project.bat\n   +- my-project.sh\n</code></pre>\n\n<p>Is this possible?</p>\n\n<p>I've tried setting <code>tasks.startScripts.outputDir</code> but with no success (scripts were completely removed from the distribution package).</p>\n\n<p><strong>Update</strong></p>\n\n<p>In addition to lu.koerfer's answer I had to modify the start scripts to take into account the changed APP_HOME:</p>\n\n<pre><code>startScripts {\n    startScripts.applicationName = artefactsBaseName\n    doLast {\n        def windowsScriptFile = file getWindowsScript()\n        def unixScriptFile = file getUnixScript()\n        windowsScriptFile.text = windowsScriptFile.text.replace('set APP_HOME=%DIRNAME%..', 'set APP_HOME=%DIRNAME%')\n        unixScriptFile.text = unixScriptFile.text.replace('cd \"`dirname \\\"$PRG\\\"`/..\" &gt;/dev/null', 'cd \"`dirname \\\"$PRG\\\"`\" &gt;/dev/null')\n    }\n}\n</code></pre>\n"},{"tags":["java","oracle","apache-spark","pyspark"],"answers":[{"tags":[],"owner":{"account_id":16560357,"reputation":603,"user_id":11966421,"display_name":"matkurek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619594670,"creation_date":1619594670,"answer_id":67295628,"question_id":66016355,"body_markdown":"One possible solution could be using `createTableColumnTypes` option during saving  and cast the troublemaking bigint column to varchar2 on oracle dbs side:\r\n\r\n\r\n    (correct_dtypes.write.\r\n    .option(&quot;createTableColumnTypes&quot;, &quot;ROW_ID VARCHAR2(18)&quot;)\r\n    .jdbc(&#39;jdbc:oracle:thin:@host:port/service&#39;,\r\n                              create_table, mode=&#39;overwrite&#39;,\r\n                              properties={&#39;user&#39;: &#39;user&#39;,\r\n                              &#39;password&#39;: &#39;password&#39;}))\r\n\r\n\r\n","title":"Why do I get &#39;getLong not implemented for class oracle.jdbc.driver.T4CRowidAccessor&#39; when creating a table in Oracle via JDBC?","body":"<p>One possible solution could be using <code>createTableColumnTypes</code> option during saving  and cast the troublemaking bigint column to varchar2 on oracle dbs side:</p>\n<pre><code>(correct_dtypes.write.\n.option(&quot;createTableColumnTypes&quot;, &quot;ROW_ID VARCHAR2(18)&quot;)\n.jdbc('jdbc:oracle:thin:@host:port/service',\n                          create_table, mode='overwrite',\n                          properties={'user': 'user',\n                          'password': 'password'}))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7334466,"reputation":13,"user_id":5586340,"display_name":"Fabian Fuentealba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694545993,"creation_date":1694545993,"answer_id":77092059,"question_id":66016355,"body_markdown":"the answer to solve that is the format of the ROWID column, which is not varchar, you must do it via this option for pyspark\r\n\r\n```\r\ndf = sc.read \\\r\n    .format(&quot;jdbc&quot;) \\\r\n    .option(&#39;driver&#39;, &#39;clase&#39;) \\\r\n    .option(&#39;url&#39;, &#39;url_jdbc&#39;) \\\r\n    .option(&#39;customSchema&#39;, &#39;ROWID VARCHAR(256), ORA_ROWSCN BIGINT&#39;)\r\n```","title":"Why do I get &#39;getLong not implemented for class oracle.jdbc.driver.T4CRowidAccessor&#39; when creating a table in Oracle via JDBC?","body":"<p>the answer to solve that is the format of the ROWID column, which is not varchar, you must do it via this option for pyspark</p>\n<pre><code>df = sc.read \\\n    .format(&quot;jdbc&quot;) \\\n    .option('driver', 'clase') \\\n    .option('url', 'url_jdbc') \\\n    .option('customSchema', 'ROWID VARCHAR(256), ORA_ROWSCN BIGINT')\n</code></pre>\n"}],"owner":{"account_id":5592924,"reputation":453,"user_id":7822853,"accept_rate":83,"display_name":"Pierre Delecto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1061,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694545993,"creation_date":1612294036,"question_id":66016355,"body_markdown":"I am attempting to write a Spark DataFrame to an Oracle table via JDBC. I am able to successfully connect and query the database but when I go to create a new table like this:\r\n\r\n```\r\ndf.write.jdbc(&#39;jdbc:oracle:thin:@host:port/service&#39;, create_table,\r\n              mode=&#39;overwrite&#39;,\r\n              properties={&#39;user&#39;: &#39;user&#39;, &#39;password&#39;: &#39;password&#39;]})\r\n```\r\n\r\nI get the error message ```java.sql.SQLException: Invalid column type: getLong not implemented for class oracle.jdbc.driver.T4CRowidAccessor```\r\n\r\nI suspect this has something to do with column ROW_ID that is ```df.dtypes``` ```bigint```. The ROW_IDs look something like the table below, which doesn&#39;t seem to agree with the infered datatype.\r\n\r\n| ROW_ID |\r\n| ------ |\r\n| AABBVMAGRAAAJfsAAA |\r\n| AABBVMAGRAAAJftAAA |\r\n| AABBVMAGRAAAJfyAAB |\r\n| AABBVMAGRAAAJfvAAB |\r\n| AABBVMAGRAAAJfwAAB |\r\n| AABBVMAGRAAAJf3AAI |\r\n\r\nEDIT:\r\n\r\nI tried casting the datatype from ```bigint``` to ```string``` using:\r\n\r\n```\r\nfrom pyspark.sql.functions import col\r\nfrom pyspark.sql.types import StringType\r\ncorrect_dtypes = df.withColumn(&#39;ROW_ID&#39;, col(&#39;ROW_ID&#39;).cast(StringType()))\r\ncorrect_dtypes.write.jdbc(&#39;jdbc:oracle:thin:@host:port/service&#39;, create_table,\r\n                          mode=&#39;overwrite&#39;,\r\n                          properties={&#39;user&#39;: &#39;user&#39;, &#39;password&#39;: &#39;password&#39;})\r\n```\r\n\r\nBut I am still getting the same error.","title":"Why do I get &#39;getLong not implemented for class oracle.jdbc.driver.T4CRowidAccessor&#39; when creating a table in Oracle via JDBC?","body":"<p>I am attempting to write a Spark DataFrame to an Oracle table via JDBC. I am able to successfully connect and query the database but when I go to create a new table like this:</p>\n<pre><code>df.write.jdbc('jdbc:oracle:thin:@host:port/service', create_table,\n              mode='overwrite',\n              properties={'user': 'user', 'password': 'password']})\n</code></pre>\n<p>I get the error message <code>java.sql.SQLException: Invalid column type: getLong not implemented for class oracle.jdbc.driver.T4CRowidAccessor</code></p>\n<p>I suspect this has something to do with column ROW_ID that is <code>df.dtypes</code> <code>bigint</code>. The ROW_IDs look something like the table below, which doesn't seem to agree with the infered datatype.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>ROW_ID</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AABBVMAGRAAAJfsAAA</td>\n</tr>\n<tr>\n<td>AABBVMAGRAAAJftAAA</td>\n</tr>\n<tr>\n<td>AABBVMAGRAAAJfyAAB</td>\n</tr>\n<tr>\n<td>AABBVMAGRAAAJfvAAB</td>\n</tr>\n<tr>\n<td>AABBVMAGRAAAJfwAAB</td>\n</tr>\n<tr>\n<td>AABBVMAGRAAAJf3AAI</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>EDIT:</p>\n<p>I tried casting the datatype from <code>bigint</code> to <code>string</code> using:</p>\n<pre><code>from pyspark.sql.functions import col\nfrom pyspark.sql.types import StringType\ncorrect_dtypes = df.withColumn('ROW_ID', col('ROW_ID').cast(StringType()))\ncorrect_dtypes.write.jdbc('jdbc:oracle:thin:@host:port/service', create_table,\n                          mode='overwrite',\n                          properties={'user': 'user', 'password': 'password'})\n</code></pre>\n<p>But I am still getting the same error.</p>\n"},{"tags":["java","linux","selenium-webdriver","jenkins","pom.xml"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694547560,"post_id":77091852,"comment_id":135904857,"body_markdown":"Please, [do not upload images of code/data/error](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557).","body":"Please, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">do not upload images of code/data/error</a>."}],"answers":[{"tags":[],"owner":{"account_id":29417842,"reputation":64,"user_id":22540265,"display_name":"Haru"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694545946,"creation_date":1694545946,"answer_id":77092055,"question_id":77091852,"body_markdown":"The error message you&#39;re encountering indicates that Jenkins is trying to use an executable file named &quot;chromedriverAugust2023.exe,&quot; but it expects an executable that is compatible with Linux, not a Windows executable with a .exe extension.\r\n\r\nHere are some steps you can take to resolve this issue:\r\n\r\n1. **Use the Appropriate Linux-Compatible WebDriver:**\r\n   Ensure that you have downloaded the Linux-compatible version of ChromeDriver and placed it in the correct directory on your Linux server. You should not be using the .exe file on Linux. You can download the appropriate ChromeDriver for Linux from the official ChromeDriver website.\r\n\r\n2. **Update the WebDriver Path in Your Test Code:**\r\n   Make sure that your test framework (e.g., Selenium) is configured to use the correct path for the ChromeDriver executable on your Linux server. You may need to update the code that sets up the WebDriver to point to the Linux-compatible ChromeDriver location.\r\n\r\n3. **Check Jenkins Configuration:**\r\n   In your Jenkins job configuration, ensure that you are specifying the correct path to the Linux-compatible ChromeDriver. The path should be valid on the Linux machine where Jenkins is running.\r\n\r\n4. **File Permissions:**\r\n   Confirm that the ChromeDriver executable on your Linux server has the necessary executable permissions. You can use the `chmod` command to adjust the file permissions if needed.\r\n\r\n5. **Test Locally on Linux:**\r\n   Before integrating with Jenkins, try running your tests locally on the Linux server to ensure that they work as expected.\r\n\r\n6. **Environment Variables:**\r\n   Check if there are any environment variables or system properties that need to be set for your tests to run correctly on Linux. These settings might differ from your Windows environment.\r\n\r\n7. **Jenkins Workspace:**\r\n   Ensure that the path to the ChromeDriver executable matches the workspace directory specified in your Jenkins job configuration.\r\n\r\nOnce you&#39;ve addressed these points and configured your Jenkins job correctly to use the Linux-compatible ChromeDriver, your tests should run without issues on the Linux server. If you encounter further problems, please provide more details about your setup and configuration for more specific guidance.","title":"Error java.lang.IllegalStateException: It must be an executable file: /var/lib/jenkins/workspace/RTEJENKINSTESTING/drivers/chromedriverAugust2023.exe","body":"<p>The error message you're encountering indicates that Jenkins is trying to use an executable file named &quot;chromedriverAugust2023.exe,&quot; but it expects an executable that is compatible with Linux, not a Windows executable with a .exe extension.</p>\n<p>Here are some steps you can take to resolve this issue:</p>\n<ol>\n<li><p><strong>Use the Appropriate Linux-Compatible WebDriver:</strong>\nEnsure that you have downloaded the Linux-compatible version of ChromeDriver and placed it in the correct directory on your Linux server. You should not be using the .exe file on Linux. You can download the appropriate ChromeDriver for Linux from the official ChromeDriver website.</p>\n</li>\n<li><p><strong>Update the WebDriver Path in Your Test Code:</strong>\nMake sure that your test framework (e.g., Selenium) is configured to use the correct path for the ChromeDriver executable on your Linux server. You may need to update the code that sets up the WebDriver to point to the Linux-compatible ChromeDriver location.</p>\n</li>\n<li><p><strong>Check Jenkins Configuration:</strong>\nIn your Jenkins job configuration, ensure that you are specifying the correct path to the Linux-compatible ChromeDriver. The path should be valid on the Linux machine where Jenkins is running.</p>\n</li>\n<li><p><strong>File Permissions:</strong>\nConfirm that the ChromeDriver executable on your Linux server has the necessary executable permissions. You can use the <code>chmod</code> command to adjust the file permissions if needed.</p>\n</li>\n<li><p><strong>Test Locally on Linux:</strong>\nBefore integrating with Jenkins, try running your tests locally on the Linux server to ensure that they work as expected.</p>\n</li>\n<li><p><strong>Environment Variables:</strong>\nCheck if there are any environment variables or system properties that need to be set for your tests to run correctly on Linux. These settings might differ from your Windows environment.</p>\n</li>\n<li><p><strong>Jenkins Workspace:</strong>\nEnsure that the path to the ChromeDriver executable matches the workspace directory specified in your Jenkins job configuration.</p>\n</li>\n</ol>\n<p>Once you've addressed these points and configured your Jenkins job correctly to use the Linux-compatible ChromeDriver, your tests should run without issues on the Linux server. If you encounter further problems, please provide more details about your setup and configuration for more specific guidance.</p>\n"}],"owner":{"account_id":29425447,"reputation":1,"user_id":22546276,"display_name":"Raj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694545946,"creation_date":1694543964,"question_id":77091852,"body_markdown":"Hi I have a framework and it runs well with maven command in my windows PC, i am trying to run the same using Jenkins on a linux but getting this error.\r\n\r\nI tried a lot of things but cannot fix it...I also tried with and without .exe and with linux chrome driver\r\n\r\nJENKINS OUTPUT:\r\n\r\n12-09-2023 19:33:59 BaseTest:108:[INFO] - Quitting Driver\r\n 12-09-2023 19:33:59 BaseTest:109:[INFO] - ===============================================\r\n [ERROR] Tests run: 64, Failures: 32, Errors: 0, Skipped: 32, Time elapsed: 1.668 s &lt;&lt;&lt; FAILURE! - in TestSuite\r\n[ERROR] setUpDriver(TestCases.RTETests.RTEAPIAndUITests.RTEAPISportsPagesTests.RTEAPISportsResultsTests)  Time elapsed: 0.902 s  &lt;&lt;&lt; FAILURE!\r\njava.lang.IllegalStateException: It must be an executable file: /var/lib/jenkins/workspace/RTEJENKINSTESTING/drivers/chromedriverAugust2023.exe\r\n\r\n[enter image description here](https://i.stack.imgur.com/KVtEd.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/KMh8V.png)\r\n\r\n\r\nI am trying to make it run on the linux server as well.","title":"Error java.lang.IllegalStateException: It must be an executable file: /var/lib/jenkins/workspace/RTEJENKINSTESTING/drivers/chromedriverAugust2023.exe","body":"<p>Hi I have a framework and it runs well with maven command in my windows PC, i am trying to run the same using Jenkins on a linux but getting this error.</p>\n<p>I tried a lot of things but cannot fix it...I also tried with and without .exe and with linux chrome driver</p>\n<p>JENKINS OUTPUT:</p>\n<p>12-09-2023 19:33:59 BaseTest:108:[INFO] - Quitting Driver\n12-09-2023 19:33:59 BaseTest:109:[INFO] - ===============================================\n[ERROR] Tests run: 64, Failures: 32, Errors: 0, Skipped: 32, Time elapsed: 1.668 s &lt;&lt;&lt; FAILURE! - in TestSuite\n[ERROR] setUpDriver(TestCases.RTETests.RTEAPIAndUITests.RTEAPISportsPagesTests.RTEAPISportsResultsTests)  Time elapsed: 0.902 s  &lt;&lt;&lt; FAILURE!\njava.lang.IllegalStateException: It must be an executable file: /var/lib/jenkins/workspace/RTEJENKINSTESTING/drivers/chromedriverAugust2023.exe</p>\n<p><a href=\"https://i.stack.imgur.com/KVtEd.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/KMh8V.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I am trying to make it run on the linux server as well.</p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":115492,"reputation":11986,"user_id":303254,"accept_rate":60,"display_name":"Orel Eraki"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1380840009,"creation_date":1380840009,"answer_id":19170374,"question_id":19170338,"body_markdown":"Try:\r\n\r\n    if (record.has(&quot;problemkey&quot;) &amp;&amp; !record.isNull(&quot;problemkey&quot;)) {\r\n        // Do something with object.\r\n    }","title":"How to test if JSON Collection object is empty in Java","body":"<p>Try:</p>\n\n<pre><code>if (record.has(\"problemkey\") &amp;&amp; !record.isNull(\"problemkey\")) {\n    // Do something with object.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2682715,"reputation":702,"user_id":2317720,"accept_rate":83,"display_name":"APerson"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1380840137,"creation_date":1380840137,"answer_id":19170393,"question_id":19170338,"body_markdown":"Try `/*string with {}*/ string.trim().equalsIgnoreCase(&quot;{}&quot;))`, maybe there is some extra spaces or something","title":"How to test if JSON Collection object is empty in Java","body":"<p>Try <code>/*string with {}*/ string.trim().equalsIgnoreCase(\"{}\"))</code>, maybe there is some extra spaces or something</p>\n"},{"tags":[],"owner":{"account_id":1093272,"reputation":1001,"user_id":1087411,"accept_rate":50,"display_name":"Anderson"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1380840706,"creation_date":1380840706,"answer_id":19170475,"question_id":19170338,"body_markdown":"A JSON notation {} represents an empty object, meaning an object without members. This is not the same as null. Neither it is string as you are trying to compare it with string &quot;{}&quot;.\r\nI don&#39;t know which json library are you using, but try to look for method something like:\r\n\r\n    isEmptyObject() \r\n\r\n","title":"How to test if JSON Collection object is empty in Java","body":"<p>A JSON notation {} represents an empty object, meaning an object without members. This is not the same as null. Neither it is string as you are trying to compare it with string \"{}\".\nI don't know which json library are you using, but try to look for method something like:</p>\n\n<pre><code>isEmptyObject() \n</code></pre>\n"},{"tags":[],"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380844397,"creation_date":1380844397,"answer_id":19170992,"question_id":19170338,"body_markdown":"    Object getResult = obj.get(&quot;dps&quot;); \r\n    if (getResult != null &amp;&amp; getResult instanceof java.util.Map &amp;&amp; (java.util.Map)getResult.isEmpty()) {\r\n        handleEmptyDps(); \r\n    } \r\n    else {\r\n        handleResult(getResult); \r\n    }","title":"How to test if JSON Collection object is empty in Java","body":"<pre><code>Object getResult = obj.get(\"dps\"); \nif (getResult != null &amp;&amp; getResult instanceof java.util.Map &amp;&amp; (java.util.Map)getResult.isEmpty()) {\n    handleEmptyDps(); \n} \nelse {\n    handleResult(getResult); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1413944,"reputation":59678,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"down_vote_count":3,"up_vote_count":48,"is_accepted":false,"score":45,"last_activity_date":1523969001,"creation_date":1380845067,"answer_id":19171091,"question_id":19170338,"body_markdown":"If you&#39;re okay with a hack - \r\n\r\n    obj.toString().equals(&quot;{}&quot;);\r\n\r\nSerializing the object is expensive and moreso for large objects, but it&#39;s good to understand that JSON is transparent as a string, and therefore looking at the string representation is something you can always do to solve a problem.","title":"How to test if JSON Collection object is empty in Java","body":"<p>If you're okay with a hack - </p>\n\n<pre><code>obj.toString().equals(\"{}\");\n</code></pre>\n\n<p>Serializing the object is expensive and moreso for large objects, but it's good to understand that JSON is transparent as a string, and therefore looking at the string representation is something you can always do to solve a problem.</p>\n"},{"tags":[],"owner":{"account_id":1392725,"reputation":39551,"user_id":1399309,"accept_rate":86,"display_name":"Scott Tesler"},"down_vote_count":1,"up_vote_count":176,"is_accepted":true,"score":175,"last_activity_date":1402348689,"creation_date":1402348689,"answer_id":24129236,"question_id":19170338,"body_markdown":"    obj.length() == 0\r\n\r\nis what I would do.","title":"How to test if JSON Collection object is empty in Java","body":"<pre><code>obj.length() == 0\n</code></pre>\n\n<p>is what I would do.</p>\n"},{"tags":[],"owner":{"account_id":4264492,"reputation":29,"user_id":3487921,"display_name":"user3487921"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1405467284,"creation_date":1405466476,"answer_id":24769747,"question_id":19170338,"body_markdown":"Use the following code:\r\n\r\n    if(json.isNull()!= null){  //returns true only if json is not null\r\n    \r\n    }","title":"How to test if JSON Collection object is empty in Java","body":"<p>Use the following code:</p>\n\n<pre><code>if(json.isNull()!= null){  //returns true only if json is not null\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227596,"reputation":4137,"user_id":489364,"accept_rate":53,"display_name":"kommradHomer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409750223,"creation_date":1409750223,"answer_id":25645410,"question_id":19170338,"body_markdown":"I have added isEmpty() methods on JSONObject and JSONArray()\r\n\r\n     //on JSONObject \r\n     public Boolean isEmpty(){         \r\n         return !this.keys().hasNext();\r\n     }\r\n\r\n...\r\n\r\n    //on JSONArray\r\n    public Boolean isEmpty(){\r\n        return this.length()==0;        \r\n    }\r\n\r\nyou can get it here https://github.com/kommradHomer/JSON-java","title":"How to test if JSON Collection object is empty in Java","body":"<p>I have added isEmpty() methods on JSONObject and JSONArray()</p>\n\n<pre><code> //on JSONObject \n public Boolean isEmpty(){         \n     return !this.keys().hasNext();\n }\n</code></pre>\n\n<p>...</p>\n\n<pre><code>//on JSONArray\npublic Boolean isEmpty(){\n    return this.length()==0;        \n}\n</code></pre>\n\n<p>you can get it here <a href=\"https://github.com/kommradHomer/JSON-java\" rel=\"nofollow\">https://github.com/kommradHomer/JSON-java</a></p>\n"},{"tags":[],"owner":{"account_id":1037919,"reputation":554,"user_id":1044637,"display_name":"sorjef"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445881089,"creation_date":1445881089,"answer_id":33352107,"question_id":19170338,"body_markdown":"I would do the following to check for an empty object\r\n\r\n    obj.similar(new JSONObject())","title":"How to test if JSON Collection object is empty in Java","body":"<p>I would do the following to check for an empty object</p>\n\n<pre><code>obj.similar(new JSONObject())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4963991,"reputation":191,"user_id":3994014,"display_name":"Sashko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489788063,"creation_date":1489777080,"answer_id":42865253,"question_id":19170338,"body_markdown":"If JSON returned with following structure when records is an ArrayNode:\r\n\r\n    {}client \r\n      records[]\r\n\r\nand you want to check if records node has something in it \r\nthen you can do it using a method size(); \r\n\r\n    if (recordNodes.get(i).size() != 0) {}\r\n","title":"How to test if JSON Collection object is empty in Java","body":"<p>If JSON returned with following structure when records is an ArrayNode:</p>\n\n<pre><code>{}client \n  records[]\n</code></pre>\n\n<p>and you want to check if records node has something in it \nthen you can do it using a method size(); </p>\n\n<pre><code>if (recordNodes.get(i).size() != 0) {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8931454,"reputation":11,"user_id":6663931,"display_name":"Bharathi Raja"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1584723754,"creation_date":1491228050,"answer_id":43186687,"question_id":19170338,"body_markdown":"    if (jsonObj != null &amp;&amp; jsonObj.length &gt; 0)\r\n\r\nTo check if a nested JSON object is empty within a JSONObject:\r\n\r\n    if (!jsonObject.isNull(&quot;key&quot;) &amp;&amp; jsonObject.getJSONObject(&quot;key&quot;).length() &gt; 0)","title":"How to test if JSON Collection object is empty in Java","body":"<pre><code>if (jsonObj != null &amp;&amp; jsonObj.length &gt; 0)\n</code></pre>\n\n<p>To check if a nested JSON object is empty within a JSONObject:</p>\n\n<pre><code>if (!jsonObject.isNull(\"key\") &amp;&amp; jsonObject.getJSONObject(\"key\").length() &gt; 0)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1076676,"reputation":390,"user_id":1074665,"display_name":"Mikey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514923073,"creation_date":1514923073,"answer_id":48067069,"question_id":19170338,"body_markdown":"\r\n    @Test\r\n    public void emptyJsonParseTest() {\r\n        JsonNode emptyJsonNode = new ObjectMapper().createObjectNode();\r\n        Assert.assertTrue(emptyJsonNode.asText().isEmpty());\r\n    }","title":"How to test if JSON Collection object is empty in Java","body":"<pre><code>@Test\npublic void emptyJsonParseTest() {\n    JsonNode emptyJsonNode = new ObjectMapper().createObjectNode();\n    Assert.assertTrue(emptyJsonNode.asText().isEmpty());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9321614,"reputation":1385,"user_id":6920195,"display_name":"Rohan Lodhi"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1524823243,"creation_date":1524823243,"answer_id":50059953,"question_id":19170338,"body_markdown":"If empty array:\r\n\r\n    .size() == 0\r\n\r\nif empty object:\r\n\r\n    .length() == 0","title":"How to test if JSON Collection object is empty in Java","body":"<p>If empty array:</p>\n\n<pre><code>.size() == 0\n</code></pre>\n\n<p>if empty object:</p>\n\n<pre><code>.length() == 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4390084,"reputation":357,"user_id":3578802,"display_name":"Venkata Naresh Babu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540913671,"creation_date":1540913671,"answer_id":53067881,"question_id":19170338,"body_markdown":"if you want to check for the json empty case, we can directly use below code\r\n\r\n    String jsonString = {};\r\n    JSONObject jsonObject = new JSONObject(jsonString);\r\n    if(jsonObject.isEmpty()){\r\n     System.out.println(&quot;json is empty&quot;);\r\n    } else{\r\n     System.out.println(&quot;json is not empty&quot;);\r\n    }\r\n\r\nthis may help you.","title":"How to test if JSON Collection object is empty in Java","body":"<p>if you want to check for the json empty case, we can directly use below code</p>\n\n<pre><code>String jsonString = {};\nJSONObject jsonObject = new JSONObject(jsonString);\nif(jsonObject.isEmpty()){\n System.out.println(\"json is empty\");\n} else{\n System.out.println(\"json is not empty\");\n}\n</code></pre>\n\n<p>this may help you.</p>\n"},{"tags":[],"owner":{"account_id":4674851,"reputation":131,"user_id":3785544,"display_name":"rachit7"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1558021949,"creation_date":1558021949,"answer_id":56172395,"question_id":19170338,"body_markdown":"For this case, I do something like this: \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var obj = {};\r\n\r\n    if(Object.keys(obj).length == 0){\r\n            console.log(&quot;The obj is null&quot;)\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n ","title":"How to test if JSON Collection object is empty in Java","body":"<p>For this case, I do something like this: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var obj = {};\r\n\r\nif(Object.keys(obj).length == 0){\r\n        console.log(\"The obj is null\")\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":1100177,"reputation":406,"user_id":1092761,"display_name":"guymac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694545824,"creation_date":1694545824,"answer_id":77092042,"question_id":19170338,"body_markdown":"javax.json.JsonObject extends Map, so you can use the isEmpty() method of Map.\r\n\r\n    JsonObject dps = obj.getJsonObject(&quot;dps&quot;);\r\n    if (dps != null &amp;&amp; !dps.isEmpty())) ... else ...","title":"How to test if JSON Collection object is empty in Java","body":"<p>javax.json.JsonObject extends Map, so you can use the isEmpty() method of Map.</p>\n<pre><code>JsonObject dps = obj.getJsonObject(&quot;dps&quot;);\nif (dps != null &amp;&amp; !dps.isEmpty())) ... else ...\n</code></pre>\n"}],"owner":{"account_id":1791000,"reputation":5781,"user_id":1631414,"accept_rate":83,"display_name":"Classified"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239668,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"accepted_answer_id":24129236,"answer_count":16,"score":79,"last_activity_date":1694545824,"creation_date":1380839761,"question_id":19170338,"body_markdown":"The JSON Collection object I&#39;m receiving looks like this:\r\n\r\n    [{&quot;foo1&quot;:&quot;bar1&quot;, &quot;foo2&quot;:&quot;bar2&quot;, &quot;problemkey&quot;: &quot;problemvalue&quot;}]\r\n\r\nWhat I&#39;m trying to test for is the existence of `problemvalue`. If `problemvalue` returns a JSON Object, I&#39;m happy.  If it doesn&#39;t, it will return as `{}`.  How do I test for this condition?  I&#39;ve tried several things to no avail.\r\n\r\nThis is what I&#39;ve tried thus far:\r\n\r\n    //      if (obj.get(&quot;dps&quot;) == null) {  //didn&#39;t work\r\n    //      if (obj.get(&quot;dps&quot;).equals(&quot;{}&quot;)) {  //didn&#39;t work\r\n    if (obj.isNull(&quot;dps&quot;)) {  //didn&#39;t work\r\n        System.out.println(&quot;No dps key&quot;);\r\n    }\r\n\r\nI expected one of these lines to print &quot;No dps key&quot; because `{&quot;dps&quot;:{}}`, but for whatever reason, it&#39;s not. I&#39;m using `org.json`. The jar file is `org.json-20120521.jar`.","title":"How to test if JSON Collection object is empty in Java","body":"<p>The JSON Collection object I'm receiving looks like this:</p>\n<pre><code>[{&quot;foo1&quot;:&quot;bar1&quot;, &quot;foo2&quot;:&quot;bar2&quot;, &quot;problemkey&quot;: &quot;problemvalue&quot;}]\n</code></pre>\n<p>What I'm trying to test for is the existence of <code>problemvalue</code>. If <code>problemvalue</code> returns a JSON Object, I'm happy.  If it doesn't, it will return as <code>{}</code>.  How do I test for this condition?  I've tried several things to no avail.</p>\n<p>This is what I've tried thus far:</p>\n<pre><code>//      if (obj.get(&quot;dps&quot;) == null) {  //didn't work\n//      if (obj.get(&quot;dps&quot;).equals(&quot;{}&quot;)) {  //didn't work\nif (obj.isNull(&quot;dps&quot;)) {  //didn't work\n    System.out.println(&quot;No dps key&quot;);\n}\n</code></pre>\n<p>I expected one of these lines to print &quot;No dps key&quot; because <code>{&quot;dps&quot;:{}}</code>, but for whatever reason, it's not. I'm using <code>org.json</code>. The jar file is <code>org.json-20120521.jar</code>.</p>\n"},{"tags":["java","nginx","jetty","chunked-encoding","chunked"],"comments":[{"owner":{"display_name":"user1600649"},"score":0,"creation_date":1410850958,"post_id":25846120,"comment_id":40469258,"body_markdown":"Perhaps KeepAlive is what you&#39;re looking for? If that does not work, I would research solutions in dealing with websockets and it probably requires you to implement a Connection upgrade. Come to think of it, it&#39;s very likely you proxy a Connection: close header.","body":"Perhaps KeepAlive is what you&#39;re looking for? If that does not work, I would research solutions in dealing with websockets and it probably requires you to implement a Connection upgrade. Come to think of it, it&#39;s very likely you proxy a Connection: close header."},{"owner":{"account_id":2140848,"reputation":1473,"user_id":1899517,"display_name":"imps"},"score":0,"creation_date":1410857672,"post_id":25846120,"comment_id":40472733,"body_markdown":"So I also posted on the nginx forum and I got a reply.\nThe thing I am specifically looking for is called &quot;unbuffered upload&quot; and that is currently a feature that nginx does not provide. \nUsing websockets is out of the question because later this prototype will need to be implement in a bigger and older system that uses the http protocol. \n\nSo the answer for this would be it&#39;s not possible with &quot;nginx&quot;.\nA possible work around for anyone facing the same issue is using tengine which is an nginx fork.","body":"So I also posted on the nginx forum and I got a reply. The thing I am specifically looking for is called &quot;unbuffered upload&quot; and that is currently a feature that nginx does not provide.  Using websockets is out of the question because later this prototype will need to be implement in a bigger and older system that uses the http protocol.   So the answer for this would be it&#39;s not possible with &quot;nginx&quot;. A possible work around for anyone facing the same issue is using tengine which is an nginx fork."}],"answers":[{"tags":[],"owner":{"account_id":2140848,"reputation":1473,"user_id":1899517,"display_name":"imps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694545646,"creation_date":1410857794,"answer_id":25864527,"question_id":25846120,"body_markdown":"So I also posted on the nginx forum and I got a reply. The thing I am specifically looking for is called &quot;unbuffered upload&quot; and that is currently a feature that nginx does not provide. \r\n\r\nUsing websockets is out of the question because later this prototype will need to be implement in a bigger and older system that uses the http protocol. So the answer for this would be it&#39;s not possible with &quot;nginx&quot;. A possible work around for anyone facing the same issue is using tengine which is an nginx fork. \r\n\r\n**Update**\r\n\r\nUnbuffered upload was added to NGINX in 2015, https://www.nginx.com/blog/nginx-plus-r6-released/#unbuffered-upload. ","title":"nginx chunked transfer encoding fails","body":"<p>So I also posted on the nginx forum and I got a reply. The thing I am specifically looking for is called &quot;unbuffered upload&quot; and that is currently a feature that nginx does not provide.</p>\n<p>Using websockets is out of the question because later this prototype will need to be implement in a bigger and older system that uses the http protocol. So the answer for this would be it's not possible with &quot;nginx&quot;. A possible work around for anyone facing the same issue is using tengine which is an nginx fork.</p>\n<p><strong>Update</strong></p>\n<p>Unbuffered upload was added to NGINX in 2015, <a href=\"https://www.nginx.com/blog/nginx-plus-r6-released/#unbuffered-upload\" rel=\"nofollow noreferrer\">https://www.nginx.com/blog/nginx-plus-r6-released/#unbuffered-upload</a>.</p>\n"}],"owner":{"account_id":2140848,"reputation":1473,"user_id":1899517,"display_name":"imps"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2804,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25864527,"answer_count":1,"score":0,"last_activity_date":1694545646,"creation_date":1410777472,"question_id":25846120,"body_markdown":"I am using an implemention of nginx with jetty servlets.\r\n\r\nFor the purpose of my project I need to initialize two connection to the jetty servlet and keep them open. \r\nTo initialize the downlink I use a normal request and I get the inputstream back. \r\nTo initialize the uplink I use a chunked encoding request.\r\n\r\nI use a 1.4.6 nginx version so the chunked encoding should be set by default, regardless I set it in my server definition.\r\n\r\n     #HTTPS server\r\n    \r\n    server {\r\n     \tlisten 443;\r\n  \t\tlisten [::]:443;\r\n        server_name  localhost;\r\n        \r\n        ssl                  on;\r\n        ssl_certificate      /etc/nginx/ssl/server.crt;\r\n        ssl_certificate_key  /etc/nginx/ssl/server.key;\r\n\r\n        ssl_session_timeout  5m;\r\n\r\n        ssl_protocols  SSLv2 SSLv3 TLSv1;\r\n        ssl_ciphers  HIGH:!aNULL:!MD5;\r\n        ssl_prefer_server_ciphers   on;\r\n        location / {\r\n            proxy_http_version 1.1;\r\n            expires off;\r\n       \t\tproxy_buffering off; \r\n       \t\tchunked_transfer_encoding on;\r\n            proxy_pass      https://127.0.0.1:8080;\r\n        #    root   html;\r\n        #    index  index.html index.htm;\r\n        }\r\n    }\r\n\r\nI&#39;ve searched through all the forums and I still can&#39;t come across a solution.\r\nEnabled chunked encoding, proxy buffering off etc etc.\r\nI can&#39;t get it to work. I have also done simple tests to make that it&#39;s not my apps implementation that&#39;s blocking it somehow and it still doesn&#39;t work.\r\n\r\nAnything else I can try?","title":"nginx chunked transfer encoding fails","body":"<p>I am using an implemention of nginx with jetty servlets.</p>\n\n<p>For the purpose of my project I need to initialize two connection to the jetty servlet and keep them open. \nTo initialize the downlink I use a normal request and I get the inputstream back. \nTo initialize the uplink I use a chunked encoding request.</p>\n\n<p>I use a 1.4.6 nginx version so the chunked encoding should be set by default, regardless I set it in my server definition.</p>\n\n<pre><code> #HTTPS server\n\nserver {\n    listen 443;\n    listen [::]:443;\n    server_name  localhost;\n\n    ssl                  on;\n    ssl_certificate      /etc/nginx/ssl/server.crt;\n    ssl_certificate_key  /etc/nginx/ssl/server.key;\n\n    ssl_session_timeout  5m;\n\n    ssl_protocols  SSLv2 SSLv3 TLSv1;\n    ssl_ciphers  HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers   on;\n    location / {\n        proxy_http_version 1.1;\n        expires off;\n        proxy_buffering off; \n        chunked_transfer_encoding on;\n        proxy_pass      https://127.0.0.1:8080;\n    #    root   html;\n    #    index  index.html index.htm;\n    }\n}\n</code></pre>\n\n<p>I've searched through all the forums and I still can't come across a solution.\nEnabled chunked encoding, proxy buffering off etc etc.\nI can't get it to work. I have also done simple tests to make that it's not my apps implementation that's blocking it somehow and it still doesn't work.</p>\n\n<p>Anything else I can try?</p>\n"},{"tags":["java","spring","hibernate","junit","h2"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1538637796,"post_id":40635400,"comment_id":92214705,"body_markdown":"`HibernateConfiguration.dataSourceTest(ds);` makes me shudder. However you should set the `generateDdl` property of the `HibernateJpaVendorAdapter` to `true` else nothing will be generated.","body":"<code>HibernateConfiguration.dataSourceTest(ds);</code> makes me shudder. However you should set the <code>generateDdl</code> property of the <code>HibernateJpaVendorAdapter</code> to <code>true</code> else nothing will be generated."}],"answers":[{"tags":[],"owner":{"account_id":4928112,"reputation":44,"user_id":3968811,"display_name":"Sadupa Wijeratne"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1479379428,"creation_date":1479379428,"answer_id":40652752,"question_id":40635400,"body_markdown":"Seems `@Table` annotation is missing in your MailConfig class.\r\n\r\nYou can find full working example using spring, hibernate and h2 database from http://mycuteblog.com/h2-database-example-hibernate-spring-boot/\r\n","title":"Hibernate is not creating tables with H2 in memory database","body":"<p>Seems <code>@Table</code> annotation is missing in your MailConfig class.</p>\n\n<p>You can find full working example using spring, hibernate and h2 database from <a href=\"http://mycuteblog.com/h2-database-example-hibernate-spring-boot/\" rel=\"nofollow noreferrer\">http://mycuteblog.com/h2-database-example-hibernate-spring-boot/</a></p>\n"},{"tags":[],"owner":{"account_id":14048365,"reputation":529,"user_id":10147915,"display_name":"VRadhe"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1538637466,"creation_date":1538637466,"answer_id":52641091,"question_id":40635400,"body_markdown":"Add @EntityScan(basepackage=&quot;com.entity&quot;) Annotation in main class","title":"Hibernate is not creating tables with H2 in memory database","body":"<p>Add @EntityScan(basepackage=\"com.entity\") Annotation in main class</p>\n"}],"owner":{"account_id":5685559,"reputation":4315,"user_id":4495245,"accept_rate":48,"display_name":"Motomine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9298,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694545340,"creation_date":1479308575,"question_id":40635400,"body_markdown":"I&#39;m trying to test an application which uses SpringMVC and Hibernate with MySQL. I tried using HSQLDB but since the syntax is not the same as MySQL the queries may not work, so I decided to go to H2.\r\nThe problem is that when I run it it says &quot;Table MAILCONFIG not found&quot;, and if I created on the INIT syntax it says that already exists. \r\n\r\nI have configured a simple test that doesn&#39;t do anything, I only want it to run.\r\n\r\nI have the following files:\r\n\r\nServiceTest.java \r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(locations = {&quot;file:src/test/resources/applicationContext.xml&quot;})\r\n    @Transactional\r\n    @WebAppConfiguration\r\n    public class ServiceTest {\r\n\r\n    private static DataSource ds;\r\n\r\n    @BeforeClass\r\n    public static void setUpConnection(){\r\n        ds = new DataSource();\r\n        ds.setDriverClassName(&quot;org.h2.Driver&quot;);\r\n        ds.setUrl(&quot;jdbc:h2:mem:testDB&quot;);\r\n        ds.setUsername(&quot;sa&quot;);\r\n        ds.setPassword(&quot;&quot;);\r\n        HibernateConfiguration.dataSourceTest(ds);\r\n    }\r\n\r\n    @AfterClass\r\n    public static void cleanConnection(){\r\n        HibernateConfiguration.dataSourceTest(null);\r\n    }\r\n    }\r\n\r\napplicationContext.xml\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n        http://www.springframework.org/schema/context\r\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n        http://www.springframework.org/schema/tx\r\n        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n\r\n    &lt;bean id=&quot;entityManagerFactory&quot;\r\n          class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;persistenceXmlLocation&quot; value=&quot;classpath:persistence.xml&quot; /&gt;\r\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;testingSetup&quot; /&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;/&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;context:component-scan base-package=&quot;com.adistec&quot; /&gt;\r\n    &lt;context:annotation-config/&gt;\r\n\r\n&lt;/beans&gt;\r\n\r\npersistence.xml\r\n\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\r\n             version=&quot;2.0&quot;&gt;\r\n    &lt;persistence-unit name=&quot;testingSetup&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:h2:mem:testDB;DB_CLOSE_DELAY=-1;MODE=MySQL&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;sa&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;class, hbm&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\nMailConfig.java\r\n\r\n    @Entity\r\n    public class MailConfig {\r\n\t  @Id\r\n\t  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t  Long id;\r\n\t  @Column\r\n\t  String host;\r\n    }\r\n\r\nI specify the Hibernate configuration in the test because the application uses java classes and not the XML files. \r\n\r\nCan anyone help me with this? Or if there is an easier way to test it with java classes is welcome too, I couldn&#39;t find out a solution yet.\r\nI want it to work locally and then it has to work with jenkins too, so it can create things that can&#39;t do on the VM.\r\n\r\nThank you!","title":"Hibernate is not creating tables with H2 in memory database","body":"<p>I'm trying to test an application which uses SpringMVC and Hibernate with MySQL. I tried using HSQLDB but since the syntax is not the same as MySQL the queries may not work, so I decided to go to H2.\nThe problem is that when I run it it says \"Table MAILCONFIG not found\", and if I created on the INIT syntax it says that already exists. </p>\n\n<p>I have configured a simple test that doesn't do anything, I only want it to run.</p>\n\n<p>I have the following files:</p>\n\n<p>ServiceTest.java </p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = {\"file:src/test/resources/applicationContext.xml\"})\n@Transactional\n@WebAppConfiguration\npublic class ServiceTest {\n\nprivate static DataSource ds;\n\n@BeforeClass\npublic static void setUpConnection(){\n    ds = new DataSource();\n    ds.setDriverClassName(\"org.h2.Driver\");\n    ds.setUrl(\"jdbc:h2:mem:testDB\");\n    ds.setUsername(\"sa\");\n    ds.setPassword(\"\");\n    HibernateConfiguration.dataSourceTest(ds);\n}\n\n@AfterClass\npublic static void cleanConnection(){\n    HibernateConfiguration.dataSourceTest(null);\n}\n}\n</code></pre>\n\n<p>applicationContext.xml</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:context=\"http://www.springframework.org/schema/context\"\n   xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.0.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt;\n\n&lt;bean id=\"entityManagerFactory\"\n      class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"persistenceXmlLocation\" value=\"classpath:persistence.xml\" /&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"testingSetup\" /&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;context:component-scan base-package=\"com.adistec\" /&gt;\n&lt;context:annotation-config/&gt;\n</code></pre>\n\n<p></p>\n\n<p>persistence.xml</p>\n\n<pre><code>&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n         version=\"2.0\"&gt;\n&lt;persistence-unit name=\"testingSetup\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n    &lt;properties&gt;\n        &lt;property name=\"hibernate.connection.driver_class\" value=\"org.h2.Driver\" /&gt;\n        &lt;property name=\"hibernate.connection.url\" value=\"jdbc:h2:mem:testDB;DB_CLOSE_DELAY=-1;MODE=MySQL\" /&gt;\n        &lt;property name=\"hibernate.connection.username\" value=\"sa\" /&gt;\n        &lt;property name=\"hibernate.connection.password\" value=\"\" /&gt;\n        &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.H2Dialect\" /&gt;\n        &lt;property name=\"hibernate.archive.autodetection\" value=\"class, hbm\"/&gt;\n        &lt;property name=\"hibernate.show_sql\" value=\"false\"/&gt;\n        &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create\"/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p></p>\n\n<p>MailConfig.java</p>\n\n<pre><code>@Entity\npublic class MailConfig {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  Long id;\n  @Column\n  String host;\n}\n</code></pre>\n\n<p>I specify the Hibernate configuration in the test because the application uses java classes and not the XML files. </p>\n\n<p>Can anyone help me with this? Or if there is an easier way to test it with java classes is welcome too, I couldn't find out a solution yet.\nI want it to work locally and then it has to work with jenkins too, so it can create things that can't do on the VM.</p>\n\n<p>Thank you!</p>\n"},{"tags":["java","user-interface","jgoodies"],"owner":{"account_id":20183146,"reputation":33,"user_id":14803193,"display_name":"Ksushant881"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694545153,"creation_date":1694544789,"question_id":77091939,"body_markdown":"\r\nI am trying to create this text field which shows remaining qty from table above it. This text field is not covering the column it is provided with completely and leaves an extra space to its right. I have another example of similar thing in codebase which is covering that space except there they used a PercentFormattedTextField. Not sure why is it doing it here.\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nFormLayout layout = new FormLayout(&quot;pref, 10dlu:g, pref, 2dlu, pref&quot;,\r\n                                           &quot;pref:g,&quot;);\r\n\r\n        PanelBuilder builder = new PanelBuilder(layout);\r\n\r\n        builder.add(removeAssignmentButton,      CC.xy(1, 1, &quot;left, center&quot;));\r\n\r\n        builder.addLabel(&quot;Remaining&quot;,            CC.xy(3, 1, &quot;right, center&quot;));\r\n        builder.add(remainingTextField,          CC.xy(5, 1, &quot;left, center&quot;));\r\n```\r\n\r\nI tried setting/unsetting borders and all kinds of setting for the form layout. Nothing worked.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/75NV7.jpg","title":"JFormattedTextField does not cover all the space on GUI","body":"<p>I am trying to create this text field which shows remaining qty from table above it. This text field is not covering the column it is provided with completely and leaves an extra space to its right. I have another example of similar thing in codebase which is covering that space except there they used a PercentFormattedTextField. Not sure why is it doing it here.\n<a href=\"https://i.stack.imgur.com/75NV7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/75NV7.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>FormLayout layout = new FormLayout(&quot;pref, 10dlu:g, pref, 2dlu, pref&quot;,\n                                           &quot;pref:g,&quot;);\n\n        PanelBuilder builder = new PanelBuilder(layout);\n\n        builder.add(removeAssignmentButton,      CC.xy(1, 1, &quot;left, center&quot;));\n\n        builder.addLabel(&quot;Remaining&quot;,            CC.xy(3, 1, &quot;right, center&quot;));\n        builder.add(remainingTextField,          CC.xy(5, 1, &quot;left, center&quot;));\n</code></pre>\n<p>I tried setting/unsetting borders and all kinds of setting for the form layout. Nothing worked.</p>\n"},{"tags":["java","postgresql","hibernate","spring-data-jpa","criteriabuilder"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1694545371,"post_id":77091971,"comment_id":135904510,"body_markdown":"Why don&#39;t you have an employee table?","body":"Why don&#39;t you have an employee table?"},{"owner":{"account_id":8901951,"reputation":27,"user_id":6645139,"display_name":"Siva"},"score":0,"creation_date":1694590324,"post_id":77091971,"comment_id":135909584,"body_markdown":"I just provided simple details for understanding. It is not actual data. The data we receive form external party looks similar to this.","body":"I just provided simple details for understanding. It is not actual data. The data we receive form external party looks similar to this."},{"owner":{"account_id":8901951,"reputation":27,"user_id":6645139,"display_name":"Siva"},"score":0,"creation_date":1695139035,"post_id":77091971,"comment_id":135982738,"body_markdown":"@Olivier will you be able to answer the question?","body":"@Olivier will you be able to answer the question?"}],"owner":{"account_id":8901951,"reputation":27,"user_id":6645139,"display_name":"Siva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694545095,"creation_date":1694545095,"question_id":77091971,"body_markdown":"I have a postgresql table where I have department details as column and details of the employees working in the department as list of json in a column in the same table. I want to filter the department details if there are any employees joined after or before or between any particualar dates. I am able to do that using query. I am trying to do that using Java application. But I am not sure how exactly to do this.\r\n\r\nTable structure:\r\n\r\n```\r\nCREATE TABLE IF NOT EXISTS department_details\r\n(\r\n    id bigint NOT NULL DEFAULT nextval(&#39;department_details_id_seq&#39;::regclass),\r\n    location_id bigint NOT NULL,\r\n    department_code character varying(255) COLLATE pg_catalog.&quot;default&quot; NOT NULL,\r\n    department_name character varying(255) COLLATE pg_catalog.&quot;default&quot; NOT NULL,\r\n    employee_details json\r\n}\r\n```\r\n\r\nAnd the structure of the employee_details will be as below.\r\n\r\n```\r\n[{&quot;employeeId&quot;:1,\r\n&quot;firstName&quot;:&quot;firstName1&quot;,\r\n&quot;lastName&quot;:&quot;lastName1&quot;,\r\n&quot;designation&quot;:&quot;Manager&quot;,\r\n&quot;dateOfBirth&quot;:&quot;1990-01-31&quot;,\r\n&quot;joiningDate&quot;:&quot;2015-01-31&quot;},\r\n{&quot;employeeId&quot;:2,\r\n&quot;firstName&quot;:&quot;firstName2&quot;,\r\n&quot;lastName&quot;:&quot;lastName2&quot;,\r\n&quot;designation&quot;:&quot;Supervisor&quot;,\r\n&quot;dateOfBirth&quot;:&quot;1990-12-31&quot;,\r\n&quot;joiningDate&quot;:&quot;2015-12-31&quot;}]\r\n```\r\n\r\nNow I want to filter based on the joining date. I am able to achieve this in SQL query as below. \r\n\r\n```\r\nselect * from department_Details\r\nwhere json_extract_path_text(employee_details-&gt;0,&#39;joiningDate&#39;) &gt; &#39;2023-08-20&#39; or\r\njson_extract_path_text(employee_details-&gt;1,&#39;joiningDate&#39;) &gt; &#39;2023-08-20&#39;;\r\n```\r\n\r\nConsider that no of employees in the json will be varying, it is not fixed to one or two. \r\nAbove query will work only if two employees details in the json.\r\n\r\nI want to achieve the same in my java application using Criteria builder. Below is the code I have written to filter. It is working only if only one employee details that too not as an array. \r\n\r\n```\r\nLocalDate fromDate = LocalDate.parse(requestFilter.getFromDateValue().trim(), \r\nDateTimeFormatter.ofPattern(YYYY_MM_DD));\r\nLocalDateTime startOfDay = fromDate.atStartOfDay();\r\nFilterOperation operationType = requestFilter.getOperator();\r\n\r\nswitch (operationType) {\r\n\r\ncase BETWEEN:\r\n  if (requestFilter.getToDateValue() == null) {\r\n    throw new BusinessException(&quot;For &#39;Between&#39; operation, two dates are required.&quot;);\r\n  }\r\n\r\n  LocalDate toDate = LocalDate.parse(requestFilter.getToDateValue().trim(), \r\n  DateTimeFormatter.ofPattern(YYYY_MM_DD));\r\n  LocalDateTime endOfDay = toDate.plusDays(1).atStartOfDay().minusNanos(1);\r\n\r\n  return criteriaBuilder.between(criteriaBuilder.function(&quot;json_extract_path_text&quot;, \r\n    String.class, root.get(&quot;employeeDetails&quot;),\r\n                            criteriaBuilder.literal(&quot;joiningDate&quot;).as(String.class)), startOfDay.toString(), endOfDay.toString());\r\n\r\ncase GREATER_THAN:\r\n  return criteriaBuilder.greaterThan(criteriaBuilder.function(&quot;json_extract_path_text&quot;, String.class, root.get(&quot;employeeDetails&quot;).type(),\r\n                            criteriaBuilder.literal(&quot;joiningDate&quot;).as(String.class)), startOfDay.toString());\r\n\r\ncase LESS_THAN:\r\n  return criteriaBuilder.lessThan(criteriaBuilder.function(&quot;json_extract_path_text&quot;, String.class, root.get(&quot;employeeDetails&quot;),\r\n                            criteriaBuilder.literal(&quot;joiningDate).as(String.class)), startOfDay.toString());\r\n\r\ndefault:\r\nthrow new BusinessException(&quot;Invalid operator for date : &quot; + operationType.getOperatorKey());\r\n}\r\n```\r\n\r\nMy Entity is as below:\r\n\r\n ```@Entity\r\n @Table(name = &quot;department_details&quot;)\r\n @Getter\r\n @Setter\r\n @NoArgsConstructor\r\n public class DepartmentDetails{\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @NotNull\r\n    private Long locationId;\r\n\r\n    @NotNull\r\n    private String departmentCode;\r\n\r\n    private String deparmentName;\r\n\r\n    @Column(name = &quot;employee_details&quot;)\r\n    @Convert(converter = EmployeeDetailsConverter.class)\r\n    private List&lt;EmployeeDetails&gt; employeeDetailsList;\r\n}\r\n```\r\n\r\nAnd my EmployeeDetails entity will be as below:\r\n\r\n```@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class EmployeeDetails{\r\n\r\n    private Long employeeId;\r\n\r\n    private String firstName;\r\n\r\n    private String lastName;\r\n\r\n    private String designation;\r\n\r\n    private String dateOfBirth;\r\n\r\n    private String joiningDate;\r\n}\r\n```\r\n\r\nPlease let me know how to achieve in java code criteria builder that -&gt;0, -&gt;1 which I achieved in SQL query?","title":"filtering from json column in postgresql using CriteriaBuilder","body":"<p>I have a postgresql table where I have department details as column and details of the employees working in the department as list of json in a column in the same table. I want to filter the department details if there are any employees joined after or before or between any particualar dates. I am able to do that using query. I am trying to do that using Java application. But I am not sure how exactly to do this.</p>\n<p>Table structure:</p>\n<pre><code>CREATE TABLE IF NOT EXISTS department_details\n(\n    id bigint NOT NULL DEFAULT nextval('department_details_id_seq'::regclass),\n    location_id bigint NOT NULL,\n    department_code character varying(255) COLLATE pg_catalog.&quot;default&quot; NOT NULL,\n    department_name character varying(255) COLLATE pg_catalog.&quot;default&quot; NOT NULL,\n    employee_details json\n}\n</code></pre>\n<p>And the structure of the employee_details will be as below.</p>\n<pre><code>[{&quot;employeeId&quot;:1,\n&quot;firstName&quot;:&quot;firstName1&quot;,\n&quot;lastName&quot;:&quot;lastName1&quot;,\n&quot;designation&quot;:&quot;Manager&quot;,\n&quot;dateOfBirth&quot;:&quot;1990-01-31&quot;,\n&quot;joiningDate&quot;:&quot;2015-01-31&quot;},\n{&quot;employeeId&quot;:2,\n&quot;firstName&quot;:&quot;firstName2&quot;,\n&quot;lastName&quot;:&quot;lastName2&quot;,\n&quot;designation&quot;:&quot;Supervisor&quot;,\n&quot;dateOfBirth&quot;:&quot;1990-12-31&quot;,\n&quot;joiningDate&quot;:&quot;2015-12-31&quot;}]\n</code></pre>\n<p>Now I want to filter based on the joining date. I am able to achieve this in SQL query as below.</p>\n<pre><code>select * from department_Details\nwhere json_extract_path_text(employee_details-&gt;0,'joiningDate') &gt; '2023-08-20' or\njson_extract_path_text(employee_details-&gt;1,'joiningDate') &gt; '2023-08-20';\n</code></pre>\n<p>Consider that no of employees in the json will be varying, it is not fixed to one or two.\nAbove query will work only if two employees details in the json.</p>\n<p>I want to achieve the same in my java application using Criteria builder. Below is the code I have written to filter. It is working only if only one employee details that too not as an array.</p>\n<pre><code>LocalDate fromDate = LocalDate.parse(requestFilter.getFromDateValue().trim(), \nDateTimeFormatter.ofPattern(YYYY_MM_DD));\nLocalDateTime startOfDay = fromDate.atStartOfDay();\nFilterOperation operationType = requestFilter.getOperator();\n\nswitch (operationType) {\n\ncase BETWEEN:\n  if (requestFilter.getToDateValue() == null) {\n    throw new BusinessException(&quot;For 'Between' operation, two dates are required.&quot;);\n  }\n\n  LocalDate toDate = LocalDate.parse(requestFilter.getToDateValue().trim(), \n  DateTimeFormatter.ofPattern(YYYY_MM_DD));\n  LocalDateTime endOfDay = toDate.plusDays(1).atStartOfDay().minusNanos(1);\n\n  return criteriaBuilder.between(criteriaBuilder.function(&quot;json_extract_path_text&quot;, \n    String.class, root.get(&quot;employeeDetails&quot;),\n                            criteriaBuilder.literal(&quot;joiningDate&quot;).as(String.class)), startOfDay.toString(), endOfDay.toString());\n\ncase GREATER_THAN:\n  return criteriaBuilder.greaterThan(criteriaBuilder.function(&quot;json_extract_path_text&quot;, String.class, root.get(&quot;employeeDetails&quot;).type(),\n                            criteriaBuilder.literal(&quot;joiningDate&quot;).as(String.class)), startOfDay.toString());\n\ncase LESS_THAN:\n  return criteriaBuilder.lessThan(criteriaBuilder.function(&quot;json_extract_path_text&quot;, String.class, root.get(&quot;employeeDetails&quot;),\n                            criteriaBuilder.literal(&quot;joiningDate).as(String.class)), startOfDay.toString());\n\ndefault:\nthrow new BusinessException(&quot;Invalid operator for date : &quot; + operationType.getOperatorKey());\n}\n</code></pre>\n<p>My Entity is as below:</p>\n<pre><code>@Table(name = &quot;department_details&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class DepartmentDetails{\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Long id;\n\n   @NotNull\n   private Long locationId;\n\n   @NotNull\n   private String departmentCode;\n\n   private String deparmentName;\n\n   @Column(name = &quot;employee_details&quot;)\n   @Convert(converter = EmployeeDetailsConverter.class)\n   private List&lt;EmployeeDetails&gt; employeeDetailsList;\n}\n</code></pre>\n<p>And my EmployeeDetails entity will be as below:</p>\n<pre><code>@Setter\n@NoArgsConstructor\npublic class EmployeeDetails{\n\n    private Long employeeId;\n\n    private String firstName;\n\n    private String lastName;\n\n    private String designation;\n\n    private String dateOfBirth;\n\n    private String joiningDate;\n}\n</code></pre>\n<p>Please let me know how to achieve in java code criteria builder that -&gt;0, -&gt;1 which I achieved in SQL query?</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":2,"creation_date":1694545407,"post_id":77091964,"comment_id":135904514,"body_markdown":"Are you sure that you don&#39;t have several consumers for this topic and the same group? So, an instance you look into doesn&#39;t get records because they are consumed in other instances.","body":"Are you sure that you don&#39;t have several consumers for this topic and the same group? So, an instance you look into doesn&#39;t get records because they are consumed in other instances."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694565065,"post_id":77091964,"comment_id":135907071,"body_markdown":"Use `kafka-consumer-groups --describe` with the group id you&#39;ve provided in the values","body":"Use <code>kafka-consumer-groups --describe</code> with the group id you&#39;ve provided in the values"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1694633378,"post_id":77091964,"comment_id":135918466,"body_markdown":"So I used this on both our nonprod and prod cluster. The nonprod test seemed to work perfectly, showing info on topics associated with the groupid. In the prod test, most of the servers returned &quot;Error: Consumer group &#39;xxx&#39;  does not exist.&quot;. One of them simply got a timeout error. If it got that &quot;does not exist&quot; error, is it certain that it was able to reach the server (no firewall block), and this really means that the groupid doesn&#39;t exist?","body":"So I used this on both our nonprod and prod cluster. The nonprod test seemed to work perfectly, showing info on topics associated with the groupid. In the prod test, most of the servers returned &quot;Error: Consumer group &#39;xxx&#39;  does not exist.&quot;. One of them simply got a timeout error. If it got that &quot;does not exist&quot; error, is it certain that it was able to reach the server (no firewall block), and this really means that the groupid doesn&#39;t exist?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1694635787,"post_id":77091964,"comment_id":135918867,"body_markdown":"Actually, I also figured out that I can use the &quot;--list&quot; option to simply list the groupids available on each server. This provides even more convincing information that it&#39;s able to reach the prod servers, but the groupid they gave us for the prod servers simply doesn&#39;t exist, contrary to what they told us.","body":"Actually, I also figured out that I can use the &quot;--list&quot; option to simply list the groupids available on each server. This provides even more convincing information that it&#39;s able to reach the prod servers, but the groupid they gave us for the prod servers simply doesn&#39;t exist, contrary to what they told us."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1694727228,"post_id":77091964,"comment_id":135933246,"body_markdown":"The person who manages the kafka server is saying that &quot;Basically group id will be created by client. If your client creates group id then it will show there.&quot; As far as I know, we&#39;ve never had to manually &quot;create&quot; anything. If we start the service using spring-kafka, pointing to the listed servers and with the groupid and topic properties, does it implicitly &quot;create&quot; the groupid, or is he just completely wrong?","body":"The person who manages the kafka server is saying that &quot;Basically group id will be created by client. If your client creates group id then it will show there.&quot; As far as I know, we&#39;ve never had to manually &quot;create&quot; anything. If we start the service using spring-kafka, pointing to the listed servers and with the groupid and topic properties, does it implicitly &quot;create&quot; the groupid, or is he just completely wrong?"}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694545021,"creation_date":1694545021,"question_id":77091964,"body_markdown":"We have a service using spring-kafka (v2.9.8) that reads messages from kafka topics.  The same code has been running fine for quite a while without change.\r\n\r\nAbout a month ago, we found that this service was no longer getting messages from the production kafka servers.  The same service runs in multiple nonprod servers, and it&#39;s working perfectly fine, getting messages from the nonprod kafka topics. There are no errors in the prod log, it just never gets any messages.  We have double-checked the list of &quot;bootstrap-servers&quot;, and it is apparently correct.  We have checked the wmtopic and group-id properties, and they are also correct.  Otherwise, the nonprod properties are identical to the prod properties.\r\n\r\nI tried to turn up the log level for spring-kafka, but I still see nothing of significance in the log.\r\n\r\nI&#39;m at a loss to see how to troubleshoot this.  Is there some way to make it more verbose, either spring-kafka or kafka, to give us a clue for why it&#39;s not getting any messages?","title":"Why is spring-kafka silently not reading messages from kafka topics in our prod environment?","body":"<p>We have a service using spring-kafka (v2.9.8) that reads messages from kafka topics.  The same code has been running fine for quite a while without change.</p>\n<p>About a month ago, we found that this service was no longer getting messages from the production kafka servers.  The same service runs in multiple nonprod servers, and it's working perfectly fine, getting messages from the nonprod kafka topics. There are no errors in the prod log, it just never gets any messages.  We have double-checked the list of &quot;bootstrap-servers&quot;, and it is apparently correct.  We have checked the wmtopic and group-id properties, and they are also correct.  Otherwise, the nonprod properties are identical to the prod properties.</p>\n<p>I tried to turn up the log level for spring-kafka, but I still see nothing of significance in the log.</p>\n<p>I'm at a loss to see how to troubleshoot this.  Is there some way to make it more verbose, either spring-kafka or kafka, to give us a clue for why it's not getting any messages?</p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1694542538,"post_id":77091577,"comment_id":135904018,"body_markdown":"Did you try just adding the other CSS selectors in? What happened? Can you post a [mre]?","body":"Did you try just adding the other CSS selectors in? What happened? Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694543233,"post_id":77091577,"comment_id":135904150,"body_markdown":"You need `.check-box:focused &gt; .box { ... }` (which you can, of course, just combine with the rule for `button:focused`).","body":"You need <code>.check-box:focused &gt; .box { ... }</code> (which you can, of course, just combine with the rule for <code>button:focused</code>)."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1694543477,"post_id":77091577,"comment_id":135904201,"body_markdown":"That is great! Any chance you can tell me what is going on so I can learn from it?","body":"That is great! Any chance you can tell me what is going on so I can learn from it?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1694543688,"post_id":77091577,"comment_id":135904238,"body_markdown":"`.check-box` is the entire control (including the text label and the graphic). `.check-box &gt; .box` is the box containing (when selected) the check mark (and `check-box &gt; .box &gt; .mark` is the actual check mark). The focus highlight is only applied to the box, so that&#39;s the style that needs to be reverted to the default.","body":"<code>.check-box</code> is the entire control (including the text label and the graphic). <code>.check-box &gt; .box</code> is the box containing (when selected) the check mark (and <code>check-box &gt; .box &gt; .mark</code> is the actual check mark). The focus highlight is only applied to the box, so that&#39;s the style that needs to be reverted to the default."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694543888,"post_id":77091577,"comment_id":135904276,"body_markdown":"I reopened your question at your request.  But honestly, from reading the title, it seems the same as the suggested duplicate and if there are additional answers to be provided, I think they should be provided there and this question closed again as a duplicate unless this question is updated to be more specific and different from the original.","body":"I reopened your question at your request.  But honestly, from reading the title, it seems the same as the suggested duplicate and if there are additional answers to be provided, I think they should be provided there and this question closed again as a duplicate unless this question is updated to be more specific and different from the original."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1694543900,"post_id":77091577,"comment_id":135904277,"body_markdown":"Ok, I will look into that, what will be the correct selector the the radio-button? EDIT: I used this: .radio-button:focused &gt; .radio and this to keep the rounded corners: -fx-background-radius: 1.0em","body":"Ok, I will look into that, what will be the correct selector the the radio-button? EDIT: I used this: .radio-button:focused &gt; .radio and this to keep the rounded corners: -fx-background-radius: 1.0em"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1694544522,"post_id":77091577,"comment_id":135904373,"body_markdown":"jewelsea: You may be right. I see this question as a 2023 version of a question that was never fully answered back  then (if you ask me) because the solutions given there will never give the exact same item without the glow (today using the newest modena css). You may be right it is better to keep the focus in the suggested duplicate.","body":"jewelsea: You may be right. I see this question as a 2023 version of a question that was never fully answered back  then (if you ask me) because the solutions given there will never give the exact same item without the glow (today using the newest modena css). You may be right it is better to keep the focus in the suggested duplicate."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1694544680,"post_id":77091577,"comment_id":135904403,"body_markdown":"The only reliable way I know to figure these out is to look at the [modena source code](https://github.com/openjdk/jfx/blob/master/modules/javafx.controls/src/main/resources/com/sun/javafx/scene/control/skin/modena/modena.css). For radio buttons the selector is `.radio-button:focused &gt; .radio`.","body":"The only reliable way I know to figure these out is to look at the <a href=\"https://github.com/openjdk/jfx/blob/master/modules/javafx.controls/src/main/resources/com/sun/javafx/scene/control/skin/modena/modena.css\" rel=\"nofollow noreferrer\">modena source code</a>. For radio buttons the selector is <code>.radio-button:focused &gt; .radio</code>."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1694544801,"post_id":77091577,"comment_id":135904422,"body_markdown":"Thanks. Also as a last update: It was my hope that something &quot;behind the lines&quot; could be done totally removing all glow, without adding too much css.","body":"Thanks. Also as a last update: It was my hope that something &quot;behind the lines&quot; could be done totally removing all glow, without adding too much css."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1694554601,"post_id":77091577,"comment_id":135906032,"body_markdown":"I updated the [duplicate answer](https://stackoverflow.com/questions/6092500/how-do-i-remove-the-default-border-glow-of-a-javafx-button-when-selected/15749763#15749763) to provide styling for common controls to make focused items look exactly the same as unfocused items for most controls.  I can no longer mark this is a duplicate as StackOverflow won&#39;t let me :-(","body":"I updated the <a href=\"https://stackoverflow.com/questions/6092500/how-do-i-remove-the-default-border-glow-of-a-javafx-button-when-selected/15749763#15749763\">duplicate answer</a> to provide styling for common controls to make focused items look exactly the same as unfocused items for most controls.  I can no longer mark this is a duplicate as StackOverflow won&#39;t let me :-("},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1694576450,"post_id":77091577,"comment_id":135907901,"body_markdown":"Closed as duplicate, as the duplicate now addresses all the questions raised here.","body":"Closed as duplicate, as the duplicate now addresses all the questions raised here."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1694629416,"post_id":77091577,"comment_id":135917770,"body_markdown":"Perfect :) Thanks jewelsea.","body":"Perfect :) Thanks jewelsea."}],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1694576308,"answer_count":0,"score":0,"last_activity_date":1694544953,"creation_date":1694541272,"question_id":77091577,"body_markdown":"I know this issue have been raised before, but I still don&#39;t know how to completely remove the glow when items are focused.\r\n\r\nI have been working with this: https://www.jensd.de/wordpress/?p=1245 and that is working fine for a button, but I can&#39;t figure out how to remove the glow from all other items - the toggleButton, the checkBox and the textField.\r\n\r\nSo, this is working for the button:\r\n\r\n       .button:focused {\r\n            -fx-background-color: -fx-outer-border, -fx-inner-border, -fx-body-color; \r\n            -fx-background-insets: 0, 1, 2;\r\n            -fx-background-radius: 5, 4, 3;\r\n        }\r\n\r\nFor the checkBox i tried the same, with different background-insets and background-radius values, without any luck:\r\n\r\n       .check-box:focused {\r\n                -fx-background-color: -fx-outer-border, -fx-inner-border, -fx-body-color; \r\n                -fx-background-insets: 0, 1, 2;\r\n                -fx-background-radius: 5, 4, 3;\r\n            }\r\n\r\nI&#39;m not sure what else code/example to show, just trying above on a simple default checkBox.\r\n\r\nAny chance I can remove the focus glow from all items?\r\n\r\n\r\n","title":"JavaFX remove focus glow","body":"<p>I know this issue have been raised before, but I still don't know how to completely remove the glow when items are focused.</p>\n<p>I have been working with this: <a href=\"https://www.jensd.de/wordpress/?p=1245\" rel=\"nofollow noreferrer\">https://www.jensd.de/wordpress/?p=1245</a> and that is working fine for a button, but I can't figure out how to remove the glow from all other items - the toggleButton, the checkBox and the textField.</p>\n<p>So, this is working for the button:</p>\n<pre><code>   .button:focused {\n        -fx-background-color: -fx-outer-border, -fx-inner-border, -fx-body-color; \n        -fx-background-insets: 0, 1, 2;\n        -fx-background-radius: 5, 4, 3;\n    }\n</code></pre>\n<p>For the checkBox i tried the same, with different background-insets and background-radius values, without any luck:</p>\n<pre><code>   .check-box:focused {\n            -fx-background-color: -fx-outer-border, -fx-inner-border, -fx-body-color; \n            -fx-background-insets: 0, 1, 2;\n            -fx-background-radius: 5, 4, 3;\n        }\n</code></pre>\n<p>I'm not sure what else code/example to show, just trying above on a simple default checkBox.</p>\n<p>Any chance I can remove the focus glow from all items?</p>\n"},{"tags":["java","spring-boot","netflix-eureka"],"answers":[{"tags":[],"owner":{"account_id":22202832,"reputation":57,"user_id":16443218,"display_name":"Corvo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694544740,"creation_date":1694544740,"answer_id":77091931,"question_id":77091485,"body_markdown":"The problem was on `spring-cloud.version`. I changed it to `&lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;` and the discovery server worked.","title":"I&#39;m unable to view Eureka dashboard","body":"<p>The problem was on <code>spring-cloud.version</code>. I changed it to <code>&lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;</code> and the discovery server worked.</p>\n"}],"owner":{"account_id":22202832,"reputation":57,"user_id":16443218,"display_name":"Corvo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694544740,"creation_date":1694540225,"question_id":77091485,"body_markdown":"When I access http://localhost:8761/ or http://localhost:8761/eureka I get &quot;Whitelabel Error Page&quot;.\r\n\r\nMy app class:\r\n```java\r\n    @SpringBootApplication\r\n    @EnableEurekaServer\r\n    public class DiscoveryServerApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(DiscoveryServerApplication.class, args);\r\n        }\r\n    }\r\n```\r\napplication.properties:\r\n\r\n    eureka.instance.hostname=localhost\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n    server.port=8761\r\n    spring.freemarker.template-loader-path=classpath:/templates/\r\n    spring.freemarker.prefer-file-system-access=false\r\n\r\npom.xml from discovery server module:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\npom.xml from parent project:\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;inventory-service&lt;/module&gt;\r\n        &lt;module&gt;order-service&lt;/module&gt;\r\n        &lt;module&gt;product-service&lt;/module&gt;\r\n        &lt;module&gt;discovery-server&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nDiscovery server application logs:\r\n\r\n```java\r\n    2023-09-12T14:25:01.469-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : Starting DiscoveryServerApplication using Java 17.0.6 with PID 28640\r\n    2023-09-12T14:25:01.472-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-09-12T14:25:02.662-03:00  INFO 28640 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8761 (http)\r\n    2023-09-12T14:25:02.672-03:00  INFO 28640 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-09-12T14:25:02.672-03:00  INFO 28640 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]\r\n    2023-09-12T14:25:02.777-03:00  INFO 28640 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-09-12T14:25:02.778-03:00  INFO 28640 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1259 ms\r\n    2023-09-12T14:25:03.563-03:00  INFO 28640 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path &#39;/actuator&#39;\r\n    2023-09-12T14:25:03.624-03:00  INFO 28640 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8761 (http) with context path &#39;&#39;\r\n    2023-09-12T14:25:03.637-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : Started DiscoveryServerApplication in 2.794 seconds (process running for 3.526)\r\n    2023-09-12T14:25:03.942-03:00  INFO 28640 --- [2)-192.168.15.7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n    2023-09-12T14:25:03.943-03:00  INFO 28640 --- [2)-192.168.15.7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2023-09-12T14:25:03.944-03:00  INFO 28640 --- [2)-192.168.15.7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms\r\n```\r\n\r\nWhat am I doing wrong?\r\n\r\nPS: I&#39;m using Spring Boot 3.1.3","title":"I&#39;m unable to view Eureka dashboard","body":"<p>When I access http://localhost:8761/ or http://localhost:8761/eureka I get &quot;Whitelabel Error Page&quot;.</p>\n<p>My app class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SpringBootApplication\n    @EnableEurekaServer\n    public class DiscoveryServerApplication {\n        public static void main(String[] args) {\n            SpringApplication.run(DiscoveryServerApplication.class, args);\n        }\n    }\n</code></pre>\n<p>application.properties:</p>\n<pre><code>eureka.instance.hostname=localhost\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\nserver.port=8761\nspring.freemarker.template-loader-path=classpath:/templates/\nspring.freemarker.prefer-file-system-access=false\n</code></pre>\n<p>pom.xml from discovery server module:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>pom.xml from parent project:</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n&lt;modules&gt;\n    &lt;module&gt;inventory-service&lt;/module&gt;\n    &lt;module&gt;order-service&lt;/module&gt;\n    &lt;module&gt;product-service&lt;/module&gt;\n    &lt;module&gt;discovery-server&lt;/module&gt;\n&lt;/modules&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>Discovery server application logs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    2023-09-12T14:25:01.469-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : Starting DiscoveryServerApplication using Java 17.0.6 with PID 28640\n    2023-09-12T14:25:01.472-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\n    2023-09-12T14:25:02.662-03:00  INFO 28640 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8761 (http)\n    2023-09-12T14:25:02.672-03:00  INFO 28640 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n    2023-09-12T14:25:02.672-03:00  INFO 28640 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]\n    2023-09-12T14:25:02.777-03:00  INFO 28640 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n    2023-09-12T14:25:02.778-03:00  INFO 28640 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1259 ms\n    2023-09-12T14:25:03.563-03:00  INFO 28640 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'\n    2023-09-12T14:25:03.624-03:00  INFO 28640 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8761 (http) with context path ''\n    2023-09-12T14:25:03.637-03:00  INFO 28640 --- [           main] c.y.g.d.DiscoveryServerApplication       : Started DiscoveryServerApplication in 2.794 seconds (process running for 3.526)\n    2023-09-12T14:25:03.942-03:00  INFO 28640 --- [2)-192.168.15.7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n    2023-09-12T14:25:03.943-03:00  INFO 28640 --- [2)-192.168.15.7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n    2023-09-12T14:25:03.944-03:00  INFO 28640 --- [2)-192.168.15.7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>PS: I'm using Spring Boot 3.1.3</p>\n"},{"tags":["java","android","android-textinputlayout","textinputlayout"],"owner":{"account_id":14266486,"reputation":4054,"user_id":10305444,"display_name":"Maifee Ul Asad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694544321,"creation_date":1694544321,"question_id":77091897,"body_markdown":"I&#39;m trying to change font all over my application. I couldn&#39;t find any solution, but I&#39;m doing this activity by activity.\r\n\r\nSo I&#39;ve written one function, which takes a view and if it&#39;s of certain view-type (text dervative), I set the text-size to my desired font size.\r\n\r\nBut I&#39;m having one issue with `TextInputLayout`. I can&#39;t increase their font size no matter what.\r\n\r\nMy solution:\r\n```java\r\npublic static void setFontSize(View view, int fontSize) {\r\n        if (view == null) {\r\n            return;\r\n        }\r\n\r\n//        if (view instanceof TextInputLayout) {\r\n//             ??? what am i supposed to do here ???\r\n//        } else\r\n        if (view instanceof MaterialButton) {\r\n            ((MaterialButton) view).setTextSize(fontSize);\r\n        } else if (view instanceof MaterialAutoCompleteTextView) {\r\n            ((MaterialAutoCompleteTextView) view).setTextSize(fontSize);\r\n        } else if (view instanceof AutoCompleteTextView) {\r\n            ((AutoCompleteTextView) view).setTextSize(fontSize);\r\n        } else if (view instanceof MaterialRadioButton) {\r\n            ((MaterialRadioButton) view).setTextSize(fontSize);\r\n        } else if (view instanceof Button) {\r\n            ((Button) view).setTextSize(fontSize);\r\n        } else if (view instanceof TextInputEditText) {\r\n            ((TextInputEditText) view).setTextSize(fontSize);\r\n        } else if (view instanceof MaterialTextView) {\r\n            ((MaterialTextView) view).setTextSize(fontSize);\r\n        } else if (view instanceof AppCompatTextView) {\r\n            ((AppCompatTextView) view).setTextSize(fontSize);\r\n        } else if (view instanceof TextView) {\r\n            ((TextView) view).setTextSize(fontSize);\r\n        } else if (view instanceof ViewGroup) {\r\n            ViewGroup group = (ViewGroup) view;\r\n            for (int i = 0; i &lt; group.getChildCount(); i++) {\r\n                setFontSize(group.getChildAt(i), fontSize);\r\n            }\r\n        }\r\n    }\r\n```\r\n**Somehow those labels are not being processed under this, so I can&#39;t set their type. Can you guys help me fix it?**\r\n\r\nI&#39;ve already seen these solutions:\r\n - https://stackoverflow.com/a/35203711/10305444\r\n - https://stackoverflow.com/a/35409950/10305444\r\n - https://stackoverflow.com/a/35738706/10305444\r\n\r\nBut they don&#39;t help me. (As they are providing static like solution, but I want to make it pure dynamic)","title":"changing text size all over activity, but labels of TextInputLayout are not affected","body":"<p>I'm trying to change font all over my application. I couldn't find any solution, but I'm doing this activity by activity.</p>\n<p>So I've written one function, which takes a view and if it's of certain view-type (text dervative), I set the text-size to my desired font size.</p>\n<p>But I'm having one issue with <code>TextInputLayout</code>. I can't increase their font size no matter what.</p>\n<p>My solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void setFontSize(View view, int fontSize) {\n        if (view == null) {\n            return;\n        }\n\n//        if (view instanceof TextInputLayout) {\n//             ??? what am i supposed to do here ???\n//        } else\n        if (view instanceof MaterialButton) {\n            ((MaterialButton) view).setTextSize(fontSize);\n        } else if (view instanceof MaterialAutoCompleteTextView) {\n            ((MaterialAutoCompleteTextView) view).setTextSize(fontSize);\n        } else if (view instanceof AutoCompleteTextView) {\n            ((AutoCompleteTextView) view).setTextSize(fontSize);\n        } else if (view instanceof MaterialRadioButton) {\n            ((MaterialRadioButton) view).setTextSize(fontSize);\n        } else if (view instanceof Button) {\n            ((Button) view).setTextSize(fontSize);\n        } else if (view instanceof TextInputEditText) {\n            ((TextInputEditText) view).setTextSize(fontSize);\n        } else if (view instanceof MaterialTextView) {\n            ((MaterialTextView) view).setTextSize(fontSize);\n        } else if (view instanceof AppCompatTextView) {\n            ((AppCompatTextView) view).setTextSize(fontSize);\n        } else if (view instanceof TextView) {\n            ((TextView) view).setTextSize(fontSize);\n        } else if (view instanceof ViewGroup) {\n            ViewGroup group = (ViewGroup) view;\n            for (int i = 0; i &lt; group.getChildCount(); i++) {\n                setFontSize(group.getChildAt(i), fontSize);\n            }\n        }\n    }\n</code></pre>\n<p><strong>Somehow those labels are not being processed under this, so I can't set their type. Can you guys help me fix it?</strong></p>\n<p>I've already seen these solutions:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/35203711/10305444\">https://stackoverflow.com/a/35203711/10305444</a></li>\n<li><a href=\"https://stackoverflow.com/a/35409950/10305444\">https://stackoverflow.com/a/35409950/10305444</a></li>\n<li><a href=\"https://stackoverflow.com/a/35738706/10305444\">https://stackoverflow.com/a/35738706/10305444</a></li>\n</ul>\n<p>But they don't help me. (As they are providing static like solution, but I want to make it pure dynamic)</p>\n"},{"tags":["java","scjp"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1430902852,"post_id":30072077,"comment_id":48258045,"body_markdown":"The sources are in src.zip.","body":"The sources are in src.zip."},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":1,"creation_date":1430902907,"post_id":30072077,"comment_id":48258085,"body_markdown":"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/PriorityQueue.java#587","body":"<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/PriorityQueue.java#587\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/open&zwnj;&#8203;jdk/&hellip;</a>"},{"owner":{"account_id":2012438,"reputation":6799,"user_id":1800583,"accept_rate":59,"display_name":"kittu"},"score":0,"creation_date":1430903228,"post_id":30072077,"comment_id":48258287,"body_markdown":"@JB Nizet: All Implemented Interfaces:\nSerializable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Queue&lt;E&gt;","body":"@JB Nizet: All Implemented Interfaces: Serializable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Queue&lt;E&gt;"},{"owner":{"account_id":2012438,"reputation":6799,"user_id":1800583,"accept_rate":59,"display_name":"kittu"},"score":1,"creation_date":1430903300,"post_id":30072077,"comment_id":48258334,"body_markdown":"@JBNizet That&#39;s all it implements. I can read it says natural ordering but it doesn&#39;t implement comparable if you see this: All Implemented Interfaces: Serializable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Queue&lt;E&gt;","body":"@JBNizet That&#39;s all it implements. I can read it says natural ordering but it doesn&#39;t implement comparable if you see this: All Implemented Interfaces: Serializable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Queue&lt;E&gt;"},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":2,"creation_date":1430904146,"post_id":30072077,"comment_id":48258929,"body_markdown":"`E` needs to implement `Comparable` or a `Comparator` needs to be defined, this is clearly stated in the doc. Why should `PriorityQueue` implement `Comparable`?","body":"<code>E</code> needs to implement <code>Comparable</code> or a <code>Comparator</code> needs to be defined, this is clearly stated in the doc. Why should <code>PriorityQueue</code> implement <code>Comparable</code>?"},{"owner":{"account_id":1110986,"reputation":223,"user_id":1101449,"accept_rate":80,"display_name":"jaypi"},"score":2,"creation_date":1430904931,"post_id":30072077,"comment_id":48259519,"body_markdown":"@JBNizet You may have missed this part of http://stackoverflow.com/tour\n\n&quot;Remember: we&#39;re all here to learn, so be friendly and helpful!&quot;\n\nEven though your answer is helpful, it could be friendlier.","body":"@JBNizet You may have missed this part of <a href=\"http://stackoverflow.com/tour\">stackoverflow.com/tour</a>  &quot;Remember: we&#39;re all here to learn, so be friendly and helpful!&quot;  Even though your answer is helpful, it could be friendlier."}],"answers":[{"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":" Shengyuan Lu"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1694543612,"creation_date":1430903055,"answer_id":30072190,"question_id":30072077,"body_markdown":"The actual internal data structure of `PriorityQueue` is not ordered. It is a **[heap][1]**. \r\n\r\n`PriorityQueue` doesn&#39;t need to be ordered. Instead, it focuses on **head** of data. Insertion is in *O(log n)* time. Sorting wastes time and is useless for a queue.\r\n\r\nMoreover, either the element is-a `Comparable`, or a `Comparator` is provided. Unfortunately, non-comparable checking is at **runtime**, rather than compile time. Once second element is added, `ClassCastException` occurs.\r\n\r\nPLUS: My answer to *why [1, 3, 2, 4] instead of prints [1, 2, 3, 4]*?\r\n\r\nAs I mentioned before, it&#39;s not ordered. Instead it focuses on head `q[0]` is minimum; that&#39;s it. \r\nYou could see the [1, 3, 2, 4] as a tree which is *not* linear:\r\n\r\n```lang-none\r\n1\r\n| \\\r\n3  2\r\n|\r\n4\r\n```\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Heap_(data_structure)\r\n","title":"Priority queue ordering of elements","body":"<p>The actual internal data structure of <code>PriorityQueue</code> is not ordered. It is a <strong><a href=\"http://en.wikipedia.org/wiki/Heap_(data_structure)\" rel=\"nofollow noreferrer\">heap</a></strong>.</p>\n<p><code>PriorityQueue</code> doesn't need to be ordered. Instead, it focuses on <strong>head</strong> of data. Insertion is in <em>O(log n)</em> time. Sorting wastes time and is useless for a queue.</p>\n<p>Moreover, either the element is-a <code>Comparable</code>, or a <code>Comparator</code> is provided. Unfortunately, non-comparable checking is at <strong>runtime</strong>, rather than compile time. Once second element is added, <code>ClassCastException</code> occurs.</p>\n<p>PLUS: My answer to <em>why [1, 3, 2, 4] instead of prints [1, 2, 3, 4]</em>?</p>\n<p>As I mentioned before, it's not ordered. Instead it focuses on head <code>q[0]</code> is minimum; that's it.\nYou could see the [1, 3, 2, 4] as a tree which is <em>not</em> linear:</p>\n<pre class=\"lang-none prettyprint-override\"><code>1\n| \\\n3  2\n|\n4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954291,"reputation":2907,"user_id":979872,"accept_rate":70,"display_name":"Hussein Zawawi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430904545,"creation_date":1430904545,"answer_id":30072752,"question_id":30072077,"body_markdown":"The priority queue relies on the following to order the elements:\r\n\r\n - Element must be a Comparable type\r\n - Need to provide Comparator implementation for the queue","title":"Priority queue ordering of elements","body":"<p>The priority queue relies on the following to order the elements:</p>\n\n<ul>\n<li>Element must be a Comparable type</li>\n<li>Need to provide Comparator implementation for the queue</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6239124,"reputation":21,"user_id":4853346,"display_name":"SAURAV AGGARWAL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430994982,"creation_date":1430994982,"answer_id":30098592,"question_id":30072077,"body_markdown":"Actually PriorityQueue allows only those elements which implements Comparable or you need to provide Custom Comparator.\r\n\r\nInteger and String values are allowed in Comparator because they implement Comparable interface. e.g.\r\npublic final class String  implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence\r\n\r\npublic final class Integer extends Number implements Comparable&lt;Integer&gt; \r\n\r\nIf you create your own class e.g Employee then it should implement Comparable or you should provide your custom Comparator.\r\n\r\nI hope this will resolve your queries!!!!","title":"Priority queue ordering of elements","body":"<p>Actually PriorityQueue allows only those elements which implements Comparable or you need to provide Custom Comparator.</p>\n\n<p>Integer and String values are allowed in Comparator because they implement Comparable interface. e.g.\npublic final class String  implements java.io.Serializable, Comparable, CharSequence</p>\n\n<p>public final class Integer extends Number implements Comparable </p>\n\n<p>If you create your own class e.g Employee then it should implement Comparable or you should provide your custom Comparator.</p>\n\n<p>I hope this will resolve your queries!!!!</p>\n"},{"tags":[],"owner":{"account_id":11117292,"reputation":277,"user_id":8161256,"display_name":"Saathvik"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1500443866,"creation_date":1500443866,"answer_id":45182025,"question_id":30072077,"body_markdown":"You are seeing that order because:&lt;br&gt;&lt;br&gt;\r\n1. Internally System.out.println() will be invoking the toString() method which in turn uses the iterator to iterate through the elements of the queue. But the iterator does not guarantee any specific order to traverse the elements. Refer this \r\n\r\n[http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html\r\n&lt;br&gt;2. Priority queue is based on priority heap. When an element is inserted without any comparator then priority queue uses siftUpComparable() method internally. siftUpComparable() compares the current element with the element at it&#39;s parent position in the heap. If the order is not correct then current element and parent element are swapped. This is done until the current element and parent element are in correct order. Ordering is based on natural order of the element. \r\n&lt;br&gt;&lt;br&gt;3. Since priority queue is based on priority heap its main focus will be on element in front of the queue. \r\nSo the elements are ordered when an element is dequeued from the queue using poll(). This is done to increase the performance of Priority queue. Priority queue only orders the elements when it requires.&lt;br&gt;\r\nIf you want to see the order as [1, 2, 3, 4] then use this \r\n\r\n    while(pq.size() != 0) { \r\n        System.out.println(pq.poll());\r\n    }\r\n\r\n","title":"Priority queue ordering of elements","body":"<p>You are seeing that order because:<br><br>\n1. Internally System.out.println() will be invoking the toString() method which in turn uses the iterator to iterate through the elements of the queue. But the iterator does not guarantee any specific order to traverse the elements. Refer this </p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html</a></p>\n\n<p><br>2. Priority queue is based on priority heap. When an element is inserted without any comparator then priority queue uses siftUpComparable() method internally. siftUpComparable() compares the current element with the element at it's parent position in the heap. If the order is not correct then current element and parent element are swapped. This is done until the current element and parent element are in correct order. Ordering is based on natural order of the element. \n<br><br>3. Since priority queue is based on priority heap its main focus will be on element in front of the queue. \nSo the elements are ordered when an element is dequeued from the queue using poll(). This is done to increase the performance of Priority queue. Priority queue only orders the elements when it requires.<br>\nIf you want to see the order as [1, 2, 3, 4] then use this </p>\n\n<pre><code>while(pq.size() != 0) { \n    System.out.println(pq.poll());\n}\n</code></pre>\n"}],"owner":{"account_id":2012438,"reputation":6799,"user_id":1800583,"accept_rate":59,"display_name":"kittu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24414,"favorite_count":0,"down_vote_count":3,"up_vote_count":16,"accepted_answer_id":30072190,"answer_count":4,"score":13,"last_activity_date":1694543612,"creation_date":1430902786,"question_id":30072077,"body_markdown":"How come the elements of priority queue are ordered according to natural order by default as it doesn&#39;t implement comparable interface?\r\n\r\nFrom [the documentation][1], it says elements are ordered based on natural ordering, but I can&#39;t find anywhere it talks about an equals method nor comparable. How is it happening internally?\r\n\r\n&gt; All Implemented Interfaces: Serializable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Queue&lt;E&gt;.\r\n\r\nIf it implements comparable, then why doesn&#39;t it say in the above line?\r\n\r\nExample:\r\n\r\n        public static void main(String[] args) {\r\n            PriorityQueue&lt;String&gt; pq = new PriorityQueue&lt;String&gt;();\r\n            pq.add(&quot;2&quot;);\r\n            pq.add(&quot;4&quot;);\r\n            System.out.println(pq); //prints [2, 4]\r\n            pq.offer(&quot;1&quot;);\r\n            System.out.println(pq); // prints [1, 4, 2]\r\n            pq.add(&quot;3&quot;);\r\n            System.out.println(pq); // prints [1, 3, 2, 4]\r\n        }\r\n    }\r\n\r\nAlso the third print statement prints [1, 3, 2, 4] instead of prints [1, 2, 3, 4]. Why? It should be natural ordering, right?\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\r\n\r\n\r\n","title":"Priority queue ordering of elements","body":"<p>How come the elements of priority queue are ordered according to natural order by default as it doesn't implement comparable interface?</p>\n<p>From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\">the documentation</a>, it says elements are ordered based on natural ordering, but I can't find anywhere it talks about an equals method nor comparable. How is it happening internally?</p>\n<blockquote>\n<p>All Implemented Interfaces: Serializable, Iterable, Collection, Queue.</p>\n</blockquote>\n<p>If it implements comparable, then why doesn't it say in the above line?</p>\n<p>Example:</p>\n<pre><code>    public static void main(String[] args) {\n        PriorityQueue&lt;String&gt; pq = new PriorityQueue&lt;String&gt;();\n        pq.add(&quot;2&quot;);\n        pq.add(&quot;4&quot;);\n        System.out.println(pq); //prints [2, 4]\n        pq.offer(&quot;1&quot;);\n        System.out.println(pq); // prints [1, 4, 2]\n        pq.add(&quot;3&quot;);\n        System.out.println(pq); // prints [1, 3, 2, 4]\n    }\n}\n</code></pre>\n<p>Also the third print statement prints [1, 3, 2, 4] instead of prints [1, 2, 3, 4]. Why? It should be natural ordering, right?</p>\n"},{"tags":["java","swing","graphics","look-and-feel","jmenu"],"comments":[{"owner":{"account_id":8803970,"reputation":6689,"user_id":6579265,"display_name":"George Z."},"score":1,"creation_date":1608526602,"post_id":65387329,"comment_id":115601687,"body_markdown":"[Same thing happens in Windows 7 as well](https://i.stack.imgur.com/Wzaf1.png)","body":"<a href=\"https://i.stack.imgur.com/Wzaf1.png\" rel=\"nofollow noreferrer\">Same thing happens in Windows 7 as well</a>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1608528454,"post_id":65387329,"comment_id":115602024,"body_markdown":"Works OK for me on Windows 10 using JDK 11.","body":"Works OK for me on Windows 10 using JDK 11."},{"owner":{"account_id":1151383,"reputation":36217,"user_id":1133011,"accept_rate":96,"display_name":"David Kroukamp"},"score":1,"creation_date":1608531318,"post_id":65387329,"comment_id":115602651,"body_markdown":"Same as OP and I have window 10, jdk1.8.0_261.","body":"Same as OP and I have window 10, jdk1.8.0_261."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1608570828,"post_id":65387329,"comment_id":115618519,"body_markdown":"I see the same results as you with your updated code. I don&#39;t see any problem with your code. I also downloaded the `MenuLookDemo` code from the Swing tutorial on [How to Use Menus](https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html), changed the code to use System LAF and get the same results.  so I would suggest this is a LAF bug.","body":"I see the same results as you with your updated code. I don&#39;t see any problem with your code. I also downloaded the <code>MenuLookDemo</code> code from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html\" rel=\"nofollow noreferrer\">How to Use Menus</a>, changed the code to use System LAF and get the same results.  so I would suggest this is a LAF bug."},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1608590823,"post_id":65387329,"comment_id":115626021,"body_markdown":"@GeorgeZ.What version of Java are you using?","body":"@GeorgeZ.What version of Java are you using?"},{"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1694185580,"post_id":65387329,"comment_id":135862528,"body_markdown":"This is probably because of different types of popups used: lightweight versus heavyweight. It seems like heavyweight popups work correctly whereas lightweight don&#39;t.","body":"This is probably because of different types of popups used: lightweight versus heavyweight. It seems like heavyweight popups work correctly whereas lightweight don&#39;t."},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1694450527,"post_id":65387329,"comment_id":135889545,"body_markdown":"@AlexeyIvanov What heavyweight component is being used though? These are all lightweight Swing components","body":"@AlexeyIvanov What heavyweight component is being used though? These are all lightweight Swing components"},{"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1694520621,"post_id":65387329,"comment_id":135899012,"body_markdown":"@Vince Menu items are rendered in `Popup`s. Take a look at [`PopupFactory.getPopup`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/PopupFactory.html#getPopup(java.awt.Component,java.awt.Component,int,int,boolean)): `isHeavyWeightPopup` specifies if the `Popup` will be heavyweight. Lightweight `Popup` windows are more efficient than heavyweight (native peer) windows. A lightweight popup uses a `JComponent` which is rendered in `JLayeredPane` whereas a heavyweight popup uses a `Window` that creates a _native window_.","body":"@Vince Menu items are rendered in <code>Popup</code>s. Take a look at <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/PopupFactory.html#getPopup(java.awt.Component,java.awt.Component,int,int,boolean)\" rel=\"nofollow noreferrer\"><code>PopupFactory.getPopup</code></a>: <code>isHeavyWeightPopup</code> specifies if the <code>Popup</code> will be heavyweight. Lightweight <code>Popup</code> windows are more efficient than heavyweight (native peer) windows. A lightweight popup uses a <code>JComponent</code> which is rendered in <code>JLayeredPane</code> whereas a heavyweight popup uses a <code>Window</code> that creates a <i>native window</i>."},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1694534166,"post_id":65387329,"comment_id":135902377,"body_markdown":"@AlexeyIvanov `JMenu` is using a `JPopupMenu`, which is a `JComponent`, https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/javax/swing/JMenu.java#L530-L537","body":"@AlexeyIvanov <code>JMenu</code> is using a <code>JPopupMenu</code>, which is a <code>JComponent</code>, <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/javax/swing/JMenu.java#L530-L537\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/java.desktop/share/&hellip;</a>"},{"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1694546131,"post_id":65387329,"comment_id":135904637,"body_markdown":"@Vince Look further: https://github.com/openjdk/jdk/blob/ac2dfe45d1b7fb9b99b0ba1402189de1791319b8/src/java.desktop/share/classes/javax/swing/JPopupMenu.java#L852-L878 Try calling [**`JPopupMenu.setLightWeightPopupEnabled`**](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JPopupMenu.html#setLightWeightPopupEnabled(boolean)) to disable lightweight popups: `fileMenu.getPopupMenu().setLightWeightPopupEnabled(false); newMenu.getPopupMenu().setLightWeightPopupEnabled(false);`","body":"@Vince Look further: <a href=\"https://github.com/openjdk/jdk/blob/ac2dfe45d1b7fb9b99b0ba1402189de1791319b8/src/java.desktop/share/classes/javax/swing/JPopupMenu.java#L852-L878\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/&hellip;</a> Try calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JPopupMenu.html#setLightWeightPopupEnabled(boolean)\" rel=\"nofollow noreferrer\"><b><code>JPopupMenu.setLightWeightPopupEnabled</code></b></a> to disable lightweight popups: <code>fileMenu.getPopupMenu().setLightWeightPopupEnabled(false); newMenu.getPopupMenu().setLightWeightPopupEnabled(false);</code>"},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1694671228,"post_id":65387329,"comment_id":135922310,"body_markdown":"@AlexeyIvanov Setting it to `false` would cause it to use a heavyweight component, which would mix lightweight &amp; heavyweight. The container is lightweight, so shouldnt the popup also be lightweight?","body":"@AlexeyIvanov Setting it to <code>false</code> would cause it to use a heavyweight component, which would mix lightweight &amp; heavyweight. The container is lightweight, so shouldnt the popup also be lightweight?"},{"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1694712348,"post_id":65387329,"comment_id":135930796,"body_markdown":"@Vince Did you try it? I explained above that a heavyweight popup is used automatically if it doesn&#39;t fit inside the `JFrame` bounds. No mixing will occur because heavyweight popups aren&#39;t added into `JFrame` hierarchy, they are native windows which are displayed on top of your frame and on top of other popups for that matter. Yet lightweight popups are added into `JLayeredPane` for rendering, so the lightweight popups become part of component hierarchy.","body":"@Vince Did you try it? I explained above that a heavyweight popup is used automatically if it doesn&#39;t fit inside the <code>JFrame</code> bounds. No mixing will occur because heavyweight popups aren&#39;t added into <code>JFrame</code> hierarchy, they are native windows which are displayed on top of your frame and on top of other popups for that matter. Yet lightweight popups are added into <code>JLayeredPane</code> for rendering, so the lightweight popups become part of component hierarchy."}],"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1694543536,"creation_date":1608522411,"question_id":65387329,"body_markdown":"# Bug Report\r\n\r\nThis has been confirmed as a bug. You can track it here:\r\n\r\nhttps://bugs.openjdk.org/browse/JDK-8258934\r\n\r\n# Background\r\n- There&#39;s no other code running besides what I&#39;ve posted in the MCVE; there are no other JVMs active when running this program (though I don&#39;t believe that should matter).\r\n\r\n- I do not have any programs installed which customizes the UI of my system.\r\n\r\n**Target Environment**\r\n\r\n    Java 1.8.0_201\r\n    Windows 10 Home Edition\r\n\r\n**Tested JDKs**\r\n  - JDK 8 to JDK 15\r\n\r\n**Tested by third party**\r\n- [George Z.](https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115601687_65387329) - Windows 7 - **Can reproduce bug**\r\n- [David Kroukamp](https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115602651_65387329) - Windows 10, JDK 10 - **Can reproduce bug**\r\n- [camickr](https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115602024_65387329) - Windows 10, JDK 11 - **Can reproduce bug**\r\n- Canvas (Discord) - Windows 10 - **Can reproduce bug**\r\n- Pawnee (Discord) - macOS Catalina 10.15.7, JDK 15 - ***Unable to reproduce bug***\r\n___\r\n\r\n# MCVE\r\n\r\n    import javax.swing.*;\r\n    \r\n    public class Demo {\r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(Demo::launchUI);\r\n        }\r\n    \r\n        private static void launchUI() {\r\n            try {\r\n                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            JFrame frame = new JFrame();\r\n            JMenuItem report = new JMenuItem(&quot;Report&quot;);\r\n            JMenu newMenu = new JMenu(&quot;New...&quot;);\r\n            JMenu fileMenu = new JMenu(&quot;File&quot;);\r\n            JMenuBar bar = new JMenuBar();\r\n    \r\n            newMenu.add(report);\r\n            fileMenu.add(newMenu);\r\n            bar.add(fileMenu);\r\n            frame.setJMenuBar(bar);\r\n            \r\n            frame.pack();\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setVisible(true);\r\n        }\r\n    }\r\n\r\n___\r\n# Reproduction Steps\r\n\r\n 1. Run the MCVE\r\n 2. Click through the menus\r\n 3. Resize the window\r\n 4. Click through the menus again\r\n\r\n___\r\n\r\n# MCVE Results\r\n\r\nWindows 10 machine targeting JDK 11 (though similar results on all tested major Java distributions):\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n- Menus give different render results before &amp; after resizing the window\r\n- There&#39;s overlap of the highlighting - the highlight of &quot;New...&quot; bleeds into the &quot;Report&quot; menu item.\r\n\r\n___\r\n\r\n- Sometimes the arrow of &quot;New...&quot; will get overlapped by &quot;Report&quot; as shown below.\r\n\r\n**Windows 7** - image by [George Z](https://stackoverflow.com/users/6579265/george-z)\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Windows 10, JDK** - image by Canvas (Discord)\r\n\r\n[![enter image description here][3]][3]\r\n\r\n___\r\n\r\n# New Findings\r\n\r\nThe highlight bug does not appear if part of the &quot;Report&quot; menu item is outside of the windows bounds.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThis was achieved by updating the popout offset for menus:\r\n\r\n    // apply this before creating any components\r\n    UIManager.put(&quot;Menu.menuPopupOffsetX&quot;, 20);\r\n    UIManager.put(&quot;Menu.menuPopupOffsetY&quot;, 20);\r\n\r\n___\r\n\r\n# Works on...\r\n - **macOS Catalina 10.15.7** - image by Pawnee (Discord)\r\n\r\n[![enter image description here][5]][5]\r\n___\r\n\r\n# Question\r\n\r\nDoes `JMenu` work properly with System L&amp;F, and if so, what am I missing to get proper results? (No extra spacing, no highlights bleeding into other components)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vuIku.gif\r\n  [2]: https://i.stack.imgur.com/Wzaf1.png\r\n  [3]: https://i.stack.imgur.com/acBpC.gif\r\n  [4]: https://i.stack.imgur.com/KnyQR.gif\r\n  [5]: https://i.stack.imgur.com/pkTJm.gif","title":"Why does JMenu not render correctly when using System L&amp;F?","body":"<h1>Bug Report</h1>\n<p>This has been confirmed as a bug. You can track it here:</p>\n<p><a href=\"https://bugs.openjdk.org/browse/JDK-8258934\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8258934</a></p>\n<h1>Background</h1>\n<ul>\n<li><p>There's no other code running besides what I've posted in the MCVE; there are no other JVMs active when running this program (though I don't believe that should matter).</p>\n</li>\n<li><p>I do not have any programs installed which customizes the UI of my system.</p>\n</li>\n</ul>\n<p><strong>Target Environment</strong></p>\n<pre><code>Java 1.8.0_201\nWindows 10 Home Edition\n</code></pre>\n<p><strong>Tested JDKs</strong></p>\n<ul>\n<li>JDK 8 to JDK 15</li>\n</ul>\n<p><strong>Tested by third party</strong></p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115601687_65387329\">George Z.</a> - Windows 7 - <strong>Can reproduce bug</strong></li>\n<li><a href=\"https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115602651_65387329\">David Kroukamp</a> - Windows 10, JDK 10 - <strong>Can reproduce bug</strong></li>\n<li><a href=\"https://stackoverflow.com/questions/65387329/why-does-jmenu-not-render-correctly-when-using-system-lf#comment115602024_65387329\">camickr</a> - Windows 10, JDK 11 - <strong>Can reproduce bug</strong></li>\n<li>Canvas (Discord) - Windows 10 - <strong>Can reproduce bug</strong></li>\n<li>Pawnee (Discord) - macOS Catalina 10.15.7, JDK 15 - <em><strong>Unable to reproduce bug</strong></em></li>\n</ul>\n<hr />\n<h1>MCVE</h1>\n<pre><code>import javax.swing.*;\n\npublic class Demo {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(Demo::launchUI);\n    }\n\n    private static void launchUI() {\n        try {\n            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {\n            e.printStackTrace();\n        }\n\n        JFrame frame = new JFrame();\n        JMenuItem report = new JMenuItem(&quot;Report&quot;);\n        JMenu newMenu = new JMenu(&quot;New...&quot;);\n        JMenu fileMenu = new JMenu(&quot;File&quot;);\n        JMenuBar bar = new JMenuBar();\n\n        newMenu.add(report);\n        fileMenu.add(newMenu);\n        bar.add(fileMenu);\n        frame.setJMenuBar(bar);\n        \n        frame.pack();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<hr />\n<h1>Reproduction Steps</h1>\n<ol>\n<li>Run the MCVE</li>\n<li>Click through the menus</li>\n<li>Resize the window</li>\n<li>Click through the menus again</li>\n</ol>\n<hr />\n<h1>MCVE Results</h1>\n<p>Windows 10 machine targeting JDK 11 (though similar results on all tested major Java distributions):</p>\n<p><a href=\"https://i.stack.imgur.com/vuIku.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vuIku.gif\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Menus give different render results before &amp; after resizing the window</li>\n<li>There's overlap of the highlighting - the highlight of &quot;New...&quot; bleeds into the &quot;Report&quot; menu item.</li>\n</ul>\n<hr />\n<ul>\n<li>Sometimes the arrow of &quot;New...&quot; will get overlapped by &quot;Report&quot; as shown below.</li>\n</ul>\n<p><strong>Windows 7</strong> - image by <a href=\"https://stackoverflow.com/users/6579265/george-z\">George Z</a></p>\n<p><a href=\"https://i.stack.imgur.com/Wzaf1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wzaf1.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Windows 10, JDK</strong> - image by Canvas (Discord)</p>\n<p><a href=\"https://i.stack.imgur.com/acBpC.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/acBpC.gif\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1>New Findings</h1>\n<p>The highlight bug does not appear if part of the &quot;Report&quot; menu item is outside of the windows bounds.</p>\n<p><a href=\"https://i.stack.imgur.com/KnyQR.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KnyQR.gif\" alt=\"enter image description here\" /></a></p>\n<p>This was achieved by updating the popout offset for menus:</p>\n<pre><code>// apply this before creating any components\nUIManager.put(&quot;Menu.menuPopupOffsetX&quot;, 20);\nUIManager.put(&quot;Menu.menuPopupOffsetY&quot;, 20);\n</code></pre>\n<hr />\n<h1>Works on...</h1>\n<ul>\n<li><strong>macOS Catalina 10.15.7</strong> - image by Pawnee (Discord)</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/pkTJm.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pkTJm.gif\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1>Question</h1>\n<p>Does <code>JMenu</code> work properly with System L&amp;F, and if so, what am I missing to get proper results? (No extra spacing, no highlights bleeding into other components)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1694544071,"post_id":77091797,"comment_id":135904299,"body_markdown":"A `List&lt;String&gt;` is not a `Collection&lt;Object&gt;`, so the `Object` overload is chosen.","body":"A <code>List&lt;String&gt;</code> is not a <code>Collection&lt;Object&gt;</code>, so the <code>Object</code> overload is chosen."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1694544120,"post_id":77091797,"comment_id":135904307,"body_markdown":"With the intermediate local variable the argument to `quoteContent()` is a `List&lt;String&gt;`. A `List&lt;String&gt;` **is not** a `List&lt;Object&gt;` (you can add only `String`s to a `List&lt;String&gt;`, but you can add all kinds of objects to a `List&lt;Object&gt;`.) In the first example the compiler infers the result of `Arrays.asList(&quot;1&quot;,null)` as a `List&lt;Object&gt;`.","body":"With the intermediate local variable the argument to <code>quoteContent()</code> is a <code>List&lt;String&gt;</code>. A <code>List&lt;String&gt;</code> <b>is not</b> a <code>List&lt;Object&gt;</code> (you can add only <code>String</code>s to a <code>List&lt;String&gt;</code>, but you can add all kinds of objects to a <code>List&lt;Object&gt;</code>.) In the first example the compiler infers the result of <code>Arrays.asList(&quot;1&quot;,null)</code> as a <code>List&lt;Object&gt;</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1694545032,"post_id":77091797,"comment_id":135904464,"body_markdown":"If I remove `QuoteContent (Object obj)`, I get a compiler error `List&lt;String&gt; cannot be converted to List&lt;Object&gt;` on `quoteContent(someList)`. If I restore it, but change `quoteContent (Collection&lt;Object&gt; obj)` to `quoteContent (Collection&lt;? extends Object&gt; obj)`, `QutoeContent (someList)` calls the method with the `Collection` argument.","body":"If I remove <code>QuoteContent (Object obj)</code>, I get a compiler error <code>List&lt;String&gt; cannot be converted to List&lt;Object&gt;</code> on <code>quoteContent(someList)</code>. If I restore it, but change <code>quoteContent (Collection&lt;Object&gt; obj)</code> to <code>quoteContent (Collection&lt;? extends Object&gt; obj)</code>, <code>QutoeContent (someList)</code> calls the method with the <code>Collection</code> argument."}],"owner":{"account_id":132051,"reputation":4348,"user_id":332517,"accept_rate":58,"display_name":"Rostislav Matl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694543950,"answer_count":0,"score":0,"last_activity_date":1694543384,"creation_date":1694543384,"question_id":77091797,"body_markdown":"I recently spoted type resolution behaviour in Java for which I&#39;m not sure what the reason is.\r\n\r\nFirst of all there was a utility class with two methods:\r\n\r\n    public static String quoteContent(Collection&lt;Object&gt; object) {\r\n       return ...\r\n    }\r\n\r\n    publis static String quoteContent(Object object) {\r\n       return ...\r\n    }\r\n\r\nWhen I call quoteContent() with collection returned from a method, e.g. this way:\r\n\r\n    quoteContent(Arrays.asList(&quot;1&quot;,null));\r\n\r\nthe `quoteContent(Collection&lt;Object&gt;)` is called as expected. \r\n\r\nBut if I use intermediate local variable, like this:\r\n\r\n    List&lt;String&gt; someList = new ArrayList();\r\n    someList.add(&quot;one&quot;);\r\n    quoteContent(someList);\r\n\r\nthen `quoteContent(Object)` is, a bit suprisingly, called instead - **why**?\r\n","title":"type/method resolution when using local variable vs method return value","body":"<p>I recently spoted type resolution behaviour in Java for which I'm not sure what the reason is.</p>\n<p>First of all there was a utility class with two methods:</p>\n<pre><code>public static String quoteContent(Collection&lt;Object&gt; object) {\n   return ...\n}\n\npublis static String quoteContent(Object object) {\n   return ...\n}\n</code></pre>\n<p>When I call quoteContent() with collection returned from a method, e.g. this way:</p>\n<pre><code>quoteContent(Arrays.asList(&quot;1&quot;,null));\n</code></pre>\n<p>the <code>quoteContent(Collection&lt;Object&gt;)</code> is called as expected.</p>\n<p>But if I use intermediate local variable, like this:</p>\n<pre><code>List&lt;String&gt; someList = new ArrayList();\nsomeList.add(&quot;one&quot;);\nquoteContent(someList);\n</code></pre>\n<p>then <code>quoteContent(Object)</code> is, a bit suprisingly, called instead - <strong>why</strong>?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":1,"creation_date":1694543694,"post_id":77091734,"comment_id":135904239,"body_markdown":"Why the use of `@Setter(AccessLevel.NONE)` ?","body":"Why the use of <code>@Setter(AccessLevel.NONE)</code> ?"},{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1694544888,"post_id":77091734,"comment_id":135904441,"body_markdown":"Did you tried to use public on the user field in Permission entity?","body":"Did you tried to use public on the user field in Permission entity?"},{"owner":{"account_id":14548039,"reputation":33,"user_id":10507767,"display_name":"Kh Nam"},"score":0,"creation_date":1694564885,"post_id":77091734,"comment_id":135907056,"body_markdown":"@PeterMmm I removed it but it still not working","body":"@PeterMmm I removed it but it still not working"},{"owner":{"account_id":14548039,"reputation":33,"user_id":10507767,"display_name":"Kh Nam"},"score":0,"creation_date":1694564917,"post_id":77091734,"comment_id":135907059,"body_markdown":"@stylepatrick, t tired it, but it sitll not working","body":"@stylepatrick, t tired it, but it sitll not working"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1694637161,"post_id":77091734,"comment_id":135919115,"body_markdown":"`org.springframework.security.web.access.intercept.AuthorizationFilter` makes part of the security framework of Spring. The exception tells that the request has not the required authorities. You should show the relevant code of security setup of your Spring app.","body":"<code>org.springframework.security.web.access.intercept.Authorizat&zwnj;&#8203;ionFilter</code> makes part of the security framework of Spring. The exception tells that the request has not the required authorities. You should show the relevant code of security setup of your Spring app."},{"owner":{"account_id":14548039,"reputation":33,"user_id":10507767,"display_name":"Kh Nam"},"score":0,"creation_date":1694663576,"post_id":77091734,"comment_id":135921637,"body_markdown":"Thanks @PeterMmm, i resloved my problem by adding     ```@Getter(AccessLevel.NONE)```. I&#39;m not sure why this makes it work.","body":"Thanks @PeterMmm, i resloved my problem by adding     <code>@Getter(AccessLevel.NONE)</code>. I&#39;m not sure why this makes it work."}],"owner":{"account_id":14548039,"reputation":33,"user_id":10507767,"display_name":"Kh Nam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694542819,"creation_date":1694542819,"question_id":77091734,"body_markdown":"I am trying to join the ```Permissions``` table with ```Users``` table via ```createdBy``` field. But I get the error below, I don&#39;t understand what the problem is, am I doing something wrong? And is there a better way for me to join the ```Permissions``` table with the ```Users``` table to get user information?\r\n\r\nMy error: \r\n```\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:520) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:463) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:340) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nUser Entity: \r\n```\r\nimport jakarta.persistence.*;\r\nimport lombok.AccessLevel;\r\nimport lombok.Data;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.ColumnDefault;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.util.Collection;\r\n\r\n@Entity(name = &quot;users&quot;)\r\n@Data\r\npublic class User implements UserDetails {\r\n\r\n    public User() {}\r\n\r\n    public User(String title, String firstName, String lastName, String middleName, String email, String password, LocalDate dob, String gender, String avatarUrl, Long roleId, Boolean status, String countryCode, String phoneNumber, String authenticationCode, LocalDateTime sendAuthenticationCodeAt, Long createdBy) {\r\n        this.title = title;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.middleName = middleName;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.dob = dob;\r\n        this.gender = gender;\r\n        this.avatarUrl = avatarUrl;\r\n        this.status = status;\r\n        this.countryCode = countryCode;\r\n        this.phoneNumber = phoneNumber;\r\n        this.authenticationCode = authenticationCode;\r\n        this.sendAuthenticationCodeAt = sendAuthenticationCodeAt;\r\n        this.createdBy = createdBy;\r\n    }\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false, length = 10)\r\n    private String title;\r\n\r\n    @Column(nullable = false, length = 20)\r\n    private String firstName;\r\n\r\n    @Column(nullable = false, length = 20)\r\n    private String lastName;\r\n\r\n    @Column(nullable = true, length = 20)\r\n    private String middleName;\r\n\r\n    @Column(nullable = false, length = 50, unique = true)\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    private String password;\r\n\r\n    private LocalDate dob;\r\n\r\n    @Column(nullable = false, length = 5)\r\n    private String gender;\r\n\r\n    private String avatarUrl;\r\n\r\n    @Column(nullable = false, columnDefinition = &quot;boolean default true&quot;)\r\n    private Boolean status;\r\n\r\n    @Column(length = 10)\r\n    private String countryCode;\r\n\r\n    @Column(length = 15)\r\n    private String phoneNumber;\r\n\r\n    @Column(length = 6)\r\n    private String authenticationCode;\r\n\r\n    private LocalDateTime sendAuthenticationCodeAt;\r\n\r\n    private int numberLoginFailed;\r\n\r\n    private String forgotPasswordToken;\r\n\r\n    @Column(nullable = false)\r\n    private Long createdBy;\r\n\r\n    @Column(nullable = false)\r\n    @ColumnDefault(&quot;CURRENT_TIMESTAMP&quot;)\r\n    private LocalDateTime createdAt;\r\n\r\n    private LocalDateTime updatedAt;\r\n\r\n    private Long deletedBy;\r\n\r\n    private LocalDateTime deletedAt;\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return status;\r\n    }\r\n\r\n    @Setter(AccessLevel.NONE)\r\n    @OneToOne(mappedBy = &quot;user&quot;)\r\n    private Permission permission;\r\n}\r\n\r\n\r\n```\r\n\r\nPermission entity: \r\n```\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AccessLevel;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\n@Entity(name = &quot;permissions&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class Permission {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    private String slug;\r\n\r\n    private Long createdBy;\r\n\r\n    private LocalDateTime createdAt;\r\n\r\n    @Setter(AccessLevel.NONE)\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;createdBy&quot;, referencedColumnName = &quot;id&quot;, insertable = false, updatable=false)\r\n    private User user;\r\n}\r\n\r\n```\r\nIf I quit connecting the 2 boards, the error message goes away and everything works normally.","title":"Access Denied when join with table User using JPA","body":"<p>I am trying to join the <code>Permissions</code> table with <code>Users</code> table via <code>createdBy</code> field. But I get the error below, I don't understand what the problem is, am I doing something wrong? And is there a better way for me to join the <code>Permissions</code> table with the <code>Users</code> table to get user information?</p>\n<p>My error:</p>\n<pre><code>org.springframework.security.access.AccessDeniedException: Access Denied\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-6.0.11.jar:6.0.11]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:520) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:463) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:340) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>User Entity:</p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.AccessLevel;\nimport lombok.Data;\nimport lombok.Setter;\nimport org.hibernate.annotations.ColumnDefault;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.Collection;\n\n@Entity(name = &quot;users&quot;)\n@Data\npublic class User implements UserDetails {\n\n    public User() {}\n\n    public User(String title, String firstName, String lastName, String middleName, String email, String password, LocalDate dob, String gender, String avatarUrl, Long roleId, Boolean status, String countryCode, String phoneNumber, String authenticationCode, LocalDateTime sendAuthenticationCodeAt, Long createdBy) {\n        this.title = title;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.middleName = middleName;\n        this.email = email;\n        this.password = password;\n        this.dob = dob;\n        this.gender = gender;\n        this.avatarUrl = avatarUrl;\n        this.status = status;\n        this.countryCode = countryCode;\n        this.phoneNumber = phoneNumber;\n        this.authenticationCode = authenticationCode;\n        this.sendAuthenticationCodeAt = sendAuthenticationCodeAt;\n        this.createdBy = createdBy;\n    }\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false, length = 10)\n    private String title;\n\n    @Column(nullable = false, length = 20)\n    private String firstName;\n\n    @Column(nullable = false, length = 20)\n    private String lastName;\n\n    @Column(nullable = true, length = 20)\n    private String middleName;\n\n    @Column(nullable = false, length = 50, unique = true)\n    private String email;\n\n    @Column(nullable = false)\n    private String password;\n\n    private LocalDate dob;\n\n    @Column(nullable = false, length = 5)\n    private String gender;\n\n    private String avatarUrl;\n\n    @Column(nullable = false, columnDefinition = &quot;boolean default true&quot;)\n    private Boolean status;\n\n    @Column(length = 10)\n    private String countryCode;\n\n    @Column(length = 15)\n    private String phoneNumber;\n\n    @Column(length = 6)\n    private String authenticationCode;\n\n    private LocalDateTime sendAuthenticationCodeAt;\n\n    private int numberLoginFailed;\n\n    private String forgotPasswordToken;\n\n    @Column(nullable = false)\n    private Long createdBy;\n\n    @Column(nullable = false)\n    @ColumnDefault(&quot;CURRENT_TIMESTAMP&quot;)\n    private LocalDateTime createdAt;\n\n    private LocalDateTime updatedAt;\n\n    private Long deletedBy;\n\n    private LocalDateTime deletedAt;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return null;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return status;\n    }\n\n    @Setter(AccessLevel.NONE)\n    @OneToOne(mappedBy = &quot;user&quot;)\n    private Permission permission;\n}\n\n\n</code></pre>\n<p>Permission entity:</p>\n<pre><code>\nimport jakarta.persistence.*;\nimport lombok.AccessLevel;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport java.time.LocalDateTime;\n\n@Entity(name = &quot;permissions&quot;)\n@Data\n@NoArgsConstructor\npublic class Permission {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    private String slug;\n\n    private Long createdBy;\n\n    private LocalDateTime createdAt;\n\n    @Setter(AccessLevel.NONE)\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;createdBy&quot;, referencedColumnName = &quot;id&quot;, insertable = false, updatable=false)\n    private User user;\n}\n\n</code></pre>\n<p>If I quit connecting the 2 boards, the error message goes away and everything works normally.</p>\n"},{"tags":["java","spring","spring-boot","lombok"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694542447,"creation_date":1694542447,"answer_id":77091693,"question_id":77091609,"body_markdown":"`@Data` includes `@RequiredArgsConstructor`, so a constructor will be generated with all `@NotNull` annotated properties. \r\n\r\nIf you also want to use a no-args constructor, you have to add `@NoArgsConstructor`\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @Entity\r\n    public class Category implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private Integer id;\r\n    \r\n        @NotNull\r\n        private String categoryName;\r\n    \r\n        @NotNull\r\n        private Integer totalResourceCount;\r\n    \r\n        @NotNull\r\n        private Integer categoryValue;\r\n    \r\n        @Column(updatable = false, nullable = false)\r\n        private Timestamp createdDate;\r\n    \r\n        @NotNull\r\n        private Timestamp updatedDate;\r\n    }\r\n\r\nNow the generate code includes both constructors","title":"NotNull annotation preventing builds in spring boot application","body":"<p><code>@Data</code> includes <code>@RequiredArgsConstructor</code>, so a constructor will be generated with all <code>@NotNull</code> annotated properties.</p>\n<p>If you also want to use a no-args constructor, you have to add <code>@NoArgsConstructor</code></p>\n<pre><code>@Data\n@NoArgsConstructor\n@Entity\npublic class Category implements Serializable {\n\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    @NotNull\n    private String categoryName;\n\n    @NotNull\n    private Integer totalResourceCount;\n\n    @NotNull\n    private Integer categoryValue;\n\n    @Column(updatable = false, nullable = false)\n    private Timestamp createdDate;\n\n    @NotNull\n    private Timestamp updatedDate;\n}\n</code></pre>\n<p>Now the generate code includes both constructors</p>\n"}],"owner":{"account_id":6646558,"reputation":415,"user_id":5130461,"display_name":"plbit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77091693,"answer_count":1,"score":0,"last_activity_date":1694542548,"creation_date":1694541621,"question_id":77091609,"body_markdown":"I am trying to run a spring boot app.\r\nI have a model class(Category) and a service class(CategoryService)\r\n corresponding to the model\r\n\r\nCategory.java\r\n```\r\n@Data\r\n@Entity\r\npublic class Category implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Integer id;\r\n\r\n    @NotNull\r\n    private String categoryName;\r\n\r\n    @NotNull\r\n    private Integer totalResourceCount;\r\n\r\n    @NotNull\r\n    private Integer categoryValue;\r\n\r\n    @Column(updatable = false, nullable = false)\r\n    private Timestamp createdDate;\r\n\r\n    @NotNull\r\n    private Timestamp updatedDate;\r\n}\r\n```\r\n\r\nCategoryService.java\r\n```\r\n@Service\r\npublic class CategoryService {\r\n\r\n    @Autowired\r\n    CategoryRepository categoryRepository;\r\n\r\n    public List&lt;CategoryDTO&gt; getAllCategories() {\r\n        List&lt;CategoryDTO&gt; categoryDTOList = new ArrayList&lt;&gt;();\r\n        List&lt;Category&gt; categories = categoryRepository.findAll(Sort.by(&quot;createdDate&quot;));\r\n        if (categories != null) {\r\n            categories.forEach(category -&gt; {\r\n                CategoryDTO categoryDTO = new CategoryDTO();\r\n                categoryDTO.setCategoryId(category.getId());\r\n                categoryDTO.setCategoryName(category.getCategoryName());\r\n                categoryDTO.setTotalResourceCount(category.getTotalResourceCount());\r\n                categoryDTO.setCategoryValue(category.getCategoryValue());\r\n                categoryDTOList.add(categoryDTO);\r\n            });\r\n        }\r\n        return categoryDTOList;\r\n    }\r\n\r\n    public void createCategory(CategoryDTO categoryDTO) {\r\n        Category category = new Category();\r\n        category.setCategoryName(categoryDTO.getCategoryName());\r\n        category.setCategoryValue(categoryDTO.getCategoryValue());\r\n        category.setTotalResourceCount(0);\r\n        category.setCreatedDate(DateUtil.getCurrentTimestamp());\r\n        category.setUpdatedDate(DateUtil.getCurrentTimestamp());\r\n        categoryRepository.save(category);\r\n    }\r\n}\r\n```\r\n\r\nWhen I try to build the project, I am getting the following erorr\r\n```\r\nCategoryService.java:[37,29] constructor Category in class Category cannot be applied to given types;\r\n[ERROR]   required: java.lang.String\r\n[ERROR]   found:    no arguments\r\n[ERROR]   reason: actual and formal argument lists differ in length\r\n```\r\n\r\nI understand that the error is due to instantiating the Category class without passing the `@NotNull` fields in the constructor. So I removed the `@NotNull` annotations and the build succeeds.  However, this is not desired as the `@NotNull` annotation have some connection to the field validations.\r\n\r\nWhat is the correct way to solve this issue other than removing the `@NotNull` annotation?\r\nDo I need to declare a constructor class in the Category model and then initialise the Category instance by passing all the field values that are `@NotNull` ?","title":"NotNull annotation preventing builds in spring boot application","body":"<p>I am trying to run a spring boot app.\nI have a model class(Category) and a service class(CategoryService)\ncorresponding to the model</p>\n<p>Category.java</p>\n<pre><code>@Data\n@Entity\npublic class Category implements Serializable {\n\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    @NotNull\n    private String categoryName;\n\n    @NotNull\n    private Integer totalResourceCount;\n\n    @NotNull\n    private Integer categoryValue;\n\n    @Column(updatable = false, nullable = false)\n    private Timestamp createdDate;\n\n    @NotNull\n    private Timestamp updatedDate;\n}\n</code></pre>\n<p>CategoryService.java</p>\n<pre><code>@Service\npublic class CategoryService {\n\n    @Autowired\n    CategoryRepository categoryRepository;\n\n    public List&lt;CategoryDTO&gt; getAllCategories() {\n        List&lt;CategoryDTO&gt; categoryDTOList = new ArrayList&lt;&gt;();\n        List&lt;Category&gt; categories = categoryRepository.findAll(Sort.by(&quot;createdDate&quot;));\n        if (categories != null) {\n            categories.forEach(category -&gt; {\n                CategoryDTO categoryDTO = new CategoryDTO();\n                categoryDTO.setCategoryId(category.getId());\n                categoryDTO.setCategoryName(category.getCategoryName());\n                categoryDTO.setTotalResourceCount(category.getTotalResourceCount());\n                categoryDTO.setCategoryValue(category.getCategoryValue());\n                categoryDTOList.add(categoryDTO);\n            });\n        }\n        return categoryDTOList;\n    }\n\n    public void createCategory(CategoryDTO categoryDTO) {\n        Category category = new Category();\n        category.setCategoryName(categoryDTO.getCategoryName());\n        category.setCategoryValue(categoryDTO.getCategoryValue());\n        category.setTotalResourceCount(0);\n        category.setCreatedDate(DateUtil.getCurrentTimestamp());\n        category.setUpdatedDate(DateUtil.getCurrentTimestamp());\n        categoryRepository.save(category);\n    }\n}\n</code></pre>\n<p>When I try to build the project, I am getting the following erorr</p>\n<pre><code>CategoryService.java:[37,29] constructor Category in class Category cannot be applied to given types;\n[ERROR]   required: java.lang.String\n[ERROR]   found:    no arguments\n[ERROR]   reason: actual and formal argument lists differ in length\n</code></pre>\n<p>I understand that the error is due to instantiating the Category class without passing the <code>@NotNull</code> fields in the constructor. So I removed the <code>@NotNull</code> annotations and the build succeeds.  However, this is not desired as the <code>@NotNull</code> annotation have some connection to the field validations.</p>\n<p>What is the correct way to solve this issue other than removing the <code>@NotNull</code> annotation?\nDo I need to declare a constructor class in the Category model and then initialise the Category instance by passing all the field values that are <code>@NotNull</code> ?</p>\n"},{"tags":["java","path","exec","network-shares"],"answers":[{"tags":[],"owner":{"account_id":17095,"reputation":6286,"user_id":37923,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1233416558,"creation_date":1233416558,"answer_id":499029,"question_id":499013,"body_markdown":"You&#39;re running on Windows but using Posix paths separators.  Try `&quot;cmd /C \\\\\\\\16.181.37.28\\\\dsc\\\\StartVisTsDataCenterMySql-log.bat&quot;`.","title":"Why am I getting a &quot;Path not correct&quot; error while running a batch file on a remote system?","body":"<p>You're running on Windows but using Posix paths separators.  Try <code>\"cmd /C \\\\\\\\16.181.37.28\\\\dsc\\\\StartVisTsDataCenterMySql-log.bat\"</code>.</p>\n"},{"tags":[],"owner":{"account_id":9431,"reputation":9825,"user_id":17428,"accept_rate":80,"display_name":"Eduard Wirch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1233417149,"creation_date":1233417149,"answer_id":499047,"question_id":499013,"body_markdown":"Are you trying to run the script ON THE REMOTE machine or ON YOUR LOCAL machine? Your approach will read the file from the remote machine but run it on your local.\r\n\r\nThe usual way to get something running on a remote machine is having a process on the remote machine to run permanently and listen for requests. If a request arrives this process will start your batch file you would like to have run.","title":"Why am I getting a &quot;Path not correct&quot; error while running a batch file on a remote system?","body":"<p>Are you trying to run the script ON THE REMOTE machine or ON YOUR LOCAL machine? Your approach will read the file from the remote machine but run it on your local.</p>\n\n<p>The usual way to get something running on a remote machine is having a process on the remote machine to run permanently and listen for requests. If a request arrives this process will start your batch file you would like to have run.</p>\n"},{"tags":[],"owner":{"account_id":17095,"reputation":6286,"user_id":37923,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694542496,"creation_date":1233430415,"answer_id":499397,"question_id":499013,"body_markdown":"You can test whether it works by creating a service:\r\n\r\n`sc \\\\16.181.37.28 create StartVisTsDataCenterMySql-Log binPath= &quot;cmd /c \\\\16.181.37.28\\dsc\\StartVisTsDataCenterMySql-log.bat&quot;`\r\n\r\nThen the command to run it is:\r\n\r\n`&quot;cmd /c sc \\\\16.181.37.28 stop StartVisTsDataCenterMySql-Log&amp;sc \\\\16.181.37.28 start StartVisTsDataCenterMySql-Log&quot;`\r\n\r\nYou&#39;ll need to be connected to the share as an administrator (or have the credentials saved).  Once you&#39;ve confirmed that works, change to [srvany][1], as you will get an error in the event log and the batch file will only be allowed to run for 30 seconds otherwise.\r\n\r\nIf that&#39;s not the right answer, perhaps you can elaborate on the [real requirement][2], and give some information on whether reimplementing the batch file in Java is a realistic solution.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20050530015514/http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd\r\n  [2]: https://devblogs.microsoft.com/oldnewthing/20060323-00/?p=31803","title":"Why am I getting a &quot;Path not correct&quot; error while running a batch file on a remote system?","body":"<p>You can test whether it works by creating a service:</p>\n<p><code>sc \\\\16.181.37.28 create StartVisTsDataCenterMySql-Log binPath= &quot;cmd /c \\\\16.181.37.28\\dsc\\StartVisTsDataCenterMySql-log.bat&quot;</code></p>\n<p>Then the command to run it is:</p>\n<p><code>&quot;cmd /c sc \\\\16.181.37.28 stop StartVisTsDataCenterMySql-Log&amp;sc \\\\16.181.37.28 start StartVisTsDataCenterMySql-Log&quot;</code></p>\n<p>You'll need to be connected to the share as an administrator (or have the credentials saved).  Once you've confirmed that works, change to <a href=\"https://web.archive.org/web/20050530015514/http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd\" rel=\"nofollow noreferrer\">srvany</a>, as you will get an error in the event log and the batch file will only be allowed to run for 30 seconds otherwise.</p>\n<p>If that's not the right answer, perhaps you can elaborate on the <a href=\"https://devblogs.microsoft.com/oldnewthing/20060323-00/?p=31803\" rel=\"nofollow noreferrer\">real requirement</a>, and give some information on whether reimplementing the batch file in Java is a realistic solution.</p>\n"}],"owner":{"display_name":"padmaja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694542496,"creation_date":1233416085,"question_id":499013,"body_markdown":"I need to run a batch file on a remote system from a local machine. Using the code below, I am getting the following error:\r\n\r\n    Path not correct\r\n\r\nI have the IP address of the machine, and I have given the batch file as public share and share name is `dsc`.\r\n\r\nThe IP address of the machine is 16.181.37.28.\r\n\r\nHere is my code. I know that the path is wrong. How can I give the exact path?\r\n\r\n    /*\r\n     * To change this template, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    \r\n    /**\r\n     *\r\n     * @author padmaja\r\n     */\r\n    \r\n    import java.io.*;\r\n    class Test{\r\n    public static void main(String arg[]){\r\n    try{\r\n    String command = &quot;cmd /C start 16.181.37.28/dsc/StartVisTsDataCenterMySql-log.bat&quot;;\r\n    Runtime rt = Runtime.getRuntime();\r\n    Process pr = rt.exec(command);\r\n    \r\n    }catch (IOException e) {\r\n    e.printStackTrace();\r\n    }\r\n    }\r\n    }","title":"Why am I getting a &quot;Path not correct&quot; error while running a batch file on a remote system?","body":"<p>I need to run a batch file on a remote system from a local machine. Using the code below, I am getting the following error:</p>\n\n<pre><code>Path not correct\n</code></pre>\n\n<p>I have the IP address of the machine, and I have given the batch file as public share and share name is <code>dsc</code>.</p>\n\n<p>The IP address of the machine is 16.181.37.28.</p>\n\n<p>Here is my code. I know that the path is wrong. How can I give the exact path?</p>\n\n<pre><code>/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\n\n/**\n *\n * @author padmaja\n */\n\nimport java.io.*;\nclass Test{\npublic static void main(String arg[]){\ntry{\nString command = \"cmd /C start 16.181.37.28/dsc/StartVisTsDataCenterMySql-log.bat\";\nRuntime rt = Runtime.getRuntime();\nProcess pr = rt.exec(command);\n\n}catch (IOException e) {\ne.printStackTrace();\n}\n}\n}\n</code></pre>\n"},{"tags":["java","generics","mockito"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1659025468,"post_id":73154507,"comment_id":129202937,"body_markdown":"checked [here](https://stackoverflow.com/questions/7366237/mockito-stubbing-methods-that-return-type-with-bounded-wild-cards/7655709#7655709)?","body":"checked <a href=\"https://stackoverflow.com/questions/7366237/mockito-stubbing-methods-that-return-type-with-bounded-wild-cards/7655709#7655709\">here</a>?"}],"answers":[{"tags":[],"owner":{"account_id":445785,"reputation":10573,"user_id":838434,"accept_rate":88,"display_name":"MaDa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659415915,"creation_date":1659415915,"answer_id":73202119,"question_id":73154507,"body_markdown":"[This][1] seems to be the most elegant answer:\r\n\r\n    when(x.getList()).thenAnswer(unused -&gt; Collections.singletonList(new X()));\r\n\r\nI still don&#39;t know what the problem is with the original statement, though.\r\n\r\n  [1]: https://stackoverflow.com/a/56791051/838434","title":"Mockito: cannot resolve method &#39;thenReturn(List&lt;capture of ? extends X&gt;)&#39;","body":"<p><a href=\"https://stackoverflow.com/a/56791051/838434\">This</a> seems to be the most elegant answer:</p>\n<pre><code>when(x.getList()).thenAnswer(unused -&gt; Collections.singletonList(new X()));\n</code></pre>\n<p>I still don't know what the problem is with the original statement, though.</p>\n"},{"tags":[],"owner":{"account_id":29425297,"reputation":1,"user_id":22546166,"display_name":"D. Michael Tepp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694542450,"creation_date":1694542450,"answer_id":77091694,"question_id":73154507,"body_markdown":"This works for me:\r\n\r\n            when((List&lt;X&gt;)x.getList()).thenReturn(Collections.singletonList(new X()));\r\n","title":"Mockito: cannot resolve method &#39;thenReturn(List&lt;capture of ? extends X&gt;)&#39;","body":"<p>This works for me:</p>\n<pre><code>        when((List&lt;X&gt;)x.getList()).thenReturn(Collections.singletonList(new X()));\n</code></pre>\n"}],"owner":{"account_id":445785,"reputation":10573,"user_id":838434,"accept_rate":88,"display_name":"MaDa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694542450,"creation_date":1659018442,"question_id":73154507,"body_markdown":"**I don&#39;t understand why this code with Java generics fails to compile**. Given this class:\r\n```\r\npublic static class X {\r\n    public List&lt;? extends X&gt; getList() {\r\n        return null;\r\n    }\r\n}\r\n```\r\nthere&#39;s no way to mock the `getList` return value:\r\n```\r\nX x = mock(X.class);\r\n// Error: Cannot resolve method &#39;thenReturn(List&lt;T&gt;)&#39;\r\nwhen(x.getList()).thenReturn(Collections.singletonList(new X()));\r\n// Error: Cannot resolve method &#39;thenReturn(List&lt;capture of ? extends X&gt;)&#39;\r\nwhen(x.getList()).thenReturn((List&lt;? extends X&gt;) Collections.singletonList(new X()));\r\n// Error: Cannot resolve method &#39;thenReturn(List&lt;capture of ?&gt;)&#39;\r\nwhen(x.getList()).thenReturn((List&lt;?&gt;) Collections.singletonList(new X()));\r\n```\r\nThe only way of making it work with &quot;when...then&quot; seems to be stripping generics entirely, at the cost of a compiler warning:\r\n```\r\nwhen(x.getList()).thenReturn((List) Collections.singletonList(new X()));\r\n```\r\nUltimately, only this works:\r\n```\r\ndoReturn(Collections.singletonList(new X())).when(x.getList());\r\n```","title":"Mockito: cannot resolve method &#39;thenReturn(List&lt;capture of ? extends X&gt;)&#39;","body":"<p><strong>I don't understand why this code with Java generics fails to compile</strong>. Given this class:</p>\n<pre><code>public static class X {\n    public List&lt;? extends X&gt; getList() {\n        return null;\n    }\n}\n</code></pre>\n<p>there's no way to mock the <code>getList</code> return value:</p>\n<pre><code>X x = mock(X.class);\n// Error: Cannot resolve method 'thenReturn(List&lt;T&gt;)'\nwhen(x.getList()).thenReturn(Collections.singletonList(new X()));\n// Error: Cannot resolve method 'thenReturn(List&lt;capture of ? extends X&gt;)'\nwhen(x.getList()).thenReturn((List&lt;? extends X&gt;) Collections.singletonList(new X()));\n// Error: Cannot resolve method 'thenReturn(List&lt;capture of ?&gt;)'\nwhen(x.getList()).thenReturn((List&lt;?&gt;) Collections.singletonList(new X()));\n</code></pre>\n<p>The only way of making it work with &quot;when...then&quot; seems to be stripping generics entirely, at the cost of a compiler warning:</p>\n<pre><code>when(x.getList()).thenReturn((List) Collections.singletonList(new X()));\n</code></pre>\n<p>Ultimately, only this works:</p>\n<pre><code>doReturn(Collections.singletonList(new X())).when(x.getList());\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-actuator","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1649830987,"post_id":71852726,"comment_id":126971963,"body_markdown":"Spring Cloud and Spring Boot are heavily tied together regarding versions. You cannot just upgrade Spring Boot when using Spring Cloud, you have to upgrade Spring Cloud as well. Also make sure that you aren&#39;t mixing versions of jars from Spring (Boot) or another dependency.","body":"Spring Cloud and Spring Boot are heavily tied together regarding versions. You cannot just upgrade Spring Boot when using Spring Cloud, you have to upgrade Spring Cloud as well. Also make sure that you aren&#39;t mixing versions of jars from Spring (Boot) or another dependency."},{"owner":{"account_id":4597473,"reputation":25,"user_id":3729090,"display_name":"user3729090"},"score":0,"creation_date":1649831945,"post_id":71852726,"comment_id":126972198,"body_markdown":"I am struck here for the last 2 days, not sure of correct versions for spring boot 2.5.12, can you pls help me with any doc @M.Deinum pls I would be forever grateful","body":"I am struck here for the last 2 days, not sure of correct versions for spring boot 2.5.12, can you pls help me with any doc @M.Deinum pls I would be forever grateful"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649832380,"post_id":71852726,"comment_id":126972305,"body_markdown":"As stated Spring Boot and Spring Cloud are tightly coupled, so if you upgrade Boot yuou also need to upgrade cloud. If you didn&#39;t it won&#39;t work. Without seeing more of your application (the dependencies) this will be impossible to answer.","body":"As stated Spring Boot and Spring Cloud are tightly coupled, so if you upgrade Boot yuou also need to upgrade cloud. If you didn&#39;t it won&#39;t work. Without seeing more of your application (the dependencies) this will be impossible to answer."},{"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"score":1,"creation_date":1649970848,"post_id":71852726,"comment_id":127015135,"body_markdown":"The table that shows Spring Boot and Spring Cloud compatible versions is on this page: https://spring.io/projects/spring-cloud","body":"The table that shows Spring Boot and Spring Cloud compatible versions is on this page: <a href=\"https://spring.io/projects/spring-cloud\" rel=\"nofollow noreferrer\">spring.io/projects/spring-cloud</a>"},{"owner":{"account_id":4597473,"reputation":25,"user_id":3729090,"display_name":"user3729090"},"score":0,"creation_date":1650302427,"post_id":71852726,"comment_id":127077896,"body_markdown":"@M.Deinum I have added my dependencies list, can you please help me why this thing is not working, i have changed my cloud version to 2020.0.5 as specified.I am seriously clueless of why this is occuring, Please help","body":"@M.Deinum I have added my dependencies list, can you please help me why this thing is not working, i have changed my cloud version to 2020.0.5 as specified.I am seriously clueless of why this is occuring, Please help"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":4,"creation_date":1650346274,"post_id":71852726,"comment_id":127086520,"body_markdown":"For starters stop with all the exclusions and manually inclusions... That will only make things worse.","body":"For starters stop with all the exclusions and manually inclusions... That will only make things worse."},{"owner":{"account_id":8986718,"reputation":2467,"user_id":6700081,"accept_rate":73,"display_name":"firstpostcommenter"},"score":0,"creation_date":1653550293,"post_id":71852726,"comment_id":127880499,"body_markdown":"I faced the same problem when using latest spring boot version with `io.github.resilience4j` dependencies. Spring boot actuator dependency need to be added to pom file but that alone did not resolve the error so I also had to check the resilience4j dependencies. https://stackoverflow.com/questions/60587334/getting-compatible-version-issue-when-running-spring-boot-application-however-in","body":"I faced the same problem when using latest spring boot version with <code>io.github.resilience4j</code> dependencies. Spring boot actuator dependency need to be added to pom file but that alone did not resolve the error so I also had to check the resilience4j dependencies. <a href=\"https://stackoverflow.com/questions/60587334/getting-compatible-version-issue-when-running-spring-boot-application-however-in\" title=\"getting compatible version issue when running spring boot application however in\">stackoverflow.com/questions/60587334/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":24934492,"reputation":1,"user_id":18801236,"display_name":"Empire residency"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1649922714,"creation_date":1649922714,"answer_id":71868199,"question_id":71852726,"body_markdown":"Please try this, its worked for us\r\n\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.10&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;","title":"Actuator Class not found after 2.5.12 upgrade","body":"<p>Please try this, its worked for us</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n                &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n        &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n        &lt;version&gt;1.7.10&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16683260,"reputation":11,"user_id":12057824,"display_name":"Subarna Sekhar Muni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690874733,"creation_date":1690874733,"answer_id":76809352,"question_id":71852726,"body_markdown":"Check if you have `resilience4j-spring-boot2` dependency. Update that to 1.7.0","title":"Actuator Class not found after 2.5.12 upgrade","body":"<p>Check if you have <code>resilience4j-spring-boot2</code> dependency. Update that to 1.7.0</p>\n"}],"owner":{"account_id":4597473,"reputation":25,"user_id":3729090,"display_name":"user3729090"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5434,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694541950,"creation_date":1649830665,"question_id":71852726,"body_markdown":"After upgrading to 2.5.12 from 2.3 I am getting the following exception:\r\n\r\n&gt; java.lang.IllegalArgumentException: Could not find class [org.springframework.boot.actuate.autoconfigure.health.HealthIndicatorAutoConfiguration]\r\n\r\nIncluding the dependency manually:\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;\r\n  &lt;artifactid&gt;spring-boot-starter-actuator&lt;/artifactid&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nBut still this issue exists. I use Java 11, spring cloud  2020.0.4, io.pivotal.spring.cloud 3.4.0, wavefront 2.2.1, spring-sleuth: 3.0.4.\r\n\r\nLog:\r\n\r\n```\r\n2022-04-12 23:00:49.370 ERROR [traceId-,spanId-] [main] o.s.boot.SpringApplication : Application run failed\r\n2022-04-13T11:30:54.31+0530 [APP/PROC/WEB/0] OUT java.lang.IllegalArgumentException: Could not find class [org.springframework.boot.actuate.autoconfigure.health.HealthIndicatorAutoConfiguration]\r\n2022-04-13T11:30:54.41+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:334)\r\n2022-04-13T11:30:54.51+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.annotation.TypeMappedAnnotation.adapt(TypeMappedAnnotation.java:446)\r\n2022-04-13T11:30:54.61+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.annotation.TypeMappedAnnotation.getValue(TypeMappedAnnotation.java:369)\r\n2022-04-13T11:30:54.71+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.annotation.TypeMappedAnnotation.asMap(TypeMappedAnnotation.java:284)\r\n2022-04-13T11:30:54.81+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.annotation.AbstractMergedAnnotation.asAnnotationAttributes(AbstractMergedAnnotation.java:193)\r\n2022-04-13T11:30:54.91+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:106)\r\n2022-04-13T11:30:55.01+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:81)\r\n2022-04-13T11:30:55.11+0530 [APP/PROC/WEB/0] OUT app instance exceeded log rate limit (10 log-lines/sec) set by platform operator\r\n2022-04-13T11:30:55.11+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.context.annotation.AnnotationConfigUtils.attributesFor(AnnotationConfigUtils.java:285)\r\n2022-04-13T11:30:55.21+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.context.annotation.AnnotationBeanNameGenerator.determineBeanNameFromAnnotation(AnnotationBeanNameGenerator.java:103)\r\n2022-04-13T11:30:55.31+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.context.annotation.AnnotationBeanNameGenerator.generateBeanName(AnnotationBeanNameGenerator.java:82)\r\n2022-04-13T11:30:55.41+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.registerBeanDefinitionForImportedConfigurationClass(ConfigurationClassBeanDefinitionReader.java:169)\r\n2022-04-13T11:30:55.51+0530 [APP/PROC/WEB/0] OUT \tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:150)\r\n```\r\n\r\nPom dependencies:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.wavefront&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;wavefront-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n  &lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;\r\n\t\t\t\t\t\tspring-boot-starter-actuator\r\n\t\t\t\t\t&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;\r\n\t\t\t\t\t\t\t\tcom.fasterxml.jackson.core\r\n\t\t\t\t\t\t\t&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;\r\n\t\t\t\t\t\t\t\tcom.fasterxml.jackson.core\r\n\t\t\t\t\t\t\t&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;\r\n\t\t\t\t\t\t\t\tcom.fasterxml.jackson.core\r\n\t\t\t\t\t\t\t&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;\r\n\t\t\t\t\t\t\t\tspring-boot-autoconfigure\r\n\t\t\t\t\t\t\t&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t\t&lt;/exclusions&gt;\r\n  &lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n    &lt;exclusions&gt;\r\n    \t&lt;exclusion&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t&lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Spring Cloud Dependencies --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-vault-config&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;caffeine&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Zipkin Dependencies --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-stream-kafka&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring.cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t &lt;dependency&gt;\r\n        &lt;groupId&gt;com.wavefront&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wavefront-spring-boot-bom&lt;/artifactId&gt;\r\n        &lt;version&gt;${wavefront.version}&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n  &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\n\r\nI have tried excluding conflicting dependency, adding manually, adding jar as external dependency. Cloud dependency is correctly configured. Why this is not loading `actuate.autoconfigure.health.HealthIndicatorAutoConfiguration` class?","title":"Actuator Class not found after 2.5.12 upgrade","body":"<p>After upgrading to 2.5.12 from 2.3 I am getting the following exception:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Could not find class [org.springframework.boot.actuate.autoconfigure.health.HealthIndicatorAutoConfiguration]</p>\n</blockquote>\n<p>Including the dependency manually:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;\n  &lt;artifactid&gt;spring-boot-starter-actuator&lt;/artifactid&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But still this issue exists. I use Java 11, spring cloud  2020.0.4, io.pivotal.spring.cloud 3.4.0, wavefront 2.2.1, spring-sleuth: 3.0.4.</p>\n<p>Log:</p>\n<pre><code>2022-04-12 23:00:49.370 ERROR [traceId-,spanId-] [main] o.s.boot.SpringApplication : Application run failed\n2022-04-13T11:30:54.31+0530 [APP/PROC/WEB/0] OUT java.lang.IllegalArgumentException: Could not find class [org.springframework.boot.actuate.autoconfigure.health.HealthIndicatorAutoConfiguration]\n2022-04-13T11:30:54.41+0530 [APP/PROC/WEB/0] OUT    at org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:334)\n2022-04-13T11:30:54.51+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.annotation.TypeMappedAnnotation.adapt(TypeMappedAnnotation.java:446)\n2022-04-13T11:30:54.61+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.annotation.TypeMappedAnnotation.getValue(TypeMappedAnnotation.java:369)\n2022-04-13T11:30:54.71+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.annotation.TypeMappedAnnotation.asMap(TypeMappedAnnotation.java:284)\n2022-04-13T11:30:54.81+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.annotation.AbstractMergedAnnotation.asAnnotationAttributes(AbstractMergedAnnotation.java:193)\n2022-04-13T11:30:54.91+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:106)\n2022-04-13T11:30:55.01+0530 [APP/PROC/WEB/0] OUT    at org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:81)\n2022-04-13T11:30:55.11+0530 [APP/PROC/WEB/0] OUT app instance exceeded log rate limit (10 log-lines/sec) set by platform operator\n2022-04-13T11:30:55.11+0530 [APP/PROC/WEB/0] OUT    at org.springframework.context.annotation.AnnotationConfigUtils.attributesFor(AnnotationConfigUtils.java:285)\n2022-04-13T11:30:55.21+0530 [APP/PROC/WEB/0] OUT    at org.springframework.context.annotation.AnnotationBeanNameGenerator.determineBeanNameFromAnnotation(AnnotationBeanNameGenerator.java:103)\n2022-04-13T11:30:55.31+0530 [APP/PROC/WEB/0] OUT    at org.springframework.context.annotation.AnnotationBeanNameGenerator.generateBeanName(AnnotationBeanNameGenerator.java:82)\n2022-04-13T11:30:55.41+0530 [APP/PROC/WEB/0] OUT    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.registerBeanDefinitionForImportedConfigurationClass(ConfigurationClassBeanDefinitionReader.java:169)\n2022-04-13T11:30:55.51+0530 [APP/PROC/WEB/0] OUT    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:150)\n</code></pre>\n<p>Pom dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;com.wavefront&lt;/groupId&gt;\n            &lt;artifactId&gt;wavefront-spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;\n                        spring-boot-starter-actuator\n                    &lt;/artifactId&gt;\n                    &lt;exclusions&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;\n                                com.fasterxml.jackson.core\n                            &lt;/groupId&gt;\n                            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;\n                                com.fasterxml.jackson.core\n                            &lt;/groupId&gt;\n                            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;\n                                com.fasterxml.jackson.core\n                            &lt;/groupId&gt;\n                            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                            &lt;artifactId&gt;\n                                spring-boot-autoconfigure\n                            &lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                    &lt;/exclusions&gt;\n  &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n&lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Cloud Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-vault-config&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\n            &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Zipkin Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-stream-kafka&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring.cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n             &lt;dependency&gt;\n        &lt;groupId&gt;com.wavefront&lt;/groupId&gt;\n        &lt;artifactId&gt;wavefront-spring-boot-bom&lt;/artifactId&gt;\n        &lt;version&gt;${wavefront.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n  &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>I have tried excluding conflicting dependency, adding manually, adding jar as external dependency. Cloud dependency is correctly configured. Why this is not loading <code>actuate.autoconfigure.health.HealthIndicatorAutoConfiguration</code> class?</p>\n"},{"tags":["java","selenium-webdriver","browser","screen-resolution","window-size"],"answers":[{"tags":[],"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1456747703,"creation_date":1456747703,"answer_id":35699185,"question_id":35697931,"body_markdown":"The screen resolution and browser window size are not necessarily equal.\r\n\r\nResolution ([from wikipedia](https://en.wikipedia.org/wiki/Display_resolution)) is\r\n\r\n&gt; The display resolution or display modes of a digital television,\r\n&gt; computer monitor or display device is the number of distinct pixels in\r\n&gt; each dimension that can be displayed ... &quot;1024 &#215; 768&quot; means the width is 1024 pixels and the height is 768 pixels\r\n\r\nWhile `getSize()` is returning the actual *browser* size.","title":"How to get the current window size with Selenium Webdriver?","body":"<p>The screen resolution and browser window size are not necessarily equal.</p>\n\n<p>Resolution (<a href=\"https://en.wikipedia.org/wiki/Display_resolution\" rel=\"noreferrer\">from wikipedia</a>) is</p>\n\n<blockquote>\n  <p>The display resolution or display modes of a digital television,\n  computer monitor or display device is the number of distinct pixels in\n  each dimension that can be displayed ... \"1024  768\" means the width is 1024 pixels and the height is 768 pixels</p>\n</blockquote>\n\n<p>While <code>getSize()</code> is returning the actual <em>browser</em> size.</p>\n"},{"tags":[],"owner":{"account_id":6244293,"reputation":3872,"user_id":4856814,"display_name":"murali selenium"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1578015410,"creation_date":1456748611,"answer_id":35699495,"question_id":35697931,"body_markdown":"As we know Selenium interacts with browsers and these `get` methods will retrieve info related to browsers only.  As explained in other answers very clearly, screen resolution and browser are different. The simple example below shows very clearly that the web driver is getting only the browser&#39;s dimensions.\r\n\r\n    \tWebDriver driver=new FirefoxDriver();\r\n\t\tdriver.get(&quot;http://www.google.com&quot;);\r\n\t\tSystem.out.println(driver.manage().window().getSize()); //output: (994, 718)\r\n\t\t\r\n\t\tdriver.manage().window().maximize();\r\n\t\tSystem.out.println(driver.manage().window().getSize()); //output: (1382, 744)","title":"How to get the current window size with Selenium Webdriver?","body":"<p>As we know Selenium interacts with browsers and these <code>get</code> methods will retrieve info related to browsers only.  As explained in other answers very clearly, screen resolution and browser are different. The simple example below shows very clearly that the web driver is getting only the browser's dimensions.</p>\n\n<pre><code>    WebDriver driver=new FirefoxDriver();\n    driver.get(\"http://www.google.com\");\n    System.out.println(driver.manage().window().getSize()); //output: (994, 718)\n\n    driver.manage().window().maximize();\n    System.out.println(driver.manage().window().getSize()); //output: (1382, 744)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2616296,"reputation":1932,"user_id":2265283,"accept_rate":7,"display_name":"Eyal Sooliman"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1528960637,"creation_date":1477496191,"answer_id":40266494,"question_id":35697931,"body_markdown":"        Dimension initial_size = driver.manage().window().getSize();\r\n        int height = initial_size.getHeight();\r\n        int width = initial_size.getWidth();","title":"How to get the current window size with Selenium Webdriver?","body":"<pre><code>    Dimension initial_size = driver.manage().window().getSize();\n    int height = initial_size.getHeight();\n    int width = initial_size.getWidth();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2361354,"reputation":20967,"user_id":2067976,"accept_rate":69,"display_name":"Andriy Ivaneyko"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1482142252,"creation_date":1482142252,"answer_id":41220205,"question_id":35697931,"body_markdown":"For **python** selenium webdriver  use function [get_window_size](http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.get_window_size):\r\n\r\n    driver.get_window_size()\r\n    &quot;&quot;&quot;\r\n    Output:\r\n    {\r\n      &quot;width&quot;: 1255,\r\n      &quot;height&quot;: 847,\r\n      &quot;hCode&quot;: 939524096,\r\n      &quot;class&quot;: &quot;org.openqa.selenium.Dimension&quot;\r\n    }\r\n    &quot;&quot;&quot;","title":"How to get the current window size with Selenium Webdriver?","body":"<p>For <strong>python</strong> selenium webdriver  use function <a href=\"http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.get_window_size\" rel=\"noreferrer\">get_window_size</a>:</p>\n\n<pre><code>driver.get_window_size()\n\"\"\"\nOutput:\n{\n  \"width\": 1255,\n  \"height\": 847,\n  \"hCode\": 939524096,\n  \"class\": \"org.openqa.selenium.Dimension\"\n}\n\"\"\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22176703,"reputation":222,"user_id":16421119,"display_name":"Henul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646467609,"creation_date":1646467609,"answer_id":71360510,"question_id":35697931,"body_markdown":"try this:\r\n```\r\nfrom selenium import webdriver\r\ndriver = webdriver.Chrome(&#39;C/Program Files/Chromedriver&#39;) #Chromedriver location\r\nprint(driver.get_window_size())\r\n```","title":"How to get the current window size with Selenium Webdriver?","body":"<p>try this:</p>\n<pre><code>from selenium import webdriver\ndriver = webdriver.Chrome('C/Program Files/Chromedriver') #Chromedriver location\nprint(driver.get_window_size())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3926947,"reputation":25936,"user_id":3247006,"display_name":"Super Kai - Kazuya Ito"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694541774,"creation_date":1694541774,"answer_id":77091629,"question_id":35697931,"body_markdown":"In Python, you can use [get_window_size()][1] to get the current window size as shown below:\r\n\r\n```python\r\nfrom selenium import webdriver\r\n\r\ndriver = webdriver.Chrome()\r\nprint(driver.get_window_size()) # {&#39;width&#39;: 945, &#39;height&#39;: 1012}\r\nprint(driver.get_window_size().get(&#39;width&#39;)) # 945\r\nprint(driver.get_window_size().get(&#39;height&#39;)) # 1012\r\nprint(driver.get_window_size()[&#39;width&#39;]) # 945\r\nprint(driver.get_window_size()[&#39;height&#39;]) # 1012\r\n```\r\n\r\n\r\n  [1]: https://www.selenium.dev/documentation/webdriver/interactions/windows/#get-window-size","title":"How to get the current window size with Selenium Webdriver?","body":"<p>In Python, you can use <a href=\"https://www.selenium.dev/documentation/webdriver/interactions/windows/#get-window-size\" rel=\"nofollow noreferrer\">get_window_size()</a> to get the current window size as shown below:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from selenium import webdriver\n\ndriver = webdriver.Chrome()\nprint(driver.get_window_size()) # {'width': 945, 'height': 1012}\nprint(driver.get_window_size().get('width')) # 945\nprint(driver.get_window_size().get('height')) # 1012\nprint(driver.get_window_size()['width']) # 945\nprint(driver.get_window_size()['height']) # 1012\n</code></pre>\n"}],"owner":{"account_id":950302,"reputation":966,"user_id":976597,"accept_rate":50,"display_name":"Nikhil Surendran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52457,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":6,"score":11,"last_activity_date":1694541950,"creation_date":1456743846,"question_id":35697931,"body_markdown":"I am running on Screen Resolution of (1366 X 768 ), but when I call `getSize().getWidth()` and `getSize().getHeight()` methods , the result I&#39;m getting is:\r\n\r\n&gt; Size of Width is : 1382 Size of Height is : 744\r\n\r\nfor IE, FF and Chrome web pages. URL used: https://www.google.com","title":"How to get the current window size with Selenium Webdriver?","body":"<p>I am running on Screen Resolution of (1366 X 768 ), but when I call <code>getSize().getWidth()</code> and <code>getSize().getHeight()</code> methods , the result I'm getting is:</p>\n\n<blockquote>\n  <p>Size of Width is : 1382 Size of Height is : 744</p>\n</blockquote>\n\n<p>for IE, FF and Chrome web pages. URL used: <a href=\"https://www.google.com\" rel=\"noreferrer\">https://www.google.com</a></p>\n"},{"tags":["java","algorithm","search"],"comments":[{"owner":{"account_id":285492,"reputation":77387,"user_id":584192,"accept_rate":100,"display_name":"Samuel Liew"},"score":0,"creation_date":1680155539,"post_id":75846666,"comment_id":133850533,"body_markdown":"**Comments have been [moved to chat](https://chat.stackoverflow.com/rooms/252864/discussion-on-question-by-astropower-search-in-almost-sorted-array); please do not continue the discussion here.** Before posting a comment below this one, please review the [purposes of comments](/help/privileges/comment). Comments that do not request clarification or suggest improvements usually belong as an [answer](/help/how-to-answer), on [meta], or in [chat]. Comments continuing discussion may be removed.","body":"<b>Comments have been <a href=\"https://chat.stackoverflow.com/rooms/252864/discussion-on-question-by-astropower-search-in-almost-sorted-array\">moved to chat</a>; please do not continue the discussion here.</b> Before posting a comment below this one, please review the <a href=\"/help/privileges/comment\">purposes of comments</a>. Comments that do not request clarification or suggest improvements usually belong as an <a href=\"/help/how-to-answer\">answer</a>, on <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a>, or in <a href=\"https://chat.stackoverflow.com/\">Stack Overflow Chat</a>. Comments continuing discussion may be removed."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679827775,"creation_date":1679827375,"answer_id":75847220,"question_id":75846666,"body_markdown":"To establish an efficient algorithm, having a O(&#119896;log&#119899;) time complexity, we could follow these guidelines:\r\n\r\n* In one iteration of the binary-search loop no more than *k* zero values should be visited;\r\n* The same (zero) value should not be visited more than once\r\n\r\nAn idea would be to look &quot;around&quot; the `mid` index that the binary search algorithm would determine, looking for a non-zero value. So we would first look at `a[mid]`, then `a[mid-1]` `a[mid+1]` `a[mid-2]`, ...etc. If this search gets out of the `low..high` range, then this means there is no non-zero value in that range and the search should return -1 (failure)\r\n\r\nWhen the `low..high` range is narrowed down, then this should exclude the zeroes that were already checked. \r\n\r\nHere is an implementation:\r\n\r\n```java\r\n    public static int kAlmostSearch(int[] a, int num) {\r\n        int low = 0;\r\n        int high = a.length;\r\n        \r\n        while (low &lt; high) {\r\n            int mid = (low + high) / 2;\r\n            // Look around for non zero value:\r\n            int m = mid, add = -1;\r\n            while (a[m] == 0) {\r\n                m += add;\r\n                // If there is no non-zero value in the range [low, high): not found\r\n                if (m &lt; low || m &gt;= high) return -1;\r\n                add = -add + (add &gt; 0 ? -1 : 1);\r\n            }\r\n            if (a[m] == num) return mid;\r\n            // When narrowing the window, make sure to exclude the zeroes we already saw\r\n            if (num &lt; a[m]) {\r\n                high = Math.min(m, mid);\r\n            } else {\r\n                low = Math.max(m, mid) + 1;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n```\r\n\r\nNB: In this code, `high` is such that `a[high]` is not part of the current range.","title":"Search in almost sorted array","body":"<p>To establish an efficient algorithm, having a O(log) time complexity, we could follow these guidelines:</p>\n<ul>\n<li>In one iteration of the binary-search loop no more than <em>k</em> zero values should be visited;</li>\n<li>The same (zero) value should not be visited more than once</li>\n</ul>\n<p>An idea would be to look &quot;around&quot; the <code>mid</code> index that the binary search algorithm would determine, looking for a non-zero value. So we would first look at <code>a[mid]</code>, then <code>a[mid-1]</code> <code>a[mid+1]</code> <code>a[mid-2]</code>, ...etc. If this search gets out of the <code>low..high</code> range, then this means there is no non-zero value in that range and the search should return -1 (failure)</p>\n<p>When the <code>low..high</code> range is narrowed down, then this should exclude the zeroes that were already checked.</p>\n<p>Here is an implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static int kAlmostSearch(int[] a, int num) {\n        int low = 0;\n        int high = a.length;\n        \n        while (low &lt; high) {\n            int mid = (low + high) / 2;\n            // Look around for non zero value:\n            int m = mid, add = -1;\n            while (a[m] == 0) {\n                m += add;\n                // If there is no non-zero value in the range [low, high): not found\n                if (m &lt; low || m &gt;= high) return -1;\n                add = -add + (add &gt; 0 ? -1 : 1);\n            }\n            if (a[m] == num) return mid;\n            // When narrowing the window, make sure to exclude the zeroes we already saw\n            if (num &lt; a[m]) {\n                high = Math.min(m, mid);\n            } else {\n                low = Math.max(m, mid) + 1;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n<p>NB: In this code, <code>high</code> is such that <code>a[high]</code> is not part of the current range.</p>\n"},{"tags":[],"owner":{"account_id":29425176,"reputation":1,"user_id":22546074,"display_name":"ignoble"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694541855,"creation_date":1694541794,"answer_id":77091635,"question_id":75846666,"body_markdown":"I can&#39;t reply directly to @trincot as I haven&#39;t gained enough reputation yet, but I think there&#39;s a minor bug in his solution. Running the following code will result in a false answer:\r\n\r\n    int[] a = new int[] {0, 1, 0, 3, 0};\r\n    System.out.println(kAlmostSearch(a, 3));\r\n    /// output: 4\r\n\r\nThis is due to this line:\r\n\r\n    if (a[m] == num) return mid;\r\n\r\n","title":"Search in almost sorted array","body":"<p>I can't reply directly to @trincot as I haven't gained enough reputation yet, but I think there's a minor bug in his solution. Running the following code will result in a false answer:</p>\n<pre><code>int[] a = new int[] {0, 1, 0, 3, 0};\nSystem.out.println(kAlmostSearch(a, 3));\n/// output: 4\n</code></pre>\n<p>This is due to this line:</p>\n<pre><code>if (a[m] == num) return mid;\n</code></pre>\n"}],"owner":{"account_id":27048227,"reputation":29,"user_id":20602067,"display_name":"l3xandrr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":2,"score":-2,"last_activity_date":1694541855,"creation_date":1679819649,"question_id":75846666,"body_markdown":"Given an array of nonnegative integers such as:\r\n1) All elements are sorted except that array can be filled with zeroes\r\n2) There are at most k sequential zeroes \r\n3) If we take all zeroes out we get sorted array of positive integers\r\n\r\nExample 3 0 0 4 7 9 0 0 0 0 11 15 0 19 20 0 0 31 40 0\r\n\r\nFor k=4\r\n\r\nWe need function kAlmostSearch(int[] a, int num) if k is constant but unknown for us.\r\n\r\nI am trying to modify Binary Search but not sure how exactly I can do it. \r\n\r\nTask only constraint is that k is not given, we only know it&#39;s constant and less than array size. And k is considered when time complexity is calculated.\r\n\r\nIt cannot be done better if it is 0 almost sorted than O(log n), so I am trying as I said to modify binary search that should possibly give a O(k* log n) because each time array size decreases we calculate closest nonzero element from both side finite number of times.\r\n\r\n    public static int closestLeft(int a[], int index){\r\n\t\t\r\n\t\r\n\t    int current=index;\r\n\t\r\n\t    while(current&gt;=0 &amp;&amp; a[current]==0){\r\n\t\t    current--;\r\n\t    }\r\n\t\r\n\t    if(current&lt;0){\r\n\t\t    return -1;\r\n\t     }\r\n\t\r\n\t    return current;\r\n    }\r\n\r\n\r\n    public static int closestRight(int a[], int index){\r\n\r\n\t    int current=index;\r\n\t\r\n\t    while(current&lt;=a.length-1 &amp;&amp; a[current]==0){\r\n\t\t    current++;\r\n\t    }\r\n\t\r\n\t    if(current&gt;a.length-1){\r\n\t\t    return -1;\r\n\t    }\r\n\t\r\n\t    return current;\r\n    }\r\n\r\n\r\n    public static int kAlmostSearch(int a[], int num){\r\n\r\n\t    int lo=0, hi=a.length-1, mid, closestLeft, closestRight;\r\n\t\r\n\t    while(lo&lt;=hi){\r\n\t\t\r\n\t\t    mid=(lo+hi)/2;\r\n\t\t \r\n            if(a[mid]==0){\r\n\r\n\t\t\t    if(closestLeft(a,mid)==-1){\r\n\r\n\t\t\t\t    mid=closestRight(a,mid);\r\n\r\n\t\t\t    }esle if(closestRight(a,mid)==-1){\r\n\t\t\t\t  \r\n                    mid=closestLeft(a,mid);\r\n\t\t    \t}else{\r\n\t\t\t\t/*how am I supposed to move here*/\r\n\t\t\t    }\r\n\t\t     }\r\n\t\t\r\n\t\t    if(a[mid]==num){\r\n\t\t\t    return mid;\r\n\t\t    }\r\n\t\t    if(a[mid]&lt;num){\r\n\t\t\t    lo=mid+1;\r\n\t\t    }else{\r\n\t\t\t    hi=mid-1;\r\n\t\t    }\r\n\t    }\r\n\r\n    }","title":"Search in almost sorted array","body":"<p>Given an array of nonnegative integers such as:</p>\n<ol>\n<li>All elements are sorted except that array can be filled with zeroes</li>\n<li>There are at most k sequential zeroes</li>\n<li>If we take all zeroes out we get sorted array of positive integers</li>\n</ol>\n<p>Example 3 0 0 4 7 9 0 0 0 0 11 15 0 19 20 0 0 31 40 0</p>\n<p>For k=4</p>\n<p>We need function kAlmostSearch(int[] a, int num) if k is constant but unknown for us.</p>\n<p>I am trying to modify Binary Search but not sure how exactly I can do it.</p>\n<p>Task only constraint is that k is not given, we only know it's constant and less than array size. And k is considered when time complexity is calculated.</p>\n<p>It cannot be done better if it is 0 almost sorted than O(log n), so I am trying as I said to modify binary search that should possibly give a O(k* log n) because each time array size decreases we calculate closest nonzero element from both side finite number of times.</p>\n<pre><code>public static int closestLeft(int a[], int index){\n    \n\n    int current=index;\n\n    while(current&gt;=0 &amp;&amp; a[current]==0){\n        current--;\n    }\n\n    if(current&lt;0){\n        return -1;\n     }\n\n    return current;\n}\n\n\npublic static int closestRight(int a[], int index){\n\n    int current=index;\n\n    while(current&lt;=a.length-1 &amp;&amp; a[current]==0){\n        current++;\n    }\n\n    if(current&gt;a.length-1){\n        return -1;\n    }\n\n    return current;\n}\n\n\npublic static int kAlmostSearch(int a[], int num){\n\n    int lo=0, hi=a.length-1, mid, closestLeft, closestRight;\n\n    while(lo&lt;=hi){\n    \n        mid=(lo+hi)/2;\n     \n        if(a[mid]==0){\n\n            if(closestLeft(a,mid)==-1){\n\n                mid=closestRight(a,mid);\n\n            }esle if(closestRight(a,mid)==-1){\n              \n                mid=closestLeft(a,mid);\n            }else{\n            /*how am I supposed to move here*/\n            }\n         }\n    \n        if(a[mid]==num){\n            return mid;\n        }\n        if(a[mid]&lt;num){\n            lo=mid+1;\n        }else{\n            hi=mid-1;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gradle","dependency-management"],"answers":[{"tags":[],"owner":{"account_id":7480661,"reputation":692,"user_id":5685482,"accept_rate":100,"display_name":"Miguel Costa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681226494,"creation_date":1681226494,"answer_id":75987568,"question_id":75986556,"body_markdown":"Ok so I don&#39;t have a clear solution but I found the problem for me.\r\nI had 2 jar&#39;s in my path that implemented the same class.\r\nbcprov-jdk18on-1.72.jar and bc-fips-1.0.1.jar\r\n\r\nThey somehow seem incompatible but they are inherited dependencies of some packages I use so I just excluded &quot;bcprov&quot; but it&#39;s not really an answer to be honest","title":"gradle tests Bouncy Castle ExceptionInInitializerError (conflicting jars?)","body":"<p>Ok so I don't have a clear solution but I found the problem for me.\nI had 2 jar's in my path that implemented the same class.\nbcprov-jdk18on-1.72.jar and bc-fips-1.0.1.jar</p>\n<p>They somehow seem incompatible but they are inherited dependencies of some packages I use so I just excluded &quot;bcprov&quot; but it's not really an answer to be honest</p>\n"},{"tags":[],"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694541013,"creation_date":1694541013,"answer_id":77091548,"question_id":75986556,"body_markdown":"I fixed this error by looking in my `tomcat/lib` for any jars containing the class mentioned in the stack trace, in my case I did this with: \r\n```\r\nfor f in *.jar; do echo &quot;$f: &quot;; unzip -l $f | grep -i &#39;org.glassfish.jersey.inject.hk2.RequestContext*&#39;; done\r\n```\r\nThis let me find and then remove one the one two conflicting jars.","title":"gradle tests Bouncy Castle ExceptionInInitializerError (conflicting jars?)","body":"<p>I fixed this error by looking in my <code>tomcat/lib</code> for any jars containing the class mentioned in the stack trace, in my case I did this with:</p>\n<pre><code>for f in *.jar; do echo &quot;$f: &quot;; unzip -l $f | grep -i 'org.glassfish.jersey.inject.hk2.RequestContext*'; done\n</code></pre>\n<p>This let me find and then remove one the one two conflicting jars.</p>\n"}],"owner":{"account_id":7480661,"reputation":692,"user_id":5685482,"accept_rate":100,"display_name":"Miguel Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694541013,"creation_date":1681220291,"question_id":75986556,"body_markdown":"I&#39;m having an error and trying to fix it that I wanted to know if there is any information more about it and how to debug it, the root cause.\r\nI basically wanted to understand more about how I can investigate the error:\r\n&quot;signer information does not match signer information of other classes in the same package&quot;\r\n\r\nFor example from this question https://stackoverflow.com/questions/11084871/exclude-servlet-api-from-test-scope-maven/11085986#11085986 I get that this is basically a problem with different versions of the jar defined in the dependencies.\r\n\r\n\r\n\r\nBut when I checked with gradle the dependency scope I don&#39;t see any problem that might show up.\r\n\r\nI use 2 bouncy castle dependencies. org.bouncycastle:bcpkix-fips and org.bouncycastle:bc-fips\r\n\r\nI check with gradle and the dependencies seem what I expect:\r\n\r\n```\r\n./gradlew -q dependencyInsight --dependency org.bouncycastle:bcpkix-fips --configuration testRuntimeClasspath\r\norg.bouncycastle:bcpkix-fips:1.0.3\r\n   variant &quot;runtime&quot; [\r\n      org.gradle.status              = release (not requested)\r\n      org.gradle.usage               = java-runtime\r\n      org.gradle.libraryelements     = jar\r\n      org.gradle.category            = library\r\n\r\n      Requested attributes not found in the selected variant:\r\n         org.gradle.dependency.bundling = external\r\n         org.gradle.jvm.environment     = standard-jvm\r\n         org.gradle.jvm.version         = 11\r\n   ]\r\n\r\norg.bouncycastle:bcpkix-fips:1.0.3\r\n\\--- testRuntimeClasspath\r\n\r\n./gradlew -q dependencyInsight --dependency org.bouncycastle:bc-fips --configuration testRuntimeClasspath\r\norg.bouncycastle:bc-fips:1.0.1\r\n   variant &quot;runtime&quot; [\r\n      org.gradle.status              = release (not requested)\r\n      org.gradle.usage               = java-runtime\r\n      org.gradle.libraryelements     = jar\r\n      org.gradle.category            = library\r\n\r\n      Requested attributes not found in the selected variant:\r\n         org.gradle.dependency.bundling = external\r\n         org.gradle.jvm.environment     = standard-jvm\r\n         org.gradle.jvm.version         = 11\r\n   ]\r\n\r\norg.bouncycastle:bc-fips:1.0.1\r\n\\--- testRuntimeClasspath\r\n\r\norg.bouncycastle:bc-fips:[1.0.0,2.0.0) -&gt; 1.0.1\r\n\\--- org.bouncycastle:bcpkix-fips:1.0.3\r\n     \\--- testRuntimeClasspath\r\n```\r\n\r\nStill I get this in the log when I tried to launch my tests:\r\n\r\n```\r\n[Test worker] ERROR net.mguenther.kafka.junit.EmbeddedConnect - Failed to deploy connector test-sink-connector.\r\njava.util.concurrent.ExecutionException: java.lang.ExceptionInInitializerError\r\n\tat org.apache.kafka.connect.util.ConvertingFutureCallback.result(ConvertingFutureCallback.java:115)\r\n\tat org.apache.kafka.connect.util.ConvertingFutureCallback.get(ConvertingFutureCallback.java:107)\r\n\tat net.mguenther.kafka.junit.EmbeddedConnect.deployConnector(EmbeddedConnect.java:93)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat net.mguenther.kafka.junit.EmbeddedConnect.start(EmbeddedConnect.java:81)\r\n\tat com.abc.kafka.connect.utils.test.kafka.JunitConnectWrapper.start(JunitConnectWrapper.java:59)\r\n\tat com.abc.kafka.connect.utils.test.kafka.JunitConnectWrapper.&lt;init&gt;(JunitConnectWrapper.java:52)\r\n\tat com.abc.kafka.connect.converters.test.kafka.KafkaConnectCluster.&lt;init&gt;(KafkaConnectCluster.java:40)\r\n\tat com.abc.kafka.connect.test.kafka.SnowflakeSinkConnector.&lt;init&gt;(SnowflakeSinkConnector.java:38)\r\n\tat com.abc.kafka.connect.integration.SnowflakeSinkConnectorTest.beforeClass(SnowflakeSinkConnectorTest.java:67)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:128)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeAllMethod(TimeoutExtension.java:70)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllMethods$13(ClassBasedTestDescriptor.java:411)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllMethods(ClassBasedTestDescriptor.java:409)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:215)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: java.lang.ExceptionInInitializerError\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:315)\r\n\tat org.bouncycastle.crypto.fips.FipsStatus.loadClass(Unknown Source)\r\n\tat org.bouncycastle.crypto.fips.FipsStatus.access$200(Unknown Source)\r\n\tat org.bouncycastle.crypto.fips.FipsStatus$Loader.&lt;init&gt;(Unknown Source)\r\n\tat org.bouncycastle.crypto.fips.FipsStatus.isReady(Unknown Source)\r\n\tat org.bouncycastle.crypto.CryptoServicesRegistrar.getDefaultMode(Unknown Source)\r\n\tat org.bouncycastle.crypto.CryptoServicesRegistrar.&lt;clinit&gt;(Unknown Source)\r\n\tat org.bouncycastle.jcajce.provider.ProvSecureHash$MD5.configure(Unknown Source)\r\n\tat org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\r\n\tat org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\r\n\tat org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\r\n\tat com.snowflake.kafka.connector.internal.EncryptionUtils.parseEncryptedPrivateKey(EncryptionUtils.java:30)\r\n\tat com.snowflake.kafka.connector.internal.InternalUtils.createProperties(InternalUtils.java:151)\r\n\tat com.snowflake.kafka.connector.internal.SnowflakeConnectionServiceFactory$SnowflakeConnectionServiceBuilder.setProperties(SnowflakeConnectionServiceFactory.java:58)\r\n\tat com.snowflake.kafka.connector.SnowflakeSinkConnector.validate(SnowflakeSinkConnector.java:243)\r\n\tat org.apache.kafka.connect.runtime.AbstractHerder.validateConnectorConfig(AbstractHerder.java:471)\r\n\tat org.apache.kafka.connect.runtime.AbstractHerder.lambda$validateConnectorConfig$2(AbstractHerder.java:367)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.SecurityException: class &quot;org.bouncycastle.util.test.TestRandomBigInteger&quot;&#39;s signer information does not match signer information of other classes in the same package\r\n\tat java.base/java.lang.ClassLoader.checkCerts(ClassLoader.java:1151)\r\n\tat java.base/java.lang.ClassLoader.preDefineClass(ClassLoader.java:906)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1015)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\tat org.bouncycastle.crypto.fips.FipsDSA$DsaProvider.createEngine(Unknown Source)\r\n\tat org.bouncycastle.crypto.fips.FipsDSA$DsaProvider.createEngine(Unknown Source)\r\n\tat org.bouncycastle.crypto.fips.FipsDSA.&lt;clinit&gt;(Unknown Source)\r\n\t... 23 more\r\n```\r\n\r\nSo my question is how can I investigate on my class path where the bouncy castle dependency is being resolved?\r\nOr how could I verify the differences between the packages signature information.\r\nThank you for any feedback\r\n","title":"gradle tests Bouncy Castle ExceptionInInitializerError (conflicting jars?)","body":"<p>I'm having an error and trying to fix it that I wanted to know if there is any information more about it and how to debug it, the root cause.\nI basically wanted to understand more about how I can investigate the error:\n&quot;signer information does not match signer information of other classes in the same package&quot;</p>\n<p>For example from this question <a href=\"https://stackoverflow.com/questions/11084871/exclude-servlet-api-from-test-scope-maven/11085986#11085986\">Exclude servlet-api from test scope Maven</a> I get that this is basically a problem with different versions of the jar defined in the dependencies.</p>\n<p>But when I checked with gradle the dependency scope I don't see any problem that might show up.</p>\n<p>I use 2 bouncy castle dependencies. org.bouncycastle:bcpkix-fips and org.bouncycastle:bc-fips</p>\n<p>I check with gradle and the dependencies seem what I expect:</p>\n<pre><code>./gradlew -q dependencyInsight --dependency org.bouncycastle:bcpkix-fips --configuration testRuntimeClasspath\norg.bouncycastle:bcpkix-fips:1.0.3\n   variant &quot;runtime&quot; [\n      org.gradle.status              = release (not requested)\n      org.gradle.usage               = java-runtime\n      org.gradle.libraryelements     = jar\n      org.gradle.category            = library\n\n      Requested attributes not found in the selected variant:\n         org.gradle.dependency.bundling = external\n         org.gradle.jvm.environment     = standard-jvm\n         org.gradle.jvm.version         = 11\n   ]\n\norg.bouncycastle:bcpkix-fips:1.0.3\n\\--- testRuntimeClasspath\n\n./gradlew -q dependencyInsight --dependency org.bouncycastle:bc-fips --configuration testRuntimeClasspath\norg.bouncycastle:bc-fips:1.0.1\n   variant &quot;runtime&quot; [\n      org.gradle.status              = release (not requested)\n      org.gradle.usage               = java-runtime\n      org.gradle.libraryelements     = jar\n      org.gradle.category            = library\n\n      Requested attributes not found in the selected variant:\n         org.gradle.dependency.bundling = external\n         org.gradle.jvm.environment     = standard-jvm\n         org.gradle.jvm.version         = 11\n   ]\n\norg.bouncycastle:bc-fips:1.0.1\n\\--- testRuntimeClasspath\n\norg.bouncycastle:bc-fips:[1.0.0,2.0.0) -&gt; 1.0.1\n\\--- org.bouncycastle:bcpkix-fips:1.0.3\n     \\--- testRuntimeClasspath\n</code></pre>\n<p>Still I get this in the log when I tried to launch my tests:</p>\n<pre><code>[Test worker] ERROR net.mguenther.kafka.junit.EmbeddedConnect - Failed to deploy connector test-sink-connector.\njava.util.concurrent.ExecutionException: java.lang.ExceptionInInitializerError\n    at org.apache.kafka.connect.util.ConvertingFutureCallback.result(ConvertingFutureCallback.java:115)\n    at org.apache.kafka.connect.util.ConvertingFutureCallback.get(ConvertingFutureCallback.java:107)\n    at net.mguenther.kafka.junit.EmbeddedConnect.deployConnector(EmbeddedConnect.java:93)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at net.mguenther.kafka.junit.EmbeddedConnect.start(EmbeddedConnect.java:81)\n    at com.abc.kafka.connect.utils.test.kafka.JunitConnectWrapper.start(JunitConnectWrapper.java:59)\n    at com.abc.kafka.connect.utils.test.kafka.JunitConnectWrapper.&lt;init&gt;(JunitConnectWrapper.java:52)\n    at com.abc.kafka.connect.converters.test.kafka.KafkaConnectCluster.&lt;init&gt;(KafkaConnectCluster.java:40)\n    at com.abc.kafka.connect.test.kafka.SnowflakeSinkConnector.&lt;init&gt;(SnowflakeSinkConnector.java:38)\n    at com.abc.kafka.connect.integration.SnowflakeSinkConnectorTest.beforeClass(SnowflakeSinkConnectorTest.java:67)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:128)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeAllMethod(TimeoutExtension.java:70)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllMethods$13(ClassBasedTestDescriptor.java:411)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllMethods(ClassBasedTestDescriptor.java:409)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:215)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:84)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\nCaused by: java.lang.ExceptionInInitializerError\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:315)\n    at org.bouncycastle.crypto.fips.FipsStatus.loadClass(Unknown Source)\n    at org.bouncycastle.crypto.fips.FipsStatus.access$200(Unknown Source)\n    at org.bouncycastle.crypto.fips.FipsStatus$Loader.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.crypto.fips.FipsStatus.isReady(Unknown Source)\n    at org.bouncycastle.crypto.CryptoServicesRegistrar.getDefaultMode(Unknown Source)\n    at org.bouncycastle.crypto.CryptoServicesRegistrar.&lt;clinit&gt;(Unknown Source)\n    at org.bouncycastle.jcajce.provider.ProvSecureHash$MD5.configure(Unknown Source)\n    at org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider.&lt;init&gt;(Unknown Source)\n    at com.snowflake.kafka.connector.internal.EncryptionUtils.parseEncryptedPrivateKey(EncryptionUtils.java:30)\n    at com.snowflake.kafka.connector.internal.InternalUtils.createProperties(InternalUtils.java:151)\n    at com.snowflake.kafka.connector.internal.SnowflakeConnectionServiceFactory$SnowflakeConnectionServiceBuilder.setProperties(SnowflakeConnectionServiceFactory.java:58)\n    at com.snowflake.kafka.connector.SnowflakeSinkConnector.validate(SnowflakeSinkConnector.java:243)\n    at org.apache.kafka.connect.runtime.AbstractHerder.validateConnectorConfig(AbstractHerder.java:471)\n    at org.apache.kafka.connect.runtime.AbstractHerder.lambda$validateConnectorConfig$2(AbstractHerder.java:367)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: java.lang.SecurityException: class &quot;org.bouncycastle.util.test.TestRandomBigInteger&quot;'s signer information does not match signer information of other classes in the same package\n    at java.base/java.lang.ClassLoader.checkCerts(ClassLoader.java:1151)\n    at java.base/java.lang.ClassLoader.preDefineClass(ClassLoader.java:906)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1015)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    at org.bouncycastle.crypto.fips.FipsDSA$DsaProvider.createEngine(Unknown Source)\n    at org.bouncycastle.crypto.fips.FipsDSA$DsaProvider.createEngine(Unknown Source)\n    at org.bouncycastle.crypto.fips.FipsDSA.&lt;clinit&gt;(Unknown Source)\n    ... 23 more\n</code></pre>\n<p>So my question is how can I investigate on my class path where the bouncy castle dependency is being resolved?\nOr how could I verify the differences between the packages signature information.\nThank you for any feedback</p>\n"},{"tags":["java","android","operating-system","programming-languages","native"],"comments":[{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1525073627,"post_id":50095873,"comment_id":87207964,"body_markdown":"These are just language for development . And now `Kotlin` is the official Language for Android application development by Google.","body":"These are just language for development . And now <code>Kotlin</code> is the official Language for Android application development by Google."},{"owner":{"account_id":6914463,"reputation":1103,"user_id":5309272,"display_name":"Rishabh Rawat"},"score":0,"creation_date":1525074589,"post_id":50095873,"comment_id":87208420,"body_markdown":"Means from native langauge you can access or full control of os and hardware. So from java and kotlin you can do because android has a dex compiler and only native langauge run from the dex compiler.","body":"Means from native langauge you can access or full control of os and hardware. So from java and kotlin you can do because android has a dex compiler and only native langauge run from the dex compiler."},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1525108456,"post_id":50095873,"comment_id":87227537,"body_markdown":"A bit broad for SO, even if we only consider Android. For example: https://www.quora.com/What-are-the-advantages-for-developing-apps-in-its-native-language-iOS-Android-etc-vs-a-cross-platform-build?share=1","body":"A bit broad for SO, even if we only consider Android. For example: <a href=\"https://www.quora.com/What-are-the-advantages-for-developing-apps-in-its-native-language-iOS-Android-etc-vs-a-cross-platform-build?share=1\" rel=\"nofollow noreferrer\">quora.com/&hellip;</a>"},{"owner":{"account_id":6685707,"reputation":130,"user_id":5157039,"display_name":"Mohammad"},"score":0,"creation_date":1525513762,"post_id":50095873,"comment_id":87392756,"body_markdown":"@RishabhRawat, thanks for noting dex, I did not know anything about it and it made me to investigate about it","body":"@RishabhRawat, thanks for noting dex, I did not know anything about it and it made me to investigate about it"}],"answers":[{"tags":[],"owner":{"account_id":9470516,"reputation":846,"user_id":7041505,"display_name":"Itay Feldman"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1525081033,"creation_date":1525074183,"answer_id":50096037,"question_id":50095873,"body_markdown":"**Long story short** for understanding the general consept - \r\n\r\nNative means its a language for a specific platform.\r\n\r\nThat said, developing for android or for IOS (apple&#39;s OS) specifically each has their own native languages.(C is the native language for android [Kotlin is based on Java and Java is based on C] and Objective-C for IOS)\r\n\r\nOn the other hand, there are languages which are not native. For instance React native is developing for both the android and IOS platforms.\r\nIn these cases the views are not native elements but more web form elements (JS, CSS etc..).\r\n\r\nNative languages will most of the time have better capabilities and performances. \r\n\r\nConclusions - Native means a language for a specific platform (the official platform language you could say).","title":"what does native language mean for a specific os?","body":"<p><strong>Long story short</strong> for understanding the general consept - </p>\n\n<p>Native means its a language for a specific platform.</p>\n\n<p>That said, developing for android or for IOS (apple's OS) specifically each has their own native languages.(C is the native language for android [Kotlin is based on Java and Java is based on C] and Objective-C for IOS)</p>\n\n<p>On the other hand, there are languages which are not native. For instance React native is developing for both the android and IOS platforms.\nIn these cases the views are not native elements but more web form elements (JS, CSS etc..).</p>\n\n<p>Native languages will most of the time have better capabilities and performances. </p>\n\n<p>Conclusions - Native means a language for a specific platform (the official platform language you could say).</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525074294,"creation_date":1525074294,"answer_id":50096057,"question_id":50095873,"body_markdown":"Low level programming\r\n-\r\nIn contrast to Interpreted languages like PHP or Bytecode languages like Java and parts of c# a Low-Level-Programming means the compilation to very close programming for Processor-instructions like assembler and machine code.\r\n\r\nNative Android Apps\r\n-\r\nIn contrast to Android-Apps a Native Android App contain code that is very close the device&#39;s hardware. Native Andoid Apps usually do not contain only Java bytecode. They use librarys or applications who are close to the Device&#39;s hardware.\r\n\r\nThere are two criterias for the decision if a Android App must be native:\r\n\r\n1. A Hardware must be controlled directly\r\n2. The performance of the Application is important (because direct controller instructions can be optimized and does not have the overhead of interpretation).\r\n\r\n","title":"what does native language mean for a specific os?","body":"<h2>Low level programming</h2>\n\n<p>In contrast to Interpreted languages like PHP or Bytecode languages like Java and parts of c# a Low-Level-Programming means the compilation to very close programming for Processor-instructions like assembler and machine code.</p>\n\n<h2>Native Android Apps</h2>\n\n<p>In contrast to Android-Apps a Native Android App contain code that is very close the device's hardware. Native Andoid Apps usually do not contain only Java bytecode. They use librarys or applications who are close to the Device's hardware.</p>\n\n<p>There are two criterias for the decision if a Android App must be native:</p>\n\n<ol>\n<li>A Hardware must be controlled directly</li>\n<li>The performance of the Application is important (because direct controller instructions can be optimized and does not have the overhead of interpretation).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525074904,"creation_date":1525074904,"answer_id":50096209,"question_id":50095873,"body_markdown":"&gt; What does it mean that for example java (or kotlin) is the native language for android development?\r\n\r\nFrom a technical perspective, it doesn&#39;t mean anything.\r\n\r\n&gt; What does native mean here? \r\n\r\nIt depends on what you mean by &quot;here&quot;.  You claim that &quot;native&quot; is being used this way, but you don&#39;t offer any clear examples / references.\r\n\r\nIf we had some examples of what you were talking about, we could probably figure out what the author was trying to say.  But that doesn&#39;t *necessarily* make the author&#39;s use of the word &quot;native&quot; correct or widely accepted.\r\n\r\n&gt; Does this concept exist for other operating systems too?  For example do we have a native language for Windows and/or Linux too?\r\n\r\nNo.   \r\n\r\nAnd I&#39;m not convinced it exists in Android either!  Certainly, I would not accept that it is normal usage to call either Java or Kotlin the &quot;native language&quot; for the Android platform.\r\n\r\n------------------\r\n\r\nNow there is an accepted use of the word &quot;native&quot; in Java for Android, Linux, Windows and other OS platforms.  A &quot;native library&quot; is a library (or dll) that is implemented in some (unspecified!) programming language and compiled to the hardware instruction set of the platform on which the JVM is running.   It consists of &quot;native code&quot; instructions ... not bytecodes.  The source language for a native library is *typically* C or C++, but it could in theory be any language that can be compiled to native code, and that offers a calling sequence that is compatible with (for example) JNI.  (Note that JNI stands for [Java **Native** Interface][1] ...)\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Native_Interface","title":"what does native language mean for a specific os?","body":"<blockquote>\n  <p>What does it mean that for example java (or kotlin) is the native language for android development?</p>\n</blockquote>\n\n<p>From a technical perspective, it doesn't mean anything.</p>\n\n<blockquote>\n  <p>What does native mean here? </p>\n</blockquote>\n\n<p>It depends on what you mean by \"here\".  You claim that \"native\" is being used this way, but you don't offer any clear examples / references.</p>\n\n<p>If we had some examples of what you were talking about, we could probably figure out what the author was trying to say.  But that doesn't <em>necessarily</em> make the author's use of the word \"native\" correct or widely accepted.</p>\n\n<blockquote>\n  <p>Does this concept exist for other operating systems too?  For example do we have a native language for Windows and/or Linux too?</p>\n</blockquote>\n\n<p>No.   </p>\n\n<p>And I'm not convinced it exists in Android either!  Certainly, I would not accept that it is normal usage to call either Java or Kotlin the \"native language\" for the Android platform.</p>\n\n<hr>\n\n<p>Now there is an accepted use of the word \"native\" in Java for Android, Linux, Windows and other OS platforms.  A \"native library\" is a library (or dll) that is implemented in some (unspecified!) programming language and compiled to the hardware instruction set of the platform on which the JVM is running.   It consists of \"native code\" instructions ... not bytecodes.  The source language for a native library is <em>typically</em> C or C++, but it could in theory be any language that can be compiled to native code, and that offers a calling sequence that is compatible with (for example) JNI.  (Note that JNI stands for <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">Java <strong>Native</strong> Interface</a> ...)</p>\n"},{"tags":[],"owner":{"account_id":7502159,"reputation":9977,"user_id":7594961,"accept_rate":57,"display_name":"Bertram Gilfoyle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563007376,"creation_date":1562534333,"answer_id":56926184,"question_id":50095873,"body_markdown":"In the strictest sense, **native language** is just another term for **compiled language** i.e. languages which the product doesn&#39;t need to be interpretted at runtime. E.g. C, C++. I think the it&#39;s origin is closely related to the word **native code**.\r\n\r\nNow coming into **Android**, it&#39;s top layer API is written in Java. As the language in which the OS components are written, Java is often called **native**.&lt;br/&gt; However, I wouldn&#39;t say it&#39;s a correct usage. Also, In Android, the toolset for development in Java is called &quot;Software Development Kit&quot; and the same for C/C++ development is called &quot;Native Development Kit&quot;.","title":"what does native language mean for a specific os?","body":"<p>In the strictest sense, <strong>native language</strong> is just another term for <strong>compiled language</strong> i.e. languages which the product doesn't need to be interpretted at runtime. E.g. C, C++. I think the it's origin is closely related to the word <strong>native code</strong>.</p>\n\n<p>Now coming into <strong>Android</strong>, it's top layer API is written in Java. As the language in which the OS components are written, Java is often called <strong>native</strong>.<br/> However, I wouldn't say it's a correct usage. Also, In Android, the toolset for development in Java is called \"Software Development Kit\" and the same for C/C++ development is called \"Native Development Kit\".</p>\n"},{"tags":[],"owner":{"account_id":26544259,"reputation":105,"user_id":20174544,"display_name":"Muhammad Umar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694540435,"creation_date":1694540435,"answer_id":77091501,"question_id":50095873,"body_markdown":"The term &quot;**native language**&quot; for a **specific operating system (OS)** refers to the language in which the **OS was originally developed or designed to function**. In this context, &quot;native&quot; doesn&#39;t necessarily refer to the language spoken by the users of the OS, but rather the language in which the core components, system libraries, and user interface elements of the OS are initially developed.\r\n\r\n - *Programming Language Native to an OS:* Languages closely associated\r\n   with a specific OS, like Objective-C for macOS/iOS.\r\n - *Native Code:* Low-level code specific to CPU/OS, often in Assembly.\r\n - *System-Level Languages:* Like C/C++ for close OS interaction.\r\n - *Preferred Dev Environment:* The language/tools commonly used for\r\n   OS-specific development.\r\n\r\nA native programming language for a specific OS is one that is closely tied to that OS and offers optimized performance and direct access to OS resources. While this can lead to high-performance applications on that OS, it may also limit the portability of the code to other operating systems. Developers often choose native languages based on their specific requirements and the target platform for their applications.","title":"what does native language mean for a specific os?","body":"<p>The term &quot;<strong>native language</strong>&quot; for a <strong>specific operating system (OS)</strong> refers to the language in which the <strong>OS was originally developed or designed to function</strong>. In this context, &quot;native&quot; doesn't necessarily refer to the language spoken by the users of the OS, but rather the language in which the core components, system libraries, and user interface elements of the OS are initially developed.</p>\n<ul>\n<li><em>Programming Language Native to an OS:</em> Languages closely associated\nwith a specific OS, like Objective-C for macOS/iOS.</li>\n<li><em>Native Code:</em> Low-level code specific to CPU/OS, often in Assembly.</li>\n<li><em>System-Level Languages:</em> Like C/C++ for close OS interaction.</li>\n<li><em>Preferred Dev Environment:</em> The language/tools commonly used for\nOS-specific development.</li>\n</ul>\n<p>A native programming language for a specific OS is one that is closely tied to that OS and offers optimized performance and direct access to OS resources. While this can lead to high-performance applications on that OS, it may also limit the portability of the code to other operating systems. Developers often choose native languages based on their specific requirements and the target platform for their applications.</p>\n"}],"owner":{"account_id":6685707,"reputation":130,"user_id":5157039,"display_name":"Mohammad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3734,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":5,"score":1,"last_activity_date":1694540435,"creation_date":1525073502,"question_id":50095873,"body_markdown":"What does it mean that for example java (or kotlin) is the native language for android development?    \r\nWhat does native mean here?\r\nDoes this concept exist for other operating systems too? for example do we have a native language for windows and/or linux too?    \r\n  \r\nEDIT:  \r\nI am not sure how much usual it is to use the phrase &quot;native language&quot;.  \r\nThe main thing I am looking for is what are the reasons that make a language more friendly and more frequently used for a special OS.  \r\n  \r\nFor example, is the api of an operating system more easy to call from one or a couple of specific languages? (if yes why?)  \r\nIs it the existence of compilers to compile to an intermediate set of instructions (like java byte codes) and to a set of instructions of several hardwares?  \r\n  \r\nAs another example we have some languages that compile to java byte codes, why are they not widely used for android development?  \r\n\r\n","title":"what does native language mean for a specific os?","body":"<p>What does it mean that for example java (or kotlin) is the native language for android development?<br>\nWhat does native mean here?\nDoes this concept exist for other operating systems too? for example do we have a native language for windows and/or linux too?    </p>\n\n<p>EDIT:<br>\nI am not sure how much usual it is to use the phrase \"native language\".<br>\nThe main thing I am looking for is what are the reasons that make a language more friendly and more frequently used for a special OS.  </p>\n\n<p>For example, is the api of an operating system more easy to call from one or a couple of specific languages? (if yes why?)<br>\nIs it the existence of compilers to compile to an intermediate set of instructions (like java byte codes) and to a set of instructions of several hardwares?  </p>\n\n<p>As another example we have some languages that compile to java byte codes, why are they not widely used for android development?  </p>\n"},{"tags":["java","json","spring-boot","spring-cloud-gateway"],"owner":{"account_id":15620203,"reputation":157,"user_id":11269266,"display_name":"Arpit S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694540397,"creation_date":1694540397,"question_id":77091496,"body_markdown":"**Problem Statement:**\r\nDifferent customers want different JSON output (schema), to fit to their needs. Currently have implemented Spring Cloud Gateway to route to different customers, but using same JSON format.\r\n\r\n**Desired Outcome:**\r\nAlthough underlying source of data(properties) is same/single (inbound message) for all customers, different customers should be able to be configured to receive custom JSON output (POST to endpoint) based on their needs.\r\n\r\nTried using different filters to generate output structure and apply to route, but it is causing multiple model objects with duplication.\r\nLooking for better solutions.","title":"Different JSON output by customer","body":"<p><strong>Problem Statement:</strong>\nDifferent customers want different JSON output (schema), to fit to their needs. Currently have implemented Spring Cloud Gateway to route to different customers, but using same JSON format.</p>\n<p><strong>Desired Outcome:</strong>\nAlthough underlying source of data(properties) is same/single (inbound message) for all customers, different customers should be able to be configured to receive custom JSON output (POST to endpoint) based on their needs.</p>\n<p>Tried using different filters to generate output structure and apply to route, but it is causing multiple model objects with duplication.\nLooking for better solutions.</p>\n"},{"tags":["java","spring","spring-boot","maven","inversion-of-control"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680967368,"creation_date":1680961054,"answer_id":75965547,"question_id":75965177,"body_markdown":"in the class DepartmentServiceImpl there is no public constructor. It is needed by Spring for dependency injection. \r\n\r\n**Solution**\r\n\r\nEither add public identifier to the constructor or remove it. A public constructor without arguments will be created by Java internally (if no other constructor present).\r\n\r\n**Edited** after you added the pom.xml to the question:\r\n\r\nPlease remove this dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot error with a repository/entity, &quot;not a managed type&quot;","body":"<p>in the class DepartmentServiceImpl there is no public constructor. It is needed by Spring for dependency injection.</p>\n<p><strong>Solution</strong></p>\n<p>Either add public identifier to the constructor or remove it. A public constructor without arguments will be created by Java internally (if no other constructor present).</p>\n<p><strong>Edited</strong> after you added the pom.xml to the question:</p>\n<p>Please remove this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2345906,"reputation":2356,"user_id":2056178,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694539822,"creation_date":1694539822,"answer_id":77091439,"question_id":75965177,"body_markdown":"Encountered the same issue.\r\n\r\nIn my case, the problem was :\r\n1. In wrong dependency (`javax.persistence:javax.persistence-api:2.2`), removed it\r\n2. Wrong imports for `@Entity` and `@Id` - replaced them with :\r\n```\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Id;\r\n```\r\n\r\nSeems that `javax.persistence` was replaced by `jakarta.persistence` last year. Anyway, spring data JPA examples [now uses jakarta package][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-examples/blob/main/jpa/example/src/main/java/example/springdata/jpa/simple/User.java","title":"Spring Boot error with a repository/entity, &quot;not a managed type&quot;","body":"<p>Encountered the same issue.</p>\n<p>In my case, the problem was :</p>\n<ol>\n<li>In wrong dependency (<code>javax.persistence:javax.persistence-api:2.2</code>), removed it</li>\n<li>Wrong imports for <code>@Entity</code> and <code>@Id</code> - replaced them with :</li>\n</ol>\n<pre><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\n</code></pre>\n<p>Seems that <code>javax.persistence</code> was replaced by <code>jakarta.persistence</code> last year. Anyway, spring data JPA examples <a href=\"https://github.com/spring-projects/spring-data-examples/blob/main/jpa/example/src/main/java/example/springdata/jpa/simple/User.java\" rel=\"nofollow noreferrer\">now uses jakarta package</a></p>\n"}],"owner":{"account_id":27132164,"reputation":21,"user_id":20743593,"display_name":"Kamilosinni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2354,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694539822,"creation_date":1680956439,"question_id":75965177,"body_markdown":"I know that similar questions have been asked before on this forum, but none of the proposed solutions helped me, so I am writing a separate question. The code is from the spring boot course on youtube (https://youtu.be/zvR-Oif_nxg)(im stuck about 2:21:00), but this error also occurs when I tried to do the course on the spring boot site. The full text of the error is:\r\n\r\n---\r\n`&quot;Error creating bean with name &#39;departmentController&#39;: Unsatisfied dependency expressed through field &#39;departmentService&#39;: Error creating bean with name &#39;departmentServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;departmentRepository&#39;: Error creating bean with name &#39;departmentRepository&#39; defined in com.kamilosinni.course.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.kamilosinni.course.entity.Department&quot;\r\n`\r\n\r\n---\r\nmain app class (CourseApplication.java): \r\n```java\r\n\r\npackage com.kamilosinni.course;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n\r\n\r\n@SpringBootApplication\r\n\r\npublic class CourseApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CourseApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nDepartmentController.java:\r\n```java\r\npackage com.kamilosinni.course.controller;\r\n\r\n\r\nimport com.kamilosinni.course.entity.Department;\r\nimport com.kamilosinni.course.service.DepartmentService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class DepartmentController {\r\n\r\n    @Autowired\r\n   private DepartmentService departmentService;\r\n    @GetMapping(&quot;/departments&quot;)\r\n    public Department saveDepartment(@RequestBody Department department)\r\n    {\r\n        return departmentService.saveDepartment(department);\r\n\r\n    }\r\n}\r\n```\r\nDepartment.java:\r\n```java \r\npackage com.kamilosinni.course.entity;\r\n\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class Department {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long departmentId;\r\n    private String departmentName;\r\n    private String departmentAdress;\r\n    private String departmentCode;\r\n\r\n    public Long getDepartmentId() {\r\n        return departmentId;\r\n    }\r\n\r\n    public void setDepartmentId(Long departmentId) {\r\n        this.departmentId = departmentId;\r\n    }\r\n\r\n    public String getDepartmentName() {\r\n        return departmentName;\r\n    }\r\n\r\n    public void setDepartmentName(String departmentName) {\r\n        this.departmentName = departmentName;\r\n    }\r\n\r\n    public String getDepartmentAdress() {\r\n        return departmentAdress;\r\n    }\r\n\r\n    public void setDepartmentAdress(String departmentAdress) {\r\n        this.departmentAdress = departmentAdress;\r\n    }\r\n\r\n    public String getDepartmentCode() {\r\n        return departmentCode;\r\n    }\r\n\r\n    public void setDepartmentCode(String departmentCode) {\r\n        this.departmentCode = departmentCode;\r\n    }\r\n\r\n    public Department(Long departmentId, String departmentName, String departmentAdress, String departmentCode) {\r\n        this.departmentId = departmentId;\r\n        this.departmentName = departmentName;\r\n        this.departmentAdress = departmentAdress;\r\n        this.departmentCode = departmentCode;\r\n    }\r\n    public Department(){}\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Department{&quot; +\r\n                &quot;departmentId=&quot; + departmentId +\r\n                &quot;, departmentName=&#39;&quot; + departmentName + &#39;\\&#39;&#39; +\r\n                &quot;, departmentAdress=&#39;&quot; + departmentAdress + &#39;\\&#39;&#39; +\r\n                &quot;, departmentCode=&#39;&quot; + departmentCode + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\nDepartmentRepository.java:\r\n```java\r\npackage com.kamilosinni.course.repository;\r\n\r\nimport com.kamilosinni.course.entity.Department;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface DepartmentRepository extends JpaRepository&lt;Department, Long&gt; {}\r\n\r\n```\r\nDepartmentService.java:\r\n```java\r\npackage com.kamilosinni.course.service;\r\n\r\nimport com.kamilosinni.course.entity.Department;\r\n\r\n\r\n\r\npublic interface DepartmentService {\r\n    Department saveDepartment(Department department);\r\n}\r\n```\r\nDepartmentServiceImpl.java:\r\n```java\r\npackage com.kamilosinni.course.service;\r\n\r\nimport com.kamilosinni.course.entity.Department;\r\nimport com.kamilosinni.course.repository.DepartmentRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class DepartmentServiceImpl implements DepartmentService{\r\n\r\n\r\n\r\n@Autowired\r\n    DepartmentRepository departmentRepository;\r\n\r\n    DepartmentServiceImpl(){}\r\n    @Override\r\n    public Department saveDepartment(Department department) {\r\n        return departmentRepository.save(department);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\ni tried to add additional annotations to the main class:\r\n\r\n```java\r\npackage com.kamilosinni.course;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n\r\n\r\n@SpringBootApplication\r\n@EntityScan(&quot;com.kamilosinni.course.entity&quot;)\r\n@EnableJpaRepositories(&quot;com.kamilosinni.course.repository&quot;)\r\npublic class CourseApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CourseApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAlso i tried to move the class to the main package with the main class and addthe `@NoRepositoryBean` annotation to the `DepartmentRepository`, that didn&#39;t do anything either\r\n\r\nEdit: if i replace `javax` imports with `jakarta` in Department.java, there is no error. In addition, in the guides on the official site, `javax` is used all the time, which is quite strange, because even the rewritten code does not work. Maybe the configuration is incorrect? Or maybe dependencies.\r\n```java\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\n```\r\nI also add my pom.xml file, it may be helpful:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.kamilosinni&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;course&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;course&lt;/name&gt;\r\n\t&lt;description&gt;Spring boot course&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\n [File structure here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PBLEc.png","title":"Spring Boot error with a repository/entity, &quot;not a managed type&quot;","body":"<p>I know that similar questions have been asked before on this forum, but none of the proposed solutions helped me, so I am writing a separate question. The code is from the spring boot course on youtube (<a href=\"https://youtu.be/zvR-Oif_nxg\" rel=\"nofollow noreferrer\">https://youtu.be/zvR-Oif_nxg</a>)(im stuck about 2:21:00), but this error also occurs when I tried to do the course on the spring boot site. The full text of the error is:</p>\n<hr />\n<p><code>&quot;Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService': Error creating bean with name 'departmentServiceImpl': Unsatisfied dependency expressed through field 'departmentRepository': Error creating bean with name 'departmentRepository' defined in com.kamilosinni.course.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.kamilosinni.course.entity.Department&quot; </code></p>\n<hr />\n<p>main app class (CourseApplication.java):</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.kamilosinni.course;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n\n\n@SpringBootApplication\n\npublic class CourseApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CourseApplication.class, args);\n    }\n\n}\n\n</code></pre>\n<p>DepartmentController.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course.controller;\n\n\nimport com.kamilosinni.course.entity.Department;\nimport com.kamilosinni.course.service.DepartmentService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class DepartmentController {\n\n    @Autowired\n   private DepartmentService departmentService;\n    @GetMapping(&quot;/departments&quot;)\n    public Department saveDepartment(@RequestBody Department department)\n    {\n        return departmentService.saveDepartment(department);\n\n    }\n}\n</code></pre>\n<p>Department.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course.entity;\n\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Department {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long departmentId;\n    private String departmentName;\n    private String departmentAdress;\n    private String departmentCode;\n\n    public Long getDepartmentId() {\n        return departmentId;\n    }\n\n    public void setDepartmentId(Long departmentId) {\n        this.departmentId = departmentId;\n    }\n\n    public String getDepartmentName() {\n        return departmentName;\n    }\n\n    public void setDepartmentName(String departmentName) {\n        this.departmentName = departmentName;\n    }\n\n    public String getDepartmentAdress() {\n        return departmentAdress;\n    }\n\n    public void setDepartmentAdress(String departmentAdress) {\n        this.departmentAdress = departmentAdress;\n    }\n\n    public String getDepartmentCode() {\n        return departmentCode;\n    }\n\n    public void setDepartmentCode(String departmentCode) {\n        this.departmentCode = departmentCode;\n    }\n\n    public Department(Long departmentId, String departmentName, String departmentAdress, String departmentCode) {\n        this.departmentId = departmentId;\n        this.departmentName = departmentName;\n        this.departmentAdress = departmentAdress;\n        this.departmentCode = departmentCode;\n    }\n    public Department(){}\n\n    @Override\n    public String toString() {\n        return &quot;Department{&quot; +\n                &quot;departmentId=&quot; + departmentId +\n                &quot;, departmentName='&quot; + departmentName + '\\'' +\n                &quot;, departmentAdress='&quot; + departmentAdress + '\\'' +\n                &quot;, departmentCode='&quot; + departmentCode + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p>DepartmentRepository.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course.repository;\n\nimport com.kamilosinni.course.entity.Department;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface DepartmentRepository extends JpaRepository&lt;Department, Long&gt; {}\n\n</code></pre>\n<p>DepartmentService.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course.service;\n\nimport com.kamilosinni.course.entity.Department;\n\n\n\npublic interface DepartmentService {\n    Department saveDepartment(Department department);\n}\n</code></pre>\n<p>DepartmentServiceImpl.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course.service;\n\nimport com.kamilosinni.course.entity.Department;\nimport com.kamilosinni.course.repository.DepartmentRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class DepartmentServiceImpl implements DepartmentService{\n\n\n\n@Autowired\n    DepartmentRepository departmentRepository;\n\n    DepartmentServiceImpl(){}\n    @Override\n    public Department saveDepartment(Department department) {\n        return departmentRepository.save(department);\n    }\n}\n\n</code></pre>\n<p>i tried to add additional annotations to the main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.kamilosinni.course;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n\n@SpringBootApplication\n@EntityScan(&quot;com.kamilosinni.course.entity&quot;)\n@EnableJpaRepositories(&quot;com.kamilosinni.course.repository&quot;)\npublic class CourseApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CourseApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Also i tried to move the class to the main package with the main class and addthe <code>@NoRepositoryBean</code> annotation to the <code>DepartmentRepository</code>, that didn't do anything either</p>\n<p>Edit: if i replace <code>javax</code> imports with <code>jakarta</code> in Department.java, there is no error. In addition, in the guides on the official site, <code>javax</code> is used all the time, which is quite strange, because even the rewritten code does not work. Maybe the configuration is incorrect? Or maybe dependencies.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\n</code></pre>\n<p>I also add my pom.xml file, it may be helpful:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.kamilosinni&lt;/groupId&gt;\n    &lt;artifactId&gt;course&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;course&lt;/name&gt;\n    &lt;description&gt;Spring boot course&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/PBLEc.png\" rel=\"nofollow noreferrer\">File structure here</a></p>\n"},{"tags":["java","solr","solrcloud"],"owner":{"account_id":5458872,"reputation":2254,"user_id":4341561,"accept_rate":65,"display_name":"Kiran Subedi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694539317,"creation_date":1694539317,"question_id":77091391,"body_markdown":"I am trying to figure out why my queries are extremely slow for around 1M documents and the server has around 8GB RAM. My query looks like this : \r\n\r\n    (indexType:msg &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; ((searchDescription:example*) || (searchSummary:example*)))|| (indexType:files &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; ((searchTitle:example*) || (searchDescription:example*)))|| (indexType:thread &amp;&amp;  groupType:1 &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; searchTitle:example*^5)|| (indexType:thread &amp;&amp; (groupType:3 || (groupType:2 &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe)) &amp;&amp; searchTitle:example*)|| (indexType:member &amp;&amp; (searchTitle:example*^3))\r\n\r\nPreviously, the query was OK and it provided a response around 500ms. But, later it took around 16-20sec to get the search result. From the above query, all the fields are indexed except the participantIds.  My question is : \r\n\r\nHow can I increase the performance of the above query?\r\nDo I need to index the participantIds too?\r\n","title":"Solr search query is slow at first but quiet fast for later on same queries","body":"<p>I am trying to figure out why my queries are extremely slow for around 1M documents and the server has around 8GB RAM. My query looks like this :</p>\n<pre><code>(indexType:msg &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; ((searchDescription:example*) || (searchSummary:example*)))|| (indexType:files &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; ((searchTitle:example*) || (searchDescription:example*)))|| (indexType:thread &amp;&amp;  groupType:1 &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe &amp;&amp; searchTitle:example*^5)|| (indexType:thread &amp;&amp; (groupType:3 || (groupType:2 &amp;&amp; participantIds:4ac72a5a8a8d43339f8eaf2ff142a6fe)) &amp;&amp; searchTitle:example*)|| (indexType:member &amp;&amp; (searchTitle:example*^3))\n</code></pre>\n<p>Previously, the query was OK and it provided a response around 500ms. But, later it took around 16-20sec to get the search result. From the above query, all the fields are indexed except the participantIds.  My question is :</p>\n<p>How can I increase the performance of the above query?\nDo I need to index the participantIds too?</p>\n"},{"tags":["java","android","android-alertdialog"],"comments":[{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1694467507,"post_id":77084800,"comment_id":135892188,"body_markdown":"Your builder creates the Dialog somehow. Can you use get() or something else to get the dialog? I think you must extract the Dialog into a variable and change the text directly in your dialog-button-click method. Check if you can use a callback which is executed after your action is finished.","body":"Your builder creates the Dialog somehow. Can you use get() or something else to get the dialog? I think you must extract the Dialog into a variable and change the text directly in your dialog-button-click method. Check if you can use a callback which is executed after your action is finished."},{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1694467881,"post_id":77084800,"comment_id":135892241,"body_markdown":"If that is not possible, then switch from using the Builder to create the dialog to using a normal constructor and setters. IMO you should get access to the buttons now.","body":"If that is not possible, then switch from using the Builder to create the dialog to using a normal constructor and setters. IMO you should get access to the buttons now."},{"owner":{"display_name":"user8071572"},"score":0,"creation_date":1694481042,"post_id":77084800,"comment_id":135893396,"body_markdown":"How can I do that? I was not able to have the AlertDialog as a var","body":"How can I do that? I was not able to have the AlertDialog as a var"},{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":1,"creation_date":1694616980,"post_id":77084800,"comment_id":135915382,"body_markdown":"If you use intellij: Ctrl +left click on the method show() from builder.show(). A builder is a class that constructs something with the builder pattern. Under the hood, ist uses the normal constructor of the class to be created (AlertDialog).","body":"If you use intellij: Ctrl +left click on the method show() from builder.show(). A builder is a class that constructs something with the builder pattern. Under the hood, ist uses the normal constructor of the class to be created (AlertDialog)."},{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1694617412,"post_id":77084800,"comment_id":135915484,"body_markdown":"Workaround: Close the dialog and display a waiting dialog with a Spinner. After that, display a normal dialog if you need one again. IMO this is the best solution!","body":"Workaround: Close the dialog and display a waiting dialog with a Spinner. After that, display a normal dialog if you need one again. IMO this is the best solution!"},{"owner":{"display_name":"user8071572"},"score":0,"creation_date":1694638253,"post_id":77084800,"comment_id":135919283,"body_markdown":"Yeah that&#39;s possible. I think the key was to create a var for AlertDialog and the PositiveButton.","body":"Yeah that&#39;s possible. I think the key was to create a var for AlertDialog and the PositiveButton."}],"answers":[{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694538895,"creation_date":1694538895,"answer_id":77091339,"question_id":77084800,"body_markdown":" Try this: \r\n\r\n \r\n\r\n     myButton.setOnClickListener(new View.OnClickListener() {\r\n          @Override\r\n          public void onClick(View v) {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());\r\n            builder.setTitle(&quot;What&#39;s your question?&quot;);\r\n        \r\n            // Set up the input\r\n            final EditText input = new EditText(v.getContext());\r\n            // Specify the type of input expected; this, for example, sets the input as a password, and will mask the text\r\n            input.setInputType(InputType.TYPE_CLASS_TEXT);\r\n            builder.setView(input);\r\n            input.setText(&quot;test test&quot;);\r\n            input.setTextSize(15);\r\n        \r\n            // Set up the buttons\r\n            builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n              @Override\r\n              public void onClick(final DialogInterface dialog, int which) {\r\n                // Disable the button to prevent further clicks\r\n                final AlertDialog alertDialog = (AlertDialog) dialog;\r\n                alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\r\n                alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setText(&quot;Loading...&quot;);\r\n        \r\n                m_text = input.getText().toString();\r\n        \r\n                // Simulate a 10s delay for downloading the image (Replace this with your actual download code)\r\n                new Handler().postDelayed(new Runnable() {\r\n                  @Override\r\n                  public void run() {\r\n                    // After the download is complete, update the button text and enable it\r\n                    alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setText(&quot;OK&quot;);\r\n                    alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(true);\r\n        \r\n                    // Add code here to show the downloaded image on the main page\r\n                  }\r\n                }, 10000); // Simulated 10s delay, replace with your actual download time\r\n              }\r\n            });\r\n            builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n              @Override\r\n              public void onClick(DialogInterface dialog, int which) {\r\n                dialog.cancel();\r\n              }\r\n            });\r\n        \r\n            builder.show();\r\n          }\r\n        });\r\n\r\n","title":"Change the Text of AlertDialog positiveButton after clicking","body":"<p>Try this:</p>\n<pre><code> myButton.setOnClickListener(new View.OnClickListener() {\n      @Override\n      public void onClick(View v) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());\n        builder.setTitle(&quot;What's your question?&quot;);\n    \n        // Set up the input\n        final EditText input = new EditText(v.getContext());\n        // Specify the type of input expected; this, for example, sets the input as a password, and will mask the text\n        input.setInputType(InputType.TYPE_CLASS_TEXT);\n        builder.setView(input);\n        input.setText(&quot;test test&quot;);\n        input.setTextSize(15);\n    \n        // Set up the buttons\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n          @Override\n          public void onClick(final DialogInterface dialog, int which) {\n            // Disable the button to prevent further clicks\n            final AlertDialog alertDialog = (AlertDialog) dialog;\n            alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\n            alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setText(&quot;Loading...&quot;);\n    \n            m_text = input.getText().toString();\n    \n            // Simulate a 10s delay for downloading the image (Replace this with your actual download code)\n            new Handler().postDelayed(new Runnable() {\n              @Override\n              public void run() {\n                // After the download is complete, update the button text and enable it\n                alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setText(&quot;OK&quot;);\n                alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(true);\n    \n                // Add code here to show the downloaded image on the main page\n              }\n            }, 10000); // Simulated 10s delay, replace with your actual download time\n          }\n        });\n        builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n          @Override\n          public void onClick(DialogInterface dialog, int which) {\n            dialog.cancel();\n          }\n        });\n    \n        builder.show();\n      }\n    });\n</code></pre>\n"}],"owner":{"display_name":"user8071572"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77091339,"answer_count":1,"score":0,"last_activity_date":1694538895,"creation_date":1694466770,"question_id":77084800,"body_markdown":"I have an AlertDialog that has a positive button (OK) and a cancel. When pressing OK, I have a process that should take around 10s to finish (downloading an image from a URL and then showing it on the main page). How can I change the positiveButton text after pressing to be something like &quot;loading&quot;? And also, it should wait until the image is downloaded, so the alert shouldn&#39;t disappear.\r\n\r\nI tried looking into its functions but didn&#39;t see a `setText()` function.\r\n\r\n```\r\n    myButton.setOnClickListener(new View.OnClickListener() {\r\n      @Override\r\n      public void onClick(View v) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());\r\n        builder.setTitle(&quot;What&#39;s your question?&quot;);\r\n\r\n        // Set up the input\r\n        final EditText input = new EditText(v.getContext());\r\n        // Specify the type of input expected; this, for example, sets the input as a password, and will mask the text\r\n        input.setInputType(InputType.TYPE_CLASS_TEXT);\r\n        builder.setView(input);\r\n        input.setText(&quot;test test&quot;);\r\n        input.setTextSize(15);\r\n\r\n        // Set up the buttons\r\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n          @Override\r\n          public void onClick(DialogInterface dialog, int which) {\r\n            m_text = input.getText().toString();\r\n          }\r\n        });\r\n        builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n          @Override\r\n          public void onClick(DialogInterface dialog, int which) {\r\n            dialog.cancel();\r\n          }\r\n        });\r\n\r\n        builder.show();\r\n      }\r\n    });\r\n```\r\n\r\n","title":"Change the Text of AlertDialog positiveButton after clicking","body":"<p>I have an AlertDialog that has a positive button (OK) and a cancel. When pressing OK, I have a process that should take around 10s to finish (downloading an image from a URL and then showing it on the main page). How can I change the positiveButton text after pressing to be something like &quot;loading&quot;? And also, it should wait until the image is downloaded, so the alert shouldn't disappear.</p>\n<p>I tried looking into its functions but didn't see a <code>setText()</code> function.</p>\n<pre><code>    myButton.setOnClickListener(new View.OnClickListener() {\n      @Override\n      public void onClick(View v) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());\n        builder.setTitle(&quot;What's your question?&quot;);\n\n        // Set up the input\n        final EditText input = new EditText(v.getContext());\n        // Specify the type of input expected; this, for example, sets the input as a password, and will mask the text\n        input.setInputType(InputType.TYPE_CLASS_TEXT);\n        builder.setView(input);\n        input.setText(&quot;test test&quot;);\n        input.setTextSize(15);\n\n        // Set up the buttons\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n          @Override\n          public void onClick(DialogInterface dialog, int which) {\n            m_text = input.getText().toString();\n          }\n        });\n        builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n          @Override\n          public void onClick(DialogInterface dialog, int which) {\n            dialog.cancel();\n          }\n        });\n\n        builder.show();\n      }\n    });\n</code></pre>\n"},{"tags":["java","spring-boot","maven","spring-mvc","spring-data-jpa"],"comments":[{"owner":{"account_id":12503014,"reputation":130,"user_id":9100818,"display_name":"Kafarson"},"score":0,"creation_date":1694521891,"post_id":77089108,"comment_id":135899319,"body_markdown":"Can you share code of class StudentController ?","body":"Can you share code of class StudentController ?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694522033,"post_id":77089108,"comment_id":135899352,"body_markdown":"Please take care ob java naming conventions. package names should be lower case","body":"Please take care ob java naming conventions. package names should be lower case"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1694522131,"post_id":77089108,"comment_id":135899368,"body_markdown":"Wild guess. Using Spring Boot 3, following a Spring Boot 2 tutorial and decided to include some additional `persistence-api` dependency because that is what the tutorial uses. Remove that dependency and fix the imports to `jakarta.persistence` instead of `javax.persistence`.","body":"Wild guess. Using Spring Boot 3, following a Spring Boot 2 tutorial and decided to include some additional <code>persistence-api</code> dependency because that is what the tutorial uses. Remove that dependency and fix the imports to <code>jakarta.persistence</code> instead of <code>javax.persistence</code>."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1694527622,"post_id":77089108,"comment_id":135900805,"body_markdown":"I am confused. The title talks about an entity not being found, but the body of the question is about a service bean (or rather, a Repository) not being found. Those are two different things.","body":"I am confused. The title talks about an entity not being found, but the body of the question is about a service bean (or rather, a Repository) not being found. Those are two different things."},{"owner":{"account_id":29422588,"reputation":1,"user_id":22544007,"display_name":"Nikhil Nandula"},"score":0,"creation_date":1694537854,"post_id":77089108,"comment_id":135903155,"body_markdown":"Well yes the StudentRepository is not identified by spring as I am trying to autowire the StudentService constructor. The title describes the fact that even after applying @entity annotation to the Student class, it is not being identified as an entity for ORM to be done.","body":"Well yes the StudentRepository is not identified by spring as I am trying to autowire the StudentService constructor. The title describes the fact that even after applying @entity annotation to the Student class, it is not being identified as an entity for ORM to be done."},{"owner":{"account_id":949087,"reputation":5088,"user_id":975649,"accept_rate":81,"display_name":"Usman Mutawakil"},"score":0,"creation_date":1694878346,"post_id":77089108,"comment_id":135950729,"body_markdown":"Hi. Try removing the @Repository annotation. Its not needed for CrudRepository. Let me know what happens after that.","body":"Hi. Try removing the @Repository annotation. Its not needed for CrudRepository. Let me know what happens after that."},{"owner":{"account_id":29422588,"reputation":1,"user_id":22544007,"display_name":"Nikhil Nandula"},"score":0,"creation_date":1694917825,"post_id":77089108,"comment_id":135953961,"body_markdown":"The error is still the same","body":"The error is still the same"},{"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"score":0,"creation_date":1695034150,"post_id":77089108,"comment_id":135965477,"body_markdown":"Please, show your pom.xml and SpringProjectApplication class","body":"Please, show your pom.xml and SpringProjectApplication class"}],"owner":{"account_id":29422588,"reputation":1,"user_id":22544007,"display_name":"Nikhil Nandula"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694538354,"creation_date":1694521658,"question_id":77089108,"body_markdown":"So when I try to put the @entity annotation to the student class and also create a student repository, I am getting an error: **Parameter 0 of constructor in com.example.SpringProject.Student.StudentService required a bean of type &#39;com.example.SpringProject.Student.StudentRepository&#39; that could not be found.**\r\n\r\nThe project structure is:\r\n[enter image description here](https://i.stack.imgur.com/2PKLm.png)\r\n\r\n\r\n Here is my Student Class (entity class)\r\n\r\n```\r\npackage com.example.SpringProject.Student;\r\n\r\n\r\nimport javax.persistence.*;\r\nimport java.time.LocalDate;\r\n\r\n\r\n@Entity\r\n@Table\r\npublic class Student {\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;student_sequence&quot;,\r\n            sequenceName = &quot;student_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;student_sequence&quot;\r\n    )\r\n    private Long id;\r\n    private String name;\r\n    private LocalDate dob;\r\n    private String email;\r\n    private Integer age;\r\n\r\n    public Student() {\r\n    }\r\n\r\n    public Student(Long id, String name, LocalDate dob, String email, Integer age) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.dob = dob;\r\n        this.email = email;\r\n        this.age = age;\r\n    }\r\n\r\n    public Student(String name, LocalDate dob, String email, Integer age) {\r\n        this.name = name;\r\n        this.dob = dob;\r\n        this.email = email;\r\n        this.age = age;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public LocalDate getDob() {\r\n        return dob;\r\n    }\r\n\r\n    public void setDob(LocalDate dob) {\r\n        this.dob = dob;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public Integer getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(Integer age) {\r\n        this.age = age;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Student{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, dob=&quot; + dob +\r\n                &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                &quot;, age=&quot; + age +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\nHere is the student repo:\r\n\r\n```\r\npackage com.example.SpringProject.Student;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface StudentRepository extends CrudRepository&lt;Student, Long&gt; {\r\n}\r\n```\r\n\r\nHere is the student service: (business logic)\r\n\r\n```\r\npackage com.example.SpringProject.Student;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.Month;\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class StudentService {\r\n\r\n    private final StudentRepository studentRepository;\r\n\r\n    @Autowired\r\n    public StudentService(StudentRepository studentRepository) {\r\n        this.studentRepository = studentRepository;\r\n    }\r\n\r\n    public StudentRepository getStudentRepository() {\r\n        return studentRepository;\r\n    }\r\n\r\n    public void saveStudents(Student student)\r\n    {\r\n        this.studentRepository.save(student);\r\n    }\r\n\r\n    public List&lt;Student&gt; getStudents() {\r\n//        \r\n            return (List&lt;Student&gt;) studentRepository.findAll();\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere is the StudentController:\r\n\r\n```\r\npackage com.example.SpringProject.Student;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.Month;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(path = &quot;api/v1/student&quot;)\r\npublic class StudentController {\r\n\r\n    private final StudentService studentService;\r\n\r\n    @Autowired\r\n    public StudentController(StudentService studentService) {\r\n        this.studentService = studentService;\r\n    }\r\n\r\n    public StudentService getStudentService() {\r\n        return this.studentService;\r\n    }\r\n\r\n    @GetMapping\r\n    public List&lt;Student&gt; testStudent()\r\n    {\r\n        this.studentService.saveStudents(new Student(1L,\r\n                        &quot;xyz&quot;,\r\n                        LocalDate.of(2001, Month.SEPTEMBER, 22),\r\n                        &quot;xyz@gmail.com&quot;,\r\n                        21));\r\n        return this.studentService.getStudents();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWhen I tried running the application I got the following error:\r\n\r\n    Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;studentController&#39; defined in file [/Users/nikhil/Desktop/SpringProject/target/classes/com/example/SpringProject/Student/StudentController.class]:\r\n    Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name &#39;studentService&#39; defined in file [/Users/nikhil/Desktop/SpringProject/target/classes/com/example/SpringProject/Student/StudentService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type &#39;com.example.SpringProject.Student.StudentRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}","title":"@Entity is not being detected on the entity class","body":"<p>So when I try to put the @entity annotation to the student class and also create a student repository, I am getting an error: <strong>Parameter 0 of constructor in com.example.SpringProject.Student.StudentService required a bean of type 'com.example.SpringProject.Student.StudentRepository' that could not be found.</strong></p>\n<p>The project structure is:\n<a href=\"https://i.stack.imgur.com/2PKLm.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Here is my Student Class (entity class)</p>\n<pre><code>package com.example.SpringProject.Student;\n\n\nimport javax.persistence.*;\nimport java.time.LocalDate;\n\n\n@Entity\n@Table\npublic class Student {\n    @Id\n    @SequenceGenerator(\n            name = &quot;student_sequence&quot;,\n            sequenceName = &quot;student_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;student_sequence&quot;\n    )\n    private Long id;\n    private String name;\n    private LocalDate dob;\n    private String email;\n    private Integer age;\n\n    public Student() {\n    }\n\n    public Student(Long id, String name, LocalDate dob, String email, Integer age) {\n        this.id = id;\n        this.name = name;\n        this.dob = dob;\n        this.email = email;\n        this.age = age;\n    }\n\n    public Student(String name, LocalDate dob, String email, Integer age) {\n        this.name = name;\n        this.dob = dob;\n        this.email = email;\n        this.age = age;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public LocalDate getDob() {\n        return dob;\n    }\n\n    public void setDob(LocalDate dob) {\n        this.dob = dob;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public Integer getAge() {\n        return age;\n    }\n\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, dob=&quot; + dob +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, age=&quot; + age +\n                '}';\n    }\n}\n\n</code></pre>\n<p>Here is the student repo:</p>\n<pre><code>package com.example.SpringProject.Student;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface StudentRepository extends CrudRepository&lt;Student, Long&gt; {\n}\n</code></pre>\n<p>Here is the student service: (business logic)</p>\n<pre><code>package com.example.SpringProject.Student;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.List;\n\n@Service\npublic class StudentService {\n\n    private final StudentRepository studentRepository;\n\n    @Autowired\n    public StudentService(StudentRepository studentRepository) {\n        this.studentRepository = studentRepository;\n    }\n\n    public StudentRepository getStudentRepository() {\n        return studentRepository;\n    }\n\n    public void saveStudents(Student student)\n    {\n        this.studentRepository.save(student);\n    }\n\n    public List&lt;Student&gt; getStudents() {\n//        \n            return (List&lt;Student&gt;) studentRepository.findAll();\n    }\n}\n\n</code></pre>\n<p>Here is the StudentController:</p>\n<pre><code>package com.example.SpringProject.Student;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.List;\n\n@RestController\n@RequestMapping(path = &quot;api/v1/student&quot;)\npublic class StudentController {\n\n    private final StudentService studentService;\n\n    @Autowired\n    public StudentController(StudentService studentService) {\n        this.studentService = studentService;\n    }\n\n    public StudentService getStudentService() {\n        return this.studentService;\n    }\n\n    @GetMapping\n    public List&lt;Student&gt; testStudent()\n    {\n        this.studentService.saveStudents(new Student(1L,\n                        &quot;xyz&quot;,\n                        LocalDate.of(2001, Month.SEPTEMBER, 22),\n                        &quot;xyz@gmail.com&quot;,\n                        21));\n        return this.studentService.getStudents();\n    }\n}\n</code></pre>\n<p>When I tried running the application I got the following error:</p>\n<pre><code>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'studentController' defined in file [/Users/nikhil/Desktop/SpringProject/target/classes/com/example/SpringProject/Student/StudentController.class]:\nUnsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'studentService' defined in file [/Users/nikhil/Desktop/SpringProject/target/classes/com/example/SpringProject/Student/StudentService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.example.SpringProject.Student.StudentRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694538233,"creation_date":1694536727,"answer_id":77091118,"question_id":77091085,"body_markdown":"Its because you create your `JScrollPane` with the desired `JTextArea`:\r\n\r\n    static JScrollPane scrollPane = new JScrollPane(textArea);\r\n\r\nAnd then you recreate it, without the `JTextArea`:\r\n\r\n    scrollPane = new JScrollPane();\r\n\r\nSo, you just need to remove the line mentioned above. I really don&#39;t like your GUI class design (those static fields), but it isn&#39;t the objective of your question.","title":"JTextArea not displaying in JScrollPane?","body":"<p>Its because you create your <code>JScrollPane</code> with the desired <code>JTextArea</code>:</p>\n<pre><code>static JScrollPane scrollPane = new JScrollPane(textArea);\n</code></pre>\n<p>And then you recreate it, without the <code>JTextArea</code>:</p>\n<pre><code>scrollPane = new JScrollPane();\n</code></pre>\n<p>So, you just need to remove the line mentioned above. I really don't like your GUI class design (those static fields), but it isn't the objective of your question.</p>\n"}],"owner":{"account_id":29397182,"reputation":13,"user_id":22524270,"display_name":"PokeCedGo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77091118,"answer_count":1,"score":0,"last_activity_date":1694538233,"creation_date":1694536432,"question_id":77091085,"body_markdown":"For some reason the JTextArea is not being visible/displayed in the scrollPane? I&#39;m trying to recreate a simple chat bubble and initially started off by making JPanels to serve as the bubble and overlay it with a JTextLabel but it didn&#39;t go so well because there was spacing issues/scrollpane sizing issues that got me stuck. I took a step back and just want to make the textarea work.\r\n\r\n\r\n```\r\n  import java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JLayeredPane;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextArea;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class EventListeners implements ActionListener {\r\n    private final JButton button;\r\n    private final JTextField textField;\r\n    private final JTextArea textArea;\r\n//    private final JLayeredPane layeredPane;\r\n\r\n    public EventListeners(JButton gift_button, JTextField textField, JTextArea textArea) {\r\n        this.button = gift_button;\r\n        this.textField = textField;\r\n        this.textArea = textArea;\r\n   //     this.layeredPane = ChatSystem.layeredPane;\r\n\r\n        // Set font and text color for the JTextArea\r\n        Font boldFont = new Font(textArea.getFont().getName(), Font.BOLD, textArea.getFont().getSize());\r\n        textArea.setFont(boldFont);\r\n        textArea.setForeground(Color.YELLOW);\r\n     //   layeredPane.add(textArea, Integer.valueOf(2));\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == button) {\r\n            // Gift Button\r\n            System.out.println(&quot;Button clicked&quot;);\r\n        } else if (e.getSource() == textField) {\r\n            if (!textField.getText().isEmpty()) {\r\n                String message = textField.getText();\r\n                textField.setText(&quot;&quot;);\r\n\r\n                // Debugging: Print the message to console\r\n                System.out.println(&quot;Message: &quot; + message);\r\n\r\n                // Append the message to the JTextArea on the EDT\r\n                SwingUtilities.invokeLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n\r\n                        textArea.setLineWrap(true);  \r\n                        textArea.setWrapStyleWord(true);\r\n\r\n                        textArea.append(&quot;You: &quot; + message + &quot;\\n&quot;);\r\n                        System.out.println(&quot;Test:&quot; + message);\r\n                        \r\n                    }\r\n                });\r\n\r\n                // Debugging: Print the text area content to console\r\n                System.out.println(&quot;Text Area Content:\\n&quot; + textArea.getText());\r\n\r\n                // Scroll to the bottom of the JTextArea on the EDT\r\n                SwingUtilities.invokeLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        textArea.setCaretPosition(textArea.getDocument().getLength());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n```lua\r\nimport javax.swing.*;\r\nimport javax.swing.border.LineBorder;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\npublic class ChatUI {\r\n    static JTextField chat_input = new JTextField(8);\r\n    static JPanel inner_background = new JPanel();\r\n    static JTextArea textArea = new JTextArea(50, 2);\r\n    static JScrollPane scrollPane = new JScrollPane(textArea);\r\n\r\n    public static String getTextFieldText() {\r\n        return chat_input.getText();\r\n    }\r\n\r\n    public static void createScrollingList(JLayeredPane layeredPane) {\r\n        // Other settings for the inner background panel\r\n        // inner_background.setBackground(Color.decode(&quot;#111214&quot;));\r\n        inner_background.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\r\n        inner_background.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS));\r\n        inner_background.setPreferredSize(new Dimension(400, 1000)); // Adjust the preferred size as needed\r\n    \r\n        // Create a new JScrollPane and add the inner_background panel to it\r\n        scrollPane = new JScrollPane();\r\n        scrollPane.setBounds(20, 200, 330, 450);\r\n    \r\n        // Auto-scrolls down\r\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\r\n       // inner_background.setLayout(new FlowLayout());\r\n\r\n        // Set the background color of the scroll pane and its viewport\r\n        scrollPane.setBackground(Color.decode(&quot;#111214&quot;));\r\n        scrollPane.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\r\n    \r\n        // Add the scroll pane to the layered pane\r\n        layeredPane.add(scrollPane, Integer.valueOf(2));\r\n    \r\n        // Ensure the layout is updated\r\n        inner_background.revalidate();\r\n        inner_background.repaint();\r\n    }\r\n    \r\n\r\n    static void UIVisuals(JFrame frame, JLayeredPane layeredPane) {\r\n        // Left frame\r\n        JPanel topBackground = new JPanel();\r\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\r\n        topBackground.setBounds(0, 0, 500, 80);\r\n\r\n        // Right frame\r\n        JPanel rightFrame = new JPanel();\r\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\r\n        rightFrame.setBounds(20, 40, 20, 20);\r\n\r\n        // Add frames to layeredPane\r\n        layeredPane.add(rightFrame, Integer.valueOf(1));\r\n        layeredPane.add(topBackground, Integer.valueOf(1));\r\n\r\n        // User_Icon\r\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\r\n        JLabel userLabel = new JLabel(userIcon);\r\n        userLabel.setBounds(0, 30, userIcon.getIconWidth(), userIcon.getIconHeight()); // Adjust the bounds as needed\r\n        layeredPane.add(userLabel, Integer.valueOf(2));\r\n\r\n        // Emoji Button\r\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\r\n\r\n        // Create a JButton and set the image icon\r\n        JButton gift_button = new JButton(imageIcon);\r\n        gift_button.setBounds(320, 670, 40, 40);\r\n        layeredPane.add(gift_button, Integer.valueOf(2));\r\n\r\n        // Make button transparent\r\n        gift_button.setOpaque(false);\r\n        gift_button.setContentAreaFilled(false);\r\n        gift_button.setBorderPainted(false);\r\n\r\n        // Texting Panel\r\n        chat_input.setBackground(Color.decode(&quot;#383A40&quot;));\r\n        chat_input.setForeground(Color.WHITE);\r\n        chat_input.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\r\n\r\n        // Font setup\r\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 15);\r\n        chat_input.setFont(f3);\r\n\r\n        // Adjust the position and size of the chat input\r\n        chat_input.setBounds(20, 670, 280, 40);\r\n        layeredPane.add(chat_input, Integer.valueOf(1));\r\n\r\n        JPanel bottomPanel = new JPanel();\r\n        bottomPanel.setLayout(null); // Set null layout for precise positioning\r\n        bottomPanel.add(chat_input);\r\n\r\n        // Add components to layeredPane\r\n        layeredPane.add(chat_input, Integer.valueOf(1));\r\n        layeredPane.add(bottomPanel, BorderLayout.SOUTH);\r\n\r\n        // Event Listeners\r\n        EventListeners eventListeners = new EventListeners(gift_button, chat_input, textArea);\r\n        chat_input.addActionListener(eventListeners);\r\n        gift_button.addActionListener(eventListeners);\r\n\r\n\r\n        createScrollingList(layeredPane);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI feel the issue is with my setup of the scrollPane and inner_background in ChatUI.java but unsure. I know its not a textcolor issue but rather a possible layout problem?","title":"JTextArea not displaying in JScrollPane?","body":"<p>For some reason the JTextArea is not being visible/displayed in the scrollPane? I'm trying to recreate a simple chat bubble and initially started off by making JPanels to serve as the bubble and overlay it with a JTextLabel but it didn't go so well because there was spacing issues/scrollpane sizing issues that got me stuck. I took a step back and just want to make the textarea work.</p>\n<pre><code>  import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JLayeredPane;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class EventListeners implements ActionListener {\n    private final JButton button;\n    private final JTextField textField;\n    private final JTextArea textArea;\n//    private final JLayeredPane layeredPane;\n\n    public EventListeners(JButton gift_button, JTextField textField, JTextArea textArea) {\n        this.button = gift_button;\n        this.textField = textField;\n        this.textArea = textArea;\n   //     this.layeredPane = ChatSystem.layeredPane;\n\n        // Set font and text color for the JTextArea\n        Font boldFont = new Font(textArea.getFont().getName(), Font.BOLD, textArea.getFont().getSize());\n        textArea.setFont(boldFont);\n        textArea.setForeground(Color.YELLOW);\n     //   layeredPane.add(textArea, Integer.valueOf(2));\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == button) {\n            // Gift Button\n            System.out.println(&quot;Button clicked&quot;);\n        } else if (e.getSource() == textField) {\n            if (!textField.getText().isEmpty()) {\n                String message = textField.getText();\n                textField.setText(&quot;&quot;);\n\n                // Debugging: Print the message to console\n                System.out.println(&quot;Message: &quot; + message);\n\n                // Append the message to the JTextArea on the EDT\n                SwingUtilities.invokeLater(new Runnable() {\n                    @Override\n                    public void run() {\n\n                        textArea.setLineWrap(true);  \n                        textArea.setWrapStyleWord(true);\n\n                        textArea.append(&quot;You: &quot; + message + &quot;\\n&quot;);\n                        System.out.println(&quot;Test:&quot; + message);\n                        \n                    }\n                });\n\n                // Debugging: Print the text area content to console\n                System.out.println(&quot;Text Area Content:\\n&quot; + textArea.getText());\n\n                // Scroll to the bottom of the JTextArea on the EDT\n                SwingUtilities.invokeLater(new Runnable() {\n                    @Override\n                    public void run() {\n                        textArea.setCaretPosition(textArea.getDocument().getLength());\n                    }\n                });\n            }\n        }\n    }\n}\n\n</code></pre>\n<pre class=\"lang-lua prettyprint-override\"><code>import javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\npublic class ChatUI {\n    static JTextField chat_input = new JTextField(8);\n    static JPanel inner_background = new JPanel();\n    static JTextArea textArea = new JTextArea(50, 2);\n    static JScrollPane scrollPane = new JScrollPane(textArea);\n\n    public static String getTextFieldText() {\n        return chat_input.getText();\n    }\n\n    public static void createScrollingList(JLayeredPane layeredPane) {\n        // Other settings for the inner background panel\n        // inner_background.setBackground(Color.decode(&quot;#111214&quot;));\n        inner_background.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\n        inner_background.setLayout(new BoxLayout(inner_background, BoxLayout.Y_AXIS));\n        inner_background.setPreferredSize(new Dimension(400, 1000)); // Adjust the preferred size as needed\n    \n        // Create a new JScrollPane and add the inner_background panel to it\n        scrollPane = new JScrollPane();\n        scrollPane.setBounds(20, 200, 330, 450);\n    \n        // Auto-scrolls down\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n       // inner_background.setLayout(new FlowLayout());\n\n        // Set the background color of the scroll pane and its viewport\n        scrollPane.setBackground(Color.decode(&quot;#111214&quot;));\n        scrollPane.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\n    \n        // Add the scroll pane to the layered pane\n        layeredPane.add(scrollPane, Integer.valueOf(2));\n    \n        // Ensure the layout is updated\n        inner_background.revalidate();\n        inner_background.repaint();\n    }\n    \n\n    static void UIVisuals(JFrame frame, JLayeredPane layeredPane) {\n        // Left frame\n        JPanel topBackground = new JPanel();\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\n        topBackground.setBounds(0, 0, 500, 80);\n\n        // Right frame\n        JPanel rightFrame = new JPanel();\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\n        rightFrame.setBounds(20, 40, 20, 20);\n\n        // Add frames to layeredPane\n        layeredPane.add(rightFrame, Integer.valueOf(1));\n        layeredPane.add(topBackground, Integer.valueOf(1));\n\n        // User_Icon\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\n        JLabel userLabel = new JLabel(userIcon);\n        userLabel.setBounds(0, 30, userIcon.getIconWidth(), userIcon.getIconHeight()); // Adjust the bounds as needed\n        layeredPane.add(userLabel, Integer.valueOf(2));\n\n        // Emoji Button\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\n\n        // Create a JButton and set the image icon\n        JButton gift_button = new JButton(imageIcon);\n        gift_button.setBounds(320, 670, 40, 40);\n        layeredPane.add(gift_button, Integer.valueOf(2));\n\n        // Make button transparent\n        gift_button.setOpaque(false);\n        gift_button.setContentAreaFilled(false);\n        gift_button.setBorderPainted(false);\n\n        // Texting Panel\n        chat_input.setBackground(Color.decode(&quot;#383A40&quot;));\n        chat_input.setForeground(Color.WHITE);\n        chat_input.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\n\n        // Font setup\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 15);\n        chat_input.setFont(f3);\n\n        // Adjust the position and size of the chat input\n        chat_input.setBounds(20, 670, 280, 40);\n        layeredPane.add(chat_input, Integer.valueOf(1));\n\n        JPanel bottomPanel = new JPanel();\n        bottomPanel.setLayout(null); // Set null layout for precise positioning\n        bottomPanel.add(chat_input);\n\n        // Add components to layeredPane\n        layeredPane.add(chat_input, Integer.valueOf(1));\n        layeredPane.add(bottomPanel, BorderLayout.SOUTH);\n\n        // Event Listeners\n        EventListeners eventListeners = new EventListeners(gift_button, chat_input, textArea);\n        chat_input.addActionListener(eventListeners);\n        gift_button.addActionListener(eventListeners);\n\n\n        createScrollingList(layeredPane);\n    }\n}\n</code></pre>\n<p>I feel the issue is with my setup of the scrollPane and inner_background in ChatUI.java but unsure. I know its not a textcolor issue but rather a possible layout problem?</p>\n"},{"tags":["java","spring","mongodb"],"answers":[{"tags":[],"owner":{"account_id":181514,"reputation":9905,"user_id":415559,"accept_rate":73,"display_name":"barrypicker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648072312,"creation_date":1648072312,"answer_id":71594508,"question_id":71593554,"body_markdown":"Here is a very small program that performs an Ordered bulkWrite using Spring.  You can change to unordered by changing the enum value on BulkOperations.BulkMode.  This program will insert 3 records, then delete one, then update one.  Because of the filter predicates in the later bulk commands I had to go with an ordered update.  If you are only inserting you could easily get away with a faster unordered bulk command.\r\n\r\n\r\n**Main.java**\r\n\r\n    package com.example.accessingdatamongodb;\r\n    \r\n    import com.mongodb.bulk.BulkWriteResult;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.data.mongodb.core.BulkOperations;\r\n    import org.springframework.data.mongodb.core.MongoOperations;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n    import org.springframework.data.mongodb.core.query.Update;\r\n    \r\n    @SpringBootApplication\r\n    public class Main implements CommandLineRunner {\r\n    \r\n    \t@Autowired\r\n    \tprivate MongoOperations mongoTemplate;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Main.class, args);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run(String... args) throws Exception {\r\n    \r\n    \t\t// CLEAR THE COLLECTION\r\n    \t\tmongoTemplate.remove(new Query(), Customer.class);\r\n    \r\n    \t\tBulkOperations bulkOps = mongoTemplate.bulkOps(BulkOperations.BulkMode.ORDERED, Customer.class);\r\n    \r\n    \t\tfor (Integer i = 0; i &lt; 3; i++)\r\n    \t\t{\r\n    \t\t\tCustomer customer = new Customer();\r\n    \t\t\tcustomer.firstName = &quot;Barry&quot;;\r\n    \t\t\tcustomer.id = i.toString();\r\n    \t\t\tbulkOps.insert(customer);\r\n    \t\t}\r\n    \r\n    \t\tbulkOps.remove(new Query().addCriteria(new Criteria(&quot;i&quot;).is(1)));\r\n    \t\tbulkOps.updateOne(new Query().addCriteria(new Criteria(&quot;i&quot;).is(2)), new Update().set(&quot;name&quot;, &quot;Barry&quot;));\r\n    \r\n    \t\tBulkWriteResult results = bulkOps.execute();\r\n    \t}\r\n    }\r\n\r\n\r\nFor completeness here are the other files in the project...\r\n\r\n**application.properties**\r\n\r\n    spring.data.mongodb.uri=mongodb://localhost:27017/springtestBulkWrite\r\n    spring.data.mongodb.database=springtestBulkWrite\r\n\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;accessing-data-mongodb&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;accessing-data-mongodb&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.5.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mongodb-driver-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.5.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;bson&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;4.5.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n**SimpleMongoConfig.java**\r\n\r\n     import com.mongodb.client.MongoClient;\r\n     import com.mongodb.ConnectionString;\r\n     import com.mongodb.MongoClientSettings;\r\n     import com.mongodb.client.MongoClients;\r\n     import org.springframework.beans.factory.annotation.Value;\r\n     import org.springframework.context.annotation.Bean;\r\n     import org.springframework.context.annotation.Configuration;\r\n     import org.springframework.data.mongodb.core.MongoTemplate;\r\n    \r\n     @Configuration\r\n     public class SimpleMongoConfig {\r\n    \r\n    \t @Value(&quot;${spring.data.mongodb.database}&quot;)\r\n    \t private String databaseName;\r\n    \r\n    \t @Value(&quot;${spring.data.mongodb.uri}&quot;)\r\n    \t private String uri;\r\n    \r\n    \t @Bean\r\n         public MongoClient mongo() {\r\n             ConnectionString connectionString = new ConnectionString(uri);\r\n             MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\r\n               .applyConnectionString(connectionString)\r\n               .build();\r\n            \r\n             return MongoClients.create(mongoClientSettings);\r\n         }\r\n    \r\n         @Bean\r\n         public MongoTemplate mongoTemplate() throws Exception {\r\n             return new MongoTemplate(mongo(), databaseName);\r\n         }\r\n     }\r\n\r\n**CustomerRepository.java** (not really used in this trivial example)\r\n\r\n    package com.example.accessingdatamongodb;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.data.mongodb.repository.MongoRepository;\r\n    \r\n    public interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {\r\n    \r\n      public Customer findByFirstName(String firstName);\r\n      public List&lt;Customer&gt; findByLastName(String lastName);\r\n      public void deleteByLastName(String lastName);\r\n    }\r\n\r\n\r\n**Customer.java**\r\n\r\n    package com.example.accessingdatamongodb;\r\n    \r\n    import org.springframework.data.annotation.Id;\r\n    \r\n    \r\n    public class Customer {\r\n    \r\n      @Id\r\n      public String id;\r\n    \r\n      public String firstName;\r\n      public String lastName;\r\n    \r\n      public Customer() {}\r\n    \r\n      public Customer(String firstName, String lastName) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return String.format(\r\n            &quot;Customer[id=%s, firstName=&#39;%s&#39;, lastName=&#39;%s&#39;]&quot;,\r\n            id, firstName, lastName);\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Mongo Bulk Insert Spring","body":"<p>Here is a very small program that performs an Ordered bulkWrite using Spring.  You can change to unordered by changing the enum value on BulkOperations.BulkMode.  This program will insert 3 records, then delete one, then update one.  Because of the filter predicates in the later bulk commands I had to go with an ordered update.  If you are only inserting you could easily get away with a faster unordered bulk command.</p>\n<p><strong>Main.java</strong></p>\n<pre><code>package com.example.accessingdatamongodb;\n\nimport com.mongodb.bulk.BulkWriteResult;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.data.mongodb.core.BulkOperations;\nimport org.springframework.data.mongodb.core.MongoOperations;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.query.Update;\n\n@SpringBootApplication\npublic class Main implements CommandLineRunner {\n\n    @Autowired\n    private MongoOperations mongoTemplate;\n\n    public static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n\n        // CLEAR THE COLLECTION\n        mongoTemplate.remove(new Query(), Customer.class);\n\n        BulkOperations bulkOps = mongoTemplate.bulkOps(BulkOperations.BulkMode.ORDERED, Customer.class);\n\n        for (Integer i = 0; i &lt; 3; i++)\n        {\n            Customer customer = new Customer();\n            customer.firstName = &quot;Barry&quot;;\n            customer.id = i.toString();\n            bulkOps.insert(customer);\n        }\n\n        bulkOps.remove(new Query().addCriteria(new Criteria(&quot;i&quot;).is(1)));\n        bulkOps.updateOne(new Query().addCriteria(new Criteria(&quot;i&quot;).is(2)), new Update().set(&quot;name&quot;, &quot;Barry&quot;));\n\n        BulkWriteResult results = bulkOps.execute();\n    }\n}\n</code></pre>\n<p>For completeness here are the other files in the project...</p>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.data.mongodb.uri=mongodb://localhost:27017/springtestBulkWrite\nspring.data.mongodb.database=springtestBulkWrite\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;accessing-data-mongodb&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;accessing-data-mongodb&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n            &lt;version&gt;4.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-core&lt;/artifactId&gt;\n            &lt;version&gt;4.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;bson&lt;/artifactId&gt;\n            &lt;version&gt;4.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>SimpleMongoConfig.java</strong></p>\n<pre><code> import com.mongodb.client.MongoClient;\n import com.mongodb.ConnectionString;\n import com.mongodb.MongoClientSettings;\n import com.mongodb.client.MongoClients;\n import org.springframework.beans.factory.annotation.Value;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.Configuration;\n import org.springframework.data.mongodb.core.MongoTemplate;\n\n @Configuration\n public class SimpleMongoConfig {\n\n     @Value(&quot;${spring.data.mongodb.database}&quot;)\n     private String databaseName;\n\n     @Value(&quot;${spring.data.mongodb.uri}&quot;)\n     private String uri;\n\n     @Bean\n     public MongoClient mongo() {\n         ConnectionString connectionString = new ConnectionString(uri);\n         MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\n           .applyConnectionString(connectionString)\n           .build();\n        \n         return MongoClients.create(mongoClientSettings);\n     }\n\n     @Bean\n     public MongoTemplate mongoTemplate() throws Exception {\n         return new MongoTemplate(mongo(), databaseName);\n     }\n }\n</code></pre>\n<p><strong>CustomerRepository.java</strong> (not really used in this trivial example)</p>\n<pre><code>package com.example.accessingdatamongodb;\n\nimport java.util.List;\n\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\npublic interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {\n\n  public Customer findByFirstName(String firstName);\n  public List&lt;Customer&gt; findByLastName(String lastName);\n  public void deleteByLastName(String lastName);\n}\n</code></pre>\n<p><strong>Customer.java</strong></p>\n<pre><code>package com.example.accessingdatamongodb;\n\nimport org.springframework.data.annotation.Id;\n\n\npublic class Customer {\n\n  @Id\n  public String id;\n\n  public String firstName;\n  public String lastName;\n\n  public Customer() {}\n\n  public Customer(String firstName, String lastName) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n  }\n\n  @Override\n  public String toString() {\n    return String.format(\n        &quot;Customer[id=%s, firstName='%s', lastName='%s']&quot;,\n        id, firstName, lastName);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":24665421,"reputation":1,"user_id":18561159,"display_name":"Bryce Long"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2730,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694537875,"creation_date":1648066832,"question_id":71593554,"body_markdown":"I am working on understanding Mongo&#39;s bulk insert method. I want to insert records that have a unique index, and the duplicates simply get skipped over. I understand I will need an unorded bulk insert, but am having issues with the implementation. I already have logic that has been implemented with .saveAll by mapping through and building an object. I am failing to connect the dots on where to explicitly insert into the bulk operation. Can I not pass my object, or do I need map each key to data. In the examples I have read, they use small objects and specify each key.\r\n\r\n    List&lt;Employee&gt; employees =\r\n          people.getEmployees().stream()\r\n              .filter(criteria)\r\n              .map(\r\n                  e -&gt; {\r\n                    return PersonObject.builder()\r\n                        .firstName(person.getFirstName())\r\n                        .lastName(person.getLastName())\r\n                        .gender(person.getGender())\r\n                        .salary(employee.getSalary())\r\n                        .weight(person.getWeight())\r\n                        .height(person.getHeight())\r\n                        .school(Schools.SEC)\r\n                        .family(familyOrgins.getFamily())\r\n                        .hairColor(familyOrgins.getHairColor())\r\n                        .eyeColor(familyOrgins.getEyeColor())\r\n                        .city(city)\r\n                        .state(state)\r\n                        .country(country)\r\n                        .build();\r\n                  })\r\n              .collect(Collectors.toList());\r\n              result = employeesRepository.saveAll(employees);\r\n\r\nI have tried to inserting after the list of objects has been created like below:\r\n\r\n          .build();\r\n              })\r\n          .collect(Collectors.toList());\r\n          BulkWriteResult mongoResult = bulkWrite(itemLocations, false);`\r\n\r\nI want to insert using a bulk and if last name is the same, then skip over that person insertion.","title":"Mongo Bulk Insert Spring","body":"<p>I am working on understanding Mongo's bulk insert method. I want to insert records that have a unique index, and the duplicates simply get skipped over. I understand I will need an unorded bulk insert, but am having issues with the implementation. I already have logic that has been implemented with .saveAll by mapping through and building an object. I am failing to connect the dots on where to explicitly insert into the bulk operation. Can I not pass my object, or do I need map each key to data. In the examples I have read, they use small objects and specify each key.</p>\n<pre><code>List&lt;Employee&gt; employees =\n      people.getEmployees().stream()\n          .filter(criteria)\n          .map(\n              e -&gt; {\n                return PersonObject.builder()\n                    .firstName(person.getFirstName())\n                    .lastName(person.getLastName())\n                    .gender(person.getGender())\n                    .salary(employee.getSalary())\n                    .weight(person.getWeight())\n                    .height(person.getHeight())\n                    .school(Schools.SEC)\n                    .family(familyOrgins.getFamily())\n                    .hairColor(familyOrgins.getHairColor())\n                    .eyeColor(familyOrgins.getEyeColor())\n                    .city(city)\n                    .state(state)\n                    .country(country)\n                    .build();\n              })\n          .collect(Collectors.toList());\n          result = employeesRepository.saveAll(employees);\n</code></pre>\n<p>I have tried to inserting after the list of objects has been created like below:</p>\n<pre><code>      .build();\n          })\n      .collect(Collectors.toList());\n      BulkWriteResult mongoResult = bulkWrite(itemLocations, false);`\n</code></pre>\n<p>I want to insert using a bulk and if last name is the same, then skip over that person insertion.</p>\n"},{"tags":["java","android","kotlin","android-jetpack-compose"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1694536378,"post_id":77091022,"comment_id":135902868,"body_markdown":"What is the value of `locale`? I do not know about Kotlin, but since you asked for Java - it is returning MONDAY: https://i.stack.imgur.com/ylvOL.png (Java 21 and 22)","body":"What is the value of <code>locale</code>? I do not know about Kotlin, but since you asked for Java - it is returning MONDAY: <a href=\"https://i.stack.imgur.com/ylvOL.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/ylvOL.png</a> (Java 21 and 22)"},{"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"score":1,"creation_date":1694536427,"post_id":77091022,"comment_id":135902877,"body_markdown":"Well, the first thing to note is you don&#39;t have a fully reproducible example. Like, I don&#39;t see the packages for the classes you&#39;re using, but I can make some assumptions. Please resubmit a working example of the problem.\n\nThis question also has nothing to do with JeyPack, Kotlin or Android. Data/time/calendar are all core to the java packages. \n\nSince you&#39;re using `Calendar`, you need to see how it interprets first day of the week, and you may have to choose a different calendar - the default, I believe, is the `Gregorian` calendar, which makes sense for the Christian, western world","body":"Well, the first thing to note is you don&#39;t have a fully reproducible example. Like, I don&#39;t see the packages for the classes you&#39;re using, but I can make some assumptions. Please resubmit a working example of the problem.  This question also has nothing to do with JeyPack, Kotlin or Android. Data/time/calendar are all core to the java packages.   Since you&#39;re using <code>Calendar</code>, you need to see how it interprets first day of the week, and you may have to choose a different calendar - the default, I believe, is the <code>Gregorian</code> calendar, which makes sense for the Christian, western world"},{"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"score":0,"creation_date":1694536510,"post_id":77091022,"comment_id":135902892,"body_markdown":"for the record, here&#39;s [the gregorian calendar](https://en.wikipedia.org/wiki/Gregorian_calendar)","body":"for the record, here&#39;s <a href=\"https://en.wikipedia.org/wiki/Gregorian_calendar\" rel=\"nofollow noreferrer\">the gregorian calendar</a>"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694536546,"post_id":77091022,"comment_id":135902895,"body_markdown":"just tested with Java 17 - that is returning SUNDAY - seems like it was changed between 17 and 21 (that is, probably it was not intended to be Sunday)","body":"just tested with Java 17 - that is returning SUNDAY - seems like it was changed between 17 and 21 (that is, probably it was not intended to be Sunday)"},{"owner":{"account_id":10539153,"reputation":1073,"user_id":7765897,"display_name":"bilabila"},"score":0,"creation_date":1694537901,"post_id":77091022,"comment_id":135903171,"body_markdown":"@ChristianBongiorno repo added for reproduce","body":"@ChristianBongiorno repo added for reproduce"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694547194,"post_id":77091022,"comment_id":135904807,"body_markdown":"[This source](http://chartsbin.com/view/41671) lists Sunday as first day for China, Hong Kong, and Macao. [This one](https://savvytime.com/current-week/china) too.","body":"<a href=\"http://chartsbin.com/view/41671\" rel=\"nofollow noreferrer\">This source</a> lists Sunday as first day for China, Hong Kong, and Macao. <a href=\"https://savvytime.com/current-week/china\" rel=\"nofollow noreferrer\">This one</a> too."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694548255,"post_id":77091022,"comment_id":135905007,"body_markdown":"Java 12 [reports Sunday](https://ideone.com/wadtFY) for `Locale.CHINA`.","body":"Java 12 <a href=\"https://ideone.com/wadtFY\" rel=\"nofollow noreferrer\">reports Sunday</a> for <code>Locale.CHINA</code>."}],"owner":{"account_id":10539153,"reputation":1073,"user_id":7765897,"display_name":"bilabila"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694537872,"creation_date":1694535931,"question_id":77091022,"body_markdown":"I use following code to get locale sensitive `firstDayOfWeek` index, but when using Chinese lang, Sunday is still first. Same as English language. The code is adopted from jetpack compose `DatePicker`, and `DatePicker` also uses Sunday first for Chinese language.\r\n\r\n```kotlin\r\nclass WeekdayName(val locale:Locale) {\r\n\r\n    fun dayInISO8601(day: Int): Int {\r\n        val shiftedDay = (day + 6) % 7\r\n        return if (shiftedDay == 0) return /* Sunday */ 7 else shiftedDay\r\n    }\r\n\r\n    val firstDayOfWeek: Int =\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            WeekFields.of(locale).firstDayOfWeek.value\r\n        } else {\r\n            dayInISO8601(Calendar.getInstance(locale).firstDayOfWeek)\r\n        }\r\n}\r\n```\r\n\r\nIt&#39;s strange for Chinese users. As https://en.wikipedia.org/wiki/Week says\r\n\r\n&gt; Most of Europe and China consider Monday the first day of the week\r\n\r\nIs my code to get `firstDayOfWeek` right? Or is this intended?\r\n\r\nEdit: simple app code to reproduce https://github.com/tkkcc/WhyAndroidUseSundayFirstForChinese","title":"Why android/java choose sunday first weekdays for chinese language","body":"<p>I use following code to get locale sensitive <code>firstDayOfWeek</code> index, but when using Chinese lang, Sunday is still first. Same as English language. The code is adopted from jetpack compose <code>DatePicker</code>, and <code>DatePicker</code> also uses Sunday first for Chinese language.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class WeekdayName(val locale:Locale) {\n\n    fun dayInISO8601(day: Int): Int {\n        val shiftedDay = (day + 6) % 7\n        return if (shiftedDay == 0) return /* Sunday */ 7 else shiftedDay\n    }\n\n    val firstDayOfWeek: Int =\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            WeekFields.of(locale).firstDayOfWeek.value\n        } else {\n            dayInISO8601(Calendar.getInstance(locale).firstDayOfWeek)\n        }\n}\n</code></pre>\n<p>It's strange for Chinese users. As <a href=\"https://en.wikipedia.org/wiki/Week\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Week</a> says</p>\n<blockquote>\n<p>Most of Europe and China consider Monday the first day of the week</p>\n</blockquote>\n<p>Is my code to get <code>firstDayOfWeek</code> right? Or is this intended?</p>\n<p>Edit: simple app code to reproduce <a href=\"https://github.com/tkkcc/WhyAndroidUseSundayFirstForChinese\" rel=\"nofollow noreferrer\">https://github.com/tkkcc/WhyAndroidUseSundayFirstForChinese</a></p>\n"},{"tags":["java","android","flutter"],"comments":[{"owner":{"account_id":4084681,"reputation":121,"user_id":3354239,"display_name":"Datta"},"score":1,"creation_date":1662666251,"post_id":66934916,"comment_id":130065092,"body_markdown":"Did you get any solution?","body":"Did you get any solution?"}],"owner":{"account_id":18335946,"reputation":51,"user_id":13353337,"display_name":"muhammed kamal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":558,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1694537650,"creation_date":1617476862,"question_id":66934916,"body_markdown":"However I receive that error\r\n\r\n&gt; D/FlutterBluePlugin( 3903): Connecting to 74:DF:BF:9B:46:2E (id: 2)\r\n&gt; I/BluetoothAdapter( 3903): cancelDiscovery I/BluetoothAdapter( 3903):\r\n&gt; cancelDiscovery = false D/BluetoothUtils( 3903):\r\n&gt; isSocketAllowedBySecurityPolicy start : device null I/BluetoothSocket(\r\n&gt; 3903): connect() for device 74DFBF called by pid: 3903\r\n&gt; W/BluetoothAdapter( 3903): getBluetoothService() called with no\r\n&gt; BluetoothManagerCallback I/flutter ( 3903):\r\n&gt; PlatformException(connect_error, read failed, socket might closed or\r\n&gt; timeout, read ret: -1, java.io.IOException: read failed, socket might\r\n&gt; closed or timeout, read ret: -1 I/flutter ( 3903): \tat\r\n&gt; android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:970)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; android.bluetooth.BluetoothSocket.readInt(BluetoothSocket.java:984)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:536)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; io.github.edufolly.flutterbluetoothserial.BluetoothConnection.connect(BluetoothConnection.java:57)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; io.github.edufolly.flutterbluetoothserial.BluetoothConnection.connect(BluetoothConnection.java:64)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; io.github.edufolly.flutterbluetoothserial.FlutterBluetoothSerialPlugin.lambda$onMethodCall$0$FlutterBluetoothSerialPlugin(FlutterBluetoothSerialPlugin.java:880)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; io.github.edufolly.flutterbluetoothserial.-$$Lambda$FlutterBluetoothSerialPlugin$IghJwXXwUz_TFyaj49DgLpHhUY4.run(Unknown\r\n&gt; Source:10) I/flutter ( 3903): \tat\r\n&gt; android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305)\r\n&gt; I/flutter ( 3903): \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoo\r\n\r\nhere is my code for connection \r\n```\r\nFuture&lt;bool&gt; connect(String address) async {\r\n    BluetoothConnection _bluetoothConnection;\r\n    try {\r\n      _bluetoothConnection = await BluetoothConnection.toAddress(address);\r\n      return _bluetoothConnection.isConnected ? true : false;\r\n    } catch (e) {\r\n      print(e);\r\n    }\r\n  }\r\n```","title":"Can not connect to device using Flutter_bluetooth_serial package","body":"<p>However I receive that error</p>\n<blockquote>\n<p>D/FlutterBluePlugin( 3903): Connecting to 74:DF:BF:9B:46:2E (id: 2)\nI/BluetoothAdapter( 3903): cancelDiscovery I/BluetoothAdapter( 3903):\ncancelDiscovery = false D/BluetoothUtils( 3903):\nisSocketAllowedBySecurityPolicy start : device null I/BluetoothSocket(\n3903): connect() for device 74DFBF called by pid: 3903\nW/BluetoothAdapter( 3903): getBluetoothService() called with no\nBluetoothManagerCallback I/flutter ( 3903):\nPlatformException(connect_error, read failed, socket might closed or\ntimeout, read ret: -1, java.io.IOException: read failed, socket might\nclosed or timeout, read ret: -1 I/flutter ( 3903):    at\nandroid.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:970)\nI/flutter ( 3903):    at\nandroid.bluetooth.BluetoothSocket.readInt(BluetoothSocket.java:984)\nI/flutter ( 3903):    at\nandroid.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:536)\nI/flutter ( 3903):    at\nio.github.edufolly.flutterbluetoothserial.BluetoothConnection.connect(BluetoothConnection.java:57)\nI/flutter ( 3903):    at\nio.github.edufolly.flutterbluetoothserial.BluetoothConnection.connect(BluetoothConnection.java:64)\nI/flutter ( 3903):    at\nio.github.edufolly.flutterbluetoothserial.FlutterBluetoothSerialPlugin.lambda$onMethodCall$0$FlutterBluetoothSerialPlugin(FlutterBluetoothSerialPlugin.java:880)\nI/flutter ( 3903):    at\nio.github.edufolly.flutterbluetoothserial.-$$Lambda$FlutterBluetoothSerialPlugin$IghJwXXwUz_TFyaj49DgLpHhUY4.run(Unknown\nSource:10) I/flutter ( 3903):     at\nandroid.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305)\nI/flutter ( 3903):    at\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoo</p>\n</blockquote>\n<p>here is my code for connection</p>\n<pre><code>Future&lt;bool&gt; connect(String address) async {\n    BluetoothConnection _bluetoothConnection;\n    try {\n      _bluetoothConnection = await BluetoothConnection.toAddress(address);\n      return _bluetoothConnection.isConnected ? true : false;\n    } catch (e) {\n      print(e);\n    }\n  }\n</code></pre>\n"},{"tags":["java","android","kotlin","android-camera2","easyar"],"owner":{"account_id":24363814,"reputation":11,"user_id":18297819,"display_name":"pyroblinchik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694536827,"creation_date":1694536827,"question_id":77091127,"body_markdown":"I have AR Android App. I&#39;m using EasyAR library for some AR functionality and now I wanna add &quot;taking photo&quot; functionality. When user is using the AR camera, he can press a button to take a photo and save it to gallery. How can I do that?\r\n\r\nI tried to find this functionality in official EasyAR documentation and there&#39;s nothing about taking photos. Maybe I missed something, but I didn&#39;t find anything. And one more solution, that I tried is taking screenshot of camera preview. I know, that it&#39;s very bad solution, but I don&#39;t know what can I do in this case. So, this solution didn&#39;t work because when I take a screenshot the camera preview area is all black. I assume this is a deliberate limitation of Android due to security reasons. \r\n\r\nPlease help if you know way how to do this functionality. It doesnt matter how - by means of EasyAR or in some other way. I will be glad to any answers, thank you in advance for your help\r\n","title":"How can I take a photo using Camera from EasyAR library?","body":"<p>I have AR Android App. I'm using EasyAR library for some AR functionality and now I wanna add &quot;taking photo&quot; functionality. When user is using the AR camera, he can press a button to take a photo and save it to gallery. How can I do that?</p>\n<p>I tried to find this functionality in official EasyAR documentation and there's nothing about taking photos. Maybe I missed something, but I didn't find anything. And one more solution, that I tried is taking screenshot of camera preview. I know, that it's very bad solution, but I don't know what can I do in this case. So, this solution didn't work because when I take a screenshot the camera preview area is all black. I assume this is a deliberate limitation of Android due to security reasons.</p>\n<p>Please help if you know way how to do this functionality. It doesnt matter how - by means of EasyAR or in some other way. I will be glad to any answers, thank you in advance for your help</p>\n"},{"tags":["java","jhipster","telegram","telegram-bot","chatbot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1633541974,"post_id":69362275,"comment_id":122789673,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":16104222,"reputation":363,"user_id":11814361,"display_name":"Joel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653201926,"creation_date":1653201926,"answer_id":72335362,"question_id":69362275,"body_markdown":"There&#39;s a way to do it using pyrogram (a telegram client in python). Here&#39;s a GitHub link to the file.\r\nhttps://github.com/MarshalX/tgcalls/blob/main/pytgcalls/test.py \r\n\r\nYou just have to setup pyrogram, using the quickstart guide\r\nhttps://docs.pyrogram.org/intro/quickstart\r\n\r\nCreate an instance of the OutgoingCall class and pass in the pyrogram client and username as the parameter. This should make the phone ring. If you have further questions please feel free to ask in the comments.","title":"Make a phone call to a user without using a third party url - telegram chatbot","body":"<p>There's a way to do it using pyrogram (a telegram client in python). Here's a GitHub link to the file.\n<a href=\"https://github.com/MarshalX/tgcalls/blob/main/pytgcalls/test.py\" rel=\"nofollow noreferrer\">https://github.com/MarshalX/tgcalls/blob/main/pytgcalls/test.py</a></p>\n<p>You just have to setup pyrogram, using the quickstart guide\n<a href=\"https://docs.pyrogram.org/intro/quickstart\" rel=\"nofollow noreferrer\">https://docs.pyrogram.org/intro/quickstart</a></p>\n<p>Create an instance of the OutgoingCall class and pass in the pyrogram client and username as the parameter. This should make the phone ring. If you have further questions please feel free to ask in the comments.</p>\n"}],"owner":{"account_id":17060304,"reputation":84,"user_id":12343905,"display_name":"Federremu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72335362,"answer_count":1,"score":1,"last_activity_date":1694536796,"creation_date":1632834196,"question_id":69362275,"body_markdown":"I have a telegram chat bot implemented in java and jhipster with this API: [rubenlagus/TelegramBots][1]\r\n\r\nI want to add a functionality: **Make a phone call to a user without using [callMeBot][2] or similar. That is, making the call from code without using a third party url.** \r\n\r\nIs there any way to do it?\r\n\r\nIt is not necessary for a message to be transmitted, it is enough for the phone to ring. The call can be through telegram or not. **The important thing is that the cell phone rings.**\r\n\r\n\r\n  [1]: https://github.com/rubenlagus/TelegramBots\r\n  [2]: https://ifttt.com/callmebot","title":"Make a phone call to a user without using a third party url - telegram chatbot","body":"<p>I have a telegram chat bot implemented in java and jhipster with this API: <a href=\"https://github.com/rubenlagus/TelegramBots\" rel=\"nofollow noreferrer\">rubenlagus/TelegramBots</a></p>\n<p>I want to add a functionality: <strong>Make a phone call to a user without using <a href=\"https://ifttt.com/callmebot\" rel=\"nofollow noreferrer\">callMeBot</a> or similar. That is, making the call from code without using a third party url.</strong></p>\n<p>Is there any way to do it?</p>\n<p>It is not necessary for a message to be transmitted, it is enough for the phone to ring. The call can be through telegram or not. <strong>The important thing is that the cell phone rings.</strong></p>\n"},{"tags":["java","loops","selenium-webdriver","automation","ui-automation"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1694518451,"post_id":77086748,"comment_id":135898523,"body_markdown":"Can you edit your question and share the code what you have tried so far? Also share the HTML of the table.","body":"Can you edit your question and share the code what you have tried so far? Also share the HTML of the table."},{"owner":{"account_id":10025964,"reputation":37,"user_id":7414127,"display_name":"titli0216"},"score":0,"creation_date":1694536785,"post_id":77086748,"comment_id":135902954,"body_markdown":"@Shwan I am unable to break from the for loop that I used for &quot;rows&quot;. I want to break from the for loop I am using for rows once the data is found.","body":"@Shwan I am unable to break from the for loop that I used for &quot;rows&quot;. I want to break from the for loop I am using for rows once the data is found."}],"owner":{"account_id":10025964,"reputation":37,"user_id":7414127,"display_name":"titli0216"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694536701,"creation_date":1694502281,"question_id":77086748,"body_markdown":"Suppose I have the below table:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/znEeG.png\r\n\r\nuse case: If the Part1 is present in the Col2 of the first row then verify the value of the col3 in the first row is Release. Similarly, if the Part2 is present in the Col2 of the second row then verify the value of the col3 in the second row is Release.\r\n\r\nHow can I achieve this using selenium java?\r\n\r\nPlease find the code below which I tried:\r\n\r\npublic boolean verifyPartsinEBOM(String partName, String partState) {\r\n\t\t\r\n\t\tboolean result = true;\r\n\t\t//To locate the table in the EBOM page.\r\n\t\tWebElement mytable = driver.findElement(By.id(&quot;tbr&quot;));\r\n\t\t\r\n    \t//To locate rows of table. \r\n    \tList &lt; WebElement &gt; rows_table = mytable.findElements(By.tagName(&quot;tr&quot;));\r\n    \t\r\n    \t//To calculate no of rows In table.\r\n    \tint rows_count = rows_table.size();\r\n    \t\r\n    \t//Loop will execute till the last row of table.\r\n    \tfor (int row = 0; row &lt; rows_count; row++) {\r\n    \t\t\r\n    \t    //To locate columns(cells) of that specific row.\r\n    \t    List &lt; WebElement &gt; columns_row = rows_table.get(row).findElements(By.tagName(&quot;td&quot;));\r\n    \t    \r\n    \t    //To calculate no of columns (cells). In that specific row.\r\n    \t    int columns_count = columns_row.size();\r\n    \t    System.out.println(&quot;Number of cells In Row &quot; + row + &quot; are &quot; + columns_count);\r\n    \t    \r\n    \t    //Loop will execute till the last cell of that specific row.\r\n    \t    for (int column = 0; column &lt; columns_count; column++) {\r\n    \t    \t\r\n    \t        // To retrieve text from that specific cell.\r\n    \t        String celtext = columns_row.get(column).getText();\r\n    \t        if(celtext.contains(partName)) {\r\n    \t        \tWebElement state = driver.findElement(By.xpath(&quot;.//*[@id=&#39;tbr&#39;]/tbody/tr[&quot;+Integer.toString(row+1)+&quot;]/td[&quot;+Integer.toString(column+3)+&quot;]&quot;));\r\n    \t        \tString pState = state.getText();\r\n    \t        \tif(pState.contains(partState)) {\r\n    \t        \tresult = true;\r\n    \t        \tbreak;\r\n    \t        \t}\r\n    \t        \telse {\r\n    \t        \t\tresult = false;\r\n    \t        \t}\r\n    \t        \t\r\n    \t        \tbreak;\r\n    \t        }\r\n    \t        \r\n    \t        else {\r\n    \t        \tresult = false;\r\n    \t        }    \t        \r\n    \t    }     \t   \r\n    \t}\t\t\r\n\t\t\r\n\t\treturn result;\t\t\r\n\t}\t\r\n\t}","title":"How to verify a column value in selenium java and based on that value present or not need to verify the another column value","body":"<p>Suppose I have the below table:</p>\n<p><a href=\"https://i.stack.imgur.com/znEeG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/znEeG.png\" alt=\"enter image description here\" /></a></p>\n<p>use case: If the Part1 is present in the Col2 of the first row then verify the value of the col3 in the first row is Release. Similarly, if the Part2 is present in the Col2 of the second row then verify the value of the col3 in the second row is Release.</p>\n<p>How can I achieve this using selenium java?</p>\n<p>Please find the code below which I tried:</p>\n<p>public boolean verifyPartsinEBOM(String partName, String partState) {</p>\n<pre><code>    boolean result = true;\n    //To locate the table in the EBOM page.\n    WebElement mytable = driver.findElement(By.id(&quot;tbr&quot;));\n    \n    //To locate rows of table. \n    List &lt; WebElement &gt; rows_table = mytable.findElements(By.tagName(&quot;tr&quot;));\n    \n    //To calculate no of rows In table.\n    int rows_count = rows_table.size();\n    \n    //Loop will execute till the last row of table.\n    for (int row = 0; row &lt; rows_count; row++) {\n        \n        //To locate columns(cells) of that specific row.\n        List &lt; WebElement &gt; columns_row = rows_table.get(row).findElements(By.tagName(&quot;td&quot;));\n        \n        //To calculate no of columns (cells). In that specific row.\n        int columns_count = columns_row.size();\n        System.out.println(&quot;Number of cells In Row &quot; + row + &quot; are &quot; + columns_count);\n        \n        //Loop will execute till the last cell of that specific row.\n        for (int column = 0; column &lt; columns_count; column++) {\n            \n            // To retrieve text from that specific cell.\n            String celtext = columns_row.get(column).getText();\n            if(celtext.contains(partName)) {\n                WebElement state = driver.findElement(By.xpath(&quot;.//*[@id='tbr']/tbody/tr[&quot;+Integer.toString(row+1)+&quot;]/td[&quot;+Integer.toString(column+3)+&quot;]&quot;));\n                String pState = state.getText();\n                if(pState.contains(partState)) {\n                result = true;\n                break;\n                }\n                else {\n                    result = false;\n                }\n                \n                break;\n            }\n            \n            else {\n                result = false;\n            }               \n        }          \n    }       \n    \n    return result;      \n}   \n}\n</code></pre>\n"},{"tags":["java","arrays","for-loop","inheritance","constructor"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":3,"creation_date":1694537160,"post_id":77091114,"comment_id":135903021,"body_markdown":"are you asking for something like `obj[0] = new ClassA1(); obj[1] = new ClassA2(); ...` ?","body":"are you asking for something like <code>obj[0] = new ClassA1(); obj[1] = new ClassA2(); ...</code> ?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694537200,"post_id":77091114,"comment_id":135903029,"body_markdown":"So you want an array with 1 instance of each class calling the *no-args constructor*?","body":"So you want an array with 1 instance of each class calling the <i>no-args constructor</i>?"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1694539409,"post_id":77091114,"comment_id":135903419,"body_markdown":"A derived class can take the place of the parent class, so as @user85421 suggests, you simply create an instance of the child class and place it into the array. It&#39;ll call all of the parent constructors because of the `super()` calls. Leave the type of the array as `Base`. This is a fundamental concept in Object Oriented Programming known as **Polymorphism**.","body":"A derived class can take the place of the parent class, so as @user85421 suggests, you simply create an instance of the child class and place it into the array. It&#39;ll call all of the parent constructors because of the <code>super()</code> calls. Leave the type of the array as <code>Base</code>. This is a fundamental concept in Object Oriented Programming known as <b>Polymorphism</b>."},{"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"score":0,"creation_date":1694540647,"post_id":77091114,"comment_id":135903653,"body_markdown":"@user85421 and Idle_Mind thank you both so much :&#39;| \n\nYes. that&#39;s exactly what I was trying to do.  I tried doing something very similar but it didn&#39;t work so I gave up on that entirely.","body":"@user85421 and Idle_Mind thank you both so much :&#39;|   Yes. that&#39;s exactly what I was trying to do.  I tried doing something very similar but it didn&#39;t work so I gave up on that entirely."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694549267,"post_id":77091114,"comment_id":135905181,"body_markdown":"@TakeshiDBXV, can you provide more information about the data and its usage?  Try a database, _[SQLite](https://www.sqlite.org/index.html)_ is easy to use.","body":"@TakeshiDBXV, can you provide more information about the data and its usage?  Try a database, <i><a href=\"https://www.sqlite.org/index.html\" rel=\"nofollow noreferrer\">SQLite</a></i> is easy to use."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694585014,"post_id":77091114,"comment_id":135908738,"body_markdown":"based on posted code, maybe your data model can be improved. For example, `ClassA1` and `ClassA2` seems to be just data holder, there is no different functionality. In that case, the next step would be doing `obj[0] = new ClassA(2015, &quot;Bethesda&quot;, &quot;Fallout 4&quot;, 1, true, 30.0);`  (and not have a `ClassA1`). Further, if these are *constant*, the use of `enum` can be recommended. The use of a database,  as suggested in previous comment, should also be considered (depending on usage, details)","body":"based on posted code, maybe your data model can be improved. For example, <code>ClassA1</code> and <code>ClassA2</code> seems to be just data holder, there is no different functionality. In that case, the next step would be doing <code>obj[0] = new ClassA(2015, &quot;Bethesda&quot;, &quot;Fallout 4&quot;, 1, true, 30.0);</code>  (and not have a <code>ClassA1</code>). Further, if these are <i>constant</i>, the use of <code>enum</code> can be recommended. The use of a database,  as suggested in previous comment, should also be considered (depending on usage, details)"}],"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694536699,"creation_date":1694536699,"question_id":77091114,"body_markdown":"From my base class, I &#39;m trying to call two class constructors from two derived classes **each**. \r\n\r\nI have two derived classes; I&#39;ll call them ClassA and ClassB. Both ClassA and ClassB have two derived classes of their own. I&#39;ll call them ClassA1, ClassA2, ClassB1, and ClassB2. These 4 classes have a constructor, but they both have different lengths.\r\n\r\nThe idea is to use an array and a for-loop to call each constructor. This is what I have so far:\r\n\r\n```\r\npublic class Base {\r\n\r\n    int year;\r\n    String brand;\r\n    String name;\r\n    \r\n    Base(){\r\n        year = 0;\r\n        brand = &quot;Default&quot;;\r\n        name = &quot;Default&quot;;\r\n    }\r\n    \r\n    Base(int year, String brand, String name){\r\n        this.year = year;\r\n        this.brand = brand;\r\n        this.name = name;\r\n    }\r\n    void display(){\r\n        System.out.println(&quot;Year: &quot; + year + &quot;\\nBrand: &quot; + brand\r\n        + &quot;\\nName: &quot; + name);\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n          \r\n        Base obj[] = new Base[4];\r\n        obj[0] = new Base(); //I&#39;m not sure what to do here\r\n        obj[1] = new Base();\r\n        obj[2] = new Base();\r\n        obj[3] = new Base();\r\n        \r\n        for (int i=0; i &lt; obj.length; i++) {\r\n            obj[i] = new Base();\r\n        }\r\n    }\r\n}\r\n\r\npublic class ClassA extends Base {\r\n    int playerCount;\r\n    boolean hasMods;\r\n    double fileSize;\r\n\r\n    \r\n    ClassA(){\r\n        playerCount = 0;\r\n        hasMods = false;\r\n        fileSize = 0;\r\n    }\r\n    \r\n    ClassA(int year, String brand, String name, int playerCount,\r\n            boolean hasMods, double fileSize){\r\n        super(year, brand, name);\r\n        this.playerCount = playerCount;\r\n        this.hasMods = hasMods;\r\n        this.fileSize = fileSize;\r\n    }\r\n    \r\n    void display(){\r\n        super.display();\r\n        System.out.println(&quot;Max Number of Players: &quot; + playerCount\r\n        + &quot;\\nModding Capability?: &quot; + hasMods\r\n        + &quot;\\nStorage: &quot; + fileSize + &quot; gb&quot;);\r\n    }\r\n}\r\n\r\nclass ClassA1 extends ClassA{\r\n    ClassA1(){\r\n        super(2015, &quot;Bethesda&quot;, &quot;Fallout 4&quot;, 1, true, 30.0);\r\n    }\r\n}\r\n\r\nclass ClassA2 extends ClassA{\r\n    ClassA2(){\r\n        super(2007, &quot;Bungie&quot;, &quot;Halo 3&quot;, 4, false, 6.3);\r\n    }\r\n}\r\n```\r\n\r\nEven with that array, it doesn&#39;t make much sense to me. If the array is from Base, I don&#39;t think it would call anything lower than it. If the array is ClassA, it still wouldn&#39;t get the specific classes. If it&#39;s ClassA1, then all the other classes cannot be called. And the array cannot be a string either obviously.\r\n\r\nI&#39;d imagine it to work like this: Array[x] value = new Array[x]();. The thing is, I&#39;m not sure if that would even work, or how to do that.\r\n\r\nIf I can just see how it would work with one of the two classes, I believe I can figure it out with the other.","title":"How to call two constructors from two derived classes from the base class in a for-loop?","body":"<p>From my base class, I 'm trying to call two class constructors from two derived classes <strong>each</strong>.</p>\n<p>I have two derived classes; I'll call them ClassA and ClassB. Both ClassA and ClassB have two derived classes of their own. I'll call them ClassA1, ClassA2, ClassB1, and ClassB2. These 4 classes have a constructor, but they both have different lengths.</p>\n<p>The idea is to use an array and a for-loop to call each constructor. This is what I have so far:</p>\n<pre><code>public class Base {\n\n    int year;\n    String brand;\n    String name;\n    \n    Base(){\n        year = 0;\n        brand = &quot;Default&quot;;\n        name = &quot;Default&quot;;\n    }\n    \n    Base(int year, String brand, String name){\n        this.year = year;\n        this.brand = brand;\n        this.name = name;\n    }\n    void display(){\n        System.out.println(&quot;Year: &quot; + year + &quot;\\nBrand: &quot; + brand\n        + &quot;\\nName: &quot; + name);\n    }\n    \n    public static void main(String[] args) {\n          \n        Base obj[] = new Base[4];\n        obj[0] = new Base(); //I'm not sure what to do here\n        obj[1] = new Base();\n        obj[2] = new Base();\n        obj[3] = new Base();\n        \n        for (int i=0; i &lt; obj.length; i++) {\n            obj[i] = new Base();\n        }\n    }\n}\n\npublic class ClassA extends Base {\n    int playerCount;\n    boolean hasMods;\n    double fileSize;\n\n    \n    ClassA(){\n        playerCount = 0;\n        hasMods = false;\n        fileSize = 0;\n    }\n    \n    ClassA(int year, String brand, String name, int playerCount,\n            boolean hasMods, double fileSize){\n        super(year, brand, name);\n        this.playerCount = playerCount;\n        this.hasMods = hasMods;\n        this.fileSize = fileSize;\n    }\n    \n    void display(){\n        super.display();\n        System.out.println(&quot;Max Number of Players: &quot; + playerCount\n        + &quot;\\nModding Capability?: &quot; + hasMods\n        + &quot;\\nStorage: &quot; + fileSize + &quot; gb&quot;);\n    }\n}\n\nclass ClassA1 extends ClassA{\n    ClassA1(){\n        super(2015, &quot;Bethesda&quot;, &quot;Fallout 4&quot;, 1, true, 30.0);\n    }\n}\n\nclass ClassA2 extends ClassA{\n    ClassA2(){\n        super(2007, &quot;Bungie&quot;, &quot;Halo 3&quot;, 4, false, 6.3);\n    }\n}\n</code></pre>\n<p>Even with that array, it doesn't make much sense to me. If the array is from Base, I don't think it would call anything lower than it. If the array is ClassA, it still wouldn't get the specific classes. If it's ClassA1, then all the other classes cannot be called. And the array cannot be a string either obviously.</p>\n<p>I'd imagine it to work like this: Array[x] value = new Arrayx;. The thing is, I'm not sure if that would even work, or how to do that.</p>\n<p>If I can just see how it would work with one of the two classes, I believe I can figure it out with the other.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1694527920,"post_id":77089019,"comment_id":135900873,"body_markdown":"seems like you are missing the `@Transaction` annotation on your service method where you are dealing with repository actions. since the fetch type is set to lazy, session needs to be open in order for ORM to be aware of the other entities you are trying to access","body":"seems like you are missing the <code>@Transaction</code> annotation on your service method where you are dealing with repository actions. since the fetch type is set to lazy, session needs to be open in order for ORM to be aware of the other entities you are trying to access"},{"owner":{"account_id":6375533,"reputation":94,"user_id":4946616,"display_name":"aedemirsen"},"score":0,"creation_date":1694532481,"post_id":77089019,"comment_id":135902000,"body_markdown":"thank you Goran, I add `@Transactional` annotation to service method and it is solved. But I have a question, why the first time saving company data is not generate problem? When I save company, interests are also saved to database at once.","body":"thank you Goran, I add <code>@Transactional</code> annotation to service method and it is solved. But I have a question, why the first time saving company data is not generate problem? When I save company, interests are also saved to database at once."},{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1694535574,"post_id":77089019,"comment_id":135902697,"body_markdown":"they are saved successfully because you have set a Cascade type on the parent entity and so it will &#39;cascade&#39; that action to all child entities. you are not fetching anything at that moment, so there is no error - I will post this and above comment as answers for future readers - so you can mark it for visibility","body":"they are saved successfully because you have set a Cascade type on the parent entity and so it will &#39;cascade&#39; that action to all child entities. you are not fetching anything at that moment, so there is no error - I will post this and above comment as answers for future readers - so you can mark it for visibility"}],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694531739,"creation_date":1694531739,"answer_id":77090509,"question_id":77089019,"body_markdown":"By calling persist (or Spring&#39;s save) on a new Company which references existing Interest instances, because of the cascade persist option being used, your are essentially calling persist on those Interest instances. JPA does not allow calling persist on a detached (existing) entity, and requires providers to throw an exception indicating there is a problem. \r\n\r\nYou need to determine what you want to do with the data in the Interest instances. \r\n\r\n 1. If you want the data to be merged into the database, you should probably use the CascadeType.MERGE type on the relationship, and then switch to using a direct EntityManager.merge on the company instance. JPA will still insert the Company instance, but cascade the merge operation, so find that your Interest instances exist and merge the data into the database.\r\n 2. If you don&#39;t want what could be stale Interest data to overwrite what is in the database and are just looking to set the database relationship, don&#39;t use cascadeType.Persist. JPA won&#39;t persist Interest instances, and will only use the identity within those instances to set the relationship in the DB. \r\n\r\nNote though that you may want different semantics depending on what your application might be sending for Insterest data. Best practice (for me anyway) is to inspect the relationships per use case and handle instances directly. In some cases, this might mean iterating over the Interest data passed in through a Company, calling persist if required (if there is no ID), or reading them in and selectively merging partial values from the passed in copy to the managed instance, then setting the managed instance in the Company to be saved.","title":"Hibernate - ManyToMany detached entity passed to persist","body":"<p>By calling persist (or Spring's save) on a new Company which references existing Interest instances, because of the cascade persist option being used, your are essentially calling persist on those Interest instances. JPA does not allow calling persist on a detached (existing) entity, and requires providers to throw an exception indicating there is a problem.</p>\n<p>You need to determine what you want to do with the data in the Interest instances.</p>\n<ol>\n<li>If you want the data to be merged into the database, you should probably use the CascadeType.MERGE type on the relationship, and then switch to using a direct EntityManager.merge on the company instance. JPA will still insert the Company instance, but cascade the merge operation, so find that your Interest instances exist and merge the data into the database.</li>\n<li>If you don't want what could be stale Interest data to overwrite what is in the database and are just looking to set the database relationship, don't use cascadeType.Persist. JPA won't persist Interest instances, and will only use the identity within those instances to set the relationship in the DB.</li>\n</ol>\n<p>Note though that you may want different semantics depending on what your application might be sending for Insterest data. Best practice (for me anyway) is to inspect the relationships per use case and handle instances directly. In some cases, this might mean iterating over the Interest data passed in through a Company, calling persist if required (if there is no ID), or reading them in and selectively merging partial values from the passed in copy to the managed instance, then setting the managed instance in the Company to be saved.</p>\n"},{"tags":[],"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694535706,"creation_date":1694535706,"answer_id":77090998,"question_id":77089019,"body_markdown":"Seems like you are missing the `@Transactional` annotation on your service method where you are dealing with repository actions. since the fetch type is set to lazy, session needs to be open in order for ORM to be aware of the other entities you are trying to access.\r\n\r\nAll Entities are saved successfully because you have set a Cascade type on the parent entity and so it will &#39;cascade&#39; that action to all child entities. You are not fetching anything at that moment, so there is no error you are experiencing afterwards.","title":"Hibernate - ManyToMany detached entity passed to persist","body":"<p>Seems like you are missing the <code>@Transactional</code> annotation on your service method where you are dealing with repository actions. since the fetch type is set to lazy, session needs to be open in order for ORM to be aware of the other entities you are trying to access.</p>\n<p>All Entities are saved successfully because you have set a Cascade type on the parent entity and so it will 'cascade' that action to all child entities. You are not fetching anything at that moment, so there is no error you are experiencing afterwards.</p>\n"}],"owner":{"account_id":6375533,"reputation":94,"user_id":4946616,"display_name":"aedemirsen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77090998,"answer_count":2,"score":-1,"last_activity_date":1694535706,"creation_date":1694520967,"question_id":77089019,"body_markdown":"I have a springboot project and I use postgresql and hibernate. \r\n\r\nI have several entities, 2 of them are below:\r\n\r\nCompany Entity:\r\n\r\n    @Entity\r\n    @Table\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @SuperBuilder\r\n    @Getter\r\n    @Setter\r\n    public class Company extends BaseDatedEntity {\r\n\r\n       ....... fields\r\n\r\n       @ManyToMany(\r\n            fetch = FetchType.LAZY,\r\n            cascade = {CascadeType.PERSIST}\r\n       )\r\n       @JoinTable(\r\n            name = &quot;company_interest&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;company_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;interest_id&quot;)}\r\n       )\r\n       private List&lt;Interest&gt; interests = new ArrayList&lt;&gt;();\r\n\r\n    }\r\n\r\nInterest Entity:\r\n\r\n``` \r\n@Entity\r\n@Table\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SuperBuilder\r\n@Getter\r\n@Setter\r\npublic class Interest extends BaseDatedEntity {\r\n    @Column(unique = true)\r\n    private String name;\r\n\r\n    public boolean equals(Interest interest){\r\n        return this.name.equals(interest.getName());\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen I post a new company, it also persists interest. This is wanted and expected result. And if I delete the specified company with delete request, my company information is removed from database along with the relations in company_interest join table. In Interest table, interest records are still there, because these are not related with the company itself. This is also expected and ok. \r\n\r\nBut when I add a new company again with the interest which is already recorded in the database, I get **detached entity passed to persist** exception. \r\n\r\n1- I want to add company even if its interest is already in database, just connect it in join table.\r\n\r\n2- If the interest is not in the db, then persist it in the Interest table. \r\n\r\nWhole exception log:\r\n\r\n```14:44:50.427 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.aedesium.domain.entity.company.Interest; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.aedesium.domain.entity.company.Interest]```\r\n\r\n\r\nI believe this has a simple solution. But I could not figure it out. \r\n\r\nThanks already.","title":"Hibernate - ManyToMany detached entity passed to persist","body":"<p>I have a springboot project and I use postgresql and hibernate.</p>\n<p>I have several entities, 2 of them are below:</p>\n<p>Company Entity:</p>\n<pre><code>@Entity\n@Table\n@AllArgsConstructor\n@NoArgsConstructor\n@SuperBuilder\n@Getter\n@Setter\npublic class Company extends BaseDatedEntity {\n\n   ....... fields\n\n   @ManyToMany(\n        fetch = FetchType.LAZY,\n        cascade = {CascadeType.PERSIST}\n   )\n   @JoinTable(\n        name = &quot;company_interest&quot;,\n        joinColumns = {@JoinColumn(name = &quot;company_id&quot;)},\n        inverseJoinColumns = {@JoinColumn(name = &quot;interest_id&quot;)}\n   )\n   private List&lt;Interest&gt; interests = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>Interest Entity:</p>\n<pre><code>@Entity\n@Table\n@AllArgsConstructor\n@NoArgsConstructor\n@SuperBuilder\n@Getter\n@Setter\npublic class Interest extends BaseDatedEntity {\n    @Column(unique = true)\n    private String name;\n\n    public boolean equals(Interest interest){\n        return this.name.equals(interest.getName());\n    }\n}\n\n</code></pre>\n<p>When I post a new company, it also persists interest. This is wanted and expected result. And if I delete the specified company with delete request, my company information is removed from database along with the relations in company_interest join table. In Interest table, interest records are still there, because these are not related with the company itself. This is also expected and ok.</p>\n<p>But when I add a new company again with the interest which is already recorded in the database, I get <strong>detached entity passed to persist</strong> exception.</p>\n<p>1- I want to add company even if its interest is already in database, just connect it in join table.</p>\n<p>2- If the interest is not in the db, then persist it in the Interest table.</p>\n<p>Whole exception log:</p>\n<p><code>14:44:50.427 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.aedesium.domain.entity.company.Interest; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.aedesium.domain.entity.company.Interest]</code></p>\n<p>I believe this has a simple solution. But I could not figure it out.</p>\n<p>Thanks already.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1694535277,"post_id":77090935,"comment_id":135902633,"body_markdown":"Hello and welcome. Please don&#39;t tag unrelated languages.","body":"Hello and welcome. Please don&#39;t tag unrelated languages."},{"owner":{"account_id":1640947,"reputation":28880,"user_id":1513384,"accept_rate":96,"display_name":"ntalbs"},"score":2,"creation_date":1694535560,"post_id":77090935,"comment_id":135902692,"body_markdown":"`temp` is a local variable, which will reside in the current stack frame. Each stack frame holds it&#39;s local variables.","body":"<code>temp</code> is a local variable, which will reside in the current stack frame. Each stack frame holds it&#39;s local variables."}],"owner":{"account_id":29406800,"reputation":1,"user_id":22531673,"display_name":"Dishank Gawas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694535628,"creation_date":1694535198,"question_id":77090935,"body_markdown":"    import java.util.*;\r\n    //To push an element at the bottom of a stack\r\n    public class StackProblem1 {\r\n        public static void pushAtBottom(Stack&lt;Integer&gt; s, int data) {\r\n            if(s.isEmpty()) {\r\n                s.push(data);\r\n                return;\r\n            }\r\n            int temp = s.pop();\r\n            pushAtBottom(s, data);\r\n            s.push(temp);\r\n        }\r\n\r\n        public static void main(String args[]) {\r\n            Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();\r\n            stack.push(1);\r\n            stack.push(2);\r\n            stack.push(3);\r\n            pushAtBottom(stack, 4);\r\n\r\n            while(!stack.isEmpty()) {\r\n                System.out.println(stack.pop());\r\n            }\r\n        }\r\n    }\r\n\r\nI have a doubt about the `pushAtBottom` method. `pushAtBottom` is being recursively called inside the method so all the elements will be popped out until stack is empty and new data will be added but when you call the function recursively the temp values are been stored separately like for 1 separately and for 2 and 3 wont it get override and when you call the method recursively how temp variable will be stored.... will it first empty the whole stack and after adding new data it will add temp values or it will do one by one like shifting the new value and adding temp values?\r\n\r\nI&#39;m beginner i have understood the concept a little bit but I want to know in depth so I can get more clarification\r\n\r\n\r\n\r\n","title":"vaStacks in java about PushAtBottom Method();","body":"<pre><code>import java.util.*;\n//To push an element at the bottom of a stack\npublic class StackProblem1 {\n    public static void pushAtBottom(Stack&lt;Integer&gt; s, int data) {\n        if(s.isEmpty()) {\n            s.push(data);\n            return;\n        }\n        int temp = s.pop();\n        pushAtBottom(s, data);\n        s.push(temp);\n    }\n\n    public static void main(String args[]) {\n        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();\n        stack.push(1);\n        stack.push(2);\n        stack.push(3);\n        pushAtBottom(stack, 4);\n\n        while(!stack.isEmpty()) {\n            System.out.println(stack.pop());\n        }\n    }\n}\n</code></pre>\n<p>I have a doubt about the <code>pushAtBottom</code> method. <code>pushAtBottom</code> is being recursively called inside the method so all the elements will be popped out until stack is empty and new data will be added but when you call the function recursively the temp values are been stored separately like for 1 separately and for 2 and 3 wont it get override and when you call the method recursively how temp variable will be stored.... will it first empty the whole stack and after adding new data it will add temp values or it will do one by one like shifting the new value and adding temp values?</p>\n<p>I'm beginner i have understood the concept a little bit but I want to know in depth so I can get more clarification</p>\n"},{"tags":["java","javadoc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694510476,"post_id":77087638,"comment_id":135896830,"body_markdown":"What do you mean with *especially non-nesting ones*?","body":"What do you mean with <i>especially non-nesting ones</i>?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694511022,"post_id":77087638,"comment_id":135896933,"body_markdown":"If you don&#39;t like block comments, then find a documentation tool *other than javadoc* that allows you to generate documentation pages from single line comments. I don&#39;t know if that exists for Java...","body":"If you don&#39;t like block comments, then find a documentation tool <i>other than javadoc</i> that allows you to generate documentation pages from single line comments. I don&#39;t know if that exists for Java..."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694511243,"post_id":77087638,"comment_id":135896986,"body_markdown":"... if not, you can write your own","body":"... if not, you can write your own"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1694513397,"post_id":77087638,"comment_id":135897465,"body_markdown":"You can&#39;t, and contrary to the suggestions by the previous comments, you should not try to use something else or roll your own. Javadoc is **the** standard for writing documentation of Java classes. Using something is only bound to make your code/project less accessible and confusing for other Java programmers coming on.","body":"You can&#39;t, and contrary to the suggestions by the previous comments, you should not try to use something else or roll your own. Javadoc is <b>the</b> standard for writing documentation of Java classes. Using something is only bound to make your code/project less accessible and confusing for other Java programmers coming on."},{"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"score":0,"creation_date":1694527828,"post_id":77087638,"comment_id":135900848,"body_markdown":"@Jens `/* */` in Java, C, C++ and some other languages dont nest (i.e. `/* a /* b */ c */` is not a comment, but there are block comment syntaxes in some languages that do nest. Those arent as horrible. You cant use non-nesting block comments to comment out a bunch of code if that code happens to contain such a block comment.","body":"@Jens <code>&#47;* *&#47;</code> in Java, C, C++ and some other languages dont nest (i.e. <code>&#47;* a &#47;* b *&#47; c *&#47;</code> is not a comment, but there are block comment syntaxes in some languages that do nest. Those arent as horrible. You cant use non-nesting block comments to comment out a bunch of code if that code happens to contain such a block comment."}],"answers":[{"tags":[],"owner":{"account_id":10049341,"reputation":816,"user_id":7429624,"display_name":"Aman Saurav"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694535472,"creation_date":1694510032,"answer_id":77087678,"question_id":77087638,"body_markdown":"No, Javadoc is created by following a particular semantics and that is why the [*javadoc*][1] tool doesn&#39;t detect the `//` comments, rather it works with `/** */`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/javadoc.html","title":"How to make JavaDoc work with line comments?","body":"<p>No, Javadoc is created by following a particular semantics and that is why the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/javadoc.html\" rel=\"nofollow noreferrer\"><em>javadoc</em></a> tool doesn't detect the <code>//</code> comments, rather it works with <code>/** */</code>.</p>\n"}],"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77087678,"answer_count":1,"score":-1,"last_activity_date":1694535472,"creation_date":1694509735,"question_id":77087638,"body_markdown":"Can JavaDoc be configured so that it works on `/// ` comments instead of `/**  */`?\r\n\r\nI really dont like block comments (especially non-nesting ones) and Id rather jump through 100 hoops and hurdles than to just use them.","title":"How to make JavaDoc work with line comments?","body":"<p>Can JavaDoc be configured so that it works on <code>/// </code> comments instead of <code>/**  */</code>?</p>\n<p>I really dont like block comments (especially non-nesting ones) and Id rather jump through 100 hoops and hurdles than to just use them.</p>\n"},{"tags":["java","algorithm"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694512897,"creation_date":1694512897,"answer_id":77088064,"question_id":77085260,"body_markdown":"&gt; My code is working correctly only when input string length is of size 2 or 3.\r\n\r\nIt doesn&#39;t actually work for some inputs with size 3. The reason is that your code never modifies the characters in the result other than at the first and last index. So the character at index 1 (for when the input has size 3) is never modified after its initialisation to &#39;b&#39;. So for the example inputs with size 3 it is just luck that it works, but as soon as the expected output has another letter than &#39;b&#39; at index 1, your solution does not work for size 3 either.\r\n\r\nThe key insight here, is that the optimal character at index `i` is the **median** of all characters found at that index, and at the mirrored index (so counting backwards from the end of the string).\r\n\r\nHere is an implementation:\r\n\r\n```java\r\n    static String solve(List&lt;String&gt; list) {\r\n        int n = list.size();\r\n        int m = list.get(0).length();\r\n        StringBuilder sb = new StringBuilder();\r\n        // Collect characters for the left half of the palindrome\r\n        for (int i = 0, mid = (m + 1) / 2; i &lt; mid; i++) {\r\n            // Count the occurrences of all characters at this index and the mirrored index\r\n            int[] counter = new int[26];\r\n            int j = m - 1 - i;\r\n            for (String word : list) {\r\n                counter[word.charAt(i) - &#39;a&#39;]++;\r\n                counter[word.charAt(j) - &#39;a&#39;]++;\r\n            }\r\n            // Get the median character based on these character frequencies\r\n            int median = -1;\r\n            for (int total = 0; total &lt; n; total += counter[median]) {\r\n                median++;\r\n            }\r\n            // Append this median to the palindrome\r\n            sb.append((char)(median + (int)&#39;a&#39;));\r\n        }\r\n        // Complete the half of the palindrome with the other half\r\n        return sb.toString() + sb.reverse().substring(m % 2);\r\n    }    \r\n```","title":"Find palindrome with minimum difference","body":"<blockquote>\n<p>My code is working correctly only when input string length is of size 2 or 3.</p>\n</blockquote>\n<p>It doesn't actually work for some inputs with size 3. The reason is that your code never modifies the characters in the result other than at the first and last index. So the character at index 1 (for when the input has size 3) is never modified after its initialisation to 'b'. So for the example inputs with size 3 it is just luck that it works, but as soon as the expected output has another letter than 'b' at index 1, your solution does not work for size 3 either.</p>\n<p>The key insight here, is that the optimal character at index <code>i</code> is the <strong>median</strong> of all characters found at that index, and at the mirrored index (so counting backwards from the end of the string).</p>\n<p>Here is an implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static String solve(List&lt;String&gt; list) {\n        int n = list.size();\n        int m = list.get(0).length();\n        StringBuilder sb = new StringBuilder();\n        // Collect characters for the left half of the palindrome\n        for (int i = 0, mid = (m + 1) / 2; i &lt; mid; i++) {\n            // Count the occurrences of all characters at this index and the mirrored index\n            int[] counter = new int[26];\n            int j = m - 1 - i;\n            for (String word : list) {\n                counter[word.charAt(i) - 'a']++;\n                counter[word.charAt(j) - 'a']++;\n            }\n            // Get the median character based on these character frequencies\n            int median = -1;\n            for (int total = 0; total &lt; n; total += counter[median]) {\n                median++;\n            }\n            // Append this median to the palindrome\n            sb.append((char)(median + (int)'a'));\n        }\n        // Complete the half of the palindrome with the other half\n        return sb.toString() + sb.reverse().substring(m % 2);\n    }    \n</code></pre>\n"}],"owner":{"account_id":17772156,"reputation":362,"user_id":12905411,"display_name":"technotigr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3688,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":77088064,"answer_count":1,"score":2,"last_activity_date":1694534605,"creation_date":1694474403,"question_id":77085260,"body_markdown":"Given an `array` of strings, each string has same length `m`.\r\n\r\nThe error between two strings `s1` and `s2` is defined as the sum of the absolute distance between the characters `s1[i] and s2[i]` in the English alphabet.\r\n\r\n\r\nFind a lexicographically smallest palindromic string say `alpha of length m`, such that the sum of the errors between this `alpha string` and the array of strings is minimum.\r\n\r\n**Example:**\r\n\r\n    array = [&quot;aa&quot;,&quot;yy&quot;,&quot;mm&quot;]\r\n\r\n**Answer:**\r\n\r\n    mm\r\n\r\nThis is my code:\r\n\r\n    static String solve(List&lt;String&gt; list) {\r\n    \tint n = list.size();\r\n    \tint m = list.get(0).length();\r\n    \tStringBuilder sb = new StringBuilder();\r\n    \tsb.append(&#39;a&#39;);\r\n    \tfor(int i=1; i&lt;m-1; i++) sb.append(&#39;b&#39;);\r\n    \tsb.append(&#39;a&#39;);\r\n    \r\n    \tint diff = Integer.MAX_VALUE;\r\n    \tString resp = sb.toString();\r\n    \tchar[] ar = resp.toCharArray();\r\n    \tfor(char k=&#39;a&#39;; k&lt;=&#39;z&#39;; k++) {\r\n    \t\tar[0] = k;\r\n    \t\tar[ar.length-1]=k;\r\n    \t\tint d = 0;\r\n    \t\tfor(int i=0; i&lt;n; i++) {\r\n    \t\t\tString msg = list.get(i);\r\n    \t\t\tfor(int j=0; j&lt;m; j++) {\r\n    \t\t\t\tint e1 = msg.charAt(j) - &#39;a&#39;;\r\n    \t\t\t\tint e2 = ar[j] - &#39;a&#39;;\r\n    \t\t\t\td += Math.abs(e1 - e2);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif(diff &gt; d) {\r\n    \t\t\tdiff = d;\r\n    \t\t\tresp = new String(ar);\r\n    \t\t}\r\n    \t}\r\n    \treturn resp;\r\n    }\r\n\r\n**Constraints:**\r\n\r\n    1 &lt;= n * m &lt;= 2 * 10^5\r\n    only lower case english letters are used\r\n\r\nMy code is working correctly only when input string length is of size 2 or 3. But I am not able to find correct approach to solve this problem when input string length is more than 3.","title":"Find palindrome with minimum difference","body":"<p>Given an <code>array</code> of strings, each string has same length <code>m</code>.</p>\n<p>The error between two strings <code>s1</code> and <code>s2</code> is defined as the sum of the absolute distance between the characters <code>s1[i] and s2[i]</code> in the English alphabet.</p>\n<p>Find a lexicographically smallest palindromic string say <code>alpha of length m</code>, such that the sum of the errors between this <code>alpha string</code> and the array of strings is minimum.</p>\n<p><strong>Example:</strong></p>\n<pre><code>array = [&quot;aa&quot;,&quot;yy&quot;,&quot;mm&quot;]\n</code></pre>\n<p><strong>Answer:</strong></p>\n<pre><code>mm\n</code></pre>\n<p>This is my code:</p>\n<pre><code>static String solve(List&lt;String&gt; list) {\n    int n = list.size();\n    int m = list.get(0).length();\n    StringBuilder sb = new StringBuilder();\n    sb.append('a');\n    for(int i=1; i&lt;m-1; i++) sb.append('b');\n    sb.append('a');\n\n    int diff = Integer.MAX_VALUE;\n    String resp = sb.toString();\n    char[] ar = resp.toCharArray();\n    for(char k='a'; k&lt;='z'; k++) {\n        ar[0] = k;\n        ar[ar.length-1]=k;\n        int d = 0;\n        for(int i=0; i&lt;n; i++) {\n            String msg = list.get(i);\n            for(int j=0; j&lt;m; j++) {\n                int e1 = msg.charAt(j) - 'a';\n                int e2 = ar[j] - 'a';\n                d += Math.abs(e1 - e2);\n            }\n        }\n        if(diff &gt; d) {\n            diff = d;\n            resp = new String(ar);\n        }\n    }\n    return resp;\n}\n</code></pre>\n<p><strong>Constraints:</strong></p>\n<pre><code>1 &lt;= n * m &lt;= 2 * 10^5\nonly lower case english letters are used\n</code></pre>\n<p>My code is working correctly only when input string length is of size 2 or 3. But I am not able to find correct approach to solve this problem when input string length is more than 3.</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694506070,"post_id":77087140,"comment_id":135895974,"body_markdown":"If you want optimized queries, you have to write them manually. May I suggest jOOQ instead of JPA?","body":"If you want optimized queries, you have to write them manually. May I suggest jOOQ instead of JPA?"},{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":0,"creation_date":1694506381,"post_id":77087140,"comment_id":135896033,"body_markdown":"Sadly jOOQ likely is not an option, price-wise (MSSQL and Oracle seem to need the pricey enterprise tier). thanks for the hint anyway!","body":"Sadly jOOQ likely is not an option, price-wise (MSSQL and Oracle seem to need the pricey enterprise tier). thanks for the hint anyway!"}],"answers":[{"tags":[],"owner":{"account_id":5310120,"reputation":11,"user_id":4236766,"display_name":"PaMaly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694510026,"creation_date":1694510026,"answer_id":77087675,"question_id":77087140,"body_markdown":"JPA implementations like Hibernate perfectly supports the migration cross vendors. Some aspects to consider are described here: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability\r\n\r\nOn the other hand, if you need to have a specific optimization per vendor, i would consider a solution with alternative repositories. \r\n\r\nFor example CDI offers the use of the @Alternative annotation which lets you package multiple beans that match an injection point without ambiguity errors. In other words, you can apply the @Alternative annotation to two or more beans, then, based on your deployment, specify the bean you want to use in CDI&#39;s beans.\r\n\r\n\r\nMore abstract answer is to use a strategy pattern, which lets you to decide during the runtime which repository will be used. \r\n","title":"JPA with multiple provider options","body":"<p>JPA implementations like Hibernate perfectly supports the migration cross vendors. Some aspects to consider are described here: <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability</a></p>\n<p>On the other hand, if you need to have a specific optimization per vendor, i would consider a solution with alternative repositories.</p>\n<p>For example CDI offers the use of the @Alternative annotation which lets you package multiple beans that match an injection point without ambiguity errors. In other words, you can apply the @Alternative annotation to two or more beans, then, based on your deployment, specify the bean you want to use in CDI's beans.</p>\n<p>More abstract answer is to use a strategy pattern, which lets you to decide during the runtime which repository will be used.</p>\n"}],"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694534438,"creation_date":1694505986,"question_id":77087140,"body_markdown":"I am working in a project that needs to support customers whith different RDBMs (MSSQL and Oracle specifically). At runtime only a single DB needs to be supported, but the customer wants/can choose which DB to actually use.\r\n\r\nThe project uses JPA, but has a fairly complex data model, and there are numerous queries that need to be optimized per RDMS, which currently is implemented by (read-only) entities backed by views (instead of real tables).\r\n\r\nCurrently the project&#39;s focus is on one DB (MSSQL) and optimizations have only been relevant there for now; but now the second DB is getting more important.\r\n\r\nI am now looking for best practices around using JPA with multiple &quot;providers&quot;(?) like this.","title":"JPA with multiple provider options","body":"<p>I am working in a project that needs to support customers whith different RDBMs (MSSQL and Oracle specifically). At runtime only a single DB needs to be supported, but the customer wants/can choose which DB to actually use.</p>\n<p>The project uses JPA, but has a fairly complex data model, and there are numerous queries that need to be optimized per RDMS, which currently is implemented by (read-only) entities backed by views (instead of real tables).</p>\n<p>Currently the project's focus is on one DB (MSSQL) and optimizations have only been relevant there for now; but now the second DB is getting more important.</p>\n<p>I am now looking for best practices around using JPA with multiple &quot;providers&quot;(?) like this.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1694530306,"post_id":77090292,"comment_id":135901462,"body_markdown":"Could you fix `mymethod`?  There&#39;s no return type.","body":"Could you fix <code>mymethod</code>?  There&#39;s no return type."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694530551,"post_id":77090292,"comment_id":135901521,"body_markdown":"Sure, it&#39;s void.","body":"Sure, it&#39;s void."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1694530788,"post_id":77090292,"comment_id":135901586,"body_markdown":"Not possible as is.  Change Class1 to inject a Class2Factory, and use the factory to create an instance of Class2.  The test would inject a Spy&#39;d Factory, and verify it was invoked list.size() times.","body":"Not possible as is.  Change Class1 to inject a Class2Factory, and use the factory to create an instance of Class2.  The test would inject a Spy&#39;d Factory, and verify it was invoked list.size() times."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694532121,"post_id":77090292,"comment_id":135901923,"body_markdown":"I don&#39;t understand the proposal. Could you write an example?","body":"I don&#39;t understand the proposal. Could you write an example?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532737,"post_id":77090292,"comment_id":135902045,"body_markdown":"You don&#39;t have Powermock? You could mock the constructor.","body":"You don&#39;t have Powermock? You could mock the constructor."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694533124,"post_id":77090292,"comment_id":135902134,"body_markdown":"No Powermock in the project","body":"No Powermock in the project"}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694534115,"creation_date":1694534115,"answer_id":77090792,"question_id":77090292,"body_markdown":"Generally there is design issue for mocking construction of object, refactor for testability should be a better solution. (e.g. inject Class2Factory to class as suggested by [Andrew S](https://stackoverflow.com/users/6650475/andrew-s))\r\n\r\nBut if refactoring is not feasible,  \r\nwe can make use of [Mocking Object Construction][1]\r\n```java\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.mockConstruction;\r\nimport static org.mockito.Mockito.verify;\r\nimport static org.mockito.Mockito.when;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.mockito.MockedConstruction;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nclass Class1Test {\r\n    @Test\r\n    void myMethod_createClass2PerItemAndCall_anotherMethod() {\r\n        try (MockedConstruction&lt;Class2&gt; mocked = mockConstruction(Class2.class, (mock, context) -&gt; {\r\n            // simulate the construction, in case you want to verify construction argument\r\n            when(mock.getElement()).thenReturn((String) context.arguments().get(0));\r\n        })) {\r\n            Class1 class1 = new Class1();\r\n            class1.myMethod(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\r\n\r\n            List&lt;Class2&gt; mockedInstances = mocked.constructed();\r\n            assertEquals(3, mockedInstances.size());\r\n            // in case construction argument checking is needed\r\n            assertEquals(&quot;a&quot;, mockedInstances.get(0).getElement());\r\n            assertEquals(&quot;b&quot;, mockedInstances.get(1).getElement());\r\n            assertEquals(&quot;c&quot;, mockedInstances.get(2).getElement());\r\n            verify(mockedInstances.get(0)).anotherMethod();\r\n            verify(mockedInstances.get(1)).anotherMethod();\r\n            verify(mockedInstances.get(2)).anotherMethod();\r\n        }\r\n    }\r\n\r\n}\r\n\r\npublic class Class2 {\r\n    ...\r\n\r\n    // for verify constructor argument\r\n    String getElement() {\r\n        return element;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/3.5.6/org/mockito/Mockito.html#mocked_construction","title":"Verify another class&#39; method inside a mockito spy","body":"<p>Generally there is design issue for mocking construction of object, refactor for testability should be a better solution. (e.g. inject Class2Factory to class as suggested by <a href=\"https://stackoverflow.com/users/6650475/andrew-s\">Andrew S</a>)</p>\n<p>But if refactoring is not feasible,<br />\nwe can make use of <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.5.6/org/mockito/Mockito.html#mocked_construction\" rel=\"nofollow noreferrer\">Mocking Object Construction</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.mockConstruction;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.MockedConstruction;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nclass Class1Test {\n    @Test\n    void myMethod_createClass2PerItemAndCall_anotherMethod() {\n        try (MockedConstruction&lt;Class2&gt; mocked = mockConstruction(Class2.class, (mock, context) -&gt; {\n            // simulate the construction, in case you want to verify construction argument\n            when(mock.getElement()).thenReturn((String) context.arguments().get(0));\n        })) {\n            Class1 class1 = new Class1();\n            class1.myMethod(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\n\n            List&lt;Class2&gt; mockedInstances = mocked.constructed();\n            assertEquals(3, mockedInstances.size());\n            // in case construction argument checking is needed\n            assertEquals(&quot;a&quot;, mockedInstances.get(0).getElement());\n            assertEquals(&quot;b&quot;, mockedInstances.get(1).getElement());\n            assertEquals(&quot;c&quot;, mockedInstances.get(2).getElement());\n            verify(mockedInstances.get(0)).anotherMethod();\n            verify(mockedInstances.get(1)).anotherMethod();\n            verify(mockedInstances.get(2)).anotherMethod();\n        }\n    }\n\n}\n\npublic class Class2 {\n    ...\n\n    // for verify constructor argument\n    String getElement() {\n        return element;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694534115,"creation_date":1694530208,"question_id":77090292,"body_markdown":"I have two classes that works one inside of the other\r\n\r\n    public class Class1 {\r\n        public Class1(){}\r\n    \r\n        public void myMethod(List&lt;String&gt; list){\r\n            for (String element: list){\r\n                Class2 class2 = new Class2(element);\r\n                class2.anotherMethod();\r\n            }\r\n        }\r\n    }\r\n\r\n    public class Class2 {\r\n        private final String element;\r\n\r\n        public Class2(String element) {\r\n            this.element = element;\r\n        }\r\n\r\n        public void anotherMethod(){\r\n            // do stuff\r\n        }\r\n    }\r\n\r\nMy question is how can I spy Class1 and check that when I call class1.myMethod, the class2 object is created *once for each element in the list* and the anotherMethod called in the same block?\r\n\r\nI&#39;m using Java 11 and Mockito 3.5, and can&#39;t change the project&#39;s POM.","title":"Verify another class&#39; method inside a mockito spy","body":"<p>I have two classes that works one inside of the other</p>\n<pre><code>public class Class1 {\n    public Class1(){}\n\n    public void myMethod(List&lt;String&gt; list){\n        for (String element: list){\n            Class2 class2 = new Class2(element);\n            class2.anotherMethod();\n        }\n    }\n}\n\npublic class Class2 {\n    private final String element;\n\n    public Class2(String element) {\n        this.element = element;\n    }\n\n    public void anotherMethod(){\n        // do stuff\n    }\n}\n</code></pre>\n<p>My question is how can I spy Class1 and check that when I call class1.myMethod, the class2 object is created <em>once for each element in the list</em> and the anotherMethod called in the same block?</p>\n<p>I'm using Java 11 and Mockito 3.5, and can't change the project's POM.</p>\n"},{"tags":["java","sql","kotlin","orm","sqldelight"],"comments":[{"owner":{"account_id":459646,"reputation":345,"user_id":860227,"display_name":"jokuskay"},"score":0,"creation_date":1694164634,"post_id":77028786,"comment_id":135858355,"body_markdown":"Consider saving as a file on disk and storing the file&#39;s path in DB. Another idea is to have one more table where you&#39;ll be storing chunks of bytes (no idea how SQLDelight works, hopefully doesn&#39;t get fully loaded into RAM).","body":"Consider saving as a file on disk and storing the file&#39;s path in DB. Another idea is to have one more table where you&#39;ll be storing chunks of bytes (no idea how SQLDelight works, hopefully doesn&#39;t get fully loaded into RAM)."}],"answers":[{"tags":[],"owner":{"account_id":17832790,"reputation":33,"user_id":12952421,"display_name":"Kariem Seiam"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1694176374,"creation_date":1694176374,"answer_id":77066915,"question_id":77028786,"body_markdown":"To insert large binary data into a BLOB column using SQLDelight while efficiently streaming the data:\r\n\r\n1. **SQLDelight Setup**:\r\n   Ensure that your SQLDelight table and queries are set up as previously demonstrated.\r\n\r\n2. **Stream and Insert Data**:\r\n\r\n   ```kotlin\r\n   import java.io.File\r\n   import java.io.FileInputStream\r\n\r\n   fun insertLargeBlobData(database: Database, filePath: String) {\r\n       val queries = database.myTableQueries\r\n       val file = File(filePath)\r\n       val inputStream = FileInputStream(file)\r\n\r\n       database.transaction {\r\n           val buffer = ByteArray(8192) // Adjust buffer size as needed\r\n           val writableBlob = queries.transactionWithResult { transaction -&gt;\r\n               transaction.myTableQueries.openWritableBlob()\r\n           }\r\n\r\n           var bytesRead = inputStream.read(buffer)\r\n           while (bytesRead &gt; 0) {\r\n               writableBlob.write(buffer, 0, bytesRead)\r\n               bytesRead = inputStream.read(buffer)\r\n           }\r\n\r\n           writableBlob.close()\r\n       }\r\n   }\r\n   ```\r\n\r\n\r\n\r\n   - **Buffer Size Guidelines**:\r\n  \r\n     | Data Size                 | Buffer Size Range | Example                  |\r\n     |---------------------------|-------------------|--------------------------|\r\n     | Small Data (&lt; 1 MB)       | 4 KB to 16 KB     | Use 8192 bytes (8 KB) for data up to 1 MB. |\r\n     | Medium Data (1 MB to 100 MB) | 16 KB to 1 MB  | Use 65536 bytes (64 KB) for data in the 1 MB to 100 MB range. |\r\n     | Large Data (100 MB to 1 GB) | 1 MB to 4 MB    | Use 2097152 bytes (2 MB) for data in the 100 MB to 1 GB range. |\r\n     | Very Large Data (&gt; 1 GB)   | 4 MB or more     | For data exceeding 1 GB, consider using 4194304 bytes (4 MB) or more. |\r\n     \r\n3. **Call the Function**:\r\n\r\n   ```kotlin\r\n   val database = Database(driver)\r\n   val filePath = &quot;path_to_your_large_file.bin&quot;\r\n   insertLargeBlobData(database, filePath)\r\n   ```\r\n\r\nThis approach efficiently handles large binary data without loading the entire file into memory at once. You can adjust the buffer size (`ByteArray(8192)`) according to your specific memory requirements, following the buffer size guidelines provided.","title":"SQLDelight: BLOB inserting large binary data","body":"<p>To insert large binary data into a BLOB column using SQLDelight while efficiently streaming the data:</p>\n<ol>\n<li><p><strong>SQLDelight Setup</strong>:\nEnsure that your SQLDelight table and queries are set up as previously demonstrated.</p>\n</li>\n<li><p><strong>Stream and Insert Data</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import java.io.File\nimport java.io.FileInputStream\n\nfun insertLargeBlobData(database: Database, filePath: String) {\n    val queries = database.myTableQueries\n    val file = File(filePath)\n    val inputStream = FileInputStream(file)\n\n    database.transaction {\n        val buffer = ByteArray(8192) // Adjust buffer size as needed\n        val writableBlob = queries.transactionWithResult { transaction -&gt;\n            transaction.myTableQueries.openWritableBlob()\n        }\n\n        var bytesRead = inputStream.read(buffer)\n        while (bytesRead &gt; 0) {\n            writableBlob.write(buffer, 0, bytesRead)\n            bytesRead = inputStream.read(buffer)\n        }\n\n        writableBlob.close()\n    }\n}\n</code></pre>\n<ul>\n<li><p><strong>Buffer Size Guidelines</strong>:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Data Size</th>\n<th>Buffer Size Range</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Small Data (&lt; 1 MB)</td>\n<td>4 KB to 16 KB</td>\n<td>Use 8192 bytes (8 KB) for data up to 1 MB.</td>\n</tr>\n<tr>\n<td>Medium Data (1 MB to 100 MB)</td>\n<td>16 KB to 1 MB</td>\n<td>Use 65536 bytes (64 KB) for data in the 1 MB to 100 MB range.</td>\n</tr>\n<tr>\n<td>Large Data (100 MB to 1 GB)</td>\n<td>1 MB to 4 MB</td>\n<td>Use 2097152 bytes (2 MB) for data in the 100 MB to 1 GB range.</td>\n</tr>\n<tr>\n<td>Very Large Data (&gt; 1 GB)</td>\n<td>4 MB or more</td>\n<td>For data exceeding 1 GB, consider using 4194304 bytes (4 MB) or more.</td>\n</tr>\n</tbody>\n</table>\n</div></li>\n</ul>\n</li>\n<li><p><strong>Call the Function</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val database = Database(driver)\nval filePath = &quot;path_to_your_large_file.bin&quot;\ninsertLargeBlobData(database, filePath)\n</code></pre>\n</li>\n</ol>\n<p>This approach efficiently handles large binary data without loading the entire file into memory at once. You can adjust the buffer size (<code>ByteArray(8192)</code>) according to your specific memory requirements, following the buffer size guidelines provided.</p>\n"},{"tags":[],"owner":{"account_id":1380512,"reputation":110,"user_id":7388422,"display_name":"Shant Khayalian"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694534107,"creation_date":1694534107,"answer_id":77090791,"question_id":77028786,"body_markdown":"When working with large binary data in SQLDelight, you can follow a similar approach to what you would do with ordinary JDBC. However, there are a few differences in the syntax and implementation.\r\n\r\nIn SQLDelight, you define your table schema in a separate .sq file. In this file, you specify the table structure, including the BLOB column. For example:\r\n\r\n        CREATE TABLE MyTable (\r\n      myBlob BLOB\r\n    );\r\n\r\nTo insert large binary data into the BLOB column, you need to create an instance of the ByteArray with the appropriate size. You can then pass this ByteArray to the insert method of the generated SQLDelight queries.\r\n\r\nHere&#39;s an example of how you can achieve this:\r\n\r\n    val database = Database(driver)\r\n    val queries = database.myTableQueries\r\n    \r\n    // Create a ByteArray with the appropriate size (e.g., several gigs)\r\n    val bytes = ByteArray(sizeInBytes)\r\n    \r\n    // Populate the ByteArray with your data\r\n    // ...\r\n    \r\n    // Create an instance of the MyTable data class with the ByteArray\r\n    val myRecord = MyTable(bytes)\r\n    \r\n    // Insert the record into the table using the generated insert query\r\n    queries.insert(myRecord)\r\n\r\nIn this example, you first create an instance of the Database using the appropriate driver. Then, you obtain the generated queries for the MyTable table.\r\n\r\nNext, you create a ByteArray with the desired size, representing your large binary data. You can populate this ByteArray with your data before inserting it into the table.\r\n\r\nFinally, you create an instance of the MyTable data class, passing the ByteArray as a parameter. You then use the insert method of the generated queries to insert the record into the table.\r\n\r\nBy following this approach, you should be able to insert large binary data into a BLOB column using SQLDelight.\r\n\r\nHope I was Helpful.\r\n","title":"SQLDelight: BLOB inserting large binary data","body":"<p>When working with large binary data in SQLDelight, you can follow a similar approach to what you would do with ordinary JDBC. However, there are a few differences in the syntax and implementation.</p>\n<p>In SQLDelight, you define your table schema in a separate .sq file. In this file, you specify the table structure, including the BLOB column. For example:</p>\n<pre><code>    CREATE TABLE MyTable (\n  myBlob BLOB\n);\n</code></pre>\n<p>To insert large binary data into the BLOB column, you need to create an instance of the ByteArray with the appropriate size. You can then pass this ByteArray to the insert method of the generated SQLDelight queries.</p>\n<p>Here's an example of how you can achieve this:</p>\n<pre><code>val database = Database(driver)\nval queries = database.myTableQueries\n\n// Create a ByteArray with the appropriate size (e.g., several gigs)\nval bytes = ByteArray(sizeInBytes)\n\n// Populate the ByteArray with your data\n// ...\n\n// Create an instance of the MyTable data class with the ByteArray\nval myRecord = MyTable(bytes)\n\n// Insert the record into the table using the generated insert query\nqueries.insert(myRecord)\n</code></pre>\n<p>In this example, you first create an instance of the Database using the appropriate driver. Then, you obtain the generated queries for the MyTable table.</p>\n<p>Next, you create a ByteArray with the desired size, representing your large binary data. You can populate this ByteArray with your data before inserting it into the table.</p>\n<p>Finally, you create an instance of the MyTable data class, passing the ByteArray as a parameter. You then use the insert method of the generated queries to insert the record into the table.</p>\n<p>By following this approach, you should be able to insert large binary data into a BLOB column using SQLDelight.</p>\n<p>Hope I was Helpful.</p>\n"}],"owner":{"account_id":216810,"reputation":16569,"user_id":472270,"accept_rate":87,"display_name":"Barmaley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694534107,"creation_date":1693666859,"question_id":77028786,"body_markdown":"I stuck with problem. I need to insert large enough data to BLOB column using SQLDelight...\r\n\r\nIn ordinary JDBC it could be done usually in a way like:\r\n\r\n    val file = File(&quot;your_path&quot;)\r\n    val inputStream = FileInputStream(file)\r\n    val statement = connection.prepareStatement(&quot;INSERT INTO myTable (myBlob) VALUES (?)&quot;)\r\n    statement.setBlob(1, inputStream)\r\n\r\nIn case of SQLDelight I can only do:\r\n\r\nmyTable.sq\r\n----------\r\n\r\n    CREATE TABLE MyTable (\r\n    myBlob BLOB);\r\n\r\n    insert:\r\n    INSERT INTO MyTable VALUES ?;\r\n\r\nSomewhere in Kotlin code:\r\n------------------------\r\n    var bytes: ByteArray\r\n    val database = Database(driver)\r\n    val queries = database.myTableQueries\r\n    //blah-blah\r\n    val myRecord = MyTable(bytes)\r\n    queries.insert(myRecord)\r\n\r\nEverything looks like, ok, but what if I would need to allocate `ByteArray` as several gigs?\r\n\r\nAny ideas?\r\n\r\n\r\n\r\n","title":"SQLDelight: BLOB inserting large binary data","body":"<p>I stuck with problem. I need to insert large enough data to BLOB column using SQLDelight...</p>\n<p>In ordinary JDBC it could be done usually in a way like:</p>\n<pre><code>val file = File(&quot;your_path&quot;)\nval inputStream = FileInputStream(file)\nval statement = connection.prepareStatement(&quot;INSERT INTO myTable (myBlob) VALUES (?)&quot;)\nstatement.setBlob(1, inputStream)\n</code></pre>\n<p>In case of SQLDelight I can only do:</p>\n<h2>myTable.sq</h2>\n<pre><code>CREATE TABLE MyTable (\nmyBlob BLOB);\n\ninsert:\nINSERT INTO MyTable VALUES ?;\n</code></pre>\n<h2>Somewhere in Kotlin code:</h2>\n<pre><code>var bytes: ByteArray\nval database = Database(driver)\nval queries = database.myTableQueries\n//blah-blah\nval myRecord = MyTable(bytes)\nqueries.insert(myRecord)\n</code></pre>\n<p>Everything looks like, ok, but what if I would need to allocate <code>ByteArray</code> as several gigs?</p>\n<p>Any ideas?</p>\n"},{"tags":["java","debugging","intellij-idea","jrebel"],"owner":{"account_id":1073114,"reputation":3335,"user_id":1071914,"accept_rate":86,"display_name":"user1071914"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694534073,"creation_date":1694534073,"question_id":77090785,"body_markdown":"I have a &quot;legacy&quot; Java 8 app that contains 15 years worth of code.    I need to debug using JRebel to shorten the change times as I make modifications.   I am using IntelliJ 23.1.2 and Jrebel 2023.2.2.   \r\n\r\nI have to run this app outside Intellij and debug as a &quot;Remote JVM App&quot; in Intellij to debug it because it will not run directly out of the build directory.    \r\n\r\nThe JRebel instructions say that I should be able to remote-debug this app, but if I run the app in a command window then select my &quot;Debug&quot; configuration to connect to the JVM in IntelliJ the &quot;Jrebel&quot; debug icon is not lit up so I cannot run the Intellij features simultaneously with the Jrebel features (see screenshot).   What am I missing here?   \r\n\r\n[![Intellij options][1]][1]\r\n\r\nHere is my Java run command, I include the Intellij agentlib parameter for remote debugging and the JRebel parameters for JRebel functionality.   \r\n\r\nAny help is appreciated.\r\n    \r\n    java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005  &quot;-agentpath:C:\\jrebel\\lib\\jrebel64.dll&quot; -Drebel.remoting_plugin=true -jar myapp.war \r\n\r\n  [1]: https://i.stack.imgur.com/ZkOpR.png","title":"Use Jrebel to remote debug a spring boot app?","body":"<p>I have a &quot;legacy&quot; Java 8 app that contains 15 years worth of code.    I need to debug using JRebel to shorten the change times as I make modifications.   I am using IntelliJ 23.1.2 and Jrebel 2023.2.2.</p>\n<p>I have to run this app outside Intellij and debug as a &quot;Remote JVM App&quot; in Intellij to debug it because it will not run directly out of the build directory.</p>\n<p>The JRebel instructions say that I should be able to remote-debug this app, but if I run the app in a command window then select my &quot;Debug&quot; configuration to connect to the JVM in IntelliJ the &quot;Jrebel&quot; debug icon is not lit up so I cannot run the Intellij features simultaneously with the Jrebel features (see screenshot).   What am I missing here?</p>\n<p><a href=\"https://i.stack.imgur.com/ZkOpR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZkOpR.png\" alt=\"Intellij options\" /></a></p>\n<p>Here is my Java run command, I include the Intellij agentlib parameter for remote debugging and the JRebel parameters for JRebel functionality.</p>\n<p>Any help is appreciated.</p>\n<pre><code>java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005  &quot;-agentpath:C:\\jrebel\\lib\\jrebel64.dll&quot; -Drebel.remoting_plugin=true -jar myapp.war \n</code></pre>\n"},{"tags":["java","classpath"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1694534136,"post_id":77090720,"comment_id":135902363,"body_markdown":"You&#39;re lacking like a zillion details here.","body":"You&#39;re lacking like a zillion details here."},{"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"score":0,"creation_date":1694534835,"post_id":77090720,"comment_id":135902555,"body_markdown":"Understood Kayaman and appreciate the response. Since the file structure and java code has not changed in years, didn&#39;t want to overload with details. Was hoping that someone has had a similar experience. But certainly, I can provide any details that you think may be helpful.","body":"Understood Kayaman and appreciate the response. Since the file structure and java code has not changed in years, didn&#39;t want to overload with details. Was hoping that someone has had a similar experience. But certainly, I can provide any details that you think may be helpful."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694562887,"post_id":77090720,"comment_id":135906858,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"score":0,"creation_date":1694606762,"post_id":77090720,"comment_id":135912915,"body_markdown":"We restored the machine to a previous version which removed the JRE updates that were creating our issues. Case closed.","body":"We restored the machine to a previous version which removed the JRE updates that were creating our issues. Case closed."}],"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694533568,"creation_date":1694533568,"question_id":77090720,"body_markdown":"Working with a legacy Java application in which the user defined packages are no longer visible when compiling classes that are importing.\r\n\r\nCan compile the packages (ie: package test.package;) and the .class files are properly located.\r\n\r\nBut when compiling MyServlet.class - getting &quot;package test.package does not exist&quot; error.\r\n\r\nThe &quot;import test.package;&quot; are declared in MyServlet.class.\r\n\r\nAs mentioned, this is a legacy application (java 1.6) and these classes and packages have not changed location or how they are compiled for years. \r\n\r\nThe user defined packages are compiled fine and are in the proper directory structure, so they exist. But, any servlets importing these packages can&#39;t be compiled.\r\n\r\nIt appears that perhaps the Tomcat, JAVA and/or JDK/JRE have been attempted to be upgraded, thus the CLASSPATH may have been changed. Tried to tweak the CLASSPATH and Environmental Variables. But, still no luck.\r\n\r\nAny insight or suggestions would be much appreciated.\r\n\r\nBest,\r\nMatthew \r\n\r\nWe&#39;ve tried to tweak the CLASSPATH and create new Package locations. But same &quot;package test1.package does not exist&quot;.","title":"User Defined Package Does Not Exist - But it Does","body":"<p>Working with a legacy Java application in which the user defined packages are no longer visible when compiling classes that are importing.</p>\n<p>Can compile the packages (ie: package test.package;) and the .class files are properly located.</p>\n<p>But when compiling MyServlet.class - getting &quot;package test.package does not exist&quot; error.</p>\n<p>The &quot;import test.package;&quot; are declared in MyServlet.class.</p>\n<p>As mentioned, this is a legacy application (java 1.6) and these classes and packages have not changed location or how they are compiled for years.</p>\n<p>The user defined packages are compiled fine and are in the proper directory structure, so they exist. But, any servlets importing these packages can't be compiled.</p>\n<p>It appears that perhaps the Tomcat, JAVA and/or JDK/JRE have been attempted to be upgraded, thus the CLASSPATH may have been changed. Tried to tweak the CLASSPATH and Environmental Variables. But, still no luck.</p>\n<p>Any insight or suggestions would be much appreciated.</p>\n<p>Best,\nMatthew</p>\n<p>We've tried to tweak the CLASSPATH and create new Package locations. But same &quot;package test1.package does not exist&quot;.</p>\n"},{"tags":["java","android","command-line","permissions","adb"],"comments":[{"owner":{"account_id":16565480,"reputation":311,"user_id":11970188,"display_name":"Loc Huynh"},"score":0,"creation_date":1694620541,"post_id":77090575,"comment_id":135916132,"body_markdown":"I suggest you using Shizuku API which enable &quot;adb&quot; command for other android apps.","body":"I suggest you using Shizuku API which enable &quot;adb&quot; command for other android apps."}],"owner":{"account_id":29412634,"reputation":11,"user_id":22536158,"display_name":"Gennadii Ganenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694532347,"creation_date":1694532295,"question_id":77090575,"body_markdown":"I&#39;m trying to build a simple support app to execute some of adb shell commands like &quot;adb shell wm overscan -35,0,-55,0&quot; to hide Black Bottom Bar. I will run this app as system on rooted device.\r\n\r\nThe problem is that I couldn&#39;t find any working solution in the internet. I already tried next solutions:\r\n\r\nhttps://stackoverflow.com/a/74190894/22536158\r\n\r\nhttps://stackoverflow.com/a/13381888/22536158\r\n\r\nThese do nothing if i write command without adb shell like: &quot;wm overscan -35,0,-55,0&quot; and if I add adb shell then it throws:\r\n\r\n    java.io.IOException: Cannot run program &quot;adb&quot;: error=13, Permission denied\r\n\r\nMoreover, I&#39;ve tried to use ProcessBuilder:\r\n\r\n    ProcessBuilder(&quot;wm overscan -35,0,-55,0&quot;).start()\r\n\r\nand it throws\r\n\r\n    java.io.IOException: Cannot run program &quot;wm overscan -35,0,-55,0&quot;: error=13, Permission denied\r\n\r\nCan someone please explain me what am I doing wrong?\r\n","title":"Run adb shell command programmatically","body":"<p>I'm trying to build a simple support app to execute some of adb shell commands like &quot;adb shell wm overscan -35,0,-55,0&quot; to hide Black Bottom Bar. I will run this app as system on rooted device.</p>\n<p>The problem is that I couldn't find any working solution in the internet. I already tried next solutions:</p>\n<p><a href=\"https://stackoverflow.com/a/74190894/22536158\">https://stackoverflow.com/a/74190894/22536158</a></p>\n<p><a href=\"https://stackoverflow.com/a/13381888/22536158\">https://stackoverflow.com/a/13381888/22536158</a></p>\n<p>These do nothing if i write command without adb shell like: &quot;wm overscan -35,0,-55,0&quot; and if I add adb shell then it throws:</p>\n<pre><code>java.io.IOException: Cannot run program &quot;adb&quot;: error=13, Permission denied\n</code></pre>\n<p>Moreover, I've tried to use ProcessBuilder:</p>\n<pre><code>ProcessBuilder(&quot;wm overscan -35,0,-55,0&quot;).start()\n</code></pre>\n<p>and it throws</p>\n<pre><code>java.io.IOException: Cannot run program &quot;wm overscan -35,0,-55,0&quot;: error=13, Permission denied\n</code></pre>\n<p>Can someone please explain me what am I doing wrong?</p>\n"},{"tags":["java","apache-kafka","quarkus","smallrye","quarkus-reactive"],"answers":[{"tags":[],"owner":{"account_id":18144706,"reputation":196,"user_id":13198160,"display_name":"Ozan G&#252;nalp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693987355,"creation_date":1693987355,"answer_id":77050038,"question_id":77049712,"body_markdown":"The `Multi&lt;O&gt; process(Multi&lt;I&gt; messages)` signature does not support automatic metadata propagation, hence the header propagation for Kafka. \r\n\r\nI suggest you use, if it suits your use case, `Multi&lt;String&gt; consume(Bytes message)`. The method will be called for each incoming message and you can produce multiple messages per incoming message using your code `Multi.createFrom().items({parse message into multiple strings});`. \r\nAnd the Kafka header propagation will work expectedly.","title":"Quarkus Kafka: header propagation doesn&#39;t work for Multi","body":"<p>The <code>Multi&lt;O&gt; process(Multi&lt;I&gt; messages)</code> signature does not support automatic metadata propagation, hence the header propagation for Kafka.</p>\n<p>I suggest you use, if it suits your use case, <code>Multi&lt;String&gt; consume(Bytes message)</code>. The method will be called for each incoming message and you can produce multiple messages per incoming message using your code <code>Multi.createFrom().items({parse message into multiple strings});</code>.\nAnd the Kafka header propagation will work expectedly.</p>\n"}],"owner":{"account_id":6291501,"reputation":1128,"user_id":4889035,"display_name":"Dmytro Chaban"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77050038,"answer_count":1,"score":0,"last_activity_date":1694532331,"creation_date":1693984245,"question_id":77049712,"body_markdown":"I have a simple Kafka Multi processing, I&#39;m listening to `Multi&lt;Bytes&gt;`, doing a flatmap and producing multiple messages:\r\n\r\n```java\r\n    @Incoming(&quot;generic-in&quot;)\r\n    @Outgoing(&quot;generic-out&quot;)\r\n    public Multi&lt;String&gt; consume(@NotNull Multi&lt;Bytes&gt; messages) {\r\n        return messages.flatMap((message) -&gt; {\r\n               return Multi.createFrom().items({parse message into multiple strings});\r\n        });\r\n    }\r\n```\r\n\r\nI added the propagate-headers key to the outgoing topic:\r\n\r\n```\r\n      generic-out:\r\n        merge: true\r\n        bootstrap:\r\n          servers: localhost:9092\r\n        topic: &#39;test.test.out&#39;\r\n        key:\r\n          serializer: org.apache.kafka.common.serialization.StringSerializer\r\n        connector: smallrye-kafka\r\n        value:\r\n          serializer: org.apache.kafka.common.serialization.StringSerializer\r\n        propagate-headers: &quot;HEADER1,HEADER2&quot;\r\n```\r\n\r\nStill I&#39;m not getting the headers propagated except the opentelemetry.","title":"Quarkus Kafka: header propagation doesn&#39;t work for Multi","body":"<p>I have a simple Kafka Multi processing, I'm listening to <code>Multi&lt;Bytes&gt;</code>, doing a flatmap and producing multiple messages:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Incoming(&quot;generic-in&quot;)\n    @Outgoing(&quot;generic-out&quot;)\n    public Multi&lt;String&gt; consume(@NotNull Multi&lt;Bytes&gt; messages) {\n        return messages.flatMap((message) -&gt; {\n               return Multi.createFrom().items({parse message into multiple strings});\n        });\n    }\n</code></pre>\n<p>I added the propagate-headers key to the outgoing topic:</p>\n<pre><code>      generic-out:\n        merge: true\n        bootstrap:\n          servers: localhost:9092\n        topic: 'test.test.out'\n        key:\n          serializer: org.apache.kafka.common.serialization.StringSerializer\n        connector: smallrye-kafka\n        value:\n          serializer: org.apache.kafka.common.serialization.StringSerializer\n        propagate-headers: &quot;HEADER1,HEADER2&quot;\n</code></pre>\n<p>Still I'm not getting the headers propagated except the opentelemetry.</p>\n"},{"tags":["java","spring","apache-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"answers":[{"tags":[],"owner":{"account_id":20087099,"reputation":11,"user_id":14728414,"display_name":"iman soltani"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1694444106,"creation_date":1694444106,"answer_id":77082714,"question_id":77029684,"body_markdown":"Accessing a **GlobalKTable** or any state store created within a Kafka Streams topology from outside (like in a scheduled task) usually involves the **InteractiveQueryService**. This service provides a means to query state stores directly without needing to go through Kafka.\r\n\r\nThe **UnknownStateStoreException** you&#39;re encountering usually happens because the state store is either not yet ready, or Kafka Streams doesn&#39;t know about it yet. This could be due to several reasons:\r\n 1. **Name mismatch**: Ensure that the name you use with **InteractiveQueryService** or **KafkaStreams.store(...)** is the exact name of your store.\r\n 2. **Your application is not yet running**: Ensure that your streams application is in a **RUNNING** state. Before reaching this state, the store may not be query-able.\r\n 3. **Not all instances have the global store**: **GlobalKTable** (or any global store) is, as the name implies, global. That means all instances of your service should have a full copy of it. Ensure that all instances have loaded and processed the store.\r\n\r\nI understand you are looking for a more streamlined approach. for better experience follow these steps:\r\n\r\n 1. **State Stores are ready**: You can listen for the **StreamsBuilderFactoryBean** to ensure the state stores are ready.\r\n```\r\n@Autowired\r\nprivate InteractiveQueryService interactiveQueryService;\r\n\r\n@Scheduled\r\npublic void myTask() {\r\n    try {\r\n        ReadOnlyKeyValueStore&lt;String, MyValue&gt; store = \r\n            interactiveQueryService.getQueryableStore(MY_STORE_NAME, QueryableStoreTypes.keyValueStore());\r\n\r\n        // ... Use the store to fetch values.\r\n    } catch (UnknownStateStoreException e) {\r\n        // Handle or log the exception. You can retry after a delay.\r\n    }\r\n}\r\n```\r\n\r\n 2. **Add StreamListener lifecycle hooks**: You can use the **@StreamListener** lifecycle hooks to know when your streams are ready.\r\n```\r\n@StreamListener(target = Processor.INPUT, condition = &quot;headers[&#39;type&#39;]==&#39;...&#39;&quot;)\r\npublic void input(...) {\r\n    // Your logic ...\r\n}\r\n\r\n@StreamListener(&quot;process-0&quot;)  // This assumes your input channel name is process-0\r\npublic void onEvent(...) {\r\n    // Once this is called, it means your Kafka Streams instance is running and the state stores should be available.\r\n}\r\n```\r\n\r\n 3. **Configuration**: Ensure that you have **spring.cloud.stream.kafka.streams.binder.configuration.application.server** defined. This is needed for **InteractiveQueryService**.\r\n\r\nWith these steps, you should be able to access your **GlobalKTable** with **InteractiveQueryService** without having to directly deal with the **KafkaStreams** object or the **ApplicationContext**. Remember to always handle the **UnknownStateStoreException** exception as the store might not always be immediately available.\r\n","title":"Kafka Streams Binder: Accessing a Global State Store","body":"<p>Accessing a <strong>GlobalKTable</strong> or any state store created within a Kafka Streams topology from outside (like in a scheduled task) usually involves the <strong>InteractiveQueryService</strong>. This service provides a means to query state stores directly without needing to go through Kafka.</p>\n<p>The <strong>UnknownStateStoreException</strong> you're encountering usually happens because the state store is either not yet ready, or Kafka Streams doesn't know about it yet. This could be due to several reasons:</p>\n<ol>\n<li><strong>Name mismatch</strong>: Ensure that the name you use with <strong>InteractiveQueryService</strong> or <strong>KafkaStreams.store(...)</strong> is the exact name of your store.</li>\n<li><strong>Your application is not yet running</strong>: Ensure that your streams application is in a <strong>RUNNING</strong> state. Before reaching this state, the store may not be query-able.</li>\n<li><strong>Not all instances have the global store</strong>: <strong>GlobalKTable</strong> (or any global store) is, as the name implies, global. That means all instances of your service should have a full copy of it. Ensure that all instances have loaded and processed the store.</li>\n</ol>\n<p>I understand you are looking for a more streamlined approach. for better experience follow these steps:</p>\n<ol>\n<li><strong>State Stores are ready</strong>: You can listen for the <strong>StreamsBuilderFactoryBean</strong> to ensure the state stores are ready.</li>\n</ol>\n<pre><code>@Autowired\nprivate InteractiveQueryService interactiveQueryService;\n\n@Scheduled\npublic void myTask() {\n    try {\n        ReadOnlyKeyValueStore&lt;String, MyValue&gt; store = \n            interactiveQueryService.getQueryableStore(MY_STORE_NAME, QueryableStoreTypes.keyValueStore());\n\n        // ... Use the store to fetch values.\n    } catch (UnknownStateStoreException e) {\n        // Handle or log the exception. You can retry after a delay.\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li><strong>Add StreamListener lifecycle hooks</strong>: You can use the <strong>@StreamListener</strong> lifecycle hooks to know when your streams are ready.</li>\n</ol>\n<pre><code>@StreamListener(target = Processor.INPUT, condition = &quot;headers['type']=='...'&quot;)\npublic void input(...) {\n    // Your logic ...\n}\n\n@StreamListener(&quot;process-0&quot;)  // This assumes your input channel name is process-0\npublic void onEvent(...) {\n    // Once this is called, it means your Kafka Streams instance is running and the state stores should be available.\n}\n</code></pre>\n<ol start=\"3\">\n<li><strong>Configuration</strong>: Ensure that you have <strong>spring.cloud.stream.kafka.streams.binder.configuration.application.server</strong> defined. This is needed for <strong>InteractiveQueryService</strong>.</li>\n</ol>\n<p>With these steps, you should be able to access your <strong>GlobalKTable</strong> with <strong>InteractiveQueryService</strong> without having to directly deal with the <strong>KafkaStreams</strong> object or the <strong>ApplicationContext</strong>. Remember to always handle the <strong>UnknownStateStoreException</strong> exception as the store might not always be immediately available.</p>\n"}],"owner":{"account_id":1257958,"reputation":263,"user_id":7382368,"display_name":"user7382368"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694532095,"creation_date":1693681465,"question_id":77029684,"body_markdown":"Related to [this question][1]:\r\nI&#39;m using `spring-boot-starter-parent` version `3.1.2` and `spring-cloud-stream-binder-kafka-streams` version `4.0.3`\r\n\r\nI&#39;ve created a GlobalKTable in with the following code:\r\n\r\n```java\r\n@Bean\r\npublic StreamsBuilderFactoryBeanCustomizer customizer() {\r\n    return fb -&gt; {\r\n        try {\r\n            final StreamsBuilder streamsBuilder = fb.getObject();\r\n            streamsBuilder.addGlobalStore(...);\r\n        }\r\n        catch (Exception e) { ... }\r\n    };\r\n}\r\n```\r\n\r\nHowever I need to access this GKT from a scheduled task (outside of my binder stream functions). Trying to access the store with the InteractiveQueryService throws an `UnknownStateStoreException`.\r\n\r\nThe only way I&#39;ve found to do this is to manually register the KafkaStream object as a Bean :\r\n\r\n```java\r\n@Bean\r\npublic StreamsBuilderFactoryBeanCustomizer customizer(\r\n    GenericApplicationContext applicationContext) {\r\n\r\n    return fb -&gt; {\r\n        try {\r\n            final StreamsBuilder streamsBuilder = fb.getObject();\r\n            streamsBuilder.addGlobalStore(...);\r\n            applicationContext.registerBean(\r\n                MY_BEAN_NAME, KafkaStreams.class, fb::getKafkaStreams);\r\n        }\r\n        catch (Exception e) { ... }\r\n    };\r\n}\r\n```\r\n\r\nAnd then later in my Scheduled task retrieve the KafkaStreams Bean from the ApplicationContext\r\n\r\n```java\r\n@Scheduled\r\npublic void myTask() {\r\n  var ks = ((KafkaStreams) applicationContext.getBean(MY_BEAN_NAME));\r\n    var myGKT =\r\n        ks.store(\r\n            StoreQueryParameters.fromNameAndType(\r\n                MY_STORE_NAME, QueryableStoreTypes.keyValueStore()));\r\n```\r\n\r\nThis seems very round-about. How are you intended to access a GKT in the latest version of Kafka Streams Binder?\r\n\r\n  [1]: https://stackoverflow.com/questions/77019792/globalktable-as-queryablestore-with-kafka-streams-binder","title":"Kafka Streams Binder: Accessing a Global State Store","body":"<p>Related to <a href=\"https://stackoverflow.com/questions/77019792/globalktable-as-queryablestore-with-kafka-streams-binder\">this question</a>:\nI'm using <code>spring-boot-starter-parent</code> version <code>3.1.2</code> and <code>spring-cloud-stream-binder-kafka-streams</code> version <code>4.0.3</code></p>\n<p>I've created a GlobalKTable in with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic StreamsBuilderFactoryBeanCustomizer customizer() {\n    return fb -&gt; {\n        try {\n            final StreamsBuilder streamsBuilder = fb.getObject();\n            streamsBuilder.addGlobalStore(...);\n        }\n        catch (Exception e) { ... }\n    };\n}\n</code></pre>\n<p>However I need to access this GKT from a scheduled task (outside of my binder stream functions). Trying to access the store with the InteractiveQueryService throws an <code>UnknownStateStoreException</code>.</p>\n<p>The only way I've found to do this is to manually register the KafkaStream object as a Bean :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic StreamsBuilderFactoryBeanCustomizer customizer(\n    GenericApplicationContext applicationContext) {\n\n    return fb -&gt; {\n        try {\n            final StreamsBuilder streamsBuilder = fb.getObject();\n            streamsBuilder.addGlobalStore(...);\n            applicationContext.registerBean(\n                MY_BEAN_NAME, KafkaStreams.class, fb::getKafkaStreams);\n        }\n        catch (Exception e) { ... }\n    };\n}\n</code></pre>\n<p>And then later in my Scheduled task retrieve the KafkaStreams Bean from the ApplicationContext</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled\npublic void myTask() {\n  var ks = ((KafkaStreams) applicationContext.getBean(MY_BEAN_NAME));\n    var myGKT =\n        ks.store(\n            StoreQueryParameters.fromNameAndType(\n                MY_STORE_NAME, QueryableStoreTypes.keyValueStore()));\n</code></pre>\n<p>This seems very round-about. How are you intended to access a GKT in the latest version of Kafka Streams Binder?</p>\n"},{"tags":["java","maven","spring-mvc","pom.xml","packaging"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1694532213,"post_id":77090539,"comment_id":135901940,"body_markdown":"Please, do not post snapshots of code and read https://stackoverflow.com/help/how-to-ask","body":"Please, do not post snapshots of code and read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":29423965,"reputation":1,"user_id":22545139,"display_name":"Koustav Chakraborty"},"score":0,"creation_date":1694534121,"post_id":77090539,"comment_id":135902357,"body_markdown":"@Pino when adding the code (pom.xml) it was giving error as if it&#39;s a spam.","body":"@Pino when adding the code (pom.xml) it was giving error as if it&#39;s a spam."}],"owner":{"account_id":29423965,"reputation":1,"user_id":22545139,"display_name":"Koustav Chakraborty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694531958,"creation_date":1694531958,"question_id":77090539,"body_markdown":"I have a Java Spring MVC project. The pom.xml looks like below:\r\n\r\n[pom.xml snapshot](https://i.stack.imgur.com/7ECh8.png)\r\n\r\nIt is giving error at the line: \\&lt;packaging\\&gt;war\\&lt;/packaging\\&gt; as below:\r\n*There are no more files (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)*\r\n\r\nMay I know how can I fix this error? I have never faced this error before.\r\n\r\n[Error Snapshot](https://i.stack.imgur.com/Hrg0M.png)\r\n\r\nI have tried cleaning, Maven update etc. but with no luck.\r\n\r\nWithout this error fixed, I am unable to build my project.","title":"Why am I getting &quot;There are no more files&quot; error in the line &quot;&lt;packaging&gt;war&lt;/packaging&gt;&quot; of my pom.xml?","body":"<p>I have a Java Spring MVC project. The pom.xml looks like below:</p>\n<p><a href=\"https://i.stack.imgur.com/7ECh8.png\" rel=\"nofollow noreferrer\">pom.xml snapshot</a></p>\n<p>It is giving error at the line: &lt;packaging&gt;war&lt;/packaging&gt; as below:\n<em>There are no more files (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)</em></p>\n<p>May I know how can I fix this error? I have never faced this error before.</p>\n<p><a href=\"https://i.stack.imgur.com/Hrg0M.png\" rel=\"nofollow noreferrer\">Error Snapshot</a></p>\n<p>I have tried cleaning, Maven update etc. but with no luck.</p>\n<p>Without this error fixed, I am unable to build my project.</p>\n"},{"tags":["java","hibernate","database-migration","liquibase","flyway"],"answers":[{"tags":[],"owner":{"account_id":1291748,"reputation":437,"user_id":1243722,"accept_rate":83,"display_name":"tfecw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509029779,"creation_date":1509029779,"answer_id":46957613,"question_id":46956753,"body_markdown":"Let&#39;s break it down a little bit. You&#39;re right in that this is largely opinion based, but here&#39;s what I&#39;ve noticed in my experiences. \r\n\r\n&gt; Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?\r\n\r\nYou can do data migration with liquibase and flyway. It&#39;s something I&#39;ve done pretty often.  Take the example where I want to split a User table into User and Address tables. I&#39;d write a migration script, which is basically just a sql file, to create the new Address table and the copy all the relevant data into it.  \r\n\r\n&gt;in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?\r\n\r\nPossibly, flyway and liquibase are better thought of as database versioning tools. If my app needs version 10 of the database, these tools would help me get to that point.  Again, the migration scripts are just basic .sql files. If you&#39;re using some mysql specific functions then those will just go in the migration script and they wouldn&#39;t work on a sql server\r\n\r\n&gt; by and large, the problem of database independent data migration remains unresolved in enterprise Java?\r\n\r\nEh, I&#39;m not sure about this one. I agree its a problem, but in practice it&#39;s not a huge one. For the past 8+ years, I&#39;ve only written ansi sql. It should be portable everywhere.  So in theory, we can lift those applications on to a different database.  JPA and the various implementations help with those differences.  Depending on how your project was built, say an application that has all of its business logic in implementation specific sql functions, then it&#39;s going to be a headache.  If you&#39;re using the database for CRUD, and I&#39;d argue that&#39;s all you should be using it for, then it&#39;s not a huge deal. \r\n\r\nSo all that said, I think you might have the wrong idea about flyway and liquibase. Like i said earlier, they aren&#39;t really &#39;migration tools&#39; so much as they are database versioning tools.  With a list of specific sql migration scripts that are ordered, i can guarantee the state of my database at any version.  I&#39;m not sure these are tools that I&#39;d use to &#39;migrate&#39; a legacy SQL Server based application into a PostGres based application.  ","title":"database independent data migration","body":"<p>Let's break it down a little bit. You're right in that this is largely opinion based, but here's what I've noticed in my experiences. </p>\n\n<blockquote>\n  <p>Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?</p>\n</blockquote>\n\n<p>You can do data migration with liquibase and flyway. It's something I've done pretty often.  Take the example where I want to split a User table into User and Address tables. I'd write a migration script, which is basically just a sql file, to create the new Address table and the copy all the relevant data into it.  </p>\n\n<blockquote>\n  <p>in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?</p>\n</blockquote>\n\n<p>Possibly, flyway and liquibase are better thought of as database versioning tools. If my app needs version 10 of the database, these tools would help me get to that point.  Again, the migration scripts are just basic .sql files. If you're using some mysql specific functions then those will just go in the migration script and they wouldn't work on a sql server</p>\n\n<blockquote>\n  <p>by and large, the problem of database independent data migration remains unresolved in enterprise Java?</p>\n</blockquote>\n\n<p>Eh, I'm not sure about this one. I agree its a problem, but in practice it's not a huge one. For the past 8+ years, I've only written ansi sql. It should be portable everywhere.  So in theory, we can lift those applications on to a different database.  JPA and the various implementations help with those differences.  Depending on how your project was built, say an application that has all of its business logic in implementation specific sql functions, then it's going to be a headache.  If you're using the database for CRUD, and I'd argue that's all you should be using it for, then it's not a huge deal. </p>\n\n<p>So all that said, I think you might have the wrong idea about flyway and liquibase. Like i said earlier, they aren't really 'migration tools' so much as they are database versioning tools.  With a list of specific sql migration scripts that are ordered, i can guarantee the state of my database at any version.  I'm not sure these are tools that I'd use to 'migrate' a legacy SQL Server based application into a PostGres based application.  </p>\n"}],"owner":{"account_id":1327380,"reputation":1768,"user_id":1271937,"accept_rate":75,"display_name":"Oliver Jan Krylow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2564,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1694540092,"answer_count":1,"score":8,"last_activity_date":1694531658,"creation_date":1509027406,"question_id":46956753,"body_markdown":"My goal is to enable schema and data migration for an existing application.\r\n\r\nThis kind of question seems to have been asked many times, however with different requirements and circumstances as mine, I think.\r\n\r\nSince I am inexperienced in this domain, allow me to lay out the architecture of the app and my assumptions first.\r\n\r\n## Architecture\r\n\r\nThe app is a multi-user, enterprise desktop application with a backend server that can persist to any major DB (MySql, Postgresql, SQL Server, Oracle DB, etc). It is assumed the DB is on-premise and maintained by our clients.\r\n\r\nThe tech stack used is a fairly common Hibernate+Spring+RMI/JMS-Combo.\r\n\r\nCurrently, migrations are done by the server in the following way:\r\n\r\n* On server start it checks for the latest expected schema version\r\n* If larger than the current version, start migration to next version until current==latest:\r\n  1. Create new database\r\n  1. Load (whole) latest schema (SQL script with a lot of `CREATE TABLE ...`)\r\n  1. Migrate data (in Java classes using 2 JDBC-Connections to old and new schema)\r\n  1. Load (all) latest constraints (SQL script with a lot of `ALTER TABLE ...`)\r\n  \r\n\r\nThis migration is slow and forward-only. But it is simple. The problem is, that until now the schema scripts and the queries in the data migrations have been using MySQL-syntax and features.\r\n\r\nNote that by __migrate data__ I mean: the backend server copies the data from the old schema to the new one, transforming it if necessary.\r\nAlso, the migration process starts automatically on-premise of our clients. Meaning, we only have control over the JDBC connection, but no direct access to the database nor knowledge about the specific database being used (MySQL, SQL Server,...).\r\n\r\nThe goal is to either replace or augment this migration scheme with a database independent one.\r\n\r\n## Assumptions and research\r\n\r\nStackOverflow [1][1] [2][2] [3][3] [4][4] [5][5] [6][6] [7][7]: Answers state to use Hibernate&#39;s inbuilt feature. However, the docs state that this is not [production ready](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production). Also, AFAICT, all answers are concerned with **schema migration only**.\r\n\r\n[1]: https://stackoverflow.com/questions/24229529/managing-database-schemas-during-the-lifecycle-of-an-application-using-flyway-to\r\n[2]: https://stackoverflow.com/questions/131020/migrations-for-java\r\n[3]: https://stackoverflow.com/questions/10664553/flyway-liquibase-for-database-structure-and-dbunit-for-database-inserts\r\n[4]: https://stackoverflow.com/questions/1142447/db-migrate-hibernate-jpa-hbm2ddl-diff-tools?rq=1\r\n[5]: https://stackoverflow.com/questions/14482644/can-flyway-or-liquibase-generate-an-update-script-instead-of-updating-the-databa?rq=1\r\n[6]: https://stackoverflow.com/questions/37385823/liquibase-vs-flyway-which-one-to-use?rq=1\r\n[7]: https://stackoverflow.com/questions/16721166/how-does-flyway-liquibase-handle-destructive-upgrades-in-service?rq=1\r\n\r\n[Liquibase](http://www.liquibase.org/index.html): Uses a custom DSL (in XML/JSON/YAML/etc) to allow for database independent **schema migration only**.\r\n\r\n[DBUnit](http://dbunit.sourceforge.net/): Uses custom XML-DSL to capture snapshots of states of databases. **Can not recreate a snapshot of schema version 1 to version 2**.\r\n\r\n[flyway](https://flywaydb.org/documentation/): In principle same as Liquibase. But **is not database independent** because SQL-Scripts are used for migrations.\r\n\r\n[JOOQ](http://www.jooq.org/): A database independent Query-DSL in Java on top of JDBC. Comparable to Criteria API but without the drawbacks of JPA. Should in principle allow for database independent data migration, however, does **not** help with **schema migration**.\r\n\r\nJPA-Query languages like HQL, JPQL, Criteria API are not sufficient because\r\n\r\n1. One cannot reference tables not mapped by the entity manager. E.g. join tables, metadata and audit tables.\r\n2. A copy of all versions of the Entity classes needs to be kept around for the mapping.\r\n\r\n## Question\r\n\r\nI realize, that as this question stands now, it will be dismissed as opinion-based.\r\n\r\nHowever, I am not necessarily looking for specific solutions to this problem ( I doubt there exists a clear solution for such a complex problem space ) but rather to validate my assumptions.\r\n\r\nNamely, is it true, that\r\n\r\n* Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?\r\n* in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?\r\n* by and large, the problem of __database independent data migration__ remains unresolved in enterprise Java?\r\n\r\nEven if I was to combine Liquibase/Flyway with JOOQ, I do not see how to perform a data migration, because Liquibase/Flyway migrate databases __in place__. The old database gets destroyed and with it the opportunity to transform the old data to the new schema.\r\n\r\nThanks for your attention!\r\n","title":"database independent data migration","body":"<p>My goal is to enable schema and data migration for an existing application.</p>\n\n<p>This kind of question seems to have been asked many times, however with different requirements and circumstances as mine, I think.</p>\n\n<p>Since I am inexperienced in this domain, allow me to lay out the architecture of the app and my assumptions first.</p>\n\n<h2>Architecture</h2>\n\n<p>The app is a multi-user, enterprise desktop application with a backend server that can persist to any major DB (MySql, Postgresql, SQL Server, Oracle DB, etc). It is assumed the DB is on-premise and maintained by our clients.</p>\n\n<p>The tech stack used is a fairly common Hibernate+Spring+RMI/JMS-Combo.</p>\n\n<p>Currently, migrations are done by the server in the following way:</p>\n\n<ul>\n<li>On server start it checks for the latest expected schema version</li>\n<li>If larger than the current version, start migration to next version until current==latest:\n\n<ol>\n<li>Create new database</li>\n<li>Load (whole) latest schema (SQL script with a lot of <code>CREATE TABLE ...</code>)</li>\n<li>Migrate data (in Java classes using 2 JDBC-Connections to old and new schema)</li>\n<li>Load (all) latest constraints (SQL script with a lot of <code>ALTER TABLE ...</code>)</li>\n</ol></li>\n</ul>\n\n<p>This migration is slow and forward-only. But it is simple. The problem is, that until now the schema scripts and the queries in the data migrations have been using MySQL-syntax and features.</p>\n\n<p>Note that by <strong>migrate data</strong> I mean: the backend server copies the data from the old schema to the new one, transforming it if necessary.\nAlso, the migration process starts automatically on-premise of our clients. Meaning, we only have control over the JDBC connection, but no direct access to the database nor knowledge about the specific database being used (MySQL, SQL Server,...).</p>\n\n<p>The goal is to either replace or augment this migration scheme with a database independent one.</p>\n\n<h2>Assumptions and research</h2>\n\n<p>StackOverflow <a href=\"https://stackoverflow.com/questions/24229529/managing-database-schemas-during-the-lifecycle-of-an-application-using-flyway-to\">1</a> <a href=\"https://stackoverflow.com/questions/131020/migrations-for-java\">2</a> <a href=\"https://stackoverflow.com/questions/10664553/flyway-liquibase-for-database-structure-and-dbunit-for-database-inserts\">3</a> <a href=\"https://stackoverflow.com/questions/1142447/db-migrate-hibernate-jpa-hbm2ddl-diff-tools?rq=1\">4</a> <a href=\"https://stackoverflow.com/questions/14482644/can-flyway-or-liquibase-generate-an-update-script-instead-of-updating-the-databa?rq=1\">5</a> <a href=\"https://stackoverflow.com/questions/37385823/liquibase-vs-flyway-which-one-to-use?rq=1\">6</a> <a href=\"https://stackoverflow.com/questions/16721166/how-does-flyway-liquibase-handle-destructive-upgrades-in-service?rq=1\">7</a>: Answers state to use Hibernate's inbuilt feature. However, the docs state that this is not <a href=\"https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production\">production ready</a>. Also, AFAICT, all answers are concerned with <strong>schema migration only</strong>.</p>\n\n<p><a href=\"http://www.liquibase.org/index.html\" rel=\"noreferrer\">Liquibase</a>: Uses a custom DSL (in XML/JSON/YAML/etc) to allow for database independent <strong>schema migration only</strong>.</p>\n\n<p><a href=\"http://dbunit.sourceforge.net/\" rel=\"noreferrer\">DBUnit</a>: Uses custom XML-DSL to capture snapshots of states of databases. <strong>Can not recreate a snapshot of schema version 1 to version 2</strong>.</p>\n\n<p><a href=\"https://flywaydb.org/documentation/\" rel=\"noreferrer\">flyway</a>: In principle same as Liquibase. But <strong>is not database independent</strong> because SQL-Scripts are used for migrations.</p>\n\n<p><a href=\"http://www.jooq.org/\" rel=\"noreferrer\">JOOQ</a>: A database independent Query-DSL in Java on top of JDBC. Comparable to Criteria API but without the drawbacks of JPA. Should in principle allow for database independent data migration, however, does <strong>not</strong> help with <strong>schema migration</strong>.</p>\n\n<p>JPA-Query languages like HQL, JPQL, Criteria API are not sufficient because</p>\n\n<ol>\n<li>One cannot reference tables not mapped by the entity manager. E.g. join tables, metadata and audit tables.</li>\n<li>A copy of all versions of the Entity classes needs to be kept around for the mapping.</li>\n</ol>\n\n<h2>Question</h2>\n\n<p>I realize, that as this question stands now, it will be dismissed as opinion-based.</p>\n\n<p>However, I am not necessarily looking for specific solutions to this problem ( I doubt there exists a clear solution for such a complex problem space ) but rather to validate my assumptions.</p>\n\n<p>Namely, is it true, that</p>\n\n<ul>\n<li>Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?</li>\n<li>in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?</li>\n<li>by and large, the problem of <strong>database independent data migration</strong> remains unresolved in enterprise Java?</li>\n</ul>\n\n<p>Even if I was to combine Liquibase/Flyway with JOOQ, I do not see how to perform a data migration, because Liquibase/Flyway migrate databases <strong>in place</strong>. The old database gets destroyed and with it the opportunity to transform the old data to the new schema.</p>\n\n<p>Thanks for your attention!</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1694527265,"post_id":77089837,"comment_id":135900718,"body_markdown":"Can&#39;t be done.  You can create a parent project, the same way that spring-boot-starter-parent works, but it&#39;ll still have to bring in all the necessary dependencies.  There is no free lunch here.","body":"Can&#39;t be done.  You can create a parent project, the same way that spring-boot-starter-parent works, but it&#39;ll still have to bring in all the necessary dependencies.  There is no free lunch here."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694527337,"post_id":77089837,"comment_id":135900740,"body_markdown":"But the 3 projects will still be under this parent and can&#39;t be deployed separately correct?","body":"But the 3 projects will still be under this parent and can&#39;t be deployed separately correct?"},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694527396,"post_id":77089837,"comment_id":135900755,"body_markdown":"The 3 projects are independent and don&#39;t want to put them under one parent project that requires to deploy every time the three modules","body":"The 3 projects are independent and don&#39;t want to put them under one parent project that requires to deploy every time the three modules"},{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1694527456,"post_id":77089837,"comment_id":135900763,"body_markdown":"No free lunch.  I can&#39;t help you.  Disk storage is cheap and plentiful.  The size of your WAR file shouldn&#39;t be a concern.  You&#39;re obsessed with the wrong problem.","body":"No free lunch.  I can&#39;t help you.  Disk storage is cheap and plentiful.  The size of your WAR file shouldn&#39;t be a concern.  You&#39;re obsessed with the wrong problem."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694530363,"post_id":77089837,"comment_id":135901474,"body_markdown":"Sure you can. If you run all applications on the same Tomcat instance, you can add those libraries to Tomcat itself, and they can be made available to the applications. Other application servers might have similar features.","body":"Sure you can. If you run all applications on the same Tomcat instance, you can add those libraries to Tomcat itself, and they can be made available to the applications. Other application servers might have similar features."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694530957,"post_id":77089837,"comment_id":135901635,"body_markdown":"@Jorn You could indeed add them to the server path introducing a whole new slew of issues with classloaders, class loading, singletons etc. etc. I&#39;m glad we moved away from that era.","body":"@Jorn You could indeed add them to the server path introducing a whole new slew of issues with classloaders, class loading, singletons etc. etc. I&#39;m glad we moved away from that era."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694531028,"post_id":77089837,"comment_id":135901656,"body_markdown":"@M.Deinum I didn&#39;t say it was a good idea. But it&#39;s an answer to the question, and proves that the &quot;no&quot; everyone else is giving just isn&#39;t true.","body":"@M.Deinum I didn&#39;t say it was a good idea. But it&#39;s an answer to the question, and proves that the &quot;no&quot; everyone else is giving just isn&#39;t true."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694540380,"post_id":77089837,"comment_id":135903608,"body_markdown":"@Jorn what about the build of the project itself? if I remove these dependencies from the project it will have errors and will give errors while trying to generate the war","body":"@Jorn what about the build of the project itself? if I remove these dependencies from the project it will have errors and will give errors while trying to generate the war"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694551796,"post_id":77089837,"comment_id":135905631,"body_markdown":"Correct, you will need those deps while developing. There&#39;s no changing that.","body":"Correct, you will need those deps while developing. There&#39;s no changing that."}],"answers":[{"tags":[],"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694528810,"creation_date":1694527696,"answer_id":77089913,"question_id":77089837,"body_markdown":"The only dirty trick that I can guess is:\r\n\r\n1. Encapsulate the common logic into libraries.\r\n2. Put them on a shared server folder.\r\n3. Add that folder to each application classpath (reference them in maven by the `system` scope).\r\n","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>The only dirty trick that I can guess is:</p>\n<ol>\n<li>Encapsulate the common logic into libraries.</li>\n<li>Put them on a shared server folder.</li>\n<li>Add that folder to each application classpath (reference them in maven by the <code>system</code> scope).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694531523,"creation_date":1694531523,"answer_id":77090484,"question_id":77089837,"body_markdown":"You can use the [Spring Boot Thin Launcher][1]. With it you can create a jar that will only contain your application classes. When started, the first time it will download the needed dependencies into a directory and add them to the classpath. \r\n\r\nNow when you have multiple applications which run on the same server they could re-use the same repository for the jars, which would download them only once. \r\n\r\n**NOTE:** This is an experimental feature so YMMV. \r\n\r\n**NOTE2:** Generally the size of the archive shouldn&#39;t matter, as disk-space is cheap nowadays. Focussing on other parts for optimizing developer experience will have a better ROI then this (probably). \r\n\r\n[1]: https://github.com/spring-projects-experimental/spring-boot-thin-launcher","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>You can use the <a href=\"https://github.com/spring-projects-experimental/spring-boot-thin-launcher\" rel=\"nofollow noreferrer\">Spring Boot Thin Launcher</a>. With it you can create a jar that will only contain your application classes. When started, the first time it will download the needed dependencies into a directory and add them to the classpath.</p>\n<p>Now when you have multiple applications which run on the same server they could re-use the same repository for the jars, which would download them only once.</p>\n<p><strong>NOTE:</strong> This is an experimental feature so YMMV.</p>\n<p><strong>NOTE2:</strong> Generally the size of the archive shouldn't matter, as disk-space is cheap nowadays. Focussing on other parts for optimizing developer experience will have a better ROI then this (probably).</p>\n"}],"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694531523,"creation_date":1694527146,"question_id":77089837,"body_markdown":"If I have 3 independent separate spring boot projects and they all have many common dependencies which leads to large size of each war.\r\n\r\nIs there a method to make another separate project that has all these common dependencies and the projects points to this project without making it a jar as this will still make the size large of each war?","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>If I have 3 independent separate spring boot projects and they all have many common dependencies which leads to large size of each war.</p>\n<p>Is there a method to make another separate project that has all these common dependencies and the projects points to this project without making it a jar as this will still make the size large of each war?</p>\n"},{"tags":["java","intellij-idea","getter-setter"],"answers":[{"tags":[],"owner":{"account_id":69502,"reputation":4999,"user_id":202160,"display_name":"Noel Ang"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1259003207,"creation_date":1259003207,"answer_id":1785287,"question_id":1785244,"body_markdown":"You didn&#39;t mention what version of IDEA you are using, so I assume the recent 8 or 9.\r\n\r\nCheck your Code Style settings, under &quot;Alignment and Braces&quot;. You should find a &quot;Simple methods in one line&quot; option there.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>You didn't mention what version of IDEA you are using, so I assume the recent 8 or 9.</p>\n\n<p>Check your Code Style settings, under \"Alignment and Braces\". You should find a \"Simple methods in one line\" option there.</p>\n"},{"tags":[],"owner":{"account_id":59883,"reputation":9527,"user_id":179057,"accept_rate":100,"display_name":"David Robles"},"down_vote_count":2,"up_vote_count":13,"is_accepted":true,"score":11,"last_activity_date":1405681330,"creation_date":1259003835,"answer_id":1785341,"question_id":1785244,"body_markdown":"There are no templates neither for getters nor for equals/hashcode. These are hardcoded in IDEA.\r\n\r\n[Source][1]\r\n\r\nYou can see that in this [IntelliJ Wishlist][2]\r\n\r\n\r\n  [1]: http://www.jetbrains.net/devnet/thread/182697;jsessionid=1FC4A4DFB95610F09D114E0A6F2C5CE5\r\n  [2]: http://plugins.intellij.net/wishlist/show?pr=&amp;wid=99","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>There are no templates neither for getters nor for equals/hashcode. These are hardcoded in IDEA.</p>\n\n<p><a href=\"http://www.jetbrains.net/devnet/thread/182697;jsessionid=1FC4A4DFB95610F09D114E0A6F2C5CE5\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>You can see that in this <a href=\"http://plugins.intellij.net/wishlist/show?pr=&amp;wid=99\" rel=\"nofollow noreferrer\">IntelliJ Wishlist</a></p>\n"},{"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1260531000,"creation_date":1260531000,"answer_id":1887457,"question_id":1785244,"body_markdown":"I don&#39;t know why you want to do this, presumably for saving visual space. If so, just use IntelliJ&#39;s feature to fold trivial getters/setters and forget about how lines does it take.\r\nFolding feature can be found in  \r\n\r\nSettings -&gt; IDE Settings -&gt; Editor -&gt; Code Folding -&gt; Show code folding outline -&gt; Simple property accessors","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>I don't know why you want to do this, presumably for saving visual space. If so, just use IntelliJ's feature to fold trivial getters/setters and forget about how lines does it take.\nFolding feature can be found in  </p>\n\n<p>Settings -> IDE Settings -> Editor -> Code Folding -> Show code folding outline -> Simple property accessors</p>\n"},{"tags":[],"owner":{"account_id":360167,"reputation":728,"user_id":702010,"display_name":"Alex G"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1484557240,"creation_date":1427818330,"answer_id":29373366,"question_id":1785244,"body_markdown":"I&#39;m using IntelliJ IDEA 14.1.0 and you can customise this behaviour.\r\n\r\nJust use the &quot;Generate...&quot; option, or use &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Insert&lt;/kbd&gt; shortcut, and select &quot;Getter and Setter&quot;.\r\n\r\nIn the &quot;Select Fields&quot; window that gets opened, you have the &quot;Getter Template&quot; option at the top. Use the &quot;...&quot; button next to the dropdown, to edit the template.\r\n\r\nSelect &quot;IntelliJ Default&quot; and click the &quot;Copy&quot; button to create a new one named &quot;AlwayStartWithGet&quot;, which you can edit.\r\n\r\nJust remove the following section:\r\n\r\n    #if ($field.boolean)\r\n      #if ($StringUtil.startsWithIgnoreCase($name, &#39;is&#39;))\r\n        #set($name = $StringUtil.decapitalize($name))\r\n      #else\r\n        is##\r\n    #end\r\n    #else\r\n      get##\r\n    #end\r\n\r\nAnd replace it with a simple\r\n\r\n    get##\r\n\r\nYou should be left with:\r\n\r\n    public ##\r\n    #if($field.modifierStatic)\r\n      static ##\r\n    #end\r\n    $field.type ##\r\n    #set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n    get##\r\n    ${name}() {\r\n      return $field.name;\r\n    }\r\n\r\nNow you can use the custom template when generating code, by selecting it in the getter template dropdown.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>I'm using IntelliJ IDEA 14.1.0 and you can customise this behaviour.</p>\n\n<p>Just use the \"Generate...\" option, or use <kbd>Alt</kbd>+<kbd>Insert</kbd> shortcut, and select \"Getter and Setter\".</p>\n\n<p>In the \"Select Fields\" window that gets opened, you have the \"Getter Template\" option at the top. Use the \"...\" button next to the dropdown, to edit the template.</p>\n\n<p>Select \"IntelliJ Default\" and click the \"Copy\" button to create a new one named \"AlwayStartWithGet\", which you can edit.</p>\n\n<p>Just remove the following section:</p>\n\n<pre><code>#if ($field.boolean)\n  #if ($StringUtil.startsWithIgnoreCase($name, 'is'))\n    #set($name = $StringUtil.decapitalize($name))\n  #else\n    is##\n#end\n#else\n  get##\n#end\n</code></pre>\n\n<p>And replace it with a simple</p>\n\n<pre><code>get##\n</code></pre>\n\n<p>You should be left with:</p>\n\n<pre><code>public ##\n#if($field.modifierStatic)\n  static ##\n#end\n$field.type ##\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\nget##\n${name}() {\n  return $field.name;\n}\n</code></pre>\n\n<p>Now you can use the custom template when generating code, by selecting it in the getter template dropdown.</p>\n"},{"tags":[],"owner":{"account_id":1360311,"reputation":16577,"user_id":1297812,"display_name":"laffuste"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1510021482,"creation_date":1499240409,"answer_id":44919886,"question_id":1785244,"body_markdown":"For Idea 2016.\r\n\r\n\r\n**Getter template**\r\n\r\nMerge the last 3 lines into a single line:\r\n\r\n    ${name}() { return $field.name; }\r\n\r\n\r\n**Setter template**\r\n\r\nAdd double hash (without a space) at the end of the longest line:\r\n\r\n    [...] ($field.type, $paramName) {##\r\n\r\nMerge the last 2 lines into a single line:\r\n\r\n    $field.name = $paramName; }\r\n\r\n*Note: as commented by @mindas, you will probably want instead the visual auto folding that doesn&#39;t get versioned.*","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>For Idea 2016.</p>\n\n<p><strong>Getter template</strong></p>\n\n<p>Merge the last 3 lines into a single line:</p>\n\n<pre><code>${name}() { return $field.name; }\n</code></pre>\n\n<p><strong>Setter template</strong></p>\n\n<p>Add double hash (without a space) at the end of the longest line:</p>\n\n<pre><code>[...] ($field.type, $paramName) {##\n</code></pre>\n\n<p>Merge the last 2 lines into a single line:</p>\n\n<pre><code>$field.name = $paramName; }\n</code></pre>\n\n<p><em>Note: as commented by @mindas, you will probably want instead the visual auto folding that doesn't get versioned.</em></p>\n"},{"tags":[],"owner":{"account_id":2313596,"reputation":1534,"user_id":2031150,"accept_rate":92,"display_name":"Jack J"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645467011,"creation_date":1563853243,"answer_id":57156375,"question_id":1785244,"body_markdown":"Alex G and laffuste provided answers that helped me, but even after you follow these instructions, IntelliJ may still automatically format your code.  To stop this from happening, go to Settings -&gt; Editor -&gt; Code Style -&gt; Java (or other language).  Click on the tab titled &quot;Wrapping and Braces&quot;.  Under the title &quot;Keep when reformatting&quot; click the checkbox next to &quot;Simple methods in one line&quot;.\r\n\r\nFor further brevity, you can eliminate the blank lines between the getter and setter methods.  To do this, click on the tab titled &quot;Blank Lines&quot;.  In the section titled &quot;Minimum Blank Lines&quot;, find the text box next to &quot;Around method&quot;.  Enter 0 in the text box.\r\n\r\n&lt;h3&gt;Get&lt;/h3&gt;\r\n\r\n    public ##\r\n    #if($field.modifierStatic)\r\n    static ##\r\n    #end\r\n    $field.type ##\r\n    #set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n    get##\r\n    ${name}(){ return $field.name; }\r\n&lt;h3&gt;Set&lt;/h3&gt;\r\n\r\n    #set($paramName = $helper.getParamName($field, $project))\r\n    #if($field.modifierStatic)\r\n    static ##\r\n    #end\r\n    void set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) { ##\r\n    #if ($field.name == $paramName)\r\n        #if (!$field.modifierStatic)\r\n        this.##\r\n        #else\r\n            $classname.##\r\n        #end\r\n    #end\r\n    $field.name = $paramName; }","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>Alex G and laffuste provided answers that helped me, but even after you follow these instructions, IntelliJ may still automatically format your code.  To stop this from happening, go to Settings -&gt; Editor -&gt; Code Style -&gt; Java (or other language).  Click on the tab titled &quot;Wrapping and Braces&quot;.  Under the title &quot;Keep when reformatting&quot; click the checkbox next to &quot;Simple methods in one line&quot;.</p>\n<p>For further brevity, you can eliminate the blank lines between the getter and setter methods.  To do this, click on the tab titled &quot;Blank Lines&quot;.  In the section titled &quot;Minimum Blank Lines&quot;, find the text box next to &quot;Around method&quot;.  Enter 0 in the text box.</p>\n<h3>Get</h3>\n<pre><code>public ##\n#if($field.modifierStatic)\nstatic ##\n#end\n$field.type ##\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\nget##\n${name}(){ return $field.name; }\n</code></pre>\n<h3>Set</h3>\n<pre><code>#set($paramName = $helper.getParamName($field, $project))\n#if($field.modifierStatic)\nstatic ##\n#end\nvoid set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) { ##\n#if ($field.name == $paramName)\n    #if (!$field.modifierStatic)\n    this.##\n    #else\n        $classname.##\n    #end\n#end\n$field.name = $paramName; }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954938,"reputation":491,"user_id":980423,"display_name":"aradil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694531328,"creation_date":1694531328,"answer_id":77090456,"question_id":1785244,"body_markdown":"Update for at least versions as new as 2023.1.2:\r\n\r\nYou&#39;ll need to also make sure that the following setting is also turned on:\r\n\r\n* Preferences &gt; Editor &gt; Code Style &gt; Java &gt; Spaces &gt; Within\r\n \t* Code Braces\r\n\r\nOtherwise the spaces between your curly braces will be formatted away.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>Update for at least versions as new as 2023.1.2:</p>\n<p>You'll need to also make sure that the following setting is also turned on:</p>\n<ul>\n<li>Preferences &gt; Editor &gt; Code Style &gt; Java &gt; Spaces &gt; Within\n<ul>\n<li>Code Braces</li>\n</ul>\n</li>\n</ul>\n<p>Otherwise the spaces between your curly braces will be formatted away.</p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21901,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":1785341,"answer_count":7,"score":35,"last_activity_date":1694531328,"creation_date":1259002750,"question_id":1785244,"body_markdown":"How can you get [IntelliJ][1] to generate getter/setters accessor methods on one line like this:\r\n\r\n    public String getAbc() { return abc; }\r\n\r\n instead of multiple lines like this:\r\n\r\n    public String getAbc() {\r\n       return abc;\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>How can you get <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"noreferrer\">IntelliJ</a> to generate getter/setters accessor methods on one line like this:</p>\n\n<pre><code>public String getAbc() { return abc; }\n</code></pre>\n\n<p> instead of multiple lines like this:</p>\n\n<pre><code>public String getAbc() {\n   return abc;\n}\n</code></pre>\n"},{"tags":["java","osgi","websphere-liberty","osgi-bundle","open-liberty"],"comments":[{"owner":{"account_id":13889153,"reputation":465,"user_id":10027577,"display_name":"KyleAure"},"score":1,"creation_date":1694529601,"post_id":77089936,"comment_id":135901286,"body_markdown":"If your feature is trying to perform a lookup by JNDI name of the DataSource prior to application server start using OSGi I do not think this will work as you cannot guarantee that the JNDI and JDBC features have been fully started.  Internally, Liberty does this by using a ResourceFactory https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.resource/src/com/ibm/wsspi/resource/ResourceFactory.java but I don&#39;t know exactly how it works.","body":"If your feature is trying to perform a lookup by JNDI name of the DataSource prior to application server start using OSGi I do not think this will work as you cannot guarantee that the JNDI and JDBC features have been fully started.  Internally, Liberty does this by using a ResourceFactory <a href=\"https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.resource/src/com/ibm/wsspi/resource/ResourceFactory.java\" rel=\"nofollow noreferrer\">github.com/OpenLiberty/open-liberty/blob/integration/dev/&hellip;</a> but I don&#39;t know exactly how it works."}],"answers":[{"tags":[],"owner":{"account_id":7622322,"reputation":3444,"user_id":5780020,"display_name":"njr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694531316,"creation_date":1694531316,"answer_id":77090454,"question_id":77089936,"body_markdown":"Yes, it&#39;s possible, but there is some complexity to it. The `dataSource` element isn&#39;t actually a DataSource. It&#39;s a [ResourceFactory][1] for creating a data source based on a resource reference. In Liberty, configuration usually references other configuration by its `id`, so more typical configuration that follows conventions of other config elements would look like this:\r\n\r\n```\r\n&lt;myJdbcRegistry dataSourceRef=&quot;my-dataSource&quot;/&gt;\r\n```\r\n\r\nHere&#39;s an example from Liberty code itself where another configuration element requires a dataSource and references it by id,\r\n\r\n[Metatype:][2]\r\n```\r\n  &lt;AD id=&quot;dataSourceRef&quot;                     type=&quot;String&quot;  default=&quot;DefaultDataSource&quot; ibm:type=&quot;pid&quot; ibm:reference=&quot;com.ibm.ws.jdbc.dataSource&quot; name=&quot;%dataSource&quot; description=&quot;%dataSoure.desc&quot;/&gt;\r\n  &lt;AD id=&quot;DataSourceFactory.target&quot;          type=&quot;String&quot;  default=&quot;(service.pid=${dataSourceRef})&quot; ibm:final=&quot;true&quot; name=&quot;internal&quot; description=&quot;internal use only&quot;/&gt;\r\n```\r\n\r\n[OSGI bind method:][3]\r\n```\r\n    @Reference(target = &quot;(id=unbound)&quot;)\r\n    protected void setDataSourceFactory(ResourceFactory svc) {\r\n```\r\n\r\n[Usage:][4]\r\n```\r\n        ResourceConfig resourceInfo = resourceConfigFactory.createResourceConfig(DataSource.class.getName());\r\n        resourceInfo.setSharingScope(ResourceConfig.SHARING_SCOPE_SHAREABLE);\r\n        resourceInfo.setIsolationLevel(isolationLevel);\r\n        resourceInfo.setResAuthType(ResourceConfig.AUTH_CONTAINER);\r\n        ...\r\n        DataSource dataSource = (DataSource) dataSourceFactory.createResource(resourceInfo);\r\n```\r\n\r\n\r\n  [1]: https://www.ibm.com/docs/en/was-liberty/base?topic=SSEQTP_liberty/com.ibm.websphere.javadoc.liberty.doc/com.ibm.websphere.appserver.spi.containerServices_4.0-javadoc/com/ibm/wsspi/resource/ResourceFactory.htm\r\n  [2]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/resources/OSGI-INF/metatype/metatype.xml#L33\r\n  [3]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L877-L880\r\n  [4]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L232-L249","title":"OpenLiberty custom feature dataSource","body":"<p>Yes, it's possible, but there is some complexity to it. The <code>dataSource</code> element isn't actually a DataSource. It's a <a href=\"https://www.ibm.com/docs/en/was-liberty/base?topic=SSEQTP_liberty/com.ibm.websphere.javadoc.liberty.doc/com.ibm.websphere.appserver.spi.containerServices_4.0-javadoc/com/ibm/wsspi/resource/ResourceFactory.htm\" rel=\"nofollow noreferrer\">ResourceFactory</a> for creating a data source based on a resource reference. In Liberty, configuration usually references other configuration by its <code>id</code>, so more typical configuration that follows conventions of other config elements would look like this:</p>\n<pre><code>&lt;myJdbcRegistry dataSourceRef=&quot;my-dataSource&quot;/&gt;\n</code></pre>\n<p>Here's an example from Liberty code itself where another configuration element requires a dataSource and references it by id,</p>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/resources/OSGI-INF/metatype/metatype.xml#L33\" rel=\"nofollow noreferrer\">Metatype:</a></p>\n<pre><code>  &lt;AD id=&quot;dataSourceRef&quot;                     type=&quot;String&quot;  default=&quot;DefaultDataSource&quot; ibm:type=&quot;pid&quot; ibm:reference=&quot;com.ibm.ws.jdbc.dataSource&quot; name=&quot;%dataSource&quot; description=&quot;%dataSoure.desc&quot;/&gt;\n  &lt;AD id=&quot;DataSourceFactory.target&quot;          type=&quot;String&quot;  default=&quot;(service.pid=${dataSourceRef})&quot; ibm:final=&quot;true&quot; name=&quot;internal&quot; description=&quot;internal use only&quot;/&gt;\n</code></pre>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L877-L880\" rel=\"nofollow noreferrer\">OSGI bind method:</a></p>\n<pre><code>    @Reference(target = &quot;(id=unbound)&quot;)\n    protected void setDataSourceFactory(ResourceFactory svc) {\n</code></pre>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L232-L249\" rel=\"nofollow noreferrer\">Usage:</a></p>\n<pre><code>        ResourceConfig resourceInfo = resourceConfigFactory.createResourceConfig(DataSource.class.getName());\n        resourceInfo.setSharingScope(ResourceConfig.SHARING_SCOPE_SHAREABLE);\n        resourceInfo.setIsolationLevel(isolationLevel);\n        resourceInfo.setResAuthType(ResourceConfig.AUTH_CONTAINER);\n        ...\n        DataSource dataSource = (DataSource) dataSourceFactory.createResource(resourceInfo);\n</code></pre>\n"}],"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77090454,"answer_count":1,"score":0,"last_activity_date":1694531316,"creation_date":1694527842,"question_id":77089936,"body_markdown":"I&#39;d like my custom OSGi Liberty feature to inject/lookup JNDI datasource, the one that is already defined &#39;as usual&#39;. Something like this:\r\n\r\n    &lt;server description=&quot;my-server&quot;&gt;\r\n    \r\n\t&lt;!-- I prefer this, not being forced to define url, driver, username and password here as well --&gt;\r\n\t&lt;myJdbcRegistry dataSourceJndiName=&quot;jdbc/myDataSource&quot; /&gt;\r\n\t\r\n\t&lt;!-- This dataSource exists anyway, i do not want to repeat all attributes that are inside properties.oracle --&gt;\r\n\t&lt;dataSource id=&quot;my-dataSource&quot; connectionManagerRef=&quot;connection-manager&quot; jndiName=&quot;jdbc/myDataSource&quot; transactional=&quot;true&quot; type=&quot;javax.sql.DataSource&quot;&gt; \r\n\t\t&lt;jdbcDriver libraryRef=&quot;oracle-ojdbc8-library&quot;/&gt; \r\n\t\t&lt;properties.oracle URL=&quot;${my.db.url}&quot; driverType=&quot;thin&quot; password=&quot;{xor}${my.db.password}&quot; user=&quot;${my.db.user}&quot;/&gt; \r\n\t&lt;/dataSource&gt;\r\n\t\r\n\t&lt;library id=&quot;oracle-ojdbc8-library&quot;&gt; \r\n\t\t&lt;fileset dir=&quot;${shared.resource.dir}/jdbc&quot; includes=&quot;ojdbc8-19.7.0.0.jar&quot;/&gt; \r\n\t&lt;/library&gt;\r\n\t\r\n&lt;/server&gt;\r\n\r\nIs this even possible to do? I tried several approaches without results (different InitialContext lookups, OSGi BundleContext#createFilter, BundleContext#getServiceReferences).","title":"OpenLiberty custom feature dataSource","body":"<p>I'd like my custom OSGi Liberty feature to inject/lookup JNDI datasource, the one that is already defined 'as usual'. Something like this:</p>\n<pre><code>&lt;server description=&quot;my-server&quot;&gt;\n\n&lt;!-- I prefer this, not being forced to define url, driver, username and password here as well --&gt;\n&lt;myJdbcRegistry dataSourceJndiName=&quot;jdbc/myDataSource&quot; /&gt;\n\n&lt;!-- This dataSource exists anyway, i do not want to repeat all attributes that are inside properties.oracle --&gt;\n&lt;dataSource id=&quot;my-dataSource&quot; connectionManagerRef=&quot;connection-manager&quot; jndiName=&quot;jdbc/myDataSource&quot; transactional=&quot;true&quot; type=&quot;javax.sql.DataSource&quot;&gt; \n    &lt;jdbcDriver libraryRef=&quot;oracle-ojdbc8-library&quot;/&gt; \n    &lt;properties.oracle URL=&quot;${my.db.url}&quot; driverType=&quot;thin&quot; password=&quot;{xor}${my.db.password}&quot; user=&quot;${my.db.user}&quot;/&gt; \n&lt;/dataSource&gt;\n\n&lt;library id=&quot;oracle-ojdbc8-library&quot;&gt; \n    &lt;fileset dir=&quot;${shared.resource.dir}/jdbc&quot; includes=&quot;ojdbc8-19.7.0.0.jar&quot;/&gt; \n&lt;/library&gt;\n</code></pre>\n\n<p>Is this even possible to do? I tried several approaches without results (different InitialContext lookups, OSGi BundleContext#createFilter, BundleContext#getServiceReferences).</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510180203,"post_id":47190189,"comment_id":81331041,"body_markdown":"So... you&#39;re asking a PdfBox question, but you&#39;re tagging it as an iText question? Can you explain why you did that?","body":"So... you&#39;re asking a PdfBox question, but you&#39;re tagging it as an iText question? Can you explain why you did that?"},{"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510207472,"post_id":47190189,"comment_id":81338777,"body_markdown":"If you don&#39;t want to explain, people will make assumptions about your motives. Those assumptions won&#39;t be positive.","body":"If you don&#39;t want to explain, people will make assumptions about your motives. Those assumptions won&#39;t be positive."},{"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510212956,"post_id":47190189,"comment_id":81341245,"body_markdown":"To clarify: I assume that you&#39;re opposed to free software, and that you only want software that is *for free* because you don&#39;t value developers and their work. You have no idea about [the realities of being a FOSS maintainer](https://caddy.community/t/the-realities-of-being-a-foss-maintainer/2728), because you&#39;re a [software cannibal](http://zguide.zeromq.org/page:chapter6#Eat-Me). That assumption may be wrong, but since you don&#39;t feel like explaining, that&#39;s what I&#39;m guessing.","body":"To clarify: I assume that you&#39;re opposed to free software, and that you only want software that is <i>for free</i> because you don&#39;t value developers and their work. You have no idea about <a href=\"https://caddy.community/t/the-realities-of-being-a-foss-maintainer/2728\" rel=\"nofollow noreferrer\">the realities of being a FOSS maintainer</a>, because you&#39;re a <a href=\"http://zguide.zeromq.org/page:chapter6#Eat-Me\" rel=\"nofollow noreferrer\">software cannibal</a>. That assumption may be wrong, but since you don&#39;t feel like explaining, that&#39;s what I&#39;m guessing."},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":4,"creation_date":1510216328,"post_id":47190189,"comment_id":81342970,"body_markdown":"If a question is wrongly tagged, it takes less effort to remove the wrong tag than to write 3 comments to complain about it.","body":"If a question is wrongly tagged, it takes less effort to remove the wrong tag than to write 3 comments to complain about it."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1510225997,"post_id":47190189,"comment_id":81349142,"body_markdown":"Do you mean empty signature fields? Can you share the template PDF? PDFBox doesn&#39;t have a method to remove a field from the field tree but it might be possible anyway if the tree structure is simple.","body":"Do you mean empty signature fields? Can you share the template PDF? PDFBox doesn&#39;t have a method to remove a field from the field tree but it might be possible anyway if the tree structure is simple."},{"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"score":0,"creation_date":1510272925,"post_id":47190189,"comment_id":81377037,"body_markdown":"Hi, Tilman, my PDfF very simple, all my signatures are as root fields. I was thinking about manipulating tree structure, but I did not go further with that when I saw that getChildren() method in PDFBox is returning new instance of the list, but the actual list: List&lt;PDField&gt; children = new ArrayList&lt;PDField&gt;(); But mkl below went further and extended your idea. Thanks for it!","body":"Hi, Tilman, my PDfF very simple, all my signatures are as root fields. I was thinking about manipulating tree structure, but I did not go further with that when I saw that getChildren() method in PDFBox is returning new instance of the list, but the actual list: List&lt;PDField&gt; children = new ArrayList&lt;PDField&gt;(); But mkl below went further and extended your idea. Thanks for it!"}],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1510232623,"creation_date":1510232623,"answer_id":47202560,"question_id":47190189,"body_markdown":"As Tilman already mentioned in a comment, *PDFBox doesn&#39;t have a method to remove a field from the field tree.* Nonetheless it has methods to manipulate the underlying PDF structure, so one can write such a method oneself, e.g. like this:\r\n\r\n    PDField removeField(PDDocument document, String fullFieldName) throws IOException {\r\n        PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\r\n        PDAcroForm acroForm = documentCatalog.getAcroForm();\r\n\r\n        if (acroForm == null) {\r\n            System.out.println(&quot;No form defined.&quot;);\r\n            return null;\r\n        }\r\n\r\n        PDField targetField = null;\r\n\r\n        for (PDField field : acroForm.getFieldTree()) {\r\n            if (fullFieldName.equals(field.getFullyQualifiedName())) {\r\n                targetField = field;\r\n                break;\r\n            }\r\n        }\r\n        if (targetField == null) {\r\n            System.out.println(&quot;Form does not contain field with given name.&quot;);\r\n            return null;\r\n        }\r\n\r\n        PDNonTerminalField parentField = targetField.getParent();\r\n        if (parentField != null) {\r\n            List&lt;PDField&gt; childFields = parentField.getChildren();\r\n            boolean removed = false;\r\n            for (PDField field : childFields)\r\n            {\r\n                if (field.getCOSObject().equals(targetField.getCOSObject())) {\r\n                    removed = childFields.remove(field);\r\n                    parentField.setChildren(childFields);\r\n                    break;\r\n                }\r\n            }\r\n            if (!removed)\r\n                System.out.println(&quot;Inconsistent form definition: Parent field does not reference the target field.&quot;);\r\n        } else {\r\n            List&lt;PDField&gt; rootFields = acroForm.getFields();\r\n            boolean removed = false;\r\n            for (PDField field : rootFields)\r\n            {\r\n                if (field.getCOSObject().equals(targetField.getCOSObject())) {\r\n                    removed = rootFields.remove(field);\r\n                    break;\r\n                }\r\n            }\r\n            if (!removed)\r\n                System.out.println(&quot;Inconsistent form definition: Root fields do not include the target field.&quot;);\r\n        }\r\n\r\n        removeWidgets(targetField);\r\n\r\n        return targetField;\r\n    }\r\n\r\n    void removeWidgets(PDField targetField) throws IOException {\r\n        if (targetField instanceof PDTerminalField) {\r\n            List&lt;PDAnnotationWidget&gt; widgets = ((PDTerminalField)targetField).getWidgets();\r\n            for (PDAnnotationWidget widget : widgets) {\r\n                PDPage page = widget.getPage();\r\n                if (page != null) {\r\n                    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n                    boolean removed = false;\r\n                    for (PDAnnotation annotation : annotations) {\r\n                        if (annotation.getCOSObject().equals(widget.getCOSObject()))\r\n                        {\r\n                            removed = annotations.remove(annotation);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!removed)\r\n                        System.out.println(&quot;Inconsistent annotation definition: Page annotations do not include the target widget.&quot;);\r\n                } else {\r\n                    System.out.println(&quot;Widget annotation does not have an associated page; cannot remove widget.&quot;);\r\n                    // TODO: In this case iterate all pages and try to find and remove widget in all of them\r\n                }\r\n            }\r\n        } else if (targetField instanceof PDNonTerminalField) {\r\n            List&lt;PDField&gt; childFields = ((PDNonTerminalField)targetField).getChildren();\r\n            for (PDField field : childFields)\r\n                removeWidgets(field);\r\n        } else {\r\n            System.out.println(&quot;Target field is neither terminal nor non-terminal; cannot remove widgets.&quot;);\r\n        }\r\n    }\r\n\r\n*([RemoveField][1] helper methods `removeField` and `removeWidgets`)*\r\n\r\nOne can apply this to a document and field like this:\r\n\r\n    PDDocument document = PDDocument.load(SOURCE_PDF);\r\n\r\n    PDField field = removeField(document, &quot;Signature1&quot;);\r\n    Assert.assertNotNull(&quot;Field not found&quot;, field);\r\n\r\n    document.save(TARGET_PDF);        \r\n    document.close();\r\n\r\n*([RemoveField][2] test `testRemoveInvisibleSignature`)*\r\n\r\n---\r\n\r\n**PS:** I am not sure how much form related information PDFBox actually caches somewhere. Thus, I would propose not to manipulate the form information any further in the same document manipulation session, at least not without tests.\r\n\r\n**PPS:** You find a TODO in the `removeWidgets` helper method. If the method outputs *&quot;Widget annotation does not have an associated page; cannot remove widget&quot;*, you&#39;ll have to add the missing code.\r\n\r\n  [1]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L172\r\n  [2]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L160","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>As Tilman already mentioned in a comment, <em>PDFBox doesn't have a method to remove a field from the field tree.</em> Nonetheless it has methods to manipulate the underlying PDF structure, so one can write such a method oneself, e.g. like this:</p>\n\n<pre><code>PDField removeField(PDDocument document, String fullFieldName) throws IOException {\n    PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\n    PDAcroForm acroForm = documentCatalog.getAcroForm();\n\n    if (acroForm == null) {\n        System.out.println(\"No form defined.\");\n        return null;\n    }\n\n    PDField targetField = null;\n\n    for (PDField field : acroForm.getFieldTree()) {\n        if (fullFieldName.equals(field.getFullyQualifiedName())) {\n            targetField = field;\n            break;\n        }\n    }\n    if (targetField == null) {\n        System.out.println(\"Form does not contain field with given name.\");\n        return null;\n    }\n\n    PDNonTerminalField parentField = targetField.getParent();\n    if (parentField != null) {\n        List&lt;PDField&gt; childFields = parentField.getChildren();\n        boolean removed = false;\n        for (PDField field : childFields)\n        {\n            if (field.getCOSObject().equals(targetField.getCOSObject())) {\n                removed = childFields.remove(field);\n                parentField.setChildren(childFields);\n                break;\n            }\n        }\n        if (!removed)\n            System.out.println(\"Inconsistent form definition: Parent field does not reference the target field.\");\n    } else {\n        List&lt;PDField&gt; rootFields = acroForm.getFields();\n        boolean removed = false;\n        for (PDField field : rootFields)\n        {\n            if (field.getCOSObject().equals(targetField.getCOSObject())) {\n                removed = rootFields.remove(field);\n                break;\n            }\n        }\n        if (!removed)\n            System.out.println(\"Inconsistent form definition: Root fields do not include the target field.\");\n    }\n\n    removeWidgets(targetField);\n\n    return targetField;\n}\n\nvoid removeWidgets(PDField targetField) throws IOException {\n    if (targetField instanceof PDTerminalField) {\n        List&lt;PDAnnotationWidget&gt; widgets = ((PDTerminalField)targetField).getWidgets();\n        for (PDAnnotationWidget widget : widgets) {\n            PDPage page = widget.getPage();\n            if (page != null) {\n                List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n                boolean removed = false;\n                for (PDAnnotation annotation : annotations) {\n                    if (annotation.getCOSObject().equals(widget.getCOSObject()))\n                    {\n                        removed = annotations.remove(annotation);\n                        break;\n                    }\n                }\n                if (!removed)\n                    System.out.println(\"Inconsistent annotation definition: Page annotations do not include the target widget.\");\n            } else {\n                System.out.println(\"Widget annotation does not have an associated page; cannot remove widget.\");\n                // TODO: In this case iterate all pages and try to find and remove widget in all of them\n            }\n        }\n    } else if (targetField instanceof PDNonTerminalField) {\n        List&lt;PDField&gt; childFields = ((PDNonTerminalField)targetField).getChildren();\n        for (PDField field : childFields)\n            removeWidgets(field);\n    } else {\n        System.out.println(\"Target field is neither terminal nor non-terminal; cannot remove widgets.\");\n    }\n}\n</code></pre>\n\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L172\" rel=\"noreferrer\">RemoveField</a> helper methods <code>removeField</code> and <code>removeWidgets</code>)</em></p>\n\n<p>One can apply this to a document and field like this:</p>\n\n<pre><code>PDDocument document = PDDocument.load(SOURCE_PDF);\n\nPDField field = removeField(document, \"Signature1\");\nAssert.assertNotNull(\"Field not found\", field);\n\ndocument.save(TARGET_PDF);        \ndocument.close();\n</code></pre>\n\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L160\" rel=\"noreferrer\">RemoveField</a> test <code>testRemoveInvisibleSignature</code>)</em></p>\n\n<hr>\n\n<p><strong>PS:</strong> I am not sure how much form related information PDFBox actually caches somewhere. Thus, I would propose not to manipulate the form information any further in the same document manipulation session, at least not without tests.</p>\n\n<p><strong>PPS:</strong> You find a TODO in the <code>removeWidgets</code> helper method. If the method outputs <em>\"Widget annotation does not have an associated page; cannot remove widget\"</em>, you'll have to add the missing code.</p>\n"},{"tags":[],"owner":{"account_id":14810132,"reputation":21,"user_id":10696039,"display_name":"Luis Avellaneda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648659271,"creation_date":1648659271,"answer_id":71681206,"question_id":47190189,"body_markdown":"Thanks to @mkl, I managed to do so with a shorter implementation using version pdfbox-3.0.0-RC1. in this case, to hide a button (check):\r\n\r\n            var check = (PDPushButton) pdAcroForm.getField(name);\r\n        List&lt;PDField&gt; fields = pdAcroForm.getFields();\r\n        fields.removeIf(x -&gt; x.getCOSObject().equals(check.getCOSObject()));\r\n        pdAcroForm.setFields(fields);\r\n        check.getWidgets().forEach(widget -&gt; widget.setNoView(true));\r\n\r\n\r\n ","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>Thanks to @mkl, I managed to do so with a shorter implementation using version pdfbox-3.0.0-RC1. in this case, to hide a button (check):</p>\n<pre><code>        var check = (PDPushButton) pdAcroForm.getField(name);\n    List&lt;PDField&gt; fields = pdAcroForm.getFields();\n    fields.removeIf(x -&gt; x.getCOSObject().equals(check.getCOSObject()));\n    pdAcroForm.setFields(fields);\n    check.getWidgets().forEach(widget -&gt; widget.setNoView(true));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20070912,"reputation":23,"user_id":14715699,"display_name":"IvarAlek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694530907,"creation_date":1694530907,"answer_id":77090406,"question_id":47190189,"body_markdown":"My Kotlin/PDFBox 3.0.0 solution, fwiw: \r\n\r\n    fun removeField(field: PDField) {\r\n        field.parent?.run {\r\n            this.children = children.withoutField(field)\r\n        }\r\n        field.takeIf { it.parent == null }?.run {\r\n            acroForm.fields = acroForm.fields.withoutField(field)\r\n        }\r\n        field.widgets.forEach { it.isNoView = true }\r\n    }\r\n\r\n    private fun MutableList&lt;PDField&gt;.withoutField(field: PDField): MutableList&lt;PDField&gt; {\r\n        removeIf { it.cosObject == field.cosObject &amp;&amp; it.fullyQualifiedName == field.fullyQualifiedName }\r\n        return this\r\n    }\r\n\r\n\r\nProbably not necessary to check both cosObject and fullyQualifiedName for equality I guess. ","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>My Kotlin/PDFBox 3.0.0 solution, fwiw:</p>\n<pre><code>fun removeField(field: PDField) {\n    field.parent?.run {\n        this.children = children.withoutField(field)\n    }\n    field.takeIf { it.parent == null }?.run {\n        acroForm.fields = acroForm.fields.withoutField(field)\n    }\n    field.widgets.forEach { it.isNoView = true }\n}\n\nprivate fun MutableList&lt;PDField&gt;.withoutField(field: PDField): MutableList&lt;PDField&gt; {\n    removeIf { it.cosObject == field.cosObject &amp;&amp; it.fullyQualifiedName == field.fullyQualifiedName }\n    return this\n}\n</code></pre>\n<p>Probably not necessary to check both cosObject and fullyQualifiedName for equality I guess.</p>\n"}],"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4126,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":47202560,"answer_count":3,"score":2,"last_activity_date":1694530907,"creation_date":1510177357,"question_id":47190189,"body_markdown":"I am using Apache [PDFBox 2.0.8][1]  and trying to remove one field. But can not find the way to do it, like I can do with iText:     `PdfStamper.getAcroFields().removeField(&quot;signature3&quot;)`.\r\n\r\nWhat I am tying to do. Initially I have template PDF with 3 Digital Signatures. In some cases I need just 2 signatures, so it this case I need to remove 3rd signature from the template. And seems like I can&#39;t do it with PDFBox, close thing I found is flattening this field, but that problem is if a flatten particular PDField (not whole form, but just one field) - all other signatures are loosing their functionality, looks like they are getting flattened as well.\r\nHere is code that does it:\r\n\r\n    PDDocument document = PDDocument.load(file);\r\n    PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\r\n    PDAcroForm acroForm = documentCatalog.getAcroForm();\r\n        \t\t\r\n    List&lt;PDField&gt; flattenList = new ArrayList&lt;&gt;();\r\n    for (PDField field : acroForm.getFieldTree()) {\r\n    \tif (field instanceof PDSignatureField &amp;&amp; &quot;signature3&quot;.equals(field.getFullyQualifiedName())) {\r\n    \t\tflattenList.add(field);\r\n    \t}\r\n    }\r\n    \r\n    acroForm.flatten(flattenList, true);\r\n    document.save(dest);\t\t\r\n    document.close();\r\n\r\n\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox/2.0.8\r\n","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>I am using Apache <a href=\"https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox/2.0.8\" rel=\"nofollow noreferrer\">PDFBox 2.0.8</a>  and trying to remove one field. But can not find the way to do it, like I can do with iText:     <code>PdfStamper.getAcroFields().removeField(\"signature3\")</code>.</p>\n\n<p>What I am tying to do. Initially I have template PDF with 3 Digital Signatures. In some cases I need just 2 signatures, so it this case I need to remove 3rd signature from the template. And seems like I can't do it with PDFBox, close thing I found is flattening this field, but that problem is if a flatten particular PDField (not whole form, but just one field) - all other signatures are loosing their functionality, looks like they are getting flattened as well.\nHere is code that does it:</p>\n\n<pre><code>PDDocument document = PDDocument.load(file);\nPDDocumentCatalog documentCatalog = document.getDocumentCatalog();\nPDAcroForm acroForm = documentCatalog.getAcroForm();\n\nList&lt;PDField&gt; flattenList = new ArrayList&lt;&gt;();\nfor (PDField field : acroForm.getFieldTree()) {\n    if (field instanceof PDSignatureField &amp;&amp; \"signature3\".equals(field.getFullyQualifiedName())) {\n        flattenList.add(field);\n    }\n}\n\nacroForm.flatten(flattenList, true);\ndocument.save(dest);        \ndocument.close();\n</code></pre>\n"},{"tags":["java","spring-boot","maven-2"],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694530038,"creation_date":1694521510,"question_id":77089082,"body_markdown":"I am attempting to add instrumentation to my Java application. I have successfully created agent code that I attach to my application via the &quot;static&quot; technique (e.g. https://www.baeldung.com/java-instrumentation). When I launch the application, the agent `premain` method is called and then the application executes. Unfortuanetly, `premain` is unable to find the target application class.\r\n\r\nMy application uses Spring Boot. I am suspecting that this may have something to do with the agent&#39;s inability to find the target class, but do not know.\r\n\r\nI am not sure what I should provide as far as code, configuration, etc., to illustrate the state of the application. Please let me know what I should include to help.\r\n\r\nHere is the exception that occurs when the agent attempts to find and transform the target class:\r\n\r\n\t[INFO ] 2023-09-11 14:33:11.900 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:28) - [Agent] In premain method\r\n\t[INFO ] 2023-09-11 14:33:11.903 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:29) - [Agent] args: com.beastcode.devops.prometheus.MetricsCollector:collect\r\n\t[INFO ] 2023-09-11 14:33:11.904 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:48) - [Agent] Transforming class com/beastcode/devops/prometheus/MetricsCollector\r\n\t[ERROR] 2023-09-11 14:33:11.908 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:77) - Exception\r\n\tjavassist.NotFoundException: com.beastcode.devops.prometheus.MetricsCollector\r\n\t\tat javassist.ClassPool.get(ClassPool.java:436) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:57) ~[agent-1.0.0.jar:?]\r\n\t\tat java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:246) ~[?:?]\r\n\t\tat sun.instrument.TransformerManager.transform(TransformerManager.java:188) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:563) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.retransformClasses0(Native Method) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167) ~[?:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.transform(InstrumentationAgent.java:82) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.transformClass(InstrumentationAgent.java:57) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:35) ~[agent-1.0.0.jar:?]\r\n\t\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\t\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\t\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525) ~[?:?]\r\n\t...\r\n\r\n`com.beastcode.devops.prometheus.MetricsCollector` is the target class and it certainly exists as this is the &quot;main&quot; application code that is started by Spring Boot. This can be seen later in the console log:\r\n\r\n\t...\r\n\t[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:58) - Metrics information collected\r\n\t[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:59) - Querying and writing data ...\r\n\t[INFO ] 2023-09-11 14:33:20.847 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:80) - Done\r\n\r\nMy pom.xml file uses the `spring-boot-maven-plugin` to handle building and packaging the application. I&#39;m wondering if the class is not visible because perhaps I&#39;m missing an option.\r\n\r\nHere is the application pom.xml:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t  \r\n\t  &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t  &lt;/parent&gt;\r\n\t  \r\n\t  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;prometheus-metrics-sampler&lt;/artifactId&gt;\r\n\t  &lt;version&gt;1.1.2&lt;/version&gt;\r\n\t  \r\n\t  &lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t\r\n\t\t&lt;slf4j.version&gt;1.7.36&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\r\n\t\t\r\n\t\t&lt;prometheus-common.version&gt;1.2.2&lt;/prometheus-common.version&gt;\r\n\r\n\t\t&lt;gitlab-url&gt;https://gitlab.phactory.beast-code.com&lt;/gitlab-url&gt;\r\n\t\t&lt;gitlab-project-id&gt;863&lt;/gitlab-project-id&gt;\r\n\t  &lt;/properties&gt;\r\n\r\n\t  &lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t  &lt;snapshots&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t  &lt;releases&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;phactory-gitlab-maven&lt;/id&gt;\r\n\t\t  &lt;url&gt;${gitlab-url}/api/v4/projects/${gitlab-project-id}/packages/maven&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t  &lt;/repositories&gt;\r\n\t  \r\n\t  &lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t  &lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t  &lt;snapshots&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t  &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t  &lt;releases&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t  &lt;/pluginRepositories&gt;\r\n\r\n\t  &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t  \r\n\t\t  &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${prometheus-common.version}&lt;/version&gt;\r\n\t\t  &lt;/dependency&gt;\r\n\r\n\t\t&lt;/dependencies&gt;\r\n\t  &lt;/dependencyManagement&gt;\r\n\r\n\t  &lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t  &lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t  &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t  &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t  &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t  &lt;/dependencies&gt;\r\n\t  \r\n\t  &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t  &lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t  &lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t  &lt;/build&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\nHere is the agent class:\r\n\r\n    package com.beastcode.devops.prometheus;\r\n    \r\n    import java.lang.instrument.Instrumentation;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class InstrumentationAgent {\r\n    \r\n      private static Logger logger = LoggerFactory.getLogger(InstrumentationAgent.class);\r\n    \r\n      public static void premain(String agentArgs, Instrumentation instrumentation) {\r\n        logger.info(&quot;[Agent] In premain method&quot;);\r\n        logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\r\n    \r\n        String[] args = agentArgs.split(&quot;:&quot;);\r\n        String className = args[0];\r\n        String methodName = args[1];\r\n    \r\n        transformClass(className, methodName, instrumentation);\r\n      }\r\n    \r\n      public static void agentmain(String agentArgs, Instrumentation instrumentation) {\r\n        logger.info(&quot;[Agent] In agentmain method&quot;);\r\n        logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\r\n    \r\n        String[] args = agentArgs.split(&quot;:&quot;);\r\n        String className = args[0];\r\n        String methodName = args[1];\r\n    \r\n        transformClass(className, methodName, instrumentation);\r\n      }\r\n    \r\n      private static void transformClass(String className, String methodName, Instrumentation instrumentation) {\r\n        Class&lt;?&gt; targetCls = null;\r\n        ClassLoader targetClassLoader = null;\r\n    \r\n        // See if we can get the class using forName.\r\n        try {\r\n          targetCls = Class.forName(className);\r\n          targetClassLoader = targetCls.getClassLoader();\r\n          transform(targetCls, targetClassLoader, methodName, instrumentation);\r\n          return;\r\n        } catch (Exception e) {\r\n          logger.error(&quot;Class [{}] not found with Class.forName&quot;);\r\n        }\r\n    \r\n        // Otherwise, iterate all loaded classes and find what we want.\r\n        for (Class&lt;?&gt; clazz : instrumentation.getAllLoadedClasses()) {\r\n          if (clazz.getName().equals(className)) {\r\n            targetCls = clazz;\r\n            targetClassLoader = targetCls.getClassLoader();\r\n            transform(targetCls, targetClassLoader, methodName, instrumentation);\r\n            return;\r\n          }\r\n        }\r\n    \r\n        throw new RuntimeException(&quot;Failed to find class [&quot; + className + &quot;]&quot;);\r\n      }\r\n    \r\n      private static void transform(Class&lt;?&gt; clazz, ClassLoader classLoader, String methodName,\r\n          Instrumentation instrumentation) {\r\n        Transformer transformer = new Transformer(clazz.getName(), classLoader, methodName);\r\n        instrumentation.addTransformer(transformer, true);\r\n    \r\n        try {\r\n          instrumentation.retransformClasses(clazz);\r\n        } catch (Exception e) {\r\n          throw new RuntimeException(&quot;Transform failed for class: [&quot; + clazz.getName() + &quot;]&quot;, e);\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\n\r\nHere is the transformer class:\r\n\r\n    package com.beastcode.devops.prometheus;\r\n    \r\n    import java.io.IOException;\r\n    import java.lang.instrument.ClassFileTransformer;\r\n    import java.lang.instrument.IllegalClassFormatException;\r\n    import java.security.ProtectionDomain;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import javassist.CannotCompileException;\r\n    import javassist.ClassPool;\r\n    import javassist.CtClass;\r\n    import javassist.CtMethod;\r\n    import javassist.NotFoundException;\r\n    \r\n    public class Transformer implements ClassFileTransformer {\r\n    \r\n      private static Logger     logger = LoggerFactory.getLogger(Transformer.class);\r\n    \r\n      // The internal form class name of the class to transform.\r\n      private final String      targetClassName;\r\n      // The class loader of the class we want to transform.\r\n      private final ClassLoader targetClassLoader;\r\n    \r\n      private final String      methodName;\r\n    \r\n      public Transformer(String targetClassName, ClassLoader targetClassLoader, String methodName) {\r\n        this.targetClassName = targetClassName;\r\n        this.targetClassLoader = targetClassLoader;\r\n        this.methodName = methodName;\r\n      }\r\n    \r\n      @Override\r\n      public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\r\n          ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\r\n        byte[] byteCode = classfileBuffer;\r\n    \r\n        // Replace slashes (/) in target class name with periods (.) to construct a\r\n        // proper Java class name.\r\n        String finalTargetClassName = this.targetClassName.replaceAll(&quot;\\\\.&quot;, &quot;/&quot;);\r\n    \r\n        if (!className.equals(finalTargetClassName)) {\r\n          return byteCode;\r\n        }\r\n    \r\n        if (className.equals(finalTargetClassName) &amp;&amp; loader.equals(targetClassLoader)) {\r\n          logger.info(&quot;[Agent] Transforming class &quot; + finalTargetClassName);\r\n    \r\n          /*\r\n           * TODO This is logic specific to what you are trying to instrument into the\r\n           * class and method of interest.\r\n           */\r\n    \r\n          try {\r\n            ClassPool cp = ClassPool.getDefault();\r\n            CtClass cc = cp.get(targetClassName);\r\n            CtMethod mtd = cc.getDeclaredMethod(methodName);\r\n    \r\n            mtd.addLocalVariable(&quot;startTime&quot;, CtClass.longType);\r\n            mtd.insertBefore(&quot;startTime = System.currentTimeMillis();&quot;);\r\n    \r\n            StringBuilder endBlock = new StringBuilder();\r\n    \r\n            mtd.addLocalVariable(&quot;endTime&quot;, CtClass.longType);\r\n            mtd.addLocalVariable(&quot;opTime&quot;, CtClass.longType);\r\n            endBlock.append(&quot;endTime = System.currentTimeMillis();&quot;);\r\n            endBlock.append(&quot;opTime = (endTime-startTime)/1000;&quot;);\r\n    \r\n            endBlock.append(&quot;logger.info(\\&quot;[Application] Operation completed in:\\&quot; + opTime + \\&quot; seconds!\\&quot;);&quot;);\r\n    \r\n            mtd.insertAfter(endBlock.toString());\r\n    \r\n            byteCode = cc.toBytecode();\r\n            cc.detach();\r\n          } catch (NotFoundException | CannotCompileException | IOException e) {\r\n            logger.error(&quot;Exception&quot;, e);\r\n          }\r\n        }\r\n    \r\n        return byteCode;\r\n      }\r\n    \r\n    }\r\n\r\n\r\n","title":"Java agent cannot find target class","body":"<p>I am attempting to add instrumentation to my Java application. I have successfully created agent code that I attach to my application via the &quot;static&quot; technique (e.g. <a href=\"https://www.baeldung.com/java-instrumentation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-instrumentation</a>). When I launch the application, the agent <code>premain</code> method is called and then the application executes. Unfortuanetly, <code>premain</code> is unable to find the target application class.</p>\n<p>My application uses Spring Boot. I am suspecting that this may have something to do with the agent's inability to find the target class, but do not know.</p>\n<p>I am not sure what I should provide as far as code, configuration, etc., to illustrate the state of the application. Please let me know what I should include to help.</p>\n<p>Here is the exception that occurs when the agent attempts to find and transform the target class:</p>\n<pre><code>[INFO ] 2023-09-11 14:33:11.900 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:28) - [Agent] In premain method\n[INFO ] 2023-09-11 14:33:11.903 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:29) - [Agent] args: com.beastcode.devops.prometheus.MetricsCollector:collect\n[INFO ] 2023-09-11 14:33:11.904 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:48) - [Agent] Transforming class com/beastcode/devops/prometheus/MetricsCollector\n[ERROR] 2023-09-11 14:33:11.908 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:77) - Exception\njavassist.NotFoundException: com.beastcode.devops.prometheus.MetricsCollector\n    at javassist.ClassPool.get(ClassPool.java:436) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:57) ~[agent-1.0.0.jar:?]\n    at java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:246) ~[?:?]\n    at sun.instrument.TransformerManager.transform(TransformerManager.java:188) ~[?:?]\n    at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:563) ~[?:?]\n    at sun.instrument.InstrumentationImpl.retransformClasses0(Native Method) ~[?:?]\n    at sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167) ~[?:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.transform(InstrumentationAgent.java:82) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.transformClass(InstrumentationAgent.java:57) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:35) ~[agent-1.0.0.jar:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513) ~[?:?]\n    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525) ~[?:?]\n...\n</code></pre>\n<p><code>com.beastcode.devops.prometheus.MetricsCollector</code> is the target class and it certainly exists as this is the &quot;main&quot; application code that is started by Spring Boot. This can be seen later in the console log:</p>\n<pre><code>...\n[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:58) - Metrics information collected\n[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:59) - Querying and writing data ...\n[INFO ] 2023-09-11 14:33:20.847 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:80) - Done\n</code></pre>\n<p>My pom.xml file uses the <code>spring-boot-maven-plugin</code> to handle building and packaging the application. I'm wondering if the class is not visible because perhaps I'm missing an option.</p>\n<p>Here is the application pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  \n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.11&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n  \n  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n  &lt;artifactId&gt;prometheus-metrics-sampler&lt;/artifactId&gt;\n  &lt;version&gt;1.1.2&lt;/version&gt;\n  \n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    \n    &lt;slf4j.version&gt;1.7.36&lt;/slf4j.version&gt;\n    &lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\n    \n    &lt;prometheus-common.version&gt;1.2.2&lt;/prometheus-common.version&gt;\n\n    &lt;gitlab-url&gt;https://gitlab.phactory.beast-code.com&lt;/gitlab-url&gt;\n    &lt;gitlab-project-id&gt;863&lt;/gitlab-project-id&gt;\n  &lt;/properties&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    \n    &lt;repository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n      &lt;id&gt;phactory-gitlab-maven&lt;/id&gt;\n      &lt;url&gt;${gitlab-url}/api/v4/projects/${gitlab-project-id}/packages/maven&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n  \n  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n    \n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;\n\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      \n      &lt;dependency&gt;\n        &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n        &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\n        &lt;version&gt;${prometheus-common.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n      &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  \n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is the agent class:</p>\n<pre><code>package com.beastcode.devops.prometheus;\n\nimport java.lang.instrument.Instrumentation;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class InstrumentationAgent {\n\n  private static Logger logger = LoggerFactory.getLogger(InstrumentationAgent.class);\n\n  public static void premain(String agentArgs, Instrumentation instrumentation) {\n    logger.info(&quot;[Agent] In premain method&quot;);\n    logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\n\n    String[] args = agentArgs.split(&quot;:&quot;);\n    String className = args[0];\n    String methodName = args[1];\n\n    transformClass(className, methodName, instrumentation);\n  }\n\n  public static void agentmain(String agentArgs, Instrumentation instrumentation) {\n    logger.info(&quot;[Agent] In agentmain method&quot;);\n    logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\n\n    String[] args = agentArgs.split(&quot;:&quot;);\n    String className = args[0];\n    String methodName = args[1];\n\n    transformClass(className, methodName, instrumentation);\n  }\n\n  private static void transformClass(String className, String methodName, Instrumentation instrumentation) {\n    Class&lt;?&gt; targetCls = null;\n    ClassLoader targetClassLoader = null;\n\n    // See if we can get the class using forName.\n    try {\n      targetCls = Class.forName(className);\n      targetClassLoader = targetCls.getClassLoader();\n      transform(targetCls, targetClassLoader, methodName, instrumentation);\n      return;\n    } catch (Exception e) {\n      logger.error(&quot;Class [{}] not found with Class.forName&quot;);\n    }\n\n    // Otherwise, iterate all loaded classes and find what we want.\n    for (Class&lt;?&gt; clazz : instrumentation.getAllLoadedClasses()) {\n      if (clazz.getName().equals(className)) {\n        targetCls = clazz;\n        targetClassLoader = targetCls.getClassLoader();\n        transform(targetCls, targetClassLoader, methodName, instrumentation);\n        return;\n      }\n    }\n\n    throw new RuntimeException(&quot;Failed to find class [&quot; + className + &quot;]&quot;);\n  }\n\n  private static void transform(Class&lt;?&gt; clazz, ClassLoader classLoader, String methodName,\n      Instrumentation instrumentation) {\n    Transformer transformer = new Transformer(clazz.getName(), classLoader, methodName);\n    instrumentation.addTransformer(transformer, true);\n\n    try {\n      instrumentation.retransformClasses(clazz);\n    } catch (Exception e) {\n      throw new RuntimeException(&quot;Transform failed for class: [&quot; + clazz.getName() + &quot;]&quot;, e);\n    }\n  }\n\n}\n</code></pre>\n<p>Here is the transformer class:</p>\n<pre><code>package com.beastcode.devops.prometheus;\n\nimport java.io.IOException;\nimport java.lang.instrument.ClassFileTransformer;\nimport java.lang.instrument.IllegalClassFormatException;\nimport java.security.ProtectionDomain;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javassist.CannotCompileException;\nimport javassist.ClassPool;\nimport javassist.CtClass;\nimport javassist.CtMethod;\nimport javassist.NotFoundException;\n\npublic class Transformer implements ClassFileTransformer {\n\n  private static Logger     logger = LoggerFactory.getLogger(Transformer.class);\n\n  // The internal form class name of the class to transform.\n  private final String      targetClassName;\n  // The class loader of the class we want to transform.\n  private final ClassLoader targetClassLoader;\n\n  private final String      methodName;\n\n  public Transformer(String targetClassName, ClassLoader targetClassLoader, String methodName) {\n    this.targetClassName = targetClassName;\n    this.targetClassLoader = targetClassLoader;\n    this.methodName = methodName;\n  }\n\n  @Override\n  public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\n      ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\n    byte[] byteCode = classfileBuffer;\n\n    // Replace slashes (/) in target class name with periods (.) to construct a\n    // proper Java class name.\n    String finalTargetClassName = this.targetClassName.replaceAll(&quot;\\\\.&quot;, &quot;/&quot;);\n\n    if (!className.equals(finalTargetClassName)) {\n      return byteCode;\n    }\n\n    if (className.equals(finalTargetClassName) &amp;&amp; loader.equals(targetClassLoader)) {\n      logger.info(&quot;[Agent] Transforming class &quot; + finalTargetClassName);\n\n      /*\n       * TODO This is logic specific to what you are trying to instrument into the\n       * class and method of interest.\n       */\n\n      try {\n        ClassPool cp = ClassPool.getDefault();\n        CtClass cc = cp.get(targetClassName);\n        CtMethod mtd = cc.getDeclaredMethod(methodName);\n\n        mtd.addLocalVariable(&quot;startTime&quot;, CtClass.longType);\n        mtd.insertBefore(&quot;startTime = System.currentTimeMillis();&quot;);\n\n        StringBuilder endBlock = new StringBuilder();\n\n        mtd.addLocalVariable(&quot;endTime&quot;, CtClass.longType);\n        mtd.addLocalVariable(&quot;opTime&quot;, CtClass.longType);\n        endBlock.append(&quot;endTime = System.currentTimeMillis();&quot;);\n        endBlock.append(&quot;opTime = (endTime-startTime)/1000;&quot;);\n\n        endBlock.append(&quot;logger.info(\\&quot;[Application] Operation completed in:\\&quot; + opTime + \\&quot; seconds!\\&quot;);&quot;);\n\n        mtd.insertAfter(endBlock.toString());\n\n        byteCode = cc.toBytecode();\n        cc.detach();\n      } catch (NotFoundException | CannotCompileException | IOException e) {\n        logger.error(&quot;Exception&quot;, e);\n      }\n    }\n\n    return byteCode;\n  }\n\n}\n</code></pre>\n"},{"tags":["java","html","pdf","sendgrid","teneo"],"owner":{"account_id":1549807,"reputation":1,"user_id":1442479,"display_name":"RobFalla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529984,"creation_date":1694529984,"question_id":77090261,"body_markdown":"I&#39;ve successfully created a template used by sendgrid to send an html formatted email to customer service at the end of an AI conversation. I discovered that when viewed in outlook the style elements were not being applied as expected (does not look the same in outlook as in a webmail client like gmail).\r\n\r\nI tried to transform the html output to a pdf document, hoping the look and feel issues would be resolved with a true representation of the html, but it was not. SendGrid only supports inline css and there are several further restrictions on what you can do with html, so I used tables to handle positioning. Unfortunately the H4 heading I inserted in the table, while looking fine in webmail, does not carry background colour into the pdf.\r\n\r\n```\r\n// ******************** reportNice ******************* //\r\nString reportNice = &quot;&lt;div style=&#39;padding:10px; margin:1px; color:white; font-family:Calibri, sans-serif; background-color:#305496;border-radius:8px;&#39;&gt;&lt;h2&gt;Automated Triage Response - ID: &quot; + caseID + &quot;&lt;/h2&gt;&quot;;\r\n// ******************** reportedBy ******************* //\r\nreportNice = reportNice + &quot;&lt;h3&gt;Summary:&lt;/h3&gt; &lt;table style=&#39;color:#565867; background-color:rgb(237,237,237);border-radius:10px;width:99%;&#39;&gt;\t&lt;tr&gt;&lt;td style=&#39;vertical-align:top; border-right:white solid thin;padding-right:10px;margin-right:10px;&#39;&gt;&lt;h4 style=&#39;background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;&#39;&gt;Reporter Details&lt;/h4&gt;&quot;;\r\n// ******************** reportedBy ********************* //\r\nString reportedBy = &quot;&lt;p&gt;Reported by: [ &quot; + howKnown + &quot; ]&quot;;\r\nif(howKnown!=&quot;anonymous&quot;) {\r\nreportedBy = reportedBy + Lib_sUserFirstName + &quot; &quot; + Lib_sUserSurname;\r\n}\r\nreportedBy = reportedBy + &quot;&lt;/p&gt;&quot;;\r\nreportedBy = reportedBy + &quot;&lt;ul&gt;&lt;li&gt;Contact email: &lt;b style=&#39;color:black;&#39;&gt;&quot;;\r\nif(email!=&quot;&quot;) {\r\nreportedBy = reportedBy + email + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nif(phone!=&quot;&quot;) {\r\nreportedBy = reportedBy + &quot;&lt;li&gt;Contact phone: &lt;b style=&#39;color:black;&#39;&gt;&quot; + phone + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nif(commMethod!=&quot;&quot;) {\r\nreportedBy = reportedBy + &quot;&lt;li&gt;Preferred contact method: &lt;b style=&#39;color:black;&#39;&gt;&quot; + commMethod + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nreportedBy = reportedBy + &quot;&lt;/ul&gt;&lt;/td&gt;&quot;;\r\n...\r\n\r\n```\r\nSendGrid transforms the user response to html and it looks fine, but when the html is transformed to pdf the background-color on the h4 is lost:\r\n`&lt;h4 style=&#39;background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;&#39;&gt;`\r\nIf anyone here has experience with Teneo, Java, HTML, PDF, SendGrid and has made it work I would appreciate some ponters.","title":"Convert a Teneo HTML report to PDF while maintaining the style","body":"<p>I've successfully created a template used by sendgrid to send an html formatted email to customer service at the end of an AI conversation. I discovered that when viewed in outlook the style elements were not being applied as expected (does not look the same in outlook as in a webmail client like gmail).</p>\n<p>I tried to transform the html output to a pdf document, hoping the look and feel issues would be resolved with a true representation of the html, but it was not. SendGrid only supports inline css and there are several further restrictions on what you can do with html, so I used tables to handle positioning. Unfortunately the H4 heading I inserted in the table, while looking fine in webmail, does not carry background colour into the pdf.</p>\n<pre><code>// ******************** reportNice ******************* //\nString reportNice = &quot;&lt;div style='padding:10px; margin:1px; color:white; font-family:Calibri, sans-serif; background-color:#305496;border-radius:8px;'&gt;&lt;h2&gt;Automated Triage Response - ID: &quot; + caseID + &quot;&lt;/h2&gt;&quot;;\n// ******************** reportedBy ******************* //\nreportNice = reportNice + &quot;&lt;h3&gt;Summary:&lt;/h3&gt; &lt;table style='color:#565867; background-color:rgb(237,237,237);border-radius:10px;width:99%;'&gt; &lt;tr&gt;&lt;td style='vertical-align:top; border-right:white solid thin;padding-right:10px;margin-right:10px;'&gt;&lt;h4 style='background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;'&gt;Reporter Details&lt;/h4&gt;&quot;;\n// ******************** reportedBy ********************* //\nString reportedBy = &quot;&lt;p&gt;Reported by: [ &quot; + howKnown + &quot; ]&quot;;\nif(howKnown!=&quot;anonymous&quot;) {\nreportedBy = reportedBy + Lib_sUserFirstName + &quot; &quot; + Lib_sUserSurname;\n}\nreportedBy = reportedBy + &quot;&lt;/p&gt;&quot;;\nreportedBy = reportedBy + &quot;&lt;ul&gt;&lt;li&gt;Contact email: &lt;b style='color:black;'&gt;&quot;;\nif(email!=&quot;&quot;) {\nreportedBy = reportedBy + email + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nif(phone!=&quot;&quot;) {\nreportedBy = reportedBy + &quot;&lt;li&gt;Contact phone: &lt;b style='color:black;'&gt;&quot; + phone + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nif(commMethod!=&quot;&quot;) {\nreportedBy = reportedBy + &quot;&lt;li&gt;Preferred contact method: &lt;b style='color:black;'&gt;&quot; + commMethod + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nreportedBy = reportedBy + &quot;&lt;/ul&gt;&lt;/td&gt;&quot;;\n...\n\n</code></pre>\n<p>SendGrid transforms the user response to html and it looks fine, but when the html is transformed to pdf the background-color on the h4 is lost:\n<code>&lt;h4 style='background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;'&gt;</code>\nIf anyone here has experience with Teneo, Java, HTML, PDF, SendGrid and has made it work I would appreciate some ponters.</p>\n"},{"tags":["java","google-api","google-analytics-api","google-api-java-client","google-analytics-4"],"comments":[{"owner":{"account_id":1593537,"reputation":1348,"user_id":1476321,"accept_rate":41,"display_name":"Chris Harrington"},"score":0,"creation_date":1692127796,"post_id":76906201,"comment_id":135581524,"body_markdown":"I would suggest having Fiddler or equivalent capture the traffic so you can see what API calls are being made. Is generally a useful thing to do with APIs - especially if you&#39;re using a client library instead of making HTTP calls directly.","body":"I would suggest having Fiddler or equivalent capture the traffic so you can see what API calls are being made. Is generally a useful thing to do with APIs - especially if you&#39;re using a client library instead of making HTTP calls directly."},{"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1692782063,"post_id":76906201,"comment_id":135669943,"body_markdown":"please edit your question and include [example] there is not enough code here to recreate the issue.   I have used multiple addDimensions and it works fine.","body":"please edit your question and include <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> there is not enough code here to recreate the issue.   I have used multiple addDimensions and it works fine."}],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694529792,"creation_date":1694529792,"answer_id":77090243,"question_id":76906201,"body_markdown":"This is a java and / or filter for what I created,Remember filtering of events and dimensions should be in a compatible way. Log in [Here][1] and play with your events, dimensions and metrics to find out.\r\n\r\nof course, you can change date range as well.\r\n\r\n \r\n\r\n    `GoogleCredentials credentials =\r\n    \t\t\t\t\tGoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\r\n    \r\n    \t\t\tBetaAnalyticsDataSettings betaAnalyticsDataSettings =\r\n    \t\t\t\t\tBetaAnalyticsDataSettings.newBuilder()\r\n    \t\t\t\t\t.setCredentialsProvider(FixedCredentialsProvider.create(credentials))\r\n    \t\t\t\t\t.build();    \r\n    \r\n    \t\t\ttry (BetaAnalyticsDataClient analyticsData =\r\n    \t\t\t\t\tBetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\r\n    \r\n    \r\n    \r\n    \t\t\t\tRunReportRequest request =\r\n    \t\t\t\t\t\tRunReportRequest.newBuilder()\r\n    \t\t\t\t\t\t.setProperty(&quot;properties/&quot; + your propertyId)\r\n    \t\t\t\t\t\t.addDateRanges(DateRange.newBuilder().setStartDate(&quot;365daysAgo&quot;).setEndDate(&quot;yesterday&quot;))\r\n    \t\t\t\t\t\t \r\n    \r\n    \r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;date&quot;)) \r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;eventName&quot;))\r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;customEvent:XXXXX&quot;)) // instead of XXXXX write your custom dimension\r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;fullPageUrl&quot;)) // this is not a customised dimension\r\n    \r\n    \r\n    \r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventCount&quot;))\r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventsPerSession&quot;))\r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventValue&quot;))\r\n    \r\n    \r\n    \t\t\t\t\t\t.setDimensionFilter(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t.setOrGroup(FilterExpressionList.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t.addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 1st event to filter&quot;))))  // for example page_view\r\n    \t\t\t\t\t\t\t\t\t\t.addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 2nd event&quot;)))))\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t.setAndGroup(FilterExpressionList.newBuilder().addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 3rd event&quot;))))))\r\n    \r\n    \t\t\t\t\t\t.setLimit(100000)\r\n    \t\t\t\t\t\t.build();\r\n    \r\n    \t\t\t\t \r\n    \t\t\t\tRunReportResponse response = analyticsData.runReport(request);`\r\n\r\n\r\n  [1]: https://ga-dev-tools.google/ga4/dimensions-metrics-explorer/\r\n\r\n\r\nThe Request Body as an example could be like this:\r\n\r\n    \r\n    property: &quot;properties/write your propertId&quot;\r\n    dimensions {\r\n      name: &quot;date&quot;\r\n    }\r\n    dimensions {\r\n      name: &quot;eventName&quot;\r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:category&quot; // my custom dimensions is category that should be written after &quot;customEvent:&quot; \r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:action&quot; // my custom dimensions is action that should be written after &quot;customEvent:&quot; \r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:label&quot; // my custom dimensions is label that should be written after &quot;customEvent:&quot; \r\n    }\r\n    metrics {\r\n      name: &quot;eventCount&quot;\r\n    }\r\n    metrics {\r\n      name: &quot;eventsPerSession&quot;\r\n    }\r\n    metrics {\r\n      name: &quot;eventValue&quot;\r\n    }\r\n    date_ranges {\r\n      start_date: &quot;2023-05-22&quot; \r\n      end_date: &quot;2023-05-23&quot;\r\n    }\r\n    dimension_filter {\r\n      or_group {\r\n        expressions {\r\n          filter {\r\n            field_name: &quot;eventName&quot;\r\n            string_filter {\r\n              match_type: EXACT\r\n              value: &quot;Something&quot;  \r\n            }\r\n          }\r\n        }\r\n        expressions {\r\n          filter {\r\n            field_name: &quot;eventName&quot;\r\n            string_filter {\r\n              match_type: EXACT\r\n              value: &quot;myCustomEventName &quot; // as an example I wrote my customised event name\r\n            }\r\n          }\r\n        }\r\n        expressions {\r\n          and_group {\r\n            expressions {\r\n              filter {\r\n                field_name: &quot;eventName&quot;\r\n                string_filter {\r\n                  match_type: EXACT\r\n                  value: &quot;SOMETHING&quot;   \r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n","title":"GA4 Data API - How to set multiple dimensions and metrics","body":"<p>This is a java and / or filter for what I created,Remember filtering of events and dimensions should be in a compatible way. Log in <a href=\"https://ga-dev-tools.google/ga4/dimensions-metrics-explorer/\" rel=\"nofollow noreferrer\">Here</a> and play with your events, dimensions and metrics to find out.</p>\n<p>of course, you can change date range as well.</p>\n<pre><code>`GoogleCredentials credentials =\n                    GoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\n\n            BetaAnalyticsDataSettings betaAnalyticsDataSettings =\n                    BetaAnalyticsDataSettings.newBuilder()\n                    .setCredentialsProvider(FixedCredentialsProvider.create(credentials))\n                    .build();    \n\n            try (BetaAnalyticsDataClient analyticsData =\n                    BetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\n\n\n\n                RunReportRequest request =\n                        RunReportRequest.newBuilder()\n                        .setProperty(&quot;properties/&quot; + your propertyId)\n                        .addDateRanges(DateRange.newBuilder().setStartDate(&quot;365daysAgo&quot;).setEndDate(&quot;yesterday&quot;))\n                         \n\n\n                        .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;)) \n                        .addDimensions(Dimension.newBuilder().setName(&quot;eventName&quot;))\n                        .addDimensions(Dimension.newBuilder().setName(&quot;customEvent:XXXXX&quot;)) // instead of XXXXX write your custom dimension\n                        .addDimensions(Dimension.newBuilder().setName(&quot;fullPageUrl&quot;)) // this is not a customised dimension\n\n\n\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventCount&quot;))\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventsPerSession&quot;))\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventValue&quot;))\n\n\n                        .setDimensionFilter(FilterExpression.newBuilder()\n                                .setOrGroup(FilterExpressionList.newBuilder()\n                                        .addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 1st event to filter&quot;))))  // for example page_view\n                                        .addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 2nd event&quot;)))))\n                                \n                                \n                                \n                                \n                                .setAndGroup(FilterExpressionList.newBuilder().addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 3rd event&quot;))))))\n\n                        .setLimit(100000)\n                        .build();\n\n                 \n                RunReportResponse response = analyticsData.runReport(request);`\n</code></pre>\n<p>The Request Body as an example could be like this:</p>\n<pre><code>property: &quot;properties/write your propertId&quot;\ndimensions {\n  name: &quot;date&quot;\n}\ndimensions {\n  name: &quot;eventName&quot;\n}\ndimensions {\n  name: &quot;customEvent:category&quot; // my custom dimensions is category that should be written after &quot;customEvent:&quot; \n}\ndimensions {\n  name: &quot;customEvent:action&quot; // my custom dimensions is action that should be written after &quot;customEvent:&quot; \n}\ndimensions {\n  name: &quot;customEvent:label&quot; // my custom dimensions is label that should be written after &quot;customEvent:&quot; \n}\nmetrics {\n  name: &quot;eventCount&quot;\n}\nmetrics {\n  name: &quot;eventsPerSession&quot;\n}\nmetrics {\n  name: &quot;eventValue&quot;\n}\ndate_ranges {\n  start_date: &quot;2023-05-22&quot; \n  end_date: &quot;2023-05-23&quot;\n}\ndimension_filter {\n  or_group {\n    expressions {\n      filter {\n        field_name: &quot;eventName&quot;\n        string_filter {\n          match_type: EXACT\n          value: &quot;Something&quot;  \n        }\n      }\n    }\n    expressions {\n      filter {\n        field_name: &quot;eventName&quot;\n        string_filter {\n          match_type: EXACT\n          value: &quot;myCustomEventName &quot; // as an example I wrote my customised event name\n        }\n      }\n    }\n    expressions {\n      and_group {\n        expressions {\n          filter {\n            field_name: &quot;eventName&quot;\n            string_filter {\n              match_type: EXACT\n              value: &quot;SOMETHING&quot;   \n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":16886280,"reputation":11,"user_id":12211014,"display_name":"Denizcan Ylmaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694529792,"creation_date":1692104812,"question_id":76906201,"body_markdown":"I am trying to generate a report using the Data API of GA4. However, I could not manage to add multiple metrics or dimensions to my report builder. \r\n\r\nThis is how I try to achieve this functionality:\r\n\r\n``` \r\n           RunReportRequest request =\r\n                RunReportRequest.newBuilder()\r\n                .setProperty(&quot;properties/&quot; + propertyId)\r\n                .addAllDimensions(new ArrayList&lt;Dimension&gt;(Arrays.asList(Dimension.newBuilder().setName(&quot;date&quot;).build(), Dimension.newBuilder().setName(&quot;day&quot;).build())))\r\n//                .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\r\n//                .addMetrics(Metric.newBuilder().setName(&quot;totalUsers&quot;).setName(&quot;screenPageViews&quot;))\r\n                .addAllMetrics(new ArrayList&lt;Metric&gt;(Arrays.asList(Metric.newBuilder().setName(&quot;totalUsers&quot;).build(), Metric.newBuilder().setName(&quot;screenPageViews&quot;).build())))\r\n                .addDateRanges(DateRange.newBuilder().setStartDate(&quot;yesterday&quot;).setEndDate(&quot;today&quot;))\r\n                .build();\r\n```\r\nAny help is appreciated.\r\n\r\n\r\nI tried to get my report with 2 dimensions and 2 metrics, but instead got it with 1 dimension and 1 metric, which is the first one in both cases.","title":"GA4 Data API - How to set multiple dimensions and metrics","body":"<p>I am trying to generate a report using the Data API of GA4. However, I could not manage to add multiple metrics or dimensions to my report builder.</p>\n<p>This is how I try to achieve this functionality:</p>\n<pre><code>           RunReportRequest request =\n                RunReportRequest.newBuilder()\n                .setProperty(&quot;properties/&quot; + propertyId)\n                .addAllDimensions(new ArrayList&lt;Dimension&gt;(Arrays.asList(Dimension.newBuilder().setName(&quot;date&quot;).build(), Dimension.newBuilder().setName(&quot;day&quot;).build())))\n//                .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\n//                .addMetrics(Metric.newBuilder().setName(&quot;totalUsers&quot;).setName(&quot;screenPageViews&quot;))\n                .addAllMetrics(new ArrayList&lt;Metric&gt;(Arrays.asList(Metric.newBuilder().setName(&quot;totalUsers&quot;).build(), Metric.newBuilder().setName(&quot;screenPageViews&quot;).build())))\n                .addDateRanges(DateRange.newBuilder().setStartDate(&quot;yesterday&quot;).setEndDate(&quot;today&quot;))\n                .build();\n</code></pre>\n<p>Any help is appreciated.</p>\n<p>I tried to get my report with 2 dimensions and 2 metrics, but instead got it with 1 dimension and 1 metric, which is the first one in both cases.</p>\n"},{"tags":["java","spring-boot","parameters","nativequery"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694531696,"post_id":77090227,"comment_id":135901818,"body_markdown":"This has nothing to do with Spring Boot 3 but rather Hibernate fixing things (as it worked by change not design). If you want to pass entities write a JPQL which actually holds the mapping information.","body":"This has nothing to do with Spring Boot 3 but rather Hibernate fixing things (as it worked by change not design). If you want to pass entities write a JPQL which actually holds the mapping information."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1694536088,"post_id":77090227,"comment_id":135902802,"body_markdown":"BTW &#39;changing the call of the method to send these types&#39; can be easily avoided, just keep the original version of the method as a default interface method that will delegate to the new method","body":"BTW &#39;changing the call of the method to send these types&#39; can be easily avoided, just keep the original version of the method as a default interface method that will delegate to the new method"},{"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"score":0,"creation_date":1694600237,"post_id":77090227,"comment_id":135911561,"body_markdown":"Thanks. @m-deinum  do you know if there is any Hibernate documentation to read about this change and the reasons for it, as it came as a surprise for me?","body":"Thanks. @m-deinum  do you know if there is any Hibernate documentation to read about this change and the reasons for it, as it came as a surprise for me?"},{"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"score":0,"creation_date":1694600342,"post_id":77090227,"comment_id":135911576,"body_markdown":"Thanks @crizzis, if there is no other option where I can avoid null-checks or using JPA queries, I guess using default interface methods (a new concept to me, just tried it out and it works) is a viable option. But I still need to do the null checks in that method. Also, the interface method that is changed to user Integers can&#39;t be made private, so I will then expose both methods to the callers which could be confusing.","body":"Thanks @crizzis, if there is no other option where I can avoid null-checks or using JPA queries, I guess using default interface methods (a new concept to me, just tried it out and it works) is a viable option. But I still need to do the null checks in that method. Also, the interface method that is changed to user Integers can&#39;t be made private, so I will then expose both methods to the callers which could be confusing."},{"owner":{"account_id":1806969,"reputation":102,"user_id":1643891,"display_name":"Sup19"},"score":0,"creation_date":1702038599,"post_id":77090227,"comment_id":136851662,"body_markdown":"@maccer Stumbled on the same issue just now. Did you happened to find any supporting documentation by hibernate? Also, what approach did you take to fix this?","body":"@maccer Stumbled on the same issue just now. Did you happened to find any supporting documentation by hibernate? Also, what approach did you take to fix this?"}],"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529678,"creation_date":1694529678,"question_id":77090227,"body_markdown":"Can entity classes be used as parameters for repository method calls for native queries in Spring Boot 3?\r\n\r\nI have some native queries that I have defined in a Spring CrudRepository:\r\n\r\n    @Repository\r\n    interface DataValueRepository extends CrudRepository&lt;DataValue, Long&gt; {\r\n    \r\n    \r\n    @Query(value=&quot;&quot;&quot;&quot;\r\n    select .......\r\n    from data_value dv\r\n                where\r\n                    (:neighborhood is null or neighborhood_id = :neighborhood) and\r\n                    (:property is null or property_id = :property) and\r\n                    (:building is null or building_id = :building) and\r\n                    (:household is null or household_id = :household) and\r\n                    datetime_local &gt;= :dateLocalFrom and\r\n                    datetime_local &lt; :dateLocalToExclusive and\r\n                    type in (:types) and\r\n                    level = :level\r\n    &quot;&quot;&quot;\r\n    , nativeQuery = true)\r\n    List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Neighborhood neighborhood, Property property, Building building, Household household, List&lt;String&gt; types, String level, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\r\n    \r\n    }\r\n\r\nIn Spring Boot 2.7, I can send in entity objects such as Neighborhood neighborhood as above, and the :neighborhood in the native query will be substituted by the neighborhood id  or null if the entity is null. \r\n\r\nI *used* to be able to call the repository method like so, where neighborhood, property, building, household are entity objects:\r\n\r\n    dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood, property, building, household, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\r\n\r\n\r\n**After upgrading to Spring Boot 3, this no longer works**. I get an error\r\n\r\n    Could not resolve NativeQuery parameter type : `org.hibernate.query.internal.QueryParameterNamedImpl@aaba12d3`\r\n\r\nI found a workaround in this post that says that it no longer works to pass entities into the repository methods: \r\n[https://stackoverflow.com/a/76522587/3150408][1]\r\n\r\nSo rewriting the repository method to use Integer / Long instead of the entity classes...\r\n\r\n    List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Integer neighborhood, Integer property, Integer building, Long household, List&lt;String&gt; types, String level, String targetPeriod, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\r\n\r\n...and changing the call of the method to send these types...\r\n\r\n    dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood != null ? neighborhood.getId() : null, property != null ? property.getId() : null, building != null ? building.getId() : null, household != null ? household.getId() : null, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\r\n\r\n...makes the error go away. \r\n\r\nBut I think it is quite cumbersome to having to write all the null checks on the entity objects. Is this really the only way of calling these methods in Spring Boot 3? Is there no way to use entities with native queries as before? I can&#39;t find any details in any upgrade guides about this change.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76522587/3150408","title":"Can entity classes be used as parameters for CrudRepository native queries in Spring Boot 3?","body":"<p>Can entity classes be used as parameters for repository method calls for native queries in Spring Boot 3?</p>\n<p>I have some native queries that I have defined in a Spring CrudRepository:</p>\n<pre><code>@Repository\ninterface DataValueRepository extends CrudRepository&lt;DataValue, Long&gt; {\n\n\n@Query(value=&quot;&quot;&quot;&quot;\nselect .......\nfrom data_value dv\n            where\n                (:neighborhood is null or neighborhood_id = :neighborhood) and\n                (:property is null or property_id = :property) and\n                (:building is null or building_id = :building) and\n                (:household is null or household_id = :household) and\n                datetime_local &gt;= :dateLocalFrom and\n                datetime_local &lt; :dateLocalToExclusive and\n                type in (:types) and\n                level = :level\n&quot;&quot;&quot;\n, nativeQuery = true)\nList&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Neighborhood neighborhood, Property property, Building building, Household household, List&lt;String&gt; types, String level, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\n\n}\n</code></pre>\n<p>In Spring Boot 2.7, I can send in entity objects such as Neighborhood neighborhood as above, and the :neighborhood in the native query will be substituted by the neighborhood id  or null if the entity is null.</p>\n<p>I <em>used</em> to be able to call the repository method like so, where neighborhood, property, building, household are entity objects:</p>\n<pre><code>dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood, property, building, household, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\n</code></pre>\n<p><strong>After upgrading to Spring Boot 3, this no longer works</strong>. I get an error</p>\n<pre><code>Could not resolve NativeQuery parameter type : `org.hibernate.query.internal.QueryParameterNamedImpl@aaba12d3`\n</code></pre>\n<p>I found a workaround in this post that says that it no longer works to pass entities into the repository methods:\n<a href=\"https://stackoverflow.com/a/76522587/3150408\">https://stackoverflow.com/a/76522587/3150408</a></p>\n<p>So rewriting the repository method to use Integer / Long instead of the entity classes...</p>\n<pre><code>List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Integer neighborhood, Integer property, Integer building, Long household, List&lt;String&gt; types, String level, String targetPeriod, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\n</code></pre>\n<p>...and changing the call of the method to send these types...</p>\n<pre><code>dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood != null ? neighborhood.getId() : null, property != null ? property.getId() : null, building != null ? building.getId() : null, household != null ? household.getId() : null, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\n</code></pre>\n<p>...makes the error go away.</p>\n<p>But I think it is quite cumbersome to having to write all the null checks on the entity objects. Is this really the only way of calling these methods in Spring Boot 3? Is there no way to use entities with native queries as before? I can't find any details in any upgrade guides about this change.</p>\n"},{"tags":["java","xtext","language-server-protocol"],"comments":[{"owner":{"account_id":11293739,"reputation":3639,"user_id":8281848,"display_name":"MSpiller"},"score":0,"creation_date":1694176730,"post_id":77063252,"comment_id":135860671,"body_markdown":"Are you talking about the commands that are part of the [LSP protocol](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#command) or do you want to extend the LSP protocol itself?","body":"Are you talking about the commands that are part of the <a href=\"https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#command\" rel=\"nofollow noreferrer\">LSP protocol</a> or do you want to extend the LSP protocol itself?"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183292,"post_id":77063252,"comment_id":135862090,"body_markdown":"I want to extend the protocol. Pass custom commands that are not part of the LSP.","body":"I want to extend the protocol. Pass custom commands that are not part of the LSP."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183359,"post_id":77063252,"comment_id":135862104,"body_markdown":"I have seen some examples on how to write a server from scratch in nodejs and java, but not getting a simple enough example to extend an existing server impl.","body":"I have seen some examples on how to write a server from scratch in nodejs and java, but not getting a simple enough example to extend an existing server impl."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183546,"post_id":77063252,"comment_id":135862131,"body_markdown":"Here the methods defined from ILanguageServerExtension gets added to the map: https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132","body":"Here the methods defined from ILanguageServerExtension gets added to the map: <a href=\"https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132\" rel=\"nofollow noreferrer\">github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694236352,"post_id":77063252,"comment_id":135868055,"body_markdown":"are you aware of the server module. this is the one contructing the LanguageServerImpl","body":"are you aware of the server module. this is the one contructing the LanguageServerImpl"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694260470,"post_id":77063252,"comment_id":135869883,"body_markdown":"I have added the code above where I bind MyLanguageServerExtension in MyIdeModule using bindILanguageServerExtension","body":"I have added the code above where I bind MyLanguageServerExtension in MyIdeModule using bindILanguageServerExtension"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694260505,"post_id":77063252,"comment_id":135869885,"body_markdown":"@ChristianDietrich please check my edit 2","body":"@ChristianDietrich please check my edit 2"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694265399,"post_id":77063252,"comment_id":135870395,"body_markdown":"again Server Module = Server in general. Ide Module = Language Specific.\n=&gt; where did you bind your LanguageServer Subclass","body":"again Server Module = Server in general. Ide Module = Language Specific. =&gt; where did you bind your LanguageServer Subclass"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694326926,"post_id":77063252,"comment_id":135874947,"body_markdown":"I am using the existing SocketServerLauncher and LanguageServerImpl. I thought if you are using ILanguageServerExtension, you don&#39;t need to write your own LanguageServer. Maybe I have misunderstood the purpose of ILanguageServerExtension in that case","body":"I am using the existing SocketServerLauncher and LanguageServerImpl. I thought if you are using ILanguageServerExtension, you don&#39;t need to write your own LanguageServer. Maybe I have misunderstood the purpose of ILanguageServerExtension in that case"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694327059,"post_id":77063252,"comment_id":135874955,"body_markdown":"what do I need to implement in my LanguageServer subclass?","body":"what do I need to implement in my LanguageServer subclass?"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694496837,"post_id":77063252,"comment_id":135894560,"body_markdown":"beside that it would be really helpful to have a reproducing sample and unit test.","body":"beside that it would be really helpful to have a reproducing sample and unit test."},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694496981,"post_id":77063252,"comment_id":135894573,"body_markdown":"you might also have a look at org.eclipse.xtext.ide.tests.testlanguage.ide.TestLangLSPExtension in Xtext codebase","body":"you might also have a look at org.eclipse.xtext.ide.tests.testlanguage.ide.TestLangLSPExte&zwnj;&#8203;nsion in Xtext codebase"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694497073,"post_id":77063252,"comment_id":135894589,"body_markdown":"if you want to subclass language server you need to create your own launcher class / servermodule subclass","body":"if you want to subclass language server you need to create your own launcher class / servermodule subclass"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694502753,"post_id":77063252,"comment_id":135895378,"body_markdown":"@ChristianDietrich I have based my code on TestLangLSPExtension, and ideally I would not want to implement my own LanguageServer. I have used the existing SocketServerLauncher and LanguageServerImpl, and implemented  MyLanguageServerExtension, which I have shown above.","body":"@ChristianDietrich I have based my code on TestLangLSPExtension, and ideally I would not want to implement my own LanguageServer. I have used the existing SocketServerLauncher and LanguageServerImpl, and implemented  MyLanguageServerExtension, which I have shown above."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694502816,"post_id":77063252,"comment_id":135895395,"body_markdown":"I am skeptical of what JSON message does `client.sendRequest` actually sends. Maybe that&#39;s the culprit -- will debug it and get back","body":"I am skeptical of what JSON message does <code>client.sendRequest</code> actually sends. Maybe that&#39;s the culprit -- will debug it and get back"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694518361,"post_id":77063252,"comment_id":135898503,"body_markdown":"maybe the problem is also the simple param.\nto my knowledge all parameters in the protocol are wrapped into params objects","body":"maybe the problem is also the simple param. to my knowledge all parameters in the protocol are wrapped into params objects"}],"answers":[{"tags":[],"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694520164,"creation_date":1694520164,"answer_id":77088922,"question_id":77063252,"body_markdown":"i gave it a quick try with this test and it works fine\r\n\r\n\tpublic class DullyTest extends AbstractLanguageServerTest {\r\n\r\n\t\tpublic DullyTest() {\r\n\t\t\tsuper(&quot;mydsl&quot;);\r\n\t\t}\r\n\r\n\r\n\t\t@Test\r\n\t\tpublic void testit() throws InterruptedException, ExecutionException {\r\n\t\t\tinitialize( (e) -&gt; {});\r\n\r\n\t\t\tMessageConsumer consumer = new MessageConsumer() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void consume(Message message) throws MessageIssueException, JsonRpcException {\r\n\t\t\t\t\tSystem.out.println(message);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// languageServer.supportedMethods();\r\n\t\t\tRemoteEndpoint endpoint = new RemoteEndpoint(consumer , languageServer);\r\n\t\t\tendpoint.consume(init(new RequestMessage(), it -&gt; {\r\n\t\t\t\tit.setId(&quot;1&quot;);\r\n\t\t\t\tit.setMethod(&quot;custom/data&quot;);\r\n\t\t\t\tit.setParams(&quot;myparam&quot;);\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tstatic &lt;T&gt; T init(T value, Consumer&lt;T&gt; initializer) {\r\n\t\t\tinitializer.accept(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t}","title":"Custom messages in xtext based language server","body":"<p>i gave it a quick try with this test and it works fine</p>\n<pre><code>public class DullyTest extends AbstractLanguageServerTest {\n\n    public DullyTest() {\n        super(&quot;mydsl&quot;);\n    }\n\n\n    @Test\n    public void testit() throws InterruptedException, ExecutionException {\n        initialize( (e) -&gt; {});\n\n        MessageConsumer consumer = new MessageConsumer() {\n            @Override\n            public void consume(Message message) throws MessageIssueException, JsonRpcException {\n                System.out.println(message);\n            }\n        };\n        // languageServer.supportedMethods();\n        RemoteEndpoint endpoint = new RemoteEndpoint(consumer , languageServer);\n        endpoint.consume(init(new RequestMessage(), it -&gt; {\n            it.setId(&quot;1&quot;);\n            it.setMethod(&quot;custom/data&quot;);\n            it.setParams(&quot;myparam&quot;);\n        }));\n    }\n\n    static &lt;T&gt; T init(T value, Consumer&lt;T&gt; initializer) {\n        initializer.accept(value);\n        return value;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694529553,"creation_date":1694126899,"question_id":77063252,"body_markdown":"I am trying to extend my language server to handle custom commands from VS Code client. To debug, I am using `SocketLanguageServer`. I send a custom command from the client:\r\n```js\r\nclient.sendRequest(&quot;custom/data&quot;, &quot;foo&quot;).then(data =&gt; console.log(data));\r\n```\r\nSince the server is not aware of this command, as expected, I get\r\n```bash\r\norg.eclipse.lsp4j.jsonrpc.RemoteEndpoint fallbackResponseError\r\nSEVERE: Internal error: The json request &#39;custom/data&#39; is unknown.\r\njava.lang.UnsupportedOperationException: The json request &#39;custom/data&#39; is unknown.\r\n\tat org.eclipse.xtext.ide.server.LanguageServerImpl.request(LanguageServerImpl.java:1039)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint.request(GenericEndpoint.java:127)\r\n\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleRequest(RemoteEndpoint.java:261)\r\n\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:190)\r\n\tat org.eclipse.lsp4j.jsonrpc.validation.ReflectiveMessageValidator.consume(ReflectiveMessageValidator.java:68)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\nJust by implementing `ILanguageServerExtension` (leaving it empty as below)\r\n```java\r\n@JsonSegment(&quot;custom&quot;)\r\npublic class MyLanguageServerExtension implements ILanguageServerExtension {\r\n\r\n\t@Override\r\n\tpublic void initialize(ILanguageServerAccess access) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t}\r\n}\r\n```\r\nand binding it in `MyIdeModule`\r\n```java\r\npublic class MyIdeModule extends AbstractKinematicsIdeModule {\r\n\r\n\tpublic Class&lt;? extends ILanguageServerExtension&gt; bindILanguageServerExtension() {\r\n\t\treturn MyLanguageServerExtension.class;\r\n\t}\r\n}\r\n\r\n```\r\nI don&#39;t get the error anymore, but the client still complains of the promise not accepted\r\n```\r\nstack trace: Error: Internal error.\r\n\tat handleResponse (./node_modules/vscode-jsonrpc/lib/common/connection.js:477:48)\r\n\tat processMessageQueue (./node_modules/vscode-jsonrpc/lib/common/connection.js:292:17)\r\n\tat Immediate.&lt;anonymous&gt; (./node_modules/vscode-jsonrpc/lib/common/connection.js:276:13)\r\n\tat process.processImmediate (node:internal/timers:466:21)\r\n\tat process.callbackTrampoline (node:internal/async_hooks:130:17)\r\n/usr/share/code/resources/app/out/vs/workbench/api/node/out-vscode/vs/workbench/api/node/file:/mnt/vss/_work/1/s/src/vs/workbench/api/node/extHostConsoleForwarder.ts:31\r\nrejected promise not handled within 1 second: Error [ERR_STREAM_DESTROYED]: Cannot call write after a stream was destroyed\r\n```\r\nThere aren&#39;t many examples out there on how to use `ILanguageServerExtension`, and the ones which are available (e.g. sprotty) are way too complex. What is the minimal steps to make `MyLanguageServerExtension` aware of these custom commands? \r\n\r\n**Edit 1:** I implemented the following function in `MyLanguageServerExtension`, but same behaviour\r\n```java\r\n\t@JsonNotification\r\n\tCompletableFuture &lt;String&gt;  data(String message) {\r\n\t\tSystem.out.println(message);\r\n\t\tCompletableFuture&lt;String&gt; completableFuture = new CompletableFuture&lt;&gt;();\r\n\t\tcompletableFuture.complete(message + &quot; Hello from server!&quot;);\r\n\t\treturn completableFuture;\r\n\t}\r\n```\r\n**Edit 2:** based on the code here: https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132 and the example here https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java, I updated the code as follows\r\n```java\r\n@JsonSegment(&quot;custom&quot;)\r\npublic class MyLanguageServerExtension implements JsonRpcMethodProvider, ILanguageServerExtension {\r\n\r\n\t\r\n\tprivate ILanguageServerAccess access;\r\n\r\n\r\n\t@Override\r\n\tpublic void initialize(ILanguageServerAccess access) {\r\n\t\tthis.access = access;\r\n\t}\r\n\r\n\t@Override\r\n    public Map&lt;String, JsonRpcMethod&gt; supportedMethods() {\r\n\t\t// Define the supported methods and their corresponding JSON-RPC handlers here\r\n        Map&lt;String, JsonRpcMethod&gt; methods = new HashMap&lt;&gt;();\r\n        methods.putAll(ServiceEndpoints.getSupportedMethods(getClass()));\r\n        return methods;\r\n\t}\r\n\t\r\n\t@JsonRequest\r\n\tCompletableFuture &lt;String&gt;  data(String message) {\r\n\t\tSystem.out.println(message);\r\n\t\treturn CompletableFuture.completedFuture(message + &quot; Hello from server!&quot;);\r\n\t}\r\n}\r\n```\r\nBut still the method doesn&#39;t get called. The `supportedMethods()` gets called though. This is the print of `methods`\r\n```\r\n{custom/data=JsonRpcMethod (request) {\r\n\tmethodName: custom/data\r\n\tparameterTypes: [Ljava.lang.reflect.Type;@56a4479a\r\n\treturnType: class java.lang.String\r\n}}\r\n\r\n```\r\n**Edit 3:** failure trace of the test shown below\r\n```\r\njava.lang.TypeNotPresentException: Type [unknown] not present\r\n\tat java.base/sun.reflect.annotation.TypeNotPresentExceptionProxy.generateException(TypeNotPresentExceptionProxy.java:47)\r\n\tat java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:88)\r\n\tat com.sun.proxy.$Proxy28.value(Unknown Source)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.lambda$getSupportedMethods$0(ServiceEndpoints.java:102)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:66)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:60)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:90)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:82)\r\n\tat org.eclipse.xtext.ide.server.LanguageServerImpl.supportedMethods(LanguageServerImpl.java:1060)\r\n\tat org.eclipse.xtext.testing.AbstractLanguageServerTest.setup(AbstractLanguageServerTest.java:252)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$19(ClassBasedTestDescriptor.java:475)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$2(TestMethodTestDescriptor.java:167)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:164)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\tSuppressed: java.lang.NullPointerException: Cannot invoke &quot;java.io.File.exists()&quot; because &quot;this.root&quot; is null\r\n\t\tat org.eclipse.xtext.testing.AbstractLanguageServerTest.cleanup(AbstractLanguageServerTest.java:262)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\t\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\t\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\t\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\r\n\t\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$20(ClassBasedTestDescriptor.java:480)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$9(TestMethodTestDescriptor.java:236)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$12(TestMethodTestDescriptor.java:269)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:269)\r\n\t\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:268)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:234)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\t\t... 47 more\r\nCaused by: java.lang.NoClassDefFoundError: com/google/gson/TypeAdapterFactory\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:151)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:821)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:719)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:642)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:600)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:427)\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseSig(AnnotationParser.java:440)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseClassValue(AnnotationParser.java:421)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:350)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:287)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\r\n\tat java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:614)\r\n\tat java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:612)\r\n\tat java.base/java.lang.reflect.Executable.getAnnotation(Executable.java:582)\r\n\tat java.base/java.lang.reflect.Method.getAnnotation(Method.java:693)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.createMethodInfo(AnnotationUtil.java:78)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:64)\r\n\t... 78 more\r\nCaused by: java.lang.ClassNotFoundException: com.google.gson.TypeAdapterFactory\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\t... 104 more\r\n```\r\n","title":"Custom messages in xtext based language server","body":"<p>I am trying to extend my language server to handle custom commands from VS Code client. To debug, I am using <code>SocketLanguageServer</code>. I send a custom command from the client:</p>\n<pre class=\"lang-js prettyprint-override\"><code>client.sendRequest(&quot;custom/data&quot;, &quot;foo&quot;).then(data =&gt; console.log(data));\n</code></pre>\n<p>Since the server is not aware of this command, as expected, I get</p>\n<pre class=\"lang-bash prettyprint-override\"><code>org.eclipse.lsp4j.jsonrpc.RemoteEndpoint fallbackResponseError\nSEVERE: Internal error: The json request 'custom/data' is unknown.\njava.lang.UnsupportedOperationException: The json request 'custom/data' is unknown.\n    at org.eclipse.xtext.ide.server.LanguageServerImpl.request(LanguageServerImpl.java:1039)\n    at org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint.request(GenericEndpoint.java:127)\n    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleRequest(RemoteEndpoint.java:261)\n    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:190)\n    at org.eclipse.lsp4j.jsonrpc.validation.ReflectiveMessageValidator.consume(ReflectiveMessageValidator.java:68)\n    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\n    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\n    at org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Just by implementing <code>ILanguageServerExtension</code> (leaving it empty as below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSegment(&quot;custom&quot;)\npublic class MyLanguageServerExtension implements ILanguageServerExtension {\n\n    @Override\n    public void initialize(ILanguageServerAccess access) {\n        // TODO Auto-generated method stub\n        \n    }\n}\n</code></pre>\n<p>and binding it in <code>MyIdeModule</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyIdeModule extends AbstractKinematicsIdeModule {\n\n    public Class&lt;? extends ILanguageServerExtension&gt; bindILanguageServerExtension() {\n        return MyLanguageServerExtension.class;\n    }\n}\n\n</code></pre>\n<p>I don't get the error anymore, but the client still complains of the promise not accepted</p>\n<pre><code>stack trace: Error: Internal error.\n    at handleResponse (./node_modules/vscode-jsonrpc/lib/common/connection.js:477:48)\n    at processMessageQueue (./node_modules/vscode-jsonrpc/lib/common/connection.js:292:17)\n    at Immediate.&lt;anonymous&gt; (./node_modules/vscode-jsonrpc/lib/common/connection.js:276:13)\n    at process.processImmediate (node:internal/timers:466:21)\n    at process.callbackTrampoline (node:internal/async_hooks:130:17)\n/usr/share/code/resources/app/out/vs/workbench/api/node/out-vscode/vs/workbench/api/node/file:/mnt/vss/_work/1/s/src/vs/workbench/api/node/extHostConsoleForwarder.ts:31\nrejected promise not handled within 1 second: Error [ERR_STREAM_DESTROYED]: Cannot call write after a stream was destroyed\n</code></pre>\n<p>There aren't many examples out there on how to use <code>ILanguageServerExtension</code>, and the ones which are available (e.g. sprotty) are way too complex. What is the minimal steps to make <code>MyLanguageServerExtension</code> aware of these custom commands?</p>\n<p><strong>Edit 1:</strong> I implemented the following function in <code>MyLanguageServerExtension</code>, but same behaviour</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @JsonNotification\n    CompletableFuture &lt;String&gt;  data(String message) {\n        System.out.println(message);\n        CompletableFuture&lt;String&gt; completableFuture = new CompletableFuture&lt;&gt;();\n        completableFuture.complete(message + &quot; Hello from server!&quot;);\n        return completableFuture;\n    }\n</code></pre>\n<p><strong>Edit 2:</strong> based on the code here: <a href=\"https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132\" rel=\"nofollow noreferrer\">https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132</a> and the example here <a href=\"https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java\" rel=\"nofollow noreferrer\">https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java</a>, I updated the code as follows</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSegment(&quot;custom&quot;)\npublic class MyLanguageServerExtension implements JsonRpcMethodProvider, ILanguageServerExtension {\n\n    \n    private ILanguageServerAccess access;\n\n\n    @Override\n    public void initialize(ILanguageServerAccess access) {\n        this.access = access;\n    }\n\n    @Override\n    public Map&lt;String, JsonRpcMethod&gt; supportedMethods() {\n        // Define the supported methods and their corresponding JSON-RPC handlers here\n        Map&lt;String, JsonRpcMethod&gt; methods = new HashMap&lt;&gt;();\n        methods.putAll(ServiceEndpoints.getSupportedMethods(getClass()));\n        return methods;\n    }\n    \n    @JsonRequest\n    CompletableFuture &lt;String&gt;  data(String message) {\n        System.out.println(message);\n        return CompletableFuture.completedFuture(message + &quot; Hello from server!&quot;);\n    }\n}\n</code></pre>\n<p>But still the method doesn't get called. The <code>supportedMethods()</code> gets called though. This is the print of <code>methods</code></p>\n<pre><code>{custom/data=JsonRpcMethod (request) {\n    methodName: custom/data\n    parameterTypes: [Ljava.lang.reflect.Type;@56a4479a\n    returnType: class java.lang.String\n}}\n\n</code></pre>\n<p><strong>Edit 3:</strong> failure trace of the test shown below</p>\n<pre><code>java.lang.TypeNotPresentException: Type [unknown] not present\n    at java.base/sun.reflect.annotation.TypeNotPresentExceptionProxy.generateException(TypeNotPresentExceptionProxy.java:47)\n    at java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:88)\n    at com.sun.proxy.$Proxy28.value(Unknown Source)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.lambda$getSupportedMethods$0(ServiceEndpoints.java:102)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:66)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:60)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:90)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:82)\n    at org.eclipse.xtext.ide.server.LanguageServerImpl.supportedMethods(LanguageServerImpl.java:1060)\n    at org.eclipse.xtext.testing.AbstractLanguageServerTest.setup(AbstractLanguageServerTest.java:252)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$19(ClassBasedTestDescriptor.java:475)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$2(TestMethodTestDescriptor.java:167)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:164)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n    Suppressed: java.lang.NullPointerException: Cannot invoke &quot;java.io.File.exists()&quot; because &quot;this.root&quot; is null\n        at org.eclipse.xtext.testing.AbstractLanguageServerTest.cleanup(AbstractLanguageServerTest.java:262)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n        at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n        at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$20(ClassBasedTestDescriptor.java:480)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$9(TestMethodTestDescriptor.java:236)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$12(TestMethodTestDescriptor.java:269)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:269)\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:268)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:234)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n        ... 47 more\nCaused by: java.lang.NoClassDefFoundError: com/google/gson/TypeAdapterFactory\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:151)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:821)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:719)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:642)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:600)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:427)\n    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\n    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\n    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseSig(AnnotationParser.java:440)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseClassValue(AnnotationParser.java:421)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:350)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:287)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\n    at java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:614)\n    at java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:612)\n    at java.base/java.lang.reflect.Executable.getAnnotation(Executable.java:582)\n    at java.base/java.lang.reflect.Method.getAnnotation(Method.java:693)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.createMethodInfo(AnnotationUtil.java:78)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:64)\n    ... 78 more\nCaused by: java.lang.ClassNotFoundException: com.google.gson.TypeAdapterFactory\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    ... 104 more\n</code></pre>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":1450087,"reputation":11188,"user_id":1409374,"display_name":"rickhg12hs"},"score":1,"creation_date":1694517339,"post_id":77088079,"comment_id":135898290,"body_markdown":"You can _&quot;update fields in a MongoDB collection object based on their old values&quot;_ by using a [pipeline in the update](https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/).","body":"You can <i>&quot;update fields in a MongoDB collection object based on their old values&quot;</i> by using a <a href=\"https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/\" rel=\"nofollow noreferrer\">pipeline in the update</a>."}],"owner":{"account_id":13747822,"reputation":19,"user_id":22492868,"display_name":"Nikilai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694529502,"creation_date":1694512985,"question_id":77088079,"body_markdown":"I need to update fields in a MongoDB collection object based on their old values. My task involves encoding certain fields in all MongoDB documents from a specific collection. I&#39;m wondering if there&#39;s a way to update a field based on its old value, perhaps using a callback API or a similar approach. My project is written in Java.\r\n\r\nI&#39;ve attempted to update the collection as follows: I first retrieve all documents from the collection and then iterate over each document, using updateOne based on the document ID.\r\n\r\nThank you in advance!","title":"Update field in mongodb collection object based on old value","body":"<p>I need to update fields in a MongoDB collection object based on their old values. My task involves encoding certain fields in all MongoDB documents from a specific collection. I'm wondering if there's a way to update a field based on its old value, perhaps using a callback API or a similar approach. My project is written in Java.</p>\n<p>I've attempted to update the collection as follows: I first retrieve all documents from the collection and then iterate over each document, using updateOne based on the document ID.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","multithreading","parallel-processing"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694529335,"post_id":77090117,"comment_id":135901202,"body_markdown":"&quot;I think there are not any bugs on it&quot; but can you guarantee it?","body":"&quot;I think there are not any bugs on it&quot; but can you guarantee it?"},{"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"score":0,"creation_date":1694530172,"post_id":77090117,"comment_id":135901428,"body_markdown":"Yes, I can guarantee it.","body":"Yes, I can guarantee it."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532044,"post_id":77090117,"comment_id":135901915,"body_markdown":"I like your moxy, but if I remember my half-assed CS courses correctly, you can&#39;t prove that there is no bug in a piece of code. It&#39;s called the Faulting Problem.","body":"I like your moxy, but if I remember my half-assed CS courses correctly, you can&#39;t prove that there is no bug in a piece of code. It&#39;s called the Faulting Problem."},{"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"score":0,"creation_date":1694532337,"post_id":77090117,"comment_id":135901970,"body_markdown":"That is not the main point. For the first MergeSortTask, I can compare it with the ground truth, and I have done it on my own computer but did not include it due to decreasing the complexity of the code. And I have tried many times and the problem is not on that part. That is why I said it has no bug.","body":"That is not the main point. For the first MergeSortTask, I can compare it with the ground truth, and I have done it on my own computer but did not include it due to decreasing the complexity of the code. And I have tried many times and the problem is not on that part. That is why I said it has no bug."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532513,"post_id":77090117,"comment_id":135902006,"body_markdown":"`Arrays.parallelSort()` is at least not documented to be stable, do you know if it is?","body":"<code>Arrays.parallelSort()</code> is at least not documented to be stable, do you know if it is?"}],"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529114,"creation_date":1694529005,"question_id":77090117,"body_markdown":"Here is the code.\r\n\r\nI use parallel computing to build the merge sort and the MergeSortTask class creates multiple threads to divide the array into some sub-array and use merge sort to sort it. The MergeTask is the thread to merge two sorted arrays into one sorted array. For generating array is in the getArray function, and I add a seed on this generating part.\r\nFor the MergeSortTask part, I think there are not any bugs on it. So the problem is on the MergeTask part.\r\nFor the two input arrays a,b. I try to get the rank(a) and rank(b), of each element using binary search which means the position in arrays a and b if I put the element into that array. And the default data is Long.MIN_VALUE in the result array, and if \r\n\r\n    result[rank(a)+rank(b)].equal(Long.MIN_VALUE) \r\n\r\nI may assign that element into that position, if not just use open addressing.\r\n\r\n    import java.util.*;\r\n    public class TotalParallelMergeSort {\r\n        static Long[] arr;\r\n        static Long[] checking;\r\n        static int pnum = 10;\r\n    \r\n        static Long[] result;\r\n    \r\n        static int size=100000;\r\n    \r\n        static int beginning=0;\r\n    \r\n        static Queue&lt;Long[]&gt; que= new LinkedList&lt;&gt;();\r\n        static Long[] a;\r\n        static Long[] b;\r\n        \r\n        private static class MergeTask extends Thread {\r\n            int[] Class;\r\n            int[] rank;\r\n            public MergeTask(int[] Class, int[] rank) {\r\n                this.Class=Class;\r\n                this.rank=rank;\r\n            }\r\n    \r\n            public void run() {\r\n                int lastFind = 0;\r\n                for (int i = 0; i &lt; this.Class.length; i++) {\r\n                    if (i &gt; 0 &amp;&amp; this.Class[i] == this.Class[i - 1] &amp;&amp;\r\n                            ((this.Class[i] == 0 &amp;&amp; a[rank[i]].equals(a[rank[i] - 1]) ) ||\r\n                                    (this.Class[i] == 1 &amp;&amp; b[rank[i]].equals(b[rank[i] - 1])))) {\r\n                        boolean tmp = true;\r\n                        while (lastFind &lt; result.length &amp;&amp; tmp) {\r\n                            synchronized (result[lastFind]) {\r\n                                if (result[lastFind] != Long.MIN_VALUE) {lastFind++;}\r\n                                  else {\r\n                                    result[lastFind] = this.Class[i] == 0 ? a[rank[i]] : b[rank[i]];\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (this.Class[i] == 0) {\r\n                        int left = 0;\r\n                        int right = b.length - 1;\r\n                        while (right &gt; left) {\r\n                            int mid = (right + left) / 2;\r\n                            if (a[rank[i]] &lt;= b[mid]) {\r\n                                right = mid - 1;\r\n                            } else if (a[rank[i]] &gt; b[mid]) {\r\n                                left = mid + 1;\r\n                            }\r\n                        }\r\n                        while (left &lt; b.length &amp;&amp; a[rank[i]] &gt; b[left]) left++;\r\n                        boolean tmp = true;\r\n                        while (tmp) {\r\n                            synchronized (result[rank[i] + left]) {\r\n                                if (result[rank[i] + left] != Long.MIN_VALUE) {\r\n                                    left++;\r\n                                } else {\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        result[rank[i] + left] = a[rank[i]];\r\n                        lastFind = rank[i] + left;\r\n                    }\r\n                    else if (this.Class[i] == 1) {\r\n                        int left = 0;\r\n                        int right = a.length - 1;\r\n                        while (right &gt; left) {\r\n                            int mid = (right + left) / 2;\r\n                            if (b[rank[i]] &lt;= a[mid]) {\r\n                                right = mid - 1;\r\n                            } else if (b[rank[i]] &gt; a[mid]) {\r\n                                left = mid + 1;\r\n                            }\r\n                        }\r\n                        while (left &lt; a.length &amp;&amp; b[rank[i]] &gt; a[left]) left++;\r\n                        boolean tmp = true;\r\n                        while (tmp) {\r\n                            synchronized (result[rank[i] + left]) {\r\n                                if ( result[rank[i] + left] != Long.MIN_VALUE) {\r\n                                    left++;\r\n                                } else {\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        result[rank[i] + left] = b[rank[i]];\r\n                        lastFind = rank[i] + left;\r\n                    }\r\n                }\r\n            }\r\n    \r\n        }\r\n        private static class MergeSortTask extends Thread {\r\n            private long left;\r\n            private long right;\r\n            private  Long[] result;\r\n    \r\n            public MergeSortTask(long left, long right) {\r\n                this.left = left;\r\n                this.right = right;\r\n                this.result = new Long[(int) (right-left)];\r\n                for(int i= 0;i&lt;(right-left);i++){\r\n                    this.result[i]=arr[(int) (i+left)];\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                mergeSort(this.result, (int) (right-left));\r\n            }\r\n    \r\n        }\r\n    \r\n        public static void mergeSort(Long[] a, int n) {\r\n            if(n&lt;2)\r\n                return;\r\n            int mid = n / 2;\r\n            Long[] l = new Long[mid];\r\n            Long[] r = new Long[n - mid];\r\n    \r\n            for (int i = 0; i &lt; mid; i++) {\r\n                l[i] = a[i];\r\n            }\r\n            for (int i = mid; i &lt; n; i++) {\r\n                r[i - mid] = a[i];\r\n            }\r\n            mergeSort(l, mid);\r\n            mergeSort(r, n - mid);\r\n    \r\n            merge(a, l, r, mid, n - mid);\r\n        }\r\n    \r\n        public static void  merge(Long[] a, Long[] l, Long[] r, int left, int right) {\r\n            int i = 0, j = 0, k = 0;\r\n            while (i &lt; left &amp;&amp; j &lt; right) {\r\n                if (l[i] &lt;= r[j]) {\r\n                    a[k++] = l[i++];\r\n                }\r\n                else {\r\n                    a[k++] = r[j++];\r\n                }\r\n            }\r\n            while (i &lt; left) {\r\n                a[k++] = l[i++];\r\n            }\r\n            while (j &lt; right) {\r\n                a[k++] = r[j++];\r\n            }\r\n        }\r\n    \r\n        static public Long[] getArray(int beginning, int length) {\r\n            Long[] num = new Long[length];\r\n            num[0] = (long) beginning;\r\n            Random r = new Random(1);\r\n            for (int i = 1; i &lt; length; i++) {\r\n                int tmp = r.nextInt(10);\r\n                if (tmp &lt; 7 ) num[i] = num[i - 1];\r\n                else num[i] = num[i - 1] + r.nextInt(4);\r\n            }\r\n            Long[] randomPosition=new Long[length];\r\n            Arrays.fill(randomPosition,Long.MIN_VALUE);\r\n            for(int i=0;i&lt;length;i++){\r\n                int tmp=0;\r\n                while(randomPosition[tmp]!=Long.MIN_VALUE){ tmp = r.nextInt(length);}\r\n                randomPosition[tmp]=num[i];\r\n            }\r\n            return randomPosition;\r\n        }\r\n        static public void check(Long[] result){\r\n            boolean check = true;\r\n            if(result.length!=checking.length){\r\n                System.out.println(&quot;length do mot match&quot;);\r\n            }\r\n            for (int i = 0; i &lt; checking.length; i++) {\r\n                if (!result[i].equals(checking[i])) {\r\n                    check = false;\r\n                    System.out.println(i + &quot; &quot; + result[i] + &quot; &quot; + checking[i]);\r\n                }\r\n            }\r\n            if (check)\r\n                System.out.println(&quot;checked&quot;);\r\n            else\r\n                System.out.println(&quot;unchecked&quot;);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            MergeSortTask[] tasks = new MergeSortTask[pnum];\r\n    \r\n            arr=getArray(beginning,size);\r\n    \r\n            checking = new Long[size];\r\n            System.arraycopy(arr, 0, checking, 0, size);\r\n            long start = System.currentTimeMillis();\r\n            Arrays.parallelSort(checking);\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;Build in parallel sort cost &quot;+(end-start)+&quot; Millis.&quot;);\r\n    \r\n            start = System.currentTimeMillis();\r\n    \r\n            int left=0;\r\n            int right=size/pnum;\r\n            int last=size%pnum;\r\n            for (int i = 0; i &lt; pnum; i++) {\r\n                if (last &gt; 0) {\r\n                    right++;\r\n                    last--;\r\n                }\r\n                tasks[i] = new MergeSortTask(left, right);\r\n                left = right;\r\n                right += size / pnum;\r\n                tasks[i].start();\r\n            }\r\n            try {\r\n                for (int i = 0; i &lt; pnum; i++) {\r\n                    tasks[i].join();\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error &quot; + e);\r\n            }\r\n    \r\n            end = System.currentTimeMillis();\r\n            System.out.println(&quot;distribute into &quot;+pnum+&quot; sub tasks and get &quot;+pnum+&quot; sorted array cost &quot;+(end-start)+&quot; Millis.&quot;);\r\n            start = System.currentTimeMillis();\r\n            for(int i=0;i&lt;pnum;i++){\r\n                que.offer(tasks[i].result);\r\n            }\r\n            while(que.size()&gt;1){\r\n                a=que.poll();\r\n                b=que.poll();\r\n                int lengthA=a.length, lengthB=b.length;\r\n                result=new Long[lengthA+lengthB];\r\n                Arrays.fill(result, Long.MIN_VALUE);\r\n                int size=lengthA+lengthB;\r\n                MergeTask[] mergeTasks = new MergeTask[pnum];\r\n                right = size / pnum;\r\n                last = size % pnum;\r\n                int aleft = lengthA, bleft = lengthB;\r\n                for (int i = 0; i &lt; pnum; i++) {\r\n                    if (last &gt; 0) {\r\n                        right++;\r\n                        last--;\r\n                    }\r\n                    int[] classes = new int[right];\r\n                    int[] ranks = new int[right];\r\n                    if (aleft &gt;= right) {\r\n                        Arrays.fill(classes, 0);\r\n                        for (int j = 0; j &lt; right; j++) {\r\n                            ranks[j] = lengthA - aleft;\r\n                            aleft--;\r\n                        }\r\n                    } else {\r\n                        if (aleft == 0) {\r\n                            Arrays.fill(classes, 1);\r\n                            for (int j = 0; j &lt; right; j++) {\r\n                                ranks[j] = lengthB - bleft;\r\n                                bleft--;\r\n                            }\r\n                        } else {\r\n                            int tmp = aleft;\r\n                            for (int j = 0; j &lt; tmp; j++) {\r\n                                classes[j] = 0;\r\n                                ranks[j] = lengthA - aleft;\r\n                                aleft--;\r\n                            }\r\n                            for (int j = tmp; j &lt; right; j++) {\r\n                                classes[j] = 1;\r\n                                ranks[j] = lengthB - bleft;\r\n                                bleft--;\r\n                            }\r\n                        }\r\n                    }\r\n                    mergeTasks[i] = new MergeTask(classes, ranks);\r\n                    right = size / pnum;\r\n                    mergeTasks[i].start();\r\n                }\r\n    \r\n                try {\r\n                    for (int i = 0; i &lt; pnum; i++) {\r\n                        mergeTasks[i].join();\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;Error &quot; + e);\r\n                }\r\n                que.offer(result);\r\n    \r\n            }\r\n    \r\n            result=que.peek();\r\n    \r\n            end=System.currentTimeMillis();\r\n    \r\n            System.out.println(&quot;finish parallel merge in &quot;+(end-start)+&quot; Millis&quot;);\r\n    \r\n            check(result);\r\n        }\r\n    }\r\n\r\n\r\nAnd here is the question. I have a checking function, which I first use a built-in parallel sort function to get the ground truth and check whether the sorted array I got is right. Output the different values. As I assigned the seed, so the input should always be the same. But sometimes my own merging works, sometimes it does not. Moreover, when is does not work, the output result is also different.\r\n\r\n   85679 -9223372036854775808 38679\r\n\r\nor\r\n    50110 -9223372036854775808 22694\r\n\r\netc.\r\n\r\nAnd I do not know why. Is it about the multiple threads I used?\r\nThanks a lot","title":"Result not stable for parallel merge sort in java, for the same input, sometimes it works, sometimes not","body":"<p>Here is the code.</p>\n<p>I use parallel computing to build the merge sort and the MergeSortTask class creates multiple threads to divide the array into some sub-array and use merge sort to sort it. The MergeTask is the thread to merge two sorted arrays into one sorted array. For generating array is in the getArray function, and I add a seed on this generating part.\nFor the MergeSortTask part, I think there are not any bugs on it. So the problem is on the MergeTask part.\nFor the two input arrays a,b. I try to get the rank(a) and rank(b), of each element using binary search which means the position in arrays a and b if I put the element into that array. And the default data is Long.MIN_VALUE in the result array, and if</p>\n<pre><code>result[rank(a)+rank(b)].equal(Long.MIN_VALUE) \n</code></pre>\n<p>I may assign that element into that position, if not just use open addressing.</p>\n<pre><code>import java.util.*;\npublic class TotalParallelMergeSort {\n    static Long[] arr;\n    static Long[] checking;\n    static int pnum = 10;\n\n    static Long[] result;\n\n    static int size=100000;\n\n    static int beginning=0;\n\n    static Queue&lt;Long[]&gt; que= new LinkedList&lt;&gt;();\n    static Long[] a;\n    static Long[] b;\n    \n    private static class MergeTask extends Thread {\n        int[] Class;\n        int[] rank;\n        public MergeTask(int[] Class, int[] rank) {\n            this.Class=Class;\n            this.rank=rank;\n        }\n\n        public void run() {\n            int lastFind = 0;\n            for (int i = 0; i &lt; this.Class.length; i++) {\n                if (i &gt; 0 &amp;&amp; this.Class[i] == this.Class[i - 1] &amp;&amp;\n                        ((this.Class[i] == 0 &amp;&amp; a[rank[i]].equals(a[rank[i] - 1]) ) ||\n                                (this.Class[i] == 1 &amp;&amp; b[rank[i]].equals(b[rank[i] - 1])))) {\n                    boolean tmp = true;\n                    while (lastFind &lt; result.length &amp;&amp; tmp) {\n                        synchronized (result[lastFind]) {\n                            if (result[lastFind] != Long.MIN_VALUE) {lastFind++;}\n                              else {\n                                result[lastFind] = this.Class[i] == 0 ? a[rank[i]] : b[rank[i]];\n                                tmp = false;\n                            }\n                        }\n                    }\n                }\n                else if (this.Class[i] == 0) {\n                    int left = 0;\n                    int right = b.length - 1;\n                    while (right &gt; left) {\n                        int mid = (right + left) / 2;\n                        if (a[rank[i]] &lt;= b[mid]) {\n                            right = mid - 1;\n                        } else if (a[rank[i]] &gt; b[mid]) {\n                            left = mid + 1;\n                        }\n                    }\n                    while (left &lt; b.length &amp;&amp; a[rank[i]] &gt; b[left]) left++;\n                    boolean tmp = true;\n                    while (tmp) {\n                        synchronized (result[rank[i] + left]) {\n                            if (result[rank[i] + left] != Long.MIN_VALUE) {\n                                left++;\n                            } else {\n                                tmp = false;\n                            }\n                        }\n                    }\n                    result[rank[i] + left] = a[rank[i]];\n                    lastFind = rank[i] + left;\n                }\n                else if (this.Class[i] == 1) {\n                    int left = 0;\n                    int right = a.length - 1;\n                    while (right &gt; left) {\n                        int mid = (right + left) / 2;\n                        if (b[rank[i]] &lt;= a[mid]) {\n                            right = mid - 1;\n                        } else if (b[rank[i]] &gt; a[mid]) {\n                            left = mid + 1;\n                        }\n                    }\n                    while (left &lt; a.length &amp;&amp; b[rank[i]] &gt; a[left]) left++;\n                    boolean tmp = true;\n                    while (tmp) {\n                        synchronized (result[rank[i] + left]) {\n                            if ( result[rank[i] + left] != Long.MIN_VALUE) {\n                                left++;\n                            } else {\n                                tmp = false;\n                            }\n                        }\n                    }\n                    result[rank[i] + left] = b[rank[i]];\n                    lastFind = rank[i] + left;\n                }\n            }\n        }\n\n    }\n    private static class MergeSortTask extends Thread {\n        private long left;\n        private long right;\n        private  Long[] result;\n\n        public MergeSortTask(long left, long right) {\n            this.left = left;\n            this.right = right;\n            this.result = new Long[(int) (right-left)];\n            for(int i= 0;i&lt;(right-left);i++){\n                this.result[i]=arr[(int) (i+left)];\n            }\n        }\n\n        @Override\n        public void run() {\n            mergeSort(this.result, (int) (right-left));\n        }\n\n    }\n\n    public static void mergeSort(Long[] a, int n) {\n        if(n&lt;2)\n            return;\n        int mid = n / 2;\n        Long[] l = new Long[mid];\n        Long[] r = new Long[n - mid];\n\n        for (int i = 0; i &lt; mid; i++) {\n            l[i] = a[i];\n        }\n        for (int i = mid; i &lt; n; i++) {\n            r[i - mid] = a[i];\n        }\n        mergeSort(l, mid);\n        mergeSort(r, n - mid);\n\n        merge(a, l, r, mid, n - mid);\n    }\n\n    public static void  merge(Long[] a, Long[] l, Long[] r, int left, int right) {\n        int i = 0, j = 0, k = 0;\n        while (i &lt; left &amp;&amp; j &lt; right) {\n            if (l[i] &lt;= r[j]) {\n                a[k++] = l[i++];\n            }\n            else {\n                a[k++] = r[j++];\n            }\n        }\n        while (i &lt; left) {\n            a[k++] = l[i++];\n        }\n        while (j &lt; right) {\n            a[k++] = r[j++];\n        }\n    }\n\n    static public Long[] getArray(int beginning, int length) {\n        Long[] num = new Long[length];\n        num[0] = (long) beginning;\n        Random r = new Random(1);\n        for (int i = 1; i &lt; length; i++) {\n            int tmp = r.nextInt(10);\n            if (tmp &lt; 7 ) num[i] = num[i - 1];\n            else num[i] = num[i - 1] + r.nextInt(4);\n        }\n        Long[] randomPosition=new Long[length];\n        Arrays.fill(randomPosition,Long.MIN_VALUE);\n        for(int i=0;i&lt;length;i++){\n            int tmp=0;\n            while(randomPosition[tmp]!=Long.MIN_VALUE){ tmp = r.nextInt(length);}\n            randomPosition[tmp]=num[i];\n        }\n        return randomPosition;\n    }\n    static public void check(Long[] result){\n        boolean check = true;\n        if(result.length!=checking.length){\n            System.out.println(&quot;length do mot match&quot;);\n        }\n        for (int i = 0; i &lt; checking.length; i++) {\n            if (!result[i].equals(checking[i])) {\n                check = false;\n                System.out.println(i + &quot; &quot; + result[i] + &quot; &quot; + checking[i]);\n            }\n        }\n        if (check)\n            System.out.println(&quot;checked&quot;);\n        else\n            System.out.println(&quot;unchecked&quot;);\n    }\n\n    public static void main(String[] args) {\n\n        MergeSortTask[] tasks = new MergeSortTask[pnum];\n\n        arr=getArray(beginning,size);\n\n        checking = new Long[size];\n        System.arraycopy(arr, 0, checking, 0, size);\n        long start = System.currentTimeMillis();\n        Arrays.parallelSort(checking);\n        long end = System.currentTimeMillis();\n        System.out.println(&quot;Build in parallel sort cost &quot;+(end-start)+&quot; Millis.&quot;);\n\n        start = System.currentTimeMillis();\n\n        int left=0;\n        int right=size/pnum;\n        int last=size%pnum;\n        for (int i = 0; i &lt; pnum; i++) {\n            if (last &gt; 0) {\n                right++;\n                last--;\n            }\n            tasks[i] = new MergeSortTask(left, right);\n            left = right;\n            right += size / pnum;\n            tasks[i].start();\n        }\n        try {\n            for (int i = 0; i &lt; pnum; i++) {\n                tasks[i].join();\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Error &quot; + e);\n        }\n\n        end = System.currentTimeMillis();\n        System.out.println(&quot;distribute into &quot;+pnum+&quot; sub tasks and get &quot;+pnum+&quot; sorted array cost &quot;+(end-start)+&quot; Millis.&quot;);\n        start = System.currentTimeMillis();\n        for(int i=0;i&lt;pnum;i++){\n            que.offer(tasks[i].result);\n        }\n        while(que.size()&gt;1){\n            a=que.poll();\n            b=que.poll();\n            int lengthA=a.length, lengthB=b.length;\n            result=new Long[lengthA+lengthB];\n            Arrays.fill(result, Long.MIN_VALUE);\n            int size=lengthA+lengthB;\n            MergeTask[] mergeTasks = new MergeTask[pnum];\n            right = size / pnum;\n            last = size % pnum;\n            int aleft = lengthA, bleft = lengthB;\n            for (int i = 0; i &lt; pnum; i++) {\n                if (last &gt; 0) {\n                    right++;\n                    last--;\n                }\n                int[] classes = new int[right];\n                int[] ranks = new int[right];\n                if (aleft &gt;= right) {\n                    Arrays.fill(classes, 0);\n                    for (int j = 0; j &lt; right; j++) {\n                        ranks[j] = lengthA - aleft;\n                        aleft--;\n                    }\n                } else {\n                    if (aleft == 0) {\n                        Arrays.fill(classes, 1);\n                        for (int j = 0; j &lt; right; j++) {\n                            ranks[j] = lengthB - bleft;\n                            bleft--;\n                        }\n                    } else {\n                        int tmp = aleft;\n                        for (int j = 0; j &lt; tmp; j++) {\n                            classes[j] = 0;\n                            ranks[j] = lengthA - aleft;\n                            aleft--;\n                        }\n                        for (int j = tmp; j &lt; right; j++) {\n                            classes[j] = 1;\n                            ranks[j] = lengthB - bleft;\n                            bleft--;\n                        }\n                    }\n                }\n                mergeTasks[i] = new MergeTask(classes, ranks);\n                right = size / pnum;\n                mergeTasks[i].start();\n            }\n\n            try {\n                for (int i = 0; i &lt; pnum; i++) {\n                    mergeTasks[i].join();\n                }\n            } catch (Exception e) {\n                System.out.println(&quot;Error &quot; + e);\n            }\n            que.offer(result);\n\n        }\n\n        result=que.peek();\n\n        end=System.currentTimeMillis();\n\n        System.out.println(&quot;finish parallel merge in &quot;+(end-start)+&quot; Millis&quot;);\n\n        check(result);\n    }\n}\n</code></pre>\n<p>And here is the question. I have a checking function, which I first use a built-in parallel sort function to get the ground truth and check whether the sorted array I got is right. Output the different values. As I assigned the seed, so the input should always be the same. But sometimes my own merging works, sometimes it does not. Moreover, when is does not work, the output result is also different.</p>\n<p>85679 -9223372036854775808 38679</p>\n<p>or\n50110 -9223372036854775808 22694</p>\n<p>etc.</p>\n<p>And I do not know why. Is it about the multiple threads I used?\nThanks a lot</p>\n"},{"tags":["java","criteria"],"answers":[{"tags":[],"owner":{"account_id":29423644,"reputation":1,"user_id":22544879,"display_name":"Buzanov Vladislav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694529111,"creation_date":1694529111,"answer_id":77090126,"question_id":74154703,"body_markdown":"You can do something like this:\r\n\r\n        CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n        CriteriaQuery&lt;Appointment&gt; criteriaQuery = criteriaBuilder.createQuery(Appointment.class);\r\n        Root&lt;Appointmet&gt; itemRoot = criteriaQuery.from(Appointmet.class);\r\n        criteriaQuery.where(\r\n                criteriaBuilder.greaterThan(\r\n                        criteriaBuilder.function(&quot;sql&quot;, Date.class, &quot;? + INTERVAL &#39;2 days&#39;&quot;, itemRoot.get(&quot;date&quot;)),\r\n                        criteriaBuilder.literal(new Date(2022, Calendar.NOVEMBER, 21)))\r\n        );\r\n\r\n        TypedQuery&lt;Apppointment&gt; query = entityManager.createQuery(criteriaQuery);\r\n        return query.getResultList();\r\n","title":"Arithmetic date operations with Criteria API","body":"<p>You can do something like this:</p>\n<pre><code>    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n    CriteriaQuery&lt;Appointment&gt; criteriaQuery = criteriaBuilder.createQuery(Appointment.class);\n    Root&lt;Appointmet&gt; itemRoot = criteriaQuery.from(Appointmet.class);\n    criteriaQuery.where(\n            criteriaBuilder.greaterThan(\n                    criteriaBuilder.function(&quot;sql&quot;, Date.class, &quot;? + INTERVAL '2 days'&quot;, itemRoot.get(&quot;date&quot;)),\n                    criteriaBuilder.literal(new Date(2022, Calendar.NOVEMBER, 21)))\n    );\n\n    TypedQuery&lt;Apppointment&gt; query = entityManager.createQuery(criteriaQuery);\n    return query.getResultList();\n</code></pre>\n"}],"owner":{"account_id":410510,"reputation":2319,"user_id":782392,"accept_rate":67,"display_name":"T3rm1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694529111,"creation_date":1666360409,"question_id":74154703,"body_markdown":"I want to do [date arithmetic operations][1] using the Criteria API. For example, in Postgres I can write a query like this:\r\n\r\n`select * from appointment a where a.date + interval &#39;2 days&#39; &gt; &#39;2022-10-21&#39;;`\r\n\r\nHow can I achieve this syntax with Criteria? Do I have to write my own Expression class or is there anything built in that I can use?\r\n\r\nI tried it like this but that didn&#39;t work:\r\n\r\n```java\r\nprivate class DateArithmetricExpression&lt;T extends Date&gt; extends ExpressionImpl&lt;T&gt; {\r\n\r\n\t\tprivate final int value;\r\n\t\tprivate final ChronoUnit unit;\r\n\t\tprivate final BinaryArithmeticOperation.Operation operator;\r\n\t\tprivate final Expression&lt;T&gt; date;\r\n\r\n\t\tpublic DateArithmetricExpression(CriteriaBuilderImpl cb, Class&lt;T&gt; clazz, Expression&lt;T&gt; date, BinaryArithmeticOperation.Operation operator, int value, ChronoUnit unit) {\r\n\t\t\tsuper(cb, clazz);\r\n\t\t\tthis.value = value;\r\n\t\t\tthis.unit = unit;\r\n\t\t\tthis.operator = operator;\r\n\t\t\tthis.date = date;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void registerParameters(ParameterRegistry registry) {\r\n\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String render(RenderingContext renderingContext) {\r\n\t\t\tString op = switch (operator) {\r\n\t\t\t\tcase ADD -&gt; &quot;+&quot;;\r\n\t\t\t\tcase SUBTRACT -&gt; &quot;-&quot;;\r\n\t\t\t\tdefault -&gt; throw new UnsupportedOperationException();\r\n\t\t\t};\r\n\t\t\tString renderedDateExpr = ((Renderable) this.date).render(renderingContext);\r\n\t\t\treturn &quot;%s %s interval &#39;%d %s&#39;&quot;.formatted(renderedDateExpr, op, value, unit.toString());\r\n\t\t}\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/functions-datetime.html#OPERATORS-DATETIME-TABLE","title":"Arithmetic date operations with Criteria API","body":"<p>I want to do <a href=\"https://www.postgresql.org/docs/current/functions-datetime.html#OPERATORS-DATETIME-TABLE\" rel=\"nofollow noreferrer\">date arithmetic operations</a> using the Criteria API. For example, in Postgres I can write a query like this:</p>\n<p><code>select * from appointment a where a.date + interval '2 days' &gt; '2022-10-21';</code></p>\n<p>How can I achieve this syntax with Criteria? Do I have to write my own Expression class or is there anything built in that I can use?</p>\n<p>I tried it like this but that didn't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private class DateArithmetricExpression&lt;T extends Date&gt; extends ExpressionImpl&lt;T&gt; {\n\n        private final int value;\n        private final ChronoUnit unit;\n        private final BinaryArithmeticOperation.Operation operator;\n        private final Expression&lt;T&gt; date;\n\n        public DateArithmetricExpression(CriteriaBuilderImpl cb, Class&lt;T&gt; clazz, Expression&lt;T&gt; date, BinaryArithmeticOperation.Operation operator, int value, ChronoUnit unit) {\n            super(cb, clazz);\n            this.value = value;\n            this.unit = unit;\n            this.operator = operator;\n            this.date = date;\n        }\n\n        @Override\n        public void registerParameters(ParameterRegistry registry) {\n\n        }\n\n        @Override\n        public String render(RenderingContext renderingContext) {\n            String op = switch (operator) {\n                case ADD -&gt; &quot;+&quot;;\n                case SUBTRACT -&gt; &quot;-&quot;;\n                default -&gt; throw new UnsupportedOperationException();\n            };\n            String renderedDateExpr = ((Renderable) this.date).render(renderingContext);\n            return &quot;%s %s interval '%d %s'&quot;.formatted(renderedDateExpr, op, value, unit.toString());\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","annotations"],"answers":[{"tags":[],"owner":{"account_id":21921969,"reputation":56,"user_id":16205098,"display_name":"Vasyl Ivanochko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694525551,"creation_date":1694474975,"answer_id":77085286,"question_id":77085112,"body_markdown":"You can find out the way to implement it by [`ReflectionUtils`][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ReflectionUtils.html","title":"Is there a way to call a method via Spring annotation?","body":"<p>You can find out the way to implement it by <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ReflectionUtils.html\" rel=\"nofollow noreferrer\"><code>ReflectionUtils</code></a>.</p>\n"}],"owner":{"account_id":6021831,"reputation":163,"user_id":4728677,"display_name":"count_campeador"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694528836,"creation_date":1694471724,"question_id":77085112,"body_markdown":"I am new to Spring Boot, I am curious about if we can call a method via some annotation?\r\n\r\nClasses have @Component(&quot;somevalue&quot;) annotation, is there a similar annotation (or create a custom annotation) for methods and call them (by this value String?).\r\n\r\nI mean, if something like this is possible:\r\n\r\nIn class A\r\n\r\n    @CustomAnnotation(&quot;m1&quot;)\r\n    public void method1(){\r\n    }\r\n    \r\n    @CustomAnnotation(&quot;m2&quot;)\r\n    public void method2(){\r\n    }\r\n\r\nIn class B\r\n\r\n    String identifier = &quot;m2&quot;;\r\n    (magic here).call(A, identifier);\r\n\r\n","title":"Is there a way to call a method via Spring annotation?","body":"<p>I am new to Spring Boot, I am curious about if we can call a method via some annotation?</p>\n<p>Classes have @Component(&quot;somevalue&quot;) annotation, is there a similar annotation (or create a custom annotation) for methods and call them (by this value String?).</p>\n<p>I mean, if something like this is possible:</p>\n<p>In class A</p>\n<pre><code>@CustomAnnotation(&quot;m1&quot;)\npublic void method1(){\n}\n\n@CustomAnnotation(&quot;m2&quot;)\npublic void method2(){\n}\n</code></pre>\n<p>In class B</p>\n<pre><code>String identifier = &quot;m2&quot;;\n(magic here).call(A, identifier);\n</code></pre>\n"},{"tags":["java","acm.graphics"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694508042,"post_id":77087204,"comment_id":135896324,"body_markdown":"Not related to the solution, but while working with floating type values (float or double), as far as possible, don&#39;t use exact comparisons like `i != -180`.  Instead, use `i &gt;= -180`.","body":"Not related to the solution, but while working with floating type values (float or double), as far as possible, don&#39;t use exact comparisons like <code>i != -180</code>.  Instead, use <code>i &gt;= -180</code>."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694508228,"post_id":77087204,"comment_id":135896356,"body_markdown":"Because there can be some randomly small values like 0.50000001 or something like that? Or it&#39;s simply more readable?","body":"Because there can be some randomly small values like 0.50000001 or something like that? Or it&#39;s simply more readable?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508351,"post_id":77087204,"comment_id":135896382,"body_markdown":"Yes, that exact reason..  `i` may never be exactly equal to `-180`, but `-179.999999....` or `-180.00000....`, and may never break out from the loop. Not saying that it would definitely be like this, but usually have to take care of this with floating point variables.","body":"Yes, that exact reason..  <code>i</code> may never be exactly equal to <code>-180</code>, but <code>-179.999999....</code> or <code>-180.00000....</code>, and may never break out from the loop. Not saying that it would definitely be like this, but usually have to take care of this with floating point variables."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508467,"post_id":77087204,"comment_id":135896405,"body_markdown":"Also looking at https://cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/graphics/GObject.html#movePolar(double,%20double), it seems the 2nd parameter is theta - the angle.  So, 2nd code piece that has `i--` that is 1 degree of movement should be faster as compared to the 1st code piece that has `i -= 0.5` - half a degree per iteration of the loop.","body":"Also looking at <a href=\"https://cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/graphics/GObject.html#movePolar(double,%20double)\" rel=\"nofollow noreferrer\">cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/&hellip;</a>, it seems the 2nd parameter is theta - the angle.  So, 2nd code piece that has <code>i--</code> that is 1 degree of movement should be faster as compared to the 1st code piece that has <code>i -= 0.5</code> - half a degree per iteration of the loop."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694508825,"post_id":77087204,"comment_id":135896466,"body_markdown":"Yes, it is faster, but i want different speed for each planet, but if I do cycles like above, all of them move with equal velocity. I was thinking about one cycle, where angle changes on 1 degree each iteration for earth, and another one in which delta is 2 deegres per iteration, but I don&#39;t know how to implement all of this conditions in one cycle.","body":"Yes, it is faster, but i want different speed for each planet, but if I do cycles like above, all of them move with equal velocity. I was thinking about one cycle, where angle changes on 1 degree each iteration for earth, and another one in which delta is 2 deegres per iteration, but I don&#39;t know how to implement all of this conditions in one cycle."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508837,"post_id":77087204,"comment_id":135896471,"body_markdown":"Looking closer at the JavaDoc, it seems this movePolar is not for an orbital movement but just to move an object from its current location to `r` distance and at `theta` degree.  And to move at different speeds, you have to change the `r` for each planet.","body":"Looking closer at the JavaDoc, it seems this movePolar is not for an orbital movement but just to move an object from its current location to <code>r</code> distance and at <code>theta</code> degree.  And to move at different speeds, you have to change the <code>r</code> for each planet."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508965,"post_id":77087204,"comment_id":135896491,"body_markdown":"In your case `r` is same for both the planets.  If a planet is moving faster, then `r` should be higher for that. I.e. in the same time period, how much it would travel in the orbit around the Sun.","body":"In your case <code>r</code> is same for both the planets.  If a planet is moving faster, then <code>r</code> should be higher for that. I.e. in the same time period, how much it would travel in the orbit around the Sun."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694509104,"post_id":77087204,"comment_id":135896523,"body_markdown":"Oh, I just miss-typed, ORBITAL_DIAMETER should be multiplied by (numberPlanetInArray+1).","body":"Oh, I just miss-typed, ORBITAL_DIAMETER should be multiplied by (numberPlanetInArray+1)."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694509349,"post_id":77087204,"comment_id":135896575,"body_markdown":"So (Math.PI * ORBITAL_DIAMETER) is the length of orbit for the 1st planet, and (Math.PI * ORBITAL_DIAMETER * 2) is the length of orbit for the 2nd planet. Radius of first orbit is half of radius of the second one.","body":"So (Math.PI * ORBITAL_DIAMETER) is the length of orbit for the 1st planet, and (Math.PI * ORBITAL_DIAMETER * 2) is the length of orbit for the 2nd planet. Radius of first orbit is half of radius of the second one."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694509764,"post_id":77087204,"comment_id":135896679,"body_markdown":"I am not a scientist, but I love astronomy.  My suggestion is check this - https://nssdc.gsfc.nasa.gov/planetary/factsheet/.  Here, each planet has Orbital Period (days). E.g. Earth&#39;s is 365.2. So, in a day 360 degrees/365.2 = 0.98576 degrees per day. You can find this at any interval, an hour also if needed. Then using trigo, at this angle (keep angle changing differently per planet), at r distance (each planet at a different distance), what would be its (x,y) co-ordinates - calculate that and move object there.","body":"I am not a scientist, but I love astronomy.  My suggestion is check this - <a href=\"https://nssdc.gsfc.nasa.gov/planetary/factsheet/\" rel=\"nofollow noreferrer\">nssdc.gsfc.nasa.gov/planetary/factsheet</a>.  Here, each planet has Orbital Period (days). E.g. Earth&#39;s is 365.2. So, in a day 360 degrees/365.2 = 0.98576 degrees per day. You can find this at any interval, an hour also if needed. Then using trigo, at this angle (keep angle changing differently per planet), at r distance (each planet at a different distance), what would be its (x,y) co-ordinates - calculate that and move object there."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694510463,"post_id":77087204,"comment_id":135896822,"body_markdown":"Thanks a lot, will think about how to get this done in one cycle.","body":"Thanks a lot, will think about how to get this done in one cycle."}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694528752,"creation_date":1694510475,"answer_id":77087728,"question_id":77087204,"body_markdown":"As given in the comment, adding an answer so that I can paste an image.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nKeep different r = radius of the planet&#39;s orbit, and keep theta changing differently per unit of time.\r\nAnd calculate x &amp; y co-ordinates of each planet based on their own r &amp; theta.\r\nSet the exact co-ordinates of each planet using this.\r\n\r\nRemember to add (cx,cy), the co-ordinates of the sun to the calculated x &amp; y of each planet to make it orbit around the sun.\r\n\r\nSomething like this - Not tried in Java, you may need to adjust/correct. But something like this:\r\n\r\n```\r\nfor(time = 0; time &lt; numberOfTimeIterations; time++) {  // Or while(true) if you want it to keep going\r\n    for(i = 0;i &lt; numberOfPlanets;i++) {\r\n        currentAngle[i] -= angleMovement[i];\r\n        if(currentAngle[i] &lt; 0) currentAngle[i] += 360;\r\n        double radians = Math.toRadians(currentAngle[i]);\r\n        double x = sunx + radius[i] * Math.cos(radians);\r\n        double y = suny + radius[i] * Math.sin(radians);\r\n        planet[i].move(x,y)\r\n    }\r\n}\r\n```\r\n\r\n```\r\nangleMovement[i] = calculated per same time interval angular movement of each planet\r\ncurrentAngle[i] = Keeps increasing based on planet&#39;s angular movement each time interval\r\nradius[i] = Radius of each planet&#39;s orbit\r\nsunx, suny = x-y co-ordinates of the Sun\r\n```\r\n\r\nPlanet orbit radius and orbital movement can be found at - https://nssdc.gsfc.nasa.gov/planetary/factsheet/\r\n\r\nTotal 360 degrees / Orbital Period (days) = degrees per day\r\n\r\nE.g. for earth\r\n\r\n360/365.2 = 0.98576 degrees per day.\r\n\r\nIf the animation is to be done per hour, then 0.98576/24 = 0.041073 degrees per hour.\r\n\r\nSimilarly calculate and initialize for each planet.\r\n\r\nRadius of the orbit is given in that fact sheet as &quot;Distance from Sun (10&lt;sup&gt;6&lt;/sup&gt; km)&quot;\r\n\r\nThis calculation works. Built a small swing app...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\nS is the Sun in the centre.\r\n0 to 8 planets, Mercury to Pluto.\r\nZoom-in &amp; Zoom-out - zoom factor changed in 3rd image to show all 9\r\nTime delay is milliseconds to sleep before the next iteration. Faster or Slower animation.\r\n\r\nBut, the calculation works!!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GJU3w.png\r\n  [2]: https://i.stack.imgur.com/K7grq.png\r\n  [3]: https://i.stack.imgur.com/odD3x.png\r\n  [4]: https://i.stack.imgur.com/vtMcL.png","title":"I am creating simple animation of Solar System using acm.graphics.movePolar() and i don&#39;t know how can I change velocity of planets","body":"<p>As given in the comment, adding an answer so that I can paste an image.</p>\n<p><a href=\"https://i.stack.imgur.com/GJU3w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GJU3w.png\" alt=\"enter image description here\" /></a></p>\n<p>Keep different r = radius of the planet's orbit, and keep theta changing differently per unit of time.\nAnd calculate x &amp; y co-ordinates of each planet based on their own r &amp; theta.\nSet the exact co-ordinates of each planet using this.</p>\n<p>Remember to add (cx,cy), the co-ordinates of the sun to the calculated x &amp; y of each planet to make it orbit around the sun.</p>\n<p>Something like this - Not tried in Java, you may need to adjust/correct. But something like this:</p>\n<pre><code>for(time = 0; time &lt; numberOfTimeIterations; time++) {  // Or while(true) if you want it to keep going\n    for(i = 0;i &lt; numberOfPlanets;i++) {\n        currentAngle[i] -= angleMovement[i];\n        if(currentAngle[i] &lt; 0) currentAngle[i] += 360;\n        double radians = Math.toRadians(currentAngle[i]);\n        double x = sunx + radius[i] * Math.cos(radians);\n        double y = suny + radius[i] * Math.sin(radians);\n        planet[i].move(x,y)\n    }\n}\n</code></pre>\n<pre><code>angleMovement[i] = calculated per same time interval angular movement of each planet\ncurrentAngle[i] = Keeps increasing based on planet's angular movement each time interval\nradius[i] = Radius of each planet's orbit\nsunx, suny = x-y co-ordinates of the Sun\n</code></pre>\n<p>Planet orbit radius and orbital movement can be found at - <a href=\"https://nssdc.gsfc.nasa.gov/planetary/factsheet/\" rel=\"nofollow noreferrer\">https://nssdc.gsfc.nasa.gov/planetary/factsheet/</a></p>\n<p>Total 360 degrees / Orbital Period (days) = degrees per day</p>\n<p>E.g. for earth</p>\n<p>360/365.2 = 0.98576 degrees per day.</p>\n<p>If the animation is to be done per hour, then 0.98576/24 = 0.041073 degrees per hour.</p>\n<p>Similarly calculate and initialize for each planet.</p>\n<p>Radius of the orbit is given in that fact sheet as &quot;Distance from Sun (10<sup>6</sup> km)&quot;</p>\n<p>This calculation works. Built a small swing app...</p>\n<p><a href=\"https://i.stack.imgur.com/K7grq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K7grq.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/odD3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/odD3x.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/vtMcL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vtMcL.png\" alt=\"enter image description here\" /></a></p>\n<p>S is the Sun in the centre.\n0 to 8 planets, Mercury to Pluto.\nZoom-in &amp; Zoom-out - zoom factor changed in 3rd image to show all 9\nTime delay is milliseconds to sleep before the next iteration. Faster or Slower animation.</p>\n<p>But, the calculation works!!</p>\n"}],"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694528752,"creation_date":1694506467,"question_id":77087204,"body_markdown":"I was trying to change velocity by changing value of degree, which changes on each iteration.\r\nBut if I have all planets in the same cycle, they anyway move synchronically.\r\n \r\n    \r\n    for (double i = 180; i != -180; i-=0.5) { \r\n        planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 720.0,I); \r\n        planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 720.0, i); \r\n    }\r\n\r\n    for (double i = 180; i != -180; i--) {\r\n        planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 360.0, i);\r\n        planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 360.0, i);       \r\n    }\r\n\r\nI tried diffrent variations of cycles, and adding coefficients in movePolar(COEFFICIENT * double r, double theta * COEFFICIENT). \r\n\r\nSo, I understood that problem can be solved by creating several cycles, but then one planet will move, second will stay till first won&#39;t finish. \r\n\r\nIs there any chance to add some coefficient in order to increase speed of rotation?\r\n\r\n\r\n","title":"I am creating simple animation of Solar System using acm.graphics.movePolar() and i don&#39;t know how can I change velocity of planets","body":"<p>I was trying to change velocity by changing value of degree, which changes on each iteration.\nBut if I have all planets in the same cycle, they anyway move synchronically.</p>\n<pre><code>for (double i = 180; i != -180; i-=0.5) { \n    planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 720.0,I); \n    planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 720.0, i); \n}\n\nfor (double i = 180; i != -180; i--) {\n    planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 360.0, i);\n    planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 360.0, i);       \n}\n</code></pre>\n<p>I tried diffrent variations of cycles, and adding coefficients in movePolar(COEFFICIENT * double r, double theta * COEFFICIENT).</p>\n<p>So, I understood that problem can be solved by creating several cycles, but then one planet will move, second will stay till first won't finish.</p>\n<p>Is there any chance to add some coefficient in order to increase speed of rotation?</p>\n"},{"tags":["java","quartz-scheduler"],"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694528748,"creation_date":1694528748,"question_id":77090071,"body_markdown":"We have a noticed a few of our triggered jobs go into ERROR state from time to time.\r\n[![enter image description here][1]][1]\r\nWhile in this state `execute` is no longer called!  **Is there any configuration on quartz to control this behavior?  I would prefer for it to just keep retrying/triggering the job**.  \r\n\r\nWe are still unsure what initially causes the ERROR state.  [This post][2] seems to imply it is because the pod assigned to the job is lost/deleted/etc; however I don&#39;t think that&#39;s how triggers work, that seems to be more affiliated with scheduling jobs.  To troubleshoot we have implemented the trigger listener:\r\n\r\n    public class QuartzJobListener implements TriggerListener {\r\n    \tprivate static final Logger LOGGER = LoggerFactory.getLogger(QuartzJobListener.class);\r\n    \r\n    \t@Override\r\n    \tpublic void triggerFired(Trigger trigger, JobExecutionContext context) {\r\n    \t\tLOGGER.info(&quot;Job executing via trigger: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {\r\n    \t\tLOGGER.info(&quot;Job execution vetoed: &quot; + trigger.getJobKey());\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void triggerMisfired(Trigger trigger) {\r\n    \t\tLOGGER.info(&quot;Job trigger misfired: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void triggerComplete(Trigger trigger, JobExecutionContext context, CompletedExecutionInstruction triggerInstructionCode) {\r\n    \t\tLOGGER.info(&quot;Job trigger completed: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getName() {\r\n    \t\treturn &quot;QuartzJobListener&quot;;\r\n    \t}\r\n    }\r\n\r\nBut there is no error case here making it even harder to detect when we initially get into ERROR state and why.\r\n\r\nHere is how we create our triggered jobs:\r\n\t\r\n\r\n    @Bean\r\n    \t@ConditionalOnProperty(prefix = &quot;tickets.background.job&quot;, name = &quot;deliver-tickets.enabled&quot;, havingValue = &quot;true&quot;)\r\n    \tJobDescription deliverTicketsJobDescription() {\r\n    \t\tfinal long now = metrics ? System.currentTimeMillis() : 0;\r\n    \t\tJobDescription jobDescription =  JobDescriptionBuilder.builder()\r\n    \t\t\t\t.triggerType(TriggerType.CRON)\r\n    \t\t\t\t.jobClass(DeliverTicketsJob.class)\r\n    \t\t\t\t.cronExpression(deliverTicketsCron)\r\n    \t\t\t\t.jobGroupId(jobGroupId)\r\n    \t\t\t\t.jobId(&quot;deliverTickets&quot;)\r\n    \t\t\t\t.build();\r\n    \t\tif (metrics) {\r\n    \t\t\tLOGGER.debug(&quot;METRIC: deliverTicketsJobDescription ~ duration: &quot; + (System.currentTimeMillis() - now) + &quot;ms&quot;);\r\n    \t\t}\r\n    \t\treturn jobDescription;\r\n    \t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/atTRv.png\r\n  [2]: https://stackoverflow.com/a/66799452/530933","title":"Quartz triggered jobs in ERROR state no longer calls execute","body":"<p>We have a noticed a few of our triggered jobs go into ERROR state from time to time.\n<a href=\"https://i.stack.imgur.com/atTRv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/atTRv.png\" alt=\"enter image description here\" /></a>\nWhile in this state <code>execute</code> is no longer called!  <strong>Is there any configuration on quartz to control this behavior?  I would prefer for it to just keep retrying/triggering the job</strong>.</p>\n<p>We are still unsure what initially causes the ERROR state.  <a href=\"https://stackoverflow.com/a/66799452/530933\">This post</a> seems to imply it is because the pod assigned to the job is lost/deleted/etc; however I don't think that's how triggers work, that seems to be more affiliated with scheduling jobs.  To troubleshoot we have implemented the trigger listener:</p>\n<pre><code>public class QuartzJobListener implements TriggerListener {\n    private static final Logger LOGGER = LoggerFactory.getLogger(QuartzJobListener.class);\n\n    @Override\n    public void triggerFired(Trigger trigger, JobExecutionContext context) {\n        LOGGER.info(&quot;Job executing via trigger: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {\n        LOGGER.info(&quot;Job execution vetoed: &quot; + trigger.getJobKey());\n        return false;\n    }\n\n    @Override\n    public void triggerMisfired(Trigger trigger) {\n        LOGGER.info(&quot;Job trigger misfired: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public void triggerComplete(Trigger trigger, JobExecutionContext context, CompletedExecutionInstruction triggerInstructionCode) {\n        LOGGER.info(&quot;Job trigger completed: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public String getName() {\n        return &quot;QuartzJobListener&quot;;\n    }\n}\n</code></pre>\n<p>But there is no error case here making it even harder to detect when we initially get into ERROR state and why.</p>\n<p>Here is how we create our triggered jobs:</p>\n<pre><code>@Bean\n    @ConditionalOnProperty(prefix = &quot;tickets.background.job&quot;, name = &quot;deliver-tickets.enabled&quot;, havingValue = &quot;true&quot;)\n    JobDescription deliverTicketsJobDescription() {\n        final long now = metrics ? System.currentTimeMillis() : 0;\n        JobDescription jobDescription =  JobDescriptionBuilder.builder()\n                .triggerType(TriggerType.CRON)\n                .jobClass(DeliverTicketsJob.class)\n                .cronExpression(deliverTicketsCron)\n                .jobGroupId(jobGroupId)\n                .jobId(&quot;deliverTickets&quot;)\n                .build();\n        if (metrics) {\n            LOGGER.debug(&quot;METRIC: deliverTicketsJobDescription ~ duration: &quot; + (System.currentTimeMillis() - now) + &quot;ms&quot;);\n        }\n        return jobDescription;\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-test-mvc"],"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1694519533,"post_id":77088183,"comment_id":135898761,"body_markdown":"Why not just return the Flux? Doesn&#39;t seem like you need `SseEmitter` at all. But that could just be the result of simplification/anonymization of the code.","body":"Why not just return the Flux? Doesn&#39;t seem like you need <code>SseEmitter</code> at all. But that could just be the result of simplification/anonymization of the code."},{"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"score":0,"creation_date":1694533056,"post_id":77088183,"comment_id":135902119,"body_markdown":"I get the same error with Flux @kaqqao","body":"I get the same error with Flux @kaqqao"},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1694595712,"post_id":77088183,"comment_id":135910667,"body_markdown":"I quickly tested this in a real web environment both with `SseEmitter` and `Flux` and it worked fine, so I suspect it&#39;s something with the test setup that&#39;s not acting right.","body":"I quickly tested this in a real web environment both with <code>SseEmitter</code> and <code>Flux</code> and it worked fine, so I suspect it&#39;s something with the test setup that&#39;s not acting right."},{"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"score":0,"creation_date":1694599787,"post_id":77088183,"comment_id":135911485,"body_markdown":"Yes, it works fine for me too in a real wen environment :)","body":"Yes, it works fine for me too in a real wen environment :)"}],"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694528734,"creation_date":1694513802,"question_id":77088183,"body_markdown":"I&#39;m trying to test my SSE endpoint which uses `SseEmitter`: \r\n\r\n```java\r\n@GetMapping(&quot;/subscribe&quot;)\r\npublic SseEmitter subscribe() {\r\n    SseEmitter sseEmitter = new SseEmitter(4000L);\r\n\r\n    Disposable disposable = Flux.interval(Duration.ZERO, Duration.of(1, ChronoUnit.SECONDS))\r\n            .map(e -&gt; event().data(&quot;data&quot; + e))\r\n            .log()\r\n            .subscribe(unchecked(sseEmitter::send));\r\n\r\n    sseEmitter.onError(e -&gt; log.error(&quot;SSE ERROR&quot;, e));\r\n\r\n    sseEmitter.onTimeout(unchecked(() -&gt; {\r\n        log.info(&quot;SSE Timeout&quot;);\r\n        sseEmitter.complete();\r\n    }));\r\n\r\n    sseEmitter.onCompletion(() -&gt; {\r\n        log.info(&quot;SSE COMPLETED&quot;);\r\n        disposable.dispose();\r\n    });\r\n\r\n    return sseEmitter;\r\n}\r\n```\r\n\r\nThe test: \r\n\r\n```\r\n@ActiveProfiles(&quot;test&quot;)\r\n@WebMvcTest(\r\n        controllers = SseEmitterController.class\r\n)\r\n@AutoConfigureWebTestClient(timeout = &quot;36000&quot;)\r\nclass SimpleSseTest {\r\n    \r\n    @Autowired\r\n    private WebTestClient webTestClient;\r\n\r\n    @Test\r\n    void test() {\r\n\r\n        FluxExchangeResult&lt;String&gt; result = webTestClient.get()\r\n                .uri(&quot;/subscribe&quot;)\r\n                .exchange()\r\n                .expectStatus().isOk()\r\n                .expectHeader().contentType(&quot;text/event-stream&quot;)\r\n                .returnResult(String.class);\r\n\r\n        StepVerifier.create(result.getResponseBody())\r\n                .expectNextCount(2)\r\n                .thenCancel()\r\n                .verify();\r\n    }\r\n}\r\n```\r\n\r\nBut the test fails with this error:\r\n\r\n&gt;org.springframework.web.reactive.function.client.WebClientRequestException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000; nested exception is java.lang.IllegalStateException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000\r\n\r\nDoes anyone know how do I to get rid of this error?\r\n\r\n***I&#39;m using spring-boot 2.6.8***","title":"Testing SseEmitter ends with timeToWait error","body":"<p>I'm trying to test my SSE endpoint which uses <code>SseEmitter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/subscribe&quot;)\npublic SseEmitter subscribe() {\n    SseEmitter sseEmitter = new SseEmitter(4000L);\n\n    Disposable disposable = Flux.interval(Duration.ZERO, Duration.of(1, ChronoUnit.SECONDS))\n            .map(e -&gt; event().data(&quot;data&quot; + e))\n            .log()\n            .subscribe(unchecked(sseEmitter::send));\n\n    sseEmitter.onError(e -&gt; log.error(&quot;SSE ERROR&quot;, e));\n\n    sseEmitter.onTimeout(unchecked(() -&gt; {\n        log.info(&quot;SSE Timeout&quot;);\n        sseEmitter.complete();\n    }));\n\n    sseEmitter.onCompletion(() -&gt; {\n        log.info(&quot;SSE COMPLETED&quot;);\n        disposable.dispose();\n    });\n\n    return sseEmitter;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>@ActiveProfiles(&quot;test&quot;)\n@WebMvcTest(\n        controllers = SseEmitterController.class\n)\n@AutoConfigureWebTestClient(timeout = &quot;36000&quot;)\nclass SimpleSseTest {\n    \n    @Autowired\n    private WebTestClient webTestClient;\n\n    @Test\n    void test() {\n\n        FluxExchangeResult&lt;String&gt; result = webTestClient.get()\n                .uri(&quot;/subscribe&quot;)\n                .exchange()\n                .expectStatus().isOk()\n                .expectHeader().contentType(&quot;text/event-stream&quot;)\n                .returnResult(String.class);\n\n        StepVerifier.create(result.getResponseBody())\n                .expectNextCount(2)\n                .thenCancel()\n                .verify();\n    }\n}\n</code></pre>\n<p>But the test fails with this error:</p>\n<blockquote>\n<p>org.springframework.web.reactive.function.client.WebClientRequestException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000; nested exception is java.lang.IllegalStateException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000</p>\n</blockquote>\n<p>Does anyone know how do I to get rid of this error?</p>\n<p><em><strong>I'm using spring-boot 2.6.8</strong></em></p>\n"},{"tags":["java","grpc","netty","graalvm-native-image"],"comments":[{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063074,"post_id":76581684,"comment_id":135027096,"body_markdown":"That is way too many questions.","body":"That is way too many questions."},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063443,"post_id":76581684,"comment_id":135027173,"body_markdown":"Possibly related: *[What is a shaded JAR file? And what is the difference/similarities between an uber JAR and shaded JAR?](https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a)*","body":"Possibly related: <i><a href=\"https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a\">What is a shaded JAR file? And what is the difference/similarities between an uber JAR and shaded JAR?</a></i>"},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063920,"post_id":76581684,"comment_id":135027264,"body_markdown":"What is *&quot;the shaded plugin&quot;*? The [Apache Maven Shade Plugin](https://maven.apache.org/plugins/maven-shade-plugin/)? Or something else?","body":"What is <i>&quot;the shaded plugin&quot;</i>? The <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">Apache Maven Shade Plugin</a>? Or something else?"},{"owner":{"account_id":28919271,"reputation":1,"user_id":22150605,"display_name":"yswdqz"},"score":0,"creation_date":1688092535,"post_id":76581684,"comment_id":135030668,"body_markdown":"Apologies for my lack of clarity, I was indeed referring to the Apache Maven Shade Plugin.","body":"Apologies for my lack of clarity, I was indeed referring to the Apache Maven Shade Plugin."}],"answers":[{"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688054303,"creation_date":1688054303,"answer_id":76582751,"question_id":76581684,"body_markdown":"Yes, shading can cause a lot of breakages for native-image.\r\n\r\nnative-image is not something that gRPC regularly tests. But it &quot;has worked for someone before.&quot; I could believe there is a regression occasionally, but I wouldn&#39;t expect there to be lots of issues.\r\n\r\ngRPC and some of its dependencies include native-image configuration in the JARs. That information is broken if you relocate the class files without rewriting the configuration. grpc-netty-shaded shades Netty, so gRPC has [custom code to rewrite native-image configuration](https://github.com/grpc/grpc-java/blob/f902e16d3d01e87350574fd3f1f59cd3a6ab29cc/netty/shaded/build.gradle#L136-L169). Thus, if you are shading, I&#39;d expect that to cause problems.","title":"What steps should I take before compiling my gRPC code with native-image","body":"<p>Yes, shading can cause a lot of breakages for native-image.</p>\n<p>native-image is not something that gRPC regularly tests. But it &quot;has worked for someone before.&quot; I could believe there is a regression occasionally, but I wouldn't expect there to be lots of issues.</p>\n<p>gRPC and some of its dependencies include native-image configuration in the JARs. That information is broken if you relocate the class files without rewriting the configuration. grpc-netty-shaded shades Netty, so gRPC has <a href=\"https://github.com/grpc/grpc-java/blob/f902e16d3d01e87350574fd3f1f59cd3a6ab29cc/netty/shaded/build.gradle#L136-L169\" rel=\"nofollow noreferrer\">custom code to rewrite native-image configuration</a>. Thus, if you are shading, I'd expect that to cause problems.</p>\n"}],"owner":{"account_id":28919271,"reputation":1,"user_id":22150605,"display_name":"yswdqz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694528220,"creation_date":1688046672,"question_id":76581684,"body_markdown":"I&#39;m working on a project that uses gRPC and I want to compile it with GraalVM&#39;s native-image for better performance and smaller memory footprint. \r\n\r\nI have tried to use native-image directly, but there are a lot of problems with class initialisation. I understand that there might be some specific configurations or steps that I need to take before I can successfully compile my gRPC code with native-image. \r\n\r\nHere are some specific areas where I&#39;m looking for guidance:\r\n\r\n1. Are there any specific gRPC features or APIs that are not compatible with native-image?\r\n2. Do I need to provide any additional configuration files (like reflection configuration) for native-image (Also, I used the shaded plugin to change the location of the grpc package. Might this have an effect on the configuration?)\r\n3. Are there any known issues or limitations that I should be aware of when using gRPC with native-image?\r\n4. Are there any best practices or tips\r\n\r\nWhat are the relevant resources?\r\n\r\n\r\n","title":"What steps should I take before compiling my gRPC code with native-image","body":"<p>I'm working on a project that uses gRPC and I want to compile it with GraalVM's native-image for better performance and smaller memory footprint.</p>\n<p>I have tried to use native-image directly, but there are a lot of problems with class initialisation. I understand that there might be some specific configurations or steps that I need to take before I can successfully compile my gRPC code with native-image.</p>\n<p>Here are some specific areas where I'm looking for guidance:</p>\n<ol>\n<li>Are there any specific gRPC features or APIs that are not compatible with native-image?</li>\n<li>Do I need to provide any additional configuration files (like reflection configuration) for native-image (Also, I used the shaded plugin to change the location of the grpc package. Might this have an effect on the configuration?)</li>\n<li>Are there any known issues or limitations that I should be aware of when using gRPC with native-image?</li>\n<li>Are there any best practices or tips</li>\n</ol>\n<p>What are the relevant resources?</p>\n"},{"tags":["java","spring","spring-mvc","tomcat","spring-boot"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":9,"creation_date":1493005541,"post_id":43579432,"comment_id":74208474,"body_markdown":"Post the *entire* stack trace. There&#39;s an additional line in there directly from Tomcat, probably saying that you already have something open on the port.","body":"Post the <i>entire</i> stack trace. There&#39;s an additional line in there directly from Tomcat, probably saying that you already have something open on the port."}],"answers":[{"tags":[],"owner":{"account_id":5096971,"reputation":951,"user_id":5910325,"accept_rate":100,"display_name":"Aziz"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1493020787,"creation_date":1493020787,"answer_id":43582727,"question_id":43579432,"body_markdown":"Try to change the port number in `application.yaml` (or `application.properties`) to something else.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Try to change the port number in <code>application.yaml</code> (or <code>application.properties</code>) to something else.</p>\n"},{"tags":[],"owner":{"account_id":3275313,"reputation":5882,"user_id":2757561,"accept_rate":71,"display_name":"cralfaro"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1539512468,"creation_date":1493028086,"answer_id":43585142,"question_id":43579432,"body_markdown":"You need to add the tomcat dependency in your pom\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>You need to add the tomcat dependency in your pom</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4069052,"reputation":2822,"user_id":3342866,"display_name":"CGS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512030193,"creation_date":1512030193,"answer_id":47568843,"question_id":43579432,"body_markdown":"You need to Tomcat Dependency and also extend your Application Class from extends SpringBootServletInitializer \r\n\r\n    @SpringBootApplication  \r\n    public class App extend SpringBootServletInitializer\r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            SpringApplication.run(App.class, &quot;hello&quot;);\r\n        }\r\n    }","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>You need to Tomcat Dependency and also extend your Application Class from extends SpringBootServletInitializer </p>\n\n<pre><code>@SpringBootApplication  \npublic class App extend SpringBootServletInitializer\n{\n    public static void main( String[] args )\n    {\n        SpringApplication.run(App.class, \"hello\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6691627,"reputation":145,"user_id":5160957,"display_name":"Norman Bai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520571564,"creation_date":1520567687,"answer_id":49186361,"question_id":43579432,"body_markdown":"In my condition when I got an exception &quot; Unable to start embedded Tomcat servlet container&quot;,\r\n\r\nI opened the debug mode of spring boot by adding `debug=true` in the application.properties,\r\n\r\nand then rerun the code ,and it told me that `java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String`\r\n\r\nThus, we know that probably I&#39;m using a servlet API of lower version, and it conflicts with spring boot version.\r\n\r\nI went to my pom.xml, and found one of my dependencies is using servlet2.5,\r\nand I excluded it.\r\n\r\nNow it works. Hope it helps.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>In my condition when I got an exception \" Unable to start embedded Tomcat servlet container\",</p>\n\n<p>I opened the debug mode of spring boot by adding <code>debug=true</code> in the application.properties,</p>\n\n<p>and then rerun the code ,and it told me that <code>java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String</code></p>\n\n<p>Thus, we know that probably I'm using a servlet API of lower version, and it conflicts with spring boot version.</p>\n\n<p>I went to my pom.xml, and found one of my dependencies is using servlet2.5,\nand I excluded it.</p>\n\n<p>Now it works. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":3372982,"reputation":156,"user_id":9495552,"display_name":"Jawad Khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536213386,"creation_date":1536213386,"answer_id":52197368,"question_id":43579432,"body_markdown":"For me, I just had to put a -X flag with `mvn`. Look at the debug log; there was an issue with Spring while locating the .properties file.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>For me, I just had to put a -X flag with <code>mvn</code>. Look at the debug log; there was an issue with Spring while locating the .properties file.</p>\n"},{"tags":[],"owner":{"account_id":7405841,"reputation":897,"user_id":5634808,"display_name":"Amos Kosgei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537048818,"creation_date":1537047895,"answer_id":52349144,"question_id":43579432,"body_markdown":"Simple way to handle this is to include this in your application.properties or .yml file:\r\n`server.port=0` for application.properties and `server.port: 0` for application.yml files. Of course need to be aware these may change depending on the springboot version you are using.\r\nThese will allow your machine to dynamically allocate any free port available for use.\r\nTo statically assign a port change the above to `server.port = someportnumber`. If running unix based OS you may want to check for zombie activities on the port in question and if possible kill it using `fuser -k {theport}/tcp`.\r\nYour .yml or .properties should look like this.\r\n`\r\nserver:\r\n  port: 8089\r\n  servlet:\r\n    context-path: /somecontextpath `\r\n\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Simple way to handle this is to include this in your application.properties or .yml file:\n<code>server.port=0</code> for application.properties and <code>server.port: 0</code> for application.yml files. Of course need to be aware these may change depending on the springboot version you are using.\nThese will allow your machine to dynamically allocate any free port available for use.\nTo statically assign a port change the above to <code>server.port = someportnumber</code>. If running unix based OS you may want to check for zombie activities on the port in question and if possible kill it using <code>fuser -k {theport}/tcp</code>.\nYour .yml or .properties should look like this.\n<code>\nserver:\n  port: 8089\n  servlet:\n    context-path: /somecontextpath</code></p>\n"},{"tags":[],"owner":{"account_id":17252923,"reputation":216,"user_id":12492680,"display_name":"Andrej"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592729831,"creation_date":1592729831,"answer_id":62496448,"question_id":43579432,"body_markdown":"For me, the problem was in XML migrations. I deleted all tables and sequences and it works on next bootRun","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>For me, the problem was in XML migrations. I deleted all tables and sequences and it works on next bootRun</p>\n"},{"tags":[],"owner":{"account_id":4116834,"reputation":401,"user_id":3378192,"display_name":"Kvlcm"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599641710,"creation_date":1599641710,"answer_id":63808154,"question_id":43579432,"body_markdown":"If you are running on a linux environment, basically your app does not have rights for the default port.\r\n\r\nTry 8181 by giving the following option on VM.\r\n\r\n``` -Dserver.port=8181 ```","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>If you are running on a linux environment, basically your app does not have rights for the default port.</p>\n<p>Try 8181 by giving the following option on VM.</p>\n<p><code>-Dserver.port=8181</code></p>\n"},{"tags":[],"owner":{"account_id":11697339,"reputation":1663,"user_id":8563654,"display_name":"Senthuran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613114532,"creation_date":1613114532,"answer_id":66167754,"question_id":43579432,"body_markdown":"This could happen due to the change in java version of the project.Say for example if the project is build in java 8 and if we change the java version to 11 then there can be such issue. In intellij idea go to the **File-&gt;Project Structure** then change the **Project SDK Version**. ","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>This could happen due to the change in java version of the project.Say for example if the project is build in java 8 and if we change the java version to 11 then there can be such issue. In intellij idea go to the <strong>File-&gt;Project Structure</strong> then change the <strong>Project SDK Version</strong>.</p>\n"},{"tags":[],"owner":{"account_id":17951171,"reputation":9,"user_id":13044257,"display_name":"Andrei Hryshanovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631177130,"creation_date":1631177130,"answer_id":69115006,"question_id":43579432,"body_markdown":"As said above, if you are running on a Linux, your app does not have access to 80 port. There are two ways to solve this issue:\r\n\r\n 1. Run your application with root previlegies - good idea only for local\r\n    testing, not for any production.\r\n    \r\n 2.  Run app at port 8081 for example, setup reverse-proxy with nginx, and redirect requests from 80 to 8081.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>As said above, if you are running on a Linux, your app does not have access to 80 port. There are two ways to solve this issue:</p>\n<ol>\n<li><p>Run your application with root previlegies - good idea only for local\ntesting, not for any production.</p>\n</li>\n<li><p>Run app at port 8081 for example, setup reverse-proxy with nginx, and redirect requests from 80 to 8081.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20317337,"reputation":51,"user_id":14902908,"display_name":"Dionizij Malacko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1649025208,"creation_date":1649025208,"answer_id":71730347,"question_id":43579432,"body_markdown":"In my case, I had multiple errors where the first one was: ,,Unable to start embedded Tomcat servlet container&quot;. I tried to solve the first one multiple times, but the real problem was in the rest of them. Turns out I had two different imports of the Logger, so when I tried to initialize it there wasn&#39;t a compile problem but it was a runtime error. \r\n\r\nMy advice: check all the error you have, maybe the problem is not in the first one as I initially thought. So maybe solution to this problem is in the next displayed error. \r\n\r\nIf this is the only error you have, the solution is probably on of the above answers.\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>In my case, I had multiple errors where the first one was: ,,Unable to start embedded Tomcat servlet container&quot;. I tried to solve the first one multiple times, but the real problem was in the rest of them. Turns out I had two different imports of the Logger, so when I tried to initialize it there wasn't a compile problem but it was a runtime error.</p>\n<p>My advice: check all the error you have, maybe the problem is not in the first one as I initially thought. So maybe solution to this problem is in the next displayed error.</p>\n<p>If this is the only error you have, the solution is probably on of the above answers.</p>\n"},{"tags":[],"owner":{"account_id":18304375,"reputation":11,"user_id":13328487,"display_name":"Sendi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676961365,"creation_date":1676961365,"answer_id":75517006,"question_id":43579432,"body_markdown":"It seems that you might have used Mapping incorrectly one of your, if not more, entities. Fix that. And the error should go away.\r\n\r\nIn my case, I forgot that I mapped two entities and left one of them with an object annotated with @OneToMany. I commented out and I am now rid of that error.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>It seems that you might have used Mapping incorrectly one of your, if not more, entities. Fix that. And the error should go away.</p>\n<p>In my case, I forgot that I mapped two entities and left one of them with an object annotated with @OneToMany. I commented out and I am now rid of that error.</p>\n"},{"tags":[],"owner":{"account_id":1612919,"reputation":1711,"user_id":1491384,"accept_rate":83,"display_name":"Taylor Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694527341,"creation_date":1694527341,"answer_id":77089861,"question_id":43579432,"body_markdown":"Though may not be OP&#39;s solution, my search brought me here, and then I figured out what my issue was causing this same error message.\r\n\r\nMy application-beta.yml was named properly to match my run configuration &gt; active profile setting (my IDE = intelliJ). However, I missed one spot in the yml file where a property needed to be set:\r\n\r\n    spring:\r\n      profiles: betarclocal\r\n\r\nneeded to be changed to match the &quot;beta&quot; active profile:\r\n\r\n    spring:\r\n      profiles: beta\r\n\r\nSimply overlooked this and all the properties in the yml config under this were being ignored... And one of the properties were needed for the tomcat server.\r\n\r\nLong story shory: make sure your active profiles, spring profiles, and application-[activeprofile].yml are all named uniformly.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Though may not be OP's solution, my search brought me here, and then I figured out what my issue was causing this same error message.</p>\n<p>My application-beta.yml was named properly to match my run configuration &gt; active profile setting (my IDE = intelliJ). However, I missed one spot in the yml file where a property needed to be set:</p>\n<pre><code>spring:\n  profiles: betarclocal\n</code></pre>\n<p>needed to be changed to match the &quot;beta&quot; active profile:</p>\n<pre><code>spring:\n  profiles: beta\n</code></pre>\n<p>Simply overlooked this and all the properties in the yml config under this were being ignored... And one of the properties were needed for the tomcat server.</p>\n<p>Long story shory: make sure your active profiles, spring profiles, and application-[activeprofile].yml are all named uniformly.</p>\n"}],"owner":{"account_id":10410881,"reputation":451,"user_id":7676307,"display_name":"amar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313391,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":43582727,"answer_count":13,"score":44,"last_activity_date":1694527341,"creation_date":1493005279,"question_id":43579432,"body_markdown":"I&#39;m new to Spring Boot and having with error while running my application.\r\nI&#39;m following a tutorial and I believe I&#39;m having proper parent and dependencies with POM, please help me \r\n\r\nmain class:\r\n\r\n    package com.boot;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    /**\r\n     * Hello world!\r\n     *\r\n     */\r\n    \r\n    @SpringBootApplication\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            SpringApplication.run(App.class, &quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nerror is:\r\n \r\n\r\n       org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat servlet container\r\n        \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:165) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.startEmbeddedServletContainer(EmbeddedWebApplicationContext.java:293) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:141) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat com.boot.App.main(App.java:18) [classes/:na]Caused by: java.lang.IllegalStateException: Tomcat connector in failed state\r\n        \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:159) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \t... 10 common frames omitted\r\n\r\nPOM :\r\n\r\n    \r\n\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n          &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;das-boot&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n      &lt;name&gt;das-boot&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>I'm new to Spring Boot and having with error while running my application.\nI'm following a tutorial and I believe I'm having proper parent and dependencies with POM, please help me </p>\n\n<p>main class:</p>\n\n<pre><code>package com.boot;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * Hello world!\n *\n */\n\n@SpringBootApplication\npublic class App \n{\n    public static void main( String[] args )\n    {\n        SpringApplication.run(App.class, \"hello\");\n    }\n}\n</code></pre>\n\n<p>error is:</p>\n\n<pre><code>   org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat servlet container\n        at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:165) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.startEmbeddedServletContainer(EmbeddedWebApplicationContext.java:293) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:141) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at com.boot.App.main(App.java:18) [classes/:na]Caused by: java.lang.IllegalStateException: Tomcat connector in failed state\n        at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:159) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        ... 10 common frames omitted\n</code></pre>\n\n<p>POM :</p>\n\n<pre><code>    &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;das-boot&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n  &lt;name&gt;das-boot&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n  &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jpa","eclipselink","jpql","apache-ranger"],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694527154,"creation_date":1694527154,"answer_id":77089839,"question_id":77089302,"body_markdown":"You need [EclipseLink version &gt; 3][1] for JDK 11 support\r\n\r\n\r\n  [1]: https://eclipse.dev/eclipselink/releases/3.0.php","title":"My JPA named Query is failing to compile when I upgrade to java 11","body":"<p>You need <a href=\"https://eclipse.dev/eclipselink/releases/3.0.php\" rel=\"nofollow noreferrer\">EclipseLink version &gt; 3</a> for JDK 11 support</p>\n"}],"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694527154,"creation_date":1694523123,"question_id":77089302,"body_markdown":"My same JPQL query was working on java 8, when I upgraded to java 11 it stopped working.\r\nI am using eclipselink implementation.\r\nquery\r\n\r\n    &lt;named-query name=&quot;XXDataHist.findLatestByObjectClassTypeAndObjectIdAndEventTime&quot;&gt;\r\n\r\n\t\t&lt;query&gt;select obj from XXDataHist obj WHERE obj.objectId = :objectId AND\r\n\t\tobj.objectClassType = :classType AND\r\n\t\tobj.createTime &amp;lt;= :createTime ORDER BY obj.id DESC&lt;/query&gt;\r\n\t&lt;/named-query&gt;\r\n\r\nand it fails with below error,\r\n\r\n```\r\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is \r\njavax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): \r\norg.eclipse.persistence.exceptions.EntityManagerSetupException|\r\nException Description: Deployment of PersistenceUnit [defaultPU] failed.\r\nClose all factories for this PersistenceUnit.|\r\nInternal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException|\r\nException Description: Problem compiling [select obj from XXDataHist obj where \r\nobj.objectId = :objectId and |             obj.objectClassType = :classType and |  \r\nobj.createTime &lt;= :createTime ORDER BY obj.id DESC]. |[16, 26] \r\nThe abstract schema type &#39;XXDataHist&#39; is unknown.\r\n|[37, 49] The state field path &#39;obj.objectId&#39; cannot be resolved to a valid type.\r\n|[66, 85] The state field path &#39;obj.objectClassType&#39; cannot be resolved to a valid type.\r\n|[103, 117] The state field path &#39;obj.createTime&#39; cannot be resolved to a valid type.\r\n|[142, 148] The state field path &#39;obj.id&#39; cannot be resolved to a valid type.\r\n```\r\n\r\nEntity class :\r\n\r\n```\r\n@Entity\r\n@Cacheable\r\n@XmlRootElement\r\n@Table(name = &quot;x_data_hist&quot;)\r\npublic class XXDataHist implements java.io.Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n\t@SequenceGenerator(name = &quot;x_data_hist_SEQ&quot;, sequenceName = &quot;x_data_hist_SEQ&quot;, allocationSize = 1)\r\n\t@GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;x_data_hist_SEQ&quot;)\r\n\t@Column(name = &quot;id&quot;)\r\n\tprotected Long id;\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;CREATE_TIME&quot;)\r\n\tprotected Date createTime = DateUtil.getUTCDate();\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;UPDATE_TIME&quot;)\r\n\tprotected Date updateTime = DateUtil.getUTCDate();\r\n\r\n    @Column(name = &quot;version&quot;)\r\n\tprotected Long version;\r\n\r\n    @Column(name = &quot;obj_guid&quot;)\r\n\tprotected String objectGuid;\r\n\r\n    @Column(name = &quot;obj_class_type&quot;)\r\n\tprotected Integer objectClassType;\r\n\r\n    @Column(name = &quot;obj_id&quot;)\r\n\tprotected Long objectId;\r\n\r\n    @Column(name = &quot;obj_name&quot;)\r\n\tprotected String objectName;\r\n\r\n\t\r\n\t@Column(name = &quot;action&quot;)\r\n\tprotected String action;\r\n\r\n\t\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;from_time&quot;)\r\n\tprotected Date fromTime;\r\n\r\n\t\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;to_time&quot;)\r\n\tprotected Date toTime;\r\n\r\n\t\r\n\t@Column(name = &quot;content&quot;)\r\n\tprotected String content;\r\n\r\n//constructor equals toString , getters and setters \r\n}\r\n```\r\nI am just wondering why is it working properly with java 8 and fails with java 11, I need to fix this query If it has any issue which was allowed in java 8 but not in java 11.","title":"My JPA named Query is failing to compile when I upgrade to java 11","body":"<p>My same JPQL query was working on java 8, when I upgraded to java 11 it stopped working.\nI am using eclipselink implementation.\nquery</p>\n<pre><code>&lt;named-query name=&quot;XXDataHist.findLatestByObjectClassTypeAndObjectIdAndEventTime&quot;&gt;\n\n    &lt;query&gt;select obj from XXDataHist obj WHERE obj.objectId = :objectId AND\n    obj.objectClassType = :classType AND\n    obj.createTime &amp;lt;= :createTime ORDER BY obj.id DESC&lt;/query&gt;\n&lt;/named-query&gt;\n</code></pre>\n<p>and it fails with below error,</p>\n<pre><code>org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is \njavax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): \norg.eclipse.persistence.exceptions.EntityManagerSetupException|\nException Description: Deployment of PersistenceUnit [defaultPU] failed.\nClose all factories for this PersistenceUnit.|\nInternal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException|\nException Description: Problem compiling [select obj from XXDataHist obj where \nobj.objectId = :objectId and |             obj.objectClassType = :classType and |  \nobj.createTime &lt;= :createTime ORDER BY obj.id DESC]. |[16, 26] \nThe abstract schema type 'XXDataHist' is unknown.\n|[37, 49] The state field path 'obj.objectId' cannot be resolved to a valid type.\n|[66, 85] The state field path 'obj.objectClassType' cannot be resolved to a valid type.\n|[103, 117] The state field path 'obj.createTime' cannot be resolved to a valid type.\n|[142, 148] The state field path 'obj.id' cannot be resolved to a valid type.\n</code></pre>\n<p>Entity class :</p>\n<pre><code>@Entity\n@Cacheable\n@XmlRootElement\n@Table(name = &quot;x_data_hist&quot;)\npublic class XXDataHist implements java.io.Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @SequenceGenerator(name = &quot;x_data_hist_SEQ&quot;, sequenceName = &quot;x_data_hist_SEQ&quot;, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;x_data_hist_SEQ&quot;)\n    @Column(name = &quot;id&quot;)\n    protected Long id;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;CREATE_TIME&quot;)\n    protected Date createTime = DateUtil.getUTCDate();\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;UPDATE_TIME&quot;)\n    protected Date updateTime = DateUtil.getUTCDate();\n\n    @Column(name = &quot;version&quot;)\n    protected Long version;\n\n    @Column(name = &quot;obj_guid&quot;)\n    protected String objectGuid;\n\n    @Column(name = &quot;obj_class_type&quot;)\n    protected Integer objectClassType;\n\n    @Column(name = &quot;obj_id&quot;)\n    protected Long objectId;\n\n    @Column(name = &quot;obj_name&quot;)\n    protected String objectName;\n\n    \n    @Column(name = &quot;action&quot;)\n    protected String action;\n\n    \n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;from_time&quot;)\n    protected Date fromTime;\n\n    \n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;to_time&quot;)\n    protected Date toTime;\n\n    \n    @Column(name = &quot;content&quot;)\n    protected String content;\n\n//constructor equals toString , getters and setters \n}\n</code></pre>\n<p>I am just wondering why is it working properly with java 8 and fails with java 11, I need to fix this query If it has any issue which was allowed in java 8 but not in java 11.</p>\n"},{"tags":["java","gatling"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694519407,"post_id":77088809,"comment_id":135898724,"body_markdown":"When you say &quot;The ${out} statement doesn&#39;t work.&quot;, what *specifically* happens? Error message? Unexpected value? Something else?","body":"When you say &quot;The ${out} statement doesn&#39;t work.&quot;, what <i>specifically</i> happens? Error message? Unexpected value? Something else?"},{"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"score":0,"creation_date":1694521322,"post_id":77088809,"comment_id":135899176,"body_markdown":"@Jorn I&#39;m getting a &quot;jsonPath($.result).find.is(${out}), but actually found pong&quot; (added to the original post)","body":"@Jorn I&#39;m getting a &quot;jsonPath($.result).find.is(${out}), but actually found pong&quot; (added to the original post)"},{"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"score":0,"creation_date":1694521597,"post_id":77088809,"comment_id":135899244,"body_markdown":"If I use a &quot;.check(substring(&quot;${out}&quot;).exists())&quot; then it works. But this is not what I want. So it seems that the &quot;${out}&quot; doesn&#39;t work in a &quot;is()&quot; statement","body":"If I use a &quot;.check(substring(&quot;${out}&quot;).exists())&quot; then it works. But this is not what I want. So it seems that the &quot;${out}&quot; doesn&#39;t work in a &quot;is()&quot; statement"}],"answers":[{"tags":[],"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694527057,"creation_date":1694523685,"answer_id":77089370,"question_id":77088809,"body_markdown":"What I was doing wrong was to call the `is()` function and not the `isEL()` instead.\r\n\r\nThis is because of how the 2 functions work. Check the code and documentation to know more about it.\r\n\r\nSo the change needed to make my previous code work is to change `is(&quot;${out}&quot;)` to `isEL(&quot;${out}&quot;)`","title":"Check gatling test response body with a json feeder","body":"<p>What I was doing wrong was to call the <code>is()</code> function and not the <code>isEL()</code> instead.</p>\n<p>This is because of how the 2 functions work. Check the code and documentation to know more about it.</p>\n<p>So the change needed to make my previous code work is to change <code>is(&quot;${out}&quot;)</code> to <code>isEL(&quot;${out}&quot;)</code></p>\n"}],"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1694527057,"creation_date":1694519289,"question_id":77088809,"body_markdown":"I&#39;m trying to check the body responses of a service call in a Gatling test. However, I want to have a JSON file to check the expected responses. To do so, I&#39;m using a Feeder and trying to evaluate the actual response with values get from the Feeder. Here is what I have:\r\n\r\ndata.json:\r\n\r\n    [\r\n      {&quot;out&quot;: &quot;pong&quot;}\r\n    ]\r\n\r\nSmallTest.java:\r\n\r\n    public class SmallTest extends Simulation {\r\n    \r\n        public SmallTest() {\r\n    \r\n            final HttpProtocolBuilder httpProtocol = http\r\n                    .baseUrl(&quot;https://example.com&quot;);\r\n    \r\n            final FeederBuilder&lt;Object&gt; feeder = jsonFile(&quot;data.json&quot;);\r\n    \r\n            final ChainBuilder call = exec(http(&quot;Api Response&quot;)\r\n                    .post(&quot;/ping&quot;)\r\n                    .check(status().is(200))\r\n                    .check(jsonPath(&quot;$.result&quot;).is(&quot;${out}&quot;)));\r\n    \r\n            final ScenarioBuilder scenario = scenario(&quot;Response Test&quot;)\r\n                    .feed(feeder)\r\n                    .exec(call);\r\n    \r\n            setUp(scenario\r\n                    .injectOpen(atOnceUsers(1))\r\n            ).protocols(httpProtocol);\r\n        }\r\n    \r\n    }\r\n\r\nThe `${out}` statement doesn&#39;t work. I get an error saying:\r\n\r\n&gt; jsonPath($.result).find.is(${out}), but\r\n&gt; actually found pong\r\n\r\nThe result of calling http://example.com/ping is the following json response:\r\n\r\n    {\r\n       &quot;result&quot;: &quot;pong&quot;\r\n    }\r\n\r\nSide note:\r\n\r\nI tried to use `.check(substring(&quot;${out}&quot;).exists())` and it worked. But this is not what I want. It seems that the `${out}` doesn&#39;t work inside a `is()` statement","title":"Check gatling test response body with a json feeder","body":"<p>I'm trying to check the body responses of a service call in a Gatling test. However, I want to have a JSON file to check the expected responses. To do so, I'm using a Feeder and trying to evaluate the actual response with values get from the Feeder. Here is what I have:</p>\n<p>data.json:</p>\n<pre><code>[\n  {&quot;out&quot;: &quot;pong&quot;}\n]\n</code></pre>\n<p>SmallTest.java:</p>\n<pre><code>public class SmallTest extends Simulation {\n\n    public SmallTest() {\n\n        final HttpProtocolBuilder httpProtocol = http\n                .baseUrl(&quot;https://example.com&quot;);\n\n        final FeederBuilder&lt;Object&gt; feeder = jsonFile(&quot;data.json&quot;);\n\n        final ChainBuilder call = exec(http(&quot;Api Response&quot;)\n                .post(&quot;/ping&quot;)\n                .check(status().is(200))\n                .check(jsonPath(&quot;$.result&quot;).is(&quot;${out}&quot;)));\n\n        final ScenarioBuilder scenario = scenario(&quot;Response Test&quot;)\n                .feed(feeder)\n                .exec(call);\n\n        setUp(scenario\n                .injectOpen(atOnceUsers(1))\n        ).protocols(httpProtocol);\n    }\n\n}\n</code></pre>\n<p>The <code>${out}</code> statement doesn't work. I get an error saying:</p>\n<blockquote>\n<p>jsonPath($.result).find.is(${out}), but\nactually found pong</p>\n</blockquote>\n<p>The result of calling <a href=\"http://example.com/ping\" rel=\"nofollow noreferrer\">http://example.com/ping</a> is the following json response:</p>\n<pre><code>{\n   &quot;result&quot;: &quot;pong&quot;\n}\n</code></pre>\n<p>Side note:</p>\n<p>I tried to use <code>.check(substring(&quot;${out}&quot;).exists())</code> and it worked. But this is not what I want. It seems that the <code>${out}</code> doesn't work inside a <code>is()</code> statement</p>\n"},{"tags":["java","android","navigation","material-design-3"],"owner":{"account_id":27914983,"reputation":216,"user_id":21316322,"display_name":"Paul Martin Cuba N&#250;&#241;ez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694526699,"creation_date":1694526699,"question_id":77089781,"body_markdown":"&quot;Greetings everyone! Today, I am excited to share my exciting personal journey. While starting my app project, I ran into challenges while trying to create a Badge in Android Studio with Material Design 3. At first, it seemed like a complicated path, but In the end, I managed to overcome all the obstacles. I&#39;m here to share with you how I did it!&quot;\r\nexamples:\r\n[enter image description here](https://i.stack.imgur.com/UkxmC.jpg)\r\n\r\n```\r\n// This is the onStart method.\r\n// It&#39;s used in the lifecycle of an activity to perform setups and preparations\r\n// before the activity becomes visible to the user.\r\n@Override\r\nprotected void onStart() {\r\n    super.onStart();\r\n\r\n    // Set up navigation and other UI elements here\r\n    // This is done before the activity is fully visible to the user\r\n    // to ensure everything is ready when it&#39;s displayed on the screen.\r\n    \r\n    // You can set up event listeners, start services, etc.\r\n    \r\n    // This is useful when you need certain actions to be performed before\r\n    // the user can interact with the activity.\r\n}\r\n\r\n// This is the onCreate method, which is called after onStart.\r\n// Here, the initial setup of the activity is done, like configuring the UI and preparing data.\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n    \r\n    // Other initial configurations can be done here.\r\n}\r\n```\r\n\r\n&gt; complete code\r\n\r\n```\r\n`@Override\r\nprotected void onStart() {\r\n    super.onStart();\r\n\r\n    // Set up navigation controller for the bottom navigation view\r\n    NavController navController = Navigation.findNavController(this, R.id.fragmentContainerView);\r\n    NavigationUI.setupWithNavController(bottomNavigationView, navController, false);\r\n\r\n    // Set up navigation controller for the navigation drawer\r\n    NavController navControllerDrawer = Navigation.findNavController(this, R.id.fragmentContainerView);\r\n    NavigationUI.setupWithNavController(navigationView, navControllerDrawer, false);\r\n\r\n    // Handle item selection in the bottom navigation view\r\n    bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n        @Override\r\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n            switch (item.getItemId()) {\r\n                case R.id.nav_inicio_op:\r\n                    navController.navigate(R.id.nav_inicio_op);\r\n                    break;\r\n                case R.id.nav_observacion_op:\r\n                    navController.navigate(R.id.nav_observacion_op);\r\n                    break;\r\n                case R.id.nav_trabajadores_op:\r\n                    // Create and configure a badge for the &quot;nav_trabajadores_op&quot; item\r\n                    BadgeDrawable badgeDrawable = bottomNavigationView.getOrCreateBadge(R.id.nav_trabajadores_op);\r\n                    badgeDrawable.clearNumber();\r\n                    badgeDrawable.setVisible(false);\r\n                    // Navigate to the &quot;nav_trabajadores_op&quot; destination\r\n                    navController.navigate(R.id.nav_trabajadores_op);\r\n                    break;\r\n                case R.id.nav_usuario_op:\r\n                    navController.navigate(R.id.nav_usuario_op);\r\n                    break;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n    // Create and configure a counter view in the navigation drawer\r\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\r\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\r\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\r\n    // Show the counter with a specific count number\r\n    Show_Counter(gallery_count_number);\r\n}\r\n\r\n    // Crear y configurar una vista de contador en el men&#250; desplegable de navegaci&#243;n (navigationView)\r\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\r\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\r\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\r\n    // Mostrar el contador con un n&#250;mero espec&#237;fico\r\n    Show_Counter(gallery_count_number);\r\n}`\r\n```","title":"Creating Badge in Android Studio 2022.1.1 Patch 2 with Bottom Navigation Bar and etpack navigation component using Material Design 3","body":"<p>&quot;Greetings everyone! Today, I am excited to share my exciting personal journey. While starting my app project, I ran into challenges while trying to create a Badge in Android Studio with Material Design 3. At first, it seemed like a complicated path, but In the end, I managed to overcome all the obstacles. I'm here to share with you how I did it!&quot;\nexamples:\n<a href=\"https://i.stack.imgur.com/UkxmC.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>// This is the onStart method.\n// It's used in the lifecycle of an activity to perform setups and preparations\n// before the activity becomes visible to the user.\n@Override\nprotected void onStart() {\n    super.onStart();\n\n    // Set up navigation and other UI elements here\n    // This is done before the activity is fully visible to the user\n    // to ensure everything is ready when it's displayed on the screen.\n    \n    // You can set up event listeners, start services, etc.\n    \n    // This is useful when you need certain actions to be performed before\n    // the user can interact with the activity.\n}\n\n// This is the onCreate method, which is called after onStart.\n// Here, the initial setup of the activity is done, like configuring the UI and preparing data.\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    // Other initial configurations can be done here.\n}\n</code></pre>\n<blockquote>\n<p>complete code</p>\n</blockquote>\n<pre><code>`@Override\nprotected void onStart() {\n    super.onStart();\n\n    // Set up navigation controller for the bottom navigation view\n    NavController navController = Navigation.findNavController(this, R.id.fragmentContainerView);\n    NavigationUI.setupWithNavController(bottomNavigationView, navController, false);\n\n    // Set up navigation controller for the navigation drawer\n    NavController navControllerDrawer = Navigation.findNavController(this, R.id.fragmentContainerView);\n    NavigationUI.setupWithNavController(navigationView, navControllerDrawer, false);\n\n    // Handle item selection in the bottom navigation view\n    bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\n        @Override\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n            switch (item.getItemId()) {\n                case R.id.nav_inicio_op:\n                    navController.navigate(R.id.nav_inicio_op);\n                    break;\n                case R.id.nav_observacion_op:\n                    navController.navigate(R.id.nav_observacion_op);\n                    break;\n                case R.id.nav_trabajadores_op:\n                    // Create and configure a badge for the &quot;nav_trabajadores_op&quot; item\n                    BadgeDrawable badgeDrawable = bottomNavigationView.getOrCreateBadge(R.id.nav_trabajadores_op);\n                    badgeDrawable.clearNumber();\n                    badgeDrawable.setVisible(false);\n                    // Navigate to the &quot;nav_trabajadores_op&quot; destination\n                    navController.navigate(R.id.nav_trabajadores_op);\n                    break;\n                case R.id.nav_usuario_op:\n                    navController.navigate(R.id.nav_usuario_op);\n                    break;\n            }\n\n            return false;\n        }\n    });\n\n    // Create and configure a counter view in the navigation drawer\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\n    // Show the counter with a specific count number\n    Show_Counter(gallery_count_number);\n}\n\n    // Crear y configurar una vista de contador en el men desplegable de navegacin (navigationView)\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\n    // Mostrar el contador con un nmero especfico\n    Show_Counter(gallery_count_number);\n}`\n</code></pre>\n"},{"tags":["java","authentication","keycloak"],"owner":{"account_id":29422878,"reputation":1,"user_id":22544245,"display_name":"KiTTeNqz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694526510,"creation_date":1694526421,"question_id":77089741,"body_markdown":"I&#39;ve got custom auth flow with my auth provider. This provider also has its own custom form. After Username password login, i create my first form where user has to enter secret code(it&#39;s constant due to tests). After successful enter, i want to draw another form with just login, secret code and a button &quot;Next&quot;, which will finish auth process.\r\n\r\nThe problem is, i don&#39;t know how to pass my secret code to the new form, and, more importantly, i don&#39;t know how to get it in my custom form.\r\n\r\n```java\r\n\r\npublic class SecretCodeAuth implements Authenticator {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(SecretCodeAuth.class);\r\n    @Override\r\n    public void authenticate(AuthenticationFlowContext context) {\r\n        Response challenge = context.form().createForm(&quot;seccode.ftl&quot;);\r\n        context.challenge(challenge);\r\n    }\r\n\r\n    @Override\r\n    public void action(AuthenticationFlowContext context) {\r\n        String secretCode = context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;seccode&quot;);\r\n        String expectedCode = &quot;555&quot;;\r\n\r\n        if(secretCode==null||!secretCode.equals(expectedCode)){\r\n            Response response = context.form()\r\n                            .setError(&quot;badCode&quot;)\r\n                                    .createForm(&quot;seccode.ftl&quot;);\r\n            context.failureChallenge(AuthenticationFlowError.INVALID_CREDENTIALS, response);\r\n            return;\r\n        }\r\n\r\n        context.getAuthenticationSession().setUserSessionNote(&quot;seccode&quot;, secretCode);\r\n        Response challenge = context\r\n                .form()\r\n                .createForm(&quot;gonext.ftl&quot;);\r\n        context.challenge(challenge);\r\n\r\n        if(&quot;true&quot;.equals(context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;confirmation&quot;)))\r\n            context.success();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is the second form code.\r\n\r\n```ftl\r\n&lt;#import &quot;template.ftl&quot; as layout&gt;\r\n&lt;@layout.registrationLayout displayMessage=false; section&gt;\r\n    &lt;#if section = &quot;title&quot;&gt;\r\n        ${msg(&quot;loginTitle&quot;,realm.name)}\r\n    &lt;#elseif section = &quot;header&quot;&gt;\r\n        Enter your secret code\r\n    &lt;#elseif section = &quot;form&quot;&gt;\r\n        &lt;form id=&quot;kc-totp-login-form&quot; class=&quot;${properties.kcFormClass!}&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\r\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\r\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;Your secret code is:&lt;/label&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\r\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${user}&lt;/label&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcInputWrapperClass!}&quot;&gt;\r\n                    &lt;input id=&quot;totp&quot; name=&quot;confirmation&quot; type=&quot;hidden&quot; class=&quot;${properties.kcInputClass!}&quot; value=&quot;true&quot; /&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n\r\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                &lt;div id=&quot;kc-form-options&quot; class=&quot;${properties.kcFormOptionsClass!}&quot;&gt;\r\n                    &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormButtonsClass!}&quot;&gt;\r\n                    &lt;div class=&quot;${properties.kcFormButtonsWrapperClass!}&quot;&gt;\r\n                        &lt;input class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;Next&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/form&gt;\r\n    &lt;/#if&gt;\r\n&lt;/@layout.registrationLayout&gt;\r\n```","title":"Transfer data between ftl forms keycloak","body":"<p>I've got custom auth flow with my auth provider. This provider also has its own custom form. After Username password login, i create my first form where user has to enter secret code(it's constant due to tests). After successful enter, i want to draw another form with just login, secret code and a button &quot;Next&quot;, which will finish auth process.</p>\n<p>The problem is, i don't know how to pass my secret code to the new form, and, more importantly, i don't know how to get it in my custom form.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class SecretCodeAuth implements Authenticator {\n\n    private static final Logger log = LoggerFactory.getLogger(SecretCodeAuth.class);\n    @Override\n    public void authenticate(AuthenticationFlowContext context) {\n        Response challenge = context.form().createForm(&quot;seccode.ftl&quot;);\n        context.challenge(challenge);\n    }\n\n    @Override\n    public void action(AuthenticationFlowContext context) {\n        String secretCode = context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;seccode&quot;);\n        String expectedCode = &quot;555&quot;;\n\n        if(secretCode==null||!secretCode.equals(expectedCode)){\n            Response response = context.form()\n                            .setError(&quot;badCode&quot;)\n                                    .createForm(&quot;seccode.ftl&quot;);\n            context.failureChallenge(AuthenticationFlowError.INVALID_CREDENTIALS, response);\n            return;\n        }\n\n        context.getAuthenticationSession().setUserSessionNote(&quot;seccode&quot;, secretCode);\n        Response challenge = context\n                .form()\n                .createForm(&quot;gonext.ftl&quot;);\n        context.challenge(challenge);\n\n        if(&quot;true&quot;.equals(context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;confirmation&quot;)))\n            context.success();\n    }\n}\n</code></pre>\n<p>And this is the second form code.</p>\n<pre><code>&lt;#import &quot;template.ftl&quot; as layout&gt;\n&lt;@layout.registrationLayout displayMessage=false; section&gt;\n    &lt;#if section = &quot;title&quot;&gt;\n        ${msg(&quot;loginTitle&quot;,realm.name)}\n    &lt;#elseif section = &quot;header&quot;&gt;\n        Enter your secret code\n    &lt;#elseif section = &quot;form&quot;&gt;\n        &lt;form id=&quot;kc-totp-login-form&quot; class=&quot;${properties.kcFormClass!}&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;Your secret code is:&lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${user}&lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;${properties.kcInputWrapperClass!}&quot;&gt;\n                    &lt;input id=&quot;totp&quot; name=&quot;confirmation&quot; type=&quot;hidden&quot; class=&quot;${properties.kcInputClass!}&quot; value=&quot;true&quot; /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                &lt;div id=&quot;kc-form-options&quot; class=&quot;${properties.kcFormOptionsClass!}&quot;&gt;\n                    &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormButtonsClass!}&quot;&gt;\n                    &lt;div class=&quot;${properties.kcFormButtonsWrapperClass!}&quot;&gt;\n                        &lt;input class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;Next&quot; /&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/#if&gt;\n&lt;/@layout.registrationLayout&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito","powermock"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694526238,"post_id":77089479,"comment_id":135900423,"body_markdown":"That doesn&#39;t sound like a type you _should_ mock.  Make a real one and validate its values.","body":"That doesn&#39;t sound like a type you <i>should</i> mock.  Make a real one and validate its values."}],"answers":[{"tags":[],"owner":{"account_id":11706383,"reputation":119,"user_id":8569812,"display_name":"Gustavo Rey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526499,"creation_date":1694526499,"answer_id":77089751,"question_id":77089479,"body_markdown":"I figured out how to solve this issue using PowerMockito following the code below:\r\n\r\n```\r\nimport org.powermock.api.mockito.PowerMockito;\r\nimport org.powermock.core.classloader.annotations.PrepareForTest;\r\nimport org.powermock.modules.junit4.PowerMockRunner;\r\n\r\n@RunWith(PowerMockRunner.class)\r\n@PrepareForTest({TargetDeliveryRequestBuilder.class, TargetDeliveryRequest.class})\r\npublic class MyTest {\r\n\r\n    private TargetDeliveryRequestBuilder targetDeliveryRequestBuilder;\r\n    \r\n    @Before\r\n    public void setUp() {\r\n       targetDeliveryRequestBuilder = PowerMockito.mock(TargetDeliveryRequestBuilder.class);\r\n    }\r\n\r\n    @Test\r\n    public void test() {\r\n        PowerMockito.mockStatic(TargetDeliveryRequest.class);\r\n        PowerMockito.when(TargetDeliveryRequest.builder()).thenReturn(targetDeliveryRequestBuilder);\r\n    }\r\n\r\n}\r\n```","title":"Mockito is not mocking a final class method","body":"<p>I figured out how to solve this issue using PowerMockito following the code below:</p>\n<pre><code>import org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({TargetDeliveryRequestBuilder.class, TargetDeliveryRequest.class})\npublic class MyTest {\n\n    private TargetDeliveryRequestBuilder targetDeliveryRequestBuilder;\n    \n    @Before\n    public void setUp() {\n       targetDeliveryRequestBuilder = PowerMockito.mock(TargetDeliveryRequestBuilder.class);\n    }\n\n    @Test\n    public void test() {\n        PowerMockito.mockStatic(TargetDeliveryRequest.class);\n        PowerMockito.when(TargetDeliveryRequest.builder()).thenReturn(targetDeliveryRequestBuilder);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":11706383,"reputation":119,"user_id":8569812,"display_name":"Gustavo Rey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694526499,"creation_date":1694524470,"question_id":77089479,"body_markdown":"I have this code in my service and I&#39;m trying to mock this execute(), context() and build():\r\n\r\n\r\n```\r\nAttributes attributes = targetClient.getAttributes(\r\n                    TargetDeliveryRequest.builder()\r\n                            .execute(new ExecuteRequest().mboxes(Collections.singletonList(mboxRequest)))\r\n                            .context(new Context().channel(ChannelType.WEB)).build());\r\n```\r\n\r\nThis TargetDeliveryRequest third-party library, so I can&#39;t change anything there...\r\n```\r\npublic class TargetDeliveryRequest {\r\n    ....\r\n    public static TargetDeliveryRequestBuilder builder() {\r\n        return new TargetDeliveryRequestBuilder();\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;m trying to mock this execute(), context() and build():\r\n\r\n```\r\nTargetDeliveryRequestBuilder targetDeliveryRequestBuilder = mock(TargetDeliveryRequestBuilder.class);\r\n```\r\n\r\n**However, this TargetDeliveryRequestBuilder is a final class, because of this I&#39;m getting this error in the test execution:**\r\n\r\n\r\n&gt; org.mockito.exceptions.base.MockitoException: \r\nCannot mock/spy class com.adobe.target.edge.client.model.TargetDeliveryRequestBuilder\r\nMockito cannot mock/spy because : - final class\r\n\r\n```\r\npublic final class TargetDeliveryRequestBuilder {\r\n    ...\r\n    TargetDeliveryRequestBuilder() {\r\n    }\r\n    ...\r\n    public TargetDeliveryRequestBuilder context(Context context) {\r\n        this.request.context(context);\r\n        return this;\r\n    }\r\n\r\n    public TargetDeliveryRequestBuilder execute(ExecuteRequest execute) {\r\n        this.request.execute(execute);\r\n        return this;\r\n    }\r\n    ...\r\n    public TargetDeliveryRequest build() {\r\n        this.setTargetValues();\r\n        this.setVisitorValues();\r\n        this.createVisitorId();\r\n        this.setExperienceCloudValues();\r\n        TargetDeliveryRequest targetDeliveryRequest = TargetDeliveryRequest.fromRequest(this.request);\r\n        targetDeliveryRequest.setLocationHint(this.locationHint);\r\n        targetDeliveryRequest.setSessionId(this.sessionId);\r\n        targetDeliveryRequest.setVisitor(this.visitor);\r\n        targetDeliveryRequest.setDecisioningMethod(this.decisioningMethod);\r\n        return targetDeliveryRequest;\r\n    }\r\n    ...\r\n}\r\n```\r\n\r\nThe only way I discovered in the other questions here on Stackover was to add mockito-inline (&#39;org.mockito:mockito-inline:3.12.4&#39;), this makes my test work well, however, as my project is old, the moment I add mockito-inline, it breaks a lot of other tests. In other words, this is not an option for me.\r\n\r\nSimiliar issues:\r\nhttps://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\r\nhttps://stackoverflow.com/questions/68840524/mockito-cannot-mock-spy-because-final-class\r\n\r\nDoes someone know how to mock this code? Thank you.\r\n\r\nVersions:\r\nJava: 8\r\nmockito-core: 3.12.4\r\npowermock-module-junit: 2.0.9\r\npowermock-api-mockito2: 2.0.9\r\n\r\n","title":"Mockito is not mocking a final class method","body":"<p>I have this code in my service and I'm trying to mock this execute(), context() and build():</p>\n<pre><code>Attributes attributes = targetClient.getAttributes(\n                    TargetDeliveryRequest.builder()\n                            .execute(new ExecuteRequest().mboxes(Collections.singletonList(mboxRequest)))\n                            .context(new Context().channel(ChannelType.WEB)).build());\n</code></pre>\n<p>This TargetDeliveryRequest third-party library, so I can't change anything there...</p>\n<pre><code>public class TargetDeliveryRequest {\n    ....\n    public static TargetDeliveryRequestBuilder builder() {\n        return new TargetDeliveryRequestBuilder();\n    }\n\n}\n</code></pre>\n<p>I'm trying to mock this execute(), context() and build():</p>\n<pre><code>TargetDeliveryRequestBuilder targetDeliveryRequestBuilder = mock(TargetDeliveryRequestBuilder.class);\n</code></pre>\n<p><strong>However, this TargetDeliveryRequestBuilder is a final class, because of this I'm getting this error in the test execution:</strong></p>\n<blockquote>\n<p>org.mockito.exceptions.base.MockitoException:\nCannot mock/spy class com.adobe.target.edge.client.model.TargetDeliveryRequestBuilder\nMockito cannot mock/spy because : - final class</p>\n</blockquote>\n<pre><code>public final class TargetDeliveryRequestBuilder {\n    ...\n    TargetDeliveryRequestBuilder() {\n    }\n    ...\n    public TargetDeliveryRequestBuilder context(Context context) {\n        this.request.context(context);\n        return this;\n    }\n\n    public TargetDeliveryRequestBuilder execute(ExecuteRequest execute) {\n        this.request.execute(execute);\n        return this;\n    }\n    ...\n    public TargetDeliveryRequest build() {\n        this.setTargetValues();\n        this.setVisitorValues();\n        this.createVisitorId();\n        this.setExperienceCloudValues();\n        TargetDeliveryRequest targetDeliveryRequest = TargetDeliveryRequest.fromRequest(this.request);\n        targetDeliveryRequest.setLocationHint(this.locationHint);\n        targetDeliveryRequest.setSessionId(this.sessionId);\n        targetDeliveryRequest.setVisitor(this.visitor);\n        targetDeliveryRequest.setDecisioningMethod(this.decisioningMethod);\n        return targetDeliveryRequest;\n    }\n    ...\n}\n</code></pre>\n<p>The only way I discovered in the other questions here on Stackover was to add mockito-inline ('org.mockito:mockito-inline:3.12.4'), this makes my test work well, however, as my project is old, the moment I add mockito-inline, it breaks a lot of other tests. In other words, this is not an option for me.</p>\n<p>Similiar issues:\n<a href=\"https://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\">How to mock a final class with mockito</a>\n<a href=\"https://stackoverflow.com/questions/68840524/mockito-cannot-mock-spy-because-final-class\">Mockito cannot mock/spy because : - final class</a></p>\n<p>Does someone know how to mock this code? Thank you.</p>\n<p>Versions:\nJava: 8\nmockito-core: 3.12.4\npowermock-module-junit: 2.0.9\npowermock-api-mockito2: 2.0.9</p>\n"},{"tags":["java","spring-boot","logback","slf4j"],"comments":[{"owner":{"account_id":8513835,"reputation":143,"user_id":6383037,"display_name":"Maximilian Wiedemann"},"score":2,"creation_date":1667914123,"post_id":74286717,"comment_id":131277343,"body_markdown":"Are you using Wiremock 2.34.0 by any chance? Then upgrade to 2.35.0. We had the same issue and updated to 2.34.0 just a day before 2.35.0 was released. Reason: wiremock-jre8-standalone:2.34.0 includes version 2.x of slf4j-api in their jar, so it doesn&#39;t show up in any dependency tree. See https://github.com/wiremock/wiremock/issues/1964","body":"Are you using Wiremock 2.34.0 by any chance? Then upgrade to 2.35.0. We had the same issue and updated to 2.34.0 just a day before 2.35.0 was released. Reason: wiremock-jre8-standalone:2.34.0 includes version 2.x of slf4j-api in their jar, so it doesn&#39;t show up in any dependency tree. See <a href=\"https://github.com/wiremock/wiremock/issues/1964\" rel=\"nofollow noreferrer\">github.com/wiremock/wiremock/issues/1964</a>"},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1668165779,"post_id":74286717,"comment_id":131345050,"body_markdown":"You are a life saver! Can you please add this as an answer so I can upvote it please?","body":"You are a life saver! Can you please add this as an answer so I can upvote it please?"}],"answers":[{"tags":[],"owner":{"account_id":11270646,"reputation":405,"user_id":8266206,"display_name":"Charden Daxicen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526323,"creation_date":1694526323,"answer_id":77089731,"question_id":74286717,"body_markdown":"If you are using gradle, add this dependency\r\n\r\n    implementation &#39;org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0&#39;\r\n\r\n","title":"SLF4J no providers were found when running integration-tests","body":"<p>If you are using gradle, add this dependency</p>\n<pre><code>implementation 'org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0'\n</code></pre>\n"}],"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694526323,"creation_date":1667380033,"question_id":74286717,"body_markdown":"I have project using Spring boot and having three distinct sourceSets (main, test and integration test). The integration-test source set is defined that way in the respective Gradle file:\r\n\r\n```\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDir &quot;$buildDir/generated/server/src/main/java&quot;\r\n        }\r\n    }\r\n    integrationTest {\r\n        java {\r\n            compileClasspath += main.output + test.output\r\n            runtimeClasspath += main.output + test.output\r\n            srcDir &#39;src/integration-test/java&#39;\r\n        }\r\n        resources.srcDir &#39;src/integration-test/resources&#39;\r\n    }\r\n}\r\n```\r\n\r\nThe problem that I am facing is that when I run the integration-tests suite, the application starts but nothing gets logged. In fact I am getting the following warning:\r\n\r\n```\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\r\nSLF4J: Ignoring binding found at [jar:file:/Users/akourtesas/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\r\n```\r\n\r\nI have tried debugging this but I have no idea what&#39;s happening. I have printed the classpaths for both the `main` and `integrationTest` source sets and I can for sure say that the SLF4J version is 1.7.36 and my Logback version is 1.2.11. I have no custom configuration or anyting weird in place so it seems all the more weird that this works fine in all cases except the integration tests. For reference my Spring Boot version is 2.7.5.\r\n\r\nHas anyone encountered this in the past? If yes what needs to be done in order to resolve this? ","title":"SLF4J no providers were found when running integration-tests","body":"<p>I have project using Spring boot and having three distinct sourceSets (main, test and integration test). The integration-test source set is defined that way in the respective Gradle file:</p>\n<pre><code>sourceSets {\n    main {\n        java {\n            srcDir &quot;$buildDir/generated/server/src/main/java&quot;\n        }\n    }\n    integrationTest {\n        java {\n            compileClasspath += main.output + test.output\n            runtimeClasspath += main.output + test.output\n            srcDir 'src/integration-test/java'\n        }\n        resources.srcDir 'src/integration-test/resources'\n    }\n}\n</code></pre>\n<p>The problem that I am facing is that when I run the integration-tests suite, the application starts but nothing gets logged. In fact I am getting the following warning:</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\nSLF4J: Ignoring binding found at [jar:file:/Users/akourtesas/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\n</code></pre>\n<p>I have tried debugging this but I have no idea what's happening. I have printed the classpaths for both the <code>main</code> and <code>integrationTest</code> source sets and I can for sure say that the SLF4J version is 1.7.36 and my Logback version is 1.2.11. I have no custom configuration or anyting weird in place so it seems all the more weird that this works fine in all cases except the integration tests. For reference my Spring Boot version is 2.7.5.</p>\n<p>Has anyone encountered this in the past? If yes what needs to be done in order to resolve this?</p>\n"},{"tags":["java","gradle","build","integration-testing","source-sets"],"answers":[{"tags":[],"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1610597822,"creation_date":1342794647,"answer_id":11581420,"question_id":11581419,"body_markdown":"**Update for 2021:** \r\n\r\nA lot has changed in 8ish years. Gradle continues to be a great tool. Now there&#39;s a whole section in the docs dedicated to configuring Integration Tests. I recommend you [read the docs](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests) now.\r\n\r\n**Original Answer:**\r\n\r\nThis took me a while to figure out and the online resources weren&#39;t great. So I wanted to document my solution.\r\n\r\nThis is a simple gradle build script that has an intTest source set in addition to the main and test source sets:\r\n\r\n    apply plugin: &quot;java&quot;\r\n\r\n    sourceSets {\r\n        // Note that just declaring this sourceset creates two configurations.\r\n\t    intTest {\r\n\t\t    java {\r\n\t    \t\tcompileClasspath += main.output\r\n                runtimeClasspath += main.output\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\n    configurations {\r\n\t    intTestCompile.extendsFrom testCompile\r\n\t    intTestRuntime.extendsFrom testRuntime\r\n    }\r\n\r\n    task intTest(type:Test){\r\n    \tdescription = &quot;Run integration tests (located in src/intTest/...).&quot;\r\n    \ttestClassesDir = project.sourceSets.intTest.output.classesDir\r\n    \tclasspath = project.sourceSets.intTest.runtimeClasspath\r\n    }","title":"How do I add a new sourceset to Gradle?","body":"<p><strong>Update for 2021:</strong></p>\n<p>A lot has changed in 8ish years. Gradle continues to be a great tool. Now there's a whole section in the docs dedicated to configuring Integration Tests. I recommend you <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">read the docs</a> now.</p>\n<p><strong>Original Answer:</strong></p>\n<p>This took me a while to figure out and the online resources weren't great. So I wanted to document my solution.</p>\n<p>This is a simple gradle build script that has an intTest source set in addition to the main and test source sets:</p>\n<pre><code>apply plugin: &quot;java&quot;\n\nsourceSets {\n    // Note that just declaring this sourceset creates two configurations.\n    intTest {\n        java {\n            compileClasspath += main.output\n            runtimeClasspath += main.output\n        }\n    }\n}\n\nconfigurations {\n    intTestCompile.extendsFrom testCompile\n    intTestRuntime.extendsFrom testRuntime\n}\n\ntask intTest(type:Test){\n    description = &quot;Run integration tests (located in src/intTest/...).&quot;\n    testClassesDir = project.sourceSets.intTest.output.classesDir\n    classpath = project.sourceSets.intTest.runtimeClasspath\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1369845283,"creation_date":1369845283,"answer_id":16819429,"question_id":11581419,"body_markdown":"Here is how I achieved this without using `configurations{ }`.\r\n\r\n\r\n    apply plugin: &#39;java&#39;\r\n\r\n    sourceCompatibility = JavaVersion.VERSION_1_6\r\n\r\n    sourceSets {\r\n        integrationTest {\r\n            java {\r\n                srcDir &#39;src/integrationtest/java&#39;\r\n            }\r\n            resources {\r\n                srcDir &#39;src/integrationtest/resources&#39;\r\n            }\r\n            compileClasspath += sourceSets.main.runtimeClasspath\r\n        }\r\n    }\r\n\r\n    task integrationTest(type: Test) {\r\n        description = &quot;Runs Integration Tests&quot;\r\n        testClassesDir = sourceSets.integrationTest.output.classesDir\r\n        classpath += sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n\r\n***Tested using:** Gradle 1.4 and Gradle 1.6*","title":"How do I add a new sourceset to Gradle?","body":"<p>Here is how I achieved this without using <code>configurations{ }</code>.</p>\n\n<pre><code>apply plugin: 'java'\n\nsourceCompatibility = JavaVersion.VERSION_1_6\n\nsourceSets {\n    integrationTest {\n        java {\n            srcDir 'src/integrationtest/java'\n        }\n        resources {\n            srcDir 'src/integrationtest/resources'\n        }\n        compileClasspath += sourceSets.main.runtimeClasspath\n    }\n}\n\ntask integrationTest(type: Test) {\n    description = \"Runs Integration Tests\"\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath += sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre>\n\n<p><em><strong>Tested using:</strong> Gradle 1.4 and Gradle 1.6</em></p>\n"},{"tags":[],"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno.de"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1551165838,"creation_date":1466167793,"answer_id":37882006,"question_id":11581419,"body_markdown":"&gt; This was **once written for Gradle 2.x / 3.x in 2016 and is far outdated**!!\r\n&gt; Please have a look [at the documented solutions in Gradle 4 and up](/a/54695537/529977)\r\n\r\n----\r\n\r\nTo sum up both old answers (get best and minimum viable of both worlds):\r\n\r\nsome warm words first:\r\n\r\n&lt;!-- language-all: lang-groovy --&gt;\r\n\r\n1. first, we need to define the `sourceSet`:\r\n\r\n        sourceSets {\r\n            integrationTest\r\n        }\r\n\r\n\r\n2. next we expand the `sourceSet` from `test`, therefor we use the `test.runtimeClasspath` (which includes all dependenciess from `test` AND `test` itself) as classpath for the derived `sourceSet`:\r\n\r\n        sourceSets {\r\n            integrationTest {\r\n                compileClasspath += sourceSets.test.runtimeClasspath\r\n                runtimeClasspath += sourceSets.test.runtimeClasspath // ***)\r\n            }\r\n        }\r\n\r\n* **note**) somehow this redeclaration / extend for `sourceSets.integrationTest.runtimeClasspath` is needed, but should be irrelevant since `runtimeClasspath` always expands `output + runtimeSourceSet`, don&#39;t get it\r\n\r\n3. we define a dedicated task for just running integration tests:\r\n\r\n        task integrationTest(type: Test) {\r\n        }\r\n\r\n4. Configure the `integrationTest` test classes and classpaths use. The defaults from the `java` plugin use the `test` `sourceSet`\r\n\r\n        task integrationTest(type: Test) {\r\n            testClassesDir = sourceSets.integrationTest.output.classesDir\r\n            classpath = sourceSets.integrationTest.runtimeClasspath\r\n        }\r\n\r\n5. *(optional)* auto run after *test* &lt;pre&gt;\r\nintegrationTest.dependsOn test\r\n&lt;/pre&gt;\r\n\r\n6. *(optional)* add dependency from `check` (so it always runs when `build` or `check` are executed)\r\n\r\n        tasks.check.dependsOn(tasks.integrationTest)\r\n\r\n7. *(optional)* add java,resources to the `sourceSet` to support auto-detection and create these &quot;partials&quot; in your IDE. i.e. IntelliJ IDEA will auto create `sourceSet` directories java and resources for each set if it doesn&#39;t exist:\r\n\r\n        sourceSets {\r\n             integrationTest {\r\n                 java\r\n                 resources\r\n             }\r\n        }\r\n\r\n***tl;dr***\r\n\r\n\r\n    apply plugin: &#39;java&#39;\r\n    \r\n    // apply the runtimeClasspath from &quot;test&quot; sourceSet to the new one\r\n    // to include any needed assets: test, main, test-dependencies and main-dependencies\r\n    sourceSets {\r\n        integrationTest {\r\n            // not necessary but nice for IDEa&#39;s\r\n            java\r\n            resources\r\n\r\n            compileClasspath += sourceSets.test.runtimeClasspath\r\n            // somehow this redeclaration is needed, but should be irrelevant\r\n            // since runtimeClasspath always expands compileClasspath\r\n            runtimeClasspath += sourceSets.test.runtimeClasspath\r\n        }\r\n    }\r\n\r\n    // define custom test task for running integration tests\r\n    task integrationTest(type: Test) {\r\n        testClassesDir = sourceSets.integrationTest.output.classesDir\r\n        classpath = sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n    tasks.integrationTest.dependsOn(tasks.test)\r\n\r\n\r\nreferring to:\r\n\r\n* [gradle java chapter 45.7.1. Source set properties](https://docs.gradle.org/current/userguide/java_plugin.html#N1569A)\r\n* [gradle java chapter 45.7.3. Some source set examples](https://docs.gradle.org/current/userguide/java_plugin.html#N1582C)\r\n\r\nUnfortunatly, the example code on [github.com/gradle/gradle/subprojects/docs/src/samples/java/customizedLayout/build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/customizedLayout/build.gradle) or [/gradle//withIntegrationTests/build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/withIntegrationTests/build.gradle) seems not to handle this or has a different / more complex / for me no clearer solution anyway! ","title":"How do I add a new sourceset to Gradle?","body":"<blockquote>\n  <p>This was <strong>once written for Gradle 2.x / 3.x in 2016 and is far outdated</strong>!!\n  Please have a look <a href=\"/a/54695537/529977\">at the documented solutions in Gradle 4 and up</a></p>\n</blockquote>\n\n<hr>\n\n<p>To sum up both old answers (get best and minimum viable of both worlds):</p>\n\n<p>some warm words first:</p>\n\n\n\n<ol>\n<li><p>first, we need to define the <code>sourceSet</code>:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n    integrationTest\n}\n</code></pre></li>\n<li><p>next we expand the <code>sourceSet</code> from <code>test</code>, therefor we use the <code>test.runtimeClasspath</code> (which includes all dependenciess from <code>test</code> AND <code>test</code> itself) as classpath for the derived <code>sourceSet</code>:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n    integrationTest {\n        compileClasspath += sourceSets.test.runtimeClasspath\n        runtimeClasspath += sourceSets.test.runtimeClasspath // ***)\n    }\n}\n</code></pre>\n\n<ul>\n<li><strong>note</strong>) somehow this redeclaration / extend for <code>sourceSets.integrationTest.runtimeClasspath</code> is needed, but should be irrelevant since <code>runtimeClasspath</code> always expands <code>output + runtimeSourceSet</code>, don't get it</li>\n</ul></li>\n<li><p>we define a dedicated task for just running integration tests:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>task integrationTest(type: Test) {\n}\n</code></pre></li>\n<li><p>Configure the <code>integrationTest</code> test classes and classpaths use. The defaults from the <code>java</code> plugin use the <code>test</code> <code>sourceSet</code></p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>task integrationTest(type: Test) {\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath = sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre></li>\n<li><p><em>(optional)</em> auto run after <em>test</em> <pre>\nintegrationTest.dependsOn test\n</pre></p></li>\n<li><p><em>(optional)</em> add dependency from <code>check</code> (so it always runs when <code>build</code> or <code>check</code> are executed)</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.check.dependsOn(tasks.integrationTest)\n</code></pre></li>\n<li><p><em>(optional)</em> add java,resources to the <code>sourceSet</code> to support auto-detection and create these \"partials\" in your IDE. i.e. IntelliJ IDEA will auto create <code>sourceSet</code> directories java and resources for each set if it doesn't exist:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n     integrationTest {\n         java\n         resources\n     }\n}\n</code></pre></li>\n</ol>\n\n<p><strong><em>tl;dr</em></strong></p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'java'\n\n// apply the runtimeClasspath from \"test\" sourceSet to the new one\n// to include any needed assets: test, main, test-dependencies and main-dependencies\nsourceSets {\n    integrationTest {\n        // not necessary but nice for IDEa's\n        java\n        resources\n\n        compileClasspath += sourceSets.test.runtimeClasspath\n        // somehow this redeclaration is needed, but should be irrelevant\n        // since runtimeClasspath always expands compileClasspath\n        runtimeClasspath += sourceSets.test.runtimeClasspath\n    }\n}\n\n// define custom test task for running integration tests\ntask integrationTest(type: Test) {\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath = sourceSets.integrationTest.runtimeClasspath\n}\ntasks.integrationTest.dependsOn(tasks.test)\n</code></pre>\n\n<p>referring to:</p>\n\n<ul>\n<li><a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#N1569A\" rel=\"noreferrer\">gradle java chapter 45.7.1. Source set properties</a></li>\n<li><a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#N1582C\" rel=\"noreferrer\">gradle java chapter 45.7.3. Some source set examples</a></li>\n</ul>\n\n<p>Unfortunatly, the example code on <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/customizedLayout/build.gradle\" rel=\"noreferrer\">github.com/gradle/gradle/subprojects/docs/src/samples/java/customizedLayout/build.gradle</a> or <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/withIntegrationTests/build.gradle\" rel=\"noreferrer\">/gradle//withIntegrationTests/build.gradle</a> seems not to handle this or has a different / more complex / for me no clearer solution anyway! </p>\n"},{"tags":[],"owner":{"account_id":240022,"reputation":27037,"user_id":510017,"accept_rate":88,"display_name":"Jonathan Schneider"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1470950271,"creation_date":1470765826,"answer_id":38857580,"question_id":11581419,"body_markdown":"The [nebula-facet][1] plugin eliminates the boilerplate:\r\n\r\n    apply plugin: &#39;nebula.facet&#39;\r\n    facets {\r\n        integrationTest {\r\n            parentSourceSet = &#39;test&#39;\r\n        }\r\n    }\r\n\r\nFor integration tests specifically, even [this is done for you][2], just apply:\r\n\r\n    apply plugin: &#39;nebula.integtest&#39;\r\n\r\nThe Gradle plugin portal links for each are:\r\n\r\n1. [nebula.facet][3]\r\n2. [nebula.integtest][4]\r\n\r\n\r\n  [1]: https://github.com/nebula-plugins/nebula-project-plugin#nebula-facet-plugin\r\n  [2]: https://github.com/nebula-plugins/nebula-project-plugin#nebula-integtest-plugin\r\n  [3]: https://plugins.gradle.org/plugin/nebula.facet\r\n  [4]: https://plugins.gradle.org/plugin/nebula.integtest","title":"How do I add a new sourceset to Gradle?","body":"<p>The <a href=\"https://github.com/nebula-plugins/nebula-project-plugin#nebula-facet-plugin\" rel=\"noreferrer\">nebula-facet</a> plugin eliminates the boilerplate:</p>\n\n<pre><code>apply plugin: 'nebula.facet'\nfacets {\n    integrationTest {\n        parentSourceSet = 'test'\n    }\n}\n</code></pre>\n\n<p>For integration tests specifically, even <a href=\"https://github.com/nebula-plugins/nebula-project-plugin#nebula-integtest-plugin\" rel=\"noreferrer\">this is done for you</a>, just apply:</p>\n\n<pre><code>apply plugin: 'nebula.integtest'\n</code></pre>\n\n<p>The Gradle plugin portal links for each are:</p>\n\n<ol>\n<li><a href=\"https://plugins.gradle.org/plugin/nebula.facet\" rel=\"noreferrer\">nebula.facet</a></li>\n<li><a href=\"https://plugins.gradle.org/plugin/nebula.integtest\" rel=\"noreferrer\">nebula.integtest</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":217857,"reputation":294,"user_id":1429373,"display_name":"Ryan Sobol"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501688971,"creation_date":1501687894,"answer_id":45465101,"question_id":11581419,"body_markdown":"Here&#39;s what works for me as of Gradle 4.0.\r\n\r\n    sourceSets {\r\n      integrationTest {\r\n        compileClasspath += sourceSets.test.compileClasspath\r\n        runtimeClasspath += sourceSets.test.runtimeClasspath\r\n      }\r\n    }\r\n    \r\n    task integrationTest(type: Test) {\r\n      description = &quot;Runs the integration tests.&quot;\r\n      group = &#39;verification&#39;\r\n      testClassesDirs = sourceSets.integrationTest.output.classesDirs\r\n      classpath = sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n\r\nAs of version 4.0, Gradle now uses separate classes directories for each language in a source set. So if your build script uses `sourceSets.integrationTest.output.classesDir`, you&#39;ll see the following deprecation warning.\r\n\r\n&gt; Gradle now uses separate output directories for each JVM language, but this build assumes a single directory for all classes from a source set. This behaviour has been deprecated and is scheduled to be removed in Gradle 5.0\r\n\r\n\r\nTo get rid of this warning, just switch to `sourceSets.integrationTest.output.classesDirs` instead. For more information, see the [Gradle 4.0 release notes][1].\r\n\r\n\r\n  [1]: https://docs.gradle.org/4.0/release-notes.html#detecting-test-classes-for-custom-test-tasks","title":"How do I add a new sourceset to Gradle?","body":"<p>Here's what works for me as of Gradle 4.0.</p>\n\n<pre><code>sourceSets {\n  integrationTest {\n    compileClasspath += sourceSets.test.compileClasspath\n    runtimeClasspath += sourceSets.test.runtimeClasspath\n  }\n}\n\ntask integrationTest(type: Test) {\n  description = \"Runs the integration tests.\"\n  group = 'verification'\n  testClassesDirs = sourceSets.integrationTest.output.classesDirs\n  classpath = sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre>\n\n<p>As of version 4.0, Gradle now uses separate classes directories for each language in a source set. So if your build script uses <code>sourceSets.integrationTest.output.classesDir</code>, you'll see the following deprecation warning.</p>\n\n<blockquote>\n  <p>Gradle now uses separate output directories for each JVM language, but this build assumes a single directory for all classes from a source set. This behaviour has been deprecated and is scheduled to be removed in Gradle 5.0</p>\n</blockquote>\n\n<p>To get rid of this warning, just switch to <code>sourceSets.integrationTest.output.classesDirs</code> instead. For more information, see the <a href=\"https://docs.gradle.org/4.0/release-notes.html#detecting-test-classes-for-custom-test-tasks\" rel=\"nofollow noreferrer\">Gradle 4.0 release notes</a>.</p>\n"},{"tags":[],"owner":{"account_id":85254,"reputation":1589,"user_id":237814,"accept_rate":89,"display_name":"jenglert"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1551165454,"creation_date":1550163739,"answer_id":54695537,"question_id":11581419,"body_markdown":"If you&#39;re using \r\n\r\n* Gradle 5.x, have a look at [Documentation Section &quot;Testing Java &gt; Configuring integration tests][1]\r\nExample 14 and 15 for details (both for Groovy and Kotlin DSL, either which one you prefer)&lt;br/&gt;\r\n * alt: &quot;current&quot; Gradle doc link at [2], but might defer in future, you should have a look at if examples changes)\r\n* for Gradle 4 have a look at ancient version [3] which is close near to what [@Spina posted in 2012][4]\r\n\r\nTo get IntelliJ to recognize custom sourceset as test sources root:\r\n\r\n    plugin {\r\n        idea\r\n    }\r\n    \r\n    idea {\r\n        module {\r\n            testSourceDirs = testSourceDirs + sourceSets[&quot;intTest&quot;].allJava.srcDirs\r\n            testResourceDirs = testResourceDirs + sourceSets[&quot;intTest&quot;].resources.srcDirs\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.gradle.org/5.2.1/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [2]: https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [3]: https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [4]: /questions/11581419/11581420#11581420","title":"How do I add a new sourceset to Gradle?","body":"<p>If you're using </p>\n\n<ul>\n<li>Gradle 5.x, have a look at <a href=\"https://docs.gradle.org/5.2.1/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">Documentation Section \"Testing Java > Configuring integration tests</a>\nExample 14 and 15 for details (both for Groovy and Kotlin DSL, either which one you prefer)<br/>\n\n<ul>\n<li>alt: \"current\" Gradle doc link at <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">2</a>, but might defer in future, you should have a look at if examples changes)</li>\n</ul></li>\n<li>for Gradle 4 have a look at ancient version <a href=\"https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">3</a> which is close near to what <a href=\"/questions/11581419/11581420#11581420\">@Spina posted in 2012</a></li>\n</ul>\n\n<p>To get IntelliJ to recognize custom sourceset as test sources root:</p>\n\n<pre><code>plugin {\n    idea\n}\n\nidea {\n    module {\n        testSourceDirs = testSourceDirs + sourceSets[\"intTest\"].allJava.srcDirs\n        testResourceDirs = testResourceDirs + sourceSets[\"intTest\"].resources.srcDirs\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2194580,"reputation":71,"user_id":1940627,"display_name":"hoopyfrood"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1577119581,"creation_date":1577119581,"answer_id":59458709,"question_id":11581419,"body_markdown":"I&#39;m new to Gradle, using Gradle 6.0.1 JUnit 4.12. Here&#39;s what I came up with to solve this problem.\r\n\r\n    apply plugin: &#39;java&#39;\r\n    repositories { jcenter() }\r\n\r\n    dependencies {\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\n    sourceSets {\r\n      main {\r\n        java {\r\n           srcDirs = [&#39;src&#39;]\r\n        }\r\n      }\r\n      test {\r\n        java {\r\n          srcDirs = [&#39;tests&#39;]\r\n        }\r\n      }\r\n    }\r\n\r\nNotice that the main source and test source is referenced separately, one under `main` and one under `test`.\r\n\r\nThe `testImplementation` item under `dependencies` is only used for compiling the source in `test`. If your main code actually had a dependency on JUnit, then you would also specify `implementation` under `dependencies`.\r\n\r\nI had to specify the `repositories` section to get this to work, I doubt that is the best/only way.","title":"How do I add a new sourceset to Gradle?","body":"<p>I'm new to Gradle, using Gradle 6.0.1 JUnit 4.12. Here's what I came up with to solve this problem.</p>\n\n<pre><code>apply plugin: 'java'\nrepositories { jcenter() }\n\ndependencies {\n    testImplementation 'junit:junit:4.12'\n}\n\nsourceSets {\n  main {\n    java {\n       srcDirs = ['src']\n    }\n  }\n  test {\n    java {\n      srcDirs = ['tests']\n    }\n  }\n}\n</code></pre>\n\n<p>Notice that the main source and test source is referenced separately, one under <code>main</code> and one under <code>test</code>.</p>\n\n<p>The <code>testImplementation</code> item under <code>dependencies</code> is only used for compiling the source in <code>test</code>. If your main code actually had a dependency on JUnit, then you would also specify <code>implementation</code> under <code>dependencies</code>.</p>\n\n<p>I had to specify the <code>repositories</code> section to get this to work, I doubt that is the best/only way.</p>\n"},{"tags":[],"owner":{"account_id":44158,"reputation":1152,"user_id":129437,"accept_rate":57,"display_name":"Gus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609154371,"creation_date":1609154371,"answer_id":65476796,"question_id":11581419,"body_markdown":"I gather the documentation wasn&#39;t great back in 2012 when this question was asked, but for anyone reading this in 2020+: There&#39;s now a whole section in the docs about [how to add a source set for integration tests][1]. You really should read it instead of copy/pasting code snippets here and banging your head against the wall trying to figure out why an answer from 2012-2016 doesn&#39;t quite work.\r\n\r\nThe answer is most likely simple but more nuanced than you may think, and the exact code you&#39;ll need is likely to be different from the code I&#39;ll need. For example, do you want your integration tests to use the same dependencies as your unit tests?\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests","title":"How do I add a new sourceset to Gradle?","body":"<p>I gather the documentation wasn't great back in 2012 when this question was asked, but for anyone reading this in 2020+: There's now a whole section in the docs about <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">how to add a source set for integration tests</a>. You really should read it instead of copy/pasting code snippets here and banging your head against the wall trying to figure out why an answer from 2012-2016 doesn't quite work.</p>\n<p>The answer is most likely simple but more nuanced than you may think, and the exact code you'll need is likely to be different from the code I'll need. For example, do you want your integration tests to use the same dependencies as your unit tests?</p>\n"},{"tags":[],"owner":{"account_id":1118781,"reputation":1746,"user_id":1107537,"accept_rate":56,"display_name":"mdarwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670519334,"creation_date":1670519334,"answer_id":74733908,"question_id":11581419,"body_markdown":"You might also want to configure your tests to run with jUnit:\r\n\r\n    task integrationTest(type: Test) {\r\n       ...\r\n       useJunitPlatform()\r\n    }","title":"How do I add a new sourceset to Gradle?","body":"<p>You might also want to configure your tests to run with jUnit:</p>\n<pre><code>task integrationTest(type: Test) {\n   ...\n   useJunitPlatform()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526080,"creation_date":1694526080,"answer_id":77089693,"question_id":11581419,"body_markdown":"Here is the solution for Kotlin (build.gradle.**kts**):\r\n\r\n```kotlin\r\nsourceSets {\r\n    create(&quot;uiTest&quot;) {\r\n        // Adds files from the main source set to the compilation and runtime classpaths of this new source set\r\n        // sourceSets.main.output is a collection of all the directories containing compiled main classes and resources\r\n        compileClasspath += sourceSets.main.get().output\r\n        runtimeClasspath += sourceSets.main.get().output\r\n    }\r\n}\r\n\r\n// Makes the uiTestImplementation configuration extend from testImplementaion,\r\n// which means that all the declared dependencies of the test code (and transitively the main as well)\r\n// also become dependencies of this new source set\r\nval uiTestImplementation by configurations.getting {\r\n    extendsFrom(configurations.testImplementation.get())\r\n}\r\nval uiTestRuntimeOnly by configurations.getting {\r\n    extendsFrom(configurations.testRuntimeOnly.get())\r\n}\r\n\r\n```\r\n\r\nBonus:\r\n```kotlin\r\nval uiTest = task&lt;Test&gt;(&quot;uiTest&quot;) {\r\n    description = &quot;Runs UI tests.&quot;\r\n    group = &quot;verification&quot;\r\n\r\n    testClassesDirs = sourceSets[&quot;uiTest&quot;].output.classesDirs\r\n    classpath = sourceSets[&quot;uiTest&quot;].runtimeClasspath\r\n\r\n    testLogging {\r\n        events(TestLogEvent.PASSED)\r\n    }\r\n}\r\n\r\ntasks.check { dependsOn(uiTest) }\r\n```","title":"How do I add a new sourceset to Gradle?","body":"<p>Here is the solution for Kotlin (build.gradle.<strong>kts</strong>):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>sourceSets {\n    create(&quot;uiTest&quot;) {\n        // Adds files from the main source set to the compilation and runtime classpaths of this new source set\n        // sourceSets.main.output is a collection of all the directories containing compiled main classes and resources\n        compileClasspath += sourceSets.main.get().output\n        runtimeClasspath += sourceSets.main.get().output\n    }\n}\n\n// Makes the uiTestImplementation configuration extend from testImplementaion,\n// which means that all the declared dependencies of the test code (and transitively the main as well)\n// also become dependencies of this new source set\nval uiTestImplementation by configurations.getting {\n    extendsFrom(configurations.testImplementation.get())\n}\nval uiTestRuntimeOnly by configurations.getting {\n    extendsFrom(configurations.testRuntimeOnly.get())\n}\n\n</code></pre>\n<p>Bonus:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val uiTest = task&lt;Test&gt;(&quot;uiTest&quot;) {\n    description = &quot;Runs UI tests.&quot;\n    group = &quot;verification&quot;\n\n    testClassesDirs = sourceSets[&quot;uiTest&quot;].output.classesDirs\n    classpath = sourceSets[&quot;uiTest&quot;].runtimeClasspath\n\n    testLogging {\n        events(TestLogEvent.PASSED)\n    }\n}\n\ntasks.check { dependsOn(uiTest) }\n</code></pre>\n"}],"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144913,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":11581420,"answer_count":10,"score":120,"last_activity_date":1694526080,"creation_date":1342794647,"question_id":11581419,"body_markdown":"I want to add integration tests to my Gradle build (Version 1.0). They should run separately from my normal tests because they require a webapp to be deployed to localhost (they test that webapp). The tests should be able to use classes defined in my main source set. How do I make this happen?","title":"How do I add a new sourceset to Gradle?","body":"<p>I want to add integration tests to my Gradle build (Version 1.0). They should run separately from my normal tests because they require a webapp to be deployed to localhost (they test that webapp). The tests should be able to use classes defined in my main source set. How do I make this happen?</p>\n"},{"tags":["java","spring-boot","couchbase","spring-boot-testcontainers"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694526644,"post_id":77089667,"comment_id":135900544,"body_markdown":"i think the relevant topic for the problem is here [multiple buckets in Couchbase initialization](https://github.com/testcontainers/testcontainers-java/issues/1022), can you have a look there and retry ?","body":"i think the relevant topic for the problem is here <a href=\"https://github.com/testcontainers/testcontainers-java/issues/1022\" rel=\"nofollow noreferrer\">multiple buckets in Couchbase initialization</a>, can you have a look there and retry ?"},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694527287,"post_id":77089667,"comment_id":135900721,"body_markdown":"Thanks for sharing the relevant topic, I have created the couchbase container similar to what was mentioned in the topic, I have issues with executing the .n1ql files as we use them for creating the different collections we use, issue is with couchmove bean and I am not sure why its having issues there as the 2nd container is getting created properly.","body":"Thanks for sharing the relevant topic, I have created the couchbase container similar to what was mentioned in the topic, I have issues with executing the .n1ql files as we use them for creating the different collections we use, issue is with couchmove bean and I am not sure why its having issues there as the 2nd container is getting created properly."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694530398,"post_id":77089667,"comment_id":135901482,"body_markdown":"ok, if you will try to create it without `.n1ql` file, i mean just create the container without anythink.  it is going to work ?","body":"ok, if you will try to create it without <code>.n1ql</code> file, i mean just create the container without anythink.  it is going to work ?"},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694537462,"post_id":77089667,"comment_id":135903078,"body_markdown":"Yes, it works. I could see 2 buckets getting created in the test container. Just that my issue is related to it running .n1ql files as well with the 2 buckets","body":"Yes, it works. I could see 2 buckets getting created in the test container. Just that my issue is related to it running .n1ql files as well with the 2 buckets"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694545062,"post_id":77089667,"comment_id":135904470,"body_markdown":"Ok, I am sure if you will have just one bucket all will be executed as expected, just confirm it please with the same .n1ql file","body":"Ok, I am sure if you will have just one bucket all will be executed as expected, just confirm it please with the same .n1ql file"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694545884,"post_id":77089667,"comment_id":135904589,"body_markdown":"Because i think it is a bug at `Couchmove` if it work for one bucket of course if it is so  you should open a ticket on there GitHub repo.","body":"Because i think it is a bug at <code>Couchmove</code> if it work for one bucket of course if it is so  you should open a ticket on there GitHub repo."},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694582749,"post_id":77089667,"comment_id":135908434,"body_markdown":"Yes, for 1 bucket everything is working as expected, when I tried to add new bucket then I&#39;m getting the errors, there must be a way to do it but I couldn&#39;t find it yet. Will try few things today and If I couldn&#39;t figure it out then will raise a ticket. Thank you","body":"Yes, for 1 bucket everything is working as expected, when I tried to add new bucket then I&#39;m getting the errors, there must be a way to do it but I couldn&#39;t find it yet. Will try few things today and If I couldn&#39;t figure it out then will raise a ticket. Thank you"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694582997,"post_id":77089667,"comment_id":135908469,"body_markdown":"You are welcome, i also didn&#39;t know  about this case, maybe the guys who work on it can help you, just open a ticket and that is all","body":"You are welcome, i also didn&#39;t know  about this case, maybe the guys who work on it can help you, just open a ticket and that is all"}],"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694525933,"creation_date":1694525933,"question_id":77089667,"body_markdown":"We are trying to write integration tests for our usecase where we have 2 buckets in couchbase database and I am trying to create test container with those 2 buckets. I have something like \r\n\r\n```\r\nnew CouchbaseContainer(dockerImage)\r\n                    .withBucket(new BucketDefinition(getBucketName()))\r\n                    .withBucket(new BucketDefinition(getNewBucketName()))\r\n                    .withCredentials(&quot;admin&quot;, &quot;password123&quot;)\r\n                    .withServiceQuota(CouchbaseService.SEARCH, 1024)\r\n                    .withStartupTimeout(Duration.ofMinutes(15));\r\n            \r\n```\r\n\r\nHere I am using .**withBucket()** to create buckets, for single bucket it is working but when I try to create a new bucket it is throwing errors when executing .n1ql files which we are using for creating the base configuration to the first bucket.\r\n\r\nIt is throwing errors like\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;couchmove&#39; defined in class path resource [DatabaseConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.github.couchmove.Couchmove]: Factory method &#39;couchmove&#39; threw exception; nested exception is com.github.couchmove.exception.CouchmoveException: Unable to migrate\r\n\r\nIs using .**withBucket()** the right way to create 2nd bucket?\r\n","title":"Using 2 buckets inside test container for couchbase in spring boot application","body":"<p>We are trying to write integration tests for our usecase where we have 2 buckets in couchbase database and I am trying to create test container with those 2 buckets. I have something like</p>\n<pre><code>new CouchbaseContainer(dockerImage)\n                    .withBucket(new BucketDefinition(getBucketName()))\n                    .withBucket(new BucketDefinition(getNewBucketName()))\n                    .withCredentials(&quot;admin&quot;, &quot;password123&quot;)\n                    .withServiceQuota(CouchbaseService.SEARCH, 1024)\n                    .withStartupTimeout(Duration.ofMinutes(15));\n            \n</code></pre>\n<p>Here I am using .<strong>withBucket()</strong> to create buckets, for single bucket it is working but when I try to create a new bucket it is throwing errors when executing .n1ql files which we are using for creating the base configuration to the first bucket.</p>\n<p>It is throwing errors like</p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'couchmove' defined in class path resource [DatabaseConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.github.couchmove.Couchmove]: Factory method 'couchmove' threw exception; nested exception is com.github.couchmove.exception.CouchmoveException: Unable to migrate</p>\n<p>Is using .<strong>withBucket()</strong> the right way to create 2nd bucket?</p>\n"},{"tags":["java","image","frame","bufferedimage","javacv"],"comments":[{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":0,"creation_date":1694823340,"post_id":77089565,"comment_id":135946402,"body_markdown":"That just means you don&#39;t have an image in that frame. Try with the next frame.","body":"That just means you don&#39;t have an image in that frame. Try with the next frame."}],"owner":{"account_id":29423108,"reputation":1,"user_id":22544440,"display_name":"user22544440"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694525121,"creation_date":1694525121,"question_id":77089565,"body_markdown":"so I have a Frame from a video:\r\n```\r\nFFmpegFrameGrabber grabber = new FFmpegFrameGrabber(videoFilePath);\r\ngrabber.start();\r\n\r\ngrabber.setFrameNumber(frameNumber);\r\nFrame frame = grabber.grab();\r\n```\r\n\r\nand I want to convert it to a BufferedImage so currently I am using this:\r\n\r\n```\r\nJava2DFrameConverter c = new Java2DFrameConverter();\r\nBufferedImage image = c.convert(frame);\r\n```\r\n\r\nBut when I am trying to save the .png file like that\r\n\r\n```\r\nImageIO.write(image, &quot;png&quot;, outputFrameFile);\r\n```\r\n\r\nBut I am getting the error &quot;image == null&quot; idk why\r\n\r\n\r\n\r\nI tried to look for answers but nothing helped.","title":"Convert Frame to BufferedImage using JavaCV","body":"<p>so I have a Frame from a video:</p>\n<pre><code>FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(videoFilePath);\ngrabber.start();\n\ngrabber.setFrameNumber(frameNumber);\nFrame frame = grabber.grab();\n</code></pre>\n<p>and I want to convert it to a BufferedImage so currently I am using this:</p>\n<pre><code>Java2DFrameConverter c = new Java2DFrameConverter();\nBufferedImage image = c.convert(frame);\n</code></pre>\n<p>But when I am trying to save the .png file like that</p>\n<pre><code>ImageIO.write(image, &quot;png&quot;, outputFrameFile);\n</code></pre>\n<p>But I am getting the error &quot;image == null&quot; idk why</p>\n<p>I tried to look for answers but nothing helped.</p>\n"},{"tags":["java","android","debugging"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694584870,"post_id":77089540,"comment_id":135908714,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26189898,"reputation":3,"user_id":19871906,"display_name":"Yyyyyyyyyy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694524971,"creation_date":1694524971,"question_id":77089540,"body_markdown":"I downloaded the latest version of Android Studio Giraffe and used the debugger when debugging the application, but it does not show what the problem is, as it did before. \r\nNow I only receive this message:\r\n(Connected to the target VM, address: &#39;localhost:56713&#39;, transport: &#39;socket&#39;\r\nDisconnected from the target VM, address: &#39;localhost:56713&#39;, transport: &#39;socket&#39;)\r\n[enter image description here](https://i.stack.imgur.com/Tmg8a.png)\r\n\r\n\r\nalthough before, for example, he described the error more precisely:\r\n[enter image description here](https://i.stack.imgur.com/61a5M.png)\r\nI&#39;m not very well versed in Android Studio and could have made a mistake myself somewhere.","title":"Debugger does not show an error when running the application","body":"<p>I downloaded the latest version of Android Studio Giraffe and used the debugger when debugging the application, but it does not show what the problem is, as it did before.\nNow I only receive this message:\n(Connected to the target VM, address: 'localhost:56713', transport: 'socket'\nDisconnected from the target VM, address: 'localhost:56713', transport: 'socket')\n<a href=\"https://i.stack.imgur.com/Tmg8a.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>although before, for example, he described the error more precisely:\n<a href=\"https://i.stack.imgur.com/61a5M.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI'm not very well versed in Android Studio and could have made a mistake myself somewhere.</p>\n"},{"tags":["java","jackson","pom.xml","java-17","jackson-modules"],"answers":[{"tags":[],"owner":{"account_id":25536085,"reputation":11,"user_id":19323132,"display_name":"Ruslan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524945,"creation_date":1694524945,"answer_id":77089537,"question_id":76592226,"body_markdown":"I had a problem like this. You could try Jackson version 2.13.5. In my case it works well.","title":"java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction","body":"<p>I had a problem like this. You could try Jackson version 2.13.5. In my case it works well.</p>\n"}],"owner":{"account_id":7785038,"reputation":205,"user_id":5890223,"display_name":"Bee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694524945,"creation_date":1688159384,"question_id":76592226,"body_markdown":"I am getting this error trying to upgrade from Java 11 to 17.\r\n\r\nI confirmed that the ToBooleanFunction exists in the 2.15.2 version, as well as some other versions I&#39;ve tried. I also confirmed that the library is in the class path. \r\n\r\nHere are the relevant parts of my pom file. Appreciate any input.\r\n\r\n\r\n```\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-blackbird&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-guava&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-jaxb-annotations&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-jaxrs-base&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n```","title":"java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction","body":"<p>I am getting this error trying to upgrade from Java 11 to 17.</p>\n<p>I confirmed that the ToBooleanFunction exists in the 2.15.2 version, as well as some other versions I've tried. I also confirmed that the library is in the class path.</p>\n<p>Here are the relevant parts of my pom file. Appreciate any input.</p>\n<pre><code>           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-blackbird&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-guava&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-jaxb-annotations&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-jaxrs-base&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","spring-data","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524676,"creation_date":1694524183,"answer_id":77089429,"question_id":77050125,"body_markdown":"Your query seems fine. Try this as well:\r\n\r\n    MatchOperation matchOperation = Aggregation.match(\r\n              new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\r\n    GroupOperation groupOperation = Aggregation.group(&quot;userId&quot;, &quot;user&quot;);\r\n    ProjectionOperation projectionOperation = Aggregation.project().andExpression(&quot;_id.userId&quot;).as(&quot;userId&quot;).andExpression(&quot;_id.user&quot;).as(&quot;user&quot;);\r\n    Aggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\r\n    AggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\r\n\r\nAlso check, what is the value of `result.getUniqueMappedResult()` or `result.getMappedResults()`.","title":"Distinct on multiple columns in MongoDb using Spring data Mongo aggregation API","body":"<p>Your query seems fine. Try this as well:</p>\n<pre><code>MatchOperation matchOperation = Aggregation.match(\n          new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\nGroupOperation groupOperation = Aggregation.group(&quot;userId&quot;, &quot;user&quot;);\nProjectionOperation projectionOperation = Aggregation.project().andExpression(&quot;_id.userId&quot;).as(&quot;userId&quot;).andExpression(&quot;_id.user&quot;).as(&quot;user&quot;);\nAggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\nAggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\n</code></pre>\n<p>Also check, what is the value of <code>result.getUniqueMappedResult()</code> or <code>result.getMappedResults()</code>.</p>\n"}],"owner":{"account_id":2361709,"reputation":373,"user_id":2068260,"accept_rate":14,"display_name":"user2068260"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694524676,"creation_date":1693988066,"question_id":77050125,"body_markdown":"I am new to Mongo db and aggregation query. I want to perform distinct on 2 fields i.e.  userId and user in mongo db collection with name &quot;userDetails&quot;. I am able to execute below query and get the distinct documents from Mongo db using Robo 3T. But, I am trying to execute the same query using spring data MongoTemplate but getting empty result object in java. Need help to translate the below query in Java using Mongo template.\r\n\r\n      db.userDetails.aggregate([\r\n        {&quot;$match&quot; : {zip:&quot;52034&quot;, city:&quot;Delhi&quot;}}, \r\n        // group by userId, userName to get distinct document\r\n        {&quot;$group&quot; : {_id : {userId:&quot;$userId&quot;, user:&quot;$user&quot;}}}, \r\n        // Clean up the output\r\n        {&quot;$project&quot; : {_id:0, userId:&quot;$_id.userId&quot;, user:&quot;$_id.user&quot;}}\r\n    ])\r\n    \r\n\r\nBelow is the java code for above query using Spring data MongoTemplate, but the result object is empty during execution. UserDetails model class represent the Mongo document and UserDTO is the final response that need to be returned.\r\n\r\n    \r\n\tMatchOperation matchOperation = Aggregation.match(\r\n              new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\r\n    GroupOperation groupOperation = new GroupOperation(Fields.fields(&quot;userId&quot;, &quot;user&quot;));\r\n    ProjectionOperation projectionOperation = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;userId&quot;).nested(\r\n\t\t\tFields.fields(&quot;_id.userId&quot;))\r\n\t\t    .and(&quot;user&quot;).nested(Fields.fields(&quot;_id.user&quot;));\r\n    Aggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\r\n    AggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\r\n\r\n\r\nSpring data mongodb - 3.0.7\r\nDriver  4.0.4\r\n\r\n","title":"Distinct on multiple columns in MongoDb using Spring data Mongo aggregation API","body":"<p>I am new to Mongo db and aggregation query. I want to perform distinct on 2 fields i.e.  userId and user in mongo db collection with name &quot;userDetails&quot;. I am able to execute below query and get the distinct documents from Mongo db using Robo 3T. But, I am trying to execute the same query using spring data MongoTemplate but getting empty result object in java. Need help to translate the below query in Java using Mongo template.</p>\n<pre><code>  db.userDetails.aggregate([\n    {&quot;$match&quot; : {zip:&quot;52034&quot;, city:&quot;Delhi&quot;}}, \n    // group by userId, userName to get distinct document\n    {&quot;$group&quot; : {_id : {userId:&quot;$userId&quot;, user:&quot;$user&quot;}}}, \n    // Clean up the output\n    {&quot;$project&quot; : {_id:0, userId:&quot;$_id.userId&quot;, user:&quot;$_id.user&quot;}}\n])\n</code></pre>\n<p>Below is the java code for above query using Spring data MongoTemplate, but the result object is empty during execution. UserDetails model class represent the Mongo document and UserDTO is the final response that need to be returned.</p>\n<pre><code>MatchOperation matchOperation = Aggregation.match(\n          new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\nGroupOperation groupOperation = new GroupOperation(Fields.fields(&quot;userId&quot;, &quot;user&quot;));\nProjectionOperation projectionOperation = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;userId&quot;).nested(\n        Fields.fields(&quot;_id.userId&quot;))\n        .and(&quot;user&quot;).nested(Fields.fields(&quot;_id.user&quot;));\nAggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\nAggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\n</code></pre>\n<p>Spring data mongodb - 3.0.7\nDriver  4.0.4</p>\n"},{"tags":["java","netbeans","build","ant"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694432115,"post_id":77081251,"comment_id":135885739,"body_markdown":"There is no information in the build output that helps use understand what is going wrong, because there is no error or other diagnostic information. What I do find suspicious is the nesting of your directories (i.e. `NetBeansProjects` in `cmp_netbeens` in `NetBeansProjects`), but I&#39;m not sure how that would cause a problem (except maybe exceeding some path length limitation somewhere).","body":"There is no information in the build output that helps use understand what is going wrong, because there is no error or other diagnostic information. What I do find suspicious is the nesting of your directories (i.e. <code>NetBeansProjects</code> in <code>cmp_netbeens</code> in <code>NetBeansProjects</code>), but I&#39;m not sure how that would cause a problem (except maybe exceeding some path length limitation somewhere)."},{"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"score":0,"creation_date":1694432229,"post_id":77081251,"comment_id":135885766,"body_markdown":"I am also worry about the same thing that nothing else is in output window .","body":"I am also worry about the same thing that nothing else is in output window ."},{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":0,"creation_date":1694503228,"post_id":77081251,"comment_id":135895471,"body_markdown":"Usually when Ant fails it specifies the line in the script that caused the failure. Could you update your question to include this, along with the contents of your build script?","body":"Usually when Ant fails it specifies the line in the script that caused the failure. Could you update your question to include this, along with the contents of your build script?"}],"answers":[{"tags":[],"owner":{"account_id":26449096,"reputation":1,"user_id":20092545,"display_name":"andeteika"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694432136,"creation_date":1694432136,"answer_id":77081274,"question_id":77081251,"body_markdown":"Im not positive this is the reason but try to create or move the project in a local directory. The current project is on One Drive, which might affect the building process.","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>Im not positive this is the reason but try to create or move the project in a local directory. The current project is on One Drive, which might affect the building process.</p>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524662,"creation_date":1694440476,"answer_id":77082251,"question_id":77081251,"body_markdown":"You do not know what is going on, and noone else can help you just because there is not enough information emitted from the build tool. Try to fix that first.\r\n\r\nFrom the menu choose Tools/Options, choose the Java tab. On the subtab Ant you can see a combo box labelled Verbosity Level. Set it to verbose, or even debug and rerun your build.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2HCUL.png","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>You do not know what is going on, and noone else can help you just because there is not enough information emitted from the build tool. Try to fix that first.</p>\n<p>From the menu choose Tools/Options, choose the Java tab. On the subtab Ant you can see a combo box labelled Verbosity Level. Set it to verbose, or even debug and rerun your build.</p>\n<p><a href=\"https://i.stack.imgur.com/2HCUL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2HCUL.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694524662,"creation_date":1694431894,"question_id":77081251,"body_markdown":"I started clean and build my NetBeans project, but it gives me this output that it can&#39;t build. My library JAR files are OK and I have checked all my connections.\r\n\r\n\r\nHere is the output window text\r\n```none\r\nant -f &quot;G:\\\\My Drive\\\\newwwwwwww\\\\NetBeansProjects\\\\cmp_netbeens\\\\NetBeansProjects\\\\flatlaf-dashboard-main&quot; -Dnb.internal.action.name=rebuild clean jar\r\ninit:\r\ndeps-clean:\r\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-clean.properties\r\nDeleting directory G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\r\nclean:\r\ninit:\r\ndeps-jar:\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\r\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-jar.properties\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\classes\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\empty\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\generated-sources\\ap-source-output\r\nBUILD FAILED (total time: 2 seconds)\r\n```\r\n\r\nWhy does this fail?","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>I started clean and build my NetBeans project, but it gives me this output that it can't build. My library JAR files are OK and I have checked all my connections.</p>\n<p>Here is the output window text</p>\n<pre class=\"lang-none prettyprint-override\"><code>ant -f &quot;G:\\\\My Drive\\\\newwwwwwww\\\\NetBeansProjects\\\\cmp_netbeens\\\\NetBeansProjects\\\\flatlaf-dashboard-main&quot; -Dnb.internal.action.name=rebuild clean jar\ninit:\ndeps-clean:\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-clean.properties\nDeleting directory G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\nclean:\ninit:\ndeps-jar:\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-jar.properties\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\classes\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\empty\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\generated-sources\\ap-source-output\nBUILD FAILED (total time: 2 seconds)\n</code></pre>\n<p>Why does this fail?</p>\n"},{"tags":["java","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694455271,"post_id":77083808,"comment_id":135890413,"body_markdown":"Are you trying to verify that your method throws an exception? Perhaps you&#39;re looking for something like `assertThatThrownBy`?","body":"Are you trying to verify that your method throws an exception? Perhaps you&#39;re looking for something like <code>assertThatThrownBy</code>?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694499341,"post_id":77083808,"comment_id":135894860,"body_markdown":"Why are all your test fields called `*Mock`? If you only have mocks, you are not testing anything. Hint: `@InjectMocks` does not create a mock, but a real instance; with other mocks injected as needed. Since `syndromeTypeServiceMock` is not a mock (but a real instance), you cannot stub its methods with `given().thenReturn()`. `SyndromeType synTypeMock`  not a mock either","body":"Why are all your test fields called <code>*Mock</code>? If you only have mocks, you are not testing anything. Hint: <code>@InjectMocks</code> does not create a mock, but a real instance; with other mocks injected as needed. Since <code>syndromeTypeServiceMock</code> is not a mock (but a real instance), you cannot stub its methods with <code>given().thenReturn()</code>. <code>SyndromeType synTypeMock</code>  not a mock either"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505002,"post_id":77083808,"comment_id":135895789,"body_markdown":"@voidvoid checking the exception would be another test. What I&#39;m trying to test is to return the registry to be modified","body":"@voidvoid checking the exception would be another test. What I&#39;m trying to test is to return the registry to be modified"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505233,"post_id":77083808,"comment_id":135895850,"body_markdown":"@knittl It may be the confusion of so many tutorials that I have seen on how to validate the service layer and I have mixed some concepts. --&gt;","body":"@knittl It may be the confusion of so many tutorials that I have seen on how to validate the service layer and I have mixed some concepts. --&gt;"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505344,"post_id":77083808,"comment_id":135895871,"body_markdown":"I understand that @InjectMocks injects the real instance, SyndromeType objects synTypeMock understood that they are Mock since they are not real in the DB because of the Mock suffix","body":"I understand that @InjectMocks injects the real instance, SyndromeType objects synTypeMock understood that they are Mock since they are not real in the DB because of the Mock suffix"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694514889,"post_id":77083808,"comment_id":135897772,"body_markdown":"Your service isn&#39;t a mock but you are registering behavior on it, this will not work nor is the way to do it. You should register behavior on the mocks.","body":"Your service isn&#39;t a mock but you are registering behavior on it, this will not work nor is the way to do it. You should register behavior on the mocks."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694514739,"creation_date":1694514739,"answer_id":77088301,"question_id":77083808,"body_markdown":"Mockito mock ojects (created with `Mockito.mock` or `@Mock`) by default always return `null` or empty collections. If you require them to return a different value, you have to stub the methods.\r\n\r\n`@InjectMocks` on the other hand creates a _real_ instance of your interface/class and injects the mock objects as dependencies. A real instance&#39;s methods cannot be stubbed  and it wouldn&#39;t make sense really, because this is the class that you usually want to exercise in your test.\r\n\r\nThis means that if you want to test your service, you need to make sure that you are calling the real service and that any methods it calls return a useful value.\r\n\r\nThe following block calls `findById` on the _repository_ (not the service), for which you have created a mock object, but never stubbed any methods.\r\n\r\n```\r\nif(null != synType.getSynTypeTransId()) {\r\n   synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \r\n}\r\n```\r\n\r\nThe repository&#39;s method can be stubbed as follows in your test:\r\n\r\n```\r\nwhen(syndromeTypeTransRepository.findById(10)) // the id passed to the service\r\n    .thenReturn(Optional.of(...)); // a value that makes sense for your test\r\n```\r\n\r\nThe second call to the repository must be stubbed as well:\r\n\r\n```\r\nsynTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\r\n```\r\n\r\nA sufficient stub implementation is probably to simply return the argument itself:\r\n\r\n```\r\nwhen(syndromeTypeTransRepository.save(any()))\r\n    .thenReturn(AdditionalAnswers.returnsFirstArg());\r\n```\r\n\r\nAfter you have set up the stubbed calls in your test method, you must then call the _real_ method of your class (if you are not calling the real method, then what are you testing!?)\r\n\r\n```\r\nfinal SyndromeType actualType = syndromeTypeServiceMock.modifySyndromeType(synType);\r\n```\r\n\r\nAnd then assert the correct value being returned:\r\n\r\n```\r\nassertEquals(expectedType, actualType); // if SynType implement equals()\r\n```\r\n\r\nor\r\n\r\n```\r\n// without equals() properties need to be compared manually\r\nassertEquals(10, actualType.getSynTypeTransId());\r\nassertEquals(10, actualType.getSynTypeId());\r\nassertEquals(&quot;Musculoesquel&#233;tico.&quot;, actualType.getSynTypeName());\r\n```\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>Mockito mock ojects (created with <code>Mockito.mock</code> or <code>@Mock</code>) by default always return <code>null</code> or empty collections. If you require them to return a different value, you have to stub the methods.</p>\n<p><code>@InjectMocks</code> on the other hand creates a <em>real</em> instance of your interface/class and injects the mock objects as dependencies. A real instance's methods cannot be stubbed  and it wouldn't make sense really, because this is the class that you usually want to exercise in your test.</p>\n<p>This means that if you want to test your service, you need to make sure that you are calling the real service and that any methods it calls return a useful value.</p>\n<p>The following block calls <code>findById</code> on the <em>repository</em> (not the service), for which you have created a mock object, but never stubbed any methods.</p>\n<pre><code>if(null != synType.getSynTypeTransId()) {\n   synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \n}\n</code></pre>\n<p>The repository's method can be stubbed as follows in your test:</p>\n<pre><code>when(syndromeTypeTransRepository.findById(10)) // the id passed to the service\n    .thenReturn(Optional.of(...)); // a value that makes sense for your test\n</code></pre>\n<p>The second call to the repository must be stubbed as well:</p>\n<pre><code>synTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\n</code></pre>\n<p>A sufficient stub implementation is probably to simply return the argument itself:</p>\n<pre><code>when(syndromeTypeTransRepository.save(any()))\n    .thenReturn(AdditionalAnswers.returnsFirstArg());\n</code></pre>\n<p>After you have set up the stubbed calls in your test method, you must then call the <em>real</em> method of your class (if you are not calling the real method, then what are you testing!?)</p>\n<pre><code>final SyndromeType actualType = syndromeTypeServiceMock.modifySyndromeType(synType);\n</code></pre>\n<p>And then assert the correct value being returned:</p>\n<pre><code>assertEquals(expectedType, actualType); // if SynType implement equals()\n</code></pre>\n<p>or</p>\n<pre><code>// without equals() properties need to be compared manually\nassertEquals(10, actualType.getSynTypeTransId());\nassertEquals(10, actualType.getSynTypeId());\nassertEquals(&quot;Musculoesqueltico.&quot;, actualType.getSynTypeName());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524161,"creation_date":1694524161,"answer_id":77089427,"question_id":77083808,"body_markdown":"Thanks to @knittle, he has been able to correct the test and the most important thing is that for each action in the method to be tested, a mock must be performed. This is the modification of the test.\r\n\r\n    @Test\r\n    public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\r\n    \tLOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\r\n    \t\r\n    \tSyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.lanCodeEtt(LanguageEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanName(&quot;Espa&#241;ol&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeEtt(SyndromeTypeEntity.builder().synTypeId(10).build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \t\r\n    \t\r\n    \twhen(syndromeTypeTransRepository.findById(10)) // the id passed to the service\r\n    \t\t\t\t\t\t\t\t\t.thenReturn(Optional.of(synTypeTrans)); // a value that makes sense for your test\r\n    \t\r\n    \twhen(syndromeTypeTransRepository.save(any())) \r\n    \t\t\t\t\t\t\t\t\t.thenReturn(synTypeTrans); \r\n    \r\n    \tSyndromeType synType = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \r\n    \tfinal SyndromeType actualSynType = syndromeTypeService.modifySyndromeType(synType);\r\n    \r\n    \tassertEquals(10, actualSynType.getSynTypeTransId());\r\n    \tassertEquals(10, actualSynType.getSynTypeId());\r\n    \tassertEquals(&quot;Musculoesquel&#233;tico.&quot;, actualSynType.getSynTypeName());\r\n    \r\n    \tLOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\r\n    \t\r\n    }\r\n\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>Thanks to @knittle, he has been able to correct the test and the most important thing is that for each action in the method to be tested, a mock must be performed. This is the modification of the test.</p>\n<pre><code>@Test\npublic void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\n    LOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\n    \n    SyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\n                                                        .synTypeTransId(10)\n                                                        .synTypeName(&quot;Musculoesqueltico.&quot;)\n                                                        .lanCodeEtt(LanguageEntity.builder()\n                                                                         .lanCode(&quot;es&quot;)\n                                                                         .lanName(&quot;Espaol&quot;)\n                                                                         .build())\n                                                        .synTypeEtt(SyndromeTypeEntity.builder().synTypeId(10).build())\n                                                        .build();\n    \n    \n    when(syndromeTypeTransRepository.findById(10)) // the id passed to the service\n                                    .thenReturn(Optional.of(synTypeTrans)); // a value that makes sense for your test\n    \n    when(syndromeTypeTransRepository.save(any())) \n                                    .thenReturn(synTypeTrans); \n\n    SyndromeType synType = SyndromeType.builder()\n                                            .synTypeId(10)\n                                            .synTypeName(&quot;Musculoesqueltico.&quot;)\n                                            .lanCode(&quot;es&quot;)\n                                            .synTypeTransId(10)\n                                            .build();\n\n    final SyndromeType actualSynType = syndromeTypeService.modifySyndromeType(synType);\n\n    assertEquals(10, actualSynType.getSynTypeTransId());\n    assertEquals(10, actualSynType.getSynTypeId());\n    assertEquals(&quot;Musculoesqueltico.&quot;, actualSynType.getSynTypeName());\n\n    LOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\n    \n}\n</code></pre>\n"}],"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77088301,"answer_count":2,"score":0,"last_activity_date":1694524161,"creation_date":1694454484,"question_id":77083808,"body_markdown":"I am starting with Mockito to do unit tests.\r\nI have seen several examples of how a unit test can be carried out but it does not work for me since when I pass the object to search to check if it exists and modify it, the exception is thrown and the test is interrupted.\r\n\r\nWhen this line is executed:\r\n**BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect)**;\r\nIt enters the method in the Service and when validating with the mock, by not going to the database to look for the record, it returns null or empty and the following validation raises the exception.\r\nHow can I validate this exception with Mockito so that it passes the test?\r\n\r\nThansk in advance!\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class SyndromeTypeServiceTest {\r\n    \r\n    \tLogger LOGGER = LoggerFactory.getLogger(getClass());\r\n    \t\r\n    \t@Mock\r\n    \tSyndromeTypeRepository syndromeTypeRepository;\r\n    \t@Mock\r\n    \tSyndromeTypeTransRepository syndromeTypeTransRepository;\r\n    \t@InjectMocks\r\n    \tSyndromeTypeServiceImpl\tsyndromeTypeServiceMock;\r\n    \t\r\n        @Test\r\n        public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\r\n        \tLOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\r\n        \t\r\n    \r\n        \tSyndromeType synTypeMock = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n        \t\r\n        \tSyndromeType synTypeMockEspect = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.build();\r\n    \r\n        \tBDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect);\r\n    \r\n        \tassertEquals(synTypeMock.getSynTypeTransId(), synTypeMockEspect.getSynTypeTransId());\r\n        \tassertEquals(synTypeMock.getSynTypeId(), synTypeMockEspect.getSynTypeId());\r\n        \tassertEquals(synTypeMock.getSynTypeName(), synTypeMockEspect.getSynTypeName());\r\n    \r\n        \tLOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\r\n        \t\r\n        }\r\n    \t\r\n    }\r\n\r\nService layer\r\n\r\n    @Service\r\n    @Transactional\r\n    public class SyndromeTypeServiceImpl implements SyndromeTypeService {\r\n    \r\n    \tLogger LOGGER = LoggerFactory.getLogger(getClass());\r\n    \t\r\n    \tfinal SyndromeTypeRepository syndromeTypeRepository;\r\n    \tfinal SyndromeTypeTransRepository syndromeTypeTransRepository;\r\n    \t\r\n    \tpublic SyndromeTypeServiceImpl(SyndromeTypeRepository syndromeTypeRepository,\r\n    \t\t\tSyndromeTypeTransRepository syndromeTypeTransRepository) {\r\n    \t\tthis.syndromeTypeRepository = syndromeTypeRepository;\r\n    \t\tthis.syndromeTypeTransRepository = syndromeTypeTransRepository;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;SyndromeType&gt; renderSyndromeTypes(List&lt;SyndromeTypeTransEntity&gt; synTypesEtts){\r\n    \t\tLOGGER.info(&quot;Rendering SyndromeTypeEntity results&quot;);\r\n    \t\tList&lt;SyndromeType&gt; synTypes = new ArrayList&lt;SyndromeType&gt;(0);\r\n    \r\n    \t\tif(null != synTypesEtts) {\r\n    \t\t\tsynTypesEtts.stream()\r\n    \t\t\t\t.forEach(\r\n    \t\t\t\t\ts -&gt; {\r\n    \t\t\t\t\t\t\tsynTypes.add(\r\n    \t\t\t\t\t\t\t\t\tSyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeId(s.getSynTypeEtt().getSynTypeId())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(s.getSynTypeName())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.lanCode(s.getLanCodeEtt().getLanCode())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(s.getSynTypeTransId())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.build()\r\n    \t\t\t\t\t\t\t\t\t);\r\n    \t\t\t\t});\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn synTypes;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic SyndromeType modifySyndromeType(SyndromeType synType) throws PersistenceException {\r\n    \t\tLOGGER.info(&quot;modifySyndromeType &gt;&gt;&quot;);\r\n    \t\t\r\n    \t\tOptional&lt;SyndromeTypeTransEntity&gt; synTypeEtt = java.util.Optional.empty();\r\n    \t\t\r\n    \t\tif(null != synType.getSynTypeTransId()) {\r\n    \t\t\tsynTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \r\n    \t\t}\r\n    \r\n    \t\tif(!synTypeEtt.isPresent() || synTypeEtt.isEmpty()) {\r\n    \t\t\tthrow new PersistenceException(ErrorMessage.RECORD_NOT_EXIST.name());\r\n    \t\t}\r\n    \t\t\r\n    \t\tSyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.lanCodeEtt(LanguageEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanCode(synType.getLanCode())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(synType.getSynTypeName())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \t\t\r\n    \t\tsynTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\r\n    \t\t\r\n    \t\tList&lt;SyndromeType&gt; synTypesTO = this.renderSyndromeTypes(List.of(synTypeTrans));\r\n    \t\t\r\n    \t\tSyndromeType synTypeTO = synTypesTO.isEmpty() ? null : synTypesTO.get(0);\r\n    \t\t\r\n    \t\tLOGGER.info(&quot;&lt;&lt; modifySyndromeType&quot;);\r\n    \t\treturn synTypeTO;\r\n    \t}\r\n    }\r\n\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>I am starting with Mockito to do unit tests.\nI have seen several examples of how a unit test can be carried out but it does not work for me since when I pass the object to search to check if it exists and modify it, the exception is thrown and the test is interrupted.</p>\n<p>When this line is executed:\n<strong>BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect)</strong>;\nIt enters the method in the Service and when validating with the mock, by not going to the database to look for the record, it returns null or empty and the following validation raises the exception.\nHow can I validate this exception with Mockito so that it passes the test?</p>\n<p>Thansk in advance!</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SyndromeTypeServiceTest {\n\n    Logger LOGGER = LoggerFactory.getLogger(getClass());\n    \n    @Mock\n    SyndromeTypeRepository syndromeTypeRepository;\n    @Mock\n    SyndromeTypeTransRepository syndromeTypeTransRepository;\n    @InjectMocks\n    SyndromeTypeServiceImpl syndromeTypeServiceMock;\n    \n    @Test\n    public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\n        LOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\n        \n\n        SyndromeType synTypeMock = SyndromeType.builder()\n                                                .synTypeId(10)\n                                                .synTypeName(&quot;Musculoesqueltico.&quot;)\n                                                .lanCode(&quot;es&quot;)\n                                                .synTypeTransId(10)\n                                                .build();\n        \n        SyndromeType synTypeMockEspect = SyndromeType.builder()\n                                                .synTypeId(10)\n                                                .synTypeName(&quot;Musculoesqueltico.&quot;)\n                                                .lanCode(&quot;es&quot;)\n                                                .synTypeTransId(10)\n                                                .build();\n\n        BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect);\n\n        assertEquals(synTypeMock.getSynTypeTransId(), synTypeMockEspect.getSynTypeTransId());\n        assertEquals(synTypeMock.getSynTypeId(), synTypeMockEspect.getSynTypeId());\n        assertEquals(synTypeMock.getSynTypeName(), synTypeMockEspect.getSynTypeName());\n\n        LOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\n        \n    }\n    \n}\n</code></pre>\n<p>Service layer</p>\n<pre><code>@Service\n@Transactional\npublic class SyndromeTypeServiceImpl implements SyndromeTypeService {\n\n    Logger LOGGER = LoggerFactory.getLogger(getClass());\n    \n    final SyndromeTypeRepository syndromeTypeRepository;\n    final SyndromeTypeTransRepository syndromeTypeTransRepository;\n    \n    public SyndromeTypeServiceImpl(SyndromeTypeRepository syndromeTypeRepository,\n            SyndromeTypeTransRepository syndromeTypeTransRepository) {\n        this.syndromeTypeRepository = syndromeTypeRepository;\n        this.syndromeTypeTransRepository = syndromeTypeTransRepository;\n    }\n\n    @Override\n    public List&lt;SyndromeType&gt; renderSyndromeTypes(List&lt;SyndromeTypeTransEntity&gt; synTypesEtts){\n        LOGGER.info(&quot;Rendering SyndromeTypeEntity results&quot;);\n        List&lt;SyndromeType&gt; synTypes = new ArrayList&lt;SyndromeType&gt;(0);\n\n        if(null != synTypesEtts) {\n            synTypesEtts.stream()\n                .forEach(\n                    s -&gt; {\n                            synTypes.add(\n                                    SyndromeType.builder()\n                                                .synTypeId(s.getSynTypeEtt().getSynTypeId())\n                                                .synTypeName(s.getSynTypeName())\n                                                .lanCode(s.getLanCodeEtt().getLanCode())\n                                                .synTypeTransId(s.getSynTypeTransId())\n                                                .build()\n                                    );\n                });\n            \n        }\n        \n        return synTypes;\n    }\n\n    @Override\n    public SyndromeType modifySyndromeType(SyndromeType synType) throws PersistenceException {\n        LOGGER.info(&quot;modifySyndromeType &gt;&gt;&quot;);\n        \n        Optional&lt;SyndromeTypeTransEntity&gt; synTypeEtt = java.util.Optional.empty();\n        \n        if(null != synType.getSynTypeTransId()) {\n            synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \n        }\n\n        if(!synTypeEtt.isPresent() || synTypeEtt.isEmpty()) {\n            throw new PersistenceException(ErrorMessage.RECORD_NOT_EXIST.name());\n        }\n        \n        SyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\n                                                        .lanCodeEtt(LanguageEntity.builder()\n                                                                         .lanCode(synType.getLanCode())\n                                                                         .build())\n                                                        .synTypeName(synType.getSynTypeName())\n                                                        .build();\n        \n        synTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\n        \n        List&lt;SyndromeType&gt; synTypesTO = this.renderSyndromeTypes(List.of(synTypeTrans));\n        \n        SyndromeType synTypeTO = synTypesTO.isEmpty() ? null : synTypesTO.get(0);\n        \n        LOGGER.info(&quot;&lt;&lt; modifySyndromeType&quot;);\n        return synTypeTO;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","docker","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694435858,"creation_date":1694435858,"answer_id":77081692,"question_id":77081390,"body_markdown":"Found it. It is org.rnotrth.ducttape library. To exclude its debug messages from logs just use:\r\n```\r\nlogging:\r\n  level:\r\n    org.rnorth: WARN\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>Found it. It is org.rnotrth.ducttape library. To exclude its debug messages from logs just use:</p>\n<pre><code>logging:\n  level:\n    org.rnorth: WARN\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694523510,"creation_date":1694523510,"answer_id":77089350,"question_id":77081390,"body_markdown":"The lines come from `HttpClient`. Here is the discussion on how to turn it off:\r\nhttps://stackoverflow.com/questions/4915414/disable-httpclient-logging\r\n\r\nIn my case helped adding logback.xml file with the following content:\r\n```\r\n&lt;configuration debug=&quot;false&quot;&gt;\r\n    &lt;!-- definition of appender STDOUT --&gt;\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg %n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;!-- appender referenced after it is defined --&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>The lines come from <code>HttpClient</code>. Here is the discussion on how to turn it off:\n<a href=\"https://stackoverflow.com/questions/4915414/disable-httpclient-logging\">Disable HttpClient logging</a></p>\n<p>In my case helped adding logback.xml file with the following content:</p>\n<pre><code>&lt;configuration debug=&quot;false&quot;&gt;\n    &lt;!-- definition of appender STDOUT --&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg %n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;!-- appender referenced after it is defined --&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694523510,"creation_date":1694433122,"question_id":77081390,"body_markdown":"Have a Spring Boot project and while running integration tests I get plenty of these debug messages. Which library is generating them and how to exclude them properly? \r\n```\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;accept: application/json[\\r][\\n]&quot;                                                              \r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;x-tc-sid: 0c130805-5b48-4da1-acf4-45a0a4833e0f[\\r][\\n]\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;User-Agent: tc-java/1.19.0[\\r][\\n]&quot;\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Accept-Encoding: gzip, x-gzip, deflate[\\r][\\n]\r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]                                                                                       \r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]                                                                                     \r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;                                                                                                          \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]                                                                                            \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Api-Version: 1.41[\\r][\\n]                                                                                          \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Content-Type: application/json[\\r][\\n]&quot;   \r\n```\r\n\r\n\r\nTried adding to the application.yml file:\r\n```\r\nlogging:\r\n  level:\r\n    org.springframework: INFO\r\n    org.hibernate: WARN\r\n    com.github: WARN\r\n    org.apache.http: WARN\r\n    org.testcontainers: WARN\r\n    org.postgresql: WARN\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>Have a Spring Boot project and while running integration tests I get plenty of these debug messages. Which library is generating them and how to exclude them properly?</p>\n<pre><code>13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;accept: application/json[\\r][\\n]&quot;                                                              \n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;x-tc-sid: 0c130805-5b48-4da1-acf4-45a0a4833e0f[\\r][\\n]\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;User-Agent: tc-java/1.19.0[\\r][\\n]&quot;\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Accept-Encoding: gzip, x-gzip, deflate[\\r][\\n]\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]                                                                                       \n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]                                                                                     \n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;                                                                                                          \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]                                                                                            \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Api-Version: 1.41[\\r][\\n]                                                                                          \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Content-Type: application/json[\\r][\\n]&quot;   \n</code></pre>\n<p>Tried adding to the application.yml file:</p>\n<pre><code>logging:\n  level:\n    org.springframework: INFO\n    org.hibernate: WARN\n    com.github: WARN\n    org.apache.http: WARN\n    org.testcontainers: WARN\n    org.postgresql: WARN\n</code></pre>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664296008,"creation_date":1664296008,"answer_id":73870870,"question_id":67397029,"body_markdown":"Be very careful, what you are doing using `times(0)` does not work as you expect.\r\nIndeed, one can try this piece of code to notice that the timeout is not actually reached, and as soon as the first valid Mockito evaluation passes, the `verify` assertions passes.\r\n\r\n```java\r\n  private static class TestAsync {\r\n    void test() {\r\n      System.out.println(&quot;test&quot;);\r\n    }\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitZeroTimes() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    verify(testAsync, timeout(2000).times(0)).test();\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitOnce() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    verify(testAsync, timeout(2000).times(1)).test();\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitReachingTimeout() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 2000);\r\n\r\n    verify(testAsync, timeout(1000).times(1)).test();\r\n\r\n  }\r\n```\r\n\r\nYou will notice that the `test` is printed only in the `testAsyncWaitOnce` test.\r\n\r\nWhat I am doing is using a third-party library called [`awaitility`](https://github.com/awaitility/awaitility), and allow to do something like:\r\n\r\n```java\r\n  @Test\r\n  void testAsyncWaitUsingAwaitilityShouldNotBeCalled() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 5000);\r\n\r\n    await().during(2, TimeUnit.SECONDS)\r\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, never()).test())\r\n                           .isSuccess());\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitUsingAwaitilityShouldBeCalledOnce() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    await().timeout(2, TimeUnit.SECONDS)\r\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, times(1)).test())\r\n                           .isSuccess());\r\n\r\n  }\r\n```\r\n\r\nThis way we can see the time is correctly awaited and no interactions have happened in the past.","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>Be very careful, what you are doing using <code>times(0)</code> does not work as you expect.\nIndeed, one can try this piece of code to notice that the timeout is not actually reached, and as soon as the first valid Mockito evaluation passes, the <code>verify</code> assertions passes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static class TestAsync {\n    void test() {\n      System.out.println(&quot;test&quot;);\n    }\n  }\n\n  @Test\n  void testAsyncWaitZeroTimes() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    verify(testAsync, timeout(2000).times(0)).test();\n\n  }\n\n  @Test\n  void testAsyncWaitOnce() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    verify(testAsync, timeout(2000).times(1)).test();\n\n  }\n\n  @Test\n  void testAsyncWaitReachingTimeout() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 2000);\n\n    verify(testAsync, timeout(1000).times(1)).test();\n\n  }\n</code></pre>\n<p>You will notice that the <code>test</code> is printed only in the <code>testAsyncWaitOnce</code> test.</p>\n<p>What I am doing is using a third-party library called <a href=\"https://github.com/awaitility/awaitility\" rel=\"nofollow noreferrer\"><code>awaitility</code></a>, and allow to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void testAsyncWaitUsingAwaitilityShouldNotBeCalled() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 5000);\n\n    await().during(2, TimeUnit.SECONDS)\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, never()).test())\n                           .isSuccess());\n\n  }\n\n  @Test\n  void testAsyncWaitUsingAwaitilityShouldBeCalledOnce() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    await().timeout(2, TimeUnit.SECONDS)\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, times(1)).test())\n                           .isSuccess());\n\n  }\n</code></pre>\n<p>This way we can see the time is correctly awaited and no interactions have happened in the past.</p>\n"},{"tags":[],"owner":{"account_id":3248402,"reputation":2386,"user_id":2739334,"accept_rate":64,"display_name":"Pwnstar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694523444,"creation_date":1694523444,"answer_id":77089341,"question_id":67397029,"body_markdown":"Combine Timeout with How often it should appear\r\n\r\n    import static org.mockito.Mockito.timeout;\r\n    \r\n    ...\r\n    \r\n    verify(spy, timeout(5000).times(1)).doWhatever(comparedArgument);\r\n\r\nWait for `5000` milliseconds to execute `doWhatever` exactly `1` times and check that the argument equals `comparedArgument`","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>Combine Timeout with How often it should appear</p>\n<pre><code>import static org.mockito.Mockito.timeout;\n\n...\n\nverify(spy, timeout(5000).times(1)).doWhatever(comparedArgument);\n</code></pre>\n<p>Wait for <code>5000</code> milliseconds to execute <code>doWhatever</code> exactly <code>1</code> times and check that the argument equals <code>comparedArgument</code></p>\n"}],"owner":{"account_id":10164387,"reputation":4961,"user_id":7506820,"display_name":"Nico Van Belle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1694523444,"creation_date":1620200413,"question_id":67397029,"body_markdown":"I have a piece of java code that runs in a CompletableFuture#runAsync block and I want to verify that in this block, a specific service is never called.\r\n\r\nNormally to verify that it is actually called, I can use the `timeout` VerificationMode to assert when the runAsync is likely completed\r\n\r\n```\r\nverify(myService, timeout(500)).methodX(param);\r\n```\r\n\r\nBut in my case I want to check if the service had no interactions. Normally this is done with `verifyNoInteractions(myService);` but this fires immediately and has a high chance for false positives.\r\n\r\nThe workaround is that, for every method in the service, I type use the `times(0)` VerificationMode e.g.\r\n\r\n```\r\nverify(myService, timeout(500).times(0)).methodX(param);\r\nverify(myService, timeout(500).times(0)).methodY(param);\r\nverify(myService, timeout(500).times(0)).methodZ(param);\r\n```\r\n\r\nBut this is an awful idea for all obvious reasons.\r\n\r\nI know another possibility would be adding `Thread.sleep(500);`, but I want to use the Mockito API if possible. I just have not seen it done elsewhere.","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>I have a piece of java code that runs in a CompletableFuture#runAsync block and I want to verify that in this block, a specific service is never called.</p>\n<p>Normally to verify that it is actually called, I can use the <code>timeout</code> VerificationMode to assert when the runAsync is likely completed</p>\n<pre><code>verify(myService, timeout(500)).methodX(param);\n</code></pre>\n<p>But in my case I want to check if the service had no interactions. Normally this is done with <code>verifyNoInteractions(myService);</code> but this fires immediately and has a high chance for false positives.</p>\n<p>The workaround is that, for every method in the service, I type use the <code>times(0)</code> VerificationMode e.g.</p>\n<pre><code>verify(myService, timeout(500).times(0)).methodX(param);\nverify(myService, timeout(500).times(0)).methodY(param);\nverify(myService, timeout(500).times(0)).methodZ(param);\n</code></pre>\n<p>But this is an awful idea for all obvious reasons.</p>\n<p>I know another possibility would be adding <code>Thread.sleep(500);</code>, but I want to use the Mockito API if possible. I just have not seen it done elsewhere.</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"score":1,"creation_date":1263304993,"post_id":2049380,"comment_id":1976327,"body_markdown":"Please be more specific in your question, what exactly do you wanna do with each line ?","body":"Please be more specific in your question, what exactly do you wanna do with each line ?"},{"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"score":0,"creation_date":1263305119,"post_id":2049380,"comment_id":1976352,"body_markdown":"This question should help you: http://stackoverflow.com/questions/224952","body":"This question should help you: <a href=\"http://stackoverflow.com/questions/224952\">stackoverflow.com/questions/224952</a>"},{"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"score":0,"creation_date":1263305799,"post_id":2049380,"comment_id":1976455,"body_markdown":"@Fabian Steeg: The question you linked to doesn&#39;t address dealing with different data types like this one does.","body":"@Fabian Steeg: The question you linked to doesn&#39;t address dealing with different data types like this one does."},{"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"score":0,"creation_date":1263306475,"post_id":2049380,"comment_id":1976558,"body_markdown":"@Bemrose, I&#39;m not exactly sure what the author of the question means, but I understand it as *where every line can contain different kinds and amounts of numbers*. But yeah, I don&#39;t know.","body":"@Bemrose, I&#39;m not exactly sure what the author of the question means, but I understand it as <i>where every line can contain different kinds and amounts of numbers</i>. But yeah, I don&#39;t know."}],"answers":[{"tags":[],"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1263305185,"creation_date":1263305185,"answer_id":2049449,"question_id":2049380,"body_markdown":"Your question is not very clear, so I&#39;ll only answer for the &quot;read&quot; part :\r\n\r\n    List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\r\n    BufferedReader br = new BufferedReader(new FileReader(&quot;fileName&quot;));\r\n    String line = br.readLine();\r\n    while (line != null)\r\n    {\r\n        lines.add(line);\r\n        line = br.readLine();\r\n    }","title":"Reading a text file in java","body":"<p>Your question is not very clear, so I'll only answer for the \"read\" part :</p>\n\n<pre><code>List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\nBufferedReader br = new BufferedReader(new FileReader(\"fileName\"));\nString line = br.readLine();\nwhile (line != null)\n{\n    lines.add(line);\n    line = br.readLine();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15903,"reputation":323433,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1263305341,"creation_date":1263305341,"answer_id":2049472,"question_id":2049380,"body_markdown":"Try the [`Scanner`][1] class which no one knows about but can do almost anything with text.\r\n\r\nTo get a reader for a file, use\r\n\r\n    File file = new File (&quot;...path...&quot;);\r\n    String encoding = &quot;....&quot;; // Encoding of your file\r\n    Reader reader = new BufferedReader (new InputStreamReader (\r\n        new FileInputStream (file), encoding));\r\n\r\n    ... use reader ...\r\n\r\n    reader.close ();\r\n\r\nYou should really specify the encoding or else you will get strange results when you encounter umlauts, Unicode and the like.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html","title":"Reading a text file in java","body":"<p>Try the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html\" rel=\"noreferrer\"><code>Scanner</code></a> class which no one knows about but can do almost anything with text.</p>\n\n<p>To get a reader for a file, use</p>\n\n<pre><code>File file = new File (\"...path...\");\nString encoding = \"....\"; // Encoding of your file\nReader reader = new BufferedReader (new InputStreamReader (\n    new FileInputStream (file), encoding));\n\n... use reader ...\n\nreader.close ();\n</code></pre>\n\n<p>You should really specify the encoding or else you will get strange results when you encounter umlauts, Unicode and the like.</p>\n"},{"tags":[],"owner":{"account_id":90350,"reputation":250,"user_id":248787,"display_name":"Alasdair"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1263307048,"creation_date":1263307048,"answer_id":2049677,"question_id":2049380,"body_markdown":"Easiest option is to simply use the [Apache Commons IO][1] JAR and import the org.apache.commons.io.FileUtils class. There are many possibilities when using this class, but the most obvious would be as follows;\r\n\r\n    List&lt;String&gt; lines = FileUtils.readLines(new File(&quot;untitled.txt&quot;));\r\n\r\nIt&#39;s that easy.\r\n\r\n&gt; &quot;Don&#39;t reinvent the wheel.&quot;\r\n\r\n  [1]: http://commons.apache.org/io/","title":"Reading a text file in java","body":"<p>Easiest option is to simply use the <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">Apache Commons IO</a> JAR and import the org.apache.commons.io.FileUtils class. There are many possibilities when using this class, but the most obvious would be as follows;</p>\n\n<pre><code>List&lt;String&gt; lines = FileUtils.readLines(new File(\"untitled.txt\"));\n</code></pre>\n\n<p>It's that easy.</p>\n\n<blockquote>\n  <p>\"Don't reinvent the wheel.\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2484168,"reputation":39,"user_id":2162977,"display_name":"Kamil"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1363124295,"creation_date":1363124170,"answer_id":15372641,"question_id":2049380,"body_markdown":"Common used:\r\n\r\n        String line = null;\r\n        File file = new File( &quot;readme.txt&quot; );\r\n   \r\n        FileReader fr = null;\r\n        try\r\n        {\r\n            fr = new FileReader( file );\r\n        } \r\n        catch (FileNotFoundException e) \r\n        {  \r\n            System.out.println( &quot;File doesn&#39;t exists&quot; );\r\n            e.printStackTrace();\r\n        }\r\n        BufferedReader br = new BufferedReader( fr );\r\n   \r\n        try\r\n        {\r\n            while( (line = br.readLine()) != null )\r\n        {\r\n            System.out.println( line );\r\n        }\r\n\r\n\r\n","title":"Reading a text file in java","body":"<p>Common used:</p>\n\n<pre><code>    String line = null;\n    File file = new File( \"readme.txt\" );\n\n    FileReader fr = null;\n    try\n    {\n        fr = new FileReader( file );\n    } \n    catch (FileNotFoundException e) \n    {  \n        System.out.println( \"File doesn't exists\" );\n        e.printStackTrace();\n    }\n    BufferedReader br = new BufferedReader( fr );\n\n    try\n    {\n        while( (line = br.readLine()) != null )\n    {\n        System.out.println( line );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694523368,"creation_date":1452150854,"answer_id":34649320,"question_id":2049380,"body_markdown":"@user248921 first of all, you can store any text in string array , so you can make string array and store a line in array and use value in code whenever you want. you can use the below code to store heterogeneous(containing string, int, boolean,etc) lines in array.\r\n\r\n    public class user {\r\n     public static void main(String x[]) throws IOException{\r\n      BufferedReader b=new BufferedReader(new FileReader(&quot;&lt;path to file&gt;&quot;));\r\n      String[] user=new String[500];\r\n      String line=&quot;&quot;;\r\n      while ((line = b.readLine()) != null) {\r\n       user[i]=line; \r\n       System.out.println(user[1]);\r\n       i++;  \r\n       }\r\n    \r\n     }\r\n    }","title":"Reading a text file in java","body":"<p>@user248921 first of all, you can store any text in string array , so you can make string array and store a line in array and use value in code whenever you want. you can use the below code to store heterogeneous(containing string, int, boolean,etc) lines in array.</p>\n<pre><code>public class user {\n public static void main(String x[]) throws IOException{\n  BufferedReader b=new BufferedReader(new FileReader(&quot;&lt;path to file&gt;&quot;));\n  String[] user=new String[500];\n  String line=&quot;&quot;;\n  while ((line = b.readLine()) != null) {\n   user[i]=line; \n   System.out.println(user[1]);\n   i++;  \n   }\n\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14577797,"reputation":182,"user_id":10529201,"display_name":"Babofett"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1548421674,"creation_date":1548421674,"answer_id":54365951,"question_id":2049380,"body_markdown":"This is a nice way to work with Streams and Collectors.\r\n\r\n    List&lt;String&gt; myList;\r\n    try(BufferedReader reader = new BufferedReader(new FileReader(&quot;yourpath&quot;))){\r\n        myList = reader.lines() // This will return a Stream&lt;String&gt;\r\n                     .collect(Collectors.toList());\r\n    }catch(Exception e){\r\n        e.printStackTrace();\r\n    }\r\n\r\nWhen working with Streams you have also multiple methods to filter, manipulate or reduce your input.","title":"Reading a text file in java","body":"<p>This is a nice way to work with Streams and Collectors.</p>\n\n<pre><code>List&lt;String&gt; myList;\ntry(BufferedReader reader = new BufferedReader(new FileReader(\"yourpath\"))){\n    myList = reader.lines() // This will return a Stream&lt;String&gt;\n                 .collect(Collectors.toList());\n}catch(Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>When working with Streams you have also multiple methods to filter, manipulate or reduce your input.</p>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1556055157,"creation_date":1556055157,"answer_id":55819708,"question_id":2049380,"body_markdown":"The best approach to read a file in `Java` is to open in, read line by line and process it and close the strea\r\n\r\n    // Open the file\r\n    FileInputStream fstream = new FileInputStream(&quot;textfile.txt&quot;);\r\n    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));\r\n    \r\n    String strLine;\r\n    \r\n    //Read File Line By Line\r\n    while ((strLine = br.readLine()) != null)   {\r\n      // Print the content on the console - do what you want to do\r\n      System.out.println (strLine);\r\n    }\r\n    \r\n    //Close the input stream\r\n    fstream.close();\r\n\r\nTo learn more about how to read file in Java, [check out the article][1].\r\n\r\n\r\n  [1]: https://javatutorial.net/java-read-file-example","title":"Reading a text file in java","body":"<p>The best approach to read a file in <code>Java</code> is to open in, read line by line and process it and close the strea</p>\n\n<pre><code>// Open the file\nFileInputStream fstream = new FileInputStream(\"textfile.txt\");\nBufferedReader br = new BufferedReader(new InputStreamReader(fstream));\n\nString strLine;\n\n//Read File Line By Line\nwhile ((strLine = br.readLine()) != null)   {\n  // Print the content on the console - do what you want to do\n  System.out.println (strLine);\n}\n\n//Close the input stream\nfstream.close();\n</code></pre>\n\n<p>To learn more about how to read file in Java, <a href=\"https://javatutorial.net/java-read-file-example\" rel=\"nofollow noreferrer\">check out the article</a>.</p>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616700488,"creation_date":1616655117,"answer_id":66794456,"question_id":2049380,"body_markdown":"For **Java 11** you could use the next short approach:\r\n\r\n      Path path = Path.of(&quot;file.txt&quot;);\r\n      try (var reader = Files.newBufferedReader(path)) {\r\n          String line;\r\n          while ((line = reader.readLine()) != null) {\r\n              System.out.println(line);\r\n          }\r\n      }\r\n\r\nOr:\r\n\r\n    var path = Path.of(&quot;file.txt&quot;);\r\n    List&lt;String&gt; lines = Files.readAllLines(path);\r\n    lines.forEach(System.out::println);\r\n\r\nOr:\r\n\r\n    Files.lines(Path.of(&quot;file.txt&quot;)).forEach(System.out::println);\r\n\r\n","title":"Reading a text file in java","body":"<p>For <strong>Java 11</strong> you could use the next short approach:</p>\n<pre><code>  Path path = Path.of(&quot;file.txt&quot;);\n  try (var reader = Files.newBufferedReader(path)) {\n      String line;\n      while ((line = reader.readLine()) != null) {\n          System.out.println(line);\n      }\n  }\n</code></pre>\n<p>Or:</p>\n<pre><code>var path = Path.of(&quot;file.txt&quot;);\nList&lt;String&gt; lines = Files.readAllLines(path);\nlines.forEach(System.out::println);\n</code></pre>\n<p>Or:</p>\n<pre><code>Files.lines(Path.of(&quot;file.txt&quot;)).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28544196,"reputation":1,"user_id":21849857,"display_name":"Jakov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683533489,"creation_date":1683533489,"answer_id":76198617,"question_id":2049380,"body_markdown":"```\r\nimport java.io.BufferedReader;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PredmetTest {\r\n\r\n    public static void main(String[] args) {\r\n        // Define the file path to read the subject names and grades from\r\n        String filePath = &quot;path_to_your_file.txt&quot;;\r\n\r\n        // Create a list to store the subjects\r\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\r\n\r\n        // Read the file and populate the predmeti list\r\n        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] parts = line.split(&quot; &quot;);\r\n                String subjectName = parts[0];\r\n\r\n                // Parse the grades for the subject\r\n                List&lt;Integer&gt; grades = new ArrayList&lt;&gt;();\r\n                for (int i = 1; i &lt; parts.length; i++) {\r\n                    grades.add(Integer.parseInt(parts[i]));\r\n                }\r\n\r\n                // Create a new Predmet object with the subject name and grades\r\n                Predmet predmet = new Predmet(subjectName, grades);\r\n\r\n                // Add the Predmet object to the list\r\n                predmeti.add(predmet);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Calculate and display the average grade for each subject\r\n        double highestAverage = -1;\r\n        Predmet predmetWithHighestAverage = null;\r\n\r\n        for (Predmet predmet : predmeti) {\r\n            // Calculate the average grade for the subject\r\n            double average = predmet.calculateAverage();\r\n\r\n            // Update the subject with the highest average if necessary\r\n            if (average &gt; highestAverage) {\r\n                highestAverage = average;\r\n                predmetWithHighestAverage = predmet;\r\n            }\r\n\r\n            // Display the subject and its average grade\r\n            System.out.println(&quot;Subject: &quot; + predmet.getSubjectName());\r\n            System.out.println(&quot;Average grade: &quot; + average);\r\n            System.out.println();\r\n        }\r\n\r\n        // Display the subject with the highest average grade\r\n        if (predmetWithHighestAverage != null) {\r\n            System.out.println(&quot;Subject with the highest average grade: &quot; + predmetWithHighestAverage.getSubjectName());\r\n        }\r\n    }\r\n}\r\n\r\npublic class Predmet {\r\n    private String subjectName;\r\n    private List&lt;Integer&gt; grades;\r\n\r\n    public Predmet(String subjectName, List&lt;Integer&gt; grades) {\r\n        this.subjectName = subjectName;\r\n        this.grades = grades;\r\n    }\r\n\r\n    public String getSubjectName() {\r\n        return subjectName;\r\n    }\r\n\r\n    public List&lt;Integer&gt; getGrades() {\r\n        return grades;\r\n    }\r\n\r\n    public double calculateAverage() {\r\n        int sum = 0;\r\n        for (int grade : grades) {\r\n            sum += grade;\r\n        }\r\n        return (double) sum / grades.size();\r\n    }\r\n}\r\n```","title":"Reading a text file in java","body":"<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class PredmetTest {\n\n    public static void main(String[] args) {\n        // Define the file path to read the subject names and grades from\n        String filePath = &quot;path_to_your_file.txt&quot;;\n\n        // Create a list to store the subjects\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\n\n        // Read the file and populate the predmeti list\n        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                String[] parts = line.split(&quot; &quot;);\n                String subjectName = parts[0];\n\n                // Parse the grades for the subject\n                List&lt;Integer&gt; grades = new ArrayList&lt;&gt;();\n                for (int i = 1; i &lt; parts.length; i++) {\n                    grades.add(Integer.parseInt(parts[i]));\n                }\n\n                // Create a new Predmet object with the subject name and grades\n                Predmet predmet = new Predmet(subjectName, grades);\n\n                // Add the Predmet object to the list\n                predmeti.add(predmet);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        // Calculate and display the average grade for each subject\n        double highestAverage = -1;\n        Predmet predmetWithHighestAverage = null;\n\n        for (Predmet predmet : predmeti) {\n            // Calculate the average grade for the subject\n            double average = predmet.calculateAverage();\n\n            // Update the subject with the highest average if necessary\n            if (average &gt; highestAverage) {\n                highestAverage = average;\n                predmetWithHighestAverage = predmet;\n            }\n\n            // Display the subject and its average grade\n            System.out.println(&quot;Subject: &quot; + predmet.getSubjectName());\n            System.out.println(&quot;Average grade: &quot; + average);\n            System.out.println();\n        }\n\n        // Display the subject with the highest average grade\n        if (predmetWithHighestAverage != null) {\n            System.out.println(&quot;Subject with the highest average grade: &quot; + predmetWithHighestAverage.getSubjectName());\n        }\n    }\n}\n\npublic class Predmet {\n    private String subjectName;\n    private List&lt;Integer&gt; grades;\n\n    public Predmet(String subjectName, List&lt;Integer&gt; grades) {\n        this.subjectName = subjectName;\n        this.grades = grades;\n    }\n\n    public String getSubjectName() {\n        return subjectName;\n    }\n\n    public List&lt;Integer&gt; getGrades() {\n        return grades;\n    }\n\n    public double calculateAverage() {\n        int sum = 0;\n        for (int grade : grades) {\n            sum += grade;\n        }\n        return (double) sum / grades.size();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28544164,"reputation":1,"user_id":21849828,"display_name":"bozo2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683538431,"creation_date":1683538431,"answer_id":76199267,"question_id":2049380,"body_markdown":"```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\n\r\npublic class Predmet {\r\n    String naziv;\r\n    float ocjena;\r\n\r\n    public Predmet(String naziv, float ocjena) {\r\n        this.naziv = naziv;\r\n        this.ocjena = ocjena;\r\n    }\r\n}\r\n\r\npublic class PredmetTest {\r\n    public static void main(String[] args) {\r\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\r\n\r\n        // Uitavanje predmeta iz datoteke\r\n        try {\r\n            File file = new File(&quot;predmeti.txt&quot;);\r\n            Scanner scanner = new Scanner(file);\r\n\r\n            while (scanner.hasNextLine()) {\r\n                String line = scanner.nextLine();\r\n                String[] parts = line.split(&quot; &quot;);\r\n                String naziv = parts[0];\r\n                float ocjena = Float.parseFloat(parts[1]);\r\n                Predmet predmet = new Predmet(naziv, ocjena);\r\n                predmeti.add(predmet);\r\n            }\r\n\r\n            scanner.close();\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;Datoteka nije pronaena.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Ispisivanje predmeta i zakljune ocjene\r\n        float najveciProsjek = 0;\r\n        Predmet predmetSaNajvecimProsjekom = null;\r\n\r\n        for (Predmet predmet : predmeti) {\r\n            System.out.println(&quot;Predmet: &quot; + predmet.naziv);\r\n            System.out.println(&quot;Zakljuna ocjena: &quot; + predmet.ocjena);\r\n            System.out.println();\r\n\r\n            if (predmet.ocjena &gt; najveciProsjek) {\r\n                najveciProsjek = predmet.ocjena;\r\n                predmetSaNajvecimProsjekom = predmet;\r\n            }\r\n        }\r\n\r\n        // Ispisivanje predmeta s najviim prosjekom\r\n        if (predmetSaNajvecimProsjekom != null) {\r\n            System.out.println(&quot;Predmet s najviim prosjekom: &quot; + predmetSaNajvecimProsjekom.naziv);\r\n            System.out.println(&quot;Prosjek ocjena: &quot; + predmetSaNajvecimProsjekom.ocjena);\r\n        }\r\n    }\r\n}\r\n```","title":"Reading a text file in java","body":"<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class Predmet {\n    String naziv;\n    float ocjena;\n\n    public Predmet(String naziv, float ocjena) {\n        this.naziv = naziv;\n        this.ocjena = ocjena;\n    }\n}\n\npublic class PredmetTest {\n    public static void main(String[] args) {\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\n\n        // Uitavanje predmeta iz datoteke\n        try {\n            File file = new File(&quot;predmeti.txt&quot;);\n            Scanner scanner = new Scanner(file);\n\n            while (scanner.hasNextLine()) {\n                String line = scanner.nextLine();\n                String[] parts = line.split(&quot; &quot;);\n                String naziv = parts[0];\n                float ocjena = Float.parseFloat(parts[1]);\n                Predmet predmet = new Predmet(naziv, ocjena);\n                predmeti.add(predmet);\n            }\n\n            scanner.close();\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;Datoteka nije pronaena.&quot;);\n            e.printStackTrace();\n        }\n\n        // Ispisivanje predmeta i zakljune ocjene\n        float najveciProsjek = 0;\n        Predmet predmetSaNajvecimProsjekom = null;\n\n        for (Predmet predmet : predmeti) {\n            System.out.println(&quot;Predmet: &quot; + predmet.naziv);\n            System.out.println(&quot;Zakljuna ocjena: &quot; + predmet.ocjena);\n            System.out.println();\n\n            if (predmet.ocjena &gt; najveciProsjek) {\n                najveciProsjek = predmet.ocjena;\n                predmetSaNajvecimProsjekom = predmet;\n            }\n        }\n\n        // Ispisivanje predmeta s najviim prosjekom\n        if (predmetSaNajvecimProsjekom != null) {\n            System.out.println(&quot;Predmet s najviim prosjekom: &quot; + predmetSaNajvecimProsjekom.naziv);\n            System.out.println(&quot;Prosjek ocjena: &quot; + predmetSaNajvecimProsjekom.ocjena);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user248921"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43941,"favorite_count":0,"down_vote_count":4,"up_vote_count":6,"closed_date":1683573775,"answer_count":10,"score":2,"last_activity_date":1694523368,"creation_date":1263304588,"question_id":2049380,"body_markdown":"How would I read a .txt file in Java and put every line in an array when every lines contains integers, strings, and doubles? And every line has different amounts of words/numbers.\r\n","title":"Reading a text file in java","body":"<p>How would I read a .txt file in Java and put every line in an array when every lines contains integers, strings, and doubles? And every line has different amounts of words/numbers.</p>\n"},{"tags":["java","selenium-webdriver","automated-tests"],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694522924,"creation_date":1694522474,"answer_id":77089225,"question_id":77089089,"body_markdown":"Refer the below working code with explanation:\r\n````\r\nWebDriver driver = new ChromeDriver();\r\ndriver.get(&quot;https://www.screwfix.com/&quot;);\r\ndriver.manage().window().maximize();\r\n// below line will create an object of WebDriverWait\r\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(15)); \r\n\r\n// below line will wait and switch into the desired iframe\t\t\r\nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@name=&#39;trustarc_cm&#39;]&quot;)));\r\n// below line eill wait and click on Accept Cookie button\r\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[text()=&#39;Accept Cookies&#39;]&quot;))).click();\r\n// below line will come out of iframe\r\ndriver.switchTo().defaultContent();\r\n````\r\n\r\nImports:\r\n````\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\n````","title":"How to find Element hidden in Cross-Origin Iframe","body":"<p>Refer the below working code with explanation:</p>\n<pre><code>WebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.screwfix.com/&quot;);\ndriver.manage().window().maximize();\n// below line will create an object of WebDriverWait\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(15)); \n\n// below line will wait and switch into the desired iframe      \nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@name='trustarc_cm']&quot;)));\n// below line eill wait and click on Accept Cookie button\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[text()='Accept Cookies']&quot;))).click();\n// below line will come out of iframe\ndriver.switchTo().defaultContent();\n</code></pre>\n<p>Imports:</p>\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n</code></pre>\n"}],"owner":{"account_id":29422570,"reputation":1,"user_id":22543992,"display_name":"Papykay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694522924,"creation_date":1694521539,"question_id":77089089,"body_markdown":"Please, I need help to click on the &lt;kbd&gt;Accept cookies&lt;/kbd&gt; of https://www.screwfix.com that appeared on the launch of Chrome browser. I discovered through the Selector hub that the element is inside a cross-origin `iframe`. I watched Sanjay Kumar&#39;s Selector Hub method of dealing with cross-origin `iframe` on YouTube. The result I am getting is `org.openqa.selenium.NoSuchFrameException`. Please I need your help\r\n\r\n````\r\npublic class Framework {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/User/eclipse-workspace/Julius 2023 workspace/Laptop123/PassDriver/chromedriver.exe&quot;);\r\n\t\t\r\n\t\tChromeOptions option=new ChromeOptions();\r\n\t\toption.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t\t \r\n\t\tWebDriver driver= new ChromeDriver(option);\r\n\t\tdriver.get(&quot;https://www.screwfix.com&quot;);\r\n\t\t\r\n\t\t\r\n\t\t\r\n        Thread.sleep(5000);\r\n\t   driver.switchTo().frame(&quot;thirdPartyCheckerFrame&quot;);\r\n\t   driver.findElement(By.xpath(&quot;//a[normalize-space()=&#39;Accept Cookies&#39;]&quot;)).click();\r\n\t   driver.switchTo().defaultContent();  \r\n}\r\n````\r\nRESULT: Below is the exception, I have tried different method, I cannot click on &quot;Accept cookies&quot; to allow me to proceed.\r\n````\r\nException in thread &quot;main&quot; org.openqa.selenium.NoSuchFrameException: No frame element found by name or id thirdPartyCheckerFrame\r\nBuild info: version: &#39;4.7.2&#39;, revision: &#39;4d4020c3b7&#39;\r\nSystem info: os.name: &#39;Windows 11&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.17&#39;\r\n````","title":"How to find Element hidden in Cross-Origin Iframe","body":"<p>Please, I need help to click on the <kbd>Accept cookies</kbd> of <a href=\"https://www.screwfix.com\" rel=\"nofollow noreferrer\">https://www.screwfix.com</a> that appeared on the launch of Chrome browser. I discovered through the Selector hub that the element is inside a cross-origin <code>iframe</code>. I watched Sanjay Kumar's Selector Hub method of dealing with cross-origin <code>iframe</code> on YouTube. The result I am getting is <code>org.openqa.selenium.NoSuchFrameException</code>. Please I need your help</p>\n<pre><code>public class Framework {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/User/eclipse-workspace/Julius 2023 workspace/Laptop123/PassDriver/chromedriver.exe&quot;);\n        \n        ChromeOptions option=new ChromeOptions();\n        option.addArguments(&quot;--remote-allow-origins=*&quot;);\n         \n        WebDriver driver= new ChromeDriver(option);\n        driver.get(&quot;https://www.screwfix.com&quot;);\n        \n        \n        \n        Thread.sleep(5000);\n       driver.switchTo().frame(&quot;thirdPartyCheckerFrame&quot;);\n       driver.findElement(By.xpath(&quot;//a[normalize-space()='Accept Cookies']&quot;)).click();\n       driver.switchTo().defaultContent();  \n}\n</code></pre>\n<p>RESULT: Below is the exception, I have tried different method, I cannot click on &quot;Accept cookies&quot; to allow me to proceed.</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchFrameException: No frame element found by name or id thirdPartyCheckerFrame\nBuild info: version: '4.7.2', revision: '4d4020c3b7'\nSystem info: os.name: 'Windows 11', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.17'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694512352,"post_id":77085537,"comment_id":135897244,"body_markdown":"May i ask, if you are new to spring security why did you first thing try to build a custom security solution instead of trying out to implement something that already exists in spring security like basic login or formlogin? As laid out in the official documentation on spring securitys homepage","body":"May i ask, if you are new to spring security why did you first thing try to build a custom security solution instead of trying out to implement something that already exists in spring security like basic login or formlogin? As laid out in the official documentation on spring securitys homepage"},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694522167,"post_id":77085537,"comment_id":135899379,"body_markdown":"because I am developing an application and I needed to use jwt tokens in this application, but I understood why the problem was caused, basically when I examined the process, everything became clearer.","body":"because I am developing an application and I needed to use jwt tokens in this application, but I understood why the problem was caused, basically when I examined the process, everything became clearer."},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694522914,"post_id":77085537,"comment_id":135899571,"body_markdown":"Also, sending authentication data through the header seems a bit odd to me.","body":"Also, sending authentication data through the header seems a bit odd to me."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694535065,"post_id":77085537,"comment_id":135902594,"body_markdown":"jwt were never designed to be handed out to browsers, thats why there is no implementation for it in spring security. So what you are building has several security flaws and has some vulnerabilities. JWTs where meant to be used between microservices inside of corporate networks.","body":"jwt were never designed to be handed out to browsers, thats why there is no implementation for it in spring security. So what you are building has several security flaws and has some vulnerabilities. JWTs where meant to be used between microservices inside of corporate networks."},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694540021,"post_id":77085537,"comment_id":135903552,"body_markdown":"so how can I send the login data to the filters in the request body or is this possible?","body":"so how can I send the login data to the filters in the request body or is this possible?"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694545588,"post_id":77085537,"comment_id":135904542,"body_markdown":"tbh, if you want to get good at Spring Security, i suggest you read https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html and first try to implement FormLogin https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html and look at their example https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/hello-security-explicit/src/main/java/example/SecurityConfiguration.java i cant teach you spring sec in comments.","body":"tbh, if you want to get good at Spring Security, i suggest you read <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/authenticat&zwnj;&#8203;ion/&hellip;</a> and first try to implement FormLogin <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/authenticat&zwnj;&#8203;ion/&hellip;</a> and look at their example <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/hello-security-explicit/src/main/java/example/SecurityConfiguration.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security-samples/blob/main&zwnj;&#8203;/&hellip;</a> i cant teach you spring sec in comments."}],"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694522800,"creation_date":1694480751,"question_id":77085537,"body_markdown":"I&#39;m new to Spring Boot so please forgive me if I use something wrong or a wrong term.\r\n\r\nThe jwt generator filter defines Authentication authentication = SecurityContextHolder.getContext().getAuthentication() as null, which is really starting to confuse me a lot.\r\n\r\nWhen I examined the BasicAuthentication filter, I saw that it gave null when converting the incoming request value to authentication in the BasicAuthentication filter, I could not fully understand what my mistake was here.\r\n\r\nThe reason why I write /login as a separate endpoint is that I don&#39;t get a 401 error when I send a request to the default login endpoint in spring security. In general, I have two questions, how can I use this data in BasicAuthenticationFilter and save it in SecurityContextHolder and secondly how can I send a request to the default login endpoint Thank you in advance for your answers\r\n\r\n\r\n**I have a jwt generator filter like this**\r\n\r\n```\r\npublic class JwtGeneratorFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        if (authentication != null) {\r\n            SecretKey secretKey = Keys.hmacShaKeyFor(SecurityConstants.JWT_KEY.getBytes(StandardCharsets.UTF_8));\r\n            String jwt = Jwts.builder().setIssuer(&quot;Demo App&quot;).setSubject(&quot;Jwt token&quot;).claim(&quot;userName&quot;, authentication.getName()).setIssuedAt(new Date()).setExpiration(new Date((new Date().getTime() + 30000000))).signWith(secretKey).compact();\r\n            response.setHeader(SecurityConstants.JWT_HEADER, jwt);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n\r\n```\r\n**and I have a security config file like this**\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {\r\n        return configuration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration config = new CorsConfiguration();\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\r\n        config.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\r\n        config.setAllowCredentials(true);\r\n        config.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\r\n        config.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;));\r\n        config.setMaxAge(3600L);\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n        return source;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()));\r\n        http.csrf(csrf -&gt; csrf.disable()).sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)).authorizeHttpRequests(req -&gt; req.requestMatchers(&quot;/auth/**&quot;).permitAll().anyRequest().authenticated());\r\n        http.formLogin(Customizer.withDefaults())\r\n                .httpBasic(Customizer.withDefaults());\r\n\r\n        http.addFilterAfter(new JwtGeneratorFilter(), BasicAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\n**and I also have a login api like this**\r\n\r\n```\r\n@PostMapping(&quot;/login&quot;)\r\n    public String login(@RequestBody User user) {\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(user.getEmail(), user.getPassword()));\r\n        return user.toString();\r\n\r\n    }\r\n```\r\n\r\n***authenticated value in the authentication object returns true but does not generate my jwt token***\r\n\r\n\r\n**My Solution**\r\n\r\nWhen I examined the BasicAuthentication filter, I saw that it receives authentication in the **header of the request** and **I realized that it has no effect on the filtering process because it is a manual authentication I did here**. If you are a beginner like me, I realized we should send this data (login information) in the header as the default Authentication filter. As far as I understand, for a custom login process, for example, you may be getting too much information, you can write a separate method to determine the login ID and authenticate it through the authentication manager, and if the authentication object received from here is authenticated, it can create a jwt token and return a response back to the end user in this way.\r\n\r\nAs I said, I just started writing Spring Boot, I apologize if I have any mistakes or mistakes, I stated my own observations and opinions here","title":"spring security securitycotextholder cannot save authentication to securitycotextholder","body":"<p>I'm new to Spring Boot so please forgive me if I use something wrong or a wrong term.</p>\n<p>The jwt generator filter defines Authentication authentication = SecurityContextHolder.getContext().getAuthentication() as null, which is really starting to confuse me a lot.</p>\n<p>When I examined the BasicAuthentication filter, I saw that it gave null when converting the incoming request value to authentication in the BasicAuthentication filter, I could not fully understand what my mistake was here.</p>\n<p>The reason why I write /login as a separate endpoint is that I don't get a 401 error when I send a request to the default login endpoint in spring security. In general, I have two questions, how can I use this data in BasicAuthenticationFilter and save it in SecurityContextHolder and secondly how can I send a request to the default login endpoint Thank you in advance for your answers</p>\n<p><strong>I have a jwt generator filter like this</strong></p>\n<pre><code>public class JwtGeneratorFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        if (authentication != null) {\n            SecretKey secretKey = Keys.hmacShaKeyFor(SecurityConstants.JWT_KEY.getBytes(StandardCharsets.UTF_8));\n            String jwt = Jwts.builder().setIssuer(&quot;Demo App&quot;).setSubject(&quot;Jwt token&quot;).claim(&quot;userName&quot;, authentication.getName()).setIssuedAt(new Date()).setExpiration(new Date((new Date().getTime() + 30000000))).signWith(secretKey).compact();\n            response.setHeader(SecurityConstants.JWT_HEADER, jwt);\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n\n</code></pre>\n<p><strong>and I have a security config file like this</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\npublic class SecurityConfig {\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration config = new CorsConfiguration();\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\n        config.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\n        config.setAllowCredentials(true);\n        config.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\n        config.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;));\n        config.setMaxAge(3600L);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return source;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()));\n        http.csrf(csrf -&gt; csrf.disable()).sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)).authorizeHttpRequests(req -&gt; req.requestMatchers(&quot;/auth/**&quot;).permitAll().anyRequest().authenticated());\n        http.formLogin(Customizer.withDefaults())\n                .httpBasic(Customizer.withDefaults());\n\n        http.addFilterAfter(new JwtGeneratorFilter(), BasicAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p><strong>and I also have a login api like this</strong></p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public String login(@RequestBody User user) {\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(user.getEmail(), user.getPassword()));\n        return user.toString();\n\n    }\n</code></pre>\n<p><em><strong>authenticated value in the authentication object returns true but does not generate my jwt token</strong></em></p>\n<p><strong>My Solution</strong></p>\n<p>When I examined the BasicAuthentication filter, I saw that it receives authentication in the <strong>header of the request</strong> and <strong>I realized that it has no effect on the filtering process because it is a manual authentication I did here</strong>. If you are a beginner like me, I realized we should send this data (login information) in the header as the default Authentication filter. As far as I understand, for a custom login process, for example, you may be getting too much information, you can write a separate method to determine the login ID and authenticate it through the authentication manager, and if the authentication object received from here is authenticated, it can create a jwt token and return a response back to the end user in this way.</p>\n<p>As I said, I just started writing Spring Boot, I apologize if I have any mistakes or mistakes, I stated my own observations and opinions here</p>\n"},{"tags":["java","jms","ibm-mq","messaging"],"comments":[{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1694518957,"post_id":33637289,"comment_id":135898634,"body_markdown":"It is incomprehensible near *&quot;if we have a failover, that controls the queue will no longer be accessible&quot;*. Can you [fix it](https://stackoverflow.com/posts/33637289/edit)? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the question should appear as if it was written today.","body":"It is incomprehensible near <i>&quot;if we have a failover, that controls the queue will no longer be accessible&quot;</i>. Can you <a href=\"https://stackoverflow.com/posts/33637289/edit\">fix it</a>? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the question should appear as if it was written today."}],"answers":[{"tags":[],"owner":{"account_id":10874,"reputation":13103,"user_id":20734,"display_name":"John M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694519071,"creation_date":1447867765,"answer_id":33786532,"question_id":33637289,"body_markdown":"On your high availability question...\r\n\r\nIf you&#39;ve got two queue receivers reading from a single queue, I don&#39;t know any natural way to avoid parallelism between them.\r\n\r\nMaybe some vendor-specific feature, but it seems like an odd thing and I wouldn&#39;t have any high expectations.\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>On your high availability question...</p>\n<p>If you've got two queue receivers reading from a single queue, I don't know any natural way to avoid parallelism between them.</p>\n<p>Maybe some vendor-specific feature, but it seems like an odd thing and I wouldn't have any high expectations.</p>\n"},{"tags":[],"owner":{"account_id":5230400,"reputation":1818,"user_id":4180950,"display_name":"Attila Repasi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447945972,"creation_date":1447945972,"answer_id":33807626,"question_id":33637289,"body_markdown":"If you process the messages under syncpoint, it is true that you can roll back the transactions so putting the processed message back to the input queue in case an error occurs.\r\nIf the program ends abnormally, an implicit backout occurs.\r\n\r\nhttp://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en\r\n\r\nTransactional processing of messages doesn&#39;t prevent two separate consumers from reading messages at the same time.\r\nThere is a property on the queues called Shareability, which can be set to Not Shareable so preventing the queue to be opened by separate consumers at the same time.\r\nYou should use this option and prepare your application to retry opening the queue so when the first instance fails, the second instance will open the queue.","title":"How do JMS transactions work with concurrent consumers?","body":"<p>If you process the messages under syncpoint, it is true that you can roll back the transactions so putting the processed message back to the input queue in case an error occurs.\nIf the program ends abnormally, an implicit backout occurs.</p>\n\n<p><a href=\"http://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en\" rel=\"nofollow\">http://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en</a></p>\n\n<p>Transactional processing of messages doesn't prevent two separate consumers from reading messages at the same time.\nThere is a property on the queues called Shareability, which can be set to Not Shareable so preventing the queue to be opened by separate consumers at the same time.\nYou should use this option and prepare your application to retry opening the queue so when the first instance fails, the second instance will open the queue.</p>\n"},{"tags":[],"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694522715,"creation_date":1448563278,"answer_id":33945224,"question_id":33637289,"body_markdown":"You need to be passing tokens.  Here&#39;s how that works:\r\n\r\nFirst, create a second queue and place a single message into it.  Now start up each program with the following logic.\r\n\r\n 1. Get the token message off the token queue under syncpoint using an unlimited or long wait interval and the `FAIL_IF_QUIESCING` option.\r\n 2. Put the token message back on the token queue in the same [UOW][1].\r\n 3. Get the next message off of the application queue under the same UOW.\r\n 4. Process the application&#39;s message normally.\r\n 5. Commit the UOW.\r\n\r\nYou can use as many application instances as you want.  You will see one input handle on each of the two queues for each application instance.  No application instance will have to handle errors due to exclusive use of a queue.\r\n\r\nSince there is only one token message and only one application can hold it under syncpoint at a time, only one of the applications can be actively processing an application message.  Since the `GET` off the application queue is dependent on a successful `GET` off the token queue, all application messages are processed in strict sequence.\r\n\r\n*Note: The application will process the application messages with as many concurrent threads as there are token messages on the token queue.  If anyone ever adds another token message to the token queue, strict sequence processing is lost.  For this reason read/write access to that queue must *not* be granted to anyone other than the application service account.  Also, it is common for that token message to be structured so that the application can recognize it.  If a stray unrelated message lands there the application should ignore it and throw a warning.*\r\n\r\nYou will see a fairly even distribution of messages between the two applications.  If you use more than two applications you might see a wildly *un*even distribution because queue handles are managed in a stack. As an instance commits its UOW the next instance&#39;s handle is at the top of the stack so it gets the next message.  While it is handling that message the instance that just committed will have it&#39;s `GET` placed on top of the stack.  If you have 3 or more listening instances chances are only the first two will see any traffic.\r\n\r\nThis assures that messages are processed off the queue one at a time.  It does ***not*** assure that you won&#39;t get dupes.\r\n\r\nIf you do everything under syncpoint, no messages will ever be lost.  However there&#39;s a scenario in which a message is retrieved and processed, then the `COMMIT` call fails.  In that case the transaction is rolled back and the same message becomes available again.  If you are using 1-phase commits and not [XA][2], the processing for that message will not be rolled back.\r\n\r\nThe nice thing is that the token message will be under syncpoint too and that fixes the issue in which an orphaned client channel takes a while to release the transaction.  A new connection will get messages which are older than the message held under syncpoint by the orphan transaction.  Eventually the channel agent times out releasing the message back to the queue but effectively changing its position to be *behind* any messages that were processed while it was sequestered.\r\n\r\nIn this scenario the token message is also sequestered so after this type of connection loss message processing temporarily stops and waits for the channel agent to time out.  If that were ever to happen, just issue a `STOP CHANNEL` command on the instance with the UOW.\r\n\r\n\r\n----------\r\n\r\n\r\n\r\n***Update based on additional question details specific to this answer***\r\n\r\n&gt; The queue which holds this token has to be part of some queue manager.\r\n&gt; Now if we have a failover, that control queue will no longer be\r\n&gt; accessible. Which kinda means that that we need another control queue\r\n&gt; ready in case of a failover.\r\n\r\nThe token queue is as available or as unavailable as the application queue. Only one is needed.  If the application requires high availability (HA), then a Multi-Instance QMgr or a hardware high availability cluster should be used.  These share disk so the QMgr that comes up in the failover is the same one the application has been connected to, just at a different physical location.\r\n\r\nIf the application needs [DR][3], it&#39;s possible to replicate the disk under the QMgr&#39;s logs and data directories to a DR site.  However, nothing should be listening on those instances while processing is going on in the primary data center.\r\n\r\n&gt; The listener instances should know that a failover has initiated so\r\n&gt; that it can stop listening to the control queue during normal ops and\r\n&gt; switch over to the secondary. I can&#39;t do this using the listener\r\n&gt; instance alone.\r\n\r\nWhy not? WebSphere MQ has had reconnectable clients for a really long time and the multi-instance features in v7.0.1 made reconnecting drop-dead simple.  As an administrator, your job is to make sure that no more than one instance of the application and token (not trigger!) queue are available.  During an outage, the client goes into retry without requiring any application code to drive it.  It finds whichever of the instances is up and connects.\r\n\r\n&gt; The actual producer which puts messages into the queue will have to\r\n&gt; notify the listener instances to stop listening to the normal ops\r\n&gt; control queue and switch over to the secondary.\r\n\r\nThe question was about serialization with concurrent consumers.  This is about a design in which producers and consumers have to rendezvous at a common location. Different problem that happens to overlap this one only in that it is complicated somewhat by serialization. Ask a different question if you need to explore topologies.\r\n\r\n&gt; This token system is not really\r\n&gt; reactive right? It&#39;s more of periodic thing. So let&#39;s say we don&#39;t get\r\n&gt; any messages for a few hours. The listeners will still be constantly\r\n&gt; checking the queue coz the token message keeps triggering one instance\r\n&gt; after another.\r\n\r\nThis does not use triggering. It uses a token (not trigger!) message the way a filesystem or database uses a lock in order to facilitate serialization. Whichever listener gets the token message then does a get with unlimited wait on the application queue.  The other listeners have a get with unlimited wait on the token (not trigger!) queue. Basically, they sit around idle until a message arrives.  Zero reconnections, zero polls, zero CPU cycles.  If you need to know they are alive, let them time out on the application queue once in a while.  This rolls back their UOW on the token queue which passes the token to another listener.\r\n\r\n&gt; Third would really be the question of inserting the token message.\r\n&gt; During first install or during a failback, we&#39;ll have that extra\r\n&gt; manual step of manually inserting this token (since the token would be\r\n&gt; lost in failover sometimes).\r\n\r\nWhy? Do you experience MQ losing persistent messages under syncpoint often? If so you are doing it wrong. ;-) In a situation with strict serialization requirements there can be only one active instance of a queue. If for some reason there are other instances of the application queue pre-defined other than through disk replication there would be one instance of the token (not trigger!) queue also predefined alongside it and one token (not trigger!) message waiting in each queue. Surely nobody would do such a thing in the face of strict message order requirements, but if they did those queues would surely be get-disabled while not in use.\r\n\r\n&gt; We can&#39;t really make one of the listener\r\n&gt; instances do it since if a listener instance doesn&#39;t find the message\r\n&gt; it kinda means that some other listener instance has the token.\r\n\r\nCorrect. The listeners *could* check queue depth, transactions, input handles, etc, but it is generally wise to avoid mixing application logic with control logic.\r\n\r\n&gt; So\r\n&gt; this logic has to be separate. And if we actually put some meaningful\r\n&gt; info into this token message, it has to be a utility that has to be\r\n&gt; triggered rather than an insertion through the UI.\r\n\r\nWhy? Your coders handle structured data in application messages, right? If this is perceived to be significantly more difficult, someone&#39;s doing it wrong. ;-)  Write an instance of a formatted token (not trigger!) message to a queue, then offload that to a file. When you need to reinitialize the queue, use Q or QLoad to first clear the queue, then load the file into it. **That** utility would be the one to open the queue for exclusive use, check for depth, check for handles, etc. prior to performing its magic.  When I do this for consulting clients I typically define a service that initializes the queue on MQ startup *and* also provide a feature in the application GUI for the operations and support staff.  So long as the application managing the token (not trigger) queue gets it for exclusive access during these operations it really doesn&#39;t matter how it&#39;s done or by how many instances of the control application.\r\n\r\nAs a rule I also use the structure in the message to send commands to the listeners.  There&#39;s the real token message, and then there&#39;s messages that command the application instances to do things. For example, it&#39;s really nice to have a non-transactional &quot;ping&quot; capability. I if I drop more ping messages on the token (not trigger!) queue in a single UOW than I have application instances listening, I am guaranteed to contact all of them. In this way I can detect zombies.  Depending on how much instrumentation is required the listeners can react to the ping by providing a status (uptime, messages processed, etc.) in the log, to the console, to an event queue, etc.\r\n\r\n&gt; I guess the first and third aren&#39;t really problems, but just extra\r\n&gt; overhead which wouldn&#39;t be needed if we went for a poller\r\n&gt; implementation.\r\n\r\nThat&#39;s good because this is all pretty standard stuff. The problem lies mainly with the requirements for serialization conflicting with those for HA/DR. What you are looking for is global transactional atomicity to implement a single logical queue across multiple physical locations.  IBM MQ has never attempted to provide that, although the [WebSphere Application Server][4] (WAS) Messaging Engine has.  The closest IBM MQ comes is to use two IBM MQ appliances with memory-to-memory replication of message and transaction data but that is good to only a few miles before light-speed latency begins to significantly impact throughput. It doesn&#39;t handle your DR needs.  In fact, *nothing* short of synchronous replication does that if you want a zero recovery point at the DR datacenter.\r\n\r\n  [1]: https://www.ibm.com/docs/en/was/8.5.5?topic=SSEQTP_8.5.5/com.ibm.websphere.javadoc.doc/web/spidocs/com/ibm/wsspi/uow/UOWManager.html\r\n  [2]: https://www.ibm.com/docs/en/ibm-mq/9.1?topic=registration-summarizing-xa-calls\r\n  [3]: https://en.wikipedia.org/wiki/Disaster_recovery\r\n  [4]: https://en.wikipedia.org/wiki/IBM_WebSphere_Application_Server\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>You need to be passing tokens.  Here's how that works:</p>\n<p>First, create a second queue and place a single message into it.  Now start up each program with the following logic.</p>\n<ol>\n<li>Get the token message off the token queue under syncpoint using an unlimited or long wait interval and the <code>FAIL_IF_QUIESCING</code> option.</li>\n<li>Put the token message back on the token queue in the same <a href=\"https://www.ibm.com/docs/en/was/8.5.5?topic=SSEQTP_8.5.5/com.ibm.websphere.javadoc.doc/web/spidocs/com/ibm/wsspi/uow/UOWManager.html\" rel=\"nofollow noreferrer\">UOW</a>.</li>\n<li>Get the next message off of the application queue under the same UOW.</li>\n<li>Process the application's message normally.</li>\n<li>Commit the UOW.</li>\n</ol>\n<p>You can use as many application instances as you want.  You will see one input handle on each of the two queues for each application instance.  No application instance will have to handle errors due to exclusive use of a queue.</p>\n<p>Since there is only one token message and only one application can hold it under syncpoint at a time, only one of the applications can be actively processing an application message.  Since the <code>GET</code> off the application queue is dependent on a successful <code>GET</code> off the token queue, all application messages are processed in strict sequence.</p>\n<p><em>Note: The application will process the application messages with as many concurrent threads as there are token messages on the token queue.  If anyone ever adds another token message to the token queue, strict sequence processing is lost.  For this reason read/write access to that queue must <em>not</em> be granted to anyone other than the application service account.  Also, it is common for that token message to be structured so that the application can recognize it.  If a stray unrelated message lands there the application should ignore it and throw a warning.</em></p>\n<p>You will see a fairly even distribution of messages between the two applications.  If you use more than two applications you might see a wildly <em>un</em>even distribution because queue handles are managed in a stack. As an instance commits its UOW the next instance's handle is at the top of the stack so it gets the next message.  While it is handling that message the instance that just committed will have it's <code>GET</code> placed on top of the stack.  If you have 3 or more listening instances chances are only the first two will see any traffic.</p>\n<p>This assures that messages are processed off the queue one at a time.  It does <em><strong>not</strong></em> assure that you won't get dupes.</p>\n<p>If you do everything under syncpoint, no messages will ever be lost.  However there's a scenario in which a message is retrieved and processed, then the <code>COMMIT</code> call fails.  In that case the transaction is rolled back and the same message becomes available again.  If you are using 1-phase commits and not <a href=\"https://www.ibm.com/docs/en/ibm-mq/9.1?topic=registration-summarizing-xa-calls\" rel=\"nofollow noreferrer\">XA</a>, the processing for that message will not be rolled back.</p>\n<p>The nice thing is that the token message will be under syncpoint too and that fixes the issue in which an orphaned client channel takes a while to release the transaction.  A new connection will get messages which are older than the message held under syncpoint by the orphan transaction.  Eventually the channel agent times out releasing the message back to the queue but effectively changing its position to be <em>behind</em> any messages that were processed while it was sequestered.</p>\n<p>In this scenario the token message is also sequestered so after this type of connection loss message processing temporarily stops and waits for the channel agent to time out.  If that were ever to happen, just issue a <code>STOP CHANNEL</code> command on the instance with the UOW.</p>\n<hr />\n<p><em><strong>Update based on additional question details specific to this answer</strong></em></p>\n<blockquote>\n<p>The queue which holds this token has to be part of some queue manager.\nNow if we have a failover, that control queue will no longer be\naccessible. Which kinda means that that we need another control queue\nready in case of a failover.</p>\n</blockquote>\n<p>The token queue is as available or as unavailable as the application queue. Only one is needed.  If the application requires high availability (HA), then a Multi-Instance QMgr or a hardware high availability cluster should be used.  These share disk so the QMgr that comes up in the failover is the same one the application has been connected to, just at a different physical location.</p>\n<p>If the application needs <a href=\"https://en.wikipedia.org/wiki/Disaster_recovery\" rel=\"nofollow noreferrer\">DR</a>, it's possible to replicate the disk under the QMgr's logs and data directories to a DR site.  However, nothing should be listening on those instances while processing is going on in the primary data center.</p>\n<blockquote>\n<p>The listener instances should know that a failover has initiated so\nthat it can stop listening to the control queue during normal ops and\nswitch over to the secondary. I can't do this using the listener\ninstance alone.</p>\n</blockquote>\n<p>Why not? WebSphere MQ has had reconnectable clients for a really long time and the multi-instance features in v7.0.1 made reconnecting drop-dead simple.  As an administrator, your job is to make sure that no more than one instance of the application and token (not trigger!) queue are available.  During an outage, the client goes into retry without requiring any application code to drive it.  It finds whichever of the instances is up and connects.</p>\n<blockquote>\n<p>The actual producer which puts messages into the queue will have to\nnotify the listener instances to stop listening to the normal ops\ncontrol queue and switch over to the secondary.</p>\n</blockquote>\n<p>The question was about serialization with concurrent consumers.  This is about a design in which producers and consumers have to rendezvous at a common location. Different problem that happens to overlap this one only in that it is complicated somewhat by serialization. Ask a different question if you need to explore topologies.</p>\n<blockquote>\n<p>This token system is not really\nreactive right? It's more of periodic thing. So let's say we don't get\nany messages for a few hours. The listeners will still be constantly\nchecking the queue coz the token message keeps triggering one instance\nafter another.</p>\n</blockquote>\n<p>This does not use triggering. It uses a token (not trigger!) message the way a filesystem or database uses a lock in order to facilitate serialization. Whichever listener gets the token message then does a get with unlimited wait on the application queue.  The other listeners have a get with unlimited wait on the token (not trigger!) queue. Basically, they sit around idle until a message arrives.  Zero reconnections, zero polls, zero CPU cycles.  If you need to know they are alive, let them time out on the application queue once in a while.  This rolls back their UOW on the token queue which passes the token to another listener.</p>\n<blockquote>\n<p>Third would really be the question of inserting the token message.\nDuring first install or during a failback, we'll have that extra\nmanual step of manually inserting this token (since the token would be\nlost in failover sometimes).</p>\n</blockquote>\n<p>Why? Do you experience MQ losing persistent messages under syncpoint often? If so you are doing it wrong. ;-) In a situation with strict serialization requirements there can be only one active instance of a queue. If for some reason there are other instances of the application queue pre-defined other than through disk replication there would be one instance of the token (not trigger!) queue also predefined alongside it and one token (not trigger!) message waiting in each queue. Surely nobody would do such a thing in the face of strict message order requirements, but if they did those queues would surely be get-disabled while not in use.</p>\n<blockquote>\n<p>We can't really make one of the listener\ninstances do it since if a listener instance doesn't find the message\nit kinda means that some other listener instance has the token.</p>\n</blockquote>\n<p>Correct. The listeners <em>could</em> check queue depth, transactions, input handles, etc, but it is generally wise to avoid mixing application logic with control logic.</p>\n<blockquote>\n<p>So\nthis logic has to be separate. And if we actually put some meaningful\ninfo into this token message, it has to be a utility that has to be\ntriggered rather than an insertion through the UI.</p>\n</blockquote>\n<p>Why? Your coders handle structured data in application messages, right? If this is perceived to be significantly more difficult, someone's doing it wrong. ;-)  Write an instance of a formatted token (not trigger!) message to a queue, then offload that to a file. When you need to reinitialize the queue, use Q or QLoad to first clear the queue, then load the file into it. <strong>That</strong> utility would be the one to open the queue for exclusive use, check for depth, check for handles, etc. prior to performing its magic.  When I do this for consulting clients I typically define a service that initializes the queue on MQ startup <em>and</em> also provide a feature in the application GUI for the operations and support staff.  So long as the application managing the token (not trigger) queue gets it for exclusive access during these operations it really doesn't matter how it's done or by how many instances of the control application.</p>\n<p>As a rule I also use the structure in the message to send commands to the listeners.  There's the real token message, and then there's messages that command the application instances to do things. For example, it's really nice to have a non-transactional &quot;ping&quot; capability. I if I drop more ping messages on the token (not trigger!) queue in a single UOW than I have application instances listening, I am guaranteed to contact all of them. In this way I can detect zombies.  Depending on how much instrumentation is required the listeners can react to the ping by providing a status (uptime, messages processed, etc.) in the log, to the console, to an event queue, etc.</p>\n<blockquote>\n<p>I guess the first and third aren't really problems, but just extra\noverhead which wouldn't be needed if we went for a poller\nimplementation.</p>\n</blockquote>\n<p>That's good because this is all pretty standard stuff. The problem lies mainly with the requirements for serialization conflicting with those for HA/DR. What you are looking for is global transactional atomicity to implement a single logical queue across multiple physical locations.  IBM MQ has never attempted to provide that, although the <a href=\"https://en.wikipedia.org/wiki/IBM_WebSphere_Application_Server\" rel=\"nofollow noreferrer\">WebSphere Application Server</a> (WAS) Messaging Engine has.  The closest IBM MQ comes is to use two IBM MQ appliances with memory-to-memory replication of message and transaction data but that is good to only a few miles before light-speed latency begins to significantly impact throughput. It doesn't handle your DR needs.  In fact, <em>nothing</em> short of synchronous replication does that if you want a zero recovery point at the DR datacenter.</p>\n"}],"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2809,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33945224,"answer_count":3,"score":3,"last_activity_date":1694522715,"creation_date":1447181283,"question_id":33637289,"body_markdown":"I have a queue of messages which need sequential processing. Now this processing involves calling a Web service (which might be down sometimes) so I have to make the message retrieval transactional. As far as I know, when there&#39;s any exception midway, the whole transaction rolls back and the message isn&#39;t lost right?\r\n\r\nBut what&#39;s also needed is high availability (HA) on the message consumer, so I have two instances of the listener listening in on my queue. Now will the transaction ensure that a second message isn&#39;t retrieved by the other instance of the listener until the first one is completely done processing the first message? Or will I have to do something more to make sure that no message is sent out of the queue until the one before that is fully done processing.\r\n\r\nIf any additional configuration is needed, would it be in the MQ or on the listener?\r\n\r\n&lt;hr/&gt;\r\n\r\nI&#39;m using [WebSphere MQ][1] as the message broker and [Spring][2] integration for retrieving the messages.\r\n\r\nWith the token thing, the first concern would be high availability on the queue manager itself. The queue which holds this token has to be part of some queue manager. Now, if we have a failover, that controls the queue will no longer be accessible. Which kind of means that that we need another control queue ready in case of a failover.\r\n\r\nWe can&#39;t have listeners listening in on that DR control queue during normal operations though. (Let&#39;s say we have a mechanism to actually make sure that the &quot;data&quot; queue is perfectly replicated). The listener instances should know that a failover has been initiated, so that it can stop listening to the control queue during normal operations and switch over to the secondary. I can&#39;t do this using the listener instance alone. The actual producer which puts messages into the queue will have to notify the listener instances to stop listening to the normal operations control queue and switch over to the secondary.\r\n\r\nThis would be kind of tricky if there&#39;s any intermediate connection problem (and the normal operations queue manager isn&#39;t really down), but that&#39;s too much of a corner case.\r\n\r\nWith high availability of the control queue taken care of, we kind of have the same problem as the nonsharable setting during low load scenarios. Now we have occasional spikes in load, but there are slump periods (during the night and stuff). This token system is not really reactive, right? It&#39;s more of periodic thing. So let&#39;s say we don&#39;t get any messages for a few hours. The listeners will still be constantly checking the queue because the token message keeps triggering one instance after another. Which more or less makes it a poller, really. I might as well have multiple listener instances each polling at like different times of the hour, right? It&#39;s not really event driven per se.\r\n\r\nThird would really be the question of inserting the token message. During first install or during a failback, we&#39;ll have that extra manual step of manually inserting this token (since the token would be lost in failover sometimes). We can&#39;t really make one of the listener instances do it since if a listener instance doesn&#39;t find the message it kind of means that some other listener instance has the token. So this logic has to be separate. And if we actually put some meaningful information into this token message, it has to be a utility that has to be triggered rather than an insertion through the UI.\r\n\r\nI guess the first and third aren&#39;t really problems, but just extra overhead which wouldn&#39;t be needed if we went for a poller implementation. The second one is what&#39;s bothering me most.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IBM_MQ\r\n  [2]: https://en.wikipedia.org/wiki/Spring_Framework\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>I have a queue of messages which need sequential processing. Now this processing involves calling a Web service (which might be down sometimes) so I have to make the message retrieval transactional. As far as I know, when there's any exception midway, the whole transaction rolls back and the message isn't lost right?</p>\n<p>But what's also needed is high availability (HA) on the message consumer, so I have two instances of the listener listening in on my queue. Now will the transaction ensure that a second message isn't retrieved by the other instance of the listener until the first one is completely done processing the first message? Or will I have to do something more to make sure that no message is sent out of the queue until the one before that is fully done processing.</p>\n<p>If any additional configuration is needed, would it be in the MQ or on the listener?</p>\n<hr/>\n<p>I'm using <a href=\"https://en.wikipedia.org/wiki/IBM_MQ\" rel=\"nofollow noreferrer\">WebSphere MQ</a> as the message broker and <a href=\"https://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow noreferrer\">Spring</a> integration for retrieving the messages.</p>\n<p>With the token thing, the first concern would be high availability on the queue manager itself. The queue which holds this token has to be part of some queue manager. Now, if we have a failover, that controls the queue will no longer be accessible. Which kind of means that that we need another control queue ready in case of a failover.</p>\n<p>We can't have listeners listening in on that DR control queue during normal operations though. (Let's say we have a mechanism to actually make sure that the &quot;data&quot; queue is perfectly replicated). The listener instances should know that a failover has been initiated, so that it can stop listening to the control queue during normal operations and switch over to the secondary. I can't do this using the listener instance alone. The actual producer which puts messages into the queue will have to notify the listener instances to stop listening to the normal operations control queue and switch over to the secondary.</p>\n<p>This would be kind of tricky if there's any intermediate connection problem (and the normal operations queue manager isn't really down), but that's too much of a corner case.</p>\n<p>With high availability of the control queue taken care of, we kind of have the same problem as the nonsharable setting during low load scenarios. Now we have occasional spikes in load, but there are slump periods (during the night and stuff). This token system is not really reactive, right? It's more of periodic thing. So let's say we don't get any messages for a few hours. The listeners will still be constantly checking the queue because the token message keeps triggering one instance after another. Which more or less makes it a poller, really. I might as well have multiple listener instances each polling at like different times of the hour, right? It's not really event driven per se.</p>\n<p>Third would really be the question of inserting the token message. During first install or during a failback, we'll have that extra manual step of manually inserting this token (since the token would be lost in failover sometimes). We can't really make one of the listener instances do it since if a listener instance doesn't find the message it kind of means that some other listener instance has the token. So this logic has to be separate. And if we actually put some meaningful information into this token message, it has to be a utility that has to be triggered rather than an insertion through the UI.</p>\n<p>I guess the first and third aren't really problems, but just extra overhead which wouldn't be needed if we went for a poller implementation. The second one is what's bothering me most.</p>\n"},{"tags":["java","functional-interface"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694522306,"post_id":77089153,"comment_id":135899415,"body_markdown":"Are all the getters strings?  Your functional interface is not a bad solution, but it sounds like you should be writing `Function&lt;MyInterface, String&gt;` everywhere instead of `Function`.","body":"Are all the getters strings?  Your functional interface is not a bad solution, but it sounds like you should be writing <code>Function&lt;MyInterface, String&gt;</code> everywhere instead of <code>Function</code>."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694522605,"post_id":77089153,"comment_id":135899489,"body_markdown":"&quot;I also do not want to do Reflections&quot;. Good call. Never use reflection if you don&#39;t have to.","body":"&quot;I also do not want to do Reflections&quot;. Good call. Never use reflection if you don&#39;t have to."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694523522,"post_id":77089153,"comment_id":135899725,"body_markdown":"The real problem here is the raw `Function` types. Add the correct type parameters (`&lt;MyInterface, String&gt;`) and you should be fine.","body":"The real problem here is the raw <code>Function</code> types. Add the correct type parameters (<code>&lt;MyInterface, String&gt;</code>) and you should be fine."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694522520,"creation_date":1694522520,"answer_id":77089233,"question_id":77089153,"body_markdown":"Why put all the getters in a list? If you&#39;re hardcoding them anyway, might as well write out the checks:\r\n\r\n```\r\ncheck(MyInterface::getA, obj1, obj2)\r\ncheck(MyInterface::getB, obj1, obj2)\r\n\r\nvoid &lt;T&gt; check(Function&lt;MyInterface, T&gt; getter, MyInterface obj1, MyInterface obj2) {\r\n  if (getter.apply(obj1).equals(getter.apply(obj2)) {\r\n    // ...\r\n  }\r\n}\r\n```","title":"How to call a list of pre-defined interface methods on objects in Java?","body":"<p>Why put all the getters in a list? If you're hardcoding them anyway, might as well write out the checks:</p>\n<pre><code>check(MyInterface::getA, obj1, obj2)\ncheck(MyInterface::getB, obj1, obj2)\n\nvoid &lt;T&gt; check(Function&lt;MyInterface, T&gt; getter, MyInterface obj1, MyInterface obj2) {\n  if (getter.apply(obj1).equals(getter.apply(obj2)) {\n    // ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5991462,"reputation":13,"user_id":4707454,"display_name":"MathiS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77089233,"answer_count":1,"score":1,"last_activity_date":1694522520,"creation_date":1694521973,"question_id":77089153,"body_markdown":"Here&#39;s my problem. I have an interface with several getter methods and an implementation class.\r\n\r\n```\r\nClass MyInterface {\r\n    String getA();\r\n    String getB();\r\n    ...\r\n}\r\n\r\nClass MyClass implements MyInterface {\r\n}\r\n```\r\n\r\nI need to write some logic this to compare the values of the get methods between two objects of MyClass.\r\n\r\n```\r\nstatic List&lt;Function&gt; getters = List.of(MyInterface::getA, MyInterface::getB, ...); //this is hard-coded\r\n\r\nfor(Function getter : getters) {\r\n    if(getter.apply(obj1).equals(getter.apply(obj2))\r\n        //do something\r\n}\r\n```\r\n\r\nHowever I try, I cant seem to get the syntax correct, and satisfy the &quot;type&quot; Gods. Please help.\r\n\r\nWith a @FunctionalInterface, I was able to get the List defined, although as a member variable and not static, like so.\r\n\r\n```\r\n@FunctionalInterface\r\ninterface GetterFunction {\r\n    String get();\r\n}\r\n\r\nList&lt;GetterFunction&gt; allGetters = List.of(this::getA, this::getB, ...)\r\n```\r\n\r\nBut this seems ugly and feels like there is a better way.\r\n\r\nI also do not want to do Reflections.","title":"How to call a list of pre-defined interface methods on objects in Java?","body":"<p>Here's my problem. I have an interface with several getter methods and an implementation class.</p>\n<pre><code>Class MyInterface {\n    String getA();\n    String getB();\n    ...\n}\n\nClass MyClass implements MyInterface {\n}\n</code></pre>\n<p>I need to write some logic this to compare the values of the get methods between two objects of MyClass.</p>\n<pre><code>static List&lt;Function&gt; getters = List.of(MyInterface::getA, MyInterface::getB, ...); //this is hard-coded\n\nfor(Function getter : getters) {\n    if(getter.apply(obj1).equals(getter.apply(obj2))\n        //do something\n}\n</code></pre>\n<p>However I try, I cant seem to get the syntax correct, and satisfy the &quot;type&quot; Gods. Please help.</p>\n<p>With a @FunctionalInterface, I was able to get the List defined, although as a member variable and not static, like so.</p>\n<pre><code>@FunctionalInterface\ninterface GetterFunction {\n    String get();\n}\n\nList&lt;GetterFunction&gt; allGetters = List.of(this::getA, this::getB, ...)\n</code></pre>\n<p>But this seems ugly and feels like there is a better way.</p>\n<p>I also do not want to do Reflections.</p>\n"},{"tags":["java","primefaces","java-ee-8"],"comments":[{"owner":{"account_id":4166540,"reputation":2310,"user_id":3415398,"display_name":"tandraschko"},"score":0,"creation_date":1694587833,"post_id":77089215,"comment_id":135909167,"body_markdown":"It seems you miss the &quot;Update&quot; attribute on p:ajax.","body":"It seems you miss the &quot;Update&quot; attribute on p:ajax."},{"owner":{"account_id":4166540,"reputation":2310,"user_id":3415398,"display_name":"tandraschko"},"score":0,"creation_date":1694595810,"post_id":77089215,"comment_id":135910687,"body_markdown":"Also your inputText has no parent form","body":"Also your inputText has no parent form"}],"owner":{"account_id":9848356,"reputation":23,"user_id":7295149,"display_name":"audacity363"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694522432,"creation_date":1694522432,"question_id":77089215,"body_markdown":"I am currently trying to get familiar with Java Faces (or the hole Java EE universe in general) and wrote a small example with the PrimeFaces tree and dialog components.\r\nBasically I want to select a entry of the displayed tree and show the details of the underlying data object in a dialog. \r\n\r\nThe tree gets displayed, I can select an entry, the onSelect handler in my bean gets executed via a Ajax call and the dialog shows up. Unfortunately the inputText components, in the dialog, are empty although the connected object on the server side is valid and it&#39;s attributes are filled with the selected tree entry, which I have verified via a simple `System.out.println`. \r\n\r\nI would have expected that the roudtrip to the server, via the ajax call, sends the changed values (on the server side) back to the client, which apparently is not the case according to the network tab in the developer tools of the browser.\r\n\r\n\r\nTestClass.java:\r\n```\r\npublic class TestClass {\r\n\tprivate String name;\r\n\tprivate String otherAttribute;\r\n\t\r\n\tpublic TestClass(String name, String otherAttribute) {\r\n\t\tthis.name = name;\r\n\t\tthis.otherAttribute = otherAttribute;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String getOtherAttribute() {\r\n\t\treturn otherAttribute;\r\n\t}\r\n\r\n\tpublic void setOtherAttribute(String otherAttribute) {\r\n\t\tthis.otherAttribute = otherAttribute;\r\n\t}\r\n\t\r\n\tpublic String toString() {\r\n\t\treturn new String(&quot;TestClass(name=&quot; + this.name + &quot;, otherAttribute=&quot; + this.otherAttribute + &quot;)&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nTestService.java:\r\n```\r\n@Named\r\n@ApplicationScoped\r\npublic class TestService {\r\n\tpublic TreeNode&lt;TestClass&gt; createTestTree() {\r\n\t\tTreeNode&lt;TestClass&gt; root = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;root&quot;, null), null);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; entry1 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry1&quot;, &quot;attribute of entry1&quot;), root);\r\n\t\tTreeNode&lt;TestClass&gt; entry2 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry2&quot;, &quot;attribute of entry2&quot;), root);\r\n\t\tTreeNode&lt;TestClass&gt; entry3 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry3&quot;, &quot;attribute of entry3&quot;), root);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry11 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry11&quot;, &quot;subentry 1 attribute of entry1&quot;), entry1);\r\n\t\tTreeNode&lt;TestClass&gt; subentry12 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry12&quot;, &quot;subentry 2 attribute of entry1&quot;), entry1);\r\n\t\tTreeNode&lt;TestClass&gt; subentry13 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry13&quot;, &quot;subentry 3 attribute of entry1&quot;), entry1);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry21 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry21&quot;, &quot;subentry 1 attribute of entry2&quot;), entry2);\r\n\t\tTreeNode&lt;TestClass&gt; subentry22 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry22&quot;, &quot;subentry 2 attribute of entry2&quot;), entry2);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry31 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry31&quot;, &quot;subentry 1 attribute of entry3&quot;), entry3);\r\n\t\t\r\n\t\treturn root;\r\n\t}\r\n}\r\n```\r\n\r\nTestBean.java:\r\n```\r\n@Named(&quot;testBean&quot;)\r\n@ViewScoped\r\npublic class TestBean implements Serializable {\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = -4448740441931801702L;\r\n\r\n\t@Inject\r\n\tTestService treeService;\r\n\t\r\n\tprivate TreeNode&lt;TestClass&gt; root;\r\n\tprivate TestClass selectedNode;\r\n\t\r\n\t@PostConstruct\r\n\tprivate void init() {\r\n\t\tthis.root = this.treeService.createTestTree();\r\n\t}\r\n\r\n\tpublic void onTreeNodeSelect(NodeSelectEvent event) {\r\n\t\tSystem.out.println(&quot;NodeSelectEvent: &quot; + event);\r\n\t\tthis.selectedNode = (TestClass)event.getTreeNode().getData();\r\n\t\tSystem.out.println(&quot;Selected Node&quot; + this.selectedNode);\r\n\t\tSystem.out.println(&quot;Showing dialog&quot;);\r\n\t\tPrimeFaces.current().executeScript(&quot;PF(&#39;treeNodeEditor&#39;).show()&quot;);\r\n\t}\r\n\r\n\tpublic TreeNode&lt;TestClass&gt; getRoot() {\r\n\t\treturn root;\r\n\t}\r\n\r\n\tpublic void setRoot(TreeNode&lt;TestClass&gt; root) {\r\n\t\tthis.root = root;\r\n\t}\r\n\r\n\tpublic TestClass getSelectedNode() {\r\n\t\treturn selectedNode;\r\n\t}\r\n\r\n\tpublic void setSelectedNode(TestClass selectedNode) {\r\n\t\tthis.selectedNode = selectedNode;\r\n\t}\r\n}\r\n```\r\n\r\nindex.xhtml:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \t\t\txmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\r\n    \t\t\txmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\r\n    \t\t\txmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\r\n    \t\t\txmlns:c=&quot;http://xmlns.jcp.org/jsp/jstl/core&quot;\r\n    \t\t\txmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\r\n\t&lt;h:head&gt;\r\n\t\t&lt;title&gt;Tree test&lt;/title&gt;\r\n\t&lt;/h:head&gt;\r\n\t&lt;h:body&gt;\r\n\t\t&lt;div class=&quot;grid&quot;&gt;\r\n\t\t\t&lt;div class=&quot;col-12&quot;&gt;\r\n\t\t\t\t&lt;h:form&gt;\t\r\n\t\t\t\t\t&lt;p:tree value=&quot;#{testBean.root}&quot; var=&quot;node&quot; selectionMode=&quot;single&quot;&gt;\r\n\t\t\t\t\t\t&lt;p:ajax event=&quot;select&quot; listener=&quot;#{testBean.onTreeNodeSelect}&quot;&gt;&lt;/p:ajax&gt;\r\n\t\t\t\t\t\t&lt;p:treeNode&gt;\r\n\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{node.name}&quot;&gt;&lt;/h:outputText&gt;\r\n\t\t\t\t\t\t&lt;/p:treeNode&gt;\r\n\t\t\t\t\t&lt;/p:tree&gt;\r\n\t\t\t\t&lt;/h:form&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t&lt;p:dialog widgetVar=&quot;treeNodeEditor&quot;&gt;\r\n\t\t\t&lt;div class=&quot;grid&quot;&gt;\r\n\t\t\t\t&lt;div class=&quot;col-6&quot;&gt;\r\n\t\t\t\t\t&lt;p:outputLabel for=&quot;@next&quot; value=&quot;Name&quot;&gt;&lt;/p:outputLabel&gt;\r\n\t\t\t\t\t&lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.name}&quot;&gt;&lt;/p:inputText&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;div class=&quot;col-6&quot;&gt;\r\n\t\t\t\t\t&lt;p:outputLabel for=&quot;@next&quot; value=&quot;Attribute&quot;&gt;&lt;/p:outputLabel&gt;\r\n\t\t\t\t\t&lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.otherAttribute}&quot;&gt;&lt;/p:inputText&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/p:dialog&gt;\r\n\t&lt;/h:body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"Java Faces - Value expressions is empty","body":"<p>I am currently trying to get familiar with Java Faces (or the hole Java EE universe in general) and wrote a small example with the PrimeFaces tree and dialog components.\nBasically I want to select a entry of the displayed tree and show the details of the underlying data object in a dialog.</p>\n<p>The tree gets displayed, I can select an entry, the onSelect handler in my bean gets executed via a Ajax call and the dialog shows up. Unfortunately the inputText components, in the dialog, are empty although the connected object on the server side is valid and it's attributes are filled with the selected tree entry, which I have verified via a simple <code>System.out.println</code>.</p>\n<p>I would have expected that the roudtrip to the server, via the ajax call, sends the changed values (on the server side) back to the client, which apparently is not the case according to the network tab in the developer tools of the browser.</p>\n<p>TestClass.java:</p>\n<pre><code>public class TestClass {\n    private String name;\n    private String otherAttribute;\n    \n    public TestClass(String name, String otherAttribute) {\n        this.name = name;\n        this.otherAttribute = otherAttribute;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getOtherAttribute() {\n        return otherAttribute;\n    }\n\n    public void setOtherAttribute(String otherAttribute) {\n        this.otherAttribute = otherAttribute;\n    }\n    \n    public String toString() {\n        return new String(&quot;TestClass(name=&quot; + this.name + &quot;, otherAttribute=&quot; + this.otherAttribute + &quot;)&quot;);\n    }\n}\n</code></pre>\n<p>TestService.java:</p>\n<pre><code>@Named\n@ApplicationScoped\npublic class TestService {\n    public TreeNode&lt;TestClass&gt; createTestTree() {\n        TreeNode&lt;TestClass&gt; root = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;root&quot;, null), null);\n        \n        TreeNode&lt;TestClass&gt; entry1 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry1&quot;, &quot;attribute of entry1&quot;), root);\n        TreeNode&lt;TestClass&gt; entry2 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry2&quot;, &quot;attribute of entry2&quot;), root);\n        TreeNode&lt;TestClass&gt; entry3 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry3&quot;, &quot;attribute of entry3&quot;), root);\n        \n        TreeNode&lt;TestClass&gt; subentry11 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry11&quot;, &quot;subentry 1 attribute of entry1&quot;), entry1);\n        TreeNode&lt;TestClass&gt; subentry12 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry12&quot;, &quot;subentry 2 attribute of entry1&quot;), entry1);\n        TreeNode&lt;TestClass&gt; subentry13 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry13&quot;, &quot;subentry 3 attribute of entry1&quot;), entry1);\n        \n        TreeNode&lt;TestClass&gt; subentry21 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry21&quot;, &quot;subentry 1 attribute of entry2&quot;), entry2);\n        TreeNode&lt;TestClass&gt; subentry22 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry22&quot;, &quot;subentry 2 attribute of entry2&quot;), entry2);\n        \n        TreeNode&lt;TestClass&gt; subentry31 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry31&quot;, &quot;subentry 1 attribute of entry3&quot;), entry3);\n        \n        return root;\n    }\n}\n</code></pre>\n<p>TestBean.java:</p>\n<pre><code>@Named(&quot;testBean&quot;)\n@ViewScoped\npublic class TestBean implements Serializable {\n    \n    /**\n     * \n     */\n    private static final long serialVersionUID = -4448740441931801702L;\n\n    @Inject\n    TestService treeService;\n    \n    private TreeNode&lt;TestClass&gt; root;\n    private TestClass selectedNode;\n    \n    @PostConstruct\n    private void init() {\n        this.root = this.treeService.createTestTree();\n    }\n\n    public void onTreeNodeSelect(NodeSelectEvent event) {\n        System.out.println(&quot;NodeSelectEvent: &quot; + event);\n        this.selectedNode = (TestClass)event.getTreeNode().getData();\n        System.out.println(&quot;Selected Node&quot; + this.selectedNode);\n        System.out.println(&quot;Showing dialog&quot;);\n        PrimeFaces.current().executeScript(&quot;PF('treeNodeEditor').show()&quot;);\n    }\n\n    public TreeNode&lt;TestClass&gt; getRoot() {\n        return root;\n    }\n\n    public void setRoot(TreeNode&lt;TestClass&gt; root) {\n        this.root = root;\n    }\n\n    public TestClass getSelectedNode() {\n        return selectedNode;\n    }\n\n    public void setSelectedNode(TestClass selectedNode) {\n        this.selectedNode = selectedNode;\n    }\n}\n</code></pre>\n<p>index.xhtml:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n                xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\n                xmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\n                xmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\n                xmlns:c=&quot;http://xmlns.jcp.org/jsp/jstl/core&quot;\n                xmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\n    &lt;h:head&gt;\n        &lt;title&gt;Tree test&lt;/title&gt;\n    &lt;/h:head&gt;\n    &lt;h:body&gt;\n        &lt;div class=&quot;grid&quot;&gt;\n            &lt;div class=&quot;col-12&quot;&gt;\n                &lt;h:form&gt;    \n                    &lt;p:tree value=&quot;#{testBean.root}&quot; var=&quot;node&quot; selectionMode=&quot;single&quot;&gt;\n                        &lt;p:ajax event=&quot;select&quot; listener=&quot;#{testBean.onTreeNodeSelect}&quot;&gt;&lt;/p:ajax&gt;\n                        &lt;p:treeNode&gt;\n                            &lt;h:outputText value=&quot;#{node.name}&quot;&gt;&lt;/h:outputText&gt;\n                        &lt;/p:treeNode&gt;\n                    &lt;/p:tree&gt;\n                &lt;/h:form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;p:dialog widgetVar=&quot;treeNodeEditor&quot;&gt;\n            &lt;div class=&quot;grid&quot;&gt;\n                &lt;div class=&quot;col-6&quot;&gt;\n                    &lt;p:outputLabel for=&quot;@next&quot; value=&quot;Name&quot;&gt;&lt;/p:outputLabel&gt;\n                    &lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.name}&quot;&gt;&lt;/p:inputText&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;col-6&quot;&gt;\n                    &lt;p:outputLabel for=&quot;@next&quot; value=&quot;Attribute&quot;&gt;&lt;/p:outputLabel&gt;\n                    &lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.otherAttribute}&quot;&gt;&lt;/p:inputText&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/p:dialog&gt;\n    &lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","cloning"],"answers":[{"tags":[],"owner":{"account_id":9950285,"reputation":1410,"user_id":7363235,"display_name":"D M"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1492751187,"creation_date":1492751187,"answer_id":43534353,"question_id":43534163,"body_markdown":"To do a shallow copy, you just set one variable equal to another.  A shallow copy means that the original and the copy are really the same object.  If you have:\r\n\r\n    course2 = course1;\r\n    course2.name = &quot;math&quot;;\r\n\r\nthen `course1`&#39;s name will also change to &quot;math&quot;, because course1 and course2 are the same object.\r\n\r\nTo do a deep clone, you must copy everything in the object, instead of the object itself.  \r\n\r\n    course2 = new Course();\r\n    course2.name = course1.name;\r\n    //... \r\n    course2.name = &quot;math&quot;;\r\n\r\nIn this case, course1&#39;s name will not change, because `course2` itself was made as a new object, and was not set to `course1`.\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>To do a shallow copy, you just set one variable equal to another.  A shallow copy means that the original and the copy are really the same object.  If you have:</p>\n\n<pre><code>course2 = course1;\ncourse2.name = \"math\";\n</code></pre>\n\n<p>then <code>course1</code>'s name will also change to \"math\", because course1 and course2 are the same object.</p>\n\n<p>To do a deep clone, you must copy everything in the object, instead of the object itself.  </p>\n\n<pre><code>course2 = new Course();\ncourse2.name = course1.name;\n//... \ncourse2.name = \"math\";\n</code></pre>\n\n<p>In this case, course1's name will not change, because <code>course2</code> itself was made as a new object, and was not set to <code>course1</code>.</p>\n"},{"tags":[],"owner":{"account_id":4999380,"reputation":197,"user_id":4018868,"display_name":"puneet_0303"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1492751850,"creation_date":1492751850,"answer_id":43534459,"question_id":43534163,"body_markdown":"ShallowCopy:\r\nThe shallow copy of an object will have exact copy of all the fields of original object. If original object has any references to other objects as fields, then only references of those objects are copied into clone object, copy of those objects are not created.\r\n\r\nDeep Copy:\r\nDeep copy of an object will have exact copy of all the fields of original object just like shallow copy. But in additional, if original object has any references to other objects as fields, then copy of those objects are also created by calling clone() method on them\r\n\r\nAs the course entity does not have any object refrences therefore its cloning down using defalut clone method.\r\nStudent Entity as the refrences to Date , Course  , Address we need to override clone method.\r\nBelow is the sample code:-\r\n\r\n\tpublic static class Address implements Cloneable{\r\n\t    public String town = null;\r\n\t    public String street = null;\r\n\t    public int postCode = 0;\r\n\t    public int houseNumber = 0;\r\n\t    \r\n\t    public Address(String town , String street ,int postCode , int houseNumber){\r\n\t    \tthis.town = town;\r\n\t    \tthis.street = street;\r\n\t    \tthis.postCode = postCode;\r\n\t    \tthis.houseNumber = houseNumber;\r\n\t    }\r\n\t    public Address(){\r\n\t    }\r\n\t    \r\n\t    //Default version of clone() method. It creates shallow copy of an object.\r\n\t    \r\n\t    protected Object clone() throws CloneNotSupportedException\r\n\t    {\r\n\t        return super.clone();\r\n\t    }\r\n\t}\r\n\t\r\n\tpublic static class Course implements Cloneable{\r\n\t    public String number;\r\n\t    public String name;\r\n\r\n\t    public Course(){\r\n\t        number = null;\r\n\t        name = null;\r\n\t    }\r\n\t    \r\n\t    public Course(String number , String name){\r\n\t        this.number = number;\r\n\t        this.name = name;\r\n\t    }\r\n\t    \r\n\t  //Default version of clone() method. It creates shallow copy of an object.\r\n\t    \r\n\t    protected Object clone() throws CloneNotSupportedException\r\n\t    {\r\n\t        return super.clone();\r\n\t    }\r\n\t    \r\n\t} \r\n\t\r\n\t public static class Student implements Cloneable{\r\n\t        public Date dob;\r\n\t        public Course course = new Course();\r\n\t        public Address address = new Address();\r\n\t        \r\n\r\n\r\n\t        public Student(){\r\n\t            dob = null;\r\n\t            course.name = null;\r\n\t            course.number = null;\r\n\t            address.town = null;\r\n\t            address.street = null;\r\n\t            address.postCode = 0;\r\n\t            address.houseNumber = 0;\r\n\r\n\t        }\r\n\t        \r\n\t        public Student(Date dob , Course course , Address address){\r\n\t            this.dob = dob;\r\n\t            this.course = course;\r\n\t            this.address = address;\r\n\t        }\r\n\t        \r\n\t        protected Object clone() throws CloneNotSupportedException\r\n\t        {\r\n\t            Student student = (Student) super.clone();\r\n\t     \r\n\t            student.course = (Course) course.clone();\r\n\t            student.address = (Address) address.clone();\r\n\t            student.dob = (Date) dob.clone();\r\n\t     \r\n\t            return student;\r\n\t        }\r\n\t    }\r\n\r\n\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>ShallowCopy:\nThe shallow copy of an object will have exact copy of all the fields of original object. If original object has any references to other objects as fields, then only references of those objects are copied into clone object, copy of those objects are not created.</p>\n\n<p>Deep Copy:\nDeep copy of an object will have exact copy of all the fields of original object just like shallow copy. But in additional, if original object has any references to other objects as fields, then copy of those objects are also created by calling clone() method on them</p>\n\n<p>As the course entity does not have any object refrences therefore its cloning down using defalut clone method.\nStudent Entity as the refrences to Date , Course  , Address we need to override clone method.\nBelow is the sample code:-</p>\n\n<pre><code>public static class Address implements Cloneable{\n    public String town = null;\n    public String street = null;\n    public int postCode = 0;\n    public int houseNumber = 0;\n\n    public Address(String town , String street ,int postCode , int houseNumber){\n        this.town = town;\n        this.street = street;\n        this.postCode = postCode;\n        this.houseNumber = houseNumber;\n    }\n    public Address(){\n    }\n\n    //Default version of clone() method. It creates shallow copy of an object.\n\n    protected Object clone() throws CloneNotSupportedException\n    {\n        return super.clone();\n    }\n}\n\npublic static class Course implements Cloneable{\n    public String number;\n    public String name;\n\n    public Course(){\n        number = null;\n        name = null;\n    }\n\n    public Course(String number , String name){\n        this.number = number;\n        this.name = name;\n    }\n\n  //Default version of clone() method. It creates shallow copy of an object.\n\n    protected Object clone() throws CloneNotSupportedException\n    {\n        return super.clone();\n    }\n\n} \n\n public static class Student implements Cloneable{\n        public Date dob;\n        public Course course = new Course();\n        public Address address = new Address();\n\n\n\n        public Student(){\n            dob = null;\n            course.name = null;\n            course.number = null;\n            address.town = null;\n            address.street = null;\n            address.postCode = 0;\n            address.houseNumber = 0;\n\n        }\n\n        public Student(Date dob , Course course , Address address){\n            this.dob = dob;\n            this.course = course;\n            this.address = address;\n        }\n\n        protected Object clone() throws CloneNotSupportedException\n        {\n            Student student = (Student) super.clone();\n\n            student.course = (Course) course.clone();\n            student.address = (Address) address.clone();\n            student.dob = (Date) dob.clone();\n\n            return student;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2418909,"reputation":2174,"user_id":2112382,"accept_rate":67,"display_name":"vijayraj34"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492752456,"creation_date":1492752456,"answer_id":43534568,"question_id":43534163,"body_markdown":"In **ShallowCopy** only reference value is copied, so if you make any changes to it will directly affect the original copy of that object. &lt;br&gt;&lt;br&gt;\nBut in **DeepCopy** you have to create a new instance of that object and initialize it with the values of the original object and return the newly initialized object.\n\nYou have to do this inside the clone method. So that when clone is called deepcopy is performed.","title":"How to shallow clone and deep clone in java?","body":"<p>In <strong>ShallowCopy</strong> only reference value is copied, so if you make any changes to it will directly affect the original copy of that object. <br><br>\nBut in <strong>DeepCopy</strong> you have to create a new instance of that object and initialize it with the values of the original object and return the newly initialized object.</p>\n\n<p>You have to do this inside the clone method. So that when clone is called deepcopy is performed.</p>\n"},{"tags":[],"owner":{"account_id":29315054,"reputation":21,"user_id":22460001,"display_name":"rizkovs1149"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694522122,"creation_date":1694522122,"answer_id":77089170,"question_id":43534163,"body_markdown":"Take a look to [sugar-cubes-cloner](https://github.com/sugar-cubes/sugar-cubes-cloner) library. It is very fast and well documented. It also allows the developer to configure the cloning process very flexible on the level of classes, fields and objects.\r\n\r\nIn your case:\r\n```java\r\nCloner cloner = Cloners.builder()\r\n  .shallow(Course.class)\r\n  .build();\r\nStudent clone = cloner.clone(student);\r\n```","title":"How to shallow clone and deep clone in java?","body":"<p>Take a look to <a href=\"https://github.com/sugar-cubes/sugar-cubes-cloner\" rel=\"nofollow noreferrer\">sugar-cubes-cloner</a> library. It is very fast and well documented. It also allows the developer to configure the cloning process very flexible on the level of classes, fields and objects.</p>\n<p>In your case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cloner cloner = Cloners.builder()\n  .shallow(Course.class)\n  .build();\nStudent clone = cloner.clone(student);\n</code></pre>\n"}],"owner":{"account_id":7988931,"reputation":811,"user_id":6027397,"accept_rate":61,"display_name":"oneman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3431,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1694522122,"creation_date":1492750200,"question_id":43534163,"body_markdown":"I have three classes inside a package `pack1`. The three classes are `classA`  `classB` and `classC`.\r\n\r\n`classA`\r\n\r\n    public class Address {\r\n    \tpublic String town = null;\r\n    \tpublic String street = null;\r\n    \tpublic int postCode = 0;\r\n    \tpublic int houseNumber = 0;\r\n    }\r\n\r\n\r\n\r\n`classB`\r\n\r\n    public class Course {\r\n    \tpublic String number;\r\n    \tpublic String name;\r\n    \t\r\n    \tpublic Course(){\r\n    \t\tnumber = null;\r\n    \t\tname = null;\r\n    \t}\r\n\r\n`classC`\r\n\r\n    public class Student {\r\n    \tpublic Date dob;\r\n    \tpublic Course course = new Course();\r\n    \tpublic Address address = new Address();\r\n    \t\r\n    \t\r\n    \tpublic Student(){\r\n    \t\tdob = null;\r\n    \t\tcourse.name = null;\r\n    \t\tcourse.number = null;\r\n    \t\taddress.town = null;\r\n    \t\taddress.street = null;\r\n    \t\taddress.postCode = 0;\r\n    \t\taddress.houseNumber = 0;\r\n            course.name = null;\r\n            course.number = null;\r\n    \t\t\r\n    \t}\r\n\r\nI&#39;m wanting to know how I deep clone address and dob and the shallow clone course? I don&#39;t know how to do the combos of cloning yet\r\n\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>I have three classes inside a package <code>pack1</code>. The three classes are <code>classA</code>  <code>classB</code> and <code>classC</code>.</p>\n\n<p><code>classA</code></p>\n\n<pre><code>public class Address {\n    public String town = null;\n    public String street = null;\n    public int postCode = 0;\n    public int houseNumber = 0;\n}\n</code></pre>\n\n<p><code>classB</code></p>\n\n<pre><code>public class Course {\n    public String number;\n    public String name;\n\n    public Course(){\n        number = null;\n        name = null;\n    }\n</code></pre>\n\n<p><code>classC</code></p>\n\n<pre><code>public class Student {\n    public Date dob;\n    public Course course = new Course();\n    public Address address = new Address();\n\n\n    public Student(){\n        dob = null;\n        course.name = null;\n        course.number = null;\n        address.town = null;\n        address.street = null;\n        address.postCode = 0;\n        address.houseNumber = 0;\n        course.name = null;\n        course.number = null;\n\n    }\n</code></pre>\n\n<p>I'm wanting to know how I deep clone address and dob and the shallow clone course? I don't know how to do the combos of cloning yet</p>\n"},{"tags":["java","spring-boot","integration-testing","spring-test-mvc"],"answers":[{"tags":[],"owner":{"account_id":6505000,"reputation":1823,"user_id":5034289,"display_name":"Ilya Novoseltsev"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1511281489,"creation_date":1511266238,"answer_id":47412829,"question_id":47411267,"body_markdown":"The topic you linked does offer a good solution.\r\n\r\nTo create a `SyncTaskExecutor` for tests, make sure you actually have a test configuration class for spring context. Please, refer to Spring docs for that:\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\r\n\r\nIn this configuration class add a new bean:\r\n\r\n    @Bean\r\n    @Primary\r\n    public TaskExecutor taskExecutor() {\r\n        return new SyncTaskExecutor();\r\n    }\r\n\r\nThat should do it!\r\n\r\nTake care not to create this bean in your live config!","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>The topic you linked does offer a good solution.</p>\n\n<p>To create a <code>SyncTaskExecutor</code> for tests, make sure you actually have a test configuration class for spring context. Please, refer to Spring docs for that:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html</a></p>\n\n<p>In this configuration class add a new bean:</p>\n\n<pre><code>@Bean\n@Primary\npublic TaskExecutor taskExecutor() {\n    return new SyncTaskExecutor();\n}\n</code></pre>\n\n<p>That should do it!</p>\n\n<p>Take care not to create this bean in your live config!</p>\n"},{"tags":[],"owner":{"account_id":4969836,"reputation":50,"user_id":3998017,"display_name":"Felipe Moraes"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1549978783,"creation_date":1549978783,"answer_id":54651407,"question_id":47411267,"body_markdown":"You can also create two methods in your class, one that has the `@Async` annotation in it, and a second one that will have all the logic that you need to test without this annotation and make the first method call the second. Then in your tests you call the second method that will have `package-private` visibility.\r\n\r\nEx:\r\n\r\n```\r\n@Async\r\npublic void methodAsync() {\r\n    this.method();\r\n}\r\n\r\nvoid method() {\r\n   // Your business logic here!\r\n}\r\n```","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can also create two methods in your class, one that has the <code>@Async</code> annotation in it, and a second one that will have all the logic that you need to test without this annotation and make the first method call the second. Then in your tests you call the second method that will have <code>package-private</code> visibility.</p>\n\n<p>Ex:</p>\n\n<pre><code>@Async\npublic void methodAsync() {\n    this.method();\n}\n\nvoid method() {\n   // Your business logic here!\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":163820,"reputation":11607,"user_id":386201,"accept_rate":75,"display_name":"Stuck"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1590443724,"creation_date":1590443724,"answer_id":62011372,"question_id":47411267,"body_markdown":"We ended up using a prop `yourcompany.someExecutor.async` that we default to `true` (so it does **not** show up in the `application.yml`) and in a test we set it to `false` using [`TestPropertySource`][1]. Based on that prop we either initialize a `SyncTaskExecutor` or some async version (e.g. `ThreadPoolTaskExecutor`).\r\n\r\nNote that this also enables to use multiple props so it is easy to disable a specific executor per prop. In our case we have several async executers depending on the context.\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\r\n@TestPropertySource(properties = {\r\n        &quot;yourcompany.someExecutor.async=false&quot;,\r\n})\r\npublic class SomeIntegrationTest {\r\n  // ... tests requiring async disabled\r\n}\r\n```\r\n\r\n\r\n```\r\n@Configuration\r\npublic class SomeConfig {\r\n    // ...\r\n    @Value(&quot;${yourcompany.someExecutor.async:true}&quot;)\r\n    private boolean asyncEnabled;\r\n\r\n    @Bean(&quot;someExecutor&quot;) // specific executor\r\n    public Executor algoExecutor() {\r\n        if (!asyncEnabled) {\r\n            return new SyncTaskExecutor();\r\n        }\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(THREAD_COUNT);\r\n        executor.setMaxPoolSize(THREAD_COUNT);\r\n        executor.setQueueCapacity(QUEUE_CAPACITY);\r\n        executor.setThreadNamePrefix(&quot;Some-&quot;);\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>We ended up using a prop <code>yourcompany.someExecutor.async</code> that we default to <code>true</code> (so it does <strong>not</strong> show up in the <code>application.yml</code>) and in a test we set it to <code>false</code> using <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html\" rel=\"nofollow noreferrer\"><code>TestPropertySource</code></a>. Based on that prop we either initialize a <code>SyncTaskExecutor</code> or some async version (e.g. <code>ThreadPoolTaskExecutor</code>).</p>\n\n<p>Note that this also enables to use multiple props so it is easy to disable a specific executor per prop. In our case we have several async executers depending on the context.</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\n@TestPropertySource(properties = {\n        \"yourcompany.someExecutor.async=false\",\n})\npublic class SomeIntegrationTest {\n  // ... tests requiring async disabled\n}\n</code></pre>\n\n<pre><code>@Configuration\npublic class SomeConfig {\n    // ...\n    @Value(\"${yourcompany.someExecutor.async:true}\")\n    private boolean asyncEnabled;\n\n    @Bean(\"someExecutor\") // specific executor\n    public Executor algoExecutor() {\n        if (!asyncEnabled) {\n            return new SyncTaskExecutor();\n        }\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(THREAD_COUNT);\n        executor.setMaxPoolSize(THREAD_COUNT);\n        executor.setQueueCapacity(QUEUE_CAPACITY);\n        executor.setThreadNamePrefix(\"Some-\");\n        executor.initialize();\n        return executor;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1968038,"reputation":317,"user_id":1767739,"display_name":"Oleg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641461812,"creation_date":1641461812,"answer_id":70605066,"question_id":47411267,"body_markdown":"You can overwrite the main task executor by creating the following class in test folder: \r\n\r\n    @TestConfiguration\r\n    public class TestAsyncConfig {\r\n        // create this bean if you have a custom executor you want to overwrite\r\n        @Bean(name = &quot;xxxxxxx&quot;) \r\n        public Executor xxxxxxx() {\r\n            return new SyncTaskExecutor();\r\n        }\r\n    \r\n        // this will overwrite the default executor\r\n        @Bean\r\n        public Executor taskExecutor() { \r\n            return new SyncTaskExecutor();\r\n        }\r\n    }\r\n\r\nThen add the following to annotations on your integration test:\r\n\r\n    @ContextConfiguration(classes = TestAsyncConfig.class)\r\n\r\n","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can overwrite the main task executor by creating the following class in test folder:</p>\n<pre><code>@TestConfiguration\npublic class TestAsyncConfig {\n    // create this bean if you have a custom executor you want to overwrite\n    @Bean(name = &quot;xxxxxxx&quot;) \n    public Executor xxxxxxx() {\n        return new SyncTaskExecutor();\n    }\n\n    // this will overwrite the default executor\n    @Bean\n    public Executor taskExecutor() { \n        return new SyncTaskExecutor();\n    }\n}\n</code></pre>\n<p>Then add the following to annotations on your integration test:</p>\n<pre><code>@ContextConfiguration(classes = TestAsyncConfig.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1921,"reputation":185672,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1644496035,"creation_date":1644496035,"answer_id":71065098,"question_id":47411267,"body_markdown":"If a unique profile name is used when the tests are run (e.g. &quot;test&quot;), then the easiest way to disable async when running tests is with\r\n\r\n```java\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Profile;\r\nimport org.springframework.scheduling.annotation.EnableAsync;\r\n\r\n\r\n@Profile(&quot;!test&quot;)\r\n@Configuration\r\n@EnableAsync\r\npublic class AsyncConfiguration {\r\n\r\n}\r\n```\r\n\r\nIn my case I had to add the following to `src/test/resources/application.yml` to ensure tests are run under a profile named &quot;test&quot;\r\n\r\n```yml\r\nspring:\r\n  profiles:\r\n    active: test\r\n```","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>If a unique profile name is used when the tests are run (e.g. &quot;test&quot;), then the easiest way to disable async when running tests is with</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.scheduling.annotation.EnableAsync;\n\n\n@Profile(&quot;!test&quot;)\n@Configuration\n@EnableAsync\npublic class AsyncConfiguration {\n\n}\n</code></pre>\n<p>In my case I had to add the following to <code>src/test/resources/application.yml</code> to ensure tests are run under a profile named &quot;test&quot;</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  profiles:\n    active: test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451083,"reputation":1157,"user_id":846769,"accept_rate":50,"display_name":"i000174"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694522026,"creation_date":1694517586,"answer_id":77088625,"question_id":47411267,"body_markdown":"You can achieve it by defining a new configuration file (create a new java file DisableAsyncConfiguration in the package folder of your test) with the following content.\r\n\r\n    @Configuration\r\n    @Profile(&quot;disable-async&quot;)\r\n    public class DisableAsyncConfiguration {\r\n    \r\n        @Bean\r\n        Executor asyncExecutor() {\r\n            return new SyncTaskExecutor();\r\n        }\r\n    \r\n    }\r\n\r\nThen use it in your test class\r\n\r\n    @SpringBootTest\r\n    @@ActiveProfiles(profiles = {&quot;test&quot;, &quot;disable-async&quot;})\r\n    public class MyTestThatUsesAsyncAnnotatedBeans {\r\n       ...\r\n    }\r\n\r\n\r\nAs a result the methods annotated with @Async will be executed synchronously in your test only. \r\n\r\nExplanation: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html\r\n","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can achieve it by defining a new configuration file (create a new java file DisableAsyncConfiguration in the package folder of your test) with the following content.</p>\n<pre><code>@Configuration\n@Profile(&quot;disable-async&quot;)\npublic class DisableAsyncConfiguration {\n\n    @Bean\n    Executor asyncExecutor() {\n        return new SyncTaskExecutor();\n    }\n\n}\n</code></pre>\n<p>Then use it in your test class</p>\n<pre><code>@SpringBootTest\n@@ActiveProfiles(profiles = {&quot;test&quot;, &quot;disable-async&quot;})\npublic class MyTestThatUsesAsyncAnnotatedBeans {\n   ...\n}\n</code></pre>\n<p>As a result the methods annotated with @Async will be executed synchronously in your test only.</p>\n<p>Explanation: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html</a></p>\n"}],"owner":{"account_id":3174880,"reputation":3187,"user_id":2683000,"accept_rate":38,"display_name":"psv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15795,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":6,"score":24,"last_activity_date":1694522026,"creation_date":1511261470,"question_id":47411267,"body_markdown":"I would like to disable `@EnableAsync` when I run my integration tests.\r\n\r\nI tried to override the configuration file which is annotated with `@EnableAsync` with a class with the same name in my test package but it does not work.\r\n\r\nIn this topic: https://stackoverflow.com/questions/42134750/is-it-possible-to-disable-springs-async-during-integration-test\r\n\r\nI have seen that:\r\n\r\n&gt; You can... Create a test configuration or simply override the task executor with a SyncTaskExecutor\r\n\r\nbut I do not understand how to do.\r\n\r\nAny advice ? Thanks","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>I would like to disable <code>@EnableAsync</code> when I run my integration tests.</p>\n\n<p>I tried to override the configuration file which is annotated with <code>@EnableAsync</code> with a class with the same name in my test package but it does not work.</p>\n\n<p>In this topic: <a href=\"https://stackoverflow.com/questions/42134750/is-it-possible-to-disable-springs-async-during-integration-test\">Is it possible to disable Spring&#39;s @Async during integration test?</a></p>\n\n<p>I have seen that:</p>\n\n<blockquote>\n  <p>You can... Create a test configuration or simply override the task executor with a SyncTaskExecutor</p>\n</blockquote>\n\n<p>but I do not understand how to do.</p>\n\n<p>Any advice ? Thanks</p>\n"},{"tags":["java","gradle","cucumber","testng","allure"],"answers":[{"tags":[],"owner":{"account_id":11303221,"reputation":1,"user_id":8288567,"display_name":"Natalia Josse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694521963,"creation_date":1694521963,"answer_id":77089151,"question_id":75811867,"body_markdown":"Maybe because of a typo in &quot;mathedStatuses&quot;? You should use:\r\n\r\n```\r\n[ \r\n   { \r\n     &quot;name&quot;: &quot;List of all tests&quot;, \r\n     &quot;matchedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \r\n   } \r\n] \r\n```","title":"Allure report: list of tests without grouping","body":"<p>Maybe because of a typo in &quot;mathedStatuses&quot;? You should use:</p>\n<pre><code>[ \n   { \n     &quot;name&quot;: &quot;List of all tests&quot;, \n     &quot;matchedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \n   } \n] \n</code></pre>\n"}],"owner":{"account_id":2024644,"reputation":1,"user_id":9268136,"display_name":"SergT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694521963,"creation_date":1679485690,"question_id":75811867,"body_markdown":"I need to have a list of all tests in Allure report without grouping by error message, suites, packages, etc. Like this:\r\n\r\n[nice to see](https://i.stack.imgur.com/pYeDC.png)\r\n\r\nTried to use categories.json in allure-results folder:\r\n\r\n\r\n```\r\n[ \r\n   { \r\n     &quot;name&quot;: &quot;List of all tests&quot;, \r\n     &quot;mathedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \r\n   } \r\n] \r\n```\r\n\r\nbut Allure groups tests by error:\r\n\r\n[Allure&#39;s grouping](https://i.stack.imgur.com/RaUQe.png)\r\n\r\nEnv: java11, gradle, testNg, Allure 2.20.1\r\n\r\nThanks in advance!\r\n\r\nps: chatGpt is NOT helpful at all))","title":"Allure report: list of tests without grouping","body":"<p>I need to have a list of all tests in Allure report without grouping by error message, suites, packages, etc. Like this:</p>\n<p><a href=\"https://i.stack.imgur.com/pYeDC.png\" rel=\"nofollow noreferrer\">nice to see</a></p>\n<p>Tried to use categories.json in allure-results folder:</p>\n<pre><code>[ \n   { \n     &quot;name&quot;: &quot;List of all tests&quot;, \n     &quot;mathedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \n   } \n] \n</code></pre>\n<p>but Allure groups tests by error:</p>\n<p><a href=\"https://i.stack.imgur.com/RaUQe.png\" rel=\"nofollow noreferrer\">Allure's grouping</a></p>\n<p>Env: java11, gradle, testNg, Allure 2.20.1</p>\n<p>Thanks in advance!</p>\n<p>ps: chatGpt is NOT helpful at all))</p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":29422720,"reputation":1,"user_id":22544108,"display_name":"kavinilavu sekar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694521703,"creation_date":1694521703,"question_id":77089111,"body_markdown":"Help me with no such window exception, target window is already closed.i have to switch to new popup window which closed automatically, again I have open new window, by clicking button in main window and I m not able to switch into the main window . What I have to do\r\n\r\nI need to open second window. By clicking on button in main window ","title":"My new window closed automatically, and it&#39;s not switching to main window getting no such window exception target window is closed in selenium java","body":"<p>Help me with no such window exception, target window is already closed.i have to switch to new popup window which closed automatically, again I have open new window, by clicking button in main window and I m not able to switch into the main window . What I have to do</p>\n<p>I need to open second window. By clicking on button in main window</p>\n"},{"tags":["java","sockets","jvm","jstack"],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694521554,"creation_date":1440496860,"answer_id":32201012,"question_id":32198820,"body_markdown":"`/tmp/.java_pid` socket is used by HotSpot [Dynamic Attach](http://openjdk.java.net/groups/hotspot/docs/Serviceability.html#battach) mechanism. It is the way how `jstack` and other utilities communicate with JVM.\r\n\r\nYou cannot change the path - it is hardcoded in JVM source code. Neither you can force JVM to regenerate it, because the Attach Listener is initialized only once in HotSpot lifetime.\r\n\r\n`jstack -F` works in a [quite different way](https://stackoverflow.com/a/30682087/3448419).\r\n\r\nIn order to check whether Java process works fine, I suggest using [JMX remote](http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html).\r\n\r\n**UPDATE:** as a result of [JDK-8225690](https://bugs.openjdk.org/browse/JDK-8225690) fix, starting from JDK 14 / 11.0.13 / 8u332, JVM automatically re-creates .java_pid attach socket if has been deleted.","title":"why jstack not working when the /tmp/.java_pid&lt;num&gt; socket file has been deleted","body":"<p><code>/tmp/.java_pid</code> socket is used by HotSpot <a href=\"http://openjdk.java.net/groups/hotspot/docs/Serviceability.html#battach\" rel=\"nofollow noreferrer\">Dynamic Attach</a> mechanism. It is the way how <code>jstack</code> and other utilities communicate with JVM.</p>\n<p>You cannot change the path - it is hardcoded in JVM source code. Neither you can force JVM to regenerate it, because the Attach Listener is initialized only once in HotSpot lifetime.</p>\n<p><code>jstack -F</code> works in a <a href=\"https://stackoverflow.com/a/30682087/3448419\">quite different way</a>.</p>\n<p>In order to check whether Java process works fine, I suggest using <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html\" rel=\"nofollow noreferrer\">JMX remote</a>.</p>\n<p><strong>UPDATE:</strong> as a result of <a href=\"https://bugs.openjdk.org/browse/JDK-8225690\" rel=\"nofollow noreferrer\">JDK-8225690</a> fix, starting from JDK 14 / 11.0.13 / 8u332, JVM automatically re-creates .java_pid attach socket if has been deleted.</p>\n"}],"owner":{"account_id":6843932,"reputation":35,"user_id":5263329,"display_name":"dongdong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3924,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32201012,"answer_count":1,"score":1,"last_activity_date":1694521554,"creation_date":1440490420,"question_id":32198820,"body_markdown":"Usually, I use jstack to check if the java process is working normally. While i found, when the `/tmp/java_pid&lt;num&gt;` (the num is pid of java process) socket file has been deleted, jstack will not work. like this:\r\n\r\n    [xxx]$ jstack -l 5509\r\n\r\n    5509: Unable to open socket file: target process not responding or HotSpot VM not loaded\r\n    The -F option can be used when the target process is not responding\r\n\r\n(PS. I didn&#39;t want to use the &quot;-F&quot;, there may be other problems)\r\n\r\nIs there any way to change the socket file location(not /tmp)? or to generate the socket file again when found not existed? Now what i did is to restart the java process again, a very bad solution.\r\n\r\nThanks!\r\n","title":"why jstack not working when the /tmp/.java_pid&lt;num&gt; socket file has been deleted","body":"<p>Usually, I use jstack to check if the java process is working normally. While i found, when the <code>/tmp/java_pid&lt;num&gt;</code> (the num is pid of java process) socket file has been deleted, jstack will not work. like this:</p>\n\n<pre><code>[xxx]$ jstack -l 5509\n\n5509: Unable to open socket file: target process not responding or HotSpot VM not loaded\nThe -F option can be used when the target process is not responding\n</code></pre>\n\n<p>(PS. I didn't want to use the \"-F\", there may be other problems)</p>\n\n<p>Is there any way to change the socket file location(not /tmp)? or to generate the socket file again when found not existed? Now what i did is to restart the java process again, a very bad solution.</p>\n\n<p>Thanks!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9804,"page":188,"page_size":100}
