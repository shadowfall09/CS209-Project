{"items":[{"tags":["java","optaplanner"],"comments":[{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1621425239,"post_id":67582578,"comment_id":119490670,"body_markdown":"Interesting proposal to enhance the CS API. We&#39;ll have to think about it.","body":"Interesting proposal to enhance the CS API. We&#39;ll have to think about it."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1621425967,"post_id":67582578,"comment_id":119491011,"body_markdown":"This definitely isn&#39;t possible at the moment, but it is definitely interesting to consider. In the meantime, I&#39;d try adding a shadow variable on `Team` which tells you if there is or is not a plan for that team - this way, you can achieve your goal with a single constraint, I think.","body":"This definitely isn&#39;t possible at the moment, but it is definitely interesting to consider. In the meantime, I&#39;d try adding a shadow variable on <code>Team</code> which tells you if there is or is not a plan for that team - this way, you can achieve your goal with a single constraint, I think."},{"owner":{"account_id":21636195,"reputation":21,"user_id":15959087,"display_name":"Bram"},"score":0,"creation_date":1621513503,"post_id":67582578,"comment_id":119522130,"body_markdown":"I&#39;m sorry, I don&#39;t fully understand your suggestion.\nDo you propose to keep a reference to the Planning of a team in the Team class?\n\nIn a real world (where a team could be planned on multiple days, in multiple buildings, for example), this would introduce a complex datastructure, I fear.","body":"I&#39;m sorry, I don&#39;t fully understand your suggestion. Do you propose to keep a reference to the Planning of a team in the Team class?  In a real world (where a team could be planned on multiple days, in multiple buildings, for example), this would introduce a complex datastructure, I fear."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1621852867,"post_id":67582578,"comment_id":119610685,"body_markdown":"See https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#shadowVariable . It is possible that this would require introduction of some new data structures in your domain, but in the absence of stream concat, it could be an acceptable solution.","body":"See <a href=\"https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#shadowVariable\" rel=\"nofollow noreferrer\">docs.optaplanner.org/latest/optaplanner-docs/html_single/&hellip;</a> . It is possible that this would require introduction of some new data structures in your domain, but in the absence of stream concat, it could be an acceptable solution."},{"owner":{"account_id":1504788,"reputation":302,"user_id":1408443,"accept_rate":50,"display_name":"elk-tamer"},"score":0,"creation_date":1669041959,"post_id":67582578,"comment_id":131546637,"body_markdown":"@Bram Did you ever figure out how using a shadow variable would achieve the goal you wanted to get with concatenation? I&#39;m having the exact same issue.","body":"@Bram Did you ever figure out how using a shadow variable would achieve the goal you wanted to get with concatenation? I&#39;m having the exact same issue."}],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697606979,"creation_date":1697606979,"answer_id":77313677,"question_id":67582578,"body_markdown":"Starting with [Timefold][1] Solver 1.3.0, there is now a way to concat streams. It&#39;s called `concat` and it is available on all cardinalities of constraint streams.\r\n\r\n\r\n  [1]: https://timefold.ai/blog/2023/optaplanner-fork","title":"Concat optaplanner constraint streams","body":"<p>Starting with <a href=\"https://timefold.ai/blog/2023/optaplanner-fork\" rel=\"nofollow noreferrer\">Timefold</a> Solver 1.3.0, there is now a way to concat streams. It's called <code>concat</code> and it is available on all cardinalities of constraint streams.</p>\n"}],"owner":{"account_id":21636195,"reputation":21,"user_id":15959087,"display_name":"Bram"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697606979,"creation_date":1621326528,"question_id":67582578,"body_markdown":"Is it possible to concatenate two constraint streams of the same cardinality and with the same types?\r\n\r\nFor instance, I have a constraint stream containing all planned teams:\r\n\r\n```\r\nBiConstraintStream &lt;Team, Long&gt; plannedTeams(ConstraintFactory constraintFactory) {\r\n    return constraintFactory.from(Team.class)\r\n        .ifExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\r\n        .groupBy(team -&gt; team, Team::getCountPeople)\r\n}\r\n```\r\nand a stream containing all non planned teams.\r\n```\r\nBiConstraintStream &lt;Team, Long&gt; nonPlannedTeams(ConstraintFactory constraintFactory) {\r\n    return constraintFactory.from(Team.class)\r\n        .ifNotExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\r\n        .groupBy(team -&gt; team, team -&gt; team.getCountPeople()/2)\r\n}\r\n```\r\nNow I want to set a constraint on the total count, by summing the count of both planned teams and unplanned teams, e.g.,\r\n\r\n```\r\nConstraint constraintOnCount(ConstraintFactory constraintFactory) {\r\n    return plannedTeams(constraintFactory).concat(nonPlannedTeams(constraintFactory))\r\n        .groupBy(sum((team, count)-&gt;count))\r\n        .filter(count -&gt; count &gt; 5)\r\n        .penalize(&quot;too many people&quot;, HardSoftScore.ONE_HARD, count -&gt; count - 5)\r\n\r\n}\r\n```\r\nIs there a way to do this?\r\n\r\n","title":"Concat optaplanner constraint streams","body":"<p>Is it possible to concatenate two constraint streams of the same cardinality and with the same types?</p>\n<p>For instance, I have a constraint stream containing all planned teams:</p>\n<pre><code>BiConstraintStream &lt;Team, Long&gt; plannedTeams(ConstraintFactory constraintFactory) {\n    return constraintFactory.from(Team.class)\n        .ifExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\n        .groupBy(team -&gt; team, Team::getCountPeople)\n}\n</code></pre>\n<p>and a stream containing all non planned teams.</p>\n<pre><code>BiConstraintStream &lt;Team, Long&gt; nonPlannedTeams(ConstraintFactory constraintFactory) {\n    return constraintFactory.from(Team.class)\n        .ifNotExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\n        .groupBy(team -&gt; team, team -&gt; team.getCountPeople()/2)\n}\n</code></pre>\n<p>Now I want to set a constraint on the total count, by summing the count of both planned teams and unplanned teams, e.g.,</p>\n<pre><code>Constraint constraintOnCount(ConstraintFactory constraintFactory) {\n    return plannedTeams(constraintFactory).concat(nonPlannedTeams(constraintFactory))\n        .groupBy(sum((team, count)-&gt;count))\n        .filter(count -&gt; count &gt; 5)\n        .penalize(&quot;too many people&quot;, HardSoftScore.ONE_HARD, count -&gt; count - 5)\n\n}\n</code></pre>\n<p>Is there a way to do this?</p>\n"},{"tags":["java","collections","arrays","set"],"answers":[{"tags":[],"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1319610023,"creation_date":1276799248,"answer_id":3064446,"question_id":3064423,"body_markdown":"After you do `Arrays.asList(array)` you can execute `Set set = new HashSet(list);`\r\n\r\nHere is a sample method, you can write:\r\n\r\n    public &lt;T&gt; Set&lt;T&gt; GetSetFromArray(T[] array) {\r\n        return new HashSet&lt;T&gt;(Arrays.asList(array));\r\n    }","title":"How to convert an Array to a Set in Java","body":"<p>After you do <code>Arrays.asList(array)</code> you can execute <code>Set set = new HashSet(list);</code></p>\n\n<p>Here is a sample method, you can write:</p>\n\n<pre><code>public &lt;T&gt; Set&lt;T&gt; GetSetFromArray(T[] array) {\n    return new HashSet&lt;T&gt;(Arrays.asList(array));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15988,"reputation":872868,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"down_vote_count":8,"up_vote_count":1406,"is_accepted":true,"score":1398,"last_activity_date":1697606700,"creation_date":1276799257,"answer_id":3064447,"question_id":3064423,"body_markdown":"Like this:\r\n\r\n    Set&lt;T&gt; mySet = new HashSet&lt;&gt;(Arrays.asList(someArray));\r\n\r\nIn Java 9+, if unmodifiable set is ok:\r\n\r\n    Set&lt;T&gt; mySet = Set.of(someArray);\r\n\r\nIn Java 10+, the generic type parameter can be inferred from the arrays component type:\r\n\r\n    var mySet = Set.of(someArray);\r\n\r\n**Be careful** \r\n\r\n&gt; Set.of throws IllegalArgumentException - if there are any duplicate\r\n&gt; elements in someArray.\r\nSee more details: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)\r\n\r\nIf you want an unmodifiable set and you might have duplicate elements in the array, do the following:\r\n\r\n    var mySet = Set.copyOf(Arrays.asList(array));\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Like this:</p>\n<pre><code>Set&lt;T&gt; mySet = new HashSet&lt;&gt;(Arrays.asList(someArray));\n</code></pre>\n<p>In Java 9+, if unmodifiable set is ok:</p>\n<pre><code>Set&lt;T&gt; mySet = Set.of(someArray);\n</code></pre>\n<p>In Java 10+, the generic type parameter can be inferred from the arrays component type:</p>\n<pre><code>var mySet = Set.of(someArray);\n</code></pre>\n<p><strong>Be careful</strong></p>\n<blockquote>\n<p>Set.of throws IllegalArgumentException - if there are any duplicate\nelements in someArray.\nSee more details: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)</a></p>\n</blockquote>\n<p>If you want an unmodifiable set and you might have duplicate elements in the array, do the following:</p>\n<pre><code>var mySet = Set.copyOf(Arrays.asList(array));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26356,"reputation":68584,"user_id":68507,"accept_rate":94,"display_name":"Ben S"},"down_vote_count":7,"up_vote_count":6,"is_accepted":false,"score":-1,"last_activity_date":1444864164,"creation_date":1276799324,"answer_id":3064461,"question_id":3064423,"body_markdown":"`new HashSet&lt;Object&gt;(Arrays.asList(Object[] a));`\r\n\r\nBut I think this would be more efficient:\r\n\r\n    final Set s = new HashSet&lt;Object&gt;();    \r\n    for (Object o : a) { s.add(o); }         \r\n\r\n\r\n\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p><code>new HashSet&lt;Object&gt;(Arrays.asList(Object[] a));</code></p>\n\n<p>But I think this would be more efficient:</p>\n\n<pre><code>final Set s = new HashSet&lt;Object&gt;();    \nfor (Object o : a) { s.add(o); }         \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":1,"up_vote_count":128,"is_accepted":false,"score":127,"last_activity_date":1276799763,"creation_date":1276799763,"answer_id":3064502,"question_id":3064423,"body_markdown":"With [Guava][1] you can do:\r\n\r\n    T[] array = ...\r\n    Set&lt;T&gt; set = Sets.newHashSet(array);\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"How to convert an Array to a Set in Java","body":"<p>With <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> you can do:</p>\n\n<pre><code>T[] array = ...\nSet&lt;T&gt; set = Sets.newHashSet(array);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5688,"reputation":4427,"user_id":9304,"accept_rate":82,"display_name":"JavadocMD"},"down_vote_count":3,"up_vote_count":249,"is_accepted":false,"score":246,"last_activity_date":1460590793,"creation_date":1276799870,"answer_id":3064516,"question_id":3064423,"body_markdown":"    Set&lt;T&gt; mySet = new HashSet&lt;T&gt;();\r\n    Collections.addAll(mySet, myArray);\r\n\r\nThat&#39;s [Collections.addAll(java.util.Collection, T...)][1] from JDK 6.\r\n\r\nAdditionally: *what if our array is full of primitives?*\r\n\r\nFor JDK &lt; 8, I would just write the obvious `for` loop to do the wrap and add-to-set in one pass.\r\n\r\nFor JDK &gt;= 8, an attractive option is something like:\r\n\r\n    Arrays.stream(intArray).boxed().collect(Collectors.toSet());\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#addAll%28java.util.Collection,%20T...%29","title":"How to convert an Array to a Set in Java","body":"<pre><code>Set&lt;T&gt; mySet = new HashSet&lt;T&gt;();\nCollections.addAll(mySet, myArray);\n</code></pre>\n\n<p>That's <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#addAll%28java.util.Collection,%20T...%29\" rel=\"noreferrer\">Collections.addAll(java.util.Collection, T...)</a> from JDK 6.</p>\n\n<p>Additionally: <em>what if our array is full of primitives?</em></p>\n\n<p>For JDK &lt; 8, I would just write the obvious <code>for</code> loop to do the wrap and add-to-set in one pass.</p>\n\n<p>For JDK >= 8, an attractive option is something like:</p>\n\n<pre><code>Arrays.stream(intArray).boxed().collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":318324,"reputation":699,"user_id":969741,"accept_rate":0,"display_name":"Pierre-Olivier Pignon"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1320399037,"creation_date":1320399037,"answer_id":8007187,"question_id":3064423,"body_markdown":"Quickly : you can do :\r\n\r\n    // Fixed-size list\r\n    List list = Arrays.asList(array);\r\n\r\n    // Growable list\r\n    list = new LinkedList(Arrays.asList(array));\r\n  \r\n    // Duplicate elements are discarded\r\n    Set set = new HashSet(Arrays.asList(array));\r\n\r\nand to reverse\r\n\r\n    // Create an array containing the elements in a list\r\n    Object[] objectArray = list.toArray();\r\n    MyClass[] array = (MyClass[])list.toArray(new MyClass[list.size()]);\r\n\r\n    // Create an array containing the elements in a set\r\n    objectArray = set.toArray();\r\n    array = (MyClass[])set.toArray(new MyClass[set.size()]);\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Quickly : you can do :</p>\n\n<pre><code>// Fixed-size list\nList list = Arrays.asList(array);\n\n// Growable list\nlist = new LinkedList(Arrays.asList(array));\n\n// Duplicate elements are discarded\nSet set = new HashSet(Arrays.asList(array));\n</code></pre>\n\n<p>and to reverse</p>\n\n<pre><code>// Create an array containing the elements in a list\nObject[] objectArray = list.toArray();\nMyClass[] array = (MyClass[])list.toArray(new MyClass[list.size()]);\n\n// Create an array containing the elements in a set\nobjectArray = set.toArray();\narray = (MyClass[])set.toArray(new MyClass[set.size()]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1148131,"reputation":9,"user_id":1130444,"display_name":"mnagni"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325697201,"creation_date":1325697201,"answer_id":8730970,"question_id":3064423,"body_markdown":"Sometime using some standard libraries helps a lot. Try to look at the [Apache Commons Collections][1]. In this case your problems is simply transformed to something like this\r\n\r\n    String[] keys = {&quot;blah&quot;, &quot;blahblah&quot;}\r\n    Set&lt;String&gt; myEmptySet = new HashSet&lt;String&gt;();\r\n    CollectionUtils.addAll(pythonKeywordSet, keys);\r\n\r\n\r\nAnd here is the [CollectionsUtils javadoc][2]\r\n\r\n\r\n  [1]: http://commons.apache.org/collections/\r\n  [2]: http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html","title":"How to convert an Array to a Set in Java","body":"<p>Sometime using some standard libraries helps a lot. Try to look at the <a href=\"http://commons.apache.org/collections/\" rel=\"nofollow\">Apache Commons Collections</a>. In this case your problems is simply transformed to something like this</p>\n\n<pre><code>String[] keys = {\"blah\", \"blahblah\"}\nSet&lt;String&gt; myEmptySet = new HashSet&lt;String&gt;();\nCollectionUtils.addAll(pythonKeywordSet, keys);\n</code></pre>\n\n<p>And here is the <a href=\"http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html\" rel=\"nofollow\">CollectionsUtils javadoc</a></p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1487647950,"creation_date":1355871869,"answer_id":13942949,"question_id":3064423,"body_markdown":"In [Eclipse Collections][1], the following will work:\r\n\r\n    Set&lt;Integer&gt; set1 = Sets.mutable.of(1, 2, 3, 4, 5);\r\n    Set&lt;Integer&gt; set2 = Sets.mutable.of(new Integer[]{1, 2, 3, 4, 5});\r\n    MutableSet&lt;Integer&gt; mutableSet = Sets.mutable.of(1, 2, 3, 4, 5);\r\n    ImmutableSet&lt;Integer&gt; immutableSet = Sets.immutable.of(1, 2, 3, 4, 5);\r\n\r\n    Set&lt;Integer&gt; unmodifiableSet = Sets.mutable.of(1, 2, 3, 4, 5).asUnmodifiable();\r\n    Set&lt;Integer&gt; synchronizedSet = Sets.mutable.of(1, 2, 3, 4, 5).asSynchronized();\r\n    ImmutableSet&lt;Integer&gt; immutableSet = Sets.mutable.of(1, 2, 3, 4, 5).toImmutable();\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/","title":"How to convert an Array to a Set in Java","body":"<p>In <a href=\"https://www.eclipse.org/collections/\" rel=\"noreferrer\">Eclipse Collections</a>, the following will work:</p>\n\n<pre><code>Set&lt;Integer&gt; set1 = Sets.mutable.of(1, 2, 3, 4, 5);\nSet&lt;Integer&gt; set2 = Sets.mutable.of(new Integer[]{1, 2, 3, 4, 5});\nMutableSet&lt;Integer&gt; mutableSet = Sets.mutable.of(1, 2, 3, 4, 5);\nImmutableSet&lt;Integer&gt; immutableSet = Sets.immutable.of(1, 2, 3, 4, 5);\n\nSet&lt;Integer&gt; unmodifiableSet = Sets.mutable.of(1, 2, 3, 4, 5).asUnmodifiable();\nSet&lt;Integer&gt; synchronizedSet = Sets.mutable.of(1, 2, 3, 4, 5).asSynchronized();\nImmutableSet&lt;Integer&gt; immutableSet = Sets.mutable.of(1, 2, 3, 4, 5).toImmutable();\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":5267841,"reputation":781,"user_id":4207141,"display_name":"max"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1449765198,"creation_date":1422893000,"answer_id":28281754,"question_id":3064423,"body_markdown":"Java 8:\r\n\r\n    String[] strArray = {&quot;eins&quot;, &quot;zwei&quot;, &quot;drei&quot;, &quot;vier&quot;};\r\n\r\n    Set&lt;String&gt; strSet = Arrays.stream(strArray).collect(Collectors.toSet());\r\n    System.out.println(strSet);\r\n    // [eins, vier, zwei, drei]","title":"How to convert an Array to a Set in Java","body":"<p>Java 8:</p>\n\n<pre><code>String[] strArray = {\"eins\", \"zwei\", \"drei\", \"vier\"};\n\nSet&lt;String&gt; strSet = Arrays.stream(strArray).collect(Collectors.toSet());\nSystem.out.println(strSet);\n// [eins, vier, zwei, drei]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1547699588,"creation_date":1435124323,"answer_id":31018411,"question_id":3064423,"body_markdown":"Java 8\r\n------\r\n\r\nWe have the option of using `Stream` as well. We can get stream in various ways:\r\n \r\n\r\n    Set&lt;String&gt; set = Stream.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;).collect(Collectors.toCollection(HashSet::new));\r\n    System.out.println(set);\r\n    \r\n    String[] stringArray = {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;};\r\n    Set&lt;String&gt; strSet1 = Arrays.stream(stringArray).collect(Collectors.toSet());\r\n    System.out.println(strSet1);\r\n    \r\n    // if you need HashSet then use below option.\r\n    Set&lt;String&gt; strSet2 = Arrays.stream(stringArray).collect(Collectors.toCollection(HashSet::new));\r\n    System.out.println(strSet2);\r\n\r\nThe source code of `Collectors.toSet()` shows that elements are added one by one to a `HashSet` but specification does not guarantee it will be a `HashSet`.\r\n\r\n&gt; &quot;There are no guarantees on the type, mutability, serializability, or\r\n&gt; thread-safety of the Set returned.&quot;\r\n\r\nSo it is better to use the later option. The output is:\r\n`\r\n[A, B, C, D]\r\n[A, B, C, D]\r\n[A, B, C, D]`\r\n\r\nImmutable Set (Java 9)\r\n-------------\r\n\r\nJava 9 introduced `Set.of` static factory method which returns immutable set for the provided elements or the array. \r\n\r\n    @SafeVarargs\r\n    static &lt;E&gt; Set&lt;E&gt; of​(E... elements)\r\n\r\nCheck [Immutable Set Static Factory Methods][1] for details.\r\nImmutable Set (Java 10)\r\n-----------------------\r\n\r\nWe can also get an immutable set in two ways:\r\n\r\n 1. `Set.copyOf(Arrays.asList(array))`\r\n 2. `Arrays.stream(array).collect(Collectors.toUnmodifiableList());`\r\n\r\nThe method `Collectors.toUnmodifiableList()` internally makes use of `Set.of` introduced in Java 9. Also check this [answer][2] of mine for more.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/Set.html#immutable\r\n  [2]: https://stackoverflow.com/a/52536126/1216775","title":"How to convert an Array to a Set in Java","body":"<h2>Java 8</h2>\n\n<p>We have the option of using <code>Stream</code> as well. We can get stream in various ways:</p>\n\n<pre><code>Set&lt;String&gt; set = Stream.of(\"A\", \"B\", \"C\", \"D\").collect(Collectors.toCollection(HashSet::new));\nSystem.out.println(set);\n\nString[] stringArray = {\"A\", \"B\", \"C\", \"D\"};\nSet&lt;String&gt; strSet1 = Arrays.stream(stringArray).collect(Collectors.toSet());\nSystem.out.println(strSet1);\n\n// if you need HashSet then use below option.\nSet&lt;String&gt; strSet2 = Arrays.stream(stringArray).collect(Collectors.toCollection(HashSet::new));\nSystem.out.println(strSet2);\n</code></pre>\n\n<p>The source code of <code>Collectors.toSet()</code> shows that elements are added one by one to a <code>HashSet</code> but specification does not guarantee it will be a <code>HashSet</code>.</p>\n\n<blockquote>\n  <p>\"There are no guarantees on the type, mutability, serializability, or\n  thread-safety of the Set returned.\"</p>\n</blockquote>\n\n<p>So it is better to use the later option. The output is:\n<code>\n[A, B, C, D]\n[A, B, C, D]\n[A, B, C, D]</code></p>\n\n<h2>Immutable Set (Java 9)</h2>\n\n<p>Java 9 introduced <code>Set.of</code> static factory method which returns immutable set for the provided elements or the array. </p>\n\n<pre><code>@SafeVarargs\nstatic &lt;E&gt; Set&lt;E&gt; of​(E... elements)\n</code></pre>\n\n<p>Check <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Set.html#immutable\" rel=\"noreferrer\">Immutable Set Static Factory Methods</a> for details.</p>\n\n<h2>Immutable Set (Java 10)</h2>\n\n<p>We can also get an immutable set in two ways:</p>\n\n<ol>\n<li><code>Set.copyOf(Arrays.asList(array))</code></li>\n<li><code>Arrays.stream(array).collect(Collectors.toUnmodifiableList());</code></li>\n</ol>\n\n<p>The method <code>Collectors.toUnmodifiableList()</code> internally makes use of <code>Set.of</code> introduced in Java 9. Also check this <a href=\"https://stackoverflow.com/a/52536126/1216775\">answer</a> of mine for more.</p>\n"},{"tags":[],"owner":{"account_id":5919028,"reputation":623,"user_id":4656851,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1504644514,"creation_date":1442389488,"answer_id":32602608,"question_id":3064423,"body_markdown":"Varargs will work too!\r\n\r\n    Stream.of(T... values).collect(Collectors.toSet());\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Varargs will work too!</p>\n\n<pre><code>Stream.of(T... values).collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7493295,"reputation":17,"user_id":5694280,"display_name":"Satyendra Jaiswal"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1452602313,"creation_date":1452601204,"answer_id":34743530,"question_id":3064423,"body_markdown":" \r\n\r\n    Set&lt;T&gt; b = new HashSet&lt;&gt;(Arrays.asList(requiredArray));","title":"How to convert an Array to a Set in Java","body":"<pre><code>Set&lt;T&gt; b = new HashSet&lt;&gt;(Arrays.asList(requiredArray));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1461881439,"creation_date":1461881439,"answer_id":36926362,"question_id":3064423,"body_markdown":"I&#39;ve written the below from the advice above - steal it... it&#39;s nice!\r\n\r\n    /**\r\n     * Handy conversion to set\r\n     */\r\n    public class SetUtil {\r\n\t    /**\r\n\t     * Convert some items to a set\r\n\t     * @param items items\r\n\t     * @param &lt;T&gt; works on any type\r\n\t     * @return a hash set of the input items\r\n\t     */\r\n\t    public static &lt;T&gt; Set&lt;T&gt; asSet(T ... items) {\r\n\t\t    return Stream.of(items).collect(Collectors.toSet());\r\n\t    }\r\n    }\r\n","title":"How to convert an Array to a Set in Java","body":"<p>I've written the below from the advice above - steal it... it's nice!</p>\n\n<pre><code>/**\n * Handy conversion to set\n */\npublic class SetUtil {\n    /**\n     * Convert some items to a set\n     * @param items items\n     * @param &lt;T&gt; works on any type\n     * @return a hash set of the input items\n     */\n    public static &lt;T&gt; Set&lt;T&gt; asSet(T ... items) {\n        return Stream.of(items).collect(Collectors.toSet());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":544312,"reputation":507,"user_id":913717,"accept_rate":80,"display_name":"Bruce Zu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576351856,"creation_date":1472416486,"answer_id":39195539,"question_id":3064423,"body_markdown":"```java\r\nprivate Map&lt;Integer, Set&lt;Integer&gt;&gt; nobreaks = new HashMap();\r\nnobreaks.put(1, new HashSet(Arrays.asList(new int[]{2, 4, 5})));\r\nSystem.out.println(&quot;expected size is 3: &quot; +nobreaks.get(1).size());\r\n```\r\nthe output is\r\n```\r\nexpected size is 3: 1\r\n```\r\nchange it to \r\n```java\r\nnobreaks.put(1, new HashSet(Arrays.asList( 2, 4, 5 )));\r\n```\r\nthe output is\r\n```\r\nexpected size is 3: 3\r\n```","title":"How to convert an Array to a Set in Java","body":"<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;Integer, Set&lt;Integer&gt;&gt; nobreaks = new HashMap();\nnobreaks.put(1, new HashSet(Arrays.asList(new int[]{2, 4, 5})));\nSystem.out.println(\"expected size is 3: \" +nobreaks.get(1).size());\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>expected size is 3: 1\n</code></pre>\n\n<p>change it to </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>nobreaks.put(1, new HashSet(Arrays.asList( 2, 4, 5 )));\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>expected size is 3: 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534932713,"creation_date":1523739551,"answer_id":49836150,"question_id":3064423,"body_markdown":"In **Java 10**:\r\n\r\n    String[] strs = {&quot;A&quot;, &quot;B&quot;};\r\n    Set&lt;String&gt; set = Set.copyOf(Arrays.asList(strs));\r\n\r\n[`Set.copyOf`][1] returns an unmodifiable `Set` containing the elements of the given `Collection`.\r\n\r\n&amp;nbsp;The given `Collection` must not be `null`, and it must not contain any `null` elements.\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/util/Set.html#copyOf(java.util.Collection)","title":"How to convert an Array to a Set in Java","body":"<p>In <strong>Java 10</strong>:</p>\n\n<pre><code>String[] strs = {\"A\", \"B\"};\nSet&lt;String&gt; set = Set.copyOf(Arrays.asList(strs));\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Set.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>Set.copyOf</code></a> returns an unmodifiable <code>Set</code> containing the elements of the given <code>Collection</code>.</p>\n\n<p>&nbsp;The given <code>Collection</code> must not be <code>null</code>, and it must not contain any <code>null</code> elements.</p>\n"},{"tags":[],"owner":{"account_id":7396121,"reputation":89,"user_id":5628004,"display_name":"Olexandra Dmytrenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526938005,"creation_date":1526938005,"answer_id":50456827,"question_id":3064423,"body_markdown":"Use `CollectionUtils` or `ArrayUtils` from `stanford-postagger-3.0.jar` \r\n\r\n    import static edu.stanford.nlp.util.ArrayUtils.asSet;\r\n    or \r\n    import static edu.stanford.nlp.util.CollectionUtils.asSet;\r\n\r\n      ...\r\n    String [] array = {&quot;1&quot;, &quot;q&quot;};\r\n    Set&lt;String&gt; trackIds = asSet(array);\r\n        ","title":"How to convert an Array to a Set in Java","body":"<p>Use <code>CollectionUtils</code> or <code>ArrayUtils</code> from <code>stanford-postagger-3.0.jar</code> </p>\n\n<pre><code>import static edu.stanford.nlp.util.ArrayUtils.asSet;\nor \nimport static edu.stanford.nlp.util.CollectionUtils.asSet;\n\n  ...\nString [] array = {\"1\", \"q\"};\nSet&lt;String&gt; trackIds = asSet(array);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5730328,"reputation":865,"user_id":4526072,"accept_rate":64,"display_name":"Kennard"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1570479210,"creation_date":1545008887,"answer_id":53807880,"question_id":3064423,"body_markdown":"There has been a lot of great answers already, but most of them won&#39;t work with array of primitives (like `int[]`, `long[]`, `char[]`, `byte[]`, etc.)\r\n\r\nIn Java 8 and above, you can box the array with:\r\n\r\n    Integer[] boxedArr = Arrays.stream(arr).boxed().toArray(Integer[]::new);\r\n\r\n\r\nThen convert to set using stream:\r\n\r\n    Stream.of(boxedArr).collect(Collectors.toSet());\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>There has been a lot of great answers already, but most of them won't work with array of primitives (like <code>int[]</code>, <code>long[]</code>, <code>char[]</code>, <code>byte[]</code>, etc.)</p>\n\n<p>In Java 8 and above, you can box the array with:</p>\n\n<pre><code>Integer[] boxedArr = Arrays.stream(arr).boxed().toArray(Integer[]::new);\n</code></pre>\n\n<p>Then convert to set using stream:</p>\n\n<pre><code>Stream.of(boxedArr).collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":946995,"reputation":43606,"user_id":974045,"display_name":"Gibolt"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1588381134,"creation_date":1580838315,"answer_id":60062896,"question_id":3064423,"body_markdown":"For anyone solving for Android:\r\n\r\n## Kotlin Collections Solution\r\n\r\nThe asterisk `*` is the `spread` operator. It applies all elements in a collection individually, each passed in order to a `vararg` method parameter. It is equivalent to:\r\n\r\n    val myArray = arrayOf(&quot;data&quot;, &quot;foo&quot;)\r\n    val mySet = setOf(*myArray)\r\n\r\n    // Equivalent to\r\n    val mySet = setOf(&quot;data&quot;, &quot;foo&quot;)\r\n\r\n    // Multiple spreads [&quot;data&quot;, &quot;foo&quot;, &quot;bar&quot;, &quot;data&quot;, &quot;foo&quot;]\r\n    val mySet = setOf(*myArray, &quot;bar&quot;, *myArray)\r\n\r\n\r\nPassing no parameters `setOf()` results in an empty set.\r\n\r\nIn addition to `setOf`, you can also use any of these for a specific hash type:\r\n\r\n    hashSetOf()\r\n    linkedSetOf()\r\n    mutableSetOf()\r\n    sortableSetOf()\r\n\r\nThis is how to define the collection item type explicitly.\r\n\r\n    setOf&lt;String&gt;()\r\n    hashSetOf&lt;MyClass&gt;()","title":"How to convert an Array to a Set in Java","body":"<p>For anyone solving for Android:</p>\n\n<h2>Kotlin Collections Solution</h2>\n\n<p>The asterisk <code>*</code> is the <code>spread</code> operator. It applies all elements in a collection individually, each passed in order to a <code>vararg</code> method parameter. It is equivalent to:</p>\n\n<pre><code>val myArray = arrayOf(\"data\", \"foo\")\nval mySet = setOf(*myArray)\n\n// Equivalent to\nval mySet = setOf(\"data\", \"foo\")\n\n// Multiple spreads [\"data\", \"foo\", \"bar\", \"data\", \"foo\"]\nval mySet = setOf(*myArray, \"bar\", *myArray)\n</code></pre>\n\n<p>Passing no parameters <code>setOf()</code> results in an empty set.</p>\n\n<p>In addition to <code>setOf</code>, you can also use any of these for a specific hash type:</p>\n\n<pre><code>hashSetOf()\nlinkedSetOf()\nmutableSetOf()\nsortableSetOf()\n</code></pre>\n\n<p>This is how to define the collection item type explicitly.</p>\n\n<pre><code>setOf&lt;String&gt;()\nhashSetOf&lt;MyClass&gt;()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13125278,"reputation":1011,"user_id":9481500,"display_name":"Stypox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614869600,"creation_date":1614869600,"answer_id":66477510,"question_id":3064423,"body_markdown":"If you need to build an immutable set with only one element inside it, you can use `Collections.singleton(...)`. Here is an example:\r\n\r\n```java\r\nSet&lt;String&gt; mySet = Collections.singleton(&quot;Have a good day :-)&quot;);\r\n```\r\n\r\n&lt;sub&gt;&lt;sub&gt;This doesn&#39;t answer the original question but might be useful to someone (it would have been at least to me). If you think this answer does not fit just tell me and I will delete it.&lt;/sub&gt;&lt;/sub&gt;","title":"How to convert an Array to a Set in Java","body":"<p>If you need to build an immutable set with only one element inside it, you can use <code>Collections.singleton(...)</code>. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; mySet = Collections.singleton(&quot;Have a good day :-)&quot;);\n</code></pre>\n<p><sub><sub>This doesn't answer the original question but might be useful to someone (it would have been at least to me). If you think this answer does not fit just tell me and I will delete it.</sub></sub></p>\n"}],"owner":{"display_name":"user130076"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":772090,"favorite_count":0,"down_vote_count":1,"up_vote_count":831,"accepted_answer_id":3064447,"answer_count":19,"score":830,"last_activity_date":1697606700,"creation_date":1276799036,"question_id":3064423,"body_markdown":"I would like to convert an array to a Set in Java. There are some obvious ways of doing this (i.e. with a loop) but I would like something a bit neater, something like:\r\n\r\n    java.util.Arrays.asList(Object[] a);\r\n\r\nAny ideas?\r\n\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>I would like to convert an array to a Set in Java. There are some obvious ways of doing this (i.e. with a loop) but I would like something a bit neater, something like:</p>\n\n<pre><code>java.util.Arrays.asList(Object[] a);\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","cloudevents"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697290647,"post_id":77252316,"comment_id":136262833,"body_markdown":"Why use REST instead of a message queue such Kafka or NATS?","body":"Why use REST instead of a message queue such Kafka or NATS?"},{"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"score":0,"creation_date":1697605999,"post_id":77252316,"comment_id":136299264,"body_markdown":"The URL on which I want to send my cloud Event belongs to KNative API, which will perform certain processing based on cloud-event data.","body":"The URL on which I want to send my cloud Event belongs to KNative API, which will perform certain processing based on cloud-event data."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697641467,"post_id":77252316,"comment_id":136306083,"body_markdown":"KNative also supports message queues","body":"KNative also supports message queues"}],"answers":[{"tags":[],"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697606133,"creation_date":1696910393,"answer_id":77262855,"question_id":77252316,"body_markdown":"Earlier I was trying to send a CloudEvent object directly which I guess not supported by spring boot (I also rovided all necessary dependencies in pom.xml) but it was not working. But cloud event is only a json data with some specific field like specVersion, type etc. in it&#39;s header, So i created a json structure where all these fields (ce-specVersion, ce-type etc) I put in header and then send this using restTemplate and it worked like below -\r\n```\r\n    import org.springframework.http.HttpEntity;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.MediaType;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.set(&quot;ce-specversion&quot;, &quot;1.0&quot;);\r\n    // Set Remaining fields\r\n\r\n    byte[] bytesData = \r\n    JSON_DATA_IN_FORM_OF_STRING.getBytes(StandardCharsets.UTF_8);\r\n    HttpEntity&lt;byte[]&gt; httpEntity = new HttpEntity&lt;&gt;(bytesData, headers);\r\n\r\n    restTemplate.postForLocation(sinkUrl, httpEntity);\r\n```\r\n\r\nBut remember one thing if you are sending any field in header then it should contain &#39;ce-&#39; as prefix (Apart from the Data that we are sending in HttpEntity) like in my case there was one key &#39;partitionKey&#39; so I send it as &#39;ce-partitionKey&#39;.","title":"Cloud event transfer over an URL in spring boot","body":"<p>Earlier I was trying to send a CloudEvent object directly which I guess not supported by spring boot (I also rovided all necessary dependencies in pom.xml) but it was not working. But cloud event is only a json data with some specific field like specVersion, type etc. in it's header, So i created a json structure where all these fields (ce-specVersion, ce-type etc) I put in header and then send this using restTemplate and it worked like below -</p>\n<pre><code>    import org.springframework.http.HttpEntity;\n    import org.springframework.http.HttpHeaders;\n    import org.springframework.http.MediaType;\n    import java.nio.charset.StandardCharsets;\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.set(&quot;ce-specversion&quot;, &quot;1.0&quot;);\n    // Set Remaining fields\n\n    byte[] bytesData = \n    JSON_DATA_IN_FORM_OF_STRING.getBytes(StandardCharsets.UTF_8);\n    HttpEntity&lt;byte[]&gt; httpEntity = new HttpEntity&lt;&gt;(bytesData, headers);\n\n    restTemplate.postForLocation(sinkUrl, httpEntity);\n</code></pre>\n<p>But remember one thing if you are sending any field in header then it should contain 'ce-' as prefix (Apart from the Data that we are sending in HttpEntity) like in my case there was one key 'partitionKey' so I send it as 'ce-partitionKey'.</p>\n"}],"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697606133,"creation_date":1696739037,"question_id":77252316,"body_markdown":"I have one cloud event in my code which contains byte data, now I want to send this cloud event to a URL. I&#39;ve tried Feign client and rest template but not able to send the cloud event. Can anyone help me here, how can I do this?\r\nIn Quarkus I used @RegisterRestClien and @RestClient Combination to send it and it works perfectly but how can I send it in spring boot?","title":"Cloud event transfer over an URL in spring boot","body":"<p>I have one cloud event in my code which contains byte data, now I want to send this cloud event to a URL. I've tried Feign client and rest template but not able to send the cloud event. Can anyone help me here, how can I do this?\nIn Quarkus I used @RegisterRestClien and @RestClient Combination to send it and it works perfectly but how can I send it in spring boot?</p>\n"},{"tags":["java","maven","osgi"],"answers":[{"tags":[],"owner":{"account_id":892776,"reputation":19519,"user_id":930728,"accept_rate":60,"display_name":"Christian Schneider"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1436937779,"creation_date":1436882056,"answer_id":31408708,"question_id":31406042,"body_markdown":"Need to correct myself as slf4j indeed provides bundles now as Neil pointed out. Not sure how well it works though. I found some explanation [how to install slf4j for OSGi here][1]. It does not look very clean to me though. You need to create a bundle fragment for the configuration. Which means you can not change it at runtime.\r\n\r\nSo I still would rather recommend to use [pax-logging][2] at runtime instead. It implements the slf4j api as well as other logging APIs. As backend it uses log4j and configures it via config admin. So you do not need hacks for the logging config and can change it at runtime.\r\n\r\n\r\n  [1]: http://blog.dbfconsult.be/?p=5\r\n  [2]: https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging","title":"OSGI org.slf4j.impl dependency","body":"<p>Need to correct myself as slf4j indeed provides bundles now as Neil pointed out. Not sure how well it works though. I found some explanation <a href=\"http://blog.dbfconsult.be/?p=5\" rel=\"nofollow\">how to install slf4j for OSGi here</a>. It does not look very clean to me though. You need to create a bundle fragment for the configuration. Which means you can not change it at runtime.</p>\n\n<p>So I still would rather recommend to use <a href=\"https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging\" rel=\"nofollow\">pax-logging</a> at runtime instead. It implements the slf4j api as well as other logging APIs. As backend it uses log4j and configures it via config admin. So you do not need hacks for the logging config and can change it at runtime.</p>\n"},{"tags":[],"owner":{"account_id":124062,"reputation":23813,"user_id":318921,"accept_rate":67,"display_name":"Neil Bartlett"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1436912142,"creation_date":1436912142,"answer_id":31418354,"question_id":31406042,"body_markdown":"Slf4j has an unusual design (some might say a *bad* design, ahem). It is an API bundle that depends on an implementation package, namely `org.slf4j.impl`.\r\n\r\nYou need to install an additional bundle that implements the Slf4j API. There are lots of choices here... for example `slf4j-simple` is a basic implementation, whereas `slf4j-jdk14` uses the Java 1.4 `java.util.logging` back end, etc.\r\n\r\n[Logback][1] also contains an implementation of the API.\r\n\r\n\r\n  [1]: http://logback.qos.ch/","title":"OSGI org.slf4j.impl dependency","body":"<p>Slf4j has an unusual design (some might say a <em>bad</em> design, ahem). It is an API bundle that depends on an implementation package, namely <code>org.slf4j.impl</code>.</p>\n\n<p>You need to install an additional bundle that implements the Slf4j API. There are lots of choices here... for example <code>slf4j-simple</code> is a basic implementation, whereas <code>slf4j-jdk14</code> uses the Java 1.4 <code>java.util.logging</code> back end, etc.</p>\n\n<p><a href=\"http://logback.qos.ch/\" rel=\"noreferrer\">Logback</a> also contains an implementation of the API.</p>\n"},{"tags":[],"owner":{"account_id":286782,"reputation":3674,"user_id":586229,"accept_rate":20,"display_name":"hoijui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513850576,"creation_date":1513850576,"answer_id":47922420,"question_id":31406042,"body_markdown":"I had this same error message, and found out that it was due to bad bundle plugin configuration (as mentioned by @Christian_Schneider).\r\n\r\n### My situation\r\n\r\nSo i had roughly this error message when deploying on Karaf:\r\n\r\n&gt; missing requirement ... Unresolved requirements:  ... osgi.wiring.package=org.slf4j.impl\r\n\r\nMy modules _pom.xml_ looked like this:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${slf4j_version}&lt;/version&gt;\r\n\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t...\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;instructions&gt;\r\n\t\t\t\t&lt;Private-Package&gt;*&lt;/Private-Package&gt;\r\n\t\t\t&lt;/instructions&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\n### Solution\r\n_credits @jbonofre from the karaf community_\r\n\r\nI just repaced `&lt;Private-Package&gt;*&lt;/Private-Package&gt;` with `&lt;Export-Package&gt;&lt;/Export-Package&gt;`, to get:\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;instructions&gt;\r\n\t\t\t\t&lt;Export-Package&gt;&lt;/Export-Package&gt;\r\n\t\t\t&lt;/instructions&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nand consequently the import of `org.slf4j.impl` in my bundles _manifest.mf_ disappeared, leaving only an import to `org.slf4j`. This is provided by PAX Logging, which is installed by default on karaf.","title":"OSGI org.slf4j.impl dependency","body":"<p>I had this same error message, and found out that it was due to bad bundle plugin configuration (as mentioned by @Christian_Schneider).</p>\n\n<h3>My situation</h3>\n\n<p>So i had roughly this error message when deploying on Karaf:</p>\n\n<blockquote>\n  <p>missing requirement ... Unresolved requirements:  ... osgi.wiring.package=org.slf4j.impl</p>\n</blockquote>\n\n<p>My modules <em>pom.xml</em> looked like this:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;${slf4j_version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n...\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;instructions&gt;\n            &lt;Private-Package&gt;*&lt;/Private-Package&gt;\n        &lt;/instructions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<h3>Solution</h3>\n\n<p><em>credits @jbonofre from the karaf community</em></p>\n\n<p>I just repaced <code>&lt;Private-Package&gt;*&lt;/Private-Package&gt;</code> with <code>&lt;Export-Package&gt;&lt;/Export-Package&gt;</code>, to get:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;instructions&gt;\n            &lt;Export-Package&gt;&lt;/Export-Package&gt;\n        &lt;/instructions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>and consequently the import of <code>org.slf4j.impl</code> in my bundles <em>manifest.mf</em> disappeared, leaving only an import to <code>org.slf4j</code>. This is provided by PAX Logging, which is installed by default on karaf.</p>\n"},{"tags":[],"owner":{"account_id":16399288,"reputation":11,"user_id":11845804,"display_name":"ARVIND KUMAR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697605902,"creation_date":1697605902,"answer_id":77313621,"question_id":31406042,"body_markdown":"I am using **slf4j-api** bundle in my AEM local instance, and figure out this **slf4j-api** bundle in not Active status.\r\nIssue pic\r\n[![enter image description here][1]][1]\r\n\r\nAfter googling many blogs &amp; question post here, using this post I am able to resolve this issue\r\n\r\n**Steps**\r\n\r\n 1. Download the **slf4j-simple** this jar bundle from [MVN Repository][2]\r\n 2. Installed in my AEM local instance and after 30 sec refresh, this issue resolved\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tCM6X.png\r\n  [2]: https://mvnrepository.com/artifact/org.slf4j/slf4j-simple%20link","title":"OSGI org.slf4j.impl dependency","body":"<p>I am using <strong>slf4j-api</strong> bundle in my AEM local instance, and figure out this <strong>slf4j-api</strong> bundle in not Active status.\nIssue pic\n<a href=\"https://i.stack.imgur.com/tCM6X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCM6X.png\" alt=\"enter image description here\" /></a></p>\n<p>After googling many blogs &amp; question post here, using this post I am able to resolve this issue</p>\n<p><strong>Steps</strong></p>\n<ol>\n<li>Download the <strong>slf4j-simple</strong> this jar bundle from <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-simple%20link\" rel=\"nofollow noreferrer\">MVN Repository</a></li>\n<li>Installed in my AEM local instance and after 30 sec refresh, this issue resolved</li>\n</ol>\n"}],"owner":{"account_id":104426,"reputation":6829,"user_id":279204,"accept_rate":69,"display_name":"timothyclifford"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6614,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":31418354,"answer_count":4,"score":3,"last_activity_date":1697605902,"creation_date":1436875376,"question_id":31406042,"body_markdown":"I&#39;m new to OSGI (sorry) and having a few issues trying to deploy my package and related dependencies.\r\n\r\nThis is my POM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.felix.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;com.felix.test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                &lt;artifactId&gt;org.apache.felix.scr.annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9.6&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n                &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n                &lt;version&gt;4.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.5&lt;/source&gt;\r\n                        &lt;target&gt;1.5&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.4&lt;/version&gt;\r\n                    &lt;extensions&gt;true&lt;/extensions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;instructions&gt;\r\n                            &lt;Export-Package&gt;\r\n                                com.felix.test.search\r\n                            &lt;/Export-Package&gt;\r\n                            &lt;Bundle-SymbolicName&gt;\r\n                                ${project.artifactId}\r\n                            &lt;/Bundle-SymbolicName&gt;\r\n                            &lt;Bundle-Activator&gt;\r\n                                com.felix.test.Activator\r\n                            &lt;/Bundle-Activator&gt;\r\n                        &lt;/instructions&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThen I&#39;m bundling this using the Maven command:\r\n\r\n&gt; mvn org.apache.felix:maven-bundle-plugin:bundleall\r\n\r\nThis is successful and generates my bundle as well as 3 dependency bundles:\r\n\r\n - net.sf.ehcache_2.10.0.jar\r\n - org.apache.commons.lang3_3.4.0.jar\r\n - slf4j.api_1.7.7.jar\r\n\r\nThis seems OK and I can install and start the first two but when I try and start slf4j I get the following exception:\r\n\r\n&gt; org.osgi.framework.BundleException: Unable to resolve slf4j.api [25](R\r\n&gt; 25.0): missing requirement [slf4j.api [25](R 25.0)] osgi.wiring.package;\r\n&gt; (&amp;(osgi.wiring.package=org.slf4j.impl)(version&gt;=1.6.0)) Unresolved\r\n&gt; requirements: [[slf4j.api [25](R 25.0)] osgi.wiring.package;\r\n&gt; (&amp;(osgi.wiring.package=org.slf4j.impl)(version&gt;=1.6.0))]\r\n\r\nI&#39;m pretty sure I&#39;m missing something very simple but can&#39;t pin it down. Any help would be much appreciated!\r\n","title":"OSGI org.slf4j.impl dependency","body":"<p>I'm new to OSGI (sorry) and having a few issues trying to deploy my package and related dependencies.</p>\n\n<p>This is my POM:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.felix.test&lt;/groupId&gt;\n    &lt;artifactId&gt;com.felix.test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n            &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n            &lt;artifactId&gt;org.apache.felix.scr.annotations&lt;/artifactId&gt;\n            &lt;version&gt;1.9.6&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.5&lt;/source&gt;\n                    &lt;target&gt;1.5&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.4&lt;/version&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;configuration&gt;\n                    &lt;instructions&gt;\n                        &lt;Export-Package&gt;\n                            com.felix.test.search\n                        &lt;/Export-Package&gt;\n                        &lt;Bundle-SymbolicName&gt;\n                            ${project.artifactId}\n                        &lt;/Bundle-SymbolicName&gt;\n                        &lt;Bundle-Activator&gt;\n                            com.felix.test.Activator\n                        &lt;/Bundle-Activator&gt;\n                    &lt;/instructions&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Then I'm bundling this using the Maven command:</p>\n\n<blockquote>\n  <p>mvn org.apache.felix:maven-bundle-plugin:bundleall</p>\n</blockquote>\n\n<p>This is successful and generates my bundle as well as 3 dependency bundles:</p>\n\n<ul>\n<li>net.sf.ehcache_2.10.0.jar</li>\n<li>org.apache.commons.lang3_3.4.0.jar</li>\n<li>slf4j.api_1.7.7.jar</li>\n</ul>\n\n<p>This seems OK and I can install and start the first two but when I try and start slf4j I get the following exception:</p>\n\n<blockquote>\n  <p>org.osgi.framework.BundleException: Unable to resolve slf4j.api [25](R\n  25.0): missing requirement [slf4j.api [25](R 25.0)] osgi.wiring.package;\n  (&amp;(osgi.wiring.package=org.slf4j.impl)(version>=1.6.0)) Unresolved\n  requirements: [[slf4j.api [25](R 25.0)] osgi.wiring.package;\n  (&amp;(osgi.wiring.package=org.slf4j.impl)(version>=1.6.0))]</p>\n</blockquote>\n\n<p>I'm pretty sure I'm missing something very simple but can't pin it down. Any help would be much appreciated!</p>\n"},{"tags":["java","python","ant"],"comments":[{"owner":{"account_id":381573,"reputation":43056,"user_id":736308,"accept_rate":71,"display_name":"cdarke"},"score":0,"creation_date":1491313638,"post_id":43208662,"comment_id":73489745,"body_markdown":"Check that your `%path%` environment variable contains the directory that `python.exe` resides in.","body":"Check that your <code>%path%</code> environment variable contains the directory that <code>python.exe</code> resides in."},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491315467,"post_id":43208662,"comment_id":73491191,"body_markdown":"@cdarke my Path value is `C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22` and my python.exe is in C:\\Python22","body":"@cdarke my Path value is <code>C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22</code> and my python.exe is in C:\\Python22"},{"owner":{"account_id":3348927,"reputation":4006,"user_id":2813395,"accept_rate":57,"display_name":"Kasun Kodagoda"},"score":0,"creation_date":1491499851,"post_id":43208662,"comment_id":73592665,"body_markdown":"Formatted the code.","body":"Formatted the code."},{"owner":{"account_id":4225446,"reputation":198,"user_id":3459078,"display_name":"zorze"},"score":0,"creation_date":1516700702,"post_id":43208662,"comment_id":83784811,"body_markdown":"https://stackoverflow.com/questions/47952935/java-io-ioexception-cannot-run-program-python-createprocess-error-2-the-sys/47953300#47953300 Only this worked for me!","body":"<a href=\"https://stackoverflow.com/questions/47952935/java-io-ioexception-cannot-run-program-python-createprocess-error-2-the-sys/47953300#47953300\" title=\"java io ioexception cannot run program python createprocess error 2 the sys\">stackoverflow.com/questions/47952935/&hellip;</a> Only this worked for me!"}],"answers":[{"tags":[],"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491374418,"creation_date":1491315190,"answer_id":43209761,"question_id":43208662,"body_markdown":"**edit** `python.exe` must be in a directory defined in the executable path variable `PATH`.\r\n\r\nFollowing working example assumes the presence of `C:\\Python33\\python.exe`\r\n\r\n    &lt;project name=&quot;demo&quot; default=&quot;main&quot; basedir=&quot;.&quot;&gt;\r\n      &lt;property environment=&quot;env&quot; /&gt;\r\n      &lt;echo&gt;PATH is set as: ${env.PATH}&lt;/echo&gt;\r\n\r\n      &lt;target name=&quot;main&quot;&gt;\r\n        &lt;exec dir=&quot;backend/generated&quot; executable=&quot;python&quot;&gt;\r\n          &lt;arg line=&quot;--version&quot;/&gt;\r\n        &lt;/exec&gt;        \r\n      &lt;/target&gt;                                \r\n    &lt;/project&gt;\r\n\r\nexecute in a command session\r\n\r\n    set PATH=C:\\Python33;%PATH%\r\n    ant \r\n\r\noutput\r\n\r\n    Buildfile: X:\\temp\\build.xml\r\n         [echo] PATH is set as: C:\\Python33;...\r\n    ...\r\n    main:\r\n         [exec] Python 3.3.0\r\n\r\n**edit** Just checked. The executable can be `executable=&quot;python&quot;` or `executable=&quot;python.exe&quot;`. So @cdarke is right the issue is that `python.exe` is not in `PATH`.","title":"CreateProcess error=2, Can not run program &quot;python&quot; on Ant","body":"<p><strong>edit</strong> <code>python.exe</code> must be in a directory defined in the executable path variable <code>PATH</code>.</p>\n\n<p>Following working example assumes the presence of <code>C:\\Python33\\python.exe</code></p>\n\n<pre><code>&lt;project name=\"demo\" default=\"main\" basedir=\".\"&gt;\n  &lt;property environment=\"env\" /&gt;\n  &lt;echo&gt;PATH is set as: ${env.PATH}&lt;/echo&gt;\n\n  &lt;target name=\"main\"&gt;\n    &lt;exec dir=\"backend/generated\" executable=\"python\"&gt;\n      &lt;arg line=\"--version\"/&gt;\n    &lt;/exec&gt;        \n  &lt;/target&gt;                                \n&lt;/project&gt;\n</code></pre>\n\n<p>execute in a command session</p>\n\n<pre><code>set PATH=C:\\Python33;%PATH%\nant \n</code></pre>\n\n<p>output</p>\n\n<pre><code>Buildfile: X:\\temp\\build.xml\n     [echo] PATH is set as: C:\\Python33;...\n...\nmain:\n     [exec] Python 3.3.0\n</code></pre>\n\n<p><strong>edit</strong> Just checked. The executable can be <code>executable=\"python\"</code> or <code>executable=\"python.exe\"</code>. So @cdarke is right the issue is that <code>python.exe</code> is not in <code>PATH</code>.</p>\n"}],"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9475,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697605220,"creation_date":1491312486,"question_id":43208662,"body_markdown":"I have a `C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\verify_fam_extended.xml:52: Execute failed: java.io.IOException: Cannot run program &quot;python&quot; (in directory &quot;C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\backend\\generated&quot;): CreateProcess error=2, The system cannot find the file specified` error when I run my xml code through Ant.\r\n\r\n    &lt;exec dir=&quot;backend/generated&quot; executable=&quot;python&quot;&gt;\r\n        &lt;arg line=&quot;toplevel.py&quot;/&gt;\r\n\t\t&lt;env key=&quot;PYTHONPATH&quot; value=&quot;${dsltrans.install.path}:./backend/generated&quot;/&gt; \r\n\t&lt;/exec&gt;\r\n","title":"CreateProcess error=2, Can not run program &quot;python&quot; on Ant","body":"<p>I have a <code>C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\verify_fam_extended.xml:52: Execute failed: java.io.IOException: Cannot run program \"python\" (in directory \"C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\backend\\generated\"): CreateProcess error=2, The system cannot find the file specified</code> error when I run my xml code through Ant.</p>\n\n<pre><code>&lt;exec dir=\"backend/generated\" executable=\"python\"&gt;\n    &lt;arg line=\"toplevel.py\"/&gt;\n    &lt;env key=\"PYTHONPATH\" value=\"${dsltrans.install.path}:./backend/generated\"/&gt; \n&lt;/exec&gt;\n</code></pre>\n"},{"tags":["java","android","admob"],"comments":[{"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quốc H&#249;ng"},"score":1,"creation_date":1697598351,"post_id":77313176,"comment_id":136298660,"body_markdown":"With Banner Ad you can remove directly the AdView from the container to remove it and don&#39;t forget call the AdView.destroy() to avoid memory leak.","body":"With Banner Ad you can remove directly the AdView from the container to remove it and don&#39;t forget call the AdView.destroy() to avoid memory leak."},{"owner":{"account_id":6955733,"reputation":173,"user_id":5336817,"display_name":"KGeeks"},"score":1,"creation_date":1697610286,"post_id":77313176,"comment_id":136299762,"body_markdown":"Can show the Close(X) icon on the top-right corner of the Banner Ad container, Destroy and Remove an adView from the Ad container while clicking on the Close icon.","body":"Can show the Close(X) icon on the top-right corner of the Banner Ad container, Destroy and Remove an adView from the Ad container while clicking on the Close icon."}],"answers":[{"tags":[],"owner":{"account_id":14200012,"reputation":139,"user_id":10258130,"display_name":"Amardurai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697605013,"creation_date":1697605013,"answer_id":77313572,"question_id":77313176,"body_markdown":"&gt; You can use the below code with your logic by setting the visibility\r\n&gt; to &quot;INVISIBLE,&quot; you hide the ad, but it can still request and load\r\n&gt; ads, which can be useful if the user decides to re-enable ads later.\r\n&gt; If you remove the AdView entirely, you&#39;ll need to re-add it to the\r\n&gt; layout when the user wants to see ads again.\r\n\r\n    AdView adView = findViewById(R.id.adView);\r\n    \r\n    // To hide the ad without violating AdMob policies\r\n    adView.setVisibility(View.INVISIBLE);\r\n    // or\r\n    adView.setVisibility(View.GONE); // Use this option with caution\r\n    \r\n    // To remove the ad completely\r\n    adView.setVisibility(View.GONE);\r\n    ViewGroup parentView = (ViewGroup) adView.getParent();\r\n    if (parentView != null) {\r\n        parentView.removeView(adView);\r\n    }","title":"AdMob how to remove a showing ad?","body":"<blockquote>\n<p>You can use the below code with your logic by setting the visibility\nto &quot;INVISIBLE,&quot; you hide the ad, but it can still request and load\nads, which can be useful if the user decides to re-enable ads later.\nIf you remove the AdView entirely, you'll need to re-add it to the\nlayout when the user wants to see ads again.</p>\n</blockquote>\n<pre><code>AdView adView = findViewById(R.id.adView);\n\n// To hide the ad without violating AdMob policies\nadView.setVisibility(View.INVISIBLE);\n// or\nadView.setVisibility(View.GONE); // Use this option with caution\n\n// To remove the ad completely\nadView.setVisibility(View.GONE);\nViewGroup parentView = (ViewGroup) adView.getParent();\nif (parentView != null) {\n    parentView.removeView(adView);\n}\n</code></pre>\n"}],"owner":{"account_id":16115791,"reputation":367,"user_id":11632959,"display_name":"dect"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697605013,"creation_date":1697596174,"question_id":77313176,"body_markdown":"I&#39;m developing a java android app that will contain a google admob banner ad at the bottom of the screen.\r\n\r\nI have developed all the code and the ads are already working... but I want to implement a feature that will allow the user to remove the ads... imagine something like a internal not monetary purchase.\r\n\r\nMy question is: **How do I remove the ad that is currently showing in my activity without violating any AdMob rule?**\r\n\r\nWhen the user starts an activity I simply dont initialize the ad, but if the ad is already showing how can I disabled it? I didn&#39;t find any official document about it, I just found some forums saying that setting the visibility to gone violates the rules...\r\n\r\nThanks!","title":"AdMob how to remove a showing ad?","body":"<p>I'm developing a java android app that will contain a google admob banner ad at the bottom of the screen.</p>\n<p>I have developed all the code and the ads are already working... but I want to implement a feature that will allow the user to remove the ads... imagine something like a internal not monetary purchase.</p>\n<p>My question is: <strong>How do I remove the ad that is currently showing in my activity without violating any AdMob rule?</strong></p>\n<p>When the user starts an activity I simply dont initialize the ad, but if the ad is already showing how can I disabled it? I didn't find any official document about it, I just found some forums saying that setting the visibility to gone violates the rules...</p>\n<p>Thanks!</p>\n"},{"tags":["java","immutability","cglib"],"comments":[{"owner":{"account_id":7709338,"reputation":421,"user_id":5839242,"display_name":"goodguy5"},"score":0,"creation_date":1457709173,"post_id":35943632,"comment_id":59543694,"body_markdown":"Can you make the objects final, or is that not what you&#39;re asking?","body":"Can you make the objects final, or is that not what you&#39;re asking?"},{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":0,"creation_date":1457709317,"post_id":35943632,"comment_id":59543816,"body_markdown":"@goodguy5, no, the point is that immutability must be achieved at a run-time: I can&#39;t modify the source code of objects I&#39;m working with.","body":"@goodguy5, no, the point is that immutability must be achieved at a run-time: I can&#39;t modify the source code of objects I&#39;m working with."},{"owner":{"account_id":7709338,"reputation":421,"user_id":5839242,"display_name":"goodguy5"},"score":1,"creation_date":1457709576,"post_id":35943632,"comment_id":59543998,"body_markdown":"Have you tried using the immutator object outlined here: https://javax0.wordpress.com/2013/11/13/creating-immutable-objects-run-time/","body":"Have you tried using the immutator object outlined here: <a href=\"https://javax0.wordpress.com/2013/11/13/creating-immutable-objects-run-time/\" rel=\"nofollow noreferrer\">javax0.wordpress.com/2013/11/13/&hellip;</a>"},{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":0,"creation_date":1457710527,"post_id":35943632,"comment_id":59544732,"body_markdown":"I&#39;ve tried, but it also has the same issue, e.g.:\n    `InnerClass innerClass = new InnerClass();`\n    `innerClass.setName(&quot;innerClass&quot;);`\n    `OuterClass outerClass = new OuterClass();`\n    `outerClass.setName(&quot;outerClass&quot;);`\n    `outerClass.setInnerClass(innerClass);`\n    `OuterClass immutable = Immutable.of(outerClass);`\n    `immutable.getInnerClass().setName(&quot;try&quot;);`","body":"I&#39;ve tried, but it also has the same issue, e.g.:     <code>InnerClass innerClass = new InnerClass();</code>     <code>innerClass.setName(&quot;innerClass&quot;);</code>     <code>OuterClass outerClass = new OuterClass();</code>     <code>outerClass.setName(&quot;outerClass&quot;);</code>     <code>outerClass.setInnerClass(innerClass);</code>     <code>OuterClass immutable = Immutable.of(outerClass);</code>     <code>immutable.getInnerClass().setName(&quot;try&quot;);</code>"},{"owner":{"account_id":7709338,"reputation":421,"user_id":5839242,"display_name":"goodguy5"},"score":0,"creation_date":1457711363,"post_id":35943632,"comment_id":59545354,"body_markdown":"And it needs to be nestable? So you can&#39;t make final OuterClass immutable = Immutable.of(outerClass); Otherwise, I&#39;m sorry I can&#39;t be more help :(","body":"And it needs to be nestable? So you can&#39;t make final OuterClass immutable = Immutable.of(outerClass); Otherwise, I&#39;m sorry I can&#39;t be more help :("}],"answers":[{"tags":[],"owner":{"account_id":207518,"reputation":654,"user_id":457429,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1458199230,"creation_date":1458199230,"answer_id":36053928,"question_id":35943632,"body_markdown":"You may traverse the object tree and use CGLIB to make each object immutable by using interceptor which skips required methods. The tough part though is to determine all methods which modify the object&#39;s state - for each object in the tree.\r\n\r\n    package ut.test;\r\n    \r\n    import static org.junit.Assert.assertEquals;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import org.junit.Test;\r\n    \r\n    import com.google.common.collect.Lists;\r\n    \r\n    import net.sf.cglib.proxy.Enhancer;\r\n    import net.sf.cglib.proxy.MethodInterceptor;\r\n    import net.sf.cglib.proxy.MethodProxy;\r\n    \r\n    public class MyTest {\r\n        \r\n        public static class Inner {\r\n            private String data = &quot;hello&quot;;\r\n            \r\n            public Inner() {}\r\n            \r\n            public String getData() {\r\n                return data;\r\n            }\r\n            \r\n            public void setData(String data) {\r\n                this.data = data;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return data;\r\n            }\r\n            \r\n        }\r\n        \r\n        public static class Outer {\r\n            private List&lt;Inner&gt; list = Lists.newArrayList(new Inner());\r\n            \r\n            public Outer() {}\r\n            \r\n            public List&lt;Inner&gt; getList() {\r\n                return list;\r\n            }\r\n            \r\n            public void setList(List&lt;Inner&gt; list) {\r\n                this.list = list;\r\n            }\r\n        }\r\n        \r\n        public static class GetOnlyDelegatingMethodInterceptor implements MethodInterceptor {\r\n            private Object delegate;\r\n            \r\n            public GetOnlyDelegatingMethodInterceptor(Object delegate) {\r\n                this.delegate = delegate;\r\n            }\r\n            \r\n            @Override\r\n            public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\r\n                if (method.getName().startsWith(&quot;get&quot;)) {\r\n                    return makeImmutable(proxy.invoke(delegate, args));\r\n                }\r\n                \r\n                if (method.getName().equals(&quot;toString&quot;)) {\r\n                    return proxy.invoke(delegate, args);\r\n                }\r\n                \r\n                if (method.getDeclaringClass().equals(Object.class)) {\r\n                    return proxy.invoke(delegate, args);\r\n                }\r\n                \r\n                // you may check for other methods here\r\n                \r\n                // skip all others\r\n                return null;\r\n            }\r\n        }\r\n        \r\n        private static Object makeImmutable(Object obj) {\r\n            if (obj == null) {\r\n                return obj;\r\n            }\r\n            \r\n            Enhancer e = new Enhancer();\r\n            e.setSuperclass(obj.getClass());\r\n            e.setCallback(new GetOnlyDelegatingMethodInterceptor(obj));\r\n            return e.create();\r\n        }\r\n        \r\n        @Test\r\n        public void testImmutable() {\r\n            Outer outerImmutable = (Outer) makeImmutable(new Outer());\r\n            \r\n            // this is initial state\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n            \r\n            // trying to set empty list\r\n            outerImmutable.setList(new ArrayList&lt;&gt;());\r\n            // but it&#39;s still the same\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n            \r\n            // going deeper\r\n            outerImmutable.getList().get(0).setData(&quot;bye!&quot;);\r\n            // but still no changes\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n        }\r\n    }\r\n","title":"Create DEEP immutable object in runtime","body":"<p>You may traverse the object tree and use CGLIB to make each object immutable by using interceptor which skips required methods. The tough part though is to determine all methods which modify the object's state - for each object in the tree.</p>\n\n<pre><code>package ut.test;\n\nimport static org.junit.Assert.assertEquals;\n\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.junit.Test;\n\nimport com.google.common.collect.Lists;\n\nimport net.sf.cglib.proxy.Enhancer;\nimport net.sf.cglib.proxy.MethodInterceptor;\nimport net.sf.cglib.proxy.MethodProxy;\n\npublic class MyTest {\n\n    public static class Inner {\n        private String data = \"hello\";\n\n        public Inner() {}\n\n        public String getData() {\n            return data;\n        }\n\n        public void setData(String data) {\n            this.data = data;\n        }\n\n        @Override\n        public String toString() {\n            return data;\n        }\n\n    }\n\n    public static class Outer {\n        private List&lt;Inner&gt; list = Lists.newArrayList(new Inner());\n\n        public Outer() {}\n\n        public List&lt;Inner&gt; getList() {\n            return list;\n        }\n\n        public void setList(List&lt;Inner&gt; list) {\n            this.list = list;\n        }\n    }\n\n    public static class GetOnlyDelegatingMethodInterceptor implements MethodInterceptor {\n        private Object delegate;\n\n        public GetOnlyDelegatingMethodInterceptor(Object delegate) {\n            this.delegate = delegate;\n        }\n\n        @Override\n        public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\n            if (method.getName().startsWith(\"get\")) {\n                return makeImmutable(proxy.invoke(delegate, args));\n            }\n\n            if (method.getName().equals(\"toString\")) {\n                return proxy.invoke(delegate, args);\n            }\n\n            if (method.getDeclaringClass().equals(Object.class)) {\n                return proxy.invoke(delegate, args);\n            }\n\n            // you may check for other methods here\n\n            // skip all others\n            return null;\n        }\n    }\n\n    private static Object makeImmutable(Object obj) {\n        if (obj == null) {\n            return obj;\n        }\n\n        Enhancer e = new Enhancer();\n        e.setSuperclass(obj.getClass());\n        e.setCallback(new GetOnlyDelegatingMethodInterceptor(obj));\n        return e.create();\n    }\n\n    @Test\n    public void testImmutable() {\n        Outer outerImmutable = (Outer) makeImmutable(new Outer());\n\n        // this is initial state\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n\n        // trying to set empty list\n        outerImmutable.setList(new ArrayList&lt;&gt;());\n        // but it's still the same\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n\n        // going deeper\n        outerImmutable.getList().get(0).setData(\"bye!\");\n        // but still no changes\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3044,"reputation":12476,"user_id":4308,"accept_rate":84,"display_name":"Benedikt Waldvogel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697604737,"creation_date":1552833226,"answer_id":55208195,"question_id":35943632,"body_markdown":"You can use `ImmutableProxy` of the [reflection-util][reflection-util] library.\r\n\r\n*Disclaimer: I’m one of the authors of this library!*\r\n\r\nExample:\r\n\r\n```java\r\npublic class Inner\r\n{\r\n    private String data = &quot;hello&quot;;\r\n    // getters and setters\r\n}\r\n```\r\n```java\r\npublic class Outer\r\n{\r\n    private List&lt;Inner&gt; list = Arrays.asList(new Inner());\r\n    // getters and setters\r\n}\r\n```\r\n\r\n```\r\nOuter outerImmutable = ImmutableProxy.create(new Outer());\r\nInner firstElement = outerImmutable.getList().get(0)\r\n\r\n// this is initial state\r\nassertThat(firstElement.getData()).isEqualTo(&quot;hello&quot;);\r\n\r\n// throws UnsupportedOperationException\r\nouterImmutable.setList(…);\r\n\r\n// throws UnsupportedOperationException\r\nfirstElement.setData(&quot;bye!&quot;);\r\n```\r\n\r\n[reflection-util]: https://github.com/cronn/reflection-util","title":"Create DEEP immutable object in runtime","body":"<p>You can use <code>ImmutableProxy</code> of the <a href=\"https://github.com/cronn/reflection-util\" rel=\"nofollow noreferrer\">reflection-util</a> library.</p>\n<p><em>Disclaimer: I’m one of the authors of this library!</em></p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Inner\n{\n    private String data = &quot;hello&quot;;\n    // getters and setters\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Outer\n{\n    private List&lt;Inner&gt; list = Arrays.asList(new Inner());\n    // getters and setters\n}\n</code></pre>\n<pre><code>Outer outerImmutable = ImmutableProxy.create(new Outer());\nInner firstElement = outerImmutable.getList().get(0)\n\n// this is initial state\nassertThat(firstElement.getData()).isEqualTo(&quot;hello&quot;);\n\n// throws UnsupportedOperationException\nouterImmutable.setList(…);\n\n// throws UnsupportedOperationException\nfirstElement.setData(&quot;bye!&quot;);\n</code></pre>\n"}],"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1582,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":36053928,"answer_count":2,"score":8,"last_activity_date":1697604737,"creation_date":1457709026,"question_id":35943632,"body_markdown":"I need to create immutable copy of an object in runtime with Java. I made use of org.springframework.cglib.beans.ImmutableBean, which can create immutable copy of an object using CGLIB. \r\n\r\nBut the problem is that it provides &quot;first-level&quot; immutability: it disallows change of an input object&#39;s properties, **but** it allows to change inner objects (e.g. get collection and add an element to it or get inner object and modify it&#39;s parameters etc.)\r\n\r\nSo the question is: what&#39;s the correct way of creating deep (recursive) immutable copy of an object so that one can&#39;t change inner objects also (at any level of nesting)?","title":"Create DEEP immutable object in runtime","body":"<p>I need to create immutable copy of an object in runtime with Java. I made use of org.springframework.cglib.beans.ImmutableBean, which can create immutable copy of an object using CGLIB. </p>\n\n<p>But the problem is that it provides \"first-level\" immutability: it disallows change of an input object's properties, <strong>but</strong> it allows to change inner objects (e.g. get collection and add an element to it or get inner object and modify it's parameters etc.)</p>\n\n<p>So the question is: what's the correct way of creating deep (recursive) immutable copy of an object so that one can't change inner objects also (at any level of nesting)?</p>\n"},{"tags":["java","android","kotlin","audio","thumbnails"],"answers":[{"tags":[],"owner":{"account_id":17438290,"reputation":189,"user_id":12640900,"display_name":"Pratik PSB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687331497,"creation_date":1687331497,"answer_id":76520810,"question_id":76511319,"body_markdown":"**Hello @bovietvidai, Hope you are doing well. Here I am adding my suggestion to your question.**\r\n\r\nOption 1:\r\n---------\r\nYou can create a `bitmap` by using the below code snippet.\r\n``` java\r\nBitmap image = ThumbnailUtils.createAudioThumbnail(file, MediaStore.Images.Thumbnails.MICRO_KIND);\r\n```\r\nin the above code snippet `file` object is the audio file. \r\n*********************\r\n\r\nOption 2:\r\n---------\r\nYou can fetch using a `MediaMetadataRetriever` by using the below code snippet.\r\n``` java\r\nMediaMetadataRetriever mmr = new MediaMetadataRetriever();\r\nbyte[] imgbyte;\r\nBitmap bitmp;\r\nBitmapFactory.Options option =new BitmapFactory.Options();\r\n    \r\nmmr.setDataSource(getApplicationContext(), uri);\r\nimgbyte = mmr.getEmbeddedPicture();\r\n    \r\n\r\nif (imgbyte != null) \r\n    bitmp = BitmapFactory.decodeByteArray(imgbyte, 0,imgbyte.length, option);\r\n```\r\n*********************\r\n\r\nOption 3:\r\n---------\r\nYou can fetch using a `Cursor` by using the below code snippet if you are fetching media items using `Cursor`.\r\n``` java\r\nCursor cursor = getContentResolver().query(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, \r\n    new String[] {MediaStore.Audio.Albums._ID, MediaStore.Audio.Albums.ALBUM_ART}, \r\n    MediaStore.Audio.Albums._ID+ &quot;=?&quot;, \r\n    new String[] {String.valueOf(albumId)}, \r\n    null);\r\n    \r\nif (cursor.moveToFirst()) {\r\n    String albumart = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART)); \r\n    Bitmap bm = BitmapFactory.decodeFile(albumart);\r\n}\r\n```\r\n\r\nI think all 3 options are working well for you.","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p><strong>Hello @bovietvidai, Hope you are doing well. Here I am adding my suggestion to your question.</strong></p>\n<h2>Option 1:</h2>\n<p>You can create a <code>bitmap</code> by using the below code snippet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Bitmap image = ThumbnailUtils.createAudioThumbnail(file, MediaStore.Images.Thumbnails.MICRO_KIND);\n</code></pre>\n<p>in the above code snippet <code>file</code> object is the audio file.</p>\n<hr />\n<h2>Option 2:</h2>\n<p>You can fetch using a <code>MediaMetadataRetriever</code> by using the below code snippet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>MediaMetadataRetriever mmr = new MediaMetadataRetriever();\nbyte[] imgbyte;\nBitmap bitmp;\nBitmapFactory.Options option =new BitmapFactory.Options();\n    \nmmr.setDataSource(getApplicationContext(), uri);\nimgbyte = mmr.getEmbeddedPicture();\n    \n\nif (imgbyte != null) \n    bitmp = BitmapFactory.decodeByteArray(imgbyte, 0,imgbyte.length, option);\n</code></pre>\n<hr />\n<h2>Option 3:</h2>\n<p>You can fetch using a <code>Cursor</code> by using the below code snippet if you are fetching media items using <code>Cursor</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cursor cursor = getContentResolver().query(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, \n    new String[] {MediaStore.Audio.Albums._ID, MediaStore.Audio.Albums.ALBUM_ART}, \n    MediaStore.Audio.Albums._ID+ &quot;=?&quot;, \n    new String[] {String.valueOf(albumId)}, \n    null);\n    \nif (cursor.moveToFirst()) {\n    String albumart = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART)); \n    Bitmap bm = BitmapFactory.decodeFile(albumart);\n}\n</code></pre>\n<p>I think all 3 options are working well for you.</p>\n"},{"tags":[],"owner":{"account_id":29437651,"reputation":1,"user_id":22556205,"display_name":"Muhammad Saad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697604605,"creation_date":1697604605,"answer_id":77313549,"question_id":76511319,"body_markdown":"Best Option is to add using glide as it will not create issue of background task and can set some default image if any error\r\n\r\n    val projection = arrayOf(\r\n                MediaStore.Audio.Media.ALBUM_ID,\r\n                MediaStore.Audio.Media.DISPLAY_NAME,\r\n                MediaStore.Audio.Media.DURATION,\r\n                MediaStore.Audio.Media.SIZE,\r\n                MediaStore.Audio.Media.DATA\r\n            )\r\n\r\n            val query = contentResolver.query(collection, projection, null, null, null)\r\n            query?.use { cursor -&gt;\r\n                // Cache column indices.\r\n                val idColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)\r\n                val nameColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME)\r\n                val durationColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)\r\n                val sizeColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE)\r\n                val dataColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)\r\n\r\n                while (cursor.moveToNext()) {\r\n                    // Get values of columns for a given video.\r\n                    val id = cursor.getLong(idColumn)\r\n                    val name = cursor.getString(nameColumn)\r\n                    val duration = cursor.getInt(durationColumn)\r\n                    val size = cursor.getInt(sizeColumn)\r\n                    val data = cursor.getString(dataColumn)\r\n \r\n\r\n                     val contentUri: Uri = Uri.fromFile(File(data))\r\n                    //every device works with this Uri\r\n                    val sArt = Uri.parse(&quot;content://media/external/audio/albumart&quot;)\r\n                    val musicThumbnail: Uri = ContentUris.withAppendedId(\r\n                        sArt,\r\n                        id\r\n                    )\r\n    Glide.with(context).load(musicThumbnail).error(R.drawable.baseline_music_note_24).into(yourImageView)\r\n\r\n","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p>Best Option is to add using glide as it will not create issue of background task and can set some default image if any error</p>\n<pre><code>val projection = arrayOf(\n            MediaStore.Audio.Media.ALBUM_ID,\n            MediaStore.Audio.Media.DISPLAY_NAME,\n            MediaStore.Audio.Media.DURATION,\n            MediaStore.Audio.Media.SIZE,\n            MediaStore.Audio.Media.DATA\n        )\n\n        val query = contentResolver.query(collection, projection, null, null, null)\n        query?.use { cursor -&gt;\n            // Cache column indices.\n            val idColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)\n            val nameColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME)\n            val durationColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)\n            val sizeColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE)\n            val dataColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)\n\n            while (cursor.moveToNext()) {\n                // Get values of columns for a given video.\n                val id = cursor.getLong(idColumn)\n                val name = cursor.getString(nameColumn)\n                val duration = cursor.getInt(durationColumn)\n                val size = cursor.getInt(sizeColumn)\n                val data = cursor.getString(dataColumn)\n\n\n                 val contentUri: Uri = Uri.fromFile(File(data))\n                //every device works with this Uri\n                val sArt = Uri.parse(&quot;content://media/external/audio/albumart&quot;)\n                val musicThumbnail: Uri = ContentUris.withAppendedId(\n                    sArt,\n                    id\n                )\nGlide.with(context).load(musicThumbnail).error(R.drawable.baseline_music_note_24).into(yourImageView)\n</code></pre>\n"}],"owner":{"account_id":26210323,"reputation":115,"user_id":19889305,"display_name":"bovietvidai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697604605,"creation_date":1687233123,"question_id":76511319,"body_markdown":"recently I am working on a Audio Manger project but don&#39;t know how to figure out setting audio thumbnail in android.\r\nMany thanks in advance.","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p>recently I am working on a Audio Manger project but don't know how to figure out setting audio thumbnail in android.\nMany thanks in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7230662,"reputation":8299,"user_id":5517633,"display_name":"Abdelhak"},"score":1,"creation_date":1454592996,"post_id":35202431,"comment_id":58120572,"body_markdown":"Can you make your question more clear?","body":"Can you make your question more clear?"},{"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"score":0,"creation_date":1454682173,"post_id":35202431,"comment_id":58167306,"body_markdown":"this code helps to implement inline image in email but also showing an attachment in email .i want to hide or disable that on email through codes .how?","body":"this code helps to implement inline image in email but also showing an attachment in email .i want to hide or disable that on email through codes .how?"},{"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"score":0,"creation_date":1454682546,"post_id":35202431,"comment_id":58167583,"body_markdown":"More specifically ,i want to send an email with inline image in java  and without any attachment of that image.","body":"More specifically ,i want to send an email with inline image in java  and without any attachment of that image."}],"answers":[{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697603151,"creation_date":1697603151,"answer_id":77313478,"question_id":35202431,"body_markdown":"You can not. \r\n\r\nBut you can use a `img`-tag having a `href` to a official image location.\r\n\r\nExample:\r\n\r\n    &lt;img src=&quot;https://www.example.com/image.png&quot; /&gt;\r\n\r\nIf you do not send the image as an attachment the mail is getting smaller, no attachment-sign is set and you do not litter the postbox-space of the recipient.","title":"how to hide attachment of inline image in java","body":"<p>You can not.</p>\n<p>But you can use a <code>img</code>-tag having a <code>href</code> to a official image location.</p>\n<p>Example:</p>\n<pre><code>&lt;img src=&quot;https://www.example.com/image.png&quot; /&gt;\n</code></pre>\n<p>If you do not send the image as an attachment the mail is getting smaller, no attachment-sign is set and you do not litter the postbox-space of the recipient.</p>\n"}],"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697603151,"creation_date":1454592850,"question_id":35202431,"body_markdown":" This is a part of setting inline image in java here setting the content id.\r\n    \r\n       \r\n       MimeBodyPart imagePart = new MimeBodyPart();\r\n                        imagePart.setHeader(&quot;Content-ID&quot;, &quot;&lt;&quot; + contentId + &quot;&gt;&quot;);\r\n                        imagePart.setDisposition(MimeBodyPart.INLINE);\r\n        this part is to concentrate \r\n                        String imageFilePath = mapInlineImages.get(contentId);\r\n                        try {\r\nHere attaching file how to hide it.\r\n                         \r\n                       //imagePart.attachFile(imageFilePath);\r\n                            DataSource fds = new FileDataSource(imageFilePath);\r\n                            imagePart.setDataHandler(new DataHandler(fds));\r\n                        } catch (Exception ex) {\r\n                            ex.printStackTrace();\r\n                        }\r\n                      mimemultipart.addBodyPart(imagePart);","title":"how to hide attachment of inline image in java","body":"<p>This is a part of setting inline image in java here setting the content id.</p>\n\n<pre><code>   MimeBodyPart imagePart = new MimeBodyPart();\n                    imagePart.setHeader(\"Content-ID\", \"&lt;\" + contentId + \"&gt;\");\n                    imagePart.setDisposition(MimeBodyPart.INLINE);\n    this part is to concentrate \n                    String imageFilePath = mapInlineImages.get(contentId);\n                    try {\n</code></pre>\n\n<p>Here attaching file how to hide it.</p>\n\n<pre><code>                   //imagePart.attachFile(imageFilePath);\n                        DataSource fds = new FileDataSource(imageFilePath);\n                        imagePart.setDataHandler(new DataHandler(fds));\n                    } catch (Exception ex) {\n                        ex.printStackTrace();\n                    }\n                  mimemultipart.addBodyPart(imagePart);\n</code></pre>\n"},{"tags":["java","deserialization","quarkus","avro"],"comments":[{"owner":{"account_id":27780101,"reputation":31,"user_id":21208607,"display_name":"Maxim Shatskikh"},"score":0,"creation_date":1697629032,"post_id":77307419,"comment_id":136303210,"body_markdown":"Make class manually is bad idea when working with avro. Solve it with class generation. https://github.com/davidmc24/gradle-avro-plugin","body":"Make class manually is bad idea when working with avro. Solve it with class generation. <a href=\"https://github.com/davidmc24/gradle-avro-plugin\" rel=\"nofollow noreferrer\">github.com/davidmc24/gradle-avro-plugin</a>"}],"owner":{"account_id":27780101,"reputation":31,"user_id":21208607,"display_name":"Maxim Shatskikh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697602984,"creation_date":1697532261,"question_id":77307419,"body_markdown":"My task is deserialize byte[] to POJO that was serialized with avro schema from json String. \r\n\r\nSchema example:\r\n```\r\n&quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;\r\n```\r\n\r\nData for serialization saved as string in postgres:\r\n```\r\n{&quot;ID&quot;: 3602, &quot;ACTUAL&quot;: 1, &quot;MKB_CODE&quot;: &quot;H53.2&quot;, &quot;MKB_NAME&quot;: &quot;\\u0414\\u0438\\u043f\\u043b\\u043e\\u043f\\u0438\\u044f&quot;, &quot;REC_CODE&quot;: &quot;0710H532&quot;, &quot;ID_PARENT&quot;: &quot;3599&quot;}\r\n```\r\n\r\nClass for serialize json String data to byte array:\r\n```java\r\npublic class JsonAvroSerializer {\r\n    public byte[] jsonAvroSerialize(String jsonString, String schemaString) throws IOException {\r\n        Schema.Parser parser = new Schema.Parser();\r\n        Schema schema = parser.parse(schemaString);\r\n\r\n        GenericRecord genericRecord = new GenericData.Record(schema);\r\n        Map&lt;String, Object&gt; jsonData = jsonStringMapper(jsonString);\r\n        jsonData.forEach(genericRecord::put);\r\n\r\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n        DatumWriter&lt;GenericRecord&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(schema);\r\n        Encoder encoder = EncoderFactory.get().binaryEncoder(outputStream, null);\r\n        datumWriter.write(genericRecord, encoder);\r\n        encoder.flush();\r\n\r\n        return outputStream.toByteArray();\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; jsonStringMapper(String jsonString) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        return mapper.readValue(jsonString, HashMap.class);\r\n    }\r\n}\r\n```\r\n\r\nMy POJO for deserialization that I expect (getters/setters omitted):\r\n```java\r\npublic class MKB10 {\r\n    private Integer ID;\r\n    private Integer ACTUAL;\r\n    private String MKB_CODE;\r\n    private String MKB_NAME;\r\n    private String REC_CODE;\r\n    private String ID_PARENT;\r\n    private String DATE;\r\n    private Integer ADDL_CODE;\r\n}\r\n```\r\n\r\nDeserialization method with hardcoded schema:\r\n```java\r\n    public MKB10 getMkb10(byte[] data ) throws IOException {\r\n        String strJson = &quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;;\r\n        Schema schema = new Schema.Parser().parse(strJson);\r\n\r\n        SpecificDatumReader&lt;MKB10&gt; reader = new SpecificDatumReader&lt;&gt;(schema);\r\n        BinaryDecoder decoder = DecoderFactory.get().binaryDecoder(data, null);\r\n\r\n        var mkb10 = reader.read(null, decoder);\r\n\r\n        return mkb10;\r\n    }\r\n```\r\n\r\nAs a result I need to take POJO but have classload Exception:\r\n```\r\njava.lang.ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class api.clients.dictionary.MKB10 (org.apache.avro.generic.GenericData$Record is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @6283d8b8; api.clients.dictionary.MKB10 is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @77049094)\r\n```\r\n","title":"Avro deserialization classload issue","body":"<p>My task is deserialize byte[] to POJO that was serialized with avro schema from json String.</p>\n<p>Schema example:</p>\n<pre><code>&quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;\n</code></pre>\n<p>Data for serialization saved as string in postgres:</p>\n<pre><code>{&quot;ID&quot;: 3602, &quot;ACTUAL&quot;: 1, &quot;MKB_CODE&quot;: &quot;H53.2&quot;, &quot;MKB_NAME&quot;: &quot;\\u0414\\u0438\\u043f\\u043b\\u043e\\u043f\\u0438\\u044f&quot;, &quot;REC_CODE&quot;: &quot;0710H532&quot;, &quot;ID_PARENT&quot;: &quot;3599&quot;}\n</code></pre>\n<p>Class for serialize json String data to byte array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonAvroSerializer {\n    public byte[] jsonAvroSerialize(String jsonString, String schemaString) throws IOException {\n        Schema.Parser parser = new Schema.Parser();\n        Schema schema = parser.parse(schemaString);\n\n        GenericRecord genericRecord = new GenericData.Record(schema);\n        Map&lt;String, Object&gt; jsonData = jsonStringMapper(jsonString);\n        jsonData.forEach(genericRecord::put);\n\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        DatumWriter&lt;GenericRecord&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(schema);\n        Encoder encoder = EncoderFactory.get().binaryEncoder(outputStream, null);\n        datumWriter.write(genericRecord, encoder);\n        encoder.flush();\n\n        return outputStream.toByteArray();\n    }\n\n    private Map&lt;String, Object&gt; jsonStringMapper(String jsonString) throws IOException {\n        ObjectMapper mapper = new ObjectMapper();\n\n        return mapper.readValue(jsonString, HashMap.class);\n    }\n}\n</code></pre>\n<p>My POJO for deserialization that I expect (getters/setters omitted):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MKB10 {\n    private Integer ID;\n    private Integer ACTUAL;\n    private String MKB_CODE;\n    private String MKB_NAME;\n    private String REC_CODE;\n    private String ID_PARENT;\n    private String DATE;\n    private Integer ADDL_CODE;\n}\n</code></pre>\n<p>Deserialization method with hardcoded schema:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public MKB10 getMkb10(byte[] data ) throws IOException {\n        String strJson = &quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;;\n        Schema schema = new Schema.Parser().parse(strJson);\n\n        SpecificDatumReader&lt;MKB10&gt; reader = new SpecificDatumReader&lt;&gt;(schema);\n        BinaryDecoder decoder = DecoderFactory.get().binaryDecoder(data, null);\n\n        var mkb10 = reader.read(null, decoder);\n\n        return mkb10;\n    }\n</code></pre>\n<p>As a result I need to take POJO but have classload Exception:</p>\n<pre><code>java.lang.ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class api.clients.dictionary.MKB10 (org.apache.avro.generic.GenericData$Record is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @6283d8b8; api.clients.dictionary.MKB10 is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @77049094)\n</code></pre>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1556948298,"creation_date":1556948298,"answer_id":55979807,"question_id":55979752,"body_markdown":"`Files.readString(Path)` was introduced in Java 11. It seems like your installation is still on Java 8.\r\n\r\nFirst make sure your project uses Java 11 by setting the correct SDK and language level under Project Settings/Project.\r\n\r\nIf that doesn&#39;t work, make sure that you have installed the JDK 11 version of IntelliJ. You can choose between the JDK 8 and JDK 11 version on the IntelliJ download page when you click on the small downwards angle to the right of the download button on the [IntelliJ download page](https://www.jetbrains.com/idea/download/).","title":"intelliJ cannot find a specific method","body":"<p><code>Files.readString(Path)</code> was introduced in Java 11. It seems like your installation is still on Java 8.</p>\n\n<p>First make sure your project uses Java 11 by setting the correct SDK and language level under Project Settings/Project.</p>\n\n<p>If that doesn't work, make sure that you have installed the JDK 11 version of IntelliJ. You can choose between the JDK 8 and JDK 11 version on the IntelliJ download page when you click on the small downwards angle to the right of the download button on the <a href=\"https://www.jetbrains.com/idea/download/\" rel=\"noreferrer\">IntelliJ download page</a>.</p>\n"},{"tags":[],"owner":{"account_id":8252494,"reputation":879,"user_id":9372934,"display_name":"Lindstorm"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1639794615,"creation_date":1556955152,"answer_id":55980478,"question_id":55979752,"body_markdown":"As Axel&#39;s answer pointed out, the problem did have to do with the Java version, but it was not the SDK or language level. \r\n\r\nWhat solved it was by going to File &gt; Settings &gt; Build &gt; Compiler &gt; Java Compiler. I then changed the Project Bytecode Version to 11 and removed Per Module Bytecode Version entries that were set to 10.\r\n\r\nNote if this error keeps happening to you, this could be because the source and target version is not specified in your pom.xml. See [this question](https://stackoverflow.com/questions/33421568/intellij-target-bytecode-reverting) for more details","title":"intelliJ cannot find a specific method","body":"<p>As Axel's answer pointed out, the problem did have to do with the Java version, but it was not the SDK or language level.</p>\n<p>What solved it was by going to File &gt; Settings &gt; Build &gt; Compiler &gt; Java Compiler. I then changed the Project Bytecode Version to 11 and removed Per Module Bytecode Version entries that were set to 10.</p>\n<p>Note if this error keeps happening to you, this could be because the source and target version is not specified in your pom.xml. See <a href=\"https://stackoverflow.com/questions/33421568/intellij-target-bytecode-reverting\">this question</a> for more details</p>\n"},{"tags":[],"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587974583,"creation_date":1587974583,"answer_id":61454225,"question_id":55979752,"body_markdown":"The same with Lindstorm and Axel answers, the issue is due to a mis-configuration of you Java version. You probably build your source code using different source/target versions than JDK 11 (at least for Files::readString). I fix the issue using the above method.\r\n  \r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;11&lt;/source&gt;\r\n            &lt;target&gt;11&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n  \r\nI added in the maven plugin `maven-compiler-plugin` the `configuration` part. If you do not have this part (ex. you use spring boot run), add it in your pom.xml `plugins` area.","title":"intelliJ cannot find a specific method","body":"<p>The same with Lindstorm and Axel answers, the issue is due to a mis-configuration of you Java version. You probably build your source code using different source/target versions than JDK 11 (at least for Files::readString). I fix the issue using the above method.</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;11&lt;/source&gt;\n        &lt;target&gt;11&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>I added in the maven plugin <code>maven-compiler-plugin</code> the <code>configuration</code> part. If you do not have this part (ex. you use spring boot run), add it in your pom.xml <code>plugins</code> area.</p>\n"},{"tags":[],"owner":{"account_id":9795689,"reputation":1259,"user_id":7258827,"display_name":"AppleCiderGuy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620061422,"creation_date":1620061422,"answer_id":67372933,"question_id":55979752,"body_markdown":"after changing the Project Bytecode Version as mentioned by @Lindstorm, intelliJ was still showing errors while compiling. I did the following to ensure the right (modified) config is picked. \r\n\r\n- invalidate the cache from files &gt; invalidate cache. \r\n- close the project.\r\n- remove the project from intellij.\r\n- delete the `.idea` file from the root of the project.\r\n- open the project again.\r\n\r\nthis will ensure that the change of Project Bytecode Version to JDK 11 is picked by IntelliJ.","title":"intelliJ cannot find a specific method","body":"<p>after changing the Project Bytecode Version as mentioned by @Lindstorm, intelliJ was still showing errors while compiling. I did the following to ensure the right (modified) config is picked.</p>\n<ul>\n<li>invalidate the cache from files &gt; invalidate cache.</li>\n<li>close the project.</li>\n<li>remove the project from intellij.</li>\n<li>delete the <code>.idea</code> file from the root of the project.</li>\n<li>open the project again.</li>\n</ul>\n<p>this will ensure that the change of Project Bytecode Version to JDK 11 is picked by IntelliJ.</p>\n"}],"owner":{"account_id":8252494,"reputation":879,"user_id":9372934,"display_name":"Lindstorm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11672,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":55980478,"answer_count":4,"score":10,"last_activity_date":1697602896,"creation_date":1556947729,"question_id":55979752,"body_markdown":"I am getting a compile error in the following code that I do not know how to fix.\r\n\r\n    String path = &quot;document.txt&quot;;\r\n    File file = new File(path);\r\n    Files.readString(file.toPath()); //cannot find symbol method readString(java.nio.file.Path)\r\n\r\n&gt;Error:(8, 14) java: cannot find symbol&lt;br/&gt;\r\nsymbol:   method readString(java.nio.file.Path)&lt;br/&gt;\r\n location: class java.nio.file.Files\r\n\r\nThere are a number of things to note.\r\n\r\n - This only happens for `readString(Path)` in `java.nio.file.Files`. If I were to try `size(Path)` (another method in `java.nio.file.Files`), it works\r\n - This code does not work in intelliJ but it works in eclipse\r\n \r\n - This code works if I create a new project in intelliJ but not in my current Maven project that I cloned from github\r\n\r\nI have tried all suggestions [here][1] including:\r\n\r\n - Build &gt; Rebuild Project\r\n - Recompiling just `Test.java`\r\n - File &gt; Invalidate Caches\r\n - Checked the /src folder is marked as source folder\r\n - Reimporting Maven dependencies\r\n\r\n \r\n\r\n\r\n[1]:https://stackoverflow.com/questions/12132003/getting-cannot-find-symbol-in-java-project-in-intellij","title":"intelliJ cannot find a specific method","body":"<p>I am getting a compile error in the following code that I do not know how to fix.</p>\n<pre><code>String path = &quot;document.txt&quot;;\nFile file = new File(path);\nFiles.readString(file.toPath()); //cannot find symbol method readString(java.nio.file.Path)\n</code></pre>\n<blockquote>\n<p>Error:(8, 14) java: cannot find symbol<br/>\nsymbol:   method readString(java.nio.file.Path)<br/>\nlocation: class java.nio.file.Files</p>\n</blockquote>\n<p>There are a number of things to note.</p>\n<ul>\n<li><p>This only happens for <code>readString(Path)</code> in <code>java.nio.file.Files</code>. If I were to try <code>size(Path)</code> (another method in <code>java.nio.file.Files</code>), it works</p>\n</li>\n<li><p>This code does not work in intelliJ but it works in eclipse</p>\n</li>\n<li><p>This code works if I create a new project in intelliJ but not in my current Maven project that I cloned from github</p>\n</li>\n</ul>\n<p>I have tried all suggestions <a href=\"https://stackoverflow.com/questions/12132003/getting-cannot-find-symbol-in-java-project-in-intellij\">here</a> including:</p>\n<ul>\n<li>Build &gt; Rebuild Project</li>\n<li>Recompiling just <code>Test.java</code></li>\n<li>File &gt; Invalidate Caches</li>\n<li>Checked the /src folder is marked as source folder</li>\n<li>Reimporting Maven dependencies</li>\n</ul>\n"},{"tags":["java","spring-boot","spring-security","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":13547347,"reputation":2140,"user_id":9773274,"display_name":"NatFar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582173030,"creation_date":1582173030,"answer_id":60312920,"question_id":60309614,"body_markdown":"There are two OAuth implementations for Spring Security: the deprecated Spring Security OAuth project and the new Spring Security 5 OAuth classes.\r\n\r\nThese properties are for the deprecated project:\r\n```\r\nsecurity.oauth2.resource.token-info-uri=xxx\r\nsecurity.oauth2.client.resource.tokenInfoUri\r\n```\r\n\r\nAnd these are for Spring Security 5:\r\n```\r\nspring.security.oauth2.resource.token-info-uri=...\r\nspring.security.oauth2.resourceserver=...\r\n```\r\n\r\nYou can find more info in this [SO question](https://stackoverflow.com/questions/56024206/spring-security-oauth2-vs-spring-security-oauth2-core-in-spring/56024752#56024752).\r\n\r\nPS. Using the spring-boot-starter-security starter will import Spring Security 5.\r\n\r\n","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p>There are two OAuth implementations for Spring Security: the deprecated Spring Security OAuth project and the new Spring Security 5 OAuth classes.</p>\n\n<p>These properties are for the deprecated project:</p>\n\n<pre><code>security.oauth2.resource.token-info-uri=xxx\nsecurity.oauth2.client.resource.tokenInfoUri\n</code></pre>\n\n<p>And these are for Spring Security 5:</p>\n\n<pre><code>spring.security.oauth2.resource.token-info-uri=...\nspring.security.oauth2.resourceserver=...\n</code></pre>\n\n<p>You can find more info in this <a href=\"https://stackoverflow.com/questions/56024206/spring-security-oauth2-vs-spring-security-oauth2-core-in-spring/56024752#56024752\">SO question</a>.</p>\n\n<p>PS. Using the spring-boot-starter-security starter will import Spring Security 5.</p>\n"},{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1697602891,"creation_date":1582174184,"answer_id":60313075,"question_id":60309614,"body_markdown":"[Spring Security OAuth][1] &amp; [Spring Security][2] \r\n\r\n&gt; The Spring Security OAuth project is deprecated. The latest OAuth 2.0\r\n&gt; support is provided by Spring Security\r\n\r\nThe property entries starting with \r\n\r\n    security.oauth2.*\r\n\r\nare part of the deprecated Spring Security OAuth ( [example][3] ) and the properties starting with \r\n\r\n     spring.security.oauth2.*\r\n\r\nare part of the Spring Security ( The official documentation of current spring boot [Security Properties][4] )\r\n\r\n\r\nAdditional References\r\n\r\n - [Spring Security OAuth 2.0 Roadmap Update][5]\r\n - [OAuth 2.0 Migration Guide][6]\r\n - [OAuth 2.0 Features Matrix][7]\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-oauth\r\n  [2]: https://github.com/spring-projects/spring-security\r\n  [3]: https://docs.spring.io/spring-security-oauth2-boot/docs/2.7.x/reference/html5/#common-application-properties\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#security-properties\r\n  [5]: https://spring.io/blog/2019/11/14/spring-security-oauth-2-0-roadmap-update\r\n  [6]: https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\r\n  [7]: https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Features-Matrix","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p><a href=\"https://github.com/spring-projects/spring-security-oauth\" rel=\"nofollow noreferrer\">Spring Security OAuth</a> &amp; <a href=\"https://github.com/spring-projects/spring-security\" rel=\"nofollow noreferrer\">Spring Security</a></p>\n<blockquote>\n<p>The Spring Security OAuth project is deprecated. The latest OAuth 2.0\nsupport is provided by Spring Security</p>\n</blockquote>\n<p>The property entries starting with</p>\n<pre><code>security.oauth2.*\n</code></pre>\n<p>are part of the deprecated Spring Security OAuth ( <a href=\"https://docs.spring.io/spring-security-oauth2-boot/docs/2.7.x/reference/html5/#common-application-properties\" rel=\"nofollow noreferrer\">example</a> ) and the properties starting with</p>\n<pre><code> spring.security.oauth2.*\n</code></pre>\n<p>are part of the Spring Security ( The official documentation of current spring boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#security-properties\" rel=\"nofollow noreferrer\">Security Properties</a> )</p>\n<p>Additional References</p>\n<ul>\n<li><a href=\"https://spring.io/blog/2019/11/14/spring-security-oauth-2-0-roadmap-update\" rel=\"nofollow noreferrer\">Spring Security OAuth 2.0 Roadmap Update</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\" rel=\"nofollow noreferrer\">OAuth 2.0 Migration Guide</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Features-Matrix\" rel=\"nofollow noreferrer\">OAuth 2.0 Features Matrix</a></li>\n</ul>\n"}],"owner":{"account_id":2554674,"reputation":596,"user_id":6585764,"accept_rate":40,"display_name":"Fran&#231;ois-David Lessard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3450,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":60313075,"answer_count":2,"score":4,"last_activity_date":1697602891,"creation_date":1582148160,"question_id":60309614,"body_markdown":"I&#39;m currently learning and experimenting with the different Spring Boot Security OAuth2 packages and I&#39;m really confused with the actual configuration properties names. I found on the internet and on multiple Spring Documentation pages different naming schemes for these properties. For example I found\r\n\r\n    security.oauth2.resource.token-info-uri=xxx\r\n    security.oauth2.client.resource.tokenInfoUri\r\n    spring.security.oauth2.resource.token-info-uri=xxx\r\n    spring.security.oauth2.resourceserver ...\r\n    ...\r\n\r\nI&#39;m trying to make sense of all this and would like to know what are the differences with all of them. Are they version related, package related, are they typos, are some names deprecated, ... ?\r\n\r\nRegards\r\n\r\nP.S. I&#39;m currently using Spring Boot 2.2.4\r\n\r\n\r\n\r\n\r\n","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p>I'm currently learning and experimenting with the different Spring Boot Security OAuth2 packages and I'm really confused with the actual configuration properties names. I found on the internet and on multiple Spring Documentation pages different naming schemes for these properties. For example I found</p>\n\n<pre><code>security.oauth2.resource.token-info-uri=xxx\nsecurity.oauth2.client.resource.tokenInfoUri\nspring.security.oauth2.resource.token-info-uri=xxx\nspring.security.oauth2.resourceserver ...\n...\n</code></pre>\n\n<p>I'm trying to make sense of all this and would like to know what are the differences with all of them. Are they version related, package related, are they typos, are some names deprecated, ... ?</p>\n\n<p>Regards</p>\n\n<p>P.S. I'm currently using Spring Boot 2.2.4</p>\n"},{"tags":["java","json","jackson","micronaut"],"answers":[{"tags":[],"owner":{"account_id":29694316,"reputation":1,"user_id":22757980,"display_name":"Peter K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697601753,"creation_date":1697565935,"answer_id":77311290,"question_id":77099446,"body_markdown":"I recommend to change the controller return type to `String` and return `jsonNode.toString()`, which seems to work.\r\n\r\n```java\r\npackage com.fasterxml.jackson.databind;\r\n```\r\nIt seems the problem is related to \r\n```\r\nJsonNode implements Iterable&lt;JsonNode&gt;\r\n```\r\nand micronaut does not pick up the correct serializer for `JsonNode`.\r\n","title":"Problem serializing JsonNode within micronaut controller response object","body":"<p>I recommend to change the controller return type to <code>String</code> and return <code>jsonNode.toString()</code>, which seems to work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.fasterxml.jackson.databind;\n</code></pre>\n<p>It seems the problem is related to</p>\n<pre><code>JsonNode implements Iterable&lt;JsonNode&gt;\n</code></pre>\n<p>and micronaut does not pick up the correct serializer for <code>JsonNode</code>.</p>\n"}],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697601753,"creation_date":1694627783,"question_id":77099446,"body_markdown":"I&#39;ve used a jackson ObjectMapper to parse some text JSON to a JsonNode (using `readTree`). I can print out the pretty printed string and it all looks good.\r\n\r\nIf that JsonNode is on an object returned by a micronaut controller though, then I&#39;m not seeing any of the fields. I just get the object and array structure. Seems odd, what am I missing?\r\n\r\n    [\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ]\r\n            ]","title":"Problem serializing JsonNode within micronaut controller response object","body":"<p>I've used a jackson ObjectMapper to parse some text JSON to a JsonNode (using <code>readTree</code>). I can print out the pretty printed string and it all looks good.</p>\n<p>If that JsonNode is on an object returned by a micronaut controller though, then I'm not seeing any of the fields. I just get the object and array structure. Seems odd, what am I missing?</p>\n<pre><code>[\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ]\n        ]\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-security","thymeleaf"],"comments":[{"owner":{"account_id":2000274,"reputation":814,"user_id":1791492,"accept_rate":100,"display_name":"Aaditya Gavandalkar"},"score":0,"creation_date":1454088503,"post_id":35090329,"comment_id":57902824,"body_markdown":"How about adding the user details in a Cookie which will be accessible to every webpage within the domain?","body":"How about adding the user details in a Cookie which will be accessible to every webpage within the domain?"},{"owner":{"account_id":1700309,"reputation":1007,"user_id":1560584,"accept_rate":71,"display_name":"Balaji Krishnan"},"score":1,"creation_date":1454088551,"post_id":35090329,"comment_id":57902851,"body_markdown":"use spring security taglib... considering you are using thymeleaf as template refer this : http://www.thymeleaf.org/doc/articles/springsecurity.html","body":"use spring security taglib... considering you are using thymeleaf as template refer this : <a href=\"http://www.thymeleaf.org/doc/articles/springsecurity.html\" rel=\"nofollow noreferrer\">thymeleaf.org/doc/articles/springsecurity.html</a>"},{"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"score":0,"creation_date":1454090459,"post_id":35090329,"comment_id":57903881,"body_markdown":"@AadityaGavandalkar. Thanks for the suggestion. I suppose I could somehow set the data in a cookie and read it via JavaScript, but I believe there ought to be a decent way to access the same data server-side. In PHP for example we could set the data in $_SESSION and access it in any view potentially.","body":"@AadityaGavandalkar. Thanks for the suggestion. I suppose I could somehow set the data in a cookie and read it via JavaScript, but I believe there ought to be a decent way to access the same data server-side. In PHP for example we could set the data in $_SESSION and access it in any view potentially."},{"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"score":0,"creation_date":1454090742,"post_id":35090329,"comment_id":57904038,"body_markdown":"@BalajiKrishnan. Thanks as well. I tried using the sec:authentication tag, but I couldn&#39;t figure out a way to fetch the information I need. Perhaps you could write an answer showing how you can get custom information like firstName in my example? Thanks","body":"@BalajiKrishnan. Thanks as well. I tried using the sec:authentication tag, but I couldn&#39;t figure out a way to fetch the information I need. Perhaps you could write an answer showing how you can get custom information like firstName in my example? Thanks"},{"owner":{"account_id":1700309,"reputation":1007,"user_id":1560584,"accept_rate":71,"display_name":"Balaji Krishnan"},"score":0,"creation_date":1454090962,"post_id":35090329,"comment_id":57904155,"body_markdown":"SO already has an answer - http://stackoverflow.com/questions/7807967/accessing-my-custom-user-object-in-jsp-page-using-spring-3-security","body":"SO already has an answer - <a href=\"http://stackoverflow.com/questions/7807967/accessing-my-custom-user-object-in-jsp-page-using-spring-3-security\" title=\"accessing my custom user object in jsp page using spring 3 security\">stackoverflow.com/questions/7807967/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1454094004,"creation_date":1454094004,"answer_id":35092065,"question_id":35090329,"body_markdown":"It&#39;s quite easy to accomplish this, thanks to a hint from Balaji Krishnan. \r\n\r\nBasically, I had to add the Thymeleaf Spring Security integration module to my build.gradle file as follows: \r\n\r\n    compile(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity3&quot;)\r\n\r\nThen in my template I just used the following markup: \r\n\r\n    &lt;span th:text =&quot;${#authentication.getPrincipal().getUser().getFirstName()}&quot;&gt;&lt;/span&gt;\r\n","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>It's quite easy to accomplish this, thanks to a hint from Balaji Krishnan. </p>\n\n<p>Basically, I had to add the Thymeleaf Spring Security integration module to my build.gradle file as follows: </p>\n\n<pre><code>compile(\"org.thymeleaf.extras:thymeleaf-extras-springsecurity3\")\n</code></pre>\n\n<p>Then in my template I just used the following markup: </p>\n\n<pre><code>&lt;span th:text =\"${#authentication.getPrincipal().getUser().getFirstName()}\"&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6993360,"reputation":1037,"user_id":5361779,"accept_rate":56,"display_name":"B378"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1499755597,"creation_date":1499755597,"answer_id":45027239,"question_id":35090329,"body_markdown":"When using Spring Security 4 and Thymeleaf 3:\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>When using Spring Security 4 and Thymeleaf 3:</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal().getUsername()}\"&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522238809,"creation_date":1522238809,"answer_id":49534130,"question_id":35090329,"body_markdown":"This construct is working for me (spring boot 1.5 and 2.0/thymeleaf 3):  \r\nIt is documented here (bottom of the page) [Thymeleaf + Spring Security integration basics][1]\r\n\r\n    Logged user: &lt;span sec:authentication=&quot;name&quot;&gt;Bob&lt;/span&gt;\r\n\r\nDon&#180;t forget to include the sec tag in the html section of your view:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n          xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n    &lt;head&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n\r\n\r\nI hope this helps!  \r\nHave a nice day!  \r\nThomas\r\n\r\n\r\n  [1]: https://www.thymeleaf.org/doc/articles/springsecurity.html","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>This construct is working for me (spring boot 1.5 and 2.0/thymeleaf 3):<br>\nIt is documented here (bottom of the page) <a href=\"https://www.thymeleaf.org/doc/articles/springsecurity.html\" rel=\"nofollow noreferrer\">Thymeleaf + Spring Security integration basics</a></p>\n\n<pre><code>Logged user: &lt;span sec:authentication=\"name\"&gt;Bob&lt;/span&gt;\n</code></pre>\n\n<p>Don´t forget to include the sec tag in the html section of your view:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:sec=\"http://www.thymeleaf.org/extras/spring-security\"&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n</code></pre>\n\n<p>I hope this helps!<br>\nHave a nice day!<br>\nThomas</p>\n"},{"tags":[],"owner":{"account_id":12627878,"reputation":107,"user_id":9180632,"display_name":"Tanaji Kolekar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537785992,"creation_date":1537785992,"answer_id":52477643,"question_id":35090329,"body_markdown":"As @B378 said, When using Spring Security 4 and Thymeleaf 3: you have to use following.\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\r\n\r\nBecause spring security uses UserDetails internally. And UserDetails contains one function called getUsername().","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>As @B378 said, When using Spring Security 4 and Thymeleaf 3: you have to use following.</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal().getUsername()}\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Because spring security uses UserDetails internally. And UserDetails contains one function called getUsername().</p>\n"},{"tags":[],"owner":{"account_id":3882891,"reputation":2008,"user_id":3214988,"display_name":"sunitkatkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541695563,"creation_date":1541695563,"answer_id":53212382,"question_id":35090329,"body_markdown":"This page was useful. Thanks for all the replies. \r\nPlease note that if you are using the latest Spring Boot i.e. version `2.1.0` then you need to use the following: `thymeleaf-extras-springsecurity5`\r\n\r\n\r\n[LINK][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>This page was useful. Thanks for all the replies. \nPlease note that if you are using the latest Spring Boot i.e. version <code>2.1.0</code> then you need to use the following: <code>thymeleaf-extras-springsecurity5</code></p>\n\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes\" rel=\"nofollow noreferrer\">LINK</a></p>\n"},{"tags":[],"owner":{"account_id":1167798,"reputation":39,"user_id":1145691,"display_name":"user1145691"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1549619125,"creation_date":1549619125,"answer_id":54589641,"question_id":35090329,"body_markdown":"For me, When using Spring boot 2.1.2 I need to use the following\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal()}&quot;&gt;&lt;/span&gt; &lt;!-- No &quot;.getUsername()&quot;--&gt;\r\nWith thymeleaf-extras-springsecurity5\r\n","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>For me, When using Spring boot 2.1.2 I need to use the following</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal()}\"&gt;&lt;/span&gt; &lt;!-- No \".getUsername()\"--&gt;\n</code></pre>\n\n<p>With thymeleaf-extras-springsecurity5</p>\n"},{"tags":[],"owner":{"account_id":1850614,"reputation":1024,"user_id":1677230,"display_name":"user1677230"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1648642012,"creation_date":1576117696,"answer_id":59296859,"question_id":35090329,"body_markdown":"When using Spring boot 2.2.1.\r\n\r\nFor the maven, Add these lines to the pom.xml\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIn the thymeleaf\r\n```\r\n&lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\r\n&lt;span th:text=&quot;${#authentication.getPrincipal().authorities}&quot;&gt;&lt;/span&gt;\r\n```","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>When using Spring boot 2.2.1.</p>\n<p>For the maven, Add these lines to the pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In the thymeleaf</p>\n<pre><code>&lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\n&lt;span th:text=&quot;${#authentication.getPrincipal().authorities}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2248953,"reputation":2149,"user_id":1981644,"display_name":"Ullas Hunka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586622216,"creation_date":1586622216,"answer_id":61160026,"question_id":35090329,"body_markdown":"For thymleaf 4 and above you have to modify some classes in order to get the info. Heres how you can do that:\r\n\r\nFirst, add the getter of your user `getUser(){return this.user;}` in the UserDetails class and then push that object in the UserDetailsService object. Without these changes, thymleaf will not parse your HTML file. \r\n\r\nThen you can get the info as follows:\r\n\r\n`&lt;span sec:authentication=&quot;principal.user.name&quot;&gt;`","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>For thymleaf 4 and above you have to modify some classes in order to get the info. Heres how you can do that:</p>\n\n<p>First, add the getter of your user <code>getUser(){return this.user;}</code> in the UserDetails class and then push that object in the UserDetailsService object. Without these changes, thymleaf will not parse your HTML file. </p>\n\n<p>Then you can get the info as follows:</p>\n\n<p><code>&lt;span sec:authentication=\"principal.user.name\"&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":8383036,"reputation":641,"user_id":6294316,"display_name":"mkkabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673945875,"creation_date":1673945875,"answer_id":75143972,"question_id":35090329,"body_markdown":"Don&#39;t forget to check if a user is authenticated before trying to print his detais\r\n\r\n    &lt;th:block th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;)}&quot;&gt;\r\n                        &lt;span&gt;Hello&lt;/span&gt;\r\n                        &lt;span th:text=&quot;${#authentication.getPrincipal().getFullName()}&quot;&gt;&lt;/span&gt;\r\n                    &lt;/th:block&gt;","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>Don't forget to check if a user is authenticated before trying to print his detais</p>\n<pre><code>&lt;th:block th:if=&quot;${#authorization.expression('isAuthenticated()')}&quot;&gt;\n                    &lt;span&gt;Hello&lt;/span&gt;\n                    &lt;span th:text=&quot;${#authentication.getPrincipal().getFullName()}&quot;&gt;&lt;/span&gt;\n                &lt;/th:block&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680240139,"creation_date":1680240139,"answer_id":75895108,"question_id":35090329,"body_markdown":"On 2023-March, to display username from either local or social login(like Facebook), I took this method: (when I&#39;m using)\r\n - spring boot version: 3.0.4 \r\n - related tech: Maven and Lombok\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n      &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nhtml top\r\n\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \txmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n    \txmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n\r\nhtml body\r\n\r\n    &lt;h3 th:inline=&quot;text&quot;&gt;\r\n    \tuser: &lt;span sec:authentication=&quot;name&quot;&gt;not found&lt;/span&gt;\r\n    &lt;/h3&gt;\r\nbean class\r\n\r\n    @AllArgsConstructor\r\n    public class CustomOAuth2User implements OAuth2User {\r\n    \r\n    \tprivate OAuth2User oAuth2User;\r\n    \r\n    \t@Override\r\n    \tpublic String getName() {\r\n    \t\treturn oAuth2User.getAttribute(&quot;name&quot;);\r\n    \t}\r\n    }\r\n\r\nPart of rendered view page:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MhgsM.png","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>On 2023-March, to display username from either local or social login(like Facebook), I took this method: (when I'm using)</p>\n<ul>\n<li>spring boot version: 3.0.4</li>\n<li>related tech: Maven and Lombok</li>\n</ul>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n  &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>html top</p>\n<pre><code>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:th=&quot;http://www.thymeleaf.org&quot;\n    xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\n</code></pre>\n<p>html body</p>\n<pre><code>&lt;h3 th:inline=&quot;text&quot;&gt;\n    user: &lt;span sec:authentication=&quot;name&quot;&gt;not found&lt;/span&gt;\n&lt;/h3&gt;\n</code></pre>\n<p>bean class</p>\n<pre><code>@AllArgsConstructor\npublic class CustomOAuth2User implements OAuth2User {\n\n    private OAuth2User oAuth2User;\n\n    @Override\n    public String getName() {\n        return oAuth2User.getAttribute(&quot;name&quot;);\n    }\n}\n</code></pre>\n<p>Part of rendered view page:\n<a href=\"https://i.stack.imgur.com/MhgsM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MhgsM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":10371815,"reputation":1,"user_id":7649264,"display_name":"Balbino Gachuz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598911,"creation_date":1697598911,"answer_id":77313288,"question_id":35090329,"body_markdown":"I&#39;ve this configuration with **Thymeleaf 3.1.2**, **Sprig Boot 3.1.3** and **Spring Security 6.0.11** (**Java 17**):\r\n\r\nSpring Boot: \r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\nThymeleaf for Spring Security:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nHTML Namespace:\r\n\r\n    xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n\r\nHTML Authenticated user, **option 1**:\r\n\r\n    &lt;span sec:authentication=&quot;principal.firstName&quot;&gt;&lt;/span&gt;\r\n\r\nHTML Authenticated user, **option 2**:\r\n\r\n    &lt;p th:text=&quot;${#authentication.principal.fisrtName}&quot;&gt;&lt;/p&gt;\r\n\r\nObject UserLogin:\r\n\r\n    public class UsuarioLogin implements Serializable {\r\n\r\n\t   private static final long serialVersionUID = 1L;\r\n\r\n\t   private Integer cve;\r\n\t   private String name;\r\n\t   private String firstName;\r\n\t   private Perfil perfil;\r\n\r\nRef: https://www.baeldung.com/get-user-in-spring-security ","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>I've this configuration with <strong>Thymeleaf 3.1.2</strong>, <strong>Sprig Boot 3.1.3</strong> and <strong>Spring Security 6.0.11</strong> (<strong>Java 17</strong>):</p>\n<p>Spring Boot:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Thymeleaf for Spring Security:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>HTML Namespace:</p>\n<pre><code>xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\n</code></pre>\n<p>HTML Authenticated user, <strong>option 1</strong>:</p>\n<pre><code>&lt;span sec:authentication=&quot;principal.firstName&quot;&gt;&lt;/span&gt;\n</code></pre>\n<p>HTML Authenticated user, <strong>option 2</strong>:</p>\n<pre><code>&lt;p th:text=&quot;${#authentication.principal.fisrtName}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>Object UserLogin:</p>\n<pre><code>public class UsuarioLogin implements Serializable {\n\n   private static final long serialVersionUID = 1L;\n\n   private Integer cve;\n   private String name;\n   private String firstName;\n   private Perfil perfil;\n</code></pre>\n<p>Ref: <a href=\"https://www.baeldung.com/get-user-in-spring-security\" rel=\"nofollow noreferrer\">https://www.baeldung.com/get-user-in-spring-security</a></p>\n"}],"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50704,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":35092065,"answer_count":11,"score":17,"last_activity_date":1697598911,"creation_date":1454087989,"question_id":35090329,"body_markdown":"I have a Spring Boot application that uses Spring Security and Thymeleaf template. I am trying to display the logged-in user&#39;s first name and last name in a template when the controller is managed by a subclass of WebConfigurerAdapter. \r\n\r\nSo, say my WebConfigurerAdapter subclass looks like this\r\n\r\n    @Configuration\r\n    public class MvcConfig extends WebMvcConfigurerAdapter{\r\n\r\n        @Override\r\n        public void addViewControllers(ViewControllerRegistry registry){\r\n            registry.addViewController(&quot;/some-logged-in-page&quot;).setViewName(&quot;some-logged-in-page&quot;);\r\n            registry.addViewController(&quot;/login&quot;).setViewName(&quot;login&quot;);\r\n\r\n        }\r\n        ....\r\n    }\r\n\r\nMy User entity class looks like this\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    public class User {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false, updatable = false)\r\n        private Long id;\r\n\r\n\r\n\r\n        @Column(name=&quot;first_name&quot;, nullable = false)\r\n        private String firstName;\r\n\r\n\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n        ...\r\n    }\r\n\r\n\r\nIn my template, I have tried using code like \r\n\r\n    &lt;div sec:authentication=&quot;firstName&quot;&gt;&lt;/div&gt; \r\n\r\nBut it didn&#39;t work. \r\n\r\nI know it is possible to use a ControllerAdvise as follows: \r\n\r\n    @ControllerAdvice\r\n    public class CurrentUserControllerAdvice {\r\n        @ModelAttribute(&quot;currentUser&quot;)\r\n        public UserDetails getCurrentUser(Authentication authentication) {\r\n            return (authentication == null) ? null : (UserDetails) authentication.getPrincipal();\r\n        }\r\n    }\r\n\r\nand then access the details in the template using code like: \r\n\r\n    &lt;span th:text =&quot;${currentUser.getUser().getFirstName()}&quot;&gt;&lt;/span&gt;\r\n\r\n\r\nBut this doesn&#39;t work with any view controller registered with my class MvcConfig. Rather I will need to make sure each of my controllers are separate classes.\r\n\r\nSo, could someone kindly point me to a way to automatically insert the logged-in user details to my view, e.g. some-logged-in-page.html in this example? Thanks","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>I have a Spring Boot application that uses Spring Security and Thymeleaf template. I am trying to display the logged-in user's first name and last name in a template when the controller is managed by a subclass of WebConfigurerAdapter. </p>\n\n<p>So, say my WebConfigurerAdapter subclass looks like this</p>\n\n<pre><code>@Configuration\npublic class MvcConfig extends WebMvcConfigurerAdapter{\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry){\n        registry.addViewController(\"/some-logged-in-page\").setViewName(\"some-logged-in-page\");\n        registry.addViewController(\"/login\").setViewName(\"login\");\n\n    }\n    ....\n}\n</code></pre>\n\n<p>My User entity class looks like this</p>\n\n<pre><code>@Entity\n@Table(name = \"user\")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", nullable = false, updatable = false)\n    private Long id;\n\n\n\n    @Column(name=\"first_name\", nullable = false)\n    private String firstName;\n\n\n    public String getFirstName() {\n        return firstName;\n    }\n    ...\n}\n</code></pre>\n\n<p>In my template, I have tried using code like </p>\n\n<pre><code>&lt;div sec:authentication=\"firstName\"&gt;&lt;/div&gt; \n</code></pre>\n\n<p>But it didn't work. </p>\n\n<p>I know it is possible to use a ControllerAdvise as follows: </p>\n\n<pre><code>@ControllerAdvice\npublic class CurrentUserControllerAdvice {\n    @ModelAttribute(\"currentUser\")\n    public UserDetails getCurrentUser(Authentication authentication) {\n        return (authentication == null) ? null : (UserDetails) authentication.getPrincipal();\n    }\n}\n</code></pre>\n\n<p>and then access the details in the template using code like: </p>\n\n<pre><code>&lt;span th:text =\"${currentUser.getUser().getFirstName()}\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>But this doesn't work with any view controller registered with my class MvcConfig. Rather I will need to make sure each of my controllers are separate classes.</p>\n\n<p>So, could someone kindly point me to a way to automatically insert the logged-in user details to my view, e.g. some-logged-in-page.html in this example? Thanks</p>\n"},{"tags":["java","stream","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697454889,"post_id":77301354,"comment_id":136277818,"body_markdown":"Do you also get the OOME, if you do _nothing_ inside the `forEach`?","body":"Do you also get the OOME, if you do <i>nothing</i> inside the <code>forEach</code>?"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1697460445,"post_id":77301354,"comment_id":136278811,"body_markdown":"Posts on stackoverflow get nothing from me.","body":"Posts on stackoverflow get nothing from me."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697511789,"post_id":77301354,"comment_id":136285902,"body_markdown":"K.Nicholas, hello. I write I wrote my question in more detail.","body":"K.Nicholas, hello. I write I wrote my question in more detail."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697512810,"post_id":77301354,"comment_id":136285950,"body_markdown":"Cfrick, thank you. I try it:\n\nAn empty method  OOMEpositionGrid.getLazyDataView().getItems().forEach   does not give an error","body":"Cfrick, thank you. I try it:  An empty method  OOMEpositionGrid.getLazyDataView().getItems().forEach   does not give an error"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697521663,"post_id":77301354,"comment_id":136286665,"body_markdown":"I have removed the Vaadin tag and I suggest you turn this question into a question on how &quot;stream&quot; writing out the PDF with whatever library you are using.","body":"I have removed the Vaadin tag and I suggest you turn this question into a question on how &quot;stream&quot; writing out the PDF with whatever library you are using."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697525212,"post_id":77301354,"comment_id":136287170,"body_markdown":"Sorry. As it turned out, I checked on 100 thousand records. In this case, there were no errors. But with the number of over 100 thousand records  get OOME ( It turns out that this problem concerns Vaadin. Namely, how can I get data in parts for writing to a PDF file from Grid table....","body":"Sorry. As it turned out, I checked on 100 thousand records. In this case, there were no errors. But with the number of over 100 thousand records  get OOME ( It turns out that this problem concerns Vaadin. Namely, how can I get data in parts for writing to a PDF file from Grid table...."},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697528382,"post_id":77301354,"comment_id":136287656,"body_markdown":"Why do you want to do this? Eliminate Vaadin, use a scrolling resultset directly from your DB.","body":"Why do you want to do this? Eliminate Vaadin, use a scrolling resultset directly from your DB."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697532208,"post_id":77301354,"comment_id":136288336,"body_markdown":"I have a web application with vaadin. I have a page with reports. These page use filters. Vaadin has Lazy Loading. This allows you to display a limited number of records in the page. So I have a beautiful report on the site. But it was necessary to upload the report to a pdf file. Based on your words, it turns out that it is necessary to write other functionality, ignoring all the features of Lazy Loading Vaadin. This is probably the only solution, but it&#39;s very sad :(","body":"I have a web application with vaadin. I have a page with reports. These page use filters. Vaadin has Lazy Loading. This allows you to display a limited number of records in the page. So I have a beautiful report on the site. But it was necessary to upload the report to a pdf file. Based on your words, it turns out that it is necessary to write other functionality, ignoring all the features of Lazy Loading Vaadin. This is probably the only solution, but it&#39;s very sad :("}],"answers":[{"tags":[],"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598902,"creation_date":1697598902,"answer_id":77313287,"question_id":77301354,"body_markdown":"Thanks cfrick for help. \r\n\r\nI have nice report by my page and I used Lazy Loading with filter and API Criteria:\r\n\r\nMy method:\r\n\r\n    positionService.getAll(\r\n                        filter,\r\n                        PageRequest.of(query.getPage(),\r\n                                query.getPageSize(),\r\n                                Sort.by(springSortOrders))\r\n                ).stream();\r\n\r\nMy service:\r\n\r\n    @Service\r\n    public class PositionCustomService extends CustomService&lt;Position&gt; {\r\n    \r\n        private final static Logger LOGGER = LogManager.getLogger(PositionCustomService.class);\r\n    \r\n        private final PositionRepository repository;\r\n    \r\n        @Autowired\r\n        public PositionCustomService(PositionRepository repository) {\r\n            this.repository = repository;\r\n        }\r\n    \r\n        public Page&lt;Position&gt; getAll(PageRequest pageRequest) {\r\n            return repository.findAll(pageRequest);\r\n        }\r\n    \r\n        public List&lt;Position&gt; getAll(Filter filter) {\r\n            return repository.findAll(bySearchWithFilter(filter, Position.class));\r\n        }\r\n    \r\n        public Page&lt;Position&gt; getAll(Filter filter, PageRequest pageRequest) {\r\n            return repository.findAll(bySearchWithFilter(filter, Position.class), pageRequest);\r\n        }\r\n    \r\n        public Map&lt;LocalDate, Long&gt; getCountByDays(int days) {\r\n            return repository.countByDays(days);\r\n        }\r\n    }\r\n\r\nMy CustomService:\r\n\r\n    public abstract class CustomService&lt;T&gt; {\r\n    \r\n        public static &lt;T&gt; Specification&lt;T&gt; bySearchWithFilter(Filter filter, Class&lt;T&gt; clazz) {\r\n    \r\n            return (Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criterailBuilder) -&gt; {\r\n    \r\n                List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    \r\n                // Add Predicates for tables to be joined\r\n                List&lt;JoinColumnProps&gt; joinColumnProps = filter.getJoinColumnProps();\r\n    \r\n                if (joinColumnProps != null &amp;&amp; !joinColumnProps.isEmpty()) {\r\n                    for (JoinColumnProps joinColumnProp : joinColumnProps) {\r\n                        addJoinColumnProps(predicates, joinColumnProp, criterailBuilder, root);\r\n                    }\r\n                }\r\n    \r\n                List&lt;AttributeFilter&gt; attributeFilters = filter.getAttributeFilters();\r\n    \r\n                if (attributeFilters != null &amp;&amp; !attributeFilters.isEmpty()) {\r\n    \r\n                    for (final AttributeFilter attributeFilter : attributeFilters) {\r\n                        addPredicates(predicates, attributeFilter, criterailBuilder, root);\r\n                    }\r\n                }\r\n    \r\n                if (predicates.isEmpty()) {\r\n                    return criterailBuilder.conjunction();\r\n                }\r\n    \r\n                return criterailBuilder.and(predicates.toArray(new Predicate[0]));\r\n            };\r\n        }\r\n    \r\n        private static &lt;T&gt; void addJoinColumnProps(List&lt;Predicate&gt; predicates, JoinColumnProps joinColumnProp,\r\n                                                   CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\r\n    \r\n            AttributeFilter attributeFilter = joinColumnProp.getSearchAttrFilter();\r\n            Join&lt;Object, Object&gt; joinParent = root.join(joinColumnProp.getJoinColumnName());\r\n    \r\n            String property = attributeFilter.getField().getNameField();\r\n            Path expression = joinParent.get(property);\r\n    \r\n            addPredicate(predicates, attributeFilter, criterailBuilder, expression);\r\n        }\r\n    \r\n        private static &lt;T&gt; void addPredicates(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\r\n                                              CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\r\n            String property = attributeFilter.getField().getNameField();\r\n            Path expression = root.get(property);\r\n    \r\n            addPredicate(predicates, attributeFilter, criterailBuilder, expression);\r\n        }\r\n    \r\n        private static void addPredicate(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\r\n                                         CriteriaBuilder criterailBuilder, Path expression) {\r\n            switch (attributeFilter.getOperator()) {\r\n                case &quot;=&quot;:\r\n                    predicates.add(criterailBuilder.equal(expression, attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;LIKE&quot;:\r\n                    predicates.add(criterailBuilder.like(expression, &quot;%&quot; + attributeFilter.getValue() + &quot;%&quot;));\r\n                    break;\r\n                case &quot;IN&quot;:\r\n                    predicates.add(criterailBuilder.in(expression).value(attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&gt;&quot;:\r\n                    predicates.add(criterailBuilder.greaterThan(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&lt;&quot;:\r\n                    predicates.add(criterailBuilder.lessThan(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&gt;=&quot;:\r\n                    predicates.add(criterailBuilder.greaterThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&lt;=&quot;:\r\n                    predicates.add(criterailBuilder.lessThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;!&quot;:\r\n                    predicates.add(criterailBuilder.notEqual(expression, attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;IsNull&quot;:\r\n                    predicates.add(criterailBuilder.isNull(expression));\r\n                    break;\r\n                case &quot;NotNull&quot;:\r\n                    predicates.add(criterailBuilder.isNotNull(expression));\r\n                    break;\r\n                default:\r\n                    throw new IllegalArgumentException(attributeFilter.getOperator() + &quot; is not a valid predicate&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nMy repo:\r\n\r\n    \r\n        @Repository\r\n        public interface PositionRepository extends JpaRepository&lt;Position, Long&gt;, JpaSpecificationExecutor&lt;Position&gt;, PositionRepositoryCustom {\r\n        }\r\n    \r\n    \r\n        @Repository\r\n        public interface PositionRepositoryCustom {\r\n        \r\n            Map&lt;LocalDate, Long&gt; countByDays(int days);\r\n        }\r\n    \r\n    public class PositionRepositoryImpl implements PositionRepositoryCustom {\r\n    \r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        @Override\r\n        public Map&lt;LocalDate, Long&gt; countByDays(int days) {\r\n    \r\n            CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n            CriteriaQuery cq = cb.createQuery();\r\n    \r\n            Root&lt;Position&gt; position = cq.from(Position.class);\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    \r\n            Instant endDate = Instant.now();\r\n            Instant startDate = endDate.minus(days, ChronoUnit.DAYS)\r\n                    .truncatedTo(ChronoUnit.DAYS);\r\n    \r\n            Expression dateWithoutTimeExp = cb.function(&quot;date&quot;, Instant.class, position.get(PositionModelFilter.MESSAGE_DATE.getNameField()));\r\n    \r\n            cq.multiselect(dateWithoutTimeExp, cb.count(position.get(PositionModelFilter.ID.getNameField())));\r\n    \r\n            cq.groupBy(dateWithoutTimeExp);\r\n    \r\n            predicates.add(cb.between(position.get(PositionModelFilter.MESSAGE_DATE.getNameField()),\r\n                    startDate, endDate));\r\n            cq.where(predicates.toArray(new Predicate[0]));\r\n    \r\n            Map&lt;LocalDate, Long&gt; resMap = new HashMap&lt;&gt;();\r\n            entityManager.createQuery(cq).getResultList().forEach(elem -&gt; {\r\n                Object[] mas = (Object[])elem;\r\n                resMap.put(((Date)mas[0]).toLocalDate(), (long)mas[1]);\r\n            });\r\n    \r\n            return resMap;\r\n        }\r\n    }\r\n\r\n    public interface JpaSpecificationExecutor&lt;T&gt; {\r\n        Optional&lt;T&gt; findOne(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        Page&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Pageable pageable);\r\n    \r\n        List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Sort sort);\r\n    \r\n        long count(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        boolean exists(Specification&lt;T&gt; spec);\r\n    }\r\n\r\nI found the only solution to how to work with big data: I started making several limited queries:\r\n\r\n    int index = 0;\r\n            int limit = 10_000;\r\n    \r\n            while (true) {\r\n                log.debug(&quot;Загружается партия записей: &quot; + index);\r\n                List&lt;Position&gt; res = positionService.getAll(\r\n                                positionFilterView.getFilter(),\r\n                                PageRequest.of(index,\r\n                                        limit,\r\n                                        Sort.by(Sort.Order.asc(&quot;datetime&quot;)))\r\n                        ).stream().collect(Collectors.toList());\r\n    \r\n                if (res.isEmpty()) break;\r\n    \r\n                Table dataTable = new Table(UnitValue.createPercentArray(columnWidths));\r\n                res.forEach(elem -&gt; {\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                });\r\n    \r\n                pdfExporter.getDocument().add(dataTable);\r\n                //pdfExporter.getDocument().flush();\r\n    \r\n                index++;\r\n            }\r\n\r\nThe only problem is that 10 thousand records are written to the file in 1 minute. It&#39;s a very long time (\r\n\r\n","title":"How to read data by portions in Vaadin for export to PDF","body":"<p>Thanks cfrick for help.</p>\n<p>I have nice report by my page and I used Lazy Loading with filter and API Criteria:</p>\n<p>My method:</p>\n<pre><code>positionService.getAll(\n                    filter,\n                    PageRequest.of(query.getPage(),\n                            query.getPageSize(),\n                            Sort.by(springSortOrders))\n            ).stream();\n</code></pre>\n<p>My service:</p>\n<pre><code>@Service\npublic class PositionCustomService extends CustomService&lt;Position&gt; {\n\n    private final static Logger LOGGER = LogManager.getLogger(PositionCustomService.class);\n\n    private final PositionRepository repository;\n\n    @Autowired\n    public PositionCustomService(PositionRepository repository) {\n        this.repository = repository;\n    }\n\n    public Page&lt;Position&gt; getAll(PageRequest pageRequest) {\n        return repository.findAll(pageRequest);\n    }\n\n    public List&lt;Position&gt; getAll(Filter filter) {\n        return repository.findAll(bySearchWithFilter(filter, Position.class));\n    }\n\n    public Page&lt;Position&gt; getAll(Filter filter, PageRequest pageRequest) {\n        return repository.findAll(bySearchWithFilter(filter, Position.class), pageRequest);\n    }\n\n    public Map&lt;LocalDate, Long&gt; getCountByDays(int days) {\n        return repository.countByDays(days);\n    }\n}\n</code></pre>\n<p>My CustomService:</p>\n<pre><code>public abstract class CustomService&lt;T&gt; {\n\n    public static &lt;T&gt; Specification&lt;T&gt; bySearchWithFilter(Filter filter, Class&lt;T&gt; clazz) {\n\n        return (Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criterailBuilder) -&gt; {\n\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n            // Add Predicates for tables to be joined\n            List&lt;JoinColumnProps&gt; joinColumnProps = filter.getJoinColumnProps();\n\n            if (joinColumnProps != null &amp;&amp; !joinColumnProps.isEmpty()) {\n                for (JoinColumnProps joinColumnProp : joinColumnProps) {\n                    addJoinColumnProps(predicates, joinColumnProp, criterailBuilder, root);\n                }\n            }\n\n            List&lt;AttributeFilter&gt; attributeFilters = filter.getAttributeFilters();\n\n            if (attributeFilters != null &amp;&amp; !attributeFilters.isEmpty()) {\n\n                for (final AttributeFilter attributeFilter : attributeFilters) {\n                    addPredicates(predicates, attributeFilter, criterailBuilder, root);\n                }\n            }\n\n            if (predicates.isEmpty()) {\n                return criterailBuilder.conjunction();\n            }\n\n            return criterailBuilder.and(predicates.toArray(new Predicate[0]));\n        };\n    }\n\n    private static &lt;T&gt; void addJoinColumnProps(List&lt;Predicate&gt; predicates, JoinColumnProps joinColumnProp,\n                                               CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\n\n        AttributeFilter attributeFilter = joinColumnProp.getSearchAttrFilter();\n        Join&lt;Object, Object&gt; joinParent = root.join(joinColumnProp.getJoinColumnName());\n\n        String property = attributeFilter.getField().getNameField();\n        Path expression = joinParent.get(property);\n\n        addPredicate(predicates, attributeFilter, criterailBuilder, expression);\n    }\n\n    private static &lt;T&gt; void addPredicates(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\n                                          CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\n        String property = attributeFilter.getField().getNameField();\n        Path expression = root.get(property);\n\n        addPredicate(predicates, attributeFilter, criterailBuilder, expression);\n    }\n\n    private static void addPredicate(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\n                                     CriteriaBuilder criterailBuilder, Path expression) {\n        switch (attributeFilter.getOperator()) {\n            case &quot;=&quot;:\n                predicates.add(criterailBuilder.equal(expression, attributeFilter.getValue()));\n                break;\n            case &quot;LIKE&quot;:\n                predicates.add(criterailBuilder.like(expression, &quot;%&quot; + attributeFilter.getValue() + &quot;%&quot;));\n                break;\n            case &quot;IN&quot;:\n                predicates.add(criterailBuilder.in(expression).value(attributeFilter.getValue()));\n                break;\n            case &quot;&gt;&quot;:\n                predicates.add(criterailBuilder.greaterThan(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&lt;&quot;:\n                predicates.add(criterailBuilder.lessThan(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&gt;=&quot;:\n                predicates.add(criterailBuilder.greaterThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&lt;=&quot;:\n                predicates.add(criterailBuilder.lessThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;!&quot;:\n                predicates.add(criterailBuilder.notEqual(expression, attributeFilter.getValue()));\n                break;\n            case &quot;IsNull&quot;:\n                predicates.add(criterailBuilder.isNull(expression));\n                break;\n            case &quot;NotNull&quot;:\n                predicates.add(criterailBuilder.isNotNull(expression));\n                break;\n            default:\n                throw new IllegalArgumentException(attributeFilter.getOperator() + &quot; is not a valid predicate&quot;);\n        }\n    }\n}\n</code></pre>\n<p>My repo:</p>\n<pre><code>    @Repository\n    public interface PositionRepository extends JpaRepository&lt;Position, Long&gt;, JpaSpecificationExecutor&lt;Position&gt;, PositionRepositoryCustom {\n    }\n\n\n    @Repository\n    public interface PositionRepositoryCustom {\n    \n        Map&lt;LocalDate, Long&gt; countByDays(int days);\n    }\n\npublic class PositionRepositoryImpl implements PositionRepositoryCustom {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    public Map&lt;LocalDate, Long&gt; countByDays(int days) {\n\n        CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n        CriteriaQuery cq = cb.createQuery();\n\n        Root&lt;Position&gt; position = cq.from(Position.class);\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        Instant endDate = Instant.now();\n        Instant startDate = endDate.minus(days, ChronoUnit.DAYS)\n                .truncatedTo(ChronoUnit.DAYS);\n\n        Expression dateWithoutTimeExp = cb.function(&quot;date&quot;, Instant.class, position.get(PositionModelFilter.MESSAGE_DATE.getNameField()));\n\n        cq.multiselect(dateWithoutTimeExp, cb.count(position.get(PositionModelFilter.ID.getNameField())));\n\n        cq.groupBy(dateWithoutTimeExp);\n\n        predicates.add(cb.between(position.get(PositionModelFilter.MESSAGE_DATE.getNameField()),\n                startDate, endDate));\n        cq.where(predicates.toArray(new Predicate[0]));\n\n        Map&lt;LocalDate, Long&gt; resMap = new HashMap&lt;&gt;();\n        entityManager.createQuery(cq).getResultList().forEach(elem -&gt; {\n            Object[] mas = (Object[])elem;\n            resMap.put(((Date)mas[0]).toLocalDate(), (long)mas[1]);\n        });\n\n        return resMap;\n    }\n}\n\npublic interface JpaSpecificationExecutor&lt;T&gt; {\n    Optional&lt;T&gt; findOne(@Nullable Specification&lt;T&gt; spec);\n\n    List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec);\n\n    Page&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Pageable pageable);\n\n    List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Sort sort);\n\n    long count(@Nullable Specification&lt;T&gt; spec);\n\n    boolean exists(Specification&lt;T&gt; spec);\n}\n</code></pre>\n<p>I found the only solution to how to work with big data: I started making several limited queries:</p>\n<pre><code>int index = 0;\n        int limit = 10_000;\n\n        while (true) {\n            log.debug(&quot;Загружается партия записей: &quot; + index);\n            List&lt;Position&gt; res = positionService.getAll(\n                            positionFilterView.getFilter(),\n                            PageRequest.of(index,\n                                    limit,\n                                    Sort.by(Sort.Order.asc(&quot;datetime&quot;)))\n                    ).stream().collect(Collectors.toList());\n\n            if (res.isEmpty()) break;\n\n            Table dataTable = new Table(UnitValue.createPercentArray(columnWidths));\n            res.forEach(elem -&gt; {\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            });\n\n            pdfExporter.getDocument().add(dataTable);\n            //pdfExporter.getDocument().flush();\n\n            index++;\n        }\n</code></pre>\n<p>The only problem is that 10 thousand records are written to the file in 1 minute. It's a very long time (</p>\n"}],"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697598902,"creation_date":1697453527,"question_id":77301354,"body_markdown":"I have 2 billion records in MySQL.\r\n\r\nI use Vaadin Framework with Lazy Loading (https://vaadin.com/docs/v23/components/grid#lazy-loading) and filter (with callback):\r\n\r\n    private void showData(Filter filter) {\r\n            positionGrid.setItems(query -&gt; {\r\n                var vaadinSortOrders = query.getSortOrders();\r\n                var springSortOrders = new ArrayList&lt;Sort.Order&gt;();\r\n                for (QuerySortOrder so : vaadinSortOrders) {\r\n                    String colKey = so.getSorted();\r\n                    if (so.getDirection() == SortDirection.ASCENDING) {\r\n                        springSortOrders.add(Sort.Order.asc(colKey));\r\n                    } else if (so.getDirection() == SortDirection.DESCENDING) {\r\n                        springSortOrders.add(Sort.Order.desc(colKey));\r\n                    }\r\n                }\r\n                return positionService.getAll(\r\n                        filter,\r\n                        PageRequest.of(query.getPage(),\r\n                                query.getPageSize(),\r\n                                Sort.by(springSortOrders))\r\n                ).stream();\r\n            });\r\n        }\r\n\r\nI need export data in PDF report (I use itextpdf library). But I get an error:\r\n\r\n**java.lang.OutOfMemoryError: Java heap space**\r\n\r\nMy code:\r\n\r\n    private final PositionGrid positionGrid;\r\n\r\n...\r\n\r\n    positionGrid.getLazyDataView().getItems().forEach(elem -&gt; {\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n            });\r\n\r\nTell me please. How do I read the data in parts (I need write it to a PDF file)?\r\n\r\n\r\nThis is my Entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;Positions&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class Position {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;datetime&quot;, nullable = false)\r\n        private Instant datetime;\r\n    \r\n        @Column(name = &quot;posx&quot;, nullable = false)\r\n        private Double posx;\r\n    \r\n        @Column(name = &quot;posy&quot;, nullable = false)\r\n        private Double posy;\r\n    \r\n        @Column(name = &quot;velocity&quot;)\r\n        private Double velocity;\r\n    \r\n        @Column(name = &quot;rssi&quot;)\r\n        private Short rssi;\r\n    \r\n        @Column(name = &quot;pathDelay&quot;)\r\n        private Short pathDelay;\r\n    \r\n        @Column(name = &quot;bs_id&quot;)\r\n        private Integer bsId;\r\n    \r\n        @Column(name = &quot;ssi&quot;, nullable = false)\r\n        private Long ssi;\r\n    }","title":"How to read data by portions in Vaadin for export to PDF","body":"<p>I have 2 billion records in MySQL.</p>\n<p>I use Vaadin Framework with Lazy Loading (<a href=\"https://vaadin.com/docs/v23/components/grid#lazy-loading\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/v23/components/grid#lazy-loading</a>) and filter (with callback):</p>\n<pre><code>private void showData(Filter filter) {\n        positionGrid.setItems(query -&gt; {\n            var vaadinSortOrders = query.getSortOrders();\n            var springSortOrders = new ArrayList&lt;Sort.Order&gt;();\n            for (QuerySortOrder so : vaadinSortOrders) {\n                String colKey = so.getSorted();\n                if (so.getDirection() == SortDirection.ASCENDING) {\n                    springSortOrders.add(Sort.Order.asc(colKey));\n                } else if (so.getDirection() == SortDirection.DESCENDING) {\n                    springSortOrders.add(Sort.Order.desc(colKey));\n                }\n            }\n            return positionService.getAll(\n                    filter,\n                    PageRequest.of(query.getPage(),\n                            query.getPageSize(),\n                            Sort.by(springSortOrders))\n            ).stream();\n        });\n    }\n</code></pre>\n<p>I need export data in PDF report (I use itextpdf library). But I get an error:</p>\n<p><strong>java.lang.OutOfMemoryError: Java heap space</strong></p>\n<p>My code:</p>\n<pre><code>private final PositionGrid positionGrid;\n</code></pre>\n<p>...</p>\n<pre><code>positionGrid.getLazyDataView().getItems().forEach(elem -&gt; {\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n        });\n</code></pre>\n<p>Tell me please. How do I read the data in parts (I need write it to a PDF file)?</p>\n<p>This is my Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;Positions&quot;)\n@Getter\n@Setter\npublic class Position {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;datetime&quot;, nullable = false)\n    private Instant datetime;\n\n    @Column(name = &quot;posx&quot;, nullable = false)\n    private Double posx;\n\n    @Column(name = &quot;posy&quot;, nullable = false)\n    private Double posy;\n\n    @Column(name = &quot;velocity&quot;)\n    private Double velocity;\n\n    @Column(name = &quot;rssi&quot;)\n    private Short rssi;\n\n    @Column(name = &quot;pathDelay&quot;)\n    private Short pathDelay;\n\n    @Column(name = &quot;bs_id&quot;)\n    private Integer bsId;\n\n    @Column(name = &quot;ssi&quot;, nullable = false)\n    private Long ssi;\n}\n</code></pre>\n"},{"tags":["java","algorithm","binary-search"],"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":1,"creation_date":1566320989,"post_id":57578328,"comment_id":101617054,"body_markdown":"To find the first 4, treat 4 as greater than the target value, and 3 as less than the target value. **Don&#39;t** terminate the algorithm early when a value in the array is 4.","body":"To find the first 4, treat 4 as greater than the target value, and 3 as less than the target value. <b>Don&#39;t</b> terminate the algorithm early when a value in the array is 4."},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1566322047,"post_id":57578328,"comment_id":101617443,"body_markdown":"Just iterate backwards until you find a different value, storing the previous index (which you return at the end of the algorithm).","body":"Just iterate backwards until you find a different value, storing the previous index (which you return at the end of the algorithm)."},{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":4,"creation_date":1566322331,"post_id":57578328,"comment_id":101617565,"body_markdown":"@JacobG. Worst case, that results in an O(n) algorithm, which defeats the purpose of a binary search.","body":"@JacobG. Worst case, that results in an O(n) algorithm, which defeats the purpose of a binary search."}],"answers":[{"tags":[],"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1566505877,"creation_date":1566324666,"answer_id":57579396,"question_id":57578328,"body_markdown":"I think the implementation below will do the job correctly: \r\n\r\n    int firstOccurrence(int[] sequence, int x) {\r\n    \tint min = 0;\r\n    \tint max = sequence.length - 1;\r\n    \r\n    \tint result = -1;\r\n    \r\n    \twhile (min &lt;= max)\r\n    \t{\r\n    \t\t// find the mid value and compare it with x\r\n    \t\tint mid = min + ((max - min) / 2);\r\n    \r\n    \t\t// if x is found, update result and search towards left\r\n    \t\tif (x == sequence[mid]) {\r\n    \t\t\tresult = mid;\r\n    \t\t\tmax = mid - 1;\r\n    \t\t} else if (x &lt; sequence[mid]) {\r\n    \t\t\t// discard right half\r\n    \t\t\tmax = mid - 1;\r\n    \t\t} else {\r\n    \t\t\t// discard left half\r\n    \t\t\tmin = mid + 1;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t// return the leftmost index equal to x or -1 if not found\r\n    \treturn result;\r\n    }\r\n\r\n\r\n**Edit:**\r\n\r\nChange the way to compute mid to avoid overflow with larger sums\r\n```java\r\n// Previously, can overflow since we add two integer\r\nint mid = (min + max) / 2;\r\n\r\n// Now\r\nint mid = min + ((max - min) / 2);\r\n\r\n// Another way using the unsigned right shift operator\r\nint mid = (low + high) &gt;&gt;&gt; 1;\r\n// The left operands value (low + high) is moved right\r\n// by the number of bits specified (2 in this case) by the right operand and\r\n// shifted values are filled up with zeros.\r\n// The &gt;&gt;&gt; treats the value as unsigned\r\n```","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>I think the implementation below will do the job correctly: </p>\n\n<pre><code>int firstOccurrence(int[] sequence, int x) {\n    int min = 0;\n    int max = sequence.length - 1;\n\n    int result = -1;\n\n    while (min &lt;= max)\n    {\n        // find the mid value and compare it with x\n        int mid = min + ((max - min) / 2);\n\n        // if x is found, update result and search towards left\n        if (x == sequence[mid]) {\n            result = mid;\n            max = mid - 1;\n        } else if (x &lt; sequence[mid]) {\n            // discard right half\n            max = mid - 1;\n        } else {\n            // discard left half\n            min = mid + 1;\n        }\n    }\n\n    // return the leftmost index equal to x or -1 if not found\n    return result;\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Change the way to compute mid to avoid overflow with larger sums</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Previously, can overflow since we add two integer\nint mid = (min + max) / 2;\n\n// Now\nint mid = min + ((max - min) / 2);\n\n// Another way using the unsigned right shift operator\nint mid = (low + high) &gt;&gt;&gt; 1;\n// The left operands value (low + high) is moved right\n// by the number of bits specified (2 in this case) by the right operand and\n// shifted values are filled up with zeros.\n// The &gt;&gt;&gt; treats the value as unsigned\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1566353970,"creation_date":1566353970,"answer_id":57583627,"question_id":57578328,"body_markdown":"Building on this answer to another binary search question: \r\n\r\nhttps://stackoverflow.com/questions/39416560/how-can-i-simplify-this-working-binary-search-code-in-c/39417165#39417165\r\n\r\nThis is a search that is equivalent to `lower_bound` from C++.  It returns the number of elements smaller than the value you want to find.  That would be\r\nthe index of the first occurrence, or where one would be inserted if there is no occurrence:\r\n\r\n    int numSmaller(int[] seq, int valueToFind)\r\n    {\r\n        int pos=0;\r\n        int limit=seq.length;\r\n        while(pos&lt;limit)\r\n        {\r\n            int testpos = pos+((limit-pos)&gt;&gt;1);\r\n    \r\n            if (seq[testpos]&lt;valueToFind)\r\n                pos=testpos+1;\r\n            else\r\n                limit=testpos;\r\n        }\r\n        return pos;\r\n    }\r\n\r\nNote that we only need to do one comparison per iteration.\r\n\r\nThe linked answer highlights several advantages of writing a binary search this way.","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>Building on this answer to another binary search question: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/39416560/how-can-i-simplify-this-working-binary-search-code-in-c/39417165#39417165\">How can I simplify this working Binary Search code in C?</a></p>\n\n<p>This is a search that is equivalent to <code>lower_bound</code> from C++.  It returns the number of elements smaller than the value you want to find.  That would be\nthe index of the first occurrence, or where one would be inserted if there is no occurrence:</p>\n\n<pre><code>int numSmaller(int[] seq, int valueToFind)\n{\n    int pos=0;\n    int limit=seq.length;\n    while(pos&lt;limit)\n    {\n        int testpos = pos+((limit-pos)&gt;&gt;1);\n\n        if (seq[testpos]&lt;valueToFind)\n            pos=testpos+1;\n        else\n            limit=testpos;\n    }\n    return pos;\n}\n</code></pre>\n\n<p>Note that we only need to do one comparison per iteration.</p>\n\n<p>The linked answer highlights several advantages of writing a binary search this way.</p>\n"},{"tags":[],"owner":{"account_id":14872766,"reputation":69,"user_id":10742104,"display_name":"Ijlal H"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576567236,"creation_date":1576567236,"answer_id":59369329,"question_id":57578328,"body_markdown":"It think it will help you\r\n&lt;br&gt;\r\n\r\n    public static boolean binarysearch(int[] data, int target, int low, int high){\r\n        if(low&gt;high){\r\n            System.out.println(&quot;Target not found&quot;);\r\n            return false;}\r\n            else{\r\n                    int mid=(low+high)/2;\r\n                    if(target==data[mid])\r\n                        return true;\r\n                    else if(target&lt;data[mid])\r\n                        return binarysearch(data, target, low, high);\r\n                    else\r\n                        return binarysearch(data, target, low, high);\r\n                    }\r\n    }","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>It think it will help you\n<br></p>\n\n<pre><code>public static boolean binarysearch(int[] data, int target, int low, int high){\n    if(low&gt;high){\n        System.out.println(\"Target not found\");\n        return false;}\n        else{\n                int mid=(low+high)/2;\n                if(target==data[mid])\n                    return true;\n                else if(target&lt;data[mid])\n                    return binarysearch(data, target, low, high);\n                else\n                    return binarysearch(data, target, low, high);\n                }\n}\n</code></pre>\n"}],"owner":{"account_id":11530548,"reputation":2452,"user_id":8449612,"display_name":"douyu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1942,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57583627,"answer_count":3,"score":1,"last_activity_date":1697598899,"creation_date":1566320015,"question_id":57578328,"body_markdown":"I want to find a target value 4 firstly appeared place in a sequence [1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6]. when I use java.util.Arrays.binaySearch, it returns index is 9, but I expected 7.    \r\n\r\nI look java.util.Arrays.binaySearch [source code](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java)   \r\n\r\nand I found some comments:\r\n&gt; If the array contains multiple elements with the specified value, there is no guarantee which one will be found.\r\n\r\n So how to implement a lower_bound binary search algorithm in Java, which returns the target value firstly appeared place.\r\n\r\nNote: The lower_bound concept comes from C++, but I don&#39;t understand C++ well.","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>I want to find a target value 4 firstly appeared place in a sequence [1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6]. when I use java.util.Arrays.binaySearch, it returns index is 9, but I expected 7.    </p>\n\n<p>I look java.util.Arrays.binaySearch <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java\" rel=\"nofollow noreferrer\">source code</a>   </p>\n\n<p>and I found some comments:</p>\n\n<blockquote>\n  <p>If the array contains multiple elements with the specified value, there is no guarantee which one will be found.</p>\n</blockquote>\n\n<p>So how to implement a lower_bound binary search algorithm in Java, which returns the target value firstly appeared place.</p>\n\n<p>Note: The lower_bound concept comes from C++, but I don't understand C++ well.</p>\n"},{"tags":["python","java","android","kotlin","mobile"],"answers":[{"tags":[],"owner":{"account_id":6799808,"reputation":21,"user_id":5233517,"display_name":"Gold Yon War"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697598634,"creation_date":1697598634,"answer_id":77313276,"question_id":77313006,"body_markdown":"To read all items from Firebase Firestore database in Kotlin, you can use the following steps:\r\n\r\n - Create a reference to the collection that you want to read. \r\n - Get a snapshot of the collection.\r\n - Iterate over the snapshot and get the data from each item.\r\n\r\nThe following code you can see how to read all from users collection.\r\n\r\n    val db = FirebaseFirestore.getInstance()\r\n    val usersRef = db.collection(&quot;users&quot;)\r\n    \r\n    usersRef.get().addOnSuccessListener { snapshot -&gt;\r\n        for (document in snapshot.documents) {\r\n            val user = document.toObject(User::class.java)\r\n    \r\n            // Do something with the user data.\r\n        }\r\n    }\r\n\r\n","title":"How to read all items from firebasestore database. in kotlin","body":"<p>To read all items from Firebase Firestore database in Kotlin, you can use the following steps:</p>\n<ul>\n<li>Create a reference to the collection that you want to read.</li>\n<li>Get a snapshot of the collection.</li>\n<li>Iterate over the snapshot and get the data from each item.</li>\n</ul>\n<p>The following code you can see how to read all from users collection.</p>\n<pre><code>val db = FirebaseFirestore.getInstance()\nval usersRef = db.collection(&quot;users&quot;)\n\nusersRef.get().addOnSuccessListener { snapshot -&gt;\n    for (document in snapshot.documents) {\n        val user = document.toObject(User::class.java)\n\n        // Do something with the user data.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26060570,"reputation":1,"user_id":19910548,"display_name":"Hom Sokhim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697598634,"creation_date":1697591992,"question_id":77313006,"body_markdown":"[enter image description here](https://i.stack.imgur.com/3Ieyk.png)\r\n\r\n\r\nPlease help me! I really need for help. I am a junior developer from cambodia. I use android studio for build app for project at school. This problem it really effect for my project. So I can not do this. ","title":"How to read all items from firebasestore database. in kotlin","body":"<p><a href=\"https://i.stack.imgur.com/3Ieyk.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Please help me! I really need for help. I am a junior developer from cambodia. I use android studio for build app for project at school. This problem it really effect for my project. So I can not do this.</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651034563,"creation_date":1651034563,"answer_id":72023381,"question_id":72021698,"body_markdown":"For Passwords with no id, you can set a Default Password Encoder using DelegatingPasswordEncoder method\r\n```setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)```\r\n\r\nIf this is not set, spring uses ```UnmappedIdPasswordEncoder``` by default, which throws ```IllegalArgumentException``` ","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>For Passwords with no id, you can set a Default Password Encoder using DelegatingPasswordEncoder method\n<code>setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)</code></p>\n<p>If this is not set, spring uses <code>UnmappedIdPasswordEncoder</code> by default, which throws <code>IllegalArgumentException</code></p>\n"},{"tags":[],"owner":{"account_id":9098845,"reputation":11,"user_id":7483195,"display_name":"user101871"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688839957,"creation_date":1688839957,"answer_id":76644334,"question_id":72021698,"body_markdown":"I believe the following will work also:\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n      \r\n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\r\n        encoders.put(null, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\r\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\r\n    }","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>I believe the following will work also:</p>\n<pre><code>@Bean\npublic PasswordEncoder passwordEncoder(){\n  \n    Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\n    encoders.put(null, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\n    encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\n    return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19234622,"reputation":1701,"user_id":14055826,"display_name":"13ibrahimov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598071,"creation_date":1697597519,"answer_id":77313236,"question_id":72021698,"body_markdown":"You&#39;ve called DelegatingPasswordEncoder constructor with the following signature:\r\n\r\n    public DelegatingPasswordEncoder(String idForEncode, Map&lt;String,PasswordEncoder&gt; idToPasswordEncoder)\r\n\r\n```idForEncode``` param is used to determine which PasswordEncoder to employ when using the ```encode()``` method. E.g. when a user creates an account or changes their password, your app will hash the password using the PasswordEncoder specified by idForEncode. In your case, NoOpPasswordEncoder.\r\n\r\nHowever, for password matching, such as during a user login, the ```matches()``` method of the PasswordEncoder is used. DelegatingPasswordEncoder doesn&#39;t rely on the idForEncode param for password matching. As mentioned in the verified answer you should use `setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)` method to define the PasswordEncoder to delegate to in case your passwords do not include an id prefix.\r\n\r\nThink of a scenario when you decide to change the encoding algorithm in your app for newly registered users to BCrypt, but for old users whose passwords were hashed via NoOpPasswordEncoder &amp; already stored, you want to keep using NoOpPasswordEncoder for match verification:\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        Map&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;, new SCryptPasswordEncoder());\r\n    \r\n        var passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders);\r\n        passwordEncoder.setDefaultPasswordEncoderForMatches(NoOpPasswordEncoder.getInstance());\r\n\r\n        return passwordEncoder;\r\n    }","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>You've called DelegatingPasswordEncoder constructor with the following signature:</p>\n<pre><code>public DelegatingPasswordEncoder(String idForEncode, Map&lt;String,PasswordEncoder&gt; idToPasswordEncoder)\n</code></pre>\n<p><code>idForEncode</code> param is used to determine which PasswordEncoder to employ when using the <code>encode()</code> method. E.g. when a user creates an account or changes their password, your app will hash the password using the PasswordEncoder specified by idForEncode. In your case, NoOpPasswordEncoder.</p>\n<p>However, for password matching, such as during a user login, the <code>matches()</code> method of the PasswordEncoder is used. DelegatingPasswordEncoder doesn't rely on the idForEncode param for password matching. As mentioned in the verified answer you should use <code>setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)</code> method to define the PasswordEncoder to delegate to in case your passwords do not include an id prefix.</p>\n<p>Think of a scenario when you decide to change the encoding algorithm in your app for newly registered users to BCrypt, but for old users whose passwords were hashed via NoOpPasswordEncoder &amp; already stored, you want to keep using NoOpPasswordEncoder for match verification:</p>\n<pre><code>@Bean\nPasswordEncoder passwordEncoder() {\n    Map&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\n    encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\n    encoders.put(&quot;scrypt&quot;, new SCryptPasswordEncoder());\n\n    var passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders);\n    passwordEncoder.setDefaultPasswordEncoderForMatches(NoOpPasswordEncoder.getInstance());\n\n    return passwordEncoder;\n}\n</code></pre>\n"}],"owner":{"account_id":21522619,"reputation":19,"user_id":15863607,"display_name":"sergio jauregui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72023381,"answer_count":3,"score":0,"last_activity_date":1697598071,"creation_date":1651016415,"question_id":72021698,"body_markdown":"I have recently implemented the DelegatingPasswordEncoder that delegates to PassworEncoders instances upon the prefix of the stored password. The problem is that for the previous stored password that has no prefix it throws an error &#39;There is no PasswordEncoder mapped for the id &quot;null&quot;&#39;.I have been told that to defining a default PasswordEncoder to authenticate password that has no prefix the PasswordEncoder prefix has to be specified it in the first parameter of the DelegatingPasswordEncoder () constructor as I specified in the below code example because the stored password are encoded as plain text.\r\n\r\n```\r\n@Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n      \r\n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\r\n        encoders.put(&quot;&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\r\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\r\n    }\r\n```","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>I have recently implemented the DelegatingPasswordEncoder that delegates to PassworEncoders instances upon the prefix of the stored password. The problem is that for the previous stored password that has no prefix it throws an error 'There is no PasswordEncoder mapped for the id &quot;null&quot;'.I have been told that to defining a default PasswordEncoder to authenticate password that has no prefix the PasswordEncoder prefix has to be specified it in the first parameter of the DelegatingPasswordEncoder () constructor as I specified in the below code example because the stored password are encoded as plain text.</p>\n<pre><code>@Bean\n    public PasswordEncoder passwordEncoder(){\n      \n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\n        encoders.put(&quot;&quot;, NoOpPasswordEncoder.getInstance());\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\n    }\n</code></pre>\n"},{"tags":["java","kotlin","bigdecimal"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1611795210,"post_id":65929370,"comment_id":116568470,"body_markdown":"Are you using Java, or Kotlin?  It makes a difference.  You&#39;ll need to pick one to get an accurate answer.","body":"Are you using Java, or Kotlin?  It makes a difference.  You&#39;ll need to pick one to get an accurate answer."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1697536493,"post_id":65929370,"comment_id":136289235,"body_markdown":"You can&#39;t actually do this equation using entirely `BigDecimal` numbers because Java&#39;s BigDecimal has no `pow` function (or any exponentiation operation by whatever name) that takes a `BigDecimal` argument. `BigDecimal` is not designed for scientific calculations like this one; its main use is for financial/accounting and similar domains.","body":"You can&#39;t actually do this equation using entirely <code>BigDecimal</code> numbers because Java&#39;s BigDecimal has no <code>pow</code> function (or any exponentiation operation by whatever name) that takes a <code>BigDecimal</code> argument. <code>BigDecimal</code> is not designed for scientific calculations like this one; its main use is for financial/accounting and similar domains."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697598298,"post_id":65929370,"comment_id":136298654,"body_markdown":"To use a fractional exponent, find a third-party library. See related Questions: [here](https://stackoverflow.com/q/3579779/642706), [here](https://stackoverflow.com/q/11848887/642706), [here](https://stackoverflow.com/q/16441769/642706).","body":"To use a fractional exponent, find a third-party library. See related Questions: <a href=\"https://stackoverflow.com/q/3579779/642706\">here</a>, <a href=\"https://stackoverflow.com/q/11848887/642706\">here</a>, <a href=\"https://stackoverflow.com/q/16441769/642706\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1611794958,"creation_date":1611794958,"answer_id":65929521,"question_id":65929370,"body_markdown":"*dividing 1 by 251 is not accurate and this expression always returns 0* \r\n\r\nThis would result in Integer division,  To cure integer division you can do `1.00/251`.  \r\n\r\nAlso you are missing a `new` before `BigDecimal(0.02)`, but even if you did there there is no operator `+` for `BigDecimal` and the `plus` method should be used.","title":"Expressions with BigDecimal Java / Kotlin","body":"<p><em>dividing 1 by 251 is not accurate and this expression always returns 0</em></p>\n<p>This would result in Integer division,  To cure integer division you can do <code>1.00/251</code>.</p>\n<p>Also you are missing a <code>new</code> before <code>BigDecimal(0.02)</code>, but even if you did there there is no operator <code>+</code> for <code>BigDecimal</code> and the <code>plus</code> method should be used.</p>\n"}],"owner":{"account_id":15782522,"reputation":61,"user_id":15083614,"display_name":"Jo&#227;o Pedro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10350,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1697598061,"creation_date":1611793564,"question_id":65929370,"body_markdown":"I need help from those who understand Java / Kotlin.\r\n\r\nI would like to perform some calculations with BigDecimal\r\n\r\nHow would the expression below look using BigDecimal?\r\n\r\n**(1 + 0.02) ^ (1 / 251) - 1**\r\n\r\nI tried to do like this:\r\n\r\n    val x = (BigDecimal.ONE + BigDecimal(0.02)).pow(1/251) - 1\r\n\r\nHowever, dividing 1 by 251 is not accurate and this expression always returns 0\r\n\r\n\r\n \r\n\r\n","title":"Expressions with BigDecimal Java / Kotlin","body":"<p>I need help from those who understand Java / Kotlin.</p>\n<p>I would like to perform some calculations with BigDecimal</p>\n<p>How would the expression below look using BigDecimal?</p>\n<p><strong>(1 + 0.02) ^ (1 / 251) - 1</strong></p>\n<p>I tried to do like this:</p>\n<pre><code>val x = (BigDecimal.ONE + BigDecimal(0.02)).pow(1/251) - 1\n</code></pre>\n<p>However, dividing 1 by 251 is not accurate and this expression always returns 0</p>\n"},{"tags":["java","bash","version","dependency-management"],"comments":[{"owner":{"account_id":327698,"reputation":5680,"user_id":650228,"accept_rate":78,"display_name":"kittylyst"},"score":0,"creation_date":1315402689,"post_id":7334754,"comment_id":8845269,"body_markdown":"Java 5 has been end-of-life for quite a long time. Java 6 will be end-of-life very soon. You should be moving to Java 6 as a priority, and to 7 as soon as you can.","body":"Java 5 has been end-of-life for quite a long time. Java 6 will be end-of-life very soon. You should be moving to Java 6 as a priority, and to 7 as soon as you can."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1315402707,"post_id":7334754,"comment_id":8845275,"body_markdown":"[What have you tried?](http://mattgemmell.com/2008/12/08/what-have-you-tried)","body":"<a href=\"http://mattgemmell.com/2008/12/08/what-have-you-tried\" rel=\"nofollow noreferrer\">What have you tried?</a>"},{"owner":{"account_id":15903,"reputation":323423,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1315404998,"post_id":7334754,"comment_id":8846018,"body_markdown":"@Brian: Nothing; My hope is that someone has a &quot;bash search path function&quot; handy.","body":"@Brian: Nothing; My hope is that someone has a &quot;bash search path function&quot; handy."},{"owner":{"account_id":15903,"reputation":323423,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1315405206,"post_id":7334754,"comment_id":8846097,"body_markdown":"@kittylyst: This is a minimal requirement. My software doesn&#39;t need Java 6 features, so there is no point forcing users for something better. But thanks for pointing it out anyway.","body":"@kittylyst: This is a minimal requirement. My software doesn&#39;t need Java 6 features, so there is no point forcing users for something better. But thanks for pointing it out anyway."}],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1456707636,"creation_date":1315402609,"answer_id":7334780,"question_id":7334754,"body_markdown":"You can issue `java -version` and read &amp; parse the output\r\n\r\n\r\n    java -version 2&gt;&amp;1 &gt;/dev/null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<p>You can issue <code>java -version</code> and read &amp; parse the output</p>\n\n<pre><code>java -version 2&gt;&amp;1 &gt;/dev/null | grep 'java version' | awk '{print $3}'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":362471,"reputation":30540,"user_id":705676,"accept_rate":64,"display_name":"Michał Šrajer"},"down_vote_count":2,"up_vote_count":55,"is_accepted":false,"score":53,"last_activity_date":1697597241,"creation_date":1315403902,"answer_id":7335120,"question_id":7334754,"body_markdown":"You can obtain java version via:\r\n\r\n    JAVA_VER=$(java -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39; | awk -F &#39;.&#39; &#39;{print $1$2}&#39;)\r\n\r\nit will give you `16` for java like `1.6.0_13`,  `15` for version like `1.5.0_17` and 110 for `openjdk 11.0.6 2020-01-14 LTS`.\r\n\r\nSo you can easily compare it in shell:\r\n\r\n    [ &quot;$JAVA_VER&quot; -ge 15 ] &amp;&amp; echo &quot;ok, java is 1.5 or newer&quot; || echo &quot;it&#39;s too old...&quot;\r\n\r\n**UPDATE:**\r\nThis code should work fine with openjdk and JAVA_TOOL_OPTIONS as mentioned in comments.","title":"Correct way to check Java version from BASH script","body":"<p>You can obtain java version via:</p>\n<pre><code>JAVA_VER=$(java -version 2&gt;&amp;1 | awk -F '&quot;' '/version/ {print $2}' | awk -F '.' '{print $1$2}')\n</code></pre>\n<p>it will give you <code>16</code> for java like <code>1.6.0_13</code>,  <code>15</code> for version like <code>1.5.0_17</code> and 110 for <code>openjdk 11.0.6 2020-01-14 LTS</code>.</p>\n<p>So you can easily compare it in shell:</p>\n<pre><code>[ &quot;$JAVA_VER&quot; -ge 15 ] &amp;&amp; echo &quot;ok, java is 1.5 or newer&quot; || echo &quot;it's too old...&quot;\n</code></pre>\n<p><strong>UPDATE:</strong>\nThis code should work fine with openjdk and JAVA_TOOL_OPTIONS as mentioned in comments.</p>\n"},{"tags":[],"owner":{"account_id":4879,"reputation":240910,"user_id":7552,"accept_rate":100,"display_name":"glenn jackman"},"down_vote_count":1,"up_vote_count":104,"is_accepted":true,"score":103,"last_activity_date":1315405468,"creation_date":1315405468,"answer_id":7335524,"question_id":7334754,"body_markdown":"Perhaps something like:\r\n\r\n    if type -p java; then\r\n        echo found java executable in PATH\r\n        _java=java\r\n    elif [[ -n &quot;$JAVA_HOME&quot; ]] &amp;&amp; [[ -x &quot;$JAVA_HOME/bin/java&quot; ]];  then\r\n        echo found java executable in JAVA_HOME     \r\n        _java=&quot;$JAVA_HOME/bin/java&quot;\r\n    else\r\n        echo &quot;no java&quot;\r\n    fi\r\n    \r\n    if [[ &quot;$_java&quot; ]]; then\r\n        version=$(&quot;$_java&quot; -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39;)\r\n        echo version &quot;$version&quot;\r\n        if [[ &quot;$version&quot; &gt; &quot;1.5&quot; ]]; then\r\n            echo version is more than 1.5\r\n        else         \r\n            echo version is less than 1.5\r\n        fi\r\n    fi\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<p>Perhaps something like:</p>\n\n<pre><code>if type -p java; then\n    echo found java executable in PATH\n    _java=java\nelif [[ -n \"$JAVA_HOME\" ]] &amp;&amp; [[ -x \"$JAVA_HOME/bin/java\" ]];  then\n    echo found java executable in JAVA_HOME     \n    _java=\"$JAVA_HOME/bin/java\"\nelse\n    echo \"no java\"\nfi\n\nif [[ \"$_java\" ]]; then\n    version=$(\"$_java\" -version 2&gt;&amp;1 | awk -F '\"' '/version/ {print $2}')\n    echo version \"$version\"\n    if [[ \"$version\" &gt; \"1.5\" ]]; then\n        echo version is more than 1.5\n    else         \n        echo version is less than 1.5\n    fi\nfi\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5392908,"reputation":436,"user_id":4294886,"display_name":"Richard"},"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1416988909,"creation_date":1416988909,"answer_id":27143937,"question_id":7334754,"body_markdown":"I know this is a very old thread but this will still be of help to others.\r\n\r\nTo know whether you&#39;re running Java 5, 6 or 7, firstly type `java -version`.\r\n\r\nThere will be a line in your output that looks similar to this: &lt;b&gt;java version &quot;1.7.0_55&quot;&lt;/b&gt;\r\n\r\nThen you use this table for converting the &#39;jargon&#39; result to the version number.\r\n\r\n1.7.0_55 is Java 7&lt;br&gt;\r\n1.6.0_75 is Java 6&lt;br&gt;\r\n1.5.0_65 is Java 5&lt;br&gt;\r\n\r\nInformation taken from a page on the Oracle site&lt;br&gt;\r\n[http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html][1]\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html","title":"Correct way to check Java version from BASH script","body":"<p>I know this is a very old thread but this will still be of help to others.</p>\n\n<p>To know whether you're running Java 5, 6 or 7, firstly type <code>java -version</code>.</p>\n\n<p>There will be a line in your output that looks similar to this: <b>java version \"1.7.0_55\"</b></p>\n\n<p>Then you use this table for converting the 'jargon' result to the version number.</p>\n\n<p>1.7.0_55 is Java 7<br>\n1.6.0_75 is Java 6<br>\n1.5.0_65 is Java 5<br></p>\n\n<p>Information taken from a page on the Oracle site<br>\n<a href=\"http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html</a></p>\n"},{"tags":[],"owner":{"account_id":28710,"reputation":988,"user_id":76938,"display_name":"Jinesh Choksi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464878902,"creation_date":1464875783,"answer_id":37593973,"question_id":7334754,"body_markdown":"The method I ended up using is:\r\n\r\n    # Work out the JAVA version we are working with:\r\n    JAVA_VER_MAJOR=&quot;&quot;\r\n    JAVA_VER_MINOR=&quot;&quot;\r\n    JAVA_VER_BUILD=&quot;&quot;\r\n    \r\n    # Based on: http://stackoverflow.com/a/32026447\r\n    for token in $(java -version 2&gt;&amp;1 | grep -i version)\r\n    do\r\n        if [[ $token =~ \\&quot;([[:digit:]])\\.([[:digit:]])\\.(.*)\\&quot; ]]\r\n        then\r\n            JAVA_VER_MAJOR=${BASH_REMATCH[1]}\r\n            JAVA_VER_MINOR=${BASH_REMATCH[2]}\r\n            JAVA_VER_BUILD=${BASH_REMATCH[3]}\r\n            break\r\n        fi\r\n    done\r\n\r\nIt will work correctly even if JAVA_TOOL_OPTIONS is set to something due to filtering done by grep.","title":"Correct way to check Java version from BASH script","body":"<p>The method I ended up using is:</p>\n\n<pre><code># Work out the JAVA version we are working with:\nJAVA_VER_MAJOR=\"\"\nJAVA_VER_MINOR=\"\"\nJAVA_VER_BUILD=\"\"\n\n# Based on: http://stackoverflow.com/a/32026447\nfor token in $(java -version 2&gt;&amp;1 | grep -i version)\ndo\n    if [[ $token =~ \\\"([[:digit:]])\\.([[:digit:]])\\.(.*)\\\" ]]\n    then\n        JAVA_VER_MAJOR=${BASH_REMATCH[1]}\n        JAVA_VER_MINOR=${BASH_REMATCH[2]}\n        JAVA_VER_BUILD=${BASH_REMATCH[3]}\n        break\n    fi\ndone\n</code></pre>\n\n<p>It will work correctly even if JAVA_TOOL_OPTIONS is set to something due to filtering done by grep.</p>\n"},{"tags":[],"owner":{"account_id":3854242,"reputation":377,"user_id":3193604,"display_name":"Manu D."},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1478195367,"creation_date":1478193456,"answer_id":40407601,"question_id":7334754,"body_markdown":"A combination of different answers:\r\n\r\n    JAVA_VER=$(java -version 2&gt;&amp;1 | grep -i version | sed &#39;s/.*version &quot;.*\\.\\(.*\\)\\..*&quot;/\\1/; 1q&#39;)\r\n\r\n- Returns `7` for Java 7 and `8` for Java 8\r\n- Works with OpenJDK and with Oracle JDK\r\n- Works even if the JAVA_TOOL_OPTIONS is set","title":"Correct way to check Java version from BASH script","body":"<p>A combination of different answers:</p>\n\n<pre><code>JAVA_VER=$(java -version 2&gt;&amp;1 | grep -i version | sed 's/.*version \".*\\.\\(.*\\)\\..*\"/\\1/; 1q')\n</code></pre>\n\n<ul>\n<li>Returns <code>7</code> for Java 7 and <code>8</code> for Java 8</li>\n<li>Works with OpenJDK and with Oracle JDK</li>\n<li>Works even if the JAVA_TOOL_OPTIONS is set</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2722,"reputation":94810,"user_id":3827,"accept_rate":94,"display_name":"Eugene Yokota"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1518737610,"creation_date":1518737610,"answer_id":48817958,"question_id":7334754,"body_markdown":"I wrote a bash function that should work for JDK 9 and JDK 10.\r\n\r\n&lt;!-- language: bash --&gt;\r\n\r\n    #!/bin/bash\r\n    \r\n    # returns the JDK version.\r\n    # 8 for 1.8.0_nn, 9 for 9-ea etc, and &quot;no_java&quot; for undetected\r\n    jdk_version() {\r\n      local result\r\n      local java_cmd\r\n      if [[ -n $(type -p java) ]]\r\n      then\r\n        java_cmd=java\r\n      elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n      then\r\n        java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n      fi\r\n      local IFS=$&#39;\\n&#39;\r\n      # remove \\r for Cygwin\r\n      local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n      if [[ -z $java_cmd ]]\r\n      then\r\n        result=no_java\r\n      else\r\n        for line in $lines; do\r\n          if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n          then\r\n            local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n            # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n            if [[ $ver = &quot;1.&quot;* ]]\r\n            then\r\n              result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            else\r\n              result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            fi\r\n          fi\r\n        done\r\n      fi\r\n      echo &quot;$result&quot;\r\n    }\r\n    \r\n    v=&quot;$(jdk_version)&quot;\r\n    echo $v\r\n\r\nThis returns `8` for Java 8 (`&quot;1.8.0_151&quot;` etc), and `9` for Java 9 (`&quot;9-Debian&quot;` etc), which should make it easier to do the further comparison.\r\n","title":"Correct way to check Java version from BASH script","body":"<p>I wrote a bash function that should work for JDK 9 and JDK 10.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\n\n# returns the JDK version.\n# 8 for 1.8.0_nn, 9 for 9-ea etc, and \"no_java\" for undetected\njdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n \"$JAVA_HOME\") &amp;&amp; (-x \"$JAVA_HOME/bin/java\") ]]\n  then\n    java_cmd=\"$JAVA_HOME/bin/java\"\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(\"$java_cmd\" -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *\"version \\\"\"*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version \"\\(.*\\)\"\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = \"1.\"* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo \"$result\"\n}\n\nv=\"$(jdk_version)\"\necho $v\n</code></pre>\n\n<p>This returns <code>8</code> for Java 8 (<code>\"1.8.0_151\"</code> etc), and <code>9</code> for Java 9 (<code>\"9-Debian\"</code> etc), which should make it easier to do the further comparison.</p>\n"},{"tags":[],"owner":{"account_id":5648492,"reputation":25,"user_id":4469848,"display_name":"Fil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529338219,"creation_date":1529338219,"answer_id":50913562,"question_id":7334754,"body_markdown":"Using bashj, an extended bash version (https://sourceforge.net/projects/bashj/), you get a rather compact solution:\r\n\r\n    #!/usr/bin/bashj\r\n    echo System.getProperty(&quot;java.runtime.version&quot;)\r\n\r\nThe answer is provided by an integrated JVM (in ~0.017&#39;&#39;  execution time for the script , and ~0.004&#39;&#39; for the call itself).","title":"Correct way to check Java version from BASH script","body":"<p>Using bashj, an extended bash version (<a href=\"https://sourceforge.net/projects/bashj/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/bashj/</a>), you get a rather compact solution:</p>\n\n<pre><code>#!/usr/bin/bashj\necho System.getProperty(\"java.runtime.version\")\n</code></pre>\n\n<p>The answer is provided by an integrated JVM (in ~0.017''  execution time for the script , and ~0.004'' for the call itself).</p>\n"},{"tags":[],"owner":{"account_id":15038853,"reputation":1515,"user_id":10854225,"display_name":"vincenzopalazzo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546345507,"creation_date":1546345507,"answer_id":53995412,"question_id":7334754,"body_markdown":"I had a similar problem, I wanted to check which version of java was installed to perform two types of application launches.\r\nThe following code has solved my problem\r\n\r\n    jdk_version() {\r\n      local result\r\n      local java_cmd\r\n      if [[ -n $(type -p java) ]]\r\n      then\r\n        java_cmd=java\r\n      elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n      then\r\n        java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n      fi\r\n      local IFS=$&#39;\\n&#39;\r\n      # remove \\r for Cygwin\r\n      local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n      if [[ -z $java_cmd ]]\r\n      then\r\n        result=no_java\r\n      else\r\n        for line in $lines; do\r\n          if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n          then\r\n            local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n            # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n            if [[ $ver = &quot;1.&quot;* ]]\r\n            then\r\n              result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            else\r\n              result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            fi\r\n          fi\r\n        done\r\n      fi\r\n      echo &quot;$result&quot;\r\n    }\r\n    \r\n    _java=&quot;$(jdk_version)&quot;\r\n    echo $_java\r\n    \r\n    if [[ &quot;$_java&quot; &gt; &quot;$8&quot; ]]; then\r\n           echo version is more than 8\r\n          \r\n    else\r\n      echo version is less than 8\r\n     \r\n    fi\r\n\r\n[source][1]\r\n\r\n*I hope to be proved helpful*\r\n\r\n\r\n  [1]: http://eed3si9n.com/detecting-java-version-bash","title":"Correct way to check Java version from BASH script","body":"<p>I had a similar problem, I wanted to check which version of java was installed to perform two types of application launches.\nThe following code has solved my problem</p>\n\n<pre><code>jdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n \"$JAVA_HOME\") &amp;&amp; (-x \"$JAVA_HOME/bin/java\") ]]\n  then\n    java_cmd=\"$JAVA_HOME/bin/java\"\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(\"$java_cmd\" -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *\"version \\\"\"*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version \"\\(.*\\)\"\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = \"1.\"* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo \"$result\"\n}\n\n_java=\"$(jdk_version)\"\necho $_java\n\nif [[ \"$_java\" &gt; \"$8\" ]]; then\n       echo version is more than 8\n\nelse\n  echo version is less than 8\n\nfi\n</code></pre>\n\n<p><a href=\"http://eed3si9n.com/detecting-java-version-bash\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p><em>I hope to be proved helpful</em></p>\n"},{"tags":[],"owner":{"account_id":487921,"reputation":1196,"user_id":1360042,"display_name":"dvlcube"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1592337022,"creation_date":1558457564,"answer_id":56243046,"question_id":7334754,"body_markdown":"The answers above work correctly only for specific Java versions (usually for the ones before Java 9 or for the ones after Java 8.\r\n \r\nI wrote a simple one liner that will return an integer for Java versions 6 through 11 (and possibly all future versions, until they change it again!).\r\n\r\nIt basically drops the &quot;1.&quot; at the beginning of the version number, if it exists, and then considers only the first number before the next &quot;.&quot;.\r\n\r\n`java -version 2&gt;&amp;1 | head -1 | cut -d&#39;&quot;&#39; -f2 | sed &#39;/^1\\./s///&#39; | cut -d&#39;.&#39; -f1`","title":"Correct way to check Java version from BASH script","body":"<p>The answers above work correctly only for specific Java versions (usually for the ones before Java 9 or for the ones after Java 8.</p>\n\n<p>I wrote a simple one liner that will return an integer for Java versions 6 through 11 (and possibly all future versions, until they change it again!).</p>\n\n<p>It basically drops the \"1.\" at the beginning of the version number, if it exists, and then considers only the first number before the next \".\".</p>\n\n<p><code>java -version 2&gt;&amp;1 | head -1 | cut -d'\"' -f2 | sed '/^1\\./s///' | cut -d'.' -f1</code></p>\n"},{"tags":[],"owner":{"account_id":5871853,"reputation":31,"user_id":6494470,"display_name":"David Ben David"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581339940,"creation_date":1580722511,"answer_id":60036471,"question_id":7334754,"body_markdown":"1. in TERMINAL\r\n```\r\njava -version |&amp; grep &#39;version&#39; |&amp; awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;\r\n```\r\n2. in BASH\r\n\r\n```\r\n#!/bin/bash\r\n\r\n\r\necho `java -version 2&gt;&amp;1 | grep &#39;version&#39; 2&gt;&amp;1 | awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;`\r\njver=`java -version 2&gt;&amp;1 | grep &#39;version&#39; 2&gt;&amp;1 | awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;`\r\n\r\nif [[ $jver == &quot;1.8&quot; ]]; then                \r\n     echo $jver is java 8\r\nelse\r\n     echo $jver is java 11\r\nfi\r\n```\r\n\r\nWorks in SUN and Linux\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<ol>\n<li>in TERMINAL</li>\n</ol>\n\n<pre><code>java -version |&amp; grep 'version' |&amp; awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'\n</code></pre>\n\n<ol start=\"2\">\n<li>in BASH</li>\n</ol>\n\n<pre><code>#!/bin/bash\n\n\necho `java -version 2&gt;&amp;1 | grep 'version' 2&gt;&amp;1 | awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'`\njver=`java -version 2&gt;&amp;1 | grep 'version' 2&gt;&amp;1 | awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'`\n\nif [[ $jver == \"1.8\" ]]; then                \n     echo $jver is java 8\nelse\n     echo $jver is java 11\nfi\n</code></pre>\n\n<p>Works in SUN and Linux</p>\n"},{"tags":[],"owner":{"account_id":414776,"reputation":6554,"user_id":789188,"accept_rate":81,"display_name":"zhujik"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1582206558,"creation_date":1582206558,"answer_id":60321470,"question_id":7334754,"body_markdown":"You could also compare the jdk class version number with `javap`:\r\n\r\n    javap -verbose java.lang.String | grep &quot;major version&quot; | cut -d &quot; &quot; -f5\r\n\r\nIf its java 8, this will print 52, and 55 for java 11. With this you can make a simple comparison and you don&#39;t have to deal with the version string parsing.","title":"Correct way to check Java version from BASH script","body":"<p>You could also compare the jdk class version number with <code>javap</code>:</p>\n\n<pre><code>javap -verbose java.lang.String | grep \"major version\" | cut -d \" \" -f5\n</code></pre>\n\n<p>If its java 8, this will print 52, and 55 for java 11. With this you can make a simple comparison and you don't have to deal with the version string parsing.</p>\n"},{"tags":[],"owner":{"account_id":24162,"reputation":10032,"user_id":61298,"accept_rate":67,"display_name":"Matt R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600683885,"creation_date":1600683885,"answer_id":63990433,"question_id":7334754,"body_markdown":"There is a nice portable bash function for this here: http://eed3si9n.com/detecting-java-version-bash\r\n\r\n```\r\njdk_version() {\r\n  local result\r\n  local java_cmd\r\n  if [[ -n $(type -p java) ]]\r\n  then\r\n    java_cmd=java\r\n  elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n  then\r\n    java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n  fi\r\n  local IFS=$&#39;\\n&#39;\r\n  # remove \\r for Cygwin\r\n  local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n  if [[ -z $java_cmd ]]\r\n  then\r\n    result=no_java\r\n  else\r\n    for line in $lines; do\r\n      if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n      then\r\n        local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n        # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n        if [[ $ver = &quot;1.&quot;* ]]\r\n        then\r\n          result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n        else\r\n          result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n        fi\r\n      fi\r\n    done\r\n  fi\r\n  echo &quot;$result&quot;\r\n}\r\n```","title":"Correct way to check Java version from BASH script","body":"<p>There is a nice portable bash function for this here: <a href=\"http://eed3si9n.com/detecting-java-version-bash\" rel=\"nofollow noreferrer\">http://eed3si9n.com/detecting-java-version-bash</a></p>\n<pre><code>jdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\n  then\n    java_cmd=&quot;$JAVA_HOME/bin/java&quot;\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = &quot;1.&quot;* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo &quot;$result&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19054692,"reputation":3493,"user_id":13912132,"display_name":"JCWasmx86"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606836643,"creation_date":1606836643,"answer_id":65093484,"question_id":7334754,"body_markdown":"Another way is:\r\nA file called `release` is located in `$JAVA_HOME`.\r\nOn Java 15 (Debian) it has as content:\r\n```\r\nIMPLEMENTOR=&quot;Debian&quot;\r\nJAVA_VERSION=&quot;15.0.1&quot;\r\nJAVA_VERSION_DATE=&quot;2020-10-20&quot;\r\nMODULES=&quot;java.base java.compiler java.datatransfer java.xml java.prefs java.desktop java.instrument java.logging java.management java.security.sasl java.naming java.rmi java.management.rmi java.net.http java.scripting java.security.jgss java.transaction.xa java.sql java.sql.rowset java.xml.crypto java.se java.smartcardio jdk.accessibility jdk.internal.vm.ci jdk.management jdk.unsupported jdk.internal.vm.compiler jdk.aot jdk.internal.jvmstat jdk.attach jdk.charsets jdk.compiler jdk.crypto.ec jdk.crypto.cryptoki jdk.dynalink jdk.internal.ed jdk.editpad jdk.hotspot.agent jdk.httpserver jdk.incubator.foreign jdk.internal.opt jdk.jdeps jdk.jlink jdk.incubator.jpackage jdk.internal.le jdk.internal.vm.compiler.management jdk.jartool jdk.javadoc jdk.jcmd jdk.management.agent jdk.jconsole jdk.jdwp.agent jdk.jdi jdk.jfr jdk.jshell jdk.jsobject jdk.jstatd jdk.localedata jdk.management.jfr jdk.naming.dns jdk.naming.rmi jdk.net jdk.nio.mapmode jdk.sctp jdk.security.auth jdk.security.jgss jdk.unsupported.desktop jdk.xml.dom jdk.zipfs&quot;\r\nOS_ARCH=&quot;x86_64&quot;\r\nOS_NAME=&quot;Linux&quot;\r\nSOURCE=&quot;&quot;\r\n```\r\nSo you see `JAVA_VERSION`, which contains the version number.\r\n\r\nFor example,\r\n```\r\nmajor=$(echo $JAVA_VERSION | cut -d. -f1)\r\n```\r\nsets `major` to the value 15 (=Major version number), which you can use further.\r\n\r\nIt&#39;s a really simple solution.","title":"Correct way to check Java version from BASH script","body":"<p>Another way is:\nA file called <code>release</code> is located in <code>$JAVA_HOME</code>.\nOn Java 15 (Debian) it has as content:</p>\n<pre><code>IMPLEMENTOR=&quot;Debian&quot;\nJAVA_VERSION=&quot;15.0.1&quot;\nJAVA_VERSION_DATE=&quot;2020-10-20&quot;\nMODULES=&quot;java.base java.compiler java.datatransfer java.xml java.prefs java.desktop java.instrument java.logging java.management java.security.sasl java.naming java.rmi java.management.rmi java.net.http java.scripting java.security.jgss java.transaction.xa java.sql java.sql.rowset java.xml.crypto java.se java.smartcardio jdk.accessibility jdk.internal.vm.ci jdk.management jdk.unsupported jdk.internal.vm.compiler jdk.aot jdk.internal.jvmstat jdk.attach jdk.charsets jdk.compiler jdk.crypto.ec jdk.crypto.cryptoki jdk.dynalink jdk.internal.ed jdk.editpad jdk.hotspot.agent jdk.httpserver jdk.incubator.foreign jdk.internal.opt jdk.jdeps jdk.jlink jdk.incubator.jpackage jdk.internal.le jdk.internal.vm.compiler.management jdk.jartool jdk.javadoc jdk.jcmd jdk.management.agent jdk.jconsole jdk.jdwp.agent jdk.jdi jdk.jfr jdk.jshell jdk.jsobject jdk.jstatd jdk.localedata jdk.management.jfr jdk.naming.dns jdk.naming.rmi jdk.net jdk.nio.mapmode jdk.sctp jdk.security.auth jdk.security.jgss jdk.unsupported.desktop jdk.xml.dom jdk.zipfs&quot;\nOS_ARCH=&quot;x86_64&quot;\nOS_NAME=&quot;Linux&quot;\nSOURCE=&quot;&quot;\n</code></pre>\n<p>So you see <code>JAVA_VERSION</code>, which contains the version number.</p>\n<p>For example,</p>\n<pre><code>major=$(echo $JAVA_VERSION | cut -d. -f1)\n</code></pre>\n<p>sets <code>major</code> to the value 15 (=Major version number), which you can use further.</p>\n<p>It's a really simple solution.</p>\n"},{"tags":[],"owner":{"account_id":5279877,"reputation":1377,"user_id":4215616,"accept_rate":100,"display_name":"Paul Stoner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626797586,"creation_date":1611240186,"answer_id":65829814,"question_id":7334754,"body_markdown":"I found the following works rather well. It is a combination of the answers from [Michał Šrajer][1] and [jmj][2]\r\n\r\n`version=$(java -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/p;&#39; | awk &#39;{ print $1 }&#39;)`.\r\n\r\nI have openJDK 13 installed and without the `awk` command the first answer printed: `130 2020-01-14`. Thus, adding `awk &#39;{ print $1 }&#39;` provides me with just the version.\r\n\r\n  [1]: https://stackoverflow.com/a/7335120/4215616\r\n  [2]: https://stackoverflow.com/a/7334780/4215616","title":"Correct way to check Java version from BASH script","body":"<p>I found the following works rather well. It is a combination of the answers from <a href=\"https://stackoverflow.com/a/7335120/4215616\">Michał Šrajer</a> and <a href=\"https://stackoverflow.com/a/7334780/4215616\">jmj</a></p>\n<p><code>version=$(java -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/p;' | awk '{ print $1 }')</code>.</p>\n<p>I have openJDK 13 installed and without the <code>awk</code> command the first answer printed: <code>130 2020-01-14</code>. Thus, adding <code>awk '{ print $1 }'</code> provides me with just the version.</p>\n"},{"tags":[],"owner":{"account_id":6625798,"reputation":834,"user_id":5116073,"display_name":"Seb T"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1624309621,"creation_date":1624292379,"answer_id":68071437,"question_id":7334754,"body_markdown":"Determining the Java version only using grep with Perl-style regex can be done like this:\r\n```bash\r\njava -version 2&gt;&amp;1 | grep -oP &#39;version &quot;?(1\\.)?\\K\\d+&#39;\r\n```\r\n\r\nThis will print the major version for Java 9 or higher and the minor version for versions lower than 9, for example `8` for Java `1.8` and `11` for Java `11.0.4`.\r\n\r\nIt can be used like this:\r\n```bash\r\nJAVA_MAJOR_VERSION=$(java -version 2&gt;&amp;1 | grep -oP &#39;version &quot;?(1\\.)?\\K\\d+&#39; || true)\r\nif [[ $JAVA_MAJOR_VERSION -lt 8 ]]; then\r\n  echo &quot;Java 8 or higher is required!&quot;\r\n  exit 1\r\nfi\r\n```\r\n\r\nThe `|| true` was added to prevent the script from aborting in case Java is not installed and the Shell option `set -e` was enabled.","title":"Correct way to check Java version from BASH script","body":"<p>Determining the Java version only using grep with Perl-style regex can be done like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>java -version 2&gt;&amp;1 | grep -oP 'version &quot;?(1\\.)?\\K\\d+'\n</code></pre>\n<p>This will print the major version for Java 9 or higher and the minor version for versions lower than 9, for example <code>8</code> for Java <code>1.8</code> and <code>11</code> for Java <code>11.0.4</code>.</p>\n<p>It can be used like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>JAVA_MAJOR_VERSION=$(java -version 2&gt;&amp;1 | grep -oP 'version &quot;?(1\\.)?\\K\\d+' || true)\nif [[ $JAVA_MAJOR_VERSION -lt 8 ]]; then\n  echo &quot;Java 8 or higher is required!&quot;\n  exit 1\nfi\n</code></pre>\n<p>The <code>|| true</code> was added to prevent the script from aborting in case Java is not installed and the Shell option <code>set -e</code> was enabled.</p>\n"},{"tags":[],"owner":{"account_id":6014861,"reputation":18112,"user_id":7939871,"display_name":"L&#233;a Gris"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670848099,"creation_date":1668596164,"answer_id":74459237,"question_id":7334754,"body_markdown":"Getting java version string, using Bash&#39;s built-in parsing capabilities:\r\n\r\n```sh\r\n#!/usr/bin/env bash\r\n\r\njava_cmd=${1:-java}\r\n\r\n# Captures version string between double-quotes\r\nIFS=&#39;&quot;&#39; read -r _ java_version_string _ &lt; &lt;(&quot;${java_cmd}&quot; -version 2&gt;&amp;1)\r\n\r\n# Splits version string at dots and (underscore for patch number)\r\nIFS=&#39;._&#39; read -r \\\r\n  java_version_major \\\r\n  java_version_minor \\\r\n  java_version_build \\\r\n  java_version_patch \\\r\n  &lt;&lt;&lt;&quot;$java_version_string&quot;\r\n\r\n# Debug demo output\r\ndeclare -p java_version_major java_version_minor java_version_build \\\r\n  java_version_patch\r\n```\r\n\r\n**Examples**\r\n\r\nSystem default Java 17:\r\n```sh\r\ndeclare -- java_version_major=&quot;17&quot;\r\ndeclare -- java_version_minor=&quot;0&quot;\r\ndeclare -- java_version_build=&quot;3&quot;\r\ndeclare -- java_version_patch=&quot;&quot;\r\n```\r\n\r\nSpecific Java 8 path provided as argument:\r\n```sh\r\ndeclare -- java_version_major=&quot;1&quot;\r\ndeclare -- java_version_minor=&quot;8&quot;\r\ndeclare -- java_version_build=&quot;0&quot;\r\ndeclare -- java_version_patch=&quot;352&quot;\r\n```","title":"Correct way to check Java version from BASH script","body":"<p>Getting java version string, using Bash's built-in parsing capabilities:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/usr/bin/env bash\n\njava_cmd=${1:-java}\n\n# Captures version string between double-quotes\nIFS='&quot;' read -r _ java_version_string _ &lt; &lt;(&quot;${java_cmd}&quot; -version 2&gt;&amp;1)\n\n# Splits version string at dots and (underscore for patch number)\nIFS='._' read -r \\\n  java_version_major \\\n  java_version_minor \\\n  java_version_build \\\n  java_version_patch \\\n  &lt;&lt;&lt;&quot;$java_version_string&quot;\n\n# Debug demo output\ndeclare -p java_version_major java_version_minor java_version_build \\\n  java_version_patch\n</code></pre>\n<p><strong>Examples</strong></p>\n<p>System default Java 17:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>declare -- java_version_major=&quot;17&quot;\ndeclare -- java_version_minor=&quot;0&quot;\ndeclare -- java_version_build=&quot;3&quot;\ndeclare -- java_version_patch=&quot;&quot;\n</code></pre>\n<p>Specific Java 8 path provided as argument:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>declare -- java_version_major=&quot;1&quot;\ndeclare -- java_version_minor=&quot;8&quot;\ndeclare -- java_version_build=&quot;0&quot;\ndeclare -- java_version_patch=&quot;352&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":190274,"reputation":321,"user_id":430139,"accept_rate":0,"display_name":"ivenhov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696180945,"creation_date":1696171612,"answer_id":77210970,"question_id":7334754,"body_markdown":"This question is still relevant so posting my answer.\r\n\r\nUsing slightly convoluted way by using built-in Bash variable expansions and avoiding creating multiple sub-shells\r\n\r\n    line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*}\r\n\r\nReturns 8 for Java 1.8.0_312 and 17 for 17.0.6\r\n\r\nThis can be used in a script like below\r\n\r\n    #!/bin/bash\r\n\r\n    required=5\r\n\r\n    version=$(line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*})\r\n    \r\n    [[ $version -ge $required ]] &amp;&amp; echo &quot;Java version OK&quot; || echo &quot;Java version too low&quot;","title":"Correct way to check Java version from BASH script","body":"<p>This question is still relevant so posting my answer.</p>\n<p>Using slightly convoluted way by using built-in Bash variable expansions and avoiding creating multiple sub-shells</p>\n<pre><code>line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*}\n</code></pre>\n<p>Returns 8 for Java 1.8.0_312 and 17 for 17.0.6</p>\n<p>This can be used in a script like below</p>\n<pre><code>#!/bin/bash\n\nrequired=5\n\nversion=$(line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*})\n\n[[ $version -ge $required ]] &amp;&amp; echo &quot;Java version OK&quot; || echo &quot;Java version too low&quot;\n</code></pre>\n"}],"owner":{"account_id":15903,"reputation":323423,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111399,"favorite_count":0,"down_vote_count":1,"up_vote_count":80,"accepted_answer_id":7335524,"answer_count":18,"score":79,"last_activity_date":1697597241,"creation_date":1315402494,"question_id":7334754,"body_markdown":"How can I check whether Java is available (in the PATH or via JAVA_HOME) from a bash script and make sure the version is at least 1.5?","title":"Correct way to check Java version from BASH script","body":"<p>How can I check whether Java is available (in the PATH or via JAVA_HOME) from a bash script and make sure the version is at least 1.5?</p>\n"},{"tags":["javascript","java","formatting","format","prettier"],"answers":[{"tags":[],"owner":{"account_id":24650539,"reputation":94,"user_id":22576975,"display_name":"Heath B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697596107,"creation_date":1697596107,"answer_id":77313169,"question_id":77301754,"body_markdown":"You cannot set a prettier config that will add extra spaces into your code like that. Honestly, it&#39;s a bad habit to get into and you should avoid doing that. Line breaks should only be used where they are separating content logically. This would not pass the sniff-test for any code review. If you&#39;re asking about the trailing semicolon, then you can create a .prettierrc file and put this content into it:\r\n\r\n    {\r\n      &quot;semi&quot;: false,\r\n    }","title":"Format JavaScript vscode code to be like java in eclipse","body":"<p>You cannot set a prettier config that will add extra spaces into your code like that. Honestly, it's a bad habit to get into and you should avoid doing that. Line breaks should only be used where they are separating content logically. This would not pass the sniff-test for any code review. If you're asking about the trailing semicolon, then you can create a .prettierrc file and put this content into it:</p>\n<pre><code>{\n  &quot;semi&quot;: false,\n}\n</code></pre>\n"}],"owner":{"account_id":25590503,"reputation":1,"user_id":19367342,"display_name":"Mahmoud Elkafrawy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697596107,"creation_date":1697457387,"question_id":77301754,"body_markdown":"I have code formatted like this\r\n\r\n```\r\n   subRedirect() {\r\n\r\n        let features = this.config.get(&#39;features&#39;)\r\n        if (features !== null) {\r\n            features.forEach(feature =&gt; {\r\n                this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\r\n\r\n            })\r\n\r\n\r\n        }\r\n\r\n    }\r\n```\r\n\r\nbut when editing and saving with prettier it will be like this\r\n\r\n```\r\n subRedirect() {\r\n    let features = this.config.get(&quot;features&quot;);\r\n    if (features !== null) {\r\n      features.forEach((feature) =&gt; {\r\n        this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\r\n      });\r\n    }\r\n  }\r\n```\r\n\r\nis there a way or prettier config file to achieve the first code format\r\n\r\ni tried some extensions on VScode but none working with JavaScript","title":"Format JavaScript vscode code to be like java in eclipse","body":"<p>I have code formatted like this</p>\n<pre><code>   subRedirect() {\n\n        let features = this.config.get('features')\n        if (features !== null) {\n            features.forEach(feature =&gt; {\n                this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\n\n            })\n\n\n        }\n\n    }\n</code></pre>\n<p>but when editing and saving with prettier it will be like this</p>\n<pre><code> subRedirect() {\n    let features = this.config.get(&quot;features&quot;);\n    if (features !== null) {\n      features.forEach((feature) =&gt; {\n        this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\n      });\n    }\n  }\n</code></pre>\n<p>is there a way or prettier config file to achieve the first code format</p>\n<p>i tried some extensions on VScode but none working with JavaScript</p>\n"},{"tags":["java","memory-leaks"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697533627,"post_id":77307535,"comment_id":136288627,"body_markdown":"It&#39;s possible there&#39;s a memory leak in the application. You won&#39;t find it by looking at `top`. Make a full dump of the application and analyze it. You can find tools to help by googling &quot;java memory dump&quot;.","body":"It&#39;s possible there&#39;s a memory leak in the application. You won&#39;t find it by looking at <code>top</code>. Make a full dump of the application and analyze it. You can find tools to help by googling &quot;java memory dump&quot;."},{"owner":{"account_id":8265962,"reputation":1,"user_id":6215506,"display_name":"keller"},"score":0,"creation_date":1697535388,"post_id":77307535,"comment_id":136289005,"body_markdown":"I checked GC and it was basically normal.","body":"I checked GC and it was basically normal."}],"owner":{"account_id":8265962,"reputation":1,"user_id":6215506,"display_name":"keller"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697595645,"creation_date":1697533251,"question_id":77307535,"body_markdown":"Within the cluster, there are several individual machines whose memory continues to increase until the alarm.\r\nI am searching for a long time on net. But no use. Please help or try to give some ideas how to achieve this.\r\n\r\n\r\nCompare abnormal machines with problematic machines, some info show：\r\n\r\n\r\n   abnormal machine： \r\n\r\n - [top show mem 10gb](https://i.stack.imgur.com/bR3BM.png)\r\n\r\n - java Native memeory show commit 9479MB:\r\n\r\n```\r\nNative Memory Tracking:\r\n\r\nTotal: reserved=10651MB, committed=9479MB\r\n-                 Java Heap (reserved=7168MB, committed=7168MB)\r\n                            (mmap: reserved=7168MB, committed=7168MB) \r\n \r\n-                     Class (reserved=1147MB, committed=140MB)\r\n                            (classes #22587)\r\n                            (malloc=3MB #50903) \r\n                            (mmap: reserved=1144MB, committed=137MB) \r\n \r\n-                    Thread (reserved=1020MB, committed=1020MB)\r\n                            (thread #1013)\r\n                            (stack: reserved=1016MB, committed=1016MB)\r\n                            (malloc=3MB #5073) \r\n                            (arena=1MB #2021)\r\n \r\n-                      Code (reserved=262MB, committed=112MB)\r\n                            (malloc=18MB #26576) \r\n                            (mmap: reserved=244MB, committed=93MB) \r\n \r\n-                        GC (reserved=354MB, committed=354MB)\r\n                            (malloc=56MB #58554) \r\n                            (mmap: reserved=298MB, committed=298MB) \r\n \r\n-                  Compiler (reserved=2MB, committed=2MB)\r\n                            (malloc=2MB #4614) \r\n \r\n-                  Internal (reserved=649MB, committed=649MB)\r\n                            (malloc=649MB #66342) \r\n \r\n-                    Symbol (reserved=26MB, committed=26MB)\r\n                            (malloc=24MB #242279) \r\n                            (arena=2MB #1)\r\n \r\n-    Native Memory Tracking (reserved=7MB, committed=7MB)\r\n                            (tracking overhead=7MB)\r\n \r\n-                   Unknown (reserved=14MB, committed=0MB)\r\n                            (mmap: reserved=14MB, committed=0MB)\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nnormal machine\r\n- [top show mem 8.1gb](https://i.stack.imgur.com/K4Hi5.png)\r\n- java Native memeory show commit 9291MB:\r\n\r\n```\r\nNative Memory Tracking:\r\n\r\nTotal: reserved=10465MB, committed=9291MB\r\n-                 Java Heap (reserved=7168MB, committed=7168MB)\r\n                            (mmap: reserved=7168MB, committed=7168MB) \r\n \r\n-                     Class (reserved=1140MB, committed=132MB)\r\n                            (classes #20844)\r\n                            (malloc=4MB #50411) \r\n                            (mmap: reserved=1136MB, committed=128MB) \r\n \r\n-                    Thread (reserved=1087MB, committed=1087MB)\r\n                            (thread #1079)\r\n                            (stack: reserved=1082MB, committed=1082MB)\r\n                            (malloc=3MB #5403) \r\n                            (arena=1MB #2153)\r\n \r\n-                      Code (reserved=262MB, committed=110MB)\r\n                            (malloc=18MB #25669) \r\n                            (mmap: reserved=244MB, committed=92MB) \r\n \r\n-                        GC (reserved=333MB, committed=333MB)\r\n                            (malloc=35MB #38960) \r\n                            (mmap: reserved=298MB, committed=298MB) \r\n \r\n-                  Compiler (reserved=3MB, committed=3MB)\r\n                            (malloc=3MB #5355) \r\n \r\n-                  Internal (reserved=427MB, committed=427MB)\r\n                            (malloc=427MB #50809) \r\n \r\n-                    Symbol (reserved=24MB, committed=24MB)\r\n                            (malloc=22MB #227078) \r\n                            (arena=2MB #1)\r\n \r\n-    Native Memory Tracking (reserved=6MB, committed=6MB)\r\n                            (tracking overhead=6MB)\r\n \r\n-                   Unknown (reserved=14MB, committed=0MB)\r\n                            (mmap: reserved=14MB, committed=0MB) \r\n```\r\n\r\nThe abnormal machine top shows that it takes up 10g of memory, and the normal machine shows 8.1 g. However, the java memory stack shows that the memory consumption on both sides is not much different. The whole thing looks normal, but the memory footprint of abnormal machines is very high.\r\n\r\n\r\n----------\r\n\r\n\r\n Check the stack situation, it seems that the memory occupation of the whole stack is basically the same as that of normal machines, abnormal machines will have several times full gc, but this does not seem to be a problem.\r\n```\r\nabnormal machine:jstat -gc 1954\r\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \r\n 0.0   262144.0  0.0   262144.0 3637248.0 425984.0 3440640.0  2568134.1  140052.0 123958.6 18452.0 15316.6  12853  585.804   3     27.154  612.958\r\n\r\n\r\n\r\nnormal machine:jstat -gc 1973\r\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \r\n 0.0   163840.0  0.0   163840.0 4194304.0 1605632.0 2981888.0  2257346.5  131496.0 114735.3 17356.0 14088.7  10696  336.754   0      0.000  336.754\r\n```\r\nThe entire stack takes up to 7 gigabytes, but java process memory usage has exceeded 10 gigabytes and continues to increase.\r\n\r\nIve tried multiple variations of this, but none of them seem to work. Any ideas?\r\n\r\nThanks in advance.","title":"Within the cluster, there are several individual machines whose memory continues to increase until it exceeds 85%.how to resolve?","body":"<p>Within the cluster, there are several individual machines whose memory continues to increase until the alarm.\nI am searching for a long time on net. But no use. Please help or try to give some ideas how to achieve this.</p>\n<p>Compare abnormal machines with problematic machines, some info show：</p>\n<p>abnormal machine：</p>\n<ul>\n<li><p><a href=\"https://i.stack.imgur.com/bR3BM.png\" rel=\"nofollow noreferrer\">top show mem 10gb</a></p>\n</li>\n<li><p>java Native memeory show commit 9479MB:</p>\n</li>\n</ul>\n<pre><code>Native Memory Tracking:\n\nTotal: reserved=10651MB, committed=9479MB\n-                 Java Heap (reserved=7168MB, committed=7168MB)\n                            (mmap: reserved=7168MB, committed=7168MB) \n \n-                     Class (reserved=1147MB, committed=140MB)\n                            (classes #22587)\n                            (malloc=3MB #50903) \n                            (mmap: reserved=1144MB, committed=137MB) \n \n-                    Thread (reserved=1020MB, committed=1020MB)\n                            (thread #1013)\n                            (stack: reserved=1016MB, committed=1016MB)\n                            (malloc=3MB #5073) \n                            (arena=1MB #2021)\n \n-                      Code (reserved=262MB, committed=112MB)\n                            (malloc=18MB #26576) \n                            (mmap: reserved=244MB, committed=93MB) \n \n-                        GC (reserved=354MB, committed=354MB)\n                            (malloc=56MB #58554) \n                            (mmap: reserved=298MB, committed=298MB) \n \n-                  Compiler (reserved=2MB, committed=2MB)\n                            (malloc=2MB #4614) \n \n-                  Internal (reserved=649MB, committed=649MB)\n                            (malloc=649MB #66342) \n \n-                    Symbol (reserved=26MB, committed=26MB)\n                            (malloc=24MB #242279) \n                            (arena=2MB #1)\n \n-    Native Memory Tracking (reserved=7MB, committed=7MB)\n                            (tracking overhead=7MB)\n \n-                   Unknown (reserved=14MB, committed=0MB)\n                            (mmap: reserved=14MB, committed=0MB)\n</code></pre>\n<hr />\n<p>normal machine</p>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/K4Hi5.png\" rel=\"nofollow noreferrer\">top show mem 8.1gb</a></li>\n<li>java Native memeory show commit 9291MB:</li>\n</ul>\n<pre><code>Native Memory Tracking:\n\nTotal: reserved=10465MB, committed=9291MB\n-                 Java Heap (reserved=7168MB, committed=7168MB)\n                            (mmap: reserved=7168MB, committed=7168MB) \n \n-                     Class (reserved=1140MB, committed=132MB)\n                            (classes #20844)\n                            (malloc=4MB #50411) \n                            (mmap: reserved=1136MB, committed=128MB) \n \n-                    Thread (reserved=1087MB, committed=1087MB)\n                            (thread #1079)\n                            (stack: reserved=1082MB, committed=1082MB)\n                            (malloc=3MB #5403) \n                            (arena=1MB #2153)\n \n-                      Code (reserved=262MB, committed=110MB)\n                            (malloc=18MB #25669) \n                            (mmap: reserved=244MB, committed=92MB) \n \n-                        GC (reserved=333MB, committed=333MB)\n                            (malloc=35MB #38960) \n                            (mmap: reserved=298MB, committed=298MB) \n \n-                  Compiler (reserved=3MB, committed=3MB)\n                            (malloc=3MB #5355) \n \n-                  Internal (reserved=427MB, committed=427MB)\n                            (malloc=427MB #50809) \n \n-                    Symbol (reserved=24MB, committed=24MB)\n                            (malloc=22MB #227078) \n                            (arena=2MB #1)\n \n-    Native Memory Tracking (reserved=6MB, committed=6MB)\n                            (tracking overhead=6MB)\n \n-                   Unknown (reserved=14MB, committed=0MB)\n                            (mmap: reserved=14MB, committed=0MB) \n</code></pre>\n<p>The abnormal machine top shows that it takes up 10g of memory, and the normal machine shows 8.1 g. However, the java memory stack shows that the memory consumption on both sides is not much different. The whole thing looks normal, but the memory footprint of abnormal machines is very high.</p>\n<hr />\n<p>Check the stack situation, it seems that the memory occupation of the whole stack is basically the same as that of normal machines, abnormal machines will have several times full gc, but this does not seem to be a problem.</p>\n<pre><code>abnormal machine:jstat -gc 1954\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \n 0.0   262144.0  0.0   262144.0 3637248.0 425984.0 3440640.0  2568134.1  140052.0 123958.6 18452.0 15316.6  12853  585.804   3     27.154  612.958\n\n\n\nnormal machine:jstat -gc 1973\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \n 0.0   163840.0  0.0   163840.0 4194304.0 1605632.0 2981888.0  2257346.5  131496.0 114735.3 17356.0 14088.7  10696  336.754   0      0.000  336.754\n</code></pre>\n<p>The entire stack takes up to 7 gigabytes, but java process memory usage has exceeded 10 gigabytes and continues to increase.</p>\n<p>Ive tried multiple variations of this, but none of them seem to work. Any ideas?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","graphql","graphql-spqr"],"answers":[{"tags":[],"owner":{"account_id":12270189,"reputation":1,"user_id":8955549,"display_name":"hardkraja20"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697595447,"creation_date":1697524294,"answer_id":77306618,"question_id":77287573,"body_markdown":"I found the answer of the above question,\r\n\r\n```java\r\n@PostMapping(value = &quot;/graphql&quot;)\r\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\r\n            throws GraphQLException {\r\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\r\n        return result; // it should return executionResult as it is\r\n    }\r\n```\r\nEarlier, I was returning executionResult.getData() instead of executionResult - that is why it was not working.\r\n","title":"Handling Exceptions not working with SPQR (graphql)","body":"<p>I found the answer of the above question,</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/graphql&quot;)\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\n            throws GraphQLException {\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\n        return result; // it should return executionResult as it is\n    }\n</code></pre>\n<p>Earlier, I was returning executionResult.getData() instead of executionResult - that is why it was not working.</p>\n"}],"owner":{"account_id":12270189,"reputation":1,"user_id":8955549,"display_name":"hardkraja20"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77306618,"answer_count":1,"score":0,"last_activity_date":1697595447,"creation_date":1697198701,"question_id":77287573,"body_markdown":"I am having an issue in configuring exception handling with this. I went through all the issues/examples and found some solutions. But don&#39;t know that is not working.\r\n\r\n**See, here is how I configured my graphQL**\r\n\r\n    @Autowired\r\n        public GraphqlController(BookResolver bookResolver) {\r\n            GraphQLSchema schema = new GraphQLSchemaGenerator()\r\n                    .withBasePackages(&quot;com.graphql.learn&quot;)\r\n                    .withOperationsFromSingleton(bookResolver)\r\n                    .generate();\r\n            this.graphQL = new GraphQL.Builder(schema)\r\n                    .queryExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\r\n                    .mutationExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\r\n                    .build();\r\n        }\r\n        @PostMapping(value = &quot;/graphql&quot;)\r\n        public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\r\n                throws GraphQLException {\r\n            ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\r\n            return result.getData();\r\n        }\r\n    \r\n   **This is the resolver I made (_Here, I am intentionally throwing an exception_)**\r\n   \r\n\r\n    @GraphQLQuery\r\n        public List&lt;Book&gt; books(){\r\n            if(true){\r\n                throw new NullPointerException(&quot;Null pointer exception&quot;);\r\n            }\r\n            return bookService.getAll();\r\n        }\r\n **And Here is how I created CustomExceptionHandler**\r\n    \r\n     @Component\r\n    public class CustomExceptionHandler implements DataFetcherExceptionHandler {\r\n    \r\n        private DataFetcherExceptionHandlerResult onExceptionHandler(DataFetcherExceptionHandlerParameters handlerParameters) {\r\n    \r\n            Throwable exception = handlerParameters.getException();\r\n    \r\n            // do something with exception\r\n    \r\n            GraphQLError error = GraphqlErrorBuilder\r\n                    .newError()\r\n                    .message(exception.getMessage())\r\n                    .build();\r\n    \r\n            return DataFetcherExceptionHandlerResult\r\n                    .newResult()\r\n                    .error(error)\r\n                    .build();\r\n        }\r\n    \r\n        @Override\r\n        public CompletableFuture&lt;DataFetcherExceptionHandlerResult&gt; handleException(DataFetcherExceptionHandlerParameters handlerParameters) {\r\n            DataFetcherExceptionHandlerResult result = onExceptionHandler(handlerParameters);\r\n            return CompletableFuture.completedFuture(result);\r\n        }\r\n    }\r\n\r\n**And Here What I get for the query result **\r\n- Request \r\n```\r\nquery{\r\n    books{\r\n        id,\r\n        title\r\n    }\r\n}\r\n```\r\n- Response\r\n```\r\n{\r\n    &quot;books&quot;: null\r\n}\r\n```\r\n\r\n- Please show me how can I configure in a way so that I get proper exception message in response.\r\n- To get the access of whole implementation you can refer to this branch -&gt; https://github.com/Hardikraja/graphql-learning/tree/with-spqr\r\n\r\nThanks.\r\n\r\n    \r\n\r\nI tried using `DataFetcherExceptionHandler` and `ResolverInterceptor` too. But, Still getting the same issue.","title":"Handling Exceptions not working with SPQR (graphql)","body":"<p>I am having an issue in configuring exception handling with this. I went through all the issues/examples and found some solutions. But don't know that is not working.</p>\n<p><strong>See, here is how I configured my graphQL</strong></p>\n<pre><code>@Autowired\n    public GraphqlController(BookResolver bookResolver) {\n        GraphQLSchema schema = new GraphQLSchemaGenerator()\n                .withBasePackages(&quot;com.graphql.learn&quot;)\n                .withOperationsFromSingleton(bookResolver)\n                .generate();\n        this.graphQL = new GraphQL.Builder(schema)\n                .queryExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\n                .mutationExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\n                .build();\n    }\n    @PostMapping(value = &quot;/graphql&quot;)\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\n            throws GraphQLException {\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\n        return result.getData();\n    }\n</code></pre>\n<p><strong>This is the resolver I made (<em>Here, I am intentionally throwing an exception</em>)</strong></p>\n<pre><code>@GraphQLQuery\n    public List&lt;Book&gt; books(){\n        if(true){\n            throw new NullPointerException(&quot;Null pointer exception&quot;);\n        }\n        return bookService.getAll();\n    }\n</code></pre>\n<p><strong>And Here is how I created CustomExceptionHandler</strong></p>\n<pre><code> @Component\npublic class CustomExceptionHandler implements DataFetcherExceptionHandler {\n\n    private DataFetcherExceptionHandlerResult onExceptionHandler(DataFetcherExceptionHandlerParameters handlerParameters) {\n\n        Throwable exception = handlerParameters.getException();\n\n        // do something with exception\n\n        GraphQLError error = GraphqlErrorBuilder\n                .newError()\n                .message(exception.getMessage())\n                .build();\n\n        return DataFetcherExceptionHandlerResult\n                .newResult()\n                .error(error)\n                .build();\n    }\n\n    @Override\n    public CompletableFuture&lt;DataFetcherExceptionHandlerResult&gt; handleException(DataFetcherExceptionHandlerParameters handlerParameters) {\n        DataFetcherExceptionHandlerResult result = onExceptionHandler(handlerParameters);\n        return CompletableFuture.completedFuture(result);\n    }\n}\n</code></pre>\n<p>**And Here What I get for the query result **</p>\n<ul>\n<li>Request</li>\n</ul>\n<pre><code>query{\n    books{\n        id,\n        title\n    }\n}\n</code></pre>\n<ul>\n<li>Response</li>\n</ul>\n<pre><code>{\n    &quot;books&quot;: null\n}\n</code></pre>\n<ul>\n<li>Please show me how can I configure in a way so that I get proper exception message in response.</li>\n<li>To get the access of whole implementation you can refer to this branch -&gt; <a href=\"https://github.com/Hardikraja/graphql-learning/tree/with-spqr\" rel=\"nofollow noreferrer\">https://github.com/Hardikraja/graphql-learning/tree/with-spqr</a></li>\n</ul>\n<p>Thanks.</p>\n<p>I tried using <code>DataFetcherExceptionHandler</code> and <code>ResolverInterceptor</code> too. But, Still getting the same issue.</p>\n"},{"tags":["java","eclipse","crash","javadoc"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1697487294,"post_id":77304597,"comment_id":136283574,"body_markdown":"Do you have an NVIDIA GPU with an NVIDIA driver? Does it also crash on _Help &gt; Help Contents_? If yes, it&#39;s related to the web browser widget. When you start Eclipse in the terminal, is then anything logged/printed?","body":"Do you have an NVIDIA GPU with an NVIDIA driver? Does it also crash on <i>Help &gt; Help Contents</i>? If yes, it&#39;s related to the web browser widget. When you start Eclipse in the terminal, is then anything logged/printed?"},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":0,"creation_date":1697488028,"post_id":77304597,"comment_id":136283684,"body_markdown":"Ah ha! &quot;No provider of eglCreateImage found.  Requires one of: EGL 15&quot; (yes, it does crash on Help &gt; Help Contents)","body":"Ah ha! &quot;No provider of eglCreateImage found.  Requires one of: EGL 15&quot; (yes, it does crash on Help &gt; Help Contents)"},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":1,"creation_date":1697488037,"post_id":77304597,"comment_id":136283685,"body_markdown":"And there is already a bug report: https://github.com/tauri-apps/tauri/issues/8013","body":"And there is already a bug report: <a href=\"https://github.com/tauri-apps/tauri/issues/8013\" rel=\"nofollow noreferrer\">github.com/tauri-apps/tauri/issues/8013</a>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1697488464,"post_id":77304597,"comment_id":136283738,"body_markdown":"Does the [workaround that is mention it that bug report work for you (setting the environment variable `WEBKIT_DISABLE_COMPOSITING_MODE=1`)](https://github.com/tauri-apps/tauri/issues/8013#issuecomment-1761085938)? If yes, please add a self-answer.","body":"Does the <a href=\"https://github.com/tauri-apps/tauri/issues/8013#issuecomment-1761085938\" rel=\"nofollow noreferrer\">workaround that is mention it that bug report work for you (setting the environment variable <code>WEBKIT_DISABLE_COMPOSITING_MODE=1</code>)</a>? If yes, please add a self-answer."},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":0,"creation_date":1697490315,"post_id":77304597,"comment_id":136284059,"body_markdown":"Once I remembered to tack the `env` on the front of the command, it worked great! Thank you for those who responded!","body":"Once I remembered to tack the <code>env</code> on the front of the command, it worked great! Thank you for those who responded!"}],"answers":[{"tags":[],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697490202,"creation_date":1697490202,"answer_id":77304952,"question_id":77304597,"body_markdown":"From information provided in this [bug report](https://github.com/tauri-apps/tauri/issues/8013), launching Eclipse with a modified environment variable solved the problem.\r\n\r\n    env WEBKIT_DISABLE_COMPOSITING_MODE=1 ./eclipse","title":"Eclipse 2023-09 crashes whenever Javadocs begin loading","body":"<p>From information provided in this <a href=\"https://github.com/tauri-apps/tauri/issues/8013\" rel=\"nofollow noreferrer\">bug report</a>, launching Eclipse with a modified environment variable solved the problem.</p>\n<pre><code>env WEBKIT_DISABLE_COMPOSITING_MODE=1 ./eclipse\n</code></pre>\n"}],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77304952,"answer_count":1,"score":1,"last_activity_date":1697594976,"creation_date":1697485689,"question_id":77304597,"body_markdown":"Eclipse is instant-crashing with no errors, no warnings whenever Javadocs are loaded.\r\n\r\nThis happens during:\r\n\r\n* content-assist with &lt;kbd&gt;CTRL+SPACE&lt;/kbd&gt; (the content-assist part is working fine, however, when hovering over a method, a second panel opens that has the Javadoc: it is when this second panel begins to open when the crash occurs)\r\n* whenever the Javadoc Eclipse view is opened (even if nothing is selected, simply opening the view panel causes the crash)\r\n\r\nThe crash happens immediately.  \r\nNothing is shown on the screen, nothing is written to the logs, program just stops and vanishes.\r\nEverything restarts just fine, however *(workspace does not save, and reverts back to whatever previous state it had)* and I can continue working.\r\n\r\nHave already tried:\r\n\r\n* updating/validating/removing the location of the Javadoc for the the Installed JREs\r\n* changing/disabling the internal/external Web Browser\r\n* updating the `eclipse.ini` file with various options for `-Dorg.eclipse.swt.browser`, based on various crash bug reports, most of which were extremely old to begin with\r\n* checking the logs in `/confuguration/` and `/.metadata/.log`\r\n\r\n(Unfortunately, there is nothing in any of the logs.)\r\n\r\nInstallation is totally vanilla. There are no plugins installed, and no configuration changes from the installation defaults.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    Version: 2023-09 (4.29.0)\r\n    Build ID: 4.29.0.20230907-1200\r\n    Platform: Debian Linux\r\n","title":"Eclipse 2023-09 crashes whenever Javadocs begin loading","body":"<p>Eclipse is instant-crashing with no errors, no warnings whenever Javadocs are loaded.</p>\n<p>This happens during:</p>\n<ul>\n<li>content-assist with <kbd>CTRL+SPACE</kbd> (the content-assist part is working fine, however, when hovering over a method, a second panel opens that has the Javadoc: it is when this second panel begins to open when the crash occurs)</li>\n<li>whenever the Javadoc Eclipse view is opened (even if nothing is selected, simply opening the view panel causes the crash)</li>\n</ul>\n<p>The crash happens immediately.<br />\nNothing is shown on the screen, nothing is written to the logs, program just stops and vanishes.\nEverything restarts just fine, however <em>(workspace does not save, and reverts back to whatever previous state it had)</em> and I can continue working.</p>\n<p>Have already tried:</p>\n<ul>\n<li>updating/validating/removing the location of the Javadoc for the the Installed JREs</li>\n<li>changing/disabling the internal/external Web Browser</li>\n<li>updating the <code>eclipse.ini</code> file with various options for <code>-Dorg.eclipse.swt.browser</code>, based on various crash bug reports, most of which were extremely old to begin with</li>\n<li>checking the logs in <code>/confuguration/</code> and <code>/.metadata/.log</code></li>\n</ul>\n<p>(Unfortunately, there is nothing in any of the logs.)</p>\n<p>Installation is totally vanilla. There are no plugins installed, and no configuration changes from the installation defaults.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Version: 2023-09 (4.29.0)\nBuild ID: 4.29.0.20230907-1200\nPlatform: Debian Linux\n</code></pre>\n"},{"tags":["java","xpath","vast","joox"],"answers":[{"tags":[],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697594817,"creation_date":1697594817,"answer_id":77313110,"question_id":77309234,"body_markdown":"jOOX builds the document with `setNamespaceAware(true)` this causes the document to use namespaces which then requires xpath expressions to use namespaces.\r\n\r\nThis can be fixed by building the document manually with a the DocumentBuilderFactory and passing it to jOOX. Don&#39;t call `setNamespaceAware(true)`.\r\n\r\n```java\r\nvar domFactory = DocumentBuilderFactory.newInstance();\r\nvar builder = domFactory.newDocumentBuilder();\r\nvar document = builder.parse(new ByteArrayInputStream(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;.getBytes()));\r\nvar vast42version = $(document).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\r\n```","title":"Cannot get attribute on xml with namespace","body":"<p>jOOX builds the document with <code>setNamespaceAware(true)</code> this causes the document to use namespaces which then requires xpath expressions to use namespaces.</p>\n<p>This can be fixed by building the document manually with a the DocumentBuilderFactory and passing it to jOOX. Don't call <code>setNamespaceAware(true)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var domFactory = DocumentBuilderFactory.newInstance();\nvar builder = domFactory.newDocumentBuilder();\nvar document = builder.parse(new ByteArrayInputStream(&quot;&quot;&quot;\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;.getBytes()));\nvar vast42version = $(document).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\n</code></pre>\n"}],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697594817,"creation_date":1697547801,"question_id":77309234,"body_markdown":"I am running into trouble with jOOX when trying to get an attribute and with other xpath expressions. This is with a schema that I cannot change.\r\n\r\nWith vast 3.0 there is no targetNamespace so the xml looks like this.\r\n\r\n```\r\n&lt;VAST version=&quot;3.0&quot;&gt;\r\n            \r\n&lt;/VAST&gt;\r\n```\r\n\r\nBut with vast 4.2 there is a targetNamespace so the namespace declaration is required.\r\n\r\n```\r\n&lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n&lt;/VAST&gt;\r\n```\r\n\r\nIf I try to get the version attribute for 3.0 this works.\r\n\r\n```\r\nvar vast3version = $(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;3.0&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast3version).isEqualTo(&quot;3.0&quot;);\r\n```\r\n\r\nBut if I try vast 4.2 it returns null and the test fails.\r\n\r\n```\r\nvar vast42version = $(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\r\n```\r\n\r\nIt looks like the introduction of a namespace causes an issue and I&#39;m not sure how to get around it. I&#39;m trying to write an editor class to modify the xml and support both versions but none of the xpaths work for vast 4.2 xml.\r\n\r\nIs there a way to get the version that works for both xml inputs?","title":"Cannot get attribute on xml with namespace","body":"<p>I am running into trouble with jOOX when trying to get an attribute and with other xpath expressions. This is with a schema that I cannot change.</p>\n<p>With vast 3.0 there is no targetNamespace so the xml looks like this.</p>\n<pre><code>&lt;VAST version=&quot;3.0&quot;&gt;\n            \n&lt;/VAST&gt;\n</code></pre>\n<p>But with vast 4.2 there is a targetNamespace so the namespace declaration is required.</p>\n<pre><code>&lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n&lt;/VAST&gt;\n</code></pre>\n<p>If I try to get the version attribute for 3.0 this works.</p>\n<pre><code>var vast3version = $(&quot;&quot;&quot;\n    &lt;VAST version=&quot;3.0&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast3version).isEqualTo(&quot;3.0&quot;);\n</code></pre>\n<p>But if I try vast 4.2 it returns null and the test fails.</p>\n<pre><code>var vast42version = $(&quot;&quot;&quot;\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\n</code></pre>\n<p>It looks like the introduction of a namespace causes an issue and I'm not sure how to get around it. I'm trying to write an editor class to modify the xml and support both versions but none of the xpaths work for vast 4.2 xml.</p>\n<p>Is there a way to get the version that works for both xml inputs?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1697553848,"post_id":77309906,"comment_id":136292822,"body_markdown":"1) Remove each allowed value from the list 2) Check if the list is empty","body":"1) Remove each allowed value from the list 2) Check if the list is empty"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1697554686,"post_id":77309906,"comment_id":136293040,"body_markdown":"Or just `new HashSet&lt;&gt;(listOfAllowedValues).containsAll(list)`. Even better would be to use a `Set` of allowed values in the first place. If you know for sure that the list will always be as small as two value, you can use the list directly, `listOfAllowedValues.containsAll(list)`. But code tends to live longer than expected, so it’s better to use the scaleable solution.","body":"Or just <code>new HashSet&lt;&gt;(listOfAllowedValues).containsAll(list)</code>. Even better would be to use a <code>Set</code> of allowed values in the first place. If you know for sure that the list will always be as small as two value, you can use the list directly, <code>listOfAllowedValues.containsAll(list)</code>. But code tends to live longer than expected, so it’s better to use the scaleable solution."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1697555412,"post_id":77309906,"comment_id":136293202,"body_markdown":"Your sentence “It can contain one or both of these values but not neither.” seems to create confusion among the answerers. What you actually mean is (apparently), “Each elements must be either `&quot;Pa12&quot;` or `&quot;Co12&quot;` (and nothing else).”","body":"Your sentence “It can contain one or both of these values but not neither.” seems to create confusion among the answerers. What you actually mean is (apparently), “Each elements must be either <code>&quot;Pa12&quot;</code> or <code>&quot;Co12&quot;</code> (and nothing else).”"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1697560338,"post_id":77309906,"comment_id":136294119,"body_markdown":"Please check my answer to see if I properly understood your question.  There seems to be some confusion.  It may be me. :)","body":"Please check my answer to see if I properly understood your question.  There seems to be some confusion.  It may be me. :)"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697594511,"creation_date":1697554021,"answer_id":77310018,"question_id":77309906,"body_markdown":"Your Question is ambiguous. Your prose does not match your example data. Let’s look at two cases you may have intended. \r\n\r\n## Input contains at least one of our target elements\r\n\r\n&gt; It can contain one or both of these values but not neither.\r\n\r\nUse streams to examine each element of your list. Stop when finding the first match. \r\n\r\n    List&lt; String &gt; input = List.of( &quot;Pa12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot; ) ;\r\n    List&lt; String &gt; target = List.of( &quot;Pa12&quot;, &quot;Pa12&quot; ) ;\r\n\r\n    boolean hit = target.stream().anyMatch( ( String s ) -&gt; input.contains ( s ) ) ;\r\n\r\n&gt;true\r\n\r\nWe can shorten that by using a method reference.\r\n\r\n    boolean hit = target.stream().anyMatch( input :: contains ) ;\r\n\r\n\r\n\r\n## Input contains nothing but one or more of our target elements\r\n\r\nBut your example data seems to suggest you want something else. Apparently you want to know if the input list contains one or more of the target elements *and* contains nothing else. \r\n\r\nWe can accomplish that goal in two steps. First, be sure the input is not empty. If empty, return `false`. Secondly, make a `Set` of your input. This eliminates duplicates. And `Set` offers a handy [`removeAll`][1] method. We can remove all of our target elements from the set. If anything remains in the set, then return `false`. If the set is empty, return `true`. \r\n\r\n    if ( input.isEmpty() ) { return false ; }\r\n    Set&lt; String &gt; set = new HashSet&lt;&gt; ( input ) ;\r\n    set.removeAll( target ) ;\r\n    return set.isEmpty() ;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#removeAll(java.util.Collection)","title":"check that a list only contains values from another list","body":"<p>Your Question is ambiguous. Your prose does not match your example data. Let’s look at two cases you may have intended.</p>\n<h2>Input contains at least one of our target elements</h2>\n<blockquote>\n<p>It can contain one or both of these values but not neither.</p>\n</blockquote>\n<p>Use streams to examine each element of your list. Stop when finding the first match.</p>\n<pre><code>List&lt; String &gt; input = List.of( &quot;Pa12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot; ) ;\nList&lt; String &gt; target = List.of( &quot;Pa12&quot;, &quot;Pa12&quot; ) ;\n\nboolean hit = target.stream().anyMatch( ( String s ) -&gt; input.contains ( s ) ) ;\n</code></pre>\n<blockquote>\n<p>true</p>\n</blockquote>\n<p>We can shorten that by using a method reference.</p>\n<pre><code>boolean hit = target.stream().anyMatch( input :: contains ) ;\n</code></pre>\n<h2>Input contains nothing but one or more of our target elements</h2>\n<p>But your example data seems to suggest you want something else. Apparently you want to know if the input list contains one or more of the target elements <em>and</em> contains nothing else.</p>\n<p>We can accomplish that goal in two steps. First, be sure the input is not empty. If empty, return <code>false</code>. Secondly, make a <code>Set</code> of your input. This eliminates duplicates. And <code>Set</code> offers a handy <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#removeAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>removeAll</code></a> method. We can remove all of our target elements from the set. If anything remains in the set, then return <code>false</code>. If the set is empty, return <code>true</code>.</p>\n<pre><code>if ( input.isEmpty() ) { return false ; }\nSet&lt; String &gt; set = new HashSet&lt;&gt; ( input ) ;\nset.removeAll( target ) ;\nreturn set.isEmpty() ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16507843,"reputation":772,"user_id":11927434,"display_name":"MarkusAnd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697554027,"creation_date":1697554027,"answer_id":77310019,"question_id":77309906,"body_markdown":"One easy way to tackle your problem is to turn your list into a [Set][1] which is a data structure that only contains one copy of each value in it. Hence regardless of the number of the same elements in your list the set will only contain one instance of it. \r\n\r\nIf your list is of data type `List` this is done by\r\n```\r\nSet&lt;String&gt; mySet = new HashSet&lt;String&gt;(myList);\r\n```\r\nor if it is an array\r\n```\r\nSet&lt;String&gt; mySet = new HashSet&lt;String&gt;(Arrays.asList(myArray));\r\n```\r\nThen it will be an easy check\r\n```\r\nboolean myCheck(Set&lt;String&gt; mySet) \r\n{\r\n    mySet.discard(&quot;Pa12&quot;);\r\n    mySet.discard(&quot;Co12&quot;);\r\n    return mySet.size() == 0;\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Set.html","title":"check that a list only contains values from another list","body":"<p>One easy way to tackle your problem is to turn your list into a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a> which is a data structure that only contains one copy of each value in it. Hence regardless of the number of the same elements in your list the set will only contain one instance of it.</p>\n<p>If your list is of data type <code>List</code> this is done by</p>\n<pre><code>Set&lt;String&gt; mySet = new HashSet&lt;String&gt;(myList);\n</code></pre>\n<p>or if it is an array</p>\n<pre><code>Set&lt;String&gt; mySet = new HashSet&lt;String&gt;(Arrays.asList(myArray));\n</code></pre>\n<p>Then it will be an easy check</p>\n<pre><code>boolean myCheck(Set&lt;String&gt; mySet) \n{\n    mySet.discard(&quot;Pa12&quot;);\n    mySet.discard(&quot;Co12&quot;);\n    return mySet.size() == 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697560032,"creation_date":1697554518,"answer_id":77310083,"question_id":77309906,"body_markdown":"I am using a `set` for the target list as it is more efficient.  A list would also work.\r\n```\r\nList&lt;String&gt; base = List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Co12&quot;);\r\nSet&lt;String&gt; target = Set.of(&quot;Pa12&quot;, &quot;Co12&quot;);\r\n```\r\nThis checks the base list against the target list and makes the necessary inversions of the `booleans` to correct the result.\r\n```\r\n\r\n List&lt;List&lt;String&gt;&gt; baseLists = List.of(\r\n         List.of(&quot;Pa12&quot;, &quot;Pa12&quot;, &quot;Pa12&quot;),\r\n         List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Co12&quot;),\r\n         List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;fi12&quot;, &quot;Co12&quot;));\r\n Set&lt;String&gt; target = Set.of(&quot;Pa12&quot;, &quot;Co12&quot;);\r\n\r\n for (List&lt;String&gt; base : baseLists) {\r\n     boolean hasAtLeastOne = !list.stream()\r\n             .anyMatch(s -&gt; !target.contains(s));\r\n     System.out.println(list + &quot; -&gt; &quot; + hasAtLeastOne);\r\n }\r\n```\r\nprints\r\n```\r\n[Pa12, Pa12, Pa12] -&gt; true\r\n[Pa12, Co12, Pa12, Co12, Co12] -&gt; true\r\n[Pa12, Co12, Pa12, Co12, fi12, Co12] -&gt; false\r\n","title":"check that a list only contains values from another list","body":"<p>I am using a <code>set</code> for the target list as it is more efficient.  A list would also work.</p>\n<pre><code>List&lt;String&gt; base = List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Co12&quot;);\nSet&lt;String&gt; target = Set.of(&quot;Pa12&quot;, &quot;Co12&quot;);\n</code></pre>\n<p>This checks the base list against the target list and makes the necessary inversions of the <code>booleans</code> to correct the result.</p>\n<pre><code>\n List&lt;List&lt;String&gt;&gt; baseLists = List.of(\n         List.of(&quot;Pa12&quot;, &quot;Pa12&quot;, &quot;Pa12&quot;),\n         List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Co12&quot;),\n         List.of(&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;fi12&quot;, &quot;Co12&quot;));\n Set&lt;String&gt; target = Set.of(&quot;Pa12&quot;, &quot;Co12&quot;);\n\n for (List&lt;String&gt; base : baseLists) {\n     boolean hasAtLeastOne = !list.stream()\n             .anyMatch(s -&gt; !target.contains(s));\n     System.out.println(list + &quot; -&gt; &quot; + hasAtLeastOne);\n }\n</code></pre>\n<p>prints</p>\n<pre><code>[Pa12, Pa12, Pa12] -&gt; true\n[Pa12, Co12, Pa12, Co12, Co12] -&gt; true\n[Pa12, Co12, Pa12, Co12, fi12, Co12] -&gt; false\n</code></pre>\n"}],"owner":{"account_id":126652,"reputation":2740,"user_id":323303,"accept_rate":84,"display_name":"amadain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":77310018,"answer_count":3,"score":-3,"last_activity_date":1697594511,"creation_date":1697552987,"question_id":77309906,"body_markdown":"I have a list \r\n    \r\n[&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Fi12&quot;, &quot;Co12&quot;] \r\n\r\nand I want to check if the list only contains &quot;Pa12&quot; and &quot;Co12&quot;. It can contain one or both of these values but not neither. So in the above example the check would fail but in the example:\r\n\r\n[&quot;Pa12&quot;, &quot;Pa12, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;] \r\n\r\nand the example:\r\n\r\n[&quot;Pa12&quot;, &quot;Pa12&quot;]\r\n\r\nthe check would pass. How would I achieve this?\r\n","title":"check that a list only contains values from another list","body":"<p>I have a list</p>\n<p>[&quot;Pa12&quot;, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;, &quot;Fi12&quot;, &quot;Co12&quot;]</p>\n<p>and I want to check if the list only contains &quot;Pa12&quot; and &quot;Co12&quot;. It can contain one or both of these values but not neither. So in the above example the check would fail but in the example:</p>\n<p>[&quot;Pa12&quot;, &quot;Pa12, &quot;Co12&quot;, &quot;Pa12&quot;, &quot;Co12&quot;]</p>\n<p>and the example:</p>\n<p>[&quot;Pa12&quot;, &quot;Pa12&quot;]</p>\n<p>the check would pass. How would I achieve this?</p>\n"},{"tags":["java","ssl"],"answers":[{"tags":[],"owner":{"account_id":26678161,"reputation":9,"user_id":20288504,"display_name":"噗嗤噗嗤"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697594319,"creation_date":1697594319,"answer_id":77313093,"question_id":77252212,"body_markdown":"Mainly because of the KeyStore loading problem\r\n\r\n\r\n    String password = &quot;&quot;;\r\n    // 此处不能指定为 BC 的 Provider，否则在通信过程中会握手失败\r\n    KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType(), GMJSSE.NAME);\r\n    keyStore.load(null, null);\r\n    keyStore.setKeyEntry(&quot;signCert&quot;, signPrivateKey, password.toCharArray(),\r\n                        new Certificate[]{signX509Certificate});\r\n    keyStore.setKeyEntry(&quot;encCert&quot;, encPrivateKey, password.toCharArray(),\r\n                        new Certificate[]{encX509Certificate});\r\n\r\n    // GMSSL 在启用 SSL 通信时，需要先 store 再重新 load，否则通信时会有 Padding 的异常\r\n    ByteArrayOutputStream byteArrayOutputStream = new     ByteArrayOutputStream();\r\n    keyStore.store(byteArrayOutputStream, password.toCharArray());\r\n\r\n    // 重新加载 KeyStore\r\n    ByteArrayInputStream byteArrayInputStream = new     ByteArrayInputStream(byteArrayOutputStream.toByteArray());\r\n    // 此处不能指定为 BC 的 Provider，否则在通信过程中会握手失败\r\n    keyStore = KeyStore.getInstance(KeyStore.getDefaultType(), GMJSSE.NAME);\r\n    keyStore.load(byteArrayInputStream, password.toCharArray());","title":"javax.crypto.BadPaddingException: Padding length invalid: 239","body":"<p>Mainly because of the KeyStore loading problem</p>\n<pre><code>String password = &quot;&quot;;\n// 此处不能指定为 BC 的 Provider，否则在通信过程中会握手失败\nKeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType(), GMJSSE.NAME);\nkeyStore.load(null, null);\nkeyStore.setKeyEntry(&quot;signCert&quot;, signPrivateKey, password.toCharArray(),\n                    new Certificate[]{signX509Certificate});\nkeyStore.setKeyEntry(&quot;encCert&quot;, encPrivateKey, password.toCharArray(),\n                    new Certificate[]{encX509Certificate});\n\n// GMSSL 在启用 SSL 通信时，需要先 store 再重新 load，否则通信时会有 Padding 的异常\nByteArrayOutputStream byteArrayOutputStream = new     ByteArrayOutputStream();\nkeyStore.store(byteArrayOutputStream, password.toCharArray());\n\n// 重新加载 KeyStore\nByteArrayInputStream byteArrayInputStream = new     ByteArrayInputStream(byteArrayOutputStream.toByteArray());\n// 此处不能指定为 BC 的 Provider，否则在通信过程中会握手失败\nkeyStore = KeyStore.getInstance(KeyStore.getDefaultType(), GMJSSE.NAME);\nkeyStore.load(byteArrayInputStream, password.toCharArray());\n</code></pre>\n"}],"owner":{"account_id":26678161,"reputation":9,"user_id":20288504,"display_name":"噗嗤噗嗤"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697594319,"creation_date":1696735817,"question_id":77252212,"body_markdown":"During SSL communication, during the handshake process between the client and the server, an error is reported:\r\n\r\n\r\n```\r\nServer write IV:\r\n0000: 85 80 28 A4 CA 34 3A 5B   A5 C5 7E 71 5A A9 02 1F  ..(..4:[...qZ...\r\nHTTP-Dispatcher, READ: GMSSLv1.1 Change Cipher Spec, length = 1\r\nHTTP-Dispatcher, READ: GMSSLv1.1 Handshake, length = 80\r\nHTTP-Dispatcher, fatal error: 80: problem unwrapping net record\r\njava.lang.ArrayIndexOutOfBoundsException: javax.crypto.BadPaddingException: Padding length invalid: 239\r\n%% Invalidated:  [Session-1, ECC_SM4_CBC_SM3]\r\nHTTP-Dispatcher, SEND GMSSLv1.1 ALERT:  fatal, description = internal_error\r\nHTTP-Dispatcher, WRITE: GMSSLv1.1 Alert, length = 2\r\nHTTP-Dispatcher, called closeInbound()\r\nHTTP-Dispatcher, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLException: Inbound closed before receiving peer&#39;s close_notify: possible truncation attack?\r\nHTTP-Dispatcher, called closeOutbound()\r\nHTTP-Dispatcher, closeOutboundInternal()\r\njavax.crypto.BadPaddingException: Padding length invalid: 239\r\n```\r\n\r\n\r\nHas anyone encountered this problem? I initially suspected that it was a problem with keyStore construction, but I couldn&#39;t find the specific problem.\r\n\r\n\r\n```\r\nKeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType(), BouncyCastleProvider.PROVIDER_NAME);\r\nkeyStore.load(null, null);\r\nkeyStore.setKeyEntry(&quot;signPrivateKey&quot;, signPrivateKey, &quot;&quot;.toCharArray(),\r\n                        new Certificate[]{signX509Certificate});\r\nkeyStore.setKeyEntry(&quot;encPrivateKey&quot;, encPrivateKey, &quot;&quot;.toCharArray(),\r\n                        new Certificate[]{encX509Certificate});\r\n```\r\n","title":"javax.crypto.BadPaddingException: Padding length invalid: 239","body":"<p>During SSL communication, during the handshake process between the client and the server, an error is reported:</p>\n<pre><code>Server write IV:\n0000: 85 80 28 A4 CA 34 3A 5B   A5 C5 7E 71 5A A9 02 1F  ..(..4:[...qZ...\nHTTP-Dispatcher, READ: GMSSLv1.1 Change Cipher Spec, length = 1\nHTTP-Dispatcher, READ: GMSSLv1.1 Handshake, length = 80\nHTTP-Dispatcher, fatal error: 80: problem unwrapping net record\njava.lang.ArrayIndexOutOfBoundsException: javax.crypto.BadPaddingException: Padding length invalid: 239\n%% Invalidated:  [Session-1, ECC_SM4_CBC_SM3]\nHTTP-Dispatcher, SEND GMSSLv1.1 ALERT:  fatal, description = internal_error\nHTTP-Dispatcher, WRITE: GMSSLv1.1 Alert, length = 2\nHTTP-Dispatcher, called closeInbound()\nHTTP-Dispatcher, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLException: Inbound closed before receiving peer's close_notify: possible truncation attack?\nHTTP-Dispatcher, called closeOutbound()\nHTTP-Dispatcher, closeOutboundInternal()\njavax.crypto.BadPaddingException: Padding length invalid: 239\n</code></pre>\n<p>Has anyone encountered this problem? I initially suspected that it was a problem with keyStore construction, but I couldn't find the specific problem.</p>\n<pre><code>KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType(), BouncyCastleProvider.PROVIDER_NAME);\nkeyStore.load(null, null);\nkeyStore.setKeyEntry(&quot;signPrivateKey&quot;, signPrivateKey, &quot;&quot;.toCharArray(),\n                        new Certificate[]{signX509Certificate});\nkeyStore.setKeyEntry(&quot;encPrivateKey&quot;, encPrivateKey, &quot;&quot;.toCharArray(),\n                        new Certificate[]{encX509Certificate});\n</code></pre>\n"},{"tags":["java","spring-boot","rest","mocking"],"answers":[{"tags":[],"owner":{"account_id":297276,"reputation":2523,"user_id":4506703,"display_name":"DEWA Kazuyuki - 出羽和之"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592687961,"creation_date":1592687961,"answer_id":62491804,"question_id":62482467,"body_markdown":"You can use [`@Profile` annotation](https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/htmlsingle/#boot-features-profiles).\r\n\r\n```java\r\npublic interface PersonService {\r\n...\r\n}\r\n\r\n@Service\r\n@Profile(&quot;default&quot;)\r\npublic class PersonServiceImpl implements PersonService {\r\n...\r\n}\r\n\r\n@Service\r\n@Profile(&quot;mock&quot;)\r\npublic class MockPersonService implements PersonService {\r\n...\r\n}\r\n```\r\n\r\nWhen defined above, you can select profile with `appliation.properties`. For example:\r\n\r\n\r\n```\r\nspring.profiles.active=mock\r\n```","title":"Mock third party api while calling through postman","body":"<p>You can use <a href=\"https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/htmlsingle/#boot-features-profiles\" rel=\"nofollow noreferrer\"><code>@Profile</code> annotation</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface PersonService {\n...\n}\n\n@Service\n@Profile(&quot;default&quot;)\npublic class PersonServiceImpl implements PersonService {\n...\n}\n\n@Service\n@Profile(&quot;mock&quot;)\npublic class MockPersonService implements PersonService {\n...\n}\n</code></pre>\n<p>When defined above, you can select profile with <code>appliation.properties</code>. For example:</p>\n<pre><code>spring.profiles.active=mock\n</code></pre>\n"}],"owner":{"account_id":6728196,"reputation":166,"user_id":5185476,"accept_rate":25,"display_name":"mahdieh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697593144,"creation_date":1592634702,"question_id":62482467,"body_markdown":"I have a controller class which expose a Get API and return person info:\r\n\r\n\r\n    @RestController\r\n    public class PersonController {\r\n\r\n    @Autowired\r\n    PersonService personService;\r\n\r\n\r\n    @GetMapping\r\n    public Person getPersonInfo() {\r\n        return personService.getPerson();\r\n    }\r\n    }\r\n\r\n\r\nIn personService I am connecting to a third party and get person info from this API. \r\nNow I want to call getPersonInfo() API in my controller using postman. How can I mock third party response in this senario?\r\nI know this is possible if you uset  test(integration or unit) and wiremock.\r\nHow about using just postman to call my API?\r\n","title":"Mock third party api while calling through postman","body":"<p>I have a controller class which expose a Get API and return person info:</p>\n\n<pre><code>@RestController\npublic class PersonController {\n\n@Autowired\nPersonService personService;\n\n\n@GetMapping\npublic Person getPersonInfo() {\n    return personService.getPerson();\n}\n}\n</code></pre>\n\n<p>In personService I am connecting to a third party and get person info from this API. \nNow I want to call getPersonInfo() API in my controller using postman. How can I mock third party response in this senario?\nI know this is possible if you uset  test(integration or unit) and wiremock.\nHow about using just postman to call my API?</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1697600481,"post_id":77313036,"comment_id":136298804,"body_markdown":"is it possible to define the projects as modules and the root project as a multi-module project? then build each module on its own as a jar (and each jar including their own dependencies) or in your case you probably only need two modules app and lib. (app containing lib, and lib containing utility and another lib). what i said works for me on maven, but i dont use gradle, so i m not sure on the implementation for you","body":"is it possible to define the projects as modules and the root project as a multi-module project? then build each module on its own as a jar (and each jar including their own dependencies) or in your case you probably only need two modules app and lib. (app containing lib, and lib containing utility and another lib). what i said works for me on maven, but i dont use gradle, so i m not sure on the implementation for you"}],"owner":{"account_id":4071823,"reputation":567,"user_id":3344591,"accept_rate":24,"display_name":"user3344591"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697592885,"creation_date":1697592885,"question_id":77313036,"body_markdown":"I have a project setup in the following way\r\n\r\n- root\r\n  - build.gradle\r\n  - settings.gradle\r\n  - app\r\n    - src\r\n    - build.gradle // this has plugins &quot;java&quot;, &quot;application&quot;\r\n  - lib\r\n    - src\r\n    - build.gradle // this has plugins &quot;java-library&quot;\r\n  - anotherLib\r\n    - src\r\n    - build.gradle // this has plugins &quot;java-library&quot;\r\n  - utility\r\n    - src\r\n    - build.gradle // this has plugins &quot;java-library&quot;\r\n\r\napp/build.gradle has \r\n\r\n    implementation project(&#39;:lib&#39;)\r\n\r\nlib/build.gradle has \r\n\r\n    api project(&#39;:utility&#39;)\r\n    runtimeOnly project(&#39;:anotherLib&#39;)\r\n\r\n\r\nanotherLib/build.gradle has \r\n\r\n    implementation project(&#39;:utility&#39;)\r\n\r\nWhen I run `./gradlew bootJar` then a fatJar for &quot;app&quot; is created with &quot;lib&quot;, &quot;anotherLib&quot; and &quot;utilitiy&quot; inside it.\r\n\r\nNow I have another project that needs &quot;lib&quot; as dependency. But the &quot;lib&quot; jar doesn&#39;t have the &quot;utility&quot; and &quot;another&quot; jar inside it. How can I create a artifact for &quot;lib&quot; and upload in such a way that other projects besides my &quot;app&quot; can add it as dependency in their gradle like `implementation &quot;mygroup:lib:v1.0&quot;` and they don&#39;t have to worry about or even know about &quot;utility&quot; or &quot;anotherLib&quot;?\r\n\r\nIf possible, I&#39;d like to avoid uploading &quot;utility&quot; and &quot;anotherLib&quot; jars on their own. Can they be packaged inside &quot;lib&quot; jar? How to do that?\r\n\r\nAlso, if you think what I&#39;m trying to do is just plain wrong, please let me know that as well\r\n\r\nI&#39;m using java 11, gradle 8.3, springboot gradle plugin 2.7.15\r\n\r\n\r\nThanks","title":"How to package a &quot;java-library&quot; jar along with its dependencies before uploading the artifact?","body":"<p>I have a project setup in the following way</p>\n<ul>\n<li>root\n<ul>\n<li>build.gradle</li>\n<li>settings.gradle</li>\n<li>app\n<ul>\n<li>src</li>\n<li>build.gradle // this has plugins &quot;java&quot;, &quot;application&quot;</li>\n</ul>\n</li>\n<li>lib\n<ul>\n<li>src</li>\n<li>build.gradle // this has plugins &quot;java-library&quot;</li>\n</ul>\n</li>\n<li>anotherLib\n<ul>\n<li>src</li>\n<li>build.gradle // this has plugins &quot;java-library&quot;</li>\n</ul>\n</li>\n<li>utility\n<ul>\n<li>src</li>\n<li>build.gradle // this has plugins &quot;java-library&quot;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>app/build.gradle has</p>\n<pre><code>implementation project(':lib')\n</code></pre>\n<p>lib/build.gradle has</p>\n<pre><code>api project(':utility')\nruntimeOnly project(':anotherLib')\n</code></pre>\n<p>anotherLib/build.gradle has</p>\n<pre><code>implementation project(':utility')\n</code></pre>\n<p>When I run <code>./gradlew bootJar</code> then a fatJar for &quot;app&quot; is created with &quot;lib&quot;, &quot;anotherLib&quot; and &quot;utilitiy&quot; inside it.</p>\n<p>Now I have another project that needs &quot;lib&quot; as dependency. But the &quot;lib&quot; jar doesn't have the &quot;utility&quot; and &quot;another&quot; jar inside it. How can I create a artifact for &quot;lib&quot; and upload in such a way that other projects besides my &quot;app&quot; can add it as dependency in their gradle like <code>implementation &quot;mygroup:lib:v1.0&quot;</code> and they don't have to worry about or even know about &quot;utility&quot; or &quot;anotherLib&quot;?</p>\n<p>If possible, I'd like to avoid uploading &quot;utility&quot; and &quot;anotherLib&quot; jars on their own. Can they be packaged inside &quot;lib&quot; jar? How to do that?</p>\n<p>Also, if you think what I'm trying to do is just plain wrong, please let me know that as well</p>\n<p>I'm using java 11, gradle 8.3, springboot gradle plugin 2.7.15</p>\n<p>Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":39470,"reputation":40063,"user_id":113848,"accept_rate":83,"display_name":"legoscia"},"score":1,"creation_date":1435065044,"post_id":31002612,"comment_id":50034980,"body_markdown":"possible duplicate of [How to solve &quot;java.io.IOException: error=12, Cannot allocate memory&quot; calling Runtime#exec()?](http://stackoverflow.com/questions/1124771/how-to-solve-java-io-ioexception-error-12-cannot-allocate-memory-calling-run)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1124771/how-to-solve-java-io-ioexception-error-12-cannot-allocate-memory-calling-run\">How to solve &quot;java.io.IOException: error=12, Cannot allocate memory&quot; calling Runtime#exec()?</a>"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1465104852,"post_id":31002612,"comment_id":62758068,"body_markdown":"What is the OS?  Does it have enough resources (RAM?).. On linux see http://stackoverflow.com/questions/29250953/jmeter-out-of-memory-on-linux.","body":"What is the OS?  Does it have enough resources (RAM?).. On linux see <a href=\"http://stackoverflow.com/questions/29250953/jmeter-out-of-memory-on-linux\" title=\"jmeter out of memory on linux\">stackoverflow.com/questions/29250953/&hellip;</a>."},{"owner":{"account_id":5875243,"reputation":1857,"user_id":4626262,"accept_rate":95,"display_name":"Greesh Kumar"},"score":0,"creation_date":1465189490,"post_id":31002612,"comment_id":62779573,"body_markdown":"ubuntu 14.04 OS , 16 GB Server","body":"ubuntu 14.04 OS , 16 GB Server"},{"owner":{"account_id":106937,"reputation":6461,"user_id":284602,"accept_rate":86,"display_name":"Andron"},"score":0,"creation_date":1536233930,"post_id":31002612,"comment_id":91355388,"body_markdown":"I had an issue with running java from apache (a similar error). The fix described [here](https://stackoverflow.com/a/52201705/284602).","body":"I had an issue with running java from apache (a similar error). The fix described <a href=\"https://stackoverflow.com/a/52201705/284602\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":7711471,"reputation":121,"user_id":5840603,"display_name":"Brainsbot"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1465020309,"creation_date":1454594097,"answer_id":35202902,"question_id":31002612,"body_markdown":"Java was not able to allocate enough memory, i.e. it&#39;s not Java&#39;s heap limit that&#39;s in the way but rather no more memory available to be given to Java by OS. Check that the machine is not running out of memory.\r\nAnd first clean ram or increase ram then check if again there is an out of memory error then increase heap size:\r\n\r\n`-Xms128m`  \tmin(heap size)\r\n\r\n`-Xmx512m` \t\tmax(heap size)\r\n\r\n`-XX:MaxPermSize` max(perm size)","title":"Java HotSpot(TM) 64-Bit Server VM warning","body":"<p>Java was not able to allocate enough memory, i.e. it's not Java's heap limit that's in the way but rather no more memory available to be given to Java by OS. Check that the machine is not running out of memory.\nAnd first clean ram or increase ram then check if again there is an out of memory error then increase heap size:</p>\n\n<p><code>-Xms128m</code>      min(heap size)</p>\n\n<p><code>-Xmx512m</code>      max(heap size)</p>\n\n<p><code>-XX:MaxPermSize</code> max(perm size)</p>\n"},{"tags":[],"owner":{"account_id":3986395,"reputation":1853,"user_id":3286831,"accept_rate":100,"display_name":"Manisha  Bano"},"down_vote_count":2,"up_vote_count":58,"is_accepted":true,"score":56,"last_activity_date":1626963857,"creation_date":1465466832,"answer_id":37722909,"question_id":31002612,"body_markdown":"There is insufficient memory for the Java Runtime Environment to continue.\r\n\r\nNative memory allocation (malloc) failed to allocate xxxxx bytes for committing reserved memory.\r\n\r\n**Possible reasons:**\r\n\r\n 1. The system is out of physical RAM or swap space\r\n 2. In 32 bit mode, the process size limit was hit\r\n\r\n**Possible solutions:**\r\n\r\n 1. Reduce memory load on the system\r\n 2. Increase physical memory or swap space\r\n 3. Check if swap backing store is full\r\n 4. Use 64 bit Java on a 64 bit OS\r\n 5. Decrease Java heap size (-Xmx/-Xms)\r\n 6. Decrease number of Java threads\r\n 7. Decrease Java thread stack sizes (-Xss)\r\n 8. Set larger code cache with -XX:ReservedCodeCacheSize=\r\n\r\n\r\nIf you are on Java 8 or later, please also see this question: https://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize","title":"Java HotSpot(TM) 64-Bit Server VM warning","body":"<p>There is insufficient memory for the Java Runtime Environment to continue.</p>\n<p>Native memory allocation (malloc) failed to allocate xxxxx bytes for committing reserved memory.</p>\n<p><strong>Possible reasons:</strong></p>\n<ol>\n<li>The system is out of physical RAM or swap space</li>\n<li>In 32 bit mode, the process size limit was hit</li>\n</ol>\n<p><strong>Possible solutions:</strong></p>\n<ol>\n<li>Reduce memory load on the system</li>\n<li>Increase physical memory or swap space</li>\n<li>Check if swap backing store is full</li>\n<li>Use 64 bit Java on a 64 bit OS</li>\n<li>Decrease Java heap size (-Xmx/-Xms)</li>\n<li>Decrease number of Java threads</li>\n<li>Decrease Java thread stack sizes (-Xss)</li>\n<li>Set larger code cache with -XX:ReservedCodeCacheSize=</li>\n</ol>\n<p>If you are on Java 8 or later, please also see this question: <a href=\"https://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize\">Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize</a></p>\n"},{"tags":[],"owner":{"account_id":10041270,"reputation":510,"user_id":7423973,"display_name":"Jadhav Gaurav"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621156561,"creation_date":1621156219,"answer_id":67554838,"question_id":31002612,"body_markdown":"There is insufficient memory for the Java Runtime Environment.\r\n\r\nI was facing the same issue as shown below.\r\n\r\n&gt; OpenJDK 64-Bit Server VM warning: INFO:\r\n&gt; os::commit_memory(0x00000000f80f7000, 20729856, 0) failed;\r\n&gt; error=&#39;Cannot allocate memory&#39; (errno=12)\r\n\r\nI solved this by using below steps.\r\n\r\nThere are processes hanging on to files they&#39;ve accessed on /tmp\r\n\r\nUse **lsof** to check: \r\n\r\n    lsof | grep deleted\r\n\r\nIt will list processes, Now you can kill those process which will free the space for you.\n","title":"Java HotSpot(TM) 64-Bit Server VM warning","body":"<p>There is insufficient memory for the Java Runtime Environment.</p>\n<p>I was facing the same issue as shown below.</p>\n<blockquote>\n<p>OpenJDK 64-Bit Server VM warning: INFO:\nos::commit_memory(0x00000000f80f7000, 20729856, 0) failed;\nerror='Cannot allocate memory' (errno=12)</p>\n</blockquote>\n<p>I solved this by using below steps.</p>\n<p>There are processes hanging on to files they've accessed on /tmp</p>\n<p>Use <strong>lsof</strong> to check:</p>\n<pre><code>lsof | grep deleted\n</code></pre>\n<p>It will list processes, Now you can kill those process which will free the space for you.</p>\n"},{"tags":[],"owner":{"account_id":29402963,"reputation":19,"user_id":22528704,"display_name":"Wassim Becheikh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697591595,"creation_date":1697591595,"answer_id":77312992,"question_id":31002612,"body_markdown":"write this code in ur command line &quot;docker run -d --name sonarqube  -p 9000:9000 -p 9092:9092  -e SONAR_WEB_JVM_OPTS=&quot;-Xms128m -Xmx512m&quot;   sonarqube&quot;","title":"Java HotSpot(TM) 64-Bit Server VM warning","body":"<p>write this code in ur command line &quot;docker run -d --name sonarqube  -p 9000:9000 -p 9092:9092  -e SONAR_WEB_JVM_OPTS=&quot;-Xms128m -Xmx512m&quot;   sonarqube&quot;</p>\n"}],"owner":{"account_id":5875243,"reputation":1857,"user_id":4626262,"accept_rate":95,"display_name":"Greesh Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151519,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":37722909,"answer_count":4,"score":49,"last_activity_date":1697591595,"creation_date":1435061919,"question_id":31002612,"body_markdown":"I have a tomcat as my web-server, it stopped down automatically with the given Error -\r\n \r\n\r\n    Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00007f16a8405000, 12288, 0) failed; error=&#39;Cannot allocate memory&#39; (errno=12)\r\n\r\n\r\ni need to figured it out what actually happened ? and what warning does mean ?\r\n\r\n ","title":"Java HotSpot(TM) 64-Bit Server VM warning","body":"<p>I have a tomcat as my web-server, it stopped down automatically with the given Error -</p>\n\n<pre><code>Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00007f16a8405000, 12288, 0) failed; error='Cannot allocate memory' (errno=12)\n</code></pre>\n\n<p>i need to figured it out what actually happened ? and what warning does mean ?</p>\n"},{"tags":["java","class","buffer","bufferedreader","reader"],"owner":{"account_id":29696074,"reputation":1,"user_id":22759266,"display_name":"Stepan Zakhariev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697591294,"creation_date":1697591294,"question_id":77312974,"body_markdown":"I&#39;ve been struggling with it for almost a week. I need to make a function in my class that returns true/false if there is a next line in system.in, in a string or in a file.(no matter if it will detect last empty line &#39;cause java original scanner does the same)\r\nIt should be written according to my skills (2 months of java in university) - we have only started to write our classes and it is a homework. I don&#39;t need you to do it for yourself but I need an advice. I can&#39;t use buffered reader&#39;s next line. I need to use my own blocking read (array of chars ~256-1024 chars) and when I use that function/method I need to continue reading from the char that was the last in previous time when function was called.\r\n\r\n\r\nI tried this: It doesn&#39;t work on mac but on windows sometimes it does depending on buffer&#39;s size (char array) but I cant understand why. \r\nAlso there is a possibility that first read can have buffer[-1] = &#39;\\r&#39; and &#39;\\n&#39; can be in the second buffer so I need to create a stringbuilder that will store chars (tbh 1 char before the second is added to the stringbuilder) before they will be recognized as a line separator. \r\n```\r\npublic boolean hasNextLine() {\r\n        refillIfNeeded();\r\n        StringBuilder sep = new StringBuilder();\r\n        while (true) {\r\n            if (getCurrentID() == lastFilled(block)) {\r\n                refillIfNeeded();\r\n                newCurrentID(0);\r\n            }\r\n            if (countofread == -1) {\r\n                break;\r\n            }\r\n            for (int i = getCurrentID(); i &lt; lastFilled(block); i++) {\r\n                if (block[i] == &#39;\\n&#39; || block[i] == &#39;\\r&#39;) {\r\n                    sep.append(block[i]);\r\n                    System.out.println(sep.length());\r\n                    if (sep.toString().equals(separator)) {\r\n                        sep.setLength(0);\r\n                        newCurrentID(i + 1);\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            newCurrentID(lastFilled(block));\r\n        }\r\n        return false;\r\n    }\r\n```\r\nFunctions and their code can be found below:\r\n\r\n```\r\nimport java.io.*;\r\n\r\npublic class MyScanner {\r\n\r\n    File source;\r\n    String charsetName;\r\n    String string;\r\n    InputStream in;\r\n    BufferedReader reader;\r\n    int CurrentID = 0;\r\n    char[] block = new char[16];\r\n    int countofread = 0;\r\n\r\n    String separator = System.lineSeparator();\r\n\r\n    public MyScanner(File source, String charsetName) {\r\n        this.source = source;\r\n        this.charsetName = charsetName;\r\n        try {\r\n            reader = new BufferedReader(\r\n                    new InputStreamReader(new FileInputStream(source), charsetName)\r\n            );\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Unsupported Encoding or File Not Found&quot;);\r\n        }\r\n    }\r\n\r\n    public MyScanner(File source) {\r\n        this.source = source;\r\n        try {\r\n            reader = new BufferedReader(\r\n                    new InputStreamReader(new FileInputStream(source))\r\n            );\r\n        } catch (FileNotFoundException e) {\r\n            System.err.println(&quot;File Not Found&quot;);\r\n        }\r\n    }\r\n\r\n    public MyScanner(String string) {\r\n        this.string = string;\r\n        reader = new BufferedReader(new StringReader(string));\r\n    }\r\n\r\n    public MyScanner(InputStream in) {\r\n        reader = new BufferedReader(new InputStreamReader(in));\r\n    }\r\n\r\n    public MyScanner(InputStream in, String charsetName) {\r\n        try {\r\n            reader = new BufferedReader(\r\n                    new InputStreamReader(in, charsetName)\r\n            );\r\n        } catch (UnsupportedEncodingException e) {\r\n            System.err.println(&quot;Unsupported Encoding&quot;);\r\n        }\r\n    }\r\n\r\n    public void close() {\r\n        try {\r\n            reader.close();\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Can&#39;t close the scanner&quot;);\r\n        }\r\n    }\r\n\r\n    public int fillBlock(char[] block) {\r\n        try {\r\n            countofread = reader.read(block);\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Can&#39;t fill the block&quot;);\r\n        }\r\n        return countofread;\r\n    }\r\n\r\n    public int getCurrentID() {\r\n        return CurrentID;\r\n    }\r\n\r\n    public void newCurrentID(int newID) {\r\n        CurrentID = newID;\r\n    }\r\n\r\n    public int lastFilled(char[] arr) {\r\n        int last = arr.length - 1;\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            if (arr[i] == Character.MIN_VALUE) {\r\n                last = i - 1;\r\n                return last;\r\n            }\r\n        }\r\n        return last;\r\n    }\r\n\r\n    public void refillIfNeeded() {\r\n        if (getCurrentID() &gt;= lastFilled(block)) {\r\n            fillBlock(block);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public boolean hasNextLine() {\r\n        refillIfNeeded();\r\n        StringBuilder sep = new StringBuilder();\r\n        while (true) {\r\n            if (getCurrentID() == lastFilled(block)) {\r\n                refillIfNeeded();\r\n                newCurrentID(0);\r\n            }\r\n            if (countofread == -1) {\r\n                break;\r\n            }\r\n            for (int i = getCurrentID(); i &lt; lastFilled(block); i++) {\r\n                if (block[i] == &#39;\\n&#39; || block[i] == &#39;\\r&#39;) {\r\n                    sep.append(block[i]);\r\n                    System.out.println(sep.length());\r\n                    if (sep.toString().equals(separator)) {\r\n                        sep.setLength(0);\r\n                        newCurrentID(i + 1);\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            newCurrentID(lastFilled(block));\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n\r\n","title":"I need to create my own method hasNextLine with block reading and system.lineseparator","body":"<p>I've been struggling with it for almost a week. I need to make a function in my class that returns true/false if there is a next line in system.in, in a string or in a file.(no matter if it will detect last empty line 'cause java original scanner does the same)\nIt should be written according to my skills (2 months of java in university) - we have only started to write our classes and it is a homework. I don't need you to do it for yourself but I need an advice. I can't use buffered reader's next line. I need to use my own blocking read (array of chars ~256-1024 chars) and when I use that function/method I need to continue reading from the char that was the last in previous time when function was called.</p>\n<p>I tried this: It doesn't work on mac but on windows sometimes it does depending on buffer's size (char array) but I cant understand why.\nAlso there is a possibility that first read can have buffer[-1] = '\\r' and '\\n' can be in the second buffer so I need to create a stringbuilder that will store chars (tbh 1 char before the second is added to the stringbuilder) before they will be recognized as a line separator.</p>\n<pre><code>public boolean hasNextLine() {\n        refillIfNeeded();\n        StringBuilder sep = new StringBuilder();\n        while (true) {\n            if (getCurrentID() == lastFilled(block)) {\n                refillIfNeeded();\n                newCurrentID(0);\n            }\n            if (countofread == -1) {\n                break;\n            }\n            for (int i = getCurrentID(); i &lt; lastFilled(block); i++) {\n                if (block[i] == '\\n' || block[i] == '\\r') {\n                    sep.append(block[i]);\n                    System.out.println(sep.length());\n                    if (sep.toString().equals(separator)) {\n                        sep.setLength(0);\n                        newCurrentID(i + 1);\n                        return true;\n                    }\n                }\n            }\n            newCurrentID(lastFilled(block));\n        }\n        return false;\n    }\n</code></pre>\n<p>Functions and their code can be found below:</p>\n<pre><code>import java.io.*;\n\npublic class MyScanner {\n\n    File source;\n    String charsetName;\n    String string;\n    InputStream in;\n    BufferedReader reader;\n    int CurrentID = 0;\n    char[] block = new char[16];\n    int countofread = 0;\n\n    String separator = System.lineSeparator();\n\n    public MyScanner(File source, String charsetName) {\n        this.source = source;\n        this.charsetName = charsetName;\n        try {\n            reader = new BufferedReader(\n                    new InputStreamReader(new FileInputStream(source), charsetName)\n            );\n        } catch (IOException e) {\n            System.err.println(&quot;Unsupported Encoding or File Not Found&quot;);\n        }\n    }\n\n    public MyScanner(File source) {\n        this.source = source;\n        try {\n            reader = new BufferedReader(\n                    new InputStreamReader(new FileInputStream(source))\n            );\n        } catch (FileNotFoundException e) {\n            System.err.println(&quot;File Not Found&quot;);\n        }\n    }\n\n    public MyScanner(String string) {\n        this.string = string;\n        reader = new BufferedReader(new StringReader(string));\n    }\n\n    public MyScanner(InputStream in) {\n        reader = new BufferedReader(new InputStreamReader(in));\n    }\n\n    public MyScanner(InputStream in, String charsetName) {\n        try {\n            reader = new BufferedReader(\n                    new InputStreamReader(in, charsetName)\n            );\n        } catch (UnsupportedEncodingException e) {\n            System.err.println(&quot;Unsupported Encoding&quot;);\n        }\n    }\n\n    public void close() {\n        try {\n            reader.close();\n        } catch (IOException e) {\n            System.err.println(&quot;Can't close the scanner&quot;);\n        }\n    }\n\n    public int fillBlock(char[] block) {\n        try {\n            countofread = reader.read(block);\n        } catch (IOException e) {\n            System.err.println(&quot;Can't fill the block&quot;);\n        }\n        return countofread;\n    }\n\n    public int getCurrentID() {\n        return CurrentID;\n    }\n\n    public void newCurrentID(int newID) {\n        CurrentID = newID;\n    }\n\n    public int lastFilled(char[] arr) {\n        int last = arr.length - 1;\n        for (int i = 0; i &lt; arr.length; i++) {\n            if (arr[i] == Character.MIN_VALUE) {\n                last = i - 1;\n                return last;\n            }\n        }\n        return last;\n    }\n\n    public void refillIfNeeded() {\n        if (getCurrentID() &gt;= lastFilled(block)) {\n            fillBlock(block);\n        }\n    }\n\n\n\n    public boolean hasNextLine() {\n        refillIfNeeded();\n        StringBuilder sep = new StringBuilder();\n        while (true) {\n            if (getCurrentID() == lastFilled(block)) {\n                refillIfNeeded();\n                newCurrentID(0);\n            }\n            if (countofread == -1) {\n                break;\n            }\n            for (int i = getCurrentID(); i &lt; lastFilled(block); i++) {\n                if (block[i] == '\\n' || block[i] == '\\r') {\n                    sep.append(block[i]);\n                    System.out.println(sep.length());\n                    if (sep.toString().equals(separator)) {\n                        sep.setLength(0);\n                        newCurrentID(i + 1);\n                        return true;\n                    }\n                }\n            }\n            newCurrentID(lastFilled(block));\n        }\n        return false;\n    }\n\n\n\n\n\n}\n\n\n\n</code></pre>\n"},{"tags":["java","build","maven-2","build-process"],"comments":[{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":1,"creation_date":1410901395,"post_id":21746136,"comment_id":40498720,"body_markdown":"possible duplicate of [How is \\*mvn clean install\\* different from \\*mvn install\\*](http://stackoverflow.com/questions/6018701/how-is-mvn-clean-install-different-from-mvn-install)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/6018701/how-is-mvn-clean-install-different-from-mvn-install\">How is *mvn clean install* different from *mvn install*</a>"}],"answers":[{"tags":[],"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1392270234,"creation_date":1392270234,"answer_id":21746174,"question_id":21746136,"body_markdown":"As explained [here][1].\r\n\r\nclean is its own action in Maven. mvn clean install tell Maven to do the clean action in each module before running the install action for each module.\r\n\r\nWhat this does is clear any compiled files you have, making sure that you&#39;re really compiling each module from scratch.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6018701/how-is-mvn-clean-install-different-from-mvn-install","title":"difference between mvn clean and install commands","body":"<p>As explained <a href=\"https://stackoverflow.com/questions/6018701/how-is-mvn-clean-install-different-from-mvn-install\">here</a>.</p>\n\n<p>clean is its own action in Maven. mvn clean install tell Maven to do the clean action in each module before running the install action for each module.</p>\n\n<p>What this does is clear any compiled files you have, making sure that you're really compiling each module from scratch.</p>\n"},{"tags":[],"owner":{"account_id":1628076,"reputation":1,"user_id":2753452,"display_name":"mandeep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631882561,"creation_date":1392270648,"answer_id":21746257,"question_id":21746136,"body_markdown":"Maven has this concept of **Maven Phases**. Please go through the Maven Phases of [this doc][1]. So when you run a phase (say maven phase `x`)  all the phases up to that phase is executed (that is phase 1 to phase `x`). \r\n\r\nYou need `mvn clean` to clean up artifacts created by prior builds. `mvn package` will package your code into your specified format in your POM. `mvn install` will also install the package made by Maven  into the local repository. \r\n\r\nAlso note that `clean` and `site` are not part of phases of the default life-cycle. You have to fire it before your `package` or `install` command. Needless to say ordering does matter here.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html","title":"difference between mvn clean and install commands","body":"<p>Maven has this concept of <strong>Maven Phases</strong>. Please go through the Maven Phases of <a href=\"http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\" rel=\"nofollow noreferrer\">this doc</a>. So when you run a phase (say maven phase <code>x</code>)  all the phases up to that phase is executed (that is phase 1 to phase <code>x</code>).</p>\n<p>You need <code>mvn clean</code> to clean up artifacts created by prior builds. <code>mvn package</code> will package your code into your specified format in your POM. <code>mvn install</code> will also install the package made by Maven  into the local repository.</p>\n<p>Also note that <code>clean</code> and <code>site</code> are not part of phases of the default life-cycle. You have to fire it before your <code>package</code> or <code>install</code> command. Needless to say ordering does matter here.</p>\n"},{"tags":[],"owner":{"account_id":5618074,"reputation":111,"user_id":4448755,"display_name":"Elilmatha Sivanesan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631881737,"creation_date":1424756885,"answer_id":28688974,"question_id":21746136,"body_markdown":"The main different between `mvn clean -Dmaven.test.skip=true package` and `mvn install` is that the first command line cleans the `target` directory and packages without running the tests. The second one compiles, tests, packages and installs the JAR or WAR file into the local repository at `~/.m2/repository`.","title":"difference between mvn clean and install commands","body":"<p>The main different between <code>mvn clean -Dmaven.test.skip=true package</code> and <code>mvn install</code> is that the first command line cleans the <code>target</code> directory and packages without running the tests. The second one compiles, tests, packages and installs the JAR or WAR file into the local repository at <code>~/.m2/repository</code>.</p>\n"}],"owner":{"account_id":344164,"reputation":2553,"user_id":676326,"accept_rate":50,"display_name":"TKV"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697591265,"creation_date":1392270043,"question_id":21746136,"body_markdown":"I am using maven for the build purpose and normally we use the maven command `mvn clean -Dmaven.test.skip=true package` only to build the web application. I know we can use the `mvn install` command also to build a web application. But can anyone provide me with the exact difference between these two commands?\r\n\r\nI found some notes on the clean and install commands. But i just want to know what&#39;s the advantage of using `mvn clean` command instead of using `install` command.","title":"difference between mvn clean and install commands","body":"<p>I am using maven for the build purpose and normally we use the maven command <code>mvn clean -Dmaven.test.skip=true package</code> only to build the web application. I know we can use the <code>mvn install</code> command also to build a web application. But can anyone provide me with the exact difference between these two commands?</p>\n\n<p>I found some notes on the clean and install commands. But i just want to know what's the advantage of using <code>mvn clean</code> command instead of using <code>install</code> command.</p>\n"},{"tags":["java","eclipse","selenium-webdriver","intellij-idea"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697229306,"post_id":77289255,"comment_id":136258713,"body_markdown":"You may want to try a Selenium plugin for IntelliJ. I can see at least two different options in the Marketplace. (as an aside: I only saw this because someone added the Java tag. Make sure to add a relevant language tag whenever possible, so the right people will see your question)","body":"You may want to try a Selenium plugin for IntelliJ. I can see at least two different options in the Marketplace. (as an aside: I only saw this because someone added the Java tag. Make sure to add a relevant language tag whenever possible, so the right people will see your question)"},{"owner":{"account_id":23346680,"reputation":13,"user_id":17420863,"display_name":"Vladek 721"},"score":0,"creation_date":1697230823,"post_id":77289255,"comment_id":136258891,"body_markdown":"Thank you for your response, @Jorn! I added all tags here since I use Java/SE and I changed my coding work environment from Eclipse to IntelliJ. Seems to me that all the tags are correct here and relevant to my question. Regarding your suggestion: how Selenium plugin will help here? I can&#39;t see in the pop-up window the implementation of my own methods or the locator for the web element when point the mouse cursor in those. But this feature works perfectly in Eclipse w/o any additional plugins.","body":"Thank you for your response, @Jorn! I added all tags here since I use Java/SE and I changed my coding work environment from Eclipse to IntelliJ. Seems to me that all the tags are correct here and relevant to my question. Regarding your suggestion: how Selenium plugin will help here? I can&#39;t see in the pop-up window the implementation of my own methods or the locator for the web element when point the mouse cursor in those. But this feature works perfectly in Eclipse w/o any additional plugins."}],"owner":{"account_id":23346680,"reputation":13,"user_id":17420863,"display_name":"Vladek 721"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697589747,"creation_date":1697213527,"question_id":77289255,"body_markdown":"[![IntelliJ](https://i.stack.imgur.com/tYmDQ.jpg)](https://i.stack.imgur.com/tYmDQ.jpg)\r\n\r\n\r\n\r\n[![Eclipse](https://i.stack.imgur.com/2nptw.jpg)](https://i.stack.imgur.com/2nptw.jpg)\r\n\r\n\r\nI am using Cucumber framework with POM(Java/Selenium/jUnit)) and @FindBy annotation in my page elements classes:\r\n\r\n```\r\n@FindBy(xpath = &quot;//*[contains(text(),&#39;Email Doc&#39;)]&quot;) public List &lt;WebElement&gt; emailDocuments;\r\n\r\n```\r\nby using:\r\n\r\n```\r\nPageFactory.initElements(driver, this);\r\n\r\n```\r\nRecently I decided to install IntelliJ and start working in this beautiful environment, I really enjoy it. but unfortunately, I noticed when I move the mouse cursor on the web element - I can&#39;t see the locator of the element as it was in Eclipse. I attached 2 screenshots, hope it will make more sense for you, and hope it is possible to fix it somehow in the settings or with the help of some plugins. (Please don&#39;t suggest to avid using @FindBy annotation, it will require a lot of changes in my framework). Thank you so much in advance for any help!\r\n\r\nUPDATE: I just noticed this is not only about web elements, also all the methods that I implement in different classes, I can&#39;t see the structure/implementation of those methods when I move the mouse, but it works in Eclipse for me. \r\n\r\nI tried to do research and didn&#39;t find anything except the check box in the settings for &quot;Show on mouse move&quot;.","title":"IntelliJ IDEA doesn&#39;t display locators for my webElements with mouse move, how it does Eclipse","body":"<p><a href=\"https://i.stack.imgur.com/tYmDQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tYmDQ.jpg\" alt=\"IntelliJ\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/2nptw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2nptw.jpg\" alt=\"Eclipse\" /></a></p>\n<p>I am using Cucumber framework with POM(Java/Selenium/jUnit)) and @FindBy annotation in my page elements classes:</p>\n<pre><code>@FindBy(xpath = &quot;//*[contains(text(),'Email Doc')]&quot;) public List &lt;WebElement&gt; emailDocuments;\n\n</code></pre>\n<p>by using:</p>\n<pre><code>PageFactory.initElements(driver, this);\n\n</code></pre>\n<p>Recently I decided to install IntelliJ and start working in this beautiful environment, I really enjoy it. but unfortunately, I noticed when I move the mouse cursor on the web element - I can't see the locator of the element as it was in Eclipse. I attached 2 screenshots, hope it will make more sense for you, and hope it is possible to fix it somehow in the settings or with the help of some plugins. (Please don't suggest to avid using @FindBy annotation, it will require a lot of changes in my framework). Thank you so much in advance for any help!</p>\n<p>UPDATE: I just noticed this is not only about web elements, also all the methods that I implement in different classes, I can't see the structure/implementation of those methods when I move the mouse, but it works in Eclipse for me.</p>\n<p>I tried to do research and didn't find anything except the check box in the settings for &quot;Show on mouse move&quot;.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"owner":{"account_id":200877,"reputation":3077,"user_id":446976,"accept_rate":74,"display_name":"Dheeraj Joshi"},"score":0,"creation_date":1335159586,"post_id":10275258,"comment_id":13216005,"body_markdown":"is _courses an empty list or it has same calue as courses? I can see multiple entries in the output","body":"is _courses an empty list or it has same calue as courses? I can see multiple entries in the output"}],"answers":[{"tags":[],"owner":{"account_id":85390,"reputation":10386,"user_id":238086,"accept_rate":53,"display_name":"Raam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1335159630,"creation_date":1335159630,"answer_id":10275345,"question_id":10275258,"body_markdown":"     if(t.getSks()==4)      \r\n    {\r\n        i--;\r\n        t.setSks(2);\r\n        t.setIndex(index); // I want to set this one\r\n        index++;\r\n    }\r\n\r\nI guess you are decrementing i so that the object is added twice. But remember that its the same object that&#39;s getting added to the list. So when you set t.setIndex(index) it will change the value of index for the previous iteration.\r\nThis is because java deals with references only. So courses.get(0) and courses.get(1) returns a reference to the same object and hence this behaviour.\r\nIf you want the index to be different then you may need to clone the object and add it again to the list. You will need to think thru this and decide if you want another copy of the object or not.","title":"how to moving object twice from list to another list and set object variable differently","body":"<pre><code> if(t.getSks()==4)      \n{\n    i--;\n    t.setSks(2);\n    t.setIndex(index); // I want to set this one\n    index++;\n}\n</code></pre>\n\n<p>I guess you are decrementing i so that the object is added twice. But remember that its the same object that's getting added to the list. So when you set t.setIndex(index) it will change the value of index for the previous iteration.\nThis is because java deals with references only. So courses.get(0) and courses.get(1) returns a reference to the same object and hence this behaviour.\nIf you want the index to be different then you may need to clone the object and add it again to the list. You will need to think thru this and decide if you want another copy of the object or not.</p>\n"}],"owner":{"account_id":1427359,"reputation":1,"user_id":1350520,"display_name":"Nanda Bagus Pradnyana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697589680,"creation_date":1335159040,"question_id":10275258,"body_markdown":"I have question about assigning object to arraylist with nearly same objects, the objects come from another list which I want to add to the arraylist two times, and before I add it to another list, I need to set value a variable in those objects.\r\n\r\nthis the code, \r\n\r\n    ArrayList&lt;ClassCourse&gt; courses = new ArrayList&lt;ClassCourse&gt;();\r\n    ArrayList&lt;ClassCourse&gt; _courses = new ArrayList&lt;ClassCourse&gt;();\r\n\r\n    int index = 0;\r\n    for( int i = 0; i &lt; courses.size(); i++ )\r\n    {\r\n        ClassCourse t = courses.get(i);\r\n        if(t.getSks()==4)      \r\n        {\r\n            i--;\r\n            t.setSks(2);\r\n            t.setIndex(index); // I want to set this one\r\n            index++;\r\n        }\r\n        else\r\n        {\r\n            t.setIndex(index); // I want to set this one\r\n            index++;\r\n        }\r\n        _courses.add(t);\r\n    }\r\n\r\nthe problem is when I check the list by print it \r\n\r\n    for( ClassCourse t : _courses )\r\n        System.out.println( t.getIndex() + &quot; &quot; + t.getName() + &quot; &quot; +\r\n                t.getCourseCode() + &quot; &quot; + t.getSks() );\r\n\r\nand this is what I get \r\n\r\n\r\n&lt;pre&gt;\r\n1 Visi Komputer A 2\r\n1 Visi Komputer A 2\r\n2 Matematika Diskrit C 3\r\n4 Jaringan Nirkabel dan Komputasi Bergerak A 2\r\n4 Jaringan Nirkabel dan Komputasi Bergerak A 2\r\n5 Pemograman Framework .NET A 3\r\n6 Perancangan dan Analisis Algoritma E 3\r\n8 Sistem Terdistribusi A 2\r\n8 Sistem Terdistribusi A 2\r\n9 Matematika Diskrit D 3\r\n11 Manajemen Proyek Perangkat Lunak A 2\r\n11 Manajemen Proyek Perangkat Lunak A 2\r\n&lt;/pre&gt;\r\n\r\nI can&#39;t get index&#39;s value increasing in right way","title":"how to moving object twice from list to another list and set object variable differently","body":"<p>I have question about assigning object to arraylist with nearly same objects, the objects come from another list which I want to add to the arraylist two times, and before I add it to another list, I need to set value a variable in those objects.</p>\n\n<p>this the code, </p>\n\n<pre><code>ArrayList&lt;ClassCourse&gt; courses = new ArrayList&lt;ClassCourse&gt;();\nArrayList&lt;ClassCourse&gt; _courses = new ArrayList&lt;ClassCourse&gt;();\n\nint index = 0;\nfor( int i = 0; i &lt; courses.size(); i++ )\n{\n    ClassCourse t = courses.get(i);\n    if(t.getSks()==4)      \n    {\n        i--;\n        t.setSks(2);\n        t.setIndex(index); // I want to set this one\n        index++;\n    }\n    else\n    {\n        t.setIndex(index); // I want to set this one\n        index++;\n    }\n    _courses.add(t);\n}\n</code></pre>\n\n<p>the problem is when I check the list by print it </p>\n\n<pre><code>for( ClassCourse t : _courses )\n    System.out.println( t.getIndex() + \" \" + t.getName() + \" \" +\n            t.getCourseCode() + \" \" + t.getSks() );\n</code></pre>\n\n<p>and this is what I get </p>\n\n<pre>\n1 Visi Komputer A 2\n1 Visi Komputer A 2\n2 Matematika Diskrit C 3\n4 Jaringan Nirkabel dan Komputasi Bergerak A 2\n4 Jaringan Nirkabel dan Komputasi Bergerak A 2\n5 Pemograman Framework .NET A 3\n6 Perancangan dan Analisis Algoritma E 3\n8 Sistem Terdistribusi A 2\n8 Sistem Terdistribusi A 2\n9 Matematika Diskrit D 3\n11 Manajemen Proyek Perangkat Lunak A 2\n11 Manajemen Proyek Perangkat Lunak A 2\n</pre>\n\n<p>I can't get index's value increasing in right way</p>\n"},{"tags":["java","class","methods"],"comments":[{"owner":{"account_id":58163,"reputation":14165,"user_id":174184,"accept_rate":73,"display_name":"TJ-"},"score":6,"creation_date":1407773312,"post_id":25247669,"comment_id":39334486,"body_markdown":"static methods can access static properties only.","body":"static methods can access static properties only."}],"answers":[{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1407773373,"creation_date":1407773373,"answer_id":25247694,"question_id":25247669,"body_markdown":"Because `b` is an instance field, scoped within instances of the `Name` class. \r\n\r\nYour `main` method is `static`, scoped within the class itself.\r\n\r\nDeclare `b` as `static` to be able to access it from the `main` method. \r\n\r\nYou&#39;ll also need to make methods `get()` and `num()` `static` to compile. ","title":"java class why public static void main(String[] args) method can not access the property value of the class it is in?","body":"<p>Because <code>b</code> is an instance field, scoped within instances of the <code>Name</code> class. </p>\n\n<p>Your <code>main</code> method is <code>static</code>, scoped within the class itself.</p>\n\n<p>Declare <code>b</code> as <code>static</code> to be able to access it from the <code>main</code> method. </p>\n\n<p>You'll also need to make methods <code>get()</code> and <code>num()</code> <code>static</code> to compile. </p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1407773454,"creation_date":1407773454,"answer_id":25247727,"question_id":25247669,"body_markdown":"It&#39;s an instance (non-static) field, so you need an instance to reference it:\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(new Name().b);\r\n    }","title":"java class why public static void main(String[] args) method can not access the property value of the class it is in?","body":"<p>It's an instance (non-static) field, so you need an instance to reference it:</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(new Name().b);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1777799,"reputation":6787,"user_id":1621233,"accept_rate":25,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1407774228,"creation_date":1407774228,"answer_id":25247929,"question_id":25247669,"body_markdown":"Static methods can only access static properties.  You could either make `b` static, or you can instead instantionalize Name:\r\n\r\n    public class Name{\r\n    int b = 100;\r\n\r\n    public void get(){\r\n        System.out.println(b);\r\n    }\r\n    \r\n    public int num(){\r\n        return b;\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        new Name(args);\r\n    }\r\n\r\n    public Name(String[] args) {\r\n        System.out.println(b);\r\n    }\r\n\r\n","title":"java class why public static void main(String[] args) method can not access the property value of the class it is in?","body":"<p>Static methods can only access static properties.  You could either make <code>b</code> static, or you can instead instantionalize Name:</p>\n\n<pre><code>public class Name{\nint b = 100;\n\npublic void get(){\n    System.out.println(b);\n}\n\npublic int num(){\n    return b;\n}\n\npublic static void main(String[] args) {\n    new Name(args);\n}\n\npublic Name(String[] args) {\n    System.out.println(b);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29693523,"reputation":1,"user_id":22757375,"display_name":"vijayavelan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697588560,"creation_date":1697558400,"answer_id":77310531,"question_id":25247669,"body_markdown":"```java\r\npublic class Main {\r\n    public static void main(String []args){\r\n\t    System.out.println(&quot;hello world!&quot;);\r\n    }\r\n}\r\n```","title":"java class why public static void main(String[] args) method can not access the property value of the class it is in?","body":"<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String []args){\n        System.out.println(&quot;hello world!&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1971314,"reputation":428,"user_id":1770154,"accept_rate":50,"display_name":"raton"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1251,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":4,"score":-4,"last_activity_date":1697588560,"creation_date":1407773284,"question_id":25247669,"body_markdown":"    public class Name{\r\n\tint b = 100;\r\n\tpublic void get(){\r\n\t\tSystem.out.println(b);\r\n\t}\r\n\t\r\n\tpublic int num(){\r\n\t\treturn b;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSystem.out.println(b);\r\n\t}\r\n\r\n}\r\n\r\nget method can access b, num method can access b as well. why not public static void main method can access b.","title":"java class why public static void main(String[] args) method can not access the property value of the class it is in?","body":"<pre><code>public class Name{\nint b = 100;\npublic void get(){\n    System.out.println(b);\n}\n\npublic int num(){\n    return b;\n}\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    System.out.println(b);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>get method can access b, num method can access b as well. why not public static void main method can access b.</p>\n"},{"tags":["java","android","kotlin","localization"],"answers":[{"tags":[],"owner":{"account_id":10332243,"reputation":65,"user_id":7621652,"display_name":"Mudra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697588096,"creation_date":1697588096,"answer_id":77312849,"question_id":77305870,"body_markdown":"The issue was -  overriding my attachBaseContext method with updated contextWrapper.\r\nSo, I removed attachBaseContext method, and its working fine.\r\n\r\nEnsure your activity is extended with AppCompactActivity for the backward compatible APIs that work with the AppCompatActivity context, not the application context, for Android 12 (API level 32) and earlier. Access the backward compatible APIs with Appcompat 1.6.0 or higher.","title":"Issue for an Android 12 above - Traditional Chinese Language using AppCompatDelegate","body":"<p>The issue was -  overriding my attachBaseContext method with updated contextWrapper.\nSo, I removed attachBaseContext method, and its working fine.</p>\n<p>Ensure your activity is extended with AppCompactActivity for the backward compatible APIs that work with the AppCompatActivity context, not the application context, for Android 12 (API level 32) and earlier. Access the backward compatible APIs with Appcompat 1.6.0 or higher.</p>\n"}],"owner":{"account_id":10332243,"reputation":65,"user_id":7621652,"display_name":"Mudra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697588096,"creation_date":1697509515,"question_id":77305870,"body_markdown":"I&#39;m having an issue for above android 12, setting the traditional Chinese language using AppCompatDelegate.\r\n\r\nThe rest of the languages working fine.\r\n\r\nHere is the code,\r\n\r\n            val appLocale: LocaleListCompat = LocaleListCompat.forLanguageTags(&quot;zh-Hant&quot;)\r\n            // Call this on the main thread as it may require Activity.restart()\r\n            AppCompatDelegate.setApplicationLocales(appLocale)\r\n\r\nLocale.xml:\r\n\r\n    \r\n    &lt;locale-config xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n       &lt;locale android:name=&quot;en&quot;/&gt;\r\n       &lt;locale android:name=&quot;ms&quot;/&gt;\r\n       &lt;locale android:name=&quot;th&quot;/&gt;\r\n       &lt;locale android:name=&quot;zh&quot;/&gt;\r\n       &lt;locale android:name=&quot;zh-Hant-TW&quot;/&gt;\r\n       &lt;locale android:name=&quot;hi&quot;/&gt;\r\n    &lt;/locale-config&gt;\r\n\r\nBuild.gradle-\r\n\r\n    resConfigs(&quot;en&quot;, &quot;hi&quot;, &quot;ms&quot;, &quot;th&quot;,&quot;zh&quot;, &quot;zh-rTW&quot;, &quot;b+zh+Hant+TW&quot;)\r\n\r\n\r\nGitHub Reference link - [https://github.com/android/user-interface-samples/tree/main/PerAppLanguages/views_app][1]\r\n\r\nThanks!\r\n\r\n\r\n  [1]: https://github.com/android/user-interface-samples/tree/main/PerAppLanguages/views_app","title":"Issue for an Android 12 above - Traditional Chinese Language using AppCompatDelegate","body":"<p>I'm having an issue for above android 12, setting the traditional Chinese language using AppCompatDelegate.</p>\n<p>The rest of the languages working fine.</p>\n<p>Here is the code,</p>\n<pre><code>        val appLocale: LocaleListCompat = LocaleListCompat.forLanguageTags(&quot;zh-Hant&quot;)\n        // Call this on the main thread as it may require Activity.restart()\n        AppCompatDelegate.setApplicationLocales(appLocale)\n</code></pre>\n<p>Locale.xml:</p>\n<pre><code>&lt;locale-config xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n   &lt;locale android:name=&quot;en&quot;/&gt;\n   &lt;locale android:name=&quot;ms&quot;/&gt;\n   &lt;locale android:name=&quot;th&quot;/&gt;\n   &lt;locale android:name=&quot;zh&quot;/&gt;\n   &lt;locale android:name=&quot;zh-Hant-TW&quot;/&gt;\n   &lt;locale android:name=&quot;hi&quot;/&gt;\n&lt;/locale-config&gt;\n</code></pre>\n<p>Build.gradle-</p>\n<pre><code>resConfigs(&quot;en&quot;, &quot;hi&quot;, &quot;ms&quot;, &quot;th&quot;,&quot;zh&quot;, &quot;zh-rTW&quot;, &quot;b+zh+Hant+TW&quot;)\n</code></pre>\n<p>GitHub Reference link - <a href=\"https://github.com/android/user-interface-samples/tree/main/PerAppLanguages/views_app\" rel=\"nofollow noreferrer\">https://github.com/android/user-interface-samples/tree/main/PerAppLanguages/views_app</a></p>\n<p>Thanks!</p>\n"},{"tags":["java","syntax","logic","bit-manipulation"],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1355001627,"creation_date":1355001627,"answer_id":13782047,"question_id":13782025,"body_markdown":"see if the the right most bit is 1 then its not, by using bitwise operators\r\n\r\n\r\nperform logical and with (for example)\r\n\r\n    yourNumber &amp; 1","title":"Testing for even numbers in Java without modulo operator","body":"<p>see if the the right most bit is 1 then its not, by using bitwise operators</p>\n\n<p>perform logical and with (for example)</p>\n\n<pre><code>yourNumber &amp; 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1355001712,"creation_date":1355001712,"answer_id":13782059,"question_id":13782025,"body_markdown":"Check the least significant bit:\r\n\r\n    boolean even = (x &amp; 1) == 0;\r\n\r\nLSB is `0` for even number and `1` for odd, just like for decimal numbers least significant digit is `0` if it&#39;s dividable by `10`.","title":"Testing for even numbers in Java without modulo operator","body":"<p>Check the least significant bit:</p>\n\n<pre><code>boolean even = (x &amp; 1) == 0;\n</code></pre>\n\n<p>LSB is <code>0</code> for even number and <code>1</code> for odd, just like for decimal numbers least significant digit is <code>0</code> if it's dividable by <code>10</code>.</p>\n"},{"tags":[],"owner":{"account_id":1449510,"reputation":48172,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1355002754,"creation_date":1355001730,"answer_id":13782063,"question_id":13782025,"body_markdown":"Use the bitwise operation `and`\r\n\r\n    if( (number&amp;1) == 0)\r\n\r\n**Bitwise AND operator &amp;**\r\n\r\n&gt; The &amp; (bitwise AND) operator compares each bit of its first operand to\r\n&gt; the corresponding bit of the second operand. If both bits are 1&#39;s, the\r\n&gt; corresponding bit of the result is set to 1. Otherwise, it sets the\r\n&gt; corresponding result bit to 0 ([source][1]).\r\n \r\nIn the **binary** format even numbers has the **Least significant bit equal to zero**. knowing this and using the &amp; operator you can find out if it is even or not.\r\n\r\nSo it takes a number ..abcdy and compares with ..00001 if y is zero than ..abcdy &amp; ..00001 is also zero, thus a even number.\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/bitande.htm","title":"Testing for even numbers in Java without modulo operator","body":"<p>Use the bitwise operation <code>and</code></p>\n\n<pre><code>if( (number&amp;1) == 0)\n</code></pre>\n\n<p><strong>Bitwise AND operator &amp;</strong></p>\n\n<blockquote>\n  <p>The &amp; (bitwise AND) operator compares each bit of its first operand to\n  the corresponding bit of the second operand. If both bits are 1's, the\n  corresponding bit of the result is set to 1. Otherwise, it sets the\n  corresponding result bit to 0 (<a href=\"http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/bitande.htm\">source</a>).</p>\n</blockquote>\n\n<p>In the <strong>binary</strong> format even numbers has the <strong>Least significant bit equal to zero</strong>. knowing this and using the &amp; operator you can find out if it is even or not.</p>\n\n<p>So it takes a number ..abcdy and compares with ..00001 if y is zero than ..abcdy &amp; ..00001 is also zero, thus a even number.</p>\n"},{"tags":[],"owner":{"account_id":3764954,"reputation":1,"user_id":3128699,"display_name":"user3128699"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387781091,"creation_date":1387781091,"answer_id":20738300,"question_id":13782025,"body_markdown":"Myway ;)\r\n\r\npublic class Even_Odd {\r\n\r\n\t/**\r\n\t * @param args\r\n\t */\r\n\tpublic static void main(String[] args) \r\n\t{\r\n\t\tint val=550;\r\n\t\t// TODO Auto-generated method stub\r\n\t\twhile(val&gt;=0)\r\n\t\t{\r\n\t\t\tif(val==1)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Odd Number&quot;);\r\n\t\t\t}\r\n\t\t\telse if(val==0)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Even Number&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\tval=val-2;\r\n\t\t\t//\tSystem.out.println(val);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","title":"Testing for even numbers in Java without modulo operator","body":"<p>Myway ;)</p>\n\n<p>public class Even_Odd {</p>\n\n<pre><code>/**\n * @param args\n */\npublic static void main(String[] args) \n{\n    int val=550;\n    // TODO Auto-generated method stub\n    while(val&gt;=0)\n    {\n        if(val==1)\n        {\n            System.out.println(\"Odd Number\");\n        }\n        else if(val==0)\n        {\n            System.out.println(\"Even Number\");\n        }\n\n            val=val-2;\n        //  System.out.println(val);\n\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":3243453,"reputation":348,"user_id":2735801,"display_name":"prashant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450871265,"creation_date":1450871265,"answer_id":34435035,"question_id":13782025,"body_markdown":"    if((n|1)==n)\r\n      System.out.println(&quot;odd&quot;);\r\n    else\r\n      System.out.println(&quot;even&quot;);\r\n\r\nReason: number is odd if the LSB is 1, and even otherwise. When n|1 is done, LSB of odd stays the same so the resulting number is not changed, while LSB of a even number becomes 1, thus changing the number.","title":"Testing for even numbers in Java without modulo operator","body":"<pre><code>if((n|1)==n)\n  System.out.println(\"odd\");\nelse\n  System.out.println(\"even\");\n</code></pre>\n\n<p>Reason: number is odd if the LSB is 1, and even otherwise. When n|1 is done, LSB of odd stays the same so the resulting number is not changed, while LSB of a even number becomes 1, thus changing the number.</p>\n"},{"tags":[],"owner":{"account_id":3764954,"reputation":1,"user_id":3128699,"display_name":"user3128699"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470982263,"creation_date":1470982263,"answer_id":38911073,"question_id":13782025,"body_markdown":"Divide the number by **2** and multiply the answer **2**, if you get your original number then the number is **&quot;Even&quot;** if not then the number is **&quot;Odd&quot;**\r\n\r\n    public class EvenOrOdd\r\n    {\r\n        public static void main(String args[])\r\n        {\r\n            int value = 129;\r\n            \r\n            if((value/2)*2==value)\r\n            {\r\n                System.out.println(&quot;The Given Number \\&quot;&quot;+value+&quot;\\&quot; is Even&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;The Given Number \\&quot;&quot;+value+&quot;\\&quot; is Odd&quot;);\r\n            }\r\n        }\r\n    }","title":"Testing for even numbers in Java without modulo operator","body":"<p>Divide the number by <strong>2</strong> and multiply the answer <strong>2</strong>, if you get your original number then the number is <strong>\"Even\"</strong> if not then the number is <strong>\"Odd\"</strong></p>\n\n<pre><code>public class EvenOrOdd\n{\n    public static void main(String args[])\n    {\n        int value = 129;\n\n        if((value/2)*2==value)\n        {\n            System.out.println(\"The Given Number \\\"\"+value+\"\\\" is Even\");\n        }\n        else\n        {\n            System.out.println(\"The Given Number \\\"\"+value+\"\\\" is Odd\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9946062,"reputation":11,"user_id":7360747,"display_name":"Sachin Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484421510,"creation_date":1484421510,"answer_id":41653987,"question_id":13782025,"body_markdown":"    import java.io.*;\r\n    import java.util.*;\r\n    public class CheckNumber{\r\n\tpublic static void main(String... args)throws IOException{\r\n\t\t\r\n\t\tBufferedReader br=new BufferedReader(new InputStreamReader(System.in));\r\n\t\t\r\n\t\tSystem.out.println(&quot;Please enter the number to check even or odd&quot;);\r\n\r\n\t\tint number=Integer.parseInt(br.readLine());\r\n\t\t\r\n\t\tString temp=number+&quot;&quot;; //convert number to string\r\n\t\t\r\n\t\tchar ch=temp.charAt(temp.length()-1); //get last character\r\n\t\t\r\n\t\ttemp=ch+&quot;&quot;;\r\n\t\t\r\n\t\tif(temp.equals(&quot;0&quot;) || temp.equals(&quot;2&quot;) || temp.equals(&quot;4&quot;) || temp.equals(&quot;6&quot;) || temp.equals(&quot;8&quot;)) //check last number is even\r\n\t\t\tSystem.out.println(&quot;Number is even&quot;);\r\n\t\telse\r\n\t\t\tSystem.out.println(&quot;Number is odd&quot;);\r\n\t}\r\n\r\n\r\n}","title":"Testing for even numbers in Java without modulo operator","body":"<pre><code>import java.io.*;\nimport java.util.*;\npublic class CheckNumber{\npublic static void main(String... args)throws IOException{\n\n    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));\n\n    System.out.println(\"Please enter the number to check even or odd\");\n\n    int number=Integer.parseInt(br.readLine());\n\n    String temp=number+\"\"; //convert number to string\n\n    char ch=temp.charAt(temp.length()-1); //get last character\n\n    temp=ch+\"\";\n\n    if(temp.equals(\"0\") || temp.equals(\"2\") || temp.equals(\"4\") || temp.equals(\"6\") || temp.equals(\"8\")) //check last number is even\n        System.out.println(\"Number is even\");\n    else\n        System.out.println(\"Number is odd\");\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":2126401,"reputation":75,"user_id":1888437,"display_name":"JavaNewGirl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4365,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":7,"score":9,"last_activity_date":1697587963,"creation_date":1355001451,"question_id":13782025,"body_markdown":"How would I do this in Java? Find if a number is divisible by 2, if the last digit is even. (0,2,4,6,8) Example: 128 is, 129 is not","title":"Testing for even numbers in Java without modulo operator","body":"<p>How would I do this in Java? Find if a number is divisible by 2, if the last digit is even. (0,2,4,6,8) Example: 128 is, 129 is not</p>\n"},{"tags":["java","spring-boot","kotlin","spring-security","keycloak"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697587932,"creation_date":1697290449,"answer_id":77293010,"question_id":77292319,"body_markdown":"[According to the documentation][1], authorities mapping in OAuth2 clients is done with a `GrantedAuthoritiesMapper` or an `OAuth2UserService`. There is no chance that a `JwtAuthenticationConverter`, or more generally any `Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt;`, is ever called when you use `oauth2Login` with a browser: inspect your queries with your debugging tools, you won&#39;t find an authorization header containing a JWT (you&#39;ll just have `JSESSIONID` cookie).\r\n\r\nYou added both OAuth2 client and resource server configurations to a single security filter-chain. This is a bad idea and leads to the kind of confusion you are struggling with:\r\n- `oauth2Login` is a client concern. It requires **session based security** and as so, should be protected against CSRF: **disabling CSRF protection in a security filter-chain with `oauth2Login` is a serious security breach**. `Authentication` implementation built by such a filter chain is `OAuth2AuthenticationToken`, like you seem having at runtime (or `AnonymousAuthenticationToken` if user is not authenticated)\r\n- `JwtAuthenticationConverter` is used by the default authentication manager for resource server: **when requests are authorized with JWT access tokens** (not sessions) and builds `JwtAuthenticationToken` (not `OAuth2AuthenticationToken`)\r\n\r\nYou should decide if your security filter-chain is for an OAuth2 client or an OAuth2 resource server and remove the parts that don&#39;t match your need. \r\n\r\nAn application that is solely a REST API should probably contain only resource server configuration. Login and logout shouldn&#39;t be its responsibility: this should be handled by the OAuth2 clients querying it (tools like Postman or Spring applications with REST clients like `RestTemplate`, `@FeignClient`, `WebClient` or `RestClient`).\r\n\r\nIf your application needs to be both an OAuth2 client with login and an OAuth2 resource server, then you should define two distinct `SecurityFilterChain` beans: one with client configuration (sessions, CSRF protection, login and loogout), and another one with resource server configuration (no sessions, no CSRF protection, no login, no logout). This can be needed for instance in a MVC application serving publicly Thymeleaf templates (with `oauth2Login`) and a REST API queried by OAuth2 clients (a MVC controller with a REST client, or any other micro service sending REST request with Bearer Authorization header).\r\n\r\nNote that according to [latest recommendations][2], OAuth2 clients (what sends queries to an OAuth2 resource server) should be &quot;confidential&quot;, which require it to run on a server you trust. **This excludes SPAs and mobile applications** (which can&#39;t keep a secret, reason for it being configured as &quot;public&quot; clients in many tutorials). What can be done for such applications is using a BFF, for instance `spring-cloud-gateway` configured as OAuth2 client with login and `TokenRelay` filter (to replace the session cookie with an authorization header containing the access token in session, before forwarding a request from the frontend to a resource server). Another option is to configure the REST API as an OAuth2 client, but this makes very little sense (why bothering issuing and storing tokens that are never used) and teams with such configuration should probably question their usage of OAuth2 (Form login would probably be more adapted).\r\n\r\nFor more info and sample configuration, you could find [my tutorials][3] useful.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities\r\n  [2]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials","title":"Spring security jwtAuthConverter not getting triggered","body":"<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities\" rel=\"nofollow noreferrer\">According to the documentation</a>, authorities mapping in OAuth2 clients is done with a <code>GrantedAuthoritiesMapper</code> or an <code>OAuth2UserService</code>. There is no chance that a <code>JwtAuthenticationConverter</code>, or more generally any <code>Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt;</code>, is ever called when you use <code>oauth2Login</code> with a browser: inspect your queries with your debugging tools, you won't find an authorization header containing a JWT (you'll just have <code>JSESSIONID</code> cookie).</p>\n<p>You added both OAuth2 client and resource server configurations to a single security filter-chain. This is a bad idea and leads to the kind of confusion you are struggling with:</p>\n<ul>\n<li><code>oauth2Login</code> is a client concern. It requires <strong>session based security</strong> and as so, should be protected against CSRF: <strong>disabling CSRF protection in a security filter-chain with <code>oauth2Login</code> is a serious security breach</strong>. <code>Authentication</code> implementation built by such a filter chain is <code>OAuth2AuthenticationToken</code>, like you seem having at runtime (or <code>AnonymousAuthenticationToken</code> if user is not authenticated)</li>\n<li><code>JwtAuthenticationConverter</code> is used by the default authentication manager for resource server: <strong>when requests are authorized with JWT access tokens</strong> (not sessions) and builds <code>JwtAuthenticationToken</code> (not <code>OAuth2AuthenticationToken</code>)</li>\n</ul>\n<p>You should decide if your security filter-chain is for an OAuth2 client or an OAuth2 resource server and remove the parts that don't match your need.</p>\n<p>An application that is solely a REST API should probably contain only resource server configuration. Login and logout shouldn't be its responsibility: this should be handled by the OAuth2 clients querying it (tools like Postman or Spring applications with REST clients like <code>RestTemplate</code>, <code>@FeignClient</code>, <code>WebClient</code> or <code>RestClient</code>).</p>\n<p>If your application needs to be both an OAuth2 client with login and an OAuth2 resource server, then you should define two distinct <code>SecurityFilterChain</code> beans: one with client configuration (sessions, CSRF protection, login and loogout), and another one with resource server configuration (no sessions, no CSRF protection, no login, no logout). This can be needed for instance in a MVC application serving publicly Thymeleaf templates (with <code>oauth2Login</code>) and a REST API queried by OAuth2 clients (a MVC controller with a REST client, or any other micro service sending REST request with Bearer Authorization header).</p>\n<p>Note that according to <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">latest recommendations</a>, OAuth2 clients (what sends queries to an OAuth2 resource server) should be &quot;confidential&quot;, which require it to run on a server you trust. <strong>This excludes SPAs and mobile applications</strong> (which can't keep a secret, reason for it being configured as &quot;public&quot; clients in many tutorials). What can be done for such applications is using a BFF, for instance <code>spring-cloud-gateway</code> configured as OAuth2 client with login and <code>TokenRelay</code> filter (to replace the session cookie with an authorization header containing the access token in session, before forwarding a request from the frontend to a resource server). Another option is to configure the REST API as an OAuth2 client, but this makes very little sense (why bothering issuing and storing tokens that are never used) and teams with such configuration should probably question their usage of OAuth2 (Form login would probably be more adapted).</p>\n<p>For more info and sample configuration, you could find <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">my tutorials</a> useful.</p>\n"}],"owner":{"account_id":23226611,"reputation":1,"user_id":17318067,"display_name":"Thomas M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697587932,"creation_date":1697276147,"question_id":77292319,"body_markdown":"I am trying to use spring security and keycloak for my auth system in my spring boot backend. The keycloak part is doing it&#39;s job, I have a keycloak server running on localhost:8180 where I can creates roles etc. When the backend user is not connected keycloak webview pops up and let me connect or register a new user. When displaying the inide of the OAuth2AuthenticationToken i get every right informations including the role of the user (screenshot 1).\r\n\r\nThe thing is that when protecting a route with @preAuthorize() (AppController.kt) the hasRole function get&#39;s triggered triggering hasAnyRole and hasAnyAuthorityName (screenshot2). But when looking at the roleSet, calling (getAuthoritySet()) I don&#39;t see the PREFIX_client_test. When putting a break point in the jwtAuthenticationCOnverter() I see that it only get&#39;s triggered on the app startup not when hitting a protected route. I don&#39;t know if you have any clue about that, I will provide you the code and screenshot under, thanks for your answers.\r\n\r\nResult of OAuth2AuthenticationToken\r\n[Result of OAuth2AuthenticationToken](https://i.stack.imgur.com/PwZEH.png)\r\n\r\nBreakpoint in hasAnyAuthorityName\r\n[Breakpoint in hasAnyAuthorityName](https://i.stack.imgur.com/wsMMf.png)\r\n\r\n**AppController.kt**\r\n```kotlin\r\npackage com.linkedout.backend.controller\r\n\r\nimport org.springframework.security.access.prepost.PreAuthorize\r\nimport org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken\r\nimport org.springframework.web.bind.annotation.GetMapping\r\nimport org.springframework.web.bind.annotation.RequestMapping\r\nimport org.springframework.web.bind.annotation.RestController\r\n\r\n@RestController\r\n@RequestMapping(&quot;/&quot;)\r\nopen class AppController {\r\n    @GetMapping\r\n    open fun hello(token: OAuth2AuthenticationToken): String {\r\n        return &quot;Token: ${token}&quot;\r\n    }\r\n\r\n    @GetMapping(&quot;candidate&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;client_candidate&#39;)&quot;)\r\n    open fun helloProtected(): String {\r\n        return &quot;Hello premium user&quot;\r\n    }\r\n\r\n    @GetMapping(&quot;test&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;client_test&#39;)&quot;)\r\n    open fun test(): String {\r\n        return &quot;This is a test&quot;\r\n    }\r\n\r\n    @GetMapping(&quot;admin&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;client_admin&#39;)&quot;)\r\n    open fun helloProtectedAdmin(): String {\r\n        return &quot;Hello admin user&quot;\r\n    }\r\n}\r\n```\r\n\r\n**SecurityConfig.kt**\r\n\r\n```kotlin\r\npackage com.linkedout.backend.config\r\n\r\nimport com.linkedout.backend.KeycloakLogoutHandler\r\nimport lombok.RequiredArgsConstructor\r\nimport org.springframework.context.annotation.Bean\r\nimport org.springframework.context.annotation.Configuration\r\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity\r\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationConverter\r\nimport org.springframework.security.oauth2.server.resource.authentication.JwtGrantedAuthoritiesConverter\r\nimport org.springframework.security.web.SecurityFilterChain\r\n\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(prePostEnabled = true)\r\n@RequiredArgsConstructor\r\ninternal open class SecurityConfig() {\r\n\r\n    @Bean\r\n    @Throws(Exception::class)\r\n    open fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n        http.csrf { csrf -&gt; csrf.disable() }\r\n                .authorizeHttpRequests { auth -&gt; auth.anyRequest().fullyAuthenticated() }\r\n                .oauth2Login {  }\r\n                .oauth2ResourceServer { oauth2 -&gt; oauth2.jwt { jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwtAuthenticationConverter()) } }\r\n\r\n        return http.build()\r\n    }\r\n\r\n\r\n\r\n    open fun jwtAuthenticationConverter(): JwtAuthenticationConverter {\r\n        val jwtGrantedAuthoritiesConverter = JwtGrantedAuthoritiesConverter()\r\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;)\r\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;)\r\n\r\n        val jwtAuthenticationConverter = JwtAuthenticationConverter()\r\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter)\r\n        return jwtAuthenticationConverter\r\n    }\r\n}\r\n```\r\n\r\n**application.yml**\r\n\r\n```kotlin\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://localhost:8180/realms/Linkedout\r\n          jwk-set-uri: http://localhost:8180/realms/Linkedout/protocol/openid-connect/certs\r\n      client:\r\n        registration:\r\n          keycloak:\r\n            client-id: backend\r\n            client-secret: PjkVtHOWmu7BEekOqJnY8TopHrJO0iCE\r\n            authorization-grant-type: authorization_code\r\n            scope: openid\r\n        provider:\r\n          keycloak:\r\n            issuer-uri: http://localhost:8180/realms/LinkedOut\r\n            user-name-attribute: preferred_username\r\n\r\nserver:\r\n  port: 9090\r\n```\r\n\r\n\r\n","title":"Spring security jwtAuthConverter not getting triggered","body":"<p>I am trying to use spring security and keycloak for my auth system in my spring boot backend. The keycloak part is doing it's job, I have a keycloak server running on localhost:8180 where I can creates roles etc. When the backend user is not connected keycloak webview pops up and let me connect or register a new user. When displaying the inide of the OAuth2AuthenticationToken i get every right informations including the role of the user (screenshot 1).</p>\n<p>The thing is that when protecting a route with @preAuthorize() (AppController.kt) the hasRole function get's triggered triggering hasAnyRole and hasAnyAuthorityName (screenshot2). But when looking at the roleSet, calling (getAuthoritySet()) I don't see the PREFIX_client_test. When putting a break point in the jwtAuthenticationCOnverter() I see that it only get's triggered on the app startup not when hitting a protected route. I don't know if you have any clue about that, I will provide you the code and screenshot under, thanks for your answers.</p>\n<p>Result of OAuth2AuthenticationToken\n<a href=\"https://i.stack.imgur.com/PwZEH.png\" rel=\"nofollow noreferrer\">Result of OAuth2AuthenticationToken</a></p>\n<p>Breakpoint in hasAnyAuthorityName\n<a href=\"https://i.stack.imgur.com/wsMMf.png\" rel=\"nofollow noreferrer\">Breakpoint in hasAnyAuthorityName</a></p>\n<p><strong>AppController.kt</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>package com.linkedout.backend.controller\n\nimport org.springframework.security.access.prepost.PreAuthorize\nimport org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.web.bind.annotation.RequestMapping\nimport org.springframework.web.bind.annotation.RestController\n\n@RestController\n@RequestMapping(&quot;/&quot;)\nopen class AppController {\n    @GetMapping\n    open fun hello(token: OAuth2AuthenticationToken): String {\n        return &quot;Token: ${token}&quot;\n    }\n\n    @GetMapping(&quot;candidate&quot;)\n    @PreAuthorize(&quot;hasRole('client_candidate')&quot;)\n    open fun helloProtected(): String {\n        return &quot;Hello premium user&quot;\n    }\n\n    @GetMapping(&quot;test&quot;)\n    @PreAuthorize(&quot;hasRole('client_test')&quot;)\n    open fun test(): String {\n        return &quot;This is a test&quot;\n    }\n\n    @GetMapping(&quot;admin&quot;)\n    @PreAuthorize(&quot;hasRole('client_admin')&quot;)\n    open fun helloProtectedAdmin(): String {\n        return &quot;Hello admin user&quot;\n    }\n}\n</code></pre>\n<p><strong>SecurityConfig.kt</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>package com.linkedout.backend.config\n\nimport com.linkedout.backend.KeycloakLogoutHandler\nimport lombok.RequiredArgsConstructor\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationConverter\nimport org.springframework.security.oauth2.server.resource.authentication.JwtGrantedAuthoritiesConverter\nimport org.springframework.security.web.SecurityFilterChain\n\n\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true)\n@RequiredArgsConstructor\ninternal open class SecurityConfig() {\n\n    @Bean\n    @Throws(Exception::class)\n    open fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        http.csrf { csrf -&gt; csrf.disable() }\n                .authorizeHttpRequests { auth -&gt; auth.anyRequest().fullyAuthenticated() }\n                .oauth2Login {  }\n                .oauth2ResourceServer { oauth2 -&gt; oauth2.jwt { jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwtAuthenticationConverter()) } }\n\n        return http.build()\n    }\n\n\n\n    open fun jwtAuthenticationConverter(): JwtAuthenticationConverter {\n        val jwtGrantedAuthoritiesConverter = JwtGrantedAuthoritiesConverter()\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;)\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;)\n\n        val jwtAuthenticationConverter = JwtAuthenticationConverter()\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter)\n        return jwtAuthenticationConverter\n    }\n}\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://localhost:8180/realms/Linkedout\n          jwk-set-uri: http://localhost:8180/realms/Linkedout/protocol/openid-connect/certs\n      client:\n        registration:\n          keycloak:\n            client-id: backend\n            client-secret: PjkVtHOWmu7BEekOqJnY8TopHrJO0iCE\n            authorization-grant-type: authorization_code\n            scope: openid\n        provider:\n          keycloak:\n            issuer-uri: http://localhost:8180/realms/LinkedOut\n            user-name-attribute: preferred_username\n\nserver:\n  port: 9090\n</code></pre>\n"},{"tags":["java","mysql","hibernate","jdbc"],"comments":[{"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"score":1,"creation_date":1531227771,"post_id":51258496,"comment_id":89509853,"body_markdown":"I am unable to reproduce your issue with mysql-connector-java-5.1.46. For me, `.getColumns` returns `TINYINT`,  `3`,  and `0` for `TYPE_NAME`, `COLUMN_SIZE`, and `DECIMAL_DIGITS` respectively. Can you provide a [mcve] along with specific version information (driver version, server version, etc.)?","body":"I am unable to reproduce your issue with mysql-connector-java-5.1.46. For me, <code>.getColumns</code> returns <code>TINYINT</code>,  <code>3</code>,  and <code>0</code> for <code>TYPE_NAME</code>, <code>COLUMN_SIZE</code>, and <code>DECIMAL_DIGITS</code> respectively. Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> along with specific version information (driver version, server version, etc.)?"},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1531570549,"post_id":51258496,"comment_id":89651246,"body_markdown":"What&#39;s the MySQL version? What&#39;s JDBC driver are you using?","body":"What&#39;s the MySQL version? What&#39;s JDBC driver are you using?"}],"answers":[{"tags":[],"owner":{"account_id":17836039,"reputation":21,"user_id":12955035,"display_name":"blairwag"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582567094,"creation_date":1582564207,"answer_id":60380823,"question_id":51258496,"body_markdown":"We had a similar problem. Looks like newer versions of MySQL (namely post 5.0.6, like 8) have defined a `BIT` column type that is an alias for `TINYINT(1)`. Additionally, `BOOL` and `BOOLEAN` have been introduced. To resolve this issue for us, we decided to use the java connection string option `&quot;tinyInt1isBit=false&quot;` to get our correctly defined `TINYINT` columns reported correctly. We don&#39;t use `BIT`. Hope this helps.","title":"Tinyint returning as BIT in DatabaseMetaData JAVA","body":"<p>We had a similar problem. Looks like newer versions of MySQL (namely post 5.0.6, like 8) have defined a <code>BIT</code> column type that is an alias for <code>TINYINT(1)</code>. Additionally, <code>BOOL</code> and <code>BOOLEAN</code> have been introduced. To resolve this issue for us, we decided to use the java connection string option <code>\"tinyInt1isBit=false\"</code> to get our correctly defined <code>TINYINT</code> columns reported correctly. We don't use <code>BIT</code>. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":3428995,"reputation":465,"user_id":2873992,"display_name":"mcanvar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697587693,"creation_date":1697587693,"answer_id":77312835,"question_id":51258496,"body_markdown":"Thanks to the answer of @NatFar &amp; @blainwag, I&#39;ve solved my situation. I also wanted to add an answer for those trying to replicate tables via [ReplicaDB][1]. By default, it converts `TINYINT` to `BIN` by using `UNHEX()` function. To prevent this you can add the JDBC option at the end of your connection string like this:\r\n\r\n    --source-connect &quot;jdbc:mysql://localhost:3306/db?tinyInt1isBit=false&quot;\r\n\r\n\r\n  [1]: https://github.com/osalvador/ReplicaDB","title":"Tinyint returning as BIT in DatabaseMetaData JAVA","body":"<p>Thanks to the answer of @NatFar &amp; @blainwag, I've solved my situation. I also wanted to add an answer for those trying to replicate tables via <a href=\"https://github.com/osalvador/ReplicaDB\" rel=\"nofollow noreferrer\">ReplicaDB</a>. By default, it converts <code>TINYINT</code> to <code>BIN</code> by using <code>UNHEX()</code> function. To prevent this you can add the JDBC option at the end of your connection string like this:</p>\n<pre><code>--source-connect &quot;jdbc:mysql://localhost:3306/db?tinyInt1isBit=false&quot;\n</code></pre>\n"}],"owner":{"account_id":10932051,"reputation":513,"user_id":8034838,"accept_rate":57,"display_name":"Ankush Kapoor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697587693,"creation_date":1531204078,"question_id":51258496,"body_markdown":"MySql tinyint is returning as BIT in java and column size is returning as null. For other data types, it is working fine. Any Solution for this?\r\n\r\n\r\n\r\n    Class clsObj = Class.forName(className);\r\n    AbstractEntityPersister classMetadata = (AbstractEntityPersister) getSessionFactory().getClassMetadata(clsObj);\r\n    String[] properties = classMetadata.getPropertyNames();\r\n    String tableName = classMetadata.getTableName();\r\n    \r\n    Map&lt;String, String&gt; dbFieldToPojoFieldMap = new HashMap&lt;String, String&gt;();\r\n    for (String prop : properties) {\r\n        String[] names = classMetadata.getPropertyColumnNames(prop);\r\n        dbFieldToPojoFieldMap.put(names[0], prop);\r\n    }\r\n    \t\t\t\r\n    DatabaseMetaData meta = con.getMetaData();\r\n    ResultSet rsColumns = meta.getColumns(null, null, tableName, null);\r\n    \t\t\t\r\n    while (rsColumns.next()) {\r\n        Map&lt;String, String&gt; columnMetaData = new HashMap&lt;String, String&gt;();\r\n        String columnName = rsColumns.getString(Constants.COLUMN_NAME);\r\n        String columnType = rsColumns.getString(Constants.TYPE_NAME);\r\n        String columnSize = rsColumns.getString(Constants.COLUMN_SIZE);\r\n        String decimalDigits = rsColumns.getString(Constants.DECIMAL_DIGITS);\r\n    }","title":"Tinyint returning as BIT in DatabaseMetaData JAVA","body":"<p>MySql tinyint is returning as BIT in java and column size is returning as null. For other data types, it is working fine. Any Solution for this?</p>\n\n<pre><code>Class clsObj = Class.forName(className);\nAbstractEntityPersister classMetadata = (AbstractEntityPersister) getSessionFactory().getClassMetadata(clsObj);\nString[] properties = classMetadata.getPropertyNames();\nString tableName = classMetadata.getTableName();\n\nMap&lt;String, String&gt; dbFieldToPojoFieldMap = new HashMap&lt;String, String&gt;();\nfor (String prop : properties) {\n    String[] names = classMetadata.getPropertyColumnNames(prop);\n    dbFieldToPojoFieldMap.put(names[0], prop);\n}\n\nDatabaseMetaData meta = con.getMetaData();\nResultSet rsColumns = meta.getColumns(null, null, tableName, null);\n\nwhile (rsColumns.next()) {\n    Map&lt;String, String&gt; columnMetaData = new HashMap&lt;String, String&gt;();\n    String columnName = rsColumns.getString(Constants.COLUMN_NAME);\n    String columnType = rsColumns.getString(Constants.TYPE_NAME);\n    String columnSize = rsColumns.getString(Constants.COLUMN_SIZE);\n    String decimalDigits = rsColumns.getString(Constants.DECIMAL_DIGITS);\n}\n</code></pre>\n"},{"tags":["java","hashtable"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":1,"creation_date":1697575772,"post_id":77312152,"comment_id":136296519,"body_markdown":"A hash table is basically an array where the elements are indexed by things other than integers -- strings in this case.  `wordCountTable.put(&quot;abcde&quot;, 5)` creates a new entry in the table called &quot;abcde&quot;, which has the value 5.  When I say `wordCountTable.get(&quot;abcde&quot;)`, I get back 5.  That&#39;s all there is to it.","body":"A hash table is basically an array where the elements are indexed by things other than integers -- strings in this case.  <code>wordCountTable.put(&quot;abcde&quot;, 5)</code> creates a new entry in the table called &quot;abcde&quot;, which has the value 5.  When I say <code>wordCountTable.get(&quot;abcde&quot;)</code>, I get back 5.  That&#39;s all there is to it."},{"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"score":0,"creation_date":1697576436,"post_id":77312152,"comment_id":136296612,"body_markdown":"I get this point, but what is weird for me here is that I calculate the occurrence number of each word in my file, and the code [ if else ] I don&#39;t get how it works. I have the right result but the logic I didn&#39;t get it.","body":"I get this point, but what is weird for me here is that I calculate the occurrence number of each word in my file, and the code [ if else ] I don&#39;t get how it works. I have the right result but the logic I didn&#39;t get it."},{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1697576916,"post_id":77312152,"comment_id":136296682,"body_markdown":"You get each word, one at a time.  If the word already exists in the table (so `wordCountTable.get` has a number), then we add 1 to the number and update the table.  If the word does not exist in the table (so `wordCountTable.get` returns `null`), then we create a new entry with the value 1.","body":"You get each word, one at a time.  If the word already exists in the table (so <code>wordCountTable.get</code> has a number), then we add 1 to the number and update the table.  If the word does not exist in the table (so <code>wordCountTable.get</code> returns <code>null</code>), then we create a new entry with the value 1."},{"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"score":0,"creation_date":1697577522,"post_id":77312152,"comment_id":136296758,"body_markdown":"what cant understand, can&#39;t find the part of the code that checks the existence of the word.","body":"what cant understand, can&#39;t find the part of the code that checks the existence of the word."},{"owner":{"account_id":2562085,"reputation":4946,"user_id":2223027,"display_name":"pyb"},"score":1,"creation_date":1697577824,"post_id":77312152,"comment_id":136296781,"body_markdown":"@isi the part of the code that checks the existence of the word is what Tim Roberts posted, `Integer count = wordCountTable.get(uniqueWord);`. If the table does not have an entry for the word, it will return `null`.","body":"@isi the part of the code that checks the existence of the word is what Tim Roberts posted, <code>Integer count = wordCountTable.get(uniqueWord);</code>. If the table does not have an entry for the word, it will return <code>null</code>."},{"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"score":0,"creation_date":1697578235,"post_id":77312152,"comment_id":136296832,"body_markdown":"here the entry is the key or I&#39;m wrong?","body":"here the entry is the key or I&#39;m wrong?"},{"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"score":0,"creation_date":1697578262,"post_id":77312152,"comment_id":136296836,"body_markdown":"And how it calcul the occurrence number then ?","body":"And how it calcul the occurrence number then ?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697578560,"post_id":77312152,"comment_id":136296884,"body_markdown":"An entry is the key and its value together. If there is no entry in the map for a given key, then `get` will return `null`. In your code, that means if `count` is `null`, then you have not encountered the current word yet, so you `put` a **new** entry into the map with a value of `1`. Otherwise, if `count` is not `null`, then you _have_ encountered the current word at least once, and you **replace** that entry (via `put`) with a value of `count + 1`.","body":"An entry is the key and its value together. If there is no entry in the map for a given key, then <code>get</code> will return <code>null</code>. In your code, that means if <code>count</code> is <code>null</code>, then you have not encountered the current word yet, so you <code>put</code> a <b>new</b> entry into the map with a value of <code>1</code>. Otherwise, if <code>count</code> is not <code>null</code>, then you <i>have</i> encountered the current word at least once, and you <b>replace</b> that entry (via <code>put</code>) with a value of <code>count + 1</code>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697578716,"post_id":77312152,"comment_id":136296913,"body_markdown":"That if-else may be a little too clever for its own good. An equivalent that may be more understandable to you is: `if (count == null) { wordCountTable.put(uniqueWord, 1); } else { wordCountTable.put(uniqueWord, count + 1); }`.","body":"That if-else may be a little too clever for its own good. An equivalent that may be more understandable to you is: <code>if (count == null) { wordCountTable.put(uniqueWord, 1); } else { wordCountTable.put(uniqueWord, count + 1); }</code>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697578975,"post_id":77312152,"comment_id":136296947,"body_markdown":"As an aside, the `get`, if-else, and `put` could be simplified to `wordCountTable.merge(uniqueWord, 1, Integer::sum)` (see [merge](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)) and read up on functional interfaces/lambda expressions/method references if you want to know more).","body":"As an aside, the <code>get</code>, if-else, and <code>put</code> could be simplified to <code>wordCountTable.merge(uniqueWord, 1, Integer::sum)</code> (see <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">merge</a> and read up on functional interfaces/lambda expressions/method references if you want to know more)."},{"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"score":0,"creation_date":1697579891,"post_id":77312152,"comment_id":136297079,"body_markdown":"yeah it&#39;s clever to compare with if and here count has the value not the key but we need to compare with the key (the word), it&#39;s hard to understand but it works","body":"yeah it&#39;s clever to compare with if and here count has the value not the key but we need to compare with the key (the word), it&#39;s hard to understand but it works"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1697580570,"post_id":77312152,"comment_id":136297162,"body_markdown":"@Slaw I would suggest using `Math::addExact` rather than `Integer::sum` although in this instance the chance of an overflow may be small.","body":"@Slaw I would suggest using <code>Math::addExact</code> rather than <code>Integer::sum</code> although in this instance the chance of an overflow may be small."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697585752,"post_id":77312152,"comment_id":136297573,"body_markdown":"@isi The key is always `uniqueWord`, which changes as lines are read from the file (i.e., as the `while` loop iterates). The map knows which value is mapped with which key and returns the correct value (or `null` if no value currently exists) for each key (i.e., word).","body":"@isi The key is always <code>uniqueWord</code>, which changes as lines are read from the file (i.e., as the <code>while</code> loop iterates). The map knows which value is mapped with which key and returns the correct value (or <code>null</code> if no value currently exists) for each key (i.e., word)."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697585499,"creation_date":1697578723,"answer_id":77312387,"question_id":77312152,"body_markdown":"&gt; _&quot;... how the hashtable works here, any help, please?&quot;_\r\n\r\nTo clarify, there is the _[Hashtable](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Hashtable.html)_ class, and the _[HashMap](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html)_ class.\\\r\nThe _HashMap_ class is newer, being from the _[Collections Framework](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/package-summary.html)_.\r\n\r\nHere is a summary of the code.\r\n\r\nGet the current _value_ of _key_, _uniqueWord_.\r\n\r\n```java\r\ncount = wordCountTable.get(uniqueWord)\r\n```\r\n\r\nIf the _value_ is _null_, the _key_ does not exist in the map.\\\r\nThus, increment by _1_, or start at _1_.\r\n\r\n```java\r\nif(count != null) {\r\n\r\n    count ++; }\r\nelse\r\n    count = 1;  \r\n```\r\n\r\nAdd or replace _key_ _uniqueWord_, with _value_ _count_.\r\n\r\n```java\r\nwordCountTable.put(uniqueWord, count)\r\n```\r\n\r\nAdditionally, this code can be simplified with with the _[merge](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction))_ method.\r\n\r\n```java\r\nMap&lt;String, Integer&gt; m = new TreeMap&lt;&gt;();\r\ntry (BufferedReader r = new BufferedReader(new FileReader(&quot;&quot;))) {\r\n    String w;\r\n    while ((w = r.readLine()) != null) m.merge(w, 1, Integer::sum);\r\n}\r\n```","title":"Java hashtable occurence number","body":"<blockquote>\n<p><em>&quot;... how the hashtable works here, any help, please?&quot;</em></p>\n</blockquote>\n<p>To clarify, there is the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Hashtable.html\" rel=\"nofollow noreferrer\">Hashtable</a></em> class, and the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a></em> class.<br />\nThe <em>HashMap</em> class is newer, being from the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/package-summary.html\" rel=\"nofollow noreferrer\">Collections Framework</a></em>.</p>\n<p>Here is a summary of the code.</p>\n<p>Get the current <em>value</em> of <em>key</em>, <em>uniqueWord</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>count = wordCountTable.get(uniqueWord)\n</code></pre>\n<p>If the <em>value</em> is <em>null</em>, the <em>key</em> does not exist in the map.<br />\nThus, increment by <em>1</em>, or start at <em>1</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(count != null) {\n\n    count ++; }\nelse\n    count = 1;  \n</code></pre>\n<p>Add or replace <em>key</em> <em>uniqueWord</em>, with <em>value</em> <em>count</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>wordCountTable.put(uniqueWord, count)\n</code></pre>\n<p>Additionally, this code can be simplified with with the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">merge</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Integer&gt; m = new TreeMap&lt;&gt;();\ntry (BufferedReader r = new BufferedReader(new FileReader(&quot;&quot;))) {\n    String w;\n    while ((w = r.readLine()) != null) m.merge(w, 1, Integer::sum);\n}\n</code></pre>\n"}],"owner":{"account_id":18422377,"reputation":21,"user_id":13419672,"display_name":"isi"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697585499,"creation_date":1697575390,"question_id":77312152,"body_markdown":"Hello, please I have a problem understanding the Hash table.\r\nI just read that it is a table with key and value.\r\nHere I will calculate the occurrence number of each word in the file.\r\nIt works but I didn&#39;t understand the logic behind it and how the hashtable works here, any help, please?\r\n\r\n\r\n             String st;   \r\n\t    \t HashMap&lt;String, Integer&gt; wordCountTable = new HashMap&lt;String, Integer&gt;();\r\n\t    \t try {\r\n\t\t\t\twhile ((st = br.readLine()) != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tString uniqueWord = st.toLowerCase();\r\n\t\t\t\t\t//System.out.println(uniqueWord);\r\n\t\t\t\t\tInteger count = wordCountTable.get(uniqueWord);\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(count != null) {\r\n\r\n\t\t\t\t\t\t\tcount ++; }\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcount = 1;\t\r\n\t\t\t\t\t\twordCountTable.put(uniqueWord, count);","title":"Java hashtable occurence number","body":"<p>Hello, please I have a problem understanding the Hash table.\nI just read that it is a table with key and value.\nHere I will calculate the occurrence number of each word in the file.\nIt works but I didn't understand the logic behind it and how the hashtable works here, any help, please?</p>\n<pre><code>         String st;   \n         HashMap&lt;String, Integer&gt; wordCountTable = new HashMap&lt;String, Integer&gt;();\n         try {\n            while ((st = br.readLine()) != null)\n            {\n                String uniqueWord = st.toLowerCase();\n                //System.out.println(uniqueWord);\n                Integer count = wordCountTable.get(uniqueWord);\n\n                {\n                    if(count != null) {\n\n                        count ++; }\n                    else\n                        count = 1;  \n                    wordCountTable.put(uniqueWord, count);\n</code></pre>\n"},{"tags":["java","android","credential-manager","passkey"],"owner":{"account_id":1044474,"reputation":115,"user_id":1049769,"accept_rate":83,"display_name":"user1049769"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697582511,"creation_date":1697582511,"question_id":77312619,"body_markdown":"I&#39;m trying to implement authentication using the Credential Manager API on Android. While setting up the CreatePublicKeyCredentialRequest, I&#39;m encountering an error: Unexpected exception type androidx.credentials.exceptions.CreateCredentialNoCreateOptionException.\r\n\r\nHere&#39;s the sanitized JSON I&#39;m sending:\r\n\r\n```\r\n{\r\n  &quot;rp&quot;: {\r\n    &quot;name&quot;: &quot;[AppName]&quot;,\r\n    &quot;id&quot;: &quot;[AppDomain]&quot;\r\n  },\r\n  &quot;authenticatorSelection&quot;: {\r\n    &quot;authenticatorAttachment&quot;: &quot;platform&quot;,\r\n    &quot;requireResidentKey&quot;: true,\r\n    &quot;residentKey&quot;: &quot;required&quot;,\r\n    &quot;userVerification&quot;: &quot;required&quot;\r\n  },\r\n  &quot;user&quot;: {\r\n    &quot;name&quot;: &quot;[UserEmail]&quot;,\r\n    &quot;displayName&quot;: null,\r\n    &quot;id&quot;: &quot;[UserId]&quot;\r\n  },\r\n  &quot;pubKeyCredParams&quot;: [\r\n    {\r\n      &quot;type&quot;: &quot;public-key&quot;,\r\n      &quot;alg&quot;: -7\r\n    },\r\n    {\r\n      &quot;type&quot;: &quot;public-key&quot;,\r\n      &quot;alg&quot;: -257\r\n    }\r\n  ],\r\n  &quot;timeout&quot;: 60000,\r\n  &quot;attestation&quot;: &quot;none&quot;,\r\n  &quot;excludeCredentials&quot;: [],\r\n  &quot;challenge&quot;: &quot;[ChallengeCode]&quot;\r\n}\r\n```\r\n\r\nFor reference, I&#39;ve been following the example provided in the [Google Developer docs ](https://developer.android.com/training/sign-in/passkeys#registration-flows)and made sure the parameters match.\r\n\r\nDespite following the guidelines and ensuring the JSON structure is accurate, the error persists. Any insights on what might be causing this and how to resolve it would be appreciated.","title":"CreateCredentialResponse error with Credential Manager API on Android with Passkeys","body":"<p>I'm trying to implement authentication using the Credential Manager API on Android. While setting up the CreatePublicKeyCredentialRequest, I'm encountering an error: Unexpected exception type androidx.credentials.exceptions.CreateCredentialNoCreateOptionException.</p>\n<p>Here's the sanitized JSON I'm sending:</p>\n<pre><code>{\n  &quot;rp&quot;: {\n    &quot;name&quot;: &quot;[AppName]&quot;,\n    &quot;id&quot;: &quot;[AppDomain]&quot;\n  },\n  &quot;authenticatorSelection&quot;: {\n    &quot;authenticatorAttachment&quot;: &quot;platform&quot;,\n    &quot;requireResidentKey&quot;: true,\n    &quot;residentKey&quot;: &quot;required&quot;,\n    &quot;userVerification&quot;: &quot;required&quot;\n  },\n  &quot;user&quot;: {\n    &quot;name&quot;: &quot;[UserEmail]&quot;,\n    &quot;displayName&quot;: null,\n    &quot;id&quot;: &quot;[UserId]&quot;\n  },\n  &quot;pubKeyCredParams&quot;: [\n    {\n      &quot;type&quot;: &quot;public-key&quot;,\n      &quot;alg&quot;: -7\n    },\n    {\n      &quot;type&quot;: &quot;public-key&quot;,\n      &quot;alg&quot;: -257\n    }\n  ],\n  &quot;timeout&quot;: 60000,\n  &quot;attestation&quot;: &quot;none&quot;,\n  &quot;excludeCredentials&quot;: [],\n  &quot;challenge&quot;: &quot;[ChallengeCode]&quot;\n}\n</code></pre>\n<p>For reference, I've been following the example provided in the <a href=\"https://developer.android.com/training/sign-in/passkeys#registration-flows\" rel=\"nofollow noreferrer\">Google Developer docs </a>and made sure the parameters match.</p>\n<p>Despite following the guidelines and ensuring the JSON structure is accurate, the error persists. Any insights on what might be causing this and how to resolve it would be appreciated.</p>\n"},{"tags":["java","datetimeformatter","datetimeparseexception"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1697581504,"post_id":77312534,"comment_id":136297246,"body_markdown":"What is your system&#39;s locale? With other words, what does `Locale.getDefault()` return?","body":"What is your system&#39;s locale? With other words, what does <code>Locale.getDefault()</code> return?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1697582110,"post_id":77312534,"comment_id":136297297,"body_markdown":"**Specify** English. `private static final DateTimeFormatter DATE_FORMATTER = DateTimeFormatter.ofPattern (&quot;dd-MMM-yyyy&quot;, Locale.ENGLISH);`","body":"<b>Specify</b> English. <code>private static final DateTimeFormatter DATE_FORMATTER = DateTimeFormatter.ofPattern (&quot;dd-MMM-yyyy&quot;, Locale.ENGLISH);</code>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1697582235,"post_id":77312534,"comment_id":136297310,"body_markdown":"Your input doesn&#39;t contain a time value, so using `LocalDateTime` is probably not a good place to start, I&#39;d consider `LocalDate` instead, but as stated, this is likely a localisation issue","body":"Your input doesn&#39;t contain a time value, so using <code>LocalDateTime</code> is probably not a good place to start, I&#39;d consider <code>LocalDate</code> instead, but as stated, this is likely a localisation issue"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697582457,"post_id":77312534,"comment_id":136297322,"body_markdown":"Definitely granted, this one isn’t easy to search for no matter that others have had the same problem before.","body":"Definitely granted, this one isn’t easy to search for no matter that others have had the same problem before."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697582787,"post_id":77312534,"comment_id":136297344,"body_markdown":"A useful trick when parsing fails: Try formatting the expected date-time using the same formatter, `LocalDateTime.of(2018, 8, 1, 0, 0, 0) .format(DATE_FORMATTER)`. Now you should see the month coming out in a different language and/or with a small `a` instead of the capital `A`, which might lead you in the right direction.","body":"A useful trick when parsing fails: Try formatting the expected date-time using the same formatter, <code>LocalDateTime.of(2018, 8, 1, 0, 0, 0) .format(DATE_FORMATTER)</code>. Now you should see the month coming out in a different language and/or with a small <code>a</code> instead of the capital <code>A</code>, which might lead you in the right direction."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697582895,"post_id":77312534,"comment_id":136297357,"body_markdown":"You probably don’t want a `LocalDateTime` at all. `LocalDate` should do fine. If I am wrong, you may get a `LocalDateTime` from `LocalDate.parse (raw, DATE_FORMATTER).atStartOfDay()` (after you have specified the right locale).","body":"You probably don’t want a <code>LocalDateTime</code> at all. <code>LocalDate</code> should do fine. If I am wrong, you may get a <code>LocalDateTime</code> from <code>LocalDate.parse (raw, DATE_FORMATTER).atStartOfDay()</code> (after you have specified the right locale)."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697659908,"post_id":77312534,"comment_id":136309321,"body_markdown":"At [Java Playground](https://dev.java/playground/), paste: `import java.time.* ;\nimport java.time.format.* ;\n\nLocalDate ld = \n  LocalDate.parse(\n      &quot;1-Aug-2018&quot; , \n      DateTimeFormatter\n      \t.ofPattern( &quot;d-MMM-uuuu&quot; )\n  \t\t.withLocale( Locale.US )\n  );\nSystem.out.println( ld ) ;`","body":"At <a href=\"https://dev.java/playground/\" rel=\"nofollow noreferrer\">Java Playground</a>, paste: <code>import java.time.* ; import java.time.format.* ;  LocalDate ld =    LocalDate.parse(       &quot;1-Aug-2018&quot; ,        DateTimeFormatter       \t.ofPattern( &quot;d-MMM-uuuu&quot; )   \t\t.withLocale( Locale.US )   ); System.out.println( ld ) ;</code>"}],"owner":{"account_id":1352943,"reputation":615,"user_id":1291968,"display_name":"Terrible Tadpole"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1697582206,"answer_count":0,"score":0,"last_activity_date":1697582262,"creation_date":1697581017,"question_id":77312534,"body_markdown":"I need to process data in the form of a Tab-delimited file with dates in the form dd-MMM-yyyy, for example 1-Aug-2018 or 15-Sep-2023.  My code is:\r\n\r\n    \tprivate static final DateTimeFormatter DATE_FORMATTER = DateTimeFormatter.ofPattern (&quot;d-MMM-uuuu&quot;);\r\n\tprivate LocalDateTime toDate (String raw) {\r\n\t\t   LocalDateTime date = LocalDateTime.parse (raw, DATE_FORMATTER);\r\n\t\treturn date;\r\n\t}\r\n\r\nMy exception is:\r\n&gt; Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;1-Aug-2018&#39; could not be parsed at index 2\r\n\r\nResearch done:\r\n\r\n - Careful reading of Oracle Java documentation\r\n - Tried `dd` instead of `d` but that just moved the index to 0 instead of 2\r\n - Tried `yyyy` instead of `uuuu` (out of desperation, the problem clearly isn&#39;t there)\r\n - An hour trawling the Internet but the few examples of my pattern *with* DateTimeFormatter (instead of SimpleDate, doesn&#39;t anybody ever clean up the old garbage on the Internet?!) are using it to format output rather than parsing input.\r\n - Another hour trawling StackOverflow, which is even worse than the general Internet for obsolete solutions (although the answers are way more professional), but all the answers seem to involve different patterns to mine and I can&#39;t see any differences in the code\r\n\r\nAny suggestions?  Or directions to relevant answers?","title":"DateTimeParseException: Text &#39;1-Aug-2018&#39; could not be parsed at index 2","body":"<p>I need to process data in the form of a Tab-delimited file with dates in the form dd-MMM-yyyy, for example 1-Aug-2018 or 15-Sep-2023.  My code is:</p>\n<pre><code>    private static final DateTimeFormatter DATE_FORMATTER = DateTimeFormatter.ofPattern (&quot;d-MMM-uuuu&quot;);\nprivate LocalDateTime toDate (String raw) {\n       LocalDateTime date = LocalDateTime.parse (raw, DATE_FORMATTER);\n    return date;\n}\n</code></pre>\n<p>My exception is:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '1-Aug-2018' could not be parsed at index 2</p>\n</blockquote>\n<p>Research done:</p>\n<ul>\n<li>Careful reading of Oracle Java documentation</li>\n<li>Tried <code>dd</code> instead of <code>d</code> but that just moved the index to 0 instead of 2</li>\n<li>Tried <code>yyyy</code> instead of <code>uuuu</code> (out of desperation, the problem clearly isn't there)</li>\n<li>An hour trawling the Internet but the few examples of my pattern <em>with</em> DateTimeFormatter (instead of SimpleDate, doesn't anybody ever clean up the old garbage on the Internet?!) are using it to format output rather than parsing input.</li>\n<li>Another hour trawling StackOverflow, which is even worse than the general Internet for obsolete solutions (although the answers are way more professional), but all the answers seem to involve different patterns to mine and I can't see any differences in the code</li>\n</ul>\n<p>Any suggestions?  Or directions to relevant answers?</p>\n"},{"tags":["java","spring","websocket","push-notification","stomp"],"answers":[{"tags":[],"owner":{"account_id":21222460,"reputation":326,"user_id":15608713,"display_name":"i_m_js"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697581926,"creation_date":1697581926,"answer_id":77312585,"question_id":75557113,"body_markdown":"Currently in the sample which you have posted, there is no logic which sends message to `/all/messages` path automatically, so nothing is printed in console after websocket connection gets established. try sending some message to this path, or simply update your code with the following snippet to send one dummy message which in-turn posts message to `/all/message` path.\r\n\r\n    stompClient.connect({}, function () {\r\n\t\t\tstompClient.subscribe(&#39;/all/messages&#39;, function (output) {\r\n\t\t\t\tconsole.log(output.body);\r\n\t\t\t});\r\n\t\t\tstompClient.send(&quot;/app/message&quot;, {}, JSON.stringify({message: &#39;hello&#39;}));\r\n\t\t}, function (err) {\r\n\t\t\talert(&#39;error&#39; + err);\r\n\t\t});","title":"STOMP notification in spring not returning message in console","body":"<p>Currently in the sample which you have posted, there is no logic which sends message to <code>/all/messages</code> path automatically, so nothing is printed in console after websocket connection gets established. try sending some message to this path, or simply update your code with the following snippet to send one dummy message which in-turn posts message to <code>/all/message</code> path.</p>\n<pre><code>stompClient.connect({}, function () {\n        stompClient.subscribe('/all/messages', function (output) {\n            console.log(output.body);\n        });\n        stompClient.send(&quot;/app/message&quot;, {}, JSON.stringify({message: 'hello'}));\n    }, function (err) {\n        alert('error' + err);\n    });\n</code></pre>\n"}],"owner":{"account_id":13493299,"reputation":1,"user_id":20323067,"display_name":"Mustn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697581926,"creation_date":1677245126,"question_id":75557113,"body_markdown":"So I have been trying to write simple notification for my application and have the following problem. I was able to connect the websocket but it should also write the message in the console which it does not. I just started to learn websockets and notification 2 days ago, so I don&#39;t really understand how I should write correctly\r\n\r\nMy config:\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.enableSimpleBroker(&quot;/all&quot;,&quot;/specific&quot;);\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\r\n    }\r\n}\r\n```\r\ncontroller:\r\n```\r\n@RestController\r\npublic class MessageController {\r\n\r\n    @Autowired\r\n    private MessageService messageService;\r\n\r\n    @MessageMapping(&quot;/message&quot;)\r\n//    @SendTo(&quot;/all/messages&quot;)\r\n    public ResponseEntity&lt;MessageResponse&gt; sendMessageToAll(@RequestBody MessageRequest request) {\r\n        return ResponseEntity.ok(messageService.sendMessageToAll(request.getMessage()));\r\n    }\r\n\r\n    @MessageMapping(&quot;/message-user&quot;)\r\n    public ResponseEntity&lt;MessageResponse&gt; sendMessageToUser(@RequestBody MessageRequest request) {\r\n        return ResponseEntity.ok(messageService.sendMessageToUser(request.getUser(), request.getMessage()));\r\n    }\r\n}\r\n```\r\nrequest:\r\n```\r\n@Getter\r\npublic class MessageRequest {\r\n    String message = &quot;mess&quot;;\r\n    User user;\r\n}\r\n```\r\n\r\nresponse:\r\n```\r\npublic class MessageResponse{\r\n        String message;\r\n}\r\n```\r\n\r\nmessage model:\r\n```\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Message {\r\n\r\n    private String message = &quot;mess&quot;;\r\n    private String recipient;\r\n    private boolean isRead;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Message{&quot; +\r\n                &quot;message=&#39;&quot; + message + &#39;\\&#39;&#39; +\r\n                &quot;, recipient=&#39;&quot; + recipient + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\nservice and its implementation:\r\n```\r\npublic interface MessageService {\r\n    MessageResponse sendMessageToUser(User user, String message);\r\n    MessageResponse sendMessageToAll(String message);\r\n}\r\n```\r\n```\r\n@Service\r\npublic class MessageServiceImpl implements MessageService {\r\n\r\n    @Autowired\r\n    private SimpMessagingTemplate messagingTemplate;\r\n\r\n    @Override\r\n    public MessageResponse sendMessageToAll(String message) {\r\n        messagingTemplate.convertAndSend(&quot;/all/messages&quot;, &quot;meessaaaa&quot;);\r\n        return new MessageResponse();\r\n    }\r\n\r\n    @Override\r\n    public MessageResponse sendMessageToUser(User user, String message) {\r\n        messagingTemplate.convertAndSendToUser(user.getUsername(), &quot;/specific&quot;, message);\r\n        return new MessageResponse();\r\n    }\r\n}\r\n```\r\n\r\nJust in case it will be needed, here is the test html with which I am checking my code:\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n  &lt;title&gt;STOMP&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h1&gt;STOMP test&lt;/h1&gt;\r\n&lt;script crossorigin=&quot;anonymous&quot;\r\n        integrity=&quot;sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=&quot;\r\n        src=&quot;https://code.jquery.com/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script crossorigin=&quot;anonymous&quot;\r\n        integrity=&quot;sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g==&quot;\r\n        src=&quot;https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n\r\n  let url = (&#39;ws://localhost:8080/ws/websocket&#39;)\r\n  console.log(url)\r\n  stompClient = Stomp.client(url)\r\n\r\n  stompClient.connect({\r\n  }, function () {\r\n    stompClient.subscribe(&#39;/all/messages&#39;, function (output) {\r\n      console.log(JSON.parse(output.body))\r\n    });\r\n  }, function (err) {\r\n    alert(&#39;error&#39; + err);\r\n  });\r\n&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nCan anybody solve it?","title":"STOMP notification in spring not returning message in console","body":"<p>So I have been trying to write simple notification for my application and have the following problem. I was able to connect the websocket but it should also write the message in the console which it does not. I just started to learn websockets and notification 2 days ago, so I don't really understand how I should write correctly</p>\n<p>My config:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/all&quot;,&quot;/specific&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\n    }\n}\n</code></pre>\n<p>controller:</p>\n<pre><code>@RestController\npublic class MessageController {\n\n    @Autowired\n    private MessageService messageService;\n\n    @MessageMapping(&quot;/message&quot;)\n//    @SendTo(&quot;/all/messages&quot;)\n    public ResponseEntity&lt;MessageResponse&gt; sendMessageToAll(@RequestBody MessageRequest request) {\n        return ResponseEntity.ok(messageService.sendMessageToAll(request.getMessage()));\n    }\n\n    @MessageMapping(&quot;/message-user&quot;)\n    public ResponseEntity&lt;MessageResponse&gt; sendMessageToUser(@RequestBody MessageRequest request) {\n        return ResponseEntity.ok(messageService.sendMessageToUser(request.getUser(), request.getMessage()));\n    }\n}\n</code></pre>\n<p>request:</p>\n<pre><code>@Getter\npublic class MessageRequest {\n    String message = &quot;mess&quot;;\n    User user;\n}\n</code></pre>\n<p>response:</p>\n<pre><code>public class MessageResponse{\n        String message;\n}\n</code></pre>\n<p>message model:</p>\n<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Message {\n\n    private String message = &quot;mess&quot;;\n    private String recipient;\n    private boolean isRead;\n\n    @ManyToOne\n    private User user;\n\n    @Override\n    public String toString() {\n        return &quot;Message{&quot; +\n                &quot;message='&quot; + message + '\\'' +\n                &quot;, recipient='&quot; + recipient + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p>service and its implementation:</p>\n<pre><code>public interface MessageService {\n    MessageResponse sendMessageToUser(User user, String message);\n    MessageResponse sendMessageToAll(String message);\n}\n</code></pre>\n<pre><code>@Service\npublic class MessageServiceImpl implements MessageService {\n\n    @Autowired\n    private SimpMessagingTemplate messagingTemplate;\n\n    @Override\n    public MessageResponse sendMessageToAll(String message) {\n        messagingTemplate.convertAndSend(&quot;/all/messages&quot;, &quot;meessaaaa&quot;);\n        return new MessageResponse();\n    }\n\n    @Override\n    public MessageResponse sendMessageToUser(User user, String message) {\n        messagingTemplate.convertAndSendToUser(user.getUsername(), &quot;/specific&quot;, message);\n        return new MessageResponse();\n    }\n}\n</code></pre>\n<p>Just in case it will be needed, here is the test html with which I am checking my code:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\n  &lt;title&gt;STOMP&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;STOMP test&lt;/h1&gt;\n&lt;script crossorigin=&quot;anonymous&quot;\n        integrity=&quot;sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=&quot;\n        src=&quot;https://code.jquery.com/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;\n&lt;script crossorigin=&quot;anonymous&quot;\n        integrity=&quot;sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g==&quot;\n        src=&quot;https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\n\n  let url = ('ws://localhost:8080/ws/websocket')\n  console.log(url)\n  stompClient = Stomp.client(url)\n\n  stompClient.connect({\n  }, function () {\n    stompClient.subscribe('/all/messages', function (output) {\n      console.log(JSON.parse(output.body))\n    });\n  }, function (err) {\n    alert('error' + err);\n  });\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Can anybody solve it?</p>\n"},{"tags":["java","spring-boot","microservices","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697610454,"post_id":77311235,"comment_id":136299776,"body_markdown":"Your aspect is flawed to start with, it will fail to log correctly in a multi threaded environment. If you want to log additional information put that in the MDC (through a servlet filter, to extract the IP address for instance) then use a regular logging facility (apparently ou want to trace logging) like the one shipped with Spring, the `CustomizableTraceInterceptor`. Combine that with additional information in the MDC and you can do anything you like.","body":"Your aspect is flawed to start with, it will fail to log correctly in a multi threaded environment. If you want to log additional information put that in the MDC (through a servlet filter, to extract the IP address for instance) then use a regular logging facility (apparently ou want to trace logging) like the one shipped with Spring, the <code>CustomizableTraceInterceptor</code>. Combine that with additional information in the MDC and you can do anything you like."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1697640052,"post_id":77311235,"comment_id":136305747,"body_markdown":"MDC is a good solution, but not necessary, if the OP - assuming he wants to stick to his AOP solution - simply uses a thread-local field for the IP address. That way, the aspect is less tightly coupled to SLF4J and can more easily be refactored, if the logging framework is to be switched for any reason. But of course, you are right about Spring offering tools that do not need to be rebuilt by aspects.","body":"MDC is a good solution, but not necessary, if the OP - assuming he wants to stick to his AOP solution - simply uses a thread-local field for the IP address. That way, the aspect is less tightly coupled to SLF4J and can more easily be refactored, if the logging framework is to be switched for any reason. But of course, you are right about Spring offering tools that do not need to be rebuilt by aspects."},{"owner":{"account_id":29694214,"reputation":1,"user_id":22757901,"display_name":"Oskuda"},"score":0,"creation_date":1697778399,"post_id":77311235,"comment_id":136324933,"body_markdown":"@M.Deinum To keep the question simple I had stripped the unnecessary part of the code. MDC seems promising, will give it a look. Thank you for the help.","body":"@M.Deinum To keep the question simple I had stripped the unnecessary part of the code. MDC seems promising, will give it a look. Thank you for the help."}],"owner":{"account_id":29694214,"reputation":1,"user_id":22757901,"display_name":"Oskuda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697581714,"creation_date":1697565320,"question_id":77311235,"body_markdown":"I have multiple microservices and have establish AOP logging to log my controller, service, and repository layers. Currently, the same AppAspect class is redundant over all my microservice. Is there a way to centralize this?\r\n\r\nA thought : have the AOP class as jar, upload it to some repository (or even AWS S3) and have my microservices depend on those. \r\n\r\nWhy? : Whenever I want to make a small change on my AOP logs, I have to do it repeatadely accross all microservice.\r\n\r\nAny leads would help. Following is my AOP AppAspect class\r\n\r\n```\r\n@Aspect\r\n@Component\r\n@Slf4j\r\npublic class AppAspect {\r\n    private String ipAddress = &quot;[NO-IP]&quot;;\r\n\r\n    @Before(&quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;)\r\n    public void logBeforeMethodExecution(JoinPoint joinPoint) {\r\n        try {\r\n            // get ip address\r\n            ServletRequestAttributes requestAttributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n            if (requestAttributes != null) {\r\n                HttpServletRequest request = requestAttributes.getRequest();\r\n                ipAddress = request.getRemoteAddr();\r\n            }\r\n            // get method name\r\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\r\n            log.info(&quot;[{}] Started method execution {}&quot;, ipAddress, methodName);\r\n        } catch (Exception e) {\r\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\r\n        }\r\n    }\r\n\r\n    @AfterReturning(&quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;)\r\n    public void logAfterMethodExecution(JoinPoint joinPoint) {\r\n        try {\r\n            // get method name\r\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\r\n            log.info(&quot;[{}] Completed method execution {}&quot;, ipAddress, methodName);\r\n        } catch (Exception e) {\r\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\r\n        }\r\n    }\r\n\r\n    @AfterThrowing(value = &quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\r\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;, throwing = &quot;exception&quot;)\r\n    public void logAfterMethodExecutionThrows(JoinPoint joinPoint, Exception exception) {\r\n        try {\r\n            // get method name\r\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\r\n            log.info(&quot;[{}] Exception thrown by method execution {} {}&quot;, ipAddress, methodName, exception.getMessage());\r\n        } catch (Exception e) {\r\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried to look for references or resources but didn&#39;t find much lead. Is this even possible?","title":"Centralize the AOP logging for my microservices","body":"<p>I have multiple microservices and have establish AOP logging to log my controller, service, and repository layers. Currently, the same AppAspect class is redundant over all my microservice. Is there a way to centralize this?</p>\n<p>A thought : have the AOP class as jar, upload it to some repository (or even AWS S3) and have my microservices depend on those.</p>\n<p>Why? : Whenever I want to make a small change on my AOP logs, I have to do it repeatadely accross all microservice.</p>\n<p>Any leads would help. Following is my AOP AppAspect class</p>\n<pre><code>@Aspect\n@Component\n@Slf4j\npublic class AppAspect {\n    private String ipAddress = &quot;[NO-IP]&quot;;\n\n    @Before(&quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;)\n    public void logBeforeMethodExecution(JoinPoint joinPoint) {\n        try {\n            // get ip address\n            ServletRequestAttributes requestAttributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n            if (requestAttributes != null) {\n                HttpServletRequest request = requestAttributes.getRequest();\n                ipAddress = request.getRemoteAddr();\n            }\n            // get method name\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\n            log.info(&quot;[{}] Started method execution {}&quot;, ipAddress, methodName);\n        } catch (Exception e) {\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\n        }\n    }\n\n    @AfterReturning(&quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;)\n    public void logAfterMethodExecution(JoinPoint joinPoint) {\n        try {\n            // get method name\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\n            log.info(&quot;[{}] Completed method execution {}&quot;, ipAddress, methodName);\n        } catch (Exception e) {\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\n        }\n    }\n\n    @AfterThrowing(value = &quot;execution(* np.com.oskarshrestha.bookstorebackend.controller..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.service..*(..)) &quot; +\n            &quot;|| execution(* np.com.oskarshrestha.bookstorebackend.repository..*(..))&quot;, throwing = &quot;exception&quot;)\n    public void logAfterMethodExecutionThrows(JoinPoint joinPoint, Exception exception) {\n        try {\n            // get method name\n            String methodName = joinPoint.getSignature().getDeclaringType().getPackage().getName() + &quot;.&quot; + joinPoint.getSignature().getName();\n            log.info(&quot;[{}] Exception thrown by method execution {} {}&quot;, ipAddress, methodName, exception.getMessage());\n        } catch (Exception e) {\n            log.error(&quot;{} Error in AppAspect {}&quot;, ipAddress, e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>I tried to look for references or resources but didn't find much lead. Is this even possible?</p>\n"},{"tags":["java","spring","timezone","zoneddatetime"],"comments":[{"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1697454912,"post_id":77301466,"comment_id":136277825,"body_markdown":"Firstly, America/New_York isn&#39;t currently observing EST anyway - it&#39;s observing EDT. But more importantly, your question suggests you believe a `java.util.Date` value &quot;has&quot; a time zone. It doesn&#39;t. See https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/","body":"Firstly, America/New_York isn&#39;t currently observing EST anyway - it&#39;s observing EDT. But more importantly, your question suggests you believe a <code>java.util.Date</code> value &quot;has&quot; a time zone. It doesn&#39;t. See <a href=\"https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date</a>"},{"owner":{"account_id":21741957,"reputation":1,"user_id":16049187,"display_name":"HARI KRISHNA"},"score":0,"creation_date":1697455308,"post_id":77301466,"comment_id":136277896,"body_markdown":"So we cannot convert ZonedDateTime to Date? It was working for a while but now it is troubleshooting me. So instead of changing the date return type to zonedDate time is there anyway to convert ZonedDateTime to date correctly","body":"So we cannot convert ZonedDateTime to Date? It was working for a while but now it is troubleshooting me. So instead of changing the date return type to zonedDate time is there anyway to convert ZonedDateTime to date correctly"},{"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1697456682,"post_id":77301466,"comment_id":136278144,"body_markdown":"&quot;So we cannot convert ZonedDateTime to Date&quot; - you absolutely can, but `Date` *only* represents an instant in time, with a precision of milliseconds. If you expect it to do more than that, you&#39;ll be disappointed. (Fundamentally, I&#39;d try to avoid using Date entirely..)","body":"&quot;So we cannot convert ZonedDateTime to Date&quot; - you absolutely can, but <code>Date</code> <i>only</i> represents an instant in time, with a precision of milliseconds. If you expect it to do more than that, you&#39;ll be disappointed. (Fundamentally, I&#39;d try to avoid using Date entirely..)"},{"owner":{"account_id":21741957,"reputation":1,"user_id":16049187,"display_name":"HARI KRISHNA"},"score":0,"creation_date":1697456821,"post_id":77301466,"comment_id":136278162,"body_markdown":"Can you help me with a code snippet which works well for my scenario if possible","body":"Can you help me with a code snippet which works well for my scenario if possible"},{"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1697457172,"post_id":77301466,"comment_id":136278224,"body_markdown":"No, because we don&#39;t know what you&#39;re trying to do. If you&#39;re trying to get &quot;a Date that represents an instant in a specific time zone&quot; then that&#39;s just not going to happen. (It doesn&#39;t help that you&#39;ve said &quot;it is throwing Instant class errors&quot; without giving any more detail...)","body":"No, because we don&#39;t know what you&#39;re trying to do. If you&#39;re trying to get &quot;a Date that represents an instant in a specific time zone&quot; then that&#39;s just not going to happen. (It doesn&#39;t help that you&#39;ve said &quot;it is throwing Instant class errors&quot; without giving any more detail...)"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697457660,"post_id":77301466,"comment_id":136278329,"body_markdown":"*Can you help me with a code snippet which works well for my scenario if possible* Just leave out any use of `Date` entirely as Jon already suggested. That class was poorly designed, is long outdated and never could do what you want to do. A `Date` never could have a time zone. It’s its `toString` method telling a lie when it prints one. Read @JonSkeet’s link.","body":"<i>Can you help me with a code snippet which works well for my scenario if possible</i> Just leave out any use of <code>Date</code> entirely as Jon already suggested. That class was poorly designed, is long outdated and never could do what you want to do. A <code>Date</code> never could have a time zone. It’s its <code>toString</code> method telling a lie when it prints one. Read @JonSkeet’s link."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697457848,"post_id":77301466,"comment_id":136278360,"body_markdown":"`ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;)).format(DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT))`. Just yielded `Mon Oct 16 08:03:39 EDT 2023`.","body":"<code>ZonedDateTime.now(ZoneId.of(&quot;America&#47;New_York&quot;)).format(Date&zwnj;&#8203;TimeFormatter.ofPatt&zwnj;&#8203;ern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT))</code>. Just yielded <code>Mon Oct 16 08:03:39 EDT 2023</code>."},{"owner":{"account_id":21741957,"reputation":1,"user_id":16049187,"display_name":"HARI KRISHNA"},"score":0,"creation_date":1697457910,"post_id":77301466,"comment_id":136278372,"body_markdown":"I want to convert the local time to EST/ EDt time zones. And i want to do using Date because it&#39;s my database type for that field","body":"I want to convert the local time to EST/ EDt time zones. And i want to do using Date because it&#39;s my database type for that field"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1697458054,"post_id":77301466,"comment_id":136278384,"body_markdown":"Using JDBC? And which data type in SQL? You don’t need to take the trouble with `Date` for that. Since JDBC 4.2 you can directly store java.time types through JDBC. Hibernate can do the same at least since Hibernate 5. *i want to do using Date* I am sorry, I read that as *I want trouble*.","body":"Using JDBC? And which data type in SQL? You don’t need to take the trouble with <code>Date</code> for that. Since JDBC 4.2 you can directly store java.time types through JDBC. Hibernate can do the same at least since Hibernate 5. <i>i want to do using Date</i> I am sorry, I read that as <i>I want trouble</i>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697458365,"post_id":77301466,"comment_id":136278441,"body_markdown":"This is a [XY problem](https://en.wikipedia.org/wiki/XY_problem). You want to store US Eastern time into your database. Fine. Then ask about that. I am sure we can help.","body":"This is a <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>. You want to store US Eastern time into your database. Fine. Then ask about that. I am sure we can help."},{"owner":{"account_id":21741957,"reputation":1,"user_id":16049187,"display_name":"HARI KRISHNA"},"score":0,"creation_date":1697463778,"post_id":77301466,"comment_id":136279533,"body_markdown":"Sorry for the miscommunication but we need to use date for legacy purpose so i need one date object that can represent the current time as in EST","body":"Sorry for the miscommunication but we need to use date for legacy purpose so i need one date object that can represent the current time as in EST"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697474876,"post_id":77301466,"comment_id":136281654,"body_markdown":"*we need to use date for legacy purpose so i need one date object that can represent the current time as in EST* Sorry if I wasn&#39;t clear: If you mean `java.util.Date`, this cannot exist. You are asking the impossible.","body":"<i>we need to use date for legacy purpose so i need one date object that can represent the current time as in EST</i> Sorry if I wasn&#39;t clear: If you mean <code>java.util.Date</code>, this cannot exist. You are asking the impossible."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697481615,"creation_date":1697469283,"answer_id":77303131,"question_id":77301466,"body_markdown":"## Use real time zone\r\n\r\n&gt;`ZoneId estZone = ZoneId.of(&quot;America/New_York&quot;);`\r\n\r\nEST is not [a real time zone][1]. Use such pseudo-zones only for presentation to the user, not for logic or data. Pseudo-zones are not standardized, and are not even unique(!). \r\n\r\nAnd the time zones usually associated with “Eastern” time are currently observing [Daylight Saving Time (DST)][2]. So the pseudo-zone label would be `EDT` rather than `EST`. \r\n\r\nSo, let’s use this:\r\n\r\n    ZoneId zoneNewYork = ZoneId.of( &quot;America/New_York&quot; ) ;\r\n\r\n## Use *java.time* classes\r\n\r\n&gt;`ZonedDateTime zdtNewYork = ZonedDateTime.now( zoneNewYork );`\r\n\r\nGood. You captured the current moment as seen with the wall-clock time &amp; calendar used by the people of the New York region. \r\n\r\nTo generate text in standard [ISO 8601][3] format wisely extended to append the name of the time zone in brackets, merely call [`toString`][4]. \r\n\r\n    String output = zdtNewYork.toString() ;\r\n\r\nTo generate localized text, use `DateTimeFormatter.ofLocalizedDateTime`. \r\n\r\n## Avoid legacy date-time classes\r\n\r\n&gt;`Date.from(estTime.toInstant())`\r\n\r\nBad. You needlessly involved the terribly flawed legacy class `java.util.Date`. \r\n\r\nAvoid the legacy date-time classes. Use only *java.time* classes. \r\n\r\nAs for the behavior you encountered, the `Date#toString` method lies to us. While generating its text, the method dynamically applies the JVM’s current default time zone. One of many reasons to avoid this class. \r\n\r\n\r\n## JDBC\r\n\r\nYou commented on storing this moment in a database. \r\n\r\nYour table column should be of a type akin to the [SQL standard][5] type `TIMESTAMP WITH TIME ZONE`. \r\n\r\nThe [JDBC][6] standard maps the Java class [`OffsetDateTime`][7] to that type. \r\n\r\n    OffsetDateTime odt = zdtNewYork.toOffsetDateTime() ;\r\n    myPreparedStatement.setObject( … , odt ) ;\r\n\r\nRetrieval.\r\n\r\n    OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\r\n    ZonedDateTime zdtNewYork = odt.atZoneSameInstant( zoneNewYork ) ;\r\n\r\nSearch to learn more. This has been covered many times on Stack Overflow. \r\n\r\n\r\n## Using legacy classes\r\n\r\nYou commented:\r\n\r\n&gt; we need to use date for legacy purpose so I need one date object that can represent the current time as in EST\r\n\r\nThe [`java.util.Date`][8] class represents a moment as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC. So asking for a `java.util.Date` object to represent a moment as seen in a time zone like `America/New_York` is impossible.\r\n\r\nThe replacement for `java.util.Date` is [`java.time.Instant`][9]. Both represent a moment as seen in UTC (an offset of zero). You can convert back and forth via new methods added to the old classes.\r\n\r\n    Instant instant = Instant.now() ;\r\n    java.util.Date d = java.util.Date.from( instant ) ;\r\n\r\nAnd going the other direction:\r\n\r\n    Instant instant = d.toInstant() ;\r\n\r\nWhen converting, be mindful of possible data loss. The legacy class resolves to milliseconds while the modern class has a much finer resolution of [nanoseconds][10]. \r\n\r\nThe [`java.util.Calendar`][11] class, or rather its subclass [`java.util.GregorianCalendar`][12], can represent a moment as seen in a particular time zone. If need be, you can convert back and forth to/from its replacement class, [`java.time.ZonedDateTime`][13]. \r\n\r\nAvoid these legacy classes wherever possible. They are a bloody mess of poor design and wacky features.\r\n\r\nIf you have a specific case where you need to interoperate with old code not yet updated to *java.time*, post a Question on Stack Overflow with those specific details.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n  [2]: https://en.wikipedia.org/wiki/Daylight_saving_time\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html#toString()\r\n  [5]: https://en.wikipedia.org/wiki/SQL#Standardization_history\r\n  [6]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Date.html\r\n  [9]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\r\n  [10]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [11]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Calendar.html\r\n  [12]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/GregorianCalendar.html\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html","title":"Zoned date time is not giving est time","body":"<h2>Use real time zone</h2>\n<blockquote>\n<p><code>ZoneId estZone = ZoneId.of(&quot;America/New_York&quot;);</code></p>\n</blockquote>\n<p>EST is not <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">a real time zone</a>. Use such pseudo-zones only for presentation to the user, not for logic or data. Pseudo-zones are not standardized, and are not even unique(!).</p>\n<p>And the time zones usually associated with “Eastern” time are currently observing <a href=\"https://en.wikipedia.org/wiki/Daylight_saving_time\" rel=\"nofollow noreferrer\">Daylight Saving Time (DST)</a>. So the pseudo-zone label would be <code>EDT</code> rather than <code>EST</code>.</p>\n<p>So, let’s use this:</p>\n<pre><code>ZoneId zoneNewYork = ZoneId.of( &quot;America/New_York&quot; ) ;\n</code></pre>\n<h2>Use <em>java.time</em> classes</h2>\n<blockquote>\n<p><code>ZonedDateTime zdtNewYork = ZonedDateTime.now( zoneNewYork );</code></p>\n</blockquote>\n<p>Good. You captured the current moment as seen with the wall-clock time &amp; calendar used by the people of the New York region.</p>\n<p>To generate text in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format wisely extended to append the name of the time zone in brackets, merely call <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html#toString()\" rel=\"nofollow noreferrer\"><code>toString</code></a>.</p>\n<pre><code>String output = zdtNewYork.toString() ;\n</code></pre>\n<p>To generate localized text, use <code>DateTimeFormatter.ofLocalizedDateTime</code>.</p>\n<h2>Avoid legacy date-time classes</h2>\n<blockquote>\n<p><code>Date.from(estTime.toInstant())</code></p>\n</blockquote>\n<p>Bad. You needlessly involved the terribly flawed legacy class <code>java.util.Date</code>.</p>\n<p>Avoid the legacy date-time classes. Use only <em>java.time</em> classes.</p>\n<p>As for the behavior you encountered, the <code>Date#toString</code> method lies to us. While generating its text, the method dynamically applies the JVM’s current default time zone. One of many reasons to avoid this class.</p>\n<h2>JDBC</h2>\n<p>You commented on storing this moment in a database.</p>\n<p>Your table column should be of a type akin to the <a href=\"https://en.wikipedia.org/wiki/SQL#Standardization_history\" rel=\"nofollow noreferrer\">SQL standard</a> type <code>TIMESTAMP WITH TIME ZONE</code>.</p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> standard maps the Java class <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> to that type.</p>\n<pre><code>OffsetDateTime odt = zdtNewYork.toOffsetDateTime() ;\nmyPreparedStatement.setObject( … , odt ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre><code>OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\nZonedDateTime zdtNewYork = odt.atZoneSameInstant( zoneNewYork ) ;\n</code></pre>\n<p>Search to learn more. This has been covered many times on Stack Overflow.</p>\n<h2>Using legacy classes</h2>\n<p>You commented:</p>\n<blockquote>\n<p>we need to use date for legacy purpose so I need one date object that can represent the current time as in EST</p>\n</blockquote>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a> class represents a moment as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC. So asking for a <code>java.util.Date</code> object to represent a moment as seen in a time zone like <code>America/New_York</code> is impossible.</p>\n<p>The replacement for <code>java.util.Date</code> is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a>. Both represent a moment as seen in UTC (an offset of zero). You can convert back and forth via new methods added to the old classes.</p>\n<pre><code>Instant instant = Instant.now() ;\njava.util.Date d = java.util.Date.from( instant ) ;\n</code></pre>\n<p>And going the other direction:</p>\n<pre><code>Instant instant = d.toInstant() ;\n</code></pre>\n<p>When converting, be mindful of possible data loss. The legacy class resolves to milliseconds while the modern class has a much finer resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a>.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>java.util.Calendar</code></a> class, or rather its subclass <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/GregorianCalendar.html\" rel=\"nofollow noreferrer\"><code>java.util.GregorianCalendar</code></a>, can represent a moment as seen in a particular time zone. If need be, you can convert back and forth to/from its replacement class, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>java.time.ZonedDateTime</code></a>.</p>\n<p>Avoid these legacy classes wherever possible. They are a bloody mess of poor design and wacky features.</p>\n<p>If you have a specific case where you need to interoperate with old code not yet updated to <em>java.time</em>, post a Question on Stack Overflow with those specific details.</p>\n"}],"owner":{"account_id":21741957,"reputation":1,"user_id":16049187,"display_name":"HARI KRISHNA"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1697579768,"answer_count":1,"score":-1,"last_activity_date":1697580182,"creation_date":1697454540,"question_id":77301466,"body_markdown":"I want to convert the date and time to EST zone and I tried using calendar for some reason it is not converting the time even though it is setting the timezone correctly. And I am trying zonedDateTime and it is also working same.\r\n\r\n    ZoneId estZone = ZoneId.of(&quot;America/New_York&quot;);\r\n    ZonedDateTime estTime =       ZonedDateTime.now(estZone);\r\n     System.out.println(Date.from(estTime.toInstant()));\r\n\r\n\r\n\r\nMy output is:\r\nMon Oct 16 16:17:13 IST 2023.\r\n\r\n\r\nBut i set my zone id to America. And \r\nestTime.toLocalDateTime is giving corrected time in EST but I am not able to convert it into Date return type as it is throwing Instant class errors\r\n\r\n\r\nI need some explanation on this","title":"Zoned date time is not giving est time","body":"<p>I want to convert the date and time to EST zone and I tried using calendar for some reason it is not converting the time even though it is setting the timezone correctly. And I am trying zonedDateTime and it is also working same.</p>\n<pre><code>ZoneId estZone = ZoneId.of(&quot;America/New_York&quot;);\nZonedDateTime estTime =       ZonedDateTime.now(estZone);\n System.out.println(Date.from(estTime.toInstant()));\n</code></pre>\n<p>My output is:\nMon Oct 16 16:17:13 IST 2023.</p>\n<p>But i set my zone id to America. And\nestTime.toLocalDateTime is giving corrected time in EST but I am not able to convert it into Date return type as it is throwing Instant class errors</p>\n<p>I need some explanation on this</p>\n"},{"tags":["java","ajax"],"owner":{"account_id":8814308,"reputation":41,"user_id":6586299,"display_name":"Nick Bensema"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697579602,"creation_date":1697579602,"question_id":77312454,"body_markdown":"I&#39;m attempting to test a web application where there&#39;s a top-level navigation menu.  Most of the items in it are drop-down menus where you mouse over the item, and a menu appears below the pointer, without the user having to click.  In fact, if the user does click the top-level item, the drop-down menu disappears.\r\n\r\nNaturally, the normal Active Scan can&#39;t click out of the app&#39;s front page, and even the AJAX Spider can&#39;t find the items.  Here&#39;s how I imagine it plays out: \r\n* Ajax Spider&#39;s mouse goes over item in navigation bar, which is a `&lt;li&gt;` tag containing a `&lt;a href data-toggle=&quot;dropdown&quot;&gt;` tag.\r\n* menu becomes visible a `&lt;ul&gt;` tag right after the `&lt;a&gt;` tag, and the inspector shows `::after` after that tag\r\n* Ajax Spider clicks menu item to see if it triggers an HTTP request\r\n* menu becomes invisible; `::after` disappears.  A `class=&quot;open&quot;` attribute appears on the outer `&lt;li&gt;` tag but it has no effect.\r\n* Ajax looks for new links and doesn&#39;t find any\r\n\r\nso... I think what I need to do is to tell it to hover on `&lt;a data-toggle=&quot;dropdown&quot;&gt;` links and then look for `&lt;a role=&quot;menuitem&quot;&gt;` tags to click nearby.  Is there any feature that can do anything like that?\r\n\r\nthanks.  in the meantime I suppose I can use the browser to click through all the menu items; that seems to make scans aware of it.  but I&#39;d rather the process didn&#39;t depend on my thoroughness as a clicker of functions.","title":"OWASP ZAP: When testing a modern web application with HTML5 drop-down menus, can AJAX Spider mouse-over to open a menu without clicking?","body":"<p>I'm attempting to test a web application where there's a top-level navigation menu.  Most of the items in it are drop-down menus where you mouse over the item, and a menu appears below the pointer, without the user having to click.  In fact, if the user does click the top-level item, the drop-down menu disappears.</p>\n<p>Naturally, the normal Active Scan can't click out of the app's front page, and even the AJAX Spider can't find the items.  Here's how I imagine it plays out:</p>\n<ul>\n<li>Ajax Spider's mouse goes over item in navigation bar, which is a <code>&lt;li&gt;</code> tag containing a <code>&lt;a href data-toggle=&quot;dropdown&quot;&gt;</code> tag.</li>\n<li>menu becomes visible a <code>&lt;ul&gt;</code> tag right after the <code>&lt;a&gt;</code> tag, and the inspector shows <code>::after</code> after that tag</li>\n<li>Ajax Spider clicks menu item to see if it triggers an HTTP request</li>\n<li>menu becomes invisible; <code>::after</code> disappears.  A <code>class=&quot;open&quot;</code> attribute appears on the outer <code>&lt;li&gt;</code> tag but it has no effect.</li>\n<li>Ajax looks for new links and doesn't find any</li>\n</ul>\n<p>so... I think what I need to do is to tell it to hover on <code>&lt;a data-toggle=&quot;dropdown&quot;&gt;</code> links and then look for <code>&lt;a role=&quot;menuitem&quot;&gt;</code> tags to click nearby.  Is there any feature that can do anything like that?</p>\n<p>thanks.  in the meantime I suppose I can use the browser to click through all the menu items; that seems to make scans aware of it.  but I'd rather the process didn't depend on my thoroughness as a clicker of functions.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":3,"creation_date":1697577194,"post_id":77312204,"comment_id":136296719,"body_markdown":"At what location?","body":"At what location?"},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":3,"creation_date":1697577757,"post_id":77312204,"comment_id":136296774,"body_markdown":"Zip / Jar files store the modification time and date of each entry.  As @DavidConrad asked, where in the file is the difference?  A stream would likely store as the current time and date.","body":"Zip / Jar files store the modification time and date of each entry.  As @DavidConrad asked, where in the file is the difference?  A stream would likely store as the current time and date."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1697578628,"post_id":77312204,"comment_id":136296899,"body_markdown":"It is probably the date and time. See the [ZIP file format](https://en.wikipedia.org/wiki/ZIP_(file_format)). Incidentally, you don&#39;t need all those flush and close calls. You should just use a try-with-resources statement.","body":"It is probably the date and time. See the <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)\" rel=\"nofollow noreferrer\">ZIP file format</a>. Incidentally, you don&#39;t need all those flush and close calls. You should just use a try-with-resources statement."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1697578721,"post_id":77312204,"comment_id":136296915,"body_markdown":"E.g. `try (JarOutputStream jos = new JarOutputStream(new FileOutputStream(&quot;jarry.jar&quot;), new Manifest())) {}`","body":"E.g. <code>try (JarOutputStream jos = new JarOutputStream(new FileOutputStream(&quot;jarry.jar&quot;), new Manifest())) {}</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697582600,"post_id":77312204,"comment_id":136297336,"body_markdown":"Unrelated:  Don’t use a ByteArrayOutputStream.  Just write directly to a JarOutputStream that wraps a file-based OutputStream.  Storing the entire jar contents in memory is wasteful and pointless, and will scale poorly (meaning, very slow) in cases where you have a lot of archive content.","body":"Unrelated:  Don’t use a ByteArrayOutputStream.  Just write directly to a JarOutputStream that wraps a file-based OutputStream.  Storing the entire jar contents in memory is wasteful and pointless, and will scale poorly (meaning, very slow) in cases where you have a lot of archive content."},{"owner":{"account_id":4421715,"reputation":1485,"user_id":3601445,"accept_rate":37,"display_name":"Unhandled Exception"},"score":0,"creation_date":1697631070,"post_id":77312204,"comment_id":136303627,"body_markdown":"Thanks for all the replies. With this scaled down version of the test, the first image above is from the very beginning of the 2 files. 50 is the first byte in both files within the first image.   I just notice, the 2nd location is actually about 1/2 way through the file and has the same sequence of bytes.","body":"Thanks for all the replies. With this scaled down version of the test, the first image above is from the very beginning of the 2 files. 50 is the first byte in both files within the first image.   I just notice, the 2nd location is actually about 1/2 way through the file and has the same sequence of bytes."},{"owner":{"account_id":4421715,"reputation":1485,"user_id":3601445,"accept_rate":37,"display_name":"Unhandled Exception"},"score":0,"creation_date":1697631324,"post_id":77312204,"comment_id":136303681,"body_markdown":"Is it possible to turn off inclusion of a timestamp?","body":"Is it possible to turn off inclusion of a timestamp?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697579561,"creation_date":1697579224,"answer_id":77312426,"question_id":77312204,"body_markdown":"It&#39;s because the local time is in there. Which is hard to see with `unzip` and `jar` tools. But is the reason.\r\n\r\njars are just zip files. Lets break it down. I ran your code (had to fix a few things), and this is the bytestream I ended up with:\r\n\r\n```\r\n504B0304 14000808 080008B9 51570000 00000000 00000000 00001400 04004D45\r\n54412D49 4E462F4D 414E4946 4553542E 4D46FECA 0000E3E5 0200504B 0708AC85\r\nA2140400 00000200 0000504B 01021400 14000808 0800[08/12]B9 5157AC85 A2140400\r\n00000200 00001400 04000000 00000000 00000000 00000000 4D455441 2D494E46\r\n2F4D414E 49464553 542E4D46 FECA0000 504B0506 00000000 01000100 46000000\r\n4A000000 0000\r\n```\r\n\r\nWhere `[08/12]` means: it was 0x08 in one of em and 0x12 in the other; they are otherwise identical.\r\n\r\nStep by step, but first:\r\n\r\nZIP files are read back-to-front; The very end of them contains the so-called &#39;Central directory&#39; which lists every file in the ZIP and where you can find it. The reason it works this way is because file systems tend to allow you to grow an existing file &#39;at the end&#39; without having to rewrite the entire file. Hence, if you have a 4GB zip file and you want to add a tiny little file to it, e.g. with `zip u`, then it&#39;s &#39;cheap&#39;: the zip tool can just write that tiny little file (compressed) over the existing central directory structure and then write a new central directory structure, leaving the first 3.99GB unmodified.\r\n\r\nHowever, `jar` doesn&#39;t do any voodoo trickery, so it&#39;s simple: It&#39;s a sequence of compressed file entries, one after the other, followed by the Central Directory.\r\n\r\n&gt; `504B0403`\r\n\r\nThis is the PKZip identifier; it&#39;s PK with 2 more bytes. This is just at the start of every &#39;file entry&#39; in a ZIP. This zip has only one entry (the manifest, which is just a file in the zip in a particular place and at the beginning of the file). All zip files start with this.\r\n\r\n&gt; `1400`\r\n\r\nThe version of the zip format (version 20). Like the previous thing, pretty much a constant. ZIP is little endian, hence, &#39;1400&#39; is 20. (the first byte is the least significant, and 14 in hexadecimal is 20 in decimal).\r\n\r\n&gt; `0808`\r\n\r\nThe flags. Specifically, that&#39;s:\r\n\r\n* encrypted: No\r\n* compression option: 0\r\n* Data descriptor: yes\r\n* enhanced deflation: No\r\n* compressed patched data: No\r\n* strong encryption: No\r\n* language encoding: yes\r\n* mask header values: no\r\n\r\n&gt; `0800`\r\n\r\nZIP is actually a container format. Technically it&#39;s like `tar` - it describes how to shove many files in a single file. Each individual entry does its own compression and the ZIP format just has a whole bunch of algorithms available. In practice, an ISO-standard zip only supports 2 compression algorithms: &#39;deflate&#39; (8) and &#39;no compression&#39; (0). This entry is compressed using the Deflate algorithm (8 - Remember, ZIP is little endian).\r\n\r\n&gt; `08B9`\r\n\r\nThe file this block is representing was last modified on 23:08.\r\n\r\n__WE FOUND THE PROBLEM HERE__.\r\n\r\nRemember, ZIP is like `tar` - a container format that is designed to represent a whole boatload of files as a single file. As a format it is meant to represent as much as it can. ZIP is kinda bad at it (for example, on posix systems files have an owner and a group), but it at least got this right. Well, half right, literally: Files have last modified timestamp and ZIP can dutifully store this, so that when unzipping, the &#39;last modified&#39; is (mostly) unchanged. In ZIPs defense, this is how MS-DOS worked. To ZIPs detriment, that certainly wasn&#39;t the only platform out there at the time it was devised.\r\n\r\nIn bits, &#39;undoing&#39; the little endian-ness: 1011 1001 0000 1000\r\n\r\nThe first 5 bits (but, read right to left) are seconds (divided by 2 - so this is a number between 0 and 31. Multiply it by 2, that&#39;s the seconds. Presumably, 30 and 31 won&#39;t ever occur. ZIP files cannot represent a file&#39;s last-modified-time if it is odd, and will mangle it, by rounding it, i.e. shifting it by 1 seconds. That&#39;s what I meant by &#39;half right&#39; and &#39;mostly&#39;). The next 6 are the minute, and the final 5 are the hour.\r\n\r\nBreaking it down: 01000 is 8, multiply by 2: Evidently it was 16 seconds into the minute when I ran the code. 001000 is 8, so it was the 8th minute. 10111 is 23 - it was 23:08:16 when I ran this. And I can confirm that (it indeed was that time), but also:\r\n\r\n```\r\n&gt; jar tvf outputJar1.jar\r\n10-17-2023 23:08   META-INF/MANIFEST.MF\r\n```\r\n\r\nAh. __We see the second problem here__. Probably because of the craziness of the &#39;only even seconds&#39; business, the jar tool &#39;helpfully&#39; does not actually _show_ the seconds and just calls it a day after showing 23:08. However, those seconds (well, divided by 2) __are__ in the ZIP file, and explain why that byte is different.\r\n\r\nFor completeness sake:\r\n\r\n&gt; `5157`\r\n\r\nIn bits, &#39;undoing&#39; the little endian-ness: 0101 0111 0101 0001\r\n\r\nand that&#39;d be the date. reading back to front (MS-DOS format was weird): 5 bits for the day, 4 for the month, 7 for the year (add 1980 to it): 10001 is 17 (today is the 17th), 1010 is 10 (today is October), 0101011 is 43. Add 1980, makes 2023. Checks out.\r\n\r\n&gt; `0000 0000`\r\n\r\nThat&#39;s 4 bytes of CRC-32 (this is encoding the META-INF dir, so it&#39;s all zeroes)\r\n\r\n&gt; `0000 0000`\r\n\r\nThis is encoding the size of the compressed data. Which is zero, because, directory.\r\n\r\n&gt; `0000 0000`\r\n\r\nThis is encoding the size of the uncompressed data. Which is zero, because, directory.\r\n\r\n&gt; `1400`\r\n\r\nThe length of the file name. Which is 20.\r\n\r\n&gt; `0400`\r\n\r\nThe length of the &#39;extra field&#39; which is a ZIP kludge to encode things like owner and group, and is just key/value pairs with no particular definition.\r\n\r\n&gt; `4D45 54412D49 4E462F4D 414E4946 4553542E 4D46`\r\n\r\nThat&#39;s 20 bytes (because the &#39;length of the file name&#39; field was 20 bytes). It&#39;s ASCII for `META-INF/MANIFEST.MF`.\r\n\r\n&gt; `FECA 0000`\r\n\r\nExtra field of type FECA That&#39;s &#39;CAFE&#39; in little endian. It&#39;s java adding an extra field. This field means simply &#39;java made this&#39;, and has no value (hence, `0000` - 0 bytes follow). There are no furtehr extra fields (no posix user/group, no full time stamp, no crypto block, and so forth).\r\n\r\n&gt; `E3E5 0200`\r\n\r\nI have no idea. Possibly the encoding used for representing the file name.\r\n\r\n&gt; `504B0304`\r\n\r\nIt repeats - this is encoding another file block. It&#39;s _again_ META-INF/MANIFEST.MF. This time with actual data. A bit wonky but it&#39;s because you&#39;re streaming the data, and these blocks require that you write the size and checksum _before_ the data. Which is no problem if its a file (you can cheaply overwrite bytes in a file), but cannot be done if its a stream (streams don&#39;t have a &#39;go back and write over something from before). Hence why bit 3 is set in the flags and why we see repeat entries, though I admit I don&#39;t quite get how this works.\r\n\r\n\r\n\r\nBut, point is - it&#39;s the local time thing, that explains why you see a difference.\r\n","title":"Java : Building a Jar file and notice a few bytes are off","body":"<p>It's because the local time is in there. Which is hard to see with <code>unzip</code> and <code>jar</code> tools. But is the reason.</p>\n<p>jars are just zip files. Lets break it down. I ran your code (had to fix a few things), and this is the bytestream I ended up with:</p>\n<pre><code>504B0304 14000808 080008B9 51570000 00000000 00000000 00001400 04004D45\n54412D49 4E462F4D 414E4946 4553542E 4D46FECA 0000E3E5 0200504B 0708AC85\nA2140400 00000200 0000504B 01021400 14000808 0800[08/12]B9 5157AC85 A2140400\n00000200 00001400 04000000 00000000 00000000 00000000 4D455441 2D494E46\n2F4D414E 49464553 542E4D46 FECA0000 504B0506 00000000 01000100 46000000\n4A000000 0000\n</code></pre>\n<p>Where <code>[08/12]</code> means: it was 0x08 in one of em and 0x12 in the other; they are otherwise identical.</p>\n<p>Step by step, but first:</p>\n<p>ZIP files are read back-to-front; The very end of them contains the so-called 'Central directory' which lists every file in the ZIP and where you can find it. The reason it works this way is because file systems tend to allow you to grow an existing file 'at the end' without having to rewrite the entire file. Hence, if you have a 4GB zip file and you want to add a tiny little file to it, e.g. with <code>zip u</code>, then it's 'cheap': the zip tool can just write that tiny little file (compressed) over the existing central directory structure and then write a new central directory structure, leaving the first 3.99GB unmodified.</p>\n<p>However, <code>jar</code> doesn't do any voodoo trickery, so it's simple: It's a sequence of compressed file entries, one after the other, followed by the Central Directory.</p>\n<blockquote>\n<p><code>504B0403</code></p>\n</blockquote>\n<p>This is the PKZip identifier; it's PK with 2 more bytes. This is just at the start of every 'file entry' in a ZIP. This zip has only one entry (the manifest, which is just a file in the zip in a particular place and at the beginning of the file). All zip files start with this.</p>\n<blockquote>\n<p><code>1400</code></p>\n</blockquote>\n<p>The version of the zip format (version 20). Like the previous thing, pretty much a constant. ZIP is little endian, hence, '1400' is 20. (the first byte is the least significant, and 14 in hexadecimal is 20 in decimal).</p>\n<blockquote>\n<p><code>0808</code></p>\n</blockquote>\n<p>The flags. Specifically, that's:</p>\n<ul>\n<li>encrypted: No</li>\n<li>compression option: 0</li>\n<li>Data descriptor: yes</li>\n<li>enhanced deflation: No</li>\n<li>compressed patched data: No</li>\n<li>strong encryption: No</li>\n<li>language encoding: yes</li>\n<li>mask header values: no</li>\n</ul>\n<blockquote>\n<p><code>0800</code></p>\n</blockquote>\n<p>ZIP is actually a container format. Technically it's like <code>tar</code> - it describes how to shove many files in a single file. Each individual entry does its own compression and the ZIP format just has a whole bunch of algorithms available. In practice, an ISO-standard zip only supports 2 compression algorithms: 'deflate' (8) and 'no compression' (0). This entry is compressed using the Deflate algorithm (8 - Remember, ZIP is little endian).</p>\n<blockquote>\n<p><code>08B9</code></p>\n</blockquote>\n<p>The file this block is representing was last modified on 23:08.</p>\n<p><strong>WE FOUND THE PROBLEM HERE</strong>.</p>\n<p>Remember, ZIP is like <code>tar</code> - a container format that is designed to represent a whole boatload of files as a single file. As a format it is meant to represent as much as it can. ZIP is kinda bad at it (for example, on posix systems files have an owner and a group), but it at least got this right. Well, half right, literally: Files have last modified timestamp and ZIP can dutifully store this, so that when unzipping, the 'last modified' is (mostly) unchanged. In ZIPs defense, this is how MS-DOS worked. To ZIPs detriment, that certainly wasn't the only platform out there at the time it was devised.</p>\n<p>In bits, 'undoing' the little endian-ness: 1011 1001 0000 1000</p>\n<p>The first 5 bits (but, read right to left) are seconds (divided by 2 - so this is a number between 0 and 31. Multiply it by 2, that's the seconds. Presumably, 30 and 31 won't ever occur. ZIP files cannot represent a file's last-modified-time if it is odd, and will mangle it, by rounding it, i.e. shifting it by 1 seconds. That's what I meant by 'half right' and 'mostly'). The next 6 are the minute, and the final 5 are the hour.</p>\n<p>Breaking it down: 01000 is 8, multiply by 2: Evidently it was 16 seconds into the minute when I ran the code. 001000 is 8, so it was the 8th minute. 10111 is 23 - it was 23:08:16 when I ran this. And I can confirm that (it indeed was that time), but also:</p>\n<pre><code>&gt; jar tvf outputJar1.jar\n10-17-2023 23:08   META-INF/MANIFEST.MF\n</code></pre>\n<p>Ah. <strong>We see the second problem here</strong>. Probably because of the craziness of the 'only even seconds' business, the jar tool 'helpfully' does not actually <em>show</em> the seconds and just calls it a day after showing 23:08. However, those seconds (well, divided by 2) <strong>are</strong> in the ZIP file, and explain why that byte is different.</p>\n<p>For completeness sake:</p>\n<blockquote>\n<p><code>5157</code></p>\n</blockquote>\n<p>In bits, 'undoing' the little endian-ness: 0101 0111 0101 0001</p>\n<p>and that'd be the date. reading back to front (MS-DOS format was weird): 5 bits for the day, 4 for the month, 7 for the year (add 1980 to it): 10001 is 17 (today is the 17th), 1010 is 10 (today is October), 0101011 is 43. Add 1980, makes 2023. Checks out.</p>\n<blockquote>\n<p><code>0000 0000</code></p>\n</blockquote>\n<p>That's 4 bytes of CRC-32 (this is encoding the META-INF dir, so it's all zeroes)</p>\n<blockquote>\n<p><code>0000 0000</code></p>\n</blockquote>\n<p>This is encoding the size of the compressed data. Which is zero, because, directory.</p>\n<blockquote>\n<p><code>0000 0000</code></p>\n</blockquote>\n<p>This is encoding the size of the uncompressed data. Which is zero, because, directory.</p>\n<blockquote>\n<p><code>1400</code></p>\n</blockquote>\n<p>The length of the file name. Which is 20.</p>\n<blockquote>\n<p><code>0400</code></p>\n</blockquote>\n<p>The length of the 'extra field' which is a ZIP kludge to encode things like owner and group, and is just key/value pairs with no particular definition.</p>\n<blockquote>\n<p><code>4D45 54412D49 4E462F4D 414E4946 4553542E 4D46</code></p>\n</blockquote>\n<p>That's 20 bytes (because the 'length of the file name' field was 20 bytes). It's ASCII for <code>META-INF/MANIFEST.MF</code>.</p>\n<blockquote>\n<p><code>FECA 0000</code></p>\n</blockquote>\n<p>Extra field of type FECA That's 'CAFE' in little endian. It's java adding an extra field. This field means simply 'java made this', and has no value (hence, <code>0000</code> - 0 bytes follow). There are no furtehr extra fields (no posix user/group, no full time stamp, no crypto block, and so forth).</p>\n<blockquote>\n<p><code>E3E5 0200</code></p>\n</blockquote>\n<p>I have no idea. Possibly the encoding used for representing the file name.</p>\n<blockquote>\n<p><code>504B0304</code></p>\n</blockquote>\n<p>It repeats - this is encoding another file block. It's <em>again</em> META-INF/MANIFEST.MF. This time with actual data. A bit wonky but it's because you're streaming the data, and these blocks require that you write the size and checksum <em>before</em> the data. Which is no problem if its a file (you can cheaply overwrite bytes in a file), but cannot be done if its a stream (streams don't have a 'go back and write over something from before). Hence why bit 3 is set in the flags and why we see repeat entries, though I admit I don't quite get how this works.</p>\n<p>But, point is - it's the local time thing, that explains why you see a difference.</p>\n"}],"owner":{"account_id":4421715,"reputation":1485,"user_id":3601445,"accept_rate":37,"display_name":"Unhandled Exception"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":77312426,"answer_count":1,"score":0,"last_activity_date":1697579561,"creation_date":1697576035,"question_id":77312204,"body_markdown":"Working with code that dynamically builds a JAR file based on existing classes. \r\n\r\nWhen reviewing the HEX information of the file, it was noticed a few bytes were off.\r\n\r\nAble to scale down a sample to simply use the Java API and empty MANIFEST as an example.\r\n\r\n    public MyObject\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n        \tSystem.out.println(&quot;START&quot;);\r\n        \tMyObject myObject = new MyObject();\r\n        \tmyObject.myTest();\r\n        \tSystem.out.println(&quot;END&quot;);\r\n        \treturn;\r\n        \t\r\n        }\r\n    \r\n        protected void myTest() \r\n        {\r\n        \tSystem.out.println(&quot;Inside myTest()&quot;);\r\n        \ttry\r\n        \t{\r\n    \r\n            \tManifest manifest = new Manifest();\r\n            \t\r\n            \tByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n            \tJarOutputStream jarOutputStream;\r\n    \t\t\t\tjarOutputStream = new JarOutputStream(byteArrayOutputStream, manifest);\r\n            \t\r\n            \tbyteArrayOutputStream.flush();\r\n            \tbyteArrayOutputStream.close();\r\n            \tjarOutputStream.flush();\r\n            \tjarOutputStream.close();\r\n    \r\n            \tOutputStream outputStream =  new FileOutputStream(&quot;c:\\\\Downloads\\\\outputJar1.jar&quot;);  \t\r\n            \toutputStream.write(byteArrayOutputStream.toByteArray());\r\n            \t\r\n            \toutputStream.flush();\r\n            \toutputStream.close();\r\n            }\r\n        \r\n        catch (IOException e) {}\r\n        }\r\n        \r\n    }\r\n\r\n\r\nExecuting the above code generates a file outputJar1.jar.\r\n\r\nAfter executing, change the code to be outputJar2.jar\r\n\r\n        \tOutputStream outputStream =  new FileOutputStream(&quot;c:\\\\Downloads\\\\outputJar1.jar&quot;);  \t\r\n        \toutputStream.write(byteArrayOutputStream.toByteArray());\r\n\r\nRun the code again. \r\n\r\nIn theory these 2 files should be the same.\r\n\r\nBut using a utility to compare the 2 files, there are obvious differences. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen comparing 2 files, the differences are always in the same location and the Hex value will always be something different, but still the same within each file. \r\n\r\n\r\nAny idea why the content of these files are always generated differently?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rNPT3.png\r\n  [2]: https://i.stack.imgur.com/nWLYm.png","title":"Java : Building a Jar file and notice a few bytes are off","body":"<p>Working with code that dynamically builds a JAR file based on existing classes.</p>\n<p>When reviewing the HEX information of the file, it was noticed a few bytes were off.</p>\n<p>Able to scale down a sample to simply use the Java API and empty MANIFEST as an example.</p>\n<pre><code>public MyObject\n{\n    public static void main(String[] args)\n    {\n        System.out.println(&quot;START&quot;);\n        MyObject myObject = new MyObject();\n        myObject.myTest();\n        System.out.println(&quot;END&quot;);\n        return;\n        \n    }\n\n    protected void myTest() \n    {\n        System.out.println(&quot;Inside myTest()&quot;);\n        try\n        {\n\n            Manifest manifest = new Manifest();\n            \n            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n            JarOutputStream jarOutputStream;\n                jarOutputStream = new JarOutputStream(byteArrayOutputStream, manifest);\n            \n            byteArrayOutputStream.flush();\n            byteArrayOutputStream.close();\n            jarOutputStream.flush();\n            jarOutputStream.close();\n\n            OutputStream outputStream =  new FileOutputStream(&quot;c:\\\\Downloads\\\\outputJar1.jar&quot;);     \n            outputStream.write(byteArrayOutputStream.toByteArray());\n            \n            outputStream.flush();\n            outputStream.close();\n        }\n    \n    catch (IOException e) {}\n    }\n    \n}\n</code></pre>\n<p>Executing the above code generates a file outputJar1.jar.</p>\n<p>After executing, change the code to be outputJar2.jar</p>\n<pre><code>        OutputStream outputStream =  new FileOutputStream(&quot;c:\\\\Downloads\\\\outputJar1.jar&quot;);     \n        outputStream.write(byteArrayOutputStream.toByteArray());\n</code></pre>\n<p>Run the code again.</p>\n<p>In theory these 2 files should be the same.</p>\n<p>But using a utility to compare the 2 files, there are obvious differences.</p>\n<p><a href=\"https://i.stack.imgur.com/rNPT3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rNPT3.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/nWLYm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nWLYm.png\" alt=\"enter image description here\" /></a></p>\n<p>When comparing 2 files, the differences are always in the same location and the Hex value will always be something different, but still the same within each file.</p>\n<p>Any idea why the content of these files are always generated differently?</p>\n"},{"tags":["java","kubernetes","grpc","grpc-java"],"answers":[{"tags":[],"owner":{"account_id":343770,"reputation":337,"user_id":675693,"display_name":"user675693"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1610561621,"creation_date":1610561621,"answer_id":65707581,"question_id":65701091,"body_markdown":"ManagedChannelBuilder.enableRetry().maxRetryAttempts(10) is not sufficient to make retry happen. The retry needs a service config with RetryPolicy defined. One way is set a default service config with RetryPolicy, please see the retry example in https://github.com/grpc/grpc-java/tree/v1.35.0/examples\r\n\r\nThere&#39;s been some confusion on the javadoc of maxRetryAttempts(), and it&#39;s being clarified in https://github.com/grpc/grpc-java/pull/7803","title":"How to get GRPC&#39;s retry mechanism to work using grpc-java in Kubernetes cluster?","body":"<p>ManagedChannelBuilder.enableRetry().maxRetryAttempts(10) is not sufficient to make retry happen. The retry needs a service config with RetryPolicy defined. One way is set a default service config with RetryPolicy, please see the retry example in <a href=\"https://github.com/grpc/grpc-java/tree/v1.35.0/examples\" rel=\"noreferrer\">https://github.com/grpc/grpc-java/tree/v1.35.0/examples</a></p>\n<p>There's been some confusion on the javadoc of maxRetryAttempts(), and it's being clarified in <a href=\"https://github.com/grpc/grpc-java/pull/7803\" rel=\"noreferrer\">https://github.com/grpc/grpc-java/pull/7803</a></p>\n"},{"tags":[],"owner":{"account_id":14887286,"reputation":141,"user_id":10750090,"display_name":"Daniel Western"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697578635,"creation_date":1610637264,"answer_id":65721652,"question_id":65701091,"body_markdown":"Thanks very much @user675693 ! That worked perfectly :)\r\n\r\nThe wording of `maxRetryAttempts()` is indeed a bit confusing.\r\n\r\nFrom the documentation I can see that:\r\n\r\n&quot;maxAttempts MUST be specified and MUST be a JSON integer value greater than 1. Values greater than 5 are treated as 5 without being considered a validation error.&quot;\r\n\r\nReferring to the maxAttempts in the service config. If we want more than 5 attempts I can set this as maxRetryAttempts(10) for example in my ManagedChannel set up:\r\n\r\n```\r\nreturn NettyChannelBuilder.forAddress(host, port)\r\n        .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\r\n        .defaultServiceConfig(config)\r\n        .enableRetry()\r\n        .maxRetryAttempts(10)\r\n        .usePlaintext().build();\r\n```\r\n\r\nBut for that setting to be used properly I need to set it as 10 in the service config AND the ManagedChannel setup code, otherwise only 5 retries are performed. Its not clear from the Javadoc or the documentation, but thats what seems to happen from my testing.\r\n\r\nAlso, this retry functionality is marked as @ExperimentalApi. How mature is it, is it suitable to be used in production? Is it likely to change drastically?","title":"How to get GRPC&#39;s retry mechanism to work using grpc-java in Kubernetes cluster?","body":"<p>Thanks very much @user675693 ! That worked perfectly :)</p>\n<p>The wording of <code>maxRetryAttempts()</code> is indeed a bit confusing.</p>\n<p>From the documentation I can see that:</p>\n<p>&quot;maxAttempts MUST be specified and MUST be a JSON integer value greater than 1. Values greater than 5 are treated as 5 without being considered a validation error.&quot;</p>\n<p>Referring to the maxAttempts in the service config. If we want more than 5 attempts I can set this as maxRetryAttempts(10) for example in my ManagedChannel set up:</p>\n<pre><code>return NettyChannelBuilder.forAddress(host, port)\n        .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\n        .defaultServiceConfig(config)\n        .enableRetry()\n        .maxRetryAttempts(10)\n        .usePlaintext().build();\n</code></pre>\n<p>But for that setting to be used properly I need to set it as 10 in the service config AND the ManagedChannel setup code, otherwise only 5 retries are performed. Its not clear from the Javadoc or the documentation, but thats what seems to happen from my testing.</p>\n<p>Also, this retry functionality is marked as @ExperimentalApi. How mature is it, is it suitable to be used in production? Is it likely to change drastically?</p>\n"},{"tags":[],"owner":{"account_id":1880239,"reputation":927,"user_id":1700614,"display_name":"z0mb1ek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690504270,"creation_date":1690504270,"answer_id":76784188,"question_id":65701091,"body_markdown":"It&#39;s true it&#39;s not at all obvious how you can configure the client to do retry. Moreover you must set [name.service][1] to make it work. We use kotlin and there is example for it:\r\n\r\n    NettyChannelBuilder\r\n        .forAddress(&quot;localhost&quot;, 7001)\r\n        .usePlaintext()\r\n        .defaultServiceConfig(\r\n            mapOf(\r\n                &quot;methodConfig&quot; to listOf(\r\n                    mapOf(\r\n                        &quot;name&quot; to listOf(mapOf(&quot;service&quot; to &quot;TestService&quot;)),\r\n                        &quot;retryPolicy&quot; to mapOf(\r\n                            &quot;maxAttempts&quot; to &quot;10&quot;,\r\n                            &quot;initialBackoff&quot; to &quot;0.5s&quot;,\r\n                            &quot;maxBackoff&quot; to &quot;10s&quot;,\r\n                            &quot;backoffMultiplier&quot; to 1.2,\r\n                            &quot;retryableStatusCodes&quot; to listOf(&quot;UNAVAILABLE&quot;)\r\n                        )\r\n                    )\r\n                )\r\n            )\r\n        )\r\n        .maxRetryAttempts(10)\r\n        .enableRetry()\r\n        .build()\r\n\r\n\r\n  [1]: https://github.com/grpc/grpc-proto/blob/master/grpc/service_config/service_config.proto#L73","title":"How to get GRPC&#39;s retry mechanism to work using grpc-java in Kubernetes cluster?","body":"<p>It's true it's not at all obvious how you can configure the client to do retry. Moreover you must set <a href=\"https://github.com/grpc/grpc-proto/blob/master/grpc/service_config/service_config.proto#L73\" rel=\"nofollow noreferrer\">name.service</a> to make it work. We use kotlin and there is example for it:</p>\n<pre><code>NettyChannelBuilder\n    .forAddress(&quot;localhost&quot;, 7001)\n    .usePlaintext()\n    .defaultServiceConfig(\n        mapOf(\n            &quot;methodConfig&quot; to listOf(\n                mapOf(\n                    &quot;name&quot; to listOf(mapOf(&quot;service&quot; to &quot;TestService&quot;)),\n                    &quot;retryPolicy&quot; to mapOf(\n                        &quot;maxAttempts&quot; to &quot;10&quot;,\n                        &quot;initialBackoff&quot; to &quot;0.5s&quot;,\n                        &quot;maxBackoff&quot; to &quot;10s&quot;,\n                        &quot;backoffMultiplier&quot; to 1.2,\n                        &quot;retryableStatusCodes&quot; to listOf(&quot;UNAVAILABLE&quot;)\n                    )\n                )\n            )\n        )\n    )\n    .maxRetryAttempts(10)\n    .enableRetry()\n    .build()\n</code></pre>\n"}],"owner":{"account_id":14887286,"reputation":141,"user_id":10750090,"display_name":"Daniel Western"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7551,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1697578635,"creation_date":1610537445,"question_id":65701091,"body_markdown":"I have been attempting to get GRPC&#39;s load balancing working in my Java application deployed to a Kubernetes cluster but I have not been having too much success. There does not seem to be too much documentation around this, but from examples online I can see that I should now be able to use &#39;.defaultLoadBalancingPolicy(&quot;round_robin&quot;)&#39; when setting up the ManagedChannel (in later versions of GRPC Java lib).\r\n\r\nTo be more specific, I am using version 1.34.1 of the GRPC Java libraries. I have created two Spring Boot (v2.3.4) applications, one called grpc-sender and one called grpc-receiver.\r\n\r\ngrpc-sender acts as a GRPC client and defines a (Netty) ManagedChannel as:\r\n\r\n```\r\n@Bean\r\npublic ManagedChannel greetingServiceManagedChannel() {\r\n  String host = &quot;grpc-receiver&quot;;\r\n  int port = 6565;\r\n  return NettyChannelBuilder.forAddress(host, port)\r\n      .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\r\n      .usePlaintext().build();\r\n}\r\n```\r\n\r\nThen grpc-receiver acts as the GRPC server:\r\n\r\n```\r\nServer server = ServerBuilder.forPort(6565)\r\n        .addService(new GreetingServiceImpl()).build();\r\n```\r\n\r\nI am deploying these applications to a Kubernetes cluster (running locally in minikube for the time being), and I have created a Service for the grpc-receiver application as a headless service, so that GRPC load balancing can be achieved.\r\n\r\nTo test failed requests, I do two things:\r\n\r\n - kill one of the grpc-receiver pods during the execution of a test run - e.g. when I have requested grpc-sender to send, say, 5000 requests to grpc-receiver. Grpc-sender does detect that the pod has been killed and does refresh its list of receiver pods, and routes future requests to the new pods. As expected, some of the requests that were in flight during the kill of the pod fail with GRPC Status UNAVAILABLE.\r\n - have some simple logic in grpc-receiver that generates a random number and if that random number is below, say, 0.2, return Grpc Status INTERNAL rather than OK.\r\n\r\nWith both the above, I can get a proportion of the requests during a test run to fail. Now what I am trying to get GRPC&#39;s retry mechanism to work. From reading the sparse documentation I am doing the following:\r\n\r\n```\r\nreturn NettyChannelBuilder.forAddress(host, port)\r\n        .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\r\n        .enableRetry()\r\n        .maxRetryAttempts(10)\r\n        .usePlaintext().build();\r\n```\r\n\r\nHowever this seems to have no effect and I cannot see that failed requests are retried at all.\r\n\r\nI see that this is still marked as an @ExperimentalApi feature, so should it work as expected and has it been implemented?\r\n\r\nIf so, is there something obvious I am missing? Anything else I need to do to get retries working?\r\n\r\nAny documentation that explains how to do this in more detail?\r\n\r\nThanks very much in advance...","title":"How to get GRPC&#39;s retry mechanism to work using grpc-java in Kubernetes cluster?","body":"<p>I have been attempting to get GRPC's load balancing working in my Java application deployed to a Kubernetes cluster but I have not been having too much success. There does not seem to be too much documentation around this, but from examples online I can see that I should now be able to use '.defaultLoadBalancingPolicy(&quot;round_robin&quot;)' when setting up the ManagedChannel (in later versions of GRPC Java lib).</p>\n<p>To be more specific, I am using version 1.34.1 of the GRPC Java libraries. I have created two Spring Boot (v2.3.4) applications, one called grpc-sender and one called grpc-receiver.</p>\n<p>grpc-sender acts as a GRPC client and defines a (Netty) ManagedChannel as:</p>\n<pre><code>@Bean\npublic ManagedChannel greetingServiceManagedChannel() {\n  String host = &quot;grpc-receiver&quot;;\n  int port = 6565;\n  return NettyChannelBuilder.forAddress(host, port)\n      .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\n      .usePlaintext().build();\n}\n</code></pre>\n<p>Then grpc-receiver acts as the GRPC server:</p>\n<pre><code>Server server = ServerBuilder.forPort(6565)\n        .addService(new GreetingServiceImpl()).build();\n</code></pre>\n<p>I am deploying these applications to a Kubernetes cluster (running locally in minikube for the time being), and I have created a Service for the grpc-receiver application as a headless service, so that GRPC load balancing can be achieved.</p>\n<p>To test failed requests, I do two things:</p>\n<ul>\n<li>kill one of the grpc-receiver pods during the execution of a test run - e.g. when I have requested grpc-sender to send, say, 5000 requests to grpc-receiver. Grpc-sender does detect that the pod has been killed and does refresh its list of receiver pods, and routes future requests to the new pods. As expected, some of the requests that were in flight during the kill of the pod fail with GRPC Status UNAVAILABLE.</li>\n<li>have some simple logic in grpc-receiver that generates a random number and if that random number is below, say, 0.2, return Grpc Status INTERNAL rather than OK.</li>\n</ul>\n<p>With both the above, I can get a proportion of the requests during a test run to fail. Now what I am trying to get GRPC's retry mechanism to work. From reading the sparse documentation I am doing the following:</p>\n<pre><code>return NettyChannelBuilder.forAddress(host, port)\n        .defaultLoadBalancingPolicy(&quot;round_robin&quot;)\n        .enableRetry()\n        .maxRetryAttempts(10)\n        .usePlaintext().build();\n</code></pre>\n<p>However this seems to have no effect and I cannot see that failed requests are retried at all.</p>\n<p>I see that this is still marked as an @ExperimentalApi feature, so should it work as expected and has it been implemented?</p>\n<p>If so, is there something obvious I am missing? Anything else I need to do to get retries working?</p>\n<p>Any documentation that explains how to do this in more detail?</p>\n<p>Thanks very much in advance...</p>\n"},{"tags":["java","reflection"],"answers":[{"tags":[],"owner":{"account_id":20268,"reputation":5582,"user_id":48234,"accept_rate":41,"display_name":"Cogsy"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1697578446,"creation_date":1232680434,"answer_id":471759,"question_id":471749,"body_markdown":"I think this is what you&#39;re after: [`Class.getClasses()`][1]\r\n\r\n[1]: https://java.sun.com/javase/6/docs/api/java/lang/Class.html#getClasses()","title":"Can I discover a Java class&#39; declared inner classes using reflection?","body":"<p>I think this is what you're after: <a href=\"https://java.sun.com/javase/6/docs/api/java/lang/Class.html#getClasses()\" rel=\"nofollow noreferrer\"><code>Class.getClasses()</code></a></p>\n"},{"tags":[],"owner":{"account_id":14176,"reputation":4146,"user_id":28946,"accept_rate":84,"display_name":"Jen S."},"down_vote_count":0,"up_vote_count":67,"is_accepted":true,"score":67,"last_activity_date":1549572474,"creation_date":1232680731,"answer_id":471775,"question_id":471749,"body_markdown":"[`Class.getDeclaredClasses()`][1] is the answer. \r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getDeclaredClasses()","title":"Can I discover a Java class&#39; declared inner classes using reflection?","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getDeclaredClasses()\" rel=\"noreferrer\"><code>Class.getDeclaredClasses()</code></a> is the answer. </p>\n"},{"tags":[],"owner":{"account_id":1186377,"reputation":65,"user_id":1160254,"display_name":"Shrirang"},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1497110210,"creation_date":1327049805,"answer_id":8938851,"question_id":471749,"body_markdown":"    package com.test;\r\n    \r\n    public class A {\r\n    \t\r\n    \tpublic String str;\r\n    \t\r\n        public class B {\r\n            private int i;\r\n        }\r\n    }\r\n    package com.test;\r\n    \r\n    import junit.framework.TestCase;\r\n    \r\n    public class ReflectAB extends TestCase {\r\n    \tpublic void testAccessToOuterClass() throws Exception {\r\n    \t       final A a = new A();\r\n    \t       final A.B b = a.new B();\r\n    \t       final Class[] parent = A.class.getClasses();\r\n    \t       assertEquals(&quot;com.test.A$B&quot;, parent[0].getName());\r\n    \t       assertEquals(&quot;i&quot; , parent[0].getDeclaredFields()[0].getName());\r\n    \t       assertEquals(&quot;int&quot;,parent[0].getDeclaredFields()[0].getType().getName());\r\n    \t       //assertSame(a, a2);\r\n    \t    }\r\n    \r\n    }\r\n\r\n","title":"Can I discover a Java class&#39; declared inner classes using reflection?","body":"<pre><code>package com.test;\n\npublic class A {\n\n    public String str;\n\n    public class B {\n        private int i;\n    }\n}\npackage com.test;\n\nimport junit.framework.TestCase;\n\npublic class ReflectAB extends TestCase {\n    public void testAccessToOuterClass() throws Exception {\n           final A a = new A();\n           final A.B b = a.new B();\n           final Class[] parent = A.class.getClasses();\n           assertEquals(\"com.test.A$B\", parent[0].getName());\n           assertEquals(\"i\" , parent[0].getDeclaredFields()[0].getName());\n           assertEquals(\"int\",parent[0].getDeclaredFields()[0].getType().getName());\n           //assertSame(a, a2);\n        }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14176,"reputation":4146,"user_id":28946,"accept_rate":84,"display_name":"Jen S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28683,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":471775,"answer_count":3,"score":44,"last_activity_date":1697578446,"creation_date":1232680213,"question_id":471749,"body_markdown":"In Java, is there any way to use the JDK libraries to discover the private classes implemented within another class? Or do I need so use something like asm? \r\n","title":"Can I discover a Java class&#39; declared inner classes using reflection?","body":"<p>In Java, is there any way to use the JDK libraries to discover the private classes implemented within another class? Or do I need so use something like asm? </p>\n"},{"tags":["java","android-studio","mobile","bottomnavigationview"],"answers":[{"tags":[],"owner":{"account_id":23025741,"reputation":21,"user_id":17146022,"display_name":"D Com"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697577977,"creation_date":1697577977,"answer_id":77312337,"question_id":77312042,"body_markdown":"\r\n---IndicatorStyle---\r\n1)\r\n   \r\n\r\n     &lt;style name=&quot;App.Custom.Indicator&quot; parent=&quot;Widget.Material3.BottomNavigationView.ActiveIndicator&quot;&gt;\r\n            &lt;item name=&quot;android:color&quot;&gt;@color/blue&lt;/item&gt;  \r\n        &lt;/style&gt;\r\n\r\n2)   Add this line to bottomNavigationView xml code :\r\n\r\n    app:itemActiveIndicatorStyle=&quot;@style/App.Custom.Indicator&quot;\r\n\r\n\r\n**OR**\r\n\r\n       app:itemRippleColor=&quot;@color/green&quot;\r\n        app:itemActiveIndicatorStyle=&quot;@color/green&quot;\r\n\r\nMakes an &quot;animation&quot; of an explosion. \r\nThe color type does not matter.","title":"get rid of BottomNavigationView &quot;selected&quot; view","body":"<p>---IndicatorStyle---\n1)</p>\n<pre><code> &lt;style name=&quot;App.Custom.Indicator&quot; parent=&quot;Widget.Material3.BottomNavigationView.ActiveIndicator&quot;&gt;\n        &lt;item name=&quot;android:color&quot;&gt;@color/blue&lt;/item&gt;  \n    &lt;/style&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Add this line to bottomNavigationView xml code :</li>\n</ol>\n<pre><code>app:itemActiveIndicatorStyle=&quot;@style/App.Custom.Indicator&quot;\n</code></pre>\n<p><strong>OR</strong></p>\n<pre><code>   app:itemRippleColor=&quot;@color/green&quot;\n    app:itemActiveIndicatorStyle=&quot;@color/green&quot;\n</code></pre>\n<p>Makes an &quot;animation&quot; of an explosion.\nThe color type does not matter.</p>\n"}],"owner":{"account_id":23025741,"reputation":21,"user_id":17146022,"display_name":"D Com"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697577977,"creation_date":1697574040,"question_id":77312042,"body_markdown":"When a menu item is pressed it changes its look.\r\nIt appears to me like this:\r\n[![enter image description here][1]][1]\r\nDo you know a way to get rid of this?\r\nIf not, is there a way to change the color?\r\nFor example, change the color from black to blue.\r\n\r\nBottomNavigationView item:\r\n```\r\n    &lt;com.google.android.material.bottomappbar.BottomAppBar\r\n        android:id=&quot;@+id/bottomAppBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;60dp&quot;\r\n        android:layout_gravity=&quot;bottom&quot;\r\n        style=&quot;@style/Widget.MaterialComponents.BottomAppBar.Colored&quot;\r\n        &gt;\r\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n            android:id=&quot;@+id/bnv&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@android:color/transparent&quot;\r\n            app:labelVisibilityMode=&quot;unlabeled&quot;\r\n            app:itemIconTint=&quot;@color/white&quot;\r\n            app:menu=&quot;@menu/bottom_menu&quot;\r\n\r\n            /&gt;\r\n    &lt;/com.google.android.material.bottomappbar.BottomAppBar&gt;\r\n```\r\n  [1]: https://i.stack.imgur.com/rOFBy.jpg","title":"get rid of BottomNavigationView &quot;selected&quot; view","body":"<p>When a menu item is pressed it changes its look.\nIt appears to me like this:\n<a href=\"https://i.stack.imgur.com/rOFBy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rOFBy.jpg\" alt=\"enter image description here\" /></a>\nDo you know a way to get rid of this?\nIf not, is there a way to change the color?\nFor example, change the color from black to blue.</p>\n<p>BottomNavigationView item:</p>\n<pre><code>    &lt;com.google.android.material.bottomappbar.BottomAppBar\n        android:id=&quot;@+id/bottomAppBar&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:layout_gravity=&quot;bottom&quot;\n        style=&quot;@style/Widget.MaterialComponents.BottomAppBar.Colored&quot;\n        &gt;\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n            android:id=&quot;@+id/bnv&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:background=&quot;@android:color/transparent&quot;\n            app:labelVisibilityMode=&quot;unlabeled&quot;\n            app:itemIconTint=&quot;@color/white&quot;\n            app:menu=&quot;@menu/bottom_menu&quot;\n\n            /&gt;\n    &lt;/com.google.android.material.bottomappbar.BottomAppBar&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","zipkin","micrometer-tracing"],"answers":[{"tags":[],"owner":{"account_id":3063245,"reputation":91,"user_id":2595499,"display_name":"lzafra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677138810,"creation_date":1677138810,"answer_id":75541942,"question_id":75474597,"body_markdown":"Maybe by setting [this property][1] to 0.0?\r\n\r\n    management.tracing.sampling.probability: 0.0\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.actuator.management.tracing.sampling.probability","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>Maybe by setting <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.actuator.management.tracing.sampling.probability\" rel=\"nofollow noreferrer\">this property</a> to 0.0?</p>\n<pre><code>management.tracing.sampling.probability: 0.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4348287,"reputation":51,"user_id":3549589,"display_name":"vivek_vara"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679141620,"creation_date":1679141620,"answer_id":75775822,"question_id":75474597,"body_markdown":"This seems to be removed in Spring Boot 3 with Micrometer. It was used to be available in spring-cloud-sleuth. \r\n\r\nAnyone see any other alternative?","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>This seems to be removed in Spring Boot 3 with Micrometer. It was used to be available in spring-cloud-sleuth.</p>\n<p>Anyone see any other alternative?</p>\n"},{"tags":[],"owner":{"account_id":3020157,"reputation":476,"user_id":2561400,"accept_rate":29,"display_name":"Guillaume"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685026872,"creation_date":1685026302,"answer_id":76333617,"question_id":75474597,"body_markdown":"Check and remove this dependency\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;io.zipkin.reporter2&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;zipkin-reporter-brave&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nor any other reporter dependency...","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>Check and remove this dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.zipkin.reporter2&lt;/groupId&gt;\n    &lt;artifactId&gt;zipkin-reporter-brave&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>or any other reporter dependency...</p>\n"},{"tags":[],"owner":{"account_id":52873,"reputation":2689,"user_id":158037,"display_name":"user158037"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689773404,"creation_date":1689773404,"answer_id":76721872,"question_id":75474597,"body_markdown":"If you have zipkin in your classpath you can use:\r\n```\r\n@SpringBootApplication(exclude = ZipkinAutoConfiguration.class)\r\n```\r\nThis will disable reporter that tries to access http://localhost:9411/api/v2/spans .\r\nSadly, based on https://github.com/spring-projects/spring-boot/issues/34620 ,  there is no dedicated `management.tracing.zipkin.enabled` and there isn&#39;t going to be one.","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>If you have zipkin in your classpath you can use:</p>\n<pre><code>@SpringBootApplication(exclude = ZipkinAutoConfiguration.class)\n</code></pre>\n<p>This will disable reporter that tries to access http://localhost:9411/api/v2/spans .\nSadly, based on <a href=\"https://github.com/spring-projects/spring-boot/issues/34620\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/34620</a> ,  there is no dedicated <code>management.tracing.zipkin.enabled</code> and there isn't going to be one.</p>\n"},{"tags":[],"owner":{"account_id":3469995,"reputation":108,"user_id":2904625,"display_name":"Ahmed Sorrour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694221163,"creation_date":1694221163,"answer_id":77070480,"question_id":75474597,"body_markdown":"After going through a lot of posts, I concluded that it is not supported to-date. So the workaround that I have for now have three pieces\r\n\r\n1.\r\n\r\n    @SpringBootApplication(exclude = ZipkinAutoConfiguration.class)\r\n    public class SomeSpringApplication {\r\n        ....\r\n    }\r\n\r\n2.\r\n\r\n    @Configuration\r\n    @Import(ZipkinAutoConfiguration.class)\r\n    @ConditionalOnProperty(prefix = &quot;management.tracing.zipkin&quot;, name = &quot;enabled&quot;, matchIfMissing = true)\r\n    public class ZipKinEnvConfig {\r\n    }\r\n\r\n3. In your properties file:\r\n\r\n    management.tracing.zipkin.enabled=false\r\n\r\nIf this property exists as false, local traces will work and not sent to Zipkin. If this property is true or not existing, traces will be sent out. I believe this is the same behavior as Spring 2.X property. The only annoying part to make this generic is the annotation on SpringBootApplication file :( \r\n\r\n\r\n\r\n","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>After going through a lot of posts, I concluded that it is not supported to-date. So the workaround that I have for now have three pieces</p>\n<p>1.</p>\n<pre><code>@SpringBootApplication(exclude = ZipkinAutoConfiguration.class)\npublic class SomeSpringApplication {\n    ....\n}\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>@Configuration\n@Import(ZipkinAutoConfiguration.class)\n@ConditionalOnProperty(prefix = &quot;management.tracing.zipkin&quot;, name = &quot;enabled&quot;, matchIfMissing = true)\npublic class ZipKinEnvConfig {\n}\n</code></pre>\n<ol start=\"3\">\n<li><p>In your properties file:</p>\n<p>management.tracing.zipkin.enabled=false</p>\n</li>\n</ol>\n<p>If this property exists as false, local traces will work and not sent to Zipkin. If this property is true or not existing, traces will be sent out. I believe this is the same behavior as Spring 2.X property. The only annoying part to make this generic is the annotation on SpringBootApplication file :(</p>\n"},{"tags":[],"owner":{"account_id":5570264,"reputation":51,"user_id":4415883,"display_name":"dm13y"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697577686,"creation_date":1697577686,"answer_id":77312322,"question_id":75474597,"body_markdown":"You can disable zipkin via spring config:\r\n```\r\nspring:\r\n  autoconfigure:\r\n    exclude: org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinAutoConfiguration\r\n```","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>You can disable zipkin via spring config:</p>\n<pre><code>spring:\n  autoconfigure:\n    exclude: org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinAutoConfiguration\n</code></pre>\n"}],"owner":{"account_id":14780386,"reputation":2981,"user_id":10674026,"display_name":"pero_hero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2438,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75541942,"answer_count":6,"score":5,"last_activity_date":1697577686,"creation_date":1676561988,"question_id":75474597,"body_markdown":"In spring boot 2 it was possible to disable distributed tracing during development as described [here][1]. Locally, traces were still generated but not exported.\r\n\r\nIn spring boot 3 it is possible it **disable tracing at all** with:\r\n\r\n         management.tracing.enabled=false\r\n\r\n\r\n**How can I disable the zipkin reporter or distributed tracing in spring boot 3 but keep local tracing on?**\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/56529683/10674026","title":"How to disable zipkin reporter in spring boot 3?","body":"<p>In spring boot 2 it was possible to disable distributed tracing during development as described <a href=\"https://stackoverflow.com/a/56529683/10674026\">here</a>. Locally, traces were still generated but not exported.</p>\n<p>In spring boot 3 it is possible it <strong>disable tracing at all</strong> with:</p>\n<pre><code>     management.tracing.enabled=false\n</code></pre>\n<p><strong>How can I disable the zipkin reporter or distributed tracing in spring boot 3 but keep local tracing on?</strong></p>\n"},{"tags":["java","xml","logging","console","log4j2"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684549285,"post_id":76292921,"comment_id":134537580,"body_markdown":"What is the issue exactly that you feel that you need to solve?","body":"What is the issue exactly that you feel that you need to solve?"},{"owner":{"account_id":13973338,"reputation":65,"user_id":10091319,"display_name":"jvatechs"},"score":0,"creation_date":1684551683,"post_id":76292921,"comment_id":134537701,"body_markdown":"@aled just want to remove printing &quot;WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release&quot; in console","body":"@aled just want to remove printing &quot;WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release&quot; in console"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684552431,"post_id":76292921,"comment_id":134537739,"body_markdown":"Is that the full literal message? Are there more lines or details?","body":"Is that the full literal message? Are there more lines or details?"},{"owner":{"account_id":13973338,"reputation":65,"user_id":10091319,"display_name":"jvatechs"},"score":0,"creation_date":1684622785,"post_id":76292921,"comment_id":134544589,"body_markdown":"@aled The full message is:\n\n`WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release\nWARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release\nWARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release\nWARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release\n\nProcess finished with exit code 0`","body":"@aled The full message is:  <code>WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release  Process finished with exit code 0</code>"},{"owner":{"account_id":29164343,"reputation":1,"user_id":22342302,"display_name":"Mujahid Akber Ali"},"score":0,"creation_date":1692782547,"post_id":76292921,"comment_id":135701473,"body_markdown":"Just install jmeter 5.4 and it will solve your issue. Link to download jmeter:\nhttps://archive.apache.org/dist/jmeter/binaries/","body":"Just install jmeter 5.4 and it will solve your issue. Link to download jmeter: <a href=\"https://archive.apache.org/dist/jmeter/binaries/\" rel=\"nofollow noreferrer\">archive.apache.org/dist/jmeter/binaries</a>"}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1684626844,"creation_date":1684626844,"answer_id":76297778,"question_id":76292921,"body_markdown":"This warning is caused by using the `packages` attribute of the `Configuration` element in the log4j2.xml file, because it has been [deprecated][1]. Removing that attribute should prevent the message from appearing.\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax","title":"WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release","body":"<p>This warning is caused by using the <code>packages</code> attribute of the <code>Configuration</code> element in the log4j2.xml file, because it has been <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax\" rel=\"noreferrer\">deprecated</a>. Removing that attribute should prevent the message from appearing.</p>\n"},{"tags":[],"owner":{"account_id":2397118,"reputation":654,"user_id":2095714,"accept_rate":75,"display_name":"jmera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697576249,"creation_date":1697576249,"answer_id":77312217,"question_id":76292921,"body_markdown":"In addition to removing `packages` from your configuration, to fix this issue you have to add `log4j-core` as an annotation processor. If you&#39;re using Gradle:\r\n\r\n    dependencies {\r\n        annotationProcessor(&quot;org.apache.logging.log4j:log4j-core:2.20.0&quot;)\r\n    }\r\n\r\n\r\nAs [@aled][1] points out, instructions for Maven are in the docs https://logging.apache.org/log4j/2.x/manual/plugins.html.\r\n\r\n  [1]: https://stackoverflow.com/users/721855/aled","title":"WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release","body":"<p>In addition to removing <code>packages</code> from your configuration, to fix this issue you have to add <code>log4j-core</code> as an annotation processor. If you're using Gradle:</p>\n<pre><code>dependencies {\n    annotationProcessor(&quot;org.apache.logging.log4j:log4j-core:2.20.0&quot;)\n}\n</code></pre>\n<p>As <a href=\"https://stackoverflow.com/users/721855/aled\">@aled</a> points out, instructions for Maven are in the docs <a href=\"https://logging.apache.org/log4j/2.x/manual/plugins.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/plugins.html</a>.</p>\n"}],"owner":{"account_id":13973338,"reputation":65,"user_id":10091319,"display_name":"jvatechs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7471,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":76297778,"answer_count":2,"score":6,"last_activity_date":1697576249,"creation_date":1684538189,"question_id":76292921,"body_markdown":"I use `log4j2.xml` to write my logs into a local file in my Maven project. I&#39;ve installed the last dependencies for present day `&lt;version&gt;2.20.0&lt;/version&gt;)` in pom.xml.\r\nMy `log4j2.xml` is:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot; filePattern=&quot;logs/app-%d{MM-dd-yyyy}.log.gz&quot;&gt;\r\n            &lt;TimeFilter start=&quot;01:00:00&quot; end=&quot;07:00:00&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n\r\n            &lt;PatternLayout&gt;\r\n                &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;TimeBasedTriggeringPolicy /&gt;\r\n        &lt;/RollingFile&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;error&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nMy dependencies in pom.xml:\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n\r\nWhen I start my main method logs successfully be written in a file, but I get the message in IntelliJ IDEA console:\r\n\r\n&gt; WARN StatusConsoleListener The use of package scanning to locate\r\n&gt; plugins is deprecated and will be removed in a future release\r\n\r\nHow can I resolve the problem?  just want to stop appearing the message in console.","title":"WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release","body":"<p>I use <code>log4j2.xml</code> to write my logs into a local file in my Maven project. I've installed the last dependencies for present day <code>&lt;version&gt;2.20.0&lt;/version&gt;)</code> in pom.xml.\nMy <code>log4j2.xml</code> is:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot; filePattern=&quot;logs/app-%d{MM-dd-yyyy}.log.gz&quot;&gt;\n            &lt;TimeFilter start=&quot;01:00:00&quot; end=&quot;07:00:00&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;TimeBasedTriggeringPolicy /&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;error&quot;&gt;\n            &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>My dependencies in pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>When I start my main method logs successfully be written in a file, but I get the message in IntelliJ IDEA console:</p>\n<blockquote>\n<p>WARN StatusConsoleListener The use of package scanning to locate\nplugins is deprecated and will be removed in a future release</p>\n</blockquote>\n<p>How can I resolve the problem?  just want to stop appearing the message in console.</p>\n"},{"tags":["java","android","persistence","dao","android-room"],"comments":[{"owner":{"account_id":11715453,"reputation":116,"user_id":8576103,"display_name":"InziKhan"},"score":1,"creation_date":1514501467,"post_id":48015280,"comment_id":82999849,"body_markdown":"where is your data class?","body":"where is your data class?"},{"owner":{"account_id":4166230,"reputation":1142,"user_id":3415152,"accept_rate":75,"display_name":"Reza Bigdeli"},"score":0,"creation_date":1520533873,"post_id":48015280,"comment_id":85365671,"body_markdown":"did you find the solution?","body":"did you find the solution?"},{"owner":{"account_id":1905828,"reputation":1303,"user_id":1720732,"accept_rate":68,"display_name":"xrnd"},"score":0,"creation_date":1520576247,"post_id":48015280,"comment_id":85380607,"body_markdown":"Yes, the accepted answer worked for me.","body":"Yes, the accepted answer worked for me."}],"answers":[{"tags":[],"owner":{"account_id":1905828,"reputation":1303,"user_id":1720732,"accept_rate":68,"display_name":"xrnd"},"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1514525403,"creation_date":1514525403,"answer_id":48017838,"question_id":48015280,"body_markdown":"I had initially followed the method used in Kotlin, but that gives the error in Java code. \r\nTwo quick changes fixed it for me\r\n\r\n - Change BaseDao to Abstract class \r\n - Added @Dao annotation to the BaseDao\r\n\r\nPlease find the code below and now it runs properly \r\n    \r\n    @Dao\r\n    abstract class BaseDao&lt;T&gt; {\r\n\r\n       @Insert(onConflict = OnConflictStrategy.REPLACE)\r\n       abstract void insert(T entity);\r\n\r\n       @Update\r\n       abstract void update(T entity);\r\n\r\n       @Delete\r\n       abstract void delete(T entity);\r\n     }\r\n\r\n     @Dao\r\n     public abstract class ReasonDao extends BaseDao&lt;Reason&gt;{\r\n\r\n        @Query(&quot;SELECT * from Reason&quot;)\r\n        abstract public List&lt;Reason&gt; getReasons();\r\n\r\n      }","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>I had initially followed the method used in Kotlin, but that gives the error in Java code. \nTwo quick changes fixed it for me</p>\n\n<ul>\n<li>Change BaseDao to Abstract class </li>\n<li>Added @Dao annotation to the BaseDao</li>\n</ul>\n\n<p>Please find the code below and now it runs properly </p>\n\n<pre><code>@Dao\nabstract class BaseDao&lt;T&gt; {\n\n   @Insert(onConflict = OnConflictStrategy.REPLACE)\n   abstract void insert(T entity);\n\n   @Update\n   abstract void update(T entity);\n\n   @Delete\n   abstract void delete(T entity);\n }\n\n @Dao\n public abstract class ReasonDao extends BaseDao&lt;Reason&gt;{\n\n    @Query(\"SELECT * from Reason\")\n    abstract public List&lt;Reason&gt; getReasons();\n\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524507117,"creation_date":1524507117,"answer_id":49987457,"question_id":48015280,"body_markdown":"In my case I tried to save to DB non-Entity objects. Then replaced with Entity class (contains `@Entity(tableName = &quot;your_table&quot;, indices = [Index(&quot;your_key&quot;)])`).","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>In my case I tried to save to DB non-Entity objects. Then replaced with Entity class (contains <code>@Entity(tableName = \"your_table\", indices = [Index(\"your_key\")])</code>).</p>\n"},{"tags":[],"owner":{"account_id":1748128,"reputation":3542,"user_id":1597841,"accept_rate":64,"display_name":"nAkhmedov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525427943,"creation_date":1525427943,"answer_id":50172264,"question_id":48015280,"body_markdown":"I believe is that you have missed to give `Entity` annotation to T class. For example `Reason` class should have `@Entity` and give it to ReasonDao class. Like:\r\n\r\n`@Dao\r\n public abstract class ReasonDao extends BaseDao&lt;Reason&gt;{}`","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>I believe is that you have missed to give <code>Entity</code> annotation to T class. For example <code>Reason</code> class should have <code>@Entity</code> and give it to ReasonDao class. Like:</p>\n\n<p><code>@Dao\n public abstract class ReasonDao extends BaseDao&lt;Reason&gt;{}</code></p>\n"},{"tags":[],"owner":{"account_id":2243656,"reputation":1574,"user_id":1977565,"accept_rate":83,"display_name":"UneXp"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1545250562,"creation_date":1545250562,"answer_id":53858562,"question_id":48015280,"body_markdown":"The reason is that you specified ***ReasonDao*** type as generic parameter instead of ***Reason***.\r\n\r\nOriginal code:\r\n\r\n    @Dao\r\n    public abstract class ReasonDao implements BaseDao&lt;ReasonDao&gt; {\r\n    \r\n       ...\r\n    \r\n    }\r\n\r\nCorrect code:\r\n&lt;!-- language: kotlin --&gt;\r\n\r\n    @Dao\r\n    public abstract class ReasonDao implements BaseDao&lt;Reason&gt; {\r\n    \r\n       ...\r\n    \r\n    }\r\n\r\nwhere ***Reason*** is the type marked with ***@Entity*** annotation.\r\n\r\nBy the way, this is fixed in the accepted answer, but is not mentioned in the changelist :) ","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>The reason is that you specified <strong><em>ReasonDao</em></strong> type as generic parameter instead of <strong><em>Reason</em></strong>.</p>\n\n<p>Original code:</p>\n\n<pre><code>@Dao\npublic abstract class ReasonDao implements BaseDao&lt;ReasonDao&gt; {\n\n   ...\n\n}\n</code></pre>\n\n<p>Correct code:\n</p>\n\n<pre><code>@Dao\npublic abstract class ReasonDao implements BaseDao&lt;Reason&gt; {\n\n   ...\n\n}\n</code></pre>\n\n<p>where <strong><em>Reason</em></strong> is the type marked with <strong><em>@Entity</em></strong> annotation.</p>\n\n<p>By the way, this is fixed in the accepted answer, but is not mentioned in the changelist :) </p>\n"},{"tags":[],"owner":{"account_id":967432,"reputation":342,"user_id":990605,"display_name":"androminor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621830687,"creation_date":1621830687,"answer_id":67666698,"question_id":48015280,"body_markdown":"&gt; What is missing here is the Data class. Generally,\r\n&gt; @Entity represents objects you want to store,\r\n&gt; *  Room entity includes fields for each column inside the\r\n&gt; *  table in the database\r\n\r\n    @Entity(tableName=&quot;something&quot;) data class YourData()\r\n                ","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<blockquote>\n<p>What is missing here is the Data class. Generally,\n@Entity represents objects you want to store,</p>\n<ul>\n<li>Room entity includes fields for each column inside the</li>\n<li>table in the database</li>\n</ul>\n</blockquote>\n<pre><code>@Entity(tableName=&quot;something&quot;) data class YourData()\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":18471491,"reputation":1,"user_id":14493151,"display_name":"Gills"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632817357,"creation_date":1632817036,"answer_id":69358115,"question_id":48015280,"body_markdown":"For those who has a &quot;Type of the parameter must be a class annotated with @Entity or a collection/array of it &quot; error when using Kotlin in the dao , you should try using  @JvmSuppressWildcards annotation on your functions. eg.\r\n\r\n     @Query(&quot;SELECT * FROM materials&quot;)\r\n     @JvmSuppressWildcards\r\n     fun getAllMaterials(): LiveData&lt;List&lt;MaterialModel&gt;&gt;\r\n\r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>For those who has a &quot;Type of the parameter must be a class annotated with @Entity or a collection/array of it &quot; error when using Kotlin in the dao , you should try using  @JvmSuppressWildcards annotation on your functions. eg.</p>\n<pre><code> @Query(&quot;SELECT * FROM materials&quot;)\n @JvmSuppressWildcards\n fun getAllMaterials(): LiveData&lt;List&lt;MaterialModel&gt;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23045148,"reputation":651,"user_id":17162789,"display_name":"Oleg Serchenko"},"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1646315761,"creation_date":1634323610,"answer_id":69589298,"question_id":48015280,"body_markdown":"Changed in gradle from this:\r\n```\r\nkapt &quot;androidx.room:room-compiler:$roomVersion&quot;\r\n```\r\n\r\n\r\nto this: \r\n```\r\nannotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\r\n```\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>Changed in gradle from this:</p>\n<pre><code>kapt &quot;androidx.room:room-compiler:$roomVersion&quot;\n</code></pre>\n<p>to this:</p>\n<pre><code>annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17321389,"reputation":101,"user_id":12546784,"display_name":"3ameration"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1635602302,"creation_date":1635602302,"answer_id":69780309,"question_id":48015280,"body_markdown":"The problem was that in my build.gradle, the version of Kotlin I was using was 1.5.0\r\n\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:1.5.0&quot;\r\n\r\nBut as far as I understood, this version of Kotlin along with Room and coroutines doesn’t work well.\r\nWas able to resolve the issue by downgrading the Kotlin version to:\r\n\r\n    \r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:1.4.32&quot;\r\n\r\nSolved! Thank me later\r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>The problem was that in my build.gradle, the version of Kotlin I was using was 1.5.0</p>\n<pre><code>implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:1.5.0&quot;\n</code></pre>\n<p>But as far as I understood, this version of Kotlin along with Room and coroutines doesn’t work well.\nWas able to resolve the issue by downgrading the Kotlin version to:</p>\n<pre><code>implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:1.4.32&quot;\n</code></pre>\n<p>Solved! Thank me later</p>\n"},{"tags":[],"owner":{"account_id":19421276,"reputation":59,"user_id":14203755,"display_name":"juan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1640109717,"creation_date":1640109717,"answer_id":70439777,"question_id":48015280,"body_markdown":"Changed in gradle this: kapt &quot;androidx.room:room-compiler:$roomVersion&quot; to this: annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\r\n\r\nDoing this solution served me partially but when trying to insert a date in the database it did not work for me so try kapt &quot;androidx.room:room-compiler:$roomVersion&quot; and rather change room_version to the latest stable version https://developer.android.com/jetpack/androidx/releases/room#groovy \r\nependencies {\r\n\r\n    //**\r\n    def room_version = &#39;2.4.0&#39;\r\n    def activityVersion = &#39;1.4.0&#39;\r\n    def lifecycle_version = &quot;2.2.0&quot;\r\n    // Room and Lifecycle dependencies\r\n    implementation &quot;androidx.room:room-runtime:$room_version&quot;\r\n    kapt &quot;androidx.room:room-compiler:$room_version&quot;\r\n    //kotlin extensions for coroutine support with room\r\n    implementation(&quot;androidx.room:room-ktx:$room_version&quot;)\r\n\r\n    //kotlin extension for coroutine support with activities\r\n    implementation &quot;androidx.activity:activity-ktx:$activityVersion&quot;\r\n    //**\r\n\r\nThis is how it worked for me correctly\r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>Changed in gradle this: kapt &quot;androidx.room:room-compiler:$roomVersion&quot; to this: annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;</p>\n<p>Doing this solution served me partially but when trying to insert a date in the database it did not work for me so try kapt &quot;androidx.room:room-compiler:$roomVersion&quot; and rather change room_version to the latest stable version <a href=\"https://developer.android.com/jetpack/androidx/releases/room#groovy\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/room#groovy</a>\nependencies {</p>\n<pre><code>//**\ndef room_version = '2.4.0'\ndef activityVersion = '1.4.0'\ndef lifecycle_version = &quot;2.2.0&quot;\n// Room and Lifecycle dependencies\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nkapt &quot;androidx.room:room-compiler:$room_version&quot;\n//kotlin extensions for coroutine support with room\nimplementation(&quot;androidx.room:room-ktx:$room_version&quot;)\n\n//kotlin extension for coroutine support with activities\nimplementation &quot;androidx.activity:activity-ktx:$activityVersion&quot;\n//**\n</code></pre>\n<p>This is how it worked for me correctly</p>\n"},{"tags":[],"owner":{"account_id":16914309,"reputation":146,"user_id":12232679,"display_name":"Victor Loveday"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653303241,"creation_date":1653303241,"answer_id":72347354,"question_id":48015280,"body_markdown":"This is a version error. Try updating your room dependencies. \r\n\r\nI changed mine from:`implementation &quot;androidx.room:room-runtime:2.2.5&quot;`\r\n\r\nTo :`implementation &quot;androidx.room:room-runtime:2.4.2&quot;`\r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>This is a version error. Try updating your room dependencies.</p>\n<p>I changed mine from:<code>implementation &quot;androidx.room:room-runtime:2.2.5&quot;</code></p>\n<p>To :<code>implementation &quot;androidx.room:room-runtime:2.4.2&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":1149996,"reputation":366,"user_id":1131910,"display_name":"Shirish Kamath"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1660127638,"creation_date":1660127638,"answer_id":73304737,"question_id":48015280,"body_markdown":"If you faced this issue in Kotlin 1.7.10+ and Room &lt; 2.4.2, upgrading Room to 2.4.3 fixes the issue.\r\n\r\nFrom Room&#39;s changelog for 2.4.3:\r\nFixed an issue that would cause Room to not recognize suspend functions in Kotlin 1.7 \r\n\r\nThis issue was due to using `suspend` functions for insert/delete in interfaces:\r\nhttps://issuetracker.google.com/issues/236612358","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>If you faced this issue in Kotlin 1.7.10+ and Room &lt; 2.4.2, upgrading Room to 2.4.3 fixes the issue.</p>\n<p>From Room's changelog for 2.4.3:\nFixed an issue that would cause Room to not recognize suspend functions in Kotlin 1.7</p>\n<p>This issue was due to using <code>suspend</code> functions for insert/delete in interfaces:\n<a href=\"https://issuetracker.google.com/issues/236612358\" rel=\"noreferrer\">https://issuetracker.google.com/issues/236612358</a></p>\n"},{"tags":[],"owner":{"account_id":14607990,"reputation":109,"user_id":10550219,"display_name":"Swetabh Suman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661410998,"creation_date":1661058746,"answer_id":73431808,"question_id":48015280,"body_markdown":"\r\n\r\nremove suspend,then it will work.\r\n\r\n\r\n    @Dao\r\n    interface FoodDao {\r\n    \r\n         @Insert(onConflict = OnConflictStrategy.REPLACE)\r\n         fun upsert(meal: Meal): Long\r\n    \r\n    \r\n        @Query(&quot;SELECT * FROM food_tables&quot;)\r\n        fun getAllFood(): LiveData&lt;List&lt;Meal&gt;&gt;\r\n    \r\n    \r\n        @Delete\r\n        fun deleteFood(meal: Meal)\r\n    \r\n    }\r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>remove suspend,then it will work.</p>\n<pre><code>@Dao\ninterface FoodDao {\n\n     @Insert(onConflict = OnConflictStrategy.REPLACE)\n     fun upsert(meal: Meal): Long\n\n\n    @Query(&quot;SELECT * FROM food_tables&quot;)\n    fun getAllFood(): LiveData&lt;List&lt;Meal&gt;&gt;\n\n\n    @Delete\n    fun deleteFood(meal: Meal)\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12446767,"reputation":956,"user_id":9062752,"display_name":"oyeraghib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662482672,"creation_date":1662482672,"answer_id":73625334,"question_id":48015280,"body_markdown":"In my case I was trying to store a data class object into the Room Database. The error says that the parameter for `Insert` should be a class which has an annotation of `@Entity` so I created a table (entity) which has same values as data class and stored them successfully","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>In my case I was trying to store a data class object into the Room Database. The error says that the parameter for <code>Insert</code> should be a class which has an annotation of <code>@Entity</code> so I created a table (entity) which has same values as data class and stored them successfully</p>\n"},{"tags":[],"owner":{"account_id":18955587,"reputation":135,"user_id":13832244,"display_name":"Sanket Bhangale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662729843,"creation_date":1662729843,"answer_id":73662872,"question_id":48015280,"body_markdown":"One small mistake I did was \r\nI did not annotate my data class with the @Entity annotation\r\n\r\n\r\nTable declaration\r\n\r\n    @Entity // Check if you have used this annotation or not\r\n    data class fooTable(){\r\n    ...\r\n    }\r\n\r\nIn DAO\r\n\r\n    @Dao\r\n    interface myDao{\r\n      @Insert\r\n      suspend fun addFoo(fooObj: fooTable)\r\n      }\r\n    }\r\n\r\n\r\nIf you are trying to insert a row in a table in Room DB then the corresponding data class should be annotated with @Entity annotation\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>One small mistake I did was\nI did not annotate my data class with the @Entity annotation</p>\n<p>Table declaration</p>\n<pre><code>@Entity // Check if you have used this annotation or not\ndata class fooTable(){\n...\n}\n</code></pre>\n<p>In DAO</p>\n<pre><code>@Dao\ninterface myDao{\n  @Insert\n  suspend fun addFoo(fooObj: fooTable)\n  }\n}\n</code></pre>\n<p>If you are trying to insert a row in a table in Room DB then the corresponding data class should be annotated with @Entity annotation</p>\n"},{"tags":[],"owner":{"account_id":18804062,"reputation":1,"user_id":17707603,"display_name":"Bingba Tito"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670231262,"creation_date":1670231262,"answer_id":74685701,"question_id":48015280,"body_markdown":"Actually changing the version room matters too, like I changed my room version from 2.2.6 to 2.4.3 and it worked. if the Kotlin version is low it&#39;s better to use a lower version of the room as well if the Kotlin version is high it&#39;s better to use a higher version too.","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>Actually changing the version room matters too, like I changed my room version from 2.2.6 to 2.4.3 and it worked. if the Kotlin version is low it's better to use a lower version of the room as well if the Kotlin version is high it's better to use a higher version too.</p>\n"},{"tags":[],"owner":{"account_id":11878740,"reputation":121,"user_id":8693019,"display_name":"Neal Ratan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680892649,"creation_date":1680892649,"answer_id":75961142,"question_id":48015280,"body_markdown":"Do not replace `kapt` with `annotationProcessor`\r\n\r\nTry this instead\r\n    \r\n    def room_version = &quot;2.5.1&quot;\r\n\r\n    implementation &quot;androidx.room:room-runtime:$room_version&quot;\r\n    annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\r\n\r\n    // To use Kotlin annotation processing tool (kapt)\r\n    kapt &quot;androidx.room:room-compiler:$room_version&quot;\r\n\r\n    // To use Coroutine features with room\r\n    implementation &quot;androidx.room:room-ktx:$room_version&quot;","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>Do not replace <code>kapt</code> with <code>annotationProcessor</code></p>\n<p>Try this instead</p>\n<pre><code>def room_version = &quot;2.5.1&quot;\n\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nannotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\n\n// To use Kotlin annotation processing tool (kapt)\nkapt &quot;androidx.room:room-compiler:$room_version&quot;\n\n// To use Coroutine features with room\nimplementation &quot;androidx.room:room-ktx:$room_version&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23806397,"reputation":19,"user_id":17815867,"display_name":"madan yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686709726,"creation_date":1686709726,"answer_id":76469770,"question_id":48015280,"body_markdown":"In My case dependence version issue. I have upgreade dependence now working fine.\r\nso make sure dependence is according to kotlin version.\r\n\r\n    **def room_version = &quot;2.5.1&quot;**\r\n    implementation &quot;androidx.room:room-runtime:$room_version&quot;\r\n    implementation &quot;androidx.room:room-ktx:$room_version&quot;\r\n    kapt &quot;androidx.room:room-compiler:$room_version&quot;\r\n\r\n ","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>In My case dependence version issue. I have upgreade dependence now working fine.\nso make sure dependence is according to kotlin version.</p>\n<pre><code>**def room_version = &quot;2.5.1&quot;**\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nimplementation &quot;androidx.room:room-ktx:$room_version&quot;\nkapt &quot;androidx.room:room-compiler:$room_version&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15006936,"reputation":2131,"user_id":10832700,"display_name":"ahmnouira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691231965,"creation_date":1691231965,"answer_id":76841240,"question_id":48015280,"body_markdown":"I had this issue when I accidentally used **vararg** inside the method: \r\n\r\n```kotlin\r\n@Insert\r\nfun insertAll(vararg postDbModels: Array&lt;PostDbModel&gt;)\r\n``` \r\n\r\nTo fix this issue I just removed vararg and using an Array of @Entity class model instead:\r\n\r\n```kotlin\r\n@Insert\r\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\r\n```","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>I had this issue when I accidentally used <strong>vararg</strong> inside the method:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Insert\nfun insertAll(vararg postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n<p>To fix this issue I just removed vararg and using an Array of @Entity class model instead:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Insert\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9732358,"reputation":1,"user_id":7216912,"display_name":"Mano Nano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697576220,"creation_date":1697576220,"answer_id":77312213,"question_id":48015280,"body_markdown":"\r\n\r\n   \r\n\r\n    implementation (&quot;androidx.core:core-ktx:1.10.1&quot;)\r\n    implementation (&quot;androidx.appcompat:appcompat:1.6.1&quot;)\r\n\r\n    implementation (&quot;androidx.activity:activity-ktx:$activityVersion&quot;)\r\n\r\n    // Dependencies for working with Architecture components\r\n    // You&#39;ll probably have to update the version numbers in build.gradle (Project)\r\n\r\n    // Room components\r\n    implementation (&quot;androidx.room:room-ktx:$roomVersion&quot;)\r\n    kapt (&quot;androidx.room:room-compiler:$roomVersion&quot;)\r\n\r\n    androidTestImplementation (&quot;androidx.room:room-testing:$roomVersion&quot;)\r\n\r\n    // Lifecycle components\r\n    implementation (&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycleVersion&quot;)\r\n    implementation (&quot;androidx.lifecycle:lifecycle-livedata-ktx:$lifecycleVersion&quot;)\r\n    implementation (&quot;androidx.lifecycle:lifecycle-common-java8:$lifecycleVersion&quot;)\r\n\r\n    // Kotlin components\r\n    implementation (&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlinVersion&quot;)\r\n    api (&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:$coroutines&quot;)\r\n    api (&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:$coroutines&quot;)`\r\n\r\n\r\n    \r\n\r\n","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<pre><code>implementation (&quot;androidx.core:core-ktx:1.10.1&quot;)\nimplementation (&quot;androidx.appcompat:appcompat:1.6.1&quot;)\n\nimplementation (&quot;androidx.activity:activity-ktx:$activityVersion&quot;)\n\n// Dependencies for working with Architecture components\n// You'll probably have to update the version numbers in build.gradle (Project)\n\n// Room components\nimplementation (&quot;androidx.room:room-ktx:$roomVersion&quot;)\nkapt (&quot;androidx.room:room-compiler:$roomVersion&quot;)\n\nandroidTestImplementation (&quot;androidx.room:room-testing:$roomVersion&quot;)\n\n// Lifecycle components\nimplementation (&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycleVersion&quot;)\nimplementation (&quot;androidx.lifecycle:lifecycle-livedata-ktx:$lifecycleVersion&quot;)\nimplementation (&quot;androidx.lifecycle:lifecycle-common-java8:$lifecycleVersion&quot;)\n\n// Kotlin components\nimplementation (&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlinVersion&quot;)\napi (&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:$coroutines&quot;)\napi (&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:$coroutines&quot;)`\n</code></pre>\n"}],"owner":{"account_id":1905828,"reputation":1303,"user_id":1720732,"accept_rate":68,"display_name":"xrnd"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35112,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":48017838,"answer_count":19,"score":40,"last_activity_date":1697576220,"creation_date":1514500964,"question_id":48015280,"body_markdown":"I am using Room architecture component for persistence. I have created generic DAO interface to avoid boilerplate code. \r\n[Room Pro Tips][1]\r\n\r\n\r\nBut my code doesn&#39;t compile saying &quot;Error:(21, 19) error: Type of the parameter must be a class annotated with @Entity or a collection/array of it.&quot; for the Generic class T.\r\n\r\n    interface BaseDao&lt;T&gt; {\r\n    \r\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\r\n    void insert(T... entity);\r\n\r\n    @Update\r\n    void update(T entity);\r\n\r\n    @Delete\r\n    void delete(T entity);\r\n    }\r\n    \r\n    @Dao\r\n    public abstract class ReasonDao implements BaseDao&lt;ReasonDao&gt; {\r\n\r\n       @Query(&quot;SELECT * from Reason&quot;)\r\n       abstract public List&lt;Reason&gt; getReasons();\r\n\r\n    }\r\n\r\nIs there anything I am missing here. \r\nIt works like this [here][2]\r\n \r\n\r\n\r\n  [1]: https://medium.com/google-developers/7-pro-tips-for-room-fbadea4bfbd1\r\n  [2]: https://gist.github.com/florina-muntenescu/1c78858f286d196d545c038a71a3e864","title":"&quot;Type of the parameter must be a class annotated with @Entity&quot; while creating Generic DAO interface in Room","body":"<p>I am using Room architecture component for persistence. I have created generic DAO interface to avoid boilerplate code. \n<a href=\"https://medium.com/google-developers/7-pro-tips-for-room-fbadea4bfbd1\" rel=\"noreferrer\">Room Pro Tips</a></p>\n\n<p>But my code doesn't compile saying \"Error:(21, 19) error: Type of the parameter must be a class annotated with @Entity or a collection/array of it.\" for the Generic class T.</p>\n\n<pre><code>interface BaseDao&lt;T&gt; {\n\n@Insert(onConflict = OnConflictStrategy.REPLACE)\nvoid insert(T... entity);\n\n@Update\nvoid update(T entity);\n\n@Delete\nvoid delete(T entity);\n}\n\n@Dao\npublic abstract class ReasonDao implements BaseDao&lt;ReasonDao&gt; {\n\n   @Query(\"SELECT * from Reason\")\n   abstract public List&lt;Reason&gt; getReasons();\n\n}\n</code></pre>\n\n<p>Is there anything I am missing here. \nIt works like this <a href=\"https://gist.github.com/florina-muntenescu/1c78858f286d196d545c038a71a3e864\" rel=\"noreferrer\">here</a></p>\n"},{"tags":["java","eclipse","google-app-engine","localhost"],"answers":[{"tags":[],"owner":{"account_id":29659696,"reputation":76,"user_id":22731579,"display_name":"Spencer Alexander"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1697147529,"creation_date":1697147529,"answer_id":77284017,"question_id":77280512,"body_markdown":"This appears to be a bug or regression in cloud sdk 450.0.0 released 2023-10-10\r\nhttps://cloud.google.com/sdk/docs/release-notes\r\n\r\nSpecifically:\r\n\r\n&gt; App Engine Updated the Java SDK to version 2.0.20 build from the open\r\n&gt; source project\r\n\r\nWe were able to get local dev server working by pinning the cloudSdk version in our build.gradle file:\r\n\r\n```\r\nappengine {\r\n    // Configure the Cloud SDK version\r\n    tools {\r\n        cloudSdkVersion = &#39;449.0.0&#39;\r\n    }\r\n...etc","title":"Google app engine local server won&#39;t run on eclipse","body":"<p>This appears to be a bug or regression in cloud sdk 450.0.0 released 2023-10-10\n<a href=\"https://cloud.google.com/sdk/docs/release-notes\" rel=\"noreferrer\">https://cloud.google.com/sdk/docs/release-notes</a></p>\n<p>Specifically:</p>\n<blockquote>\n<p>App Engine Updated the Java SDK to version 2.0.20 build from the open\nsource project</p>\n</blockquote>\n<p>We were able to get local dev server working by pinning the cloudSdk version in our build.gradle file:</p>\n<pre><code>appengine {\n    // Configure the Cloud SDK version\n    tools {\n        cloudSdkVersion = '449.0.0'\n    }\n...etc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1378385,"reputation":11,"user_id":1311889,"display_name":"Rodrigo Romano Teixo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697514517,"creation_date":1697511561,"answer_id":77305952,"question_id":77280512,"body_markdown":"Just got this problem today, it was working yesterday until I made a new deployment where google cloud update itself to version 450.\r\n\r\nI move back to 449 in my pom:\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${appengine.maven.plugin.version}&lt;/version&gt;\r\n    \r\n    \t\t\t&lt;configuration&gt;\r\n                    ..\r\n    \t\t\t\t..\r\n    \t\t\t\t..\r\n    \r\n                    &lt;!-- ADD THIS LINE --&gt;\r\n    \t\t\t\t&lt;cloudSdkVersion&gt;449.0.0&lt;/cloudSdkVersion&gt;\r\n        \r\n    \t\t\t&lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\nPerform a update or make a deploy.\r\n\r\nThen, in Eclipse, go to Windows -&gt; Preferences -&gt; Google Cloud Tools and Change SDK to 449 path.\r\n\r\n","title":"Google app engine local server won&#39;t run on eclipse","body":"<p>Just got this problem today, it was working yesterday until I made a new deployment where google cloud update itself to version 450.</p>\n<p>I move back to 449 in my pom:</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${appengine.maven.plugin.version}&lt;/version&gt;\n\n            &lt;configuration&gt;\n                ..\n                ..\n                ..\n\n                &lt;!-- ADD THIS LINE --&gt;\n                &lt;cloudSdkVersion&gt;449.0.0&lt;/cloudSdkVersion&gt;\n    \n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>Perform a update or make a deploy.</p>\n<p>Then, in Eclipse, go to Windows -&gt; Preferences -&gt; Google Cloud Tools and Change SDK to 449 path.</p>\n"},{"tags":[],"owner":{"account_id":3643892,"reputation":81,"user_id":3037408,"display_name":"aaron_stasis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697575653,"creation_date":1697575653,"answer_id":77312174,"question_id":77280512,"body_markdown":"For others who might have this problem IntelliJ with gcloud installed locally (via homebrew), I had to do this:\r\n\r\n * gcloud components update --version 449.0.0\r\n * gcloud components install app-engine-java\r\n * in intellij - Intellij Menu -&gt; Settings -&gt; Cloud Code -&gt; Dependencies , switch ‘use a custom local installation’ to ‘/usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/’, it should say ‘Cloud SDK Version 449.0.0’ if successful","title":"Google app engine local server won&#39;t run on eclipse","body":"<p>For others who might have this problem IntelliJ with gcloud installed locally (via homebrew), I had to do this:</p>\n<ul>\n<li>gcloud components update --version 449.0.0</li>\n<li>gcloud components install app-engine-java</li>\n<li>in intellij - Intellij Menu -&gt; Settings -&gt; Cloud Code -&gt; Dependencies , switch ‘use a custom local installation’ to ‘/usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/’, it should say ‘Cloud SDK Version 449.0.0’ if successful</li>\n</ul>\n"}],"owner":{"account_id":24718870,"reputation":33,"user_id":18608248,"display_name":"helloi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77284017,"answer_count":3,"score":3,"last_activity_date":1697575653,"creation_date":1697113072,"question_id":77280512,"body_markdown":"My app engine standard application was running till this morning and suddenly it won&#39;t run throwing the following error.\r\n```Oct 12, 2023 5:45:17 PM com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties\r\nINFO: Overwriting system property key &#39;java.util.logging.config.file&#39;, value &#39;/Users/sharon/Library/Application Support/google-cloud-tools-java/managed-cloud-sdk/LATEST/google-cloud-sdk/platform/google_appengine/google/appengine/tools/java/config/sdk/logging.properties&#39; with value &#39;WEB-INF/logging.properties&#39; from &#39;/Users/sharon/eclipse-workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/Lily/WEB-INF/appengine-web.xml&#39;\r\n2023-10-12 17:45:17.863:INFO::main: Logging initialized @768ms to org.eclipse.jetty.util.log.StdErrLog\r\n2023-10-12 17:45:17.936:WARN:oejs.AbstractConnector:main: Ignoring deprecated socket close linger time\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/apphosting/runtime/SessionStore\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat com.google.appengine.tools.development.DevAppServerClassLoader.loadClass(DevAppServerClassLoader.java:117)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\tat com.google.apphosting.runtime.jetty9.SessionManagerHandler.create(SessionManagerHandler.java:75)\r\n\tat com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:360)\r\n\tat com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:293)\r\n\tat com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:42)\r\n\tat com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:102)\r\n\tat com.google.appengine.tools.development.Modules.startup(Modules.java:118)\r\n\tat com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:280)\r\n\tat com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:57)\r\n\tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:229)\r\n\tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:227)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:227)\r\n\tat com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:381)\r\n\tat com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:58)\r\n\tat com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:239)\r\n\tat com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:230)\r\nCaused by: java.lang.ClassNotFoundException: com.google.apphosting.runtime.SessionStore\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat com.google.appengine.tools.development.DevAppServerClassLoader.loadClass(DevAppServerClassLoader.java:117)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\t... 28 more\r\n```\r\n\r\nI don&#39;t understand what the error means. What could be the reason? I noticed that it is happening after I upgraded the gcloud sdk version to 45.0.0 but I created another app engine standard application and it works fine. ","title":"Google app engine local server won&#39;t run on eclipse","body":"<p>My app engine standard application was running till this morning and suddenly it won't run throwing the following error.</p>\n<pre><code>INFO: Overwriting system property key 'java.util.logging.config.file', value '/Users/sharon/Library/Application Support/google-cloud-tools-java/managed-cloud-sdk/LATEST/google-cloud-sdk/platform/google_appengine/google/appengine/tools/java/config/sdk/logging.properties' with value 'WEB-INF/logging.properties' from '/Users/sharon/eclipse-workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/Lily/WEB-INF/appengine-web.xml'\n2023-10-12 17:45:17.863:INFO::main: Logging initialized @768ms to org.eclipse.jetty.util.log.StdErrLog\n2023-10-12 17:45:17.936:WARN:oejs.AbstractConnector:main: Ignoring deprecated socket close linger time\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/apphosting/runtime/SessionStore\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at com.google.appengine.tools.development.DevAppServerClassLoader.loadClass(DevAppServerClassLoader.java:117)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n    at com.google.apphosting.runtime.jetty9.SessionManagerHandler.create(SessionManagerHandler.java:75)\n    at com.google.appengine.tools.development.jetty9.JettyContainerService.startContainer(JettyContainerService.java:360)\n    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:293)\n    at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:42)\n    at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:102)\n    at com.google.appengine.tools.development.Modules.startup(Modules.java:118)\n    at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:280)\n    at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:57)\n    at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:229)\n    at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:227)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:227)\n    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:381)\n    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:58)\n    at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:239)\n    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:230)\nCaused by: java.lang.ClassNotFoundException: com.google.apphosting.runtime.SessionStore\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at com.google.appengine.tools.development.DevAppServerClassLoader.loadClass(DevAppServerClassLoader.java:117)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n    ... 28 more\n</code></pre>\n<p>I don't understand what the error means. What could be the reason? I noticed that it is happening after I upgraded the gcloud sdk version to 45.0.0 but I created another app engine standard application and it works fine.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697552796,"post_id":77309415,"comment_id":136292562,"body_markdown":"(1-) Still waiting for an [mre]. The MRE should be the code with default renderers to minimize the size of the code. No need for the repaint() since this will be done automatically. See: [Sorting and Filtering](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting) for complete working examples.","body":"(1-) Still waiting for an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The MRE should be the code with default renderers to minimize the size of the code. No need for the repaint() since this will be done automatically. See: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting\" rel=\"nofollow noreferrer\">Sorting and Filtering</a> for complete working examples."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697552879,"post_id":77309415,"comment_id":136292579,"body_markdown":"this question has nothing to do with any other question, no MRE required here. Question is obvious, relevant methods placed into the question.","body":"this question has nothing to do with any other question, no MRE required here. Question is obvious, relevant methods placed into the question."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1697553670,"post_id":77309415,"comment_id":136292773,"body_markdown":"The point is you continue to ask questions without posting an MRE even though you have been asked previously to post an MRE with every question. Many times when creating the MRE the problem is found.  Until the problem is solved you don&#39;t know what is or isn&#39;t relevant to the statement problem. Most often the problem is with code not posted. Voting to close since you aren&#39;t willing to provide the necessary information needed to help solve the problem.","body":"The point is you continue to ask questions without posting an MRE even though you have been asked previously to post an MRE with every question. Many times when creating the MRE the problem is found.  Until the problem is solved you don&#39;t know what is or isn&#39;t relevant to the statement problem. Most often the problem is with code not posted. Voting to close since you aren&#39;t willing to provide the necessary information needed to help solve the problem."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697554083,"post_id":77309415,"comment_id":136292889,"body_markdown":"The project is way to big in order to be able to code something up that is reproducable. It is heavily integrated with 3rd party APIs and websocket data which produces the content for the table. I know how to work with a basic JTable. I can post all of the code but that is too much for here I believe. There are no performance issues besides when using the searchfield for filtering, that is why I am at least assuming somewhere there might be the issue (hence posting relevant methods).","body":"The project is way to big in order to be able to code something up that is reproducable. It is heavily integrated with 3rd party APIs and websocket data which produces the content for the table. I know how to work with a basic JTable. I can post all of the code but that is too much for here I believe. There are no performance issues besides when using the searchfield for filtering, that is why I am at least assuming somewhere there might be the issue (hence posting relevant methods)."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1697554696,"post_id":77309415,"comment_id":136293044,"body_markdown":"*The project is way to big in order to be able to code something up that is reproducable.* - which is why you create an MRE. *3rd party APIs and websocket data which produces the content for the table.* - which are completely irrelevant to the stated problem. Your problem is filtering. So the MRE just needs hard coded data. Did you read the tutorial??? It has an MRE with hard coded data. Does it cause a problem? Does your real table have more rows of data? Post an MRE that simulates the problem if you want help. We can&#39;t guess the problem since the tutorial shows how this normally works.","body":"<i>The project is way to big in order to be able to code something up that is reproducable.</i> - which is why you create an MRE. <i>3rd party APIs and websocket data which produces the content for the table.</i> - which are completely irrelevant to the stated problem. Your problem is filtering. So the MRE just needs hard coded data. Did you read the tutorial??? It has an MRE with hard coded data. Does it cause a problem? Does your real table have more rows of data? Post an MRE that simulates the problem if you want help. We can&#39;t guess the problem since the tutorial shows how this normally works."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697554754,"post_id":77309415,"comment_id":136293061,"body_markdown":"Ok I will do thank you","body":"Ok I will do thank you"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1697554788,"post_id":77309415,"comment_id":136293068,"body_markdown":"I specifically stated the MRE should be done with default renderers and the only update you make is to include the renderer code??? Again the point of the MRE is to remove possible problem code and use default classes. If the MRE works as expected then you start to add back in custom classes to see if they cause the issue.","body":"I specifically stated the MRE should be done with default renderers and the only update you make is to include the renderer code??? Again the point of the MRE is to remove possible problem code and use default classes. If the MRE works as expected then you start to add back in custom classes to see if they cause the issue."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697555082,"post_id":77309415,"comment_id":136293131,"body_markdown":"Originally the table holds arround 500 objects. I tested the application with only 50 data objects inside the table and the filtering is very smooth. So must be the amount of data that is driving the application to be unresponsive.","body":"Originally the table holds arround 500 objects. I tested the application with only 50 data objects inside the table and the filtering is very smooth. So must be the amount of data that is driving the application to be unresponsive."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697559712,"post_id":77309415,"comment_id":136294027,"body_markdown":"I modified the filter example from the tutorial link I provided to contain 500 rows of data. The filtering is immediate for me.","body":"I modified the filter example from the tutorial link I provided to contain 500 rows of data. The filtering is immediate for me."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697572751,"post_id":77309415,"comment_id":136296091,"body_markdown":"the tutorials does not seem to include any usages of document listeners tho","body":"the tutorials does not seem to include any usages of document listeners tho"},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697574388,"post_id":77309415,"comment_id":136296316,"body_markdown":"I gave an example that works with a documentlistener, the tutorial does not use any documentlistener. Thank you, you are not obligated to participate on this post.","body":"I gave an example that works with a documentlistener, the tutorial does not use any documentlistener. Thank you, you are not obligated to participate on this post."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697575163,"post_id":77309415,"comment_id":136296441,"body_markdown":"I did not see the small link refering the java example which then contained the documentlistener. I used that code and everything seems to work fine. Updated the post with the solution. Thank you. I still dont know the difference between my initial code tho, everything seemed very similar.","body":"I did not see the small link refering the java example which then contained the documentlistener. I used that code and everything seems to work fine. Updated the post with the solution. Thank you. I still dont know the difference between my initial code tho, everything seemed very similar."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697585883,"post_id":77309415,"comment_id":136297585,"body_markdown":"*I gave an example that works with a documentlistener,* - no you didn&#39;t. You did NOT post any code that we can copy/paste/compile/test to see the described behaviour. *you are not obligated to participate* Its not about me participating. Its about you participating. Everybody who attempts to answer questions donates their time to help others. The least you can do is create a proper MRE with each question to verify that you indeed do have a problem and are not making a careless mistake. The MRE gives us all the information we need to attempt to solve the problem.","body":"<i>I gave an example that works with a documentlistener,</i> - no you didn&#39;t. You did NOT post any code that we can copy/paste/compile/test to see the described behaviour. <i>you are not obligated to participate</i> Its not about me participating. Its about you participating. Everybody who attempts to answer questions donates their time to help others. The least you can do is create a proper MRE with each question to verify that you indeed do have a problem and are not making a careless mistake. The MRE gives us all the information we need to attempt to solve the problem."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697550692,"creation_date":1697550692,"answer_id":77309600,"question_id":77309415,"body_markdown":"Try doing the work on a different thread to the main UI thread. \r\n\r\nEg:\r\n\r\n```java\r\nprivate void initListener() {\r\n    Runnable task = () -&gt; {\r\n\t\tString text = searchField.getText();\r\n\t\tif (text.trim().length() == 0) {\r\n\t\t\ttable.getRowSorter().setRowFilter(null);\r\n\t\t} else {\r\n\t\t\ttable.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\r\n\t\t}\r\n\t\ttable.repaint();\r\n    };\r\n    this.searchField.getDocument().addDocumentListener(new DocumentListener() {\r\n        public void changedUpdate(DocumentEvent e) {\r\n\t\t\tSwingUtilities.invokeLater(task);\r\n        }\r\n\r\n        public void removeUpdate(DocumentEvent e) {\r\n\t\t\tSwingUtilities.invokeLater(task);\r\n        }\r\n\r\n        public void insertUpdate(DocumentEvent e) {\r\n\t\t\tSwingUtilities.invokeLater(task);\r\n        }\r\n    });\t\r\n}\r\n```\t","title":"Filtering JTable using JTextField and DocumentListener very unresponsive and laggy","body":"<p>Try doing the work on a different thread to the main UI thread.</p>\n<p>Eg:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void initListener() {\n    Runnable task = () -&gt; {\n        String text = searchField.getText();\n        if (text.trim().length() == 0) {\n            table.getRowSorter().setRowFilter(null);\n        } else {\n            table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\n        }\n        table.repaint();\n    };\n    this.searchField.getDocument().addDocumentListener(new DocumentListener() {\n        public void changedUpdate(DocumentEvent e) {\n            SwingUtilities.invokeLater(task);\n        }\n\n        public void removeUpdate(DocumentEvent e) {\n            SwingUtilities.invokeLater(task);\n        }\n\n        public void insertUpdate(DocumentEvent e) {\n            SwingUtilities.invokeLater(task);\n        }\n    }); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697574689,"creation_date":1697574689,"answer_id":77312098,"question_id":77309415,"body_markdown":"It’s a good idea to wait until the user pauses their typing before updating your row filter, instead of updating the filter right away for every document change.  You can do this using a [javax.swing.Timer](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/Timer.html):\r\n\r\n    this.searchField.getDocument().addDocumentListener(new DocumentListener() {\r\n        private final Timer updater = new Timer(250, e -&gt; {\r\n            String text = searchField.getText();\r\n            if (text.trim().length() == 0) {\r\n                table.getRowSorter().setRowFilter(null);\r\n            } else {\r\n                table.getRowSorter().setRowFilter(\r\n                    RowFilter.regexFilter(&quot;(?i)&quot; + Pattern.quote(text)));\r\n            }\r\n        });\r\n\r\n        public void changedUpdate(DocumentEvent e) {\r\n            updater.restart();\r\n        }\r\n\r\n        public void removeUpdate(DocumentEvent e) {\r\n            updater.restart();\r\n        }\r\n\r\n        public void insertUpdate(DocumentEvent e) {\r\n            updater.restart();\r\n        }\r\n    });\r\n","title":"Filtering JTable using JTextField and DocumentListener very unresponsive and laggy","body":"<p>It’s a good idea to wait until the user pauses their typing before updating your row filter, instead of updating the filter right away for every document change.  You can do this using a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/Timer.html\" rel=\"nofollow noreferrer\">javax.swing.Timer</a>:</p>\n<pre><code>this.searchField.getDocument().addDocumentListener(new DocumentListener() {\n    private final Timer updater = new Timer(250, e -&gt; {\n        String text = searchField.getText();\n        if (text.trim().length() == 0) {\n            table.getRowSorter().setRowFilter(null);\n        } else {\n            table.getRowSorter().setRowFilter(\n                RowFilter.regexFilter(&quot;(?i)&quot; + Pattern.quote(text)));\n        }\n    });\n\n    public void changedUpdate(DocumentEvent e) {\n        updater.restart();\n    }\n\n    public void removeUpdate(DocumentEvent e) {\n        updater.restart();\n    }\n\n    public void insertUpdate(DocumentEvent e) {\n        updater.restart();\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1697575197,"creation_date":1697549283,"question_id":77309415,"body_markdown":"I have an application that holds data inside a JTable Component. I am filtering the table based on text I enter inside a JTextField that has a DocumentListener attached. For some reason, the responsiveness of that filter is very slow. Whenever I type a new character inside the textfield, the application seems to freeze for a bit. Is there any way I can improove this or maybe I am doing it wrong after all? Initially I thought it is due to the fact that I have several custom Renderers attached which could have deceased performance, but after commenting them all out there is still no change noticeable so I can rule that out.\r\n\r\nThis is where I create and attach the listener.\r\n\r\n    private void initListener() {\r\n        this.searchField.getDocument().addDocumentListener(new DocumentListener() {\r\n            public void changedUpdate(DocumentEvent e) {\r\n                String text = searchField.getText();\r\n                if (text.trim().length() == 0) {\r\n                    table.getRowSorter().setRowFilter(null);\r\n                } else {\r\n                    table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\r\n                }\r\n                table.repaint();\r\n            }\r\n\r\n            public void removeUpdate(DocumentEvent e) {\r\n                String text = searchField.getText();\r\n                if (text.trim().length() == 0) {\r\n                    table.getRowSorter().setRowFilter(null);\r\n                } else {\r\n                    table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\r\n                }\r\n            }\r\n\r\n            public void insertUpdate(DocumentEvent e) {\r\n                String text = searchField.getText();\r\n                if (text.trim().length() == 0) {\r\n                    table.getRowSorter().setRowFilter(null);\r\n                } else {\r\n                    table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\r\n                }\r\n            }\r\n        });\r\n\r\n\r\nThis is my Table class configuration\r\n\r\n        private void initializeUI() {\r\n        this.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);\r\n        this.getColumn(&quot;INTERVAL&quot;).setPreferredWidth(20);\r\n    }\r\n\r\n    private void setCustomRowSorter() {\r\n        this.rowSorter = new TableRowSorter&lt;&gt;(model);\r\n        this.setRowSorter(rowSorter);\r\n\r\n    }\r\n    private void setTableCellRenderers() {\r\n        this.setDefaultRenderer(Object.class, new DefaultTickerTableRenderer());\r\n        this.getColumnModel().getColumn(6).setCellRenderer(new RSICellRenderer());\r\n        this.getColumnModel().getColumn(7).setCellRenderer(new SMACellRenderer());\r\n        this.getColumnModel().getColumn(8).setCellRenderer(new SMACellRenderer());\r\n        this.getColumnModel().getColumn(9).setCellRenderer(new SMACellRenderer());\r\n    }\r\n\r\nIn case of relevance, here are the custom CellRenderers used by this table. Removing them does not seem to improve performance.\r\n\r\n    public class DefaultTickerTableRenderer extends DefaultTableCellRenderer {\r\n    private final JCheckBox ckb = new JCheckBox();\r\n\r\n    public DefaultTickerTableRenderer() {\r\n        setOpaque(true); //MUST do this for background to show up.\r\n    }\r\n\r\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n        JComponent c = (JComponent) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n        c.setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\r\n        if (!isSelected) {\r\n            if (row % 2 == 0) {\r\n                c.setBackground(AppColors.TICKER_TABLE_DEFAULT_BG);\r\n            } else {\r\n                c.setBackground(AppColors.TICKERTABLE_STRIPE_BG);\r\n            }\r\n        }\r\n        return c;\r\n    }\r\n    }\r\n\r\n    public class SMACellRenderer extends DefaultTableCellRenderer {\r\n    private Market market;\r\n\r\n    public SMACellRenderer() {\r\n        setOpaque(true);\r\n    }\r\n\r\n    @Override\r\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n        setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\r\n        float closePrice = Float.parseFloat(table.getModel().getValueAt(row, 5).toString());\r\n        float smaValue = Float.parseFloat(value.toString());\r\n        if (smaValue &lt; closePrice) {\r\n            setBackground(AppColors.TICKERTABLE_GREEN);\r\n        } else if (smaValue &gt; closePrice) {\r\n            setBackground(AppColors.TICKERTABLE_RED);\r\n        } else {\r\n            setBackground(AppColors.TICKERTABLE_NEUTRAL);\r\n        }\r\n        if (isSelected) {\r\n            setBackground(table.getSelectionBackground());\r\n        }\r\n        setText(value.toString());\r\n        return this;\r\n    }\r\n    }\r\n\r\n    public class RSICellRenderer extends DefaultTableCellRenderer {\r\n    private Market market;\r\n\r\n    public RSICellRenderer() {\r\n        setOpaque(true);\r\n    }\r\n\r\n    @Override\r\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n        setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\r\n        float rsiValue = Float.parseFloat(value.toString());\r\n        if (rsiValue &lt; TechnicalAnalytics.RSI_OVERSOLD_THRESHOLD) {\r\n            setBackground(AppColors.TICKERTABLE_GREEN);\r\n        } else if (rsiValue &gt; TechnicalAnalytics.RSI_OVERBOUGHT_THRESHOLD) {\r\n            setBackground(AppColors.TICKERTABLE_RED);\r\n        } else {\r\n            setBackground(AppColors.TICKERTABLE_NEUTRAL);\r\n        }\r\n        if (isSelected) {\r\n            setBackground(table.getSelectionBackground());\r\n        }\r\n        setText(value.toString());\r\n        return this;\r\n    }\r\n    }\r\n\r\nSolution\r\nGot it to work by using this approach.\r\n\r\n     private void initListener() {\r\n        Runnable task = () -&gt; {\r\n            String text = searchField.getText();\r\n            if (text.trim().length() == 0) {\r\n                table.getRowSorter().setRowFilter(null);\r\n            } else {\r\n                table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\r\n            }\r\n        };\r\n\r\n        searchField.getDocument().addDocumentListener(\r\n                new DocumentListener() {\r\n                    public void changedUpdate(DocumentEvent e) {\r\n                        newFilter();\r\n                    }\r\n\r\n                    public void insertUpdate(DocumentEvent e) {\r\n                        newFilter();\r\n                    }\r\n\r\n                    public void removeUpdate(DocumentEvent e) {\r\n                        newFilter();\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void newFilter() {\r\n        RowFilter&lt;TickerTableModel, Object&gt; rf = null;\r\n        try {\r\n            rf = RowFilter.regexFilter(searchField.getText(), 0);\r\n        } catch (java.util.regex.PatternSyntaxException e) {\r\n            return;\r\n        }\r\n        table.getRowSorter().setRowFilter(rf);\r\n    }","title":"Filtering JTable using JTextField and DocumentListener very unresponsive and laggy","body":"<p>I have an application that holds data inside a JTable Component. I am filtering the table based on text I enter inside a JTextField that has a DocumentListener attached. For some reason, the responsiveness of that filter is very slow. Whenever I type a new character inside the textfield, the application seems to freeze for a bit. Is there any way I can improove this or maybe I am doing it wrong after all? Initially I thought it is due to the fact that I have several custom Renderers attached which could have deceased performance, but after commenting them all out there is still no change noticeable so I can rule that out.</p>\n<p>This is where I create and attach the listener.</p>\n<pre><code>private void initListener() {\n    this.searchField.getDocument().addDocumentListener(new DocumentListener() {\n        public void changedUpdate(DocumentEvent e) {\n            String text = searchField.getText();\n            if (text.trim().length() == 0) {\n                table.getRowSorter().setRowFilter(null);\n            } else {\n                table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\n            }\n            table.repaint();\n        }\n\n        public void removeUpdate(DocumentEvent e) {\n            String text = searchField.getText();\n            if (text.trim().length() == 0) {\n                table.getRowSorter().setRowFilter(null);\n            } else {\n                table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\n            }\n        }\n\n        public void insertUpdate(DocumentEvent e) {\n            String text = searchField.getText();\n            if (text.trim().length() == 0) {\n                table.getRowSorter().setRowFilter(null);\n            } else {\n                table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\n            }\n        }\n    });\n</code></pre>\n<p>This is my Table class configuration</p>\n<pre><code>    private void initializeUI() {\n    this.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);\n    this.getColumn(&quot;INTERVAL&quot;).setPreferredWidth(20);\n}\n\nprivate void setCustomRowSorter() {\n    this.rowSorter = new TableRowSorter&lt;&gt;(model);\n    this.setRowSorter(rowSorter);\n\n}\nprivate void setTableCellRenderers() {\n    this.setDefaultRenderer(Object.class, new DefaultTickerTableRenderer());\n    this.getColumnModel().getColumn(6).setCellRenderer(new RSICellRenderer());\n    this.getColumnModel().getColumn(7).setCellRenderer(new SMACellRenderer());\n    this.getColumnModel().getColumn(8).setCellRenderer(new SMACellRenderer());\n    this.getColumnModel().getColumn(9).setCellRenderer(new SMACellRenderer());\n}\n</code></pre>\n<p>In case of relevance, here are the custom CellRenderers used by this table. Removing them does not seem to improve performance.</p>\n<pre><code>public class DefaultTickerTableRenderer extends DefaultTableCellRenderer {\nprivate final JCheckBox ckb = new JCheckBox();\n\npublic DefaultTickerTableRenderer() {\n    setOpaque(true); //MUST do this for background to show up.\n}\n\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n    JComponent c = (JComponent) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n    c.setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\n    if (!isSelected) {\n        if (row % 2 == 0) {\n            c.setBackground(AppColors.TICKER_TABLE_DEFAULT_BG);\n        } else {\n            c.setBackground(AppColors.TICKERTABLE_STRIPE_BG);\n        }\n    }\n    return c;\n}\n}\n\npublic class SMACellRenderer extends DefaultTableCellRenderer {\nprivate Market market;\n\npublic SMACellRenderer() {\n    setOpaque(true);\n}\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n    setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\n    float closePrice = Float.parseFloat(table.getModel().getValueAt(row, 5).toString());\n    float smaValue = Float.parseFloat(value.toString());\n    if (smaValue &lt; closePrice) {\n        setBackground(AppColors.TICKERTABLE_GREEN);\n    } else if (smaValue &gt; closePrice) {\n        setBackground(AppColors.TICKERTABLE_RED);\n    } else {\n        setBackground(AppColors.TICKERTABLE_NEUTRAL);\n    }\n    if (isSelected) {\n        setBackground(table.getSelectionBackground());\n    }\n    setText(value.toString());\n    return this;\n}\n}\n\npublic class RSICellRenderer extends DefaultTableCellRenderer {\nprivate Market market;\n\npublic RSICellRenderer() {\n    setOpaque(true);\n}\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n    setBorder(new MatteBorder(0, 0, 1, 0, Color.BLACK));\n    float rsiValue = Float.parseFloat(value.toString());\n    if (rsiValue &lt; TechnicalAnalytics.RSI_OVERSOLD_THRESHOLD) {\n        setBackground(AppColors.TICKERTABLE_GREEN);\n    } else if (rsiValue &gt; TechnicalAnalytics.RSI_OVERBOUGHT_THRESHOLD) {\n        setBackground(AppColors.TICKERTABLE_RED);\n    } else {\n        setBackground(AppColors.TICKERTABLE_NEUTRAL);\n    }\n    if (isSelected) {\n        setBackground(table.getSelectionBackground());\n    }\n    setText(value.toString());\n    return this;\n}\n}\n</code></pre>\n<p>Solution\nGot it to work by using this approach.</p>\n<pre><code> private void initListener() {\n    Runnable task = () -&gt; {\n        String text = searchField.getText();\n        if (text.trim().length() == 0) {\n            table.getRowSorter().setRowFilter(null);\n        } else {\n            table.getRowSorter().setRowFilter(RowFilter.regexFilter(&quot;(?i)&quot; + text));\n        }\n    };\n\n    searchField.getDocument().addDocumentListener(\n            new DocumentListener() {\n                public void changedUpdate(DocumentEvent e) {\n                    newFilter();\n                }\n\n                public void insertUpdate(DocumentEvent e) {\n                    newFilter();\n                }\n\n                public void removeUpdate(DocumentEvent e) {\n                    newFilter();\n                }\n            });\n}\n\nprivate void newFilter() {\n    RowFilter&lt;TickerTableModel, Object&gt; rf = null;\n    try {\n        rf = RowFilter.regexFilter(searchField.getText(), 0);\n    } catch (java.util.regex.PatternSyntaxException e) {\n        return;\n    }\n    table.getRowSorter().setRowFilter(rf);\n}\n</code></pre>\n"},{"tags":["java","spring","jar","executable-jar"],"answers":[{"tags":[],"owner":{"account_id":6966097,"reputation":183,"user_id":5344065,"display_name":"Sidnei Bernardo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1601142091,"creation_date":1601142091,"answer_id":64080777,"question_id":64080705,"body_markdown":"You can activate profile through **command line** argument. In your trying, you are defining the active profile after the name of the jar. You need to provide the program argument before the name of the jar you are running.\r\n\r\n```bash\r\njava -jar -Dspring.profiles.active=dev  sample.jar\r\n```\r\n\r\n\r\nAn alternative way to set the active profile is to create a `application.properties` file with the following property:\r\n\r\n```properties\r\nspring.profiles.active=prod\r\n\r\n```","title":"Run Spring Boot JAR with predefined profile","body":"<p>You can activate profile through <strong>command line</strong> argument. In your trying, you are defining the active profile after the name of the jar. You need to provide the program argument before the name of the jar you are running.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>java -jar -Dspring.profiles.active=dev  sample.jar\n</code></pre>\n<p>An alternative way to set the active profile is to create a <code>application.properties</code> file with the following property:</p>\n<pre><code>spring.profiles.active=prod\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":929792,"reputation":3142,"user_id":959876,"display_name":"moldovean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697574540,"creation_date":1697574540,"answer_id":77312083,"question_id":64080705,"body_markdown":"With Spring-Boot 3+ and JDK 21 \r\n\r\n`java -jar  .\\path\\to\\jar\\app.jar --spring.profiles.active=dev`","title":"Run Spring Boot JAR with predefined profile","body":"<p>With Spring-Boot 3+ and JDK 21</p>\n<p><code>java -jar  .\\path\\to\\jar\\app.jar --spring.profiles.active=dev</code></p>\n"}],"owner":{"account_id":17071207,"reputation":401,"user_id":12351944,"display_name":"big_OS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9043,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697574540,"creation_date":1601141733,"question_id":64080705,"body_markdown":"I&#39;m trying to run my JAR file with the `java -jar sample.jar` command and I&#39;m using `application.yml` configuration file with the following setup\r\n```yml\r\nspring:\r\n  profiles:\r\n    active:\r\n      - dev\r\n---\r\nserver:\r\n  port: 8081\r\nspring:\r\n  profiles: dev\r\n---\r\nserver:\r\n  port: 8082\r\nspring:\r\n  profiles: test\r\n```\r\nBut the application doesn&#39;t recognize the profile giving back the information of  \r\n`No active profile set, falling back to default profiles: default` and setting up the port to default 8080  \r\n\r\nI tried things like  \r\n`java -jar sample.jar -Drun.jvmArguments=-Dspring.profiles.active=dev` or  \r\n`java -jar sample.jar -Dspring.profiles.active=dev`  \r\n\r\nIn my `pom.xml` file the only change I made was adding `&lt;packaging&gt;jar&lt;/packaging&gt;` property.\r\n\r\nFrom what I&#39;ve learned maven profiles are completely different things and shouldn&#39;t influence spring profiles.\r\n\r\nI don&#39;t know where to look for the problem as when I start the app by *Run* button in Intellij IDEA it works perfectly and recognizes every profile set up as active.  \r\n\r\nThe actual question here is **how to set up default profile to run while building an artifact** so there&#39;s no need to place extra flags in the terminal command running the jar.\r\n\r\nI know there&#39;s a lot of questions like mine but most of their accepted answers doesn&#39;t work in my case and the rest is unanswered. If you know what might be an issue here, please let me know. Thank you in advance for any help! ","title":"Run Spring Boot JAR with predefined profile","body":"<p>I'm trying to run my JAR file with the <code>java -jar sample.jar</code> command and I'm using <code>application.yml</code> configuration file with the following setup</p>\n<pre class=\"lang-yml prettyprint-override\"><code>spring:\n  profiles:\n    active:\n      - dev\n---\nserver:\n  port: 8081\nspring:\n  profiles: dev\n---\nserver:\n  port: 8082\nspring:\n  profiles: test\n</code></pre>\n<p>But the application doesn't recognize the profile giving back the information of<br />\n<code>No active profile set, falling back to default profiles: default</code> and setting up the port to default 8080</p>\n<p>I tried things like<br />\n<code>java -jar sample.jar -Drun.jvmArguments=-Dspring.profiles.active=dev</code> or<br />\n<code>java -jar sample.jar -Dspring.profiles.active=dev</code></p>\n<p>In my <code>pom.xml</code> file the only change I made was adding <code>&lt;packaging&gt;jar&lt;/packaging&gt;</code> property.</p>\n<p>From what I've learned maven profiles are completely different things and shouldn't influence spring profiles.</p>\n<p>I don't know where to look for the problem as when I start the app by <em>Run</em> button in Intellij IDEA it works perfectly and recognizes every profile set up as active.</p>\n<p>The actual question here is <strong>how to set up default profile to run while building an artifact</strong> so there's no need to place extra flags in the terminal command running the jar.</p>\n<p>I know there's a lot of questions like mine but most of their accepted answers doesn't work in my case and the rest is unanswered. If you know what might be an issue here, please let me know. Thank you in advance for any help!</p>\n"},{"tags":["java","swing","jframe","jfilechooser","disambiguation"],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1370909866,"creation_date":1370906644,"answer_id":17034378,"question_id":17034282,"body_markdown":"Use the result of the appropriate `showDialog` method to determine which button was clicked\r\n\r\n    JFileChooser input = new JFileChooser();\r\n    int result = input.showSaveDialog(this);\r\n    if (result == JFileChooser.APPROVE_OPTION) {\r\n    \tcreateFile();\r\n    } else if (result == JFileChooser.CANCEL_OPTION) {\r\n    \tSystem.out.println(&quot;Cancel was selected&quot;);\r\n    }\r\n\r\nNote: Clicking the `X` button on the `JFileChooser` dialog also triggers the `CANCEL_OPTION`.\r\n\r\nRead [How to Use File Choosers][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html","title":"JFileChooser - regarding the &quot;open&quot; and &quot;cancel&quot; buttons. Java","body":"<p>Use the result of the appropriate <code>showDialog</code> method to determine which button was clicked</p>\n\n<pre><code>JFileChooser input = new JFileChooser();\nint result = input.showSaveDialog(this);\nif (result == JFileChooser.APPROVE_OPTION) {\n    createFile();\n} else if (result == JFileChooser.CANCEL_OPTION) {\n    System.out.println(\"Cancel was selected\");\n}\n</code></pre>\n\n<p>Note: Clicking the <code>X</code> button on the <code>JFileChooser</code> dialog also triggers the <code>CANCEL_OPTION</code>.</p>\n\n<p>Read <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html\">How to Use File Choosers</a></p>\n"},{"tags":[],"owner":{"account_id":10145891,"reputation":706,"user_id":7494059,"display_name":"Peet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697560942,"creation_date":1490211351,"answer_id":42961112,"question_id":17034282,"body_markdown":"When initializing components:\r\n\r\n    fileChooser.addActionListener(new ActionListener() {\r\n        @Override\r\n        public void actionPerformed(ActionEvent evt) {\r\n            fileChooserActionPerformed(evt);\r\n        }\r\n    });\r\n\r\nThe action listener above calls the following method:\r\n\r\n    private void fileChooserActionPerformed(ActionEvent e) {\r\n        if (e.getActionCommand().equals(javax.swing.JFileChooser.APPROVE_SELECTION)) {\r\n            System.out.println(&quot;approve selection&quot;);\r\n        } else if (e.getActionCommand().equals(javax.swing.JFileChooser.CANCEL_SELECTION)) {\r\n            System.out.println(&quot;cancel selection&quot;);\r\n        }\r\n    }\r\n\r\n**NOTE**: a file/folder must be selected for the approve selection to work","title":"JFileChooser - regarding the &quot;open&quot; and &quot;cancel&quot; buttons. Java","body":"<p>When initializing components:</p>\n<pre><code>fileChooser.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent evt) {\n        fileChooserActionPerformed(evt);\n    }\n});\n</code></pre>\n<p>The action listener above calls the following method:</p>\n<pre><code>private void fileChooserActionPerformed(ActionEvent e) {\n    if (e.getActionCommand().equals(javax.swing.JFileChooser.APPROVE_SELECTION)) {\n        System.out.println(&quot;approve selection&quot;);\n    } else if (e.getActionCommand().equals(javax.swing.JFileChooser.CANCEL_SELECTION)) {\n        System.out.println(&quot;cancel selection&quot;);\n    }\n}\n</code></pre>\n<p><strong>NOTE</strong>: a file/folder must be selected for the approve selection to work</p>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697573870,"creation_date":1697573870,"answer_id":77312023,"question_id":17034282,"body_markdown":"In most situations it is sufficient to check for the approve option:\r\n\r\n    JFileChooser input = new JFileChooser();\r\n    if (input.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {\r\n        createFile();\r\n    }\r\n\r\nIf anything else than approve was clicked, you just do not create the file.\r\nThis works for\r\n- showOpenDialog()\r\n- showSaveDialog()\r\n- pretty much any cases of JOptionPane usage\r\n\r\nThere is some exception when you need to check more. Imagine the user quits the application and it pops up a warning that the document is still not saved:\r\n\r\nUnsaved data! Do you want to save? (Yes/No/Cancel)\r\n\r\nIn this case you need to check as you have three different outcomes:\r\n- yes: Save the data and exit\r\n- no: Just exit\r\n- cancel: do not exit\r\n","title":"JFileChooser - regarding the &quot;open&quot; and &quot;cancel&quot; buttons. Java","body":"<p>In most situations it is sufficient to check for the approve option:</p>\n<pre><code>JFileChooser input = new JFileChooser();\nif (input.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {\n    createFile();\n}\n</code></pre>\n<p>If anything else than approve was clicked, you just do not create the file.\nThis works for</p>\n<ul>\n<li>showOpenDialog()</li>\n<li>showSaveDialog()</li>\n<li>pretty much any cases of JOptionPane usage</li>\n</ul>\n<p>There is some exception when you need to check more. Imagine the user quits the application and it pops up a warning that the document is still not saved:</p>\n<p>Unsaved data! Do you want to save? (Yes/No/Cancel)</p>\n<p>In this case you need to check as you have three different outcomes:</p>\n<ul>\n<li>yes: Save the data and exit</li>\n<li>no: Just exit</li>\n<li>cancel: do not exit</li>\n</ul>\n"}],"owner":{"account_id":2533041,"reputation":111,"user_id":2200907,"accept_rate":100,"display_name":"MaCo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35262,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":17034378,"answer_count":3,"score":7,"last_activity_date":1697573870,"creation_date":1370906037,"question_id":17034282,"body_markdown":"I am having some trouble using the JFileChooser. Whenever I run the program if I click the &quot;cancel&quot; button right away without selecting a file it will display &quot;hello&quot; and if I click open, it will not do anything. On other hand, if I select a file and click open it will start to display &quot;Hello&quot; (call the createFile method) and will display &quot;hello&quot; if I click &quot;cancel&quot;.\r\n\r\nMy question is how can I find out which button was clicked and to do a specific thing for each like call the die function when clicked cancel and call the createFile function when open is clicked.\r\n\r\nI was thinking of something like \r\n\r\n    if(e.getSource() == &quot;Something_I_Dont_know&quot;) { do this}\r\n\r\nHere is my code:\r\n\r\n\r\n    \r\n    import java.util.*;\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n\r\n\r\n    public class Grading{\r\n\r\n    public static void main(String[] arg){\r\n\r\n\t new MFrame();\r\n\r\n    }\r\n\r\n\r\n    }// end of class Grading\r\n\r\n    class MFrame extends JFrame{\r\n\r\n\tprivate JCheckBox cum,uc,ucs;\r\n\tprivate JButton calc, clear, exit;\r\n\tprivate ButtonGroup bg;\r\n\tprivate JTextArea display;\r\n\tprivate JFileChooser input;\r\n\t\r\n\tpublic MFrame(){\r\n\t\t\r\n\t\tsetVisible( true );\r\n\t\tsetDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\t\tsetSize(550,550);\r\n\t\t\r\n\t\tinput = new JFileChooser();\r\n\t\tadd( input );\r\n\t\tinput.addActionListener(\r\n\t\t\tnew ActionListener(){\r\n\t\t\t\tpublic void actionPerformed( ActionEvent e ){\r\n\t\t\t\t\t//die();\r\n\t\t\t\t\tcreateFile();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t);\r\n\t\t\r\n\t\tsetLayout( new FlowLayout() );\r\n\t\t\r\n\t\tpack();\r\n\r\n\r\n\t}// end of constructor\r\n\r\n\tpublic double gpa(){\r\n\t return 1.0;\r\n\t}// end of gpa method\r\n\r\n\tpublic void createFile(){\r\n\t\tSystem.out.println(&quot;Hello&quot;);\r\n\t}\r\n\t\r\n\tpublic void die(){\r\n\t\tSystem.exit(0);\r\n\t}\r\n\r\n\r\n}// end of MFRAME CLASS\r\n\r\n\r\n","title":"JFileChooser - regarding the &quot;open&quot; and &quot;cancel&quot; buttons. Java","body":"<p>I am having some trouble using the JFileChooser. Whenever I run the program if I click the \"cancel\" button right away without selecting a file it will display \"hello\" and if I click open, it will not do anything. On other hand, if I select a file and click open it will start to display \"Hello\" (call the createFile method) and will display \"hello\" if I click \"cancel\".</p>\n\n<p>My question is how can I find out which button was clicked and to do a specific thing for each like call the die function when clicked cancel and call the createFile function when open is clicked.</p>\n\n<p>I was thinking of something like </p>\n\n<pre><code>if(e.getSource() == \"Something_I_Dont_know\") { do this}\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>import java.util.*;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\n\npublic class Grading{\n\npublic static void main(String[] arg){\n\n new MFrame();\n\n}\n\n\n}// end of class Grading\n\nclass MFrame extends JFrame{\n\nprivate JCheckBox cum,uc,ucs;\nprivate JButton calc, clear, exit;\nprivate ButtonGroup bg;\nprivate JTextArea display;\nprivate JFileChooser input;\n\npublic MFrame(){\n\n    setVisible( true );\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\n    setSize(550,550);\n\n    input = new JFileChooser();\n    add( input );\n    input.addActionListener(\n        new ActionListener(){\n            public void actionPerformed( ActionEvent e ){\n                //die();\n                createFile();\n            }\n        }\n\n    );\n\n    setLayout( new FlowLayout() );\n\n    pack();\n\n\n}// end of constructor\n\npublic double gpa(){\n return 1.0;\n}// end of gpa method\n\npublic void createFile(){\n    System.out.println(\"Hello\");\n}\n\npublic void die(){\n    System.exit(0);\n}\n</code></pre>\n\n<p>}// end of MFRAME CLASS</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6342341,"reputation":5609,"user_id":4923889,"accept_rate":47,"display_name":"Uma Kanth"},"score":0,"creation_date":1432881499,"post_id":30522700,"comment_id":49119297,"body_markdown":"try using only `this` instead of `MainActivity.this`","body":"try using only <code>this</code> instead of <code>MainActivity.this</code>"},{"owner":{"account_id":6342341,"reputation":5609,"user_id":4923889,"accept_rate":47,"display_name":"Uma Kanth"},"score":0,"creation_date":1432881641,"post_id":30522700,"comment_id":49119372,"body_markdown":"what is the error @Signo","body":"what is the error @Signo"},{"owner":{"account_id":1758390,"reputation":169,"user_id":1606085,"display_name":"Gaurav Gupta"},"score":0,"creation_date":1432883028,"post_id":30522700,"comment_id":49120140,"body_markdown":"Do you want to show AlertDailog from service?","body":"Do you want to show AlertDailog from service?"},{"owner":{"account_id":1758390,"reputation":169,"user_id":1606085,"display_name":"Gaurav Gupta"},"score":0,"creation_date":1432884479,"post_id":30522700,"comment_id":49120903,"body_markdown":"If you want to display Alert from service then you can use my code from below\n\nhttp://stackoverflow.com/questions/30522700/show-an-alertdialog-from-another-activity-android/30523639#30523639","body":"If you want to display Alert from service then you can use my code from below  <a href=\"http://stackoverflow.com/questions/30522700/show-an-alertdialog-from-another-activity-android/30523639#30523639\" title=\"show an alertdialog from another activity android\">stackoverflow.com/questions/30522700/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6342341,"reputation":5609,"user_id":4923889,"accept_rate":47,"display_name":"Uma Kanth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432881623,"creation_date":1432881623,"answer_id":30522781,"question_id":30522700,"body_markdown":"Try using `this` instead of `MainActivity.this`.\r\n\r\n    new AlertDialog.Builder(this)\r\n        .setTitle(&quot;title&quot;)\r\n        .setMessage(&quot;A message?&quot;)\r\n        .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\r\n            public void onClick(DialogInterface dialog, int which) { \r\n                // yes pressed\r\n            }\r\n         })\r\n        .setNegativeButton(android.R.string.no, new DialogInterface.OnClickListener() {\r\n            public void onClick(DialogInterface dialog, int which) { \r\n                // no pressed\r\n            }\r\n         })\r\n        .setIcon(android.R.drawable.ic_dialog_alert)\r\n         .show();","title":"Show an alertDialog from another Activity Android","body":"<p>Try using <code>this</code> instead of <code>MainActivity.this</code>.</p>\n\n<pre><code>new AlertDialog.Builder(this)\n    .setTitle(\"title\")\n    .setMessage(\"A message?\")\n    .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n        public void onClick(DialogInterface dialog, int which) { \n            // yes pressed\n        }\n     })\n    .setNegativeButton(android.R.string.no, new DialogInterface.OnClickListener() {\n        public void onClick(DialogInterface dialog, int which) { \n            // no pressed\n        }\n     })\n    .setIcon(android.R.drawable.ic_dialog_alert)\n     .show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1758390,"reputation":169,"user_id":1606085,"display_name":"Gaurav Gupta"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1432884417,"creation_date":1432884417,"answer_id":30523639,"question_id":30522700,"body_markdown":"If you are trying to display Alert from your running service then you have to call new custom alert dialog class that will display alert whether you are on any activity.\r\n\r\n        public class AlertDialogActivity extends Activity{\r\n    \t@Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            displayAlert();\r\n        }\r\n    \r\n        private void displayAlert()\r\n        {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n            builder.setInverseBackgroundForced(true);\r\n            builder.setMessage(&quot;You Message here&quot;).setCancelable(\r\n                false).setPositiveButton(&quot;OK&quot;,\r\n                new DialogInterface.OnClickListener() {\r\n                    public void onClick(DialogInterface dialog, int id) {\r\n                        \r\n                    \t// code here\r\n                        AlertDialogActivity.this.finish();                  \r\n                        dialog.cancel();                 \r\n                    }\r\n                }).setNegativeButton(&quot;Close&quot;,\r\n                new DialogInterface.OnClickListener() {\r\n                    public void onClick(DialogInterface dialog, int id) {\r\n                    \t\r\n        \t\t        AlertDialogActivity.this.finish();\r\n                    \tdialog.cancel();\r\n                    }\r\n                });\r\n            AlertDialog alert = builder.create();\r\n            alert.show();\r\n        }\r\n    \t\r\n    }\r\n\r\n\r\nAnd call this class from your service to display alert.\r\n\r\n \r\n\r\n       Intent dialogIntent = new Intent(getApplicationContext(), AlertDialogActivity.class);\r\n    getApplication().startActivity(dialogIntent);\r\n\r\n\r\n\r\n\r\n\r\n ","title":"Show an alertDialog from another Activity Android","body":"<p>If you are trying to display Alert from your running service then you have to call new custom alert dialog class that will display alert whether you are on any activity.</p>\n\n<pre><code>    public class AlertDialogActivity extends Activity{\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        displayAlert();\n    }\n\n    private void displayAlert()\n    {\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\n        builder.setInverseBackgroundForced(true);\n        builder.setMessage(\"You Message here\").setCancelable(\n            false).setPositiveButton(\"OK\",\n            new DialogInterface.OnClickListener() {\n                public void onClick(DialogInterface dialog, int id) {\n\n                    // code here\n                    AlertDialogActivity.this.finish();                  \n                    dialog.cancel();                 \n                }\n            }).setNegativeButton(\"Close\",\n            new DialogInterface.OnClickListener() {\n                public void onClick(DialogInterface dialog, int id) {\n\n                    AlertDialogActivity.this.finish();\n                    dialog.cancel();\n                }\n            });\n        AlertDialog alert = builder.create();\n        alert.show();\n    }\n\n}\n</code></pre>\n\n<p>And call this class from your service to display alert.</p>\n\n<pre><code>   Intent dialogIntent = new Intent(getApplicationContext(), AlertDialogActivity.class);\ngetApplication().startActivity(dialogIntent);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17099818,"reputation":71,"user_id":12374013,"display_name":"DeadPool"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697573859,"creation_date":1697573859,"answer_id":77312021,"question_id":30522700,"body_markdown":"You&#39;ll need an event bus or a custom skeleton class in order to connect these two. You can create this Bus and initialize in your Main Activity and keep a reference of it. \r\n\r\nYou&#39;ll create register and unregister method in your EventBus class.\r\nTie them to SharedPreference to hold reference.\r\n\r\nWhen you call bus.register() it&#39;ll either create a new instance or return you the already created one.\r\nbus.unregister will unregister the bus (do this when you logout or dont want to use bus anymore)\r\n\r\n\r\nIn your Activity A (The UI Activity)\r\nRegister your bus (in onResume) and subscribe to the event, lets call it EventShowDialog\r\n\r\n    @Subscribe\r\n    public void showEventDialog(EventShowDialog) event{\r\n    //show your dialog\r\n    }\r\n\r\nIn your main activity, where you&#39;ll initialize your bus, upon your even you just need to post the event\r\n\r\n    bus.post(new EventShowDialog)\r\n\r\nEventShowDialog can be an empty class that you&#39;ll create. I&#39;ve tried and tested this and it works as expected. Please reach out for more info if you get stuck somewhere. ","title":"Show an alertDialog from another Activity Android","body":"<p>You'll need an event bus or a custom skeleton class in order to connect these two. You can create this Bus and initialize in your Main Activity and keep a reference of it.</p>\n<p>You'll create register and unregister method in your EventBus class.\nTie them to SharedPreference to hold reference.</p>\n<p>When you call bus.register() it'll either create a new instance or return you the already created one.\nbus.unregister will unregister the bus (do this when you logout or dont want to use bus anymore)</p>\n<p>In your Activity A (The UI Activity)\nRegister your bus (in onResume) and subscribe to the event, lets call it EventShowDialog</p>\n<pre><code>@Subscribe\npublic void showEventDialog(EventShowDialog) event{\n//show your dialog\n}\n</code></pre>\n<p>In your main activity, where you'll initialize your bus, upon your even you just need to post the event</p>\n<pre><code>bus.post(new EventShowDialog)\n</code></pre>\n<p>EventShowDialog can be an empty class that you'll create. I've tried and tested this and it works as expected. Please reach out for more info if you get stuck somewhere.</p>\n"}],"owner":{"account_id":4680752,"reputation":6906,"user_id":3789527,"accept_rate":70,"display_name":"LS_"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5634,"favorite_count":0,"down_vote_count":7,"up_vote_count":2,"answer_count":3,"score":-5,"last_activity_date":1697573859,"creation_date":1432881379,"question_id":30522700,"body_markdown":"On my MainActivity I start a service of localization that runs across all of the otheractivities, when an event occurs I need to show an AlertDialog on the current activity but I can&#39;t get it working. this is the code for the alertDialog:\r\n\r\n    AlertDialog.Builder builder = new AlertDialog.Builder(mMainActivity.this);\r\n    \t            \t\tbuilder.setMessage(&quot;test&quot;)\r\n    \t            \t\t   .setCancelable(false)\r\n    \t            \t\t   .setPositiveButton(&quot;ok&quot;, new DialogInterface.OnClickListener() {\r\n    \t            \t\t       public void onClick(DialogInterface dialog, int id) {\r\n    \t            \t\t    \t   Intent intent = new Intent(mMainActivity.this,LocationDetails.class);\r\n    \t            \t\t\t\t\tintent.putExtra(&quot;placeId&quot;,1);\r\n    \t            \t\t\t\t\tstartActivity(intent);\r\n    \r\n    \t            \t\t       }\r\n    \t            \t\t   })\r\n    \t            \t\t   .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\r\n    \t            \t\t       public void onClick(DialogInterface dialog, int id) {\r\n    \t            \t\t    \t   \r\n    \t            \t\t            dialog.cancel();\r\n    \t            \t\t       }\r\n    \t            \t\t   });\r\n    \t            \t\tAlertDialog alert = builder.create();\r\n    \t            \t\talert.show();\r\n\r\nObviously this code only works if i&#39;m on my MainActivity since I create the builder like this:\r\n\r\n    new AlertDialog.Builder(mMainActivity.this);\r\n\r\nIs there a way to create a builder based on the current activity even if it gets created on another one?\r\n\r\n\r\n\r\n**EDIT:**\r\n\r\nI tried with \r\n`AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());`\r\nBut it doesn&#39;t work..","title":"Show an alertDialog from another Activity Android","body":"<p>On my MainActivity I start a service of localization that runs across all of the otheractivities, when an event occurs I need to show an AlertDialog on the current activity but I can't get it working. this is the code for the alertDialog:</p>\n\n<pre><code>AlertDialog.Builder builder = new AlertDialog.Builder(mMainActivity.this);\n                        builder.setMessage(\"test\")\n                           .setCancelable(false)\n                           .setPositiveButton(\"ok\", new DialogInterface.OnClickListener() {\n                               public void onClick(DialogInterface dialog, int id) {\n                                   Intent intent = new Intent(mMainActivity.this,LocationDetails.class);\n                                    intent.putExtra(\"placeId\",1);\n                                    startActivity(intent);\n\n                               }\n                           })\n                           .setNegativeButton(\"cancel\", new DialogInterface.OnClickListener() {\n                               public void onClick(DialogInterface dialog, int id) {\n\n                                    dialog.cancel();\n                               }\n                           });\n                        AlertDialog alert = builder.create();\n                        alert.show();\n</code></pre>\n\n<p>Obviously this code only works if i'm on my MainActivity since I create the builder like this:</p>\n\n<pre><code>new AlertDialog.Builder(mMainActivity.this);\n</code></pre>\n\n<p>Is there a way to create a builder based on the current activity even if it gets created on another one?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I tried with \n<code>AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());</code>\nBut it doesn't work..</p>\n"},{"tags":["java","stream","java-8"],"comments":[{"owner":{"account_id":235528,"reputation":12632,"user_id":502399,"accept_rate":67,"display_name":"Tavian Barnes"},"score":1,"creation_date":1462217084,"post_id":36990053,"comment_id":61534318,"body_markdown":"You&#39;re right, if you don&#39;t close the stream then the file handle won&#39;t ever be closed.","body":"You&#39;re right, if you don&#39;t close the stream then the file handle won&#39;t ever be closed."},{"owner":{"account_id":235528,"reputation":12632,"user_id":502399,"accept_rate":67,"display_name":"Tavian Barnes"},"score":3,"creation_date":1462217136,"post_id":36990053,"comment_id":61534349,"body_markdown":"But, if your process exits, the OS will clean up after it.  I suspect by &quot;timely&quot; they meant &quot;before the end of the process&quot;","body":"But, if your process exits, the OS will clean up after it.  I suspect by &quot;timely&quot; they meant &quot;before the end of the process&quot;"},{"owner":{"account_id":5512516,"reputation":3434,"user_id":4378350,"accept_rate":85,"display_name":"Jan Gassen"},"score":1,"creation_date":1462217349,"post_id":36990053,"comment_id":61534482,"body_markdown":"That might be. Although I find it not very intuitive that you are not supposed to use the stream like that. Also IDEs don&#39;t seem to warn you about this potential resource leak, even though it should be easy to find.","body":"That might be. Although I find it not very intuitive that you are not supposed to use the stream like that. Also IDEs don&#39;t seem to warn you about this potential resource leak, even though it should be easy to find."},{"owner":{"account_id":235528,"reputation":12632,"user_id":502399,"accept_rate":67,"display_name":"Tavian Barnes"},"score":3,"creation_date":1462217495,"post_id":36990053,"comment_id":61534571,"body_markdown":"IDEs don&#39;t warn because almost all `Stream`s don&#39;t need to be closed.  Ideally `Files.list()` would have some annotation like `@CloseTheReturnedStream` that IDEs could understand.","body":"IDEs don&#39;t warn because almost all <code>Stream</code>s don&#39;t need to be closed.  Ideally <code>Files.list()</code> would have some annotation like <code>@CloseTheReturnedStream</code> that IDEs could understand."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1462266977,"post_id":36990053,"comment_id":61553211,"body_markdown":"Your test code assumes that automatic cleanup has to be performed via `finalize()`, but usually, modern code uses `PhantomReference` based cleaners, which are not triggered by `System.runFinalization()`. So even if there is an automatic cleanup, you won’t detect it with your code. But looking at [the implementation](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/sun/nio/fs/UnixDirectoryStream.java) or [its creator](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/sun/nio/fs/UnixFileSystemProvider.java#402) you won’t see a cleaner…","body":"Your test code assumes that automatic cleanup has to be performed via <code>finalize()</code>, but usually, modern code uses <code>PhantomReference</code> based cleaners, which are not triggered by <code>System.runFinalization()</code>. So even if there is an automatic cleanup, you won’t detect it with your code. But looking at <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/sun/nio/fs/UnixDirectoryStream.java\" rel=\"nofollow noreferrer\">the implementation</a> or <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/sun/nio/fs/UnixFileSystemProvider.java#402\" rel=\"nofollow noreferrer\">its creator</a> you won’t see a cleaner…"},{"owner":{"account_id":4353384,"reputation":540,"user_id":3552897,"display_name":"Katharsas"},"score":1,"creation_date":1506582616,"post_id":36990053,"comment_id":79880713,"body_markdown":"After spending 2 days on hunting a related bug, I think the JavaDoc is poor here and needs a clear warning. It indicates, that the stream will be closed at some point, but in a server environment that&#39;s basically &quot;never&#39; until serverapp shutdown.","body":"After spending 2 days on hunting a related bug, I think the JavaDoc is poor here and needs a clear warning. It indicates, that the stream will be closed at some point, but in a server environment that&#39;s basically &quot;never&#39; until serverapp shutdown."}],"answers":[{"tags":[],"owner":{"account_id":4264083,"reputation":6317,"user_id":3487617,"display_name":"Hank D"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1462230782,"creation_date":1462230782,"answer_id":36993051,"question_id":36990053,"body_markdown":"If you close the Stream, `Files.list()` does close the underlying `DirectoryStream` it uses to stream the files, so there should be no resource leak as long as you close the Stream.\r\n\r\nYou can see where the `DirectoryStream` is closed in the source code for `Files.list()` here:\r\n\r\n    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(it, Spliterator.DISTINCT), false)\r\n                        .onClose(asUncheckedRunnable(ds));\r\n\r\nThe key thing to understand is that a `Runnable` is registered with the Stream using `Stream::onClose` that is called when the stream itself is closed.  That Runnable is created by a factory method, `asUncheckedRunnable` that creates a `Runnable` that closes the resource passed into it, translating any `IOException` thrown during the `close()` to an `UncheckedIOException`\r\n\r\nYou can safely assure that the `DirectoryStream` is closed by ensuring the `Stream` is closed like this:\r\n\r\n    try (Stream&lt;Path&gt; files = Files.list(Paths.get(destination))){\r\n        files.forEach(path -&gt; {\r\n             // Do stuff\r\n        });\r\n    }\r\n","title":"Resource leak in Files.list(Path dir) when stream is not explicitly closed?","body":"<p>If you close the Stream, <code>Files.list()</code> does close the underlying <code>DirectoryStream</code> it uses to stream the files, so there should be no resource leak as long as you close the Stream.</p>\n\n<p>You can see where the <code>DirectoryStream</code> is closed in the source code for <code>Files.list()</code> here:</p>\n\n<pre><code>return StreamSupport.stream(Spliterators.spliteratorUnknownSize(it, Spliterator.DISTINCT), false)\n                    .onClose(asUncheckedRunnable(ds));\n</code></pre>\n\n<p>The key thing to understand is that a <code>Runnable</code> is registered with the Stream using <code>Stream::onClose</code> that is called when the stream itself is closed.  That Runnable is created by a factory method, <code>asUncheckedRunnable</code> that creates a <code>Runnable</code> that closes the resource passed into it, translating any <code>IOException</code> thrown during the <code>close()</code> to an <code>UncheckedIOException</code></p>\n\n<p>You can safely assure that the <code>DirectoryStream</code> is closed by ensuring the <code>Stream</code> is closed like this:</p>\n\n<pre><code>try (Stream&lt;Path&gt; files = Files.list(Paths.get(destination))){\n    files.forEach(path -&gt; {\n         // Do stuff\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462286936,"creation_date":1462286936,"answer_id":37007408,"question_id":36990053,"body_markdown":"Regarding the IDE part: Eclipse performs resource leak analysis based on local variables (and explicit resource allocation expressions), so you only have to extract the stream to a local variable:\r\n\r\n    Stream&lt;Path&gt; files =Files.list(Paths.get(destination));\r\n    files.forEach(path -&gt; {\r\n     // To stuff\r\n    });\r\n\r\nThen Eclipse will tell you \r\n\r\n&gt; Resource leak: &#39;files&#39; is never closed\r\n\r\nBehind the scenes the analysis works with a cascade of exceptions:\r\n\r\n 1. All `Closeable`s need closing\r\n 2. `java.util.stream.Stream` (which is Closeable) does **not** need closing\r\n 3. All streams produced by methods in `java.nio.file.Files` **do** need closing\r\n\r\nThis strategy was developed in coordination with the library team when they discussed whether or not `Stream` should be `AutoCloseable`.","title":"Resource leak in Files.list(Path dir) when stream is not explicitly closed?","body":"<p>Regarding the IDE part: Eclipse performs resource leak analysis based on local variables (and explicit resource allocation expressions), so you only have to extract the stream to a local variable:</p>\n\n<pre><code>Stream&lt;Path&gt; files =Files.list(Paths.get(destination));\nfiles.forEach(path -&gt; {\n // To stuff\n});\n</code></pre>\n\n<p>Then Eclipse will tell you </p>\n\n<blockquote>\n  <p>Resource leak: 'files' is never closed</p>\n</blockquote>\n\n<p>Behind the scenes the analysis works with a cascade of exceptions:</p>\n\n<ol>\n<li>All <code>Closeable</code>s need closing</li>\n<li><code>java.util.stream.Stream</code> (which is Closeable) does <strong>not</strong> need closing</li>\n<li>All streams produced by methods in <code>java.nio.file.Files</code> <strong>do</strong> need closing</li>\n</ol>\n\n<p>This strategy was developed in coordination with the library team when they discussed whether or not <code>Stream</code> should be <code>AutoCloseable</code>.</p>\n"},{"tags":[],"owner":{"account_id":8855549,"reputation":11,"user_id":6613440,"display_name":"Sudhir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537946030,"creation_date":1537946030,"answer_id":52512003,"question_id":36990053,"body_markdown":"       List&lt;String&gt; fileList = null;\r\n    \r\n       try (Stream&lt;Path&gt; list = Files.list(Paths.get(path.toString()))) {\r\n       fileList = \r\n         list.filter(Files::isRegularFile).map(Path::toFile).map(File::getAbsolutePath)\r\n    \t\t\t\t\t\t\t\t.collect(Collectors.toList());\r\n       } catch (IOException e) {\r\n    \tlogger.error(&quot;Error occurred while reading email files: &quot;, e);\r\n      }","title":"Resource leak in Files.list(Path dir) when stream is not explicitly closed?","body":"<pre><code>   List&lt;String&gt; fileList = null;\n\n   try (Stream&lt;Path&gt; list = Files.list(Paths.get(path.toString()))) {\n   fileList = \n     list.filter(Files::isRegularFile).map(Path::toFile).map(File::getAbsolutePath)\n                                .collect(Collectors.toList());\n   } catch (IOException e) {\n    logger.error(\"Error occurred while reading email files: \", e);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7353328,"reputation":1,"user_id":6097679,"display_name":"Shreekant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697573656,"creation_date":1697573656,"answer_id":77312004,"question_id":36990053,"body_markdown":"I&#39;ve incurred same issue during file processing, what worked out is try-with-resource, follow below snippet if someone is still struggling:\r\n\r\n    \t\ttry(Stream&lt;Path&gt; files = Files.list(Paths.get(&quot;/some/location/&quot;))){\r\n\t\t\tList&lt;File&gt; allFiles = files.map(Path::toFile).filter(File :: isFile).collect(Collectors.toList());\r\n\t\t\tfor (File file : allFiles) {\r\n\t\t\t\t// complete your file operations\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nThis will ensure resource closure as well as do the file operations efficiently.  ","title":"Resource leak in Files.list(Path dir) when stream is not explicitly closed?","body":"<p>I've incurred same issue during file processing, what worked out is try-with-resource, follow below snippet if someone is still struggling:</p>\n<pre><code>        try(Stream&lt;Path&gt; files = Files.list(Paths.get(&quot;/some/location/&quot;))){\n        List&lt;File&gt; allFiles = files.map(Path::toFile).filter(File :: isFile).collect(Collectors.toList());\n        for (File file : allFiles) {\n            // complete your file operations\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p>This will ensure resource closure as well as do the file operations efficiently.</p>\n"}],"owner":{"account_id":5512516,"reputation":3434,"user_id":4378350,"accept_rate":85,"display_name":"Jan Gassen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13887,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":36993051,"answer_count":4,"score":33,"last_activity_date":1697573656,"creation_date":1462216913,"question_id":36990053,"body_markdown":"I recently wrote a small app that periodically checked the content of a directory. After a while, the app crashed because of too many open file handles. After some debugging, I found the error in the following line:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Files.list(Paths.get(destination)).forEach(path -&gt; {\r\n         // To stuff\r\n    });\r\n\r\nI then checked the javadoc (I probably should have done that earlier) for `Files.list` and found:\r\n\r\n    * &lt;p&gt; The returned stream encapsulates a {@link DirectoryStream}.\r\n    * If timely disposal of file system resources is required, the\r\n    * {@code try}-with-resources construct should be used to ensure that the\r\n    * stream&#39;s {@link Stream#close close} method is invoked after the stream\r\n    * operations are completed\r\n\r\nTo me, &quot;timely disposal&quot; still sounds like the resources are going to be released eventually, before the app quits. I looked through the JDK (1.8.60) code but I wasn&#39;t able to find any hint about the file handles opened by `Files.list` being released again.\r\n\r\nI then created a small app that explicitly calls the garbage collector after using `Files.list` like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    while (true) {\r\n        Files.list(Paths.get(&quot;/&quot;)).forEach(path -&gt; {\r\n          System.out.println(path);\r\n        });\r\n        Thread.sleep(5000);\r\n\r\n        System.gc();\r\n        System.runFinalization();\r\n    }\r\n\r\nWhen I checked the open file handles with `lsof -p &lt;pid&gt;` I could still see the list of open file handles for &quot;/&quot; getting longer and longer.\r\n\r\nMy question now is: Is there any hidden mechanism that should eventually close no longer used open file handles in this scenario? Or are these resources in fact never disposed and the javadoc is a bit euphemistic when talking about &quot;timely disposal of file system resources&quot;?","title":"Resource leak in Files.list(Path dir) when stream is not explicitly closed?","body":"<p>I recently wrote a small app that periodically checked the content of a directory. After a while, the app crashed because of too many open file handles. After some debugging, I found the error in the following line:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Files.list(Paths.get(destination)).forEach(path -&gt; {\n     // To stuff\n});\n</code></pre>\n\n<p>I then checked the javadoc (I probably should have done that earlier) for <code>Files.list</code> and found:</p>\n\n<pre><code>* &lt;p&gt; The returned stream encapsulates a {@link DirectoryStream}.\n* If timely disposal of file system resources is required, the\n* {@code try}-with-resources construct should be used to ensure that the\n* stream's {@link Stream#close close} method is invoked after the stream\n* operations are completed\n</code></pre>\n\n<p>To me, \"timely disposal\" still sounds like the resources are going to be released eventually, before the app quits. I looked through the JDK (1.8.60) code but I wasn't able to find any hint about the file handles opened by <code>Files.list</code> being released again.</p>\n\n<p>I then created a small app that explicitly calls the garbage collector after using <code>Files.list</code> like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>while (true) {\n    Files.list(Paths.get(\"/\")).forEach(path -&gt; {\n      System.out.println(path);\n    });\n    Thread.sleep(5000);\n\n    System.gc();\n    System.runFinalization();\n}\n</code></pre>\n\n<p>When I checked the open file handles with <code>lsof -p &lt;pid&gt;</code> I could still see the list of open file handles for \"/\" getting longer and longer.</p>\n\n<p>My question now is: Is there any hidden mechanism that should eventually close no longer used open file handles in this scenario? Or are these resources in fact never disposed and the javadoc is a bit euphemistic when talking about \"timely disposal of file system resources\"?</p>\n"},{"tags":["java","notifications","exoplayer"],"comments":[{"owner":{"account_id":3455761,"reputation":3269,"user_id":2894324,"display_name":"sdex"},"score":0,"creation_date":1694008609,"post_id":77039284,"comment_id":135834913,"body_markdown":"You need to pass real context, for example to the constructor: public MyMediaNotificationProvider(Context context){ this.context = context; }","body":"You need to pass real context, for example to the constructor: public MyMediaNotificationProvider(Context context){ this.context = context; }"},{"owner":{"account_id":13001732,"reputation":1,"user_id":9397622,"display_name":"Pepsi_34"},"score":0,"creation_date":1694193584,"post_id":77039284,"comment_id":135863938,"body_markdown":"Thank you &quot;sdex&quot;, now the notification is visible. I&#39;ve updated my question with new code. The problem of displaying the notification is solved, but the question about customizing the notification is still on going.","body":"Thank you &quot;sdex&quot;, now the notification is visible. I&#39;ve updated my question with new code. The problem of displaying the notification is solved, but the question about customizing the notification is still on going."}],"answers":[{"tags":[],"owner":{"account_id":3327441,"reputation":534,"user_id":3966095,"display_name":"Dan Davis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697573106,"creation_date":1697573106,"answer_id":77311951,"question_id":77039284,"body_markdown":"First thing, media3 v1.1.1 was made available August 16, 2023.\r\n\r\nTo set the notification icon, adjust your ```DefaultMediaNotificationProvider``` in ```MyMediaNotificationProvider#createNotification()``` to the following:\r\n\r\n    \t\t\t// Create the notification\r\n\t\t\t\tDefaultMediaNotificationProvider defaultMediaNotificationProvider = new DefaultMediaNotificationProvider(mContext);\r\n\t\t\t\tdefaultMediaNotificationProvider.setSmallIcon(R.drawable.blb_reverse_icon);\r\n\t\t\t\tMediaNotification mediaNotification = defaultMediaNotificationProvider\r\n\t\t\t\t\t\t.createNotification(\r\n\t\t\t\t\t\t\t\tmediaSession,\r\n\t\t\t\t\t\t\t\tcustomLayout,\r\n\t\t\t\t\t\t\t\tactionFactory,\r\n\t\t\t\t\t\t\t\tonNotificationChangedCallback);\r\n\r\n\t\t\t\treturn mediaNotification;\r\n\r\nTo set titles and background, you will need to set metadata on your ```MediaItem```(s) using ```setMediaMetadata()```.\r\n\r\n    \tUri artworkUri = Uri.parse(&quot;android.resource://&quot;+mActivity.getPackageName()+&quot;/&quot;+R.drawable.mediasession_bg_artwork);\r\n\t\tUri mp3 = Uri.parse(&quot;android.resource://&quot;+mActivity.getPackageName()+&quot;/&quot;+R.raw.myMedia.mp3);\r\n\t\tMediaItem mediaItem = new MediaItem.Builder()\r\n\t\t\t\t.setMediaMetadata(new MediaMetadata.Builder()\r\n\t\t\t\t\t\t.setTitle(&quot;My Title&quot;)\r\n\t\t\t\t\t\t.setArtist(&quot;My Artist&quot;)\r\n\t\t\t\t\t\t.setArtworkUri(artworkUri)\r\n\t\t\t\t\t\t.build()\r\n\t\t\t\t)\r\n\t\t\t\t.setUri(mp3)\r\n\t\t\t\t.build();\r\n\r\nYou can find more information on MediaItem metadata [Media3 MediaMetadata.Builder][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/androidx/media3/common/MediaMetadata.Builder\r\n\r\nThe trick for the background is in the ```.setArtworkUri()```.","title":"How to modify the auto generated media3 notification ? (java)","body":"<p>First thing, media3 v1.1.1 was made available August 16, 2023.</p>\n<p>To set the notification icon, adjust your <code>DefaultMediaNotificationProvider</code> in <code>MyMediaNotificationProvider#createNotification()</code> to the following:</p>\n<pre><code>            // Create the notification\n            DefaultMediaNotificationProvider defaultMediaNotificationProvider = new DefaultMediaNotificationProvider(mContext);\n            defaultMediaNotificationProvider.setSmallIcon(R.drawable.blb_reverse_icon);\n            MediaNotification mediaNotification = defaultMediaNotificationProvider\n                    .createNotification(\n                            mediaSession,\n                            customLayout,\n                            actionFactory,\n                            onNotificationChangedCallback);\n\n            return mediaNotification;\n</code></pre>\n<p>To set titles and background, you will need to set metadata on your <code>MediaItem</code>(s) using <code>setMediaMetadata()</code>.</p>\n<pre><code>    Uri artworkUri = Uri.parse(&quot;android.resource://&quot;+mActivity.getPackageName()+&quot;/&quot;+R.drawable.mediasession_bg_artwork);\n    Uri mp3 = Uri.parse(&quot;android.resource://&quot;+mActivity.getPackageName()+&quot;/&quot;+R.raw.myMedia.mp3);\n    MediaItem mediaItem = new MediaItem.Builder()\n            .setMediaMetadata(new MediaMetadata.Builder()\n                    .setTitle(&quot;My Title&quot;)\n                    .setArtist(&quot;My Artist&quot;)\n                    .setArtworkUri(artworkUri)\n                    .build()\n            )\n            .setUri(mp3)\n            .build();\n</code></pre>\n<p>You can find more information on MediaItem metadata <a href=\"https://developer.android.com/reference/androidx/media3/common/MediaMetadata.Builder\" rel=\"nofollow noreferrer\">Media3 MediaMetadata.Builder</a></p>\n<p>The trick for the background is in the <code>.setArtworkUri()</code>.</p>\n"}],"owner":{"account_id":13001732,"reputation":1,"user_id":9397622,"display_name":"Pepsi_34"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697573106,"creation_date":1693844019,"question_id":77039284,"body_markdown":"\r\nI build an exoplayer with Media3 1.0.0-rc01 with a mediasession service, like describe in [developer guide](https://developer.android.com/guide/topics/media/session/mediasessionservice)\r\n\r\nIt&#39;s generated a media notification automatically and i want to change colors (text, background) and icon (and more).\r\n\r\nThe guide says : &quot;To provide a custom notification, create a MediaNotification.Provider with DefaultMediaNotificationProvider.Builder or by creating a custom implementation of the provider interface. Add your provider to your MediaSession with setMediaNotificationProvider.&quot;\r\n\r\nSo i created a new class for the provider :\r\n\r\n```\r\npackage myapp;\r\n\r\nimport android.content.Context;\r\nimport android.os.Bundle;\r\nimport androidx.media3.common.util.UnstableApi;\r\nimport androidx.media3.session.CommandButton;\r\nimport androidx.media3.session.DefaultMediaNotificationProvider;\r\nimport androidx.media3.session.MediaNotification;\r\nimport androidx.media3.session.MediaSession;\r\nimport com.google.common.collect.ImmutableList;\r\n\r\n@UnstableApi\r\npublic class MyMediaNotificationProvider implements MediaNotification.Provider {\r\n\r\n    private Context context;\r\n    public MyMediaNotificationProvider(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public MediaNotification createNotification(\r\n            MediaSession mediaSession,\r\n            ImmutableList&lt;CommandButton&gt; customLayout,\r\n            MediaNotification.ActionFactory actionFactory,\r\n            Callback onNotificationChangedCallback) {\r\n\r\n        // Create the notification\r\n        return new DefaultMediaNotificationProvider(context).createNotification(\r\n                mediaSession,\r\n                customLayout,\r\n                actionFactory,\r\n                onNotificationChangedCallback);\r\n    }\r\n\r\n    @Override\r\n    public boolean handleCustomCommand(\r\n            MediaSession session,\r\n            String action,\r\n            Bundle extras) {\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd I added the `setMediaNotificationProvider(new MyMediaNotificationProvider());` in my PlaybackService class, to call the new created class above :\r\n\r\n\r\n```\r\npackage myapp;\r\n\r\nimport android.net.Uri;\r\nimport androidx.media3.common.MediaItem;\r\nimport androidx.media3.common.util.UnstableApi;\r\nimport androidx.media3.exoplayer.ExoPlayer;\r\nimport androidx.media3.session.MediaSession;\r\nimport androidx.media3.session.MediaSessionService;\r\n\r\n@UnstableApi public class PlaybackService extends MediaSessionService {\r\n    private MediaSession mediaSession = null;\r\n\r\n    @Override\r\n    public MediaSession onGetSession(MediaSession.ControllerInfo controllerInfo) {\r\n        // If desired, validate the controller before returning the media session\r\n        return mediaSession;\r\n    }\r\n\r\n    // Create your Player and MediaSession in the onCreate lifecycle event\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        // Create the player and the mediasession\r\n        ExoPlayer player = new ExoPlayer.Builder(this).build();\r\n        mediaSession = new MediaSession.Builder(this, player).build();\r\n\r\n        // Build the media item.\r\n        Uri mp3 = Uri.parse(&quot;android.resource://myapp/raw/mysoundtoplay&quot;);\r\n        MediaItem mediaItem = MediaItem.fromUri(mp3);\r\n        // Set the media item to be played.\r\n        player.setMediaItem(mediaItem);\r\n        // loop mode\r\n        player.setRepeatMode(player.REPEAT_MODE_ALL);\r\n        // Prepare the player.\r\n        player.prepare();\r\n        // Play\r\n        player.setPlayWhenReady(true);\r\n\r\n        // CALL MY NEW CLASS TO CREATE NOTIFICATION\r\n        Context context = getApplicationContext(); // context must be passed to class\r\n        setMediaNotificationProvider(new MyMediaNotificationProvider(context));\r\n\r\n    }\r\n\r\n    // Remember to release the player and media session in onDestroy\r\n    @Override\r\n    public void onDestroy() {\r\n        mediaSession.getPlayer().release();\r\n        mediaSession.release();\r\n        mediaSession = null;\r\n        super.onDestroy();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe app is doing fine (sound is playing) and the notification is visible\r\n\r\nThe [androidx migration guide](https://developer.android.com/guide/topics/media/media3/getting-started/migration-guide) says &quot;An app can customize the notification by setting a custom MediaNotification.Provider in onCreate() that replaces the DefaultMediaNotificationProvider. The MediaLibraryService then takes care of starting the service in the foreground as required.\r\nBy overriding MediaLibraryService.updateNotification() an app can further take full ownership of posting a notification and starting/stopping the service in the foreground as required.&quot;\r\n\r\nAnyone can help me customizing the notification (text, color, icon...) ?\r\n\r\nThanks","title":"How to modify the auto generated media3 notification ? (java)","body":"<p>I build an exoplayer with Media3 1.0.0-rc01 with a mediasession service, like describe in <a href=\"https://developer.android.com/guide/topics/media/session/mediasessionservice\" rel=\"nofollow noreferrer\">developer guide</a></p>\n<p>It's generated a media notification automatically and i want to change colors (text, background) and icon (and more).</p>\n<p>The guide says : &quot;To provide a custom notification, create a MediaNotification.Provider with DefaultMediaNotificationProvider.Builder or by creating a custom implementation of the provider interface. Add your provider to your MediaSession with setMediaNotificationProvider.&quot;</p>\n<p>So i created a new class for the provider :</p>\n<pre><code>package myapp;\n\nimport android.content.Context;\nimport android.os.Bundle;\nimport androidx.media3.common.util.UnstableApi;\nimport androidx.media3.session.CommandButton;\nimport androidx.media3.session.DefaultMediaNotificationProvider;\nimport androidx.media3.session.MediaNotification;\nimport androidx.media3.session.MediaSession;\nimport com.google.common.collect.ImmutableList;\n\n@UnstableApi\npublic class MyMediaNotificationProvider implements MediaNotification.Provider {\n\n    private Context context;\n    public MyMediaNotificationProvider(Context context) {\n        this.context = context;\n    }\n\n    @Override\n    public MediaNotification createNotification(\n            MediaSession mediaSession,\n            ImmutableList&lt;CommandButton&gt; customLayout,\n            MediaNotification.ActionFactory actionFactory,\n            Callback onNotificationChangedCallback) {\n\n        // Create the notification\n        return new DefaultMediaNotificationProvider(context).createNotification(\n                mediaSession,\n                customLayout,\n                actionFactory,\n                onNotificationChangedCallback);\n    }\n\n    @Override\n    public boolean handleCustomCommand(\n            MediaSession session,\n            String action,\n            Bundle extras) {\n        return false;\n    }\n\n}\n</code></pre>\n<p>And I added the <code>setMediaNotificationProvider(new MyMediaNotificationProvider());</code> in my PlaybackService class, to call the new created class above :</p>\n<pre><code>package myapp;\n\nimport android.net.Uri;\nimport androidx.media3.common.MediaItem;\nimport androidx.media3.common.util.UnstableApi;\nimport androidx.media3.exoplayer.ExoPlayer;\nimport androidx.media3.session.MediaSession;\nimport androidx.media3.session.MediaSessionService;\n\n@UnstableApi public class PlaybackService extends MediaSessionService {\n    private MediaSession mediaSession = null;\n\n    @Override\n    public MediaSession onGetSession(MediaSession.ControllerInfo controllerInfo) {\n        // If desired, validate the controller before returning the media session\n        return mediaSession;\n    }\n\n    // Create your Player and MediaSession in the onCreate lifecycle event\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        // Create the player and the mediasession\n        ExoPlayer player = new ExoPlayer.Builder(this).build();\n        mediaSession = new MediaSession.Builder(this, player).build();\n\n        // Build the media item.\n        Uri mp3 = Uri.parse(&quot;android.resource://myapp/raw/mysoundtoplay&quot;);\n        MediaItem mediaItem = MediaItem.fromUri(mp3);\n        // Set the media item to be played.\n        player.setMediaItem(mediaItem);\n        // loop mode\n        player.setRepeatMode(player.REPEAT_MODE_ALL);\n        // Prepare the player.\n        player.prepare();\n        // Play\n        player.setPlayWhenReady(true);\n\n        // CALL MY NEW CLASS TO CREATE NOTIFICATION\n        Context context = getApplicationContext(); // context must be passed to class\n        setMediaNotificationProvider(new MyMediaNotificationProvider(context));\n\n    }\n\n    // Remember to release the player and media session in onDestroy\n    @Override\n    public void onDestroy() {\n        mediaSession.getPlayer().release();\n        mediaSession.release();\n        mediaSession = null;\n        super.onDestroy();\n    }\n}\n\n</code></pre>\n<p>The app is doing fine (sound is playing) and the notification is visible</p>\n<p>The <a href=\"https://developer.android.com/guide/topics/media/media3/getting-started/migration-guide\" rel=\"nofollow noreferrer\">androidx migration guide</a> says &quot;An app can customize the notification by setting a custom MediaNotification.Provider in onCreate() that replaces the DefaultMediaNotificationProvider. The MediaLibraryService then takes care of starting the service in the foreground as required.\nBy overriding MediaLibraryService.updateNotification() an app can further take full ownership of posting a notification and starting/stopping the service in the foreground as required.&quot;</p>\n<p>Anyone can help me customizing the notification (text, color, icon...) ?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","rest","dependency-injection","dependency-inversion"],"answers":[{"tags":[],"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697571501,"creation_date":1697571501,"answer_id":77311808,"question_id":77311301,"body_markdown":"Just Draw on the paper and you will get the idea\r\n\r\n1.lets say you put the controller and Service in the package A, and you put the ServiceImpl in package B, in this case package B depends on package A, since service Impl refers to Service, and Service is in package A.\r\n\r\nUsing injection you are able to have service impl object in the controller but notice that controller does not know about impl(A does not know about B)\r\n\r\n2.if there was no injection, the only way the controller could have service impl object is by referring to the impl class(in this case A knows about B which is bad )\r\n\r\nso if we say that Package A is abstraction and package B is detail ,in the 1 point  B depends on A (which is good)which means that detail depends on abstraction\r\n\r\nBut in the second point, A knows about B which means Abstraction depends on detail(not good)\r\n\r\nSo we achieved dependency inversion using injection\r\n\r\n","title":"Does using Service interface in Spring Boot REST Controller represent Dependency Inversion principle?","body":"<p>Just Draw on the paper and you will get the idea</p>\n<p>1.lets say you put the controller and Service in the package A, and you put the ServiceImpl in package B, in this case package B depends on package A, since service Impl refers to Service, and Service is in package A.</p>\n<p>Using injection you are able to have service impl object in the controller but notice that controller does not know about impl(A does not know about B)</p>\n<p>2.if there was no injection, the only way the controller could have service impl object is by referring to the impl class(in this case A knows about B which is bad )</p>\n<p>so if we say that Package A is abstraction and package B is detail ,in the 1 point  B depends on A (which is good)which means that detail depends on abstraction</p>\n<p>But in the second point, A knows about B which means Abstraction depends on detail(not good)</p>\n<p>So we achieved dependency inversion using injection</p>\n"},{"tags":[],"owner":{"account_id":4954,"reputation":4796,"user_id":7708,"accept_rate":81,"display_name":"Alan Krueger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697572917,"creation_date":1697572917,"answer_id":77311935,"question_id":77311301,"body_markdown":"Related to the terminology and how the concepts interact, you might want to read https://stackoverflow.com/a/3912604/7708\r\n\r\nRelated to the `Employee` class, I think you may be overthinking it. You could conceivably make `Employee` an interface (an abstraction), putting its implementation into an `EmployeeImpl` class. However, this is probably _too much_ abstraction. It&#39;s just a data container and doesn&#39;t actually implement any logic to speak of, so there&#39;s no need to add that level of indirection to abstract away behavior. The annotations it contains declare _how_ it should interact with a data source but don&#39;t actually implement that behavior, relying on the framework to generate that logic for you.","title":"Does using Service interface in Spring Boot REST Controller represent Dependency Inversion principle?","body":"<p>Related to the terminology and how the concepts interact, you might want to read <a href=\"https://stackoverflow.com/a/3912604/7708\">https://stackoverflow.com/a/3912604/7708</a></p>\n<p>Related to the <code>Employee</code> class, I think you may be overthinking it. You could conceivably make <code>Employee</code> an interface (an abstraction), putting its implementation into an <code>EmployeeImpl</code> class. However, this is probably <em>too much</em> abstraction. It's just a data container and doesn't actually implement any logic to speak of, so there's no need to add that level of indirection to abstract away behavior. The annotations it contains declare <em>how</em> it should interact with a data source but don't actually implement that behavior, relying on the framework to generate that logic for you.</p>\n"}],"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77311808,"answer_count":2,"score":1,"last_activity_date":1697572917,"creation_date":1697566041,"question_id":77311301,"body_markdown":"I&#39;m learning about Dependency Inversion principle in Java, and the definition is: \r\n1) High-level modules should not depend upon low-level modules; they should depend on abstractions. 2) Abstractions should not depend upon details; details should depend upon abstractions.\r\n\r\nAnd I have a piece of code from a REST API implementation and I want to know if this code represents an example of Dependency Inversion.\r\n\r\nRest Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class EmployeeRestController {\r\n    \tprivate EmployeeService employeeService;\r\n    \t\r\n    \tpublic EmployeeRestController(EmployeeService employeeService) {\r\n    \t\tthis.employeeService = employeeService;\r\n    \t}\r\n    \r\n    \t@GetMapping(&quot;/employees&quot;)\r\n    \tpublic List&lt;Employee&gt; findAll() {\r\n    \t\treturn employeeService.findAll();\r\n    \t}\r\n    ...\r\n    }\r\n\r\nService Interface:\r\n\r\n    public interface EmployeeService {\r\n    \tpublic List&lt;Employee&gt; findAll();\r\n    \t\r\n    \tpublic Employee findById(int theId);\r\n    \t\r\n    ...\r\n    }\r\n\r\nService Implementation:\r\n\r\n    @Service\r\n    public class EmployeeServiceImpl implements EmployeeService {\r\n    \tprivate EmployeeDAO employeeDAO;\r\n    \r\n    \t@Autowired\r\n    \tpublic EmployeeServiceImpl(EmployeeDAO employeeDAO) {\r\n    \t\tthis.employeeDAO = employeeDAO;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@Transactional\r\n    \tpublic List&lt;Employee&gt; findAll() {\r\n    \t\treturn employeeDAO.findAll();\r\n    \t}\r\n        ...\r\n    }\r\n\r\nEntity:\r\n\r\n    @Entity\r\n    @Table(name=&quot;employee&quot;)\r\n    public class Employee {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \t@Column(name=&quot;id&quot;)\r\n    \tprivate int id;\r\n    \t\r\n    \t@Column(name=&quot;first_name&quot;)\r\n    \tprivate String firstName;\r\n        ...\r\n    }\r\n\r\n\r\nSo, I want to ask you if this code represents an example of Dependency Inversion principle, or it represents just the Dependency Injection design pattern? \r\n\r\nFor me, the controller class represents the high-level module and the service implementation represents the low-level module, and the high-level module depends on the abstractions because there is the `EmployeeService` interface used in the `EmployeeRestController`. And also the low-level module depends on abstractions because `EmployeeServiceImpl implements EmployeeService`. Is this true?\r\n\r\nBut what is the difference between Dependency Inversion and Dependency Injection in this example? The fact that I declare `private EmployeeService employeeService;` in the `EmployeeRestController` represents Dependency Inversion. So if I declare directly the class `EmployeeServiceImpl` in the `EmployeeRestController` I don&#39;t have Dependency Inversion principle. And the fact that I inject the implementation of the `EmployeeService` at runtime in the constructor represents Dependency Injection. Is that correctly? \r\n\r\nBut in the Service interface I&#39;m using the Employee which is a class. So it means that in that case abstraction depends on details. So the second part of the Dependency Inversion principle is not satisfied. And because of that I don&#39;t have Dependency Inversion. Please tell me if it&#39;s true? Thank you! \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Does using Service interface in Spring Boot REST Controller represent Dependency Inversion principle?","body":"<p>I'm learning about Dependency Inversion principle in Java, and the definition is:</p>\n<ol>\n<li>High-level modules should not depend upon low-level modules; they should depend on abstractions. 2) Abstractions should not depend upon details; details should depend upon abstractions.</li>\n</ol>\n<p>And I have a piece of code from a REST API implementation and I want to know if this code represents an example of Dependency Inversion.</p>\n<p>Rest Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class EmployeeRestController {\n    private EmployeeService employeeService;\n    \n    public EmployeeRestController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(&quot;/employees&quot;)\n    public List&lt;Employee&gt; findAll() {\n        return employeeService.findAll();\n    }\n...\n}\n</code></pre>\n<p>Service Interface:</p>\n<pre><code>public interface EmployeeService {\n    public List&lt;Employee&gt; findAll();\n    \n    public Employee findById(int theId);\n    \n...\n}\n</code></pre>\n<p>Service Implementation:</p>\n<pre><code>@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n    private EmployeeDAO employeeDAO;\n\n    @Autowired\n    public EmployeeServiceImpl(EmployeeDAO employeeDAO) {\n        this.employeeDAO = employeeDAO;\n    }\n\n    @Override\n    @Transactional\n    public List&lt;Employee&gt; findAll() {\n        return employeeDAO.findAll();\n    }\n    ...\n}\n</code></pre>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table(name=&quot;employee&quot;)\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n    \n    @Column(name=&quot;first_name&quot;)\n    private String firstName;\n    ...\n}\n</code></pre>\n<p>So, I want to ask you if this code represents an example of Dependency Inversion principle, or it represents just the Dependency Injection design pattern?</p>\n<p>For me, the controller class represents the high-level module and the service implementation represents the low-level module, and the high-level module depends on the abstractions because there is the <code>EmployeeService</code> interface used in the <code>EmployeeRestController</code>. And also the low-level module depends on abstractions because <code>EmployeeServiceImpl implements EmployeeService</code>. Is this true?</p>\n<p>But what is the difference between Dependency Inversion and Dependency Injection in this example? The fact that I declare <code>private EmployeeService employeeService;</code> in the <code>EmployeeRestController</code> represents Dependency Inversion. So if I declare directly the class <code>EmployeeServiceImpl</code> in the <code>EmployeeRestController</code> I don't have Dependency Inversion principle. And the fact that I inject the implementation of the <code>EmployeeService</code> at runtime in the constructor represents Dependency Injection. Is that correctly?</p>\n<p>But in the Service interface I'm using the Employee which is a class. So it means that in that case abstraction depends on details. So the second part of the Dependency Inversion principle is not satisfied. And because of that I don't have Dependency Inversion. Please tell me if it's true? Thank you!</p>\n"},{"tags":["java","amazon-s3","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":22863,"reputation":57898,"user_id":56829,"accept_rate":82,"display_name":"Omer Bokhari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697572824,"creation_date":1697572824,"answer_id":77311924,"question_id":74126487,"body_markdown":"The [uploadDirectory][1] method has an overload that accepts an `ObjectTaggingProvider` callback:\r\n\r\n&gt; taggingProvider - A callback of type ObjectTaggingProvider which is used to provide the tags for each file being uploaded.\r\n\r\nThe following example would apply a list of tags to every file being uploaded:\r\n\r\n    MultipleFileUpload upload = transferManager.uploadDirectory(&quot;myBucket&quot;, &quot;myKey&quot;, new File(&quot;/path/to/dir&quot;), true, null, context -&gt; new ObjectTagging(List.of(new Tag(&quot;key&quot;, &quot;value&quot;))));\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#uploadDirectory-java.lang.String-java.lang.String-java.io.File-boolean-com.amazonaws.services.s3.transfer.ObjectMetadataProvider-com.amazonaws.services.s3.transfer.ObjectTaggingProvider-","title":"Is there any way to upload directory with Tags for all the files using Multiple File Upload Interface to s3 Bucket - aws sdk","body":"<p>The <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#uploadDirectory-java.lang.String-java.lang.String-java.io.File-boolean-com.amazonaws.services.s3.transfer.ObjectMetadataProvider-com.amazonaws.services.s3.transfer.ObjectTaggingProvider-\" rel=\"nofollow noreferrer\">uploadDirectory</a> method has an overload that accepts an <code>ObjectTaggingProvider</code> callback:</p>\n<blockquote>\n<p>taggingProvider - A callback of type ObjectTaggingProvider which is used to provide the tags for each file being uploaded.</p>\n</blockquote>\n<p>The following example would apply a list of tags to every file being uploaded:</p>\n<pre><code>MultipleFileUpload upload = transferManager.uploadDirectory(&quot;myBucket&quot;, &quot;myKey&quot;, new File(&quot;/path/to/dir&quot;), true, null, context -&gt; new ObjectTagging(List.of(new Tag(&quot;key&quot;, &quot;value&quot;))));\n</code></pre>\n"}],"owner":{"account_id":11873776,"reputation":23,"user_id":8689310,"display_name":"Nitin Alety"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697572824,"creation_date":1666187121,"question_id":74126487,"body_markdown":"Is there any way to upload a directory with Tags for all the files using MultipleFileUpload Interface - AWS SDK\r\n\r\nI am able to upload the directory with all the files to s3 bucket,but not able to find proper references to add tags to all the sub-files inside the directory while uploading it to s3 bucket\r\n\r\nCode :\r\n\r\n    TransferManager xfer_mgr = TransferManagerBuilder.standard().withS3Client(getAmazonS3Client()).build();\r\n    \r\n                 MultipleFileUpload xfer = xfer_mgr.uploadDirectory(getStorageName(),\r\n                         trgtFolder, srcfolder, true);\r\n           \r\n                 XferMgrProgress.showTransferProgress(xfer);\r\n             \r\n                 XferMgrProgress.waitForCompletion(xfer);\r\n\r\nany reference for adding the tags for all sub files in the directory using MultipleFileUpload upload directory would be help","title":"Is there any way to upload directory with Tags for all the files using Multiple File Upload Interface to s3 Bucket - aws sdk","body":"<p>Is there any way to upload a directory with Tags for all the files using MultipleFileUpload Interface - AWS SDK</p>\n<p>I am able to upload the directory with all the files to s3 bucket,but not able to find proper references to add tags to all the sub-files inside the directory while uploading it to s3 bucket</p>\n<p>Code :</p>\n<pre><code>TransferManager xfer_mgr = TransferManagerBuilder.standard().withS3Client(getAmazonS3Client()).build();\n\n             MultipleFileUpload xfer = xfer_mgr.uploadDirectory(getStorageName(),\n                     trgtFolder, srcfolder, true);\n       \n             XferMgrProgress.showTransferProgress(xfer);\n         \n             XferMgrProgress.waitForCompletion(xfer);\n</code></pre>\n<p>any reference for adding the tags for all sub files in the directory using MultipleFileUpload upload directory would be help</p>\n"},{"tags":["java","maven","intellij-idea","groovy","gradle"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1443763777,"post_id":32900912,"comment_id":53630643,"body_markdown":"Did you look at [org.gradle.api.internal.tasks.compile.ApiGroovyCompiler](https://github.com/gradle/gradle/blob/master/subprojects/language-groovy/src/main/java/org/gradle/api/internal/tasks/compile/ApiGroovyCompiler.java)?","body":"Did you look at <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/language-groovy/src/main/java/org/gradle/api/internal/tasks/compile/ApiGroovyCompiler.java\" rel=\"nofollow noreferrer\">org.gradle.api.internal.tasks.compile.ApiGroovyCompiler</a>?"},{"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"score":2,"creation_date":1443779432,"post_id":32900912,"comment_id":53637522,"body_markdown":"have you tried with a non-ancient version of gradle?","body":"have you tried with a non-ancient version of gradle?"},{"owner":{"account_id":1647390,"reputation":5075,"user_id":1518668,"accept_rate":45,"display_name":"sonoerin"},"score":0,"creation_date":1443796201,"post_id":32900912,"comment_id":53646935,"body_markdown":"I upgraded to gradle 2.6 and I still get same error.  I also looked at ApiGroovyCompiler but didnt&#39; see anything relevant to this.  Granted, I can&#39;t say that I totally understood everything going in there either.","body":"I upgraded to gradle 2.6 and I still get same error.  I also looked at ApiGroovyCompiler but didnt&#39; see anything relevant to this.  Granted, I can&#39;t say that I totally understood everything going in there either."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1443797054,"post_id":32900912,"comment_id":53647546,"body_markdown":"Does the error go away if you temporarily remove the test class in question?","body":"Does the error go away if you temporarily remove the test class in question?"},{"owner":{"account_id":1647390,"reputation":5075,"user_id":1518668,"accept_rate":45,"display_name":"sonoerin"},"score":0,"creation_date":1443804554,"post_id":32900912,"comment_id":53651926,"body_markdown":"I don&#39;t get it...that test hadn&#39;t been touched in months but when I deleted it, that error no longer occurred.  What could cause that?","body":"I don&#39;t get it...that test hadn&#39;t been touched in months but when I deleted it, that error no longer occurred.  What could cause that?"},{"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"score":0,"creation_date":1443812164,"post_id":32900912,"comment_id":53655796,"body_markdown":"Because you changed something else?","body":"Because you changed something else?"},{"owner":{"account_id":1647390,"reputation":5075,"user_id":1518668,"accept_rate":45,"display_name":"sonoerin"},"score":0,"creation_date":1443818822,"post_id":32900912,"comment_id":53659061,"body_markdown":"funny, I should have seen that one coming :)  But no, the only change was the addition of two jar in /lib.  Anyway....I don&#39;t know who to give the answer to tim_yates or Dave Newton.  I feel both answers were helpful.","body":"funny, I should have seen that one coming :)  But no, the only change was the addition of two jar in /lib.  Anyway....I don&#39;t know who to give the answer to tim_yates or Dave Newton.  I feel both answers were helpful."}],"answers":[{"tags":[],"owner":{"account_id":1230894,"reputation":2364,"user_id":1195507,"accept_rate":100,"display_name":"rvazquezglez"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1686328021,"creation_date":1543356739,"answer_id":53509014,"question_id":32900912,"body_markdown":"I had this `BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;...&#39;` issue today and upgrading gradle (as mentioned in a comment) didn&#39;t work. `gradle clean` was not working either.\r\n\r\nWhat worked for me was cleaning the gradle cache: \r\n\r\n`rm -rf $HOME/.gradle/caches/` \r\n\r\nand project gradle directory \r\n\r\n`rm -rf $PROJECT/.gradle/caches/ &amp;&amp; rm -rf $PROJECT/build/`\r\n\r\nRelated https://stackoverflow.com/questions/13565082/how-can-i-force-gradle-to-redownload-dependencies/13567793#13567793","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>I had this <code>BUG! exception in phase 'semantic analysis' in source unit '...'</code> issue today and upgrading gradle (as mentioned in a comment) didn't work. <code>gradle clean</code> was not working either.</p>\n<p>What worked for me was cleaning the gradle cache:</p>\n<p><code>rm -rf $HOME/.gradle/caches/</code></p>\n<p>and project gradle directory</p>\n<p><code>rm -rf $PROJECT/.gradle/caches/ &amp;&amp; rm -rf $PROJECT/build/</code></p>\n<p>Related <a href=\"https://stackoverflow.com/questions/13565082/how-can-i-force-gradle-to-redownload-dependencies/13567793#13567793\">How can I force gradle to redownload dependencies?</a></p>\n"},{"tags":[],"owner":{"account_id":2702401,"reputation":3216,"user_id":2332852,"display_name":"BalRog"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1554823657,"creation_date":1554823657,"answer_id":55596316,"question_id":32900912,"body_markdown":"I&#39;m seeing the same error only when I use the Java 11 JVM:\r\n\r\n```\r\n$ gradle -v\r\n\r\n------------------------------------------------------------\r\nGradle 5.2.1\r\n------------------------------------------------------------\r\n\r\nBuild time:   2019-02-08 19:00:10 UTC\r\nRevision:     f02764e074c32ee8851a4e1877dd1fea8ffb7183\r\n\r\nKotlin DSL:   1.1.3\r\nKotlin:       1.3.20\r\nGroovy:       2.5.4\r\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\r\nJVM:          11 (Oracle Corporation 11+28)\r\nOS:           Mac OS X 10.14.3 x86_64\r\n```\r\n\r\nThe error goes away when I drop back to Java 1.8 (I changed JAVA_HOME):\r\n\r\n```\r\n$ gradle -v\r\n\r\n------------------------------------------------------------\r\nGradle 5.2.1\r\n------------------------------------------------------------\r\n\r\nBuild time:   2019-02-08 19:00:10 UTC\r\nRevision:     f02764e074c32ee8851a4e1877dd1fea8ffb7183\r\n\r\nKotlin DSL:   1.1.3\r\nKotlin:       1.3.20\r\nGroovy:       2.5.4\r\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\r\nJVM:          1.8.0_191 (Oracle Corporation 25.191-b12)\r\nOS:           Mac OS X 10.14.3 x86_64\r\n```\r\n","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>I'm seeing the same error only when I use the Java 11 JVM:</p>\n\n<pre><code>$ gradle -v\n\n------------------------------------------------------------\nGradle 5.2.1\n------------------------------------------------------------\n\nBuild time:   2019-02-08 19:00:10 UTC\nRevision:     f02764e074c32ee8851a4e1877dd1fea8ffb7183\n\nKotlin DSL:   1.1.3\nKotlin:       1.3.20\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          11 (Oracle Corporation 11+28)\nOS:           Mac OS X 10.14.3 x86_64\n</code></pre>\n\n<p>The error goes away when I drop back to Java 1.8 (I changed JAVA_HOME):</p>\n\n<pre><code>$ gradle -v\n\n------------------------------------------------------------\nGradle 5.2.1\n------------------------------------------------------------\n\nBuild time:   2019-02-08 19:00:10 UTC\nRevision:     f02764e074c32ee8851a4e1877dd1fea8ffb7183\n\nKotlin DSL:   1.1.3\nKotlin:       1.3.20\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_191 (Oracle Corporation 25.191-b12)\nOS:           Mac OS X 10.14.3 x86_64\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93940,"reputation":5106,"user_id":256770,"accept_rate":31,"display_name":"Farrukh Najmi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1570818559,"creation_date":1570818559,"answer_id":58346704,"question_id":32900912,"body_markdown":"This happened to me when I upgraded my project with groovy Spock tests from JDK 8 to JDK 11.\r\n\r\nThe fix was to upgrade spock version to `1.3-groovy-2.5` and groovy version to `2.5.3` for my gradle dependencies.\r\n\r\nIn addition, in my case, I had to add implementation of jaxws and jaxb to my dependencies as they have been removed from JDK 11:\r\n\r\n```\r\n    implementation &#39;com.sun.xml.ws:jaxws-ri:2.3.2&#39;\r\n    implementation &#39;com.sun.xml.bind:jaxb-impl:2.4.0-b180830.0438&#39;\r\n```","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>This happened to me when I upgraded my project with groovy Spock tests from JDK 8 to JDK 11.</p>\n\n<p>The fix was to upgrade spock version to <code>1.3-groovy-2.5</code> and groovy version to <code>2.5.3</code> for my gradle dependencies.</p>\n\n<p>In addition, in my case, I had to add implementation of jaxws and jaxb to my dependencies as they have been removed from JDK 11:</p>\n\n<pre><code>    implementation 'com.sun.xml.ws:jaxws-ri:2.3.2'\n    implementation 'com.sun.xml.bind:jaxb-impl:2.4.0-b180830.0438'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7855527,"reputation":620,"user_id":5937516,"accept_rate":71,"display_name":"antongarakh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581344676,"creation_date":1581344676,"answer_id":60152444,"question_id":32900912,"body_markdown":"In my case the reason was IntellijIdea variable generation.\r\n\r\nExample:\r\nIdea generated `List&lt;@NotNull UUID&gt; locationIds` instead of `List&lt;UUID&gt; locationIds`\r\n\r\nGroovy compilation failed to process this `@NotNull` annotation inside generic brackets","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>In my case the reason was IntellijIdea variable generation.</p>\n\n<p>Example:\nIdea generated <code>List&lt;@NotNull UUID&gt; locationIds</code> instead of <code>List&lt;UUID&gt; locationIds</code></p>\n\n<p>Groovy compilation failed to process this <code>@NotNull</code> annotation inside generic brackets</p>\n"},{"tags":[],"owner":{"display_name":"user11074381"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1596591446,"creation_date":1596591446,"answer_id":63257217,"question_id":32900912,"body_markdown":"I think this is cause by java version is high, or we can say gradle version is too low.\r\n\r\nso I just use higher version Gradle. I think it&#39;s better than change JDK version to 1.8.\r\n\r\nMy config(I already have gradle 6.5, and I think maybe 6.x will satisfy):\r\n\r\n**just change the gradle version to 6.5 in `android\\gradle\\wrapper\\gradle-wrapper.properties`**","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>I think this is cause by java version is high, or we can say gradle version is too low.</p>\n<p>so I just use higher version Gradle. I think it's better than change JDK version to 1.8.</p>\n<p>My config(I already have gradle 6.5, and I think maybe 6.x will satisfy):</p>\n<p><strong>just change the gradle version to 6.5 in <code>android\\gradle\\wrapper\\gradle-wrapper.properties</code></strong></p>\n"},{"tags":[],"owner":{"account_id":6425683,"reputation":171,"user_id":4980928,"display_name":"Gokul Pandey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1607358827,"creation_date":1607358827,"answer_id":65185635,"question_id":32900912,"body_markdown":"Encountered the same problem while migrating SAP hybris from version 6.6 (java 8) to 2005 (java 11). The problem was encountered while ant clean all and recipe installation.\r\n\r\nError:\r\n\r\n    hybris/bin/modules/text-field-configurator-template/textfieldconfiguratortemplateocctests/testsrc/de/hybris/platform/textfieldconfiguratortemplateocctests/controllers/ProductTextfieldConfiguratorControllerTest.groovy&#39; null\r\n \r\n\r\n**Resolution:** Solved the problem by commenting/removing below property from config/local.properties\r\n\r\n    build.parallel=true","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>Encountered the same problem while migrating SAP hybris from version 6.6 (java 8) to 2005 (java 11). The problem was encountered while ant clean all and recipe installation.</p>\n<p>Error:</p>\n<pre><code>hybris/bin/modules/text-field-configurator-template/textfieldconfiguratortemplateocctests/testsrc/de/hybris/platform/textfieldconfiguratortemplateocctests/controllers/ProductTextfieldConfiguratorControllerTest.groovy' null\n</code></pre>\n<p><strong>Resolution:</strong> Solved the problem by commenting/removing below property from config/local.properties</p>\n<pre><code>build.parallel=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11401751,"reputation":3275,"user_id":8358501,"display_name":"Nils Reichardt"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1624883705,"creation_date":1624883705,"answer_id":68163451,"question_id":32900912,"body_markdown":"My issue was that I used Java 16 and Gradle 6.5. But Gradle 6.5 does not support Java 16. I needed to upgrade to 7.0. I did this by changing `gradle/wrapper/gradle-wrapper.properties` in this line:\r\n```properties\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.0-bin.zip\r\n```","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>My issue was that I used Java 16 and Gradle 6.5. But Gradle 6.5 does not support Java 16. I needed to upgrade to 7.0. I did this by changing <code>gradle/wrapper/gradle-wrapper.properties</code> in this line:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0-bin.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10799157,"reputation":331,"user_id":7943785,"display_name":"legoffmael"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627436806,"creation_date":1627436806,"answer_id":68553429,"question_id":32900912,"body_markdown":"You can check if your Gradle version is compatible with your Java version\r\n\r\n[Gradle compatibility](https://docs.gradle.org/7.1.1/userguide/compatibility.html\r\n)\r\n\r\nI upgraded my Gradle version to the latest compatible with my Java version and the error was gone.\r\n","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>You can check if your Gradle version is compatible with your Java version</p>\n<p><a href=\"https://docs.gradle.org/7.1.1/userguide/compatibility.html\" rel=\"nofollow noreferrer\">Gradle compatibility</a></p>\n<p>I upgraded my Gradle version to the latest compatible with my Java version and the error was gone.</p>\n"},{"tags":[],"owner":{"account_id":14378339,"reputation":1,"user_id":10386258,"display_name":"dalakoti07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633583230,"creation_date":1633583230,"answer_id":69475734,"question_id":32900912,"body_markdown":"Make sure that build:gradle version in build.gradle and distributionUrl in gradle-wrapper.properties are compatible","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>Make sure that build:gradle version in build.gradle and distributionUrl in gradle-wrapper.properties are compatible</p>\n"},{"tags":[],"owner":{"account_id":171579,"reputation":14753,"user_id":399105,"display_name":"bmaupin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697572802,"creation_date":1697572802,"answer_id":77311923,"question_id":32900912,"body_markdown":"I ran into this upgrading Java on a Grails + Groovy project and I had to do two things:\r\n\r\n1. Upgrade Grails to a version compatible with the JDK version I&#39;m using. Thankfully they provide a nice [compatibility matrix](https://docs.gradle.org/current/userguide/compatibility.html)\r\n\r\n1. Upgrade Groovy likewise. Groovy has a [matrix for the minimum version of Java required for each version of Groovy](https://groovy.apache.org/download.html#requirements), but doesn&#39;t seem to show the version of Groovy required for each version of Java.\r\n\r\n   In my case, I was using JDK 17 and I found this buried in a GitHub issue:\r\n\r\n   &gt; JDK 17 requires asm 9.1 and Groovy 3.0.8 is the first version to support it.\r\n\r\n\r\n   (https://github.com/grails/grails-core/issues/12152)","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>I ran into this upgrading Java on a Grails + Groovy project and I had to do two things:</p>\n<ol>\n<li><p>Upgrade Grails to a version compatible with the JDK version I'm using. Thankfully they provide a nice <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">compatibility matrix</a></p>\n</li>\n<li><p>Upgrade Groovy likewise. Groovy has a <a href=\"https://groovy.apache.org/download.html#requirements\" rel=\"nofollow noreferrer\">matrix for the minimum version of Java required for each version of Groovy</a>, but doesn't seem to show the version of Groovy required for each version of Java.</p>\n<p>In my case, I was using JDK 17 and I found this buried in a GitHub issue:</p>\n<blockquote>\n<p>JDK 17 requires asm 9.1 and Groovy 3.0.8 is the first version to support it.</p>\n</blockquote>\n<p>(<a href=\"https://github.com/grails/grails-core/issues/12152\" rel=\"nofollow noreferrer\">https://github.com/grails/grails-core/issues/12152</a>)</p>\n</li>\n</ol>\n"}],"owner":{"account_id":1647390,"reputation":5075,"user_id":1518668,"accept_rate":45,"display_name":"sonoerin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124714,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"answer_count":10,"score":59,"last_activity_date":1697572802,"creation_date":1443762805,"question_id":32900912,"body_markdown":"I have a 1.1.7 spring-boot app using Gradle 1.10 &amp; jdk1.8.  I use Groovy/Spock for testing It has two dependencies - jars build with Apache Maven 3.1.1 and jdk 1.8.  I build the jars and them copy them into the /lib directory.  Then I try and build with &quot;gradle clean build.\r\n\r\nHere is part of my gradle file:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;groovy&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;spring-boot&#39;\r\n    apply plugin: &#39;jacoco&#39;\r\n    apply plugin: &#39;maven&#39;\r\n    \r\n    project.ext {\r\n        springBootVersion = &#39;1.1.7.RELEASE&#39;\r\n    }\r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    }\r\n    buildscript {\r\n        repositories {\r\n            flatDir {\r\n                dirs &quot;$rootProject.projectDir/libs&quot;\r\n            }\r\n            maven { url &#39;https://oss.sonatype.org/content/repositories/snapshots/&#39; }\r\n            maven { url &quot;http://repo.spring.io/libs-milestone&quot; }\r\n            maven { url &quot;http://repo.spring.io/libs-snapshot&quot; }\r\n            mavenLocal()\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:1.2.5.RELEASE&quot;)\r\n      testCompile(&#39;org.spockframework:spock-core:1.0-groovy-2.0&#39;) {\r\n        exclude group: &#39;org.codehaus.groovy&#39;, module: &#39;groovy-all&#39;\r\n    }\r\n\r\n      testCompile(&#39;org.spockframework:spock-spring:1.0-groovy-2.0&#39;) {\r\n        exclude group: &#39;org.spockframework&#39;, module: &#39;spock-core&#39;\r\n        exclude group: &#39;org.spockframework&#39;, module: &#39;spring-beans&#39;\r\n        exclude group: &#39;org.spockframework&#39;, module: &#39;spring-test&#39;\r\n        exclude group: &#39;org.codehaus.groovy&#39;, module: &#39;groovy-all&#39;\r\n    }\r\n \r\n       testCompile(&quot;org.springframework.boot:spring-boot-starter-test:$springBootVersion&quot;)\r\n        testCompile(&#39;org.codehaus.groovy.modules.http-builder:http-builder:0.7+&#39;)\r\n        testCompile(&quot;junit:junit&quot;)\r\n        }\r\n    }\r\n    \r\n    jacocoTestReport {\r\n        group = &quot;Reporting&quot;\r\n        description = &quot;Generate Jacoco coverage reports after running tests.&quot;\r\n    }\r\n    \r\n    task wrapper(type: Wrapper) {\r\n        gradleVersion = &#39;1.11&#39;\r\n    }\r\n\r\nRegardless of building in from command line or IntelliJ I get the following error:\r\n\r\n    Executing org.gradle.api.internal.tasks.compile.ApiGroovyCompiler@5474aad4 in compiler daemon.\r\n    Exception executing org.gradle.api.internal.tasks.compile.ApiGroovyCompiler@5474aad4 in compiler daemon: BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;/Users/David/projects/.../controller/AboutControllerTest.groovy&#39; sun.reflect.annotation.TypeNotPresentExceptionProxy.\r\n    :compileTestGroovy FAILED\r\n\r\nHere is the stacktrace:\r\n\r\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:compileTestGroovy&#39;.\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\r\n            at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\r\n            at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\r\n            at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\r\n            at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\r\n            at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\r\n            at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\r\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:62)\r\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:50)\r\n            at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:25)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\r\n            at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\r\n            at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\r\n            at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\r\n            at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:158)\r\n            at org.gradle.internal.Factories$1.create(Factories.java:22)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\r\n            at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)\r\n            at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:36)\r\n            at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:103)\r\n            at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:97)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\r\n            at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:97)\r\n            at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\r\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:102)\r\n            at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\r\n            at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:47)\r\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:32)\r\n            at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:77)\r\n            at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:47)\r\n            at org.gradle.launcher.exec.DaemonUsageSuggestingBuildActionExecuter.execute(DaemonUsageSuggestingBuildActionExecuter.java:51)\r\n            at org.gradle.launcher.exec.DaemonUsageSuggestingBuildActionExecuter.execute(DaemonUsageSuggestingBuildActionExecuter.java:28)\r\n            at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:43)\r\n            at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:170)\r\n            at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\r\n            at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\r\n            at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\r\n            at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\r\n            at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\r\n            at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\r\n            at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\r\n            at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\r\n            at org.gradle.launcher.Main.doAction(Main.java:33)\r\n            at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\r\n            at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\r\n            at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\r\n            at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\r\n    Caused by: BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;/Users/David/projects/.../src/test/groovy/.../controller/AboutControllerTest.groovy&#39; sun.reflect.annotation.TypeNotPresentExceptionProxy\r\n            at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:152)\r\n            at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:51)\r\n            at org.gradle.api.internal.tasks.compile.daemon.CompilerDaemonServer.execute(CompilerDaemonServer.java:53)\r\n            at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n            at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n            at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)\r\n            at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\r\n            at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\r\n    Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\r\n            ... 8 more\r\n\r\nThere is nothing wrong with that, or any other test, as it has not changed in months.  In fact, the problem seems to have started when I added the two jar files to the project.  However, I have not been able to find an answer to this particular error message anywhere.\r\n","title":"BUG! exception in phase &#39;semantic analysis&#39;","body":"<p>I have a 1.1.7 spring-boot app using Gradle 1.10 &amp; jdk1.8.  I use Groovy/Spock for testing It has two dependencies - jars build with Apache Maven 3.1.1 and jdk 1.8.  I build the jars and them copy them into the /lib directory.  Then I try and build with \"gradle clean build.</p>\n\n<p>Here is part of my gradle file:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'groovy'\napply plugin: 'idea'\napply plugin: 'spring-boot'\napply plugin: 'jacoco'\napply plugin: 'maven'\n\nproject.ext {\n    springBootVersion = '1.1.7.RELEASE'\n}\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n}\nbuildscript {\n    repositories {\n        flatDir {\n            dirs \"$rootProject.projectDir/libs\"\n        }\n        maven { url 'https://oss.sonatype.org/content/repositories/snapshots/' }\n        maven { url \"http://repo.spring.io/libs-milestone\" }\n        maven { url \"http://repo.spring.io/libs-snapshot\" }\n        mavenLocal()\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:1.2.5.RELEASE\")\n  testCompile('org.spockframework:spock-core:1.0-groovy-2.0') {\n    exclude group: 'org.codehaus.groovy', module: 'groovy-all'\n}\n\n  testCompile('org.spockframework:spock-spring:1.0-groovy-2.0') {\n    exclude group: 'org.spockframework', module: 'spock-core'\n    exclude group: 'org.spockframework', module: 'spring-beans'\n    exclude group: 'org.spockframework', module: 'spring-test'\n    exclude group: 'org.codehaus.groovy', module: 'groovy-all'\n}\n\n   testCompile(\"org.springframework.boot:spring-boot-starter-test:$springBootVersion\")\n    testCompile('org.codehaus.groovy.modules.http-builder:http-builder:0.7+')\n    testCompile(\"junit:junit\")\n    }\n}\n\njacocoTestReport {\n    group = \"Reporting\"\n    description = \"Generate Jacoco coverage reports after running tests.\"\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '1.11'\n}\n</code></pre>\n\n<p>Regardless of building in from command line or IntelliJ I get the following error:</p>\n\n<pre><code>Executing org.gradle.api.internal.tasks.compile.ApiGroovyCompiler@5474aad4 in compiler daemon.\nException executing org.gradle.api.internal.tasks.compile.ApiGroovyCompiler@5474aad4 in compiler daemon: BUG! exception in phase 'semantic analysis' in source unit '/Users/David/projects/.../controller/AboutControllerTest.groovy' sun.reflect.annotation.TypeNotPresentExceptionProxy.\n:compileTestGroovy FAILED\n</code></pre>\n\n<p>Here is the stacktrace:</p>\n\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileTestGroovy'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:62)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:50)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:25)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\n        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n        at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n        at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:158)\n        at org.gradle.internal.Factories$1.create(Factories.java:22)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)\n        at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:36)\n        at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:103)\n        at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:97)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:97)\n        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:102)\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:47)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:32)\n        at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:77)\n        at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:47)\n        at org.gradle.launcher.exec.DaemonUsageSuggestingBuildActionExecuter.execute(DaemonUsageSuggestingBuildActionExecuter.java:51)\n        at org.gradle.launcher.exec.DaemonUsageSuggestingBuildActionExecuter.execute(DaemonUsageSuggestingBuildActionExecuter.java:28)\n        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:43)\n        at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:170)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\n        at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\n        at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\n        at org.gradle.launcher.Main.doAction(Main.java:33)\n        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\n        at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\nCaused by: BUG! exception in phase 'semantic analysis' in source unit '/Users/David/projects/.../src/test/groovy/.../controller/AboutControllerTest.groovy' sun.reflect.annotation.TypeNotPresentExceptionProxy\n        at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:152)\n        at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:51)\n        at org.gradle.api.internal.tasks.compile.daemon.CompilerDaemonServer.execute(CompilerDaemonServer.java:53)\n        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n        at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n        at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\n        ... 8 more\n</code></pre>\n\n<p>There is nothing wrong with that, or any other test, as it has not changed in months.  In fact, the problem seems to have started when I added the two jar files to the project.  However, I have not been able to find an answer to this particular error message anywhere.</p>\n"},{"tags":["java","unit-testing","junit","assert","junit4"],"comments":[{"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"score":1,"creation_date":1290445093,"post_id":4247933,"comment_id":4600882,"body_markdown":"If you need it to continue through assert failures, how about building up a list of elements that fail, as you&#39;re looping, then asserting that the list is empty after the loop? If it&#39;s not empty, print out the list of failures.","body":"If you need it to continue through assert failures, how about building up a list of elements that fail, as you&#39;re looping, then asserting that the list is empty after the loop? If it&#39;s not empty, print out the list of failures."},{"owner":{"account_id":2147946,"reputation":1438,"user_id":1905900,"accept_rate":73,"display_name":"papercuts"},"score":0,"creation_date":1362478125,"post_id":4247933,"comment_id":21454349,"body_markdown":"@birryree how would you do this? wouldn&#39;t the looping stop once an element fails? I&#39;m a beginner btw.","body":"@birryree how would you do this? wouldn&#39;t the looping stop once an element fails? I&#39;m a beginner btw."}],"answers":[{"tags":[],"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1290444989,"creation_date":1290444989,"answer_id":4247964,"question_id":4247933,"body_markdown":"catch `AssertionError` and add the caught error to the errors list, at the end check the list to be empty raise a compound `AssertionError` if not.","title":"Loop through array, each element a JUnit test","body":"<p>catch <code>AssertionError</code> and add the caught error to the errors list, at the end check the list to be empty raise a compound <code>AssertionError</code> if not.</p>\n"},{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1430822741,"creation_date":1290445121,"answer_id":4247979,"question_id":4247933,"body_markdown":"Use JUnit 4&#39;s [parameterized tests][1]. They are a perfect fit for this type of problem, although the documentation is quite lacking.\r\n\r\nHere are a few other samples on how to use them.:\r\n\r\n- http://ourcraft.wordpress.com/2008/08/27/writing-a-parameterized-junit-test/\r\n- [http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/][2]\r\n- http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/\r\n\r\n  [1]: http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html\r\n  [2]: https://web.archive.org/web/20140220002834/http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/","title":"Loop through array, each element a JUnit test","body":"<p>Use JUnit 4's <a href=\"http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html\" rel=\"noreferrer\">parameterized tests</a>. They are a perfect fit for this type of problem, although the documentation is quite lacking.</p>\n\n<p>Here are a few other samples on how to use them.:</p>\n\n<ul>\n<li><a href=\"http://ourcraft.wordpress.com/2008/08/27/writing-a-parameterized-junit-test/\" rel=\"noreferrer\">http://ourcraft.wordpress.com/2008/08/27/writing-a-parameterized-junit-test/</a></li>\n<li><a href=\"https://web.archive.org/web/20140220002834/http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/\" rel=\"noreferrer\">http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/</a></li>\n<li><a href=\"http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/\" rel=\"noreferrer\">http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697572671,"creation_date":1621558209,"answer_id":67629578,"question_id":4247933,"body_markdown":"**Parameterized Tests in JUnit 5** have got easier with a better syntax, I think. You can read about [here](https://www.baeldung.com/parameterized-tests-junit-5). One of the options is to declare a method to provide the list of arguments to test, such as below:\r\n\r\n```\r\n// Given\r\nprivate static Stream&lt;Arguments&gt; shouldReturnExpectedResultWhenGivenRightInput() {\r\n   return Stream.of(\r\n       Arguments.of(3, &quot;Fizz&quot;),\r\n       Arguments.of(5, &quot;Buzz&quot;),\r\n       Arguments.of(8, &quot;8&quot;),\r\n       Arguments.of(15, &quot;FizzBuzz&quot;),\r\n       Arguments.of(19, &quot;19&quot;),\r\n       Arguments.of(30, &quot;FizzBuzz&quot;),\r\n       Arguments.of(40, &quot;Buzz&quot;),\r\n       Arguments.of(45, &quot;FizzBuzz&quot;)\r\n   );\r\n}\r\n@ParameterizedTest\r\n@MethodSource\r\nvoid shouldReturnExpectedResultWhenGivenRightInput(Integer input, String expected) {\r\n   // When\r\n   val result = library.processInput(input); \r\n   // Then\r\n   assertEquals(expected, result);\r\n}\r\n\r\n// Given\r\nprivate static Stream&lt;Arguments&gt; shouldNotReturnExpectedResultWhenGivenWrongInput() {\r\n    return Stream.of(\r\n        Arguments.of(3, &quot;Buzz&quot;),\r\n        Arguments.of(5, &quot;Fizz&quot;),\r\n        Arguments.of(8, &quot;Buzz&quot;),\r\n        Arguments.of(15, &quot;15&quot;),\r\n        Arguments.of(19, &quot;Fizz&quot;)\r\n    );\r\n}\r\n@ParameterizedTest\r\n@MethodSource\r\nvoid shouldNotReturnExpectedResultWhenGivenWrongInput(Integer input, String unexpected) {\r\n    // When\r\n    val result = library.processInput(input); \r\n    // Then\r\n    assertNotEquals(unexpected, result);\r\n}\r\n","title":"Loop through array, each element a JUnit test","body":"<p><strong>Parameterized Tests in JUnit 5</strong> have got easier with a better syntax, I think. You can read about <a href=\"https://www.baeldung.com/parameterized-tests-junit-5\" rel=\"nofollow noreferrer\">here</a>. One of the options is to declare a method to provide the list of arguments to test, such as below:</p>\n<pre><code>// Given\nprivate static Stream&lt;Arguments&gt; shouldReturnExpectedResultWhenGivenRightInput() {\n   return Stream.of(\n       Arguments.of(3, &quot;Fizz&quot;),\n       Arguments.of(5, &quot;Buzz&quot;),\n       Arguments.of(8, &quot;8&quot;),\n       Arguments.of(15, &quot;FizzBuzz&quot;),\n       Arguments.of(19, &quot;19&quot;),\n       Arguments.of(30, &quot;FizzBuzz&quot;),\n       Arguments.of(40, &quot;Buzz&quot;),\n       Arguments.of(45, &quot;FizzBuzz&quot;)\n   );\n}\n@ParameterizedTest\n@MethodSource\nvoid shouldReturnExpectedResultWhenGivenRightInput(Integer input, String expected) {\n   // When\n   val result = library.processInput(input); \n   // Then\n   assertEquals(expected, result);\n}\n\n// Given\nprivate static Stream&lt;Arguments&gt; shouldNotReturnExpectedResultWhenGivenWrongInput() {\n    return Stream.of(\n        Arguments.of(3, &quot;Buzz&quot;),\n        Arguments.of(5, &quot;Fizz&quot;),\n        Arguments.of(8, &quot;Buzz&quot;),\n        Arguments.of(15, &quot;15&quot;),\n        Arguments.of(19, &quot;Fizz&quot;)\n    );\n}\n@ParameterizedTest\n@MethodSource\nvoid shouldNotReturnExpectedResultWhenGivenWrongInput(Integer input, String unexpected) {\n    // When\n    val result = library.processInput(input); \n    // Then\n    assertNotEquals(unexpected, result);\n}\n</code></pre>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36707,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":4247979,"answer_count":3,"score":21,"last_activity_date":1697572671,"creation_date":1290444793,"question_id":4247933,"body_markdown":"I have a JUnit 4 test that loops through an array of test data:\r\n\r\n\tpublic @Test void testAll() {\r\n\r\n\t\tfinal Object[][] sets = new Object[][] {\r\n\t\t\t\t// SET\t\t\t\t\t\t\t\tTYPE VALUE\r\n\r\n\t\t\t\t// --- valid sets\r\n\t\t\t\t\r\n\t\t\t\t// groups\r\n\t\t\t\tx(s(A,1, B,1, C,1),\t\t\t\t\tG),\r\n\t\t\t\tx(s(A,4, B,4, D,4),\t\t\t\t\tG),\r\n\t\t\t\tx(s(A,8, B,8, D,8, C,8),\t\t\tG),\r\n\t\t\t\tx(s(J,J, B,4, D,4),\t\t\t\t\tG,\t4*3),\r\n\t\t\t\tx(s(A,9, J,J, D,9),\t\t\t\t\tG,\t9*3),\r\n\t\t\t\tx(s(A,2, B,2, C,2),\t\t\t\t\tG),\r\n\t\t\t\tx(s(A,4, B,4, J,J),\t\t\t\t\tG,\t4*3),\r\n\t\t\t\tx(s(A,4, B,4, C,4, D,4),\t\t\tG),\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t// runs\r\n\t\t\t\tx(s(A,1, A,2, A,3),\t\t\t\t\tR),\r\n\t\t\t\tx(s(B,8, B,9, B,10),\t\t\t\tR),\r\n\t\t\t\tx(s(J,J, C,2, C,3),\t\t\t\t\tR,\t6),\r\n\t\t\t\tx(s(D,8, D,9, J,J, D,11),\t\t\tR,\t38),\r\n\t\t\t\tx(s(D,8, D,9, J,J, J,J),\t\t\tR,\t38),\r\n\t\t\t\t\r\n\t\t\t\t// sames\r\n\t\t\t\tx(s(A,1, A,1),\t\t\t\t\t\tS),\r\n\t\t\t\tx(s(B,4, B,4, B,4),\t\t\t\t\tS),\r\n\t\t\t\tx(s(C,8, C,8),\t\t\t\t\t\tS),\r\n\t\t\t\tx(s(D,3, D,3),\t\t\t\t\t\tS),\r\n\t\t\t\t\r\n\t\t\t\t// doubt-cases, assume group (TODO: verify this is correct)\r\n\t\t\t\tx(s(J,J, J,J, D,4),\t\t\t\t\tG,\t4*3),\r\n\t\t\t\tx(s(A,7, J,J, J,J),\t\t\t\t\tG,\t7*3),\r\n\t\t\t\tx(s(J,J, D,9, J,J),\t\t\t\t\tG,\t9*3),\r\n\t\t\t\tx(s(J,J, J,J, J,J),\t\t\t\t\tG,\t1),\r\n\t\t\t\t\r\n\t\t\t\t// --- invalid sets\r\n\t\t\t\tx(s(B,1, A,2, A,3),\t\t\t\t\tI),\t// not same colour\r\n\t\t\t\tx(s(D,11, D,12, J,J, J,J),\t\t\tI),\t// last joker is 14\r\n\t\t\t\tx(s(B,1, B,1, A,1),\t\t\t\t\tI), // duplicate B1\r\n\t\t\t\tx(s(A,1, A,2, A,3, A,5),\t\t\tI), // gap A4\r\n\t\t\t\tx(s(J,J, A,1, J,J, B,1, C,1),\t\tI), // one J replaces D1, then nothing left to replace\r\n\t\t\t\tx(s(A,1, A,2),\t\t\t\t\t\tI), // short\r\n\t\t\t\tx(s(B,1),\t\t\t\t\t\t\tI), // shorter\r\n\t\t\t\tx(s(A,5, A,6),\t\t\t\t\t\tI), // short\r\n\t\t};\r\n\t\t\r\n\t\tfor (Object[] o : sets) {\r\n\t\t\t\r\n\t\t\tTileSet s = (TileSet) o[0];\r\n\t\t\tType t = (Type) o[1];\r\n\t\t\tint v = (Integer) o[2];\r\n\t\t\t\r\n\t\t\tSystem.out.println(s);\r\n\t\t\t\r\n\t\t\tassertEquals(t, s.getType());\r\n\t\t\tassertEquals(v, s.getValue());\r\n\t\t\t\r\n\t\t\t// test isValid, though it&#39;s Too Simple To Break(R)\r\n\t\t\tif (t == Type.INVALID) assertFalse(s.isValid());\r\n\t\t\telse assertTrue(s.isValid());\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nBecause it&#39;s all in one test method, the whole test stops as soon as one element in the array fails. Is there a way around that, without making a method for each test item?\r\nMaybe something with reflection?","title":"Loop through array, each element a JUnit test","body":"<p>I have a JUnit 4 test that loops through an array of test data:</p>\n\n<pre><code>public @Test void testAll() {\n\n    final Object[][] sets = new Object[][] {\n            // SET                              TYPE VALUE\n\n            // --- valid sets\n\n            // groups\n            x(s(A,1, B,1, C,1),                 G),\n            x(s(A,4, B,4, D,4),                 G),\n            x(s(A,8, B,8, D,8, C,8),            G),\n            x(s(J,J, B,4, D,4),                 G,  4*3),\n            x(s(A,9, J,J, D,9),                 G,  9*3),\n            x(s(A,2, B,2, C,2),                 G),\n            x(s(A,4, B,4, J,J),                 G,  4*3),\n            x(s(A,4, B,4, C,4, D,4),            G),\n\n            // runs\n            x(s(A,1, A,2, A,3),                 R),\n            x(s(B,8, B,9, B,10),                R),\n            x(s(J,J, C,2, C,3),                 R,  6),\n            x(s(D,8, D,9, J,J, D,11),           R,  38),\n            x(s(D,8, D,9, J,J, J,J),            R,  38),\n\n            // sames\n            x(s(A,1, A,1),                      S),\n            x(s(B,4, B,4, B,4),                 S),\n            x(s(C,8, C,8),                      S),\n            x(s(D,3, D,3),                      S),\n\n            // doubt-cases, assume group (TODO: verify this is correct)\n            x(s(J,J, J,J, D,4),                 G,  4*3),\n            x(s(A,7, J,J, J,J),                 G,  7*3),\n            x(s(J,J, D,9, J,J),                 G,  9*3),\n            x(s(J,J, J,J, J,J),                 G,  1),\n\n            // --- invalid sets\n            x(s(B,1, A,2, A,3),                 I), // not same colour\n            x(s(D,11, D,12, J,J, J,J),          I), // last joker is 14\n            x(s(B,1, B,1, A,1),                 I), // duplicate B1\n            x(s(A,1, A,2, A,3, A,5),            I), // gap A4\n            x(s(J,J, A,1, J,J, B,1, C,1),       I), // one J replaces D1, then nothing left to replace\n            x(s(A,1, A,2),                      I), // short\n            x(s(B,1),                           I), // shorter\n            x(s(A,5, A,6),                      I), // short\n    };\n\n    for (Object[] o : sets) {\n\n        TileSet s = (TileSet) o[0];\n        Type t = (Type) o[1];\n        int v = (Integer) o[2];\n\n        System.out.println(s);\n\n        assertEquals(t, s.getType());\n        assertEquals(v, s.getValue());\n\n        // test isValid, though it's Too Simple To Break(R)\n        if (t == Type.INVALID) assertFalse(s.isValid());\n        else assertTrue(s.isValid());\n    }\n\n}\n</code></pre>\n\n<p>Because it's all in one test method, the whole test stops as soon as one element in the array fails. Is there a way around that, without making a method for each test item?\nMaybe something with reflection?</p>\n"},{"tags":["java","android","cryptography","sha1"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1697560434,"post_id":77310697,"comment_id":136294134,"body_markdown":"This may not be possible. There is no guarantee that implementations for SHA1PRNG are identical across platforms and even versions. For key derivations, key derivation functions like PBKDF2 or the more modern Argon2 should be used, but not SecureRandom/SHA1PRNG, see [here](https://stackoverflow.com/a/60118857/9014097).","body":"This may not be possible. There is no guarantee that implementations for SHA1PRNG are identical across platforms and even versions. For key derivations, key derivation functions like PBKDF2 or the more modern Argon2 should be used, but not SecureRandom/SHA1PRNG, see <a href=\"https://stackoverflow.com/a/60118857/9014097\">here</a>."}],"owner":{"account_id":18139549,"reputation":1,"user_id":13193567,"display_name":"John Italo Cerna Ramos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697572436,"creation_date":1697559710,"question_id":77310697,"body_markdown":"```\r\npublic static byte[] generateKey(String password) throws Exception\r\n    {\r\n        byte[] keyStart = password.getBytes(&quot;UTF-8&quot;);\r\n\r\n        KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\r\n        SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;, &quot;Crypto&quot;);\r\n        sr.setSeed(keyStart);\r\n        kgen.init(128, sr);\r\n        SecretKey skey = kgen.generateKey();\r\n        return skey.getEncoded();\r\n    }\r\n```\r\n\r\n\r\nOn Android 5.1 it worked perfectly, I would like to recover my files, how to decrypt them on Android 11?","title":"How can I generate my key to decrypt files that I encrypted with a key that I generated with this code?","body":"<pre><code>public static byte[] generateKey(String password) throws Exception\n    {\n        byte[] keyStart = password.getBytes(&quot;UTF-8&quot;);\n\n        KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\n        SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;, &quot;Crypto&quot;);\n        sr.setSeed(keyStart);\n        kgen.init(128, sr);\n        SecretKey skey = kgen.generateKey();\n        return skey.getEncoded();\n    }\n</code></pre>\n<p>On Android 5.1 it worked perfectly, I would like to recover my files, how to decrypt them on Android 11?</p>\n"},{"tags":["java","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697572099,"creation_date":1697572099,"answer_id":77311857,"question_id":77311677,"body_markdown":"From the [docs](https://github.com/rest-assured/rest-assured/wiki/Usage#header-mergingoverwriting), try something like:\r\n\r\n    RestAssured.requestspecification = new RequestSpecBuilder()\r\n    .setConfig(RestAssuredConfig.config().headerConfig(headerConfig().overwriteHeadersWithName(&quot;Authorization&quot;)\r\n    .addHeader(&quot;Authorization&quot;: &quot;jwt token for user_2&quot;)\r\n    .build();","title":"Rest assured: How change value in header?","body":"<p>From the <a href=\"https://github.com/rest-assured/rest-assured/wiki/Usage#header-mergingoverwriting\" rel=\"nofollow noreferrer\">docs</a>, try something like:</p>\n<pre><code>RestAssured.requestspecification = new RequestSpecBuilder()\n.setConfig(RestAssuredConfig.config().headerConfig(headerConfig().overwriteHeadersWithName(&quot;Authorization&quot;)\n.addHeader(&quot;Authorization&quot;: &quot;jwt token for user_2&quot;)\n.build();\n</code></pre>\n"}],"owner":{"account_id":29694608,"reputation":1,"user_id":22758202,"display_name":"Michael Volkov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697572099,"creation_date":1697570041,"question_id":77311677,"body_markdown":"My test case uses two roles (user_1, user_2).\r\nDuring the test case I need change user_1 to user_2.\r\nI try to replace jwt token in authorization header for user_2, but I get behavior like this:\r\n\r\n\r\n\r\n```\r\n@BeforeAll\r\nstatic public void beforeAll() {\r\n\r\nRestAssured.requestspecification = new RequestSpecBuilder()\r\n.addHeader(&quot;Authorization&quot;: &quot;jwt token for user_1&quot;)\r\n.build();\r\n}\r\n\r\n@Test\r\npublic void test() {\r\n\r\n...test running with user_1...\r\n\r\nRestAssured.requestspecification = new RequestSpecBuilder()\r\n.addHeader(&quot;Authorization&quot;: &quot;jwt token for user_2&quot;)\r\n.build();\r\n\r\n...test running with user_2...\r\n}\r\n```\r\n\r\n\r\nand I see Authorization header has duplicate\r\n```\r\nStackRace:\r\n&quot;Authorization&quot;: &quot;jwt token for user_1&quot;\r\n&quot;Authorization&quot;: &quot;jwt token for user_2&quot;\r\n\r\n```\r\n\r\n\r\n  \r\n\r\nAnd the moment I have now idea","title":"Rest assured: How change value in header?","body":"<p>My test case uses two roles (user_1, user_2).\nDuring the test case I need change user_1 to user_2.\nI try to replace jwt token in authorization header for user_2, but I get behavior like this:</p>\n<pre><code>@BeforeAll\nstatic public void beforeAll() {\n\nRestAssured.requestspecification = new RequestSpecBuilder()\n.addHeader(&quot;Authorization&quot;: &quot;jwt token for user_1&quot;)\n.build();\n}\n\n@Test\npublic void test() {\n\n...test running with user_1...\n\nRestAssured.requestspecification = new RequestSpecBuilder()\n.addHeader(&quot;Authorization&quot;: &quot;jwt token for user_2&quot;)\n.build();\n\n...test running with user_2...\n}\n</code></pre>\n<p>and I see Authorization header has duplicate</p>\n<pre><code>StackRace:\n&quot;Authorization&quot;: &quot;jwt token for user_1&quot;\n&quot;Authorization&quot;: &quot;jwt token for user_2&quot;\n\n</code></pre>\n<p>And the moment I have now idea</p>\n"},{"tags":["java","hash","hashtable","chess"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1697569241,"post_id":77311520,"comment_id":136295577,"body_markdown":"If `Math.abs` generates a lot of collisions, there is no alternative that won&#39;t.","body":"If <code>Math.abs</code> generates a lot of collisions, there is no alternative that won&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697569298,"creation_date":1697569298,"answer_id":77311607,"question_id":77311520,"body_markdown":"If `Math.abs` generates a lot of collisions, there is no alternative that won&#39;t.  \r\n\r\nWith that said, applying `&amp; Integer.MAX_VALUE` instead of `Math.abs` would more effectively avoid the edge case where the key is `Long.MIN_VALUE`, where `Math.abs` would return a negative number.","title":"How to handle negative values in a chess transposition table hash function?","body":"<p>If <code>Math.abs</code> generates a lot of collisions, there is no alternative that won't.</p>\n<p>With that said, applying <code>&amp; Integer.MAX_VALUE</code> instead of <code>Math.abs</code> would more effectively avoid the edge case where the key is <code>Long.MIN_VALUE</code>, where <code>Math.abs</code> would return a negative number.</p>\n"},{"tags":[],"owner":{"account_id":4954,"reputation":4796,"user_id":7708,"accept_rate":81,"display_name":"Alan Krueger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697572035,"creation_date":1697572035,"answer_id":77311849,"question_id":77311520,"body_markdown":"`x % n` doesn&#39;t actually compute `x mod n`, it computes the remainder of `x / n`. The latter often matches the former, but not always.\r\n\r\nYou probably want to use `Math.floorMod(x, n)` instead.\r\n\r\nSee also https://stackoverflow.com/a/52377258/7708","title":"How to handle negative values in a chess transposition table hash function?","body":"<p><code>x % n</code> doesn't actually compute <code>x mod n</code>, it computes the remainder of <code>x / n</code>. The latter often matches the former, but not always.</p>\n<p>You probably want to use <code>Math.floorMod(x, n)</code> instead.</p>\n<p>See also <a href=\"https://stackoverflow.com/a/52377258/7708\">https://stackoverflow.com/a/52377258/7708</a></p>\n"}],"owner":{"account_id":10951154,"reputation":1,"user_id":8047482,"display_name":"kelseyde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697572035,"creation_date":1697568197,"question_id":77311520,"body_markdown":"I am writing a chess engine in Java. In order to optimize search speed, I implemented a [transposition table](https://www.chessprogramming.org/Transposition_Table) to store the results of previous searches. In transposition tables the position is typically represented as a 64-bit [Zobrist hash](https://www.chessprogramming.org/Zobrist_Hashing). \r\n\r\nHowever, since this is far too large to use as the index to the array containing the table values, chess engines use another hashing function to return a smaller number that can serve as the index. From what I have read online, the formula commonly used for this second hash function is:\r\n\r\n`index = zobristKey % entries.size`\r\n\r\nMy problem is that, in Java I use the (signed) long for my zobrist key, meaning that the resulting index will sometimes have a negative value, which cannot be used as an array index. I currently get around this by calling Math.abs(index), but as a result I see a lot of hash table collisions.\r\n\r\nMy general understanding of hash functions is not so strong, and I&#39;m sure that I&#39;m missing something in my current implementation. For any chess engine programmers/Java experts, what is the correct way to calculate a hash table index for a transposition table like this?\r\n\r\n\r\nMy hash function to create the hash table index from the Zobrist key:\r\n\r\n`    private int getIndex(long zobristKey) {\r\n        return Math.abs(Long.valueOf(zobristKey % entries.length).intValue());\r\n    }`","title":"How to handle negative values in a chess transposition table hash function?","body":"<p>I am writing a chess engine in Java. In order to optimize search speed, I implemented a <a href=\"https://www.chessprogramming.org/Transposition_Table\" rel=\"nofollow noreferrer\">transposition table</a> to store the results of previous searches. In transposition tables the position is typically represented as a 64-bit <a href=\"https://www.chessprogramming.org/Zobrist_Hashing\" rel=\"nofollow noreferrer\">Zobrist hash</a>.</p>\n<p>However, since this is far too large to use as the index to the array containing the table values, chess engines use another hashing function to return a smaller number that can serve as the index. From what I have read online, the formula commonly used for this second hash function is:</p>\n<p><code>index = zobristKey % entries.size</code></p>\n<p>My problem is that, in Java I use the (signed) long for my zobrist key, meaning that the resulting index will sometimes have a negative value, which cannot be used as an array index. I currently get around this by calling Math.abs(index), but as a result I see a lot of hash table collisions.</p>\n<p>My general understanding of hash functions is not so strong, and I'm sure that I'm missing something in my current implementation. For any chess engine programmers/Java experts, what is the correct way to calculate a hash table index for a transposition table like this?</p>\n<p>My hash function to create the hash table index from the Zobrist key:</p>\n<p><code>    private int getIndex(long zobristKey) { return Math.abs(Long.valueOf(zobristKey % entries.length).intValue()); }</code></p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":3473078,"reputation":482,"user_id":2906959,"display_name":"Prashant Zombade"},"score":0,"creation_date":1548757291,"post_id":54418646,"comment_id":95647186,"body_markdown":"Which package are you using? `org.json.simple.JSONArray` this has `isEmpty()` method. `org.json.JSONArray` this one does not have the method.","body":"Which package are you using? <code>org.json.simple.JSONArray</code> this has <code>isEmpty()</code> method. <code>org.json.JSONArray</code> this one does not have the method."},{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1548757293,"post_id":54418646,"comment_id":95647189,"body_markdown":"According to the documentation there is no `isEmpty()` method. Maybe you have an issue with IntelliJ, have you tried compiling from the command line? Maybe check File-&gt;Project structure to see that IntelliJ uses the right library","body":"According to the documentation there is no <code>isEmpty()</code> method. Maybe you have an issue with IntelliJ, have you tried compiling from the command line? Maybe check File-&gt;Project structure to see that IntelliJ uses the right library"},{"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"score":0,"creation_date":1548757418,"post_id":54418646,"comment_id":95647277,"body_markdown":"@PrashantZombade using `org.json.JSONArray`","body":"@PrashantZombade using <code>org.json.JSONArray</code>"},{"owner":{"account_id":3473078,"reputation":482,"user_id":2906959,"display_name":"Prashant Zombade"},"score":0,"creation_date":1548757686,"post_id":54418646,"comment_id":95647466,"body_markdown":"@DanielB., check with `org.json.simple.JSONArray` . You will have to handle `JSONException` while putting the objects.","body":"@DanielB., check with <code>org.json.simple.JSONArray</code> . You will have to handle <code>JSONException</code> while putting the objects."},{"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"score":0,"creation_date":1548759108,"post_id":54418646,"comment_id":95648349,"body_markdown":"@PrashantZombade There is a catch block for JSONException in my code. I&#39;m not using org.json.simple.JSONArray, Im not familiar with this pacakge.","body":"@PrashantZombade There is a catch block for JSONException in my code. I&#39;m not using org.json.simple.JSONArray, Im not familiar with this pacakge."},{"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"score":0,"creation_date":1548759362,"post_id":54418646,"comment_id":95648511,"body_markdown":"@JoakimDanielson In my project structure I have one JAR file that is relevant to JSON and it is named `json-20180813.jar`, which was downloaded from here https://mvnrepository.com/artifact/org.json/json/20180813, which belongs to `org.json`","body":"@JoakimDanielson In my project structure I have one JAR file that is relevant to JSON and it is named <code>json-20180813.jar</code>, which was downloaded from here <a href=\"https://mvnrepository.com/artifact/org.json/json/20180813\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.json/json/20180813</a>, which belongs to <code>org.json</code>"},{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1548760631,"post_id":54418646,"comment_id":95649270,"body_markdown":"Well did you try to build your project from outside of IntelliJ?","body":"Well did you try to build your project from outside of IntelliJ?"}],"answers":[{"tags":[],"owner":{"account_id":5042851,"reputation":860,"user_id":5362469,"display_name":"Naya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548757528,"creation_date":1548757528,"answer_id":54418864,"question_id":54418646,"body_markdown":"I believe you added to your project\r\n\r\n    compile group: &#39;com.googlecode.json-simple&#39;, name: &#39;json-simple&#39;, version: &#39;1.1&#39;\r\n\r\n\r\nCause it seems like you&#39;ve confused 2 classes: `org.json.JSONArray` with `org.json.simple.JSONArray`.\r\nFirst one doesn&#39;t have that method and the second one does.\r\nHere are code examples for both classes: \r\n\r\nhttps://www.programcreek.com/java-api-examples/org.json.JSONArray\r\n\r\nhttps://www.programcreek.com/java-api-examples/org.json.simple.JSONArray\r\n \nSo as a solution i’d recommend clean and rebuild the project.","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>I believe you added to your project</p>\n\n<pre><code>compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1'\n</code></pre>\n\n<p>Cause it seems like you've confused 2 classes: <code>org.json.JSONArray</code> with <code>org.json.simple.JSONArray</code>.\nFirst one doesn't have that method and the second one does.\nHere are code examples for both classes: </p>\n\n<p><a href=\"https://www.programcreek.com/java-api-examples/org.json.JSONArray\" rel=\"nofollow noreferrer\">https://www.programcreek.com/java-api-examples/org.json.JSONArray</a></p>\n\n<p><a href=\"https://www.programcreek.com/java-api-examples/org.json.simple.JSONArray\" rel=\"nofollow noreferrer\">https://www.programcreek.com/java-api-examples/org.json.simple.JSONArray</a></p>\n\n<p>So as a solution i’d recommend clean and rebuild the project.</p>\n"},{"tags":[],"owner":{"account_id":9829227,"reputation":424,"user_id":7281453,"display_name":"Alexey Simonov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553003608,"creation_date":1553003608,"answer_id":55242669,"question_id":54418646,"body_markdown":"I&#39;ve got the same error after i added to my project: \r\n\r\n    &lt;dependency&gt;    \r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-datatype-json-org&lt;/artifactId&gt;\r\n      &lt;version&gt;2.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n      &lt;version&gt;2.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter that I **cleaned and updated dependencies**, \r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n                &lt;version&gt;20180813&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-datatype-json-org&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.7&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n\r\nand it was gone.\r\n","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>I've got the same error after i added to my project: </p>\n\n<pre><code>&lt;dependency&gt;    \n  &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-datatype-json-org&lt;/artifactId&gt;\n  &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n  &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>After that I <strong>cleaned and updated dependencies</strong>, </p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20180813&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-json-org&lt;/artifactId&gt;\n            &lt;version&gt;2.9.7&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.json&lt;/groupId&gt;\n                    &lt;artifactId&gt;json&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>and it was gone.</p>\n"},{"tags":[],"owner":{"account_id":16164192,"reputation":251,"user_id":11669559,"display_name":"curious"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1568630303,"creation_date":1568630303,"answer_id":57955083,"question_id":54418646,"body_markdown":"If you are using spring boot, then you can try this:\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIt worked for me..","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>If you are using spring boot, then you can try this:</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>It worked for me..</p>\n"},{"tags":[],"owner":{"account_id":5098970,"reputation":53,"user_id":4089242,"display_name":"hanseltime"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1611351633,"creation_date":1611351633,"answer_id":65853121,"question_id":54418646,"body_markdown":"For anyone still looking at this, the main problem is with JSONAssert.\r\n\r\nTo confirm, use whatever dependency graph tool you have to verify that JSONAssert is adding &quot;android-json&quot;.\r\n\r\nExample for maven:\r\n\r\n    mvn dependency:tree\r\n\r\nandroid-json provides its own implementations of org.json.* objects that aren&#39;t up to date.  So exclude them as JSONAssert dependencies.\r\n\r\nExample for maven:\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\r\n       &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\r\n       &lt;version&gt;1.5.0&lt;/version&gt;\r\n       &lt;scope&gt;test&lt;/scope&gt;\r\n       &lt;exclusions&gt;\r\n           &lt;exclusion&gt;\r\n               &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\r\n               &lt;artifactId&gt;android-json&lt;/artifactId&gt;\r\n           &lt;/exclusion&gt;\r\n       &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThat should save you from this problem while letting you use the great output of JSONAssert!","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>For anyone still looking at this, the main problem is with JSONAssert.</p>\n<p>To confirm, use whatever dependency graph tool you have to verify that JSONAssert is adding &quot;android-json&quot;.</p>\n<p>Example for maven:</p>\n<pre><code>mvn dependency:tree\n</code></pre>\n<p>android-json provides its own implementations of org.json.* objects that aren't up to date.  So exclude them as JSONAssert dependencies.</p>\n<p>Example for maven:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\n   &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\n   &lt;version&gt;1.5.0&lt;/version&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n   &lt;exclusions&gt;\n       &lt;exclusion&gt;\n           &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\n           &lt;artifactId&gt;android-json&lt;/artifactId&gt;\n       &lt;/exclusion&gt;\n   &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>That should save you from this problem while letting you use the great output of JSONAssert!</p>\n"},{"tags":[],"owner":{"account_id":1909885,"reputation":381,"user_id":1723991,"display_name":"Gregzenegair"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625001364,"creation_date":1625001364,"answer_id":68185738,"question_id":54418646,"body_markdown":"You need to clean the package of *org.json* dependency from *spring-boot-starter-test artifactId*, here is how to clean any depency (considering I was using *spring-boot-starter-parent* 2.4.4)\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;android-json&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>You need to clean the package of <em>org.json</em> dependency from <em>spring-boot-starter-test artifactId</em>, here is how to clean any depency (considering I was using <em>spring-boot-starter-parent</em> 2.4.4)</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.json&lt;/groupId&gt;\n                &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\n                &lt;artifactId&gt;android-json&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":139035,"reputation":861,"user_id":344348,"accept_rate":86,"display_name":"Jeeka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697571904,"creation_date":1697571561,"answer_id":77311816,"question_id":54418646,"body_markdown":"I know this is old, but posting this in case this might be useful to someone.\r\n\r\nHere is what my updated dependency \r\n\r\n      &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n          &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\r\n          &lt;artifactId&gt;android-json&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nIn my case, the `JSONArray` from `com.vaadin.external.google` from `android-json` was being used, instead of `org.json.JSONArray` which has the `spliterator()` throwing \r\n\r\n`Caused by: java.lang.NoSuchMethodError: org.json.JSONArray.spliterator()Ljava/util/Spliterator;`\r\n\r\nhere is the code which threw that\r\n\r\n      JSONArray someJsonArray = getSomeJsonArray();\r\n      if (someJsonArray != null) {\r\n        List&lt;SecretEntry&gt; secretEntries = (List)StreamSupport.stream(someJsonArray.spliterator(), false).map((obj) -&gt; {\r\n          return (JSONObject)obj;\r\n    ...\r\n\r\nAnd, I could not exclude `org.skyscreamer.jsonassert`, since it was being used  by the `assertJSONEqual()` called by `andExpect(content().json(getJsonBody()))`\r\n\r\nhere is the code\r\n\r\n     private MockMvc mockMvc;\r\n\r\n     @Inject\r\n     private WebApplicationContext webApplicationContext;\r\n\r\n     mockMvc = webAppContextSetup(webApplicationContext).build();\r\n     MvcResult result = mockMvc.perform(\r\n            get(&quot;basePath&quot;).header(\r\n                &quot;headerName&quot;, &quot;headerValue&quot;)).andExpect(content().contentType(&quot;application/json&quot;))\r\n        .andExpect(status().isOk()).andExpect(content().json(getJsonBody())).andReturn();\r\n  }\r\n","title":"NoSuchMethodError using JSONArray in org.json","body":"<p>I know this is old, but posting this in case this might be useful to someone.</p>\n<p>Here is what my updated dependency</p>\n<pre><code>  &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;org.json&lt;/groupId&gt;\n      &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\n      &lt;artifactId&gt;android-json&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In my case, the <code>JSONArray</code> from <code>com.vaadin.external.google</code> from <code>android-json</code> was being used, instead of <code>org.json.JSONArray</code> which has the <code>spliterator()</code> throwing</p>\n<p><code>Caused by: java.lang.NoSuchMethodError: org.json.JSONArray.spliterator()Ljava/util/Spliterator;</code></p>\n<p>here is the code which threw that</p>\n<pre><code>  JSONArray someJsonArray = getSomeJsonArray();\n  if (someJsonArray != null) {\n    List&lt;SecretEntry&gt; secretEntries = (List)StreamSupport.stream(someJsonArray.spliterator(), false).map((obj) -&gt; {\n      return (JSONObject)obj;\n...\n</code></pre>\n<p>And, I could not exclude <code>org.skyscreamer.jsonassert</code>, since it was being used  by the <code>assertJSONEqual()</code> called by <code>andExpect(content().json(getJsonBody()))</code></p>\n<p>here is the code</p>\n<pre><code> private MockMvc mockMvc;\n\n @Inject\n private WebApplicationContext webApplicationContext;\n\n mockMvc = webAppContextSetup(webApplicationContext).build();\n MvcResult result = mockMvc.perform(\n        get(&quot;basePath&quot;).header(\n            &quot;headerName&quot;, &quot;headerValue&quot;)).andExpect(content().contentType(&quot;application/json&quot;))\n    .andExpect(status().isOk()).andExpect(content().json(getJsonBody())).andReturn();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12024,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1697571904,"creation_date":1548756883,"question_id":54418646,"body_markdown":"&lt;h1&gt;Error Message&lt;/h1&gt;\r\n\r\n&gt; java.lang.NoSuchMethodError: org.json.JSONArray.isEmpty()Z\r\n\r\n&lt;h1&gt;My Scenario&lt;/h1&gt;\r\n\r\nI tried using the `isEmpty()` method of `JSONArray`from the `org.json` JAR.\r\n\r\nI&#39;m using IntelliJ as my IDE. I&#39;m not using anything close to reflection in my code. I declare a `JSONArray`, and after some lines trying to check if it is empty or not, however I get this Error when trying to use `isEmpty()`.\r\n\r\nI did work around the issue simply by using `jsonArray.length() &gt; 0`, but the error message is what fascinates me. I looked into the de-compiled **.class** file of JSONArray, and the method `isEmpty()` **exists**, and has a **public access modifier**. Futhermore, InteliiJ is suggesting me I can use `isEmpty()` when typing the code. So what could be causing this error to occur?\r\n\r\n&lt;h1&gt;Code Example&lt;/h1&gt;\r\n\r\n    JSONArray filesJsonArray = new JSONArray();\r\n\r\n    JSONObject fileObject = new JSONObject();\r\n    fileObject.put(&quot;fileId&quot;,fileId);\r\n    fileObject.put(&quot;fileName&quot;,fileName);\r\n    fileObject.put(&quot;mimeType&quot;,mimeType);\r\n\r\n    filesJsonArray.put(fileObject);\r\n\r\n    if (!filesJsonArray.isEmpty()){ //the condition check here throws the error.\r\n    }\r\n\r\n(Catch blocks were dismissed for brevity) \r\n\r\n&lt;h1&gt;My Imports&lt;/h1&gt;\r\nIn the class I&#39;m using this code, this is all my imports\r\n\r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.*;\r\n    import java.nio.ByteBuffer;\r\n    import java.sql.*;\r\n    import java.util.Base64;","title":"NoSuchMethodError using JSONArray in org.json","body":"<h1>Error Message</h1>\n\n<blockquote>\n  <p>java.lang.NoSuchMethodError: org.json.JSONArray.isEmpty()Z</p>\n</blockquote>\n\n<h1>My Scenario</h1>\n\n<p>I tried using the <code>isEmpty()</code> method of <code>JSONArray</code>from the <code>org.json</code> JAR.</p>\n\n<p>I'm using IntelliJ as my IDE. I'm not using anything close to reflection in my code. I declare a <code>JSONArray</code>, and after some lines trying to check if it is empty or not, however I get this Error when trying to use <code>isEmpty()</code>.</p>\n\n<p>I did work around the issue simply by using <code>jsonArray.length() &gt; 0</code>, but the error message is what fascinates me. I looked into the de-compiled <strong>.class</strong> file of JSONArray, and the method <code>isEmpty()</code> <strong>exists</strong>, and has a <strong>public access modifier</strong>. Futhermore, InteliiJ is suggesting me I can use <code>isEmpty()</code> when typing the code. So what could be causing this error to occur?</p>\n\n<h1>Code Example</h1>\n\n<pre><code>JSONArray filesJsonArray = new JSONArray();\n\nJSONObject fileObject = new JSONObject();\nfileObject.put(\"fileId\",fileId);\nfileObject.put(\"fileName\",fileName);\nfileObject.put(\"mimeType\",mimeType);\n\nfilesJsonArray.put(fileObject);\n\nif (!filesJsonArray.isEmpty()){ //the condition check here throws the error.\n}\n</code></pre>\n\n<p>(Catch blocks were dismissed for brevity) </p>\n\n<h1>My Imports</h1>\n\n<p>In the class I'm using this code, this is all my imports</p>\n\n<pre><code>import org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.*;\nimport java.nio.ByteBuffer;\nimport java.sql.*;\nimport java.util.Base64;\n</code></pre>\n"},{"tags":["java","jms","activemq-artemis","open-liberty","microprofile"],"comments":[{"owner":{"account_id":14870107,"reputation":121,"user_id":10737839,"display_name":"Yuriy K"},"score":0,"creation_date":1697579672,"post_id":77307577,"comment_id":136297045,"body_markdown":"I&#39;ve never tried openliberty, but I can suggest to try to set hardcoded &quot;connection factory&quot; bean (initialize and inject into context). Looks like @Resource(lookup = &quot;jms/ArtemisConnectionFactory&quot;) annotation does not work at all. Hope it would help somehow.","body":"I&#39;ve never tried openliberty, but I can suggest to try to set hardcoded &quot;connection factory&quot; bean (initialize and inject into context). Looks like @Resource(lookup = &quot;jms/ArtemisConnectionFactory&quot;) annotation does not work at all. Hope it would help somehow."},{"owner":{"account_id":14870107,"reputation":121,"user_id":10737839,"display_name":"Yuriy K"},"score":0,"creation_date":1697579783,"post_id":77307577,"comment_id":136297059,"body_markdown":"Also you should not mix jakarta and javax. Javax is deprecated. Try to move all code to Jakarta.","body":"Also you should not mix jakarta and javax. Javax is deprecated. Try to move all code to Jakarta."},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1697793794,"post_id":77307577,"comment_id":136327220,"body_markdown":"Also looks like you are missing `resourceAdapter` configuration in your `server.xml`","body":"Also looks like you are missing <code>resourceAdapter</code> configuration in your <code>server.xml</code>"}],"owner":{"account_id":20345409,"reputation":316,"user_id":14923466,"display_name":"Alex_Pap"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697571849,"creation_date":1697533580,"question_id":77307577,"body_markdown":"I am trying to create a simple JMS example application using ActiveMQ Artemis but I am having issues with my Connection Factory that returns null. Below I am giving you my code, so far, as well as the error stack trace.\r\n\r\nI have searched across many questions but didn&#39;t managed to fix my issue. I think that I am doing something wrong either with my server.xml or my Configuration class or both them.\r\n\r\nAny suggestions as to what I am missing?\r\n\r\n**server.xml**\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;server description=&quot;new server&quot;&gt;\r\n\r\n    &lt;featureManager&gt;\r\n        &lt;feature&gt;jakartaee-9.1&lt;/feature&gt;\r\n    &lt;/featureManager&gt;\r\n\r\n    &lt;jmsConnectionFactory jndiName=&quot;jms/ArtemisConnectionFactory&quot;&gt;\r\n        &lt;properties.activemq\r\n                brokerURL=&quot;tcp://localhost:61616&quot;\r\n                userName=&quot;admin&quot;\r\n                password=&quot;admin&quot;/&gt;\r\n    &lt;/jmsConnectionFactory&gt;\r\n\r\n\r\n    &lt;jmsQueue id=&quot;jms/ArtemisQueue&quot; jndiName=&quot;jms/ArtemisQueue&quot;&gt;\r\n        &lt;properties.activemq queueName=&quot;Test_Queue&quot;/&gt;\r\n    &lt;/jmsQueue&gt;\r\n\r\n    &lt;basicRegistry id=&quot;basic&quot; realm=&quot;BasicRealm&quot;/&gt;\r\n\r\n    &lt;httpEndpoint id=&quot;defaultHttpEndpoint&quot;\r\n                  httpPort=&quot;9080&quot;\r\n                  httpsPort=&quot;9443&quot; /&gt;\r\n\r\n    &lt;applicationManager autoExpand=&quot;true&quot;/&gt;\r\n\r\n    &lt;ssl id=&quot;defaultSSLConfig&quot; trustDefaultCerts=&quot;true&quot; /&gt;\r\n&lt;/server&gt;\r\n```\r\n\r\n**JMS Configuration Class**\r\n```java\r\npackage com.demo.rest;\r\n\r\nimport jakarta.annotation.Resource;\r\nimport jakarta.enterprise.context.ApplicationScoped;\r\n\r\nimport javax.jms.ConnectionFactory;\r\nimport javax.jms.Queue;\r\n\r\n@ApplicationScoped\r\npublic class JMSConfig {\r\n\r\n    @Resource(lookup = &quot;jms/ArtemisConnectionFactory&quot;)\r\n    private ConnectionFactory connectionFactory;\r\n\r\n    @Resource(lookup = &quot;jms/ArtemisQueue&quot;)\r\n    private Queue queue;\r\n\r\n    public ConnectionFactory getConnectionFactory() {\r\n        return connectionFactory;\r\n    }\r\n\r\n    public Queue getQueue() {\r\n        return queue;\r\n    }\r\n}\r\n```\r\n\r\n**Message Producer**\r\n```java\r\npackage com.demo.rest;\r\n\r\nimport jakarta.enterprise.context.ApplicationScoped;\r\n\r\nimport javax.jms.Connection;\r\nimport javax.jms.JMSException;\r\nimport javax.jms.Session;\r\nimport javax.jms.TextMessage;\r\nimport jakarta.inject.Inject;\r\n\r\n@ApplicationScoped\r\npublic class MessageProducer {\r\n\r\n    @Inject\r\n    private JMSConfig jmsConfig;\r\n\r\n    public MessageProducer() {\r\n    }\r\n\r\n    public void sendMessage(String text) throws JMSException {\r\n        try (Connection connection = jmsConfig.getConnectionFactory().createConnection();\r\n             Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\r\n             javax.jms.MessageProducer producer = session.createProducer(jmsConfig.getQueue())) {\r\n\r\n            TextMessage message = session.createTextMessage(text);\r\n            producer.send(message);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Message Consumer**\r\n```java\r\npackage com.demo.rest;\r\n\r\nimport jakarta.ejb.ActivationConfigProperty;\r\nimport jakarta.ejb.MessageDriven;\r\nimport jakarta.jms.Message;\r\nimport jakarta.jms.MessageListener;\r\n\r\nimport javax.jms.JMSException;\r\nimport javax.jms.TextMessage;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\n\r\n@MessageDriven(activationConfig = {\r\n        @ActivationConfigProperty(propertyName = &quot;destinationType&quot;, propertyValue = &quot;javax.jms.Queue&quot;),\r\n        @ActivationConfigProperty(propertyName = &quot;destination&quot;, propertyValue = &quot;jms/ArtemisQueue&quot;),\r\n        @ActivationConfigProperty(propertyName = &quot;acknowledgeMode&quot;, propertyValue = &quot;Auto-acknowledge&quot;)\r\n})\r\npublic class MessageConsumerMDB implements MessageListener {\r\n\r\n    private static final Logger LOGGER = Logger.getLogger(MessageConsumerMDB.class.getName());\r\n\r\n    @Override\r\n    public void onMessage(Message message) {\r\n        if (message instanceof TextMessage) {\r\n            try {\r\n                String content = ((TextMessage) message).getText();\r\n                LOGGER.log(Level.INFO, &quot;Received message: &quot; + content);\r\n            } catch (JMSException e) {\r\n                LOGGER.log(Level.SEVERE, &quot;Error reading message&quot;, e);\r\n            }\r\n        } else {\r\n            LOGGER.log(Level.WARNING, &quot;Received non-text message&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\n[ERROR   ] CWOWB1000E: A CDI error has occurred: CWNEN0030E: The server was unable to obtain an object instance for the java:comp/env/jms/ArtemisConnectionFactory reference.  The exception message was: CWNEN1004E: The server was unable to find the jms/ArtemisConnectionFactory default binding with the javax.jms.ConnectionFactory type for the java:comp/env/jms/ArtemisConnectionFactory reference.\r\n[ERROR   ] CWOWB1000E: A CDI error has occurred: CWNEN0030E: The server was unable to obtain an object instance for the java:comp/env/jms/ArtemisConnectionFactory reference.  The exception message was: CWNEN1004E: The server was unable to find the jms/ArtemisConnectionFactory default binding with the javax.jms.ConnectionFactory type for the java:comp/env/jms/ArtemisConnectionFactory reference.\r\n[ERROR   ] SRVE0777E: Exception thrown by application class &#39;org.jboss.resteasy.core.ExceptionHandler.handleApplicationException:105&#39;\r\norg.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException: Cannot invoke &quot;javax.jms.ConnectionFactory.createConnection()&quot; because the return value of &quot;com.demo.rest.JMSConfig.getConnectionFactory()&quot; is null\r\n\tat org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:105)\r\n\tat [internal classes]\r\n```","title":"Injected JMS ConnectionFactory is null in simple JMS example using ActiveMQ Artemis with OpenLiberty","body":"<p>I am trying to create a simple JMS example application using ActiveMQ Artemis but I am having issues with my Connection Factory that returns null. Below I am giving you my code, so far, as well as the error stack trace.</p>\n<p>I have searched across many questions but didn't managed to fix my issue. I think that I am doing something wrong either with my server.xml or my Configuration class or both them.</p>\n<p>Any suggestions as to what I am missing?</p>\n<p><strong>server.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;server description=&quot;new server&quot;&gt;\n\n    &lt;featureManager&gt;\n        &lt;feature&gt;jakartaee-9.1&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;jmsConnectionFactory jndiName=&quot;jms/ArtemisConnectionFactory&quot;&gt;\n        &lt;properties.activemq\n                brokerURL=&quot;tcp://localhost:61616&quot;\n                userName=&quot;admin&quot;\n                password=&quot;admin&quot;/&gt;\n    &lt;/jmsConnectionFactory&gt;\n\n\n    &lt;jmsQueue id=&quot;jms/ArtemisQueue&quot; jndiName=&quot;jms/ArtemisQueue&quot;&gt;\n        &lt;properties.activemq queueName=&quot;Test_Queue&quot;/&gt;\n    &lt;/jmsQueue&gt;\n\n    &lt;basicRegistry id=&quot;basic&quot; realm=&quot;BasicRealm&quot;/&gt;\n\n    &lt;httpEndpoint id=&quot;defaultHttpEndpoint&quot;\n                  httpPort=&quot;9080&quot;\n                  httpsPort=&quot;9443&quot; /&gt;\n\n    &lt;applicationManager autoExpand=&quot;true&quot;/&gt;\n\n    &lt;ssl id=&quot;defaultSSLConfig&quot; trustDefaultCerts=&quot;true&quot; /&gt;\n&lt;/server&gt;\n</code></pre>\n<p><strong>JMS Configuration Class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.demo.rest;\n\nimport jakarta.annotation.Resource;\nimport jakarta.enterprise.context.ApplicationScoped;\n\nimport javax.jms.ConnectionFactory;\nimport javax.jms.Queue;\n\n@ApplicationScoped\npublic class JMSConfig {\n\n    @Resource(lookup = &quot;jms/ArtemisConnectionFactory&quot;)\n    private ConnectionFactory connectionFactory;\n\n    @Resource(lookup = &quot;jms/ArtemisQueue&quot;)\n    private Queue queue;\n\n    public ConnectionFactory getConnectionFactory() {\n        return connectionFactory;\n    }\n\n    public Queue getQueue() {\n        return queue;\n    }\n}\n</code></pre>\n<p><strong>Message Producer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.demo.rest;\n\nimport jakarta.enterprise.context.ApplicationScoped;\n\nimport javax.jms.Connection;\nimport javax.jms.JMSException;\nimport javax.jms.Session;\nimport javax.jms.TextMessage;\nimport jakarta.inject.Inject;\n\n@ApplicationScoped\npublic class MessageProducer {\n\n    @Inject\n    private JMSConfig jmsConfig;\n\n    public MessageProducer() {\n    }\n\n    public void sendMessage(String text) throws JMSException {\n        try (Connection connection = jmsConfig.getConnectionFactory().createConnection();\n             Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n             javax.jms.MessageProducer producer = session.createProducer(jmsConfig.getQueue())) {\n\n            TextMessage message = session.createTextMessage(text);\n            producer.send(message);\n        }\n    }\n}\n</code></pre>\n<p><strong>Message Consumer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.demo.rest;\n\nimport jakarta.ejb.ActivationConfigProperty;\nimport jakarta.ejb.MessageDriven;\nimport jakarta.jms.Message;\nimport jakarta.jms.MessageListener;\n\nimport javax.jms.JMSException;\nimport javax.jms.TextMessage;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\n@MessageDriven(activationConfig = {\n        @ActivationConfigProperty(propertyName = &quot;destinationType&quot;, propertyValue = &quot;javax.jms.Queue&quot;),\n        @ActivationConfigProperty(propertyName = &quot;destination&quot;, propertyValue = &quot;jms/ArtemisQueue&quot;),\n        @ActivationConfigProperty(propertyName = &quot;acknowledgeMode&quot;, propertyValue = &quot;Auto-acknowledge&quot;)\n})\npublic class MessageConsumerMDB implements MessageListener {\n\n    private static final Logger LOGGER = Logger.getLogger(MessageConsumerMDB.class.getName());\n\n    @Override\n    public void onMessage(Message message) {\n        if (message instanceof TextMessage) {\n            try {\n                String content = ((TextMessage) message).getText();\n                LOGGER.log(Level.INFO, &quot;Received message: &quot; + content);\n            } catch (JMSException e) {\n                LOGGER.log(Level.SEVERE, &quot;Error reading message&quot;, e);\n            }\n        } else {\n            LOGGER.log(Level.WARNING, &quot;Received non-text message&quot;);\n        }\n    }\n}\n</code></pre>\n<pre><code>[ERROR   ] CWOWB1000E: A CDI error has occurred: CWNEN0030E: The server was unable to obtain an object instance for the java:comp/env/jms/ArtemisConnectionFactory reference.  The exception message was: CWNEN1004E: The server was unable to find the jms/ArtemisConnectionFactory default binding with the javax.jms.ConnectionFactory type for the java:comp/env/jms/ArtemisConnectionFactory reference.\n[ERROR   ] CWOWB1000E: A CDI error has occurred: CWNEN0030E: The server was unable to obtain an object instance for the java:comp/env/jms/ArtemisConnectionFactory reference.  The exception message was: CWNEN1004E: The server was unable to find the jms/ArtemisConnectionFactory default binding with the javax.jms.ConnectionFactory type for the java:comp/env/jms/ArtemisConnectionFactory reference.\n[ERROR   ] SRVE0777E: Exception thrown by application class 'org.jboss.resteasy.core.ExceptionHandler.handleApplicationException:105'\norg.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException: Cannot invoke &quot;javax.jms.ConnectionFactory.createConnection()&quot; because the return value of &quot;com.demo.rest.JMSConfig.getConnectionFactory()&quot; is null\n    at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:105)\n    at [internal classes]\n</code></pre>\n"},{"tags":["java","kotlin","gradle"],"comments":[{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1697572308,"post_id":77311760,"comment_id":136296019,"body_markdown":"Does this answer your question? [Gradle : Copy different properties file depending on the environment and create jar](https://stackoverflow.com/questions/36771697/gradle-copy-different-properties-file-depending-on-the-environment-and-create)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/36771697/gradle-copy-different-properties-file-depending-on-the-environment-and-create\">Gradle : Copy different properties file depending on the environment and create jar</a>"},{"owner":{"account_id":5858276,"reputation":476,"user_id":4614867,"accept_rate":100,"display_name":"StragaSevera"},"score":0,"creation_date":1698867555,"post_id":77311760,"comment_id":136460661,"body_markdown":"Yes, that&#39;s what I need, thanks!","body":"Yes, that&#39;s what I need, thanks!"}],"owner":{"account_id":5858276,"reputation":476,"user_id":4614867,"accept_rate":100,"display_name":"StragaSevera"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697571048,"creation_date":1697571048,"question_id":77311760,"body_markdown":"What I have is: a `db.properties file`, my program reads the information about my DB connection from this file.\r\n\r\nWhat I want is: to have multiple files, like `db-dev.properties` and `db-staging.properties`, and when I build the app, I pass an argument to Gradle that forces it to use the contents of `db-X.properties` as a `db.properties` file. (Or maybe switch it based on an environment variable, if that&#39;s easier).\r\n\r\nI don&#39;t use Spring or anything like that, I want to get this behaviour via just pure Gradle. Is there a reasonable way to do it?","title":"With Gradle, how do I switch a file contents when building based on an argument to build command?","body":"<p>What I have is: a <code>db.properties file</code>, my program reads the information about my DB connection from this file.</p>\n<p>What I want is: to have multiple files, like <code>db-dev.properties</code> and <code>db-staging.properties</code>, and when I build the app, I pass an argument to Gradle that forces it to use the contents of <code>db-X.properties</code> as a <code>db.properties</code> file. (Or maybe switch it based on an environment variable, if that's easier).</p>\n<p>I don't use Spring or anything like that, I want to get this behaviour via just pure Gradle. Is there a reasonable way to do it?</p>\n"},{"tags":["java","postgresql","multithreading","transactions","apache-camel"],"comments":[{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":3,"creation_date":1697093759,"post_id":77278217,"comment_id":136236568,"body_markdown":"I don&#39;t quite understand your algorithm. Research where the transaction boundaries are. Anyway, why don&#39;t you solve the problem in the natural way, by creating a unique constraint that prevents duplicate messages from being inserted?","body":"I don&#39;t quite understand your algorithm. Research where the transaction boundaries are. Anyway, why don&#39;t you solve the problem in the natural way, by creating a unique constraint that prevents duplicate messages from being inserted?"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1697137856,"post_id":77278217,"comment_id":136245582,"body_markdown":"The unique constraint is already there. The issue is that part of the processing, as I said in my question, some other data is inserted/updated before getting there. When the unique constraint violation happens all those data changes have to be rollbacked but still the duplicate has to be committed into the exception table. In Apache Camel we achieved the rollback by using `setRollbackOnly onException()` part of the route and opening a new sub route marked `transacted(&quot;PROPAGATION_REQUIRED_NEW&quot;)` but it did not work. With this approach we tried to detect duplicates part of the top transaction","body":"The unique constraint is already there. The issue is that part of the processing, as I said in my question, some other data is inserted/updated before getting there. When the unique constraint violation happens all those data changes have to be rollbacked but still the duplicate has to be committed into the exception table. In Apache Camel we achieved the rollback by using <code>setRollbackOnly onException()</code> part of the route and opening a new sub route marked <code>transacted(&quot;PROPAGATION_REQUIRED_NEW&quot;)</code> but it did not work. With this approach we tried to detect duplicates part of the top transaction"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1697138716,"post_id":77278217,"comment_id":136245734,"body_markdown":"The algorithm is not that complex, but maybe the way I explained it is :-) Two threads are trying to insert the same primary key into the `key_locking` table. One succeeds while the other one is blocked. When the `winning thread` finishes and commits its data it takes a millisecond or two before the blocked thread can see that data. The Java code presented in the question is run by two threads at the same time and was presented to give an idea about how we reached the issue.","body":"The algorithm is not that complex, but maybe the way I explained it is :-) Two threads are trying to insert the same primary key into the <code>key_locking</code> table. One succeeds while the other one is blocked. When the <code>winning thread</code> finishes and commits its data it takes a millisecond or two before the blocked thread can see that data. The Java code presented in the question is run by two threads at the same time and was presented to give an idea about how we reached the issue."},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1697160211,"post_id":77278217,"comment_id":136248076,"body_markdown":"I still don&#39;t see the need for the `key_locking` table. Just do all your inserts in a single transaction, then they all get rolled back on a unique key violation. When that exception happens and the inserts are rolled back, write the row into the exception table.","body":"I still don&#39;t see the need for the <code>key_locking</code> table. Just do all your inserts in a single transaction, then they all get rolled back on a unique key violation. When that exception happens and the inserts are rolled back, write the row into the exception table."},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1697224954,"post_id":77278217,"comment_id":136258121,"body_markdown":"If everything is rollbacked and the message is gone from Kafka, how do you get the chance to then insert into the exception table? I assume you are aware Kafka does not support XA (2PC) transactions","body":"If everything is rollbacked and the message is gone from Kafka, how do you get the chance to then insert into the exception table? I assume you are aware Kafka does not support XA (2PC) transactions"},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1697437052,"post_id":77278217,"comment_id":136274814,"body_markdown":"After the rollback, you start a new transaction that inserts into the exception table. Or you use a subtransaction by setting a savepoint, `ROLLBACK TO SAVEPOINT` in the event of a problem and insert into the exception table in the original transaction.","body":"After the rollback, you start a new transaction that inserts into the exception table. Or you use a subtransaction by setting a savepoint, <code>ROLLBACK TO SAVEPOINT</code> in the event of a problem and insert into the exception table in the original transaction."},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1697438554,"post_id":77278217,"comment_id":136275044,"body_markdown":"Suspending the current transaction and starting a new autonomous one was the very first that we tried. Maybe not used properly in the Camel context and we could not get it to work. Then we came to this locking solution. Anyway in the meantime we changed the design a bit so we solved the issue. However the question still stands up: why two consecutive queries to the database bring different results when nothing else than the external tread modified the data.","body":"Suspending the current transaction and starting a new autonomous one was the very first that we tried. Maybe not used properly in the Camel context and we could not get it to work. Then we came to this locking solution. Anyway in the meantime we changed the design a bit so we solved the issue. However the question still stands up: why two consecutive queries to the database bring different results when nothing else than the external tread modified the data."},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1697439181,"post_id":77278217,"comment_id":136275142,"body_markdown":"There is no autonomous transaction. The usual workaround is to use a second database connection.","body":"There is no autonomous transaction. The usual workaround is to use a second database connection."},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1697483259,"post_id":77278217,"comment_id":136282979,"body_markdown":"it seems like others asked the same question: https://stackoverflow.com/questions/15829933/postgresql-commited-data-not-visible\nThat post gave me some ideas to check for as we do use connections pool and have no way to control which transaction starts first. However, I still hope something is wrong with our setup, not being able to see committed data is a very dangerous thing.","body":"it seems like others asked the same question: <a href=\"https://stackoverflow.com/questions/15829933/postgresql-commited-data-not-visible\" title=\"postgresql commited data not visible\">stackoverflow.com/questions/15829933/&hellip;</a> That post gave me some ideas to check for as we do use connections pool and have no way to control which transaction starts first. However, I still hope something is wrong with our setup, not being able to see committed data is a very dangerous thing."}],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697569438,"creation_date":1697092614,"question_id":77278217,"body_markdown":"We have a Spring Boot micro-service based on Apache Camel consuming messages from a Kafka topic doing some complex mappings and saving it to a PostgreSQL database in a few tables.\r\n\r\nSometimes during Kafka patching part of our scheduled maintenance we noticed the same message can be delivered more than once at exactly the same time which is not something we are happy about.\r\n\r\nTo address this we created a `key_locking` table to block the threads processing duplicates:\r\n\r\n    CREATE TABLE IF NOT EXISTS key_locking VARCHAR(50) PRIMARY KEY;\r\n\r\nThe idea about this was that every single thread getting the same Kafka message will try to `INSERT` and immediately `DELETE` the key in this `key_locking` table and if able to will continue with processing otherwise it will block waiting for the &quot;wining thread&quot; to either commit or rollback it&#39;s transaction. If commit then the &quot;winning thread&quot; will already saved some data in the business tables. Once the commit is done the blocked thread will be able to go ahead with the blocked `INSERT` then `DELETE` the same key. After doing this will check the business table if data for this Kafka message has already been created and if so it will insert the duplicate message into an exception table.\r\n\r\n    private boolean checkDuplicateByLocking(String key) {\r\n      try {\r\n        log.info(&quot;Inserting key={} into key_locking table{}&quot;, key);\r\n        jdbcTemplate.update(&quot;INSERT INTO key_locking (key) VALUES (?)&quot;, key);\r\n        log.info(&quot;Inserted key={} into key_locking&quot;, key);\r\n        \r\n        jdbcTemplate.update(&quot;DELETE FROM key_locking WHERE key=?&quot;, key);\r\n        log.info(&quot;Deleted key={} from key_locking&quot;, key);\r\n        \r\n        var duplicateCheckResultJdbc = jdbcTemplate.queryForObject(\r\n            String.format(&quot;SELECT count(*) FROM some_table WHERE key = &#39;%s&#39;&quot;, key), Long.class) &gt; 0;\r\n        var duplicateCheckResult = eventExtRepository.findByHdrId(key).isPresent();\r\n        log.info(&quot;Duplicate check result for jdbc template is = &quot; + duplicateCheckResultJdbc);\r\n        log.info(&quot;Duplicate check result for repository is = &quot; + duplicateCheckResult);\r\n        \r\n        return duplicateCheckResultJdbc;\r\n      } catch (Exception e) {\r\n        log.info(&quot;Unable to lock key&quot;, e);\r\n        return true;\r\n      }\r\n    }\r\n\r\nThen we created an integration test injecting duplicates on purpose and observed the logs.\r\n\r\nIn most of the runs it works as expected. You can always see one of the threads being blocked in the logs at `Inserting key=xyz into key_locking table` with the the log entry `Inserted key=xyz into key_locking` always popping up in the logs after the &quot;winning thread&quot; puts in the logs `Finished processing message with key=xyz`. However, when it fails we can notice in the logs that `duplicateCheckResultJdbc` is `false` but `duplicateCheckResult` is `true` which makes absolutely no sense. Changing the jdbcTemplate and repository call order has the same effect. The distance in the logs between the two counters is one or two milliseconds.\r\n\r\nMy question is how this could be possible. Once the data is committed by the other thread it should be visible everywhere no matter what when under `READ_COMMITTED` transaction insolation level. But I cannot spot anything wrong in what we are doing.\r\n\r\n**UPDATE:**\r\nI admit the description of the issue we encounter is a bit complex. Regardless of the scenario that causes it the question is how is it possible to not see committed data in a thread immediately after it was committed by a different thread. My explanation above was just to give you an idea about how we reached that issue.","title":"PostgreSQL unable to see data after being committed in a different thread for a very short while","body":"<p>We have a Spring Boot micro-service based on Apache Camel consuming messages from a Kafka topic doing some complex mappings and saving it to a PostgreSQL database in a few tables.</p>\n<p>Sometimes during Kafka patching part of our scheduled maintenance we noticed the same message can be delivered more than once at exactly the same time which is not something we are happy about.</p>\n<p>To address this we created a <code>key_locking</code> table to block the threads processing duplicates:</p>\n<pre><code>CREATE TABLE IF NOT EXISTS key_locking VARCHAR(50) PRIMARY KEY;\n</code></pre>\n<p>The idea about this was that every single thread getting the same Kafka message will try to <code>INSERT</code> and immediately <code>DELETE</code> the key in this <code>key_locking</code> table and if able to will continue with processing otherwise it will block waiting for the &quot;wining thread&quot; to either commit or rollback it's transaction. If commit then the &quot;winning thread&quot; will already saved some data in the business tables. Once the commit is done the blocked thread will be able to go ahead with the blocked <code>INSERT</code> then <code>DELETE</code> the same key. After doing this will check the business table if data for this Kafka message has already been created and if so it will insert the duplicate message into an exception table.</p>\n<pre><code>private boolean checkDuplicateByLocking(String key) {\n  try {\n    log.info(&quot;Inserting key={} into key_locking table{}&quot;, key);\n    jdbcTemplate.update(&quot;INSERT INTO key_locking (key) VALUES (?)&quot;, key);\n    log.info(&quot;Inserted key={} into key_locking&quot;, key);\n    \n    jdbcTemplate.update(&quot;DELETE FROM key_locking WHERE key=?&quot;, key);\n    log.info(&quot;Deleted key={} from key_locking&quot;, key);\n    \n    var duplicateCheckResultJdbc = jdbcTemplate.queryForObject(\n        String.format(&quot;SELECT count(*) FROM some_table WHERE key = '%s'&quot;, key), Long.class) &gt; 0;\n    var duplicateCheckResult = eventExtRepository.findByHdrId(key).isPresent();\n    log.info(&quot;Duplicate check result for jdbc template is = &quot; + duplicateCheckResultJdbc);\n    log.info(&quot;Duplicate check result for repository is = &quot; + duplicateCheckResult);\n    \n    return duplicateCheckResultJdbc;\n  } catch (Exception e) {\n    log.info(&quot;Unable to lock key&quot;, e);\n    return true;\n  }\n}\n</code></pre>\n<p>Then we created an integration test injecting duplicates on purpose and observed the logs.</p>\n<p>In most of the runs it works as expected. You can always see one of the threads being blocked in the logs at <code>Inserting key=xyz into key_locking table</code> with the the log entry <code>Inserted key=xyz into key_locking</code> always popping up in the logs after the &quot;winning thread&quot; puts in the logs <code>Finished processing message with key=xyz</code>. However, when it fails we can notice in the logs that <code>duplicateCheckResultJdbc</code> is <code>false</code> but <code>duplicateCheckResult</code> is <code>true</code> which makes absolutely no sense. Changing the jdbcTemplate and repository call order has the same effect. The distance in the logs between the two counters is one or two milliseconds.</p>\n<p>My question is how this could be possible. Once the data is committed by the other thread it should be visible everywhere no matter what when under <code>READ_COMMITTED</code> transaction insolation level. But I cannot spot anything wrong in what we are doing.</p>\n<p><strong>UPDATE:</strong>\nI admit the description of the issue we encounter is a bit complex. Regardless of the scenario that causes it the question is how is it possible to not see committed data in a thread immediately after it was committed by a different thread. My explanation above was just to give you an idea about how we reached that issue.</p>\n"},{"tags":["java","intellij-idea","compilation"],"answers":[{"tags":[],"owner":{"account_id":8970213,"reputation":687,"user_id":6689024,"display_name":"Juliano Macedo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677945663,"creation_date":1677942623,"answer_id":75636564,"question_id":75636364,"body_markdown":"You should create a `Java project` using the IntelliJ idea first, so it will create all the necessary files for the IDE to recognize it as a native Java project.\r\n\r\nThen, you can copy and paste your existing file codes into the `src` folder, respecting the Java module organization of:   \r\n`src &gt; main &gt; java &gt; your Files/Packages`  \r\n\r\nAlso, while creating your Java project, I recommend you to create it using `Gradle`, it will simplify a lot to maintaining the project dependencies.\r\n\r\n**References:**  \r\n - [Create your first Java application][1]\r\n - [Learn Idea features][2]\r\n - [Getting Started with Gradle][3]\r\n\r\n---\r\n\r\n### VS Code vs. IntelliJ Idea for Java projects\r\n\r\n - VS Code is a rich text editor like Sublime Text and Atom;  \r\n   - *You can turn VS Code into an IDE like, using plugins.* \r\n - IntelliJ Idea is a thoroughly professional IDE (Integrated development environment).\r\n\r\nFor Java projects, I recommend using IntelliJ Idea, however for a general-purpose code practice, go for VS Code for sure, its flexibility is incredible.\r\n - [IntelliJ IDEA vs. Microsoft Visual Studio Code][4]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/creating-and-running-your-first-java-application.html\r\n  [2]: https://www.jetbrains.com/help/idea/feature-trainer.html\r\n  [3]: https://www.jetbrains.com/help/idea/getting-started-with-gradle.html\r\n  [4]: https://www.trustradius.com/compare-products/intellij-idea-vs-microsoft-visual-studio-code","title":"This file in the editor in not runnable intelliJ idea using java","body":"<p>You should create a <code>Java project</code> using the IntelliJ idea first, so it will create all the necessary files for the IDE to recognize it as a native Java project.</p>\n<p>Then, you can copy and paste your existing file codes into the <code>src</code> folder, respecting the Java module organization of:<br />\n<code>src &gt; main &gt; java &gt; your Files/Packages</code></p>\n<p>Also, while creating your Java project, I recommend you to create it using <code>Gradle</code>, it will simplify a lot to maintaining the project dependencies.</p>\n<p><strong>References:</strong></p>\n<ul>\n<li><a href=\"https://www.jetbrains.com/help/idea/creating-and-running-your-first-java-application.html\" rel=\"nofollow noreferrer\">Create your first Java application</a></li>\n<li><a href=\"https://www.jetbrains.com/help/idea/feature-trainer.html\" rel=\"nofollow noreferrer\">Learn Idea features</a></li>\n<li><a href=\"https://www.jetbrains.com/help/idea/getting-started-with-gradle.html\" rel=\"nofollow noreferrer\">Getting Started with Gradle</a></li>\n</ul>\n<hr />\n<h3>VS Code vs. IntelliJ Idea for Java projects</h3>\n<ul>\n<li>VS Code is a rich text editor like Sublime Text and Atom;\n<ul>\n<li><em>You can turn VS Code into an IDE like, using plugins.</em></li>\n</ul>\n</li>\n<li>IntelliJ Idea is a thoroughly professional IDE (Integrated development environment).</li>\n</ul>\n<p>For Java projects, I recommend using IntelliJ Idea, however for a general-purpose code practice, go for VS Code for sure, its flexibility is incredible.</p>\n<ul>\n<li><a href=\"https://www.trustradius.com/compare-products/intellij-idea-vs-microsoft-visual-studio-code\" rel=\"nofollow noreferrer\">IntelliJ IDEA vs. Microsoft Visual Studio Code</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1678072970,"creation_date":1678072970,"answer_id":75646818,"question_id":75636364,"body_markdown":"You could right-click the &quot;Sorting&quot; folder, and choose `Mark Directory as | Sources Root`. Then you should be able to run that Java code.\r\nIn IntelliJ IDEA, the folder including all Java packages should be marked as a source root to make it work. See here for details: https://www.jetbrains.com/help/idea/content-roots.html","title":"This file in the editor in not runnable intelliJ idea using java","body":"<p>You could right-click the &quot;Sorting&quot; folder, and choose <code>Mark Directory as | Sources Root</code>. Then you should be able to run that Java code.\nIn IntelliJ IDEA, the folder including all Java packages should be marked as a source root to make it work. See here for details: <a href=\"https://www.jetbrains.com/help/idea/content-roots.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/content-roots.html</a></p>\n"},{"tags":[],"owner":{"account_id":25448861,"reputation":119,"user_id":19250621,"display_name":"Denis Kinyua"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697569389,"creation_date":1697569389,"answer_id":77311619,"question_id":75636364,"body_markdown":"I had the same problem. What you need to do is on the top of the editor, click &#39;Current File&#39; selecetion like twice and it will appear. [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xI4oD.png","title":"This file in the editor in not runnable intelliJ idea using java","body":"<p>I had the same problem. What you need to do is on the top of the editor, click 'Current File' selecetion like twice and it will appear. <a href=\"https://i.stack.imgur.com/xI4oD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xI4oD.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25872761,"reputation":19,"user_id":19603368,"display_name":"G raj Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7939,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697569389,"creation_date":1677940709,"question_id":75636364,"body_markdown":"I installed intelliJ idea for the first time to code in java, before this IDE I used VS Code for the development and compilation. After installing I opened previously written code folders in IntelliJ which has the run button in grey showing &quot;this file in the editor is not runnable&quot;.\r\n\r\n[this is the directory structure with the code](https://i.stack.imgur.com/sZwyu.png)\r\n\r\nPreviously in VS Code these files were easily compiled but in IntelliJ idea I have no clue why it is happening.","title":"This file in the editor in not runnable intelliJ idea using java","body":"<p>I installed intelliJ idea for the first time to code in java, before this IDE I used VS Code for the development and compilation. After installing I opened previously written code folders in IntelliJ which has the run button in grey showing &quot;this file in the editor is not runnable&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/sZwyu.png\" rel=\"nofollow noreferrer\">this is the directory structure with the code</a></p>\n<p>Previously in VS Code these files were easily compiled but in IntelliJ idea I have no clue why it is happening.</p>\n"},{"tags":["java","database-design","datatemplate"],"answers":[{"tags":[],"owner":{"display_name":"user2104560"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1432545185,"creation_date":1413368219,"answer_id":26380034,"question_id":26375629,"body_markdown":"It seems [Spring Roo][1] is what I need. \r\n\r\n\r\n  [1]: http://docs.spring.io/spring-roo/","title":"Is there any standard approach for generating tables, web-views and request -handlers by entity description?","body":"<p>It seems <a href=\"http://docs.spring.io/spring-roo/\" rel=\"nofollow\">Spring Roo</a> is what I need. </p>\n"}],"owner":{"display_name":"user2104560"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1697628256,"accepted_answer_id":26380034,"answer_count":1,"score":-1,"last_activity_date":1697568850,"creation_date":1413353535,"question_id":26375629,"body_markdown":"My problem is  that I know description of some process and want to search some standard technology implementing such approach, but don&#39;t know the correct name. In short, I need &quot;objects-templating&quot; engine. In details, I need to automate the following process:\r\n\r\n 1. Admin/operator declares object description: fields, types, such as a\r\n    programmer declares a class, but not in the code, but in the web\r\n    interface. \r\n 2. Created in web-interface entity **forces automatic change of the DB structure** - a table is created or existing table updated.\r\n 3. Another person (user) presses presses add button and see **automatically generated view-form** for creating or updating an entity.\r\n\r\nSum up- I&#39;m looking for a technology which allows to create new objects with UI,automatically change DB structure, create view-forms for rendering/saving entity. If possible, **form-action handler must also be created automatically**, ie it generates a servlet / request mapping in controller, which inserts to DB/loads from DB.\r\n\r\n\r\n\r\nI&#39;m interested in Java technologies/frameworks as my question is asked in Java Web-App context.","title":"Is there any standard approach for generating tables, web-views and request -handlers by entity description?","body":"<p>My problem is  that I know description of some process and want to search some standard technology implementing such approach, but don't know the correct name. In short, I need \"objects-templating\" engine. In details, I need to automate the following process:</p>\n\n<ol>\n<li>Admin/operator declares object description: fields, types, such as a\nprogrammer declares a class, but not in the code, but in the web\ninterface. </li>\n<li>Created in web-interface entity <strong>forces automatic change of the DB structure</strong> - a table is created or existing table updated.</li>\n<li>Another person (user) presses presses add button and see <strong>automatically generated view-form</strong> for creating or updating an entity.</li>\n</ol>\n\n<p>Sum up- I'm looking for a technology which allows to create new objects with UI,automatically change DB structure, create view-forms for rendering/saving entity. If possible, <strong>form-action handler must also be created automatically</strong>, ie it generates a servlet / request mapping in controller, which inserts to DB/loads from DB.</p>\n\n<p>I'm interested in Java technologies/frameworks as my question is asked in Java Web-App context.</p>\n"},{"tags":["java","spring","apache-camel","dataformat","bean-io"],"answers":[{"tags":[],"owner":{"account_id":21116160,"reputation":143,"user_id":15523210,"display_name":"p23he"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697568363,"creation_date":1697568363,"answer_id":77311532,"question_id":77299387,"body_markdown":"I ended up using the `BeanWriter` class provided by the BeanIO library to marshal to an output file, although from my processor method instead of from my routes. I essentially copied the documentation here regarding marshalling: https://beanio.github.io/docs/","title":"Marshalling from data object results in empty file","body":"<p>I ended up using the <code>BeanWriter</code> class provided by the BeanIO library to marshal to an output file, although from my processor method instead of from my routes. I essentially copied the documentation here regarding marshalling: <a href=\"https://beanio.github.io/docs/\" rel=\"nofollow noreferrer\">https://beanio.github.io/docs/</a></p>\n"}],"owner":{"account_id":21116160,"reputation":143,"user_id":15523210,"display_name":"p23he"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77311532,"answer_count":1,"score":1,"last_activity_date":1697568363,"creation_date":1697430088,"question_id":77299387,"body_markdown":"In one of our legacy applications we would create data objects that contained data from our SQL tables, and then we would marshal them with the Apache Camel routes in XML DSL and the BeanIO formatting library. This worked fine. In our new application I am trying to emulate the same behaviour, but with the Java DSL routing instead. I&#39;m using Apache Camel 4.0.0, Spring 4.0.0, and BeanIO 3.4.0.\r\n\r\nThe routes look something like this:\r\n\r\n    BeanIODataFormat dataFormat = new BeanIODataFormat(&quot;path/beanioFormats/beanio_format.xml&quot;, &quot;FormatSourceName&quot;);\r\n\r\n    from(&quot;{{cron.process}}&quot;)\r\n            .log(LoggingLevel.INFO, &quot;Creating File&quot;)\r\n            .transform().method(&quot;fileGeneratorClass&quot;, &quot;generatorMethod&quot;)\r\n            .to(&quot;direct:marshalFile&quot;)\r\n            .end();\r\n\r\n    from(&quot;direct:marshalFile&quot;)\r\n            .marshal(dataFormat)\r\n            .to(&quot;file:{{output.file.path}}&quot;)\r\n            .end();\r\n\r\nwhile the beanio format file looks very standard and similar to what we had before, like so:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;beanio xmlns=&quot;http://www.beanio.org/2012/03&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://www.beanio.org/2012/03 http://www.beanio.org/2012/03/mapping.xsd&quot;&gt;\r\n\r\n    &lt;stream name=&quot;FormatSourceName&quot; format=&quot;fixedlength&quot;&gt;\r\n\r\n        &lt;group name=&quot;fileWrapperObject&quot; class=&quot;path.to.wrapper.class&quot;&gt;\r\n            &lt;record name=&quot;fileHeader&quot; class=&quot;path.to.header.class&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;&gt;\r\n                &lt;field name=&quot;fileRecordIdentifier&quot; rid=&quot;true&quot; length=&quot;3&quot; required=&quot;true&quot; literal=&quot;000&quot;/&gt;\r\n            &lt;/record&gt;\r\n    ... etc\r\n\r\n```\r\nand finally, the `generatorMethod` that sets the data object into the exchange is as such:\r\n\r\n```\r\n    public void generatorMethod(Exchange exchange) {\r\n\r\n        FileWrapperObject fileWrapperObject = new fileWrapperObject();\r\n\r\n        // fill it with data\r\n\r\n        LOG.info(&quot;Wrapper object created&quot;);\r\n\r\n        exchange.getIn().setBody(wrapper);\r\n\r\n        String fileName = &quot;fileName&quot;;\r\n        exchange.getIn().setHeader(Exchange.FILE_NAME, fileName);\r\n    }\r\n```\r\n\r\nI&#39;m certain the data object is not null nor are any of its fields, but the resulting file is always empty. Any clue on where I went wrong? My gut says it&#39;s the way I&#39;ve written the marshalling in the routes file, but I&#39;m not sure where to proceed, given the BeanIO documentation is rather bereft. \r\n\r\nThe main difference I see in the XML DSL based approach is that the dataFormats would be defined in the `&lt;camelContext&gt;` and then be accessed by ID, but to me, what I have written seems correct.","title":"Marshalling from data object results in empty file","body":"<p>In one of our legacy applications we would create data objects that contained data from our SQL tables, and then we would marshal them with the Apache Camel routes in XML DSL and the BeanIO formatting library. This worked fine. In our new application I am trying to emulate the same behaviour, but with the Java DSL routing instead. I'm using Apache Camel 4.0.0, Spring 4.0.0, and BeanIO 3.4.0.</p>\n<p>The routes look something like this:</p>\n<pre><code>BeanIODataFormat dataFormat = new BeanIODataFormat(&quot;path/beanioFormats/beanio_format.xml&quot;, &quot;FormatSourceName&quot;);\n\nfrom(&quot;{{cron.process}}&quot;)\n        .log(LoggingLevel.INFO, &quot;Creating File&quot;)\n        .transform().method(&quot;fileGeneratorClass&quot;, &quot;generatorMethod&quot;)\n        .to(&quot;direct:marshalFile&quot;)\n        .end();\n\nfrom(&quot;direct:marshalFile&quot;)\n        .marshal(dataFormat)\n        .to(&quot;file:{{output.file.path}}&quot;)\n        .end();\n</code></pre>\n<p>while the beanio format file looks very standard and similar to what we had before, like so:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;beanio xmlns=&quot;http://www.beanio.org/2012/03&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://www.beanio.org/2012/03 http://www.beanio.org/2012/03/mapping.xsd&quot;&gt;\n\n    &lt;stream name=&quot;FormatSourceName&quot; format=&quot;fixedlength&quot;&gt;\n\n        &lt;group name=&quot;fileWrapperObject&quot; class=&quot;path.to.wrapper.class&quot;&gt;\n            &lt;record name=&quot;fileHeader&quot; class=&quot;path.to.header.class&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;&gt;\n                &lt;field name=&quot;fileRecordIdentifier&quot; rid=&quot;true&quot; length=&quot;3&quot; required=&quot;true&quot; literal=&quot;000&quot;/&gt;\n            &lt;/record&gt;\n    ... etc\n\n</code></pre>\n<p>and finally, the <code>generatorMethod</code> that sets the data object into the exchange is as such:</p>\n<pre><code>    public void generatorMethod(Exchange exchange) {\n\n        FileWrapperObject fileWrapperObject = new fileWrapperObject();\n\n        // fill it with data\n\n        LOG.info(&quot;Wrapper object created&quot;);\n\n        exchange.getIn().setBody(wrapper);\n\n        String fileName = &quot;fileName&quot;;\n        exchange.getIn().setHeader(Exchange.FILE_NAME, fileName);\n    }\n</code></pre>\n<p>I'm certain the data object is not null nor are any of its fields, but the resulting file is always empty. Any clue on where I went wrong? My gut says it's the way I've written the marshalling in the routes file, but I'm not sure where to proceed, given the BeanIO documentation is rather bereft.</p>\n<p>The main difference I see in the XML DSL based approach is that the dataFormats would be defined in the <code>&lt;camelContext&gt;</code> and then be accessed by ID, but to me, what I have written seems correct.</p>\n"},{"tags":["java","spring","spring-boot","out-of-memory"],"owner":{"account_id":1182420,"reputation":5604,"user_id":1157070,"accept_rate":39,"display_name":"lowLatency"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697568057,"creation_date":1697552703,"question_id":77309872,"body_markdown":"Getting this error intermittently:\r\n\r\n&gt; RequestResponseBodyMethodProcessor : Read &quot;application/octet-stream;charset=UTF-8&quot; to [java.lang.OutOfMemoryError: Java heap space\r\n\r\n\r\nWhen calling this API:\r\n```\r\n@PostMapping(value = &quot;/blob&quot;, consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE, produces = {\r\n    MediaType.APPLICATION_JSON_VALUE})\r\npublic @ResponseBody ResponseEntity&lt;Map&lt;String, Object&gt;&gt; imageblob(HttpServletRequest request,\r\n                                                                          @RequestBody byte[] requestPayload) {\r\ntry (InputStream imagePayloadStream = new ByteArrayInputStream(requestPayload)) {\r\n    requestHandleService.publishImageBlob(imagePayloadStream, correlationId, cameraId, imageSequenceId);\r\n} catch (IOException e) {\r\n    return new ResponseEntity&lt;&gt;(responseMap, HttpStatus.INTERNAL_SERVER_ERROR);\r\n}\r\nreturn new ResponseEntity&lt;&gt;(responseMap, HttpStatus.OK);\r\n}\r\n```\r\nNote: requestPayload size is approx 1MB  \r\nNote1: using Spring boot 2.6  \r\nNote2: publishImageBlob is @Async as below\r\n\r\n```\r\n@Service\r\npublic class RequestHandleServiceImpl implements RequestHandleService {\r\n    @Override\r\n    @Async\r\n    public void publishImageBlob(InputStream imagePayloadStream(){\r\n        //logic\r\n    }\r\n}\r\n```","title":"RequestResponseBodyMethodProcessor : Read &quot;application/octet-stream;charset=UTF-8&quot; to [java.lang.OutOfMemoryError: Java heap space","body":"<p>Getting this error intermittently:</p>\n<blockquote>\n<p>RequestResponseBodyMethodProcessor : Read &quot;application/octet-stream;charset=UTF-8&quot; to [java.lang.OutOfMemoryError: Java heap space</p>\n</blockquote>\n<p>When calling this API:</p>\n<pre><code>@PostMapping(value = &quot;/blob&quot;, consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE, produces = {\n    MediaType.APPLICATION_JSON_VALUE})\npublic @ResponseBody ResponseEntity&lt;Map&lt;String, Object&gt;&gt; imageblob(HttpServletRequest request,\n                                                                          @RequestBody byte[] requestPayload) {\ntry (InputStream imagePayloadStream = new ByteArrayInputStream(requestPayload)) {\n    requestHandleService.publishImageBlob(imagePayloadStream, correlationId, cameraId, imageSequenceId);\n} catch (IOException e) {\n    return new ResponseEntity&lt;&gt;(responseMap, HttpStatus.INTERNAL_SERVER_ERROR);\n}\nreturn new ResponseEntity&lt;&gt;(responseMap, HttpStatus.OK);\n}\n</code></pre>\n<p>Note: requestPayload size is approx 1MB<br />\nNote1: using Spring boot 2.6<br />\nNote2: publishImageBlob is @Async as below</p>\n<pre><code>@Service\npublic class RequestHandleServiceImpl implements RequestHandleService {\n    @Override\n    @Async\n    public void publishImageBlob(InputStream imagePayloadStream(){\n        //logic\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","database","listview","javafx"],"comments":[{"owner":{"account_id":1692034,"reputation":3195,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697532771,"post_id":77307329,"comment_id":136288439,"body_markdown":"The typo in the @FXML statement is only here, in the question, and not in your code?","body":"The typo in the @FXML statement is only here, in the question, and not in your code?"},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":1,"creation_date":1697546365,"post_id":77307329,"comment_id":136291164,"body_markdown":"`AppCtrl controller = fxmlLoader.getController()`after  `fxmlLoader.load()` if you want the FXML properties to load","body":"<code>AppCtrl controller = fxmlLoader.getController()</code>after  <code>fxmlLoader.load()</code> if you want the FXML properties to load"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1697553935,"post_id":77307329,"comment_id":136292847,"body_markdown":"Add `e.printStackTrace();` to *both* of your catch blocks.  If something went wrong, you do want to know exactly what it was and where it occurred, right?","body":"Add <code>e.printStackTrace();</code> to <i>both</i> of your catch blocks.  If something went wrong, you do want to know exactly what it was and where it occurred, right?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1697554791,"post_id":77307329,"comment_id":136293069,"body_markdown":"Why are you even calling `controller.cargarDatos();` in the `Main`? Should you be using the `Controller&#39;s` `initialize` method?","body":"Why are you even calling <code>controller.cargarDatos();</code> in the <code>Main</code>? Should you be using the <code>Controller&#39;s</code> <code>initialize</code> method?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1697568055,"post_id":77307329,"comment_id":136295364,"body_markdown":"Off-topic: please use proper naming conventions when posting code.","body":"Off-topic: please use proper naming conventions when posting code."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697568022,"creation_date":1697568022,"answer_id":77311507,"question_id":77307329,"body_markdown":"`@FXML`-injected fields will be initialized to corresponding elements in the FXML file during the call to `FXMLLoader.load()`. Since you call \r\n\r\n```\r\nfxmlLoader.load()\r\n```\r\n\r\n*before* you call `fxmlLoader.setController(controller)`, at the time you call `load()` there is no controller, and so no initialization of the fields can be done.\r\n\r\nReverse the order of the calls:\r\n\r\n    public void start(Stage stage) throws IOException {\r\n        AppCtrl controller = new AppCtrl();\r\n\r\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;main.fxml&quot;));\r\n\r\n        fxmlLoader.setController(controller);\r\n\r\n        Scene scene = new Scene(fxmlLoader.load());\r\n\r\n        //Con esto se deberian cargar los datos de la BBDD,\r\n        //pero dice que es NULL\r\n        System.out.println(&quot;Beep&quot;);\r\n        controller.cargarDatos(); //Again, this is the line that provokes errors\r\n        System.out.println(&quot;Beep&quot;); //But it reaches here!!\r\n\r\n\r\n        stage.initStyle(StageStyle.TRANSPARENT);\r\n        scene.setFill(Color.TRANSPARENT);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n\r\n    }\r\n\r\n\r\nAssuming everything else (in code you haven&#39;t posted) is correct, then this should now mean that `MythosList` is no longer null. ","title":"I cannot connect my database with my javafx app listview","body":"<p><code>@FXML</code>-injected fields will be initialized to corresponding elements in the FXML file during the call to <code>FXMLLoader.load()</code>. Since you call</p>\n<pre><code>fxmlLoader.load()\n</code></pre>\n<p><em>before</em> you call <code>fxmlLoader.setController(controller)</code>, at the time you call <code>load()</code> there is no controller, and so no initialization of the fields can be done.</p>\n<p>Reverse the order of the calls:</p>\n<pre><code>public void start(Stage stage) throws IOException {\n    AppCtrl controller = new AppCtrl();\n\n    FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;main.fxml&quot;));\n\n    fxmlLoader.setController(controller);\n\n    Scene scene = new Scene(fxmlLoader.load());\n\n    //Con esto se deberian cargar los datos de la BBDD,\n    //pero dice que es NULL\n    System.out.println(&quot;Beep&quot;);\n    controller.cargarDatos(); //Again, this is the line that provokes errors\n    System.out.println(&quot;Beep&quot;); //But it reaches here!!\n\n\n    stage.initStyle(StageStyle.TRANSPARENT);\n    scene.setFill(Color.TRANSPARENT);\n    stage.setScene(scene);\n    stage.show();\n\n}\n</code></pre>\n<p>Assuming everything else (in code you haven't posted) is correct, then this should now mean that <code>MythosList</code> is no longer null.</p>\n"}],"owner":{"account_id":21001758,"reputation":11,"user_id":15432416,"display_name":"HoneyPot"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697568022,"creation_date":1697531478,"question_id":77307329,"body_markdown":"I&#39;m in need of help. I&#39;m making a simple app in javafx, the app has to connect with a database and return some data that I will show on a listview right as the app loads.\r\n\r\nThe thing is, that I can&#39;t find the reason why errors come back to me saying that the list in null.\r\n\r\nMy controller:\r\n\r\n```\r\npublic void cargarDatos(){\r\n\r\n        //MythosList.getItems().clear();\r\n\r\n        try {\r\n\r\n            //Creamos el array donde guardar los datos\r\n            List&lt;Mytho&gt; mythos = mythosDAO.obtenerMythos();\r\n\r\n            System.out.println(&quot;N&#250;mero de elementos en la lista: &quot; + mythos.size()); //This retrieves 3, which is the amount of lines I have in my database\r\n            MythosList.setItems(FXCollections.observableList(mythos)); //This is the line that provokes the error\r\n            System.out.println(&quot;Beep&quot;); //It doesn&#39;t reach this line\r\n        } catch (SQLException sqle) {\r\n            AlertTemp.mostrarError(&quot;Error cargando los datos de la aplicaci&#243;n&quot;);\r\n        } catch (Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n```\r\n\r\nI have declared the listview as: ```@FXML private ListView&lt;Mytho&gt; MythosList;```\r\n\r\nAnd my main app:\r\n```\r\npublic void start(Stage stage) throws IOException {\r\n        AppCtrl controller = new AppCtrl();\r\n\r\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;main.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load());\r\n\r\n        //Con esto se deberian cargar los datos de la BBDD,\r\n        //pero dice que es NULL\r\n        fxmlLoader.setController(controller);\r\n        System.out.println(&quot;Beep&quot;);\r\n        controller.cargarDatos(); //Again, this is the line that provokes errors\r\n        System.out.println(&quot;Beep&quot;); //But it reaches here!!\r\n\r\n\r\n        stage.initStyle(StageStyle.TRANSPARENT);\r\n        scene.setFill(Color.TRANSPARENT);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n\r\n    }\r\n```\r\n\r\nAnd the error is this one: \r\n```java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.ListView.setItems(javafx.collections.ObservableList)&quot; because &quot;this.MythosList&quot; is null```\r\n\r\n\r\nI&#39;m out of ideas, and the connection is okay, so it can&#39;t be that. The size of the array is the one it has to be, so I don&#39;t understand why in the last moment it breaks.","title":"I cannot connect my database with my javafx app listview","body":"<p>I'm in need of help. I'm making a simple app in javafx, the app has to connect with a database and return some data that I will show on a listview right as the app loads.</p>\n<p>The thing is, that I can't find the reason why errors come back to me saying that the list in null.</p>\n<p>My controller:</p>\n<pre><code>public void cargarDatos(){\n\n        //MythosList.getItems().clear();\n\n        try {\n\n            //Creamos el array donde guardar los datos\n            List&lt;Mytho&gt; mythos = mythosDAO.obtenerMythos();\n\n            System.out.println(&quot;Número de elementos en la lista: &quot; + mythos.size()); //This retrieves 3, which is the amount of lines I have in my database\n            MythosList.setItems(FXCollections.observableList(mythos)); //This is the line that provokes the error\n            System.out.println(&quot;Beep&quot;); //It doesn't reach this line\n        } catch (SQLException sqle) {\n            AlertTemp.mostrarError(&quot;Error cargando los datos de la aplicación&quot;);\n        } catch (Exception e){\n            System.out.println(e);\n        }\n    }\n</code></pre>\n<p>I have declared the listview as: <code>@FXML private ListView&lt;Mytho&gt; MythosList;</code></p>\n<p>And my main app:</p>\n<pre><code>public void start(Stage stage) throws IOException {\n        AppCtrl controller = new AppCtrl();\n\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;main.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load());\n\n        //Con esto se deberian cargar los datos de la BBDD,\n        //pero dice que es NULL\n        fxmlLoader.setController(controller);\n        System.out.println(&quot;Beep&quot;);\n        controller.cargarDatos(); //Again, this is the line that provokes errors\n        System.out.println(&quot;Beep&quot;); //But it reaches here!!\n\n\n        stage.initStyle(StageStyle.TRANSPARENT);\n        scene.setFill(Color.TRANSPARENT);\n        stage.setScene(scene);\n        stage.show();\n\n    }\n</code></pre>\n<p>And the error is this one:\n<code>java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.ListView.setItems(javafx.collections.ObservableList)&quot; because &quot;this.MythosList&quot; is null</code></p>\n<p>I'm out of ideas, and the connection is okay, so it can't be that. The size of the array is the one it has to be, so I don't understand why in the last moment it breaks.</p>\n"},{"tags":["java","tomcat","deployment","project"],"comments":[{"owner":{"account_id":2348990,"reputation":3211,"user_id":2058368,"accept_rate":61,"display_name":"Sandeep Chatterjee"},"score":0,"creation_date":1697567374,"post_id":77311347,"comment_id":136295257,"body_markdown":"Did you check the server log?","body":"Did you check the server log?"}],"owner":{"account_id":26723886,"reputation":1,"user_id":20327258,"display_name":"Aaditya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697566505,"creation_date":1697566505,"question_id":77311347,"body_markdown":"Undeploying ...\r\nOK - Undeployed application at context path [/bankingSystem]\r\nIn-place deployment at C:\\Users\\adity\\OneDrive\\Documents\\NetBeansProjects\\bankingSystem\\build\\web\r\ndeploy?config=file%3A%2FC%3A%2FUsers%2Fadity%2FAppData%2FLocal%2FTemp%2Fcontext215087617306647603.xml&amp;path=/bankingSystem\r\nFAIL - Deployed application at context path [/bankingSystem] but context failed to start\r\nC:\\Users\\adity\\OneDrive\\Documents\\NetBeansProjects\\bankingSystem\\nbproject\\build-impl.xml:1030: The module has not been deployed.\r\nSee the server log for details.\r\nBUILD FAILED (total time: 1 second)\r\n\r\nI want to just run my web application according to my .xml file\r\n","title":"Fail to deploy a web application project using TOMCAT(I&#39;m using xampp for that)","body":"<p>Undeploying ...\nOK - Undeployed application at context path [/bankingSystem]\nIn-place deployment at C:\\Users\\adity\\OneDrive\\Documents\\NetBeansProjects\\bankingSystem\\build\\web\ndeploy?config=file%3A%2FC%3A%2FUsers%2Fadity%2FAppData%2FLocal%2FTemp%2Fcontext215087617306647603.xml&amp;path=/bankingSystem\nFAIL - Deployed application at context path [/bankingSystem] but context failed to start\nC:\\Users\\adity\\OneDrive\\Documents\\NetBeansProjects\\bankingSystem\\nbproject\\build-impl.xml:1030: The module has not been deployed.\nSee the server log for details.\nBUILD FAILED (total time: 1 second)</p>\n<p>I want to just run my web application according to my .xml file</p>\n"},{"tags":["java","calculator","jtextfield"],"comments":[{"owner":{"account_id":2609703,"reputation":1305,"user_id":2260040,"accept_rate":57,"display_name":"user2260040"},"score":0,"creation_date":1697564988,"post_id":77311161,"comment_id":136294887,"body_markdown":"String comparison in java doesn&#39;t use ==","body":"String comparison in java doesn&#39;t use =="}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697564916,"creation_date":1697564916,"answer_id":77311195,"question_id":77311161,"body_markdown":"When you compare a content of the strings, you should use `equals()` instead of `==` (that compares the objects&#39; references). Read more [here][1] and [here][2]\r\n\r\nSo, change your code:\r\n```\r\nSystem.out.println(pantalla.getText() == &quot;0&quot;);\r\n```\r\nto\r\n```\r\nSystem.out.println(&quot;0&quot;.equals(pantalla.getText()));\r\n```\r\nand you will get the desired result.\r\n\r\n  [1]: https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\r\n  [2]: https://www.javatpoint.com/string-comparison-in-java","title":"When i compare the getText function of a JTextField with an equal String, it doesn&#180;t return true","body":"<p>When you compare a content of the strings, you should use <code>equals()</code> instead of <code>==</code> (that compares the objects' references). Read more <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">here</a> and <a href=\"https://www.javatpoint.com/string-comparison-in-java\" rel=\"nofollow noreferrer\">here</a></p>\n<p>So, change your code:</p>\n<pre><code>System.out.println(pantalla.getText() == &quot;0&quot;);\n</code></pre>\n<p>to</p>\n<pre><code>System.out.println(&quot;0&quot;.equals(pantalla.getText()));\n</code></pre>\n<p>and you will get the desired result.</p>\n"}],"owner":{"account_id":29694129,"reputation":9,"user_id":22757847,"display_name":"tumorito"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1697571780,"accepted_answer_id":77311195,"answer_count":1,"score":1,"last_activity_date":1697566022,"creation_date":1697564596,"question_id":77311161,"body_markdown":"So i have this calculator (on Java) and when i press a button i wanna check if in the JTextField(pantalla) is only &quot;0&quot; so i can replace it with the number instead of concatenate the button i pressed... the thing i&#180;ve noticed is that when i try it, it returns false everytime\r\n\r\ni&#180;ve tried to save the .getText() into a String variable and then compare it to the literal &quot;0&quot;, i even try to put the text to &quot;0&quot; 1 line above the comparation with the .setText().\r\n\r\n```\r\npantalla = new JTextField();\r\npantalla.setHorizontalAlignment(SwingConstants.RIGHT);\r\npantalla.setBounds(72, 19, 144, 25);\r\ncontentPane.add(pantalla);\r\npantalla.setColumns(10);\r\npantalla.setText(&quot;0&quot;);\r\n\t\t\r\nJButton btn0 = new JButton(&quot;0&quot;);\r\nbtn0.addActionListener(new ActionListener() \r\n{\r\n    public void actionPerformed(ActionEvent e) \r\n    {\r\n    pantalla.setText(&quot;0&quot;);\r\n    System.out.println(pantalla.getText() == &quot;0&quot;);\r\n//  pantalla.setText(pantalla.getText() + btn0.getText());\r\n    }\r\n});\r\n```\r\nheres the output of the code ive just shown: image(https://i.stack.imgur.com/g62Sp.png)\r\n","title":"When i compare the getText function of a JTextField with an equal String, it doesn&#180;t return true","body":"<p>So i have this calculator (on Java) and when i press a button i wanna check if in the JTextField(pantalla) is only &quot;0&quot; so i can replace it with the number instead of concatenate the button i pressed... the thing i´ve noticed is that when i try it, it returns false everytime</p>\n<p>i´ve tried to save the .getText() into a String variable and then compare it to the literal &quot;0&quot;, i even try to put the text to &quot;0&quot; 1 line above the comparation with the .setText().</p>\n<pre><code>pantalla = new JTextField();\npantalla.setHorizontalAlignment(SwingConstants.RIGHT);\npantalla.setBounds(72, 19, 144, 25);\ncontentPane.add(pantalla);\npantalla.setColumns(10);\npantalla.setText(&quot;0&quot;);\n        \nJButton btn0 = new JButton(&quot;0&quot;);\nbtn0.addActionListener(new ActionListener() \n{\n    public void actionPerformed(ActionEvent e) \n    {\n    pantalla.setText(&quot;0&quot;);\n    System.out.println(pantalla.getText() == &quot;0&quot;);\n//  pantalla.setText(pantalla.getText() + btn0.getText());\n    }\n});\n</code></pre>\n<p>heres the output of the code ive just shown: image(<a href=\"https://i.stack.imgur.com/g62Sp.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/g62Sp.png</a>)</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697480004,"post_id":77304119,"comment_id":136282502,"body_markdown":"Don&#39;t do this. Storing values as CSV is very bad db design","body":"Don&#39;t do this. Storing values as CSV is very bad db design"},{"owner":{"account_id":29685644,"reputation":1,"user_id":22751261,"display_name":"Maeryska"},"score":0,"creation_date":1697481695,"post_id":77304119,"comment_id":136282758,"body_markdown":"@Jens , it is requirement from my management, so it must be done this way. Otherwise I would do it differently.","body":"@Jens , it is requirement from my management, so it must be done this way. Otherwise I would do it differently."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1697553765,"post_id":77304119,"comment_id":136292803,"body_markdown":"Don&#39;t use an ElemenetCollection/Enumerated annotations and instead use @Converter with an implementation of AttributeConverter&lt;List&lt;ViewedItem&gt;, String&gt; to perform the conversions from Lists to String data how ever you might want.","body":"Don&#39;t use an ElemenetCollection/Enumerated annotations and instead use @Converter with an implementation of AttributeConverter&lt;List&lt;ViewedItem&gt;, String&gt; to perform the conversions from Lists to String data how ever you might want."}],"answers":[{"tags":[],"owner":{"account_id":2674595,"reputation":272,"user_id":2311276,"accept_rate":60,"display_name":"Wim Van den Brande"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697565705,"creation_date":1697565705,"answer_id":77311272,"question_id":77304119,"body_markdown":"In PostgreSQL, you can use the json-binary data-type. And with Json-Binary you can store (typically small) collections of Enums or Key/Value pairs very easily. \r\n\r\nPlease find snippets below and change Map to a `List&lt;ViewedItem&gt;` \r\n\r\nDDL:\r\n\r\n    CREATE TABLE myTable (\r\n\tid int8 NOT NULL,\r\n\tnamesOfCitiesInDifferentLanguages jsonb NULL)\r\n\r\n\r\nJPA:\r\n\r\n    public class myTable {\r\n        @Type(JsonBinaryType.class)\r\n        @Column(columnDefinition = &quot;jsonb&quot;)\r\n        private Map&lt;Language, String&gt; namesOfCitiesInDifferentLanguages ;\r\n    }\r\n\r\nColumn-value: \r\n\r\n    {&quot;EN&quot;: &quot;Antwerp&quot;, &quot;FR&quot;: &quot;Anvers&quot;, &quot;NL&quot;: &quot;Antwerpen&quot;}\r\n\r\n","title":"Storing list of one enum to one column in database with Hibernate","body":"<p>In PostgreSQL, you can use the json-binary data-type. And with Json-Binary you can store (typically small) collections of Enums or Key/Value pairs very easily.</p>\n<p>Please find snippets below and change Map to a <code>List&lt;ViewedItem&gt;</code></p>\n<p>DDL:</p>\n<pre><code>CREATE TABLE myTable (\nid int8 NOT NULL,\nnamesOfCitiesInDifferentLanguages jsonb NULL)\n</code></pre>\n<p>JPA:</p>\n<pre><code>public class myTable {\n    @Type(JsonBinaryType.class)\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    private Map&lt;Language, String&gt; namesOfCitiesInDifferentLanguages ;\n}\n</code></pre>\n<p>Column-value:</p>\n<pre><code>{&quot;EN&quot;: &quot;Antwerp&quot;, &quot;FR&quot;: &quot;Anvers&quot;, &quot;NL&quot;: &quot;Antwerpen&quot;}\n</code></pre>\n"}],"owner":{"account_id":29685644,"reputation":1,"user_id":22751261,"display_name":"Maeryska"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697565705,"creation_date":1697479819,"question_id":77304119,"body_markdown":"I need to **store all items from one list of ONE specific enum to ONE column in database utilizing Hibernate. Items in column should be divided by comma.** So result in column should be for instance: WELCOME, PREVIOUS\r\n\r\n\r\nThis is my UserEntity\r\n```\r\n@Column\r\n@Enumerated\r\n@ElementCollection(targetClass = ViewedItem.class)\r\nprivate List&lt;ViewedItem&gt; viewedItems;\r\n```\r\n\r\n\r\n\r\n```\r\nenum ViewedItem {\r\n   WELCOME,\r\n   PREVIOUS\r\n}\r\n```\r\nProblem with this solution is that it requires a new table in database with enum *ViewedItem*. This enum must be used only in application not in database. I cannot also store it as simple string in class *UserEntity*.\r\nHow can I achieve it? \r\n","title":"Storing list of one enum to one column in database with Hibernate","body":"<p>I need to <strong>store all items from one list of ONE specific enum to ONE column in database utilizing Hibernate. Items in column should be divided by comma.</strong> So result in column should be for instance: WELCOME, PREVIOUS</p>\n<p>This is my UserEntity</p>\n<pre><code>@Column\n@Enumerated\n@ElementCollection(targetClass = ViewedItem.class)\nprivate List&lt;ViewedItem&gt; viewedItems;\n</code></pre>\n<pre><code>enum ViewedItem {\n   WELCOME,\n   PREVIOUS\n}\n</code></pre>\n<p>Problem with this solution is that it requires a new table in database with enum <em>ViewedItem</em>. This enum must be used only in application not in database. I cannot also store it as simple string in class <em>UserEntity</em>.\nHow can I achieve it?</p>\n"},{"tags":["java","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":4206070,"reputation":939,"user_id":3444930,"accept_rate":56,"display_name":"Karthik"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1395399360,"creation_date":1395398824,"answer_id":22556598,"question_id":22556304,"body_markdown":"The below code list all Quartz job associated to a scheduler (Quartz 2.x.x)\r\n\r\n\r\n    for (String groupName : scheduler.getJobGroupNames()) {\r\n \r\n     for (JobKey jobKey : scheduler.getJobKeys(GroupMatcher.jobGroupEquals(groupName))) {\r\n \r\n\t  String jobName = jobKey.getName();\r\n\t  String jobGroup = jobKey.getGroup();\r\n \r\n\t  //get job&#39;s trigger\r\n\t  List&lt;Trigger&gt; triggers = (List&lt;Trigger&gt;) scheduler.getTriggersOfJob(jobKey);\r\n\t  Date nextFireTime = triggers.get(0).getNextFireTime(); \r\n \r\n\t\tSystem.out.println(&quot;[jobName] : &quot; + jobName + &quot; [groupName] : &quot;\r\n\t\t\t+ jobGroup + &quot; - &quot; + nextFireTime);\r\n \r\n\t  }\r\n \r\n    }\r\n","title":"How to query the scheduled jobs from Quartz scheduler?","body":"<p>The below code list all Quartz job associated to a scheduler (Quartz 2.x.x)</p>\n\n<pre><code>for (String groupName : scheduler.getJobGroupNames()) {\n\n for (JobKey jobKey : scheduler.getJobKeys(GroupMatcher.jobGroupEquals(groupName))) {\n\n  String jobName = jobKey.getName();\n  String jobGroup = jobKey.getGroup();\n\n  //get job's trigger\n  List&lt;Trigger&gt; triggers = (List&lt;Trigger&gt;) scheduler.getTriggersOfJob(jobKey);\n  Date nextFireTime = triggers.get(0).getNextFireTime(); \n\n    System.out.println(\"[jobName] : \" + jobName + \" [groupName] : \"\n        + jobGroup + \" - \" + nextFireTime);\n\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27509080,"reputation":9,"user_id":20991328,"display_name":"Galeno de Melo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697565231,"creation_date":1697565231,"answer_id":77311231,"question_id":22556304,"body_markdown":"Another way to list all `JobKey` without using `for`\r\n\r\n```java\r\nList&lt;JobKey&gt; jobKeyList = (List&lt;JobKey&gt;) scheduler.getJobKeys(GroupMatcher.anyGroup());\r\n```","title":"How to query the scheduled jobs from Quartz scheduler?","body":"<p>Another way to list all <code>JobKey</code> without using <code>for</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;JobKey&gt; jobKeyList = (List&lt;JobKey&gt;) scheduler.getJobKeys(GroupMatcher.anyGroup());\n</code></pre>\n"}],"owner":{"account_id":225067,"reputation":29525,"user_id":485337,"accept_rate":91,"display_name":"Adam Arold"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13904,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":22556598,"answer_count":2,"score":5,"last_activity_date":1697565231,"creation_date":1395397974,"question_id":22556304,"body_markdown":"I have a `Scheduler` object in my application and I add `Job`s to it using the `scheduleJob` method.\r\n\r\nIn my code I schedule `Job`s with an instant `Trigger`:\r\n\r\n    TriggerBuilder.newTrigger().startNow().build();\r\n\r\nMy question is how to tell which `Job`s are scheduled into my `Scheduler`? There is only a `getCurrentlyExecutingJobs` method which seems unreliable so far.\r\n\r\n","title":"How to query the scheduled jobs from Quartz scheduler?","body":"<p>I have a <code>Scheduler</code> object in my application and I add <code>Job</code>s to it using the <code>scheduleJob</code> method.</p>\n\n<p>In my code I schedule <code>Job</code>s with an instant <code>Trigger</code>:</p>\n\n<pre><code>TriggerBuilder.newTrigger().startNow().build();\n</code></pre>\n\n<p>My question is how to tell which <code>Job</code>s are scheduled into my <code>Scheduler</code>? There is only a <code>getCurrentlyExecutingJobs</code> method which seems unreliable so far.</p>\n"},{"tags":["java","maven","jersey"],"comments":[{"owner":{"account_id":2334779,"reputation":2501,"user_id":4782919,"display_name":"RPresle"},"score":1,"creation_date":1431437018,"post_id":30191612,"comment_id":48489414,"body_markdown":"Can you try `mvn archetype:generate` without any arguments?\nMy idea is maybe you didn&#39;t specify the right arguments for this command line. (maybe missing archetypeArtifactId). \n\nTell me when you&#39;re done","body":"Can you try <code>mvn archetype:generate</code> without any arguments? My idea is maybe you didn&#39;t specify the right arguments for this command line. (maybe missing archetypeArtifactId).   Tell me when you&#39;re done"},{"owner":{"account_id":6253947,"reputation":934,"user_id":4863163,"accept_rate":69,"display_name":"MrPencil"},"score":0,"creation_date":1431437350,"post_id":30191612,"comment_id":48489668,"body_markdown":"@RPresle: I am getting much of stuff with number but I cant find my flassfish version below just this one `1303: remote -&gt; org.xaloon.archetype:xaloon-archetype-wicket-jpa-glassfish (-)`","body":"@RPresle: I am getting much of stuff with number but I cant find my flassfish version below just this one <code>1303: remote -&gt; org.xaloon.archetype:xaloon-archetype-wicket-jpa-glassfish (-)</code>"},{"owner":{"account_id":6253947,"reputation":934,"user_id":4863163,"accept_rate":69,"display_name":"MrPencil"},"score":0,"creation_date":1431437425,"post_id":30191612,"comment_id":48489728,"body_markdown":"ntains): 598: 1303\nChoose org.xaloon.archetype:xaloon-archetype-wicket-jpa-glassfish version:\n1: 1.5.0\n2: 1.5.1\n3: 1.5.2\n4: 1.6.0\n5: 1.6.1\nChoose a number: 5:","body":"ntains): 598: 1303 Choose org.xaloon.archetype:xaloon-archetype-wicket-jpa-glassfish version: 1: 1.5.0 2: 1.5.1 3: 1.5.2 4: 1.6.0 5: 1.6.1 Choose a number: 5:"},{"owner":{"account_id":2334779,"reputation":2501,"user_id":4782919,"display_name":"RPresle"},"score":0,"creation_date":1431437985,"post_id":30191612,"comment_id":48490201,"body_markdown":"Ok so you&#39;re Maven is completely ok, it&#39;s just the way you call the command and the content of it. Can you try this  `mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archety\npes  -DarchetypeArtifactId=jersey-quickstart-webapp`. From [http://mvnrepository.com/artifact/org.glassfish.jersey.archetypes](http://mvnrepository.com/artifact/org.glassfish.jersey.archetypes)","body":"Ok so you&#39;re Maven is completely ok, it&#39;s just the way you call the command and the content of it. Can you try this  <code>mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archety pes  -DarchetypeArtifactId=jersey-quickstart-webapp</code>. From <a href=\"http://mvnrepository.com/artifact/org.glassfish.jersey.archetypes\" rel=\"nofollow noreferrer\">http://mvnrepository.com/artifact/org.glassfish.jersey.arche&zwnj;&#8203;types</a>"},{"owner":{"account_id":6253947,"reputation":934,"user_id":4863163,"accept_rate":69,"display_name":"MrPencil"},"score":0,"creation_date":1431438194,"post_id":30191612,"comment_id":48490368,"body_markdown":"I am getting the same error &#39;The goal you specified requires a project to execute but there is no POM\n in this directory (D:\\maven). Please verify you invoked Maven from the correct directory.`","body":"I am getting the same error &#39;The goal you specified requires a project to execute but there is no POM  in this directory (D:\\maven). Please verify you invoked Maven from the correct directory.`"},{"owner":{"account_id":2334779,"reputation":2501,"user_id":4782919,"display_name":"RPresle"},"score":0,"creation_date":1431438932,"post_id":30191612,"comment_id":48491019,"body_markdown":"Maybe you&#39;ve already seen [that](https://stackoverflow.com/questions/12593628/maven-error-no-pom-in-this-project-when-performing-archetypegenerate). Be sure you have no caracter &#39;\\&#39;","body":"Maybe you&#39;ve already seen <a href=\"https://stackoverflow.com/questions/12593628/maven-error-no-pom-in-this-project-when-performing-archetypegenerate\">that</a>. Be sure you have no caracter &#39;\\&#39;"},{"owner":{"account_id":6253947,"reputation":934,"user_id":4863163,"accept_rate":69,"display_name":"MrPencil"},"score":0,"creation_date":1431441894,"post_id":30191612,"comment_id":48493519,"body_markdown":"@RPresle: I have typed it without `\\` please see my edit question part.","body":"@RPresle: I have typed it without `` please see my edit question part."}],"answers":[{"tags":[],"owner":{"account_id":2334779,"reputation":2501,"user_id":4782919,"display_name":"RPresle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1431447257,"creation_date":1431442890,"answer_id":30194665,"question_id":30191612,"body_markdown":"I&#39;ll go for an answer now.\r\n\r\nSo the first part of your problem was the caracter &quot;\\&quot;. See [this thread](https://stackoverflow.com/questions/12593628/maven-error-no-pom-in-this-project-when-performing-archetypegenerate)\r\n\r\nThen for your second problem : it is said   `The desired archetype does\r\nnot exist`. This archetype maven-archetype-quickstart doesn&#39;t exist in maven repository. Please refer to [this link](http://mvnrepository.com/artifact/org.glassfish.jersey.archetypes) to choose the archetype you are looking for and put it in your command.\r\n\r\nAt the end you command must have at least 2 argument `-DarchetypeGroupId` and `-DarchetypeArtifactId`. For example :\r\n\r\n    mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes -DarchetypeArtifactId=jersey-quickstart-webapp","title":"Please verify you invoked Maven from the correct directory","body":"<p>I'll go for an answer now.</p>\n\n<p>So the first part of your problem was the caracter \"\\\". See <a href=\"https://stackoverflow.com/questions/12593628/maven-error-no-pom-in-this-project-when-performing-archetypegenerate\">this thread</a></p>\n\n<p>Then for your second problem : it is said   <code>The desired archetype does\nnot exist</code>. This archetype maven-archetype-quickstart doesn't exist in maven repository. Please refer to <a href=\"http://mvnrepository.com/artifact/org.glassfish.jersey.archetypes\" rel=\"nofollow\">this link</a> to choose the archetype you are looking for and put it in your command.</p>\n\n<p>At the end you command must have at least 2 argument <code>-DarchetypeGroupId</code> and <code>-DarchetypeArtifactId</code>. For example :</p>\n\n<pre><code>mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes -DarchetypeArtifactId=jersey-quickstart-webapp\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4383258,"reputation":11,"user_id":3574289,"display_name":"Shree"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697564917,"creation_date":1697564917,"answer_id":77311197,"question_id":30191612,"body_markdown":"I could resolve maven ***mvn archetype:generate*** issue &quot;**The goal you specified requires a project to execute but there is no POM in this directory XXXX**&quot; on windows.\r\n\r\nIt is **related to how Windows PowerShell interprets the command**\r\n\r\nYou need to enclose the arguments of *mvn archetype:generate* with **double quotes (&quot;&quot;)**. \r\n\r\nFor example:\r\n```\r\n**mvn archetype:generate \r\n  &quot;-DarchetypeGroupId=org.apache.maven.archetypes&quot; \r\n  &quot;-DarchetypeArtifactId=maven-archetype-quickstart&quot; \r\n  &quot;-DgroupId=codingvoding.org&quot;  \r\n  &quot;-DartifactId=java8-features-demo&quot; \r\n  -B**\r\n```\r\n\r\nAlso, make sure that you are running this command on **EMPTY directory**.","title":"Please verify you invoked Maven from the correct directory","body":"<p>I could resolve maven <em><strong>mvn archetype:generate</strong></em> issue &quot;<strong>The goal you specified requires a project to execute but there is no POM in this directory XXXX</strong>&quot; on windows.</p>\n<p>It is <strong>related to how Windows PowerShell interprets the command</strong></p>\n<p>You need to enclose the arguments of <em>mvn archetype:generate</em> with <strong>double quotes (&quot;&quot;)</strong>.</p>\n<p>For example:</p>\n<pre><code>**mvn archetype:generate \n  &quot;-DarchetypeGroupId=org.apache.maven.archetypes&quot; \n  &quot;-DarchetypeArtifactId=maven-archetype-quickstart&quot; \n  &quot;-DgroupId=codingvoding.org&quot;  \n  &quot;-DartifactId=java8-features-demo&quot; \n  -B**\n</code></pre>\n<p>Also, make sure that you are running this command on <strong>EMPTY directory</strong>.</p>\n"}],"owner":{"account_id":6253947,"reputation":934,"user_id":4863163,"accept_rate":69,"display_name":"MrPencil"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37144,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":30194665,"answer_count":2,"score":4,"last_activity_date":1697564917,"creation_date":1431435475,"question_id":30191612,"body_markdown":"I have installed maven :\r\n\r\n    C:\\Windows\\System32&gt;mvn --version\r\n    Apache Maven 3.3.3 (7994120775791599e405a7528ec3e0dke21dja06; 2015-04-22T13:57:3\r\n    7+02:00)\r\n    Maven home: C:\\Program Files\\Apache Software Foundation\\apache-maven-3.3.3\r\n    Java version: 1.7.0_51, vendor: Oracle Corporation\r\n    Java home: C:\\Program Files\\Java\\jdk1.7.0_51\\jre\r\n    Default locale: de_DE, platform encoding: Cp1252\r\n    OS name: &quot;windows 8&quot;, version: &quot;6.2&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\n\r\n\r\nI am trying to generate  Jersey glassfish project with the aid of maven prompt but when I type the following:\r\n\r\n\r\n    D:\\maven&gt;mvn archetype:generate  -DarchetypeGroupId=org.glassfish.jersey.archety\r\n    pes -DinteractiveMode=false \\ -DarchetypeVersion=2.17\r\n\r\nI am getting this error:\r\n\r\n&gt; The goal you specified requires a project to execute but there is no POM\r\n in this directory (D:\\maven). Please verify you invoked Maven from the correct\r\ndirectory. -&gt; [Help 1]\r\n\r\nI dont understand the error: Which project is required here since I am trying to generate one? And how should I create the pom.xml file? I thought it is created by the project generation.\r\n\r\nI appreciate any help.\r\n\r\n\r\n**Edit** when I type it without `\\`\r\n\r\n\r\n    D:\\maven&gt;mvn archetype:generate  -DarchetypeGroupId=org.glassfish.jersey.archety\r\n    pes  -DinteractiveMode=false -DarchetypeVersion=2.17\r\n    [INFO] Scanning for projects...\r\n    [INFO]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building Maven Stub Project (No POM) 1\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO]\r\n    [INFO] &gt;&gt;&gt; maven-archetype-plugin:2.3:generate (default-cli) &gt; generate-sources\r\n    @ standalone-pom &gt;&gt;&gt;\r\n    [INFO]\r\n    [INFO] &lt;&lt;&lt; maven-archetype-plugin:2.3:generate (default-cli) &lt; generate-sources\r\n    @ standalone-pom &lt;&lt;&lt;\r\n    [INFO]\r\n    [INFO] --- maven-archetype-plugin:2.3:generate (default-cli) @ standalone-pom --\r\n    -\r\n    [INFO] Generating project in Batch mode\r\n    [INFO] No archetype defined. Using maven-archetype-quickstart (org.glassfish.jer\r\n    sey.archetypes:maven-archetype-quickstart:2.17)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/glassfish/jersey/archetype\r\n    s/maven-archetype-quickstart/2.17/maven-archetype-quickstart-2.17.jar\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 10.542 s\r\n    [INFO] Finished at: 2015-05-12T16:39:51+02:00\r\n    [INFO] Final Memory: 17M/152M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2\r\n    .3:generate (default-cli) on project standalone-pom: The desired archetype does\r\n    not exist (org.glassfish.jersey.archetypes:maven-archetype-quickstart:2.17) -&gt; [\r\n    Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit\r\n    ch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please rea\r\n    d the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureExc\r\n    eption\r\n    \r\n    D:\\maven&gt;","title":"Please verify you invoked Maven from the correct directory","body":"<p>I have installed maven :</p>\n\n<pre><code>C:\\Windows\\System32&gt;mvn --version\nApache Maven 3.3.3 (7994120775791599e405a7528ec3e0dke21dja06; 2015-04-22T13:57:3\n7+02:00)\nMaven home: C:\\Program Files\\Apache Software Foundation\\apache-maven-3.3.3\nJava version: 1.7.0_51, vendor: Oracle Corporation\nJava home: C:\\Program Files\\Java\\jdk1.7.0_51\\jre\nDefault locale: de_DE, platform encoding: Cp1252\nOS name: \"windows 8\", version: \"6.2\", arch: \"amd64\", family: \"windows\"\n</code></pre>\n\n<p>I am trying to generate  Jersey glassfish project with the aid of maven prompt but when I type the following:</p>\n\n<pre><code>D:\\maven&gt;mvn archetype:generate  -DarchetypeGroupId=org.glassfish.jersey.archety\npes -DinteractiveMode=false \\ -DarchetypeVersion=2.17\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<blockquote>\n  <p>The goal you specified requires a project to execute but there is no POM\n   in this directory (D:\\maven). Please verify you invoked Maven from the correct\n  directory. -> [Help 1]</p>\n</blockquote>\n\n<p>I dont understand the error: Which project is required here since I am trying to generate one? And how should I create the pom.xml file? I thought it is created by the project generation.</p>\n\n<p>I appreciate any help.</p>\n\n<p><strong>Edit</strong> when I type it without <code>\\</code></p>\n\n<pre><code>D:\\maven&gt;mvn archetype:generate  -DarchetypeGroupId=org.glassfish.jersey.archety\npes  -DinteractiveMode=false -DarchetypeVersion=2.17\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] ------------------------------------------------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; maven-archetype-plugin:2.3:generate (default-cli) &gt; generate-sources\n@ standalone-pom &gt;&gt;&gt;\n[INFO]\n[INFO] &lt;&lt;&lt; maven-archetype-plugin:2.3:generate (default-cli) &lt; generate-sources\n@ standalone-pom &lt;&lt;&lt;\n[INFO]\n[INFO] --- maven-archetype-plugin:2.3:generate (default-cli) @ standalone-pom --\n-\n[INFO] Generating project in Batch mode\n[INFO] No archetype defined. Using maven-archetype-quickstart (org.glassfish.jer\nsey.archetypes:maven-archetype-quickstart:2.17)\nDownloading: https://repo.maven.apache.org/maven2/org/glassfish/jersey/archetype\ns/maven-archetype-quickstart/2.17/maven-archetype-quickstart-2.17.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 10.542 s\n[INFO] Finished at: 2015-05-12T16:39:51+02:00\n[INFO] Final Memory: 17M/152M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2\n.3:generate (default-cli) on project standalone-pom: The desired archetype does\nnot exist (org.glassfish.jersey.archetypes:maven-archetype-quickstart:2.17) -&gt; [\nHelp 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit\nch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please rea\nd the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureExc\neption\n\nD:\\maven&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","rest"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1697537717,"post_id":77308054,"comment_id":136289486,"body_markdown":"Not really an answer, but I would refactor that if I were in your shoes. Such ambiguous mappings are complicating both usage and maintenance of the API. TBH I am surprised spring has not failed on startup with ambiguous mappings error.","body":"Not really an answer, but I would refactor that if I were in your shoes. Such ambiguous mappings are complicating both usage and maintenance of the API. TBH I am surprised spring has not failed on startup with ambiguous mappings error."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697538189,"post_id":77308054,"comment_id":136289583,"body_markdown":"Does this answer your question? [Optional @Pathvariable in REST controller spring 4](https://stackoverflow.com/questions/47567364/optional-pathvariable-in-rest-controller-spring-4)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47567364/optional-pathvariable-in-rest-controller-spring-4\">Optional @Pathvariable in REST controller spring 4</a>"},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1697540342,"post_id":77308054,"comment_id":136289977,"body_markdown":"the format is supposed to be the response representation. like .json or .rdf. So I can not have it as a request param. Let me try with single endpoint","body":"the format is supposed to be the response representation. like .json or .rdf. So I can not have it as a request param. Let me try with single endpoint"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697540278,"creation_date":1697539129,"answer_id":77308284,"question_id":77308054,"body_markdown":"The proper solution here is to combine both endpoints into one. You could make the `.{format}` an optional part of the path, but it&#39;s even nicer to just turn it into an optional query parameter:\r\n\r\n```\r\n @GetMapping(value =  &quot;/record/{id}/{lcId}&quot;,\r\n             headers = {ACCEPT_HEADER_JSON, \r\n                        ACCEPT_HEADER_APPLICATION_RDF_XML, \r\n                        ACCEPT_HEADER_RDF_XML,\r\n                        ACCEPT_HEADER_APPLICATION_XML},\r\n             produces = {MediaType.APPLICATION_JSON_VALUE, \r\n                         MediaType.TEXT_XML_VALUE,\r\n                         MediaType.APPLICATION_XML_VALUE, \r\n                         HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \r\n                         HttpHeaders.CONTENT_TYPE_RDF_XML})\r\n public ResponseEntity&lt;String&gt; getwithHeader(\r\n            @PathVariable(&quot;id&quot;) String id,\r\n            @PathVariable(&quot;lcId&quot;) String lcId,\r\n            @RequestParam(required = false) String format,\r\n            HttpServletRequest request) throws IOException {\r\n        ...\r\n }\r\n\r\n```","title":"Endpoints with Same header values","body":"<p>The proper solution here is to combine both endpoints into one. You could make the <code>.{format}</code> an optional part of the path, but it's even nicer to just turn it into an optional query parameter:</p>\n<pre><code> @GetMapping(value =  &quot;/record/{id}/{lcId}&quot;,\n             headers = {ACCEPT_HEADER_JSON, \n                        ACCEPT_HEADER_APPLICATION_RDF_XML, \n                        ACCEPT_HEADER_RDF_XML,\n                        ACCEPT_HEADER_APPLICATION_XML},\n             produces = {MediaType.APPLICATION_JSON_VALUE, \n                         MediaType.TEXT_XML_VALUE,\n                         MediaType.APPLICATION_XML_VALUE, \n                         HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \n                         HttpHeaders.CONTENT_TYPE_RDF_XML})\n public ResponseEntity&lt;String&gt; getwithHeader(\n            @PathVariable(&quot;id&quot;) String id,\n            @PathVariable(&quot;lcId&quot;) String lcId,\n            @RequestParam(required = false) String format,\n            HttpServletRequest request) throws IOException {\n        ...\n }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":112379,"reputation":38375,"user_id":296452,"accept_rate":42,"display_name":"Andreas Wederbrand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697564878,"creation_date":1697564878,"answer_id":77311192,"question_id":77308054,"body_markdown":"You can use regexp to limit what characters are allowed in each of the PathVariables. So for lcId you would allow all characters except for the dot. Like this\r\n\r\n    @RestController\r\n    public class Controller {\r\n    \t@RequestMapping(value=&quot;/{id}/{lcid}.{format}&quot;)\r\n    \tpublic void withFormat(@PathVariable(&quot;id&quot;) int id, @PathVariable(&quot;lcid&quot;) String lcid, @PathVariable(&quot;format&quot;) String format) {\r\n    \t\tSystem.out.println(&quot;format&quot;);\r\n    \t}\r\n    \r\n    \t@RequestMapping(value=&quot;/{id}/{lcid:[^.]+}&quot;)\r\n    \tpublic void withoutFormat(@PathVariable(&quot;id&quot;) int id, @PathVariable(&quot;lcid&quot;) String lcid) {\r\n    \t\tSystem.out.println(&quot;no format&quot;);\r\n    \t}\r\n    }\r\n\r\n","title":"Endpoints with Same header values","body":"<p>You can use regexp to limit what characters are allowed in each of the PathVariables. So for lcId you would allow all characters except for the dot. Like this</p>\n<pre><code>@RestController\npublic class Controller {\n    @RequestMapping(value=&quot;/{id}/{lcid}.{format}&quot;)\n    public void withFormat(@PathVariable(&quot;id&quot;) int id, @PathVariable(&quot;lcid&quot;) String lcid, @PathVariable(&quot;format&quot;) String format) {\n        System.out.println(&quot;format&quot;);\n    }\n\n    @RequestMapping(value=&quot;/{id}/{lcid:[^.]+}&quot;)\n    public void withoutFormat(@PathVariable(&quot;id&quot;) int id, @PathVariable(&quot;lcid&quot;) String lcid) {\n        System.out.println(&quot;no format&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697564878,"creation_date":1697537092,"question_id":77308054,"body_markdown":"I have two rest endpoints. \r\n\r\nSo if I pass format value the first endpoint should be called and I don&#39;t pass format value the second endpoint should be called\r\n\r\n1. `/record/{id}/{lcid}.{format}`\r\n2. `/record/{id}/{lcid}`\r\n\r\nIf I pass the format value, even then the second endpoint is called. \r\n\r\nIf I pass a Accept header and no format value then second endpoint is called \r\n\r\nIn every case the second endpoint is invoked. \r\n\r\nHere is my code \r\n\r\n```\r\n@GetMapping(value = &quot;/record/{id}/{lcId}.{format}&quot;,\r\n            produces = {MediaType.APPLICATION_JSON_VALUE, \r\n                        MediaType.TEXT_XML_VALUE,\r\n                        MediaType.APPLICATION_XML_VALUE,                                                                         \r\n                        HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \r\n                        HttpHeaders.CONTENT_TYPE_RDF_XML})\r\npublic ResponseEntity&lt;String&gt; getWithFormat(\r\n            @PathVariable String id,\r\n            @PathVariable String lcId,\r\n            @PathVariable (value = &quot;format&quot;) String format,\r\n            HttpServletRequest request) throws IOException {\r\n\r\n      ....\r\n}\r\n\r\n\r\n@GetMapping(value =  &quot;/record/{id}/{lcId}&quot;,\r\n            headers = {ACCEPT_HEADER_JSON, \r\n                       ACCEPT_HEADER_APPLICATION_RDF_XML, \r\n                       ACCEPT_HEADER_RDF_XML,                        \r\n                       ACCEPT_HEADER_APPLICATION_XML},\r\n            produces = {MediaType.APPLICATION_JSON_VALUE,                        \r\n                        MediaType.TEXT_XML_VALUE,\r\n                        MediaType.APPLICATION_XML_VALUE, \r\n                        HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \r\n                        HttpHeaders.CONTENT_TYPE_RDF_XML})\r\npublic ResponseEntity&lt;String&gt; getwithHeader(\r\n            @PathVariable (value = &quot;id&quot;) String id,\r\n            @PathVariable (value = &quot;lcId&quot;)String lcId,\r\n            HttpServletRequest request) throws IOException {\r\n        ...\r\n}\r\n\r\n```\r\n\r\n**The ACCEPT_HEADER_JSON = &quot;Accept=&quot; + MediaType.APPLICATION_JSON_VALUE;**\r\n\r\nCan someone help me, please?","title":"Endpoints with Same header values","body":"<p>I have two rest endpoints.</p>\n<p>So if I pass format value the first endpoint should be called and I don't pass format value the second endpoint should be called</p>\n<ol>\n<li><code>/record/{id}/{lcid}.{format}</code></li>\n<li><code>/record/{id}/{lcid}</code></li>\n</ol>\n<p>If I pass the format value, even then the second endpoint is called.</p>\n<p>If I pass a Accept header and no format value then second endpoint is called</p>\n<p>In every case the second endpoint is invoked.</p>\n<p>Here is my code</p>\n<pre><code>@GetMapping(value = &quot;/record/{id}/{lcId}.{format}&quot;,\n            produces = {MediaType.APPLICATION_JSON_VALUE, \n                        MediaType.TEXT_XML_VALUE,\n                        MediaType.APPLICATION_XML_VALUE,                                                                         \n                        HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \n                        HttpHeaders.CONTENT_TYPE_RDF_XML})\npublic ResponseEntity&lt;String&gt; getWithFormat(\n            @PathVariable String id,\n            @PathVariable String lcId,\n            @PathVariable (value = &quot;format&quot;) String format,\n            HttpServletRequest request) throws IOException {\n\n      ....\n}\n\n\n@GetMapping(value =  &quot;/record/{id}/{lcId}&quot;,\n            headers = {ACCEPT_HEADER_JSON, \n                       ACCEPT_HEADER_APPLICATION_RDF_XML, \n                       ACCEPT_HEADER_RDF_XML,                        \n                       ACCEPT_HEADER_APPLICATION_XML},\n            produces = {MediaType.APPLICATION_JSON_VALUE,                        \n                        MediaType.TEXT_XML_VALUE,\n                        MediaType.APPLICATION_XML_VALUE, \n                        HttpHeaders.CONTENT_TYPE_APPLICATION_RDF_XML, \n                        HttpHeaders.CONTENT_TYPE_RDF_XML})\npublic ResponseEntity&lt;String&gt; getwithHeader(\n            @PathVariable (value = &quot;id&quot;) String id,\n            @PathVariable (value = &quot;lcId&quot;)String lcId,\n            HttpServletRequest request) throws IOException {\n        ...\n}\n\n</code></pre>\n<p><strong>The ACCEPT_HEADER_JSON = &quot;Accept=&quot; + MediaType.APPLICATION_JSON_VALUE;</strong></p>\n<p>Can someone help me, please?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","properties-file"],"answers":[{"tags":[],"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1492885313,"creation_date":1492885313,"answer_id":43562950,"question_id":43562880,"body_markdown":"It&#39;s because it&#39;s being opened by the STS properties editor which validates properties amongst other things. There&#39;s no harm in having it in the application.properties file, you can even add your own meta-data for the property. \r\n\r\nhttp://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html","title":"SpringBoot unknown property in application.properties","body":"<p>It's because it's being opened by the STS properties editor which validates properties amongst other things. There's no harm in having it in the application.properties file, you can even add your own meta-data for the property. </p>\n\n<p><a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html\" rel=\"noreferrer\">http://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html</a></p>\n"},{"tags":[],"owner":{"account_id":8580155,"reputation":81,"user_id":6428063,"display_name":"Takyon"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1594606207,"creation_date":1492890333,"answer_id":43563851,"question_id":43562880,"body_markdown":"I use this method to add properties in the file application.properties.\r\n\r\nAdd your new property in application.properties :\r\n    default.to.address=nunito.calzada@gmail.com\r\nHover the new property, you&#39;ll see a &quot;quickfixes tooltip&quot; which proposes you to add the new property: Create metadata for &#39;default.to.address&#39;.\r\n\r\nThen, browse the class and field you want to bind the property to and add this annotation:\r\n\r\n    @Value(&quot;${default.to.address}&quot;)\r\n    private String address;\r\n\r\nNow your object field should be valued with the property value.\r\n","title":"SpringBoot unknown property in application.properties","body":"<p>I use this method to add properties in the file application.properties.</p>\n<p>Add your new property in application.properties :\ndefault.to.address=nunito.calzada@gmail.com\nHover the new property, you'll see a &quot;quickfixes tooltip&quot; which proposes you to add the new property: Create metadata for 'default.to.address'.</p>\n<p>Then, browse the class and field you want to bind the property to and add this annotation:</p>\n<pre><code>@Value(&quot;${default.to.address}&quot;)\nprivate String address;\n</code></pre>\n<p>Now your object field should be valued with the property value.</p>\n"},{"tags":[],"owner":{"account_id":547752,"reputation":53,"user_id":1395004,"display_name":"CodersDream"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1492911951,"creation_date":1492911951,"answer_id":43566562,"question_id":43562880,"body_markdown":"You should try adding these kind of values in Environment, instead application.properties, since you have the option to update the values anytime without doing compile changes / redeploy changes. application.properties could more beneficial for the properties that you never change like database credentials.","title":"SpringBoot unknown property in application.properties","body":"<p>You should try adding these kind of values in Environment, instead application.properties, since you have the option to update the values anytime without doing compile changes / redeploy changes. application.properties could more beneficial for the properties that you never change like database credentials.</p>\n"},{"tags":[],"owner":{"account_id":9346278,"reputation":678,"user_id":6937471,"display_name":"Akash"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1536210398,"creation_date":1536210398,"answer_id":52196865,"question_id":43562880,"body_markdown":"I was also having the same warnings in application.properties and looking for a way to get rid of this. Searching for an answer has led me here. So I am posting my answer; it may be useful. \r\n\r\nThere is no harm in using your custom properties in application.properties. There are two ways to get rid of this -\r\n\r\n 1. As mentioned in one of the answers, you can add the meta-data for the custom properties (manually or using quick-fix in STS).\r\n\r\n 2. If you don&#39;t want to add meta-data, then in STS, go to Window -&gt; preferences -&gt; spring -&gt; boot -&gt; properties editor. Here, **select &#39;unknown property&#39; as ignore**. By default, it is warning.","title":"SpringBoot unknown property in application.properties","body":"<p>I was also having the same warnings in application.properties and looking for a way to get rid of this. Searching for an answer has led me here. So I am posting my answer; it may be useful. </p>\n\n<p>There is no harm in using your custom properties in application.properties. There are two ways to get rid of this -</p>\n\n<ol>\n<li><p>As mentioned in one of the answers, you can add the meta-data for the custom properties (manually or using quick-fix in STS).</p></li>\n<li><p>If you don't want to add meta-data, then in STS, go to Window -> preferences -> spring -> boot -> properties editor. Here, <strong>select 'unknown property' as ignore</strong>. By default, it is warning.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6613378,"reputation":74,"user_id":5107574,"display_name":"Hussam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1587196534,"creation_date":1587196534,"answer_id":61285911,"question_id":43562880,"body_markdown":"You need to use `spring-boot-configuration-processor` which will generate the configuration metadata for you.\r\n\r\nSee the example: https://www.baeldung.com/spring-boot-configuration-metadata\r\n","title":"SpringBoot unknown property in application.properties","body":"<p>You need to use <code>spring-boot-configuration-processor</code> which will generate the configuration metadata for you.</p>\n\n<p>See the example: <a href=\"https://www.baeldung.com/spring-boot-configuration-metadata\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-configuration-metadata</a></p>\n"},{"tags":[],"owner":{"account_id":916639,"reputation":553,"user_id":10001916,"display_name":"a5tr0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697564764,"creation_date":1697564764,"answer_id":77311179,"question_id":43562880,"body_markdown":"I had the same problem, even after adding all of the Meta.\r\nSo, in VsCode setting modify : \r\n\r\n    &quot;spring-boot.ls.problem.application-properties.PROP_UNKNOWN_PROPERTY&quot;: &quot;WARNING&quot;\r\n\r\nto \r\n\r\n    &quot;spring-boot.ls.problem.application-properties.PROP_UNKNOWN_PROPERTY&quot;: &quot;IGNORE&quot;","title":"SpringBoot unknown property in application.properties","body":"<p>I had the same problem, even after adding all of the Meta.\nSo, in VsCode setting modify :</p>\n<pre><code>&quot;spring-boot.ls.problem.application-properties.PROP_UNKNOWN_PROPERTY&quot;: &quot;WARNING&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&quot;spring-boot.ls.problem.application-properties.PROP_UNKNOWN_PROPERTY&quot;: &quot;IGNORE&quot;\n</code></pre>\n"}],"owner":{"account_id":5619788,"reputation":4111,"user_id":4450024,"accept_rate":99,"display_name":"Nu&#241;ito Calzada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63670,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":43562950,"answer_count":6,"score":22,"last_activity_date":1697564764,"creation_date":1492884943,"question_id":43562880,"body_markdown":"I&#39;ve generated a Spring Boot web application using Spring Initializr, using embedded Tomcat + Thymeleaf template engine.\r\n\r\nI put this property in my application.properties\r\n\r\n    default.to.address=nunito.calzada@gmail.com\r\n\r\nI am using Spring Tool Suite Version: 3.8.4.RELEASE as a development environment, but I got this warning in the Editor `&#39;default.to.address&#39; is an unknown property.`\r\n\r\nShould I put this property in another property file ?","title":"SpringBoot unknown property in application.properties","body":"<p>I've generated a Spring Boot web application using Spring Initializr, using embedded Tomcat + Thymeleaf template engine.</p>\n\n<p>I put this property in my application.properties</p>\n\n<pre><code>default.to.address=nunito.calzada@gmail.com\n</code></pre>\n\n<p>I am using Spring Tool Suite Version: 3.8.4.RELEASE as a development environment, but I got this warning in the Editor <code>'default.to.address' is an unknown property.</code></p>\n\n<p>Should I put this property in another property file ?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697265150,"post_id":77291778,"comment_id":136260876,"body_markdown":"why are you using `save` method as update method ?","body":"why are you using <code>save</code> method as update method ?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697270977,"post_id":77291778,"comment_id":136261265,"body_markdown":"More constructively: `save` is for new rows, `update` is for updates.","body":"More constructively: <code>save</code> is for new rows, <code>update</code> is for updates."},{"owner":{"account_id":28975094,"reputation":3,"user_id":22194386,"display_name":"hunter man"},"score":0,"creation_date":1697384159,"post_id":77291778,"comment_id":136270403,"body_markdown":"@AndreiLisa data jpa repository does not have update method instead save method does both save or update if id value exists. Please read data jpa documentation for more info","body":"@AndreiLisa data jpa repository does not have update method instead save method does both save or update if id value exists. Please read data jpa documentation for more info"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697386157,"post_id":77291778,"comment_id":136270645,"body_markdown":"be sure I know it,  in your case the problem that you have can be in equals and hashcode, you should override it and don’t use from Lombok default one. Also do you pass the id when you are going to update the existing one entity with ‘save’ method ?","body":"be sure I know it,  in your case the problem that you have can be in equals and hashcode, you should override it and don’t use from Lombok default one. Also do you pass the id when you are going to update the existing one entity with ‘save’ method ?"},{"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"score":0,"creation_date":1702250285,"post_id":77291778,"comment_id":136870166,"body_markdown":"@AndreiLisa You sure about that? hashCode and equals sure as shit didn&#39;t do anything for me","body":"@AndreiLisa You sure about that? hashCode and equals sure as shit didn&#39;t do anything for me"}],"owner":{"account_id":28975094,"reputation":3,"user_id":22194386,"display_name":"hunter man"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697564673,"creation_date":1697262890,"question_id":77291778,"body_markdown":"I&#39;m using spring data jpa @EmbeddedId for my child table BookId which has composite primary on two columns. I&#39;m able to insert and get the records without any issue but when I try to update the existing record I&#39;m getting duplicate row exception. Same code was working fine with spring boot 2.x but I recently upgraded to spring boot 3.x issue started popping out\r\n\r\n\r\n```\r\n\r\n\r\n@Data\r\n\r\n@Embeddable\r\n\r\npublic class BookId implements Serializable {\r\n\r\n    @ManyToOne\r\n\r\n    @JoinColumn(name=&quot;author&quot;, nullable=false)\r\n\r\n    private Author author;\r\n\r\n    @Column(name=&quot;name&quot;)\r\n\r\n    private String name;\r\n\r\n    // standard getters and setters\r\n\r\n}\r\n\r\n@Data\r\n\r\n@Entity(name=&quot;T_BOOK&quot;)\r\n\r\npublic class Book {\r\n\r\n    @EmbeddedId\r\n\r\n    private BookId id;\r\n\r\n    @Column(name=&quot;genre&quot;)\r\n\r\n    private String genre;\r\n\r\n    @Column(name=&quot;price&quot;)\r\n\r\n    private Integer price;\r\n\r\n    //standard getters and setters\r\n\r\n\r\n}\r\n```\r\n\r\nWhen I use below code to update already existing record getting duplicate row error \r\n\r\nbookRepository.save(book)","title":"Spring data jpa - DUPLICATE row was found and Assert was specified","body":"<p>I'm using spring data jpa @EmbeddedId for my child table BookId which has composite primary on two columns. I'm able to insert and get the records without any issue but when I try to update the existing record I'm getting duplicate row exception. Same code was working fine with spring boot 2.x but I recently upgraded to spring boot 3.x issue started popping out</p>\n<pre><code>\n\n@Data\n\n@Embeddable\n\npublic class BookId implements Serializable {\n\n    @ManyToOne\n\n    @JoinColumn(name=&quot;author&quot;, nullable=false)\n\n    private Author author;\n\n    @Column(name=&quot;name&quot;)\n\n    private String name;\n\n    // standard getters and setters\n\n}\n\n@Data\n\n@Entity(name=&quot;T_BOOK&quot;)\n\npublic class Book {\n\n    @EmbeddedId\n\n    private BookId id;\n\n    @Column(name=&quot;genre&quot;)\n\n    private String genre;\n\n    @Column(name=&quot;price&quot;)\n\n    private Integer price;\n\n    //standard getters and setters\n\n\n}\n</code></pre>\n<p>When I use below code to update already existing record getting duplicate row error</p>\n<p>bookRepository.save(book)</p>\n"},{"tags":["java","spring","maven","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697564485,"creation_date":1685546426,"answer_id":76375053,"question_id":76374627,"body_markdown":"From [this answer][1], I found you can send parameters into a spring boot application using \r\n\r\n```\r\n-Drun.arguments=&quot;param1=value1,param2=value2&quot;\r\n```\r\n\r\nExample: \r\n\r\n```\r\nmvn spring-boot:run -Dspring.batch.job.names=jobNameHere -Drun.arguments=&quot;arg=val,arg2=val2&quot; -f pom.xml\r\n```\r\n\r\nWhen running a Spring Batch, that same technique seems to work. \r\n\r\n  [1]: https://stackoverflow.com/questions/23316843/get-command-line-arguments-from-spring-bootrun","title":"When running spring batch from maven, how do you set job parameters?","body":"<p>From <a href=\"https://stackoverflow.com/questions/23316843/get-command-line-arguments-from-spring-bootrun\">this answer</a>, I found you can send parameters into a spring boot application using</p>\n<pre><code>-Drun.arguments=&quot;param1=value1,param2=value2&quot;\n</code></pre>\n<p>Example:</p>\n<pre><code>mvn spring-boot:run -Dspring.batch.job.names=jobNameHere -Drun.arguments=&quot;arg=val,arg2=val2&quot; -f pom.xml\n</code></pre>\n<p>When running a Spring Batch, that same technique seems to work.</p>\n"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76375053,"answer_count":1,"score":0,"last_activity_date":1697564485,"creation_date":1685543711,"question_id":76374627,"body_markdown":"Lets say you run a spring batch program from maven:\r\n\r\n```\r\nmvn spring-boot:run -Dspring.batch.job.names=MyJobNameHere\r\n```\r\n\r\nWhat if I want to send job parameters? How would I accomplish that? ","title":"When running spring batch from maven, how do you set job parameters?","body":"<p>Lets say you run a spring batch program from maven:</p>\n<pre><code>mvn spring-boot:run -Dspring.batch.job.names=MyJobNameHere\n</code></pre>\n<p>What if I want to send job parameters? How would I accomplish that?</p>\n"},{"tags":["java","keycloak"],"answers":[{"tags":[],"owner":{"account_id":16543667,"reputation":548,"user_id":11953783,"display_name":"Joe"},"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1668134696,"creation_date":1567762073,"answer_id":57819293,"question_id":57808046,"body_markdown":"Yes that&#39;s possible for clients with `Access Type: confidential` and `Direct Access Grants Enabled`. You can find more details on these settings in the [documentation](https://www.keycloak.org/docs/latest/server_admin/index.html#oidc-clients).\r\n\r\nYou also need to enable `enable-basic-auth` and supply your `credentials`in your application settings. Consult the [documentation](https://www.keycloak.org/docs/latest/securing_apps/index.html#_java_adapter_config) for more details.","title":"Does Keycloak support basic Authentication?","body":"<p>Yes that's possible for clients with <code>Access Type: confidential</code> and <code>Direct Access Grants Enabled</code>. You can find more details on these settings in the <a href=\"https://www.keycloak.org/docs/latest/server_admin/index.html#oidc-clients\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>You also need to enable <code>enable-basic-auth</code> and supply your <code>credentials</code>in your application settings. Consult the <a href=\"https://www.keycloak.org/docs/latest/securing_apps/index.html#_java_adapter_config\" rel=\"nofollow noreferrer\">documentation</a> for more details.</p>\n"}],"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16420,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":57819293,"answer_count":1,"score":10,"last_activity_date":1697564336,"creation_date":1567695012,"question_id":57808046,"body_markdown":"Does Keycloak support basic Authentication (Authorization header that contains the word Basic word followed by a space and a base64-encoded string username:password ) and if so how I can configure realm and client settings for it ?\r\nI want to secure my rest api with Keycloak and support also basic Authentication as an option.","title":"Does Keycloak support basic Authentication?","body":"<p>Does Keycloak support basic Authentication (Authorization header that contains the word Basic word followed by a space and a base64-encoded string username:password ) and if so how I can configure realm and client settings for it ?\nI want to secure my rest api with Keycloak and support also basic Authentication as an option.</p>\n"},{"tags":["java","set","java-stream"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697562570,"post_id":77310522,"comment_id":136294468,"body_markdown":"Why would you want to? Streams are best suited for operations that don’t modify anything outside the stream pipeline. I would unconditionally prefer to keep the `for` loop.","body":"Why would you want to? Streams are best suited for operations that don’t modify anything outside the stream pipeline. I would unconditionally prefer to keep the <code>for</code> loop."},{"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"score":0,"creation_date":1697563753,"post_id":77310522,"comment_id":136294682,"body_markdown":"Thanks for the information!!..As a curiosity, when is it advisable to apply stream?","body":"Thanks for the information!!..As a curiosity, when is it advisable to apply stream?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697570610,"post_id":77310522,"comment_id":136295765,"body_markdown":"Hard to say in general. I often use a stream pipeline exactly where it does not produce any other effect than the return value from its terminal operation. And I always think twice, try the stream approach, evaluate it, and if I am not sure, also try a loop approach and see which I like better.","body":"Hard to say in general. I often use a stream pipeline exactly where it does not produce any other effect than the return value from its terminal operation. And I always think twice, try the stream approach, evaluate it, and if I am not sure, also try a loop approach and see which I like better."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697649669,"post_id":77310522,"comment_id":136307705,"body_markdown":"You already got a good answer but even when keeping your approach, you should notice that some things are entirely obsolete: 1) copying the list into an `ArrayList`; you can simply use `List&lt;String&gt; wordToList=Arrays.asList(word.split(&quot;&quot;));` 2) the `.map(String::valueOf)`; the elements are already strings. You can use `return wordToList.stream() .collect(Collectors.joining(&quot;&quot;));` or even `return String.join(&quot;&quot;, wordToList);`","body":"You already got a good answer but even when keeping your approach, you should notice that some things are entirely obsolete: 1) copying the list into an <code>ArrayList</code>; you can simply use <code>List&lt;String&gt; wordToList=Arrays.asList(word.split(&quot;&quot;));</code> 2) the <code>.map(String::valueOf)</code>; the elements are already strings. You can use <code>return wordToList.stream() .collect(Collectors.joining(&quot;&quot;));</code> or even <code>return String.join(&quot;&quot;, wordToList);</code>"}],"answers":[{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697562679,"creation_date":1697562679,"answer_id":77310972,"question_id":77310522,"body_markdown":"You actually don&#39;t need a stream. You can use [forEach](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)) like this.\r\n```java\r\nvalueUniqueToRemplace.forEach(i -&gt; wordToList.set(i, &quot;_&quot;));\r\n```\r\nIf you want to use stream, you can do it like this\r\n```java\r\nvalueUniqueToRemplace.stream.forEach(i -&gt; wordToList.set(i, &quot;_&quot;));\r\n```\r\nAlthough these two approaches look similar, there are semantic difference.","title":"How can I bring the modification of a list from the values ​of a set to java stream?","body":"<p>You actually don't need a stream. You can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\">forEach</a> like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>valueUniqueToRemplace.forEach(i -&gt; wordToList.set(i, &quot;_&quot;));\n</code></pre>\n<p>If you want to use stream, you can do it like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>valueUniqueToRemplace.stream.forEach(i -&gt; wordToList.set(i, &quot;_&quot;));\n</code></pre>\n<p>Although these two approaches look similar, there are semantic difference.</p>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697564233,"creation_date":1697564233,"answer_id":77311126,"question_id":77310522,"body_markdown":"&gt; as a good practice I am trying to apply stream in some operations with Java collections\r\n\r\nPractice is good but also notice when it makes sense to use a certain language construct and when not. Not every task is suitable to be solved with streams. If I see it correctly, you are trying to replace certain indices of a string with underscores. This is not clear, at least at first glance at your method. I would have written something like below, which is easier to understand:\r\n\r\n    private static String wordToGuess1(String word,List&lt;Integer&gt; valueUniqueToReplace){\r\n        char[] chars = word.toCharArray();\r\n        valueUniqueToReplace.forEach(i -&gt; chars[i] = &#39;_&#39;);\r\n        return String.valueOf(chars);\r\n    }\r\n\r\nor\r\n\r\n    private static String wordToGuess2(String word,List&lt;Integer&gt; valueUniqueToReplace){\r\n        StringBuilder sb = new StringBuilder(word);\r\n        valueUniqueToReplace.forEach(i -&gt; sb.setCharAt(i, &#39;_&#39;));\r\n        return sb.toString();\r\n    }\r\n\r\nThere are certainly better approaches but spontaneously I think of the following alternatives with streams:\r\n\r\n    private static String wordToGuess3(String word,List&lt;Integer&gt; valueUniqueToReplace){\r\n        return IntStream.range(0, word.length())\r\n                        .map(i -&gt; valueUniqueToReplace.contains(i) ? &#39;_&#39; : word.charAt(i))\r\n                        .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)\r\n                        .toString();\r\n    }\r\n\r\n    private static String wordToGuess4(String word,List&lt;Integer&gt; valueUniqueToReplace){\r\n        return valueUniqueToReplace.stream()\r\n                                   .reduce(new StringBuilder(word),\r\n                                           (sb, i) -&gt; sb.replace(i, i + 1, &quot;_&quot;),\r\n                                           (a,b) -&gt; a)\r\n                                   .toString();\r\n    }\r\n\r\nDecide for yourself what is more readable, I for one would prefer the non stream approach","title":"How can I bring the modification of a list from the values ​of a set to java stream?","body":"<blockquote>\n<p>as a good practice I am trying to apply stream in some operations with Java collections</p>\n</blockquote>\n<p>Practice is good but also notice when it makes sense to use a certain language construct and when not. Not every task is suitable to be solved with streams. If I see it correctly, you are trying to replace certain indices of a string with underscores. This is not clear, at least at first glance at your method. I would have written something like below, which is easier to understand:</p>\n<pre><code>private static String wordToGuess1(String word,List&lt;Integer&gt; valueUniqueToReplace){\n    char[] chars = word.toCharArray();\n    valueUniqueToReplace.forEach(i -&gt; chars[i] = '_');\n    return String.valueOf(chars);\n}\n</code></pre>\n<p>or</p>\n<pre><code>private static String wordToGuess2(String word,List&lt;Integer&gt; valueUniqueToReplace){\n    StringBuilder sb = new StringBuilder(word);\n    valueUniqueToReplace.forEach(i -&gt; sb.setCharAt(i, '_'));\n    return sb.toString();\n}\n</code></pre>\n<p>There are certainly better approaches but spontaneously I think of the following alternatives with streams:</p>\n<pre><code>private static String wordToGuess3(String word,List&lt;Integer&gt; valueUniqueToReplace){\n    return IntStream.range(0, word.length())\n                    .map(i -&gt; valueUniqueToReplace.contains(i) ? '_' : word.charAt(i))\n                    .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)\n                    .toString();\n}\n\nprivate static String wordToGuess4(String word,List&lt;Integer&gt; valueUniqueToReplace){\n    return valueUniqueToReplace.stream()\n                               .reduce(new StringBuilder(word),\n                                       (sb, i) -&gt; sb.replace(i, i + 1, &quot;_&quot;),\n                                       (a,b) -&gt; a)\n                               .toString();\n}\n</code></pre>\n<p>Decide for yourself what is more readable, I for one would prefer the non stream approach</p>\n"}],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77311126,"answer_count":2,"score":0,"last_activity_date":1697564233,"creation_date":1697558344,"question_id":77310522,"body_markdown":"\r\nI am currently working with Java and practicing my programming logic and as a good practice I am trying to apply stream in some operations with Java collections.\r\n\r\nIn this case I have a method that receives a string and a set list, the string must be taken to a list to replace its characters according to the values ​​found in the Set, once replaced they are taken back to string and It is returned:\r\n\r\n    private static String wordToGuess(String word,List&lt;Integer&gt; valueUniqueToRemplace){\r\n        List&lt;String&gt; wordToList=new ArrayList&lt;&gt;(Arrays.asList(word.split(&quot;&quot;)));\r\n        for (Integer integer : valueUniqueToRemplace) {\r\n            wordToList.set(integer, &quot;_&quot;);\r\n        }\r\n        return wordToList.stream().map(String::valueOf).collect(Collectors.joining(&quot;&quot;));\r\n    }\r\n\r\nHow could I replace the for loop and what is done within it with a stream function?\r\n\r\n\r\n\r\n","title":"How can I bring the modification of a list from the values ​of a set to java stream?","body":"<p>I am currently working with Java and practicing my programming logic and as a good practice I am trying to apply stream in some operations with Java collections.</p>\n<p>In this case I have a method that receives a string and a set list, the string must be taken to a list to replace its characters according to the values ​​found in the Set, once replaced they are taken back to string and It is returned:</p>\n<pre><code>private static String wordToGuess(String word,List&lt;Integer&gt; valueUniqueToRemplace){\n    List&lt;String&gt; wordToList=new ArrayList&lt;&gt;(Arrays.asList(word.split(&quot;&quot;)));\n    for (Integer integer : valueUniqueToRemplace) {\n        wordToList.set(integer, &quot;_&quot;);\n    }\n    return wordToList.stream().map(String::valueOf).collect(Collectors.joining(&quot;&quot;));\n}\n</code></pre>\n<p>How could I replace the for loop and what is done within it with a stream function?</p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697564175,"creation_date":1697563674,"answer_id":77311067,"question_id":77311016,"body_markdown":"Ctrl + Shift + A to show actions, then type &quot;Main Menu&quot; and check it\r\n\r\n[![Main Menu toggle][1]][1]\r\n\r\nAlso, \r\n\r\nb) go to &quot;Settings | Appearance &amp; Behavior | New UI&quot; and enable the &quot;Show main menu&quot; in a separate toolbar option. \r\n\r\nc) Alternatively, go to &quot;View | Appearance&quot; and enable &quot;Main Menu as Separate Toolbar&quot;.\r\n\r\n  [1]: https://i.stack.imgur.com/rd6nr.png","title":"Intellij 2023 IDE: Always show the Menu Bar at top","body":"<p>Ctrl + Shift + A to show actions, then type &quot;Main Menu&quot; and check it</p>\n<p><a href=\"https://i.stack.imgur.com/rd6nr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rd6nr.png\" alt=\"Main Menu toggle\" /></a></p>\n<p>Also,</p>\n<p>b) go to &quot;Settings | Appearance &amp; Behavior | New UI&quot; and enable the &quot;Show main menu&quot; in a separate toolbar option.</p>\n<p>c) Alternatively, go to &quot;View | Appearance&quot; and enable &quot;Main Menu as Separate Toolbar&quot;.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77311067,"answer_count":1,"score":1,"last_activity_date":1697564175,"creation_date":1697563175,"question_id":77311016,"body_markdown":"I downloaded the new IntelliJ Java for 2023.\r\n\r\nTo see the menu Bar. I need to do additional click. First click the button in Green box below, and then I can see the File menu. I want it like the original, where menu is Always showing. How can this be done ? \r\n\r\n**Step 1:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Step 2:**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nIts slightly cumbersome to do additional click everytime.\r\n\r\n  [1]: https://i.stack.imgur.com/OfUMD.png\r\n  [2]: https://i.stack.imgur.com/lxEus.png","title":"Intellij 2023 IDE: Always show the Menu Bar at top","body":"<p>I downloaded the new IntelliJ Java for 2023.</p>\n<p>To see the menu Bar. I need to do additional click. First click the button in Green box below, and then I can see the File menu. I want it like the original, where menu is Always showing. How can this be done ?</p>\n<p><strong>Step 1:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OfUMD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OfUMD.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 2:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/lxEus.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lxEus.png\" alt=\"enter image description here\" /></a></p>\n<p>Its slightly cumbersome to do additional click everytime.</p>\n"},{"tags":["java","jasper-reports"],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697564117,"answer_count":0,"score":0,"last_activity_date":1697564127,"creation_date":1697525786,"question_id":77306751,"body_markdown":"I have a problem with JasperReports library/JasperSoft Studio. I am working on an OSGi project, and I am implementing reports generation. I have my data model inside an OSGi bundle:\r\n\r\n    public final class TodaysTransactionData extends OverviewData {\r\n    \r\n    \tprivate final String district;\r\n    \tprivate final LocalDate date;\r\n    \tprivate final String subdivision;\r\n    \tprivate final Boolean isAutomatic;\r\n    \tprivate final List&lt; PaymentData &gt; cashPayments;\r\n    \tprivate final List&lt; PaymentData &gt; transfers;\r\n        // Getters, setters, constructors\r\n    }\r\n\r\nand:\r\n\r\n    public class PaymentData {\r\n    \r\n    \tprivate final String referenceNumber;\r\n    \tprivate final float claimAmount;\r\n    \tprivate final float paidAmount;\r\n    \tprivate final float totalPaid;\r\n    \tprivate final String paymentStatus;\r\n    \tprivate final LocalDate paymentDate;\r\n\r\n        // Getters, setters, constructors\r\n    }\r\n\r\nI have almost finished designing my report in JasperSoft Studio, but I have runned into a problem - JasperSoft Studio had no knowledge about my data classes. I have found an answer, which suggested to create a tiny jar with required classes, so I did that. Here&#39;s the structure:\r\n\r\n    car.manufacturer.base\r\n    │\r\n    └───reports.datamodel\r\n        │\r\n        ├── OverviewData\r\n        ├── TodaysTransactionData\r\n        ├── PaymentData\r\n        │\r\n        └───descriptor\r\n            ├── Descriptor\r\n            ├── TodaysTransactionDescriptor\r\n\r\nThe packages and names of the classes match my data model that&#39;s defined in the OSGi app.\r\n\r\nAfter I have created this Jar, I have added it to the Java build path. Then I successfully compiled my report and added it to the classpath of the OSGi app.\r\n\r\nThis is how I create the PDF file\r\n\r\n\t\t\tString templateInputStream = FrameworkUtil.getBundle( this.getClass() ).getBundleContext().getBundle().getResource( &quot;/car/manufacturer/base/reports/template/TodaysTransactionTemplate.jasper&quot; ).getFile();\r\n\t\t\tJasperReport carReport = (JasperReport) JRLoader.loadObject( getFileFromResources( templateInputStream ) );\r\n\r\n\t\t\tJRBeanCollectionDataSource carCashPaymentsSource = new JRBeanCollectionDataSource( todaysTransactionData.getCashPayments() );\r\n\t\t\tJRBeanCollectionDataSource carTransfersSource = new JRBeanCollectionDataSource( todaysTransactionData.getTransfers() );\r\n\t\t\t\r\n\t\t\tMap&lt; String, Object &gt; parameters = new HashMap&lt;&gt;();\r\n\t\t\tparameters.put( &quot;PAYMENTS_OVERVIEW&quot;, todaysTransactionData );\r\n\t\t\tparameters.put( &quot;CLIENT&quot;, getClient().getName() );\r\n\t\t\tparameters.put( &quot;CASH_PAYMENTS&quot;, carCashPaymentsSource );\r\n\t\t\tparameters.put( &quot;TRANSFERS&quot;, carTransfersSource );\r\n\t\t\t\r\n\t\t\tJasperPrint carPrint = JasperFillManager.fillReport(carReport, parameters, new JREmptyDataSource());\r\n\r\nWhere `todaysTransactionData` is an instance of `TodaysTransactionData` with two lists of `PaymentData`\r\n\r\nWhen I&#39;m trying to generate a PDF file, I get this exception:\r\n\r\n&gt; Caused by: java.lang.ClassNotFoundException:\r\n&gt; car.manufacturer.base.reports.datamodel.TodaysTransactionData\r\n\r\n&gt; net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error\r\n&gt; evaluating expression for source text: msg(&quot;Received Payments Duration\r\n&gt; {0}&quot;, $P{PAYMENTS_OVERVIEW}.getDate().toString())\r\n\r\nTo clarify, `PAYMENTS_OVERVIEW` is a Java object, instance of `TodaysTransactionData`, that I&#39;m passing to the report\r\n\r\n`&lt;parameter name=&quot;PAYMENTS_OVERVIEW&quot; class=&quot;car.manufacturer.base.reports.datamodel.TodaysTransactionData&quot;/&gt;`\r\n\r\nWhat am I doing wrong?\r\n","title":"JasperReports: Class not found exception when filling a JasperReport with data","body":"<p>I have a problem with JasperReports library/JasperSoft Studio. I am working on an OSGi project, and I am implementing reports generation. I have my data model inside an OSGi bundle:</p>\n<pre><code>public final class TodaysTransactionData extends OverviewData {\n\n    private final String district;\n    private final LocalDate date;\n    private final String subdivision;\n    private final Boolean isAutomatic;\n    private final List&lt; PaymentData &gt; cashPayments;\n    private final List&lt; PaymentData &gt; transfers;\n    // Getters, setters, constructors\n}\n</code></pre>\n<p>and:</p>\n<pre><code>public class PaymentData {\n\n    private final String referenceNumber;\n    private final float claimAmount;\n    private final float paidAmount;\n    private final float totalPaid;\n    private final String paymentStatus;\n    private final LocalDate paymentDate;\n\n    // Getters, setters, constructors\n}\n</code></pre>\n<p>I have almost finished designing my report in JasperSoft Studio, but I have runned into a problem - JasperSoft Studio had no knowledge about my data classes. I have found an answer, which suggested to create a tiny jar with required classes, so I did that. Here's the structure:</p>\n<pre><code>car.manufacturer.base\n│\n└───reports.datamodel\n    │\n    ├── OverviewData\n    ├── TodaysTransactionData\n    ├── PaymentData\n    │\n    └───descriptor\n        ├── Descriptor\n        ├── TodaysTransactionDescriptor\n</code></pre>\n<p>The packages and names of the classes match my data model that's defined in the OSGi app.</p>\n<p>After I have created this Jar, I have added it to the Java build path. Then I successfully compiled my report and added it to the classpath of the OSGi app.</p>\n<p>This is how I create the PDF file</p>\n<pre><code>        String templateInputStream = FrameworkUtil.getBundle( this.getClass() ).getBundleContext().getBundle().getResource( &quot;/car/manufacturer/base/reports/template/TodaysTransactionTemplate.jasper&quot; ).getFile();\n        JasperReport carReport = (JasperReport) JRLoader.loadObject( getFileFromResources( templateInputStream ) );\n\n        JRBeanCollectionDataSource carCashPaymentsSource = new JRBeanCollectionDataSource( todaysTransactionData.getCashPayments() );\n        JRBeanCollectionDataSource carTransfersSource = new JRBeanCollectionDataSource( todaysTransactionData.getTransfers() );\n        \n        Map&lt; String, Object &gt; parameters = new HashMap&lt;&gt;();\n        parameters.put( &quot;PAYMENTS_OVERVIEW&quot;, todaysTransactionData );\n        parameters.put( &quot;CLIENT&quot;, getClient().getName() );\n        parameters.put( &quot;CASH_PAYMENTS&quot;, carCashPaymentsSource );\n        parameters.put( &quot;TRANSFERS&quot;, carTransfersSource );\n        \n        JasperPrint carPrint = JasperFillManager.fillReport(carReport, parameters, new JREmptyDataSource());\n</code></pre>\n<p>Where <code>todaysTransactionData</code> is an instance of <code>TodaysTransactionData</code> with two lists of <code>PaymentData</code></p>\n<p>When I'm trying to generate a PDF file, I get this exception:</p>\n<blockquote>\n<p>Caused by: java.lang.ClassNotFoundException:\ncar.manufacturer.base.reports.datamodel.TodaysTransactionData</p>\n</blockquote>\n<blockquote>\n<p>net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error\nevaluating expression for source text: msg(&quot;Received Payments Duration\n{0}&quot;, $P{PAYMENTS_OVERVIEW}.getDate().toString())</p>\n</blockquote>\n<p>To clarify, <code>PAYMENTS_OVERVIEW</code> is a Java object, instance of <code>TodaysTransactionData</code>, that I'm passing to the report</p>\n<p><code>&lt;parameter name=&quot;PAYMENTS_OVERVIEW&quot; class=&quot;car.manufacturer.base.reports.datamodel.TodaysTransactionData&quot;/&gt;</code></p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","linux","shell","kubernetes"],"comments":[{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1697601555,"post_id":77311103,"comment_id":136298882,"body_markdown":"It seems like your problem is the API that returns 504. Either increase the timeout for that (perhaps some proxy in the middle?) or make the API operation asynchronous.","body":"It seems like your problem is the API that returns 504. Either increase the timeout for that (perhaps some proxy in the middle?) or make the API operation asynchronous."},{"owner":{"account_id":14070649,"reputation":135,"user_id":10164223,"display_name":"Meenal"},"score":0,"creation_date":1697602305,"post_id":77311103,"comment_id":136298948,"body_markdown":"@JurajMartinka:Could you please guide me how to make the API operation asynchronous. Also I tried giving setConnectTimeout(150000); but it didnot help.","body":"@JurajMartinka:Could you please guide me how to make the API operation asynchronous. Also I tried giving setConnectTimeout(150000); but it didnot help."},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1697631669,"post_id":77311103,"comment_id":136303763,"body_markdown":"Building asynchronous API depends on the specifics of the project. About the timeout: can you observe the request at the backend (perhaps with logs) and see how long it takes to process? On the client side, does the error happen after the 150 seconds (the timeout) or sooner?","body":"Building asynchronous API depends on the specifics of the project. About the timeout: can you observe the request at the backend (perhaps with logs) and see how long it takes to process? On the client side, does the error happen after the 150 seconds (the timeout) or sooner?"},{"owner":{"account_id":14070649,"reputation":135,"user_id":10164223,"display_name":"Meenal"},"score":0,"creation_date":1697643820,"post_id":77311103,"comment_id":136306631,"body_markdown":"it takes around 2mins. or slight more than that. I guess in client-side pod is running timed-out after 2min. Not sure how then in retry of pod , its able to complete the process then","body":"it takes around 2mins. or slight more than that. I guess in client-side pod is running timed-out after 2min. Not sure how then in retry of pod , its able to complete the process then"}],"owner":{"account_id":14070649,"reputation":135,"user_id":10164223,"display_name":"Meenal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697564004,"creation_date":1697564004,"question_id":77311103,"body_markdown":"I need to call an API via curl command inside a shell file which is taking more than 2min. to complete the entire process and bring back the status response.\r\nAs a result, the pod gets into error state and again starts retrying which results into multiple calls to that API.\r\n\r\nI don&#39;t want the pod to get into Error state as it gets back the response as 504 Gateway Timeout.\r\nIs there any provision to increase the time-out limit of the pod or I need to increase java API response time limit so that it does not responds with 504.\r\nI tried at job level by using -m or --max-time-out in curl command and request-time-out parameter under containers section of deployment yaml but nothing worked.","title":"How to increase timeout limit of a specific job in kubernetes","body":"<p>I need to call an API via curl command inside a shell file which is taking more than 2min. to complete the entire process and bring back the status response.\nAs a result, the pod gets into error state and again starts retrying which results into multiple calls to that API.</p>\n<p>I don't want the pod to get into Error state as it gets back the response as 504 Gateway Timeout.\nIs there any provision to increase the time-out limit of the pod or I need to increase java API response time limit so that it does not responds with 504.\nI tried at job level by using -m or --max-time-out in curl command and request-time-out parameter under containers section of deployment yaml but nothing worked.</p>\n"},{"tags":["java","spring-boot","h2","java-17"],"comments":[{"owner":{"account_id":1806558,"reputation":4512,"user_id":1643558,"accept_rate":73,"display_name":"tgkprog"},"score":0,"creation_date":1697564545,"post_id":77310747,"comment_id":136294820,"body_markdown":"add a no args constructor to your User class. Or use Lombok with `@Data` or `@Accessors` and enable annotation processing in your IDE (google it for your IDE i use jet brains Idea, need to just check a box in the settings","body":"add a no args constructor to your User class. Or use Lombok with <code>@Data</code> or <code>@Accessors</code> and enable annotation processing in your IDE (google it for your IDE i use jet brains Idea, need to just check a box in the settings"}],"answers":[{"tags":[],"owner":{"account_id":13210775,"reputation":967,"user_id":9541096,"display_name":"Owais Yosuf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697560963,"creation_date":1697560963,"answer_id":77310781,"question_id":77310747,"body_markdown":"    @Entity\r\n    @Table(name = &quot;\\&quot;user\\&quot;&quot;) // Enclose the table name in double quotes\r\n    public class User {\r\n        // ...\r\n    }\r\n","title":"Problem with SpringBoot: org.springframework.dao.InvalidDataAccessResourceUsageException","body":"<pre><code>@Entity\n@Table(name = &quot;\\&quot;user\\&quot;&quot;) // Enclose the table name in double quotes\npublic class User {\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":16025789,"reputation":29,"user_id":11566058,"display_name":"Rikissssss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77310781,"answer_count":1,"score":0,"last_activity_date":1697563960,"creation_date":1697560470,"question_id":77310747,"body_markdown":"I&#39;m new with the development in SpringBoot and I started to create a simple API to update a list of users. To create the project I used JDK 17, Spring Boot 3.1.4 and I added as dependencies  only Spring Boot DevTools, Spring Data JPA, H2 Database and Spring Web.\r\nI make the structure of the project in this way.\r\n\r\n    com.api_server.service\r\n    &gt;&gt;entities\r\n    ==== User\r\n    &gt;&gt; repository\r\n    ==== userRepository\r\n    &gt;&gt; service\r\n    ==== userService\r\n    &gt;&gt;controller\r\n    ==== userController\r\n\r\nThe content of all files is the following: \\\r\n**User**\r\n\r\n    package com.api_server.service.entities;\r\n    \r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    \r\n    @Entity\r\n    public class User {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int id;\r\n        private String name;\r\n        private String email;\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        public User() {\r\n            super();\r\n        }\r\n    }\r\n\r\n **userRepository**\r\n\r\n    package com.api_server.service.repository;\r\n    \r\n    import com.api_server.service.entities.User;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface userRepository extends JpaRepository&lt;User, Integer&gt; {\r\n    }\r\n\r\n**userService**\r\n\r\n    package com.api_server.service.service;\r\n    \r\n    import com.api_server.service.entities.User;\r\n    import com.api_server.service.repository.userRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Service\r\n    public class userService {\r\n        @Autowired\r\n        private userRepository userRepository;\r\n        public List &lt;User&gt; getAll(){\r\n            return userRepository.findAll();\r\n        }\r\n        public User getUserById (int id){\r\n            return userRepository.findById(id).orElse(null);\r\n        }\r\n    \r\n        public User save(User user){\r\n            User newUser =userRepository.save(user);\r\n            return newUser;\r\n        }\r\n    }\r\n\r\n**userController**\r\n\r\n    package com.api_server.service.controller;\r\n    \r\n    import com.api_server.service.entities.User;\r\n    import com.api_server.service.service.userService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import java.util.List;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/user&quot;)\r\n    public class userController {\r\n    \r\n        @Autowired\r\n        private userService userService;\r\n    \r\n        @GetMapping\r\n         public ResponseEntity &lt;List&lt;User&gt;&gt; listUser(){\r\n            List&lt;User&gt; users =userService.getAll();\r\n            if (users.isEmpty()){return ResponseEntity.noContent().build();}\r\n            return ResponseEntity.ok(users);\r\n        }\r\n        @GetMapping(&quot;/{id}&quot;)\r\n        public ResponseEntity &lt;User&gt; getUser(@PathVariable(&quot;id&quot;) int id){\r\n            User user =userService.getUserById(id);\r\n            if (user==null){\r\n                return ResponseEntity.notFound().build();\r\n            }\r\n            return ResponseEntity.ok(user);\r\n        }\r\n        @PostMapping\r\n        public ResponseEntity&lt;User&gt; saveUser(@RequestBody User user){\r\n            User newUser =userService.save(user);\r\n            return ResponseEntity.ok(newUser);\r\n        }\r\n    }\r\n\r\nMaking a POST request from Postman to localhost:8080/user with JSON body:\r\n\r\n    {\r\n        &quot;name&quot;: &quot;name&quot;,\r\n        &quot;email&quot;: &quot;email&quot;\r\n    }\r\n\r\nthe IDE give me the error:\r\n\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Syntax error in SQL statement &quot;select u1_0.id,u1_0.email,u1_0.name from [*]user u1_0 where u1_0.id=?&quot;; expected &quot;identifier&quot;; SQL statement:\r\n    select u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=? [42001-214]] [select u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=?]; SQL [select u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=?]] with root cause\r\n\r\nProbably it is a very stupid error, but I want to understand how to manage these issues.\r\nThanks in advance","title":"Problem with SpringBoot: org.springframework.dao.InvalidDataAccessResourceUsageException","body":"<p>I'm new with the development in SpringBoot and I started to create a simple API to update a list of users. To create the project I used JDK 17, Spring Boot 3.1.4 and I added as dependencies  only Spring Boot DevTools, Spring Data JPA, H2 Database and Spring Web.\nI make the structure of the project in this way.</p>\n<pre><code>com.api_server.service\n&gt;&gt;entities\n==== User\n&gt;&gt; repository\n==== userRepository\n&gt;&gt; service\n==== userService\n&gt;&gt;controller\n==== userController\n</code></pre>\n<p>The content of all files is the following: <br />\n<strong>User</strong></p>\n<pre><code>package com.api_server.service.entities;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String name;\n    private String email;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public User() {\n        super();\n    }\n}\n</code></pre>\n<p><strong>userRepository</strong></p>\n<pre><code>package com.api_server.service.repository;\n\nimport com.api_server.service.entities.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface userRepository extends JpaRepository&lt;User, Integer&gt; {\n}\n</code></pre>\n<p><strong>userService</strong></p>\n<pre><code>package com.api_server.service.service;\n\nimport com.api_server.service.entities.User;\nimport com.api_server.service.repository.userRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class userService {\n    @Autowired\n    private userRepository userRepository;\n    public List &lt;User&gt; getAll(){\n        return userRepository.findAll();\n    }\n    public User getUserById (int id){\n        return userRepository.findById(id).orElse(null);\n    }\n\n    public User save(User user){\n        User newUser =userRepository.save(user);\n        return newUser;\n    }\n}\n</code></pre>\n<p><strong>userController</strong></p>\n<pre><code>package com.api_server.service.controller;\n\nimport com.api_server.service.entities.User;\nimport com.api_server.service.service.userService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/user&quot;)\npublic class userController {\n\n    @Autowired\n    private userService userService;\n\n    @GetMapping\n     public ResponseEntity &lt;List&lt;User&gt;&gt; listUser(){\n        List&lt;User&gt; users =userService.getAll();\n        if (users.isEmpty()){return ResponseEntity.noContent().build();}\n        return ResponseEntity.ok(users);\n    }\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity &lt;User&gt; getUser(@PathVariable(&quot;id&quot;) int id){\n        User user =userService.getUserById(id);\n        if (user==null){\n            return ResponseEntity.notFound().build();\n        }\n        return ResponseEntity.ok(user);\n    }\n    @PostMapping\n    public ResponseEntity&lt;User&gt; saveUser(@RequestBody User user){\n        User newUser =userService.save(user);\n        return ResponseEntity.ok(newUser);\n    }\n}\n</code></pre>\n<p>Making a POST request from Postman to localhost:8080/user with JSON body:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;name&quot;,\n    &quot;email&quot;: &quot;email&quot;\n}\n</code></pre>\n<p>the IDE give me the error:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Syntax error in SQL statement &quot;select u1_0.id,u1_0.email,u1_0.name from [*]user u1_0 where u1_0.id=?&quot;; expected &quot;identifier&quot;; SQL statement:\nselect u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=? [42001-214]] [select u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=?]; SQL [select u1_0.id,u1_0.email,u1_0.name from user u1_0 where u1_0.id=?]] with root cause\n</code></pre>\n<p>Probably it is a very stupid error, but I want to understand how to manage these issues.\nThanks in advance</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":2876818,"reputation":643,"user_id":2468639,"display_name":"Anil Kumar Athuluri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628447056,"creation_date":1628375345,"answer_id":68696547,"question_id":68693028,"body_markdown":"*FROM* keyword is missing in the query. The right query would be something like below,\r\n\r\n      @Query(&quot;DELETE FROM CustomerCoupons cc WHERE cc.couponId = :couponId&quot;)","title":"JPA derived delete query for many-to-many relationship","body":"<p><em>FROM</em> keyword is missing in the query. The right query would be something like below,</p>\n<pre><code>  @Query(&quot;DELETE FROM CustomerCoupons cc WHERE cc.couponId = :couponId&quot;)\n</code></pre>\n"}],"owner":{"account_id":19331660,"reputation":11,"user_id":14133124,"display_name":"Olga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697563402,"creation_date":1628344855,"question_id":68693028,"body_markdown":"I&#39;m writing an app in Spting Boot with Hibernet. In this app I have two entities: Customer and Coupon with many-to-many relationship:\r\n\r\n    @Entity\r\n    public class Customer {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate Integer id;\r\n    \r\n    \tprivate String firstName;\r\n    \tprivate String lastName;\r\n    \tprivate String email;\r\n    \tprivate String password;\r\n    \t\r\n    \t@ManyToMany(fetch = FetchType.LAZY)\r\n    \tprivate List&lt;Coupon&gt; coupons;\r\n\r\n    @Entity\r\n    public class Coupon {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate Integer id;\r\n    \r\n    \tprivate String title;\r\n    \tprivate LocalDate startDate;\r\n    \tprivate LocalDate endDate;\r\n    \tprivate Integer amount;\r\n    \tprivate Double;\r\n\r\nAnd yes, I don&#39;t want to keep a list of customers in the coupon entity. But this many-to-many relationship works and creates a table in the database with the customer_coupons name.\r\n\r\nThe question is this. I want to write a derived delete query in the coupon repository that deletes all the rows in their common customer_coupons table. E.g. I want to delete all the purchases of a given coupon.\r\n\r\nI have a coupon repository with the derived delete query:\r\n\r\n    @Repository\r\n    public interface CouponRepository extends JpaRepository&lt;Coupon, Integer&gt; {\r\n    \t@Modifying\r\n    \t@Query(&quot;DELETE customer_coupons cc WHERE cc.coupons_id = :couponId&quot;)\r\n    \tpublic List&lt;Integer&gt; deletePurchases(int couponId);\r\n    }\r\n\r\nBut it doesn&#39;t work and gives me this error:\r\n\r\n    Error creating bean with name &#39;couponRepository&#39; defined in com.olga.projectPart2.repository.CouponRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)! Reason: Validation failed for query for method public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)!\r\n\r\nWhat do I miss? Is it possible or do I need to use a native query? And yes, I don&#39;t want to use cascade properties.","title":"JPA derived delete query for many-to-many relationship","body":"<p>I'm writing an app in Spting Boot with Hibernet. In this app I have two entities: Customer and Coupon with many-to-many relationship:</p>\n<pre><code>@Entity\npublic class Customer {\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Integer id;\n\n    private String firstName;\n    private String lastName;\n    private String email;\n    private String password;\n    \n    @ManyToMany(fetch = FetchType.LAZY)\n    private List&lt;Coupon&gt; coupons;\n\n@Entity\npublic class Coupon {\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Integer id;\n\n    private String title;\n    private LocalDate startDate;\n    private LocalDate endDate;\n    private Integer amount;\n    private Double;\n</code></pre>\n<p>And yes, I don't want to keep a list of customers in the coupon entity. But this many-to-many relationship works and creates a table in the database with the customer_coupons name.</p>\n<p>The question is this. I want to write a derived delete query in the coupon repository that deletes all the rows in their common customer_coupons table. E.g. I want to delete all the purchases of a given coupon.</p>\n<p>I have a coupon repository with the derived delete query:</p>\n<pre><code>@Repository\npublic interface CouponRepository extends JpaRepository&lt;Coupon, Integer&gt; {\n    @Modifying\n    @Query(&quot;DELETE customer_coupons cc WHERE cc.coupons_id = :couponId&quot;)\n    public List&lt;Integer&gt; deletePurchases(int couponId);\n}\n</code></pre>\n<p>But it doesn't work and gives me this error:</p>\n<pre><code>Error creating bean with name 'couponRepository' defined in com.olga.projectPart2.repository.CouponRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)! Reason: Validation failed for query for method public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract void com.olga.projectPart2.repository.CouponRepository.deletePurchases(int)!\n</code></pre>\n<p>What do I miss? Is it possible or do I need to use a native query? And yes, I don't want to use cascade properties.</p>\n"},{"tags":["java","docker","testing","junit","testcontainers"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1697538785,"post_id":77306908,"comment_id":136289687,"body_markdown":"Where does the `ConnectionManager` come from?  How is it configured?  You&#39;d need to pass the IP address and port from the `PostgreSQLContainer&lt;T&gt;` into that.  (Also consider whether an in-memory database like H2 or HDBC will work: it will be much faster and simpler than Testcontainers and can run in more places.)","body":"Where does the <code>ConnectionManager</code> come from?  How is it configured?  You&#39;d need to pass the IP address and port from the <code>PostgreSQLContainer&lt;T&gt;</code> into that.  (Also consider whether an in-memory database like H2 or HDBC will work: it will be much faster and simpler than Testcontainers and can run in more places.)"}],"answers":[{"tags":[],"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697563344,"creation_date":1697563344,"answer_id":77311033,"question_id":77306908,"body_markdown":"I think you should read first [this article][1] in order to understand what Testcontainers does. Then, look at other [article][2] which use `PostgreSQLContainer` without Spring.\r\n\r\nIn summary, Testcontainers will create and run the container in a random port, when using PostgreSQLContainer you can get the JDBC URL with `getJdbcUrl()` that should be used in `DriverManager.getConnection(postgres.getJdbcUrl(), postgres.getUsername(), postgres.getPassword());`\r\n\r\n\r\n  [1]: https://testcontainers.com/guides/introducing-testcontainers/\r\n  [2]: https://testcontainers.com/guides/getting-started-with-testcontainers-for-java/","title":"Using Testcontainers without Spring","body":"<p>I think you should read first <a href=\"https://testcontainers.com/guides/introducing-testcontainers/\" rel=\"nofollow noreferrer\">this article</a> in order to understand what Testcontainers does. Then, look at other <a href=\"https://testcontainers.com/guides/getting-started-with-testcontainers-for-java/\" rel=\"nofollow noreferrer\">article</a> which use <code>PostgreSQLContainer</code> without Spring.</p>\n<p>In summary, Testcontainers will create and run the container in a random port, when using PostgreSQLContainer you can get the JDBC URL with <code>getJdbcUrl()</code> that should be used in <code>DriverManager.getConnection(postgres.getJdbcUrl(), postgres.getUsername(), postgres.getPassword());</code></p>\n"}],"owner":{"account_id":29687160,"reputation":3,"user_id":22752540,"display_name":"elSasen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77311033,"answer_count":1,"score":-2,"last_activity_date":1697563344,"creation_date":1697527300,"question_id":77306908,"body_markdown":"I started to understand Docker and Testcontainers for homework, where the use of Spring is forbidden. The project uses a database - there are different interactions with it. I have deployed the database in Docker, but I don&#39;t understand how to write tests through Testcontainers. For example, how to test adding data to the database, or changing data in the database, or just output from the database? I have connected the container in the test class via:\r\n```\r\n private static final PostgreSQLContainer&lt;?&gt; container = new PostgreSQLContainer&lt;&gt;(&quot;postgres:15.2&quot;);\r\n```\r\nBut what to do next? All the examples, youtube videos, etc use Spring... Thanks in advance!\r\n\r\n*Below I present examples of functions*\r\n\r\n**Add to DB function**\r\n```\r\n    @Override\r\n    public void addTransaction(TypeOfTransaction type, int amount) {\r\n        String sql = &quot;&quot;&quot;\r\n                INSERT INTO entities.&quot;Transaction&quot; (type, amount)\r\n                VALUES (?, ?)\r\n                &quot;&quot;&quot;;\r\n        try (Connection connection = ConnectionManager.open();\r\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\r\n            preparedStatement.setString(1, String.valueOf(type));\r\n            preparedStatement.setInt(2, amount);\r\n            preparedStatement.executeUpdate();\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n**Update DB function**\r\n```\r\n    @Override\r\n    public void minusBalance(String login, int amount) {\r\n        String sql = &quot;&quot;&quot;\r\n                UPDATE entities.&quot;Client&quot;\r\n                SET balance = balance - ?\r\n                WHERE login = ?\r\n                &quot;&quot;&quot;;\r\n        try (Connection connection = ConnectionManager.open();\r\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\r\n            preparedStatement.setInt(1, amount);\r\n            preparedStatement.setString(2, login);\r\n            preparedStatement.executeUpdate();\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n**Print data from DB function**\r\n```\r\n    @Override\r\n    public void printAudit(String login) {\r\n        String sql = &quot;&quot;&quot;\r\n                SELECT action\r\n                FROM &quot;Client_Audit&quot;\r\n                WHERE client_login = ?\r\n                &quot;&quot;&quot;;\r\n        try (Connection connection = ConnectionManager.open();\r\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\r\n            preparedStatement.setString(1, login);\r\n            ResultSet resultSet = preparedStatement.executeQuery();\r\n            while (resultSet.next()) {\r\n                System.out.println(resultSet.getString(&quot;action&quot;));\r\n            }\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\nI tried to find an example of using testcontainers without Spring on YouTube, in various articles, but no luck :(","title":"Using Testcontainers without Spring","body":"<p>I started to understand Docker and Testcontainers for homework, where the use of Spring is forbidden. The project uses a database - there are different interactions with it. I have deployed the database in Docker, but I don't understand how to write tests through Testcontainers. For example, how to test adding data to the database, or changing data in the database, or just output from the database? I have connected the container in the test class via:</p>\n<pre><code> private static final PostgreSQLContainer&lt;?&gt; container = new PostgreSQLContainer&lt;&gt;(&quot;postgres:15.2&quot;);\n</code></pre>\n<p>But what to do next? All the examples, youtube videos, etc use Spring... Thanks in advance!</p>\n<p><em>Below I present examples of functions</em></p>\n<p><strong>Add to DB function</strong></p>\n<pre><code>    @Override\n    public void addTransaction(TypeOfTransaction type, int amount) {\n        String sql = &quot;&quot;&quot;\n                INSERT INTO entities.&quot;Transaction&quot; (type, amount)\n                VALUES (?, ?)\n                &quot;&quot;&quot;;\n        try (Connection connection = ConnectionManager.open();\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\n            preparedStatement.setString(1, String.valueOf(type));\n            preparedStatement.setInt(2, amount);\n            preparedStatement.executeUpdate();\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p><strong>Update DB function</strong></p>\n<pre><code>    @Override\n    public void minusBalance(String login, int amount) {\n        String sql = &quot;&quot;&quot;\n                UPDATE entities.&quot;Client&quot;\n                SET balance = balance - ?\n                WHERE login = ?\n                &quot;&quot;&quot;;\n        try (Connection connection = ConnectionManager.open();\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\n            preparedStatement.setInt(1, amount);\n            preparedStatement.setString(2, login);\n            preparedStatement.executeUpdate();\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p><strong>Print data from DB function</strong></p>\n<pre><code>    @Override\n    public void printAudit(String login) {\n        String sql = &quot;&quot;&quot;\n                SELECT action\n                FROM &quot;Client_Audit&quot;\n                WHERE client_login = ?\n                &quot;&quot;&quot;;\n        try (Connection connection = ConnectionManager.open();\n             PreparedStatement preparedStatement = connection.prepareStatement(sql)) {\n            preparedStatement.setString(1, login);\n            ResultSet resultSet = preparedStatement.executeQuery();\n            while (resultSet.next()) {\n                System.out.println(resultSet.getString(&quot;action&quot;));\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>I tried to find an example of using testcontainers without Spring on YouTube, in various articles, but no luck :(</p>\n"},{"tags":["java","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":3450274,"reputation":9585,"user_id":2890093,"accept_rate":67,"display_name":"Kombajn zbożowy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697563241,"creation_date":1697563241,"answer_id":77311025,"question_id":77310904,"body_markdown":"```\r\ndf.withColumn(&quot;prev_status&quot;, lag($&quot;status&quot;, 1).over(Window.orderBy($&quot;i&quot;)))\r\n  .withColumn(&quot;next_group&quot;, when($&quot;status&quot; === &quot;C&quot; &amp;&amp; coalesce($&quot;prev_status&quot;, lit(&quot;F&quot;)) === &quot;F&quot;, 1))\r\n  .withColumn(&quot;id&quot;, sum($&quot;next_group&quot;).over(Window.orderBy($&quot;i&quot;)))\r\n```\r\n\r\nBut note that you need something to order by. Date column in your example is not unique - it doesn&#39;t guarantee any order and Spark could mix rows when shuffling. I replaced `Date` by `i` in my query, hopefully you have some column to use here.","title":"Compare the Current Record to Previous Record and group them based on some conditions","body":"<pre><code>df.withColumn(&quot;prev_status&quot;, lag($&quot;status&quot;, 1).over(Window.orderBy($&quot;i&quot;)))\n  .withColumn(&quot;next_group&quot;, when($&quot;status&quot; === &quot;C&quot; &amp;&amp; coalesce($&quot;prev_status&quot;, lit(&quot;F&quot;)) === &quot;F&quot;, 1))\n  .withColumn(&quot;id&quot;, sum($&quot;next_group&quot;).over(Window.orderBy($&quot;i&quot;)))\n</code></pre>\n<p>But note that you need something to order by. Date column in your example is not unique - it doesn't guarantee any order and Spark could mix rows when shuffling. I replaced <code>Date</code> by <code>i</code> in my query, hopefully you have some column to use here.</p>\n"}],"owner":{"display_name":"user10146200"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697563241,"creation_date":1697562085,"question_id":77310904,"body_markdown":"I have the below Dataset\r\n```\r\n\r\nDate    | status       |\r\n20230101| C            |\r\n20230101| C            |\r\n20230101| F            |\r\n20230101| C            |\r\n20230101| C            |\r\n20230101| F            |\r\n20230101| C            |\r\n20230101| F            |\r\n20230101| F            |\r\n```\r\n\r\nI need to perform the grouping in such a way that each status record is compared to it&#39;s previous status record, they are not in the same group as long as the Current Record  is C &amp; Previous Record is F\r\n\r\n\r\nthe output should be\r\n```\r\nDate    | status       | id\r\n20230101| C            |1\r\n20230101| C            |1\r\n20230101| F            |1\r\n20230101| C            |2\r\n20230101| C            |2\r\n20230101| F            |2\r\n20230101| C            |3\r\n20230101| F            |3\r\n20230101| F            |3\r\n```\r\n\r\n\r\n```\r\n Dataset&lt;Row&gt; ds =  dataset\r\n            .withColumn(&quot;newVal&quot;, when(col(&quot;status&quot;).equalTo(&quot;C&quot;), 1).otherwise(0))\r\n            .withColumn(&quot;id&quot;, expr(&quot;row_number() over (order by Date)&quot;))\r\n            .persist(StorageLevel.MEMORY_ONLY());\r\n```\r\n\r\nI don&#39;t think this is working , can someone help me ?\r\n\r\n\r\n\r\n","title":"Compare the Current Record to Previous Record and group them based on some conditions","body":"<p>I have the below Dataset</p>\n<pre><code>\nDate    | status       |\n20230101| C            |\n20230101| C            |\n20230101| F            |\n20230101| C            |\n20230101| C            |\n20230101| F            |\n20230101| C            |\n20230101| F            |\n20230101| F            |\n</code></pre>\n<p>I need to perform the grouping in such a way that each status record is compared to it's previous status record, they are not in the same group as long as the Current Record  is C &amp; Previous Record is F</p>\n<p>the output should be</p>\n<pre><code>Date    | status       | id\n20230101| C            |1\n20230101| C            |1\n20230101| F            |1\n20230101| C            |2\n20230101| C            |2\n20230101| F            |2\n20230101| C            |3\n20230101| F            |3\n20230101| F            |3\n</code></pre>\n<pre><code> Dataset&lt;Row&gt; ds =  dataset\n            .withColumn(&quot;newVal&quot;, when(col(&quot;status&quot;).equalTo(&quot;C&quot;), 1).otherwise(0))\n            .withColumn(&quot;id&quot;, expr(&quot;row_number() over (order by Date)&quot;))\n            .persist(StorageLevel.MEMORY_ONLY());\n</code></pre>\n<p>I don't think this is working , can someone help me ?</p>\n"},{"tags":["java","spring-boot","embedded-tomcat-8","aws-route53"],"owner":{"account_id":17623706,"reputation":1,"user_id":12789106,"display_name":"Seaker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697562834,"creation_date":1697562834,"question_id":77310985,"body_markdown":"I&#39;m trying to configure springboot(ver 2.5.15) web application in DEV environment via ROSA.\r\nApplication is running fine in localhost and the CI and CD pipeline is successful but upon trying to access the DEV url, the web page is loading with this JSON content. Also, there&#39;s no error in logs.\r\n\r\n`{\r\n  &quot;_links&quot; : {\r\n    &quot;profile&quot; : {\r\n      &quot;href&quot; : &quot;application-dev-url/profile&quot;\r\n    }\r\n  }\r\n}\r\n` \r\n\r\nFront end is JSP and using embedded tomcat server\r\n\r\nI&#39;m not sure where the issue is, as **the application is running fine in localhost**.","title":"Web page loading with JSON data as content in Springboot application hosted on ROSA","body":"<p>I'm trying to configure springboot(ver 2.5.15) web application in DEV environment via ROSA.\nApplication is running fine in localhost and the CI and CD pipeline is successful but upon trying to access the DEV url, the web page is loading with this JSON content. Also, there's no error in logs.</p>\n<p><code>{ &quot;_links&quot; : { &quot;profile&quot; : { &quot;href&quot; : &quot;application-dev-url/profile&quot; } } } </code></p>\n<p>Front end is JSP and using embedded tomcat server</p>\n<p>I'm not sure where the issue is, as <strong>the application is running fine in localhost</strong>.</p>\n"},{"tags":["java","multithreading","debugging","future","executorservice"],"answers":[{"tags":[],"owner":{"account_id":1413944,"reputation":59678,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1402598932,"creation_date":1402598932,"answer_id":24191796,"question_id":24191762,"body_markdown":"You need to put a break point in the callable itself.\r\n\r\nFrom a computer science theoretic standpoint, it&#39;s possible to enable smooth debugging (after all why does your language care whether the operation was sync or async?) but I don&#39;t believe this is supported in any mainstream language, like Java, yet.","title":"How to debug a Callable in Java ExecutorService that returns Futures","body":"<p>You need to put a break point in the callable itself.</p>\n\n<p>From a computer science theoretic standpoint, it's possible to enable smooth debugging (after all why does your language care whether the operation was sync or async?) but I don't believe this is supported in any mainstream language, like Java, yet.</p>\n"}],"owner":{"account_id":1459015,"reputation":1239,"user_id":1373836,"accept_rate":62,"display_name":"Adam Bronfin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5665,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":24191796,"answer_count":1,"score":4,"last_activity_date":1697562550,"creation_date":1402598836,"question_id":24191762,"body_markdown":"I have an ExecutorService that I use to multithread the processing of the some text, and the unit of work to be applied to a given chunk of text is defined as my ParserCallable which returns a Payload.\r\n\r\nSo I have a\r\n \r\n    List&lt;Future&lt;PayLoad&gt;&gt; list;\r\n\r\nwhich is populated by handing off chunks of work to each ParserCallable.\r\n\r\nI want to debug ParserCallable in this multithreaded environment, and I don&#39;t have any concern for which one, but I&#39;m not sure how I can step into the execution of any ParserCallable&#39;s from my code.\r\n\r\nWhich looks something like\r\n\r\n    List&lt;Future&lt;PayLoad&gt;&gt; list = new ArrayList&lt;Future&lt;PayLoad&gt;&gt;();\r\n    ExecutorService executor = Executors.newFixedThreadPool(25);\r\n    for (int i = 0; i &lt; blocks_of_work.size(); i++) {\r\n       Callable&lt;PayLoad&gt; worker = new ParserCallable(blocks_of_work.get(i));\r\n       Future&lt;PayLoad&gt; submit = executor.submit(worker);\r\n       list.add(submit);\r\n    }\r\n\r\nHow I can debug any given ParserCallable in order to troubleshoot some errors I&#39;m getting? Based on my code I&#39;m not sure how to step into one of these callables. ","title":"How to debug a Callable in Java ExecutorService that returns Futures","body":"<p>I have an ExecutorService that I use to multithread the processing of the some text, and the unit of work to be applied to a given chunk of text is defined as my ParserCallable which returns a Payload.</p>\n<p>So I have a</p>\n<pre><code>List&lt;Future&lt;PayLoad&gt;&gt; list;\n</code></pre>\n<p>which is populated by handing off chunks of work to each ParserCallable.</p>\n<p>I want to debug ParserCallable in this multithreaded environment, and I don't have any concern for which one, but I'm not sure how I can step into the execution of any ParserCallable's from my code.</p>\n<p>Which looks something like</p>\n<pre><code>List&lt;Future&lt;PayLoad&gt;&gt; list = new ArrayList&lt;Future&lt;PayLoad&gt;&gt;();\nExecutorService executor = Executors.newFixedThreadPool(25);\nfor (int i = 0; i &lt; blocks_of_work.size(); i++) {\n   Callable&lt;PayLoad&gt; worker = new ParserCallable(blocks_of_work.get(i));\n   Future&lt;PayLoad&gt; submit = executor.submit(worker);\n   list.add(submit);\n}\n</code></pre>\n<p>How I can debug any given ParserCallable in order to troubleshoot some errors I'm getting? Based on my code I'm not sure how to step into one of these callables.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1500036318,"post_id":45102456,"comment_id":77177669,"body_markdown":"The JPA spec doesn&#39;t allow for a user wanting to set under some situation and generate under others (since the definition of `GeneratedValue` is static). Some JPA providers do support it (DataNucleus does IIRC) but non-portable if relying on it","body":"The JPA spec doesn&#39;t allow for a user wanting to set under some situation and generate under others (since the definition of <code>GeneratedValue</code> is static). Some JPA providers do support it (DataNucleus does IIRC) but non-portable if relying on it"},{"owner":{"account_id":1306358,"reputation":42117,"user_id":1255289,"accept_rate":89,"display_name":"miken32"},"score":0,"creation_date":1660407551,"post_id":45102456,"comment_id":129528385,"body_markdown":"Does this answer your question? [set Id (PK) generation value auto and manual](https://stackoverflow.com/questions/18182826/set-id-pk-generation-value-auto-and-manual)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/18182826/set-id-pk-generation-value-auto-and-manual\">set Id (PK) generation value auto and manual</a>"}],"answers":[{"tags":[],"owner":{"account_id":8585815,"reputation":425,"user_id":6431997,"display_name":"memoricab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500034953,"creation_date":1500034953,"answer_id":45102913,"question_id":45102456,"body_markdown":"[This link][1]\r\nmay help you.\r\n\r\nI would apply a basic solution if I understood your problem correctly.\r\n\r\n    @Column(name = &quot;task_id&quot;, unique = true, nullable = false)\r\n    private String taskId;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18182826/set-id-pk-generation-value-auto-and-manual","title":"How to set autogenerated Id manually?","body":"<p><a href=\"https://stackoverflow.com/questions/18182826/set-id-pk-generation-value-auto-and-manual\">This link</a>\nmay help you.</p>\n\n<p>I would apply a basic solution if I understood your problem correctly.</p>\n\n<pre><code>@Column(name = \"task_id\", unique = true, nullable = false)\nprivate String taskId;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7537672,"reputation":396,"user_id":5723444,"accept_rate":20,"display_name":"TheHound.developer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500111260,"creation_date":1500111260,"answer_id":45116694,"question_id":45102456,"body_markdown":"@GeneratedValue annotation doesn&#39;t allow the user to set the value manually.Instead of using that annotation you can manually generate some string format like below and mark the taskId column with @Id\r\n\r\n    String hql = &quot;from MasterCount where itemType=:type&quot;;\r\n\tQuery&lt;MasterCount&gt; query = session.createQuery(hql);\r\n\tquery.setParameter(&quot;type&quot;, &quot;task&quot;);\r\n\tMasterCount count = query.uniqueResult();\r\n\tint lastId = count.getItemId() + 1;\r\n\tcount.setItemId(lastId);\r\n    task.setTaskId(&quot;task0&quot;+lastId);\r\nThat is create a master table with columns itemId and itemType.Save &quot;task&quot; and 0 in the columns respectively.Check the last entered value ,increment one and save again.","title":"How to set autogenerated Id manually?","body":"<p>@GeneratedValue annotation doesn't allow the user to set the value manually.Instead of using that annotation you can manually generate some string format like below and mark the taskId column with @Id</p>\n\n<pre><code>String hql = \"from MasterCount where itemType=:type\";\nQuery&lt;MasterCount&gt; query = session.createQuery(hql);\nquery.setParameter(\"type\", \"task\");\nMasterCount count = query.uniqueResult();\nint lastId = count.getItemId() + 1;\ncount.setItemId(lastId);\ntask.setTaskId(\"task0\"+lastId);\n</code></pre>\n\n<p>That is create a master table with columns itemId and itemType.Save \"task\" and 0 in the columns respectively.Check the last entered value ,increment one and save again.</p>\n"},{"tags":[],"owner":{"account_id":5782764,"reputation":1081,"user_id":4562902,"accept_rate":54,"display_name":"dhyanandra singh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500214659,"creation_date":1500214659,"answer_id":45129580,"question_id":45102456,"body_markdown":" you can initialize it manually. \r\n\r\n\r\n            @Id\r\n        \t@Column(name= &quot;id&quot;)\r\n        \t@GeneratedValue\r\n        \tprivate Long id = Long.parseLong(UUID.randomUUID().toString(), 16);\r\n        \t","title":"How to set autogenerated Id manually?","body":"<p>you can initialize it manually. </p>\n\n<pre><code>        @Id\n        @Column(name= \"id\")\n        @GeneratedValue\n        private Long id = Long.parseLong(UUID.randomUUID().toString(), 16);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8794152,"reputation":382,"user_id":8574000,"display_name":"Quockhanh Pham"},"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1532938769,"creation_date":1532923765,"answer_id":51586864,"question_id":45102456,"body_markdown":"Using\r\n\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\r\n\r\nExample:\r\n[http://www.codejava.net/frameworks/hibernate/java-hibernate-jpa-annotations-tutorial-for-beginners][1]\r\n\r\n\r\n  [1]: http://www.codejava.net/frameworks/hibernate/java-hibernate-jpa-annotations-tutorial-for-beginners","title":"How to set autogenerated Id manually?","body":"<p>Using</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.IDENTITY)\n</code></pre>\n\n<p>Example:\n<a href=\"http://www.codejava.net/frameworks/hibernate/java-hibernate-jpa-annotations-tutorial-for-beginners\" rel=\"nofollow noreferrer\">http://www.codejava.net/frameworks/hibernate/java-hibernate-jpa-annotations-tutorial-for-beginners</a></p>\n"},{"tags":[],"owner":{"account_id":9925001,"reputation":1047,"user_id":7346931,"display_name":"Dharmendrasinh Chudasama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660406887,"creation_date":1660406887,"answer_id":73345823,"question_id":45102456,"body_markdown":"&gt; Just implement org.springframework.data.domain.Persistable;\r\n\r\n&gt; After too much finding and frustration i have used this and worked for my R2DBMS entity\r\n\r\n    @Table(name = &quot;...&quot;)\r\n    public class .... implements Persistable&lt;String&gt; {\r\n    \r\n       ...\r\n    \r\n       public boolean isNew(){\r\n         return id==null; //modify and set your logic\r\n       }\r\n    \r\n    }","title":"How to set autogenerated Id manually?","body":"<blockquote>\n<p>Just implement org.springframework.data.domain.Persistable;</p>\n</blockquote>\n<blockquote>\n<p>After too much finding and frustration i have used this and worked for my R2DBMS entity</p>\n</blockquote>\n<pre><code>@Table(name = &quot;...&quot;)\npublic class .... implements Persistable&lt;String&gt; {\n\n   ...\n\n   public boolean isNew(){\n     return id==null; //modify and set your logic\n   }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29684614,"reputation":1,"user_id":22750510,"display_name":"user22750510"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697562216,"creation_date":1697562216,"answer_id":77310921,"question_id":45102456,"body_markdown":"all of you missing the point.\r\n\r\nSometimes you need to insert a specific Id with identity_insert on especially when perform bulk imports\r\n\r\nThe tricky part is how to override the default behaviour without reinvent the wheel and do manual queries ","title":"How to set autogenerated Id manually?","body":"<p>all of you missing the point.</p>\n<p>Sometimes you need to insert a specific Id with identity_insert on especially when perform bulk imports</p>\n<p>The tricky part is how to override the default behaviour without reinvent the wheel and do manual queries</p>\n"}],"owner":{"account_id":1467204,"reputation":5011,"user_id":1379734,"accept_rate":61,"display_name":"hellzone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16967,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":51586864,"answer_count":6,"score":9,"last_activity_date":1697562216,"creation_date":1500033602,"question_id":45102456,"body_markdown":"I have an entity called Task and it has taskId field. Problem is I need to create/update some specific tasks and JPA autogenerator doesn&#39;t allow me to set taskId manually.(It overrides my taskId) \r\n\r\nIs there any way to set taskId manually?\r\n\r\n\r\n    @Id\r\n    @Column(name = &quot;task_id&quot;)\r\n    @GeneratedValue(generator = &quot;system-uuid&quot;)\r\n    @GenericGenerator(name = &quot;system-uuid&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\r\n    private String taskId;","title":"How to set autogenerated Id manually?","body":"<p>I have an entity called Task and it has taskId field. Problem is I need to create/update some specific tasks and JPA autogenerator doesn't allow me to set taskId manually.(It overrides my taskId) </p>\n\n<p>Is there any way to set taskId manually?</p>\n\n<pre><code>@Id\n@Column(name = \"task_id\")\n@GeneratedValue(generator = \"system-uuid\")\n@GenericGenerator(name = \"system-uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\nprivate String taskId;\n</code></pre>\n"},{"tags":["java","android","kotlin","callback","android-webview"],"comments":[{"owner":{"account_id":16447875,"reputation":185,"user_id":11882081,"display_name":"Trent Meyer"},"score":2,"creation_date":1697550861,"post_id":77309528,"comment_id":136292144,"body_markdown":"Does this answer your question? [onBackPressed() is deprecated. What is the alternative?](https://stackoverflow.com/questions/72634225/onbackpressed-is-deprecated-what-is-the-alternative)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/72634225/onbackpressed-is-deprecated-what-is-the-alternative\">onBackPressed() is deprecated. What is the alternative?</a>"}],"answers":[{"tags":[],"owner":{"account_id":29693021,"reputation":1,"user_id":22756991,"display_name":"jima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697555655,"creation_date":1697555655,"answer_id":77310210,"question_id":77309528,"body_markdown":"Maybe you could use the onKeyDown event?\r\n\r\n    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {\r\n\r\n        if (keyCode == KeyEvent.KEYCODE_BACK) {\r\n            return true\r\n        }\r\n\r\n        return super.onKeyDown(keyCode, event)\r\n    }\r\n","title":"onBackPressed is deprecated - webView in android app","body":"<p>Maybe you could use the onKeyDown event?</p>\n<pre><code>override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {\n\n    if (keyCode == KeyEvent.KEYCODE_BACK) {\n        return true\n    }\n\n    return super.onKeyDown(keyCode, event)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13210775,"reputation":967,"user_id":9541096,"display_name":"Owais Yosuf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697562118,"creation_date":1697562118,"answer_id":77310909,"question_id":77309528,"body_markdown":"**Java**:\r\n\r\n    OnBackPressedCallback onBackPressedCallback = new OnBackPressedCallback(true) {\r\n        @Override\r\n        public void handleOnBackPressed() {\r\n            webView.goBack();\r\n        }\r\n    };\r\n    OnBackPressedDispatcher onBackPressedDispatcher = \r\n    requireActivity().getOnBackPressedDispatcher();\r\n    onBackPressedDispatcher.addCallback(getViewLifecycleOwner(), \r\n    onBackPressedCallback);\r\n\r\n**Kotlin:**\r\n\r\n    val onBackPressedCallback = object : OnBackPressedCallback(true) {\r\n        override fun handleOnBackPressed() {\r\n            webView.goBack()\r\n        }\r\n    }\r\n    onBackPressedDispatcher.addCallback(onBackPressedCallback)\r\n","title":"onBackPressed is deprecated - webView in android app","body":"<p><strong>Java</strong>:</p>\n<pre><code>OnBackPressedCallback onBackPressedCallback = new OnBackPressedCallback(true) {\n    @Override\n    public void handleOnBackPressed() {\n        webView.goBack();\n    }\n};\nOnBackPressedDispatcher onBackPressedDispatcher = \nrequireActivity().getOnBackPressedDispatcher();\nonBackPressedDispatcher.addCallback(getViewLifecycleOwner(), \nonBackPressedCallback);\n</code></pre>\n<p><strong>Kotlin:</strong></p>\n<pre><code>val onBackPressedCallback = object : OnBackPressedCallback(true) {\n    override fun handleOnBackPressed() {\n        webView.goBack()\n    }\n}\nonBackPressedDispatcher.addCallback(onBackPressedCallback)\n</code></pre>\n"}],"owner":{"account_id":29692383,"reputation":1,"user_id":22756482,"display_name":"yeswhatdoyouwant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697562118,"creation_date":1697550063,"question_id":77309528,"body_markdown":"I have an app where the main activity (which extends ComponentActivity) is pretty much just a webView. I have overriden onBackPressed, shown below.\r\n\r\n```\r\n@Override\r\npublic void onBackPressed(){\r\n  if(this.webView.canGoBack){\r\n    this.webView.goBack();\r\n  }\r\n  else{\r\n    super.onBackPressed();\r\n  }\r\n}\r\n```\r\nI did this so that when there is browser history, it should go through that instead of canceling the app itself. This works when running my app on my tablet which have android 11, but not on my phone with android 13. Now when onBackPressed is deprecated, I really don&#39;t understand how to replace this and keep the same behavior.\r\n\r\n\r\nTried using the onBackPressedDispatcher instead, but didn&#39;t succeed. Don&#39;t know if it&#39;s the wrong thing, or if I&#39;m just handling it wrong.","title":"onBackPressed is deprecated - webView in android app","body":"<p>I have an app where the main activity (which extends ComponentActivity) is pretty much just a webView. I have overriden onBackPressed, shown below.</p>\n<pre><code>@Override\npublic void onBackPressed(){\n  if(this.webView.canGoBack){\n    this.webView.goBack();\n  }\n  else{\n    super.onBackPressed();\n  }\n}\n</code></pre>\n<p>I did this so that when there is browser history, it should go through that instead of canceling the app itself. This works when running my app on my tablet which have android 11, but not on my phone with android 13. Now when onBackPressed is deprecated, I really don't understand how to replace this and keep the same behavior.</p>\n<p>Tried using the onBackPressedDispatcher instead, but didn't succeed. Don't know if it's the wrong thing, or if I'm just handling it wrong.</p>\n"},{"tags":["java","multithreading","algorithm","concurrency","reentrantlock"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697555798,"post_id":77310078,"comment_id":136293282,"body_markdown":"Whatever you believe, this sequence `loadLock.lock(); loadLock.unlock();` does: no, it doesn’t. It’s pointless. Further, there is a contradiction in thread one “*Initiates a loading process and immediately returns*” and thread two’s condition “*If Thread One is in the midst of loading*”. How can thread one be “in the midst of loading” when it doesn’t load but only “Initiates a loading process” and “*immediately returns*”?","body":"Whatever you believe, this sequence <code>loadLock.lock(); loadLock.unlock();</code> does: no, it doesn’t. It’s pointless. Further, there is a contradiction in thread one “<i>Initiates a loading process and immediately returns</i>” and thread two’s condition “<i>If Thread One is in the midst of loading</i>”. How can thread one be “in the midst of loading” when it doesn’t load but only “Initiates a loading process” and “<i>immediately returns</i>”?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1697556021,"post_id":77310078,"comment_id":136293339,"body_markdown":"Is there an actual question? I think you need to focus more and ask something about a specific question.  &quot;Suggestions&quot;, &quot;not good&quot;, &quot;ideally&quot; -- these aren&#39;t specific, just requests for free form discussion and tentative code changes.  Try to focus on one thing specifically that is definitely a problem, show us how to produce the problem and then we might be able to say something concrete about the code.","body":"Is there an actual question? I think you need to focus more and ask something about a specific question.  &quot;Suggestions&quot;, &quot;not good&quot;, &quot;ideally&quot; -- these aren&#39;t specific, just requests for free form discussion and tentative code changes.  Try to focus on one thing specifically that is definitely a problem, show us how to produce the problem and then we might be able to say something concrete about the code."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1697556162,"post_id":77310078,"comment_id":136293367,"body_markdown":"I&#39;m also concerned about this sequence: `DbLoadService.load(); while (isLoadPending.compareAndSet(true, false)) {          DbLoadService.load();` which looks a lot like busy waiting while holding a lock.  Seems like it might be counter-productive.","body":"I&#39;m also concerned about this sequence: <code>DbLoadService.load(); while (isLoadPending.compareAndSet(true, false)) {          DbLoadService.load();</code> which looks a lot like busy waiting while holding a lock.  Seems like it might be counter-productive."},{"owner":{"account_id":5161568,"reputation":43,"user_id":4133084,"display_name":"Openeye"},"score":0,"creation_date":1697557010,"post_id":77310078,"comment_id":136293531,"body_markdown":"@Holger the  loadLock.lock(); loadLock.unlock(); sequence functions as a wait as  loadLock.lock(); is blocking, ensuring the thread does not return before the load is completed. My wording for the initial call could have been better, the load should complete before it returns.","body":"@Holger the  loadLock.lock(); loadLock.unlock(); sequence functions as a wait as  loadLock.lock(); is blocking, ensuring the thread does not return before the load is completed. My wording for the initial call could have been better, the load should complete before it returns."},{"owner":{"account_id":5161568,"reputation":43,"user_id":4133084,"display_name":"Openeye"},"score":0,"creation_date":1697557394,"post_id":77310078,"comment_id":136293608,"body_markdown":"@markspace Apologies for the vagueness. My primary concern is preventing a thread from being stuck in continuous loading when isLoadPending is set. How can I modify the code to ensure threads behave as described in the initial post, particularly for Thread 3&#39;s desired behavior?","body":"@markspace Apologies for the vagueness. My primary concern is preventing a thread from being stuck in continuous loading when isLoadPending is set. How can I modify the code to ensure threads behave as described in the initial post, particularly for Thread 3&#39;s desired behavior?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697557484,"post_id":77310078,"comment_id":136293621,"body_markdown":"You seem to think that lock actions have to progress in the order of the `lock()` calls but that’s not the case. Even if you change the code to use a fair lock, `tryLock` still may overtake any waiting thread, and perform the unconditional first `DbLoadService.load();` before even checking the flag. In other words, the availability of a `Lock` should not be confused with a `Condition`. Though, your task looks more like a `Phaser`’s job anyway.","body":"You seem to think that lock actions have to progress in the order of the <code>lock()</code> calls but that’s not the case. Even if you change the code to use a fair lock, <code>tryLock</code> still may overtake any waiting thread, and perform the unconditional first <code>DbLoadService.load();</code> before even checking the flag. In other words, the availability of a <code>Lock</code> should not be confused with a <code>Condition</code>. Though, your task looks more like a <code>Phaser</code>’s job anyway."},{"owner":{"account_id":5161568,"reputation":43,"user_id":4133084,"display_name":"Openeye"},"score":0,"creation_date":1697557584,"post_id":77310078,"comment_id":136293642,"body_markdown":"@markspace The check is needed in case a load was called after the last one began.","body":"@markspace The check is needed in case a load was called after the last one began."},{"owner":{"account_id":5161568,"reputation":43,"user_id":4133084,"display_name":"Openeye"},"score":0,"creation_date":1697558311,"post_id":77310078,"comment_id":136293781,"body_markdown":"@Holger Ok, thanks. I was not aware of that. Il take a look at Phaser and attempt another implementation.","body":"@Holger Ok, thanks. I was not aware of that. Il take a look at Phaser and attempt another implementation."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697561544,"creation_date":1697561544,"answer_id":77310843,"question_id":77310078,"body_markdown":"I think, you want something like this:\r\n\r\n```java\r\nfinal Phaser loadPhaser = new Phaser() {\r\n    protected boolean onAdvance(int phase, int registeredParties) {\r\n        DbLoadService.load();\r\n        return false;\r\n    }\r\n};\r\n\r\npublic void loadAll() {\r\n    int myPhase = loadPhaser.register();\r\n    loadPhaser.arriveAndDeregister();\r\n    loadPhaser.awaitAdvance(myPhase);\r\n}\r\n```\r\n\r\nIn this specific use case, the threads belonging to a particular phase are the threads entering `loadAll()` at the same time or while a previous `DbLoadService.load()` is in progress. Since this is different for each phase, they have to register and unregister each time.\r\n\r\nAll threads calling `register()` while a previous `DbLoadService.load()` is in progress will wait for its completion, then all of them will call `arriveAndDeregister()` and the last one will perform the new `DbLoadService.load()` operation. The others will wait for the completion of this new `DbLoadService.load()` operation in `awaitAdvance`.\r\n\r\nNew threads arriving at `register()` are clearly distinct from the threads waiting at `awaitAdvance` at the same time—they belong to a different phase. In fact, when this overlapping happens, it is impossible for the thread performing the current `load()` to become part of the next phase, so it’s impossible for a thread to get stuck in repeatedly performing the `load` operation.\r\n","title":"How to handle multiple threads efficiently / only perform a load operation once for all queued up load calls?","body":"<p>I think, you want something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Phaser loadPhaser = new Phaser() {\n    protected boolean onAdvance(int phase, int registeredParties) {\n        DbLoadService.load();\n        return false;\n    }\n};\n\npublic void loadAll() {\n    int myPhase = loadPhaser.register();\n    loadPhaser.arriveAndDeregister();\n    loadPhaser.awaitAdvance(myPhase);\n}\n</code></pre>\n<p>In this specific use case, the threads belonging to a particular phase are the threads entering <code>loadAll()</code> at the same time or while a previous <code>DbLoadService.load()</code> is in progress. Since this is different for each phase, they have to register and unregister each time.</p>\n<p>All threads calling <code>register()</code> while a previous <code>DbLoadService.load()</code> is in progress will wait for its completion, then all of them will call <code>arriveAndDeregister()</code> and the last one will perform the new <code>DbLoadService.load()</code> operation. The others will wait for the completion of this new <code>DbLoadService.load()</code> operation in <code>awaitAdvance</code>.</p>\n<p>New threads arriving at <code>register()</code> are clearly distinct from the threads waiting at <code>awaitAdvance</code> at the same time—they belong to a different phase. In fact, when this overlapping happens, it is impossible for the thread performing the current <code>load()</code> to become part of the next phase, so it’s impossible for a thread to get stuck in repeatedly performing the <code>load</code> operation.</p>\n"}],"owner":{"account_id":5161568,"reputation":43,"user_id":4133084,"display_name":"Openeye"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77310843,"answer_count":1,"score":1,"last_activity_date":1697561544,"creation_date":1697554467,"question_id":77310078,"body_markdown":"I&#39;m attempting to write java code that executes a load operation as described below.\r\n\r\n**Initial Call (Thread One):**\r\nInitiates a loading process and immediately returns.\r\n\r\n**Second Call (Thread Two):**\r\n\r\nIf Thread One is in the midst of loading, it waits.\r\nOnce Thread One finishes, Thread Two starts its own load.\r\nAfter its load is done, it returns.\r\n\r\n**Subsequent Calls (Thread Three and beyond):**\r\nIf Thread One is loading, it waits.\r\nDoes not queue behind both Thread One and Thread Two.\r\nInstead, it leverages the load process initiated by Thread Two.\r\nReturns in tandem with Thread Two once the loading is completed.\r\n\r\nThe load method is called from an api-controller method. \r\n\r\n\r\n\r\nMy current implementation is not good because the same thread is handling the flush for the next threads, while it should have returned. If the method is invoked multiple times and the isLoadPending flag is set, the same thread continually handles the load, potentially without ever releasing. Ideally, after waiting for a prior load to finish, a thread should only need to flush at most one more time.\r\n\r\n\r\n```\r\nprivate final ReentrantLock loadLock = new ReentrantLock();\r\nprivate final AtomicBoolean isLoadPending = new AtomicBoolean(false);\r\n\r\npublic void loadAll() {\r\n    if (loadLock.tryLock()) {\r\n        try {\r\n            DbLoadService.load();\r\n            while (isLoadPending.compareAndSet(true, false)) {\r\n                DbLoadService.load();\r\n            }\r\n        } finally {\r\n            loadLock.unlock();\r\n        }\r\n    } else {\r\n        isLoadPending.set(true);\r\n        loadLock.lock();\r\n        loadLock.unlock();\r\n    }\r\n}\r\n```\r\n\r\nAny suggestions?","title":"How to handle multiple threads efficiently / only perform a load operation once for all queued up load calls?","body":"<p>I'm attempting to write java code that executes a load operation as described below.</p>\n<p><strong>Initial Call (Thread One):</strong>\nInitiates a loading process and immediately returns.</p>\n<p><strong>Second Call (Thread Two):</strong></p>\n<p>If Thread One is in the midst of loading, it waits.\nOnce Thread One finishes, Thread Two starts its own load.\nAfter its load is done, it returns.</p>\n<p><strong>Subsequent Calls (Thread Three and beyond):</strong>\nIf Thread One is loading, it waits.\nDoes not queue behind both Thread One and Thread Two.\nInstead, it leverages the load process initiated by Thread Two.\nReturns in tandem with Thread Two once the loading is completed.</p>\n<p>The load method is called from an api-controller method.</p>\n<p>My current implementation is not good because the same thread is handling the flush for the next threads, while it should have returned. If the method is invoked multiple times and the isLoadPending flag is set, the same thread continually handles the load, potentially without ever releasing. Ideally, after waiting for a prior load to finish, a thread should only need to flush at most one more time.</p>\n<pre><code>private final ReentrantLock loadLock = new ReentrantLock();\nprivate final AtomicBoolean isLoadPending = new AtomicBoolean(false);\n\npublic void loadAll() {\n    if (loadLock.tryLock()) {\n        try {\n            DbLoadService.load();\n            while (isLoadPending.compareAndSet(true, false)) {\n                DbLoadService.load();\n            }\n        } finally {\n            loadLock.unlock();\n        }\n    } else {\n        isLoadPending.set(true);\n        loadLock.lock();\n        loadLock.unlock();\n    }\n}\n</code></pre>\n<p>Any suggestions?</p>\n"},{"tags":["java","sockets","serversocket"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697561521,"post_id":77310773,"comment_id":136294290,"body_markdown":"Here is the _Java_ tutorial on _sockets_.  _[Lesson: All About Sockets (The Java™ Tutorials &gt; Custom Networking)](https://docs.oracle.com/javase/tutorial/networking/sockets/index.html)_.","body":"Here is the <i>Java</i> tutorial on <i>sockets</i>.  <i><a href=\"https://docs.oracle.com/javase/tutorial/networking/sockets/index.html\" rel=\"nofollow noreferrer\">Lesson: All About Sockets (The Java™ Tutorials &gt; Custom Networking)</a></i>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697578012,"post_id":77310773,"comment_id":136296810,"body_markdown":"You have to close the socket in both the client and server. Otherwise the connection will be, err, reset.","body":"You have to close the socket in both the client and server. Otherwise the connection will be, err, reset."}],"owner":{"account_id":26621762,"reputation":1,"user_id":20240448,"display_name":"Dari_OS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697561259,"creation_date":1697560865,"question_id":77310773,"body_markdown":"So I want to learn about Sockets in Java, therefore I followed this [&quot;tutorial&quot;](https://youtu.be/-xKgxqG411c). Although I copied the code from the tutorial I am getting an Exception. \r\n\r\n\r\n```\r\nException in thread &quot;main&quot; java.net.SocketException: Connection reset\r\n\tat java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)\r\n\tat java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)\r\n\tat java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)\r\n\tat java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:329)\r\n\tat java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:372)\r\n\tat java.base/sun.nio.cs.StreamDecoder.lockedRead(StreamDecoder.java:215)\r\n\tat java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:169)\r\n\tat java.base/java.io.InputStreamReader.read(InputStreamReader.java:188)\r\n\tat java.base/java.io.BufferedReader.fill(BufferedReader.java:160)\r\n\tat java.base/java.io.BufferedReader.implReadLine(BufferedReader.java:370)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:347)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:436)\r\n\tat Server.main(Server.java:17)\r\n```\r\n\r\nThis is my **Client** code:\r\n```\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.net.Socket;\r\n\r\npublic class Client {\r\n    public static void main(String[] args) throws IOException {\r\n        Socket s = new Socket(&quot;localhost&quot;, 4999);\r\n\r\n        PrintWriter pr = new PrintWriter(s.getOutputStream());\r\n        pr.println(&quot;hello&quot;);\r\n        pr.flush();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my **Server** code:\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.nio.Buffer;\r\n\r\npublic class Server {\r\n    public static void main(String[] args) throws IOException {\r\n        ServerSocket ss = new ServerSocket(4999);\r\n        Socket s = ss.accept();\r\n        System.out.println(&quot;client connected&quot;);\r\n        InputStreamReader in = new InputStreamReader(s.getInputStream());\r\n        BufferedReader bf = new BufferedReader(in);\r\n        String str = bf.readLine();\r\n\r\n        System.out.println(&quot;client : &quot; + str);\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried to close the Client connection in the Client class with `s.close();` but the *same Exception* occurred.","title":"I am getting a java.net.SocketException: Connection reset","body":"<p>So I want to learn about Sockets in Java, therefore I followed this <a href=\"https://youtu.be/-xKgxqG411c\" rel=\"nofollow noreferrer\">&quot;tutorial&quot;</a>. Although I copied the code from the tutorial I am getting an Exception.</p>\n<pre><code>Exception in thread &quot;main&quot; java.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)\n    at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)\n    at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)\n    at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)\n    at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:329)\n    at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:372)\n    at java.base/sun.nio.cs.StreamDecoder.lockedRead(StreamDecoder.java:215)\n    at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:169)\n    at java.base/java.io.InputStreamReader.read(InputStreamReader.java:188)\n    at java.base/java.io.BufferedReader.fill(BufferedReader.java:160)\n    at java.base/java.io.BufferedReader.implReadLine(BufferedReader.java:370)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:347)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:436)\n    at Server.main(Server.java:17)\n</code></pre>\n<p>This is my <strong>Client</strong> code:</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class Client {\n    public static void main(String[] args) throws IOException {\n        Socket s = new Socket(&quot;localhost&quot;, 4999);\n\n        PrintWriter pr = new PrintWriter(s.getOutputStream());\n        pr.println(&quot;hello&quot;);\n        pr.flush();\n    }\n}\n</code></pre>\n<p>And this is my <strong>Server</strong> code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.nio.Buffer;\n\npublic class Server {\n    public static void main(String[] args) throws IOException {\n        ServerSocket ss = new ServerSocket(4999);\n        Socket s = ss.accept();\n        System.out.println(&quot;client connected&quot;);\n        InputStreamReader in = new InputStreamReader(s.getInputStream());\n        BufferedReader bf = new BufferedReader(in);\n        String str = bf.readLine();\n\n        System.out.println(&quot;client : &quot; + str);\n\n    }\n}\n</code></pre>\n<p>I tried to close the Client connection in the Client class with <code>s.close();</code> but the <em>same Exception</em> occurred.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9900,"page":117,"page_size":100}
